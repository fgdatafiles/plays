'use strict';(function(){var Q,fa,c,g,d,e,U,n,G,da,j,h,T,F,w,R,V,Y,ha,z,x,$,aa,ga,I,D,B,P,r,k,i,M,K,C,s,S,O,u,L,E;function v(a,b){function f(){}f.prototype=a;var c=new f,d;for(d in b)c[d]=b[d];b.toString!==Object.prototype.toString&&(c.toString=b.toString);return c}function ia(a){return a instanceof Array?function(){return y.iter(a)}:"function"==typeof a.iterator?q(a,a.iterator):a.iterator}function q(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=na++);var f;null==a.hx__closures__?a.hx__closures__={}:f=a.hx__closures__[b.__id__];null==f&&(f=function(){return f.method.apply(f.scope,arguments)},f.scope=a,f.method=b,a.hx__closures__[b.__id__]=f);return f}var l={},o=function(){return I.__string_rec(this,"")},Z=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};l.EReg=Z;Z.__name__=["EReg"];Z.prototype={matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)a=this.r.m[a];else throw"EReg::matched";return a},match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},__class__:Z};var y=function(){};l.HxOverrides=y;y.__name__=["HxOverrides"];y.dateStr=function(a){var b=a.getMonth()+1,f=a.getDate(),c=a.getHours(),d=a.getMinutes(),e=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>f?"0"+f:""+f)+" "+(10>c?"0"+c:""+c)+":"+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)};y.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return a=a.split(" "),b=a[0].split("-"),a=a[1].split(":"),new Date(b[0],b[1]-1,b[2],a[0],a[1],a[2]);default:throw"Invalid date format : "+a;}};y.cca=function(a,b){var f=a.charCodeAt(b);return f!=f?void 0:f};y.substr=function(a,b,f){if(null!=b&&0!=b&&null!=f&&0>f)return"";null==f&&(f=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>f&&(f=a.length+f-b);return a.substr(b,f)};y.remove=function(a,b){for(var f=0,c=a.length;f<c;){if(a[f]==b)return a.splice(f,1),!0;f++}return!1};y.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var W=function(){};l.Lambda=W;W.__name__=["Lambda"];W.array=function(a){for(var b=[],a=ia(a)();a.hasNext();){var f=a.next();b.push(f)}return b};W.exists=function(a,b){for(var f=ia(a)();f.hasNext();){var c=f.next();if(b(c))return!0}return!1};W.count=function(a,b){var f=0;if(null==b)for(var c=ia(a)();c.hasNext();)c.next(),f++;else for(c=ia(a)();c.hasNext();){var d=c.next();b(d)&&f++}return f};var ba=function(){this.length=0};l.List=ba;ba.__name__=["List"];ba.prototype={iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},push:function(a){this.h=a=[a,this.h];null==this.q&&(this.q=a);this.length++},add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},__class__:ba};var ea=function(){};l.IMap=ea;ea.__name__=["IMap"];var H=function(){};l.Reflect=H;H.__name__=["Reflect"];H.hasField=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};H.field=function(a,b){var f=null;try{f=a[b]}catch(c){}return f};H.setProperty=function(a,b,f){var c;if(a.__properties__&&(c=a.__properties__["set_"+b]))a[c](f);else a[b]=f};H.fields=function(a){var b=[];if(null!=a){var f=Object.prototype.hasOwnProperty,c;for(c in a)"__id__"!=c&&"hx__closures__"!=c&&f.call(a,c)&&b.push(c)}return b};H.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};H.compare=function(a,b){return a==b?0:a>b?1:-1};H.compareMethods=function(a,b){return a==b?!0:!H.isFunction(a)||!H.isFunction(b)?!1:a.scope==b.scope&&a.method==b.method&&null!=a.method};H.isEnumValue=function(a){return null!=a&&null!=a.__enum__};H.deleteField=function(a,b){if(!H.hasField(a,b))return!1;delete a[b];return!0};var t=function(){};l.Std=t;t.__name__=["Std"];t.string=function(a){return I.__string_rec(a,"")};t["int"]=function(a){return a|0};t.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==y.cca(a,1)||88==y.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};t.parseFloat=function(a){return parseFloat(a)};t.random=function(a){return 0>=a?0:Math.floor(Math.random()*a)};var ca=function(){this.b=""};l.StringBuf=ca;ca.__name__=["StringBuf"];ca.prototype={addSub:function(a,b,f){this.b+=null==f?y.substr(a,b,null):y.substr(a,b,f)},__class__:ca};var X=function(){};l.StringTools=X;X.__name__=["StringTools"];X.urlEncode=function(a){return encodeURIComponent(a)};X.urlDecode=function(a){return decodeURIComponent(a.split("+").join(" "))};X.isSpace=function(a,b){var f=y.cca(a,b);return 8<f&&14>f||32==f};X.ltrim=function(a){for(var b=a.length,f=0;f<b&&X.isSpace(a,f);)f++;return 0<f?y.substr(a,f,b-f):a};X.rtrim=function(a){for(var b=a.length,f=0;f<b&&X.isSpace(a,b-f-1);)f++;return 0<f?y.substr(a,0,b-f):a};X.trim=function(a){return X.ltrim(X.rtrim(a))};X.replace=function(a,b,f){return a.split(b).join(f)};var J=l.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};J.TNull=["TNull",0];J.TNull.toString=o;J.TNull.__enum__=J;J.TInt=["TInt",1];J.TInt.toString=o;J.TInt.__enum__=J;J.TFloat=["TFloat",2];J.TFloat.toString=o;J.TFloat.__enum__=J;J.TBool=["TBool",3];J.TBool.toString=o;J.TBool.__enum__=J;J.TObject=["TObject",4];J.TObject.toString=o;J.TObject.__enum__=J;J.TFunction=["TFunction",5];J.TFunction.toString=o;J.TFunction.__enum__=J;J.TClass=function(a){a=["TClass",6,a];a.__enum__=J;a.toString=o;return a};J.TEnum=function(a){a=["TEnum",7,a];a.__enum__=J;a.toString=o;return a};J.TUnknown=["TUnknown",8];J.TUnknown.toString=o;J.TUnknown.__enum__=J;var N=function(){};l.Type=N;N.__name__=["Type"];N.getClass=function(a){return null==a?null:a.__class__};N.getClassName=function(a){return a.__name__.join(".")};N.getEnumName=function(a){return a.__ename__.join(".")};N.resolveClass=function(a){a=l[a];return null==a||!a.__name__?null:a};N.resolveEnum=function(a){a=l[a];return null==a||!a.__ename__?null:a};N.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";}};N.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};N.createEnum=function(a,b,f){var c=H.field(a,b);if(null==c)throw"No such constructor "+b;if(H.isFunction(c)){if(null==f)throw"Constructor "+b+" need parameters";return c.apply(a,f)}if(null!=f&&0!=f.length)throw"Constructor "+b+" does not need parameters";return c};N.getEnumConstructs=function(a){return a.__constructs__.slice()};N["typeof"]=function(a){switch(typeof a){case "boolean":return J.TBool;case "string":return J.TClass(String);case "number":return Math.ceil(a)==a%2147483648?J.TInt:J.TFloat;case "object":if(null==a)return J.TNull;var b=a.__enum__;if(null!=b)return J.TEnum(b);a=a.__class__;return null!=a?J.TClass(a):J.TObject;case "function":return a.__name__||a.__ename__?J.TObject:J.TFunction;case "undefined":return J.TNull;default:return J.TUnknown}};N.allEnums=function(a){for(var b=[],f=a.__constructs__,c=0;c<f.length;){var d=f[c];++c;d=H.field(a,d);H.isFunction(d)||b.push(d)}return b};l.XmlType={__ename__:["XmlType"],__constructs__:[]};var A=function(){};l.Xml=A;A.__name__=["Xml"];A.parse=function(a){return F.Parser.parse(a)};A.createElement=function(a){var b=new A;b.nodeType=A.Element;b._children=[];b._attributes=new w.StringMap;b.set_nodeName(a);return b};A.createPCData=function(a){var b=new A;b.nodeType=A.PCData;b.set_nodeValue(a);return b};A.createCData=function(a){var b=new A;b.nodeType=A.CData;b.set_nodeValue(a);return b};A.createComment=function(a){var b=new A;b.nodeType=A.Comment;b.set_nodeValue(a);return b};A.createDocType=function(a){var b=new A;b.nodeType=A.DocType;b.set_nodeValue(a);return b};A.createProcessingInstruction=function(a){var b=new A;b.nodeType=A.ProcessingInstruction;b.set_nodeValue(a);return b};A.createDocument=function(){var a=new A;a.nodeType=A.Document;a._children=[];return a};A.prototype={addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&y.remove(a._parent._children,a);a._parent=this;this._children.push(a)},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var f=this._children[a];if(f.nodeType==A.Element)return f;a++}return null},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,f=this.x.length;b<f;){var c=this.x[b];if(c.nodeType==A.Element&&c._nodeName==a)break;b++}this.cur=b;return b<f},next:function(){for(var b=this.cur,f=this.x.length;b<f;){var c=this.x[b];b++;if(c.nodeType==A.Element&&c._nodeName==a)return this.cur=b,c}return null}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==A.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var f=this.x[a],a=a+1;if(f.nodeType==A.Element)return this.cur=a,f}return null}}},iterator:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},exists:function(a){if(this.nodeType!=A.Element)throw"bad nodeType";return this._attributes.exists(a)},set:function(a,b){if(this.nodeType!=A.Element)throw"bad nodeType";this._attributes.set(a,b)},get:function(a){if(this.nodeType!=A.Element)throw"bad nodeType";return this._attributes.get(a)},set_nodeValue:function(a){if(this.nodeType==A.Element||this.nodeType==A.Document)throw"bad nodeType";return this._nodeValue=a},get_nodeValue:function(){if(this.nodeType==A.Element||this.nodeType==A.Document)throw"bad nodeType";return this._nodeValue},set_nodeName:function(a){if(this.nodeType!=A.Element)throw"bad nodeType";return this._nodeName=a},get_nodeName:function(){if(this.nodeType!=A.Element)throw"bad nodeType";return this._nodeName},__class__:A};Q=function(){};fa=void 0;c=void 0;g=void 0;d=void 0;l["com.disney_channel.star_wars_rebels.chopper_chase.DocumentApp"]=Q;Q.__name__=["com","disney_channel","star_wars_rebels","chopper_chase","DocumentApp"];Q.main=function(){B.init();Q._fillEntity=new P;Q._fillSprite=new r.FillSprite(0,1024,1024);Q._fillEntity.add(Q._fillSprite);B.root.addChild(Q._fillEntity);e.JSEmbedProxy.get_exists()?e.JSEmbedProxy.get_isCrossdomain()?e.WorkinCloud.get_instance().get_assets().setCrossdomainBaseUrl(Q.appendAssetsToUrl(e.JSEmbedProxy.get_base())):e.WorkinCloud.get_instance().get_assets().set_baseUrl(Q.trimUrl(e.JSEmbedProxy.get_base())):e.WorkinCloud.get_instance().get_assets().set_baseUrl("");e.WorkinCloud.get_instance().get_assets().load(Q._onBootstrapLoad,null,["bootstrap"])};Q._onBootstrapLoad=function(){Q._initServices();R.delay(Q._initMain,800)};Q._initMain=function(){Q._main=new fa};Q._initServices=function(){for(var a=e.WorkinCloud.get_instance().get_assets().getXML(c.ConstantsApp.CONFIG_XML_PATH).node.resolve("services").nodes.resolve("service").iterator();a.hasNext();){var b=a.next();switch(b.att.resolve("type").toString()){case "analytics":"true"==b.att.resolve("enabled").toString()&&(e.WorkinCloud.get_instance().log("[DocumentApp](_initServices) initAnalytics"),U.ServiceAnalytics.init(b.att.resolve("id").toString()))}}};Q.trimUrl=function(a){if(""==a)return"";if(0>a.indexOf("http"))return"/"==a.charAt(0)&&(a=y.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=y.substr(a,b,a.length-b);return a=Q.appendAssetsToUrl(a)};Q.appendAssetsToUrl=function(a){if(0==a.length)return a;"/"!=a.charAt(a.length-1)&&(a+="/");a.indexOf("/assets")<a.length-9&&(a+="assets/");return a};fa=function(){this._MIN_FPS=1/15;this._RATE_REFRESH_SCALE=0.4;e.WorkinCloud.get_instance().log("[Main] Constructed");this._locationChunk="";this._root=B.root;this._timeline=new P;this._root.addChild(this._timeline);B.uncaughtError.connect(q(this,this.errorHandler));e.WorkinCloud.get_instance().get_input().prime();this._scaleSprite=new r.Sprite;this._timeline.add(this._scaleSprite);this._layerWorld=new P;this._layerUI=new P;this._timeline.addChild(this._layerWorld);this._timeline.addChild(this._layerUI);this._dt=0;this._timerRefreshScale=0.0010;this._isUIActive=this._isWorldActive=!1;this._flagFirstPlay=!0;this._flagInitialLoadComplete=this._flagWebAudioUnlocked=!1;this._flagGameplayPaused=!0;this._flagJSEmbedExists=this._flagJSEmbedPauseState=!1;e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_LOW_QUALITY_MOBILE,!1);if(window.CocoonJS){var a="IPHONE_1,IPHONE_3G,IPHONE_3GS,IPHONE_4,IPHONE_4S,IPAD_1,IPAD_2,IPAD_MINI_1,IPOD_1,IPOD_2,IPOD_3,IPOD_4,IPHONE_SIMULATOR,IPAD_SIMULATOR,KINDLE FIRE,KFOT,KFTT".split(","),b=CocoonJS.App.getDeviceInfo();null!=b&&null!=b.model&&(b=b.model.toUpperCase(),y.remove(a,b)&&e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_LOW_QUALITY_MOBILE,!0))}e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_LOW_QUALITY_MOBILE)?CocoonJS.App.setTextureReduction(512):CocoonJS.App.setTextureReduction(1024);e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_SCALE_TYPE,"none");I.__instanceof(B._platform.getStage(),k.html.HtmlStage)&&(c.ConstantsApp.scaleFactor=I.__cast(B._platform.getStage(),k.html.HtmlStage).scaleFactor);this._flagJSEmbedExists=e.JSEmbedProxy.get_exists();e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_JSEMBED_EXISTS,this._flagJSEmbedExists);this._flagJSEmbedExists&&e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_SCALE_TYPE,e.JSEmbedProxy.get_scaleType());c.ConstantsApp.OPTION_FILL_CANVAS="fill"==e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SCALE_TYPE)||"fillto"==e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SCALE_TYPE);this._changeActions=[];this._flowstack=[];this._addEventListeners();this._beginEngine()};l["com.disney_channel.star_wars_rebels.chopper_chase.Main"]=fa;fa.__name__=["com","disney_channel","star_wars_rebels","chopper_chase","Main"];fa.prototype={_disposeWorld:function(){this._isWorldActive&&(e.WorkinCloud.get_instance().log("[Main](_disposeWorld)"),this._isWorldActive=!1,this._world.dispose(),this._world=null)},_onEventInterfaceChange:function(a){this._executeInterfaceChange(a.flowId,a.screenId)},_handleWebAudioUnlock:function(){this._flagWebAudioUnlocked||(this._flagWebAudioUnlocked=!0,e.WorkinCloud.get_instance().get_sound().playSound("audio/silent"))},_onEventFilesLoading:function(a){a.get_data().value>=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_LOADING_PROGRESS)&&e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_LOADING_PROGRESS,a.get_data().value)},_onEventInput:function(a){this._handleWebAudioUnlock();e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)||(this._isUIActive&&this._ui.handleInput(a),this._isWorldActive&&this._world.handleInput(a))},_onFlowEvent:function(a){this._addFlowEvent(a.flowId)},_onMuteToggle:function(){e.WorkinCloud.get_instance().get_sound().setMute(!e.WorkinCloud.get_instance().get_sound().getMute())},_disableInput:function(){e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(n.WMEventInput.EVENT_INPUT,q(this,this._onEventInput))},_enableInput:function(){e.WorkinCloud.get_instance().get_dispatcher().addEventListener(n.WMEventInput.EVENT_INPUT,q(this,this._onEventInput))},_onAppClose:function(){var a=e.WorkinCloud.get_instance().getValue(c.ConstantsApp.OBJECT_VIDEO);null!=a&&document.body.removeChild(a);e.WorkinCloud.get_instance().log("[Main](_onAppClose)");U.ServiceAnalytics.callOmnitureFunction("trackLink('Game End', {}, 'event2');");U.ServiceAnalytics.callOmnitureFunction("trackLink('Time Spent', {}, 'event10="+this._timerAnalytics+"');");R.delay(function(){eval("abcdm.abc.com.GameApis.gameCloseComplete();")},500)},_onAppActivated:function(){e.WorkinCloud.get_instance().get_sound().setMute(e.WorkinCloud.get_instance().get_sound().getMute())},_addEventListeners:function(){eval('typeof abcdm !== "undefined"')&&(eval("abcdm.abc.com.GameApis").onClose=q(this,this._onAppClose),eval("abcdm.abc.com.GameApis").onActivated=q(this,this._onAppActivated));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(n.WMEventUpdate.EVENT_UPDATE,q(this,this._onEventUpdate));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_MUTE_TOGGLE,q(this,this._onMuteToggle));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(n.WMEventFlow.EVENT_FLOW,q(this,this._onFlowEvent));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE,q(this,this._onWorldGenerationComplete));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(G.ConstantsCloud.EVENT_FILES_LOADING,q(this,this._onEventFilesLoading))},_executeInterfaceChange:function(a,b){for(var f=this._changeActions.length;0<f;)f--,this._changeActions[f].get_screenId()==b&&this._changeActions[f].get_changeEvent()==a&&(this._changeActions[f].get_action()(),this._changeActions.splice(f,1))},_newOnChangeAction:function(a,b,f){this._changeActions.push(new g.screens.data.ChangeActionData(a,b,f))},_unpauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!1);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsApp.EVENT_UNPAUSE));e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_PAUSED,!1)},_pauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!0);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsApp.EVENT_PAUSE));e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_PAUSED,!0)},_executeFlowStack:function(a){if(!this._ui.get_isTransition())switch(a){case c.ConstantsScreen.FLOW_SPLASH_PLAY:e.WorkinCloud.get_instance().get_sound().playMusic("music_menu",0.5);this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_MAIN_MENU);break;case c.ConstantsScreen.FLOW_NEW_GAME:this._ui.openScreen(c.ConstantsScreen.SCREEN_MISSION_SELECT,!1);break;case c.ConstantsScreen.FLOW_SELECTED_LEVEL:this._gotoAndPlayGame();break;case c.ConstantsScreen.FLOW_TEST_MINIGAME:this._gotoAndPlayGame();break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP:this._ui.openScreen(c.ConstantsScreen.SCREEN_HELP,!1);break;case c.ConstantsScreen.FLOW_BACK_TO_MAIN_MENU:this._ui.closeScreen(c.ConstantsScreen.SCREEN_MISSION_SELECT,!0);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsApp.EVENT_RETURN_TO_MAIN_MENU));break;case c.ConstantsScreen.FLOW_SHOP:this._ui.openScreen(c.ConstantsScreen.SCREEN_SHOP,!1);break;case c.ConstantsScreen.FLOW_SHOP_CLOSE:this._ui.closeScreen(c.ConstantsScreen.SCREEN_SHOP);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsApp.EVENT_RETURN_TO_MAIN_MENU));break;case c.ConstantsScreen.FLOW_HELP_CLOSE:this._ui.closeScreen(c.ConstantsScreen.SCREEN_HELP);break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU:this._pauseGameplay();this._ui.openScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU,!1);break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE:this._unpauseGameplay();this._ui.closeScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU);break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT:this._ui.openScreen(c.ConstantsScreen.SCREEN_QUIT_CONFIRM,!1);break;case c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES:c.ConstantsApp.OPTION_HAS_MENU_MUSIC&&e.WorkinCloud.get_instance().get_sound().playMusic("audio/menu",0.5);e.WorkinCloud.get_instance().get_sound().playMusic("music_menu",0.5);this._resetFlagsResults();this._gotoEndGame(!1);break;case c.ConstantsScreen.FLOW_ENTER_CODE_OPEN:this._ui.openScreen(c.ConstantsScreen.SCREEN_ENTER_CODE,!1);break;case c.ConstantsScreen.FLOW_ENTER_CODE_CLOSE:this._ui.closeScreen(c.ConstantsScreen.SCREEN_ENTER_CODE);break;case c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO:this._ui.closeScreen(c.ConstantsScreen.SCREEN_QUIT_CONFIRM);break;case c.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN:this._onFlowEvent(n.WMEventFlow.request(c.ConstantsScreen.FLOW_BRANCH_GAME_WIN));break;case c.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE:this._onFlowEvent(n.WMEventFlow.request(c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE));break;case c.ConstantsScreen.FLOW_BRANCH_GAME_WIN:e.WorkinCloud.get_instance().get_sound().playMusic("music_menu",0.5);this._pauseGameplay();this._resetFlagsResults();this._gotoEndGame(!0);break;case c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE:e.WorkinCloud.get_instance().get_sound().playMusic("music_menu",0.5);this._pauseGameplay();this._resetFlagsResults();this._gotoEndGame(!1);e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.INT_SCORE);e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.INT_LIVES);break;case c.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN:this._disposeWorld();e.WorkinCloud.get_instance().get_assets().disposeChunk("mission_"+
t.string(e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION).id));e.WorkinCloud.get_instance().sharedObjectDelete(c.ConstantsApp.OBJECT_MISSION);this._resetGameResults();this._resetFlagsResults();this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_MAIN_MENU,!0);break;case c.ConstantsScreen.FLOW_LOAD_CLOSE:this._generateWorld();break;case c.ConstantsScreen.FLOW_MINIGAME_CLOSE:this._ui.closeScreen(c.ConstantsScreen.SCREEN_MINIGAME,!0);this._ui.isScreenOpen(c.ConstantsScreen.SCREEN_LOADING)?(e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventFlow.request(c.ConstantsScreen.FLOW_LOAD_CLOSE)),null):(this._disableInput(),this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_SPLASH,!0),e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsScreen.FLOW_SPLASH_CLICKTRAY)),R.delay(q(this,this._enableSplash),1200));break;case c.ConstantsScreen.FLOW_MINIGAME_MENU:this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_MINIGAME_MENU,!0);break;case c.ConstantsScreen.FLOW_ACHIEVEMENT_POPUP:this._ui.openScreen(c.ConstantsScreen.SCREEN_ACHIEVEMENT_POPUP,!1);break;case c.ConstantsScreen.FLOW_ACHIEVEMENT_POPUP_CLOSE:this._ui.closeScreen(c.ConstantsScreen.SCREEN_ACHIEVEMENT_POPUP);break;case c.ConstantsScreen.FLOW_ACHIEVEMENT:this._ui.openScreen(c.ConstantsScreen.SCREEN_ACHIEVEMENTS,!1);break;case c.ConstantsScreen.FLOW_ACHIEVEMENT_CLOSE:this._ui.closeScreen(c.ConstantsScreen.SCREEN_ACHIEVEMENTS);break;case c.ConstantsScreen.FLOW_VIDEO_OPEN:this._ui.openScreen(c.ConstantsScreen.SCREEN_VIDEO,!1);break;case c.ConstantsScreen.FLOW_VIDEO_CLOSE:this._ui.closeScreen(c.ConstantsScreen.SCREEN_VIDEO);break;case c.ConstantsScreen.FLOW_MISSION_COMPLETE:e.WorkinCloud.get_instance().get_sound().stopMusic(),e.WorkinCloud.get_instance().get_sound().playSound("sting_win_mission",0.3),this._ui.openScreen(c.ConstantsScreen.SCREEN_END_GAME,!1)}},_runFlowStack:function(){if(0!=this._flowstack.length)for(;0<this._flowstack.length;)this._executeFlowStack(this._flowstack[0]),this._flowstack.shift()},_addFlowEvent:function(a){this._flowstack.push(a)},_onEventUpdate:function(a){this._dt=a.get_dt();this._dt=Math.round(1E3*this._dt)/1E3;this._dt>this._MIN_FPS&&(this._dt=this._MIN_FPS);this._timerAnalytics+=this._dt;this._flagJSEmbedExists&&(e.JSEmbedProxy.get_isPaused()!=this._flagJSEmbedPauseState&&((this._flagJSEmbedPauseState=e.JSEmbedProxy.get_isPaused())?this._pauseGameplay(!1):this._flagGameplayPaused||this._unpauseGameplay()),this._timerRefreshScale-=this._dt,0>=this._timerRefreshScale&&(this._timerRefreshScale=this._RATE_REFRESH_SCALE,this._flagInitialLoadComplete&&e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE),this._flagJSEmbedExists&&(a=c.ConstantsApp.get_CANVAS_SCALE(),a!=this._scaleSprite.scaleX._value&&(this._scaleSprite.scaleX.set__(this._scaleSprite.scaleY.set__(a)),e.WorkinCloud.get_instance().get_input().set_scale(a),c.ConstantsApp.OPTION_FILL_CANVAS&&(this._scaleSprite.x.set__(-1*c.ConstantsApp.get_CANVAS_LEFT_ABSOLUTE()),this._scaleSprite.y.set__(-1*c.ConstantsApp.get_CANVAS_TOP_ABSOLUTE()),e.WorkinCloud.get_instance().get_input().get_offset().to(c.ConstantsApp.get_CANVAS_LEFT(),c.ConstantsApp.get_CANVAS_TOP())),e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_RESIZE_CANVAS,{scale:a}))))));e.WorkinCloud.get_instance().update(this._dt);this._isUIActive&&this._ui.update(this._dt);this._isWorldActive&&(this._world.update(this._dt),this._world.render());e.WorkinCloud.get_instance().get_sound().update(this._dt);e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_GAME_LOSE)?this._onFlowEvent(n.WMEventFlow.request(c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE)):e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_GAME_WIN)?this._onFlowEvent(n.WMEventFlow.request(c.ConstantsScreen.FLOW_BRANCH_GAME_WIN)):e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_LEVEL_LOSE)?this._onFlowEvent(n.WMEventFlow.request(c.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE)):e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_LEVEL_WIN)&&this._onFlowEvent(n.WMEventFlow.request(c.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN));this._runFlowStack()},_generateWorld:function(){this._isWorldActive&&this._disposeWorld();e.WorkinCloud.get_instance().log("[Main](_generateWorld)");this._isWorldActive=!0;this._world=new d.World(this._layerWorld);c.ConstantsApp.OPTION_SHOW_LOADING_ON_WORLD_GEN_ALWAYS&&this._gotoLoadScreen(!1)},_resetGameResults:function(){e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.INT_SCORE);e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.INT_LEVEL);e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.INT_CREDITS_SESSION);e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.STRING_LEVEL_ID);e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.FLOAT_STRESS)},_resetFlagsResults:function(){e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.BOOL_GAME_WIN);e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.BOOL_GAME_LOSE);e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.BOOL_LEVEL_WIN);e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.BOOL_LEVEL_LOSE)},_gotoEndGame:function(a){(this._flagWonPreviousGame=a)?(this._newOnChangeAction(c.ConstantsScreen.SCREEN_END_LEVEL,c.ConstantsScreen.CHANGE_OPEN_COMPLETE,q(this,this._disposeWorld)),this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_END_LEVEL)):(this._newOnChangeAction(c.ConstantsScreen.SCREEN_ABORT,c.ConstantsScreen.CHANGE_OPEN_COMPLETE,q(this,this._disposeWorld)),this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_ABORT))},_enableSplash:function(){e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)||c.ConstantsApp.OPTION_HAS_MENU_MUSIC&&e.WorkinCloud.get_instance().get_sound().playMusic("audio/menu",0.5);this._ui.getScreen(c.ConstantsScreen.SCREEN_SPLASH).open(!1);this._enableInput()},_onWorldGenerationCompleteDelay:function(){this._world.start();this._unpauseGameplay()},_onWorldGenerationComplete:function(){R.delay(q(this,this._onWorldGenerationCompleteDelay),300);this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_GAMEPLAY_HUD,!0)},_gotoAndPlayGame:function(){var a;a=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_QUALITY);if(0==a)a="gameplay_sd";else if(1==a)a="gameplay_hd";else throw"[Main](_gotoAndPlayGame) Error: Not expecting quality flag "+a+". Nothing loaded.";var b;b=G.ConstantsCloud.getSupportsAllAudio()?"gameplay_audio_with_soundfx":"gameplay_audio_only_music";var f=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION).steps[e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_LEVEL)].loc,f=f.substring(0,3),m="";switch(f){case "GHO":m="gameplay_loc_ghost";break;case "IMP":m="gameplay_loc_imperial"}this._locationChunk=m;this._loadChunks([a,b,"mission_"+t.string(e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION).id)],q(this,this._eventLoadCompleteGameplay),1200)&&(this._isWorldActive?e.WorkinCloud.get_instance().log("[Main](_gotoAndPlayGame) World already exists. Using existing world instead of creating a new one."):this._gotoLoadScreen())},_generateUI:function(){this._isUIActive=!0;this._ui.addScreen(c.ConstantsScreen.SCREEN_LOADING,g.screens.ScreenLoading);this._ui.addScreen(c.ConstantsScreen.SCREEN_MINIGAME,g.screens.ScreenMinigame);this._ui.addScreen(c.ConstantsScreen.SCREEN_MINIGAME_MENU,g.screens.ScreenMinigameMenu);this._ui.addScreen(c.ConstantsScreen.SCREEN_CUTSCENE_BORDERS,g.screens.ScreenGeneric,"ui/cutscene/cutscene_border");this._ui.addScreen(c.ConstantsScreen.SCREEN_SPLASH,g.screens.ScreenSplash,"starfield");this._ui.addScreen(c.ConstantsScreen.SCREEN_MAIN_MENU,g.screens.ScreenMainMenu);this._ui.addScreen(c.ConstantsScreen.SCREEN_MISSION_SELECT,g.screens.ScreenEpisodeSelect);this._ui.addScreen(c.ConstantsScreen.SCREEN_HELP,g.screens.ScreenHelp);this._ui.addScreen(c.ConstantsScreen.SCREEN_SHOP,g.screens.ScreenShop);this._ui.addScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU,g.screens.ScreenGameplayMenu);this._ui.addScreen(c.ConstantsScreen.SCREEN_QUIT_CONFIRM,g.screens.ScreenQuitConfirm);this._ui.addScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_HUD,g.screens.ScreenGameplayHUD);this._ui.addScreen(c.ConstantsScreen.SCREEN_END_GAME,g.screens.ScreenEndGame);this._ui.addScreen(c.ConstantsScreen.SCREEN_END_LEVEL,g.screens.ScreenEndLevel);this._ui.addScreen(c.ConstantsScreen.SCREEN_ABORT,g.screens.ScreenAbort);this._ui.addScreen(c.ConstantsScreen.SCREEN_PAUSE_ALERT,g.screens.ScreenPauseAlert);this._ui.addScreen(c.ConstantsScreen.SCREEN_ENTER_CODE,g.screens.ScreenEnterCode);this._ui.addScreen(c.ConstantsScreen.SCREEN_ACHIEVEMENT_POPUP,g.screens.ScreenAchievementPopup);this._ui.addScreen(c.ConstantsScreen.SCREEN_ACHIEVEMENTS,g.screens.ScreenAchievements);this._ui.addScreen(c.ConstantsScreen.SCREEN_VIDEO,g.screens.ScreenVideo);this._ui.get_dispatcher().addEventListener(n.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT,q(this,this._onEventInterfaceChange));null},_registerInput:function(){e.WorkinCloud.get_instance().get_input().registerInput(c.ConstantsApp.INPUT_LEFT,[i.Key.Left,i.Key.A]);e.WorkinCloud.get_instance().get_input().registerInput(c.ConstantsApp.INPUT_RIGHT,[i.Key.Right,i.Key.D]);e.WorkinCloud.get_instance().get_input().registerInput(c.ConstantsApp.INPUT_UP,[i.Key.Up,i.Key.W],[c.ConstantsApp.VIRTUAL_JUMP]);e.WorkinCloud.get_instance().get_input().registerInput(c.ConstantsApp.INPUT_DOWN,[i.Key.Down,i.Key.S]);e.WorkinCloud.get_instance().get_input().registerInput(c.ConstantsApp.INPUT_SPACE,[i.Key.Z,i.Key.Space],[c.ConstantsApp.VIRTUAL_FLASH])},_setDefaults:function(){e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_PAUSED,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_GAME_WIN,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_GAME_LOSE,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_LEVEL_WIN,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_LEVEL_LOSE,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_SHOP_OPEN,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_CODE_UNLOCK,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_PRELOAD_LOADED,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_INITIAL_LOADED,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_GAMEPLAY_LOADED,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_TESTING_MINIGAMES,!1);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_TOUCH_DEVICE,B._platform.getTouch().get_supported());var a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.PROGRESS_ID);(null==a||0==H.fields(a).length)&&e.WorkinCloud.get_instance().sharedObjectSetData(c.ConstantsApp.PROGRESS_ID,{unlocked:[!0,!0,!0,!0,!1,!1,!1,!1,!1,!1,!1,!1,!1],played:[0,0,0,0,0,0,0,0,0,0,0,0,0],completed:0});a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.STORE_ID);(null==a||0==H.fields(a).length)&&e.WorkinCloud.get_instance().sharedObjectSetData(c.ConstantsApp.STORE_ID,{credits:0,items:[0,0,0,0,0,0,0,0]});a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.STORE_ID);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MAX_MISSION_NUMBER,13);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HEALTH,3);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_LIVES,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_SCORE,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_LEVEL,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_CREDITS,a.credits);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_CREDITS_SESSION,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_LOADING_PROGRESS,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_LOADING_SCORE,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ACHIEVEMENT_SCORE,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_QUALITY,c.ConstantsApp.OPTION_FORCE_LOW_QUALITY?0:1);e.WorkinCloud.get_instance().setFloat(c.ConstantsApp.FLOAT_STRESS,0);e.WorkinCloud.get_instance().setFloat(c.ConstantsApp.FLOAT_MAX_Y_INPUT_RANGE,c.ConstantsApp.STAGE_HEIGHT);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_SHOWING_MESSAGE,!1);c.Inventory.setDefaults();e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_VIDEO_NAME,"SWR-002_clip_08");e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_LEVEL_ID,"level1");e.WorkinCloud.get_instance().get_sound().setMute(c.ConstantsApp.OPTION_SILENCE_AUDIO)},_beginEngine:function(){e.WorkinCloud.get_instance().log("[Main](_beginEngine)");this._timeline.add(new da.ComponentUpdater);this._parseConfigXML();this._ui=new g.ScreenManager(this._layerUI);this._setDefaults();this._generateUI();this._registerInput();this._beginPreload()},_onInitPoolComplete:function(){0<e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_GAME_CLASS)?e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsScreen.FLOW_LOADING_DONE)):(e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_INITIAL_LOADED,!0),this._flagInitialLoadComplete=!0,this._enableSplash())},_onEventInitPoolComplete:function(){e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(j.PoolManager.ALL_POOLS_FULL,q(this,this._onEventInitPoolComplete));e.WorkinCloud.get_instance().unpauseStack()},_initPools:function(){e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_LOADING_PROGRESS,100);e.WorkinCloud.get_instance().pauseStack();e.WorkinCloud.get_instance().get_dispatcher().addEventListener(j.PoolManager.ALL_POOLS_FULL,q(this,this._onEventInitPoolComplete));e.WorkinCloud.get_instance().get_poolManager().addPool(c.ConstantsApp.POOL_ELEMENT_MINIGAME,d.elements.MinigameElement,20);e.WorkinCloud.get_instance().get_poolManager().addPool(c.ConstantsApp.POOL_ELEMENT,j.Element,10)},_eventLoadCompleteInitial:function(){e.WorkinCloud.get_instance().log("[Main](_eventLoadCompleteInitial) Initial load complete!");e.WorkinCloud.get_instance().stack([q(this,this._initPools),q(this,this._onInitPoolComplete)])},_eventLoadCompleteGameplay:function(){e.WorkinCloud.get_instance().log("[Main](_eventLoadCompleteGameplay) Gameplay load complete!")},_loadChunksDelayCallback:function(){this._loadChunks(this._loadChunksCurrent,this._loadCallbackMethod,0,!1)},_gotoLoadScreen:function(a){null==a&&(a=!0);this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_LOADING,!1);0<e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_GAME_CLASS)&&a&&this._ui.openScreen(c.ConstantsScreen.SCREEN_MINIGAME,!1)},_loadChunks:function(a,b,f,m){null==m&&(m=!0);null==f&&(f=0);for(var d=0,h=!0;d<a.length;)e.WorkinCloud.get_instance().get_assets().isChunkLoaded(a[d])||(h=!1),d++;if(h)return!0;e.WorkinCloud.get_instance().get_assets().isLoading()||e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_LOADING_PROGRESS,0);this._loadChunksCurrent=a;this._loadCallbackMethod=b;if(0<f)return R.delay(q(this,this._loadChunksDelayCallback),f),m&&this._gotoLoadScreen(),!1;b=[];for(d=0;d<a.length;)e.WorkinCloud.get_instance().get_assets().isChunkLoaded(a[d])||b.push(a[d]),d++;e.WorkinCloud.get_instance().get_assets().load(this._loadCallbackMethod,b);m&&this._gotoLoadScreen();return!1},_determineLoadProcess:function(a){e.WorkinCloud.get_instance().log("[Main](_determineLoadProcess) Performance benchmark: "+a);a=a<c.ConstantsApp.benchmarkGoal?0:1;e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_QUALITY,a);this._beginInitialLoad(a)},_beginInitialLoad:function(a){e.WorkinCloud.get_instance().log("[Main](_beginInitialLoad) Beginning initial load.");if(0==a)a="initial_sd";else if(1==a)a="initial_hd";else throw"[Main](_beginInitialLoad) Error: Not expecting quality flag "+a+". Nothing loaded.";var b;b=G.ConstantsCloud.getSupportsAllAudio()?"initial_audio_with_soundfx":"initial_audio_only_music";this._loadChunks([a,b],q(this,this._eventLoadCompleteInitial),1200,!1)},_onPreloadFinished:function(){e.WorkinCloud.get_instance().log("[Main](_onPreloadFinished) Preload complete!");e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_PRELOAD_LOADED,!0);0<e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_GAME_CLASS)&&(this._ui.openScreen(c.ConstantsScreen.SCREEN_MINIGAME,!1),this._enableInput());var a=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_QUALITY);-1==a?M.Benchmark.start(q(this,this._determineLoadProcess)):this._beginInitialLoad(a)},_beginPreload:function(){this._timerAnalytics=0;e.WorkinCloud.get_instance().log("[Main](_beginPreload) Beginning preload (contains fonts).");this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_SPLASH,!1);0<e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_GAME_CLASS)&&this._ui.getScreen(c.ConstantsScreen.SCREEN_SPLASH).suspend();e.WorkinCloud.get_instance().get_assets().load(q(this,this._onPreloadFinished),["preload"],["fonts_"+e.WorkinCloud.get_instance().getString(G.ConstantsCloud.STRING_REGION_ID)])},_parseConfigXML:function(){e.WorkinCloud.get_instance().log("[Main](_parseConfigXML) Parse Config XML: "+c.ConstantsApp.CONFIG_XML_PATH);for(var a=e.WorkinCloud.get_instance().get_assets().getXML(c.ConstantsApp.CONFIG_XML_PATH),b=a.node.resolve("chunks").nodes.resolve("chunk").iterator();b.hasNext();){var f=b.next();e.WorkinCloud.get_instance().get_assets().addChunk(f.att.resolve("id").toString(),f)}b=!1;B._platform.getTouch().get_supported()&&(b="false"==a.node.resolve("quality").att.resolve("forceLowQualityMobile")?!1:!0);!0==b||e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_LOW_QUALITY_MOBILE)?e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_QUALITY,0):e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_QUALITY,t.parseInt(a.node.resolve("quality").att.resolve("index")));a.hasNode.resolve("minigame")?e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_GAME_CLASS,t.parseInt(a.node.resolve("minigame").att.resolve("type"))):e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_GAME_CLASS,0);"true"==a.node.resolve("minigametest").att.resolve("enabled").toString()?(e.WorkinCloud.get_instance().log("[Main] Minigame Test Online"),c.ConstantsApp.OPTION_SHOW_MINIGAME_MENU=!0):c.ConstantsApp.OPTION_SHOW_MINIGAME_MENU=!1;"true"==a.node.resolve("videotest").att.resolve("enabled").toString()?(e.WorkinCloud.get_instance().log("[Main] Video Test Online"),c.ConstantsApp.OPTION_VIDEO_TEST=!0):c.ConstantsApp.OPTION_VIDEO_TEST=!1;"true"==a.node.resolve("videotest").att.resolve("enabled").toString()?(e.WorkinCloud.get_instance().log("[Main] All missions are automatically unlocked."),c.ConstantsApp.OPTION_ALL_MISSIONS=!0):c.ConstantsApp.OPTION_ALL_MISSIONS=!1;a.hasNode.resolve("unlockCode")?e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_UNLOCK_CODE,a.node.resolve("unlockCode").get_innerData()):e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_UNLOCK_CODE,"000000");e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_ALLOW_UNLOCK,!1);a.hasNode.resolve("unlockEnabled")&&e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_ALLOW_UNLOCK,"true"==a.node.resolve("unlockEnabled").get_innerData());"true"==a.node.resolve("achievements").att.resolve("enabled").toString()&&(e.WorkinCloud.get_instance().log("[Main] Init Achievements"),e.WorkinCloud.get_instance().get_achievements().init());e.WorkinCloud.get_instance().setString(G.ConstantsCloud.STRING_REGION_ID,t.string(a.node.resolve("localization").node.resolve("region").get_innerData()));e.WorkinCloud.get_instance().log("[Main] Localization : Set Region: "+
e.WorkinCloud.get_instance().getString(G.ConstantsCloud.STRING_REGION_ID))},errorHandler:function(a){e.WorkinCloud.get_instance().log("Error:"+a)},__class__:fa};c={};c.Achievement=l["com.disney_channel.star_wars_rebels.chopper_chase.data.Achievement"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,data,Achievement".split(","),__constructs__:"ACHIEVEMENT_FIRSTPLAY,ACHIEVEMENT_LEVEL2,ACHIEVEMENT_SCORE100,ACHIEVEMENT_LEVEL5,ACHIEVEMENT_SCORE1000,ACHIEVEMENT_CODEUNLOCKED".split(",")};c.Achievement.ACHIEVEMENT_FIRSTPLAY=["ACHIEVEMENT_FIRSTPLAY",0];c.Achievement.ACHIEVEMENT_FIRSTPLAY.toString=o;c.Achievement.ACHIEVEMENT_FIRSTPLAY.__enum__=c.Achievement;c.Achievement.ACHIEVEMENT_LEVEL2=["ACHIEVEMENT_LEVEL2",1];c.Achievement.ACHIEVEMENT_LEVEL2.toString=o;c.Achievement.ACHIEVEMENT_LEVEL2.__enum__=c.Achievement;c.Achievement.ACHIEVEMENT_SCORE100=["ACHIEVEMENT_SCORE100",2];c.Achievement.ACHIEVEMENT_SCORE100.toString=o;c.Achievement.ACHIEVEMENT_SCORE100.__enum__=c.Achievement;c.Achievement.ACHIEVEMENT_LEVEL5=["ACHIEVEMENT_LEVEL5",3];c.Achievement.ACHIEVEMENT_LEVEL5.toString=o;c.Achievement.ACHIEVEMENT_LEVEL5.__enum__=c.Achievement;c.Achievement.ACHIEVEMENT_SCORE1000=["ACHIEVEMENT_SCORE1000",4];c.Achievement.ACHIEVEMENT_SCORE1000.toString=o;c.Achievement.ACHIEVEMENT_SCORE1000.__enum__=c.Achievement;c.Achievement.ACHIEVEMENT_CODEUNLOCKED=["ACHIEVEMENT_CODEUNLOCKED",5];c.Achievement.ACHIEVEMENT_CODEUNLOCKED.toString=o;c.Achievement.ACHIEVEMENT_CODEUNLOCKED.__enum__=c.Achievement;c.Achievements=function(){};l["com.disney_channel.star_wars_rebels.chopper_chase.data.Achievements"]=c.Achievements;c.Achievements.__name__="com,disney_channel,star_wars_rebels,chopper_chase,data,Achievements".split(",");c.Achievements.achievmentData=function(a){switch(a[1]){case 0:return{id:"firstplay",valueId:c.ConstantsApp.BOOL_GAME_LOSE,value:!0,points:1};case 1:return{id:"level2",valueId:c.ConstantsApp.INT_LEVEL,value:2,points:1};case 3:return{id:"level5",valueId:c.ConstantsApp.INT_LEVEL,value:5,points:3};case 2:return{id:"score100",valueId:c.ConstantsApp.INT_SCORE,value:100,points:1};case 4:return{id:"score1000",valueId:c.ConstantsApp.INT_SCORE,value:1E3,points:5};case 5:return{id:"codeunlocked",valueId:c.ConstantsApp.BOOL_CODE_UNLOCK,value:!0,points:10}}};c.ConstantsApp=function(){};l["com.disney_channel.star_wars_rebels.chopper_chase.data.ConstantsApp"]=c.ConstantsApp;c.ConstantsApp.__name__="com,disney_channel,star_wars_rebels,chopper_chase,data,ConstantsApp".split(",");c.ConstantsApp.get_CANVAS_SCALE=function(){return!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_JSEMBED_EXISTS)?1:e.JSEmbedProxy.get_canvasScale()*c.ConstantsApp.scaleFactor};c.ConstantsApp.get_CANVAS_LEFT_ABSOLUTE=function(){return!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_JSEMBED_EXISTS)||!c.ConstantsApp.OPTION_FILL_CANVAS?0:-e.JSEmbedProxy.get_contentOffsetX()};c.ConstantsApp.get_CANVAS_TOP_ABSOLUTE=function(){return!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_JSEMBED_EXISTS)||!c.ConstantsApp.OPTION_FILL_CANVAS?0:-e.JSEmbedProxy.get_contentOffsetY()};c.ConstantsApp.get_CANVAS_LEFT=function(){return!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_JSEMBED_EXISTS)||!c.ConstantsApp.OPTION_FILL_CANVAS?0:-(e.JSEmbedProxy.get_contentOffsetX()/c.ConstantsApp.get_CANVAS_SCALE())};c.ConstantsApp.get_CANVAS_TOP=function(){return!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_JSEMBED_EXISTS)||!c.ConstantsApp.OPTION_FILL_CANVAS?0:-(e.JSEmbedProxy.get_contentOffsetY()/c.ConstantsApp.get_CANVAS_SCALE())};c.ConstantsApp.get_CANVAS_RIGHT=function(){return!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_JSEMBED_EXISTS)||!c.ConstantsApp.OPTION_FILL_CANVAS?c.ConstantsApp.STAGE_WIDTH:(e.JSEmbedProxy.get_scaledWidth()+c.ConstantsApp.get_CANVAS_LEFT_ABSOLUTE())/e.JSEmbedProxy.get_canvasScale()};c.ConstantsApp.get_CANVAS_BOTTOM=function(){return!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_JSEMBED_EXISTS)||!c.ConstantsApp.OPTION_FILL_CANVAS?c.ConstantsApp.STAGE_HEIGHT:(e.JSEmbedProxy.get_scaledHeight()+c.ConstantsApp.get_CANVAS_TOP_ABSOLUTE())/e.JSEmbedProxy.get_canvasScale()};c.ConstantsApp.update_unlocks=function(){var a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.PROGRESS_ID),b,f=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_MAX_MISSION_NUMBER);switch(c.Inventory.getRank(c.Item.ITEM_NOTORIETY)){case 0:b=Math.ceil(0.5*f);break;case 1:b=Math.ceil(0.6*f);break;case 2:b=Math.ceil(0.7*f);break;case 3:b=Math.ceil(0.8*f);break;case 4:b=Math.ceil(0.9*f);break;default:b=f}for(var m=a.completed,d=4;d<b;){var h=d++;0<m&&(m--,a.unlocked[h]=!0)}e.WorkinCloud.get_instance().sharedObjectSetData(c.ConstantsApp.PROGRESS_ID,a);a=a.completed+4;a>f&&(a=f);return b>=a?!0:!1};c.ConstantsScreen=function(){};l["com.disney_channel.star_wars_rebels.chopper_chase.data.ConstantsScreen"]=c.ConstantsScreen;c.ConstantsScreen.__name__="com,disney_channel,star_wars_rebels,chopper_chase,data,ConstantsScreen".split(",");c.Episodes=function(){this._episodes=[];for(var a=e.WorkinCloud.get_instance().get_assets().getXML(c.ConstantsApp.MISSION_DATA_PATH).nodes.resolve("mission").iterator();a.hasNext();){for(var b=a.next(),f=[],m=0,d=b.nodes.resolve("level").iterator();d.hasNext();){var h=d.next(),g=0,i;if(h.has.resolve("specialBG"))switch(h.att.resolve("specialBG")){case "SPACE":i=c.Atmosphere.SPACE;break;case "ASTEROID":i=c.Atmosphere.ASTEROID;break;default:i=c.Atmosphere.NORMAL}else i=c.Atmosphere.NORMAL;var j="";h.has.resolve("endingSting")&&(j=h.att.resolve("endingSting"));f.push({desc:h.att.resolve("title"),brief:h.att.resolve("description"),loc:h.att.resolve("location"),win:h.att.resolve("win"),difficulty:t.parseInt(b.att.resolve("difficulty"))+m,specialBG:i,steps:[],endSting:j});for(h=h.nodes.resolve("step").iterator();h.hasNext();){i=h.next();f[f.length-1].steps.push({intro:i.att.resolve("intro"),type:t.parseInt(i.att.resolve("type")),minigames:i.att.resolve("minigames"),wins:t.parseInt(i.att.resolve("winsneed")),lose:i.att.resolve("lose"),effect:i.att.resolve("effect")});3==f[f.length-1].steps[g].type&&(f[f.length-1].steps[g].event=i.att.resolve("event"));if(!0==i.has.resolve("npcEzra")&&(j=t.string(i.att.resolve("npcEzra")).split(","),3<=j.length)){var k={};0<j[0].length&&0<j[1].length&&0<j[2].length&&(k={loc:j[0],x:t.parseInt(j[1]),y:t.parseInt(j[2])});4<=j.length&&(k.pose=j[3]);5<=j.length&&(k.mood=j[4]);f[f.length-1].steps[g].ezra=k}!0==i.has.resolve("npcHera")&&(j=t.string(i.att.resolve("npcHera")).split(","),3<=j.length&&(k={},0<j[0].length&&0<j[1].length&&0<j[2].length&&(k={loc:j[0],x:t.parseInt(j[1]),y:t.parseInt(j[2])}),4<=j.length&&(k.pose=j[3]),5<=j.length&&(k.mood=j[4]),f[f.length-1].steps[g].hera=k));!0==i.has.resolve("npcKanan")&&(j=t.string(i.att.resolve("npcKanan")).split(","),3<=j.length&&(k={},0<j[0].length&&0<j[1].length&&0<j[2].length&&(k={loc:j[0],x:t.parseInt(j[1]),y:t.parseInt(j[2])}),4<=j.length&&(k.pose=j[3]),5<=j.length&&(k.mood=j[4]),f[f.length-1].steps[g].kanan=k));!0==i.has.resolve("npcSabine")&&(j=t.string(i.att.resolve("npcSabine")).split(","),3<=j.length&&(k={},0<j[0].length&&0<j[1].length&&0<j[2].length&&(k={loc:j[0],x:t.parseInt(j[1]),y:t.parseInt(j[2])}),4<=j.length&&(k.pose=j[3]),5<=j.length&&(k.mood=j[4]),f[f.length-1].steps[g].sabine=k));!0==i.has.resolve("npcZeb")&&(j=t.string(i.att.resolve("npcZeb")).split(","),3<=j.length&&(k={},0<j[0].length&&0<j[1].length&&0<j[2].length&&(k={loc:j[0],x:t.parseInt(j[1]),y:t.parseInt(j[2])}),4<=j.length&&(k.pose=j[3]),5<=j.length&&(k.mood=j[4]),f[f.length-1].steps[g].zeb=k));!0==i.has.resolve("ezraDialog")&&(f[f.length-1].steps[g].ezraLine=i.att.resolve("ezraDialog"));!0==i.has.resolve("heraDialog")&&(f[f.length-1].steps[g].heraLine=i.att.resolve("heraDialog"));!0==i.has.resolve("kananDialog")&&(f[f.length-1].steps[g].kananLine=i.att.resolve("kananDialog"));!0==i.has.resolve("sabineDialog")&&(f[f.length-1].steps[g].sabineLine=i.att.resolve("sabineDialog"));!0==i.has.resolve("zebDialog")&&(f[f.length-1].steps[g].zebLine=i.att.resolve("zebDialog"));i.has.resolve("sidequests")&&(f[f.length-1].steps[g].sidequests=i.att.resolve("sidequests"));i.has.resolve("sting")&&(f[f.length-1].steps[g].sting=i.att.resolve("sting"));i.has.resolve("music")&&(f[f.length-1].steps[g].music=i.att.resolve("music"));g++}m++}m=t.parseInt(b.att.resolve("showStatus"));1>m||(m=1<m?!1:!0,this._episodes.push(new c.Episode(b.att.resolve("title"),b.att.resolve("description"),t.parseInt(b.att.resolve("difficulty")),t.parseInt(b.att.resolve("id")),f,b.att.resolve("mainCharacter"),b.att.resolve("mainLoc"),m,b.att.resolve("video"))))}};l["com.disney_channel.star_wars_rebels.chopper_chase.data.Episodes"]=c.Episodes;c.Episodes.__name__="com,disney_channel,star_wars_rebels,chopper_chase,data,Episodes".split(",");c.Episodes.get_instance=function(){null==c.Episodes.__instance&&(c.Episodes.__instance=new c.Episodes);return c.Episodes.__instance};c.Episodes.prototype={get_episodes:function(){return this._episodes},__class__:c.Episodes};c.Episode=function(a,b,f,c,d,e,h,g,i){this._name=a;this._brief=b;this.set_steps(d);this._difficulty=f;this._id=c;this._introChar=e;this._introLoc=h;this._isNew=g;this._video=i};l["com.disney_channel.star_wars_rebels.chopper_chase.data.Episode"]=c.Episode;c.Episode.__name__="com,disney_channel,star_wars_rebels,chopper_chase,data,Episode".split(",");c.Episode.prototype={get_data:function(){return{name:this._name,brief:this._brief,steps:this._steps,difficulty:this._difficulty,id:this._id,"char":this._introChar,loc:this._introLoc,isnew:this._isNew,video:this._video}},get_video:function(){return this._video},set_newMission:function(a){return this._isNew=a},get_newMission:function(){return this._isNew},get_introLoc:function(){return this._introLoc},get_introChar:function(){return this._introChar},set_steps:function(a){return this._steps=a},get_steps:function(){return this._steps},get_brief:function(){return this._brief},get_name:function(){return this._name},set_difficulty:function(a){return this._difficulty=a},get_difficulty:function(){return this._difficulty},get_id:function(){return this._id},__class__:c.Episode};c.Item=l["com.disney_channel.star_wars_rebels.chopper_chase.data.Item"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,data,Item".split(","),__constructs__:"ITEM_NOTORIETY,ITEM_SPEED_REPAIR,ITEM_SPEED_INFILTRATION,ITEM_SPEED_MOVEMENT,ITEM_TIME_REPAIR,ITEM_TIME_INFILTRATION,ITEM_SLOW,ITEM_CREDITS".split(",")};c.Item.ITEM_NOTORIETY=["ITEM_NOTORIETY",0];c.Item.ITEM_NOTORIETY.toString=o;c.Item.ITEM_NOTORIETY.__enum__=c.Item;c.Item.ITEM_SPEED_REPAIR=["ITEM_SPEED_REPAIR",1];c.Item.ITEM_SPEED_REPAIR.toString=o;c.Item.ITEM_SPEED_REPAIR.__enum__=c.Item;c.Item.ITEM_SPEED_INFILTRATION=["ITEM_SPEED_INFILTRATION",2];c.Item.ITEM_SPEED_INFILTRATION.toString=o;c.Item.ITEM_SPEED_INFILTRATION.__enum__=c.Item;c.Item.ITEM_SPEED_MOVEMENT=["ITEM_SPEED_MOVEMENT",3];c.Item.ITEM_SPEED_MOVEMENT.toString=o;c.Item.ITEM_SPEED_MOVEMENT.__enum__=c.Item;c.Item.ITEM_TIME_REPAIR=["ITEM_TIME_REPAIR",4];c.Item.ITEM_TIME_REPAIR.toString=o;c.Item.ITEM_TIME_REPAIR.__enum__=c.Item;c.Item.ITEM_TIME_INFILTRATION=["ITEM_TIME_INFILTRATION",5];c.Item.ITEM_TIME_INFILTRATION.toString=o;c.Item.ITEM_TIME_INFILTRATION.__enum__=c.Item;c.Item.ITEM_SLOW=["ITEM_SLOW",6];c.Item.ITEM_SLOW.toString=o;c.Item.ITEM_SLOW.__enum__=c.Item;c.Item.ITEM_CREDITS=["ITEM_CREDITS",7];c.Item.ITEM_CREDITS.toString=o;c.Item.ITEM_CREDITS.__enum__=c.Item;c.Inventory=function(){};l["com.disney_channel.star_wars_rebels.chopper_chase.data.Inventory"]=c.Inventory;c.Inventory.__name__="com,disney_channel,star_wars_rebels,chopper_chase,data,Inventory".split(",");c.Inventory.getUniqueSuffix=function(a){switch(a[1]){case 0:return"notoriety";case 1:return"speed_repair";case 2:return"speed_infiltration";case 3:return"speed_movement";case 4:return"time_repair";case 5:return"time_infiltration";case 6:return"slow";case 7:return"credits"}};c.Inventory.getRankCap=function(){return 5};c.Inventory.getCostNextRank=function(a){var b=10*(5/3);switch(a[1]){case 0:return 10*Math.round(b*(1+3*c.Inventory.getRank(a)));case 1:return 10*Math.round(b*Math.pow(1+0.25*c.Inventory.getRank(a),2));case 2:return 10*Math.round(b*Math.pow(1+0.25*c.Inventory.getRank(a),2));case 3:return 10*Math.round(b*Math.pow(2+0.1*c.Inventory.getRank(a),3));case 4:return 10*Math.round(b*Math.pow(0.7+0.5*c.Inventory.getRank(a),2));case 5:return 10*Math.round(b*Math.pow(0.7+0.5*c.Inventory.getRank(a),2));case 6:return 10*Math.round(b*Math.pow(1+0.3*c.Inventory.getRank(a),2));case 7:return 10*Math.round(b*Math.pow(2+0.1*c.Inventory.getRank(a),3))}};c.Inventory.getIcon=function(a){return"icon_"+c.Inventory.getUniqueSuffix(a)};c.Inventory.getLocalizationNameID=function(a){var b="";return b="item_name_"+c.Inventory.getUniqueSuffix(a)};c.Inventory.getLocalizationDescID=function(a,b){null==b&&(b=0);var f="";return-1==b?"item_desc_"+c.Inventory.getUniqueSuffix(a):f=0>=c.Inventory.getRank(a)+b?"item_unowned":"item_desc_"+c.Inventory.getUniqueSuffix(a)+"_"+(c.Inventory.getRank(a)+b)};c.Inventory.getCurrencyType=function(){return c.ConstantsApp.INT_CREDITS};c.Inventory.canAffordNextRank=function(a){return c.Inventory.hasRankCapped(a)?!1:e.WorkinCloud.get_instance().getInt(c.Inventory.getCurrencyType(a))>=c.Inventory.getCostNextRank(a)};c.Inventory.hasRankCapped=function(a){return c.Inventory.getRank(a)>=c.Inventory.getRankCap(a)};c.Inventory.getRank=function(a){return e.WorkinCloud.get_instance().getInt(c.Inventory.getRankStorageID(a))};c.Inventory.setRank=function(a,b){e.WorkinCloud.get_instance().setInt(c.Inventory.getRankStorageID(a),b)};c.Inventory.addRank=function(a,b){null==b&&(b=1);e.WorkinCloud.get_instance().modifyInt(c.Inventory.getRankStorageID(a),b);for(var f=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.STORE_ID),m=c.Inventory.getItemList(),d=0,h=m.length;d<h;){var g=d++;if(m[g]==a){f.items[g]=e.WorkinCloud.get_instance().getInt(c.Inventory.getRankStorageID(a));e.WorkinCloud.get_instance().sharedObjectSetData(c.ConstantsApp.STORE_ID,f);break}}};c.Inventory.setDefaults=function(){c.Inventory.setRanksToDefault();c.Inventory.output()};c.Inventory.setRanksToDefault=function(){for(var a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.STORE_ID),b=c.Inventory.getItemList(),f=0,m=b.length;f<m;){var d=f++;c.Inventory.setRank(b[d],a.items[d])}};c.Inventory.getRankStorageID=function(a){return"int_rank_"+c.Inventory.getUniqueSuffix(a)};c.Inventory.output=function(){for(var a=0,b=N.allEnums(c.Item);a<b.length;)++a,null};c.Inventory.getItemList=function(){return N.allEnums(c.Item)};c.MapDirection=l["com.disney_channel.star_wars_rebels.chopper_chase.data.MapDirection"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,data,MapDirection".split(","),__constructs__:["NORTH","SOUTH","EAST","WEST"]};c.MapDirection.NORTH=["NORTH",0];c.MapDirection.NORTH.toString=o;c.MapDirection.NORTH.__enum__=c.MapDirection;c.MapDirection.SOUTH=["SOUTH",1];c.MapDirection.SOUTH.toString=o;c.MapDirection.SOUTH.__enum__=c.MapDirection;c.MapDirection.EAST=["EAST",2];c.MapDirection.EAST.toString=o;c.MapDirection.EAST.__enum__=c.MapDirection;c.MapDirection.WEST=["WEST",3];c.MapDirection.WEST.toString=o;c.MapDirection.WEST.__enum__=c.MapDirection;c.Atmosphere=l["com.disney_channel.star_wars_rebels.chopper_chase.data.Atmosphere"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,data,Atmosphere".split(","),__constructs__:["NORMAL","SPACE","ASTEROID"]};c.Atmosphere.NORMAL=["NORMAL",0];c.Atmosphere.NORMAL.toString=o;c.Atmosphere.NORMAL.__enum__=c.Atmosphere;c.Atmosphere.SPACE=["SPACE",1];c.Atmosphere.SPACE.toString=o;c.Atmosphere.SPACE.__enum__=c.Atmosphere;c.Atmosphere.ASTEROID=["ASTEROID",2];c.Atmosphere.ASTEROID.toString=o;c.Atmosphere.ASTEROID.__enum__=c.Atmosphere;c.MapData=function(){this.locations=new w.StringMap;this.locations.set(c.ConstantsApp.LOC_COCKPIT,new c.Location("oooooooooooooooooooooooooooooooooooooooov.oooooo..........ooooo....+.+....>......+ooo+...>ooo....+.+....>ooo...........oooooooooooooooo",{asset:"Cockpit_Bottom"},[{dir:c.MapDirection.EAST,loc:new c.Exit(900,350,c.ConstantsApp.LOC_HALLWAY,1,6,c.MapDirection.EAST)},{dir:c.MapDirection.SOUTH,loc:new c.Exit(670,160,c.ConstantsApp.LOC_CARGO,5,5,c.MapDirection.SOUTH)}],{asset:"Cockpit_Top",x:96,y:293,origin:0}));this.locations.set(c.ConstantsApp.LOC_HALLWAY,new c.Location("oooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo<.........o...><.............><...oooo.....o><......o.....o><...oooo..o..o>",{asset:"Hallway_Bottom"},[{dir:c.MapDirection.EAST,loc:new c.Exit(900,440,c.ConstantsApp.LOC_ENGINE,1,5,c.MapDirection.EAST)},{dir:c.MapDirection.WEST,loc:new c.Exit(60,380,c.ConstantsApp.LOC_COCKPIT,14,5,c.MapDirection.WEST)}],{asset:"Hallway_Top",x:642,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0,originY:0.5}));this.locations.set(c.ConstantsApp.LOC_ENGINE,new c.Location("oooooooooooooooooooooooooooooooooooo..ooooooo<.......oo...oo<.............o<.......oo....o<.....oooo+..oo<.O......+o..ooooooooooooooooo",{asset:"Engine_Bottom"},[{dir:c.MapDirection.WEST,loc:new c.Exit(60,330,c.ConstantsApp.LOC_HALLWAY,14,6,c.MapDirection.WEST)}],{asset:"Engine_Top",x:529,y:236,origin:0}));this.locations.set(c.ConstantsApp.LOC_CARGO,new c.Location("ooooo^oooooooooooooo^oooooooooooooo^oooooooooo.....ooooooooo<..oo.ooooooooo<..oo.ooooooooo<.oo.....+....o<.oo....+o+.ooo<.oo.....+..ooo",{asset:"Cargo_Bottom"},[{dir:c.MapDirection.WEST,loc:new c.Exit(60,350,c.ConstantsApp.LOC_OBSERVATION,13,4,c.MapDirection.WEST)},{dir:c.MapDirection.NORTH,loc:new c.Exit(350,100,c.ConstantsApp.LOC_COCKPIT,10,3,c.MapDirection.NORTH)}],{asset:"Cargo_Top",x:126,y:386,origin:0}));this.locations.set(c.ConstantsApp.LOC_OBSERVATION,new c.Location("ooooooooooooooooooooooooooooooooooo........ooooo..oooo.....>ooo..oooo.....>ooooo........ooooooooooooo.oooooooooooooo.oooooooo........oo",{asset:"Observatory_Bottom"},[{dir:c.MapDirection.EAST,loc:new c.Exit(900,257,c.ConstantsApp.LOC_CARGO,1,5,c.MapDirection.EAST)}],{asset:"Observatory_Top",x:358,y:138,origin:0}));this.locations.set(c.ConstantsApp.LOC_HALLWAY_1,new c.Location("oo^oooooooo^ooooo^oooooooo^oooo<............>o<............>o<............>o<............>oooo.ooooooo.oooooovooooooovoooooovooooooovoo",{asset:"Hallway_BOTTOM"},[{dir:c.MapDirection.EAST,loc:new c.Exit(900,200,c.ConstantsApp.LOC_HALLWAY_2,1,4,c.MapDirection.EAST)},{dir:c.MapDirection.SOUTH,loc:new c.Exit(290,380,c.ConstantsApp.LOC_HANGAR,4,1,c.MapDirection.SOUTH)},{dir:c.MapDirection.NORTH,loc:new c.Exit(750,100,c.ConstantsApp.LOC_SECURITY,4,8,c.MapDirection.NORTH)}],{asset:"Hallway_TOP",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,origin:0.5}));this.locations.set(c.ConstantsApp.LOC_HALLWAY_2,new c.Location("ooo^oooooooo^ooooo^oooooooo^oo<.............><.............><.............><.............>oo.ooooooo.oooooovooooooovoooooovooooooovoooo",{asset:"Hallway_BOTTOM",reverse:!0},[{dir:c.MapDirection.EAST,loc:new c.Exit(900,200,c.ConstantsApp.LOC_HALLWAY_3,1,5,c.MapDirection.EAST)},{dir:c.MapDirection.WEST,loc:new c.Exit(60,200,c.ConstantsApp.LOC_HALLWAY_1,14,4,c.MapDirection.WEST)},{dir:c.MapDirection.SOUTH,loc:new c.Exit(170,380,c.ConstantsApp.LOC_HANGAR,9,1,c.MapDirection.SOUTH)},{dir:c.MapDirection.NORTH,loc:new c.Exit(225,100,c.ConstantsApp.LOC_SECURITY,13,3,c.MapDirection.NORTH)}],{asset:"Hallway_TOP",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,origin:0.5,reverse:!0}));this.locations.set(c.ConstantsApp.LOC_HALLWAY_3,new c.Location("oooooooooooooooooooooooooooooooooooooooooooooooooooooooooo..<............XX<............XXooooooooooooooo.............YY.............YY",{asset:"Hallway2_BOTTOM"},[{dir:c.MapDirection.WEST,loc:new c.Exit(60,200,c.ConstantsApp.LOC_HALLWAY_2,14,4,c.MapDirection.WEST)}],null,null,[{cond:c.Atmosphere.SPACE,asset:"",x:c.ConstantsApp.STAGE_CENTER_X,y:9,originX:0.5,originY:0},{cond:c.Atmosphere.ASTEROID,asset:"",x:c.ConstantsApp.STAGE_CENTER_X,y:9,originX:0.5,originY:0}]));this.locations.set(c.ConstantsApp.LOC_HANGAR,new c.Location("oo<<<<<oo^oooooo.<<<<<...Xooooo.........o...>o....+.+..Y...>o...+ooo+.o...>o....++++.ooooo.....+ooo+....................vvvvvv+v+vvvvvv",{asset:"Hangar_BOTTOM"},[{dir:c.MapDirection.EAST,loc:new c.Exit(900,200,c.ConstantsApp.LOC_STORAGE,0,7,c.MapDirection.EAST)},{dir:c.MapDirection.WEST,loc:new c.Exit(290,100,c.ConstantsApp.LOC_HALLWAY_1,12,8,c.MapDirection.NORTH)},{dir:c.MapDirection.NORTH,loc:new c.Exit(610,100,c.ConstantsApp.LOC_HALLWAY_2,2,8,c.MapDirection.NORTH)}],{asset:"Hangar_TOP",x:333,y:225,origin:0}));this.locations.set(c.ConstantsApp.LOC_SECURITY,new c.Location("oooooooooo.oooooooooooooo.ooooooooooo......>>o.....o......>>o............>>o.........o.oooo........oo.ooo.........oo.ooovvvvvvvvvo.....",{asset:"Security_BOTTOM"},[{dir:c.MapDirection.EAST,loc:new c.Exit(900,200,c.ConstantsApp.LOC_HALLWAY_2,3,2,c.MapDirection.EAST)},{dir:c.MapDirection.SOUTH,loc:new c.Exit(280,380,c.ConstantsApp.LOC_HALLWAY_1,11,1,c.MapDirection.SOUTH)}],{asset:"Security_TOP",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,origin:0.5},null,[{cond:c.Atmosphere.NORMAL,asset:"Imperial_Hangar_SCREEN_Space2",x:24,y:4},{cond:c.Atmosphere.SPACE,asset:"Imperial_Hangar_SCREEN_Space1",x:24,y:4},{cond:c.Atmosphere.ASTEROID,asset:"Imperial_Hangar_SCREEN_Asteroid",x:24,y:4}]));this.locations.set(c.ConstantsApp.LOC_STORAGE,new c.Location("ooooooooooooo.o......ooo..oo.o......ooo..o...ooooo.ooo.oo...ooooo.ooo.oo...ooooo.ooo.oo...<..............<..............<..............",{asset:"Storage_BOTTOM"},[{dir:c.MapDirection.WEST,loc:new c.Exit(60,200,c.ConstantsApp.LOC_HANGAR,14,3,c.MapDirection.WEST)}],{asset:"Storage_TOP",x:-32,y:-104,origin:0}));this.locations.set(c.ConstantsApp.LOC_DETENTION,new c.Location("ooooooooooo^oooo.ooooooooo^oooo.o...ooo....ooo.o...o.......oo.o...o.......oo.oo.oo..oooooo.........oo..oo..............................",{asset:"Imperial_Detention_BOTTOM1"},[],{asset:"Imperial_Detention_TOP1",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,origin:0.5}));this.locations.set(c.ConstantsApp.LOC_DISPOSAL,new c.Location("oooooooooo.oooooooooooooo.ooooooooo.......oooooooooo.ooooooooooooooo.ooooooooooooooo.ooooooooo.......ooooooooooooo..ooooooooooooo..oooo",{asset:"Imperial_TrashCompactor_BOTTOM"},[],{asset:"Imperial_TrashCompactor_Top1",x:620,y:37,originY:1,originX:0}));this.locations.set(c.ConstantsApp.LOC_VENTS,new c.Location("oooooooooooooooooooo....ooooooooooo.....ooooo<.............><.............>ooooo.....o.ooooooooo...oo..oooooooo...oo..oooooooovvvoooooo",{asset:"Imperial_Vents_BOTTOM1"},[],{asset:"Imperial_TrashCompactor_Top1",x:371,y:272,origin:0}));this.consolidateAllPossibleExits()};l["com.disney_channel.star_wars_rebels.chopper_chase.data.MapData"]=c.MapData;c.MapData.__name__="com,disney_channel,star_wars_rebels,chopper_chase,data,MapData".split(",");c.MapData.get_instance=function(){null==c.MapData.__instance&&(c.MapData.__instance=new c.MapData);return c.MapData.__instance};c.MapData.prototype={findRoom:function(a,b,f,c){null==c&&(c=0);var d=this.locations.get(a);if(b==a)return c;for(a=function(a){return function(){return a.iterator()}}(d.exits)();a.hasNext();)if(d=a.next(),-1==f.toString().indexOf(d.get_dest())&&(f.push(d.get_dest()),-1<this.findRoom(d.get_dest(),b,f,c+1)))return c+=1;return-1},shortestPathFromAtoB:function(a,b){if(a==b)return null;var f=this.locations.get(a),c=this.locations.get(b);if(null==f||null==c)return null;for(var c=9999,d=null,e=f.exits.keys();e.hasNext();){var h=e.next(),g=this.findRoom(f.exits.get(h).get_dest(),b,[a]);-1<g&&c>g&&(c=g,f.exits.get(h),d=h)}return null!=d?d:null},consolidateAllPossibleExits:function(){for(var a=this.locations.keys();a.hasNext();){for(var b=a.next(),f=this.locations.keys();f.hasNext();){var m=f.next();if(b!=m){var d=this.locations.get(b);this.locations.get(m);if(!(-1<d.possibleLocs.get(c.MapDirection.NORTH).toString().indexOf(m))&&!(-1<d.possibleLocs.get(c.MapDirection.SOUTH).toString().indexOf(m))&&!(-1<d.possibleLocs.get(c.MapDirection.EAST).toString().indexOf(m))&&!(-1<d.possibleLocs.get(c.MapDirection.WEST).toString().indexOf(m))){var e=this.shortestPathFromAtoB(b,m);null!=e&&d.possibleLocs.get(e).push(m)}}}null}},__class__:c.MapData};c.Location=function(a,b,f,m,d,e){this._mapData=a;this.bg=b;null!=m&&(this.fg1=m);null!=d&&(this.fg2=d);this.specialBGs=new w.EnumValueMap;if(null!=e)for(a=0;a<e.length;)m=e[a],++a,m.cond&&(b=m.cond,this.specialBGs.set(b,m));this.exits=new w.EnumValueMap;for(a=0;a<f.length;)e=f[a],++a,e.dir&&e.loc&&(b=e.dir,m=e.loc,this.exits.set(b,m));this.possibleLocs=new w.EnumValueMap;this.possibleLocs.set(c.MapDirection.NORTH,[]);this.possibleLocs.set(c.MapDirection.SOUTH,[]);this.possibleLocs.set(c.MapDirection.EAST,[]);this.possibleLocs.set(c.MapDirection.WEST,[])};l["com.disney_channel.star_wars_rebels.chopper_chase.data.Location"]=c.Location;c.Location.__name__="com,disney_channel,star_wars_rebels,chopper_chase,data,Location".split(",");c.Location.prototype={get_mapData:function(){return this._mapData},__class__:c.Location};c.Exit=function(a,b,f,c,d,e){this._locX=a;this._locY=b;this._facing=e;this._dest=f;this._destX=c;this._destY=d};l["com.disney_channel.star_wars_rebels.chopper_chase.data.Exit"]=c.Exit;c.Exit.__name__="com,disney_channel,star_wars_rebels,chopper_chase,data,Exit".split(",");c.Exit.prototype={get_destY:function(){return this._destY},get_destX:function(){return this._destX},get_dest:function(){return this._dest},get_facing:function(){return this._facing},get_locY:function(){return this._locY},get_locX:function(){return this._locX},__class__:c.Exit};g={ScreenManager:function(a){this._dispatcher=n.WMEventDispatcher.request();this._container=a;this._layerScreen=new P;this._layerTransition=new P;this._container.addChild(this._layerScreen);this._container.addChild(this._layerTransition);this._isPaused=!1;this._screens=[];this._screensOpen=[];this._screensQueue=[];this._transitionType=-1;this._flagCloseAllScreensWhenBottomCloses=this._flagHasScreenshot=this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=this._flagHasTransition=!1;this._camera=new h.WorkinCamera(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y)}};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.ScreenManager"]=g.ScreenManager;g.ScreenManager.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,ScreenManager".split(",");g.ScreenManager.prototype={_transitionPlay:function(){this._transition.show();this._transition.start()},_removeTransition:function(){this._flagHasTransition&&(this._layerTransition.removeChild(this._transition.get_root()),this._transition.get_dispatcher().removeEventListener(n.WMEventScreenOut.EVENT_SCREEN_OUTPUT,q(this,this._onEventTransitionOutput)),this._transition.dispose(),this._transition=null,this._flagHasTransition=!1)},_addTransition:function(a,b){null==b&&(b=!0);if(this._flagHasTransition){if(!b)return;this._removeTransition()}this._transition=new g.transitions.TransitionBase(a);this._transition.hide();this._transition.get_dispatcher().addEventListener(n.WMEventScreenOut.EVENT_SCREEN_OUTPUT,q(this,this._onEventTransitionOutput));this._layerTransition.addChild(this._transition.get_root());this._flagHasTransition=!0},_updateTransition:function(a){switch(this._transitionType){case c.ConstantsScreen.TRANSITION_SCROLL:this._transitionScreenHeadedOut.get_pos().x-=3E3*a;this._transitionScreenHeadedIn.get_pos().x-=3E3*a;0>=this._transitionScreenHeadedIn.get_pos().x&&(this._transitionScreenHeadedIn.get_pos().x=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));break;case c.ConstantsScreen.TRANSITION_SCROLL_UP:this._transitionScreenHeadedOut.get_pos().y-=2E3*a;this._transitionScreenHeadedIn.get_pos().y-=2E3*a;0>=this._transitionScreenHeadedIn.get_pos().y&&(this._transitionScreenHeadedIn.get_pos().y=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));break;case c.ConstantsScreen.TRANSITION_SCROLL_DOWN:this._transitionScreenHeadedOut.get_pos().y+=2E3*a;this._transitionScreenHeadedIn.get_pos().y+=2E3*a;0<=this._transitionScreenHeadedIn.get_pos().y&&(this._transitionScreenHeadedIn.get_pos().y=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));break;case c.ConstantsScreen.TRANSITION_FADE:this._transition.update(a),this._transition.flagDispose&&this._removeTransition()}},_removeScreenDisplay:function(a){this._layerScreen.removeChild(a)},_addScreenDisplay:function(a){this._layerScreen.addChild(a)},_dispatchEventChange:function(a,b){this._dispatcher.dispatchEvent(n.WMEventInterfaceChange.request(a,b))},_onQueueConditionMet:function(a,b){null==b&&(b="");for(var f=0;f<this._screensQueue.length;)this._screensQueue[f].validateCondition(a,b)&&(this._generateScreen(this._screensQueue[f].screenData),this._screensQueue.splice(f,1)),f++},_getScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==a)return this._screens[b];b--}e.WorkinCloud.get_instance().log("[ScreenManager](_getScreenData) ERROR: Screen >"+a+"< idoes not exist. getScreenData() returning NULL.");return null},_hasScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==a)return!0;b--}return!1},_removeScreenshot:function(){this._flagHasScreenshot&&(this._layerScreen.removeChild(this._screenshot.get_root()),this._screenshot.dispose(),this._screenshot=null,this._flagHasScreenshot=!1)},_addScreenshot:function(){e.WorkinCloud.get_instance().log("[ScreenManager](_addScreenshot) ERROR: Screenshots not supported in HTML5 yet.")},_onTransitionCloseScreen:function(){this._flagCloseScreenAfterTransition&&(this.closeScreen(this._screenIdToCloseAfterTransition,!1),this._flagCloseScreenAfterTransition=!1);this._flagOpenScreenAfterTransition&&(this.openScreen(this._screenIdToOpenDuringTransition,!1),this._flagOpenScreenAfterTransition=!1)},_onEventTransitionOutput:function(a){a.flowId==c.ConstantsScreen.OUTPUT_OPENED?(e.WorkinCloud.get_instance().log("[ScreenManager] Transition Midway..."),this._onTransitionCloseScreen(),this._removeScreenshot(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)):a.flowId==c.ConstantsScreen.OUTPUT_CLOSED&&(e.WorkinCloud.get_instance().log("[ScreenManager] Transition Complete."),this._removeScreenshot(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE))},_onEventScreenOutput:function(a){a.flowId==c.ConstantsScreen.OUTPUT_OPENED?this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_COMPLETE,a.screenId):a.flowId==c.ConstantsScreen.OUTPUT_CLOSED&&(this._dispatchEventChange(c.ConstantsScreen.CHANGE_CLOSE_COMPLETE,a.screenId),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_CLOSED_SPECIFIC,a.screenId),this._flagHasTransition&&this._transitionType==c.ConstantsScreen.TRANSITION_STAGED&&this._transitionPlay())},_disposeScreen:function(a){for(var b=0;b<this._screensOpen.length;){if(this._screensOpen[b].id==a){this._screensOpen[b].get_dispatcher().removeEventListener(n.WMEventScreenOut.EVENT_SCREEN_OUTPUT,q(this,this._onEventScreenOutput));this._removeScreenDisplay(this._screensOpen[b].get_root());this._screensOpen[b].dispose();this._screensOpen.splice(b,1);break}b++}},_generateScreen:function(a){if(this.isScreenOpen(a.id))this.getScreen(a.id).reset(),this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id);else{var b=N.createInstance(a.screenClass,[a.id,a.assetClassName,a.data]);if(null==b)e.WorkinCloud.get_instance().log("[ScreenManager](_generateScreen) ERROR: Screen Class for >"+a.id+"< not found.");else{if(this._flagHasTransition)switch(this._transitionScreenHeadedIn=b,this._transitionType){case c.ConstantsScreen.TRANSITION_SCROLL:b.get_pos().x=c.ConstantsApp.STAGE_WIDTH;break;case c.ConstantsScreen.TRANSITION_SCROLL_UP:b.get_pos().y=c.ConstantsApp.STAGE_HEIGHT;break;case c.ConstantsScreen.TRANSITION_SCROLL_DOWN:b.get_pos().y=-c.ConstantsApp.STAGE_HEIGHT}this._screensOpen.push(b);b.renderPosition(this._camera);this._addScreenDisplay(b.get_root());b.get_dispatcher().addEventListener(n.WMEventScreenOut.EVENT_SCREEN_OUTPUT,q(this,this._onEventScreenOutput));b.open(!0);this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id)}}},_addScreenToQueue:function(a,b,f){null==f&&(f="");this.hasQueuedScreen(a.id)||this._screensQueue.push(new g.screens.data.ScreenQueueData(a,b,f))},removeAllQueuedScreens:function(){for(var a=this._screensQueue.length-1;0<=a;)this._screensQueue.splice(a,1),a--},removeQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a){this._screensQueue.splice(b,1);break}b--}},hasQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a)return!0;b--}return!1},isScreenOpen:function(a){for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return!0;b--}return!1},getScreen:function(a){null==a&&(a="");if(0==this._screensOpen.length)return e.WorkinCloud.get_instance().log("[ScreenManager](getScreen) ERROR: no screens are open. Unable to getScreen()"),null;if(""==a)return this._screensOpen[this._screensOpen.length-1];for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return this._screensOpen[b];b--}e.WorkinCloud.get_instance().log("[ScreenManager](getScreen) ERROR: Screen >"+a+"< is not open or does not exist. getScreen() returning NULL.");return null},update:function(a){if(!this._isPaused){0.15<a&&(a=0.15);this._flagHasTransition&&this._updateTransition(a);for(this._loop=this._screensOpen.length-1;0<=this._loop;)this._screensOpen[this._loop].update(a),this._screensOpen[this._loop].renderPosition(this._camera),this._screensOpen[this._loop].flagDispose&&(this._disposeScreen(this._screensOpen[this._loop].id),0==this._screensOpen.length&&this._onQueueConditionMet(c.ConstantsScreen.CONDITION_CLOSED_ALL)),this._loop--}},get_isTransition:function(){return this._flagHasTransition},changeScreenTo:function(a,b,f,m){null==m&&(m="");null==f&&(f=-1);null==b&&(b=!1);e.WorkinCloud.get_instance().log("[ScreenManager](changeTo) "+a);this.removeAllQueuedScreens();if(this.isScreenOpen(a)){e.WorkinCloud.get_instance().log("[ScreenManager](changeTo) Screen is already open.");for(f=this._screensOpen.length-1;0<=f;)this._screensOpen[f].id!=a&&this.closeScreen(this._screensOpen[f].id,b,f),f--;this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_BEGIN,a);this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_COMPLETE,a)}else if(this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=!1,0<this._screensOpen.length){e.WorkinCloud.get_instance().log("[ScreenManager](changeFrom) "+this._screensOpen[0].id);this._screensOpen[0].suspend();var d=c.ConstantsScreen.CONDITION_CLOSED_ALL;if(-1<f)switch(this._transitionType=f,this._transitionType){case c.ConstantsScreen.TRANSITION_SCREENSHOT:this._flagOpenScreenAfterTransition=!0;b=!1;this._addScreenshot();this._transitionPlay();break;case c.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_SCROLL_UP:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_SCROLL_DOWN:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_FADE:this._addTransition(m,this._flagHasTransition?this._transition.get_isOutro()?!0:!1:!1),this._flagCloseScreenAfterTransition=!0,b=!1,this._transitionPlay(),d=c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY}if(0<this._screensOpen.length&&(this._flagCloseScreenAfterTransition?this._screenIdToCloseAfterTransition=this._screensOpen[0].id:this.closeScreen(this._screensOpen[0].id,b,0),1<this._screensOpen.length))for(f=1;f<this._screensOpen.length;)this.closeScreen(this._screensOpen[f].id,b,this._screensOpen.length),f++;this._flagOpenScreenAfterTransition?(e.WorkinCloud.get_instance().log("[ScreenManager] Store Screen to open at transition midway: "+a),this._screenIdToOpenDuringTransition=a):this.openScreen(a,!0,d)}else this.openScreen(a,!1)},openScreen:function(a,b,f,m){null==m&&(m="");null==f&&(f=0);null==b&&(b=!0);e.WorkinCloud.get_instance().log("[ScreenManager](openScreen) "+a);if(this._hasScreenData(a)){if(!this.isScreenOpen(a)){if(f!=c.ConstantsScreen.CONDITION_IMMEDIATE&&b){if(0<this._screensOpen.length){this._addScreenToQueue(this._getScreenData(a),f,m);return}if((f==c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE||f==c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)&&this._flagHasTransition){this._addScreenToQueue(this._getScreenData(a),f,m);return}}this._generateScreen(this._getScreenData(a))}}else e.WorkinCloud.get_instance().log("[ScreenManager](closeScreen) ERROR: Screen >"+a+"< does not exist. Cancelling open().")},closeScreen:function(a,b,f){null==f&&(f=-1);null==b&&(b=!0);null==a&&(a="");if(0==this._screensOpen.length)this.removeQueuedScreen(a);else{if(""==a)f=this._screensOpen[this._screensOpen.length-1];else if(0<=f&&f<this._screensOpen.length)f=this._screensOpen[f];else if(f=this.getScreen(a),null==f){this.removeQueuedScreen(a);return}f.close(b);this._dispatchEventChange(c.ConstantsScreen.CHANGE_CLOSE_BEGIN,a)}},handleInput:function(a){for(var b=0,f=this._screensOpen;b<f.length;){var c=f[b];++b;c.handleInput(a)}},addScreen:function(a,b,f,c,d){null==c&&(c=0);null==f&&(f="");this._screens.push(new g.screens.data.ScreenData(a,b,f,c,d))},get_dispatcher:function(){return this._dispatcher},__class__:g.ScreenManager};j={};e=void 0;U=void 0;n=void 0;G=void 0;da=void 0;h=void 0;T=void 0;j.IPoolable=function(){};l["com.workinman.display.IPoolable"]=j.IPoolable;j.IPoolable.__name__=["com","workinman","display","IPoolable"];j.IPoolable.prototype={__class__:j.IPoolable};j.Poolable=function(){this._flagPooled=!0;this._flagActive=!1};l["com.workinman.display.Poolable"]=j.Poolable;j.Poolable.__name__=["com","workinman","display","Poolable"];j.Poolable.__interfaces__=[j.IPoolable];j.Poolable.prototype={get_isActive:function(){return this._flagActive},set_isPooled:function(a){return this._flagPooled=a},get_isPooled:function(){return this._flagPooled},release:function(){this._flagActive=!1},renew:function(){this._flagActive=!0},__class__:j.Poolable};j.Element=function(a){j.Poolable.call(this,a);this._rootEntity=new P;this._rootSprite=new r.Sprite;this._rootEntity.add(this._rootSprite);this._imageEntity=new P;this._rootEntity.addChild(this._imageEntity);this._imageSprite=new r.Sprite;this._imageEntity.add(this._imageSprite);this._format=j.ELEMENT_FORMAT.EMPTY;this._elements=[];this._pos=h.WorkinPoint.request();this._velocity=h.WorkinPoint.request();this._render=j.Renderable.request();this._originX=this._originY=this._offsetX=this._offsetY=0;this._uniqueId=G.ConstantsCloud.getUniqueId();this._layer="";this._useCamera=!0;this._doDelete=!1;!0==a.pooled?this.set_isPooled(!0):(this.set_isPooled(!1),this.renew(a));this._addEventListeners()};l["com.workinman.display.Element"]=j.Element;j.Element.__name__=["com","workinman","display","Element"];j.Element.__super__=j.Poolable;j.Element.prototype=v(j.Poolable.prototype,{get_originY:function(){return this._originY},get_originX:function(){return this._originX},getTextureHeight:function(){return this._textureSprite.getNaturalHeight()},getTextureWidth:function(){return this._textureSprite.getNaturalWidth()},_removeEventListeners:function(){},_addEventListeners:function(){},set_pointerEnabled:function(a){this._imageSprite.set_pointerEnabled(a);return this.get_pointerEnabled()},get_pointerEnabled:function(){return 0!=(this._imageSprite._flags&2)},setRenderOffset:function(a,b){this._offsetX=a;this._offsetY=b;return this},contains:function(a,b){return a>=this._render.x-this._originX*this._render.width&&b>=this._render.y-this._originY*this._render.height&&a<=this._render.x-this._originX*this._render.width+this._render.width&&b<=this._render.y-this._originY*this._render.height+this._render.height},setOrigin:function(a,b){this._originX=a;this._originY=b;0==this._render.width&&(this._render.width=this._imageSprite.getNaturalWidth());0==this._render.height&&(this._render.height=this._imageSprite.getNaturalHeight());this._imageSprite.x.set__(-(this._originX*this._render.width));this._imageSprite.y.set__(-(this._originY*this._render.height))},applyRenderable:function(){this._rootSprite.x.set__(this._render.x);this._rootSprite.y.set__(this._render.y);this._rootSprite.scaleX.set__(this._render.scaleX);this._rootSprite.scaleY.set__(this._render.scaleY);this._rootSprite.rotation.set__(this._render.rotation);this._rootSprite.alpha.set__(this._render.alpha);this._rootSprite.set_visible(this._render.visible)},renderPosition:function(a){null==a||!1==this._useCamera?(this._render.x=this._pos.x+this._offsetX,this._render.y=this._pos.y+this._offsetY):(this._render.x=this._pos.x-a.get_pos().x+a.get_screenCenterX()+this._offsetX,this._render.y=this._pos.y-a.get_pos().y+a.get_screenCenterY()+this._offsetY);for(var b=0,f=this._elements;b<f.length;){var c=f[b];++b;c.renderPosition(a)}this.applyRenderable()},hasElement:function(a){for(var b=0,f=this._elements;b<f.length;){var c=f[b];++b;if(c==a)return!0}return!1},addElement:function(a){this._elements.push(a);this._rootEntity.addChild(a.get_root());return a},removeElement:function(a,b){null==b&&(b=!0);for(this._i=this._elements.length;0<this._i--;)if(this._elements[this._i].get_uniqueId()==a.get_uniqueId()&&(this._elements.splice(this._i,1),a.get_root().parent.removeChild(a.get_root()),b))return a.dispose(),null;return a},updatePositionFromVelocity:function(a){this._pos.x+=this._velocity.x*a;this._pos.y+=this._velocity.y*a},update:function(a){for(var b=0,f=this._elements;b<f.length;){var c=f[b];++b;c.update(a)}this.updatePositionFromVelocity(a)},_orientTexture:function(a){a&&(this._render.width=this._imageSprite.getNaturalWidth(),this._render.height=this._imageSprite.getNaturalHeight());this._imageSprite.x.set__(-(this._originX*this._render.width));this._imageSprite.y.set__(-(this._originY*this._render.height))},clearImageSprite:function(){this._imageEntity.remove(this._imageSprite);this._imageSprite.dispose()},setImageSprite:function(a){a.set_pixelSnapping(!1);this._determineFormat(a);this._imageEntity.remove(this._imageSprite);this._imageSprite.dispose();this._imageSprite=a;this._orientTexture(!0);this._imageEntity.add(this._imageSprite);this._format==j.ELEMENT_FORMAT.TEXTURE&&(this._textureSprite=this._imageSprite)},setTextureAsset:function(a){if(""==a||!1==e.WorkinCloud.get_instance().get_assets().hasAsset(a))""!=a&&e.WorkinCloud.get_instance().log("[Element](setTextureAsset) No asset named '"+a+"' exists!");else switch(this._format[1]){case 1:this._textureSprite.setTexture(a);this._orientTexture(!0);break;default:this.setImageSprite(new j.SubImageSprite(a))}},_setFormat:function(a){this._format!=a&&(this._cleanOldFormat(a),this._format=a)},_cleanOldFormat:function(){switch(this._format[1]){case 0:break;case 1:this._textureSprite=null;break;default:this._textureSprite=null}},_determineFormat:function(a){I.__instanceof(a,j.SubImageSprite)?this._setFormat(j.ELEMENT_FORMAT.TEXTURE):this._setFormat(j.ELEMENT_FORMAT.EMPTY)},get_uniqueId:function(){return this._uniqueId},set_layer:function(a){return this._layer=a},get_layer:function(){return this._layer},get_depth:function(){return-this._pos.z},get_root:function(){return this._rootEntity},get_elements:function(){return this._elements},get_renderable:function(){return this._render},set_doDelete:function(a){return this._doDelete=a},get_doDelete:function(){return this._doDelete},set_velocity:function(a){this._velocity.toPoint(a);return this._velocity},get_velocity:function(){return this._velocity},set_pos:function(a){this._pos.toPoint(a);return this._pos},get_pos:function(){return this._pos},dispose:function(){if(this.get_isPooled())this.release();else{for(var a=0,b=this._elements;a<b.length;){var f=b[a];++a;f.dispose()}this._elements=this._format=null;this._removeEventListeners();this._rootEntity.dispose();this._rootEntity=null;this._rootSprite.dispose();this._rootSprite=null;this._imageEntity.dispose();this._imageEntity=null;this._imageSprite.dispose();this._textureSprite=this._imageSprite=null;this._pos.dispose();this._pos=null;this._velocity.dispose();this._velocity=null;this._render.dispose();this._render=null}},release:function(){this.get_isPooled()&&j.Poolable.prototype.release.call(this)},renew:function(a){a.asset&&this.setTextureAsset(a.asset);this._doDelete=!1;this._render.width=0;this._render.height=0;this._render.alpha=1;this._render.visible=!0;this._offsetY=this._offsetX=this._originY=this._originX=0;a.layer&&(this._layer=a.layer);null!=a.x&&(this._pos.x=a.x);null!=a.y&&(this._pos.y=a.y);null!=a.z&&(this._pos.z=a.z);this._velocity.x=null!=a.vx?a.vx:0;this._velocity.y=null!=a.vy?a.vy:0;null!=a.rot&&(this._render.rotation=a.rot);this._render.scaleX=null!=a.scaleX?a.scaleX:1;this._render.scaleY=null!=a.scaleY?a.scaleY:1;null!=a.scale&&(this._render.scaleX=this._render.scaleY=a.scale);null!=a.alpha&&(this._render.alpha=a.alpha);this._render.visible=null!=a.visible?a.visible:!0;this._render.rotation=null!=a.rotation?a.rotation:0;null!=a.useCamera&&(this._useCamera=a.useCamera);if(null!=a.origin){if(I.__instanceof(a.origin,h.WorkinPoint))throw"ERROR: Do not send a WorkinPoint as an origin. Send originX and originY separately, or send a float that will apply to both x and y.";a.originX=a.originY=a.origin}null==a.originX&&(a.originX=0);null==a.originY&&(a.originY=0);this.setOrigin(a.originX,a.originY);j.Poolable.prototype.renew.call(this,a)},__class__:j.Element,__properties__:{set_pos:"set_pos",get_pos:"get_pos",set_velocity:"set_velocity",get_velocity:"get_velocity",set_doDelete:"set_doDelete",get_doDelete:"get_doDelete",get_renderable:"get_renderable",get_elements:"get_elements",get_root:"get_root",get_depth:"get_depth",set_layer:"set_layer",get_layer:"get_layer",get_uniqueId:"get_uniqueId",set_pointerEnabled:"set_pointerEnabled",get_pointerEnabled:"get_pointerEnabled",get_originX:"get_originX",get_originY:"get_originY"}});g.buttons={};g.buttons.ButtonBase=function(a,b,f,c,d,ja,i,ka,k){null==k&&(k="");null==ka&&(ka="");null==i&&(i="");null==ja&&(ja="");null==d&&(d=0.5);null==c&&(c=0.5);this._DEBUG_SHOW_HITBOX=!1;j.Element.call(this,{x:a,y:b,asset:this._assetUp,originX:c,originY:d});this._dispatcher=n.WMEventDispatcher.request();this._tween=f;this._hitTestResult=!1;this._parentOffsetY=this._parentOffsetX=0;this._containsInput=!1;this._assetUp=""==ja?this._getDefaultAssetUp():ja;this._assetOver=""==i?this._getDefaultAssetOver():i;this._assetDown=""==ka?this._getDefaultAssetDown():ka;this._assetDisabled=""==k?this._getDefaultAssetDisabled():k;this._state=g.buttons.ButtonState._STATE_UP;this._flagDragged=!1;this.enable();this._buildHitBox();e.WorkinCloud.get_instance().get_dispatcher().addEventListener(n.WMEventInput.EVENT_INPUT,q(this,this._onEventInput));this._buttonScaleBase=h.WorkinPoint.request(1,1)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.buttons.ButtonBase"]=g.buttons.ButtonBase;g.buttons.ButtonBase.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,buttons,ButtonBase".split(",");g.buttons.ButtonBase.__super__=j.Element;g.buttons.ButtonBase.prototype=v(j.Element.prototype,{_renderDisabled:function(){this.setTextureAsset(this._assetDisabled)},_renderReturnUp:function(){this._tween.tween(this._render,0.15,{scaleX:this._buttonScaleBase.x,scaleY:this._buttonScaleBase.y,alpha:1},!0).ease(h.tween.Ease.EASE_QUAD_OUT);this._renderUp()},_renderDown:function(){this._tween.tween(this._render,0.15,{scaleX:0.95*this._buttonScaleBase.x,scaleY:0.95*this._buttonScaleBase.y,alpha:1},!0).ease(h.tween.Ease.EASE_QUAD_OUT);this.setTextureAsset(this._assetDown)},_renderOut:function(){this._tween.tween(this._render,0.5,{scaleX:this._buttonScaleBase.x,scaleY:this._buttonScaleBase.y,alpha:1},!0).ease(h.tween.Ease.EASE_ELASTIC_OUT)},_renderOver:function(){this._tween.tween(this._render,0.15,{scaleX:1.05*this._buttonScaleBase.x,scaleY:1.05*this._buttonScaleBase.y,alpha:1},!0).ease(h.tween.Ease.EASE_QUAD_IN)},_renderUp:function(){this.setTextureAsset(this._assetUp)},setScale:function(a,b){this._buttonScaleBase.x=a;this._buttonScaleBase.y=b;this._render.scaleX=this._buttonScaleBase.x;this._render.scaleY=this._buttonScaleBase.y},_playSoundClick:function(){},update:function(a){j.Element.prototype.update.call(this,a)},_onCancelDrag:function(){this._flagDragged=!1;this._dispatch(g.buttons.ButtonBase.CANCEL_DRAG)},_onOut:function(){this._flagEnabled&&(this._renderOut(),this._dispatch(g.buttons.ButtonBase.OUT))},_onOver:function(){this._renderOver();this._dispatch(g.buttons.ButtonBase.OVER);e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_mouseover",0.2)},_onUp:function(){this._flagEnabled&&!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)&&(this._renderReturnUp(),this._click(),this._flagDragged&&this._onCancelDrag(),this._dispatch(g.buttons.ButtonBase.UP))},_onDown:function(){this._flagEnabled&&!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)&&(this._renderDown(),this._dispatch(g.buttons.ButtonBase.DOWN))},_doClick:function(){this._dispatch(g.buttons.ButtonBase.CLICK);""!=this.get__clickFlow()&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventFlow.request(this.get__clickFlow()));""!=this.get__clickEvent()&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(this.get__clickEvent()))},_click:function(){var a=this;e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)||(this._playSoundClick(),this._doClick(),this._tween.tween(this._render,0.1,{scaleX:1.1*this._buttonScaleBase.x,scaleY:1.1*this._buttonScaleBase.y,alpha:1},!0).ease(h.tween.Ease.EASE_QUAD_IN).onComplete(function(){a._tween.tween(a._render,0.4,{scaleX:a._buttonScaleBase.x,scaleY:a._buttonScaleBase.y,alpha:1},!0).ease(h.tween.Ease.EASE_ELASTIC_OUT).onComplete(function(){a._state=g.buttons.ButtonState._STATE_UP})}))},_dispatch:function(a){this.get__DO_DISPATCH()&&this._dispatcher.dispatchEvent(n.WMEvent.request(a))},get__clickFlow:function(){return""},get__clickEvent:function(){return""},get__DO_DISPATCH:function(){return!0},_getDefaultAssetDisabled:function(){return""},_getDefaultAssetDown:function(){return""},_getDefaultAssetOver:function(){return""},_getDefaultAssetUp:function(){return""},depthTest:function(a,b){if(!this._flagEnabled)return!1;var f=e.WorkinCloud.get_instance().get_input().doDepthTestOnWorldCoordinates(a,b);this._hitTestResult=!1;f==this._imageSprite&&(this._hitTestResult=!0);!1==this._hitTestResult&&null!=this._hitBox&&f==this._hitBox&&(this._hitTestResult=!0);return this._hitTestResult},_onEventInput:function(a){switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(this._hitRect.toXY(this._pos.x-this._render.width*this._originX+
this._parentOffsetX,this._pos.y-this._render.height*this._originY+this._parentOffsetY),this._containsInput=this._hitRect.contains(a.x,a.y),a.phase){case n.WMEventInput.PHASE_DOWN:switch(this._state[1]){case 0:case 2:case 3:this._containsInput&&this.depthTest(a.x,a.y)&&(this._state=g.buttons.ButtonState._STATE_DOWN,this._onDown(a.x,a.y))}break;case n.WMEventInput.PHASE_MOVE:switch(this._state[1]){case 0:this._containsInput&&this.depthTest(a.x,a.y)&&(this._state=g.buttons.ButtonState._STATE_OVER,this._onOver());break;case 2:!1==this._containsInput&&(this._state=g.buttons.ButtonState._STATE_UP,this._onOut())}break;case n.WMEventInput.PHASE_UP:switch(this._state[1]){case 1:this._containsInput?(this._state=g.buttons.ButtonState._STATE_CLICK,this._onUp(a.x,a.y)):(this._state=g.buttons.ButtonState._STATE_UP,this._renderReturnUp())}}}},_buildHitBox:function(){this._hitRect=h.WMRectangle.request(0,0,this._render.width,this._render.height);if(this._DEBUG_SHOW_HITBOX){this._hitBox=new r.FillSprite(16711680,this._render.width|0,this._render.height|0);var a=new P;a.add(this._hitBox);this._imageEntity.addChild(a)}},disable:function(){this._flagEnabled=!1;this._renderDisabled()},enable:function(){this._flagEnabled=!0;this._renderUp()},get_dispatcher:function(){return this._dispatcher},dispose:function(){this._tween=null;this.disable();e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(n.WMEventInput.EVENT_INPUT,q(this,this._onEventInput));null!=this._hitBox&&(this._hitBox.dispose(),this._hitBox=null);this._hitRect.dispose();this._hitRect=null;this._buttonScaleBase.dispose();this._state=this._buttonScaleBase=null;this._dispatcher.dispose();this._dispatcher=null;j.Element.prototype.dispose.call(this)},setParentOffset:function(a){this._parentOffsetX=a.get_pos().x;this._parentOffsetY=a.get_pos().y;return this},__class__:g.buttons.ButtonBase});g.buttons.ButtonAbort=function(a,b,f,c,d,e,h,i,j){null==j&&(j="");null==i&&(i="");null==h&&(h="");null==e&&(e="");null==d&&(d=0.5);null==c&&(c=0.5);g.buttons.ButtonBase.call(this,a,b,f,c,d,e,h,i,j)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.buttons.ButtonAbort"]=g.buttons.ButtonAbort;g.buttons.ButtonAbort.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,buttons,ButtonAbort".split(",");g.buttons.ButtonAbort.__super__=g.buttons.ButtonBase;g.buttons.ButtonAbort.prototype=v(g.buttons.ButtonBase.prototype,{depthTest:function(){return!0},end:function(){e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(n.WMEventInput.EVENT_INPUT,q(this,this._onEventInput))},_onEventInput:function(a){var b=a.x+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT();switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(this._hitRect.toXY(this._pos.x-this._render.width*this._originX+this._parentOffsetX,this._pos.y-this._render.height*this._originY+this._parentOffsetY),this._containsInput=this._hitRect.contains(b,a.y),a.phase){case n.WMEventInput.PHASE_DOWN:switch(this._state[1]){case 0:case 2:case 3:this._containsInput&&this.depthTest(b,a.y)&&(this._state=g.buttons.ButtonState._STATE_DOWN,this._onDown(b,a.y))}break;case n.WMEventInput.PHASE_MOVE:switch(this._state[1]){case 0:this._containsInput&&this.depthTest(b,a.y)&&(this._state=g.buttons.ButtonState._STATE_OVER,this._onOver());break;case 2:!1==this._containsInput&&(this._state=g.buttons.ButtonState._STATE_UP,this._onOut())}break;case n.WMEventInput.PHASE_UP:switch(this._state[1]){case 1:this._containsInput?(this._state=g.buttons.ButtonState._STATE_CLICK,this._onUp(b,a.y)):(this._state=g.buttons.ButtonState._STATE_UP,this._renderReturnUp())}}}},__class__:g.buttons.ButtonAbort});g.buttons.ButtonState=l["com.disney_channel.star_wars_rebels.chopper_chase.ui.buttons.ButtonState"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,ui,buttons,ButtonState".split(","),__constructs__:["_STATE_UP","_STATE_DOWN","_STATE_OVER","_STATE_CLICK"]};g.buttons.ButtonState._STATE_UP=["_STATE_UP",0];g.buttons.ButtonState._STATE_UP.toString=o;g.buttons.ButtonState._STATE_UP.__enum__=g.buttons.ButtonState;g.buttons.ButtonState._STATE_DOWN=["_STATE_DOWN",1];g.buttons.ButtonState._STATE_DOWN.toString=o;g.buttons.ButtonState._STATE_DOWN.__enum__=g.buttons.ButtonState;g.buttons.ButtonState._STATE_OVER=["_STATE_OVER",2];g.buttons.ButtonState._STATE_OVER.toString=o;g.buttons.ButtonState._STATE_OVER.__enum__=g.buttons.ButtonState;g.buttons.ButtonState._STATE_CLICK=["_STATE_CLICK",3];g.buttons.ButtonState._STATE_CLICK.toString=o;g.buttons.ButtonState._STATE_CLICK.__enum__=g.buttons.ButtonState;g.buttons.EventType=l["com.disney_channel.star_wars_rebels.chopper_chase.ui.buttons.EventType"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,ui,buttons,EventType".split(","),__constructs__:["EVENT_BASIC","EVENT_FLOW","EVENT_DATA"]};g.buttons.EventType.EVENT_BASIC=["EVENT_BASIC",0];g.buttons.EventType.EVENT_BASIC.toString=o;g.buttons.EventType.EVENT_BASIC.__enum__=g.buttons.EventType;g.buttons.EventType.EVENT_FLOW=["EVENT_FLOW",1];g.buttons.EventType.EVENT_FLOW.toString=o;g.buttons.EventType.EVENT_FLOW.__enum__=g.buttons.EventType;g.buttons.EventType.EVENT_DATA=["EVENT_DATA",2];g.buttons.EventType.EVENT_DATA.toString=o;g.buttons.EventType.EVENT_DATA.__enum__=g.buttons.EventType;g.buttons.ButtonDynamic=function(a,b,f,c,d,e,h,i,j){null==j&&(j="");null==i&&(i="");null==h&&(h="");null==e&&(e="");null==d&&(d=0.5);null==c&&(c=0.5);this._event="";g.buttons.ButtonBase.call(this,a,b,f,c,d,e,h,i,j)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.buttons.ButtonDynamic"]=g.buttons.ButtonDynamic;g.buttons.ButtonDynamic.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,buttons,ButtonDynamic".split(",");g.buttons.ButtonDynamic.__super__=g.buttons.ButtonBase;g.buttons.ButtonDynamic.prototype=v(g.buttons.ButtonBase.prototype,{_doClick:function(){if(this._flagEnabled&&(this._dispatch(g.buttons.ButtonBase.CLICK),""!=this._event)){switch(this._eventType[1]){case 0:e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(this._event));break;case 1:e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventFlow.request(this._event));break;case 2:e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(this._event,this._eventData))}this._renderUp()}},setEventWithData:function(a,b){this._event=a;this._eventType=g.buttons.EventType.EVENT_DATA;this._eventData=b},__class__:g.buttons.ButtonDynamic});g.buttons.ButtonFire=function(a,b,f,c,d,e,h,i,j){null==j&&(j="");null==i&&(i="");null==h&&(h="");null==e&&(e="");null==d&&(d=0.5);null==c&&(c=0.5);g.buttons.ButtonBase.call(this,a,b,f,c,d,e,h,i,j)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.buttons.ButtonFire"]=g.buttons.ButtonFire;g.buttons.ButtonFire.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,buttons,ButtonFire".split(",");g.buttons.ButtonFire.__super__=g.buttons.ButtonBase;g.buttons.ButtonFire.prototype=v(g.buttons.ButtonBase.prototype,{depthTest:function(){return!0},_onEventInput:function(a){var b=a.x+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT();switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(this._hitRect.toXY(this._pos.x-this._render.width*this._originX+this._parentOffsetX,this._pos.y-this._render.height*this._originY+this._parentOffsetY),this._containsInput=this._hitRect.contains(b,a.y),a.phase){case n.WMEventInput.PHASE_DOWN:switch(this._state[1]){case 0:case 2:case 3:this._containsInput&&this.depthTest(b,a.y)&&(this._state=g.buttons.ButtonState._STATE_DOWN,this._onDown(b,a.y))}break;case n.WMEventInput.PHASE_MOVE:switch(this._state[1]){case 0:this._containsInput&&this.depthTest(b,a.y)&&(this._state=g.buttons.ButtonState._STATE_OVER,this._onOver());break;case 2:!1==this._containsInput&&(this._state=g.buttons.ButtonState._STATE_UP,this._onOut())}break;case n.WMEventInput.PHASE_UP:switch(this._state[1]){case 1:this._containsInput?(this._state=g.buttons.ButtonState._STATE_CLICK,this._onUp(b,a.y)):(this._state=g.buttons.ButtonState._STATE_UP,this._renderReturnUp())}}}},__class__:g.buttons.ButtonFire});g.buttons.ButtonShopBuy=function(a,b,f,c,d,e,h,i,k){null==k&&(k="");null==i&&(i="");null==h&&(h="");null==e&&(e="");null==d&&(d=0.5);null==c&&(c=0.5);g.buttons.ButtonDynamic.call(this,a,b,f,c,d,e,h,i,k);this._text=this.addElement(new j.TextLocalized(4,8,"buy","",{originX:0.5,originY:0.5,center:!0}));this._hitBox=new r.FillSprite(16711680,this._render.width|0,this._render.height|0);a=this._hitBox.x;a.set__(a._value-(this._render.width|0)*c);a=this._hitBox.y;a.set__(a._value-(this._render.height|0)*d);this._hitBox.alpha.set__(0);c=new P;c.add(this._hitBox);this._rootEntity.addChild(c)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.buttons.ButtonShopBuy"]=g.buttons.ButtonShopBuy;g.buttons.ButtonShopBuy.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,buttons,ButtonShopBuy".split(",");g.buttons.ButtonShopBuy.__super__=g.buttons.ButtonDynamic;g.buttons.ButtonShopBuy.prototype=v(g.buttons.ButtonDynamic.prototype,{get_text:function(){return this._text},__class__:g.buttons.ButtonShopBuy});g.buttons.ButtonShopItem=function(a,b,f,m,d,h,i,k,l,n){null==n&&(n="");null==l&&(l="");null==k&&(k="");null==i&&(i="");null==h&&(h=0.5);null==d&&(d=0.5);g.buttons.ButtonDynamic.call(this,b,f,m,d,h,i,k,l,n);this._item=a;this.setEventWithData(c.ConstantsApp.EVENT_ITEM_SELECT,{id:this._item});this._itemIcon=this.addElement(new j.Element({asset:"",originX:0.5,originY:0.5,x:0,y:-10}));a=e.WorkinCloud.get_instance().get_localize().getLocalizeData("currency");this._itemRank=this.addElement(new j.TextBase(0,35,"1 / 1",a.get_fontName(),{originX:0.5,originY:0.5,scale:0.4,center:!0}));this._itemRank.get_renderable().scaleX=this._itemRank.get_renderable().scaleY=0.4;this._hitBox=new r.FillSprite(16711680,this._render.width|0,this._render.height|0);a=this._hitBox.x;a.set__(a._value-(this._render.width|0)*d);a=this._hitBox.y;a.set__(a._value-(this._render.height|0)*h);this._hitBox.alpha.set__(0);d=new P;d.add(this._hitBox);this._rootEntity.addChild(d);this.doRefreshDisplay()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.buttons.ButtonShopItem"]=g.buttons.ButtonShopItem;g.buttons.ButtonShopItem.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,buttons,ButtonShopItem".split(",");g.buttons.ButtonShopItem.__super__=g.buttons.ButtonDynamic;g.buttons.ButtonShopItem.prototype=v(g.buttons.ButtonDynamic.prototype,{doRefreshDisplay:function(){this._itemRank.set_text(c.Inventory.getRank(this._item)+" / "+c.Inventory.getRankCap(this._item));this._itemIcon.setTextureAsset(c.Inventory.getIcon(this._item))},dispose:function(){g.buttons.ButtonDynamic.prototype.dispose.call(this)},__class__:g.buttons.ButtonShopItem});g.buttons.ButtonSoundToggle=function(a,b,f,c,d,e,h){this._onAssets=e;this._offAssets=h;this._refreshMuteState();g.buttons.ButtonBase.call(this,a,b,f,c,d,this._currentAssets[0],this._currentAssets[1],this._currentAssets[3==this._currentAssets.length?2:1])};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.buttons.ButtonSoundToggle"]=g.buttons.ButtonSoundToggle;g.buttons.ButtonSoundToggle.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,buttons,ButtonSoundToggle".split(",");g.buttons.ButtonSoundToggle.__super__=g.buttons.ButtonBase;g.buttons.ButtonSoundToggle.prototype=v(g.buttons.ButtonBase.prototype,{get__clickEvent:function(){return""},_refreshMuteState:function(){this._currentAssets=e.WorkinCloud.get_instance().get_sound().getMute()?this._offAssets:this._onAssets;this._assetUp=this._currentAssets[0];1<this._currentAssets.length?(this._assetOver=this._currentAssets[1],this._assetDown=this._currentAssets[3==this._currentAssets.length?2:1]):(this._assetOver=this._currentAssets[0],this._assetDown=this._currentAssets[0])},_doClick:function(){this._flagEnabled&&!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)&&(e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsApp.EVENT_MUTE_TOGGLE)),this._refreshMuteState(),this._renderUp())},__class__:g.buttons.ButtonSoundToggle});j.Display=function(a,b,f,c,d){null==d&&(d=0);null==c&&(c=0);null==f&&(f="");this._flagLocked=!1;j.Element.call(this,{x:a,y:b,asset:f,originX:c,originY:d})};l["com.workinman.display.Display"]=j.Display;j.Display.__name__=["com","workinman","display","Display"];j.Display.__super__=j.Element;j.Display.prototype=v(j.Element.prototype,{lock:function(){this._flagLocked=!0},dispose:function(){j.Element.prototype.dispose.call(this)},_updateValue:function(){return""},_refresh:function(){},_onUpdateDisplay:function(a){this._flagLocked||a.get_data().valueID==this._updateValue()&&this._refresh()},_removeEventListeners:function(){j.Element.prototype._removeEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(j.Display.EVENT_UPDATE_DISPLAY,q(this,this._onUpdateDisplay))},_addEventListeners:function(){j.Element.prototype._addEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().addEventListener(j.Display.EVENT_UPDATE_DISPLAY,q(this,this._onUpdateDisplay))},__class__:j.Display});g.display={};g.display.DisplayAchievementScore=function(a,b,f){j.Display.call(this,a,b,"",0.5,0.8);this._tween=f;this._points=e.WorkinCloud.get_instance().getInt(this._updateValue());a=e.WorkinCloud.get_instance().get_localize().getLocalizeData("points");this._textNum=this.addElement(new j.TextBase(0,0,t.string(this._points),a.get_fontName(),{originX:0,originY:0.5,scale:a.get_scale()}));a.dispose();this._text=this.addElement(new j.TextLocalized(-25*this._textNum.get_renderable().scaleX,0,"points","",{originX:1,originY:0.5}));e.WorkinCloud.get_instance().setInt(this._updateValue(),e.WorkinCloud.get_instance().get_achievements().points);this._refresh()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.display.DisplayAchievementScore"]=g.display.DisplayAchievementScore;g.display.DisplayAchievementScore.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,display,DisplayAchievementScore".split(",");g.display.DisplayAchievementScore.__super__=j.Display;g.display.DisplayAchievementScore.prototype=v(j.Display.prototype,{_updateValue:function(){return c.ConstantsApp.INT_ACHIEVEMENT_SCORE},_refresh:function(){this._points=e.WorkinCloud.get_instance().getInt(this._updateValue());this._textNum.set_text(t.string(this._points));h.tween.WorkinTweenUtils.easeBounceIn(this,this._tween,!1)},dispose:function(){this._tween=this._text=this._textNum=null;j.Display.prototype.dispose.call(this)},__class__:g.display.DisplayAchievementScore});g.display.DisplayCurrency=function(a,b,f){j.Display.call(this,a,b,"",0.5,0.8);this._tween=f;this._currency=e.WorkinCloud.get_instance().getInt(this._updateValue());a=e.WorkinCloud.get_instance().get_localize().getLocalizeData("currency");this._textNum=this.addElement(new j.TextBase(15,0,t.string(this._currency),a.get_fontName(),{originX:0,originY:0.5,scale:0.5}));this._textNum.get_renderable().scaleX=this._textNum.get_renderable().scaleY=a.get_scale();a.dispose();this.addElement(new j.Element({asset:"icon_credits",x:13,y:0,originY:0.5,originX:1,scale:0.5}));this._refresh()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.display.DisplayCurrency"]=g.display.DisplayCurrency;g.display.DisplayCurrency.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,display,DisplayCurrency".split(",");g.display.DisplayCurrency.__super__=j.Display;g.display.DisplayCurrency.prototype=v(j.Display.prototype,{_updateValue:function(){return c.ConstantsApp.INT_CREDITS},_refresh:function(){this._currency=e.WorkinCloud.get_instance().getInt(this._updateValue());this._textNum.set_text(t.string(this._currency))},dispose:function(){this._tween=this._textNum=null;j.Display.prototype.dispose.call(this)},__class__:g.display.DisplayCurrency});g.display.DisplayHealth=function(a,b,f){j.Display.call(this,a,b);this._visibleXs=0;this._tween=f;this._displayHealth=e.WorkinCloud.get_instance().getInt(this._updateValue());this._flashTimer=g.display.DisplayHealth._FLASH_RATE;this._strikes=[];this._refresh()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.display.DisplayHealth"]=g.display.DisplayHealth;g.display.DisplayHealth.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,display,DisplayHealth".split(",");g.display.DisplayHealth.__super__=j.Display;g.display.DisplayHealth.prototype=v(j.Display.prototype,{_updateValue:function(){return c.ConstantsApp.INT_LIVES},update:function(a){j.Display.prototype.update.call(this,a);if(3<=this._strikes.length&&(this._flashTimer-=a,0>=this._flashTimer)){this._flashTimer=g.display.DisplayHealth._FLASH_RATE;for(var a=0,b=this._strikes;a<b.length;){var f=b[a];++a;f.get_renderable().visible=!f.get_renderable().visible}}},_refresh:function(){for(this._displayHealth=K.FMath.clamp(e.WorkinCloud.get_instance().getInt(this._updateValue()),0,3);this._strikes.length<this._displayHealth;)this._strikes.push(this.addElement(new j.Element({x:9+g.display.DisplayHealth._X_SPACING*this._strikes.length,y:9,asset:"_0001_strike",origin:0.5}))),e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_ominouswoob2");for(;this._visibleXs<this._displayHealth;)this._strikes[this._visibleXs].get_renderable().scaleX=this._strikes[this._visibleXs].get_renderable().scaleY=0.01,this._tween.tween(this._strikes[this._visibleXs].get_renderable(),0.1,{scaleX:1,scaleY:1},null,h.tween.Ease.EASE_BLAST_OUT),this._visibleXs++},dispose:function(){this._strikes=this._tween=null;j.Display.prototype.dispose.call(this)},__class__:g.display.DisplayHealth});g.display.DisplayLoadScore=function(a,b,f){j.Display.call(this,a,b,"",0.5,0.8);this._tween=f;this._score=e.WorkinCloud.get_instance().getInt(this._updateValue());a=e.WorkinCloud.get_instance().get_localize().getLocalizeData("miniscore");this._textNum=this.addElement(new j.TextBase(0,0,t.string(this._score),a.get_fontName(),{originX:0,originY:0.5,scale:a.get_scale()}));a.dispose();this._text=this.addElement(new j.TextLocalized(-25*this._textNum.get_renderable().scaleX,0,"miniscore","",{originX:1,originY:0.5}));this._refresh()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.display.DisplayLoadScore"]=g.display.DisplayLoadScore;g.display.DisplayLoadScore.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,display,DisplayLoadScore".split(",");g.display.DisplayLoadScore.__super__=j.Display;g.display.DisplayLoadScore.prototype=v(j.Display.prototype,{_updateValue:function(){return c.ConstantsApp.INT_LOADING_SCORE},_refresh:function(){this._score=e.WorkinCloud.get_instance().getInt(this._updateValue());this._textNum.set_text(t.string(this._score));h.tween.WorkinTweenUtils.easeBounceIn(this,this._tween,!1)},dispose:function(){this._tween=this._text=this._textNum=null;j.Display.prototype.dispose.call(this)},__class__:g.display.DisplayLoadScore});g.display.DisplayLoadingProgress=function(a,b,f,c){null==c&&(c=!1);j.Display.call(this,a,b,"",0.5,0.5);this._minigameStyle=c;this._tween=f;this._active=!1;this._spinnerOrigin=-50;this._scale=this._minigameStyle?3:1;this.addElement(new j.Element({asset:"loading_back",x:-165,y:-38}));this._bar=this.addElement(new j.Element({asset:"loading_fill",x:139,y:-38,originX:1}));this.addElement(new j.Element({asset:"loading_front",originX:0.5,originY:0.5,scaleX:1,scaleY:-1}));this._render.alpha=0};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.display.DisplayLoadingProgress"]=g.display.DisplayLoadingProgress;g.display.DisplayLoadingProgress.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,display,DisplayLoadingProgress".split(",");g.display.DisplayLoadingProgress.__super__=j.Display;g.display.DisplayLoadingProgress.prototype=v(j.Display.prototype,{_updateValue:function(){return c.ConstantsApp.INT_LOADING_PROGRESS},_refresh:function(){this._bar.get_renderable().scaleX=K.FMath.clamp((100-e.WorkinCloud.get_instance().getInt(this._updateValue()))/100,0,1)},tweenOut:function(){!1!=this._active&&(h.tween.WorkinTweenUtils.easeSlideOutToDir(this,this._tween,h.tween.TWEEN_DIR.BOTTOM),this._active=!1)},tweenIn:function(){this._active||(h.tween.WorkinTweenUtils.easeSlideInFromDir(this,this._tween,h.tween.TWEEN_DIR.BOTTOM),this._active=!0)},get_active:function(){return this._active},dispose:function(){this._bar=this._tween=null;j.Display.prototype.dispose.call(this)},__class__:g.display.DisplayLoadingProgress});g.display.DisplayScore=function(a,b,f){j.Display.call(this,a,b,"",0.5,0.8);this._tween=f;this._score=e.WorkinCloud.get_instance().getInt(this._updateValue());a=e.WorkinCloud.get_instance().get_localize().getLocalizeData("score");this.addElement(new j.Element({asset:"credits",x:-52,y:31,originY:0.5,originX:1,scaleX:0.37,scaleY:0.37}));this._textNum=this.addElement(new j.TextBase(-50,35,t.string(this._score),a.get_fontName(),{originX:0,originY:0.5,scale:a.get_scale()}));a.dispose();this._text=this.addElement(new j.TextLocalized(0,-20,"score","",{originX:0.5,originY:0.5}));this._refresh()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.display.DisplayScore"]=g.display.DisplayScore;g.display.DisplayScore.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,display,DisplayScore".split(",");g.display.DisplayScore.__super__=j.Display;g.display.DisplayScore.prototype=v(j.Display.prototype,{_updateValue:function(){return c.ConstantsApp.INT_CREDITS_SESSION},_refresh:function(){this._score=e.WorkinCloud.get_instance().getInt(this._updateValue());this._textNum.set_text(t.string(this._score));h.tween.WorkinTweenUtils.easeBounceIn(this,this._tween,!1)},dispose:function(){this._tween=this._text=this._textNum=null;j.Display.prototype.dispose.call(this)},__class__:g.display.DisplayScore});g.display.DisplayStress=function(a,b,f){j.Display.call(this,a,b,"",0.5,0.5);this._tween=f;this.addElement(new j.Element({asset:"_0005_meter-back",origin:0.5,x:41,y:5}));this._bar=this.addElement(new j.Element({asset:"_0004_stress-meter",originY:0.5,x:-30}));this._bar._imageSprite.scissor=new K.Rectangle;this.addElement(new j.Element({asset:"_0003_meter-frame",originX:0.5,originY:0.5}));a=this.addElement(new j.Element({asset:"_0002_chopper-head",x:-105,y:-44}));a.addElement(this._armL=new j.Element({originX:0.76,originY:0.91,asset:"_0006_chopper_arm",x:0,y:50}));a.addElement(this._armR=new j.Element({originX:0.76,originY:0.91,asset:"_0006_chopper_arm",x:66,y:50}));this._armR.get_renderable().scaleX=-1;a.addElement(this._stressed=new j.Element({asset:"_0000_shock-marks",origin:0.5,x:38,y:16}));this._stressed.get_renderable().alpha=0;this._stressed.get_velocity().y=10;this._render.alpha=0;this._timeBlink=0.5;this.addElement(new g.display.DisplayHealth(-12,-47,this._tween));this._refresh()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.display.DisplayStress"]=g.display.DisplayStress;g.display.DisplayStress.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,display,DisplayStress".split(",");g.display.DisplayStress.__super__=j.Display;g.display.DisplayStress.prototype=v(j.Display.prototype,{_updateValue:function(){return c.ConstantsApp.FLOAT_STRESS},_refresh:function(){var a=e.WorkinCloud.get_instance().getFloat(this._updateValue()),a=K.FMath.clamp(a,0,10);this._bar._imageSprite.scissor.set(0,0,a/10*this._bar.get_renderable().width,this._bar.get_renderable().height)},update:function(a){j.Display.prototype.update.call(this,a);this._timeBlink-=a;0>this._timeBlink&&(this._timeBlink=0.5,this._stressed.get_pos().y=20,this._stressed.get_renderable().scaleX*=-1);this._stressed.get_renderable().alpha=(e.WorkinCloud.get_instance().getFloat(this._updateValue())-3)/10;5<e.WorkinCloud.get_instance().getFloat(this._updateValue())?(this._armL.get_renderable().rotation=-80*Math.sin(6*this._timeBlink),this._armR.get_renderable().rotation=80*Math.sin(6*this._timeBlink)):(this._armL.get_renderable().rotation=0,this._armR.get_renderable().rotation=0)},dispose:function(){this._stressed=this._armR=this._armL=this._bar=this._spinner=this._tween=null;j.Display.prototype.dispose.call(this)},__class__:g.display.DisplayStress});g.screens={};g.screens.ScreenBase=function(a,b){this._STATE_SUSPENDED="state_suspended";this._STATE_OPENED="state_opened";this._STATE_OUT="state_out";this._STATE_IN="state_in";this.id=a;j.Element.call(this,{asset:b});this._dispatcher=n.WMEventDispatcher.request();if(this._useClickWall()){this._clickWall=new P;var f=new r.FillSprite(16711680,c.ConstantsApp.STAGE_WIDTH,c.ConstantsApp.STAGE_HEIGHT);f.alpha.set__(0);this._clickWall.add(f);this._rootEntity.addChild(this._clickWall)}this._rootEntity.addChild(this._imageEntity);this._tween=h.tween.WorkinTweener.request();this._buildScreen();this._flagStateAnimationComplete=this._flagStateCompleteTemp=this.flagDispose=!1;this._states=[];this._generateStates();this._stateIndex=this._states.length+2;this._setFirstState();c.ConstantsApp.OPTION_SHOW_EMULATED_CLOSE&&(this._buttonTest=new j.Element({x:c.ConstantsApp.get_CANVAS_RIGHT(),y:c.ConstantsApp.get_CANVAS_TOP(),asset:"close_test",originX:1,originY:0}),this.addElement(this._buttonTest))};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenBase"]=g.screens.ScreenBase;g.screens.ScreenBase.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenBase".split(",");g.screens.ScreenBase.__super__=j.Element;g.screens.ScreenBase.prototype=v(j.Element.prototype,{_onStateComplete:function(){this._flagStateCompleteTemp=!1;null!=this._states[this._stateIndex].outFunc&&this._states[this._stateIndex].outFunc();this._states[this._stateIndex].actionOnComplete!=g.screens.data.ScreenStateData.ACTION_STOP&&(this._states[this._stateIndex].actionOnComplete==g.screens.data.ScreenStateData.ACTION_OPENED?(this._setOpenedState(),this._dispatcher.dispatchEvent(n.WMEventScreenOut.request(c.ConstantsScreen.OUTPUT_OPENED,this.id))):this._states[this._stateIndex].actionOnComplete==g.screens.data.ScreenStateData.ACTION_CLOSED?(this.setFlagDispose(),this._dispatcher.dispatchEvent(n.WMEventScreenOut.request(c.ConstantsScreen.OUTPUT_CLOSED,this.id))):this._states[this._stateIndex].actionOnComplete==g.screens.data.ScreenStateData.ACTION_NEW_STATE?this._setState(this._states[this._stateIndex].actionData):this._states[this._stateIndex].actionOnComplete==g.screens.data.ScreenStateData.ACTION_EVENT?this._dispatcher.dispatchEvent(n.WMEvent.request(this._states[this._stateIndex].actionData)):this._states[this._stateIndex].actionOnComplete==g.screens.data.ScreenStateData.ACTION_FLOW&&this._doFlowEvent(this._states[this._stateIndex].actionData))},_removeEventListeners:function(){j.Element.prototype._removeEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_RESIZE_CANVAS,q(this,this._onEventResizeCanvas))},_addEventListeners:function(){j.Element.prototype._addEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_RESIZE_CANVAS,q(this,this._onEventResizeCanvas))},_onEventResizeCanvas:function(){},_findStateIndex:function(a){for(var b=this._states.length-1;0<=b;){if(this._states[b].id==a)return b;b--}return-1},get_state:function(){return this._states[this._stateIndex].id},_setState:function(a,b){null==b&&(b=!1);var f=this._findStateIndex(a);if(0>f)e.WorkinCloud.get_instance().log("[ScreenBase](_setState) ERROR : State >"+a+"< not found."),e.WorkinCloud.get_instance().log("[ScreenBase](_setState) cancelling setState().");else if(b||f!=this._stateIndex)this._flagStateAnimationComplete=this._flagStateCompleteTemp=!1,this._stateIndex=f,null!=this._states[this._stateIndex].inFunc&&this._states[this._stateIndex].inFunc()},_addState:function(a,b,f,c,d,e){null==c&&(c="");null==f&&(f=0);this._states.push(new g.screens.data.ScreenStateData(a,b,f,c,d,e))},isClosing:function(){return this.get_state()==this._STATE_OUT},isOpening:function(){return this.get_state()==this._STATE_IN},disable:function(){},enable:function(){},close:function(a){null==a&&(a=!0);a?this._setCloseState():(this.setFlagDispose(),this._dispatcher.dispatchEvent(n.WMEventScreenOut.request(c.ConstantsScreen.OUTPUT_CLOSED,this.id)))},suspend:function(){this._setState(this._STATE_SUSPENDED)},_finishOpenState:function(){this._setOpenedState();this._dispatcher.dispatchEvent(n.WMEventScreenOut.request(c.ConstantsScreen.OUTPUT_OPENED,this.id))},open:function(a){null==a&&(a=!0);a?(this.get_state()!=this._STATE_IN&&this._setState(this._STATE_IN),this._setInState()):this._finishOpenState()},reset:function(){this._setFirstState()},handleInput:function(){},update:function(a){j.Element.prototype.update.call(this,a);this._tween.update(a);this._flagStateCompleteTemp&&this._onStateComplete()},_doFlowEvent:function(a){e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventFlow.request(a))},_buildScreen:function(){},_generateStates:function(){this._addState(this._STATE_IN,"in",g.screens.data.ScreenStateData.ACTION_OPENED);this._addState(this._STATE_OUT,"out",g.screens.data.ScreenStateData.ACTION_CLOSED);this._addState(this._STATE_OPENED,"open");this._addState(this._STATE_SUSPENDED,"suspend")},_setOpenedState:function(){this._setState(this._STATE_OPENED)},_setCloseState:function(){this.setFlagDispose()},_setInState:function(){this._finishOpenState()},_setFirstState:function(){this._setState(this._STATE_IN)},_useClickWall:function(){return!0},setFlagDispose:function(){this.flagDispose=!0},get_dispatcher:function(){return this._dispatcher},dispose:function(){this._states=this._buttonTest=null;this._tween.dispose();this._tween=null;this._dispatcher.dispose();this._dispatcher=null;j.Element.prototype.dispose.call(this)},__class__:g.screens.ScreenBase,__properties__:v(j.Element.prototype.__properties__,{get_dispatcher:"get_dispatcher",get_state:"get_state"})});g.screens.ScreenAbort=function(a,b,f){null==b&&(b="");this._BLINK_TIME=1;g.screens.ScreenBase.call(this,a,b,f);this._blinkTimer=this._BLINK_TIME;this._closing=!1;e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Abort");this._parallaxer=new d.data.Parallaxer(this.addElement(new j.Element({asset:"starfield",originX:0.5,originY:0.5,x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y})),this.addElement(new j.Element({asset:"starfield",originX:0.5,originY:0.5,x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y})),!0);this._shipBG=this.addElement(new j.Element({asset:"bg_frame_half",x:c.ConstantsApp.STAGE_CENTER_X+1,y:c.ConstantsApp.get_CANVAS_TOP()+768,originX:1,originY:1}));this._shipBG.addElement(new j.Element({asset:"bg_frame_half",x:-1,y:0,originX:1,originY:1,scaleX:-1,scaleY:1}));this._frame=this.addElement(new j.Element({asset:"panel_mission_select",originX:0.5,originY:0.5,x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y-150}));this._frame.addElement(new j.TextLocalized(20,0,"game_over","",{originX:0.5,originY:0.5,center:!0}));a=this.addElement(new g.buttons.ButtonBase(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.get_CANVAS_BOTTOM()-120,this._tween,0.5,0.5,"btn_choose"));a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onPlayAgainClick));a.addElement(new j.TextLocalized(5,5,"ok","",{origin:0.5}));this._clickTray=a;this._frame.get_renderable().alpha=0;this._clickTray.get_renderable().alpha=0};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenAbort"]=g.screens.ScreenAbort;g.screens.ScreenAbort.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenAbort".split(",");g.screens.ScreenAbort.__super__=g.screens.ScreenBase;g.screens.ScreenAbort.prototype=v(g.screens.ScreenBase.prototype,{_tweenOutClickTray:function(){null!=this._clickTray&&h.tween.WorkinTweenUtils.easeBounceOut(this._clickTray,this._tween)},_onPlayAgainClick:function(){this._closing||(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TESTING_MINIGAMES)?this._doFlowEvent(c.ConstantsScreen.FLOW_MINIGAME_MENU):this._doFlowEvent(c.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN))},_setCloseState:function(){this._closing||(this._closing=!0,this._overlay=this.addElement(new j.Element({asset:"black_overlay",x:c.ConstantsApp.get_CANVAS_LEFT(),y:c.ConstantsApp.get_CANVAS_TOP(),origin:0,alpha:0})),this._overlay.applyRenderable(),this._tween.tween(this._overlay.get_renderable(),0.5,{alpha:1},null,h.tween.Ease.EASE_QUAD).onComplete(q(this,this.setFlagDispose)))},_setInState:function(){h.tween.WorkinTweenUtils.easeSlideInFromDir(this._frame,this._tween,h.tween.TWEEN_DIR.TOP);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._clickTray,this._tween,h.tween.TWEEN_DIR.BOTTOM);this._finishOpenState()},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a);this._parallaxer.move(10*a)},dispose:function(){this._tray=this._frame=this._clickTray=this._score=this._buttonPlayAgain=this._textClickToPlay=null;g.screens.ScreenBase.prototype.dispose.call(this)},__class__:g.screens.ScreenAbort});g.screens.ScreenAchievementPopup=function(a,b,f){null==b&&(b="");this._LIFETIME=3;g.screens.ScreenBase.call(this,a,b,f);this._tray=this.addElement(new j.Element({asset:"achievement_popopup_bg",originX:0.5,originY:0.5,x:c.ConstantsApp.STAGE_WIDTH-220,y:c.ConstantsApp.STAGE_HEIGHT-80}));a=e.WorkinCloud.get_instance().get_achievements().lastAchievedId;this._tray.addElement(new j.Element({x:-150,asset:"achievement_icon_"+a,originX:0.5,originY:0.5}));this._tray.addElement(new j.TextLocalized(-100,-15,"achievement_unlocked","",{originY:0.5}));this._tray.addElement(new j.TextLocalized(-100,15,"achievement_name_"+a,"",{originY:0.5}));this._tray.get_renderable().alpha=0;this._timer=this._LIFETIME};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenAchievementPopup"]=g.screens.ScreenAchievementPopup;g.screens.ScreenAchievementPopup.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenAchievementPopup".split(",");g.screens.ScreenAchievementPopup.__super__=g.screens.ScreenBase;g.screens.ScreenAchievementPopup.prototype=v(g.screens.ScreenBase.prototype,{_setCloseState:function(){var a=this;h.tween.WorkinTweenUtils.easeSlideOutToDir(this._tray,this._tween,h.tween.TWEEN_DIR.BOTTOM).onComplete(function(){a.setFlagDispose()})},_setInState:function(){var a=this;h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.BOTTOM).onComplete(function(){a._finishOpenState()})},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a);this.get_state()==this._STATE_OPENED&&0<this._timer&&(this._timer-=a,0>=this._timer&&this._doFlowEvent(c.ConstantsScreen.FLOW_ACHIEVEMENT_POPUP_CLOSE))},dispose:function(){this._tray=null;g.screens.ScreenBase.prototype.dispose.call(this)},_useClickWall:function(){return!1},__class__:g.screens.ScreenAchievementPopup});g.screens.ScreenAchievements=function(a,b,f){null==b&&(b="");g.screens.ScreenBase.call(this,a,b,f);this._tray=this.addElement(new j.Element({asset:"template_bg"}));this._points=this.addElement(new g.display.DisplayAchievementScore(175,35,this._tween));this._points.get_renderable().alpha=0;this._rectVisible=new K.Rectangle(100,140,700,350);this._scrollDy=80;this._list=[];f=e.WorkinCloud.get_instance().get_achievements().getAchievements();a=0;for(b=f.length;a<b;){var m=a++;this._list.push(this._tray.addElement(new j.Element({asset:"achievement_list_bg",x:c.ConstantsApp.STAGE_CENTER_X,y:this._rectVisible.y+m*this._scrollDy,originX:0.5,originY:0.5})));this._list[this._list.length-1].addElement(new j.TextLocalized(0,-15,e.WorkinCloud.get_instance().get_achievements().getLocalizationNameID(f[m]),"",{originY:0.5,originX:0.5}));this._list[this._list.length-1].addElement(new j.TextLocalized(0,15,e.WorkinCloud.get_instance().get_achievements().getLocalizationDescID(f[m]),"",{originY:0.5,originX:0.5}));e.WorkinCloud.get_instance().get_achievements().getAchieved(f[m])?this._list[this._list.length-1].addElement(new j.Element({asset:e.WorkinCloud.get_instance().get_achievements().getIcon(f[m]),x:-220,originX:0.5,originY:0.5})):this._list[this._list.length-1].addElement(new j.Element({asset:"achievement_icon_default_locked",x:-220,originX:0.5,originY:0.5}));this._list[this._list.length-1].addElement(new j.Element({asset:"achievement_icon_default",x:220,originX:0.5,originY:0.5}));var d=new j.TextBase(220,0,"","",{originY:0.5,originX:0.5,scale:0.5});d.set_text(t.string(e.WorkinCloud.get_instance().get_achievements().getPoints(f[m])));this._list[this._list.length-1].addElement(d)}b=0;for(a=this._list;b<a.length;)f=a[b],++b,f.get_pos().y+f.get_renderable().height<this._rectVisible.y?f.get_renderable().alpha=0:f.get_pos().y>this._rectVisible.y+this._rectVisible.height?f.get_renderable().alpha=0:f.get_renderable().alpha=1;this._tray.addElement(new j.Element({asset:"scorebox"}));this._tray.get_renderable().alpha=0;I.__cast(this._tray.addElement(this._buttonUp=(new g.buttons.ButtonBase(840,140,this._tween,0.5,0.5,"button_play")).setParentOffset(this._tray)),g.buttons.ButtonBase).get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventUpClick));I.__cast(this._tray.addElement(this._buttonDown=(new g.buttons.ButtonBase(840,460,this._tween,0.5,0.5,"button_play")).setParentOffset(this._tray)),g.buttons.ButtonBase).get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventDownClick));I.__cast(this._tray.addElement(a=(new g.buttons.ButtonBase(920,40,this._tween,0.5,0.5,"button_x")).setParentOffset(this._tray)),g.buttons.ButtonBase).get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventExitClick));this._buttonUp.setScale(0.5,0.5);this._buttonDown.setScale(0.5,0.5);a.setScale(0.5,0.5);this._buttonUp.get_renderable().rotation=-90;this._buttonDown.get_renderable().rotation=90;this._checkButtons()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenAchievements"]=g.screens.ScreenAchievements;g.screens.ScreenAchievements.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenAchievements".split(",");g.screens.ScreenAchievements.__super__=g.screens.ScreenBase;g.screens.ScreenAchievements.prototype=v(g.screens.ScreenBase.prototype,{_onEventExitClick:function(){this.get_state()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_ACHIEVEMENT_CLOSE)},_onEventDownClick:function(){var a=this;if(!(this.get_state()!=this._STATE_OPENED||this._list[this._list.length-1].get_pos().y<this._rectVisible.y+this._rectVisible.height)){this._buttonUp.disable();this._buttonDown.disable();for(var b=0,f=this._list.length;b<f;){var c=b++;if(c==this._list.length-1)this._tween.tween(this._list[c].get_pos(),0.5,{y:this._list[c].get_pos().y-this._scrollDy},!1,h.tween.Ease.EASE_OUT).onComplete(function(){a._checkButtons()});else this._tween.tween(this._list[c].get_pos(),0.5,{y:this._list[c].get_pos().y-this._scrollDy},!1,h.tween.Ease.EASE_OUT);this._list[c].get_pos().y<=this._rectVisible.y?this._tween.tween(this._list[c].get_renderable(),0.25,{alpha:0},!1,h.tween.Ease.EASE_OUT):this._list[c].get_pos().y-
this._scrollDy<=this._rectVisible.y+this._rectVisible.height&&this._tween.tween(this._list[c].get_renderable(),0.25,{alpha:1},!1,h.tween.Ease.EASE_OUT)}}},_onEventUpClick:function(){var a=this;if(!(this.get_state()!=this._STATE_OPENED||this._list[0].get_pos().y==this._rectVisible.y)){this._buttonUp.disable();this._buttonDown.disable();for(var b=0,f=this._list.length;b<f;){var c=b++;if(c==this._list.length-1)this._tween.tween(this._list[c].get_pos(),0.5,{y:this._list[c].get_pos().y+this._scrollDy},!1,h.tween.Ease.EASE_OUT).onComplete(function(){a._checkButtons()});else this._tween.tween(this._list[c].get_pos(),0.5,{y:this._list[c].get_pos().y+this._scrollDy},!1,h.tween.Ease.EASE_OUT);this._list[c].get_pos().y+this._list[c].get_renderable().height>=this._rectVisible.y+this._rectVisible.height?this._tween.tween(this._list[c].get_renderable(),0.25,{alpha:0},!1,h.tween.Ease.EASE_OUT):this._list[c].get_pos().y+this._scrollDy>=this._rectVisible.y&&this._tween.tween(this._list[c].get_renderable(),0.25,{alpha:1},!1,h.tween.Ease.EASE_OUT)}}},_checkButtons:function(){2>Math.abs(this._list[0].get_pos().y-this._rectVisible.y)?this._buttonUp.disable():this._buttonUp.enable();this._list[this._list.length-1].get_pos().y<this._rectVisible.y+this._rectVisible.height?this._buttonDown.disable():this._buttonDown.enable()},_setInState:function(){var a=this;h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(function(){a._finishOpenState()});h.tween.WorkinTweenUtils.easeBounceIn(this._points,this._tween,!0,0.55)},dispose:function(){this._list=this._points=this._buttonDown=this._buttonUp=this._tray=null;g.screens.ScreenBase.prototype.dispose.call(this)},__class__:g.screens.ScreenAchievements});g.screens.ScreenEndGame=function(a,b,f){null==b&&(b="");this._BLINK_TIME=1;g.screens.ScreenBase.call(this,a,b,f);this._blinkTimer=this._BLINK_TIME;this._closing=!1;a=Math.random();0.25>a?e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Win_1"):0.5>a?e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Win_2"):"GHOST"==e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION).loc?e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Win_GHOST"):e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Win_IMPERIAL");b=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.PROGRESS_ID);a=!1;0==b.played[e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_MISSION)]&&(b.completed+=1,b.completed<=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_MAX_MISSION_NUMBER)-4&&(a=!0));b.played[e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_MISSION)]+=1;e.WorkinCloud.get_instance().sharedObjectSetData(c.ConstantsApp.PROGRESS_ID,b);this._tray=this.addElement(new j.Element({asset:"panel_mission_select",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y-150,originX:0.5,originY:0.5}));this._tray.get_renderable().visible=!1;b=this._tray.addElement(new j.TextLocalized(15,0,"mission_complete","",{originX:0.5,originY:0.5,center:!0}));c.ConstantsApp.update_unlocks()?a&&(b.get_pos().y=-30,this._tray.addElement(new j.TextLocalized(15,70,"mission_unlocked","",{originX:0.5,originY:0.5,center:!0}))):(b.get_pos().y=-30,this._tray.addElement(new j.TextLocalized(15,70,"need_more_notoriety","",{originX:0.5,originY:0.5,center:!0})));a=this.addElement(new g.buttons.ButtonBase(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y+150,this._tween,0.5,0.5,"btn_choose"));a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onPlayAgainClick));a.addElement(new j.TextLocalized(5,5,"ok","",{origin:0.5}));this._clickTray=a;I.__cast(this._tray.addElement((new g.buttons.ButtonBase(-205,140,this._tween,0.5,0.5,"btn_settings")).setParentOffset(this._tray)),g.buttons.ButtonBase).get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventStoreClick));this._clickTray.get_renderable().alpha=0};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenEndGame"]=g.screens.ScreenEndGame;g.screens.ScreenEndGame.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenEndGame".split(",");g.screens.ScreenEndGame.__super__=g.screens.ScreenBase;g.screens.ScreenEndGame.prototype=v(g.screens.ScreenBase.prototype,{_onReturnToMainMenu:function(){e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);this._tray.get_pos().x=c.ConstantsApp.STAGE_CENTER_X;this._tray.get_pos().y=c.ConstantsApp.STAGE_CENTER_Y-150;this._clickTray.get_pos().x=c.ConstantsApp.STAGE_CENTER_X;this._clickTray.get_pos().y=c.ConstantsApp.STAGE_CENTER_Y+150;h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._clickTray,this._tween,h.tween.TWEEN_DIR.BOTTOM)},_onPlayAgainClick:function(){this._closing||(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),this._doFlowEvent(c.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN))},_onEventStoreClick:function(){e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2);h.tween.WorkinTweenUtils.easeSlideOutToDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP);h.tween.WorkinTweenUtils.easeSlideOutToDir(this._clickTray,this._tween,h.tween.TWEEN_DIR.BOTTOM);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_SHOP_OPEN,!0);this._doFlowEvent(c.ConstantsScreen.FLOW_SHOP)},_setCloseState:function(){var a=this;if(!this._closing){this._closing=!0;var b=this.addElement(new j.Element({asset:"black_overlay",x:c.ConstantsApp.get_CANVAS_LEFT(),y:c.ConstantsApp.get_CANVAS_TOP(),origin:0,alpha:0}));b.applyRenderable();this._tween.tween(b.get_renderable(),2,{alpha:1},null,h.tween.Ease.EASE_QUAD).onComplete(function(){e.WorkinCloud.get_instance().get_sound().playMusic("music_menu",0.5);e.WorkinCloud.get_instance().get_sound().stopSound("sting_win_mission");a.setFlagDispose()})}},_setInState:function(){var a=this;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._clickTray,this._tween,h.tween.TWEEN_DIR.BOTTOM,0.3);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP,0.3).onComplete(function(){a._finishOpenState()})},_removeEventListeners:function(){g.screens.ScreenBase.prototype._removeEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_RETURN_TO_MAIN_MENU,q(this,this._onReturnToMainMenu))},_addEventListeners:function(){g.screens.ScreenBase.prototype._addEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_RETURN_TO_MAIN_MENU,q(this,this._onReturnToMainMenu))},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a)},dispose:function(){this._tray=this._frame=this._clickTray=this._score=this._buttonPlayAgain=this._textClickToPlay=null;g.screens.ScreenBase.prototype.dispose.call(this)},__class__:g.screens.ScreenEndGame});g.screens.ScreenEndLevel=function(a,b,f){null==b&&(b="");this._BLINK_TIME=1;g.screens.ScreenBase.call(this,a,b,f);this._blinkTimer=this._BLINK_TIME;this._closing=!1;a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.PROGRESS_ID);0<e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_DIFFICULTY)?e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_DIFFICULTY,1):0>=a.played[e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_MISSION)]&&e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_CREDITS_SESSION,250);e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_LEVEL,1);e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_CREDITS_SESSION,(50+5*c.Inventory.getRank(c.Item.ITEM_CREDITS))*e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_DIFFICULTY));e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_CREDITS,e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_CREDITS_SESSION));a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.STORE_ID);a.credits=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_CREDITS);e.WorkinCloud.get_instance().sharedObjectSetData(c.ConstantsApp.STORE_ID,a);this._starsBG=this.addElement(new j.Element({asset:"starfield",x:c.ConstantsApp.STAGE_CENTER_X+512,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._starsBG.addElement(new j.Element({asset:"starfield",x:-1024,y:0,originX:0.5,originY:0.5}));this._starsBG2=this.addElement(new j.Element({asset:"starfield",x:c.ConstantsApp.STAGE_CENTER_X+512,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._starsBG2.addElement(new j.Element({asset:"starfield",x:-1024,y:0,originX:0.5,originY:0.5}));this._parallaxer=new d.data.Parallaxer(this._starsBG,this._starsBG2,!0);this._shipBG=this.addElement(new j.Element({asset:"bg_frame_half",x:c.ConstantsApp.STAGE_CENTER_X+1,y:c.ConstantsApp.get_CANVAS_TOP()+768,originX:1,originY:1}));this._shipBG.addElement(new j.Element({asset:"bg_frame_half",x:-1,y:0,originX:1,originY:1,scaleX:-1,scaleY:1}));this._tray=this.addElement(new j.Element({asset:"panel_mission_select",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y-150,originX:0.5,originY:0.5}));this._tray.get_renderable().visible=!1;this._tray.addElement(new j.TextLocalized(15,-50,"level_complete","",{originX:0.5,originY:0.5,center:!0}));this._score=this._tray.addElement(new g.display.DisplayScore(15,70,this._tween));this._score.lock();a=this.addElement(new g.buttons.ButtonBase(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y+150,this._tween,0.5,0.5,"btn_choose"));a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onPlayAgainClick));a.addElement(new j.TextLocalized(5,5,"ok","",{origin:0.5}));this._clickTray=a;I.__cast(this._tray.addElement((new g.buttons.ButtonBase(-205,140,this._tween,0.5,0.5,"btn_settings")).setParentOffset(this._tray)),g.buttons.ButtonBase).get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventStoreClick));this._clickTray.get_renderable().alpha=0;e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_LEVEL)>=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION).steps.length&&(a="noVideo",c.ConstantsApp.OPTION_SHOW_VIDEOS&&null!=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION).video&&(a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION).video),"noVideo"!=a&&(e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_VIDEO_NAME,a),this._doFlowEvent(c.ConstantsScreen.FLOW_VIDEO_OPEN)))};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenEndLevel"]=g.screens.ScreenEndLevel;g.screens.ScreenEndLevel.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenEndLevel".split(",");g.screens.ScreenEndLevel.__super__=g.screens.ScreenBase;g.screens.ScreenEndLevel.prototype=v(g.screens.ScreenBase.prototype,{_onReturnToMainMenu:function(){e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);this._tween.tween(this._shipBG.get_pos(),0.5,{x:c.ConstantsApp.STAGE_CENTER_X},null,h.tween.Ease.EASE_SPACE_OUT);this._tween.tween(this._starsBG.get_pos(),0.5,{x:c.ConstantsApp.STAGE_CENTER_X},null,h.tween.Ease.EASE_SPACE_OUT);this._tween.tween(this._starsBG2.get_pos(),0.5,{x:c.ConstantsApp.STAGE_CENTER_X},null,h.tween.Ease.EASE_SPACE_OUT);this._tray.get_pos().x=c.ConstantsApp.STAGE_CENTER_X;this._tray.get_pos().y=c.ConstantsApp.STAGE_CENTER_Y-150;this._clickTray.get_pos().x=c.ConstantsApp.STAGE_CENTER_X;this._clickTray.get_pos().y=c.ConstantsApp.STAGE_CENTER_Y+150;h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._clickTray,this._tween,h.tween.TWEEN_DIR.BOTTOM)},_doTransition:function(){var a=480,b=200;this._transitionRight&&(a*=-1,b*=-1);this._tween.tween(this._shipBG.get_pos(),0.5,{x:this._shipBG.get_pos().x+a},null,h.tween.Ease.EASE_SPACE_OUT);this._tween.tween(this._starsBG.get_pos(),0.5,{x:this._shipBG.get_pos().x+b},null,h.tween.Ease.EASE_SPACE_OUT);this._tween.tween(this._starsBG2.get_pos(),0.5,{x:this._shipBG.get_pos().x+b},null,h.tween.Ease.EASE_SPACE_OUT);h.tween.WorkinTweenUtils.easeSlideOutToDir(this._clickTray,this._tween,h.tween.TWEEN_DIR.BOTTOM);h.tween.WorkinTweenUtils.easeSlideOutToDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP)},_tweenOutClickTray:function(){null!=this._clickTray&&h.tween.WorkinTweenUtils.easeBounceOut(this._clickTray,this._tween)},_onPlayAgainClick:function(){this._closing||(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_LEVEL)>=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION).steps.length?(this._transitionRight=!1,this._doTransition(),this._doFlowEvent(c.ConstantsScreen.FLOW_MISSION_COMPLETE)):this._doFlowEvent(c.ConstantsScreen.FLOW_SELECTED_LEVEL),e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_RETURN_TO_MAIN_MENU,q(this,this._onReturnToMainMenu)))},_onEventStoreClick:function(){this._transitionRight=!0;this._doTransition();e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_SHOP_OPEN,!0);this._doFlowEvent(c.ConstantsScreen.FLOW_SHOP)},_setCloseState:function(){if(!this._closing){this._closing=!0;var a=this.addElement(new j.Element({asset:"black_overlay",x:c.ConstantsApp.get_CANVAS_LEFT(),y:c.ConstantsApp.get_CANVAS_TOP(),origin:0,alpha:0}));a.applyRenderable();this._tween.tween(a.get_renderable(),0.5,{alpha:1},null,h.tween.Ease.EASE_QUAD).onComplete(q(this,this.setFlagDispose))}},_setInState:function(){var a=this;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._clickTray,this._tween,h.tween.TWEEN_DIR.BOTTOM);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(function(){a._finishOpenState()})},_removeEventListeners:function(){g.screens.ScreenBase.prototype._removeEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_RETURN_TO_MAIN_MENU,q(this,this._onReturnToMainMenu))},_addEventListeners:function(){g.screens.ScreenBase.prototype._addEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_RETURN_TO_MAIN_MENU,q(this,this._onReturnToMainMenu))},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a);this._parallaxer.move(10*a)},dispose:function(){this._tray=this._frame=this._clickTray=this._score=this._buttonStore=this._buttonPlayAgain=this._textClickToPlay=null;g.screens.ScreenBase.prototype.dispose.call(this)},__class__:g.screens.ScreenEndLevel});g.screens.ScreenEnterCode=function(a,b,f){null==b&&(b="");this._KEY_LENGTH=0;this._OPEN_GEAR_RATE=250;this._BOTTOM_RESET=6.5;this._TOP_RESET=5;this._LOCK_STATE_OPEN=1;this._LOCK_STATE_OPENING=2;this._lockState=this._LOCK_STATE_LOCKED=0;this._keypadListeners=[];g.screens.ScreenBase.call(this,a,b,f);this._closing=!1;this._squeezeTop=this._squeezeBottom=10;this._inputBuffer="";this._KEY_LENGTH=e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_UNLOCK_CODE).length;4>this._KEY_LENGTH&&(this._KEY_LENGTH=4)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenEnterCode"]=g.screens.ScreenEnterCode;g.screens.ScreenEnterCode.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenEnterCode".split(",");g.screens.ScreenEnterCode.__super__=g.screens.ScreenBase;g.screens.ScreenEnterCode.prototype=v(g.screens.ScreenBase.prototype,{_onEventBackClick:function(){this.get_state()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_ENTER_CODE_CLOSE)},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a);this.get_state()==this._STATE_OPENED&&(this._lockState==this._LOCK_STATE_LOCKED?(this._squeezeBottom-=a,0>this._squeezeBottom&&(this._squeezeBottom=this._BOTTOM_RESET,this._squeezeTent(g.screens.ScreenEnterCode._tentBot,0)),this._squeezeTop-=a,0>this._squeezeTop&&(this._squeezeTop=this._TOP_RESET,this._squeezeTent(g.screens.ScreenEnterCode._tentTop,0))):this._lockState==this._LOCK_STATE_OPENING&&(g.screens.ScreenEnterCode._gearL.get_renderable().rotation+=this._OPEN_GEAR_RATE*a,g.screens.ScreenEnterCode._gearR.get_renderable().rotation-=this._OPEN_GEAR_RATE*a))},_setCloseState:function(){var a=this;this._closing||(this._closing=!0,this._tween.tween(g.screens.ScreenEnterCode._tray.get_pos(),0.8,{x:-c.ConstantsApp.STAGE_CENTER_X},!0,h.tween.Ease.EASE_IN).onComplete(function(){a.setFlagDispose();e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_CODE_SCREEN_OPEN,!1)}))},_squeezeTent:function(a,b){var f=this;if(!(null==g.screens.ScreenEnterCode._tentBot||null==g.screens.ScreenEnterCode._tentTop))this._tween.tween(a.get_renderable(),0.15,{scaleX:0.95,scaleY:1.05},!0,h.tween.Ease.EASE_OUT).delay(b).onComplete(function(){f._tween.tween(a.get_renderable(),0.1,{scaleX:1,scaleY:1},!0,h.tween.Ease.EASE_IN)})},_setOpenedState:function(){var a=this;g.screens.ScreenBase.prototype._setOpenedState.call(this);this._closing=!1;g.screens.ScreenEnterCode._tray.get_renderable().alpha=1;g.screens.ScreenEnterCode._tray.get_pos().x=-c.ConstantsApp.STAGE_CENTER_X;this._tween.tween(g.screens.ScreenEnterCode._tray.get_pos(),0.3,{x:c.ConstantsApp.STAGE_CENTER_X},!0,h.tween.Ease.EASE_IN).delay(this._initPause).onComplete(function(){a._squeezeTent(g.screens.ScreenEnterCode._tentTop,0);a._squeezeTent(g.screens.ScreenEnterCode._tentBot,0.15);a._tween.tween(g.screens.ScreenEnterCode._tray.get_pos(),0.2,{x:c.ConstantsApp.STAGE_CENTER_X-100},!0,h.tween.Ease.EASE_OUT).onComplete(function(){a._tween.tween(g.screens.ScreenEnterCode._tray.get_pos(),0.2,{x:c.ConstantsApp.STAGE_CENTER_X},!0,h.tween.Ease.EASE_IN);a._squeezeBottom=a._BOTTOM_RESET;a._squeezeTop=a._TOP_RESET})})},_keyLockedMovement:function(){this._tween.tween(g.screens.ScreenEnterCode._gearL.get_renderable(),0.5,{rotation:g.screens.ScreenEnterCode._gearL.get_renderable().rotation+
30},!0,h.tween.Ease.EASE_BOUNCE_OUT);this._tween.tween(g.screens.ScreenEnterCode._gearR.get_renderable(),0.5,{rotation:g.screens.ScreenEnterCode._gearR.get_renderable().rotation-30},!0,h.tween.Ease.EASE_BOUNCE_OUT)},_keyGearMovement:function(){this._tween.tween(g.screens.ScreenEnterCode._gearL.get_renderable(),0.15,{rotation:g.screens.ScreenEnterCode._gearL.get_renderable().rotation+10},!0,h.tween.Ease.EASE);this._tween.tween(g.screens.ScreenEnterCode._gearR.get_renderable(),0.15,{rotation:g.screens.ScreenEnterCode._gearR.get_renderable().rotation-
10},!0,h.tween.Ease.EASE)},_setLockState:function(a){var b=this;a!=this._lockState&&(this._lockState=a,this._lockState==this._LOCK_STATE_OPENING&&(this._squeezeTent(g.screens.ScreenEnterCode._tentBot,0.2),this._squeezeTent(g.screens.ScreenEnterCode._tentTop,0.5),this._tween.tween(g.screens.ScreenEnterCode._tentBot.get_pos(),0.6,{x:2*c.ConstantsApp.STAGE_WIDTH,y:c.ConstantsApp.STAGE_HEIGHT+c.ConstantsApp.STAGE_CENTER_Y}).ease(h.tween.Ease.EASE_IN).delay(0.6),this._tween.tween(g.screens.ScreenEnterCode._tentTop.get_pos(),1,{x:2*-c.ConstantsApp.STAGE_WIDTH,y:-c.ConstantsApp.STAGE_HEIGHT}).ease(h.tween.Ease.EASE_OUT).delay(0.75),this._tween.tween(g.screens.ScreenEnterCode._keyPlate.get_renderable(),0.6,{rotation:45},!0,h.tween.Ease.EASE_BOUNCE_OUT,0.9),this._tween.tween(g.screens.ScreenEnterCode._keyPlate.get_renderable(),0.5,{rotation:90},!1,h.tween.Ease.EASE_BOUNCE_OUT,0.7).onComplete(function(){b._tween.tween(g.screens.ScreenEnterCode._keyPlate.get_pos(),1,{x:100,y:c.ConstantsApp.STAGE_HEIGHT+c.ConstantsApp.STAGE_CENTER_Y},!0,h.tween.Ease.EASE_IN,0.3)}),this._tween.tween(g.screens.ScreenEnterCode._keyPlate.get_renderable(),2,{rotation:180},!1,h.tween.Ease.EASE_IN,0.3)))},_addInputBuffer:function(a){for(this._inputBuffer+=a;this._inputBuffer.length>this._KEY_LENGTH;)this._inputBuffer=y.substr(this._inputBuffer,1,this._inputBuffer.length);g.screens.ScreenEnterCode._keypadLoc.get_renderable().visible=!1;g.screens.ScreenEnterCode._keypadNum.get_renderable().visible=!0;g.screens.ScreenEnterCode._keypadNum.set_text(this._inputBuffer)},_resetInputBuffer:function(){this._inputBuffer=""},_eventClickEnter:function(){this._lockState==this._LOCK_STATE_LOCKED&&(this._inputBuffer!=e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_UNLOCK_CODE)?(this._resetInputBuffer(),g.screens.ScreenEnterCode._keypadNum.get_renderable().visible=!1,g.screens.ScreenEnterCode._keypadLoc.set_text("invalid_code"),g.screens.ScreenEnterCode._keypadLoc.get_renderable().visible=!0,this._keyLockedMovement()):(e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_CODE_UNLOCK,!0),this._setLockState(this._LOCK_STATE_OPENING)))},_eventClick9:function(){this.doKey(9)},_eventClick8:function(){this.doKey(8)},_eventClick7:function(){this.doKey(7)},_eventClick6:function(){this.doKey(6)},_eventClick5:function(){this.doKey(5)},_eventClick4:function(){this.doKey(4)},_eventClick3:function(){this.doKey(3)},_eventClick2:function(){this.doKey(2)},_eventClick1:function(){this.doKey(1)},_eventClick0:function(){this.doKey(0)},doKey:function(a){this._lockState==this._LOCK_STATE_LOCKED&&(this._addInputBuffer(t.string(a)),this._keyGearMovement())},dispose:function(){g.screens.ScreenEnterCode._tray.removeElement(this._button,!0);for(this._button=null;0<this._keypadListeners.length;)g.screens.ScreenEnterCode._keypadButtons[this._keypadListeners.length-1].get_dispatcher().removeEventListener(g.buttons.ButtonBase.CLICK,this._keypadListeners.pop());this._keypadListeners=null;this.removeElement(g.screens.ScreenEnterCode._tray,!1);g.screens.ScreenBase.prototype.dispose.call(this)},_buildScreen:function(){if(null==g.screens.ScreenEnterCode._tray){g.screens.ScreenEnterCode._tray=this.addElement(new j.Element({asset:"ui/code/code_back",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2,originX:0.5,originY:0.5}));g.screens.ScreenEnterCode._tray.addElement(new j.TextLocalized(0,-15,"code_copy","",{just:j.TEXT_JUSTIFICATION.JUST_CENTER,originX:0.5,originY:0.5,spacing:55}));g.screens.ScreenEnterCode._tentBot=g.screens.ScreenEnterCode._tray.addElement(new j.Element({asset:"ui/code/code_tent_bottom",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:1,originY:1}));g.screens.ScreenEnterCode._tentTop=g.screens.ScreenEnterCode._tray.addElement(new j.Element({asset:"ui/code/code_tent_top",x:-c.ConstantsApp.STAGE_CENTER_X,y:-c.ConstantsApp.STAGE_CENTER_Y}));g.screens.ScreenEnterCode._tray.addElement(new j.Element({asset:"ui/code/code_frame",originX:0.5,originY:0.5}));g.screens.ScreenEnterCode._keyPlate=g.screens.ScreenEnterCode._tray.addElement(new j.Element({asset:"ui/code/code_gradient",originX:0.5,originY:0.5}));g.screens.ScreenEnterCode._gearL=g.screens.ScreenEnterCode._keyPlate.addElement(new j.Element({asset:"ui/code/code_gear",originX:0.5,originY:0.5,x:-105}));g.screens.ScreenEnterCode._gearR=g.screens.ScreenEnterCode._keyPlate.addElement(new j.Element({asset:"ui/code/code_gear",originX:0.5,originY:0.5,x:100}));g.screens.ScreenEnterCode._keyPlate.addElement(new j.Element({asset:"ui/code/code_plate",originX:0.5,originY:0.5}));g.screens.ScreenEnterCode._keyTray=g.screens.ScreenEnterCode._keyPlate.addElement(new j.Element({asset:"ui/code/code_pad",originX:0.5,originY:0.5,x:-3}));g.screens.ScreenEnterCode._keypadLoc=g.screens.ScreenEnterCode._keyTray.addElement(new j.TextLocalized(0,-120,"enter_code_header","",{center:!0,originX:0.5,originY:0.5}));g.screens.ScreenEnterCode._keypadNum=g.screens.ScreenEnterCode._keyTray.addElement(new j.TextBase(0,-120,"","Basic",{center:!0,originX:0.5,originY:0.5,scale:0.5}));null==g.screens.ScreenEnterCode._keypadButtons&&(g.screens.ScreenEnterCode._keypadButtons=[]);for(var a=0,b=0,f=0,m="",d="",e=null;10>=f;){d="ui/code/code_numkey";m="code_key_"+t.string(f+1);switch(f){case 0:a=-55;b=-60;e=q(this,this._eventClick1);break;case 1:a=0;e=q(this,this._eventClick2);break;case 2:a=55;e=q(this,this._eventClick3);break;case 3:a=-55;b=-5;e=q(this,this._eventClick4);break;case 4:a=0;e=q(this,this._eventClick5);break;case 5:a=55;e=q(this,this._eventClick6);break;case 6:a=-55;b=50;e=q(this,this._eventClick7);break;case 7:a=0;e=q(this,this._eventClick8);break;case 8:a=55;e=q(this,this._eventClick9);break;case 9:b=105;e=q(this,this._eventClick0);m="code_key_0";break;case 10:a=-27.5,d="ui/code/code_enter",m="code_key_enter",e=q(this,this._eventClickEnter)}d=g.screens.ScreenEnterCode._keyTray.addElement((new g.buttons.ButtonBase(a,b,this._tween,0.5,0.5,d)).setParentOffset(g.screens.ScreenEnterCode._tray));d.addElement(new j.TextLocalized(-2,-3,m,"",{center:!0,originX:0.5,originY:0.5}));d.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,e);g.screens.ScreenEnterCode._keypadButtons.push(d);this._keypadListeners.push(e);e=null;f++}this._initPause=0.5}else{this.addElement(g.screens.ScreenEnterCode._tray);g.screens.ScreenEnterCode._keypadLoc.set_text("enter_code_header");g.screens.ScreenEnterCode._keypadLoc.get_renderable().visible=!0;g.screens.ScreenEnterCode._keypadNum.get_renderable().visible=!1;e=null;for(f=0;10>=f;){switch(f){case 0:e=q(this,this._eventClick1);break;case 1:e=q(this,this._eventClick2);break;case 2:e=q(this,this._eventClick3);break;case 3:e=q(this,this._eventClick4);break;case 4:e=q(this,this._eventClick5);break;case 5:e=q(this,this._eventClick6);break;case 6:e=q(this,this._eventClick7);break;case 7:e=q(this,this._eventClick8);break;case 8:e=q(this,this._eventClick9);break;case 9:e=q(this,this._eventClick0);break;case 10:e=q(this,this._eventClickEnter)}g.screens.ScreenEnterCode._keypadButtons[f].get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,e);this._keypadListeners.push(e);f++}this._initPause=0.2}g.screens.ScreenEnterCode._tray.get_pos().to(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y);this._button=g.screens.ScreenEnterCode._tray.addElement((new g.buttons.ButtonBase(0,250,this._tween,0.5,0.5,"ui/general/back_button")).setParentOffset(g.screens.ScreenEnterCode._tray));this._button.addElement(new j.TextLocalized(0,-3,"back","",{center:!0,originX:0.5,originY:0.5}));this._button.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventBackClick));g.screens.ScreenEnterCode._keyPlate.get_root().parent.addChild(g.screens.ScreenEnterCode._keyPlate.get_root());g.screens.ScreenEnterCode._tray.get_renderable().alpha=0;this._inputBuffer=""},__class__:g.screens.ScreenEnterCode});g.screens.ScreenEpisodeSelect=function(a,b,f){null==b&&(b="");g.screens.ScreenBase.call(this,a,b,f)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenEpisodeSelect"]=g.screens.ScreenEpisodeSelect;g.screens.ScreenEpisodeSelect.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenEpisodeSelect".split(",");g.screens.ScreenEpisodeSelect.__super__=g.screens.ScreenBase;g.screens.ScreenEpisodeSelect.prototype=v(g.screens.ScreenBase.prototype,{_onEventStoreClick:function(){e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2);e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_SHOP_OPEN,!0);this._doFlowEvent(c.ConstantsScreen.FLOW_SHOP)},_onDownArrow:function(){var a=this;if(!(this._startIndex>=this._maxScrollIndex||this._isScrolling)){e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_back",0.2);this._startIndex+=1;this._startIndex>=this._maxScrollIndex&&(this._downArrow.get_renderable().visible=!1);this._isScrolling=this._upArrow.get_renderable().visible=!0;for(var b=0,f=this._missionChoices.length;b<f;){var m=[b++];m[0]==this._startIndex-1?this._tray.removeElement(this._missionChoices[m[0]],!1):m[0]>=this._startIndex&&m[0]<this._startIndex+3&&!this._tray.hasElement(this._missionChoices[m[0]])&&(this._missionChoices[m[0]].get_renderable().alpha=0,this._tray.addElement(this._missionChoices[m[0]]));this._tween.tween(this._missionChoices[m[0]].get_pos(),0.1,{y:this._missionChoices[m[0]].get_pos().y-
75},null,h.tween.Ease.EASE_OUT).onComplete(function(b){return function(){a._isScrolling=!1;var f=a._takeFrom[b[0]].get_id();a._missionChoices[b[0]].get_renderable().alpha=a._shared.unlocked[f]?1:0.5;a._shared.unlocked[b[0]]?a._missionChoices[b[0]].enable():a._missionChoices[b[0]].disable();c.ConstantsApp.OPTION_ALL_MISSIONS&&(a._missionChoices[b[0]].enable(),a._missionChoices[b[0]].get_renderable().alpha=1)}}(m))}}},_onUpArrow:function(){var a=this;if(!(0>=this._startIndex||this._isScrolling)){e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_back",0.2);this._startIndex-=1;0>=this._startIndex&&(this._upArrow.get_renderable().visible=!1);this._isScrolling=this._downArrow.get_renderable().visible=!0;for(var b=0,f=this._missionChoices.length;b<f;){var m=[b++];m[0]==this._startIndex+3?this._tray.removeElement(this._missionChoices[m[0]],!1):m[0]>=this._startIndex&&m[0]<this._startIndex+3&&!this._tray.hasElement(this._missionChoices[m[0]])&&(this._missionChoices[m[0]].get_renderable().alpha=0,this._tray.addElement(this._missionChoices[m[0]]));this._tween.tween(this._missionChoices[m[0]].get_pos(),0.1,{y:this._missionChoices[m[0]].get_pos().y+75},null,h.tween.Ease.EASE_OUT).onComplete(function(b){return function(){a._isScrolling=!1;var f=a._takeFrom[b[0]].get_id();a._missionChoices[b[0]].get_renderable().alpha=a._shared.unlocked[f]?1:0.5;a._shared.unlocked[b[0]]?a._missionChoices[b[0]].enable():a._missionChoices[b[0]].disable();c.ConstantsApp.OPTION_ALL_MISSIONS&&(a._missionChoices[b[0]].enable(),a._missionChoices[b[0]].get_renderable().alpha=1)}}(m))}}},_onPlayClick:function(){e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2);var a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION);switch(a["char"]){case "Ezra":"GHOST"==a.loc?0.5<Math.random()?e.WorkinCloud.get_instance().get_sound().playSound("Ezra_GHOST_1"):e.WorkinCloud.get_instance().get_sound().playSound("Ezra_GHOST_2"):"IMPERIAL"==a.loc&&(0.5<Math.random()?e.WorkinCloud.get_instance().get_sound().playSound("Ezra_IMPERIAL_1"):e.WorkinCloud.get_instance().get_sound().playSound("Ezra_IMPERIAL_2"));break;case "Hera":"GHOST"==a.loc?e.WorkinCloud.get_instance().get_sound().playSound("Hera_GHOST"):"IMPERIAL"==a.loc&&e.WorkinCloud.get_instance().get_sound().playSound("Hera_IMPERIAL");break;case "Kanan":"GHOST"==a.loc?e.WorkinCloud.get_instance().get_sound().playSound("Kanan_GHOST"):"IMPERIAL"==a.loc&&e.WorkinCloud.get_instance().get_sound().playSound("Kanan_IMPERIAL");break;case "Sabine":"GHOST"==a.loc?e.WorkinCloud.get_instance().get_sound().playSound("Sabine_GHOST"):"IMPERIAL"==a.loc&&e.WorkinCloud.get_instance().get_sound().playSound("Sabine_IMPERIAL");break;case "Zeb":"GHOST"==a.loc?e.WorkinCloud.get_instance().get_sound().playSound("Zeb_GHOST"):"IMPERIAL"==a.loc&&e.WorkinCloud.get_instance().get_sound().playSound("Zeb_IMPERIAL")}this._doFlowEvent(c.ConstantsScreen.FLOW_SELECTED_LEVEL)},_onLeaveClick:function(){e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_back",0.2);this._doFlowEvent(c.ConstantsScreen.FLOW_BACK_TO_MAIN_MENU)},_onBackClick:function(){var a=this;this._playButton.disable();e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_back",0.2);h.tween.WorkinTweenUtils.easeSlideOutToDir(this._missionBriefTray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(function(){a._missionBriefTray.get_renderable().scaleX=a._missionBriefTray.get_renderable().scaleY=1;a._missionBriefTray.get_renderable().visible=!1;a._missionBriefTray.get_pos().y=c.ConstantsApp.STAGE_CENTER_Y;a._missionDescription.effectTypeIn(" ");a._missionGoals.effectTypeIn(" ");a._briefIn=!1;e.WorkinCloud.get_instance().sharedObjectDelete(c.ConstantsApp.OBJECT_MISSION);for(var b=0,f=a._missionChoices;b<f.length;)++b})},_onEpisodeSelected:function(a){var b=this;if(!this._briefIn){this._briefIn=!0;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);for(var f=0,m=this._missionChoices;f<m.length;)++f;e.WorkinCloud.get_instance().sharedObjectSetData(c.ConstantsApp.OBJECT_MISSION,a.get_data().mission);f=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MISSION,f.id);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_DIFFICULTY,f.difficulty);switch(f.difficulty){case 0:case 1:0.5<Math.random()?e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Difficulty_1"):e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Difficulty_2");break;case 2:e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Difficulty_3");break;default:0.5<Math.random()?e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Difficulty_4"):e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Difficulty_5")}for(var d=f.brief,a=f.steps,g="",f=0;f<a.length;)m=a[f],++f,g+="- ",g+=t.string(m.desc),g+="<br>";this._missionDescription.get_renderable().visible=!1;this._missionGoals.get_renderable().visible=!1;h.tween.WorkinTweenUtils.easeSlideInFromDir(this._missionBriefTray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(function(){b._playButton.enable();b._missionDescription.effectTypeIn(d);b._missionGoals.effectTypeIn(g);b._missionDescription.get_renderable().visible=!0;b._missionGoals.get_renderable().visible=!0})}},_removeEventListeners:function(){e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_MISSION_SELECTED,q(this,this._onEpisodeSelected))},_addEventListeners:function(){e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_MISSION_SELECTED,q(this,this._onEpisodeSelected))},_setCloseState:function(){this._missionBriefTray.get_renderable().visible&&h.tween.WorkinTweenUtils.easeSlideOutToDir(this._missionBriefTray,this._tween,h.tween.TWEEN_DIR.BOTTOM);h.tween.WorkinTweenUtils.easeSlideOutToDir(this._aResoundingButtPanel,this._tween,h.tween.TWEEN_DIR.BOTTOM);h.tween.WorkinTweenUtils.easeSlideOutToDir(this._tray,this._tween,h.tween.TWEEN_DIR.BOTTOM).onComplete(q(this,this.setFlagDispose))},_setInState:function(){var a=this;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.BOTTOM).onComplete(function(){h.tween.WorkinTweenUtils.easeSlideInFromDir(a._aResoundingButtPanel,a._tween,h.tween.TWEEN_DIR.BOTTOM);a._finishOpenState()})},dispose:function(){this._backButton=this._playButton=this._missionDescription=this._missionBriefTray=this._missionChoices=this._tray=null;g.screens.ScreenBase.prototype.dispose.call(this)},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a);this._pulsatingTimer+=2*a;for(var a=0,b=this._pulsatingNEWS;a<b.length;){var f=b[a];++a;f.get_renderable().alpha=Math.sin(this._pulsatingTimer)*(1/3)+2/3}},_buildScreen:function(){this._isScrolling=this._briefIn=!1;this._tray=this.addElement(new j.Element({asset:"panel_mission_select",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._tray.get_renderable().visible=!1;this._pulsatingNEWS=[];this._pulsatingTimer=0;this._tray.addElement(new j.TextLocalized(20,-140,"missionselect","",{originX:0.5,originY:0.5}));var a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.PROGRESS_ID);this._takeFrom=[];for(var b=0,f=c.Episodes.get_instance().get_episodes();b<f.length;){var m=f[b];++b;this._takeFrom.push(null)}b=0;for(f=c.Episodes.get_instance().get_episodes();b<f.length;)m=f[b],++b,this._takeFrom[m.get_id()]=new c.Episode(m.get_name(),m.get_brief(),m.get_difficulty(),m.get_id(),m.get_steps(),m.get_introChar(),m.get_introLoc(),m.get_newMission(),m.get_video());for(b=this._takeFrom.length;0<b;)b--,null==this._takeFrom[b]&&this._takeFrom.splice(b,1);m=[];c.Episodes.get_instance().get_episodes();f=0;for(b=this._takeFrom.length;f<b;){var d=f++,h=this._takeFrom[d];if(0<h.get_difficulty()){if(0<a.played[this._takeFrom[d].get_id()]){h.set_newMission(!1);var i=h,k=i.get_difficulty();i.set_difficulty(k+1);k}4>d&&1<a.played[this._takeFrom[d].get_id()]&&(i=h,k=i.get_difficulty(),i.set_difficulty(k+1),k)}m.push(h.get_data())}d=-58;this._maxScrollIndex=this._startIndex=0;this._missionChoices=[];f=0;for(b=m.length;f<b;){var h=f++,l,k=m[h];this._missionChoices.push(i=new g.buttons.ButtonDynamic(10,d,this._tween,null,null,"btn_mission"));i.addElement(l=new j.TextLocalized(-60,0,k.name,"",{origin:0.5,doLocalize:!1,scale:0.66,center:!0}));l.get_renderable().scaleX=l.get_renderable().scaleY=0.33;i.addElement(l=new j.TextLocalized(125,-13,"Difficulty","",{origin:0.5,doLocalize:!1,scale:0.66,center:!0}));l.get_renderable().scaleX=l.get_renderable().scaleY=0.33;l=i.addElement(new j.Element({asset:"star_on",x:95,y:13,origin:0.5}));l.set_pointerEnabled(!1);1>k.difficulty&&l.setTextureAsset("star_off");l=i.addElement(new j.Element({asset:"star_on",x:125,y:13,origin:0.5}));l.set_pointerEnabled(!1);2>k.difficulty&&l.setTextureAsset("star_off");l=i.addElement(new j.Element({asset:"star_on",x:155,y:13,origin:0.5}));l.set_pointerEnabled(!1);3>k.difficulty&&l.setTextureAsset("star_off");k.isnew&&this._pulsatingNEWS.push(i.addElement(new j.TextLocalized(-178,-34,"new",null,{center:!0})));(0<a.played[k.id]?i.addElement(new j.Element({asset:"check_on",x:-180,y:0,origin:0.5})):i.addElement(new j.Element({asset:"check_off",x:-180,y:0,origin:0.5}))).set_pointerEnabled(!1);i.setParentOffset(this._tray);i.setEventWithData(c.ConstantsApp.EVENT_MISSION_SELECTED,{mission:k});3>h?this._tray.addElement(i):this._maxScrollIndex++;!a.unlocked[k.id]&&!c.ConstantsApp.OPTION_ALL_MISSIONS&&(i.get_renderable().alpha=0.5,i.disable());d+=75}this._shared=a;3<m.length&&(this._tray.addElement(this._upArrow=new g.buttons.ButtonBase(235,-121,this._tween,null,null,"btn_back")),this._upArrow.get_renderable().rotation=90,this._upArrow.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onUpArrow)),this._upArrow.setParentOffset(this._tray),this._upArrow.get_renderable().visible=!1,this._tray.addElement(this._downArrow=new g.buttons.ButtonBase(235,164,this._tween,null,null,"btn_back")),this._downArrow.get_renderable().rotation=-90,this._downArrow.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onDownArrow)),this._downArrow.setParentOffset(this._tray));this._leaveButton=this._tray.addElement(new g.buttons.ButtonBase(-203,-140,this._tween,null,null,"btn_back"));this._leaveButton.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onLeaveClick));this._leaveButton.setParentOffset(this._tray);this._missionBriefTray=this.addElement(new j.Element({x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._missionBriefTray.get_renderable().visible=!1;a=this._missionBriefTray.addElement(new j.Element({x:0,y:0,asset:"panel_mission_brief",origin:0.5}));a.addElement(new j.TextLocalized(-89,-140,"briefs1","",{originX:0.5,originY:0.5}));a.addElement(this._missionDescription=new j.TextLocalized(-300,-87,"","",{doLocalize:!1,width:608}));this._missionDescription.get_renderable().scaleX=this._missionDescription.get_renderable().scaleY=0.35;this._missionBriefTray.addElement(this._backButton=new g.buttons.ButtonBase(-316,-151,this._tween,null,null,"btn_back"));this._backButton.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onBackClick));this._backButton.setParentOffset(this._missionBriefTray);this._missionBriefTray.addElement(this._playButton=new g.buttons.ButtonBase(0,200,this._tween,null,null,"btn_choose"));this._playButton.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onPlayClick));this._playButton.setParentOffset(this._missionBriefTray);this._playButton.addElement(l=new j.TextLocalized(5,10,"choose",null,{origin:0.5,scale:0.66}));l.get_renderable().scaleX=l.get_renderable().scaleY=0.66;this._missionBriefTray.addElement(this._missionGoals=new j.TextLocalized(-300,45,"","",{doLocalize:!1,spacing:70,width:620}));this._missionGoals.get_renderable().scaleX=this._missionGoals.get_renderable().scaleY=0.4;this._aResoundingButtPanel=this.addElement(new j.Element({x:830,y:450,asset:"panels_pause_quit_and_complete"}));this._aResoundingButtPanel.get_renderable().alpha=0;this._aResoundingButtPanel.addElement(i=new g.buttons.ButtonSoundToggle(68,69,this._tween,0.5,0.5,["btn_sound"],["btn_sound_off"]));i.setParentOffset(this._aResoundingButtPanel)},__class__:g.screens.ScreenEpisodeSelect});g.screens.ScreenGameplayHUD=function(a,b,f){null==b&&(b="");g.screens.ScreenBase.call(this,a,b,f)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenGameplayHUD"]=g.screens.ScreenGameplayHUD;g.screens.ScreenGameplayHUD.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenGameplayHUD".split(",");g.screens.ScreenGameplayHUD.__super__=g.screens.ScreenBase;g.screens.ScreenGameplayHUD.prototype=v(g.screens.ScreenBase.prototype,{_onBoxHide:function(){var a=this;e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_SHOWING_MESSAGE)&&(e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_SHOWING_MESSAGE,!1),this._textTiming=0,e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2),h.tween.WorkinTweenUtils.easeSlideOutToDir(this._textBox,this._tween,h.tween.TWEEN_DIR.BOTTOM).onComplete(function(){a._textBoxText.effectTypeIn(" ");a._textHidden=!0;"LOSE"==a._doOnEnd&&e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_GAME_LOSE,!0);"WIN"==a._doOnEnd&&e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_GAME_WIN,!0)}))},_onBoxShow:function(a){this._queuedMessages.push(a.get_data())},_removeEventListeners:function(){g.screens.ScreenBase.prototype._removeEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,q(this,this._onBoxShow));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_HIDE_DIALOGUE_BOX,q(this,this._onBoxHide))},handleInput:function(a){switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_SHOWING_MESSAGE)&&this._textBox.contains(a.x,a.y)&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsApp.EVENT_HIDE_DIALOGUE_BOX))}}},_addEventListeners:function(){g.screens.ScreenBase.prototype._addEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,q(this,this._onBoxShow));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_HIDE_DIALOGUE_BOX,q(this,this._onBoxHide))},update:function(a){var b=this;if(!0!=e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_PAUSED)){g.screens.ScreenBase.prototype.update.call(this,a);for(var f=this._queuedMessages.length;1<f;)f--,this._queuedMessages[f].message==this._queuedMessages[f-1].message&&(this._queuedMessages.splice(f,1),f--);e.WorkinCloud.get_instance().setFloat(c.ConstantsApp.FLOAT_MAX_Y_INPUT_RANGE,Math.min(c.ConstantsApp.STAGE_HEIGHT,this._textBox.get_pos().y-75));if(e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_SHOWING_MESSAGE)&&!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_PAUSED))this._textTiming-=a,0>=this._textTiming&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsApp.EVENT_HIDE_DIALOGUE_BOX));else if(0<this._queuedMessages.length&&!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_PAUSED)&&this._textHidden){this._textBox.get_pos().y=c.ConstantsApp.get_CANVAS_BOTTOM()-90;this._textBox.get_pos().x=c.ConstantsApp.STAGE_CENTER_X+30;this._textBox.get_renderable().alpha=0;this._textTiming=this._queuedMessages[0].time;this._textTiming+=0.5;e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_SHOWING_MESSAGE,!0);var m="";null!=this._queuedMessages[0].end&&(this._doOnEnd=this._queuedMessages[0].end);switch(this._queuedMessages[0].character){case "EZRA":this._textBoxPort.setTextureAsset("SWRCC_Ezra");a=this._queuedMessages[0];switch(a.mood){case "casual":m=0.5<Math.random()?"Ezra_NPC_3":"Ezra_NPC_1";break;case "help":a=Math.random();m=a>2/3?"Ezra_NPC_1":a>1/3?"Ezra_NPC_2":"Ezra_NPC_3";break;case "positive":a=Math.random();m=a>2/3?"Ezra_Win_2":a>1/3?"Ezra_Win_1":"Ezra_Minigame_Complete1";break;case "negative":a=Math.random();m=a>2/3?"Ezra_Bad1":a>1/3?"Ezra_Bad2":"Ezra_Fail_Stealth2";break;case "lose_GHOST":m="Ezra_Fail_Ghost";break;case "lose_IMPERIAL":m="Ezra_Fail_Imperial";break;case "positive_unique":m="Ezra_GHOST_1"}break;case "HERA":this._textBoxPort.setTextureAsset("SWRCC_Hera");a=this._queuedMessages[0];switch(a.mood){case "casual":case "help":m=0.5<Math.random()?"Hera_NPC_1":"Hera_NPC_2";break;case "positive":m="Hera_Minigame_Complete";break;case "positive_unique":m="Hera_Minigame_PILOT_Complete";break;case "negative":m="Hera_Alert_GHOST"}break;case "KANN":this._textBoxPort.setTextureAsset("SWRCC_Kanan");a=this._queuedMessages[0];switch(a.mood){case "casual":m=0.5<Math.random()?"Kanan_NPC_1":"Kanan_NPC_2";break;case "positive":m="Kanan_Minigame_Complete";break;case "negative":m=0.5<Math.random()?"Kanan_Negative_1":"Kanan_Negative_2";break;case "help":m=0.5<Math.random()?"Kanan_Alert1":"Kanan_Alert2"}break;case "SABN":this._textBoxPort.setTextureAsset("SWRCC_Sabine");a=this._queuedMessages[0];switch(a.mood){case "casual":m="Sabine_NPC_1";break;case "help":m=0.5<Math.random()?"Sabine_NPC_1":"Sabine_NPC_2";break;case "positive":m="Sabine_Minigame_IMPERIAL_Complete";break;case "negative":m=0.5<Math.random()?"Sabine_Alert_IMPERIAL":"Sabine_Negative"}break;case "ZEBB":this._textBoxPort.setTextureAsset("SWRCC_Zeb");a=this._queuedMessages[0];switch(a.mood){case "casual":m=0.5<Math.random()?"Zeb_NPC_1":"Zeb_NPC_2";break;case "help":m=0.5<Math.random()?"Zeb_IMPERIAL_Danger":"Zeb_NPC_2";break;case "positive":m="Zeb_Minigame_Complete";break;case "positive_unique":m="Zeb_Minigame_TURRET_Complete";break;case "negative":m="Zeb_NPC_2"}break;default:null}e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._textBox,this._tween,h.tween.TWEEN_DIR.BOTTOM).onComplete(function(){0<m.length&&e.WorkinCloud.get_instance().get_sound().playSound(m,1.3);b._textBoxText.effectTypeIn(b._queuedMessages[0].message);b._queuedMessages.splice(0,1)});this._textHidden=!1}}},_onEventPauseClick:function(){this.get_state()==this._STATE_OPENED&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU))},_doResize:function(){this._pauseButton.get_pos().x=c.ConstantsApp.get_CANVAS_LEFT()+50;this._pauseButton.get_pos().y=c.ConstantsApp.get_CANVAS_BOTTOM()-51;this._stressBar.get_pos().x=c.ConstantsApp.get_CANVAS_LEFT()+123;this._stressBar.get_pos().y=c.ConstantsApp.get_CANVAS_TOP()+59;e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_SHOWING_MESSAGE)&&(this._textBox.get_pos().y=c.ConstantsApp.get_CANVAS_BOTTOM()-90,this._textBox.get_pos().x=c.ConstantsApp.STAGE_CENTER_X+30)},_onEventResizeCanvas:function(){this._doResize()},_setInState:function(){h.tween.WorkinTweenUtils.easeSlideInFromDir(this._stressBar,this._tween,h.tween.TWEEN_DIR.LEFT);h.tween.WorkinTweenUtils.easeBounceIn(this._pauseButton,this._tween,!0,0.4);this._finishOpenState()},dispose:function(){this._textBoxText=this._textBox=this._stressBar=this._tray=this._pauseButton=null;g.screens.ScreenBase.prototype.dispose.call(this)},_buildScreen:function(){this._textHidden=!0;this._pauseButton=this.addElement(new g.buttons.ButtonBase(c.ConstantsApp.get_CANVAS_LEFT()+50,c.ConstantsApp.get_CANVAS_BOTTOM()-51,this._tween,0.5,0.5,"btn_pause"));this._pauseButton.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventPauseClick));this._pauseButton.get_renderable().alpha=0;this._stressBar=this.addElement(new g.display.DisplayStress(c.ConstantsApp.get_CANVAS_LEFT()+123,c.ConstantsApp.get_CANVAS_TOP()+59,this._tween));this._stressBar.get_renderable().alpha=0;e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_SHOWING_MESSAGE,!1);this._textTiming=0;this._queuedMessages=[];this._textBox=this.addElement(new j.Element({x:c.ConstantsApp.STAGE_CENTER_X+30,y:c.ConstantsApp.get_CANVAS_BOTTOM()-90,origin:0.5,asset:"dialogue_box"}));this._textBoxText=this._textBox.addElement(new j.TextLocalized(-200,-45,"","",{doLocalize:!1,width:565}));this._textBoxText.get_renderable().scaleX=this._textBoxText.get_renderable().scaleY=0.45;this._textBox.addElement(this._textBoxPort=new j.Element({x:-335,y:0,origin:0.5,scale:0.6}));this._textBox.get_renderable().alpha=0;this._doResize()},__class__:g.screens.ScreenGameplayHUD});g.screens.ScreenGameplayMenu=function(a,b,f){null==b&&(b="");g.screens.ScreenBase.call(this,a,b,f);this._closing=!1};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenGameplayMenu"]=g.screens.ScreenGameplayMenu;g.screens.ScreenGameplayMenu.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenGameplayMenu".split(",");g.screens.ScreenGameplayMenu.__super__=g.screens.ScreenBase;g.screens.ScreenGameplayMenu.prototype=v(g.screens.ScreenBase.prototype,{_onEventQuitClick:function(){this.get_state()==this._STATE_OPENED&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT))},_onEventResumeClick:function(){this.get_state()==this._STATE_OPENED&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE))},_onEventHelpClick:function(){this.get_state()==this._STATE_OPENED&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP))},_setCloseState:function(){this._closing||(this._closing=!0,h.tween.WorkinTweenUtils.easeSlideOutToDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(q(this,this.setFlagDispose)))},_setInState:function(){this._closing=!1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(q(this,this._finishOpenState))},dispose:function(){this._tray=null;g.screens.ScreenBase.prototype.dispose.call(this)},_buildScreen:function(){this._tray=this.addElement(new j.Element({asset:"panels_pause_quit_and_complete",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2,originX:0.5,originY:0.5}));this._tray.get_renderable().alpha=0;var a=I.__cast(this._tray.addElement((new g.buttons.ButtonBase(0,-34,this._tween,0.5,0.5,"btn_longer")).setParentOffset(this._tray)),g.buttons.ButtonBase);a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventResumeClick));a.addElement(new j.TextLocalized(0,-3,"menu_continue","",{origin:0.5}));a=I.__cast(this._tray.addElement((new g.buttons.ButtonBase(0,52,this._tween,0.5,0.5,"btn_longer")).setParentOffset(this._tray)),g.buttons.ButtonBase);a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventQuitClick));a.addElement(new j.TextLocalized(0,-3,"close","",{origin:0.5}));I.__cast(this._tray.addElement((new g.buttons.ButtonBase(225,-24,this._tween,0.5,0.5,"btn_settings")).setParentOffset(this._tray)),g.buttons.ButtonBase).get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventHelpClick));this._tray.addElement(I.__cast(new g.buttons.ButtonSoundToggle(225,58,this._tween,0.5,0.5,["btn_sound"],["btn_sound_off"]),g.buttons.ButtonBase).setParentOffset(this._tray))},__class__:g.screens.ScreenGameplayMenu});g.screens.ScreenGeneric=function(){};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenGeneric"]=g.screens.ScreenGeneric;g.screens.ScreenGeneric.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenGeneric".split(",");g.screens.ScreenGeneric.__super__=g.screens.ScreenBase;g.screens.ScreenGeneric.prototype=v(g.screens.ScreenBase.prototype,{__class__:g.screens.ScreenGeneric});g.screens.ScreenHelp=function(a,b,f){null==b&&(b="");g.screens.ScreenBase.call(this,a,b,f);this._closing=!1};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenHelp"]=g.screens.ScreenHelp;g.screens.ScreenHelp.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenHelp".split(",");g.screens.ScreenHelp.__super__=g.screens.ScreenBase;g.screens.ScreenHelp.prototype=v(g.screens.ScreenBase.prototype,{_onEventPlayClick:function(){this.get_state()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_HELP_CLOSE)},_finishOpenState:function(){g.screens.ScreenBase.prototype._finishOpenState.call(this);this._instructions.effectTypeIn("Find and solve alerts<br>by playing minigames!");this._instructions2.effectTypeIn("Complete missions to collect<br>credits and upgrade CHOPPER!")},_setCloseState:function(){this._closing||(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2),this._closing=!0,h.tween.WorkinTweenUtils.easeSlideOutToDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(q(this,this.setFlagDispose)))},_setInState:function(){this._closing=!1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(q(this,this._finishOpenState))},dispose:function(){this._button=this._tray=null;g.screens.ScreenBase.prototype.dispose.call(this)},_buildScreen:function(){this._tray=this.addElement(new j.Element({asset:"panel_mission_select",originX:0.5,originY:0.5,x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y}));B._platform.getTouch().get_supported();this._tray.addElement(new j.TextLocalized(20,-150,"help","",{originX:0.5,originY:0.5,center:!0}));this._tray.addElement(this._instructions=new j.TextLocalized(-165,-90,"","",{doLocalize:!1}));this._instructions.get_renderable().scaleX=this._instructions.get_renderable().scaleY=0.45;this._tray.addElement(this._instructions2=new j.TextLocalized(-165,60,"","",{doLocalize:!1}));this._instructions2.get_renderable().scaleX=this._instructions2.get_renderable().scaleY=0.4;this._tray.addElement(new j.Element({asset:"SWR_Alert_low",x:-100,y:13,origin:0.5}));this._tray.addElement(new j.Element({asset:"SWR_Alert_Med",x:0,y:13,origin:0.5}));this._tray.addElement(new j.Element({asset:"SWR_Alert_High",x:100,y:13,origin:0.5}));this._button=this._tray.addElement((new g.buttons.ButtonBase(-210,-150,this._tween,0.5,0.5,"btn_back")).setParentOffset(this._tray));this._button.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventPlayClick));this._tray.get_renderable().visible=!1},__class__:g.screens.ScreenHelp});g.screens.ScreenLoading=function(a,b,f){null==b&&(b="");this._INIT_WAIT=1.5;this._BLINK_TIME=1;g.screens.ScreenBase.call(this,a,b,f)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenLoading"]=g.screens.ScreenLoading;g.screens.ScreenLoading.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenLoading".split(",");g.screens.ScreenLoading.__super__=g.screens.ScreenBase;g.screens.ScreenLoading.prototype=v(g.screens.ScreenBase.prototype,{_onPlayClick:function(){if(!(this._closing||this.get_state()!=this._STATE_OPENED)&&this._finishedLoading)e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),this._endScreen()},_endScreen:function(){this._closing||(this._closing=!0,this._doFlowEvent(c.ConstantsScreen.FLOW_LOAD_CLOSE))},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a);this._parallaxer.move(10*a);this.get_state()==this._STATE_OPENED&&(this._timer-=a,0>this._timer&&e.WorkinCloud.get_instance().get_assets().isLoading(),this._initTimer-=a,0>this._initTimer?this._tryFinishLoading():this._loadWidget.update(a))},_tryFinishLoading:function(){!this._finishedLoading&&!e.WorkinCloud.get_instance().get_assets().isLoading()&&(this._loadWidget.tweenOut(),this._buttonPlay.get_renderable().visible=!0,this._buttonPlay.enable(),h.tween.WorkinTweenUtils.easeSlideInFromDir(this._buttonPlay,this._tween,h.tween.TWEEN_DIR.RIGHT),this._finishedLoading=!0)},_setCloseState:function(){this._closing=!0;this._tween.tween(this._tray.get_renderable(),0.3,{alpha:0},null,h.tween.Ease.EASE_QUAD).onComplete(q(this,this.setFlagDispose))},_setInState:function(){var a=this;this._closing=!1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_load",0.2);this._tween.tween(this._tray.get_renderable(),0.1,{alpha:1},null,h.tween.Ease.EASE_QUAD).onComplete(function(){a._loadWidget.tweenIn();null!=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION)?a._instructions.effectTypeIn(e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION).steps[e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_LEVEL)].brief):a._instructions.effectTypeIn("This is a test level that demonstrates room and alerts aboard the Ghost. If you're seeing this text something probably didn't go right in level iteration.");a._finishOpenState()})},dispose:function(){this._buttonPlay=this._buttonSound=this._tray=this._loadWidget=null;g.screens.ScreenBase.prototype.dispose.call(this)},_buildScreen:function(){this._initTimer=2;this._blinkTimer=this._BLINK_TIME;this._timer=this._INIT_WAIT;this._gameType=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_GAME_CLASS);this._parallaxer=new d.data.Parallaxer(this.addElement(new j.Element({asset:"starfield",originX:0.5,originY:0.5,x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y})),this.addElement(new j.Element({asset:"starfield",originX:0.5,originY:0.5,x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y})),!0);this._tray=this.addElement(new j.Element({asset:"",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._tray.get_renderable().alpha=0;this._tray.addElement(new j.Element({asset:"brief_ship",x:-550,y:-150}));var a=this._tray.addElement(new j.Element({x:254,y:-32,asset:"panel_mission_select",origin:0.5}));a.addElement(this._instructions=new j.TextLocalized(-160,-94,"","",{doLocalize:!1,width:340}));a.addElement(new j.TextLocalized(22,-145,"briefs2","",{originX:0.5,originY:0.5}));this._instructions.get_renderable().scaleX=this._instructions.get_renderable().scaleY=0.33;this._loadWidget=this._tray.addElement(new g.display.DisplayLoadingProgress(c.ConstantsApp.STAGE_CENTER_X-
475,c.ConstantsApp.STAGE_CENTER_Y-50,this._tween));this._buttonPlay=this._tray.addElement(new g.buttons.ButtonBase(a.get_pos().x,180,this._tween,0.5,0.5,"btn_choose"));this._buttonPlay.addElement(new j.TextLocalized(4,8,"play","",{center:!0,originX:0.5,originY:0.5}));this._buttonPlay.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onPlayClick));this._buttonPlay.setParentOffset(this._tray);this._buttonPlay.get_renderable().visible=!1;this._buttonPlay.disable();this._closing=!1},__class__:g.screens.ScreenLoading});g.screens.ScreenMainMenu=function(a,b,f){null==b&&(b="");g.screens.ScreenBase.call(this,a,b,f)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenMainMenu"]=g.screens.ScreenMainMenu;g.screens.ScreenMainMenu.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenMainMenu".split(",");g.screens.ScreenMainMenu.__super__=g.screens.ScreenBase;g.screens.ScreenMainMenu.prototype=v(g.screens.ScreenBase.prototype,{_onReturnToMainMenu:function(){this._setState(this._STATE_OPENED);e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);this._tween.tween(this._shipBG.get_pos(),0.5,{x:c.ConstantsApp.STAGE_CENTER_X},null,h.tween.Ease.EASE_SPACE_OUT);this._tween.tween(this._starsBG.get_pos(),0.5,{x:c.ConstantsApp.STAGE_CENTER_X},null,h.tween.Ease.EASE_SPACE_OUT);this._tween.tween(this._starsBG2.get_pos(),0.5,{x:c.ConstantsApp.STAGE_CENTER_X},null,h.tween.Ease.EASE_SPACE_OUT);this._tray.get_pos().x=c.ConstantsApp.STAGE_CENTER_X;this._tray.get_pos().y=c.ConstantsApp.STAGE_CENTER_Y;h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP)},_doTransition:function(){var a=480,b=200;this._transitionRight&&(a*=-1,b*=-1);this._tween.tween(this._shipBG.get_pos(),0.5,{x:this._shipBG.get_pos().x+a},null,h.tween.Ease.EASE_SPACE_OUT);this._tween.tween(this._starsBG.get_pos(),0.5,{x:this._shipBG.get_pos().x+b},null,h.tween.Ease.EASE_SPACE_OUT);this._tween.tween(this._starsBG2.get_pos(),0.5,{x:this._shipBG.get_pos().x+b},null,h.tween.Ease.EASE_SPACE_OUT);h.tween.WorkinTweenUtils.easeSlideOutToDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP)},_onShopClick:function(){this.isClosing()||(this._setState(this._STATE_OUT),this._transitionRight=!0,this._doTransition(),e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),this._doFlowEvent(c.ConstantsScreen.FLOW_SHOP))},_onContinueClick:function(){this.isClosing()||(this._setState(this._STATE_OUT),this._transitionRight=!1,this._doTransition(),e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),this._doFlowEvent(c.ConstantsScreen.FLOW_SELECTED_LEVEL))},_onStartClick:function(){this.isClosing()||(this._setState(this._STATE_OUT),this._transitionRight=!1,this._doTransition(),e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),this._doFlowEvent(c.ConstantsScreen.FLOW_NEW_GAME))},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a);this._parallaxer.move(10*a)},_onEventResizeCanvas:function(){this._shipBG.get_pos().y=c.ConstantsApp.get_CANVAS_TOP()+768},_removeEventListeners:function(){g.screens.ScreenBase.prototype._removeEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_RETURN_TO_MAIN_MENU,q(this,this._onReturnToMainMenu))},_addEventListeners:function(){g.screens.ScreenBase.prototype._addEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_RETURN_TO_MAIN_MENU,q(this,this._onReturnToMainMenu))},_setCloseState:function(){var a=480,b=200;this._transitionRight&&(a*=-1,b*=-1);this._tween.tween(this._shipBG.get_pos(),0.5,{x:this._shipBG.get_pos().x+a},null,h.tween.Ease.EASE_OUT);this._tween.tween(this._starsBG.get_pos(),0.5,{x:this._shipBG.get_pos().x+b},null,h.tween.Ease.EASE_OUT);h.tween.WorkinTweenUtils.easeSlideOutToDir(this._tray,this._tween,h.tween.TWEEN_DIR.RIGHT).onComplete(q(this,this.setFlagDispose))},_setInState:function(){var a=this;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(function(){a._finishOpenState()})},dispose:function(){this._storeButton=this._soundButton=this._gameButton=this._tray=this._storeButton=null;g.screens.ScreenBase.prototype.dispose.call(this)},_buildScreen:function(){this._starsBG=this.addElement(new j.Element({asset:"starfield",x:c.ConstantsApp.STAGE_CENTER_X+512,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._starsBG.addElement(new j.Element({asset:"starfield",x:-1024,y:0,originX:0.5,originY:0.5}));this._starsBG2=this.addElement(new j.Element({asset:"starfield",x:c.ConstantsApp.STAGE_CENTER_X+512,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._starsBG2.addElement(new j.Element({asset:"starfield",x:-1024,y:0,originX:0.5,originY:0.5}));this._parallaxer=new d.data.Parallaxer(this._starsBG,this._starsBG2,!0);this._shipBG=this.addElement(new j.Element({asset:"bg_frame_half",x:c.ConstantsApp.STAGE_CENTER_X+1,y:c.ConstantsApp.get_CANVAS_TOP()+768,originX:1,originY:1}));this._shipBG.addElement(new j.Element({asset:"bg_frame_half",x:-1,y:0,originX:1,originY:1,scaleX:-1,scaleY:1}));this._tray=this.addElement(new j.Element({asset:"panels_pause_quit_and_complete",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._tray.get_renderable().visible=!1;this._gameButton=this._tray.addElement(new g.buttons.ButtonBase(0,-35,this._tween,null,null,"btn_longer"));this._gameButton.addElement(new j.TextLocalized(1,-5,"start","",{origin:0.5}));this._gameButton.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onStartClick));this._gameButton.setParentOffset(this._tray);this._soundButton=this._tray.addElement(new g.buttons.ButtonSoundToggle(220,0,this._tween,0.5,0.5,["btn_sound"],["btn_sound_off"]));this._soundButton.setParentOffset(this._tray);this._storeButton=this._tray.addElement(new g.buttons.ButtonBase(0,42,this._tween,null,null,"btn_longer"));this._storeButton.addElement(new j.TextLocalized(0,-5,"store","",{origin:0.5}));this._storeButton.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onShopClick));this._storeButton.setParentOffset(this._tray)},__class__:g.screens.ScreenMainMenu});g.screens.ScreenMinigame=function(a,b,f){null==b&&(b="");this._MAX_Y=450;this._MIN_Y=60;this._MAX_X=900;this._MIN_X=60;g.screens.ScreenBase.call(this,a,b,f)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenMinigame"]=g.screens.ScreenMinigame;g.screens.ScreenMinigame.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenMinigame".split(",");g.screens.ScreenMinigame.__super__=g.screens.ScreenBase;g.screens.ScreenMinigame.prototype=v(g.screens.ScreenBase.prototype,{_onPlayClick:function(){this._finishedLoading&&this._doFlowEvent(c.ConstantsScreen.FLOW_MINIGAME_CLOSE)},_onLoadingComplete:function(){this._loadWidget.tweenOut();this._buttonPlay.get_renderable().visible=!0;this._buttonPlay.enable();h.tween.WorkinTweenUtils.easeBounceIn(this._buttonPlay,this._tween);this._finishedLoading=!0},handleInput:function(a){switch(a.input){case c.ConstantsApp.INPUT_CLICK:case c.ConstantsApp.INPUT_SPACE:switch(a.phase){case n.WMEventInput.PHASE_DOWN:if(1==this._gameType){if(this._gameOver)break;this._spatula.setRenderOffset(-100,30);this._spatula.get_renderable().rotation=-65;this._plankton.hitBox.intersects(this._spatula.hitBox)&&this._plankton.getIsActive()&&(this._plankton.setState(g.screens.minigames.STATE._STATE_FALL),this._burger.set_goalPoint(this._burger.motherPoint),this._difficulty++,e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_LOADING_SCORE,1),null)}if(2==this._gameType)for(var b=this._slots.length;0<b;)if(b--,!this._slots[b].get_flagStopSpin()&&(this._slotButtons[b].contains(a.x,a.y)||this._slots[b].contains(a.x,a.y))){this._slots[b].stopRoulette();a=0;for(b=this._slots;a<b.length;){var f=b[a];++a;f.difficulty++}break}}}},_resetGame:function(){e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_LOADING_SCORE,0);switch(this._gameType){case 1:this._burger.set_goalPoint(this._burger.motherPoint);this._burger.get_pos().toPoint(this._burger.get_goalPoint());break;case 2:for(var a=0,b=0,f=this._slots;b<f.length;){var m=f[b];++b;m.difficulty=this._difficulty+1;m.set_rouletteAssetNumber(e.WorkinCloud.get_instance().get_random().getRandomInt(0,3)|0);m.startRoulette();a++}break;case 3:this._gameTimer=6,this._gamePaused=!1,this._balls.push(this._gameBoard.addElement(new g.screens.minigames.PongBall({x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5,vel:125,asset:"PongBall",originalBall:!0,minX:this._MIN_X,minY:this._MIN_Y,maxX:this._MAX_X,maxY:this._MAX_Y})))}},_disableGame:function(){this._difficulty=0;if(this._finishedLoading){this._gameOver=!0;h.tween.WorkinTweenUtils.easeBounceOut(this._instructions,this._tween);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsScreen.FLOW_MINIGAME_OVER));var a=this._buttonPlay.get_pos().x,b=this._buttonPlay.get_pos().y;this._buttonPlay.get_pos().to(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y);h.tween.WorkinTweenUtils.easeSlideIn(this._buttonPlay,this._tween,a,b)}else this._resetGame()},updatePong:function(a){this._gameTimer-=a;this._paddle.get_pos().x=e.WorkinCloud.get_instance().get_input().get_pointer().get_currentPos().x;if(this._gamePaused){if(this._paddle.setRenderOffset(e.WorkinCloud.get_instance().get_random().getRandomFloat(4*-this._gameTimer,4*this._gameTimer),e.WorkinCloud.get_instance().get_random().getRandomFloat(2*-this._gameTimer,2*this._gameTimer)),0>=this._gameTimer){for(;0<this._balls.length;)this._gameBoard.removeElement(this._balls.pop(),!0);this._paddle.setRenderOffset(0,0);this._disableGame()}}else{if(0<this._balls.length)for(a=this._balls.length;0<a--;)if(this._paddle.runPointCollisionTest(this._balls[a].get_pos().x,this._balls[a].get_pos().y)&&(this._balls[a].onCollidePlayer(this._paddle),e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_LOADING_SCORE,1)),this._balls[a].get_doDelete()){this._balls[a].get_renderable().scaleX=this._balls[a].get_renderable().scaleY=6;this._gameTimer=1;for(var a=0,b=this._balls;a<b.length;){var f=b[a];++a;f.get_velocity().to(0,0);h.tween.WorkinTweenUtils.easeBounceOut(f,this._tween)}this._gamePaused=!0;break}0>=this._gameTimer&&this._balls[0].get_pos().y<c.ConstantsApp.STAGE_CENTER_Y&&(this._gameTimer=6,this._balls.push(this._gameBoard.addElement(new g.screens.minigames.PongBall({x:this._balls[0].get_pos().x,y:this._balls[0].get_pos().y,originX:0.5,originY:0.5,vel:75,asset:"PongBall",originalBall:!1,minX:this._MIN_X,minY:this._MIN_Y,maxX:this._MAX_X,maxY:this._MAX_Y,downwards:0>this._balls[0].get_velocity().y}))),h.tween.WorkinTweenUtils.easeBounceIn(this._balls[this._balls.length-1],this._tween))}},updateMatch:function(a){if(0>=this._gameTimer)for(a=this._slots.length;0<a;){if(a--,this._slots[a].get_flagStopSpin()){for(var b=a,f=0;0<b;)if(b--,this._slots[b].get_flagStopSpin())if(this._slots[a].get_rouletteAssetNumber()!=this._slots[b].get_rouletteAssetNumber()){this._difficulty=0;this._gameTimer=1;for(var m=0,d=this._slots;m<d.length;){var h=d[m];++m;h.lose()}null}else f++;if(f>=this._slots.length-1){m=0;for(d=this._slots;m<d.length;)h=d[m],++m,h.win();this._gameTimer=1;this._difficulty++;e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_LOADING_SCORE,1);null}}}else if(this._gameTimer-=a,0>=this._gameTimer)if(0<this._difficulty){m=b=0;for(d=this._slots;m<d.length;)a=d[m],++m,a.difficulty=this._difficulty+1,a.set_rouletteAssetNumber(e.WorkinCloud.get_instance().get_random().getRandomInt(0,3)),a.startRoulette(),b++}else this._disableGame()},updateSwat:function(a){this._spatula.get_pos().toPoint(e.WorkinCloud.get_instance().get_input().get_pointer().get_currentPos());this._gameTimer-=a;0>=this._gameTimer&&this._plankton.getState()==g.screens.minigames.STATE._STATE_IDLE&&(this._gameTimer=0,this._plankton.changeScale(1-0.02*this._difficulty),this._plankton.strike(this._difficulty,this._burger));this._plankton.hitBox.intersects(this._burger.hitBox)&&this._plankton.getState()==g.screens.minigames.STATE._STATE_ATTACK&&(this._burger.set_goalPoint(this._plankton.get_pos()),this._plankton.flee());(this._burger.get_pos().x<this._MIN_X||this._burger.get_pos().x>this._MAX_X||this._burger.get_pos().y<this._MIN_Y||this._burger.get_pos().y>this._MAX_Y)&&this._disableGame()},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a);this._gameOver||(1==this._gameType&&this.updateSwat(a),2==this._gameType&&this.updateMatch(a),3==this._gameType&&this.updatePong(a));this._finishedLoading&&(null==this._underLay._textureSprite.scissor&&(this._underLay._textureSprite.scissor=new K.Rectangle(0,0,960,560)),0<this._underLay._textureSprite.scissor.height&&(this._underLay._textureSprite.scissor.height-=560*a,this._underLay._textureSprite.scissor.y+=280*a,0>this._underLay._textureSprite.scissor.height&&(this._underLay._textureSprite.scissor.height=0)))},_setCloseState:function(){h.tween.WorkinTweenUtils.easeSlideOutToDir(this._gameBoard,this._tween,h.tween.TWEEN_DIR.BOTTOM);null!=this._spatula&&h.tween.WorkinTweenUtils.easeBounceOut(this._spatula,this._tween);h.tween.WorkinTweenUtils.easeBounceOut(this._buttonPlay,this._tween);null!=this._buttonSound&&h.tween.WorkinTweenUtils.easeBounceOut(this._buttonSound,this._tween);h.tween.WorkinTweenUtils.easeSlideOutToDir(this._gameOverlay,this._tween,h.tween.TWEEN_DIR.BOTTOM).onComplete(q(this,this.setFlagDispose))},_setInState:function(){var a=this;h.tween.WorkinTweenUtils.easeSlideInFromDir(this._underLay,this._tween,h.tween.TWEEN_DIR.TOP);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._gameBoard,this._tween,h.tween.TWEEN_DIR.TOP);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._gameOverlay,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(function(){null!=a._buttonSound&&h.tween.WorkinTweenUtils.easeBounceIn(a._buttonSound,a._tween)});this._loadWidget.tweenIn()},dispose:function(){this._slotButtons=this._buttonSound=this._buttonPlay=this._instructions=this._paddle=this._plankton=this._spatula=this._burger=this._balls=this._slots=this._loadWidget=null;e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsScreen.FLOW_LOADING_DONE,q(this,this._onLoadingComplete));g.screens.ScreenBase.prototype.dispose.call(this)},_buildScreen:function(){this._gameType=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_GAME_CLASS);this._difficulty=0;this._gameOver=!1;this._underLay=this.addElement(new j.Element({asset:"minigame_underlay"}));this._gameBoard=this.addElement(new j.Element({asset:"testgamebg"}));this._gameBoard.get_renderable().alpha=0;this._gameBoard._rootSprite.scissor=new K.Rectangle(this._MIN_X,this._MIN_Y,this._MAX_X-this._MIN_X,this._MAX_Y-this._MIN_Y);e.WorkinCloud.get_instance().resetValue(c.ConstantsApp.INT_LOADING_SCORE);switch(this._gameType){case 1:this._gameBoard.addElement(this._burger=new g.screens.minigames.ProtectBurger({x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,asset:"hambaga",originX:0.5,originY:0.5,width:80,height:80,hitOffsetX:-40,hitOffsetY:-40}));this._gameBoard.addElement(this._plankton=new g.screens.minigames.ProtectPlankton({x:-125,y:-125,asset:"target",originX:0.5,originY:0.5,width:67,height:125,hitOffsetX:-33.5,hitOffsetY:-62.5}));this.addElement(this._spatula=new g.screens.minigames.ProtectSpatula({x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,asset:"spatula",originX:0,originY:0.2,width:60,height:30,hitOffsetX:-30,hitOffsetY:-15}));this._gameTimer=0;break;case 2:var a=new P;a.add(new r.FillSprite(16777215,960,560));this._gameBoard._rootEntity.addChild(a);this._slots=[];this._slotButtons=[];for(a=0;3>a;){var b=a++;this._slots.push(this._gameBoard.addElement(new g.screens.minigames.Roulette({x:303+
177*b,y:217,rouletteNumber:e.WorkinCloud.get_instance().get_random().getRandomInt(0,3),originX:0.5,originY:0.5})));this._slots[b].difficulty=this._difficulty+1;this._slots[b].startRoulette();this._slotButtons.push(new K.Rectangle(260+183*b,337,82,82))}this._gameBoard.addElement(new j.Element({x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y-27,asset:"slot_overlay",originX:0.5,originY:0.5}));this._gameTimer=0;break;case 3:this._gameBoard.addElement(this._paddle=new g.screens.minigames.PongCollisionItem({x:c.ConstantsApp.STAGE_CENTER_X,y:420,originX:0.5,originY:0.5,asset:"PongPaddle",width:125,height:32})),this._balls=[],this._balls.push(this._gameBoard.addElement(new g.screens.minigames.PongBall({x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5,vel:125,asset:"PongBall",originalBall:!0,minX:this._MIN_X,minY:this._MIN_Y,maxX:this._MAX_X,maxY:this._MAX_Y}))),this._gameTimer=6,this._gamePaused=!1}this._gameOverlay=this.addElement(new j.Element({asset:"",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._loadWidget=this._gameOverlay.addElement(new g.display.DisplayLoadingProgress(c.ConstantsApp.STAGE_CENTER_X-475,c.ConstantsApp.STAGE_CENTER_Y-60,this._tween,!0));this._gameOverlay.addElement(new g.display.DisplayLoadScore(c.ConstantsApp.STAGE_CENTER_X-100,c.ConstantsApp.STAGE_CENTER_Y-120,this._tween));this._instructions=this._gameOverlay.addElement(new j.TextLocalized(0,-c.ConstantsApp.STAGE_CENTER_Y+this._MIN_Y+10,"instructions"+this._gameType,null,{center:!0,originX:0.5,originY:0}));this._buttonPlay=this.addElement(new g.buttons.ButtonBase(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y+225,this._tween,0.5,0.5,"text_box_1"));this._buttonPlay.addElement(new j.TextLocalized(0,0,"play","",{center:!0,originX:0.5,originY:0.5}));this._buttonPlay.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onPlayClick));this._buttonPlay.get_renderable().visible=!1;this._buttonPlay.disable();this._soundButtonAdded=!1;if(e.WorkinCloud.get_instance().get_assets().isChunkLoaded("initial_hd")||e.WorkinCloud.get_instance().get_assets().isChunkLoaded("initial_sd"))this._buttonSound=this.addElement(new g.buttons.ButtonSoundToggle(75,75,this._tween,0.5,0.5,["button_vol_on"],["button_vol_off"])),this._buttonSound.get_renderable().alpha=0,this._soundButtonAdded=!0;e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsScreen.FLOW_LOADING_DONE,q(this,this._onLoadingComplete))},__class__:g.screens.ScreenMinigame});g.screens.ScreenMinigameMenu=function(a,b,f){null==b&&(b="");g.screens.ScreenBase.call(this,a,b,f);e.WorkinCloud.get_instance().sharedObjectSetData(c.ConstantsApp.OBJECT_MISSION,c.Episodes.get_instance().get_episodes()[0].get_data());a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION);a.id=20;e.WorkinCloud.get_instance().sharedObjectSetData(c.ConstantsApp.OBJECT_MISSION,a);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_DIFFICULTY,1);this.addElement(new j.Element({asset:"starfield",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._buttonY=this._buttonYReset=50;this._buttonX=250;this._addMinigame(d.minigames.Minigame.MINIGAME_ASTEROID_DEBRIS,"Debris Navigator");this._addMinigame(d.minigames.Minigame.MINIGAME_TURRET_FIGHT,"Turret Fight");this._addMinigame(d.minigames.Minigame.MINIGAME_CARGO_CRANE,"Cargo Crane");this._addMinigame(d.minigames.Minigame.MINIGAME_MATCH_ROTATOR,"Match Rotator");this._addMinigame(d.minigames.Minigame.MINIGAME_LANDER_LEAVE,"Chopper Lander");this._addMinigame(d.minigames.Minigame.MINIGAME_WELDING,"Welding/Paint");this._addMinigame(d.minigames.Minigame.MINIGAME_PULL_IT_OUT,"Cable Repair");this._addMinigame(d.minigames.Minigame.MINIGAME_FIRE_EXTINGUISHER,"Fire Extinguisher");this._addMinigame(d.minigames.Minigame.MINIGAME_STEALTH,"Stealth");this._addMinigame(d.minigames.Minigame.MINIGAME_CREW_PROTECT,"Protect the Crew");e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_TESTING_MINIGAMES,!0);a=this.addElement(new g.buttons.ButtonBase(c.ConstantsApp.get_CANVAS_RIGHT()-200,c.ConstantsApp.get_CANVAS_BOTTOM()-
100,this._tween,0.5,0.5,"btn_back"));a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventDownClick));a.get_renderable().rotation=-90;a=this.addElement(new g.buttons.ButtonBase(c.ConstantsApp.get_CANVAS_RIGHT()-100,c.ConstantsApp.get_CANVAS_BOTTOM()-100,this._tween,0.5,0.5,"btn_back"));a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventUpClick));a.get_renderable().rotation=90;this._difficultyText=this.addElement(new j.TextBase(c.ConstantsApp.get_CANVAS_RIGHT()-
150,c.ConstantsApp.get_CANVAS_BOTTOM()-170,"","",{originX:0.5,originY:0.5,scale:0.5}));this._difficultyText.set_text(t.string(e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_DIFFICULTY)));this.addElement(new j.TextLocalized(c.ConstantsApp.get_CANVAS_RIGHT()-150,c.ConstantsApp.get_CANVAS_BOTTOM()-210,"difficulty","",{originX:0.5,originY:0.5,center:!0}))};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenMinigameMenu"]=g.screens.ScreenMinigameMenu;g.screens.ScreenMinigameMenu.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenMinigameMenu".split(",");g.screens.ScreenMinigameMenu.__super__=g.screens.ScreenBase;g.screens.ScreenMinigameMenu.prototype=v(g.screens.ScreenBase.prototype,{handleInput:function(){},_onEventDownClick:function(){1<e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_DIFFICULTY)&&e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_DIFFICULTY,-1);this._difficultyText.set_text(t.string(e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_DIFFICULTY)))},_onEventUpClick:function(){5>e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_DIFFICULTY)&&e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_DIFFICULTY,1);this._difficultyText.set_text(t.string(e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_DIFFICULTY)))},_onEventTestMinigame:function(a){e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_TEST_MINIGAME_ID,a.get_data().id);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventFlow.request(c.ConstantsScreen.FLOW_TEST_MINIGAME))},_removeEventListeners:function(){g.screens.ScreenBase.prototype._removeEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_TEST_MINIGAME,q(this,this._onEventTestMinigame))},_addEventListeners:function(){g.screens.ScreenBase.prototype._addEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_TEST_MINIGAME,q(this,this._onEventTestMinigame))},dispose:function(){g.screens.ScreenBase.prototype.dispose.call(this)},_addMinigame:function(a,b){var f=this.addElement(new g.buttons.ButtonDynamic(this._buttonX,this._buttonY,this._tween,0.5,0.5,"btn_longer"));f.addElement(new j.TextBase(0,0,b,"",{origin:0.5,scale:0.5}));f.setEventWithData(c.ConstantsApp.EVENT_TEST_MINIGAME,{id:a});this._buttonY+=f.get_renderable().height+5;500<this._buttonY&&(this._buttonY=this._buttonYReset,this._buttonX+=f.get_renderable().width+5)},__class__:g.screens.ScreenMinigameMenu});g.screens.ScreenPauseAlert=function(a,b,f){null==b&&(b="");g.screens.ScreenBase.call(this,a,b,f);this._alertBox=new r.FillSprite(0,c.ConstantsApp.STAGE_WIDTH|0,c.ConstantsApp.STAGE_HEIGHT|0);a=new P;a.add(this._alertBox);this._imageEntity.addChild(a);this._textAlert=this.addElement(new j.TextLocalized(50,50,"orientation_portrait","",{originX:0,originY:0.5}))};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenPauseAlert"]=g.screens.ScreenPauseAlert;g.screens.ScreenPauseAlert.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenPauseAlert".split(",");g.screens.ScreenPauseAlert.__super__=g.screens.ScreenBase;g.screens.ScreenPauseAlert.prototype=v(g.screens.ScreenBase.prototype,{update:function(a){g.screens.ScreenBase.prototype.update.call(this,a)},__class__:g.screens.ScreenPauseAlert});g.screens.ScreenQuitConfirm=function(a,b,f){this._TRAY_IN_TIME_2=0.2;this._TRAY_IN_TIME=0.35;g.screens.ScreenBase.call(this,a,b,f);this._closing=!1};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenQuitConfirm"]=g.screens.ScreenQuitConfirm;g.screens.ScreenQuitConfirm.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenQuitConfirm".split(",");g.screens.ScreenQuitConfirm.__super__=g.screens.ScreenBase;g.screens.ScreenQuitConfirm.prototype=v(g.screens.ScreenBase.prototype,{_onNoClick:function(){this.get_state()==this._STATE_OPENED&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO))},_onYesClick:function(){this.get_state()==this._STATE_OPENED&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2),e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TESTING_MINIGAMES),this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES))},_setCloseState:function(){this._closing||(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2),this._closing=!0,h.tween.WorkinTweenUtils.easeSlideOutToDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(q(this,this.setFlagDispose)))},_setInState:function(){this._closing=!1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_slide",0.2);h.tween.WorkinTweenUtils.easeSlideInFromDir(this._tray,this._tween,h.tween.TWEEN_DIR.TOP).onComplete(q(this,this._finishOpenState))},dispose:function(){g.screens.ScreenBase.prototype.dispose.call(this);this._tray=this._wall=null},_buildScreen:function(){this._tray=this.addElement(new j.Element({asset:"panels_pause_quit_and_complete",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2,originX:0.5,originY:0.5}));this._tray.addElement(new j.TextLocalized(0,-70,"quit_confirm_header","",{originX:0.5,originY:0.5,center:!0}));this._tray.get_renderable().alpha=0;var a=this._tray.addElement((new g.buttons.ButtonBase(-5,-7,this._tween,0.5,0.5,"btn_long")).setParentOffset(this._tray));a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onYesClick));a.addElement(new j.TextLocalized(0,-4,"yes","",{originX:0.5,originY:0.5}));a=this._tray.addElement((new g.buttons.ButtonBase(-5,57,this._tween,0.5,0.5,"btn_long")).setParentOffset(this._tray));a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onNoClick));a.addElement(new j.TextLocalized(0,-4,"no","",{originX:0.5,originY:0.5}))},__class__:g.screens.ScreenQuitConfirm});g.screens.ScreenScreenshot=function(){};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenScreenshot"]=g.screens.ScreenScreenshot;g.screens.ScreenScreenshot.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenScreenshot".split(",");g.screens.ScreenScreenshot.__super__=g.screens.ScreenBase;g.screens.ScreenScreenshot.prototype=v(g.screens.ScreenBase.prototype,{dispose:function(){g.screens.ScreenBase.prototype.dispose.call(this)},__class__:g.screens.ScreenScreenshot});g.screens.ScreenShop=function(a,b,f){null==b&&(b="");g.screens.ScreenBase.call(this,a,b,f);this._closing=!1};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenShop"]=g.screens.ScreenShop;g.screens.ScreenShop.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenShop".split(",");g.screens.ScreenShop.__super__=g.screens.ScreenBase;g.screens.ScreenShop.prototype=v(g.screens.ScreenBase.prototype,{dispose:function(){this._buttons=this._trayDetails=this._trayInventory=this._trayCurrency=null;g.screens.ScreenBase.prototype.dispose.call(this)},_onEventPlayClick:function(){this.get_state()==this._STATE_OPENED&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_back",0.2),e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_SHOP_OPEN,!1),this._doFlowEvent(c.ConstantsScreen.FLOW_SHOP_CLOSE))},_setCloseState:function(){this._closing||(this._closing=!0,h.tween.WorkinTweenUtils.easeSlideOut(this._trayInventory,this._tween,c.ConstantsApp.STAGE_CENTER_X-1E3,this._trayInventory.get_pos().y),h.tween.WorkinTweenUtils.easeSlideOut(this._trayCurrency,this._tween,c.ConstantsApp.STAGE_CENTER_X+1E3,this._trayCurrency.get_pos().y).onComplete(q(this,this.setFlagDispose)),h.tween.WorkinTweenUtils.easeSlideOut(this._trayDetails,this._tween,c.ConstantsApp.STAGE_CENTER_X+1E3,this._trayDetails.get_pos().y),h.tween.WorkinTweenUtils.easeSlideOut(this._buttonLeave,this._tween,-200,this._buttonLeave.get_pos().y))},_openCurrencyPane:function(){h.tween.WorkinTweenUtils.easeSlideIn(this._trayCurrency,this._tween,this._trayCurrency.get_pos().x,this._trayCurrency.get_pos().y+300)},_setOpenedState:function(){g.screens.ScreenBase.prototype._setOpenedState.call(this);this._doResize()},_setInState:function(){this._closing=!1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_build",0.2);h.tween.WorkinTweenUtils.easeSlideIn(this._trayInventory,this._tween,c.ConstantsApp.STAGE_CENTER_X-
1E3,this._trayInventory.get_pos().y).onComplete(q(this,this._openCurrencyPane));h.tween.WorkinTweenUtils.easeSlideIn(this._trayDetails,this._tween,c.ConstantsApp.STAGE_CENTER_X+1E3,this._trayDetails.get_pos().y).onComplete(q(this,this._finishOpenState));h.tween.WorkinTweenUtils.easeSlideIn(this._buttonLeave,this._tween,-200,this._buttonLeave.get_pos().y)},_doItemSelect:function(a){this._selectedItem=a;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_click",0.2);this._textItemName.swapTextToDisplay(c.Inventory.getLocalizationNameID(this._selectedItem));this._textItemDesc.swapTextToDisplay(c.Inventory.getLocalizationDescID(this._selectedItem,-1));this._itemIcon.setTextureAsset(c.Inventory.getIcon(this._selectedItem));a=c.Inventory.hasRankCapped(this._selectedItem);!a&&c.Inventory.canAffordNextRank(this._selectedItem)?(this._buttonBuy.enable(),this._buttonBuy.get_text().get_renderable().alpha=1):(a?this._buttonBuy.disable():this._buttonBuy.enable(),this._buttonBuy.get_text().get_renderable().alpha=0.5);this._buttonBuy.get_renderable().alpha=a?0:1;this._textCost.get_renderable().alpha=a?0:1;this._textCostCurrency.get_renderable().alpha=a?0:1;this._textCost.set_text(""+c.Inventory.getCostNextRank(this._selectedItem));this._textProgress.set_text(c.Inventory.getRank(this._selectedItem)+" / "+c.Inventory.getRankCap(this._selectedItem))},_onBuy:function(){if(c.Inventory.canAffordNextRank(this._selectedItem)){e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_CREDITS,-c.Inventory.getCostNextRank(this._selectedItem));var a=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.STORE_ID);a.credits=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_CREDITS);e.WorkinCloud.get_instance().sharedObjectSetData(c.ConstantsApp.STORE_ID,a);e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_build2",0.2);0>=this._ezraCommentTimer&&(e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Buy"),this._ezraCommentTimer=1.8);c.Inventory.addRank(this._selectedItem);this._selectedItem==c.Item.ITEM_NOTORIETY&&c.ConstantsApp.update_unlocks();this._doItemSelect(this._selectedItem);for(var b,a=0,f=this._buttons;a<f.length;)b=f[a],++a,b.doRefreshDisplay()}else e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_back",0.7),R.delay(function(){e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_back",0.7)},165),this._moneyFlashTimer=3},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a);0<this._ezraCommentTimer&&(this._ezraCommentTimer-=a);0<this._moneyFlashTimer&&(0.5>this._moneyFlashTimer%1?this._textShowCurrency.get_renderable().visible=!0:this._textShowCurrency.get_renderable().visible=!1,this._moneyFlashTimer-=a,0>=this._moneyFlashTimer&&(this._textShowCurrency.get_renderable().visible=!0))},_doResize:function(){this._trayDetails.get_pos().x=c.ConstantsApp.get_CANVAS_RIGHT()-220;this._trayCurrency.get_pos().x=c.ConstantsApp.get_CANVAS_RIGHT()-150;this._buttonLeave.get_pos().x=c.ConstantsApp.get_CANVAS_LEFT()+68;this._buttonLeave.get_pos().y=c.ConstantsApp.get_CANVAS_TOP()+50},_onEventResizeCanvas:function(){this._doResize()},_onItemSelect:function(a){this._doItemSelect(a.get_data().id)},_removeEventListeners:function(){g.screens.ScreenBase.prototype._removeEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_ITEM_SELECT,q(this,this._onItemSelect))},_addEventListeners:function(){g.screens.ScreenBase.prototype._addEventListeners.call(this);e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_ITEM_SELECT,q(this,this._onItemSelect))},_buildScreen:function(){this._trayCurrency=this.addElement(new j.Element({x:c.ConstantsApp.get_CANVAS_RIGHT()-
150,y:96,originX:0.5,originY:1,asset:"currency_backing"}));this._moneyFlashTimer=this._ezraCommentTimer=this._trayCurrency.get_renderable().alpha=0;this._trayInventory=this.addElement(new j.Element({asset:"panel_mission_brief",originX:0.5,originY:0.5,x:0.35*c.ConstantsApp.STAGE_WIDTH,y:c.ConstantsApp.STAGE_CENTER_Y+40}));this._trayInventory.get_renderable().visible=!1;this._trayInventory.addElement(new j.TextLocalized(-90,-145,"store","",{originX:0.5,originY:0.5,center:!0}));this._trayCurrency.addElement(this._textShowCurrency=new g.display.DisplayCurrency(-165,-58,this._tween));this._buttons=[];for(var a=0.25*-this._trayInventory.get_renderable().width,b=a,f=-40,m=0,d=0,h=c.Inventory.getItemList();d<h.length;){var i=h[d];++d;this._button=this._trayInventory.addElement((new g.buttons.ButtonShopItem(i,b,f,this._tween,0.5,0.5,"button_blank_shop")).setParentOffset(this._trayInventory));this._buttons.push(this._button);m++;4<=m?(m=0,b=a,f+=117):b+=117}this._trayDetails=this.addElement(new j.Element({asset:"details_tray",originX:0.5,originY:0.5,x:c.ConstantsApp.get_CANVAS_RIGHT()-220,y:c.ConstantsApp.STAGE_CENTER_Y+80}));this._trayDetails.get_renderable().visible=!1;a=e.WorkinCloud.get_instance().get_localize().getLocalizeData("currency");this._itemIcon=this._trayDetails.addElement(new j.Element({asset:"button_blank_shop",originX:0.5,originY:0.5,x:30,y:-205}));this._textItemName=this._trayDetails.addElement(new j.TextLocalized(30,-110,"item_name_default","",{originX:0.5,originY:0.85,center:!0}));this._textProgress=this._trayDetails.addElement(new j.TextBase(190,55,"1 / 1",a.get_fontName(),{originX:1,originY:0.5,scale:0.6,center:!0}));this._textItemDesc=this._trayDetails.addElement(new j.TextLocalized(30,-25,"item_unowned","",{originX:0.5,originY:0.5,center:!0}));this._textCostCurrency=this._trayDetails.addElement(new j.Element({asset:"icon_credits",originX:0.5,originY:0.5,scale:0.6,x:-150,y:55}));this._textCost=this._trayDetails.addElement(new j.TextBase(-130,55,"99999",a.get_fontName(),{originX:0,originY:0.5,scale:0.6,center:!0}));this._textCost.get_renderable().scaleX=this._textCost.get_renderable().scaleY=0.6;this._textCost.set_text("99999");this._buttonBuy=this._trayDetails.addElement((new g.buttons.ButtonShopBuy(-10,150,this._tween,0.5,0.5,"btn_choose")).setParentOffset(this._trayDetails));this._buttonBuy.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onBuy));this._buttonLeave=this.addElement(new g.buttons.ButtonDynamic(c.ConstantsApp.get_CANVAS_LEFT()+68,c.ConstantsApp.get_CANVAS_TOP()+50,this._tween,0.5,0.5,"btn_back"));this._buttonLeave.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventPlayClick));this._buttonLeave.get_renderable().visible=!1;e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_ITEM_SELECT,{id:c.Item.ITEM_NOTORIETY}));c.ConstantsApp.update_unlocks()},__class__:g.screens.ScreenShop});g.screens.ScreenSplash=function(a,b,f){null==b&&(b="");this._BLINK_TIME=1;g.screens.ScreenBase.call(this,a,b,f);this._splash=this.addElement(new j.Element({asset:"splash",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));this._splash.addElement(new j.Element({asset:"starfield",x:512,y:-720,originX:0.5,originY:0.5}));this._splash.addElement(new j.Element({asset:"starfield",x:-512,y:-720,originX:0.5,originY:0.5}));this._blinkAllowed=!0;this._closing=this._clickTrayAdded=this._loadComplete=this._initialAdded=this._preloadAdded=!1;this._blinkTimer=this._BLINK_TIME;this._tryLoadComplete();this._tryPreload();this._tryInitialLoad()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenSplash"]=g.screens.ScreenSplash;g.screens.ScreenSplash.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenSplash".split(",");g.screens.ScreenSplash.__super__=g.screens.ScreenBase;g.screens.ScreenSplash.prototype=v(g.screens.ScreenBase.prototype,{handleInput:function(a){if(!(!1==this._initialAdded||this.get_state()!=this._STATE_OPENED||this._closing)&&!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_VIDEO_OPEN))switch(a.input){case c.ConstantsApp.INPUT_CLICK:case c.ConstantsApp.INPUT_SPACE:switch(a.phase){case n.WMEventInput.PHASE_DOWN:if((null==this._buttonMinigames||!1==this._buttonMinigames.contains(a.x,a.y)&&!1==this._closing)&&!1==e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_SHOP_OPEN)){if(null!=this._buttonVideoTest&&this._buttonVideoTest.contains(a.x,a.y))break;this._closing=!0;this._tweenOutClickTray()}}}},_tweenOutClickTray:function(){var a=this;if(null!=this._clickTray){this._clickTray.get_renderable().alpha=0;this._tween.tween(this._splash.get_pos(),0.5,{y:720+c.ConstantsApp.STAGE_CENTER_Y},!1,h.tween.Ease.EASE_SPACE_OUT);var b=this.addElement(new j.Element({asset:"bg_frame_half",x:c.ConstantsApp.STAGE_CENTER_X+1,y:c.ConstantsApp.get_CANVAS_TOP()+768,originX:1,originY:1,scale:2.6}));b.addElement(new j.Element({asset:"bg_frame_half",x:-1,y:0,originX:1,originY:1,scaleX:-1,scaleY:1}));this._tween.tween(b.get_renderable(),0.5,{scaleX:1,scaleY:1},!1,h.tween.Ease.EASE_SPACE_OUT).onComplete(function(){a._doFlowEvent(c.ConstantsScreen.FLOW_SPLASH_PLAY)})}},_onEventResizeCanvas:function(){null!=this._buttonMinigames&&(this._buttonMinigames.get_pos().y=c.ConstantsApp.get_CANVAS_TOP()+120);null!=this._buttonVideoTest&&(this._buttonVideoTest.get_pos().y=c.ConstantsApp.get_CANVAS_TOP()+50)},_onEventVideoTestClick:function(){this.get_state()!=this._STATE_OPENED||!1==this._initialAdded||(e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_VIDEO_OPEN,!0),e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_VIDEO_NAME,"SWR-002_clip_08"),this._doFlowEvent(c.ConstantsScreen.FLOW_VIDEO_OPEN))},_onEventMinigameMenuClick:function(){this.get_state()!=this._STATE_OPENED||!1==this._initialAdded||this._doFlowEvent(c.ConstantsScreen.FLOW_MINIGAME_MENU)},update:function(a){g.screens.ScreenBase.prototype.update.call(this,a);this._tryPreload();this._tryInitialLoad();this._tryCompleteLoadMinigame();this._loadComplete&&this._blinkAllowed&&this._clickTrayAdded?(this._blinkTimer-=a,0>=this._blinkTimer&&(0==this._textClickToPlay.get_renderable().alpha?(this._blinkTimer=this._BLINK_TIME,this._textClickToPlay.get_renderable().alpha=1):(this._blinkTimer=this._BLINK_TIME/2,this._textClickToPlay.get_renderable().alpha=0))):null!=this._textClickToPlay&&(this._textClickToPlay.get_renderable().alpha=0)},_insertClickTray:function(){if(!this._clickTrayAdded){var a;a=e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)?"tap_anywhere":"click_anywhere";this._clickTray=this.addElement(new j.Element({asset:"",originX:0.5,originY:1,x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_HEIGHT-10}));this._textClickToPlay=this._clickTray.addElement(new j.TextLocalized(0,-20,a,"",{originX:0.5,originY:1}));h.tween.WorkinTweenUtils.easeBounceIn(this._clickTray,this._tween);this._clickTrayAdded=!0;c.ConstantsApp.OPTION_SHOW_MINIGAME_MENU&&(a=this.addElement(new g.buttons.ButtonBase(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.get_CANVAS_TOP()+120,this._tween,0.5,0.5,"btn_longer")),a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventMinigameMenuClick)),a.addElement(new j.TextLocalized(0,-3,"minigame_menu","",{originX:0.5,originY:0.5,center:!0})),this._buttonMinigames=a);c.ConstantsApp.OPTION_VIDEO_TEST&&(a=this.addElement(new g.buttons.ButtonBase(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.get_CANVAS_TOP()+50,this._tween,0.5,0.5,"btn_longer")),a.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventVideoTestClick)),a.addElement(new j.TextLocalized(0,-3,"video_test","",{originX:0.5,originY:0.5,center:!0})),this._buttonVideoTest=a);U.ServiceAnalytics.callOmnitureFunction("trackLink( 'Game Start', {}, 'event1');")}},_tryLoadComplete:function(){if(!this._loadComplete&&!(!1==e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_PRELOAD_LOADED)||!1==e.WorkinCloud.get_instance().get_assets().isPackLoaded("fonts_"+e.WorkinCloud.get_instance().getString(G.ConstantsCloud.STRING_REGION_ID))||!1==e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_INITIAL_LOADED)))this._insertClickTray(),this._tryRemoveLoader(),this._loadComplete=!0},_tryCompleteLoadMinigame:function(){if(!this._loadComplete&&!(!1==e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_PRELOAD_LOADED)||!1==e.WorkinCloud.get_instance().get_assets().isPackLoaded("fonts_"+e.WorkinCloud.get_instance().getString(G.ConstantsCloud.STRING_REGION_ID))||!1==e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_INITIAL_LOADED)))0<e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_GAME_CLASS)?(this._tryRemoveLoader(),this._loadComplete=!0,e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsScreen.FLOW_SPLASH_CLICKTRAY,q(this,this._insertClickTray))):this._tryLoadComplete()},_tryRemoveLoader:function(){null==this._loadWidget||!1==this._loadWidget.get_active()||this._loadWidget.tweenOut()},_tryAddLoader:function(){null!=this._loadWidget||0<e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_GAME_CLASS)||(this._loadWidget=this.addElement(new g.display.DisplayLoadingProgress(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_HEIGHT-30,this._tween)),this._loadWidget.tweenIn())},_tryInitialLoad:function(){if(!this._loadComplete&&!(this._initialAdded||!1==e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_INITIAL_LOADED)))this._tryAddLoader(),this._initialAdded=!0},_tryPreload:function(){if(!this._preloadAdded&&!(!1==e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_PRELOAD_LOADED)||!1==e.WorkinCloud.get_instance().get_assets().isPackLoaded("fonts_"+e.WorkinCloud.get_instance().getString(G.ConstantsCloud.STRING_REGION_ID))))this._preloadAdded=!0,this._loadComplete||this._tryAddLoader()},dispose:function(){this._splash=this._clickTray=this._loadWidget=this._buttonSound=this._textClickToPlay=null;g.screens.ScreenBase.prototype.dispose.call(this)},__class__:g.screens.ScreenSplash});g.screens.ScreenVideo=function(a,b,f){null==b&&(b="");g.screens.ScreenBase.call(this,a,b,f);this._closing=!1;this.addElement(new j.Element({asset:"starfield",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5}));a=e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_VIDEO_NAME);a="assets/video/"+a+".mp4";this._loadingText=this.addElement(new j.TextLocalized(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y,"loading",null,{origin:0.5,center:!0}));this._video=this.addElement(new d.elements.HTML5Video({x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,origin:0.5,loadCallback:q(this,this._onLoadComplete),completionHandler:q(this,this._onVideoComplete),url:a}));I.__cast(this.addElement(new g.buttons.ButtonBase(c.ConstantsApp.get_CANVAS_LEFT()+100,c.ConstantsApp.get_CANVAS_TOP()+50,this._tween,0.5,0.5,"btn_back")),g.buttons.ButtonBase).get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onEventXClick))};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.ScreenVideo"]=g.screens.ScreenVideo;g.screens.ScreenVideo.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,ScreenVideo".split(",");g.screens.ScreenVideo.__super__=g.screens.ScreenBase;g.screens.ScreenVideo.prototype=v(g.screens.ScreenBase.prototype,{handleInput:function(){},_onEventXClick:function(){this._closing||this._close()},_setCloseState:function(){var a=this.addElement(new j.Element({asset:"black_overlay",x:c.ConstantsApp.get_CANVAS_LEFT(),y:c.ConstantsApp.get_CANVAS_TOP(),origin:0,alpha:0}));a.applyRenderable();this._tween.tween(a.get_renderable(),0.5,{alpha:1},null,h.tween.Ease.EASE_QUAD).onComplete(q(this,this.setFlagDispose))},_close:function(){this._closing||(this._video.remove(),e.WorkinCloud.get_instance().setBool(c.ConstantsApp.BOOL_VIDEO_OPEN,!1),this._doFlowEvent(c.ConstantsScreen.FLOW_VIDEO_CLOSE))},_removeEventListeners:function(){g.screens.ScreenBase.prototype._removeEventListeners.call(this)},_addEventListeners:function(){g.screens.ScreenBase.prototype._addEventListeners.call(this)},dispose:function(){g.screens.ScreenBase.prototype.dispose.call(this)},_onVideoComplete:function(){this._close()},_onLoadComplete:function(a){a?(e.WorkinCloud.get_instance().get_sound().stopMusic(),this._tween.tween(this._loadingText.get_renderable(),1,{alpha:0})):(this._loadingText.swapTextToDisplay("unavailable"),this._tween.tween(this._loadingText.get_renderable(),1,{alpha:0},null,null,1.5).onComplete(q(this,this._close)))},__class__:g.screens.ScreenVideo});g.screens.data={};g.screens.data.ChangeActionData=function(a,b,f){this._screenId=a;this._changeEvent=b;this._action=f};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.data.ChangeActionData"]=g.screens.data.ChangeActionData;g.screens.data.ChangeActionData.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,data,ChangeActionData".split(",");g.screens.data.ChangeActionData.prototype={get_action:function(){return this._action},get_changeEvent:function(){return this._changeEvent},get_screenId:function(){return this._screenId},__class__:g.screens.data.ChangeActionData};g.screens.data.ScreenData=function(a,b,f,c,d){null==c&&(c=0);null==f&&(f="");this.id=a;this.screenClass=b;this.assetClassName=f;this.layer=c;this.data=null==d?new w.StringMap:d};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.data.ScreenData"]=g.screens.data.ScreenData;g.screens.data.ScreenData.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,data,ScreenData".split(",");g.screens.data.ScreenData.prototype={__class__:g.screens.data.ScreenData};g.screens.data.ScreenQueueData=function(a,b,f){null==f&&(f="");this.screenData=a;this.openCondition=b;this.openTestString=f};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.data.ScreenQueueData"]=g.screens.data.ScreenQueueData;g.screens.data.ScreenQueueData.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,data,ScreenQueueData".split(",");g.screens.data.ScreenQueueData.prototype={validateCondition:function(a,b){null==b&&(b="");return this.openCondition==a?""==this.openTestString||this.openTestString==b:!1},__class__:g.screens.data.ScreenQueueData};g.screens.data.ScreenStateData=function(a,b,f,c,d,e){this.id=a;this.animation=b;this.actionOnComplete=f;this.actionData=c;this.inFunc=d;this.outFunc=e};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.data.ScreenStateData"]=g.screens.data.ScreenStateData;g.screens.data.ScreenStateData.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,data,ScreenStateData".split(",");g.screens.data.ScreenStateData.prototype={__class__:g.screens.data.ScreenStateData};g.screens.minigames={};g.screens.minigames.PongCollisionItem=function(a){j.Element.call(this,a);this._flagBall=!1;null!=a.vel&&(this._flagBall=!0);this._height=a.height;this._width=a.width;this._prevPos=this._pos.copy();this._nextPos=this._pos.copy();this._bounceCount=0;this._motionLine=h.WorkinLine.request(this._pos.x,this._pos.y,this._nextPos.x,this._nextPos.y);this._hasNewVelocity=!1;this._radius=this._DEFAULT_RADIUS()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.minigames.PongCollisionItem"]=g.screens.minigames.PongCollisionItem;g.screens.minigames.PongCollisionItem.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,minigames,PongCollisionItem".split(",");g.screens.minigames.PongCollisionItem.__super__=j.Element;g.screens.minigames.PongCollisionItem.prototype=v(j.Element.prototype,{_calculateMotion:function(){this._motionLine.to(this._pos,this._nextPos)},updatePositionFromVelocity:function(a){this._nextPos.x+=this._velocity.x*a;this._nextPos.y+=this._velocity.y*a;this._calculateMotion();this._prevPos.x=this._pos.x;this._prevPos.y=this._pos.y;this._pos.x=this._nextPos.x;this._pos.y=this._nextPos.y},runPointCollisionTest:function(a,b){return b>this._pos.y-this.get_height()/2&&b<=this._pos.y?a>this._pos.x-this.get_width()/2&&a<this._pos.x+this.get_width()/2:!1},onCollidePlayer:function(a){this._bounceCount++;this._velocity.rotateTo(75*((this.get_pos().x-a.get_pos().x)/(a.get_renderable().width/2))-90)},update:function(a){this._hasNewVelocity&&(this._velocity.x=this._nextVelocity.x,this._velocity.y=this._nextVelocity.y,this._hasNewVelocity=!1);this._flagBall?this.updatePositionFromVelocity(a):(0>this._pos.x-this.get_width()/2&&(this._pos.x=this.get_width()/2),960<this._pos.x+this.get_width()/2&&(this._pos.x=960-this.get_width()/2));j.Element.prototype.update.call(this,a)},_DEFAULT_RADIUS:function(){return 16},get_width:function(){return this._width},get_height:function(){return this._height},dispose:function(){j.Element.prototype.dispose.call(this);this._motionLine=this._nextVelocity=this._nextPos=this._prevPos=null},__class__:g.screens.minigames.PongCollisionItem});g.screens.minigames.PongBall=function(a){g.screens.minigames.PongCollisionItem.call(this,a);this._minX=null!=a.minX?a.minX:0;this._minY=null!=a.minY?a.minY:0;this._maxX=null!=a.maxX?a.maxX:960;this._maxY=null!=a.maxY?a.maxY:560;null!=a.player&&(this._playerReference=a.player);this._originalBall=null!=a.originalBall?a.originalBall:!1;this._originalBall||(this._glitchTimer=0.3);null!=a.vel&&(this._velocity.to(a.vel,0),this._velocity.rotateTo(90*-Math.random()-45),!0==a.downwards&&this._velocity.reverse());this._gravity=0};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.minigames.PongBall"]=g.screens.minigames.PongBall;g.screens.minigames.PongBall.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,minigames,PongBall".split(",");g.screens.minigames.PongBall.__super__=g.screens.minigames.PongCollisionItem;g.screens.minigames.PongBall.prototype=v(g.screens.minigames.PongCollisionItem.prototype,{_randomVelocity:function(){var a=e.WorkinCloud.get_instance().get_random().getRandomInt(-350,350),b=e.WorkinCloud.get_instance().get_random().getRandomInt(-350,-250);this._velocity.x=a;this._velocity.y=b},update:function(a){g.screens.minigames.PongCollisionItem.prototype.update.call(this,a);0<this._glitchTimer&&(this._glitchTimer-=a,this.setRenderOffset(e.WorkinCloud.get_instance().get_random().getRandomFloat(10*-this._glitchTimer,10*this._glitchTimer),e.WorkinCloud.get_instance().get_random().getRandomFloat(10*-this._glitchTimer,10*this._glitchTimer)),0>=this._glitchTimer&&this.setRenderOffset(0,0));0<this._timerFreeze&&(this._timerFreeze-=a,0>=this._timerFreeze&&(this._randomVelocity(),this._timerFreeze=0));this._nextPos.x>this._maxX?(this._nextPos.x=this._maxX,0<this._velocity.x&&(this._velocity.x*=-1)):this._nextPos.x<this._minX&&(this._nextPos.x=this._minX,0>this._velocity.x&&(this._velocity.x*=-1));this._nextPos.y<this._minY?(this._nextPos.y=this._minY,0>this._velocity.y&&(this._velocity.y*=-1)):this._nextPos.y>this._maxY&&this.set_doDelete(!0);this._render.rotation+=this._velocity.x/5*a},dispose:function(){g.screens.minigames.PongCollisionItem.prototype.dispose.call(this);this._playerReference=null},__class__:g.screens.minigames.PongBall});g.screens.minigames.ProtectBurger=function(a){j.Element.call(this,a);this._hitBoxOffset=h.WorkinPoint.request(a.hitOffsetX,a.hitOffsetY);this.hitBox=h.WMRectangle.request(this.get_pos().x+this._hitBoxOffset.x,this.get_pos().y+this._hitBoxOffset.y,a.width,a.height);this._goalPoint=this.motherPoint=this.get_pos().copy();this._orbital=0};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.minigames.ProtectBurger"]=g.screens.minigames.ProtectBurger;g.screens.minigames.ProtectBurger.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,minigames,ProtectBurger".split(",");g.screens.minigames.ProtectBurger.__super__=j.Element;g.screens.minigames.ProtectBurger.prototype=v(j.Element.prototype,{dispose:function(){j.Element.prototype.dispose.call(this);this._goalPoint.dispose();this._hitBoxOffset.dispose();this.hitBox.dispose()},_updateHitbox:function(){this.hitBox.toXY(this.get_pos().x+this._hitBoxOffset.x,this.get_pos().y+this._hitBoxOffset.y)},update:function(a){j.Element.prototype.update.call(this,a);this._orbital+=a;this.motherPoint.to(c.ConstantsApp.STAGE_CENTER_X+Math.sin(this._orbital)*g.screens.minigames.ProtectBurger._ORBIT_RADIUS,c.ConstantsApp.STAGE_CENTER_Y+Math.cos(this._orbital)*g.screens.minigames.ProtectBurger._ORBIT_RADIUS);this._pos.toPoint(this._goalPoint.addPointCopy(this._pos));this._pos.divide(2);this._updateHitbox(a)},set_goalPoint:function(a){return this._goalPoint=a},get_goalPoint:function(){return this._goalPoint},__class__:g.screens.minigames.ProtectBurger});g.screens.minigames.STATE=l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.minigames.STATE"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,minigames,STATE".split(","),__constructs__:["_STATE_IDLE","_STATE_ATTACK","_STATE_FALL","_STATE_FLEE"]};g.screens.minigames.STATE._STATE_IDLE=["_STATE_IDLE",0];g.screens.minigames.STATE._STATE_IDLE.toString=o;g.screens.minigames.STATE._STATE_IDLE.__enum__=g.screens.minigames.STATE;g.screens.minigames.STATE._STATE_ATTACK=["_STATE_ATTACK",1];g.screens.minigames.STATE._STATE_ATTACK.toString=o;g.screens.minigames.STATE._STATE_ATTACK.__enum__=g.screens.minigames.STATE;g.screens.minigames.STATE._STATE_FALL=["_STATE_FALL",2];g.screens.minigames.STATE._STATE_FALL.toString=o;g.screens.minigames.STATE._STATE_FALL.__enum__=g.screens.minigames.STATE;g.screens.minigames.STATE._STATE_FLEE=["_STATE_FLEE",3];g.screens.minigames.STATE._STATE_FLEE.toString=o;g.screens.minigames.STATE._STATE_FLEE.__enum__=g.screens.minigames.STATE;g.screens.minigames.ProtectPlankton=function(a){j.Element.call(this,a);this._goalPoint=h.WorkinPoint.request();this._hitBoxOffset=h.WorkinPoint.request(a.hitOffsetX,a.hitOffsetY);this.hitBox=h.WMRectangle.request(this.get_pos().x+this._hitBoxOffset.x,this.get_pos().y+this._hitBoxOffset.y,a.width,a.height);this._baseWidth=a.width;this._baseHeight=a.height;this._scale=1;this._dodgeTimer=this._wobbleSin=0;this._dodgeConsumed=this._dodging=!1;this.setState(g.screens.minigames.STATE._STATE_IDLE)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.minigames.ProtectPlankton"]=g.screens.minigames.ProtectPlankton;g.screens.minigames.ProtectPlankton.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,minigames,ProtectPlankton".split(",");g.screens.minigames.ProtectPlankton.__super__=j.Element;g.screens.minigames.ProtectPlankton.prototype=v(j.Element.prototype,{dispose:function(){j.Element.prototype.dispose.call(this);this._goalPoint.dispose();this._hitBoxOffset.dispose();this.hitBox.dispose()},changeScale:function(a){this._scale=a;this._render.scaleX=this._render.scaleY=this._scale;this.hitBox.toWH(this._baseWidth*this._scale,this._baseHeight*this._scale)},_updateHitbox:function(){this.hitBox.toXY(this.get_pos().x+this._hitBoxOffset.x*this._scale,this.get_pos().y+this._hitBoxOffset.y*this._scale)},_wobbl:function(a){this._wobbleSin+=a*this._speed/10;this._render.rotation=10*Math.sin(this._wobbleSin)},update:function(a){j.Element.prototype.update.call(this,a);0<this._velocity.x?this._render.scaleX=this._scale:0>this._velocity.x&&(this._render.scaleX=-this._scale);switch(this._state[1]){case 1:0>this._pos.x&&(this._pos.x=0);960<this._pos.x&&(this._pos.x=960);0>this._pos.y&&(this._pos.y=0);560<this._pos.y&&(this._pos.y=560);null!=this._target&&!this._dodging&&this._goalPoint.toPoint(this._target.get_pos());this.get_velocity().toPoint(this._goalPoint.subtractPointCopy(this._pos));this.get_velocity().normalizeTo(this._speed);200>Math.abs(this.get_pos().subtractPointCopy(this._goalPoint).get_length())&&!this._dodgeConsumed&&0.8<Math.random()&&(this._dodgeConsumed=this._dodging=!0,this._dodgeTimer=0.33,this._goalPoint.to(e.WorkinCloud.get_instance().get_random().getRandomFloat(0,960),e.WorkinCloud.get_instance().get_random().getRandomFloat(0,560)));this._dodging&&(this._dodgeTimer-=a,0>=this._dodgeTimer&&(this._dodging=!1));this._wobbl(a);break;case 2:this._velocity.y+=500*a;this._render.rotation+=180*a;560<this.get_pos().y&&this.reset();break;case 3:if(this.get_velocity().toPoint(this._pos.subtractPointCopy(this._goalPoint)),this.get_velocity().normalizeTo(this._speed),this._wobbl(a),0>this.get_pos().x||960<this.get_pos().x)(0>this.get_pos().y||560<this.get_pos().y)&&this.reset()}this._updateHitbox(a)},reset:function(){this.setState(g.screens.minigames.STATE._STATE_IDLE);this._pos.to(-125,-125);this._velocity.to(0,0);this._render.rotation=0},flee:function(){this.setState(g.screens.minigames.STATE._STATE_FLEE);var a=h.WorkinPoint.request(480);a.rotate(360*Math.random());this._goalPoint.toPoint(a);null},strike:function(a,b){this.setState(g.screens.minigames.STATE._STATE_ATTACK);var f=h.WorkinPoint.request(480);f.rotate(360*Math.random());f.add(480,280);this.get_pos().toPoint(f);this._target=b;this._speed=33*(a+1)+5*Math.random()-2;this._dodgeConsumed=this._dodging=!1;this._dodgeTimer=0;null},getIsActive:function(){return this._state==g.screens.minigames.STATE._STATE_ATTACK||this._state==g.screens.minigames.STATE._STATE_FLEE},getState:function(){return this._state},setState:function(a){this._state=a;this._state==g.screens.minigames.STATE._STATE_IDLE&&(this._velocity.to(0,0),this._goalPoint.to(0,0))},__class__:g.screens.minigames.ProtectPlankton});g.screens.minigames.ProtectSpatula=function(a){j.Element.call(this,a);this._hitBoxOffset=h.WorkinPoint.request(a.hitOffsetX,a.hitOffsetY);this.hitBox=h.WMRectangle.request(this.get_pos().x+this._hitBoxOffset.x,this.get_pos().y+this._hitBoxOffset.y,a.width,a.height);this._goalPoint=this.get_pos().copy()};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.minigames.ProtectSpatula"]=g.screens.minigames.ProtectSpatula;g.screens.minigames.ProtectSpatula.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,minigames,ProtectSpatula".split(",");g.screens.minigames.ProtectSpatula.__super__=j.Element;g.screens.minigames.ProtectSpatula.prototype=v(j.Element.prototype,{dispose:function(){j.Element.prototype.dispose.call(this);this._goalPoint.dispose();this._hitBoxOffset.dispose();this.hitBox.dispose()},_updateHitbox:function(){this.hitBox.toXY(this.get_pos().x+this._hitBoxOffset.x,this.get_pos().y+this._hitBoxOffset.y)},update:function(a){j.Element.prototype.update.call(this,a);1>this._render.scaleY&&(this._render.scaleY+=2*a,1<this._render.scaleY&&(this._render.scaleY=1));0!=this._offsetY&&(this._offsetY/=1.3);0!=this._offsetX&&(this._offsetX/=1.3);0!=this._render.rotation&&(this._render.rotation/=1.3);this._updateHitbox(a)},__class__:g.screens.minigames.ProtectSpatula});g.screens.minigames.Roulette=function(a){this._currentAsset=a.rouletteNumber;a.asset=this.getAsset();j.Element.call(this,a);this.difficulty=1;this._lose=this._win=this._spinConsumed=this._flagStopSpin=!1;this._rouletteNumber=t["int"](a.rouletteNumber);this._timerRoulette=this._rouletteSpeed();this._basePos=this._pos.copy();this._nextGlyph=this.addElement(new j.Element({y:-200,asset:this.getAsset(1),originX:0.5,originY:0.5}));this._rootSprite.scissor=new K.Rectangle(-400,-90,800,180)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.screens.minigames.Roulette"]=g.screens.minigames.Roulette;g.screens.minigames.Roulette.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,screens,minigames,Roulette".split(",");g.screens.minigames.Roulette.__super__=j.Element;g.screens.minigames.Roulette.prototype=v(j.Element.prototype,{update:function(a){j.Element.prototype.update.call(this,a);this._flagStopSpin&&(this._timerRoulette=0,1>this._render.scaleX&&(this._render.scaleX=this._render.scaleY+=0.01),this._win?this._render.scaleX=this._render.scaleY+=0.01:this._lose&&(this._render.rotation+=1.5*this._velocity.x*a,this._velocity.y+=400*a));0<this._timerRoulette&&(this._timerRoulette-=a,this._flagStopSpin||(this._progressRatio=(this._rouletteSpeed()-this._timerRoulette)/this._rouletteSpeed(),this._textureSprite.y.set__(this._nextGlyph._textureSprite.y.set__(200*this._progressRatio)),0.5<this._progressRatio&&!this._spinConsumed&&(this._currentAsset++,this._currentAsset=e.WorkinUtils.clamp(this._currentAsset,0,3,!0)|0,this._spinConsumed=!0),0>=this._timerRoulette&&(this._rouletteSpin(),this._timerRoulette=this._rouletteSpeed())))},win:function(){this._velocity.to(0,-3);this._win=!0},lose:function(){this._flagStopSpin=!0;this._velocity.to(e.WorkinCloud.get_instance().get_random().getRandomFloat(-150,150),-100);this._lose=!0},startRoulette:function(){this._lose=this._win=this._flagStopSpin=!1;this._pos.toPoint(this._basePos);this._velocity.to(0,0);this._render.scaleX=this._render.scaleY=1;this._render.rotation=0;this._timerRoulette=this._rouletteSpeed()},stopRoulette:function(){this._textureSprite.y.set__(this._nextGlyph._textureSprite.y.set__(-50));this.setTextureAsset(this.getAsset());this._render.scaleX=this._render.scaleY=0.9;this._flagStopSpin=!0},_rouletteSpeed:function(){return 0.33-0.02*this.difficulty},_rouletteSpin:function(){this._spinConsumed=!1;this.setTextureAsset(this.getAsset());this._nextGlyph.setTextureAsset(this.getAsset(1));this._textureSprite.y.set__(this._nextGlyph._textureSprite.y.set__(0))},set_rouletteAssetNumber:function(a){return this._currentAsset=a},get_rouletteAssetNumber:function(){return this._currentAsset},getAsset:function(a){null==a&&(a=0);var b="",a=this._currentAsset+a,a=e.WorkinUtils.clamp(a,0,3,!0)|0;switch(a){case 0:b="club";break;case 1:b="diamond";break;case 2:b="heart";break;case 3:b="spade"}return b},get_flagStopSpin:function(){return this._flagStopSpin},__class__:g.screens.minigames.Roulette});g.transitions={};g.transitions._TransitionBase={};g.transitions._TransitionBase.TransitionState=l["com.disney_channel.star_wars_rebels.chopper_chase.ui.transitions._TransitionBase.TransitionState"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,ui,transitions,_TransitionBase,TransitionState".split(","),__constructs__:["_STATE_HIDDEN","_STATE_IN","_STATE_IDLE","_STATE_OUT"]};g.transitions._TransitionBase.TransitionState._STATE_HIDDEN=["_STATE_HIDDEN",0];g.transitions._TransitionBase.TransitionState._STATE_HIDDEN.toString=o;g.transitions._TransitionBase.TransitionState._STATE_HIDDEN.__enum__=g.transitions._TransitionBase.TransitionState;g.transitions._TransitionBase.TransitionState._STATE_IN=["_STATE_IN",1];g.transitions._TransitionBase.TransitionState._STATE_IN.toString=o;g.transitions._TransitionBase.TransitionState._STATE_IN.__enum__=g.transitions._TransitionBase.TransitionState;g.transitions._TransitionBase.TransitionState._STATE_IDLE=["_STATE_IDLE",2];g.transitions._TransitionBase.TransitionState._STATE_IDLE.toString=o;g.transitions._TransitionBase.TransitionState._STATE_IDLE.__enum__=g.transitions._TransitionBase.TransitionState;g.transitions._TransitionBase.TransitionState._STATE_OUT=["_STATE_OUT",3];g.transitions._TransitionBase.TransitionState._STATE_OUT.toString=o;g.transitions._TransitionBase.TransitionState._STATE_OUT.__enum__=g.transitions._TransitionBase.TransitionState;g.transitions.TransitionBase=function(a,b,f,c){null==c&&(c="");null==f&&(f=!1);null==b&&(b=!0);this._transitionId=c;this._flagOutOnly=f;this.flagDispose=!1;this._dispatcher=n.WMEventDispatcher.request();j.Element.call(this,{asset:a});b?this._setState(g.transitions._TransitionBase.TransitionState._STATE_HIDDEN):this._flagOutOnly?this._setState(g.transitions._TransitionBase.TransitionState._STATE_OUT):this._setState(g.transitions._TransitionBase.TransitionState._STATE_IN)};l["com.disney_channel.star_wars_rebels.chopper_chase.ui.transitions.TransitionBase"]=g.transitions.TransitionBase;g.transitions.TransitionBase.__name__="com,disney_channel,star_wars_rebels,chopper_chase,ui,transitions,TransitionBase".split(",");g.transitions.TransitionBase.__super__=j.Element;g.transitions.TransitionBase.prototype=v(j.Element.prototype,{_setState:function(a){this._state=a;switch(this._state[1]){case 0:this.hide()}},show:function(){this._mc.set_visible(!0)},hide:function(){this._mc.set_visible(!1)},start:function(){this.show();this._setState(g.transitions._TransitionBase.TransitionState._STATE_IN)},update:function(a){j.Element.prototype.update.call(this,a)},get_isOutro:function(){return this._state==g.transitions._TransitionBase.TransitionState._STATE_OUT},get_dispatcher:function(){return this._dispatcher},dispose:function(){this._state=null;j.Element.prototype.dispose.call(this);this._dispatcher.dispose();this._mc=this._dispatcher=null},__class__:g.transitions.TransitionBase});d={_World:{}};d._World.WORLD_STATE=l["com.disney_channel.star_wars_rebels.chopper_chase.world._World.WORLD_STATE"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,world,_World,WORLD_STATE".split(","),__constructs__:["_STATE_INITIALIZING","_STATE_GAMEPLAY","_STATE_ENDGAME"]};d._World.WORLD_STATE._STATE_INITIALIZING=["_STATE_INITIALIZING",0];d._World.WORLD_STATE._STATE_INITIALIZING.toString=o;d._World.WORLD_STATE._STATE_INITIALIZING.__enum__=d._World.WORLD_STATE;d._World.WORLD_STATE._STATE_GAMEPLAY=["_STATE_GAMEPLAY",1];d._World.WORLD_STATE._STATE_GAMEPLAY.toString=o;d._World.WORLD_STATE._STATE_GAMEPLAY.__enum__=d._World.WORLD_STATE;d._World.WORLD_STATE._STATE_ENDGAME=["_STATE_ENDGAME",2];d._World.WORLD_STATE._STATE_ENDGAME.toString=o;d._World.WORLD_STATE._STATE_ENDGAME.__enum__=d._World.WORLD_STATE;d.World=function(a){this._poolManager=e.WorkinCloud.get_instance().get_poolManager();this._dispatcher=n.WMEventDispatcher.request();this._timeline=a;e.WorkinCloud.get_instance().get_pool().tracePoolReport();this._elementManager=new j.ElementManager(this._timeline,c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y);this._elementManager.addLayer(c.ConstantsApp.LAYER_WORLD,!0);this._elementManager.addLayer(c.ConstantsApp.LAYER_BG,!0);this._elementManager.addLayer(c.ConstantsApp.LAYER_PLAYER,!0);this._elementManager.addLayer(c.ConstantsApp.LAYER_OVER,!0);this._elementManager.addLayer(c.ConstantsApp.LAYER_FG,!0);this._elementManager.addLayer(c.ConstantsApp.LAYER_UI,!0);this._elementManager.addLayer(c.ConstantsApp.LAYER_MINI_GAME_BG,!0);this._elementManager.addLayer(c.ConstantsApp.LAYER_MINI_GAME_GAMEPLAY,!0);this._elementManager.addLayer(c.ConstantsApp.LAYER_MINI_GAME_OVERLAY,!0);this._minigame=null;this._screenShakeOriginX=this._elementManager.get_camera().get_pos().x;this._screenShakeOriginY=this._elementManager.get_camera().get_pos().y;this._screenShakeMagnitude=d.World.BASE_SHAKE_STR;this._effectTimer=0;d.World.MOUSE_DOWN=!1;d.World.MOUSE_POS=h.WorkinPoint.request();this._addEventListeners();e.WorkinCloud.get_instance().stack([q(this,this._initWorld),q(this,this._onGenerationComplete)]);this._setState(d._World.WORLD_STATE._STATE_INITIALIZING)};l["com.disney_channel.star_wars_rebels.chopper_chase.world.World"]=d.World;d.World.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,World".split(",");d.World.get_tweener=function(){null==d.World.__tween&&(d.World.__tween=h.tween.WorkinTweener.request());return d.World.__tween};d.World.prototype={_isOverPause:function(a,b){return a>c.ConstantsApp.get_CANVAS_LEFT()&&a<c.ConstantsApp.get_CANVAS_LEFT()+75&&b<c.ConstantsApp.get_CANVAS_BOTTOM()&&b>c.ConstantsApp.get_CANVAS_BOTTOM()-75},_onGenerationComplete:function(){var a=this;e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE));this._currentTrack="";R.delay(function(){a._setStage(0)},500)},_makeRandAlertTimerRecharge:function(a){a.set_timer(10+e.WorkinCloud.get_instance().get_random().getRandomFloat(0,10)-this._currentLevel.difficulty+this._sideAlerts.length)},_makeRandAlertTimer:function(a,b){null==b&&(b=!1);b?a.set_timer(e.WorkinCloud.get_instance().get_random().getRandomFloat(4.8,5.5)):(a.set_timer(e.WorkinCloud.get_instance().get_random().getRandomFloat(2.5,10)),0<this._currentLevel.difficulty&&a.set_timer(a.get_timer()/this._currentLevel.difficulty))},_placeArrow:function(a,b,f){for(var m=0,p=this._guideArrows;m<p.length;){var h=p[m];++m;if(h.get_pos().x==a&&h.get_pos().y==b)return h}var g,m=1,p=0;switch(f[1]){case 3:g=c.MapDirection.WEST;break;case 2:g=c.MapDirection.EAST;m=-1;break;case 0:g=c.MapDirection.NORTH;p=90;break;case 1:g=c.MapDirection.SOUTH,p=90,m=-1}f=e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION);h=c.MapData.get_instance().locations.get(f);a=this._elementManager.addElement(new d.elements.ExitClock({asset:"SWR_Alert_low",layer:c.ConstantsApp.LAYER_UI,x:a,y:b,originY:0.5},f,h.possibleLocs.get(g),this._allAlerts));a.get_renderable().scaleX=m;a.get_renderable().rotation=p;this._guideArrows.push(a);return a},_checkLocations:function(a){for(var b=0,f=0;f<a.length;){var m=a[f];++f;if(0<e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_ALERT_COUNT_+m)&&1!=b){b=1;break}}return b},_checkGuideArrows:function(){for(;0<this._guideArrows.length;)this._elementManager.removeElement(this._guideArrows[0],!0),this._guideArrows.splice(0,1);var a=c.MapData.get_instance().locations.get(e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION)),b;b=this._checkLocations(a.possibleLocs.get(c.MapDirection.NORTH));0<b&&(b=a.exits.get(c.MapDirection.NORTH),this._placeArrow(b.get_locX(),b.get_locY(),b.get_facing()),null);b=this._checkLocations(a.possibleLocs.get(c.MapDirection.SOUTH));0<b&&(b=a.exits.get(c.MapDirection.SOUTH),this._placeArrow(b.get_locX(),b.get_locY(),b.get_facing()),null);b=this._checkLocations(a.possibleLocs.get(c.MapDirection.EAST));0<b&&(b=a.exits.get(c.MapDirection.EAST),this._placeArrow(b.get_locX(),b.get_locY(),b.get_facing()),null);b=this._checkLocations(a.possibleLocs.get(c.MapDirection.WEST));0<b&&(b=a.exits.get(c.MapDirection.WEST),this._placeArrow(b.get_locX(),b.get_locY(),b.get_facing()),null)},_splitDialogueString:function(a){for(var a=a.split("/"),b=[],f={},c=0,d=a.length;c<d;){var e=c++;0!=a[e].length&&(a[e].toUpperCase()==a[e]&&4==a[e].length?f.character=a[e]:-1!=a[e].indexOf("MOOD:")?f.mood=y.substr(a[e],5,null):f.message=a[e],null!=f.message&&(null==f.character&&(f.character=""),b.push(f),f={}))}return b},_turnOffIdentialLocAlerts:function(a){for(var b=0,f=this._allAlerts;b<f.length;){var m=f[b];++b;m.get_active()&&m.get_location()==a.get_location()&&m.get_x()==a.get_x()&&m.get_y()==a.get_y()&&m!=a&&(m.set_stage(0),m.set_active(!1),this._makeRandAlertTimer(m),e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DESPAWN_ALERT,{targetTile:m,noPenalty:!0})))}},_setStage:function(a){this._stage=a;a=[];this._loseMood=this._losePerson=this._loseString="";this._activeAlerts=[];this._sideAlerts=[];this._objectiveAlert=null;this._winsNeeded=1;if(this._stage>=this._currentLevel.steps.length)if(0>=this._liveAlertCount)this._setState(d._World.WORLD_STATE._STATE_ENDGAME),""!=this._currentLevel.endSting&&e.WorkinCloud.get_instance().get_sound().playSound("sting_"+t.string(this._currentLevel.endSting)),a=this._splitDialogueString(this._currentLevel.win),a[0].end="WIN";else{var b="We're almost done, CHOPPER! Take care of the remaining tasks!",f="positive";switch(this._currentNPC){case "HERA":b="Well done, CHOPPER,  but there's still some problems to tackle!";break;case "KANN":b="Good work. Just a few loose ends to tie up now.";break;case "SABN":b="Not bad at all! Though it looks like there's still some work to be done.";f="help";break;case "ZEBB":b="Nice one! Just get those last alerts done and we'll move on!"}this._winsNeeded=this._liveAlertCount;this._stage=this._currentLevel.steps.length-
1|0;this._isWrappingUp=!0;this._npcNormalTimer=this._npcUrgentTimer=3.4;e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{time:5,message:b,mood:f,character:this._currentNPC}))}else{a=this._splitDialogueString(this._currentLevel.steps[this._stage].intro);b=this._splitDialogueString(this._currentLevel.steps[this._stage].lose);this._loseString=b[0].message;this._losePerson=b[0].character;this._loseMood=b[0].mood;if(1==this._currentLevel.steps[this._stage].type){f=this._currentLevel.steps[this._stage].minigames.split(",");for(b=0;b<f.length;){var m=f[b];++b;this._activeAlerts.push(this._allAlerts[t.parseInt(m)])}if(this._currentLevel.steps[this._stage].sidequests){f=this._currentLevel.steps[this._stage].sidequests.split(",");for(b=0;b<f.length;)m=f[b],++b,this._sideAlerts.push(this._allAlerts[t.parseInt(m)])}}else if(2<=this._currentLevel.steps[this._stage].type&&(this._objectiveAlert=this._allAlerts[t.parseInt(this._currentLevel.steps[this._stage].minigames)],this._objectiveAlert.set_missionObjective(!0),this._turnOffIdentialLocAlerts(this._objectiveAlert),!this._objectiveAlert.get_active())){b=m=0;for(f=this._allAlerts;b<f.length;){var p=f[b];++b;p.get_active()&&(m+=1)}this._objectiveAlert.set_timer(m*this._currentLevel.difficulty);if(this._currentLevel.steps[this._stage].sidequests){f=this._currentLevel.steps[this._stage].sidequests.split(",");for(b=0;b<f.length;)m=f[b],++b,this._activeAlerts.push(this._allAlerts[t.parseInt(m)])}if(0==this._objectiveAlert.get_timer()){b=0;for(f=this._activeAlerts;b<f.length;)m=f[b],++b,m.get_active()||m.set_timer(0.75*m.get_timer())}}this._winsNeeded=t.parseInt(this._currentLevel.steps[this._stage].wins);b=this._currentLevel.steps[this._stage];switch(b.effect){case "turbulence":"music_attack"==this._currentTrack||"music_tense"==this._currentTrack||"music_imperial_escape"==this._currentTrack||(this._currentTrack="GHOST"==this._currentLevel.loc?"music_exciting":"music_attack");break;case "attacked":this._currentTrack="music_attack";break;case "selfdestruct":this._currentTrack="music_tense";break;case "URGENT":this._currentTrack="music_imperial_escape";break;case "poweroutage":this._currentTrack="music_mystery"}null!=this._currentLevel.steps[this._stage].music&&(this._currentTrack=this._currentLevel.steps[this._stage].music);""!=this._currentTrack&&e.WorkinCloud.get_instance().get_sound().playMusic(this._currentTrack,0.5);"poweroutage"==this._currentLevel.steps[this._stage].effect?this._overlayEffect.get_renderable().alpha=0.4:this._overlayEffect.get_renderable().alpha=0;"selfdestruct"==this._currentLevel.steps[this._stage].effect&&(this._effectTimer=0);null!=this._currentLevel.steps[this._stage].sting&&e.WorkinCloud.get_instance().get_sound().playSound("sting_"+this._currentLevel.steps[this._stage].sting)}if(!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TESTING_MINIGAMES))for(b=0;b<a.length;)m=a[b],++b,this._currentNPC=m.character,m.time=5,this._npcNormalTimer=this._npcUrgentTimer=3.4,e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,m));null},_clearAllAlerts:function(){for(var a=0,b=this._allAlerts;a<b.length;){var f=b[a];++a;f.get_active()&&(f.set_active(!1),e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_ALERT_COUNT_+f.get_location(),-1),0<f.get_stage()&&e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+f.get_location(),-1),1<f.get_stage()&&e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+f.get_location(),-1),this._makeRandAlertTimer(f));this._liveAlertCount=0}},_executeEndScript:function(){switch(this._currentLevel.steps[this._stage].event){case "2-1-2-LandOnShip":e.WorkinCloud.get_instance().get_sound().playMusic("music_imperial",0.5);this._currentTrack="music_imperial";this._swapMaps(c.ConstantsApp.LOC_STORAGE,"IMPERIAL");this._chopper.setNewTilePos(13,1,!0);this._chopper.get_renderable().visible=!0;this._currentLevel.loc="IMPERIAL";this._clearAllAlerts();break;case "2-2-1-SneakToHangar":this._swapMaps(c.ConstantsApp.LOC_SECURITY,"IMPERIAL");this._chopper.setNewTilePos(10,1,!0);this._chopper.get_renderable().visible=!0;this._clearAllAlerts();"GHOST"==this._currentLevel.loc&&(this._currentLevel.loc="IMPERIAL",e.WorkinCloud.get_instance().get_sound().playMusic("music_imperial",0.5),this._currentTrack="music_imperial");break;case "2-2-4-FlyToGhost":this._swapMaps(c.ConstantsApp.LOC_CARGO,"GHOST");this._chopper.setNewTilePos(4,7,!0);this._chopper.get_renderable().visible=!0;this._currentLevel.loc="GHOST";this._clearAllAlerts();break;case "4-1-1-LandOnShip":e.WorkinCloud.get_instance().get_sound().playMusic("music_imperial",0.5);this._currentTrack="music_imperial";this._swapMaps(c.ConstantsApp.LOC_SECURITY,"IMPERIAL");this._chopper.setNewTilePos(10,1,!0);this._chopper.get_renderable().visible=!0;this._currentLevel.loc="IMPERIAL";this._clearAllAlerts();break;case "4-1-4-CorvetteHit":e.WorkinCloud.get_instance().get_sound().stopMusic();e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit");this._shakeTimer=3;this._screenShakeMagnitude=5;this._clearAllAlerts();break;case "5-2-1-ToDetention":this._swapMaps(c.ConstantsApp.LOC_DETENTION,"IMPERIAL");this._chopper.setNewTilePos(1,1,!0);this._chopper.get_renderable().visible=!0;this._clearAllAlerts();break;case "5-2-3-ToTrash":this._swapMaps(c.ConstantsApp.LOC_DISPOSAL,"IMPERIAL");this._chopper.setNewTilePos(10,1,!0);this._chopper.get_renderable().visible=!0;this._clearAllAlerts();break;case "5-2-5-ToHangar":this._swapMaps(c.ConstantsApp.LOC_HANGAR,"IMPERIAL");this._chopper.setNewTilePos(13,6,!0);this._chopper.get_renderable().visible=!0;this._currentLevel.loc="IMPERIAL";this._clearAllAlerts();e.WorkinCloud.get_instance().get_sound().playMusic("music_imperial",0.5);this._currentTrack="music_imperial";break;case "8-2-4-ToWorkshop":this._swapMaps(c.ConstantsApp.LOC_HALLWAY_3,"IMPERIAL");this._chopper.setNewTilePos(12,7,!0);this._chopper.get_renderable().visible=!0;this._clearAllAlerts();break;default:null}},_populateAlertMarkers:function(){e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+c.ConstantsApp.LOC_COCKPIT,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+
c.ConstantsApp.LOC_COCKPIT,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+c.ConstantsApp.LOC_COCKPIT,0);this._allAlerts.push(new d.data.AlertTile(8,2,!1,"F",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_COCKPIT));this._allAlerts.push(new d.data.AlertTile(6,8,!1,"H",d.data.InteractDirection.UP,c.ConstantsApp.LOC_COCKPIT));this._allAlerts.push(new d.data.AlertTile(4,2,!1,"J",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_COCKPIT));e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+
c.ConstantsApp.LOC_ENGINE,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+c.ConstantsApp.LOC_ENGINE,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+c.ConstantsApp.LOC_ENGINE,0);this._allAlerts.push(new d.data.AlertTile(4,2,!1,"B",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_ENGINE));this._allAlerts.push(new d.data.AlertTile(8,6,!1,"A",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_ENGINE));e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+
c.ConstantsApp.LOC_HALLWAY,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+c.ConstantsApp.LOC_HALLWAY,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+c.ConstantsApp.LOC_HALLWAY,0);this._allAlerts.push(new d.data.AlertTile(12,3,!1,"I",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY));this._allAlerts.push(new d.data.AlertTile(5,3,!1,"D",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY));this._allAlerts.push(new d.data.AlertTile(6,6,!1,"A",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY));e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+c.ConstantsApp.LOC_CARGO,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+c.ConstantsApp.LOC_CARGO,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+c.ConstantsApp.LOC_CARGO,0);this._allAlerts.push(new d.data.AlertTile(14,6,!1,"G",d.data.InteractDirection.LEFT,c.ConstantsApp.LOC_CARGO));this._allAlerts.push(new d.data.AlertTile(4,5,!1,"E",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_CARGO));this._allAlerts.push(new d.data.AlertTile(3,2,!1,"J",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_CARGO));this._allAlerts.push(new d.data.AlertTile(9,7,!1,"B",d.data.InteractDirection.LEFT,c.ConstantsApp.LOC_CARGO));e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+c.ConstantsApp.LOC_OBSERVATION,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+c.ConstantsApp.LOC_OBSERVATION,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+
c.ConstantsApp.LOC_OBSERVATION,0);this._allAlerts.push(new d.data.AlertTile(5,4,!1,"C",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_OBSERVATION));this._allAlerts.push(new d.data.AlertTile(8,7,!1,"B",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_OBSERVATION));e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+c.ConstantsApp.LOC_STORAGE,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+c.ConstantsApp.LOC_STORAGE,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+
c.ConstantsApp.LOC_STORAGE,0);this._allAlerts.push(new d.data.AlertTile(6,2,!1,"J",d.data.InteractDirection.LEFT,c.ConstantsApp.LOC_STORAGE));this._allAlerts.push(new d.data.AlertTile(8,2,!1,"J",d.data.InteractDirection.RIGHT,c.ConstantsApp.LOC_STORAGE));this._allAlerts.push(new d.data.AlertTile(11,2,!1,"J",d.data.InteractDirection.LEFT,c.ConstantsApp.LOC_STORAGE));this._allAlerts.push(new d.data.AlertTile(13,0,!1,"I",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_STORAGE));e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+
c.ConstantsApp.LOC_SECURITY,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+c.ConstantsApp.LOC_SECURITY,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+c.ConstantsApp.LOC_SECURITY,0);this._allAlerts.push(new d.data.AlertTile(3,2,!1,"H",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_SECURITY));e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+c.ConstantsApp.LOC_HANGAR,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+
c.ConstantsApp.LOC_HANGAR,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+c.ConstantsApp.LOC_HANGAR,0);this._allAlerts.push(new d.data.AlertTile(0,3,!1,"A",d.data.InteractDirection.RIGHT,c.ConstantsApp.LOC_HANGAR));this._allAlerts.push(new d.data.AlertTile(5,8,!1,"E",d.data.InteractDirection.RIGHT,c.ConstantsApp.LOC_HANGAR));this._allAlerts.push(new d.data.AlertTile(4,5,!1,"E2",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_CARGO));this._allAlerts.push(new d.data.AlertTile(8,6,!1,"A2",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_ENGINE));this._allAlerts.push(new d.data.AlertTile(14,6,!1,"G2",d.data.InteractDirection.LEFT,c.ConstantsApp.LOC_CARGO));this._allAlerts.push(new d.data.AlertTile(13,7,!1,"J",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_SECURITY));e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+c.ConstantsApp.LOC_HALLWAY_3,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+c.ConstantsApp.LOC_HALLWAY_3,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+
c.ConstantsApp.LOC_HALLWAY_3,0);this._allAlerts.push(new d.data.AlertTile(3,3,!1,"A",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(7,3,!1,"A",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(10,3,!1,"A",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(6,3,!1,"B",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(0,4,!1,"B",d.data.InteractDirection.RIGHT,c.ConstantsApp.LOC_HANGAR));this._allAlerts.push(new d.data.AlertTile(2,2,!1,"B",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_SECURITY));this._allAlerts.push(new d.data.AlertTile(8,1,!1,"B",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_SECURITY));this._allAlerts.push(new d.data.AlertTile(3,3,!1,"A2",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(7,3,!1,"A2",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(10,3,!1,"A2",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(3,2,!1,"D",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_SECURITY));this._allAlerts.push(new d.data.AlertTile(10,0,!1,"E",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_SECURITY));this._allAlerts.push(new d.data.AlertTile(10,0,!1,"J",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_SECURITY));e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+
c.ConstantsApp.LOC_DETENTION,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+c.ConstantsApp.LOC_DETENTION,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+c.ConstantsApp.LOC_DETENTION,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_ALERT_COUNT_+c.ConstantsApp.LOC_DISPOSAL,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+c.ConstantsApp.LOC_DISPOSAL,0);e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+
c.ConstantsApp.LOC_DISPOSAL,0);this._allAlerts.push(new d.data.AlertTile(5,5,!1,"B3",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_DETENTION));this._allAlerts.push(new d.data.AlertTile(6,1,!1,"B3",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_DISPOSAL));this._allAlerts.push(new d.data.AlertTile(8,4,!1,"B3",d.data.InteractDirection.UP,c.ConstantsApp.LOC_HANGAR));this._allAlerts.push(new d.data.AlertTile(13,0,!1,"J",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_STORAGE));this._allAlerts.push(new d.data.AlertTile(13,7,!1,"J",d.data.InteractDirection.LEFT,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(3,2,!1,"A",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_SECURITY));this._allAlerts.push(new d.data.AlertTile(5,4,!1,"B2",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HANGAR));this._allAlerts.push(new d.data.AlertTile(7,4,!1,"B2",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HANGAR));this._allAlerts.push(new d.data.AlertTile(7,6,!1,"B2",d.data.InteractDirection.UP,c.ConstantsApp.LOC_HANGAR));this._allAlerts.push(new d.data.AlertTile(10,0,!1,"I",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_SECURITY));this._allAlerts.push(new d.data.AlertTile(3,6,!1,"H",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(7,6,!1,"H",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(11,6,!1,"H",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(5,5,!1,"B2",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_DISPOSAL));this._allAlerts.push(new d.data.AlertTile(4,2,!1,"J",d.data.InteractDirection.RIGHT,c.ConstantsApp.LOC_DISPOSAL));this._allAlerts.push(new d.data.AlertTile(13,7,!1,"I",d.data.InteractDirection.LEFT,c.ConstantsApp.LOC_HALLWAY_3));this._allAlerts.push(new d.data.AlertTile(4,2,!1,"A2",d.data.InteractDirection.RIGHT,c.ConstantsApp.LOC_DISPOSAL));this._allAlerts.push(new d.data.AlertTile(1,1,!1,"J",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_DETENTION));this._allAlerts.push(new d.data.AlertTile(10,0,!1,"J",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_DISPOSAL));this._allAlerts.push(new d.data.AlertTile(4,2,!1,"A",d.data.InteractDirection.RIGHT,c.ConstantsApp.LOC_DISPOSAL));this._allAlerts.push(new d.data.AlertTile(1,1,!1,"I",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_DETENTION));this._allAlerts.push(new d.data.AlertTile(10,0,!1,"I",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_DISPOSAL));this._allAlerts.push(new d.data.AlertTile(8,2,!1,"F2",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_COCKPIT));this._allAlerts.push(new d.data.AlertTile(4,5,!1,"E4",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_CARGO));this._allAlerts.push(new d.data.AlertTile(4,5,!1,"E3",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_CARGO));this._allAlerts.push(new d.data.AlertTile(5,8,!1,"E3",d.data.InteractDirection.RIGHT,c.ConstantsApp.LOC_HANGAR));this._allAlerts.push(new d.data.AlertTile(10,0,!1,"E3",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_SECURITY));this._allAlerts.push(new d.data.AlertTile(12,2,!1,"H",d.data.InteractDirection.LEFT,c.ConstantsApp.LOC_DISPOSAL));this._allAlerts.push(new d.data.AlertTile(3,6,!1,"J",d.data.InteractDirection.DOWN,c.ConstantsApp.LOC_HALLWAY_3));for(var a=0,b=this._allAlerts.length;a<b;)this._makeRandAlertTimer(this._allAlerts[a++],!0)},_initWorld:function(){this._currentLevel=e.WorkinCloud.get_instance().sharedObjectGetData(c.ConstantsApp.OBJECT_MISSION).steps[e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_LEVEL)];this._markerBobHigh=this._markerBobMed=this._markerBob=0;e.WorkinCloud.get_instance().setInt(c.ConstantsApp.INT_LIVES,0);this._stage=this._npcUrgentTimer=this._npcNormalTimer=this._chopperShutUpTimer=this._shakeTimer=this._liveAlertCount=this._wins=0;this._background=this._elementManager.addElement(new j.Element({asset:"SWR_Background1",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,originX:0.5,originY:0.5,layer:c.ConstantsApp.LAYER_BG}));this._elevator=this._elementManager.addElement(new j.Element({layer:c.ConstantsApp.LAYER_BG}));this._backgroundOverElevator=this._elementManager.addElement(new j.Element({layer:c.ConstantsApp.LAYER_BG}));this._map=this._elementManager.addElement(new d.elements.Map({layer:c.ConstantsApp.LAYER_PLAYER,x:32,y:32,z:32},15,9,64));this._waypoint=this._elementManager.addElement(new j.AnimatedElement({layer:c.ConstantsApp.LAYER_PLAYER,origin:0.5,asset:"crosshair-006"}));this._waypoint.get_renderable().visible=!1;this._waypoint.addAnimationFrames("Click","crosshair-001,crosshair-002,crosshair-003,crosshair-004,crosshair-005,crosshair-006".split(","));this._alertMarkers=[];this._drones=[];this._npcs=[];this._allAlerts=[];this._activeAlerts=[];this._sideAlerts=[];this._guideArrows=[];this._populateAlertMarkers();this._elementManager.addElement(this._chopper=new d.elements.Chopper({layer:c.ConstantsApp.LAYER_PLAYER,asset:"SWR_Chopper_DOWN",originX:0.5,originY:0.75},this._map,6,3));this._chopper.addAnimationFrames("n",["SWR_Chopper_UP"]);this._chopper.addAnimationFrames("ne",["SWR_Chopper_UP_RIGHT"]);this._chopper.addAnimationFrames("e",["SWR_Chopper_Right"]);this._chopper.addAnimationFrames("se",["SWR_Chopper_Down_Right"]);this._chopper.addAnimationFrames("s",["SWR_Chopper_DOWN"]);this._chopper.addAnimationFrames("sw",["SWR_Chopper_Down_Left"]);this._chopper.addAnimationFrames("w",["SWR_Chopper_LEft"]);this._chopper.addAnimationFrames("nw",["SWR_Chopper_UP_Left"]);this._chopper.addAnimationFrames("spin","SWR_Chopper_UP,SWR_Chopper_UP_RIGHT,SWR_Chopper_Right,SWR_Chopper_Down_Right,SWR_Chopper_DOWN,SWR_Chopper_Down_Left,SWR_Chopper_LEft,SWR_Chopper_UP_Left".split(","));this._isWrappingUp=this._isMINIGAMEUP=this._tracking=!1;this._foregroundA=this._elementManager.addElement(new j.Element({asset:"",x:0,y:0,layer:c.ConstantsApp.LAYER_FG}));this._foregroundB=this._elementManager.addElement(new j.Element({asset:"",x:0,y:0,layer:c.ConstantsApp.LAYER_FG}));this._overlayEffect=this._elementManager.addElement(new j.Element({asset:"Effect-DARKNESS",x:c.ConstantsApp.STAGE_CENTER_X,y:c.ConstantsApp.STAGE_CENTER_Y,layer:c.ConstantsApp.LAYER_FG,origin:0.5}));this._overlayEffect.get_renderable().alpha=0;e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_SHIP_LOCATION," ");switch(this._currentLevel.loc){case "GHOST":this._swapMaps(c.ConstantsApp.LOC_COCKPIT);this._chopper.setNewTilePos(6,3,!0);break;case "IMPERIAL_HANGAR":e.WorkinCloud.get_instance().get_sound().playMusic("music_imperial",0.5);this._currentTrack="music_imperial";this._swapMaps(c.ConstantsApp.LOC_HANGAR);this._chopper.setNewTilePos(5,3,!0);break;case "IMPERIAL_DETENTION":e.WorkinCloud.get_instance().get_sound().playMusic("music_imperial",0.5);this._currentTrack="music_imperial";this._swapMaps(c.ConstantsApp.LOC_HALLWAY_3);this._chopper.setNewTilePos(5,8,!0);break;case "IMPERIAL_TRASH":e.WorkinCloud.get_instance().get_sound().playMusic("music_imperial",0.5);this._currentTrack="music_imperial";this._swapMaps(c.ConstantsApp.LOC_DISPOSAL);this._chopper.setNewTilePos(7,2,!0);break;default:e.WorkinCloud.get_instance().get_sound().playMusic("music_imperial",0.5),this._currentTrack="music_imperial",this._swapMaps(c.ConstantsApp.LOC_STORAGE),this._chopper.setNewTilePos(5,3,!0)}},_swapMaps:function(a){if(e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION)!=a){for(;0<this._npcs.length;)this._elementManager.removeElement(this._npcs.pop(),!0);for(;0<this._drones.length;)this._elementManager.removeElement(this._drones.pop(),!0);d.World.__tween.stopAllTweens();this._chopper.isMoving=!1;this._background.get_renderable().scaleX=1;this._background.setOrigin(0.5,0.5);this._background.get_pos().to(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y);this._elevator.get_pos().to(1024,768);this._elevator.setOrigin(0,0);this._backgroundOverElevator.get_pos().to(1024,768);this._backgroundOverElevator.setOrigin(0,0);this._foregroundA.get_pos().to(1024,768);this._foregroundA.setOrigin(0,0);this._foregroundA.get_renderable().scaleX=1;this._foregroundA.get_pos().to(1024,768);this._foregroundA.setOrigin(0,0);this._foregroundB.get_pos().to(1024,768);this._foregroundB.setOrigin(0,0);var b=c.MapData.get_instance().locations.get(a),f=b.get_mapData(),m=this._currentLevel.steps[this._stage],p={loc:c.ConstantsApp.LOC_COCKPIT,x:0,y:6,pose:"sit"};m.ezra&&(m.ezra.x&&m.ezra.y&&m.ezra.loc?p=m.ezra:m.ezra.pose?p.pose=m.ezra.pose:m.ezra.mood&&(p.mood=m.ezra.mood));var h={loc:c.ConstantsApp.LOC_COCKPIT,x:0,y:4,pose:"sit"};m.hera&&(m.hera.x&&m.hera.y&&m.hera.loc?h=m.hera:m.hera.pose?h.pose=m.hera.pose:m.hera.mood&&(h.mood=m.hera.mood));var g={loc:c.ConstantsApp.LOC_COCKPIT,x:1,y:4,pose:"sit"};m.kanan&&(m.kanan.x&&m.kanan.y&&m.kanan.loc?g=m.kanan:m.kanan.pose?g.pose=m.kanan.pose:m.kanan.mood&&(g.mood=m.kanan.mood));var i={loc:c.ConstantsApp.LOC_COCKPIT,x:1,y:6,pose:"sit"};m.sabine&&(m.sabine.x&&m.sabine.y&&m.sabine.loc?i=m.sabine:m.sabine.pose?i.pose=m.sabine.pose:m.sabine.mood&&(i.mood=m.sabine.mood));var j={loc:c.ConstantsApp.LOC_OBSERVATION,x:10,y:2};m.zeb&&(m.zeb.x&&m.zeb.y&&m.zeb.loc?j=m.zeb:m.zeb.pose?j.pose=m.zeb.pose:m.zeb.mood&&(j.mood=m.zeb.mood));for(var m=0,k=f.length;m<k;){var l=m++,n=l%15,o=Math.floor(l/15);if(p.x==n&&p.y==o&&p.loc==a)var q=y.substr(f,0,l),f=y.substr(f,l+1,f.length),f=q+"E"+f;h.x==n&&h.y==o&&h.loc==a&&(q=y.substr(f,0,l),f=y.substr(f,l+1,f.length),f=q+"H"+f);g.x==n&&g.y==o&&g.loc==a&&(q=y.substr(f,0,l),f=y.substr(f,l+1,f.length),f=q+"K"+f);i.x==n&&i.y==o&&i.loc==a&&(q=y.substr(f,0,l),f=y.substr(f,l+1,f.length),f=q+"S"+f);j.x==n&&j.y==o&&j.loc==a&&(q=y.substr(f,0,l),f=y.substr(f,l+1,f.length),f=q+"Z"+f)}this._background.setTextureAsset(b.bg.asset);b.bg.reverse&&(this._background.get_renderable().scaleX=-1);null!=b.fg1&&(null!=b.fg1.origin&&(b.fg1.originX=b.fg1.origin,b.fg1.originY=b.fg1.origin),this._foregroundA.setOrigin(b.fg1.originX,b.fg1.originY),this._foregroundA.setTextureAsset(b.fg1.asset),this._foregroundA.get_pos().to(b.fg1.x,b.fg1.y),b.fg1.reverse&&(this._foregroundA.get_renderable().scaleX=-1),null);null!=b.fg2&&(null!=b.fg2.origin&&(b.fg2.originX=b.fg2.origin,b.fg2.originY=b.fg2.origin),this._foregroundB.setOrigin(b.fg2.originX,b.fg2.originY),this._foregroundB.setTextureAsset(b.fg2.asset),this._foregroundB.get_pos().to(b.fg2.x,b.fg2.y),b.fg2.reverse&&(this._foregroundB.get_renderable().scaleX=-1));p=this._currentLevel.specialBG;b.specialBGs.exists(p)&&(b=b.specialBGs.get(p),null!=b.origin?(b.originX=b.origin,b.originY=b.origin):(null==b.originX&&(b.originX=0),null==b.originY&&(b.originY=0)),this._backgroundOverElevator.setOrigin(b.originX,b.originY),this._backgroundOverElevator.setTextureAsset(b.asset),this._backgroundOverElevator.get_pos().to(b.x,b.y),b.reverse&&(this._backgroundOverElevator.get_renderable().scaleX=-1));this._map.redefineMap(f);switch(a){case c.ConstantsApp.LOC_HALLWAY_1:this._drones.push(this._elementManager.addElement(new d.elements.PatrolDrone({layer:c.ConstantsApp.LAYER_PLAYER,asset:"SWRCC_Characters_Mouse_Ver",originX:0.5,originY:0.5},this._map,2,3,[[2,3],[12,3],[12,5],[2,5]])));break;case c.ConstantsApp.LOC_HALLWAY_2:this._drones.push(this._elementManager.addElement(new d.elements.PatrolDrone({layer:c.ConstantsApp.LAYER_PLAYER,asset:"SWRCC_Characters_Mouse_Ver",originX:0.5,originY:0.5},this._map,2,3,[[2,3],[12,3],[12,5],[2,5]])));break;case c.ConstantsApp.LOC_SECURITY:this._drones.push(this._elementManager.addElement(new d.elements.PatrolDrone({layer:c.ConstantsApp.LAYER_PLAYER,asset:"SWRCC_Characters_Mouse_Ver",originX:0.5,originY:0.5},this._map,11,3,[[11,3],[7,3],[2,6],[7,3],[11,3],[11,8]])));break;case c.ConstantsApp.LOC_STORAGE:this._drones.push(this._elementManager.addElement(new d.elements.PatrolDrone({layer:c.ConstantsApp.LAYER_PLAYER,asset:"SWRCC_Characters_Mouse_Ver",originX:0.5,originY:0.5},this._map,1,7,[[1,7],[13,7]])))}e.WorkinCloud.get_instance().setString(c.ConstantsApp.STRING_SHIP_LOCATION,a);this._checkGuideArrows()}},_doStepEffects:function(a){if(null!=this._currentLevel.steps[this._stage])switch(this._currentLevel.steps[this._stage].effect){case "turbulence":this._effectTimer-=a;0>this._effectTimer&&(this._screenShakeMagnitude=e.WorkinCloud.get_instance().get_random().getRandomFloat(1,1),this._effectTimer=e.WorkinCloud.get_instance().get_random().getRandomFloat(5,8),this._shakeTimer=e.WorkinCloud.get_instance().get_random().getRandomFloat(0.5,1));break;case "attacked":this._effectTimer-=a;0.01>Math.random()&&e.WorkinCloud.get_instance().get_sound().playSound("sfx_minigame_turret",0.2);0>this._effectTimer&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.3),this._screenShakeMagnitude=e.WorkinCloud.get_instance().get_random().getRandomFloat(2,2),this._effectTimer=e.WorkinCloud.get_instance().get_random().getRandomFloat(5,8),this._shakeTimer=e.WorkinCloud.get_instance().get_random().getRandomFloat(0.5,1));break;case "selfdestruct":this._effectTimer-=a;0>this._effectTimer&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_minigame_complete",0.4),this._screenShakeMagnitude=e.WorkinCloud.get_instance().get_random().getRandomFloat(4,5),this._shakeTimer=this._effectTimer=2);break;case "poweroutage":this._effectTimer-=a,0>this._effectTimer&&(0.5<=this._overlayEffect.get_renderable().alpha?(this._overlayEffect.get_renderable().alpha=0.4,this._effectTimer=e.WorkinCloud.get_instance().get_random().getRandomFloat(0.5,7)):(this._overlayEffect.get_renderable().alpha=0.5,this._effectTimer=0.2))}},_updateScreenShake:function(a){this._isMinigameActive()&&this._minigame.get_shaking()?this._elementManager.get_camera().get_pos().to(this._screenShakeOriginX+e.WorkinCloud.get_instance().get_random().getRandomFloat(0,d.World.BASE_SHAKE_STR),this._screenShakeOriginY+e.WorkinCloud.get_instance().get_random().getRandomFloat(0,d.World.BASE_SHAKE_STR)):0<this._shakeTimer?(this._elementManager.get_camera().get_pos().to(this._screenShakeOriginX+e.WorkinCloud.get_instance().get_random().getRandomFloat(0,this._screenShakeMagnitude/2),this._screenShakeOriginY+e.WorkinCloud.get_instance().get_random().getRandomFloat(0,this._screenShakeMagnitude/2)),this._shakeTimer-=a):(this._elementManager.get_camera().get_pos().x=this._screenShakeOriginX,this._elementManager.get_camera().get_pos().y=this._screenShakeOriginY)},_chopperBurpsLikeAnIdiot:function(a,b){0>=this._chopperShutUpTimer&&(e.WorkinCloud.get_instance().get_sound().playSound("chopper_cant_move"),this._chopperShutUpTimer=1.9,this._chopper.set_fps(16),this._chopper.animate("spin"),this._animateClickPoint(a,b,!0))},_calculateMovement:function(a,b,f){null==f&&(f=!1);for(var m=this,p=h.WorkinPoint.request(),g=0,i=this._allAlerts;g<i.length;){var j=[i[g]];++g;if(j[0].get_active()&&this._minigameTile!=j[0]&&j[0].get_location()==e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION)&&(p.to(this._map.get_pos().x+j[0].get_x()*this._map.get_tileSize(),this._map.get_pos().y+j[0].get_y()*this._map.get_tileSize()),p.subtract(a,b),100>=p.get_length())){p=null;i=!1;p=j[0].get_pDir();switch(p[1]){case 3:i=this._chopper.moveIt(j[0].get_x(),j[0].get_y()+1);break;case 1:i=this._chopper.moveIt(j[0].get_x()-1,j[0].get_y());break;case 2:i=this._chopper.moveIt(j[0].get_x()+1,j[0].get_y());break;case 0:i=this._chopper.moveIt(j[0].get_x(),j[0].get_y()-1);break;case 4:p=9999;a=j[0].get_x()-1;for(g=j[0].get_x()+2;a<g;)if(b=a++,!(0>b||14<b))for(var k=j[0].get_y()-1,l=j[0].get_y()+2;k<l;){var n=k++;if(!(0>n||8<n)&&this._map.get_tiles()[b][n].get_passable()&&d.elements.Map.distanceBetweenTiles(this._map.get_tiles()[this._chopper.get_currentX()][this._chopper.get_currentY()],this._map.get_tiles()[b][n])<p)i=this._chopper.moveIt(b,n),p=d.elements.Map.distanceBetweenTiles(this._map.get_tiles()[this._chopper.get_currentX()][this._chopper.get_currentY()],this._map.get_tiles()[b][n])}}i&&(this._animateClickPoint(j[0].get_x(),j[0].get_y(),!1),0>=this._chopperShutUpTimer&&(this._chopperShutUpTimer=2.7,e.WorkinCloud.get_instance().get_sound().playSound("chopper_accept_orders_4")),this._callbackAction=function(a){return function(){m._tracking=!1;if(a[0].get_active()){var b=5;switch(a[0].get_eventToActivate()){case "A":b=7;break;case "A2":b=12;break;case "B":b=6;break;case "B2":b=14;break;case "B3":b=15;break;case "C":b=3;break;case "D":b=11;break;case "E":b=4;break;case "E2":b=10;break;case "E3":b=17;break;case "E4":b=18;break;case "F":b=1;break;case "F2":b=16;break;case "G":b=2;break;case "G2":b=13;break;case "H":b=9;break;case "I":b=8;break;case "J":b=5;break;default:b=e.WorkinCloud.get_instance().get_random().getRandomInt(1,6)}switch(b){case 1:m._screenShakeMagnitude=d.World.BASE_SHAKE_STR;m._openMinigame(d.minigames.Minigame.MINIGAME_ASTEROID_FIELD);break;case 2:m._openMinigame(d.minigames.Minigame.MINIGAME_CARGO_CRANE);break;case 3:m._screenShakeMagnitude=d.World.BASE_SHAKE_STR;m._openMinigame(d.minigames.Minigame.MINIGAME_TURRET_FIGHT);break;case 4:m._chopper.get_renderable().visible=!1;"GHOST"==m._currentLevel.loc?m._openMinigame(d.minigames.Minigame.MINIGAME_LANDER):m._openMinigame(d.minigames.Minigame.MINIGAME_LANDER_LEAVE);break;case 5:m._openMinigame(d.minigames.Minigame.MINIGAME_MATCH_ROTATOR);break;case 6:m._openMinigame(d.minigames.Minigame.MINIGAME_WELDING);break;case 7:"GHOST"==m._currentLevel.loc?m._openMinigame(d.minigames.Minigame.MINIGAME_PLUG_IT_IN):m._openMinigame(d.minigames.Minigame.MINIGAME_PULL_IT_OUT);break;case 8:m._chopper.get_renderable().visible=!1;m._openMinigame(d.minigames.Minigame.MINIGAME_STEALTH);break;case 9:m._openMinigame(d.minigames.Minigame.MINIGAME_CREW_PROTECT);break;case 10:m._chopper.get_renderable().visible=!1;m._openMinigame(d.minigames.Minigame.MINIGAME_LANDER_ENTER);break;case 11:m._openMinigame(d.minigames.Minigame.MINIGAME_FIRE_EXTINGUISHER);break;case 12:"GHOST"!=m._currentLevel.loc?m._openMinigame(d.minigames.Minigame.MINIGAME_PLUG_IT_IN):m._openMinigame(d.minigames.Minigame.MINIGAME_PULL_IT_OUT);break;case 13:m._openMinigame(d.minigames.Minigame.MINIGAME_CARGO_JETTISON);break;case 14:m._openMinigame(d.minigames.Minigame.MINIGAME_WELDING_DESTROY);break;case 15:m._openMinigame(d.minigames.Minigame.MINIGAME_WELDING_PAINT);break;case 16:m._openMinigame(d.minigames.Minigame.MINIGAME_ASTEROID_DEBRIS);break;case 17:m._chopper.get_renderable().visible=!1;m._openMinigame(d.minigames.Minigame.MINIGAME_LANDER_LEAVE_SHIP);break;case 18:m._chopper.get_renderable().visible=!1,m._openMinigame(d.minigames.Minigame.MINIGAME_LANDER_ENTER_SHIP)}m._minigameTile=a[0];switch(m._minigameTile.get_pDir()[1]){case 3:m._chopper.animate("n");break;case 1:m._chopper.animate("e");break;case 2:m._chopper.animate("w");break;case 0:m._chopper.animate("s")}}}}(j));p=null;return!0}}a=this._map.convertPixelToTileLoc(a,b);if(14<a[0]||8<a[1]||0>a[0]||0>a[1]){for(;14<a[0];)a[0]--;for(;0>a[0];)a[0]++;for(;8<a[1];)a[1]--;for(;0>a[1];)a[1]++}g=0;for(i=this._map.get_otherPoints();g<i.length;)if(j=[i[g]],++g,j[0].get_x()==a[0]&&j[0].get_y()==a[1]){i=!1;if(j[0].get_passable())i=this._chopper.moveIt(j[0].get_x(),j[0].get_y());else switch(p=this._map.get_tiles()[j[0].get_x()][j[0].get_y()].get_pDir(),p[1]){case 3:i=this._chopper.moveIt(j[0].get_x(),j[0].get_y()+1);break;case 1:i=this._chopper.moveIt(j[0].get_x()-1,j[0].get_y());break;case 2:i=this._chopper.moveIt(j[0].get_x()+1,j[0].get_y());break;case 0:i=this._chopper.moveIt(j[0].get_x(),j[0].get_y()-1);break;case 4:p=9999;a=j[0].get_x()-1;for(g=j[0].get_x()+2;a<g;)if(b=a++,!(0>b||14<b)){k=j[0].get_y()-1;for(l=j[0].get_y()+
2;k<l;)if(n=k++,!(0>n||8<n)&&this._map.get_tiles()[b][n].get_passable()&&d.elements.Map.distanceBetweenTiles(this._map.get_tiles()[this._chopper.get_currentX()][this._chopper.get_currentY()],this._map.get_tiles()[b][n])<p)i=this._chopper.moveIt(b,n),p=d.elements.Map.distanceBetweenTiles(this._map.get_tiles()[this._chopper.get_currentX()][this._chopper.get_currentY()],this._map.get_tiles()[b][n])}}i?(this._animateClickPoint(j[0].get_x(),j[0].get_y(),!f),this._callbackAction=function(a){return function(){a[0].dispatchEvent()}}(j),null):this._chopperBurpsLikeAnIdiot(j[0].get_x(),j[0].get_y());return!0}p=null;if(this._map.isPassable(a[0],a[1]))return this._chopper.moveIt(a[0],a[1])?(this._animateClickPoint(a[0],a[1],!f),this._callbackAction=null):this._chopperBurpsLikeAnIdiot(a[0],a[1]),!0;g=0;for(i=this._map.get_tiles()[a[0]][a[1]].get_neighbors();g<i.length;)if(j=i[g],++g,j.get_passable()){this._chopper.moveIt(j.get_x(),j.get_y())?this._animateClickPoint(j.get_x(),j.get_y(),!f):this._chopperBurpsLikeAnIdiot(j.get_x(),j.get_y());p=0;for(g=this._map.get_otherPoints();p<g.length;)if(f=[g[p]],++p,f[0]==j){this._callbackAction=function(a){return function(){a[0].dispatchEvent()}}(f);break}return!0}return!1},_animateClickPoint:function(a,b,f){this._waypoint.get_pos().to(this._map.get_pos().x+a*this._map.get_tileSize(),this._map.get_pos().y+b*this._map.get_tileSize());this._waypoint.get_renderable().visible=!0;this._waypoint.animate("Click",1,f);f&&0>=this._chopperShutUpTimer&&(a=e.WorkinCloud.get_instance().get_random().getRandomInt(1,3),e.WorkinCloud.get_instance().get_sound().playSound("chopper_accept_orders_"+a),this._chopperShutUpTimer=1.15)},handleInput:function(a){if(!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_PAUSED)&&!(this._state==d._World.WORLD_STATE._STATE_INITIALIZING||this._state==d._World.WORLD_STATE._STATE_ENDGAME||this._isOverPause(a.x,a.y)))if(this._isMinigameActive())this._minigame.handleInput(a);else if(!(this._chopper.isFreakingOut||a.y>e.WorkinCloud.get_instance().getFloat(c.ConstantsApp.FLOAT_MAX_Y_INPUT_RANGE)&&104<a.x&&916>a.x))switch(a.input){case c.ConstantsApp.INPUT_CLICK:d.World.MOUSE_POS.x=a.x;d.World.MOUSE_POS.y=a.y;switch(a.phase){case n.WMEventInput.PHASE_DOWN:d.World.MOUSE_DOWN=!0;if(this._isMinigameActive())return;if(this._isMINIGAMEUP){this._minigame.handleInput(a);return}this._tracking=!0;this._calculateMovement(a.x,a.y)&&e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_mouseover",0.2);break;case n.WMEventInput.PHASE_MOVE:this._tracking&&null==this._callbackAction&&this._calculateMovement(a.x,a.y,!0);break;case n.WMEventInput.PHASE_UP:this._tracking=d.World.MOUSE_DOWN=!1}break;case c.ConstantsApp.INPUT_UP:if(c.ConstantsApp.OPTION_SKIPPABLE_INPUT)switch(a.phase){case n.WMEventInput.PHASE_DOWN:null!=this._minigame&&this._minigame.forceWin()}break;case c.ConstantsApp.INPUT_DOWN:if(c.ConstantsApp.OPTION_SKIPPABLE_INPUT)switch(a.phase){case n.WMEventInput.PHASE_DOWN:this._state!=d._World.WORLD_STATE._STATE_ENDGAME&&(this._liveAlertCount=0,this._setStage(9999))}}},_unpause:function(){},_pause:function(){},_damageShip:function(){this._shakeTimer=1;this._screenShakeMagnitude=d.World.BASE_SHAKE_STR;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.8);e.WorkinCloud.get_instance().get_random().startWeight("RandomAlertNumber");e.WorkinCloud.get_instance().get_random().addWeight(3,1,"RandomAlertNumber");e.WorkinCloud.get_instance().get_random().addWeight(4,1,"RandomAlertNumber");e.WorkinCloud.get_instance().get_random().addWeight(6,1,"RandomAlertNumber");e.WorkinCloud.get_instance().get_random().addWeight(7,1,"RandomAlertNumber");e.WorkinCloud.get_instance().get_random().addWeight(8,1,"RandomAlertNumber");e.WorkinCloud.get_instance().get_random().addWeight(11,1,"RandomAlertNumber");e.WorkinCloud.get_instance().get_random().addWeight(13,1,"RandomAlertNumber");for(var a=0;a<this._currentLevel.difficulty;){var b=e.WorkinCloud.get_instance().get_random().getWeight("RandomAlertNumber");this._allAlerts[b].get_active()||(this._allAlerts[b].set_active(!0),this._allAlerts[b].set_timer(13+e.WorkinCloud.get_instance().get_random().getRandomFloat(1,2)),this._allAlerts[b].set_timerMax(this._allAlerts[b].get_timer()),this._allAlerts[b].set_stage(0),e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_SPAWN_ALERT,{x:this._allAlerts[b].get_x()*this._map.get_tileSize()+this._map.get_pos().x,y:this._allAlerts[b].get_y()*this._map.get_tileSize()+this._map.get_pos().y,tile:this._allAlerts[b],noMessage:!0})));a++}e.WorkinCloud.get_instance().get_random().endWeight("RandomAlertNumber");0>=this._npcUrgentTimer&&(e.WorkinCloud.get_instance().get_random().startWeight("RandomLine"),"tutorial_two"!=this._currentLevel.steps[this._stage].effect&&e.WorkinCloud.get_instance().get_random().addWeight("Ezra_Damage",1,"RandomLine"),e.WorkinCloud.get_instance().get_random().addWeight("Hera_Damage",1,"RandomLine"),0<e.WorkinCloud.get_instance().get_random().getWeightSize("RandomLine")&&(this._npcUrgentTimer=1.5,e.WorkinCloud.get_instance().get_sound().playSound(e.WorkinCloud.get_instance().get_random().getWeight("RandomLine"))),e.WorkinCloud.get_instance().get_random().endWeight("RandomLine"))},_onHeadUp:function(){var a=c.MapData.get_instance().locations.get(e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION));a.exits.exists(c.MapDirection.NORTH)&&(a=a.exits.get(c.MapDirection.NORTH),this._swapMaps(a.get_dest()),this._chopper.setNewTilePos(a.get_destX(),a.get_destY(),!0))},_onHeadDown:function(){var a=c.MapData.get_instance().locations.get(e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION));a.exits.exists(c.MapDirection.SOUTH)&&(a=a.exits.get(c.MapDirection.SOUTH),this._swapMaps(a.get_dest()),this._chopper.setNewTilePos(a.get_destX(),a.get_destY(),!0))},_onHeadLeft:function(){var a=c.MapData.get_instance().locations.get(e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION));a.exits.exists(c.MapDirection.WEST)&&(a=a.exits.get(c.MapDirection.WEST),this._swapMaps(a.get_dest()),this._chopper.setNewTilePos(a.get_destX(),a.get_destY(),!0))},_onHeadRight:function(){var a=c.MapData.get_instance().locations.get(e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION));a.exits.exists(c.MapDirection.EAST)&&(a=a.exits.get(c.MapDirection.EAST),this._swapMaps(a.get_dest()),this._chopper.setNewTilePos(a.get_destX(),a.get_destY(),!0))},_onAlertDisappear:function(a){var b=this,f=a.get_data().targetTile;e.WorkinCloud.get_instance().modifyFloat(c.ConstantsApp.FLOAT_STRESS,1);e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_ALERT_COUNT_+t.string(a.get_data().targetTile._location),-1);e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+t.string(a.get_data().targetTile._location),-1);e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+t.string(a.get_data().targetTile._location),-1);if(a.get_data().targetTile==this._objectiveAlert||null==this._objectiveAlert&&W.exists(this._activeAlerts,function(b){return b==a.get_data().targetTile?!0:!1}))this._npcNormalTimer=this._npcUrgentTimer=3.4,e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{time:5,message:this._loseString,character:this._losePerson,mood:this._loseMood}));this._checkGuideArrows();this._liveAlertCount--;this._isWrappingUp&&this._wins++;var m=null==a.get_data().noPenalty;h.tween.WorkinTweenUtils.easeBounceOut(f.elementTracker,d.World.__tween).onComplete(function(){y.remove(b._alertMarkers,f.elementTracker);for(var a=0,d=f.elementTracker.get_elements();a<d.length;){var h=d[a];++a;f.elementTracker.removeElement(h,!0)}b._elementManager.removeElement(f.elementTracker,!0);f.elementTracker=null;m&&(e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_LIVES,1),null)})},_onAlertAppear:function(a){var b="SWR_Alert_low",f=!0;if(a.get_data().tile==this._objectiveAlert)b="SWR_Alert_ESSENTIAL",f=!1,e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_ominouswoob",0.5);else{e.WorkinCloud.get_instance().get_sound().playSound("alert_blue",0.4);var m=10,p;switch(this._currentLevel.difficulty){case 1:m=6;break;case 2:m=5;break;case 3:m=4;break;case 4:m=3;break;case 5:m=2;break;default:m=10}p=0;for(var h=this._sideAlerts;p<h.length;){var g=h[p];++p;g.get_active()||(g.set_timer(g.get_timer()+m),null)}p=0;for(h=this._activeAlerts;p<h.length;)g=h[p],++p,g.get_active()||(g.set_timer(g.get_timer()+m),null)}p=this._elementManager.addElement(new d.elements.AlertClock({x:a.get_data().x,y:a.get_data().y,asset:b,originY:0.5,layer:c.ConstantsApp.LAYER_FG},f,a.get_data().tile));p.get_renderable().alpha=0;d.World.__tween.tween(p.get_renderable(),0.15,{alpha:0.7});this._alertMarkers.push(p);a.get_data().tile.elementTracker=p;e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_ALERT_COUNT_+t.string(a.get_data().tile._location),1);b="";this._checkGuideArrows();if(a.get_data().tile!=this._objectiveAlert&&0<this._currentLevel.difficulty)switch(p=a.get_data(),p.tile._eventToActivate){case "A":"GHOST"==this._currentLevel.loc&&(this._shakeTimer=0.5,e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.5));break;case "A2":"GHOST"!=this._currentLevel.loc&&(this._shakeTimer=0.5,e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.5));break;case "B":this._shakeTimer=1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.5);break;case "C":this._shakeTimer=1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.5);break;case "D":this._shakeTimer=1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.5);break;case "G":e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_minigame_complete",0.5)}this._liveAlertCount++;if(!a.get_data().noMessage){if(0>=this._npcUrgentTimer){e.WorkinCloud.get_instance().get_random().startWeight("RandomLine");e.WorkinCloud.get_instance().get_random().addWeight("Kanan_Alert1",1,"RandomLine");e.WorkinCloud.get_instance().get_random().addWeight("Kanan_Alert2",1,"RandomLine");"GHOST"==this._currentLevel.loc?(e.WorkinCloud.get_instance().get_random().addWeight("Hera_Alert_GHOST",1.5,"RandomLine"),"tutorial_two"!=this._currentLevel.steps[this._stage].effect&&"tutorial_three"!=this._currentLevel.steps[this._stage].effect&&(e.WorkinCloud.get_instance().get_random().addWeight("Zeb_Alert_GHOST",1.5,"RandomLine"),e.WorkinCloud.get_instance().get_random().addWeight("Sabine_Alert_GHOST",1.5,"RandomLine"))):(e.WorkinCloud.get_instance().get_random().addWeight("Zeb_Alert_IMPERIAL",1.5,"RandomLine"),e.WorkinCloud.get_instance().get_random().addWeight("Sabine_Alert_IMPERIAL",1.5,"RandomLine"));p=a.get_data();switch(p.tile._eventToActivate){case "B3":e.WorkinCloud.get_instance().get_random().addWeight("Sabine_Alert_GHOST",10,"RandomLine");break;case "H":e.WorkinCloud.get_instance().get_random().addWeight("Ezra_Fail_Stealth1",10,"RandomLine");break;case "I":e.WorkinCloud.get_instance().get_random().addWeight("Ezra_Bad2",10,"RandomLine")}0<e.WorkinCloud.get_instance().get_random().getWeightSize("RandomLine")&&(e.WorkinCloud.get_instance().get_sound().playSound(e.WorkinCloud.get_instance().get_random().getWeight("RandomLine")),this._npcUrgentTimer=1);e.WorkinCloud.get_instance().get_random().endWeight("RandomLine")}if(c.ConstantsApp.OPTION_SHOW_ALL_DIALOG){p=a.get_data();switch(p.tile._eventToActivate){case "A":"GHOST"==this._currentLevel.loc?(b+="CHOPPER, some cables have broken in "+t.string(a.get_data().tile._location)+"! Find the damage and repair it!",this._shakeTimer=0.5,e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.5)):b+="CHOPPER, We've singled out key power lines to cut in "+t.string(a.get_data().tile._location)+". Let's get those unplugged!";break;case "B":b+="Hull breach detected in "+t.string(a.get_data().tile._location)+
"! Weld up the damage quickly, Chopper!";this._shakeTimer=1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.5);break;case "C":b+="There's TIE fighters on our tail! Get to the observation deck and shoot them down!";this._shakeTimer=1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.5);break;case "D":b+="Fire onboard! CHOPPER, open the airlocks to suffocate the flames!";this._shakeTimer=1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.5);break;case "F":b+="Asteroids ahead! Get to the cockpit and navigate us through the field, Chopper!";break;case "G":b+="Cargo Bay's fallen open, CHOPPER. Get down to there and keep the crates from falling out!";e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_minigame_complete",0.5);break;case "H":b+="Incoming Stormtroopers! CHOPPER, cut them off!";break;case "I":b+="Stormtrooper patrols are closing in on your location! Sneak past them, and they should leave.";break;case "J":b+="CHOPPER, we're detecting Imperial comms on our location. Jam their systems!"}e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{time:3,message:b,character:this._currentNPC}))}}},_onMinigameResults:function(a){var b=this;if(e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TESTING_MINIGAMES))this._minigame.dispose(),this._openMinigame(e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_TEST_MINIGAME_ID));else if(this._isMINIGAMEUP=this._map.isTimersPaused=!1,B._platform.getMouse().set_cursor(i.MouseCursor.Default),a.get_data().won){e.WorkinCloud.get_instance().modifyFloat(c.ConstantsApp.FLOAT_STRESS,-5);if(3!=this._currentLevel.steps[this._stage].type||this._minigameTile!=this._objectiveAlert)this._chopper.get_renderable().visible=!0;if(this._minigameTile.get_active())h.tween.WorkinTweenUtils.easeBounceOut(this._minigameTile.elementTracker,d.World.__tween).onComplete(function(){e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_ALERT_COUNT_+b._minigameTile.get_location(),-1);0<b._minigameTile.get_stage()&&e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+b._minigameTile.get_location(),-1);1<b._minigameTile.get_stage()&&e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+b._minigameTile.get_location(),-1);for(var a=0,f=b._minigameTile.elementTracker.get_elements();a<f.length;){var d=f[a];++a;b._minigameTile.elementTracker.removeElement(d,!1)}y.remove(b._alertMarkers,b._minigameTile.elementTracker);b._elementManager.removeElement(b._minigameTile.elementTracker,!0);b._minigameTile.elementTracker=null;b._winsNeeded>b._wins+1&&2<=b._currentLevel.steps[b._stage].type&&b._minigameTile==b._objectiveAlert?b._minigameTile.set_timer(2):b._makeRandAlertTimerRecharge(b._minigameTile);b._minigameTile.set_active(!1);if(null==b._objectiveAlert&&W.exists(b._activeAlerts,function(a){return a==b._minigameTile?!0:!1})||b._minigameTile==b._objectiveAlert||b._isWrappingUp)b._wins++,null;b._liveAlertCount--;if(b._wins<b._winsNeeded&&0>=b._npcNormalTimer){e.WorkinCloud.get_instance().get_random().startWeight("RandomLine");"tutorial_two"!=b._currentLevel.steps[b._stage].effect&&(e.WorkinCloud.get_instance().get_random().addWeight("Ezra_Minigame_Complete1",1,"RandomLine"),e.WorkinCloud.get_instance().get_random().addWeight("Ezra_Minigame_Complete2",1,"RandomLine"));e.WorkinCloud.get_instance().get_random().addWeight("Kanan_Minigame_Complete",1,"RandomLine");e.WorkinCloud.get_instance().get_random().addWeight("Kanan_Minigame_Complete2",1,"RandomLine");e.WorkinCloud.get_instance().get_random().addWeight("Hera_Minigame_Complete",1,"RandomLine");"tutorial_two"!=b._currentLevel.steps[b._stage].effect&&"tutorial_three"!=b._currentLevel.steps[b._stage].effect&&e.WorkinCloud.get_instance().get_random().addWeight("Zeb_Minigame_Complete",1,"RandomLine");"GHOST"!=b._currentLevel.loc&&e.WorkinCloud.get_instance().get_random().addWeight("Sabine_Minigame_IMPERIAL_Complete",1,"RandomLine");a=b._minigameTile.get_eventToActivate();switch(a){case "F":case "F2":e.WorkinCloud.get_instance().get_random().addWeight("Hera_Minigame_PILOT_Complete",8,"RandomLine");break;case "C":e.WorkinCloud.get_instance().get_random().addWeight("Zeb_Minigame_TURRET_Complete",8,"RandomLine")}0<e.WorkinCloud.get_instance().get_random().getWeightSize("RandomLine")&&(b._npcNormalTimer=2.1,e.WorkinCloud.get_instance().get_sound().playSound(e.WorkinCloud.get_instance().get_random().getWeight("RandomLine")));e.WorkinCloud.get_instance().get_random().endWeight("RandomLine")}b._minigameTile=null;b._isWrappingUp&&null})}else{this._chopper.get_renderable().visible=!0;var f=!1;e.WorkinCloud.get_instance().modifyFloat(c.ConstantsApp.FLOAT_STRESS,1);if(0>=this._npcNormalTimer){e.WorkinCloud.get_instance().get_random().startWeight("RandomLine");"tutorial_two"!=this._currentLevel.steps[this._stage].effect&&(e.WorkinCloud.get_instance().get_random().addWeight("Ezra_Bad1",1,"RandomLine"),e.WorkinCloud.get_instance().get_random().addWeight("Ezra_Bad2",1,"RandomLine"));switch(a.get_data().id){case d.minigames.Minigame.MINIGAME_ASTEROID_DEBRIS:case d.minigames.Minigame.MINIGAME_ASTEROID_FIELD:this._damageShip();e.WorkinCloud.get_instance().get_random().endWeight("RandomLine");break;case d.minigames.Minigame.MINIGAME_CARGO_CRANE:f=!0;break;case d.minigames.Minigame.MINIGAME_CREW_PROTECT:e.WorkinCloud.get_instance().get_random().addWeight("Ezra_Fail_Stealth2",2,"RandomLine");f=!0;break;case d.minigames.Minigame.MINIGAME_FIRE_EXTINGUISHER:f=!0;break;case d.minigames.Minigame.MINIGAME_STEALTH:e.WorkinCloud.get_instance().get_random().addWeight("Ezra_Fail_Stealth2",2,"RandomLine");e.WorkinCloud.get_instance().get_random().addWeight("Ezra_Freakout_1",2,"RandomLine");f=!0;break;case d.minigames.Minigame.MINIGAME_TURRET_FIGHT:this._damageShip(),e.WorkinCloud.get_instance().get_random().endWeight("RandomLine")}0<e.WorkinCloud.get_instance().get_random().getWeightSize("RandomLine")&&(this._npcNormalTimer=2,e.WorkinCloud.get_instance().get_sound().playSound(e.WorkinCloud.get_instance().get_random().getWeight("RandomLine")));e.WorkinCloud.get_instance().get_random().endWeight("RandomLine")}c.ConstantsApp.OPTION_SHOW_ALL_DIALOG&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{time:5,message:this._loseString,character:this._losePerson,mood:this._loseMood}));this._minigameTile.get_active()&&f?(e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_LIVES,1),h.tween.WorkinTweenUtils.easeBounceOut(this._minigameTile.elementTracker,d.World.__tween).onComplete(function(){e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_ALERT_COUNT_+b._minigameTile.get_location(),-1);0<b._minigameTile.get_stage()&&e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+b._minigameTile.get_location(),-1);1<b._minigameTile.get_stage()&&e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+b._minigameTile.get_location(),-1);for(var a=0,f=b._minigameTile.elementTracker.get_elements();a<f.length;){var d=f[a];++a;b._minigameTile.elementTracker.removeElement(d,!1)}y.remove(b._alertMarkers,b._minigameTile.elementTracker);b._elementManager.removeElement(b._minigameTile.elementTracker,!0);b._minigameTile.elementTracker=null;b._minigameTile==b._objectiveAlert?b._minigameTile.set_timer(3):b._makeRandAlertTimerRecharge(b._minigameTile);b._minigameTile.set_active(!1);b._minigameTile=null;b._liveAlertCount--;b._isWrappingUp&&b._wins++})):this._minigameTile=null}},_Zeb:function(){var a=["What're you bothering me for, scrap heap? I can handle the guns myself!"];null!=this._currentLevel.steps[this._stage].zebLine&&(a=this._currentLevel.steps[this._stage].zebLine.split("/"));for(var b=0,f=a.length;b<f;){var m=b++,d="";0==m&&(d="casual",this._currentLevel.steps[this._stage].zeb&&this._currentLevel.steps[this._stage].zeb.mood&&(d=this._currentLevel.steps[this._stage].zeb.mood));this._npcNormalTimer=this._npcUrgentTimer=3.4;e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{time:3,message:a[m],character:"ZEBB",mood:d}))}},_Sabine:function(){var a=["What's the matter? You want a new, explosive paintjob?","Hey, I'm just kidding! Wouldn't want you getting hurt, you know?"];null!=this._currentLevel.steps[this._stage].sabineLine&&(a=this._currentLevel.steps[this._stage].sabineLine.split("/"));for(var b=0,f=a.length;b<f;){var m=b++,d="";0==m&&(d="casual",this._currentLevel.steps[this._stage].sabine&&this._currentLevel.steps[this._stage].sabine.mood&&(d=this._currentLevel.steps[this._stage].sabine.mood));this._npcNormalTimer=this._npcUrgentTimer=3.4;e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{time:3,message:a[m],character:"SABN",mood:d}))}},_Kanan:function(){var a=["We can't be too vigilant when dealing with the Empire."];null!=this._currentLevel.steps[this._stage].kananLine&&(a=this._currentLevel.steps[this._stage].kananLine.split("/"));for(var b=0,f=a.length;b<f;){var m=b++,d="";0==m&&(d="casual",this._currentLevel.steps[this._stage].kanan&&this._currentLevel.steps[this._stage].kanan.mood&&(d=this._currentLevel.steps[this._stage].kanan.mood));this._npcNormalTimer=this._npcUrgentTimer=3.4;e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{time:3,message:a[m],character:"KANN",mood:d}))}},_Hera:function(){var a=["I can handle the flight path, CHOPPER. See if anyone else needs help!"];null!=this._currentLevel.steps[this._stage].heraLine&&(a=this._currentLevel.steps[this._stage].heraLine.split("/"));for(var b=0,f=a.length;b<f;){var m=b++,d="";0==m&&(d="casual",this._currentLevel.steps[this._stage].hera&&this._currentLevel.steps[this._stage].hera.mood&&(d=this._currentLevel.steps[this._stage].hera.mood));this._npcNormalTimer=this._npcUrgentTimer=3.4;e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{time:3,message:a[m],character:"HERA",mood:d}))}},_Ezra:function(){var a=["Keep an eye out for anything wrong, and we'll get through alright!"];null!=this._currentLevel.steps[this._stage].ezraLine&&(a=this._currentLevel.steps[this._stage].ezraLine.split("/"));for(var b=0,f=a.length;b<f;){var m=b++,d="";0==m&&(d="casual",this._currentLevel.steps[this._stage].ezra&&this._currentLevel.steps[this._stage].ezra.mood&&(d=this._currentLevel.steps[this._stage].ezra.mood));this._npcNormalTimer=this._npcUrgentTimer=3.4;e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{time:3,message:a[m],character:"EZRA",mood:d}))}},_onNPCMade:function(a){var b=a.get_data()["char"],f=c.ConstantsApp.LAYER_PLAYER,m="";switch(b){case "ezra":this._currentLevel.steps[this._stage].ezra?(this._currentLevel.steps[this._stage].ezra.pose&&(m=this._currentLevel.steps[this._stage].ezra.pose),"sit"==m&&(f=c.ConstantsApp.LAYER_FG)):(m="sit",f=c.ConstantsApp.LAYER_FG);break;case "hera":this._currentLevel.steps[this._stage].hera?this._currentLevel.steps[this._stage].hera.pose&&(m=this._currentLevel.steps[this._stage].hera.pose):m="sit";break;case "kanan":this._currentLevel.steps[this._stage].kanan?this._currentLevel.steps[this._stage].kanan.pose&&(m=this._currentLevel.steps[this._stage].kanan.pose):m="sit";break;case "sabine":this._currentLevel.steps[this._stage].sabine?(this._currentLevel.steps[this._stage].sabine.pose&&(m=this._currentLevel.steps[this._stage].sabine.pose),"sit"==m&&(f=c.ConstantsApp.LAYER_FG)):(m="sit",f=c.ConstantsApp.LAYER_FG);break;case "zeb":this._currentLevel.steps[this._stage].zeb&&this._currentLevel.steps[this._stage].zeb.pose&&(m=this._currentLevel.steps[this._stage].zeb.pose)}var d=0.5,e=0.75,h=!1,g=["Ezra1"];switch(b){case "ezra":g=["Ezra1","Ezra2","Ezra3"];"sit"==m&&(d=1.5,e=0.76,g=["Ezra_sitting"]);break;case "hera":g=["Hera1","Hera2","Hera3"];"sit"==m&&(d=1,e=0.85,g=["Hera_Sitting"]);break;case "kanan":g=["Kanan1","Kanan2","Kanan3"];"sit"==m&&(d=0.32,e=0.92,g=["Kanan_Sitting"]);break;case "sabine":g=["Sabine1","Sabine2","Sabine3"];"sit"==m&&(d=0.25,e=0.74,g=["Sabine_Sitting"]);break;case "zeb":g=["Zeb1","Zeb2","Zeb3"];break;default:return}"mirrored"==m&&(h=!0);a=new j.AnimatedElement({originX:d,originY:e,layer:f,asset:g[0],x:a.get_data().x*this._map.get_tileSize()+this._map.get_pos().x,y:a.get_data().y*this._map.get_tileSize()+this._map.get_pos().y});a.addAnimationFrames("Idle",g);a.set_fps(1.3);a.get_pos().z=-a.get_pos().y;h&&(a.get_renderable().scaleX=-1);this._npcs.push(a);this._elementManager.addElement(a);a.animate("Idle")},_onUnpause:function(){this._unpause()},_onPause:function(){this._pause()},_removeEventListeners:function(){e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_PAUSE,q(this,this._onPause));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_UNPAUSE,q(this,this._onUnpause));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_MINIGAME_RESULTS,q(this,this._onMinigameResults));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_ALERT,q(this,this._onAlertAppear));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_DESPAWN_ALERT,q(this,this._onAlertDisappear));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_TALK_EZRA,q(this,this._Ezra));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_TALK_HERA,q(this,this._Hera));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_TALK_KANAN,q(this,this._Kanan));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_TALK_SABINE,q(this,this._Sabine));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_TALK_ZEB,q(this,this._Zeb));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_ALERT_LEFT,q(this,this._onHeadLeft));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_ALERT_RIGHT,q(this,this._onHeadRight));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_ALERT_DOWN,q(this,this._onHeadDown));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_ALERT_UP,q(this,this._onHeadUp));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_NPC,q(this,this._onNPCMade))},_addEventListeners:function(){e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_PAUSE,q(this,this._onPause));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_UNPAUSE,q(this,this._onUnpause));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_MINIGAME_RESULTS,q(this,this._onMinigameResults));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_ALERT,q(this,this._onAlertAppear));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_DESPAWN_ALERT,q(this,this._onAlertDisappear));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_TALK_EZRA,q(this,this._Ezra));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_TALK_HERA,q(this,this._Hera));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_TALK_KANAN,q(this,this._Kanan));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_TALK_SABINE,q(this,this._Sabine));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_TALK_ZEB,q(this,this._Zeb));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_ALERT_LEFT,q(this,this._onHeadLeft));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_ALERT_RIGHT,q(this,this._onHeadRight));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_ALERT_DOWN,q(this,this._onHeadDown));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_ALERT_UP,q(this,this._onHeadUp));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_NPC,q(this,this._onNPCMade))},_isMinigameActive:function(){return null!=this._minigame&&this._minigame.get_active()},render:function(){null!=this._minigame&&!this._minigame.get_cleanup()&&this._minigame.render();this._elementManager.renderElements()},update:function(a){var b=this;if(!0!=e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_PAUSED))switch(d.World.get_tweener().update(a),this._state[1]){case 2:null!=this._minigame&&this._minigame.get_cleanup()&&(this._minigame.dispose(),this._minigame=null);this._updateScreenShake(a);break;case 1:0<this._chopperShutUpTimer?this._chopperShutUpTimer-=a:"spin"==this._chopper.get_currentAnimation()&&this._chopper.animate("s");0<this._npcNormalTimer&&(this._npcNormalTimer-=a);0<this._npcUrgentTimer&&(this._npcUrgentTimer-=a);e.WorkinCloud.get_instance().setFloat(c.ConstantsApp.FLOAT_STRESS,e.WorkinUtils.clamp(e.WorkinCloud.get_instance().getFloat(c.ConstantsApp.FLOAT_STRESS),0,10,!1));this._isMinigameActive()&&this._minigame.update(a);this._elementManager.updateElements(a);this._doStepEffects(a);this._updateScreenShake(a);this._markerBob+=2*a;this._markerBobMed+=4*a;this._markerBobHigh+=10*a;this._markerBob>2*Math.PI&&(this._markerBob-=2*Math.PI);this._markerBobMed>2*Math.PI&&(this._markerBobMed-=2*Math.PI);this._markerBobHigh>2*Math.PI&&(this._markerBobHigh-=2*Math.PI);for(var f=0,m=this._alertMarkers;f<m.length;){var p=m[f];++f;e.WorkinCloud.get_instance().getFloat(c.ConstantsApp.FLOAT_MAX_Y_INPUT_RANGE);p.get_pos();p.setRenderOffset(0,Math.min(e.WorkinCloud.get_instance().getFloat(c.ConstantsApp.FLOAT_MAX_Y_INPUT_RANGE)-p.get_pos().y,5*Math.sin(this._markerBobMed)))}f=0;for(m=this._guideArrows;f<m.length;)p=m[f],++f,p.get_renderable().alpha=0.25*Math.sin(this._markerBob)+0.75;if(null==this._minigame)if(e.WorkinCloud.get_instance().modifyFloat(c.ConstantsApp.FLOAT_STRESS,-(d.World.CHOPPER_BASE_CALMNESS+d.World.CHOPPER_CALMNESS_MODIFIER*c.Inventory.getRank(c.Item.ITEM_SLOW))*a),this._chopper.isFreakingOut)e.WorkinCloud.get_instance().modifyFloat(c.ConstantsApp.FLOAT_STRESS,-5*a),0>=e.WorkinCloud.get_instance().getFloat(c.ConstantsApp.FLOAT_STRESS)&&(this._chopper.isFreakingOut=!1,"tutorial_two"!=this._currentLevel.steps[this._stage].effect&&(0.5<Math.random()?e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Freakout_1"):e.WorkinCloud.get_instance().get_sound().playSound("Ezra_Freakout_2")));else{f=0;for(m=this._alertMarkers;f<m.length;)p=m[f],++f,e.WorkinCloud.get_instance().modifyFloat(c.ConstantsApp.FLOAT_STRESS,0.2*a)}f=0;for(m=this._drones;f<m.length;){p=[m[f]];++f;if(!p[0].isMoving)if(0<p[0].get_currentPath().length&&!p[0].isFreakingOut){p[0].get_currentPath()[0].get_x()!=p[0].get_currentX()&&p[0].animate("ew");p[0].get_currentPath()[0].get_y()!=p[0].get_currentY()&&p[0].animate("ns");p[0].setNewTilePos(p[0].get_currentPath()[0].get_x(),p[0].get_currentPath()[0].get_y());p[0].isMoving=!0;var g=d.World.SECURITY_MOVETIME;d.World.__tween.tween(p[0].get_pos(),g,{x:p[0].get_currentPath()[0].get_x()*this._map.get_tileSize()+this._map.get_pos().x,y:p[0].get_currentPath()[0].get_y()*this._map.get_tileSize()+this._map.get_pos().y,z:-(p[0].get_currentPath()[0].get_y()*this._map.get_tileSize()+this._map.get_pos().y)},null,h.tween.Ease.EASE_LINEAR).onComplete(function(a){return function(){a[0].set_lastX(a[0].get_currentX());a[0].set_lastY(a[0].get_currentY());a[0].get_currentPath().splice(0,1);a[0].isMoving=!1}}(p))}else if(0>=p[0].get_currentPath().length&&!p[0].isFreakingOut)p[0].advancePatrol(),p[0].moveIt(p[0].get_patrolPath()[p[0].get_patrolStage()][0],p[0].get_patrolPath()[p[0].get_patrolStage()][1]);else if(0<p[0].get_currentPath().length&&p[0].isFreakingOut)g=d.World.SECURITY_MOVETIME/6,p[0].get_currentPath()[0].get_x()!=p[0].get_currentX()&&p[0].animate("ew"),p[0].get_currentPath()[0].get_y()!=p[0].get_currentY()&&p[0].animate("ns"),p[0].setNewTilePos(p[0].get_currentPath()[0].get_x(),p[0].get_currentPath()[0].get_y()),p[0].isMoving=!0,d.World.__tween.tween(p[0].get_pos(),g,{x:p[0].get_currentPath()[0].get_x()*this._map.get_tileSize()+this._map.get_pos().x,y:p[0].get_currentPath()[0].get_y()*this._map.get_tileSize()+this._map.get_pos().y,z:-(p[0].get_currentPath()[0].get_y()*this._map.get_tileSize()+this._map.get_pos().y)},null,h.tween.Ease.EASE_LINEAR).onComplete(function(a){return function(){a[0].set_lastX(a[0].get_currentX());a[0].set_lastY(a[0].get_currentY());a[0].get_currentPath().splice(0,1);a[0].isMoving=!1}}(p));else if(0>=p[0].get_currentPath().length&&p[0].isFreakingOut){var i=g=0;this._chopper.get_currentX()>p[0].get_currentX()&&(g=-1);this._chopper.get_currentX()<p[0].get_currentX()&&(g=1);this._chopper.get_currentY()>p[0].get_currentY()&&(i=-1);this._chopper.get_currentY()<p[0].get_currentY()&&(i=1);if(!p[0].moveIt(p[0].get_currentX()+g,p[0].get_currentY()+i)){y.remove(this._drones,p[0]);this._elementManager.removeElement(p[0],!0);this._npcNormalTimer=this._npcUrgentTimer=3.4;Math.random()<d.World.CHANCE_TO_STRIKE?(e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_LIVES,1),e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{character:this._currentNPC,time:3,message:"A Mouse droid spotted you and reported you to the Imperial guard. Be more careful next time!",mood:"negative"}))):e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{character:this._currentNPC,time:3,message:"A Mouse droid spotted you! Good thing it scurried off and got lost, though. Be careful!",mood:"casual"}));continue}}if(this._chopper.get_currentX()==p[0].get_currentX()&&this._chopper.get_currentY()==p[0].get_currentY()||this._chopper.get_currentX()==p[0].get_lastX()&&this._chopper.get_currentY()==p[0].get_lastY())e.WorkinCloud.get_instance().modifyFloat(c.ConstantsApp.FLOAT_STRESS,50*a),p[0].isFreakingOut||(p[0].stopPathing(),e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_alarm"),p[0].isFreakingOut=!0);if(5<=Math.abs(p[0].get_currentX()-this._chopper.get_currentX())||5<=Math.abs(p[0].get_currentY()-this._chopper.get_currentY()))p[0].isFreakingOut=!1}this._waypoint.get_renderable().rotation+=125*a;10<=e.WorkinCloud.get_instance().getFloat(c.ConstantsApp.FLOAT_STRESS)&&!this._chopper.isFreakingOut&&!this._isMinigameActive()&&(e.WorkinCloud.get_instance().get_sound().playSound("chopper_stress_out_sfx"),this._chopperShutUpTimer=5.01,this._chopper.isFreakingOut=!0,this._callbackAction=null,this._waypoint.get_renderable().visible=!1,this._chopper.clearQueue());!this._chopper.isMoving&&0<this._chopper.get_currentPath().length?(f="",this._chopper.get_currentY()>this._chopper.get_currentPath()[0].get_y()?f+="n":this._chopper.get_currentY()<this._chopper.get_currentPath()[0].get_y()&&(f+="s"),this._chopper.get_currentX()<this._chopper.get_currentPath()[0].get_x()?f+="e":this._chopper.get_currentX()>this._chopper.get_currentPath()[0].get_x()&&(f+="w"),0!=f.length&&this._chopper.animate(f),this._chopper.setNewTilePos(this._chopper.get_currentPath()[0].get_x(),this._chopper.get_currentPath()[0].get_y()),this._chopper.isMoving=!0,g=d.World.CHOPPER_BASE_MOVETIME-c.Inventory.getRank(c.Item.ITEM_SPEED_MOVEMENT)*d.World.CHOPPER_MOVETIME_MODIFIER,this._chopper.isFreakingOut&&(g*=2/3),d.World.__tween.tween(this._chopper.get_pos(),g,{x:this._chopper.get_currentPath()[0].get_x()*this._map.get_tileSize()+this._map.get_pos().x,y:this._chopper.get_currentPath()[0].get_y()*this._map.get_tileSize()+
this._map.get_pos().y,z:-(this._chopper.get_currentPath()[0].get_y()*this._map.get_tileSize()+this._map.get_pos().y)},null,h.tween.Ease.EASE_LINEAR).onComplete(function(){b._chopper.get_currentPath().splice(0,1);b._chopper.isMoving=!1})):!this._chopper.isMoving&&null!=this._callbackAction?(this._callbackAction(),this._callbackAction=null):!this._chopper.isMoving&&"spin"!=this._chopper.get_currentAnimation()&&(this._waypoint.get_renderable().visible=!1);this._chopper.isFreakingOut&&0==this._chopper.get_currentPath().length&&(this._callbackAction=null,f=this._map.get_tiles()[this._chopper.get_currentX()][this._chopper.get_currentY()],this._chopper.get_currentPath().push(f.get_neighbors()[e.WorkinCloud.get_instance().get_random().getRandomInt(0,f.get_neighbors().length-1)]));this._elementManager.updateZSort(c.ConstantsApp.LAYER_PLAYER);3<=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_LIVES)&&(f="Ghost's taken too much damage. We have to abort, CHOPPER!",m=this._currentLevel.loc,"GHOST"!=this._currentLevel.loc&&(m="IMPERIAL",f="We have to abort, CHOPPER. We can't deal with the imperials anymore!"),this._setState(d._World.WORLD_STATE._STATE_ENDGAME),this._npcNormalTimer=this._npcUrgentTimer=3.4,e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX,{time:6,message:f,end:"LOSE",character:"EZRA",mood:"lose_"+m})),e.WorkinCloud.get_instance().get_sound().playSound("sting_lose_"+m.toLowerCase()));this._wins>=this._winsNeeded?(3==this._currentLevel.steps[this._stage].type&&this._executeEndScript(),this._wins=0,this._setStage(this._stage+1)):this._isWrappingUp&&0>=this._liveAlertCount&&this._setStage(t["int"](this._currentLevel.steps.length));if(!this._map.isTimersPaused){f=0;for(m=this._allAlerts;f<m.length;){p=[m[f]];++f;if(p[0]!=this._minigameTile&&(0<this._currentLevel.difficulty||!e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_SHOWING_MESSAGE))){if(p[0].get_active()&&p[0].get_location()!=e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION))g=p[0],g.set_timer(g.get_timer()-a*(this._currentLevel.difficulty/5)),0==this._currentLevel.difficulty&&(g=p[0],g.set_timer(g.get_timer()-a/5));else if(p[0].get_active()||W.exists(this._activeAlerts,function(a){return function(b){return b==a[0]?!0:!1}}(p))||W.exists(this._sideAlerts,function(a){return function(b){return b==a[0]?!0:!1}}(p))||this._objectiveAlert==p[0])0.1>p[0].get_timer()/p[0].get_timerMax()&&p[0].get_active()?(g=p[0],g.set_timer(g.get_timer()-0.25*a)):(g=p[0],g.set_timer(g.get_timer()-
a));null!=this._currentLevel.steps[this._stage]&&p[0].get_active()&&(W.exists(this._activeAlerts,function(a){return function(b){return b==a[0]?!0:!1}}(p))||W.exists(this._sideAlerts,function(a){return function(b){return b==a[0]?!0:!1}}(p)))}null!=p[0].elementTracker&&(p[0].get_location()!=e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION)?p[0].elementTracker.get_renderable().visible=!1:p[0].elementTracker.get_renderable().visible=!0);if(0>p[0].get_timer()&&!p[0].get_active()&&this._wins<this._winsNeeded){p[0].set_active(!0);p[0].set_timer(15);p[0]==this._objectiveAlert&&0<this._activeAlerts.length&&p[0].set_timer(30);if(p[0].get_location()==c.ConstantsApp.LOC_DETENTION||p[0].get_location()==c.ConstantsApp.LOC_DISPOSAL||p[0].get_location()==c.ConstantsApp.LOC_HALLWAY_1||p[0].get_location()==c.ConstantsApp.LOC_HALLWAY_2||p[0].get_location()==c.ConstantsApp.LOC_HALLWAY_3||p[0].get_location()==c.ConstantsApp.LOC_HANGAR||p[0].get_location()==c.ConstantsApp.LOC_SECURITY||p[0].get_location()==c.ConstantsApp.LOC_STORAGE||p[0].get_location()==c.ConstantsApp.LOC_VENTS)g=p[0],g.set_timer(g.get_timer()-this._currentLevel.difficulty);i=c.MapData.get_instance().findRoom(e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_SHIP_LOCATION),p[0].get_location(),[]);0<=i&&(g=p[0],g.set_timer(g.get_timer()+3*i));g=p[0].get_eventToActivate();switch(g){case "A":case "B":case "C":case "D":case "F":case "F2":case "G":case "G2":g=p[0];g.set_timer(g.get_timer()*(1+c.Inventory.getRank(c.Item.ITEM_TIME_REPAIR)/10));break;case "A2":case "B2":case "B3":case "E":case "E2":case "E3":case "E4":case "H":case "I":case "J":g=p[0];g.set_timer(g.get_timer()*(1+c.Inventory.getRank(c.Item.ITEM_TIME_INFILTRATION)/10));break;default:g=p[0],g.set_timer(g.get_timer()+3)}p[0].set_timerMax(p[0].get_timer());p[0].set_stage(0);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_SPAWN_ALERT,{x:p[0].get_x()*this._map.get_tileSize()+this._map.get_pos().x,y:p[0].get_y()*this._map.get_tileSize()+
this._map.get_pos().y,tile:p[0],noMessage:p[0]==this._objectiveAlert}))}10>p[0].get_timer()&&p[0].get_active()&&1>p[0].get_stage()&&(e.WorkinCloud.get_instance().get_sound().playSound("alert_yellow",0.5),p[0].set_stage(1),e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_MED_ALERT_COUNT_+p[0].get_location(),1),this._checkGuideArrows());5>p[0].get_timer()&&p[0].get_active()&&2>p[0].get_stage()&&(e.WorkinCloud.get_instance().get_sound().playSound("alert_red",0.6),p[0].set_stage(2),e.WorkinCloud.get_instance().modifyInt(c.ConstantsApp.INT_HIGH_ALERT_COUNT_+
p[0].get_location(),1),0>=this._npcUrgentTimer&&(e.WorkinCloud.get_instance().get_random().startWeight("RandomLine"),p[0].get_location()==c.ConstantsApp.LOC_CARGO||p[0].get_location()==c.ConstantsApp.LOC_COCKPIT||p[0].get_location()==c.ConstantsApp.LOC_COMMON||p[0].get_location()==c.ConstantsApp.LOC_ENGINE||p[0].get_location()==c.ConstantsApp.LOC_HALLWAY||p[0].get_location()==c.ConstantsApp.LOC_OBSERVATION?("tutorial_two"!=this._currentLevel.steps[this._stage].effect&&(e.WorkinCloud.get_instance().get_random().addWeight("Ezra_RedAlert_GHOST1",1,"RandomLine"),e.WorkinCloud.get_instance().get_random().addWeight("Ezra_RedAlert_GHOST2",1,"RandomLine")),e.WorkinCloud.get_instance().get_random().addWeight("Hera_RedAlert_GHOST",1,"RandomLine")):(e.WorkinCloud.get_instance().get_random().addWeight("Ezra_RedAlert_IMPERIAL1",1,"RandomLine"),e.WorkinCloud.get_instance().get_random().addWeight("Ezra_RedAlert_IMPERIAL2",1,"RandomLine"),e.WorkinCloud.get_instance().get_random().addWeight("Zeb_IMPERIAL_Danger",1,"RandomLine")),0<e.WorkinCloud.get_instance().get_random().getWeightSize("RandomLine")&&(this._npcUrgentTimer=2.7,e.WorkinCloud.get_instance().get_sound().playSound(e.WorkinCloud.get_instance().get_random().getWeight("RandomLine"))),e.WorkinCloud.get_instance().get_random().endWeight("RandomLine")),this._checkGuideArrows());5>=p[0].get_timer()&&p[0].get_active()&&2==p[0].get_stage()&&(p[0].elementTracker.get_renderable().alpha=0.25*Math.sin(this._markerBobHigh)+0.75);0>p[0].get_timer()&&p[0].get_active()&&(p[0].set_stage(0),p[0].set_active(!1),this._makeRandAlertTimer(p[0]),e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_DESPAWN_ALERT,{targetTile:p[0]})))}}null!=this._minigame&&this._minigame.get_cleanup()&&(this._minigame.dispose(),this._minigame=null)}},_setState:function(a){this._state=a;switch(a[1]){case 1:e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TESTING_MINIGAMES)&&!this._isMINIGAMEUP&&this._openMinigame(e.WorkinCloud.get_instance().getString(c.ConstantsApp.STRING_TEST_MINIGAME_ID));break;case 2:this._callbackAction=null}},dispose:function(){d.World.get_tweener().stopAllTweens();null!=this._minigame&&(this._minigame.dispose(),this._minigame=null);this._elementManager.dispose();this._timeline=this._elementManager=null;this._removeEventListeners();this._state=null;this._dispatcher.dispose();this._dispatcher=null},start:function(){this._setState(d._World.WORLD_STATE._STATE_GAMEPLAY)},_openMinigame:function(a){this._map.isTimersPaused=!0;e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsApp.EVENT_HIDE_DIALOGUE_BOX));this._chopper.stopPathing();this._tracking=!1;this._isMINIGAMEUP=!0;switch(a){case d.minigames.Minigame.MINIGAME_TURRET_FIGHT:e.WorkinCloud.get_instance().get_sound().playMusic("music_attack",0.5);this._minigame=new d.minigames.MinigameTurretFight({timeline:this._timeline,difficulty:this._currentLevel.difficulty});break;case d.minigames.Minigame.MINIGAME_CARGO_CRANE:this._minigame=new d.minigames.MinigameCargoCrane({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameCargoCrane.OBJECTIVE_SAVE});break;case d.minigames.Minigame.MINIGAME_CARGO_JETTISON:this._minigame=new d.minigames.MinigameCargoCrane({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameCargoCrane.OBJECTIVE_JETTISON});break;case d.minigames.Minigame.MINIGAME_FIRE_EXTINGUISHER:this._minigame=new d.minigames.MinigameFireExtinguisher({timeline:this._timeline,difficulty:this._currentLevel.difficulty});break;case d.minigames.Minigame.MINIGAME_MATCH_ROTATOR:this._minigame=new d.minigames.MinigameMatchRotator({timeline:this._timeline,difficulty:this._currentLevel.difficulty});break;case d.minigames.Minigame.MINIGAME_LANDER:this._minigame=new d.minigames.MinigameLander({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameLander.OBJECTIVE_PICKUP_RETURN});break;case d.minigames.Minigame.MINIGAME_LANDER_ENTER:this._minigame=new d.minigames.MinigameLander({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameLander.OBJECTIVE_LAND});break;case d.minigames.Minigame.MINIGAME_LANDER_LEAVE:this._minigame=new d.minigames.MinigameLander({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameLander.OBJECTIVE_RETURN});break;case d.minigames.Minigame.MINIGAME_LANDER_ENTER_SHIP:this._minigame=new d.minigames.MinigameLander({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameLander.OBJECTIVE_LAND,skin:d.minigames.MinigameLander.SKIN_IMPERIAL});break;case d.minigames.Minigame.MINIGAME_LANDER_LEAVE_SHIP:this._minigame=new d.minigames.MinigameLander({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameLander.OBJECTIVE_RETURN,skin:d.minigames.MinigameLander.SKIN_IMPERIAL});break;case d.minigames.Minigame.MINIGAME_ASTEROID_FIELD:this._minigame=new d.minigames.MinigameAsteroidNavigator({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameAsteroidNavigator.OBJECTIVE_ASTEROID});break;case d.minigames.Minigame.MINIGAME_ASTEROID_DEBRIS:this._minigame=new d.minigames.MinigameAsteroidNavigator({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameAsteroidNavigator.OBJECTIVE_DEBRIS});break;case d.minigames.Minigame.MINIGAME_PLUG_IT_IN:this._minigame=new d.minigames.MinigamePlugItIn({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigamePlugItIn.OBJECTIVE_PLUG_IN_ALL});break;case d.minigames.Minigame.MINIGAME_PULL_IT_OUT:this._minigame=new d.minigames.MinigamePlugItIn({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigamePlugItIn.OBJECTIVE_UNPLUG_ALL});break;case d.minigames.Minigame.MINIGAME_WELDING:this._minigame=new d.minigames.MinigameWelding({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameWelding.OBJECTIVE_FIX});break;case d.minigames.Minigame.MINIGAME_WELDING_DESTROY:this._minigame=new d.minigames.MinigameWelding({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameWelding.OBJECTIVE_CUT});break;case d.minigames.Minigame.MINIGAME_WELDING_PAINT:this._minigame=new d.minigames.MinigameWelding({timeline:this._timeline,difficulty:this._currentLevel.difficulty,objective:d.minigames.MinigameWelding.OBJECTIVE_PAINT});break;case d.minigames.Minigame.MINIGAME_STEALTH:this._minigame=new d.minigames.MinigameStealth({timeline:this._timeline,difficulty:this._currentLevel.difficulty});break;case d.minigames.Minigame.MINIGAME_CREW_PROTECT:this._minigame=new d.minigames.MinigameCrewProtect({timeline:this._timeline,difficulty:this._currentLevel.difficulty});break;default:this._minigame=new d.minigames.MinigameWelding({timeline:this._timeline,difficulty:1})}this._minigame.open()},__class__:d.World};d.data={};d.data.Tile=function(a,b,f,c,d,e){null==d&&(d=!0);null==c&&(c="");this._x=a;this._y=b;this._passable=f;this._diagonalsPermitted=d;this._neighbors=[];this.travelScore=this.estimateScore=9999;this._eventToActivate=c;this._interactionDirection=e};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.Tile"]=d.data.Tile;d.data.Tile.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,Tile".split(",");d.data.Tile.prototype={dispatchEvent:function(){""!=this._eventToActivate&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(this._eventToActivate,{thisTile:this}))},populateNeighbors:function(a){var b=a.length-1,f=a[0].length-1,c=!1,d=!1,e=!1,h=!1;0<this._x&&(c=!0,a[this._x-1][this._y]._passable&&this._neighbors.push(a[this._x-1][this._y]));0<this._y&&(d=!0,a[this._x][this._y-1].get_passable()&&this._neighbors.push(a[this._x][this._y-1]));this._x<b&&(e=!0,a[this._x+1][this._y].get_passable()&&this._neighbors.push(a[this._x+1][this.get_y()]));this._y<f&&(h=!0,a[this._x][this._y+1].get_passable()&&this._neighbors.push(a[this._x][this._y+1]));this._diagonalsPermitted&&(d&&(c&&a[this._x-1][this._y-1]._passable&&this._neighbors.push(a[this._x-1][this._y-1]),e&&a[this._x+1][this._y-1]._passable&&this._neighbors.push(a[this._x+1][this._y-1])),h&&(c&&a[this._x-
1][this._y+1]._passable&&this._neighbors.push(a[this._x-1][this._y+1]),e&&a[this._x+1][this._y+1]._passable&&this._neighbors.push(a[this._x+1][this._y+1])))},set_pDir:function(a){return this._interactionDirection=a},get_pDir:function(){return this._interactionDirection},set_eventToActivate:function(a){return this._eventToActivate=a},get_eventToActivate:function(){return this._eventToActivate},set_diagonal:function(a){return this._diagonalsPermitted=a},set_passable:function(a){return this._passable=a},get_passable:function(){return this._passable},get_y:function(){return this._y},get_x:function(){return this._x},set_neighbors:function(a){return this._neighbors=a},get_neighbors:function(){return this._neighbors},__class__:d.data.Tile};d.data.AlertTile=function(a,b,f,c,e,h){null==c&&(c="");d.data.Tile.call(this,a,b,f,c,null,e);this._alertActive=!1;this._alertStage=this._alertTimerMax=this._alertTimer=0;this._missionObjective=!1;this._location=h};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.AlertTile"]=d.data.AlertTile;d.data.AlertTile.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,AlertTile".split(",");d.data.AlertTile.__super__=d.data.Tile;d.data.AlertTile.prototype=v(d.data.Tile.prototype,{set_missionObjective:function(a){return this._missionObjective=a},get_missionObjective:function(){return this._missionObjective},get_location:function(){return this._location},set_stage:function(a){return this._alertStage=a},get_stage:function(){return this._alertStage},set_timerMax:function(a){return this._alertTimerMax=a},get_timerMax:function(){return this._alertTimerMax},set_timer:function(a){return this._alertTimer=a},get_timer:function(){return this._alertTimer},set_active:function(a){return this._alertActive=a},get_active:function(){return this._alertActive},__class__:d.data.AlertTile});d.data.AsteroidDef=function(a){this._explodeTimer=0.5;this._element=a;this.doCleanup=!1;this._playWoosh=!0;this._element.addAnimationFrames("explode",["swr_fire_explosion0001","swr_fire_explosion0002","swr_fire_explosion0003","swr_fire_explosion0004","swr_fire_explosion0005"]);this._element.set_fps(12);this._rotationRate=20+100*Math.random();0.5>Math.random()&&(this._rotationRate*=-1);this._element.get_renderable().scaleX=this._element.get_renderable().scaleY=1;this._active=!0;this._collisionRadius=this._element.get_renderable().width<this._element.get_renderable().height?0.4*this._element.get_renderable().width:0.4*this._element.get_renderable().height};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.AsteroidDef"]=d.data.AsteroidDef;d.data.AsteroidDef.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,AsteroidDef".split(",");d.data.AsteroidDef.prototype={get_active:function(){return this._active},get_element:function(){return this._element},explode:function(){this._active=!1;this._element.animate("explode",1,!0);this._element.get_velocity().to(0,0);this._rotationRate=0;this._element.get_renderable().rotation=0},checkLaser:function(a,b){var f=h.WorkinMath.distBetweenPoints(a.get_pos(),this._element.get_pos())<b+this._collisionRadius&&this._active;f&&this.explode();return f},checkWhoosh:function(a,b){return this._playWoosh&&h.WorkinMath.distBetweenPoints(a.get_pos(),this._element.get_pos())<b+this._collisionRadius?(this._playWoosh=!1,e.WorkinCloud.get_instance().get_sound().playSound("pass_asteroid",this._collisionRadius/100),!0):!1},checkCollision:function(a,b){return h.WorkinMath.distBetweenPoints(a.get_pos(),this._element.get_pos())<b+this._collisionRadius},dispose:function(){this._element=null},update:function(a){this._element.get_renderable().rotation+=this._rotationRate*a;if(!this._active){this._explodeTimer-=a;0>=this._explodeTimer&&(this.doCleanup=!0);for(;0>this._element.get_pos().x-this._element.get_renderable().width*this._element.get_renderable().scaleX/2;)this._element.get_renderable().scaleX-=0.1,this._element.get_renderable().scaleY-=0.1,0>=this._element.get_renderable().scaleX&&(this.doCleanup=!0)}},__class__:d.data.AsteroidDef};d.data.BLOCK_STATE=l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.BLOCK_STATE"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,world,data,BLOCK_STATE".split(","),__constructs__:["_STATE_GROUND","_STATE_LOST","_STATE_AIR"]};d.data.BLOCK_STATE._STATE_GROUND=["_STATE_GROUND",0];d.data.BLOCK_STATE._STATE_GROUND.toString=o;d.data.BLOCK_STATE._STATE_GROUND.__enum__=d.data.BLOCK_STATE;d.data.BLOCK_STATE._STATE_LOST=["_STATE_LOST",1];d.data.BLOCK_STATE._STATE_LOST.toString=o;d.data.BLOCK_STATE._STATE_LOST.__enum__=d.data.BLOCK_STATE;d.data.BLOCK_STATE._STATE_AIR=["_STATE_AIR",2];d.data.BLOCK_STATE._STATE_AIR.toString=o;d.data.BLOCK_STATE._STATE_AIR.__enum__=d.data.BLOCK_STATE;d.data.Block=function(a){this._disabled=!1;this.gravity=70;this._blockElement=a;this._disabled=!1;this._pointerPoint=h.WorkinPoint.request();this._calcPoint=h.WorkinPoint.request();this._grabbed=this._comboing=!1;this._wobbleTimer=this._floatTimer=this._grabTimer=0;this._wobble=!1;this._wobbleDir=!0;this._soundPlayed=!1;this.setState(d.data.BLOCK_STATE._STATE_AIR)};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.Block"]=d.data.Block;d.data.Block.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,Block".split(",");d.data.Block.prototype={get_element:function(){return this._blockElement},get_pointer:function(){return this._pointerPoint},get_disabled:function(){return this._disabled},set_grabbed:function(a){return this._grabbed=a},get_grabbed:function(){return this._grabbed},get_state:function(){return this._state},disablePull:function(){this.gravity=t.random(5)+3},dispose:function(){this._pointerPoint.dispose();this._pointerPoint=null;this._calcPoint.dispose();this._blockElement=this._calcPoint=null},contains:function(a,b){return this._blockElement.contains(a,b)},grab:function(){this._grabbed=!0;this._grabTimer=1;this._comboing=!0;this._pointerPoint.x>this._blockElement.get_pos().y+5?this._wobbleDir=this._wobble=!0:this._pointerPoint.x<this._blockElement.get_pos().y-5&&(this._wobble=!0,this._wobbleDir=!1)},update:function(a){switch(this._state[1]){case 2:this._grabbed||(this._blockElement.get_velocity().x+=this.gravity*a),this._wobble&&(this._wobbleTimer+=a,this._wobbleDir?this._blockElement.get_renderable().rotation+=7*a:this._blockElement.get_renderable().rotation-=7*a,10<this._blockElement.get_renderable().rotation?this._wobbleDir=!1:-10>this._blockElement.get_renderable().rotation&&(this._wobbleDir=!0),8<this._wobbleTimer&&(this._wobbleTimer=0,this._wobble=!1)),this._grabbed&&(this._calcPoint.toPoint(this._pointerPoint),this._calcPoint.subtractPoint(this._blockElement.get_pos()),this._calcPoint.multiply(0.7+0.1*c.Inventory.getRank(c.Item.ITEM_SPEED_REPAIR)),this._blockElement.get_velocity().x=this._calcPoint.x,this._grabTimer-=a,0>this._grabTimer&&(this._grabbed=!1)),460<this._blockElement.get_pos().x?this.setState(d.data.BLOCK_STATE._STATE_LOST):0>this._blockElement.get_velocity().x*a+this._blockElement.get_pos().x-this._blockElement.get_renderable().width/2&&(this._blockElement.get_velocity().x=1)}},setState:function(a){this._state=a;switch(this._state[1]){case 0:this._floatTimer=0;this._blockElement.get_velocity().x=0;d.World.get_tweener().tween(this._blockElement.get_pos(),0.5,{y:d.minigames.MinigameCargoCrane.SHIP_FLOOR_Y},null,h.tween.Ease.EASE_IN,0.5);break;case 1:this._blockElement.get_velocity().x=0,d.World.get_tweener().tween(this._blockElement.get_pos(),0.25,{x:d.minigames.Minigame.WIDTH+this._blockElement.get_renderable().width,y:70},null,h.tween.Ease.EASE_IN)}},__class__:d.data.Block};d.data.CableDef=function(a,b,f,c){this._element=a;this._port=b;this._port.set_cable(this);this._prong=f;this._shock=c;this._pluginOffsetX=-5;this._pluginOffsetY=0;this.updateProng();this._warned=this._electrifying=!1;this._shock.animate("Idle")};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.CableDef"]=d.data.CableDef;d.data.CableDef.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,CableDef".split(",");d.data.CableDef.prototype={set_shockTimer:function(a){return this._shockTimer=a},get_shockTimer:function(){return this._shockTimer},get_isElectric:function(){return this._electrifying},get_posStartY:function(){return this._posStartY},get_posStartX:function(){return this._posStartX},get_element:function(){return this._element},get_port:function(){return this._port},get_pluggedIn:function(){return this._pluggedIn},set_dragging:function(a){return this._dragging=a},get_dragging:function(){return this._dragging},unzap:function(){this._warned=this._electrifying=!1;this._shock.animate("Idle")},zap:function(a){null==a&&(a=!0);this._electrifying||(this._shock.get_renderable().visible=!0,a?(this._shock.animate("ZAP"),this._electrifying=!0):this._warned||(e.WorkinCloud.get_instance().get_sound().playSound("sfx_welding_weld",0.6),this._shock.animate("ZAP",1),this._shock.queueAnimation("Idle"),this._warned=!0))},move:function(a,b){this._electrifying||(this._element.get_pos().x=this._posStartX+a-this._dragStartX,this._element.get_pos().y=this._posStartY+b-this._dragStartY,this._element.get_pos().x<this._port.get_element().get_pos().x?this._element.get_pos().x=this._port.get_element().get_pos().x:500<this._element.get_pos().x&&(this._element.get_pos().x=500),50>this._element.get_pos().y?this._element.get_pos().y=50:400<this._element.get_pos().y&&(this._element.get_pos().y=400),this._element.get_renderable().rotation/=2,this.updateProng())},unplug:function(){this._pluggedIn&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_back"),this._element.get_pos().x=this._port.get_element().get_pos().x+this._pluginOffsetX+25,this._element.get_pos().y=this._port.get_element().get_pos().y+this._pluginOffsetY,this.updateProng(),this._pluggedIn=!1,this._prong.get_renderable().visible=!0)},plugIn:function(a){null==a&&(a=!0);this._pluggedIn||(a&&e.WorkinCloud.get_instance().get_sound().playSound("sfx_match_rotator_match"),this._element.get_pos().x=this._port.get_element().get_pos().x+this._pluginOffsetX,this._element.get_pos().y=this._port.get_element().get_pos().y+this._pluginOffsetY,this._element.get_renderable().rotation=0,this.updateProng(),this._dragging=!1,this._pluggedIn=!0,this._prong.get_renderable().visible=!1)},drag:function(a,b){this._dragging=!0;this._dragStartX=a;this._dragStartY=b;this._posStartX=this._element.get_pos().x;this._posStartY=this._element.get_pos().y},dispose:function(){this._shock=this._prong=this._element=this._port=null},updateProng:function(){this._prong.get_pos().x=this._element.get_pos().x+5;this._prong.get_pos().y=this._element.get_pos().y;this._prong.get_renderable().rotation=this._element.get_renderable().rotation;this._shock.get_pos().x=this._element.get_pos().x;this._shock.get_pos().y=this._element.get_pos().y},setPlugInOffset:function(a,b){this._pluginOffsetX=a;this._pluginOffsetY=b},__class__:d.data.CableDef};d.data.CREW_DOOR_STATE=l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.CREW_DOOR_STATE"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,world,data,CREW_DOOR_STATE".split(","),__constructs__:["STATE_OPEN","STATE_CLOSED","STATE_FINAL"]};d.data.CREW_DOOR_STATE.STATE_OPEN=["STATE_OPEN",0];d.data.CREW_DOOR_STATE.STATE_OPEN.toString=o;d.data.CREW_DOOR_STATE.STATE_OPEN.__enum__=d.data.CREW_DOOR_STATE;d.data.CREW_DOOR_STATE.STATE_CLOSED=["STATE_CLOSED",1];d.data.CREW_DOOR_STATE.STATE_CLOSED.toString=o;d.data.CREW_DOOR_STATE.STATE_CLOSED.__enum__=d.data.CREW_DOOR_STATE;d.data.CREW_DOOR_STATE.STATE_FINAL=["STATE_FINAL",2];d.data.CREW_DOOR_STATE.STATE_FINAL.toString=o;d.data.CREW_DOOR_STATE.STATE_FINAL.__enum__=d.data.CREW_DOOR_STATE;d.data.CrewDoorDef=function(a,b,f){this._element=a;this._element.addAnimationFrames("close","door-close-001,door-close-002,door-close-003,door-close-004,door-close-005,door-close-006".split(","));this._element.addAnimationFrames("open","door-close-006,door-close-005,door-close-004,door-close-003,door-close-002,door-close-001".split(","));this._tileA=b;this._tileB=f;this.setState(d.data.CREW_DOOR_STATE.STATE_OPEN)};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.CrewDoorDef"]=d.data.CrewDoorDef;d.data.CrewDoorDef.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,CrewDoorDef".split(",");d.data.CrewDoorDef.prototype={get_state:function(){return this._state},get_tileB:function(){return this._tileB},get_tileA:function(){return this._tileA},setState:function(a){this._state=a;switch(a[1]){case 0:e.WorkinCloud.get_instance().get_sound().playSound("sfx_cargo_shut",0.3);this._element.animate("open",1);break;case 1:e.WorkinCloud.get_instance().get_sound().playSound("sfx_cargo_shut",0.3);this._element.animate("close",1);break;case 2:this._element.setTextureAsset("door-open")}},contains:function(a,b){return Math.floor((a-50+32)/64)==this._tileA.get_x()&&Math.floor((b-50+32)/64)==this._tileA.get_y()||Math.floor((a-50+32)/64)==this._tileB.get_x()&&Math.floor((b-50+32)/64)==this._tileB.get_y()},__class__:d.data.CrewDoorDef};d.data.DOOR_STATE=l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.DOOR_STATE"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,world,data,DOOR_STATE".split(","),__constructs__:["STATE_OPEN","STATE_CLOSED","STATE_FINAL"]};d.data.DOOR_STATE.STATE_OPEN=["STATE_OPEN",0];d.data.DOOR_STATE.STATE_OPEN.toString=o;d.data.DOOR_STATE.STATE_OPEN.__enum__=d.data.DOOR_STATE;d.data.DOOR_STATE.STATE_CLOSED=["STATE_CLOSED",1];d.data.DOOR_STATE.STATE_CLOSED.toString=o;d.data.DOOR_STATE.STATE_CLOSED.__enum__=d.data.DOOR_STATE;d.data.DOOR_STATE.STATE_FINAL=["STATE_FINAL",2];d.data.DOOR_STATE.STATE_FINAL.toString=o;d.data.DOOR_STATE.STATE_FINAL.__enum__=d.data.DOOR_STATE;d.data.DoorDef=function(a,b,f){this._element=a;this._roomA=b;this._roomB=f;this.setState(d.data.DOOR_STATE.STATE_CLOSED)};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.DoorDef"]=d.data.DoorDef;d.data.DoorDef.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,DoorDef".split(",");d.data.DoorDef.prototype={get_element:function(){return this._element},get_state:function(){return this._state},get_roomB:function(){return this._roomB},get_roomA:function(){return this._roomA},setState:function(a){this._state=a;switch(a[1]){case 0:this._element.setTextureAsset("door-on");break;case 1:this._element.setTextureAsset("door-off");break;case 2:this._element.setTextureAsset("door-open")}},dispose:function(){this._element=null},__class__:d.data.DoorDef};d.data.Parallaxer=function(a,b,f){null==f&&(f=!0);this._panelA=a;this._panelB=b;(this._vertical=f)?(this._panelB.get_pos().y=this._panelA.get_pos().y+this._panelA.get_renderable().height,this._panelB.get_pos().x=this._panelA.get_pos().x):(this._panelB.get_pos().y=this._panelA.get_pos().y,this._panelB.get_pos().x=this._panelA.get_pos().x+this._panelA.get_renderable().width)};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.Parallaxer"]=d.data.Parallaxer;d.data.Parallaxer.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,Parallaxer".split(",");d.data.Parallaxer.prototype={dispose:function(){this._panelB=this._panelA=null},move:function(a){this._vertical?(this._panelA.get_pos().y+=a,this._panelB.get_pos().y+=a,0<a&&this._panelA.get_pos().y>this._panelA.get_renderable().height*this._panelA.get_originY()?(this._panelA.get_pos().y-=this._panelA.get_renderable().height,this._panelB.get_pos().y-=this._panelA.get_renderable().height):0>a&&this._panelA.get_pos().y<-this._panelA.get_renderable().height+this._panelA.get_renderable().height*this._panelA.get_originY()&&(this._panelA.get_pos().y+=this._panelA.get_renderable().height,this._panelB.get_pos().y+=this._panelA.get_renderable().height)):(this._panelA.get_pos().x+=a,this._panelB.get_pos().x+=a,0<a&&this._panelA.get_pos().x>this._panelA.get_renderable().width*this._panelA.get_originX()?(this._panelA.get_pos().x-=this._panelA.get_renderable().width,this._panelB.get_pos().x-=this._panelA.get_renderable().width):0>a&&this._panelA.get_pos().x<-this._panelA.get_renderable().width+this._panelA.get_renderable().width*this._panelA.get_originX()&&(this._panelA.get_pos().x+=this._panelA.get_renderable().width,this._panelB.get_pos().x+=this._panelA.get_renderable().width))},__class__:d.data.Parallaxer};d.data.PortDef=function(a){this._element=a};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.PortDef"]=d.data.PortDef;d.data.PortDef.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,PortDef".split(",");d.data.PortDef.prototype={get_element:function(){return this._element},set_cable:function(a){return this._cable=a},get_cable:function(){return this._cable},dispose:function(){this._element=this._cable=null},__class__:d.data.PortDef};d.data.ROOM_TYPE=l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.ROOM_TYPE"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,world,data,ROOM_TYPE".split(","),__constructs__:["EMPTY","FIRE","CARGO"]};d.data.ROOM_TYPE.EMPTY=["EMPTY",0];d.data.ROOM_TYPE.EMPTY.toString=o;d.data.ROOM_TYPE.EMPTY.__enum__=d.data.ROOM_TYPE;d.data.ROOM_TYPE.FIRE=["FIRE",1];d.data.ROOM_TYPE.FIRE.toString=o;d.data.ROOM_TYPE.FIRE.__enum__=d.data.ROOM_TYPE;d.data.ROOM_TYPE.CARGO=["CARGO",2];d.data.ROOM_TYPE.CARGO.toString=o;d.data.ROOM_TYPE.CARGO.__enum__=d.data.ROOM_TYPE;d.data.ROOM_STATE=l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.ROOM_STATE"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,world,data,ROOM_STATE".split(","),__constructs__:["STATE_OPEN","STATE_SELECTED","STATE_CLOSED"]};d.data.ROOM_STATE.STATE_OPEN=["STATE_OPEN",0];d.data.ROOM_STATE.STATE_OPEN.toString=o;d.data.ROOM_STATE.STATE_OPEN.__enum__=d.data.ROOM_STATE;d.data.ROOM_STATE.STATE_SELECTED=["STATE_SELECTED",1];d.data.ROOM_STATE.STATE_SELECTED.toString=o;d.data.ROOM_STATE.STATE_SELECTED.__enum__=d.data.ROOM_STATE;d.data.ROOM_STATE.STATE_CLOSED=["STATE_CLOSED",2];d.data.ROOM_STATE.STATE_CLOSED.toString=o;d.data.ROOM_STATE.STATE_CLOSED.__enum__=d.data.ROOM_STATE;d.data.RoomDef=function(a,b,f,c,e){this._element=a;this._neighbors=[];this._sizeX=b;this._sizeY=f;this._locX=c;this._locY=e;this.typeSet=!1;this._type=d.data.ROOM_TYPE.EMPTY;0==c&&0==e?this.setState(d.data.ROOM_STATE.STATE_SELECTED,!0):this.setState(d.data.ROOM_STATE.STATE_CLOSED,!0)};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.RoomDef"]=d.data.RoomDef;d.data.RoomDef.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,RoomDef".split(",");d.data.RoomDef.prototype={get_type:function(){return this._type},get_state:function(){return this._state},get_sizeY:function(){return this._sizeY},get_sizeX:function(){return this._sizeX},get_y:function(){return this._locY},get_x:function(){return this._locX},get_neighbors:function(){return this._neighbors},setState:function(a,b){null==b&&(b=!1);if(!(a==d.data.ROOM_STATE.STATE_CLOSED&&0==this._locX&&0==this._locY))switch(this._state=a,a[1]){case 0:switch(this._type[1]){case 1:d.World.get_tweener().tween(this._icon.get_renderable(),0.5,{alpha:0,scaleX:0,scaleY:0},null,h.tween.Ease.EASE_QUAD);break;case 2:d.World.get_tweener().tween(this._icon.get_renderable(),0.5,{alpha:0,scaleX:0,scaleY:0},null,h.tween.Ease.EASE_QUAD)}break;case 1:this._element.setTextureAsset(this.get_sizeX()+
"x"+this.get_sizeY()+"-room-selected");b||e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_build2",0.5);break;case 2:this._element.setTextureAsset(this.get_sizeX()+"x"+this.get_sizeY()+"-room"),b||e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_back")}},select:function(){if(this._state==d.data.ROOM_STATE.STATE_SELECTED)this.setState(d.data.ROOM_STATE.STATE_CLOSED);else if(this._state==d.data.ROOM_STATE.STATE_CLOSED)for(var a=0,b=this._neighbors;a<b.length;){var f=b[a];++a;if(f.get_state()==d.data.ROOM_STATE.STATE_SELECTED)return this.setState(d.data.ROOM_STATE.STATE_SELECTED),f}return null},contains:function(a,b){return this._element.contains(a,b)},dispose:function(){null!=this._icon&&(d.World.get_tweener().stop(this._icon.get_renderable()),this._element.removeElement(this._icon));this._element=this._icon=null},addNeighbor:function(a){if(a==this)return!1;for(var b=0,f=this._neighbors;b<f.length;){var c=f[b];++b;if(c==a)return!1}this._neighbors.push(a);return!0},setType:function(a){this.typeSet=!0;this._type=a;switch(this._type[1]){case 1:this._icon=this._element.addElement(new j.AnimatedElement({asset:this.get_sizeX()+"x"+this.get_sizeY()+"-flame-001",x:this._element.get_renderable().width/2,y:this._element.get_renderable().height/2,origin:0.5,useCamera:!1,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._icon.addAnimationFrames("idle",[this.get_sizeX()+"x"+this.get_sizeY()+"-flame-001",this.get_sizeX()+"x"+this.get_sizeY()+"-flame-002",this.get_sizeX()+"x"+this.get_sizeY()+"-flame-003"]);this._icon.set_fps(5);this._icon.animate("idle");break;case 2:this._icon=this._element.addElement(new j.AnimatedElement({asset:this.get_sizeX()+"x"+this.get_sizeY()+"-cargo",x:this._element.get_renderable().width/2,y:this._element.get_renderable().height/2,origin:0.5,useCamera:!1,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}))}},__class__:d.data.RoomDef};d.data.SearchTeamDef=function(a,b,f,c){this._body=a;this._target=b;this._map=f;this._start=this.stuck=!1;this._pathTimer=2;this._searchTimer=0;this._body.get_renderable().alpha=0;this._vectorMath=h.WorkinPoint.request(0,0,0);this._vectorMath2=h.WorkinPoint.request(0,0,0);this._blips=c;a=0;for(b=this._blips.length;a<b;){f=a++;switch(f){case 0:this._vectorMath.to(0,-10);break;case 1:this._vectorMath.to(10,10);break;default:this._vectorMath.to(-10,10)}this._vectorMath.rotate(this._body.get_renderable().rotation);this._blips[f].get_pos().x=this._body.get_pos().x+this._vectorMath.x;this._blips[f].get_pos().y=this._body.get_pos().y+this._vectorMath.y;this._blips[f].get_renderable().rotation=this._body.get_renderable().rotation-90}};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.SearchTeamDef"]=d.data.SearchTeamDef;d.data.SearchTeamDef.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,SearchTeamDef".split(",");d.data.SearchTeamDef.prototype={get_body:function(){return this._body},seekNextPoint:function(){return this._body.moveIt(this._target.get_currentX(),this._target.get_currentY())},update:function(a){var b=this;if(this._body.isMoving)for(var f=0,m=this._blips.length;f<m;){var p=f++;switch(p){case 0:this._vectorMath.to(10,20);break;case 1:this._vectorMath.to(-15,18);break;default:this._vectorMath.to(0,-2)}this._vectorMath.rotate(this._body.get_renderable().rotation);d.World.get_tweener().tween(this._blips[p].get_pos(),0.3+0.2*p,{x:this._body.get_pos().x+this._vectorMath.x,y:this._body.get_pos().y+this._vectorMath.y},!0,h.tween.Ease.EASE_QUAD_OUT);d.World.get_tweener().tween(this._blips[p].get_renderable(),0.1+0.1*p,{rotation:e.WorkinUtils.normalizeAngle(this._body.get_renderable().rotation-
this._blips[p].get_renderable().rotation)+this._blips[p].get_renderable().rotation},!0,h.tween.Ease.EASE_QUAD_OUT)}this._pathTimer-=a;0>this._pathTimer&&(this.seekNextPoint(),this._pathTimer=2);if(!this._body.isMoving&&0<this._body.get_currentPath().length)this._body.get_currentY()>this._body.get_currentPath()[0].get_y()&&180!=this._lastRotation?(this._lastRotation=180,this._body.get_renderable().rotation=180):this._body.get_currentY()<this._body.get_currentPath()[0].get_y()&&0!=this._lastRotation&&(this._lastRotation=0,this._body.get_renderable().rotation=0),this._body.get_currentX()<this._body.get_currentPath()[0].get_x()&&-90!=this._lastRotation?(this._lastRotation=-90,this._body.get_renderable().rotation=-90):this._body.get_currentX()>this._body.get_currentPath()[0].get_x()&&90!=this._lastRotation&&(this._lastRotation=90,this._body.get_renderable().rotation=90),this._body.setNewTilePos(this._body.get_currentPath()[0].get_x(),this._body.get_currentPath()[0].get_y()),this._body.isMoving=!0,f=d.World.CHOPPER_BASE_MOVETIME-0.02*e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_DIFFICULTY),d.World.get_tweener().tween(this._body.get_pos(),3.2*f,{x:this._body.get_currentPath()[0].get_x()*this._map.get_tileSize()+this._map.get_pos().x,y:this._body.get_currentPath()[0].get_y()*this._map.get_tileSize()+this._map.get_pos().y},null,h.tween.Ease.EASE_LINEAR).onComplete(function(){b._body.get_currentPath().splice(0,1);b._body.isMoving=!1});else if(!this._body.isMoving&&!this.seekNextPoint()&&(this._searchTimer-=a,0>=this._searchTimer)){f=0;for(a=this._blips;f<a.length;)m=a[f],++f,p=360*Math.random()-90,d.World.get_tweener().tween(m.get_renderable(),0.5,{rotation:p},!0,h.tween.Ease.EASE);this._searchTimer=e.WorkinCloud.get_instance().get_random().getRandomFloat(0.8,2)}},surroundTarget:function(a){for(var b=0,f=this._blips.length;b<f;){var c=b++;switch(c){case 0:this._vectorMath.to(15,15);break;case 1:this._vectorMath.to(-22.5,12);break;default:this._vectorMath.to(0,-18)}this._vectorMath.rotate(this._body.get_renderable().rotation);this._vectorMath2.toPoint(a.get_pos());this._vectorMath2.subtractPoint(this._blips[c].get_pos());this._vectorMath2.normalizeTo(1);var p=57.2957795*Math.atan2(this._vectorMath2.y,this._vectorMath2.x)-90;d.World.get_tweener().tween(this._blips[c].get_pos(),0.5+0.5*c,{x:a.get_pos().x+this._vectorMath.x,y:a.get_pos().y+this._vectorMath.y},!0,h.tween.Ease.EASE_QUAD_OUT);d.World.get_tweener().tween(this._blips[c].get_renderable(),0.25+0.25*c,{rotation:e.WorkinUtils.normalizeAngle(p-this._blips[c].get_renderable().rotation)+
this._blips[c].get_renderable().rotation},!0,h.tween.Ease.EASE_QUAD_OUT)}},__class__:d.data.SearchTeamDef};d.data.InteractDirection=l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.InteractDirection"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,world,data,InteractDirection".split(","),__constructs__:["UP","LEFT","RIGHT","DOWN","ANY"]};d.data.InteractDirection.UP=["UP",0];d.data.InteractDirection.UP.toString=o;d.data.InteractDirection.UP.__enum__=d.data.InteractDirection;d.data.InteractDirection.LEFT=["LEFT",1];d.data.InteractDirection.LEFT.toString=o;d.data.InteractDirection.LEFT.__enum__=d.data.InteractDirection;d.data.InteractDirection.RIGHT=["RIGHT",2];d.data.InteractDirection.RIGHT.toString=o;d.data.InteractDirection.RIGHT.__enum__=d.data.InteractDirection;d.data.InteractDirection.DOWN=["DOWN",3];d.data.InteractDirection.DOWN.toString=o;d.data.InteractDirection.DOWN.__enum__=d.data.InteractDirection;d.data.InteractDirection.ANY=["ANY",4];d.data.InteractDirection.ANY.toString=o;d.data.InteractDirection.ANY.__enum__=d.data.InteractDirection;d.data.TrooperDef=function(a,b){this._body=a;this._map=b;this._start=!1;this._oscillateOffset=this._oscillateTheta=this._lastRotation=0;this._body.addElement(new j.Element({asset:"stormtrooper-head",x:0,y:-15,originX:0.5,originY:1,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,useCamera:!1}));this._body.addElement(new j.Element({asset:"vision-range",x:0,y:-10,originX:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,useCamera:!1}))};l["com.disney_channel.star_wars_rebels.chopper_chase.world.data.TrooperDef"]=d.data.TrooperDef;d.data.TrooperDef.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,data,TrooperDef".split(",");d.data.TrooperDef.prototype={get_body:function(){return this._body},getRotation:function(){return this._lastRotation},seekNextPoint:function(){var a=this._map.getNextEnemyPoint();this._body.moveIt(a[0],a[1])},update:function(a){var b=this;this._start&&(this._body.isMoving&&(this._oscillateTheta+=150*a,this._oscillateOffset=10*Math.sin(this._oscillateTheta*Math.PI/180),this._body.get_renderable().rotation+=this._oscillateOffset*a),!this._body.isMoving&&0<this._body.get_currentPath().length?(this._body.get_currentY()>this._body.get_currentPath()[0].get_y()&&180!=this._lastRotation?(this._lastRotation=180,this._body.get_renderable().rotation=180):this._body.get_currentY()<this._body.get_currentPath()[0].get_y()&&0!=this._lastRotation&&(this._lastRotation=0,this._body.get_renderable().rotation=0),this._body.get_currentX()<this._body.get_currentPath()[0].get_x()&&-90!=this._lastRotation?(this._lastRotation=-90,this._body.get_renderable().rotation=-90):this._body.get_currentX()>this._body.get_currentPath()[0].get_x()&&90!=this._lastRotation&&(this._lastRotation=90,this._body.get_renderable().rotation=90),this._body.setNewTilePos(this._body.get_currentPath()[0].get_x(),this._body.get_currentPath()[0].get_y()),this._body.isMoving=!0,a=d.World.CHOPPER_BASE_MOVETIME-0.02*e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_DIFFICULTY),d.World.get_tweener().tween(this._body.get_pos(),2*a,{x:this._body.get_currentPath()[0].get_x()*this._map.get_tileSize()+this._map.get_pos().x,y:this._body.get_currentPath()[0].get_y()*this._map.get_tileSize()+this._map.get_pos().y},null,h.tween.Ease.EASE_LINEAR).onComplete(function(){b._body.get_currentPath().splice(0,1);b._body.isMoving=!1})):this._body.isMoving||this.seekNextPoint())},start:function(){this._start=!0},__class__:d.data.TrooperDef};d.elements={};d.elements.AlertClock=function(a,b,f){f.get_active()&&(this._visibleStage=-1,this._standard=b,j.Element.call(this,a),this._alertTile=f,this._timeLeft=this._maxTime=this._alertTile.get_timer()|0,this._dial=new j.Element({originY:0.5,asset:"SWR_Alert_8",useCamera:!1}),this.addElement(this._dial),this.get_renderable().rotation=-90,132>this.get_pos().y&&(this.get_pos().y=132,this.get_renderable().scaleX=-1),250>this._pos.x&&175>this._pos.y&&(this._pos.y=175))};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.AlertClock"]=d.elements.AlertClock;d.elements.AlertClock.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,AlertClock".split(",");d.elements.AlertClock.__super__=j.Element;d.elements.AlertClock.prototype=v(j.Element.prototype,{update:function(a){j.Element.prototype.update.call(this,a);this._alertTile.get_active()&&(this._timeLeft=this._alertTile.get_timer(),a=this._timeLeft/this._maxTime,0>=a?this._dial.setTextureAsset("SWR_Alert_8"):0.125>=a?this._dial.setTextureAsset("SWR_Alert_7"):0.25>=a?this._dial.setTextureAsset("SWR_Alert_6"):0.375>=a?this._dial.setTextureAsset("SWR_Alert_5"):0.5>=a?this._dial.setTextureAsset("SWR_Alert_4"):0.625>=a?this._dial.setTextureAsset("SWR_Alert_3"):0.75>=a?this._dial.setTextureAsset("SWR_Alert_2"):0.875>=a?this._dial.setTextureAsset("SWR_Alert_1"):this._dial.setTextureAsset("SWR_Alert_0"),a=this._visibleStage,this._standard?2<=this._alertTile.get_stage()?2!=this._visibleStage&&(this._visibleStage=2,this.setTextureAsset("SWR_Alert_High"),this._dial.get_pos().x=0):1<=this._alertTile.get_stage()?1!=this._visibleStage&&(this._visibleStage=1,this.setTextureAsset("SWR_Alert_Med"),this._dial.get_pos().x=0):0!=this._visibleStage&&(this._visibleStage=0,this.setTextureAsset("SWR_Alert_low"),this._dial.get_pos().x=-2):2<=this._alertTile.get_stage()?2!=this._visibleStage&&(this._visibleStage=2,this.setTextureAsset("SWR_Alert_ESSENTIAL_high"),this._dial.get_pos().x=0):1<=this._alertTile.get_stage()?1!=this._visibleStage&&(this._visibleStage=1,this.setTextureAsset("SWR_Alert_ESSENTIAL_med"),this._dial.get_pos().x=0):0!=this._visibleStage&&(this._visibleStage=0,this.setTextureAsset("SWR_Alert_ESSENTIAL"),this._dial.get_pos().x=0),this._visibleStage!=a&&(this._render.scaleX=this._render.scaleY=0.75,d.World.get_tweener().tween(this._render,0.5,{scaleX:1,scaleY:1},null,h.tween.Ease.EASE_ELASTIC_OUT)))},__class__:d.elements.AlertClock});d.elements.BitmapLayer=function(a,b,f,c){null==c&&(c=!1);this._maxSize=1024;j.Element.call(this,a);b>this._maxSize&&(b=this._maxSize);f>this._maxSize&&(f=this._maxSize);this._bitmapTexture=B.createTexture(b,f);this.setImageSprite(new r.ImageSprite(this._bitmapTexture));this._canvasColor=16777215;this.clearLayer(c);this._bufferLayer=null;this._alphaThreshold=0};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.BitmapLayer"]=d.elements.BitmapLayer;d.elements.BitmapLayer.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,BitmapLayer".split(",");d.elements.BitmapLayer.__super__=j.Element;d.elements.BitmapLayer.prototype=v(j.Element.prototype,{_checkPixelColorMatchWithPixelNumber:function(a,b,f,c,d,e,h){null==h&&(h=!1);var e=d.data[a],g=d.data[a+1],a=d.data[a+2];return h||this.inRange(b,e,1)||this.inRange(f,g,1)||this.inRange(c,a,1)?!0:!1},maskWithBitmap:function(a){a=a.get_texture();this._bitmapTexture.get_graphics().save();this._bitmapTexture.get_graphics().setBlendMode(r.BlendMode.Mask);this._bitmapTexture.get_graphics().drawImage(a,0,0);this._bitmapTexture.get_graphics().restore()},colorMask:function(a,b,f,c,d){this._bitmapTexture.get_graphics().setBlendMode(r.BlendMode.Mask);a=e.WorkinCloud.get_instance().get_assets().getTexture(a);this._bitmapTexture.get_graphics().scale(d,d);this._bitmapTexture.get_graphics().setAlpha(0);this._bitmapTexture.get_graphics().fillRect(16777215,0,0,a.get_width(),a.get_height());this._bitmapTexture.get_graphics().setAlpha(1);this._bitmapTexture.get_graphics().setBlendMode(r.BlendMode.Normal);this._bitmapTexture.get_graphics().fillRect(b,0,0,a.get_width(),a.get_height());this._bitmapTexture.get_graphics().setBlendMode(r.BlendMode.Mask);this._bitmapTexture.get_graphics().drawImage(a,0,0);this._bitmapTexture.get_graphics().setBlendMode(r.BlendMode.Normal)},_createPosPair:function(a,b){return[a,b]},_findAlphaWithBGColor:function(){return 0},_blend:function(a,b,f,c,d,e){var h=this.calcBGColorAlpha(this._alphaThreshold,b,c,e,a,f,d),g=1-h;return[h*a+g*b|0,h*f+g*c|0,h*d+g*e|0,255]},calcBGColorAlpha:function(a,b,f,c,d,h,g){a=this.calcDiff(255,d)+this.calcDiff(255,h)+this.calcDiff(255,g);return e.WorkinUtils.clamp(a/765,0,1)},calcDiff:function(a,b){return a-b},inRange:function(a,b,f){return this.calcDiff(a,b)<=f?!0:!1},_checkPixelColorMatchWhite:function(a,b,f,c){if(0>a||a>c.get_texture().get_width()||0>b||b>c.get_texture().get_height())return!1;var a=4*((a+b*c.get_texture().get_width()|0)-1),b=f[a+1],c=f[a+2],d=f[a+3];return 255==f[a]&&255==b&&255==c||d<=this._alphaThreshold?!0:!1},_checkPixelColorMatch:function(a,b,f,c,d,e,h,g,i){if(0>a||a>g||0>b||b>i)return!1;this._pixelNumber=4*(a+b*g-1);this._r=e[this._pixelNumber];this._g=e[this._pixelNumber+1];this._b=e[this._pixelNumber+2];this._a=e[this._pixelNumber+3];return this._a<=this._alphaThreshold||255==this._r&&255==this._g&&255==this._b?!0:!1},_findTop:function(a,b,f,c,d,e,h,g,i){for(;this._checkPixelColorMatch(a,b-1,f,c,d,e,this,g,i);)b-=1;return[a,b]},getPixelData:function(){return null},drawPattern:function(a,b,f,c,d){this._bitmapTexture.get_graphics().drawPattern(e.WorkinCloud.get_instance().get_assets().getTexture(a),b,f,c,d)},drawImageFromTexture:function(a,b,f){this._bitmapTexture.get_graphics().drawImage(a,b,f)},drawImage:function(a,b,f,c){null==c&&(c=1);this._bitmapTexture.get_graphics().scale(c,c);this._bitmapTexture.get_graphics().drawImage(e.WorkinCloud.get_instance().get_assets().getTexture(a),b,f)},drawRect:function(a,b,f,c,d){this._bitmapTexture.get_graphics().fillRect(a,b,f,c,d)},drawLine:function(){},drawTileLayer:function(a,b,f){null==new r.ImageSprite(e.WorkinCloud.get_instance().get_assets().getTexture(f))&&e.WorkinCloud.get_instance().log("[BitmapLayer](drawTile) ERROR: File not loaded : "+f)},endDraw:function(){},beginDraw:function(){},initBlankLayer:function(){this._bitmapTexture.get_graphics().save();this._bitmapTexture.get_graphics().setAlpha(0);this.drawRect(0,0,0,this._bitmapTexture.get_width(),this._bitmapTexture.get_width());this._bitmapTexture.get_graphics().restore()},scale:function(a){this._bitmapTexture.get_graphics().scale(a,a)},clearLayer:function(a){null==a&&(a=!1);a?(this._bitmapTexture.get_graphics().setAlpha(0),this.drawRect(0,0,0,this._bitmapTexture.get_width(),this._bitmapTexture.get_width()),this._bitmapTexture.get_graphics().save(),this._bitmapTexture.get_graphics().setBlendMode(r.BlendMode.Mask),this._bitmapTexture.get_graphics().setAlpha(0),this._bitmapTexture.get_graphics().fillRect(0,0,0,this._bitmapTexture.get_width(),this._bitmapTexture.get_height()),this._bitmapTexture.get_graphics().restore()):(this._bitmapTexture.get_graphics().setAlpha(1),this.drawRect(this._canvasColor,0,0,this._bitmapTexture.get_width(),this._bitmapTexture.get_width()));this._bitmapTexture.get_graphics().setAlpha(1)},resetImageData:function(){},dispose:function(){this._bitmapTexture=null;j.Element.prototype.dispose.call(this)},get_texture:function(){return this._bitmapTexture},__class__:d.elements.BitmapLayer,__properties__:v(j.Element.prototype.__properties__,{get_texture:"get_texture"})});j.AnimatedElement=function(a){if(null!=a.movie&&""!=a.movie&&(null==a.library||""==a.library)&&(null==a.asset||""==a.asset))a.asset=a.movie;this._animations=new w.StringMap;this._queuedAnimations=[];this._currentAnimDef=null;this._lastFrame=-1;this._currentFrame=0;this._currentAnimation="";this._fps=24;this._animationStopped=!0;this._library="";this._loopComplete=!1;this._symbol="";this._workFrame=0;j.Element.call(this,a)};l["com.workinman.display.AnimatedElement"]=j.AnimatedElement;j.AnimatedElement.__name__=["com","workinman","display","AnimatedElement"];j.AnimatedElement.__super__=j.Element;j.AnimatedElement.prototype=v(j.Element.prototype,{_onAnimationComplete:function(){},_setFrame:function(a){switch(this._format[1]){case 2:this._movieSprite.set_position(Math.floor(a)/this._frames*this._duration);break;default:this.setTextureAsset(this._currentAnimDef.get_frameIds()[Math.floor(a-1)])}},_runAnimation:function(a){if(""!=this._currentAnimation&&!0==this._doLoop()&&!1==this._animationStopped&&(this._currentFrame=!1==this._currentAnimDef.get_reverse()?this._currentFrame+this._fps*a:this._currentFrame-this._fps*a,!1==this._currentAnimDef.get_reverse()?Math.floor(this._currentFrame)>this._currentAnimDef.get_end()&&(this._currentFrame=this._currentAnimDef.get_start()+(this._currentFrame-Math.floor(this._currentFrame)),this._loopComplete=!0):Math.ceil(this._currentFrame)<this._currentAnimDef.get_start()&&(this._currentFrame=this._currentAnimDef.get_end()+(this._currentFrame-Math.ceil(this._currentFrame)),this._loopComplete=!0),!0==this._loopComplete&&(this._loopComplete=!1,this._currentLoop--,!1==this._doLoop()&&(this._animationStopped=!0,this._currentFrame=!1==this._currentAnimDef.get_reverse()?this._currentAnimDef.get_end():this._currentAnimDef.get_start(),0<this._queuedAnimations.length?(this._doAnimate(this._queuedAnimations[0].get_name(),this._queuedAnimations[0].get_loops(),this._queuedAnimations[0].get_force()),this._queuedAnimations[0].dispose(),this._queuedAnimations.splice(0,1)):this._onAnimationComplete())),this._workFrame=!1==this._currentAnimDef.get_reverse()?Math.floor(this._currentFrame):Math.ceil(this._currentFrame),(this._format!=j.ELEMENT_FORMAT.MOVIE||null!=this._movieSprite)&&this._workFrame!=this._lastFrame))this._setFrame(this._workFrame),this._lastFrame=this._workFrame},_doLoop:function(){return 0<this._currentLoop||this._flagLoop},update:function(a){j.Element.prototype.update.call(this,a);this._runAnimation(a)},clearQueue:function(){for(;0<this._queuedAnimations.length;)this._queuedAnimations.pop().dispose()},queueAnimation:function(a,b,f){null==f&&(f=!1);null==b&&(b=0);this._queuedAnimations.push(j.QueuedAnimation.request(a,b,f));return this},hasAnimation:function(a){return this._animations.exists(a)},startAnimation:function(){this._animationStopped=!1},stopAnimation:function(){this._animationStopped=!0},setLoop:function(a){this._currentLoop=a;this._flagLoop=0==a;return this},_doAnimate:function(a,b,f){null==f&&(f=!1);null==b&&(b=0);this._currentAnimation==a&&!1==f||(null!=this._animations&&this._animations.exists(a)?(this._currentAnimDef=null,this._currentAnimDef=this._animations.get(a),this._currentFrame=!1==this._currentAnimDef.get_reverse()?this._currentAnimDef.get_start():this._currentAnimDef.get_end(),this._currentAnimation=a,this.setLoop(b),this._animationStopped=!1,this._setFrame(this._currentFrame)):e.WorkinCloud.get_instance().log("[AnimatedElement](_doAnimate) Animation not found: "+a))},animate:function(a,b,f){null==f&&(f=!1);null==b&&(b=0);this.clearQueue();this._doAnimate(a,b,f);return this},addAnimationFrames:function(a,b){this._animations.set(a,j.AnimationDef.request(a,-1,-1,b));return this},addAnimationFlump:function(a,b,f){this._animations.set(a,j.AnimationDef.request(a,b-1,f-1));return this},_buildAnimationsFromLayers:function(a,b){for(var f=function(a){return function(){return a.iterator()}}(this._animations)();f.hasNext();)f.next().dispose();e.WorkinUtils.emptyMap(this._animations);for(var f=null,c=0,d=a.layers;c<d.length;){var h=d[c];++c;if(null!=f)break;for(var g=0,i=h.keyframes;g<i.length;){var j=i[g];++g;if(null!=j.label){f=h;break}}}b&&null;if(null!=f){c=0;for(d=f.keyframes;c<d.length;)j=d[c],++c,this.addAnimationFlump(j.label,j.index+1,j.index+j.duration),b&&null}else null},setLibraryAndSymbol:function(a,b,f){if(""==b)for(var c=e.WorkinCloud.get_instance().get_assets().getLibrary(a)._symbols.iterator();c.hasNext();){var d=c.next();I.__instanceof(d,C.MovieSymbol)&&0<I.__cast(d,C.MovieSymbol).frames&&(b=d.get_name(),f&&null)}if(a==this._library&&b==this._symbol)return this;this._library=a;this._symbol=b;a=e.WorkinCloud.get_instance().get_assets().getLibrary(this._library)._symbols.get(this._symbol);this._buildAnimationsFromLayers(a,f);this._duration=a.duration;this._frames=a.frames;this.setImageSprite(a.createSprite());this._movieSprite=this._imageSprite;this._movieSprite.set_paused(!0);return this},setSymbol:function(a){return this.setLibraryAndSymbol(this._library,a,!1)},set_animationFrameRelative:function(a){this._currentFrame=this._currentAnimDef.get_start()+a;return this.get_animationFrameRelative()},get_animationFrameRelative:function(){return this._currentFrame-this._currentAnimDef.get_start()|0},set_animationFrame:function(a){this._currentFrame=a;this._setFrame(this._currentFrame);this.stopAnimation();return this._currentFrame|0},get_animationFrame:function(){return this._currentFrame|0},set_animationRatio:function(a){this._newFrame=Math.floor(a*(this._currentAnimDef.get_end()-this._currentAnimDef.get_start())+this._currentAnimDef.get_start());this._newFrame!=this._currentFrame&&this.set_animationFrame(this._newFrame);return this.get_animationRatio()},get_animationRatio:function(){return(this._currentFrame-this._currentAnimDef.get_start())/(this._currentAnimDef.get_end()-this._currentAnimDef.get_end())},set_fps:function(a){return this._fps=a},get_fps:function(){return this._fps},get_currentId:function(){return this._currentAnimation},get_currentAnimation:function(){return this._currentAnimation},_cleanOldFormat:function(a){switch(a[1]){case 2:this._movieSprite=null;break;default:j.Element.prototype._cleanOldFormat.call(this,a)}},_determineFormat:function(a){I.__instanceof(a,C.MovieSprite)?this._setFormat(j.ELEMENT_FORMAT.MOVIE):j.Element.prototype._determineFormat.call(this,a)},renew:function(a){j.Element.prototype.renew.call(this,a);a.library&&this.setLibraryAndSymbol(a.library,null!=a.movie?a.movie:"",null!=a.trace?a.trace:!1);a.fps&&(this._fps=a.fps)},dispose:function(){if(!this.get_isPooled()){this._movieSprite=null;for(var a=function(a){return function(){return a.iterator()}}(this._animations)();a.hasNext();)a.next().dispose();this._currentAnimDef=this._animations=null;this.clearQueue();this._queuedAnimations=null}j.Element.prototype.dispose.call(this)},__class__:j.AnimatedElement,__properties__:v(j.Element.prototype.__properties__,{get_currentAnimation:"get_currentAnimation",get_currentId:"get_currentId",set_fps:"set_fps",get_fps:"get_fps",set_animationRatio:"set_animationRatio",get_animationRatio:"get_animationRatio",set_animationFrame:"set_animationFrame",get_animationFrame:"get_animationFrame",set_animationFrameRelative:"set_animationFrameRelative",get_animationFrameRelative:"get_animationFrameRelative"})});d.elements.Chopper=function(a,b,f,c){j.AnimatedElement.call(this,a);this._previousTileLocX=f;this._previousTileLocY=c;this._currentTileLocX=f;this._currentTileLocY=c;this._map=b;this._currentPath=[];this.isMoving=!1;this.get_pos().to(this._map.get_pos().x+this._currentTileLocX*this._map.get_tileSize(),this._map.get_pos().y+this._currentTileLocY*this._map.get_tileSize())};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.Chopper"]=d.elements.Chopper;d.elements.Chopper.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,Chopper".split(",");d.elements.Chopper.__super__=j.AnimatedElement;d.elements.Chopper.prototype=v(j.AnimatedElement.prototype,{get_previousY:function(){return this._previousTileLocY},get_previousX:function(){return this._previousTileLocX},get_currentY:function(){return this._currentTileLocY},get_currentX:function(){return this._currentTileLocX},get_currentPath:function(){return this._currentPath},setNewTilePos:function(a,b,f){null==f&&(f=!1);this._previousTileLocX=this._currentTileLocX;this._previousTileLocY=this._currentTileLocY;this._currentTileLocX=a;this._currentTileLocY=b;f&&this.get_pos().to(this._map.get_pos().x+this._currentTileLocX*this._map.get_tileSize(),this._map.get_pos().y+this._currentTileLocY*this._map.get_tileSize(),-(this._map.get_pos().y+this._currentTileLocY*this._map.get_tileSize()))},stopPathing:function(){this.moveIt(this.get_currentX(),this.get_currentY())},_reconstructPath:function(a,b,f){null==f&&(f=0);for(var c=!1,d=0;d<b.length;){var e=b[d];++d;a.cameFromTile==e&&(c=!0)}null!=a.cameFromTile&&a.cameFromTile!=a&&!c&&(b.push(a),this._reconstructPath(a.cameFromTile,b,f+1));this._currentPath.push(a)},moveIt:function(a,b){if(0>a||0>b||a>this._map.get_tiles().length-1||b>this._map.get_tiles()[0].length-1)return!1;var f=this._map.get_tiles()[this._currentTileLocX][this._currentTileLocY],c=[],e=[f];this._currentPath=[];f.travelScore=0;for(f.estimateScore=d.elements.Map.distanceBetweenTiles(f,this._map.get_tiles()[a][b]);0<e.length;){for(var f=e[0],h=Math.POSITIVE_INFINITY,g=0;g<e.length;){var i=e[g];++g;i.estimateScore<h&&(f=i,h=i.estimateScore)}if(f.get_x()==a&&f.get_y()==b)return this._reconstructPath(f,[]),this._map.clearDistanceValues(),!0;y.remove(e,f);c.push(f);g=0;for(h=f.get_neighbors();g<h.length;)if(i=[h[g]],++g,!W.exists(c,function(a){return function(b){return b==a[0]}}(i))){var j=f.travelScore+d.elements.Map.distanceBetweenTiles(f,i[0]);if(!W.exists(e,function(a){return function(b){return b==a[0]}}(i))||j<i[0].travelScore)i[0].cameFromTile=f,i[0].travelScore=j,i[0].estimateScore=i[0].travelScore+d.elements.Map.distanceBetweenTiles(i[0],this._map.get_tiles()[a][b]),W.exists(e,function(a){return function(b){return b==a[0]}}(i))||e.push(i[0])}}return!1},__class__:d.elements.Chopper});d.elements.Map=function(a,b,f,c){j.Element.call(this,a);this._tileSize=c;this._tiles=[];this._alertTiles=[];this._miscTiles=[];for(a=0;a<b;){c=a++;this._tiles.push([]);for(var e=0;e<f;){var h=e++,g=!1,i=d.data.InteractDirection.DOWN,g=!0;this._tiles[c].push(new d.data.Tile(c,h,g,"",null,i))}}this._redrawElements();this.isTimersPaused=!1};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.Map"]=d.elements.Map;d.elements.Map.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,Map".split(",");d.elements.Map.distanceBetweenTiles=function(a,b){return Math.abs(a.get_x()-b.get_x())+Math.abs(a.get_y()-b.get_y())|0};d.elements.Map.__super__=j.Element;d.elements.Map.prototype=v(j.Element.prototype,{get_otherPoints:function(){return this._miscTiles},get_tiles:function(){return this._tiles},get_tileSize:function(){return this._tileSize},clearDistanceValues:function(){for(var a=0,b=this._tiles;a<b.length;){var f=b[a];++a;for(var c=0;c<f.length;){var d=f[c];++c;d.estimateScore=9999;d.travelScore=9999;d.cameFromTile=null}}},isPassable:function(a,b){return this._tiles[a][b].get_passable()},convertPixelToTileLoc:function(a,b){return[Math.floor((a+this.get_pos().x-32)/this._tileSize),Math.floor((b+this.get_pos().y-32)/this._tileSize)]},dispose:function(){this._alertTiles=this._tiles=null;j.Element.prototype.dispose.call(this)},_redrawElements:function(){for(var a=0,b=this._elements;a<b.length;){var f=b[a];++a;f.dispose()}this._elements=[];a=0;for(b=this._tiles;a<b.length;){f=b[a];++a;for(var d=0;d<f.length;){var p=f[d];++d;p.set_neighbors([]);p.populateNeighbors(this._tiles);if(c.ConstantsApp.OPTION_SHOW_COLLISIONS&&!p.get_passable()){var h=this.addElement(new j.Element({origin:0.5,asset:"Tile",x:p.get_x()*this._tileSize-this._tileSize/2+this.get_pos().x,y:p.get_y()*this._tileSize-this._tileSize/2+this.get_pos().y}));""==p.get_eventToActivate()&&(h.get_renderable().alpha=0.5)}switch(p.get_eventToActivate()){case "EVENT_ALERT_E":e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_SPAWN_NPC,{"char":"ezra",x:p.get_x(),y:p.get_y()}));break;case "EVENT_ALERT_H":e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_SPAWN_NPC,{"char":"hera",x:p.get_x(),y:p.get_y()}));break;case "EVENT_ALERT_K":e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_SPAWN_NPC,{"char":"kanan",x:p.get_x(),y:p.get_y()}));break;case "EVENT_ALERT_S":e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_SPAWN_NPC,{"char":"sabine",x:p.get_x(),y:p.get_y()}));break;case "EVENT_ALERT_Z":e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_SPAWN_NPC,{"char":"zeb",x:p.get_x(),y:p.get_y()}))}}}},redefineMap:function(a){if(a.length<this.get_tiles().length*this.get_tiles()[0].length)for(;a.length<this.get_tiles().length*this.get_tiles()[0].length;)a+=".";this._alertTiles=[];this._miscTiles=[];for(var b=0,f=this.get_tiles().length;b<f;)for(var m=b++,e=0,h=this.get_tiles()[m].length;e<h;){var g=e++;this._tiles[m][g].set_eventToActivate("");var i="",j=d.data.InteractDirection.DOWN,k=a.charAt(m+this.get_tiles().length*g);if("."==k||"x"==k)this._tiles[m][g].set_passable(!0),this._tiles[m][g].set_diagonal(!0);else if("o"==k)this._tiles[m][g].set_passable(!1);else if("+"==k)this._tiles[m][g].set_passable(!0),this._tiles[m][g].set_diagonal(!1);else{var l=!0;this._tiles[m][g].set_passable(!1);i=c.ConstantsApp.EVENT_ALERT_Template+k;switch(k){case "E":case "H":case "K":case "S":case "Z":j=d.data.InteractDirection.ANY;l=!1;break;case ">":j=d.data.InteractDirection.LEFT;l=!1;this._tiles[m][g].set_passable(!0);this._tiles[m][g].set_diagonal(!0);break;case "v":j=d.data.InteractDirection.UP;l=!1;this._tiles[m][g].set_passable(!0);this._tiles[m][g].set_diagonal(!0);break;case "<":j=d.data.InteractDirection.RIGHT;l=!1;this._tiles[m][g].set_passable(!0);this._tiles[m][g].set_diagonal(!0);break;case "^":j=d.data.InteractDirection.DOWN,l=!1,this._tiles[m][g].set_passable(!0),this._tiles[m][g].set_diagonal(!0)}l?this._alertTiles.push(this._tiles[m][g]):this._miscTiles.push(this._tiles[m][g]);this._tiles[m][g].set_eventToActivate(i);this._tiles[m][g].set_pDir(j)}}this._redrawElements()},__class__:d.elements.Map});d.elements.CrewProtectMap=function(a,b,f,c){d.elements.Map.call(this,a,b,f,c);this._sizeX=b;this._sizeY=f;this._tileElements=[];this._safePath=[];this._enemyPath=[];this._doors=[];for(a=0;a<b;){var e=a++;this._tileElements.push([]);for(c=0;c<f;)c++,this._tileElements[e].push(null)}c=0;for(a=this._sizeX;c<a;){b=c++;f=0;for(e=this._sizeY;f<e;){var h=f++;this._tiles[b][h].set_diagonal(!1);this._tiles[b][h].set_passable(!1);var g=this.addElement(new j.Element({origin:0.5,asset:"Tile",x:this._tiles[b][h].get_x()*this._tileSize,y:this._tiles[b][h].get_y()*this._tileSize,useCamera:!1}));g.get_renderable().scaleX=g.get_renderable().scaleY=this._tileSize/64;this._tileElements[b][h]=g}}this.redefineMap("oo+oooo+ooo+o++++oo++++oo+o++oo+++++o++++oo+ooo+o++++ooo+oooo+o");c=0;for(a=this._sizeX;c<a;){b=c++;f=0;for(e=this._sizeY;f<e;)h=f++,this._tiles[b][h].set_neighbors([]),this._tiles[b][h].populateNeighbors(this._tiles),this._tiles[b][h].set_diagonal(!1),this._tiles[b][h].get_passable()?this._tileElements[b][h].setTextureAsset("1x1-open-tile"):this._tileElements[b][h].setTextureAsset("1x1-wall")}a=this.addElement(new j.AnimatedElement({asset:"door-close-001",x:this._tiles[1][2].get_x()*this._tileSize+this._tileSize/2,y:this._tiles[1][2].get_y()*this._tileSize,origin:0.5,useCamera:!1}));a.get_renderable().rotation=90;this._doors.push(new d.data.CrewDoorDef(a,this._tiles[1][2],this._tiles[2][2]));a=this.addElement(new j.AnimatedElement({asset:"door-close-001",x:this._tiles[1][4].get_x()*this._tileSize+this._tileSize/2,y:this._tiles[1][4].get_y()*this._tileSize,origin:0.5,useCamera:!1}));a.get_renderable().rotation=90;this._doors.push(new d.data.CrewDoorDef(a,this._tiles[1][4],this._tiles[2][4]));a=this.addElement(new j.AnimatedElement({asset:"door-close-001",x:this._tiles[6][1].get_x()*this._tileSize+this._tileSize/2,y:this._tiles[6][1].get_y()*this._tileSize,origin:0.5,useCamera:!1}));a.get_renderable().rotation=90;this._doors.push(new d.data.CrewDoorDef(a,this._tiles[6][1],this._tiles[7][1]));a=this.addElement(new j.AnimatedElement({asset:"door-close-001",x:this._tiles[6][3].get_x()*this._tileSize+this._tileSize/2,y:this._tiles[6][3].get_y()*this._tileSize,origin:0.5,useCamera:!1}));a.get_renderable().rotation=90;this._doors.push(new d.data.CrewDoorDef(a,this._tiles[6][3],this._tiles[7][3]));a=this.addElement(new j.AnimatedElement({asset:"door-close-001",x:this._tiles[6][5].get_x()*this._tileSize+this._tileSize/2,y:this._tiles[6][5].get_y()*this._tileSize,origin:0.5,useCamera:!1}));a.get_renderable().rotation=90;this._doors.push(new d.data.CrewDoorDef(a,this._tiles[6][5],this._tiles[7][5]));a=this.addElement(new j.AnimatedElement({asset:"door-close-001",x:this._tiles[4][1].get_x()*this._tileSize,y:this._tiles[4][1].get_y()*this._tileSize+this._tileSize/2,origin:0.5,useCamera:!1}));a.get_renderable().rotation=0;this._doors.push(new d.data.CrewDoorDef(a,this._tiles[4][1],this._tiles[4][2]));a=this.addElement(new j.AnimatedElement({asset:"door-close-001",x:this._tiles[4][3].get_x()*this._tileSize,y:this._tiles[4][3].get_y()*this._tileSize+this._tileSize/2,origin:0.5,useCamera:!1}));a.get_renderable().rotation=0;this._doors.push(new d.data.CrewDoorDef(a,this._tiles[4][3],this._tiles[4][4]));this._tileElements[8][3].setTextureAsset("1x1-exit-tile")};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.CrewProtectMap"]=d.elements.CrewProtectMap;d.elements.CrewProtectMap.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,CrewProtectMap".split(",");d.elements.CrewProtectMap.distanceBetweenTilesByIndex=function(a,b,f,c){return Math.abs(a-f)+Math.abs(b-c)|0};d.elements.CrewProtectMap.__super__=d.elements.Map;d.elements.CrewProtectMap.prototype=v(d.elements.Map.prototype,{convertPixelToTileLoc:function(a,b){return[Math.floor((a-this.get_pos().x+this._tileSize/2)/this._tileSize),Math.floor((b-this.get_pos().y+this._tileSize/2)/this._tileSize)]},_redrawElements:function(){},checkDoors:function(a,b,f,c){for(var e=0,h=this._doors;e<h.length;){var g=h[e];++e;if(g.contains(a,b)){if(g.get_tileA()==f.get_currentPath()[0]&&0==d.elements.CrewProtectMap.distanceBetweenTilesByIndex(g.get_tileB().get_x(),g.get_tileB().get_y(),f.get_previousX(),f.get_previousY())||g.get_tileB()==f.get_currentPath()[0]&&0==d.elements.CrewProtectMap.distanceBetweenTilesByIndex(g.get_tileA().get_x(),g.get_tileA().get_y(),f.get_previousX(),f.get_previousY()))break;for(a=0;a<c.length;)if(b=c[a],++a,g.get_tileA()==b.get_body().get_currentPath()[0]&&0==d.elements.CrewProtectMap.distanceBetweenTilesByIndex(g.get_tileB().get_x(),g.get_tileB().get_y(),b.get_body().get_previousX(),b.get_body().get_previousY())||g.get_tileB()==b.get_body().get_currentPath()[0]&&0==d.elements.CrewProtectMap.distanceBetweenTilesByIndex(g.get_tileA().get_x(),g.get_tileA().get_y(),b.get_body().get_previousX(),b.get_body().get_previousY()))return!1;g.get_state()==d.data.CREW_DOOR_STATE.STATE_OPEN?(g.setState(d.data.CREW_DOOR_STATE.STATE_CLOSED),y.remove(g.get_tileA().get_neighbors(),g.get_tileB()),y.remove(g.get_tileB().get_neighbors(),g.get_tileA())):(g.setState(d.data.CREW_DOOR_STATE.STATE_OPEN),g.get_tileA().get_neighbors().push(g.get_tileB()),g.get_tileB().get_neighbors().push(g.get_tileA()));return!0}}return!1},__class__:d.elements.CrewProtectMap});d.elements.ExitClock=function(a,b,f,c){j.Element.call(this,a);this._timeLeft=this._maxTime=0;this._dial=new j.Element({originY:0.5,asset:"SWR_Alert_8",useCamera:!1});this.addElement(this._dial);this._location=b;this._alertsTracked=[];for(a=0;a<c.length;)b=c[a],++a,-1<f.toString().indexOf(b.get_location())&&this._alertsTracked.push(b)};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.ExitClock"]=d.elements.ExitClock;d.elements.ExitClock.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,ExitClock".split(",");d.elements.ExitClock.__super__=j.Element;d.elements.ExitClock.prototype=v(j.Element.prototype,{update:function(a){j.Element.prototype.update.call(this,a);for(var a=this._maxTime=this._timeLeft=0,b=1E6,f=!1,c=0,d=this._alertsTracked;c<d.length;){var e=d[c];++c;e.get_active()&&(a<e.get_stage()&&(a=e.get_stage()),e.get_missionObjective()&&(f=!0),e.get_timer()<b&&(this._timeLeft=b=Math.round(e.get_timer()),this._maxTime=e.get_timerMax()))}this._timeLeft>this._maxTime&&(this._maxTime=this._timeLeft);0>=this._timeLeft||0>=this._maxTime||(b=this._timeLeft/this._maxTime,0>=b?this._dial.setTextureAsset("SWR_Alert_8"):0.125>=b?this._dial.setTextureAsset("SWR_Alert_7"):0.25>=b?this._dial.setTextureAsset("SWR_Alert_6"):0.375>=b?this._dial.setTextureAsset("SWR_Alert_5"):0.5>=b?this._dial.setTextureAsset("SWR_Alert_4"):0.625>=b?this._dial.setTextureAsset("SWR_Alert_3"):0.75>=b?this._dial.setTextureAsset("SWR_Alert_2"):0.875>=b?this._dial.setTextureAsset("SWR_Alert_1"):this._dial.setTextureAsset("SWR_Alert_0"),f?(2<=a?this.setTextureAsset("SWR_Alert_ESSENTIAL_high"):1<=a?this.setTextureAsset("SWR_Alert_ESSENTIAL_med"):this.setTextureAsset("SWR_Alert_ESSENTIAL"),this._dial.get_pos().x=0):2<=a?(this.setTextureAsset("SWR_Alert_High"),this._dial.get_pos().x=0):1<=a?(this.setTextureAsset("SWR_Alert_Med"),this._dial.get_pos().x=0):(this.setTextureAsset("SWR_Alert_low"),this._dial.get_pos().x=-2))},__class__:d.elements.ExitClock});d.elements.HTML5Video=function(a){this._added=this._initted=this.completed=!1;j.Element.call(this,a);this._url=a.url?a.url:"test.mp4";this._vidW=null==a.vidW?960*e.WorkinCloud.get_instance().get_input().get_scale():a.vidW;this._vidH=null==a.vidH?560*e.WorkinCloud.get_instance().get_input().get_scale():a.vidH;this._vidX=null==a.vidX?e.JSEmbedProxy.get_canvasWidth()/2-this._vidW/2+2:a.vidX;null==a.vidY?(e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE),this._vidY=50*e.WorkinCloud.get_instance().get_input().get_scale()):this._vidY=a.vidY;null!=a.loadCallback&&(this._loadCallback=a.loadCallback);null!=a.completionHandler&&(this._playCallback=a.completionHandler);this._initVideo()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.HTML5Video"]=d.elements.HTML5Video;d.elements.HTML5Video.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,HTML5Video".split(",");d.elements.HTML5Video.__super__=j.Element;d.elements.HTML5Video.prototype=v(j.Element.prototype,{_updateVidScale:function(){var a=e.WorkinCloud.get_instance().get_input().get_scale();e.WorkinCloud.get_instance().get_input().get_offset();this._vidW=640*a;this._vidH=480*a;this._vidX=e.JSEmbedProxy.get_canvasWidth()/2-this._vidW/2+2;e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE);this._vidY=50*e.WorkinCloud.get_instance().get_input().get_scale();navigator.isCocoonJS?(this._video.style.cssText="position:absolute;",this._video.style.left=Math.round(this._vidX),this._video.style.top=Math.round(this._vidY),this._video.style.width=Math.round(this._vidW),this._video.style.height=Math.round(this._vidH)):(this._video.style.cssText="position:absolute;",this._video.style.left=Math.round(this._vidX)+"px",this._video.style.top=Math.round(this._vidY)+"px",this._video.style.width=Math.round(this._vidW)+
"px",this._video.style.height=Math.round(this._vidH)+"px")},update:function(a){j.Element.prototype.update.call(this,a);this._initted&&!this.completed&&this._updateVidScale()},remove:function(){e.WorkinCloud.get_instance().setValue(c.ConstantsApp.OBJECT_VIDEO,null);this._added&&(this._video.removeEventListener("canplaythrough",q(this,this._onCanPlay)),this._video.removeEventListener("error",q(this,this._onError)));this._initted&&document.body.removeChild(this._video);this._initted=this._added=!1},dispose:function(){this.remove();j.Element.prototype.dispose.call(this)},_onEnd:function(){this._playCallback()},_playVideo:function(){e.WorkinCloud.get_instance().get_sound().stopMusic();this._video.play();this._video.onended=q(this,this._onEnd)},_initVideo:function(){this._video=document.createElement("video");null!=this._video?(this._added=!0,this._video.addEventListener("error",q(this,this._onError)),this._video.addEventListener("canplaythrough",q(this,this._onCanPlay)),this._video.src=this._url):this._loadCallback(!1);this._video.onended=function(){console.log("Video onended")};this._video.addEventListener("ended",function(){});this._video.onerror=function(){console.log("Video onerror")};this._video.addEventListener("error",function(a){console.error("ERROR: Could not load the video at src = "+a.target.src);document.body.removeChild(a.target)});this._video.oncanplaythrough=function(){console.log("Video oncanplaythrough")};this._video.addEventListener("canplaythrough",function(a){a.target.play()})},_onCanPlay:function(){this._added&&(this._initted=!0,navigator.isCocoonJS?(this._video.style.cssText="position:absolute;",this._video.style.left=0.125*window.innerWidth,this._video.style.top=0.125*window.innerHeight,this._video.style.width=0.75*window.innerWidth,this._video.style.height=0.75*window.innerHeight):(this._video.style.cssText="position:absolute;",this._video.style.left=Math.round(this._vidX)+"px",this._video.style.top=Math.round(this._vidY)+"px",this._video.style.width=Math.round(this._vidW)+
"px",this._video.style.height=Math.round(this._vidH)+"px"),document.body.appendChild(this._video),e.WorkinCloud.get_instance().setValue(c.ConstantsApp.OBJECT_VIDEO,this._video),this._playVideo(),null!=this._loadCallback&&this._loadCallback(!0))},_onError:function(){null!=this._loadCallback&&this._loadCallback(!1)},__class__:d.elements.HTML5Video});d.elements.MinigameElement=function(a){j.AnimatedElement.call(this,a)};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.MinigameElement"]=d.elements.MinigameElement;d.elements.MinigameElement.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,MinigameElement".split(",");d.elements.MinigameElement.__super__=j.AnimatedElement;d.elements.MinigameElement.prototype=v(j.AnimatedElement.prototype,{get_cleanup:function(){return this._cleanup},_get_flightTime:function(){return 3-(this._difficulty-1)/5},get_depth:function(){switch(this._behavior){case d.elements.MinigameElement.BEHAVIOR_FIGHTER:return Math.abs(this._render.scaleX);case d.elements.MinigameElement.BEHAVIOR_TERRAIN:return-this._pos.x;default:return-this._pos.z}},update:function(a){j.AnimatedElement.prototype.update.call(this,a);switch(this._behavior){case d.elements.MinigameElement.BEHAVIOR_FIGHTER:"explode"!=this.get_currentAnimation()&&(120<Math.abs(this._destX-this._pos.x)?(this.animate("swerve"),this._destX<this._pos.x&&(this._render.scaleX=-this._render.scaleY)):(this.animate("straight"),this._render.scaleX=this._render.scaleY),0<this._shotsLeft&&(this._fireTimer-=a,0>=this._fireTimer&&(this._fireTimer=0.15,this._shotsLeft--,e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_TIE_FIRE,{tie:this})))))}},dispose:function(){d.World.get_tweener().stop(this._render);d.World.get_tweener().stop(this._pos);this._behavior="";this._cleanup=!1;j.AnimatedElement.prototype.dispose.call(this)},renew:function(a){this._cleanup=!1;this.active=!0;this._behavior="";this._difficulty=this._render.scaleX=1;this._shotsLeft=this._fireTimer=0;this.stopAnimation();j.AnimatedElement.prototype.renew.call(this,a);null!=a.difficulty&&(this._difficulty=a.difficulty)},_doCleanup:function(){this._cleanup=!0},_onAnimationComplete:function(){this._behavior==d.elements.MinigameElement.BEHAVIOR_FIGHTER&&this._doCleanup()},_onFighterScaleComplete:function(){var a=e.WorkinCloud.get_instance().get_random().getRandomInt(1,3);e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_TIEfly"+a,0.3);Math.random()<this._difficulty/7.5&&(e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_TIE_FIRE,{tie:this})),this._shotsLeft=e.WorkinCloud.get_instance().get_random().getRandomInt(0,2),0<this._shotsLeft&&(this._fireTimer=0.15));this._startX<this._destX?(this._destX=this._startX+(this._destX-this._startX)*Math.random(),this._destY=-200):(this._destX=d.minigames.Minigame.WIDTH+400,this._destY=-200+Math.random()*(d.minigames.Minigame.HEIGHT+200));a=this._destX>this._pos.x?20:-20;d.World.get_tweener().tween(this._render,this._get_flightTime(),{scaleX:1,scaleY:1,rotation:a},!0,h.tween.Ease.EASE_OUT,0);d.World.get_tweener().tween(this._pos,this._get_flightTime(),{x:this._destX,y:this._destY},!0,h.tween.Ease.EASE_WAVE,0).onComplete(q(this,this._doCleanup))},initBehavior:function(a,b){this._behavior=a;switch(this._behavior){case d.elements.MinigameElement.BEHAVIOR_FIGHTER:this.active=!0;this.animate("straight");this._render.scaleX=this._render.scaleY=0.1;this._startX=this._pos.x;this._destX=d.minigames.Minigame.CENTER_X+e.WorkinCloud.get_instance().get_random().getRandomFloat(-150,150);this._destY=d.minigames.Minigame.CENTER_Y+e.WorkinCloud.get_instance().get_random().getRandomFloat(-50,50);this._render.rotation=this._destX>this._pos.x?20:-20;var f;this.get_pos().y>d.minigames.Minigame.HEIGHT||0>this.get_pos().y?(f=this._destY,d.World.get_tweener().tween(this._pos,this._get_flightTime(),{y:f},!0,h.tween.Ease.EASE_WAVE,0).onComplete(q(this,this._onFighterScaleComplete))):(f=this._destX,d.World.get_tweener().tween(this._pos,this._get_flightTime(),{x:f},!0,h.tween.Ease.EASE_WAVE,0).onComplete(q(this,this._onFighterScaleComplete)));f=e.WorkinCloud.get_instance().get_random().getRandomInt(1,3);e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_TIEfly"+f,0.1);d.World.get_tweener().tween(this._render,this._get_flightTime(),{scaleX:0.5,scaleY:0.5,rotation:0},!0,h.tween.Ease.EASE_IN,0);break;case d.elements.MinigameElement.BEHAVIOR_LASER:f=b.angle;this._render.rotation=f+90;this._velocity.x=b.vx;this._velocity.y=b.vy;this._render.scaleY=0.75;d.World.get_tweener().tween(this._render,0.2,{scaleX:0.1,scaleY:0.1},!0,h.tween.Ease.EASE_LINEAR,0);break;case d.elements.MinigameElement.BEHAVIOR_LASER_ENEMY:f=b.angle;this._render.rotation=f+90;this._velocity.x=b.vx;this._velocity.y=b.vy;this._render.scaleX=0.1;this._render.scaleY=0.1;d.World.get_tweener().tween(this._render,0.2,{scaleX:0.75,scaleY:0.75},!0,h.tween.Ease.EASE_IN,0);break;case d.elements.MinigameElement.BEHAVIOR_ASTEROID_LASER:this._velocity.x=b.vx,this._velocity.y=b.vy,this._render.scaleY=0.5,this._render.scaleX=0.5}},__class__:d.elements.MinigameElement,__properties__:v(j.AnimatedElement.prototype.__properties__,{get_cleanup:"get_cleanup"})});d.elements.PatrolDrone=function(a,b,f,c,e){d.elements.Chopper.call(this,a,b,f,c);this._lastX=f;this._lastY=c;this.addAnimationFrames("ns",["SWRCC_Characters_Mouse_Ver"]);this.addAnimationFrames("ew",["SWRCC_Characters_Mouse_Hor"]);this.animate("ew");this._patrolStage=0;this._patrolPath=[];for(a=0;a<e.length;)if(b=e[a],++a,2==b.length){this._patrolPath.push([]);for(f=0;f<b.length;)c=b[f],++f,this._patrolPath[this._patrolPath.length-1].push(c)}null};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.PatrolDrone"]=d.elements.PatrolDrone;d.elements.PatrolDrone.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,PatrolDrone".split(",");d.elements.PatrolDrone.__super__=d.elements.Chopper;d.elements.PatrolDrone.prototype=v(d.elements.Chopper.prototype,{set_lastY:function(a){return this._lastY=a},get_lastY:function(){return this._lastY},set_lastX:function(a){return this._lastX=a},get_lastX:function(){return this._lastX},get_patrolStage:function(){return this._patrolStage},get_patrolPath:function(){return this._patrolPath},advancePatrol:function(){this._patrolStage++;this._patrolStage>=this._patrolPath.length&&(this._patrolStage=0)},moveIt:function(a,b){if(0>a||0>b||a>this._map.get_tiles().length-1||b>this._map.get_tiles()[0].length-1)return!1;var f=this._map.get_tiles()[this._currentTileLocX][this._currentTileLocY],c=[],e=[f];this._currentPath=[];f.travelScore=0;for(f.estimateScore=d.elements.Map.distanceBetweenTiles(f,this._map.get_tiles()[a][b]);0<e.length;){for(var f=e[0],h=Math.POSITIVE_INFINITY,g=0;g<e.length;){var i=e[g];++g;i.estimateScore<h&&(f=i,h=i.estimateScore)}if(f.get_x()==a&&f.get_y()==b)return this._reconstructPath(f,[]),this._map.clearDistanceValues(),!0;y.remove(e,f);c.push(f);g=0;for(h=f.get_neighbors();g<h.length;)if(i=[h[g]],++g,!W.exists(c,function(a){return function(b){return b==a[0]}}(i))&&!(i[0].get_x()!=f.get_x()&&i[0].get_y()!=f.get_y())){var j=f.travelScore+d.elements.Map.distanceBetweenTiles(f,i[0]);if(!W.exists(e,function(a){return function(b){return b==a[0]}}(i))||j<i[0].travelScore)i[0].cameFromTile=f,i[0].travelScore=j,i[0].estimateScore=i[0].travelScore+d.elements.Map.distanceBetweenTiles(i[0],this._map.get_tiles()[a][b]),W.exists(e,function(a){return function(b){return b==a[0]}}(i))||e.push(i[0])}}return!1},__class__:d.elements.PatrolDrone});d.elements.StealthMap=function(a,b,f,c){this.iter=0;d.elements.Map.call(this,a,b,f,c);this._sizeX=b;this._sizeY=f;this._tileElements=[];this._safePath=[];this._enemyPath=[];for(a=0;a<b;){var h=a++;this._tileElements.push([]);for(c=0;c<f;){var g=c++;this._tileElements[h].push(null)}}c=0;for(a=this._sizeX;c<a;){b=c++;f=0;for(h=this._sizeY;f<h;){g=f++;this._tiles[b][g].set_diagonal(!1);this._tiles[b][g].set_passable(!1);var i=this.addElement(new j.Element({origin:0.5,asset:"Tile",x:this._tiles[b][g].get_x()*this._tileSize,y:this._tiles[b][g].get_y()*this._tileSize,useCamera:!1}));i.get_renderable().scaleX=i.get_renderable().scaleY=this._tileSize/64;this._tileElements[b][g]=i}}for(a=0;2>a;){a++;h=1;g=this._sizeY-1;this._tiles[h][g].set_passable(!0);for(b=c=-1;h<this._sizeX-2||0<g;){switch(c){case-1:g-=1;b=-1;c=e.WorkinCloud.get_instance().get_random().getRandomInt(-1,0);break;case 0:h+=1;c=1==b?h<this._sizeX-3?e.WorkinCloud.get_instance().get_random().getRandomInt(0,1):0:-1==b?e.WorkinCloud.get_instance().get_random().getRandomInt(-1,0):h<this._sizeX-3?e.WorkinCloud.get_instance().get_random().getRandomInt(-1,1):e.WorkinCloud.get_instance().get_random().getRandomInt(-1,0);0==c&&(b=0);break;case 1:g+=1,b=1,c=e.WorkinCloud.get_instance().get_random().getRandomInt(0,1)}h>this._sizeX-2&&(h=this._sizeX-2,b=-1);1>g&&(g=h==this._sizeX-2?0:1);g>this._sizeY-2&&(g=this._sizeY-2);this._tiles[h][g].set_passable(!0)}this._tiles[this._sizeX-2][0].set_passable(!0)}this._makeWalkway();c=0;for(a=this._sizeX;c<a;){b=c++;f=0;for(h=this._sizeY;f<h;)g=f++,this._tiles[b][g].set_neighbors([]),this._tiles[b][g].populateNeighbors(this._tiles),this._tiles[b][g].get_passable()?this._tileElements[b][g].setTextureAsset("1x1-tile-"+t.random(3)):this._tileElements[b][g].setTextureAsset("1x1-wall")}this._tileElements[1][this._sizeY-1].setTextureAsset("entrance-tile");this._tileElements[this._sizeX-2][0].setTextureAsset("exit-tile")};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.StealthMap"]=d.elements.StealthMap;d.elements.StealthMap.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,StealthMap".split(",");d.elements.StealthMap.distanceBetweenTilesByIndex=function(a,b,f,c){return Math.abs(a-f)+Math.abs(b-c)|0};d.elements.StealthMap.__super__=d.elements.Map;d.elements.StealthMap.prototype=v(d.elements.Map.prototype,{convertPixelToTileLoc:function(a,b){return[Math.floor((a-this.get_pos().x+this._tileSize/2)/this._tileSize),Math.floor((b-this.get_pos().y+this._tileSize/2)/this._tileSize)]},getNextEnemyPoint:function(){var a=[this._enemyPath[this.iter].get_x(),this._enemyPath[this.iter].get_y()];this.iter++;this.iter==this._enemyPath.length&&(this.iter=0);return a},_makeWalkway:function(){for(var a=this._tiles[t.random(this._sizeX-5)+2][t.random(this._sizeY-2)+1],b=a.get_x(),f=a.get_y(),c=0;(this._tiles[b-1][f-1].get_passable()||this._tiles[b][f-1].get_passable()||this._tiles[b+1][f-1].get_passable()||this._tiles[b-1][f].get_passable()||this._tiles[b+1][f].get_passable()||this._tiles[b-1][f+1].get_passable()||this._tiles[b][f+1].get_passable()||this._tiles[b+1][f+1].get_passable())&&!(a=this._tiles[t.random(this._sizeX-
5)+2][t.random(this._sizeY-2)+1],b=a.get_x(),f=a.get_y(),c++,20<c););if(20<c)for(var c=2,d=this._sizeX-3;c<d;)for(var e=c++,h=1,g=this._sizeY-1;h<g;){var i=h++,b=e,f=i;!this._tiles[b-1][f-1].get_passable()&&!this._tiles[b][f-1].get_passable()&&!this._tiles[b+1][f-1].get_passable()&&!this._tiles[b-1][f].get_passable()&&!this._tiles[b+1][f].get_passable()&&!this._tiles[b-1][f+1].get_passable()&&!this._tiles[b][f+1].get_passable()&&!this._tiles[b+1][f+1].get_passable()&&(a=this._tiles[e][i])}a.set_passable(!0);for(f-=1;0<f&&!this._tiles[b][f].get_passable();)this._tiles[b][f].set_passable(!0),f-=1;if(0==f){f=1;this._enemyPath.push(this._tiles[b][f]);b=a.get_x();for(b+=1;!this._tiles[b][f].get_passable();)this._tiles[b][f].set_passable(!0),b+=1}this._enemyPath.push(this._tiles[b][f]);b=a.get_x();f=a.get_y();for(f+=1;f<this._sizeY-1&&!this._tiles[b][f].get_passable();)this._tiles[b][f].set_passable(!0),f+=1;if(f==this._sizeY-1){f=this._sizeY-2;this._enemyPath.push(this._tiles[b][f]);b=a.get_x();for(b+=1;b<this._sizeX-1&&!this._tiles[b][f].get_passable();)this._tiles[b][f].set_passable(!0),b+=1;if(b==this._sizeX-1){b=this._sizeX-2;this._enemyPath.push(this._tiles[b][f]);for(f-=1;0<f&&!this._tiles[b][f].get_passable();)this._tiles[b][f].set_passable(!0),f-=1}}this._enemyPath.push(this._tiles[b][f]);return!0},__class__:d.elements.StealthMap});d.elements.VideoElement=function(){};l["com.disney_channel.star_wars_rebels.chopper_chase.world.elements.VideoElement"]=d.elements.VideoElement;d.elements.VideoElement.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,elements,VideoElement".split(",");d.elements.VideoElement.__super__=j.Element;d.elements.VideoElement.prototype=v(j.Element.prototype,{update:function(a){j.Element.prototype.update.call(this,a);this._video.currentTime>=this._video.duration&&(e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(c.ConstantsApp.EVENT_VIDEO_COMPLETE)),this._stopVideo())},close:function(){d.elements.VideoElement.FLAG_INITED&&(this._video.currentTime=0,this._video.pause());this._video.hidden=!0;this._vidWrapper.style.display="none"},dispose:function(){this.close();j.Element.prototype.dispose.call(this);e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_VIDEO_PLAY,q(this,this._onEventVideoPlay));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_VIDEO_COMPLETE,q(this,this._onEventVideoComplete));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_VIDEO_PAUSE,q(this,this._onEventVideoPause));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_VIDEO_RESUME,q(this,this._onEventVideoResume));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_VIDEO_STOP,q(this,this._onEventVideoStop));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_VIDEO_RESTART,q(this,this._onEventVideoRestart))},_onEventVideoComplete:function(){},_onEventVideoStop:function(){this._stopVideo()},_onEventVideoResume:function(){this._resumeVideo()},_onEventVideoPause:function(){this._pauseVideo()},_onEventVideoRestart:function(){this._restartVideo()},_onEventVideoPlay:function(){this._playVideo()},_restartVideo:function(){this._video.currentTime=0.1;this._video.play()},_stopVideo:function(){this._video.currentTime=0.1;this._video.pause()},_resumeVideo:function(){this._video.play()},_pauseVideo:function(){this._video.pause()},_playVideo:function(){this._video.play();e.WorkinCloud.get_instance().get_sound().stopMusic();null},__class__:d.elements.VideoElement});d.minigames={};d.minigames.Minigame=function(a){this._final=!1;this._timeline=a.timeline;this._poolManager=e.WorkinCloud.get_instance().get_poolManager();this._timerShake=0;this._objective=null!=a.objective?a.objective:this.get_objectiveDefault();this._skin=null!=a.skin?a.skin:this.get_skinDefault();null!=a.instructions?(Math.isNaN(e.WorkinCloud.get_instance().getInt(a.instructions))&&e.WorkinCloud.get_instance().setInt(a.instructions,0),e.WorkinCloud.get_instance().modifyInt(a.instructions,1),this._instructions=2<e.WorkinCloud.get_instance().getInt(a.instructions)?"":a.instructions):this._instructions="";this._elements=[];this._elementManager=new j.ElementManager(this._timeline,c.ConstantsApp.STAGE_WIDTH,c.ConstantsApp.STAGE_HEIGHT);this._elementManager.addLayer(d.minigames.Minigame.LAYER_MINIGAME_BG,!0);this._elementManager.addLayer(d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,!0);this._elementManager.addLayer(d.minigames.Minigame.LAYER_MINIGAME_PLAYER,!0);this._elementManager.addLayer(d.minigames.Minigame.LAYER_MINIGAME_FG,!0);this._elementManager.addLayer(d.minigames.Minigame.LAYER_MINIGAME_HUD,!0);this._elementManager.addLayer(d.minigames.Minigame.LAYER_MINIGAME_FRAME,!0);this._cleanup=!1;this._screenShakeOriginY=this._elementManager.get_camera().get_pos().y;this._screenShakeMagnitude=2;this._difficulty=e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_DIFFICULTY)};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.Minigame"]=d.minigames.Minigame;d.minigames.Minigame.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,Minigame".split(",");d.minigames.Minigame.prototype={get_bg:function(){return"background"},get_id:function(){return d.minigames.Minigame.MINIGAME_BASE},get_winOnTimesUp:function(){return!1},get_active:function(){return this._active},get_duration:function(){return 30},get_cleanup:function(){return this._cleanup},get_shaking:function(){return 0<this._timerShake},get_skinDefault:function(){return""},get_objectiveDefault:function(){return""},render:function(){this._elementManager.renderElements()},_adjustForResize:function(){this._cameraOpenedX=c.ConstantsApp.STAGE_WIDTH-c.ConstantsApp.get_CANVAS_RIGHT()+d.minigames.Minigame.WIDTH;this._cameraClosedX=c.ConstantsApp.STAGE_WIDTH-c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH;this._elementManager.get_camera().get_pos().y=c.ConstantsApp.STAGE_HEIGHT-c.ConstantsApp.get_CANVAS_TOP();this._active&&(this._elementManager.get_camera().get_pos().x=this._cameraOpenedX)},_onEventResizeCanvas:function(){this._adjustForResize()},_removeEventListeners:function(){e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_RESIZE_CANVAS,q(this,this._onEventResizeCanvas))},_addEventListeners:function(){e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_RESIZE_CANVAS,q(this,this._onEventResizeCanvas))},_onMinigameClose:function(){e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TESTING_MINIGAMES)||e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_MINIGAME_RESULTS,{won:this._final,id:this.get_id()}));this._cleanup=!0},_displayResults:function(){return d.World.get_tweener().tween(this._messageBox.get_pos(),0.3,{y:-50},null,h.tween.Ease.EASE_IN)},close:function(){var a=this;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_minigame_complete",0.2);this._timerShake=-100;this._closing=!0;this._elementManager.get_camera().get_pos().x=this._cameraOpenedX;this._messageBoxText.swapTextToDisplay(this._won?"won":"lost");this._final=this._won;this._displayResults().onComplete(function(){R.delay(function(){a._active=!1},700);e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_minigame_open",0.2);d.World.get_tweener().tween(a._elementManager.get_camera().get_pos(),0.5,{x:a._cameraClosedX},!0,h.tween.Ease.EASE_OUT,0.7).onComplete(q(a,a._onMinigameClose));e.WorkinCloud.get_instance().getBool(c.ConstantsApp.BOOL_TESTING_MINIGAMES)&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(c.ConstantsApp.EVENT_MINIGAME_RESULTS,{won:a._won,id:a.get_id()}))})},_onMinigameOpen:function(){var a=this;if(""==this._instructions)this._active=!0;else{var b=0.9+this._instructions.length/15;this._messageBoxText.swapTextToDisplay(this._instructions);d.World.get_tweener().tween(this._messageBox.get_pos(),0.3,{y:-50},null,h.tween.Ease.EASE_IN);d.World.get_tweener().tween(this._messageBox.get_pos(),0.3,{y:-d.minigames.Minigame.CENTER_Y},null,h.tween.Ease.EASE_OUT,b).onComplete(function(){a._active=!0})}},open:function(){this._active=!1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_ui_minigame_open",0.2);this._setTime(this.get_duration());var a=this._cameraOpenedX;this._elementManager.get_camera().get_pos().x=this._cameraClosedX;this._elementManager.get_camera().get_pos().y=this._screenShakeOriginY;d.World.get_tweener().tween(this._elementManager.get_camera().get_pos(),0.5,{x:a},!0,h.tween.Ease.EASE_OUT,0).onComplete(q(this,this._onMinigameOpen))},forceWin:function(){d.World.get_tweener().stop(this._elementManager.get_camera().get_pos());d.World.get_tweener().stop(this._messageBox.get_pos());this._won=this._active=!0;this.close()},handleInput:function(a){var b=this;switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:!this._active&&0<this._instructions.length&&this._messageBox.contains(a.x,a.y)&&(d.World.get_tweener().stop(this._messageBox.get_pos()),d.World.get_tweener().tween(this._messageBox.get_pos(),0.3,{y:-d.minigames.Minigame.CENTER_Y},null,h.tween.Ease.EASE_OUT).onComplete(function(){b._active=!0}))}break;case c.ConstantsApp.INPUT_UP:if(c.ConstantsApp.OPTION_SKIPPABLE_INPUT)switch(a.phase){case n.WMEventInput.PHASE_DOWN:this._won=!0,this.close()}}return null==this._overlay||!this._active?!1:this._overlay.contains(a.x,a.y)},_setTime:function(a){this._timer=this._timeTotal=a;this._updateTimerDisplay()},_updateTimerDisplay:function(){var a=Math.floor((1-this._timer/this._timeTotal)*d.minigames.Minigame._TIMER_NODES);this._countdown.get_renderable().scaleX=(d.minigames.Minigame._TIMER_NODES-a)*d.minigames.Minigame._TIMER_NODE_SIZE/this._countdownBack.get_renderable().width;this._countdown.get_pos().x=d.minigames.Minigame._TIMER_START_X+a*d.minigames.Minigame._TIMER_NODE_SIZE},_updateTimer:function(a){if(0<this._timer){this._active&&(this._timer-=a);0<this._timerShake?(this._timerShake-=a,this._elementManager.get_camera().get_pos().to(this._cameraOpenedX+e.WorkinCloud.get_instance().get_random().getRandomFloat(0,this._screenShakeMagnitude),this._screenShakeOriginY+e.WorkinCloud.get_instance().get_random().getRandomFloat(0,this._screenShakeMagnitude))):-10<this._timerShake&&(this._elementManager.get_camera().get_pos().x=this._cameraOpenedX,this._elementManager.get_camera().get_pos().y=this._screenShakeOriginY);if(0<this._timerEnd&&(this._timerEnd-=a,0>=this._timerEnd)){this._timerEnd=0;this.close();return}this._updateTimerDisplay();0>=this._timer&&(this._timer=0,this.get_winOnTimesUp()&&(this._won=!0),this.close())}},update:function(a){this._active&&(this._elementManager.updateElements(a),this._updateTimer(a))},_onAbortClick:function(){c.ConstantsApp.OPTION_SKIPPABLE_INPUT?this.forceWin():!this._won&&!this._closing&&(this._won=!1,this.close(),this._abortButton.end())},_disposeElement:function(a){this._elementManager.removeElement(a);a.dispose()},dispose:function(){this._removeEventListeners();this._messageBox.removeElement(this._messageBoxText);d.World.get_tweener().stop(this._elementManager.get_camera().get_pos());this._elementManager.dispose();this._elementManager=null;this._timerEnd=0;this._background=this._container=this._overlay=this._countdown=this._countdownBack=this._messageBoxText=this._messageBox=null},init:function(){this._addEventListeners();this._container=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:this.get_bg(),x:d.minigames.Minigame.CENTER_X,y:d.minigames.Minigame.CENTER_Y,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_BG}));this._messageBox=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"panel_mission_select",x:d.minigames.Minigame.CENTER_X,y:-d.minigames.Minigame.CENTER_Y,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FRAME}));this._messageBoxText=this._messageBox.addElement(new j.TextLocalized(20,100,"",null,{origin:0.5,useCamera:!1,center:!0}));this._countdownBack=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"minigame_timer_backing",x:d.minigames.Minigame._TIMER_START_X,y:d.minigames.Minigame.HEIGHT,originX:0,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_FRAME}));this._countdownBack.get_renderable().scaleX=d.minigames.Minigame._TIMER_NODES*d.minigames.Minigame._TIMER_NODE_SIZE/this._countdownBack.get_renderable().width;this._countdown=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"minigame_timer",x:d.minigames.Minigame._TIMER_START_X,y:d.minigames.Minigame.HEIGHT,originX:0,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_FRAME}));this._overlay=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"minigame_frame_2",x:-20,y:-115,originX:0,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_FRAME}));this._abortButton=new g.buttons.ButtonAbort(d.minigames.Minigame.CENTER_X+242,d.minigames.Minigame.CENTER_Y+265,d.World.get_tweener(),0.5,0.5,"minigame_abort");this._abortButton.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._onAbortClick));this._abortButton.set_layer(d.minigames.Minigame.LAYER_MINIGAME_FRAME);this._elementManager.addElement(this._abortButton);this._initialized=!0;this._closing=!1;this._timerEnd=0;this._adjustForResize()},__class__:d.minigames.Minigame};d.minigames.MinigameAsteroidNavigator=function(a){a.instructions="navigator_instructions";d.minigames.Minigame.call(this,a);switch(a.objective){case d.minigames.MinigameAsteroidNavigator.OBJECTIVE_DEBRIS:this._asteroidType="Debris";break;case d.minigames.MinigameAsteroidNavigator.OBJECTIVE_ASTEROID:this._asteroidType="Asteroid"}this.init()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.MinigameAsteroidNavigator"]=d.minigames.MinigameAsteroidNavigator;d.minigames.MinigameAsteroidNavigator.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,MinigameAsteroidNavigator".split(",");d.minigames.MinigameAsteroidNavigator.__super__=d.minigames.Minigame;d.minigames.MinigameAsteroidNavigator.prototype=v(d.minigames.Minigame.prototype,{get_bg:function(){return"SWR_Mini_Debris_BG"},get_id:function(){return d.minigames.Minigame.MINIGAME_ASTEROID_FIELD},get_winOnTimesUp:function(){return!0},get_duration:function(){return 15-1.5*c.Inventory.getRank(c.Item.ITEM_TIME_REPAIR)},get_thruster:function(){return 240+
10*c.Inventory.getRank(c.Item.ITEM_SPEED_REPAIR)},handleInput:function(a){if(this._active)switch(a.input){case c.ConstantsApp.INPUT_CLICK:if(a.y>d.minigames.Minigame.HEIGHT-75)break;switch(a.phase){case n.WMEventInput.PHASE_DOWN:this._overlay.contains(a.x,a.y)&&!this._buttonFire.contains(a.x,a.y)&&(this._dragging=!0,this._dragX=a.x+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT(),this._dragY=a.y);break;case n.WMEventInput.PHASE_MOVE:this._dragging&&(this._dragX=a.x+d.minigames.Minigame.WIDTH-
c.ConstantsApp.get_CANVAS_RIGHT(),this._dragY=a.y);break;case n.WMEventInput.PHASE_UP:this._dragging=!1}break;case c.ConstantsApp.INPUT_SPACE:switch(a.phase){case n.WMEventInput.PHASE_DOWN:this._fire()}}return d.minigames.Minigame.prototype.handleInput.call(this,a)},close:function(){this._buttonFire.disable();d.minigames.Minigame.prototype.close.call(this)},open:function(){d.minigames.Minigame.prototype.open.call(this);this.reset()},_updateHealth:function(){this._health.get_renderable().visible=!0;switch(this._hits){case 0:this._health.setTextureAsset("SWR_Mini_Debris_GREEN");break;case 1:this._health.setTextureAsset("SWR_Mini_Debris_YELLOW");break;default:this._health.setTextureAsset("SWR_Mini_Debris_RED")}},_takeDamage:function(a){0<this._timerEnd||(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.3),this._hits++,this._updateHealth(),null!=a&&a.explode(),this._timerShake=0.5,this._timerInvuln=1.5,2<this._hits&&(this._timerEnd=0.1))},doCooldown:function(){this._cooldown=this._fireCooldown;this._cooldownMeter.setTextureAsset("minigame_timer_red")},_fire:function(){if(!(2<this._lasers.length||0<this._cooldown)){var a=this._ghost.get_pos().x,b=this._ghost.get_pos().y,a=this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"turret_laser",x:a,y:b,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_BG});a.initBehavior(d.elements.MinigameElement.BEHAVIOR_ASTEROID_LASER,{vx:0,vy:-500,angle:0});this._lasers.push(this._elementManager.addElement(a));e.WorkinCloud.get_instance().get_sound().playSound("sfx_minigame_turret",0.3);this.doCooldown()}},_addAsteroid:function(){if(!(10<this._asteroids.length)){var a=100+100*(Math.random()+0.05*this._difficulty),b=0;3<=this._difficulty&&(b=e.WorkinCloud.get_instance().get_random().getRandomFloat(-5*this._difficulty,5*this._difficulty));var f=0.5>Math.random()?d.minigames.Minigame.LAYER_MINIGAME_BG:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,a=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"SWR_Mini_Debris_"+this._asteroidType+e.WorkinCloud.get_instance().get_random().getRandomInt(1,7),x:0,y:-100,originX:0.5,originY:0.5,vx:b,vy:a,layer:f})),b=0.5*a.get_renderable().width+Math.random()*(d.minigames.Minigame.WIDTH-a.get_renderable().width);0.3>Math.random()&&(b=this._ghost.get_pos().x-20+40*Math.random());a.get_pos().x=b;0.5>Math.random()&&(a.get_renderable().scaleX*=-1);this._asteroids.push(new d.data.AsteroidDef(a))}},update:function(a){d.minigames.Minigame.prototype.update.call(this,a);if(this._active){0<this._cooldown&&(this._cooldown-=a,0>=this._cooldown&&(this._cooldown=0,this._cooldownMeter.setTextureAsset("minigame_timer")));2<=this._hits&&(this._timerFlicker-=a,0>=this._timerFlicker&&(this._timerFlicker=1/45,this._health.get_renderable().visible=!this._health.get_renderable().visible));for(var b=this._lasers.length,f=0,c,g;0<b;){b--;c=this._lasers[b];for(f=this._asteroids.length;0<f;)f--,g=this._asteroids[f],g.checkLaser(c,25)&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_asteroid_hit",0.5),this._disposeElement(c),y.remove(this._lasers,c));-100>c.get_pos().y&&(this._disposeElement(c),y.remove(this._lasers,c))}this._parallaxer.move(this._parallaxSpeed*a);h.WorkinMath.diffBetweenAB(this._ghost.get_pos().x,this._ghost.get_pos().y,this._dragX,this._dragY,this._thruster);this._dragging&&this._thruster.get_length()>this.get_thruster()/10+20?(this._thruster.normalize(),this._thruster.multiply(this.get_thruster()),this._ghost.get_velocity().x=this._thruster.x,this._ghost.get_velocity().y=this._thruster.y):(this._ghost.get_velocity().x*=0.9,this._ghost.get_velocity().y*=0.9);10<Math.abs(this._ghost.get_velocity().x)?this._ghostAsset!=this._ghostAssetSide&&(this._ghostAsset=this._ghostAssetSide,this._ghost.setTextureAsset(this._ghostAsset)):this._ghostAsset!=this._ghostAssetTop&&(this._ghostAsset=this._ghostAssetTop,this._ghost.setTextureAsset(this._ghostAsset));0>this._ghost.get_velocity().x?this._ghost.get_renderable().scaleX=1:0<this._ghost.get_velocity().x&&(this._ghost.get_renderable().scaleX=-1);f=0;for(c=this._asteroids;f<c.length;)b=c[f],++f,b.update(a);if(0<this._timerInvuln)this._timerInvuln-=a;else{f=0;for(c=this._asteroids;f<c.length;){b=c[f];++f;if(b.checkCollision(this._ghost,d.minigames.MinigameAsteroidNavigator._GHOST_RADIUS)){this._takeDamage(b);break}b.checkWhoosh(this._ghost,d.minigames.MinigameAsteroidNavigator._GHOST_WOOSH_RADIUS)}}2.2<this._timer&&(this._timerAsteroid-=a,0>this._timerAsteroid&&(this._timerAsteroid+=0.25+Math.random()/this._difficulty,this._addAsteroid()));for(a=this._asteroids.length;0<a;)if(a--,b=this._asteroids[a],b.get_element().get_pos().y>d.minigames.Minigame.HEIGHT+0.5*b.get_element().get_renderable().height||b.get_element().get_pos().x<0.5*b.get_element().get_renderable().width&&b.get_active()||b.get_element().get_pos().x>d.minigames.Minigame.WIDTH+0.5*b.get_element().get_renderable().width||b.doCleanup)this._disposeElement(b.get_element()),y.remove(this._asteroids,b),b.dispose(),null;this._ghost.get_pos().x<d.minigames.MinigameAsteroidNavigator._BOUNDING_BUFFER?(this._ghost.get_pos().x=d.minigames.MinigameAsteroidNavigator._BOUNDING_BUFFER,this._ghost.get_velocity().x=0):this._ghost.get_pos().x>d.minigames.Minigame.WIDTH-d.minigames.MinigameAsteroidNavigator._BOUNDING_BUFFER&&(this._ghost.get_pos().x=d.minigames.Minigame.WIDTH-d.minigames.MinigameAsteroidNavigator._BOUNDING_BUFFER,this._ghost.get_velocity().x=0);this._ghost.get_pos().y>d.minigames.Minigame.HEIGHT-75&&(this._ghost.get_pos().y=d.minigames.Minigame.HEIGHT-75)}},reset:function(){this._asteroids=[];this._ghost.get_pos().to(d.minigames.Minigame.CENTER_X,d.minigames.Minigame.HEIGHT-135);this._ghost.get_velocity().x=5+5*Math.random();0.5>Math.random()&&(this._ghost.get_velocity().x*=-1);this._thruster.to(0,1);this._timerAsteroid=1+Math.random();this._hits=this._timerInvuln=0;this._updateHealth();this._dragging=this._won=!1},dispose:function(){this._buttonFire=this._cooldownMeter=this._health=this._ghost=null;this._thruster.dispose();this._thruster=null;this._parallaxer.dispose();this._parallaxer=null;for(var a=0,b=this._asteroids;a<b.length;){var f=b[a];++a;f.get_element().stopAnimation();f.dispose()}a=0;for(b=this._lasers;a<b.length;)f=b[a],++a,this._disposeElement(f);this._lasers=[];this._asteroids=[];d.minigames.Minigame.prototype.dispose.call(this)},init:function(){d.minigames.Minigame.prototype.init.call(this);this._asteroids=[];this._lasers=[];this._timerFlicker=this._timerAsteroid=0;var a=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:this.get_bg(),x:d.minigames.Minigame.CENTER_X,y:0,originX:0.5,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_BG})),b=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:this.get_bg(),x:d.minigames.Minigame.CENTER_X,y:0,originX:0.5,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_BG}));this._parallaxer=new d.data.Parallaxer(a,b,!0);this._parallaxSpeed=25;this._ghostAssetTop="SWR_Mini_Debris_GhostTop";this._ghostAssetSide="SWR_Mini_Debris_GhostSide";this._ghostAsset=this._ghostAssetTop;this._ghost=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:this._ghostAsset,x:0,y:0,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}));this._health=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"SWR_Mini_Debris_GREEN",x:d.minigames.Minigame.WIDTH-150,y:85,originX:0.5,originY:0.5,scale:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_HUD}));this._cooldownMeter=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"minigame_timer",x:22,y:d.minigames.Minigame.HEIGHT-37+63,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FRAME}));this._cooldownMeter.get_renderable().scaleX=2;this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"fire_frame",x:-23,y:d.minigames.Minigame.HEIGHT-10+63,originY:1,layer:d.minigames.Minigame.LAYER_MINIGAME_FRAME}));this._buttonFire=new g.buttons.ButtonFire(112,d.minigames.Minigame.HEIGHT-45+63,d.World.get_tweener(),0.5,0.5,"fire_button");this._buttonFire.get_dispatcher().addEventListener(g.buttons.ButtonBase.CLICK,q(this,this._fire));this._buttonFire.set_layer(d.minigames.Minigame.LAYER_MINIGAME_FRAME);this._buttonFire.enable();this._elementManager.addElement(this._buttonFire);this._fireCooldown=2;this._thruster=h.WorkinPoint.request();this.reset()},_setTime:function(a){this._timeTotal=1.5*a;this._timer=a;this._updateTimerDisplay()},__class__:d.minigames.MinigameAsteroidNavigator});d.minigames.CargoCraneState=l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.CargoCraneState"]={__ename__:"com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,CargoCraneState".split(","),__constructs__:["_STATE_CARGO_GAMEPLAY","_STATE_CARGO_WIN","_STATE_CARGO_LOSE"]};d.minigames.CargoCraneState._STATE_CARGO_GAMEPLAY=["_STATE_CARGO_GAMEPLAY",0];d.minigames.CargoCraneState._STATE_CARGO_GAMEPLAY.toString=o;d.minigames.CargoCraneState._STATE_CARGO_GAMEPLAY.__enum__=d.minigames.CargoCraneState;d.minigames.CargoCraneState._STATE_CARGO_WIN=["_STATE_CARGO_WIN",1];d.minigames.CargoCraneState._STATE_CARGO_WIN.toString=o;d.minigames.CargoCraneState._STATE_CARGO_WIN.__enum__=d.minigames.CargoCraneState;d.minigames.CargoCraneState._STATE_CARGO_LOSE=["_STATE_CARGO_LOSE",2];d.minigames.CargoCraneState._STATE_CARGO_LOSE.toString=o;d.minigames.CargoCraneState._STATE_CARGO_LOSE.__enum__=d.minigames.CargoCraneState;d.minigames.MinigameCargoCrane=function(a){this._jerkUp=!0;a.instructions=a.objective==d.minigames.MinigameCargoCrane.OBJECTIVE_SAVE?"cargo_instructions":"cargo_instructions_jettison";d.minigames.Minigame.call(this,a);this.init()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.MinigameCargoCrane"]=d.minigames.MinigameCargoCrane;d.minigames.MinigameCargoCrane.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,MinigameCargoCrane".split(",");d.minigames.MinigameCargoCrane.__super__=d.minigames.Minigame;d.minigames.MinigameCargoCrane.prototype=v(d.minigames.Minigame.prototype,{get_bg:function(){return""},get_duration:function(){return this._objective==d.minigames.MinigameCargoCrane.OBJECTIVE_SAVE?10-1*c.Inventory.getRank(c.Item.ITEM_TIME_REPAIR):7+0.1*7*c.Inventory.getRank(c.Item.ITEM_TIME_REPAIR)},get_id:function(){return d.minigames.Minigame.MINIGAME_CARGO_CRANE},handleInput:function(a){if(this._state!=d.minigames.CargoCraneState._STATE_CARGO_GAMEPLAY&&!this._active)return d.minigames.Minigame.prototype.handleInput.call(this,a);switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:for(var b=0,f=this._blocks;b<f.length;){var m=f[b];++b;if(m.get_grabbed())return d.minigames.Minigame.prototype.handleInput.call(this,a)}b=0;for(f=this._blocks;b<f.length;)if(m=f[b],++b,m.contains(a.x,a.y)&&!m.get_disabled())return m.setState(d.data.BLOCK_STATE._STATE_AIR),m.grab(),e.WorkinCloud.get_instance().get_sound().playSound("sfx_cargo_crate_push",0.3),m.get_pointer().to(a.x-(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH),a.y),d.minigames.Minigame.prototype.handleInput.call(this,a);break;case n.WMEventInput.PHASE_MOVE:b=0;for(f=this._blocks;b<f.length;)m=f[b],++b,m.get_grabbed()&&m.get_pointer().to(a.x-(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH),a.y);break;case n.WMEventInput.PHASE_UP:b=0;for(f=this._blocks;b<f.length;)m=f[b],++b,m.set_grabbed(!1)}}return d.minigames.Minigame.prototype.handleInput.call(this,a)},_updateDoorJerk:function(a){this._jerkUp?(this._door.get_renderable().rotation-=30*a,this._pivot.get_renderable().rotation-=30*a,-20>=this._door.get_renderable().rotation&&(this._jerkUp=!1)):(this._door.get_renderable().rotation+=2*a,this._pivot.get_renderable().rotation+=2*a,-18<=this._door.get_renderable().rotation&&(this._jerkUp=!0))},update:function(a){d.minigames.Minigame.prototype.update.call(this,a);this._paralaxX+=50*a;0<this._paralaxX&&(this._paralaxX-=610);this._bgTexture.get_graphics().save();this._bgTexture.get_graphics().translate(this._paralaxX,0);this._bgTexture.get_graphics().drawPattern(this._starTexture,0,0,1220,500);this._bgTexture.get_graphics().restore();if(this._active)switch(this._state[1]){case 0:for(var b=0,f=this._blocks;b<f.length;){var c=f[b];++b;c.update(a)}this._objective==d.minigames.MinigameCargoCrane.OBJECTIVE_SAVE&&this._updateDoorJerk(a);1>this._timer&&(this._objective==d.minigames.MinigameCargoCrane.OBJECTIVE_JETTISON?this._setState(d.minigames.CargoCraneState._STATE_CARGO_LOSE):this._setState(d.minigames.CargoCraneState._STATE_CARGO_WIN));b=0;for(f=this._blocks;b<f.length;)if(c=f[b],++b,c.get_state()!=d.data.BLOCK_STATE._STATE_LOST)return;this._objective==d.minigames.MinigameCargoCrane.OBJECTIVE_SAVE?this._setState(d.minigames.CargoCraneState._STATE_CARGO_LOSE):this._setState(d.minigames.CargoCraneState._STATE_CARGO_WIN);break;case 1:b=0;for(f=this._blocks;b<f.length;)c=f[b],++b,c.update(a)}},close:function(){d.minigames.Minigame.prototype.close.call(this)},open:function(){d.minigames.Minigame.prototype.open.call(this)},dispose:function(){this._container.removeElement(this._bgStars);this._container.removeElement(this._bgBay);d.World.get_tweener().stop(this._door.get_renderable());d.World.get_tweener().stop(this._pivot.get_renderable());this._starTexture=this._bgTexture=this._bgStars=this._bgBay=this._setPieces=null;for(var a=0,b=this._blocks;a<b.length;){var f=b[a];++a;d.World.get_tweener().stop(f.get_element().get_pos());f.dispose()}this._pivot=this._door=this._blocks=null;a=0;for(b=this._helpArrows;a<b.length;)f=b[a],++a,d.World.get_tweener().stop(f),this._container.removeElement(f);this._helpArrows=null;d.minigames.Minigame.prototype.dispose.call(this)},_setState:function(a){switch(a[1]){case 1:e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_door2");this._won=!0;this._timerEnd=0.5;d.World.get_tweener().tween(this._door.get_renderable(),0.5,{rotation:-78},null,h.tween.Ease.EASE_IN);d.World.get_tweener().tween(this._pivot.get_renderable(),0.5,{rotation:-78},null,h.tween.Ease.EASE_IN);for(var b=0,f=this._blocks;b<f.length;){var c=f[b];++b;c.setState(d.data.BLOCK_STATE._STATE_GROUND)}break;case 2:e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_door2");this._won=!1;this._timerEnd=0.5;b=0;for(f=this._blocks;b<f.length;)c=f[b],++b,c.setState(d.data.BLOCK_STATE._STATE_GROUND);d.World.get_tweener().tween(this._door.get_renderable(),0.5,{rotation:-78},null,h.tween.Ease.EASE_IN);d.World.get_tweener().tween(this._pivot.get_renderable(),0.5,{rotation:-78},null,h.tween.Ease.EASE_IN)}this._state=a},init:function(){d.minigames.Minigame.prototype.init.call(this);this._won=!0;this._blocks=[];this._setPieces=[];this._door=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-door",x:395,y:410,originX:0.05,originY:0.05,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._setPieces.push(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-bay-cross-section",x:0,y:0,originX:0,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_FG})));this._pivot=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-door-rotator",x:400,y:410,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));switch(this._difficulty){case 0:this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-1",x:120,y:150,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));break;case 1:this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-1",x:90,y:110,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-2",x:80,y:220,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));break;case 2:this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-5",x:80,y:120,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-2",x:90,y:220,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));break;case 3:this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-1",x:80,y:80,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-2",x:90,y:180,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-6",x:80,y:260,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));break;case 4:this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-1",x:90,y:130,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-4",x:220,y:150,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-3",x:97,y:230,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));this._objective==d.minigames.MinigameCargoCrane.OBJECTIVE_JETTISON&&this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-6",x:218,y:257,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))));break;default:this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-1",x:90,y:140,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY})))),this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-2",x:196,y:120,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY})))),this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-3",x:66,y:239,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY})))),this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-4",x:185,y:250,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY})))),this._objective==d.minigames.MinigameCargoCrane.OBJECTIVE_JETTISON&&this._blocks.push(new d.data.Block(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"cargo-box-5",x:290,y:210,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}))))}this._starTexture=e.WorkinCloud.get_instance().get_assets().getTexture("cargo-stars-bg");this._bgTexture=B.createTexture(610,600);this._bgStars=this._container.addElement(new j.Element({x:-300,y:-250,useCamera:!1}));this._bgStars.setImageSprite(new r.ImageSprite(this._bgTexture));this._bgBay=this._container.addElement(new j.Element({asset:"cargo-bay-inside",x:this._bgStars.get_pos().x,y:-230,useCamera:!1}));this._paralaxX=-610;this._bgTexture.get_graphics().drawPattern(this._starTexture,this._paralaxX,0,1220,500);this._helpArrows=[];this._helpArrows.push(this._container.addElement(new j.Element({asset:"cargo-help-arrow",x:0,y:0,useCamera:!1,originX:0.5,originY:0.5})));this._helpArrows.push(this._container.addElement(new j.Element({asset:"cargo-help-arrow",x:0,y:0,useCamera:!1,originX:0.5,originY:0.5})));var a=50,b=!1;if(this._objective==d.minigames.MinigameCargoCrane.OBJECTIVE_JETTISON){for(var f=0,m=this._blocks;f<m.length;){var g=m[f];++f;g.disablePull()}b=!0;a=-50}else{f=0;for(m=this._blocks;f<m.length;)g=m[f],++f,g.gravity+=10*this._difficulty}this._door.get_renderable().rotation=-30;this._pivot.get_renderable().rotation=-30;f=g=0;for(m=this._helpArrows;f<m.length;){var i=m[f];++f;i.get_pos().x=a;b&&(i.get_renderable().scaleX=-1);i.get_renderable().alpha=0;d.World.get_tweener().tween(i.get_renderable(),0.1,{alpha:1},!0,h.tween.Ease.EASE_LINEAR,0.5*g);d.World.get_tweener().tween(i.get_renderable(),0.1,{alpha:0},!1,h.tween.Ease.EASE_LINEAR,0.3);d.World.get_tweener().tween(i.get_pos(),0.5,{x:0-a},!0,h.tween.Ease.EASE_LINEAR,0.5*g);d.World.get_tweener().tween(i.get_pos(),0,{x:a},!1,h.tween.Ease.EASE_LINEAR);d.World.get_tweener().tween(i.get_renderable(),0.1,{alpha:1},!1,h.tween.Ease.EASE_LINEAR);d.World.get_tweener().tween(i.get_renderable(),0.1,{alpha:0},!1,h.tween.Ease.EASE_LINEAR,0.3);d.World.get_tweener().tween(i.get_pos(),0.5,{x:0-a},!1,h.tween.Ease.EASE_LINEAR);d.World.get_tweener().tween(i.get_pos(),0,{x:a},!1,h.tween.Ease.EASE_LINEAR);d.World.get_tweener().tween(i.get_renderable(),0.1,{alpha:1},!1,h.tween.Ease.EASE_LINEAR);d.World.get_tweener().tween(i.get_renderable(),0.1,{alpha:0},!1,h.tween.Ease.EASE_LINEAR,0.3);d.World.get_tweener().tween(i.get_pos(),0.5,{x:0-a},!1,h.tween.Ease.EASE_LINEAR);g++}this._setState(d.minigames.CargoCraneState._STATE_CARGO_GAMEPLAY)},__class__:d.minigames.MinigameCargoCrane});d.minigames.MinigameCrewProtect=function(a){a.instructions="crew_instructions";d.minigames.Minigame.call(this,a);this.init()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.MinigameCrewProtect"]=d.minigames.MinigameCrewProtect;d.minigames.MinigameCrewProtect.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,MinigameCrewProtect".split(",");d.minigames.MinigameCrewProtect.__super__=d.minigames.Minigame;d.minigames.MinigameCrewProtect.prototype=v(d.minigames.Minigame.prototype,{get_bg:function(){return"crew_protect_bg"},get_duration:function(){return 315+1.5*c.Inventory.getRank(c.Item.ITEM_TIME_INFILTRATION)},get_id:function(){return d.minigames.Minigame.MINIGAME_CREW_PROTECT},handleInput:function(a){if(this._active)switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:if(this._map.checkDoors(a.x+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT(),a.y,this._crew,this._teams)){this._crew.moveIt(8,3);for(var b=0,f=this._teams;b<f.length;){var e=f[b];++b;e.seekNextPoint()}}}}return d.minigames.Minigame.prototype.handleInput.call(this,a)},_doCaught:function(){0!=this._timerEnd||this._closing||(this._won=!1,this._timerEnd=1,e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_alarm"))},makeSearchDefBlips:function(){for(var a=[],b=0;3>b;)b++,a.push(this._elementManager.addElement(new j.Element({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"enemy-blip-solo",originX:0.5,originY:0.5})));return a},update:function(a){var b=this;d.minigames.Minigame.prototype.update.call(this,a);if(this._active)if(0<this._timerEnd||this._closing)null!=this._teamThatCaughtCrew&&this._teamThatCaughtCrew.surroundTarget(this._crew);else{for(var f=0,e=this._teams;f<e.length;){var g=e[f];++f;g.update(a)}this._blipTimer-=a;0>this._blipTimer&&(this._crew.animate("blip",1,!0),this._blipTimer=2);!this._crew.isMoving&&0<this._crew.get_currentPath().length?(this._crew.setNewTilePos(this._crew.get_currentPath()[0].get_x(),this._crew.get_currentPath()[0].get_y()),this._crew.isMoving=!0,f=d.World.CHOPPER_BASE_MOVETIME-c.Inventory.getRank(c.Item.ITEM_SPEED_INFILTRATION)*d.World.CHOPPER_MOVETIME_MODIFIER,d.World.get_tweener().tween(this._crew.get_pos(),3*f,{x:this._crew.get_currentPath()[0].get_x()*this._map.get_tileSize()+this._map.get_pos().x,y:this._crew.get_currentPath()[0].get_y()*this._map.get_tileSize()+this._map.get_pos().y},null,h.tween.Ease.EASE_LINEAR).onComplete(function(){b._crew.get_currentPath().splice(0,1);b._crew.isMoving=!1})):!this._crew.isMoving&&null!=this._callbackAction&&(this._callbackAction(),this._callbackAction=null);f=0;for(e=this._teams;f<e.length;)if(a=e[f],++f,!a.get_body().isMoving&&0==a.get_body().get_currentPath().length&&!a.stuck){a.stuck=!0;if(2>this._teams.length){f=null;switch(t.random(4)){case 0:this._elementManager.addElement(f=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"enemy-blip",originX:0.5,originY:0.5},this._map,7,0));break;case 1:this._elementManager.addElement(f=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"enemy-blip",originX:0.5,originY:0.5},this._map,2,0));break;case 2:this._elementManager.addElement(f=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"enemy-blip",originX:0.5,originY:0.5},this._map,2,6));break;case 3:this._elementManager.addElement(f=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"enemy-blip",originX:0.5,originY:0.5},this._map,7,6))}this._teams.push(new d.data.SearchTeamDef(f,this._crew,this._map,this.makeSearchDefBlips()))}return}f=0;for(e=this._teams;f<e.length;)a=e[f],++f,this._crew.get_currentX()==a.get_body().get_currentX()&&this._crew.get_currentY()==a.get_body().get_currentY()&&(this._teamThatCaughtCrew=a,this._doCaught());8==this._crew.get_currentX()&&3==this._crew.get_currentY()&&!1==this._won&&(this._won=!0,this._timerEnd=1)}},dispose:function(){d.World.get_tweener().stop(this._crew.get_pos());for(var a=0,b=this._teams;a<b.length;){var f=b[a];++a;d.World.get_tweener().stop(f.get_body().get_pos())}d.minigames.Minigame.prototype.dispose.call(this);this._teamThatCaughtCrew=this._teams=this._map=this._crew=null},init:function(){d.minigames.Minigame.prototype.init.call(this);this._tracking=this._won=!1;this._teamThatCaughtCrew=null;this._blipTimer=1;this._map=this._elementManager.addElement(new d.elements.CrewProtectMap({layer:d.minigames.Minigame.LAYER_MINIGAME_BG,x:50,y:50},9,7,64));this._teams=[];this._elementManager.addElement(this._crew=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"green-blip-001",originX:0.5,originY:0.5},this._map,0,3));this._crew.addAnimationFrames("blip","green-blip-001,green-blip-002,green-blip-003,green-blip-004,green-blip-005,green-blip-006,green-blip-007,green-blip-008".split(","));var a=null;switch(t.random(4)){case 0:this._elementManager.addElement(a=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"enemy-blip",originX:0.5,originY:0.5},this._map,7,0));break;case 1:this._elementManager.addElement(a=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"enemy-blip",originX:0.5,originY:0.5},this._map,2,0));break;case 2:this._elementManager.addElement(a=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"enemy-blip",originX:0.5,originY:0.5},this._map,2,6));break;case 3:this._elementManager.addElement(a=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"enemy-blip",originX:0.5,originY:0.5},this._map,7,6))}this._teams.push(new d.data.SearchTeamDef(a,this._crew,this._map,this.makeSearchDefBlips()));this._crew.moveIt(8,3)},__class__:d.minigames.MinigameCrewProtect});d.minigames.MinigameFireExtinguisher=function(a){a.instructions="fire_instructions";d.minigames.Minigame.call(this,a);this.init()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.MinigameFireExtinguisher"]=d.minigames.MinigameFireExtinguisher;d.minigames.MinigameFireExtinguisher.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,MinigameFireExtinguisher".split(",");d.minigames.MinigameFireExtinguisher.__super__=d.minigames.Minigame;d.minigames.MinigameFireExtinguisher.prototype=v(d.minigames.Minigame.prototype,{get_bg:function(){return"fire_extinguisher_bg"},get_duration:function(){return 8-this._difficulty+c.Inventory.getRank(c.Item.ITEM_TIME_REPAIR)},get_id:function(){return d.minigames.Minigame.MINIGAME_FIRE_EXTINGUISHER},handleInput:function(a){if(this._active)switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:for(var b=0;5>b;)for(var f=b++,e=0;4>e;){var g=e++;if(this._rooms[f][g].contains(a.x,a.y))return 0==f&&0==g||(this._rooms[f][g].select(),this._updateRoomLinks()),this._allFiresSelected()&&this._openAirlock(this._rooms[0][0],0),d.minigames.Minigame.prototype.handleInput.call(this,a)}}}return d.minigames.Minigame.prototype.handleInput.call(this,a)},_openAirlock:function(){e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_door7");this._timerEnd=1;this._airLock.setTextureAsset("air-lock-open");for(var a=0;5>a;)for(var b=a++,f=0;4>f;){var c=f++;this._rooms[b][c].get_state()==d.data.ROOM_STATE.STATE_SELECTED&&this._rooms[b][c].setState(d.data.ROOM_STATE.STATE_OPEN)}a=0;for(f=this._doors;a<f.length;)b=f[a],++a,b.get_state()==d.data.DOOR_STATE.STATE_OPEN&&b.setState(d.data.DOOR_STATE.STATE_FINAL);this._won=!0;for(a=this._parentMap.keys();a.hasNext();)f=a.next(),f.get_state()==d.data.ROOM_STATE.STATE_OPEN&&f.get_type()==d.data.ROOM_TYPE.CARGO&&(this._won=!1),f.get_state()!=d.data.ROOM_STATE.STATE_OPEN&&f.get_type()==d.data.ROOM_TYPE.FIRE&&(this._won=!1);this._won||(this._messageBoxText.swapTextToDisplay("fire_fail"),d.World.get_tweener().tween(this._messageBox.get_pos(),0.3,{y:-50},null,h.tween.Ease.EASE_IN),d.World.get_tweener().tween(this._messageBox.get_pos(),0.3,{y:-d.minigames.Minigame.CENTER_Y},null,h.tween.Ease.EASE_OUT,1))},_depthFirstSearchInit:function(a){this._discMap.set(a,!0);for(var b=0,f=a.get_neighbors();b<f.length;){var c=f[b];++b;this._discMap.h[c.__id__]||(this._parentMap.set(c,a),this._depthFirstSearchInit(c))}},_depthFirstSearch:function(a){for(var b=0,f=a.get_neighbors();b<f.length;){var c=f[b];++b;null==this._parentMap.h[c.__id__]&&c.get_state()==d.data.ROOM_STATE.STATE_SELECTED&&(this._parentMap.set(c,a),this._depthFirstSearch(c))}},_closeAllDoors:function(){for(var a=0,b=this._doors;a<b.length;){var f=b[a];++a;f.setState(d.data.DOOR_STATE.STATE_CLOSED)}},_allFiresSelected:function(){for(var a=this._parentMap.keys();a.hasNext();){var b=a.next();if(b.get_type()==d.data.ROOM_TYPE.FIRE&&b.get_state()!=d.data.ROOM_STATE.STATE_SELECTED)return!1}return!0},_openDoorBetweenRooms:function(a,b){for(var f=0,c=this._doors;f<c.length;){var e=c[f];++f;(e.get_roomA()==a&&e.get_roomB()==b||e.get_roomA()==b&&e.get_roomB()==a)&&e.setState(d.data.DOOR_STATE.STATE_OPEN)}},_updateRoomLinks:function(){this._closeAllDoors();for(var a=0;5>a;)for(var b=a++,f=0;4>f;){var c=f++;if((0!=b||0!=c)&&this._rooms[b][c].get_state()==d.data.ROOM_STATE.STATE_SELECTED){for(var e=this._parentMap.keys();e.hasNext();)this._parentMap.set(e.next(),null);this._depthFirstSearch(this._rooms[0][0]);null==this._parentMap.h[this._rooms[b][c].__id__]?this._rooms[b][c].setState(d.data.ROOM_STATE.STATE_CLOSED):this._openDoorBetweenRooms(this._rooms[b][c],this._parentMap.h[this._rooms[b][c].__id__])}}},_addDoor:function(a,b,f){for(var c=0,e=this._doors;c<e.length;){var g=e[c];++c;(g.get_roomA()==b&&g.get_roomB()==f||g.get_roomA()==f&&g.get_roomB()==b)&&null}this._doors.push(new d.data.DoorDef(a,b,f))},update:function(a){d.minigames.Minigame.prototype.update.call(this,a)},close:function(){d.minigames.Minigame.prototype.close.call(this)},open:function(){d.minigames.Minigame.prototype.open.call(this)},dispose:function(){for(var a=0,b=this._doors;a<b.length;){var f=b[a];++a;this._elementManager.removeElement(f.get_element());f.dispose()}for(a=this._parentMap.keys();a.hasNext();)a.next().dispose();d.minigames.Minigame.prototype.dispose.call(this);this._doors=null;a=0;for(b=this._rooms;a<b.length;)++a;this._parentMap=this._rooms=null},init:function(){d.minigames.Minigame.prototype.init.call(this);this._won=!1;this._rooms=[];this._doors=[];this._parentMap=new w.ObjectMap;this._discMap=new w.ObjectMap;for(var a=0;5>a;){var b=a++;this._rooms.push([]);for(var f=0;4>f;){var e=f++;this._rooms[b].push(null)}}for(a=0;5>a;){b=a++;for(f=0;4>f;)if(e=f++,null==this._rooms[b][e]){var g=1,h=1,i=Math.random();switch(this._difficulty){case 1:i=0.5>i?1:2;break;case 2:i=0.5>i?1:0.75>i?2:0;break;case 3:i=0.33>i?1:0.66>i?2:0;break;case 4:i=0.25>i?1:0.5>i?2:0;break;case 5:i=0.1>i?1:0.2>i?2:0}switch(i){case 0:h=g=1;break;case 1:h=g=2;break;case 2:g=2,h=1}if(4==b||null!=this._rooms[b+1][e])g=1;if(3==e||null!=this._rooms[b][e+1])h=1;i=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:g+"x"+h+"-room",x:d.minigames.MinigameFireExtinguisher._GRID_START_X+112*b,y:d.minigames.MinigameFireExtinguisher._GRID_START_Y+112*e,originX:0,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._rooms[b][e]=new d.data.RoomDef(i,g,h,b,e);this._rooms[b+g-1][e]=this._rooms[b][e];this._rooms[b][e+
h-1]=this._rooms[b][e];this._rooms[b+g-1][e+h-1]=this._rooms[b][e]}}for(a=0;5>a;){b=a++;for(f=0;4>f;)e=f++,this._parentMap.set(this._rooms[b][e],null),this._discMap.set(this._rooms[b][e],!1),4!=b&&this._rooms[b+1][e]!=this._rooms[b][e]&&(g=d.minigames.MinigameFireExtinguisher._GRID_START_X+112*(b+1),h=d.minigames.MinigameFireExtinguisher._GRID_START_Y+56+112*e,i=this._elementManager.addElement(new j.Element({asset:"door-off",x:g,y:h,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG})),i.get_renderable().scaleY=0.9,this._addDoor(i,this._rooms[b][e],this._rooms[b+1][e])),3!=e&&this._rooms[b][e+1]!=this._rooms[b][e]&&(g=d.minigames.MinigameFireExtinguisher._GRID_START_X+56+112*b,h=d.minigames.MinigameFireExtinguisher._GRID_START_Y+112*(e+1),i=this._elementManager.addElement(new j.Element({asset:"door-off",x:g,y:h,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG})),i.get_renderable().scaleY=0.9,i.get_renderable().rotation=-90,this._addDoor(i,this._rooms[b][e],this._rooms[b][e+
1]))}f=0;for(a=0.25*this._doors.length|0;f<a;)f++,b=this._doors[t.random(this._doors.length-2)+2],this._elementManager.removeElement(b.get_element()),y.remove(this._doors,b),b.dispose();a=0;for(f=this._doors;a<f.length;)b=f[a],++a,b.get_roomA().addNeighbor(b.get_roomB()),b.get_roomB().addNeighbor(b.get_roomA()),null;for(a=this._parentMap.keys();a.hasNext();)this._parentMap.set(a.next(),null);this._depthFirstSearchInit(this._rooms[0][0]);a=this._rooms[0][0];for(f=this._parentMap.keys();f.hasNext();)b=f.next(),null!=this._parentMap.h[b.__id__]&&(a=b);for(a.setType(d.data.ROOM_TYPE.FIRE);0!=a.get_x()||0!=a.get_y();)a=this._parentMap.h[a.__id__],a.setType(Math.random()<0.5-0.09*c.Inventory.getRank(c.Item.ITEM_SPEED_REPAIR)?d.data.ROOM_TYPE.FIRE:d.data.ROOM_TYPE.EMPTY);for(a=0;5>a;){b=a++;for(f=0;4>f;)e=f++,this._rooms[b][e].typeSet||this._rooms[b][e].setType(0.6>Math.random()?d.data.ROOM_TYPE.CARGO:d.data.ROOM_TYPE.EMPTY)}this._airLock=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"air-lock-closed",x:d.minigames.MinigameFireExtinguisher._GRID_START_X,y:d.minigames.MinigameFireExtinguisher._GRID_START_Y+56,originX:0,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}))},__class__:d.minigames.MinigameFireExtinguisher});d.minigames.MinigameLander=function(a){a.instructions="lander_instructions";d.minigames.Minigame.call(this,a);this.init()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.MinigameLander"]=d.minigames.MinigameLander;d.minigames.MinigameLander.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,MinigameLander".split(",");d.minigames.MinigameLander.__super__=d.minigames.Minigame;d.minigames.MinigameLander.prototype=v(d.minigames.Minigame.prototype,{get_bg:function(){return this._skin==d.minigames.MinigameLander.SKIN_IMPERIAL?"SWR_Mini_Lander_BG_Imperial":"SWR_Mini_Lander_BG"},get_id:function(){return d.minigames.Minigame.MINIGAME_LANDER},get_duration:function(){return 10*this._timeMod+1*c.Inventory.getRank(c.Item.ITEM_TIME_REPAIR)},get_objectiveDefault:function(){return d.minigames.MinigameLander.OBJECTIVE_LAND},get_thruster:function(){return d.minigames.MinigameLander._CHOPPER_GRAVITY*(2.5+0.5*c.Inventory.getRank(c.Item.ITEM_SPEED_INFILTRATION))},_get_waverRange:function(){switch(this._difficulty){case 2:return 25;case 3:return 100;case 4:return 200;case 5:return 280;default:return 0}},get_skinDefault:function(){return d.minigames.MinigameLander.SKIN_NORMAL},handleInput:function(a){if(this._active)switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:this._overlay.contains(a.x,a.y)&&0>=this._stunTimer&&(this._flame.get_renderable().visible=!0,this._soundTimer=0,this._dragging=!0,this._dragX=a.x+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT(),this._dragY=a.y);break;case n.WMEventInput.PHASE_MOVE:this._dragging&&this._overlay.contains(a.x,a.y)&&(this._dragX=a.x+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT(),this._dragY=a.y);break;case n.WMEventInput.PHASE_UP:this._dragging=!1,this._flame.get_renderable().visible=!1}}return d.minigames.Minigame.prototype.handleInput.call(this,a)},close:function(){d.minigames.Minigame.prototype.close.call(this)},open:function(){d.minigames.Minigame.prototype.open.call(this);this.reset()},_doImpulseReset:function(){this._dragging=!1;this._flame.get_renderable().visible=!1},_doCargoReset:function(){this._towing=!1;this._cargo.get_pos().to(this._safe.get_pos().x+0.5*this._safe.get_renderable().width,this._safe.get_pos().y-27)},_doChopperCrash:function(){this._timer-=1;e.WorkinCloud.get_instance().get_sound().playSound("sfx_asteroid_hit",0.4);e.WorkinCloud.get_instance().get_sound().playSound("chopper_cant_move",0.5);this._chopper.get_velocity().y=4*-d.minigames.MinigameLander._CHOPPER_GRAVITY;this._stunTimer=3;switch(this._objective){case d.minigames.MinigameLander.OBJECTIVE_PICKUP_RETURN:this._doCargoReset()}this._doImpulseReset()},_updateFlame:function(){this._flame.get_renderable().rotation=this._chopper.get_renderable().rotation;this._flame.get_pos().x=this._chopper.get_pos().x;this._flame.get_pos().y=this._chopper.get_pos().y},_generateLand:function(){var a=0,b=d.minigames.Minigame.HEIGHT-10,f=[],m=[];this._safeZones=[];f.push(e.WorkinCloud.get_instance().get_random().getRandomInt(1,6));for(var g=1,h=0;16>m.length;)m.splice(e.WorkinCloud.get_instance().get_random().getRandomInt(h,m.length),0,g),g++,8<=g&&(g=1,h=m.length-1);this._terrain=[];var i,h=g=0,j="SWR_Mini_Lander_Land";this._skin==d.minigames.MinigameLander.SKIN_IMPERIAL&&(j="SWR_Mini_Lander_Imperial");for(var k;a<d.minigames.Minigame.WIDTH;){k=!1;for(i=0;i<f.length;){var l=f[i];++i;l==h&&(k=!0)}i=k?j+"FLAT_"+this._difficulty:j+m[g];"SWR_Mini_Lander_Land"==j&&k&&(i=j+"FLAT");i=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:i,x:a,y:b,originX:0,originY:1,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}));i.initBehavior(d.elements.MinigameElement.BEHAVIOR_TERRAIN,{});this._terrain.push(i);k&&(this._safe=i,this._safeZones.push(i),null);a+=this._terrain[this._terrain.length-1].get_renderable().width-5;g++;g>=m.length&&(g=0);h++}this._skin!=d.minigames.MinigameLander.SKIN_IMPERIAL?(a=0.5>Math.random(),this._landing=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"SWR_Mini_Lander_IMPERIAL_"+this._difficulty,x:0,y:b,originX:0,originY:1,layer:d.minigames.Minigame.LAYER_MINIGAME_PLAYER})),this._landing.initBehavior(d.elements.MinigameElement.BEHAVIOR_TERRAIN,{}),a?(this._landing.get_pos().x=0,this._landing.get_renderable().scaleX=-1,this._landing.setRenderOffset(this._landing.get_renderable().width,0)):(this._landing.get_pos().x=d.minigames.Minigame.WIDTH-this._landing.get_renderable().width,this._landing.get_renderable().scaleX=1),this._safeZones.push(this._landing),this._terrain.push(this._landing)):this._landing=this._safe;this._elementManager.updateZSort(d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY)},_attachCrate:function(){this._towing||(e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_door1",0.4),this._towing=!0)},_doWinState:function(){this._won||(this._dragging=!1,this._won=!0,this._timerEnd=1)},_doForceFlame:function(){this._forceFlame=this._flame.get_renderable().visible=!0},_updateTimer:function(a){if(0<this._timer){this._active&&this._dragging&&(this._timer-=a);0<this._timerShake?(this._timerShake-=a,this._elementManager.get_camera().get_pos().to(this._cameraOpenedX+e.WorkinCloud.get_instance().get_random().getRandomFloat(0,this._screenShakeMagnitude),this._screenShakeOriginY+e.WorkinCloud.get_instance().get_random().getRandomFloat(0,this._screenShakeMagnitude))):-10<this._timerShake&&(this._elementManager.get_camera().get_pos().x=this._cameraOpenedX,this._elementManager.get_camera().get_pos().y=this._screenShakeOriginY);if(0<this._timerEnd&&(this._timerEnd-=a,0>=this._timerEnd)){this._timerEnd=0;this.close();return}this._updateTimerDisplay();0>=this._timer&&(this._timer=0,this.get_winOnTimesUp()&&(this._won=!0),this.close())}else this._dragging=!1,this._flame.get_renderable().visible=!1},update:function(a){var b=this;this._ghostLastX=this._ghost.get_pos().x;d.minigames.Minigame.prototype.update.call(this,a);if(this._active){this._paralaxX+=3*this._parallaxDirection.x*a;this._paralaxY+=this._parallaxDirection.y*a;0<this._paralaxX&&(this._paralaxX-=610);-610>this._paralaxX&&(this._paralaxX+=610);0<this._paralaxY&&(this._paralaxY-=473);-473>this._paralaxY&&(this._paralaxY+=473);this._bgTexture.get_graphics().save();this._bgTexture.get_graphics().translate(this._paralaxX,this._paralaxY);this._bgTexture.get_graphics().drawPattern(this._starTexture,0,0,1220,946);this._bgTexture.get_graphics().restore();if((this._dragging||this._forceFlame)&&0>=this._stunTimer){this._soundTimer-=a;0>=this._soundTimer&&(this._soundTimer=d.minigames.MinigameLander._SOUND_LOOP_LENGTH,e.WorkinCloud.get_instance().get_sound().playSound("sfx_lander_thruster",0.3));h.WorkinMath.diffBetweenAB(this._chopper.get_pos().x,this._chopper.get_pos().y,this._dragX,this._dragY,this._point);this._point.normalize();this._won?(this._angleAim=90,this._chopper.get_pos().x=this._ghost.get_pos().x+
this._storeXDifference):this._angleAim=this._point.get_angle()+180;270<this._angleAim?this._angleAim=0:180<this._angleAim&&(this._angleAim=180);for(this._angleChopper=this._chopper.get_renderable().rotation+90;0>this._angleChopper;)this._angleChopper+=360;for(;360<this._angleChopper;)this._angleChopper-=360;this._point.get_angle();this._turnSpeed=this._angleAim>this._angleChopper?180<this._angleAim-this._angleChopper?-d.minigames.MinigameLander._CHOPPER_TURN_SPEED_BASE:d.minigames.MinigameLander._CHOPPER_TURN_SPEED_BASE:180<=this._angleChopper-this._angleAim?d.minigames.MinigameLander._CHOPPER_TURN_SPEED_BASE:-d.minigames.MinigameLander._CHOPPER_TURN_SPEED_BASE;Math.abs(this._angleAim-this._angleChopper)<d.minigames.MinigameLander._CHOPPER_TURN_SPEED_BASE*a&&(this._turnSpeed=0,this._chopper.get_renderable().rotation=this._angleAim-90);this._chopper.get_renderable().rotation+=this._turnSpeed*a;-90>this._chopper.get_renderable().rotation?this._chopper.get_renderable().rotation=-90:90<this._chopper.get_renderable().rotation&&(this._chopper.get_renderable().rotation=90);this._point.rotateTo(this._angleChopper+180);this._point.normalize();var f=0;this._towing&&(f=-0.2*this._difficulty);this._objective==d.minigames.MinigameLander.OBJECTIVE_RETURN&&(f=-0.1*this._difficulty);this._point.multiply((this.get_thruster()+f)*a);this._chopper.get_velocity().x+=this._point.x;this._chopper.get_velocity().y+=this._point.y}if(0<this._stunTimer){this._stunTimer-=a;for(this._chopper.get_renderable().rotation+=360*a;180<this._chopper.get_renderable().rotation;)this._chopper.get_renderable().rotation-=360}this._updateFlame();this._chopper.get_velocity().y+=d.minigames.MinigameLander._CHOPPER_GRAVITY*a;this._chopper.get_velocity().y>2*d.minigames.MinigameLander._CHOPPER_GRAVITY?this._chopper.get_velocity().y=2*d.minigames.MinigameLander._CHOPPER_GRAVITY:this._chopper.get_velocity().y<2*-d.minigames.MinigameLander._CHOPPER_GRAVITY&&0>=this._stunTimer&&(this._chopper.get_velocity().y=2*-d.minigames.MinigameLander._CHOPPER_GRAVITY);this._chopper.get_velocity().x+=0.0050*-this._chopper.get_velocity().x;this._chopper.get_velocity().x>2*this.get_thruster()?this._chopper.get_velocity().x=2*this.get_thruster():this._chopper.get_velocity().x<2*-this.get_thruster()&&(this._chopper.get_velocity().x=2*-this.get_thruster());if(this._chopper.get_pos().x<d.minigames.MinigameLander._BOUNDING_BUFFER)this._chopper.get_pos().x=d.minigames.MinigameLander._BOUNDING_BUFFER,this._chopper.get_velocity().x*=-0.5;else if(this._chopper.get_pos().x>d.minigames.Minigame.WIDTH-d.minigames.MinigameLander._BOUNDING_BUFFER)this._chopper.get_pos().x=d.minigames.Minigame.WIDTH-d.minigames.MinigameLander._BOUNDING_BUFFER,this._chopper.get_velocity().x*=-0.5;else if(0>this._chopper.get_pos().y)this._chopper.get_pos().y=0,this._chopper.get_velocity().y*=0.5;else if(this._chopper.get_pos().y>d.minigames.Minigame.HEIGHT-d.minigames.MinigameLander._LANDING_HEIGHT){this._chopper.get_pos().y=d.minigames.Minigame.HEIGHT-d.minigames.MinigameLander._LANDING_HEIGHT;this._chopper.get_velocity().x*=0.5;f=!1;if(this._chopper.get_velocity().y<=d.minigames.MinigameLander._CHOPPER_MAX_LAND_SPEED+
d.minigames.MinigameLander._CHOPPER_UPGRADE_MOD*c.Inventory.getRank(c.Item.ITEM_SPEED_INFILTRATION))for(var m=0,g=this._safeZones;m<g.length;){var i=g[m];++m;if(this._chopper.get_pos().x>i.get_pos().x&&this._chopper.get_pos().x<i.get_pos().x+i.get_renderable().width){f=!0;break}}else f=!1,Math.isNaN(e.WorkinCloud.get_instance().getInt(d.minigames.MinigameLander._INSTRUCTIONS_LAND))&&e.WorkinCloud.get_instance().setInt(d.minigames.MinigameLander._INSTRUCTIONS_LAND,0),e.WorkinCloud.get_instance().modifyInt(d.minigames.MinigameLander._INSTRUCTIONS_LAND,1),1>=e.WorkinCloud.get_instance().getInt(d.minigames.MinigameLander._INSTRUCTIONS_LAND)&&(m=0.9+this._instructions.length/15,this._messageBoxText.swapTextToDisplay(d.minigames.MinigameLander._INSTRUCTIONS_LAND),d.World.get_tweener().tween(this._messageBox.get_pos(),0.3,{y:-50},null,h.tween.Ease.EASE_IN),d.World.get_tweener().tween(this._messageBox.get_pos(),0.3,{y:-d.minigames.Minigame.CENTER_Y},null,h.tween.Ease.EASE_OUT,m).onComplete(function(){b._active=!0}));this._chopper.get_velocity().y*=-0.5;if(f)switch(this._objective){case d.minigames.MinigameLander.OBJECTIVE_PICKUP_RETURN:30>h.WorkinMath.distBetweenAB(this._cargo.get_pos().x,this._cargo.get_pos().y,this._chopper.get_pos().x,this._chopper.get_pos().y)&&this._attachCrate();break;case d.minigames.MinigameLander.OBJECTIVE_LAND:this._chopper.get_pos().x>this._landing.get_pos().x&&this._chopper.get_pos().x<this._landing.get_pos().x+this._landing.get_renderable().width&&this._doWinState()}else this._doChopperCrash()}this._chopper.get_pos().y>d.minigames.Minigame.HEIGHT-d.minigames.MinigameLander._LANDING_HEIGHT-75&&this._chopper.get_velocity().y>d.minigames.MinigameLander._CHOPPER_MAX_LAND_SPEED+d.minigames.MinigameLander._CHOPPER_UPGRADE_MOD*c.Inventory.getRank(c.Item.ITEM_SPEED_INFILTRATION)?(this._dangerSign.get_renderable().visible=!0,this._dangerSign.get_renderable().alpha=0.5+this._soundTimer2,this._soundTimer2-=a,0>=this._soundTimer2&&(this._soundTimer2=0.6,e.WorkinCloud.get_instance().get_sound().playSound("alert_red",0.3))):this._dangerSign.get_renderable().visible=!1;this._towing&&(h.WorkinMath.diffBetweenAB(this._cargo.get_pos().x,this._cargo.get_pos().y,this._chopper.get_pos().x,this._chopper.get_pos().y,this._point),this._cargo.get_pos().x+=this._point.x*a,this._cargo.get_pos().y+=this._point.y*a);this._ghostCover.get_pos().to(this._ghost.get_pos().x+7,this._ghost.get_pos().y);d.World.get_tweener().isTweening(this._ghost.get_pos())||(this._ghost.get_pos().x>this._ghostMinX?d.World.get_tweener().tween(this._ghost.get_pos(),4,{x:this._ghostMinX},null,h.tween.Ease.EASE):d.World.get_tweener().tween(this._ghost.get_pos(),4,{x:this._ghostMaxX},null,h.tween.Ease.EASE));this._ghostProjectedXMovement=-this._ghost.get_pos().x+this._ghostLastX;if(!this._won)switch(a=100>h.WorkinMath.distBetweenAB(2*this._chopper.get_pos().x,this._chopper.get_pos().y,2*(this._ghost.get_pos().x+this._ghostProjectedXMovement),this._ghost.get_pos().y),this._objective){case d.minigames.MinigameLander.OBJECTIVE_PICKUP_RETURN:a&&this._towing&&(this._storeXDifference=this._chopper.get_pos().x-this._ghost.get_pos().x,this._doWinState(),this._doForceFlame());break;case d.minigames.MinigameLander.OBJECTIVE_RETURN:a&&(this._storeXDifference=this._chopper.get_pos().x-this._ghost.get_pos().x,this._doWinState(),this._doForceFlame())}}},reset:function(){for(var a=0,b=this._terrain;a<b.length;){var f=b[a];++a;this._disposeElement(f)}this._terrain=[];this._generateLand();switch(this._objective){case d.minigames.MinigameLander.OBJECTIVE_PICKUP_RETURN:this._cargo.get_pos().to(this._safe.get_pos().x+
0.5*this._safe.get_renderable().width,this._safe.get_pos().y-27),this._timeMod=2}0.5<Math.random()?(this._ghostMinX=d.minigames.MinigameLander._BOUNDING_GHOST+Math.random()*(d.minigames.Minigame.WIDTH/2),this._ghostMaxX=this._ghostMinX+this._get_waverRange(),this._ghost.get_pos().to(this._ghostMinX,12)):(this._ghostMaxX=d.minigames.Minigame.WIDTH-d.minigames.MinigameLander._BOUNDING_GHOST-Math.random()*(d.minigames.Minigame.WIDTH/2),this._ghostMinX=this._ghostMaxX-this._get_waverRange(),0>this._ghostMinX&&(this._ghostMinX=d.minigames.MinigameLander._BOUNDING_GHOST),this._ghost.get_pos().to(this._ghostMaxX,12));this._ghostProjectedXMovement=0;this._ghostLastX=this._ghost.get_pos().x;this._ghostCover.get_pos().to(this._ghost.get_pos().x+7,this._ghost.get_pos().y);this._objective==d.minigames.MinigameLander.OBJECTIVE_RETURN?this._chopper.get_pos().to(this._landing.get_pos().x+0.5*this._landing.get_renderable().width,d.minigames.Minigame.HEIGHT-d.minigames.MinigameLander._LANDING_HEIGHT):this._chopper.get_pos().to(this._ghost.get_pos().x,this._ghost.get_pos().y+20);this._chopperStartX=this._chopper.get_pos().x;this._chopperStartY=this._chopper.get_pos().y;this._chopper.get_velocity().x=0;this._chopper.get_velocity().y=0;this._chopper.get_renderable().rotation=0;this._point.to(0,1);this._soundTimer2=this._stunTimer=0;this._updateFlame();this._dragging=this._towing=this._won=!1},dispose:function(){this._container.removeElement(this._bgStars);d.minigames.Minigame.prototype.dispose.call(this);this._ghostCover=this._chopper=this._flame=this._ghost=this._cargo=this._starTexture=this._bgTexture=this._bgStars=null;this._point.dispose();this._point=null;for(var a=0,b=this._terrain;a<b.length;)++a;this._terrain=[];this._safeZones=[]},init:function(){d.minigames.Minigame.prototype.init.call(this);this._terrain=[];this._safeZones=[];this._timeMod=1;this._cargo=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"SWR_Mini_Lander_Crate",x:0,y:0,originX:0.5,originY:1,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._ghost=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"SWR_Mini_Lander_GhostBACK",x:0,y:0,originX:0.5,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_BG}));this._flame=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"SWR_Mini_Lander_Jet",x:0,y:0,visible:!1,originX:0.5,originY:0.1,scale:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._chopper=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"SWR_Mini_Lander_Chopper",x:0,y:0,originX:0.5,originY:0.5,scale:0.75,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._chopper.get_velocity().y=2*d.minigames.MinigameLander._CHOPPER_GRAVITY;this._ghostCover=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"SWR_Mini_Lander_GhostTOP",x:0,y:0,originX:0.5,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._dangerSign=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"slow-down",x:0,y:0,origin:0.5,visible:!1,layer:d.minigames.Minigame.LAYER_MINIGAME_HUD}));this._parallaxDirection=h.WorkinPoint.request(0,d.minigames.MinigameLander._CHOPPER_GRAVITY);this._starTexture=e.WorkinCloud.get_instance().get_assets().getTexture("SWR_Mini_Lander_BG_stars");this._bgTexture=B.createTexture(610,600);this._bgStars=this._container.addElement(new j.Element({x:-300,y:-250,useCamera:!1}));this._bgStars.setImageSprite(new r.ImageSprite(this._bgTexture));this._ghostProjectedXMovement=this._paralaxY=this._paralaxX=0;this._bgTexture.get_graphics().drawPattern(this._starTexture,0,0,1220,500);this._dangerSign.get_pos().to(d.minigames.Minigame.CENTER_X,100);this._point=h.WorkinPoint.request();this.reset()},__class__:d.minigames.MinigameLander});d.minigames.MinigameMatchRotator=function(a){a.instructions="match_instructions";d.minigames.Minigame.call(this,a);this.init()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.MinigameMatchRotator"]=d.minigames.MinigameMatchRotator;d.minigames.MinigameMatchRotator.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,MinigameMatchRotator".split(",");d.minigames.MinigameMatchRotator.__super__=d.minigames.Minigame;d.minigames.MinigameMatchRotator.prototype=v(d.minigames.Minigame.prototype,{get_bg:function(){return"match_background"},get_duration:function(){return 15+1.5*c.Inventory.getRank(c.Item.ITEM_TIME_INFILTRATION)},get_id:function(){return d.minigames.Minigame.MINIGAME_MATCH_ROTATOR},_get_spin_timer:function(a){null==a&&(a=0);return t.random(4)+25-5*this._difficulty+a},handleInput:function(a){var b=this;if(this._active)switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:if(null==this._targetDisc){this._originalPoint.to(a.x+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT(),a.y);this._originalPoint.subtract(d.minigames.MinigameMatchRotator._DISK_CENTER_X,d.minigames.MinigameMatchRotator._DISK_CENTER_Y);this._isRotating=!0;e.WorkinCloud.get_instance().get_sound().playSound("sfx_match_rotator_spin",0.6);switch(this._disk2.get_renderable().rotation){case-45:case-225:this._rotat2FlipQuotient=-90;break;case-90:case-270:this._rotat2FlipQuotient=180;break;case-135:case-315:this._rotat2FlipQuotient=90;break;default:this._rotat2FlipQuotient=0}this._originalPoint.get_length()<d.minigames.MinigameMatchRotator._DISK1_RAD&&0<this._timer1?(this._targetDisc=this._disk1,this._tempAngle=this._targetDisc.get_renderable().rotation-this._originalPoint.get_angle(),this._rotat1Relative=0,this._rotat2Relative=-this._disk2.get_renderable().rotation+this._targetDisc.get_renderable().rotation,this._rotat3Relative=-this._disk3.get_renderable().rotation+this._targetDisc.get_renderable().rotation):this._originalPoint.get_length()<d.minigames.MinigameMatchRotator._DISK2_RAD&&0<this._timer2?(this._targetDisc=this._disk2,this._tempAngle=this._targetDisc.get_renderable().rotation-this._originalPoint.get_angle(),this._rotat1Relative=-this._disk1.get_renderable().rotation+this._targetDisc.get_renderable().rotation,this._rotat2Relative=0,this._rotat3Relative=-this._disk3.get_renderable().rotation+this._targetDisc.get_renderable().rotation):this._originalPoint.get_length()<d.minigames.MinigameMatchRotator._DISK3_RAD&&0<this._timer3&&(this._targetDisc=this._disk3,this._tempAngle=this._targetDisc.get_renderable().rotation-this._originalPoint.get_angle(),this._rotat1Relative=-this._disk1.get_renderable().rotation+this._targetDisc.get_renderable().rotation,this._rotat2Relative=-this._disk2.get_renderable().rotation+
this._targetDisc.get_renderable().rotation,this._rotat3Relative=0);if(3<=this._difficulty&&(Math.isNaN(e.WorkinCloud.get_instance().getInt(d.minigames.MinigameMatchRotator._INSTRUCTION_DISC_TURN))&&e.WorkinCloud.get_instance().setInt(d.minigames.MinigameMatchRotator._INSTRUCTION_DISC_TURN,0),e.WorkinCloud.get_instance().modifyInt(d.minigames.MinigameMatchRotator._INSTRUCTION_DISC_TURN,1),1>=e.WorkinCloud.get_instance().getInt(d.minigames.MinigameMatchRotator._INSTRUCTION_DISC_TURN))){var f=0.9+this._instructions.length/15;this._messageBoxText.swapTextToDisplay(d.minigames.MinigameMatchRotator._INSTRUCTION_DISC_TURN);d.World.get_tweener().tween(this._messageBox.get_pos(),0.3,{y:-50},null,h.tween.Ease.EASE_IN);d.World.get_tweener().tween(this._messageBox.get_pos(),0.3,{y:-d.minigames.Minigame.CENTER_Y},null,h.tween.Ease.EASE_OUT,f).onComplete(function(){b._active=!0})}}break;case n.WMEventInput.PHASE_MOVE:null!=this._targetDisc&&(this._originalPoint.to(a.x+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT(),a.y),this._originalPoint.subtract(d.minigames.MinigameMatchRotator._DISK_CENTER_X,d.minigames.MinigameMatchRotator._DISK_CENTER_Y),this._targetDisc.get_renderable().rotation=this._originalPoint.get_angle()+this._tempAngle,this._targetDisc==this._disk2&&3<=this._difficulty&&(this._disk1.get_renderable().rotation=this._targetDisc.get_renderable().rotation-this._rotat1Relative),this._targetDisc==this._disk3&&4<=this._difficulty&&(5>this._difficulty?(this._disk2.get_renderable().rotation=this._targetDisc.get_renderable().rotation-
this._rotat2Relative,this._disk1.get_renderable().rotation=this._targetDisc.get_renderable().rotation-this._rotat1Relative):this._disk2.get_renderable().rotation=this._targetDisc.get_renderable().rotation-this._rotat2Relative));break;case n.WMEventInput.PHASE_UP:if(null!=this._targetDisc){f=Math.round(this._targetDisc.get_renderable().rotation/45);f*=45;if(!d.World.get_tweener().isTweening(this._targetDisc.get_renderable()))d.World.get_tweener().tween(this._targetDisc.get_renderable(),0.4,{rotation:f},null,h.tween.Ease.EASE).onComplete(function(){e.WorkinCloud.get_instance().get_sound().stopSound("sfx_match_rotator_spin");b._isRotating=!1;b._rotationTimer=0;e.WorkinCloud.get_instance().get_sound().playSound("sfx_match_rotator_match");if(b._targetDisc==b._disk2)for(;null!=b._targetDisc&&0<=b._targetDisc.get_renderable().rotation;)b._targetDisc.get_renderable().rotation-=360;else for(;null!=b._targetDisc&&0>=b._targetDisc.get_renderable().rotation;)b._targetDisc.get_renderable().rotation+=360;b._targetDisc=null});!d.World.get_tweener().isTweening(this._disk1.get_renderable())&&this._disk1!=this._targetDisc&&(f=Math.round(this._disk1.get_renderable().rotation/45),f*=45,d.World.get_tweener().tween(this._disk1.get_renderable(),0.4,{rotation:f},null,h.tween.Ease.EASE).onComplete(function(){for(;0>=b._disk1.get_renderable().rotation;)b._disk1.get_renderable().rotation+=360}));!d.World.get_tweener().isTweening(this._disk2.get_renderable())&&this._disk2!=this._targetDisc&&(f=Math.round(this._disk2.get_renderable().rotation/45),f*=45,d.World.get_tweener().tween(this._disk2.get_renderable(),0.4,{rotation:f},null,h.tween.Ease.EASE).onComplete(function(){for(;0<=b._disk2.get_renderable().rotation;)b._disk2.get_renderable().rotation-=360}));!d.World.get_tweener().isTweening(this._disk3.get_renderable())&&this._disk3!=this._targetDisc&&(f=Math.round(this._disk3.get_renderable().rotation/45),f*=45,d.World.get_tweener().tween(this._disk3.get_renderable(),0.4,{rotation:f},null,h.tween.Ease.EASE).onComplete(function(){for(;0>=b._disk3.get_renderable().rotation;)b._disk3.get_renderable().rotation+=360}))}}}return d.minigames.Minigame.prototype.handleInput.call(this,a)},close:function(){d.minigames.Minigame.prototype.close.call(this)},update:function(a){d.minigames.Minigame.prototype.update.call(this,a);if(this._active){this._isRotating&&(this._rotationTimer+=a,0.653<=this._rotationTimer&&(this._rotationTimer=0,e.WorkinCloud.get_instance().get_sound().playSound("sfx_match_rotator_spin",0.6)));this._timer1-=a;1>=this._timer1&&this._disk1.active&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_welding_weld",0.6),this._disk1.animate("pulse",1,!0),this._disk1.queueAnimation("idle"),this._disk1.active=!1);0>=this._timer1&&(this._disk1.animate("pulse"),this._targetDisc==this._disk1&&(this._isRotating=!1,this._targetDisc=null));-2>=this._timer1&&(this._disk1.animate("idle"),this._disk1.active=!0,this._timer1=this._get_spin_timer(2));this._timer2-=a;1>=this._timer2&&this._disk2.active&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_welding_weld",0.6),this._disk2.animate("pulse",1,!0),this._disk2.queueAnimation("idle"),this._disk2.active=!1);0>=this._timer2&&(this._disk2.animate("pulse"),this._targetDisc==this._disk2&&(this._isRotating=!1,this._targetDisc=null));-2>=this._timer2&&(this._disk2.animate("idle"),this._disk2.active=!0,this._timer2=this._get_spin_timer(2));this._timer3-=a;1>=this._timer3&&this._disk3.active&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_welding_weld",0.6),this._disk3.animate("pulse",1,!0),this._disk3.queueAnimation("idle"),this._disk3.active=!1);0>=this._timer3&&(this._disk3.animate("pulse"),this._targetDisc==this._disk3&&(this._isRotating=!1,this._targetDisc=null));-2>=this._timer3&&(this._disk3.animate("idle"),this._disk3.active=!0,this._timer3=this._get_spin_timer(2));for(var b=this._disk1SymbolMap.keys();b.hasNext();)a=b.next(),this._disk1SymbolMap.get(a)[0].applyRenderable(),Math.abs(this._disk1.get_renderable().rotation%360)==a?(this._disk1SymbolMap.get(a)[0].setTextureAsset("match_symbol_"+this._disk1SymbolMap.get(a)[1]+
"_glow"),315==this._disk1.get_renderable().rotation%360?I.__cast(this._disk1SymbolMap.get(a)[0],j.Element).get_renderable().alpha=1:I.__cast(this._disk1SymbolMap.get(a)[0],j.Element).get_renderable().alpha=0.5):(this._disk1SymbolMap.get(a)[0].setTextureAsset("match_symbol_"+this._disk1SymbolMap.get(a)[1]+"_base"),I.__cast(this._disk1SymbolMap.get(a)[0],j.Element).get_renderable().alpha=1);for(b=this._disk2SymbolMap.keys();b.hasNext();)a=b.next(),this._disk2SymbolMap.get(a)[0].applyRenderable(),Math.abs(this._disk2.get_renderable().rotation)%360==a?(this._disk2SymbolMap.get(a)[0].setTextureAsset("match_symbol_"+this._disk2SymbolMap.get(a)[1]+"_glow"),45==Math.abs(this._disk2.get_renderable().rotation)%360?I.__cast(this._disk2SymbolMap.get(a)[0],j.Element).get_renderable().alpha=1:I.__cast(this._disk2SymbolMap.get(a)[0],j.Element).get_renderable().alpha=0.5):(this._disk2SymbolMap.get(a)[0].setTextureAsset("match_symbol_"+this._disk2SymbolMap.get(a)[1]+"_base"),I.__cast(this._disk2SymbolMap.get(a)[0],j.Element).get_renderable().alpha=1);for(b=this._disk3SymbolMap.keys();b.hasNext();)a=b.next(),this._disk3SymbolMap.get(a)[0].applyRenderable(),Math.abs(this._disk3.get_renderable().rotation%360)==a?(this._disk3SymbolMap.get(a)[0].setTextureAsset("match_symbol_"+this._disk3SymbolMap.get(a)[1]+"_glow"),315==this._disk3.get_renderable().rotation%360?I.__cast(this._disk3SymbolMap.get(a)[0],j.Element).get_renderable().alpha=1:I.__cast(this._disk3SymbolMap.get(a)[0],j.Element).get_renderable().alpha=0.5):(I.__cast(this._disk3SymbolMap.get(a)[0],j.Element).get_renderable().alpha=1,this._disk3SymbolMap.get(a)[0].setTextureAsset("match_symbol_"+this._disk3SymbolMap.get(a)[1]+"_base"));315==this._disk1.get_renderable().rotation%360&&315==this._disk3.get_renderable().rotation%360&&45==Math.abs(this._disk2.get_renderable().rotation)%360&&!this._won&&null==this._targetDisc&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_match_rotator_complete"),this._won=!0,this._timerEnd=0.25)}},open:function(){d.minigames.Minigame.prototype.open.call(this)},dispose:function(){this._disk1.stopAnimation();this._disk2.stopAnimation();this._disk3.stopAnimation();for(var a=function(a){return function(){return a.iterator()}}(this._disk1SymbolMap)();a.hasNext();){var b=a.next();this._disk1.removeElement(b[0])}for(a=function(a){return function(){return a.iterator()}}(this._disk2SymbolMap)();a.hasNext();)b=a.next(),this._disk2.removeElement(b[0]);for(a=function(a){return function(){return a.iterator()}}(this._disk3SymbolMap)();a.hasNext();)b=a.next(),this._disk3.removeElement(b[0]);d.World.get_tweener().stop(this._disk1.get_renderable());d.World.get_tweener().stop(this._disk2.get_renderable());d.World.get_tweener().stop(this._disk3.get_renderable());d.minigames.Minigame.prototype.dispose.call(this);this._sol3=this._sol2=this._sol1=this._center=this._disk3SymbolMap=this._disk2SymbolMap=this._disk1SymbolMap=this._targetDisc=this._disk3=this._disk2=this._disk1=null;this._originalPoint.dispose();this._originalPoint=null},init:function(){d.minigames.Minigame.prototype.init.call(this);this._originalPoint=h.WorkinPoint.request(0,0,0);this._disk3=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"match_disc",x:d.minigames.MinigameMatchRotator._DISK_CENTER_X,y:d.minigames.MinigameMatchRotator._DISK_CENTER_Y,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._disk2=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"match_disc",x:d.minigames.MinigameMatchRotator._DISK_CENTER_X,y:d.minigames.MinigameMatchRotator._DISK_CENTER_Y,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._disk1=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"match_disc",x:d.minigames.MinigameMatchRotator._DISK_CENTER_X,y:d.minigames.MinigameMatchRotator._DISK_CENTER_Y,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._center=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"match_center",x:d.minigames.MinigameMatchRotator._DISK_CENTER_X,y:d.minigames.MinigameMatchRotator._DISK_CENTER_Y,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._disk2.get_renderable().scaleX=this._disk2.get_renderable().scaleY=0.7;this._disk1.get_renderable().scaleX=this._disk1.get_renderable().scaleY=0.35;this._disk1.addAnimationFrames("pulse",["match_disc_electric1","match_disc_electric2"]);this._disk1.addAnimationFrames("idle",["match_disc"]);this._disk1.set_fps(12);this._disk2.addAnimationFrames("pulse",["match_disc_electric1","match_disc_electric2"]);this._disk2.addAnimationFrames("idle",["match_disc"]);this._disk2.set_fps(12);this._disk3.addAnimationFrames("pulse",["match_disc_electric1","match_disc_electric2"]);this._disk3.addAnimationFrames("idle",["match_disc"]);this._disk3.set_fps(12);this._timer1=this._get_spin_timer();this._timer2=this._get_spin_timer(1);this._timer3=this._get_spin_timer(2);this._matchedSymbol=this._isRotating=!1;this._rotationTimer=0;this._solution=[];this._solution.push(t.random(5)+1);this._solution.push(t.random(5)+1);this._solution.push(t.random(5)+1);this._sol1=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"match_symbol_"+this._solution[0]+"_glow",x:d.minigames.Minigame.WIDTH-65,y:230,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._sol2=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"match_symbol_"+this._solution[1]+"_glow",x:d.minigames.Minigame.WIDTH-65,y:280,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._sol3=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"match_symbol_"+this._solution[2]+"_glow",x:d.minigames.Minigame.WIDTH-65,y:330,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._disk1SymbolMap=new w.IntMap;this._disk2SymbolMap=new w.IntMap;this._disk3SymbolMap=new w.IntMap;var a=[1,2,3,4,5],b,f=this._disk1.addElement(new j.Element({x:(d.minigames.MinigameMatchRotator._DISK1_RAD-25)/0.35*Math.cos(3*Math.PI/2),y:(d.minigames.MinigameMatchRotator._DISK1_RAD-25)/0.35*Math.sin(3*Math.PI/2),asset:"match_symbol_"+this._solution[2]+"_base",origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,useCamera:!1}));this._disk1SymbolMap.set(315,[f,this._solution[2]]);y.remove(a,this._solution[2]);b=a[t.random(a.length)];f=this._disk1.addElement(new j.Element({x:(d.minigames.MinigameMatchRotator._DISK1_RAD-
25)/0.35*Math.cos(Math.PI/2),y:(d.minigames.MinigameMatchRotator._DISK1_RAD-25)/0.35*Math.sin(Math.PI/2),asset:"match_symbol_"+b+"_base",origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,useCamera:!1}));this._disk1SymbolMap.set(135,[f,b]);y.remove(a,b);f.get_renderable().rotation=180;a=[1,2,3,4,5];f=this._disk2.addElement(new j.Element({x:(d.minigames.MinigameMatchRotator._DISK2_RAD-45)/0.7*Math.cos(3*Math.PI/2),y:(d.minigames.MinigameMatchRotator._DISK2_RAD-45)/0.7*Math.sin(3*Math.PI/2),asset:"match_symbol_"+
this._solution[1]+"_base",origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,useCamera:!1}));this._disk2SymbolMap.set(45,[f,this._solution[1]]);y.remove(a,this._solution[1]);2>c.Inventory.getRank(c.Item.ITEM_SPEED_INFILTRATION)&&(b=a[t.random(a.length)],f=this._disk2.addElement(new j.Element({x:(d.minigames.MinigameMatchRotator._DISK2_RAD-45)/0.7*Math.cos(Math.PI),y:(d.minigames.MinigameMatchRotator._DISK2_RAD-45)/0.7*Math.sin(Math.PI),asset:"match_symbol_"+b+"_base",origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,useCamera:!1})),this._disk2SymbolMap.set(315,[f,b]),y.remove(a,b),f.get_renderable().rotation=-90);b=a[t.random(a.length)];f=this._disk2.addElement(new j.Element({x:(d.minigames.MinigameMatchRotator._DISK2_RAD-45)/0.7*Math.cos(Math.PI/2),y:(d.minigames.MinigameMatchRotator._DISK2_RAD-45)/0.7*Math.sin(Math.PI/2),asset:"match_symbol_"+b+"_base",origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,useCamera:!1}));this._disk2SymbolMap.set(225,[f,b]);y.remove(a,b);f.get_renderable().rotation=180;a=[1,2,3,4,5];f=this._disk3.addElement(new j.Element({x:(d.minigames.MinigameMatchRotator._DISK3_RAD-40)*Math.cos(3*Math.PI/2),y:(d.minigames.MinigameMatchRotator._DISK3_RAD-40)*Math.sin(3*Math.PI/2),asset:"match_symbol_"+this._solution[1]+"_base",origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,useCamera:!1}));this._disk3SymbolMap.set(315,[f,this._solution[0]]);y.remove(a,this._solution[0]);4>c.Inventory.getRank(c.Item.ITEM_SPEED_INFILTRATION)&&(b=a[t.random(a.length)],f=this._disk3.addElement(new j.Element({x:(d.minigames.MinigameMatchRotator._DISK3_RAD-
40)*Math.cos(Math.PI),y:(d.minigames.MinigameMatchRotator._DISK3_RAD-40)*Math.sin(Math.PI),asset:"match_symbol_"+b+"_base",origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,useCamera:!1})),this._disk3SymbolMap.set(45,[f,b]),y.remove(a,b),f.get_renderable().rotation=-90);b=a[t.random(a.length)];f=this._disk3.addElement(new j.Element({x:(d.minigames.MinigameMatchRotator._DISK3_RAD-40)*Math.cos(Math.PI/2),y:(d.minigames.MinigameMatchRotator._DISK3_RAD-40)*Math.sin(Math.PI/2),asset:"match_symbol_"+
b+"_base",origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,useCamera:!1}));this._disk3SymbolMap.set(135,[f,b]);y.remove(a,b);f.get_renderable().rotation=180;5>c.Inventory.getRank(c.Item.ITEM_SPEED_INFILTRATION)&&(b=a[t.random(a.length)],f=this._disk3.addElement(new j.Element({x:(d.minigames.MinigameMatchRotator._DISK3_RAD-40)*Math.cos(0),y:(d.minigames.MinigameMatchRotator._DISK3_RAD-40)*Math.sin(0),asset:"match_symbol_"+b+"_base",origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,useCamera:!1})),this._disk3SymbolMap.set(225,[f,b]),y.remove(a,b),f.get_renderable().rotation=90);this._won=!1;this._disk1.get_renderable().rotation+=45*t.random(100);this._disk2.get_renderable().rotation-=45*t.random(100);for(this._disk3.get_renderable().rotation+=45*t.random(100);360<this._disk1.get_renderable().rotation;)this._disk1.get_renderable().rotation-=360;for(;360>this._disk2.get_renderable().rotation;)this._disk2.get_renderable().rotation+=360;for(;360<this._disk3.get_renderable().rotation;)this._disk3.get_renderable().rotation-=360;null},__class__:d.minigames.MinigameMatchRotator});d.minigames.MinigamePlugItIn=function(a){switch(a.objective){case d.minigames.MinigamePlugItIn.OBJECTIVE_PLUG_IN_ALL:a.instructions="plug_in_instructions";break;case d.minigames.MinigamePlugItIn.OBJECTIVE_UNPLUG_ALL:a.instructions="plug_out_instructions"}d.minigames.Minigame.call(this,a);this._timeMod=1;switch(this._objective){case d.minigames.MinigamePlugItIn.OBJECTIVE_UNPLUG_ALL:this._timeMod=0.75}this.init()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.MinigamePlugItIn"]=d.minigames.MinigamePlugItIn;d.minigames.MinigamePlugItIn.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,MinigamePlugItIn".split(",");d.minigames.MinigamePlugItIn.__super__=d.minigames.Minigame;d.minigames.MinigamePlugItIn.prototype=v(d.minigames.Minigame.prototype,{get_bg:function(){return"wire-connect-bg"},get_id:function(){return d.minigames.Minigame.MINIGAME_PLUG_IT_IN},get_winOnTimesUp:function(){return!1},get_duration:function(){return 10*this._timeMod+1*c.Inventory.getRank(c.Item.ITEM_TIME_REPAIR)-
this._difficulty},get_objectiveDefault:function(){return d.minigames.MinigamePlugItIn.OBJECTIVE_UNPLUG_ALL},_getShockTimer:function(a){null==a&&(a=0);var b=5*Math.random()+25-5*this._difficulty;this._objective==d.minigames.MinigamePlugItIn.OBJECTIVE_UNPLUG_ALL&&(b/=2);return b+a},_plugRange:function(){return this._objective==d.minigames.MinigamePlugItIn.OBJECTIVE_PLUG_IN_ALL?30*(1+0.1*c.Inventory.getRank(c.Item.ITEM_SPEED_REPAIR)):30/(1+0.1*c.Inventory.getRank(c.Item.ITEM_SPEED_INFILTRATION))},handleInput:function(a){if(this._active)switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:if(this._overlay.contains(a.x,a.y))for(var b=0,f=this._cables;b<f.length;){var e=f[b];++b;if(e.get_element().contains(a.x,a.y))switch(this._objective){case d.minigames.MinigamePlugItIn.OBJECTIVE_PLUG_IN_ALL:if(!e.get_pluggedIn()&&!e.get_isElectric())return e.drag(a.x,a.y),!0;break;case d.minigames.MinigamePlugItIn.OBJECTIVE_UNPLUG_ALL:if(e.get_pluggedIn()&&!e.get_isElectric())return e.drag(a.x,a.y),!0}}break;case n.WMEventInput.PHASE_MOVE:if(this._overlay.contains(a.x,a.y)){b=0;for(f=this._cables;b<f.length;)e=f[b],++b,e.get_dragging()&&(e.get_pluggedIn()?h.WorkinMath.distBetweenAB(e.get_posStartX(),e.get_posStartY(),a.x,a.y)>this._plugRange()&&e.unplug():e.move(a.x,a.y))}break;case n.WMEventInput.PHASE_UP:if(this._overlay.contains(a.x,a.y)){b=0;for(f=this._cables;b<f.length;)e=f[b],++b,e.get_dragging()&&e.set_dragging(!1)}}}return d.minigames.Minigame.prototype.handleInput.call(this,a)},_createPorts:function(){this._ports=[];this._cables=[];for(var a=["blue","red","yellow","green"],b=["round","square","duo","trio"],f=[],m=0,g=0,h=4;0<a.length&&0<h;)m=e.WorkinCloud.get_instance().get_random().getRandomInt(0,a.length-1),g=e.WorkinCloud.get_instance().get_random().getRandomInt(0,b.length-1),f.push([a[m],b[g]]),4>this._difficulty?(a.splice(m,1),b.splice(g,1)):0.5<Math.random()?a.splice(m,1):b.splice(g,1),h--;var a=4,i=95,b=0,j;switch(this._difficulty){case 0:case 1:a=2;i+=60;break;case 2:a=3,i+=20}for(;0<a;){j=f[b][0];m=f[b][1];g=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:m+"-port_"+j,x:55,y:i,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_BG}));h=new d.data.PortDef(g);g.get_pos().y+=0.5*g.get_renderable().height;this._ports.push(h);var k=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:m+"-prong",x:55,y:i,originX:1,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}));j=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:m+"-cable_"+j,x:55,y:i,originX:0,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}));i=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"sparks1",x:55,y:i,originX:0,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY}));i.addAnimationFrames("ZAP",["sparks1","sparks2","sparks3"]);i.addAnimationFrames("Idle",["invisibleImage"]);i.animate("Idle",null,!0);h=new d.data.CableDef(j,h,k,i);"round"==m&&h.setPlugInOffset(-18,-3);h.get_element().get_pos().x=205+250*Math.random();h.get_element().get_pos().y=75+325*Math.random();h.set_shockTimer(this._getShockTimer(a));h.updateProng();this._cables.push(h);i=g.get_pos().y+10+0.5*this._ports[this._ports.length-1].get_element().get_renderable().height;b++;a--}f=0;for(a=this._cables;f<a.length;)switch(h=a[f],++f,this._objective){case d.minigames.MinigamePlugItIn.OBJECTIVE_UNPLUG_ALL:h.plugIn(!1)}},reset:function(){this._createPorts()},update:function(a){d.minigames.Minigame.prototype.update.call(this,a);if(this._active){for(var b=0,f=this._cables;b<f.length;){var c=f[b];++b;if(!(c.get_pluggedIn()&&this._objective==d.minigames.MinigamePlugItIn.OBJECTIVE_PLUG_IN_ALL)){var e=c;e.set_shockTimer(e.get_shockTimer()-a);1>=c.get_shockTimer()&&c.zap(!1);0>=c.get_shockTimer()&&(c.zap(),c.set_dragging(!1));-1>=c.get_shockTimer()&&(c.unzap(),c.set_shockTimer(this._getShockTimer(3)))}}if(this._objective==d.minigames.MinigamePlugItIn.OBJECTIVE_PLUG_IN_ALL){b=0;for(f=this._cables;b<f.length;)c=f[b],++b,c.get_element().get_pos().x>=c.get_port().get_element().get_pos().x&&h.WorkinMath.distBetweenPoints(c.get_element().get_pos(),c.get_port().get_element().get_pos())<this._plugRange()&&c.plugIn()}if(!this._won){a=!0;b=0;for(f=this._cables;b<f.length;)switch(c=f[b],++b,e=this,e._objective){case d.minigames.MinigamePlugItIn.OBJECTIVE_PLUG_IN_ALL:c.get_pluggedIn()||(a=!1);break;case d.minigames.MinigamePlugItIn.OBJECTIVE_UNPLUG_ALL:c.get_pluggedIn()&&(a=!1)}a&&(this._won=!0,this._timerEnd=0.5)}}},dispose:function(){for(var a=0,b=this._ports;a<b.length;){var f=b[a];++a;f.get_cable().dispose();f.dispose()}this._ports=[];this._cables=[];d.minigames.Minigame.prototype.dispose.call(this)},init:function(){d.minigames.Minigame.prototype.init.call(this);this.reset()},__class__:d.minigames.MinigamePlugItIn});d.minigames.MinigameStealth=function(a){a.instructions="stealth_instructions";d.minigames.Minigame.call(this,a);this.init()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.MinigameStealth"]=d.minigames.MinigameStealth;d.minigames.MinigameStealth.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,MinigameStealth".split(",");d.minigames.MinigameStealth.__super__=d.minigames.Minigame;d.minigames.MinigameStealth.prototype=v(d.minigames.Minigame.prototype,{get_bg:function(){return"stealth_bg"},get_duration:function(){return 20+2*c.Inventory.getRank(c.Item.ITEM_TIME_INFILTRATION)},get_id:function(){return d.minigames.Minigame.MINIGAME_STEALTH},_calculateMovement:function(a,b){h.WorkinPoint.request();for(var f=this._map.convertPixelToTileLoc(a+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT(),b),e=0,g=this._map.get_otherPoints();e<g.length;){var i=[g[e]];++e;if(i[0].get_x()==f[0]&&i[0].get_y()==f[1]){if(i[0].get_passable())this._chopper.moveIt(i[0].get_x(),i[0].get_y());else switch(this._map.get_tiles()[i[0].get_x()][i[0].get_y()].get_pDir()[1]){case 3:this._chopper.moveIt(i[0].get_x(),i[0].get_y()+1);break;case 1:this._chopper.moveIt(i[0].get_x()-1,i[0].get_y());break;case 2:this._chopper.moveIt(i[0].get_x()+
1,i[0].get_y());break;case 0:this._chopper.moveIt(i[0].get_x(),i[0].get_y()-1);break;case 4:continue}this._callbackAction=function(a){return function(){a[0].dispatchEvent()}}(i);return}}8<f[0]||6<f[1]||0>f[0]||0>f[1]||(this._map.isPassable(f[0],f[1])?(this._chopper.moveIt(f[0],f[1]),this._callbackAction=null):null)},handleInput:function(a){if(this._active)switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:this._tracking=!0;this._calculateMovement(a.x,a.y);break;case n.WMEventInput.PHASE_MOVE:this._tracking&&null==this._callbackAction&&this._calculateMovement(a.x,a.y);break;case n.WMEventInput.PHASE_UP:this._tracking=!1}}return d.minigames.Minigame.prototype.handleInput.call(this,a)},_doCaught:function(){0!=this._timerEnd||this._closing||(this._timerEnd=1,e.WorkinCloud.get_instance().get_sound().playSound("starwars_chopper_sfx_alarm"))},update:function(a){var b=this;d.minigames.Minigame.prototype.update.call(this,a);this._active&&!(0<this._timerEnd)&&(this._trooper.update(a),!this._chopper.isMoving&&0<this._chopper.get_currentPath().length?(this._chopper.get_currentY()>this._chopper.get_currentPath()[0].get_y()?this._chopper.get_renderable().rotation=180:this._chopper.get_currentY()<this._chopper.get_currentPath()[0].get_y()&&(this._chopper.get_renderable().rotation=0),this._chopper.get_currentX()<this._chopper.get_currentPath()[0].get_x()?this._chopper.get_renderable().rotation=-90:this._chopper.get_currentX()>this._chopper.get_currentPath()[0].get_x()&&(this._chopper.get_renderable().rotation=90),this._chopper.setNewTilePos(this._chopper.get_currentPath()[0].get_x(),this._chopper.get_currentPath()[0].get_y()),this._chopper.isMoving=!0,a=d.World.CHOPPER_BASE_MOVETIME-c.Inventory.getRank(c.Item.ITEM_SPEED_INFILTRATION)*d.World.CHOPPER_MOVETIME_MODIFIER,this._chopper.isFreakingOut&&(a*=2/3),d.World.get_tweener().tween(this._chopper.get_pos(),a,{x:this._chopper.get_currentPath()[0].get_x()*this._map.get_tileSize()+this._map.get_pos().x,y:this._chopper.get_currentPath()[0].get_y()*this._map.get_tileSize()+this._map.get_pos().y},null,h.tween.Ease.EASE_LINEAR).onComplete(function(){b._chopper.get_currentPath().splice(0,1);b._chopper.isMoving=!1})):!this._chopper.isMoving&&null!=this._callbackAction&&(this._callbackAction(),this._callbackAction=null),2>d.elements.StealthMap.distanceBetweenTilesByIndex(this._chopper.get_currentX(),this._chopper.get_currentY(),this._trooper.get_body().get_currentX(),this._trooper.get_body().get_currentY())&&(this._chopper.get_currentX()==this._trooper.get_body().get_currentX()?(0<this._chopper.get_currentY()-this._trooper.get_body().get_currentY()&&0==this._trooper.getRotation()&&this._map.get_tiles()[this._chopper.get_currentX()][0<=this._chopper.get_currentY()-1?this._chopper.get_currentY()-1:this._chopper.get_currentY()].get_passable()||0>this._chopper.get_currentY()-this._trooper.get_body().get_currentY()&&180==this._trooper.getRotation()&&this._map.get_tiles()[this._chopper.get_currentX()][this._chopper.get_currentY()+1<this._map.get_tiles()[this._chopper.get_currentX()].length?this._chopper.get_currentY()+1:this._chopper.get_currentY()].get_passable()||0==this._chopper.get_currentY()-this._trooper.get_body().get_currentY())&&this._doCaught():this._chopper.get_currentY()==this._trooper.get_body().get_currentY()&&(0<this._chopper.get_currentX()-this._trooper.get_body().get_currentX()&&-90==this._trooper.getRotation()&&this._map.get_tiles()[0<=this._chopper.get_currentX()-1?this._chopper.get_currentX()-1:this._chopper.get_currentX()][this._chopper.get_currentY()].get_passable()||0>this._chopper.get_currentX()-this._trooper.get_body().get_currentX()&&90==this._trooper.getRotation()&&this._map.get_tiles()[this._chopper.get_currentX()+1<this._map.get_tiles().length?this._chopper.get_currentX()+1:this._chopper.get_currentX()][this._chopper.get_currentY()].get_passable()||0==this._chopper.get_currentX()-this._trooper.get_body().get_currentX())&&this._doCaught()),7==this._chopper.get_currentX()&&0==this._chopper.get_currentY()&&!1==this._won&&(this._won=!0,this._timerEnd=1))},close:function(){d.minigames.Minigame.prototype.close.call(this)},_onMinigameOpen:function(){d.minigames.Minigame.prototype._onMinigameOpen.call(this);this._trooper.start()},open:function(){d.minigames.Minigame.prototype.open.call(this)},dispose:function(){d.World.get_tweener().stop(this._chopper.get_pos());d.World.get_tweener().stop(this._trooper.get_body().get_pos());d.minigames.Minigame.prototype.dispose.call(this);this._trooper=this._map=this._chopper=null},init:function(){d.minigames.Minigame.prototype.init.call(this);this._tracking=this._won=!1;this._map=this._elementManager.addElement(new d.elements.StealthMap({layer:d.minigames.Minigame.LAYER_MINIGAME_BG,x:50,y:50},9,7,64));this._elementManager.addElement(this._chopper=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"chopper-stealth",originX:0.5,originY:0.65},this._map,1,6));var a;this._elementManager.addElement(a=new d.elements.Chopper({layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,asset:"stormtrooper-body",originX:0.5,originY:0.75},this._map,7,0));this._trooper=new d.data.TrooperDef(a,this._map)},__class__:d.minigames.MinigameStealth});d.minigames.MinigameTurretFight=function(a){a.instructions="tie_instructions";d.minigames.Minigame.call(this,a);this.init()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.MinigameTurretFight"]=d.minigames.MinigameTurretFight;d.minigames.MinigameTurretFight.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,MinigameTurretFight".split(",");d.minigames.MinigameTurretFight.__super__=d.minigames.Minigame;d.minigames.MinigameTurretFight.prototype=v(d.minigames.Minigame.prototype,{get_bg:function(){return"turret_background"},get_id:function(){return d.minigames.Minigame.MINIGAME_TURRET_FIGHT},get_duration:function(){return 25+2.5*c.Inventory.getRank(c.Item.ITEM_TIME_REPAIR)},handleInput:function(a){if(this._active)switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:this._overlay.contains(a.x,a.y)&&(this._firing=!0,this._crosshair.get_renderable().visible=!0,this._aimX=a.x+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT(),this._aimY=a.y,this._addLaser(this._aimX,this._aimY));break;case n.WMEventInput.PHASE_MOVE:this._overlay.contains(a.x,a.y)&&(this._aimX=a.x+d.minigames.Minigame.WIDTH-c.ConstantsApp.get_CANVAS_RIGHT(),this._aimY=a.y);break;case n.WMEventInput.PHASE_UP:this._overlay.contains(a.x,a.y)&&(this._firing=!1,this._crosshair.get_renderable().visible=!1)}}return d.minigames.Minigame.prototype.handleInput.call(this,a)},_onTIEFire:function(a){var b=a.get_data().tie;if("explode"!=b.get_currentAnimation()){a=h.WorkinPoint.request();h.WorkinMath.diffBetweenAB(b.get_pos().x,b.get_pos().y,d.minigames.Minigame.CENTER_X+e.WorkinCloud.get_instance().get_random().getRandomFloat(-180,180),d.minigames.Minigame.HEIGHT,a);a.normalize();var f=a.get_angle();a.multiply(1E3);b=this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"tie_laser",x:b.get_pos().x,y:b.get_pos().y,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY});b.initBehavior(d.elements.MinigameElement.BEHAVIOR_LASER_ENEMY,{vx:a.x,vy:a.y,angle:f});this._enemyLasers.push(this._elementManager.addElement(b));e.WorkinCloud.get_instance().get_sound().playSound("sfx_minigame_turret",0.2)}},_removeEventListeners:function(){e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_RESIZE_CANVAS,q(this,this._onEventResizeCanvas));e.WorkinCloud.get_instance().get_dispatcher().removeEventListener(c.ConstantsApp.EVENT_TIE_FIRE,q(this,this._onTIEFire))},_addEventListeners:function(){e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_RESIZE_CANVAS,q(this,this._onEventResizeCanvas));e.WorkinCloud.get_instance().get_dispatcher().addEventListener(c.ConstantsApp.EVENT_TIE_FIRE,q(this,this._onTIEFire))},close:function(){d.minigames.Minigame.prototype.close.call(this)},open:function(){d.minigames.Minigame.prototype.open.call(this);this.reset()},_addLaser:function(a,b){if(!(2<this._lasers.length||0<this._cooldown)){var f=d.minigames.Minigame.CENTER_X,m=d.minigames.Minigame.HEIGHT,g=h.WorkinPoint.request();h.WorkinMath.diffBetweenAB(f,m,a,b,g);g.normalize();var i=g.get_angle();g.multiply(1E3);f=this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"turret_laser",x:f,y:m,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY});f.initBehavior(d.elements.MinigameElement.BEHAVIOR_LASER,{vx:g.x,vy:g.y,angle:i});this._lasers.push(this._elementManager.addElement(f));g.dispose();e.WorkinCloud.get_instance().get_sound().playSound("sfx_minigame_turret",0.3);this.doCooldown()}},_addFighter:function(){if(!(4<this._fighters.length||this._fighters.length>this._killsRequired-this._kills)){var a=d.minigames.Minigame.CENTER_X-150+300*Math.random(),b=-200;0.5>Math.random()?b=-100:(a=d.minigames.Minigame.CENTER_X,b=100+50*Math.random(),0.5>Math.random()&&(b*=-1),a+=b,b=d.minigames.Minigame.HEIGHT+100);0.5>Math.random()&&(a=d.minigames.Minigame.WIDTH+100,b=e.WorkinCloud.get_instance().get_random().getRandomFloat(100,d.minigames.Minigame.HEIGHT-100));a=this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"turret_fighter",x:a,y:b,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY,difficulty:this._difficulty});a.addAnimationFrames("straight",["turret_fighter"]);a.addAnimationFrames("swerve",["turret_fighter_side"]);a.addAnimationFrames("explode",["swr_fire_explosion0001","swr_fire_explosion0002","swr_fire_explosion0003","swr_fire_explosion0004","swr_fire_explosion0005"]);a.initBehavior(d.elements.MinigameElement.BEHAVIOR_FIGHTER,{});a.set_fps(12);this._fighters.push(this._elementManager.addElement(a));this._elementManager.updateZSort(d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY)}},_alterFlightPath:function(){this._flightTarget=-100+200*Math.random()},update:function(a){d.minigames.Minigame.prototype.update.call(this,a);if(this._active){this._firing&&(this._crosshair.get_renderable().visible=!0,this._crosshair.get_pos().x=this._aimX,this._crosshair.get_pos().y=this._aimY,25>this._crosshair.get_pos().x&&(this._crosshair.get_pos().x=25));0<this._cooldown&&(this._cooldown-=a,0>=this._cooldown&&(this._cooldown=0,this._firing&&this._addLaser(this._aimX,this._aimY)),this._updateCooldown());0<this._timerSound&&(this._timerSound-=a);this._timerFlightPath-=a;0>=this._timerFlightPath&&(this._timerFlightPath+=1+2*Math.random(),this._alterFlightPath());this._flightPath+=(this._flightTarget-this._flightPath)*a;this._parallaxer.move(0.3*this._flightPath*a);for(var b=0,f=this._fighters;b<f.length;){var c=f[b];++b;c.get_pos().y+=0.3*this._flightPath*a}this._timerSpawn-=a;0>this._timerSpawn&&(this._timerSpawn+=0.25+
0.5*Math.random(),this._addFighter());for(var a=this._lasers.length,b=0,g;0<a;){a--;f=this._lasers[a];for(b=this._fighters.length;0<b;)b--,c=this._fighters[b],g=c.get_renderable().scaleY,0.5>g&&(g=0.5),h.WorkinMath.distBetweenPoints(f.get_pos(),c.get_pos())<60*g&&c.active&&(this._kills++,this._updateProgress(),c.active=!1,e.WorkinCloud.get_instance().get_sound().playSound("sfx_minigame_tie_explode",0.5),c.animate("explode",1,!0),this._disposeElement(f),y.remove(this._lasers,f));if(f.get_cleanup()||50>f.get_pos().x||f.get_pos().x>d.minigames.Minigame.WIDTH||-100>f.get_pos().y||f.get_pos().y>d.minigames.Minigame.HEIGHT)this._disposeElement(f),y.remove(this._lasers,f)}for(a=this._enemyLasers.length;0<a;)if(a--,f=this._enemyLasers[a],f.get_cleanup()||50>f.get_pos().x||f.get_pos().x>d.minigames.Minigame.WIDTH||-100>f.get_pos().y||f.get_pos().y>d.minigames.Minigame.HEIGHT)f.get_pos().y>d.minigames.Minigame.HEIGHT&&(e.WorkinCloud.get_instance().get_sound().playSound("sfx_ghost_hit",0.5),this._timerShake=0.5),this._disposeElement(f),y.remove(this._enemyLasers,f);for(b=this._fighters.length;0<b;)b--,c=this._fighters[b],c.get_cleanup()&&(c.stopAnimation(),this._disposeElement(c),y.remove(this._fighters,c),null)}},doCooldown:function(){this._cooldown=this._fireCooldown;this._cooldownMeter.setTextureAsset("minigame_timer_red")},_updateCooldown:function(){this._cooldownMeter.get_renderable().scaleX=5*((this._fireCooldown-this._cooldown)/this._fireCooldown);0==this._cooldown&&this._cooldownMeter.setTextureAsset("minigame_timer")},_updateProgress:function(){this._kills>=this._killsRequired?(this._kills=this._killsRequired,0>=this._timerEnd&&(this._timerEnd=1,this._won=!0,this._progress.set_text("Done!"),this._progress.get_pos().x=160)):this._progress.set_text(this._kills+" / "+this._killsRequired)},reset:function(){this._kills=0;this._killsRequired=10+2*this._difficulty;this._cooldown=0;this._fireCooldown=0.5-0.05*c.Inventory.getRank(c.Item.ITEM_SPEED_REPAIR);this._updateProgress();this._updateCooldown();this._won=!1;this._timerSpawn=0;this._rotationRate=2+5*Math.random();0.5>Math.random()&&(this._rotationRate*=-1);for(var a=0,b=this._asteroids;a<b.length;){var f=b[a];++a;this._disposeElement(f)}a=0;for(b=this._fighters;a<b.length;)f=b[a],++a,this._disposeElement(f);a=0;for(b=this._lasers;a<b.length;)f=b[a],++a,this._disposeElement(f);this._asteroids=[];this._fighters=[];this._lasers=[]},dispose:function(){this.reset();d.minigames.Minigame.prototype.dispose.call(this);this._crosshair=this._progress=this._cooldownBG=this._cooldownMeter=this._hud=this._stars=null;this._parallaxer.dispose();this._parallaxer=null},init:function(){d.minigames.Minigame.prototype.init.call(this);this._asteroids=[];this._fighters=[];this._lasers=[];this._enemyLasers=[];this._timerTieFire=2+2*Math.random();this._timerSpawn=0.5;this._cooldown=this._timerFlightPath=this._timerSound=0;this._flightTarget=this._flightPath=-200+400*Math.random();var a=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:this.get_bg(),x:d.minigames.Minigame.CENTER_X,y:0,originX:0.5,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_BG})),b=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:this.get_bg(),x:d.minigames.Minigame.CENTER_X,y:0,originX:0.5,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_BG}));this._parallaxer=new d.data.Parallaxer(a,b,!0);this._crosshair=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"turret_crosshair",x:d.minigames.Minigame.CENTER_X,y:d.minigames.Minigame.CENTER_Y,visible:!1,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_HUD}));this._cooldownMeter=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"minigame_timer",x:d.minigames.Minigame.WIDTH-125,y:d.minigames.Minigame.HEIGHT-35,originX:0,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_HUD}));this._hud=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"turret_hud",x:d.minigames.Minigame.CENTER_X,y:d.minigames.Minigame.CENTER_Y,originX:0.5,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_HUD}));this._progress=this._elementManager.addElement(new j.TextBase(160,d.minigames.Minigame.HEIGHT-35,"","",{originX:1,originY:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_HUD}));this._progress.get_renderable().scaleX=this._progress.get_renderable().scaleY=0.5;this.reset()},__class__:d.minigames.MinigameTurretFight});d.minigames.MinigameWelding=function(a){a.instructions="weld_instructions";switch(a.objective){case d.minigames.MinigameWelding.OBJECTIVE_FIX:a.instructions="weld_instructions";break;case d.minigames.MinigameWelding.OBJECTIVE_PAINT:a.instructions="weld_instructions_paint";break;case d.minigames.MinigameWelding.OBJECTIVE_CUT:a.instructions="weld_instructions_destroy"}d.minigames.Minigame.call(this,a);this.init()};l["com.disney_channel.star_wars_rebels.chopper_chase.world.minigames.MinigameWelding"]=d.minigames.MinigameWelding;d.minigames.MinigameWelding.__name__="com,disney_channel,star_wars_rebels,chopper_chase,world,minigames,MinigameWelding".split(",");d.minigames.MinigameWelding.__super__=d.minigames.Minigame;d.minigames.MinigameWelding.prototype=v(d.minigames.Minigame.prototype,{get_bg:function(){return"welding_bg_panel"},get_duration:function(){return 15+1.5*c.Inventory.getRank(c.Item.ITEM_TIME_REPAIR)},get_id:function(){return d.minigames.Minigame.MINIGAME_WELDING},_getUpgradeScaling:function(){return 0.15*c.Inventory.getRank(c.Item.ITEM_SPEED_REPAIR)},_applyUpgradeScaling:function(){this._scale*=1+this._getUpgradeScaling()},_setBrush:function(a){if(!this._brushDown){for(this._i=this._brushVariety.length;0<this._i;)this._i--,this._brushVariety[this._i].dispose(),this._brushVariety.splice(this._i,1);var b="texture_pencil";this._brushSpacing=5;for(var f=this._brushSpread=0;1>f;){f++;var c=new d.elements.BitmapLayer({},138,100);this._flagDestroy?c.colorMask(b+1,a,0,0,this._scale):(c.clearLayer(!0),b="texture_weld",new d.elements.BitmapLayer({},138,100),this._brushSpacing=40,c.drawImage(b+5,0,0,1+this._getUpgradeScaling()));this._brushVariety.push(c)}}},_endStroke:function(a,b,f){this._strokePositions.exists(f)&&(this._brushDown=!1,this._drawingLayer.endDraw(),this._strokePositions.remove(f))},_moveStroke:function(a,b,f){if(this._strokePositions.exists(f)&&null!=this._strokePositions.get(f)&&this._brushDown){var f=this._strokePositions.get(f),c=h.WorkinMath.diffBetweenPointsCopy(h.WorkinPoint.request(a,b),f),g=Math.floor(c.get_length());c.normalize();var i=0,j=0;h.WorkinPoint.request(-c.y,c.x);this._strokeMoveDist+=g;if(!(this._strokeMoveDist<this._brushSpacing*this._scale)&&(this._strokeMoveDist=0,0!=this._brushVariety.length)){for(var k=0.5*this._brushVariety[i].get_texture().get_width()*this._scale,l=0.5*this._brushVariety[i].get_texture().get_height()*this._scale;j<g;)this._flagDestroy?this._maskLayer.drawImageFromTexture(this._brushVariety[i].get_texture(),f.x+j*c.x-k+this._drawingInputOffset.x,f.y+j*c.y-l+this._drawingInputOffset.y):this._drawingLayer.drawImageFromTexture(this._brushVariety[i].get_texture(),f.x+j*c.x-k+this._drawingInputOffset.x,f.y+j*c.y-l+this._drawingInputOffset.y),0<this._brushVariety.length&&(i++,i=e.WorkinUtils.clamp(i,0,this._brushVariety.length-1,!0)|0,k=0.5*this._brushVariety[i].get_texture().get_width()*this._scale,l=0.5*this._brushVariety[i].get_texture().get_height()*this._scale),j+=(this._brushSpacing-0)*this._scale;this._flagDestroy&&(this._bufferLayer.drawImageFromTexture(this._panelLayer.get_texture(),0,0),this._bufferLayer.maskWithBitmap(this._maskLayer,0,0),this._drawingLayer.drawImageFromTexture(this._bufferLayer.get_texture(),0,0));if(!this._flagDestroy||this._objective!=d.minigames.MinigameWelding.OBJECTIVE_FIX){c=0;for(g=this._generatedPoints.length;c<g;){i=c++;j=0;for(k=this._generatedPoints[i].length;j<k;)l=j++,this._pointsCompleted[i][l]||h.WorkinMath.distBetweenAB(a-10,b-5,this._generatedPoints[i][l].x,this._generatedPoints[i][l].y)<20*(1+this._getUpgradeScaling())&&(this._pointsCompleted[i][l]=!0)}}f.to(a,b)}}},_beginStroke:function(a,b,f){if(0<this._brushVariety.length){this._brushDown=!0;this._lastMousePos.to(a,b);this._drawingLayer.beginDraw(a,b);var c=0.5*this._brushVariety[0].get_texture().get_width()*this._scale,d=0.5*this._brushVariety[0].get_texture().get_height()*this._scale;this._flagDestroy?(this._maskLayer.drawImageFromTexture(this._brushVariety[0].get_texture(),a-c+this._drawingInputOffset.x,b-d+this._drawingInputOffset.y),this._bufferLayer.drawImageFromTexture(this._panelLayer.get_texture(),0,0),this._bufferLayer.maskWithBitmap(this._maskLayer,0,0),this._drawingLayer.drawImageFromTexture(this._bufferLayer.get_texture(),0,0)):this._drawingLayer.drawImageFromTexture(this._brushVariety[0].get_texture(),a-c+this._drawingInputOffset.x,b-d+this._drawingInputOffset.y)}this._strokePositions.set(f,h.WorkinPoint.request(a,b))},handleInput:function(a){if(this._active)switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case n.WMEventInput.PHASE_DOWN:this._closing||(this._mouseDown=!0,a.y>c.ConstantsApp.get_CANVAS_TOP()+20&&a.y<c.ConstantsApp.get_CANVAS_TOP()+d.minigames.Minigame.HEIGHT&&a.x>c.ConstantsApp.get_CANVAS_RIGHT()-
d.minigames.Minigame.WIDTH&&a.x<c.ConstantsApp.get_CANVAS_RIGHT()&&(this._beginStroke(a.x,a.y,a.id),this._soundTimer=d.minigames.MinigameWelding._SOUND_LOOP_LENGTH,this._looping=!0,e.WorkinCloud.get_instance().get_sound().playSound("sfx_welding_weld",0.3),this._sparks.get_renderable().visible=!0,this._arm.get_renderable().rotation=-10));break;case n.WMEventInput.PHASE_UP:this._mouseDown=this._looping=!1;this._endStroke(a.x,a.y,a.id);this._sparks.get_renderable().visible=!1;this._arm.get_renderable().rotation=0;break;case n.WMEventInput.PHASE_MOVE:a.y>c.ConstantsApp.get_CANVAS_TOP()+20&&a.y<c.ConstantsApp.get_CANVAS_TOP()+d.minigames.Minigame.HEIGHT&&a.x>c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+100&&a.x<c.ConstantsApp.get_CANVAS_RIGHT()?(this._arm.get_pos().x=a.x-(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH),this._arm.get_pos().y=a.y,this._active&&B._platform.getMouse().set_cursor(i.MouseCursor.None),this._moveStroke(a.x,a.y,a.id)):B._platform.getMouse().set_cursor(i.MouseCursor.Default)}}return d.minigames.Minigame.prototype.handleInput.call(this,a)},close:function(){d.minigames.Minigame.prototype.close.call(this);B._platform.getMouse().set_cursor(i.MouseCursor.Default)},update:function(a){d.minigames.Minigame.prototype.update.call(this,a);if(this._active&&(!0==d.World.MOUSE_DOWN&&!this._mouseDown&&(this._mouseDown=!0,d.World.MOUSE_POS.y>c.ConstantsApp.get_CANVAS_TOP()+20&&d.World.MOUSE_POS.y<c.ConstantsApp.get_CANVAS_TOP()+d.minigames.Minigame.HEIGHT&&d.World.MOUSE_POS.x>c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH&&d.World.MOUSE_POS.x<c.ConstantsApp.get_CANVAS_RIGHT()&&(this._beginStroke(d.World.MOUSE_POS.x,d.World.MOUSE_POS.y,""),this._soundTimer=d.minigames.MinigameWelding._SOUND_LOOP_LENGTH,this._looping=!0,e.WorkinCloud.get_instance().get_sound().playSound("sfx_welding_weld",0.3),this._sparks.get_renderable().visible=!0,this._arm.get_renderable().rotation=-10)),this._looping&&(this._soundTimer-=a,0>=this._soundTimer&&(this._soundTimer=d.minigames.MinigameWelding._SOUND_LOOP_LENGTH,e.WorkinCloud.get_instance().get_sound().playSound("sfx_welding_weld",0.3))),0<this._checkCompletionTimer&&(this._checkCompletionTimer-=a,0>=this._checkCompletionTimer))){this._checkCompletionTimer+=d.minigames.MinigameWelding._CHECK_TIME;for(var a=0,b=this._pointsCompleted;a<b.length;){var f=b[a];++a;for(var m=0;m<f.length;){var g=f[m];++m;if(!g)return}}if(!this._won&&(this._won=!0,this._timerEnd=0.5,this._objective!=d.minigames.MinigameWelding.OBJECTIVE_FIX)){a=0;for(b=this._pointElements;a<b.length;)g=b[a],++a,d.World.get_tweener().tween(g.get_renderable(),0.3,{alpha:0})}}},open:function(){d.minigames.Minigame.prototype.open.call(this)},dispose:function(){this._arm.removeElement(this._flame);this._arm.removeElement(this._sparks);e.WorkinCloud.get_instance().get_sound().stopSound("sfx_welding_weld");d.minigames.Minigame.prototype.dispose.call(this);this._outlineLayer=this._drawingLayer=this._sparks=this._flame=this._arm=this._brush=this._brushVariety=null;this._maskLayer.dispose();this._maskLayer=null;this._bufferLayer.dispose();this._bufferLayer=null;this._lastMousePos.dispose();this._pointsCompleted=this._strokePositions=this._lastMousePos=null;B._platform.getMouse().set_cursor(i.MouseCursor.Default)},init:function(){d.minigames.Minigame.prototype.init.call(this);this._checkCompletionTimer=d.minigames.MinigameWelding._CHECK_TIME;this._mouseDown=!1;this._soundTimer=0;if(e.WorkinCloud.get_instance().get_input().get_pointer().get_phase()==n.WMEventInput.PHASE_DOWN||e.WorkinCloud.get_instance().get_input().get_pointer().get_phase()==n.WMEventInput.PHASE_MOVE)this._mouseDown=!0;this._brushVariety=[];this._brush="marker";this._brushSpacing=1;this._color=16646146;this._scale=0.05;var a=d.minigames.Minigame.CENTER_X,b=d.minigames.Minigame.CENTER_Y;this._checkTimer=0.5;this._drawingLayer=this._elementManager.addElement(new d.elements.BitmapLayer({layer:d.minigames.Minigame.LAYER_MINIGAME_BG,origin:0.5,x:a,y:b},610,473,!0));this._drawingInputOffset=h.WorkinPoint.request(0.5*this._drawingLayer.get_renderable().width-this._drawingLayer.get_pos().x-(c.ConstantsApp.get_CANVAS_RIGHT()-
d.minigames.Minigame.WIDTH),0.5*this._drawingLayer.get_renderable().height-this._drawingLayer.get_pos().y);this._panelLayer=new d.elements.BitmapLayer({layer:d.minigames.Minigame.LAYER_MINIGAME_BG,origin:0.5,x:a,y:b},610,473,!0);this._panelLayer.drawImage("welding_bg",0,0);this._maskLayer=new d.elements.BitmapLayer({layer:d.minigames.Minigame.LAYER_MINIGAME_BG,origin:0.5,x:a,y:b},610,473,!0);this._maskLayer.initBlankLayer();this._bufferLayer=new d.elements.BitmapLayer({layer:d.minigames.Minigame.LAYER_MINIGAME_BG,origin:0.5,x:a,y:b},610,473,!0);this._bufferLayer.initBlankLayer();this._arm=this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"welding_arm",x:180,y:250,originX:1,originY:0,layer:d.minigames.Minigame.LAYER_MINIGAME_FG}));this._sparks=this._arm.addElement(new j.AnimatedElement({x:-40,y:-65,origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,useCamera:!1}));this._sparks.addAnimationFrames("idle",["spark_001","spark_002","spark_003"]);this._sparks.animate("idle");this._sparks.get_renderable().scaleX=this._sparks.get_renderable().scaleY=0.5;this._sparks.get_renderable().visible=!1;this._flame=this._arm.addElement(new j.AnimatedElement({x:-35,y:0,originX:0.5,originY:1,layer:d.minigames.Minigame.LAYER_MINIGAME_FG,asset:"welding_flame",useCamera:!1}));this._flame.get_renderable().scaleX=this._flame.get_renderable().scaleY=0.7;this._flame.addAnimationFrames("idle",["welding_flame","welding_flame2"]);this._flame.animate("idle");this._arm.setRenderOffset(30,40);this._won=!1;this._flagDestroy=!0;this._lastMousePos=h.WorkinPoint.request();this._strokePositions=new w.StringMap;this._brushDown=!1;this._strokeMoveDist=0;this._setBrush(this._color);this._generatedPoints=[];this._generatedPoints.push([]);this._pointsCompleted=[];this._pointsCompleted.push([]);this._generatedPoints.push([]);this._pointsCompleted.push([]);if(this._objective==d.minigames.MinigameWelding.OBJECTIVE_PAINT)4>this._difficulty?(this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-
d.minigames.Minigame.WIDTH+225,300)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+275,325)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+325,350)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+225,100)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+
375,225)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+525,300)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+525,225)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+525,100)),2<=this._difficulty&&(this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+
475,325)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+425,350)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+525,225)))):(this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+275,60)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+220,110)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+192,205)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+225,308)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+295,363)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+362,378)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-
d.minigames.Minigame.WIDTH+435,363)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+500,308)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+532,205)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+504,110)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+
450,60)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+362,31)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+296,104)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+427,104)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+298,235)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-
d.minigames.Minigame.WIDTH+424,235)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+237,160)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+339,180)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+488,160)),this._generatedPoints[0].push(h.WorkinPoint.request(c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+
385,180)));else{var f=c.ConstantsApp.get_CANVAS_RIGHT()-d.minigames.Minigame.WIDTH+173,m=5+this._difficulty;0==e.WorkinCloud.get_instance().getInt(c.ConstantsApp.INT_QUALITY)&&(m=5+this._difficulty);var g=0,i=0,k=m-3*(this._difficulty-1),l,o,q,r=!1,t=0.5<Math.random(),u=40+40*(this._difficulty/5);t?(l=f+190+190*Math.random()-95,o=35,q=350/(m-1)):(l=f,o=210+175*Math.random()-87.5,q=380/(m-1));for(a=0;a<m;){var b=a++,s=Math.random()*u-0.5*u;if(t){if(l+g+s<f+38||l+g+s>f+380-38)s*=-1}else if(122.5>o+
g+s||350<o+g+s)s*=-1;g+=s;if(r){s=0.5*Math.random()*u;g>i&&(s*=-1);if(t){if(l+i+s<f+38||l+i+s>f+380-38)s*=-1}else if(70>o+i+s||350<o+i+s)s*=-1;i+=s}else i=g;b>k&&!r&&(r=!0);t?(this._generatedPoints[0].push(h.WorkinPoint.request(l+g,o+b*q)),this._generatedPoints[1].push(h.WorkinPoint.request(l+i,o+b*q))):(this._generatedPoints[0].push(h.WorkinPoint.request(l+b*q,o+g)),this._generatedPoints[1].push(h.WorkinPoint.request(l+b*q,o+i)))}}f=0;for(a=this._generatedPoints.length;f<a;){b=f++;g=0;for(m=this._generatedPoints[b].length;g<m;)g++,this._pointsCompleted[b].push(!1)}if(this._objective==d.minigames.MinigameWelding.OBJECTIVE_FIX){a=0;for(f=this._generatedPoints;a<f.length;){i=f[a];++a;this._beginStroke(i[0].x,i[0].y,"test");g=1;for(m=i.length;g<m;)b=g++,this._moveStroke(i[b].x,i[b].y,"test");this._endStroke(i[i.length-1].x,i[i.length-1].y,"test")}this._flagDestroy=!1;this._scale=0.1;this._applyUpgradeScaling();this._setBrush(this._color,3)}else{this._objective==d.minigames.MinigameWelding.OBJECTIVE_CUT?(this._scale=0.15,this._applyUpgradeScaling(),this._setBrush(this._color)):(this._scale=0.15,this._applyUpgradeScaling(),this._setBrush(this._color),this._flagDestroy=!1);this._pointElements=[];a=0;for(f=this._generatedPoints;a<f.length;){b=f[a];++a;for(m=0;m<b.length;)g=b[m],++m,this._pointElements.push(this._elementManager.addElement(this._poolManager.createElement(c.ConstantsApp.POOL_ELEMENT_MINIGAME,{asset:"turret_crosshair",x:g.x-c.ConstantsApp.get_CANVAS_RIGHT()+d.minigames.Minigame.WIDTH,y:g.y,origin:0.5,layer:d.minigames.Minigame.LAYER_MINIGAME_PLAYER}))),this._pointElements[this._pointElements.length-1].get_renderable().scaleX=this._pointElements[this._pointElements.length-1].get_renderable().scaleY=0.5}}this._drawingInputOffset.x-=10;this._drawingInputOffset.y-=5},__class__:d.minigames.MinigameWelding});B=void 0;P=void 0;r=void 0;k=void 0;i=void 0;M=void 0;K=void 0;C=void 0;s=void 0;S=void 0;O=void 0;u=void 0;L=void 0;E=void 0;E=void 0;E=void 0;s={Disposable:function(){}};l["flambe.util.Disposable"]=s.Disposable;s.Disposable.__name__=["flambe","util","Disposable"];s.Disposable.prototype={__class__:s.Disposable};S=function(){};l["flambe.Component"]=S;S.__name__=["flambe","Component"];S.__interfaces__=[s.Disposable];S.prototype={init:function(a,b){this.owner=a;this.next=b},get_name:function(){return null},dispose:function(){null!=this.owner&&this.owner.remove(this)},onUpdate:function(){},onRemoved:function(){},onAdded:function(){},__class__:S};da={ComponentUpdater:function(){this._paused=!1}};l["com.workinman.components.ComponentUpdater"]=da.ComponentUpdater;da.ComponentUpdater.__name__=["com","workinman","components","ComponentUpdater"];da.ComponentUpdater.__super__=S;da.ComponentUpdater.prototype=v(S.prototype,{onUpdate:function(a){this._paused||e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventUpdate.request(a))},get_name:function(){return"ComponentUpdater_0"},__class__:da.ComponentUpdater});G={ConstantsCloud:function(){}};l["com.workinman.data.ConstantsCloud"]=G.ConstantsCloud;G.ConstantsCloud.__name__=["com","workinman","data","ConstantsCloud"];G.ConstantsCloud.getUniqueId=function(){return t.string(G.ConstantsCloud._uniqueId++)};G.ConstantsCloud.getSupportsAllAudio=function(){return!0};G.ConstantsCloud.getSupportsSingleMusicTrackOnly=function(){return 0<=D.window.navigator.userAgent.indexOf("Linux")};G.ConstantsCloud.getSupportsNoAudio=function(){return!G.ConstantsCloud.getSupportsAllAudio()&&!G.ConstantsCloud.getSupportsSingleMusicTrackOnly()};e={pooling:{}};e.pooling.IStrictPoolable=function(){};l["com.workinman.utils.pooling.IStrictPoolable"]=e.pooling.IStrictPoolable;e.pooling.IStrictPoolable.__name__=["com","workinman","utils","pooling","IStrictPoolable"];e.pooling.IStrictPoolable.prototype={__class__:e.pooling.IStrictPoolable};e.pooling.PoolStrictBase=function(){};l["com.workinman.utils.pooling.PoolStrictBase"]=e.pooling.PoolStrictBase;e.pooling.PoolStrictBase.__name__=["com","workinman","utils","pooling","PoolStrictBase"];e.pooling.PoolStrictBase.__interfaces__=[e.pooling.IStrictPoolable];e.pooling.PoolStrictBase.prototype={destroy:function(){this._returnFunction=null},dispose:function(){this._disposed||(this._disposed=!0,this._returnFunction(this.poolId(),this))},poolId:function(){throw"The poolId() must be redefined in each subclass";},poolActivate:function(){this._disposed=!1},build:function(a){this._returnFunction=a;this.poolActivate();return this},__class__:e.pooling.PoolStrictBase};j.QueuedAnimation=function(){};l["com.workinman.display.QueuedAnimation"]=j.QueuedAnimation;j.QueuedAnimation.__name__=["com","workinman","display","QueuedAnimation"];j.QueuedAnimation.__interfaces__=[e.pooling.IStrictPoolable];j.QueuedAnimation.request=function(a,b,f){e.WorkinCloud.get_instance().get_pool().initPool("QueuedAnimation",j.QueuedAnimation);return e.WorkinCloud.get_instance().get_pool().requestObject("QueuedAnimation").init(a,b,f)};j.QueuedAnimation.__super__=e.pooling.PoolStrictBase;j.QueuedAnimation.prototype=v(e.pooling.PoolStrictBase.prototype,{get_force:function(){return this._force},get_loops:function(){return this._loops},get_name:function(){return this._name},init:function(a,b,f){this._name=a;this._loops=b;this._force=f;return this},poolId:function(){return"QueuedAnimation"},__class__:j.QueuedAnimation,__properties__:{get_name:"get_name",get_loops:"get_loops",get_force:"get_force"}});j.AnimationDef=function(){};l["com.workinman.display.AnimationDef"]=j.AnimationDef;j.AnimationDef.__name__=["com","workinman","display","AnimationDef"];j.AnimationDef.__interfaces__=[e.pooling.IStrictPoolable];j.AnimationDef.request=function(a,b,f,c){null==f&&(f=-1);null==b&&(b=-1);e.WorkinCloud.get_instance().get_pool().initPool("AnimationDef",j.AnimationDef);return e.WorkinCloud.get_instance().get_pool().requestObject("AnimationDef").init(a,b,f,c)};j.AnimationDef.__super__=e.pooling.PoolStrictBase;j.AnimationDef.prototype=v(e.pooling.PoolStrictBase.prototype,{get_frameIds:function(){return this._frameIds},get_id:function(){return this._id},get_reverse:function(){return this._playReverse},get_end:function(){return this._endFrame},get_start:function(){return this._startFrame},destroy:function(){this._frameIds=null;e.pooling.PoolStrictBase.prototype.destroy.call(this)},dispose:function(){for(;0<this._frameIds.length;)this._frameIds.pop();e.pooling.PoolStrictBase.prototype.dispose.call(this)},init:function(a,b,f,c){null==f&&(f=-1);null==b&&(b=-1);this._id=a;this._playReverse=!1;if(null!=c){for(a=0;a<c.length;)b=c[a],++a,this._frameIds.push(b);this._startFrame=1;this._endFrame=this._frameIds.length}else this._startFrame=b,this._endFrame=f,b>f&&(this._playReverse=!0,this._startFrame=f,this._endFrame=b);return this},build:function(a){this._frameIds=[];return e.pooling.PoolStrictBase.prototype.build.call(this,a)},poolId:function(){return"AnimationDef"},__class__:j.AnimationDef,__properties__:{get_start:"get_start",get_end:"get_end",get_reverse:"get_reverse",get_id:"get_id",get_frameIds:"get_frameIds"}});j.ELEMENT_FORMAT=l["com.workinman.display.ELEMENT_FORMAT"]={__ename__:["com","workinman","display","ELEMENT_FORMAT"],__constructs__:["EMPTY","TEXTURE","MOVIE","TEXT"]};j.ELEMENT_FORMAT.EMPTY=["EMPTY",0];j.ELEMENT_FORMAT.EMPTY.toString=o;j.ELEMENT_FORMAT.EMPTY.__enum__=j.ELEMENT_FORMAT;j.ELEMENT_FORMAT.TEXTURE=["TEXTURE",1];j.ELEMENT_FORMAT.TEXTURE.toString=o;j.ELEMENT_FORMAT.TEXTURE.__enum__=j.ELEMENT_FORMAT;j.ELEMENT_FORMAT.MOVIE=["MOVIE",2];j.ELEMENT_FORMAT.MOVIE.toString=o;j.ELEMENT_FORMAT.MOVIE.__enum__=j.ELEMENT_FORMAT;j.ELEMENT_FORMAT.TEXT=["TEXT",3];j.ELEMENT_FORMAT.TEXT.toString=o;j.ELEMENT_FORMAT.TEXT.__enum__=j.ELEMENT_FORMAT;j.ElementManager=function(a,b,f){this._timeline=a;this._layers=new w.StringMap;this._elements=[];this._camera=new h.WorkinCamera(b,f);this._zSortLayers=new w.StringMap};l["com.workinman.display.ElementManager"]=j.ElementManager;j.ElementManager.__name__=["com","workinman","display","ElementManager"];j.ElementManager.prototype={renderElements:function(){for(var a=this._elements.length;0<a--;)this._elements[a].renderPosition(this._camera)},updateZSort:function(a){if(this._zSortLayers.exists(a)){for(var a=this._zSortLayers.get(a),b=a.length;0<b--;)a[b].get_doDelete()&&a.splice(b,1);a.sort(function(a,b){return a.get_depth()>b.get_depth()?1:a.get_depth()<b.get_depth()?-1:0});for(var b=0,f=a.length;b<f;){var c=b++;a[c].get_doDelete()||(null==a[c].get_root().parent&&null,a[c].get_root().parent.addChild(a[c].get_root()))}}},updateElements:function(a){for(var b=this._elements.length;0<b;)b--,this._elements[b].update(a),this._elements[b].get_doDelete()&&this.removeElementAtIndex(b)},removeElement:function(a,b){null==b&&(b=!0);for(var f=0;f<this._elements.length;){if(this._elements[f].get_uniqueId()==a.get_uniqueId()){this.removeElementAtIndex(f,b);break}f++}},removeElementAtIndex:function(a,b){null==b&&(b=!0);this._elements[a].get_root().parent.removeChild(this._elements[a].get_root());var f=0;if(this._zSortLayers.exists(this._elements[a].get_layer()))for(f=this._zSortLayers.get(this._elements[a].get_layer()).length;0<f--;)this._zSortLayers.get(this._elements[a].get_layer())[f]==this._elements[a]&&this._zSortLayers.get(this._elements[a].get_layer()).splice(f,1);b&&(this._elements[a].set_doDelete(!0),this._elements[a].dispose());this._elements.splice(a,1)},addElement:function(a){if(!1==this._layers.exists(a.get_layer()))return e.WorkinCloud.get_instance().log("[ElementManager](addElement) Trying to add element to non-existant layer '"+a.get_layer()+"'!"),a;for(var b=0;b<this._elements.length;){if(this._elements[b].get_uniqueId()==a.get_uniqueId())return this._layers.get(a.get_layer()).addChild(a.get_root()),a;b++}this._elements.push(a);this._layers.get(a.get_layer()).addChild(a.get_root());this._zSortLayers.exists(a.get_layer())&&this._zSortLayers.get(a.get_layer()).push(a);return a},addLayer:function(a,b){null==b&&(b=!1);if(this._layers.exists(a))this._timeline.removeChild(this._layers.get(a)),this._timeline.addChild(this._layers.get(a));else{var f=new P;this._timeline.addChild(f);this._layers.set(a,f);b&&this._zSortLayers.set(a,[])}},get_camera:function(){return this._camera},dispose:function(){for(;0<this._elements.length;)this.removeElementAtIndex(this._elements.length-1);this._elements=null;this._camera.dispose();this._camera=null;for(var a=function(a){return function(){return a.iterator()}}(this._layers)();a.hasNext();)a.next().dispose();this._timeline=this._layers=null},__class__:j.ElementManager};j.PoolManager=function(){this._pools=new w.StringMap;this._flagAllPoolsFull=!1;this._numPools=0};l["com.workinman.display.PoolManager"]=j.PoolManager;j.PoolManager.__name__=["com","workinman","display","PoolManager"];j.PoolManager.prototype={createElement:function(a,b){if(!1==this._pools.exists(a))return e.WorkinCloud.get_instance().log("[PoolManager](createElement) Can't create element from pool '"+a+"' it doesn't exist!"),null;var f=this._pools.get(a).getElement(!0);f.renew(b);return f},addPool:function(a,b,f,c){null==c&&(c=!1);null==f&&(f=8);this._pools.exists(a)?this._pools.get(a).changeCount(f,c):(this._flagAllPoolsFull=!1,b=new j.PoolData(b,f,c,this._numPools),this._pools.set(a,b),this._numPools++)},update:function(a){if(!this._flagAllPoolsFull){this._flagAllPoolsFull=!0;for(var b=function(a){return function(){return a.iterator()}}(this._pools)();b.hasNext();){var f=b.next();f.get_isPoolFull()||(this._flagAllPoolsFull=!1,f.update(a))}this._flagAllPoolsFull&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(j.PoolManager.ALL_POOLS_FULL))}},__class__:j.PoolManager};j.PoolData=function(a,b,f,c){null==c&&(c=0);null==f&&(f=!1);this._AVERAGE_DELAY_BETWEEN_CREATE_ELEMENTS=0.8;this._MAX_ELEMENTS_TO_CREATE_AT_ONCE=8;this._elements=[];this._class=a;this._poolProgress=0;this._flagPoolFull=!0;this._timerUpdateCreateElements=0;this._timerOffset=c;this.changeCount(b,f)};l["com.workinman.display.PoolData"]=j.PoolData;j.PoolData.__name__=["com","workinman","display","PoolData"];j.PoolData.prototype={_addPoolElements:function(a){null==a&&(a=!0);for(var b=0;this._poolProgress<this._poolElementsToAdd&&(!a||b<this._MAX_ELEMENTS_TO_CREATE_AT_ONCE);)b++,this._poolProgress++,this._elements.push(N.createInstance(this._class,[{pooled:!0}]));this._poolProgress<this._poolElementsToAdd?this._timerUpdateCreateElements=this._AVERAGE_DELAY_BETWEEN_CREATE_ELEMENTS+0.2*this._timerOffset:(this._timerUpdateCreateElements=0,this._flagPoolFull=!0)},update:function(a){this._flagPoolFull||(this._timerUpdateCreateElements-=a,0>=this._timerUpdateCreateElements&&this._addPoolElements())},changeCount:function(a,b){null==b&&(b=!0);a!=this._elements.length&&(this._poolElementsToAdd=this._poolProgress=0,this._timerUpdateCreateElements=this._AVERAGE_DELAY_BETWEEN_CREATE_ELEMENTS+0.2*this._timerOffset,this._elements.length<a?(this._flagPoolFull=!1,this._poolElementsToAdd=a-this._elements.length,b&&this._addPoolElements(!1)):this._flagPoolFull=!0)},getElement:function(a){null==a&&(a=!1);for(var b=0;b<this._elements.length;){if(!this._elements[b].get_isActive())return a=this._elements[b],this._elements.splice(b,1),this._elements.push(a),a;b++}e.WorkinCloud.get_instance().log("[PoolManager](getElement) No available elements exist! Creating new one.");if(a)return this.changeCount(this._elements.length+1,!0),this._elements[this._elements.length-1];a=this._elements[0];this._elements.splice(0,1);a.release();this._elements.push(a);return a},get_isPoolFull:function(){return this._flagPoolFull},__class__:j.PoolData};j.Renderable=function(){};l["com.workinman.display.Renderable"]=j.Renderable;j.Renderable.__name__=["com","workinman","display","Renderable"];j.Renderable.__interfaces__=[e.pooling.IStrictPoolable];j.Renderable.request=function(a,b){null==b&&(b=1);null==a&&(a=1);e.WorkinCloud.get_instance().get_pool().initPool("Renderable",j.Renderable);return e.WorkinCloud.get_instance().get_pool().requestObject("Renderable").init(a,b)};j.Renderable.__super__=e.pooling.PoolStrictBase;j.Renderable.prototype=v(e.pooling.PoolStrictBase.prototype,{init:function(a,b){this.rotation=this.z=this.y=this.x=0;this.scaleY=this.scaleX=1;this.width=a;this.height=b;this.alpha=1;this.visible=!0;return this},poolId:function(){return"Renderable"},__class__:j.Renderable});K={Point:function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b}};l["flambe.math.Point"]=K.Point;K.Point.__name__=["flambe","math","Point"];K.Point.prototype={__class__:K.Point};r={Sprite:function(){this.blendMode=this.scissor=null;var a=this;this._flags=139;this._localMatrix=new K.Matrix;var b=function(){a._flags|=12};this.x=new O.AnimatedFloat(0,b);this.y=new O.AnimatedFloat(0,b);this.rotation=new O.AnimatedFloat(0,b);this.scaleX=new O.AnimatedFloat(1,b);this.scaleY=new O.AnimatedFloat(1,b);this.anchorX=new O.AnimatedFloat(0,b);this.anchorY=new O.AnimatedFloat(0,b);this.alpha=new O.AnimatedFloat(1)}};l["flambe.display.Sprite"]=r.Sprite;r.Sprite.__name__=["flambe","display","Sprite"];r.Sprite.hitTest=function(a,b,f){var c=a._compMap.Sprite_1;if(null!=c){if(3!=(c._flags&3))return null;c.getLocalMatrix().inverseTransform(b,f,r.Sprite._scratchPoint)&&(b=r.Sprite._scratchPoint.x,f=r.Sprite._scratchPoint.y);var d=c.scissor;if(null!=d&&!d.contains(b,f))return null}a=r.Sprite.hitTestBackwards(a.firstChild,b,f);return null!=a?a:null!=c&&c.containsLocal(b,f)?c:null};r.Sprite.render=function(a,b){var f=a._compMap.Sprite_1;if(null!=f){var c=f.alpha._value;if(0==(f._flags&1)||0>=c)return;b.save();1>c&&b.multiplyAlpha(c);null!=f.blendMode&&b.setBlendMode(f.blendMode);var c=f.getLocalMatrix(),d=c.m02,e=c.m12;0!=(f._flags&128)&&(d=Math.round(d),e=Math.round(e));b.transform(c.m00,c.m10,c.m01,c.m11,d,e);c=f.scissor;null!=c&&b.applyScissor(c.x,c.y,c.width,c.height);f.draw(b)}c=a._compMap.Director_3;if(null!=c){c=c.occludedScenes;for(d=0;d<c.length;)e=c[d],++d,r.Sprite.render(e,b)}for(c=a.firstChild;null!=c;)d=c.next,r.Sprite.render(c,b),c=d;null!=f&&b.restore()};r.Sprite.hitTestBackwards=function(a,b,f){if(null!=a){var c=r.Sprite.hitTestBackwards(a.next,b,f);return null!=c?c:r.Sprite.hitTest(a,b,f)}return null};r.Sprite.__super__=S;r.Sprite.prototype=v(S.prototype,{set_pixelSnapping:function(a){this._flags=s.BitSets.set(this._flags,128,a);return a},set_pointerEnabled:function(a){this._flags=s.BitSets.set(this._flags,2,a);return a},set_visible:function(a){this._flags=s.BitSets.set(this._flags,1,a);return a},draw:function(){},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getNaturalHeight:function(){return 0},getNaturalWidth:function(){return 0},get_name:function(){return"Sprite_1"},__class__:r.Sprite});r.ImageSprite=function(a){r.Sprite.call(this);this.texture=a};l["flambe.display.ImageSprite"]=r.ImageSprite;r.ImageSprite.__name__=["flambe","display","ImageSprite"];r.ImageSprite.__super__=r.Sprite;r.ImageSprite.prototype=v(r.Sprite.prototype,{getNaturalHeight:function(){return this.texture.get_height()},getNaturalWidth:function(){return this.texture.get_width()},draw:function(a){a.drawImage(this.texture,0,0)},__class__:r.ImageSprite});j.SubImageSprite=function(a){r.ImageSprite.call(this,e.WorkinCloud.get_instance().get_assets().getTexture(a));this._rect=e.WorkinCloud.get_instance().get_assets().getSpriteRect(a)};l["com.workinman.display.SubImageSprite"]=j.SubImageSprite;j.SubImageSprite.__name__=["com","workinman","display","SubImageSprite"];j.SubImageSprite.__super__=r.ImageSprite;j.SubImageSprite.prototype=v(r.ImageSprite.prototype,{getNaturalHeight:function(){return null==this.texture?0:null==this._rect?this.texture.get_height():this._rect.get_height()},getNaturalWidth:function(){return null==this.texture?0:null==this._rect?this.texture.get_width():this._rect.get_width()},setTexture:function(a){this.texture=e.WorkinCloud.get_instance().get_assets().getTexture(a);this._rect=e.WorkinCloud.get_instance().get_assets().getSpriteRect(a)},draw:function(a){null!=this.texture&&(null==this._rect?a.drawImage(this.texture,0,0):a.drawSubImage(this.texture,0,0,this._rect.get_x(),this._rect.get_y(),this._rect.get_width(),this._rect.get_height()))},dispose:function(){this._rect=null;r.ImageSprite.prototype.dispose.call(this)},__class__:j.SubImageSprite});j.TEXT_JUSTIFICATION=l["com.workinman.display.TEXT_JUSTIFICATION"]={__ename__:["com","workinman","display","TEXT_JUSTIFICATION"],__constructs__:["JUST_LEFT","JUST_RIGHT","JUST_CENTER"]};j.TEXT_JUSTIFICATION.JUST_LEFT=["JUST_LEFT",0];j.TEXT_JUSTIFICATION.JUST_LEFT.toString=o;j.TEXT_JUSTIFICATION.JUST_LEFT.__enum__=j.TEXT_JUSTIFICATION;j.TEXT_JUSTIFICATION.JUST_RIGHT=["JUST_RIGHT",1];j.TEXT_JUSTIFICATION.JUST_RIGHT.toString=o;j.TEXT_JUSTIFICATION.JUST_RIGHT.__enum__=j.TEXT_JUSTIFICATION;j.TEXT_JUSTIFICATION.JUST_CENTER=["JUST_CENTER",2];j.TEXT_JUSTIFICATION.JUST_CENTER.toString=o;j.TEXT_JUSTIFICATION.JUST_CENTER.__enum__=j.TEXT_JUSTIFICATION;j.TextBase=function(a,b,f,c,d){null==c&&(c="");null==d&&(d={});d.x=a;d.y=b;j.Element.call(this,d);""==c&&(c=G.ConstantsCloud.FONT_DEFAULT);this._currentNumLines=1;this._textString=f;this._fontName=c;this._spacing=null!=d.spacing?d.spacing:0;this._width=null!=d.width?d.width:Math.POSITIVE_INFINITY;this._just=null!=d.just?d.just:j.TEXT_JUSTIFICATION.JUST_LEFT;this._just=null!=d.center?j.TEXT_JUSTIFICATION.JUST_CENTER:this._just;this._textDisplay=[];this._textDisplay.push(new r.TextSprite(e.WorkinCloud.get_instance().get_assets().getFont(this._fontName),""));this.setImageSprite(this._textDisplay[0]);this._textDisplay[0].set_pointerEnabled(!1);this.renderPosition();this._renderTextToDisplay();this._goalString="";this._textTimer=this._lettersToSample=0};l["com.workinman.display.TextBase"]=j.TextBase;j.TextBase.__name__=["com","workinman","display","TextBase"];j.TextBase.__super__=j.Element;j.TextBase.prototype=v(j.Element.prototype,{_cleanUp:function(){if(null!=this._textDisplay)for(;1<this._textDisplay.length;)this._textDisplay.pop().dispose()},_renderTextToDisplay:function(){this._textDisplay[0].set_text(this._textString);1==this._textDisplay.length&&(this._render.width=this._textDisplay[0].getNaturalWidth(),this._render.height=this._textDisplay[0].getNaturalHeight());this.setOrigin(this._originX,this._originY)},_renderFontToDisplay:function(){for(var a=0,b=this._textDisplay;a<b.length;){var f=b[a];++a;f.set_font(e.WorkinCloud.get_instance().get_assets().getFont(this._fontName))}},set_text:function(a){this._textString=a;this._renderTextToDisplay();return this._textString},set_font:function(a){if(""==a)return"";this._fontName=a;this._renderFontToDisplay();return this._fontName},_checkForLineBreak:function(a){for(var a=X.replace(a,"<br>","\\r\\n"),b=[],f=this._textDisplay[0]._font.getGlyphs(a),c=0,d=0,e=0;d<f.length;){var g=f[d];d++;if(d==f.length)c+=g.width;else if(c+=g.xAdvance+g.getKerning(f[d].charCode),d<f.length-1&&(92==f[d].charCode||47==f[d].charCode)&&114==f[d+1].charCode&&(92==f[d+2].charCode||47==f[d+2].charCode)&&110==f[d+3].charCode)c=d-1,b.push(a.substring(e,c)),e=c+5,c=0;if(c>=this._width/this._render.scaleX)return f=!0,c=a.lastIndexOf(" ",d),-1==c?(f=!1,c=d-1):c++,b.push(a.substring(e,c)+(f?"":"-")),!0;d==f.length&&b.push(a.substring(e,d))}return!1},update:function(a){j.Element.prototype.update.call(this,a);if(0<this._goalString.length)for(this._textTimer+=a;0.03<this._textTimer&&0<this._goalString.length;){this._lettersToSample<this._goalString.length&&this._lettersToSample++;"<"==this._goalString.charAt(this._lettersToSample)&&(this._lettersToSample+=4);for(a=0;" "!=this._goalString.charAt(this._lettersToSample)&&this._lettersToSample<this._goalString.length-1;)this._lettersToSample++,a++;this._checkForLineBreak(this._goalString.substring(0,this._lettersToSample))?(this._lettersToSample-=a,this._goalString=this._goalString.substring(0,this._lettersToSample-1)+"<br>"+this._goalString.substring(this._lettersToSample),this._lettersToSample+=4):this._lettersToSample-=a;this._updateTextDisplay(this._goalString.substring(0,this._lettersToSample),1,!0);this._lettersToSample==this._goalString.length&&(this._goalString="",this._lettersToSample=0);this._textTimer-=0.03}},effectTypeIn:function(a){this._goalString=a;this._lettersToSample=0;this._textString=""},_updateTextDisplay:function(a,b,f){null==f&&(f=!1);null==b&&(b=1);this._cleanUp();if(""==a)this._textDisplay[0].set_text(a);else{for(var a=X.replace(a,"<br>","\\r\\n"),c=[],d=this._textDisplay[0]._font.getGlyphs(a),g=0,h=0,i=0;h<d.length;){var j=d[h];h++;if(h==d.length)g+=j.width*b;else if(g+=j.xAdvance*b+j.getKerning(d[h].charCode)*b,h<d.length-1&&(92==d[h-1].charCode||47==d[h-1].charCode)&&114==d[h].charCode&&(92==d[h+1].charCode||47==d[h+1].charCode)&&110==d[h+2].charCode)g=h-1,c.push(a.substring(i,g)),i=g+4,g=0;g>=this._width/this._render.scaleX&&!f&&(j=!0,g=a.lastIndexOf(" ",h),-1==g?(j=!1,g=h-1):g++,c.push(a.substring(i,g)+(j?"":"-")),i=g,g=0);h==d.length&&c.push(a.substring(i,h))}this._textDisplay[0].set_text(c.shift());for(a=this._render.height=0;a<c.length;)b=c[a],++a,this._textDisplay.push(new r.TextSprite(e.WorkinCloud.get_instance().get_assets().getFont(this._fontName),b)),this.addTextDisplay(this._textDisplay[this._textDisplay.length-1]);this._render.height+=0==this._spacing?this._textDisplay[0].getNaturalHeight():this._spacing;this._imageSprite.x.set__(-(this._originX*this._textDisplay[0].getNaturalWidth()));this._imageSprite.y.set__(-(this._originY*this._render.height))}},addTextDisplay:function(a){switch(this._just[1]){case 2:a.x.set__((this._textDisplay[0].getNaturalWidth()-a.getNaturalWidth())/2);break;case 1:a.x.set__(this._textDisplay[0].getNaturalWidth()-a.getNaturalWidth())}a.y.set__(this._render.height+(0==this._spacing?a.getNaturalHeight():this._spacing));this._render.height+=0==this._spacing?a.getNaturalHeight():this._spacing;this._render.width=Math.max(this._render.width,a.getNaturalWidth());this._imageEntity.addChild((new P).add(a))},_cleanOldFormat:function(a){switch(a[1]){case 3:break;default:j.Element.prototype._cleanOldFormat.call(this,a)}},_determineFormat:function(a){I.__instanceof(a,r.TextSprite)?this._setFormat(j.ELEMENT_FORMAT.TEXT):j.Element.prototype._determineFormat.call(this,a)},dispose:function(){this._cleanUp();this._just=this._textDisplay=null;j.Element.prototype.dispose.call(this)},__class__:j.TextBase});j.TextLocalized=function(a,b,f,c,d){null==c&&(c="");this._flagLocalize=null!=d&&!1==d.doLocalize?!1:!0;j.TextBase.call(this,a,b,f,c,d)};l["com.workinman.display.TextLocalized"]=j.TextLocalized;j.TextLocalized.__name__=["com","workinman","display","TextLocalized"];j.TextLocalized.__super__=j.TextBase;j.TextLocalized.prototype=v(j.TextBase.prototype,{_renderTextToDisplay:function(){if(this._flagLocalize){var a=e.WorkinCloud.get_instance().get_localize().getLocalizeData(this._textString);this._offsetX=a.get_offsetX();this._offsetY=a.get_offsetY();this._render.scaleX=a.get_scale();this._render.scaleY=a.get_scale();a.get_fontName()!=this._fontName&&this.set_font(a.get_fontName());this._updateTextDisplay(a.get_string());a.dispose();this.renderPosition()}else j.TextBase.prototype._renderTextToDisplay.call(this)},swapTextToDisplay:function(a){this._textString=a;this._renderTextToDisplay()},__class__:j.TextLocalized});n={WMEvent:function(){}};l["com.workinman.events.WMEvent"]=n.WMEvent;n.WMEvent.__name__=["com","workinman","events","WMEvent"];n.WMEvent.__interfaces__=[e.pooling.IStrictPoolable];n.WMEvent.request=function(a){e.WorkinCloud.get_instance().get_pool().initPool("WMEvent",n.WMEvent);return e.WorkinCloud.get_instance().get_pool().requestObject("WMEvent").init(a)};n.WMEvent.__super__=e.pooling.PoolStrictBase;n.WMEvent.prototype=v(e.pooling.PoolStrictBase.prototype,{get_eventId:function(){return this._eventId},init:function(a){this._eventId=a;return this},poolId:function(){return"WMEvent"},__class__:n.WMEvent,__properties__:{get_eventId:"get_eventId"}});n.WMEventData=function(){};l["com.workinman.events.WMEventData"]=n.WMEventData;n.WMEventData.__name__=["com","workinman","events","WMEventData"];n.WMEventData.__interfaces__=[e.pooling.IStrictPoolable];n.WMEventData.request=function(a,b){e.WorkinCloud.get_instance().get_pool().initPool("WMEventData",n.WMEventData);return e.WorkinCloud.get_instance().get_pool().requestObject("WMEventData").initWithData(a,b)};n.WMEventData.__super__=n.WMEvent;n.WMEventData.prototype=v(n.WMEvent.prototype,{get_data:function(){return this._data},initWithData:function(a,b){n.WMEvent.prototype.init.call(this,a);this._data=b;return this},dispose:function(){this._data=null;n.WMEvent.prototype.dispose.call(this)},poolId:function(){return"WMEventData"},__class__:n.WMEventData,__properties__:v(n.WMEvent.prototype.__properties__,{get_data:"get_data"})});n.WMEventDispatcher=function(){};l["com.workinman.events.WMEventDispatcher"]=n.WMEventDispatcher;n.WMEventDispatcher.__name__=["com","workinman","events","WMEventDispatcher"];n.WMEventDispatcher.__interfaces__=[e.pooling.IStrictPoolable];n.WMEventDispatcher.request=function(){e.WorkinCloud.get_instance().get_pool().initPool("WMEventDispatcher",n.WMEventDispatcher);return e.WorkinCloud.get_instance().get_pool().requestObject("WMEventDispatcher")};n.WMEventDispatcher.__super__=e.pooling.PoolStrictBase;n.WMEventDispatcher.prototype=v(e.pooling.PoolStrictBase.prototype,{dispatchEvent:function(a){this._eventTrackers.exists(a.get_eventId())&&this._eventTrackers.get(a.get_eventId()).dispatchEvent(a);a.dispose()},removeEventListener:function(a,b){this._eventTrackers.exists(a)&&(this._eventTrackers.get(a).removeEventListener(b),this._eventTrackers.get(a).isEmtpy()&&(this._eventTrackers.get(a).dispose(),this._eventTrackers.remove(a)))},addEventListener:function(a,b){this._eventTrackers.exists(a)||this._eventTrackers.set(a,n._WMEventDispatcher.WMEventTracker.request());this._eventTrackers.get(a).addEventListener(b)},destroy:function(){this._eventTrackers=null;e.pooling.PoolStrictBase.prototype.destroy.call(this)},dispose:function(){for(var a=function(a){return function(){return a.iterator()}}(this._eventTrackers)();a.hasNext();)a.next().dispose();e.WorkinUtils.emptyMap(this._eventTrackers);e.pooling.PoolStrictBase.prototype.dispose.call(this)},poolId:function(){return"WMEventDispatcher"},build:function(a){this._eventTrackers=new w.StringMap;return e.pooling.PoolStrictBase.prototype.build.call(this,a)},__class__:n.WMEventDispatcher});n._WMEventDispatcher={};n._WMEventDispatcher.WMEventTracker=function(){};l["com.workinman.events._WMEventDispatcher.WMEventTracker"]=n._WMEventDispatcher.WMEventTracker;n._WMEventDispatcher.WMEventTracker.__name__=["com","workinman","events","_WMEventDispatcher","WMEventTracker"];n._WMEventDispatcher.WMEventTracker.__interfaces__=[e.pooling.IStrictPoolable];n._WMEventDispatcher.WMEventTracker.request=function(){e.WorkinCloud.get_instance().get_pool().initPool("WMEventTracker",n._WMEventDispatcher.WMEventTracker);return e.WorkinCloud.get_instance().get_pool().requestObject("WMEventTracker")};n._WMEventDispatcher.WMEventTracker.__super__=e.pooling.PoolStrictBase;n._WMEventDispatcher.WMEventTracker.prototype=v(e.pooling.PoolStrictBase.prototype,{isEmtpy:function(){return null==this._signal._head},dispatchEvent:function(a){this._signal.emit1(a)},removeEventListener:function(a){for(var b=this._signalTrackers.length;0<b--;)H.compareMethods(this._signalTrackers[b].get_listener(),a)&&(this._signalTrackers[b].dispose(),this._signalTrackers.splice(b,1))},addEventListener:function(a){this._signalTrackers.push(n._WMEventDispatcher.SignalTracker.request(a,this._signal.connect(a)))},destroy:function(){this._signal=this._signalTrackers=null;e.pooling.PoolStrictBase.prototype.destroy.call(this)},dispose:function(){for(;0<this._signalTrackers.length;)this._signalTrackers.pop().dispose();e.pooling.PoolStrictBase.prototype.dispose.call(this)},build:function(a){this._signalTrackers=[];this._signal=new s.Signal1;return e.pooling.PoolStrictBase.prototype.build.call(this,a)},poolId:function(){return"WMEventTracker"},__class__:n._WMEventDispatcher.WMEventTracker});n._WMEventDispatcher.SignalTracker=function(){};l["com.workinman.events._WMEventDispatcher.SignalTracker"]=n._WMEventDispatcher.SignalTracker;n._WMEventDispatcher.SignalTracker.__name__=["com","workinman","events","_WMEventDispatcher","SignalTracker"];n._WMEventDispatcher.SignalTracker.__interfaces__=[e.pooling.IStrictPoolable];n._WMEventDispatcher.SignalTracker.request=function(a,b){e.WorkinCloud.get_instance().get_pool().initPool("SignalTracker",n._WMEventDispatcher.SignalTracker);return e.WorkinCloud.get_instance().get_pool().requestObject("SignalTracker").init(a,b)};n._WMEventDispatcher.SignalTracker.__super__=e.pooling.PoolStrictBase;n._WMEventDispatcher.SignalTracker.prototype=v(e.pooling.PoolStrictBase.prototype,{get_listener:function(){return this._function},dispose:function(){this._connection.dispose();this._function=this._connection=null;e.pooling.PoolStrictBase.prototype.dispose.call(this)},init:function(a,b){this._function=a;this._connection=b;return this},poolId:function(){return"SignalTracker"},__class__:n._WMEventDispatcher.SignalTracker,__properties__:{get_listener:"get_listener"}});n.WMEventFlow=function(){};l["com.workinman.events.WMEventFlow"]=n.WMEventFlow;n.WMEventFlow.__name__=["com","workinman","events","WMEventFlow"];n.WMEventFlow.__interfaces__=[e.pooling.IStrictPoolable];n.WMEventFlow.request=function(a,b){null==b&&(b=!1);e.WorkinCloud.get_instance().get_pool().initPool("WMEventFlow",n.WMEventFlow);return e.WorkinCloud.get_instance().get_pool().requestObject("WMEventFlow").initWithFlow(a,b)};n.WMEventFlow.__super__=n.WMEvent;n.WMEventFlow.prototype=v(n.WMEvent.prototype,{initWithFlow:function(a,b){n.WMEvent.prototype.init.call(this,n.WMEventFlow.EVENT_FLOW);this.flowId=a;this.targetScreen=b;return this},poolId:function(){return"WMEventFlow"},__class__:n.WMEventFlow});n.WMEventHash=function(){};l["com.workinman.events.WMEventHash"]=n.WMEventHash;n.WMEventHash.__name__=["com","workinman","events","WMEventHash"];n.WMEventHash.__interfaces__=[e.pooling.IStrictPoolable];n.WMEventHash.request=function(a,b){e.WorkinCloud.get_instance().get_pool().initPool("WMEventHash",n.WMEventHash);return e.WorkinCloud.get_instance().get_pool().requestObject("WMEventHash").initWithHash(a,b)};n.WMEventHash.requestWithKeysAndValues=function(a,b){return n.WMEventHash.request(a,e.WorkinUtils.mapWithKeysAndValues(b))};n.WMEventHash.__super__=n.WMEvent;n.WMEventHash.prototype=v(n.WMEvent.prototype,{initWithHash:function(a,b){n.WMEvent.prototype.init.call(this,a);for(var f=b.keys();f.hasNext();){var c=f.next(),d=b.get(c);this.hash.set(c,d)}return this},destroy:function(){this.hash=null;n.WMEvent.prototype.destroy.call(this)},dispose:function(){e.WorkinUtils.emptyMap(this.hash);n.WMEvent.prototype.dispose.call(this)},poolId:function(){return"WMEventHash"},build:function(a){this.hash=new w.StringMap;return n.WMEvent.prototype.build.call(this,a)},__class__:n.WMEventHash});n.WMEventInput=function(){};l["com.workinman.events.WMEventInput"]=n.WMEventInput;n.WMEventInput.__name__=["com","workinman","events","WMEventInput"];n.WMEventInput.__interfaces__=[e.pooling.IStrictPoolable];n.WMEventInput.request=function(a,b,f,c,d,g){null==g&&(g="");null==d&&(d=0);e.WorkinCloud.get_instance().get_pool().initPool("WMEventInput",n.WMEventInput);return e.WorkinCloud.get_instance().get_pool().requestObject("WMEventInput").initWithInput(a,b,f,c,d,g)};n.WMEventInput.__super__=n.WMEvent;n.WMEventInput.prototype=v(n.WMEvent.prototype,{poolId:function(){return"WMEventInput"},initWithInput:function(a,b,f,c,d,e){n.WMEvent.prototype.init.call(this,n.WMEventInput.EVENT_INPUT);this.phase=a;this.input=b;this.x=f;this.y=c;this.swipe=d;this.id=e;return this},__class__:n.WMEventInput});n.WMEventInterfaceChange=function(){};l["com.workinman.events.WMEventInterfaceChange"]=n.WMEventInterfaceChange;n.WMEventInterfaceChange.__name__=["com","workinman","events","WMEventInterfaceChange"];n.WMEventInterfaceChange.__interfaces__=[e.pooling.IStrictPoolable];n.WMEventInterfaceChange.request=function(a,b,f){null==b&&(b="");e.WorkinCloud.get_instance().get_pool().initPool("WMEventInterfaceChange",n.WMEventInterfaceChange);return e.WorkinCloud.get_instance().get_pool().requestObject("WMEventInterfaceChange").initWithInterfaceChange(a,b,f)};n.WMEventInterfaceChange.__super__=n.WMEvent;n.WMEventInterfaceChange.prototype=v(n.WMEvent.prototype,{destroy:function(){this.customData=null;n.WMEvent.prototype.destroy.call(this)},dispose:function(){e.WorkinUtils.emptyMap(this.customData);n.WMEvent.prototype.dispose.call(this)},initWithInterfaceChange:function(a,b,f){n.WMEvent.prototype.init.call(this,n.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT);this.flowId=a;this.screenId=b;if(null!=f)for(a=f.keys();a.hasNext();){var b=a.next(),c=f.get(b);this.customData.set(b,c)}return this},build:function(a){this.customData=new w.StringMap;return n.WMEvent.prototype.build.call(this,a)},poolId:function(){return"WMEventInterfaceChange"},__class__:n.WMEventInterfaceChange});n.WMEventScreenOut=function(){};l["com.workinman.events.WMEventScreenOut"]=n.WMEventScreenOut;n.WMEventScreenOut.__name__=["com","workinman","events","WMEventScreenOut"];n.WMEventScreenOut.__interfaces__=[e.pooling.IStrictPoolable];n.WMEventScreenOut.request=function(a,b){e.WorkinCloud.get_instance().get_pool().initPool("WMEventScreenOut",n.WMEventScreenOut);return e.WorkinCloud.get_instance().get_pool().requestObject("WMEventScreenOut").initWithScreenOut(a,b)};n.WMEventScreenOut.__super__=n.WMEvent;n.WMEventScreenOut.prototype=v(n.WMEvent.prototype,{initWithScreenOut:function(a,b){this.flowId=a;this.screenId=b;n.WMEvent.prototype.init.call(this,n.WMEventScreenOut.EVENT_SCREEN_OUTPUT);return this},poolId:function(){return"WMEventScreenOut"},__class__:n.WMEventScreenOut});n.WMEventUpdate=function(){};l["com.workinman.events.WMEventUpdate"]=n.WMEventUpdate;n.WMEventUpdate.__name__=["com","workinman","events","WMEventUpdate"];n.WMEventUpdate.__interfaces__=[e.pooling.IStrictPoolable];n.WMEventUpdate.request=function(a){e.WorkinCloud.get_instance().get_pool().initPool("WMEventUpdate",n.WMEventUpdate);return e.WorkinCloud.get_instance().get_pool().requestObject("WMEventUpdate").initWithUpdate(a)};n.WMEventUpdate.__super__=n.WMEvent;n.WMEventUpdate.prototype=v(n.WMEvent.prototype,{get_dt:function(){return this._dt},poolId:function(){return"WMEventUpdate"},initWithUpdate:function(a){n.WMEvent.prototype.init.call(this,n.WMEventUpdate.EVENT_UPDATE);this._dt=a;return this},__class__:n.WMEventUpdate,__properties__:v(n.WMEvent.prototype.__properties__,{get_dt:"get_dt"})});h={};h.InterceptResult=function(a,b){this._success=a;this._result=h.WorkinPoint.request();this._line1=h.WorkinLine.request();this._line2=h.WorkinLine.request();null!=b&&this._result.toPoint(b)};l["com.workinman.math.InterceptResult"]=h.InterceptResult;h.InterceptResult.__name__=["com","workinman","math","InterceptResult"];h.InterceptResult.prototype={set_result:function(a){null==a?this._result.to(0,0):this._result.toPoint(a);return this._result},set_success:function(a){return this._success=a},__class__:h.InterceptResult};h.Side=l["com.workinman.math.Side"]={__ename__:["com","workinman","math","Side"],__constructs__:["TOP","RIGHT","BOTTOM","LEFT"]};h.Side.TOP=["TOP",0];h.Side.TOP.toString=o;h.Side.TOP.__enum__=h.Side;h.Side.RIGHT=["RIGHT",1];h.Side.RIGHT.toString=o;h.Side.RIGHT.__enum__=h.Side;h.Side.BOTTOM=["BOTTOM",2];h.Side.BOTTOM.toString=o;h.Side.BOTTOM.__enum__=h.Side;h.Side.LEFT=["LEFT",3];h.Side.LEFT.toString=o;h.Side.LEFT.__enum__=h.Side;h.WMRectangle=function(){};l["com.workinman.math.WMRectangle"]=h.WMRectangle;h.WMRectangle.__name__=["com","workinman","math","WMRectangle"];h.WMRectangle.__interfaces__=[e.pooling.IStrictPoolable];h.WMRectangle.request=function(a,b,f,c){null==c&&(c=0);null==f&&(f=0);null==b&&(b=0);null==a&&(a=0);e.WorkinCloud.get_instance().get_pool().initPool("WMRectangle",h.WMRectangle);return e.WorkinCloud.get_instance().get_pool().requestObject("WMRectangle").init(a,b,f,c)};h.WMRectangle.fromRectangle=function(a){return h.WMRectangle.request(a.x,a.y,a.width,a.height)};h.WMRectangle.__super__=e.pooling.PoolStrictBase;h.WMRectangle.prototype=v(e.pooling.PoolStrictBase.prototype,{toString:function(){return"{ WMRectangle x: "+this._x+" y: "+this._y+" width: "+this._width+" height: "+this._height+" }"},sideLineIntercept:function(a,b,f){null==this._workLine?(this._setSideLine(b),null):this._setSideLine(b);return this._workLine.testLineSegmentIntercept(a,!1,f)},_setSideLine:function(a){this._getWorkLine();switch(a[1]){case 0:this._workLine.toFloats(this.get_left(),this.get_top(),this.get_right(),this.get_top());break;case 1:this._workLine.toFloats(this.get_right(),this.get_top(),this.get_right(),this.get_bottom());break;case 2:this._workLine.toFloats(this.get_left(),this.get_bottom(),this.get_right(),this.get_bottom());break;case 3:this._workLine.toFloats(this.get_left(),this.get_top(),this.get_left(),this.get_bottom())}},intersection:function(a){var b=h.WMRectangle.request();if(this.intersects(a)){b.set_x(this.get_left()>a.get_left()?this.get_left():a.get_left());b.set_y(this.get_top()>a.get_top()?this.get_top():a.get_top());var f=this.get_right()<a.get_right()?this.get_right():a.get_right(),a=this.get_bottom()<a.get_bottom()?this.get_bottom():a.get_bottom();b.set_width(f-b.get_x());b.set_height(a-b.get_y())}return b},intersects:function(a){return this.get_left()<a.get_right()&&this.get_right()>a.get_left()&&this.get_top()<a.get_bottom()&&this.get_bottom()>a.get_top()},containsPoint:function(a){return this.contains(a.x,a.y)},toXYWH:function(a,b,f,c){this.toXY(a,b);this.toWH(f,c)},toWH:function(a,b){this.set_width(a);this.set_height(b)},toXY:function(a,b){this.set_x(a);this.set_y(b)},contains:function(a,b){return a<this.get_left()||a>this.get_right()||b>this.get_bottom()||b<this.get_top()?!1:!0},copy:function(){return h.WMRectangle.request(this._x,this._y,this._width,this._height)},set_centerY:function(a){this._y=a-this._height/2;return this.get_centerY()},get_centerY:function(){return this._y+this._height/2},set_centerX:function(a){this._x=a-this._width/2;return this.get_centerX()},get_centerX:function(){return this._x+this._width/2},set_right:function(a){this._x=a-this._width;return this.get_right()},get_right:function(){return this._x+this._width},set_bottom:function(a){this._y=a-this._height;return this.get_bottom()},get_bottom:function(){return this._y+
this._height},set_height:function(a){return this._height=a},get_height:function(){return this._height},set_width:function(a){return this._width=a},get_width:function(){return this._width},set_left:function(a){return this._x=a},get_left:function(){return this._x},set_top:function(a){return this._y=a},get_top:function(){return this._y},set_y:function(a){return this._y=a},get_y:function(){return this._y},set_x:function(a){return this._x=a},get_x:function(){return this._x},_getWorkLine:function(){null==this._workLine&&(this._workLine=h.WorkinLine.request());return this._workLine},dispose:function(){null!=this._workLine&&this._workLine.dispose();this._workLine=null;e.pooling.PoolStrictBase.prototype.dispose.call(this)},init:function(a,b,f,c){this._x=a;this._y=b;this._width=f;this._height=c;return this},build:function(a){this._workLine=null;return e.pooling.PoolStrictBase.prototype.build.call(this,a)},poolId:function(){return"WMRectangle"},__class__:h.WMRectangle,__properties__:{set_x:"set_x",get_x:"get_x",set_y:"set_y",get_y:"get_y",set_top:"set_top",get_top:"get_top",set_left:"set_left",get_left:"get_left",set_width:"set_width",get_width:"get_width",set_height:"set_height",get_height:"get_height",set_bottom:"set_bottom",get_bottom:"get_bottom",set_right:"set_right",get_right:"get_right",set_centerX:"set_centerX",get_centerX:"get_centerX",set_centerY:"set_centerY",get_centerY:"get_centerY"}});h.WorkinCamera=function(a,b){this._screenCenterX=this._worldCenterX=a;this._screenCenterY=this._worldCenterY=b;this._focalLength=300;this._pos=h.WorkinPoint.request(a,b)};l["com.workinman.math.WorkinCamera"]=h.WorkinCamera;h.WorkinCamera.__name__=["com","workinman","math","WorkinCamera"];h.WorkinCamera.prototype={get_screenCenterY:function(){return this._screenCenterY},get_screenCenterX:function(){return this._screenCenterX},get_pos:function(){return this._pos},dispose:function(){this._pos.dispose();this._pos=null},__class__:h.WorkinCamera};h.WorkinLine=function(){};l["com.workinman.math.WorkinLine"]=h.WorkinLine;h.WorkinLine.__name__=["com","workinman","math","WorkinLine"];h.WorkinLine.__interfaces__=[e.pooling.IStrictPoolable];h.WorkinLine.request=function(a,b,f,c){null==c&&(c=0);null==f&&(f=0);null==b&&(b=0);null==a&&(a=0);e.WorkinCloud.get_instance().get_pool().initPool("WorkinLine",h.WorkinLine);return e.WorkinCloud.get_instance().get_pool().requestObject("WorkinLine").init(a,b,f,c)};h.WorkinLine.__super__=e.pooling.PoolStrictBase;h.WorkinLine.prototype=v(e.pooling.PoolStrictBase.prototype,{toString:function(){return"[WorkinLine] ("+
this._p0.x+", "+this._p0.y+", "+this._p0.z+") ~> ("+this._p1.x+", "+this._p1.y+", "+this._p1.z+") / Len: "+this._length},testPointSegmentIntercept:function(a,b){null==b&&(b=!1);this._xSegmentResult=0==this._parametricDenom.x?0:(a.x-this.get_p0().x)/this._parametricDenom.x;this._ySegmentResult=0==this._parametricDenom.y?0:(a.y-this.get_p0().y)/this._parametricDenom.y;b&&null;return 0<=this._xSegmentResult&&1>=this._xSegmentResult&&0<=this._ySegmentResult&&1>=this._ySegmentResult?!0:!1},testLineSegmentIntercept:function(a,b,f){var c=-a.get_vector().x*this._vector.y+this._vector.x*a.get_vector().y,d=this.get_p0().x-a.get_p0().x,e=this.get_p0().y-a.get_p0().y,b=(-this._vector.y*d+this._vector.x*e)/c,a=(a.get_vector().x*e-a.get_vector().y*d)/c;null==f&&(f=new h.InterceptResult(!1));f.set_success(!1);0<=b&&1>=b&&0<=a&&1>=a&&(f.set_success(!0),a=h.WorkinPoint.request(this.get_p0().x+a*this._vector.x,this.get_p0().y+a*this._vector.y),f.set_result(a),a.dispose());return f},testLineIntercept:function(a,b){null==b&&(b=new h.InterceptResult(!1));this._inverseDeterminate=1/(-1*this._slope- -1*a.get_slope());b.set_success(!0);var f=h.WorkinPoint.request((-1*a.get_yIntercept()- -1*this._yIntercept)*this._inverseDeterminate,(a.get_slope()*this._yIntercept-this.get_slope()*a.get_yIntercept())*this._inverseDeterminate,0);b.set_result(f);f.dispose();return b},projectOntoLine:function(a){var b=a.get_vector().dot(this.get_vector().normalizeCopy());return h.WorkinLine.request().to(a.get_p0(),a.get_p1().addPointCopy(this._normal.copyAndResize(Math.sqrt(a.get_length()*a.get_length()-b*b))))},testLineDot:function(a){return this._vector.dot(a.get_normal())},_calcProperties:function(){this._length=Math.round(1E3*Math.sqrt((this._p0.x-this._p1.x)*(this._p0.x-this._p1.x)+(this._p0.y-this._p1.y)*(this._p0.y-this._p1.y)))/1E3;this._vector.to(this.get_p1().x-this.get_p0().x,this.get_p1().y-this.get_p0().y);this._slope=this._vector.y/this._vector.x;0==this.get_vector().x&&(this._slope=1E5);this._yIntercept=this.get_p0().y-this._slope*this.get_p0().x;this._parametricDenom.to(this.get_p1().x-
this.get_p0().x,this.get_p1().y-this.get_p0().y);this._vector.pseudoCross(this._normal);this._normal.normalize()},shiftEnd:function(a){this.set_length(this.get_length()+a)},shiftOrigin:function(a){var b=this._vector.reverseCopy();b.set_length(a);this._p0.addPoint(b);b.dispose();this._calcProperties()},rotateTo:function(a){this._vector.rotateTo(a);this._p1.toPoint(this._p0.addPointCopy(this._vector));this._calcProperties()},rotate:function(a){this._vector.rotate(a);this._p1.toPoint(this._p0.addPointCopy(this._vector));this._calcProperties()},endToPoint:function(a){this._p1.toPoint(a);this._calcProperties()},endTo:function(a,b,f){null==f&&(f=0);this._p1.to(a,b,f);this._calcProperties()},originToPoint:function(a){this._p0.toPoint(a);this._calcProperties()},originTo:function(a,b,f){null==f&&(f=0);this._p0.to(a,b,f);this._calcProperties();return this},toFloats:function(a,b,f,c){this._p0.to(a,b);this._p1.to(f,c);this._calcProperties();return this},toLine:function(a){this._p0.toPoint(a.get_p0());this._p1.toPoint(a.get_p1());this._calcProperties();return this},to:function(a,b){this._p0.toPoint(a);this._p1.toPoint(b);this._calcProperties();return this},copy:function(){return h.WorkinLine.request().to(this._p0,this._p1)},clean:function(){this._p0.clean();this._p1.clean();this._calcProperties()},flip:function(){var a=this._p0.copy();this._p0.toPoint(this._p1);this._p1.toPoint(a);a.dispose();this._calcProperties()},equals:function(a){return a.get_p0().equals(this.get_p0())&&a.get_p1().equals(this.get_p1())},getNewPoint:function(a){return h.WorkinPoint.request(this.get_p0().x+
this._vector.x*a,this.get_p0().y+this._vector.y*a)},recalculate:function(){this._calcProperties()},set_length:function(a){if(0==this.get_length())return this._length;this._p1.to(this._p0.x+this._vector.x*(a/this.get_length()),this._p0.y+this._vector.y*(a/this.get_length()));this._calcProperties();return this._length},get_length:function(){return this._length},get_parametricDenom:function(){return this._parametricDenom},get_centerY:function(){return this._p0.y+this._vector.y/2},get_centerX:function(){return this._p0.x+
this._vector.x/2},get_center:function(){return h.WorkinPoint.request(this._p0.x+this._vector.x/2,this._p0.y+this._vector.y/2)},get_vector:function(){return this._vector},get_normal:function(){return this._normal},get_yIntercept:function(){return this._yIntercept},get_slope:function(){return this._slope},get_p1:function(){return this._p1},get_p0:function(){return this._p0},dispose:function(){this._p0.dispose();this._p0=null;this._p1.dispose();this._p1=null;this._normal.dispose();this._normal=null;this._vector.dispose();this._vector=null;this._parametricDenom.dispose();this._parametricDenom=null;e.pooling.PoolStrictBase.prototype.dispose.call(this)},init:function(a,b,f,c){this._p0=h.WorkinPoint.request();this._p1=h.WorkinPoint.request();this._normal=h.WorkinPoint.request();this._vector=h.WorkinPoint.request();this._parametricDenom=h.WorkinPoint.request();this.toFloats(a,b,f,c);this._calcProperties();return this},build:function(a){return e.pooling.PoolStrictBase.prototype.build.call(this,a)},poolId:function(){return"WorkinLine"},__class__:h.WorkinLine,__properties__:{get_p0:"get_p0",get_p1:"get_p1",get_slope:"get_slope",get_yIntercept:"get_yIntercept",get_normal:"get_normal",get_vector:"get_vector",get_center:"get_center",get_centerX:"get_centerX",get_centerY:"get_centerY",get_parametricDenom:"get_parametricDenom",set_length:"set_length",get_length:"get_length"}});h.WorkinMath=function(){};l["com.workinman.math.WorkinMath"]=h.WorkinMath;h.WorkinMath.__name__=["com","workinman","math","WorkinMath"];h.WorkinMath.diffBetweenPointsCopy=function(a,b){return a.subtractPointCopy(b)};h.WorkinMath.distBetweenPoints=function(a,b){return Math.abs(Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y)))};h.WorkinMath.diffBetweenAB=function(a,b,f,c,d){d.x=f-a;d.y=c-b;d.calculateLength()};h.WorkinMath.distBetweenAB=function(a,b,f,c){return Math.abs(Math.sqrt((a-f)*(a-f)+(b-c)*(b-c)))};h.WorkinPoint=function(){};l["com.workinman.math.WorkinPoint"]=h.WorkinPoint;h.WorkinPoint.__name__=["com","workinman","math","WorkinPoint"];h.WorkinPoint.__interfaces__=[e.pooling.IStrictPoolable];h.WorkinPoint.request=function(a,b,f){null==f&&(f=0);null==b&&(b=0);null==a&&(a=0);e.WorkinCloud.get_instance().get_pool().initPool("WorkinPoint",h.WorkinPoint);return e.WorkinCloud.get_instance().get_pool().requestObject("WorkinPoint").init(a,b,f)};h.WorkinPoint.__super__=e.pooling.PoolStrictBase;h.WorkinPoint.prototype=v(e.pooling.PoolStrictBase.prototype,{dot:function(a){return this.x*a.x+this.y*a.y},toString:function(){return"{ WorkinPoint : "+
this.x+" , "+this.y+" , "+this.z+" , len: "+this._length+"  }"},get_normalizedMagnitude:function(){var a=this.normalizeCopy(),b=Math.sqrt(a.x*a.x+a.y*a.y);a.dispose();return b},rotateCopy:function(a){var b=Math.cos(a*Math.PI/180),a=Math.sin(a*Math.PI/180);return h.WorkinPoint.request(this.x*b-this.y*a,this.x*a-this.y*b)},getAngleBetween:function(a){return 0==a.get_length()||0==this.get_length()?0:180/Math.PI*Math.acos((a.x*this.x+a.y*this.y)/(a.get_length()*this.get_length()))},rotateTo:function(a){this.rotate(a-
this.get_angle())},rotate:function(a){a*=Math.PI/180;this._workFloat=this.x*Math.cos(a)-this.y*Math.sin(a);this.y=this.y*Math.cos(a)+this.x*Math.sin(a);this.x=this._workFloat},calculateLength:function(){this._length=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},pseudoCross:function(a){a.to(this.y,-this.x,this.z)},normalizeCopyTo:function(a){if(0==this._length)return h.WorkinPoint.request(0,0,0);this._workFloat=a/this._length;return h.WorkinPoint.request(this.x*this._workFloat,this.y*this._workFloat,this.z*this._workFloat)},normalizeCopy:function(){return 0==this._length?h.WorkinPoint.request(0,0,0):h.WorkinPoint.request(this.x/this._length,this.y/this._length,this.z/this._length)},normalizeTo:function(a){this.set_length(a)},normalize:function(){0!=this._length&&(this.x/=this._length,this.y/=this._length,this.z/=this._length,this.calculateLength())},reverseCopy:function(){return h.WorkinPoint.request(-1*this.x,-1*this.y,-1*this.z)},set_length:function(a){if(0==this._length||0>=a)return this.to(0,0),this._length;this.multiply(a/this._length);return this._length},get_length:function(){return this._length},equals:function(a){return this.x==a.x&&this.y==a.y&&this.z==a.z},copyAndResize:function(a){return 0==a?h.WorkinPoint.request(0,0):this.multiplyCopy(a/this._length)},copy:function(){return h.WorkinPoint.request(this.x,this.y,this.z)},reverse:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z},divideCopy:function(a){return h.WorkinPoint.request(this.x/a,this.y/a,this.z/a)},divide:function(a){this.x/=a;this.y/=a;this.z/=a;this.clean();this.calculateLength()},multiplyCopy:function(a){return h.WorkinPoint.request(this.x*a,this.y*a,this.z*a)},multiply:function(a){this.x*=a;this.y*=a;this.z*=a;this.clean();this.calculateLength()},subtractPointCopy:function(a){return h.WorkinPoint.request(this.x-a.x,this.y-a.y,this.z-a.z)},subtractCopy:function(a,b,f){null==f&&(f=0);return h.WorkinPoint.request(this.x-a,this.y-b,this.z-f)},subtractPoint:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;this.calculateLength()},subtract:function(a,b,f){null==f&&(f=0);this.x-=a;this.y-=b;this.z-=f;this.calculateLength()},addPointCopy:function(a){return h.WorkinPoint.request(this.x+a.x,this.y+a.y,this.z+a.z)},addCopy:function(a,b,f){null==f&&(f=0);return h.WorkinPoint.request(this.x+a,this.y+b,this.z+f)},addPoint:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.calculateLength()},add:function(a,b,f){null==f&&(f=0);this.x+=a;this.y+=b;this.z+=f;this.calculateLength()},toPoint:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.calculateLength()},to:function(a,b,f){null==f&&(f=0);this.x=a;this.y=b;this.z=f;this.calculateLength();return this},clean:function(){this.x=Math.round(1E3*this.x)/1E3;this.y=Math.round(1E3*this.y)/1E3;this.z=Math.round(1E3*this.z)/1E3},get_angle:function(){return 180*Math.atan2(this.y,this.x)/Math.PI},init:function(a,b,f){return this.to(a,b,f)},poolId:function(){return"WorkinPoint"},__class__:h.WorkinPoint,__properties__:{get_angle:"get_angle",set_length:"set_length",get_length:"get_length",get_normalizedMagnitude:"get_normalizedMagnitude"}});h.tween={};h.tween.PennerEasing=function(){};l["com.workinman.math.tween.PennerEasing"]=h.tween.PennerEasing;h.tween.PennerEasing.__name__=["com","workinman","math","tween","PennerEasing"];h.tween.PennerEasing.easeInQuad=function(a,b,f,c){return f*(a/=c)*a+b};h.tween.PennerEasing.easeOutQuad=function(a,b,f,c){return-f*(a/=c)*(a-2)+b};h.tween.PennerEasing.easeInOutQuad=function(a,b,f,c){return 1>(a/=c/2)?f/2*a*a+b:-f/2*(--a*(a-2)-1)+b};h.tween.PennerEasing.easeInExpo=function(a,b,f,c){return 0==a?b:f*Math.pow(2,10*(a/c-1))+b};h.tween.PennerEasing.easeOutExpo=function(a,b,f,c){return a==c?b+f:f*(-Math.pow(2,-10*a/c)+1)+b};h.tween.PennerEasing.easeInOutExpo=function(a,b,f,c){return 0==a?b:a==c?b+f:1>(a/=c/2)?f/2*Math.pow(2,10*(a-1))+b:f/2*(-Math.pow(2,-10*--a)+2)+b};h.tween.PennerEasing.easeInElastic=function(a,b,f,c){return h.tween.PennerEasing.easeInElasticL(a,b,f,c)};h.tween.PennerEasing.easeInElasticL=function(a,b,f,c,d,e){null==e&&(e=-0.123456);null==d&&(d=-0.123456);if(0==a)return b;if(1==(a/=c))return b+f;-0.123456==e&&(e=0.3*c);-0.123456==d||d<Math.abs(f)?(d=f,f=e/4):f=e/(2*Math.PI)*Math.asin(f/d);return-(d*Math.pow(2,10*(a-=1))*Math.sin((a*c-f)*2*Math.PI/e))+b};h.tween.PennerEasing.easeOutElastic=function(a,b,f,c){return h.tween.PennerEasing.easeOutElasticL(a,b,f,c)};h.tween.PennerEasing.easeOutElasticL=function(a,b,f,c,d,e){null==e&&(e=-0.123456);null==d&&(d=-0.123456);var g;if(0==a)return b;if(1==(a/=c))return b+f;-0.123456==e&&(e=0.3*c);-0.123456==d||d<Math.abs(f)?(d=f,g=e/4):g=e/(2*Math.PI)*Math.asin(f/d);return d*Math.pow(2,-10*a)*Math.sin((a*c-g)*2*Math.PI/e)+f+b};h.tween.PennerEasing.easeInOutElastic=function(a,b,f,c){return h.tween.PennerEasing.easeInOutElasticL(a,b,f,c)};h.tween.PennerEasing.easeInOutElasticL=function(a,b,f,c,d,e){null==e&&(e=-0.123456);null==d&&(d=-0.123456);var g;if(0==a)return b;if(2==(a/=c/2))return b+f;-0.123456==e&&(e=c*0.3*1.5);-0.123456==d||d<Math.abs(f)?(d=f,g=e/4):g=e/(2*Math.PI)*Math.asin(f/d);return 1>a?-0.5*d*Math.pow(2,10*(a-=1))*Math.sin((a*c-g)*2*Math.PI/e)+b:0.5*d*Math.pow(2,-10*(a-=1))*Math.sin((a*c-g)*2*Math.PI/e)+f+b};h.tween.PennerEasing.easeInBack=function(a,b,f,c){return h.tween.PennerEasing.easeInBackL(a,b,f,c)};h.tween.PennerEasing.easeInBackL=function(a,b,f,c,d){null==d&&(d=-0.123456);-0.123456==d&&(d=1.70158);return f*(a/=c)*a*((d+1)*a-d)+b};h.tween.PennerEasing.easeInOutBack=function(a,b,f,c){return h.tween.PennerEasing.easeInOutBackL(a,b,f,c)};h.tween.PennerEasing.easeInOutBackL=function(a,b,f,c,d){null==d&&(d=-0.123456);-0.123456==d&&(d=1.70158);return 1>(a/=c/2)?f/2*a*a*(((d*=1.525)+1)*a-d)+b:f/2*((a-=2)*a*(((d*=1.525)+1)*a+d)+2)+b};h.tween.PennerEasing.easeOutBounce=function(a,b,f,c){return(a/=c)<1/2.75?f*7.5625*a*a+b:a<2/2.75?f*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?f*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:f*(7.5625*(a-=2.625/2.75)*a+0.984375)+b};h.tween.PennerEasing.easeInBounce=function(a,b,f,c){return f-h.tween.PennerEasing.easeOutBounce(c-a,0,f,c)+b};h.tween.PennerEasing.easeInOutBounce=function(a,b,f,c){return a<c/2?0.5*h.tween.PennerEasing.easeInBounce(2*a,0,f,c)+b:0.5*h.tween.PennerEasing.easeOutBounce(2*a-c,0,f,c)+0.5*f+b};h.tween.PennerEasing.easeInCubic=function(a,b,f,c){return f*(a/=c)*a*a+b};h.tween.PennerEasing.easeOutCubic=function(a,b,f,c){return f*((a=a/c-1)*a*a+1)+b};h.tween.PennerEasing.easeInOutCubic=function(a,b,f,c){return 1>(a/=c/2)?f/2*a*a*a+b:f/2*((a-=2)*a*a+2)+b};h.tween.PennerEasing.easeInQuart=function(a,b,f,c){return f*(a/=c)*a*a*a+b};h.tween.PennerEasing.easeOutQuart=function(a,b,f,c){return-f*((a=a/c-1)*a*a*a-1)+b};h.tween.PennerEasing.easeInOutQuart=function(a,b,f,c){return 1>(a/=c/2)?f/2*a*a*a*a+b:-f/2*((a-=2)*a*a*a-2)+b};h.tween.PennerEasing.easeInQuint=function(a,b,f,c){return f*(a/=c)*a*a*a*a+b};h.tween.PennerEasing.easeOutQuint=function(a,b,f,c){return f*((a=a/c-1)*a*a*a*a+1)+b};h.tween.PennerEasing.easeInOutQuint=function(a,b,f,c){return 1>(a/=c/2)?f/2*a*a*a*a*a+b:f/2*((a-=2)*a*a*a*a+2)+b};h.tween.PennerEasing.easeInSine=function(a,b,f,c){return-f*Math.cos(a/c*(Math.PI/2))+f+b};h.tween.PennerEasing.easeOutSine=function(a,b,f,c){return f*Math.sin(a/c*(Math.PI/2))+b};h.tween.PennerEasing.easeInOutSine=function(a,b,f,c){return-f/2*(Math.cos(Math.PI*a/c)-1)+b};h.tween.PennerEasing.easeInCirc=function(a,b,f,c){return-f*(Math.sqrt(1-(a/=c)*a)-1)+b};h.tween.PennerEasing.easeOutCirc=function(a,b,f,c){return f*Math.sqrt(1-(a=a/c-1)*a)+b};h.tween.PennerEasing.easeInOutCirc=function(a,b,f,c){return 1>(a/=c/2)?-f/2*(Math.sqrt(1-a*a)-1)+b:f/2*(Math.sqrt(1-(a-=2)*a)+1)+b};h.tween.Ease=l["com.workinman.math.tween.Ease"]={__ename__:["com","workinman","math","tween","Ease"],__constructs__:"EASE_IN,EASE_QUAD_IN,EASE_OUT,EASE_QUAD_OUT,EASE,EASE_QUAD,EASE_LINEAR,EASE_EXPO,EASE_EXPO_IN,EASE_EXPO_OUT,EASE_ELASTIC,EASE_ELASTIC_IN,EASE_ELASTIC_OUT,EASE_BUMP,EASE_BUMP_IN,EASE_BUMP_OUT,EASE_BOUNCE,EASE_BOUNCE_IN,EASE_BOUNCE_OUT,EASE_CUBIC,EASE_CUBIC_IN,EASE_CUBIC_OUT,EASE_SPACE,EASE_SPACE_IN,EASE_SPACE_OUT,EASE_BLAST,EASE_BLAST_IN,EASE_BLAST_OUT,EASE_WAVE,EASE_WAVE_IN,EASE_WAVE_OUT,EASE_CIRCLE,EASE_CIRCLE_IN,EASE_CIRCLE_OUT".split(",")};h.tween.Ease.EASE_IN=["EASE_IN",0];h.tween.Ease.EASE_IN.toString=o;h.tween.Ease.EASE_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_QUAD_IN=["EASE_QUAD_IN",1];h.tween.Ease.EASE_QUAD_IN.toString=o;h.tween.Ease.EASE_QUAD_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_OUT=["EASE_OUT",2];h.tween.Ease.EASE_OUT.toString=o;h.tween.Ease.EASE_OUT.__enum__=h.tween.Ease;h.tween.Ease.EASE_QUAD_OUT=["EASE_QUAD_OUT",3];h.tween.Ease.EASE_QUAD_OUT.toString=o;h.tween.Ease.EASE_QUAD_OUT.__enum__=h.tween.Ease;h.tween.Ease.EASE=["EASE",4];h.tween.Ease.EASE.toString=o;h.tween.Ease.EASE.__enum__=h.tween.Ease;h.tween.Ease.EASE_QUAD=["EASE_QUAD",5];h.tween.Ease.EASE_QUAD.toString=o;h.tween.Ease.EASE_QUAD.__enum__=h.tween.Ease;h.tween.Ease.EASE_LINEAR=["EASE_LINEAR",6];h.tween.Ease.EASE_LINEAR.toString=o;h.tween.Ease.EASE_LINEAR.__enum__=h.tween.Ease;h.tween.Ease.EASE_EXPO=["EASE_EXPO",7];h.tween.Ease.EASE_EXPO.toString=o;h.tween.Ease.EASE_EXPO.__enum__=h.tween.Ease;h.tween.Ease.EASE_EXPO_IN=["EASE_EXPO_IN",8];h.tween.Ease.EASE_EXPO_IN.toString=o;h.tween.Ease.EASE_EXPO_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_EXPO_OUT=["EASE_EXPO_OUT",9];h.tween.Ease.EASE_EXPO_OUT.toString=o;h.tween.Ease.EASE_EXPO_OUT.__enum__=h.tween.Ease;h.tween.Ease.EASE_ELASTIC=["EASE_ELASTIC",10];h.tween.Ease.EASE_ELASTIC.toString=o;h.tween.Ease.EASE_ELASTIC.__enum__=h.tween.Ease;h.tween.Ease.EASE_ELASTIC_IN=["EASE_ELASTIC_IN",11];h.tween.Ease.EASE_ELASTIC_IN.toString=o;h.tween.Ease.EASE_ELASTIC_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_ELASTIC_OUT=["EASE_ELASTIC_OUT",12];h.tween.Ease.EASE_ELASTIC_OUT.toString=o;h.tween.Ease.EASE_ELASTIC_OUT.__enum__=h.tween.Ease;h.tween.Ease.EASE_BUMP=["EASE_BUMP",13];h.tween.Ease.EASE_BUMP.toString=o;h.tween.Ease.EASE_BUMP.__enum__=h.tween.Ease;h.tween.Ease.EASE_BUMP_IN=["EASE_BUMP_IN",14];h.tween.Ease.EASE_BUMP_IN.toString=o;h.tween.Ease.EASE_BUMP_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_BUMP_OUT=["EASE_BUMP_OUT",15];h.tween.Ease.EASE_BUMP_OUT.toString=o;h.tween.Ease.EASE_BUMP_OUT.__enum__=h.tween.Ease;h.tween.Ease.EASE_BOUNCE=["EASE_BOUNCE",16];h.tween.Ease.EASE_BOUNCE.toString=o;h.tween.Ease.EASE_BOUNCE.__enum__=h.tween.Ease;h.tween.Ease.EASE_BOUNCE_IN=["EASE_BOUNCE_IN",17];h.tween.Ease.EASE_BOUNCE_IN.toString=o;h.tween.Ease.EASE_BOUNCE_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_BOUNCE_OUT=["EASE_BOUNCE_OUT",18];h.tween.Ease.EASE_BOUNCE_OUT.toString=o;h.tween.Ease.EASE_BOUNCE_OUT.__enum__=h.tween.Ease;h.tween.Ease.EASE_CUBIC=["EASE_CUBIC",19];h.tween.Ease.EASE_CUBIC.toString=o;h.tween.Ease.EASE_CUBIC.__enum__=h.tween.Ease;h.tween.Ease.EASE_CUBIC_IN=["EASE_CUBIC_IN",20];h.tween.Ease.EASE_CUBIC_IN.toString=o;h.tween.Ease.EASE_CUBIC_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_CUBIC_OUT=["EASE_CUBIC_OUT",21];h.tween.Ease.EASE_CUBIC_OUT.toString=o;h.tween.Ease.EASE_CUBIC_OUT.__enum__=h.tween.Ease;h.tween.Ease.EASE_SPACE=["EASE_SPACE",22];h.tween.Ease.EASE_SPACE.toString=o;h.tween.Ease.EASE_SPACE.__enum__=h.tween.Ease;h.tween.Ease.EASE_SPACE_IN=["EASE_SPACE_IN",23];h.tween.Ease.EASE_SPACE_IN.toString=o;h.tween.Ease.EASE_SPACE_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_SPACE_OUT=["EASE_SPACE_OUT",24];h.tween.Ease.EASE_SPACE_OUT.toString=o;h.tween.Ease.EASE_SPACE_OUT.__enum__=h.tween.Ease;h.tween.Ease.EASE_BLAST=["EASE_BLAST",25];h.tween.Ease.EASE_BLAST.toString=o;h.tween.Ease.EASE_BLAST.__enum__=h.tween.Ease;h.tween.Ease.EASE_BLAST_IN=["EASE_BLAST_IN",26];h.tween.Ease.EASE_BLAST_IN.toString=o;h.tween.Ease.EASE_BLAST_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_BLAST_OUT=["EASE_BLAST_OUT",27];h.tween.Ease.EASE_BLAST_OUT.toString=o;h.tween.Ease.EASE_BLAST_OUT.__enum__=h.tween.Ease;h.tween.Ease.EASE_WAVE=["EASE_WAVE",28];h.tween.Ease.EASE_WAVE.toString=o;h.tween.Ease.EASE_WAVE.__enum__=h.tween.Ease;h.tween.Ease.EASE_WAVE_IN=["EASE_WAVE_IN",29];h.tween.Ease.EASE_WAVE_IN.toString=o;h.tween.Ease.EASE_WAVE_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_WAVE_OUT=["EASE_WAVE_OUT",30];h.tween.Ease.EASE_WAVE_OUT.toString=o;h.tween.Ease.EASE_WAVE_OUT.__enum__=h.tween.Ease;h.tween.Ease.EASE_CIRCLE=["EASE_CIRCLE",31];h.tween.Ease.EASE_CIRCLE.toString=o;h.tween.Ease.EASE_CIRCLE.__enum__=h.tween.Ease;h.tween.Ease.EASE_CIRCLE_IN=["EASE_CIRCLE_IN",32];h.tween.Ease.EASE_CIRCLE_IN.toString=o;h.tween.Ease.EASE_CIRCLE_IN.__enum__=h.tween.Ease;h.tween.Ease.EASE_CIRCLE_OUT=["EASE_CIRCLE_OUT",33];h.tween.Ease.EASE_CIRCLE_OUT.toString=o;h.tween.Ease.EASE_CIRCLE_OUT.__enum__=h.tween.Ease;h.tween.PennerManager=function(){};l["com.workinman.math.tween.PennerManager"]=h.tween.PennerManager;h.tween.PennerManager.__name__=["com","workinman","math","tween","PennerManager"];h.tween.PennerManager.getEaseFunction=function(a){switch(a[1]){case 0:case 1:return h.tween.PennerManager._tweenEaseIn;case 2:case 3:return h.tween.PennerManager._tweenEaseOut;case 4:case 5:return h.tween.PennerManager._tweenEaseBoth;case 7:return h.tween.PennerManager._tweenExpoBoth;case 8:return h.tween.PennerManager._tweenExpoIn;case 9:return h.tween.PennerManager._tweenExpoOut;case 10:return h.tween.PennerManager._tweenElasticBoth;case 11:return h.tween.PennerManager._tweenElasticIn;case 12:return h.tween.PennerManager._tweenElasticOut;case 13:return h.tween.PennerManager._tweenBumpBoth;case 14:return h.tween.PennerManager._tweenBumpIn;case 15:return h.tween.PennerManager._tweenBumpBoth;case 16:return h.tween.PennerManager._tweenBounceBoth;case 17:return h.tween.PennerManager._tweenBounceIn;case 18:return h.tween.PennerManager._tweenBounceOut;case 19:return h.tween.PennerManager._tweenCubicBoth;case 20:return h.tween.PennerManager._tweenCubicIn;case 21:return h.tween.PennerManager._tweenCubicOut;case 22:return h.tween.PennerManager._tweenSpaceBoth;case 23:return h.tween.PennerManager._tweenSpaceIn;case 24:return h.tween.PennerManager._tweenSpaceOut;case 25:return h.tween.PennerManager._tweenBlastBoth;case 26:return h.tween.PennerManager._tweenBlastIn;case 27:return h.tween.PennerManager._tweenBlastOut;case 28:return h.tween.PennerManager._tweenWaveBoth;case 29:return h.tween.PennerManager._tweenWaveIn;case 30:return h.tween.PennerManager._tweenWaveOut;case 31:return h.tween.PennerManager._tweenCircleBoth;case 32:return h.tween.PennerManager._tweenCircleIn;case 33:return h.tween.PennerManager._tweenCircleOut;case 6:return h.tween.PennerManager._tweenLinear}};h.tween.PennerManager._tweenLinear=function(a,b,f,c){return a+f/c*b};h.tween.PennerManager._tweenEaseBoth=function(a,b,f,c){return h.tween.PennerEasing.easeInOutQuad(f,a,b,c)};h.tween.PennerManager._tweenEaseIn=function(a,b,f,c){return h.tween.PennerEasing.easeInQuad(f,a,b,c)};h.tween.PennerManager._tweenEaseOut=function(a,b,f,c){return h.tween.PennerEasing.easeOutQuad(f,a,b,c)};h.tween.PennerManager._tweenExpoBoth=function(a,b,f,c){return h.tween.PennerEasing.easeInOutExpo(f,a,b,c)};h.tween.PennerManager._tweenExpoIn=function(a,b,f,c){return h.tween.PennerEasing.easeInExpo(f,a,b,c)};h.tween.PennerManager._tweenExpoOut=function(a,b,f,c){return h.tween.PennerEasing.easeOutExpo(f,a,b,c)};h.tween.PennerManager._tweenElasticBoth=function(a,b,f,c){return h.tween.PennerEasing.easeInOutElastic(f,a,b,c)};h.tween.PennerManager._tweenElasticIn=function(a,b,f,c){return h.tween.PennerEasing.easeInElastic(f,a,b,c)};h.tween.PennerManager._tweenElasticOut=function(a,b,f,c){return h.tween.PennerEasing.easeOutElastic(f,a,b,c)};h.tween.PennerManager._tweenBumpBoth=function(a,b,f,c){return h.tween.PennerEasing.easeInOutBack(f,a,b,c)};h.tween.PennerManager._tweenBumpIn=function(a,b,f,c){return h.tween.PennerEasing.easeInBack(f,a,b,c)};h.tween.PennerManager._tweenBounceBoth=function(a,b,f,c){return h.tween.PennerEasing.easeInOutBounce(f,a,b,c)};h.tween.PennerManager._tweenBounceIn=function(a,b,f,c){return h.tween.PennerEasing.easeInBounce(f,a,b,c)};h.tween.PennerManager._tweenBounceOut=function(a,b,f,c){return h.tween.PennerEasing.easeOutBounce(f,a,b,c)};h.tween.PennerManager._tweenCubicBoth=function(a,b,f,c){return h.tween.PennerEasing.easeInOutCubic(f,a,b,c)};h.tween.PennerManager._tweenCubicIn=function(a,b,f,c){return h.tween.PennerEasing.easeInCubic(f,a,b,c)};h.tween.PennerManager._tweenCubicOut=function(a,b,f,c){return h.tween.PennerEasing.easeOutCubic(f,a,b,c)};h.tween.PennerManager._tweenSpaceBoth=function(a,b,f,c){return h.tween.PennerEasing.easeInOutQuart(f,a,b,c)};h.tween.PennerManager._tweenSpaceIn=function(a,b,f,c){return h.tween.PennerEasing.easeInQuart(f,a,b,c)};h.tween.PennerManager._tweenSpaceOut=function(a,b,f,c){return h.tween.PennerEasing.easeOutQuart(f,a,b,c)};h.tween.PennerManager._tweenBlastBoth=function(a,b,f,c){return h.tween.PennerEasing.easeInOutQuint(f,a,b,c)};h.tween.PennerManager._tweenBlastIn=function(a,b,f,c){return h.tween.PennerEasing.easeInQuint(f,a,b,c)};h.tween.PennerManager._tweenBlastOut=function(a,b,f,c){return h.tween.PennerEasing.easeOutQuint(f,a,b,c)};h.tween.PennerManager._tweenWaveBoth=function(a,b,f,c){return h.tween.PennerEasing.easeInOutSine(f,a,b,c)};h.tween.PennerManager._tweenWaveIn=function(a,b,f,c){return h.tween.PennerEasing.easeInSine(f,a,b,c)};h.tween.PennerManager._tweenWaveOut=function(a,b,f,c){return h.tween.PennerEasing.easeOutSine(f,a,b,c)};h.tween.PennerManager._tweenCircleBoth=function(a,b,f,c){return h.tween.PennerEasing.easeInOutCirc(f,a,b,c)};h.tween.PennerManager._tweenCircleIn=function(a,b,f,c){return h.tween.PennerEasing.easeInCirc(f,a,b,c)};h.tween.PennerManager._tweenCircleOut=function(a,b,f,c){return h.tween.PennerEasing.easeOutCirc(f,a,b,c)};h.tween.TWEEN_DIR=l["com.workinman.math.tween.TWEEN_DIR"]={__ename__:["com","workinman","math","tween","TWEEN_DIR"],__constructs__:"TOP,TOP_RIGHT,RIGHT,BOTTOM_RIGHT,BOTTOM,BOTTOM_LEFT,LEFT,TOP_LEFT".split(",")};h.tween.TWEEN_DIR.TOP=["TOP",0];h.tween.TWEEN_DIR.TOP.toString=o;h.tween.TWEEN_DIR.TOP.__enum__=h.tween.TWEEN_DIR;h.tween.TWEEN_DIR.TOP_RIGHT=["TOP_RIGHT",1];h.tween.TWEEN_DIR.TOP_RIGHT.toString=o;h.tween.TWEEN_DIR.TOP_RIGHT.__enum__=h.tween.TWEEN_DIR;h.tween.TWEEN_DIR.RIGHT=["RIGHT",2];h.tween.TWEEN_DIR.RIGHT.toString=o;h.tween.TWEEN_DIR.RIGHT.__enum__=h.tween.TWEEN_DIR;h.tween.TWEEN_DIR.BOTTOM_RIGHT=["BOTTOM_RIGHT",3];h.tween.TWEEN_DIR.BOTTOM_RIGHT.toString=o;h.tween.TWEEN_DIR.BOTTOM_RIGHT.__enum__=h.tween.TWEEN_DIR;h.tween.TWEEN_DIR.BOTTOM=["BOTTOM",4];h.tween.TWEEN_DIR.BOTTOM.toString=o;h.tween.TWEEN_DIR.BOTTOM.__enum__=h.tween.TWEEN_DIR;h.tween.TWEEN_DIR.BOTTOM_LEFT=["BOTTOM_LEFT",5];h.tween.TWEEN_DIR.BOTTOM_LEFT.toString=o;h.tween.TWEEN_DIR.BOTTOM_LEFT.__enum__=h.tween.TWEEN_DIR;h.tween.TWEEN_DIR.LEFT=["LEFT",6];h.tween.TWEEN_DIR.LEFT.toString=o;h.tween.TWEEN_DIR.LEFT.__enum__=h.tween.TWEEN_DIR;h.tween.TWEEN_DIR.TOP_LEFT=["TOP_LEFT",7];h.tween.TWEEN_DIR.TOP_LEFT.toString=o;h.tween.TWEEN_DIR.TOP_LEFT.__enum__=h.tween.TWEEN_DIR;h.tween.WorkinTweenUtils=function(){};l["com.workinman.math.tween.WorkinTweenUtils"]=h.tween.WorkinTweenUtils;h.tween.WorkinTweenUtils.__name__=["com","workinman","math","tween","WorkinTweenUtils"];h.tween.WorkinTweenUtils.easeBounceIn=function(a,b,f,c){null==c&&(c=0);null==f&&(f=!0);h.tween.WorkinTweenUtils._storeScaleFlipState(a);f&&(a.get_renderable().visible=!0,a.get_renderable().scaleX=0.1*h.tween.WorkinTweenUtils._flipX,a.get_renderable().scaleY=0.1*h.tween.WorkinTweenUtils._flipY,a.get_renderable().alpha=0);b.tween(a.get_renderable(),0.15,{scaleX:1.1*h.tween.WorkinTweenUtils._flipX,scaleY:1.1*h.tween.WorkinTweenUtils._flipY,alpha:1},!0,h.tween.Ease.EASE_OUT,c);return b.tween(a.get_renderable(),0.15,{scaleX:h.tween.WorkinTweenUtils._flipX,scaleY:h.tween.WorkinTweenUtils._flipY},!1,h.tween.Ease.EASE_IN)};h.tween.WorkinTweenUtils.easeBounceOut=function(a,b,f,c){null==c&&(c=0);null==f&&(f=!1);h.tween.WorkinTweenUtils._storeScaleFlipState(a);f&&(a.get_renderable().visible=!0,a.get_renderable().scaleX=h.tween.WorkinTweenUtils._flipX,a.get_renderable().scaleY=h.tween.WorkinTweenUtils._flipY,a.get_renderable().alpha=1);b.tween(a.get_renderable(),0.15,{scaleX:1.1*h.tween.WorkinTweenUtils._flipX,scaleY:1.1*h.tween.WorkinTweenUtils._flipY},!0,h.tween.Ease.EASE_OUT,c);return b.tween(a.get_renderable(),0.15,{scaleX:0.1*h.tween.WorkinTweenUtils._flipX,scaleY:0.1*h.tween.WorkinTweenUtils._flipY,alpha:0},!1,h.tween.Ease.EASE_IN)};h.tween.WorkinTweenUtils.easeSlideInFromDir=function(a,b,f,c){null==c&&(c=0);h.tween.WorkinTweenUtils.get__workPoint().toPoint(a.get_pos());h.tween.WorkinTweenUtils._modifyWorkPointByDir(f);return h.tween.WorkinTweenUtils.easeSlideIn(a,b,h.tween.WorkinTweenUtils.get__workPoint().x,h.tween.WorkinTweenUtils.get__workPoint().y,c)};h.tween.WorkinTweenUtils.easeSlideIn=function(a,b,f,c,d,e,g){null==e&&(e=0.5);null==d&&(d=0);h.tween.WorkinTweenUtils.get__workPoint().toPoint(a.get_pos());a.get_pos().x=f;a.get_pos().y=c;a.get_renderable().visible=!0;a.get_renderable().alpha=1;null==g&&(g=h.tween.Ease.EASE_OUT);return b.tween(a.get_pos(),e,{x:h.tween.WorkinTweenUtils.get__workPoint().x,y:h.tween.WorkinTweenUtils.get__workPoint().y},!0,g,d)};h.tween.WorkinTweenUtils.easeSlideOut=function(a,b,f,c,d,e,g){null==e&&(e=0.5);null==d&&(d=0);a.get_renderable().visible=!0;a.get_renderable().alpha=1;null==g&&(g=h.tween.Ease.EASE_OUT);return b.tween(a.get_pos(),e,{x:f,y:c},!0,g,d)};h.tween.WorkinTweenUtils.easeSlideOutToDir=function(a,b,f,c){null==c&&(c=0);h.tween.WorkinTweenUtils.get__workPoint().toPoint(a.get_pos());h.tween.WorkinTweenUtils._modifyWorkPointByDir(f);return h.tween.WorkinTweenUtils.easeSlideOut(a,b,h.tween.WorkinTweenUtils.get__workPoint().x,h.tween.WorkinTweenUtils.get__workPoint().y,c)};h.tween.WorkinTweenUtils._storeScaleFlipState=function(a){h.tween.WorkinTweenUtils._flipX=0>a.get_renderable().scaleX?-1:1;h.tween.WorkinTweenUtils._flipY=0>a.get_renderable().scaleY?-1:1};h.tween.WorkinTweenUtils.get__workPoint=function(){null==h.tween.WorkinTweenUtils.__workPoint&&(h.tween.WorkinTweenUtils.__workPoint=h.WorkinPoint.request());return h.tween.WorkinTweenUtils.__workPoint};h.tween.WorkinTweenUtils._modifyWorkPointByDir=function(a){switch(a[1]){case 3:case 2:case 1:h.tween.WorkinTweenUtils.get__workPoint().x+=c.ConstantsApp.STAGE_WIDTH;break;case 5:case 6:case 7:h.tween.WorkinTweenUtils.get__workPoint().x-=c.ConstantsApp.STAGE_WIDTH}switch(a[1]){case 7:case 0:case 1:h.tween.WorkinTweenUtils.get__workPoint().y-=c.ConstantsApp.STAGE_HEIGHT;break;case 5:case 4:case 3:h.tween.WorkinTweenUtils.get__workPoint().y+=c.ConstantsApp.STAGE_HEIGHT}};h.tween.WorkinTweener=function(){};l["com.workinman.math.tween.WorkinTweener"]=h.tween.WorkinTweener;h.tween.WorkinTweener.__name__=["com","workinman","math","tween","WorkinTweener"];h.tween.WorkinTweener.__interfaces__=[e.pooling.IStrictPoolable];h.tween.WorkinTweener.__properties__={get__nullTarget:"get__nullTarget"};h.tween.WorkinTweener.request=function(){e.WorkinCloud.get_instance().get_pool().initPool("WorkinTweener",h.tween.WorkinTweener);return e.WorkinCloud.get_instance().get_pool().requestObject("WorkinTweener")};h.tween.WorkinTweener.get__nullTarget=function(){null==h.tween.WorkinTweener.__nullTarget&&(h.tween.WorkinTweener.__nullTarget={});return h.tween.WorkinTweener.__nullTarget};h.tween.WorkinTweener.__super__=e.pooling.PoolStrictBase;h.tween.WorkinTweener.prototype=v(e.pooling.PoolStrictBase.prototype,{stopAllTweens:function(){for(;0<this._targets.length;)this._targets.pop().dispose()},stop:function(a){for(this._i=this._targets.length;0<this._i;)if(this._i--,this._targets[this._i].get_target()==a){this._targets[this._i].dispose();this._targets.splice(this._i,1);break}},timer:function(a,b){null==b&&(b=0);return this.tween(h.tween.WorkinTweener.get__nullTarget(),a,h.tween.WorkinTweener.get__nullTarget(),!0,null,b,"tim"+h.tween.WorkinTweener._uniqueTimer++)},tween:function(a,b,f,c,d,e,g){null==g&&(g="def");null==e&&(e=0);null==c&&(c=!1);b=h.tween.WorkinTweenDef.request(a,b,f,d,e);f=0;for(d=this._targets;f<d.length;)if(e=d[f],++f,e.get_target()==a)return c&&e.clearTweens(g),e.addTween(b,g),b;a=h.tween.WorkinTweenTracker.request(a);this._targets.push(a);a.addTween(b,g);return b},update:function(a){for(this._i=this._targets.length;0<this._i--;)this._targets[this._i].update(a),this._targets[this._i].get_isComplete()&&(this._targets[this._i].dispose(),this._targets.splice(this._i,1))},isTweening:function(a){for(var b=0,f=this._targets;b<f.length;){var c=f[b];++b;if(c.get_target()==a)return!0}return!1},destroy:function(){this._targets=null;e.pooling.PoolStrictBase.prototype.destroy.call(this)},dispose:function(){for(;0<this._targets.length;)this._targets.pop().dispose();e.pooling.PoolStrictBase.prototype.dispose.call(this)},build:function(a){this._targets=[];return e.pooling.PoolStrictBase.prototype.build.call(this,a)},poolId:function(){return"WorkinTweener"},__class__:h.tween.WorkinTweener});h.tween.WorkinTweenTracker=function(){};l["com.workinman.math.tween.WorkinTweenTracker"]=h.tween.WorkinTweenTracker;h.tween.WorkinTweenTracker.__name__=["com","workinman","math","tween","WorkinTweenTracker"];h.tween.WorkinTweenTracker.__interfaces__=[e.pooling.IStrictPoolable];h.tween.WorkinTweenTracker.request=function(a){e.WorkinCloud.get_instance().get_pool().initPool("WorkinTweenTracker",h.tween.WorkinTweenTracker);return e.WorkinCloud.get_instance().get_pool().requestObject("WorkinTweenTracker").init(a)};h.tween.WorkinTweenTracker.__super__=e.pooling.PoolStrictBase;h.tween.WorkinTweenTracker.prototype=v(e.pooling.PoolStrictBase.prototype,{addTween:function(a,b){if(null==this._tweens.get(b)){this._threadCount++;var f=[];this._tweens.set(b,f);f}this._tweens.get(b).push(a)},_runRemoval:function(){for(;0<h.tween.WorkinTweenTracker._tweenRemoval.length;)this._tweens.remove(h.tween.WorkinTweenTracker._tweenRemoval.pop()),this._threadCount--},clearTweens:function(a){if(null!=this._tweens.get(a)){for(;0<this._tweens.get(a).length;)this._tweens.get(a).pop().dispose();h.tween.WorkinTweenTracker._tweenRemoval.push(a);this._runRemoval()}},clearAllTweens:function(){for(var a=this._tweens.keys();a.hasNext();){var b=a.next();h.tween.WorkinTweenTracker._tweenUpdate.push(b)}for(;0<h.tween.WorkinTweenTracker._tweenUpdate.length;)this.clearTweens(h.tween.WorkinTweenTracker._tweenUpdate.pop())},set_isComplete:function(a){return this._isComplete=a},get_isComplete:function(){return this._isComplete},get_target:function(){return this._target},_dispatchTweensAllComplete:function(a){e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(G.ConstantsCloud.EVENT_TWEENS_COMPLETE,{target:a}))},_updateThread:function(a,b){1>this._tweens.get(b).length?h.tween.WorkinTweenTracker._tweenRemoval.push(b):(this._tweens.get(b)[0].update(a),this._tweens.get(b)[0].get_isComplete()&&(this._tweens.get(b)[0].dispose(),this._tweens.get(b).splice(0,1),this._updateThread(a,b)))},update:function(a){for(var b=this._tweens.keys();b.hasNext();){var f=b.next();h.tween.WorkinTweenTracker._tweenUpdate.push(f)}for(;0<h.tween.WorkinTweenTracker._tweenUpdate.length;)this._updateThread(a,h.tween.WorkinTweenTracker._tweenUpdate.pop());this._runRemoval();1>this._threadCount&&(this._isComplete=!0,this._dispatchTweensAllComplete(this._target))},destroy:function(){this._tweens=null;e.pooling.PoolStrictBase.prototype.destroy.call(this)},dispose:function(){this.clearAllTweens();this._target=null;e.pooling.PoolStrictBase.prototype.dispose.call(this)},init:function(a){this._target=a;this._isComplete=!1;this._threadCount=0;return this},build:function(a){this._tweens=new w.StringMap;return e.pooling.PoolStrictBase.prototype.build.call(this,a)},poolId:function(){return"WorkinTweenTracker"},__class__:h.tween.WorkinTweenTracker,__properties__:{get_target:"get_target",set_isComplete:"set_isComplete",get_isComplete:"get_isComplete"}});h.tween.WorkinTweenDef=function(){};l["com.workinman.math.tween.WorkinTweenDef"]=h.tween.WorkinTweenDef;h.tween.WorkinTweenDef.__name__=["com","workinman","math","tween","WorkinTweenDef"];h.tween.WorkinTweenDef.__interfaces__=[e.pooling.IStrictPoolable];h.tween.WorkinTweenDef.request=function(a,b,f,c,d){e.WorkinCloud.get_instance().get_pool().initPool("WorkinTweenDef",h.tween.WorkinTweenDef);return e.WorkinCloud.get_instance().get_pool().requestObject("WorkinTweenDef").init(a,b,f,c,d)};h.tween.WorkinTweenDef.__super__=e.pooling.PoolStrictBase;h.tween.WorkinTweenDef.prototype=v(e.pooling.PoolStrictBase.prototype,{onComplete:function(a,b){null==b&&(b=[]);this._completionHandler=a;this._completionArgs=b;return this},ease:function(a){this._easeFunction=h.tween.PennerManager.getEaseFunction(a);return this},delay:function(a){this._delay=a;return this},get_ratio:function(){return this._ratio},set_isComplete:function(a){this._isComplete=a;return this.get_isComplete()},get_isComplete:function(){return this._isComplete},update:function(a){if(0<this._delay&&(this._delay-=a,0<this._delay))return;if(null==this._target)this._isComplete=!0;else if(!1==this._started&&this._start(),this._progress+=a,this._progress>this._duration&&(this._progress=this._duration),this._ratio=Math.floor(1E3*(this._progress/this._duration))/1E3,this._progress>=this._duration){for(var a=0,b=H.fields(this._dest);a<b.length;){var f=b[a];++a;this._target[f]=H.field(this._dest,f)}null!=this._completionHandler&&this._completionHandler.apply(this._completionHandler,this._completionArgs);this._isComplete=!0}else{a=0;for(b=H.fields(this._dest);a<b.length;)f=b[a],++a,this._diff=H.field(this._dest,f)-H.field(this._origin,f),this._target[f]=this._easeFunction(H.field(this._origin,f),this._diff,this._progress,this._duration)}},_start:function(){this._isComplete=!1;this._started=!0;for(var a=0,b=H.fields(this._dest);a<b.length;){var f=b[a];++a;null!=H.field(this._target,f)&&(this._origin[f]=H.field(this._target,f))}},destroy:function(){this._origin=null;e.pooling.PoolStrictBase.prototype.destroy.call(this)},dispose:function(){e.WorkinUtils.removePropertiesFromDynamic(this._origin);this._dest=this._target=null;e.pooling.PoolStrictBase.prototype.dispose.call(this)},init:function(a,b,f,c,d){this._target=a;this._duration=b;this._delay=d;this._dest=f;this._easeFunction=h.tween.PennerManager.getEaseFunction(null==c?h.tween.Ease.EASE_LINEAR:c);this._isComplete=!1;this._completionArgs=this._completionHandler=null;this._progress=0;this._started=!1;return this},build:function(a){this._origin={};return e.pooling.PoolStrictBase.prototype.build.call(this,a)},poolId:function(){return"WorkinTweenDef"},__class__:h.tween.WorkinTweenDef,__properties__:{set_isComplete:"set_isComplete",get_isComplete:"get_isComplete",get_ratio:"get_ratio"}});T={WMSharedObject:function(){this._dispatcher=n.WMEventDispatcher.request();this._data={};this.sharedKey=""}};l["com.workinman.net.WMSharedObject"]=T.WMSharedObject;T.WMSharedObject.__name__=["com","workinman","net","WMSharedObject"];T.WMSharedObject.getLocalStorage=function(){return D.window.localStorage};T.WMSharedObject.getLocal=function(a){try{var b=new T.WMSharedObject;b.sharedKey=a;var f=T.WMSharedObject.getLocalStorage().getItem(b.sharedKey);b.set_data(""==f||null==f?{}:V.run(f));return b}catch(c){return b=new T.WMSharedObject,b.sharedKey="",b}};T.WMSharedObject.prototype={flush:function(){var a=Y.run(this.get_data());T.WMSharedObject.getLocalStorage().setItem(this.sharedKey,a);return T.SharedObjectFlushedStatus.FLUSHED},clear:function(){this.set_data(null);this.set_data({});T.WMSharedObject.getLocalStorage().removeItem(this.sharedKey)},set_data:function(a){return this._data=a},get_data:function(){return this._data},dispose:function(){this._data=null;this._dispatcher.dispose();this._dispatcher=null},__class__:T.WMSharedObject};T.SharedObjectFlushedStatus=function(){};l["com.workinman.net.SharedObjectFlushedStatus"]=T.SharedObjectFlushedStatus;T.SharedObjectFlushedStatus.__name__=["com","workinman","net","SharedObjectFlushedStatus"];U={ServiceAnalytics:function(){}};l["com.workinman.services.ServiceAnalytics"]=U.ServiceAnalytics;U.ServiceAnalytics.__name__=["com","workinman","services","ServiceAnalytics"];U.ServiceAnalytics.init=function(a){if(!U.ServiceAnalytics._flagInitted&&!(""==a||"x"==a))eval("abcdm.abc.com.GameApis").omnitureInitComplete=U.ServiceAnalytics._initComplete,eval("abcdm.abc.com.GameApis").omnitureError=U.ServiceAnalytics._initError,eval('abcdm.abc.com.GameApis.omnitureError = function(message) { console.log("HERE" + message); };'),U.ServiceAnalytics.callOmnitureFunction("initOmniture('"+a+"');")};U.ServiceAnalytics._initComplete=function(){U.ServiceAnalytics._flagInitted=!0;null};U.ServiceAnalytics._initError=function(a){e.WorkinCloud.get_instance().log("[ServiceAnalytics] (_initError) Omniture Error:"+a)};U.ServiceAnalytics.callOmnitureFunction=function(a){if(!U.ServiceAnalytics._flagInitted&&-1==a.indexOf("initOmniture"))return"";try{var b=eval("abcdm.abc.com.GameApis."+a);return null==b?"":b}catch(f){}return""};e.JSEmbedProxy=function(){};l["com.workinman.utils.JSEmbedProxy"]=e.JSEmbedProxy;e.JSEmbedProxy.__name__=["com","workinman","utils","JSEmbedProxy"];e.JSEmbedProxy.get_exists=function(){return e.JSEmbedProxy.callJSEmbedMethod("exists()")};e.JSEmbedProxy.get_base=function(){return e.JSEmbedProxy.callJSEmbedMethod("baseUrl()")};e.JSEmbedProxy.get_isCrossdomain=function(){return e.JSEmbedProxy.callJSEmbedMethod("isBaseCrossdomain()")};e.JSEmbedProxy.get_scaleType=function(){return e.JSEmbedProxy.callJSEmbedMethod("scaleType()")};e.JSEmbedProxy.get_canvasScale=function(){return t.parseFloat(e.JSEmbedProxy.callJSEmbedMethod("canvasScale()"))};e.JSEmbedProxy.get_canvasWidth=function(){return t.parseFloat(e.JSEmbedProxy.callJSEmbedMethod("canvasWidth()"))};e.JSEmbedProxy.get_scaledWidth=function(){return t.parseFloat(e.JSEmbedProxy.callJSEmbedMethod("scaledWidth()"))};e.JSEmbedProxy.get_scaledHeight=function(){return t.parseFloat(e.JSEmbedProxy.callJSEmbedMethod("scaledHeight()"))};e.JSEmbedProxy.get_contentOffsetX=function(){return t.parseFloat(e.JSEmbedProxy.callJSEmbedMethod("contentOffsetX()"))};e.JSEmbedProxy.get_contentOffsetY=function(){return t.parseFloat(e.JSEmbedProxy.callJSEmbedMethod("contentOffsetY()"))};e.JSEmbedProxy.get_isPaused=function(){return e.JSEmbedProxy.callJSEmbedMethod("isPaused()")};e.JSEmbedProxy.callJSEmbedMethod=function(a){try{var b=eval("jsembed."+a);return null==b?"":b}catch(f){}return""};e.WMAchievementManager=function(){this._achievements=new w.StringMap;this._flagInitted=!1};l["com.workinman.utils.WMAchievementManager"]=e.WMAchievementManager;e.WMAchievementManager.__name__=["com","workinman","utils","WMAchievementManager"];e.WMAchievementManager.prototype={_onUpdateDisplay:function(a){for(var b,f=this._achievements.keys();f.hasNext();){var d=f.next();b=this._achievements.get(d);b.get_valueId()==a.get_data().valueID&&!b.achieved&&e.WorkinCloud.get_instance().getValue(b.get_valueId())>=b.get_value()&&(b.achieved=!0,this._sharedObjectSetData(),this._setScore(),this.lastAchievedId=d,e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventFlow.request(c.ConstantsScreen.FLOW_ACHIEVEMENT_POPUP)))}},_addEventListeners:function(){e.WorkinCloud.get_instance().get_dispatcher().addEventListener(j.Display.EVENT_UPDATE_DISPLAY,q(this,this._onUpdateDisplay))},_sharedObjectSetData:function(){for(var a={},b,f=this._achievements.keys();f.hasNext();){var c=f.next();b=this._achievements.get(c);a[c]={valueId:b.get_valueId(),value:b.get_value(),points:b.get_points(),achieved:b.achieved}}e.WorkinCloud.get_instance().sharedObjectSetData(this._sharedObjectId,a)},_setScore:function(){for(var a=0,b=function(a){return function(){return a.iterator()}}(this._achievements)();b.hasNext();){var f=b.next();f.achieved&&(a+=f.get_points())}this.points=a},getAchieved:function(a){return this._achievements.get(a).achieved},getPoints:function(a){return this._achievements.get(a).get_points()},getIcon:function(a){return c.Achievements.ICON_BASE+a},getLocalizationDescID:function(a){return c.Achievements.LOCALIZATION_DESC_BASE+a},getLocalizationNameID:function(a){return c.Achievements.LOCALIZATION_NAME_BASE+a},getAchievements:function(){for(var a=[],b=this._achievements.keys();b.hasNext();){var f=b.next();a.push(f)}return a},addAchievement:function(a,b,f,c,d){null==d&&(d=!1);b=new e._WMAchievementManager.AchievementDef(b,f,c,d);this._achievements.set(a,b);b},init:function(){if(!this._flagInitted&&(this._sharedObjectId=c.ConstantsApp.ACHIEVEMENTS_ID,"X"!=this._sharedObjectId)){this._flagInitted=!0;for(var a,b=0,f=N.allEnums(c.Achievement);b<f.length;)a=f[b],++b,a=c.Achievements.achievmentData(a),this.addAchievement(a.id,a.valueId,a.value,a.points);a=e.WorkinCloud.get_instance().sharedObjectGetData(this._sharedObjectId);if(0<H.fields(a).length){b=0;for(f=H.fields(a);b<f.length;){var d=f[b];++b;var g=H.field(a,d);this._achievements.get(d).achieved=g.achieved}}this._setScore();this._sharedObjectSetData();this._addEventListeners()}},__class__:e.WMAchievementManager};e._WMAchievementManager={};e._WMAchievementManager.AchievementDef=function(a,b,f,c){this._valueId=a;this._value=b;this._points=f;this.achieved=c};l["com.workinman.utils._WMAchievementManager.AchievementDef"]=e._WMAchievementManager.AchievementDef;e._WMAchievementManager.AchievementDef.__name__=["com","workinman","utils","_WMAchievementManager","AchievementDef"];e._WMAchievementManager.AchievementDef.prototype={get_points:function(){return this._points},get_value:function(){return this._value},get_valueId:function(){return this._valueId},__class__:e._WMAchievementManager.AchievementDef};e.WMAssetManager=function(){this.ID_MANIFEST_INDIVIDUAL="WMManifestIndividual";this._baseUrl="";this._assets=new w.StringMap;this._flump=new w.StringMap;this._packs=new w.StringMap;this._chunks=new w.StringMap;this._manifests=new w.StringMap;this._sheets=new w.StringMap;this._flagBaseIsCrossdomain=!1;this._loadingProgress=this._loadingTotal=this._manifestsLoaded=this._manifestsMax=0;this._loadingCallback=null;this._loadingPackProgress=new w.StringMap;this._fontCache=new w.StringMap};l["com.workinman.utils.WMAssetManager"]=e.WMAssetManager;e.WMAssetManager.__name__=["com","workinman","utils","WMAssetManager"];e.WMAssetManager.prototype={getLibrary:function(a){return!1==this._flump.exists(a)?null:this._flump.get(a)},getFont:function(a,b){null==b&&(b=!0);if(!1==this._assets.exists(a))return null;if(!1==b)return new r.Font(this._assets.get(a).get_pack(),a);if(!1==this._fontCache.exists(a)){var f=new r.Font(this._assets.get(a).get_pack(),a);this._fontCache.set(a,f);f}return this._fontCache.get(a)},getXML:function(a){if(!1==this._assets.exists(a))return null;a=A.parse(this.getFile(a).toString());return new F.Fast(a.firstElement())},getFile:function(a){return!1==this._assets.exists(a)?null:this._assets.get(a).get_constructed()?this._assets.get(a).get_data():this._assets.get(a).get_pack().getFile(this._assets.get(a).get_path(),!0)},getSound:function(a){a=e.WorkinUtils.removeExtension(a);return!1==this._assets.exists(a)?null:this._assets.get(a).get_constructed()?this._assets.get(a).get_data():this._assets.get(a).get_pack().getSound(this._assets.get(a).get_path(),!0)},getSpriteRect:function(a){a=e.WorkinUtils.removeExtension(a);return!1==this._sheets.exists(a)?null:this._sheets.get(a).get_rect()},getTexture:function(a){a=e.WorkinUtils.removeExtension(a);return this._sheets.exists(a)?!1==this._assets.exists(this._sheets.get(a).get_atlas())?null:this._assets.get(this._sheets.get(a).get_atlas()).get_pack().getTexture(this._assets.get(this._sheets.get(a).get_atlas()).get_path(),!0):!1==this._assets.exists(a)?null:!0==this._assets.get(a).get_constructed()?this._assets.get(a).get_data():this._assets.get(a).get_pack().getTexture(this._assets.get(a).get_path(),!0)},hasAsset:function(a){return this._sheets.exists(a)?!0:this._assets.exists(a)},_addSpritesheet:function(a,b,f){this._sheets.exists(a)&&this._sheets.get(a).dispose();this._sheets.set(a,new e._WMAssetManager.SpriteSheetDef(a,b,f))},_parseSpritesheet:function(a){for(var b=this.getFile(a+".plist"),f=e.WorkinUtils.parsePropertyList(this.getFile(a+".plist").toString()),c="",d=h.WMRectangle.request(),f=f.frames,g=H.fields(f),i=null,j=i=null,k=0;k<g.length;){c=g[k];++k;for(var i=H.field(f,c),c=e.WorkinUtils.removeExtension(c),i=i.frame,j=i.split("{"),i="",l=0;l<j.length;){var n=j[l];++l;i+=n}j=i.split("}");i="";for(l=0;l<j.length;)n=j[l],++l,i+=n;j=i.split(",");d.set_x(t.parseFloat(j[0]));d.set_y(t.parseFloat(j[1]));d.set_width(t.parseFloat(j[2]));d.set_height(t.parseFloat(j[3]));this._addSpritesheet(c,a,d)}d.dispose();b.dispose()},_onAllLoadComplete:function(){if(null!=this._loadingCallback){var a=this._loadingCallback;this._loadingCallback=null;a()}},isLoading:function(){return this._manifestsLoaded<this._manifestsMax},_addPack:function(a){for(var b=null,f="",c=f="",d=y.iter(a.get_manifest()._entries);d.hasNext();){b=d.next();new e._WMAssetManager.AssetDef(b.name,b.format,this._assets,a);for(var b=b.name.split("/"),f=b[b.length-1],c="",g=0,h=b.length-1;g<h;){var i=g++;""!=c&&(c+="/");c+=b[i]}"library.json"==f&&this._flump.set(b[b.length-2],new C.Library(a,b[b.length-2]));b=f.split(".");f=b[b.length-1];"plist"==f&&this._parseSpritesheet(c+"/"+b[0])}},isPackLoaded:function(a){return this._packs.exists(a)},disposePack:function(a){if(this.isPackLoaded(a)){for(var b=y.iter(this._packs.get(a).get_manifest()._entries);b.hasNext();){var f=b.next();this._assets.exists(f.name)&&this._assets.get(f.name).dispose()}this._packs.get(a).dispose();this._packs.remove(a);null}else throw"WMAssetManager](disposePack) Error: Pack "+a+"isn't loaded or doesn't exsist and can't be disposed.";},disposeChunk:function(a){if(this.isChunkLoaded(a)){for(var b=0,f=this._chunks.get(a).get_chunkIds();b<f.length;){var c=f[b];++b;this.disposeChunk(c)}b=0;for(f=this._chunks.get(a).get_packIds();b<f.length;)c=f[b],++b,this.disposePack(c);null}},_loadingError:function(){e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(G.ConstantsCloud.EVENT_FILES_ERROR))},_loadManifest:function(a,b){var f=this,c=B._platform.loadAssetPack(a);this._loadingTotal+=c._total;this._loadingPackProgress.set(b,0);c.error.connect(q(this,this._loadingError));c.progressChanged.connect(function(){var a=c._progress-f._loadingPackProgress.get(b);f._loadingPackProgress.set(b,c._progress);f._loadingProgress+=a;a=Math.round(100*(f._loadingProgress/f._loadingTotal));e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(G.ConstantsCloud.EVENT_FILES_LOADING,{value:a}))});c.get(function(a){f._addPack(a);f._packs.set(b,a);f._manifestsLoaded+=1;f._manifestsLoaded>=f._manifestsMax&&f._onAllLoadComplete()})},_loadPack:function(a){var b=u.Manifest.build(a);""!=this._baseUrl&&(this._flagBaseIsCrossdomain?b.set_externalBasePath(this._baseUrl):b.set_relativeBasePath(this._baseUrl));this._loadManifest(b,a)},load:function(a,b,f,c,d){null==d&&(d=0);var g=this;if(null==a)throw"[WMAssetManager](load) Callback is null!";null==b&&(b=[]);null==f&&(f=[]);null==c&&(c=[]);for(var h=!0,i=0;i<b.length;){var j=b[i];++i;!1==this.isChunkLoaded(j)&&(h=!1)}for(i=0;i<f.length;)j=f[i],++i,!1==this.isPackLoaded(j)&&(h=!1);0<c.length&&(h=!1);if(h)f=c=b=null,a();else if(!1==this.isLoading()&&e.WorkinCloud.get_instance().setInt(G.ConstantsCloud.INT_LOADING_PROGRESS,0),0<d)R.delay(function(){g.load(a,b,f,c,0)},d);else{this._loadingCallback=a;for(i=0;i<b.length;)j=b[i],++i,this._addChunkToPackList(j,f,null);e.WorkinUtils.removeDuplicatesFromStringArray(f);for(i=0;i<f.length;)j=f[i],++i,!1==this.isPackLoaded(j)&&this._manifestsMax++;for(i=0;i<c.length;)d=c[i],++i,this._manifestsMax++;for(i=0;i<f.length;)j=f[i],++i,!1==this.isPackLoaded(j)&&this._loadPack(j);d="";for(i=0;i<c.length;)d=c[i],++i,d=""==d?this.ID_MANIFEST_INDIVIDUAL:d,!1==this._manifests.exists(d)?null:this._loadManifest(this._manifests.get(d),d);c=f=b=d=null}},_parseChunk:function(a,b){for(var f=[],c=[],d=b.nodes.resolve("chunk").iterator();d.hasNext();){var g=d.next();f.push(g.get_innerData().toString())}for(d=b.nodes.resolve("pack").iterator();d.hasNext();)g=d.next(),c.push(g.get_innerData().toString());return new e._WMAssetManager.ChunkDef(a,c,f)},_arrayContainsChunk:function(a,b){for(var f=0;f<a.length;){var c=a[f];++f;if(c==b)return!0}return!1},_addChunkToPackList:function(a,b,f){if(!1!=this._chunks.exists(a)){null==f&&(f=[a]);for(var c=0,d=this._chunks.get(a).get_chunkIds();c<d.length;){var g=d[c];++c;!1==this._arrayContainsChunk(f,g)&&(f.push(g),this._addChunkToPackList(g,b,f))}c=0;for(d=this._chunks.get(a).get_packIds();c<d.length;)a=d[c],++c,e.WorkinUtils.addStringToArrayWithoutDuplicates(a,b)}},isChunkLoaded:function(a){if(!1==this._chunks.exists(a))return!1;for(var b=0,a=this._chunks.get(a).get_packIds();b<a.length;){var f=a[b];++b;if(!1==this.isPackLoaded(f))return!1}return!0},addChunk:function(a,b){var f=this._parseChunk(a,b);this._chunks.set(a,f)},setCrossdomainBaseUrl:function(a){this._flagBaseIsCrossdomain=!0;this.set_baseUrl(a)},set_baseUrl:function(a){return this._baseUrl=a},__class__:e.WMAssetManager};e._WMAssetManager={};e._WMAssetManager.AssetDef=function(a,b,f,c){this._constructed=!1;this._path=a;a=a.split("/");this._id=a[a.length-1];this._data=this._pack=null;this._format=this._id;if(null!=b)switch(b[1]){case 2:this._format+=".png";break;case 3:this._format+=".jpg"}I.__instanceof(c,u.AssetPack)?this._pack=c:(this._constructed=!0,this._data=c);this._hash=f;this._hash.set(this._path,this);this._path!=this._id&&this._hash.set(this._id,this);this._format!=this._id&&this._hash.set(this._format,this)};l["com.workinman.utils._WMAssetManager.AssetDef"]=e._WMAssetManager.AssetDef;e._WMAssetManager.AssetDef.__name__=["com","workinman","utils","_WMAssetManager","AssetDef"];e._WMAssetManager.AssetDef.prototype={get_pack:function(){return this._pack},get_path:function(){return this._path},get_data:function(){return this._data},get_constructed:function(){return this._constructed},dispose:function(){var a=this._pack.getTexture(e.WorkinUtils.removeExtension(this._path),!1),b=this._pack.getSound(e.WorkinUtils.removeExtension(this._path),!1),f=this._pack.getFile(this._path,!1);null!=a?a.dispose():null!=b?b.dispose():null!=f&&f.dispose();this._hash.remove(this._path);this._path!=this._id&&this._hash.remove(this._id);this._format!=this._id&&this._hash.remove(this._format);this._data=this._pack=this._hash=this._id=this._path=null},__class__:e._WMAssetManager.AssetDef};e._WMAssetManager.ChunkDef=function(a,b,f){this._id=a;this._packs=b;this._chunks=f};l["com.workinman.utils._WMAssetManager.ChunkDef"]=e._WMAssetManager.ChunkDef;e._WMAssetManager.ChunkDef.__name__=["com","workinman","utils","_WMAssetManager","ChunkDef"];e._WMAssetManager.ChunkDef.prototype={get_chunkIds:function(){return this._chunks},get_packIds:function(){return this._packs},__class__:e._WMAssetManager.ChunkDef};e._WMAssetManager.SpriteSheetDef=function(a,b,f){this._id=a;this._rect=f.copy();this._atlas=b};l["com.workinman.utils._WMAssetManager.SpriteSheetDef"]=e._WMAssetManager.SpriteSheetDef;e._WMAssetManager.SpriteSheetDef.__name__=["com","workinman","utils","_WMAssetManager","SpriteSheetDef"];e._WMAssetManager.SpriteSheetDef.prototype={get_rect:function(){return this._rect},get_atlas:function(){return this._atlas},dispose:function(){this._id=null;this._rect.dispose();this._atlas=this._rect=null},__class__:e._WMAssetManager.SpriteSheetDef};e.WMInput=function(){this._multiTouchAvail=!1;this._inputDown=new w.StringMap;this._keyCodes=new w.StringMap;this._virtualCodes=new w.StringMap;this._keyDown=new w.StringMap;this._virtualDown=new w.StringMap;this._touchList=new w.StringMap;this._touchRemoval=[];this.registerInput("input_click");this._scale=1;this._offset=h.WorkinPoint.request();this._pointer=e.WMPointer.request("",0)};l["com.workinman.utils.WMInput"]=e.WMInput;e.WMInput.__name__=["com","workinman","utils","WMInput"];e.WMInput.prototype={_onPointerUp:function(a){this._inputDown.set("input_click",!1);this._pointer.end(a.viewX/this._scale+this._offset.x,a.viewY/this._scale+this._offset.y);!1==this._multiTouchAvail&&this._touchList.exists("const")&&this._touchList.get("const").end(this._pointer.get_currentPos().x,this._pointer.get_currentPos().y);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(this._requestEvent(0,"input_click",this._pointer.get_currentPos().x,this._pointer.get_currentPos().y,this._pointer.get_swipe(),this._pointer.get_id()))},_onPointerMove:function(a){this._pointer.move(a.viewX/this._scale+this._offset.x,a.viewY/this._scale+this._offset.y);!1==this._multiTouchAvail&&this._touchList.exists("const")&&this._touchList.get("const").move(this._pointer.get_currentPos().x,this._pointer.get_currentPos().y);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(this._requestEvent(2,"input_click",this._pointer.get_currentPos().x,this._pointer.get_currentPos().y,this._pointer.get_swipe(),this._pointer.get_id()))},_onPointerDown:function(a){this._inputDown.set("input_click",!0);this._pointer.begin(a.viewX/this._scale+this._offset.x,a.viewY/this._scale+this._offset.y);!1==this._multiTouchAvail&&(a=this._requestPointer("const",0),a.begin(this._pointer.get_currentPos().x,this._pointer.get_currentPos().y),this._touchList.set("const",a));e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(this._requestEvent(1,"input_click",this._pointer.get_currentPos().x,this._pointer.get_currentPos().y,this._pointer.get_swipe(),this._pointer.get_id()))},_onTouchUp:function(a){var b=this._touchList.get(t.string(a.id));b.end(a.viewX/this._scale+this._offset.x,a.viewY/this._scale+this._offset.y);0<b.get_index()&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(this._requestEvent(0,"input_click",b.get_currentPos().x,b.get_currentPos().y,b.get_swipe(),b.get_id()))},_onTouchMove:function(a){var b=this._touchList.get(t.string(a.id));b.move(a.viewX/this._scale+this._offset.x,a.viewY/this._scale+this._offset.y);0<b.get_index()&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(this._requestEvent(2,"input_click",b.get_currentPos().x,b.get_currentPos().y,b.get_swipe(),b.get_id()))},_onTouchDown:function(a){this._searchIndex=0;this._searchFound=!1;do{this._searchFound=!0;for(var b=function(a){return function(){return a.iterator()}}(this._touchList)();b.hasNext();)if(this._searchIndex==b.next().get_index()){this._searchIndex++;this._searchFound=!1;break}}while(!1==this._searchFound);b=this._requestPointer(t.string(a.id),this._searchIndex);this._touchList.set(b.get_id(),b);b.begin(a.viewX/this._scale+this._offset.x,a.viewY/this._scale+this._offset.y);0<this._searchIndex&&e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(this._requestEvent(1,"input_click",b.get_currentPos().x,b.get_currentPos().y,b.get_swipe(),b.get_id()));b=null},_isInputDown:function(a){for(var b=0,f=this._keyCodes.get(a);b<f.length;){var c=f[b];++b;if(!0==this._keyDown.get(c))return!0}b=0;for(f=this._virtualCodes.get(a);b<f.length;)if(a=f[b],++b,!0==this._virtualDown.get(a))return!0;return!1},_onKeyUp:function(a){this._keyDown.exists(t.string(a.key))&&this._keyDown.set(t.string(a.key),!1);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(G.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,{key:a.key,state:0}))},_onKeyDown:function(a){this._keyDown.exists(t.string(a.key))&&this._keyDown.set(t.string(a.key),!0);e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEventData.request(G.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,{key:a.key,state:1}))},getInput:function(a){return this._inputDown.get(a)},registerInput:function(a,b,f){!1==this._inputDown.exists(a)&&(this._inputDown.set(a,!1),this._keyCodes.set(a,[]),this._virtualCodes.set(a,[]));if(null!=b)for(var c=0;c<b.length;){var d=b[c];++c;this._keyCodes.get(a).push(t.string(d));this._keyDown.set(t.string(d),!1)}if(null!=f)for(c=0;c<f.length;)b=f[c],++c,this._virtualCodes.get(a).push(b),this._virtualDown.set(b,!1)},doDepthTestOnWorldCoordinates:function(a,b){return r.Sprite.hitTest(B.root,(a-this._offset.x)*this._scale,(b-this._offset.y)*this._scale)},prime:function(){this._multiTouchAvail=B._platform.getTouch().get_supported();B._platform.getKeyboard().down.connect(q(this,this._onKeyDown));B._platform.getKeyboard().up.connect(q(this,this._onKeyUp));this._multiTouchAvail&&(B._platform.getTouch().down.connect(q(this,this._onTouchDown)),B._platform.getTouch().move.connect(q(this,this._onTouchMove)),B._platform.getTouch().up.connect(q(this,this._onTouchUp)));B._platform.getPointer().down.connect(q(this,this._onPointerDown));B._platform.getPointer().move.connect(q(this,this._onPointerMove));B._platform.getPointer().up.connect(q(this,this._onPointerUp))},_requestEvent:function(a,b,c,d,e,g){null==g&&(g="");null==e&&(e=0);return n.WMEventInput.request(a,b,c,d,e,g)},_requestPointer:function(a,b){return e.WMPointer.request(a,b)},get_pointer:function(){return this._pointer},get_offset:function(){return this._offset},set_scale:function(a){this._scale=a;0==this._scale&&(this._scale=0.01);return this._scale},get_scale:function(){return this._scale},update:function(a){for(var b=this._inputDown.keys();b.hasNext();){var c=b.next();"input_click"!=c&&(!0==this._inputDown.get(c)?!1==this._isInputDown(c)&&(this._inputDown.set(c,!1),e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(this._requestEvent(0,c,0,0))):!0==this._isInputDown(c)&&(this._inputDown.set(c,!0),e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(this._requestEvent(1,c,0,0))))}this._pointer.update(a);for(b=function(a){return function(){return a.iterator()}}(this._touchList)();b.hasNext();)c=b.next(),c.get_phase()==n.WMEventInput.PHASE_UP?this._touchRemoval.push(c.get_id()):c.update(a);for(;0<this._touchRemoval.length;)this._touchList.get(this._touchRemoval[this._touchRemoval.length-1]).dispose(),this._touchList.remove(this._touchRemoval[this._touchRemoval.length-
1]),this._touchRemoval.pop()},__class__:e.WMInput};e.WMPointer=function(){this.SWIPE_DOWN=4;this.SWIPE_UP=3;this.SWIPE_RIGHT=2;this.SWIPE_LEFT=1;this.SWIPE_NONE=0};l["com.workinman.utils.WMPointer"]=e.WMPointer;e.WMPointer.__name__=["com","workinman","utils","WMPointer"];e.WMPointer.__interfaces__=[e.pooling.IStrictPoolable];e.WMPointer.request=function(a,b){e.WorkinCloud.get_instance().get_pool().initPool("WMPointer",e.WMPointer);return e.WorkinCloud.get_instance().get_pool().requestObject("WMPointer").init(a,b)};e.WMPointer.__super__=e.pooling.PoolStrictBase;e.WMPointer.prototype=v(e.pooling.PoolStrictBase.prototype,{update:function(a){this._resetDeltaLine=!0;this._timer-=a;0>this._timer&&(this._timer=e.WMPointer._DELTA_TIMEOUT,this._deltaLine.originToPoint(this._current))},_updateInfo:function(a,b){this._last.toPoint(this._current);this._current.to(a,b);this._current.x+=this._camera.get_pos().x-this._camera.get_screenCenterX();this._current.y+=this._camera.get_pos().y-this._camera.get_screenCenterY();this._delta.toPoint(this._current);this._delta.subtractPoint(this._last);this._deltaLine.to(this._origin,this._current);this._motionDelta.to(this._motionDelta.get_p1(),this._current)},_testSwipe:function(){!1==this._consumed?(this._workPoint.to(this._origin.x-this._current.x,this._origin.y-this._current.y),this._swipe=Math.abs(this._workPoint.x)>=e.WMPointer._DELTA_ALLOWANCE&&Math.abs(this._workPoint.y)<e.WMPointer._DELTA_ALLOWANCE?0<this._workPoint.x?this.SWIPE_LEFT:this.SWIPE_RIGHT:Math.abs(this._workPoint.y)>=e.WMPointer._DELTA_ALLOWANCE&&Math.abs(this._workPoint.x)<e.WMPointer._DELTA_ALLOWANCE?0<this._workPoint.y?this.SWIPE_UP:this.SWIPE_DOWN:this.SWIPE_NONE):this._swipe=this.SWIPE_NONE},end:function(a,b){this._phase=n.WMEventInput.PHASE_UP;this._updateInfo(a,b);this._testSwipe();this._line.endToPoint(this._current)},move:function(a,b){this._updateInfo(a,b);!1!=e.WorkinCloud.get_instance().get_input().getInput("input_click")&&(this._phase=n.WMEventInput.PHASE_MOVE,this._testSwipe(),this._line.endToPoint(this._current))},begin:function(a,b){this._origin.to(a,b);this._origin.x+=this._camera.get_pos().x-this._camera.get_screenCenterX();this._origin.y+=this._camera.get_pos().y-this._camera.get_screenCenterY();this._current.toPoint(this._origin);this._last.toPoint(this._origin);this._delta.to(0,0);this._line.to(this._origin,this._current);this._deltaLine.to(this._origin,this._current);this._motionDelta.to(this._origin,this._current);this._consumed=!1;this._phase=n.WMEventInput.PHASE_DOWN;this._swipe=this.SWIPE_NONE},setCamera:function(a){null!=a?this._camera=a:(this._personalCamera.get_pos().to(0,0),this._camera=this._personalCamera)},get_deltaLine:function(){if(!1==this._resetDeltaLine)return this._deltaLine;this._deltaLine.endToPoint(this._current);this._resetDeltaLine=!1;return this._deltaLine},get_motionDelta:function(){return this._motionDelta},set_index:function(a){return this._index=a},get_index:function(){return this._index},get_id:function(){return this._id},set_consumed:function(a){return this._consumed=a},get_consumed:function(){return this._consumed},get_swipe:function(){return this._swipe},get_line:function(){return this._line},get_deltaPos:function(){return this._delta},get_lastPos:function(){return this._last},get_currentPos:function(){return this._current},get_originPos:function(){return this._origin},get_phase:function(){return this._phase},destroy:function(){this._personalCamera.dispose();this._personalCamera=null;e.pooling.PoolStrictBase.prototype.destroy.call(this)},dispose:function(){this._motionDelta.dispose();this._motionDelta=null;this._workPoint.dispose();this._workPoint=null;this._origin.dispose();this._origin=null;this._current.dispose();this._current=null;this._last.dispose();this._last=null;this._delta.dispose();this._delta=null;this._line.dispose();this._line=null;this._deltaLine.dispose();this._camera=this._deltaLine=null;e.pooling.PoolStrictBase.prototype.dispose.call(this)},init:function(a,b){this._origin=h.WorkinPoint.request(0,0);this._current=h.WorkinPoint.request(0,0);this._last=h.WorkinPoint.request(0,0);this._delta=h.WorkinPoint.request(0,0);this._workPoint=h.WorkinPoint.request(0,0);this._motionDelta=h.WorkinLine.request();this._line=h.WorkinLine.request();this._deltaLine=h.WorkinLine.request();this._camera=this._personalCamera;this._resetDeltaLine=!0;this._timer=e.WMPointer._DELTA_TIMEOUT;this._id=a;this._index=b;this._phase=n.WMEventInput.PHASE_UP;this._swipe=this.SWIPE_NONE;this._consumed=!1;return this},build:function(a){this._personalCamera=new h.WorkinCamera(0,0);return e.pooling.PoolStrictBase.prototype.build.call(this,a)},poolId:function(){return"WMPointer"},__class__:e.WMPointer,__properties__:{get_phase:"get_phase",get_originPos:"get_originPos",get_currentPos:"get_currentPos",get_lastPos:"get_lastPos",get_deltaPos:"get_deltaPos",get_line:"get_line",get_swipe:"get_swipe",set_consumed:"set_consumed",get_consumed:"get_consumed",get_id:"get_id",set_index:"set_index",get_index:"get_index",get_motionDelta:"get_motionDelta",get_deltaLine:"get_deltaLine"}});e.WMLocalize=function(){};l["com.workinman.utils.WMLocalize"]=e.WMLocalize;e.WMLocalize.__name__=["com","workinman","utils","WMLocalize"];e.WMLocalize.prototype={getLocalizeData:function(a,b){null==b&&(b="");""==b&&(b=G.ConstantsCloud.LOCALIZATION_XML_PATH+"translation_"+e.WorkinCloud.get_instance().getString(G.ConstantsCloud.STRING_REGION_ID)+".xml");for(var c=e.WorkinCloud.get_instance().get_assets().getXML(b).nodes.resolve("string").iterator();c.hasNext();){var d=c.next();if(d.att.resolve("id")==a)return e.WMLocalizedData.request(d.att.resolve("id"),d.get_innerData(),d.att.resolve("fontName"),t.parseFloat(d.att.resolve("fontScale")),t.parseFloat(d.att.resolve("offsetX")),t.parseFloat(d.att.resolve("offsetY")))}e.WorkinCloud.get_instance().log("[WMLocalize] ERROR: No localization data for : "+a);return e.WMLocalizedData.request(a,"","",1,0,0)},__class__:e.WMLocalize};e.WMLocalizedData=function(){};l["com.workinman.utils.WMLocalizedData"]=e.WMLocalizedData;e.WMLocalizedData.__name__=["com","workinman","utils","WMLocalizedData"];e.WMLocalizedData.__interfaces__=[e.pooling.IStrictPoolable];e.WMLocalizedData.request=function(a,b,c,d,g,h){e.WorkinCloud.get_instance().get_pool().initPool("WMLocalizedData",e.WMLocalizedData);return e.WorkinCloud.get_instance().get_pool().requestObject("WMLocalizedData").init(a,b,c,d,g,h)};e.WMLocalizedData.__super__=e.pooling.PoolStrictBase;e.WMLocalizedData.prototype=v(e.pooling.PoolStrictBase.prototype,{get_offsetY:function(){return this._offsetY},get_offsetX:function(){return this._offsetX},get_scale:function(){return this._scale},get_fontName:function(){return this._fontName},get_string:function(){return this._string},get_id:function(){return this._id},init:function(a,b,c,d,e,g){this._id=a;this._string=b;this._fontName=c;this._scale=d;this._offsetX=e;this._offsetY=g;return this},poolId:function(){return"WMLocalizedData"},__class__:e.WMLocalizedData,__properties__:{get_id:"get_id",get_string:"get_string",get_fontName:"get_fontName",get_scale:"get_scale",get_offsetX:"get_offsetX",get_offsetY:"get_offsetY"}});e.WMRandom=function(){this._sessions=new w.StringMap;this._randomSeeds=new w.StringMap};l["com.workinman.utils.WMRandom"]=e.WMRandom;e.WMRandom.__name__=["com","workinman","utils","WMRandom"];e.WMRandom.__properties__={get__weightPool:"get__weightPool"};e.WMRandom.get__weightPool=function(){null==e.WMRandom.__weightPool&&(e.WMRandom.__weightPool=[]);return e.WMRandom.__weightPool};e.WMRandom._requestWeightTracker=function(){return 0<e.WMRandom.get__weightPool().length?e.WMRandom.get__weightPool().pop():N.createEmptyInstance(e.WeightTracker).build(e.WMRandom._returnWeightTracker)};e.WMRandom._returnWeightTracker=function(a){e.WMRandom.get__weightPool().push(a)};e.WMRandom.prototype={endWeight:function(a){null==a&&(a="");""==a&&(a=e.WMRandom._DEFAULT_SESSION);!1!=this._sessions.exists(a)&&(this._sessions.get(a).dispose(),this._sessions.remove(a))},getWeight:function(a,b){null==b&&(b="");null==a&&(a="");""==a&&(a=e.WMRandom._DEFAULT_SESSION);if(!1==this._sessions.exists(a))return null;for(var c=this._sessions.get(a).get_totalValue(),c=c*this.random(b),d,g=0,h=this._sessions.get(a).get_objects();g<h.length;){var i=h[g];++g;d=this._sessions.get(a).getValueForObject(i);if(c<d)return i;c-=d}return null},getWeightSize:function(a){null==a&&(a="");""==a&&(a=e.WMRandom._DEFAULT_SESSION);return!1==this._sessions.exists(a)?0:this._sessions.get(a).get_count()},addWeight:function(a,b,c,d){null==d&&(d=!1);null==c&&(c="");""==c&&(c=e.WMRandom._DEFAULT_SESSION);(d||!1==this._sessions.exists(c))&&this.startWeight(c);this._sessions.get(c).add(a,b)},startWeight:function(a){null==a&&(a="");""==a&&(a=e.WMRandom._DEFAULT_SESSION);this._sessions.exists(a)?this._sessions.get(a).clear():this._sessions.set(a,e.WMRandom._requestWeightTracker())},getRandomString:function(a,b,c){null==c&&(c="");null==b&&(b="");""==b&&(b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");for(var d="",e=0;e<a;)d+=b.charAt(this.getRandomInt(0,b.length-1,c)),e++;return d},getRandomInt:function(a,b,c){null==c&&(c="");return Math.floor(this.getRandomFloat(a,b,c))},getRandomFloat:function(a,b,c){null==c&&(c="");return a+this.random(c)*(b+
1-a)},random:function(a){null==a&&(a="");return""==a||null==this._randomSeeds.get(a)?Math.random():this._randomSeeds.get(a).random()},setSeed:function(a,b){if(""!=a){if(null==this._randomSeeds.get(a)){var c=new e.WMSeededRandom;this._randomSeeds.set(a,c);c}this._randomSeeds.get(a).set_seed(b)}},__class__:e.WMRandom};e.WeightTracker=function(){};l["com.workinman.utils.WeightTracker"]=e.WeightTracker;e.WeightTracker.__name__=["com","workinman","utils","WeightTracker"];e.WeightTracker.prototype={get_totalValue:function(){for(var a=0,b=0,c=this._value;b<c.length;){var d=c[b];++b;a+=d}return a},get_objects:function(){return this._object},get_count:function(){return this._object.length},getValueForObject:function(a){for(var b=0;b<this._object.length;){if(a==this._object[b])return this._value[b];b++}return 0},add:function(a,b){this._object.push(a);this._value.push(b)},clear:function(){for(;0<this._object.length;)this._object.pop();for(;0<this._value.length;)this._value.pop()},dispose:function(){this.clear();this._returnFunction(this)},build:function(a){this._object=[];this._value=[];this._returnFunction=a;return this},__class__:e.WeightTracker};e.WMSeededRandom=function(a){null==a&&(a=1);this._seed=a};l["com.workinman.utils.WMSeededRandom"]=e.WMSeededRandom;e.WMSeededRandom.__name__=["com","workinman","utils","WMSeededRandom"];e.WMSeededRandom.prototype={random:function(){return this._randomInt()/1073741823},_randomInt:function(){return this.set_seed(16807*this.get_seed()%2147483647)&1073741823},set_seed:function(a){this._seed=a;return this.get_seed()},get_seed:function(){return this._seed},__class__:e.WMSeededRandom};e.WMSound=function(){this._musicId="";this._musicGain=1;this._musicPlaying=null;this._currentMuteState=this._flagSystemMute=this._flagMuted=!1;this._mixer=new L.Mixer;this._sounds=new w.StringMap;this._soundRemoval=[];this._tween=h.tween.WorkinTweener.request();this.__voCallback=null;this._voQueue=[];this._voTimeoutList=new w.StringMap;this._voTimeoutRemove=[];this._voCurrent=null;this._voQueueTimer=-1};l["com.workinman.utils.WMSound"]=e.WMSound;e.WMSound.__name__=["com","workinman","utils","WMSound"];e.WMSound.prototype={update:function(a){G.ConstantsCloud.getSupportsSingleMusicTrackOnly()&&null!=this._musicPlaying&&0.95<=this._musicPlaying.get_playback().get_position()/this._musicPlaying.get_sound().get_duration()&&H.setProperty(this._musicPlaying.get_playback(),"position",0);this._tween.update(a);for(var b=function(a){return function(){return a.iterator()}}(this._sounds)();b.hasNext();){var c=b.next();c.doDelete?(c.dispose(),this._soundRemoval.push(c.id)):c.update(a)}for(;0<this._soundRemoval.length;)this._sounds.remove(this._soundRemoval.pop());null!=this._musicPlaying&&this._musicPlaying.update(a);0<this._voQueueTimer&&(this._voQueueTimer-=a,0>=this._voQueueTimer&&(this._voQueueTimer=-1,this._continueVO()));for(b=this._voTimeoutList.keys();b.hasNext();){var d=c=b.next(),e=this._voTimeoutList.get(d)-a;this._voTimeoutList.set(d,e);e;0>=this._voTimeoutList.get(c)&&this._voTimeoutRemove.push(c)}for(;0<this._voTimeoutRemove.length;)this._voTimeoutList.remove(this._voTimeoutRemove.pop())},_purgeVOCallback:function(a){if(null==this.__voCallback)this.__voCallback=a;else{var b=this.__voCallback;this.__voCallback=a;b()}},_continueVO:function(){var a="";if(0<this._voQueue.length){null!=this._musicPlaying&&this._tween.tween(this._musicPlaying,0.15,{volume:0},!0,h.tween.Ease.EASE);null!=this._voCurrent&&this._voCurrent.id!=this._voQueue[0]&&(this._voCurrent.doDelete=!0,this._voCurrent.volume=0);var a=this._voQueue.shift(),b=t.parseFloat(a);!1==Math.isNaN(b)?(e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(G.ConstantsCloud.EVENT_VO_PAUSED)),this._voQueueTimer=b):(e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(G.ConstantsCloud.EVENT_VO_STARTED)),this._voCurrent=this.playSound(a,0.5,!0,q(this,this._continueVO)))}else null!=this._musicPlaying&&this._tween.tween(this._musicPlaying,0.2,{volume:1},!0,h.tween.Ease.EASE),e.WorkinCloud.get_instance().get_dispatcher().dispatchEvent(n.WMEvent.request(G.ConstantsCloud.EVENT_VO_ENDED)),this._purgeVOCallback(null)},_unmuteAll:function(){if(G.ConstantsCloud.getSupportsSingleMusicTrackOnly())null!=this._musicPlaying&&(this._musicPlaying.volume=1);else{var a=this._musicId;this._musicId="";this.playMusic(a,this._musicGain)}},_muteSound:function(){for(var a=function(a){return function(){return a.iterator()}}(this._sounds)();a.hasNext();){var b=a.next();!1==b.get_forceOn()&&(b.doDelete=!0)}},_muteMusic:function(){null!=this._musicPlaying&&(this._musicPlaying.dispose(),this._musicPlaying=null)},_muteAll:function(){G.ConstantsCloud.getSupportsSingleMusicTrackOnly()?null!=this._musicPlaying&&(this._musicPlaying.volume=0):(this._muteMusic(),this._muteSound())},_checkMuteStateChanged:function(){this.getMute()!=this._currentMuteState&&((this._currentMuteState=this.getMute())?this._muteAll():this._unmuteAll())},stopMusic:function(){this._musicId="";null!=this._musicPlaying&&(this._musicPlaying.dispose(),this._musicPlaying=null)},playMusic:function(a,b){null==b&&(b=1);if(!G.ConstantsCloud.getSupportsNoAudio()&&!(G.ConstantsCloud.getSupportsSingleMusicTrackOnly()&&null!=this._musicPlaying||this._musicId==a||this.getMute()||""==a)){this._musicId=a;this._musicGain=b;null!=this._musicPlaying&&(this._musicPlaying.dispose(),this._musicPlaying=null);var c=e.WorkinCloud.get_instance().get_assets().getSound(a);null==c?this._musicId="":(this._musicPlaying=c=new e.SoundDef(a,this._mixer.newSound(c,1),!0),c.playSound(b,null))}},stopSound:function(a){!1!=this._sounds.exists(a)&&(this._sounds.get(a).doDelete=!0)},playSound:function(a,b,c,d){null==c&&(c=!1);null==b&&(b=1);if((this.getMute()||!1==G.ConstantsCloud.getSupportsAllAudio())&&!1==c)return null!=d&&d(),null;if(this._sounds.exists(a))return this._sounds.get(a).playSound(b,d);var g=e.WorkinCloud.get_instance().get_assets().getSound(a);if(null==g)return null;c=new e.SoundDef(a,this._mixer.newSound(g,4),!1,c);this._sounds.set(a,c);return c.playSound(b,d)},setMute:function(a){this._flagMuted=a;this._checkMuteStateChanged()},getMute:function(){return this._flagSystemMute||this._flagMuted},__class__:e.WMSound};e.SoundDef=function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!1);this._complete=null;this.doDelete=!1;this.id=a;this.isMusic=c;this._maxVol=this.volume=1;this._flagPlayed=this._flagHasSound=!1;this._sound=b;this._force=d};l["com.workinman.utils.SoundDef"]=e.SoundDef;e.SoundDef.__name__=["com","workinman","utils","SoundDef"];e.SoundDef.prototype={playSound:function(a,b){null==a&&(a=1);if(null==this._sound)return null;this._maxVol=a;this.volume=1;this.isMusic?this._playback=this._sound.loop(a):(null!=b&&(this._complete=b),this._playback=this._sound.play(a));return this},update:function(){this._playback.volume.set__(this._maxVol*this.volume);if(this._playback.get_paused()||this._playback.get_ended())if(this.doDelete=!0,null!=this._complete){var a=this._complete;this._complete=null;a()}},get_playback:function(){return this._playback},get_sound:function(){return this._sound},get_forceOn:function(){return this._force},dispose:function(){null!=this._playback&&(this._playback.dispose(),this._playback=null);null!=this._sound&&this._sound.dispose()},__class__:e.SoundDef};e.WorkinCloud=function(){this._TIMER_STACK=0.1;this._poolStore=new e.pooling.PoolStore;this._poolManager=new j.PoolManager;this._values=new w.StringMap;this._defaults=new w.StringMap};l["com.workinman.utils.WorkinCloud"]=e.WorkinCloud;e.WorkinCloud.__name__=["com","workinman","utils","WorkinCloud"];e.WorkinCloud.get_instance=function(){null==e.WorkinCloud.__instance&&(e.WorkinCloud.__instance=new e.WorkinCloud,e.WorkinCloud.__instance.init());return e.WorkinCloud.__instance};e.WorkinCloud.prototype={_updateStack:function(a){1>this._stack.length||this._flagStackPaused||(this._timerStack-=a,0>this._timerStack&&(this._stack[0](),this._stack.shift(),this._timerStack=this._TIMER_STACK))},unpauseStack:function(){this._flagStackPaused=!1},pauseStack:function(){this._flagStackPaused=!0},update:function(a){this._updateStack(a);this._input.update(a);this._poolManager.update(a)},stack:function(a){this._timerStack=this._TIMER_STACK;for(var b=0;b<a.length;){var c=a[b];++b;this._stack.push(c)}},_updateDisplays:function(a){this._dispatcher.dispatchEvent(n.WMEventData.request(j.Display.EVENT_UPDATE_DISPLAY,{valueID:a}))},sharedObjectDelete:function(a){try{var b=T.WMSharedObject.getLocal(a);b.clear();b.flush();b.dispose()}catch(c){null}},sharedObjectSetData:function(a,b){try{var c=T.WMSharedObject.getLocal(a);c.set_data(b);c.flush();c.dispose()}catch(d){null}},sharedObjectGetData:function(a){try{var b=T.WMSharedObject.getLocal(a),c=b.get_data();b.dispose();return c}catch(d){return{}}},resetValue:function(a){var b=this._defaults.get(a);this._values.set(a,b);this._updateDisplays(a)},modifyValue:function(a,b){null==b&&(b=1);this._values.set(a,this.getFloat(a)+b);this._updateDisplays(a);return this.getFloat(a)},setValue:function(a,b){this._values.set(a,b);!1==this._defaults.exists(a)&&this.setDefault(a,b);this._updateDisplays(a)},getValue:function(a){return this._values.get(a)},setDefault:function(a,b){this._defaults.set(a,b);this.resetValue(a)},getString:function(a){return this._values.get(a)},setString:function(a,b){this.setValue(a,b)},getInt:function(a){return this._values.get(a)},modifyInt:function(a,b){return Math.floor(this.modifyValue(a,b))},setInt:function(a,b){this.setValue(a,b)},getFloat:function(a){return this._values.get(a)},modifyFloat:function(a,b){return this.modifyValue(a,b)},setFloat:function(a,b){this.setValue(a,b)},getBool:function(a){return this._values.get(a)},setBool:function(a,b){this.setValue(a,b)},get_achievements:function(){return this._achievements},get_poolManager:function(){return this._poolManager},get_pool:function(){return this._poolStore},get_localize:function(){return this._localize},get_random:function(){return this._random},get_sound:function(){return this._sound},get_assets:function(){return this._assets},get_input:function(){return this._input},get_dispatcher:function(){return this._dispatcher},log:function(){null},init:function(){this._dispatcher=n.WMEventDispatcher.request();this._input=new e.WMInput;this._assets=new e.WMAssetManager;this._sound=new e.WMSound;this._random=new e.WMRandom;this._localize=new e.WMLocalize;this._achievements=new e.WMAchievementManager;this._stack=[];this._timerStack=-1;this._flagStackPaused=!1;this.setString(G.ConstantsCloud.STRING_REGION_ID,"en")},__class__:e.WorkinCloud};e.WorkinUtils=function(){};l["com.workinman.utils.WorkinUtils"]=e.WorkinUtils;e.WorkinUtils.__name__=["com","workinman","utils","WorkinUtils"];e.WorkinUtils.mapWithKeysAndValues=function(a){for(var b=new w.StringMap,c=0;c<a.length-1;)b.set(a[c],a[c+1]),c+=2;return b};e.WorkinUtils.emptyMap=function(a){for(var b=a.keys();b.hasNext();){var c=b.next();e.WorkinUtils._mapEmpty.push(c)}for(;0<e.WorkinUtils._mapEmpty.length;)a.remove(e.WorkinUtils._mapEmpty.pop())};e.WorkinUtils.normalizeAngle=function(a){for(;-180>a;)a+=360;for(;180<a;)a-=360;return a};e.WorkinUtils.removePropertiesFromDynamic=function(a){for(var b=0,c=H.fields(a);b<c.length;){var d=c[b];++b;H.deleteField(a,d)}};e.WorkinUtils.parsePropertyList=function(a){return e.PropertyList.parse(a)};e.WorkinUtils.clamp=function(a,b,c,d){null==d&&(d=!1);d?a>c?a=b:a<b&&(a=c):a>c?a=c:a<b&&(a=b);return a};e.WorkinUtils.removeExtension=function(a){var b=a.lastIndexOf(".");return 0>b?a:a.substring(0,b)};e.WorkinUtils.addStringToArrayWithoutDuplicates=function(a,b){for(var c=0;c<b.length;){var d=b[c];++c;if(d==a)return}b.push(a)};e.WorkinUtils.removeDuplicatesFromStringArray=function(a){for(var b=[],c=0;c<a.length;){var d=a[c];++c;e.WorkinUtils.addStringToArrayWithoutDuplicates(d,b)}return b};e.PropertyList=function(){};l["com.workinman.utils.PropertyList"]=e.PropertyList;e.PropertyList.__name__=["com","workinman","utils","PropertyList"];e.PropertyList.parse=function(a){var a=new F.Fast(A.parse(a).firstElement()),b={};a.hasNode.resolve("dict")?b=e.PropertyList._parseDict(a.node.resolve("dict")):a.hasNode.resolve("array")&&(b=e.PropertyList._parseValue(a.node.resolve("array")));return b};e.PropertyList._parseDate=function(a){if(!e.PropertyList._dateRegex.match(a))throw'Invalid date "'+a+'" (only yyyy-mm-dd and yyyy-mm-ddThh:mm:ssZ supported)';a=e.PropertyList._dateRegex.matched(1);null!=e.PropertyList._dateRegex.matched(2)&&(a+=" "+
e.PropertyList._dateRegex.matched(2));return y.strDate(a)};e.PropertyList._parseDict=function(a){for(var b=null,c={},a=a.get_elements();a.hasNext();){var d=a.next();"key"==d.get_name()?b=d.get_innerData():null!=b&&(c[b]=e.PropertyList._parseValue(d))}return c};e.PropertyList._parseValue=function(a){var b=null;switch(a.get_name()){case "array":b=[];for(a=a.get_elements();a.hasNext();){var c=a.next();b.push(e.PropertyList._parseValue(c))}break;case "dict":b=e.PropertyList._parseDict(a);break;case "date":b=e.PropertyList._parseDate(a.get_innerData());break;case "string":b=a.get_innerData();break;case "data":b=a.get_innerData();break;case "true":b=!0;break;case "false":b=!1;break;case "real":b=t.parseFloat(a.get_innerData());break;case "integer":b=t.parseInt(a.get_innerData())}return b};e.pooling.LOG_LEVEL=l["com.workinman.utils.pooling.LOG_LEVEL"]={__ename__:["com","workinman","utils","pooling","LOG_LEVEL"],__constructs__:["NONE","NO_STACK","NEW_STACK","ALL_STACK"]};e.pooling.LOG_LEVEL.NONE=["NONE",0];e.pooling.LOG_LEVEL.NONE.toString=o;e.pooling.LOG_LEVEL.NONE.__enum__=e.pooling.LOG_LEVEL;e.pooling.LOG_LEVEL.NO_STACK=["NO_STACK",1];e.pooling.LOG_LEVEL.NO_STACK.toString=o;e.pooling.LOG_LEVEL.NO_STACK.__enum__=e.pooling.LOG_LEVEL;e.pooling.LOG_LEVEL.NEW_STACK=["NEW_STACK",2];e.pooling.LOG_LEVEL.NEW_STACK.toString=o;e.pooling.LOG_LEVEL.NEW_STACK.__enum__=e.pooling.LOG_LEVEL;e.pooling.LOG_LEVEL.ALL_STACK=["ALL_STACK",3];e.pooling.LOG_LEVEL.ALL_STACK.toString=o;e.pooling.LOG_LEVEL.ALL_STACK.__enum__=e.pooling.LOG_LEVEL;e.pooling.PoolStore=function(){this._pools=new w.StringMap};l["com.workinman.utils.pooling.PoolStore"]=e.pooling.PoolStore;e.pooling.PoolStore.__name__=["com","workinman","utils","pooling","PoolStore"];e.pooling.PoolStore.prototype={tracePoolReport:function(){for(var a="\nPool Report:\n\n",b=0,c=this._pools.keys();c.hasNext();){var d=c.next(),a=a+("\t"+d+"\n"),b=this._pools.get(d).get_created()-this._pools.get(d).get_numPooled(),a=a+("\t\tTotal Created: "+this._pools.get(d).get_created()+
" \t\tPool: "+this._pools.get(d).get_numPooled()+" \t\t\tLoose: "+b+" \t\t\tChange: "+(b-this._pools.get(d).get_loose()));this._pools.get(d).set_loose(b);a+="\n"}null},_testPool:function(a){if(!1==this._pools.exists(a))throw"Using pool "+a+" before it has been initialized is not allowed!";},_logReturn:function(a,b){switch(b.get_log()[1]){case 0:break;case 3:null;break;default:null}},_returnObject:function(a,b){this._testPool(a);var c=this._pools.get(a);c.poolObject(b);this._logReturn(a,c)},_logCreate:function(a,b){switch(b.get_log()[1]){case 1:null;break;case 2:null;break;case 3:null}},requestObject:function(a){this._testPool(a);var b=this._pools.get(a);this._logCreate(a,b);if(0<b.get_numPooled())return this._result=b.givePool(),this._result.poolActivate(),this._result;b.incrementCreated();if(0<b.get_cap()&&b.get_created()>b.get_cap())throw"Too many instances of "+a+" allocated - currently at "+b.get_created();this._poolClass=b.get_className();return N.createEmptyInstance(this._poolClass).build(q(this,this._returnObject))},initPool:function(a,b,c,d){null==d&&(d=-1);!0!=this._pools.exists(a)&&(null==c&&(c=e.pooling.LOG_LEVEL.NONE),this._pools.set(a,new e.pooling.PoolTracker(b,c,d)))},__class__:e.pooling.PoolStore};e.pooling.PoolTracker=function(a,b,c){this._pool=[];this._class=a;this._log=b;this._created=this._max=0;this._cap=c;this._loose=0};l["com.workinman.utils.pooling.PoolTracker"]=e.pooling.PoolTracker;e.pooling.PoolTracker.__name__=["com","workinman","utils","pooling","PoolTracker"];e.pooling.PoolTracker.prototype={givePool:function(){return this._pool.pop()},poolObject:function(a){this._pool.push(a);this._max=K.FMath.max(this._max,this._pool.length)},incrementCreated:function(){this._created++},set_loose:function(a){this._loose=a;return this.get_loose()},get_loose:function(){return this._loose},get_cap:function(){return this._cap},get_created:function(){return this._created},get_numPooled:function(){return this._pool.length},get_log:function(){return this._log},get_className:function(){return this._class},__class__:e.pooling.PoolTracker};P=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};l["flambe.Entity"]=P;P.__name__=["flambe","Entity"];P.__interfaces__=[s.Disposable];P.prototype={dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;break}b=c;c=d}},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=c.next;if(c==a)return null==b?this.firstComponent=d:b.init(this,d),delete this._compMap[c.get_name()],c.onRemoved(),c.init(null,null),!0;b=c;c=d}return!1},add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.init(this,null);a.onAdded();return this},__class__:P};k={Platform:function(){}};l["flambe.platform.Platform"]=k.Platform;k.Platform.__name__=["flambe","platform","Platform"];k.Platform.prototype={__class__:k.Platform};k.html={};k.html.HtmlPlatform=function(){};l["flambe.platform.html.HtmlPlatform"]=k.html.HtmlPlatform;k.html.HtmlPlatform.__name__=["flambe","platform","html","HtmlPlatform"];k.html.HtmlPlatform.__interfaces__=[k.Platform];k.html.HtmlPlatform.prototype={createRenderer:function(a){return new k.html.CanvasRenderer(a)},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getRenderer:function(){return this._renderer},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new k.BasicKeyboard;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getTouch:function(){return this._touch},getMouse:function(){return this._mouse},getPointer:function(){return this._pointer},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;B.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getTime:function(){return Date.now()/1E3},getStage:function(){return this._stage},loadAssetPack:function(a){return(new k.html.HtmlAssetPackLoader(this,a)).promise},useMonotonicTimer:function(){var a=this;this._lastUpdate=Date.now();var b=k.html.HtmlUtil.loadExtension("requestAnimationFrame").value;if(null!=b){var c=D.window.performance,d=null!=c&&k.html.HtmlUtil.polyfill("now",c);this.inRecursiveUpdate=!0;d?this._lastUpdate=c.now():null;var e=null,e=function(g){a.update(d?c.now():g);b(e,a.canvas)};b(e,this.canvas)}else this.useIntervalTimer()},useIntervalTimer:function(){var a=this;D.window.setInterval(function(){a.update(Date.now())},16)},init:function(){var a=this;k.html.HtmlUtil.fixAndroidMath();this.canvas=null;try{this.canvas=D.window.flambe.canvas}catch(b){}this.canvas.setAttribute("tabindex","0");this.canvas.style.outlineStyle="none";this.canvas.setAttribute("moz-opaque","true");this._stage=new k.html.HtmlStage(this.canvas);this._pointer=new k.BasicPointer;this._mouse=new k.html.HtmlMouse(this._pointer,this.canvas);this._renderer=this.createRenderer(this.canvas);this.mainLoop=new k.MainLoop;this.canUseMonotonicTimer=this.inRecursiveUpdate=this.musicPlaying=!1;this._canvas=this.canvas;this._container=this.canvas.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var c=0,d=function(b){if(!(1E3>b.timeStamp-c)){var d=a.canvas.getBoundingClientRect(),e=a.getX(b,d),d=a.getY(b,d);switch(b.type){case "mousedown":b.target==a.canvas&&(b.preventDefault(),a._mouse.submitDown(e,d,b.button),a.canvas.focus());break;case "mousemove":a._mouse.submitMove(e,d);break;case "mouseup":a._mouse.submitUp(e,d,b.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(e,d,"mousewheel"==b.type?b.wheelDelta/40:-b.detail)&&b.preventDefault()}}};D.window.addEventListener("mousedown",d,!1);D.window.addEventListener("mousemove",d,!1);D.window.addEventListener("mouseup",d,!1);this.canvas.addEventListener("mousewheel",d,!1);this.canvas.addEventListener("DOMMouseScroll",d,!1);var e="undefined"!=typeof D.window.ontouchstart,d="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(e||d){var g=new k.BasicTouch(this._pointer,e?4:D.navigator.msMaxTouchPoints);this._touch=g;d=function(b){var d=e?b.changedTouches:[b],h=b.target.getBoundingClientRect();c=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":b.preventDefault();k.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&k.html.HtmlUtil.hideMobileBrowser();for(b=0;b<d.length;){var i=d[b];++b;var m=a.getX(i,h),j=a.getY(i,h),i=(e?i.identifier:i.pointerId)|0;g.submitDown(i,m,j)}break;case "touchmove":case "MSPointerMove":b.preventDefault();for(b=0;b<d.length;)i=d[b],++b,m=a.getX(i,h),j=a.getY(i,h),i=(e?i.identifier:i.pointerId)|0,g.submitMove(i,m,j);break;case "touchend":case "touchcancel":case "MSPointerUp":b.preventDefault();for(b=0;b<d.length;)i=d[b],++b,m=a.getX(i,h),j=a.getY(i,h),i=(e?i.identifier:i.pointerId)|0,g.submitUp(i,m,j)}};e?(this.canvas.addEventListener("touchstart",d,!1),this.canvas.addEventListener("touchmove",d,!1),this.canvas.addEventListener("touchend",d,!1),this.canvas.addEventListener("touchcancel",d,!1)):(this.canvas.addEventListener("MSPointerDown",d,!1),this.canvas.addEventListener("MSPointerMove",d,!1),this.canvas.addEventListener("MSPointerUp",d,!1))}else this._touch=new k.DummyTouch;var h=D.window.onerror;D.window.onerror=function(a,b,c){B.uncaughtError.emit1(a);return null!=h?h(a,b,c):!1};var i=k.html.HtmlUtil.loadExtension("hidden",D.document);null!=i.value?(d=function(){B.hidden.set__(H.field(D.document,i.field))},d(null),D.document.addEventListener(i.prefix+"visibilitychange",d,!1)):(d=function(a){B.hidden.set__("pagehide"==a.type)},D.window.addEventListener("pageshow",d,!1),D.window.addEventListener("pagehide",d,!1));B.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this.escapeUpdateLoop=this._skipFrame=!1;this.useMonotonicTimer();null},__class__:k.html.HtmlPlatform};s.Value=function(a,b){this._value=a;this._changed=null!=b?new s.Signal2(b):null};l["flambe.util.Value"]=s.Value;s.Value.__name__=["flambe","util","Value"];s.Value.prototype={get_changed:function(){null==this._changed&&(this._changed=new s.Signal2);return this._changed},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit2(a,b));return a},watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},__class__:s.Value};s.SignalConnection=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};l["flambe.util.SignalConnection"]=s.SignalConnection;s.SignalConnection.__name__=["flambe","util","SignalConnection"];s.SignalConnection.__interfaces__=[s.Disposable];s.SignalConnection.prototype={dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},once:function(){this.stayInList=!1;return this},__class__:s.SignalConnection};s.SignalBase=function(a){this._head=null!=a?new s.SignalConnection(this,a):null;this._deferredTasks=null};l["flambe.util.SignalBase"]=s.SignalBase;s.SignalBase.__name__=["flambe","util","SignalBase"];s.SignalBase.prototype={listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=d;)c=d,d=d._next;null!=c?c._next=a:this._head=a}},didEmit:function(a){for(this._head=a;null!=this._deferredTasks;)this._deferredTasks.fn(),this._deferredTasks=this._deferredTasks.next},willEmit:function(){var a=this._head;this._head=s.SignalBase.DISPATCHING_SENTINEL;return a},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new s._SignalBase.Task(a);null!=b?b.next=a:this._deferredTasks=a},emit2:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},emit1:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},emit0:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},disconnect:function(a){var b=this;this._head==s.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},connectImpl:function(a,b){var c=this,d=new s.SignalConnection(this,a);this._head==s.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},__class__:s.SignalBase};s.Signal2=function(a){s.SignalBase.call(this,a)};l["flambe.util.Signal2"]=s.Signal2;s.Signal2.__name__=["flambe","util","Signal2"];s.Signal2.__super__=s.SignalBase;s.Signal2.prototype=v(s.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:s.Signal2});s.Signal1=function(a){s.SignalBase.call(this,a)};l["flambe.util.Signal1"]=s.Signal1;s.Signal1.__name__=["flambe","util","Signal1"];s.Signal1.__super__=s.SignalBase;s.Signal1.prototype=v(s.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:s.Signal1});O={AnimatedFloat:function(a,b){this._behavior=null;s.Value.call(this,a,b)}};l["flambe.animation.AnimatedFloat"]=O.AnimatedFloat;O.AnimatedFloat.__name__=["flambe","animation","AnimatedFloat"];O.AnimatedFloat.__super__=s.Value;O.AnimatedFloat.prototype=v(s.Value.prototype,{update:function(a){null!=this._behavior&&(s.Value.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},set__:function(a){this._behavior=null;return s.Value.prototype.set__.call(this,a)},__class__:O.AnimatedFloat});B=function(){};l["flambe.System"]=B;B.__name__=["flambe","System"];B.init=function(){B._calledInit||(B._platform.init(),B._calledInit=!0)};B.createTexture=function(a,b){return B._platform.getRenderer().createEmptyTexture(a,b)};E=function(){this._realDt=0};l["flambe.SpeedAdjuster"]=E;E.__name__=["flambe","SpeedAdjuster"];E.__super__=S;E.prototype=v(S.prototype,{onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},get_name:function(){return"SpeedAdjuster_4"},__class__:E});O.Behavior=function(){};l["flambe.animation.Behavior"]=O.Behavior;O.Behavior.__name__=["flambe","animation","Behavior"];O.Behavior.prototype={__class__:O.Behavior};u={Asset:function(){}};l["flambe.asset.Asset"]=u.Asset;u.Asset.__name__=["flambe","asset","Asset"];u.Asset.__interfaces__=[s.Disposable];u.Asset.prototype={__class__:u.Asset};u.AssetFormat=l["flambe.asset.AssetFormat"]={__ename__:["flambe","asset","AssetFormat"],__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data,ZIP,TAR".split(",")};u.AssetFormat.WEBP=["WEBP",0];u.AssetFormat.WEBP.toString=o;u.AssetFormat.WEBP.__enum__=u.AssetFormat;u.AssetFormat.JXR=["JXR",1];u.AssetFormat.JXR.toString=o;u.AssetFormat.JXR.__enum__=u.AssetFormat;u.AssetFormat.PNG=["PNG",2];u.AssetFormat.PNG.toString=o;u.AssetFormat.PNG.__enum__=u.AssetFormat;u.AssetFormat.JPG=["JPG",3];u.AssetFormat.JPG.toString=o;u.AssetFormat.JPG.__enum__=u.AssetFormat;u.AssetFormat.GIF=["GIF",4];u.AssetFormat.GIF.toString=o;u.AssetFormat.GIF.__enum__=u.AssetFormat;u.AssetFormat.DDS=["DDS",5];u.AssetFormat.DDS.toString=o;u.AssetFormat.DDS.__enum__=u.AssetFormat;u.AssetFormat.PVR=["PVR",6];u.AssetFormat.PVR.toString=o;u.AssetFormat.PVR.__enum__=u.AssetFormat;u.AssetFormat.PKM=["PKM",7];u.AssetFormat.PKM.toString=o;u.AssetFormat.PKM.__enum__=u.AssetFormat;u.AssetFormat.MP3=["MP3",8];u.AssetFormat.MP3.toString=o;u.AssetFormat.MP3.__enum__=u.AssetFormat;u.AssetFormat.M4A=["M4A",9];u.AssetFormat.M4A.toString=o;u.AssetFormat.M4A.__enum__=u.AssetFormat;u.AssetFormat.OPUS=["OPUS",10];u.AssetFormat.OPUS.toString=o;u.AssetFormat.OPUS.__enum__=u.AssetFormat;u.AssetFormat.OGG=["OGG",11];u.AssetFormat.OGG.toString=o;u.AssetFormat.OGG.__enum__=u.AssetFormat;u.AssetFormat.WAV=["WAV",12];u.AssetFormat.WAV.toString=o;u.AssetFormat.WAV.__enum__=u.AssetFormat;u.AssetFormat.Data=["Data",13];u.AssetFormat.Data.toString=o;u.AssetFormat.Data.__enum__=u.AssetFormat;u.AssetFormat.ZIP=["ZIP",14];u.AssetFormat.ZIP.toString=o;u.AssetFormat.ZIP.__enum__=u.AssetFormat;u.AssetFormat.TAR=["TAR",15];u.AssetFormat.TAR.toString=o;u.AssetFormat.TAR.__enum__=u.AssetFormat;u.AssetEntry=function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};l["flambe.asset.AssetEntry"]=u.AssetEntry;u.AssetEntry.__name__=["flambe","asset","AssetEntry"];u.AssetEntry.prototype={__class__:u.AssetEntry};u.AssetPack=function(){};l["flambe.asset.AssetPack"]=u.AssetPack;u.AssetPack.__name__=["flambe","asset","AssetPack"];u.AssetPack.__interfaces__=[s.Disposable];u.AssetPack.prototype={__class__:u.AssetPack};u.File=function(){};l["flambe.asset.File"]=u.File;u.File.__name__=["flambe","asset","File"];u.File.__interfaces__=[u.Asset];u.File.prototype={__class__:u.File};I=void 0;D=void 0;D=function(){};l["js.Browser"]=D;D.__name__=["js","Browser"];u.Manifest=function(){this._entries=[]};l["flambe.asset.Manifest"]=u.Manifest;u.Manifest.__name__=["flambe","asset","Manifest"];u.Manifest.build=function(a,b){null==b&&(b=!0);var c=H.field(ha.Meta.getType(u.Manifest).assets[0],a);if(null==c){if(b)throw s.Strings.withFields("Missing asset pack",["name",a]);return null}var d=new u.Manifest;d.set_relativeBasePath("assets");for(var e=0;e<c.length;){var g=c[e];++e;var h=g.name,i=a+"/"+h+"?v="+t.string(g.md5),j=u.Manifest.inferFormat(h);j!=u.AssetFormat.Data&&(h=s.Strings.removeFileExtension(h));d.add(h,i,g.bytes,j)}return d};u.Manifest.inferFormat=function(a){a=s.Strings.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return u.AssetFormat.GIF;case "jpg":case "jpeg":return u.AssetFormat.JPG;case "jxr":case "wdp":return u.AssetFormat.JXR;case "png":return u.AssetFormat.PNG;case "webp":return u.AssetFormat.WEBP;case "dds":return u.AssetFormat.DDS;case "pvr":return u.AssetFormat.PVR;case "pkm":return u.AssetFormat.PKM;case "m4a":return u.AssetFormat.M4A;case "mp3":return u.AssetFormat.MP3;case "ogg":return u.AssetFormat.OGG;case "opus":return u.AssetFormat.OPUS;case "wav":return u.AssetFormat.WAV;case "zip":return u.AssetFormat.ZIP;case "tar":return u.AssetFormat.TAR}else null;return u.AssetFormat.Data};u.Manifest.prototype={set_externalBasePath:function(a){this._externalBasePath=a;null!=a&&null;return a},get_externalBasePath:function(){return this._externalBasePath},set_relativeBasePath:function(a){this._relativeBasePath=a;null!=a&&null;return a},get_relativeBasePath:function(){return this._relativeBasePath},getFullURL:function(a){var b=null!=this.get_externalBasePath()&&u.Manifest._supportsCrossOrigin?this.get_externalBasePath():this.get_relativeBasePath(),c=null!=this.get_externalBasePath()?this.get_externalBasePath():this.get_relativeBasePath();a.format==u.AssetFormat.Data&&(c=b);return null!=c?s.Strings.joinPath(c,a.url):a.url},iterator:function(){return y.iter(this._entries)},add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=u.Manifest.inferFormat(b));a=new u.AssetEntry(a,b,d,c);this._entries.push(a);return a},__class__:u.Manifest};M={Benchmark:function(){}};l["flambe.debug.Benchmark"]=M.Benchmark;M.Benchmark.__name__=["flambe","debug","Benchmark"];M.Benchmark.start=function(a){M.Benchmark._calledStart=!0;M.Benchmark._calledCleanup=!1;M.Benchmark._fn=a;M.Benchmark._root=new P;M.Benchmark._sprites=[];M.Benchmark._timeStart=B._platform.getTime();B.root.addChild(M.Benchmark._root);R.delay(M.Benchmark.benchmark,1E3)};M.Benchmark.benchmark=function(){for(var a,b=0;250>b;)b++,a=new r.Sprite,a.set_pointerEnabled(!1),M.Benchmark._root.add(a),M.Benchmark._sprites.push(a);5E3>M.Benchmark._sprites.length?R.delay(M.Benchmark.benchmark,100):M.Benchmark.cleanup()};M.Benchmark.cleanup=function(){for(var a=0,b=M.Benchmark._sprites.length;a<b;){var c=a++;M.Benchmark._root.remove(M.Benchmark._sprites[c])}B.root.removeChild(M.Benchmark._root);M.Benchmark._sprites=null;a=B._platform.getTime()-M.Benchmark._timeStart;a=Math.round(1E4*(1/a));M.Benchmark._benchmark=a;M.Benchmark._calledCleanup=!0;null!=M.Benchmark._fn&&M.Benchmark._fn.apply(null,[M.Benchmark._benchmark])};r.BlendMode=l["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:["Normal","Add","Mask","Copy"]};r.BlendMode.Normal=["Normal",0];r.BlendMode.Normal.toString=o;r.BlendMode.Normal.__enum__=r.BlendMode;r.BlendMode.Add=["Add",1];r.BlendMode.Add.toString=o;r.BlendMode.Add.__enum__=r.BlendMode;r.BlendMode.Mask=["Mask",2];r.BlendMode.Mask.toString=o;r.BlendMode.Mask.__enum__=r.BlendMode;r.BlendMode.Copy=["Copy",3];r.BlendMode.Copy.toString=o;r.BlendMode.Copy.__enum__=r.BlendMode;r.FillSprite=function(a,b,c){r.Sprite.call(this);this.color=a;this.width=new O.AnimatedFloat(b);this.height=new O.AnimatedFloat(c)};l["flambe.display.FillSprite"]=r.FillSprite;r.FillSprite.__name__=["flambe","display","FillSprite"];r.FillSprite.__super__=r.Sprite;r.FillSprite.prototype=v(r.Sprite.prototype,{onUpdate:function(a){r.Sprite.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},getNaturalHeight:function(){return this.height._value},getNaturalWidth:function(){return this.width._value},draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},__class__:r.FillSprite});r.Glyph=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};l["flambe.display.Glyph"]=r.Glyph;r.Glyph.__name__=["flambe","display","Glyph"];r.Glyph.prototype={setKerning:function(a,b){null==this._kernings&&(this._kernings=new w.IntMap);this._kernings.set(a,b)},getKerning:function(a){return null!=this._kernings?this._kernings.get(a)|0:0},draw:function(a,b,c){0<this.width&&a.drawSubImage(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},__class__:r.Glyph};r.Font=function(a,b){this.name=b;this._pack=a;this.reload()};l["flambe.display.Font"]=r.Font;r.Font.__name__=["flambe","display","Font"];r.Font.prototype={reload:function(){this._glyphs=new w.IntMap;this._glyphs.set(r.Font.NEWLINE.charCode,r.Font.NEWLINE);for(var a=new r._Font.ConfigParser(this._pack.getFile(this.name+".fnt").toString()),b=new w.IntMap,c=this.name.lastIndexOf("/"),c=0<=c?y.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var e=a.pairs();e.hasNext();){var g=e.next();switch(g.key){case "size":this.size=g.getInt()}}break;case "page":for(var e=0,h=null,i=a.pairs();i.hasNext();)switch(g=i.next(),g.key){case "id":e=g.getInt();break;case "file":h=g.getString()}b.set(e,this._pack.getTexture(c+s.Strings.removeFileExtension(h)));break;case "char":e=null;for(h=a.pairs();h.hasNext();)switch(g=h.next(),g.key){case "id":e=new r.Glyph(g.getInt());break;case "x":e.x=g.getInt();break;case "y":e.y=g.getInt();break;case "width":e.width=g.getInt();break;case "height":e.height=g.getInt();break;case "page":e.page=b.get(g.getInt());break;case "xoffset":e.xOffset=g.getInt();break;case "yoffset":e.yOffset=g.getInt();break;case "xadvance":e.xAdvance=g.getInt()}this._glyphs.set(e.charCode,e);break;case "kerning":e=null;h=-1;for(i=a.pairs();i.hasNext();)switch(g=i.next(),g.key){case "first":e=this._glyphs.get(g.getInt());break;case "second":h=g.getInt();break;case "amount":e.setKerning(h,g.getInt())}}},layoutText:function(a,b,c){null==c&&(c=0);null==b&&(b=r.TextAlign.Left);return new r.TextLayout(this,a,b,c)},getGlyphs:function(a){for(var b=[],c=0,d=a.length;c<d;){var e=c++,e=this._glyphs.get(a.charCodeAt(e));null!=e?b.push(e):null}return b},__class__:r.Font};r.TextAlign=l["flambe.display.TextAlign"]={__ename__:["flambe","display","TextAlign"],__constructs__:["Left","Center","Right"]};r.TextAlign.Left=["Left",0];r.TextAlign.Left.toString=o;r.TextAlign.Left.__enum__=r.TextAlign;r.TextAlign.Center=["Center",1];r.TextAlign.Center.toString=o;r.TextAlign.Center.__enum__=r.TextAlign;r.TextAlign.Right=["Right",2];r.TextAlign.Right.toString=o;r.TextAlign.Right.__enum__=r.TextAlign;r.TextLayout=function(a,b,c,d){this.lines=0;var e=this;this._font=a;this._glyphs=[];this._offsets=[];this.bounds=new K.Rectangle;for(var g=[],h=b.length,i=0;i<h;){var j=i++,k=b.charCodeAt(j),k=a._glyphs.get(k);null!=k?this._glyphs.push(k):null}for(var b=-1,l=0,n=0,h=a._glyphs.get(10),i=function(){e.bounds.width=K.FMath.max(e.bounds.width,l);e.bounds.height+=n;g[e.lines]=l;n=l=0;++e.lines},j=0;j<this._glyphs.length;){k=this._glyphs[j];this._offsets[j]=l;var o=0<d&&l+k.width>d;o||k==h?(o&&(0<=b?(this._glyphs[b]=h,l=this._offsets[b],j=b):this._glyphs.splice(j,0,h)),b=-1,n=a.size,i()):(32==k.charCode&&(b=j),l+=k.xAdvance,n=K.FMath.max(n,k.height+k.yOffset),j+1<this._glyphs.length&&(l+=k.getKerning(this._glyphs[j+1].charCode)));++j}i();for(var j=0,b=r.TextLayout.getAlignOffset(c,g[0],d),h=1.79769313486231E308,i=-1.79769313486231E308,q=o=0,s=this._glyphs.length;q<s;){k=this._glyphs[q];10==k.charCode&&(j+=a.size,++o,b=r.TextLayout.getAlignOffset(c,g[o],d));this._offsets[q]+=b;var t=j+k.yOffset,h=h<t?h:t,i=K.FMath.max(i,t+k.height);++q}this.bounds.x=r.TextLayout.getAlignOffset(c,this.bounds.width,d);this.bounds.y=h;this.bounds.height=i-h};l["flambe.display.TextLayout"]=r.TextLayout;r.TextLayout.__name__=["flambe","display","TextLayout"];r.TextLayout.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return(c-b)/2}};r.TextLayout.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var e=this._glyphs[c];10==e.charCode?b+=this._font.size:e.draw(a,this._offsets[c],b);++c}},__class__:r.TextLayout};r._Font={};r._Font.ConfigParser=function(a){this._configText=a;this._keywordPattern=new Z("([a-z]+)(.*)","");this._pairPattern=new Z('([a-z]+)=("[^"]*"|[^\\s]+)',"")};l["flambe.display._Font.ConfigParser"]=r._Font.ConfigParser;r._Font.ConfigParser.__name__=["flambe","display","_Font","ConfigParser"];r._Font.ConfigParser.advance=function(a,b){var c=b.matchedPos();return y.substr(a,c.pos+c.len,a.length)};r._Font.ConfigParser.prototype={pairs:function(){var a=this,b=this._pairText;return{next:function(){b=r._Font.ConfigParser.advance(b,a._pairPattern);return new r._Font.ConfigPair(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},keywords:function(){var a=this,b=this._configText;return{next:function(){b=r._Font.ConfigParser.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},__class__:r._Font.ConfigParser};r._Font.ConfigPair=function(a,b){this.key=a;this._value=b};l["flambe.display._Font.ConfigPair"]=r._Font.ConfigPair;r._Font.ConfigPair.__name__=["flambe","display","_Font","ConfigPair"];r._Font.ConfigPair.prototype={getString:function(){return 34!=this._value.charCodeAt(0)?null:y.substr(this._value,1,this._value.length-2)},getInt:function(){return t.parseInt(this._value)},__class__:r._Font.ConfigPair};r.Graphics=function(){};l["flambe.display.Graphics"]=r.Graphics;r.Graphics.__name__=["flambe","display","Graphics"];r.Graphics.prototype={__class__:r.Graphics};r.Orientation=l["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};r.Orientation.Portrait=["Portrait",0];r.Orientation.Portrait.toString=o;r.Orientation.Portrait.__enum__=r.Orientation;r.Orientation.Landscape=["Landscape",1];r.Orientation.Landscape.toString=o;r.Orientation.Landscape.__enum__=r.Orientation;r.TextSprite=function(a,b){null==b&&(b="");this._layout=null;var c=this;r.Sprite.call(this);this._font=a;this._text=b;this._align=r.TextAlign.Left;this._flags|=64;this.wrapWidth=new O.AnimatedFloat(0,function(){c._flags|=64})};l["flambe.display.TextSprite"]=r.TextSprite;r.TextSprite.__name__=["flambe","display","TextSprite"];r.TextSprite.__super__=r.Sprite;r.TextSprite.prototype=v(r.Sprite.prototype,{onUpdate:function(a){r.Sprite.prototype.onUpdate.call(this,a);this.wrapWidth.update(a)},updateLayout:function(){0!=(this._flags&64)&&(this._flags&=-65,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value))},set_font:function(a){a!=this._font&&(this._font=a,this._flags|=64);return a},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=64);return a},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,b)},getNaturalHeight:function(){this.updateLayout();return this._layout.lines*this._font.size},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},draw:function(a){this.updateLayout();this._layout.draw(a,this._align)},__class__:r.TextSprite});r.Texture=function(){};l["flambe.display.Texture"]=r.Texture;r.Texture.__name__=["flambe","display","Texture"];r.Texture.__interfaces__=[u.Asset];r.Texture.prototype={__class__:r.Texture};i={};i.Key=l["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};i.Key.A=["A",0];i.Key.A.toString=o;i.Key.A.__enum__=i.Key;i.Key.B=["B",1];i.Key.B.toString=o;i.Key.B.__enum__=i.Key;i.Key.C=["C",2];i.Key.C.toString=o;i.Key.C.__enum__=i.Key;i.Key.D=["D",3];i.Key.D.toString=o;i.Key.D.__enum__=i.Key;i.Key.E=["E",4];i.Key.E.toString=o;i.Key.E.__enum__=i.Key;i.Key.F=["F",5];i.Key.F.toString=o;i.Key.F.__enum__=i.Key;i.Key.G=["G",6];i.Key.G.toString=o;i.Key.G.__enum__=i.Key;i.Key.H=["H",7];i.Key.H.toString=o;i.Key.H.__enum__=i.Key;i.Key.I=["I",8];i.Key.I.toString=o;i.Key.I.__enum__=i.Key;i.Key.J=["J",9];i.Key.J.toString=o;i.Key.J.__enum__=i.Key;i.Key.K=["K",10];i.Key.K.toString=o;i.Key.K.__enum__=i.Key;i.Key.L=["L",11];i.Key.L.toString=o;i.Key.L.__enum__=i.Key;i.Key.M=["M",12];i.Key.M.toString=o;i.Key.M.__enum__=i.Key;i.Key.N=["N",13];i.Key.N.toString=o;i.Key.N.__enum__=i.Key;i.Key.O=["O",14];i.Key.O.toString=o;i.Key.O.__enum__=i.Key;i.Key.P=["P",15];i.Key.P.toString=o;i.Key.P.__enum__=i.Key;i.Key.Q=["Q",16];i.Key.Q.toString=o;i.Key.Q.__enum__=i.Key;i.Key.R=["R",17];i.Key.R.toString=o;i.Key.R.__enum__=i.Key;i.Key.S=["S",18];i.Key.S.toString=o;i.Key.S.__enum__=i.Key;i.Key.T=["T",19];i.Key.T.toString=o;i.Key.T.__enum__=i.Key;i.Key.U=["U",20];i.Key.U.toString=o;i.Key.U.__enum__=i.Key;i.Key.V=["V",21];i.Key.V.toString=o;i.Key.V.__enum__=i.Key;i.Key.W=["W",22];i.Key.W.toString=o;i.Key.W.__enum__=i.Key;i.Key.X=["X",23];i.Key.X.toString=o;i.Key.X.__enum__=i.Key;i.Key.Y=["Y",24];i.Key.Y.toString=o;i.Key.Y.__enum__=i.Key;i.Key.Z=["Z",25];i.Key.Z.toString=o;i.Key.Z.__enum__=i.Key;i.Key.Number0=["Number0",26];i.Key.Number0.toString=o;i.Key.Number0.__enum__=i.Key;i.Key.Number1=["Number1",27];i.Key.Number1.toString=o;i.Key.Number1.__enum__=i.Key;i.Key.Number2=["Number2",28];i.Key.Number2.toString=o;i.Key.Number2.__enum__=i.Key;i.Key.Number3=["Number3",29];i.Key.Number3.toString=o;i.Key.Number3.__enum__=i.Key;i.Key.Number4=["Number4",30];i.Key.Number4.toString=o;i.Key.Number4.__enum__=i.Key;i.Key.Number5=["Number5",31];i.Key.Number5.toString=o;i.Key.Number5.__enum__=i.Key;i.Key.Number6=["Number6",32];i.Key.Number6.toString=o;i.Key.Number6.__enum__=i.Key;i.Key.Number7=["Number7",33];i.Key.Number7.toString=o;i.Key.Number7.__enum__=i.Key;i.Key.Number8=["Number8",34];i.Key.Number8.toString=o;i.Key.Number8.__enum__=i.Key;i.Key.Number9=["Number9",35];i.Key.Number9.toString=o;i.Key.Number9.__enum__=i.Key;i.Key.Numpad0=["Numpad0",36];i.Key.Numpad0.toString=o;i.Key.Numpad0.__enum__=i.Key;i.Key.Numpad1=["Numpad1",37];i.Key.Numpad1.toString=o;i.Key.Numpad1.__enum__=i.Key;i.Key.Numpad2=["Numpad2",38];i.Key.Numpad2.toString=o;i.Key.Numpad2.__enum__=i.Key;i.Key.Numpad3=["Numpad3",39];i.Key.Numpad3.toString=o;i.Key.Numpad3.__enum__=i.Key;i.Key.Numpad4=["Numpad4",40];i.Key.Numpad4.toString=o;i.Key.Numpad4.__enum__=i.Key;i.Key.Numpad5=["Numpad5",41];i.Key.Numpad5.toString=o;i.Key.Numpad5.__enum__=i.Key;i.Key.Numpad6=["Numpad6",42];i.Key.Numpad6.toString=o;i.Key.Numpad6.__enum__=i.Key;i.Key.Numpad7=["Numpad7",43];i.Key.Numpad7.toString=o;i.Key.Numpad7.__enum__=i.Key;i.Key.Numpad8=["Numpad8",44];i.Key.Numpad8.toString=o;i.Key.Numpad8.__enum__=i.Key;i.Key.Numpad9=["Numpad9",45];i.Key.Numpad9.toString=o;i.Key.Numpad9.__enum__=i.Key;i.Key.NumpadAdd=["NumpadAdd",46];i.Key.NumpadAdd.toString=o;i.Key.NumpadAdd.__enum__=i.Key;i.Key.NumpadDecimal=["NumpadDecimal",47];i.Key.NumpadDecimal.toString=o;i.Key.NumpadDecimal.__enum__=i.Key;i.Key.NumpadDivide=["NumpadDivide",48];i.Key.NumpadDivide.toString=o;i.Key.NumpadDivide.__enum__=i.Key;i.Key.NumpadEnter=["NumpadEnter",49];i.Key.NumpadEnter.toString=o;i.Key.NumpadEnter.__enum__=i.Key;i.Key.NumpadMultiply=["NumpadMultiply",50];i.Key.NumpadMultiply.toString=o;i.Key.NumpadMultiply.__enum__=i.Key;i.Key.NumpadSubtract=["NumpadSubtract",51];i.Key.NumpadSubtract.toString=o;i.Key.NumpadSubtract.__enum__=i.Key;i.Key.F1=["F1",52];i.Key.F1.toString=o;i.Key.F1.__enum__=i.Key;i.Key.F2=["F2",53];i.Key.F2.toString=o;i.Key.F2.__enum__=i.Key;i.Key.F3=["F3",54];i.Key.F3.toString=o;i.Key.F3.__enum__=i.Key;i.Key.F4=["F4",55];i.Key.F4.toString=o;i.Key.F4.__enum__=i.Key;i.Key.F5=["F5",56];i.Key.F5.toString=o;i.Key.F5.__enum__=i.Key;i.Key.F6=["F6",57];i.Key.F6.toString=o;i.Key.F6.__enum__=i.Key;i.Key.F7=["F7",58];i.Key.F7.toString=o;i.Key.F7.__enum__=i.Key;i.Key.F8=["F8",59];i.Key.F8.toString=o;i.Key.F8.__enum__=i.Key;i.Key.F9=["F9",60];i.Key.F9.toString=o;i.Key.F9.__enum__=i.Key;i.Key.F10=["F10",61];i.Key.F10.toString=o;i.Key.F10.__enum__=i.Key;i.Key.F11=["F11",62];i.Key.F11.toString=o;i.Key.F11.__enum__=i.Key;i.Key.F12=["F12",63];i.Key.F12.toString=o;i.Key.F12.__enum__=i.Key;i.Key.F13=["F13",64];i.Key.F13.toString=o;i.Key.F13.__enum__=i.Key;i.Key.F14=["F14",65];i.Key.F14.toString=o;i.Key.F14.__enum__=i.Key;i.Key.F15=["F15",66];i.Key.F15.toString=o;i.Key.F15.__enum__=i.Key;i.Key.Left=["Left",67];i.Key.Left.toString=o;i.Key.Left.__enum__=i.Key;i.Key.Up=["Up",68];i.Key.Up.toString=o;i.Key.Up.__enum__=i.Key;i.Key.Right=["Right",69];i.Key.Right.toString=o;i.Key.Right.__enum__=i.Key;i.Key.Down=["Down",70];i.Key.Down.toString=o;i.Key.Down.__enum__=i.Key;i.Key.Alt=["Alt",71];i.Key.Alt.toString=o;i.Key.Alt.__enum__=i.Key;i.Key.Backquote=["Backquote",72];i.Key.Backquote.toString=o;i.Key.Backquote.__enum__=i.Key;i.Key.Backslash=["Backslash",73];i.Key.Backslash.toString=o;i.Key.Backslash.__enum__=i.Key;i.Key.Backspace=["Backspace",74];i.Key.Backspace.toString=o;i.Key.Backspace.__enum__=i.Key;i.Key.CapsLock=["CapsLock",75];i.Key.CapsLock.toString=o;i.Key.CapsLock.__enum__=i.Key;i.Key.Comma=["Comma",76];i.Key.Comma.toString=o;i.Key.Comma.__enum__=i.Key;i.Key.Command=["Command",77];i.Key.Command.toString=o;i.Key.Command.__enum__=i.Key;i.Key.Control=["Control",78];i.Key.Control.toString=o;i.Key.Control.__enum__=i.Key;i.Key.Delete=["Delete",79];i.Key.Delete.toString=o;i.Key.Delete.__enum__=i.Key;i.Key.End=["End",80];i.Key.End.toString=o;i.Key.End.__enum__=i.Key;i.Key.Enter=["Enter",81];i.Key.Enter.toString=o;i.Key.Enter.__enum__=i.Key;i.Key.Equals=["Equals",82];i.Key.Equals.toString=o;i.Key.Equals.__enum__=i.Key;i.Key.Escape=["Escape",83];i.Key.Escape.toString=o;i.Key.Escape.__enum__=i.Key;i.Key.Home=["Home",84];i.Key.Home.toString=o;i.Key.Home.__enum__=i.Key;i.Key.Insert=["Insert",85];i.Key.Insert.toString=o;i.Key.Insert.__enum__=i.Key;i.Key.LeftBracket=["LeftBracket",86];i.Key.LeftBracket.toString=o;i.Key.LeftBracket.__enum__=i.Key;i.Key.Minus=["Minus",87];i.Key.Minus.toString=o;i.Key.Minus.__enum__=i.Key;i.Key.PageDown=["PageDown",88];i.Key.PageDown.toString=o;i.Key.PageDown.__enum__=i.Key;i.Key.PageUp=["PageUp",89];i.Key.PageUp.toString=o;i.Key.PageUp.__enum__=i.Key;i.Key.Period=["Period",90];i.Key.Period.toString=o;i.Key.Period.__enum__=i.Key;i.Key.Quote=["Quote",91];i.Key.Quote.toString=o;i.Key.Quote.__enum__=i.Key;i.Key.RightBracket=["RightBracket",92];i.Key.RightBracket.toString=o;i.Key.RightBracket.__enum__=i.Key;i.Key.Semicolon=["Semicolon",93];i.Key.Semicolon.toString=o;i.Key.Semicolon.__enum__=i.Key;i.Key.Shift=["Shift",94];i.Key.Shift.toString=o;i.Key.Shift.__enum__=i.Key;i.Key.Slash=["Slash",95];i.Key.Slash.toString=o;i.Key.Slash.__enum__=i.Key;i.Key.Space=["Space",96];i.Key.Space.toString=o;i.Key.Space.__enum__=i.Key;i.Key.Tab=["Tab",97];i.Key.Tab.toString=o;i.Key.Tab.__enum__=i.Key;i.Key.Menu=["Menu",98];i.Key.Menu.toString=o;i.Key.Menu.__enum__=i.Key;i.Key.Search=["Search",99];i.Key.Search.toString=o;i.Key.Search.__enum__=i.Key;i.Key.Unknown=function(a){a=["Unknown",100,a];a.__enum__=i.Key;a.toString=o;return a};i.KeyboardEvent=function(){this.init(0,null)};l["flambe.input.KeyboardEvent"]=i.KeyboardEvent;i.KeyboardEvent.__name__=["flambe","input","KeyboardEvent"];i.KeyboardEvent.prototype={init:function(a,b){this.id=a;this.key=b},__class__:i.KeyboardEvent};i.MouseButton=l["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};i.MouseButton.Left=["Left",0];i.MouseButton.Left.toString=o;i.MouseButton.Left.__enum__=i.MouseButton;i.MouseButton.Middle=["Middle",1];i.MouseButton.Middle.toString=o;i.MouseButton.Middle.__enum__=i.MouseButton;i.MouseButton.Right=["Right",2];i.MouseButton.Right.toString=o;i.MouseButton.Right.__enum__=i.MouseButton;i.MouseButton.Unknown=function(a){a=["Unknown",3,a];a.__enum__=i.MouseButton;a.toString=o;return a};i.MouseCursor=l["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};i.MouseCursor.Default=["Default",0];i.MouseCursor.Default.toString=o;i.MouseCursor.Default.__enum__=i.MouseCursor;i.MouseCursor.Button=["Button",1];i.MouseCursor.Button.toString=o;i.MouseCursor.Button.__enum__=i.MouseCursor;i.MouseCursor.None=["None",2];i.MouseCursor.None.toString=o;i.MouseCursor.None.__enum__=i.MouseCursor;i.MouseEvent=function(){this.init(0,0,0,null)};l["flambe.input.MouseEvent"]=i.MouseEvent;i.MouseEvent.__name__=["flambe","input","MouseEvent"];i.MouseEvent.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:i.MouseEvent};i.EventSource=l["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};i.EventSource.Mouse=function(a){a=["Mouse",0,a];a.__enum__=i.EventSource;a.toString=o;return a};i.EventSource.Touch=function(a){a=["Touch",1,a];a.__enum__=i.EventSource;a.toString=o;return a};i.PointerEvent=function(){this.init(0,0,0,null,null)};l["flambe.input.PointerEvent"]=i.PointerEvent;i.PointerEvent.__name__=["flambe","input","PointerEvent"];i.PointerEvent.prototype={init:function(a,b,c,d,e){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._stopped=!1},__class__:i.PointerEvent};i.TouchPoint=function(a){this.id=a;this._source=i.EventSource.Touch(this)};l["flambe.input.TouchPoint"]=i.TouchPoint;i.TouchPoint.__name__=["flambe","input","TouchPoint"];i.TouchPoint.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:i.TouchPoint};K.FMath=function(){};l["flambe.math.FMath"]=K.FMath;K.FMath.__name__=["flambe","math","FMath"];K.FMath.max=function(a,b){return a>b?a:b};K.FMath.clamp=function(a,b,c){return a<b?b:a>c?c:a};K.Matrix=function(){this.identity()};l["flambe.math.Matrix"]=K.Matrix;K.Matrix.__name__=["flambe","math","Matrix"];K.Matrix.prototype={inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},determinant:function(){return this.m00*this.m11-this.m01*this.m10},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},compose:function(a,b,c,d,e){var g=Math.sin(e),e=Math.cos(e);this.set(e*c,g*c,-g*d,e*d,a,b)},identity:function(){this.set(1,0,0,1,0,0)},set:function(a,b,c,d,e,g){this.m00=a;this.m01=c;this.m02=e;this.m10=b;this.m11=d;this.m12=g},__class__:K.Matrix};K.Rectangle=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};l["flambe.math.Rectangle"]=K.Rectangle;K.Rectangle.__name__=["flambe","math","Rectangle"];K.Rectangle.prototype={contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},__class__:K.Rectangle};k.BasicAsset=function(){this._disposed=!1};l["flambe.platform.BasicAsset"]=k.BasicAsset;k.BasicAsset.__name__=["flambe","platform","BasicAsset"];k.BasicAsset.__interfaces__=[u.Asset];k.BasicAsset.prototype={onDisposed:function(){null},dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},__class__:k.BasicAsset};k.BasicAssetPackLoader=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new s.Promise;this._bytesLoaded=new w.StringMap;this._pack=new k._BasicAssetPackLoader.BasicAssetPack(b,this);var d=W.array(b);if(0==d.length)this.handleSuccess();else{for(var e=new w.StringMap,g=0;g<d.length;){var h=d[g];++g;var i=e.get(h.name);null==i&&(i=[],e.set(h.name,i));i.push(h)}this._assetsRemaining=W.count(e);for(d=function(){return function(a){return function(){return function(){return a.iterator()}}()}}()(e)();d.hasNext();)i=d.next(),i=[i],this.pickBestEntry(i[0],function(a){return function(d){if(null!=d){var e=b.getFullURL(d);try{c.loadEntry(e,d)}catch(g){c.handleError(d,"Unexpected error: "+t.string(g))}e=c.promise;e.set_total(e._total+d.bytes)}else d=a[0][0],k.BasicAssetPackLoader.isAudio(d.format)?c.handleLoad(d,k.DummySound.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(i))}};l["flambe.platform.BasicAssetPackLoader"]=k.BasicAssetPackLoader;k.BasicAssetPackLoader.__name__=["flambe","platform","BasicAssetPackLoader"];k.BasicAssetPackLoader.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};k.BasicAssetPackLoader.prototype={handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},handleError:function(a,b){this.promise.error.emit1(s.Strings.withFields(b,["url",a.url]))},handleSuccess:function(){this.promise.set_result(this._pack)},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=function(a){return function(){return a.iterator()}}(this._bytesLoaded)();d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files;break;case 14:case 15:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},getAssetFormats:function(){null},loadEntry:function(){null},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var g=0;g<a.length;){var h=a[g];++g;if(h.format==e){b(h);return}}}b(null)})},onDisposed:function(){},__class__:k.BasicAssetPackLoader};k._BasicAssetPackLoader={};k._BasicAssetPackLoader.BasicAssetPack=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new w.StringMap;this.sounds=new w.StringMap;this.files=new w.StringMap};l["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=k._BasicAssetPackLoader.BasicAssetPack;k._BasicAssetPackLoader.BasicAssetPack.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];k._BasicAssetPackLoader.BasicAssetPack.__interfaces__=[u.AssetPack];k._BasicAssetPackLoader.BasicAssetPack.prototype={get_manifest:function(){return this._manifest},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=function(a){return function(){return a.iterator()}}(this.textures)();a.hasNext();)a.next().dispose();this.textures=null;for(a=function(a){return function(){return a.iterator()}}(this.sounds)();a.hasNext();)a.next().dispose();this.sounds=null;for(a=function(a){return function(){return a.iterator()}}(this.files)();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw s.Strings.withFields("Missing file",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw s.Strings.withFields("Missing sound",["name",a]);return c},getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw s.Strings.withFields("Missing texture",["name",a]);return c},__class__:k._BasicAssetPackLoader.BasicAssetPack,__properties__:{get_manifest:"get_manifest"}};k.BasicFile=function(a){k.BasicAsset.call(this);this._content=a};l["flambe.platform.BasicFile"]=k.BasicFile;k.BasicFile.__name__=["flambe","platform","BasicFile"];k.BasicFile.__interfaces__=[u.File];k.BasicFile.__super__=k.BasicAsset;k.BasicFile.prototype=v(k.BasicAsset.prototype,{onDisposed:function(){this._content=null},toString:function(){return this._content},__class__:k.BasicFile});E={KeyboardSystem:function(){}};l["flambe.subsystem.KeyboardSystem"]=E.KeyboardSystem;E.KeyboardSystem.__name__=["flambe","subsystem","KeyboardSystem"];E.KeyboardSystem.prototype={__class__:E.KeyboardSystem};k.BasicKeyboard=function(){this.down=new s.Signal1;this.up=new s.Signal1;this.backButton=new s.Signal0;this._keyStates=new w.IntMap};l["flambe.platform.BasicKeyboard"]=k.BasicKeyboard;k.BasicKeyboard.__name__=["flambe","platform","BasicKeyboard"];k.BasicKeyboard.__interfaces__=[E.KeyboardSystem];k.BasicKeyboard.prototype={submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),k.BasicKeyboard._sharedEvent.init(k.BasicKeyboard._sharedEvent.id+1,k.KeyCodes.toKey(a)),this.up.emit1(k.BasicKeyboard._sharedEvent))},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit0(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),k.BasicKeyboard._sharedEvent.init(k.BasicKeyboard._sharedEvent.id+1,k.KeyCodes.toKey(a)),this.down.emit1(k.BasicKeyboard._sharedEvent));return!0},__class__:k.BasicKeyboard};E.MouseSystem=function(){};l["flambe.subsystem.MouseSystem"]=E.MouseSystem;E.MouseSystem.__name__=["flambe","subsystem","MouseSystem"];E.MouseSystem.prototype={__class__:E.MouseSystem};k.BasicMouse=function(a){this._pointer=a;this._source=i.EventSource.Mouse(k.BasicMouse._sharedEvent);this.down=new s.Signal1;this.move=new s.Signal1;this.up=new s.Signal1;this.scroll=new s.Signal1;this._y=this._x=0;this._cursor=i.MouseCursor.Default;this._buttonStates=new w.IntMap};l["flambe.platform.BasicMouse"]=k.BasicMouse;k.BasicMouse.__name__=["flambe","platform","BasicMouse"];k.BasicMouse.__interfaces__=[E.MouseSystem];k.BasicMouse.prototype={prepare:function(a,b,c){this._x=a;this._y=b;k.BasicMouse._sharedEvent.init(k.BasicMouse._sharedEvent.id+1,a,b,c)},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit1(c);return!0},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,k.MouseCodes.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit1(k.BasicMouse._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit1(k.BasicMouse._sharedEvent)},submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,k.MouseCodes.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit1(k.BasicMouse._sharedEvent))},set_cursor:function(a){return this._cursor=a},__class__:k.BasicMouse,__properties__:{set_cursor:"set_cursor"}};E.PointerSystem=function(){};l["flambe.subsystem.PointerSystem"]=E.PointerSystem;E.PointerSystem.__name__=["flambe","subsystem","PointerSystem"];E.PointerSystem.prototype={__class__:E.PointerSystem};k.BasicPointer=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new s.Signal1;this.move=new s.Signal1;this.up=new s.Signal1;this._x=a;this._y=b;this._isDown=c};l["flambe.platform.BasicPointer"]=k.BasicPointer;k.BasicPointer.__name__=["flambe","platform","BasicPointer"];k.BasicPointer.__interfaces__=[E.PointerSystem];k.BasicPointer.prototype={prepare:function(a,b,c,d){this._x=a;this._y=b;k.BasicPointer._sharedEvent.init(k.BasicPointer._sharedEvent.id+1,a,b,c,d)},submitUp:function(a,b,c){if(this._isDown){this._isDown=!1;var d=[],e=r.Sprite.hitTest(B.root,a,b);if(null!=e){var g=e.owner;do{var h=g._compMap.Sprite_1;null!=h&&d.push(h);g=g.parent}while(null!=g)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(h=d[a],++a,h=h._pointerUp,null!=h&&(h.emit1(k.BasicPointer._sharedEvent),k.BasicPointer._sharedEvent._stopped))return;this.up.emit1(k.BasicPointer._sharedEvent)}},submitMove:function(a,b,c){var d=[],e=r.Sprite.hitTest(B.root,a,b);if(null!=e){var g=e.owner;do{var h=g._compMap.Sprite_1;null!=h&&d.push(h);g=g.parent}while(null!=g)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(h=d[a],++a,h=h._pointerMove,null!=h&&(h.emit1(k.BasicPointer._sharedEvent),k.BasicPointer._sharedEvent._stopped))return;this.move.emit1(k.BasicPointer._sharedEvent)},submitDown:function(a,b,c){if(!this._isDown){this._isDown=!0;var d=[],e=r.Sprite.hitTest(B.root,a,b);if(null!=e){var g=e.owner;do{var h=g._compMap.Sprite_1;null!=h&&d.push(h);g=g.parent}while(null!=g)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(h=d[a],++a,h=h._pointerDown,null!=h&&(h.emit1(k.BasicPointer._sharedEvent),k.BasicPointer._sharedEvent._stopped))return;this.down.emit1(k.BasicPointer._sharedEvent)}},__class__:k.BasicPointer};E.TouchSystem=function(){};l["flambe.subsystem.TouchSystem"]=E.TouchSystem;E.TouchSystem.__name__=["flambe","subsystem","TouchSystem"];E.TouchSystem.prototype={__class__:E.TouchSystem};k.BasicTouch=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new w.IntMap;this._points=[];this.down=new s.Signal1;this.move=new s.Signal1;this.up=new s.Signal1};l["flambe.platform.BasicTouch"]=k.BasicTouch;k.BasicTouch.__name__=["flambe","platform","BasicTouch"];k.BasicTouch.__interfaces__=[E.TouchSystem];k.BasicTouch.prototype={submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),y.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit1(d))},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit1(a))},submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new i.TouchPoint(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit1(d)}},get_supported:function(){return!0},__class__:k.BasicTouch,__properties__:{get_supported:"get_supported"}};L={Sound:function(){}};l["flambe.sound.Sound"]=L.Sound;L.Sound.__name__=["flambe","sound","Sound"];L.Sound.__interfaces__=[u.Asset];L.Sound.prototype={__class__:L.Sound};k.DummySound=function(){k.BasicAsset.call(this);this._playback=new k.DummyPlayback(this)};l["flambe.platform.DummySound"]=k.DummySound;k.DummySound.__name__=["flambe","platform","DummySound"];k.DummySound.__interfaces__=[L.Sound];k.DummySound.getInstance=function(){null==k.DummySound._instance&&(k.DummySound._instance=new k.DummySound);return k.DummySound._instance};k.DummySound.__super__=k.BasicAsset;k.DummySound.prototype=v(k.BasicAsset.prototype,{get_duration:function(){return 0},loop:function(){return this._playback},play:function(){return this._playback},__class__:k.DummySound,__properties__:{get_duration:"get_duration"}});L.Playback=function(){};l["flambe.sound.Playback"]=L.Playback;L.Playback.__name__=["flambe","sound","Playback"];L.Playback.__interfaces__=[s.Disposable];L.Playback.prototype={__class__:L.Playback};k.DummyPlayback=function(a){this._sound=a;this.volume=new O.AnimatedFloat(0)};l["flambe.platform.DummyPlayback"]=k.DummyPlayback;k.DummyPlayback.__name__=["flambe","platform","DummyPlayback"];k.DummyPlayback.__interfaces__=[L.Playback];k.DummyPlayback.prototype={dispose:function(){},get_position:function(){return 0},get_ended:function(){return!0},get_paused:function(){return!0},__class__:k.DummyPlayback,__properties__:{get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position"}};k.DummyTouch=function(){this.down=new s.Signal1;this.move=new s.Signal1;this.up=new s.Signal1};l["flambe.platform.DummyTouch"]=k.DummyTouch;k.DummyTouch.__name__=["flambe","platform","DummyTouch"];k.DummyTouch.__interfaces__=[E.TouchSystem];k.DummyTouch.prototype={get_supported:function(){return!1},__class__:k.DummyTouch,__properties__:{get_supported:"get_supported"}};k.EventGroup=function(){this._entries=[]};l["flambe.platform.EventGroup"]=k.EventGroup;k.EventGroup.__name__=["flambe","platform","EventGroup"];k.EventGroup.__interfaces__=[s.Disposable];k.EventGroup.prototype={dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new k._EventGroup.Entry(a,b,c))},__class__:k.EventGroup};k._EventGroup={};k._EventGroup.Entry=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};l["flambe.platform._EventGroup.Entry"]=k._EventGroup.Entry;k._EventGroup.Entry.__name__=["flambe","platform","_EventGroup","Entry"];k._EventGroup.Entry.prototype={__class__:k._EventGroup.Entry};k.InternalGraphics=function(){};l["flambe.platform.InternalGraphics"]=k.InternalGraphics;k.InternalGraphics.__name__=["flambe","platform","InternalGraphics"];k.InternalGraphics.__interfaces__=[r.Graphics];k.InternalGraphics.prototype={__class__:k.InternalGraphics};k.KeyCodes=function(){};l["flambe.platform.KeyCodes"]=k.KeyCodes;k.KeyCodes.__name__=["flambe","platform","KeyCodes"];k.KeyCodes.toKey=function(a){switch(a){case 65:return i.Key.A;case 66:return i.Key.B;case 67:return i.Key.C;case 68:return i.Key.D;case 69:return i.Key.E;case 70:return i.Key.F;case 71:return i.Key.G;case 72:return i.Key.H;case 73:return i.Key.I;case 74:return i.Key.J;case 75:return i.Key.K;case 76:return i.Key.L;case 77:return i.Key.M;case 78:return i.Key.N;case 79:return i.Key.O;case 80:return i.Key.P;case 81:return i.Key.Q;case 82:return i.Key.R;case 83:return i.Key.S;case 84:return i.Key.T;case 85:return i.Key.U;case 86:return i.Key.V;case 87:return i.Key.W;case 88:return i.Key.X;case 89:return i.Key.Y;case 90:return i.Key.Z;case 48:return i.Key.Number0;case 49:return i.Key.Number1;case 50:return i.Key.Number2;case 51:return i.Key.Number3;case 52:return i.Key.Number4;case 53:return i.Key.Number5;case 54:return i.Key.Number6;case 55:return i.Key.Number7;case 56:return i.Key.Number8;case 57:return i.Key.Number9;case 96:return i.Key.Numpad0;case 97:return i.Key.Numpad1;case 98:return i.Key.Numpad2;case 99:return i.Key.Numpad3;case 100:return i.Key.Numpad4;case 101:return i.Key.Numpad5;case 102:return i.Key.Numpad6;case 103:return i.Key.Numpad7;case 104:return i.Key.Numpad8;case 105:return i.Key.Numpad9;case 107:return i.Key.NumpadAdd;case 110:return i.Key.NumpadDecimal;case 111:return i.Key.NumpadDivide;case 108:return i.Key.NumpadEnter;case 106:return i.Key.NumpadMultiply;case 109:return i.Key.NumpadSubtract;case 112:return i.Key.F1;case 113:return i.Key.F2;case 114:return i.Key.F3;case 115:return i.Key.F4;case 116:return i.Key.F5;case 117:return i.Key.F6;case 118:return i.Key.F7;case 119:return i.Key.F8;case 120:return i.Key.F9;case 121:return i.Key.F10;case 122:return i.Key.F11;case 123:return i.Key.F12;case 37:return i.Key.Left;case 38:return i.Key.Up;case 39:return i.Key.Right;case 40:return i.Key.Down;case 18:return i.Key.Alt;case 192:return i.Key.Backquote;case 220:return i.Key.Backslash;case 8:return i.Key.Backspace;case 20:return i.Key.CapsLock;case 188:return i.Key.Comma;case 15:return i.Key.Command;case 17:return i.Key.Control;case 46:return i.Key.Delete;case 35:return i.Key.End;case 13:return i.Key.Enter;case 187:return i.Key.Equals;case 27:return i.Key.Escape;case 36:return i.Key.Home;case 45:return i.Key.Insert;case 219:return i.Key.LeftBracket;case 189:return i.Key.Minus;case 34:return i.Key.PageDown;case 33:return i.Key.PageUp;case 190:return i.Key.Period;case 222:return i.Key.Quote;case 221:return i.Key.RightBracket;case 186:return i.Key.Semicolon;case 16:return i.Key.Shift;case 191:return i.Key.Slash;case 32:return i.Key.Space;case 9:return i.Key.Tab;case 16777234:return i.Key.Menu;case 16777247:return i.Key.Search}return i.Key.Unknown(a)};k.MainLoop=function(){this._tickables=[]};l["flambe.platform.MainLoop"]=k.MainLoop;k.MainLoop.__name__=["flambe","platform","MainLoop"];k.MainLoop.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_4;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(var d=a.firstComponent;null!=d;)c=d.next,d.onUpdate(b),d=c;for(d=a.firstChild;null!=d;)c=d.next,k.MainLoop.updateEntity(d,b),d=c};k.MainLoop.prototype={addTickable:function(a){this._tickables.push(a)},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),r.Sprite.render(B.root,b),a.didRender())},update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}B.volume.update(a);k.MainLoop.updateEntity(B.root,a)}},__class__:k.MainLoop};k.MouseCodes=function(){};l["flambe.platform.MouseCodes"]=k.MouseCodes;k.MouseCodes.__name__=["flambe","platform","MouseCodes"];k.MouseCodes.toButton=function(a){switch(a){case 0:return i.MouseButton.Left;case 1:return i.MouseButton.Middle;case 2:return i.MouseButton.Right}return i.MouseButton.Unknown(a)};k.Renderer=function(){};l["flambe.platform.Renderer"]=k.Renderer;k.Renderer.__name__=["flambe","platform","Renderer"];k.Renderer.prototype={__class__:k.Renderer};k.Tickable=function(){};l["flambe.platform.Tickable"]=k.Tickable;k.Tickable.__name__=["flambe","platform","Tickable"];k.Tickable.prototype={__class__:k.Tickable};k.html.CanvasGraphics=function(a){this._firstDraw=!1;this._canvasCtx=a.getContext("2d")};l["flambe.platform.html.CanvasGraphics"]=k.html.CanvasGraphics;k.html.CanvasGraphics.__name__=["flambe","platform","html","CanvasGraphics"];k.html.CanvasGraphics.__interfaces__=[k.InternalGraphics];k.html.CanvasGraphics.prototype={didRender:function(){},willRender:function(){this._firstDraw=!0},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="destination-in";break;case 3:b="copy"}this._canvasCtx.globalCompositeOperation=b},setAlpha:function(a){this._canvasCtx.globalAlpha=a},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},fillRect:function(a,b,c,d,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle="#"+("00000"+a.toString(16)).slice(-6),this._canvasCtx.fillRect(b|0,c|0,d|0,e|0))},drawPattern:function(a,b,c,d,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over"):(null==a.pattern&&(a.pattern=this._canvasCtx.createPattern(a.image,"repeat")),this._canvasCtx.fillStyle=a.pattern,this._canvasCtx.fillRect(b|0,c|0,d|0,e|0))},drawSubImage:function(a,b,c,d,e,g,h){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubImage(a,b,c,d,e,g,h),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,d|0,e|0,g|0,h|0,b|0,c|0,g|0,h|0)},drawImage:function(a,b,c){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawImage(a,b,c),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,b|0,c|0)},restore:function(){this._canvasCtx.restore()},transform:function(a,b,c,d,e,g){this._canvasCtx.transform(a,b,c,d,e,g)},scale:function(a,b){this._canvasCtx.scale(a,b)},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},save:function(){this._canvasCtx.save()},__class__:k.html.CanvasGraphics};k.html.CanvasRenderer=function(a){this.graphics=new k.html.CanvasGraphics(a);B.hasGPU.set__(!0)};l["flambe.platform.html.CanvasRenderer"]=k.html.CanvasRenderer;k.html.CanvasRenderer.__name__=["flambe","platform","html","CanvasRenderer"];k.html.CanvasRenderer.__interfaces__=[k.Renderer];k.html.CanvasRenderer.prototype={didRender:function(){this.graphics.didRender()},willRender:function(){this.graphics.willRender()},createCompressedTexture:function(){return null},getCompressedTextureFormats:function(){return[]},createEmptyTexture:function(a,b){return new k.html.CanvasTexture(k.html.HtmlUtil.createEmptyCanvas(a,b))},createTexture:function(a){return new k.html.CanvasTexture(k.html.CanvasRenderer.CANVAS_TEXTURES?k.html.HtmlUtil.createCanvas(a):a)},__class__:k.html.CanvasRenderer};k.html.CanvasTexture=function(a){this.pattern=this._graphics=null;k.BasicAsset.call(this);this.image=a};l["flambe.platform.html.CanvasTexture"]=k.html.CanvasTexture;k.html.CanvasTexture.__name__=["flambe","platform","html","CanvasTexture"];k.html.CanvasTexture.__interfaces__=[r.Texture];k.html.CanvasTexture.__super__=k.BasicAsset;k.html.CanvasTexture.prototype=v(k.BasicAsset.prototype,{onDisposed:function(){this.image.dispose&&this.image.dispose();this._graphics=this.pattern=this.image=null},getContext2d:function(){I.__instanceof(this.image,HTMLCanvasElement)||(this.image=k.html.HtmlUtil.createCanvas(this.image));return this.image.getContext("2d")},get_graphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new k.html._CanvasTexture.InternalGraphics(this));return this._graphics},get_height:function(){return this.image.height},get_width:function(){return this.image.width},__class__:k.html.CanvasTexture,__properties__:{get_width:"get_width",get_height:"get_height",get_graphics:"get_graphics"}});k.html._CanvasTexture={};k.html._CanvasTexture.InternalGraphics=function(a){k.html.CanvasGraphics.call(this,a.image);this._renderTarget=a};l["flambe.platform.html._CanvasTexture.InternalGraphics"]=k.html._CanvasTexture.InternalGraphics;k.html._CanvasTexture.InternalGraphics.__name__=["flambe","platform","html","_CanvasTexture","InternalGraphics"];k.html._CanvasTexture.InternalGraphics.__super__=k.html.CanvasGraphics;k.html._CanvasTexture.InternalGraphics.prototype=v(k.html.CanvasGraphics.prototype,{fillRect:function(a,b,c,d,e){k.html.CanvasGraphics.prototype.fillRect.call(this,a,b,c,d,e);this._renderTarget.pattern=null},drawPattern:function(a,b,c,d,e){k.html.CanvasGraphics.prototype.drawPattern.call(this,a,b,c,d,e);this._renderTarget.pattern=null},drawSubImage:function(a,b,c,d,e,g,h){k.html.CanvasGraphics.prototype.drawSubImage.call(this,a,b,c,d,e,g,h);this._renderTarget.pattern=null},drawImage:function(a,b,c){k.html.CanvasGraphics.prototype.drawImage.call(this,a,b,c);this._renderTarget.pattern=null},__class__:k.html._CanvasTexture.InternalGraphics});k.html.HtmlAssetPackLoader=function(a,b){k.BasicAssetPackLoader.call(this,a,b)};l["flambe.platform.html.HtmlAssetPackLoader"]=k.html.HtmlAssetPackLoader;k.html.HtmlAssetPackLoader.__name__=["flambe","platform","html","HtmlAssetPackLoader"];k.html.HtmlAssetPackLoader.detectImageFormats=function(a){var b=[u.AssetFormat.PNG,u.AssetFormat.JPG,u.AssetFormat.GIF],c=2;R.delay(function(){b.unshift(u.AssetFormat.WEBP);--c;0==c&&a(b)},90);R.delay(function(){b.unshift(u.AssetFormat.JXR);--c;0==c&&a(b)},100)};k.html.HtmlAssetPackLoader.detectAudioFormats=function(){var a=D.document.createElement("audio");if(null==a||null==q(a,a.canPlayType))return[];var b=new Z("\\b(iPhone|iPod|iPad|Android)\\b",""),c=D.window.navigator.userAgent;if(!k.html.WebAudioSound.get_supported()&&b.match(c))return[];for(var b=[{format:u.AssetFormat.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:u.AssetFormat.MP3,mimeType:"audio/mpeg"},{format:u.AssetFormat.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:u.AssetFormat.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:u.AssetFormat.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var e=b[d];++d;var g="";try{g=a.canPlayType(e.mimeType)}catch(h){}""!=g&&c.push(e.format)}return c};k.html.HtmlAssetPackLoader.detectArchiveFormats=function(){return[u.AssetFormat.ZIP,u.AssetFormat.TAR]};k.html.HtmlAssetPackLoader.supportsBlob=function(){if(k.html.HtmlAssetPackLoader._detectBlobSupport){if(!k.html.HtmlAssetPackLoader.verifyBlobBrowserCompatibility())return k.html.HtmlAssetPackLoader._URL=null,k.html.HtmlAssetPackLoader._detectBlobSupport=!1;k.html.HtmlAssetPackLoader._detectBlobSupport=!1;var a=new XMLHttpRequest;a.open("GET",".",!0);a.responseType="blob";if(""!=a.responseType&&"blob"!=a.responseType)return!1;k.html.HtmlAssetPackLoader._URL=k.html.HtmlUtil.loadExtension("URL").value}return null!=k.html.HtmlAssetPackLoader._URL&&null!=k.html.HtmlAssetPackLoader._URL.createObjectURL};k.html.HtmlAssetPackLoader.verifyBlobBrowserCompatibility=function(){return-1!=D.window.navigator.userAgent.toLowerCase().indexOf("silk")||-1!=D.window.navigator.userAgent.toLowerCase().indexOf("applewebkit/534.30")||-1!=D.window.navigator.userAgent.toLowerCase().indexOf("applewebkit/535.19")||-1!=D.window.navigator.userAgent.toLowerCase().indexOf("IEMobile/10.0")||-1!=D.window.navigator.userAgent.toLowerCase().indexOf("IEMobile/9.0")?!1:!0};k.html.HtmlAssetPackLoader.__super__=k.BasicAssetPackLoader;k.html.HtmlAssetPackLoader.prototype=v(k.BasicAssetPackLoader.prototype,{download:function(a,b,c,d){var e=this,g=new XMLHttpRequest,h=0,i=function(){h=Date.now();g.open("GET",a,!0);g.responseType=c;""==g.responseType&&(g.responseType="arraybuffer");g.send()},j=0;if("undefined"!=typeof g.onprogress){var k=4;g.onprogress=function(a){h=Date.now();e.handleProgress(b,a.loaded)};j=D.window.setInterval(function(){1<=g.readyState&&5E3<Date.now()-
h&&(g.abort(),--k,0<k?i():(D.window.clearInterval(j),e.handleError(b,"Request timed out")))},1E3)}g.onload=function(){D.window.clearInterval(j);var a=g.response;null==a?a=g.responseText:"blob"==c&&"arraybuffer"==g.responseType&&(a=new Blob([g.response]));d(a)};g.onerror=function(){D.window.clearInterval(j);e.handleError(b,"Failed to load asset: error #"+g.status)};i();return g},getAssetFormats:function(a){var b=this;null==k.html.HtmlAssetPackLoader._supportedFormats&&(k.html.HtmlAssetPackLoader._supportedFormats=new s.Promise,k.html.HtmlAssetPackLoader.detectImageFormats(function(a){k.html.HtmlAssetPackLoader._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(k.html.HtmlAssetPackLoader.detectAudioFormats()).concat(k.html.HtmlAssetPackLoader.detectArchiveFormats()).concat([u.AssetFormat.Data]))}));k.html.HtmlAssetPackLoader._supportedFormats.get(a)},getArchiveEntryData:function(a,b){var c="",d=u.Manifest.inferFormat(a.fileName),e="",e="";0<a.fileName.indexOf("/")?e=a.fileName.substr("/"==a.fileName.charAt(0)?1:0,a.fileName.length):(e=y.substr(b.name,0<b.name.lastIndexOf("/")?b.name.lastIndexOf("/")+1:0,b.name.length),e=e+"/"+t.string(a.fileName));switch(d[1]){case 2:c="image/png";break;case 3:c="image/jpeg";break;case 1:c="image/vnd.ms-photo";break;case 4:c="image/gif";break;case 0:c="image/webp";break;case 9:c="audio/mp4";break;case 8:c="audio/mpeg";break;case 11:case 10:c="audio/ogg";break;case 12:c="audio/wave";break;case 14:c="application/zip";break;case 5:case 6:case 7:c="application/octet-stream";break;case 15:c="application/x-tar";break;case 13:c=""}""!=c&&(e=s.Strings.removeFileExtension(e));return{type:c,format:d,name:e}},loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d=D.document.createElement("img"),e=new k.EventGroup;e.addDisposingListener(d,"load",function(){k.html.HtmlAssetPackLoader.supportsBlob()&&k.html.HtmlAssetPackLoader._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTexture(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});k.html.HtmlAssetPackLoader.supportsBlob()?this.download(a,b,"blob",function(a){d.src=k.html.HtmlAssetPackLoader._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(k.html.WebAudioSound.get_supported())this.download(a,b,"arraybuffer",function(a){k.html.WebAudioSound.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new k.html.WebAudioSound(a))},function(){c.handleLoad(b,k.DummySound.getInstance())})});else{var g=D.document.createElement("audio");g.preload="auto";var h=++k.html.HtmlAssetPackLoader._mediaRefCount;null==k.html.HtmlAssetPackLoader._mediaElements&&(k.html.HtmlAssetPackLoader._mediaElements=new w.IntMap);k.html.HtmlAssetPackLoader._mediaElements.set(h,g);e=new k.EventGroup;e.addDisposingListener(g,"canplaythrough",function(){k.html.HtmlAssetPackLoader._mediaElements.remove(h);c.handleLoad(b,new k.html.HtmlSound(g))});e.addDisposingListener(g,"error",function(){k.html.HtmlAssetPackLoader._mediaElements.remove(h);var a=g.error.code;3==a||4==a?c.handleLoad(b,k.DummySound.getInstance()):c.handleError(b,"Failed to load audio: "+g.error.code)});e.addListener(g,"progress",function(){if(0<g.buffered.length&&0<g.duration){var a=g.buffered.end(0)/g.duration;c.handleProgress(b,a*b.bytes|0)}});g.src=a;g.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new k.BasicFile(a))});break;case 14:k.html.HtmlAssetPackLoader.supportsBlob()?this.download(a,b,"arraybuffer",function(a){for(var a=z.Bytes.ofData(new Uint8Array(a)),d,a=(new x.Reader(new z.BytesInput(a))).read().iterator();a.hasNext();){var e=a.next();d=s.Strings.getUrlExtension(e.fileName);if("."==e.fileName.charAt(0)||0<=e.fileName.indexOf("/."))d="";if(!(""==d||null==d)){c._assetsRemaining+=1;d=c.promise;d.set_total(d._total+e.dataSize);d=c.getArchiveEntryData(e,b);var g=new Uint8Array(e.data.b),g=new Blob([g.buffer],{type:d.type});d.format==u.AssetFormat.Data&&(g=new Blob([x.Reader.unzip(e)],{type:d.type}));g=k.html.HtmlAssetPackLoader._URL.createObjectURL(g);e=c.manifest.add(d.name,e.fileName,e.dataSize,d.format);c.loadEntry(g,e)}}c.handleLoad(b,new k.BasicFile(""))}):null;break;case 15:k.html.HtmlAssetPackLoader.supportsBlob()?this.download(a,b,"arraybuffer",function(a){for(var a=z.Bytes.ofData(new Uint8Array(a)),d,a=(new ga.Reader(new z.BytesInput(a))).read().iterator();a.hasNext();){var e=a.next();d=s.Strings.getUrlExtension(e.fileName);if("."==e.fileName.charAt(0)||0<=e.fileName.indexOf("/."))d="";if(!(""==d||null==d)){c._assetsRemaining+=1;d=c.promise;d.set_total(d._total+e.fileSize);d=c.getArchiveEntryData(e,b);var g=new Uint8Array(e.data.b),g=new Blob([g.buffer],{type:d.type});d.format==u.AssetFormat.Data&&(g=new Blob([e.data],{type:d.type}));g=k.html.HtmlAssetPackLoader._URL.createObjectURL(g);e=c.manifest.add(d.name,e.fileName,e.fileSize,d.format);c.loadEntry(g,e)}}c.handleLoad(b,new k.BasicFile(""))}):null}},__class__:k.html.HtmlAssetPackLoader});k.html.HtmlMouse=function(a,b){k.BasicMouse.call(this,a);this._canvas=b};l["flambe.platform.html.HtmlMouse"]=k.html.HtmlMouse;k.html.HtmlMouse.__name__=["flambe","platform","html","HtmlMouse"];k.html.HtmlMouse.__super__=k.BasicMouse;k.html.HtmlMouse.prototype=v(k.BasicMouse.prototype,{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}this._canvas.style.cursor=b;return k.BasicMouse.prototype.set_cursor.call(this,a)},__class__:k.html.HtmlMouse});k.html.HtmlSound=function(a){k.BasicAsset.call(this);this.audioElement=a};l["flambe.platform.html.HtmlSound"]=k.html.HtmlSound;k.html.HtmlSound.__name__=["flambe","platform","html","HtmlSound"];k.html.HtmlSound.__interfaces__=[L.Sound];k.html.HtmlSound.__super__=k.BasicAsset;k.html.HtmlSound.prototype=v(k.BasicAsset.prototype,{onDisposed:function(){this.audioElement.dispose&&this.audioElement.dispose();this.audioElement=null},get_duration:function(){return this.audioElement.duration},loop:function(a){null==a&&(a=1);return new k.html._HtmlSound.HtmlPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new k.html._HtmlSound.HtmlPlayback(this,a,!1)},__class__:k.html.HtmlSound,__properties__:{get_duration:"get_duration"}});k.html._HtmlSound={};k.html._HtmlSound.HtmlPlayback=function(a,b,c){var d=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=D.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new O.AnimatedFloat(b,function(){d.updateVolume()});this.updateVolume();this.playAudio();B.hidden._value&&this.set_paused(!0)};l["flambe.platform.html._HtmlSound.HtmlPlayback"]=k.html._HtmlSound.HtmlPlayback;k.html._HtmlSound.HtmlPlayback.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];k.html._HtmlSound.HtmlPlayback.__interfaces__=[k.Tickable,L.Playback];k.html._HtmlSound.HtmlPlayback.prototype={updateVolume:function(){this._clonedElement.volume=B.volume._value*this.volume._value},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(k.html.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=B.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=B.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return this._clonedElement.ended||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},get_position:function(){return this._clonedElement.currentTime},get_ended:function(){return this._clonedElement.ended},set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},get_paused:function(){return this._clonedElement.paused},__class__:k.html._HtmlSound.HtmlPlayback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position"}};E.StageSystem=function(){};l["flambe.subsystem.StageSystem"]=E.StageSystem;E.StageSystem.__name__=["flambe","subsystem","StageSystem"];k.html.HtmlStage=function(a){var b=this;this._canvas=a;this.resize=new s.Signal0;this.scaleFactor=k.html.HtmlStage.computeScaleFactor();1!=this.scaleFactor&&(k.html.HtmlUtil.setVendorStyle(this._canvas,"transform-origin","top left"),k.html.HtmlUtil.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));k.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&(D.window.addEventListener("orientationchange",function(){k.html.HtmlUtil.callLater(q(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());D.window.addEventListener("resize",q(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new s.Value(null);null!=D.window.orientation&&(D.window.addEventListener("orientationchange",q(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new s.Value(!1);k.html.HtmlUtil.addVendorListener(D.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};l["flambe.platform.html.HtmlStage"]=k.html.HtmlStage;k.html.HtmlStage.__name__=["flambe","platform","html","HtmlStage"];k.html.HtmlStage.__interfaces__=[E.StageSystem];k.html.HtmlStage.computeScaleFactor=function(){if(-1!=eval("navigator.userAgent.toLowerCase();").indexOf("ipad"))return 1;var a=D.window.devicePixelRatio;null==a&&(a=1);var b=D.document.createElement("canvas").getContext("2d"),b=k.html.HtmlUtil.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);return a/b};k.html.HtmlStage.prototype={updateFullscreen:function(){this.fullscreen.set__(!0==k.html.HtmlUtil.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],D.document).value)},onOrientationChange:function(){this.orientation.set__(k.html.HtmlUtil.orientation(D.window.orientation))},hideMobileBrowser:function(){var a=this,b=D.document.documentElement.style;b.height=D.window.innerHeight+100+"px";b.width=D.window.innerWidth+"px";b.overflow="visible";k.html.HtmlUtil.callLater(function(){k.html.HtmlUtil.hideMobileBrowser();k.html.HtmlUtil.callLater(function(){b.height=D.window.innerHeight+"px";a.onWindowResize(null)},100)})},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit0();return!0},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},get_height:function(){return this._canvas.height},get_width:function(){return this._canvas.width},__class__:k.html.HtmlStage};k.html.HtmlUtil=function(){};l["flambe.platform.html.HtmlUtil"]=k.html.HtmlUtil;k.html.HtmlUtil.__name__=["flambe","platform","html","HtmlUtil"];k.html.HtmlUtil.callLater=function(a,b){null==b&&(b=0);D.window.setTimeout(a,b)};k.html.HtmlUtil.hideMobileBrowser=function(){D.window.scrollTo(1,0)};k.html.HtmlUtil.loadExtension=function(a,b){null==b&&(b=D.window);var c=H.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+y.substr(a,1,null),d=0,e=k.html.HtmlUtil.VENDOR_PREFIXES;d<e.length;){var g=e[d];++d;var h=g+c,i=H.field(b,h);if(null!=i)return{prefix:g,field:h,value:i}}return{prefix:null,field:null,value:null}};k.html.HtmlUtil.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=k.html.HtmlUtil.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};k.html.HtmlUtil.polyfill=function(a,b){null==b&&(b=D.window);var c=k.html.HtmlUtil.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};k.html.HtmlUtil.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,e=k.html.HtmlUtil.VENDOR_PREFIXES;d<e.length;){var g=e[d];++d;a.setProperty("-"+g+"-"+b,c)}a.setProperty(b,c)};k.html.HtmlUtil.addVendorListener=function(a,b,c,d){for(var e=0,g=k.html.HtmlUtil.VENDOR_PREFIXES;e<g.length;){var h=g[e];++e;a.addEventListener(h+b,c,d)}a.addEventListener(b,c,d)};k.html.HtmlUtil.orientation=function(a){switch(a){case-90:case 90:return r.Orientation.Landscape;default:return r.Orientation.Portrait}};k.html.HtmlUtil.createEmptyCanvas=function(a,b){var c=D.document.createElement("canvas");c.width=a;c.height=b;return c};k.html.HtmlUtil.createCanvas=function(a){var b=k.html.HtmlUtil.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};k.html.HtmlUtil.fixAndroidMath=function(){if(0<=D.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};k.html.WebAudioSound=function(a){k.BasicAsset.call(this);this.buffer=a};l["flambe.platform.html.WebAudioSound"]=k.html.WebAudioSound;k.html.WebAudioSound.__name__=["flambe","platform","html","WebAudioSound"];k.html.WebAudioSound.__interfaces__=[L.Sound];k.html.WebAudioSound.get_supported=function(){if(k.html.WebAudioSound._detectSupport){k.html.WebAudioSound._detectSupport=!1;var a=k.html.HtmlUtil.loadExtension("AudioContext").value;null!=a&&(k.html.WebAudioSound.ctx=new a,k.html.WebAudioSound.gain=null!=k.html.WebAudioSound.ctx.createGainNode?k.html.WebAudioSound.ctx.createGainNode():k.html.WebAudioSound.ctx.createGain(),k.html.WebAudioSound.gain.connect(k.html.WebAudioSound.ctx.destination),B.volume.watch(function(a){k.html.WebAudioSound.gain.gain.value=a}))}return null!=k.html.WebAudioSound.ctx};k.html.WebAudioSound.__super__=k.BasicAsset;k.html.WebAudioSound.prototype=v(k.BasicAsset.prototype,{onDisposed:function(){this.buffer=null},get_duration:function(){return this.buffer.duration},loop:function(a){null==a&&(a=1);return new k.html._WebAudioSound.WebAudioPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new k.html._WebAudioSound.WebAudioPlayback(this,a,!1)},__class__:k.html.WebAudioSound,__properties__:{get_duration:"get_duration"}});k.html._WebAudioSound={};k.html._WebAudioSound.WebAudioPlayback=function(a,b,c){var d=this;this._ended=!1;this._sound=a;this._head=k.html.WebAudioSound.gain;this._sourceNode=k.html.WebAudioSound.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.onended=q(this,this._endedEvent);null!=this._sourceNode.noteOn?this._sourceNode.noteOn(0):this._sourceNode.start(0);this.playAudio();this.volume=new O.AnimatedFloat(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b);B.hidden._value&&this.set_paused(!0)};l["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=k.html._WebAudioSound.WebAudioPlayback;k.html._WebAudioSound.WebAudioPlayback.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];k.html._WebAudioSound.WebAudioPlayback.__interfaces__=[k.Tickable,L.Playback];k.html._WebAudioSound.WebAudioPlayback.prototype={playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=k.html.WebAudioSound.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(k.html.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=B.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},setVolume:function(a){null==this._gainNode&&(this._gainNode=null!=k.html.WebAudioSound.ctx.createGainNode?k.html.WebAudioSound.ctx.createGainNode():k.html.WebAudioSound.ctx.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},dispose:function(){this.set_paused(!0);null!=this._sourceNode&&(this._sourceNode.disconnect(),this._sourceNode=this._sourceNode.onended=null);null!=this._gainNode&&(this._gainNode.disconnect(),this._gainNode=null);this._tickableAdded=!1;null!=this._hideBinding&&(this._hideBinding.dispose(),this._hideBinding=null)},update:function(a){this.volume.update(a);return 0<=this._pausedAt||this.get_ended()?(this._tickableAdded=!1,null!=this._hideBinding&&this._hideBinding.dispose(),!0):!1},get_position:function(){return this.get_ended()?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(k.html.WebAudioSound.ctx.currentTime-this._startedAt)%this._sound.get_duration()},get_ended:function(){return null==this._sourceNode||null!=this._sourceNode.playbackState&&3==this._sourceNode.playbackState?!0:this._ended},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_paused:function(){return 0<=this._pausedAt},_endedEvent:function(){this._ended=!0},__class__:k.html._WebAudioSound.WebAudioPlayback,__properties__:{set_paused:"set_paused",get_paused:"get_paused",get_ended:"get_ended",get_position:"get_position"}};E={Director:function(){this._transitor=null}};l["flambe.scene.Director"]=E.Director;E.Director.__name__=["flambe","scene","Director"];E.Director.__super__=S;E.Director.prototype=v(S.prototype,{completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a],b=b._compMap.Scene_5;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];b=this.get_topScene();null!=b&&this.show(b)},show:function(a){a=a._compMap.Scene_5;null!=a&&a.shown.emit0()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onAdded:function(){this.owner.addChild(this._root)},get_name:function(){return"Director_3"},__class__:E.Director});E._Director={};E._Director.Transitor=function(){};l["flambe.scene._Director.Transitor"]=E._Director.Transitor;E._Director.Transitor.__name__=["flambe","scene","_Director","Transitor"];E._Director.Transitor.prototype={complete:function(){this._transition.complete();this._onComplete()},update:function(a){return this._transition.update(a)},__class__:E._Director.Transitor};E.Scene=function(){};l["flambe.scene.Scene"]=E.Scene;E.Scene.__name__=["flambe","scene","Scene"];E.Scene.__super__=S;E.Scene.prototype=v(S.prototype,{get_name:function(){return"Scene_5"},__class__:E.Scene});E.Transition=function(){};l["flambe.scene.Transition"]=E.Transition;E.Transition.__name__=["flambe","scene","Transition"];E.Transition.prototype={complete:function(){},update:function(){return!0},__class__:E.Transition};L.Mixer=function(){this._sounds=[]};l["flambe.sound.Mixer"]=L.Mixer;L.Mixer.__name__=["flambe","sound","Mixer"];L.Mixer.__super__=S;L.Mixer.prototype=v(S.prototype,{onRemoved:function(){this.stopAll();this._sounds=[]},stopAll:function(){for(var a=0,b=this._sounds;a<b.length;){var c=b[a];++a;c.dispose()}},newSound:function(a,b){null==b&&(b=2147483647);var c=new L._Mixer.MixerSound(a,b);this._sounds.push(c);return c},get_name:function(){return"Mixer_2"},__class__:L.Mixer});L._Mixer={};L._Mixer.MixerSound=function(a,b){this._source=a;this._channels=b;this._playbacks=[]};l["flambe.sound._Mixer.MixerSound"]=L._Mixer.MixerSound;L._Mixer.MixerSound.__name__=["flambe","sound","_Mixer","MixerSound"];L._Mixer.MixerSound.__interfaces__=[s.Disposable,L.Sound];L._Mixer.MixerSound.prototype={dispose:function(){for(var a=0,b=this._playbacks;a<b.length;){var c=b[a];++a;c.dispose()}this._source=null;this._playbacks=[]},get_duration:function(){return this._source.get_duration()},findOpenChannel:function(){for(var a=0,b=this._channels;a<b;){var c=a++,d=this._playbacks[c];if(null==d||d.get_ended())return c}return-1},playOrLoop:function(a,b){var c=this.findOpenChannel();if(0>c)return new k.DummyPlayback(this);var d=b?this._source.loop(a):this._source.play(a);return this._playbacks[c]=d},loop:function(a){null==a&&(a=1);return this.playOrLoop(a,!0)},play:function(a){null==a&&(a=1);return this.playOrLoop(a,!1)},__class__:L._Mixer.MixerSound,__properties__:{get_duration:"get_duration"}};C={BitmapSprite:function(a){r.Sprite.call(this);this.symbol=a;this.anchorX.set__(a.anchorX);this.anchorY.set__(a.anchorY)}};l["flambe.swf.BitmapSprite"]=C.BitmapSprite;C.BitmapSprite.__name__=["flambe","swf","BitmapSprite"];C.BitmapSprite.__super__=r.Sprite;C.BitmapSprite.prototype=v(r.Sprite.prototype,{getNaturalHeight:function(){return this.symbol.height},getNaturalWidth:function(){return this.symbol.width},draw:function(a){a.drawSubImage(this.symbol.atlas,0,0,this.symbol.x,this.symbol.y,this.symbol.width,this.symbol.height)},__class__:C.BitmapSprite});C.Symbol=function(){};l["flambe.swf.Symbol"]=C.Symbol;C.Symbol.__name__=["flambe","swf","Symbol"];C.Symbol.prototype={__class__:C.Symbol};C.BitmapSymbol=function(a,b){this._name=a.symbol;this.atlas=b;var c=a.rect;this.x=c[0];this.y=c[1];this.width=c[2];this.height=c[3];c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};l["flambe.swf.BitmapSymbol"]=C.BitmapSymbol;C.BitmapSymbol.__name__=["flambe","swf","BitmapSymbol"];C.BitmapSymbol.__interfaces__=[C.Symbol];C.BitmapSymbol.prototype={get_name:function(){return this._name},createSprite:function(){return new C.BitmapSprite(this)},__class__:C.BitmapSymbol,__properties__:{get_name:"get_name"}};C.Library=function(a,b){this._symbols=new w.StringMap;var c=$.parse(a.getFile(b+"/library.json").toString());this.frameRate=c.frameRate;for(var d=[],e=0,g=c.movies;e<g.length;){var h=g[e];++e;h=new C.MovieSymbol(this,h);d.push(h);this._symbols.set(h.get_name(),h)}e=c.textureGroups;(1!=e[0].scaleFactor||1<e.length)&&null;h=e[0].atlases;for(e=0;e<h.length;){c=h[e];++e;for(var i=a.getTexture(b+"/"+s.Strings.removeFileExtension(c.file)),g=0,c=c.textures;g<c.length;){var j=c[g];++g;j=new C.BitmapSymbol(j,i);this._symbols.set(j.get_name(),j)}}for(e=0;e<d.length;){h=d[e];++e;g=0;for(c=h.layers;g<c.length;){h=c[g];++g;h=h.keyframes;i=h.length;for(j=0;j<i;){var k=j++,l=h[k];if(null!=l.symbolName){var n=this._symbols.get(l.symbolName);l.symbol=n}if(1==l.duration&&k+1<i&&(k=h[k+1],!k.visible||null==k.symbolName))l.visible=!1}}}};l["flambe.swf.Library"]=C.Library;C.Library.__name__=["flambe","swf","Library"];C.Library.prototype={__class__:C.Library};C.MovieSprite=function(a){this._looped=null;r.Sprite.call(this);this.symbol=a;this.speed=new O.AnimatedFloat(1);this._animators=Array(a.layers.length);for(var b=0,c=this._animators.length;b<c;){var d=b++;this._animators[d]=new C._MovieSprite.LayerAnimator(a.layers[d])}this._position=this._frame=0;this["goto"](1)};l["flambe.swf.MovieSprite"]=C.MovieSprite;C.MovieSprite.__name__=["flambe","swf","MovieSprite"];C.MovieSprite.__super__=r.Sprite;C.MovieSprite.prototype=v(r.Sprite.prototype,{rewind:function(){this._position=0;this._flags|=32},set_paused:function(a){this._flags=s.BitSets.set(this._flags,16,a);return a},set_position:function(a){return this._position=K.FMath.clamp(a,0,this.symbol.duration)},"goto":function(a){if(this._frame!=a){if(a<this._frame)for(var b=0,c=this._animators;b<c.length;){var d=c[b];++b;d.needsKeyframeUpdate=!0;d.keyframeIdx=0}b=0;for(c=this._animators;b<c.length;)d=c[b],++b,d.composeFrame(a);this._frame=a}},onUpdate:function(a){r.Sprite.prototype.onUpdate.call(this,a);this.speed.update(a);switch(this._flags&48){case 0:this._position+=this.speed._value*a;this._position>this.symbol.duration&&(this._position%=this.symbol.duration,null!=this._looped&&this._looped.emit0());break;case 32:this._flags&=-33}this["goto"](this._position*this.symbol.frameRate)},onRemoved:function(){r.Sprite.prototype.onRemoved.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.content)}},onAdded:function(){r.Sprite.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.addChild(c.content)}},__class__:C.MovieSprite});C._MovieSprite={};C._MovieSprite.LayerAnimator=function(a){this.keyframeIdx=0;this.needsKeyframeUpdate=!1;this.layer=a;this.content=new P;if(a.empty)this._sprites=null;else{this._sprites=Array(a.keyframes.length);for(var b=0,c=this._sprites.length;b<c;){var d=b++,e=a.keyframes[d];this._sprites[d]=0<d&&a.keyframes[d-1].symbol==e.symbol?this._sprites[d-1]:null==e.symbol?new r.Sprite:e.symbol.createSprite()}this.content.add(this._sprites[0])}};l["flambe.swf._MovieSprite.LayerAnimator"]=C._MovieSprite.LayerAnimator;C._MovieSprite.LayerAnimator.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];C._MovieSprite.LayerAnimator.prototype={composeFrame:function(a){if(null!=this._sprites){var b=this.layer.keyframes,c=b.length-1;if(a>this.layer.frames)this.content._compMap.Sprite_1.set_visible(!1),this.keyframeIdx=c,this.needsKeyframeUpdate=!0;else{for(;this.keyframeIdx<c&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.needsKeyframeUpdate=!0;var d;this.needsKeyframeUpdate?(this.needsKeyframeUpdate=!1,d=this._sprites[this.keyframeIdx],d!=this.content._compMap.Sprite_1&&(N.getClass(d)==C.MovieSprite&&d.rewind(),this.content.add(d))):d=this.content._compMap.Sprite_1;var e=b[this.keyframeIdx],g=e.visible&&null!=e.symbol;d.set_visible(g);if(g){var g=e.x,h=e.y,i=e.scaleX,j=e.scaleY,k=e.skewX,l=e.skewY,n=e.alpha;if(e.tweened&&this.keyframeIdx<c){a=(a-e.index)/e.duration;c=e.ease;if(0!=c){var o;0>c?(o=1-a,o=1-o*o,c=-c):o=a*a;a=c*o+(1-c)*a}b=b[this.keyframeIdx+1];g+=(b.x-g)*a;h+=(b.y-h)*a;i+=(b.scaleX-i)*a;j+=(b.scaleY-j)*a;k+=(b.skewX-k)*a;l+=(b.skewY-l)*a;n+=(b.alpha-n)*a}b=d.getLocalMatrix();a=Math.sin(k);k=Math.cos(k);c=Math.sin(l);l=Math.cos(l);b.set(l*i,c*i,-a*j,k*j,g,h);b.translate(-e.pivotX,-e.pivotY);d.alpha.set__(n)}}}},__class__:C._MovieSprite.LayerAnimator};C.MovieSymbol=function(a,b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var e=c++,g=new C.MovieLayer(b.layers[e]);this.frames=Math.max(g.frames,this.frames);this.layers[e]=g}this.duration=this.frames/this.frameRate};l["flambe.swf.MovieSymbol"]=C.MovieSymbol;C.MovieSymbol.__name__=["flambe","swf","MovieSymbol"];C.MovieSymbol.__interfaces__=[C.Symbol];C.MovieSymbol.prototype={createSprite:function(){return new C.MovieSprite(this)},get_name:function(){return this._name},__class__:C.MovieSymbol,__properties__:{get_name:"get_name"}};C.MovieLayer=function(a){this.empty=!0;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=0,d=this.keyframes.length;c<d;){var e=c++,b=new C.MovieKeyframe(a.keyframes[e],b);this.keyframes[e]=b;this.empty=this.empty&&null==b.symbolName}this.frames=null!=b?b.index+(b.duration|0):0};l["flambe.swf.MovieLayer"]=C.MovieLayer;C.MovieLayer.__name__=["flambe","swf","MovieLayer"];C.MovieLayer.prototype={__class__:C.MovieLayer};C.MovieKeyframe=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};l["flambe.swf.MovieKeyframe"]=C.MovieKeyframe;C.MovieKeyframe.__name__=["flambe","swf","MovieKeyframe"];C.MovieKeyframe.prototype={__class__:C.MovieKeyframe};s.BitSets=function(){};l["flambe.util.BitSets"]=s.BitSets;s.BitSets.__name__=["flambe","util","BitSets"];s.BitSets.set=function(a,b,c){return c?a|b:a&~b};s.Promise=function(){this.success=new s.Signal1;this.error=new s.Signal1;this.progressChanged=new s.Signal0;this.hasResult=!1;this._total=this._progress=0};l["flambe.util.Promise"]=s.Promise;s.Promise.__name__=["flambe","util","Promise"];s.Promise.prototype={set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit0());return a},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit0());return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit1(a);return a},__class__:s.Promise};s.Signal0=function(a){s.SignalBase.call(this,a)};l["flambe.util.Signal0"]=s.Signal0;s.Signal0.__name__=["flambe","util","Signal0"];s.Signal0.__super__=s.SignalBase;s.Signal0.prototype=v(s.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:s.Signal0});s._SignalBase={};s._SignalBase.Task=function(a){this.next=null;this.fn=a};l["flambe.util._SignalBase.Task"]=s._SignalBase.Task;s._SignalBase.Task.__name__=["flambe","util","_SignalBase","Task"];s._SignalBase.Task.prototype={__class__:s._SignalBase.Task};s.Strings=function(){};l["flambe.util.Strings"]=s.Strings;s.Strings.__name__=["flambe","util","Strings"];s.Strings.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?y.substr(a,b+1,null):null};s.Strings.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?y.substr(a,0,b):a};s.Strings.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=y.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=y.substr(a,b+1,null));return s.Strings.getFileExtension(a)};s.Strings.joinPath=function(a,b){47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};s.Strings.withFields=function(a,b){var c=b.length;if(0<c){for(var a=a+(0<a.length?" [":"["),d=0;d<c;){0<d&&(a+=", ");var e=b[d],g=b[d+1];if(I.__instanceof(g,Error)){var h=g.stack;null!=h&&(g=h)}a+=e+"="+t.string(g);d+=2}a+="]"}return a};ga=void 0;ga={Reader:function(a){this.i=a}};l["format.tar.Reader"]=ga.Reader;ga.Reader.__name__=["format","tar","Reader"];ga.Reader.prototype={parseOctal:function(a){for(var b=0,c=0,d=a.length;c<d;){var e=c++,e=a.b[e];if(0==e)break;if(32!=e){if(48>e||55<e)throw"Invalid octal char";b=8*b+(e-48)}}return b},readPad:function(a){this.i.read(512*Math.ceil(a/512)-a)},readEntryHeader:function(){var a=this.i,b=a.readUntil(0);if(0==b.length){for(b=0;1023>b;)if(b++,0!=a.readByte())throw"Invalid TAR end";return null}a.read(99-b.length);var c=this.parseOctal(a.read(8)),d=this.parseOctal(a.read(8)),e=this.parseOctal(a.read(8)),g=this.parseOctal(a.read(12)),h=this.parseOctal(a.read(8)),h=512*h+this.parseOctal(a.read(4));a.read(8);a.readByte();var i=a.readUntil(0);a.read(99-i.length);a.readString(8);i=a.readUntil(0);a.read(31-i.length);var j=a.readUntil(0);a.read(31-j.length);this.parseOctal(a.read(8));this.parseOctal(a.read(8));var k=a.readUntil(0);a.read(166-k.length);a=new Date;a.setTime(1E3*h);return{fileName:b,fileSize:g,fileTime:a,fmod:c,uid:d,uname:i,gid:e,gname:j,data:null}},read:function(){var a=new ba;for(z.Bytes.alloc(65536);;){var b=this.readEntryHeader();if(null==b)break;var c=b.fileSize;b.data=this.i.read(c);this.readPad(c);a.add(b)}return a},__class__:ga.Reader};F=void 0;w=void 0;R=void 0;V=void 0;Y=void 0;ha=void 0;z=void 0;x=void 0;$=void 0;aa=void 0;$=function(){};l["haxe.Json"]=$;$.__name__=["haxe","Json"];$.parse=function(a){return(new $).doParse(a)};$.prototype={parseNumber:function(a){for(var b=this.pos-1,c=45==a,d=!c,e=48==a,g=!1,h=!1,i=!1,j=!1;;){a=this.str.charCodeAt(this.pos++);switch(a){case 48:e&&!g&&this.invalidNumber(b);c&&(c=!1,e=!0);d=!0;break;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:e&&!g&&this.invalidNumber(b);c&&(c=!1);d=!0;e=!1;break;case 46:(c||g)&&this.invalidNumber(b);d=!1;g=!0;break;case 101:case 69:(c||e||h)&&this.invalidNumber(b);d=!1;h=!0;break;case 43:case 45:(!h||i)&&this.invalidNumber(b);d=!1;i=!0;break;default:d||this.invalidNumber(b),this.pos--,j=!0}if(j)break}a=t.parseFloat(y.substr(this.str,b,this.pos-b));b=a|0;return b==a?b:a},invalidNumber:function(a){throw"Invalid number at position "+
a+": "+y.substr(this.str,a,this.pos-a);},parseString:function(){for(var a=this.pos,b=new ca;;){var c=this.str.charCodeAt(this.pos++);if(34==c)break;if(92==c){b.addSub(this.str,a,this.pos-a-1);c=this.str.charCodeAt(this.pos++);switch(c){case 114:b.b+="\r";break;case 110:b.b+="\n";break;case 116:b.b+="\t";break;case 98:b.b+="\u0008";break;case 102:b.b+="\u000c";break;case 47:case 92:case 34:b.b+=String.fromCharCode(c);break;case 117:a=t.parseInt("0x"+y.substr(this.str,this.pos,4));this.pos+=4;b.b+=String.fromCharCode(a);break;default:throw"Invalid escape sequence \\"+String.fromCharCode(c)+" at position "+(this.pos-1);}a=this.pos}else if(c!=c)throw"Unclosed string";}b.addSub(this.str,a,this.pos-a-1);return b.b},parseRec:function(){for(;;){var a=this.str.charCodeAt(this.pos++);switch(a){case 32:case 13:case 10:case 9:break;case 123:for(var b={},c=null,a=null;;){var d=this.str.charCodeAt(this.pos++);switch(d){case 32:case 13:case 10:case 9:break;case 125:return(null!=c||!1==a)&&this.invalidChar(),b;case 58:null==c&&this.invalidChar();b[c]=this.parseRec();c=null;a=!0;break;case 44:a?a=!1:this.invalidChar();break;case 34:a&&this.invalidChar();c=this.parseString();break;default:this.invalidChar()}}break;case 91:b=[];for(a=null;;)switch(d=this.str.charCodeAt(this.pos++),d){case 32:case 13:case 10:case 9:break;case 93:return!1==a&&this.invalidChar(),b;case 44:a?a=!1:this.invalidChar();break;default:a&&this.invalidChar(),this.pos--,b.push(this.parseRec()),a=!0}break;case 116:a=this.pos;if(114!=this.str.charCodeAt(this.pos++)||117!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=a,this.invalidChar();return!0;case 102:a=this.pos;if(97!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||115!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=a,this.invalidChar();return!1;case 110:a=this.pos;if(117!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++))this.pos=a,this.invalidChar();return null;case 34:return this.parseString();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 45:return this.parseNumber(a);default:this.invalidChar()}}},invalidChar:function(){this.pos--;throw"Invalid char "+this.str.charCodeAt(this.pos)+" at position "+this.pos;},doParse:function(a){this.str=a;this.pos=0;return this.parseRec()},__class__:$};Y=function(){this.buf=new ca;this.cache=[];this.useCache=Y.USE_CACHE;this.useEnumIndex=Y.USE_ENUM_INDEX;this.shash=new w.StringMap;this.scount=0};l["haxe.Serializer"]=Y;Y.__name__=["haxe","Serializer"];Y.run=function(a){var b=new Y;b.serialize(a);return b.toString()};Y.prototype={serialize:function(a){var b=N["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b+=t.string(a);break;case 2:Math.isNaN(a)?this.buf.b+="k":Math.isFinite(a)?(this.buf.b+="d",this.buf.b+=t.string(a)):this.buf.b+=t.string(0>a?"m":"p");break;case 3:this.buf.b+=t.string(a?"t":"f");break;case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:var c=0;this.buf.b+="a";for(var d=a.length,e=0;e<d;)b=e++,null==a[b]?c++:(0<c&&(1==c?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=t.string(c)),c=0),this.serialize(a[b]));0<c&&(1==c?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=t.string(c)));this.buf.b+="h";break;case ba:this.buf.b+="l";for(a=a.iterator();a.hasNext();)b=a.next(),this.serialize(b);this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.b+=t.string(y.dateStr(a));break;case w.StringMap:this.buf.b+="b";for(c=a.keys();c.hasNext();)b=c.next(),this.serializeString(b),this.serialize(a.get(b));this.buf.b+="h";break;case w.IntMap:this.buf.b+="q";for(c=a.keys();c.hasNext();)b=c.next(),this.buf.b+=":",this.buf.b+=t.string(b),this.serialize(a.get(b));this.buf.b+="h";break;case w.ObjectMap:this.buf.b+="M";for(c=a.keys();c.hasNext();)b=c.next(),d=H.field(b,"__id__"),H.deleteField(b,"__id__"),this.serialize(b),b.__id__=d,this.serialize(a.h[b.__id__]);this.buf.b+="h";break;case z.Bytes:b=0;c=a.length-2;d=new ca;for(e=Y.BASE64;b<c;){var g=a.b[b++],h=a.b[b++],i=a.b[b++];d.b+=t.string(e.charAt(g>>2));d.b+=t.string(e.charAt((g<<4|h>>4)&63));d.b+=t.string(e.charAt((h<<2|i>>6)&63));d.b+=t.string(e.charAt(i&63))}b==c?(g=a.b[b++],h=a.b[b++],d.b+=t.string(e.charAt(g>>2)),d.b+=t.string(e.charAt((g<<4|h>>4)&63)),d.b+=t.string(e.charAt(h<<2&63))):b==c+1&&(g=a.b[b++],d.b+=t.string(e.charAt(g>>2)),d.b+=t.string(e.charAt(g<<4&63)));b=d.b;this.buf.b+="s";this.buf.b+=t.string(b.length);this.buf.b+=":";this.buf.b+=t.string(b);break;default:this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(N.getClassName(b)),this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(N.getClassName(b)),this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+="o";this.serializeFields(a);break;case 7:b=b[2];if(this.useCache&&this.serializeRef(a))break;this.cache.pop();this.buf.b+=t.string(this.useEnumIndex?"j":"w");this.serializeString(N.getEnumName(b));this.useEnumIndex?(this.buf.b+=":",this.buf.b+=t.string(a[1])):this.serializeString(a[0]);this.buf.b+=":";d=a.length;this.buf.b+=t.string(d-2);for(e=2;e<d;)b=e++,this.serialize(a[b]);this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+t.string(a);}},serializeFields:function(a){for(var b=0,c=H.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(H.field(a,d))}this.buf.b+="g"},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var e=c++,g=this.cache[e];if(typeof g==b&&g==a)return this.buf.b+="r",this.buf.b+=t.string(e),!0}this.cache.push(a);return!1},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+="R",this.buf.b+=t.string(b)):(this.shash.set(a,this.scount++),this.buf.b+="y",a=X.urlEncode(a),this.buf.b+=t.string(a.length),this.buf.b+=":",this.buf.b+=t.string(a))},toString:function(){return this.buf.b},__class__:Y};R=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};l["haxe.Timer"]=R;R.__name__=["haxe","Timer"];R.delay=function(a,b){var c=new R(b);c.run=function(){c.stop();a()};return c};R.prototype={run:function(){null},stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},__class__:R};V=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=V.DEFAULT_RESOLVER;null==a&&(a=N,V.DEFAULT_RESOLVER=a);this.setResolver(a)};l["haxe.Unserializer"]=V;V.__name__=["haxe","Unserializer"];V.initCodes=function(){for(var a=[],b=0,c=V.BASE64.length;b<c;){var d=b++;a[V.BASE64.charCodeAt(d)]=d}return a};V.run=function(a){return(new V(a)).unserialize()};V.prototype={unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return t.parseFloat(y.substr(this.buf,a,this.pos-a));case 121:b=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw"Invalid string length";a=y.substr(this.buf,this.pos,b);this.pos+=b;a=X.urlDecode(a);this.scache.push(a);return a;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var c=this.buf,a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 111:return b={},this.cache.push(b),this.unserializeObject(b),b;case 114:b=this.readDigits();if(0>b||b>=this.cache.length)throw"Invalid reference";return this.cache[b];case 82:b=this.readDigits();if(0>b||b>=this.scache.length)throw"Invalid string reference";return this.scache[b];case 120:throw this.unserialize();case 99:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw"Class not found "+b;b=N.createEmptyInstance(a);this.cache.push(b);this.unserializeObject(b);return b;case 119:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw"Enum not found "+b;b=this.unserializeEnum(a,this.unserialize());this.cache.push(b);return b;case 106:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw"Enum not found "+b;this.pos++;var c=this.readDigits(),d=N.getEnumConstructs(a)[c];if(null==d)throw"Unknown enum index "+b+"@"+c;b=this.unserializeEnum(a,d);this.cache.push(b);return b;case 108:b=new ba;for(this.cache.push(b);104!=this.buf.charCodeAt(this.pos);)b.add(this.unserialize());this.pos++;return b;case 98:c=new w.StringMap;for(this.cache.push(c);104!=this.buf.charCodeAt(this.pos);)a=this.unserialize(),c.set(a,this.unserialize());this.pos++;return c;case 113:c=new w.IntMap;this.cache.push(c);for(b=this.buf.charCodeAt(this.pos++);58==b;)a=this.readDigits(),c.set(a,this.unserialize()),b=this.buf.charCodeAt(this.pos++);if(104!=b)throw"Invalid IntMap format";return c;case 77:c=new w.ObjectMap;for(this.cache.push(c);104!=this.buf.charCodeAt(this.pos);)a=this.unserialize(),c.set(a,this.unserialize());this.pos++;return c;case 118:return b=y.strDate(y.substr(this.buf,this.pos,19)),this.cache.push(b),this.pos+=19,b;case 115:b=this.readDigits();c=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw"Invalid bytes length";d=V.CODES;null==d&&(d=V.initCodes(),V.CODES=d);for(var a=this.pos,e=b&3,g=a+(b-e),h=z.Bytes.alloc(3*(b>>2)+(2<=e?e-1:0)),i=0;a<g;){var j=d[c.charCodeAt(a++)],k=d[c.charCodeAt(a++)];h.b[i++]=(j<<2|k>>4)&255;j=d[c.charCodeAt(a++)];h.b[i++]=(k<<4|j>>2)&255;k=d[c.charCodeAt(a++)];h.b[i++]=(j<<6|k)&255}2<=e&&(j=d[c.charCodeAt(a++)],k=d[c.charCodeAt(a++)],h.b[i++]=(j<<2|k>>4)&255,3==e&&(j=d[c.charCodeAt(a++)],h.b[i++]=(k<<4|j>>2)&255));this.pos+=b;this.cache.push(h);return h;case 67:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw"Class not found "+b;b=N.createEmptyInstance(a);this.cache.push(b);b.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw"Invalid custom data";return b}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw"Invalid enum format";var c=this.readDigits();if(0==c)return N.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return N.createEnum(a,b,d)},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if(!I.__instanceof(b,String))throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},__class__:V};aa={Adler32:function(){this.a1=1;this.a2=0}};l["haxe.crypto.Adler32"]=aa.Adler32;aa.Adler32.__name__=["haxe","crypto","Adler32"];aa.Adler32.read=function(a){var b=new aa.Adler32,c=a.readByte(),d=a.readByte(),e=a.readByte(),a=a.readByte();b.a1=e<<8|a;b.a2=c<<8|d;return b};aa.Adler32.prototype={equals:function(a){return a.a1==this.a1&&a.a2==this.a2},update:function(a,b,c){for(var d=this.a1,e=this.a2,g=b,b=b+c;g<b;)c=g++,d=(d+a.b[c])%65521,e=(e+d)%65521;this.a1=d;this.a2=e},__class__:aa.Adler32};w={BalancedTree:function(){}};l["haxe.ds.BalancedTree"]=w.BalancedTree;w.BalancedTree.__name__=["haxe","ds","BalancedTree"];w.BalancedTree.prototype={compare:function(a,b){return H.compare(a,b)},balance:function(a,b,c,d){var e=null==a?0:a._height,g=null==d?0:d._height;return e>g+2?function(){var b=a.left;return null==b?0:b._height}(this)>=function(){var b=a.right;return null==b?0:b._height}(this)?new w.TreeNode(a.left,a.key,a.value,new w.TreeNode(a.right,b,c,d)):new w.TreeNode(new w.TreeNode(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new w.TreeNode(a.right.right,b,c,d)):g>e+2?function(){var a=d.right;return null==a?0:a._height}(this)>function(){var a=d.left;return null==a?0:a._height}(this)?new w.TreeNode(new w.TreeNode(a,b,c,d.left),d.key,d.value,d.right):new w.TreeNode(new w.TreeNode(a,b,c,d.left.left),d.left.key,d.left.value,new w.TreeNode(d.left.right,d.key,d.value,d.right)):new w.TreeNode(a,b,c,d,(e>g?e:g)+1)},keysLoop:function(a,b){null!=a&&(b.push(a.key),this.keysLoop(a.left,b),this.keysLoop(a.right,b))},iteratorLoop:function(a,b){null!=a&&(b.push(a.value),this.iteratorLoop(a.left,b),this.iteratorLoop(a.right,b))},setLoop:function(a,b,c){if(null==c)return new w.TreeNode(null,a,b,null);var d=this.compare(a,c.key);return 0==d?new w.TreeNode(c.left,a,b,c.right,null==c?0:c._height):0>d?function(d){var e=d.setLoop(a,b,c.left);return d.balance(e,c.key,c.value,c.right)}(this):function(d){var e=d.setLoop(a,b,c.right);return d.balance(c.left,c.key,c.value,e)}(this)},keys:function(){var a=[];this.keysLoop(this.root,a);return y.iter(a)},iterator:function(){var a=[];this.iteratorLoop(this.root,a);return y.iter(a)},exists:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return!0;b=0>c?b.left:b.right}return!1},get:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return b.value;b=0>c?b.left:b.right}return null},set:function(a,b){this.root=this.setLoop(a,b,this.root)},__class__:w.BalancedTree};w.TreeNode=function(a,b,c,d,e){null==e&&(e=-1);this.left=a;this.key=b;this.value=c;this.right=d;this._height=-1==e?(function(a){a=a.left;return null==a?0:a._height}(this)>function(a){a=a.right;return null==a?0:a._height}(this)?function(a){a=a.left;return null==a?0:a._height}(this):function(a){a=a.right;return null==a?0:a._height}(this))+1:e};l["haxe.ds.TreeNode"]=w.TreeNode;w.TreeNode.__name__=["haxe","ds","TreeNode"];w.TreeNode.prototype={__class__:w.TreeNode};w.EnumValueMap=function(){w.BalancedTree.call(this)};l["haxe.ds.EnumValueMap"]=w.EnumValueMap;w.EnumValueMap.__name__=["haxe","ds","EnumValueMap"];w.EnumValueMap.__interfaces__=[ea];w.EnumValueMap.__super__=w.BalancedTree;w.EnumValueMap.prototype=v(w.BalancedTree.prototype,{compareArgs:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=0,d=a.length;c<d;){var e=c++,g=a[e],e=b[e],g=H.isEnumValue(g)&&H.isEnumValue(e)?this.compare(g,e):H.compare(g,e);if(0!=g)return g}return 0},compare:function(a,b){var c=a[1]-b[1];if(0!=c)return c;var c=a.slice(2),d=b.slice(2);return 0==c.length&&0==d.length?0:this.compareArgs(c,d)},__class__:w.EnumValueMap});w.IntMap=function(){this.h={}};l["haxe.ds.IntMap"]=w.IntMap;w.IntMap.__name__=["haxe","ds","IntMap"];w.IntMap.__interfaces__=[ea];w.IntMap.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref[this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return y.iter(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty(a)},get:function(a){return this.h[a]},set:function(a,b){this.h[a]=b},__class__:w.IntMap};w.ObjectMap=function(){this.h={};this.h.__keys__={}};l["haxe.ds.ObjectMap"]=w.ObjectMap;w.ObjectMap.__name__=["haxe","ds","ObjectMap"];w.ObjectMap.__interfaces__=[ea];w.ObjectMap.prototype={keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return y.iter(a)},set:function(a,b){var c=null!=a.__id__?a.__id__:a.__id__=++w.ObjectMap.count;this.h[c]=b;this.h.__keys__[c]=a},__class__:w.ObjectMap};w.StringMap=function(){this.h={}};l["haxe.ds.StringMap"]=w.StringMap;w.StringMap.__name__=["haxe","ds","StringMap"];w.StringMap.__interfaces__=[ea];w.StringMap.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return y.iter(a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty("$"+a)},get:function(a){return this.h["$"+a]},set:function(a,b){this.h["$"+a]=b},__class__:w.StringMap};z={Bytes:function(a,b){this.length=a;this.b=b}};l["haxe.io.Bytes"]=z.Bytes;z.Bytes.__name__=["haxe","io","Bytes"];z.Bytes.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new z.Bytes(a,b)};z.Bytes.ofData=function(a){return new z.Bytes(a.length,a)};z.Bytes.prototype={toString:function(){return this.readString(0,this.length)},readString:function(a,b){if(0>a||0>b||a+b>this.length)throw z.Error.OutsideBounds;for(var c="",d=this.b,e=String.fromCharCode,g=a,h=a+b;g<h;){var i=d[g++];if(128>i){if(0==i)break;c+=e(i)}else if(224>i)c+=e((i&63)<<6|d[g++]&127);else if(240>i)var j=d[g++],c=c+e((i&31)<<12|(j&127)<<6|d[g++]&127);else var j=d[g++],k=d[g++],c=c+e((i&15)<<18|(j&127)<<12|k<<6&127|d[g++]&127)}return c},blit:function(a,b,c,d){if(0>a||0>c||0>d||a+d>this.length||c+d>b.length)throw z.Error.OutsideBounds;var e=this.b,b=b.b;if(e==b&&a>c)for(var g=d;0<g;)g--,e[g+a]=b[g+c];else for(var h=0;h<d;)g=h++,e[g+a]=b[g+c]},__class__:z.Bytes};z.BytesBuffer=function(){this.b=[]};l["haxe.io.BytesBuffer"]=z.BytesBuffer;z.BytesBuffer.__name__=["haxe","io","BytesBuffer"];z.BytesBuffer.prototype={getBytes:function(){var a=new z.Bytes(this.b.length,this.b);this.b=null;return a},addBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw z.Error.OutsideBounds;for(var a=a.b,d=b,b=b+c;d<b;)c=d++,this.b.push(a[c])},add:function(a){for(var b=a.b,c=0,a=a.length;c<a;){var d=c++;this.b.push(b[d])}},__class__:z.BytesBuffer};z.Input=function(){};l["haxe.io.Input"]=z.Input;z.Input.__name__=["haxe","io","Input"];z.Input.prototype={readString:function(a){var b=z.Bytes.alloc(a);this.readFullBytes(b,0,a);return b.toString()},readInt32:function(){var a=this.readByte(),b=this.readByte(),c=this.readByte(),d=this.readByte();return this.bigEndian?d|c<<8|b<<16|a<<24:a|b<<8|c<<16|d<<24},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},readInt16:function(){var a=this.readByte(),b=this.readByte(),a=this.bigEndian?b|a<<8:a|b<<8;return 0!=(a&32768)?a-65536:a},readUntil:function(a){for(var b=new ca,c;(c=this.readByte())!=a;)b.b+=String.fromCharCode(c);return b.b},read:function(a){for(var b=z.Bytes.alloc(a),c=0;0<a;){var d=this.readBytes(b,c,a);if(0==d)throw z.Error.Blocked;c+=d;a-=d}return b},readFullBytes:function(a,b,c){for(;0<c;)var d=this.readBytes(a,b,c),b=b+d,c=c-d},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw z.Error.OutsideBounds;for(;0<d;)e[b]=this.readByte(),b++,d--;return c},readByte:function(){throw"Not implemented";},__class__:z.Input};z.BytesInput=function(a,b,c){null==b&&(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw z.Error.OutsideBounds;this.b=a.b;this.pos=b;this.len=c};l["haxe.io.BytesInput"]=z.BytesInput;z.BytesInput.__name__=["haxe","io","BytesInput"];z.BytesInput.__super__=z.Input;z.BytesInput.prototype=v(z.Input.prototype,{readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw z.Error.OutsideBounds;if(0==this.len&&0<c)throw new z.Eof;this.len<c&&(c=this.len);for(var d=this.b,a=a.b,e=0;e<c;){var g=e++;a[b+g]=d[this.pos+g]}this.pos+=c;this.len-=c;return c},readByte:function(){if(0==this.len)throw new z.Eof;this.len--;return this.b[this.pos++]},__class__:z.BytesInput});z.Eof=function(){};l["haxe.io.Eof"]=z.Eof;z.Eof.__name__=["haxe","io","Eof"];z.Eof.prototype={toString:function(){return"Eof"},__class__:z.Eof};z.Error=l["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};z.Error.Blocked=["Blocked",0];z.Error.Blocked.toString=o;z.Error.Blocked.__enum__=z.Error;z.Error.Overflow=["Overflow",1];z.Error.Overflow.toString=o;z.Error.Overflow.__enum__=z.Error;z.Error.OutsideBounds=["OutsideBounds",2];z.Error.OutsideBounds.toString=o;z.Error.OutsideBounds.__enum__=z.Error;z.Error.Custom=function(a){a=["Custom",3,a];a.__enum__=z.Error;a.toString=o;return a};ha={Meta:function(){}};l["haxe.rtti.Meta"]=ha.Meta;ha.Meta.__name__=["haxe","rtti","Meta"];ha.Meta.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};F={_Fast:{}};F._Fast.NodeAccess=function(a){this.__x=a};l["haxe.xml._Fast.NodeAccess"]=F._Fast.NodeAccess;F._Fast.NodeAccess.__name__=["haxe","xml","_Fast","NodeAccess"];F._Fast.NodeAccess.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==A.Document?"Document":this.__x.get_nodeName())+" is missing element "+a;return new F.Fast(b)},__class__:F._Fast.NodeAccess};F._Fast.AttribAccess=function(a){this.__x=a};l["haxe.xml._Fast.AttribAccess"]=F._Fast.AttribAccess;F._Fast.AttribAccess.__name__=["haxe","xml","_Fast","AttribAccess"];F._Fast.AttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==A.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);if(null==b)throw this.__x.get_nodeName()+" is missing attribute "+a;return b},__class__:F._Fast.AttribAccess};F._Fast.HasAttribAccess=function(a){this.__x=a};l["haxe.xml._Fast.HasAttribAccess"]=F._Fast.HasAttribAccess;F._Fast.HasAttribAccess.__name__=["haxe","xml","_Fast","HasAttribAccess"];F._Fast.HasAttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==A.Document)throw"Cannot access document attribute "+a;return this.__x.exists(a)},__class__:F._Fast.HasAttribAccess};F._Fast.HasNodeAccess=function(a){this.__x=a};l["haxe.xml._Fast.HasNodeAccess"]=F._Fast.HasNodeAccess;F._Fast.HasNodeAccess.__name__=["haxe","xml","_Fast","HasNodeAccess"];F._Fast.HasNodeAccess.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},__class__:F._Fast.HasNodeAccess};F._Fast.NodeListAccess=function(a){this.__x=a};l["haxe.xml._Fast.NodeListAccess"]=F._Fast.NodeListAccess;F._Fast.NodeListAccess.__name__=["haxe","xml","_Fast","NodeListAccess"];F._Fast.NodeListAccess.prototype={resolve:function(a){for(var b=new ba,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new F.Fast(c))}return b},__class__:F._Fast.NodeListAccess};F.Fast=function(a){if(a.nodeType!=A.Document&&a.nodeType!=A.Element)throw"Invalid nodeType "+t.string(a.nodeType);this.x=a;this.node=new F._Fast.NodeAccess(a);this.nodes=new F._Fast.NodeListAccess(a);this.att=new F._Fast.AttribAccess(a);this.has=new F._Fast.HasAttribAccess(a);this.hasNode=new F._Fast.HasNodeAccess(a)};l["haxe.xml.Fast"]=F.Fast;F.Fast.__name__=["haxe","xml","Fast"];F.Fast.prototype={get_elements:function(){var a=this.x.elements();return{hasNext:q(a,a.hasNext),next:function(){var b=a.next();return null==b?null:new F.Fast(b)}}},get_innerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.get_name()+" does not have data";var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==A.PCData&&c.nodeType==A.CData&&""==X.trim(b.get_nodeValue())&&(b=a.next(),null==b||b.nodeType==A.PCData&&""==X.trim(b.get_nodeValue())&&null==a.next()))return c.get_nodeValue();throw this.get_name()+" does not only have data";}if(b.nodeType!=A.PCData&&b.nodeType!=A.CData)throw this.get_name()+" does not have data";return b.get_nodeValue()},get_name:function(){return this.x.nodeType==A.Document?"Document":this.x.get_nodeName()},__class__:F.Fast};F.Parser=function(){};l["haxe.xml.Parser"]=F.Parser;F.Parser.__name__=["haxe","xml","Parser"];F.Parser.parse=function(a){var b=A.createDocument();F.Parser.doParse(a,0,b);return b};F.Parser.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,g=1,h=null,i=0,j=0,k=0,l=a.charCodeAt(b),n=new ca;l==l;){switch(e){case 0:switch(l){case 10:case 13:case 9:case 32:break;default:e=g;continue}break;case 1:switch(l){case 60:e=0;g=2;break;default:i=b;e=13;continue}break;case 13:60==l?(e=A.createPCData(n.b+y.substr(a,i,b-i)),n=new ca,c.addChild(e),j++,e=0,g=2):38==l&&(n.addSub(a,i,b-i),e=18,g=13,i=b+1);break;case 17:93==l&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(e=A.createCData(y.substr(a,i,b-i)),c.addChild(e),j++,b+=2,e=1);break;case 2:switch(l){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=y.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=y.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;e=15}i=b+1;break;case 63:e=14;i=b;break;case 47:if(null==c)throw"Expected node name";i=b+1;e=0;g=10;break;default:e=3;i=b;continue}break;case 3:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(b==i)throw"Expected node name";d=A.createElement(y.substr(a,i,b-i));c.addChild(d);e=0;g=4;continue}break;case 4:switch(l){case 47:e=11;j++;break;case 62:e=9;j++;break;default:e=5;i=b;continue}break;case 5:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(i==b)throw"Expected attribute name";h=y.substr(a,i,b-i);if(d.exists(h))throw"Duplicate attribute";e=0;g=6;continue}break;case 6:switch(l){case 61:e=0;g=7;break;default:throw"Expected =";}break;case 7:switch(l){case 34:case 39:e=8;i=b;break;default:throw'Expected "';}break;case 8:l==a.charCodeAt(i)&&(g=y.substr(a,i+1,b-i-1),d.set(h,g),e=0,g=4);break;case 9:i=b=F.Parser.doParse(a,b,d);e=1;break;case 11:switch(l){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(l){case 62:return 0==j&&c.addChild(A.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(i==b)throw"Expected node name";if(y.substr(a,i,b-i)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";e=0;g=12;continue}break;case 15:45==l&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(A.createComment(y.substr(a,i,b-i))),b+=2,e=1);break;case 16:91==l?k++:93==l?k--:62==l&&0==k&&(c.addChild(A.createDocType(y.substr(a,i,b-i))),e=1);break;case 14:63==l&&62==a.charCodeAt(b+1)&&(b++,e=y.substr(a,i+1,b-i-2),c.addChild(A.createProcessingInstruction(e)),e=1);break;case 18:59==l&&(i=y.substr(a,i,b-i),35==i.charCodeAt(0)?(i=120==i.charCodeAt(1)?t.parseInt("0"+y.substr(i,1,i.length-1)):t.parseInt(y.substr(i,1,i.length-
1)),n.b+=t.string(String.fromCharCode(i))):n.b=F.Parser.escapes.exists(i)?n.b+t.string(F.Parser.escapes.get(i)):n.b+t.string("&"+i+";"),i=b+1,e=g)}l=a.charCodeAt(++b)}1==e&&(i=b,e=13);if(13==e)return(b!=i||0==j)&&c.addChild(A.createPCData(n.b+y.substr(a,i,b-i))),b;throw"Unexpected end";};x={};x.ExtraField=l["haxe.zip.ExtraField"]={__ename__:["haxe","zip","ExtraField"],__constructs__:["FUnknown","FInfoZipUnicodePath","FUtf8"]};x.ExtraField.FUnknown=function(a,b){var c=["FUnknown",0,a,b];c.__enum__=x.ExtraField;c.toString=o;return c};x.ExtraField.FInfoZipUnicodePath=function(a,b){var c=["FInfoZipUnicodePath",1,a,b];c.__enum__=x.ExtraField;c.toString=o;return c};x.ExtraField.FUtf8=["FUtf8",2];x.ExtraField.FUtf8.toString=o;x.ExtraField.FUtf8.__enum__=x.ExtraField;x.Huffman=l["haxe.zip.Huffman"]={__ename__:["haxe","zip","Huffman"],__constructs__:["Found","NeedBit","NeedBits"]};x.Huffman.Found=function(a){a=["Found",0,a];a.__enum__=x.Huffman;a.toString=o;return a};x.Huffman.NeedBit=function(a,b){var c=["NeedBit",1,a,b];c.__enum__=x.Huffman;c.toString=o;return c};x.Huffman.NeedBits=function(a,b){var c=["NeedBits",2,a,b];c.__enum__=x.Huffman;c.toString=o;return c};x.HuffTools=function(){};l["haxe.zip.HuffTools"]=x.HuffTools;x.HuffTools.__name__=["haxe","zip","HuffTools"];x.HuffTools.prototype={make:function(a,b,c,d){var e=[],g=[];if(32<d)throw"Invalid huffman";for(var h=0;h<d;){var i=h++;e.push(0);g.push(0)}for(h=0;h<c;){i=h++;i=a[i+b];if(i>=d)throw"Invalid huffman";e[i]++}for(var j=0,k=1,h=d-1;k<h;)i=k++,j=j+e[i]<<1,g[i]=j;e=new w.IntMap;for(h=0;h<c;)i=h++,j=a[i+b],0!=j&&(k=g[j-1],g[j-1]=k+1,e.set(k<<5|j,i));return this.treeCompress(x.Huffman.NeedBit(this.treeMake(e,d,0,1),this.treeMake(e,d,1,1)))},treeMake:function(a,b,c,d){if(d>b)throw"Invalid huffman";var e=c<<5|d;if(a.exists(e))return x.Huffman.Found(a.get(e));c<<=1;d+=1;return x.Huffman.NeedBit(this.treeMake(a,b,c,d),this.treeMake(a,b,c|1,d))},treeWalk:function(a,b,c,d,e){switch(e[1]){case 1:var g=e[3],h=e[2];0<d?(this.treeWalk(a,b,c+1,d-1,h),this.treeWalk(a,b|1<<c,c+1,d-1,g)):a[b]=this.treeCompress(e);break;default:a[b]=this.treeCompress(e)}},treeCompress:function(a){var b=this.treeDepth(a);if(0==b)return a;if(1==b){switch(a[1]){case 1:b=a[3];a=x.Huffman.NeedBit(this.treeCompress(a[2]),this.treeCompress(b));break;default:throw"assert";}return a}for(var c=1<<b,d=[],e=0;e<c;)e++,d.push(x.Huffman.Found(-1));this.treeWalk(d,0,0,b,a);return x.Huffman.NeedBits(b,d)},treeDepth:function(a){var b;switch(a[1]){case 0:b=0;break;case 2:throw"assert";case 1:b=a[3],a=this.treeDepth(a[2]),b=this.treeDepth(b),b=1+(a<b?a:b)}return b},__class__:x.HuffTools};x._InflateImpl={};x._InflateImpl.Window=function(a){this.buffer=z.Bytes.alloc(65536);this.pos=0;a&&(this.crc=new aa.Adler32)};l["haxe.zip._InflateImpl.Window"]=x._InflateImpl.Window;x._InflateImpl.Window.__name__=["haxe","zip","_InflateImpl","Window"];x._InflateImpl.Window.prototype={checksum:function(){null!=this.crc&&this.crc.update(this.buffer,0,this.pos);return this.crc},available:function(){return this.pos},getLastChar:function(){return this.buffer.b[this.pos-1]},addByte:function(a){65536==this.pos&&this.slide();this.buffer.b[this.pos]=a&255;this.pos++},addBytes:function(a,b,c){65536<this.pos+c&&this.slide();this.buffer.blit(this.pos,a,b,c);this.pos+=c},slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var a=z.Bytes.alloc(65536);this.pos-=32768;a.blit(0,this.buffer,32768,this.pos);this.buffer=a},__class__:x._InflateImpl.Window};x._InflateImpl.State=l["haxe.zip._InflateImpl.State"]={__ename__:["haxe","zip","_InflateImpl","State"],__constructs__:"Head,Block,CData,Flat,Crc,Dist,DistOne,Done".split(",")};x._InflateImpl.State.Head=["Head",0];x._InflateImpl.State.Head.toString=o;x._InflateImpl.State.Head.__enum__=x._InflateImpl.State;x._InflateImpl.State.Block=["Block",1];x._InflateImpl.State.Block.toString=o;x._InflateImpl.State.Block.__enum__=x._InflateImpl.State;x._InflateImpl.State.CData=["CData",2];x._InflateImpl.State.CData.toString=o;x._InflateImpl.State.CData.__enum__=x._InflateImpl.State;x._InflateImpl.State.Flat=["Flat",3];x._InflateImpl.State.Flat.toString=o;x._InflateImpl.State.Flat.__enum__=x._InflateImpl.State;x._InflateImpl.State.Crc=["Crc",4];x._InflateImpl.State.Crc.toString=o;x._InflateImpl.State.Crc.__enum__=x._InflateImpl.State;x._InflateImpl.State.Dist=["Dist",5];x._InflateImpl.State.Dist.toString=o;x._InflateImpl.State.Dist.__enum__=x._InflateImpl.State;x._InflateImpl.State.DistOne=["DistOne",6];x._InflateImpl.State.DistOne.toString=o;x._InflateImpl.State.DistOne.__enum__=x._InflateImpl.State;x._InflateImpl.State.Done=["Done",7];x._InflateImpl.State.Done.toString=o;x._InflateImpl.State.Done.__enum__=x._InflateImpl.State;x.InflateImpl=function(a,b,c){null==c&&(c=!0);null==b&&(b=!0);this["final"]=!1;this.htools=new x.HuffTools;this.huffman=this.buildFixedHuffman();this.huffdist=null;this.dist=this.len=0;this.state=b?x._InflateImpl.State.Head:x._InflateImpl.State.Block;this.input=a;this.needed=this.nbits=this.bits=0;this.output=null;this.outpos=0;this.lengths=[];for(a=0;19>a;)a++,this.lengths.push(-1);this.window=new x._InflateImpl.Window(c)};l["haxe.zip.InflateImpl"]=x.InflateImpl;x.InflateImpl.__name__=["haxe","zip","InflateImpl"];x.InflateImpl.prototype={inflateLoop:function(){switch(this.state[1]){case 0:var a=this.input.readByte();if(8!=(a&15)||7!=a>>4)throw"Invalid data";var b=this.input.readByte();if(0!=((a<<8)+b)%31)throw"Invalid data";if(0!=(b&32))throw"Unsupported dictionary";this.state=x._InflateImpl.State.Block;return!0;case 4:a=this.window.checksum();if(null==a)return this.state=x._InflateImpl.State.Done,!0;b=aa.Adler32.read(this.input);if(!a.equals(b))throw"Invalid CRC";this.state=x._InflateImpl.State.Done;return!0;case 7:return!1;case 1:switch(this["final"]=this.getBit(),this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len)throw"Invalid data";this.state=x._InflateImpl.State.Flat;a=this.inflateLoop();this.resetBits();return a;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=x._InflateImpl.State.CData,!0;case 2:for(var a=this.getBits(5)+257,b=this.getBits(5)+1,c=this.getBits(4)+4,d=0;d<c;){var e=d++;this.lengths[x.InflateImpl.CODE_LENGTHS_POS[e]]=this.getBits(3)}for(d=c;19>d;)e=d++,this.lengths[x.InflateImpl.CODE_LENGTHS_POS[e]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);c=[];e=0;for(d=a+b;e<d;)e++,c.push(0);this.inflateLengths(c,a+b);this.huffdist=this.htools.make(c,a,b,16);this.huffman=this.htools.make(c,0,a,16);this.state=x._InflateImpl.State.CData;return!0;default:throw"Invalid data";}case 3:return a=this.len<this.needed?this.len:this.needed,b=this.input.read(a),this.len-=a,this.addBytes(b,0,a),0==this.len&&(this.state=this["final"]?x._InflateImpl.State.Crc:x._InflateImpl.State.Block),0<this.needed;case 6:return a=this.len<this.needed?this.len:this.needed,this.addDistOne(a),this.len-=a,0==this.len&&(this.state=x._InflateImpl.State.CData),0<this.needed;case 5:for(;0<this.len&&0<this.needed;)a=this.len<this.dist?this.len:this.dist,a=this.needed<a?this.needed:a,this.addDist(this.dist,a),this.len-=a;0==this.len&&(this.state=x._InflateImpl.State.CData);return 0<this.needed;case 2:b=this.applyHuffman(this.huffman);if(256>b)return this.addByte(b),0<this.needed;if(256==b)this.state=this["final"]?x._InflateImpl.State.Crc:x._InflateImpl.State.Block;else{b-=257;a=x.InflateImpl.LEN_EXTRA_BITS_TBL[b];if(-1==a)throw"Invalid data";this.len=x.InflateImpl.LEN_BASE_VAL_TBL[b]+this.getBits(a);b=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);a=x.InflateImpl.DIST_EXTRA_BITS_TBL[b];if(-1==a)throw"Invalid data";this.dist=x.InflateImpl.DIST_BASE_VAL_TBL[b]+this.getBits(a);if(this.dist>this.window.available())throw"Invalid data";this.state=1==this.dist?x._InflateImpl.State.DistOne:x._InflateImpl.State.Dist}return!0}},inflateLengths:function(a,b){for(var c=0,d=0;c<b;){var e=this.applyHuffman(this.huffman);switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:d=e;a[c]=e;c++;break;case 16:e=c+3+this.getBits(2);if(e>b)throw"Invalid data";for(;c<e;)a[c]=d,c++;break;case 17:c+=3+this.getBits(3);if(c>b)throw"Invalid data";break;case 18:c+=11+this.getBits(7);if(c>b)throw"Invalid data";break;default:throw"Invalid data";}}},applyHuffman:function(a){var b;switch(a[1]){case 0:b=a=a[2];break;case 1:b=a[3];a=a[2];b=this.applyHuffman(this.getBit()?b:a);break;case 2:b=a[3],a=a[2],b=this.applyHuffman(b[this.getBits(a)])}return b},addDist:function(a,b){this.addBytes(this.window.buffer,this.window.pos-a,b)},addDistOne:function(a){for(var b=this.window.getLastChar(),c=0;c<a;)c++,this.addByte(b)},addByte:function(a){this.window.addByte(a);this.output.b[this.outpos]=a&255;this.needed--;this.outpos++},addBytes:function(a,b,c){this.window.addBytes(a,b,c);this.output.blit(this.outpos,a,b,c);this.needed-=c;this.outpos+=c},resetBits:function(){this.nbits=this.bits=0},getRevBits:function(a){return 0==a?0:this.getBit()?1<<a-1|this.getRevBits(a-1):this.getRevBits(a-1)},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var a=1==(this.bits&1);this.nbits--;this.bits>>=1;return a},getBits:function(a){for(;this.nbits<a;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var b=this.bits&(1<<a)-1;this.nbits-=a;this.bits>>=a;return b},readBytes:function(a,b,c){this.needed=c;this.outpos=b;this.output=a;if(0<c)for(;this.inflateLoop(););return c-this.needed},buildFixedHuffman:function(){if(null!=x.InflateImpl.FIXED_HUFFMAN)return x.InflateImpl.FIXED_HUFFMAN;for(var a=[],b=0;288>b;){var c=b++;a.push(143>=c?8:255>=c?9:279>=c?7:8)}x.InflateImpl.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return x.InflateImpl.FIXED_HUFFMAN},__class__:x.InflateImpl};x.Reader=function(a){this.i=a};l["haxe.zip.Reader"]=x.Reader;x.Reader.__name__=["haxe","zip","Reader"];x.Reader.unzip=function(a){if(!a.compressed)return a.data;throw"No uncompress support";};x.Reader.prototype={read:function(){for(var a=new ba,b=null;;){var c=this.readEntryHeader();if(null==c)break;if(0>c.dataSize){null==b&&(b=z.Bytes.alloc(65536));for(var d=new z.BytesBuffer,e=new x.InflateImpl(this.i,!1,!1);;){var g=e.readBytes(b,0,65536);d.addBytes(b,0,g);if(65536>g)break}c.data=d.getBytes();c.crc32=this.i.readInt32();134695760==c.crc32&&(c.crc32=this.i.readInt32());c.dataSize=this.i.readInt32();c.fileSize=this.i.readInt32();c.dataSize=c.fileSize;c.compressed=!1}else c.data=this.i.read(c.dataSize);a.add(c)}return a},readEntryHeader:function(){var a=this.i,b=a.readInt32();if(33639248==b||101010256==b)return null;if(67324752!=b)throw"Invalid Zip Data";a.readUInt16();var b=a.readUInt16(),c=0!=(b&2048);if(0!=(b&63479))throw"Unsupported flags "+b;var d=a.readUInt16(),e=0!=d;if(e&&8!=d)throw"Unsupported compression "+d;var d=this.readZipDate(),g=a.readInt32(),h=a.readInt32(),i=a.readInt32(),j=a.readInt16(),k=a.readInt16(),a=a.readString(j),k=this.readExtraFields(k);c&&k.push(x.ExtraField.FUtf8);0!=(b&8)&&(h=-1);return{fileName:a,fileSize:i,fileTime:d,compressed:e,dataSize:h,data:null,crc32:g,extraFields:k}},readExtraFields:function(a){for(var b=new ba;0<a;){if(4>a)throw"Invalid extra fields data";var c=this.i.readUInt16(),d=this.i.readUInt16();if(a<d)throw"Invalid extra fields data";switch(c){case 28789:var e=this.i.readByte();if(1!=e){var g=new z.BytesBuffer;g.b.push(e);g.add(this.i.read(d-1));b.add(x.ExtraField.FUnknown(c,g.getBytes()))}else c=this.i.readInt32(),e=this.i.read(d-5).toString(),b.add(x.ExtraField.FInfoZipUnicodePath(e,c));break;default:b.add(x.ExtraField.FUnknown(c,this.i.read(d)))}a-=4+d}return b},readZipDate:function(){var a=this.i.readUInt16(),b=a>>11&31,c=a>>5&63,a=a&31,d=this.i.readUInt16();return new Date((d>>9)+1980,(d>>5&15)-1,d&31,b,c,a<<1)},__class__:x.Reader};I=function(){};l["js.Boot"]=I;I.__name__=["js","Boot"];I.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var g=d++,c=2!=g?c+(","+I.__string_rec(a[g],b)):c+I.__string_rec(a[g],b);return c+")"}d=a.length;c="[";b+="\t";for(e=0;e<d;)g=e++,c+=(0<g?",":"")+I.__string_rec(a[g],b);return c+"]"}try{e=a.toString}catch(h){return"???"}if(null!=e&&e!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;e=null;c="{\n";b+="\t";d=null!=a.hasOwnProperty;for(e in a)if(!d||a.hasOwnProperty(e))"prototype"==e||"__class__"==e||"__super__"==e||"__interfaces__"==e||"__properties__"==e||(2!=c.length&&(c+=", \n"),c+=b+e+" : "+
I.__string_rec(a[e],b));b=b.substring(1);return c+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};I.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var g=d++,g=c[g];if(g==b||I.__interfLoop(g,b))return!0}return I.__interfLoop(a.__super__,b)};I.__instanceof=function(a,b){if(null==b)return!1;switch(b){case oa:return(a|0)===a;case la:return"number"==typeof a;case ma:return"boolean"==typeof a;case String:return"string"==typeof a;case pa:return!0;default:if(null!=a){if("function"==typeof b){if(a instanceof b)return b==Array?null==a.__enum__:!0;if(I.__interfLoop(a.__class__,b))return!0}}else return!1;return b==qa&&null!=a.__name__||b==ra&&null!=a.__ename__?!0:a.__enum__==b}};I.__cast=function(a,b){if(I.__instanceof(a,b))return a;throw"Cannot cast "+t.string(a)+" to "+t.string(b);};var na=0;Array.prototype.indexOf&&(y.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0});Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;l.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=l.String=String;String.__name__=["String"];Array.prototype.__class__=l.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=l.Date=Date;Date.__name__=["Date"];var oa=l.Int={__name__:["Int"]},pa=l.Dynamic={__name__:["Dynamic"]},la=l.Float=Number;la.__name__=["Float"];var ma=l.Bool=Boolean;ma.__ename__=["Bool"];var qa=l.Class={__name__:["Class"]},ra={};A.Element="element";A.PCData="pcdata";A.CData="cdata";A.Comment="comment";A.DocType="doctype";A.ProcessingInstruction="processingInstruction";A.Document="document";"undefined"!=typeof JSON&&($=JSON);c.Achievements.LOCALIZATION_NAME_BASE="achievement_name_";c.Achievements.LOCALIZATION_DESC_BASE="achievement_desc_";c.Achievements.ICON_BASE="achievement_icon_";c.ConstantsApp.STAGE_WIDTH=960;c.ConstantsApp.STAGE_HEIGHT=560;c.ConstantsApp.STAGE_CENTER_X=480;c.ConstantsApp.STAGE_CENTER_Y=280;c.ConstantsApp.ACHIEVEMENTS_ID="X";c.ConstantsApp.STORE_ID="store_id";c.ConstantsApp.PROGRESS_ID="progress_id";c.ConstantsApp.LAYER_WORLD="layer_world";c.ConstantsApp.LAYER_BG="layer_bg";c.ConstantsApp.LAYER_PLAYER="layer_player";c.ConstantsApp.LAYER_OVER="layer_over";c.ConstantsApp.LAYER_FG="layer_fg";c.ConstantsApp.LAYER_UI="layer_ui";c.ConstantsApp.LAYER_MINI_GAME_BG="layer_mg_bg";c.ConstantsApp.LAYER_MINI_GAME_GAMEPLAY="layer_mg_gameplay";c.ConstantsApp.LAYER_MINI_GAME_OVERLAY="layer_mg_overlay";c.ConstantsApp.EVENT_PAUSE="EVENT_PAUSE";c.ConstantsApp.EVENT_UNPAUSE="EVENT_UNPAUSE";c.ConstantsApp.EVENT_MUTE_TOGGLE="EVENT_MUTE_TOGGLE";c.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE="EVENT_WORLD_GENERATION_COMPLETE";c.ConstantsApp.EVENT_RESIZE_CANVAS="EVENT_RESIZE_CANVAS";c.ConstantsApp.EVENT_MISSION_SELECTED="EVENT_MISSION_SELECTED";c.ConstantsApp.EVENT_TIE_FIRE="EVENT_TIE_FIRE";c.ConstantsApp.EVENT_SPAWN_ALERT="EVENT_SPAWN_ALERT";c.ConstantsApp.EVENT_MINIGAME_RESULTS="EVENT_MINIGAME_RESULTS";c.ConstantsApp.EVENT_DESPAWN_ALERT="EVENT_DESPAWN_ALERT";c.ConstantsApp.EVENT_DISPLAY_DIALOGUE_BOX="EVENT_SHOW_DIALOG_BOX";c.ConstantsApp.EVENT_HIDE_DIALOGUE_BOX="EVENT_HIDE_DIALOG_BOX";c.ConstantsApp.EVENT_TEST_MINIGAME="EVENT_TEST_MINIGAME";c.ConstantsApp.EVENT_RETURN_TO_MAIN_MENU="EVENT_RETURN_TO_MAIN_MENU";c.ConstantsApp.EVENT_SPAWN_NPC="EVENT_SPAWN_NPC";c.ConstantsApp.EVENT_VIDEO_PLAY="EVENT_VIDEO_PLAY";c.ConstantsApp.EVENT_VIDEO_PAUSE="EVENT_VIDEO_PAUSE";c.ConstantsApp.EVENT_VIDEO_RESUME="EVENT_VIDEO_RESUME";c.ConstantsApp.EVENT_VIDEO_RESTART="EVENT_VIDEO_RESTART";c.ConstantsApp.EVENT_VIDEO_COMPLETE="EVENT_VIDEO_COMPLETE";c.ConstantsApp.EVENT_VIDEO_STOP="EVENT_VIDEO_STOP";c.ConstantsApp.EVENT_ALERT_Template="EVENT_ALERT_";c.ConstantsApp.EVENT_TALK_EZRA="EVENT_ALERT_E";c.ConstantsApp.EVENT_TALK_HERA="EVENT_ALERT_H";c.ConstantsApp.EVENT_TALK_KANAN="EVENT_ALERT_K";c.ConstantsApp.EVENT_TALK_SABINE="EVENT_ALERT_S";c.ConstantsApp.EVENT_TALK_ZEB="EVENT_ALERT_Z";c.ConstantsApp.EVENT_ALERT_RIGHT="EVENT_ALERT_>";c.ConstantsApp.EVENT_ALERT_UP="EVENT_ALERT_^";c.ConstantsApp.EVENT_ALERT_LEFT="EVENT_ALERT_<";c.ConstantsApp.EVENT_ALERT_DOWN="EVENT_ALERT_v";c.ConstantsApp.EVENT_ITEM_SELECT="EVENT_ITEM_SELECT";c.ConstantsApp.BOOL_GAME_LOSE="bool_game_lose";c.ConstantsApp.BOOL_GAME_WIN="bool_game_win";c.ConstantsApp.BOOL_LEVEL_LOSE="bool_level_lose";c.ConstantsApp.BOOL_LEVEL_WIN="bool_level_win";c.ConstantsApp.BOOL_PAUSED="bool_paused";c.ConstantsApp.BOOL_TOUCH_DEVICE="bool_touch_device";c.ConstantsApp.BOOL_ORIENTATION_ALERT="bool_orientation_alert";c.ConstantsApp.BOOL_CODE_SCREEN_OPEN="bool_code_screen_open";c.ConstantsApp.BOOL_SHOP_OPEN="bool_shop_open";c.ConstantsApp.BOOL_CODE_UNLOCK="bool_code_unlock";c.ConstantsApp.BOOL_ALLOW_UNLOCK="bool_allow_unlock";c.ConstantsApp.BOOL_PRELOAD_LOADED="bool_preload_loaded";c.ConstantsApp.BOOL_INITIAL_LOADED="bool_initial_loaded";c.ConstantsApp.BOOL_GAMEPLAY_LOADED="bool_gameplay_loaded";c.ConstantsApp.BOOL_LOW_QUALITY_MOBILE="bool_low_quality_mobile";c.ConstantsApp.BOOL_JSEMBED_EXISTS="bool_jsembed_exists";c.ConstantsApp.BOOL_TESTING_MINIGAMES="bool_testing_minigames";c.ConstantsApp.BOOL_VIDEO_OPEN="bool_video_open";c.ConstantsApp.BOOL_SHOWING_MESSAGE="bool_showing_message";c.ConstantsApp.INT_HEALTH="int_health";c.ConstantsApp.INT_LIVES="int_lives";c.ConstantsApp.INT_SCORE="int_score";c.ConstantsApp.INT_LOADING_SCORE="int_load_score";c.ConstantsApp.INT_ACHIEVEMENT_SCORE="int_achievement_score";c.ConstantsApp.INT_LOADING_PROGRESS="int_loading_progress";c.ConstantsApp.INT_GAME_CLASS="int_game_class";c.ConstantsApp.INT_LEVEL="int_level";c.ConstantsApp.INT_MISSION="int_mission";c.ConstantsApp.INT_CREDITS="int_credits";c.ConstantsApp.INT_CREDITS_SESSION="int_credits_session";c.ConstantsApp.INT_DIFFICULTY="int_difficulty";c.ConstantsApp.INT_MAX_MISSION_NUMBER="int_max_mission_number";c.ConstantsApp.INT_QUALITY="int_quality";c.ConstantsApp.FLOAT_STRESS="float_stress";c.ConstantsApp.FLOAT_MAX_Y_INPUT_RANGE="float_max_y_input_range";c.ConstantsApp.OBJECT_MISSION="obj_mission";c.ConstantsApp.STRING_VIDEO_NAME="string_video_name";c.ConstantsApp.STRING_UNLOCK_CODE="string_unlock_code";c.ConstantsApp.STRING_LEVEL_ID="string_level_id";c.ConstantsApp.STRING_SCALE_TYPE="string_scale_type";c.ConstantsApp.STRING_TEST_MINIGAME_ID="string_test_minigame_id";c.ConstantsApp.STRING_SHIP_LOCATION="string_ship_location";c.ConstantsApp.INT_ALERT_COUNT_="int_alert_count_";c.ConstantsApp.INT_MED_ALERT_COUNT_="int_midalert_count_";c.ConstantsApp.INT_HIGH_ALERT_COUNT_="int_highalert_count_";c.ConstantsApp.LOC_COCKPIT="the Cockpit";c.ConstantsApp.LOC_HALLWAY="the Hallway";c.ConstantsApp.LOC_ENGINE="the Engine Room";c.ConstantsApp.LOC_CARGO="the Cargo Bay";c.ConstantsApp.LOC_OBSERVATION="the Observation Deck";c.ConstantsApp.LOC_COMMON="the Common Room";c.ConstantsApp.LOC_HALLWAY_1="the Left Hallway";c.ConstantsApp.LOC_HALLWAY_2="the Central Hallway";c.ConstantsApp.LOC_HALLWAY_3="the Right Hallway";c.ConstantsApp.LOC_HANGAR="the Hangar";c.ConstantsApp.LOC_SECURITY="the Security Room";c.ConstantsApp.LOC_STORAGE="Imperial Storage";c.ConstantsApp.LOC_DETENTION="the Detention Cells";c.ConstantsApp.LOC_DISPOSAL="the Trash Compactor";c.ConstantsApp.LOC_VENTS="the Ventilation Ducts";c.ConstantsApp.POOL_ELEMENT="pool_element";c.ConstantsApp.POOL_ELEMENT_MINIGAME="pool_minigame";c.ConstantsApp.INPUT_CLICK="input_click";c.ConstantsApp.INPUT_SPACE="input_space";c.ConstantsApp.INPUT_UP="input_up";c.ConstantsApp.INPUT_DOWN="input_down";c.ConstantsApp.INPUT_LEFT="input_left";c.ConstantsApp.INPUT_RIGHT="input_right";c.ConstantsApp.INPUT_SHIFT="input_shift";c.ConstantsApp.VIRTUAL_JUMP="v_jump";c.ConstantsApp.VIRTUAL_FLASH="v_flash";c.ConstantsApp.CONFIG_XML_PATH="config/config.xml";c.ConstantsApp.MISSION_DATA_PATH="config/missions.xml";c.ConstantsApp.OBJECT_VIDEO="object_video";c.ConstantsApp.OPTION_SILENCE_AUDIO=!1;c.ConstantsApp.OPTION_HAS_MENU_MUSIC=!1;c.ConstantsApp.OPTION_SHOW_LOADING_ON_WORLD_GEN_ALWAYS=!0;c.ConstantsApp.OPTION_SHOW_MINIGAME_MENU=!1;c.ConstantsApp.OPTION_ALL_MISSIONS=!1;c.ConstantsApp.OPTION_VIDEO_TEST=!1;c.ConstantsApp.OPTION_SHOW_VIDEOS=!1;c.ConstantsApp.OPTION_SHOW_COLLISIONS=!1;c.ConstantsApp.OPTION_SHOW_ALL_DIALOG=!1;c.ConstantsApp.OPTION_SKIPPABLE_INPUT=!1;c.ConstantsApp.OPTION_SHOW_EMULATED_CLOSE=!1;c.ConstantsApp.OPTION_FORCE_LOW_QUALITY=!1;c.ConstantsApp.scaleFactor=1;c.ConstantsApp.benchmarkGoal=2E3;c.ConstantsScreen.SCREEN_LOADING="loadpanel";c.ConstantsScreen.SCREEN_MINIGAME="minigame";c.ConstantsScreen.SCREEN_MINIGAME_MENU="minigame_menu";c.ConstantsScreen.SCREEN_SPLASH="splash";c.ConstantsScreen.SCREEN_MAIN_MENU="mainmenu";c.ConstantsScreen.SCREEN_MISSION_SELECT="selectmission";c.ConstantsScreen.SCREEN_HELP="help";c.ConstantsScreen.SCREEN_SHOP="shop";c.ConstantsScreen.SCREEN_GAMEPLAY_HUD="gameplayhud";c.ConstantsScreen.SCREEN_GAMEPLAY_MENU="gameplaymenu";c.ConstantsScreen.SCREEN_QUIT_CONFIRM="quitconfirm";c.ConstantsScreen.SCREEN_END_LEVEL="endlevel";c.ConstantsScreen.SCREEN_ABORT="abort";c.ConstantsScreen.SCREEN_END_GAME="endgame";c.ConstantsScreen.SCREEN_CUTSCENE_BORDERS="cutsceneborders";c.ConstantsScreen.SCREEN_PAUSE_ALERT="pause";c.ConstantsScreen.SCREEN_ENTER_CODE="entercode";c.ConstantsScreen.SCREEN_ACHIEVEMENTS="achievements";c.ConstantsScreen.SCREEN_ACHIEVEMENT_POPUP="achievementpopup";c.ConstantsScreen.SCREEN_VIDEO="video";c.ConstantsScreen.TRANSITION_FADE=0;c.ConstantsScreen.TRANSITION_SCROLL=1;c.ConstantsScreen.TRANSITION_SCROLL_DOWN=2;c.ConstantsScreen.TRANSITION_SCROLL_UP=3;c.ConstantsScreen.TRANSITION_STAGED=4;c.ConstantsScreen.TRANSITION_SCREENSHOT=5;c.ConstantsScreen.CHANGE_OPEN_BEGIN=0;c.ConstantsScreen.CHANGE_OPEN_COMPLETE=1;c.ConstantsScreen.CHANGE_CLOSE_BEGIN=2;c.ConstantsScreen.CHANGE_CLOSE_COMPLETE=3;c.ConstantsScreen.OUTPUT_OPENED=0;c.ConstantsScreen.OUTPUT_CLOSED=1;c.ConstantsScreen.CONDITION_CLOSED_ALL=0;c.ConstantsScreen.CONDITION_CLOSED_SPECIFIC=1;c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY=2;c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE=3;c.ConstantsScreen.CONDITION_IMMEDIATE=4;c.ConstantsScreen.FLOW_SPLASH_PLAY="FLOW_SPLASH_PLAY";c.ConstantsScreen.FLOW_SPLASH_CLICKTRAY="FLOW_SPLASH_CLICKTRAY";c.ConstantsScreen.FLOW_NEW_GAME="FLOW_NEW_GAME";c.ConstantsScreen.FLOW_SELECTED_LEVEL="FLOW_SELECTED_LEVEL";c.ConstantsScreen.FLOW_BACK_TO_MAIN_MENU="FLOW_BACK_TO_MAIN_MENU";c.ConstantsScreen.FLOW_HELP_CLOSE="FLOW_HELP_CLOSE";c.ConstantsScreen.FLOW_SHOP="FLOW_SHOP";c.ConstantsScreen.FLOW_SHOP_CLOSE="FLOW_SHOP_CLOSE";c.ConstantsScreen.FLOW_VIDEO_OPEN="FLOW_VIDEO_OPEN";c.ConstantsScreen.FLOW_VIDEO_CLOSE="FLOW_VIDEO_CLOSE";c.ConstantsScreen.FLOW_GAMEPLAY_MENU="FLOW_GAMEPLAY_MENU";c.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE="FLOW_GAMEPLAY_MENU_CLOSE";c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP="FLOW_GAMEPLAY_MENU_HELP";c.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT="FLOW_GAMEPLAY_MENU_QUIT";c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES="FLOW_GAMEPLAY_QUIT_YES";c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO="FLOW_GAMEPLAY_QUIT_NO";c.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN="FLOW_END_GAME_PLAY_AGAIN";c.ConstantsScreen.FLOW_BRANCH_GAME_WIN="FLOW_BRANCH_GAME_WIN";c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE="FLOW_BRANCH_GAME_LOSE";c.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN="FLOW_BRANCH_LEVEL_WIN";c.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE="FLOW_BRANCH_LEVEL_LOSE";c.ConstantsScreen.FLOW_MISSION_COMPLETE="FLOW_MISSION_COMPLETE";c.ConstantsScreen.FLOW_ENTER_CODE_CLOSE="FLOW_ENTER_CODE_CLOSE";c.ConstantsScreen.FLOW_ENTER_CODE_OPEN="FLOW_ENTER_CODE_OPEN";c.ConstantsScreen.FLOW_LOAD_CLOSE="FLOW_LOAD_CLOSE";c.ConstantsScreen.FLOW_MINIGAME_CLOSE="FLOW_MINIGAME_CLOSE";c.ConstantsScreen.FLOW_MINIGAME_OVER="FLOW_MINIGAME_OVER";c.ConstantsScreen.FLOW_MINIGAME_MENU="FLOW_MINIGAME_MENU";c.ConstantsScreen.FLOW_LOADING_DONE="FLOW_LOADING_DONE";c.ConstantsScreen.FLOW_TEST_MINIGAME="FLOW_TEST_MINIGAME";c.ConstantsScreen.FLOW_TEST_MINIGAME_COMPLETE="FLOW_TEST_MINIGAME_COMPLETE";c.ConstantsScreen.FLOW_ACHIEVEMENT_POPUP="FLOW_ACHIEVEMENT_POPUP";c.ConstantsScreen.FLOW_ACHIEVEMENT_POPUP_CLOSE="FLOW_ACHIEVEMENT_POPUP_CLOSE";c.ConstantsScreen.FLOW_ACHIEVEMENT="FLOW_ACHIEVEMENT";c.ConstantsScreen.FLOW_ACHIEVEMENT_CLOSE="FLOW_ACHIEVEMENT_CLOSE";g.buttons.ButtonBase.OVER="workinBtnOver";g.buttons.ButtonBase.OUT="workinBtnOut";g.buttons.ButtonBase.UP="workinBtnUp";g.buttons.ButtonBase.DOWN="workinBtnDown";g.buttons.ButtonBase.CLICK="workinBtnClick";g.buttons.ButtonBase.CANCEL_DRAG="workinBtnCancelDrag";j.Display.EVENT_UPDATE_DISPLAY="event_update_display";g.display.DisplayHealth._X_SPACING=32;g.display.DisplayHealth._FLASH_RATE=0.1;g.screens.ScreenAbort.UI_EVENT_CLICK_MENU="onGameplayClickMenu";g.screens.ScreenEndGame.UI_EVENT_CLICK_MENU="onGameplayClickMenu";g.screens.ScreenEndLevel.UI_EVENT_CLICK_MENU="onGameplayClickMenu";g.screens.ScreenGameplayHUD.UI_EVENT_CLICK_MENU="onGameplayClickMenu";g.screens.data.ScreenStateData.ACTION_STOP=0;g.screens.data.ScreenStateData.ACTION_OPENED=1;g.screens.data.ScreenStateData.ACTION_EVENT=2;g.screens.data.ScreenStateData.ACTION_NEW_STATE=3;g.screens.data.ScreenStateData.ACTION_CLOSED=4;g.screens.data.ScreenStateData.ACTION_FLOW=5;g.screens.minigames.ProtectBurger._ORBIT_RADIUS=40;d.World.SECURITY_MOVETIME=0.5;d.World.BASE_SHAKE_STR=2;d.World.CHANCE_TO_STRIKE=0.2;d.World.CHOPPER_BASE_MOVETIME=0.255;d.World.CHOPPER_BASE_CALMNESS=0.1;d.World.CHOPPER_MOVETIME_MODIFIER=0.0255;d.World.CHOPPER_CALMNESS_MODIFIER=0.01;d.elements.MinigameElement.BEHAVIOR_FIGHTER="BEHAVIOR_FIGHTER";d.elements.MinigameElement.BEHAVIOR_LASER="BEHAVIOR_LASER";d.elements.MinigameElement.BEHAVIOR_LASER_ENEMY="BEHAVIOR_LASER_ENEMY";d.elements.MinigameElement.BEHAVIOR_ASTEROID_LASER="BEHAVIOR_ASTEROID_LASER";d.elements.MinigameElement.BEHAVIOR_TERRAIN="BEHAVIOR_TERRAIN";d.elements.MinigameElement.BEHAVIOR_PORT="BEHAVIOR_PORT";d.elements.VideoElement.FLAG_INITED=!1;d.minigames.Minigame.MINIGAME_BASE="MINIGAME_BASE";d.minigames.Minigame.MINIGAME_TURRET_FIGHT="MINIGAME_TURRET_FIGHT";d.minigames.Minigame.MINIGAME_CARGO_CRANE="MINIGAME_CARGO_CRANE";d.minigames.Minigame.MINIGAME_CARGO_JETTISON="MINIGAME_CARGO_JETTISON";d.minigames.Minigame.MINIGAME_MATCH_ROTATOR="MINIGAME_MATCH_ROTATOR";d.minigames.Minigame.MINIGAME_LANDER="MINIGAME_LANDER";d.minigames.Minigame.MINIGAME_LANDER_ENTER="MINIGAME_LANDER_ENTER";d.minigames.Minigame.MINIGAME_LANDER_LEAVE="MINIGAME_LANDER_LEAVE";d.minigames.Minigame.MINIGAME_LANDER_ENTER_SHIP="MINIGAME_LANDER_ENTER_SHIP";d.minigames.Minigame.MINIGAME_LANDER_LEAVE_SHIP="MINIGAME_LANDER_LEAVE_SHIP";d.minigames.Minigame.MINIGAME_WELDING="MINIGAME_WELDING";d.minigames.Minigame.MINIGAME_WELDING_DESTROY="MINIGAME_WELDING_DESTROY";d.minigames.Minigame.MINIGAME_WELDING_PAINT="MINIGAME_WELDING_PAINT";d.minigames.Minigame.MINIGAME_FIRE_EXTINGUISHER="MINIGAME_FIRE_EXTINGUISHER";d.minigames.Minigame.MINIGAME_ASTEROID_FIELD="MINIGAME_ASTEROID_FIELD";d.minigames.Minigame.MINIGAME_ASTEROID_DEBRIS="MINIGAME_ASTEROID_DEBRIS";d.minigames.Minigame.MINIGAME_PLUG_IT_IN="MINIGAME_PLUG_IT_IN";d.minigames.Minigame.MINIGAME_PULL_IT_OUT="MINIGAME_PULL_IT_OUT";d.minigames.Minigame.MINIGAME_STEALTH="MINIGAME_STEALTH";d.minigames.Minigame.MINIGAME_CREW_PROTECT="MINIGAME_CREW_PROTECT";d.minigames.Minigame.LAYER_MINIGAME_BG="LAYER_MINIGAME_BG";d.minigames.Minigame.LAYER_MINIGAME_GAMEPLAY="LAYER_MINIGAME_GAMEPLAY";d.minigames.Minigame.LAYER_MINIGAME_PLAYER="LAYER_MINIGAME_PLAYER";d.minigames.Minigame.LAYER_MINIGAME_FG="LAYER_MINIGAME_FG";d.minigames.Minigame.LAYER_MINIGAME_HUD="LAYER_MINIGAME_HUD";d.minigames.Minigame.LAYER_MINIGAME_FRAME="LAYER_MINIGAME_FRAME";d.minigames.Minigame.WIDTH=620;d.minigames.Minigame.HEIGHT=486;d.minigames.Minigame.CENTER_X=310;d.minigames.Minigame.CENTER_Y=243;d.minigames.Minigame._TIMER_START_X=10;d.minigames.Minigame._TIMER_NODES=25;d.minigames.Minigame._TIMER_NODE_SIZE=20;d.minigames.MinigameAsteroidNavigator._BOUNDING_BUFFER=60;d.minigames.MinigameAsteroidNavigator._GHOST_RADIUS=30;d.minigames.MinigameAsteroidNavigator._GHOST_WOOSH_RADIUS=100;d.minigames.MinigameAsteroidNavigator.OBJECTIVE_DEBRIS="objective_debris";d.minigames.MinigameAsteroidNavigator.OBJECTIVE_ASTEROID="objective_asteroid";d.minigames.MinigameCargoCrane.OBJECTIVE_SAVE="objective_save";d.minigames.MinigameCargoCrane.OBJECTIVE_JETTISON="objective_jettison";d.minigames.MinigameCargoCrane.SHIP_FLOOR_Y=310;d.minigames.MinigameFireExtinguisher._GRID_START_X=30;d.minigames.MinigameFireExtinguisher._GRID_START_Y=18;d.minigames.MinigameLander.OBJECTIVE_PICKUP_RETURN="objective_pickup_return";d.minigames.MinigameLander.OBJECTIVE_LAND="objective_land";d.minigames.MinigameLander.OBJECTIVE_RETURN="objective_return";d.minigames.MinigameLander.SKIN_NORMAL="skin_normal";d.minigames.MinigameLander.SKIN_IMPERIAL="skin_imperial";d.minigames.MinigameLander._CHOPPER_TURN_SPEED_BASE=200;d.minigames.MinigameLander._CHOPPER_GRAVITY=18;d.minigames.MinigameLander._CHOPPER_MAX_LAND_SPEED=31;d.minigames.MinigameLander._CHOPPER_UPGRADE_MOD=1;d.minigames.MinigameLander._BOUNDING_BUFFER=30;d.minigames.MinigameLander._BOUNDING_GHOST=100;d.minigames.MinigameLander._LANDING_HEIGHT=55;d.minigames.MinigameLander._SOUND_LOOP_LENGTH=0.5;d.minigames.MinigameLander._INSTRUCTIONS_LAND="lander_instructions_extra";d.minigames.MinigameMatchRotator._DISK_CENTER_X=d.minigames.Minigame.CENTER_X-30;d.minigames.MinigameMatchRotator._DISK_CENTER_Y=d.minigames.Minigame.CENTER_Y-5;d.minigames.MinigameMatchRotator._DISK1_RAD=74.55;d.minigames.MinigameMatchRotator._DISK2_RAD=149.1;d.minigames.MinigameMatchRotator._DISK3_RAD=213;d.minigames.MinigameMatchRotator._INSTRUCTION_DISC_TURN="match_instructions_extra";d.minigames.MinigamePlugItIn.OBJECTIVE_PLUG_IN_ALL="objective_plug_in_all";d.minigames.MinigamePlugItIn.OBJECTIVE_UNPLUG_ALL="objective_unplug_all";d.minigames.MinigameWelding.OBJECTIVE_FIX="objective_fix";d.minigames.MinigameWelding.OBJECTIVE_PAINT="objective_paint";d.minigames.MinigameWelding.OBJECTIVE_CUT="objective_cut";d.minigames.MinigameWelding._SOUND_LOOP_LENGTH=0.35;d.minigames.MinigameWelding._CHECK_TIME=0.25;G.ConstantsCloud.FONT_DEFAULT="Basic";G.ConstantsCloud.STRING_REGION_ID="cloudregionid";G.ConstantsCloud.INT_LOADING_PROGRESS="int_loading_progress";G.ConstantsCloud.LOCALIZATION_XML_PATH="config/";G.ConstantsCloud.EVENT_FILES_LOADING="EVENT_FILES_LOADING";G.ConstantsCloud.EVENT_FILES_ERROR="EVENT_FILES_ERROR";G.ConstantsCloud.EVENT_TWEENS_COMPLETE="EVENT_TWEENS_COMPLETE";G.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY="EVENT_INPUT_ARBITRARY_KEY";G.ConstantsCloud.EVENT_VO_STARTED="EVENT_VO_STARTED";G.ConstantsCloud.EVENT_VO_PAUSED="EVENT_VO_PAUSED";G.ConstantsCloud.EVENT_VO_ENDED="EVENT_VO_ENDED";G.ConstantsCloud._uniqueId=0;j.QueuedAnimation._poolId="QueuedAnimation";j.AnimationDef._poolId="AnimationDef";j.PoolManager.ALL_POOLS_FULL="PoolManager_ALL_POOLS_FULL";j.Renderable._poolId="Renderable";r.Sprite._scratchPoint=new K.Point;n.WMEvent._poolId="WMEvent";n.WMEventData._poolId="WMEventData";n.WMEventDispatcher._poolId="WMEventDispatcher";n._WMEventDispatcher.WMEventTracker._poolId="WMEventTracker";n._WMEventDispatcher.SignalTracker._poolId="SignalTracker";n.WMEventFlow._poolId="WMEventFlow";n.WMEventFlow.EVENT_FLOW="Nflow";n.WMEventHash._poolId="WMEventHash";n.WMEventInput._poolId="WMEventInput";n.WMEventInput.EVENT_INPUT="eventinput";n.WMEventInput.PHASE_DOWN=1;n.WMEventInput.PHASE_UP=0;n.WMEventInput.PHASE_MOVE=2;n.WMEventInterfaceChange._poolId="WMEventInterfaceChange";n.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT="Neio";n.WMEventScreenOut._poolId="WMEventScreenOut";n.WMEventScreenOut.EVENT_SCREEN_OUTPUT="Neso";n.WMEventUpdate._poolId="WMEventUpdate";n.WMEventUpdate.EVENT_UPDATE="eventupdate";h.WMRectangle._poolId="WMRectangle";h.WorkinLine._poolId="WorkinLine";h.WorkinPoint._poolId="WorkinPoint";h.tween.WorkinTweener._poolId="WorkinTweener";h.tween.WorkinTweener._uniqueTimer=0;h.tween.WorkinTweenTracker._poolId="WorkinTweenTracker";h.tween.WorkinTweenTracker._tweenRemoval=[];h.tween.WorkinTweenTracker._tweenUpdate=[];h.tween.WorkinTweenDef._poolId="WorkinTweenDef";U.ServiceAnalytics._flagInitted=!1;e.WMPointer._poolId="WMPointer";e.WMPointer._DELTA_ALLOWANCE=30;e.WMPointer._DELTA_TIMEOUT=0.2;e.WMLocalizedData._poolId="WMLocalizedData";e.WMRandom._DEFAULT_SESSION="def";e.WorkinUtils._mapEmpty=[];e.PropertyList._dateRegex=new Z("(\\d{4}-\\d{2}-\\d{2})(?:T(\\d{2}:\\d{2}:\\d{2})Z)?","");k.html.HtmlPlatform.instance=new k.html.HtmlPlatform;s.SignalBase.DISPATCHING_SENTINEL=new s.SignalConnection(null,null);B.root=new P;B.uncaughtError=new s.Signal1;B.hidden=new s.Value(!1);B.hasGPU=new s.Value(!1);B.volume=new O.AnimatedFloat(1);B._platform=k.html.HtmlPlatform.instance;B._calledInit=!1;D.window="undefined"!=typeof window?window:null;D.document="undefined"!=typeof window?window.document:null;D.navigator="undefined"!=typeof window?window.navigator:null;u.Manifest.__meta__={obj:{assets:[{minigame_stealth:[{bytes:5984,md5:"3ba5493593813749076e48542285ec5a",name:"sheets/sprites_tacticalstealth.plist"},{bytes:43101,md5:"e6865aa3a624406fc0e05f51d8fec048",name:"sheets/sprites_tacticalstealth.png"}],fonts_en_simple:[{bytes:12013,md5:"4a54a5c541320230c767d4e659620407",name:"Basic.fnt"},{bytes:56453,md5:"c3dd81ee3923ce1e1c5d474e61c429bf",name:"Basic.png"}],minigame_asteroid_navigator:[{bytes:68421,md5:"d6e7cd629e0c6b8d779432ea7ffa287b",name:"sfx_asteroids/pass_asteroid.mp3"},{bytes:36008,md5:"7e248985c044a1cda0ab9de381e72c7a",name:"sfx_asteroids/pass_asteroid.ogg"},{bytes:11387,md5:"23be1c3d3d889fb9dcab5944cb9fa7f5",name:"sheets/sprites_asteroidgame.plist"},{bytes:172061,md5:"b3892ee121e1b0513ca16480b0a1403d",name:"sheets/sprites_asteroidgame.png"},{bytes:31424,md5:"0f6e369bef92a8e8b554579e222c6703",name:"SWR_Mini_Debris_BG.jpg"}],preload:[{bytes:2229,md5:"d13c0ff5e173a1759abcaa301b881c09",name:"spritesheets/sprites_loadbar.plist"},{bytes:33425,md5:"8d5723af47f55330ab0c79daed6f7c99",name:"spritesheets/sprites_loadbar.png"}],minigame_cargo_crane:[{bytes:37077,md5:"bc8e396d64a757a9d4feed16f8c82e18",name:"cargo-stars-bg.jpg"},{bytes:6028,md5:"d4781fd95c1ba59131cddb248c1a56e8",name:"sheets/sprites_cargocrane.plist"},{bytes:176934,md5:"1a9f82bd7bd5009265390104f39d9303",name:"sheets/sprites_cargocrane.png"}],gameplay_soundfx:[{bytes:7280,md5:"a2d52f20f1f137a9ca08eb594c24517b",name:"alert_blue.mp3"},{bytes:9034,md5:"db956a63c8d1ec0372fdc3dffd90f3b9",name:"alert_blue.ogg"},{bytes:7279,md5:"d803f509108ed7bbe640697f39f54167",name:"alert_red.mp3"},{bytes:9076,md5:"cc5262fe6b3fd3c176bd41abadeb051e",name:"alert_red.ogg"},{bytes:7282,md5:"2af4e1026450e23beceb6472ee99b31d",name:"alert_yellow.mp3"},{bytes:9008,md5:"77a669d8294fd1ef56379636867aaf03",name:"alert_yellow.ogg"},{bytes:4464,md5:"d198f836e47799eee9746f5c36a86135",name:"chopper/chopper_accept_orders_1.mp3"},{bytes:8286,md5:"33ac09b70acd8c052a25770174d5d6b8",name:"chopper/chopper_accept_orders_1.ogg"},{bytes:6824,md5:"9b3c79478d5f672a48320e3cf64b59f7",name:"chopper/chopper_accept_orders_2.mp3"},{bytes:11007,md5:"e60ac6e9c588f1623001fbb226eaeaeb",name:"chopper/chopper_accept_orders_2.ogg"},{bytes:7256,md5:"e93f04b9c5d313a4d372ddedbb11df58",name:"chopper/chopper_accept_orders_3.mp3"},{bytes:12429,md5:"a49d64caaa6c6904a7689616335b1acd",name:"chopper/chopper_accept_orders_3.ogg"},{bytes:16040,md5:"18268b35b224c16710483c73af051ddf",name:"chopper/chopper_accept_orders_4.mp3"},{bytes:22436,md5:"df277ba639a502373ba65ddce1c4ef16",name:"chopper/chopper_accept_orders_4.ogg"},{bytes:11952,md5:"495f82ae7e094245f50efd78bb5abba6",name:"chopper/chopper_cant_move.mp3"},{bytes:14835,md5:"cdd0214448a9fb80306f5347620a4166",name:"chopper/chopper_cant_move.ogg"},{bytes:30096,md5:"96402282dc074ff37c26bc8f51220cca",name:"chopper/chopper_stress_out_sfx.mp3"},{bytes:36243,md5:"311e4419635a9f254e7a82016ee51668",name:"chopper/chopper_stress_out_sfx.ogg"},{bytes:8976,md5:"10c2203d9864c7ca842760e7d7196f4e",name:"sfx_asteroid_hit.mp3"},{bytes:12904,md5:"09c314f287150b098a55f97037d14256",name:"sfx_asteroid_hit.ogg"},{bytes:5057,md5:"3f9fd7cd85cd1e46276b37028f1c82d1",name:"sfx_cargo_crate_push.mp3"},{bytes:9273,md5:"5d96b0f3cff04dfa8f0e853c010e19bc",name:"sfx_cargo_crate_push.ogg"},{bytes:8819,md5:"20d962b8600628c7c90afdd9bf2121bd",name:"sfx_cargo_shut.mp3"},{bytes:13870,md5:"69d78f3cf9f6f7799d03cffa1dfbae87",name:"sfx_cargo_shut.ogg"},{bytes:17013,md5:"930b6d68b1356130a06a2d5cc37b6f16",name:"sfx_ghost_hit.mp3"},{bytes:20813,md5:"d39fb763fe4b5d44a898116f8ca98a08",name:"sfx_ghost_hit.ogg"},{bytes:8819,md5:"1f2c34c00d017e17543fa65ca2066ea8",name:"sfx_lander_thruster.mp3"},{bytes:13995,md5:"59b436553616343c63db15ed419c509f",name:"sfx_lander_thruster.ogg"},{bytes:4274,md5:"4f98ce8dfe5105b5f3624d0c77f9b955",name:"sfx_match_rotator_match.mp3"},{bytes:9835,md5:"88e2019ec8eba0e96855e937c2f219b7",name:"sfx_match_rotator_match.ogg"},{bytes:10700,md5:"dcf12e34cf0b3df9ff38f447e418d331",name:"sfx_minigame_tie_explode.mp3"},{bytes:16223,md5:"7d2d954ff04f91acd85fe2da9f9d0703",name:"sfx_minigame_tie_explode.ogg"},{bytes:3647,md5:"5be4abb053017a07c5e4cfbce501796a",name:"sfx_minigame_turret.mp3"},{bytes:8201,md5:"2d8a3575ebc5d78be88770375134dc39",name:"sfx_minigame_turret.ogg"},{bytes:13678,md5:"7983b3d69b3d6856ed7211833458ef7a",name:"sfx_ui_minigame_complete.mp3"},{bytes:18847,md5:"7cd1b6fb9834d49357e9ca779054b6ad",name:"sfx_ui_minigame_complete.ogg"},{bytes:6625,md5:"3445f7c0f77f1f8a7188e809d09937bd",name:"sfx_ui_minigame_open.mp3"},{bytes:12012,md5:"baee05e2fa4a6e68a4fbafd62de5a260",name:"sfx_ui_minigame_open.ogg"},{bytes:2550,md5:"34935bdec4be55e8956effe04337e2fb",name:"sfx_weld/sfx_welding_weld.mp3"},{bytes:8230,md5:"d25387c2bb07dccb27929b19509a8aab",name:"sfx_weld/sfx_welding_weld.ogg"},{bytes:7767,md5:"d5f50e2f432dd19d6ed9b74fdf524db5",name:"starwars_chopper_sfx_alarm.mp3"},{bytes:13472,md5:"4d00f70841f5babab405128748e341fe",name:"starwars_chopper_sfx_alarm.ogg"},{bytes:7767,md5:"35f1b05e8b8afebfc5de631731729785",name:"starwars_chopper_sfx_door1.mp3"},{bytes:12314,md5:"86bbc2e6826c48f9e2cf8f9d5f5ffbd4",name:"starwars_chopper_sfx_door1.ogg"},{bytes:6670,md5:"96735b151282a7f0d149470a3f0228c5",name:"starwars_chopper_sfx_door2.mp3"},{bytes:10932,md5:"1fafa8c698a93884a3170e92a67dd431",name:"starwars_chopper_sfx_door2.ogg"},{bytes:8550,md5:"fa98f79b19fb46b8900a38afb80b71b0",name:"starwars_chopper_sfx_door7.mp3"},{bytes:12844,md5:"c7f7bb6c80c71b4b22f8dc4e18b2db26",name:"starwars_chopper_sfx_door7.ogg"},{bytes:20782,md5:"d0f57720f90fc4c0cf461aaa8f9cbd23",name:"starwars_chopper_sfx_ominouswoob.mp3"},{bytes:22545,md5:"a9db3c0083545b9ccd3277e790c90598",name:"starwars_chopper_sfx_ominouswoob.ogg"},{bytes:11535,md5:"79069d686529a8134707e5b00e95f0d4",name:"starwars_chopper_sfx_ominouswoob2.mp3"},{bytes:14652,md5:"1b12cddc1fc50cc139d7dec4497c17a2",name:"starwars_chopper_sfx_ominouswoob2.ogg"}],initial_music:[{bytes:128043,md5:"7bc4d7d4e725aca6b93c3776f0d5ba8e",name:"music_menu.mp3"},{bytes:120831,md5:"801e0385577cad5d4608b24bc18b5b37",name:"music_menu.ogg"}],gameplay_vo:[{bytes:16657,md5:"e590fb517ce0c6b6486f8d43a2249138",name:"Ezra/Ezra_Abort.mp3"},{bytes:18236,md5:"1714359d8cf1b4bf48b12d725c44748b",name:"Ezra/Ezra_Abort.ogg"},{bytes:10543,md5:"cc6b55d32bc4cf7235ecd8d810d59c88",name:"Ezra/Ezra_Bad1.mp3"},{bytes:13204,md5:"a1fa457b46058eebb2f2dc09cf90bacd",name:"Ezra/Ezra_Bad1.ogg"},{bytes:12581,md5:"2242eabfe0ad8d8011f12a8864369e8a",name:"Ezra/Ezra_Bad2.mp3"},{bytes:13735,md5:"954796e4a30ccc4782c5b1c567843754",name:"Ezra/Ezra_Bad2.ogg"},{bytes:10702,md5:"c48b73a7d5e12ebc820118b0227afb6e",name:"Ezra/Ezra_Damage.mp3"},{bytes:13036,md5:"54fe189ab8a1e8cc5f6b47f920f9cda3",name:"Ezra/Ezra_Damage.ogg"},{bytes:15251,md5:"67a2aa0968c5566ad4fbf32ccfc51ab1",name:"Ezra/Ezra_Fail_Ghost.mp3"},{bytes:16941,md5:"bdd1649b7c7a45371957ec2178fd2a3c",name:"Ezra/Ezra_Fail_Ghost.ogg"},{bytes:15881,md5:"f117f363d475c4b37fb3fccd111640d4",name:"Ezra/Ezra_Fail_Imperial.mp3"},{bytes:16725,md5:"a7d00a6122d205098e17b219e57e5425",name:"Ezra/Ezra_Fail_Imperial.ogg"},{bytes:14001,md5:"59ac3efa47061d70f5d04c98d75472a0",name:"Ezra/Ezra_Fail_Stealth1.mp3"},{bytes:16809,md5:"3cbac2c9c2b5bdc8f6648b3ecbc84ae2",name:"Ezra/Ezra_Fail_Stealth1.ogg"},{bytes:7575,md5:"7d7b3c8ce9ea6bc0ff80d08c38b23279",name:"Ezra/Ezra_Fail_Stealth2.mp3"},{bytes:7819,md5:"c51adc30302319b87a9c7ddd26f667b3",name:"Ezra/Ezra_Fail_Stealth2.ogg"},{bytes:7571,md5:"61a27cab4aa0865b395fd1551305ba34",name:"Ezra/Ezra_Freakout_1.mp3"},{bytes:9298,md5:"f5b29b25e7e1d2c86ff16a634f842652",name:"Ezra/Ezra_Freakout_1.ogg"},{bytes:9295,md5:"60a51762c7e7632a96ae180c3ef13666",name:"Ezra/Ezra_Freakout_2.mp3"},{bytes:11207,md5:"db046677a3e8bd036536e9a62610ca22",name:"Ezra/Ezra_Freakout_2.ogg"},{bytes:9303,md5:"7a33e6ea441b766c3dd8abb44c67221c",name:"Ezra/Ezra_Minigame_Complete1.mp3"},{bytes:12280,md5:"ceb23a7bf3b179b4651f60d683439789",name:"Ezra/Ezra_Minigame_Complete1.ogg"},{bytes:10400,md5:"44fa406cf1c98360131f9214e8321715",name:"Ezra/Ezra_Minigame_Complete2.mp3"},{bytes:12915,md5:"eca182a9b63ce049c82fec15115cb8af",name:"Ezra/Ezra_Minigame_Complete2.ogg"},{bytes:4745,md5:"95c6b32dcc504e523490ab43d390863c",name:"Ezra/Ezra_NPC_1.mp3"},{bytes:7820,md5:"b92166d012b60f0428c6faa35c5bf38f",name:"Ezra/Ezra_NPC_1.ogg"},{bytes:7566,md5:"fbd8ad2bc8853fec971e66de23f2d6d0",name:"Ezra/Ezra_NPC_2.mp3"},{bytes:10277,md5:"78b4de8886e38f34641beee8798a2dcb",name:"Ezra/Ezra_NPC_2.ogg"},{bytes:3961,md5:"3d8c690e28c0c84afdcc94c72c812fce",name:"Ezra/Ezra_NPC_3.mp3"},{bytes:6053,md5:"cbde8b86c41bdc9a8b1dd753920688ba",name:"Ezra/Ezra_NPC_3.ogg"},{bytes:14786,md5:"005a4cb68723b16c2b5238ff2e9f5193",name:"Ezra/Ezra_RedAlert_GHOST1.mp3"},{bytes:17067,md5:"e5079198b6459e3b9c65e63d9e13c2fd",name:"Ezra/Ezra_RedAlert_GHOST1.ogg"},{bytes:9770,md5:"27a427746ef712bcb325eed913a94a7a",name:"Ezra/Ezra_RedAlert_GHOST2.mp3"},{bytes:11424,md5:"daddd13cee993e8063c7b25320845c54",name:"Ezra/Ezra_RedAlert_GHOST2.ogg"},{bytes:12595,md5:"8e6e7c88969ecea8bbdd856afb139cea",name:"Ezra/Ezra_RedAlert_IMPERIAL1.mp3"},{bytes:14956,md5:"c93daa0acbc29969037b458a9d18e624",name:"Ezra/Ezra_RedAlert_IMPERIAL1.ogg"},{bytes:14789,md5:"aef2c2a9c5c1cf53cd086716fe93444e",name:"Ezra/Ezra_RedAlert_IMPERIAL2.mp3"},{bytes:15640,md5:"5d678292b26cb9f183f7f533391fc3cf",name:"Ezra/Ezra_RedAlert_IMPERIAL2.ogg"},{bytes:9917,md5:"59bc468c3590fec8119695935acac46d",name:"Ezra/Ezra_Win_1.mp3"},{bytes:11738,md5:"47ab59797078b67d6910de310fce4164",name:"Ezra/Ezra_Win_1.ogg"},{bytes:9133,md5:"95c49c6c3ae6fa7adbcf697fb1ddec55",name:"Ezra/Ezra_Win_2.mp3"},{bytes:11583,md5:"b6645666b5f4cb2fe7053c97d6a505d5",name:"Ezra/Ezra_Win_2.ogg"},{bytes:19795,md5:"505d16c816f7d355068685a2342720dc",name:"Ezra/Ezra_Win_GHOST.mp3"},{bytes:22064,md5:"3bd9899d25c3eca7684f4bb8ff40effd",name:"Ezra/Ezra_Win_GHOST.ogg"},{bytes:18701,md5:"9633548cd39c9098a38e6bfee699c810",name:"Ezra/Ezra_Win_IMPERIAL.mp3"},{bytes:19683,md5:"082fb74686f2973e44f4987e8a7c380d",name:"Ezra/Ezra_Win_IMPERIAL.ogg"},{bytes:10417,md5:"5e8f5916441deb332e76bcd6564450d0",name:"Hera/Hera_Alert_GHOST.mp3"},{bytes:12251,md5:"1a39b6466d9aed4b565ae983a03fd3b0",name:"Hera/Hera_Alert_GHOST.ogg"},{bytes:13148,md5:"945c487758f4fa34a7d8298ec9cf201f",name:"Hera/Hera_Damage.mp3"},{bytes:15325,md5:"73758dcb5cd46a6e1c11d4f1c3435803",name:"Hera/Hera_Damage.ogg"},{bytes:9127,md5:"4103c16188b009170238e36d69c16c46",name:"Hera/Hera_Minigame_Complete.mp3"},{bytes:11408,md5:"7e92f4feee21743010ca87591e44f547",name:"Hera/Hera_Minigame_Complete.ogg"},{bytes:11005,md5:"cde22b002f3127484d01975e57043988",name:"Hera/Hera_Minigame_PILOT_Complete.mp3"},{bytes:13034,md5:"cc3b973e31f07ecb144b39e773332c17",name:"Hera/Hera_Minigame_PILOT_Complete.ogg"},{bytes:4902,md5:"1528dc376ed6983190c96732cd3d578c",name:"Hera/Hera_NPC_1.mp3"},{bytes:7976,md5:"7100bd8c197e6078c77204199578bd21",name:"Hera/Hera_NPC_1.ogg"},{bytes:4745,md5:"45f787c7de3ae4ea294a91f7d34e7de9",name:"Hera/Hera_NPC_2.mp3"},{bytes:7406,md5:"5e54858a5c110f3583c75e08a34a9852",name:"Hera/Hera_NPC_2.ogg"},{bytes:18628,md5:"8d3a4f7ad434a51aef258e2c89876148",name:"Hera/Hera_RedAlert_GHOST.mp3"},{bytes:19671,md5:"1236ee957366506616902eeea732864b",name:"Hera/Hera_RedAlert_GHOST.ogg"},{bytes:10233,md5:"cd9c84464be5ec94e25c5ca36363c308",name:"Kanan/Kanan_Alert1.mp3"},{bytes:11650,md5:"8ef129e11e6e8b0884f376b7ed772c21",name:"Kanan/Kanan_Alert1.ogg"},{bytes:6471,md5:"d4ccb18af6e1901f76e8f8c9a82f71b7",name:"Kanan/Kanan_Alert2.mp3"},{bytes:9050,md5:"ea1b743e676e46b912ba8f21c7086039",name:"Kanan/Kanan_Alert2.ogg"},{bytes:8519,md5:"8d9e7c04a2a642195736743ac84334c0",name:"Kanan/Kanan_Minigame_Complete.mp3"},{bytes:11058,md5:"ed3eaa05db5406ff6db500df2aa1a696",name:"Kanan/Kanan_Minigame_Complete.ogg"},{bytes:6511,md5:"79f0ba19b624843c37c481b77cf17fdf",name:"Kanan/Kanan_Minigame_Complete2.mp3"},{bytes:9833,md5:"687d33dd38eae70101d01f6636f777fb",name:"Kanan/Kanan_Minigame_Complete2.ogg"},{bytes:4622,md5:"1c3313b5076e6ad2ea91a9aa87982db5",name:"Kanan/Kanan_Negative_1.mp3"},{bytes:7320,md5:"7507ddd4066ce50744cac057338a4de4",name:"Kanan/Kanan_Negative_1.ogg"},{bytes:3368,md5:"836e387bb8559f813bafd5e697300b89",name:"Kanan/Kanan_Negative_2.mp3"},{bytes:6402,md5:"79d14614697755635a6db7c923515f7a",name:"Kanan/Kanan_Negative_2.ogg"},{bytes:5060,md5:"874f572191cc4a0e3dcc78079c7b658f",name:"Kanan/Kanan_NPC_1.mp3"},{bytes:7494,md5:"4952728f00d9f9080cae82f5bdd6c47f",name:"Kanan/Kanan_NPC_1.ogg"},{bytes:5687,md5:"f482a767f39db4f9f580855d80c3374c",name:"Kanan/Kanan_NPC_2.mp3"},{bytes:7230,md5:"02540edb02c12be87458a4bdf70b6a31",name:"Kanan/Kanan_NPC_2.ogg"},{bytes:10707,md5:"5f7bf24820dc02997a619aadec8860f1",name:"Sabine/Sabine_Alert_GHOST.mp3"},{bytes:12688,md5:"a6c696c99875143055ab8e0ed9979b40",name:"Sabine/Sabine_Alert_GHOST.ogg"},{bytes:8838,md5:"de334f253e4fd7a48afa021a26fcacd2",name:"Sabine/Sabine_Alert_IMPERIAL.mp3"},{bytes:11360,md5:"f17cd95f661acbc27137396c51c50745",name:"Sabine/Sabine_Alert_IMPERIAL.ogg"},{bytes:14754,md5:"50ecb043c844b0c6a50052b63f799e55",name:"Sabine/Sabine_Minigame_IMPERIAL_Complete.mp3"},{bytes:17911,md5:"1aad5f8ff09fb08315df65e4472b0f4c",name:"Sabine/Sabine_Minigame_IMPERIAL_Complete.ogg"},{bytes:8972,md5:"e3f2cfd612a225fcd14f18ee477ff7a6",name:"Sabine/Sabine_Negative.mp3"},{bytes:10928,md5:"f10fdc732fb193a4699a4c7340ee5109",name:"Sabine/Sabine_Negative.ogg"},{bytes:6628,md5:"de4e4623ab52d51005c23796a4f537df",name:"Sabine/Sabine_NPC_1.mp3"},{bytes:8685,md5:"cde761f10d97df14ad3fb9d82a6e0aa2",name:"Sabine/Sabine_NPC_1.ogg"},{bytes:8038,md5:"a9769580fff9f63ae26e39ca0f8b6bea",name:"Sabine/Sabine_NPC_2.mp3"},{bytes:9962,md5:"a0301355c048a6694262c38bf57ac63d",name:"Sabine/Sabine_NPC_2.ogg"},{bytes:10704,md5:"e133846b9fa6443c133d8a92bace0fc2",name:"Zeb/Zeb_Alert_GHOST.mp3"},{bytes:12413,md5:"6fa139c59b6d977aaa4ff49fe8cd588d",name:"Zeb/Zeb_Alert_GHOST.ogg"},{bytes:15747,md5:"c28dba3c61b5bba2ee88be949fe33b59",name:"Zeb/Zeb_Alert_IMPERIAL.mp3"},{bytes:16966,md5:"2addfa667ce0c1fedfd8af5d7b887bfc",name:"Zeb/Zeb_Alert_IMPERIAL.ogg"},{bytes:15316,md5:"b6e80b25e1ce075d9ba8ee880b4e30f5",name:"Zeb/Zeb_IMPERIAL_Danger.mp3"},{bytes:17212,md5:"b97ff1aeb76ecfd57928c70526c6e9b7",name:"Zeb/Zeb_IMPERIAL_Danger.ogg"},{bytes:13590,md5:"ef0237a9469971aa56d83c1d91a8e9d7",name:"Zeb/Zeb_Minigame_Complete.mp3"},{bytes:15598,md5:"9809ccc2c3d99bc0a1905f693a413c40",name:"Zeb/Zeb_Minigame_Complete.ogg"},{bytes:12013,md5:"7040f9fa7f893f58e0d1da722d14b6f2",name:"Zeb/Zeb_Minigame_TURRET_Complete.mp3"},{bytes:14374,md5:"3305d34e5e82b941ca3daac7de316d21",name:"Zeb/Zeb_Minigame_TURRET_Complete.ogg"},{bytes:11483,md5:"2acec5a99442d33d55ef979c34703e88",name:"Zeb/Zeb_NPC_1.mp3"},{bytes:13221,md5:"c6b1ede239cd45f63b28711952b84cf9",name:"Zeb/Zeb_NPC_1.ogg"},{bytes:4901,md5:"93002e2c63f27c4e703749e4d946073e",name:"Zeb/Zeb_NPC_2.mp3"},{bytes:7371,md5:"60d74bece3d48f1a15b9c2cc48e5d9c1",name:"Zeb/Zeb_NPC_2.ogg"}],gameplay_sd:[],gameplay_hd:[],minigame_match_rotator:[{bytes:20799,md5:"e131eb6c4ece9016dfdbe522d05802ba",name:"match_background.jpg"},{bytes:11329,md5:"a10dc0d7aec00807cfd0f01e7fc11164",name:"sfx_rotator/sfx_match_rotator_complete.mp3"},{bytes:14187,md5:"8216d4fbf7e8ec725e8bb889b69ffcb7",name:"sfx_rotator/sfx_match_rotator_complete.ogg"},{bytes:8195,md5:"38d2ed956bc00622f211cb271f40d874",name:"sfx_rotator/sfx_match_rotator_spin.mp3"},{bytes:11318,md5:"41cf4274809fddee440f04e5753f6dde",name:"sfx_rotator/sfx_match_rotator_spin.ogg"},{bytes:7477,md5:"573f6bbebf1ed7be8d57d80a9644fb63",name:"sheets/sprites_jammin.plist"},{bytes:68656,md5:"3b5c623217c6826852591cdc189bd409",name:"sheets/sprites_jammin.png"}],gameplay_music:[{bytes:168193,md5:"f1ac92fccb49f3426237a8b8f67e473c",name:"music_attack.mp3"},{bytes:189134,md5:"9cf0c61bc23e2b6b7e0a31b9fd634bac",name:"music_attack.ogg"},{bytes:122817,md5:"dd840377fbe9d2e35fca5c6d8c512cc1",name:"music_exciting.mp3"},{bytes:158984,md5:"952e5c28bfb4cf02750d22cd09d34deb",name:"music_exciting.ogg"},{bytes:46409,md5:"81d8347259e31b0ae6f2a60496a33d79",name:"music_imperial.mp3"},{bytes:54791,md5:"7cdec11549a9b09e0aa2b8be0c1f629e",name:"music_imperial.ogg"},{bytes:79402,md5:"f25cc011712fc4f12895d637b3b89cd3",name:"music_imperial_escape.mp3"},{bytes:80750,md5:"a50ee6419f5428e9b24408cd6e7b609c",name:"music_imperial_escape.ogg"},{bytes:120368,md5:"d6bff64e6dc2acdde8535f761124c543",name:"music_mystery.mp3"},{bytes:117625,md5:"07c327d8ef2830de70d7c62f3b1952ec",name:"music_mystery.ogg"},{bytes:137232,md5:"5bc8f44edb22c1079b7bfab862f04203",name:"music_tense.mp3"},{bytes:144414,md5:"9b1b95b6ee8e34b2b965d2ffae5483c3",name:"music_tense.ogg"},{bytes:110178,md5:"4b47796a1d775561b402694d9eac159a",name:"music_wheee.mp3"},{bytes:120591,md5:"78b447845bb454e64b0a6bcc948db2ec",name:"music_wheee.ogg"},{bytes:29698,md5:"e91c734548cce46205fcc4de20aa15e4",name:"stings/sting_horrible.mp3"},{bytes:28873,md5:"845d4d2658f62d7a3d97c6304ff1481b",name:"stings/sting_horrible.ogg"},{bytes:33151,md5:"0c05455924ee756bb3a3889b2a111287",name:"stings/sting_iamyourfather.mp3"},{bytes:27190,md5:"defc1372971c81037d4d76702ff4626f",name:"stings/sting_iamyourfather.ogg"},{bytes:32218,md5:"47daa653362e2e3787cd237e8ffb9bac",name:"stings/sting_level_complete_scary.mp3"},{bytes:28250,md5:"9e308987394543636078e4744ef48bc0",name:"stings/sting_level_complete_scary.ogg"},{bytes:23914,md5:"de5ea94444aad19df20cbc23cd8934dc",name:"stings/sting_level_complete_something.mp3"},{bytes:23434,md5:"c53ca3c8e4c1914848042aa087cae511",name:"stings/sting_level_complete_something.ogg"},{bytes:31908,md5:"2536bebec0ed17cc436810e67804aec3",name:"stings/sting_level_complete_surprise.mp3"},{bytes:26601,md5:"2869449122e3d913350918b69d366cdd",name:"stings/sting_level_complete_surprise.ogg"},{bytes:47891,md5:"1b6eb3a6cec4056d47e2eb7c5c84794a",name:"stings/sting_level_complete_tense.mp3"},{bytes:43571,md5:"ae74ad893feea515305d31f1981dd137",name:"stings/sting_level_complete_tense.ogg"},{bytes:35820,md5:"6e2c8ed38fed9ceb16efd9659609cff5",name:"stings/sting_level_complete_win.mp3"},{bytes:31760,md5:"70edfa2898d1688977123728cd3b3ff5",name:"stings/sting_level_complete_win.ogg"},{bytes:53523,md5:"5066535a723e24a0c3eb66796a9801f6",name:"stings/sting_lose_ghost.mp3"},{bytes:40447,md5:"1ffe6d60d1820b9c40b8582f4460e8c2",name:"stings/sting_lose_ghost.ogg"},{bytes:50078,md5:"95161a48e75014ce51834c03409ad88b",name:"stings/sting_lose_imperial.mp3"},{bytes:41997,md5:"63f66b8a73f67940d520f2dac2092914",name:"stings/sting_lose_imperial.ogg"},{bytes:46937,md5:"8e27ebc68f29f476ccf388737d49ea84",name:"stings/sting_mystery.mp3"},{bytes:35232,md5:"3ac8ec478186d4c1a8b052e8c1b94288",name:"stings/sting_mystery.ogg"},{bytes:143333,md5:"7aa24755673d45ba728428297eb0f76f",name:"stings/sting_win_mission.mp3"},{bytes:109362,md5:"e735b6f5c4779d2d576e587a001c9275",name:"stings/sting_win_mission.ogg"}],minigame_lander:[{bytes:18186,md5:"8c996639b6563547c994f6740cbd0bca",name:"sheets/sprites_lunarlander.plist"},{bytes:153736,md5:"c1520ba27cf0e9bfb044e9f6696317ae",name:"sheets/sprites_lunarlander.png"},{bytes:15315,md5:"498d83baa6c30be9074acd66b29f97c4",name:"SWR_Mini_Lander_BG.jpg"},{bytes:31424,md5:"0f6e369bef92a8e8b554579e222c6703",name:"SWR_Mini_Lander_BG_Imperial.jpg"},{bytes:37077,md5:"bc8e396d64a757a9d4feed16f8c82e18",name:"SWR_Mini_Lander_BG_stars.jpg"}],minigame_plug_it_in:[{bytes:4639,md5:"0ab77394c213f0fca84d3417114f7f15",name:"sheets/sprites_cable_cablesparks.plist"},{bytes:140824,md5:"6640ac0f986399ae1c0cca216599e851",name:"sheets/sprites_cable_cablesparks.png"},{bytes:15480,md5:"187cb09563c7cc29ab13e89af055ea1f",name:"sheets/sprites_cable_prongsplugs.plist"},{bytes:302753,md5:"7a5a73863babf3533f23e5c374977f5d",name:"sheets/sprites_cable_prongsplugs.png"},{bytes:18027,md5:"8e329ad24b01f5b9b7b5726e858e9888",name:"wire-connect-bg.jpg"}],gameplay_universal:[{bytes:171,md5:"d3617dfcaa4cfc72fd5ad8b4c885723f",name:"debug/invisibleImage.png"},{bytes:263,md5:"01fe85070bee10bfea66306378ca2616",name:"debug/Tile.png"},{bytes:25556,md5:"28a9d3895fcc5942a330dd5e07f36be2",name:"explosion/swr_fire_explosion0001.png"},{bytes:31386,md5:"867090354c27703a53a334f921809ffd",name:"explosion/swr_fire_explosion0002.png"},{bytes:49845,md5:"bc65ff91c51942b495d5c8d3ff88aa2d",name:"explosion/swr_fire_explosion0003.png"},{bytes:36095,md5:"0f0991fd23c2aefef221c42e35fa77bd",name:"explosion/swr_fire_explosion0004.png"},{bytes:10325,md5:"c64dfb77e228b2870c696d16869f5ee2",name:"explosion/swr_fire_explosion0005.png"},{bytes:17823,md5:"7cf6218344b67ce9bd075009b3ab1f93",name:"spritesheets/chopper/sprites_chopper.plist"},{bytes:207563,md5:"1a2e2c2aaf6a5871afe347b9cf37c35b",name:"spritesheets/chopper/sprites_chopper.png"},{bytes:5309,md5:"66e6f67b625cae6467d07160fde0be40",name:"ui/gameplay_hud/btn_pause.png"},{bytes:37420,md5:"a4c88f4bf72cb4cfb9d356c7a06aa465",name:"ui/gameplay_hud/dialogue_box.png"},{bytes:14184,md5:"9faff5d44772a143ff4cc59c1f644d1c",name:"ui/portraits/SWRCC_Ezra.jpg"},{bytes:15460,md5:"a20e019f74e04d964c962f5a28d73984",name:"ui/portraits/SWRCC_Hera.jpg"},{bytes:12592,md5:"8df5fce952944d26ca0df2f23c48c43c",name:"ui/portraits/SWRCC_Kanan.jpg"},{bytes:15236,md5:"4122ca3c18002b3e3a1cdcd0852c07d0",name:"ui/portraits/SWRCC_Sabine.jpg"},{bytes:13907,md5:"c59373fa3ab3d7ea8ba715c59a8bf059",name:"ui/portraits/SWRCC_Zeb.jpg"}],initial_universal:[{bytes:60844,md5:"f980e7fc8a7f80111a158533d6730c56",name:"ui/general/bg_frame_half.jpg"},{bytes:5443,md5:"17657b012175ab8f4920b9dfeaeb086e",name:"ui/general/black_overlay.jpg"},{bytes:7388,md5:"b852603af555093a0b696dad44971b59",name:"ui/general/sprites_core_ui.plist"},{bytes:374223,md5:"feea36ba1d73192f376608a81ff15117",name:"ui/general/sprites_core_ui.png"},{bytes:1786,md5:"21749b13e8a97b72b97a4a9a28e1f2bc",name:"ui/general/sprites_ui_large.plist"},{bytes:352978,md5:"4badd5e9b70be94a5582796a39b03256",name:"ui/general/sprites_ui_large.png"},{bytes:7899,md5:"8fd379220de7f12197e24d10074f7db5",name:"ui/shop/sprites_shoppe.plist"},{bytes:157103,md5:"4f39301283984bb3d091fc52eba9dceb",name:"ui/shop/sprites_shoppe.png"}],gameplay_loc_imperial:[{bytes:4221,md5:"9f383d959324fcd742fcd39fc36f374d",name:"Chars/sprites_imperial.plist"},{bytes:96693,md5:"27e4e87cf98aa6041ea1716e209b313b",name:"Chars/sprites_imperial.png"},{bytes:10846,md5:"b75234db66a126aa354fe8bf55eb4b04",name:"Locs/Effect-DARKNESS.jpg"},{bytes:111853,md5:"6df87b16f608f99aec890359fe41c926",name:"Locs/Hallway2_BOTTOM.jpg"},{bytes:88417,md5:"235f80b43c6d46b648706105acd803de",name:"Locs/Hallway_BOTTOM.jpg"},{bytes:37975,md5:"84807a701685c7c540c0d596873dadbc",name:"Locs/Hallway_TOP.png"},{bytes:97282,md5:"46a1c629c62b069453ede229df326834",name:"Locs/Hangar_BOTTOM.jpg"},{bytes:150847,md5:"fe4992e869d0f54018444708e14f5f3d",name:"Locs/Imperial_Detention_BOTTOM1.jpg"},{bytes:45225,md5:"2722338de0fce5a80edfff2f4c2717d5",name:"Locs/Imperial_Detention_TOP1.png"},{bytes:110757,md5:"198135a66acfbbc140e4aca6b0cbc641",name:"Locs/Imperial_TrashCompactor_BOTTOM.jpg"},{bytes:90795,md5:"e93af1b35b58927884076f02bbd1d7ec",name:"Locs/Security_BOTTOM.jpg"},{bytes:34245,md5:"709d69d5b7aedb4f4f024f3fe6324f06",name:"Locs/Security_TOP.png"},{bytes:97348,md5:"03378f9859dec52aaf418997059cd7c1",name:"Locs/Storage_BOTTOM.jpg"},{bytes:48389,md5:"1919d1297034f2206a62c007324b189d",name:"Locs/Storage_TOP.jpg"}],air:[{bytes:4912,md5:"dc1b6528f2e9312e068aad2f53366b7e",name:"Default-568h@2x.png"},{bytes:4588,md5:"6617a9132c7566551711a15f42584d38",name:"Default.png"},{bytes:34016,md5:"0c8d573ff622474a53b7e4c76b75cda7",name:"icons/icon128.png"},{bytes:3411,md5:"9160a9857f1d99d4d1a5722de41941ba",name:"icons/icon16.png"},{bytes:6111,md5:"db4c0e02b46c24bfabbcf33c6807fbb8",name:"icons/icon32.png"},{bytes:9187,md5:"e310873f7870789ec2ddffb01e3b9c23",name:"icons/icon48.png"}],minigame_crew:[{bytes:11173,md5:"04917c805a335dda68fab9f636e0f241",name:"sheets/sprites_crewprotect.plist"},{bytes:29611,md5:"1c7416c1083d4163449f7d2a6dc6e33d",name:"sheets/sprites_crewprotect.png"}],minigame_fire_extinguisher:[{bytes:1700,md5:"8b91d2e172e1521c7d67de28a280f527",name:"fire_extinguisher_bg.png"},{bytes:14480,md5:"e5c275c74448d7d645877bb455a76731",name:"sheets/sprites_fire.plist"},{bytes:187898,md5:"81c0b1a2b1b04231b9110f9677d7fc6d",name:"sheets/sprites_fire.png"}],bootstrap:[{bytes:2114,md5:"ba9e6829ba32e427142251a85cbd4fbb",name:"audio/silent.mp3"},{bytes:5514,md5:"3526550092a0e091f382852de5ef2315",name:"audio/silent.ogg"},{bytes:12343,md5:"b85d60768159a43ba46475fc342b7d14",name:"config/config.xml"},{bytes:112006,md5:"05548c14a33498a04356dc1e6b861ca1",name:"config/missions.xml"},{bytes:23675,md5:"5c241140b2e3a74cb8ac5a2cb8f6d5b3",name:"config/translation_en.xml"},{bytes:2315,md5:"1ad7c59bed146be706981f145a69d99b",name:"ui/close_test.jpg"},{bytes:163691,md5:"9e20ecb25ebc89b0923fb6d24b7b114d",name:"ui/splash/splash.jpg"},{bytes:45659,md5:"22dcb3a8c0d08ef804d26e9e163017e8",name:"ui/splash/starfield.jpg"}],minigame_welding:[{bytes:3636,md5:"da01dbbba526da1825740206f92a506b",name:"sheets/sprites_weld.plist"},{bytes:51534,md5:"52940eb4d7e225c86904c7a30f0056fa",name:"sheets/sprites_weld.png"},{bytes:4438,md5:"5e8a295cc1697649cefc60c5d804e55d",name:"texture/texture_pencil1.png"},{bytes:2198,md5:"e0ac4ac7844946f52935f2ad5dec961d",name:"texture/texture_weld5.png"},{bytes:36008,md5:"b3fe0e0c1c9018487800394dbe432c7b",name:"welding_bg.jpg"},{bytes:19220,md5:"17a48582c5173b00d20377ec149d3bbe",name:"welding_bg_panel.jpg"}],initial_vo:[{bytes:10699,md5:"4d1eba33c7a7ff74c1260cf9378068f2",name:"Ezra_Buy.mp3"},{bytes:13153,md5:"d99a0723a7678fde66e6b4a290cea42e",name:"Ezra_Buy.ogg"},{bytes:6946,md5:"17f9b1ed93547377799c9f3cef490b80",name:"Ezra_Difficulty_1.mp3"},{bytes:10164,md5:"3438998a14dfd7d382ab1ddbfc17150d",name:"Ezra_Difficulty_1.ogg"},{bytes:8827,md5:"058765f4576e5ac9d31fab886ab1a723",name:"Ezra_Difficulty_2.mp3"},{bytes:11899,md5:"96f0496a9e96530e0edf8c43291032bb",name:"Ezra_Difficulty_2.ogg"},{bytes:13529,md5:"845245e3b8542a7c69876314691b071b",name:"Ezra_Difficulty_3.mp3"},{bytes:14249,md5:"4b59ccf975adf69d28354b7fe67f733b",name:"Ezra_Difficulty_3.ogg"},{bytes:15096,md5:"a0e94fae8f80180ae7228078ab48391f",name:"Ezra_Difficulty_4.mp3"},{bytes:15810,md5:"5d3d4e55da7f90c47a0dfdff11c61dd3",name:"Ezra_Difficulty_4.ogg"},{bytes:17134,md5:"c9685917fe598dc2cc6b457e2d6d9a86",name:"Ezra_Difficulty_5.mp3"},{bytes:17435,md5:"dac4924dffa78397e8a3696294e32a5b",name:"Ezra_Difficulty_5.ogg"},{bytes:7255,md5:"d74d7ff069b228fcd2b5904bd9107c1c",name:"Ezra_GHOST_1.mp3"},{bytes:10282,md5:"d328872e077140f6878165239deda737",name:"Ezra_GHOST_1.ogg"},{bytes:9762,md5:"3149e9d633135c68b811751609299c56",name:"Ezra_GHOST_2.mp3"},{bytes:13522,md5:"10768fdf6a8c42b68dcddccd8e4209a7",name:"Ezra_GHOST_2.ogg"},{bytes:13840,md5:"3e791eaa6dcfe72d761164019a7937e9",name:"Ezra_IMPERIAL_1.mp3"},{bytes:16396,md5:"495b4de5b1ca31a7462a84fc8aa76d53",name:"Ezra_IMPERIAL_1.ogg"},{bytes:10392,md5:"e43a70337aa7b26c13de05ece1e45311",name:"Ezra_IMPERIAL_2.mp3"},{bytes:12497,md5:"b37e657eed9bc8187e7856921b005771",name:"Ezra_IMPERIAL_2.ogg"},{bytes:13835,md5:"d6fce01ca63c22573ad578887681fc23",name:"Hera_GHOST.mp3"},{bytes:16219,md5:"066b17a52b130ffda4c212064dc7a003",name:"Hera_GHOST.ogg"},{bytes:9136,md5:"77b05d9790413fa093801084a7f7e387",name:"Hera_IMPERIAL.mp3"},{bytes:11914,md5:"a4bf69576da14750b9bf8fccd4c314e0",name:"Hera_IMPERIAL.ogg"},{bytes:11330,md5:"f751cda26269158b70c18185212903eb",name:"Kanan_GHOST.mp3"},{bytes:13949,md5:"e9f1bceba0bd646b52b5d94893e91d7c",name:"Kanan_GHOST.ogg"},{bytes:11019,md5:"b1284a17cdc4629f631699544ae1864b",name:"Kanan_IMPERIAL.mp3"},{bytes:13833,md5:"21ddef27617852bad92d23e34b70a37d",name:"Kanan_IMPERIAL.ogg"},{bytes:9135,md5:"31f518b67d2c0d9e38d94e678da4a351",name:"Sabine_GHOST.mp3"},{bytes:11594,md5:"15076f9894dd189ae564274eddc5cb3f",name:"Sabine_GHOST.ogg"},{bytes:7102,md5:"7e13ba4d3e61fa065e6aa9fff44a0d73",name:"Sabine_IMPERIAL.mp3"},{bytes:9947,md5:"469b09d11fd6da2e021ef5c419a6ce57",name:"Sabine_IMPERIAL.ogg"},{bytes:8976,md5:"b3da1bb39d9879370f52e2054cbd4337",name:"Zeb_GHOST.mp3"},{bytes:10800,md5:"04456ffece0175adccd3024c24396973",name:"Zeb_GHOST.ogg"},{bytes:13054,md5:"c9b3d808ac430fa3f850aaa3ba19e3b8",name:"Zeb_IMPERIAL.mp3"},{bytes:15451,md5:"c053597e8f9b6d1745d47f9f38cf329a",name:"Zeb_IMPERIAL.ogg"}],initial_sd:[],initial_hd:[],fonts_ru:[{bytes:25140,md5:"625ae7ce9decc6d7912f8dd3e390db53",name:"Basic.fnt"},{bytes:119520,md5:"3a3190c8e4567178a2e72861710fd8a4",name:"Basic.png"}],fonts_la:[{bytes:25140,md5:"625ae7ce9decc6d7912f8dd3e390db53",name:"Basic.fnt"},{bytes:119520,md5:"3a3190c8e4567178a2e72861710fd8a4",name:"Basic.png"}],fonts_kr:[{bytes:25140,md5:"625ae7ce9decc6d7912f8dd3e390db53",name:"Basic.fnt"},{bytes:119520,md5:"3a3190c8e4567178a2e72861710fd8a4",name:"Basic.png"}],fonts_jp:[{bytes:25140,md5:"625ae7ce9decc6d7912f8dd3e390db53",name:"Basic.fnt"},{bytes:119520,md5:"3a3190c8e4567178a2e72861710fd8a4",name:"Basic.png"}],fonts_en:[{bytes:25140,md5:"625ae7ce9decc6d7912f8dd3e390db53",name:"Basic.fnt"},{bytes:119520,md5:"3a3190c8e4567178a2e72861710fd8a4",name:"Basic.png"},{bytes:12036,md5:"f842d8edf337eb85203efe246406033e",name:"SWRCC_MenuFonts.fnt"},{bytes:115212,md5:"39fce266261d2f09577df8e8598acecf",name:"SWRCC_MenuFonts.png"}],fonts_cn:[{bytes:25140,md5:"625ae7ce9decc6d7912f8dd3e390db53",name:"Basic.fnt"},{bytes:119520,md5:"3a3190c8e4567178a2e72861710fd8a4",name:"Basic.png"}],minigame_universal:[{bytes:7768,md5:"a8ca758c1464de41c73477e16b573974",name:"minigame_underlay.jpg"},{bytes:3682,md5:"12acc0042f2cb535ac300ba62ecd734b",name:"sheets/sprites_minigameHUD.plist"},{bytes:71516,md5:"b70826199d17692055e424f156f2876e",name:"sheets/sprites_minigameHUD.png"}],gameplay_loc_ghost:[{bytes:9717,md5:"1080eb8b0b88b914fd5582c6fb9c2410",name:"Chars/sprites_npcs.plist"},{bytes:384732,md5:"5ad0e99e2012a175d47eebb3196dc0b2",name:"Chars/sprites_npcs.png"},{bytes:78529,md5:"62d8f03f882fe5659002c151aae447e7",name:"Locs/Cargo_Bottom.jpg"},{bytes:26970,md5:"cbda9ebd79bef6b6e7736011bed0da49",name:"Locs/Cargo_Top.png"},{bytes:92542,md5:"0a5c096da7905c6e84233f4f818d29c2",name:"Locs/Cockpit_Bottom.jpg"},{bytes:9620,md5:"5d29fab12f0ea1603d25b073f13cb393",name:"Locs/Cockpit_Top.png"},{bytes:117187,md5:"9507b9931dcc75adf3ce3e95ce94c926",name:"Locs/Engine_Bottom.jpg"},{bytes:11830,md5:"1950b9369e9063fca33dc78c7272301c",name:"Locs/Engine_Top.png"},{bytes:104910,md5:"14e5b8922547d064018751f68aed5e0a",name:"Locs/Hallway_Bottom.jpg"},{bytes:21910,md5:"857c6ca45826b8caa0300bdd273360af",name:"Locs/Hallway_Top.png"},{bytes:110773,md5:"18f886975d5d15474dfb9504e1098a46",name:"Locs/Observatory_Bottom.jpg"},{bytes:3166,md5:"4bb3523bd917937d49572c163a60fe4d",name:"Locs/Observatory_Top.png"}],initial_soundfx:[{bytes:4430,md5:"89a6e41d1dad34bd1803edf951442568",name:"sfx_ui_back.mp3"},{bytes:8624,md5:"6f3f594978ed7074fcf9972d709bc9ed",name:"sfx_ui_back.ogg"},{bytes:10386,md5:"f33715ac41bee07a9c1740afc9005f39",name:"sfx_ui_build.mp3"},{bytes:15517,md5:"1160fa12306e3cb6eb337b77f9fe6ff7",name:"sfx_ui_build.ogg"},{bytes:9132,md5:"d879fe45ac8a974aafadb0adbf2f87f9",name:"sfx_ui_build2.mp3"},{bytes:13607,md5:"a455a8ddfe7651cf03a1772595a17a30",name:"sfx_ui_build2.ogg"},{bytes:2706,md5:"664df9a35cd8d15c27b88b250ff7dd83",name:"sfx_ui_click.mp3"},{bytes:7580,md5:"6f97e3e952e50be2dc606aa26ebe1f6c",name:"sfx_ui_click.ogg"},{bytes:61485,md5:"e5699d4834d1c16d5bc033f66c23baf0",name:"sfx_ui_load.mp3"},{bytes:46422,md5:"f6b65fa774d2abe98033b3b84b7a0dbb",name:"sfx_ui_load.ogg"},{bytes:1766,md5:"db5eb8183ff057bec79ea5ddeb746577",name:"sfx_ui_mouseover.mp3"},{bytes:5571,md5:"14739ddd12fc0c5c5dfbef2091e972d9",name:"sfx_ui_mouseover.ogg"},{bytes:3960,md5:"c3bf9550fca0bca3ab1f7100d94612ef",name:"sfx_ui_slide.mp3"},{bytes:8211,md5:"214e4e5279b7619c5be0af334025237b",name:"sfx_ui_slide.ogg"}],minigame_turret_fight:[{bytes:22685,md5:"3aefe2b88f780ed748a814154e9327a7",name:"sfx_turret/starwars_chopper_sfx_TIEfly1.mp3"},{bytes:32891,md5:"09bd409144290d34ff452ce14cd3c441",name:"sfx_turret/starwars_chopper_sfx_TIEfly1.ogg"},{bytes:19681,md5:"dbe971b57bdaef885f83617615d5cd58",name:"sfx_turret/starwars_chopper_sfx_TIEfly2.mp3"},{bytes:28778,md5:"441955dc0b8b46589b685fb14c24c847",name:"sfx_turret/starwars_chopper_sfx_TIEfly2.ogg"},{bytes:16546,md5:"470d9e963a388f10e5cd4bbcbb4886a6",name:"sfx_turret/starwars_chopper_sfx_TIEfly3.mp3"},{bytes:25104,md5:"3ba67cff6dfe3d91021223503765eaaa",name:"sfx_turret/starwars_chopper_sfx_TIEfly3.ogg"},{bytes:3655,md5:"2ff858ce6508a6c794aac04ae3bb8523",name:"sheets/sprites_turret.plist"},{bytes:39503,md5:"c4cd52d752e6c678e9b4aa45ec615804",name:"sheets/sprites_turret.png"},{bytes:31210,md5:"9f0d8409f675a3ca310a5a202a445231",name:"turret_background.jpg"}]}]}};S=u.Manifest;ea=(new Z("\\b(Android)\\b","")).match(D.window.navigator.userAgent)?!1:null!=(new XMLHttpRequest).withCredentials;S._supportsCrossOrigin=ea;M.Benchmark._calledStart=!1;M.Benchmark._calledCleanup=!1;r.Font.NEWLINE=new r.Glyph(10);k.BasicKeyboard._sharedEvent=new i.KeyboardEvent;k.BasicMouse._sharedEvent=new i.MouseEvent;k.BasicPointer._sharedEvent=new i.PointerEvent;k.html.CanvasRenderer.CANVAS_TEXTURES=(new Z("(iPhone|iPod|iPad)","")).match(D.window.navigator.userAgent);k.html.HtmlAssetPackLoader._mediaRefCount=0;k.html.HtmlAssetPackLoader._detectBlobSupport=!0;k.html.HtmlUtil.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];k.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER=D.window.top==D.window&&(new Z("Mobile(/.*)? Safari","")).match(D.navigator.userAgent);k.html.WebAudioSound._detectSupport=!0;Y.USE_CACHE=!1;Y.USE_ENUM_INDEX=!1;Y.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";V.DEFAULT_RESOLVER=N;V.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";w.ObjectMap.count=0;F.Parser.escapes=function(){var a=new w.StringMap;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);x.InflateImpl.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];x.InflateImpl.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];x.InflateImpl.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];x.InflateImpl.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];x.InflateImpl.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];Q.main()})();