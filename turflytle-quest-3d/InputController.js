pc.script.create("InputController",function(a){var b=(new pc.Vec3,new pc.Vec3,function(a){this.entity=a,this.x=new pc.Vec3,this.z=new pc.Vec3,this.heading=new pc.Vec3,this.asyncMove=!1,this.turnSpeed=50});return b.prototype={initialize:function(){this.character=this.entity,this.characterScript=this.entity.script.PlayerController,this.pause=!1,this.levelControllerScript=a.root.findByName("Master").script.LevelController,a.touch?(this.actionButton=a.root.findByName("ActionButton"),this.actionButton.enabled=!0,this.actionButton.script.Button.on("onPointerUp",this.onPointerUp,this),this.stickBase=a.root.findByName("Base").script.sprite,this.stick=a.root.findByName("Stick").script.sprite,this.joystick=a.root.findByName("Joystick").script.Joystick,this.joystick.entity.enabled=!0):(a.keyboard.on(pc.EVENT_KEYDOWN,this.onKeyDown,this),a.keyboard.on(pc.EVENT_KEYUP,this.onKeyUp,this))},update:function(b){if(!this.pause){var c=0,d=0;a.touch?this.joystick.cancel()||(this.joystick.right()?c=this.turnSpeed:this.joystick.left()&&(c=-this.turnSpeed),this.joystick.up()?d=this.turnSpeed:this.joystick.down()&&(d=-this.turnSpeed)):(this.leftKey||this.rightKey||this.upKey||this.downKey)&&(this.leftKey?c=-this.turnSpeed:this.rightKey&&(c=this.turnSpeed),this.upKey?d=this.turnSpeed:this.downKey&&(d=-this.turnSpeed)),this.characterScript.move.set(c,d)}},onDisable:function(){},onEnable:function(){},disableInput:function(){pc.Utils.debug("InputController","disableInput","Disable Inputs"),a.touch&&(this.joystick.entity.enabled=!1,this.actionButton.enabled=!1),this.pause=!0},enableInput:function(){pc.Utils.debug("InputController","onEnable","Enable Inputs"),a.touch&&this.joystick&&(this.joystick.entity.enabled=!0,this.actionButton.enabled=!0),this.pause=!1,this.reset()},reset:function(){this.characterScript.setRollDecay(!0),this.characterScript.setPitchDecay(!0),this.leftKey=!1,this.rightKey=!1,this.upKey=!1,this.downKey=!1},onKeyDown:function(a){if(!this.pause)switch(a.key){case pc.KEY_LEFT:case pc.KEY_A:this.leftKey=!0,this.characterScript.setRollDecay(!1);break;case pc.KEY_RIGHT:case pc.KEY_D:this.rightKey=!0,this.characterScript.setRollDecay(!1);break;case pc.KEY_UP:case pc.KEY_W:this.upKey=!0,this.characterScript.setPitchDecay(!1);break;case pc.KEY_DOWN:case pc.KEY_S:this.downKey=!0,this.characterScript.setPitchDecay(!1);break;case pc.KEY_SPACE:this._dash()}},onKeyUp:function(a){if(!this.pause)switch(a.key){case pc.KEY_LEFT:case pc.KEY_A:this.leftKey=!1,this.characterScript.setRollDecay(!0);break;case pc.KEY_RIGHT:case pc.KEY_D:this.rightKey=!1,this.characterScript.setRollDecay(!0);break;case pc.KEY_UP:case pc.KEY_W:this.upKey=!1,this.characterScript.setPitchDecay(!0);break;case pc.KEY_DOWN:case pc.KEY_S:this.downKey=!1,this.characterScript.setPitchDecay(!0)}},onPointerUp:function(){this.pause||this._takeOff()||this._dash()},_takeOff:function(){return"play"===this.levelControllerScript.current&&"idle"===this.characterScript.current?(this.characterScript.jumpEvent(),!0):!1},_dash:function(){this.characterScript.can("dashEvent")&&this.characterScript.canDash()&&this.characterScript.dashEvent()},destroy:function(){a.touch?this.joystick.destroy():(a.keyboard.off(pc.EVENT_KEYDOWN,this.onKeyDown,this),a.keyboard.off(pc.EVENT_KEYUP,this.onKeyUp,this))}},b});