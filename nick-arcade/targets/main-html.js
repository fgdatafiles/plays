/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(Op){function z(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function Pp(a){return a instanceof Array?function(){return Z.iter(a)}:"function"==typeof a.iterator?v(a,a.iterator):a.iterator}function v(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=fq++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var i={},r=function(){return y.__string_rec(this,"")},Ng=function(a,b){this.r=RegExp(a,b.split("u").join(""))};i.EReg=Ng;Ng.__name__=["EReg"];Ng.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new h("EReg::matched");},matchedPos:function(){if(null==this.r.m)throw new h("No string matched");
return{pos:this.r.m.index,len:this.r.m[0].length}},split:function(a){return a.replace(this.r,"#__delim__#").split("#__delim__#")},__class__:Ng};var Z=function(){};i.HxOverrides=Z;Z.__name__=["HxOverrides"];Z.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],
a[1]-1,a[2],b[0],b[1],b[2]);default:throw new h("Invalid date format : "+a);}};Z.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};Z.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};Z.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};Z.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Mk=function(){};i.Lambda=
Mk;Mk.__name__=["Lambda"];Mk.array=function(a){for(var b=[],a=Pp(a)();a.hasNext();){var c=a.next();b.push(c)}return b};Mk.count=function(a,b){var c=0;if(null==b)for(var d=Pp(a)();d.hasNext();)d.next(),++c;else for(d=Pp(a)();d.hasNext();){var e=d.next();b(e)&&++c}return c};var Rj=function(){this.length=0};i.List=Rj;Rj.__name__=["List"];Rj.prototype={add:function(a){a=new Tm(a,null);null==this.h?this.h=a:this.q.next=a;this.q=a;this.length++},iterator:function(){return new Um(this.h)},__class__:Rj};
var Tm=function(a,b){this.item=a;this.next=b};i["_List.ListNode"]=Tm;Tm.__name__=["_List","ListNode"];Tm.prototype={__class__:Tm};var Um=function(a){this.head=a};i["_List.ListIterator"]=Um;Um.__name__=["_List","ListIterator"];Um.prototype={hasNext:function(){return null!=this.head},next:function(){var a=this.head.item;this.head=this.head.next;return a},__class__:Um};var yd={};i["workinman.event._Event1.Event1_Impl_"]=yd;yd.__name__=["workinman","event","_Event1","Event1_Impl_"];yd._new=function(){return new Vm};
var Vm=function(){this._list=[]};i["workinman.event._Event1.Event1Base"]=Vm;Vm.__name__=["workinman","event","_Event1","Event1Base"];Vm.prototype={add:function(a){0<=this._list.indexOf(a)||this._list.push(a)},remove:function(a){for(var b=this._list.length;0<b--;)if(this._list[b]==a){Z.remove(this._list,a);break}},dispatch:function(a){for(var b=0,c=this._list;b<c.length;){var d=c[b];++b;d(a)}},__class__:Vm};var oh=function(){var a=this;this._root=new Nk(v(this,this._onEventUpdate));ma.root.add(this._root);
ma.uncaughtError.connect(v(this,this.errorHandler));w.prime(this._root);w.setDelegateUnlockWebAudio(v(this,this._handleWebAudioUnlock));P.flow.add(v(this,this._addFlowEvent));this._layerWorld=this._root.addChild(new Mb(null));this._layerUI=this._root.addChild(new Mb(null));this._layerSub=this._root.addChild(new Mb(null));this._timeScale=1;this._flagWebAudioUnlocked=!1;this._flagGameplayPaused=!0;this._debugEnabled=this._flagJSEmbedExists=this._flagJSEmbedPauseState=!1;Zb.get_instance().load();Zc.setPlaybackToggle(function(b){b?
a._unpauseGameplay():a._pauseGameplay()});this._calculateScaleFactor();this._flagJSEmbedExists=null!=jsembed&&jsembed.exists();this._ui=new xi(this._layerUI,v(this,this._onInterfaceChange));this._changeActions=[];this._flowstack=[];this._addEventListeners();this._setDefaults();Zc.initServices();this._parseConfigXML();this._registerInput();this._openSplash()};i.Main=oh;oh.__name__=["Main"];oh.main=function(){ma.init();null!=jsembed&&jsembed.exists()?jsembed.isBaseCrossdomain()?H.setCrossdomainBaseUrl(Dh.appendAssetsToUrl(jsembed.baseUrl())):
H.set_baseUrl(Dh.trimUrl(jsembed.baseUrl())):H.set_baseUrl("");Zc.initMain();H.load(oh._onBootstrapLoad,["bootstrap"])};oh._onBootstrapLoad=function(){Zc.onBootstrapFinished();oh._main=new oh};oh.prototype={_calculateScaleFactor:function(){if(!1!=y.__instanceof(ma._platform.getStage(),yi)){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d",null),c=nb.loadExtension("backingStorePixelRatio",b).value;null==c&&(c=1);b=window.navigator.userAgent.toLowerCase();
a/=c;-1!=b.indexOf("ipad")&&(a=1);b=ma._platform.getStage();a!=b.scaleFactor&&(b.scaleFactor=a,nb.setVendorStyle(t.field(b,"_canvas"),"transform-origin","top left"),nb.setVendorStyle(t.field(b,"_canvas"),"transform","scale("+1/b.scaleFactor+")"),b.requestResize(b.get_width(),b.get_height()))}},errorHandler:function(){},_parseConfigXML:function(){for(var a="000000",b=!1,c="en",d=0,e=H.allConfig();d<e.length;){var f=e[d];++d;f.hasNode.resolve("unlockCode")&&(a=f.node.resolve("unlockCode").get_innerData());
f.hasNode.resolve("unlockEnabled")&&(b="true"==f.node.resolve("unlockEnabled").get_innerData());f.hasNode.resolve("achievements")&&f.node.resolve("achievements").att.resolve("enabled");f.hasNode.resolve("localization")&&(c=L.string(f.node.resolve("localization").node.resolve("region").get_innerData()))}m.setString("STRING_UNLOCK_CODE",a);m.setBool("BOOL_ALLOW_UNLOCK",b);Fc.region=c},_eventLoadCompleteGameplay:function(){this._playGameMusic();this._generateWorld()},_eventInitialLoadComplete:function(){this._enableSplash();
this._sub=new Wm(this._layerSub)},_openSplash:function(){var a=window.document.getElementById("loadingOverlay");null!=a&&a.parentNode.removeChild(a);this._ui.changeScreenTo(Ok,!1)},_setDefaults:function(){m.setBool("BOOL_PAUSED",!1);m.setBool("BOOL_GAME_WIN",!1);m.setBool("BOOL_GAME_LOSE",!1);m.setBool("BOOL_LEVEL_WIN",!1);m.setBool("BOOL_LEVEL_LOSE",!1);m.setBool("BOOL_CODE_SCREEN_OPEN",!1);m.setBool("BOOL_CODE_UNLOCK",!1);m.setInt("INT_HEALTH",3);m.setInt("INT_LIVES",3);m.setInt("INT_SCORE",0);
m.setInt("INT_LOADING_SCORE",0);m.setInt("INT_REWARD_LEVEL",0);m.setInt("FLOAT_LOADING_PROGRESS",0);s.set_muteAll(!1)},_registerInput:function(){w.registerInput($.MOVE_LEFT,[k.Left,k.A],[na.MOVE_LEFT]);w.registerInput($.MOVE_RIGHT,[k.Right,k.D],[na.MOVE_RIGHT]);w.registerInput($.MOVE_UP,[k.Up,k.W],[na.UP]);w.registerInput($.MOVE_DOWN,[k.Down,k.S],[na.DOWN]);w.registerInput($.ATTACK,[k.Z],[na.ATTACK]);w.registerInput($.JUMP,[k.Space],[na.JUMP]);w.registerInput($.UI_OK,[k.Space],null,[J.START,J.A]);
w.registerInput($.UI_DENY,[k.Escape],null,[J.B]);w.registerInput($.UI_MENU,[k.Escape],null,[J.START])},_gotoAndPlayGame:function(){Zc.onGameStart();var a=[];a.push("gameplay_universal");a.push("gameplay_audio_required");switch(m.getString("STRING_MINIGAME")){case "ANCHOVY_FLICK":a.push("minigame_anchovy");break;case "BASKETBALL":a.push("minigame_basketball");a.push("minigame_basketball_audio");break;case "DANGER_LASER":a.push("minigame_danger_lasers");a.push("minigame_danger_lasers_audio");break;
case "HOOF_MACHINE":a.push("minigame_hoof_machine");a.push("minigame_hoof_machine_audio");break;case "PACK_MAZE":a.push("minigame_pack_maze");a.push("minigame_pack_maze_audio");break;case "ROCK_EM_SOCK_EM":a.push("minigame_rockem");a.push("minigame_rockem_audio");break;case "SKATE_LANE":a.push("minigame_skate");a.push("minigame_skate_audio");break;case "SKEEBALL":a.push("minigame_skeeball");a.push("minigame_skeeball_audio");break;case "SLIME_EXPLODE":a.push("minigame_slime_blast");break;case "WHACK_A_MOLE":a.push("minigame_loud_laugh"),
a.push("minigame_loud_laugh_audio")}H.load(v(this,this._eventLoadCompleteGameplay),a,1.2)},_onWorldGenerationComplete:function(){ha.start(v(this,this._onWorldGenerationCompleteDelay),0.3);this._ui.closeAllScreens(!1);this._ui.changeScreenTo(Sj,!0);this._screenTransition.closeTransition()},_onWorldGenerationCompleteDelay:function(){this._world.start();this._unpauseGameplay()},_enableSplash:function(){this._playMenuMusic();this._enableInput()},_gotoEndGame:function(a){this._flagWonPreviousGame=a;this._newOnChangeAction(Og,
hd.OPEN_COMPLETE,v(this,this._endGameOpenComplete));this._ui.openScreen(Og);Zc.onGameEnd()},_endGameOpenComplete:function(){},_onGameNew:function(){this._resetFlagsResults()},_resetFlagsResults:function(){m.resetValue("BOOL_GAME_WIN");m.resetValue("BOOL_GAME_LOSE");m.resetValue("BOOL_LEVEL_WIN");m.resetValue("BOOL_LEVEL_LOSE")},_resetGameResults:function(){m.setInt("INT_SCORE",0);m.setInt("INT_REWARD_LEVEL",0)},_generateWorld:function(){null!=this._world&&this._disposeWorld();switch(m.getString("STRING_MINIGAME")){case "ANCHOVY_FLICK":this._world=
new Eh(this._layerWorld);break;case "BASKETBALL":this._world=new Pk(this._layerWorld);break;case "DANGER_LASER":this._world=new Qk(this._layerWorld);break;case "HOOF_MACHINE":this._world=new Fh(this._layerWorld);break;case "PACK_MAZE":this._world=new Rk(this._layerWorld);break;case "ROCK_EM_SOCK_EM":this._world=new Sk(this._layerWorld);break;case "SKATE_LANE":this._world=new Tk(this._layerWorld);break;case "SKEEBALL":this._world=new $h(this._layerWorld);break;case "SLIME_EXPLODE":this._world=new Xi(this._layerWorld);
break;case "WHACK_A_MOLE":this._world=new Gh(this._layerWorld);break;default:this._world=new U(this._layerWorld)}},_onEventUpdate:function(a){a=Math.round(1E3*a)/1E3*this._timeScale;0.06666666666666667<a&&(a=0.06666666666666667);this._flagJSEmbedExists&&jsembed.isPaused()!=this._flagJSEmbedPauseState&&((this._flagJSEmbedPauseState=jsembed.isPaused())?this._pauseGameplay(!1):this._flagGameplayPaused||this._unpauseGameplay());oh.eventUpdate.dispatch(a);Zc.update(a);this._updateCloud(a);null!=this._ui&&
this._ui.update(a);null!=this._sub&&this._sub.update(a);null!=this._world&&this._world.update(a);null!=this._screenTransition&&this._screenTransition.runUpdate(a);m.getBool("BOOL_GAME_LOSE")?P.flow.dispatch("BRANCH_GAME_LOSE"):m.getBool("BOOL_GAME_WIN")?P.flow.dispatch("BRANCH_GAME_WIN"):m.getBool("BOOL_LEVEL_LOSE")?P.flow.dispatch("BRANCH_LEVEL_LOSE"):m.getBool("BOOL_LEVEL_WIN")&&P.flow.dispatch("BRANCH_LEVEL_WIN");this._runFlowStack()},_updateCloud:function(a){ha.update(a);s.update(a);w.update(a);
H.update(a)},_addFlowEvent:function(a){this._flowstack.push(a)},_runFlowStack:function(){for(;0<this._flowstack.length;)this._executeFlowStack(this._flowstack[0]),this._flowstack.shift()},_executeFlowStack:function(a){var b=this;switch(a){case "BRANCH_GAME_LOSE":this._playMenuMusic();this._pauseGameplay();this._resetFlagsResults();this._gotoEndGame(!1);m.resetValue("INT_SCORE");m.resetValue("INT_LIVES");break;case "BRANCH_GAME_WIN":this._playMenuMusic();this._pauseGameplay();this._resetFlagsResults();
this._gotoEndGame(!0);break;case "BRANCH_LEVEL_LOSE":this._playMenuMusic();this._resetFlagsResults();this._gotoAndPlayGame();break;case "BRANCH_LEVEL_WIN":this._playMenuMusic();this._resetFlagsResults();this._gotoAndPlayGame();break;case "COLLECTION_CLOSE":this._ui.closeScreen(Tj);break;case "COLLECTION_OPEN":this._ui.openScreen(Tj);break;case "DEBUG_CLOSE":this._ui.closeScreen(Uk,!0);break;case "END_GAME_PLAY_AGAIN":this._screenTransition.doTransition(function(){b._ui.closeScreen(Sj);b._disposeWorld();
b._resetGameResults();Zc.onPlayAgain();b._onGameNew();b._unpauseGameplay();b._gotoAndPlayGame();m.setBool("BOOL_SHOW_BASIC_TUTORIAL",!1);m.setBool("BOOL_PAUSED",!1)},!0,!0);break;case "ENTER_CODE_CLOSE":this._ui.closeScreen(Uj);break;case "ENTER_CODE_OPEN":this._ui.openScreen(Uj);break;case "GAMEPLAY_MENU":this._pauseGameplay();this._ui.openScreen(Vj);break;case "GAMEPLAY_MENU_CLOSE":this._unpauseGameplay();this._ui.closeScreen(Vj);break;case "GAMEPLAY_MENU_HELP":this._ui.openScreen(Wj);break;case "GAMEPLAY_MENU_QUIT":this._ui.openScreen(Xj);
break;case "GAMEPLAY_QUIT_NO":this._ui.closeScreen(Xj);break;case "GAMEPLAY_QUIT_YES":this._screenTransition.doTransition(function(){b._playMenuMusic();b._resetFlagsResults();b._disposeWorld();b._ui.changeScreenTo(Yj);b._resetGameResults()},!1,!1);break;case "GAME_SELECT_OPEN":m.setBool("BOOL_SHOW_BASIC_TUTORIAL",!0);null==this._screenTransition&&(this._screenTransition=this._root.addChild(new Vk({library:"spine/nick_arcade_slime",scale:1})));this._screenTransition.doTransition(function(){b._disposeWorld();
b._ui.changeScreenTo(Yj)},!1,!1);break;case "HELP_CLOSE":this._ui.closeScreen(Wj);break;case "LEADERBOARD_CLOSE":this._ui.closeScreen(Zj);break;case "LEADERBOARD_OPEN":this._ui.openScreen(Zj);break;case "LOAD_CLOSE":this._unpauseGameplay();this._gotoAndPlayGame();break;case "SPLASH_PLAY":this._screenTransition.doTransition(function(){b._handleWebAudioUnlock();Zc.onSplashPlay();b._unpauseGameplay();b._onGameNew();m.setBool("BOOL_PAUSED",!1);b._gotoAndPlayGame()},!0,!0);break;case "TUTORIAL_CLOSE":this._unpauseGameplay();
this._ui.closeScreen($j);break;case "TUTORIAL_OPEN":this._pauseGameplay(),this._ui.openScreen($j)}},_pauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!0);Zc.onPauseEvent();P.pause.dispatch(!0)},_unpauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!1);Zc.onResumeEvent();P.pause.dispatch(!1)},_newOnChangeAction:function(a,b,c){this._changeActions.push(new Xm(a,b,c))},_executeInterfaceChange:function(a,b){for(var c=this._changeActions.length,d;0<c--;)d=this._changeActions[c],
d.screenId==b&&d.changeEvent==a&&(this._changeActions.splice(c,1),d.action())},_addEventListeners:function(){P.worldGenerationComplete.add(v(this,this._onWorldGenerationComplete));P.initialLoadComplete.add(v(this,this._eventInitialLoadComplete))},_enableInput:function(){w.enabled=!0},_handleWebAudioUnlock:function(){this._flagWebAudioUnlocked||(this._flagWebAudioUnlocked=!0,s.playSound("audio/silent"))},_onInterfaceChange:function(a,b){this._executeInterfaceChange(a,b)},_disposeWorld:function(){null!=
this._world&&(this._world.dispose(),this._world=null)},_playGameMusic:function(){s.playMusic("audio/nick_arcade_track_1",0.5)},_playMenuMusic:function(){s.playMusic("",0.5)},__class__:oh};Math.__name__=["Math"];var t=function(){};i.Reflect=t;t.__name__=["Reflect"];t.field=function(a,b){try{return a[b]}catch(c){return null}};t.getProperty=function(a,b){var c;if(null==a)return null;var d;d=a.__properties__?c=a.__properties__["get_"+b]:!1;return d?a[c]():a[b]};t.setProperty=function(a,b,c){var d,e;e=
a.__properties__?d=a.__properties__["set_"+b]:!1;if(e)a[d](c);else a[b]=c};t.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};t.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):!1};t.compare=function(a,b){return a==b?0:a>b?1:-1};t.isEnumValue=function(a){return null!=a?null!=a.__enum__:!1};t.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;
delete a[b];return!0};var L=function(){};i.Std=L;L.__name__=["Std"];L.string=function(a){return y.__string_rec(a,"")};L.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==Z.cca(a,1)||88==Z.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};var ai=function(){this.b=""};i.StringBuf=ai;ai.__name__=["StringBuf"];ai.prototype={__class__:ai};var pc=function(){};i.StringTools=pc;pc.__name__=["StringTools"];pc.startsWith=function(a,b){return a.length>=b.length?Z.substr(a,0,b.length)==b:!1};pc.isSpace=
function(a,b){var c=Z.cca(a,b);return 8<c&&14>c?!0:32==c};pc.ltrim=function(a){for(var b=a.length,c=0;c<b&&pc.isSpace(a,c);)++c;return 0<c?Z.substr(a,c,b-c):a};pc.rtrim=function(a){for(var b=a.length,c=0;c<b&&pc.isSpace(a,b-c-1);)++c;return 0<c?Z.substr(a,0,b-c):a};pc.trim=function(a){return pc.ltrim(pc.rtrim(a))};pc.replace=function(a,b,c){return a.split(b).join(c)};var Wa=i.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};
Wa.TNull=["TNull",0];Wa.TNull.toString=r;Wa.TNull.__enum__=Wa;Wa.TInt=["TInt",1];Wa.TInt.toString=r;Wa.TInt.__enum__=Wa;Wa.TFloat=["TFloat",2];Wa.TFloat.toString=r;Wa.TFloat.__enum__=Wa;Wa.TBool=["TBool",3];Wa.TBool.toString=r;Wa.TBool.__enum__=Wa;Wa.TObject=["TObject",4];Wa.TObject.toString=r;Wa.TObject.__enum__=Wa;Wa.TFunction=["TFunction",5];Wa.TFunction.toString=r;Wa.TFunction.__enum__=Wa;Wa.TClass=function(a){a=["TClass",6,a];a.__enum__=Wa;a.toString=r;return a};Wa.TEnum=function(a){a=["TEnum",
7,a];a.__enum__=Wa;a.toString=r;return a};Wa.TUnknown=["TUnknown",8];Wa.TUnknown.toString=r;Wa.TUnknown.__enum__=Wa;var ec=function(){};i.Type=ec;ec.__name__=["Type"];ec.getClassName=function(a){a=a.__name__;return null==a?null:a.join(".")};ec.getEnumName=function(a){return a.__ename__.join(".")};ec.resolveClass=function(a){a=i[a];return null==a||!a.__name__?null:a};ec.resolveEnum=function(a){a=i[a];return null==a||!a.__ename__?null:a};ec.createInstance=function(a,b){switch(b.length){case 0:return new a;
case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);case 9:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]);case 10:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]);case 11:return new a(b[0],
b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10]);case 12:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11]);case 13:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12]);case 14:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13]);default:throw new h("Too many arguments");}};ec.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};ec.createEnum=function(a,b,c){var d=t.field(a,b);
if(null==d)throw new h("No such constructor "+b);if(t.isFunction(d)){if(null==c)throw new h("Constructor "+b+" need parameters");return d.apply(a,c)}if(null!=c&&0!=c.length)throw new h("Constructor "+b+" does not need parameters");return d};ec["typeof"]=function(a){switch(typeof a){case "boolean":return Wa.TBool;case "function":return a.__name__||a.__ename__?Wa.TObject:Wa.TFunction;case "number":return Math.ceil(a)==a%2147483648?Wa.TInt:Wa.TFloat;case "object":if(null==a)return Wa.TNull;var b=a.__enum__;
if(null!=b)return Wa.TEnum(b);a=y.getClass(a);return null!=a?Wa.TClass(a):Wa.TObject;case "string":return Wa.TClass(String);case "undefined":return Wa.TNull;default:return Wa.TUnknown}};var S=function(a){this.nodeType=a;this.children=[];this.attributeMap=new $c};i.Xml=S;S.__name__=["Xml"];S.parse=function(a){return bi.parse(a)};S.createElement=function(a){var b=new S(S.Element);if(b.nodeType!=S.Element)throw new h("Bad node type, expected Element but found "+b.nodeType);b.nodeName=a;return b};S.createPCData=
function(a){var b=new S(S.PCData);if(b.nodeType==S.Document||b.nodeType==S.Element)throw new h("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};S.createCData=function(a){var b=new S(S.CData);if(b.nodeType==S.Document||b.nodeType==S.Element)throw new h("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};S.createComment=function(a){var b=new S(S.Comment);if(b.nodeType==S.Document||b.nodeType==S.Element)throw new h("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};
S.createDocType=function(a){var b=new S(S.DocType);if(b.nodeType==S.Document||b.nodeType==S.Element)throw new h("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};S.createProcessingInstruction=function(a){var b=new S(S.ProcessingInstruction);if(b.nodeType==S.Document||b.nodeType==S.Element)throw new h("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};S.createDocument=function(){return new S(S.Document)};S.prototype={get:function(a){if(this.nodeType!=S.Element)throw new h("Bad node type, expected Element but found "+
this.nodeType);var b=this.attributeMap;return null!=K[a]?b.getReserved(a):b.h[a]},set:function(a,b){if(this.nodeType!=S.Element)throw new h("Bad node type, expected Element but found "+this.nodeType);var c=this.attributeMap;null!=K[a]?c.setReserved(a,b):c.h[a]=b},exists:function(a){if(this.nodeType!=S.Element)throw new h("Bad node type, expected Element but found "+this.nodeType);var b=this.attributeMap;return null!=K[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},elementsNamed:function(a){if(this.nodeType!=
S.Document&&this.nodeType!=S.Element)throw new h("Bad node type, expected Element or Document but found "+this.nodeType);for(var b=[],c=0,d=this.children;c<d.length;){var e=d[c];++c;var f;if(e.nodeType==S.Element){if(e.nodeType!=S.Element)throw new h("Bad node type, expected Element but found "+e.nodeType);f=e.nodeName==a}else f=!1;f&&b.push(e)}return Z.iter(b)},firstElement:function(){if(this.nodeType!=S.Document&&this.nodeType!=S.Element)throw new h("Bad node type, expected Element or Document but found "+
this.nodeType);for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;if(c.nodeType==S.Element)return c}return null},addChild:function(a){if(this.nodeType!=S.Document&&this.nodeType!=S.Element)throw new h("Bad node type, expected Element or Document but found "+this.nodeType);null!=a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this},removeChild:function(a){if(this.nodeType!=S.Document&&this.nodeType!=S.Element)throw new h("Bad node type, expected Element or Document but found "+
this.nodeType);return Z.remove(this.children,a)?(a.parent=null,!0):!1},__class__:S};var zi=function(){};i["app.CollectionData"]=zi;zi.__name__=["app","CollectionData"];zi.getTicketsForRarity=function(a){switch(a){case 0:return 25;case 1:return 50;case 2:return 150;case 3:return 300}return 10};var fb=function(){};i["app.ConstantsApp"]=fb;fb.__name__=["app","ConstantsApp"];var ke={};i["workinman.event._Event0.Event0_Impl_"]=ke;ke.__name__=["workinman","event","_Event0","Event0_Impl_"];ke._new=function(){return new Ym};
var Ym=function(){this._list=[]};i["workinman.event._Event0.Event0Base"]=Ym;Ym.__name__=["workinman","event","_Event0","Event0Base"];Ym.prototype={add:function(a){0<=this._list.indexOf(a)||this._list.push(a)},remove:function(a){for(var b=this._list.length;0<b--;)if(this._list[b]==a){Z.remove(this._list,a);break}},dispatch:function(){for(var a=0,b=this._list;a<b.length;){var c=b[a];++a;c()}},dispose:function(){for(;0<this._list.length;)this._list.pop();this._list=null},__class__:Ym};var ap={};i["workinman.event._Event3.Event3_Impl_"]=
ap;ap.__name__=["workinman","event","_Event3","Event3_Impl_"];ap._new=function(){return new Zm};var Zm=function(){this._list=[]};i["workinman.event._Event3.Event3Base"]=Zm;Zm.__name__=["workinman","event","_Event3","Event3Base"];Zm.prototype={add:function(a){0<=this._list.indexOf(a)||this._list.push(a)},remove:function(a){for(var b=this._list.length;0<b--;)if(this._list[b]==a){Z.remove(this._list,a);break}},dispatch:function(a,b,c){for(var d=0,e=this._list;d<e.length;){var f=e[d];++d;f(a,b,c)}},__class__:Zm};
var Yi={};i["workinman.event._Event2.Event2_Impl_"]=Yi;Yi.__name__=["workinman","event","_Event2","Event2_Impl_"];Yi._new=function(){return new $m};var $m=function(){this._list=[]};i["workinman.event._Event2.Event2Base"]=$m;$m.__name__=["workinman","event","_Event2","Event2Base"];$m.prototype={add:function(a){0<=this._list.indexOf(a)||this._list.push(a)},remove:function(a){for(var b=this._list.length;0<b--;)if(this._list[b]==a){Z.remove(this._list,a);break}},dispatch:function(a,b){for(var c=0,d=this._list;c<
d.length;){var e=d[c];++c;e(a,b)}},dispose:function(){for(;0<this._list.length;)this._list.pop();this._list=null},__class__:$m};var P=function(){};i["app.ConstantsEvent"]=P;P.__name__=["app","ConstantsEvent"];var bp=function(){};i["app.ConstantsMinigame"]=bp;bp.__name__=["app","ConstantsMinigame"];bp.getBoosterOptions=function(a){switch(a){case "ANCHOVY_FLICK":return["DOUBLE_POINTS","EXTRA_AMMO","ANCHOVY_PATRICK_MODE"];case "BASKETBALL":return["DOUBLE_POINTS","EXTRA_TIME","EXTRA_TIME"];case "DANGER_LASER":return["DOUBLE_POINTS",
"EXTRA_TIME","DANGER_LASER_FRENZY_MODE"];case "HOOF_MACHINE":return["HOOF_MACHINE_SINGLE_ITEM","HOOF_MACHINE_STICKY_MODE","HOOF_MACHINE_STICKY_MODE"];case "PACK_MAZE":return["DOUBLE_POINTS","PACK_MAZE_EXTRA_PICKUPS","PACK_MAZE_EXTRA_POWERUPS"];case "ROCK_EM_SOCK_EM":return["DOUBLE_POINTS","ROCKEM_EXTRA_HEALTH","ROCKEM_ONE_PUNCH"];case "SKATE_LANE":return["SKATE_SHIELD","SKATE_MAGNET","SKATE_FRENZY_MODE"];case "SKEEBALL":return["DOUBLE_POINTS","EXTRA_AMMO","SKEEBALL_MAGNET"];case "SLIME_EXPLODE":return["DOUBLE_POINTS",
"SLIME_BIG_EXPLOSION","SLIME_FRENZY_MODE"];case "WHACK_A_MOLE":return["LOUD_LAUGHS_EXPLODING_PIES","LOUD_LAUGHS_FRENZY_MODE","DOUBLE_POINTS"];default:return[]}};var $=i["app.INPUT_TYPE"]={__ename__:["app","INPUT_TYPE"],__constructs__:"POINTER,POINTER_MOVE,UI_OK,UI_DENY,UI_MENU,MOVE_UP,MOVE_DOWN,MOVE_LEFT,MOVE_RIGHT,JUMP,ATTACK".split(",")};$.POINTER=["POINTER",0];$.POINTER.toString=r;$.POINTER.__enum__=$;$.POINTER_MOVE=["POINTER_MOVE",1];$.POINTER_MOVE.toString=r;$.POINTER_MOVE.__enum__=$;$.UI_OK=
["UI_OK",2];$.UI_OK.toString=r;$.UI_OK.__enum__=$;$.UI_DENY=["UI_DENY",3];$.UI_DENY.toString=r;$.UI_DENY.__enum__=$;$.UI_MENU=["UI_MENU",4];$.UI_MENU.toString=r;$.UI_MENU.__enum__=$;$.MOVE_UP=["MOVE_UP",5];$.MOVE_UP.toString=r;$.MOVE_UP.__enum__=$;$.MOVE_DOWN=["MOVE_DOWN",6];$.MOVE_DOWN.toString=r;$.MOVE_DOWN.__enum__=$;$.MOVE_LEFT=["MOVE_LEFT",7];$.MOVE_LEFT.toString=r;$.MOVE_LEFT.__enum__=$;$.MOVE_RIGHT=["MOVE_RIGHT",8];$.MOVE_RIGHT.toString=r;$.MOVE_RIGHT.__enum__=$;$.JUMP=["JUMP",9];$.JUMP.toString=
r;$.JUMP.__enum__=$;$.ATTACK=["ATTACK",10];$.ATTACK.toString=r;$.ATTACK.__enum__=$;var na=i["app.INPUT_VIRTUAL"]={__ename__:["app","INPUT_VIRTUAL"],__constructs__:"JUMP,ATTACK,MOVE_LEFT,MOVE_RIGHT,UP,DOWN,LEFT,RIGHT".split(",")};na.JUMP=["JUMP",0];na.JUMP.toString=r;na.JUMP.__enum__=na;na.ATTACK=["ATTACK",1];na.ATTACK.toString=r;na.ATTACK.__enum__=na;na.MOVE_LEFT=["MOVE_LEFT",2];na.MOVE_LEFT.toString=r;na.MOVE_LEFT.__enum__=na;na.MOVE_RIGHT=["MOVE_RIGHT",3];na.MOVE_RIGHT.toString=r;na.MOVE_RIGHT.__enum__=
na;na.UP=["UP",4];na.UP.toString=r;na.UP.__enum__=na;na.DOWN=["DOWN",5];na.DOWN.toString=r;na.DOWN.__enum__=na;na.LEFT=["LEFT",6];na.LEFT.toString=r;na.LEFT.__enum__=na;na.RIGHT=["RIGHT",7];na.RIGHT.toString=r;na.RIGHT.__enum__=na;var cp=function(){};i["app.LeaderboardData"]=cp;cp.__name__=["app","LeaderboardData"];cp.getLeaderboardForGame=function(a){switch(a){case "ANCHOVY_FLICK":return[{name:"Dog Pocket",score:15E3},{name:"Gary",score:7500},{name:"Ace Savvy",score:6E3},{name:"Shwoz",score:9E3},
{name:"Big Bern",score:3E3}];case "BASKETBALL":return[{name:"Dog Pocket",score:15E3},{name:"Gary",score:7500},{name:"Ace Savvy",score:6E3},{name:"Shwoz",score:9E3},{name:"Big Bern",score:3E3}];case "DANGER_LASER":return[{name:"Dog Pocket",score:15E3},{name:"Gary",score:7500},{name:"Ace Savvy",score:6E3},{name:"Shwoz",score:9E3},{name:"Big Bern",score:3E3}];case "HOOF_MACHINE":return[{name:"Dog Pocket",score:15E3},{name:"Gary",score:7500},{name:"Ace Savvy",score:6E3},{name:"Shwoz",score:9E3},{name:"Big Bern",
score:3E3}];case "PACK_MAZE":return[{name:"Dog Pocket",score:15E3},{name:"Gary",score:7500},{name:"Ace Savvy",score:6E3},{name:"Shwoz",score:9E3},{name:"Big Bern",score:3E3}];case "ROCK_EM_SOCK_EM":return[{name:"Dog Pocket",score:15E3},{name:"Gary",score:7500},{name:"Ace Savvy",score:6E3},{name:"Shwoz",score:9E3},{name:"Big Bern",score:3E3}];case "SKATE_LANE":return[{name:"Dog Pocket",score:15E3},{name:"Gary",score:7500},{name:"Ace Savvy",score:6E3},{name:"Shwoz",score:9E3},{name:"Big Bern",score:3E3}];
case "SKEEBALL":return[{name:"Dog Pocket",score:15E3},{name:"Gary",score:7500},{name:"Ace Savvy",score:6E3},{name:"Shwoz",score:9E3},{name:"Big Bern",score:3E3}];case "SLIME_EXPLODE":return[{name:"Dog Pocket",score:15E3},{name:"Gary",score:7500},{name:"Ace Savvy",score:6E3},{name:"Shwoz",score:9E3},{name:"Big Bern",score:3E3}];case "WHACK_A_MOLE":return[{name:"Dog Pocket",score:15E3},{name:"Gary",score:7500},{name:"Ace Savvy",score:6E3},{name:"Shwoz",score:9E3},{name:"Big Bern",score:3E3}]}return[]};
var Zb=function(){};i["app.PlayerData"]=Zb;Zb.__name__=["app","PlayerData"];Zb.__properties__={get_instance:"get_instance"};Zb.get_instance=function(){null==Zb.__instance&&(Zb.__instance=new Zb);return Zb.__instance};Zb.prototype={save:function(){var a=ci.dataLoad("nick_arcade_v1");a.highScores=this.highScores;a.collectedPrizes=this.collectedPrizes;a.ticketCountSilver=m.getInt("INT_TICKET_COUNT_SILVER");a.ticketCountGold=m.getInt("INT_TICKET_COUNT_GOLD");a.ticketCountGreen=m.getInt("INT_TICKET_COUNT_GREEN");
a.version="1.0.0";ci.dataSave("nick_arcade_v1",a)},load:function(){var a=ci.dataLoad("nick_arcade_v1");if(null==a||-1==a.version)this.highScores=new $c,this.collectedPrizes=[],m.setInt("INT_TICKET_COUNT_SILVER",0),m.setInt("INT_TICKET_COUNT_GOLD",0),m.setInt("INT_TICKET_COUNT_GREEN",0),a.ticketCountSilver=0,a.ticketCountGold=0,a.ticketCountGreen=0;else{this.highScores=a.highScores;this.collectedPrizes=a.collectedPrizes;if(!m.hasValue("INT_TICKET_COUNT_SILVER")||null==m.getInt("INT_TICKET_COUNT_SILVER"))m.setInt("INT_TICKET_COUNT_SILVER",
0),a.ticketCountSilver=0;if(!m.hasValue("INT_TICKET_COUNT_GOLD")||null==m.getInt("INT_TICKET_COUNT_GOLD"))m.setInt("INT_TICKET_COUNT_GOLD",0),a.ticketCountGold=0;if(!m.hasValue("INT_TICKET_COUNT_GREEN")||null==m.getInt("INT_TICKET_COUNT_GREEN"))m.setInt("INT_TICKET_COUNT_GREEN",0),a.ticketCountGreen=0;m.setInt("INT_TICKET_COUNT_SILVER",a.ticketCountSilver);m.setInt("INT_TICKET_COUNT_GOLD",a.ticketCountGold);m.setInt("INT_TICKET_COUNT_GREEN",a.ticketCountGreen)}},__class__:Zb};var Zc=function(){};
i["app.Services"]=Zc;Zc.__name__=["app","Services"];Zc.initMain=function(){};Zc.initServices=function(){};Zc.setPlaybackToggle=function(){};Zc.onBootstrapFinished=function(){};Zc.onPreloadFinished=function(){};Zc.onInitialFinished=function(){};Zc.onSplashPlay=function(){};Zc.onSplashClose=function(){};Zc.onGameStart=function(){};Zc.onPlayAgain=function(){};Zc.onGameEnd=function(){};Zc.onPauseEvent=function(){};Zc.onResumeEvent=function(){};Zc.update=function(){};var Hh=function(){};i["flambe.util.Disposable"]=
Hh;Hh.__name__=["flambe","util","Disposable"];Hh.prototype={__class__:Hh};var de=function(){this._flags=0;this.owner=this.next=null};i["flambe.Component"]=de;de.__name__=["flambe","Component"];de.__interfaces__=[Hh];de.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:de,__properties__:{get_name:"get_name"}};var Wk=function(){this.parent=
this.firstChild=this.next=this.firstComponent=null;this._compMap={}};i["flambe.Entity"]=Wk;Wk.__name__=["flambe","Entity"];Wk.__interfaces__=[Hh];Wk.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=
c.next;if(c==a)return null==b?this.firstComponent=d:(b.owner=this,b.next=d),delete this._compMap[c.get_name()],0!=(c._flags&1)&&(c.onStop(),c._flags&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=d}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,
c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},__class__:Wk};var dp=function(){};i["flambe.util.PackageLog"]=dp;dp.__name__=["flambe","util","PackageLog"];var an=function(){};i["flambe.platform.Platform"]=
an;an.__name__=["flambe","platform","Platform"];an.prototype={__class__:an};var di=function(){};i["flambe.platform.html.HtmlPlatform"]=di;di.__name__=["flambe","platform","html","HtmlPlatform"];di.__interfaces__=[an];di.prototype={init:function(){var a=this;nb.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new yi(b);this._pointer=
new ig;this._mouse=new Xk(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new Zi;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var d=0,e=function(c){if(!(1E3>c.timeStamp-d)){var e=b.getBoundingClientRect(),f=a.getX(c,e),e=a.getY(c,e);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(f,e,c.button),
b.focus());break;case "mousemove":a._mouse.submitMove(f,e);break;case "mouseup":a._mouse.submitUp(f,e,c.button);break;case "DOMMouseScroll":case "mousewheel":a._mouse.submitScroll(f,e,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",e,!1);window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",e,!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("DOMMouseScroll",e,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},
!1);var f="undefined"!=typeof window.ontouchstart,e="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(f||e){var g=new Yk(this._pointer,f?4:window.navigator.msMaxTouchPoints);this._touch=g;e=function(b){var c=f?b.changedTouches:[b],e=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "MSPointerMove":case "pointermove":case "touchmove":b.preventDefault();for(b=0;b<c.length;){var j=c[b];++b;var p=a.getX(j,e),h=a.getY(j,e);g.submitMove((f?j.identifier:j.pointerId)|
0,p,h)}break;case "MSPointerUp":case "pointerup":case "touchcancel":case "touchend":for(b=0;b<c.length;)j=c[b],++b,p=a.getX(j,e),h=a.getY(j,e),g.submitUp((f?j.identifier:j.pointerId)|0,p,h);break;case "MSPointerDown":case "pointerdown":case "touchstart":b.preventDefault();nb.SHOULD_HIDE_MOBILE_BROWSER&&nb.hideMobileBrowser();for(b=0;b<c.length;)j=c[b],++b,p=a.getX(j,e),h=a.getY(j,e),g.submitDown((f?j.identifier:j.pointerId)|0,p,h)}};f?(b.addEventListener("touchstart",e,!1),b.addEventListener("touchmove",
e,!1),b.addEventListener("touchend",e,!1),b.addEventListener("touchcancel",e,!1)):(b.addEventListener("MSPointerDown",e,!1),b.addEventListener("MSPointerMove",e,!1),b.addEventListener("MSPointerUp",e,!1))}else this._touch=new Zk;var j=window.onerror;window.onerror=function(a,b,c){ma.uncaughtError.emit(a);return null!=j?j(a,b,c):!1};var p=nb.loadExtension("hidden",window.document);null!=p.value?(e=function(){ma.hidden.set__(t.field(window.document,p.field))},e(null),window.document.addEventListener(p.prefix+
"visibilitychange",e,!1)):(e=function(a){ma.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",e,!1));ma.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var h=nb.loadExtension("requestAnimationFrame").value;if(null!=h){var i=window.performance,k=null!=i&&nb.polyfill("now",i);k&&(this._lastUpdate=i.now());var l=null,l=function(c){c=k?i.now():c;a.update(c);h(l,b)};h(l,b)}else window.setInterval(function(){var b=
Date.now();a.update(b)},16);this._renderer.get_type()},loadAssetPack:function(a){return(new Tc(this,a)).promise},getStage:function(){return this._stage},getLocale:function(){var a=window.navigator.language;null==a&&(a=window.navigator.userLanguage);return a},createLogHandler:function(){return null},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;ma.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},
getMouse:function(){return this._mouse},getTouch:function(){return this._touch},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new Pg;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-
b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){return new $i(a)},__class__:di};var Cg=function(a,b){this._value=a;this._changed=null!=b?new ak(b):null};i["flambe.util.Value"]=Cg;Cg.__name__=["flambe","util","Value"];Cg.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,
b));return a},get_changed:function(){null==this._changed&&(this._changed=new ak);return this._changed},__class__:Cg,__properties__:{get_changed:"get_changed",set__:"set__"}};var aj=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};i["flambe.util.SignalConnection"]=aj;aj.__name__=["flambe","util","SignalConnection"];aj.__interfaces__=[Hh];aj.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),
this._signal=null)},__class__:aj};var Ye=function(a){this._head=null!=a?new aj(this,a):null;this._deferredTasks=null};i["flambe.util.SignalBase"]=Ye;Ye.__name__=["flambe","util","SignalBase"];Ye.prototype={connectImpl:function(a,b){var c=this,d=new aj(this,a);this._head==Ye.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},disconnect:function(a){var b=this;this._head==Ye.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=
null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new bn(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=Ye.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=d;)c=d,d=d._next;null!=c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==
a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:Ye};var ak=function(a){Ye.call(this,a)};i["flambe.util.Signal2"]=ak;ak.__name__=["flambe","util","Signal2"];ak.__super__=Ye;ak.prototype=z(Ye.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==Ye.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),
d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:ak});var hc=function(a){Ye.call(this,a)};i["flambe.util.Signal1"]=hc;hc.__name__=["flambe","util","Signal1"];hc.__super__=Ye;hc.prototype=z(Ye.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==Ye.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),
c=c._next;this.didEmit(b)},__class__:hc});var $f=function(a,b){this._behavior=null;Cg.call(this,a,b)};i["flambe.animation.AnimatedFloat"]=$f;$f.__name__=["flambe","animation","AnimatedFloat"];$f.__super__=Cg;$f.prototype=z(Cg.prototype,{set__:function(a){this._behavior=null;return Cg.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(Cg.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},__class__:$f});var ma=function(){};i["flambe.System"]=
ma;ma.__name__=["flambe","System"];ma.init=function(){ma._calledInit||(ma._platform.init(),ma._calledInit=!0)};var cn=function(a){this._handler=a};i["flambe.util.Logger"]=cn;cn.__name__=["flambe","util","Logger"];cn.prototype={__class__:cn};var $k=function(){};i["flambe.Log"]=$k;$k.__name__=["flambe","Log"];$k.__super__=dp;$k.prototype=z(dp.prototype,{__class__:$k});var dn=function(){this._realDt=0};i["flambe.SpeedAdjuster"]=dn;dn.__name__=["flambe","SpeedAdjuster"];dn.__super__=de;dn.prototype=z(de.prototype,
{get_name:function(){return"SpeedAdjuster_3"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:dn});var ep=function(){};i["flambe.animation.Behavior"]=ep;ep.__name__=["flambe","animation","Behavior"];ep.prototype={__class__:ep};var Ai=function(){};i["flambe.asset.Asset"]=Ai;Ai.__name__=["flambe","asset","Asset"];Ai.__interfaces__=[Hh];Ai.prototype={__class__:Ai};var ca=i["flambe.asset.AssetFormat"]={__ename__:["flambe","asset","AssetFormat"],__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};
ca.WEBP=["WEBP",0];ca.WEBP.toString=r;ca.WEBP.__enum__=ca;ca.JXR=["JXR",1];ca.JXR.toString=r;ca.JXR.__enum__=ca;ca.PNG=["PNG",2];ca.PNG.toString=r;ca.PNG.__enum__=ca;ca.JPG=["JPG",3];ca.JPG.toString=r;ca.JPG.__enum__=ca;ca.GIF=["GIF",4];ca.GIF.toString=r;ca.GIF.__enum__=ca;ca.DDS=["DDS",5];ca.DDS.toString=r;ca.DDS.__enum__=ca;ca.PVR=["PVR",6];ca.PVR.toString=r;ca.PVR.__enum__=ca;ca.PKM=["PKM",7];ca.PKM.toString=r;ca.PKM.__enum__=ca;ca.MP3=["MP3",8];ca.MP3.toString=r;ca.MP3.__enum__=ca;ca.M4A=["M4A",
9];ca.M4A.toString=r;ca.M4A.__enum__=ca;ca.OPUS=["OPUS",10];ca.OPUS.toString=r;ca.OPUS.__enum__=ca;ca.OGG=["OGG",11];ca.OGG.toString=r;ca.OGG.__enum__=ca;ca.WAV=["WAV",12];ca.WAV.toString=r;ca.WAV.__enum__=ca;ca.Data=["Data",13];ca.Data.toString=r;ca.Data.__enum__=ca;var en=function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};i["flambe.asset.AssetEntry"]=en;en.__name__=["flambe","asset","AssetEntry"];en.prototype={__class__:en};var al=function(){};i["flambe.asset.AssetPack"]=al;al.__name__=
["flambe","asset","AssetPack"];al.__interfaces__=[Hh];al.prototype={__class__:al,__properties__:{get_manifest:"get_manifest"}};var bl=function(){};i["flambe.asset.File"]=bl;bl.__name__=["flambe","asset","File"];bl.__interfaces__=[Ai];bl.prototype={__class__:bl};var xe=function(){this._localBase=this._remoteBase=null;this._entries=[]};i["flambe.asset.Manifest"]=xe;xe.__name__=["flambe","asset","Manifest"];xe.fromAssets=function(a,b){null==b&&(b=!0);var c=t.field(bk.getType(xe).assets[0],a);if(null==
c){if(b)throw new h(Ze.withFields("Missing asset pack",["name",a]));return null}var d=new xe;d.set_localBase("assets");for(var e=0;e<c.length;){var f=c[e];++e;var g=f.name,j=a+"/"+g+"?v="+L.string(f.md5),p=xe.inferFormat(g);p!=ca.Data&&(g=Ze.removeFileExtension(g));d.add(g,j,f.bytes,p)}return d};xe.fromAssetsLocalized=function(a,b,c){null==c&&(c=!0);null==b&&(b=ma._platform.getLocale());if(null!=b)for(b=b.split("-");0<b.length;){var d=xe.fromAssets(a+"_"+b.join("-"),!1);if(null!=d)return d;b.pop()}return xe.fromAssets(a,
c)};xe.exists=function(a){var b=bk.getType(xe).assets[0];return Object.prototype.hasOwnProperty.call(b,a)};xe.inferFormat=function(a){a=Ze.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "dds":return ca.DDS;case "gif":return ca.GIF;case "jpeg":case "jpg":return ca.JPG;case "jxr":case "wdp":return ca.JXR;case "m4a":return ca.M4A;case "mp3":return ca.MP3;case "ogg":return ca.OGG;case "opus":return ca.OPUS;case "pkm":return ca.PKM;case "png":return ca.PNG;case "pvr":return ca.PVR;case "wav":return ca.WAV;
case "webp":return ca.WEBP}return ca.Data};xe.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=xe.inferFormat(b));a=new en(a,b,d,c);this._entries.push(a);return a},iterator:function(){return Z.iter(this._entries)},getFullURL:function(a){var b=null!=this.get_remoteBase()&&xe._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?Ze.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&!pc.startsWith(a,"http://")&&
pc.startsWith(a,"https://");return this._localBase=a},get_remoteBase:function(){return this._remoteBase},set_remoteBase:function(a){null!=a&&(pc.startsWith(a,"http://")||pc.startsWith(a,"https://"));return this._remoteBase=a},__class__:xe,__properties__:{set_remoteBase:"set_remoteBase",get_remoteBase:"get_remoteBase",set_localBase:"set_localBase",get_localBase:"get_localBase"}};var wc=i["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(",")};
wc.Normal=["Normal",0];wc.Normal.toString=r;wc.Normal.__enum__=wc;wc.Add=["Add",1];wc.Add.toString=r;wc.Add.__enum__=wc;wc.Multiply=["Multiply",2];wc.Multiply.toString=r;wc.Multiply.__enum__=wc;wc.Screen=["Screen",3];wc.Screen.toString=r;wc.Screen.__enum__=wc;wc.Mask=["Mask",4];wc.Mask.toString=r;wc.Mask.__enum__=wc;wc.Copy=["Copy",5];wc.Copy.toString=r;wc.Copy.__enum__=wc;var bj=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=
0;this.charCode=a};i["flambe.display.Glyph"]=bj;bj.__name__=["flambe","display","Glyph"];bj.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?this._kernings.h[a]|0:0},setKerning:function(a,b){null==this._kernings&&(this._kernings=new Ke);this._kernings.h[a]=b},__class__:bj};var Vg=function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");this.reload()};
i["flambe.display.Font"]=Vg;Vg.__name__=["flambe","display","Font"];Vg.prototype={layoutText:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=Ca.Left);return new Bi(this,a,b,c,d,e)},reload:function(){this._glyphs=new Ke;this._glyphs.h[Vg.NEWLINE.charCode]=Vg.NEWLINE;for(var a=new cj(this._file.toString()),b=new Ke,c=this.name.lastIndexOf("/"),c=0<=c?Z.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "char":for(var e=null,f=a.pairs();f.hasNext();){var g=
f.next();switch(g.key){case "height":e.height=g.getInt();break;case "id":e=new bj(g.getInt());break;case "page":g=g.getInt();e.page=b.h[g];break;case "width":e.width=g.getInt();break;case "x":e.x=g.getInt();break;case "xadvance":e.xAdvance=g.getInt();break;case "xoffset":e.xOffset=g.getInt();break;case "y":e.y=g.getInt();break;case "yoffset":e.yOffset=g.getInt()}}this._glyphs.set(e.charCode,e);break;case "common":for(e=a.pairs();e.hasNext();)f=e.next(),"lineHeight"==f.key&&(this.lineHeight=f.getInt());
break;case "info":for(e=a.pairs();e.hasNext();)f=e.next(),"size"==f.key&&(this.size=f.getInt());break;case "kerning":for(var e=null,g=f=0,j=a.pairs();j.hasNext();){var p=j.next();switch(p.key){case "amount":g=p.getInt();break;case "first":e=this._glyphs.get(p.getInt());break;case "second":f=p.getInt()}}null!=e&&0!=g&&e.setKerning(f,g);break;case "page":e=0;f=null;for(g=a.pairs();g.hasNext();)switch(j=g.next(),j.key){case "file":f=j.getString();break;case "id":e=j.getInt()}f=this._pack.getTexture(c+
Ze.removeFileExtension(f));b.h[e]=f}},__class__:Vg};var Ca=i["flambe.display.TextAlign"]={__ename__:["flambe","display","TextAlign"],__constructs__:["Left","Center","Right"]};Ca.Left=["Left",0];Ca.Left.toString=r;Ca.Left.__enum__=Ca;Ca.Center=["Center",1];Ca.Center.toString=r;Ca.Center.__enum__=Ca;Ca.Right=["Right",2];Ca.Right.toString=r;Ca.Right.__enum__=Ca;var Bi=function(a,b,c,d,e,f){this.lines=0;var g=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+
f);this.bounds=new fn;for(var j=[],f=0,p=b.length;f<p;){var h=f++,h=b.charCodeAt(h),h=a._glyphs.get(h);null!=h&&this._glyphs.push(h)}for(var b=-1,i=0,k=0,a=a._glyphs.get(10),f=function(){var a=g.bounds.width;g.bounds.width=a>i?a:i;g.bounds.height+=k;j[g.lines]=i;k=i=0;++g.lines},p=0;p<this._glyphs.length;){h=this._glyphs[p];this._offsets[p]=Math.round(i);var l=0<d&&i+h.width>d;l||h==a?(l&&(0<=b?(this._glyphs[b]=a,i=this._offsets[b],p=b):this._glyphs.splice(p,0,a)),b=-1,k=this._lineOffset,f()):(32==
h.charCode&&(b=p),i+=h.xAdvance+e,l=h.height+h.yOffset,k>l||(k=l),p+1<this._glyphs.length&&(i+=h.getKerning(this._glyphs[p+1].charCode)));++p}f();e=0;a=Bi.getAlignOffset(c,j[0],d);b=1.79769313486231E308;f=-1.79769313486231E308;h=p=0;for(l=this._glyphs.length;h<l;){var o=this._glyphs[h];10==o.charCode&&(e+=this._lineOffset,++p,a=Bi.getAlignOffset(c,j[p],d));this._offsets[h]+=a;var n=e+o.yOffset,b=b<n?b:n,o=n+o.height;f>o||(f=o);++h}this.bounds.x=Bi.getAlignOffset(c,this.bounds.width,d);this.bounds.y=
b;this.bounds.height=f-b};i["flambe.display.TextLayout"]=Bi;Bi.__name__=["flambe","display","TextLayout"];Bi.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 1:return Math.round((c-b)/2);case 2:return c-b}};Bi.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var e=this._glyphs[c];10==e.charCode?b+=this._lineOffset:e.draw(a,this._offsets[c],b);++c}},__class__:Bi};var cj=function(a){this._configText=a;this._keywordPattern=new Ng("([A-Za-z]+)(.*)","");this._pairPattern=
new Ng('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};i["flambe.display._Font.ConfigParser"]=cj;cj.__name__=["flambe","display","_Font","ConfigParser"];cj.advance=function(a,b){var c=b.matchedPos();return Z.substr(a,c.pos+c.len,a.length)};cj.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=cj.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=
this,b=this._pairText;return{next:function(){b=cj.advance(b,a._pairPattern);return new gn(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:cj};var gn=function(a,b){this.key=a;this._value=b};i["flambe.display._Font.ConfigPair"]=gn;gn.__name__=["flambe","display","_Font","ConfigPair"];gn.prototype={getInt:function(){return L.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:Z.substr(this._value,1,
this._value.length-2)},__class__:gn};var hn=function(){};i["flambe.display.Graphics"]=hn;hn.__name__=["flambe","display","Graphics"];hn.prototype={__class__:hn};var Ih=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};i["flambe.math.Point"]=Ih;Ih.__name__=["flambe","math","Point"];Ih.prototype={__class__:Ih};var le=function(){this.blendMode=this.scissor=null;var a=this;de.call(this);this._flags|=54;this._localMatrix=new Dg;var b=function(){a._flags|=24};this.x=new $f(0,b);this.y=new $f(0,
b);this.rotation=new $f(0,b);this.scaleX=new $f(1,b);this.scaleY=new $f(1,b);this.anchorX=new $f(0,b);this.anchorY=new $f(0,b);this.alpha=new $f(1)};i["flambe.display.Sprite"]=le;le.__name__=["flambe","display","Sprite"];le.hitTest=function(a,b,c){var d=a._compMap.Sprite_1;if(null!=d){if(6!=(d._flags&6))return null;d.getLocalMatrix().inverseTransform(b,c,le._scratchPoint)&&(b=le._scratchPoint.x,c=le._scratchPoint.y);var e=d.scissor;if(null!=e&&!e.contains(b,c))return null}a=le.hitTestBackwards(a.firstChild,
b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};le.render=function(a,b){var c=a._compMap.Sprite_1;if(null!=c){var d=c.alpha._value;if(0==(c._flags&2)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),e=d.m02,f=d.m12;0!=(c._flags&32)&&(e=Math.round(e),f=Math.round(f));b.transform(d.m00,d.m10,d.m01,d.m11,e,f);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_2;if(null!=d){d=d.occludedScenes;
for(e=0;e<d.length;)f=d[e],++e,le.render(f,b)}for(d=a.firstChild;null!=d;)e=d.next,le.render(d,b),d=e;null!=c&&b.restore()};le.hitTestBackwards=function(a,b,c){if(null!=a){var d=le.hitTestBackwards(a.next,b,c);return null!=d?d:le.hitTest(a,b,c)}return null};le.__super__=de;le.prototype=z(de.prototype,{get_name:function(){return"Sprite_1"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b?b<this.getNaturalHeight():
!1},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);
this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_1;if(null!=b)return b;a=a.parent}return null},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=ma._platform.getPointer().move.connect(function(b){for(var c=b.hit;null!=c;){if(c==
a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),
this.connectHover()},onPointerUp:function(a){1==a.source[1]&&(null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null));null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:le});var ei=i["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};ei.Portrait=["Portrait",0];ei.Portrait.toString=r;ei.Portrait.__enum__=ei;
ei.Landscape=["Landscape",1];ei.Landscape.toString=r;ei.Landscape.__enum__=ei;var cl=function(){};i["flambe.display.Texture"]=cl;cl.__name__=["flambe","display","Texture"];cl.__interfaces__=[Ai];cl.prototype={__class__:cl,__properties__:{get_graphics:"get_graphics",get_height:"get_height",get_width:"get_width"}};var fp=function(){};i["flambe.display.SubTexture"]=fp;fp.__name__=["flambe","display","SubTexture"];fp.__interfaces__=[cl];var k=i["flambe.input.Key"]={__ename__:["flambe","input","Key"],
__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
k.A=["A",0];k.A.toString=r;k.A.__enum__=k;k.B=["B",1];k.B.toString=r;k.B.__enum__=k;k.C=["C",2];k.C.toString=r;k.C.__enum__=k;k.D=["D",3];k.D.toString=r;k.D.__enum__=k;k.E=["E",4];k.E.toString=r;k.E.__enum__=k;k.F=["F",5];k.F.toString=r;k.F.__enum__=k;k.G=["G",6];k.G.toString=r;k.G.__enum__=k;k.H=["H",7];k.H.toString=r;k.H.__enum__=k;k.I=["I",8];k.I.toString=r;k.I.__enum__=k;k.J=["J",9];k.J.toString=r;k.J.__enum__=k;k.K=["K",10];k.K.toString=r;k.K.__enum__=k;k.L=["L",11];k.L.toString=r;k.L.__enum__=
k;k.M=["M",12];k.M.toString=r;k.M.__enum__=k;k.N=["N",13];k.N.toString=r;k.N.__enum__=k;k.O=["O",14];k.O.toString=r;k.O.__enum__=k;k.P=["P",15];k.P.toString=r;k.P.__enum__=k;k.Q=["Q",16];k.Q.toString=r;k.Q.__enum__=k;k.R=["R",17];k.R.toString=r;k.R.__enum__=k;k.S=["S",18];k.S.toString=r;k.S.__enum__=k;k.T=["T",19];k.T.toString=r;k.T.__enum__=k;k.U=["U",20];k.U.toString=r;k.U.__enum__=k;k.V=["V",21];k.V.toString=r;k.V.__enum__=k;k.W=["W",22];k.W.toString=r;k.W.__enum__=k;k.X=["X",23];k.X.toString=
r;k.X.__enum__=k;k.Y=["Y",24];k.Y.toString=r;k.Y.__enum__=k;k.Z=["Z",25];k.Z.toString=r;k.Z.__enum__=k;k.Number0=["Number0",26];k.Number0.toString=r;k.Number0.__enum__=k;k.Number1=["Number1",27];k.Number1.toString=r;k.Number1.__enum__=k;k.Number2=["Number2",28];k.Number2.toString=r;k.Number2.__enum__=k;k.Number3=["Number3",29];k.Number3.toString=r;k.Number3.__enum__=k;k.Number4=["Number4",30];k.Number4.toString=r;k.Number4.__enum__=k;k.Number5=["Number5",31];k.Number5.toString=r;k.Number5.__enum__=
k;k.Number6=["Number6",32];k.Number6.toString=r;k.Number6.__enum__=k;k.Number7=["Number7",33];k.Number7.toString=r;k.Number7.__enum__=k;k.Number8=["Number8",34];k.Number8.toString=r;k.Number8.__enum__=k;k.Number9=["Number9",35];k.Number9.toString=r;k.Number9.__enum__=k;k.Numpad0=["Numpad0",36];k.Numpad0.toString=r;k.Numpad0.__enum__=k;k.Numpad1=["Numpad1",37];k.Numpad1.toString=r;k.Numpad1.__enum__=k;k.Numpad2=["Numpad2",38];k.Numpad2.toString=r;k.Numpad2.__enum__=k;k.Numpad3=["Numpad3",39];k.Numpad3.toString=
r;k.Numpad3.__enum__=k;k.Numpad4=["Numpad4",40];k.Numpad4.toString=r;k.Numpad4.__enum__=k;k.Numpad5=["Numpad5",41];k.Numpad5.toString=r;k.Numpad5.__enum__=k;k.Numpad6=["Numpad6",42];k.Numpad6.toString=r;k.Numpad6.__enum__=k;k.Numpad7=["Numpad7",43];k.Numpad7.toString=r;k.Numpad7.__enum__=k;k.Numpad8=["Numpad8",44];k.Numpad8.toString=r;k.Numpad8.__enum__=k;k.Numpad9=["Numpad9",45];k.Numpad9.toString=r;k.Numpad9.__enum__=k;k.NumpadAdd=["NumpadAdd",46];k.NumpadAdd.toString=r;k.NumpadAdd.__enum__=k;k.NumpadDecimal=
["NumpadDecimal",47];k.NumpadDecimal.toString=r;k.NumpadDecimal.__enum__=k;k.NumpadDivide=["NumpadDivide",48];k.NumpadDivide.toString=r;k.NumpadDivide.__enum__=k;k.NumpadEnter=["NumpadEnter",49];k.NumpadEnter.toString=r;k.NumpadEnter.__enum__=k;k.NumpadMultiply=["NumpadMultiply",50];k.NumpadMultiply.toString=r;k.NumpadMultiply.__enum__=k;k.NumpadSubtract=["NumpadSubtract",51];k.NumpadSubtract.toString=r;k.NumpadSubtract.__enum__=k;k.F1=["F1",52];k.F1.toString=r;k.F1.__enum__=k;k.F2=["F2",53];k.F2.toString=
r;k.F2.__enum__=k;k.F3=["F3",54];k.F3.toString=r;k.F3.__enum__=k;k.F4=["F4",55];k.F4.toString=r;k.F4.__enum__=k;k.F5=["F5",56];k.F5.toString=r;k.F5.__enum__=k;k.F6=["F6",57];k.F6.toString=r;k.F6.__enum__=k;k.F7=["F7",58];k.F7.toString=r;k.F7.__enum__=k;k.F8=["F8",59];k.F8.toString=r;k.F8.__enum__=k;k.F9=["F9",60];k.F9.toString=r;k.F9.__enum__=k;k.F10=["F10",61];k.F10.toString=r;k.F10.__enum__=k;k.F11=["F11",62];k.F11.toString=r;k.F11.__enum__=k;k.F12=["F12",63];k.F12.toString=r;k.F12.__enum__=k;k.F13=
["F13",64];k.F13.toString=r;k.F13.__enum__=k;k.F14=["F14",65];k.F14.toString=r;k.F14.__enum__=k;k.F15=["F15",66];k.F15.toString=r;k.F15.__enum__=k;k.Left=["Left",67];k.Left.toString=r;k.Left.__enum__=k;k.Up=["Up",68];k.Up.toString=r;k.Up.__enum__=k;k.Right=["Right",69];k.Right.toString=r;k.Right.__enum__=k;k.Down=["Down",70];k.Down.toString=r;k.Down.__enum__=k;k.Alt=["Alt",71];k.Alt.toString=r;k.Alt.__enum__=k;k.Backquote=["Backquote",72];k.Backquote.toString=r;k.Backquote.__enum__=k;k.Backslash=
["Backslash",73];k.Backslash.toString=r;k.Backslash.__enum__=k;k.Backspace=["Backspace",74];k.Backspace.toString=r;k.Backspace.__enum__=k;k.CapsLock=["CapsLock",75];k.CapsLock.toString=r;k.CapsLock.__enum__=k;k.Comma=["Comma",76];k.Comma.toString=r;k.Comma.__enum__=k;k.Command=["Command",77];k.Command.toString=r;k.Command.__enum__=k;k.Control=["Control",78];k.Control.toString=r;k.Control.__enum__=k;k.Delete=["Delete",79];k.Delete.toString=r;k.Delete.__enum__=k;k.End=["End",80];k.End.toString=r;k.End.__enum__=
k;k.Enter=["Enter",81];k.Enter.toString=r;k.Enter.__enum__=k;k.Equals=["Equals",82];k.Equals.toString=r;k.Equals.__enum__=k;k.Escape=["Escape",83];k.Escape.toString=r;k.Escape.__enum__=k;k.Home=["Home",84];k.Home.toString=r;k.Home.__enum__=k;k.Insert=["Insert",85];k.Insert.toString=r;k.Insert.__enum__=k;k.LeftBracket=["LeftBracket",86];k.LeftBracket.toString=r;k.LeftBracket.__enum__=k;k.Minus=["Minus",87];k.Minus.toString=r;k.Minus.__enum__=k;k.PageDown=["PageDown",88];k.PageDown.toString=r;k.PageDown.__enum__=
k;k.PageUp=["PageUp",89];k.PageUp.toString=r;k.PageUp.__enum__=k;k.Period=["Period",90];k.Period.toString=r;k.Period.__enum__=k;k.Quote=["Quote",91];k.Quote.toString=r;k.Quote.__enum__=k;k.RightBracket=["RightBracket",92];k.RightBracket.toString=r;k.RightBracket.__enum__=k;k.Semicolon=["Semicolon",93];k.Semicolon.toString=r;k.Semicolon.__enum__=k;k.Shift=["Shift",94];k.Shift.toString=r;k.Shift.__enum__=k;k.Slash=["Slash",95];k.Slash.toString=r;k.Slash.__enum__=k;k.Space=["Space",96];k.Space.toString=
r;k.Space.__enum__=k;k.Tab=["Tab",97];k.Tab.toString=r;k.Tab.__enum__=k;k.Menu=["Menu",98];k.Menu.toString=r;k.Menu.__enum__=k;k.Search=["Search",99];k.Search.toString=r;k.Search.__enum__=k;k.Unknown=function(a){a=["Unknown",100,a];a.__enum__=k;a.toString=r;return a};var jn=function(){this.init(0,null)};i["flambe.input.KeyboardEvent"]=jn;jn.__name__=["flambe","input","KeyboardEvent"];jn.prototype={init:function(a,b){this.id=a;this.key=b},__class__:jn};var Dd=i["flambe.input.MouseButton"]={__ename__:["flambe",
"input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};Dd.Left=["Left",0];Dd.Left.toString=r;Dd.Left.__enum__=Dd;Dd.Middle=["Middle",1];Dd.Middle.toString=r;Dd.Middle.__enum__=Dd;Dd.Right=["Right",2];Dd.Right.toString=r;Dd.Right.__enum__=Dd;Dd.Unknown=function(a){a=["Unknown",3,a];a.__enum__=Dd;a.toString=r;return a};var Wg=i["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};Wg.Default=["Default",0];Wg.Default.toString=
r;Wg.Default.__enum__=Wg;Wg.Button=["Button",1];Wg.Button.toString=r;Wg.Button.__enum__=Wg;Wg.None=["None",2];Wg.None.toString=r;Wg.None.__enum__=Wg;var kn=function(){this.init(0,0,0,null)};i["flambe.input.MouseEvent"]=kn;kn.__name__=["flambe","input","MouseEvent"];kn.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:kn};var dl=i["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};dl.Mouse=function(a){a=
["Mouse",0,a];a.__enum__=dl;a.toString=r;return a};dl.Touch=function(a){a=["Touch",1,a];a.__enum__=dl;a.toString=r;return a};var ln=function(){this.init(0,0,0,null,null)};i["flambe.input.PointerEvent"]=ln;ln.__name__=["flambe","input","PointerEvent"];ln.prototype={init:function(a,b,c,d,e){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._stopped=!1},__class__:ln};var mn=function(a){this.id=a;this._source=dl.Touch(this)};i["flambe.input.TouchPoint"]=mn;mn.__name__=["flambe","input",
"TouchPoint"];mn.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:mn};var nn=function(){};i["flambe.math.FMath"]=nn;nn.__name__=["flambe","math","FMath"];nn.clamp=function(a,b,c){return a<b?b:a>c?c:a};var Dg=function(){this.identity()};i["flambe.math.Matrix"]=Dg;Dg.__name__=["flambe","math","Matrix"];Dg.multiply=function(a,b,c){null==c&&(c=new Dg);var d=a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,f=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=d;c.m01=e;c.m02=f;d=a.m10*b.m00+a.m11*b.m10;
e=a.m10*b.m01+a.m11*b.m11;f=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=e;c.m12=f;return c};Dg.prototype={set:function(a,b,c,d,e,f){this.m00=a;this.m01=c;this.m02=e;this.m10=b;this.m11=d;this.m12=f},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,e){var f=Math.sin(e),e=Math.cos(e);this.set(e*c,f*c,-f*d,e*d,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,
b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},__class__:Dg};var fn=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};i["flambe.math.Rectangle"]=fn;fn.__name__=["flambe","math","Rectangle"];fn.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<
a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},__class__:fn};var Re=function(){this._disposed=!1};i["flambe.platform.BasicAsset"]=Re;Re.__name__=["flambe","platform","BasicAsset"];Re.__interfaces__=[Ai];Re.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){},__class__:Re};var Ci=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new el;this._bytesLoaded=
new $c;this._pack=new fl(b,this);var d=Mk.array(b);if(0==d.length)this.handleSuccess();else{for(var e=new $c,f=0;f<d.length;){var g=d[f];++f;var j=g.name,j=null!=K[j]?e.getReserved(j):e.h[j];if(null==j){var j=[],p=g.name;null!=K[p]?e.setReserved(p,j):e.h[p]=j}j.push(g)}this._assetsRemaining=Mk.count(e);for(d=new se(e,e.arrayKeys());d.hasNext();)e=[d.next()],this.pickBestEntry(e[0],function(a){return function(d){if(null!=d){var e=b.getFullURL(d);try{c.loadEntry(e,d)}catch(f){f instanceof h&&(f=f.val),
c.handleError(d,"Unexpected error: "+L.string(f))}e=c.promise;e.set_total(e._total+d.bytes)}else d=a[0][0],Ci.isAudio(d.format)?(e=dg.getInstance(),c.handleLoad(d,e)):c.handleError(d,"Could not find a supported format to load")}}(e))}};i["flambe.platform.BasicAssetPackLoader"]=Ci;Ci.__name__=["flambe","platform","BasicAssetPackLoader"];Ci.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};Ci.prototype={onDisposed:function(){},pickBestEntry:function(a,
b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var f=0;f<a.length;){var g=a[f];++f;if(g.format==e){b(g);return}}}b(null)})},loadEntry:function(){},getAssetFormats:function(){},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}var d=a.name;
null!=K[d]?c.setReserved(d,b):c.h[d]=b;this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){var c=a.name,d=this._bytesLoaded;null!=K[c]?d.setReserved(c,b):d.h[c]=b;c=0;d=this._bytesLoaded;for(d=new se(d,d.arrayKeys());d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(Ze.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,
"Failed to create texture. Is the GPU context unavailable?")},__class__:Ci};var fl=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new $c;this.sounds=new $c;this.files=new $c};i["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=fl;fl.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];fl.__interfaces__=[al];fl.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures,c=null!=K[a]?c.getReserved(a):c.h[a];if(null==c&&b)throw new h(Ze.withFields("Missing texture",
["name",a]));return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds,c=null!=K[a]?c.getReserved(a):c.h[a];if(null==c&&b)throw new h(Ze.withFields("Missing sound",["name",a]));return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files,c=null!=K[a]?c.getReserved(a):c.h[a];if(null==c&&b)throw new h(Ze.withFields("Missing file",["name",a]));return c},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures,a=new se(a,a.arrayKeys());a.hasNext();)a.next().dispose();
this.textures=null;a=this.sounds;for(a=new se(a,a.arrayKeys());a.hasNext();)a.next().dispose();this.sounds=null;a=this.files;for(a=new se(a,a.arrayKeys());a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},get_manifest:function(){return this._manifest},__class__:fl,__properties__:{get_manifest:"get_manifest"}};var ck=function(a){this._disposed=!1;this._content=a};i["flambe.platform.BasicFile"]=ck;ck.__name__=["flambe","platform","BasicFile"];ck.__interfaces__=[bl];ck.__super__=
Re;ck.prototype=z(Re.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:ck});var on=function(){};i["flambe.subsystem.KeyboardSystem"]=on;on.__name__=["flambe","subsystem","KeyboardSystem"];on.prototype={__class__:on};var Pg=function(){this.down=new hc;this.up=new hc;this.backButton=new dj;this._keyStates=new Ke};i["flambe.platform.BasicKeyboard"]=Pg;Pg.__name__=["flambe","platform","BasicKeyboard"];Pg.__interfaces__=[on];Pg.prototype={isDown:function(a){return this._keyStates.exists(dk.toKeyCode(a))},
submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.h[a]=!0,Pg._sharedEvent.init(Pg._sharedEvent.id+1,dk.toKey(a)),this.down.emit(Pg._sharedEvent));return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),Pg._sharedEvent.init(Pg._sharedEvent.id+1,dk.toKey(a)),this.up.emit(Pg._sharedEvent))},__class__:Pg};var pn=function(){};i["flambe.subsystem.MouseSystem"]=pn;pn.__name__=["flambe",
"subsystem","MouseSystem"];pn.prototype={__class__:pn};var Wc=function(a){this._pointer=a;this._source=dl.Mouse(Wc._sharedEvent);this.down=new hc;this.move=new hc;this.up=new hc;this.scroll=new hc;this._y=this._x=0;this._cursor=Wg.Default;this._buttonStates=new Ke};i["flambe.platform.BasicMouse"]=Wc;Wc.__name__=["flambe","platform","BasicMouse"];Wc.__interfaces__=[pn];Wc.prototype={submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.h[c]=!0,this.prepare(a,b,qn.toButton(c)),
this._pointer.submitDown(a,b,this._source),this.down.emit(Wc._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(Wc._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,qn.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(Wc._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},
prepare:function(a,b,c){this._x=a;this._y=b;Wc._sharedEvent.init(Wc._sharedEvent.id+1,a,b,c)},__class__:Wc};var rn=function(){};i["flambe.subsystem.PointerSystem"]=rn;rn.__name__=["flambe","subsystem","PointerSystem"];rn.prototype={__class__:rn,__properties__:{get_y:"get_y",get_x:"get_x"}};var ig=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new hc;this.move=new hc;this.up=new hc;this._x=a;this._y=b;this._isDown=c};i["flambe.platform.BasicPointer"]=ig;ig.__name__=["flambe",
"platform","BasicPointer"];ig.__interfaces__=[rn];ig.prototype={get_x:function(){return this._x},get_y:function(){return this._y},submitDown:function(a,b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var d=[],e=le.hitTest(ma.root,a,b);if(null!=e)for(var f=e.owner;;){var g=f._compMap.Sprite_1;null!=g&&d.push(g);f=f.parent;if(null==f)break}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerDown(ig._sharedEvent),ig._sharedEvent._stopped)return;this.down.emit(ig._sharedEvent)}},
submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],e=le.hitTest(ma.root,a,b);if(null!=e)for(var f=e.owner;;){var g=f._compMap.Sprite_1;null!=g&&d.push(g);f=f.parent;if(null==f)break}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerMove(ig._sharedEvent),ig._sharedEvent._stopped)return;this.move.emit(ig._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var d=[],e=le.hitTest(ma.root,a,b);if(null!=e)for(var f=e.owner;;){var g=
f._compMap.Sprite_1;null!=g&&d.push(g);f=f.parent;if(null==f)break}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(ig._sharedEvent),ig._sharedEvent._stopped)return;this.up.emit(ig._sharedEvent)}},prepare:function(a,b,c,d){this._x=a;this._y=b;ig._sharedEvent.init(ig._sharedEvent.id+1,a,b,c,d)},__class__:ig,__properties__:{get_y:"get_y",get_x:"get_x"}};var Di=function(a,b,c){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;
this._height=c};i["flambe.platform.BasicTexture"]=Di;Di.__name__=["flambe","platform","BasicTexture"];Di.__interfaces__=[fp];Di.__super__=Re;Di.prototype=z(Re.prototype,{subTexture:function(a,b,c,d){c=this.root.createTexture(c,d);c._parent=this;c._x=a;c._y=b;c.rootX=this.rootX+a;c.rootY=this.rootY+b;return c},get_graphics:function(){return this.root.getGraphics()},onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},
__class__:Di,__properties__:{get_height:"get_height",get_width:"get_width",get_graphics:"get_graphics"}});var gl=function(){};i["flambe.subsystem.TouchSystem"]=gl;gl.__name__=["flambe","subsystem","TouchSystem"];gl.prototype={__class__:gl,__properties__:{get_supported:"get_supported"}};var Yk=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new Ke;this._points=[];this.down=new hc;this.move=new hc;this.up=new hc};i["flambe.platform.BasicTouch"]=Yk;Yk.__name__=["flambe",
"platform","BasicTouch"];Yk.__interfaces__=[gl];Yk.prototype={get_supported:function(){return!0},submitDown:function(a,b,c){if(!this._pointMap.h.hasOwnProperty(a)){var d=new mn(a);d.init(b,c);this._pointMap.h[a]=d;this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.h[a];null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,
b,c){var d=this._pointMap.h[a];null!=d&&(d.init(b,c),this._pointMap.remove(a),Z.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit(d))},__class__:Yk,__properties__:{get_supported:"get_supported"}};var ej=function(){};i["flambe.sound.Sound"]=ej;ej.__name__=["flambe","sound","Sound"];ej.__interfaces__=[Ai];ej.prototype={__class__:ej};var dg=function(){this._disposed=!1;this._playback=new hl(this)};i["flambe.platform.DummySound"]=
dg;dg.__name__=["flambe","platform","DummySound"];dg.__interfaces__=[ej];dg.getInstance=function(){null==dg._instance&&(dg._instance=new dg);return dg._instance};dg.__super__=Re;dg.prototype=z(Re.prototype,{play:function(){return this._playback},loop:function(){return this._playback},onDisposed:function(){},__class__:dg});var fj=function(){};i["flambe.sound.Playback"]=fj;fj.__name__=["flambe","sound","Playback"];fj.__interfaces__=[Hh];fj.prototype={__class__:fj,__properties__:{get_complete:"get_complete"}};
var hl=function(a){this._sound=a;this.volume=new $f(0);this._complete=new Cg(!0)};i["flambe.platform.DummyPlayback"]=hl;hl.__name__=["flambe","platform","DummyPlayback"];hl.__interfaces__=[fj];hl.prototype={get_complete:function(){return this._complete},dispose:function(){},__class__:hl,__properties__:{get_complete:"get_complete"}};var Zk=function(){this.down=new hc;this.move=new hc;this.up=new hc};i["flambe.platform.DummyTouch"]=Zk;Zk.__name__=["flambe","platform","DummyTouch"];Zk.__interfaces__=
[gl];Zk.prototype={get_supported:function(){return!1},__class__:Zk,__properties__:{get_supported:"get_supported"}};var ek=function(){this._entries=[]};i["flambe.platform.EventGroup"]=ek;ek.__name__=["flambe","platform","EventGroup"];ek.__interfaces__=[Hh];ek.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new sn(a,b,c))},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<
b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:ek};var sn=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};i["flambe.platform._EventGroup.Entry"]=sn;sn.__name__=["flambe","platform","_EventGroup","Entry"];sn.prototype={__class__:sn};var il=function(){};i["flambe.platform.InternalGraphics"]=il;il.__name__=["flambe","platform","InternalGraphics"];il.__interfaces__=[hn];il.prototype={__class__:il};var tn=function(){};i["flambe.subsystem.RendererSystem"]=
tn;tn.__name__=["flambe","subsystem","RendererSystem"];tn.prototype={__class__:tn,__properties__:{get_type:"get_type"}};var jl=function(){};i["flambe.platform.InternalRenderer"]=jl;jl.__name__=["flambe","platform","InternalRenderer"];jl.__interfaces__=[tn];jl.prototype={__class__:jl};var dk=function(){};i["flambe.platform.KeyCodes"]=dk;dk.__name__=["flambe","platform","KeyCodes"];dk.toKey=function(a){switch(a){case 8:return k.Backspace;case 9:return k.Tab;case 13:return k.Enter;case 15:return k.Command;
case 16:return k.Shift;case 17:return k.Control;case 18:return k.Alt;case 20:return k.CapsLock;case 27:return k.Escape;case 32:return k.Space;case 33:return k.PageUp;case 34:return k.PageDown;case 35:return k.End;case 36:return k.Home;case 37:return k.Left;case 38:return k.Up;case 39:return k.Right;case 40:return k.Down;case 45:return k.Insert;case 46:return k.Delete;case 48:return k.Number0;case 49:return k.Number1;case 50:return k.Number2;case 51:return k.Number3;case 52:return k.Number4;case 53:return k.Number5;
case 54:return k.Number6;case 55:return k.Number7;case 56:return k.Number8;case 57:return k.Number9;case 65:return k.A;case 66:return k.B;case 67:return k.C;case 68:return k.D;case 69:return k.E;case 70:return k.F;case 71:return k.G;case 72:return k.H;case 73:return k.I;case 74:return k.J;case 75:return k.K;case 76:return k.L;case 77:return k.M;case 78:return k.N;case 79:return k.O;case 80:return k.P;case 81:return k.Q;case 82:return k.R;case 83:return k.S;case 84:return k.T;case 85:return k.U;case 86:return k.V;
case 87:return k.W;case 88:return k.X;case 89:return k.Y;case 90:return k.Z;case 96:return k.Numpad0;case 97:return k.Numpad1;case 98:return k.Numpad2;case 99:return k.Numpad3;case 100:return k.Numpad4;case 101:return k.Numpad5;case 102:return k.Numpad6;case 103:return k.Numpad7;case 104:return k.Numpad8;case 105:return k.Numpad9;case 106:return k.NumpadMultiply;case 107:return k.NumpadAdd;case 108:return k.NumpadEnter;case 109:return k.NumpadSubtract;case 110:return k.NumpadDecimal;case 111:return k.NumpadDivide;
case 112:return k.F1;case 113:return k.F2;case 114:return k.F3;case 115:return k.F4;case 116:return k.F5;case 117:return k.F6;case 118:return k.F7;case 119:return k.F8;case 120:return k.F9;case 121:return k.F10;case 122:return k.F11;case 123:return k.F12;case 186:return k.Semicolon;case 187:return k.Equals;case 188:return k.Comma;case 189:return k.Minus;case 190:return k.Period;case 191:return k.Slash;case 192:return k.Backquote;case 219:return k.LeftBracket;case 220:return k.Backslash;case 221:return k.RightBracket;
case 222:return k.Quote;case 16777234:return k.Menu;case 16777247:return k.Search}return k.Unknown(a)};dk.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;
case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;
case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;
case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};var Zi=function(){this._tickables=
[]};i["flambe.platform.MainLoop"]=Zi;Zi.__name__=["flambe","platform","MainLoop"];Zi.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_3;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var d=c.next;0==(c._flags&1)&&(c._flags|=1,c.onStart());c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,Zi.updateEntity(c,b),c=d};Zi.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];
null==c||c.update(a)?this._tickables.splice(b,1):++b}ma.volume.update(a);Zi.updateEntity(ma.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),le.render(ma.root,b),a.didRender())},addTickable:function(a){this._tickables.push(a)},__class__:Zi};var qn=function(){};i["flambe.platform.MouseCodes"]=qn;qn.__name__=["flambe","platform","MouseCodes"];qn.toButton=function(a){switch(a){case 0:return Dd.Left;case 1:return Dd.Middle;case 2:return Dd.Right}return Dd.Unknown(a)};var un=function(){};
i["flambe.platform.TextureRoot"]=un;un.__name__=["flambe","platform","TextureRoot"];un.prototype={__class__:un};var kl=function(){};i["flambe.platform.Tickable"]=kl;kl.__name__=["flambe","platform","Tickable"];kl.prototype={__class__:kl};var tg=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};i["flambe.platform.html.CanvasGraphics"]=tg;tg.__name__=["flambe","platform","html","CanvasGraphics"];tg.__interfaces__=[il];tg.prototype={save:function(){this._canvasCtx.save()},
translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},scale:function(a,b){this._canvasCtx.scale(a,b)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},transform:function(a,b,c,d,e,f){this._canvasCtx.transform(a,b,c,d,e,f)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,f,g){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",
this.drawSubTexture(a,b,c,d,e,f,g),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+d|0,a.rootY+e|0,f|0,g|0,b|0,c|0,f|0,g|0)},fillRect:function(a,b,c,d,e){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+L.string(a);this._canvasCtx.fillStyle="#"+L.string(a);this._canvasCtx.fillRect(b|
0,c|0,d|0,e|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setAlpha:function(a){this._canvasCtx.globalAlpha=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=
!0},didRender:function(){},__class__:tg};var $i=function(a){this.graphics=new tg(a,!1);this._hasGPU=new Cg(!0)};i["flambe.platform.html.CanvasRenderer"]=$i;$i.__name__=["flambe","platform","html","CanvasRenderer"];$i.__interfaces__=[jl];$i.prototype={get_type:function(){return jg.Canvas},createTextureFromImage:function(a){a=new gj($i.CANVAS_TEXTURES?nb.createCanvas(a):a);return a.createTexture(a.width,a.height)},createTexture:function(a,b){return(new gj(nb.createEmptyCanvas(a,b))).createTexture(a,
b)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:$i,__properties__:{get_type:"get_type"}};var ll=function(a,b,c){Di.call(this,a,b,c)};i["flambe.platform.html.CanvasTexture"]=ll;ll.__name__=["flambe","platform","html","CanvasTexture"];ll.__super__=Di;ll.prototype=z(Di.prototype,{__class__:ll});var gj=function(a){this._graphics=null;this.updateCount=
0;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};i["flambe.platform.html.CanvasTextureRoot"]=gj;gj.__name__=["flambe","platform","html","CanvasTextureRoot"];gj.__interfaces__=[un];gj.__super__=Re;gj.prototype=z(Re.prototype,{createTexture:function(a,b){return new ll(this,a,b)},getGraphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new ml(this));return this._graphics},getContext2d:function(){y.__instanceof(this.image,HTMLCanvasElement)||(this.image=
nb.createCanvas(this.image));return this.image.getContext("2d",null)},onDisposed:function(){this._graphics=this.image=null},__class__:gj});var ml=function(a){tg.call(this,a.image,!0);this._renderTarget=a};i["flambe.platform.html._CanvasTextureRoot.InternalGraphics"]=ml;ml.__name__=["flambe","platform","html","_CanvasTextureRoot","InternalGraphics"];ml.__super__=tg;ml.prototype=z(tg.prototype,{drawTexture:function(a,b,c){tg.prototype.drawTexture.call(this,a,b,c);++this._renderTarget.updateCount},drawSubTexture:function(a,
b,c,d,e,f,g){tg.prototype.drawSubTexture.call(this,a,b,c,d,e,f,g);++this._renderTarget.updateCount},fillRect:function(a,b,c,d,e){tg.prototype.fillRect.call(this,a,b,c,d,e);++this._renderTarget.updateCount},__class__:ml});var Tc=function(a,b){Ci.call(this,a,b)};i["flambe.platform.html.HtmlAssetPackLoader"]=Tc;Tc.__name__=["flambe","platform","html","HtmlAssetPackLoader"];Tc.detectImageFormats=function(a){var b=[ca.PNG,ca.JPG,ca.GIF],c=2,d=window.document.createElement("img");d.onload=d.onerror=function(){1==
d.width&&b.unshift(ca.WEBP);c-=1;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&b.unshift(ca.JXR);c-=1;0==c&&a(b)};e.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};Tc.detectAudioFormats=function(){var a=window.document.createElement("audio");
if(null==a||null==v(a,a.canPlayType))return[];var b=new Ng("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!Uc.get_supported()&&b.match(c))return[];for(var b=[{format:ca.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:ca.MP3,mimeType:"audio/mpeg"},{format:ca.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:ca.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:ca.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var e=b[d];++d;var f="";try{f=a.canPlayType(e.mimeType)}catch(g){}""!=
f&&c.push(e.format)}return c};Tc.supportsBlob=function(){if(Tc._detectBlobSupport){Tc._detectBlobSupport=!1;if((new Ng("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;Tc._URL=nb.loadExtension("URL").value}return null!=Tc._URL?null!=Tc._URL.createObjectURL:!1};Tc.__super__=Ci;Tc.prototype=z(Ci.prototype,{loadEntry:function(a,b){var c=
this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d=window.document.createElement("img"),e=new ek;e.addDisposingListener(d,"load",function(){Tc.supportsBlob()&&Tc._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});Tc.supportsBlob()?this.download(a,b,"blob",function(a){d.src=Tc._URL.createObjectURL(a)}):d.src=a;break;
case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(Uc.get_supported())this.download(a,b,"arraybuffer",function(a){Uc.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new Uc(a))},function(){var a=dg.getInstance();c.handleLoad(b,a)})});else{var f=window.document.createElement("audio");f.preload="auto";var g=++Tc._mediaRefCount;
null==Tc._mediaElements&&(Tc._mediaElements=new Ke);Tc._mediaElements.set(g,f);e=new ek;e.addDisposingListener(f,"canplaythrough",function(){Tc._mediaElements.remove(g);c.handleLoad(b,new fk(f))});e.addDisposingListener(f,"error",function(){Tc._mediaElements.remove(g);var a=f.error.code;3==a||4==a?(a=dg.getInstance(),c.handleLoad(b,a)):c.handleError(b,"Failed to load audio: "+f.error.code)});e.addListener(f,"progress",function(){if(0<f.buffered.length&&0<f.duration){var a=f.buffered.end(0)/f.duration;
c.handleProgress(b,a*b.bytes|0)}});f.src=a;f.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new ck(a))})}},getAssetFormats:function(a){var b=this;null==Tc._supportedFormats&&(Tc._supportedFormats=new el,Tc.detectImageFormats(function(a){Tc._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(Tc.detectAudioFormats()).concat([ca.Data]))}));Tc._supportedFormats.get(a)},download:function(a,b,c,d){var e=this,f=null,g=null,j=0,p=
!1,h=function(){p&&(p=!1,window.clearInterval(j))},i=3,k=function(){i-=1;return 0<=i?(g(),!0):!1},g=function(){h();null!=f&&f.abort();f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType=c;var g=0;f.onprogress=function(a){p||(p=!0,j=window.setInterval(function(){4!=f.readyState&&5E3<Date.now()-g&&!k()&&(h(),e.handleError(b,"Download stalled"))},1E3));g=Date.now();e.handleProgress(b,a.loaded)};f.onerror=function(){if(0!=f.status||!k())h(),e.handleError(b,"HTTP error "+f.status)};f.onload=function(){var a=
f.response;null==a&&(a=f.responseText);h();d(a)};f.send()};g()},__class__:Tc});var Xk=function(a,b){Wc.call(this,a);this._canvas=b};i["flambe.platform.html.HtmlMouse"]=Xk;Xk.__name__=["flambe","platform","html","HtmlMouse"];Xk.__super__=Wc;Xk.prototype=z(Wc.prototype,{__class__:Xk});var fk=function(a){this._disposed=!1;this.audioElement=a};i["flambe.platform.html.HtmlSound"]=fk;fk.__name__=["flambe","platform","html","HtmlSound"];fk.__interfaces__=[ej];fk.__super__=Re;fk.prototype=z(Re.prototype,
{play:function(a){null==a&&(a=1);return new gk(this,a,!1)},loop:function(a){null==a&&(a=1);return new gk(this,a,!0)},onDisposed:function(){this.audioElement=null},__class__:fk});var gk=function(a,b,c){var d=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new $f(b,function(){d.updateVolume()});this.updateVolume();this._complete=new Cg(!1);this.playAudio();ma.hidden._value&&
this.set_paused(!0)};i["flambe.platform.html._HtmlSound.HtmlPlayback"]=gk;gk.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];gk.__interfaces__=[kl,fj];gk.prototype={set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},get_complete:function(){return this._complete},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=
!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(di.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=ma.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=ma.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},
updateVolume:function(){this._clonedElement.volume=ma.volume._value*this.volume._value},__class__:gk,__properties__:{get_complete:"get_complete",set_paused:"set_paused"}};var vn=function(){};i["flambe.subsystem.StageSystem"]=vn;vn.__name__=["flambe","subsystem","StageSystem"];vn.prototype={__class__:vn,__properties__:{get_height:"get_height",get_width:"get_width"}};var yi=function(a){var b=this;this._canvas=a;this.resize=new dj;this.scaleFactor=yi.computeScaleFactor();1!=this.scaleFactor&&(nb.setVendorStyle(this._canvas,
"transform-origin","top left"),nb.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));nb.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){nb.callLater(v(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",v(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new Cg(null);null!=window.orientation&&(window.addEventListener("orientationchange",v(this,this.onOrientationChange),!1),this.onOrientationChange(null));
this.fullscreen=new Cg(!1);nb.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};i["flambe.platform.html.HtmlStage"]=yi;yi.__name__=["flambe","platform","html","HtmlStage"];yi.__interfaces__=[vn];yi.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d",null),b=nb.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;
return 1136<a*window.screen.width||1136<a*b?1:a};yi.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},requestResize:function(a,b){if(this.resizeCanvas(a,b)){var c=this._canvas.parentElement;c.style.width=a+"px";c.style.height=b+"px"}},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==
c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=L.string(window.innerHeight+100)+"px";b.width=L.string(window.innerWidth)+"px";b.overflow="visible";nb.callLater(function(){nb.hideMobileBrowser();nb.callLater(function(){b.height=L.string(window.innerHeight)+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(nb.orientation(window.orientation))},
updateFullscreen:function(){this.fullscreen.set__(!0==nb.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:yi,__properties__:{get_height:"get_height",get_width:"get_width"}};var nb=function(){};i["flambe.platform.html.HtmlUtil"]=nb;nb.__name__=["flambe","platform","html","HtmlUtil"];nb.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};nb.hideMobileBrowser=function(){window.scrollTo(1,0)};nb.loadExtension=function(a,b){null==b&&(b=window);
var c=t.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+Z.substr(a,1,null),d=0,e=nb.VENDOR_PREFIXES;d<e.length;){var f=e[d];++d;var g=f+c,j=t.field(b,g);if(null!=j)return{prefix:f,field:g,value:j}}return{prefix:null,field:null,value:null}};nb.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=nb.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};nb.polyfill=function(a,b){null==b&&(b=window);var c=
nb.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};nb.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,e=nb.VENDOR_PREFIXES;d<e.length;){var f=e[d];++d;a.setProperty("-"+f+"-"+b,c)}a.setProperty(b,c)};nb.addVendorListener=function(a,b,c,d){for(var e=0,f=nb.VENDOR_PREFIXES;e<f.length;){var g=f[e];++e;a.addEventListener(g+b,c,d)}a.addEventListener(b,c,d)};nb.orientation=function(a){switch(a){case -90:case 90:return ei.Landscape;default:return ei.Portrait}};nb.createEmptyCanvas=function(a,
b){var c=window.document.createElement("canvas");c.width=a;c.height=b;return c};nb.createCanvas=function(a){var b=nb.createEmptyCanvas(a.width,a.height),c=b.getContext("2d",null);c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};nb.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var Uc=function(a){this._disposed=
!1;this.buffer=a};i["flambe.platform.html.WebAudioSound"]=Uc;Uc.__name__=["flambe","platform","html","WebAudioSound"];Uc.__interfaces__=[ej];Uc.__properties__={get_supported:"get_supported"};Uc.get_supported=function(){if(Uc._detectSupport){Uc._detectSupport=!1;var a=nb.loadExtension("AudioContext").value;null!=a&&(Uc.ctx=new a,Uc.gain=Uc.createGain(),Uc.gain.connect(Uc.ctx.destination),ma.volume.watch(function(a){Uc.gain.gain.value=a}))}return null!=Uc.ctx};Uc.createGain=function(){return null!=
Uc.ctx.createGain?Uc.ctx.createGain():Uc.ctx.createGainNode()};Uc.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};Uc.__super__=Re;Uc.prototype=z(Re.prototype,{play:function(a){null==a&&(a=1);return new hk(this,a,!1)},loop:function(a){null==a&&(a=1);return new hk(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:Uc,__properties__:{get_duration:"get_duration"}});var hk=function(a,b,c){var d=this;this._sound=a;this._head=Uc.gain;
this._complete=new Cg(!1);this._sourceNode=Uc.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.onended=function(){d._complete.set__(!0)};Uc.start(this._sourceNode,0);this.playAudio();this.volume=new $f(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b);ma.hidden._value&&this.set_paused(!0)};i["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=hk;hk.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];hk.__interfaces__=
[kl,fj];hk.prototype={set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_complete:function(){return this._complete},get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(Uc.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||
0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=Uc.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=
Uc.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(di.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=ma.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:hk,__properties__:{get_position:"get_position",get_complete:"get_complete",set_paused:"set_paused"}};var wn=function(){this._transitor=null};i["flambe.scene.Director"]=wn;wn.__name__=["flambe","scene","Director"];wn.__super__=de;
wn.prototype=z(de.prototype,{get_name:function(){return"Director_2"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},show:function(a){a=a._compMap.Scene_4;
null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_4;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},__class__:wn,__properties__:z(de.prototype.__properties__,{get_topScene:"get_topScene"})});
var gp=function(){};i["flambe.scene._Director.Transitor"]=gp;gp.__name__=["flambe","scene","_Director","Transitor"];gp.prototype={update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:gp};var xn=function(){};i["flambe.scene.Scene"]=xn;xn.__name__=["flambe","scene","Scene"];xn.__super__=de;xn.prototype=z(de.prototype,{get_name:function(){return"Scene_4"},__class__:xn});var hp=function(){};i["flambe.scene.Transition"]=hp;
hp.__name__=["flambe","scene","Transition"];hp.prototype={update:function(){return!0},complete:function(){},__class__:hp};var jg=i["flambe.subsystem.RendererType"]={__ename__:["flambe","subsystem","RendererType"],__constructs__:["Stage3D","WebGL","Canvas"]};jg.Stage3D=["Stage3D",0];jg.Stage3D.toString=r;jg.Stage3D.__enum__=jg;jg.WebGL=["WebGL",1];jg.WebGL.toString=r;jg.WebGL.__enum__=jg;jg.Canvas=["Canvas",2];jg.Canvas.toString=r;jg.Canvas.__enum__=jg;var yn=function(){};i["flambe.swf.Symbol"]=yn;
yn.__name__=["flambe","swf","Symbol"];var nl=function(a,b){this._name=a.symbol;var c=a.rect;this.texture=b.subTexture(c[0],c[1],c[2],c[3]);c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};i["flambe.swf.BitmapSymbol"]=nl;nl.__name__=["flambe","swf","BitmapSymbol"];nl.__interfaces__=[yn];nl.prototype={__class__:nl};var ip=function(){};i["flambe.swf.Flipbook"]=ip;ip.__name__=["flambe","swf","Flipbook"];ip.prototype={__class__:ip};var jp=function(){this.label=null;
this.anchorX=this.anchorY=0};i["flambe.swf.FlipbookFrame"]=jp;jp.__name__=["flambe","swf","FlipbookFrame"];jp.prototype={toSymbol:function(){return new ol(this)},__class__:jp};var ol=function(a){this._texture=a.texture;this._anchorX=a.anchorX;this._anchorY=a.anchorY};i["flambe.swf._Flipbook.FrameSymbol"]=ol;ol.__name__=["flambe","swf","_Flipbook","FrameSymbol"];ol.__interfaces__=[yn];ol.prototype={__class__:ol};var jk=function(a,b){this._file=a.getFile(b+"/library.json");var c=JSON.parse(this._file.toString());
this._symbols=new $c;this.frameRate=c.frameRate;for(var d=[],e=0,f=c.movies;e<f.length;){var g=f[e];++e;g=new ik(this,g);d.push(g);var j=g._name,p=this._symbols;null!=K[j]?p.setReserved(j,g):p.h[j]=g}c=c.textureGroups[0].atlases;for(e=0;e<c.length;){j=c[e];++e;f=a.getTexture(b+"/"+Ze.removeFileExtension(j.file));g=0;for(j=j.textures;g<j.length;){p=j[g];++g;var p=new nl(p,f),h=p._name,i=this._symbols;null!=K[h]?i.setReserved(h,p):i.h[h]=p}}for(c=0;c<d.length;){f=d[c];++c;e=0;for(f=f.layers;e<f.length;){g=
f[e];++e;g=g.keyframes;j=g.length;p=0;for(h=j;p<h;){var k=p++,i=g[k];if(null!=i.symbolName){var l=i.symbolName,o=this._symbols,l=null!=K[l]?o.getReserved(l):o.h[l];i.symbol=l}if(i.tweened&&1==i.duration&&k+1<j&&(k=g[k+1],!k.visible||null==k.symbolName))i.visible=!1}}}};i["flambe.swf.Library"]=jk;jk.__name__=["flambe","swf","Library"];jk.fromFlipbooks=function(a){var b=ec.createEmptyInstance(jk);b._symbols=new $c;b.frameRate=60;b._file=null;for(var c=0;c<a.length;){var d=a[c];++c;for(var e=[],f=0,
g=d.frames;f<g.length;){var j=g[f];++f;e.push({duration:j.duration*b.frameRate,label:j.label,pivot:[j.anchorX,j.anchorY],ref:""})}e=new ik(b,{id:d.name,layers:[{name:"flipbook",flipbook:!0,keyframes:e}]});f=d.name;g=b._symbols;null!=K[f]?g.setReserved(f,e):g.h[f]=e;e=e.layers[0].keyframes;f=0;for(g=d.frames.length;f<g;){var j=f++,p=d.frames[j].toSymbol();e[j].symbol=p}}return b};jk.prototype={__class__:jk};var ik=function(a,b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);
for(var c=0,d=this.layers.length;c<d;){var e=c++,f=new zn(b.layers[e]);this.frames=Math.max(f.frames,this.frames);this.layers[e]=f}this.duration=this.frames/this.frameRate};i["flambe.swf.MovieSymbol"]=ik;ik.__name__=["flambe","swf","MovieSymbol"];ik.__interfaces__=[yn];ik.prototype={__class__:ik};var zn=function(a){this.empty=!0;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=0,d=this.keyframes.length;c<d;){var e=c++,b=new An(a.keyframes[e],b);this.keyframes[e]=b;this.empty=
this.empty&&null==b.symbolName}this.frames=null!=b?b.index+b.duration:0};i["flambe.swf.MovieLayer"]=zn;zn.__name__=["flambe","swf","MovieLayer"];zn.prototype={__class__:zn};var An=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=
c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};i["flambe.swf.MovieKeyframe"]=An;An.__name__=["flambe","swf","MovieKeyframe"];An.prototype={__class__:An};var Vp=function(){};i["flambe.util.LogHandler"]=Vp;Vp.__name__=["flambe",
"util","LogHandler"];var el=function(){this.success=new hc;this.error=new hc;this.progressChanged=new dj;this.hasResult=!1;this._total=this._progress=0};i["flambe.util.Promise"]=el;el.__name__=["flambe","util","Promise"];el.prototype={set_result:function(a){if(this.hasResult)throw new h("Promise result already assigned");this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=
a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:el,__properties__:{set_total:"set_total",set_progress:"set_progress",set_result:"set_result"}};var dj=function(a){Ye.call(this,a)};i["flambe.util.Signal0"]=dj;dj.__name__=["flambe","util","Signal0"];dj.__super__=Ye;dj.prototype=z(Ye.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;
this._head==Ye.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:dj});var bn=function(a){this.next=null;this.fn=a};i["flambe.util._SignalBase.Task"]=bn;bn.__name__=["flambe","util","_SignalBase","Task"];bn.prototype={__class__:bn};var Ze=function(){};i["flambe.util.Strings"]=Ze;Ze.__name__=["flambe","util","Strings"];Ze.getFileExtension=function(a){var b=
a.lastIndexOf(".");return 0<b?Z.substr(a,b+1,null):null};Ze.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?Z.substr(a,0,b):a};Ze.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=Z.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=Z.substr(a,b+1,null));return Ze.getFileExtension(a)};Ze.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};Ze.withFields=function(a,b){var c=b.length;if(0<c){for(var a=a+(0<a.length?" [":"["),d=0;d<c;){0<d&&
(a+=", ");var e=b[d],f=b[d+1];if(y.__instanceof(f,Error)){var g=f.stack;null!=g&&(f=g)}a+=e+"="+L.string(f);d+=2}a+="]"}return a};var hj=function(){};i["haxe.IMap"]=hj;hj.__name__=["haxe","IMap"];hj.prototype={__class__:hj};var cf=function(){this.buf=new ai;this.cache=[];this.useCache=cf.USE_CACHE;this.useEnumIndex=cf.USE_ENUM_INDEX;this.shash=new $c;this.scount=0};i["haxe.Serializer"]=cf;cf.__name__=["haxe","Serializer"];cf.run=function(a){var b=new cf;b.serialize(a);return b.toString()};cf.prototype=
{toString:function(){return this.buf.b},serializeString:function(a){var b=this.shash,b=null!=K[a]?b.getReserved(a):b.h[a];if(null!=b)this.buf.b+="R",this.buf.b+=null==b?"null":""+b;else{var b=this.shash,c=this.scount++;null!=K[a]?b.setReserved(a,c):b.h[a]=c;this.buf.b+="y";a=encodeURIComponent(a);this.buf.b+=L.string(a.length);this.buf.b+=":";this.buf.b+=null==a?"null":""+a}},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var e=c++,f=this.cache[e];if(typeof f==b&&f==a)return this.buf.b+=
"r",this.buf.b+=null==e?"null":""+e,!0}this.cache.push(a);return!1},serializeFields:function(a){for(var b=0,c=t.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(t.field(a,d))}this.buf.b+="g"},serialize:function(a){var b=ec["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b+=null==a?"null":""+a;break;case 2:isNaN(a)?this.buf.b+="k":isFinite(a)?(this.buf.b+="d",this.buf.b+=null==a?"null":""+a):this.buf.b+=
0>a?"m":"p";break;case 3:this.buf.b+=a?"t":"f";break;case 4:if(y.__instanceof(a,Wp))a=ec.getClassName(a),this.buf.b+="A",this.serializeString(a);else if(y.__instanceof(a,Xp))this.buf.b+="B",this.serializeString(ec.getEnumName(a));else{if(this.useCache&&this.serializeRef(a))break;this.buf.b+="o";this.serializeFields(a)}break;case 5:throw new h("Cannot serialize function");case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:b=0;
this.buf.b+="a";for(var c=0,d=a.length;c<d;){var e=c++;null==a[e]?++b:(0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==b?"null":""+b),b=0),this.serialize(a[e]))}0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==b?"null":""+b));this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.b+=L.string(a.getTime());break;case Rj:this.buf.b+="l";for(a=a.h;null!=a;)b=a.item,a=a.next,this.serialize(b);this.buf.b+="h";break;case Ke:this.buf.b+="q";for(b=a.keys();b.hasNext();)c=b.next(),
this.buf.b+=":",this.buf.b+=null==c?"null":""+c,this.serialize(a.h[c]);this.buf.b+="h";break;case Qg:this.buf.b+="M";for(b=a.keys();b.hasNext();)c=b.next(),d=t.field(c,"__id__"),t.deleteField(c,"__id__"),this.serialize(c),c.__id__=d,this.serialize(a.h[c.__id__]);this.buf.b+="h";break;case $c:this.buf.b+="b";for(b=a.keys();b.hasNext();)c=b.next(),this.serializeString(c),this.serialize(null!=K[c]?a.getReserved(c):a.h[c]);this.buf.b+="h";break;case Xg:this.buf.b+="s";this.buf.b+=L.string(Math.ceil(8*
a.length/6));this.buf.b+=":";c=0;d=a.length-2;b=cf.BASE64_CODES;if(null==b){for(var b=Array(cf.BASE64.length),e=0,f=cf.BASE64.length;e<f;){var g=e++;b[g]=Z.cca(cf.BASE64,g)}cf.BASE64_CODES=b}for(;c<d;)e=a.b[c++],f=a.b[c++],g=a.b[c++],this.buf.b+=String.fromCharCode(b[e>>2]),this.buf.b+=String.fromCharCode(b[(e<<4|f>>4)&63]),this.buf.b+=String.fromCharCode(b[(f<<2|g>>6)&63]),this.buf.b+=String.fromCharCode(b[g&63]);c==d?(d=a.b[c++],a=a.b[c++],this.buf.b+=String.fromCharCode(b[d>>2]),this.buf.b+=String.fromCharCode(b[(d<<
4|a>>4)&63]),this.buf.b+=String.fromCharCode(b[a<<2&63])):c==d+1&&(a=a.b[c++],this.buf.b+=String.fromCharCode(b[a>>2]),this.buf.b+=String.fromCharCode(b[a<<4&63]));break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(ec.getClassName(b)),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(ec.getClassName(b)),this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 7:b=b[2];if(this.useCache){if(this.serializeRef(a))break;
this.cache.pop()}this.buf.b+=L.string(this.useEnumIndex?"j":"w");this.serializeString(ec.getEnumName(b));this.useEnumIndex?(this.buf.b+=":",this.buf.b+=L.string(a[1])):this.serializeString(a[0]);this.buf.b+=":";b=a.length;this.buf.b+=L.string(b-2);for(c=2;c<b;)d=c++,this.serialize(a[d]);this.useCache&&this.cache.push(a);break;default:throw new h("Cannot serialize "+L.string(a));}},__class__:cf};var pl=function(){};i["haxe._Unserializer.DefaultResolver"]=pl;pl.__name__=["haxe","_Unserializer","DefaultResolver"];
pl.prototype={resolveClass:function(a){return ec.resolveClass(a)},resolveEnum:function(a){return ec.resolveEnum(a)},__class__:pl};var Se=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=Se.DEFAULT_RESOLVER;null==a&&(a=new pl,Se.DEFAULT_RESOLVER=a);this.resolver=a};i["haxe.Unserializer"]=Se;Se.__name__=["haxe","Unserializer"];Se.initCodes=function(){for(var a=[],b=0,c=Se.BASE64.length;b<c;){var d=b++;a[Se.BASE64.charCodeAt(d)]=d}return a};Se.run=function(a){return(new Se(a)).unserialize()};
Se.prototype={readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},readFloat:function(){for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(b!=b)break;if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return parseFloat(Z.substr(this.buf,a,this.pos-a))},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw new h("Invalid object");
if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw new h("Invalid object key");var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw new h("Invalid enum format");var c=this.readDigits();if(0==c)return ec.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return ec.createEnum(a,b,d)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var a=this.unserialize(),
b=this.resolver.resolveClass(a);if(null==b)throw new h("Class not found "+a);return b;case 66:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new h("Enum not found "+a);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new h("Class not found "+a);a=ec.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw new h("Invalid custom data");return a;case 77:a=new Qg;for(this.cache.push(a);104!=
this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw new h("Invalid string reference");return this.scache[a];case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 98:a=new $c;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);){var b=this.unserialize(),
c=this.unserialize();null!=K[b]?a.setReserved(b,c):a.h[b]=c}this.pos++;return a;case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new h("Class not found "+a);a=ec.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new h("Enum not found "+a);this.pos++;var c=this.readDigits(),d=b.__constructs__.slice()[c];
if(null==d)throw new h("Unknown enum index "+a+"@"+c);a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 107:return NaN;case 108:a=new Rj;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 109:return-Infinity;case 110:return null;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 112:return Infinity;case 113:a=new Ke;this.cache.push(a);for(b=this.buf.charCodeAt(this.pos++);58==b;)b=this.readDigits(),c=this.unserialize(),
a.h[b]=c,b=this.buf.charCodeAt(this.pos++);if(104!=b)throw new h("Invalid IntMap format");return a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw new h("Invalid reference");return this.cache[a];case 115:a=this.readDigits();d=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw new h("Invalid bytes length");var e=Se.CODES;null==e&&(e=Se.initCodes(),Se.CODES=e);for(var f=this.pos,g=a&3,j=f+(a-g),b=new Xg(new Bn(3*(a>>2)+(2<=g?g-1:0))),c=0;f<j;){var p=e[d.charCodeAt(f++)],
we=e[d.charCodeAt(f++)];b.b[c++]=(p<<2|we>>4)&255;p=e[d.charCodeAt(f++)];b.b[c++]=(we<<4|p>>2)&255;we=e[d.charCodeAt(f++)];b.b[c++]=(p<<6|we)&255}2<=g&&(we=e[d.charCodeAt(f++)],j=e[d.charCodeAt(f++)],b.b[c++]=(we<<2|j>>4)&255,3==g&&(d=e[d.charCodeAt(f++)],b.b[c++]=(j<<4|d>>2)&255));this.pos+=a;this.cache.push(b);return b;case 116:return!0;case 118:return 48<=this.buf.charCodeAt(this.pos)&&57>=this.buf.charCodeAt(this.pos)&&48<=this.buf.charCodeAt(this.pos+1)&&57>=this.buf.charCodeAt(this.pos+1)&&
48<=this.buf.charCodeAt(this.pos+2)&&57>=this.buf.charCodeAt(this.pos+2)&&48<=this.buf.charCodeAt(this.pos+3)&&57>=this.buf.charCodeAt(this.pos+3)&&45==this.buf.charCodeAt(this.pos+4)?(a=Z.strDate(Z.substr(this.buf,this.pos,19)),this.pos+=19):(a=this.readFloat(),a=new Date(a)),this.cache.push(a),a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new h("Enum not found "+a);a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 120:throw h.wrap(this.unserialize());
case 121:a=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw new h("Invalid string length");b=Z.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 122:return 0}this.pos--;throw new h("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos);},__class__:Se};var ee=function(){};i["haxe.ds.ArraySort"]=ee;ee.__name__=["haxe","ds","ArraySort"];ee.sort=function(a,b){ee.rec(a,b,0,a.length)};
ee.rec=function(a,b,c,d){var e=c+d>>1;if(12>d-c){if(!(d<=c))for(e=c+1;e<d;)for(var f=e++;f>c;){if(0>b(a[f],a[f-1]))ee.swap(a,f-1,f);else break;--f}}else ee.rec(a,b,c,e),ee.rec(a,b,e,d),ee.doMerge(a,b,c,e,d,e-c,d-e)};ee.doMerge=function(a,b,c,d,e,f,g){var j,p,h,i;0==f||0==g||(2==f+g?0>b(a[d],a[c])&&ee.swap(a,d,c):(f>g?(h=f>>1,j=c+h,p=ee.lower(a,b,d,e,j),i=p-d):(i=g>>1,p=d+i,j=ee.upper(a,b,c,d,p),h=j-c),ee.rotate(a,b,j,d,p),d=j+i,ee.doMerge(a,b,c,j,d,h,i),ee.doMerge(a,b,d,p,e,f-h,g-i)))};ee.rotate=
function(a,b,c,d,e){if(!(c==d||d==e))for(b=ee.gcd(e-c,d-c);0!=b--;){for(var f=a[c+b],g=d-c,j=c+b,p=c+b+g;p!=c+b;)a[j]=a[p],j=p,p=e-p>g?p+g:c+(g-(e-p));a[j]=f}};ee.gcd=function(a,b){for(;0!=b;)var c=a%b,a=b,b=c;return a};ee.upper=function(a,b,c,d,e){for(var d=d-c,f,g;0<d;)f=d>>1,g=c+f,0>b(a[e],a[g])?d=f:(c=g+1,d=d-f-1);return c};ee.lower=function(a,b,c,d,e){for(var d=d-c,f,g;0<d;)f=d>>1,g=c+f,0>b(a[g],a[e])?(c=g+1,d=d-f-1):d=f;return c};ee.swap=function(a,b,c){var d=a[b];a[b]=a[c];a[c]=d};var ql=function(){};
i["haxe.ds.BalancedTree"]=ql;ql.__name__=["haxe","ds","BalancedTree"];ql.prototype={set:function(a,b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return b.value;b=0>c?b.left:b.right}return null},remove:function(a){try{return this.root=this.removeLoop(a,this.root),!0}catch(b){b instanceof h&&(b=b.val);if(y.__instanceof(b,String))return!1;throw b;}},exists:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);
if(0==c)return!0;b=0>c?b.left:b.right}return!1},setLoop:function(a,b,c){if(null==c)return new jf(null,a,b,null);var d=this.compare(a,c.key);if(0==d)return new jf(c.left,a,b,c.right,null==c?0:c._height);if(0>d)return this.balance(this.setLoop(a,b,c.left),c.key,c.value,c.right);a=this.setLoop(a,b,c.right);return this.balance(c.left,c.key,c.value,a)},removeLoop:function(a,b){if(null==b)throw new h("Not_found");var c=this.compare(a,b.key);return 0==c?this.merge(b.left,b.right):0>c?this.balance(this.removeLoop(a,
b.left),b.key,b.value,b.right):this.balance(b.left,b.key,b.value,this.removeLoop(a,b.right))},merge:function(a,b){if(null==a)return b;if(null==b)return a;var c=this.minBinding(b);return this.balance(a,c.key,c.value,this.removeMinBinding(b))},minBinding:function(a){if(null==a)throw new h("Not_found");return null==a.left?a:this.minBinding(a.left)},removeMinBinding:function(a){return null==a.left?a.right:this.balance(this.removeMinBinding(a.left),a.key,a.value,a.right)},balance:function(a,b,c,d){var e=
null==a?0:a._height,f=null==d?0:d._height;if(e>f+2)return e=a.left,f=a.right,(null==e?0:e._height)>=(null==f?0:f._height)?new jf(a.left,a.key,a.value,new jf(a.right,b,c,d)):new jf(new jf(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new jf(a.right.right,b,c,d));return f>e+2?(e=d.right,f=d.left,(null==e?0:e._height)>(null==f?0:f._height)?new jf(new jf(a,b,c,d.left),d.key,d.value,d.right):new jf(new jf(a,b,c,d.left.left),d.left.key,d.left.value,new jf(d.left.right,d.key,d.value,d.right))):
new jf(a,b,c,d,(e>f?e:f)+1)},compare:function(a,b){return t.compare(a,b)},__class__:ql};var jf=function(a,b,c,d,e){null==e&&(e=-1);this.left=a;this.key=b;this.value=c;this.right=d;-1==e?(a=this.left,b=this.right,a=(null==a?0:a._height)>(null==b?0:b._height)?this.left:this.right,a=null==a?0:a._height,this._height=a+1):this._height=e};i["haxe.ds.TreeNode"]=jf;jf.__name__=["haxe","ds","TreeNode"];jf.prototype={__class__:jf};var kk=function(){};i["haxe.ds.EnumValueMap"]=kk;kk.__name__=["haxe","ds","EnumValueMap"];
kk.__interfaces__=[hj];kk.__super__=ql;kk.prototype=z(ql.prototype,{compare:function(a,b){var c=a[1]-b[1];if(0!=c)return c;var c=a.slice(2),d=b.slice(2);return 0==c.length&&0==d.length?0:this.compareArgs(c,d)},compareArgs:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=0,d=a.length;c<d;){var e=c++,e=this.compareArg(a[e],b[e]);if(0!=e)return e}return 0},compareArg:function(a,b){return t.isEnumValue(a)&&t.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof
Array&&null==b.__enum__?this.compareArgs(a,b):t.compare(a,b)},__class__:kk});var Ke=function(){this.h={}};i["haxe.ds.IntMap"]=Ke;Ke.__name__=["haxe","ds","IntMap"];Ke.__interfaces__=[hj];Ke.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return Z.iter(a)},
__class__:Ke};var Qg=function(){this.h={__keys__:{}}};i["haxe.ds.ObjectMap"]=Qg;Qg.__name__=["haxe","ds","ObjectMap"];Qg.__interfaces__=[hj];Qg.assignId=function(a){return a.__id__=++Qg.count};Qg.getId=function(a){return a.__id__};Qg.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++Qg.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;
delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return Z.iter(a)},__class__:Qg};var se=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};i["haxe.ds._StringMap.StringMapIterator"]=se;se.__name__=["haxe","ds","_StringMap","StringMapIterator"];se.prototype={hasNext:function(){return this.index<this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=
K[b]?a.getReserved(b):a.h[b]},__class__:se};var $c=function(){this.h={}};i["haxe.ds.StringMap"]=$c;$c.__name__=["haxe","ds","StringMap"];$c.__interfaces__=[hj];$c.prototype={set:function(a,b){null!=K[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=K[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=K[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?
null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=K[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;delete this.h[a]}return!0},keys:function(){return Z.iter(this.arrayKeys())},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},
iterator:function(){return new se(this,this.arrayKeys())},__class__:$c};var Xg=function(a){this.length=a.byteLength;this.b=new kp(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};i["haxe.io.Bytes"]=Xg;Xg.__name__=["haxe","io","Bytes"];Xg.alloc=function(a){return new Xg(new Bn(a))};Xg.ofString=function(a){for(var b=[],c=0;c<a.length;){var d=a.charCodeAt(c++);55296<=d&&56319>=d&&(d=d-55232<<10|a.charCodeAt(c++)&1023);127>=d?b.push(d):(2047>=d?b.push(192|d>>6):(65535>=d?b.push(224|d>>12):(b.push(240|
d>>18),b.push(128|d>>12&63)),b.push(128|d>>6&63)),b.push(128|d&63))}return new Xg((new kp(b)).buffer)};Xg.ofData=function(a){var b=a.hxBytes;return null!=b?b:new Xg(a)};Xg.fastGet=function(a,b){return a.bytes[b]};Xg.prototype={__class__:Xg};var bk=function(){};i["haxe.rtti.Meta"]=bk;bk.__name__=["haxe","rtti","Meta"];bk.getType=function(a){a=bk.getMeta(a);return null==a||null==a.obj?{}:a.obj};bk.getMeta=function(a){return a.__meta__};var Cn=function(a){this.__x=a};i["haxe.xml._Fast.NodeAccess"]=Cn;
Cn.__name__=["haxe","xml","_Fast","NodeAccess"];Cn.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b){if(this.__x.nodeType==S.Document)b="Document";else{b=this.__x;if(b.nodeType!=S.Element)throw new h("Bad node type, expected Element but found "+b.nodeType);b=b.nodeName}throw new h(b+" is missing element "+a);}return new lk(b)},__class__:Cn};var Dn=function(a){this.__x=a};i["haxe.xml._Fast.AttribAccess"]=Dn;Dn.__name__=["haxe","xml","_Fast","AttribAccess"];Dn.prototype=
{resolve:function(a){if(this.__x.nodeType==S.Document)throw new h("Cannot access document attribute "+a);var b=this.__x.get(a);if(null==b){b=this.__x;if(b.nodeType!=S.Element)throw new h("Bad node type, expected Element but found "+b.nodeType);throw new h(b.nodeName+" is missing attribute "+a);}return b},__class__:Dn};var En=function(a){this.__x=a};i["haxe.xml._Fast.HasAttribAccess"]=En;En.__name__=["haxe","xml","_Fast","HasAttribAccess"];En.prototype={resolve:function(a){if(this.__x.nodeType==S.Document)throw new h("Cannot access document attribute "+
a);return this.__x.exists(a)},__class__:En};var Fn=function(a){this.__x=a};i["haxe.xml._Fast.HasNodeAccess"]=Fn;Fn.__name__=["haxe","xml","_Fast","HasNodeAccess"];Fn.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},__class__:Fn};var Gn=function(a){this.__x=a};i["haxe.xml._Fast.NodeListAccess"]=Gn;Gn.__name__=["haxe","xml","_Fast","NodeListAccess"];Gn.prototype={resolve:function(a){for(var b=new Rj,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new lk(c))}return b},
__class__:Gn};var lk=function(a){if(a.nodeType!=S.Document&&a.nodeType!=S.Element)throw new h("Invalid nodeType "+a.nodeType);this.x=a;this.node=new Cn(a);this.nodes=new Gn(a);this.att=new Dn(a);this.has=new En(a);this.hasNode=new Fn(a)};i["haxe.xml.Fast"]=lk;lk.__name__=["haxe","xml","Fast"];lk.prototype={get_name:function(){if(this.x.nodeType==S.Document)return"Document";var a=this.x;if(a.nodeType!=S.Element)throw new h("Bad node type, expected Element but found "+a.nodeType);return a.nodeName},
get_innerData:function(){var a=this.x;if(a.nodeType!=S.Document&&a.nodeType!=S.Element)throw new h("Bad node type, expected Element or Document but found "+a.nodeType);a=Z.iter(a.children);if(!a.hasNext())throw new h(this.get_name()+" does not have data");var b=a.next();if(a.hasNext()){var c=a.next();if(b.nodeType==S.PCData&&c.nodeType==S.CData){if(b.nodeType==S.Document||b.nodeType==S.Element)throw new h("Bad node type, unexpected "+b.nodeType);b=""==pc.trim(b.nodeValue)}else b=!1;if(b){if(!a.hasNext()){if(c.nodeType==
S.Document||c.nodeType==S.Element)throw new h("Bad node type, unexpected "+c.nodeType);return c.nodeValue}b=a.next();if(b.nodeType==S.PCData){if(b.nodeType==S.Document||b.nodeType==S.Element)throw new h("Bad node type, unexpected "+b.nodeType);b=""==pc.trim(b.nodeValue)}else b=!1;if(b&&!a.hasNext()){if(c.nodeType==S.Document||c.nodeType==S.Element)throw new h("Bad node type, unexpected "+c.nodeType);return c.nodeValue}}throw new h(this.get_name()+" does not only have data");}if(b.nodeType!=S.PCData&&
b.nodeType!=S.CData)throw new h(this.get_name()+" does not have data");if(b.nodeType==S.Document||b.nodeType==S.Element)throw new h("Bad node type, unexpected "+b.nodeType);return b.nodeValue},__class__:lk,__properties__:{get_innerData:"get_innerData",get_name:"get_name"}};var Ne=function(a,b,c){this.xml=b;this.message=a;this.position=c;this.lineNumber=1;for(a=this.positionAtLine=0;a<c;){var d=a++,d=b.charCodeAt(d);10==d?(this.lineNumber++,this.positionAtLine=0):13!=d&&this.positionAtLine++}};i["haxe.xml.XmlParserException"]=
Ne;Ne.__name__=["haxe","xml","XmlParserException"];Ne.prototype={toString:function(){return ec.getClassName(y.getClass(this))+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:Ne};var bi=function(){};i["haxe.xml.Parser"]=bi;bi.__name__=["haxe","xml","Parser"];bi.parse=function(a,b){null==b&&(b=!1);var c=S.createDocument();bi.doParse(a,b,0,c);return c};bi.doParse=function(a,b,c,d){null==c&&(c=0);for(var e=null,f=1,g=1,j=null,p=0,we=0,i=0,k=a.charCodeAt(c),l=new ai,
o=1,n=-1;k==k;){switch(f){case 0:switch(k){case 9:case 10:case 13:case 32:break;default:f=g;continue}break;case 1:if(60==k)f=0,g=2;else{p=c;f=13;continue}break;case 2:switch(k){case 33:if(91==a.charCodeAt(c+1)){c+=2;if("CDATA["!=Z.substr(a,c,6).toUpperCase())throw new h(new Ne("Expected <![CDATA[",a,c));c+=5;f=17}else if(68==a.charCodeAt(c+1)||100==a.charCodeAt(c+1)){if("OCTYPE"!=Z.substr(a,c+2,6).toUpperCase())throw new h(new Ne("Expected <!DOCTYPE",a,c));c+=8;f=16}else{if(45!=a.charCodeAt(c+1)||
45!=a.charCodeAt(c+2))throw new h(new Ne("Expected <\!--",a,c));c+=2;f=15}p=c+1;break;case 47:if(null==d)throw new h(new Ne("Expected node name",a,c));p=c+1;f=0;g=10;break;case 63:f=14;p=c;break;default:f=3;p=c;continue}break;case 3:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(c==p)throw new h(new Ne("Expected node name",a,c));e=S.createElement(Z.substr(a,p,c-p));d.addChild(e);++we;f=0;g=4;continue}break;case 4:switch(k){case 47:f=11;break;case 62:f=9;break;default:f=
5;p=c;continue}break;case 5:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(p==c)throw new h(new Ne("Expected attribute name",a,c));j=Z.substr(a,p,c-p);if(e.exists(j))throw new h(new Ne("Duplicate attribute ["+j+"]",a,c));f=0;g=6;continue}break;case 6:if(61==k)f=0,g=7;else throw new h(new Ne("Expected =",a,c));break;case 7:switch(k){case 34:case 39:l=new ai;f=8;p=c+1;n=k;break;default:throw new h(new Ne('Expected "',a,c));}break;case 8:switch(k){case 38:o=c-p;l.b+=
null==o?Z.substr(a,p,null):Z.substr(a,p,o);f=18;o=8;p=c+1;break;case 60:case 62:if(b)throw new h(new Ne("Invalid unescaped "+String.fromCharCode(k)+" in attribute value",a,c));k==n&&(g=c-p,l.b+=null==g?Z.substr(a,p,null):Z.substr(a,p,g),g=l.b,l=new ai,e.set(j,g),f=0,g=4);break;default:k==n&&(g=c-p,l.b+=null==g?Z.substr(a,p,null):Z.substr(a,p,g),g=l.b,l=new ai,e.set(j,g),f=0,g=4)}break;case 9:p=c=bi.doParse(a,b,c,e);f=1;break;case 10:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==
k||45==k)){if(p==c)throw new h(new Ne("Expected node name",a,c));g=Z.substr(a,p,c-p);if(d.nodeType!=S.Element)throw new h("Bad node type, expected Element but found "+d.nodeType);if(g!=d.nodeName){if(d.nodeType!=S.Element)throw new h("Bad node type, expected Element but found "+d.nodeType);throw new h(new Ne("Expected </"+d.nodeName+">",a,c));}f=0;g=12;continue}break;case 11:if(62==k)f=1;else throw new h(new Ne("Expected >",a,c));break;case 12:if(62==k)return 0==we&&d.addChild(S.createPCData("")),
c;throw new h(new Ne("Expected >",a,c));case 13:60==k?(g=c-p,l.b+=null==g?Z.substr(a,p,null):Z.substr(a,p,g),g=S.createPCData(l.b),l=new ai,d.addChild(g),++we,f=0,g=2):38==k&&(o=c-p,l.b+=null==o?Z.substr(a,p,null):Z.substr(a,p,o),f=18,o=13,p=c+1);break;case 14:63==k&&62==a.charCodeAt(c+1)&&(++c,k=Z.substr(a,p+1,c-p-2),d.addChild(S.createProcessingInstruction(k)),++we,f=1);break;case 15:45==k&&45==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2)&&(d.addChild(S.createComment(Z.substr(a,p,c-p))),++we,c+=2,f=
1);break;case 16:91==k?++i:93==k?--i:62==k&&0==i&&(d.addChild(S.createDocType(Z.substr(a,p,c-p))),++we,f=1);break;case 17:93==k&&93==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2)&&(k=S.createCData(Z.substr(a,p,c-p)),d.addChild(k),++we,c+=2,f=1);break;case 18:if(59==k){p=Z.substr(a,p,c-p);if(35==p.charCodeAt(0))p=120==p.charCodeAt(1)?L.parseInt("0"+Z.substr(p,1,p.length-1)):L.parseInt(Z.substr(p,1,p.length-1)),l.b+=String.fromCharCode(p);else if(k=bi.escapes,null!=K[p]?k.existsReserved(p):k.h.hasOwnProperty(p))k=
bi.escapes,p=null!=K[p]?k.getReserved(p):k.h[p],l.b+=L.string(p);else{if(b)throw new h(new Ne("Undefined entity: "+p,a,c));l.b+=L.string("&"+p+";")}p=c+1;f=o}else if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)&&35!=k){if(b)throw new h(new Ne("Invalid character in entity: "+String.fromCharCode(k),a,c));l.b+="&";k=c-p;l.b+=null==k?Z.substr(a,p,null):Z.substr(a,p,k);p=c--;f=o}}k=a.charCodeAt(++c)}1==f&&(p=c,f=13);if(13==f){if(c!=p||0==we)b=c-p,l.b+=null==b?Z.substr(a,p,null):
Z.substr(a,p,b),d.addChild(S.createPCData(l.b));return c}if(!b&&18==f&&13==o)return l.b+="&",b=c-p,l.b+=null==b?Z.substr(a,p,null):Z.substr(a,p,b),d.addChild(S.createPCData(l.b)),c;throw new h(new Ne("Unexpected end",a,c));};var h=function(a){Error.call(this);this.val=a;this.message=""+a;Error.captureStackTrace&&Error.captureStackTrace(this,h)};i["js._Boot.HaxeError"]=h;h.__name__=["js","_Boot","HaxeError"];h.wrap=function(a){return a instanceof Error?a:new h(a)};h.__super__=Error;h.prototype=z(Error.prototype,
{__class__:h});var y=function(){};i["js.Boot"]=y;y.__name__=["js","Boot"];y.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=y.__nativeClassName(a);return null!=a?y.__resolveNativeClass(a):null};y.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "function":return"<function>";case "object":if(a instanceof Array){if(a.__enum__){if(2==
a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var f=d++,c=2!=f?c+(","+y.__string_rec(a[f],b)):c+y.__string_rec(a[f],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+y.__string_rec(a[f],b);return d+"]"}try{d=a.toString}catch(g){return"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||"__class__"==
c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+y.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "string":return a;default:return""+a}};y.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++,f=c[f];if(f==b||y.__interfLoop(f,b))return!0}return y.__interfLoop(a.__super__,b)};y.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof
Array?null==a.__enum__:!1;case eg:return"boolean"==typeof a;case gq:return!0;case W:return"number"==typeof a;case ph:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||y.__interfLoop(y.getClass(a),b))return!0}else{if("object"==typeof b&&y.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==Wp&&null!=a.__name__||b==Xp&&null!=a.__ename__?!0:a.__enum__==b}};y.__cast=function(a,b){if(y.__instanceof(a,
b))return a;throw new h("Cannot cast "+L.string(a)+" to "+L.string(b));};y.__nativeClassName=function(a){a=y.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};y.__isNativeObj=function(a){return null!=y.__nativeClassName(a)};y.__resolveNativeClass=function(a){return Op[a]};var Yg=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{this.a=[];for(var b=0;b<a;)this.a[b++]=0;this.byteLength=a}};i["js.html.compat.ArrayBuffer"]=
Yg;Yg.__name__=["js","html","compat","ArrayBuffer"];Yg.sliceImpl=function(a,b){var c=new kp(this,a,null==b?null:b-a),d=new Bn(c.byteLength);(new kp(d)).set(c);return d};Yg.prototype={slice:function(a,b){return new Yg(this.a.slice(a,b))},__class__:Yg};var fi=function(){};i["js.html.compat.Uint8Array"]=fi;fi.__name__=["js","html","compat","Uint8Array"];fi._new=function(a,b,c){if("number"==typeof a){c=[];for(b=0;b<a;){var d=b++;c[d]=0}c.byteLength=c.length;c.byteOffset=0;c.buffer=new Yg(c)}else if(y.__instanceof(a,
Yg))null==b&&(b=0),null==c&&(c=a.byteLength-b),c=0==b?a.a:a.a.slice(b,b+c),c.byteLength=c.length,c.byteOffset=b,c.buffer=a;else if(a instanceof Array&&null==a.__enum__)c=a.slice(),c.byteLength=c.length,c.byteOffset=0,c.buffer=new Yg(c);else throw new h("TODO "+L.string(a));c.subarray=fi._subarray;c.set=fi._set;return c};fi._set=function(a,b){if(y.__instanceof(a.buffer,Yg)){if(a.byteLength+b>this.byteLength)throw new h("set() outside of range");for(var c=0,d=a.byteLength;c<d;){var e=c++;this[e+b]=
a[e]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new h("set() outside of range");c=0;for(d=a.length;c<d;)e=c++,this[e+b]=a[e]}else throw new h("TODO");};fi._subarray=function(a,b){var c=fi._new(this.slice(a,b));c.byteOffset=a;return c};var lp=function(){};i["manifest.Xml"]=lp;lp.__name__=["manifest","Xml"];var u=function(){};i["nape.Config"]=u;u.__name__=["nape","Config"];var Eg=function(){this.zpp_inner=null;if(!Zd.internal)throw new h("Error: Callback cannot be instantiated derp!");
};i["nape.callbacks.Callback"]=Eg;Eg.__name__=["nape","callbacks","Callback"];Eg.prototype={toString:function(){return""},__class__:Eg};var rl=function(){Eg.call(this)};i["nape.callbacks.BodyCallback"]=rl;rl.__name__=["nape","callbacks","BodyCallback"];rl.__super__=Eg;rl.prototype=z(Eg.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-2];a+=":"+this.zpp_inner.body.outer.toString();return a+=" : listener: "+L.string(this.zpp_inner.listener.outer)},__class__:rl});var ug=
function(){this.zpp_inner=null};i["nape.callbacks.Listener"]=ug;ug.__name__=["nape","callbacks","Listener"];ug.prototype={toString:function(){var a="BEGIN,END,WAKE,SLEEP,BREAK,PRE,ONGOING".split(",")[this.zpp_inner.event];if(0==this.zpp_inner.type)return"BodyListener{"+a+"::"+L.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}";if(1==this.zpp_inner.type)return"ConstraintListener{"+a+"::"+L.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var b=this.zpp_inner.interaction,
c;switch(b.itype){case 1:c="COLLISION";break;case 2:c="SENSOR";break;case 4:c="FLUID";break;default:c="ALL"}return(2==this.zpp_inner.type?"InteractionListener{"+a+"#"+c+"::"+L.string(b.outer_zni.zpp_inner_zn.options1.outer)+":"+L.string(b.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+c+"::"+L.string(b.outer_znp.zpp_inner_zn.options1.outer)+":"+L.string(b.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},__class__:ug};var Hn=function(){this.zpp_inner_zn=
null};i["nape.callbacks.BodyListener"]=Hn;Hn.__name__=["nape","callbacks","BodyListener"];Hn.__super__=ug;Hn.prototype=z(ug.prototype,{__class__:Hn});var Jh=function(){if(!l.internal)throw new h("Error: Cannot instantiate CbEvent derp!");};i["nape.callbacks.CbEvent"]=Jh;Jh.__name__=["nape","callbacks","CbEvent"];Jh.prototype={toString:function(){null==l.CbEvent_PRE&&(l.internal=!0,l.CbEvent_PRE=new Jh,l.internal=!1);if(this==l.CbEvent_PRE)return"PRE";null==l.CbEvent_BEGIN&&(l.internal=!0,l.CbEvent_BEGIN=
new Jh,l.internal=!1);if(this==l.CbEvent_BEGIN)return"BEGIN";null==l.CbEvent_ONGOING&&(l.internal=!0,l.CbEvent_ONGOING=new Jh,l.internal=!1);if(this==l.CbEvent_ONGOING)return"ONGOING";null==l.CbEvent_END&&(l.internal=!0,l.CbEvent_END=new Jh,l.internal=!1);if(this==l.CbEvent_END)return"END";null==l.CbEvent_WAKE&&(l.internal=!0,l.CbEvent_WAKE=new Jh,l.internal=!1);if(this==l.CbEvent_WAKE)return"WAKE";null==l.CbEvent_SLEEP&&(l.internal=!0,l.CbEvent_SLEEP=new Jh,l.internal=!1);if(this==l.CbEvent_SLEEP)return"SLEEP";
null==l.CbEvent_BREAK&&(l.internal=!0,l.CbEvent_BREAK=new Jh,l.internal=!1);return this==l.CbEvent_BREAK?"BREAK":""},__class__:Jh};var Rg=function(){this.zpp_inner=null;this.zpp_inner=new Te;this.zpp_inner.outer=this};i["nape.callbacks.CbType"]=Rg;Rg.__name__=["nape","callbacks","CbType"];Rg.__properties__={get_ANY_COMPOUND:"get_ANY_COMPOUND",get_ANY_SHAPE:"get_ANY_SHAPE",get_ANY_CONSTRAINT:"get_ANY_CONSTRAINT",get_ANY_BODY:"get_ANY_BODY"};Rg.get_ANY_BODY=function(){return Te.ANY_BODY};Rg.get_ANY_CONSTRAINT=
function(){return Te.ANY_CONSTRAINT};Rg.get_ANY_SHAPE=function(){return Te.ANY_SHAPE};Rg.get_ANY_COMPOUND=function(){return Te.ANY_COMPOUND};Rg.prototype={toString:function(){return this==Te.ANY_BODY?"ANY_BODY":this==Te.ANY_SHAPE?"ANY_SHAPE":this==Te.ANY_COMPOUND?"ANY_COMPOUND":this==Te.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},__class__:Rg};var Fg=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!Zg.internal)throw new h("Error: Cannot instantiate CbTypeIterator derp!");
};i["nape.callbacks.CbTypeIterator"]=Fg;Fg.__name__=["nape","callbacks","CbTypeIterator"];Fg.get=function(a){var b;null==Fg.zpp_pool?(Zg.internal=!0,b=new Fg,Zg.internal=!1):(b=Fg.zpp_pool,Fg.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Fg.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;
this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Fg.zpp_pool;Fg.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Fg};var mk=function(){this.zpp_inner=null;this.zpp_inner=new Zg;this.zpp_inner.outer=this};i["nape.callbacks.CbTypeList"]=mk;mk.__name__=["nape","callbacks","CbTypeList"];mk.fromArray=function(a){if(null==a)throw new h("Error: Cannot convert null Array to Nape list");for(var b=new mk,c=0;c<a.length;){var d=
a[c];++c;b.push(d)}return b};mk.prototype={at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-
1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){if(this.zpp_inner.immutable)throw new h("Error: CbTypeList is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):
!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);else{if(null==this.zpp_inner.push_ite){var c;null==this.zpp_inner.inner.head?c=null:(c=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),c=c.iterator_at(this.zpp_inner.user_length-1));this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}this.zpp_inner.invalidate();
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=Fg.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=Fg.zpp_pool,Fg.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);
b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:mk};var sl=function(){Eg.call(this)};i["nape.callbacks.ConstraintCallback"]=sl;sl.__name__=["nape","callbacks","ConstraintCallback"];sl.__super__=Eg;sl.prototype=z(Eg.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-2];a+=":"+this.zpp_inner.constraint.outer.toString();return a+=" : listener: "+L.string(this.zpp_inner.listener.outer)},__class__:sl});var In=function(){this.zpp_inner_zn=
null};i["nape.callbacks.ConstraintListener"]=In;In.__name__=["nape","callbacks","ConstraintListener"];In.__super__=ug;In.prototype=z(ug.prototype,{__class__:In});var tl=function(){Eg.call(this)};i["nape.callbacks.InteractionCallback"]=tl;tl.__name__=["nape","callbacks","InteractionCallback"];tl.__super__=Eg;tl.prototype=z(Eg.prototype,{toString:function(){var a;a="Cb:"+"BEGIN,END,,,,,ONGOING".split(",")[this.zpp_inner.event];a+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString();
a+=" : "+this.zpp_inner.wrap_arbiters.toString();return a+=" : listener: "+L.string(this.zpp_inner.listener.outer)},__class__:tl});var Jn=function(){this.zpp_inner_zn=null};i["nape.callbacks.InteractionListener"]=Jn;Jn.__name__=["nape","callbacks","InteractionListener"];Jn.__super__=ug;Jn.prototype=z(ug.prototype,{__class__:Jn});var ij=function(){if(!l.internal)throw new h("Error: Cannot instantiate InteractionType derp!");};i["nape.callbacks.InteractionType"]=ij;ij.__name__=["nape","callbacks","InteractionType"];
ij.prototype={toString:function(){null==l.InteractionType_COLLISION&&(l.internal=!0,l.InteractionType_COLLISION=new ij,l.internal=!1);if(this==l.InteractionType_COLLISION)return"COLLISION";null==l.InteractionType_SENSOR&&(l.internal=!0,l.InteractionType_SENSOR=new ij,l.internal=!1);if(this==l.InteractionType_SENSOR)return"SENSOR";null==l.InteractionType_FLUID&&(l.internal=!0,l.InteractionType_FLUID=new ij,l.internal=!1);if(this==l.InteractionType_FLUID)return"FLUID";null==l.InteractionType_ANY&&(l.internal=
!0,l.InteractionType_ANY=new ij,l.internal=!1);return this==l.InteractionType_ANY?"ANY":""},__class__:ij};var Gg=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!Kh.internal)throw new h("Error: Cannot instantiate ListenerIterator derp!");};i["nape.callbacks.ListenerIterator"]=Gg;Gg.__name__=["nape","callbacks","ListenerIterator"];Gg.get=function(a){var b;null==Gg.zpp_pool?(Kh.internal=!0,b=new Gg,Kh.internal=!1):(b=Gg.zpp_pool,Gg.zpp_pool=b.zpp_next);b.zpp_i=
0;b.zpp_inner=a;b.zpp_critical=!1;return b};Gg.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Gg.zpp_pool;Gg.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Gg};var Kn=function(){this.zpp_inner=
null;this.zpp_inner=new Kh;this.zpp_inner.outer=this};i["nape.callbacks.ListenerList"]=Kn;Kn.__name__=["nape","callbacks","ListenerList"];Kn.prototype={at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&
(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){if(this.zpp_inner.immutable)throw new h("Error: ListenerList is immutable");
this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=Gg.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=
!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=Gg.zpp_pool,Gg.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Kn};var jj=function(){if(!l.internal)throw new h("Error: Cannot instantiate ListenerType derp!");};i["nape.callbacks.ListenerType"]=jj;jj.__name__=["nape","callbacks","ListenerType"];jj.prototype={toString:function(){null==
l.ListenerType_BODY&&(l.internal=!0,l.ListenerType_BODY=new jj,l.internal=!1);if(this==l.ListenerType_BODY)return"BODY";null==l.ListenerType_CONSTRAINT&&(l.internal=!0,l.ListenerType_CONSTRAINT=new jj,l.internal=!1);if(this==l.ListenerType_CONSTRAINT)return"CONSTRAINT";null==l.ListenerType_INTERACTION&&(l.internal=!0,l.ListenerType_INTERACTION=new jj,l.internal=!1);if(this==l.ListenerType_INTERACTION)return"INTERACTION";null==l.ListenerType_PRE&&(l.internal=!0,l.ListenerType_PRE=new jj,l.internal=
!1);return this==l.ListenerType_PRE?"PRE":""},__class__:jj};var mp=function(){this.zpp_inner=null};i["nape.callbacks.OptionType"]=mp;mp.__name__=["nape","callbacks","OptionType"];mp.prototype={toString:function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var a=this.zpp_inner.wrap_includes.toString();null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes();return"@{"+a+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},__class__:mp};var ul=function(){Eg.call(this)};
i["nape.callbacks.PreCallback"]=ul;ul.__name__=["nape","callbacks","PreCallback"];ul.__super__=Eg;ul.prototype=z(Eg.prototype,{toString:function(){var a;a="Cb:PRE:"+(":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString());a+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString();return a+=" : listnener: "+L.string(this.zpp_inner.listener.outer)},__class__:ul});var df=function(){if(!l.internal)throw new h("Error: Cannot instantiate PreFlag derp!");};i["nape.callbacks.PreFlag"]=
df;df.__name__=["nape","callbacks","PreFlag"];df.prototype={toString:function(){null==l.PreFlag_ACCEPT&&(l.internal=!0,l.PreFlag_ACCEPT=new df,l.internal=!1);if(this==l.PreFlag_ACCEPT)return"ACCEPT";null==l.PreFlag_IGNORE&&(l.internal=!0,l.PreFlag_IGNORE=new df,l.internal=!1);if(this==l.PreFlag_IGNORE)return"IGNORE";null==l.PreFlag_ACCEPT_ONCE&&(l.internal=!0,l.PreFlag_ACCEPT_ONCE=new df,l.internal=!1);if(this==l.PreFlag_ACCEPT_ONCE)return"ACCEPT_ONCE";null==l.PreFlag_IGNORE_ONCE&&(l.internal=!0,
l.PreFlag_IGNORE_ONCE=new df,l.internal=!1);return this==l.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":""},__class__:df};var Ln=function(){this.zpp_inner_zn=null};i["nape.callbacks.PreListener"]=Ln;Ln.__name__=["nape","callbacks","PreListener"];Ln.__super__=ug;Ln.prototype=z(ug.prototype,{__class__:Ln});var mg=function(){this.zpp_inner.insert_cbtype(Te.ANY_CONSTRAINT.zpp_inner);if(!mg.zpp_internalAlloc)throw new h("Error: Constraint cannot be instantiated derp!");};i["nape.constraint.Constraint"]=mg;mg.__name__=
["nape","constraint","Constraint"];mg.prototype={toString:function(){return"{Constraint}"},__class__:mg};var Sg=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!$g.internal)throw new h("Error: Cannot instantiate ConstraintIterator derp!");};i["nape.constraint.ConstraintIterator"]=Sg;Sg.__name__=["nape","constraint","ConstraintIterator"];Sg.get=function(a){var b;null==Sg.zpp_pool?($g.internal=!0,b=new Sg,$g.internal=!1):(b=Sg.zpp_pool,Sg.zpp_pool=b.zpp_next);
b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Sg.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Sg.zpp_pool;Sg.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Sg};var Mn=
function(){this.zpp_inner=null;this.zpp_inner=new $g;this.zpp_inner.outer=this};i["nape.constraint.ConstraintList"]=Mn;Mn.__name__=["nape","constraint","ConstraintList"];Mn.prototype={at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){if(this.zpp_inner.immutable)throw new h("Error: ConstraintList is immutable");
this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);else{if(null==this.zpp_inner.push_ite){var c;null==this.zpp_inner.inner.head?c=null:(c=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),c=c.iterator_at(this.zpp_inner.user_length-1));this.zpp_inner.push_ite=
c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},unshift:function(a){if(this.zpp_inner.immutable)throw new h("Error: ConstraintList is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var c;null==this.zpp_inner.inner.head?
c=null:(c=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),c=c.iterator_at(this.zpp_inner.user_length-1));this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}else this.zpp_inner.inner.add(a.zpp_inner);this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},remove:function(a){if(this.zpp_inner.immutable)throw new h("Error: ConstraintList is immutable");
this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=Sg.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=
!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=Sg.zpp_pool,Sg.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Mn};var nk=function(a,b,c,d){this.zpp_inner_zn=null;this.zpp_inner=this.zpp_inner_zn=new vl;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;mg.zpp_internalAlloc=!0;mg.call(this);mg.zpp_internalAlloc=
!1;this.zpp_inner.immutable_midstep("Constraint::body1");a=null==a?null:a.zpp_inner;if(a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=(null==this.zpp_inner.space?
null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)))this.zpp_inner.wake(),null!=a&&a.wake();this.zpp_inner.immutable_midstep("Constraint::body2");b=null==b?null:b.zpp_inner;if(b!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&
this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=b,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=b&&this.zpp_inner_zn.b1!=b&&null!=b&&b.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)))this.zpp_inner.wake(),null!=b&&b.wake();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
if(null==c)throw new h("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();b=this.zpp_inner_zn.wrap_a1;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=b.zpp_inner;if(a._immutable)throw new h("Error: Vec2 is immutable");null!=a._isimmutable&&a._isimmutable();if(null==c)throw new h("Error: Cannot assign null Vec2");if(null!=
c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=c.zpp_inner;null!=a._validate&&a._validate();a=c.zpp_inner.x;if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var e=c.zpp_inner;null!=e._validate&&e._validate();e=c.zpp_inner.y;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var f=b.zpp_inner;if(f._immutable)throw new h("Error: Vec2 is immutable");null!=f._isimmutable&&f._isimmutable();if(a!=
a||e!=e)throw new h("Error: Vec2 components cannot be NaN");if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=b.zpp_inner;null!=f._validate&&f._validate();if(b.zpp_inner.x==a){if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=b.zpp_inner;null!=f._validate&&f._validate();f=b.zpp_inner.y==e}else f=!1;f||(b.zpp_inner.x=a,b.zpp_inner.y=e,b=b.zpp_inner,null!=b._invalidate&&b._invalidate(b));if(c.zpp_inner.weak){if(null!=c&&
c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=c.zpp_inner;if(b._immutable)throw new h("Error: Vec2 is immutable");null!=b._isimmutable&&b._isimmutable();if(c.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");b=c.zpp_inner;c.zpp_inner.outer=null;c.zpp_inner=null;c.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=c:o.poolVec2=c;o.nextVec2=c;c.zpp_disp=!0;null!=b.outer&&(b.outer.zpp_inner=null,b.outer=null);b._isimmutable=null;b._validate=null;b._invalidate=
null;b.next=q.zpp_pool;q.zpp_pool=b}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null==d)throw new h("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();c=this.zpp_inner_zn.wrap_a2;if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
b=c.zpp_inner;if(b._immutable)throw new h("Error: Vec2 is immutable");null!=b._isimmutable&&b._isimmutable();if(null==d)throw new h("Error: Cannot assign null Vec2");if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=d.zpp_inner;null!=b._validate&&b._validate();b=d.zpp_inner.x;if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=d.zpp_inner;null!=a._validate&&a._validate();a=d.zpp_inner.y;if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
e=c.zpp_inner;if(e._immutable)throw new h("Error: Vec2 is immutable");null!=e._isimmutable&&e._isimmutable();if(b!=b||a!=a)throw new h("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=c.zpp_inner;null!=e._validate&&e._validate();if(c.zpp_inner.x==b){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=c.zpp_inner;null!=e._validate&&e._validate();e=c.zpp_inner.y==a}else e=!1;e||(c.zpp_inner.x=
b,c.zpp_inner.y=a,c=c.zpp_inner,null!=c._invalidate&&c._invalidate(c));if(d.zpp_inner.weak){if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=d.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(d.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");c=d.zpp_inner;d.zpp_inner.outer=null;d.zpp_inner=null;d.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=d:o.poolVec2=d;o.nextVec2=d;d.zpp_disp=
!0;null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null);c._isimmutable=null;c._validate=null;c._invalidate=null;c.next=q.zpp_pool;q.zpp_pool=c}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2()};i["nape.constraint.PivotJoint"]=nk;nk.__name__=["nape","constraint","PivotJoint"];nk.__super__=mg;nk.prototype=z(mg.prototype,{__class__:nk});var ok=function(a,b,c,d,e){null==e&&(e=0);this.zpp_inner_zn=null;this.zpp_inner=this.zpp_inner_zn=new wl;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=
this;mg.zpp_internalAlloc=!0;mg.call(this);mg.zpp_internalAlloc=!1;this.zpp_inner.immutable_midstep("Constraint::body1");a=null==a?null:a.zpp_inner;if(a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),
this.zpp_inner_zn.b1=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)))this.zpp_inner.wake(),null!=a&&a.wake();this.zpp_inner.immutable_midstep("Constraint::body2");b=null==b?null:b.zpp_inner;if(b!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&
this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=b,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=b&&this.zpp_inner_zn.b1!=b&&null!=b&&b.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)))this.zpp_inner.wake(),
null!=b&&b.wake();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null==c)throw new h("Error: Constraint::anchor1 cannot be null");null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();b=this.zpp_inner_zn.wrap_a1;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=b.zpp_inner;if(a._immutable)throw new h("Error: Vec2 is immutable");
null!=a._isimmutable&&a._isimmutable();if(null==c)throw new h("Error: Cannot assign null Vec2");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=c.zpp_inner;null!=a._validate&&a._validate();a=c.zpp_inner.x;if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var f=c.zpp_inner;null!=f._validate&&f._validate();f=c.zpp_inner.y;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var g=b.zpp_inner;
if(g._immutable)throw new h("Error: Vec2 is immutable");null!=g._isimmutable&&g._isimmutable();if(a!=a||f!=f)throw new h("Error: Vec2 components cannot be NaN");if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=b.zpp_inner;null!=g._validate&&g._validate();if(b.zpp_inner.x==a){if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=b.zpp_inner;null!=g._validate&&g._validate();g=b.zpp_inner.y==f}else g=!1;g||(b.zpp_inner.x=a,
b.zpp_inner.y=f,b=b.zpp_inner,null!=b._invalidate&&b._invalidate(b));if(c.zpp_inner.weak){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=c.zpp_inner;if(b._immutable)throw new h("Error: Vec2 is immutable");null!=b._isimmutable&&b._isimmutable();if(c.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");b=c.zpp_inner;c.zpp_inner.outer=null;c.zpp_inner=null;c.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=c:o.poolVec2=c;o.nextVec2=c;c.zpp_disp=
!0;null!=b.outer&&(b.outer.zpp_inner=null,b.outer=null);b._isimmutable=null;b._validate=null;b._invalidate=null;b.next=q.zpp_pool;q.zpp_pool=b}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null==d)throw new h("Error: Constraint::anchor2 cannot be null");null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();c=this.zpp_inner_zn.wrap_a2;if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=c.zpp_inner;if(b._immutable)throw new h("Error: Vec2 is immutable");null!=b._isimmutable&&b._isimmutable();if(null==d)throw new h("Error: Cannot assign null Vec2");if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=d.zpp_inner;null!=b._validate&&b._validate();b=d.zpp_inner.x;if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=d.zpp_inner;
null!=a._validate&&a._validate();a=d.zpp_inner.y;if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=c.zpp_inner;if(f._immutable)throw new h("Error: Vec2 is immutable");null!=f._isimmutable&&f._isimmutable();if(b!=b||a!=a)throw new h("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=c.zpp_inner;null!=f._validate&&f._validate();if(c.zpp_inner.x==b){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
f=c.zpp_inner;null!=f._validate&&f._validate();f=c.zpp_inner.y==a}else f=!1;f||(c.zpp_inner.x=b,c.zpp_inner.y=a,c=c.zpp_inner,null!=c._invalidate&&c._invalidate(c));if(d.zpp_inner.weak){if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=d.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(d.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");c=d.zpp_inner;d.zpp_inner.outer=null;d.zpp_inner=
null;d.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=d:o.poolVec2=d;o.nextVec2=d;d.zpp_disp=!0;null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null);c._isimmutable=null;c._validate=null;c._invalidate=null;c.next=q.zpp_pool;q.zpp_pool=c}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();this.zpp_inner.immutable_midstep("WeldJoint::phase");if(e!=e)throw new h("Error: WeldJoint::phase cannot be NaN");this.zpp_inner_zn.phase!=e&&(this.zpp_inner_zn.phase=e,this.zpp_inner.wake())};i["nape.constraint.WeldJoint"]=
ok;ok.__name__=["nape","constraint","WeldJoint"];ok.__super__=mg;ok.prototype=z(mg.prototype,{__class__:ok});var Lh=function(){this.zpp_inner=null;if(!Gc.internal)throw new h("Error: Cannot instantiate Arbiter derp!");};i["nape.dynamics.Arbiter"]=Lh;Lh.__name__=["nape","dynamics","Arbiter"];Lh.prototype={toString:function(){var a=this.zpp_inner.type==Gc.COL?"CollisionArbiter":this.zpp_inner.type==Gc.FLUID?"FluidArbiter":"SensorArbiter";if(this.zpp_inner.cleared)return a+"(object-pooled)";if(!this.zpp_inner.active)throw new h("Error: Arbiter not currently in use");
a=a+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|";if(!this.zpp_inner.active)throw new h("Error: Arbiter not currently in use");var a=a+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")",b=this.zpp_inner.type==Gc.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"";if(!this.zpp_inner.active)throw new h("Error: Arbiter not currently in use");var c;c=this.zpp_inner.immState;
5==c?(null==l.PreFlag_ACCEPT&&(l.internal=!0,l.PreFlag_ACCEPT=new df,l.internal=!1),c=l.PreFlag_ACCEPT):1==c?(null==l.PreFlag_ACCEPT_ONCE&&(l.internal=!0,l.PreFlag_ACCEPT_ONCE=new df,l.internal=!1),c=l.PreFlag_ACCEPT_ONCE):6==c?(null==l.PreFlag_IGNORE&&(l.internal=!0,l.PreFlag_IGNORE=new df,l.internal=!1),c=l.PreFlag_IGNORE):(null==l.PreFlag_IGNORE_ONCE&&(l.internal=!0,l.PreFlag_IGNORE_ONCE=new df,l.internal=!1),c=l.PreFlag_IGNORE_ONCE);return a+b+"<-"+c.toString()},__class__:Lh};var fg=function(){this.zpp_next=
null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!Mh.internal)throw new h("Error: Cannot instantiate ArbiterIterator derp!");};i["nape.dynamics.ArbiterIterator"]=fg;fg.__name__=["nape","dynamics","ArbiterIterator"];fg.get=function(a){var b;null==fg.zpp_pool?(Mh.internal=!0,b=new fg,Mh.internal=!1):(b=fg.zpp_pool,fg.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};fg.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=
!0;if(this.zpp_i<a)return!0;this.zpp_next=fg.zpp_pool;fg.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:fg};var Nn=function(){this.zpp_inner=null;this.zpp_inner=new Mh;this.zpp_inner.outer=this};i["nape.dynamics.ArbiterList"]=Nn;Nn.__name__=["nape","dynamics","ArbiterList"];Nn.prototype={zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=
0;for(var a=this.zpp_inner.inner.head;null!=a;)a.elt.active&&this.zpp_inner.user_length++,a=a.next}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();if(0>a||a>=this.zpp_gl())throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},iterator:function(){this.zpp_vm();return fg.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner.zpp_gl();c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=fg.zpp_pool,fg.zpp_pool=
c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Nn};var pk=function(){if(!l.internal)throw new h("Error: Cannot instantiate ArbiterType derp!");};i["nape.dynamics.ArbiterType"]=pk;pk.__name__=["nape","dynamics","ArbiterType"];pk.prototype={toString:function(){null==l.ArbiterType_COLLISION&&(l.internal=!0,l.ArbiterType_COLLISION=new pk,l.internal=!1);if(this==l.ArbiterType_COLLISION)return"COLLISION";
null==l.ArbiterType_SENSOR&&(l.internal=!0,l.ArbiterType_SENSOR=new pk,l.internal=!1);if(this==l.ArbiterType_SENSOR)return"SENSOR";null==l.ArbiterType_FLUID&&(l.internal=!0,l.ArbiterType_FLUID=new pk,l.internal=!1);return this==l.ArbiterType_FLUID?"FLUID":""},__class__:pk};var xl=function(){if(!Gc.internal)throw new h("Error: Cannot instantiate CollisionArbiter derp!");Lh.call(this)};i["nape.dynamics.CollisionArbiter"]=xl;xl.__name__=["nape","dynamics","CollisionArbiter"];xl.__super__=Lh;xl.prototype=
z(Lh.prototype,{__class__:xl});var On=function(){this.zpp_inner=null;if(!sa.internal)throw new h("Error: Cannot instantiate Contact derp!");};i["nape.dynamics.Contact"]=On;On.__name__=["nape","dynamics","Contact"];On.prototype={toString:function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},__class__:On};var vg=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!kj.internal)throw new h("Error: Cannot instantiate ContactIterator derp!");
};i["nape.dynamics.ContactIterator"]=vg;vg.__name__=["nape","dynamics","ContactIterator"];vg.get=function(a){var b;null==vg.zpp_pool?(kj.internal=!0,b=new vg,kj.internal=!1):(b=vg.zpp_pool,vg.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};vg.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();if(a.zpp_inner.zip_length){a.zpp_inner.zip_length=!1;a.zpp_inner.user_length=0;for(var b=a.zpp_inner.inner.next;null!=b;){var c=
b;c.active&&c.arbiter.active&&a.zpp_inner.user_length++;b=b.next}}a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=vg.zpp_pool;vg.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:vg};var np=function(){this.zpp_inner=null};i["nape.dynamics.ContactList"]=np;np.__name__=["nape","dynamics","ContactList"];np.prototype={at:function(a){this.zpp_inner.valmod();var b;if(0<=a){this.zpp_inner.valmod();
if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(b=this.zpp_inner.inner.next;null!=b;){var c=b;c.active&&c.arbiter.active&&this.zpp_inner.user_length++;b=b.next}}b=a>=this.zpp_inner.user_length}else b=!0;if(b)throw new h("Error: Index out of bounds");if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(b=this.zpp_inner.inner.next;null!=b;)c=b,c.active&&c.arbiter.active&&
this.zpp_inner.user_length++,b=b.next}a=this.zpp_inner.user_length-1-a}if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.wrapper()},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=vg.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();if(d.zpp_inner.zip_length){d.zpp_inner.zip_length=!1;d.zpp_inner.user_length=0;for(var e=d.zpp_inner.inner.next;null!=e;){var f=e;f.active&&f.arbiter.active&&d.zpp_inner.user_length++;e=e.next}}d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=vg.zpp_pool,vg.zpp_pool=
c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:np};var yl=function(){if(!Gc.internal)throw new h("Error: Cannot instantiate FluidArbiter derp!");Lh.call(this)};i["nape.dynamics.FluidArbiter"]=yl;yl.__name__=["nape","dynamics","FluidArbiter"];yl.__super__=Lh;yl.prototype=z(Lh.prototype,{__class__:yl});var Pn=function(a,b,c,d,e,f){null==f&&(f=-1);null==e&&(e=1);null==d&&(d=-1);null==c&&(c=1);
null==b&&(b=-1);null==a&&(a=1);this.zpp_inner=null;null==Be.zpp_pool?this.zpp_inner=new Be:(this.zpp_inner=Be.zpp_pool,Be.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);this.zpp_inner.outer=this;this.zpp_inner.collisionGroup!=a&&(this.zpp_inner.collisionGroup=a,this.zpp_inner.invalidate());this.zpp_inner.collisionMask!=b&&(this.zpp_inner.collisionMask=b,this.zpp_inner.invalidate());this.zpp_inner.sensorGroup!=c&&(this.zpp_inner.sensorGroup=c,this.zpp_inner.invalidate());this.zpp_inner.sensorMask!=
d&&(this.zpp_inner.sensorMask=d,this.zpp_inner.invalidate());this.zpp_inner.fluidGroup!=e&&(this.zpp_inner.fluidGroup=e,this.zpp_inner.invalidate());this.zpp_inner.fluidMask!=f&&(this.zpp_inner.fluidMask=f,this.zpp_inner.invalidate())};i["nape.dynamics.InteractionFilter"]=Pn;Pn.__name__=["nape","dynamics","InteractionFilter"];Pn.prototype={__class__:Pn};var op=function(){this.zpp_inner=null};i["nape.dynamics.InteractionGroup"]=op;op.__name__=["nape","dynamics","InteractionGroup"];op.prototype={toString:function(){var a=
"InteractionGroup";this.zpp_inner.ignore&&(a+=":ignore");return a},__class__:op};var Hg=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!lj.internal)throw new h("Error: Cannot instantiate InteractionGroupIterator derp!");};i["nape.dynamics.InteractionGroupIterator"]=Hg;Hg.__name__=["nape","dynamics","InteractionGroupIterator"];Hg.get=function(a){var b;null==Hg.zpp_pool?(lj.internal=!0,b=new Hg,lj.internal=!1):(b=Hg.zpp_pool,Hg.zpp_pool=b.zpp_next);b.zpp_i=0;
b.zpp_inner=a;b.zpp_critical=!1;return b};Hg.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Hg.zpp_pool;Hg.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Hg};var pp=function(){this.zpp_inner=
null};i["nape.dynamics.InteractionGroupList"]=pp;pp.__name__=["nape","dynamics","InteractionGroupList"];pp.prototype={at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,
this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=Hg.get(this);;){c.zpp_inner.zpp_inner.valmod();
var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=Hg.zpp_pool,Hg.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:pp};var Qn=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.zpp_inner=null;if(a!=
a||b!=b)throw new h("Error: AABB position cannot be NaN");if(c!=c||d!=d)throw new h("Error: AABB dimensions cannot be NaN");var e;null==sb.zpp_pool?e=new sb:(e=sb.zpp_pool,sb.zpp_pool=e.next,e.next=null);e.minx=a;e.miny=b;e.maxx=a+c;e.maxy=b+d;this.zpp_inner=e;this.zpp_inner.outer=this};i["nape.geom.AABB"]=Qn;Qn.__name__=["nape","geom","AABB"];Qn.prototype={toString:function(){var a=this.zpp_inner;null!=a._validate&&a._validate();return this.zpp_inner.toString()},__class__:Qn};var qp=function(){this.zpp_inner=
null};i["nape.geom.ConvexResult"]=qp;qp.__name__=["nape","geom","ConvexResult"];qp.prototype={toString:function(){if(null!=this.zpp_inner.next)throw new h("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw new h("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw new h("Error: This object has been disposed of and cannot be used");return"{ shape: "+L.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+
" }"},__class__:qp};var Ue=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!mj.internal)throw new h("Error: Cannot instantiate ConvexResultIterator derp!");};i["nape.geom.ConvexResultIterator"]=Ue;Ue.__name__=["nape","geom","ConvexResultIterator"];Ue.get=function(a){var b;null==Ue.zpp_pool?(mj.internal=!0,b=new Ue,mj.internal=!1):(b=Ue.zpp_pool,Ue.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Ue.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Ue.zpp_pool;Ue.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Ue};var rp=function(){this.zpp_inner=null};i["nape.geom.ConvexResultList"]=rp;rp.__name__=["nape","geom","ConvexResultList"];rp.prototype=
{at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-1-a);if(a<this.zpp_inner.at_index||
null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=Ue.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);
d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=Ue.zpp_pool,Ue.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:rp};var sf=function(a){this.zpp_pool=this.zpp_inner=null;this.zpp_inner=new Rn(this);if(null!=a){if(a instanceof Array&&null==a.__enum__)for(var b=0;b<a.length;){var c=a[b];++b;if(null==c)throw new h("Error: Array<Vec2> contains null objects");if(!y.__instanceof(c,
ja))throw new h("Error: Array<Vec2> contains non Vec2 objects");var d=c;if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=d.zpp_inner;null!=c._validate&&c._validate();c=d.zpp_inner.x;if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var e=d.zpp_inner;null!=e._validate&&e._validate();d=d.zpp_inner.y;null==Bc.zpp_pool?e=new Bc:(e=Bc.zpp_pool,
Bc.zpp_pool=e.next,e.next=null);e.forced=!1;e.x=c;e.y=d;c=e;null==this.zpp_inner.vertices?this.zpp_inner.vertices=c.prev=c.next=c:(c.prev=this.zpp_inner.vertices,c.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=c,this.zpp_inner.vertices.next=c);this.zpp_inner.vertices=c}else if(y.__instanceof(a,Cf))for(b=a.iterator();;){b.zpp_inner.zpp_inner.valmod();c=b.zpp_inner.zpp_gl();b.zpp_critical=!0;b.zpp_i<c?c=!0:(b.zpp_next=od.zpp_pool,od.zpp_pool=b,b.zpp_inner=null,c=!1);if(!c)break;
b.zpp_critical=!1;d=b.zpp_inner.at(b.zpp_i++);if(null==d)throw new h("Error: Vec2List contains null objects");if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=d.zpp_inner;null!=c._validate&&c._validate();c=d.zpp_inner.x;if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;null!=e._validate&&e._validate();d=d.zpp_inner.y;null==
Bc.zpp_pool?e=new Bc:(e=Bc.zpp_pool,Bc.zpp_pool=e.next,e.next=null);e.forced=!1;e.x=c;e.y=d;c=e;null==this.zpp_inner.vertices?this.zpp_inner.vertices=c.prev=c.next=c:(c.prev=this.zpp_inner.vertices,c.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=c,this.zpp_inner.vertices.next=c);this.zpp_inner.vertices=c}else if(y.__instanceof(a,sf)){if(null!=a&&a.zpp_disp)throw new h("Error: GeomPoly has been disposed and cannot be used!");b=a.zpp_inner.vertices;if(null!=b)for(c=b;;){var e=
c.x,f=c.y;if(e!=e||f!=f)throw new h("Error: Vec2 components cannot be NaN");null==o.poolVec2?d=new ja:(d=o.poolVec2,o.poolVec2=d.zpp_pool,d.zpp_pool=null,d.zpp_disp=!1,d==o.nextVec2&&(o.nextVec2=null));if(null==d.zpp_inner){var g;null==q.zpp_pool?g=new q:(g=q.zpp_pool,q.zpp_pool=g.next,g.next=null);g.weak=!1;g._immutable=!1;g.x=e;g.y=f;d.zpp_inner=g;d.zpp_inner.outer=d}else{if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=d.zpp_inner;if(g._immutable)throw new h("Error: Vec2 is immutable");
null!=g._isimmutable&&g._isimmutable();if(e!=e||f!=f)throw new h("Error: Vec2 components cannot be NaN");if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=d.zpp_inner;null!=g._validate&&g._validate();if(d.zpp_inner.x==e){if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=d.zpp_inner;null!=g._validate&&g._validate();g=d.zpp_inner.y==f}else g=!1;g||(d.zpp_inner.x=e,d.zpp_inner.y=f,e=d.zpp_inner,null!=e._invalidate&&e._invalidate(e))}d.zpp_inner.weak=
!1;c=c.next;if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;null!=e._validate&&e._validate();e=d.zpp_inner.x;if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=d.zpp_inner;null!=f._validate&&f._validate();f=d.zpp_inner.y;null==Bc.zpp_pool?g=new Bc:(g=Bc.zpp_pool,Bc.zpp_pool=g.next,g.next=null);g.forced=!1;g.x=e;g.y=f;e=g;null==this.zpp_inner.vertices?this.zpp_inner.vertices=e.prev=e.next=e:(e.prev=this.zpp_inner.vertices,
e.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=e,this.zpp_inner.vertices.next=e);this.zpp_inner.vertices=e;if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;if(e._immutable)throw new h("Error: Vec2 is immutable");null!=e._isimmutable&&e._isimmutable();if(d.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");e=d.zpp_inner;d.zpp_inner.outer=null;d.zpp_inner=null;d.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=
d:o.poolVec2=d;o.nextVec2=d;d.zpp_disp=!0;d=e;null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d._isimmutable=null;d._validate=null;d._invalidate=null;d.next=q.zpp_pool;q.zpp_pool=d;if(c==b)break}}else throw new h("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");this.skipForward(1);if(a instanceof Array&&null==a.__enum__)for(b=0;b<a.length;){c=a[b];if(c.zpp_inner.weak){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(c.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");d=c.zpp_inner;c.zpp_inner.outer=null;c.zpp_inner=null;c.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=c:o.poolVec2=c;o.nextVec2=c;c.zpp_disp=!0;c=d;null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null);c._isimmutable=null;c._validate=null;c._invalidate=null;c.next=q.zpp_pool;q.zpp_pool=c;c=!0}else c=!1;c?a.splice(b,
1):++b}else if(y.__instanceof(a,Cf)){null!=a.zpp_inner._validate&&a.zpp_inner._validate();a=a.zpp_inner.inner;b=null;for(c=a.head;null!=c;)if(d=c.elt,d.outer.zpp_inner.weak){if(c=a.erase(b),d.outer.zpp_inner.weak){d=d.outer;if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;if(e._immutable)throw new h("Error: Vec2 is immutable");null!=e._isimmutable&&e._isimmutable();if(d.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");e=d.zpp_inner;
d.zpp_inner.outer=null;d.zpp_inner=null;d.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=d:o.poolVec2=d;o.nextVec2=d;d.zpp_disp=!0;d=e;null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d._isimmutable=null;d._validate=null;d._invalidate=null;d.next=q.zpp_pool;q.zpp_pool=d}}else b=c,c=c.next}}};i["nape.geom.GeomPoly"]=sf;sf.__name__=["nape","geom","GeomPoly"];sf.get=function(a){var b;null==o.poolGeomPoly?b=new sf:(b=o.poolGeomPoly,o.poolGeomPoly=b.zpp_pool,b.zpp_pool=null,b.zpp_disp=!1,b==o.nextGeomPoly&&
(o.nextGeomPoly=null));if(null!=a){if(a instanceof Array&&null==a.__enum__)for(var c=0;c<a.length;){var d=a[c];++c;if(null==d)throw new h("Error: Array<Vec2> contains null objects");if(!y.__instanceof(d,ja))throw new h("Error: Array<Vec2> contains non Vec2 objects");var e=d;if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=e.zpp_inner;null!=d._validate&&d._validate();d=e.zpp_inner.x;
if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var f=e.zpp_inner;null!=f._validate&&f._validate();e=e.zpp_inner.y;null==Bc.zpp_pool?f=new Bc:(f=Bc.zpp_pool,Bc.zpp_pool=f.next,f.next=null);f.forced=!1;f.x=d;f.y=e;d=f;null==b.zpp_inner.vertices?b.zpp_inner.vertices=d.prev=d.next=d:(d.prev=b.zpp_inner.vertices,d.next=b.zpp_inner.vertices.next,b.zpp_inner.vertices.next.prev=d,b.zpp_inner.vertices.next=d);b.zpp_inner.vertices=d}else if(y.__instanceof(a,Cf))for(c=
a.iterator();;){c.zpp_inner.zpp_inner.valmod();d=c.zpp_inner.zpp_gl();c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=od.zpp_pool,od.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;e=c.zpp_inner.at(c.zpp_i++);if(null==e)throw new h("Error: Vec2List contains null objects");if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=e.zpp_inner;null!=d._validate&&d._validate();
d=e.zpp_inner.x;if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=e.zpp_inner;null!=f._validate&&f._validate();e=e.zpp_inner.y;null==Bc.zpp_pool?f=new Bc:(f=Bc.zpp_pool,Bc.zpp_pool=f.next,f.next=null);f.forced=!1;f.x=d;f.y=e;d=f;null==b.zpp_inner.vertices?b.zpp_inner.vertices=d.prev=d.next=d:(d.prev=b.zpp_inner.vertices,d.next=b.zpp_inner.vertices.next,b.zpp_inner.vertices.next.prev=d,b.zpp_inner.vertices.next=d);b.zpp_inner.vertices=d}else if(y.__instanceof(a,
sf)){if(null!=a&&a.zpp_disp)throw new h("Error: GeomPoly has been disposed and cannot be used!");c=a.zpp_inner.vertices;if(null!=c)for(d=c;;){var f=d.x,g=d.y;if(f!=f||g!=g)throw new h("Error: Vec2 components cannot be NaN");null==o.poolVec2?e=new ja:(e=o.poolVec2,o.poolVec2=e.zpp_pool,e.zpp_pool=null,e.zpp_disp=!1,e==o.nextVec2&&(o.nextVec2=null));if(null==e.zpp_inner){var j;null==q.zpp_pool?j=new q:(j=q.zpp_pool,q.zpp_pool=j.next,j.next=null);j.weak=!1;j._immutable=!1;j.x=f;j.y=g;e.zpp_inner=j;e.zpp_inner.outer=
e}else{if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=e.zpp_inner;if(j._immutable)throw new h("Error: Vec2 is immutable");null!=j._isimmutable&&j._isimmutable();if(f!=f||g!=g)throw new h("Error: Vec2 components cannot be NaN");if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=e.zpp_inner;null!=j._validate&&j._validate();if(e.zpp_inner.x==f){if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
j=e.zpp_inner;null!=j._validate&&j._validate();j=e.zpp_inner.y==g}else j=!1;j||(e.zpp_inner.x=f,e.zpp_inner.y=g,f=e.zpp_inner,null!=f._invalidate&&f._invalidate(f))}e.zpp_inner.weak=!1;d=d.next;if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=e.zpp_inner;null!=f._validate&&f._validate();f=e.zpp_inner.x;if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=e.zpp_inner;null!=g._validate&&g._validate();g=e.zpp_inner.y;null==
Bc.zpp_pool?j=new Bc:(j=Bc.zpp_pool,Bc.zpp_pool=j.next,j.next=null);j.forced=!1;j.x=f;j.y=g;f=j;null==b.zpp_inner.vertices?b.zpp_inner.vertices=f.prev=f.next=f:(f.prev=b.zpp_inner.vertices,f.next=b.zpp_inner.vertices.next,b.zpp_inner.vertices.next.prev=f,b.zpp_inner.vertices.next=f);b.zpp_inner.vertices=f;if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=e.zpp_inner;if(f._immutable)throw new h("Error: Vec2 is immutable");null!=f._isimmutable&&f._isimmutable();
if(e.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");f=e.zpp_inner;e.zpp_inner.outer=null;e.zpp_inner=null;e.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=e:o.poolVec2=e;o.nextVec2=e;e.zpp_disp=!0;e=f;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null);e._isimmutable=null;e._validate=null;e._invalidate=null;e.next=q.zpp_pool;q.zpp_pool=e;if(d==c)break}}else throw new h("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");
b.skipForward(1);if(a instanceof Array&&null==a.__enum__)for(c=0;c<a.length;){d=a[c];if(d.zpp_inner.weak){if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;if(e._immutable)throw new h("Error: Vec2 is immutable");null!=e._isimmutable&&e._isimmutable();if(d.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");e=d.zpp_inner;d.zpp_inner.outer=null;d.zpp_inner=null;d.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=d:o.poolVec2=d;o.nextVec2=
d;d.zpp_disp=!0;d=e;null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d._isimmutable=null;d._validate=null;d._invalidate=null;d.next=q.zpp_pool;q.zpp_pool=d;d=!0}else d=!1;d?a.splice(c,1):++c}else if(y.__instanceof(a,Cf)){null!=a.zpp_inner._validate&&a.zpp_inner._validate();a=a.zpp_inner.inner;c=null;for(d=a.head;null!=d;)if(e=d.elt,e.outer.zpp_inner.weak){if(d=a.erase(c),e.outer.zpp_inner.weak){e=e.outer;if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=
e.zpp_inner;if(f._immutable)throw new h("Error: Vec2 is immutable");null!=f._isimmutable&&f._isimmutable();if(e.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");f=e.zpp_inner;e.zpp_inner.outer=null;e.zpp_inner=null;e.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=e:o.poolVec2=e;o.nextVec2=e;e.zpp_disp=!0;e=f;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null);e._isimmutable=null;e._validate=null;e._invalidate=null;e.next=q.zpp_pool;q.zpp_pool=e}}else c=d,d=d.next}}return b};
sf.prototype={skipForward:function(a){if(this.zpp_disp)throw new h("Error: GeomPoly has been disposed and cannot be used!");if(null!=this.zpp_inner.vertices)if(0<a)for(;0<a--;)this.zpp_inner.vertices=this.zpp_inner.vertices.next;else if(0>a)for(;0>a++;)this.zpp_inner.vertices=this.zpp_inner.vertices.prev;return this},clear:function(){if(this.zpp_disp)throw new h("Error: GeomPoly has been disposed and cannot be used!");for(;null!=this.zpp_inner.vertices;){var a=this.zpp_inner.vertices,b;null!=this.zpp_inner.vertices&&
this.zpp_inner.vertices.prev==this.zpp_inner.vertices?(this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,b=this.zpp_inner.vertices=null):(b=this.zpp_inner.vertices.next,this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null);this.zpp_inner.vertices=b;if(null!=a.wrap){a.wrap.zpp_inner._inuse=!1;b=a.wrap;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var c=b.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(b.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");c=b.zpp_inner;b.zpp_inner.outer=null;b.zpp_inner=null;b.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=b:o.poolVec2=b;o.nextVec2=b;b.zpp_disp=!0;b=c;null!=b.outer&&(b.outer.zpp_inner=null,b.outer=null);b._isimmutable=null;b._validate=null;b._invalidate=null;b.next=q.zpp_pool;q.zpp_pool=b;a.wrap=null}a.prev=a.next=
null;a.next=Bc.zpp_pool;Bc.zpp_pool=a}return this},dispose:function(){if(this.zpp_disp)throw new h("Error: GeomPoly has been disposed and cannot be used!");this.clear();this.zpp_pool=null;null!=o.nextGeomPoly?o.nextGeomPoly.zpp_pool=this:o.poolGeomPoly=this;o.nextGeomPoly=this;this.zpp_disp=!0},toString:function(){var a="GeomPoly[",b=this.zpp_inner.vertices,c=this.zpp_inner.vertices;if(null!=b)for(;;){var d=b;d!=this.zpp_inner.vertices&&(a+=",");a+="{"+d.x+","+d.y+"}";b=b.next;if(b==c)break}return a+
"]"},contains:function(a){if(this.zpp_disp)throw new h("Error: GeomPoly has been disposed and cannot be used!");if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null==a)throw new h("Error: GeomPoly::contains point cannot be null");if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var b=a.zpp_inner;null!=b._validate&&b._validate();b=a.zpp_inner.x;if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var c=a.zpp_inner;null!=c._validate&&c._validate();var c=a.zpp_inner.y,d=!1,e=this.zpp_inner.vertices,f=this.zpp_inner.vertices;if(null!=e)for(;;){var g=e,j=g.prev;if((g.y<c&&j.y>=c||j.y<c&&g.y>=c)&&(g.x<=b||j.x<=b))g.x+(c-g.y)/(j.y-g.y)*(j.x-g.x)<b&&(d=!d);e=e.next;if(e==f)break}b=d;if(a.zpp_inner.weak){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=a.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();
if(a.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");c=a.zpp_inner;a.zpp_inner.outer=null;a.zpp_inner=null;a.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=a:o.poolVec2=a;o.nextVec2=a;a.zpp_disp=!0;null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null);c._isimmutable=null;c._validate=null;c._invalidate=null;c.next=q.zpp_pool;q.zpp_pool=c}return b},convexDecomposition:function(a,b){null==a&&(a=!1);if(this.zpp_disp)throw new h("Error: GeomPoly has been disposed and cannot be used!");
if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)throw new h("Error: Cannot decompose a degenerate polygon");var c=this.zpp_inner.vertices;null==Tb.sharedPPoly&&(Tb.sharedPPoly=new kf);c=Tb.decompose(c,Tb.sharedPPoly);null==kf.sharedPPList&&(kf.sharedPPList=new zl);for(var c=c.extract_partitions(kf.sharedPPList),d=null==b?new Sn:b;null!=c.head;){var e=c.pop_unsafe();Pa.triangulate(e);a&&Pa.optimise(e);qk.optimise(e);null==
kf.sharedGVList&&(kf.sharedGVList=new Al);var f=e.extract(kf.sharedGVList);e.next=kf.zpp_pool;for(kf.zpp_pool=e;null!=f.head;){var e=f.pop_unsafe(),g=sf.get();g.zpp_inner.vertices=e;d.zpp_inner.reverse_flag?d.push(g):d.unshift(g)}}return d},__class__:sf};var pd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!Ei.internal)throw new h("Error: Cannot instantiate GeomPolyIterator derp!");};i["nape.geom.GeomPolyIterator"]=pd;pd.__name__=["nape","geom","GeomPolyIterator"];
pd.get=function(a){var b;null==pd.zpp_pool?(Ei.internal=!0,b=new pd,Ei.internal=!1):(b=pd.zpp_pool,pd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};pd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=pd.zpp_pool;pd.zpp_pool=this;this.zpp_inner=
null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:pd};var Sn=function(){this.zpp_inner=null;this.zpp_inner=new Ei;this.zpp_inner.outer=this};i["nape.geom.GeomPolyList"]=Sn;Sn.__name__=["nape","geom","GeomPolyList"];Sn.prototype={at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a>=this.zpp_inner.user_length):
b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;
return this.zpp_inner.at_ite.elt.outer},push:function(a){if(this.zpp_inner.immutable)throw new h("Error: GeomPolyList is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);else{if(null==this.zpp_inner.push_ite){var c;null==this.zpp_inner.inner.head?c=null:(c=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=
!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),c=c.iterator_at(this.zpp_inner.user_length-1));this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},unshift:function(a){if(this.zpp_inner.immutable)throw new h("Error: GeomPolyList is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?
this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var c;null==this.zpp_inner.inner.head?c=null:(c=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),c=c.iterator_at(this.zpp_inner.user_length-1));this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}else this.zpp_inner.inner.add(a.zpp_inner);
this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=pd.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=pd.zpp_pool,pd.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=
!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Sn};var Bl=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.zpp_inner=null;this.zpp_inner=gi.get();this.zpp_inner.outer=this;if(a!=a)throw new h("Error: Mat23::a cannot be NaN");this.zpp_inner.a=a;a=this.zpp_inner;null!=a._invalidate&&a._invalidate();if(b!=b)throw new h("Error: Mat23::b cannot be NaN");this.zpp_inner.b=b;b=this.zpp_inner;
null!=b._invalidate&&b._invalidate();if(e!=e)throw new h("Error: Mat23::tx cannot be NaN");this.zpp_inner.tx=e;e=this.zpp_inner;null!=e._invalidate&&e._invalidate();if(c!=c)throw new h("Error: Mat23::c cannot be NaN");this.zpp_inner.c=c;c=this.zpp_inner;null!=c._invalidate&&c._invalidate();if(d!=d)throw new h("Error: Mat23::d cannot be NaN");this.zpp_inner.d=d;d=this.zpp_inner;null!=d._invalidate&&d._invalidate();if(f!=f)throw new h("Error: Mat23::ty cannot be NaN");this.zpp_inner.ty=f;f=this.zpp_inner;
null!=f._invalidate&&f._invalidate()};i["nape.geom.Mat23"]=Bl;Bl.__name__=["nape","geom","Mat23"];Bl.prototype={singular:function(){var a=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d,b=this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c;0>b&&(b=-b);return a>u.illConditionedThreshold*b},toString:function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+
" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},equiorthogonal:function(){if(this.singular())return!1;var a=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;return a*a<u.epsilon?(a=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-this.zpp_inner.c*this.zpp_inner.c-this.zpp_inner.d*this.zpp_inner.d,a*a<u.epsilon):!1},__class__:Bl};var sp=function(){this.zpp_inner=null};i["nape.geom.MatMN"]=sp;sp.__name__=["nape","geom","MatMN"];sp.prototype={toString:function(){for(var a=
"{ ",b=!0,c=0,d=this.zpp_inner.m;c<d;){var e=c++;b||(a+="; ");for(var b=!1,f=0,g=this.zpp_inner.n;f<g;){var j=f++;if(0>e||0>j||e>=this.zpp_inner.m||j>=this.zpp_inner.n)throw new h("Error: MatMN indices out of range");a+=this.zpp_inner.x[e*this.zpp_inner.n+j]+" "}}return a+"}"},__class__:sp};var tp=function(){this.zpp_inner=null};i["nape.geom.RayResult"]=tp;tp.__name__=["nape","geom","RayResult"];tp.prototype={toString:function(){if(null!=this.zpp_inner.next)throw new h("Error: This object has been disposed of and cannot be used");
if(null!=this.zpp_inner.next)throw new h("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw new h("Error: This object has been disposed of and cannot be used");if(null!=this.zpp_inner.next)throw new h("Error: This object has been disposed of and cannot be used");return"{ shape: "+L.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+L.string(this.zpp_inner.inner)+" }"},__class__:tp};var Oe=function(){this.zpp_next=null;this.zpp_critical=
!1;this.zpp_i=0;this.zpp_inner=null;if(!nj.internal)throw new h("Error: Cannot instantiate RayResultIterator derp!");};i["nape.geom.RayResultIterator"]=Oe;Oe.__name__=["nape","geom","RayResultIterator"];Oe.get=function(a){var b;null==Oe.zpp_pool?(nj.internal=!0,b=new Oe,nj.internal=!1):(b=Oe.zpp_pool,Oe.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Oe.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&
(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Oe.zpp_pool;Oe.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Oe};var up=function(){this.zpp_inner=null};i["nape.geom.RayResultList"]=up;up.__name__=["nape","geom","RayResultList"];up.prototype={at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=
this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=Oe.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=
Oe.zpp_pool,Oe.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:up};var ja=function(a,b){null==b&&(b=0);null==a&&(a=0);this.zpp_inner=this.zpp_pool=null;if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");var c;null==q.zpp_pool?c=new q:(c=q.zpp_pool,q.zpp_pool=c.next,c.next=null);c.weak=!1;c._immutable=!1;c.x=a;c.y=b;this.zpp_inner=c;this.zpp_inner.outer=this};i["nape.geom.Vec2"]=
ja;ja.__name__=["nape","geom","Vec2"];ja.weak=function(a,b){null==b&&(b=0);null==a&&(a=0);if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");var c;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner){var d;null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=!1;d.x=a;d.y=b;c.zpp_inner=d;c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(c.zpp_inner.x==a){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=c.zpp_inner.y==b}else d=!1;d||(c.zpp_inner.x=
a,c.zpp_inner.y=b,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;return c};ja.get=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");var d;null==o.poolVec2?d=new ja:(d=o.poolVec2,o.poolVec2=d.zpp_pool,d.zpp_pool=null,d.zpp_disp=!1,d==o.nextVec2&&(o.nextVec2=null));if(null==d.zpp_inner){var e;null==q.zpp_pool?e=new q:(e=q.zpp_pool,q.zpp_pool=e.next,e.next=null);e.weak=!1;e._immutable=!1;e.x=a;e.y=
b;d.zpp_inner=e;d.zpp_inner.outer=d}else{if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;if(e._immutable)throw new h("Error: Vec2 is immutable");null!=e._isimmutable&&e._isimmutable();if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;null!=e._validate&&e._validate();if(d.zpp_inner.x==a){if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
e=d.zpp_inner;null!=e._validate&&e._validate();e=d.zpp_inner.y==b}else e=!1;e||(d.zpp_inner.x=a,d.zpp_inner.y=b,a=d.zpp_inner,null!=a._invalidate&&a._invalidate(a))}d.zpp_inner.weak=c;return d};ja.fromPolar=function(a,b,c){null==c&&(c=!1);if(a!=a)throw new h("Error: Vec2::length cannot be NaN");if(b!=b)throw new h("Error: Vec2::angle cannot be NaN");var d=a*Math.cos(b),b=a*Math.sin(b);if(d!=d||b!=b)throw new h("Error: Vec2 components cannot be NaN");null==o.poolVec2?a=new ja:(a=o.poolVec2,o.poolVec2=
a.zpp_pool,a.zpp_pool=null,a.zpp_disp=!1,a==o.nextVec2&&(o.nextVec2=null));if(null==a.zpp_inner){var e;null==q.zpp_pool?e=new q:(e=q.zpp_pool,q.zpp_pool=e.next,e.next=null);e.weak=!1;e._immutable=!1;e.x=d;e.y=b;a.zpp_inner=e;a.zpp_inner.outer=a}else{if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=a.zpp_inner;if(e._immutable)throw new h("Error: Vec2 is immutable");null!=e._isimmutable&&e._isimmutable();if(d!=d||b!=b)throw new h("Error: Vec2 components cannot be NaN");
if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=a.zpp_inner;null!=e._validate&&e._validate();if(a.zpp_inner.x==d){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=a.zpp_inner;null!=e._validate&&e._validate();e=a.zpp_inner.y==b}else e=!1;e||(a.zpp_inner.x=d,a.zpp_inner.y=b,d=a.zpp_inner,null!=d._invalidate&&d._invalidate(d))}a.zpp_inner.weak=c;return a};ja.dsq=function(a,b){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null==a||null==b)throw new h("Error: Cannot compute squared distance between null Vec2");if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var c=a.zpp_inner;null!=c._validate&&c._validate();c=a.zpp_inner.x;if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var d=a.zpp_inner;null!=d._validate&&d._validate();d=a.zpp_inner.y;if(null!=b&&
b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var e=b.zpp_inner;null!=e._validate&&e._validate();e=b.zpp_inner.x;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var f=b.zpp_inner;null!=f._validate&&f._validate();var g=f=0,f=c-e,g=d-b.zpp_inner.y,c=f*f+g*g;if(a.zpp_inner.weak){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=a.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");
null!=d._isimmutable&&d._isimmutable();if(a.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");d=a.zpp_inner;a.zpp_inner.outer=null;a.zpp_inner=null;a.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=a:o.poolVec2=a;o.nextVec2=a;a.zpp_disp=!0;null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d._isimmutable=null;d._validate=null;d._invalidate=null;d.next=q.zpp_pool;q.zpp_pool=d}if(b.zpp_inner.weak){if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=b.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(b.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");d=b.zpp_inner;b.zpp_inner.outer=null;b.zpp_inner=null;b.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=b:o.poolVec2=b;o.nextVec2=b;b.zpp_disp=!0;null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d._isimmutable=null;d._validate=null;d._invalidate=null;d.next=q.zpp_pool;q.zpp_pool=d}return c};ja.distance=function(a,
b){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null==a||null==b)throw new h("Error: Cannot compute squared distance between null Vec2");if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var c=a.zpp_inner;null!=c._validate&&c._validate();c=a.zpp_inner.x;if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var d=a.zpp_inner;null!=d._validate&&d._validate();d=a.zpp_inner.y;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var e=b.zpp_inner;null!=e._validate&&e._validate();e=b.zpp_inner.x;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var f=b.zpp_inner;null!=f._validate&&f._validate();var g=f=0,f=c-e,g=d-b.zpp_inner.y,c=Math.sqrt(f*f+g*g);if(a.zpp_inner.weak){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=a.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(a.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");d=a.zpp_inner;a.zpp_inner.outer=null;a.zpp_inner=null;a.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=a:o.poolVec2=a;o.nextVec2=a;a.zpp_disp=!0;null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d._isimmutable=null;d._validate=null;d._invalidate=null;d.next=q.zpp_pool;q.zpp_pool=d}if(b.zpp_inner.weak){if(null!=b&&
b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=b.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(b.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");d=b.zpp_inner;b.zpp_inner.outer=null;b.zpp_inner=null;b.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=b:o.poolVec2=b;o.nextVec2=b;b.zpp_disp=!0;null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d._isimmutable=null;d._validate=null;d._invalidate=
null;d.next=q.zpp_pool;q.zpp_pool=d}return c};ja.prototype={toString:function(){if(this.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var a=this.zpp_inner;null!=a._validate&&a._validate();return this.zpp_inner.toString()},__class__:ja};var od=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!Fi.internal)throw new h("Error: Cannot instantiate Vec2Iterator derp!");};i["nape.geom.Vec2Iterator"]=od;od.__name__=["nape","geom","Vec2Iterator"];
od.get=function(a){var b;null==od.zpp_pool?(Fi.internal=!0,b=new od,Fi.internal=!1):(b=od.zpp_pool,od.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};od.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=od.zpp_pool;od.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:od};var Cf=function(){this.zpp_inner=
null;this.zpp_inner=new Fi;this.zpp_inner.outer=this};i["nape.geom.Vec2List"]=Cf;Cf.__name__=["nape","geom","Vec2List"];Cf.fromArray=function(a){if(null==a)throw new h("Error: Cannot convert null Array to Nape list");for(var b=new Cf,c=0;c<a.length;){var d=a[c];++c;b.push(d)}return b};Cf.prototype={zpp_gl:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},
at:function(a){this.zpp_vm();if(0>a||a>=this.zpp_gl())throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;a=this.zpp_inner.at_ite.elt;if(null==a.outer){a.outer=new ja;var b=a.outer.zpp_inner;null!=b.outer&&
(b.outer.zpp_inner=null,b.outer=null);b._isimmutable=null;b._validate=null;b._invalidate=null;b.next=q.zpp_pool;q.zpp_pool=b;a.outer.zpp_inner=a}return a.outer},push:function(a){if(this.zpp_inner.immutable)throw new h("Error: Vec2List is immutable");this.zpp_inner.modify_test();this.zpp_vm();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;b&&(this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-
1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a));return b},empty:function(){return 0==this.zpp_gl()},iterator:function(){this.zpp_vm();return od.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner.zpp_gl();c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=od.zpp_pool,od.zpp_pool=c,c.zpp_inner=null,d=!1);
if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Cf};var vp=function(){this.zpp_inner=null};i["nape.geom.Vec3"]=vp;vp.__name__=["nape","geom","Vec3"];vp.prototype={toString:function(){if(this.zpp_disp)throw new h("Error: Vec3 has been disposed and cannot be used!");if(this.zpp_disp)throw new h("Error: Vec3 has been disposed and cannot be used!");var a=this.zpp_inner;null!=a._validate&&a._validate();a="{ x: "+this.zpp_inner.x+
" y: ";if(this.zpp_disp)throw new h("Error: Vec3 has been disposed and cannot be used!");var b=this.zpp_inner;null!=b._validate&&b._validate();a=a+this.zpp_inner.y+" z: ";if(this.zpp_disp)throw new h("Error: Vec3 has been disposed and cannot be used!");b=this.zpp_inner;null!=b._validate&&b._validate();return a+this.zpp_inner.z+" }"},__class__:vp};var rk=function(){if(!l.internal)throw new h("Error: Cannot instantiate Winding derp!");};i["nape.geom.Winding"]=rk;rk.__name__=["nape","geom","Winding"];
rk.prototype={toString:function(){null==l.Winding_UNDEFINED&&(l.internal=!0,l.Winding_UNDEFINED=new rk,l.internal=!1);if(this==l.Winding_UNDEFINED)return"UNDEFINED";null==l.Winding_CLOCKWISE&&(l.internal=!0,l.Winding_CLOCKWISE=new rk,l.internal=!1);if(this==l.Winding_CLOCKWISE)return"CLOCKWISE";null==l.Winding_ANTICLOCKWISE&&(l.internal=!0,l.Winding_ANTICLOCKWISE=new rk,l.internal=!1);return this==l.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""},__class__:rk};var $e=function(){this.zpp_inner_i=null;if(!$e.zpp_internalAlloc)throw new h("Error: Cannot instantiate an Interactor, only Shape/Body/Compound");
};i["nape.phys.Interactor"]=$e;$e.__name__=["nape","phys","Interactor"];$e.prototype={toString:function(){return""},__class__:$e};var tf=function(a,b){this.zpp_inner=null;$e.zpp_internalAlloc=!0;$e.call(this);$e.zpp_internalAlloc=!1;this.zpp_inner=new hi;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;if(null!=b){if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var c=b.zpp_inner;null!=c._validate&&c._validate();this.zpp_inner.posx=b.zpp_inner.x;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=b.zpp_inner;null!=c._validate&&c._validate();this.zpp_inner.posy=b.zpp_inner.y}else this.zpp_inner.posx=0,this.zpp_inner.posy=0;null==a?(null==l.BodyType_DYNAMIC&&(l.internal=!0,l.BodyType_DYNAMIC=new qd,l.internal=!1),c=l.BodyType_DYNAMIC):c=a;this.zpp_inner.immutable_midstep("Body::type");if(this.zpp_inner.world)throw new h("Error: Space::world is immutable");
if(hi.types[this.zpp_inner.type]!=c){if(null==c)throw new h("Error: Cannot use null BodyType");null==l.BodyType_DYNAMIC&&(l.internal=!0,l.BodyType_DYNAMIC=new qd,l.internal=!1);c==l.BodyType_DYNAMIC?c=2:(null==l.BodyType_KINEMATIC&&(l.internal=!0,l.BodyType_KINEMATIC=new qd,l.internal=!1),c=c==l.BodyType_KINEMATIC?3:1);1==c&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0);this.zpp_inner.invalidate_type();null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,
c):this.zpp_inner.type=c}if(null!=b&&b.zpp_inner.weak){if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=b.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(b.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");c=b.zpp_inner;b.zpp_inner.outer=null;b.zpp_inner=null;b.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=b:o.poolVec2=b;o.nextVec2=b;b.zpp_disp=!0;null!=c.outer&&(c.outer.zpp_inner=
null,c.outer=null);c._isimmutable=null;c._validate=null;c._invalidate=null;c.next=q.zpp_pool;q.zpp_pool=c}this.zpp_inner_i.insert_cbtype(Te.ANY_BODY.zpp_inner)};i["nape.phys.Body"]=tf;tf.__name__=["nape","phys","Body"];tf.__super__=$e;tf.prototype=z($e.prototype,{applyImpulse:function(a,b,c){null==c&&(c=!1);if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(this.zpp_inner.world)throw new h("Error: Space::world is immutable");
if(null==a)throw new h("Error: Cannot apply null impulse to Body");var d;if(c){if(null==this.zpp_inner.space)throw new h("Error: isSleeping makes no sense if the object is not contained within a Space");d=this.zpp_inner.component.sleeping}else d=!1;if(d){if(a.zpp_inner.weak){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=a.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(a.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");
c=a.zpp_inner;a.zpp_inner.outer=null;a.zpp_inner=null;a.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=a:o.poolVec2=a;o.nextVec2=a;a.zpp_disp=!0;null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null);c._isimmutable=null;c._validate=null;c._invalidate=null;c.next=q.zpp_pool;q.zpp_pool=c}if(null!=b&&b.zpp_inner.weak){if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=b.zpp_inner;if(a._immutable)throw new h("Error: Vec2 is immutable");null!=a._isimmutable&&a._isimmutable();
if(b.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");a=b.zpp_inner;b.zpp_inner.outer=null;b.zpp_inner=null;b.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=b:o.poolVec2=b;o.nextVec2=b;b.zpp_disp=!0;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=q.zpp_pool;q.zpp_pool=a}return this}this.zpp_inner.validate_mass();d=this.zpp_inner.imass;var e=this.zpp_inner,f=e.velx;if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var g=a.zpp_inner;null!=g._validate&&g._validate();e.velx=f+a.zpp_inner.x*d;e=this.zpp_inner;f=e.vely;if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=a.zpp_inner;null!=g._validate&&g._validate();e.vely=f+a.zpp_inner.y*d;if(null!=b){d=g=0;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=b.zpp_inner;null!=d._validate&&d._validate();g=b.zpp_inner.x-this.zpp_inner.posx;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=b.zpp_inner;null!=d._validate&&d._validate();d=b.zpp_inner.y-this.zpp_inner.posy;this.zpp_inner.validate_inertia();e=this.zpp_inner;f=e.angvel;if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var j=a.zpp_inner;null!=j._validate&&j._validate();g*=a.zpp_inner.y;if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=a.zpp_inner;null!=j._validate&&j._validate();e.angvel=f+(g-a.zpp_inner.x*d)*this.zpp_inner.iinertia;if(b.zpp_inner.weak){if(null!=
b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=b.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(b.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");d=b.zpp_inner;b.zpp_inner.outer=null;b.zpp_inner=null;b.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=b:o.poolVec2=b;o.nextVec2=b;b.zpp_disp=!0;null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d._isimmutable=null;d._validate=null;d._invalidate=
null;d.next=q.zpp_pool;q.zpp_pool=d}}c||2==this.zpp_inner.type&&this.zpp_inner.wake();if(a.zpp_inner.weak){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=a.zpp_inner;if(b._immutable)throw new h("Error: Vec2 is immutable");null!=b._isimmutable&&b._isimmutable();if(a.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");b=a.zpp_inner;a.zpp_inner.outer=null;a.zpp_inner=null;a.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=a:o.poolVec2=a;o.nextVec2=
a;a.zpp_disp=!0;null!=b.outer&&(b.outer.zpp_inner=null,b.outer=null);b._isimmutable=null;b._validate=null;b._invalidate=null;b.next=q.zpp_pool;q.zpp_pool=b}return this},applyAngularImpulse:function(a,b){null==b&&(b=!1);if(this.zpp_inner.world)throw new h("Error: Space::world is immutable");var c;if(b){if(null==this.zpp_inner.space)throw new h("Error: isSleeping makes no sense if the object is not contained within a Space");c=this.zpp_inner.component.sleeping}else c=!1;if(c)return this;this.zpp_inner.validate_inertia();
this.zpp_inner.angvel+=a*this.zpp_inner.iinertia;b||2==this.zpp_inner.type&&this.zpp_inner.wake();return this},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(2==this.zpp_inner.type?"dynamic":1==this.zpp_inner.type?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:tf});var pf=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!ah.internal)throw new h("Error: Cannot instantiate BodyIterator derp!");};i["nape.phys.BodyIterator"]=pf;pf.__name__=
["nape","phys","BodyIterator"];pf.get=function(a){var b;null==pf.zpp_pool?(ah.internal=!0,b=new pf,ah.internal=!1):(b=pf.zpp_pool,pf.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};pf.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=
pf.zpp_pool;pf.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:pf};var wg=function(){this.zpp_inner=null;this.zpp_inner=new ah;this.zpp_inner.outer=this};i["nape.phys.BodyList"]=wg;wg.__name__=["nape","phys","BodyList"];wg.prototype={has:function(a){this.zpp_inner.valmod();return this.zpp_inner.inner.has(a.zpp_inner)},at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&
(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){if(this.zpp_inner.immutable)throw new h("Error: BodyList is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);else{if(null==this.zpp_inner.push_ite){var c;null==this.zpp_inner.inner.head?
c=null:(c=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),c=c.iterator_at(this.zpp_inner.user_length-1));this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},unshift:function(a){if(this.zpp_inner.immutable)throw new h("Error: BodyList is immutable");
this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var c;null==this.zpp_inner.inner.head?c=null:(c=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),c=c.iterator_at(this.zpp_inner.user_length-1));this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,
a.zpp_inner)}else this.zpp_inner.inner.add(a.zpp_inner);this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},pop:function(){if(this.zpp_inner.immutable)throw new h("Error: BodyList is immutable");this.zpp_inner.modify_test();if(null==this.zpp_inner.inner.head)throw new h("Error: Cannot remove from empty list");this.zpp_inner.valmod();var a=null;if(this.zpp_inner.reverse_flag){var a=this.zpp_inner.inner.head.elt,b=a.outer;null!=this.zpp_inner.subber&&
this.zpp_inner.subber(b);this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);1==this.zpp_inner.user_length?b=null:(a=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),
b=a.iterator_at(this.zpp_inner.user_length-2));var a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}this.zpp_inner.invalidate();return a.outer},shift:function(){if(this.zpp_inner.immutable)throw new h("Error: BodyList is immutable");this.zpp_inner.modify_test();if(null==this.zpp_inner.inner.head)throw new h("Error: Cannot remove from empty list");this.zpp_inner.valmod();var a=
null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var b;this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);1==this.zpp_inner.user_length?b=null:(a=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a.iterator_at(this.zpp_inner.user_length-
2));var a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}else a=this.zpp_inner.inner.head.elt,b=a.outer,null!=this.zpp_inner.subber&&this.zpp_inner.subber(b),this.zpp_inner.dontremove||this.zpp_inner.inner.pop();this.zpp_inner.invalidate();return a.outer},remove:function(a){if(this.zpp_inner.immutable)throw new h("Error: BodyList is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();
var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},clear:function(){if(this.zpp_inner.immutable)throw new h("Error: BodyList is immutable");if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},toString:function(){var a=
"[",b=!0;this.zpp_inner.valmod();for(var c=pf.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=pf.zpp_pool,pf.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:wg};var qd=function(){if(!l.internal)throw new h("Error: Cannot instantiate BodyType derp!");
};i["nape.phys.BodyType"]=qd;qd.__name__=["nape","phys","BodyType"];qd.prototype={toString:function(){null==l.BodyType_STATIC&&(l.internal=!0,l.BodyType_STATIC=new qd,l.internal=!1);if(this==l.BodyType_STATIC)return"STATIC";null==l.BodyType_DYNAMIC&&(l.internal=!0,l.BodyType_DYNAMIC=new qd,l.internal=!1);if(this==l.BodyType_DYNAMIC)return"DYNAMIC";null==l.BodyType_KINEMATIC&&(l.internal=!0,l.BodyType_KINEMATIC=new qd,l.internal=!1);return this==l.BodyType_KINEMATIC?"KINEMATIC":""},__class__:qd};var Tn=
function(){this.zpp_inner=null};i["nape.phys.Compound"]=Tn;Tn.__name__=["nape","phys","Compound"];Tn.__super__=$e;Tn.prototype=z($e.prototype,{toString:function(){return"Compound"+this.zpp_inner_i.id},__class__:Tn});var Ig=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!Nh.internal)throw new h("Error: Cannot instantiate CompoundIterator derp!");};i["nape.phys.CompoundIterator"]=Ig;Ig.__name__=["nape","phys","CompoundIterator"];Ig.get=function(a){var b;null==
Ig.zpp_pool?(Nh.internal=!0,b=new Ig,Nh.internal=!1):(b=Ig.zpp_pool,Ig.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Ig.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Ig.zpp_pool;Ig.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=
!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Ig};var Un=function(){this.zpp_inner=null;this.zpp_inner=new Nh;this.zpp_inner.outer=this};i["nape.phys.CompoundList"]=Un;Un.__name__=["nape","phys","CompoundList"];Un.prototype={at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");
this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){if(this.zpp_inner.immutable)throw new h("Error: CompoundList is immutable");
this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=Ig.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=
!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=Ig.zpp_pool,Ig.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Un};var wp=function(){this.zpp_inner=null};i["nape.phys.FluidProperties"]=wp;wp.__name__=["nape","phys","FluidProperties"];wp.prototype={toString:function(){return"{ density: "+1E3*this.zpp_inner.density+
" viscosity: "+this.zpp_inner.viscosity+" gravity: "+L.string(this.zpp_inner.wrap_gravity)+" }"},__class__:wp};var sk=function(){if(!l.internal)throw new h("Error: Cannot instantiate GravMassMode derp!");};i["nape.phys.GravMassMode"]=sk;sk.__name__=["nape","phys","GravMassMode"];sk.prototype={toString:function(){null==l.GravMassMode_DEFAULT&&(l.internal=!0,l.GravMassMode_DEFAULT=new sk,l.internal=!1);if(this==l.GravMassMode_DEFAULT)return"DEFAULT";null==l.GravMassMode_FIXED&&(l.internal=!0,l.GravMassMode_FIXED=
new sk,l.internal=!1);if(this==l.GravMassMode_FIXED)return"FIXED";null==l.GravMassMode_SCALED&&(l.internal=!0,l.GravMassMode_SCALED=new sk,l.internal=!1);return this==l.GravMassMode_SCALED?"SCALED":""},__class__:sk};var Cl=function(){if(!l.internal)throw new h("Error: Cannot instantiate InertiaMode derp!");};i["nape.phys.InertiaMode"]=Cl;Cl.__name__=["nape","phys","InertiaMode"];Cl.prototype={toString:function(){null==l.InertiaMode_DEFAULT&&(l.internal=!0,l.InertiaMode_DEFAULT=new Cl,l.internal=!1);
if(this==l.InertiaMode_DEFAULT)return"DEFAULT";null==l.InertiaMode_FIXED&&(l.internal=!0,l.InertiaMode_FIXED=new Cl,l.internal=!1);return this==l.InertiaMode_FIXED?"FIXED":""},__class__:Cl};var bh=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!oj.internal)throw new h("Error: Cannot instantiate InteractorIterator derp!");};i["nape.phys.InteractorIterator"]=bh;bh.__name__=["nape","phys","InteractorIterator"];bh.get=function(a){var b;null==bh.zpp_pool?(oj.internal=
!0,b=new bh,oj.internal=!1):(b=bh.zpp_pool,bh.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};bh.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=bh.zpp_pool;bh.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=
!1;return this.zpp_inner.at(this.zpp_i++)},__class__:bh};var xp=function(){this.zpp_inner=null};i["nape.phys.InteractorList"]=xp;xp.__name__=["nape","phys","InteractorList"];xp.prototype={at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();
for(var c=bh.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=bh.zpp_pool,bh.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:xp};var Dl=function(){if(!l.internal)throw new h("Error: Cannot instantiate MassMode derp!");
};i["nape.phys.MassMode"]=Dl;Dl.__name__=["nape","phys","MassMode"];Dl.prototype={toString:function(){null==l.MassMode_DEFAULT&&(l.internal=!0,l.MassMode_DEFAULT=new Dl,l.internal=!1);if(this==l.MassMode_DEFAULT)return"DEFAULT";null==l.MassMode_FIXED&&(l.internal=!0,l.MassMode_FIXED=new Dl,l.internal=!1);return this==l.MassMode_FIXED?"FIXED":""},__class__:Dl};var Vn=function(a,b,c,d,e){null==e&&(e=0.001);null==d&&(d=1);null==c&&(c=2);null==b&&(b=1);null==a&&(a=0);this.zpp_inner=null;null==Qa.zpp_pool?
this.zpp_inner=new Qa:(this.zpp_inner=Qa.zpp_pool,Qa.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);this.zpp_inner.outer=this;if(a!=this.zpp_inner.elasticity){if(a!=a)throw new h("Error: Material::elasticity cannot be NaN");this.zpp_inner.elasticity=a/1;this.zpp_inner.invalidate(Qa.WAKE|Qa.ARBITERS)}if(b!=this.zpp_inner.dynamicFriction){if(b!=b)throw new h("Error: Material::dynamicFriction cannot be NaN");if(0>b)throw new h("Error: Material::dynamicFriction cannot be negative");this.zpp_inner.dynamicFriction=
b/1;this.zpp_inner.invalidate(Qa.WAKE|Qa.ANGDRAG|Qa.ARBITERS)}if(c!=this.zpp_inner.staticFriction){if(c!=c)throw new h("Error: Material::staticFriction cannot be NaN");if(0>c)throw new h("Error: Material::staticFriction cannot be negative");this.zpp_inner.staticFriction=c/1;this.zpp_inner.invalidate(Qa.WAKE|Qa.ARBITERS)}if(d!=1E3*this.zpp_inner.density){if(d!=d)throw new h("Error: Material::density cannot be NaN");if(0>d)throw new h("Error: Material::density must be positive");if(0>d)throw new h("Error: Material::density cannot be negative");
this.zpp_inner.density=d/1E3;this.zpp_inner.invalidate(Qa.WAKE|Qa.PROPS)}if(e!=this.zpp_inner.rollingFriction){if(e!=e)throw new h("Error: Material::rollingFriction cannot be NaN");if(0>e)throw new h("Error: Material::rollingFriction cannot be negative");this.zpp_inner.rollingFriction=e/1;this.zpp_inner.invalidate(Qa.WAKE|Qa.ARBITERS)}};i["nape.phys.Material"]=Vn;Vn.__name__=["nape","phys","Material"];Vn.prototype={toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+
this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1E3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},__class__:Vn};var Pe=function(){this.zpp_inner=null;$e.zpp_internalAlloc=!0;$e.call(this);$e.zpp_internalAlloc=!1;if(!Pe.zpp_internalAlloc)throw new h("Error: Shape cannot be instantiated derp!");};i["nape.shape.Shape"]=Pe;Pe.__name__=["nape","shape","Shape"];Pe.__super__=$e;Pe.prototype=z($e.prototype,{transform:function(a){this.zpp_inner.immutable_midstep("Shape::transform()");
if(null!=this.zpp_inner.body&&null!=this.zpp_inner.body.space&&1==this.zpp_inner.body.type)throw new h("Error: Cannot modify Shape belonging to a static Object once inside a Space");if(null==a)throw new h("Error: Cannot transform Shape by null matrix");if(a.singular())throw new h("Error: Cannot transform Shape by a singular matrix");if(0==this.zpp_inner.type)if(a.equiorthogonal())this.zpp_inner.circle.__transform(a);else throw new h("Error: Cannot transform Circle by a non equiorthogonal matrix");
else this.zpp_inner.polygon.__transform(a);return this},toString:function(){return(0==this.zpp_inner.type?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},__class__:Pe});var pj=function(a,b,c,d){this.zpp_inner_zn=null;Pe.zpp_internalAlloc=!0;Pe.call(this);Pe.zpp_internalAlloc=!1;this.zpp_inner_zn=new El;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;this.zpp_inner.immutable_midstep("Circle::radius");if(null!=
this.zpp_inner.body&&1==this.zpp_inner.body.type&&null!=this.zpp_inner.body.space)throw new h("Error: Cannot modifiy radius of Circle contained in static object once added to space");if(a!=this.zpp_inner_zn.radius){if(a!=a)throw new h("Error: Circle::radius cannot be NaN");if(a<u.epsilon)throw new h("Error: Circle::radius ("+a+") must be > Config.epsilon");if(1.0E100<a)throw new h("Error: Circle::radius ("+a+") must be < PR(Const).FMAX");this.zpp_inner_zn.radius=a;this.zpp_inner_zn.invalidate_radius()}if(null==
b)this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0;else{if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=b.zpp_inner;null!=a._validate&&a._validate();this.zpp_inner.localCOMx=b.zpp_inner.x;if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=b.zpp_inner;null!=a._validate&&a._validate();this.zpp_inner.localCOMy=b.zpp_inner.y;if(b.zpp_inner.weak){if(null!=
b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=b.zpp_inner;if(a._immutable)throw new h("Error: Vec2 is immutable");null!=a._isimmutable&&a._isimmutable();if(b.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");a=b.zpp_inner;b.zpp_inner.outer=null;b.zpp_inner=null;b.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=b:o.poolVec2=b;o.nextVec2=b;b.zpp_disp=!0;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=
null;a.next=q.zpp_pool;q.zpp_pool=a}}if(null==c)null==Qa.zpp_pool?this.zpp_inner.material=new Qa:(this.zpp_inner.material=Qa.zpp_pool,Qa.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null);else{this.zpp_inner.immutable_midstep("Shape::material");if(null==c)throw new h("Error: Cannot assign null as Shape material");this.zpp_inner.setMaterial(c.zpp_inner);this.zpp_inner.material.wrapper()}if(null==d)null==Be.zpp_pool?this.zpp_inner.filter=new Be:(this.zpp_inner.filter=Be.zpp_pool,
Be.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null);else{this.zpp_inner.immutable_midstep("Shape::filter");if(null==d)throw new h("Error: Cannot assign null as Shape filter");this.zpp_inner.setFilter(d.zpp_inner);this.zpp_inner.filter.wrapper()}this.zpp_inner_i.insert_cbtype(Te.ANY_SHAPE.zpp_inner)};i["nape.shape.Circle"]=pj;pj.__name__=["nape","shape","Circle"];pj.__super__=Pe;pj.prototype=z(Pe.prototype,{__class__:pj});var Wn=function(){this.zpp_inner=null;if(!zd.internal)throw new h("Error: Cannot instantiate an Edge derp!");
};i["nape.shape.Edge"]=Wn;Wn.__name__=["nape","shape","Edge"];Wn.prototype={toString:function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" }";var a=this.zpp_inner.polygon;if(a.zip_gaxi&&null!=a.body){a.zip_gaxi=!1;a.validate_laxi();var b=a.body;b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot));
if(a.zip_gverts&&null!=a.body){a.zip_gverts=!1;a.validate_lverts();b=a.body;b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot));for(var b=a.lverts.next,c=a.gverts.next;null!=c;){var d=c,e=b,b=b.next;d.x=a.body.posx+(a.body.axisy*e.x-a.body.axisx*e.y);d.y=a.body.posy+(e.x*a.body.axisx+e.y*a.body.axisy);c=c.next}}c=a.edges.head;b=d=a.gverts.next;for(d=d.next;null!=d;){var e=d,f=c.elt,c=c.next;f.gp0=b;f.gp1=e;f.gnormx=a.body.axisy*f.lnormx-a.body.axisx*f.lnormy;f.gnormy=f.lnormx*
a.body.axisx+f.lnormy*a.body.axisy;f.gprojection=a.body.posx*f.gnormx+a.body.posy*f.gnormy+f.lprojection;null!=f.wrap_gnorm&&(f.wrap_gnorm.zpp_inner.x=f.gnormx,f.wrap_gnorm.zpp_inner.y=f.gnormy);f.tp0=f.gp0.y*f.gnormx-f.gp0.x*f.gnormy;f.tp1=f.gp1.y*f.gnormx-f.gp1.x*f.gnormy;b=e;d=d.next}d=a.gverts.next;c=c.elt;c.gp0=b;c.gp1=d;c.gnormx=a.body.axisy*c.lnormx-a.body.axisx*c.lnormy;c.gnormy=c.lnormx*a.body.axisx+c.lnormy*a.body.axisy;c.gprojection=a.body.posx*c.gnormx+a.body.posy*c.gnormy+c.lprojection;
null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy);c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy;c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+("{ x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" }")+" }"},__class__:Wn};var id=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!qj.internal)throw new h("Error: Cannot instantiate EdgeIterator derp!");
};i["nape.shape.EdgeIterator"]=id;id.__name__=["nape","shape","EdgeIterator"];id.get=function(a){var b;null==id.zpp_pool?(qj.internal=!0,b=new id,qj.internal=!1):(b=id.zpp_pool,id.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};id.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=
!0;if(this.zpp_i<a)return!0;this.zpp_next=id.zpp_pool;id.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:id};var yp=function(){this.zpp_inner=null};i["nape.shape.EdgeList"]=yp;yp.__name__=["nape","shape","EdgeList"];yp.prototype={at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),
b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a!=this.zpp_inner.user_length-1&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-2-a));if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=
a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=id.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=
!0;c.zpp_i<d?d=!0:(c.zpp_next=id.zpp_pool,id.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:yp};var Rb=function(a,b,c){this.zpp_inner_zn=null;Pe.zpp_internalAlloc=!0;Pe.call(this);Pe.zpp_internalAlloc=!1;if(null==a)throw new h("Error: localVerts cannot be null");this.zpp_inner_zn=new Fl;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;
this.zpp_inner_i.outer_i=this;if(a instanceof Array&&null==a.__enum__)for(var d=0;d<a.length;){var e=a[d];++d;if(null==e)throw new h("Error: Array<Vec2> contains null objects");if(!y.__instanceof(e,ja))throw new h("Error: Array<Vec2> contains non Vec2 objects");var f=e;if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();e=this.zpp_inner_zn.wrap_lverts;if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
if(f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var g=f.zpp_inner;null!=g._validate&&g._validate();g=f.zpp_inner.x;if(f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var j=f.zpp_inner;null!=j._validate&&j._validate();j=f.zpp_inner.y;if(g!=g||j!=j)throw new h("Error: Vec2 components cannot be NaN");null==o.poolVec2?f=new ja:(f=o.poolVec2,o.poolVec2=f.zpp_pool,f.zpp_pool=null,f.zpp_disp=!1,f==o.nextVec2&&(o.nextVec2=null));if(null==f.zpp_inner){var p;
null==q.zpp_pool?p=new q:(p=q.zpp_pool,q.zpp_pool=p.next,p.next=null);p.weak=!1;p._immutable=!1;p.x=g;p.y=j;f.zpp_inner=p;f.zpp_inner.outer=f}else{if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=f.zpp_inner;if(p._immutable)throw new h("Error: Vec2 is immutable");null!=p._isimmutable&&p._isimmutable();if(g!=g||j!=j)throw new h("Error: Vec2 components cannot be NaN");if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=f.zpp_inner;
null!=p._validate&&p._validate();if(f.zpp_inner.x==g){if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=f.zpp_inner;null!=p._validate&&p._validate();p=f.zpp_inner.y==j}else p=!1;p||(f.zpp_inner.x=g,f.zpp_inner.y=j,g=f.zpp_inner,null!=g._invalidate&&g._invalidate(g))}f.zpp_inner.weak=!1;e.push(f)}else if(y.__instanceof(a,Cf))for(d=a.iterator();;){d.zpp_inner.zpp_inner.valmod();e=d.zpp_inner.zpp_gl();d.zpp_critical=!0;d.zpp_i<e?e=!0:(d.zpp_next=od.zpp_pool,od.zpp_pool=
d,d.zpp_inner=null,e=!1);if(!e)break;d.zpp_critical=!1;f=d.zpp_inner.at(d.zpp_i++);if(null==f)throw new h("Error: Vec2List contains null objects");if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();e=this.zpp_inner_zn.wrap_lverts;if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
g=f.zpp_inner;null!=g._validate&&g._validate();g=f.zpp_inner.x;if(f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=f.zpp_inner;null!=j._validate&&j._validate();j=f.zpp_inner.y;if(g!=g||j!=j)throw new h("Error: Vec2 components cannot be NaN");null==o.poolVec2?f=new ja:(f=o.poolVec2,o.poolVec2=f.zpp_pool,f.zpp_pool=null,f.zpp_disp=!1,f==o.nextVec2&&(o.nextVec2=null));if(null==f.zpp_inner)null==q.zpp_pool?p=new q:(p=q.zpp_pool,q.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=
!1,p.x=g,p.y=j,f.zpp_inner=p,f.zpp_inner.outer=f;else{if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=f.zpp_inner;if(p._immutable)throw new h("Error: Vec2 is immutable");null!=p._isimmutable&&p._isimmutable();if(g!=g||j!=j)throw new h("Error: Vec2 components cannot be NaN");if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=f.zpp_inner;null!=p._validate&&p._validate();if(f.zpp_inner.x==g){if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
p=f.zpp_inner;null!=p._validate&&p._validate();p=f.zpp_inner.y==j}else p=!1;p||(f.zpp_inner.x=g,f.zpp_inner.y=j,g=f.zpp_inner,null!=g._invalidate&&g._invalidate(g))}f.zpp_inner.weak=!1;e.push(f)}else if(y.__instanceof(a,sf)){if(null!=a&&a.zpp_disp)throw new h("Error: GeomPoly has been disposed and cannot be used!");d=a.zpp_inner.vertices;if(null!=d)for(e=d;;){f=e.x;j=e.y;if(f!=f||j!=j)throw new h("Error: Vec2 components cannot be NaN");null==o.poolVec2?g=new ja:(g=o.poolVec2,o.poolVec2=g.zpp_pool,
g.zpp_pool=null,g.zpp_disp=!1,g==o.nextVec2&&(o.nextVec2=null));if(null==g.zpp_inner)null==q.zpp_pool?p=new q:(p=q.zpp_pool,q.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=f,p.y=j,g.zpp_inner=p,g.zpp_inner.outer=g;else{if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=g.zpp_inner;if(p._immutable)throw new h("Error: Vec2 is immutable");null!=p._isimmutable&&p._isimmutable();if(f!=f||j!=j)throw new h("Error: Vec2 components cannot be NaN");if(null!=
g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=g.zpp_inner;null!=p._validate&&p._validate();if(g.zpp_inner.x==f){if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=g.zpp_inner;null!=p._validate&&p._validate();p=g.zpp_inner.y==j}else p=!1;p||(g.zpp_inner.x=f,g.zpp_inner.y=j,f=g.zpp_inner,null!=f._invalidate&&f._invalidate(f))}g.zpp_inner.weak=!1;e=e.next;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();f=this.zpp_inner_zn.wrap_lverts;
if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=g.zpp_inner;null!=j._validate&&j._validate();j=g.zpp_inner.x;if(g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=g.zpp_inner;null!=p._validate&&p._validate();var we=g.zpp_inner.y;if(j!=j||we!=we)throw new h("Error: Vec2 components cannot be NaN");null==o.poolVec2?p=new ja:(p=o.poolVec2,o.poolVec2=p.zpp_pool,
p.zpp_pool=null,p.zpp_disp=!1,p==o.nextVec2&&(o.nextVec2=null));if(null==p.zpp_inner){var i;null==q.zpp_pool?i=new q:(i=q.zpp_pool,q.zpp_pool=i.next,i.next=null);i.weak=!1;i._immutable=!1;i.x=j;i.y=we;p.zpp_inner=i;p.zpp_inner.outer=p}else{if(null!=p&&p.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");i=p.zpp_inner;if(i._immutable)throw new h("Error: Vec2 is immutable");null!=i._isimmutable&&i._isimmutable();if(j!=j||we!=we)throw new h("Error: Vec2 components cannot be NaN");
if(null!=p&&p.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");i=p.zpp_inner;null!=i._validate&&i._validate();if(p.zpp_inner.x==j){if(null!=p&&p.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");i=p.zpp_inner;null!=i._validate&&i._validate();i=p.zpp_inner.y==we}else i=!1;i||(p.zpp_inner.x=j,p.zpp_inner.y=we,j=p.zpp_inner,null!=j._invalidate&&j._invalidate(j))}p.zpp_inner.weak=!1;f.push(p);if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
f=g.zpp_inner;if(f._immutable)throw new h("Error: Vec2 is immutable");null!=f._isimmutable&&f._isimmutable();if(g.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");f=g.zpp_inner;g.zpp_inner.outer=null;g.zpp_inner=null;g.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=g:o.poolVec2=g;o.nextVec2=g;g.zpp_disp=!0;g=f;null!=g.outer&&(g.outer.zpp_inner=null,g.outer=null);g._isimmutable=null;g._validate=null;g._invalidate=null;g.next=q.zpp_pool;q.zpp_pool=g;if(e==d)break}}else throw new h("Error: Invalid type for polygon object, should be Array<Vec2>, Vec2List, GeomPoly or for flash10+ flash.Vector<Vec2>");
if(a instanceof Array&&null==a.__enum__)for(d=0;d<a.length;){e=a[d];if(e.zpp_inner.weak){if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=e.zpp_inner;if(g._immutable)throw new h("Error: Vec2 is immutable");null!=g._isimmutable&&g._isimmutable();if(e.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");g=e.zpp_inner;e.zpp_inner.outer=null;e.zpp_inner=null;e.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=e:o.poolVec2=e;o.nextVec2=e;e.zpp_disp=
!0;e=g;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null);e._isimmutable=null;e._validate=null;e._invalidate=null;e.next=q.zpp_pool;q.zpp_pool=e;e=!0}else e=!1;e?a.splice(d,1):++d}else if(y.__instanceof(a,Cf)){null!=a.zpp_inner._validate&&a.zpp_inner._validate();a=a.zpp_inner.inner;d=null;for(e=a.head;null!=e;)if(g=e.elt,g.outer.zpp_inner.weak){if(e=a.erase(d),g.outer.zpp_inner.weak){g=g.outer;if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=g.zpp_inner;
if(f._immutable)throw new h("Error: Vec2 is immutable");null!=f._isimmutable&&f._isimmutable();if(g.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");f=g.zpp_inner;g.zpp_inner.outer=null;g.zpp_inner=null;g.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=g:o.poolVec2=g;o.nextVec2=g;g.zpp_disp=!0;g=f;null!=g.outer&&(g.outer.zpp_inner=null,g.outer=null);g._isimmutable=null;g._validate=null;g._invalidate=null;g.next=q.zpp_pool;q.zpp_pool=g}}else d=e,e=e.next}if(null==b)null==Qa.zpp_pool?
this.zpp_inner.material=new Qa:(this.zpp_inner.material=Qa.zpp_pool,Qa.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null);else{this.zpp_inner.immutable_midstep("Shape::material");if(null==b)throw new h("Error: Cannot assign null as Shape material");this.zpp_inner.setMaterial(b.zpp_inner);this.zpp_inner.material.wrapper()}if(null==c)null==Be.zpp_pool?this.zpp_inner.filter=new Be:(this.zpp_inner.filter=Be.zpp_pool,Be.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=
null);else{this.zpp_inner.immutable_midstep("Shape::filter");if(null==c)throw new h("Error: Cannot assign null as Shape filter");this.zpp_inner.setFilter(c.zpp_inner);this.zpp_inner.filter.wrapper()}this.zpp_inner_i.insert_cbtype(Te.ANY_SHAPE.zpp_inner)};i["nape.shape.Polygon"]=Rb;Rb.__name__=["nape","shape","Polygon"];Rb.rect=function(a,b,c,d,e){null==e&&(e=!1);if(a!=a||b!=b||c!=c||d!=d)throw new h("Error: Polygon.rect cannot accept NaN arguments");if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");
var f;null==o.poolVec2?f=new ja:(f=o.poolVec2,o.poolVec2=f.zpp_pool,f.zpp_pool=null,f.zpp_disp=!1,f==o.nextVec2&&(o.nextVec2=null));if(null==f.zpp_inner){var g;null==q.zpp_pool?g=new q:(g=q.zpp_pool,q.zpp_pool=g.next,g.next=null);g.weak=!1;g._immutable=!1;g.x=a;g.y=b;f.zpp_inner=g;f.zpp_inner.outer=f}else{if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=f.zpp_inner;if(g._immutable)throw new h("Error: Vec2 is immutable");null!=g._isimmutable&&g._isimmutable();
if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=f.zpp_inner;null!=g._validate&&g._validate();if(f.zpp_inner.x==a){if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=f.zpp_inner;null!=g._validate&&g._validate();g=f.zpp_inner.y==b}else g=!1;g||(f.zpp_inner.x=a,f.zpp_inner.y=b,g=f.zpp_inner,null!=g._invalidate&&g._invalidate(g))}f.zpp_inner.weak=e;var j=a+
c;if(j!=j||b!=b)throw new h("Error: Vec2 components cannot be NaN");null==o.poolVec2?g=new ja:(g=o.poolVec2,o.poolVec2=g.zpp_pool,g.zpp_pool=null,g.zpp_disp=!1,g==o.nextVec2&&(o.nextVec2=null));if(null==g.zpp_inner){var p;null==q.zpp_pool?p=new q:(p=q.zpp_pool,q.zpp_pool=p.next,p.next=null);p.weak=!1;p._immutable=!1;p.x=j;p.y=b;g.zpp_inner=p;g.zpp_inner.outer=g}else{if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=g.zpp_inner;if(p._immutable)throw new h("Error: Vec2 is immutable");
null!=p._isimmutable&&p._isimmutable();if(j!=j||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=g.zpp_inner;null!=p._validate&&p._validate();if(g.zpp_inner.x==j){if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=g.zpp_inner;null!=p._validate&&p._validate();p=g.zpp_inner.y==b}else p=!1;p||(g.zpp_inner.x=j,g.zpp_inner.y=b,j=g.zpp_inner,null!=j._invalidate&&j._invalidate(j))}g.zpp_inner.weak=
e;j=a+c;p=b+d;if(j!=j||p!=p)throw new h("Error: Vec2 components cannot be NaN");null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner){var we;null==q.zpp_pool?we=new q:(we=q.zpp_pool,q.zpp_pool=we.next,we.next=null);we.weak=!1;we._immutable=!1;we.x=j;we.y=p;c.zpp_inner=we;c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");we=c.zpp_inner;if(we._immutable)throw new h("Error: Vec2 is immutable");
null!=we._isimmutable&&we._isimmutable();if(j!=j||p!=p)throw new h("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");we=c.zpp_inner;null!=we._validate&&we._validate();if(c.zpp_inner.x==j){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");we=c.zpp_inner;null!=we._validate&&we._validate();we=c.zpp_inner.y==p}else we=!1;we||(c.zpp_inner.x=j,c.zpp_inner.y=p,j=c.zpp_inner,null!=j._invalidate&&
j._invalidate(j))}c.zpp_inner.weak=e;d=b+d;if(a!=a||d!=d)throw new h("Error: Vec2 components cannot be NaN");null==o.poolVec2?b=new ja:(b=o.poolVec2,o.poolVec2=b.zpp_pool,b.zpp_pool=null,b.zpp_disp=!1,b==o.nextVec2&&(o.nextVec2=null));if(null==b.zpp_inner)null==q.zpp_pool?j=new q:(j=q.zpp_pool,q.zpp_pool=j.next,j.next=null),j.weak=!1,j._immutable=!1,j.x=a,j.y=d,b.zpp_inner=j,b.zpp_inner.outer=b;else{if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=b.zpp_inner;
if(j._immutable)throw new h("Error: Vec2 is immutable");null!=j._isimmutable&&j._isimmutable();if(a!=a||d!=d)throw new h("Error: Vec2 components cannot be NaN");if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=b.zpp_inner;null!=j._validate&&j._validate();if(b.zpp_inner.x==a){if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=b.zpp_inner;null!=j._validate&&j._validate();j=b.zpp_inner.y==d}else j=!1;j||(b.zpp_inner.x=a,
b.zpp_inner.y=d,a=b.zpp_inner,null!=a._invalidate&&a._invalidate(a))}b.zpp_inner.weak=e;return[f,g,c,b]};Rb.box=function(a,b,c){null==c&&(c=!1);if(a!=a||b!=b)throw new h("Error: Polygon.box cannot accept NaN arguments");return Rb.rect(-a/2,-b/2,a,b,c)};Rb.__super__=Pe;Rb.prototype=z(Pe.prototype,{__class__:Rb});var te=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null;if(!Oh.internal)throw new h("Error: Cannot instantiate ShapeIterator derp!");};i["nape.shape.ShapeIterator"]=
te;te.__name__=["nape","shape","ShapeIterator"];te.get=function(a){var b;null==te.zpp_pool?(Oh.internal=!0,b=new te,Oh.internal=!1):(b=te.zpp_pool,te.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};te.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner;a.zpp_inner.valmod();a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);a=a.zpp_inner.user_length;this.zpp_critical=!0;if(this.zpp_i<a)return!0;
this.zpp_next=te.zpp_pool;te.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:te};var Xn=function(){this.zpp_inner=null;this.zpp_inner=new Oh;this.zpp_inner.outer=this};i["nape.shape.ShapeList"]=Xn;Xn.__name__=["nape","shape","ShapeList"];Xn.prototype={at:function(a){this.zpp_inner.valmod();var b;0<=a?(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),
b=a>=this.zpp_inner.user_length):b=!0;if(b)throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),a=this.zpp_inner.user_length-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){if(this.zpp_inner.immutable)throw new h("Error: ShapeList is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);else{if(null==this.zpp_inner.push_ite){var c;null==this.zpp_inner.inner.head?c=null:(c=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&
(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),c=c.iterator_at(this.zpp_inner.user_length-1));this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},unshift:function(a){if(this.zpp_inner.immutable)throw new h("Error: ShapeList is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=
this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var c;null==this.zpp_inner.inner.head?c=null:(c=this.zpp_inner.inner,this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),c=c.iterator_at(this.zpp_inner.user_length-1));this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}else this.zpp_inner.inner.add(a.zpp_inner);
this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},remove:function(a){if(this.zpp_inner.immutable)throw new h("Error: ShapeList is immutable");this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},
toString:function(){var a="[",b=!0;this.zpp_inner.valmod();for(var c=te.get(this);;){c.zpp_inner.zpp_inner.valmod();var d=c.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;c.zpp_critical=!0;c.zpp_i<d?d=!0:(c.zpp_next=te.zpp_pool,te.zpp_pool=c,c.zpp_inner=null,d=!1);if(!d)break;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Xn};
var Gl=function(){if(!l.internal)throw new h("Error: Cannot instantiate ShapeType derp!");};i["nape.shape.ShapeType"]=Gl;Gl.__name__=["nape","shape","ShapeType"];Gl.prototype={toString:function(){null==l.ShapeType_CIRCLE&&(l.internal=!0,l.ShapeType_CIRCLE=new Gl,l.internal=!1);if(this==l.ShapeType_CIRCLE)return"CIRCLE";null==l.ShapeType_POLYGON&&(l.internal=!0,l.ShapeType_POLYGON=new Gl,l.internal=!1);return this==l.ShapeType_POLYGON?"POLYGON":""},__class__:Gl};var ag=function(){if(!l.internal)throw new h("Error: Cannot instantiate ValidationResult derp!");
};i["nape.shape.ValidationResult"]=ag;ag.__name__=["nape","shape","ValidationResult"];ag.prototype={toString:function(){null==l.ValidationResult_VALID&&(l.internal=!0,l.ValidationResult_VALID=new ag,l.internal=!1);if(this==l.ValidationResult_VALID)return"VALID";null==l.ValidationResult_DEGENERATE&&(l.internal=!0,l.ValidationResult_DEGENERATE=new ag,l.internal=!1);if(this==l.ValidationResult_DEGENERATE)return"DEGENERATE";null==l.ValidationResult_CONCAVE&&(l.internal=!0,l.ValidationResult_CONCAVE=new ag,
l.internal=!1);if(this==l.ValidationResult_CONCAVE)return"CONCAVE";null==l.ValidationResult_SELF_INTERSECTING&&(l.internal=!0,l.ValidationResult_SELF_INTERSECTING=new ag,l.internal=!1);return this==l.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":""},__class__:ag};var rj=function(){if(!l.internal)throw new h("Error: Cannot instantiate Broadphase derp!");};i["nape.space.Broadphase"]=rj;rj.__name__=["nape","space","Broadphase"];rj.prototype={toString:function(){null==l.Broadphase_DYNAMIC_AABB_TREE&&
(l.internal=!0,l.Broadphase_DYNAMIC_AABB_TREE=new rj,l.internal=!1);if(this==l.Broadphase_DYNAMIC_AABB_TREE)return"DYNAMIC_AABB_TREE";null==l.Broadphase_SWEEP_AND_PRUNE&&(l.internal=!0,l.Broadphase_SWEEP_AND_PRUNE=new rj,l.internal=!1);return this==l.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":""},__class__:rj};var sj=function(a,b){this.zpp_inner=null;if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");this.zpp_inner=new Yn(null==a?null:a.zpp_inner,b);this.zpp_inner.outer=
this;if(null!=a&&a.zpp_inner.weak){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var c=a.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(a.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");c=a.zpp_inner;a.zpp_inner.outer=null;a.zpp_inner=null;a.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=a:o.poolVec2=a;o.nextVec2=a;a.zpp_disp=!0;null!=c.outer&&(c.outer.zpp_inner=null,c.outer=
null);c._isimmutable=null;c._validate=null;c._invalidate=null;c.next=q.zpp_pool;q.zpp_pool=c}};i["nape.space.Space"]=sj;sj.__name__=["nape","space","Space"];sj.prototype={step:function(a,b,c){null==c&&(c=10);null==b&&(b=10);if(a!=a)throw new h("Error: deltaTime cannot be NaN");if(0>=a)throw new h("Error: deltaTime must be strictly positive");if(0>=b)throw new h("Error: must use atleast one velocity iteration");if(0>=c)throw new h("Error: must use atleast one position iteration");this.zpp_inner.step(a,
b,c)},bodiesInAABB:function(a,b,c,d,e){null==c&&(c=!0);null==b&&(b=!1);if(null==a)throw new h("Error: Cannot evaluate objects in a null AABB :)");var f;f=a.zpp_inner;null!=f._validate&&f._validate();f=a.zpp_inner;0!=f.maxx-f.minx?(f=a.zpp_inner,null!=f._validate&&f._validate(),f=a.zpp_inner,f=0==f.maxy-f.miny):f=!0;if(f)throw new h("Error: Cannot evaluate objects in degenerate AABB :/");return this.zpp_inner.bodiesInAABB(a,c,b,null==d?null:d.zpp_inner,e)},bodiesInCircle:function(a,b,c,d,e){null==
c&&(c=!1);if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");if(null==a)throw new h("Error: Cannot evaluate objects at null circle :)");if(b!=b)throw new h("Error: Circle radius cannot be NaN");if(0>=b)throw new h("Error: Circle radius must be strictly positive");b=this.zpp_inner.bodiesInCircle(a,b,c,null==d?null:d.zpp_inner,e);if(a.zpp_inner.weak){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=a.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");
null!=c._isimmutable&&c._isimmutable();if(a.zpp_inner._inuse)throw new h("Error: This Vec2 is not disposable");c=a.zpp_inner;a.zpp_inner.outer=null;a.zpp_inner=null;a.zpp_pool=null;null!=o.nextVec2?o.nextVec2.zpp_pool=a:o.poolVec2=a;o.nextVec2=a;a.zpp_disp=!0;null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null);c._isimmutable=null;c._validate=null;c._invalidate=null;c.next=q.zpp_pool;q.zpp_pool=c}return b},__class__:sj};var Ha=function(a){this.classType=y.getClass(this);this._elementManager=new tk(a,
fb.STAGE_CENTER_X,280,!0);this._elementManager.addLayer("ui_default");this._tween=new Gi;this._useClickWall()&&this._elementManager.addElement(this._addClickWall());this._buildScreen();this._onEventResizeCanvas();this.doDelete=!1;this._setState(Ve.IN);this._addEventListeners()};i["workinman.ui.ScreenBase"]=Ha;Ha.__name__=["workinman","ui","ScreenBase"];Ha.prototype={_addClickWall:function(){this._clickWall=this._elementManager.root.addChild(new Ed({color:16711680,sizeX:fb.STAGE_WIDTH,sizeY:560,alpha:0}));
this._clickWallButton=new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:""});this._clickWallButton.setCustomHitBox(fb.STAGE_WIDTH,560);this._clickWallButton.eventClick.add(v(this,this._onClickWall));return this._clickWallButton},_onClickWall:function(){},dispose:function(){this._removeEventListeners();this._clickWall=null;null!=this._elementManager&&(this._elementManager.dispose(),this._elementManager=null);null!=this._tween&&(this._tween.dispose(),this._tween=null);this.classType=
this._state=null},_buildScreen:function(){},_addEventListeners:function(){P.resizeCanvas.add(v(this,this._handleResizeCanvas));w.eventInput.add(v(this,this._handleInput))},_removeEventListeners:function(){P.resizeCanvas.remove(v(this,this._handleResizeCanvas));w.eventInput.remove(v(this,this._handleInput))},get_root:function(){return this._elementManager.root},_useClickWall:function(){return!0},_setState:function(a){if(this._state!=a)switch(this._state=a,this._state[1]){case 0:this._setInState();
break;case 2:this._setOpenedState()}},_setInState:function(){this._finishInState()},_finishInState:function(){this._setState(Ve.OPENED);xi.eventFlowDelegate.dispatch(hd.OPEN_COMPLETE,this.classType)},_setCloseState:function(){this._finishCloseState()},_finishCloseState:function(){this.doDelete=!0;xi.eventFlowDelegate.dispatch(hd.CLOSE_COMPLETE,this.classType)},_setOpenedState:function(){},update:function(a){this._tween.update(a);this._elementManager.update(a)},_handleInput:function(a,b){!1!=this._clearInput()&&
this._onInput(a,b)},_onInput:function(){},open:function(a){null==a&&(a=!0);a?this._setState(Ve.IN):this._finishInState()},close:function(a){null==a&&(a=!0);this._state!=Ve.OUT&&(this._setState(Ve.OUT),a?this._setCloseState():this._finishCloseState())},_handleResizeCanvas:function(){null!=this._clickWall&&(this._clickWall.sizeX=Math.floor(fb.STAGE_WIDTH),this._clickWall.sizeY=560);this._onEventResizeCanvas()},_onEventResizeCanvas:function(){},_clearInput:function(){return this._state!=Ve.OPENED?!1:
!0},_clearButtonInput:function(){return this._state!=Ve.OPENED?!1:!0},__class__:Ha,__properties__:{get_root:"get_root"}};var Tj=function(a){this._ROW_COUNT=this._COL_COUNT=2;this._PAGE_OFFSET=1212;Ha.call(this,a)};i["screen.ScreenCollection"]=Tj;Tj.__name__=["screen","ScreenCollection"];Tj.__super__=Ha;Tj.prototype=z(Ha.prototype,{_buildScreen:function(){this._closing=!1;this._elementManager.addElement(new Ed({color:0,sizeX:fb.STAGE_WIDTH,sizeY:560,alpha:0.5}));this._tray=this._elementManager.addElement(new n({asset:"collections/collection_UI_box"}));
this._tray.addChild(new V({text:"end_game.collections",y:-228}));var a=this._tray.addChild(new ii({}));this._collectionContainer=a.addChild(new n({}));a.setMask(-250,-170,500,400);this._pageCount=Math.floor(zi.GlobalPrizes.length/(this._ROW_COUNT*this._COL_COUNT));for(var a=this._pageIndex=0,b=zi.GlobalPrizes.length;a<b;){for(var c=a++,d=zi.GlobalPrizes[c],e=Math.floor(c/(this._ROW_COUNT*this._COL_COUNT)),f=c%(this._ROW_COUNT*this._COL_COUNT),c=f%this._COL_COUNT,f=Math.floor(f/this._COL_COUNT),g=
"collections/collection_missing_sticker",j=!1,p=0,h=Zb.get_instance().collectedPrizes.length;p<h;){var i=p++;if(Zb.get_instance().collectedPrizes[i].id==d.id){g=d.image;this._collectionContainer.addChild(new n({asset:g,x:-100+this._PAGE_OFFSET*e+200*c,y:-70+200*f})).addChild(new V({text:"collections.count",x:50,y:50})).setVariables([Zb.get_instance().collectedPrizes[i].count]);j=!0;break}}j||this._collectionContainer.addChild(new n({asset:g,x:-100+this._PAGE_OFFSET*e+200*c,y:-70+200*f,scale:"collections/collection_missing_sticker"==
g?0.8:1}))}this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"collections/endgame_btn_exit",x:250,y:185})).eventClick.add(v(this,this._onBackQuit));this._leftButton=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"collections/collection_UI_arrow",x:-260,y:0,alpha:0.5}));this._leftButton.setScale(-1,1);this._rightButton=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"collections/collection_UI_arrow",
x:260,y:0,alpha:1}));this._leftButton.eventClick.add(v(this,this._onLeftClick));this._rightButton.eventClick.add(v(this,this._onRightClick))},dispose:function(){Ha.prototype.dispose.call(this);this._tray=null},_setInState:function(){this._closing=!1;Ub.easeBounceIn(this._tray,this._tween).onComplete(v(this,this._finishInState))},_setCloseState:function(){this._closing||(this._closing=!0,Ub.easeBounceOut(this._tray,this._tween).onComplete(v(this,this._finishCloseState)))},_onBackQuit:function(){P.flow.dispatch("COLLECTION_CLOSE")},
_onLeftClick:function(){this._pageIndex--;0==this._pageIndex&&(this._leftButton.alpha=0.5,this._leftButton.disable());this._rightButton.alpha=1;this._rightButton.enable();this._tween.tween({target:this._collectionContainer,duration:0.4,ease:G.outQuad},{x:-this._PAGE_OFFSET*this._pageIndex})},_onRightClick:function(){this._pageIndex++;this._pageIndex==this._pageCount&&(this._rightButton.alpha=0.5,this._rightButton.disable());this._leftButton.alpha=1;this._leftButton.enable();this._tween.tween({target:this._collectionContainer,
duration:0.4,ease:G.outQuad},{x:-this._PAGE_OFFSET*this._pageIndex})},__class__:Tj});var Uk=function(a){Ha.call(this,a)};i["screen.ScreenDebug"]=Uk;Uk.__name__=["screen","ScreenDebug"];Uk.__super__=Ha;Uk.prototype=z(Ha.prototype,{_buildScreen:function(){this._tray=this._elementManager.addElement(new Ed({color:0,sizeX:fb.STAGE_WIDTH,sizeY:560,alpha:0.5}));this._tray.alpha=0;var a=this._tray.addChild(new V({text:"debug.debugfield",y:-260,scale:0.5}));a.setVariables(["Debug Screen"]);a=this._tray.addChild(new V({text:"debug.debugfield",
y:260,scale:0.5}));a.setVariables(["Game Version: 1.0.0"]);this._buildButtons()},dispose:function(){Ha.prototype.dispose.call(this);this._tray=null},_addButton:function(a,b,c,d){b=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"template/ui/debug/debug_button",x:b-fb.STAGE_CENTER_X,y:c-280}));b.eventClick.add(d);b.addChild(new V({text:"debug.debugfield"})).setVariables([a])},_setInState:function(){Ub.easeBounceIn(this._tray,this._tween).onComplete(v(this,
this._finishInState))},_setCloseState:function(){Ub.easeBounceOut(this._tray,this._tween).onComplete(v(this,this._finishCloseState))},_buildButtons:function(){this._addButton("X",50,50,v(this,this._onCloseClick))},_onCloseClick:function(){P.flow.dispatch("DEBUG_CLOSE")},__class__:Uk});var Og=function(a){this._BLINK_TIME=1;Ha.call(this,a)};i["screen.ScreenEndGame"]=Og;Og.__name__=["screen","ScreenEndGame"];Og.getTicketTypeByGame=function(a){switch(a){case "ANCHOVY_FLICK":return"INT_TICKET_COUNT_GREEN";
case "BASKETBALL":return"INT_TICKET_COUNT_GREEN";case "DANGER_LASER":return"INT_TICKET_COUNT_GOLD";case "HOOF_MACHINE":return"INT_TICKET_COUNT_SILVER";case "PACK_MAZE":return"INT_TICKET_COUNT_GOLD";case "ROCK_EM_SOCK_EM":return"INT_TICKET_COUNT_SILVER";case "SKATE_LANE":return"INT_TICKET_COUNT_SILVER";case "SKEEBALL":return"INT_TICKET_COUNT_GREEN";case "SLIME_EXPLODE":return"INT_TICKET_COUNT_SILVER";case "WHACK_A_MOLE":return"INT_TICKET_COUNT_GOLD";default:return"INT_TICKET_COUNT_SILVER"}};Og.__super__=
Ha;Og.prototype=z(Ha.prototype,{_buildScreen:function(){var a=this;this._blinkTimer=this._BLINK_TIME;this._closing=!1;var b=m.getString("STRING_MINIGAME");this._prizeCycle=[];var c=0,d=m.getInt("INT_SCORE"),e=m.getString("STRING_FORCE_PRIZE"),e=null!=e?e.split(" "):[];switch(b){case "ANCHOVY_FLICK":c=8E3<d?3:5E3<d?2:2500<d?1:0;m.setInt("INT_REWARD_LEVEL",c);break;case "BASKETBALL":c=22E3<d?3:15E3<d?2:8E3<d?1:0;m.setInt("INT_REWARD_LEVEL",c);break;case "DANGER_LASER":c=2E4<d?3:13500<d?2:8E3<d?1:0;
m.setInt("INT_REWARD_LEVEL",c);break;case "HOOF_MACHINE":c=0<e.length?3:0;m.setInt("INT_REWARD_LEVEL",c);break;case "PACK_MAZE":c=15E4<d?3:1E5<d?2:5E4<d?1:0;m.setInt("INT_REWARD_LEVEL",c);break;case "ROCK_EM_SOCK_EM":c=15E3<d?3:8E3<d?2:4E3<d?1:0;m.setInt("INT_REWARD_LEVEL",c);break;case "SKATE_LANE":c=2E4<d?3:13500<d?2:8E3<d?1:0;m.setInt("INT_REWARD_LEVEL",c);break;case "SKEEBALL":c=5E4<d?3:25E3<d?2:1E4<d?1:0;m.setInt("INT_REWARD_LEVEL",c);break;case "SLIME_EXPLODE":c=12E3<d?3:5E3<d?2:3500<d?1:0;
m.setInt("INT_REWARD_LEVEL",c);break;case "WHACK_A_MOLE":c=15E3<d?3:8E3<d?2:4E3<d?1:0,m.setInt("INT_REWARD_LEVEL",c)}this._elementManager.addElement(new Ed({color:0,sizeX:fb.STAGE_WIDTH,sizeY:560,alpha:0.5}));this._tray=this._elementManager.addElement(new n({alpha:0}));d=this._tray.addChild(new Hl({tween:this._tween,y:-135}));this._tray.addChild(new n({asset:"end_game/endgame_panel"}));d.lock();var f=this._tray.addChild(new E({library:"end_game/ui_bar_edge_glow",x:-180,y:-135,scale:0.4,originX:0}));
f.animate("edge_glow_sizzle_1");this._tween.tween({target:f,duration:1.85,delay:1,ease:G.outQuart},{x:460*((c+1)/4)-215+(3==c?-30:0)});ha.start(function(){a._tween.tween({target:f,duration:0.2,overwrite:3==c,ease:G.outQuad},{scale:0,alpha:0})},2);this._frame=this._tray.addChild(new Mb({y:-205}));this._score=this._frame.addChild(new Il({tween:this._tween,x:0,y:-20}));this._score.lock();m.getInt("INT_REWARD_LEVEL");d=Zb.get_instance().highScores;if(null!=K[b]?d.existsReserved(b):d.h.hasOwnProperty(b)){var d=
m.getInt("INT_SCORE"),g=Zb.get_instance().highScores;if((null!=K[b]?g.getReserved(b):g.h[b])<d)g=Zb.get_instance().highScores,null!=K[b]?g.setReserved(b,d):g.h[b]=d}else d=Zb.get_instance().highScores,g=m.getInt("INT_SCORE"),null!=K[b]?d.setReserved(b,g):d.h[b]=g;if(0<e.length){d=0;for(g=zi.GlobalPrizes;d<g.length;){var j=g[d];++d;for(var p=0,h=e.length;p<h;){var i=p++;L.parseInt(e[i])==j.id&&this._prizeCycle.push(j)}}}if(0==this._prizeCycle.length)e=zi.getTicketsForRarity(c),m.modifyInt(Og.getTicketTypeByGame(b),
e),d=this._tray.addChild(new n({y:0,alpha:0})),g=d.addChild(new V({text:"end_game.tix",y:85})),d.setAsset(this._getTicketGrapicByGame(b)),g.setVariables([e]),Ub.easeBounceIn(d,this._tween,!0,1),ha.start(function(){s.playSound("arcade_claim_prize",1)},1);else{b=[];e=this._tray.addChild(new n({asset:"shop/endgame_flash-burst",x:10,y:-20,alpha:0,scale:0}));e.inputEnabled=!1;this._tween.tween({target:e,duration:0.25,ease:G.outQuad},{alpha:0.75,scale:0.75});e=0;for(d=this._prizeCycle.length;e<d;){g=e++;
j=!1;p=0;for(h=Zb.get_instance().collectedPrizes.length;p<h;)if(i=p++,Zb.get_instance().collectedPrizes[i].id==this._prizeCycle[g].id){Zb.get_instance().collectedPrizes[i].count++;j=!0;break}j||Zb.get_instance().collectedPrizes.push({id:this._prizeCycle[g].id,count:1});b.push(this._tray.addChild(new n({asset:this._prizeCycle[g].image,x:0,y:0,alpha:0,scale:0})))}e=0;for(d=b.length;e<d;)g=e++,b[g].set_x(-100*b.length/2+50+100*g),this._tween.tween({target:b[g],duration:0.25,ease:G.outBack,delay:0.25*
g},{alpha:1,scale:1}),ha.start(function(){s.playSound("nick_arcade_general_pickup",0.5)},0.25*g);m.setString("STRING_FORCE_PRIZE","")}Zb.get_instance().save();this._frame.alpha=0;this._tray.alpha=0;this._loadWidget=this._tray.addChild(new tj({tween:this._tween,y:240}));this._tray.addChild(new da({assetUp:"end_game/endgame_btn_replay",tween:this._tween,clear:v(this,this._clearButtonInput),x:-160,y:190})).eventClick.add(v(this,this._onPlayAgainClick));this._tray.addChild(new da({assetUp:"end_game/endgame_btn_home",
tween:this._tween,clear:v(this,this._clearButtonInput),x:160,y:190})).eventClick.add(v(this,this._onBackToMenuClick));this._tray.addChild(new da({assetUp:"end_game/endgame_btn_leaderboard",tween:this._tween,clear:v(this,this._clearButtonInput),x:0,y:190})).eventClick.add(v(this,this._onLeaderboardClick))},dispose:function(){this._loadWidget=this._tray=this._frame=this._clickTray=this._score=this._buttonPlayAgain=this._textClickToPlay=null;Ha.prototype.dispose.call(this)},update:function(a){Ha.prototype.update.call(this,
a)},_getTicketGrapicByGame:function(a){switch(Og.getTicketTypeByGame(a)){case "INT_TICKET_COUNT_GOLD":return"end_game/endgame_ticket_gold";case "INT_TICKET_COUNT_GREEN":return"end_game/endgame_ticket_green";default:return"end_game/endgame_ticket_silver"}},_setInState:function(){var a=this;Ub.easeBounceIn(this._tray,this._tween).onComplete(function(){Ub.easeBounceIn(a._frame,a._tween);a._finishInState()})},_setCloseState:function(){m.setInt("INT_SCORE",0);Ub.easeBounceOut(this._tray,this._tween).onComplete(v(this,
this._finishCloseState))},_onPlayAgainClick:function(){var a=this;if(!this._closing){this._closing=!0;m.setInt("INT_SCORE",0);var b=bp.getBoosterOptions(m.getString("STRING_MINIGAME")),c=M.randomInt(0,b.length-1);m.setString("STRING_BOOSTER",b[c]);var d=this._tray.addChild(new n({asset:"nickade_UI_booster_spinner_circle_FPO",y:22})),e=this._tray.addChild(new n({asset:"nickade_UI_booster_spinner_arrow",y:22,originY:0.75}));d.addChild(new V({text:"booster."+b[0],x:-57,y:-36,rotation:-58}));d.addChild(new V({text:"booster."+
b[1],x:57,y:-36,rotation:58}));d.addChild(new V({text:"booster."+b[2],x:0,y:60}));var f=[300,60,180][c];Ub.easeBounceIn(d,this._tween,!0).onComplete(function(){var b=a._tween,c=360*M.randomInt(2,5);b.tween({target:e,duration:2,ease:G.outQuad},{rotation:f+c}).onComplete(function(){P.flow.dispatch("END_GAME_PLAY_AGAIN")})})}},_onBackToMenuClick:function(){this._closing||(this._closing=!0,m.setInt("INT_SCORE",0),P.flow.dispatch("GAME_SELECT_OPEN"))},_onLeaderboardClick:function(){P.flow.dispatch("LEADERBOARD_OPEN")},
_tweenOutClickTray:function(){null!=this._clickTray&&Ub.easeBounceOut(this._clickTray,this._tween)},__class__:Og});var Uj=function(a){Ha.call(this,a)};i["screen.ScreenEnterCode"]=Uj;Uj.__name__=["screen","ScreenEnterCode"];Uj.__super__=Ha;Uj.prototype=z(Ha.prototype,{_buildScreen:function(){this._closing=!1;this._inputBuffer="";this._keyLength=m.getString("STRING_UNLOCK_CODE").length;4>this._keyLength&&(this._keyLength=4);this._tray=this._elementManager.addElement(new n({asset:"ui/splash/nick_arcade_splash"}));
this._tray.addChild(new V({y:-205,text:"code.code_copy",origin:0.5}));this._inputTextField=this._tray.addChild(new V({text:"code.enter_code_header",y:-130,scale:0.5}));this._backButton=this._tray.addChild(new da({clear:v(this,this._clearButtonInput),x:fb.STAGE_CENTER_X-100,y:-180,tween:this._tween,assetUp:"template/ui/debug/debug_button"}));this._backButton.addChild(new V({y:0,text:"common.back"}));this._backButton.eventClick.add(v(this,this._onButtonBackClick));this._inputBuffer="";this._createNumPad();
this._keyboard=this._tray.addChild(new Jl({tween:this._tween,buttonClear:v(this,this._clearButtonInput),y:280}));this._tray.visible=!1},dispose:function(){Ha.prototype.dispose.call(this);this._inputBuffer=this._inputTextField=this._backButton=this._tray=this._keyboard=null},_addEventListeners:function(){Ha.prototype._addEventListeners.call(this);w.eventKey.add(v(this,this._handleInputArbitraryKeyKeyboard));null!=this._keyboard&&this._keyboard.eventArbitraryKey.add(v(this,this._handleInputArbitraryKeyButton))},
_removeEventListeners:function(){Ha.prototype._removeEventListeners.call(this);w.eventKey.add(v(this,this._handleInputArbitraryKeyKeyboard))},_handleInputArbitraryKeyButton:function(a){switch(a){case "backspace":this._removeCharFromInputBuffer();break;case "enter":this._onButtonEnterClick();break;default:this._addCharToInputBuffer(a)}},_handleInputArbitraryKeyKeyboard:function(a,b){if(!1!=b){var c=L.string(a);if(1<c.length&&("Number"==Z.substr(c,0,6)||"Numpad"==Z.substr(c,0,6)))c=Z.substr(c,c.length-
1,null);switch(c){case "0":case "1":case "2":case "3":case "4":case "5":case "6":case "7":case "8":case "9":case "A":case "B":case "C":case "D":case "E":case "F":case "G":case "H":case "I":case "J":case "K":case "L":case "M":case "N":case "O":case "P":case "Q":case "R":case "S":case "T":case "U":case "V":case "W":case "X":case "Y":case "Z":this._addCharToInputBuffer(c);break;case "Backspace":case "Delete":this._removeCharFromInputBuffer();break;case "Enter":this._onButtonEnterClick();break;case "Minus":this._addCharToInputBuffer("_")}}},
_onButtonKeyClick:function(a){this._addCharToInputBuffer(a)},_onButtonEnterClick:function(){this._inputBuffer!=m.getString("STRING_UNLOCK_CODE")?this._resetInputBuffer():m.setBool("BOOL_CODE_UNLOCK",!0)},_resetInputBuffer:function(){this._inputBuffer=""},_addCharToInputBuffer:function(a){for(this._inputBuffer+=a;this._inputBuffer.length>this._keyLength;)this._inputBuffer=Z.substr(this._inputBuffer,1,this._inputBuffer.length)},_removeCharFromInputBuffer:function(){0<this._inputBuffer.length&&(this._inputBuffer=
this._inputBuffer.substring(0,this._inputBuffer.length-1))},_setInState:function(){this._closing=!1;Ub.easeBounceIn(this._tray,this._tween).onComplete(v(this,this._finishInState))},_setCloseState:function(){this._closing||(this._closing=!0,Ub.easeBounceOut(this._tray,this._tween).onComplete(v(this,this._finishCloseState)))},_onButtonBackClick:function(){this._state==Ve.OPENED&&P.flow.dispatch("ENTER_CODE_CLOSE")},_createNumPad:function(){for(var a=this,b=0,c=0,d=0,e=0,f="",g="",j;10>=e;){g="template/ui/debug/debug_button";
f="code_key_"+L.string(e+1);j=null;b=e+1;switch(e){case 0:c=-80;d=-20;break;case 1:c=0;break;case 2:c=80;break;case 3:c=-80;d=60;break;case 4:c=0;break;case 5:c=80;break;case 6:c=-80;d=140;break;case 7:c=0;break;case 8:c=80;break;case 9:d=220;f="code_key_0";b=0;break;case 10:c=-40,f="code_key_enter",j=v(this,this._onButtonEnterClick)}g=this._tray.addChild(new da({x:c,y:d,clear:v(this,this._clearButtonInput),tween:this._tween,assetUp:g}));g.addChild(new V({x:0,y:0,text:f}));null==j&&(j=function(){a._handleInputArbitraryKeyButton(null==
b?"null":""+b)});g.eventClick.add(j);j=g=null;++e}},__class__:Uj});var Ud=i["screen.TICKET_TYPE"]={__ename__:["screen","TICKET_TYPE"],__constructs__:["SILVER","GOLD","GREEN"]};Ud.SILVER=["SILVER",0];Ud.SILVER.toString=r;Ud.SILVER.__enum__=Ud;Ud.GOLD=["GOLD",1];Ud.GOLD.toString=r;Ud.GOLD.__enum__=Ud;Ud.GREEN=["GREEN",2];Ud.GREEN.toString=r;Ud.GREEN.__enum__=Ud;var Yj=function(a){this._rocketClicked=this._flagLockCabinets=!1;this._balloonCount=3;this._chestTongueState=!1;this._slimeUnderlay=null;this._slushieAutoDrain=
!0;this._slushieOverlay=null;this._flagBlockInteractableInput=this._slushieRoutineActive=this._slushieRise=!1;Ha.call(this,a)};i["screen.ScreenGameSelect"]=Yj;Yj.__name__=["screen","ScreenGameSelect"];Yj.__super__=Ha;Yj.prototype=z(Ha.prototype,{_buildScreen:function(){var a=this;s.playMusic("nick_arcade_ambience",0.175);s.stopSound(m.getString("STRING_MUSIC"));s.playSound(m.getString("STRING_MUSIC"),0.035,null,!0);m.setString("STRING_MUSIC","NONE");this._cabinets=[];this._tray=this._elementManager.addElement(new Mb({}));
this._slimeUnderlay=this._tray.addChild(new Ed({color:65024,sizeX:1212,sizeY:560}));this._tray.addChild(new af(!0,8,{tween:this._tween,x:200,y:-214}));this._tray.addChild(new af(!1,3,{tween:this._tween,x:1590,y:0}));this._tray.addChild(new n({asset:"arcade_gallery_bg",x:1818}));this._background1=this._tray.addChild(new n({}));this._background2=this._tray.addChild(new n({x:6060}));this._background2.addChild(new af(!0,8,{tween:this._tween,x:-470,y:-214}));this._background1.addChild(new af(!0,5,{tween:this._tween,
x:-1200,y:-214}));this._background1.addChild(new af(!0,4,{tween:this._tween,x:-1700,y:-214}));this._background2.addChild(new af(!0,4,{tween:this._tween,x:-1050,y:-214}));this._background1.addChild(new af(!0,4,{tween:this._tween,x:-400,y:-214}));this._background1.addChild(new af(!0,4,{tween:this._tween,x:2810,y:-214}));this._background1.addChild(new af(!0,4,{tween:this._tween,x:-2300,y:-214}));this._background1.addChild(new af(!1,3,{tween:this._tween,x:375,y:0}));this._background2.addChild(new af(!1,
3,{tween:this._tween,x:368,y:0}));this._background2.addChild(new af(!1,3,{tween:this._tween,x:1575,y:0}));this._background1.addChild(new af(!1,3,{tween:this._tween,x:-2040,y:0}));this._background1.addChild(new n({asset:"arcade_gallery_bg",originX:0}));this._background1.addChild(new n({asset:"arcade_gallery_bg",originX:1}));this._background1.addChild(new n({asset:"arcade_gallery_bg",originX:2}));this._background1.addChild(new n({asset:"arcade_gallery_bg",originX:-1}));this._background1.addChild(new n({asset:"arcade_gallery_bg",
originX:-2}));this._background1.addChild(new n({asset:"arcade_gallery_bg",originX:-3}));this._background2.addChild(new n({asset:"arcade_gallery_bg",originX:0}));this._background2.addChild(new n({asset:"arcade_gallery_bg",originX:1}));this._background2.addChild(new n({asset:"arcade_gallery_bg",originX:2}));this._background2.addChild(new n({asset:"arcade_gallery_bg",originX:-1}));this._background2.addChild(new n({asset:"arcade_gallery_bg",originX:-2}));this._elementManager.addElement(new da({tween:this._tween,
clear:v(this,this._clearButtonInput),assetUp:"collections/ui_btn_collection",x:fb.STAGE_CENTER_X-75,y:-205})).eventClick.add(v(this,this._onEventCollectionClick));this._startPos=Aa.request();this._targetPos=Aa.request();this._inputPos=Aa.request();this._workLine=lf.request();this._baseLength=0;this._cameraEaseFactor=8;var b=this._background1.addChild(new E({library:"spine/neon_sign_1",scale:1,x:-400,y:-50}));b.animate("sign_loop_1");b=this._background2.addChild(new E({library:"spine/neon_sign_2",
scale:1,x:1E3,y:-50}));b.animate("sign_loop_1");b=this._background2.addChild(new E({library:"spine/neon_sign_3",scale:1,x:150,y:-50}));b.animate("sign_loop_1");b=this._background1.addChild(new E({library:"spine/neon_sign_3",scale:1,x:2300,y:-60,rotation:90}));b.animate("sign_loop_1");b=this._background2.addChild(new E({library:"spine/neon_sign_2",scale:1,x:-1350,y:-50}));b.animate("sign_loop_1");b=this._background1.addChild(new E({library:"spine/neon_sign_3",scale:1,x:150,y:-50}));b.animate("sign_loop_1");
b=this._background1.addChild(new E({library:"spine/neon_sign_1",scale:1,x:1120,y:-20}));b.animate("sign_loop_1");b=this._background2.addChild(new E({library:"spine/neon_sign_4",scale:1,x:1330,y:-50}));b.animate("sign_loop_1");this._background1.addChild(new n({asset:"props/squidward_portrait",x:950,y:-50}));b=this._background1.addChild(new E({library:"spine/multi_TV_screen_1",x:1760,y:-20,scaleX:-1}));b.animate("TV_multi_seq_1");this._background2.addChild(new n({asset:"props/patrick_portrait",x:-700,
y:-75}));this._background2.addChild(new n({asset:"props/Portrait_capt_man",x:-180,y:-65}));this._background2.addChild(new n({asset:"props/speaker_1",x:-290,y:-100}));this._background1.addChild(new n({asset:"props/potrait_pony",x:-600,y:-65}));this._background2.addChild(new n({asset:"props/portrait_goat",x:620,y:-65}));this._background1.addChild(new n({asset:"props/helga-shrine",x:0,y:70}));this._background1.addChild(new n({asset:"props/table_2",x:-80,y:230}));this._background1.addChild(new n({asset:"props/bitten_chicken_wing",
x:-80,y:190}));this._background1.addChild(new n({asset:"props/chicken_wing_1",x:-310,y:250}));this._background1.addChild(new n({asset:"props/chicken_wing_3",x:-610,y:230}));b=this._background1.addChild(new E({library:"spine/multi_TV_screen_1",x:-150,y:-50}));b.animate("TV_multi_seq_1");b=this._background2.addChild(new E({library:"spine/multi_TV_screen_1",x:1480,y:-50}));b.animate("TV_multi_seq_1");this._background2.addChild(new n({asset:"props/speaker_2",x:1060,y:-120}));this._background2.addChild(new n({asset:"props/speaker_1",
x:750,y:-110}));this._background2.addChild(new n({asset:"props/slime_decor",x:190,y:120,scale:1.2}));this._background1.addChild(new n({asset:"props/slime_decor",x:1650,y:120,scaleX:-1.2,scaleY:1.2}));this._background2.addChild(new n({asset:"props/slime_decor",x:-740,y:120,scaleX:-1.2,scaleY:1.2}));this._background2.addChild(new n({asset:"props/table_set",x:3400,y:180}));this._background2.addChild(new n({asset:"big_gulp_1",x:3420,y:110}));this._background1.addChild(new n({asset:"props/slime_decor",
x:3E3,y:120,scaleX:-1.2,scaleY:1.2}));this._background2.addChild(new n({asset:"props/potrait_cat_dog",x:2040,y:-30}));this._background2.addChild(new n({asset:"props/ace_savvy_costume_display",x:2395,y:20}));this._background1.addChild(new n({asset:"props/potrait_rugrats",x:2020,y:-40}));this._background1.addChild(new n({asset:"props/man_hole_lid",x:1980,y:230}));this._background1.addChild(new n({asset:"props/doodlebob_pencil",x:2450,y:60}));this._background2.addChild(new n({asset:"props/slime_decor",
x:-2080,y:120,scaleX:-1.2,scaleY:1.2}));this._setupClickableGalleryProps();this._shop=this._background2.addChild(new Kl(v(this,this._clearButtonInput),{tween:this._tween,x:-1770,y:25}));this._background1.addChild(new n({asset:"props/table_2",x:205,y:160}));this._background1.addChild(new n({asset:"big_gulp_1",x:195,y:90,scale:0.65}));this._background1.addChild(new n({asset:"props/potrait_hey_arnold",x:-1300,y:20}));this._background2.addChild(new n({asset:"props/Jellyfish_net",x:3250,y:-45}));this._background1.addChild(new n({asset:"props/table_set",
x:1090,y:170}));this._background1.addChild(new n({asset:"props/Gary's_ball",x:1475,y:200}));this._background1.addChild(new n({asset:"props/lucha_mask_1",x:1350,y:-80,scale:0.8}));this._background1.addChild(new n({asset:"props/lucha_mask_2",x:1350,y:50,scale:0.8}));this._background2.addChild(new n({asset:"props/man_hole_lid",x:290,y:230}));this._background2.addChild(new n({asset:"props/mermaid_man_costume-display",x:940,y:10}));this._background2.addChild(new n({asset:"props/barnacle_boy_costume-display",
x:1150,y:10}));this._background2.addChild(new n({asset:"props/captain_man_suit_display",x:360,y:30}));this._background2.addChild(new n({asset:"props/gameshakers_donut",x:-1300,y:145}));b=this._background2.addChild(new E({library:"spine/single_TV_screen_1",x:-3E3,y:-40,scaleX:-1}));b.animate("TV_seq_1");this._background2.addChild(new n({asset:"props/plankton_jar",x:-2750,y:-10}));this._background2.addChild(new n({asset:"props/table_set",x:-230,y:230}));this._background2.addChild(new n({asset:"props/ticket_cup",
x:-230,y:140}));this._background2.addChild(new n({asset:"props/table_set",x:-2780,y:250}));this._background2.addChild(new n({asset:"props/ticket_cup",x:-2780,y:160}));var b=0,c=this._background1.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"cab_pony-crane",x:-940+1250*b,y:0}));c.eventClick.add(function(){a._onEventCabinetClick("HOOF_MACHINE")});this._background1.addChild(this._makeTicketSign("HOOF_MACHINE",-940+1250*b));this._cabinets.push(c);b=1;c=this._background1.addChild(new da({tween:this._tween,
clear:v(this,this._clearButtonInput),assetUp:"cab_loud-laugh",x:-940+1250*b,y:0}));this._background1.addChild(this._makeTicketSign("WHACK_A_MOLE",-965+1250*b));c.eventClick.add(function(){a._onEventCabinetClick("WHACK_A_MOLE")});this._cabinets.push(c);b=2;c=this._background1.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"cab_stuff-the-anchovies",x:-940+1250*b,y:0}));c.eventClick.add(function(){a._onEventCabinetClick("ANCHOVY_FLICK")});this._background1.addChild(this._makeTicketSign("ANCHOVY_FLICK",
-975+1250*b));this._cabinets.push(c);b=3;c=this._background1.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"cab_danger-lasers",x:-940+1250*b,y:0}));c.eventClick.add(function(){a._onEventCabinetClick("DANGER_LASER")});this._background1.addChild(this._makeTicketSign("DANGER_LASER",-940+1250*b));this._cabinets.push(c);b=4;c=this._background2.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"cab_ollies-maze",x:-600+1250*b,y:25}));c.eventClick.add(function(){a._onEventCabinetClick("PACK_MAZE")});
this._background2.addChild(this._makeTicketSign("PACK_MAZE",-600+1250*b));this._cabinets.push(c);b=0;c=this._background2.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"cab_rockemsockem",x:-940+1250*b,y:20}));c.eventClick.add(function(){a._onEventCabinetClick("ROCK_EM_SOCK_EM")});this._background2.addChild(this._makeTicketSign("ROCK_EM_SOCK_EM",-940+1250*b));this._cabinets.push(c);b=1;c=this._background2.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),
assetUp:"cab_skeeball",x:-940+1250*b,y:60}));c.eventClick.add(function(){a._onEventCabinetClick("SKEEBALL")});this._background2.addChild(this._makeTicketSign("SKEEBALL",-935+1250*b));this._cabinets.push(c);b=2;c=this._background2.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"cab_slime-challenge",x:-1040+1250*b,y:0}));c.eventClick.add(function(){a._onEventCabinetClick("SLIME_EXPLODE")});this._background2.addChild(this._makeTicketSign("SLIME_EXPLODE",-1040+1250*b));
this._cabinets.push(c);b=3;c=this._background2.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"cab_slimeball",x:-940+1250*b,y:0}));c.eventClick.add(function(){a._onEventCabinetClick("BASKETBALL")});this._background2.addChild(this._makeTicketSign("BASKETBALL",-930+1250*b));this._cabinets.push(c);b=4;c=this._background2.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"cab_skatetheblock",x:-1200+1250*b,y:0}));c.eventClick.add(function(){a._onEventCabinetClick("SKATE_LANE")});
this._background2.addChild(this._makeTicketSign("SKATE_LANE",-1165+1250*b));this._cabinets.push(c);this._background1.addChild(new n({asset:"props/Blimp",x:1200,y:-200}));this._background2.addChild(new n({asset:"props/Blimp",x:-2370,y:-220}));this._background2.addChild(new n({asset:"props/Blimp",x:3200,y:-230,scaleX:-1}));this._background1.addChild(new n({asset:"props/ollie'swall_ball",x:3100,y:230}));this._slushieOverlay=this._tray.addChild(new E({library:"spine/slushie_screen_fill",x:0,y:840,originY:1,
alpha:0}));this._slushieOverlay.animate("slushie_idle");var d=this._background2.addChild(new E({library:"spine/glove_balloons",x:1800,y:210}));d.animate("idle_1");b=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:0,y:-50});c=d.addChild(b);c.setCustomHitBox(175,900);c.eventClick.add(function(){s.stopSound("btn_default");if(!a._flagBlockInteractableInput){a._flagBlockInteractableInput=!0;ha.start(function(){a._flagBlockInteractableInput=!1},1.3);var b=0.3>M.randomFloat(0,1);switch(a._balloonCount){case 1:d.animate(b?
"pop_3":"bump_3",1);b||d.queueAnimation("idle_3");break;case 2:d.animate(b?"pop_2":"bump_2",1);d.queueAnimation(b?"idle_3":"idle_2");break;case 3:d.animate(b?"pop_1":"bump_1",1);d.queueAnimation(b?"idle_2":"idle_1");break;default:return}b&&0<a._balloonCount&&(s.playSound("arcade_interactive_balloon_deflate"),s.stopSound("btn_default"),a._balloonCount--)}});this._background2.addChild(new n({asset:"props/table_set",x:1950,y:260}));this._background2.addChild(new n({asset:"props/ticket_cup",x:1950,y:170}))},
_addEventListeners:function(){P.purchaseKioskPrize.add(v(this,this._onPurchaseKioskPrize))},_removeEventListeners:function(){P.purchaseKioskPrize.remove(v(this,this._onPurchaseKioskPrize))},_onPurchaseKioskPrize:function(a){var b=this;0<a.price.length&&m.modifyInt("INT_TICKET_COUNT_SILVER",-a.price[0]);1<a.price.length&&m.modifyInt("INT_TICKET_COUNT_GOLD",-a.price[1]);2<a.price.length&&m.modifyInt("INT_TICKET_COUNT_GREEN",-a.price[2]);Zb.get_instance().save();for(var c=!1,d=0,e=Zb.get_instance().collectedPrizes.length;d<
e;){var f=d++;if(Zb.get_instance().collectedPrizes[f].id==a.id){Zb.get_instance().collectedPrizes[f].count++;c=!0;break}}c||Zb.get_instance().collectedPrizes.push({id:a.id,count:1});var g=this._tray.addChild(new Ll(a,this._tween,{x:this._targetPos.x,y:0}));this._flagBlockInput=!0;ha.start(function(){b._flagBlockInput=!1;g.doDelete=!0},5);m.setString("STRING_FORCE_PRIZE","");this._shop.updateTicketAmounts();Zb.get_instance().save()},_makeTicketSign:function(a,b,c){null==c&&(c=-200);null==b&&(b=0);
b=new n({asset:"ticket_indicator_purple",x:b,y:c,scale:1});switch(Og.getTicketTypeByGame(a)){case "INT_TICKET_COUNT_GOLD":a="ticket_icon_gold";break;case "INT_TICKET_COUNT_GREEN":a="ticket_icon_green";break;default:a="ticket_icon_silver"}b.addChild(new n({asset:a,scale:0.85,y:-4}));return b},_loopTweenTicketSign:function(a){var b=this,c=this._tween,d=a.get_y()-15;c.tween({target:a,duration:0.65,ease:G.inOutQuad},{y:d}).onComplete(function(){var c=b._tween,d=a.get_y()+15;c.tween({target:a,duration:0.65,
ease:G.inOutQuad},{y:d}).onComplete(function(){b._loopTweenTicketSign(a)})})},_setupClickableGalleryProps:function(){var a=this;this._background1.addChild(new n({asset:"props/giant_corn",x:800,y:0}));var b=this._background1.addChild(new E({library:"spine/burger_stand",scale:0.85,x:675,y:200}));b.animate("idle2");var c=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:70,y:-150}),c=b.addChild(c);c.setCustomHitBox(100,150);c.eventClick.add(function(){!a._slushieRoutineActive&&!a._flagBlockInteractableInput&&
(a._flagBlockInteractableInput=!0,ha.start(function(){a._flagBlockInteractableInput=!1},1.3),s.playSound("arcade_interactive_burger_alarm"),s.stopSound("btn_default"),ha.start(function(){s.playSound("arcade_burger_drop")},0.75),b.animate("burger_pop",1),b.queueAnimation("idle2"))});c=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:-80,y:-150});c=b.addChild(c);c.setCustomHitBox(100,150);c.eventClick.add(function(){if(a._slushieRoutineActive)a._slushieRise&&(a._tween.stop(a._slushieOverlay),
a._slushieRise=!1);else if(s.playSound("arcade_interactive_slushie_machine"),s.stopSound("btn_default"),0.2>M.randomFloat(0,1))a._slushieRoutineActive=!0,b.animate("slush_overflow_in",1),b.queueAnimation("slush_overflow_loop"),ha.start(function(){a._slushieOverlay.alpha=1;a._slushieOverlay.set_y(840);a._slushieRise=!0;a._tween.tween({target:a._slushieOverlay,duration:13,overwrite:!0,ease:G.inOutQuad},{y:140}).onComplete(function(){b.animate("slush_overflow_stop",1);a._slushieRise=!1;a._slushieAutoDrain&&
ha.start(function(){s.playSound("arcade_interactive_toliet");a._drainSlushie(b)},10,"slushie_auto_drain")})},7);else if(s.stopSound("btn_default"),!a._flagBlockInteractableInput){a._flagBlockInteractableInput=!0;ha.start(function(){a._flagBlockInteractableInput=!1},1.3);var c=0.3>M.randomFloat(0,1)?"slush_crank":"slush_crank_regular";b.animate(c,1);b.queueAnimation("idle2")}});c=this._background2.addChild(new n({asset:"props/restroom_opening",x:-2240,y:12})).addChild(new da({tween:this._tween,clear:v(this,
this._clearButtonInput),x:0,y:0}));c.setCustomHitBox(150,250);c.eventClick.add(function(){a._slushieRoutineActive&&a._drainSlushie(b);s.playSound("arcade_interactive_toliet");s.stopSound("btn_default")});var d=this._background1.addChild(new E({library:"spine/drink_fountain",scale:1,x:2200,y:150}));d.animate("idle_1");c=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:20,y:-50});c=d.addChild(c);c.setCustomHitBox(125,125);c.eventClick.add(function(){s.stopSound("btn_default");a._flagBlockInteractableInput||
(a._flagBlockInteractableInput=!0,ha.start(function(){a._flagBlockInteractableInput=!1},1),s.playSound("arcade_interactive_fountain"),d.animate("fountain_run",1),d.queueAnimation("idle_1"))});var e=this._background2.addChild(new E({library:"spine/special_door",scale:1,x:-500,y:135}));e.animate("idle");c=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:95,y:-100});c=e.addChild(c);c.setCustomHitBox(45,60);c.eventClick.add(function(){s.stopSound("btn_default");a._flagBlockInteractableInput||
(a._flagBlockInteractableInput=!0,ha.start(function(){a._flagBlockInteractableInput=!1},2),s.playSound("arcade_interactive_light_switch"),ha.start(function(){s.playSound("arcade_interactive_door_open");ha.start(function(){s.playSound("arcade_interactive_tentacle");s.playSound("arcade_interactive_light_switch");ha.start(function(){s.playSound("arcade_interactive_door_close")},0.5)},0.5)},0.5),e.animate("switch_flip",1),e.queueAnimation("idle"))});var f=this._background2.addChild(new E({library:"spine/ticket_machine",
scale:1.15,x:2240,y:230}));f.animate("idle_1");c=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:0,y:-75});c=f.addChild(c);c.setCustomHitBox(150,175);c.eventClick.add(function(){s.stopSound("btn_default");a._flagBlockInteractableInput||(a._flagBlockInteractableInput=!0,ha.start(function(){a._flagBlockInteractableInput=!1},1.3),s.playSound("arcade_interactive_ticket_dispenser"),f.animate("ticket_sequence",1),f.queueAnimation("idle_1"))});var g=this._background2.addChild(new E({library:"spine/chest",
x:700,y:190}));g.animate("idle_tongue_in");c=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:0,y:0});c=g.addChild(c);c.setCustomHitBox(125,75);c.eventClick.add(function(){s.stopSound("btn_default");a._flagBlockInteractableInput||(a._flagBlockInteractableInput=!0,ha.start(function(){a._flagBlockInteractableInput=!1},1.3),s.playSound("arcade_interactive_tongue_chest"),a._chestTongueState?(g.animate("interact_tongue_in",1),g.queueAnimation("idle_tongue_in")):(g.animate("interact_tongue_out",
1),g.queueAnimation("idle_tongue_out")),a._chestTongueState=!a._chestTongueState)});var j=this._background1.addChild(new E({library:"spine/fish_trash_can_1",x:-730,y:160}));j.animate("fish_can_idle_1");c=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:0,y:-80});c=j.addChild(c);c.setCustomHitBox(75,145);c.eventClick.add(function(){s.stopSound("btn_default");a._flagBlockInteractableInput||(a._flagBlockInteractableInput=!0,ha.start(function(){a._flagBlockInteractableInput=!1},1.3),j.animate("can_open_seq_1",
1),0.5>M.randomFloat(0,1)?(s.playSound("arcade_interactive_anchovy_garbage_toss"),j.queueAnimation("spit_out_garb_1",1)):(s.playSound("arcade_interactive_anchovy_garbage"),j.queueAnimation("chomp_seq_1",1)),j.queueAnimation("fish_can_idle_1"))});var p=this._background2.addChild(new E({library:"spine/fish_trash_can_1",x:-2500,y:160}));p.animate("fish_can_idle_1");c=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:0,y:-80});c=p.addChild(c);c.setCustomHitBox(75,145);c.eventClick.add(function(){s.stopSound("btn_default");
a._flagBlockInteractableInput||(a._flagBlockInteractableInput=!0,ha.start(function(){a._flagBlockInteractableInput=!1},1.3),p.animate("can_open_seq_1",1),0.5>M.randomFloat(0,1)?(s.playSound("arcade_interactive_anchovy_garbage_toss"),p.queueAnimation("spit_out_garb_1",1)):(s.playSound("arcade_interactive_anchovy_garbage"),p.queueAnimation("chomp_seq_1",1)),p.queueAnimation("fish_can_idle_1"))});this._background1.addChild(new n({asset:"props/table_set",x:-410,y:170}));var h=this._background1.addChild(new E({library:"spine/chicken_bucket",
scale:1,x:-410,y:155}));h.animate("idle");c=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:0,y:-50});c=h.addChild(c);c.setCustomHitBox(125,125);c.eventClick.add(function(){s.stopSound("btn_default");a._flagBlockInteractableInput||(a._flagBlockInteractableInput=!0,ha.start(function(){a._flagBlockInteractableInput=!1},1.3),s.playSound(M.randomObject(["arcade_interactive_chicken","arcade_interactive_chicken_alt"])),h.animate("empty-bucket",1),h.queueAnimation("refill-bucket",1),h.queueAnimation("idle"))});
var i=this._background1.addChild(new E({library:"spine/rocket_trash_can",x:-1900,y:170}));i.animate("R_idle");c=new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:0,y:-100});c=i.addChild(c);c.setCustomHitBox(80,150);c.eventClick.add(function(){s.stopSound("btn_default");!a._flagBlockInteractableInput&&!a._rocketClicked&&(a._flagBlockInteractableInput=!0,ha.start(function(){a._flagBlockInteractableInput=!1},1.3),a._rocketClicked=!0,s.playSound("arcade_interactive_rocker_launch"),i.animate("R_lift_off",
1),i.queueAnimation("R_gone"))})},dispose:function(){Ha.prototype.dispose.call(this)},_setInState:function(){this._finishInState()},update:function(a){Ha.prototype.update.call(this,a);this._handleTouch();this._updatePan(a)},_addLoader:function(){},_drainSlushie:function(a){var b=this;ha.stop("slushie_auto_drain",!1);this._tween.stop(this._slushieOverlay);ha.start(function(){a.animate("slush_overflow_out",1);a.queueAnimation("idle2")},2,"slushie_drain");this._tween.tween({target:this._slushieOverlay,
duration:3,overwrite:!0,ease:G.inOutQuad},{y:840}).onComplete(function(){b._slushieOverlay.alpha=0;b._slushieAutoDrain=!1;b._slushieRoutineActive=!1})},_updatePan:function(a){var b=this._tray.get_x();this._tray.pos.x+=(-this._targetPos.x-b)*this._cameraEaseFactor*a;this._tray.pos.y+=(-this._targetPos.y-this._tray.get_y())*this._cameraEaseFactor*a;this._slushieOverlay.pos.x-=(-this._targetPos.x-b)*this._cameraEaseFactor*a;this._slimeUnderlay.pos.x-=(-this._targetPos.x-b)*this._cameraEaseFactor*a;6060<
this._tray.get_x()&&(a=this._tray,a.set_x(a.get_x()-12120),a=this._slushieOverlay,a.set_x(a.get_x()+12120),a=this._slimeUnderlay,a.set_x(a.get_x()+12120),this._targetPos.x+=12120,this._startPos.x+=12120);-6060>this._tray.get_x()&&(a=this._tray,a.set_x(a.get_x()+12120),a=this._slushieOverlay,a.set_x(a.get_x()-12120),a=this._slimeUnderlay,a.set_x(a.get_x()-12120),this._targetPos.x-=12120,this._startPos.x-=12120);0<this._tray.get_x()?this._background2.set_x(-6060):this._background2.set_x(6060);this._tray.get_y()+
280>280*this._tray.scale?this._tray.set_y(280*this._tray.scale-280):this._tray.get_y()-280<-280*this._tray.scale&&this._tray.set_y(-280*this._tray.scale+280)},_handleTouch:function(){if(!(this._state!=Ve.OPENED||this._flagBlockInput||this._closing)&&0<w.multiTouch.length)for(var a=0,b=w.multiTouch;a<b.length;){var c=b[a];++a;if(c.phase==Gb.DOWN)1==w.multiTouch.length?(this._startPos.toPoint(this._tray.pos),this._startPos.multiply(-1)):(this._workLine.to(w.multiTouch[0].get_currentPos(),w.multiTouch[1].get_currentPos()),
this._baseLength=this._workLine.get_length(),this._targetPos.toPoint(this._startPos));else if(c.phase==Gb.MOVED){if(1==w.multiTouch.length){for(var d=0,e=this._cabinets;d<e.length;){var f=e[d];++d;f.disable()}this._cameraEaseFactor=8;this._flagExtendPan=!0;this._targetPos.toPoint(this._startPos);this._elementManager.camera.getWorldPositionOfScreenPoint(c.get_originPos().x,c.get_originPos().y,0,this._inputPos);this._workLine.originToPoint(this._inputPos);this._elementManager.camera.getWorldPositionOfScreenPoint(c.get_currentPos().x,
c.get_currentPos().y,0,this._inputPos);this._workLine.endToPoint(this._inputPos);this._inputPos.toPoint(this._workLine.get_vector());this._inputPos.multiply(-1);this._targetPos.addPoint(this._inputPos)}}else if(c.phase==Gb.STOPPED)this._flagExtendPan=!1;else if(c.phase==Gb.UP){d=0;for(e=this._cabinets;d<e.length;)f=e[d],++d,f.enable();this._flagExtendPan&&(this._cameraEaseFactor=5,this._inputPos.toPoint(c.line.get_vector()),this._inputPos.normalizeTo(-150),this._targetPos.addPoint(this._inputPos))}}},
_onEventResizeCanvas:function(){},_onEventCollectionClick:function(){P.flow.dispatch("COLLECTION_OPEN")},_onEventCabinetClick:function(a){this._flagLockCabinets||(this._flagLockCabinets=!0,m.setString("STRING_MINIGAME",a),m.setString("STRING_BOOSTER","NONE"),this._addLoader(),s.playSound("elec_buttonclick",0.75),P.flow.dispatch("SPLASH_PLAY"))},__class__:Yj});var Sj=function(a){Ha.call(this,a)};i["screen.ScreenGameplayHud"]=Sj;Sj.__name__=["screen","ScreenGameplayHud"];Sj.__super__=Ha;Sj.prototype=
z(Ha.prototype,{_buildScreen:function(){var a=m.getString("STRING_MUSIC"),b=this._getMusicTrack();s.stopAllSound();a!=b&&(m.setString("STRING_MUSIC",this._getMusicTrack()),s.playMusic(m.getString("STRING_MUSIC"),0.075),s.playSound("nick_arcade_ambience",0.1,null,!0));switch(m.getString("STRING_MINIGAME")){case "DANGER_LASER":this._minigameHud=this._elementManager.addElement(new Ml({tween:this._tween}));break;case "HOOF_MACHINE":this._minigameHud=this._elementManager.addElement(new Nl({tween:this._tween}));
break;case "PACK_MAZE":this._minigameHud=this._elementManager.addElement(new Ol({tween:this._tween}));break;case "ROCK_EM_SOCK_EM":this._minigameHud=this._elementManager.addElement(new Pl({tween:this._tween}));break;case "SKATE_LANE":this._minigameHud=this._elementManager.addElement(new Ql({tween:this._tween}));break;case "SLIME_EXPLODE":this._minigameHud=this._elementManager.addElement(new Rl({tween:this._tween}));break;case "WHACK_A_MOLE":this._minigameHud=this._elementManager.addElement(new Sl({tween:this._tween}))}this._pauseButton=
this._elementManager.addElement(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"pause_btn",x:fb.STAGE_CENTER_X-37.5,y:-242.5,alpha:0}));this._pauseButton.eventClick.add(v(this,this._onEventPauseClick))},dispose:function(){this._pauseButton=null;Ha.prototype.dispose.call(this)},_useClickWall:function(){return!1},_getMusicTrack:function(){switch(Og.getTicketTypeByGame(m.getString("STRING_MINIGAME"))){case "INT_TICKET_COUNT_GOLD":return"nick_arcade_track_2";case "INT_TICKET_COUNT_GREEN":return"nick_arcade_track_3";
default:return"audio/nick_arcade_track_1"}},_setInState:function(){Ub.easeBounceIn(this._pauseButton,this._tween,!0,0.4);this._finishInState()},_onEventResizeCanvas:function(){this._pauseButton.pos.x=fb.STAGE_CENTER_X-37.5},_onEventPauseClick:function(){P.flow.dispatch("GAMEPLAY_MENU")},_onInput:function(a,b){!1!=b&&4==a[1]&&this._onEventPauseClick()},__class__:Sj});var Vj=function(a){Ha.call(this,a)};i["screen.ScreenGameplayMenu"]=Vj;Vj.__name__=["screen","ScreenGameplayMenu"];Vj.__super__=Ha;Vj.prototype=
z(Ha.prototype,{_buildScreen:function(){this._closing=!1;this._tray=this._elementManager.addElement(new n({asset:"pause_box",alpha:0}));this._tray.addChild(new V({text:"gameplay.menu",y:-65}));var a=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"play_btn",x:-210,y:27}));a.eventClick.add(v(this,this._onEventResumeClick));a=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"help_button",x:70,y:27}));a.eventClick.add(v(this,
this._onEventHelpClick));a=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"home_btn",x:210,y:27}));a.eventClick.add(v(this,this._onEventQuitClick));this._tray.addChild(new Tl({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"sound_btn_on-menu",assetUpOff:"sound_btn_off-menu",x:-70,y:27}))},dispose:function(){this._tray=null;Ha.prototype.dispose.call(this)},_setInState:function(){this._closing=!1;Ub.easeBounceIn(this._tray,this._tween).onComplete(v(this,
this._finishInState))},_setCloseState:function(){this._closing||(this._closing=!0,Ub.easeBounceOut(this._tray,this._tween).onComplete(v(this,this._finishCloseState)))},_onEventHelpClick:function(){P.flow.dispatch("GAMEPLAY_MENU_HELP")},_onEventResumeClick:function(){P.flow.dispatch("GAMEPLAY_MENU_CLOSE")},_onEventQuitClick:function(){P.flow.dispatch("GAMEPLAY_QUIT_YES")},_onInput:function(a,b){if(!1!=b)switch(a[1]){case 3:case 4:this._onEventResumeClick()}},__class__:Vj});var Wj=function(a){Ha.call(this,
a)};i["screen.ScreenHelp"]=Wj;Wj.__name__=["screen","ScreenHelp"];Wj.__super__=Ha;Wj.prototype=z(Ha.prototype,{_buildScreen:function(){this._closing=!1;this._tray=this._elementManager.addElement(new n({alpha:0}));this._tray.addChild(new n({asset:"collections/collection_UI_box",scaleY:0.6}));this._tray.addChild(new uk({tween:this._tween,y:-140}));this._button=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"collections/endgame_btn_exit",x:315,y:-135}));this._button.eventClick.add(v(this,
this._onEventPlayClick));this._tray.visible=!1},dispose:function(){this._button=this._tray=null;Ha.prototype.dispose.call(this)},_setInState:function(){this._closing=!1;Ub.easeBounceIn(this._tray,this._tween).onComplete(v(this,this._finishInState))},_setCloseState:function(){this._closing||(this._closing=!0,Ub.easeBounceOut(this._tray,this._tween).onComplete(v(this,this._finishCloseState)))},_onEventPlayClick:function(){P.flow.dispatch("HELP_CLOSE")},__class__:Wj});var Zj=function(a){Ha.call(this,
a)};i["screen.ScreenLeaderboard"]=Zj;Zj.__name__=["screen","ScreenLeaderboard"];Zj.__super__=Ha;Zj.prototype=z(Ha.prototype,{_buildScreen:function(){this._closing=!1;this._tray=this._elementManager.addElement(new n({asset:"collections/collection_UI_box",alpha:0}));this._tray.addChild(new V({text:"leaderboard.leaderboard",y:-230}));var a=cp.getLeaderboardForGame(m.getString("STRING_MINIGAME"));a.push({name:"You",score:m.getInt("INT_SCORE")});var b=Zb.get_instance().highScores,c=m.getString("STRING_MINIGAME");
a.push({name:"Your Highscore",score:null!=K[c]?b.getReserved(c):b.h[c]});a.sort(function(a,b){return b.score-a.score});b=0;for(c=Math.round(Math.min(a.length,6));b<c;){var d=b++,e=a[d],f=this._tray.addChild(new n({asset:"leaderboard/leader_board_name_slot",y:-145+70*d}));"You"!=e.name?f.addChild(new V({text:"leaderboard.number",color:16735232,x:-175})).setVariables([d+1]):(f.addChild(new n({asset:"leaderboard/name_marker_glow",x:-175})),f.addChild(new n({asset:"end_game/endgame_ticket_green",x:-180,
scale:0.6})));f.addChild(new V({text:"leaderboard.ai_name",x:-150,align:Ca.Left})).setVariables([e.name]);f.addChild(new V({text:"leaderboard.score",color:322564,x:185,align:Ca.Right})).setVariables([e.score])}this._button=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"collections/endgame_btn_exit",x:250,y:185}));this._button.eventClick.add(v(this,this._onEventPlayClick));this._tray.visible=!1},dispose:function(){this._button=this._tray=null;Ha.prototype.dispose.call(this)},
_setInState:function(){this._closing=!1;Ub.easeBounceIn(this._tray,this._tween).onComplete(v(this,this._finishInState))},_setCloseState:function(){this._closing||(this._closing=!0,Ub.easeBounceOut(this._tray,this._tween).onComplete(v(this,this._finishCloseState)))},_onEventPlayClick:function(){P.flow.dispatch("LEADERBOARD_CLOSE")},__class__:Zj});var Xj=function(a){this._TRAY_IN_TIME_2=0.2;this._TRAY_IN_TIME=0.35;Ha.call(this,a)};i["screen.ScreenQuitConfirm"]=Xj;Xj.__name__=["screen","ScreenQuitConfirm"];
Xj.__super__=Ha;Xj.prototype=z(Ha.prototype,{_buildScreen:function(){this._closing=!1;this._tray=this._elementManager.addElement(new n({asset:"template/ui/menu/text_box_2",alpha:0}));this._tray.addChild(new V({text:"quit_confirm.quit_confirm_header",y:-60}));this._tray.alpha=0;var a=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"template/ui/menu/button_blank",x:-92,y:52}));a.eventClick.add(v(this,this._onYesClick));a.addChild(new V({text:"common.yes",y:-5}));
a=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"template/ui/menu/button_blank",x:92,y:52}));a.eventClick.add(v(this,this._onNoClick));a.addChild(new V({text:"common.no",y:-5}))},dispose:function(){Ha.prototype.dispose.call(this);this._tray=this._wall=null},_setInState:function(){this._closing=!1;Ub.easeBounceIn(this._tray,this._tween).onComplete(v(this,this._finishInState))},_setCloseState:function(){this._closing||(this._closing=!0,Ub.easeBounceOut(this._tray,
this._tween).onComplete(v(this,this._finishCloseState)))},_onYesClick:function(){P.flow.dispatch("GAMEPLAY_QUIT_YES")},_onNoClick:function(){P.flow.dispatch("GAMEPLAY_QUIT_NO")},__class__:Xj});var Ok=function(a){this._BLINK_TIME=1;Ha.call(this,a)};i["screen.ScreenSplash"]=Ok;Ok.__name__=["screen","ScreenSplash"];Ok.__super__=Ha;Ok.prototype=z(Ha.prototype,{_buildScreen:function(){this._blinkAllowed=!0;this._closing=!1;this._blinkTimer=this._BLINK_TIME;this._beginPreload();this._tray=this._elementManager.addElement(new n({asset:"ui/splash/nick_arcade_splash"}));
this._logo=this._elementManager.addElement(new n({asset:"ui/splash/nick_arcade_splash_logo",y:-180}));this._pulseTitle()},_pulseTitle:function(){var a=this;this._tween.tween({target:this._logo,duration:1,ease:G.inOutQuad},{scale:1}).onComplete(function(){a._tween.tween({target:a._logo,duration:1,ease:G.inOutQuad},{scale:0.9}).onComplete(function(){a._pulseTitle()})})},dispose:function(){Zc.onSplashClose();this._clickTray=this._loadWidget=this._buttonSound=this._textClickToPlay=null;Ha.prototype.dispose.call(this)},
_beginPreload:function(){var a=["preload","fonts_"+Fc.region];H.load(v(this,this._onPreloadFinished),a,0)},_onPreloadFinished:function(){Zc.onPreloadFinished();Fc.parseLocalization();this._addPreload();this._beginInitialLoad()},_beginInitialLoad:function(){H.load(v(this,this._eventLoadCompleteInitial),["initial_universal","initial_audio_required"],1.2)},_eventLoadCompleteInitial:function(){this._addClickTray();this._removeLoader();Zc.onInitialFinished();P.initialLoadComplete.dispatch()},_addPreload:function(){this._addLoader()},
_addLoader:function(){null==this._loadWidget&&(this._loadWidget=this._tray.addChild(new tj({tween:this._tween,y:240})));!1==this._loadWidget.get_active()&&this._loadWidget.tweenIn(!0)},_removeLoader:function(){null==this._loadWidget||!1==this._loadWidget.get_active()||this._loadWidget.tweenOut()},_addClickTray:function(){if(null==this._clickTray){s.playMusic("nick_arcade_ambience",0.175);var a;a=ma._platform.getTouch().get_supported()?"splash.tap_anywhere":"splash.click_anywhere";this._clickTray=
this._tray.addChild(new n({y:265,originY:1}));this._textClickToPlay=this._clickTray.addChild(new V({text:a,y:0,originY:1}));Ub.easeBounceIn(this._clickTray,this._tween)}},update:function(a){Ha.prototype.update.call(this,a);this._blinkAllowed&&null!=this._clickTray?(this._blinkTimer-=a,0>=this._blinkTimer&&(0==this._textClickToPlay.alpha?(this._blinkTimer=this._BLINK_TIME,this._textClickToPlay.alpha=1):(this._blinkTimer=this._BLINK_TIME/2,this._textClickToPlay.alpha=0))):null!=this._textClickToPlay&&
(this._textClickToPlay.alpha=0)},_onEventCodeClick:function(){this._state==Ve.OPENED&&(m.setBool("BOOL_CODE_SCREEN_OPEN",!0),P.flow.dispatch("ENTER_CODE_OPEN"))},_tweenOutClickTray:function(){null!=this._clickTray&&(this._tween.tween({target:this._clickTray,duration:0.15,overwrite:!0,ease:G.outQuad},{scaleX:1.1,scaleY:1.1}),this._tween.tween({target:this._clickTray,duration:0.15,overwrite:!1,ease:G.outQuad},{scaleX:0.1,scaleY:0.1,alpha:0}))},_setCloseState:function(){Ub.easeBounceOut(this._tray,this._tween).onComplete(v(this,
this._finishCloseState))},_onInput:function(a,b){if(this._state==Ve.OPENED)switch(a[1]){case 0:case 2:!1==b&&!1==this._closing&&!1==m.getBool("BOOL_CODE_SCREEN_OPEN")&&(this._closing=!0,this._tweenOutClickTray(),P.flow.dispatch("GAME_SELECT_OPEN"))}},__class__:Ok});var Mb=function(a){this.children=[];this.parent=null;this._matrix=new Dg;this._viewMatrix=new Dg;this.pos=Aa.request(0,0,0);this.offset=Aa.request(0,0,0);this.rotation=0;this.set_origin(0.5);this.set_scale(this.alpha=1);this.inputEnabled=
this.visible=this.useCamera=this.usePerspective=!0;this.doDelete=!1;null!=a&&(null!=a.alpha&&(this.alpha=a.alpha),null!=a.x&&this.set_x(a.x),null!=a.y&&this.set_y(a.y),null!=a.z&&this.set_z(a.z),null!=a.offsetX&&this.set_offsetX(a.offsetX),null!=a.offsetY&&this.set_offsetY(a.offsetY),null!=a.offsetZ&&this.set_offsetZ(a.offsetZ),null!=a.origin&&this.set_origin(a.origin),null!=a.originX&&this.set_originX(a.originX),null!=a.originY&&this.set_originY(a.originY),null!=a.scale&&this.set_scale(a.scale),
null!=a.scaleX&&(this.scaleX=a.scaleX),null!=a.scaleY&&(this.scaleY=a.scaleY),null!=a.rotation&&(this.rotation=a.rotation),null!=a.visible&&(this.visible=a.visible),null!=a.useCamera&&(this.useCamera=a.useCamera),null!=a.usePerspective&&(this.usePerspective=a.usePerspective))};i["workinman.display.Sprite"]=Mb;Mb.__name__=["workinman","display","Sprite"];Mb.prototype={dispose:function(){if(null!=this.children){for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.dispose()}this.children=null}this.parent=
null;null!=this.pos&&(this.pos.dispose(),this.pos=null);null!=this.offset&&(this.offset.dispose(),this.offset=null);this._viewMatrix=this._matrix=null},get_x:function(){return this.pos.x},set_x:function(a){return this.pos.x=a},get_y:function(){return this.pos.y},set_y:function(a){return this.pos.y=a},get_z:function(){return this.pos.z},set_z:function(a){return this.pos.z=a},get_offsetX:function(){return this.offset.x},set_offsetX:function(a){return this.offset.x=a},get_offsetY:function(){return this.offset.y},
set_offsetY:function(a){return this.offset.y=a},get_offsetZ:function(){return this.offset.z},set_offsetZ:function(a){return this.offset.z=a},get_depth:function(){return this.pos.z},set_originX:function(a){return this.originX=a},set_originY:function(a){return this.originY=a},get_width:function(){return 0},get_height:function(){return 0},set_scale:function(a){return this.scale=this.scaleX=this.scaleY=a},set_origin:function(a){this.set_originX(this.set_originY(a));return a},addElement:function(a){return this.addChild(a)},
addChild:function(a){null!=a.parent&&a.parent.removeChild(a);a.parent=this;this.children.push(a);return a},addChildToBottom:function(a){null!=a.parent&&a.parent.removeChild(a);a.parent=this;this.children.unshift(a);return a},removeElement:function(a){return this.removeChild(a)},removeChild:function(a){Z.remove(this.children,a)&&(a.parent=null);return a},get_viewMatrix:function(){return null!=this.parent?this._viewMatrix:this._matrix},get_viewX:function(){var a=this.get_viewMatrix();return a.m02/a.m00},
get_viewY:function(){var a=this.get_viewMatrix();return a.m12/a.m11},hitTest:function(a,b,c){if(!1==this.visible||!1==this.inputEnabled)return null;for(var d=this.children.length,e=null;0<d--;)if(e=this.children[d].hitTest(a,b,c),null!=e)return e;return this.inverseTransform(a,b,c)?this:null},inverseTransform:function(a,b,c,d,e){null==e&&(e=-1);null==d&&(d=-1);0>d&&(d=this.get_width());0>e&&(e=this.get_height());var f=-this.originX*d,g=-this.originY*e;return this.get_viewMatrix().inverseTransform(a,
b,c)&&c.x>=f&&c.y>=g&&c.x<f+d?c.y<g+e:!1},runUpdate:function(a){this.update(a);for(var b=this.children.length;0<b--;)this.children[b].runUpdate(a),this.children[b].doDelete&&(this.children[b].dispose(),this.children.splice(b,1))},update:function(){},render:function(a,b){if(!1!=this.visible){var c=0,d=0,c=0,e=1;if(null==b||!1==this.useCamera||!1==this.usePerspective)c=this.pos.x,d=this.pos.y,e=1;else{c=this.pos.z-b.pos.z+this.get_offsetZ();if(c<-b.focalLength)return;e=0>=b.focalLength?1:b.focalLength/
(b.focalLength+c);c=b.worldCenterX+(this.pos.x-b.pos.x-b.worldCenterX)*e;d=b.worldCenterY+(this.pos.y-b.pos.y-b.worldCenterY)*e}this._matrix.compose(c,d,this.scaleX*e,this.scaleY*e,3.141592653589793*this.rotation/180);null!=this.parent&&Dg.multiply(this.parent.get_viewMatrix(),this._matrix,this._viewMatrix);a.ctx.save();1>this.alpha&&a.ctx.multiplyAlpha(this.alpha);a.ctx.transform(this._matrix.m00,this._matrix.m10,this._matrix.m01,this._matrix.m11,this._matrix.m02,this._matrix.m12);a.ctx.save();a.ctx.translate(-this.get_width()*
this.originX+this.get_offsetX(),-this.get_height()*this.originY+this.get_offsetY());this._draw(a);a.ctx.restore();c=0;for(d=this.children.length;c<d;)this.children[c++].render(a,null);a.ctx.restore()}},_draw:function(){},__class__:Mb,__properties__:{get_viewY:"get_viewY",get_viewX:"get_viewX",get_viewMatrix:"get_viewMatrix",set_origin:"set_origin",set_scale:"set_scale",get_height:"get_height",get_width:"get_width",get_depth:"get_depth",set_offsetZ:"set_offsetZ",get_offsetZ:"get_offsetZ",set_offsetY:"set_offsetY",
get_offsetY:"get_offsetY",set_offsetX:"set_offsetX",get_offsetX:"get_offsetX",set_z:"set_z",get_z:"get_z",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_originY:"set_originY",set_originX:"set_originX"}};var n=function(a){Mb.call(this,a);this.texture=this.rect=null;null!=a&&null!=a.asset&&this.setAsset(a.asset)};i["workinman.display.ImageSprite"]=n;n.__name__=["workinman","display","ImageSprite"];n.__super__=Mb;n.prototype=z(Mb.prototype,{get_asset:function(){return this._asset},set_asset:function(a){this.setAsset(a);
return this._asset},dispose:function(){Mb.prototype.dispose.call(this);this.texture=this.rect=null},get_width:function(){return null==this.texture?0:null!=this.rect?this.rect.origX:this.texture.get_width()},get_height:function(){return null==this.texture?0:null!=this.rect?this.rect.origY:this.texture.get_height()},setAsset:function(a){if(null==a||""==a)return this;this._asset=a;this.texture=H.getTexture(a);this.rect=H.getSpriteRect(a);return this},setTexture:function(a){this.rect=null;this.texture=
a;return this},_draw:function(a){null!=this.texture&&(null!=this.rect?this.rect.rotate?(a.ctx.save(),a.ctx.rotate(90),a.ctx.drawSubTexture(this.texture,this.rect.origY-this.rect.sizeY-this.rect.offsetY,-this.rect.offsetX-this.rect.sizeX,this.rect.x,this.rect.y,this.rect.sizeY,this.rect.sizeX),a.ctx.restore()):a.ctx.drawSubTexture(this.texture,this.rect.offsetX,this.rect.origY-this.rect.sizeY-this.rect.offsetY,this.rect.x,this.rect.y,this.rect.sizeX,this.rect.sizeY):a.ctx.drawTexture(this.texture,
0,0))},__class__:n,__properties__:z(Mb.prototype.__properties__,{set_asset:"set_asset",get_asset:"get_asset"})});var fc=function(a){n.call(this,a);this.velocity=Aa.request();this._addEventListeners()};i["workinman.display.Element"]=fc;fc.__name__=["workinman","display","Element"];fc.__super__=n;fc.prototype=z(n.prototype,{dispose:function(){n.prototype.dispose.call(this);this.velocity.dispose();this.velocity=null;this._removeEventListeners()},_addEventListeners:function(){},_removeEventListeners:function(){},
__class__:fc});var E=function(a,b,c,d){null==d&&(d=!1);null==c&&(c="");null==b&&(b="");fc.call(this,a);var e=a.library;""!=b&&(e=b);b=d?null:new Zn(H.getFile(e+".atlas").toString(),new Ul(e.substring(0,e.lastIndexOf("/")+1),H.getPackForAsset(e)));b=new Ra(new Vl(b));e=""==c?e:c;e=b.readSkeletonData(H.getFile(e+".json").toString(),e);c=new $n(e);this.state=new $d(c);this._renderer=new Wl(e,a.debug);this._skeleton=this._renderer.skeleton;this._skeleton.updateWorldTransform();this.eventAnimationComplete=
ke._new();this.eventAnimationEvent=Yi._new();this._animationsSpine=new $c;a=0;for(e=e.animations;a<e.length;)c=e[a],++a,d=this._animationsSpine,b=c.get_name(),null!=K[b]?d.setReserved(b,c):d.h[b]=c;this.state.onStart.add(v(this,this._onAnimationStart));this.state.onComplete.add(v(this,this._onAnimationCompleted));this.state.onEvent.add(v(this,this._onAnimationEvent));this.addChild(this._renderer);this._bounds=new ao;this._boundsRegion=new bo(this._renderer)};i["workinman.display.spine.SpineElement"]=
E;E.__name__=["workinman","display","spine","SpineElement"];E.__super__=fc;E.prototype=z(fc.prototype,{dispose:function(){this.state.onStart.remove(v(this,this._onAnimationStart));this.state.onComplete.remove(v(this,this._onAnimationCompleted));this.state.onEvent.remove(v(this,this._onAnimationEvent));this._bounds=null;this._boundsRegion.dispose();this.state=this._boundsRegion=null;this.eventAnimationComplete.dispose();this.eventAnimationComplete=null;this.eventAnimationEvent.dispose();this._renderer=
this._animationsSpine=this._skeleton=this.eventAnimationEvent=null;fc.prototype.dispose.call(this)},get_currentAnimation:function(){return this._currentAnimation},get_animationsSpine:function(){return this._animationsSpine},get_hitName:function(){return this._hitName},runUpdate:function(a){fc.prototype.runUpdate.call(this,a);this.state.update(a);this.state.apply(this._skeleton);this._skeleton.updateWorldTransform()},getFrames:function(a){null==a&&(a=0);a=this.state.getCurrent(a);return null!=a?Math.floor(a.animation.duration*
E.FPS):0},getFrame:function(a){null==a&&(a=0);a=this.state.getCurrent(a);return null!=a?Math.floor(a.trackTime*E.FPS):0},setFrame:function(a,b){null==b&&(b=0);var c=this.state.getCurrent(b);null!=c&&(c.timeScale=0,c.trackTime=Fd.clamp(a/E.FPS,0,c.animation.duration))},setTimeScale:function(a,b){null==b&&(b=0);var c=this.state.getCurrent(b);null!=c&&(c.timeScale=a)},startAnimation:function(a){null==a&&(a=0);a=this.state.getCurrent(a);null!=a&&(a.timeScale=1)},stopAnimation:function(a){null==a&&(a=
0);a=this.state.getCurrent(a);null!=a&&(a.timeScale=0)},mixAnimation:function(a,b,c){this.state.data.setMixByName(a,b,c)},hasAnimation:function(a){var b=this._animationsSpine;return null!=K[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},animate:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=1);null==b&&(b=0);this._doAnimate(a,b,!1,0,c,d,e);return this},queueAnimation:function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=!1);null==d&&(d=0);null==c&&(c=1);null==b&&(b=0);this._doAnimate(a,
b,!0,f,c,d,e);return this},_doAnimate:function(a,b,c,d,e,f,g){null==g&&(g=!1);null==f&&(f=0);null==e&&(e=1);g&&this._skeleton.setToSetupPose();if(this.hasAnimation(a)&&(c=c?this.state.addAnimationByName(f,a,0==b,d):this.state.setAnimationByName(f,a,0==b),c.timeScale=e,0<b))for(d=1;d<b;)d++,c=this.state.addAnimationByName(f,a,!1,0),c.timeScale=e},clearQueue:function(){null!=this.state&&this.state.clearTracks()},setSkin:function(a,b){null==b&&(b=!1);this._skeleton.set_skinName(a);this._skeleton.updateCache();
b&&this._skeleton.setSlotsToSetupPose()},setAttachment:function(a,b){this._skeleton.setAttachment(a,b)},getAttachment:function(a){a=this._skeleton.findSlot(a);return null==a||null==a.get_attachment()?"":a.get_attachment().name},hit:function(a,b,c){null==c&&(c="");this._hitName="";this._bounds.update(this._skeleton,!0);return this._bounds.aabbContainsPoint(a,b)&&(a=this._bounds.containsPoint(a,b),null!=a&&(""==c||c==a.name))?(this._hitName=a.name,!0):!1},hitRegion:function(a,b,c){null==c&&(c="");this._hitName=
"";this._boundsRegion.update(this._skeleton,!0,this.scaleX,this.scaleY);return this._boundsRegion.aabbContainsPoint(a,b)&&(a=this._boundsRegion.containsPoint(a,b),null!=a&&(""==c||c==a.name))?(this._hitName=a.name,!0):!1},addElementToSlot:function(){},_onAnimationStart:function(a){this._currentAnimation=a.animation.get_name()},_onAnimationCompleted:function(){this.eventAnimationComplete.dispatch()},_onAnimationEvent:function(a){var b=a[0],a=a[1];null==b||null==a||(a.get_data().get_name(),this.eventAnimationEvent.dispatch(b,
a))},__class__:E,__properties__:z(fc.prototype.__properties__,{get_hitName:"get_hitName",get_animationsSpine:"get_animationsSpine",get_currentAnimation:"get_currentAnimation"})});var Vk=function(a){E.call(this,a);this._tween=new Gi};i["screen.ScreenTransition"]=Vk;Vk.__name__=["screen","ScreenTransition"];Vk.__super__=E;Vk.prototype=z(E.prototype,{dispose:function(){E.prototype.dispose.call(this)},_addLoader:function(){null==this._loadWidget&&(this._loadWidget=this.addChild(new tj({tween:this._tween,
y:240})));!1==this._loadWidget.get_active()&&this._loadWidget.tweenIn(!0)},_removeLoader:function(){null==this._loadWidget||!1==this._loadWidget.get_active()||this._loadWidget.tweenOut()},doTransition:function(a,b,c){this._completionHandler=a;this._flagShowLoader=c;this.animate("slime_transition_in",1);s.playSound("audio/arcade_slime_wave",1);b||this.queueAnimation("slime_transition_out",1)},closeTransition:function(){this._flagShowLoader&&this._removeLoader();s.playSound("audio/arcade_slime_wave_alt",
1);this.animate("slime_transition_out",1)},_onAnimationCompleted:function(a,b){E.prototype._onAnimationCompleted.call(this,a,b);"slime_transition_in"==this._currentAnimation&&(this._completionHandler(),this._flagShowLoader&&this._addLoader())},update:function(a){this._tween.update(a)},__class__:Vk});var $j=function(a){Ha.call(this,a)};i["screen.ScreenTutorialPopup"]=$j;$j.__name__=["screen","ScreenTutorialPopup"];$j.__super__=Ha;$j.prototype=z(Ha.prototype,{_buildScreen:function(){this._closing=!1;
this._tray=this._elementManager.addElement(new n({alpha:0}));this._tray.addChild(new n({asset:"collections/collection_UI_box",scaleY:0.6}));this._tray.addChild(new uk({tween:this._tween,y:-140}));this._button=this._tray.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"collections/endgame_btn_exit",x:315,y:-135}));this._button.eventClick.add(v(this,this._onEventPlayClick))},dispose:function(){this._button=this._tray=null;Ha.prototype.dispose.call(this)},_setInState:function(){this._closing=
!1;Ub.easeBounceIn(this._tray,this._tween).onComplete(v(this,this._finishInState))},_setCloseState:function(){this._closing||(this._closing=!0,Ub.easeBounceOut(this._tray,this._tween).onComplete(v(this,this._finishCloseState)))},_onEventPlayClick:function(){"SKATE_LANE"==m.getString("STRING_MINIGAME")&&s.playSound("casagrandes_skateboard",0.5,null,!0);P.flow.dispatch("TUTORIAL_CLOSE")},__class__:$j});var da=function(a){null==da._scratchPoint&&(da._scratchPoint=new Ih);n.call(this,a);this.eventClick=
ke._new();this.eventDown=ke._new();this.eventUp=ke._new();this.eventOver=ke._new();this.eventOut=ke._new();this._tween=a.tween;this._containsInput=!1;this._clearFunction=a.clear;this._assetUp=a.assetUp;this._assetOver=a.assetOver;this._assetDown=a.assetDown;this._assetDisabled=a.assetDisabled;this._state=xc._STATE_UP;this.enable();this.setCustomHitBox(this.get_width(),this.get_height());w.eventInput.add(v(this,this._onInput));this._buttonScaleBase=Aa.request(this.scaleX,this.scaleY)};i["workinman.ui.Button"]=
da;da.__name__=["workinman","ui","Button"];da.__super__=n;da.prototype=z(n.prototype,{dispose:function(){w.eventInput.remove(v(this,this._onInput));this.eventClick.dispose();this.eventClick=null;this.eventDown.dispose();this.eventDown=null;this.eventUp.dispose();this.eventUp=null;this.eventOver.dispose();this.eventOver=null;this.eventOut.dispose();this.eventOut=null;this._flagEnabled=!1;this._assetDisabled=this._assetDown=this._assetOver=this._assetUp=null;this._hitBox.dispose();this._tween=this._hitBox=
null;this._buttonScaleBase.dispose();this._clearFunction=this._state=this._buttonScaleBase=null;n.prototype.dispose.call(this)},enable:function(){this._flagEnabled=!0;this._renderUp();return this},disable:function(){this._flagEnabled=!1;this._renderReturnUp();this._renderDisabled();return this},get_hitbox:function(){return this._hitBox},setCustomHitBox:function(a,b){null==this._hitBox&&(this._hitBox=this.addChild(new Ed({color:16711680,sizeX:a,sizeY:b,alpha:0,originX:this.originX,originY:this.originY})));
this._hitBox.sizeX=a;this._hitBox.sizeY=b;return this},_onInput:function(a,b){var c=ma._platform.getPointer().get_x(),d=ma._platform.getPointer().get_y();switch(a[1]){case 0:this._containsInput=this._hitBox.inverseTransform(c,d,da._scratchPoint);if(b)switch(this._state[1]){case 0:case 2:case 3:this._containsInput&&this._depthTest(c,d)&&(this._state=xc._STATE_DOWN,this._onDown(c,d))}else 1==this._state[1]&&(this._containsInput?(this._state=xc._STATE_CLICK,this._onUp(c,d)):(this._state=xc._STATE_UP,
this._renderReturnUp()));break;case 1:switch(this._state[1]){case 0:this._containsInput&&this._depthTest(c,d)&&(this._state=xc._STATE_OVER,this._onOver());break;case 2:!1==this._containsInput&&(this._state=xc._STATE_UP,this._onOut())}}},_depthTest:function(a,b){if(!1==this._flagEnabled)return!1;var c=w.hitTest(a,b);return null!=this._hitBox&&c==this._hitBox?!0:!1},_dispatch:function(a){!1!=this._clearFunction()&&a.dispatch()},_click:function(){this._tween.tween({target:this,duration:0.1,overwrite:!0,
ease:G.inQuad},{scaleX:1.1*this._buttonScaleBase.x,scaleY:1.1*this._buttonScaleBase.y});this._tween.tween({target:this,duration:0.4,overwrite:!1,ease:G.outElastic},{scaleX:this._buttonScaleBase.x,scaleY:this._buttonScaleBase.y}).onComplete(v(this,this._onClickComplete));this._playSoundClick();this._doClick()},_onClickComplete:function(){this._containsInput&&this._flagEnabled?(this._state=xc._STATE_OVER,this._renderOver()):this._state=xc._STATE_UP},_doClick:function(){this._dispatch(this.eventClick)},
_onDown:function(){this._flagEnabled&&(this._renderDown(),this._dispatch(this.eventDown))},_onUp:function(){this._flagEnabled&&(this._renderReturnUp(),this._click(),this._dispatch(this.eventUp))},_onOver:function(){this._renderOver();this._playSoundOver();this._dispatch(this.eventOver)},_onOut:function(){this._flagEnabled&&(this._renderOut(),this._dispatch(this.eventOut))},_playSoundClick:function(){s.playSound("btn_default",1)},_playSoundOver:function(){s.playSound("",1)},setScale:function(a,b){this._buttonScaleBase.x=
a;this._buttonScaleBase.y=b;this.scaleX=this._buttonScaleBase.x;this.scaleY=this._buttonScaleBase.y;return this},setBaseAsset:function(a){this._assetDisabled=this._assetDown=this._assetOver=this._assetUp=a;this.setAsset(this._assetUp);return this},_renderUp:function(){this.setAsset(this._assetUp)},_renderOver:function(){},_renderOut:function(){this._tween.tween({target:this,duration:0.5,overwrite:!0,ease:G.outElastic},{scaleX:this._buttonScaleBase.x,scaleY:this._buttonScaleBase.y})},_renderDown:function(){this._tween.tween({target:this,
duration:0.15,overwrite:!0,ease:G.outQuad},{scaleX:0.9*this._buttonScaleBase.x,scaleY:0.9*this._buttonScaleBase.y});this.setAsset(this._assetDown)},_renderReturnUp:function(){this._tween.tween({target:this,duration:0.15,overwrite:!0,ease:G.outQuad},{scaleX:this._buttonScaleBase.x,scaleY:this._buttonScaleBase.y});this._renderUp()},_renderDisabled:function(){this.setAsset(this._assetDisabled)},__class__:da,__properties__:z(n.prototype.__properties__,{get_hitbox:"get_hitbox"})});var Tl=function(a){da.call(this,
a);this._assetUpOn=a.assetUp;this._assetOverOn=a.assetOver;this._assetDownOn=a.assetDown;this._assetDisabledOn=a.assetDisabled;this._assetUpOff=a.assetUpOff;this._assetOverOff=a.assetOverOff;this._assetDownOff=a.assetDownOff;this._assetDisabledOff=a.assetDisabledOff;this._refreshMuteState();this._renderUp()};i["screen.button.ButtonSoundToggle"]=Tl;Tl.__name__=["screen","button","ButtonSoundToggle"];Tl.__super__=da;Tl.prototype=z(da.prototype,{dispose:function(){this._assetDisabledOff=this._assetDownOff=
this._assetOverOff=this._assetUpOff=this._assetDisabledOn=this._assetDownOn=this._assetOverOn=this._assetUpOn=null;da.prototype.dispose.call(this)},_doClick:function(){this._flagEnabled&&(s.set_muteAll(!s.muteAll),this._refreshMuteState(),this._renderUp())},_refreshMuteState:function(){s.muteAll?(this._assetUp=this._assetUpOff,this._assetOver=this._assetOverOff,this._assetDown=this._assetDownOff,this._assetDisabled=this._assetDisabledOff):(this._assetUp=this._assetUpOn,this._assetOver=this._assetOverOn,
this._assetDown=this._assetDownOn,this._assetDisabled=this._assetDisabledOn)},__class__:Tl});var Tg=function(a){n.call(this,a);this.pos.to(0,0);this._scratchPoint=new Ih;this._base=this.addChild(new n({asset:a.assetBase,alpha:0}));this._knob=this.addChild(new n({asset:a.assetKnob,alpha:0}));this._joystickStyle=null==a.joystickStyle?mf.STANDARD_XY:a.joystickStyle;this._outOfRange=this._inputActive=!1;this._inputId=-1;this._mode=a.mode;this._tweener=a.tweener;this._slideToMaxDist=a.slideToMaxDist;this._maxKnobDist=
a.maxKnobDist;this._inputThresholdX=null!=a.inputThresholdX?a.inputThresholdX:a.inputThreshold;this._inputThresholdY=null!=a.inputThresholdY?a.inputThresholdY:a.inputThreshold;this._workPoint=Aa.request();this._inputDirection=Aa.request();this._inputUp=this._inputDown=this._inputleft=this._inputRight=!1};i["workinman.ui.VirtualJoystick"]=Tg;Tg.__name__=["workinman","ui","VirtualJoystick"];Tg.__super__=n;Tg.prototype=z(n.prototype,{dispose:function(){n.prototype.dispose.call(this);this._workPoint.dispose();
this._workPoint=null;this._inputDirection.dispose();this._tweener=this._inputDirection=null},update:function(a){this._updateTouches(a);this._updateInput();n.prototype.update.call(this,a)},_updateTouches:function(){this.pos.to(0,0);if(this._inputActive){for(var a=!1,b=0,c=w.multiTouch;b<c.length;){var d=c[b];++b;d.id==this._inputId&&d.down&&(a=!0,this._updateActiveTouch(d))}this._inputActive&&!a&&this._onTouchEnd()}else{a=0;for(b=w.multiTouch;a<b.length;)c=b[a],++a,c.down&&!this._inputActive&&this._onNewTouch(c)}},
_onNewTouch:function(a){this.inverseTransform(a.get_currentPos().x,a.get_currentPos().y,this._scratchPoint);switch(this._mode[1]){case 0:if(0<this._scratchPoint.x)return;break;case 1:if(0>this._scratchPoint.x)return}this._inputActive=!0;this._inputId=a.id;this._base.pos.to(this._scratchPoint.x,this._scratchPoint.y);this._positionKnob(this._base.pos.x,this._base.pos.y);this._showControls()},_onTouchEnd:function(){this._inputActive=!1;this._positionKnob(this._base.pos.x,this._base.pos.y);this._inputDirection.to(0,
0);this._hideControls()},_updateActiveTouch:function(a){this.inverseTransform(a.get_currentPos().x,a.get_currentPos().y,this._scratchPoint);this._workPoint.to(this._scratchPoint.x,this._scratchPoint.y);this._workPoint.subtractPoint(this._base.pos);this._workPoint.get_length()>this._maxKnobDist?(this._outOfRange=!0,this._workPoint.normalizeTo(this._maxKnobDist)):this._outOfRange=!1;this._inputDirection.to(this._workPoint.x/this._maxKnobDist,this._workPoint.y/this._maxKnobDist);this._positionKnob(this._workPoint.x+
this._base.get_x(),this._workPoint.y+this._base.get_y())},_positionKnob:function(a,b){switch(this._joystickStyle[1]){case 0:this._knob.pos.to(a,b);break;case 1:this._knob.pos.to(a,this._base.get_y());break;case 2:this._knob.pos.to(a,this._base.get_y())}},_updateInput:function(){this._inputDirection.x>this._inputThresholdX&&!this._inputRight&&(this._inputRight=!0,w.onVirtualDown(na.RIGHT));this._inputDirection.x<=this._inputThresholdX&&this._inputRight&&(this._inputRight=!1,w.onVirtualUp(na.RIGHT));
this._inputDirection.x<-this._inputThresholdX&&!this._inputleft&&(this._inputleft=!0,w.onVirtualDown(na.LEFT));this._inputDirection.x>=-this._inputThresholdX&&this._inputleft&&(this._inputleft=!1,w.onVirtualUp(na.LEFT));this._joystickStyle!=mf.X_ONLY&&(this._inputDirection.y>this._inputThresholdY&&!this._inputDown&&(this._inputDown=!0,w.onVirtualDown(na.DOWN)),this._inputDirection.y<=this._inputThresholdY&&this._inputDown&&(this._inputDown=!1,w.onVirtualUp(na.DOWN)),this._inputDirection.y<-this._inputThresholdY&&
!this._inputUp&&(this._inputUp=!0,w.onVirtualDown(na.UP)),this._inputDirection.y>=-this._inputThresholdY&&this._inputUp&&(this._inputUp=!1,w.onVirtualUp(na.UP)))},_showControls:function(){this._base.alpha=0;this._knob.alpha=0;this._knob.set_scale(0.5);this._tweener.tween({target:this._base,duration:0.25,overwrite:!0,ease:G.outQuad,thread:"inOut"},{alpha:1});this._tweener.tween({target:this._knob,duration:0.5,overwrite:!0,ease:G.outBack,thread:"inOut"},{alpha:1,scale:1})},_hideControls:function(){this._tweener.tween({target:this._base,
duration:0.4,overwrite:!0,ease:G.inQuad,thread:"inOut"},{alpha:0});this._tweener.tween({target:this._knob,duration:0.25,overwrite:!0,ease:G.inQuad,thread:"inOut"},{alpha:0,scale:0.5})},__class__:Tg});var Xl=function(a){Tg.call(this,a);this.pos.to(a.x,a.y);this._knob.alpha=1;this._knob.set_originY(1);this._ball=this._knob.addChild(new n({asset:"joystick_ball",y:-60}));this.setHitboxSize(this._knob.get_width(),this._knob.get_height()+30)};i["screen.button.Minigame4WayJoystick"]=Xl;Xl.__name__=["screen",
"button","Minigame4WayJoystick"];Xl.__super__=Tg;Xl.prototype=z(Tg.prototype,{setHitboxSize:function(a,b){null==this._hitBox&&(this._hitBox=this.addChild(new Ed({color:16711680,sizeX:a,sizeY:b,alpha:0,y:-b/2})));this._hitBox.sizeX=a;this._hitBox.sizeY=b;return this},dispose:function(){Tg.prototype.dispose.call(this);this._hitBox.dispose();this._hitBox=null},_updateTouches:function(){if(this._inputActive){for(var a=!1,b=0,c=w.multiTouch;b<c.length;){var d=c[b];++b;d.id==this._inputId&&d.down&&(a=!0,
this._updateActiveTouch(d))}this._inputActive&&!a&&this._onTouchEnd()}else{a=0;for(b=w.multiTouch;a<b.length;)c=b[a],++a,c.down&&this._hitBox.inverseTransform(c.get_currentPos().x,c.get_currentPos().y,this._scratchPoint)&&this._onNewTouch(c)}},_onNewTouch:function(a){this.inverseTransform(a.get_currentPos().x,a.get_currentPos().y,this._scratchPoint);this._inputActive=!0;this._inputId=a.id;this._base.pos.to(this._scratchPoint.x,this._scratchPoint.y);this._positionKnob(this._base.pos.x,this._base.pos.y);
this._showControls()},_onTouchEnd:function(){this._inputActive=!1;this._positionKnob(this._base.pos.x,this._base.pos.y);this._knob.rotation=0;this._ball.pos.y=-60;this._knob.set_scale(1);this._inputDirection.to(0,0);this._hideControls()},_updateActiveTouch:function(a){this.inverseTransform(a.get_currentPos().x,a.get_currentPos().y,this._scratchPoint);this._workPoint.to(this._scratchPoint.x,this._scratchPoint.y);this._workPoint.subtractPoint(this._base.pos);this._workPoint.get_length()>this._maxKnobDist?
(this._outOfRange=!0,this._workPoint.normalizeTo(this._maxKnobDist)):this._outOfRange=!1;this._inputDirection.to(this._workPoint.x/this._maxKnobDist,this._workPoint.y/this._maxKnobDist);this._positionKnob(this._workPoint.x+this._base.get_x(),this._workPoint.y+this._base.get_y())},_positionKnob:function(){switch(this._joystickStyle[1]){case 0:this._ball.pos.y=-60;this._knob.set_scale(1);this._inputleft?this._knob.rotation=-30:this._inputRight?this._knob.rotation=30:(this._inputUp?(this._ball.pos.y=
-70,this._knob.set_scale(0.95)):this._inputDown&&(this._ball.pos.y=-50,this._knob.set_scale(1.05)),this._knob.rotation=0);break;case 1:this._knob.rotation=this._inputleft?-30:this._inputRight?30:0}},_updateInput:function(){this._inputDirection.x>this._inputThresholdX&&!this._inputRight&&(this._inputRight=!0,w.onVirtualDown(na.MOVE_RIGHT));this._inputDirection.x<=this._inputThresholdX&&this._inputRight&&(this._inputRight=!1,w.onVirtualUp(na.MOVE_RIGHT));this._inputDirection.x<-this._inputThresholdX&&
!this._inputleft&&(this._inputleft=!0,w.onVirtualDown(na.MOVE_LEFT));this._inputDirection.x>=-this._inputThresholdX&&this._inputleft&&(this._inputleft=!1,w.onVirtualUp(na.MOVE_LEFT));this._joystickStyle!=mf.X_ONLY&&(this._inputDirection.y>this._inputThresholdY&&!this._inputDown&&(this._inputDown=!0,w.onVirtualDown(na.DOWN)),this._inputDirection.y<=this._inputThresholdY&&this._inputDown&&(this._inputDown=!1,w.onVirtualUp(na.DOWN)),this._inputDirection.y<-this._inputThresholdY&&!this._inputUp&&(this._inputUp=
!0,w.onVirtualDown(na.UP)),this._inputDirection.y>=-this._inputThresholdY&&this._inputUp&&(this._inputUp=!1,w.onVirtualUp(na.UP)))},_showControls:function(){},_hideControls:function(){},__class__:Xl});var Yl=function(a){Tg.call(this,a);this.pos.to(a.x,a.y);this._knob.alpha=1;this._knob.set_originY(1);this.setHitboxSize(this._knob.get_width(),this._knob.get_height())};i["screen.button.MinigameJoystick"]=Yl;Yl.__name__=["screen","button","MinigameJoystick"];Yl.__super__=Tg;Yl.prototype=z(Tg.prototype,
{setHitboxSize:function(a,b){null==this._hitBox&&(this._hitBox=this.addChild(new Ed({color:16711680,sizeX:a,sizeY:b,alpha:0,y:-b/2})));this._hitBox.sizeX=a;this._hitBox.sizeY=b;return this},dispose:function(){Tg.prototype.dispose.call(this);this._hitBox.dispose();this._hitBox=null},_updateTouches:function(){if(this._inputActive){for(var a=!1,b=0,c=w.multiTouch;b<c.length;){var d=c[b];++b;d.id==this._inputId&&d.down&&(a=!0,this._updateActiveTouch(d))}this._inputActive&&!a&&this._onTouchEnd()}else{a=
0;for(b=w.multiTouch;a<b.length;)c=b[a],++a,c.down&&this._hitBox.inverseTransform(c.get_currentPos().x,c.get_currentPos().y,this._scratchPoint)&&this._onNewTouch(c)}},_onNewTouch:function(a){this.inverseTransform(a.get_currentPos().x,a.get_currentPos().y,this._scratchPoint);this._inputActive=!0;this._inputId=a.id;this._base.pos.to(this._scratchPoint.x,this._scratchPoint.y);this._positionKnob(this._base.pos.x,this._base.pos.y);this._showControls()},_onTouchEnd:function(){this._inputActive=!1;this._positionKnob(this._base.pos.x,
this._base.pos.y);this._knob.rotation=0;this._knob.setAsset("joystick");this._inputDirection.to(0,0);this._hideControls()},_updateActiveTouch:function(a){this.inverseTransform(a.get_currentPos().x,a.get_currentPos().y,this._scratchPoint);this._workPoint.to(this._scratchPoint.x,this._scratchPoint.y);this._workPoint.subtractPoint(this._base.pos);this._workPoint.get_length()>this._maxKnobDist?(this._outOfRange=!0,this._workPoint.normalizeTo(this._maxKnobDist)):this._outOfRange=!1;this._inputDirection.to(this._workPoint.x/
this._maxKnobDist,this._workPoint.y/this._maxKnobDist);this._positionKnob(this._workPoint.x+this._base.get_x(),this._workPoint.y+this._base.get_y())},_positionKnob:function(){switch(this._joystickStyle[1]){case 0:this._inputleft?this._knob.rotation=-30:this._inputRight?this._knob.rotation=30:this._inputUp?this._knob.setAsset("joystick_up"):this._inputDown?this._knob.setAsset("joystick_down"):(this._knob.rotation=0,this._knob.setAsset("joystick"));break;case 1:this._knob.rotation=this._inputleft?-30:
this._inputRight?30:0}},_updateInput:function(){this._inputDirection.x>this._inputThresholdX&&!this._inputRight&&(this._inputRight=!0,w.onVirtualDown(na.MOVE_RIGHT));this._inputDirection.x<=this._inputThresholdX&&this._inputRight&&(this._inputRight=!1,w.onVirtualUp(na.MOVE_RIGHT));this._inputDirection.x<-this._inputThresholdX&&!this._inputleft&&(this._inputleft=!0,w.onVirtualDown(na.MOVE_LEFT));this._inputDirection.x>=-this._inputThresholdX&&this._inputleft&&(this._inputleft=!1,w.onVirtualUp(na.MOVE_LEFT));
this._joystickStyle!=mf.X_ONLY&&(this._inputDirection.y>this._inputThresholdY&&!this._inputDown&&(this._inputDown=!0,w.onVirtualDown(na.DOWN)),this._inputDirection.y<=this._inputThresholdY&&this._inputDown&&(this._inputDown=!1,w.onVirtualUp(na.DOWN)),this._inputDirection.y<-this._inputThresholdY&&!this._inputUp&&(this._inputUp=!0,w.onVirtualDown(na.UP)),this._inputDirection.y>=-this._inputThresholdY&&this._inputUp&&(this._inputUp=!1,w.onVirtualUp(na.UP)))},_showControls:function(){},_hideControls:function(){},
__class__:Yl});var Ph=function(a){n.call(this,a);this._tween=a.tween;this._id=a.id;this._hasTouch=this._active=!1;this._scratchPoint=new Ih;this.setHitboxSize(this.get_width(),this.get_height());this._defaultInit()};i["workinman.ui.VirtualInput"]=Ph;Ph.__name__=["workinman","ui","VirtualInput"];Ph.__super__=n;Ph.prototype=z(n.prototype,{dispose:function(){this._id=this._tween=null;this._hitBox.dispose();this._hitBox=null;n.prototype.dispose.call(this)},setHitboxSize:function(a,b){null==this._hitBox&&
(this._hitBox=this.addChild(new Ed({color:16711680,sizeX:a,sizeY:b,alpha:0})));this._hitBox.sizeX=a;this._hitBox.sizeY=b;return this},update:function(a){n.prototype.update.call(this,a);this._hasTouch=!1;for(var b=0,c=w.multiTouch;b<c.length;){var d=c[b];++b;if(d.down&&this._hitBox.inverseTransform(d.get_currentPos().x,d.get_currentPos().y,this._scratchPoint)&&(!this._active&&d.phase==Gb.DOWN||this._active)){this._hasTouch=!0;break}}if(this._hasTouch&&!1==this._active)w.onVirtualDown(this._id);else if(!1==
this._hasTouch&&this._active)w.onVirtualUp(this._id);this._defaultBehavior(a);this._active=this._hasTouch},_defaultInit:function(){this.alpha=0.5},_defaultBehavior:function(){this._hasTouch&&!1==this._active?this._tween.tween({target:this,duration:0.1,overwrite:!0,thread:"ralpha",ease:G.linear},{alpha:1}):!1==this._hasTouch&&this._active&&this._tween.tween({target:this,duration:0.1,overwrite:!0,thread:"ralpha",ease:G.linear},{alpha:0.9})},__class__:Ph});var Qh=function(a){Ph.call(this,a);this._enabled=
!0};i["screen.button.MinigameVirtualInput"]=Qh;Qh.__name__=["screen","button","MinigameVirtualInput"];Qh.__super__=Ph;Qh.prototype=z(Ph.prototype,{dispose:function(){Ph.prototype.dispose.call(this)},update:function(a){this._enabled&&Ph.prototype.update.call(this,a)},_defaultInit:function(){},enable:function(){this._enabled=!0;this.alpha=1},disable:function(){this._enabled=!1;this.alpha=0.5},_defaultBehavior:function(){this._hasTouch&&!1==this._active?this._tween.tween({target:this,duration:0.1,overwrite:!0,
thread:"ralpha",ease:G.linear},{scale:0.9}):!1==this._hasTouch&&this._active&&this._tween.tween({target:this,duration:0.1,overwrite:!0,thread:"ralpha",ease:G.linear},{scale:1})},__class__:Qh});var Zl=function(a){da.call(this,a)};i["screen.button.SlimeButton"]=Zl;Zl.__name__=["screen","button","SlimeButton"];Zl.__super__=da;Zl.prototype=z(da.prototype,{_click:function(){this._playSoundClick();this._doClick()},_renderOut:function(){},_renderDown:function(){},_renderReturnUp:function(){},__class__:Zl});
var X=function(a){this._flagLocked=!1;this._tween=a.tween;fc.call(this,a)};i["workinman.ui.Display"]=X;X.__name__=["workinman","ui","Display"];X.__super__=fc;X.prototype=z(fc.prototype,{_addEventListeners:function(){fc.prototype._addEventListeners.call(this);P.updateDisplay.add(v(this,this._onUpdateDisplay))},_removeEventListeners:function(){fc.prototype._removeEventListeners.call(this);P.updateDisplay.remove(v(this,this._onUpdateDisplay))},_onUpdateDisplay:function(a){this._flagLocked||a==this._updateValue()&&
this._refresh()},_refresh:function(){},_updateValue:function(){return null},dispose:function(){this._tween=null;fc.prototype.dispose.call(this)},lock:function(){this._flagLocked=!0},unlock:function(){this._flagLocked=!1},__class__:X});var uk=function(a){X.call(this,a);var b="",c="",d=100,a=0,e=600,f=Ca.Center;switch(m.getString("STRING_MINIGAME")){case "ANCHOVY_FLICK":"ANCHOVY_PATRICK_MODE"==m.getString("STRING_BOOSTER")?(this.addChild(new E({library:"spine/hungry_pat_1",x:150,y:225,scaleX:-0.25,
scaleY:0.25})).animate("Pat_idle"),this.addChild(new n({asset:"moving_burger",x:65,y:95})),this.addChild(new n({asset:"moving_burger",rotation:-12,x:-50,y:180,alpha:1})),this.addChild(new n({asset:"moving_burger",rotation:-15,x:-210,y:160,alpha:0.5})),this.addChild(new n({asset:"moving_burger",rotation:-6,x:-155,y:200,alpha:0.75})),b="minigame.title_anchovy",c="minigame.instructions_anchovy_patrick",e=275,d=70,a=-130):(this.addChild(new uj({library:"spine/anchovie_anim_1",x:100,y:275,rotation:-10,
scaleX:-0.35,scaleY:0.35})),this.addChild(new uj({library:"spine/anchovie_anim_1",x:180,y:275,rotation:20,scaleX:-0.32,scaleY:0.32})),this.addChild(new uj({library:"spine/anchovie_anim_1",x:140,y:265,scaleX:-0.365,scaleY:0.365})),this.addChild(new n({asset:"moving_burger",rotation:-12,x:-50,y:180,alpha:1})),this.addChild(new n({asset:"moving_burger",rotation:-15,x:-210,y:160,alpha:0.5})),this.addChild(new n({asset:"moving_burger",rotation:-6,x:-155,y:200,alpha:0.75})),b="minigame.title_anchovy",c=
"minigame.instructions_anchovy",e=275,d=70,a=-150);break;case "BASKETBALL":this.addChild(new E({library:"spine/arcade_slimeball_hoop_back",x:10,y:210,scale:0.65})).animate("hoop_idle");this.addChild(new E({library:"spine/arcade_slimeball_hoop_front",x:10,y:210,scale:0.65})).animate("hoop_idle");b="minigame.title_basketball";c="minigame.instructions_basketball";d=255;break;case "DANGER_LASER":"DANGER_LASER_FRENZY_MODE"==m.getString("STRING_BOOSTER")?(this.addChild(new n({asset:"diode_brainstorm",x:-200,
y:90})),this.addChild(new n({asset:"diode_volt",x:-70,y:90})),this.addChild(new n({asset:"diode_awol",x:70,y:90})),this.addChild(new n({asset:"diode_shoutout",x:200,y:90})),this.addChild(new V({text:"minigame.instructions_danger_lasers_frenzy",originX:0,x:0,y:190,align:Ca.Center}))):(this.addChild(new n({asset:"diode_brainstorm",x:-250,y:115})),this.addChild(new n({asset:"diode_volt",x:-250,y:225})),this.addChild(new n({asset:"diode_awol",x:50,y:115})),this.addChild(new n({asset:"diode_shoutout",
x:50,y:225})),this.addChild(new V({text:"minigame.instructions_danger_lasers_1",originX:0,x:-200,y:115,wrapWidth:225,align:Ca.Left})),this.addChild(new V({text:"minigame.instructions_danger_lasers_2",originX:0,x:-200,y:225,wrapWidth:225,align:Ca.Left})),this.addChild(new V({text:"minigame.instructions_danger_lasers_3",originX:0,x:100,y:115,wrapWidth:225,align:Ca.Left})),this.addChild(new V({text:"minigame.instructions_danger_lasers_4",originX:0,x:100,y:225,wrapWidth:225,align:Ca.Left})),b="minigame.title_danger_lasers",
c="minigame.instructions_danger_lasers",d=50);break;case "HOOF_MACHINE":switch(m.getString("STRING_BOOSTER")){case "HOOF_MACHINE_SINGLE_ITEM":this.addChild(new V({text:"minigame.instructions_hoof_machine_single",originX:0,x:0,y:200,wrapWidth:330,align:Ca.Center}));this.addChild(new n({asset:"collections/stickers/hoof_machine/sticker_hoof_machine_3",x:-250,y:95,scale:1}));this.addChild(new n({asset:"collections/stickers/hoof_machine/sticker_hoof_machine_3",x:-130,y:120,scale:1,rotation:30}));this.addChild(new n({asset:"collections/stickers/hoof_machine/sticker_hoof_machine_3",
x:0,y:95,scale:1,rotation:-20}));this.addChild(new n({asset:"collections/stickers/hoof_machine/sticker_hoof_machine_3",x:130,y:120,scale:1,rotation:45}));this.addChild(new n({asset:"collections/stickers/hoof_machine/sticker_hoof_machine_3",x:250,y:95,scale:1,rotation:-10}));break;case "HOOF_MACHINE_STICKY_MODE":var g=this.addChild(new n({asset:"Pony_crane_torso",y:87,x:180,scale:0.65,rotation:8}));g.addChild(new n({asset:"pony_hoof_left",x:-57,y:40,originX:0,originY:0,rotation:30}));g.addChild(new n({asset:"pony_hoof_right",
x:22,y:80,originX:0,originY:0,rotation:-30}));g.addChild(new n({asset:"Pony_head_1",x:7,y:55}));g.addChild(new n({asset:"collections/stickers/hoof_machine/sticker_hoof_machine_5",x:65,y:205,scale:0.75}));g.addChild(new n({asset:"collections/stickers/hoof_machine/sticker_hoof_machine_6",x:85,y:220,scale:0.75,rotation:-60}));g.addChild(new n({asset:"collections/stickers/hoof_machine/sticker_hoof_machine_1",x:-15,y:205,scale:0.75}));this.addChild(new V({text:"minigame.instructions_hoof_machine_sticky",
originX:0,x:-100,y:140,wrapWidth:330,align:Ca.Center}));break;default:a=this.addChild(new n({asset:"Pony_crane_torso",y:87,x:150,scale:0.75})),a.addChild(new n({asset:"pony_hoof_left",x:-57,y:40,originX:0,originY:0,rotation:30})),a.addChild(new n({asset:"pony_hoof_right",x:22,y:80,originX:0,originY:0,rotation:-30})),a.addChild(new n({asset:"Pony_head_1",x:7,y:55})),this.addChild(new n({asset:"collections/stickers/hoof_machine/sticker_hoof_machine_2",x:150,y:210,scale:0.5})),this.addChild(new n({asset:"joystick",
x:-50,y:250,scale:0.5})),this.addChild(new n({asset:"button-on",x:50,y:260,scale:0.5})),b="minigame.title_hoof_machine",c="minigame.instructions_hoof_machine",a=-250,d=125,f=Ca.Left,e=300}break;case "PACK_MAZE":switch(m.getString("STRING_BOOSTER")){case "PACK_MAZE_EXTRA_PICKUPS":this.addChild(new V({text:"minigame.instructions_pack_maze_pickups",originX:0,x:0,y:240,wrapWidth:600,align:Ca.Center}));this.addChild(new n({asset:"player_ollie_1",x:0,y:170}));this.addChild(new ji({x:-200,y:150}));this.addChild(new ji({x:-125,
y:80}));this.addChild(new ji({x:0,y:60}));this.addChild(new ji({x:125,y:80}));this.addChild(new ji({x:200,y:150}));break;case "PACK_MAZE_EXTRA_POWERUPS":this.addChild(new V({text:"minigame.instructions_pack_maze_powerups",originX:0,x:0,y:240,wrapWidth:600,align:Ca.Center}));this.addChild(new n({asset:"player_ollie_1",x:0,y:170}));this.addChild(new n({asset:"pickup_pack_powerup",x:-200,y:150}));this.addChild(new n({asset:"pickup_pack_powerup",x:-125,y:80}));this.addChild(new n({asset:"pickup_pack_powerup",
x:0,y:60}));this.addChild(new n({asset:"pickup_pack_powerup",x:125,y:80}));this.addChild(new n({asset:"pickup_pack_powerup",x:200,y:150}));break;default:b=0;for(c=-200;9>b;)this.addChild(new n({asset:"pickup_pellet",x:c,y:105})),c+=50,++b;this.addChild(new n({asset:"enemy_andre_1",x:-225,y:225}));this.addChild(new n({asset:"enemy_bev_1",x:-75,y:225}));this.addChild(new n({asset:"enemy_dahlia_1",x:75,y:225}));this.addChild(new n({asset:"enemy_ashlor_1",x:225,y:225}));d=105;b="minigame.title_pack_maze";
c="minigame.instructions_pack_maze"}break;case "ROCK_EM_SOCK_EM":switch(m.getString("STRING_BOOSTER")){case "ROCKEM_EXTRA_HEALTH":this.addChild(new n({asset:"shop/endgame_flash-burst",x:180,y:80,rotation:65,scaleX:0.35,scaleY:0.4}));this.addChild(new n({asset:"ui_health_bar",x:50,y:100,scale:1}));this.addChild(new n({asset:"ui_health_bar_fill",x:50,y:100,scale:1}));this.addChild(new n({asset:"ui_health_bar_front_tut",x:0,y:95,scale:1}));this.addChild(new V({text:"minigame.instructions_rockem_sockem_health",
originX:0,x:0,y:200,wrapWidth:500,align:Ca.Center}));break;case "ROCKEM_ONE_PUNCH":this.addChild(new V({text:"minigame.instructions_rockem_sockem_mega_1",originX:0,x:0,y:190,wrapWidth:500,align:Ca.Center}));this.addChild(new V({text:"minigame.instructions_rockem_sockem_mega_2",originX:0,x:0,y:240,wrapWidth:500,align:Ca.Center}));this.addChild(new n({asset:"Power_Button",x:0,y:90,scale:1}));break;default:b=this.addChild(new E({library:"spine/arcade_rockem_sockem_sandy",x:40,y:110,scale:0.35})),b.animate("idle"),
b=this.addChild(new E({library:"spine/arcade_rockem_sockem_sb",x:-85,y:110,scale:0.35})),b.animate("idle"),this.addChild(new n({asset:"Punch_button",x:-150,y:195,scale:1})),this.addChild(new n({asset:"Power_Button",x:0,y:195,scale:1})),this.addChild(new n({asset:"Block_button",x:150,y:195,scale:1})),b="minigame.title_rockem_sockem",c="minigame.instructions_rockem_sockem",d=265}break;case "SKATE_LANE":switch(m.getString("STRING_BOOSTER")){case "SKATE_MAGNET":this.addChild(new V({text:"minigame.instructions_skate_the_block_magnet",
originX:0,x:0,y:240,wrapWidth:500,align:Ca.Center}));this.addChild(new n({asset:"skate_coin_static",x:-200,y:50,scale:1,alpha:0.25}));this.addChild(new n({asset:"skate_coin_static",x:0,y:50,scale:1,alpha:0.25}));this.addChild(new n({asset:"skate_coin_static",x:200,y:50,scale:1,alpha:0.25}));this.addChild(new n({asset:"skate_coin_static",x:-150,y:100,scale:1,alpha:0.5}));this.addChild(new n({asset:"skate_coin_static",x:0,y:100,scale:1,alpha:0.5}));this.addChild(new n({asset:"pickup_torta",x:150,y:100,
scale:1,alpha:0.5}));this.addChild(new n({asset:"skate_coin_static",x:-100,y:125,scale:0.75}));this.addChild(new n({asset:"skate_coin_static",x:0,y:125,scale:0.75}));this.addChild(new n({asset:"skate_coin_static",x:100,y:125,scale:0.75}));this.addChild(new n({asset:"player_1",x:0,y:150,scale:1}));break;case "SKATE_SHIELD":this.addChild(new V({text:"minigame.instructions_skate_the_block_shield",originX:0,x:0,y:230,wrapWidth:500,align:Ca.Center}));this.addChild(new n({asset:"obstacle_barrier",x:-150,
y:120,rotation:-45,scale:1}));this.addChild(new n({asset:"obstacle_cone",x:100,y:90,rotation:210,scale:1}));this.addChild(new n({asset:"obstacle_cone",x:180,y:120,rotation:-19,scale:1}));this.addChild(new n({asset:"player_1",x:0,y:130,scale:1}));this.addChild(new E({library:"spine/arcade_skate_player",x:0,y:130})).animate("sheild_idle");break;default:this.addChild(new n({asset:"button_l",x:-150,y:110,scale:1})),this.addChild(new n({asset:"player_1",x:0,y:110,scale:1})),this.addChild(new n({asset:"button_r",
x:150,y:110,scale:1})),b="minigame.title_skate_the_block",c="minigame.instructions_skate_the_block",d=225}break;case "SKEEBALL":"SKEEBALL_MAGNET"==m.getString("STRING_BOOSTER")?(this.addChild(new V({text:"minigame.instructions_skeeball_magnet",originX:0,x:0,y:210,align:Ca.Center})),this.addChild(new n({asset:"target_hole_green",y:120,scale:2.1})),this.addChild(new E({library:"spine/arcade_skeeball_ball_red",x:60,y:50,alpha:0.25,originY:1,scale:0.7})),this.addChild(new E({library:"spine/arcade_skeeball_ball_red",
x:25,y:70,alpha:0.5,originY:1,scale:0.9})),this.addChild(new E({library:"spine/arcade_skeeball_ball_red",y:90,alpha:1,originY:1,scale:1}))):(b=this.addChild(new n({x:0,y:190,alpha:1,rotation:0})),b.addChild(new n({asset:"skeeball_aiming_tool_bottom",y:42})),b.addChild(new n({asset:"skeeball_aiming_tool_meter",y:-15,alpha:1,originY:1,scaleY:1})),b.addChild(new n({asset:"skeeball_aiming_tool_arrow",y:-145,scale:0.7})),this.addChild(new E({library:"spine/arcade_skeeball_ball_red",y:190,alpha:1,originY:1,
scale:1.49})),b="minigame.title_skeeball",c="minigame.instructions_skeeball",d=265);break;case "SLIME_EXPLODE":switch(m.getString("STRING_BOOSTER")){case "SLIME_BIG_EXPLOSION":this.addChild(new V({text:"minigame.instructions_slime_blast_big",originX:0,x:0,y:240,wrapWidth:600,align:Ca.Center}));this.addChild(new n({asset:"slime_burst_1",x:0,y:65,scale:1.5}));this.addChild(new n({asset:"cab_slime_nozzle",x:0,y:155,scale:1}));break;case "SLIME_FRENZY_MODE":this.addChild(new V({text:"minigame.instructions_slime_blast_frenzy",
originX:0,x:0,y:240,wrapWidth:600,align:Ca.Center}));this.addChild(new n({asset:"character_sb",x:-130,y:180,originY:1,scale:1,rotation:-30}));this.addChild(new n({asset:"character_sb",x:-90,y:195,originY:1,scale:1,rotation:30}));this.addChild(new n({asset:"character_sb",x:-110,y:180,originY:1,scale:1}));this.addChild(new n({asset:"character_leo",x:90,y:180,originY:1,scale:1,rotation:-30}));this.addChild(new n({asset:"character_leo",x:130,y:195,originY:1,scale:1,rotation:30}));this.addChild(new n({asset:"character_leo",
x:110,y:180,originY:1,scale:1}));break;default:this.addChild(new n({asset:"character_lincoln",x:-200,y:180,originY:1,scale:1})),this.addChild(new n({asset:"character_annie",x:-100,y:180,originY:1,scale:1})),this.addChild(new n({asset:"character_pony",x:0,y:180,originY:1,scale:1})),this.addChild(new n({asset:"character_sb",x:100,y:180,originY:1,scale:1})),this.addChild(new n({asset:"character_leo",x:200,y:180,originY:1,scale:1})),b="minigame.title_slime_blast",c=ma._platform.getTouch().get_supported()?
"minigame.instructions_slime_blast_tap":"minigame.instructions_slime_blast_click",d=235}break;case "WHACK_A_MOLE":switch(m.getString("STRING_BOOSTER")){case "LOUD_LAUGHS_EXPLODING_PIES":this.addChild(new V({text:"minigame.instructions_loud_laughs_explode",originX:0,x:0,y:240,wrapWidth:600,align:Ca.Center}));g=this.addChild(new E({library:"spine/arcade_loudhouse_character_boards_top",x:-150,y:200,scale:0.8}));g.setSkin("char_baby",!0);g.animate("hit",1);g=this.addChild(new E({library:"spine/arcade_loudhouse_character_boards_top",
x:0,y:200,scale:0.8}));g.setSkin("char_lincoln",!0);g.animate("hit",1);g=this.addChild(new E({library:"spine/arcade_loudhouse_character_boards_top",x:150,y:200,scale:0.8}));g.setSkin("char_lisa",!0);g.animate("hit",1);break;case "LOUD_LAUGHS_FRENZY_MODE":this.addChild(new V({text:"minigame.instructions_loud_laughs_frenzy",originX:0,x:0,y:240,wrapWidth:600,align:Ca.Center}));g=this.addChild(new E({library:"spine/arcade_loudhouse_character_boards_top",x:-200,y:200,scale:0.8}));g.setSkin("char_baby",
!0);g.animate("idle",0,2);g=this.addChild(new E({library:"spine/arcade_loudhouse_character_boards_top",x:0,y:200,scale:0.8}));g.setSkin("char_lincoln",!0);g.animate("idle",0,2);g=this.addChild(new E({library:"spine/arcade_loudhouse_character_boards_top",x:200,y:200,scale:0.8}));g.setSkin("char_lisa",!0);g.animate("idle",0,2);break;default:a=this.addChild(new E({library:"spine/arcade_loudhouse_character_boards_top",x:-200,y:300,scale:0.8})),a.setSkin("char_baby",!0),a.animate("idle"),a=this.addChild(new E({library:"spine/arcade_loudhouse_character_boards_top",
x:0,y:300,scale:0.8})),a.setSkin("char_lincoln",!0),a.animate("hit",1),a=this.addChild(new E({library:"spine/arcade_loudhouse_character_boards_top",x:200,y:300,scale:0.8})),a.setSkin("char_lisa",!0),a.animate("idle"),e=500,a=-240,d=85,b="minigame.title_loud_laughs",c="minigame.instructions_loud_laughs",f=Ca.Left}}this.addChild(new V({text:b}));this.addChild(new V({text:c,x:a,y:d,rotation:0,wrapWidth:e,align:f}))};i["screen.display.DisplayGameInstructions"]=uk;uk.__name__=["screen","display","DisplayGameInstructions"];
uk.__super__=X;uk.prototype=z(X.prototype,{_refresh:function(){},__class__:uk});var tj=function(a){this._BAR_COLOR=5592405;this._BAR_HEIGHT=25;this._BAR_WIDTH=131.25;this._ROT=250;this._DELAY=0.5;X.call(this,a);this._active=!1;this._spinnerOrigin=-50;this._scale=1;a=this.addChild(new fc({asset:"load_backing",scale:this._scale}));this._loadMin=-1;this._bar=new fc({x:a.pos.x-0.5*a.get_width()+30,y:a.pos.y,asset:"end_game/load_fill",scale:this._scale,originX:0,scaleX:0});this._endcap=new fc({x:0,y:a.pos.y,
asset:"edge_glow"});this.addChild(this._bar);this.addChild(new fc({asset:"loading_faceplate",scale:this._scale}));this._text=this.addChild(new V({text:"common.loading"}));this._text.setVariables([0]);m.setInt("FLOAT_LOADING_PROGRESS",0);this.alpha=0;this._refresh()};i["screen.display.DisplayLoadingProgress"]=tj;tj.__name__=["screen","display","DisplayLoadingProgress"];tj.__super__=X;tj.prototype=z(X.prototype,{dispose:function(){this._text=this._bar=this._endcap=this._spinner=null;X.prototype.dispose.call(this)},
get_active:function(){return this._active},update:function(a){X.prototype.update.call(this,a)},tweenIn:function(a){this._active||(a&&(this._loadMin=0),Ub.easeBounceIn(this,this._tween),this._active=!0)},tweenOut:function(){!1!=this._active&&(m.setInt("FLOAT_LOADING_PROGRESS",100),Ub.easeBounceOut(this,this._tween),this._active=!1)},_refresh:function(){var a=this._loadMin,b=m.getFloat(this._updateValue());this._loadMin=nn.clamp(a>b?a:b,0,1);this._bar.scaleX=this._loadMin;a=this._bar.pos.x;b=this._bar.get_width()*
this._loadMin;this._endcap.pos.x=a+b;this._text.setVariables([Math.floor(100*this._loadMin)])},_updateValue:function(){return"FLOAT_LOADING_PROGRESS"},__class__:tj,__properties__:z(X.prototype.__properties__,{get_active:"get_active"})});var Hl=function(a){this._fillMax=460;this._targetFill=this._targetX=0;var b=this;X.call(this,a);this._score=m.getInt(this._updateValue());this.addChild(new Ed({color:3355443,sizeX:this._fillMax,sizeY:50}));this._bar=this.addChild(new n({asset:"end_game/load_fill",
x:-this._fillMax/2,y:-1,originX:0}));this._barCap=this.addChild(new n({asset:"end_game/endgame_fill_cap",x:this._bar.get_x()+30,y:this._bar.get_y()-1,originX:0.5}));this._targetFill=(this._score+1)/4*this._fillMax;this._targetX=this._targetFill-this._fillMax/2;ha.start(function(){b._tween.tween({target:b._bar,duration:2,ease:G.outQuart},{scaleX:b._targetFill});b._tween.tween({target:b._barCap,duration:2,ease:G.outQuart},{x:b._targetX,scaleX:3==b._score?0:1});s.playSound("end_screen_slime_meter")},
1)};i["screen.display.DisplayPrizeMeter"]=Hl;Hl.__name__=["screen","display","DisplayPrizeMeter"];Hl.__super__=X;Hl.prototype=z(X.prototype,{dispose:function(){X.prototype.dispose.call(this)},_refresh:function(){this._score=m.getInt(this._updateValue())},_updateValue:function(){return"INT_REWARD_LEVEL"},__class__:Hl});var Il=function(a){X.call(this,a);this._score=m.getInt(this._updateValue());this._text=this.addChild(new V({text:"gameplay.score",x:0}));this._refresh()};i["screen.display.DisplayScore"]=
Il;Il.__name__=["screen","display","DisplayScore"];Il.__super__=X;Il.prototype=z(X.prototype,{dispose:function(){this._text=null;X.prototype.dispose.call(this)},_refresh:function(){this._score=m.getInt(this._updateValue());this._text.setVariables([this._score]);Ub.easeBounceIn(this,this._tween,!1)},_updateValue:function(){return"INT_SCORE"},__class__:Il});var af=function(a,b,c){this._tiles=[];this._texHeight=0;this._flagHorizontal=!1;this._speed=40;X.call(this,c);this._flagHorizontal=a;for(a=0;a<
b;)c=a++,this._tiles.push(this.addChild(new n({asset:"slime_pipe_flow_tile_1",y:5,originY:c,rotation:this._flagHorizontal?90:0})));this._texHeight=this._tiles[0].texture.get_height()};i["screen.display.DisplaySlimeTube"]=af;af.__name__=["screen","display","DisplaySlimeTube"];af.__super__=X;af.prototype=z(X.prototype,{update:function(a){X.prototype.update.call(this,a);for(var b=0,c=this._tiles.length;b<c;){var d=b++;if(this._flagHorizontal){if(this._tiles[d].get_x()>this.get_x()+this._texHeight){var e=
this._tiles[d];e.set_x(e.get_x()-this._texHeight)}d=this._tiles[d];d.set_x(d.get_x()+this._speed*a)}else this._tiles[d].get_y()>this.get_y()+this._texHeight&&(e=this._tiles[d],e.set_y(e.get_y()-this._texHeight)),d=this._tiles[d],d.set_y(d.get_y()+this._speed*a)}},__class__:af});var vj=function(a,b){X.call(this,b);this._type=a;switch(a[1]){case 0:this._text=this.addChild(new V({text:"gameplay.tickets",align:Ca.Right,x:95,y:0}));this.addChild(new n({asset:"collections/ui_ticket_silver",scale:0.55,x:-76,
y:-5}));break;case 1:this._text=this.addChild(new V({text:"gameplay.tickets",align:Ca.Right,x:95,y:0}));this.addChild(new n({asset:"collections/ui_ticket_gold",scale:0.55,x:-76,y:-5}));break;default:this._text=this.addChild(new V({text:"gameplay.tickets",align:Ca.Right,x:95,y:0})),this.addChild(new n({asset:"collections/ui_ticket_green",scale:0.55,x:-76,y:-5}))}this.refresh()};i["screen.display.DisplayTickets"]=vj;vj.__name__=["screen","display","DisplayTickets"];vj.__super__=X;vj.prototype=z(X.prototype,
{refresh:function(){var a="INT_TICKET_COUNT_SILVER";this._type==Ud.GOLD?a="INT_TICKET_COUNT_GOLD":this._type==Ud.GREEN&&(a="INT_TICKET_COUNT_GREEN");this._text.setVariables([m.getInt(a)])},__class__:vj});var Jl=function(a){var b=this;this.eventArbitraryKey=yd._new();a.asset="template/ui/code/keyboard/keyboard_back";a.originY=1;fc.call(this,a);var c=["1,2,3,4,5,6,7,8,9,0".split(","),"Q,W,E,R,T,Y,U,I,O,P".split(","),"A,S,D,F,G,H,J,K,L,backspace".split(","),"Z,X,C,V,B,N,M,_,enter".split(",")],d,e,f=
0,g=0;this._tween=a.tween;this._buttons=[];e="";for(var j=0,p=c.length;j<p;)for(var h=[j++],f=-350,g=-270+77*h[0],i=0,k=c[h[0]].length;i<k;){var l=[i++];e=0==h[0]||1<c[h[0]][l[0]].length?"button_"+c[h[0]][l[0]]:"button_key";2==h[0]&&0<l[0]&&(f-=2.5);3==h[0]&&0<l[0]&&(f-=2.5);"backspace"==c[h[0]][l[0]]?f+=9.75:"enter"==c[h[0]][l[0]]&&(f+=48.75);d=e;e+="_pressed";d=this.addChild(new da({x:f,y:g,tween:this._tween,clear:a.buttonClear,assetUp:d,assetDown:e}));d.eventClick.add(function(a,d){return function(){b.eventArbitraryKey.dispatch(c[d[0]][a[0]])}}(l,
h));f+=78;this._buttons.push(d)}d=null};i["screen.display.UIKeyboard"]=Jl;Jl.__name__=["screen","display","UIKeyboard"];Jl.__super__=fc;Jl.prototype=z(fc.prototype,{dispose:function(){fc.prototype.dispose.call(this);this.eventArbitraryKey=this._buttons=this._tween=null},__class__:Jl});var $l=function(a){X.call(this,a);this._scoreText=this.addChild(new V({text:"danger_laser.score",x:-10,y:-210,align:Ca.Center}));this._scoreText.setVariables([0])};i["screen.display.minigame.DisplayMinigameAnchovy"]=
$l;$l.__name__=["screen","display","minigame","DisplayMinigameAnchovy"];$l.__super__=X;$l.prototype=z(X.prototype,{dispose:function(){X.prototype.dispose.call(this)},checkResize:function(){},_onUpdateDisplay:function(a){switch(a){case "INT_SCORE":this._scoreText.setVariables([m.getInt("INT_SCORE")])}},__class__:$l});var am=function(a){X.call(this,a);this._scoreText=this.addChild(new V({text:"basketball.score",x:-87,y:43,align:Ca.Left}));this._timeText=this.addChild(new V({text:"basketball.time",x:41,
y:43,align:Ca.Left}));this._scoreText.setVariables([0]);this._timeText.setVariables([30])};i["screen.display.minigame.DisplayMinigameBasketball"]=am;am.__name__=["screen","display","minigame","DisplayMinigameBasketball"];am.__super__=X;am.prototype=z(X.prototype,{dispose:function(){X.prototype.dispose.call(this)},checkResize:function(){},_onUpdateDisplay:function(a){switch(a){case "FLOAT_TIME":this._timeText.setVariables([Math.floor(m.getFloat("FLOAT_TIME"))]);break;case "INT_SCORE":this._scoreText.setVariables([m.getInt("INT_SCORE")])}},
__class__:am});var Ml=function(a){X.call(this,a);this.alpha=0;this._scoreText=this.addChild(new V({text:"danger_laser.score",x:20,y:-255,align:Ca.Left}));this._timeText=this.addChild(new V({text:"danger_laser.time",x:-200,y:-255,align:Ca.Left}));this._scoreText.setVariables([0]);this._timeText.setVariables([30])};i["screen.display.minigame.DisplayMinigameDangerLaser"]=Ml;Ml.__name__=["screen","display","minigame","DisplayMinigameDangerLaser"];Ml.__super__=X;Ml.prototype=z(X.prototype,{dispose:function(){X.prototype.dispose.call(this)},
checkResize:function(){},_onUpdateDisplay:function(a){switch(a){case "FLOAT_TIME":this._timeText.setVariables([Math.floor(m.getFloat("FLOAT_TIME"))]);break;case "INT_SCORE":this._scoreText.setVariables([m.getInt("INT_SCORE")])}},__class__:Ml});var Nl=function(a){X.call(this,a);this.addChild(new Yl({mode:xg.FULL_SCREEN,tweener:this._tween,assetBase:"",assetKnob:"joystick",inputThreshold:0.2,maxKnobDist:100,slideToMaxDist:!0,joystickStyle:mf.STANDARD_XY,x:-132,y:257}));this._superButton=this.addChild(new Qh({id:na.JUMP,
tween:this._tween,asset:"button-off",x:137,y:240}))};i["screen.display.minigame.DisplayMinigameHoofMachine"]=Nl;Nl.__name__=["screen","display","minigame","DisplayMinigameHoofMachine"];Nl.__super__=X;Nl.prototype=z(X.prototype,{dispose:function(){X.prototype.dispose.call(this)},checkResize:function(){},_onUpdateDisplay:function(){},__class__:Nl});var Ol=function(a){X.call(this,a);this.addChild(new n({asset:"scorebox_wider",x:0,y:-250}));this.addChild(new n({asset:"pack_cab_overlay",x:0,y:0}));this._scoreText=
this.addChild(new V({text:"pack_maze.score",x:30,y:-248,align:Ca.Left}));this._hearts=[];for(a=0;3>a;){var b=a++;this.addChild(new n({asset:"anim/heart_empty",x:-100+40*b,y:-250,scale:0.6}));this._hearts.push(this.addChild(new n({asset:"anim/heart_full",x:-100+40*b,y:-250,scale:0.8})))}this._scoreText.setVariables([0]);this.addChild(new Xl({mode:xg.FULL_SCREEN,tweener:this._tween,assetBase:"",assetKnob:"joystick_stick",inputThreshold:0.2,maxKnobDist:100,slideToMaxDist:!0,joystickStyle:mf.STANDARD_XY,
x:2,y:257}))};i["screen.display.minigame.DisplayMinigamePackMaze"]=Ol;Ol.__name__=["screen","display","minigame","DisplayMinigamePackMaze"];Ol.__super__=X;Ol.prototype=z(X.prototype,{dispose:function(){X.prototype.dispose.call(this)},checkResize:function(){},_onUpdateDisplay:function(a){switch(a){case "INT_HEALTH":for(a=0;4>a;){var b=a++;b>m.getInt("INT_HEALTH")-1&&this.removeChild(this._hearts[b])}break;case "INT_SCORE":this._scoreText.setVariables([m.getInt("INT_SCORE")])}},__class__:Ol});var Sl=
function(a){this._xOffset=0;X.call(this,a);this._xOffset=1.4>fb.STAGE_WIDTH/560?-80:0;this._scoreText=this.addChild(new V({text:"danger_laser.score",x:20+this._xOffset,y:-230,align:Ca.Left,alpha:0}));this._timeText=this.addChild(new V({text:"rockem_sockem.time",x:-240+this._xOffset,y:-200,align:Ca.Left}));this._scoreText.setVariables([0]);this._timeText.setVariables([30])};i["screen.display.minigame.DisplayMinigamePies"]=Sl;Sl.__name__=["screen","display","minigame","DisplayMinigamePies"];Sl.__super__=
X;Sl.prototype=z(X.prototype,{dispose:function(){X.prototype.dispose.call(this)},checkResize:function(){},_onUpdateDisplay:function(a){switch(a){case "FLOAT_TIME":this._timeText.setVariables([Math.floor(m.getFloat("FLOAT_TIME"))]);break;case "INT_SCORE":this._scoreText.setVariables([m.getInt("INT_SCORE")])}},__class__:Sl});var Pl=function(a){X.call(this,a);this._timeText=this.addChild(new V({text:"rockem_sockem.time",x:0,y:-255,alpha:0}));this._chargePrevious=0;this._usedSuper=!1;this._timeText.setVariables([30]);
this.addChild(new Qh({id:na.ATTACK,tween:this._tween,asset:"Punch_button",x:-105,y:180,scale:1}));this.addChild(new Qh({id:na.MOVE_LEFT,tween:this._tween,asset:"Block_button",x:105,y:180,scale:1}));this._superButton=this.addChild(new Qh({id:na.JUMP,tween:this._tween,asset:"Power_Button",x:5,y:180,scale:1}));this._superButtonOverlay=this.addChild(new E({x:this._superButton.get_x()-5,y:this._superButton.get_y(),library:"spine/power_btn",scale:1}));this._superButtonOverlay.animate("p-btn_off");this._superButtonOverlay.inputEnabled=
!1;this._superButtonOverlay.eventAnimationComplete.add(v(this,this._onSuperAnimationComplete));this._superButton.disable();this._superButton.alpha=0};i["screen.display.minigame.DisplayMinigameRockEm"]=Pl;Pl.__name__=["screen","display","minigame","DisplayMinigameRockEm"];Pl.__super__=X;Pl.prototype=z(X.prototype,{_onSuperAnimationComplete:function(){this._usedSuper&&(this._usedSuper=!1,this._superButtonOverlay.animate("p-btn_charging",0))},dispose:function(){this._superButtonOverlay.eventAnimationComplete.remove(v(this,
this._onSuperAnimationComplete));this._superButton=this._superButtonOverlay=null;X.prototype.dispose.call(this)},checkResize:function(){},_onUpdateDisplay:function(a){switch(a){case "FLOAT_TIME":this._timeText.setVariables([Math.floor(m.getFloat("FLOAT_TIME"))]);break;case "INT_POWER_LEVEL":if(this._usedSuper)break;a=m.getInt("INT_POWER_LEVEL")/100;1==a?"p-btn_ready"!=this._superButtonAnimation&&(this._superButtonAnimation="p-btn_ready",this._superButtonOverlay.animate(this._superButtonAnimation,
0),this._superButton.enable()):0<a?"p-btn_charging"!=this._superButtonAnimation&&(this._superButtonAnimation="p-btn_charging",this._superButtonOverlay.animate(this._superButtonAnimation,0),this._superButton.disable()):1==this._chargePrevious?(this._usedSuper=!0,"p-btn_hit"!=this._superButtonAnimation&&(this._superButtonAnimation="p-btn_hit",this._superButtonOverlay.animate(this._superButtonAnimation,1),this._superButton.disable())):"p-btn_off"!=this._superButtonAnimation&&(this._superButtonAnimation=
"p-btn_off",this._superButtonOverlay.animate(this._superButtonAnimation,0),this._superButton.disable());this._superButton.alpha=0;this._chargePrevious=a}},__class__:Pl});var Ql=function(a){X.call(this,a);this.addChild(new n({asset:"ui_score_box",y:-221,x:-240}));this.addChild(new n({asset:"skate_cab_bottom",y:252}));this.addChild(new n({asset:"skate_cab_top",y:-281}));this.addChild(new n({asset:"skate_cab_l",y:-0.5,x:-404}));this.addChild(new n({asset:"skate_cab_r",x:405,y:0}));this._scoreText=this.addChild(new V({text:"skate.score",
x:-318,y:-223,align:Ca.Left}));this._timeText=this.addChild(new V({text:"skate.lives",x:-70,y:-221,align:Ca.Left}));this._scoreText.setVariables([0]);this._timeText.setVariables([3]);this.addChild(new n({asset:"button_tray_back",y:215}));this.addChild(new Qh({id:na.MOVE_LEFT,tween:this._tween,asset:"button_l",x:-142,y:190}));this.addChild(new Qh({id:na.MOVE_RIGHT,tween:this._tween,asset:"button_r",x:137,y:190}));this.addChild(new n({asset:"button_tray_top",y:250}))};i["screen.display.minigame.DisplayMinigameSkate"]=
Ql;Ql.__name__=["screen","display","minigame","DisplayMinigameSkate"];Ql.__super__=X;Ql.prototype=z(X.prototype,{dispose:function(){X.prototype.dispose.call(this)},checkResize:function(){},_onUpdateDisplay:function(a){switch(a){case "INT_HEALTH":this._timeText.setVariables([Math.floor(m.getInt("INT_HEALTH"))]);break;case "INT_SCORE":this._scoreText.setVariables([m.getInt("INT_SCORE")])}},__class__:Ql});var bm=function(a){X.call(this,a);this._scoreText=this.addChild(new V({text:"danger_laser.score",
x:120,y:-230,align:Ca.Left}));this._ballText=this.addChild(new V({text:"skeeball.ball_count",x:120,y:-168,align:Ca.Left}));this._scoreText.setVariables([0]);this._ballText.setVariables([0])};i["screen.display.minigame.DisplayMinigameSkeeball"]=bm;bm.__name__=["screen","display","minigame","DisplayMinigameSkeeball"];bm.__super__=X;bm.prototype=z(X.prototype,{dispose:function(){X.prototype.dispose.call(this)},checkResize:function(){},_onUpdateDisplay:function(a){switch(a){case "INT_SCORE":this._scoreText.setVariables([m.getInt("INT_SCORE")]);
break;case "INT_SKEEBALL_BALL_COUNT":this._ballText.setVariables([m.getInt("INT_SKEEBALL_BALL_COUNT")])}},__class__:bm});var Rl=function(a){X.call(this,a);this.addChild(new n({asset:"slime_ui_score_display",x:0,y:-224}));this._scoreText=this.addChild(new V({text:"danger_laser.score",x:0,y:-225,align:Ca.Center}));this._scoreText.setVariables([0]);this._slimeButton=this.addChild(new Zl({tween:this._tween,clear:v(this,this._clearButtonInput),assetUp:"slime_button_up",x:-7,y:241}));this._slimeButton.eventClick.add(v(this,
this._slimeClick));a=this.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:350,y:180}));a.setCustomHitBox(150,150);a.eventClick.add(function(){P.slimeBlastPump.dispatch()});a=this.addChild(new da({tween:this._tween,clear:v(this,this._clearButtonInput),x:-350,y:180}));a.setCustomHitBox(150,150);a.eventClick.add(function(){P.slimeBlastPump.dispatch()})};i["screen.display.minigame.DisplayMinigameSlime"]=Rl;Rl.__name__=["screen","display","minigame","DisplayMinigameSlime"];Rl.__super__=
X;Rl.prototype=z(X.prototype,{dispose:function(){X.prototype.dispose.call(this)},_addEventListeners:function(){X.prototype._addEventListeners.call(this);P.slimeBlastReset.add(v(this,this._reset))},_removeEventListeners:function(){X.prototype._removeEventListeners.call(this);P.slimeBlastReset.remove(v(this,this._reset))},_slimeClick:function(){this._slimeButton.setBaseAsset("slime_button_down");P.slimeBlast.dispatch()},checkResize:function(){},_clearButtonInput:function(){return!0},_reset:function(){this._slimeButton.setBaseAsset("slime_button_up")},
_onUpdateDisplay:function(a){switch(a){case "INT_SCORE":this._scoreText.setVariables([m.getInt("INT_SCORE")])}},__class__:Rl});var Kl=function(a,b){this.PRIZE_POOL=[[{id:0,image:"collections/stickers/sticker_anchovy_flick_0",price:[150],name:"shop.sticker_anchovy_flick_0"},{id:1,image:"collections/stickers/sticker_basketball_0",price:[150],name:"shop.sticker_basketball_0"},{id:2,image:"collections/stickers/sticker_dangerlaser_0",price:[150],name:"shop.sticker_dangerlaser_0"},{id:3,image:"collections/stickers/sticker_general_0",
price:[150],name:"shop.sticker_general_0"},{id:4,image:"collections/stickers/sticker_pack_maze_0",price:[200],name:"shop.sticker_pack_maze_0"},{id:5,image:"collections/stickers/sticker_rock_em_0",price:[200],name:"shop.sticker_rock_em_0"},{id:6,image:"collections/stickers/sticker_skate_lane_0",price:[200],name:"shop.sticker_skate_lane_0"},{id:7,image:"collections/stickers/sticker_skeeball_0",price:[200],name:"shop.sticker_skeeball_0"},{id:8,image:"collections/stickers/sticker_slime_explode_0",price:[250],
name:"shop.sticker_slime_explode_0"},{id:9,image:"collections/stickers/sticker_whack_a_mole_0",price:[250],name:"shop.sticker_whack_a_mole_0"},{id:10,image:"collections/stickers/sticker_anchovy_flick_1",price:[250],name:"shop.sticker_anchovy_flick_1"},{id:11,image:"collections/stickers/sticker_basketball_1",price:[250],name:"shop.sticker_basketball_1"},{id:12,image:"collections/stickers/sticker_dangerlaser_1",price:[300],name:"shop.sticker_dangerlaser_1"},{id:13,image:"collections/stickers/sticker_general_1",
price:[300],name:"shop.sticker_general_1"},{id:14,image:"collections/stickers/sticker_pack_maze_1",price:[300],name:"shop.sticker_pack_maze_1"}],[{id:15,image:"collections/stickers/sticker_rock_em_1",price:[150,300],name:"shop.sticker_rock_em_1"},{id:16,image:"collections/stickers/sticker_skate_lane_1",price:[150,350],name:"shop.sticker_skate_lane_1"},{id:17,image:"collections/stickers/sticker_skeeball_1",price:[150,400],name:"shop.sticker_skeeball_1"},{id:18,image:"collections/stickers/sticker_slime_explode_1",
price:[150,450],name:"shop.sticker_slime_explode_1"},{id:19,image:"collections/stickers/sticker_whack_a_mole_1",price:[150,500],name:"shop.sticker_whack_a_mole_1"},{id:20,image:"collections/stickers/sticker_anchovy_flick_2",price:[250,550],name:"shop.sticker_anchovy_flick_2"},{id:21,image:"collections/stickers/sticker_basketball_2",price:[250,600],name:"shop.sticker_basketball_2"},{id:22,image:"collections/stickers/sticker_dangerlaser_2",price:[250,650],name:"shop.sticker_dangerlaser_2"},{id:23,image:"collections/stickers/sticker_general_2",
price:[250,700],name:"shop.sticker_general_2"}],[{id:24,image:"collections/stickers/sticker_pack_maze_2",price:[150,200,300],name:"shop.sticker_pack_maze_2"},{id:25,image:"collections/stickers/sticker_rock_em_2",price:[150,200,350],name:"shop.sticker_rock_em_2"},{id:26,image:"collections/stickers/sticker_skate_lane_2",price:[150,200,400],name:"shop.sticker_skate_lane_2"},{id:27,image:"collections/stickers/sticker_skeeball_2",price:[250,350,400],name:"shop.sticker_skeeball_2"},{id:28,image:"collections/stickers/sticker_slime_explode_2",
price:[250,350,600],name:"shop.sticker_slime_explode_2"},{id:29,image:"collections/stickers/sticker_whack_a_mole_2",price:[250,350,800],name:"shop.sticker_whack_a_mole_2"}]];this._flagForceUniquePrizes=this._flagForceUnownedPrizes=!0;var c=this;X.call(this,b);this._clear=a;this._prizes=[];this.addChild(new n({asset:"shop/store_kiosk",x:0,y:0}));this._uiPanel=this.addChild(new n({asset:"shop/dialogue_box_2",x:0,y:185,scale:0}));this.addChild(new n({asset:"shop/tag_ticket_3",x:-300,y:-130}));this.addChild(new n({asset:"shop/tag_ticket_2",
x:-300,y:-40}));this.addChild(new n({asset:"shop/tag_ticket_1",x:-300,y:40}));this._prizeArray=this.getPrizeArray();for(var d=0,e=0;3>e;)for(var f=e++,g=0;4>g;){var j;switch(g++){case 1:j=-70;break;case 2:j=55;break;case 3:j=187.5;break;default:j=-200}j=[this.addChild(new cm(this,this._prizeArray[d],{tween:this._tween,clear:this._clear,x:j,y:1==f?-15:2==f?-95:70,assetUp:this._prizeArray[d].image,originY:1,scale:0.4}))];j[0].eventClick.add(function(a){return function(){c._setSelected(a[0])}}(j));this._prizes.push(j[0]);
++d}this._stickerNameText=this._uiPanel.addChild(new V({text:"shop.intial_info",x:0,y:-30}));this._instructionalText=this._uiPanel.addChild(new V({text:"shop.intial_info",x:0,y:15}));this._ticketDisplays=[];this._ticketDisplays.push(this.addChild(new vj(Ud.SILVER,{tween:this._tween,asset:"collections/ui_ticket_score",x:-200,y:-200,scale:0.65})));this._ticketDisplays.push(this.addChild(new vj(Ud.GOLD,{tween:this._tween,asset:"collections/ui_ticket_score",x:0,y:-200,scale:0.65})));this._ticketDisplays.push(this.addChild(new vj(Ud.GREEN,
{tween:this._tween,asset:"collections/ui_ticket_score",x:200,y:-200,scale:0.65})))};i["screen.display.shop.DisplayShop"]=Kl;Kl.__name__=["screen","display","shop","DisplayShop"];Kl.__super__=X;Kl.prototype=z(X.prototype,{updateTicketAmounts:function(){for(var a=0,b=this._ticketDisplays.length;a<b;)this._ticketDisplays[a++].refresh()},_setSelected:function(a){for(var b=0,c=this._prizes.length;b<c;){var d=b++;if(a.getId()==this._prizes[d].getId()){this._stickerNameText.setText(this._prizes[d].getName());
var e="";this._prizes[d].isSelected()?this._prizes[d].hasRequisiteTickets()?(e="shop.intial_info",this._stickerNameText.setText("shop.intial_info"),this._tween.tween({target:this._uiPanel,duration:0.2,ease:G.outQuad},{scale:0})):e="shop.need_more_tickets":(e=ma._platform.getTouch().get_supported()?"shop.buy_tap":"shop.buy_click",0.6>this._uiPanel.scale&&this._tween.tween({target:this._uiPanel,duration:0.2,ease:G.outQuad},{scale:0.6}));this._instructionalText.setText(e);this._prizes[d].toggleSelect(!0)}else this._prizes[d].toggleSelect(!1)}},
_addEventListeners:function(){X.prototype._addEventListeners.call(this);P.refreshPrizeKiosk.add(v(this,this._onRefreshPrizes))},_removeEventListeners:function(){X.prototype._removeEventListeners.call(this);P.refreshPrizeKiosk.remove(v(this,this._onRefreshPrizes))},_refresh:function(){X.prototype._refresh.call(this)},getPrizeArray:function(){for(var a=this.PRIZE_POOL.slice(),b=[],c=0;3>c;)for(var d=c++,e=0;4>e;){e++;var f=M.randomObject(a[d]);b.push(f);this._flagForceUniquePrizes&&Z.remove(a[d],f)}return b},
_onRefreshPrizes:function(){this._prizeArray=this.getPrizeArray()},_getPrizeLevel:function(a){return a.price.length},__class__:Kl});var Ll=function(a,b,c){this._prize=this._prizeImage=this._tween=null;var d=this;n.call(this,c);this._prize=a;this._tween=b;var a=this.addChild(new Ed({sizeX:fb.STAGE_WIDTH,sizeY:560,color:0,alpha:0})),e=this.addChild(new n({asset:"shop/endgame_flash-burst",x:21,y:-63,alpha:0}));e.inputEnabled=!1;var f=this.addChild(new n({y:10,alpha:0})),b=new n({asset:"shop/endgame_capsule-bowl-silver",
y:35,alpha:1}),g=f.addChild(b);switch(this._prize.price.length){case 2:g.setAsset("shop/endgame_capsule-bowl-gold");break;case 3:g.setAsset("shop/endgame_capsule-bowl-green");break;default:g.setAsset("shop/endgame_capsule-bowl-silver")}var b=new n({asset:"shop/endgame_capsule-cap",y:-10,alpha:1}),j=f.addChild(b);this._tween.tween({target:a,duration:0.3,ease:G.outQuad},{alpha:0.5});Ub.easeBounceIn(f,this._tween,!0,0.9).onComplete(function(){Ub.easeRock(f,d._tween,10,!0,0.2).onComplete(function(){d._tween.tween({target:e,
duration:0.3,ease:G.outQuad},{alpha:1});d._tween.tween({target:g,duration:0.3,ease:G.outQuad},{x:-70,y:50,rotation:40});d._tween.tween({target:j,duration:0.3,ease:G.outQuad},{x:84,y:38,rotation:120});var a=new n({asset:d._prize.image,y:-10,alpha:0}),a=f.addChild(a);d._prizeImage=a;Ub.easeBounceIn(d._prizeImage,d._tween,!0,0.15).onComplete(function(){s.playSound("arcade_claim_prize");d._tween.tween({target:d._prizeImage,duration:0.3,delay:1,ease:G.outQuad},{x:fb.STAGE_CENTER_X,y:-280,rotation:0,scale:0,
alpha:0}).onComplete(function(){Ub.easeFadeOut(d,d._tween,!0)})})})})};i["screen.display.shop.DisplayShopAwardPrize"]=Ll;Ll.__name__=["screen","display","shop","DisplayShopAwardPrize"];Ll.__super__=n;Ll.prototype=z(n.prototype,{__class__:Ll});var cm=function(a,b,c){this._flagSelected=!1;this._shop=this._prize=this._label=this._extendedLabel=null;da.call(this,c);this._shop=a;this._prize=b;this._label=this.addChild(this._getLabel());this._label.set_x(100);this._label.set_y(-75);this._extendedLabel=
this.addChild(this._getExtendedLabel());this._extendedLabel.alpha=0;this._extendedLabel.set_scale(0)};i["screen.display.shop.DisplayShopButton"]=cm;cm.__name__=["screen","display","shop","DisplayShopButton"];cm.__super__=da;cm.prototype=z(da.prototype,{toggleSelect:function(a){this._flagSelected&&a?this.hasRequisiteTickets()&&this.purchase():(a&&!this._flagSelected?(this._tween.tween({target:this._label,duration:0.2,overwrite:!0,ease:G.outBounce},{scale:0,alpha:0}),this._tween.tween({target:this._extendedLabel,
duration:0.2,overwrite:!0,ease:G.outBounce},{scale:2,alpha:1})):!a&&this._flagSelected&&(this._tween.tween({target:this._extendedLabel,duration:0.2,overwrite:!0,ease:G.outBounce},{scale:0,alpha:0}),this._tween.tween({target:this._label,duration:0.2,overwrite:!0,ease:G.outBounce},{scale:2,alpha:1})),this._flagSelected=a)},purchase:function(){P.purchaseKioskPrize.dispatch(this._prize);this._tween.tween({target:this,duration:0.3,overwrite:!0,ease:G.outBounce},{scale:0,alpha:0})},getId:function(){return this._prize.id},
getName:function(){return this._prize.name},getPrice:function(){return this._prize.price},isSelected:function(){return this._flagSelected},hasRequisiteTickets:function(){var a=!0;0<this._prize.price.length&&m.getInt("INT_TICKET_COUNT_SILVER")<this._prize.price[0]&&(a=!1);1<this._prize.price.length&&m.getInt("INT_TICKET_COUNT_GOLD")<this._prize.price[1]&&(a=!1);2<this._prize.price.length&&m.getInt("INT_TICKET_COUNT_GREEN")<this._prize.price[2]&&(a=!1);return a},_getLabel:function(){var a=new n({asset:"shop/price_tag",
scale:2});switch(this._prize.price.length){case 1:a.addChild(new n({asset:"ticket_icon_silver",x:0,y:0}));break;case 2:a.addChild(new n({asset:"ticket_icon_silver",x:-5,y:0}));a.addChild(new n({asset:"ticket_icon_gold",x:10,y:0}));break;default:a.addChild(new n({asset:"ticket_icon_silver",x:-8,y:0})),a.addChild(new n({asset:"ticket_icon_gold",x:0,y:0})),a.addChild(new n({asset:"ticket_icon_green",x:8,y:0}))}a.inputEnabled=!1;return a},_getExtendedLabel:function(){var a=new n({asset:1<this._prize.price.length?
2<this._prize.price.length?"shop/prize_label_lg":"shop/prize_label_md":"shop/prize_label_sm",y:0,scale:2});switch(this._prize.price.length){case 1:a.addChild(new n({asset:"ticket_icon_silver",x:-25,y:0}));a.addChild(new V({text:"shop.ticket_amount",x:15,y:0})).setVariables([this._prize.price[0]]);break;case 2:a.addChild(new n({asset:"ticket_icon_silver",x:-70,y:0}));var b=a.addChild(new V({text:"shop.ticket_amount",x:-35,y:0}));b.setVariables([this._prize.price[0]]);a.addChild(new n({asset:"ticket_icon_gold",
x:15,y:0}));b=a.addChild(new V({text:"shop.ticket_amount",x:55,y:0}));b.setVariables([this._prize.price[1]]);break;default:a.addChild(new n({asset:"ticket_icon_silver",x:-105,y:0})),b=a.addChild(new V({text:"shop.ticket_amount",x:-70,y:0})),b.setVariables([this._prize.price[0]]),a.addChild(new n({asset:"ticket_icon_gold",x:-25,y:0})),b=a.addChild(new V({text:"shop.ticket_amount",x:10,y:0})),b.setVariables([this._prize.price[1]]),a.addChild(new n({asset:"ticket_icon_green",x:60,y:0})),b=a.addChild(new V({text:"shop.ticket_amount",
x:95,y:0})),b.setVariables([this._prize.price[2]])}return a},__class__:cm});var H=function(){};i["workinman.WMAssets"]=H;H.__name__=["workinman","WMAssets"];H.__properties__={set_baseUrl:"set_baseUrl",get_isLoading:"get_isLoading"};H.update=function(a){H.get_isLoading()||1>H._loadQueue.length||(H._loadQueue[0].delay-=a,0>H._loadQueue[0].delay&&H._beginLoad(H._loadQueue.shift()))};H.get_isLoading=function(){return H._manifestsLoaded<H._manifestsMax};H.set_baseUrl=function(a){H.baseUrl=a;return H.baseUrl};
H.setCrossdomainBaseUrl=function(a){H._flagBaseIsCrossdomain=!0;H.set_baseUrl(a)};H.load=function(a,b,c){null==c&&(c=0);if(null==a)throw new h("[WMAssets](load) Callback is null.");a=new co(a,b,c);H.get_isLoading()||0<c?H._loadQueue.push(a):H._beginLoad(a)};H._beginLoad=function(a){for(var b=[],c=[],d=0,e=a.packs;d<e.length;){var f=e[d];++d;var g=H._packs;if(!(null!=K[f]?g.existsReserved(f):g.h.hasOwnProperty(f)))xe.exists(f)?b.push(f):(g=H._customManifests,(null!=K[f]?g.existsReserved(f):g.h.hasOwnProperty(f))&&
c.push(f))}if(1>b.length&&1>c.length)a.complete();else{m.setFloat("FLOAT_LOADING_PROGRESS",0);H._loadingProgress=0;H._loadingCallback=a.complete;H._manifestsMax+=c.length+b.length;for(d=0;d<b.length;)e=b[d],++d,H._loadPack(e);for(b=0;b<c.length;)d=c[b],++b,e=H._customManifests,H._loadManifest(null!=K[d]?e.getReserved(d):e.h[d],d);a.dispose()}};H._loadPack=function(a){var b=xe.fromAssets(a);""!=H.baseUrl&&(H._flagBaseIsCrossdomain?b.set_remoteBase(H.baseUrl):b.set_localBase(H.baseUrl));H._loadManifest(b,
a)};H._loadManifest=function(a,b){var c=ma._platform.loadAssetPack(a);H._loadingTotal+=c._total;var d=0;c.error.connect(H._loadingError);c.progressChanged.connect(function(){var a=c._progress-d;d=c._progress;H._loadingProgress+=a;m.setFloat("FLOAT_LOADING_PROGRESS",nn.clamp(H._loadingProgress/H._loadingTotal,0,1))});H._requests.push(c.get(function(a){H._addPack(b,new eo(a));++H._manifestsLoaded>=H._manifestsMax&&H._onAllLoadComplete()}))};H._loadingError=function(){H.eventLoadError.dispatch();H._manifestsLoaded++};
H._onAllLoadComplete=function(){if(null!=H._loadingCallback){var a=H._loadingCallback;H._loadingCallback=null;a()}for(;0<H._requests.length;)H._requests.pop()};H._addPack=function(a,b){var c=H._packs;null!=K[a]?c.setReserved(a,b):c.h[a]=b;for(c=Z.iter(b.pack.get_manifest()._entries);c.hasNext();){var d=c.next();if(-1<d.name.indexOf("library.json")){var d=d.name,d=pc.replace(d,"/library.json",""),e=H._flump,f=new jk(b.pack,d);null!=K[d]?e.setReserved(d,f):e.h[d]=f;b.flump.push(d)}else{switch(Dh.getExtension(d.name)){case "atlas":case "txt":for(var f=
"",e=d.name.split("/"),g=0,j=e.length-1;g<j;)var p=g++,f=f+(e[p]+"/");H._parseSpriteAtlas(f,b.pack.getFile(d.name).toString(),b)}f=d.name;e=H._assets;null!=K[f]?e.setReserved(f,a):e.h[f]=a;b.assets.push(d.name)}}};H._parseSpriteAtlas=function(a,b,c){for(b=b.split("\n");1<b.length;){for(;1>=b[0].length;)b.shift();for(var d=a+Dh.removeExtension(pc.rtrim(b.shift()));-1>=b.shift().indexOf("repeat:"););for(;1<b.length&&1<b[0].length;)H._parsePackedSpriteAndMovePlayhead(d,b,c)}};H._parsePackedSpriteAndMovePlayhead=
function(a,b,c){for(var d=[],e;!(e=b.shift(),d.push(pc.rtrim(e)),-1<e.indexOf("index:")););H._addPackedSprite(d[0],a,new fo(d),c)};H._addPackedSprite=function(a,b,c,d){var e=H._spritesheets;if(null!=K[a]?e.existsReserved(a):e.h.hasOwnProperty(a))e=H._spritesheets,(null!=K[a]?e.getReserved(a):e.h[a]).dispose();e=H._spritesheets;b=new go(b,c);null!=K[a]?e.setReserved(a,b):e.h[a]=b;d.spritesheets.push(a)};H.hasTexture=function(a){null==a&&(a="");return null==a||""==a?!1:H._hasAsset(a)};H.hasSound=function(a){null==
a&&(a="");return null==a||""==a?!1:H._hasAsset(a)};H.hasXML=function(a){null==a&&(a="");return null==a||""==a?!1:H._hasAsset(a)};H._hasAsset=function(a){var b=H._spritesheets;if(null!=K[a]?b.existsReserved(a):b.h.hasOwnProperty(a))return!0;b=H._assets;return null!=K[a]?b.existsReserved(a):b.h.hasOwnProperty(a)};H.getPackForAsset=function(a){var b=H._assets;if(!1==(null!=K[a]?b.existsReserved(a):b.h.hasOwnProperty(a)))return null;var b=H._packs,c=H._assets,a=null!=K[a]?c.getReserved(a):c.h[a];return(null!=
K[a]?b.getReserved(a):b.h[a]).pack};H.getTexture=function(a){if(!1==H.hasTexture(a))return null;var b=H._spritesheets;if(null!=K[a]?b.existsReserved(a):b.h.hasOwnProperty(a))b=H._spritesheets,a=(null!=K[a]?b.getReserved(a):b.h[a]).atlas;b=H._assets;if(!1==(null!=K[a]?b.existsReserved(a):b.h.hasOwnProperty(a)))return null;var b=H._packs,c=H._assets,c=null!=K[a]?c.getReserved(a):c.h[a];return(null!=K[c]?b.getReserved(c):b.h[c]).pack.getTexture(a)};H.getSpriteRect=function(a){if(null==a||""==a)return null;
var b=H._spritesheets;if(!1==(null!=K[a]?b.existsReserved(a):b.h.hasOwnProperty(a)))return null;b=H._spritesheets;return(null!=K[a]?b.getReserved(a):b.h[a]).rect};H.getSound=function(a){if(!1==H.hasSound(a))return null;var b=H._packs,c=H._assets,c=null!=K[a]?c.getReserved(a):c.h[a];return(null!=K[c]?b.getReserved(c):b.h[c]).pack.getSound(a)};H.getFile=function(a){if(!1==H._hasAsset(a))return null;var b=H._packs,c=H._assets,c=null!=K[a]?c.getReserved(a):c.h[a];return(null!=K[c]?b.getReserved(c):b.h[c]).pack.getFile(a)};
H.getXML=function(a){if(!1==H.hasXML(a))return null;a=S.parse(H.getFile(a).toString());return new lk(a.firstElement())};H.allConfig=function(){for(var a=[],b=0,c=lp.allConfig;b<c.length;){var d=c[b];++b;a.push(H.getXML(d))}return a};H.getFont=function(a,b,c){null==c&&(c=-1);null==b&&(b=!0);var d;null==a||""==a?d=!0:(d=H._assets,d=!1==(null!=K[a]?d.existsReserved(a):d.h.hasOwnProperty(a)));if(d)return H.getFont(Fc.defaultFont);if(-1==c){if(!1==b)return c=H._packs,d=H._assets,d=null!=K[a]?d.getReserved(a):
d.h[a],new Vg((null!=K[d]?c.getReserved(d):c.h[d]).pack,a);c=H._fontCache;if(!1==(null!=K[a]?c.existsReserved(a):c.h.hasOwnProperty(a)))c=H._fontCache,d=H._packs,b=H._assets,b=null!=K[a]?b.getReserved(a):b.h[a],d=new Vg((null!=K[b]?d.getReserved(b):d.h[b]).pack,a),null!=K[a]?c.setReserved(a,d):c.h[a]=d;c=H._fontCache;return null!=K[a]?c.getReserved(a):c.h[a]}d=a+c;if(!1==b)return d=H._packs,b=H._assets,b=null!=K[a]?b.getReserved(a):b.h[a],new ki((null!=K[b]?d.getReserved(b):d.h[b]).pack,a,c);b=H._fontCache;
if(!1==(null!=K[d]?b.existsReserved(d):b.h.hasOwnProperty(d))){var b=H._fontCache,e=H._packs,f=H._assets,f=null!=K[a]?f.getReserved(a):f.h[a],a=new ki((null!=K[f]?e.getReserved(f):e.h[f]).pack,a,c);null!=K[d]?b.setReserved(d,a):b.h[d]=a}a=H._fontCache;return null!=K[d]?a.getReserved(d):a.h[d]};var m=function(){};i["workinman.WMCloud"]=m;m.__name__=["workinman","WMCloud"];m.setBool=function(a,b){m.setValue(a,b)};m.getBool=function(a){var b=m._values;return null!=K[a]?b.getReserved(a):b.h[a]};m.setFloat=
function(a,b){m.setValue(a,b)};m.getFloat=function(a){var b=m._values;return null!=K[a]?b.getReserved(a):b.h[a]};m.setInt=function(a,b){m.setValue(a,b)};m.modifyInt=function(a,b){return Math.floor(m.modifyValue(a,b))};m.getInt=function(a){var b=m._values;return null!=K[a]?b.getReserved(a):b.h[a]};m.setString=function(a,b){m.setValue(a,b)};m.getString=function(a){var b=m._values;return null!=K[a]?b.getReserved(a):b.h[a]};m.setDefault=function(a,b){var c=m._defaults;null!=K[a]?c.setReserved(a,b):c.h[a]=
b;m.resetValue(a)};m.hasValue=function(a){var b=m._values;return null!=K[a]?b.existsReserved(a):b.h.hasOwnProperty(a)};m.setValue=function(a,b){var c=m._values;null!=K[a]?c.setReserved(a,b):c.h[a]=b;c=m._defaults;!1==(null!=K[a]?c.existsReserved(a):c.h.hasOwnProperty(a))&&m.setDefault(a,b);m._updateDisplays(a)};m.modifyValue=function(a,b){null==b&&(b=1);var c=m._values,d=m.getFloat(a)+b;null!=K[a]?c.setReserved(a,d):c.h[a]=d;m._updateDisplays(a);return m.getFloat(a)};m.resetValue=function(a){var b=
m._defaults,c=m._values,b=null!=K[a]?b.getReserved(a):b.h[a];null!=K[a]?c.setReserved(a,b):c.h[a]=b;m._updateDisplays(a)};m._updateDisplays=function(a){P.updateDisplay.dispatch(a)};var Hi=function(){};i["workinman.pooling.IStrictPoolable"]=Hi;Hi.__name__=["workinman","pooling","IStrictPoolable"];Hi.prototype={__class__:Hi,__properties__:{get_poolKey:"get_poolKey"}};var Oc=function(){};i["workinman.pooling.PoolStrictBase"]=Oc;Oc.__name__=["workinman","pooling","PoolStrictBase"];Oc.__interfaces__=[Hi];
Oc.prototype={instance:function(a,b){this._returnFunction=b;this._key=a;this.poolActivate();this.create();return this},get_poolKey:function(){return this._key},create:function(){},poolActivate:function(){this._disposed=!1},dispose:function(){this._disposed||(this._disposed=!0,this._returnFunction(this))},destroy:function(){this._returnFunction=null},__class__:Oc,__properties__:{get_poolKey:"get_poolKey"}};var Aa=function(){};i["workinman.math.WMPoint"]=Aa;Aa.__name__=["workinman","math","WMPoint"];
Aa.request=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);return Hc.requestObject(Aa).init(a,b,c)};Aa.__super__=Oc;Aa.prototype=z(Oc.prototype,{init:function(a,b,c){return this.to(a,b,c)},get_angle:function(){return 180*Math.atan2(this.y,this.x)/Math.PI},clean:function(){this.x=Math.round(1E3*this.x)/1E3;this.y=Math.round(1E3*this.y)/1E3;this.z=Math.round(1E3*this.z)/1E3;return this},to:function(a,b,c){null==c&&(c=0);this.x=a;this.y=b;this.z=c;this.calculateLength();return this},toPoint:function(a){this.x=
a.x;this.y=a.y;this.z=a.z;this.calculateLength();return this},add:function(a,b,c){null==c&&(c=0);this.x+=a;this.y+=b;this.z+=c;this.calculateLength();return this},addPoint:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.calculateLength();return this},addCopy:function(a,b,c){null==c&&(c=0);return Aa.request(this.x+a,this.y+b,this.z+c)},addPointCopy:function(a){return Aa.request(this.x+a.x,this.y+a.y,this.z+a.z)},subtract:function(a,b,c){null==c&&(c=0);this.x-=a;this.y-=b;this.z-=c;this.calculateLength();
return this},subtractScalar:function(a){a=this._length-a;Fd.sign(this._length)!=Fd.sign(a)&&(a=0);this.set_length(a);return this},subtractPoint:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;this.calculateLength();return this},subtractCopy:function(a,b,c){null==c&&(c=0);return Aa.request(this.x-a,this.y-b,this.z-c)},subtractPointCopy:function(a){return Aa.request(this.x-a.x,this.y-a.y,this.z-a.z)},multiply:function(a){this.x*=a;this.y*=a;this.z*=a;this.clean();this.calculateLength();return this},
multiplyCopy:function(a){return Aa.request(this.x*a,this.y*a,this.z*a)},divide:function(a){this.x/=a;this.y/=a;this.z/=a;this.clean();this.calculateLength();return this},divideCopy:function(a){return Aa.request(this.x/a,this.y/a,this.z/a)},reverse:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},copy:function(){return Aa.request(this.x,this.y,this.z)},copyAndResize:function(a){return 0==a?Aa.request(0,0):this.multiplyCopy(a/this._length)},equals:function(a){return this.x==a.x&&
this.y==a.y?this.z==a.z:!1},get_length:function(){return this._length},set_length:function(a){if(0==this._length||0>=a)return this.to(0,0),this._length;this.multiply(a/this._length);return this._length},reverseCopy:function(){return Aa.request(-1*this.x,-1*this.y,-1*this.z)},normalize:function(){if(0==this._length)return this;this.x/=this._length;this.y/=this._length;this.z/=this._length;this.calculateLength();return this},normalizeTo:function(a){this.set_length(a);return this},normalizeCopy:function(){return 0==
this._length?Aa.request(0,0,0):Aa.request(this.x/this._length,this.y/this._length,this.z/this._length)},normalizeCopyTo:function(a){if(0==this._length)return Aa.request(0,0,0);this._workFloat=a/this._length;return Aa.request(this.x*this._workFloat,this.y*this._workFloat,this.z*this._workFloat)},pseudoCross:function(a){a.to(this.y,-this.x,this.z);return this},calculateLength:function(){this._length=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return this},rotate:function(a){a*=Math.PI/180;
this._workFloat=this.x*Math.cos(a)-this.y*Math.sin(a);this.y=this.y*Math.cos(a)+this.x*Math.sin(a);this.x=this._workFloat;return this},rotateTo:function(a){this.rotate(a-this.get_angle());return this},getAngleBetween:function(a){return 0==a.get_length()||0==this.get_length()?0:180/Math.PI*Math.acos((a.x*this.x+a.y*this.y)/(a.get_length()*this.get_length()))},rotateCopy:function(a){var b=Math.cos(a*Math.PI/180),a=Math.sin(a*Math.PI/180);return Aa.request(this.x*b-this.y*a,this.x*a-this.y*b)},get_normalizedMagnitude:function(){var a=
this.normalizeCopy(),b=Math.sqrt(a.x*a.x+a.y*a.y);a.dispose();return b},toString:function(){return"{ WMPoint : "+this.x+" , "+this.y+" , "+this.z+" , len: "+this._length+"  }"},dot:function(a){return this.x*a.x+this.y*a.y},__class__:Aa,__properties__:z(Oc.prototype.__properties__,{get_normalizedMagnitude:"get_normalizedMagnitude",set_length:"set_length",get_length:"get_length",get_angle:"get_angle"})});var Hc=function(){};i["workinman.WMPool"]=Hc;Hc.__name__=["workinman","WMPool"];Hc._initPool=function(a,
b,c,d){null==d&&(d=-1);var e=Hc._pools;if(!0!=(null!=K[a]?e.existsReserved(a):e.h.hasOwnProperty(a)))null==c&&(c=bg.NONE),e=Hc._pools,b=new ho(b,c,d),null!=K[a]?e.setReserved(a,b):e.h[a]=b};Hc.requestObject=function(a,b,c){null==c&&(c=-1);var d=ec.getClassName(a);Hc._testPool(d,a,b,c);b=Hc._pools;b=null!=K[d]?b.getReserved(d):b.h[d];Hc._logCreate(d,b);if(0<b.get_numPooled())a=b.givePool(),a.poolActivate();else{b.incrementCreated();if(0<b.get_cap()&&b.get_created()>b.get_cap())throw new h("Too many instances of "+
L.string(a)+" allocated - currently at "+b.get_created());a=ec.createEmptyInstance(a).instance(d,Hc._returnObject)}return a};Hc._logCreate=function(a,b){switch(b.get_log()[1]){case 2:b.get_numPooled()}};Hc._returnObject=function(a){var b=Hc._pools,c=a.get_poolKey();if(!1!=(null!=K[c]?b.existsReserved(c):b.h.hasOwnProperty(c)))b=Hc._pools,c=a.get_poolKey(),b=null!=K[c]?b.getReserved(c):b.h[c],b.poolObject(a),Hc._logReturn(a.get_poolKey(),b)};Hc._logReturn=function(a,b){b.get_log()};Hc._testPool=function(a,
b,c,d){null==d&&(d=-1);var e=Hc._pools;!1==(null!=K[a]?e.existsReserved(a):e.h.hasOwnProperty(a))&&Hc._initPool(a,b,c,d)};Hc.tracePoolReport=function(){for(var a="\nPool Report:\n\n",b=0,c=Hc._pools.keys();c.hasNext();){var d=c.next(),a=a+("\t"+d+"\n"),b=Hc._pools,b=(null!=K[d]?b.getReserved(d):b.h[d]).get_created(),e=Hc._pools,b=b-(null!=K[d]?e.getReserved(d):e.h[d]).get_numPooled(),e=Hc._pools,e="\t\tTotal Created: "+(null!=K[d]?e.getReserved(d):e.h[d]).get_created()+" \t\tPool: ",f=Hc._pools,e=
e+(null!=K[d]?f.getReserved(d):f.h[d]).get_numPooled()+" \t\t\tLoose: "+b+" \t\t\tChange: ",f=Hc._pools,a=a+(e+(b-(null!=K[d]?f.getReserved(d):f.h[d]).get_loose())),e=Hc._pools;(null!=K[d]?e.getReserved(d):e.h[d]).set_loose(b);a+="\n"}};var bg=i["workinman.pooling.LOG_LEVEL"]={__ename__:["workinman","pooling","LOG_LEVEL"],__constructs__:["NONE","NO_STACK","NEW_STACK","ALL_STACK"]};bg.NONE=["NONE",0];bg.NONE.toString=r;bg.NONE.__enum__=bg;bg.NO_STACK=["NO_STACK",1];bg.NO_STACK.toString=r;bg.NO_STACK.__enum__=
bg;bg.NEW_STACK=["NEW_STACK",2];bg.NEW_STACK.toString=r;bg.NEW_STACK.__enum__=bg;bg.ALL_STACK=["ALL_STACK",3];bg.ALL_STACK.toString=r;bg.ALL_STACK.__enum__=bg;var ho=function(a,b,c){this._pool=[];this._class=a;this._log=b;this._created=this._max=0;this._cap=c;this._loose=0};i["workinman.pooling.PoolTracker"]=ho;ho.__name__=["workinman","pooling","PoolTracker"];ho.prototype={get_log:function(){return this._log},get_numPooled:function(){return this._pool.length},get_created:function(){return this._created},
get_cap:function(){return this._cap},get_loose:function(){return this._loose},set_loose:function(a){this._loose=a;return this.get_loose()},incrementCreated:function(){this._created++},poolObject:function(a){this._pool.push(a);var a=this._max,b=this._pool.length;this._max=a>b?a:b},givePool:function(){return this._pool.pop()},__class__:ho,__properties__:{set_loose:"set_loose",get_loose:"get_loose",get_cap:"get_cap",get_created:"get_created",get_numPooled:"get_numPooled",get_log:"get_log"}};var dm=function(a){this.lastPos=
Aa.request();this.line=lf.request();this.swipe=yc.NONE;this.down=!1;this.fresh=!0;this.id=a;this.disposed=this.consumed=!1};i["workinman.input.Pointer"]=dm;dm.__name__=["workinman","input","Pointer"];dm.prototype={dispose:function(){this.disposed=!0;this.lastPos.dispose();this.lastPos=null;this.line.dispose();this.swipe=this.line=null},get_originPos:function(){return this.line.get_p0()},get_currentPos:function(){return this.line.get_p1()},begin:function(a,b){this.line.toFloats(a,b,a,b);this.lastPos.to(a,
b);this.phase=Gb.DOWN;this.fresh=this.down=!0;this.consumed=!1;this.swipe=yc.NONE},move:function(a,b){this._updateInfo(a,b);this.phase!=Gb.UP&&!this.fresh&&(this.fresh=!0,this.phase=Gb.MOVED)},stop:function(){this.phase=Gb.STOPPED},end:function(a,b){this._updateInfo(a,b);this.fresh=!0;this.phase=Gb.UP;this.down=!1},_updateInfo:function(a,b){this.lastPos.toPoint(this.line.get_p1());this.line.endTo(a,b,0);var c=this.line.get_p0().x-this.line.get_p1().x,d=this.line.get_p0().y-this.line.get_p1().y;this.swipe=
30<=Math.abs(c)&&30>Math.abs(d)?0<c?yc.LEFT:yc.RIGHT:30<=Math.abs(d)&&30>Math.abs(c)?0<d?yc.UP:yc.DOWN:yc.NONE},__class__:dm,__properties__:{get_currentPos:"get_currentPos",get_originPos:"get_originPos"}};var lf=function(){};i["workinman.math.WMLine"]=lf;lf.__name__=["workinman","math","WMLine"];lf.__interfaces__=[Hi];lf.request=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);return Hc.requestObject(lf).init(a,b,c,d)};lf.__super__=Oc;lf.prototype=z(Oc.prototype,{init:function(a,
b,c,d){this._p0=Aa.request();this._p1=Aa.request();this._normal=Aa.request();this._vector=Aa.request();this._parametricDenom=Aa.request();this.toFloats(a,b,c,d);this._calcProperties();return this},dispose:function(){this._p0.dispose();this._p0=null;this._p1.dispose();this._p1=null;this._normal.dispose();this._normal=null;this._vector.dispose();this._vector=null;this._parametricDenom.dispose();this._parametricDenom=null;Oc.prototype.dispose.call(this)},get_p0:function(){return this._p0},get_p1:function(){return this._p1},
get_slope:function(){return this._slope},get_yIntercept:function(){return this._yIntercept},get_normal:function(){return this._normal},get_vector:function(){return this._vector},get_center:function(){return Aa.request(this._p0.x+this._vector.x/2,this._p0.y+this._vector.y/2)},get_centerX:function(){return this._p0.x+this._vector.x/2},get_centerY:function(){return this._p0.y+this._vector.y/2},get_parametricDenom:function(){return this._parametricDenom},get_length:function(){return this._length},set_length:function(a){if(0==
this.get_length())return this._length;this._p1.to(this._p0.x+this._vector.x*(a/this.get_length()),this._p0.y+this._vector.y*(a/this.get_length()));this._calcProperties();return this._length},recalculate:function(){this._calcProperties()},getNewPoint:function(a,b){null==b&&(b=Aa.request());b.to(this.get_p0().x+this._vector.x*a,this.get_p0().y+this._vector.y*a);return b},equals:function(a){return a.get_p0().equals(this.get_p0())?a.get_p1().equals(this.get_p1()):!1},flip:function(){var a=this._p0.copy();
this._p0.toPoint(this._p1);this._p1.toPoint(a);a.dispose();this._calcProperties()},clean:function(){this._p0.clean();this._p1.clean();this._calcProperties()},copy:function(){return lf.request().to(this._p0,this._p1)},to:function(a,b){this._p0.toPoint(a);this._p1.toPoint(b);this._calcProperties();return this},toLine:function(a){this._p0.toPoint(a.get_p0());this._p1.toPoint(a.get_p1());this._calcProperties();return this},toFloats:function(a,b,c,d){this._p0.to(a,b);this._p1.to(c,d);this._calcProperties();
return this},originTo:function(a,b,c){null==c&&(c=0);this._p0.to(a,b,c);this._calcProperties();return this},originToPoint:function(a){this._p0.toPoint(a);this._calcProperties()},endTo:function(a,b,c){null==c&&(c=0);this._p1.to(a,b,c);this._calcProperties()},endToPoint:function(a){this._p1.toPoint(a);this._calcProperties()},rotate:function(a){this._vector.rotateTo(a);this._p1.to(this._p0.x+this._vector.x,this._p0.y+this._vector.y);this._calcProperties();this._calcProperties()},rotateTo:function(a){this._vector.rotateTo(a);
this._p1.to(this._p0.x+this._vector.x,this._p0.y+this._vector.y);this._calcProperties()},shiftOrigin:function(a){var b=this._vector.reverseCopy();b.set_length(a);this._p0.addPoint(b);b.dispose();this._calcProperties()},shiftEnd:function(a){this.set_length(this.get_length()+a)},_calcProperties:function(){this._length=Math.round(1E3*Math.sqrt((this._p0.x-this._p1.x)*(this._p0.x-this._p1.x)+(this._p0.y-this._p1.y)*(this._p0.y-this._p1.y)))/1E3;this._vector.to(this.get_p1().x-this.get_p0().x,this.get_p1().y-
this.get_p0().y);this._slope=this._vector.y/this._vector.x;0==this.get_vector().x&&(this._slope=1E5);this._yIntercept=this.get_p0().y-this._slope*this.get_p0().x;this._parametricDenom.to(this.get_p1().x-this.get_p0().x,this.get_p1().y-this.get_p0().y);this._vector.pseudoCross(this._normal);this._normal.normalize()},testLineDot:function(a){return this._vector.dot(a.get_normal())},projectOntoLine:function(a){var b=a.get_vector().dot(this.get_vector().normalizeCopy());return lf.request().to(a.get_p0(),
a.get_p1().addPointCopy(this._normal.copyAndResize(Math.sqrt(a.get_length()*a.get_length()-b*b))))},testLineIntercept:function(a,b){null==b&&(b=new em(!1));this._inverseDeterminate=1/(-1*this._slope- -1*a.get_slope());b.set_success(!0);var c=Aa.request((-1*a.get_yIntercept()- -1*this._yIntercept)*this._inverseDeterminate,(a.get_slope()*this._yIntercept-this.get_slope()*a.get_yIntercept())*this._inverseDeterminate,0);b.set_result(c);c.dispose();return b},testLineSegmentIntercept:function(a,b,c){var d=
-a.get_vector().x*this._vector.y+this._vector.x*a.get_vector().y,e=this.get_p0().x-a.get_p0().x,f=this.get_p0().y-a.get_p0().y,b=(-this._vector.y*e+this._vector.x*f)/d,a=(a.get_vector().x*f-a.get_vector().y*e)/d;null==c&&(c=new em(!1));c.set_success(!1);0<=b&&1>=b&&0<=a&&1>=a&&(c.set_success(!0),a=Aa.request(this.get_p0().x+a*this._vector.x,this.get_p0().y+a*this._vector.y),c.set_result(a),a.dispose());return c},testPointSegmentIntercept:function(a){this._xSegmentResult=0==this._parametricDenom.x?
0:(a.x-this.get_p0().x)/this._parametricDenom.x;this._ySegmentResult=0==this._parametricDenom.y?0:(a.y-this.get_p0().y)/this._parametricDenom.y;return 0<=this._xSegmentResult&&1>=this._xSegmentResult&&0<=this._ySegmentResult&&1>=this._ySegmentResult?!0:!1},toString:function(){return"[WMLine] ("+this._p0.x+", "+this._p0.y+", "+this._p0.z+") ~> ("+this._p1.x+", "+this._p1.y+", "+this._p1.z+") / Len: "+this._length},__class__:lf,__properties__:z(Oc.prototype.__properties__,{set_length:"set_length",get_length:"get_length",
get_parametricDenom:"get_parametricDenom",get_centerY:"get_centerY",get_centerX:"get_centerX",get_center:"get_center",get_vector:"get_vector",get_normal:"get_normal",get_yIntercept:"get_yIntercept",get_slope:"get_slope",get_p1:"get_p1",get_p0:"get_p0"})});var yc=i["workinman.input.INPUT_SWIPE"]={__ename__:["workinman","input","INPUT_SWIPE"],__constructs__:["NONE","LEFT","RIGHT","UP","DOWN"]};yc.NONE=["NONE",0];yc.NONE.toString=r;yc.NONE.__enum__=yc;yc.LEFT=["LEFT",1];yc.LEFT.toString=r;yc.LEFT.__enum__=
yc;yc.RIGHT=["RIGHT",2];yc.RIGHT.toString=r;yc.RIGHT.__enum__=yc;yc.UP=["UP",3];yc.UP.toString=r;yc.UP.__enum__=yc;yc.DOWN=["DOWN",4];yc.DOWN.toString=r;yc.DOWN.__enum__=yc;var w=function(){};i["workinman.WMInput"]=w;w.__name__=["workinman","WMInput"];w.setDelegateUnlockWebAudio=function(a){w._delegateUnlockWebAudio=a};w._delegateDispatch=function(a,b){null!=w._delegateUnlockWebAudio&&!1==b&&(w._delegateUnlockWebAudio(),w._delegateUnlockWebAudio=null);!1!=w.enabled&&w.eventInput.dispatch(a,b)};w.update=
function(){if(!1!=w.enabled){w._findGamepad();null!=w._gamepad&&(w._gamepad.update(),w.leftStick.to(w._gamepad.leftX,w._gamepad.leftY),w.rightStick.to(w._gamepad.rightX,w._gamepad.rightY));for(var a=0,b=w._inputTrackers;a<b.length;){var c=b[a];++a;c.updateStatus()}w.pointer.fresh=!1;for(a=w.multiTouch.length;0<a--;)b=w.multiTouch[a],!1==b.fresh&&(!1==b.down?(b.dispose(),w.multiTouch.splice(a,1)):b.stop()),b.fresh=!1}};w._findGamepad=function(){if(t.isFunction((Qp=window.navigator,v(Qp,Qp.getGamepads))))for(var a=
0,b=window.navigator.getGamepads();a<b.length;){var c=b[a];++a;if(null!=c&&-1<c.id.indexOf("Xbox 360 Controller")){null==w._gamepad?w._gamepad=new fm(c):w._gamepad.setGamepad(c);break}}};w.prime=function(a){w._root=a;ma._platform.getKeyboard().down.connect(w._onKeyDown);ma._platform.getKeyboard().up.connect(w._onKeyUp);ma._platform.getTouch().get_supported()&&(ma._platform.getTouch().down.connect(w._onTouchDown),ma._platform.getTouch().move.connect(w._onTouchMove),ma._platform.getTouch().up.connect(w._onTouchUp));
ma._platform.getPointer().down.connect(w._onPointerDown);ma._platform.getPointer().move.connect(w._onPointerMove);ma._platform.getPointer().up.connect(w._onPointerUp);ma._platform.getMouse().scroll.connect(w._onScrollWheel)};w.hitTest=function(a,b){return w._root.hitTest(a,b)};w._onScrollWheel=function(a){w.eventMouseWheel.dispatch(a)};w.registerInput=function(a,b,c,d){w._createOrGetInputTracker(a).setKeys(b,c,d)};w._createOrGetInputTracker=function(a){for(var b=0,c=w._inputTrackers;b<c.length;){var d=
c[b];++b;if(d.type==a)return d}a=new io(a,w._fireKeyEvent,w._isVirtualDown,w._isControllerDown);w._inputTrackers.push(a);return a};w._fireKeyEvent=function(a,b){w._delegateDispatch(a,b)};w._onKeyDown=function(a){w.eventKey.dispatch(a.key,!0)};w._onKeyUp=function(a){w.eventKey.dispatch(a.key,!1)};w.onVirtualDown=function(a){for(var b=0,c=w._virtualDown;b<c.length;){var d=c[b];++b;if(d==a)return}w._virtualDown.push(a)};w.onVirtualUp=function(a){for(var b=w._virtualDown.length;0<b--;)if(w._virtualDown[b]==
a){w._virtualDown.splice(b,1);break}};w._isVirtualDown=function(a){for(var b=0,c=w._virtualDown;b<c.length;){var d=c[b];++b;if(d==a)return!0}return!1};w.onControllerDown=function(a){for(var b=0,c=w._controllerDown;b<c.length;){var d=c[b];++b;if(d==a)return}w._controllerDown.push(a)};w.onControllerUp=function(a){for(var b=w._controllerDown.length;0<b--;)if(w._controllerDown[b]==a){w._controllerDown.splice(b,1);break}};w._isControllerDown=function(a){for(var b=0,c=w._controllerDown;b<c.length;){var d=
c[b];++b;if(d==a)return!0}return!1};w._onTouchDown=function(a){w._doTouchDown(a.id,a.viewX,a.viewY)};w._onTouchMove=function(a){w._doTouchMove(a.id,a.viewX,a.viewY)};w._onTouchUp=function(a){w._doTouchUp(a.id,a.viewX,a.viewY)};w._doTouchDown=function(a,b,c){var d=w._findTouch(a);null==d&&(d=new dm(a),w.multiTouch.push(d));d.begin(b,c)};w._doTouchMove=function(a,b,c){a=w._findTouch(a);null!=a&&a.move(b,c)};w._doTouchUp=function(a,b,c){a=w._findTouch(a);null!=a&&a.end(b,c)};w._findTouch=function(a){for(var b=
0,c=w.multiTouch;b<c.length;){var d=c[b];++b;if(d.id==a)return d}return null};w._onPointerDown=function(a){w.pointer.begin(a.viewX,a.viewY);!1==ma._platform.getTouch().get_supported()&&w._doTouchDown(0,a.viewX,a.viewY);w._delegateDispatch($.POINTER,!0)};w._onPointerMove=function(a){w.pointer.move(a.viewX,a.viewY);!1==ma._platform.getTouch().get_supported()&&w._doTouchMove(0,a.viewX,a.viewY);w._delegateDispatch($.POINTER_MOVE,!0)};w._onPointerUp=function(a){w.pointer.end(a.viewX,a.viewY);!1==ma._platform.getTouch().get_supported()&&
w._doTouchUp(0,a.viewX,a.viewY);w._delegateDispatch($.POINTER,!1)};var yg=i["workinman.LOCALIZATION_FORMAT"]={__ename__:["workinman","LOCALIZATION_FORMAT"],__constructs__:["TRADITIONAL_XML","STRINGS_JS","STRINGS_JSON"]};yg.TRADITIONAL_XML=["TRADITIONAL_XML",0];yg.TRADITIONAL_XML.toString=r;yg.TRADITIONAL_XML.__enum__=yg;yg.STRINGS_JS=["STRINGS_JS",1];yg.STRINGS_JS.toString=r;yg.STRINGS_JS.__enum__=yg;yg.STRINGS_JSON=["STRINGS_JSON",2];yg.STRINGS_JSON.toString=r;yg.STRINGS_JSON.__enum__=yg;var jo=
function(a,b,c,d,e,f,g){this.id=a;this.string=this._sanitizeString(b);this.fontName=c;this.scale=d;this.offsetX=e;this.offsetY=f;this.subtitleTime=g};i["workinman.localization.LocalizationData"]=jo;jo.__name__=["workinman","localization","LocalizationData"];jo.prototype={dispose:function(){this.fontName=this.string=this.id=null},_sanitizeString:function(a){a=pc.replace(a,"<br>","\n");return a=pc.replace(a,"\\n","\n")},__class__:jo};var Fc=function(){};i["workinman.WMLocalize"]=Fc;Fc.__name__=["workinman",
"WMLocalize"];Fc.parseLocalization=function(a){null==a&&(a="");if(null==a||""==a)a="translation.xml";var b=H.getXML(a),a=yg.TRADITIONAL_XML;b.has.resolve("format")&&(a=ec.createEnum(yg,b.att.resolve("format")));Fc.defaultFont=b.att.resolve("defaultFont");Fc.rtl=!1;b.has.resolve("rtl")&&(Fc.rtl="true"==b.att.resolve("rtl"));Fc.subtitlesEnabled=!1;b.has.resolve("sub")&&(Fc.subtitlesEnabled="true"==b.att.resolve("sub"));switch(a[1]){case 0:a="";for(b=b.nodes.resolve("string").h;null!=b;){var a=b.item,
b=b.next,c=a,a=c.att.resolve("id");Fc._localizedData.exists(a)||Fc._addLocalizationData(a,c.get_innerData(),c.has.resolve("fontName")?c.att.resolve("fontName"):Fc.defaultFont,c.has.resolve("fontScale")?c.att.resolve("fontScale"):"1",c.has.resolve("offsetX")?c.att.resolve("offsetX"):"0",c.has.resolve("offsetY")?c.att.resolve("offsetY"):"0",c.has.resolve("subTime")?c.att.resolve("subTime"):"-1")}break;case 2:for(a=b.nodes.resolve("json").h;null!=a;)for(var b=a.item,a=a.next,b=JSON.parse(H.getFile(b.get_innerData()).toString()),
c=0,d=t.fields(b.strings);c<d.length;){var e=d[c];++c;var f=t.field(b.strings,e);null!=f.value?Fc._addLocalizationData(e,f.value,null==f.fontName?"":f.fontName,null==f.fontScale?"1":f.fontScale,null==f.offsetX?"0":f.offsetX,null==f.offsetY?"0":f.offsetY,null==f.subTime?"-1":f.subTime):Fc._addLocalizationData(e,f,"","1","0","0","-1")}}};Fc._addLocalizationData=function(a,b,c,d,e,f,g){var j=Fc._localizedData;if(null!=K[a]?j.existsReserved(a):j.h.hasOwnProperty(a))j=Fc._localizedData,(null!=K[a]?j.getReserved(a):
j.h[a]).dispose();j=Fc._localizedData;b=new jo(a,b,c,parseFloat(d),parseFloat(e),parseFloat(f),parseFloat(g));null!=K[a]?j.setReserved(a,b):j.h[a]=b};Fc.getLocalizeData=function(a){var b=Fc._localizedData;if(!1==(null!=K[a]?b.existsReserved(a):b.h.hasOwnProperty(a)))return null;b=Fc._localizedData;return null!=K[a]?b.getReserved(a):b.h[a]};var M=function(){};i["workinman.WMRandom"]=M;M.__name__=["workinman","WMRandom"];M.random=function(a){null==a&&(a="");if(null==a||""==a)return Math.random();var b=
M._seeds;if(null==(null!=K[a]?b.getReserved(a):b.h[a]))return Math.random();b=M._seeds;return(null!=K[a]?b.getReserved(a):b.h[a]).random()};M.randomFloat=function(a,b,c){null==c&&(c="");return a+M.random(c)*(b-a)};M.randomInt=function(a,b,c){null==c&&(c="");return Math.floor(M.randomFloat(a,b+1,c))};M.randomObject=function(a,b){null==b&&(b="");return a[M.randomInt(0,a.length-1,b)]};M.shuffleArray=function(a,b){null==b&&(b="");for(var c,d,e=a.length;0<=--e;)d=Math.floor(M.random(b)*(e+1)),c=a[d],a[d]=
a[e],a[e]=c;return a};var ci=function(){};i["workinman.WMSaving"]=ci;ci.__name__=["workinman","WMSaving"];ci.dataLoad=function(a){var a=ci._getLocal(a),b=a.data;a.dispose();return b};ci.dataSave=function(a,b){var c=ci._getLocal(a);c.data=b;c.flush();c.dispose()};ci._getLocal=function(a){var b=new ko(a);try{var c=window.localStorage.getItem(a);null!=c&&""!=c&&(b.data=Se.run(c))}catch(d){}return b};var Jg=i["workinman.sound.VO_STATUS"]={__ename__:["workinman","sound","VO_STATUS"],__constructs__:["STOPPED",
"PLAYING","PAUSED"]};Jg.STOPPED=["STOPPED",0];Jg.STOPPED.toString=r;Jg.STOPPED.__enum__=Jg;Jg.PLAYING=["PLAYING",1];Jg.PLAYING.toString=r;Jg.PLAYING.__enum__=Jg;Jg.PAUSED=["PAUSED",2];Jg.PAUSED.toString=r;Jg.PAUSED.__enum__=Jg;var Gi=function(){this._objectTrackers=[]};i["workinman.tween.Tweener"]=Gi;Gi.__name__=["workinman","tween","Tweener"];Gi.prototype={dispose:function(){for(var a=0,b=this._objectTrackers;a<b.length;){var c=b[a];++a;c.dispose()}this._objectTrackers=null},update:function(a){for(var b=
this._objectTrackers.length;0<b--;){var c=this._objectTrackers[b];c.update(a);c.get_isComplete()&&(c.dispose(),this._objectTrackers.splice(b,1))}},hasTween:function(a){if(null==this._objectTrackers)return!1;for(var b=0,c=this._objectTrackers;b<c.length;){var d=c[b];++b;if(d.target==a)return!0}return!1},tween:function(a,b){if(null==this._objectTrackers)return new gm(a,b);null==a.overwrite&&(a.overwrite=!1);null==a.thread&&(a.thread="def");for(var c=new gm(a,b),d=0,e=this._objectTrackers;d<e.length;){var f=
e[d];++d;if(f.target==a.target)return a.overwrite&&f.stopThread(a.thread),f.queueStep(c,a.thread),c}d=new lo(a.target);this._objectTrackers.push(d);d.queueStep(c,a.thread);return c},stopThread:function(a,b){if(null!=this._objectTrackers)for(var c=this._objectTrackers.length;0<c--;)if(this._objectTrackers[c].target==a){this._objectTrackers[c].stopThread(b);break}},stop:function(a){if(null!=this._objectTrackers)for(var b=this._objectTrackers.length;0<b--;)if(this._objectTrackers[b].target==a){this._objectTrackers[b].dispose();
this._objectTrackers.splice(b,1);break}},stopAllTweens:function(){if(null!=this._objectTrackers)for(;0<this._objectTrackers.length;)this._objectTrackers.pop().dispose()},__class__:Gi};var s=function(){};i["workinman.WMSound"]=s;s.__name__=["workinman","WMSound"];s.__properties__={set_muteAll:"set_muteAll"};s.set_muteAll=function(a){s.muteAll=a;s._toggleMute();return a};s._toggleMute=function(){s._getMuteState(s.muteMusic)?s.stopMusic():s.playMusic(s._musicId,s._musicGain);s._getMuteState(s.muteSfx)&&
s.stopAllSound();s._getMuteState(s.muteVo)&&s.stopVO()};s._setVOState=function(a){if(a!=s._stateVo){s._stateVo=a;switch(s._stateVo[1]){case 0:null!=s._music&&s._tween.tween({target:s._music,duration:0.15,overwrite:!0,ease:G.inOutQuad},{volume:1});break;case 1:null!=s._music&&s._tween.tween({target:s._music,duration:0.15,overwrite:!0,ease:G.inOutQuad},{volume:0.25})}s.eventVOStatus.dispatch(a)}};s._getMuteState=function(a){return!s.muteAll&&!s.muteSystem?a:!0};s.playMusic=function(a,b,c){null==c&&
(c=-1);null==b&&(b=1);null==a||""==a||s._musicId==a&&null!=s._music||(s._musicId=a,s._musicGain=b,s.stopMusic(c,s._finishPlayingMusic))};s._finishPlayingMusic=function(){s._music=s._playAudio(s._musicId,s._musicGain,null,!0,s.muteMusic)};s.stopMusic=function(a,b){null==a&&(a=-1);0<a&&null!=s._music?s._tween.tween({target:s._music,duration:a,overwrite:!0,ease:G.linear,complete:function(){s._disposeMusic();null!=b&&b()}},{volume:0}):(s._disposeMusic(),null!=b&&b())};s._disposeMusic=function(){null!=
s._music&&(s._music.dispose(),s._music=null)};s.playSound=function(a,b,c,d){null==d&&(d=!1);null==b&&(b=1);a=s._playAudio(a,b,c,d,s.muteSfx);if(null==a)return null;s._sound.push(a);return a};s.stopAllSound=function(){for(;0<s._sound.length;)s._sound.pop().dispose()};s.stopSound=function(a){for(var b=s._sound.length;0<b--;)s._sound[b].id==a&&(s._sound[b].dispose(),s._sound.splice(b,1))};s.stopVO=function(){for(;0<s._voQueue.length;)s._voQueue.pop().dispose();null!=s._vo&&(s._vo.dispose(),s._vo=null)};
s._playAudio=function(a,b,c,d,e){if(null==a||""==a||s._getMuteState(e))return null!=c&&c(),null;e=H.getSound(a);return null==e?(null!=c&&c(),null):d?new hm(a,e.loop(b),c):new hm(a,e.play(b),c)};s.update=function(a){s._tween.update(a);for(var b=s._sound.length;0<b--;){var c=s._sound[b];if(c.isComplete||c.disposed)c.dispose(),s._sound.splice(b,1)}if(null!=s._music&&(s._music.isComplete||s._music.disposed))s._music.dispose(),s._music=null;switch(s._stateVo[1]){case 0:case 2:s._checkVOQueue(a);break;
case 1:if(null!=s._vo&&(s._vo.isComplete||s._vo.disposed))s._vo.dispose(),s._vo=null;null==s._vo&&s._checkVOQueue(a)}};s._checkVOQueue=function(a){0<s._voQueue.length?(s._voQueue[0].delay-=a,0>s._voQueue[0].delay?(a=s._voQueue.shift(),s.subtitleQueue.push(a.localization),null==s._lastVO&&(s._lastVO=new mo(a.id,a.gain,a.call,a.delay,a.localization)),s._lastVO.copy(a),s._vo=s._playAudio(a.id,1,function(){null!=s._lastVO.call&&s._lastVO.call();s.subtitleQueue.shift()},!1,s.muteVo),a.dispose(),s._setVOState(Jg.PLAYING)):
s._setVOState(Jg.PAUSED)):s._setVOState(Jg.STOPPED)};var ha=function(){};i["workinman.WMTimer"]=ha;ha.__name__=["workinman","WMTimer"];ha.update=function(a){if(!ha._paused)for(var b=ha._timers.length;0<b--;)ha._timers[b].update(a),ha._timers[b].get_isComplete()&&(ha._timers[b].dispose(!0),ha._timers.splice(b,1))};ha.start=function(a,b,c){null==c&&(c="");null!=a&&ha._timers.push(new no(a,b,""==c?"def"+ha._uniqueInc++:c))};ha.stop=function(a,b){null==b&&(b=!1);for(var c=ha._timers.length;0<c--;)if(ha._timers[c].id==
a){ha._timers[c].dispose(b);ha._timers.splice(c,1);break}};var no=function(a,b,c){this.id=c;this._callback=a;this._timer=b;this.paused=!1};i["workinman.WMTimerData"]=no;no.__name__=["workinman","WMTimerData"];no.prototype={dispose:function(a){a&&this._fireCallback();this._callback=this.id=null},get_isComplete:function(){return 0>=this._timer},update:function(a){this.paused||(this._timer-=a,0>this._timer&&this._fireCallback())},_fireCallback:function(){if(null!=this._callback){var a=this._callback;
this._callback=null;a()}},__class__:no,__properties__:{get_isComplete:"get_isComplete"}};var Dh=function(){};i["workinman.WMUtils"]=Dh;Dh.__name__=["workinman","WMUtils"];Dh.trimUrl=function(a){if(""==a)return"";if(0>a.indexOf("http"))return"/"==a.charAt(0)&&(a=Z.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=Z.substr(a,b,a.length-b);return a=Dh.appendAssetsToUrl(a)};Dh.appendAssetsToUrl=function(a){if(0==a.length)return a;
"/"!=a.charAt(a.length-1)&&(a+="/");a.indexOf("/assets")<a.length-9&&(a+="assets/");return a};Dh.getExtension=function(a){if(null==a)return"";var b=a.lastIndexOf(".");if(0>b)return"";var c=a.lastIndexOf("?");return c>b?a.substring(b+1,c):a.substring(b+1,a.length)};Dh.removeExtension=function(a){var b=a.lastIndexOf(".");return 0>b?a:a.substring(0,b)};var co=function(a,b,c){this.packs=b;this.complete=a;this.delay=c};i["workinman.assets.LoadQueue"]=co;co.__name__=["workinman","assets","LoadQueue"];co.prototype=
{dispose:function(){this.complete=this.packs=null},__class__:co};var go=function(a,b){this.rect=b;this.atlas=a};i["workinman.assets.SpriteSheetDef"]=go;go.__name__=["workinman","assets","SpriteSheetDef"];go.prototype={dispose:function(){this.atlas=this.rect=null},__class__:go};var eo=function(a){this.pack=a;this.assets=[];this.spritesheets=[];this.flump=[]};i["workinman.assets.WMAssetPack"]=eo;eo.__name__=["workinman","assets","WMAssetPack"];eo.prototype={__class__:eo};var fh=function(a){this._animations=
[];this._queuedAnimations=[];this.eventAnimationComplete=ke._new();this._currentAnimDef=null;this._lastFrame=-1;this._currentFrame=0;this.currentAnimation="";this.fps=24;this._animationStopped=!0;this._loopComplete=!1;this._realFrame=0;fc.call(this,a)};i["workinman.display.AnimatedElement"]=fh;fh.__name__=["workinman","display","AnimatedElement"];fh.__super__=fc;fh.prototype=z(fc.prototype,{dispose:function(){for(var a=0,b=this._animations;a<b.length;){var c=b[a];++a;c.dispose()}this._currentAnimDef=
this._animations=null;this.clearQueue();a=0;for(b=this._queuedAnimations;a<b.length;)c=b[a],++a,c.dispose();this._queuedAnimations=null;this.eventAnimationComplete.dispose();this.currentAnimation=this.eventAnimationComplete=null;fc.prototype.dispose.call(this)},setFps:function(a){this.fps=a;return this},get_animationRatio:function(){return(this._currentFrame-this._currentAnimDef.startFrame)/(this._currentAnimDef.endFrame-this._currentAnimDef.endFrame)},set_animationRatio:function(a){this._newFrame=
Math.floor(a*(this._currentAnimDef.endFrame-this._currentAnimDef.startFrame)+this._currentAnimDef.startFrame);this._newFrame!=this._currentFrame&&this.set_animationFrame(this._newFrame);return this.get_animationRatio()},get_animationFrame:function(){return this._currentFrame|0},set_animationFrame:function(a){this._currentFrame=this._realFrame=a;this._setFrame(this._realFrame);this.stopAnimation();return this._currentFrame|0},get_isPlaying:function(){return""!=this.currentAnimation&&!0==this._doLoop()?
!1==this._animationStopped:!1},get_animationFrameRelative:function(){return this._currentFrame-this._currentAnimDef.startFrame|0},set_animationFrameRelative:function(a){this._currentFrame=this._currentAnimDef.startFrame+a;return this.get_animationFrameRelative()},get_frames:function(){return Math.floor(this._frames)},removeAnimation:function(a){for(var b=this._animations.length;0<b--;)this._animations[b].id==a&&(this._animations[b].dispose(),this._animations.splice(b,1))},animate:function(a,b,c){null==
c&&(c=!1);null==b&&(b=0);this.clearQueue();this._doAnimate(a,b,c);return this},_doAnimate:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);!(this.currentAnimation==a&&!1==c)&&null!=this._animations&&this.hasAnimation(a)&&(this._currentAnimDef=null,this._currentAnimDef=this._getAnimation(a),this._currentAnimDef.reverse?(this.reverse=!0,this._currentFrame=this._currentAnimDef.endFrame):(this.reverse=!1,this._currentFrame=this._currentAnimDef.startFrame),this.currentAnimation=a,this.setLoop(b),this._animationStopped=
!1,this._setFrame(this._currentFrame))},setLoop:function(a){this._currentLoop=a;this._flagLoop=0==a;return this},stopAnimation:function(){this._animationStopped=!0},startAnimation:function(){this._animationStopped=!1},_getAnimation:function(a){for(var b=0,c=this._animations;b<c.length;){var d=c[b];++b;if(d.id==a)return d}return null},hasAnimation:function(a){for(var b=0,c=this._animations;b<c.length;){var d=c[b];++b;if(d.id==a)return!0}return!1},queueAnimation:function(a,b,c){null==c&&(c=!1);null==
b&&(b=0);this._queuedAnimations.push(Ii.request(a,b,c));return this},clearQueue:function(){for(;0<this._queuedAnimations.length;)this._queuedAnimations.pop().dispose()},update:function(a){fc.prototype.update.call(this,a);this._runAnimation(a)},_doLoop:function(){return 0>=this._currentLoop?this._flagLoop:!0},_runAnimation:function(a){this.get_isPlaying()&&(this._currentFrame+=this.fps*a,Math.floor(this._currentFrame)>this._currentAnimDef.endFrame&&(this._currentFrame=this._currentAnimDef.startFrame+
(this._currentFrame-Math.floor(this._currentFrame)),this._loopComplete=!0),!0==this._loopComplete&&(this._loopComplete=!1,this._currentLoop--,!1==this._doLoop()&&(this._animationStopped=!0,this._currentFrame=this._currentAnimDef.endFrame,0<this._queuedAnimations.length?(this._doAnimate(this._queuedAnimations[0].get_name(),this._queuedAnimations[0].get_loops(),this._queuedAnimations[0].get_force()),this._queuedAnimations[0].dispose(),this._queuedAnimations.splice(0,1)):(this._onAnimationComplete(),
this.eventAnimationComplete.dispatch()))),this._realFrame=this.reverse?this._currentAnimDef.endFrame-(this._currentFrame-this._currentAnimDef.startFrame)+1:this._currentFrame,this._realFrame!=this._lastFrame&&this._setFrame(this._realFrame))},_setFrame:function(a){this.setAsset(this._currentAnimDef.frameIds[Math.floor(a-1)])},_onAnimationComplete:function(){},__class__:fh,__properties__:z(fc.prototype.__properties__,{get_frames:"get_frames",set_animationFrameRelative:"set_animationFrameRelative",
get_animationFrameRelative:"get_animationFrameRelative",get_isPlaying:"get_isPlaying",set_animationFrame:"set_animationFrame",get_animationFrame:"get_animationFrame",set_animationRatio:"set_animationRatio",get_animationRatio:"get_animationRatio"})});var ue=function(a){fh.call(this,a)};i["workinman.display.AnimatedElementFrames"]=ue;ue.__name__=["workinman","display","AnimatedElementFrames"];ue.__super__=fh;ue.prototype=z(fh.prototype,{addAnimation:function(a,b){this.removeAnimation(a);this._animations.push(Ji.request(a,
-1,-1,b));return this},_setFrame:function(a){this.setAsset(this._currentAnimDef.frameIds[Math.floor(a-1)])},__class__:ue});var Ji=function(){};i["workinman.display.AnimationDef"]=Ji;Ji.__name__=["workinman","display","AnimationDef"];Ji.__interfaces__=[Hi];Ji.request=function(a,b,c,d){null==c&&(c=-1);null==b&&(b=-1);return Hc.requestObject(Ji).init(a,b,c,d)};Ji.__super__=Oc;Ji.prototype=z(Oc.prototype,{create:function(){this.frameIds=[]},init:function(a,b,c,d){null==c&&(c=-1);null==b&&(b=-1);this.id=
a;this.reverse=!1;if(null!=d){for(a=0;a<d.length;)b=d[a],++a,this.frameIds.push(b);this.startFrame=1;this.endFrame=this.frameIds.length}else this.startFrame=b,this.endFrame=c,b>c&&(this.reverse=!0,this.startFrame=c,this.endFrame=b);return this},dispose:function(){for(;0<this.frameIds.length;)this.frameIds.pop();Oc.prototype.dispose.call(this)},destroy:function(){this.id=this.frameIds=null;Oc.prototype.destroy.call(this)},__class__:Ji});var Ii=function(){};i["workinman.display.AnimationQueue"]=Ii;
Ii.__name__=["workinman","display","AnimationQueue"];Ii.__interfaces__=[Hi];Ii.request=function(a,b,c){return Hc.requestObject(Ii).init(a,b,c)};Ii.__super__=Oc;Ii.prototype=z(Oc.prototype,{init:function(a,b,c){this._name=a;this._loops=b;this._force=c;return this},get_name:function(){return this._name},get_loops:function(){return this._loops},get_force:function(){return this._force},__class__:Ii,__properties__:z(Oc.prototype.__properties__,{get_force:"get_force",get_loops:"get_loops",get_name:"get_name"})});
var oo=function(a,b,c){this._worldRoot=a;this.worldCenterX=b;this.worldCenterY=c;this.focalLength=300;this.set_rotation(0);this.pos=Aa.request();this._scratchPoint=new Ih};i["workinman.display.Camera"]=oo;oo.__name__=["workinman","display","Camera"];oo.prototype={dispose:function(){this.pos.dispose();this._scratchPoint=this.pos=null},set_rotation:function(a){this.rotation=a;this._worldRoot.rotation=a;return this.rotation},getWorldPositionOfScreenPoint:function(a,b,c,d){this._worldRoot.get_viewMatrix().inverseTransform(a,
b,this._scratchPoint);a=1/(this.focalLength/(this.focalLength-(this.pos.z-c)));d.x=this.pos.x+(this.worldCenterX+(this._scratchPoint.x-this.worldCenterX)*a);d.y=this.pos.y+(this.worldCenterY+(this._scratchPoint.y-this.worldCenterY)*a);return d},__class__:oo,__properties__:{set_rotation:"set_rotation"}};var tk=function(a,b,c,d){null==d&&(d=!1);this._layerOrder=[];this._layers=new $c;this.root=a.addChild(new im(b,c,this._layers,this._layerOrder));this.camera=this.root.camera;this._defaultLayer="";this._enablePointer=
d};i["workinman.display.ElementManager"]=tk;tk.__name__=["workinman","display","ElementManager"];tk.prototype={dispose:function(){null!=this.root&&(this.root.doDelete=!0,this.root=null);this._defaultLayer=this._layerOrder=this._layers=null},addLayer:function(a,b){null==b&&(b=!1);var c=this._layers;if(null!=K[a]?c.existsReserved(a):c.h.hasOwnProperty(a))Z.remove(this._layerOrder,a);else{if(b||1>this._defaultLayer.length)this._defaultLayer=a;var c=this._layers,d=[];null!=K[a]?c.setReserved(a,d):c.h[a]=
d}this._layerOrder.push(a)},addElement:function(a,b){null==b&&null!=this._defaultLayer&&(b=this._defaultLayer);var c;null!=b?(c=this._layers,c=!1==(null!=K[b]?c.existsReserved(b):c.h.hasOwnProperty(b))):c=!0;if(c)return a;null!=a.parent&&a.parent.removeChild(a);this.root.addElementLayer(a,b);return a},removeElement:function(a){return this.root.removeChild(a)},update:function(a){var b;b=this._layers;for(var c=new se(b,b.arrayKeys());c.hasNext();)for(var d=c.next(),e=d.length;0<e--;)b=d[e],b.runUpdate(a),
b.doDelete&&(b.dispose(),d.splice(e,1))},updateZSort:function(a,b){var c=this._layers;ee.sort(null!=K[a]?c.getReserved(a):c.h[a],null==b?v(this,this._zSort):b)},_zSort:function(a,b){return a.get_depth()>b.get_depth()?-1:a.get_depth()<b.get_depth()?1:0},__class__:tk};var im=function(a,b,c,d){Mb.call(this,null);this.camera=new oo(this,a,b);this._layers=c;this._layerOrder=d};i["workinman.display.ElementManagerSprite"]=im;im.__name__=["workinman","display","ElementManagerSprite"];im.__super__=Mb;im.prototype=
z(Mb.prototype,{dispose:function(){Mb.prototype.dispose.call(this);null!=this.camera&&(this.camera.dispose(),this.camera=null);if(null!=this._layers){for(var a=this._layers,a=new se(a,a.arrayKeys());a.hasNext();)for(var b=a.next(),c=0;c<b.length;){var d=b[c];++c;d.dispose()}this._layers=null}this._layerOrder=null},hitTest:function(a,b,c){if(!1==this.visible||!1==this.inputEnabled)return null;for(var d=null,e=this._layerOrder.length,f;0<e--;){d=this._layerOrder[e];f=this._layers;f=null!=K[d]?f.getReserved(d):
f.h[d];for(var g=f.length;0<g--;)if(d=f[g].hitTest(a,b,c),null!=d)return d}return Mb.prototype.hitTest.call(this,a,b,c)},addElementLayer:function(a,b){var c=this._layers;if(!1==(null!=K[b]?c.existsReserved(b):c.h.hasOwnProperty(b)))return a;null!=a.parent&&a.parent.removeChild(a);a.parent=this;c=this._layers;(null!=K[b]?c.getReserved(b):c.h[b]).push(a);return a},removeChild:function(a){for(var b=this._layers,b=new se(b,b.arrayKeys());b.hasNext();){var c=b.next();if(Z.remove(c,a)){a.parent=null;break}}return a},
render:function(a){a.ctx.save();this._matrix.compose(this.get_x(),this.get_y(),this.scaleX,this.scaleY,3.141592653589793*this.rotation/180);null!=this.parent&&Dg.multiply(this.parent.get_viewMatrix(),this._matrix,this._viewMatrix);a.ctx.transform(this._matrix.m00,this._matrix.m10,this._matrix.m01,this._matrix.m11,this._matrix.m02,this._matrix.m12);for(var b=0,c=this.children.length;b<c;)this.children[b++].render(a,null);for(var d,b=0,c=this._layerOrder.length;b<c;){d=this._layerOrder[b++];var e=this._layers;
d=null!=K[d]?e.getReserved(d):e.h[d];for(var e=0,f=d.length;e<f;){var g=e++;d[g].render(a,this.camera)}}a.ctx.restore()},__class__:im});var Ed=function(a){Mb.call(this,a);this.color=16711680;this.sizeX=this.sizeY=10;null!=a&&(this.color=a.color,this.sizeX=a.sizeX,this.sizeY=a.sizeY)};i["workinman.display.FillSprite"]=Ed;Ed.__name__=["workinman","display","FillSprite"];Ed.__super__=Mb;Ed.prototype=z(Mb.prototype,{get_width:function(){return Math.floor(this.sizeX)},get_height:function(){return Math.floor(this.sizeY)},
_draw:function(a){a.ctx.fillRect(this.color,0,0,this.sizeX,this.sizeY)},__class__:Ed});var ki=function(a,b,c){this._color=c;Vg.call(this,a,b)};i["workinman.display.FontColor"]=ki;ki.__name__=["workinman","display","FontColor"];ki.__super__=Vg;ki.prototype=z(Vg.prototype,{reload:function(){this._glyphs=new Ke;this._glyphs.h[ki.NEWLINE.charCode]=ki.NEWLINE;for(var a=new wj(this._file.toString()),b=new Ke,c=this.name.lastIndexOf("/"),c=0<=c?Z.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "char":for(var e=
null,f=a.pairs();f.hasNext();){var g=f.next();switch(g.key){case "height":e.height=g.getInt();break;case "id":e=new bj(g.getInt());break;case "page":g=g.getInt();e.page=b.h[g];break;case "width":e.width=g.getInt();break;case "x":e.x=g.getInt();break;case "xadvance":e.xAdvance=g.getInt();break;case "xoffset":e.xOffset=g.getInt();break;case "y":e.y=g.getInt();break;case "yoffset":e.yOffset=g.getInt()}}this._glyphs.set(e.charCode,e);break;case "common":for(e=a.pairs();e.hasNext();)f=e.next(),"lineHeight"==
f.key&&(this.lineHeight=f.getInt());break;case "info":for(e=a.pairs();e.hasNext();)f=e.next(),"size"==f.key&&(this.size=f.getInt());break;case "kerning":for(var e=null,g=f=0,j=a.pairs();j.hasNext();){var p=j.next();switch(p.key){case "amount":g=p.getInt();break;case "first":e=this._glyphs.get(p.getInt());break;case "second":f=p.getInt()}}null!=e&&0!=g&&e.setKerning(f,g);break;case "page":e=0;f=null;for(g=a.pairs();g.hasNext();)switch(j=g.next(),j.key){case "file":f=j.getString();break;case "id":e=
j.getInt()}null==b.h[e]&&(f=this._pack.getTexture(c+Ze.removeFileExtension(f)),this._texture=ma._platform.getRenderer().createTexture(f.get_width()|0,f.get_height()|0),this._texture.get_graphics().fillRect(this._color,0,0,this._texture.get_width(),this._texture.get_height()),this._texture.get_graphics().setBlendMode(wc.Mask),this._texture.get_graphics().drawTexture(f,0,0),this._texture.get_graphics().setBlendMode(wc.Normal),b.h[e]=this._texture)}},__class__:ki});var wj=function(a){this._configText=
a;this._keywordPattern=new Ng("([A-Za-z]+)(.*)","");this._pairPattern=new Ng('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};i["workinman.display._FontColor.ConfigParser"]=wj;wj.__name__=["workinman","display","_FontColor","ConfigParser"];wj.advance=function(a,b){var c=b.matchedPos();return Z.substr(a,c.pos+c.len,a.length)};wj.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=wj.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},
hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=wj.advance(b,a._pairPattern);return new po(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:wj};var po=function(a,b){this.key=a;this._value=b};i["workinman.display._FontColor.ConfigPair"]=po;po.__name__=["workinman","display","_FontColor","ConfigPair"];po.prototype={getInt:function(){return L.parseInt(this._value)},
getString:function(){return 34!=this._value.charCodeAt(0)?null:Z.substr(this._value,1,this._value.length-2)},__class__:po};var qo=function(a){this.ctx=a;this.canvasCtx=null;y.__instanceof(a,tg)&&(this.canvasCtx=t.field(a,"_canvasCtx"))};i["workinman.display.Graphics"]=qo;qo.__name__=["workinman","display","Graphics"];qo.prototype={__class__:qo};var Rh=function(){Mb.call(this,null)};i["workinman.display.GuideSprite"]=Rh;Rh.__name__=["workinman","display","GuideSprite"];Rh.__super__=Mb;Rh.prototype=
z(Mb.prototype,{_draw:function(a){a.ctx.save();a.ctx.setAlpha(0.5);var b=fb.STAGE_CENTER_X-497.77777777777777;a.ctx.fillRect(65280,-373.3333333333333,-280,746.6666666666666,560);a.ctx.fillRect(14911259,-497.77777777777777,-280,124.44444444444446,560);a.ctx.fillRect(14911259,373.3333333333333,-280,124.44444444444446,560);0<b&&(a.ctx.fillRect(16711680,-fb.STAGE_CENTER_X,-280,b,560),a.ctx.fillRect(16711680,fb.STAGE_CENTER_X-b,-280,b,560));a.ctx.fillRect(16777215,-fb.STAGE_CENTER_X,-280,fb.STAGE_WIDTH,
40);a.ctx.fillRect(16777215,-fb.STAGE_CENTER_X,240,fb.STAGE_WIDTH,40);a.ctx.restore()},__class__:Rh});var li=i["workinman.display.MASK_TYPE"]={__ename__:["workinman","display","MASK_TYPE"],__constructs__:["CIRCLE","RECTANGLE"]};li.CIRCLE=["CIRCLE",0];li.CIRCLE.toString=r;li.CIRCLE.__enum__=li;li.RECTANGLE=["RECTANGLE",1];li.RECTANGLE.toString=r;li.RECTANGLE.__enum__=li;var ii=function(a){n.call(this,a);this._flagMask=!1};i["workinman.display.MaskSprite"]=ii;ii.__name__=["workinman","display","MaskSprite"];
ii.__super__=n;ii.prototype=z(n.prototype,{setMask:function(a,b,c,d){this._flagMask=!0;this._maskX=a;this._maskY=b;this._maskWidth=c;this._maskHeight=d;this._type=li.RECTANGLE},setCircleMask:function(a,b,c,d){null==d&&(d=1);this._flagMask=!0;this._maskX=a;this._maskY=b;this._maskRadius=c;this._maskCircleFill=d;this._type=li.CIRCLE},clearMask:function(){this._flagMask=!1},render:function(a,b){if(!1!=this.visible){var c=0,d=0,c=0,e=1;if(null==b||!1==this.useCamera||!1==this.usePerspective)c=this.pos.x,
d=this.pos.y,e=1;else{c=this.pos.z-b.pos.z+this.get_offsetZ();if(c<-b.focalLength)return;e=0>=b.focalLength?1:b.focalLength/(b.focalLength+c);c=b.worldCenterX+(this.pos.x-b.pos.x-b.worldCenterX)*e;d=b.worldCenterY+(this.pos.y-b.pos.y-b.worldCenterY)*e}this._matrix.compose(c,d,this.scaleX*e,this.scaleY*e,3.141592653589793*this.rotation/180);null!=this.parent&&Dg.multiply(this.parent.get_viewMatrix(),this._matrix,this._viewMatrix);a.ctx.save();1>this.alpha&&a.ctx.multiplyAlpha(this.alpha);a.ctx.transform(this._matrix.m00,
this._matrix.m10,this._matrix.m01,this._matrix.m11,this._matrix.m02,this._matrix.m12);if(this._flagMask)switch(this._type[1]){case 0:a.canvasCtx.beginPath();a.canvasCtx.arc(-this.get_width()*this.originX+this.get_offsetX()+this._maskX|0,-this.get_height()*this.originY+this.get_offsetY()+this._maskY|0,this._maskRadius|0,0.5*-Math.PI,0.5*-Math.PI+2*Math.PI*this._maskCircleFill,!1);a.canvasCtx.lineTo(-this.get_width()*this.originX+this.get_offsetX()+this._maskX|0,-this.get_height()*this.originY+this.get_offsetY()+
this._maskY|0);a.canvasCtx.clip();break;case 1:a.canvasCtx.beginPath(),a.canvasCtx.rect(-this.get_width()*this.originX+this.get_offsetX()+this._maskX|0,-this.get_height()*this.originY+this.get_offsetY()+this._maskY|0,this._maskWidth|0,this._maskHeight|0),a.canvasCtx.clip()}a.ctx.save();a.ctx.translate(-this.get_width()*this.originX+this.get_offsetX(),-this.get_height()*this.originY+this.get_offsetY());this._draw(a);a.ctx.restore();c=0;for(d=this.children.length;c<d;)this.children[c++].render(a,null);
a.ctx.restore()}},__class__:ii});var Nk=function(a){le.call(this);this._root=new Mb(null);this._lastStageX=this._lastStageX=0;this._updateDelegate=a;this._calcScale();this._scratchPoint=new Ih};i["workinman.display.RootSprite"]=Nk;Nk.__name__=["workinman","display","RootSprite"];Nk.__super__=le;Nk.prototype=z(le.prototype,{dispose:function(){this._scratchPoint=this._updateDelegate=null;le.prototype.dispose.call(this)},onUpdate:function(a){this._root.runUpdate(a);this._updateDelegate(a)},hitTest:function(a,
b){return this._root.hitTest(a,b,this._scratchPoint)},_calcScale:function(){if(!(ma._platform.getStage().get_width()==this._lastStageX&&ma._platform.getStage().get_height()==this._lastStageY)){this._lastStageX=ma._platform.getStage().get_width();this._lastStageY=ma._platform.getStage().get_height();this._root.set_x(0.5*this._lastStageX);this._root.set_y(0.5*this._lastStageY);var a=this._lastStageY/560;this._fullWidth=this._lastStageX/a;this._root.rotation=0;fb.STAGE_WIDTH=Math.min(Math.ceil(this._fullWidth),
1212);fb.STAGE_CENTER_X=Math.floor(0.5*fb.STAGE_WIDTH);this._root.set_scale(a);P.resizeCanvas.dispatch(a)}},addChild:function(a){return this._root.addChild(a)},draw:function(a){null==this._graphics&&(this._graphics=new qo(a));this._calcScale();a.fillRect(0,-fb.STAGE_CENTER_X-1,-281,fb.STAGE_WIDTH+2,562);this._root.render(this._graphics,null);a.save();a.translate(this._root.get_x(),this._root.get_y());a.scale(this._root.scale,this._root.scale);a.rotate(this._root.rotation);var b=Math.ceil(0.5*(this._fullWidth-
fb.STAGE_WIDTH)),c=Math.ceil(0.5*this._fullWidth);0<b&&(a.fillRect(0,-c,-281,b,562),a.fillRect(0,c-b,-281,b,562));a.restore()},__class__:Nk});var fo=function(a){this._parseRes={x:0,y:0};this.rotate=-1<a[1].indexOf("true");this._setXY(this._getLineData(a[2]));this._setSizeXY(this._getLineData(a[3]));this._setOrig(this._getLineData(a[4]));this._setOffset(this._getLineData(a[5]));this._parseRes=null};i["workinman.display.SpriteRect"]=fo;fo.__name__=["workinman","display","SpriteRect"];fo.prototype={_getLineData:function(a){a=
a.split(": ");a=a[1].split(", ");this._parseRes.x=L.parseInt(a[0]);this._parseRes.y=L.parseInt(a[1]);return this._parseRes},_setXY:function(a){this.x=a.x;this.y=a.y},_setSizeXY:function(a){this.sizeX=a.x;this.sizeY=a.y},_setOrig:function(a){this.origX=a.x;this.origY=a.y},_setOffset:function(a){this.offsetX=a.x;this.offsetY=a.y},__class__:fo};var V=function(a){Mb.call(this,a);this._fontName="";this.set_wrapWidth(this.set_letterSpacing(this.set_lineSpacing(0)));this.set_align(Ca.Center);null!=a&&(null!=
a.color&&(this._color=a.color),this.setText(a.text),this.setVariables(a.vars),null!=a.align&&this.set_align(a.align),null!=a.wrapWidth&&this.set_wrapWidth(a.wrapWidth),null!=a.lineSpacing&&this.set_lineSpacing(a.lineSpacing),null!=a.letterSpacing&&this.set_letterSpacing(a.letterSpacing));this.inputEnabled=!1};i["workinman.display.Text"]=V;V.__name__=["workinman","display","Text"];V.__super__=Mb;V.prototype=z(Mb.prototype,{dispose:function(){this._text=this._data=this._fontName=this._font=this._layout=
null;this.set_align(null);Mb.prototype.dispose.call(this)},get_width:function(){return null==this._layout||null==this._data?0:(0<this.wrapWidth?this.wrapWidth:this._layout.bounds.width)*this._data.scale},get_height:function(){if(null==this._layout||null==this._data)return 0;var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing),b=this._layout.bounds.height;return(a>b?a:b)*this._data.scale},set_align:function(a){if(null==a)return this.align=null;this.align=a;this._updateLayout();return a},
set_originX:function(){return this.originX=0},set_wrapWidth:function(a){this.wrapWidth=a;this._updateLayout();return a},set_letterSpacing:function(a){this.letterSpacing=a;this._updateLayout();return a},set_lineSpacing:function(a){this.lineSpacing=a;this._updateLayout();return a},setText:function(a,b){this._data=Fc.getLocalizeData(a);null!=this._data&&(this.set_offsetX(this._data.offsetX),this.set_offsetY(this._data.offsetY),this._setFont(this._data.fontName),this._text=this._replaceVars(b),this._updateLayout())},
setColor:function(a){this._color!=a&&(this._color=a,this._font=H.getFont(this._fontName,!0,this._color),this._updateLayout())},setVariables:function(a){null!=this._data&&(this._text=this._replaceVars(a),this._updateLayout())},_updateLayout:function(){null==this._data||null==this._font||(this._layout=this._font.layoutText(this._text,this.align,this.wrapWidth/this._data.scale,this.letterSpacing,this.lineSpacing))},_draw:function(a){if(null!=this._layout){a.ctx.save();if(0<this.wrapWidth){var b=this.wrapWidth*
this._data.scale;switch(this.align[1]){case 1:a.ctx.translate(0.5*-this.wrapWidth,0);break;case 2:a.ctx.translate(2*-b,0)}}a.ctx.scale(this._data.scale,this._data.scale);this._layout.draw(a.ctx);a.ctx.restore()}},_setFont:function(a){a!=this._fontName&&(this._fontName=a,this._font=null!=this._color?H.getFont(a,!0,this._color):H.getFont(a))},_replaceVars:function(a){for(var b="",c=this._data.string.split("}"),d=0;d<c.length;){var e=c[d];++d;e=e.split("{");b+=e[0];1<e.length&&(e=L.parseInt(e[1]),b=
null!=a&&a.length>e?b+L.string(a[e]):b+("[Missing {"+e+"}]"))}return b},__class__:V,__properties__:z(Mb.prototype.__properties__,{set_lineSpacing:"set_lineSpacing",set_letterSpacing:"set_letterSpacing",set_wrapWidth:"set_wrapWidth",set_align:"set_align"})});var hb=function(){};i["workinman.display.spine.ArrayUtils"]=hb;hb.__name__=["workinman","display","spine","ArrayUtils"];hb.allocIntArray=function(a){for(var b=[],c=0;c<a;){var d=c++;b[d]=[]}return b};hb.allocFloatArray=function(a){for(var b=[],
c=0;c<a;){var d=c++;b[d]=[]}return b};hb.allocFloat=function(a){for(var b=[],c=0;c<a;){var d=c++;b[d]=0}return b};hb.allocInt=function(a){for(var b=[],c=0;c<a;){var d=c++;b[d]=0}return b};hb.allocEvent=function(a){for(var b=[],c=0;c<a;){var d=c++;b[d]=null}return b};hb.allocString=function(a){for(var b=[],c=0;c<a;){var d=c++;b[d]=""}return b};var xj=function(){};i["workinman.display.spine.Updatable"]=xj;xj.__name__=["workinman","display","spine","Updatable"];xj.prototype={__class__:xj};var Ki=function(a,
b,c){this._children=[];if(null==a)throw new h(new ga("data cannot be null."));if(null==b)throw new h(new ga("skeleton cannot be null."));this._data=a;this._skeleton=b;this._parent=c;this.setToSetupPose()};i["workinman.display.spine.Bone"]=Ki;Ki.__name__=["workinman","display","spine","Bone"];Ki.__interfaces__=[xj];Ki.prototype={isActive:function(){return this.active},update:function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},updateWorldTransform:function(){this.updateWorldTransformWith(this.x,
this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},updateWorldTransformWith:function(a,b,c,d,e,f,g){this.ax=a;this.ay=b;this.arotation=c;this.ascaleX=d;this.ascaleY=e;this.ashearX=f;this.ashearY=g;this.appliedValid=!0;var j=0,p=0,h=0,i=0,p=h=p=j=0,k=this._skeleton.scaleX,l=this._skeleton.scaleY*(Ki.yDown?-1:1),p=this._parent;if(null==p)j=c+90+g,g=this._skeleton,this.a=pa.cosDeg(c+f)*d*k,this.b=pa.cosDeg(j)*e*k,this.c=pa.sinDeg(c+f)*d*l,this.d=pa.sinDeg(j)*e*l,this.worldX=a*k+g.x,
this.worldY=b*l+g.y;else{var o=p.a,n=p.b,q=p.c,m=p.d;this.worldX=o*a+n*b+p.worldX;this.worldY=q*a+m*b+p.worldY;switch(this.get_data().transformMode){case "noRotationOrReflection":p=o*o+q*q;h=0;1.0E-4<p?(p=Math.abs(o*m-n*q)/p,n=q*p,m=o*p,h=Math.atan2(q,o)*pa.radDeg):(q=o=0,h=90-Math.atan2(m,n)*pa.radDeg);f=c+f-h;g=c+g-h+90;p=pa.cosDeg(f)*d;h=pa.cosDeg(g)*e;i=pa.sinDeg(f)*d;j=pa.sinDeg(g)*e;this.a=o*p-n*i;this.b=o*h-n*j;this.c=q*p+m*i;this.d=q*h+m*j;break;case "noScale":case "noScaleOrReflection":h=
pa.cosDeg(c);p=pa.sinDeg(c);c=(o*h+n*p)/k;a=(q*h+m*p)/l;p=Math.sqrt(c*c+a*a);1.0E-5<p&&(p=1/p);c*=p;a*=p;p=Math.sqrt(c*c+a*a);"noScale"==this.get_data().transformMode&&0>o*m-n*q!=(0>k!=0>l)&&(p=-p);n=Math.PI/2+Math.atan2(a,c);o=Math.cos(n)*p;n=Math.sin(n)*p;p=pa.cosDeg(f)*d;h=pa.cosDeg(90+g)*e;i=pa.sinDeg(f)*d;j=pa.sinDeg(90+g)*e;this.a=c*p+o*i;this.b=c*h+o*j;this.c=a*p+n*i;this.d=a*h+n*j;break;case "normal":j=c+90+g;p=pa.cosDeg(c+f)*d;h=pa.cosDeg(j)*e;i=pa.sinDeg(c+f)*d;j=pa.sinDeg(j)*e;this.a=o*
p+n*i;this.b=o*h+n*j;this.c=q*p+m*i;this.d=q*h+m*j;return;case "onlyTranslation":j=c+90+g,this.a=pa.cosDeg(c+f)*d,this.b=pa.cosDeg(j)*e,this.c=pa.sinDeg(c+f)*d,this.d=pa.sinDeg(j)*e}this.a*=k;this.b*=k;this.c*=l;this.d*=l}},setToSetupPose:function(){this.x=this.get_data().x;this.y=this.get_data().y;this.rotation=this.get_data().rotation;this.scaleX=this.get_data().scaleX;this.scaleY=this.get_data().scaleY;this.shearX=this.get_data().shearX;this.shearY=this.get_data().shearY},get_data:function(){return this._data},
get_skeleton:function(){return this._skeleton},get_parent:function(){return this._parent},get_children:function(){return this._children},updateAppliedTransform:function(){this.appliedValid=!0;var a=this.get_parent();if(null==a)this.ax=this.worldX,this.ay=this.worldY,this.arotation=Math.atan2(this.c,this.a)*pa.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-
this.b*this.c)*pa.radDeg;else{var b=a.a,c=a.b,d=a.c,e=a.d,f=1/(b*e-c*d),g=this.worldX-a.worldX,a=this.worldY-a.worldY;this.ax=g*e*f-a*c*f;this.ay=a*b*f-g*d*f;e*=f;b*=f;c*=f;f*=d;d=e*this.a-c*this.c;c=e*this.b-c*this.d;e=b*this.c-f*this.a;f=b*this.d-f*this.b;this.ashearX=0;this.ascaleX=Math.sqrt(d*d+e*e);1.0E-4<this.scaleX?(b=d*f-c*e,this.ascaleY=b/this.ascaleX,this.ashearY=Math.atan2(d*c+e*f,b)*pa.radDeg,this.arotation=Math.atan2(e,d)*pa.radDeg):(this.ascaleX=0,this.ascaleY=Math.sqrt(c*c+f*f),this.ashearY=
0,this.arotation=90-Math.atan2(f,c)*pa.radDeg)}},localToWorld:function(a){var b=a[0],c=a[1];a[0]=b*this.a+c*this.b+this.worldX;a[1]=b*this.c+c*this.d+this.worldY},__class__:Ki,__properties__:{get_children:"get_children",get_parent:"get_parent",get_skeleton:"get_skeleton",get_data:"get_data"}};var ro=function(a,b,c){this.transformMode="normal";this.scaleX=this.scaleY=1;if(0>a)throw new h(new ga("index must be >= 0"));if(null==b)throw new h(new ga("name cannot be null."));this._index=a;this._name=b;
this._parent=c};i["workinman.display.spine.BoneData"]=ro;ro.__name__=["workinman","display","spine","BoneData"];ro.prototype={get_index:function(){return this._index},get_name:function(){return this._name},get_parent:function(){return this._parent},__class__:ro,__properties__:{get_parent:"get_parent",get_name:"get_name",get_index:"get_index"}};var nf=function(a,b,c,d){null==d&&(d=0);this.r=this.g=this.b=this.a=0;this.r=a;this.g=b;this.b=c;this.a=d};i["workinman.display.spine.Color"]=nf;nf.__name__=
["workinman","display","spine","Color"];nf.prototype={setFrom:function(a,b,c,d){this.r=a;this.g=b;this.b=c;this.a=d;this.clamp();return this},setFromColor:function(a){this.r=a.r;this.g=a.g;this.b=a.b;this.a=a.a;return this},add:function(a,b,c,d){this.r+=a;this.g+=b;this.b+=c;this.a+=d;this.clamp();return this},clamp:function(){0>this.r?this.r=0:1<this.r&&(this.r=1);0>this.g?this.g=0:1<this.g&&(this.g=1);0>this.b?this.b=0:1<this.b&&(this.b=1);0>this.a?this.a=0:1<this.a&&(this.a=1);return this},__class__:nf};
var Uf=function(a,b,c){this.name=a;this.order=b;this.skinRequired=c};i["workinman.display.spine.ConstraintData"]=Uf;Uf.__name__=["workinman","display","spine","ConstraintData"];Uf.prototype={__class__:Uf};var jm=function(a,b){this.balance=0;this.volume=1;if(null==b)throw new h(new ga("data cannot be null."));this.time=a;this._data=b};i["workinman.display.spine.Event"]=jm;jm.__name__=["workinman","display","spine","Event"];jm.prototype={get_data:function(){return this._data},__class__:jm,__properties__:{get_data:"get_data"}};
var so=function(a){this.balance=0;this.volume=1;if(null==a)throw new h(new ga("name cannot be null."));this._name=a};i["workinman.display.spine.EventData"]=so;so.__name__=["workinman","display","spine","EventData"];so.prototype={get_name:function(){return this._name},__class__:so,__properties__:{get_name:"get_name"}};var ga=function(a){this.msg=a};i["workinman.display.spine.Exception"]=ga;ga.__name__=["workinman","display","spine","Exception"];ga.prototype={__class__:ga};var Sh=function(a,b){this.softness=
0;if(null==a)throw new h(new ga("data cannot be null."));if(null==b)throw new h(new ga("skeleton cannot be null."));this._data=a;this.mix=a.mix;this.softness=a.softness;this.bendDirection=a.bendDirection;this.compress=a.compress;this.stretch=a.stretch;this.bones=[];for(var c=0,d=a.bones;c<d.length;){var e=d[c];++c;this.bones[this.bones.length]=b.findBone(e.get_name())}this.target=b.findBone(a.target.get_name())};i["workinman.display.spine.IkConstraint"]=Sh;Sh.__name__=["workinman","display","spine",
"IkConstraint"];Sh.__interfaces__=[xj];Sh.apply1=function(a,b,c,d,e,f,g){a.appliedValid||a.updateAppliedTransform();var j=a.get_parent(),p=1/(j.a*j.d-j.b*j.c),b=b-j.worldX,h=c-j.worldY,c=(b*j.d-h*j.b)*p-a.ax,i=(h*j.a-b*j.c)*p-a.ay,j=Math.atan2(i,c)*pa.radDeg-a.ashearX-a.arotation;0>a.ascaleX&&(j+=180);180<j?j-=360:-180>j&&(j+=360);p=a.ascaleX;b=a.ascaleY;if(e&&(h=a.get_data().length*p,c=Math.sqrt(c*c+i*i),d&&c<h||e&&c>h&&1.0E-4<h))d=(c/h-1)*g+1,p*=d,f&&(b*=d);a.updateWorldTransformWith(a.ax,a.ay,
a.arotation+j*g,p,b,a.ashearX,a.ashearY)};Sh.apply2=function(a,b,c,d,e,f,g,j){if(0==j)b.updateWorldTransform();else{a.appliedValid||a.updateAppliedTransform();b.appliedValid||b.updateAppliedTransform();var p=a.ax,h=a.ay,i=a.ascaleX,k=i,l=a.ascaleY,o=b.ascaleX,n,q,m;0>i?(i=-i,n=180,m=-1):(n=0,m=1);0>l&&(l=-l,m=-m);0>o?(o=-o,q=180):q=0;var r=b.ax,t,s,u,v=a.a,w=a.b,y=a.c,z=a.d,G=1.0E-4>=Math.abs(i-l);G?(t=b.ay,s=v*r+w*t+a.worldX,u=y*r+z*t+a.worldY):(t=0,s=v*r+a.worldX,u=y*r+a.worldY);var H=a.get_parent(),
v=H.a,w=H.b,y=H.c,z=H.d,E=1/(v*z-w*y),F=s-H.worldX;s=u-H.worldY;u=(F*z-s*w)*E-p;s=(s*v-F*y)*E-h;u=Math.sqrt(u*u+s*s);var J=b.get_data().length*o;if(1.0E-4>u)Sh.apply1(a,c,d,!1,f,!1,j),b.updateWorldTransformWith(r,t,0,b.ascaleX,b.ascaleY,b.ashearX,b.ashearY);else{F=c-H.worldX;s=d-H.worldY;z=(F*z-s*w)*E-p;y=(s*v-F*y)*E-h;E=z*z+y*y;0!=g&&(g*=i*(o+1)/2,v=Math.sqrt(E),w=v-u-J*i+g,0<w&&(E=Math.min(1,w/(2*g))-1,E=(w-g*(1-E*E))/v,z-=E*z,y-=E*y,E=z*z+y*y));a:if(G)J*=i,v=(E-u*u-J*J)/(2*u*J),-1>v?v=-1:1<v&&
(v=1,f&&(k*=(Math.sqrt(E)/(u+J)-1)*j+1)),e*=Math.acos(v),v=u+J*v,w=J*Math.sin(e),v=Math.atan2(y*v-z*w,z*v+y*w);else{v=i*J;w=l*J;s=v*v;F=w*w;f=Math.atan2(y,z);y=F*u*u+s*E-s*F;g=-2*F*u;G=F-s;z=g*g-4*G*y;if(0<=z&&(z=Math.sqrt(z),0>g&&(z=-z),z=-(g+z)/2,g=z/G,y/=z,y=Math.abs(g)<Math.abs(y)?g:y,y*y<=E)){s=Math.sqrt(E-y*y)*e;v=f-Math.atan2(s,y);e=Math.atan2(s/l,(y-u)/i);break a}i=Math.PI;g=u-v;G=g*g;l=J=0;o=u+v;c=o*o;d=0;y=-v*u/(s-F);-1<=y&&1>=y&&(y=Math.acos(y),F=v*Math.cos(y)+u,s=w*Math.sin(y),z=F*F+s*
s,z<G&&(i=y,G=z,g=F,J=s),z>c&&(l=y,c=z,o=F,d=s));E<=(G+c)/2?(v=f-Math.atan2(J*e,g),e*=i):(v=f-Math.atan2(d*e,o),e*=l)}u=Math.atan2(t,r)*m;w=a.arotation;v=(v-u)*pa.radDeg+n-w;180<v?v-=360:-180>v&&(v+=360);a.updateWorldTransformWith(p,h,w+v*j,k,a.ascaleY,0,0);w=b.arotation;e=((e+u)*pa.radDeg-b.ashearX)*m+q-w;180<e?e-=360:-180>e&&(e+=360);b.updateWorldTransformWith(r,t,w+e*j,b.ascaleX,b.ascaleY,b.ashearX,b.ashearY)}}};Sh.prototype={update:function(){switch(this.bones.length){case 1:Sh.apply1(this.bones[0],
this.target.worldX,this.target.worldY,this.compress,this.stretch,this._data.uniform,this.mix);break;case 2:Sh.apply2(this.bones[0],this.bones[1],this.target.worldX,this.target.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},get_data:function(){return this._data},__class__:Sh,__properties__:{get_data:"get_data"}};var km=function(a){this.softness=0;this.compress=this.stretch=this.uniform=!1;this.mix=this.bendDirection=1;this.bones=[];Uf.call(this,a,0,!1)};i["workinman.display.spine.IkConstraintData"]=
km;km.__name__=["workinman","display","spine","IkConstraintData"];km.__super__=Uf;km.prototype=z(Uf.prototype,{__class__:km});var pa=function(){};i["workinman.display.spine.MathUtils"]=pa;pa.__name__=["workinman","display","spine","MathUtils"];pa.cosDeg=function(a){return Math.cos(a*pa.degRad)};pa.sinDeg=function(a){return Math.sin(a*pa.degRad)};pa.signum=function(a){return 0<a?1:0>a?-1:0};var Ee=function(a,b){for(var c=[],d=0;10>d;)d++,c.push(0);this._segments=c;this._lengths=[];this._curves=[];
this._world=[];this._positions=[];this._spaces=[];if(null==a)throw new h(new ga("data cannot be null."));if(null==b)throw new h(new ga("skeleton cannot be null."));this._data=a;this._bones=[];c=0;for(d=a.get_bones();c<d.length;){var e=d[c];++c;this._bones.push(b.findBone(e.get_name()))}this.target=b.findSlot(a.target.get_name());this.position=a.position;this.spacing=a.spacing;this.rotateMix=a.rotateMix;this.translateMix=a.translateMix};i["workinman.display.spine.PathConstraint"]=Ee;Ee.__name__=["workinman",
"display","spine","PathConstraint"];Ee.__interfaces__=[xj];Ee.prototype={update:function(){var a=y.__cast(this.target.get_attachment(),Li);if(null!=a){var b=this.rotateMix,c=this.translateMix,d=0<b;if(0<c||d){var e=this._data,f="percent"==e.spacingMode,g=e.rotateMode,j="tangent"==g,p="chainScale"==g,h=this._bones.length,i=j?h:h+1,k=this._bones;this._spaces.length=i;var l=this._spaces,o=null,n=this.spacing;if(p||!f){p&&(this._lengths.length=h,o=this._lengths);for(var q="length"==e.spacingMode,m=0;m<
i-1;){var r=k[m],s=r.get_data().length;if(s<Ee.epsilon)p&&(o[m]=0),l[++m]=0;else if(f){if(p){var u=s*r.a,s=s*r.c,s=Math.sqrt(u*u+s*s);o[m]=s}l[++m]=n}else u=s*r.a,r=s*r.c,r=Math.sqrt(u*u+r*r),p&&(o[m]=r),l[++m]=(q?s+n:n)*r/s}}else for(q=1;q<i;)m=q++,l[m]=n;a=this.computeWorldPositions(a,i,j,"percent"==e.positionMode,f);i=a[0];n=a[1];e=e.offsetRotation;f=!1;0==e?f="chain"==g:(f=!1,g=this.target.get_bone(),e*=0<g.a*g.d-g.b*g.c?pa.degRad:-pa.degRad);g=3;for(q=0;q<h;){u=q++;m=k[u];m.worldX+=(i-m.worldX)*
c;m.worldY+=(n-m.worldY)*c;var v=a[g],t=a[g+1],s=v-i,r=t-n;p&&(i=o[u],0!=i&&(i=(Math.sqrt(s*s+r*r)/i-1)*b+1,m.a*=i,m.c*=i));i=v;n=t;if(d){var v=m.a,t=m.b,w=m.c,z=m.d,G,H,u=j?a[g-1]:0==l[u+1]?a[g+2]:Math.atan2(r,s),u=u-Math.atan2(w,v);if(f){G=Math.cos(u);H=Math.sin(u);var E=m.get_data().length,i=i+(E*(G*v-H*w)-s)*b,n=n+(E*(H*v+G*w)-r)*b}else u+=e;u>Math.PI?u-=2*Math.PI:u<-Math.PI&&(u+=2*Math.PI);u*=b;G=Math.cos(u);H=Math.sin(u);m.a=G*v-H*w;m.b=G*t-H*z;m.c=H*v+G*w;m.d=H*t+G*z}m.appliedValid=!1;g+=3}}}},
computeWorldPositions:function(a,b,c,d,e){var f=this.target,g=this.position,j=this._spaces;this._positions.length=3*b+2;var p=this._positions,h,i=a.closed,k=a.worldVerticesLength,l=Math.floor(k/6),o=Ee.NONE;if(!a.constantSpeed){var n=a.lengths,l=l-(i?1:2),m=n[l];d&&(g*=m);if(e)for(h=1;h<b;){var q=h++;j[q]*=m}this._world.length=8;h=this._world;for(var r=q=0,u=0;u<b;){var s=u++,v=j[s],t=g+=v;if(i)t%=m,0>t&&(t+=m),r=0;else if(0>t){o!=Ee.BEFORE&&(o=Ee.BEFORE,a.computeWorldVertices(f,2,4,h,0,2));this.addBeforePosition(t,
h,0,p,q);q+=3;continue}else if(t>m){o!=Ee.AFTER&&(o=Ee.AFTER,a.computeWorldVertices(f,k-6,4,h,0,2));this.addAfterPosition(t-m,h,0,p,q);q+=3;continue}for(;;){var w=n[r];if(t>w)++r;else{if(0==r)t/=w;else var y=n[r-1],t=(t-y)/(w-y);break}}r!=o&&(o=r,i&&r==l?(a.computeWorldVertices(f,k-4,4,h,0,2),a.computeWorldVertices(f,0,4,h,4,2)):a.computeWorldVertices(f,6*r+2,8,h,0,2));this.addCurvePosition(t,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],p,q,c||0<s&&0==v);q+=3}return p}i?(k+=2,this._world.length=k,h=this._world,
a.computeWorldVertices(f,2,k-4,h,0,2),a.computeWorldVertices(f,0,2,h,k-4,2),h[k-2]=h[0],h[k-1]=h[1]):(--l,k-=4,this._world.length=k,h=this._world,a.computeWorldVertices(f,2,k,h,0,2));this._curves.length=l;for(var f=this._curves,n=0,m=h[0],q=h[1],w=t=v=s=u=r=0,z,G,H,E,F,J=2,P=0,O=l;P<O;){var rc=P++,r=h[J],u=h[J+1],s=h[J+2],v=h[J+3],t=h[J+4],w=h[J+5];z=0.1875*(m-2*r+s);G=0.1875*(q-2*u+v);y=0.09375*(3*(r-s)-m+t);H=0.09375*(3*(u-v)-q+w);E=2*z+y;F=2*G+H;z=0.75*(r-m)+z+0.16666667*y;G=0.75*(u-q)+G+0.16666667*
H;n+=Math.sqrt(z*z+G*G);z+=E;G+=F;E+=y;F+=H;n+=Math.sqrt(z*z+G*G);z+=E;G+=F;n+=Math.sqrt(z*z+G*G);z+=E+y;G+=F+H;n+=Math.sqrt(z*z+G*G);f[rc]=n;m=t;q=w;J+=6}g=d?g*n:g*(n/a.lengths[l-1]);if(e)for(a=1;a<b;)l=a++,j[l]*=n;a=this._segments;for(e=d=l=y=rc=0;e<b;){J=e++;P=j[J];O=g+=P;if(i)O%=n,0>O&&(O+=n),d=0;else if(0>O){this.addBeforePosition(O,h,0,p,l);l+=3;continue}else if(O>n){this.addAfterPosition(O-n,h,k-4,p,l);l+=3;continue}for(;;)if(H=f[d],O>H)++d;else{0==d?O/=H:(E=f[d-1],O=(O-E)/(H-E));break}if(d!=
o){o=d;w=6*d;m=h[w];q=h[w+1];r=h[w+2];u=h[w+3];s=h[w+4];v=h[w+5];t=h[w+6];w=h[w+7];z=0.03*(m-2*r+s);G=0.03*(q-2*u+v);y=0.006*(3*(r-s)-m+t);H=0.006*(3*(u-v)-q+w);E=2*z+y;F=2*G+H;z=0.3*(r-m)+z+0.16666667*y;G=0.3*(u-q)+G+0.16666667*H;rc=Math.sqrt(z*z+G*G);a[0]=rc;for(var K=1;8>K;){var L=K++;z+=E;G+=F;E+=y;F+=H;rc+=Math.sqrt(z*z+G*G);a[L]=rc}z+=E;G+=F;rc+=Math.sqrt(z*z+G*G);a[8]=rc;z+=E+y;G+=F+H;rc+=Math.sqrt(z*z+G*G);a[9]=rc;y=0}for(O*=rc;;)if(H=a[y],O>H)++y;else{0==y?O/=H:(E=a[y-1],O=y+(O-E)/(H-E));
break}this.addCurvePosition(0.1*O,m,q,r,u,s,v,t,w,p,l,c||0<J&&0==P);l+=3}return p},addBeforePosition:function(a,b,c,d,e){var f=b[c],g=b[c+1],b=Math.atan2(b[c+3]-g,b[c+2]-f);d[e]=f+a*Math.cos(b);d[e+1]=g+a*Math.sin(b);d[e+2]=b},addAfterPosition:function(a,b,c,d,e){var f=b[c+2],g=b[c+3],b=Math.atan2(g-b[c+1],f-b[c]);d[e]=f+a*Math.cos(b);d[e+1]=g+a*Math.sin(b);d[e+2]=b},addCurvePosition:function(a,b,c,d,e,f,g,j,p,h,i,k){if(0==a||isNaN(a))h[i]=b,h[i+1]=c,h[i+2]=Math.atan2(e-c,d-b);else{var l=a*a,o=l*
a,n=1-a,m=n*n,q=m*n,r=n*a,u=3*r,n=n*u,u=u*a,j=b*q+d*n+f*u+j*o,p=c*q+e*n+g*u+p*o;h[i]=j;h[i+1]=p;k&&(h[i+2]=0.001>a?Math.atan2(e-c,d-b):Math.atan2(p-(c*m+2*e*r+g*l),j-(b*m+2*d*r+f*l)))}},get_bones:function(){return this._bones},get_data:function(){return this._data},__class__:Ee,__properties__:{get_data:"get_data",get_bones:"get_bones"}};var lm=function(a){this._bones=[];Uf.call(this,a,0,!1)};i["workinman.display.spine.PathConstraintData"]=lm;lm.__name__=["workinman","display","spine","PathConstraintData"];
lm.__super__=Uf;lm.prototype=z(Uf.prototype,{get_bones:function(){return this._bones},__class__:lm,__properties__:{get_bones:"get_bones"}});var uo=function(){this.vertices=[]};i["workinman.display.spine.Polygon"]=uo;uo.__name__=["workinman","display","spine","Polygon"];uo.prototype={dispose:function(){this.vertices=null},containsPoint:function(a,b){for(var c=this.vertices.length,d=c-2,e=!1,f=0;f<c;){var g=this.vertices[f+1],j=this.vertices[d+1];if(g<b&&j>=b||j<b&&g>=b){var p=this.vertices[f];p+(b-
g)/(j-g)*(this.vertices[d]-p)<a&&(e=!e)}d=f;f+=2}return e},__class__:uo};var vo=function(a){this.items=[];this.instantiator=a};i["workinman.display.spine.Pool"]=vo;vo.__name__=["workinman","display","spine","Pool"];vo.prototype={obtain:function(){return 0<this.items.length?this.items.pop():this.instantiator()},free:function(a){y.__instanceof(a,vk)&&y.__cast(a,vk).reset();this.items.push(a)},__class__:vo};var vk=function(){};i["workinman.display.spine.Poolable"]=vk;vk.__name__=["workinman","display",
"spine","Poolable"];vk.prototype={__class__:vk};var Mi=function(a){this.x=this.y=0;this.scaleX=this.scaleY=1;this.time=0;this.color=new nf(1,1,1,1);this._updateCacheReset=[];this._updateCache=[];if(null==a)throw new h(new ga("data cannot be null."));this._data=a;this.bones=[];for(var b=0,c=a.bones;b<c.length;){var d=c[b];++b;if(null==d.get_parent())d=new Ki(d,this,null);else{var e=this.bones[d.get_parent().get_index()],d=new Ki(d,this,e);e.get_children().push(d)}this.bones.push(d)}this.slots=[];this.drawOrder=
[];b=0;for(c=a.slots;b<c.length;)e=c[b],++b,d=this.bones[e.get_boneData().get_index()],e=new wo(e,d),this.slots.push(e),this.drawOrder[this.drawOrder.length]=e;this.ikConstraints=[];b=0;for(c=a.ikConstraints;b<c.length;)e=c[b],++b,this.ikConstraints.push(new Sh(e,this));this.transformConstraints=[];b=0;for(c=a.transformConstraints;b<c.length;)e=c[b],++b,this.transformConstraints.push(new mm(e,this));this.pathConstraints=[];b=0;for(a=a.pathConstraints;b<a.length;)c=a[b],++b,this.pathConstraints.push(new Ee(c,
this));this.updateCache()};i["workinman.display.spine.Skeleton"]=Mi;Mi.__name__=["workinman","display","spine","Skeleton"];Mi.contains=function(a,b){for(var c=0,d=a.length;c<d;){var e=c++;if(a[e]==b)return!0}return!1};Mi.prototype={updateCache:function(){var a=this;this._updateCache.length=0;this._updateCacheReset.length=0;for(var b=this.bones,c,d=0,e=b.length;d<e;)c=d++,c=b[c],c.sorted=c.get_data().skinRequired,c.active=!c.sorted;if(null!=this.get_skin())for(var d=this.get_skin().get_bones(),e=0,
f=this.get_skin().get_bones().length;e<f;){c=e++;for(c=this.bones[d[c].get_index()];!(c.sorted=!1,c.active=!0,c=c.get_parent(),null==c););}var g=this.ikConstraints,j=this.transformConstraints,p=this.pathConstraints,h=g.length,i=j.length,k=p.length;c=0;for(d=h+i+k;c<d;)(function(b){return function(){for(var c=0;c<h;){var d=c++,d=g[d];if(d.get_data().order==b[0]){a.sortIkConstraint(d);return}}for(c=0;c<i;)if(d=c++,d=j[d],d.get_data().order==b[0]){a.sortTransformConstraint(d);return}for(c=0;c<k;)if(d=
c++,d=p[d],d.get_data().order==b[0]){a.sortPathConstraint(d);break}}})([c++])();c=0;for(d=b.length;c<d;)e=c++,this.sortBone(b[e])},sortIkConstraint:function(a){a.active=a.target.isActive()&&(!a.get_data().skinRequired||null!=this.get_skin()&&Mi.contains(this.get_skin().get_constraints(),a.get_data()));if(a.active){this.sortBone(a.target);var b=a.bones,c=b[0];this.sortBone(c);if(1<b.length){var d=b[b.length-1];-1>=this._updateCache.indexOf(d)&&this._updateCacheReset.push(d)}this._updateCache.push(a);
this.sortReset(c.get_children());b[b.length-1].sorted=!0}},sortPathConstraint:function(a){a.active=a.target.get_bone().isActive()&&(!a.get_data().skinRequired||null!=this.get_skin()&&Mi.contains(this.get_skin().get_constraints(),a.get_data()));if(a.active){var b=a.target,c=b.get_data().get_index(),d=b.get_bone();null!=this.get_skin()&&this.sortPathConstraintAttachment(this.get_skin(),c,d);null!=this.get_data().defaultSkin&&this.get_data().defaultSkin!=this.get_skin()&&this.sortPathConstraintAttachment(this.get_data().defaultSkin,
c,d);for(var e=0,f=this.get_data().skins.length;e<f;){var g=e++;this.sortPathConstraintAttachment(this.get_data().skins[g],c,d)}b=b.get_attachment();y.__instanceof(b,Li)&&this.sortPathConstraintAttachment2(b,d);d=a.get_bones();b=d.length;for(c=0;c<b;)e=c++,this.sortBone(d[e]);this._updateCache.push(a);for(a=0;a<b;)c=a++,this.sortReset(d[c].get_children());for(a=0;a<b;)c=a++,d[c].sorted=!0}},sortTransformConstraint:function(a){a.active=a.target.isActive()&&(!a.get_data().skinRequired||null!=this.get_skin()&&
Mi.contains(this.get_skin().get_constraints(),a.get_data()));if(a.active){this.sortBone(a.target);var b=a.get_bones(),c=b.length;if(a.get_data().local)for(var d=0;d<c;){var e=d++,e=b[e];this.sortBone(e.get_parent());-1>=this._updateCache.indexOf(e)&&this._updateCacheReset.push(e)}else for(d=0;d<c;)e=d++,this.sortBone(b[e]);this._updateCache.push(a);for(a=0;a<c;)d=a++,this.sortReset(b[d].get_children());for(a=0;a<c;)d=a++,b[d].sorted=!0}},sortPathConstraintAttachment:function(a,b,c){if(!(a.get_attachments().length<=
b)&&(a=a.get_attachments()[b],null!=a))for(a=new se(a,a.arrayKeys());a.hasNext();)this.sortPathConstraintAttachment2(a.next(),c)},sortPathConstraintAttachment2:function(a,b){var c=y.__cast(a,Li);if(null!=c)if(c=c.bones,null==c)this.sortBone(b);else for(var d=this.bones,e=0;e<c.length;)for(var f=c[e++],f=e+f;e<f;)this.sortBone(d[c[e]]),++e},sortBone:function(a){if(!a.sorted){var b=a.get_parent();null!=b&&this.sortBone(b);a.sorted=!0;this._updateCache.push(a)}},sortReset:function(a){for(var b=0,c=a.length;b<
c;){var d=b++,d=a[d];d.active&&(d.sorted&&this.sortReset(d.get_children()),d.sorted=!1)}},updateWorldTransform:function(){for(var a=this._updateCacheReset,b=0;b<a.length;){var c=a[b];++b;c.ax=c.x;c.ay=c.y;c.arotation=c.rotation;c.ascaleX=c.scaleX;c.ascaleY=c.scaleY;c.ashearX=c.shearX;c.ashearY=c.shearY;c.appliedValid=!0}a=0;for(b=this._updateCache;a<b.length;)c=b[a],++a,c.update()},setToSetupPose:function(){this.setBonesToSetupPose();this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=
0,b=this.bones;a<b.length;){var c=b[a];++a;c.setToSetupPose()}a=0;for(b=this.ikConstraints;a<b.length;)c=b[a],++a,c.mix=c.get_data().mix,c.softness=c.get_data().softness,c.bendDirection=c.get_data().bendDirection,c.compress=c.get_data().compress,c.stretch=c.get_data().stretch;a=0;for(b=this.transformConstraints;a<b.length;)c=b[a],++a,c.rotateMix=c.get_data().rotateMix,c.translateMix=c.get_data().translateMix,c.scaleMix=c.get_data().scaleMix,c.shearMix=c.get_data().shearMix;a=0;for(b=this.pathConstraints;a<
b.length;)c=b[a],++a,c.position=c.get_data().position,c.spacing=c.get_data().spacing,c.rotateMix=c.get_data().rotateMix,c.translateMix=c.get_data().translateMix},setSlotsToSetupPose:function(){for(var a=0,b=0,c=this.slots;b<c.length;){var d=c[b];++b;this.drawOrder[a++]=d;d.setToSetupPose()}},get_data:function(){return this._data},findBone:function(a){if(null==a)throw new h(new ga("boneName cannot be null."));for(var b=0,c=this.bones;b<c.length;){var d=c[b];++b;if(d.get_data().get_name()==a)return d}return null},
findSlot:function(a){if(null==a)throw new h(new ga("slotName cannot be null."));for(var b=0,c=this.slots;b<c.length;){var d=c[b];++b;if(d.get_data().get_name()==a)return d}return null},findSlotIndex:function(a){if(null==a)throw new h(new ga("slotName cannot be null."));for(var b=0,c=0,d=this.slots;c<d.length;){var e=d[c];++c;if(e.get_data().get_name()==a)return b;++b}return-1},get_skin:function(){return this._skin},set_skinName:function(a){var b=this.get_data().findSkin(a);if(null==b)throw new h(new ga("Skin not found: "+
a));this._skin=b;return this._skin.get_name()},getAttachmentForSlotIndex:function(a,b){if(null==b)throw new h(new ga("attachmentName cannot be null."));if(null!=this.get_skin()){var c=this.get_skin().getAttachment(a,b);if(null!=c)return c}return null!=this.get_data().defaultSkin?this.get_data().defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){if(null==a)throw new h(new ga("slotName cannot be null."));for(var c=0,d=0,e=this.slots;d<e.length;){var f=e[d];++d;if(f.get_data().get_name()==
a){d=null;if(null!=b&&(d=this.getAttachmentForSlotIndex(c,b),null==d))throw new h(new ga("Attachment not found: "+b+", for slot: "+a));f.set_attachment(d);return}++c}throw new h(new ga("Slot not found: "+a));},__class__:Mi,__properties__:{set_skinName:"set_skinName",get_skin:"get_skin",get_data:"get_data"}};var ao=function(){this.polygons=[];this.boundingBoxes=[];this.polygonPool=[]};i["workinman.display.spine.SkeletonBounds"]=ao;ao.__name__=["workinman","display","spine","SkeletonBounds"];ao.prototype=
{update:function(a,b){for(var c=a.slots,d=c.length,e=this.boundingBoxes.length=0,f=this.polygons;e<f.length;){var g=f[e];++e;this.polygonPool[this.polygonPool.length]=g}for(e=this.polygons.length=0;e<d;)if(f=e++,f=c[f],f.get_bone().active&&(g=null,y.__instanceof(f.get_attachment(),yj)&&(g=y.__cast(f.get_attachment(),yj)),null!=g)){this.boundingBoxes[this.boundingBoxes.length]=g;var j=this.polygonPool.length,p;0<j?(p=this.polygonPool[j-1],this.polygonPool.splice(j-1,1)):p=new uo;this.polygons[this.polygons.length]=
p;p.vertices.length=g.worldVerticesLength;g.computeWorldVertices(f,0,g.worldVerticesLength,p.vertices,0,2)}b?this.aabbCompute():(this.minY=this.minX=-Infinity,this.maxY=this.maxX=Infinity)},aabbCompute:function(){for(var a=Infinity,b=Infinity,c=-Infinity,d=-Infinity,e=0,f=this.polygons.length;e<f;)for(var g=this.polygons[e++].vertices,j=0;j<g.length;)var p=g[j],h=g[j+1],a=Math.min(a,p),b=Math.min(b,h),c=Math.max(c,p),d=Math.max(d,h),j=j+2;this.minX=a;this.minY=b;this.maxX=c;this.maxY=d},aabbContainsPoint:function(a,
b){return a>=this.minX&&a<=this.maxX&&b>=this.minY?b<=this.maxY:!1},containsPoint:function(a,b){for(var c=0,d=this.polygons.length;c<d;){var e=c++;if(this.polygons[e].containsPoint(a,b))return this.boundingBoxes[e]}return null},__class__:ao};var xo=function(){this.pathConstraints=[];this.transformConstraints=[];this.ikConstraints=[];this.animations=[];this.events=[];this.skins=[];this.slots=[];this.bones=[]};i["workinman.display.spine.SkeletonData"]=xo;xo.__name__=["workinman","display","spine","SkeletonData"];
xo.prototype={findBone:function(a){if(null==a)throw new h(new ga("boneName cannot be null."));for(var b=0,c=this.bones.length;b<c;){var d=this.bones[b++];if(d.get_name()==a)return d}return null},findBoneIndex:function(a){if(null==a)throw new h(new ga("boneName cannot be null."));for(var b=0,c=this.bones.length;b<c;){var d=b++;if(this.bones[d].get_name()==a)return d}return-1},findSlot:function(a){if(null==a)throw new h(new ga("slotName cannot be null."));for(var b=0,c=this.slots.length;b<c;){var d=
this.slots[b++];if(d.get_name()==a)return d}return null},findSlotIndex:function(a){if(null==a)throw new h(new ga("slotName cannot be null."));for(var b=0,c=this.slots.length;b<c;){var d=b++;if(this.slots[d].get_name()==a)return d}return-1},findSkin:function(a){if(null==a)throw new h(new ga("skinName cannot be null."));for(var b=0,c=this.skins;b<c.length;){var d=c[b];++b;if(d.get_name()==a)return d}return null},findEvent:function(a){if(null==a)throw new h(new ga("eventName cannot be null."));for(var b=
0,c=this.events;b<c.length;){var d=c[b];++b;if(d.get_name()==a)return d}return null},findAnimation:function(a){if(null==a)throw new h(new ga("animationName cannot be null."));for(var b=0,c=this.animations;b<c.length;){var d=c[b];++b;if(d.get_name()==a)return d}return null},findIkConstraint:function(a){if(null==a)throw new h(new ga("constraintName cannot be null."));for(var b=0,c=this.ikConstraints;b<c.length;){var d=c[b];++b;if(d.name==a)return d}return null},findTransformConstraint:function(a){if(null==
a)throw new h(new ga("constraintName cannot be null."));for(var b=0,c=this.transformConstraints;b<c.length;){var d=c[b];++b;if(d.name==a)return d}return null},findPathConstraint:function(a){if(null==a)throw new h(new ga("constraintName cannot be null."));for(var b=this.pathConstraints,c=0,d=b.length;c<d;){var e=c++,e=b[e];if(e.name==a)return e}return null},findPathConstraintIndex:function(a){if(null==a)throw new h(new ga("pathConstraintName cannot be null."));for(var b=this.pathConstraints,c=0,d=
b.length;c<d;){var e=c++;if(b[e].name==a)return e}return-1},__class__:xo};var Ra=function(a){this.linkedMeshes=[];this.scale=1;this.attachmentLoader=a};i["workinman.display.spine.SkeletonJson"]=Ra;Ra.__name__=["workinman","display","spine","SkeletonJson"];Ra.readCurve=function(a,b,c){var d=t.field(a,"curve");if(null!=d)if("stepped"==d)b.setStepped(c);else{var e=t.field(a,"c2"),f=t.field(a,"c3"),a=t.field(a,"c4");b.setCurve(c,d,null==e?0:y.__cast(e,W),null==f?1:y.__cast(f,W),null==a?1:y.__cast(a,W))}};
Ra.toColor=function(a,b){if(8!=a.length&&6!=a.length)throw new h(new ga("Color hexidecimal length must be 8, recieved: "+a));return L.parseInt("0x"+a.substring(2*b,2*b+2))/255};Ra.getFloatArray=function(a,b,c){var a=null!=t.field(a,b)?t.field(a,b):[],b=[],d=a.length;if(1==c)for(c=0;c<d;){var e=c++;b[e]=a[e]}else for(e=0;e<d;){var f=e++;b[f]=a[f]*c}return b};Ra.getIntArray=function(a,b){for(var c=null!=t.field(a,b)?t.field(a,b):[],d=[],e=0,f=c.length;e<f;){var g=e++;d[g]=c[g]}return d};Ra.getUIntArray=
function(a,b){for(var c=null!=t.field(a,b)?t.field(a,b):[],d=[],e=0,f=c.length;e<f;){var g=e++;d[g]=c[g]}return d};Ra.prototype={readSkeletonData:function(a,b){if(null==a)throw new h(new ga("object cannot be null."));var c=JSON.parse(a),d=new xo;d.name=b;if(Object.prototype.hasOwnProperty.call(c,"skeleton")){var e=t.field(c,"skeleton"),f=t.field(e,"hash");d.hash=null==f?null:L.string(f);var g=t.field(e,"spine");d.version=null==g?null:L.string(g);var j=t.field(e,"x");d.x=null==j?0:y.__cast(j,W);var p=
t.field(e,"y");d.y=null==p?0:y.__cast(p,W);var i=t.field(e,"width");d.width=null==i?0:y.__cast(i,W);var k=t.field(e,"height");d.height=null==k?0:y.__cast(k,W);var l=t.field(e,"fps");d.fps=null==l?0:y.__cast(l,W);var n=t.field(e,"images");d.imagesPath=null==n?null:L.string(n)}for(var o=0,m=t.field(c,"bones");o<m.length;){var q=m[o];++o;var r=null,u=t.field(q,"parent"),s=null==u?null:L.string(u);if(null!=s&&(r=d.findBone(s),null==r))throw new h("Parent bone not found: "+s);var v=d.bones.length,w=t.field(q,
"name"),z=new ro(v,null==w?null:L.string(w),r),G=t.field(q,"length");z.length=(null==G?0:y.__cast(G,W))*this.scale;var H=t.field(q,"x");z.x=(null==H?0:y.__cast(H,W))*this.scale;var E=t.field(q,"y");z.y=(null==E?0:y.__cast(E,W))*this.scale;var F=t.field(q,"rotation");z.rotation=null==F?0:y.__cast(F,W);var J=t.field(q,"scaleX");z.scaleX=null==J?1:y.__cast(J,W);var O=t.field(q,"scaleY");z.scaleY=null==O?1:y.__cast(O,W);var P=t.field(q,"shearX");z.shearX=null==P?0:y.__cast(P,W);var K=t.field(q,"shearY");
z.shearY=null==K?0:y.__cast(K,W);var M=t.field(q,"transform");z.transformMode=null==M?"normal":L.string(M);var to=t.field(q,"skin");z.skinRequired=null==to?!1:y.__cast(to,eg);d.bones.push(z)}for(var rc=0,S=t.field(c,"slots");rc<S.length;){var V=S[rc];++rc;var Y=t.field(V,"name"),Ab=null==Y?null:L.string(Y),yh=t.field(V,"bone"),kc=null==yh?null:L.string(yh),qf=d.findBone(kc);if(null==qf)throw new h("Slot bone not found: "+kc);var va=new yo(d.slots.length,Ab,qf),fa=t.field(V,"color"),ka=null==fa?null:
L.string(fa);null!=ka&&va.color.setFrom(Ra.toColor(ka,0),Ra.toColor(ka,1),Ra.toColor(ka,2),Ra.toColor(ka,3));var gh=t.field(V,"dark"),Mc=null==gh?null:L.string(gh);null!=Mc&&(va.darkColor=new nf(Ra.toColor(Mc,0),Ra.toColor(Mc,1),Ra.toColor(Mc,2),0));var sh=t.field(V,"attachment");va.attachmentName=null==sh?null:L.string(sh);var U=t.field(V,"blend");va.blendMode=null==U?"normal":L.string(U);d.slots.push(va)}if(Object.prototype.hasOwnProperty.call(c,"ik"))for(var mi=0,ye=t.field(c,"ik");mi<ye.length;){var Sf=
ye[mi];++mi;var Vc=t.field(Sf,"name"),oa=new km(null==Vc?null:L.string(Vc)),Yb=t.field(Sf,"order");oa.order=null==Yb?0:y.__cast(Yb,ph);var tb;if(Object.prototype.hasOwnProperty.call(Sf,"skin")){var ng=t.field(Sf,"skin");tb=null==ng?!1:y.__cast(ng,eg)}else tb=!1;oa.skinRequired=tb;for(var Ug=0,Da=null!=t.field(Sf,"bones")?t.field(Sf,"bones"):[];Ug<Da.length;){var Z=Da[Ug];++Ug;var Le=d.findBone(Z);if(null==Le)throw new h("IK bone not found: "+Z);oa.bones.push(Le)}var lc=t.field(Sf,"target");oa.target=
d.findBone(null==lc?null:L.string(lc));if(null==oa.target){var Md=t.field(Sf,"target");throw new h("Target bone not found: "+(null==Md?null:L.string(Md)));}var I,Sa=t.field(Sf,"bendPositive");I=null==Sa||y.__cast(Sa,eg)?1:-1;oa.bendDirection=I;var ef=t.field(Sf,"compress");oa.compress=null==ef?!1:y.__cast(ef,eg);var Yp=t.field(Sf,"stretch");oa.stretch=null==Yp?!1:y.__cast(Yp,eg);var ca=t.field(Sf,"uniform");oa.uniform=null==ca?!1:y.__cast(ca,eg);var wa=t.field(Sf,"softness");oa.softness=(null==wa?
0:y.__cast(wa,W))*this.scale;var ra=t.field(Sf,"mix");oa.mix=null==ra?1:y.__cast(ra,W);d.ikConstraints.push(oa)}var Ja=t.field(c,"transform");if(null!=Ja)for(var Ea=0;Ea<Ja.length;){var A=Ja[Ea];++Ea;var xa=t.field(A,"name"),Ma=new nm(null==xa?null:L.string(xa)),$a=t.field(A,"order");Ma.order=null==$a?0:y.__cast($a,ph);var za;if(Object.prototype.hasOwnProperty.call(A,"skin")){var Db=t.field(A,"skin");za=null==Db?!1:y.__cast(Db,eg)}else za=!1;Ma.skinRequired=za;for(var ya=0,Ua=null!=t.field(A,"bones")?
t.field(A,"bones"):[];ya<Ua.length;){var Ba=Ua[ya];++ya;var zf=d.findBone(Ba);if(null==zf)throw new h("Transform bone not found: "+Ba);Ma.get_bones().push(zf)}var zj=t.field(A,"target"),zo=null==zj?null:L.string(zj);Ma.target=d.findBone(zo);if(null==Ma.target)throw new h(new ga("Target bone not found: "+zo));var ia=t.field(A,"rotation");Ma.offsetRotation=null==ia?0:y.__cast(ia,W);var Pc=t.field(A,"x");Ma.offsetX=(null==Pc?0:y.__cast(Pc,W))*this.scale;var ac=t.field(A,"y");Ma.offsetY=(null==ac?0:y.__cast(ac,
W))*this.scale;var wk=t.field(A,"scaleX");Ma.offsetScaleX=(null==wk?0:y.__cast(wk,W))*this.scale;var kb=t.field(A,"scaleY");Ma.offsetScaleY=(null==kb?0:y.__cast(kb,W))*this.scale;var C=t.field(A,"shearY");Ma.offsetShearY=(null==C?0:y.__cast(C,W))*this.scale;var Kg=t.field(A,"rotateMix");Ma.rotateMix=null==Kg?1:y.__cast(Kg,W);var ob=t.field(A,"translateMix");Ma.translateMix=null==ob?1:y.__cast(ob,W);var ta=t.field(A,"scaleMix");Ma.scaleMix=null==ta?1:y.__cast(ta,W);var pb=t.field(A,"shearMix");Ma.shearMix=
null==pb?1:y.__cast(pb,W);d.transformConstraints.push(Ma)}var Ja=null,qh=t.field(c,"path");if(null!=qh)for(var Q=0;Q<qh.length;){var aa=qh[Q];++Q;var Na=t.field(aa,"name"),ba=new lm(null==Na?null:L.string(Na)),Vf=t.field(aa,"order");ba.order=null==Vf?0:y.__cast(Vf,ph);var ha=t.field(aa,"skin");ba.skinRequired=null==ha?!1:y.__cast(ha,eg);for(var Hb=0,bb=null!=t.field(aa,"bones")?t.field(aa,"bones"):[];Hb<bb.length;){var ib=bb[Hb];++Hb;var Oa=d.findBone(ib);if(null==Oa)throw new h(new ga("Path constraint bone not found: "+
ib));ba.get_bones().push(Oa)}var Va=t.field(aa,"target");ba.target=d.findSlot(null==Va?null:L.string(Va));if(null==ba.target){var D=t.field(aa,"target");throw new h(new ga("Path target slot not found: "+(null==D?null:L.string(D))));}var lb=t.field(aa,"positionMode");ba.positionMode=null==lb?"percent":L.string(lb);var Ta=t.field(aa,"spacingMode");ba.spacingMode=null==Ta?"length":L.string(Ta);var jb=t.field(aa,"rotateMode");ba.rotateMode=null==jb?"tangent":L.string(jb);var gb=t.field(aa,"rotation");
ba.offsetRotation=null==gb?0:y.__cast(gb,W);var Ga=t.field(aa,"position");ba.position=null==Ga?0:y.__cast(Ga,W);"fixed"==ba.positionMode&&(ba.position*=this.scale);var Eb=t.field(aa,"spacing");ba.spacing=null==Eb?0:y.__cast(Eb,W);if("length"==ba.spacingMode||"fixed"==ba.spacingMode)ba.spacing*=this.scale;var cb=t.field(aa,"rotateMix");ba.rotateMix=null==cb?1:y.__cast(cb,W);var zb=t.field(aa,"translateMix");ba.translateMix=null==zb?1:y.__cast(zb,W);d.pathConstraints.push(ba)}var Nc=t.field(c,"skins");
if(0<Nc.length)for(var rd=0,la=Nc.length;rd<la;){for(var Ib=rd++,ub=Nc[Ib],wb=t.field(ub,"name"),mb=new Ao(null==wb?null:L.string(wb)),X=0,B=null!=t.field(ub,"bones")?t.field(ub,"bones"):[];X<B.length;){var Bb=B[X];++X;var db=d.findBone(Bb);if(null==db)throw new h(new ga("Skin bone not found: "+Bb));mb.get_bones().push(db)}for(var ab=0,x=null!=t.field(ub,"ik")?t.field(ub,"ik"):[];ab<x.length;){var Nb=x[ab];++ab;var Jb=d.findIkConstraint(Nb);if(null==Jb)throw new h(new ga("Skin IK constraint not found: "+
Nb));mb.get_constraints().push(Jb)}for(var qb=0,Zp=null!=t.field(ub,"transform")?t.field(ub,"transform"):[];qb<Zp.length;){var $=Zp[qb];++qb;var ea=d.findTransformConstraint($);if(null==ea)throw new h(new ga("Skin transform constraint not found: "+$));mb.get_constraints().push(ea)}for(var vb=0,eb=null!=t.field(ub,"path")?t.field(ub,"path"):[];vb<eb.length;){var Ob=eb[vb];++vb;var pa=d.findPathConstraint(Ob);if(null==pa)throw new h(new ga("Skin path constraint not found: "+Ob));mb.get_constraints().push(pa)}for(var Vb=
t.field(ub,"attachments"),ja=0,qa=t.fields(Vb);ja<qa.length;){var yb=qa[ja];++ja;for(var sa=d.findSlot(yb),Xb=t.field(Vb,yb),na=0,Pb=t.fields(Xb);na<Pb.length;){var R=Pb[na];++na;var ma=this.readAttachment(t.field(Xb,R),mb,sa.get_index(),R,d);null!=ma&&mb.setAttachment(sa.get_index(),R,ma)}}d.skins.push(mb);"default"==mb.get_name()&&(d.defaultSkin=mb)}for(var da=this.linkedMeshes,ae=0;ae<da.length;){var Lb=da[ae];++ae;var Ic=null==Lb.skin?d.defaultSkin:d.findSkin(Lb.skin);if(null==Ic)throw new h(new ga("Skin not found: "+
Lb.skin));var sc=Ic.getAttachment(Lb.slotIndex,Lb.parent);if(null==sc)throw new h(new ga("Parent mesh not found: "+Lb.parent));Lb.mesh.deformAttachment=Lb.inheritDeform?y.__cast(sc,Cc):Lb.mesh;Lb.mesh.set_parentMesh(y.__cast(sc,Ni));Lb.mesh.updateUVs()}da.length=0;var T=t.field(c,"events");if(null!=T)for(var Wb=0,bc=t.fields(T);Wb<bc.length;){var me=bc[Wb];++Wb;var Kb=t.field(T,me),dc=new so(me),Ha=t.field(Kb,"int");dc.intValue=null==Ha?0:y.__cast(Ha,ph);var Ca=t.field(Kb,"float");dc.floatValue=null==
Ca?0:y.__cast(Ca,W);var N=t.field(Kb,"string");dc.stringValue=null==N?"":L.string(N);var Fa=t.field(Kb,"audio");dc.audioPath=null==Fa?null:L.string(Fa);if(null!=dc.audioPath){var ic=t.field(Kb,"volume");dc.volume=null==ic?1:y.__cast(ic,W);var ne=t.field(Kb,"balance");dc.balance=null==ne?0:y.__cast(ne,W)}d.events.push(dc)}for(var Jd=t.field(c,"animations"),fe=0,gc=t.fields(Jd);fe<gc.length;){var Qc=gc[fe];++fe;this.readAnimation(t.field(Jd,Qc),Qc,d)}return d},readAttachment:function(a,b,c,d,e){var f=
t.field(a,"name");null!=f&&(d=L.string(f));var f=t.field(a,"type"),g=null==f?"region":L.string(f);new Bo(0,g);var f=t.field(a,"path"),j=null==f?d:L.string(f),f=this.scale;switch(g){case "boundingbox":f=this.attachmentLoader.newBoundingBoxAttachment(b,d);if(null==f)break;c=t.field(a,"vertexCount");this.readVertices(a,f,(null==c?0:y.__cast(c,ph))<<1);return f;case "clipping":f=this.attachmentLoader.newClippingAttachment(b,d);if(null==f)break;c=t.field(a,"end");c=null==c?null:L.string(c);if(null!=c){e=
e.findSlot(c);if(null==e)throw new h(new ga("Clipping end slot not found: "+c));f.endSlot=e}c=t.field(a,"vertexCount");c=null==c?0:y.__cast(c,ph);this.readVertices(a,f,c<<1);a=t.field(a,"color");b=null==a?null:L.string(a);null!=b&&""!=b&&f.color.setFrom(Ra.toColor(b,0),Ra.toColor(b,1),Ra.toColor(b,2),Ra.toColor(b,3));return f;case "linkedmesh":case "mesh":e=this.attachmentLoader.newMeshAttachment(b,d,j);if(null==e)break;e.path=j;b=t.field(a,"color");b=null==b?null:L.string(b);null!=b&&""!=b&&e.color.setFrom(Ra.toColor(b,
0),Ra.toColor(b,1),Ra.toColor(b,2),Ra.toColor(b,3));b=t.field(a,"width");e.width=(null==b?0:y.__cast(b,W))*f;b=t.field(a,"height");e.height=(null==b?0:y.__cast(b,W))*f;if(null!=t.field(a,"parent"))return f=t.field(a,"deform"),f=null==f?!0:y.__cast(f,eg),b=this.linkedMeshes,d=t.field(a,"skin"),d=null==d?null:L.string(d),a=t.field(a,"parent"),b.push(new Co(e,d,c,null==a?null:L.string(a),f)),e;f=Ra.getFloatArray(a,"uvs",1);this.readVertices(a,e,f.length);e.triangles=Ra.getUIntArray(a,"triangles");e.regionUVs=
f;e.updateUVs();f=t.field(a,"hull");e.hullLength=2*(null==f?0:y.__cast(f,ph));Object.prototype.hasOwnProperty.call(a,"edges")&&(e.edges=Ra.getIntArray(a,"edges"));return e;case "path":c=this.attachmentLoader.newPathAttachment(b,d);if(null==c)break;e=t.field(a,"closed");c.closed=null==e?!1:y.__cast(e,eg);e=t.field(a,"constantSpeed");c.constantSpeed=null==e?!0:y.__cast(e,eg);e=t.field(a,"vertexCount");e=null==e?0:y.__cast(e,ph);this.readVertices(a,c,e<<1);e=[];b=0;for(a=t.field(a,"lengths");b<a.length;)d=
a[b],++b,e.push(d*f);c.lengths=e;return c;case "point":c=this.attachmentLoader.newPointAttachment(b,d);if(null==c)break;e=t.field(a,"x");c.x=(null==e?0:y.__cast(e,W))*f;e=t.field(a,"y");c.y=(null==e?0:y.__cast(e,W))*f;f=t.field(a,"rotation");c.rotation=null==f?0:y.__cast(f,W);a=t.field(a,"color");b=null==a?null:L.string(a);null!=b&&""!=b&&c.color.setFrom(Ra.toColor(b,0),Ra.toColor(b,1),Ra.toColor(b,2),Ra.toColor(b,3));return c;case "region":c=this.attachmentLoader.newRegionAttachment(b,d,j);if(null==
c)break;c.path=j;e=t.field(a,"x");c.x=(null==e?0:y.__cast(e,W))*f;e=t.field(a,"y");c.y=(null==e?0:y.__cast(e,W))*f;e=t.field(a,"scaleX");c.scaleX=null==e?1:y.__cast(e,W);e=t.field(a,"scaleY");c.scaleY=null==e?1:y.__cast(e,W);e=t.field(a,"rotation");c.rotation=null==e?0:y.__cast(e,W);e=t.field(a,"width");c.width=(null==e?0:y.__cast(e,W))*f;e=t.field(a,"height");c.height=(null==e?0:y.__cast(e,W))*f;a=t.field(a,"color");b=null==a?null:L.string(a);null!=b&&""!=b&&c.color.setFrom(Ra.toColor(b,0),Ra.toColor(b,
1),Ra.toColor(b,2),Ra.toColor(b,3));c.updateOffset();return c}return null},readVertices:function(a,b,c){b.worldVerticesLength=c;a=Ra.getFloatArray(a,"vertices",1);if(c==a.length){if(1!=this.scale)for(var d=0,c=a.length;d<c;){var e=d++;a[e]*=this.scale}b.vertices=a}else{d=hb.allocFloat(9*c);d.length=0;c=hb.allocInt(3*c);for(e=c.length=0;e<a.length;){var f=a[e++]|0;c.push(f);for(f=e+4*f;e<f;)c.push(a[e]|0),d.push(a[e+1]*this.scale),d.push(a[e+2]*this.scale),d.push(a[e+3]),e+=4}b.bones=c;b.vertices=
d}},readAnimation:function(a,b,c){for(var d=this.scale,e=[],f=0,g,j,p,i,k=t.field(a,"slots"),l=0,n=t.fields(k);l<n.length;){var o=n[l];++l;g=t.field(k,o);j=c.findSlotIndex(o);for(var m=0,q=t.fields(g);m<q.length;){var r=q[m];++m;p=t.field(g,r);if("attachment"==r){var u=new Th(p.length);u.slotIndex=j;for(var s=i=0;s<p.length;){var v=p[s];++s;var z=t.field(v,"time"),w=t.field(v,"name");u.setFrame(i++,null==z?0:y.__cast(z,W),null==w?null:L.string(w))}e[e.length]=u;f=Math.max(f,u.frames[u.get_frameCount()-
1])}else if("color"==r){var G=new mc(p.length);G.slotIndex=j;for(var H=i=0;H<p.length;){var E=p[H];++H;var F=t.field(E,"color"),J=null==F?null:L.string(F),O=Ra.toColor(J,0),P=Ra.toColor(J,1),K=Ra.toColor(J,2),M=Ra.toColor(J,3),to=t.field(E,"time");G.setFrame(i,null==to?0:y.__cast(to,W),O,P,K,M);Ra.readCurve(E,G,i);++i}e[e.length]=G;f=Math.max(f,G.frames[(G.get_frameCount()-1)*mc.ENTRIES])}else if("twoColor"==r){var rc=new Fa(p.length);rc.slotIndex=j;for(var S=i=0;S<p.length;){var V=p[S];++S;var Y=
t.field(V,"light"),Ab=null==Y?null:L.string(Y),yh=t.field(V,"dark"),kc=null==yh?null:L.string(yh),qf=new nf(0,0,0,0),va=new nf(0,0,0,0);qf.setFrom(Ra.toColor(Ab,0),Ra.toColor(Ab,1),Ra.toColor(Ab,2),Ra.toColor(Ab,3));va.setFrom(Ra.toColor(kc,0),Ra.toColor(kc,1),Ra.toColor(kc,2),Ra.toColor(kc,3));var ka=t.field(V,"time");rc.setFrame(i,null==ka?0:y.__cast(ka,W),qf.r,qf.g,qf.b,qf.a,va.r,va.g,va.b);Ra.readCurve(V,rc,i);++i}e[e.length]=rc;f=Math.max(f,rc.frames[(rc.get_frameCount()-1)*Fa.ENTRIES])}else throw new h(new ga("Invalid timeline type for a slot: "+
r+" ("+o+")"));}}for(var fa=t.field(a,"bones"),gh=0,Mc=t.fields(fa);gh<Mc.length;){var sh=Mc[gh];++gh;var U=c.findBoneIndex(sh);if(-1==U)throw new h(new ga("Bone not found: "+sh));for(var mi=t.field(fa,sh),ye=0,Sf=t.fields(mi);ye<Sf.length;){var Vc=Sf[ye];++ye;p=t.field(mi,Vc);if("rotate"==Vc){var oa=new ad(p.length);oa.boneIndex=U;for(var Yb=i=0;Yb<p.length;){var tb=p[Yb];++Yb;var ng=t.field(tb,"time"),Ug=t.field(tb,"angle");oa.setFrame(i,null==ng?0:y.__cast(ng,W),null==Ug?0:y.__cast(Ug,W));Ra.readCurve(tb,
oa,i);++i}e[e.length]=oa;f=Math.max(f,oa.frames[(oa.get_frameCount()-1)*ad.ENTRIES])}else if("translate"==Vc||"scale"==Vc||"shear"==Vc){var Da,Z=1,Le=0;"scale"==Vc?(Da=new om(p.length),Le=1):"shear"==Vc?Da=new pm(p.length):(Da=new Ia(p.length),Z=d);Da.boneIndex=U;for(var lc=i=0;lc<p.length;){var Md=p[lc];++lc;var I=t.field(Md,"x"),Sa=(null==I?Le:y.__cast(I,W))*Z,ef=t.field(Md,"y"),ca=(null==ef?Le:y.__cast(ef,W))*Z,ha=t.field(Md,"time");Da.setFrame(i,null==ha?0:y.__cast(ha,W),Sa,ca);Ra.readCurve(Md,
Da,i);++i}e[e.length]=Da;f=Math.max(f,Da.frames[(Da.get_frameCount()-1)*Ia.ENTRIES])}else throw new h(new ga("Invalid timeline type for a bone: "+Vc+" ("+sh+")"));}}for(var wa=t.field(a,"ik"),ra=0,Ja=t.fields(wa);ra<Ja.length;){var Ea=Ja[ra];++ra;var A=c.findIkConstraint(Ea);p=t.field(wa,Ea);var xa=new Xa(p.length);xa.ikConstraintIndex=c.ikConstraints.indexOf(A);for(var Ma=i=0;Ma<p.length;){var $a=p[Ma];++Ma;var za=t.field($a,"mix"),Db=null==za?1:y.__cast(za,W),ya,Ua;if(Object.prototype.hasOwnProperty.call($a,
"bendPositive")){var Ba=t.field($a,"bendPositive");Ua=null==Ba?!1:y.__cast(Ba,eg)}else Ua=!0;ya=Ua?1:-1;var zf=t.field($a,"compress"),zj=null==zf?!1:y.__cast(zf,eg),zo=t.field($a,"stretch"),ia=null==zo?!1:y.__cast(zo,eg),Pc=t.field($a,"softness"),ac=(null==Pc?0:y.__cast(Pc,W))*d,wk=t.field($a,"time");xa.setFrame(i,null==wk?0:y.__cast(wk,W),Db,ac,ya,zj,ia);Ra.readCurve($a,xa,i);++i}e[e.length]=xa;f=Math.max(f,xa.frames[(xa.get_frameCount()-1)*Xa.ENTRIES])}for(var kb=t.field(a,"transform"),C=0,Kg=t.fields(kb);C<
Kg.length;){var ob=Kg[C];++C;var ta=c.findTransformConstraint(ob);p=t.field(kb,ob);var pb=new Cb(p.length);pb.transformConstraintIndex=c.transformConstraints.indexOf(ta);for(var qh=i=0;qh<p.length;){var Q=p[qh];++qh;var aa=t.field(Q,"rotateMix"),Na=null==aa?1:y.__cast(aa,W),ba=t.field(Q,"translateMix"),Vf=null==ba?1:y.__cast(ba,W),X=t.field(Q,"scaleMix"),Hb=null==X?1:y.__cast(X,W),bb=t.field(Q,"shearMix"),ib=null==bb?1:y.__cast(bb,W),Oa=t.field(Q,"time");pb.setFrame(i,null==Oa?0:y.__cast(Oa,W),Na,
Vf,Hb,ib);Ra.readCurve(Q,pb,i);++i}e.push(pb);f=Math.max(f,pb.frames[(pb.get_frameCount()-1)*Cb.ENTRIES])}for(var Va=t.field(a,"paths"),D=0,lb=t.fields(Va);D<lb.length;){var Ta=lb[D];++D;var jb=c.findPathConstraintIndex(Ta);if(-1==jb)throw new h(new ga("Path constraint not found: "+Ta));for(var gb=c.pathConstraints[jb],Ga=t.field(Va,Ta),Eb=0,cb=t.fields(Ga);Eb<cb.length;){var zb=cb[Eb];++Eb;p=t.field(Ga,zb);if("position"==zb||"spacing"==zb){var Nc,rd=1;if("spacing"==zb){if(Nc=new qm(p.length),"length"==
gb.spacingMode||"fixed"==gb.spacingMode)rd=d}else Nc=new bd(p.length),"fixed"==gb.positionMode&&(rd=d);Nc.pathConstraintIndex=jb;for(var la=i=0;la<p.length;){var Ib=p[la];++la;var ub=t.field(Ib,zb),wb=null==ub?0:y.__cast(ub,W),mb=t.field(Ib,"time");Nc.setFrame(i,null==mb?0:y.__cast(mb,W),wb*rd);Ra.readCurve(Ib,Nc,i);++i}e.push(Nc);f=Math.max(f,Nc.frames[(Nc.get_frameCount()-1)*bd.ENTRIES])}else if("mix"==zb){var $=new Yc(p.length);$.pathConstraintIndex=jb;for(var B=i=0;B<p.length;){var Bb=p[B];++B;
var db=t.field(Bb,"rotateMix"),ab=null==db?1:y.__cast(db,W),x=t.field(Bb,"translateMix"),Nb=null==x?1:y.__cast(x,W),Jb=t.field(Bb,"time");$.setFrame(i,null==Jb?0:y.__cast(Jb,W),ab,Nb);Ra.readCurve(Bb,$,i);++i}e.push($);f=Math.max(f,$.frames[($.get_frameCount()-1)*Yc.ENTRIES])}}}for(var qb=t.field(a,"deform"),ea=0,pa=t.fields(qb);ea<pa.length;){var ja=pa[ea];++ea;var vb=c.findSkin(ja);g=t.field(qb,ja);for(var eb=0,Ob=t.fields(g);eb<Ob.length;){var qa=Ob[eb];++eb;j=c.findSlotIndex(qa);for(var Vb=t.field(g,
qa),na=0,sa=t.fields(Vb);na<sa.length;){var yb=sa[na];++na;p=t.field(Vb,yb);var da=y.__cast(vb.getAttachment(j,yb),Cc);if(null==da)throw new h(new ga("Deform attachment not found: "+yb));var Xb=null!=da.bones,ma=da.vertices,Pb=Xb?2*(ma.length/3)|0:ma.length,R=new rm(p.length);R.slotIndex=j;R.attachment=da;for(var T=i=0;T<p.length;){var Ha=p[T];++T;var ae;if(null==t.field(Ha,"vertices"))ae=Xb?hb.allocFloat(Pb):ma;else{ae=hb.allocFloat(Pb);for(var Lb=t.field(Ha,"offset"),Ic=null==Lb?0:y.__cast(Lb,ph),
sc=Ra.getFloatArray(Ha,"vertices",1),Ca=0,Wb=sc.length;Ca<Wb;){var bc=Ca++;ae[Ic+bc]=sc[bc]}if(1!=d)for(var me=Ic,Kb=Ic+sc.length;me<Kb;){var dc=me++;ae[dc]*=d}if(!Xb)for(var Aa=0,Qa=Pb;Aa<Qa;){var N=Aa++;ae[N]+=ma[N]}}var Za=t.field(Ha,"time");R.setFrame(i,null==Za?0:y.__cast(Za,W),ae);Ra.readCurve(Ha,R,i);++i}e[e.length]=R;f=Math.max(f,R.frames[R.get_frameCount()-1])}}}var ic=t.field(a,"drawOrder");null==ic&&(ic=t.field(a,"draworder"));if(null!=ic&&0<ic.length){for(var ne=new Oi(ic.length),Jd=c.slots.length,
fe=i=0;fe<ic.length;){var gc=ic[fe];++fe;var Qc=null;if(Object.prototype.hasOwnProperty.call(gc,"offsets")){for(var Qc=[],ua=Jd-1;0<=ua;)Qc[ua]=-1,--ua;for(var $p=t.field(gc,"offsets"),sb=[],Me=0,ze=0,La=0;La<$p.length;){var Ka=$p[La];++La;var Ce=t.field(Ka,"slot");j=c.findSlotIndex(null==Ce?null:L.string(Ce));if(-1==j){var nb=t.field(Ka,"slot");throw new h(new ga("Slot not found: "+(null==nb?null:L.string(nb))));}for(;Me!=j;)sb[ze++]=Me++;var Pa=t.field(Ka,"offset");Qc[Me+(null==Pa?0:y.__cast(Pa,
ph))]=Me++}for(;Me<Jd;)sb[ze++]=Me++;for(var Ya=Jd-1;0<=Ya;)-1==Qc[Ya]&&(Qc[Ya]=sb[--ze]),--Ya}var Pd=t.field(gc,"time");ne.setFrame(i++,null==Pd?0:y.__cast(Pd,W),Qc)}e[e.length]=ne;f=Math.max(f,ne.frames[ne.get_frameCount()-1])}var Mf=t.field(a,"events");if(null!=Mf&&0<Mf.length){for(var Wf=new xk(Mf.length),ve=i=0;ve<Mf.length;){var jd=Mf[ve];++ve;var og=t.field(jd,"name"),cd=c.findEvent(null==og?null:L.string(og));if(null==cd){var Jc=t.field(jd,"name");throw new h(new ga("Event not found: "+(null==
Jc?null:L.string(Jc))));}var xb=t.field(jd,"time"),sd=new jm(null==xb?0:y.__cast(xb,W),cd),nc=cd.intValue,be=t.field(jd,"int");sd.intValue=null==be?nc:y.__cast(be,ph);var hh=cd.floatValue,kd=t.field(jd,"float");sd.floatValue=null==kd?hh:y.__cast(kd,W);var tc=cd.stringValue,Rc=t.field(jd,"string");sd.stringValue=null==Rc?tc:L.string(Rc);if(null!=cd.audioPath){var Wa=t.field(jd,"volume");sd.volume=null==Wa?1:y.__cast(Wa,W);var fb=t.field(jd,"balance");sd.balance=null==fb?0:y.__cast(fb,W)}Wf.setFrame(i++,
sd)}e[e.length]=Wf;f=Math.max(f,Wf.frames[Math.floor(Wf.get_frameCount()-1)])}c.animations[c.animations.length]=new ld(b,e,f)},__class__:Ra};var Co=function(a,b,c,d,e){this.mesh=a;this.skin=b;this.slotIndex=c;this.parent=d;this.inheritDeform=e};i["workinman.display.spine.LinkedMesh"]=Co;Co.__name__=["workinman","display","spine","LinkedMesh"];Co.prototype={__class__:Co};var Ao=function(a){this._constraints=[];this._bones=[];this._attachments=[];if(null==a)throw new h(new ga("name cannot be null."));
this._name=a};i["workinman.display.spine.Skin"]=Ao;Ao.__name__=["workinman","display","spine","Skin"];Ao.prototype={setAttachment:function(a,b,c){if(null==c)throw new h(new ga("attachment cannot be null."));a>=this._attachments.length&&(this._attachments.length=a+1);null==this._attachments[a]&&(this._attachments[a]=new $c);a=this._attachments[a];null!=K[b]?a.setReserved(b,c):a.h[b]=c},getAttachment:function(a,b){if(a>=this._attachments.length)return null;var c=this._attachments[a];return null!=c?
null!=K[b]?c.getReserved(b):c.h[b]:null},get_attachments:function(){return this._attachments},get_bones:function(){return this._bones},get_constraints:function(){return this._constraints},get_name:function(){return this._name},__class__:Ao,__properties__:{get_name:"get_name",get_constraints:"get_constraints",get_bones:"get_bones",get_attachments:"get_attachments"}};var wo=function(a,b){this.deform=[];if(null==a)throw new h(new ga("data cannot be null."));if(null==b)throw new h(new ga("bone cannot be null."));
this._data=a;this._bone=b;this.color=new nf(1,1,1,1);this.darkColor=null==a.darkColor?null:new nf(1,1,1,1);this.setToSetupPose()};i["workinman.display.spine.Slot"]=wo;wo.__name__=["workinman","display","spine","Slot"];wo.prototype={get_data:function(){return this._data},get_bone:function(){return this._bone},get_skeleton:function(){return this._bone.get_skeleton()},get_attachment:function(){return this._attachment},set_attachment:function(a){if(this._attachment==a)return this._attachment;this._attachment=
a;this._attachmentTime=this._bone.get_skeleton().time;this.deform.length=0;return this._attachment},setToSetupPose:function(){this.color.setFromColor(this.get_data().color);null!=this.darkColor&&this.darkColor.setFromColor(this.get_data().darkColor);null==this._data.attachmentName?this.set_attachment(null):(this._attachment=null,this.set_attachment(this._bone.get_skeleton().getAttachmentForSlotIndex(this.get_data().get_index(),this.get_data().attachmentName)))},__class__:wo,__properties__:{set_attachment:"set_attachment",
get_attachment:"get_attachment",get_skeleton:"get_skeleton",get_bone:"get_bone",get_data:"get_data"}};var yo=function(a,b,c){this.color=new nf(1,1,1,1);if(0>a)throw new h(new ga("index must be >= 0."));if(null==b)throw new h(new ga("name cannot be null."));if(null==c)throw new h(new ga("boneData cannot be null."));this._index=a;this._name=b;this._boneData=c};i["workinman.display.spine.SlotData"]=yo;yo.__name__=["workinman","display","spine","SlotData"];yo.prototype={get_index:function(){return this._index},
get_name:function(){return this._name},get_boneData:function(){return this._boneData},__class__:yo,__properties__:{get_boneData:"get_boneData",get_name:"get_name",get_index:"get_index"}};var mm=function(a,b){this._temp=[0,0];if(null==a)throw new h(new ga("data cannot be null."));if(null==b)throw new h(new ga("skeleton cannot be null."));this._data=a;this.rotateMix=a.rotateMix;this.translateMix=a.translateMix;this.scaleMix=a.scaleMix;this.shearMix=a.shearMix;this._bones=[];for(var c=0,d=a.get_bones();c<
d.length;){var e=d[c];++c;this._bones.push(b.findBone(e.get_name()))}this.target=b.findBone(a.target.get_name())};i["workinman.display.spine.TransformConstraint"]=mm;mm.__name__=["workinman","display","spine","TransformConstraint"];mm.__interfaces__=[xj];mm.prototype={update:function(){this.get_data().local?this.get_data().relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.get_data().relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},applyAbsoluteWorld:function(){for(var a=
this.rotateMix,b=this.translateMix,c=this.scaleMix,d=this.shearMix,e=this.target,f=e.a,g=e.b,j=e.c,p=e.d,h=0<f*p-g*j?pa.degRad:-pa.degRad,i=this.get_data().offsetRotation*h,h=this.get_data().offsetShearY*h,k=this._bones,l=0,o=k.length;l<o;){var n=l++,n=k[n],m=!1;if(0!=a){var m=n.a,q=n.b,r=n.c,u=n.d,s=Math.atan2(j,f)-Math.atan2(r,m)+i;s>Math.PI?s-=2*Math.PI:s<-Math.PI&&(s+=2*Math.PI);var s=s*a,t=Math.cos(s),s=Math.sin(s);n.a=t*m-s*r;n.b=t*q-s*u;n.c=s*m+t*r;n.d=s*q+t*u;m=!0}0!=b&&(this._temp[0]=this.get_data().offsetX,
this._temp[1]=this.get_data().offsetY,e.localToWorld(this._temp),n.worldX+=(this._temp[0]-n.worldX)*b,n.worldY+=(this._temp[1]-n.worldY)*b,m=!0);0<c&&(m=Math.sqrt(n.a*n.a+n.c*n.c),q=Math.sqrt(f*f+j*j),1.0E-5<m&&(m=(m+(q-m+this.get_data().offsetScaleX)*c)/m),n.a*=m,n.c*=m,m=Math.sqrt(n.b*n.b+n.d*n.d),q=Math.sqrt(g*g+p*p),1.0E-5<m&&(m=(m+(q-m+this.get_data().offsetScaleY)*c)/m),n.b*=m,n.d*=m,m=!0);0<d&&(q=n.b,r=n.d,u=Math.atan2(r,q),m=Math.atan2(p,g)-Math.atan2(j,f)-(u-Math.atan2(n.c,n.a)),m>Math.PI?
m-=2*Math.PI:m<-Math.PI&&(m+=2*Math.PI),m=u+(m+h)*d,q=Math.sqrt(q*q+r*r),n.b=Math.cos(m)*q,n.d=Math.sin(m)*q,m=!0);m&&(n.appliedValid=!1)}},applyRelativeWorld:function(){for(var a=this.rotateMix,b=this.translateMix,c=this.scaleMix,d=this.shearMix,e=this.target,f=e.a,g=e.b,j=e.c,p=e.d,h=0<f*p-g*j?pa.degRad:-pa.degRad,i=this.get_data().offsetRotation*h,h=this.get_data().offsetShearY*h,k=this.get_bones(),l=0,n=k.length;l<n;){var o=l++,o=k[o],m=!1;if(0!=a){var m=o.a,q=o.b,r=o.c,u=o.d,s=Math.atan2(j,f)+
i;s>pa.PI?s-=pa.PI2:s<-pa.PI&&(s+=pa.PI2);var s=s*a,t=Math.cos(s),s=Math.sin(s);o.a=t*m-s*r;o.b=t*q-s*u;o.c=s*m+t*r;o.d=s*q+t*u;m=!0}0!=b&&(m=this._temp,m[0]=this._data.offsetX,m[1]=this._data.offsetY,e.localToWorld(m),o.worldX+=m[0]*b,o.worldY+=m[1]*b,m=!0);0<c&&(m=(Math.sqrt(f*f+j*j)-1+this.get_data().offsetScaleX)*c+1,o.a*=m,o.c*=m,m=(Math.sqrt(g*g+p*p)-1+this.get_data().offsetScaleY)*c+1,o.b*=m,o.d*=m,m=!0);0<d&&(m=Math.atan2(p,g)-Math.atan2(j,f),m>pa.PI?m-=pa.PI2:m<-pa.PI&&(m+=pa.PI2),q=o.b,
r=o.d,m=Math.atan2(r,q)+(m-pa.PI/2+h)*d,q=Math.sqrt(q*q+r*r),o.b=Math.cos(m)*q,o.d=Math.sin(m)*q,m=!0);m&&(o.appliedValid=!1)}},applyAbsoluteLocal:function(){var a=this.rotateMix,b=this.translateMix,c=this.scaleMix,d=this.shearMix,e=this.target;e.appliedValid||e.updateAppliedTransform();for(var f=this.get_bones(),g=0,j=f.length;g<j;){var p=g++,p=f[p];p.appliedValid||p.updateAppliedTransform();var h=p.arotation;if(0!=a)var i=e.arotation-h+this.get_data().offsetRotation,i=i-360*(16384-(16384.499999999996-
i/360|0)),h=h+i*a;var i=p.ax,k=p.ay;0!=b&&(i+=(e.ax-i+this.get_data().offsetX)*b,k+=(e.ay-k+this.get_data().offsetY)*b);var l=p.ascaleX,n=p.ascaleY;0!=c&&(1.0E-5<l&&(l=(l+(e.ascaleX-l+this.get_data().offsetScaleX)*c)/l),1.0E-5<n&&(n=(n+(e.ascaleY-n+this.get_data().offsetScaleY)*c)/n));var o=p.ashearY;if(0!=d){var m=e.ashearY-o+this.get_data().offsetShearY,m=m-360*(16384-(16384.499999999996-m/360|0));p.shearY+=m*d}p.updateWorldTransformWith(i,k,h,l,n,p.ashearX,o)}},applyRelativeLocal:function(){var a=
this.rotateMix,b=this.translateMix,c=this.scaleMix,d=this.shearMix,e=this.target;e.appliedValid||e.updateAppliedTransform();for(var f=this.get_bones(),g=0,j=f.length;g<j;){var p=g++,p=f[p];p.appliedValid||p.updateAppliedTransform();var h=p.arotation;0!=a&&(h+=(e.arotation+this.get_data().offsetRotation)*a);var i=p.ax,k=p.ay;0!=b&&(i+=(e.ax+this.get_data().offsetX)*b,k+=(e.ay+this.get_data().offsetY)*b);var l=p.ascaleX,n=p.ascaleY;0!=c&&(1.0E-5<l&&(l*=(e.ascaleX-1+this.get_data().offsetScaleX)*c+1),
1.0E-5<n&&(n*=(e.ascaleY-1+this.get_data().offsetScaleY)*c+1));var o=p.ashearY;0!=d&&(o+=(e.ashearY+this.get_data().offsetShearY)*d);p.updateWorldTransformWith(i,k,h,l,n,p.ashearX,o)}},get_data:function(){return this._data},get_bones:function(){return this._bones},__class__:mm,__properties__:{get_bones:"get_bones",get_data:"get_data"}};var nm=function(a){this.relative=this.local=!1;this._bones=[];Uf.call(this,a,0,!1)};i["workinman.display.spine.TransformConstraintData"]=nm;nm.__name__=["workinman",
"display","spine","TransformConstraintData"];nm.__super__=Uf;nm.prototype=z(Uf.prototype,{get_bones:function(){return this._bones},__class__:nm,__properties__:{get_bones:"get_bones"}});var ld=function(a,b,c){this._timelineIds=new Ke;if(null==a)throw new h(new ga("name cannot be null."));if(null==b)throw new h(new ga("timelines cannot be null."));this._name=a;this._timelines=b;for(var a=0,d=b.length;a<d;){var e=a++,f=this._timelineIds,e=b[e].getPropertyId();f.h[e]=!0}this.duration=c};i["workinman.display.spine.animation.Animation"]=
ld;ld.__name__=["workinman","display","spine","animation","Animation"];ld.binarySearch=function(a,b,c){var d=0,e=Math.round(a.length/c-2);if(0==e)return c;for(var f=e>>>1;;){a[(f+1)*c|0]<=b?d=f+1:e=f;if(d==e)return(d+1)*c;f=d+e>>>1}};ld.binarySearch1=function(a,b){var c=0,d=a.length-2;if(0==d)return 1;for(var e=d>>>1;;){a[e+1|0]<=b?c=e+1:d=e;if(c==d)return c+1;e=c+d>>>1}};ld.prototype={hasTimeline:function(a){return!0==this._timelineIds.h[a]},get_timelines:function(){return this._timelines},get_name:function(){return this._name},
__class__:ld,__properties__:{get_name:"get_name",get_timelines:"get_timelines"}};var $d=function(a){this.timeScale=1;this.propertyIDs=new $c;this.onEvent=new gg;this.onComplete=new gg;this.onDispose=new gg;this.onEnd=new gg;this.onInterrupt=new gg;this.onStart=new gg;this.events=[];this.tracks=[];if(null==a)throw new h(new ga("data can not be null"));this.data=a;this.queue=new Do(this);this.trackEntryPool=new vo(function(){return new Aj})};i["workinman.display.spine.animation.AnimationState"]=$d;
$d.__name__=["workinman","display","spine","animation","AnimationState"];$d.prototype={update:function(a){for(var a=a*this.timeScale,b=0,c=this.tracks.length;b<c;){var d=b++,e=this.tracks[d];if(null!=e){e.animationLast=e.nextAnimationLast;e.trackLast=e.nextTrackLast;var f=a*e.timeScale;if(0<e.delay){e.delay-=f;if(0<e.delay)continue;f=-e.delay;e.delay=0}var g=e.next;if(null!=g){var j=e.trackLast-g.delay;if(0<=j){g.delay=0;g.trackTime+=0==e.timeScale?0:(j/e.timeScale+a)*g.timeScale;e.trackTime+=f;for(this.setCurrent(d,
g,!0);null!=g.mixingFrom;)g.mixTime+=a,g=g.mixingFrom;continue}}else if(e.trackLast>=e.trackEnd&&null==e.mixingFrom){this.tracks[d]=null;this.queue.end(e);this.disposeNext(e);continue}if(null!=e.mixingFrom&&this.updateMixingFrom(e,a)){d=e.mixingFrom;e.mixingFrom=null;null!=d&&(d.mixingTo=null);for(;null!=d;)this.queue.end(d),d=d.mixingFrom}e.trackTime+=f}}this.queue.drain()},updateMixingFrom:function(a,b){var c=a.mixingFrom;if(null==c)return!0;var d=this.updateMixingFrom(c,b);c.animationLast=c.nextAnimationLast;
c.trackLast=c.nextTrackLast;if(0<a.mixTime&&a.mixTime>=a.mixDuration){if(0==c.totalAlpha||0==a.mixDuration)a.mixingFrom=c.mixingFrom,null!=c.mixingFrom&&(c.mixingFrom.mixingTo=a),a.interruptAlpha=c.interruptAlpha,this.queue.end(c);return d}c.trackTime+=b*c.timeScale;a.mixTime+=b;return!1},apply:function(a){if(null==a)throw new h(new ga("skeleton cannot be null."));this.animationsChanged&&this._animationsChanged();for(var b=this.events,c=!1,d=0,e=this.tracks.length;d<e;){var f=d++,g=this.tracks[f];
if(!(null==g||0<g.delay)){var c=!0,j=0==f?1:g.mixBlend,p=g.alpha;null!=g.mixingFrom?p*=this.applyMixingFrom(g,a,j):g.trackTime>=g.trackEnd&&null==g.next&&(p=0);var i=g.animationLast,k=g.getAnimationTime(),l=g.animation.get_timelines().length,n=g.animation.get_timelines();if(0==f&&1==p||3==j)for(var f=0,o=l;f<o;){var m=f++;n[m].apply(a,i,k,b,p,j,0)}else{f=g.timelineMode;if(o=0==g.timelinesRotation.length)g.timelinesRotation.length=l<<1;for(var m=g.timelinesRotation,q=0;q<l;){var r=q++,s=n[r],u=(f[r]&
$d.NOT_LAST-1)==$d.SUBSEQUENT?j:0;y.__instanceof(s,ad)?this.applyRotateTimeline(s,a,k,p,u,m,r<<1,o):s.apply(a,i,k,b,p,u,0)}}this.queueEvents(g,k);b.length=0;g.nextAnimationLast=k;g.nextTrackLast=g.trackTime}}this.queue.drain();return c},applyMixingFrom:function(a,b,c){var d=a.mixingFrom;null!=d.mixingFrom&&this.applyMixingFrom(d,b,c);var e=0;0==a.mixDuration?(e=1,1==c&&(c=0)):(e=a.mixTime/a.mixDuration,1<e&&(e=1),1!=c&&(c=d.mixBlend));var f=e<d.eventThreshold?this.events:null,g=e<d.attachmentThreshold,
j=e<d.drawOrderThreshold,p=d.animationLast,h=d.getAnimationTime(),i=d.animation.get_timelines().length,k=d.animation.get_timelines(),l=d.alpha*a.interruptAlpha,n=l*(1-e);if(3==c)for(g=0;g<i;)j=g++,k[j].apply(b,p,h,f,n,c,1);else{var o=d.timelineMode,m=d.timelineHoldMix,q=0==d.timelinesRotation.length;q&&(d.timelinesRotation.length=i<<1);for(var r=d.timelinesRotation,s=d.totalAlpha=0;s<i;){var u=s++,t=k[u],v=1,z,w=0;switch(o[u]&$d.NOT_LAST-1){case 0:z=c;if(!g&&y.__instanceof(t,Th)){if((o[u]&$d.NOT_LAST)==
$d.NOT_LAST)continue;z=0}if(!j&&y.__instanceof(t,Oi))continue;w=n;break;case 1:z=0;w=n;break;case 2:z=0;w=l;break;default:z=0,w=m[u],w=l*Math.max(0,1-w.mixTime/w.mixDuration)}d.totalAlpha+=w;if(y.__instanceof(t,ad))this.applyRotateTimeline(t,b,h,w,z,r,u<<1,q);else{if(0==z)if(y.__instanceof(t,Th)){if(g||(o[u]&$d.NOT_LAST)==$d.NOT_LAST)v=0}else y.__instanceof(t,Oi)&&j&&(v=0);t.apply(b,p,h,f,w,z,v)}}}0<a.mixDuration&&this.queueEvents(d,h);this.events.length=0;d.nextAnimationLast=h;d.nextTrackLast=d.trackTime;
return e},applyRotateTimeline:function(a,b,c,d,e,f,g,j){j&&(f[g]=0);if(1==d)a.apply(b,0,c,null,1,e,0);else{var p=y.__cast(a,ad),h=p.frames,b=b.bones[p.boneIndex];if(b.active){var i=a=0;if(c<h[0])switch(e){case 0:b.rotation=b.get_data().rotation;break;case 1:a=b.rotation;i=b.get_data().rotation;break;default:return}else if(a=0==e?b.get_data().rotation:b.rotation,c>=h[h.length-ad.ENTRIES])i=b.get_data().rotation+h[h.length+ad.PREV_ROTATION];else var i=ld.binarySearch(h,c,ad.ENTRIES),e=h[i+ad.PREV_ROTATION],
k=h[i],c=p.getCurvePercent((i>>1)-1,1-(c-k)/(h[i+ad.PREV_TIME]-k)),i=h[i+ad.ROTATION]-e,i=e+(i-360*(16384-(16384.499999999996-i/360|0)))*c+b.get_data().rotation,i=i-360*(16384-(16384.499999999996-i/360|0));c=i-a;c-=360*(16384-(16384.499999999996-c/360|0));0==c?e=f[g]:(j?(j=0,e=c):(j=f[g],e=f[g+1]),h=0<c,p=0<=j,pa.signum(e)!=pa.signum(c)&&90>=Math.abs(e)&&(180<Math.abs(j)&&(j+=360*pa.signum(j)),p=h),e=c+j-j%360,p!=h&&(e+=360*pa.signum(j)),f[g]=e);f[g+1]=c;a+=e*d;b.rotation=a-360*(16384-(16384.499999999996-
a/360|0))}}},queueEvents:function(a,b){for(var c=a.animationStart,d=a.animationEnd,e=d-c,f=a.trackLast%e,g=this.events,j,p=0,h=g.length;p<h;){j=p++;j=g[j];if(j.time<f)break;j.time>d||this.queue.event(a,j)}(a.loop?0!=e?f>a.trackTime%e:1:b>=d&&a.animationLast<d)&&this.queue.complete(a);d=0;for(e=g.length;d<e;)f=d++,j=g[f],j.time<c||this.queue.event(a,g[f])},clearTracks:function(){var a=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var b=0,c=this.tracks.length;b<c;)this.clearTrack(b++);this.tracks.length=
0;this.queue.drainDisabled=a;this.queue.drain()},clearTrack:function(a){if(!(a>=this.tracks.length)&&(a=this.tracks[a],null!=a)){this.queue.end(a);this.disposeNext(a);for(var b=a;;){var c=b.mixingFrom;if(null==c)break;this.queue.end(c);b.mixingFrom=null;b.mixingTo=null;b=c}this.tracks[a.trackIndex]=null;this.queue.drain()}},setCurrent:function(a,b,c){var d=this.expandToIndex(a);this.tracks[a]=b;null!=d&&(c&&this.queue.interrupt(d),b.mixingFrom=d,d.mixingTo=b,b.mixTime=0,null!=d.mixingFrom&&0<d.mixDuration&&
(b.interruptAlpha*=Math.min(1,d.mixTime/d.mixDuration)),d.timelinesRotation.length=0);this.queue.start(b)},setAnimationByName:function(a,b,c){var d=this.data.get_skeletonData().findAnimation(b);if(null==d)throw new h(new ga("Animation not found: "+b));return this.setAnimation(a,d,c)},setAnimation:function(a,b,c){if(null==b)throw new h(new ga("animation cannot be null."));var d=!0,e=this.expandToIndex(a);null!=e&&(-1==e.nextTrackLast?(this.tracks[a]=e.mixingFrom,this.queue.interrupt(e),this.queue.end(e),
this.disposeNext(e),e=e.mixingFrom,d=!1):this.disposeNext(e));b=this.trackEntry(a,b,c,e);this.setCurrent(a,b,d);this.queue.drain();return b},addAnimationByName:function(a,b,c,d){var e=this.data.get_skeletonData().findAnimation(b);if(null==e)throw new h(new ga("Animation not found: "+b));return this.addAnimation(a,e,c,d)},addAnimation:function(a,b,c,d){if(null==b)throw new h(new ga("animation cannot be null."));var e=this.expandToIndex(a);if(null!=e)for(;null!=e.next;)e=e.next;b=this.trackEntry(a,
b,c,e);null==e?(this.setCurrent(a,b,!0),this.queue.drain()):(e.next=b,0>=d&&(a=e.animationEnd-e.animationStart,d=0!=a?e.loop?d+a*(1+(e.trackTime/a|0)):d+Math.max(a,e.trackTime):e.trackTime));b.delay=d;return b},expandToIndex:function(a){if(a<this.tracks.length)return this.tracks[a];this.tracks.length=a+1;return null},trackEntry:function(a,b,c,d){var e=y.__cast(this.trackEntryPool.obtain(),Aj);e.trackIndex=a;e.animation=b;e.loop=c;e.holdPrevious=!1;e.eventThreshold=0;e.attachmentThreshold=0;e.drawOrderThreshold=
0;e.animationStart=0;e.animationEnd=b.duration;e.animationLast=-1;e.nextAnimationLast=-1;e.delay=0;e.trackTime=0;e.trackLast=-1;e.nextTrackLast=-1;e.trackEnd=Infinity;e.timeScale=1;e.alpha=1;e.interruptAlpha=1;e.mixTime=0;e.mixDuration=null==d?0:this.data.getMix(d.animation,b);return e},disposeNext:function(a){for(var b=a.next;null!=b;)this.queue.dispose(b),b=b.next;a.next=null},_animationsChanged:function(){this.animationsChanged=!1;this.propertyIDs=new $c;for(var a=0,b=null,a=0,c=this.tracks.length;a<
c;)if(b=this.tracks[a++],null!=b){for(;null!=b.mixingFrom;)b=b.mixingFrom;for(;!((null==b.mixingTo||3!=b.mixBlend)&&this.computeHold(b),b=b.mixingTo,null==b););}this.propertyIDs=new $c;for(a=this.tracks.length-1;0<=a;){for(b=this.tracks[a];null!=b;)this.computeNotLast(b),b=b.mixingFrom;--a}},computeNotLast:function(a){for(var b=a.animation.get_timelines(),c=a.animation.get_timelines().length,a=a.timelineMode,d=this.propertyIDs,e=0;e<c;){var f=e++;if(y.__instanceof(b[f],Th)){var g=y.__cast(b[f],Th).slotIndex+
"",j=null!=K[g]?d.getReserved(g):d.h[g];null!=K[g]?d.setReserved(g,!0):d.h[g]=!0;null!=j&&(a[f]|=$d.NOT_LAST)}}},computeHold:function(a){var b=a.mixingTo,c=a.animation.get_timelines(),d=a.animation.get_timelines().length,e=a.timelineMode;e.length=d;var f=a.timelineHoldMix;f.length=0;var g=this.propertyIDs;if(null!=b&&b.holdPrevious)for(var j=0;j<d;){var p=j++,h=c[p].getPropertyId()+"";null!=K[h]?g.setReserved(h,!0):g.h[h]=!0;e[p]=$d.HOLD}else for(j=0;j<d;)(function(d){return function(){var j=c[d[0]],
p=j.getPropertyId(),h=p+"",i=null!=K[h]?g.getReserved(h):g.h[h];null!=K[h]?g.setReserved(h,!0):g.h[h]=!0;if(null!=i)e[d[0]]=$d.SUBSEQUENT;else if(null==b||y.__instanceof(j,Th)||y.__instanceof(j,Oi)||y.__instanceof(j,xk)||!b.animation.hasTimeline(p))e[d[0]]=$d.FIRST;else{for(j=b.mixingTo;null!=j;)if(j.animation.hasTimeline(p))j=j.mixingTo;else{if(0<a.mixDuration){e[d[0]]=$d.HOLD_MIX;f[d[0]]=a;return}break}e[d[0]]=$d.HOLD}}})([j++])()},getCurrent:function(a){return a>=this.tracks.length?null:this.tracks[a]},
__class__:$d};var $n=function(a){this.defaultMix=0;this._skeletonData=a;this.animationToMixTime=new $c};i["workinman.display.spine.animation.AnimationStateData"]=$n;$n.__name__=["workinman","display","spine","animation","AnimationStateData"];$n.prototype={get_skeletonData:function(){return this._skeletonData},setMixByName:function(a,b,c){var d=this._skeletonData.findAnimation(a);if(null==d)throw new h(new ga("Animation not found: "+a));a=this._skeletonData.findAnimation(b);if(null==a)throw new h(new ga("Animation not found: "+
b));this.setMix(d,a,c)},setMix:function(a,b,c){if(null==a)throw new h(new ga("from cannot be null."));if(null==b)throw new h(new ga("to cannot be null."));var d=this.animationToMixTime,a=a.get_name()+":"+b.get_name();null!=K[a]?d.setReserved(a,c):d.h[a]=c},getMix:function(a,b){var c=this.animationToMixTime,d=a.get_name()+":"+b.get_name(),c=null!=K[d]?c.getReserved(d):c.h[d];return null==c?this.defaultMix:c},__class__:$n,__properties__:{get_skeletonData:"get_skeletonData"}};var Bj=function(){};i["workinman.display.spine.animation.Timeline"]=
Bj;Bj.__name__=["workinman","display","spine","animation","Timeline"];Bj.prototype={__class__:Bj};var Th=function(a){this.frames=hb.allocFloat(a);this.attachmentNames=hb.allocString(a)};i["workinman.display.spine.animation.AttachmentTimeline"]=Th;Th.__name__=["workinman","display","spine","animation","AttachmentTimeline"];Th.__interfaces__=[Bj];Th.prototype={get_frameCount:function(){return this.frames.length},getPropertyId:function(){return 67108864+this.slotIndex},setFrame:function(a,b,c){this.frames[a]=
b;this.attachmentNames[a]=c},apply:function(a,b,c,d,e,f,g){b=a.slots[this.slotIndex];if(b.get_bone().active)if(1==g&&0==f)c=b.get_data().attachmentName,b.set_attachment(null==c?null:a.getAttachmentForSlotIndex(this.slotIndex,c));else if(g=this.frames,c<g[0]){if(0==f||1==f)c=b.get_data().attachmentName,b.set_attachment(null==c?null:a.getAttachmentForSlotIndex(this.slotIndex,c))}else c=this.attachmentNames[c>=g[g.length-1]?g.length-1:ld.binarySearch(g,c,1)-1],a.slots[this.slotIndex].set_attachment(null==
c?null:a.getAttachmentForSlotIndex(this.slotIndex,c))},__class__:Th,__properties__:{get_frameCount:"get_frameCount"}};var td=function(a){this.curves=hb.allocFloat(19*(a-1))};i["workinman.display.spine.animation.CurveTimeline"]=td;td.__name__=["workinman","display","spine","animation","CurveTimeline"];td.__interfaces__=[Bj];td.prototype={apply:function(){},getPropertyId:function(){return 0},get_frameCount:function(){return Math.floor(this.curves.length/19+1)},setStepped:function(a){this.curves[Math.floor(19*
a)]=1},setCurve:function(a,b,c,d,e){var f=0.1*0.1,g=0.1*f,j=3*0.1,p=3*f,h=6*f,f=6*g,i=2*-b+d,k=2*-c+e,d=3*(b-d)+1,e=3*(c-e)+1,b=b*j+i*p+d*g,c=c*j+k*p+e*g,g=i*h+d*f,h=k*h+e*f,k=d*f,f=e*f,a=19*a,d=this.curves;d[a++]=2;e=b;j=c;for(p=a+19-1;a<p;)d[a]=e,d[a+1]=j,b+=g,c+=h,g+=k,h+=f,e+=b,j+=c,a+=2},getCurvePercent:function(a,b){var c=this.curves,d=19*a,e=c[d];if(0==e)return b;if(1==e)return 0;++d;for(var e=0,f=d,g=d+19-1;d<g;){e=c[d];if(e>=b)return d==f?g=f=0:(f=c[d-2],g=c[d-1]),g+(c[d+1]-g)*(b-f)/(e-f);
d+=2}c=c[d-1];return c+(1-c)*(b-e)/(1-e)},__class__:td,__properties__:{get_frameCount:"get_frameCount"}};var mc=function(a){td.call(this,a);this.frames=hb.allocFloat(5*a)};i["workinman.display.spine.animation.ColorTimeline"]=mc;mc.__name__=["workinman","display","spine","animation","ColorTimeline"];mc.__super__=td;mc.prototype=z(td.prototype,{getPropertyId:function(){return 83886080+this.slotIndex},setFrame:function(a,b,c,d,e,f){a*=mc.ENTRIES;this.frames[a]=b;this.frames[a+mc.R|0]=c;this.frames[a+
mc.G|0]=d;this.frames[a+mc.B|0]=e;this.frames[a+mc.A|0]=f},apply:function(a,b,c,d,e,f){b=this.frames;a=a.slots[this.slotIndex];if(a.get_bone().active)if(c<b[0])switch(f){case 0:a.color.setFromColor(a.get_data().color);break;case 1:f=a.color,c=a.get_data().color,f.add((c.r-f.r)*e,(c.g-f.g)*e,(c.b-f.b)*e,(c.a-f.a)*e)}else{var g,j,p;if(c>=b[b.length-mc.ENTRIES])c=b.length,d=b[c+mc.PREV_R],g=b[c+mc.PREV_G],j=b[c+mc.PREV_B],p=b[c+mc.PREV_A];else{var h=ld.binarySearch(b,c,mc.ENTRIES),d=b[h+mc.PREV_R];g=
b[h+mc.PREV_G];j=b[h+mc.PREV_B];p=b[h+mc.PREV_A];var i=b[h],c=this.getCurvePercent(Math.round(h/mc.ENTRIES-1),1-(c-i)/(b[h+mc.PREV_TIME]-i)),d=d+(b[h+mc.R]-d)*c;g+=(b[h+mc.G]-g)*c;j+=(b[h+mc.B]-j)*c;p+=(b[h+mc.A]-p)*c}1==e?a.color.setFrom(d,g,j,p):(0==f&&a.color.setFromColor(a.get_data().color),a.color.r+=(d-a.color.r)*e,a.color.g+=(g-a.color.g)*e,a.color.b+=(j-a.color.b)*e,a.color.a+=(p-a.color.a)*e)}},__class__:mc});var rm=function(a){td.call(this,a);this.frames=hb.allocFloat(a);this.frameVertices=
hb.allocFloatArray(a)};i["workinman.display.spine.animation.DeformTimeline"]=rm;rm.__name__=["workinman","display","spine","animation","DeformTimeline"];rm.__super__=td;rm.prototype=z(td.prototype,{getPropertyId:function(){return 805306368+this.attachment.id+this.slotIndex},setFrame:function(a,b,c){this.frames[a]=b;this.frameVertices[a]=c},apply:function(a,b,c,d,e,f){var g,a=a.slots[this.slotIndex];if(a.get_bone().active&&(g=a.get_attachment(),y.__instanceof(g,Cc)&&y.__cast(g,Cc).deformAttachment==
this.attachment)){b=a.deform;0==b.length&&(f=0);var j=this.frameVertices,a=j[0].length,p=this.frames;if(c<p[0])switch(g=y.__cast(g,Cc),f){case 0:b.length=0;break;case 1:if(1==e){b.length=0;break}b.length=a;if(null==g.bones){g=g.vertices;for(d=0;d<a;)j=d++,b[j]+=(g[j]-b[j])*e}else{e=1-e;for(d=0;d<a;)j=d++,b[j]*=e}}else if(b.length=a,c>=p[p.length-1])if(d=j[p.length-1],1==e)if(3==f)if(g=y.__cast(g,Cc),null==g.bones){g=g.vertices;for(e=0;e<a;)j=e++,b[j]+=d[j]-g[j]}else for(e=0;e<a;)j=e++,b[j]+=d[j];
else for(e=0;e<a;)j=e++,b[j]=d[j];else switch(f){case 0:g=y.__cast(g,Cc);if(null==g.bones){g=g.vertices;for(j=0;j<a;)c=j++,p=g[c],b[c]=p+(d[c]-p)*e}else for(j=0;j<a;)c=j++,b[c]=d[c]*e;break;case 1:case 2:for(j=0;j<a;)c=j++,b[c]+=(d[c]-b[c])*e;g=y.__cast(g,Cc);if(null==g.bones){g=g.vertices;for(j=0;j<a;)c=j++,b[c]+=(d[c]-g[c])*e}else for(j=0;j<a;)c=j++,b[c]+=d[c]*e;break;case 3:if(g=y.__cast(g,Cc),null==g.bones){g=g.vertices;for(j=0;j<a;)c=j++,b[c]+=(d[c]-g[c])*e}else for(j=0;j<a;)c=j++,b[c]+=d[c]*
e}else{var h=ld.binarySearch1(p,c),d=j[h-1],j=j[h],i=p[h],c=this.getCurvePercent(h-1,1-(c-i)/(p[h-1]-i));if(1==e)if(3==f)if(g=y.__cast(g,Cc),null==g.bones){g=g.vertices;for(e=0;e<a;)p=e++,f=d[p],b[p]+=f+(j[p]-f)*c-g[p]}else for(e=0;e<a;)g=e++,f=d[g],b[g]+=f+(j[g]-f)*c;else for(e=0;e<a;)g=e++,f=d[g],b[g]=f+(j[g]-f)*c;else switch(f){case 0:g=y.__cast(g,Cc);if(null==g.bones){g=g.vertices;for(h=0;h<a;)i=h++,f=d[i],p=g[i],b[i]=p+(f+(j[i]-f)*c-p)*e}else for(g=0;g<a;)p=g++,f=d[p],b[p]=(f+(j[p]-f)*c)*e;break;
case 1:case 2:for(p=0;p<a;)h=p++,f=d[h],b[h]+=(f+(j[h]-f)*c-b[h])*e;g=y.__cast(g,Cc);if(null==g.bones){g=g.vertices;for(p=0;p<a;)h=p++,f=d[h],b[h]+=(f+(j[h]-f)*c-g[h])*e}else for(g=0;g<a;)p=g++,f=d[p],b[p]+=(f+(j[p]-f)*c)*e;break;case 3:if(g=y.__cast(g,Cc),null==g.bones){g=g.vertices;for(p=0;p<a;)h=p++,f=d[h],b[h]+=(f+(j[h]-f)*c-g[h])*e}else for(g=0;g<a;)p=g++,f=d[p],b[p]+=(f+(j[p]-f)*c)*e}}}},__class__:rm});var Oi=function(a){this.frames=hb.allocFloat(a);this.drawOrders=hb.allocIntArray(a)};i["workinman.display.spine.animation.DrawOrderTimeline"]=
Oi;Oi.__name__=["workinman","display","spine","animation","DrawOrderTimeline"];Oi.__interfaces__=[Bj];Oi.prototype={get_frameCount:function(){return this.frames.length},getPropertyId:function(){return 134217728},setFrame:function(a,b,c){this.frames[a]=b;this.drawOrders[a]=c},apply:function(a,b,c,d,e,f,g){if(1==g&&0==f){b=0;for(d=a.slots.length;b<d;)c=b++,a.drawOrder[c]=a.slots[c]}else if(b=a.drawOrder,a=a.slots,d=0,c<this.frames[0]){if(0==f||1==f)for(c=0;c<a.length;)f=a[c],++c,b[d++]=f}else if(c=
this.drawOrders[c>=this.frames[this.frames.length-1|0]?this.frames.length-1:ld.binarySearch1(this.frames,c)-1],d=0,null==c)for(c=0;c<a.length;)f=a[c],++c,b[d++]=f;else for(f=0;f<c.length;)e=c[f],++f,b[d++]=a[e]},__class__:Oi,__properties__:{get_frameCount:"get_frameCount"}};var Do=function(a){this.objects=[];this.animationState=a};i["workinman.display.spine.animation.EventQueue"]=Do;Do.__name__=["workinman","display","spine","animation","EventQueue"];Do.prototype={start:function(a){this.objects.push(Dc.start);
this.objects.push(a);this.animationState.animationsChanged=!0},interrupt:function(a){this.objects.push(Dc.interrupt);this.objects.push(a)},end:function(a){this.objects.push(Dc.end);this.objects.push(a);this.animationState.animationsChanged=!0},dispose:function(a){this.objects.push(Dc.dispose);this.objects.push(a)},complete:function(a){this.objects.push(Dc.complete);this.objects.push(a)},event:function(a,b){this.objects.push(Dc.event);this.objects.push(a);this.objects.push(b)},drain:function(){if(!this.drainDisabled){this.drainDisabled=
!0;for(var a=this.objects,b=0;b<a.length;){var c=y.__cast(a[b],Dc),d=y.__cast(a[b+1],Aj);switch(c[1]){case 0:d.onStart.invoke(d);this.animationState.onStart.invoke(d);break;case 1:d.onInterrupt.invoke(d);this.animationState.onInterrupt.invoke(d);break;case 2:d.onEnd.invoke(d);this.animationState.onEnd.invoke(d);d.onDispose.invoke(d);this.animationState.onDispose.invoke(d);this.animationState.trackEntryPool.free(d);break;case 3:d.onDispose.invoke(d);this.animationState.onDispose.invoke(d);this.animationState.trackEntryPool.free(d);
break;case 4:d.onComplete.invoke(d);this.animationState.onComplete.invoke(d);break;case 5:c=y.__cast(a[b++ +2],jm),d.onEvent.invoke([d,c]),this.animationState.onEvent.invoke([d,c])}b+=2}this.clear();this.drainDisabled=!1}},clear:function(){this.objects.length=0},__class__:Do};var xk=function(a){this.frames=hb.allocFloat(a);this.events=hb.allocEvent(a)};i["workinman.display.spine.animation.EventTimeline"]=xk;xk.__name__=["workinman","display","spine","animation","EventTimeline"];xk.__interfaces__=
[Bj];xk.prototype={get_frameCount:function(){return this.frames.length},getPropertyId:function(){return 117440512},setFrame:function(a,b){this.frames[a]=b.time;this.events[a]=b},apply:function(a,b,c,d,e,f,g){if(null!=d){if(b>c)this.apply(a,b,Infinity,d,e,f,g),b=-1;else if(b>=this.frames[this.get_frameCount()-1|0])return;if(!(c<this.frames[0])){if(b<this.frames[0])a=0;else{a=ld.binarySearch1(this.frames,b);for(b=this.frames[a];0<a&&!(this.frames[a-1|0]!=b);)--a}for(;a<this.get_frameCount()&&c>=this.frames[a];)d[d.length]=
this.events[a],++a}}},__class__:xk,__properties__:{get_frameCount:"get_frameCount"}};var Dc=i["workinman.display.spine.animation.EventType"]={__ename__:["workinman","display","spine","animation","EventType"],__constructs__:"start,interrupt,end,dispose,complete,event".split(",")};Dc.start=["start",0];Dc.start.toString=r;Dc.start.__enum__=Dc;Dc.interrupt=["interrupt",1];Dc.interrupt.toString=r;Dc.interrupt.__enum__=Dc;Dc.end=["end",2];Dc.end.toString=r;Dc.end.__enum__=Dc;Dc.dispose=["dispose",3];Dc.dispose.toString=
r;Dc.dispose.__enum__=Dc;Dc.complete=["complete",4];Dc.complete.toString=r;Dc.complete.__enum__=Dc;Dc.event=["event",5];Dc.event.toString=r;Dc.event.__enum__=Dc;var Xa=function(a){td.call(this,a);this.frames=hb.allocFloat(a*Xa.ENTRIES)};i["workinman.display.spine.animation.IkConstraintTimeline"]=Xa;Xa.__name__=["workinman","display","spine","animation","IkConstraintTimeline"];Xa.__super__=td;Xa.prototype=z(td.prototype,{getPropertyId:function(){return 150994944+this.ikConstraintIndex},setFrame:function(a,
b,c,d,e,f,g){a*=Xa.ENTRIES;this.frames[a]=b;this.frames[a+Xa.MIX|0]=c;this.frames[a+Xa.SOFTNESS|0]=d;this.frames[a+Xa.BEND_DIRECTION|0]=e;this.frames[a+Xa.COMPRESS|0]=f?1:0;this.frames[a+Xa.STRETCH|0]=g?1:0},apply:function(a,b,c,d,e,f,g){a=a.ikConstraints[this.ikConstraintIndex];if(a.active)if(c<this.frames[0])switch(f){case 0:a.mix=a.get_data().mix;a.softness=a.get_data().softness;a.bendDirection=a.get_data().bendDirection;a.compress=a.get_data().compress;a.stretch=a.get_data().stretch;break;case 1:a.mix+=
(a.get_data().mix-a.mix)*e,a.softness+=(a.get_data().softness-a.softness)*e,a.bendDirection=a.get_data().bendDirection,a.compress=a.get_data().compress,a.stretch=a.get_data().stretch}else if(c>=this.frames[this.frames.length-Xa.ENTRIES|0])0==f?(a.mix=a.get_data().mix+(this.frames[this.frames.length+Xa.PREV_MIX]-a.get_data().mix)*e,a.softness=a.get_data().softness+(this.frames[this.frames.length+Xa.PREV_SOFTNESS]-a.get_data().softness)*e,1==g?(a.bendDirection=a.get_data().bendDirection,a.compress=
a.get_data().compress,a.stretch=a.get_data().stretch):(a.bendDirection=this.frames[this.frames.length+Xa.PREV_BEND_DIRECTION]|0,a.compress=0!=(this.frames[this.frames.length+Xa.PREV_COMPRESS]|0),a.stretch=0!=(this.frames[this.frames.length+Xa.PREV_STRETCH]|0))):(a.mix+=(this.frames[this.frames.length+Xa.PREV_MIX]-a.mix)*e,a.softness+=(this.frames[this.frames.length+Xa.PREV_SOFTNESS]-a.softness)*e,0==g&&(a.bendDirection=this.frames[this.frames.length+Xa.PREV_BEND_DIRECTION]|0,a.compress=0!=(this.frames[this.frames.length+
Xa.PREV_COMPRESS]|0),a.stretch=0!=(this.frames[this.frames.length+Xa.PREV_STRETCH]|0)));else{var b=ld.binarySearch(this.frames,c,Xa.ENTRIES),d=this.frames[b+Xa.PREV_MIX|0],j=this.frames[b+Xa.PREV_SOFTNESS],p=this.frames[b],c=this.getCurvePercent(b/Xa.ENTRIES-1|0,1-(c-p)/(this.frames[b+Xa.PREV_TIME]-p));0==f?(a.mix=a.get_data().mix+(d+(this.frames[b+Xa.MIX]-d)*c-a.get_data().mix)*e,a.softness=a.get_data().softness+(j+(this.frames[b+Xa.SOFTNESS]-j)*c-a.get_data().softness)*e,1==g?(a.bendDirection=a.get_data().bendDirection,
a.compress=a.get_data().compress,a.stretch=a.get_data().stretch):(a.bendDirection=this.frames[b+Xa.PREV_BEND_DIRECTION]|0,a.compress=0!=(this.frames[b+Xa.PREV_COMPRESS]|0),a.stretch=0!=(this.frames[b+Xa.PREV_STRETCH]|0))):(a.mix+=(d+(this.frames[b+Xa.MIX]-d)*c-a.mix)*e,a.softness+=(j+(this.frames[b+Xa.SOFTNESS]-j)*c-a.softness)*e,0==g&&(a.bendDirection=this.frames[b+Xa.PREV_BEND_DIRECTION]|0,a.compress=0!=(this.frames[b+Xa.PREV_COMPRESS]|0),a.stretch=0!=(this.frames[b+Xa.PREV_STRETCH]|0)))}},__class__:Xa});
var gg=function(){this.listeners=[]};i["workinman.display.spine.animation.Listeners"]=gg;gg.__name__=["workinman","display","spine","animation","Listeners"];gg.prototype={add:function(a){if(null==a)throw new h(new ga("listener cannot be null."));this.listeners[this.listeners.length]=a},remove:function(a){if(null==a)throw new h(new ga("listener cannot be null."));this.listeners.splice(this.listeners.indexOf(a),1)},invoke:function(a){for(var b=0,c=this.listeners;b<c.length;){var d=c[b];++b;d(a)}},__class__:gg};
var Yc=function(a){td.call(this,a);this.frames=hb.allocFloat(a*Yc.ENTRIES)};i["workinman.display.spine.animation.PathConstraintMixTimeline"]=Yc;Yc.__name__=["workinman","display","spine","animation","PathConstraintMixTimeline"];Yc.__super__=td;Yc.prototype=z(td.prototype,{getPropertyId:function(){return 218103808+this.pathConstraintIndex},setFrame:function(a,b,c,d){a*=Yc.ENTRIES;this.frames[a]=b;this.frames[a+Yc.ROTATE]=c;this.frames[a+Yc.TRANSLATE]=d},apply:function(a,b,c,d,e,f){a=a.pathConstraints[this.pathConstraintIndex];
if(a.active)if(c<this.frames[0])switch(f){case 0:a.rotateMix=a.get_data().rotateMix;a.translateMix=a.get_data().translateMix;break;case 1:a.rotateMix+=(a.get_data().rotateMix-a.rotateMix)*e,a.translateMix+=(a.get_data().translateMix-a.translateMix)*e}else{if(c>=this.frames[this.frames.length-Yc.ENTRIES])b=this.frames[this.frames.length+Yc.PREV_ROTATE],d=this.frames[this.frames.length+Yc.PREV_TRANSLATE];else var g=ld.binarySearch(this.frames,c,Yc.ENTRIES),b=this.frames[g+Yc.PREV_ROTATE],d=this.frames[g+
Yc.PREV_TRANSLATE],j=this.frames[g],c=this.getCurvePercent(Math.round(g/Yc.ENTRIES-1),1-(c-j)/(this.frames[g+Yc.PREV_TIME]-j)),b=b+(this.frames[g+Yc.ROTATE]-b)*c,d=d+(this.frames[g+Yc.TRANSLATE]-d)*c;0==f?(a.rotateMix=a.get_data().rotateMix+(b-a.get_data().rotateMix)*e,a.translateMix=a.get_data().translateMix+(d-a.get_data().translateMix)*e):(a.rotateMix+=(b-a.rotateMix)*e,a.translateMix+=(d-a.translateMix)*e)}},__class__:Yc});var bd=function(a){td.call(this,a);this.frames=hb.allocFloat(a*bd.ENTRIES)};
i["workinman.display.spine.animation.PathConstraintPositionTimeline"]=bd;bd.__name__=["workinman","display","spine","animation","PathConstraintPositionTimeline"];bd.__super__=td;bd.prototype=z(td.prototype,{getPropertyId:function(){return 184549376+this.pathConstraintIndex},setFrame:function(a,b,c){a*=bd.ENTRIES;this.frames[a]=b;this.frames[a+bd.VALUE]=c},apply:function(a,b,c,d,e,f){a=a.pathConstraints[this.pathConstraintIndex];if(a.active)if(c<this.frames[0])switch(f){case 0:a.position=a.get_data().position;
break;case 1:a.position+=(a.get_data().position-a.position)*e}else{if(c>=this.frames[this.frames.length-bd.ENTRIES])b=this.frames[this.frames.length+bd.PREV_VALUE];else var d=ld.binarySearch(this.frames,c,bd.ENTRIES),b=this.frames[d+bd.PREV_VALUE],g=this.frames[d],c=this.getCurvePercent(Math.round(d/bd.ENTRIES-1),1-(c-g)/(this.frames[d+bd.PREV_TIME]-g)),b=b+(this.frames[d+bd.VALUE]-b)*c;a.position=0==f?a.get_data().position+(b-a.get_data().position)*e:a.position+(b-a.position)*e}},__class__:bd});
var qm=function(a){bd.call(this,a)};i["workinman.display.spine.animation.PathConstraintSpacingTimeline"]=qm;qm.__name__=["workinman","display","spine","animation","PathConstraintSpacingTimeline"];qm.__super__=bd;qm.prototype=z(bd.prototype,{getPropertyId:function(){return 201326592+this.pathConstraintIndex},apply:function(a,b,c,d,e,f){a=a.pathConstraints[this.pathConstraintIndex];if(a.active)if(c<this.frames[0])switch(f){case 0:a.spacing=a.get_data().spacing;break;case 1:a.spacing+=(a.get_data().spacing-
a.spacing)*e}else{if(c>=this.frames[this.frames.length-bd.ENTRIES])b=this.frames[this.frames.length+bd.PREV_VALUE];else var d=ld.binarySearch(this.frames,c,bd.ENTRIES),b=this.frames[d+bd.PREV_VALUE],g=this.frames[d],c=this.getCurvePercent(Math.round(d/bd.ENTRIES-1),1-(c-g)/(this.frames[d+bd.PREV_TIME]-g)),b=b+(this.frames[d+bd.VALUE]-b)*c;a.spacing=0==f?a.get_data().spacing+(b-a.get_data().spacing)*e:a.spacing+(b-a.spacing)*e}},__class__:qm});var ad=function(a){td.call(this,a);this.frames=hb.allocFloat(2*
a)};i["workinman.display.spine.animation.RotateTimeline"]=ad;ad.__name__=["workinman","display","spine","animation","RotateTimeline"];ad.__super__=td;ad.prototype=z(td.prototype,{getPropertyId:function(){return this.boneIndex},setFrame:function(a,b,c){a<<=1;this.frames[a]=b;this.frames[a+ad.ROTATION|0]=c},apply:function(a,b,c,d,e,f){b=this.frames;a=a.bones[this.boneIndex];if(a.active)if(c<b[0])switch(f){case 0:a.rotation=a.get_data().rotation;break;case 1:b=a.get_data().rotation-a.rotation,a.rotation+=
(b-360*(16384-(16384.499999999996-b/360|0)))*e}else if(c>=b[b.length-ad.ENTRIES])switch(b=b[b.length+ad.PREV_ROTATION],f){case 0:a.rotation=a.get_data().rotation+b*e;break;case 1:case 2:b+=a.get_data().rotation-a.rotation;a.rotation+=(b-360*(16384-(16384.499999999996-b/360|0)))*e;break;case 3:a.rotation+=b*e}else{var g=ld.binarySearch(b,c,ad.ENTRIES),d=b[g+ad.PREV_ROTATION],j=b[g],c=this.getCurvePercent((g>>1)-1,1-(c-j)/(b[g+ad.PREV_TIME]-j)),b=b[g+ad.ROTATION]-d,b=d+(b-360*(16384-(16384.499999999996-
b/360|0)))*c;switch(f){case 0:a.rotation=a.get_data().rotation+(b-360*(16384-(16384.499999999996-b/360|0)))*e;break;case 1:case 2:b+=a.get_data().rotation-a.rotation;a.rotation+=(b-360*(16384-(16384.499999999996-b/360|0)))*e;break;case 3:a.rotation+=(b-360*(16384-(16384.499999999996-b/360|0)))*e}}},__class__:ad});var Ia=function(a){td.call(this,a);this.frames=hb.allocFloat(a*Ia.ENTRIES)};i["workinman.display.spine.animation.TranslateTimeline"]=Ia;Ia.__name__=["workinman","display","spine","animation",
"TranslateTimeline"];Ia.__super__=td;Ia.prototype=z(td.prototype,{getPropertyId:function(){return 16777216+this.boneIndex},setFrame:function(a,b,c,d){a*=Ia.ENTRIES;this.frames[a]=b;this.frames[a+Ia.X|0]=c;this.frames[a+Ia.Y|0]=d},apply:function(a,b,c,d,e,f){b=this.frames;a=a.bones[this.boneIndex];if(a.active)if(c<b[0])switch(f){case 0:a.x=a.get_data().x;a.y=a.get_data().y;break;case 1:a.x+=(a.get_data().x-a.x)*e,a.y+=(a.get_data().y-a.y)*e}else{var g;if(c>=b[b.length-Ia.ENTRIES])d=b[b.length+Ia.PREV_X],
g=b[b.length+Ia.PREV_Y];else{var j=ld.binarySearch(b,c,Ia.ENTRIES),d=b[j+Ia.PREV_X];g=b[j+Ia.PREV_Y];var p=b[j],c=this.getCurvePercent(j/Ia.ENTRIES-1|0,1-(c-p)/(b[j+Ia.PREV_TIME]-p)),d=d+(b[j+Ia.X]-d)*c;g+=(b[j+Ia.Y]-g)*c}switch(f){case 0:a.x=a.get_data().x+d*e;a.y=a.get_data().y+g*e;break;case 1:case 2:a.x+=(a.get_data().x+d-a.x)*e;a.y+=(a.get_data().y+g-a.y)*e;break;case 3:a.x+=d*e,a.y+=g*e}}},__class__:Ia});var om=function(a){Ia.call(this,a)};i["workinman.display.spine.animation.ScaleTimeline"]=
om;om.__name__=["workinman","display","spine","animation","ScaleTimeline"];om.__super__=Ia;om.prototype=z(Ia.prototype,{getPropertyId:function(){return 33554432+this.boneIndex},apply:function(a,b,c,d,e,f,g){var j=this.frames,a=a.bones[this.boneIndex];if(a.active)if(c<j[0])switch(f){case 0:a.scaleX=a.get_data().scaleX;a.scaleY=a.get_data().scaleY;break;case 1:a.scaleX+=(a.get_data().scaleX-a.scaleX)*e,a.scaleY+=(a.get_data().scaleY-a.scaleY)*e}else{if(c>=j[j.length-Ia.ENTRIES])b=j[j.length+Ia.PREV_X]*
a.get_data().scaleX,d=j[j.length+Ia.PREV_Y]*a.get_data().scaleY;else var p=ld.binarySearch(j,c,Ia.ENTRIES),b=j[p+Ia.PREV_X],d=j[p+Ia.PREV_Y],h=j[p],c=this.getCurvePercent(Math.round(p/Ia.ENTRIES-1),1-(c-h)/(j[p+Ia.PREV_TIME]-h)),b=(b+(j[p+Ia.X]-b)*c)*a.get_data().scaleX,d=(d+(j[p+Ia.Y]-d)*c)*a.get_data().scaleY;if(1==e)3==f?(a.scaleX+=b-a.get_data().scaleX,a.scaleY+=d-a.get_data().scaleY):(a.scaleX=b,a.scaleY=d);else if(1==g)switch(f){case 0:f=a.get_data().scaleX;g=a.get_data().scaleY;a.scaleX=f+
(Math.abs(b)*pa.signum(f)-f)*e;a.scaleY=g+(Math.abs(d)*pa.signum(g)-g)*e;break;case 1:case 2:f=a.scaleX;g=a.scaleY;a.scaleX=f+(Math.abs(b)*pa.signum(f)-f)*e;a.scaleY=g+(Math.abs(d)*pa.signum(g)-g)*e;break;case 3:f=a.scaleX,g=a.scaleY,a.scaleX=f+(Math.abs(b)*pa.signum(f)-a.get_data().scaleX)*e,a.scaleY=g+(Math.abs(d)*pa.signum(g)-a.get_data().scaleY)*e}else switch(f){case 0:f=Math.abs(a.get_data().scaleX)*pa.signum(b);g=Math.abs(a.get_data().scaleY)*pa.signum(d);a.scaleX=f+(b-f)*e;a.scaleY=g+(d-g)*
e;break;case 1:case 2:f=Math.abs(a.scaleX)*pa.signum(b);g=Math.abs(a.scaleY)*pa.signum(d);a.scaleX=f+(b-f)*e;a.scaleY=g+(d-g)*e;break;case 3:f=pa.signum(b),g=pa.signum(d),a.scaleX=Math.abs(a.scaleX)*f+(b-Math.abs(a.get_data().scaleX)*f)*e,a.scaleY=Math.abs(a.scaleY)*g+(d-Math.abs(a.get_data().scaleY)*g)*e}}},__class__:om});var pm=function(a){Ia.call(this,a)};i["workinman.display.spine.animation.ShearTimeline"]=pm;pm.__name__=["workinman","display","spine","animation","ShearTimeline"];pm.__super__=
Ia;pm.prototype=z(Ia.prototype,{getPropertyId:function(){return 50331648+this.boneIndex},apply:function(a,b,c,d,e,f){b=this.frames;a=a.bones[this.boneIndex];if(a.active)if(c<b[0])switch(f){case 0:a.shearX=a.get_data().shearX;a.shearY=a.get_data().shearY;break;case 1:a.shearX+=(a.get_data().shearX-a.shearX)*e,a.shearY+=(a.get_data().shearY-a.shearY)*e}else{var g;if(c>=b[b.length-Ia.ENTRIES])d=b[b.length+Ia.PREV_X],g=b[b.length+Ia.PREV_Y];else{var j=ld.binarySearch(b,c,Ia.ENTRIES),d=b[j+Ia.PREV_X];
g=b[j+Ia.PREV_Y];var p=b[j],c=this.getCurvePercent(Math.round(j/Ia.ENTRIES-1),1-(c-p)/(b[j+Ia.PREV_TIME]-p)),d=d+(b[j+Ia.X]-d)*c;g+=(b[j+Ia.Y]-g)*c}switch(f){case 0:a.shearX=a.get_data().shearX+d*e;a.shearY=a.get_data().shearY+g*e;break;case 1:case 2:a.shearX+=(a.get_data().shearX+d-a.shearX)*e;a.shearY+=(a.get_data().shearY+g-a.shearY)*e;break;case 3:a.shearX+=d*e,a.shearY+=g*e}}},__class__:pm});var Aj=function(){this.timelinesRotation=[];this.timelineHoldMix=[];this.timelineMode=[];this.mixBlend=
2;this.totalAlpha=0;this.onEvent=new gg;this.onComplete=new gg;this.onDispose=new gg;this.onEnd=new gg;this.onInterrupt=new gg;this.onStart=new gg};i["workinman.display.spine.animation.TrackEntry"]=Aj;Aj.__name__=["workinman","display","spine","animation","TrackEntry"];Aj.__interfaces__=[vk];Aj.prototype={getAnimationTime:function(){if(this.loop){var a=this.animationEnd-this.animationStart;return 0==a?this.animationStart:this.trackTime%a+this.animationStart}return Math.min(this.trackTime+this.animationStart,
this.animationEnd)},reset:function(){this.animation=this.mixingTo=this.mixingFrom=this.next=null;this.onStart.listeners.length=0;this.onInterrupt.listeners.length=0;this.onEnd.listeners.length=0;this.onDispose.listeners.length=0;this.onComplete.listeners.length=0;this.onEvent.listeners.length=0;this.timelineMode.length=0;this.timelineHoldMix.length=0;this.timelinesRotation.length=0},__class__:Aj};var Cb=function(a){td.call(this,a);this.frames=hb.allocFloat(a*Cb.ENTRIES)};i["workinman.display.spine.animation.TransformConstraintTimeline"]=
Cb;Cb.__name__=["workinman","display","spine","animation","TransformConstraintTimeline"];Cb.__super__=td;Cb.prototype=z(td.prototype,{getPropertyId:function(){return 167772160+this.transformConstraintIndex},setFrame:function(a,b,c,d,e,f){a*=Cb.ENTRIES;this.frames[a]=b;this.frames[a+Cb.ROTATE]=c;this.frames[a+Cb.TRANSLATE]=d;this.frames[a+Cb.SCALE]=e;this.frames[a+Cb.SHEAR]=f},apply:function(a,b,c,d,e,f){b=this.frames;a=a.transformConstraints[this.transformConstraintIndex];if(a.active)if(c<b[0])switch(c=
a.get_data(),f){case 0:a.rotateMix=c.rotateMix;a.translateMix=c.translateMix;a.scaleMix=c.scaleMix;a.shearMix=c.shearMix;break;case 1:a.rotateMix+=(c.rotateMix-a.rotateMix)*e,a.translateMix+=(c.translateMix-a.translateMix)*e,a.scaleMix+=(c.scaleMix-a.scaleMix)*e,a.shearMix+=(c.shearMix-a.shearMix)*e}else{var g,j,p;if(c>=b[b.length-Cb.ENTRIES])c=b.length,d=b[c+Cb.PREV_ROTATE],g=b[c+Cb.PREV_TRANSLATE],j=b[c+Cb.PREV_SCALE],p=b[c+Cb.PREV_SHEAR];else{var h=ld.binarySearch(b,c,Cb.ENTRIES),d=b[h+Cb.PREV_ROTATE];
g=b[h+Cb.PREV_TRANSLATE];j=b[h+Cb.PREV_SCALE];p=b[h+Cb.PREV_SHEAR];var i=b[h],c=this.getCurvePercent(Math.round(h/Cb.ENTRIES-1),1-(c-i)/(b[h+Cb.PREV_TIME]-i)),d=d+(b[h+Cb.ROTATE]-d)*c;g+=(b[h+Cb.TRANSLATE]-g)*c;j+=(b[h+Cb.SCALE]-j)*c;p+=(b[h+Cb.SHEAR]-p)*c}0==f?(c=a.get_data(),a.rotateMix=c.rotateMix+(d-c.rotateMix)*e,a.translateMix=c.translateMix+(g-c.translateMix)*e,a.scaleMix=c.scaleMix+(j-c.scaleMix)*e,a.shearMix=c.shearMix+(p-c.shearMix)*e):(a.rotateMix+=(d-a.rotateMix)*e,a.translateMix+=(g-
a.translateMix)*e,a.scaleMix+=(j-a.scaleMix)*e,a.shearMix+=(p-a.shearMix)*e)}},__class__:Cb});var Fa=function(a){td.call(this,a);this.frames=hb.allocFloat(a*Fa.ENTRIES)};i["workinman.display.spine.animation.TwoColorTimeline"]=Fa;Fa.__name__=["workinman","display","spine","animation","TwoColorTimeline"];Fa.__super__=td;Fa.prototype=z(td.prototype,{getPropertyId:function(){return 234881024+this.slotIndex},setFrame:function(a,b,c,d,e,f,g,j,p){a*=Fa.ENTRIES;this.frames[a]=b;this.frames[a+Fa.R]=c;this.frames[a+
Fa.G]=d;this.frames[a+Fa.B]=e;this.frames[a+Fa.A]=f;this.frames[a+Fa.R2]=g;this.frames[a+Fa.G2]=j;this.frames[a+Fa.B2]=p},apply:function(a,b,c,d,e,f){var g=this.frames,a=a.slots[this.slotIndex];if(a.get_bone().active)if(c<g[0])switch(f){case 0:a.color.setFromColor(a.get_data().color);a.darkColor.setFromColor(a.get_data().darkColor);break;case 1:c=a.color,g=a.darkColor,f=a.get_data().color,a=a.get_data().darkColor,c.add((f.r-c.r)*e,(f.g-c.g)*e,(f.b-c.b)*e,(f.a-c.a)*e),g.add((a.r-g.r)*e,(a.g-g.g)*e,
(a.b-g.b)*e,0)}else{var j,p,h,i,k;if(c>=g[g.length-Fa.ENTRIES])c=g.length,b=g[c+Fa.PREV_R],d=g[c+Fa.PREV_G],j=g[c+Fa.PREV_B],p=g[c+Fa.PREV_A],h=g[c+Fa.PREV_R2],i=g[c+Fa.PREV_G2],k=g[c+Fa.PREV_B2];else{var l=ld.binarySearch(g,c,Fa.ENTRIES),b=g[l+Fa.PREV_R],d=g[l+Fa.PREV_G];j=g[l+Fa.PREV_B];p=g[l+Fa.PREV_A];h=g[l+Fa.PREV_R2];i=g[l+Fa.PREV_G2];k=g[l+Fa.PREV_B2];var n=g[l],c=this.getCurvePercent(Math.round(l/Fa.ENTRIES-1),1-(c-n)/(g[l+Fa.PREV_TIME]-n)),b=b+(g[l+Fa.R]-b)*c,d=d+(g[l+Fa.G]-d)*c;j+=(g[l+
Fa.B]-j)*c;p+=(g[l+Fa.A]-p)*c;h+=(g[l+Fa.R2]-h)*c;i+=(g[l+Fa.G2]-i)*c;k+=(g[l+Fa.B2]-k)*c}1==e?(a.color.setFrom(b,d,j,p),a.darkColor.setFrom(h,i,k,1)):(c=a.color,g=a.darkColor,0==f&&(c.setFromColor(a.get_data().color),g.setFromColor(a.get_data().darkColor)),c.add((b-c.r)*e,(d-c.g)*e,(j-c.b)*e,(p-c.a)*e),g.add((h-g.r)*e,(i-g.g)*e,(k-g.b)*e,0))}},__class__:Fa});var Zn=function(a,b){this.regions=[];this.pages=[];""!=a&&this.load(a,b)};i["workinman.display.spine.atlas.Atlas"]=Zn;Zn.__name__=["workinman",
"display","spine","atlas","Atlas"];Zn.prototype={load:function(a,b){if(null==b)throw new h(new ga("textureLoader cannot be null."));this.textureLoader=b;for(var c=new Eo(a),d=hb.allocString(4),e=null;;){var f=c.readLine();if(null==f)break;f=c.trim(f);if(0==f.length)e=null;else if(null==e){e=new Fo;e.name=f;2==c.readTuple(d)&&(e.width=L.parseInt(d[0]),e.height=L.parseInt(d[1]),c.readTuple(d));e.format=d[0];c.readTuple(d);e.minFilter=d[0];e.magFilter=d[1];var g=c.readValue();e.uWrap="clampToEdge";e.vWrap=
"clampToEdge";"x"==g?e.uWrap="repeat":"y"==g?e.vWrap="repeat":"xy"==g&&(e.uWrap=e.vWrap="repeat");b.loadPage(e,f);this.pages.push(e)}else{g=new Go;g.name=f;g.page=e;g.rotate="true"==c.readValue();g.degrees=g.rotate?90:0;c.readTuple(d);var f=L.parseInt(d[0]),j=L.parseInt(d[1]);c.readTuple(d);var p=L.parseInt(d[0]),i=L.parseInt(d[1]);g.u=f/e.width;g.v=j/e.height;g.rotate?(g.u2=(f+i)/e.width,g.v2=(j+p)/e.height):(g.u2=(f+p)/e.width,g.v2=(j+i)/e.height);g.x=f;g.y=j;g.width=Math.floor(Math.abs(p));g.height=
Math.floor(Math.abs(i));4==c.readTuple(d)&&(g.splits=[L.parseInt(d[0]),L.parseInt(d[1]),L.parseInt(d[2]),L.parseInt(d[3])],4==c.readTuple(d)&&(g.pads=[L.parseInt(d[0]),L.parseInt(d[1]),L.parseInt(d[2]),L.parseInt(d[3])],c.readTuple(d)));g.originalWidth=L.parseInt(d[0]);g.originalHeight=L.parseInt(d[1]);c.readTuple(d);g.offsetX=L.parseInt(d[0]);g.offsetY=L.parseInt(d[1]);g.index=L.parseInt(c.readValue());b.loadRegion(g);this.regions.push(g)}}},findRegion:function(a){for(var b=0,c=this.regions.length;b<
c;){var d=b++;if(this.regions[d].name==a)return this.regions[d]}return null},__class__:Zn};var Eo=function(a){this.index=0;this.lines=(new Ng("[ \t]*((\r\n)|\r|\n)[ \t]*","g")).split(a)};i["workinman.display.spine.atlas.Reader"]=Eo;Eo.__name__=["workinman","display","spine","atlas","Reader"];Eo.prototype={trim:function(a){return pc.trim(a)},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw new h(new ga("Invalid line: "+
a));return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw new h(new ga("Invalid line: "+b));for(var d=0,c=c+1;3>d;){var e=b.indexOf(",",c);if(-1==e)break;a[d]=this.trim(Z.substr(b,c,e-c));c=e+1;++d}a[d]=this.trim(b.substring(c));return d+1},__class__:Eo};var Fo=function(){};i["workinman.display.spine.atlas.AtlasPage"]=Fo;Fo.__name__=["workinman","display","spine","atlas","AtlasPage"];Fo.prototype={__class__:Fo};var Go=function(){};i["workinman.display.spine.atlas.AtlasRegion"]=
Go;Go.__name__=["workinman","display","spine","atlas","AtlasRegion"];Go.prototype={__class__:Go};var Ho=function(){};i["workinman.display.spine.atlas.TextureLoader"]=Ho;Ho.__name__=["workinman","display","spine","atlas","TextureLoader"];Ho.prototype={__class__:Ho};var Io=function(){};i["workinman.display.spine.attachments.AttachmentLoader"]=Io;Io.__name__=["workinman","display","spine","attachments","AttachmentLoader"];Io.prototype={__class__:Io};var Vl=function(a){this.atlas=a};i["workinman.display.spine.attachments.AtlasAttachmentLoader"]=
Vl;Vl.__name__=["workinman","display","spine","attachments","AtlasAttachmentLoader"];Vl.__interfaces__=[Io];Vl.prototype={newRegionAttachment:function(a,b,c){if(null==this.atlas)return null;a=this.atlas.findRegion(c);if(null==a)throw new h(new ga("Region not found in atlas: "+c+" (region attachment: "+b+")"));b=new Nd(b);b.rendererObject=a;b.setUVs(1*a.u,1*a.v,1*a.u2,1*a.v2,a.rotate);b.regionOffsetX=a.offsetX;b.regionOffsetY=a.offsetY;b.regionWidth=a.width;b.regionHeight=a.height;b.regionOriginalWidth=
a.originalWidth;b.regionOriginalHeight=a.originalHeight;return b},newMeshAttachment:function(a,b,c){if(null==this.atlas)return null;a=this.atlas.findRegion(c);if(null==a)throw new h(new ga("Region not found in atlas: "+c+" (mesh attachment: "+b+")"));b=new Ni(b);b.rendererObject=a;b.regionU=1*a.u;b.regionV=1*a.v;b.regionU2=1*a.u2;b.regionV2=1*a.v2;b.regionRotate=a.rotate;b.regionDegrees=a.degrees;b.regionOffsetX=a.offsetX;b.regionOffsetY=a.offsetY;b.regionWidth=a.width;b.regionHeight=a.height;b.regionOriginalWidth=
a.originalWidth;b.regionOriginalHeight=a.originalHeight;return b},newBoundingBoxAttachment:function(a,b){return new yj(b)},newPathAttachment:function(a,b){return new Li(b)},newPointAttachment:function(a,b){return new sm(b)},newClippingAttachment:function(a,b){return new tm(b)},__class__:Vl};var ni=function(a){if(null==a)throw new h(new ga("name cannot be null."));this.name=a};i["workinman.display.spine.attachments.Attachment"]=ni;ni.__name__=["workinman","display","spine","attachments","Attachment"];
ni.prototype={__class__:ni};var Bo=function(a,b){this.ordinal=a;this.name=b};i["workinman.display.spine.attachments.AttachmentType"]=Bo;Bo.__name__=["workinman","display","spine","attachments","AttachmentType"];Bo.prototype={__class__:Bo};var Cc=function(a){this.id=(Cc.nextID++&65535)<<11;ni.call(this,a);this.deformAttachment=this};i["workinman.display.spine.attachments.VertexAttachment"]=Cc;Cc.__name__=["workinman","display","spine","attachments","VertexAttachment"];Cc.__super__=ni;Cc.prototype=
z(ni.prototype,{computeWorldVertices:function(a,b,c,d,e,f){var c=e+(c>>1)*f,g=a.get_skeleton(),j=a.deform,p,h,i,k,l,n,o;if(null==this.bones){0<j.length&&(this.vertices=j);i=a.get_bone();j=i.worldX;p=i.worldY;h=i.a;k=i.b;n=i.c;i=i.d;for(a=b;e<c;)b=this.vertices[a],g=this.vertices[a+1],d[e]=b*h+g*k+j,d[e+1]=b*n+g*i+p,a+=2,e+=f}else{for(h=i=a=0;h<b;)p=this.bones[a],a+=p+1,i+=p,h+=2;h=g.bones;if(0==j.length)for(k=3*i;e<c;){o=n=0;p=this.bones[a++];for(p+=a;a<p;)i=h[this.bones[a]],b=this.vertices[k],g=
this.vertices[k+1],j=this.vertices[k+2],n+=(b*i.a+g*i.b+i.worldX)*j,o+=(b*i.c+g*i.d+i.worldY)*j,++a,k+=3;d[e]=n;d[e+1]=o;e+=f}else{k=3*i;for(l=i<<1;e<c;){o=n=0;p=this.bones[a++];for(p+=a;a<p;){i=h[this.bones[a]];var b=this.vertices[k]+j[l],g=this.vertices[k+1]+j[l+1],m=this.vertices[k+2];n+=(b*i.a+g*i.b+i.worldX)*m;o+=(b*i.c+g*i.d+i.worldY)*m;++a;k+=3;l+=2}d[e]=n;d[e+1]=o;e+=f}}}},__class__:Cc});var yj=function(a){Cc.call(this,a)};i["workinman.display.spine.attachments.BoundingBoxAttachment"]=yj;
yj.__name__=["workinman","display","spine","attachments","BoundingBoxAttachment"];yj.__super__=Cc;yj.prototype=z(Cc.prototype,{__class__:yj});var tm=function(a){this.color=new nf(0.2275,0.2275,0.2275,1);Cc.call(this,a)};i["workinman.display.spine.attachments.ClippingAttachment"]=tm;tm.__name__=["workinman","display","spine","attachments","ClippingAttachment"];tm.__super__=Cc;tm.prototype=z(Cc.prototype,{__class__:tm});var Ni=function(a){this.color=new nf(1,1,1,1);Cc.call(this,a)};i["workinman.display.spine.attachments.MeshAttachment"]=
Ni;Ni.__name__=["workinman","display","spine","attachments","MeshAttachment"];Ni.__super__=Cc;Ni.prototype=z(Cc.prototype,{updateUVs:function(){var a=0,b=this.regionUVs.length,c=this.regionU,d=this.regionV,e=0,f=0;if(null==this.uvs||this.uvs.length!=b){e=[];for(a=0;a<b;)a++,e.push(0);this.uvs=e}switch(this.regionDegrees){case 90:e=this.regionHeight/(this.regionU2-this.regionU);a=this.regionWidth/(this.regionV2-this.regionV);c-=(this.regionOriginalHeight-this.regionOffsetY-this.regionHeight)/e;d-=
(this.regionOriginalWidth-this.regionOffsetX-this.regionWidth)/a;e=this.regionOriginalHeight/e;f=this.regionOriginalWidth/a;for(a=0;a<b;)this.uvs[a]=c+this.regionUVs[a+1]*e,this.uvs[a+1]=d+(1-this.regionUVs[a])*f,a+=2;break;case 180:e=this.regionWidth/(this.regionU2-this.regionU);a=this.regionHeight/(this.regionV2-this.regionV);c-=(this.regionOriginalWidth-this.regionOffsetX-this.regionWidth)/e;d-=this.regionOffsetY/a;e=this.regionOriginalWidth/e;f=this.regionOriginalHeight/a;for(a=0;a<b;)this.uvs[a]=
c+(1-this.regionUVs[a])*e,this.uvs[a+1]=d+(1-this.regionUVs[a+1])*f,a+=2;break;case 270:e=this.regionWidth/(this.regionU2-this.regionU);a=this.regionHeight/(this.regionV2-this.regionV);c-=this.regionOffsetY/e;d-=this.regionOffsetX/a;e=this.regionOriginalHeight/e;f=this.regionOriginalWidth/a;for(a=0;a<b;)this.uvs[a]=c+(1-this.regionUVs[a+1])*e,this.uvs[a+1]=d+this.regionUVs[a]*f,a+=2;break;default:e=this.regionWidth/(this.regionU2-this.regionU);a=this.regionHeight/(this.regionV2-this.regionV);c-=this.regionOffsetX/
e;d-=(this.regionOriginalHeight-this.regionOffsetY-this.regionHeight)/a;e=this.regionOriginalWidth/e;f=this.regionOriginalHeight/a;for(a=0;a<b;)this.uvs[a]=c+this.regionUVs[a]*e,this.uvs[a+1]=d+this.regionUVs[a+1]*f,a+=2}},set_parentMesh:function(a){this._parentMesh=a;null!=a&&(this.bones=a.bones,this.vertices=a.vertices,this.worldVerticesLength=a.worldVerticesLength,this.regionUVs=a.regionUVs,this.triangles=a.triangles,this.hullLength=a.hullLength,this.edges=a.edges,this.width=a.width,this.height=
a.height);return this._parentMesh},__class__:Ni,__properties__:{set_parentMesh:"set_parentMesh"}});var Li=function(a){Cc.call(this,a)};i["workinman.display.spine.attachments.PathAttachment"]=Li;Li.__name__=["workinman","display","spine","attachments","PathAttachment"];Li.__super__=Cc;Li.prototype=z(Cc.prototype,{__class__:Li});var sm=function(a){this.color=new nf(0.38,0.94,0,1);Cc.call(this,a)};i["workinman.display.spine.attachments.PointAttachment"]=sm;sm.__name__=["workinman","display","spine",
"attachments","PointAttachment"];sm.__super__=Cc;sm.prototype=z(Cc.prototype,{__class__:sm});var Nd=function(a){this.uvs=[];this.offset=[];this.color=new nf(1,1,1,1);this.scaleX=this.scaleY=1;ni.call(this,a);this.offset.length=8;this.uvs.length=8};i["workinman.display.spine.attachments.RegionAttachment"]=Nd;Nd.__name__=["workinman","display","spine","attachments","RegionAttachment"];Nd.__super__=ni;Nd.prototype=z(ni.prototype,{updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,
b=this.height/this.regionOriginalHeight*this.scaleY,c=0.5*-this.width*this.scaleX+this.regionOffsetX*a,d=0.5*-this.height*this.scaleY+this.regionOffsetY*b,a=c+this.regionWidth*a,e=d+this.regionHeight*b,b=this.rotation*Math.PI/180,f=Math.sqrt(c*c+d*d),g=Math.atan2(d,c),j=Math.sqrt(a*a+d*d),d=Math.atan2(d,a),h=Math.sqrt(c*c+e*e),c=Math.atan2(e,c),i=Math.sqrt(a*a+e*e),a=Math.atan2(e,a);this.offset[Nd.BLX]=Math.cos(b-c)*h+this.x;this.offset[Nd.BLY]=Math.sin(b-c)*h+this.y;this.offset[Nd.ULX]=Math.cos(b-
g)*f+this.x;this.offset[Nd.ULY]=Math.sin(b-g)*f+this.y;this.offset[Nd.URX]=Math.cos(b-d)*j+this.x;this.offset[Nd.URY]=Math.sin(b-d)*j+this.y;this.offset[Nd.BRX]=Math.cos(b-a)*i+this.x;this.offset[Nd.BRY]=Math.sin(b-a)*i+this.y},setUVs:function(a,b,c,d,e){var f=this.uvs;e?(f[4]=a,f[5]=d,f[6]=a,f[7]=b,f[0]=c,f[1]=b,f[2]=c,f[3]=d):(f[2]=a,f[3]=d,f[4]=a,f[5]=b,f[6]=c,f[7]=b,f[0]=c,f[1]=d)},__class__:Nd});var Ul=function(a,b){this.prefix=a;this.pack=b};i["workinman.display.spine.platform.flambe.FlambeTextureLoader"]=
Ul;Ul.__name__="workinman,display,spine,platform,flambe,FlambeTextureLoader".split(",");Ul.__interfaces__=[Ho];Ul.prototype={loadPage:function(a,b){var c=this.pack.getTexture(this.prefix+Ze.removeFileExtension(b));a.rendererObject=c;a.width=c.get_width();a.height=c.get_height()},loadRegion:function(){},__class__:Ul};var Cj=function(a,b){null==b&&(b=!1);this.colorRegionBox=65280;this.colorBoundingBox=16711680;Mb.call(this,null);this._holder=new Mb(null);Ki.yDown=!0;this.skeleton=new Mi(a);this.skeleton.updateWorldTransform();
this._flagRenderBoxes=b;this.addChild(this._holder);this._holder.addChild(new Pi(this.skeleton))};i["workinman.display.spine.platform.flambe.SkeletonSprite"]=Cj;Cj.__name__="workinman,display,spine,platform,flambe,SkeletonSprite".split(",");Cj.__super__=Mb;Cj.prototype=z(Mb.prototype,{dispose:function(){null!=this._holder&&this.removeChild(this._holder);Mb.prototype.dispose.call(this);this.skeleton=null;null!=this._holder&&this._holder.dispose();this._holder=null},_draw:function(){},toHexColor:function(a){a=
Math.max(0,Math.min(a,255));return"0123456789ABCDEF".charAt(Math.floor((a-a%16)/16))+"0123456789ABCDEF".charAt(Math.floor(a%16))},__class__:Cj});var Wl=function(a,b){null==b&&(b=!1);Cj.call(this,a,b)};i["workinman.display.spine.platform.flambe.SkeletonAnimation"]=Wl;Wl.__name__="workinman,display,spine,platform,flambe,SkeletonAnimation".split(",");Wl.__super__=Cj;Wl.prototype=z(Cj.prototype,{__class__:Wl});var bo=function(a){this.regions=[];this.polygonPool=[];this.polygons=[];this._renderer=a};i["workinman.display.spine.platform.flambe.SkeletonRegions"]=
bo;bo.__name__="workinman,display,spine,platform,flambe,SkeletonRegions".split(",");bo.prototype={dispose:function(){this._renderer=this.regions=null;for(var a=0,b=this.polygons;a<b.length;){var c=b[a];++a;null!=c&&c.dispose()}this.polygons=null;a=0;for(b=this.polygonPool;a<b.length;)c=b[a],++a,null!=c&&c.dispose();this.polygonPool=null},update:function(a,b){for(var c=0,d=this.polygons;c<d.length;){var e=d[c];++c;this.polygonPool.push(e)}this.polygons=[];this.regions=[];c=a.drawOrder;d=0;for(e=c.length;d<
e;){var f=d++;c[f].get_attachment()}this.regions.reverse();this.polygons.reverse();b&&this.aabbCompute()},aabbCompute:function(){for(var a=Infinity,b=Infinity,c=-Infinity,d=-Infinity,e=0,f=this.polygons.length;e<f;){for(var g=this.polygons[e].vertices,j=0,h=g.length;j<h;)var i=g[j],k=g[j+1],a=Math.min(a,i),b=Math.min(b,k),c=Math.max(c,i),d=Math.max(d,k),j=j+2;++e}this.minX=a;this.minY=b;this.maxX=c;this.maxY=d},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY?b<=this.maxY:
!1},containsPoint:function(a,b){for(var c=0,d=this.polygons.length;c<d;){if(this.polygons[c].containsPoint(a,b))return this.regions[c];++c}return null},__class__:bo};var Pi=function(a){this.tempColor=new nf(0,0,0,0);Mb.call(this,null);this._flagRenderBoxes=!1;this.vertices=hb.allocFloat(8192);this._skeleton=a};i["workinman.display.spine.platform.flambe.canvas.CanvasWrapperSprite"]=Pi;Pi.__name__="workinman,display,spine,platform,flambe,canvas,CanvasWrapperSprite".split(",");Pi.__super__=Mb;Pi.prototype=
z(Mb.prototype,{render:function(a){for(var b=this._skeleton.drawOrder,c=0,d=b.length;c<d;){var e=c++,e=b[e];if(e.get_bone().active&&null!=e.get_attachment())if(y.__instanceof(e.get_attachment(),Nd)){var f=y.__cast(e.get_attachment(),Nd);null!=f&&this._drawRegion(a,e,f)}else y.__instanceof(e.get_attachment(),Ni)&&(f=y.__cast(e.get_attachment(),Ni),null!=f&&this._drawMesh(a,e,f))}},_drawRegion:function(a,b,c){var d=c.rendererObject,e=d.page.rendererObject.root.image,f=this._skeleton.color,g=b.color,
j=c.color,h=this.tempColor;h.setFrom(f.r*g.r*j.r,f.g*g.g*j.g,f.b*g.b*j.b,f.a*g.a*j.a);g=b.get_bone();b=d.width;f=d.height;a.canvasCtx.save();a.canvasCtx.transform(g.a,g.c,g.b,g.d,g.worldX,g.worldY);a.canvasCtx.translate(c.offset[0],c.offset[1]);a.canvasCtx.rotate(c.rotation*Math.PI/180);d.rotate?(g=c.height/f,a.canvasCtx.scale(g*c.scaleX,g*c.scaleY),a.canvasCtx.translate(-d.offsetY,-d.offsetX)):(g=c.width/b,a.canvasCtx.scale(g*c.scaleX,g*c.scaleY),a.canvasCtx.translate(-d.offsetX,-d.offsetY));a.canvasCtx.translate(b/
2,f/2);d.rotate&&(c=b,b=f,f=c,a.canvasCtx.rotate(-Math.PI/2));a.canvasCtx.scale(1,-1);a.canvasCtx.translate(-b/2,-f/2);if(1!=h.r||1!=h.g||1!=h.b||1!=h.a)a.canvasCtx.globalAlpha=h.a;a.canvasCtx.drawImage(e,d.x,d.y,b,f,0,0,b,f);a.canvasCtx.restore()},_drawMesh:function(a,b,c){var d=c.rendererObject.page.rendererObject;this.vertices=this.computeMeshVertices(b,c,!1);var e=c.triangles,f=b.get_bone().get_skeleton().color,b=b.color,g=c.color,c=this.tempColor;c.setFrom(f.r*b.r*g.r,f.g*b.g*g.g,f.b*b.b*g.b,
f.a*b.a*g.a);a=a.canvasCtx;if(1!=c.r||1!=c.g||1!=c.b||1!=c.a)a.globalAlpha=c.a;for(f=0;f<e.length;){var b=8*e[f],c=8*e[f+1],g=8*e[f+2],j=this.vertices[b],h=this.vertices[b+1],i=this.vertices[c],k=this.vertices[c+1],l=this.vertices[g],n=this.vertices[g+1];this.drawTriangle(a,d.root.image,j,h,this.vertices[b+6],this.vertices[b+7],i,k,this.vertices[c+6],this.vertices[c+7],l,n,this.vertices[g+6],this.vertices[g+7]);this._flagRenderBoxes&&(a.strokeStyle="green",a.beginPath(),a.moveTo(j,h),a.lineTo(i,k),
a.lineTo(l,n),a.lineTo(j,h),a.stroke());f+=3}},drawTriangle:function(a,b,c,d,e,f,g,j,h,i,k,l,n,o){e*=b.width;f*=b.height;h*=b.width;i*=b.height;n*=b.width;o*=b.height;a.beginPath();a.moveTo(c,d);a.lineTo(g,j);a.lineTo(k,l);a.closePath();var g=g-c,j=j-d,k=k-c,l=l-d,h=h-e,i=i-f,n=n-e,o=o-f,m=1/(h*o-n*i),q=(o*g-i*k)*m,i=(o*j-i*l)*m,g=(h*k-n*g)*m,j=(h*l-n*j)*m,c=c-q*e-g*f,d=d-i*e-j*f;a.save();a.transform(q,i,g,j,c,d);a.clip();a.drawImage(b,0,0);a.restore()},computeMeshVertices:function(a,b,c){var d=a.get_bone().get_skeleton().color,
e=a.color,f=b.color,g=d.a*e.a*f.a,j=c?g:1,c=this.tempColor;c.setFrom(d.r*e.r*f.r*j,d.g*e.g*f.g*j,d.b*e.b*f.b*j,g);d=Math.round(b.worldVerticesLength/2);this.vertices.length<b.worldVerticesLength&&(this.vertices=hb.allocFloat(b.worldVerticesLength));b.computeWorldVertices(a,0,b.worldVerticesLength,this.vertices,0,Pi.VERTEX_SIZE);a=b.uvs;b=0;e=2;for(f=0;f<d;)f++,this.vertices[e++]=c.r,this.vertices[e++]=c.g,this.vertices[e++]=c.b,this.vertices[e++]=c.a,this.vertices[e++]=a[b++],this.vertices[e++]=a[b++],
e+=2;return this.vertices},__class__:Pi});var Qi=i["workinman.input.GAMEPAD_TYPE"]={__ename__:["workinman","input","GAMEPAD_TYPE"],__constructs__:["NONE","XBOX_360"]};Qi.NONE=["NONE",0];Qi.NONE.toString=r;Qi.NONE.__enum__=Qi;Qi.XBOX_360=["XBOX_360",1];Qi.XBOX_360.toString=r;Qi.XBOX_360.__enum__=Qi;var Dj=function(a,b){this.gamepad=a;this.type=b;this._buttons=new kk;this._addButton(J.A);this._addButton(J.B);this._addButton(J.X);this._addButton(J.Y);this._addButton(J.RB);this._addButton(J.LB);this._addButton(J.RT);
this._addButton(J.LT);this._addButton(J.DPAD_UP);this._addButton(J.DPAD_DOWN);this._addButton(J.DPAD_LEFT);this._addButton(J.DPAD_RIGHT);this._addButton(J.LSTICK_UP);this._addButton(J.LSTICK_DOWN);this._addButton(J.LSTICK_LEFT);this._addButton(J.LSTICK_RIGHT);this._addButton(J.RSTICK_UP);this._addButton(J.RSTICK_DOWN);this._addButton(J.RSTICK_LEFT);this._addButton(J.RSTICK_RIGHT);this._addButton(J.START);this._addButton(J.SELECT);this._addButton(J.LSTICK_BUTTON);this._addButton(J.RSTICK_BUTTON)};
i["workinman.input.GamepadBase"]=Dj;Dj.__name__=["workinman","input","GamepadBase"];Dj.prototype={setGamepad:function(a){this.gamepad=a},update:function(){this.leftX=this.leftY=this.rightX=this.rightY=0},_normalizeAxis:function(a){a=Math.floor(100*a)/100;0.15>Math.abs(a)&&(a=0);return a},_addButton:function(a){this._buttons.set(a,!1)},_testButton:function(a,b){!1==this._buttons.get(a)&&b?(this._buttons.set(a,!0),w.onControllerDown(a)):!0==this._buttons.get(a)&&!1==b&&(this._buttons.set(a,!1),w.onControllerUp(a))},
__class__:Dj};var fm=function(a){Dj.call(this,a,Qi.XBOX_360);this.leftX=this.leftY=this.rightX=this.rightY=0};i["workinman.input.GamepadXbox360"]=fm;fm.__name__=["workinman","input","GamepadXbox360"];fm.__super__=Dj;fm.prototype=z(Dj.prototype,{update:function(){Dj.prototype.update.call(this);this.leftX=this._normalizeAxis(this.gamepad.axes[0]);this.leftY=this._normalizeAxis(this.gamepad.axes[1]);this.rightX=this._normalizeAxis(this.gamepad.axes[2]);this.rightY=this._normalizeAxis(this.gamepad.axes[3]);
this._testButton(J.A,y.__cast(this.gamepad.buttons[0],GamepadButton).pressed);this._testButton(J.B,y.__cast(this.gamepad.buttons[1],GamepadButton).pressed);this._testButton(J.X,y.__cast(this.gamepad.buttons[2],GamepadButton).pressed);this._testButton(J.Y,y.__cast(this.gamepad.buttons[3],GamepadButton).pressed);this._testButton(J.LB,y.__cast(this.gamepad.buttons[4],GamepadButton).pressed);this._testButton(J.RB,y.__cast(this.gamepad.buttons[5],GamepadButton).pressed);this._testButton(J.LT,y.__cast(this.gamepad.buttons[6],
GamepadButton).pressed);this._testButton(J.RT,y.__cast(this.gamepad.buttons[7],GamepadButton).pressed);this._testButton(J.SELECT,y.__cast(this.gamepad.buttons[8],GamepadButton).pressed);this._testButton(J.START,y.__cast(this.gamepad.buttons[9],GamepadButton).pressed);this._testButton(J.LSTICK_BUTTON,this.gamepad.buttons[10].pressed);this._testButton(J.RSTICK_BUTTON,this.gamepad.buttons[11].pressed);this._testButton(J.DPAD_UP,y.__cast(this.gamepad.buttons[12],GamepadButton).pressed);this._testButton(J.DPAD_DOWN,
y.__cast(this.gamepad.buttons[13],GamepadButton).pressed);this._testButton(J.DPAD_LEFT,y.__cast(this.gamepad.buttons[14],GamepadButton).pressed);this._testButton(J.DPAD_RIGHT,y.__cast(this.gamepad.buttons[15],GamepadButton).pressed);this._testButton(J.LSTICK_LEFT,0>this.leftX);this._testButton(J.LSTICK_RIGHT,0<this.leftX);this._testButton(J.LSTICK_UP,0>this.leftY);this._testButton(J.LSTICK_DOWN,0<this.leftY);this._testButton(J.RSTICK_LEFT,0>this.rightX);this._testButton(J.RSTICK_RIGHT,0<this.rightX);
this._testButton(J.RSTICK_UP,0>this.rightY);this._testButton(J.RSTICK_DOWN,0<this.rightY)},__class__:fm});var J=i["workinman.input.INPUT_CONTROLLER"]={__ename__:["workinman","input","INPUT_CONTROLLER"],__constructs__:"A,B,X,Y,DPAD_UP,DPAD_DOWN,DPAD_RIGHT,DPAD_LEFT,LB,RB,LT,RT,START,SELECT,LSTICK_UP,LSTICK_DOWN,LSTICK_RIGHT,LSTICK_LEFT,RSTICK_UP,RSTICK_DOWN,RSTICK_RIGHT,RSTICK_LEFT,LSTICK_BUTTON,RSTICK_BUTTON".split(",")};J.A=["A",0];J.A.toString=r;J.A.__enum__=J;J.B=["B",1];J.B.toString=r;J.B.__enum__=
J;J.X=["X",2];J.X.toString=r;J.X.__enum__=J;J.Y=["Y",3];J.Y.toString=r;J.Y.__enum__=J;J.DPAD_UP=["DPAD_UP",4];J.DPAD_UP.toString=r;J.DPAD_UP.__enum__=J;J.DPAD_DOWN=["DPAD_DOWN",5];J.DPAD_DOWN.toString=r;J.DPAD_DOWN.__enum__=J;J.DPAD_RIGHT=["DPAD_RIGHT",6];J.DPAD_RIGHT.toString=r;J.DPAD_RIGHT.__enum__=J;J.DPAD_LEFT=["DPAD_LEFT",7];J.DPAD_LEFT.toString=r;J.DPAD_LEFT.__enum__=J;J.LB=["LB",8];J.LB.toString=r;J.LB.__enum__=J;J.RB=["RB",9];J.RB.toString=r;J.RB.__enum__=J;J.LT=["LT",10];J.LT.toString=r;
J.LT.__enum__=J;J.RT=["RT",11];J.RT.toString=r;J.RT.__enum__=J;J.START=["START",12];J.START.toString=r;J.START.__enum__=J;J.SELECT=["SELECT",13];J.SELECT.toString=r;J.SELECT.__enum__=J;J.LSTICK_UP=["LSTICK_UP",14];J.LSTICK_UP.toString=r;J.LSTICK_UP.__enum__=J;J.LSTICK_DOWN=["LSTICK_DOWN",15];J.LSTICK_DOWN.toString=r;J.LSTICK_DOWN.__enum__=J;J.LSTICK_RIGHT=["LSTICK_RIGHT",16];J.LSTICK_RIGHT.toString=r;J.LSTICK_RIGHT.__enum__=J;J.LSTICK_LEFT=["LSTICK_LEFT",17];J.LSTICK_LEFT.toString=r;J.LSTICK_LEFT.__enum__=
J;J.RSTICK_UP=["RSTICK_UP",18];J.RSTICK_UP.toString=r;J.RSTICK_UP.__enum__=J;J.RSTICK_DOWN=["RSTICK_DOWN",19];J.RSTICK_DOWN.toString=r;J.RSTICK_DOWN.__enum__=J;J.RSTICK_RIGHT=["RSTICK_RIGHT",20];J.RSTICK_RIGHT.toString=r;J.RSTICK_RIGHT.__enum__=J;J.RSTICK_LEFT=["RSTICK_LEFT",21];J.RSTICK_LEFT.toString=r;J.RSTICK_LEFT.__enum__=J;J.LSTICK_BUTTON=["LSTICK_BUTTON",22];J.LSTICK_BUTTON.toString=r;J.LSTICK_BUTTON.__enum__=J;J.RSTICK_BUTTON=["RSTICK_BUTTON",23];J.RSTICK_BUTTON.toString=r;J.RSTICK_BUTTON.__enum__=
J;var io=function(a,b,c,d){this.type=a;this._keys=[];this._virtual=[];this._controller=[];this._fireDelegate=b;this._virtualTestDelegate=c;this._controllerTestDelegate=d;this._pointer=null;this.fresh=this.down=!1};i["workinman.input.InputTracker"]=io;io.__name__=["workinman","input","InputTracker"];io.prototype={setKeys:function(a,b,c){if(null!=a)for(var d=0;d<a.length;){var e=a[d];++d;this._keys.push(e)}if(null!=b)for(a=0;a<b.length;)d=b[a],++a,this._virtual.push(d);if(null!=c)for(b=0;b<c.length;)a=
c[b],++b,this._controller.push(a)},updateStatus:function(){this.fresh=!1;this.down?!1==this._isDown()&&(this.down=!1,this._fireDelegate(this.type,!1)):this._isDown()&&(this.fresh=this.down=!0,this._fireDelegate(this.type,!0))},_isDown:function(){for(var a=0,b=this._keys;a<b.length;){var c=b[a];++a;if(ma._platform.getKeyboard().isDown(c))return!0}a=0;for(b=this._virtual;a<b.length;)if(c=b[a],++a,this._virtualTestDelegate(c))return!0;a=0;for(b=this._controller;a<b.length;)if(c=b[a],++a,this._controllerTestDelegate(c))return!0;
return null!=this._pointer&&this._pointer.down?!0:!1},__class__:io};var Gb=i["workinman.input.PHASE"]={__ename__:["workinman","input","PHASE"],__constructs__:["DOWN","MOVED","STOPPED","UP"]};Gb.DOWN=["DOWN",0];Gb.DOWN.toString=r;Gb.DOWN.__enum__=Gb;Gb.MOVED=["MOVED",1];Gb.MOVED.toString=r;Gb.MOVED.__enum__=Gb;Gb.STOPPED=["STOPPED",2];Gb.STOPPED.toString=r;Gb.STOPPED.__enum__=Gb;Gb.UP=["UP",3];Gb.UP.toString=r;Gb.UP.__enum__=Gb;var em=function(a,b){this._success=a;this._result=Aa.request();this._line1=
lf.request();this._line2=lf.request();null!=b&&this._result.toPoint(b)};i["workinman.math.InterceptResult"]=em;em.__name__=["workinman","math","InterceptResult"];em.prototype={get_success:function(){return this._success},set_success:function(a){return this._success=a},set_result:function(a){null==a?this._result.to(0,0):this._result.toPoint(a);return this._result},__class__:em,__properties__:{set_result:"set_result",set_success:"set_success",get_success:"get_success"}};var Fd=function(){};i["workinman.math.WMMath"]=
Fd;Fd.__name__=["workinman","math","WMMath"];Fd.sign=function(a){return 0>a?-1:1};Fd.distBetweenPoints=function(a,b){return Math.abs(Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y)))};Fd.clamp=function(a,b,c,d){null==d&&(d=!1);d?a>c?a=b:a<b&&(a=c):a>c?a=c:a<b&&(a=b);return a};var Nf=i["workinman.math.Side"]={__ename__:["workinman","math","Side"],__constructs__:["TOP","RIGHT","BOTTOM","LEFT"]};Nf.TOP=["TOP",0];Nf.TOP.toString=r;Nf.TOP.__enum__=Nf;Nf.RIGHT=["RIGHT",1];Nf.RIGHT.toString=r;Nf.RIGHT.__enum__=
Nf;Nf.BOTTOM=["BOTTOM",2];Nf.BOTTOM.toString=r;Nf.BOTTOM.__enum__=Nf;Nf.LEFT=["LEFT",3];Nf.LEFT.toString=r;Nf.LEFT.__enum__=Nf;var Of=function(){};i["workinman.math.WMRectangle"]=Of;Of.__name__=["workinman","math","WMRectangle"];Of.__interfaces__=[Hi];Of.request=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);return Hc.requestObject(Of).init(a,b,c,d)};Of.fromRectangle=function(a){return Of.request(a.x,a.y,a.width,a.height)};Of.__super__=Oc;Of.prototype=z(Oc.prototype,
{create:function(){this._workLine=null},init:function(a,b,c,d){this._x=a;this._y=b;this._width=c;this._height=d;return this},dispose:function(){null!=this._workLine&&this._workLine.dispose();this._workLine=null;Oc.prototype.dispose.call(this)},_getWorkLine:function(){null==this._workLine&&(this._workLine=lf.request());return this._workLine},get_x:function(){return this._x},set_x:function(a){return this._x=a},get_y:function(){return this._y},set_y:function(a){return this._y=a},get_top:function(){return this._y},
set_top:function(a){return this._y=a},get_left:function(){return this._x},set_left:function(a){return this._x=a},get_width:function(){return this._width},set_width:function(a){return this._width=a},get_height:function(){return this._height},set_height:function(a){return this._height=a},get_bottom:function(){return this._y+this._height},set_bottom:function(a){this._y=a-this._height;return this.get_bottom()},get_right:function(){return this._x+this._width},set_right:function(a){this._x=a-this._width;
return this.get_right()},get_centerX:function(){return this._x+this._width/2},set_centerX:function(a){this._x=a-this._width/2;return this.get_centerX()},get_centerY:function(){return this._y+this._height/2},set_centerY:function(a){this._y=a-this._height/2;return this.get_centerY()},copy:function(){return Of.request(this._x,this._y,this._width,this._height)},contains:function(a,b){return a<this.get_left()||a>this.get_right()||b>this.get_bottom()||b<this.get_top()?!1:!0},toXY:function(a,b){this.set_x(a);
this.set_y(b)},toWH:function(a,b){this.set_width(a);this.set_height(b)},toXYWH:function(a,b,c,d){this.toXY(a,b);this.toWH(c,d)},containsPoint:function(a){return this.contains(a.x,a.y)},intersects:function(a){return this.get_left()<a.get_right()&&this.get_right()>a.get_left()&&this.get_top()<a.get_bottom()?this.get_bottom()>a.get_top():!1},intersection:function(a){var b=Of.request();if(this.intersects(a)){b.set_x(this.get_left()>a.get_left()?this.get_left():a.get_left());b.set_y(this.get_top()>a.get_top()?
this.get_top():a.get_top());var c=this.get_right()<a.get_right()?this.get_right():a.get_right(),a=this.get_bottom()<a.get_bottom()?this.get_bottom():a.get_bottom();b.set_width(c-b.get_x());b.set_height(a-b.get_y())}return b},_setSideLine:function(a){this._getWorkLine();switch(a[1]){case 0:this._workLine.toFloats(this.get_left(),this.get_top(),this.get_right(),this.get_top());break;case 1:this._workLine.toFloats(this.get_right(),this.get_top(),this.get_right(),this.get_bottom());break;case 2:this._workLine.toFloats(this.get_left(),
this.get_bottom(),this.get_right(),this.get_bottom());break;case 3:this._workLine.toFloats(this.get_left(),this.get_top(),this.get_left(),this.get_bottom())}},sideLineIntercept:function(a,b,c){this._setSideLine(b);return this._workLine.testLineSegmentIntercept(a,!1,c)},toString:function(){return"{ WMRectangle x: "+this._x+" y: "+this._y+" width: "+this._width+" height: "+this._height+" }"},__class__:Of,__properties__:z(Oc.prototype.__properties__,{set_centerY:"set_centerY",get_centerY:"get_centerY",
set_centerX:"set_centerX",get_centerX:"get_centerX",set_right:"set_right",get_right:"get_right",set_bottom:"set_bottom",get_bottom:"get_bottom",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_left:"set_left",get_left:"get_left",set_top:"set_top",get_top:"get_top",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"})});var Jo=function(){this._caches=new $c;this._emptyParams=[]};i["workinman.pooling.CacheManager"]=Jo;Jo.__name__=["workinman","pooling",
"CacheManager"];Jo.prototype={dispose:function(){for(var a=this._caches,a=new se(a,a.arrayKeys());a.hasNext();)a.next().dispose();this._emptyParams=this._caches=null},addCache:function(a,b,c,d){null==d&&(d=0);var e=this._caches,b=new Ko(b,this._emptyParams,c,d);null!=K[a]?e.setReserved(a,b):e.h[a]=b},processFill:function(a){for(var b=this._caches,b=new se(b,b.arrayKeys());b.hasNext();)if(!1==b.next().fillCache(a))return!1;return!0},requestElement:function(a){var b=this._caches;return(null!=K[a]?b.getReserved(a):
b.h[a]).requestElement()},__class__:Jo};var Ko=function(a,b,c,d){this._cache=[];this._initFill=c;this._type=a;this._emptyParams=b;this._totalFill=0;this._maxFill=d};i["workinman.pooling.ElementCache"]=Ko;Ko.__name__=["workinman","pooling","ElementCache"];Ko.prototype={dispose:function(){for(;0<this._cache.length;)this._cache.pop().destroy();this._emptyParams=this._type=this._cache=null},fillCache:function(a){for(var b;this._cache.length<this._initFill;)if(this._totalFill++,b=ec.createInstance(this._type,
this._emptyParams),b.setReturnFunction(v(this,this.returnFunction)),b.dispose(),0<a&&0>=a--)return!1;return!0},returnFunction:function(a){null==this._cache?a.destroy():this._cache.push(a)},requestElement:function(){var a;if(0<this._cache.length)a=this._cache.pop();else if(1>this._maxFill||this._totalFill<this._maxFill)this._totalFill++,a=ec.createInstance(this._type,this._emptyParams),a.setReturnFunction(v(this,this.returnFunction));else return null;return a},__class__:Ko};var Ej=function(){};i["workinman.pooling.ICacheableElement"]=
Ej;Ej.__name__=["workinman","pooling","ICacheableElement"];Ej.prototype={__class__:Ej};var zp=function(){};i["workinman.random.SeededRandom"]=zp;zp.__name__=["workinman","random","SeededRandom"];zp.prototype={set_seed:function(a){0==a&&(a=1);return this.seed=a},_randomInt:function(){return this.set_seed(16807*this.seed%2147483647)&1073741823},random:function(){return this._randomInt()/1073741823},__class__:zp,__properties__:{set_seed:"set_seed"}};var ko=function(a){this.data={version:"-1"};this.id=
a};i["workinman.saving.WMSharedObject"]=ko;ko.__name__=["workinman","saving","WMSharedObject"];ko.prototype={dispose:function(){this.id=this.data=null},flush:function(){window.localStorage.setItem(this.id,cf.run(this.data))},__class__:ko};var hm=function(a,b,c){this.id=a;this._playback=b;this._completeListener=this._playback.get_complete().watch(v(this,this._onCompleteEvent));this._complete=c;this.disposed=this.isComplete=!1;this.set_volume(this._playback.volume._value)};i["workinman.sound.PlaybackDef"]=
hm;hm.__name__=["workinman","sound","PlaybackDef"];hm.prototype={set_volume:function(a){if(null==this._playback)return 0;1<a?a=1:0>a&&(a=0);this._playback.volume.set__(a);return a},_onCompleteEvent:function(a){!1!=a&&(this.isComplete=!0)},dispose:function(){if(!0!=this.disposed&&(this.disposed=!0,this._completeListener.dispose(),this._completeListener=null,this._playback.dispose(),this.id=this._playback=null,null!=this._complete)){var a=this._complete;this._complete=null;a()}},__class__:hm,__properties__:{set_volume:"set_volume"}};
var mo=function(a,b,c,d,e){this.id=a;this.call=c;this.delay=d;this.gain=b;this.localization=e};i["workinman.sound.VOQueue"]=mo;mo.__name__=["workinman","sound","VOQueue"];mo.prototype={copy:function(a){this.id=a.id;this.call=a.call;this.delay=a.delay;this.gain=a.gain;this.localization=a.localization},dispose:function(){this.localization=this.id=this.call=null},__class__:mo};var G=function(){};i["workinman.tween.Ease"]=G;G.__name__=["workinman","tween","Ease"];G.linear=function(a,b,c,d){return c*a/
d+b};G.inQuad=function(a,b,c,d){return c*(a/=d)*a+b};G.outQuad=function(a,b,c,d){return-c*(a/=d)*(a-2)+b};G.inOutQuad=function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b};G.outElastic=function(a,b,c,d){if(0==a)return b;if(1==(a/=d))return b+c;var e=0.3*d,f=e/4;return c*Math.pow(2,-10*a)*Math.sin((a*d-f)*2*Math.PI/e)+c+b};G.inBack=function(a,b,c,d){return c*(a/=d)*a*(2.70158*a-1.70158)+b};G.outBack=function(a,b,c,d){a=a/d-1;return c*(a*a*(2.70158*a+1.70158)+1)+b};G.inOutBack=function(a,
b,c,d){var e=1.70158;return 1>(a/=d/2)?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b};G.outBounce=function(a,b,c,d){return 0.36363636363636365>(a/=d)?c*7.5625*a*a+b:0.7272727272727273>a?c*(7.5625*(a-=0.5454545454545454)*a+0.75)+b:0.9090909090909091>a?c*(7.5625*(a-=0.8181818181818182)*a+0.9375)+b:c*(7.5625*(a-=0.9545454545454546)*a+0.984375)+b};G.inBounce=function(a,b,c,d){return c-G.outBounce(d-a,0,c,d)+b};G.inOutBounce=function(a,b,c,d){return a<d/2?0.5*G.inBounce(2*a,0,
c,d)+b:0.5*G.outBounce(2*a-d,0,c,d)+0.5*c+b};G.outCubic=function(a,b,c,d){a=a/d-1;return c*(a*a*a+1)+b};G.outQuart=function(a,b,c,d){a=a/d-1;return-c*(a*a*a*a-1)+b};G.inCirc=function(a,b,c,d){return-c*(Math.sqrt(1-(a/=d)*a)-1)+b};var Ub=function(){};i["workinman.tween.TweenUtils"]=Ub;Ub.__name__=["workinman","tween","TweenUtils"];Ub.easeFadeOut=function(a,b,c,d){null==d&&(d=0);null==c&&(c=!0);c&&(a.visible=!0,a.alpha=1);return b.tween({target:a,duration:0.3,overwrite:!0,ease:G.outQuad,delay:d},{alpha:0})};
Ub.easeBounceIn=function(a,b,c,d){null==d&&(d=0);null==c&&(c=!0);c&&(a.visible=!0,a.set_scale(0.1),a.alpha=0);b.tween({target:a,duration:0.15,overwrite:!0,ease:G.outQuad,delay:d},{scale:1.1,alpha:1});return b.tween({target:a,duration:0.15,ease:G.inQuad},{scale:1})};Ub.easeBounceOut=function(a,b,c,d){null==d&&(d=0);null==c&&(c=!1);c&&(a.visible=!0,a.set_scale(1),a.alpha=1);b.tween({target:a,duration:0.15,overwrite:!0,ease:G.outQuad,delay:d},{scale:1.1});return b.tween({target:a,duration:0.15,ease:G.inQuad},
{scale:0.1,alpha:0})};Ub.easeRock=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=!0);d&&(a.visible=!0,a.rotation=0);b.tween({target:a,duration:0.15,overwrite:!0,ease:G.outQuad,delay:e},{rotation:c});b.tween({target:a,duration:0.15,ease:G.inOutQuad},{rotation:0.9*-c});return b.tween({target:a,duration:0.15,ease:G.inQuad},{rotation:0})};var lo=function(a){this.target=a;this._threads=[]};i["workinman.tween.data.ObjectTracker"]=lo;lo.__name__=["workinman","tween","data","ObjectTracker"];lo.prototype=
{dispose:function(){if(null!=this.target){this.target=null;for(var a=0,b=this._threads;a<b.length;){var c=b[a];++a;c.dispose()}this._threads=null}},update:function(a){for(var b=this._threads.length;0<b--;)if(this._threads[b].update(a),null==this._threads)return;for(b=this._threads.length;0<b--;)a=this._threads[b],a.get_isComplete()&&(a.dispose(),this._threads.splice(b,1))},get_isComplete:function(){return null!=this._threads?1>this._threads.length:!0},stopThread:function(a){for(var b=this._threads.length;0<
b--;)if(this._threads[b].id==a){this._threads[b].dispose();this._threads.splice(b,1);break}},queueStep:function(a,b){for(var c=null,d=0,e=this._threads;d<e.length;){var f=e[d];++d;if(f.id==b){c=f;break}}null==c&&(c=new Lo(b),this._threads.push(c));c.queueStep(a)},__class__:lo,__properties__:{get_isComplete:"get_isComplete"}};var Mo=function(a,b){this.name=a;this.origin=0;this.dest=b};i["workinman.tween.data.PropertyReference"]=Mo;Mo.__name__=["workinman","tween","data","PropertyReference"];Mo.prototype=
{dispose:function(){this.name=null},__class__:Mo};var Lo=function(a){this.id=a;this._tweens=[]};i["workinman.tween.data.ThreadQueue"]=Lo;Lo.__name__=["workinman","tween","data","ThreadQueue"];Lo.prototype={dispose:function(){if(null!=this.id){this.id=null;for(var a=0,b=this._tweens;a<b.length;){var c=b[a];++a;c.dispose()}this._tweens=null}},get_isComplete:function(){return null!=this._tweens?1>this._tweens.length:!0},update:function(a){if(!this.get_isComplete()){var b=this._tweens[0],a=b.update(a);
b.get_isComplete()&&null!=this._tweens&&(b.dispose(),this._tweens.shift(),this.update(a))}},queueStep:function(a){this._tweens.push(a)},__class__:Lo,__properties__:{get_isComplete:"get_isComplete"}};var gm=function(a,b){this._properties=[];for(var c=0,d=t.fields(b);c<d.length;){var e=d[c];++c;this._properties.push(new Mo(e,t.field(b,e)))}this._target=a.target;this._easeFunction=a.ease;this._duration=a.duration;this._postDelay=this._delay=0;this._completionHandler=null;this._progress=0;this._started=
!1;null!=a.delay&&(this._delay=a.delay);null!=a.postDelay&&(this._postDelay=a.postDelay);null!=a.complete&&(this._completionHandler=a.complete)};i["workinman.tween.data.TweenStep"]=gm;gm.__name__=["workinman","tween","data","TweenStep"];gm.prototype={dispose:function(){if(null!=this._target){this._target=null;for(var a=0,b=this._properties;a<b.length;){var c=b[a];++a;c.dispose()}this._completionHandler=this._easeFunction=this._properties=null}},update:function(a){if(0<this._delay){this._delay-=a;
if(0<this._delay)return 0;a=-1*this._delay}if(!1==this._started){this._started=!0;for(var b=0,c=this._properties;b<c.length;){var d=c[b];++b;Object.prototype.hasOwnProperty.call(this._target,d.name)?d.origin=t.field(this._target,d.name):null!=t.getProperty(this._target,d.name)&&(d.origin=t.getProperty(this._target,d.name))}}if(this._progress<this._duration)if(this._progress+=a,this._progress>=this._duration){a=this._duration-this._progress;this._progress=this._duration;b=0;for(c=this._properties;b<
c.length;)d=c[b],++b,t.setProperty(this._target,d.name,d.dest)}else{a=0;for(b=this._properties;a<b.length;)c=b[a],++a,t.setProperty(this._target,c.name,this._easeFunction(this._progress,c.origin,c.dest-c.origin,this._duration));return 0}this._postDelay-=a;if(0>=this._postDelay)null!=this._completionHandler&&(a=this._completionHandler,this._completionHandler=null,a());else return 0;return-1*this._postDelay},get_isComplete:function(){return this._progress>=this._duration&&0>this._postDelay?null==this._completionHandler:
!1},onComplete:function(a){this._completionHandler=a;return this},__class__:gm,__properties__:{get_isComplete:"get_isComplete"}};var xc=i["workinman.ui._Button.ButtonState"]={__ename__:["workinman","ui","_Button","ButtonState"],__constructs__:["_STATE_UP","_STATE_DOWN","_STATE_OVER","_STATE_CLICK"]};xc._STATE_UP=["_STATE_UP",0];xc._STATE_UP.toString=r;xc._STATE_UP.__enum__=xc;xc._STATE_DOWN=["_STATE_DOWN",1];xc._STATE_DOWN.toString=r;xc._STATE_DOWN.__enum__=xc;xc._STATE_OVER=["_STATE_OVER",2];xc._STATE_OVER.toString=
r;xc._STATE_OVER.__enum__=xc;xc._STATE_CLICK=["_STATE_CLICK",3];xc._STATE_CLICK.toString=r;xc._STATE_CLICK.__enum__=xc;var hd=i["workinman.ui.CHANGE_TYPE"]={__ename__:["workinman","ui","CHANGE_TYPE"],__constructs__:["OPEN_BEGIN","OPEN_COMPLETE","CLOSE_BEGIN","CLOSE_COMPLETE"]};hd.OPEN_BEGIN=["OPEN_BEGIN",0];hd.OPEN_BEGIN.toString=r;hd.OPEN_BEGIN.__enum__=hd;hd.OPEN_COMPLETE=["OPEN_COMPLETE",1];hd.OPEN_COMPLETE.toString=r;hd.OPEN_COMPLETE.__enum__=hd;hd.CLOSE_BEGIN=["CLOSE_BEGIN",2];hd.CLOSE_BEGIN.toString=
r;hd.CLOSE_BEGIN.__enum__=hd;hd.CLOSE_COMPLETE=["CLOSE_COMPLETE",3];hd.CLOSE_COMPLETE.toString=r;hd.CLOSE_COMPLETE.__enum__=hd;var Xm=function(a,b,c){this.screenId=a;this.changeEvent=b;this.action=c};i["workinman.ui.ChangeActionData"]=Xm;Xm.__name__=["workinman","ui","ChangeActionData"];Xm.prototype={__class__:Xm};var Ve=i["workinman.ui.STATE_SCREEN"]={__ename__:["workinman","ui","STATE_SCREEN"],__constructs__:["IN","OUT","OPENED"]};Ve.IN=["IN",0];Ve.IN.toString=r;Ve.IN.__enum__=Ve;Ve.OUT=["OUT",
1];Ve.OUT.toString=r;Ve.OUT.__enum__=Ve;Ve.OPENED=["OPENED",2];Ve.OPENED.toString=r;Ve.OPENED.__enum__=Ve;var xi=function(a,b){this._root=a;this._screenOpen=[];this._interfaceDelegate=b;xi.eventFlowDelegate.add(v(this,this._dispatchEventChange))};i["workinman.ui.ScreenManager"]=xi;xi.__name__=["workinman","ui","ScreenManager"];xi.prototype={closeScreen:function(a,b){null==b&&(b=!0);for(var c=this._screenOpen.length;0<c--;)this._screenOpen[c].classType==a&&(this._screenOpen[c].close(b),this._dispatchEventChange(hd.CLOSE_BEGIN,
a))},closeAllScreens:function(a){null==a&&(a=!1);for(var b=0,c=this._screenOpen;b<c.length;){var d=c[b];++b;d.close(a)}},openScreen:function(a){if(this.isScreenOpen(a)){for(var b=0,c=this._screenOpen;b<c.length;){var d=c[b];++b;if(d.classType==a){this._root.addChild(d.get_root());break}}this._dispatchEventChange(hd.OPEN_BEGIN,a);this._dispatchEventChange(hd.OPEN_COMPLETE,a)}else b=ec.createInstance(a,[this._root]),b.open(!0),this._screenOpen.push(b),this._dispatchEventChange(hd.OPEN_BEGIN,a)},changeScreenTo:function(a,
b){null==b&&(b=!1);for(var c=this._screenOpen.length;0<c--;)this._screenOpen[c].classType!=a&&this._screenOpen[c].close(b);this.openScreen(a)},update:function(a){for(var b=this._screenOpen.length;0<b--;){var c=this._screenOpen[b];c.update(a);c.doDelete&&(c.dispose(),this._screenOpen.splice(b,1))}},isScreenOpen:function(a){for(var b=0,c=this._screenOpen;b<c.length;){var d=c[b];++b;if(d.classType==a)return!0}return!1},_dispatchEventChange:function(a,b){this._interfaceDelegate(a,b)},__class__:xi};var ge=
i["workinman.ui._SubtitleManager.SUB_STATE"]={__ename__:["workinman","ui","_SubtitleManager","SUB_STATE"],__constructs__:["OFF","CHANGE_ON","CHANGE_OFF","ON"]};ge.OFF=["OFF",0];ge.OFF.toString=r;ge.OFF.__enum__=ge;ge.CHANGE_ON=["CHANGE_ON",1];ge.CHANGE_ON.toString=r;ge.CHANGE_ON.__enum__=ge;ge.CHANGE_OFF=["CHANGE_OFF",2];ge.CHANGE_OFF.toString=r;ge.CHANGE_OFF.__enum__=ge;ge.ON=["ON",3];ge.ON.toString=r;ge.ON.__enum__=ge;var Wm=function(a){this._elementManager=new tk(a,0,0,!1);this._elementManager.addLayer("subtitle_default");
this._image=this._elementManager.addElement(new fc({asset:"",y:280,originY:1}));this._text=this._elementManager.addElement(new V({text:"",y:260,originY:1,align:Ca.Center,wrapWidth:fb.STAGE_WIDTH-100}));this._tween=new Gi;this._setSubState(ge.ON)};i["workinman.ui.SubtitleManager"]=Wm;Wm.__name__=["workinman","ui","SubtitleManager"];Wm.prototype={update:function(a){this._elementManager.update(a);this._tween.update(a);switch(this._subState[1]){case 3:0<this._timer&&(this._timer-=a)}if(0<s.subtitleQueue.length)a=
s.subtitleQueue[0],a!=this._currentText&&Fc.subtitlesEnabled&&(this._currentText=a,this._setSubtitle(this._currentText));else if(0>=this._timer)switch(this._subState[1]){case 1:case 3:this._setSubState(ge.CHANGE_OFF)}},_setSubState:function(a){var b=this;this._subState=a;switch(this._subState[1]){case 0:this._currentText="";this._image.visible=!1;this._image.alpha=0;this._text.visible=!1;this._text.alpha=0;break;case 1:this._image.visible=!0;this._text.visible=!0;this._tween.tween({target:this._image,
duration:0.2,overwrite:!0,ease:G.linear},{alpha:1}).onComplete(function(){b._setSubState(ge.ON)});this._tween.tween({target:this._text,duration:0.2,overwrite:!0,ease:G.linear},{alpha:1});break;case 2:this._tween.tween({target:this._image,duration:0.2,overwrite:!0,ease:G.linear},{alpha:0}).onComplete(function(){b._setSubState(ge.OFF)}),this._tween.tween({target:this._text,duration:0.2,overwrite:!0,ease:G.linear},{alpha:0})}},_setSubtitle:function(a){this._timer=Fc.getLocalizeData(a).subtitleTime;this._text.setText(a);
switch(this._subState[1]){case 0:case 2:this._setSubState(ge.CHANGE_ON)}},__class__:Wm};var xg=i["workinman.ui.VIRTUAL_JOYSTICK_MODE"]={__ename__:["workinman","ui","VIRTUAL_JOYSTICK_MODE"],__constructs__:["LEFT_SIDE","RIGHT_SIDE","FULL_SCREEN"]};xg.LEFT_SIDE=["LEFT_SIDE",0];xg.LEFT_SIDE.toString=r;xg.LEFT_SIDE.__enum__=xg;xg.RIGHT_SIDE=["RIGHT_SIDE",1];xg.RIGHT_SIDE.toString=r;xg.RIGHT_SIDE.__enum__=xg;xg.FULL_SCREEN=["FULL_SCREEN",2];xg.FULL_SCREEN.toString=r;xg.FULL_SCREEN.__enum__=xg;var mf=i["workinman.ui.VIRTUAL_JOYSTICK_STYLE"]=
{__ename__:["workinman","ui","VIRTUAL_JOYSTICK_STYLE"],__constructs__:["STANDARD_XY","X_ONLY","X_WITH_FAUX_DOWN"]};mf.STANDARD_XY=["STANDARD_XY",0];mf.STANDARD_XY.toString=r;mf.STANDARD_XY.__enum__=mf;mf.X_ONLY=["X_ONLY",1];mf.X_ONLY.toString=r;mf.X_ONLY.__enum__=mf;mf.X_WITH_FAUX_DOWN=["X_WITH_FAUX_DOWN",2];mf.X_WITH_FAUX_DOWN.toString=r;mf.X_WITH_FAUX_DOWN.__enum__=mf;var T=i["world.STATE"]={__ename__:["world","STATE"],__constructs__:["ALLOCATE","INITIALIZING","GAMEPLAY","GAME_OVER"]};T.ALLOCATE=
["ALLOCATE",0];T.ALLOCATE.toString=r;T.ALLOCATE.__enum__=T;T.INITIALIZING=["INITIALIZING",1];T.INITIALIZING.toString=r;T.INITIALIZING.__enum__=T;T.GAMEPLAY=["GAMEPLAY",2];T.GAMEPLAY.toString=r;T.GAMEPLAY.__enum__=T;T.GAME_OVER=["GAME_OVER",3];T.GAME_OVER.toString=r;T.GAME_OVER.__enum__=T;var U=function(a){this._TEXT_CACHE="floating_text_cache";this._inputPos=Aa.request();this._tween=new Gi;Hc.tracePoolReport();this._cacheManager=new Jo;this._elementManager=new tk(a,0,0);this._elementManager.addLayer("layer_bg");
this._elementManager.addLayer("layer_world",!0);this._elementManager.addLayer("layer_fg");this._addEventListeners();this._setState(T.ALLOCATE)};i["world.World"]=U;U.__name__=["world","World"];U.prototype={start:function(){this._setState(T.GAMEPLAY)},dispose:function(){this._tween.dispose();this._tween=null;this._elementManager.dispose();this._elementManager=null;this._removeEventListeners();this._cacheManager.dispose();this._state=this._cacheManager=null;this._inputPos.dispose();this._inputPos=null},
_setState:function(a){this._state=a;switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld(),this._onGenerationComplete()}},update:function(a){if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&this._setState(T.INITIALIZING);break;case 2:this._tween.update(a),this._elementManager.update(a)}},_addEventListeners:function(){w.eventInput.add(v(this,this._onInput));P.pause.add(v(this,this._onPause))},_removeEventListeners:function(){w.eventInput.remove(v(this,
this._onInput));P.pause.remove(v(this,this._onPause))},_onPause:function(a){a?m.setBool("BOOL_PAUSED",!0):m.setBool("BOOL_PAUSED",!1)},_onInput:function(a,b){m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY||(this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos),a==$.POINTER&&b&&m.modifyInt("INT_SCORE",50))},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",1);this._cacheManager.addCache("deleteballcache",yk,5)},
_initWorld:function(){},_showTutorial:function(){P.flow.dispatch("TUTORIAL_OPEN")},_requestFloatingText:function(a,b,c,d){var e=this._cacheManager.requestElement(this._TEXT_CACHE);e.init(a,this._tween,b,c,d);return e},_onGenerationComplete:function(){P.worldGenerationComplete.dispatch();var a=m.getBool("BOOL_SHOW_BASIC_TUTORIAL");(a||!a&&-1==U.UNTUTORIALIZED_BOOSTERS.indexOf(m.getString("STRING_BOOSTER")))&&ha.start(v(this,this._showTutorial),0.32)},__class__:U};var yk=function(){fc.call(this,{asset:"template/ui/menu/button_blank"})};
i["world.elements.CacheElementTemplateDELETE"]=yk;yk.__name__=["world","elements","CacheElementTemplateDELETE"];yk.__interfaces__=[Ej];yk.__super__=fc;yk.prototype=z(fc.prototype,{setReturnFunction:function(a){this._returnFunction=a},init:function(a){this.doDelete=!1;this.pos.to(0,200,a);this.velocity.to(M.randomFloat(-800,800),M.randomFloat(-800,800))},dispose:function(){this._returnFunction(this)},destroy:function(){fc.prototype.dispose.call(this);this._returnFunction=null},update:function(a){fc.prototype.update.call(this,
a);this.pos.x+=this.velocity.x*a;this.pos.y+=this.velocity.y*a;this.pos.x>fb.STAGE_CENTER_X&&0<this.velocity.x?this.velocity.x*=-1:this.pos.x<-fb.STAGE_CENTER_X&&0>this.velocity.x&&(this.velocity.x*=-1);280<this.pos.y&&0<this.velocity.y?this.velocity.y*=-1:-280>this.pos.y&&0>this.velocity.y&&(this.velocity.y*=-1)},__class__:yk});var Ri=function(){V.call(this,{text:""})};i["world.elements.FloatingText"]=Ri;Ri.__name__=["world","elements","FloatingText"];Ri.__interfaces__=[Ej];Ri.__super__=V;Ri.prototype=
z(V.prototype,{setReturnFunction:function(a){this._returnFunction=a},init:function(a,b,c,d,e){var f=this;this.doDelete=!1;this.setText(a,e);this.pos.to(c,d);this.alpha=1;b.tween({target:this,duration:0.5,ease:G.inQuad},{y:d-50,alpha:0}).onComplete(function(){f.doDelete=!0})},dispose:function(){this._returnFunction(this)},destroy:function(){V.prototype.dispose.call(this);this._returnFunction=null},update:function(a){V.prototype.update.call(this,a)},__class__:Ri});var Eh=function(a){U.call(this,a)};
i["world.minigame_anchovy.WorldAnchovy"]=Eh;Eh.__name__=["world","minigame_anchovy","WorldAnchovy"];Eh.__super__=U;Eh.prototype=z(U.prototype,{start:function(){U.prototype.start.call(this)},dispose:function(){U.prototype.dispose.call(this)},_setState:function(a){this._state=a;switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld();this._onGenerationComplete();break;case 3:ha.start(function(){m.setBool("BOOL_GAME_WIN",!0)},1)}},update:function(a){if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&
this._setState(T.INITIALIZING);break;case 2:this._tween.update(a);for(var b=this._activeBurgers.length;0<=--b;)this._activeBurgers[b].doDelete&&this._activeBurgers.splice(b,1);this._elementManager.update(a);this._handleTouch(a);this._spawnBurgerTimer-=a;0>=this._spawnBurgerTimer&&(this._spawnBurgerTimer=1.5,this._burgerSpawnCount<Eh._BURGER_AMOUNT&&(this._burgerSpawnCount++,this._activeBurgers.push(this._elementManager.addElement(new um(this._tween,this._activeBurgers,{x:-230,y:200,asset:"Krabby_burger"}))),
this._burgerSpawnCount==Eh._BURGER_AMOUNT?this._dispenserSpine.queueAnimation("Idle_off",1):this._dispenserSpine.animate("idle_run",1)));this._spawnAnchovyTimer-=a;if(0>=this._spawnAnchovyTimer&&!this._flagPatrickMode){this._spawnAnchovyTimer=M.randomFloat(3,5);a=this._getEmptySlots();M.shuffleArray(a);for(var b=0,c=M.randomInt(1,a.length-3);b<c;){var d=b++;(2==a[d].rowX||3==a[d].rowX)&&1==a[d].rowY&&!this._flagSpawnedPatrick&&0.25>M.random()?(this._flagSpawnedPatrick=!0,a[d].spawn(zc.PATRICK)):!this._flagSpawnedSquidward&&
0.25>M.random()?(this._flagSpawnedSquidward=!0,a[d].spawn(zc.SQUIDWARD)):1==a[d].rowY?0.1>Math.random()?a[d].spawn(zc.GOLD):a[d].spawn(zc.BASIC):a[d].spawn(zc.BASIC)}}this._burgerSpawnCount==Eh._BURGER_AMOUNT&&0==this._activeBurgers.length&&this._setState(T.GAME_OVER);break;case 3:this._tween.update(a),this._elementManager.update(a)}},_getEmptySlots:function(){for(var a=[],b=0,c=this._targets;b<c.length;){var d=c[b];++b;d.isActive()||a.push(d)}return a},_addEventListeners:function(){U.prototype._addEventListeners.call(this);
P.burgerCollide.add(v(this,this._onBurgerCollide))},_removeEventListeners:function(){U.prototype._removeEventListeners.call(this);P.burgerCollide.remove(v(this,this._onBurgerCollide))},_onBurgerCollide:function(a){for(var b=!1,c=0,d=this._targets;c<d.length;){var e=d[c];++c;if(e.isActive()&&e.collideWithBurger(a)){this._makeGreaseParticles(a);b=!0;s.playSound(M.randomObject(["customer_bite","krabby_customer_bite"]));this._backSpine.animate(M.randomObject(["cab_glow_seq_2","cab_glow_seq_3","cab_glow_seq_4"]),
1);this._backSpine.queueAnimation("cab_glow_seq_1");break}}b||(s.playSound("audio/arcade_slime_wave_alt"),this._makeBurgerParticles(a),a.destroy(!1))},_makeBurgerParticles:function(a){a=Aa.request(a.get_x(),a.get_y());a={x:a.x,y:a.y};this._particleLayer.addChild(new zg(Ec.BUN_BOT,a));this._particleLayer.addChild(new zg(Ec.BUN_TOP,a));this._particleLayer.addChild(new zg(Ec.CHEESE,a));this._particleLayer.addChild(new zg(Ec.PATTY,a));for(var b=0;2>b;)b++,this._particleLayer.addChild(new zg(Ec.TOMATO,
a)),this._particleLayer.addChild(new zg(Ec.PICKLE,a));for(b=0;3>b;)b++,this._particleLayer.addChild(new zg(Ec.GREASE,a)),this._particleLayer.addChild(new zg(Ec.SAUCE,a))},_makeGreaseParticles:function(a){for(var a=Aa.request(a.get_x(),a.get_y()),a={x:a.x,y:a.y},b=0;5>b;)b++,this._greaseLayer.addChild(new zg(Ec.GREASE,a))},_handleTouch:function(a){if(!(m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY))if(this._duration+=a,0<w.multiTouch.length)for(var a=0,b=w.multiTouch;a<b.length;){var c=b[a];++a;
if(c.phase==Gb.DOWN){if(1==w.multiTouch.length){this._duration=0;this._elementManager.camera.getWorldPositionOfScreenPoint(c.get_currentPos().x,c.get_currentPos().y,0,this._inputPos);this._startPos.toPoint(this._inputPos);for(var c=0,d=this._activeBurgers;c<d.length;){var e=d[c];++c;if(Fd.distBetweenPoints(e.pos,this._inputPos)<e.get_width()/2&&e.canThrow()){this._targetBurger=e;break}}}}else c.phase!=Gb.MOVED&&c.phase==Gb.UP&&null!=this._targetBurger&&this._targetBurger.canThrow()&&(this._inputPos.toPoint(c.line.get_vector()),
this._inputPos.multiply(0.2*(1/this._duration)),this._targetBurger.throwBurger(this._startPos.x+this._inputPos.x,this._startPos.y+this._inputPos.y))}},_onInput:function(){m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY||this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos)},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",1)},_initWorld:function(){U.prototype._initWorld.call(this);Eh._BURGER_AMOUNT="EXTRA_AMMO"==
m.getString("STRING_BOOSTER")?18:12;this._flagPatrickMode="ANCHOVY_PATRICK_MODE"==m.getString("STRING_BOOSTER");this._flagGameComplete=!1;this._startPos=Aa.request();this._targets=[];this._activeBurgers=[];this._elementManager.addElement(new n({asset:"nick_arcade_background_zoomed-in_blurred",y:0}));this._backSpine=this._elementManager.addElement(new E({library:"spine/cab_back",y:350,scale:0.5}));this._backSpine.animate("cab_glow_seq_1");this._elementManager.addElement(new $l({tween:this._tween}));
for(var a=0;2>a;)for(var b=a++,c=0;6>c;){var d=c++;this._targets.push(this._elementManager.addElement(new vm(this._tween,d,b,{x:-200+80*d+15*b,y:70*b})))}this._greaseLayer=this._elementManager.addElement(new n({x:0,y:0}));this._targets.reverse();this._particleLayer=this._elementManager.addElement(new n({x:0,y:0}));this._elementManager.addElement(new E({library:"spine/cab_front",scale:0.5,y:315}));this._dispenserSpine=this._elementManager.addElement(new E({library:"spine/krabby_dispenser",x:-283,y:241,
scale:0.5}));this._dispenserSpine.animate("idle_on",1);this._spawnAnchovyTimer=0;this._spawnBurgerTimer=1;this._burgerSpawnCount=0;this._flagPatrickMode&&this._targets[3].spawn(zc.PATRICK)},__class__:Eh});var uc=i["world.minigame_anchovy.elements.BURGER_STATE"]={__ename__:["world","minigame_anchovy","elements","BURGER_STATE"],__constructs__:["SPAWNING","IDLE","THROWN","FALLING"]};uc.SPAWNING=["SPAWNING",0];uc.SPAWNING.toString=r;uc.SPAWNING.__enum__=uc;uc.IDLE=["IDLE",1];uc.IDLE.toString=r;uc.IDLE.__enum__=
uc;uc.THROWN=["THROWN",2];uc.THROWN.toString=r;uc.THROWN.__enum__=uc;uc.FALLING=["FALLING",3];uc.FALLING.toString=r;uc.FALLING.__enum__=uc;var um=function(a,b,c,d){null==d&&(d=!1);this._CONVEYOR_VEL=50;n.call(this,c);this._tween=a;this._list=b;this.arcOffset=0;this._state=uc.IDLE;this._CONVEYOR_VEL=d?75:50};i["world.minigame_anchovy.elements.BurgerElement"]=um;um.__name__=["world","minigame_anchovy","elements","BurgerElement"];um.__super__=n;um.prototype=z(n.prototype,{_setState:function(a){var b=
this;this._state=a;if(3==this._state[1]){var a=this._tween,c=this.get_x()+100;a.tween({target:this,duration:0.7,ease:G.inQuad},{x:c,y:430,rotation:160}).onComplete(function(){b.doDelete=!0})}},spawn:function(){this._setState(uc.IDLE)},destroy:function(){this.doDelete=!0},throwBurger:function(a,b){var c=this;this.targetY=this.get_y();-220>a&&(a=-220);220<a&&(a=220);-200>b&&(b=-200);50<b&&(b=50);var d=a,e=b;this._setState(uc.THROWN);this._tween.tween({target:this,duration:0.5,ease:G.outQuad,thread:"movement"},
{x:d,targetY:e,scale:0.9}).onComplete(function(){P.burgerCollide.dispatch(c)});this._tween.tween({target:this,duration:0.5,ease:G.linear,thread:"rotation"},{rotation:d});this._tween.tween({target:this,duration:0.25,ease:G.outQuad,thread:"offset"},{arcOffset:-50}).onComplete(function(){c._tween.tween({target:c,duration:0.25,ease:G.inQuad,thread:"offset"},{arcOffset:0})});s.playSound(M.randomObject(["arcade_minigame_toss","arcade_minigame_toss_02","arcade_minigame_toss_03","arcade_minigame_toss_04"]))},
update:function(a){n.prototype.update.call(this,a);switch(this._state[1]){case 1:ma._platform.getTouch().get_supported()?(this.set_x(this.get_x()+this._CONVEYOR_VEL*a),265<=this.get_x()&&this._setState(uc.FALLING)):this.get_x()<=this._getFallPos()&&this.set_x(this.get_x()+this._CONVEYOR_VEL*a);break;case 2:this.set_y(this.targetY+this.arcOffset)}},_getFallPos:function(){return 265-87*this._list.indexOf(this)},canThrow:function(){return this._state!=uc.SPAWNING?this._state==uc.IDLE:!0},__class__:um});
var Ec=i["world.minigame_anchovy.elements.BURGER_SPLAT_TYPE"]={__ename__:["world","minigame_anchovy","elements","BURGER_SPLAT_TYPE"],__constructs__:"BUN_BOT,BUN_TOP,CHEESE,GREASE,SAUCE,PATTY,PICKLE,TOMATO".split(",")};Ec.BUN_BOT=["BUN_BOT",0];Ec.BUN_BOT.toString=r;Ec.BUN_BOT.__enum__=Ec;Ec.BUN_TOP=["BUN_TOP",1];Ec.BUN_TOP.toString=r;Ec.BUN_TOP.__enum__=Ec;Ec.CHEESE=["CHEESE",2];Ec.CHEESE.toString=r;Ec.CHEESE.__enum__=Ec;Ec.GREASE=["GREASE",3];Ec.GREASE.toString=r;Ec.GREASE.__enum__=Ec;Ec.SAUCE=["SAUCE",
4];Ec.SAUCE.toString=r;Ec.SAUCE.__enum__=Ec;Ec.PATTY=["PATTY",5];Ec.PATTY.toString=r;Ec.PATTY.__enum__=Ec;Ec.PICKLE=["PICKLE",6];Ec.PICKLE.toString=r;Ec.PICKLE.__enum__=Ec;Ec.TOMATO=["TOMATO",7];Ec.TOMATO.toString=r;Ec.TOMATO.__enum__=Ec;var zg=function(a,b){this._lifetime=0;var c=this;b.asset=this._getSplatType(a);n.call(this,b);this._lifetime=M.randomFloat(0.65,1.5);this._velocity={x:M.randomFloat(-4,4),y:M.randomFloat(-4,2)};this._rotationalVelocity=M.randomFloat(-10,10);ha.start(function(){c.doDelete=
!0},this._lifetime)};i["world.minigame_anchovy.elements.BurgerSplatFx"]=zg;zg.__name__=["world","minigame_anchovy","elements","BurgerSplatFx"];zg.__super__=n;zg.prototype=z(n.prototype,{update:function(a){n.prototype.update.call(this,a);this._velocity.y+=zg._GRAVITY;this.pos.x+=this._velocity.x;this.pos.y+=this._velocity.y;this.rotation+=this._rotationalVelocity},_getSplatType:function(a){switch(a[1]){case 0:return"krabby_bun_bot";case 1:return"krabby_bun_top";case 2:return"krabby_cheese";case 3:return 0.5>
M.randomFloat(0,1)?"krabby_grease_part_1":"krabby_grease_part_2";case 4:return 0.5>M.randomFloat(0,1)?"krabby_sauce_part_1":"krabby_sauce_part_2";case 5:return"krabby_patty";case 6:return"krabby_pickle";case 7:return"krabby_tomato"}},__class__:zg});var zc=i["world.minigame_anchovy.elements.TARGET_TYPE"]={__ename__:["world","minigame_anchovy","elements","TARGET_TYPE"],__constructs__:["BASIC","GOLD","PATRICK","SQUIDWARD"]};zc.BASIC=["BASIC",0];zc.BASIC.toString=r;zc.BASIC.__enum__=zc;zc.GOLD=["GOLD",
1];zc.GOLD.toString=r;zc.GOLD.__enum__=zc;zc.PATRICK=["PATRICK",2];zc.PATRICK.toString=r;zc.PATRICK.__enum__=zc;zc.SQUIDWARD=["SQUIDWARD",3];zc.SQUIDWARD.toString=r;zc.SQUIDWARD.__enum__=zc;var vm=function(a,b,c,d){n.call(this,d);this._tween=a;this.rowX=b;this.rowY=c;this.set_originY(0.25);this._anchovySpine=this.addChild(new E({library:"spine/anchovie_anim_1",alpha:0,scale:0.35,y:110}));this._patrickSpine=this.addChild(new E({library:"spine/hungry_pat_1",alpha:0,scale:0.35,x:30,y:170}));this._squidwardSpine=
this.addChild(new E({library:"spine/clarinet_squidward",alpha:0,scale:0.35,x:30,y:170}));this._mouth=this.addChild(new Ed({color:0,sizeX:40,sizeY:0,alpha:0}));this.alpha=this._mouthWaitTime=this._mouthOpenSpeed=this.radius=0;this._isActive=!1;this._doublePoints="DOUBLE_POINTS"==m.getString("STRING_BOOSTER")};i["world.minigame_anchovy.elements.TargetElement"]=vm;vm.__name__=["world","minigame_anchovy","elements","TargetElement"];vm.__super__=n;vm.prototype=z(n.prototype,{spawn:function(a){this._type=
a;this.set_originX(0.5);switch(this._type[1]){case 0:this._mouthOpenSpeed=0.5;this._anchovySpine.alpha=1;if(0==this.rowY)this.set_originY(0.29),this._mouth.sizeX=44,this.radius=20,this._anchovySpine.setSkin(0.5>Math.random()?"Blue":"Green",!0),this._anchovySpine.queueAnimation("fish_up",1,1,0,!0,0.4),this._anchovySpine.queueAnimation("fish_mouth_open"),this.set_y(200),this._runUpDown(M.randomFloat(-100,-75));else{this._anchovySpine.setSkin(0.5>Math.random()?"Teal":"Green",!0);this._anchovySpine.queueAnimation("fish_up",
1,1,0,!0,0.4);this._anchovySpine.queueAnimation("fish_mouth_open");switch(M.randomInt(0,1)){case 0:this.set_originY(0.45);this._mouth.sizeX=44;this.radius=20;break;case 1:this.set_originY(0.4),this._mouth.sizeX=40,this.radius=15}this.set_y(200);switch(this.rowX){case 1:case 4:this._runUpDown(M.randomFloat(-10,15));break;case 2:case 3:this._runUpDown(M.randomFloat(-20,15));break;case 0:case 5:this._runUpDown(M.randomFloat(0,20))}}this._mouthWaitTime=M.randomFloat(1,2);this._runMouthOpen();break;case 1:this._anchovySpine.alpha=
1;this._anchovySpine.setSkin("Gold",!0);this._anchovySpine.animate("fish_up",1);this._anchovySpine.queueAnimation("fish_mouth_open");this.radius=this._mouthSize=14;this._mouth.sizeX=42;this.set_y(200);this.set_originX(0.46);this.set_originY(0.46);this._runUpDown(M.randomFloat(20,30));this._mouthOpenSpeed=0.25;this._mouthWaitTime=0.5;this._runMouthOpen();break;case 2:this.set_y(275);this.set_originX(0.52);this.set_originY(0.4);this._mouthSize=this._mouth.sizeX=this._mouth.sizeY=136;this.radius=68;
this._patrickSpine.alpha=1;this._patrickSpine.animate("Pat_up",1);this._patrickSpine.queueAnimation("Pat_idle");this._runUpDown(-50);break;case 3:this.radius=0,this._mouthSize=this._mouth.sizeX=this._mouth.sizeY=80,this.set_y(200),this._mouthOpenSpeed=0.25,this._mouthWaitTime=0.5,this._squidwardSpine.alpha=1,this._squidwardSpine.animate("pop_up",1),this._squidwardSpine.queueAnimation("clarinet_music_seq_1"),this._runUpDown(0==this.rowY?-170:-100)}this.alpha=1;this._isActive=!0},collideWithBurger:function(a){var b=
this,c=Aa.request(this.pos.x,this.pos.y,0);this._type==zc.SQUIDWARD&&(c.x+=20,c.y+=50);if(Fd.distBetweenPoints(c,a.pos)<=this.radius+30){this._type==zc.SQUIDWARD?(this._squidwardSpine.animate("music_stop",1),m.modifyInt("INT_SCORE",1E3*(this._doublePoints?2:1))):this._type==zc.GOLD?m.modifyInt("INT_SCORE",2E3*(this._doublePoints?2:1)):(this._type==zc.PATRICK?(this._patrickSpine.animate("Pat_eat",1),this._patrickSpine.queueAnimation("Pat_idle")):this._anchovySpine.animate("fish_eat",1),m.modifyInt("INT_SCORE",
800*(this._doublePoints?2:1)));if(this._type==zc.BASIC||this._type==zc.GOLD)this._anchovySpine.animate("fish_down",1),this._tween.tween({target:this,duration:0.5,ease:G.inQuad,thread:"mouth",overwrite:!0},{radius:0}),this._tween.tween({target:this,duration:0.5,ease:G.inQuad,thread:"body",overwrite:!0},{y:100}).onComplete(function(){b._isActive=!1;b._anchovySpine.alpha=0;b.alpha=0});a.destroy(!0);c.dispose();return!0}if(Fd.distBetweenPoints(c,a.pos)<=this.radius+70&&(this._type==zc.BASIC||this._type==
zc.GOLD))this._anchovySpine.animate("fish_krabby_splatter"),this._tween.tween({target:this,duration:0.5,ease:G.inQuad,thread:"mouth",overwrite:!0},{radius:0}),this._tween.tween({target:this,duration:0.5,ease:G.inQuad,thread:"body",overwrite:!0},{y:100}).onComplete(function(){b._isActive=!1;b._anchovySpine.alpha=0;b.alpha=0});c.dispose();return!1},hide:function(){var a=this;this._tween.tween({target:this,duration:0.5,ease:G.inQuad,thread:"mouth",overwrite:!0},{radius:0});this._tween.tween({target:this,
duration:0.5,ease:G.inQuad,thread:"body",overwrite:!0},{y:100}).onComplete(function(){a._isActive=!1;a.alpha=0})},_runMouthOpen:function(){},_runUpDown:function(a){var b=this,c=this.get_y();this._tween.tween({target:this,duration:0.5,ease:G.inQuad,thread:"body"},{y:a}).onComplete(function(){if("ANCHOVY_PATRICK_MODE"!=m.getString("STRING_BOOSTER")){var a=b._tween,e=M.randomFloat(4,6);a.tween({target:{},duration:e,ease:G.linear},{}).onComplete(function(){b._anchovySpine.animate("fish_miss",1);b._anchovySpine.queueAnimation("fish_down",
1);b._patrickSpine.animate("Pat_down",1);b._tween.tween({target:b,duration:0.5,ease:G.outQuad,thread:"body"},{y:c}).onComplete(function(){b._isActive=!1;b._tween.stopThread(b,"mouth");b.alpha=0;b._anchovySpine.alpha=0;b._patrickSpine.alpha=0;b._squidwardSpine.alpha=0})})}})},getAnchovySpine:function(){return this._anchovySpine},update:function(a){n.prototype.update.call(this,a);this._mouth.sizeY=2*this.radius},isActive:function(){return this._isActive},__class__:vm});var uj=function(a){E.call(this,
a);this.setSkin(0.5>Math.random()?"Blue":"Green",!0);this.animate("fish_mouth_open");this._skeleton.slots[this._skeleton.findSlotIndex("leg")].color=new nf(0,0,0,0);this._skeleton.slots[this._skeleton.findSlotIndex("leg-green")].color=new nf(0,0,0,0)};i["world.minigame_anchovy.elements.TutorialAnchovy"]=uj;uj.__name__=["world","minigame_anchovy","elements","TutorialAnchovy"];uj.__super__=E;uj.prototype=z(E.prototype,{__class__:uj});var Pk=function(a){this._targetBall=this._netBackSpine=this._netFrontSpine=
this._hoopBack=this._spawnFront=this._spawnBack=this._wall=this._crowdLayers=null;this._duration=0;this._backboardStencil=this._wallStencil=this._startPos=null;this._streakTimeAward=1;this._hoopMovementWait=this._streakMin=2;this._hoopMovementRadius=70;this._hoopMovementSpeed=2;this._basket=this._ballSinkLayer=this._ballMissLayer=null;this._activeBalls=[];this._flagGameComplete=!1;this._timer=this._spawnTimer=0;U.call(this,a);this._elementManager.addLayer("layer_fg")};i["world.minigame_basketball.WorldBasketball"]=
Pk;Pk.__name__=["world","minigame_basketball","WorldBasketball"];Pk.__super__=U;Pk.prototype=z(U.prototype,{start:function(){U.prototype.start.call(this)},dispose:function(){U.prototype.dispose.call(this)},_setState:function(a){this._state=a;switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld();this._onGenerationComplete();break;case 3:m.setBool("BOOL_GAME_WIN",!0),ha.start(function(){m.setBool("BOOL_GAME_WIN",!0)},1)}},update:function(a){if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&
this._setState(T.INITIALIZING);break;case 2:this._tween.update(a);for(var b=this._activeBalls.length;0<=--b;)this._activeBalls[b].doDelete&&this._activeBalls.splice(b,1);this._elementManager.update(a);this._handleTouch(a);this._timer-=a;if(0>=this._timer){this._timer=0;m.setFloat("FLOAT_TIME",this._timer);this._setState(T.GAME_OVER);break}m.setFloat("FLOAT_TIME",this._timer);if(0==this._activeBalls.length||!this._activeBalls[this._activeBalls.length-1].canThrow())this._spawnTimer-=a,0>=this._spawnTimer&&
(this._spawnTimer=0.85,this._spawnBack.animate("ball_reload",1),this._spawnFront.animate("ball_reload",1),a=m.getInt("INT_STREAK"),this._activeBalls.push(this._elementManager.addElement(new zk(5==a,this._tween,{x:-250,y:150,library:"spine/arcade_slimeball_ball"}))));break;case 3:this._tween.update(a),this._tween.stopAllTweens(),this._elementManager.update(a)}},_moveHoop:function(){var a=this;if(null!=this._tween){var b=2*M.randomFloat(0,1)*Math.PI,c=this._hoopMovementRadius*Math.sqrt(M.randomFloat(0,
1)),d=c*Math.cos(b),b=c*Math.sin(b)+30;this._tween.tween({target:this._basket,duration:this._hoopMovementSpeed,ease:G.outQuad},{x:d-10,y:b-210});this._tween.tween({target:this._netFrontSpine,duration:this._hoopMovementSpeed,ease:G.outQuad},{x:d,y:b});this._tween.tween({target:this._hoopBack,duration:this._hoopMovementSpeed,ease:G.outQuad},{x:d-11,y:b-158});this._tween.tween({target:this._netBackSpine,duration:this._hoopMovementSpeed,ease:G.outQuad},{x:d,y:b});this._tween.tween({target:this._backboardStencil,
duration:this._hoopMovementSpeed,ease:G.outQuad},{x:d-10,y:b-120});ha.start(function(){a._moveHoop()},this._hoopMovementWait,"Hoop Movement")}},_addEventListeners:function(){U.prototype._addEventListeners.call(this);P.basketballCollide.add(v(this,this._onBallCollide));P.slimeBasketballDump.add(v(this,this._onSlimeDump))},_removeEventListeners:function(){U.prototype._removeEventListeners.call(this);P.basketballCollide.remove(v(this,this._onBallCollide));P.slimeBasketballDump.remove(v(this,this._onSlimeDump))},
_onSlimeDump:function(){s.playSound("audio/arcade_slime_wave");this._updateCrowdLayers(4)},_onBallCollide:function(a){var b=this._basket.checkCollision(a),c=m.getInt("INT_STREAK");if(1==b){this._ballSinkLayer.addChild(a);this._netBackSpine.animate("hoop_hit_score",1);this._netBackSpine.queueAnimation("hoop_idle");this._netFrontSpine.animate("hoop_hit_score",1);this._netFrontSpine.queueAnimation("hoop_idle");m.modifyInt("INT_STREAK",1);c=m.getInt("INT_STREAK");if(c>this._streakMin){this._timer+=this._streakTimeAward;
var d=this._elementManager.addElement(new V({text:"basketball.streak",x:a.get_x(),y:a.get_y(),rotation:M.randomFloat(-20,20)}));d.setVariables([this._streakTimeAward]);var b=this._tween,e=a.get_y()-50;b.tween({target:d,duration:2,ease:G.outQuad},{y:e}).onComplete(function(){d.doDelete=!0});s.playSound("nick_arcade_general_pickup_alt")}1==c?(this._wall.animate("blackboard_seq_1",3),this._wall.queueAnimation("blackboard_idle")):2==c?(this._wall.animate("blackboard_seq_2",3),this._wall.queueAnimation("blackboard_idle")):
2<c&&(this._wall.animate("blackboard_seq_3",3),this._wall.queueAnimation("blackboard_idle"),3==c?this._updateCrowdLayers(1):4==c?this._updateCrowdLayers(2):5==c&&this._updateCrowdLayers(3))}else 0==b?(this._ballMissLayer.addChild(a),this._netBackSpine.animate("hoop_hit",1),this._netBackSpine.queueAnimation("hoop_idle"),this._netFrontSpine.animate("hoop_hit",1),this._netFrontSpine.queueAnimation("hoop_idle"),this._updateCrowdLayers(0),m.setInt("INT_STREAK",0)):(this._updateCrowdLayers(0),m.setInt("INT_STREAK",
0),a.doDelete=!0);a.flagGiant?(this._ballMissLayer.addChild(a),a.pos.x=0,a.pos.y=200):(this._backboardStencil.addSplat(a.pos),this._wallStencil.addSplat(a.pos));s.playSound(M.randomObject(["blood_splat_03","blood_splat_04","blood_splat_05"]))},_handleTouch:function(a){if(!(m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY))if(this._duration+=a,0<w.multiTouch.length)for(var a=0,b=w.multiTouch;a<b.length;){var c=b[a];++a;if(c.phase==Gb.DOWN){if(1==w.multiTouch.length){this._duration=0;this._elementManager.camera.getWorldPositionOfScreenPoint(c.get_currentPos().x,
c.get_currentPos().y,0,this._inputPos);this._startPos.toPoint(this._inputPos);for(var c=0,d=this._activeBalls;c<d.length;){var e=d[c];++c;if(Fd.distBetweenPoints(e.pos,this._inputPos)<(e.flagGiant?1.5*e.get_width():e.get_width()/2)&&e.canThrow()){this._targetBall=e;break}}}}else c.phase!=Gb.MOVED&&c.phase==Gb.UP&&null!=this._targetBall&&this._targetBall.canThrow()&&(this._inputPos.toPoint(c.line.get_vector()),this._inputPos.multiply(0.2*(1/this._duration)),this._targetBall.shoot(this._startPos.x+
this._inputPos.x,this._startPos.y+this._inputPos.y))}},_onInput:function(){m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY||this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos)},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",1)},_initWorld:function(){var a=this;U.prototype._initWorld.call(this);this._flagGameComplete=!1;this._timer="EXTRA_TIME"==m.getString("STRING_BOOSTER")?45:30;m.setInt("INT_STREAK",0);
this._startPos=Aa.request();this._activeBalls=[];this._elementManager.addElement(new n({asset:"arcade_gallery_bg"}));this._addCrowdLayers();this._netBackSpine=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_hoop_back",x:10,y:46}));this._netBackSpine.animate("hoop_idle");this._backboardStencil=this._elementManager.addElement(new Fj("hoop_backboard_stencil",5,this._tween,{y:-75}));this._wall=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_backboard",x:10,
y:27})).animate("blackboard_idle");this._elementManager.addElement(new am({tween:this._tween}));this._wallStencil=this._elementManager.addElement(new Fj("hoops_wall_back",5,this._tween,{y:100}));this._basket=this._elementManager.addElement(new wm({y:-175}));this._hoopBack=this._elementManager.addElement(new n({asset:"hoop_rim_back",y:-112}));this._ballSinkLayer=this._elementManager.addElement(new Mb({}));this._netFrontSpine=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_hoop_front",
x:10,y:46}));this._netFrontSpine.animate("hoop_idle");this._ballMissLayer=this._elementManager.addElement(new Mb({}));this._spawnBack=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_pipe_back",x:15,y:12}));this._spawnFront=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_pipe_front",x:15,y:12}),"layer_fg");ha.start(function(){a._moveHoop()},this._hoopMovementWait,"Hoop Movement")},_addCrowdLayers:function(){this._crowdLayers=[];var a=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_crowd",
scale:0.65,x:-400,y:230}));a.setSkin("cutout_1");a.animate("out",1);this._crowdLayers.push([a]);a=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_crowd",scale:0.65,x:400,y:230}));a.setSkin("cutout_2");this._crowdLayers[0].push(a);a=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_crowd",scale:0.65,x:-520,y:280}));a.setSkin("cutout_3");this._crowdLayers.push([a]);a=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_crowd",scale:0.65,
x:-350,y:280}));a.setSkin("cutout_4");this._crowdLayers[1].push(a);a=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_crowd",scale:0.65,x:480,y:280}));a.setSkin("cutout_2");this._crowdLayers[1].push(a);a=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_crowd",scale:0.65,x:370,y:280}));a.setSkin("cutout_1");this._crowdLayers[1].push(a);a=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_crowd",scale:0.65,x:-475,y:275}));a.setSkin("cutout_3");
this._crowdLayers.push([a]);a=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_crowd",scale:0.65,x:-420,y:290}));a.setSkin("cutout_4");this._crowdLayers[2].push(a);a=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_crowd",scale:0.65,x:515,y:290}));a.setSkin("cutout_2");this._crowdLayers[2].push(a);a=this._elementManager.addElement(new E({library:"spine/arcade_slimeball_crowd",scale:0.65,x:460,y:275}));a.setSkin("cutout_1");this._crowdLayers[2].push(a)},
_updateCrowdLayers:function(a){null==a&&(a=-1);var b=m.getInt("INT_STREAK");switch(a){case 0:a=5<=b?"out_slimed":"out";if(3<=b)for(var c=0,d=this._crowdLayers[0].length;c<d;)this._crowdLayers[0][c++].animate(a,1,1,0,!0);if(4<=b){c=0;for(d=this._crowdLayers[1].length;c<d;)this._crowdLayers[1][c++].animate(a,1,1,0,!0)}if(5<=b){b=0;for(c=this._crowdLayers[2].length;b<c;)this._crowdLayers[2][b++].animate(a,1,1,0,!0)}break;case 1:case 2:case 3:b=0;for(c=this._crowdLayers[a-1].length;b<c;)d=b++,this._crowdLayers[a-
1][d].animate("in",1,1,0,!0),this._crowdLayers[a-1][d].queueAnimation("idle",0,1,0,!0);break;case 4:a=0;for(b=this._crowdLayers.length;a<b;)for(var c=a++,d=0,e=this._crowdLayers[c].length;d<e;){var f=d++;this._crowdLayers[c][f].animate("slime_in",1,1,0,!0);this._crowdLayers[c][f].queueAnimation("idle_slimed",0,1,0,!0)}}},__class__:Pk});var uf=i["world.minigame_basketball.elements.BALL_STATE"]={__ename__:["world","minigame_basketball","elements","BALL_STATE"],__constructs__:["IDLE","THROWN","FALLING"]};
uf.IDLE=["IDLE",0];uf.IDLE.toString=r;uf.IDLE.__enum__=uf;uf.THROWN=["THROWN",1];uf.THROWN.toString=r;uf.THROWN.__enum__=uf;uf.FALLING=["FALLING",2];uf.FALLING.toString=r;uf.FALLING.__enum__=uf;var zk=function(a,b,c){this.flagGiant=this._flagYPosLock=!1;this.targetY=this.arcOffset=0;this._state=uf.IDLE;this._tween=null;if(this.flagGiant=a)c.library="spine/nick_arcade_slimeball_pop_dump",c.originY=1;E.call(this,c);this._tween=b;this.arcOffset=0;this.animate(this.flagGiant?"ball_idle":"ball_idle");
a=this._tween;b=this.flagGiant?0:this.get_y();a.tween({target:this,duration:0.5,ease:G.outCubic},{x:0,y:b,rotation:360});this._state=uf.IDLE};i["world.minigame_basketball.elements.BallElement"]=zk;zk.__name__=["world","minigame_basketball","elements","BallElement"];zk.__super__=E;zk.prototype=z(E.prototype,{get_width:function(){return 80},get_height:function(){return 80},_setState:function(a){var b=this;this._state=a;if(2==this._state[1]){var a=this._tween,c=this.get_x()+100;a.tween({target:this,
duration:0.7,ease:G.inQuad},{x:c,y:430,rotation:160}).onComplete(function(){b.doDelete=!0})}},spawn:function(){this._setState(uf.IDLE)},makeBasket:function(a,b){var c=this;a?this.flagGiant?(this.animate("slime_dump",1),P.slimeBasketballDump.dispatch(),this._flagYPosLock=!0,this._tween.tween({target:this,overwrite:!0,duration:4,ease:G.outQuad},{y:-1300}).onComplete(function(){c._tween.tween({target:c,duration:0.5,ease:G.linear},{alpha:0}).onComplete(function(){c.doDelete=!0})})):(this._tween.tween({target:this,
duration:0.1,ease:G.linear,thread:"x"},{x:b.x,y:b.y}).onComplete(function(){m.modifyInt("INT_SCORE",200*m.getInt("INT_STREAK")*("DOUBLE_POINTS"==m.getString("STRING_BOOSTER")?2:1))}),this._tween.tween({target:this,duration:0.5,ease:G.inQuad},{targetY:280}).onComplete(function(){c.doDelete=!0})):(this._tween.tween({target:this,duration:0.25,ease:G.linear,thread:"x"},{x:b.x,y:b.y,scaleX:0.7}).onComplete(function(){m.modifyInt("INT_SCORE",200*m.getInt("INT_STREAK")*("DOUBLE_POINTS"==m.getString("STRING_BOOSTER")?
2:1))}),this._tween.tween({target:this,duration:0.6,ease:G.inQuad},{targetY:280}).onComplete(function(){c.doDelete=!0}))},shoot:function(a,b){var c=this;this.targetY=this.get_y();this.animate(this.flagGiant?"ball_idle":"ball_roll");-150>a&&(a=-150);150<a&&(a=150);-200>b&&(b=-200);50<b&&(b=50);var d=a,e=b;this._setState(uf.THROWN);s.playSound(M.randomObject(["arcade_minigame_toss","arcade_minigame_toss_02","arcade_minigame_toss_03","arcade_minigame_toss_04"]));this._tween.tween({target:this,duration:0.5,
ease:G.outQuad,thread:"movement"},{x:d,targetY:e,scale:0.6}).onComplete(function(){P.basketballCollide.dispatch(c)});this._tween.tween({target:this,duration:0.25,ease:G.outQuad,thread:"offset"},{arcOffset:-50}).onComplete(function(){c._tween.tween({target:c,duration:0.25,ease:G.inQuad,thread:"offset"},{arcOffset:0})})},bounce:function(a){var b=this;this.setTimeScale(-1);this._tween.tween({target:this,duration:0.2,ease:G.outQuad,thread:"offset"},{arcOffset:a}).onComplete(function(){b._tween.tween({target:b,
duration:0.25,ease:G.inQuad,thread:"offset"},{arcOffset:0})});a=2*this.get_x();this._tween.tween({target:this,duration:0.5,ease:G.inQuad,thread:"movement"},{x:a,targetY:280,scale:1}).onComplete(function(){b.doDelete=!0})},update:function(a){E.prototype.update.call(this,a);switch(this._state[1]){case 1:this.set_y(this._flagYPosLock?200:this.targetY+this.arcOffset)}},canThrow:function(){return this._state==uf.IDLE},__class__:zk});var wm=function(a){this._backboard=this._backboardHitbox=this._safeHitbox=
this._swishHitbox=this._rimHitbox=this._debugHB=null;n.call(this,a);this._backboardHitbox=Of.request(this.get_x()-100,this.get_y()-80,200,112);this._safeHitbox=Of.request(this.get_x()-40,this.get_y()-50,80,90);this._swishHitbox=Of.request(this.get_x()-40,this.get_y()+10,80,30);this._rimHitbox=Of.request(this.get_x()-50,this.get_y()+25,100,30)};i["world.minigame_basketball.elements.BasketElement"]=wm;wm.__name__=["world","minigame_basketball","elements","BasketElement"];wm.__super__=n;wm.prototype=
z(n.prototype,{checkCollision:function(a){if(a.flagGiant)return a.makeBasket(!0,{x:this.get_x(),y:this.get_y()-20}),1;if(this._swishHitbox.containsPoint(a.pos))return s.playSound(M.randomObject(["slimeball_net_swish","slimeball_net_swish_alt"])),a.makeBasket(!0,{x:this.get_x(),y:this.get_y()-20}),1;if(this._rimHitbox.containsPoint(a.pos))return s.playSound("slimeball_backboard_bounce_02"),a.bounce(-100),0;if(this._safeHitbox.containsPoint(a.pos))return s.playSound(M.randomObject(["slimeball_net_swish",
"slimeball_net_swish_alt"])),a.makeBasket(!1,{x:this.get_x(),y:this.get_y()-20}),1;return this._backboardHitbox.containsPoint(a.pos)?(s.playSound("slimeball_backboard_bounce_02"),a.bounce(-50),0):-1},_drawSplat:function(){},_recalculateHitboxes:function(){this._backboardHitbox.set_x(this.get_x()-100);this._backboardHitbox.set_y(this.get_y()-80);this._safeHitbox.set_x(this.get_x()-40);this._safeHitbox.set_y(this.get_y()-50);this._swishHitbox.set_x(this.get_x()-40);this._swishHitbox.set_y(this.get_y()+
10);this._rimHitbox.set_x(this.get_x()-50);this._rimHitbox.set_y(this.get_y()+25)},update:function(a){n.prototype.update.call(this,a);this._recalculateHitboxes()},__class__:wm});var Fj=function(a,b,c,d){this._baseTexture=this._tween=null;this._stencils=[];n.call(this,d);this._tween=c;this._baseTexture=H.getTexture(a);this._stencils=[];for(a=0;a<b;)a++,c=this.addChild(new n({alpha:0})),d=ma._platform.getRenderer().createTexture(this._baseTexture.get_width(),this._baseTexture.get_height()),c.texture=
d,this._stencils.push(c)};i["world.minigame_basketball.elements.SplatStencil"]=Fj;Fj.__name__=["world","minigame_basketball","elements","SplatStencil"];Fj.__super__=n;Fj.prototype=z(n.prototype,{dispose:function(){for(var a=0,b=this._stencils;a<b.length;){var c=b[a];++a;c.texture.dispose()}n.prototype.dispose.call(this)},update:function(a){n.prototype.update.call(this,a)},addSplat:function(a){var b=a.x-this.get_x(),a=a.y-this.get_y(),b=b+this._baseTexture.get_width()/2,a=a+this._baseTexture.get_height()/
2,c=null;switch(M.randomInt(1,3)){case 1:c=H.getTexture("splat_2");break;case 2:c=H.getTexture("splat_2");break;case 3:c=H.getTexture("splat_3")}var d=this._getNextSprite(),e=t.field(d.texture.get_graphics(),"_canvasCtx"),f=this._baseTexture.get_width(),g=this._baseTexture.get_height();e.clearRect(0,0,f,g);d.texture.get_graphics().drawTexture(c,b-c.get_width()/2,a-c.get_height()/2);d.texture.get_graphics().setBlendMode(wc.Mask);d.texture.get_graphics().drawTexture(this._baseTexture,0,0);d.texture.get_graphics().setBlendMode(wc.Normal);
d.alpha=1;this._tween.tween({target:d,duration:2,ease:G.inQuad},{alpha:0})},_getNextSprite:function(){for(var a=null,b=0,c=this._stencils;b<c.length;){var d=c[b];++b;if(0>=d.alpha)return d;if(null==a||a.alpha>d.alpha)a=d}return a},__class__:Fj});var Qk=function(a){this._canDoGoatSequence=!0;this._goatTime=2;U.call(this,a);this._elementManager.addLayer("layer_fg")};i["world.minigame_dangerlaser.WorldDangerLaser"]=Qk;Qk.__name__=["world","minigame_dangerlaser","WorldDangerLaser"];Qk.__super__=U;Qk.prototype=
z(U.prototype,{start:function(){U.prototype.start.call(this)},dispose:function(){U.prototype.dispose.call(this)},_setState:function(a){this._state=a;switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld();this._onGenerationComplete();break;case 3:m.setBool("BOOL_GAME_WIN",!0)}},update:function(a){if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&this._setState(T.INITIALIZING);break;case 2:0<this._slowTimer&&(this._slowTimer-=a,a/=2,0>=this._slowTimer&&
this._electricEffect.queueAnimation("effect_volt",1));this._tween.update(a);this._elementManager.update(a);this._timer-=a;if(0>=this._timer){this._timer=0;m.setFloat("FLOAT_TIME",this._timer);this._setState(T.GAME_OVER);break}m.setFloat("FLOAT_TIME",this._timer);this._spawnTimer-=a;if(0>=this._spawnTimer){var b=M.randomInt(1,5-Math.round(this._timer/10)),a=this._getEmpty();M.shuffleArray(a);for(var c=0,b=Math.round(Math.min(b,a.length));c<b;){var d=c++,e=Sb.BASIC;if(this._flagFrenzy)e=0.5>Math.random()?
Sb.BASIC:this._frenzyPowerup;else switch(M.randomInt(0,20)){case 11:case 12:e=Sb.SHOCKWAVE;break;case 13:case 14:e=Sb.TELEPORT;break;case 15:case 16:e=Sb.TELEKINESIS;break;case 17:case 18:e=Sb.ELECTRIC;break;case 19:e=Sb.GOAT;break;default:e=Sb.BASIC}a[d].enable(e)}this._spawnTimer=M.randomFloat(0.1,1.2)}break;case 3:this._tween.update(a),this._elementManager.update(a)}},_addEventListeners:function(){U.prototype._addEventListeners.call(this);P.lightPowerTapped.add(v(this,this._onPowerup))},_removeEventListeners:function(){U.prototype._removeEventListeners.call(this);
P.lightPowerTapped.remove(v(this,this._onPowerup))},_onPowerup:function(a,b,c){var d=this;this._screen.showPowerupOnScreen(a);switch(a[1]){case 1:s.playSound("danger_laser_white_button_wave");var e=this._getNeighbors(b,c,1);this._shockwaveEffect.pos.toPoint(this._grid[b][c].pos);this._shockwaveEffect.animate("effect_shoutout",1);ha.start(function(){for(var a=0;a<e.length;){var b=e[a];++a;b.tap()}},0.25,"shockwave1");break;case 2:s.playSound("danger_laser_yellow_button_blip");a=this._getNeighbors(b,
c,1);for(b=0;b<a.length;)if(c=a[b],++b,c.getState()!=cg.ON)for(var f=0,g=this._grid;f<g.length;){var j=g[f];++f;if(c.getState()==cg.ON)break;for(var h=0;h<j.length;){var i=j[h];++h;if(i.getState()==cg.ON&&-1==a.indexOf(i)){c.enable(i.getType(),!0);i.disable(!0);break}}}break;case 3:s.playSound("danger_laser_blue_button_blip");a=0;for(b=this._grid;a<b.length;){c=b[a];++a;for(f=0;f<c.length;)g=c[f],++f,g.tap(!0)}break;case 4:s.playSound("danger_laser_red_button_shock");this._electricEffect.animate("effect_volt");
this._slowTimer=5;break;case 5:s.playSound("danger_laser_white_button_wave"),this._canDoGoatSequence&&(this._canDoGoatSequence=!1,this._tween.stop(this._goat),this._tween.stop(this._butt),this._tween.tween({target:this._goat,duration:0.35,ease:G.outQuad},{x:fb.STAGE_CENTER_X-250}).onComplete(function(){d._tween.tween({target:d._goat,duration:0.6,delay:d._goatTime,ease:G.outQuad},{x:fb.STAGE_CENTER_X+500}).onComplete(function(){d._canDoGoatSequence=!0});d._tween.tween({target:d._butt,duration:0.4,
ease:G.inOutBounce},{scale:1.25,alpha:1}).onComplete(function(){d._tween.tween({target:d._butt,duration:0.35,delay:d._goatTime-0.5,ease:G.outQuad},{scale:0,alpha:0})})}))}},_onInput:function(a,b){m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY||(this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos),a==$.POINTER&&b&&this._checkTap())},_checkTap:function(){for(var a=0,b=this._grid;a<b.length;){var c=b[a];++a;for(var d=
0;d<c.length;){var e=c[d];++d;Math.abs(this._inputPos.x-e.get_x())<e.get_width()/2&&Math.abs(this._inputPos.y-e.get_y())<e.get_height()/2&&e.tap()&&this._elementManager.addElement(this._requestFloatingText("danger_laser.floating_score",this._inputPos.x,this._inputPos.y,["DOUBLE_POINTS"==m.getString("STRING_BOOSTER")?200:100]))}}},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",1);this._cacheManager.addCache(this._TEXT_CACHE,Ri,10)},_initWorld:function(){U.prototype._initWorld.call(this);this._flagGameComplete=
!1;this._flagFrenzy="DANGER_LASER_FRENZY_MODE"==m.getString("STRING_BOOSTER");this._timer="EXTRA_TIME"==m.getString("STRING_BOOSTER")?45:30;this._slowTimer=0;this._spawnTimer=1;this._elementManager.addElement(new n({asset:"nick_arcade_background_zoomed-in_blurred",y:0}));this._elementManager.addElement(new n({asset:"laser_machine_back",y:0}));this._grid=Array(5);for(var a=0;5>a;){var b=a++;this._grid[b]=Array(4);for(var c=0;4>c;){var d=c++;this._grid[b][d]=this._elementManager.addElement(new xm(b,
d,this._tween,{asset:"diode_base",x:-230+115*b,y:-112+114*d}),"layer_world")}}if(this._flagFrenzy)switch(M.randomInt(0,3)){case 0:this._frenzyPowerup=Sb.SHOCKWAVE;break;case 1:this._frenzyPowerup=Sb.TELEPORT;break;case 2:this._frenzyPowerup=Sb.TELEKINESIS;break;case 3:this._frenzyPowerup=Sb.ELECTRIC}this._electricEffect=this._elementManager.addElement(new E({library:"spine/arcade_danger_lasers_effect_volt"}));this._shockwaveEffect=this._elementManager.addElement(new E({library:"spine/arcade_danger_lasers_effect_shoutout"}));
this._elementManager.addElement(new E({library:"spine/arcade_danger_lasers_electric_tubes"}),"layer_fg").animate("energy_poles");this._screen=this._elementManager.addElement(new ym({y:-240}),"layer_fg");this._goat=this._elementManager.addElement(new E({library:"spine/goat",x:fb.STAGE_CENTER_X+500,y:90}),"layer_fg");this._butt=this._goat.addChild(new E({library:"spine/butt_word",x:-400,y:-160,scale:0,alpha:0,originX:1,originY:1}))},_getEmpty:function(){for(var a=[],b=0,c=this._grid;b<c.length;){var d=
c[b];++b;for(var e=0;e<d.length;){var f=d[e];++e;f.getState()==cg.OFF&&a.push(f)}}return a},_getNeighbors:function(a,b,c){for(var d=[],e=-c,f=c+1;e<f;){var g=e++;if(!(0>a+g||5<=a+g))for(var j=-c,h=c+1;j<h;){var i=j++;0>b+i||4<=b+i||0==g&&0==i||d.push(this._grid[a+g][b+i])}}return d},__class__:Qk});var cg=i["world.minigame_dangerlaser.elements.LIGHT_STATE"]={__ename__:["world","minigame_dangerlaser","elements","LIGHT_STATE"],__constructs__:["ON","OFF"]};cg.ON=["ON",0];cg.ON.toString=r;cg.ON.__enum__=
cg;cg.OFF=["OFF",1];cg.OFF.toString=r;cg.OFF.__enum__=cg;var Sb=i["world.minigame_dangerlaser.elements.LIGHT_TYPE"]={__ename__:["world","minigame_dangerlaser","elements","LIGHT_TYPE"],__constructs__:"BASIC,SHOCKWAVE,TELEPORT,TELEKINESIS,ELECTRIC,GOAT".split(",")};Sb.BASIC=["BASIC",0];Sb.BASIC.toString=r;Sb.BASIC.__enum__=Sb;Sb.SHOCKWAVE=["SHOCKWAVE",1];Sb.SHOCKWAVE.toString=r;Sb.SHOCKWAVE.__enum__=Sb;Sb.TELEPORT=["TELEPORT",2];Sb.TELEPORT.toString=r;Sb.TELEPORT.__enum__=Sb;Sb.TELEKINESIS=["TELEKINESIS",
3];Sb.TELEKINESIS.toString=r;Sb.TELEKINESIS.__enum__=Sb;Sb.ELECTRIC=["ELECTRIC",4];Sb.ELECTRIC.toString=r;Sb.ELECTRIC.__enum__=Sb;Sb.GOAT=["GOAT",5];Sb.GOAT.toString=r;Sb.GOAT.__enum__=Sb;var xm=function(a,b,c,d){n.call(this,d);this.indexX=a;this.indexY=b;this._state=cg.OFF;this._type=Sb.BASIC;this._tween=c;this._timer=0;this._lightElement=this.addChild(new n({asset:"template/ui/achievments/achievement_icon_default",x:-3,y:-3,alpha:0}));this._telekinesisEffect=this.addChild(new E({library:"spine/arcade_danger_lasers_effect_brainstorm",
x:-3,y:-3}));this._teleportEffect=this.addChild(new E({library:"spine/arcade_danger_lasers_effect_awol",x:-3,y:-3}));this._tapEffect=this.addChild(new E({library:"spine/arcade_danger_lasers_effect_hit",x:-3,y:-3}))};i["world.minigame_dangerlaser.elements.LightElement"]=xm;xm.__name__=["world","minigame_dangerlaser","elements","LightElement"];xm.__super__=n;xm.prototype=z(n.prototype,{get_width:function(){return 100},get_height:function(){return 100},_setState:function(a){this._state=a;switch(this._state[1]){case 0:switch(this._type[1]){case 0:this._lightElement.setAsset("diode_on");
this._timer=1;break;case 1:this._lightElement.setAsset("diode_shoutout");this._timer=1;break;case 2:this._lightElement.setAsset("diode_awol");this._timer=1;break;case 3:this._lightElement.setAsset("diode_brainstorm");this._timer=1;break;case 4:this._lightElement.setAsset("diode_volt");this._timer=1;break;case 5:this._lightElement.setAsset("diode_goat"),this._timer=1}this._tween.tween({target:this._lightElement,duration:0.1,ease:G.inQuad,overwrite:!0},{alpha:1});break;case 1:this._tween.tween({target:this._lightElement,
duration:0.1,ease:G.inQuad,overwrite:!0},{alpha:0})}},update:function(a){n.prototype.update.call(this,a);this._state==cg.ON&&(this._timer-=a,0>=this._timer&&this.disable())},enable:function(a,b){null==b&&(b=!1);this._type=a;this._setState(cg.ON);b&&this._teleportEffect.animate("effect_awol_appear",1)},disable:function(a){null==a&&(a=!1);a&&this._teleportEffect.animate("effect_awol_disappear",1);this._setState(cg.OFF)},tap:function(a){null==a&&(a=!1);if(this._state==cg.OFF)return!1;m.modifyInt("INT_SCORE",
"DOUBLE_POINTS"==m.getString("STRING_BOOSTER")?200:100);this._setState(cg.OFF);a?this._telekinesisEffect.animate("effect_brainstorm",1):this._type==Sb.BASIC&&this._tapEffect.animate("effect_hit",1);this._type!=Sb.BASIC?P.lightPowerTapped.dispatch(this._type,this.indexX,this.indexY):s.playSound("nick_arcade_general_pickup_alt");return!0},getState:function(){return this._state},getType:function(){return this._type},__class__:xm});var ym=function(a){n.call(this,a);this._powerupQueue=[];P.updateDisplay.add(v(this,
this._onUpdateDisplay));this._backgroundImage=this.addChild(new n({asset:"screen_captain_man",y:23}));this._scoreText=this.addChild(new V({text:"danger_laser.score",align:Ca.Left,x:-25,y:50}));this._timeText=this.addChild(new V({text:"danger_laser.time",align:Ca.Left,x:-25,y:5}));this._scoreText.setVariables([0]);this._timeText.setVariables([30]);this._timer=0;this.addChild(new n({asset:"screen_brackets_1"}))};i["world.minigame_dangerlaser.elements.ScreenElement"]=ym;ym.__name__=["world","minigame_dangerlaser",
"elements","ScreenElement"];ym.__super__=n;ym.prototype=z(n.prototype,{dispose:function(){n.prototype.dispose.call(this);P.updateDisplay.remove(v(this,this._onUpdateDisplay))},_onUpdateDisplay:function(a){switch(a){case "FLOAT_TIME":this._timeText.setVariables([Math.floor(m.getInt("FLOAT_TIME"))]);break;case "INT_SCORE":this._scoreText.setVariables([m.getInt("INT_SCORE")])}},showPowerupOnScreen:function(a){2<this._powerupQueue.length||this._powerupQueue.push(a)},update:function(a){n.prototype.update.call(this,
a);this._timer-=a;if(0>=this._timer)if(0<this._powerupQueue.length){switch(this._powerupQueue.shift()[1]){case 1:this._backgroundImage.setAsset("screen_shoutout");break;case 2:this._backgroundImage.setAsset("screen_awol");break;case 3:this._backgroundImage.setAsset("screen_brainstorm");break;case 4:this._backgroundImage.setAsset("screen_volt")}this._timer=0.75}else this._backgroundImage.setAsset("screen_captain_man")},__class__:ym});var Fh=function(a){this._flagSwitchingLayers=this._whirrAudioPlaying=
this._flagCraneDropping=!1;this._currentZLayer=0;this._rumbleAmount=10;this._rumbleTime=0;this._rumbleDuration=0.25;this._shakeInputTargetCount=5;this._shakeTime=0;this._shakeStepTimer=0.35;U.call(this,a);this._elementManager.addLayer("layer_fg")};i["world.minigame_hoofmachine.WorldHoofMachine"]=Fh;Fh.__name__=["world","minigame_hoofmachine","WorldHoofMachine"];Fh.__super__=U;Fh.prototype=z(U.prototype,{start:function(){U.prototype.start.call(this)},dispose:function(){U.prototype.dispose.call(this);
this._defaultCamPos.dispose()},_setState:function(a){this._state=a;switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld();this._onGenerationComplete();break;case 3:s.stopSound("claw_machine_whirring_loop"),ha.start(function(){m.setBool("BOOL_GAME_WIN",!0)},1)}},update:function(a){if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&this._setState(T.INITIALIZING);break;case 2:this._tween.update(a);this._elementManager.update(a);this._flagSwitchingLayers&&
(this._displayZLayer[this._layerSwapFlags[0]].alpha=this._tweenHelperAlpha.valA,this._displayZLayer[this._layerSwapFlags[1]].alpha=this._tweenHelperAlpha.valB,this._displayZLayer[this._layerSwapFlags[0]].set_scale(this._tweenHelperScale.valA),this._displayZLayer[this._layerSwapFlags[1]].set_scale(this._tweenHelperScale.valB));this._timer-=a;if(0>=this._timer){this._timer=0;m.setFloat("FLOAT_TIME",this._timer);break}m.setFloat("FLOAT_TIME",this._timer);0<this._rumbleTime&&(this._rumbleTime-=a,this._elementManager.camera.pos.y+=
M.randomFloat(-this._rumbleAmount,this._rumbleAmount)*(this._rumbleTime/this._rumbleDuration),0>=this._rumbleTime&&(this._elementManager.camera.pos.x=this._defaultCamPos.x,this._elementManager.camera.pos.y=this._defaultCamPos.y));if(0<this._shakeTime&&(this._shakeTime-=a,0>=this._shakeTime&&this._evaluateShake())){this._rumbleTime=this._rumbleDuration;for(var b=0,c=this._prizes.length;b<c;){var d=this._prizes[b++].getBody(),e=M.randomFloat(-100,100),f=M.randomFloat(-500,500);if(e!=e||f!=f)throw new h("Error: Vec2 components cannot be NaN");
var g;null==o.poolVec2?g=new ja:(g=o.poolVec2,o.poolVec2=g.zpp_pool,g.zpp_pool=null,g.zpp_disp=!1,g==o.nextVec2&&(o.nextVec2=null));if(null==g.zpp_inner){var j;null==q.zpp_pool?j=new q:(j=q.zpp_pool,q.zpp_pool=j.next,j.next=null);j.weak=!1;j._immutable=!1;j.x=e;j.y=f;g.zpp_inner=j;g.zpp_inner.outer=g}else{if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=g.zpp_inner;if(j._immutable)throw new h("Error: Vec2 is immutable");null!=j._isimmutable&&j._isimmutable();
if(e!=e||f!=f)throw new h("Error: Vec2 components cannot be NaN");if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=g.zpp_inner;null!=j._validate&&j._validate();if(g.zpp_inner.x==e){if(null!=g&&g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=g.zpp_inner;null!=j._validate&&j._validate();j=g.zpp_inner.y==f}else j=!1;j||(g.zpp_inner.x=e,g.zpp_inner.y=f,e=g.zpp_inner,null!=e._invalidate&&e._invalidate(e))}g.zpp_inner.weak=!0;d.applyImpulse(g);
d.applyAngularImpulse(M.randomFloat(-500,500),!1)}}this._updatePhysics(a);break;case 3:this._tween.update(a),this._elementManager.update(a)}},_evaluateShake:function(){var a=this._inputSeq.length>=this._shakeInputTargetCount;if(!a)return this._inputSeq=[],!1;for(var b=this._inputSeq[0],c=1,d=this._shakeInputTargetCount;c<d;){var e=c++;if(!b==this._inputSeq[e])b=!b;else{a=!1;break}}this._inputSeq=[];return a},_updatePhysics:function(a){for(this._accumulator+=a;this._accumulator>=Fh._timeStep;)this._physLayers[this._currentZLayer].step(Fh._timeStep),
this._accumulator-=Fh._timeStep},_addEventListeners:function(){U.prototype._addEventListeners.call(this);P.releaseCrane.add(v(this,this._checkRelease))},_removeEventListeners:function(){U.prototype._removeEventListeners.call(this);P.releaseCrane.remove(v(this,this._checkRelease))},_checkRelease:function(){var a=this,b=[];this._flagCraneDropping=!1;ha.start(function(){for(var c=a._physLayers[a._currentZLayer].bodiesInAABB(new Qn(100,-240,240,300),!1,!0,null),d=0,e=a._prizes;d<e.length;){var f=e[d];
++d;c.zpp_inner.valmod();for(var g=pf.get(c);;){g.zpp_inner.zpp_inner.valmod();var j=g.zpp_inner;j.zpp_inner.valmod();j.zpp_inner.zip_length&&(j.zpp_inner.zip_length=!1,j.zpp_inner.user_length=j.zpp_inner.inner.length);j=j.zpp_inner.user_length;g.zpp_critical=!0;g.zpp_i<j?j=!0:(g.zpp_next=pf.zpp_pool,pf.zpp_pool=g,g.zpp_inner=null,j=!1);if(!j)break;g.zpp_critical=!1;j=g.zpp_inner.at(g.zpp_i++);f.getBody()==j&&(f.drop(),f.set_z(-1),a._crane.flagGameOver=!0,a._elementManager.updateZSort("layer_world"),
m.setString("STRING_FORCE_PRIZE",m.getString("STRING_FORCE_PRIZE")+" "+f.getId()),b.push(f),a._tween.tween({target:f,duration:0.7,ease:G.inQuad},{y:300}).onComplete(function(){m.modifyInt("INT_SCORE",1E3)}))}}},0.4);this._tween.tween({target:this,duration:1.2,ease:G.inQuad},{}).onComplete(function(){if(a._state!=T.GAME_OVER)if(1>=b.length)0<b.length?(a._anne.setAsset("anne_yay"),a._holeSpines[a._currentZLayer].animate("drop_in_2",1).eventAnimationComplete.add(v(a,a._onEndComplete))):a._setState(T.GAME_OVER);
else{a._holeSpines[a._currentZLayer].animate("drop_in_2",1);var c=a._elementManager,d=a._holeSpines[a._currentZLayer].get_x(),e=a._holeSpines[a._currentZLayer].get_y()-100;c.addElement(a._requestFloatingText("hoof_machine.streak",d,e,[b.length]));s.playSound("arcade_claim_prize",1);a._crane.setReady()}})},_onEndComplete:function(){this._holeSpines[this._currentZLayer].eventAnimationComplete.remove(v(this,this._onEndComplete));this._setState(T.GAME_OVER)},_onInput:function(a,b){if(!m.getBool("BOOL_PAUSED")&&
!(this._state!=T.GAMEPLAY||this._flagCraneDropping))if(this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos),b){if(a==$.MOVE_LEFT)this._crane.move(-200),this._whirrAudioPlaying||(s.playSound("claw_machine_whirring_loop",1,null,!0),this._whirrAudioPlaying=!0),this._inputSeq.length<this._shakeInputTargetCount&&(this._shakeTime=this._shakeStepTimer),this._inputSeq.push(!1);else if(a==$.MOVE_RIGHT)this._crane.move(200),this._whirrAudioPlaying||
(s.playSound("claw_machine_whirring_loop",1,null,!0),this._whirrAudioPlaying=!0),this._inputSeq.length<this._shakeInputTargetCount&&(this._shakeTime=this._shakeStepTimer),this._inputSeq.push(!0);else if(a==$.MOVE_UP){var c=this._currentZLayer-1;-1<c&&3>c&&!this._flagSwitchingLayers&&this._setLiveLayer(c);s.playSound("claw_machine_clamp_down");this._inputSeq.push(!0)}else a==$.MOVE_DOWN&&(c=this._currentZLayer+1,-1<c&&3>c&&!this._flagSwitchingLayers&&this._setLiveLayer(c),s.playSound("claw_machine_clamp_down"),
this._inputSeq.push(!1));a==$.JUMP&&(this._crane.drop(),this._flagCraneDropping=!0,this._whirrAudioPlaying&&(s.stopSound("claw_machine_whirring_loop"),this._whirrAudioPlaying=!1))}else a==$.MOVE_LEFT?(this._whirrAudioPlaying&&(s.stopSound("claw_machine_whirring_loop"),this._whirrAudioPlaying=!1),this._crane.move(200)):a==$.MOVE_RIGHT&&(this._whirrAudioPlaying&&(s.stopSound("claw_machine_whirring_loop"),this._whirrAudioPlaying=!1),this._crane.move(-200))},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",
1);this._cacheManager.addCache(this._TEXT_CACHE,Ri,3)},_setLiveLayer:function(a,b){null==b&&(b=!0);var c=this,d=G.inOutBack,e=G.linear;this._tweenHelperScale={valA:0,valB:0};this._tweenHelperAlpha={valA:0,valB:0};this._flagSwitchingLayers=b;this._layerSwapFlags=[this._currentZLayer,a];var f=0==this._currentZLayer||1==this._currentZLayer&&2==a?1:-1;this._displayZLayer[this._currentZLayer].set_scale(1);this._displayZLayer[a].set_scale(0<f?0.7:1.3);this._tweenHelperAlpha={valA:1,valB:0};this._tweenHelperScale=
{valA:1,valB:0<f?0.7:1.3};b?(this._tween.tween({target:this._tweenHelperScale,duration:0.5,ease:d,overwrite:!0},{valA:1+0.3*f,valB:1}),this._tween.tween({target:this._tweenHelperAlpha,duration:0.5,ease:e,overwrite:!0},{valA:0,valB:1}).onComplete(function(){c._flagSwitchingLayers=!1})):(this._displayZLayer[this._currentZLayer].set_scale(1+0.3*f),this._displayZLayer[this._currentZLayer].alpha=1,this._displayZLayer[a].set_scale(1),this._displayZLayer[a].alpha=1);if(b)this._tween.tween({target:this._crane,
duration:0.25,ease:G.inOutBounce,overwrite:!0},{scale:this._currentZLayer>a?0.8:1.2}).onComplete(function(){c._tween.tween({target:c._crane,duration:0.25,ease:G.inOutBounce,overwrite:!0},{scale:1})});this._currentZLayer=a;this._crane.setSpace(this._physLayers[this._currentZLayer])},_initWorld:function(){U.prototype._initWorld.call(this);this._flagGameComplete=!1;this._timer=1E3;this._prizes=[];this._inputSeq=[];this._defaultCamPos=Aa.request(this._elementManager.camera.pos.x,this._elementManager.camera.pos.y);
var a;null==o.poolVec2?a=new ja:(a=o.poolVec2,o.poolVec2=a.zpp_pool,a.zpp_pool=null,a.zpp_disp=!1,a==o.nextVec2&&(o.nextVec2=null));if(null==a.zpp_inner){var b;null==q.zpp_pool?b=new q:(b=q.zpp_pool,q.zpp_pool=b.next,b.next=null);b.weak=!1;b._immutable=!1;b.x=0;b.y=600;a.zpp_inner=b;a.zpp_inner.outer=a}else{if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=a.zpp_inner;if(b._immutable)throw new h("Error: Vec2 is immutable");null!=b._isimmutable&&b._isimmutable();
if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=a.zpp_inner;null!=b._validate&&b._validate();if(0==a.zpp_inner.x){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=a.zpp_inner;null!=b._validate&&b._validate();b=600==a.zpp_inner.y}else b=!1;b||(a.zpp_inner.x=0,a.zpp_inner.y=600,b=a.zpp_inner,null!=b._invalidate&&b._invalidate(b))}a.zpp_inner.weak=!0;a=new sj(a);null==o.poolVec2?b=new ja:(b=o.poolVec2,o.poolVec2=b.zpp_pool,
b.zpp_pool=null,b.zpp_disp=!1,b==o.nextVec2&&(o.nextVec2=null));if(null==b.zpp_inner){var c;null==q.zpp_pool?c=new q:(c=q.zpp_pool,q.zpp_pool=c.next,c.next=null);c.weak=!1;c._immutable=!1;c.x=0;c.y=600;b.zpp_inner=c;b.zpp_inner.outer=b}else{if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=b.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
c=b.zpp_inner;null!=c._validate&&c._validate();if(0==b.zpp_inner.x){if(null!=b&&b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=b.zpp_inner;null!=c._validate&&c._validate();c=600==b.zpp_inner.y}else c=!1;c||(b.zpp_inner.x=0,b.zpp_inner.y=600,c=b.zpp_inner,null!=c._invalidate&&c._invalidate(c))}b.zpp_inner.weak=!0;b=new sj(b);null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner){var d;
null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=!1;d.x=0;d.y=600;c.zpp_inner=d;c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(0==c.zpp_inner.x){if(null!=
c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=600==c.zpp_inner.y}else d=!1;d||(c.zpp_inner.x=0,c.zpp_inner.y=600,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;this._physLayers=[a,b,new sj(c)];a=0;for(b=this._physLayers.length;a<b;){d=a++;null==l.BodyType_STATIC&&(l.internal=!0,l.BodyType_STATIC=new qd,l.internal=!1);c=new tf(l.BodyType_STATIC);var e=c.zpp_inner.wrap_shapes,f=new Rb(Rb.rect(-340,
190,680,10));e.zpp_inner.reverse_flag?e.push(f):e.unshift(f);e=c.zpp_inner.wrap_shapes;f=new Rb(Rb.rect(-350,0,10,400));e.zpp_inner.reverse_flag?e.push(f):e.unshift(f);e=c.zpp_inner.wrap_shapes;f=new Rb(Rb.rect(340,0,10,400));e.zpp_inner.reverse_flag?e.push(f):e.unshift(f);e=c.zpp_inner.wrap_shapes;f=new Rb(Rb.rect(130,45,200,175));e.zpp_inner.reverse_flag?e.push(f):e.unshift(f);d=this._physLayers[d];if(null!=c.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");
c.zpp_inner.immutable_midstep("Body::space");if(c.zpp_inner.world)throw new h("Error: Space::world is immutable");if((null==c.zpp_inner.space?null:c.zpp_inner.space.outer)!=d){if(null!=(null==c.zpp_inner.space?null:c.zpp_inner.space.outer))c.zpp_inner.component.woken=!1;if(null!=(null==c.zpp_inner.space?null:c.zpp_inner.space.outer))(null==c.zpp_inner.space?null:c.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(c);null!=d&&(d=d.zpp_inner.wrap_bodies,d.zpp_inner.reverse_flag?d.push(c):d.unshift(c))}}this._accumulator=
0;this._elementManager.addElement(new n({asset:"nick_arcade_background_zoomed-in_blurred"}),"layer_bg");this._anne=this._elementManager.addElement(new n({asset:"anne_idle",x:-150}),"layer_bg");this._elementManager.addElement(new n({asset:"back_glass"}),"layer_bg");this._elementManager.addElement(new n({asset:"leaf_pile_layer_1",scale:1,y:75}));this._displayZLayer=[];this._holeSpines=[];a=0;for(b=this._physLayers.length;a<b;)d=a++,c=this._elementManager.addElement(new n({alpha:0})),c.addChild(new n({asset:"leaf_pile_layer_2",
y:140,scaleX:0!=d%2?-1:1})),c.addChild(new n({asset:"dropbox_glass_barrier",x:240,y:120})),d=c.addChild(new E({library:"spine/drop_box",x:250,y:200,scale:0.45})),d.animate("idle"),this._holeSpines.push(d),this._displayZLayer.push(c);this._crane=this._elementManager.addElement(new zm(this._physLayers[1],this._tween,{y:-250}));if("HOOF_MACHINE_SINGLE_ITEM"==m.getString("STRING_BOOSTER")){a="";switch(M.randomInt(0,16)){case 0:a="collections/stickers/hoof_machine/sticker_hoof_machine_0";break;case 1:a=
"collections/stickers/hoof_machine/sticker_hoof_machine_1";break;case 2:a="collections/stickers/hoof_machine/sticker_hoof_machine_2";break;case 3:a="collections/stickers/hoof_machine/sticker_hoof_machine_3";break;case 4:a="collections/stickers/hoof_machine/sticker_hoof_machine_4";break;case 5:a="collections/stickers/hoof_machine/sticker_hoof_machine_5";break;case 6:a="collections/stickers/hoof_machine/sticker_hoof_machine_6";break;case 7:a="collections/stickers/hoof_machine/sticker_hoof_machine_7";
break;case 8:a="collections/stickers/hoof_machine/sticker_hoof_machine_8";break;case 9:a="collections/stickers/hoof_machine/sticker_hoof_machine_9";break;case 10:a="collections/stickers/hoof_machine/sticker_hoof_machine_10";break;case 11:a="collections/stickers/hoof_machine/sticker_hoof_machine_11";break;case 12:a="collections/stickers/hoof_machine/sticker_hoof_machine_12";break;case 13:a="collections/stickers/hoof_machine/sticker_hoof_machine_13";break;case 14:a="collections/stickers/hoof_machine/sticker_hoof_machine_14";
break;case 15:a="collections/stickers/hoof_machine/sticker_hoof_machine_15";break;case 16:a="collections/stickers/hoof_machine/sticker_hoof_machine_16"}this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],{x:-200,y:-25,asset:a})));this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],{x:-100,y:-25,asset:a})));this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],{x:0,y:-25,asset:a})));this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],
{x:-150,y:-25,asset:a})));this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],{x:-50,y:-25,asset:a})));this._prizes.push(this._displayZLayer[1].addChild(new Qb(this._physLayers[1],{x:-200,y:-25,asset:a})));this._prizes.push(this._displayZLayer[1].addChild(new Qb(this._physLayers[1],{x:-100,y:-25,asset:a})));this._prizes.push(this._displayZLayer[1].addChild(new Qb(this._physLayers[1],{x:0,y:-25,asset:a})));this._prizes.push(this._displayZLayer[1].addChild(new Qb(this._physLayers[1],
{x:-150,y:-25,asset:a})));this._prizes.push(this._displayZLayer[1].addChild(new Qb(this._physLayers[1],{x:-50,y:-25,asset:a})));this._prizes.push(this._displayZLayer[2].addChild(new Qb(this._physLayers[2],{x:-200,y:-25,asset:a})));this._prizes.push(this._displayZLayer[2].addChild(new Qb(this._physLayers[2],{x:-100,y:-25,asset:a})));this._prizes.push(this._displayZLayer[2].addChild(new Qb(this._physLayers[2],{x:0,y:-25,asset:a})));this._prizes.push(this._displayZLayer[2].addChild(new Qb(this._physLayers[2],
{x:-150,y:-25,asset:a})));this._prizes.push(this._displayZLayer[2].addChild(new Qb(this._physLayers[2],{x:-50,y:-25,asset:a})))}else this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],{x:-321,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_8"}))),this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],{x:-200,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_3"}))),this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],
{x:-100,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_4"}))),this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],{x:51,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_6"}))),this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],{x:-295,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_7"}))),this._prizes.push(this._displayZLayer[0].addChild(new Qb(this._physLayers[0],{x:-24,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_15"}))),
this._prizes.push(this._displayZLayer[1].addChild(new Qb(this._physLayers[1],{x:-200,y:-25,asset:0.3<Math.random()?"collections/stickers/hoof_machine/sticker_hoof_machine_1":"collections/stickers/hoof_machine/sticker_hoof_machine_2"}))),this._prizes.push(this._displayZLayer[1].addChild(new Qb(this._physLayers[1],{x:-100,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_0"}))),this._prizes.push(this._displayZLayer[1].addChild(new Qb(this._physLayers[1],{x:0,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_9"}))),
this._prizes.push(this._displayZLayer[1].addChild(new Qb(this._physLayers[1],{x:-150,y:-75,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_11"}))),this._prizes.push(this._displayZLayer[1].addChild(new Qb(this._physLayers[1],{x:-50,y:-75,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_13"}))),this._prizes.push(this._displayZLayer[2].addChild(new Qb(this._physLayers[2],{x:-200,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_10"}))),this._prizes.push(this._displayZLayer[2].addChild(new Qb(this._physLayers[2],
{x:-100,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_12"}))),this._prizes.push(this._displayZLayer[2].addChild(new Qb(this._physLayers[2],{x:0,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_14"}))),this._prizes.push(this._displayZLayer[2].addChild(new Qb(this._physLayers[2],{x:-150,y:-25,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_16"}))),this._prizes.push(this._displayZLayer[2].addChild(new Qb(this._physLayers[2],{x:-50,y:-75,asset:"collections/stickers/hoof_machine/sticker_hoof_machine_5"})));
this._displayZLayer[0].alpha=0;this._displayZLayer[2].alpha=0;this._currentZLayer=1;this._setLiveLayer(1,!1);this._overlaySpine=this._elementManager.addElement(new E({library:"spine/frame_overlay_corn_lights",y:300,scale:0.5}),"layer_fg");this._overlaySpine.animate("corn_light_seq_4");m.setString("STRING_FORCE_PRIZE","");this._physLayers[this._currentZLayer].step(Fh._timeStep)},__class__:Fh});var Kc=i["world.minigame_hoofmachine.elements.CRANE_STATE"]={__ename__:["world","minigame_hoofmachine","elements",
"CRANE_STATE"],__constructs__:["READY","DROPPING","GRAB","RELEASE"]};Kc.READY=["READY",0];Kc.READY.toString=r;Kc.READY.__enum__=Kc;Kc.DROPPING=["DROPPING",1];Kc.DROPPING.toString=r;Kc.DROPPING.__enum__=Kc;Kc.GRAB=["GRAB",2];Kc.GRAB.toString=r;Kc.GRAB.__enum__=Kc;Kc.RELEASE=["RELEASE",3];Kc.RELEASE.toString=r;Kc.RELEASE.__enum__=Kc;var zm=function(a,b,c){n.call(this,c);this._space=a;this.flagGameOver=this._flagGrabbing=!1;this._tween=b;null==l.BodyType_KINEMATIC&&(l.internal=!0,l.BodyType_KINEMATIC=
new qd,l.internal=!1);this._bodyKine=new tf(l.BodyType_KINEMATIC);var d=this._bodyKine.zpp_inner.wrap_shapes,e=new Rb(Rb.box(100,100));d.zpp_inner.reverse_flag?d.push(e):d.unshift(e);this.addChild(new Ed({color:8421504,sizeX:100,sizeY:100}));var f=this._bodyKine;null==f.zpp_inner.wrap_pos&&f.zpp_inner.setupPosition();var g=f.zpp_inner.wrap_pos,j=this.get_x(),p=this.get_y();if(g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var i=g.zpp_inner;if(i._immutable)throw new h("Error: Vec2 is immutable");
null!=i._isimmutable&&i._isimmutable();if(j!=j||p!=p)throw new h("Error: Vec2 components cannot be NaN");var k;if(g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var m=g.zpp_inner;null!=m._validate&&m._validate();if(g.zpp_inner.x==j){if(g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var r=g.zpp_inner;null!=r._validate&&r._validate();k=g.zpp_inner.y==p}else k=!1;if(!k){g.zpp_inner.x=j;g.zpp_inner.y=p;var s=g.zpp_inner;null!=s._invalidate&&s._invalidate(s)}var u=
this._bodyKine,t=this._space;if(null!=u.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");u.zpp_inner.immutable_midstep("Body::space");if(u.zpp_inner.world)throw new h("Error: Space::world is immutable");if((null==u.zpp_inner.space?null:u.zpp_inner.space.outer)!=t){if(null!=(null==u.zpp_inner.space?null:u.zpp_inner.space.outer))u.zpp_inner.component.woken=!1;if(null!=(null==u.zpp_inner.space?null:u.zpp_inner.space.outer))(null==
u.zpp_inner.space?null:u.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(u);if(null!=t){var v=t.zpp_inner.wrap_bodies;v.zpp_inner.reverse_flag?v.push(u):v.unshift(u)}}for(var z=[31,0,44,9,35,25,27,43,24,56,22,67,20,79,20,92,21,102,25,112,30,117,34,109,48,97,65,91,70,94,75,98,84,119,85,130,85,144,82,156,75,164,69,164,66,166,53,163,38,153,32,145,18,139,7,123,0,101,2,77,6,51,22,15,28,6],w=[42,7,54,0,67,19,76,39,84,70,85,97,85,109,78,127,69,136,58,142,54,142,47,154,33,163,23,165,18,165,12,163,9,163,
3,154,2,141,2,126,3,118,14,94,21,90,39,97,49,106,55,116,58,114,65,102,66,76,61,51,52,26],y=[],G=0;G<z.length;){var H=z[G],E=z[G+1];if(H!=H||E!=E)throw new h("Error: Vec2 components cannot be NaN");var F;null==o.poolVec2?F=new ja:(F=o.poolVec2,o.poolVec2=F.zpp_pool,F.zpp_pool=null,F.zpp_disp=!1,F==o.nextVec2&&(o.nextVec2=null));if(null==F.zpp_inner){var J;null==q.zpp_pool?J=new q:(J=q.zpp_pool,q.zpp_pool=J.next,J.next=null);J.weak=!1;J._immutable=!1;J.x=H;J.y=E;F.zpp_inner=J;F.zpp_inner.outer=F}else{if(null!=
F&&F.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var O=F.zpp_inner;if(O._immutable)throw new h("Error: Vec2 is immutable");null!=O._isimmutable&&O._isimmutable();if(H!=H||E!=E)throw new h("Error: Vec2 components cannot be NaN");var P;if(null!=F&&F.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var K=F.zpp_inner;null!=K._validate&&K._validate();if(F.zpp_inner.x==H){if(null!=F&&F.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var M=F.zpp_inner;null!=M._validate&&M._validate();P=F.zpp_inner.y==E}else P=!1;if(!P){F.zpp_inner.x=H;F.zpp_inner.y=E;var L=F.zpp_inner;null!=L._invalidate&&L._invalidate(L)}}F.zpp_inner.weak=!0;y.push(F);G+=2}var S=sf.get(y),V=S.convexDecomposition();null==l.BodyType_DYNAMIC&&(l.internal=!0,l.BodyType_DYNAMIC=new qd,l.internal=!1);this._bodyLeft=new tf(l.BodyType_DYNAMIC);V.zpp_inner.valmod();for(var rc=pd.get(V);;){rc.zpp_inner.zpp_inner.valmod();var ka=rc.zpp_inner;ka.zpp_inner.valmod();ka.zpp_inner.zip_length&&
(ka.zpp_inner.zip_length=!1,ka.zpp_inner.user_length=ka.zpp_inner.inner.length);var fa=ka.zpp_inner.user_length;rc.zpp_critical=!0;var Y;rc.zpp_i<fa?Y=!0:(rc.zpp_next=pd.zpp_pool,pd.zpp_pool=rc,rc.zpp_inner=null,Y=!1);if(!Y)break;rc.zpp_critical=!1;var Ab=rc.zpp_inner.at(rc.zpp_i++),yh=new Rb(Ab),kc=yh.zpp_inner.material.wrapper();10!=kc.zpp_inner.dynamicFriction&&(kc.zpp_inner.dynamicFriction=10,kc.zpp_inner.invalidate(Qa.WAKE|Qa.ANGDRAG|Qa.ARBITERS));var qf=yh.zpp_inner.material.wrapper();10!=qf.zpp_inner.staticFriction&&
(qf.zpp_inner.staticFriction=10,qf.zpp_inner.invalidate(Qa.WAKE|Qa.ARBITERS));var va=this._bodyLeft.zpp_inner.wrap_shapes;va.zpp_inner.reverse_flag?va.push(yh):va.unshift(yh);Ab.dispose()}S.dispose();for(var V=S=null,U=[],G=0;G<w.length;){var Z=w[G],gh=w[G+1];if(Z!=Z||gh!=gh)throw new h("Error: Vec2 components cannot be NaN");var Mc;null==o.poolVec2?Mc=new ja:(Mc=o.poolVec2,o.poolVec2=Mc.zpp_pool,Mc.zpp_pool=null,Mc.zpp_disp=!1,Mc==o.nextVec2&&(o.nextVec2=null));if(null==Mc.zpp_inner){var sh;null==
q.zpp_pool?sh=new q:(sh=q.zpp_pool,q.zpp_pool=sh.next,sh.next=null);sh.weak=!1;sh._immutable=!1;sh.x=Z;sh.y=gh;Mc.zpp_inner=sh;Mc.zpp_inner.outer=Mc}else{if(null!=Mc&&Mc.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ca=Mc.zpp_inner;if(ca._immutable)throw new h("Error: Vec2 is immutable");null!=ca._isimmutable&&ca._isimmutable();if(Z!=Z||gh!=gh)throw new h("Error: Vec2 components cannot be NaN");var mi;if(null!=Mc&&Mc.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var ye=Mc.zpp_inner;null!=ye._validate&&ye._validate();if(Mc.zpp_inner.x==Z){if(null!=Mc&&Mc.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Sf=Mc.zpp_inner;null!=Sf._validate&&Sf._validate();mi=Mc.zpp_inner.y==gh}else mi=!1;if(!mi){Mc.zpp_inner.x=Z;Mc.zpp_inner.y=gh;var Vc=Mc.zpp_inner;null!=Vc._invalidate&&Vc._invalidate(Vc)}}Mc.zpp_inner.weak=!0;U.push(Mc);G+=2}S=sf.get(U);V=S.convexDecomposition();null==l.BodyType_DYNAMIC&&(l.internal=!0,l.BodyType_DYNAMIC=new qd,
l.internal=!1);this._bodyRight=new tf(l.BodyType_DYNAMIC);V.zpp_inner.valmod();for(var oa=pd.get(V);;){oa.zpp_inner.zpp_inner.valmod();var Yb=oa.zpp_inner;Yb.zpp_inner.valmod();Yb.zpp_inner.zip_length&&(Yb.zpp_inner.zip_length=!1,Yb.zpp_inner.user_length=Yb.zpp_inner.inner.length);var tb=Yb.zpp_inner.user_length;oa.zpp_critical=!0;var ng;oa.zpp_i<tb?ng=!0:(oa.zpp_next=pd.zpp_pool,pd.zpp_pool=oa,oa.zpp_inner=null,ng=!1);if(!ng)break;oa.zpp_critical=!1;var Ug=oa.zpp_inner.at(oa.zpp_i++),Da=new Rb(Ug),
$=Da.zpp_inner.material.wrapper();10!=$.zpp_inner.dynamicFriction&&($.zpp_inner.dynamicFriction=10,$.zpp_inner.invalidate(Qa.WAKE|Qa.ANGDRAG|Qa.ARBITERS));var Le=Da.zpp_inner.material.wrapper();10!=Le.zpp_inner.staticFriction&&(Le.zpp_inner.staticFriction=10,Le.zpp_inner.invalidate(Qa.WAKE|Qa.ARBITERS));var lc=this._bodyRight.zpp_inner.wrap_shapes;lc.zpp_inner.reverse_flag?lc.push(Da):lc.unshift(Da);Ug.dispose()}S.dispose();var V=S=null,Md=this._bodyLeft;null==Md.zpp_inner.wrap_pos&&Md.zpp_inner.setupPosition();
var I=Md.zpp_inner.wrap_pos,Sa=this.get_x()-50-37,ef=this.get_y()+60;if(I.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ha=I.zpp_inner;if(ha._immutable)throw new h("Error: Vec2 is immutable");null!=ha._isimmutable&&ha._isimmutable();if(Sa!=Sa||ef!=ef)throw new h("Error: Vec2 components cannot be NaN");var X;if(I.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var wa=I.zpp_inner;null!=wa._validate&&wa._validate();if(I.zpp_inner.x==Sa){if(I.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var ra=I.zpp_inner;null!=ra._validate&&ra._validate();X=I.zpp_inner.y==ef}else X=!1;if(!X){I.zpp_inner.x=Sa;I.zpp_inner.y=ef;var Ja=I.zpp_inner;null!=Ja._invalidate&&Ja._invalidate(Ja)}var Ea=this._bodyRight;null==Ea.zpp_inner.wrap_pos&&Ea.zpp_inner.setupPosition();var A=Ea.zpp_inner.wrap_pos,xa=this.get_x()+50-37,Ma=this.get_y()+60;if(A.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var $a=A.zpp_inner;if($a._immutable)throw new h("Error: Vec2 is immutable");null!=$a._isimmutable&&
$a._isimmutable();if(xa!=xa||Ma!=Ma)throw new h("Error: Vec2 components cannot be NaN");var za;if(A.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Db=A.zpp_inner;null!=Db._validate&&Db._validate();if(A.zpp_inner.x==xa){if(A.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ya=A.zpp_inner;null!=ya._validate&&ya._validate();za=A.zpp_inner.y==Ma}else za=!1;if(!za){A.zpp_inner.x=xa;A.zpp_inner.y=Ma;var Ua=A.zpp_inner;null!=Ua._invalidate&&Ua._invalidate(Ua)}var Ba=
this._bodyLeft,zf=this._bodyRight,zj=this._space;if(null!=zf.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");zf.zpp_inner.immutable_midstep("Body::space");if(zf.zpp_inner.world)throw new h("Error: Space::world is immutable");if((null==zf.zpp_inner.space?null:zf.zpp_inner.space.outer)!=zj){if(null!=(null==zf.zpp_inner.space?null:zf.zpp_inner.space.outer))zf.zpp_inner.component.woken=!1;if(null!=(null==zf.zpp_inner.space?
null:zf.zpp_inner.space.outer))(null==zf.zpp_inner.space?null:zf.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(zf);if(null!=zj){var la=zj.zpp_inner.wrap_bodies;la.zpp_inner.reverse_flag?la.push(zf):la.unshift(zf)}}var ia=null==zf.zpp_inner.space?null:zf.zpp_inner.space.outer;if(null!=Ba.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");Ba.zpp_inner.immutable_midstep("Body::space");if(Ba.zpp_inner.world)throw new h("Error: Space::world is immutable");
if((null==Ba.zpp_inner.space?null:Ba.zpp_inner.space.outer)!=ia){if(null!=(null==Ba.zpp_inner.space?null:Ba.zpp_inner.space.outer))Ba.zpp_inner.component.woken=!1;if(null!=(null==Ba.zpp_inner.space?null:Ba.zpp_inner.space.outer))(null==Ba.zpp_inner.space?null:Ba.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(Ba);if(null!=ia){var Pc=ia.zpp_inner.wrap_bodies;Pc.zpp_inner.reverse_flag?Pc.push(Ba):Pc.unshift(Ba)}}var ac=this._bodyLeft,wk=this._bodyKine,kb;null==o.poolVec2?kb=new ja:(kb=o.poolVec2,
o.poolVec2=kb.zpp_pool,kb.zpp_pool=null,kb.zpp_disp=!1,kb==o.nextVec2&&(o.nextVec2=null));if(null==kb.zpp_inner){var C;null==q.zpp_pool?C=new q:(C=q.zpp_pool,q.zpp_pool=C.next,C.next=null);C.weak=!1;C._immutable=!1;C.x=50;C.y=-5;kb.zpp_inner=C;kb.zpp_inner.outer=kb}else{if(null!=kb&&kb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Kg=kb.zpp_inner;if(Kg._immutable)throw new h("Error: Vec2 is immutable");null!=Kg._isimmutable&&Kg._isimmutable();var ob;if(null!=kb&&kb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var ta=kb.zpp_inner;null!=ta._validate&&ta._validate();if(50==kb.zpp_inner.x){if(null!=kb&&kb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var pb=kb.zpp_inner;null!=pb._validate&&pb._validate();ob=-5==kb.zpp_inner.y}else ob=!1;if(!ob){kb.zpp_inner.x=50;kb.zpp_inner.y=-5;var qh=kb.zpp_inner;null!=qh._invalidate&&qh._invalidate(qh)}}kb.zpp_inner.weak=!0;var Q;null==o.poolVec2?Q=new ja:(Q=o.poolVec2,o.poolVec2=Q.zpp_pool,Q.zpp_pool=null,Q.zpp_disp=!1,Q==o.nextVec2&&(o.nextVec2=
null));if(null==Q.zpp_inner){var aa;null==q.zpp_pool?aa=new q:(aa=q.zpp_pool,q.zpp_pool=aa.next,aa.next=null);aa.weak=!1;aa._immutable=!1;aa.x=-40;aa.y=50;Q.zpp_inner=aa;Q.zpp_inner.outer=Q}else{if(null!=Q&&Q.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Na=Q.zpp_inner;if(Na._immutable)throw new h("Error: Vec2 is immutable");null!=Na._isimmutable&&Na._isimmutable();var ba;if(null!=Q&&Q.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Vf=
Q.zpp_inner;null!=Vf._validate&&Vf._validate();if(-40==Q.zpp_inner.x){if(null!=Q&&Q.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ga=Q.zpp_inner;null!=ga._validate&&ga._validate();ba=50==Q.zpp_inner.y}else ba=!1;if(!ba){Q.zpp_inner.x=-40;Q.zpp_inner.y=50;var Hb=Q.zpp_inner;null!=Hb._invalidate&&Hb._invalidate(Hb)}}Q.zpp_inner.weak=!0;this._pivotLeft=new nk(ac,wk,kb,Q);var bb=this._bodyRight,ib=this._bodyKine,Oa;null==o.poolVec2?Oa=new ja:(Oa=o.poolVec2,o.poolVec2=Oa.zpp_pool,
Oa.zpp_pool=null,Oa.zpp_disp=!1,Oa==o.nextVec2&&(o.nextVec2=null));if(null==Oa.zpp_inner){var Va;null==q.zpp_pool?Va=new q:(Va=q.zpp_pool,q.zpp_pool=Va.next,Va.next=null);Va.weak=!1;Va._immutable=!1;Va.x=24;Va.y=-10;Oa.zpp_inner=Va;Oa.zpp_inner.outer=Oa}else{if(null!=Oa&&Oa.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var D=Oa.zpp_inner;if(D._immutable)throw new h("Error: Vec2 is immutable");null!=D._isimmutable&&D._isimmutable();var lb;if(null!=Oa&&Oa.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var Ta=Oa.zpp_inner;null!=Ta._validate&&Ta._validate();if(24==Oa.zpp_inner.x){if(null!=Oa&&Oa.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var jb=Oa.zpp_inner;null!=jb._validate&&jb._validate();lb=-10==Oa.zpp_inner.y}else lb=!1;if(!lb){Oa.zpp_inner.x=24;Oa.zpp_inner.y=-10;var gb=Oa.zpp_inner;null!=gb._invalidate&&gb._invalidate(gb)}}Oa.zpp_inner.weak=!0;var Ga;null==o.poolVec2?Ga=new ja:(Ga=o.poolVec2,o.poolVec2=Ga.zpp_pool,Ga.zpp_pool=null,Ga.zpp_disp=!1,Ga==o.nextVec2&&
(o.nextVec2=null));if(null==Ga.zpp_inner){var Eb;null==q.zpp_pool?Eb=new q:(Eb=q.zpp_pool,q.zpp_pool=Eb.next,Eb.next=null);Eb.weak=!1;Eb._immutable=!1;Eb.x=40;Eb.y=50;Ga.zpp_inner=Eb;Ga.zpp_inner.outer=Ga}else{if(null!=Ga&&Ga.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var cb=Ga.zpp_inner;if(cb._immutable)throw new h("Error: Vec2 is immutable");null!=cb._isimmutable&&cb._isimmutable();var zb;if(null!=Ga&&Ga.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var Nc=Ga.zpp_inner;null!=Nc._validate&&Nc._validate();if(40==Ga.zpp_inner.x){if(null!=Ga&&Ga.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var rd=Ga.zpp_inner;null!=rd._validate&&rd._validate();zb=50==Ga.zpp_inner.y}else zb=!1;if(!zb){Ga.zpp_inner.x=40;Ga.zpp_inner.y=50;var ea=Ga.zpp_inner;null!=ea._invalidate&&ea._invalidate(ea)}}Ga.zpp_inner.weak=!0;this._pivotRight=new nk(bb,ib,Oa,Ga);var Ib=this._pivotLeft;!1!=Ib.zpp_inner.stiff&&(Ib.zpp_inner.stiff=!1,Ib.zpp_inner.wake());
var ub=this._pivotRight;!1!=ub.zpp_inner.stiff&&(ub.zpp_inner.stiff=!1,ub.zpp_inner.wake());var wb=this._pivotLeft,mb=this._pivotRight;20!=mb.zpp_inner.frequency&&(mb.zpp_inner.frequency=20,mb.zpp_inner.stiff||mb.zpp_inner.wake());var pa=mb.zpp_inner.frequency;if(pa!=pa)throw new h("Error: Constraint::Frequency cannot be NaN");if(0>=pa)throw new h("Error: Constraint::Frequency must be >0");wb.zpp_inner.frequency!=pa&&(wb.zpp_inner.frequency=pa,wb.zpp_inner.stiff||wb.zpp_inner.wake());var B=this._pivotLeft,
Bb=this._pivotRight;1!=Bb.zpp_inner.damping&&(Bb.zpp_inner.damping=1,Bb.zpp_inner.stiff||Bb.zpp_inner.wake());var db=Bb.zpp_inner.damping;if(db!=db)throw new h("Error: Constraint::Damping cannot be Nan");if(0>db)throw new h("Error: Constraint::Damping must be >=0");B.zpp_inner.damping!=db&&(B.zpp_inner.damping=db,B.zpp_inner.stiff||B.zpp_inner.wake());var ab=this._pivotLeft,x=this._pivotRight,Nb=this._space;if(null!=x.zpp_inner.compound)throw new h("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");
if((null==x.zpp_inner.space?null:x.zpp_inner.space.outer)!=Nb)if(null!=x.zpp_inner.component&&(x.zpp_inner.component.woken=!1),x.zpp_inner.clearcache(),null!=x.zpp_inner.space&&x.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(x),null!=Nb){var Jb=Nb.zpp_inner.wrap_constraints;Jb.zpp_inner.reverse_flag?Jb.push(x):Jb.unshift(x)}else x.zpp_inner.space=null;var qb=null==x.zpp_inner.space?null:x.zpp_inner.space.outer;if(null!=ab.zpp_inner.compound)throw new h("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");
if((null==ab.zpp_inner.space?null:ab.zpp_inner.space.outer)!=qb)if(null!=ab.zpp_inner.component&&(ab.zpp_inner.component.woken=!1),ab.zpp_inner.clearcache(),null!=ab.zpp_inner.space&&ab.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(ab),null!=qb){var W=qb.zpp_inner.wrap_constraints;W.zpp_inner.reverse_flag?W.push(ab):W.unshift(ab)}else ab.zpp_inner.space=null;var na=this._bodyLeft,qa=this._bodyKine,vb;null==o.poolVec2?vb=new ja:(vb=o.poolVec2,o.poolVec2=vb.zpp_pool,vb.zpp_pool=null,vb.zpp_disp=
!1,vb==o.nextVec2&&(o.nextVec2=null));if(null==vb.zpp_inner){var eb;null==q.zpp_pool?eb=new q:(eb=q.zpp_pool,q.zpp_pool=eb.next,eb.next=null);eb.weak=!1;eb._immutable=!1;eb.x=50;eb.y=-5;vb.zpp_inner=eb;vb.zpp_inner.outer=vb}else{if(null!=vb&&vb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Ob=vb.zpp_inner;if(Ob._immutable)throw new h("Error: Vec2 is immutable");null!=Ob._isimmutable&&Ob._isimmutable();var sa;if(null!=vb&&vb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var Vb=vb.zpp_inner;null!=Vb._validate&&Vb._validate();if(50==vb.zpp_inner.x){if(null!=vb&&vb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var da=vb.zpp_inner;null!=da._validate&&da._validate();sa=-5==vb.zpp_inner.y}else sa=!1;if(!sa){vb.zpp_inner.x=50;vb.zpp_inner.y=-5;var ma=vb.zpp_inner;null!=ma._invalidate&&ma._invalidate(ma)}}vb.zpp_inner.weak=!0;var yb;null==o.poolVec2?yb=new ja:(yb=o.poolVec2,o.poolVec2=yb.zpp_pool,yb.zpp_pool=null,yb.zpp_disp=!1,yb==o.nextVec2&&
(o.nextVec2=null));if(null==yb.zpp_inner){var T;null==q.zpp_pool?T=new q:(T=q.zpp_pool,q.zpp_pool=T.next,T.next=null);T.weak=!1;T._immutable=!1;T.x=-40;T.y=50;yb.zpp_inner=T;yb.zpp_inner.outer=yb}else{if(null!=yb&&yb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Xb=yb.zpp_inner;if(Xb._immutable)throw new h("Error: Vec2 is immutable");null!=Xb._isimmutable&&Xb._isimmutable();var Ha;if(null!=yb&&yb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var Pb=yb.zpp_inner;null!=Pb._validate&&Pb._validate();if(-40==yb.zpp_inner.x){if(null!=yb&&yb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var R=yb.zpp_inner;null!=R._validate&&R._validate();Ha=50==yb.zpp_inner.y}else Ha=!1;if(!Ha){yb.zpp_inner.x=-40;yb.zpp_inner.y=50;var Ca=yb.zpp_inner;null!=Ca._invalidate&&Ca._invalidate(Ca)}}yb.zpp_inner.weak=!0;this._weldLeft=new ok(na,qa,vb,yb,-0.7);var Fa=this._bodyRight,ae=this._bodyKine,Lb;null==o.poolVec2?Lb=new ja:(Lb=o.poolVec2,
o.poolVec2=Lb.zpp_pool,Lb.zpp_pool=null,Lb.zpp_disp=!1,Lb==o.nextVec2&&(o.nextVec2=null));if(null==Lb.zpp_inner){var Ic;null==q.zpp_pool?Ic=new q:(Ic=q.zpp_pool,q.zpp_pool=Ic.next,Ic.next=null);Ic.weak=!1;Ic._immutable=!1;Ic.x=24;Ic.y=-10;Lb.zpp_inner=Ic;Lb.zpp_inner.outer=Lb}else{if(null!=Lb&&Lb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var sc=Lb.zpp_inner;if(sc._immutable)throw new h("Error: Vec2 is immutable");null!=sc._isimmutable&&sc._isimmutable();var Aa;if(null!=
Lb&&Lb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Wb=Lb.zpp_inner;null!=Wb._validate&&Wb._validate();if(24==Lb.zpp_inner.x){if(null!=Lb&&Lb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var bc=Lb.zpp_inner;null!=bc._validate&&bc._validate();Aa=-10==Lb.zpp_inner.y}else Aa=!1;if(!Aa){Lb.zpp_inner.x=24;Lb.zpp_inner.y=-10;var me=Lb.zpp_inner;null!=me._invalidate&&me._invalidate(me)}}Lb.zpp_inner.weak=!0;var Kb;null==o.poolVec2?Kb=new ja:(Kb=
o.poolVec2,o.poolVec2=Kb.zpp_pool,Kb.zpp_pool=null,Kb.zpp_disp=!1,Kb==o.nextVec2&&(o.nextVec2=null));if(null==Kb.zpp_inner){var dc;null==q.zpp_pool?dc=new q:(dc=q.zpp_pool,q.zpp_pool=dc.next,dc.next=null);dc.weak=!1;dc._immutable=!1;dc.x=40;dc.y=50;Kb.zpp_inner=dc;Kb.zpp_inner.outer=Kb}else{if(null!=Kb&&Kb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Ra=Kb.zpp_inner;if(Ra._immutable)throw new h("Error: Vec2 is immutable");null!=Ra._isimmutable&&Ra._isimmutable();var Za;
if(null!=Kb&&Kb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var N=Kb.zpp_inner;null!=N._validate&&N._validate();if(40==Kb.zpp_inner.x){if(null!=Kb&&Kb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ua=Kb.zpp_inner;null!=ua._validate&&ua._validate();Za=50==Kb.zpp_inner.y}else Za=!1;if(!Za){Kb.zpp_inner.x=40;Kb.zpp_inner.y=50;var ic=Kb.zpp_inner;null!=ic._invalidate&&ic._invalidate(ic)}}Kb.zpp_inner.weak=!0;this._weldRight=new ok(Fa,ae,Lb,
Kb,0.7);var ne=this._weldLeft;!0!=ne.zpp_inner.stiff&&(ne.zpp_inner.stiff=!0,ne.zpp_inner.wake());var Jd=this._weldRight;!0!=Jd.zpp_inner.stiff&&(Jd.zpp_inner.stiff=!0,Jd.zpp_inner.wake());var fe=this._weldLeft,gc=this._weldRight;20!=gc.zpp_inner.frequency&&(gc.zpp_inner.frequency=20,gc.zpp_inner.stiff||gc.zpp_inner.wake());var Qc=gc.zpp_inner.frequency;if(Qc!=Qc)throw new h("Error: Constraint::Frequency cannot be NaN");if(0>=Qc)throw new h("Error: Constraint::Frequency must be >0");fe.zpp_inner.frequency!=
Qc&&(fe.zpp_inner.frequency=Qc,fe.zpp_inner.stiff||fe.zpp_inner.wake());var sb=this._weldLeft,La=this._weldRight;1!=La.zpp_inner.damping&&(La.zpp_inner.damping=1,La.zpp_inner.stiff||La.zpp_inner.wake());var Ia=La.zpp_inner.damping;if(Ia!=Ia)throw new h("Error: Constraint::Damping cannot be Nan");if(0>Ia)throw new h("Error: Constraint::Damping must be >=0");sb.zpp_inner.damping!=Ia&&(sb.zpp_inner.damping=Ia,sb.zpp_inner.stiff||sb.zpp_inner.wake());var Me=this._weldLeft,ze=this._weldRight,Ka=this._space;
if(null!=ze.zpp_inner.compound)throw new h("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");if((null==ze.zpp_inner.space?null:ze.zpp_inner.space.outer)!=Ka)if(null!=ze.zpp_inner.component&&(ze.zpp_inner.component.woken=!1),ze.zpp_inner.clearcache(),null!=ze.zpp_inner.space&&ze.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(ze),null!=Ka){var Xa=Ka.zpp_inner.wrap_constraints;Xa.zpp_inner.reverse_flag?Xa.push(ze):Xa.unshift(ze)}else ze.zpp_inner.space=
null;var Ce=null==ze.zpp_inner.space?null:ze.zpp_inner.space.outer;if(null!=Me.zpp_inner.compound)throw new h("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");if((null==Me.zpp_inner.space?null:Me.zpp_inner.space.outer)!=Ce)if(null!=Me.zpp_inner.component&&(Me.zpp_inner.component.woken=!1),Me.zpp_inner.clearcache(),null!=Me.zpp_inner.space&&Me.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(Me),null!=Ce){var Ya=Ce.zpp_inner.wrap_constraints;
Ya.zpp_inner.reverse_flag?Ya.push(Me):Ya.unshift(Me)}else Me.zpp_inner.space=null;this.addChild(new n({asset:"Pony_crane_torso",y:-25,x:-7}));this._leftArm=this.addChild(new n({asset:"pony_hoof_left",originX:0,originY:0}));this._rightArm=this.addChild(new n({asset:"pony_hoof_right",originX:0,originY:0}));this.addChild(new n({asset:"Pony_head_1",y:10}));this._state=Kc.READY;this.update(0)};i["world.minigame_hoofmachine.elements.CraneElement"]=zm;zm.__name__=["world","minigame_hoofmachine","elements",
"CraneElement"];zm.__super__=n;zm.prototype=z(n.prototype,{_setState:function(a){var b=this;this._state=a;switch(this._state[1]){case 0:a=this._weldLeft;!0!=a.zpp_inner.active&&(null!=a.zpp_inner.component&&(a.zpp_inner.component.woken=!1),a.zpp_inner.clearcache(),a.zpp_inner.active=!0,a.zpp_inner.activate(),null!=a.zpp_inner.space&&(null!=a.zpp_inner.component&&(a.zpp_inner.component.sleeping=!0),a.zpp_inner.space.wake_constraint(a.zpp_inner,!0)));a=this._weldRight;!0!=a.zpp_inner.active&&(null!=
a.zpp_inner.component&&(a.zpp_inner.component.woken=!1),a.zpp_inner.clearcache(),a.zpp_inner.active=!0,a.zpp_inner.activate(),null!=a.zpp_inner.space&&(null!=a.zpp_inner.component&&(a.zpp_inner.component.sleeping=!0),a.zpp_inner.space.wake_constraint(a.zpp_inner,!0)));break;case 1:s.playSound("claw_machine_whirring_loop",1,null,!0);a=this._bodyKine;null==a.zpp_inner.wrap_vel&&a.zpp_inner.setupVelocity();a=a.zpp_inner.wrap_vel;if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var c=a.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=a.zpp_inner;null!=c._validate&&c._validate();0!=a.zpp_inner.x&&(a.zpp_inner.x=0,c=a.zpp_inner,null!=c._invalidate&&c._invalidate(c));if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=a.zpp_inner;null!=a._validate&&a._validate();a=this._bodyKine;null==a.zpp_inner.wrap_pos&&a.zpp_inner.setupPosition();
a=a.zpp_inner.wrap_pos;if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=a.zpp_inner;null!=c._validate&&c._validate();a=a.zpp_inner.x;c=this._bodyKine;null==c.zpp_inner.wrap_pos&&c.zpp_inner.setupPosition();c=c.zpp_inner.wrap_pos;if(c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var d=c.zpp_inner;null!=d._validate&&d._validate();this._bodyKinePos={x:a,y:c.zpp_inner.y};this._tween.tween({target:this._bodyKinePos,duration:1,ease:G.linear},
{y:-100}).onComplete(function(){b._setState(Kc.GRAB)});break;case 2:s.playSound("claw_machine_clamp_down",1);a=this._weldLeft;!1!=a.zpp_inner.active&&(null!=a.zpp_inner.component&&(a.zpp_inner.component.woken=!1),a.zpp_inner.clearcache(),null!=a.zpp_inner.space&&(a.zpp_inner.wake(),a.zpp_inner.space.live_constraints.remove(a.zpp_inner)),a.zpp_inner.active=!1,a.zpp_inner.deactivate());a=this._weldRight;!1!=a.zpp_inner.active&&(null!=a.zpp_inner.component&&(a.zpp_inner.component.woken=!1),a.zpp_inner.clearcache(),
null!=a.zpp_inner.space&&(a.zpp_inner.wake(),a.zpp_inner.space.live_constraints.remove(a.zpp_inner)),a.zpp_inner.active=!1,a.zpp_inner.deactivate());a=this._bodyKine;null==a.zpp_inner.wrap_pos&&a.zpp_inner.setupPosition();a=a.zpp_inner.wrap_pos;if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=a.zpp_inner;null!=c._validate&&c._validate();a=a.zpp_inner.x;c=this._bodyKine;null==c.zpp_inner.wrap_pos&&c.zpp_inner.setupPosition();c=c.zpp_inner.wrap_pos;if(c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=c.zpp_inner;null!=d._validate&&d._validate();this._bodyKinePos={x:a,y:c.zpp_inner.y};this._tween.tween({target:this._bodyKinePos,duration:1,ease:G.linear,delay:1.5},{y:-250}).onComplete(function(){b._tween.tween({target:b._bodyKinePos,duration:1.5,ease:G.linear,delay:0.5},{x:250}).onComplete(function(){b._setState(Kc.RELEASE)})});break;case 3:s.stopSound("claw_machine_whirring_loop");a=this._bodyKine;null==a.zpp_inner.wrap_vel&&a.zpp_inner.setupVelocity();a=a.zpp_inner.wrap_vel;if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
c=a.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=a.zpp_inner;null!=c._validate&&c._validate();0!=a.zpp_inner.y&&(a.zpp_inner.y=0,c=a.zpp_inner,null!=c._invalidate&&c._invalidate(c));if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");a=a.zpp_inner;null!=a._validate&&a._validate();a=this._bodyLeft;null==o.poolVec2?c=new ja:(c=o.poolVec2,
o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner)null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=-300,d.y=0,c.zpp_inner=d,c.zpp_inner.outer=c;else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=c.zpp_inner;null!=d._validate&&d._validate();if(-300==c.zpp_inner.x){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=0==c.zpp_inner.y}else d=!1;d||(c.zpp_inner.x=-300,c.zpp_inner.y=0,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;null==o.poolVec2?d=new ja:(d=o.poolVec2,o.poolVec2=d.zpp_pool,d.zpp_pool=null,d.zpp_disp=!1,d==o.nextVec2&&(o.nextVec2=null));if(null==d.zpp_inner){var e;
null==q.zpp_pool?e=new q:(e=q.zpp_pool,q.zpp_pool=e.next,e.next=null);e.weak=!1;e._immutable=!1;e.x=0;e.y=80;d.zpp_inner=e;d.zpp_inner.outer=d}else{if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;if(e._immutable)throw new h("Error: Vec2 is immutable");null!=e._isimmutable&&e._isimmutable();if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;null!=e._validate&&e._validate();if(0==d.zpp_inner.x){if(null!=
d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;null!=e._validate&&e._validate();e=80==d.zpp_inner.y}else e=!1;e||(d.zpp_inner.x=0,d.zpp_inner.y=80,e=d.zpp_inner,null!=e._invalidate&&e._invalidate(e))}d.zpp_inner.weak=!0;a.applyImpulse(c,d);a=this._bodyRight;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner)null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=
d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=300,d.y=0,c.zpp_inner=d,c.zpp_inner.outer=c;else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(300==c.zpp_inner.x){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=c.zpp_inner;null!=d._validate&&d._validate();d=0==c.zpp_inner.y}else d=!1;d||(c.zpp_inner.x=300,c.zpp_inner.y=0,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;null==o.poolVec2?d=new ja:(d=o.poolVec2,o.poolVec2=d.zpp_pool,d.zpp_pool=null,d.zpp_disp=!1,d==o.nextVec2&&(o.nextVec2=null));if(null==d.zpp_inner)null==q.zpp_pool?e=new q:(e=q.zpp_pool,q.zpp_pool=e.next,e.next=null),e.weak=!1,e._immutable=!1,e.x=75,e.y=80,d.zpp_inner=e,d.zpp_inner.outer=d;else{if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
e=d.zpp_inner;if(e._immutable)throw new h("Error: Vec2 is immutable");null!=e._isimmutable&&e._isimmutable();if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;null!=e._validate&&e._validate();if(75==d.zpp_inner.x){if(null!=d&&d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");e=d.zpp_inner;null!=e._validate&&e._validate();e=80==d.zpp_inner.y}else e=!1;e||(d.zpp_inner.x=75,d.zpp_inner.y=80,e=d.zpp_inner,null!=e._invalidate&&
e._invalidate(e))}d.zpp_inner.weak=!0;a.applyImpulse(c,d);P.releaseCrane.dispatch();this._tween.tween({target:this,duration:0.75,ease:G.linear},{}).onComplete(function(){})}},setReady:function(){this._setState(Kc.READY)},setSpace:function(a){var b=this._bodyKine,c=this._bodyLeft,d=this._bodyRight,e=this._pivotLeft,f=this._pivotRight,g=this._weldLeft,j=this._weldRight;if(null!=j.zpp_inner.compound)throw new h("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");
if((null==j.zpp_inner.space?null:j.zpp_inner.space.outer)!=a)null!=j.zpp_inner.component&&(j.zpp_inner.component.woken=!1),j.zpp_inner.clearcache(),null!=j.zpp_inner.space&&j.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(j),null!=a?(a=a.zpp_inner.wrap_constraints,a.zpp_inner.reverse_flag?a.push(j):a.unshift(j)):j.zpp_inner.space=null;j=null==j.zpp_inner.space?null:j.zpp_inner.space.outer;if(null!=g.zpp_inner.compound)throw new h("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");
if((null==g.zpp_inner.space?null:g.zpp_inner.space.outer)!=j)null!=g.zpp_inner.component&&(g.zpp_inner.component.woken=!1),g.zpp_inner.clearcache(),null!=g.zpp_inner.space&&g.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(g),null!=j?(j=j.zpp_inner.wrap_constraints,j.zpp_inner.reverse_flag?j.push(g):j.unshift(g)):g.zpp_inner.space=null;g=null==g.zpp_inner.space?null:g.zpp_inner.space.outer;if(null!=f.zpp_inner.compound)throw new h("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");
if((null==f.zpp_inner.space?null:f.zpp_inner.space.outer)!=g)null!=f.zpp_inner.component&&(f.zpp_inner.component.woken=!1),f.zpp_inner.clearcache(),null!=f.zpp_inner.space&&f.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(f),null!=g?(g=g.zpp_inner.wrap_constraints,g.zpp_inner.reverse_flag?g.push(f):g.unshift(f)):f.zpp_inner.space=null;f=null==f.zpp_inner.space?null:f.zpp_inner.space.outer;if(null!=e.zpp_inner.compound)throw new h("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");
if((null==e.zpp_inner.space?null:e.zpp_inner.space.outer)!=f)null!=e.zpp_inner.component&&(e.zpp_inner.component.woken=!1),e.zpp_inner.clearcache(),null!=e.zpp_inner.space&&e.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(e),null!=f?(f=f.zpp_inner.wrap_constraints,f.zpp_inner.reverse_flag?f.push(e):f.unshift(e)):e.zpp_inner.space=null;e=null==e.zpp_inner.space?null:e.zpp_inner.space.outer;if(null!=d.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");
d.zpp_inner.immutable_midstep("Body::space");if(d.zpp_inner.world)throw new h("Error: Space::world is immutable");if((null==d.zpp_inner.space?null:d.zpp_inner.space.outer)!=e){if(null!=(null==d.zpp_inner.space?null:d.zpp_inner.space.outer))d.zpp_inner.component.woken=!1;if(null!=(null==d.zpp_inner.space?null:d.zpp_inner.space.outer))(null==d.zpp_inner.space?null:d.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(d);null!=e&&(e=e.zpp_inner.wrap_bodies,e.zpp_inner.reverse_flag?e.push(d):e.unshift(d))}d=
null==d.zpp_inner.space?null:d.zpp_inner.space.outer;if(null!=c.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");c.zpp_inner.immutable_midstep("Body::space");if(c.zpp_inner.world)throw new h("Error: Space::world is immutable");if((null==c.zpp_inner.space?null:c.zpp_inner.space.outer)!=d){if(null!=(null==c.zpp_inner.space?null:c.zpp_inner.space.outer))c.zpp_inner.component.woken=!1;if(null!=(null==c.zpp_inner.space?
null:c.zpp_inner.space.outer))(null==c.zpp_inner.space?null:c.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(c);null!=d&&(d=d.zpp_inner.wrap_bodies,d.zpp_inner.reverse_flag?d.push(c):d.unshift(c))}c=null==c.zpp_inner.space?null:c.zpp_inner.space.outer;if(null!=b.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");b.zpp_inner.immutable_midstep("Body::space");if(b.zpp_inner.world)throw new h("Error: Space::world is immutable");
if((null==b.zpp_inner.space?null:b.zpp_inner.space.outer)!=c){if(null!=(null==b.zpp_inner.space?null:b.zpp_inner.space.outer))b.zpp_inner.component.woken=!1;if(null!=(null==b.zpp_inner.space?null:b.zpp_inner.space.outer))(null==b.zpp_inner.space?null:b.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(b);null!=c&&(c=c.zpp_inner.wrap_bodies,c.zpp_inner.reverse_flag?c.push(b):c.unshift(b))}},move:function(a){if(this._state==Kc.READY){var b=this._bodyKine;null==b.zpp_inner.wrap_vel&&b.zpp_inner.setupVelocity();
b=b.zpp_inner.wrap_vel;if(b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var c=b.zpp_inner;null!=c._validate&&c._validate();a=b.zpp_inner.x+a;if(b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=b.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=b.zpp_inner;null!=c._validate&&c._validate();if(b.zpp_inner.x!=
a){if(a!=a)throw new h("Error: Vec2::x cannot be NaN");b.zpp_inner.x=a;a=b.zpp_inner;null!=a._invalidate&&a._invalidate(a)}if(b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=b.zpp_inner;null!=b._validate&&b._validate()}},drop:function(){this._state==Kc.READY&&this._setState(Kc.DROPPING)},update:function(a){n.prototype.update.call(this,a);if(this._state==Kc.READY){var b,c=this._bodyKine;null==c.zpp_inner.wrap_vel&&c.zpp_inner.setupVelocity();var d=c.zpp_inner.wrap_vel;
if(d.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var e=d.zpp_inner;null!=e._validate&&e._validate();if(0>d.zpp_inner.x){var f=this._bodyKine;null==f.zpp_inner.wrap_pos&&f.zpp_inner.setupPosition();var g=f.zpp_inner.wrap_pos;if(g.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var j=g.zpp_inner;null!=j._validate&&j._validate();b=-175>g.zpp_inner.x}else b=!1;if(b){var p=this._bodyKine;null==p.zpp_inner.wrap_pos&&p.zpp_inner.setupPosition();var i=
p.zpp_inner.wrap_pos;if(i.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var k=i.zpp_inner;if(k._immutable)throw new h("Error: Vec2 is immutable");null!=k._isimmutable&&k._isimmutable();if(i.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var l=i.zpp_inner;null!=l._validate&&l._validate();if(-175!=i.zpp_inner.x){i.zpp_inner.x=-175;var m=i.zpp_inner;null!=m._invalidate&&m._invalidate(m)}if(i.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var r=i.zpp_inner;null!=r._validate&&r._validate()}else{var u,s=this._bodyKine;null==s.zpp_inner.wrap_vel&&s.zpp_inner.setupVelocity();var t=s.zpp_inner.wrap_vel;if(t.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var v=t.zpp_inner;null!=v._validate&&v._validate();if(0<t.zpp_inner.x){var z=this._bodyKine;null==z.zpp_inner.wrap_pos&&z.zpp_inner.setupPosition();var w=z.zpp_inner.wrap_pos;if(w.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var y=
w.zpp_inner;null!=y._validate&&y._validate();u=175<w.zpp_inner.x}else u=!1;if(u){var G=this._bodyKine;null==G.zpp_inner.wrap_pos&&G.zpp_inner.setupPosition();var H=G.zpp_inner.wrap_pos;if(H.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var F=H.zpp_inner;if(F._immutable)throw new h("Error: Vec2 is immutable");null!=F._isimmutable&&F._isimmutable();if(H.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var E=H.zpp_inner;null!=E._validate&&E._validate();
if(175!=H.zpp_inner.x){H.zpp_inner.x=175;var J=H.zpp_inner;null!=J._invalidate&&J._invalidate(J)}if(H.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var O=H.zpp_inner;null!=O._validate&&O._validate()}}}var P=this.pos,K=this._bodyKine;null==K.zpp_inner.wrap_pos&&K.zpp_inner.setupPosition();var M=K.zpp_inner.wrap_pos;if(M.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var L=M.zpp_inner;null!=L._validate&&L._validate();var S=M.zpp_inner.x,rc=this._bodyKine;
null==rc.zpp_inner.wrap_pos&&rc.zpp_inner.setupPosition();var V=rc.zpp_inner.wrap_pos;if(V.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ka=V.zpp_inner;null!=ka._validate&&ka._validate();P.to(S,V.zpp_inner.y);var Y=this._leftArm.pos,Ab=this._bodyLeft;null==Ab.zpp_inner.wrap_pos&&Ab.zpp_inner.setupPosition();var yh=Ab.zpp_inner.wrap_pos;if(yh.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var kc=yh.zpp_inner;null!=kc._validate&&kc._validate();
var qf=yh.zpp_inner.x-this.get_x(),va=this._bodyLeft;null==va.zpp_inner.wrap_pos&&va.zpp_inner.setupPosition();var fa=va.zpp_inner.wrap_pos;if(fa.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Z=fa.zpp_inner;null!=Z._validate&&Z._validate();Y.to(qf,fa.zpp_inner.y-this.get_y());var gh=this._rightArm.pos,Mc=this._bodyRight;null==Mc.zpp_inner.wrap_pos&&Mc.zpp_inner.setupPosition();var U=Mc.zpp_inner.wrap_pos;if(U.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var ca=U.zpp_inner;null!=ca._validate&&ca._validate();var $=U.zpp_inner.x-this.get_x(),ye=this._bodyRight;null==ye.zpp_inner.wrap_pos&&ye.zpp_inner.setupPosition();var Sf=ye.zpp_inner.wrap_pos;if(Sf.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Vc=Sf.zpp_inner;null!=Vc._validate&&Vc._validate();gh.to($,Sf.zpp_inner.y-this.get_y());this._leftArm.rotation=this._bodyLeft.zpp_inner.rot*(180/Math.PI);this._rightArm.rotation=this._bodyRight.zpp_inner.rot*(180/Math.PI);var oa=
this._bodyLeft,Yb;null==o.poolVec2?Yb=new ja:(Yb=o.poolVec2,o.poolVec2=Yb.zpp_pool,Yb.zpp_pool=null,Yb.zpp_disp=!1,Yb==o.nextVec2&&(o.nextVec2=null));if(null==Yb.zpp_inner){var tb;null==q.zpp_pool?tb=new q:(tb=q.zpp_pool,q.zpp_pool=tb.next,tb.next=null);tb.weak=!1;tb._immutable=!1;tb.x=1;tb.y=0;Yb.zpp_inner=tb;Yb.zpp_inner.outer=Yb}else{if(null!=Yb&&Yb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ng=Yb.zpp_inner;if(ng._immutable)throw new h("Error: Vec2 is immutable");
null!=ng._isimmutable&&ng._isimmutable();var Ug;if(null!=Yb&&Yb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Da=Yb.zpp_inner;null!=Da._validate&&Da._validate();if(1==Yb.zpp_inner.x){if(null!=Yb&&Yb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ha=Yb.zpp_inner;null!=ha._validate&&ha._validate();Ug=0==Yb.zpp_inner.y}else Ug=!1;if(!Ug){Yb.zpp_inner.x=1;Yb.zpp_inner.y=0;var Le=Yb.zpp_inner;null!=Le._invalidate&&Le._invalidate(Le)}}Yb.zpp_inner.weak=
!0;var lc;null==o.poolVec2?lc=new ja:(lc=o.poolVec2,o.poolVec2=lc.zpp_pool,lc.zpp_pool=null,lc.zpp_disp=!1,lc==o.nextVec2&&(o.nextVec2=null));if(null==lc.zpp_inner){var Md;null==q.zpp_pool?Md=new q:(Md=q.zpp_pool,q.zpp_pool=Md.next,Md.next=null);Md.weak=!1;Md._immutable=!1;Md.x=0;Md.y=80;lc.zpp_inner=Md;lc.zpp_inner.outer=lc}else{if(null!=lc&&lc.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var I=lc.zpp_inner;if(I._immutable)throw new h("Error: Vec2 is immutable");null!=
I._isimmutable&&I._isimmutable();var Sa;if(null!=lc&&lc.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ef=lc.zpp_inner;null!=ef._validate&&ef._validate();if(0==lc.zpp_inner.x){if(null!=lc&&lc.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var X=lc.zpp_inner;null!=X._validate&&X._validate();Sa=80==lc.zpp_inner.y}else Sa=!1;if(!Sa){lc.zpp_inner.x=0;lc.zpp_inner.y=80;var la=lc.zpp_inner;null!=la._invalidate&&la._invalidate(la)}}lc.zpp_inner.weak=
!0;oa.applyImpulse(Yb,lc);var wa=this._bodyRight,ra;null==o.poolVec2?ra=new ja:(ra=o.poolVec2,o.poolVec2=ra.zpp_pool,ra.zpp_pool=null,ra.zpp_disp=!1,ra==o.nextVec2&&(o.nextVec2=null));if(null==ra.zpp_inner){var Ja;null==q.zpp_pool?Ja=new q:(Ja=q.zpp_pool,q.zpp_pool=Ja.next,Ja.next=null);Ja.weak=!1;Ja._immutable=!1;Ja.x=-1;Ja.y=0;ra.zpp_inner=Ja;ra.zpp_inner.outer=ra}else{if(null!=ra&&ra.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Ea=ra.zpp_inner;if(Ea._immutable)throw new h("Error: Vec2 is immutable");
null!=Ea._isimmutable&&Ea._isimmutable();var A;if(null!=ra&&ra.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var xa=ra.zpp_inner;null!=xa._validate&&xa._validate();if(-1==ra.zpp_inner.x){if(null!=ra&&ra.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Ma=ra.zpp_inner;null!=Ma._validate&&Ma._validate();A=0==ra.zpp_inner.y}else A=!1;if(!A){ra.zpp_inner.x=-1;ra.zpp_inner.y=0;var $a=ra.zpp_inner;null!=$a._invalidate&&$a._invalidate($a)}}ra.zpp_inner.weak=
!0;var za;null==o.poolVec2?za=new ja:(za=o.poolVec2,o.poolVec2=za.zpp_pool,za.zpp_pool=null,za.zpp_disp=!1,za==o.nextVec2&&(o.nextVec2=null));if(null==za.zpp_inner){var Db;null==q.zpp_pool?Db=new q:(Db=q.zpp_pool,q.zpp_pool=Db.next,Db.next=null);Db.weak=!1;Db._immutable=!1;Db.x=75;Db.y=80;za.zpp_inner=Db;za.zpp_inner.outer=za}else{if(null!=za&&za.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ya=za.zpp_inner;if(ya._immutable)throw new h("Error: Vec2 is immutable");null!=
ya._isimmutable&&ya._isimmutable();var Ua;if(null!=za&&za.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Ba=za.zpp_inner;null!=Ba._validate&&Ba._validate();if(75==za.zpp_inner.x){if(null!=za&&za.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var zf=za.zpp_inner;null!=zf._validate&&zf._validate();Ua=80==za.zpp_inner.y}else Ua=!1;if(!Ua){za.zpp_inner.x=75;za.zpp_inner.y=80;var pa=za.zpp_inner;null!=pa._invalidate&&pa._invalidate(pa)}}za.zpp_inner.weak=
!0;wa.applyImpulse(ra,za);switch(this._state[1]){case 1:var ea=this._bodyKine;null==ea.zpp_inner.wrap_pos&&ea.zpp_inner.setupPosition();var ia=ea.zpp_inner.wrap_pos,Pc=this._bodyKinePos.x;if(ia.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ac=ia.zpp_inner;if(ac._immutable)throw new h("Error: Vec2 is immutable");null!=ac._isimmutable&&ac._isimmutable();if(ia.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ga=ia.zpp_inner;null!=ga._validate&&
ga._validate();if(ia.zpp_inner.x!=Pc){if(Pc!=Pc)throw new h("Error: Vec2::x cannot be NaN");ia.zpp_inner.x=Pc;var kb=ia.zpp_inner;null!=kb._invalidate&&kb._invalidate(kb)}if(ia.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var C=ia.zpp_inner;null!=C._validate&&C._validate();var Kg=this._bodyKine;null==Kg.zpp_inner.wrap_pos&&Kg.zpp_inner.setupPosition();var ob=Kg.zpp_inner.wrap_pos,ta=this._bodyKinePos.y;if(ob.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var pb=ob.zpp_inner;if(pb._immutable)throw new h("Error: Vec2 is immutable");null!=pb._isimmutable&&pb._isimmutable();if(ob.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var qh=ob.zpp_inner;null!=qh._validate&&qh._validate();if(ob.zpp_inner.y!=ta){if(ta!=ta)throw new h("Error: Vec2::y cannot be NaN");ob.zpp_inner.y=ta;var Q=ob.zpp_inner;null!=Q._invalidate&&Q._invalidate(Q)}if(ob.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var aa=ob.zpp_inner;
null!=aa._validate&&aa._validate();break;case 2:var Na=this._bodyLeft,ba;null==o.poolVec2?ba=new ja:(ba=o.poolVec2,o.poolVec2=ba.zpp_pool,ba.zpp_pool=null,ba.zpp_disp=!1,ba==o.nextVec2&&(o.nextVec2=null));if(null==ba.zpp_inner){var Vf;null==q.zpp_pool?Vf=new q:(Vf=q.zpp_pool,q.zpp_pool=Vf.next,Vf.next=null);Vf.weak=!1;Vf._immutable=!1;Vf.x=500;Vf.y=0;ba.zpp_inner=Vf;ba.zpp_inner.outer=ba}else{if(null!=ba&&ba.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var W=ba.zpp_inner;
if(W._immutable)throw new h("Error: Vec2 is immutable");null!=W._isimmutable&&W._isimmutable();var Hb;if(null!=ba&&ba.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var bb=ba.zpp_inner;null!=bb._validate&&bb._validate();if(500==ba.zpp_inner.x){if(null!=ba&&ba.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ib=ba.zpp_inner;null!=ib._validate&&ib._validate();Hb=0==ba.zpp_inner.y}else Hb=!1;if(!Hb){ba.zpp_inner.x=500;ba.zpp_inner.y=0;var Oa=ba.zpp_inner;
null!=Oa._invalidate&&Oa._invalidate(Oa)}}ba.zpp_inner.weak=!0;var Va;null==o.poolVec2?Va=new ja:(Va=o.poolVec2,o.poolVec2=Va.zpp_pool,Va.zpp_pool=null,Va.zpp_disp=!1,Va==o.nextVec2&&(o.nextVec2=null));if(null==Va.zpp_inner){var D;null==q.zpp_pool?D=new q:(D=q.zpp_pool,q.zpp_pool=D.next,D.next=null);D.weak=!1;D._immutable=!1;D.x=0;D.y=80;Va.zpp_inner=D;Va.zpp_inner.outer=Va}else{if(null!=Va&&Va.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var lb=Va.zpp_inner;if(lb._immutable)throw new h("Error: Vec2 is immutable");
null!=lb._isimmutable&&lb._isimmutable();var Ta;if(null!=Va&&Va.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var jb=Va.zpp_inner;null!=jb._validate&&jb._validate();if(0==Va.zpp_inner.x){if(null!=Va&&Va.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var gb=Va.zpp_inner;null!=gb._validate&&gb._validate();Ta=80==Va.zpp_inner.y}else Ta=!1;if(!Ta){Va.zpp_inner.x=0;Va.zpp_inner.y=80;var Ga=Va.zpp_inner;null!=Ga._invalidate&&Ga._invalidate(Ga)}}Va.zpp_inner.weak=
!0;Na.applyImpulse(ba,Va);var Eb=this._bodyRight,cb;null==o.poolVec2?cb=new ja:(cb=o.poolVec2,o.poolVec2=cb.zpp_pool,cb.zpp_pool=null,cb.zpp_disp=!1,cb==o.nextVec2&&(o.nextVec2=null));if(null==cb.zpp_inner){var zb;null==q.zpp_pool?zb=new q:(zb=q.zpp_pool,q.zpp_pool=zb.next,zb.next=null);zb.weak=!1;zb._immutable=!1;zb.x=-500;zb.y=0;cb.zpp_inner=zb;cb.zpp_inner.outer=cb}else{if(null!=cb&&cb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Nc=cb.zpp_inner;if(Nc._immutable)throw new h("Error: Vec2 is immutable");
null!=Nc._isimmutable&&Nc._isimmutable();var rd;if(null!=cb&&cb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var sa=cb.zpp_inner;null!=sa._validate&&sa._validate();if(-500==cb.zpp_inner.x){if(null!=cb&&cb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Ib=cb.zpp_inner;null!=Ib._validate&&Ib._validate();rd=0==cb.zpp_inner.y}else rd=!1;if(!rd){cb.zpp_inner.x=-500;cb.zpp_inner.y=0;var ub=cb.zpp_inner;null!=ub._invalidate&&ub._invalidate(ub)}}cb.zpp_inner.weak=
!0;var wb;null==o.poolVec2?wb=new ja:(wb=o.poolVec2,o.poolVec2=wb.zpp_pool,wb.zpp_pool=null,wb.zpp_disp=!1,wb==o.nextVec2&&(o.nextVec2=null));if(null==wb.zpp_inner){var mb;null==q.zpp_pool?mb=new q:(mb=q.zpp_pool,q.zpp_pool=mb.next,mb.next=null);mb.weak=!1;mb._immutable=!1;mb.x=75;mb.y=80;wb.zpp_inner=mb;wb.zpp_inner.outer=wb}else{if(null!=wb&&wb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var T=wb.zpp_inner;if(T._immutable)throw new h("Error: Vec2 is immutable");null!=
T._isimmutable&&T._isimmutable();var B;if(null!=wb&&wb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Bb=wb.zpp_inner;null!=Bb._validate&&Bb._validate();if(75==wb.zpp_inner.x){if(null!=wb&&wb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var db=wb.zpp_inner;null!=db._validate&&db._validate();B=80==wb.zpp_inner.y}else B=!1;if(!B){wb.zpp_inner.x=75;wb.zpp_inner.y=80;var ab=wb.zpp_inner;null!=ab._invalidate&&ab._invalidate(ab)}}wb.zpp_inner.weak=
!0;Eb.applyImpulse(cb,wb);var x=this._bodyKine;null==x.zpp_inner.wrap_pos&&x.zpp_inner.setupPosition();var Nb=x.zpp_inner.wrap_pos,Jb=this._bodyKinePos.x;if(Nb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var qb=Nb.zpp_inner;if(qb._immutable)throw new h("Error: Vec2 is immutable");null!=qb._isimmutable&&qb._isimmutable();if(Nb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var na=Nb.zpp_inner;null!=na._validate&&na._validate();if(Nb.zpp_inner.x!=
Jb){if(Jb!=Jb)throw new h("Error: Vec2::x cannot be NaN");Nb.zpp_inner.x=Jb;var qa=Nb.zpp_inner;null!=qa._invalidate&&qa._invalidate(qa)}if(Nb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var ma=Nb.zpp_inner;null!=ma._validate&&ma._validate();var vb=this._bodyKine;null==vb.zpp_inner.wrap_pos&&vb.zpp_inner.setupPosition();var eb=vb.zpp_inner.wrap_pos,Ob=this._bodyKinePos.y;if(eb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var da=eb.zpp_inner;
if(da._immutable)throw new h("Error: Vec2 is immutable");null!=da._isimmutable&&da._isimmutable();if(eb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Vb=eb.zpp_inner;null!=Vb._validate&&Vb._validate();if(eb.zpp_inner.y!=Ob){if(Ob!=Ob)throw new h("Error: Vec2::y cannot be NaN");eb.zpp_inner.y=Ob;var Ha=eb.zpp_inner;null!=Ha._invalidate&&Ha._invalidate(Ha)}if(eb.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var Ca=eb.zpp_inner;null!=Ca._validate&&
Ca._validate()}},__class__:zm});var Qb=function(a,b){this._flagDrop=!1;this._space=a;n.call(this,b);this.set_originX(this.set_originY(0));var c=[],d=b.asset;if(null!=d)switch(d){case "collections/stickers/hoof_machine/sticker_hoof_machine_0":this._id=30;c=[45,30,68,23,85,23,90,12,90,2,98,2,106,16,109,33,120,43,122,52,95,82,61,97,45,96,33,86,9,70,0,52,29,57,35,41,40,34];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_1":this._id=31;c=[116,21,125,0,132,0,125,25,131,29,125,58,149,
58,169,69,169,77,162,82,135,78,113,99,107,98,100,107,78,108,85,119,76,135,73,170,56,171,45,152,31,171,15,172,8,162,8,146,30,119,1,113,32,86,34,69,30,66,37,51,34,48,43,37,46,35,42,31,49,24,69,24,74,25,85,11,96,10,106,27];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_10":this._id=40;c=[1,42,69,1,102,30,33,78];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_11":this._id=41;c=[1,44,12,13,41,1,72,19,71,57,61,74,43,80];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_12":this._id=
42;c=[1,44,12,13,41,1,72,19,71,57,61,74,43,80];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_13":this._id=43;c=[1,1,60,1,60,87,1,87];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_14":this._id=44;c=[1,1,60,1,60,87,1,87];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_15":this._id=45;c=[1,1,60,1,60,87,1,87];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_16":this._id=46;c=[1,54,31,56,21,36,22,15,50,1,110,34,119,73,141,53,
176,97,144,95,163,123,97,142,59,101,8,81];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_2":this._id=32;c=[78,0,93,7,94,13,90,19,95,28,95,37,103,43,98,48,103,57,98,66,101,87,105,101,107,121,94,135,88,138,50,139,28,129,21,115,21,99,27,88,5,84,-1,75,8,67,1,51,9,44,21,49,26,58,32,45,39,43,43,52,42,79,59,75,64,75,74,19,65,11];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_3":this._id=33;c=[20,13,76,0,85,5,86,11,87,17,71,55,63,62,20,69,8,70,3,66,1,60,11,32];break;
case "collections/stickers/hoof_machine/sticker_hoof_machine_4":this._id=34;c=[2,65,21,10,22,1,67,13,64,21,64,33,48,81,48,92,0,80,4,71];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_5":this._id=35;c=[50,0,57,9,61,42,62,66,60,84,57,95,46,99,48,110,58,128,51,163,45,172,40,167,30,181,23,183,18,161,1,162,1,152,16,113,31,97,20,85,18,67,38,10];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_6":this._id=36;c=[6,11,16,7,29,0,40,1,48,6,64,17,69,31,69,45,66,52,58,57,
50,62,39,73,30,74,17,73,0,59,2,43,3,38,2,19];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_7":this._id=37;c=[23,1,44,15,23,42,1,24];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_8":this._id=38;c=[4,9,25,25,39,22,52,-1,59,6,50,22,64,29,69,40,73,47,69,54,83,120,84,131,83,136,71,143,60,145,40,146,34,142,12,67,7,65,5,59,7,43,15,30,-2,17];break;case "collections/stickers/hoof_machine/sticker_hoof_machine_9":this._id=39,c=[0,50,8,33,88,2,103,32,89,70,52,89,18,79]}"collections/stickers/hoof_machine/sticker_hoof_machine_2"==
this.get_asset()&&(this.setAsset("2x"),this._chicken=this.addChild(new E({library:"spine/chicken_prop_anim_1",scale:0.2,x:83,y:177,alpha:1})),this._chicken.animate("idle_2"));for(var d=[],e=0;e<c.length;){var f=c[e],g=c[e+1];if(f!=f||g!=g)throw new h("Error: Vec2 components cannot be NaN");var j;null==o.poolVec2?j=new ja:(j=o.poolVec2,o.poolVec2=j.zpp_pool,j.zpp_pool=null,j.zpp_disp=!1,j==o.nextVec2&&(o.nextVec2=null));if(null==j.zpp_inner){var p;null==q.zpp_pool?p=new q:(p=q.zpp_pool,q.zpp_pool=
p.next,p.next=null);p.weak=!1;p._immutable=!1;p.x=f;p.y=g;j.zpp_inner=p;j.zpp_inner.outer=j}else{if(null!=j&&j.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=j.zpp_inner;if(p._immutable)throw new h("Error: Vec2 is immutable");null!=p._isimmutable&&p._isimmutable();if(f!=f||g!=g)throw new h("Error: Vec2 components cannot be NaN");if(null!=j&&j.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=j.zpp_inner;null!=p._validate&&p._validate();if(j.zpp_inner.x==
f){if(null!=j&&j.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");p=j.zpp_inner;null!=p._validate&&p._validate();p=j.zpp_inner.y==g}else p=!1;p||(j.zpp_inner.x=f,j.zpp_inner.y=g,f=j.zpp_inner,null!=f._invalidate&&f._invalidate(f))}j.zpp_inner.weak=!0;d.push(j);e+=2}c=sf.get(d);e=c.convexDecomposition();null==l.BodyType_DYNAMIC&&(l.internal=!0,l.BodyType_DYNAMIC=new qd,l.internal=!1);this._body=new tf(l.BodyType_DYNAMIC);d="HOOF_MACHINE_STICKY_MODE"==m.getString("STRING_BOOSTER")?
0.9:0.1;e.zpp_inner.valmod();for(e=pd.get(e);;){e.zpp_inner.zpp_inner.valmod();j=e.zpp_inner;j.zpp_inner.valmod();j.zpp_inner.zip_length&&(j.zpp_inner.zip_length=!1,j.zpp_inner.user_length=j.zpp_inner.inner.length);j=j.zpp_inner.user_length;e.zpp_critical=!0;e.zpp_i<j?j=!0:(e.zpp_next=pd.zpp_pool,pd.zpp_pool=e,e.zpp_inner=null,j=!1);if(!j)break;e.zpp_critical=!1;j=e.zpp_inner.at(e.zpp_i++);f=new Rb(j);g=f.zpp_inner.material.wrapper();10!=g.zpp_inner.dynamicFriction&&(g.zpp_inner.dynamicFriction=10,
g.zpp_inner.invalidate(Qa.WAKE|Qa.ANGDRAG|Qa.ARBITERS));g=f.zpp_inner.material.wrapper();10!=g.zpp_inner.staticFriction&&(g.zpp_inner.staticFriction=10,g.zpp_inner.invalidate(Qa.WAKE|Qa.ARBITERS));g=f.zpp_inner.material.wrapper();if(d!=1E3*g.zpp_inner.density){if(d!=d)throw new h("Error: Material::density cannot be NaN");if(0>d)throw new h("Error: Material::density must be positive");if(0>d)throw new h("Error: Material::density cannot be negative");g.zpp_inner.density=d/1E3;g.zpp_inner.invalidate(Qa.WAKE|
Qa.PROPS)}g=this._body.zpp_inner.wrap_shapes;g.zpp_inner.reverse_flag?g.push(f):g.unshift(f);j.dispose()}c.dispose();c=this._body;null==c.zpp_inner.wrap_pos&&c.zpp_inner.setupPosition();c=c.zpp_inner.wrap_pos;d=this.get_x();e=this.get_y();if(c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=c.zpp_inner;if(j._immutable)throw new h("Error: Vec2 is immutable");null!=j._isimmutable&&j._isimmutable();if(d!=d||e!=e)throw new h("Error: Vec2 components cannot be NaN");if(c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
j=c.zpp_inner;null!=j._validate&&j._validate();if(c.zpp_inner.x==d){if(c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");j=c.zpp_inner;null!=j._validate&&j._validate();j=c.zpp_inner.y==e}else j=!1;j||(c.zpp_inner.x=d,c.zpp_inner.y=e,c=c.zpp_inner,null!=c._invalidate&&c._invalidate(c));c=this._body;d=this._space;if(null!=c.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");c.zpp_inner.immutable_midstep("Body::space");
if(c.zpp_inner.world)throw new h("Error: Space::world is immutable");if((null==c.zpp_inner.space?null:c.zpp_inner.space.outer)!=d){if(null!=(null==c.zpp_inner.space?null:c.zpp_inner.space.outer))c.zpp_inner.component.woken=!1;if(null!=(null==c.zpp_inner.space?null:c.zpp_inner.space.outer))(null==c.zpp_inner.space?null:c.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(c);null!=d&&(d=d.zpp_inner.wrap_bodies,d.zpp_inner.reverse_flag?d.push(c):d.unshift(c))}c=this._body;null==c.zpp_inner_i.userData&&
(c.zpp_inner_i.userData={});c.zpp_inner_i.userData.name=this.get_asset()};i["world.minigame_hoofmachine.elements.PrizeElement"]=Qb;Qb.__name__=["world","minigame_hoofmachine","elements","PrizeElement"];Qb.__super__=n;Qb.prototype=z(n.prototype,{getId:function(){return this._id},update:function(a){n.prototype.update.call(this,a);if(!this._flagDrop){var a=this.pos,b=this._body;null==b.zpp_inner.wrap_pos&&b.zpp_inner.setupPosition();b=b.zpp_inner.wrap_pos;if(b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
var c=b.zpp_inner;null!=c._validate&&c._validate();b=b.zpp_inner.x;c=this._body;null==c.zpp_inner.wrap_pos&&c.zpp_inner.setupPosition();c=c.zpp_inner.wrap_pos;if(c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var d=c.zpp_inner;null!=d._validate&&d._validate();a.to(b,c.zpp_inner.y);this.rotation=this._body.zpp_inner.rot*(180/Math.PI);null!=this._chicken&&-40>this.get_y()&&this._chicken.animate("captured")}},getBody:function(){return this._body},drop:function(){var a=this._body;
if(null!=a.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");a.zpp_inner.immutable_midstep("Body::space");if(a.zpp_inner.world)throw new h("Error: Space::world is immutable");if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer)){if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer))a.zpp_inner.component.woken=!1;if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer))(null==a.zpp_inner.space?
null:a.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(a)}this._flagDrop=!0},__class__:Qb});var Rk=function(a){this._levelNumber=0;U.call(this,a)};i["world.minigame_packmaze.WorldPackMaze"]=Rk;Rk.__name__=["world","minigame_packmaze","WorldPackMaze"];Rk.__super__=U;Rk.prototype=z(U.prototype,{start:function(){U.prototype.start.call(this)},dispose:function(){U.prototype.dispose.call(this)},_setState:function(a){this._state=a;switch(a[1]){case 0:this._initPools();break;case 1:m.setInt("INT_HEALTH",
3);this._initWorld();this._onGenerationComplete();break;case 3:m.setBool("BOOL_GAME_WIN",!0)}},update:function(a){var b=this;if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&this._setState(T.INITIALIZING);break;case 2:this._tween.update(a);this._elementManager.update(a);4>this._enemies.length&&(this._spawnTimer-=a,0>=this._spawnTimer&&(this._spawnTimer=M.randomFloat(3,5),this._door.animate("down",1),this._grid.isSpawning=!0,this._tween.tween({target:null,
duration:1,ease:G.linear},{}).onComplete(function(){b._door.animate("up",1);s.playSound(M.randomObject(["arcade_minigame_damage","arcade_minigame_damage_02"]));b._grid.isSpawning=!1}),this._enemies.push(this._elementManager.addElement(new Am(this._grid.get_enemySpawn().x,this._grid.get_enemySpawn().y,this._grid,this._tween,this._enemyTextures.pop())))));this._handleTouch(a);this._checkCollision();break;case 3:this._tween.update(a),this._elementManager.update(a)}},_handleTouch:function(){if(!(m.getBool("BOOL_PAUSED")||
this._state!=T.GAMEPLAY)&&0<w.multiTouch.length)for(var a=0,b=w.multiTouch;a<b.length;){var c=b[a];++a;if(c.phase!=Gb.DOWN&&c.phase==Gb.MOVED&&1==w.multiTouch.length)switch(c.swipe[1]){case 1:this._player.move(Ya.LEFT);break;case 2:this._player.move(Ya.RIGHT);break;case 3:this._player.move(Ya.UP);break;case 4:this._player.move(Ya.DOWN)}}},_checkCollision:function(){for(var a=this._enemies.length;0<=--a;)this._enemies[a].doDelete&&(this._enemyTextures.push(this._enemies[a].baseAsset),this._enemies.splice(a,
1));for(a=this._pickups.length;0<=--a;)this._pickups[a].isActive()||this._pickups.splice(a,1);for(var a=0,b=this._pickups;a<b.length;){var c=b[a];++a;this._player.gridX==c.gridX&&this._player.gridY==c.gridY&&c.collect()}a=0;for(b=this._enemies;a<b.length;)c=b[a],++a,this._player.gridX==c.gridX&&this._player.gridY==c.gridY&&this._player.collideWithEnemy(c);0==this._pickups.length&&(this._levelNumber+=1,this._transition.setLevel(this._levelNumber+1),this._transition.animateIn(),ha.start(v(this,this._generateMap),
1.1));0>=m.getInt("INT_HEALTH")&&this._setState(T.GAME_OVER)},_addEventListeners:function(){U.prototype._addEventListeners.call(this);P.pacmanPowerup.add(v(this,this._onPowerup))},_removeEventListeners:function(){U.prototype._removeEventListeners.call(this);P.pacmanPowerup.remove(v(this,this._onPowerup))},_onPowerup:function(){this._player.getPowerup();for(var a=0,b=this._enemies;a<b.length;){var c=b[a];++a;c.setVulnerable(!0)}},_onInput:function(a,b){m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY||
(this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos),a==$.MOVE_DOWN&&b?this._player.move(Ya.DOWN):a==$.MOVE_UP&&b?this._player.move(Ya.UP):a==$.MOVE_LEFT&&b?this._player.move(Ya.LEFT):a==$.MOVE_RIGHT&&b&&this._player.move(Ya.RIGHT))},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",1)},_initWorld:function(){U.prototype._initWorld.call(this);this._grid=new Ka(this._levelNumber);this._enemies=[];this._pickups=[];
this._walls=[];this._elementManager.addElement(new n({asset:"nick_arcade_background_zoomed-in_blurred"}));for(var a=0,b=Math.floor(Ka.COL_COUNT/2)+1;a<b;)for(var c=a++,d=0,e=Math.floor(Ka.ROW_COUNT/2)+1;d<e;){var f=d++,f=this._grid.getPixelPos(2*c,2*f);this._elementManager.addElement(new n({asset:"tile_ground_1",x:f.x+25,y:f.y+25}))}this._generateMap();this._transition=this._elementManager.addElement(new Bm(this._levelNumber,{color:0,originY:0,y:-280,sizeX:750,sizeY:0,alpha:1}),"layer_fg")},_generateMap:function(){for(var a=
0,b=this._enemies;a<b.length;){var c=b[a];++a;this._elementManager.removeElement(c);c.dispose()}a=0;for(b=this._pickups;a<b.length;)c=b[a],++a,this._elementManager.removeElement(c),c.dispose();a=0;for(b=this._walls;a<b.length;)c=b[a],++a,this._elementManager.removeElement(c),c.dispose();null!=this._door&&(this._elementManager.removeElement(this._door),this._door.dispose());null!=this._spawn&&(this._elementManager.removeElement(this._spawn),this._spawn.dispose());null!=this._player&&(this._elementManager.removeElement(this._player),
this._player.dispose());this._flagGameComplete=!1;this._enemies=[];this._pickups=[];this._walls=[];this._timer=30;this._spawnTimer=1;this._grid=new Ka(this._levelNumber);this._enemyTextures=["andre","bev","ashlor","dahlia"];a=0;for(b=Ka.COL_COUNT;a<b;)for(var c=a++,d=0,e=Ka.ROW_COUNT;d<e;){var f=d++,g=this._grid.getPixelPos(c,f);"X"==this._grid.getGridChar(c,f)&&this._walls.push(this._elementManager.addElement(new n({asset:0.5>Math.random()?"barrier_hedge_1":"barrier_hedge_3",x:g.x,y:g.y})))}a=0;
for(b=this._grid.getPellets();a<b.length;)c=b[a],++a,d=this._grid.getPixelPos(c.x,c.y),this._pickups.push(this._elementManager.addElement(new Gj(c.x,c.y,Ag.BASIC,{x:d.x,y:d.y,scale:1})));a=0;for(b=this._grid.getPowerups();a<b.length;)c=b[a],++a,d=this._grid.getPixelPos(c.x,c.y),this._pickups.push(this._elementManager.addElement(new Gj(c.x,c.y,Ag.POWERUP,{x:d.x,y:d.y,scale:1})));a=0;for(b=this._grid.getFruit();a<b.length;)c=b[a],++a,d=this._grid.getPixelPos(c.x,c.y),this._pickups.push(this._elementManager.addElement(new Gj(c.x,
c.y,Ag.FRUIT,{x:d.x,y:d.y,scale:1})));a=this._grid.getPixelPos(7,8);this._player=this._elementManager.addElement(new Cm(7,8,this._grid,this._tween,{asset:"player_ollie_1",x:a.x,y:a.y}));a=this._grid.getPixelPos(this._grid.get_enemySpawn().x,this._grid.get_enemySpawn().y);this._spawn=this._elementManager.addElement(new n({x:a.x,y:a.y,asset:"power_pack_off"}));this._door=this._elementManager.addElement(new ue({x:a.x,y:a.y+55,asset:"anim/fence_1",scale:0.5}));this._door.addAnimation("down",["anim/fence_1",
"anim/fence_2","anim/fence_3","anim/fence_4"]);this._door.addAnimation("up",["anim/fence_3","anim/fence_2","anim/fence_1"])},_onGenerationComplete:function(){P.worldGenerationComplete.dispatch();0==this._levelNumber?ha.start(v(this,this._showTutorial),0.32):this._transition.animateOut()},__class__:Rk});var ih=i["world.minigame_packmaze.elements.ENEMY_STATE"]={__ename__:["world","minigame_packmaze","elements","ENEMY_STATE"],__constructs__:["SPAWN","MOVING"]};ih.SPAWN=["SPAWN",0];ih.SPAWN.toString=
r;ih.SPAWN.__enum__=ih;ih.MOVING=["MOVING",1];ih.MOVING.toString=r;ih.MOVING.__enum__=ih;var Am=function(a,b,c,d,e){this._flagCanBeEaten=!1;fh.call(this,{});this.baseAsset=e;this.addAnimation("move",["anim/"+e+"_f_1","anim/"+e+"_f_2","anim/"+e+"_f_3"]);this.addAnimation("hide",["anim/"+e+"_e_1","anim/"+e+"_e_2","anim/"+e+"_e_3"]);this.addAnimation("collect",["anim/pop_1","anim/pop_2","anim/pop_3"]);this.setFps(10);this.gridX=a;this.gridY=b;this._tween=d;this._grid=c;this.set_scale(0.5);this._speed=
0.5;this._timer=0;this._state=ih.SPAWN;this._move=Ya.DOWN;a=this._grid.getPixelPos(this.gridX,this.gridY);this.pos.x=a.x;this.pos.y=a.y;this.animate("move");this._doMove()};i["world.minigame_packmaze.elements.EnemyElement"]=Am;Am.__name__=["world","minigame_packmaze","elements","EnemyElement"];Am.__super__=ue;Am.prototype=z(ue.prototype,{setVulnerable:function(a){a?(this.animate("hide"),this._timer=5,this._flagCanBeEaten=!0):(this.animate("move"),this._flagCanBeEaten=!1)},collect:function(){this.animate("collect",
1);this._flagCanBeEaten=!1},dispose:function(){ue.prototype.dispose.call(this);this._tween.stop(this);this._flagCanBeEaten=!1},update:function(a){ue.prototype.update.call(this,a);0<this._timer&&(this._timer-=a,0>=this._timer&&this.setVulnerable(!1))},_onAnimationComplete:function(){"collect"==this.currentAnimation&&(this.doDelete=!0)},canBeEaten:function(){return this._flagCanBeEaten},_doMove:function(){if(this._state!=ih.SPAWN&&0.1>M.random()){var a=[];this._grid.isWall(this.gridX,this.gridY-1)||
a.push(Ya.UP);this._grid.isWall(this.gridX,this.gridY+1)||a.push(Ya.DOWN);this._grid.isWall(this.gridX-1,this.gridY)||a.push(Ya.LEFT);this._grid.isWall(this.gridX+1,this.gridY)||a.push(Ya.RIGHT);this._move=a[M.randomInt(0,a.length-1)]}if(null!=this._move){switch(this._move[1]){case 0:this.nextX=this.gridX;this.nextY=this.gridY;break;case 1:this.scaleX=0.5;this.nextX=this.gridX-1;this.nextY=this.gridY;break;case 2:this.scaleX=-0.5;this.nextX=this.gridX+1;this.nextY=this.gridY;break;case 3:this.nextX=
this.gridX;this.nextY=this.gridY-1;break;case 4:this.nextX=this.gridX,this.nextY=this.gridY+1}0<=this.nextX&&this.nextX<Ka.COL_COUNT&&0<=this.nextY&&this.nextY<Ka.ROW_COUNT?this._grid.isWall(this.nextX,this.nextY)?(a=[],this._state!=ih.SPAWN&&(this._grid.isWall(this.gridX,this.gridY-1)||a.push(Ya.UP),this._grid.isWall(this.gridX,this.gridY+1)||a.push(Ya.DOWN)),this._grid.isWall(this.gridX-1,this.gridY)||a.push(Ya.LEFT),this._grid.isWall(this.gridX+1,this.gridY)||a.push(Ya.RIGHT),this._state=ih.MOVING,
0<a.length?(this._move=a[M.randomInt(0,a.length-1)],this._doMove()):this._tweenToGrid()):this._tweenToGrid():this._tweenToGrid()}},_tweenToGrid:function(){var a=this,b=this._grid.getPixelPos(this.nextX,this.nextY),c=(b.x-this.pos.x)/2,d=(b.y-this.pos.y)/2;this._tween.tween({target:this,duration:this._speed/2,overwrite:!0,ease:G.linear},{x:this.get_x()+c,y:this.get_y()+d}).onComplete(function(){a.doDelete||(0>a.nextX?a.nextX=Ka.COL_COUNT-1:a.nextX>=Ka.COL_COUNT?a.nextX=0:0>a.nextY?a.nextY=Ka.ROW_COUNT-
1:a.nextY>=Ka.ROW_COUNT&&(a.nextY=0),b=a._grid.getPixelPos(a.nextX,a.nextY),a.pos.x=b.x-c,a.pos.y=b.y-d,a.gridX=a.nextX,a.gridY=a.nextY,a._tween.tween({target:a,duration:a._speed/2,ease:G.linear},{x:b.x,y:b.y}).onComplete(v(a,a._doMove)))})},__class__:Am});var Ka=function(a){this._levelNumber=0;this._pellets=[];this._powerups=[];this._fruit=[];this._levelNumber=a;Ka._grid=Ka._basicGrid[this._levelNumber%3];this._parse()};i["world.minigame_packmaze.elements.Grid"]=Ka;Ka.__name__=["world","minigame_packmaze",
"elements","Grid"];Ka.prototype={get_enemySpawn:function(){return this._enemySpawn},_parse:function(){for(var a=0,b=Ka.ROW_COUNT;a<b;)for(var c=a++,d=0,e=Ka.COL_COUNT;d<e;){var f=d++;switch(Ka._grid[c].charAt(f)){case ".":switch(m.getString("STRING_BOOSTER")){case "PACK_MAZE_EXTRA_PICKUPS":if(M.randomFloat(0,1)<Ka._poweredFruitChance){this._fruit.push({x:f,y:c});continue}break;case "PACK_MAZE_EXTRA_POWERUPS":if(M.randomFloat(0,1)<Ka._poweredPowerupChance){this._powerups.push({x:f,y:c});continue}}this._pellets.push({x:f,
y:c});break;case "F":this._fruit.push({x:f,y:c});break;case "O":this._powerups.push({x:f,y:c});break;case "e":this._enemySpawn={x:f,y:c}}}},isWall:function(a,b){return 0>a||a>=Ka.COL_COUNT||0>b||b>=Ka.ROW_COUNT?!1:"X"!=Ka._grid[b].charAt(a)?this.isSpawning?!1:"_"==Ka._grid[b].charAt(a):!0},getPellets:function(){return this._pellets},getPowerups:function(){return this._powerups},getFruit:function(){return this._fruit},getGridChar:function(a,b){return 0>a||a>=Ka.COL_COUNT||0>b||b>=Ka.ROW_COUNT?"":Ka._grid[b].charAt(a)},
getPixelPos:function(a,b){return{x:Ka.START_X+Ka.COL_PIXELS*a,y:Ka.START_Y+Ka.ROW_PIXELS*b}},__class__:Ka,__properties__:{get_enemySpawn:"get_enemySpawn"}};var Bm=function(a,b){this._fadeSpeed=0.1;this._speed=0.01;Ed.call(this,b);this._level=a;this._levelText=this.addChild(new V({text:"pack_maze.level",y:250}));this._levelText.setVariables([this._level+1]);this._levelText.visible=!1};i["world.minigame_packmaze.elements.PackMazeLevelTransition"]=Bm;Bm.__name__=["world","minigame_packmaze","elements",
"PackMazeLevelTransition"];Bm.__super__=Ed;Bm.prototype=z(Ed.prototype,{setLevel:function(a){this._levelText.setVariables([a])},animateIn:function(){var a=this;m.setBool("BOOL_PAUSED",!0);this.sizeY=0;this.alpha=1;this._levelText.visible=!1;for(var b=0,c=0;55>c;)c++,ha.start(function(){a.sizeY+=9},b+this._speed),b+=this._speed;ha.start(function(){a._levelText.visible=!0;s.playSound("ollie_next_level")},b);ha.start(function(){a._levelText.visible=!1},b+1.5);ha.start(v(this,this.animateOut),b+2)},animateOut:function(){for(var a=
this,b=0,c=0;8>c;)c++,ha.start(function(){a.alpha-=0.125},b+this._fadeSpeed),b+=this._fadeSpeed;ha.start(function(){m.setBool("BOOL_PAUSED",!1)},8*this._fadeSpeed)},__class__:Bm});var Ag=i["world.minigame_packmaze.elements.PICKUP_TYPE"]={__ename__:["world","minigame_packmaze","elements","PICKUP_TYPE"],__constructs__:["BASIC","POWERUP","FRUIT"]};Ag.BASIC=["BASIC",0];Ag.BASIC.toString=r;Ag.BASIC.__enum__=Ag;Ag.POWERUP=["POWERUP",1];Ag.POWERUP.toString=r;Ag.POWERUP.__enum__=Ag;Ag.FRUIT=["FRUIT",2];Ag.FRUIT.toString=
r;Ag.FRUIT.__enum__=Ag;var Gj=function(a,b,c,d){fh.call(this,d);this.gridX=a;this.gridY=b;this._type=c;this._flagDouble="DOUBLE_POINTS"==m.getString("STRING_BOOSTER");this.setFps(10);this.set_scale(0.5);switch(this._type[1]){case 0:this.setAsset("anim/pellet_1");this.addAnimation("collect","anim/pellet_1,anim/pellet_1,anim/pellet_1,anim/pellet_1,anim/pellet_2,anim/pellet_3".split(","));break;case 1:this.setAsset("anim/cheeto_burst_1");this.addAnimation("collect","anim/cheeto_burst_1,anim/cheeto_burst_1,anim/cheeto_burst_1,anim/cheeto_burst_1,anim/cheeto_burst_2,anim/cheeto_burst_3".split(","));
break;case 2:this.set_scale(1),this.setAsset("anim/wall_ball_1"),this.addAnimation("collect",["anim/pop_1","anim/pop_2","anim/pop_3"]),this.addAnimation("idle",["anim/wall_ball_1","anim/wall_ball_2","anim/wall_ball_3"]),this.animate("idle")}this._isActive=!0};i["world.minigame_packmaze.elements.PickupElement"]=Gj;Gj.__name__=["world","minigame_packmaze","elements","PickupElement"];Gj.__super__=ue;Gj.prototype=z(ue.prototype,{collect:function(){switch(this._type[1]){case 0:m.modifyInt("INT_SCORE",
this._flagDouble?200:100);s.playSound("ollie_pellet_consumption");break;case 1:m.modifyInt("INT_SCORE",this._flagDouble?200:100);P.pacmanPowerup.dispatch();s.playSound("ollie_powerup_grab");break;case 2:m.modifyInt("INT_SCORE",this._flagDouble?2E3:1E3)}this.animate("collect",1);this._isActive=!1},_onAnimationComplete:function(){"collect"==this.currentAnimation&&(this.alpha=0)},isActive:function(){return this._isActive},__class__:Gj});var ji=function(a){fh.call(this,a);this.setFps(10);this.addAnimation("idle",
["anim/wall_ball_1","anim/wall_ball_2","anim/wall_ball_3","anim/wall_ball_2","anim/wall_ball_1"]);this.animate("idle")};i["world.minigame_packmaze.elements.PickupElementMenu"]=ji;ji.__name__=["world","minigame_packmaze","elements","PickupElementMenu"];ji.__super__=ue;ji.prototype=z(ue.prototype,{__class__:ji});var of=i["world.minigame_packmaze.elements.PLAYER_STATE"]={__ename__:["world","minigame_packmaze","elements","PLAYER_STATE"],__constructs__:["POWERUP","HURT","MOVING"]};of.POWERUP=["POWERUP",
0];of.POWERUP.toString=r;of.POWERUP.__enum__=of;of.HURT=["HURT",1];of.HURT.toString=r;of.HURT.__enum__=of;of.MOVING=["MOVING",2];of.MOVING.toString=r;of.MOVING.__enum__=of;var Ya=i["world.minigame_packmaze.elements.MOVE_DIR"]={__ename__:["world","minigame_packmaze","elements","MOVE_DIR"],__constructs__:["NONE","LEFT","RIGHT","UP","DOWN"]};Ya.NONE=["NONE",0];Ya.NONE.toString=r;Ya.NONE.__enum__=Ya;Ya.LEFT=["LEFT",1];Ya.LEFT.toString=r;Ya.LEFT.__enum__=Ya;Ya.RIGHT=["RIGHT",2];Ya.RIGHT.toString=r;Ya.RIGHT.__enum__=
Ya;Ya.UP=["UP",3];Ya.UP.toString=r;Ya.UP.__enum__=Ya;Ya.DOWN=["DOWN",4];Ya.DOWN.toString=r;Ya.DOWN.__enum__=Ya;var Cm=function(a,b,c,d,e){this._doMovement=!0;fh.call(this,e);this.gridX=a;this.gridY=b;this._tween=d;this.grid=c;this._speed=0.5;this._state=of.MOVING;this.set_scale(0.5);this.addAnimation("move",["anim/ollie_frame_1","anim/ollie_frame_2","anim/ollie_frame_3"]);this.addAnimation("hurt",["anim/ollie_frame_1-end","anim/ollie_frame_2-end","anim/ollie_frame_3-end"]);this.addAnimation("powerup",
["anim/ollie_frame_1-pickup","anim/ollie_frame_2-pickup","anim/ollie_frame_3-pickup"]);this.setFps(10);this.animate("move")};i["world.minigame_packmaze.elements.PlayerElement"]=Cm;Cm.__name__=["world","minigame_packmaze","elements","PlayerElement"];Cm.__super__=ue;Cm.prototype=z(ue.prototype,{_setState:function(a){this._state=a;switch(this._state[1]){case 0:this.animate("powerup");this._timer=5;this._speed=0.25;break;case 1:this.animate("hurt");this._timer=1.5;this._speed=1;break;case 2:this.animate("move"),
this._speed=0.5}},update:function(a){ue.prototype.update.call(this,a);switch(this._state[1]){case 0:this._timer-=a;0>=this._timer&&this._setState(of.MOVING);break;case 1:this._timer-=a,0>=this._timer&&this._setState(of.MOVING)}},collideWithEnemy:function(a){this._state==of.POWERUP&&a.canBeEaten()?(m.modifyInt("INT_SCORE",1E3),a.collect(),s.playSound("ollie_next_level")):this._state==of.MOVING&&(this._setState(of.HURT),m.modifyInt("INT_HEALTH",-1),s.playSound("ollie_spawn_enemy"),a.doDelete=!0)},getPowerup:function(){this._setState(of.POWERUP)},
move:function(a){this._move!=a&&((this._move==Ya.UP&&a==Ya.DOWN||this._move==Ya.DOWN&&a==Ya.UP||this._move==Ya.LEFT&&a==Ya.RIGHT||this._move==Ya.RIGHT&&a==Ya.LEFT)&&this._tween.stop(this),this._move=a,this._tween.hasTween(this)||this._doMove())},_doMove:function(){if(this._doMovement){switch(this._move[1]){case 0:this.nextX=this.gridX;this.nextY=this.gridY;break;case 1:this.scaleX=0.5;this.nextX=this.gridX-1;this.nextY=this.gridY;break;case 2:this.scaleX=-0.5;this.nextX=this.gridX+1;this.nextY=this.gridY;
break;case 3:this.nextX=this.gridX;this.nextY=this.gridY-1;break;case 4:this.nextX=this.gridX,this.nextY=this.gridY+1}0<=this.nextX&&this.nextX<Ka.COL_COUNT&&0<=this.nextY&&this.nextY<Ka.ROW_COUNT?this.grid.isWall(this.nextX,this.nextY)||this._tweenToGrid():this._tweenToGrid()}},_tweenToGrid:function(){var a=this,b=this.grid.getPixelPos(this.nextX,this.nextY),c=(b.x-this.pos.x)/2,d=(b.y-this.pos.y)/2;this._tween.tween({target:this,duration:this._speed/2,overwrite:!0,ease:G.linear},{x:this.get_x()+
c,y:this.get_y()+d}).onComplete(function(){0>a.nextX?a.nextX=Ka.COL_COUNT-1:a.nextX>=Ka.COL_COUNT?a.nextX=0:0>a.nextY?a.nextY=Ka.ROW_COUNT-1:a.nextY>=Ka.ROW_COUNT&&(a.nextY=0);b=a.grid.getPixelPos(a.nextX,a.nextY);a.pos.x=b.x-c;a.pos.y=b.y-d;a.gridX=a.nextX;a.gridY=a.nextY;a._tween.tween({target:a,duration:a._speed/2,ease:G.linear},{x:b.x,y:b.y}).onComplete(v(a,a._doMove))})},dispose:function(){ue.prototype.dispose.call(this);this._tween.stop(this);this._doMovement=!1},__class__:Cm});var Gh=function(a){this._pieTypes=
"baby,lana,leni,lincoln,lisa,lola,lori,lucy,luna,lynn,none,none,none,none,none,none,none,none,none,none".split(",");this._xOffset=0;this._particleLayer=null;this._targets=[];this._heldPie=null;this._activePies=[];this._luan=this._pieSplat=null;this._flagGameComplete=this._flagFrenzy=!1;this._timer=this._spawnTimer=0;U.call(this,a);this._elementManager.addLayer("layer_front");this._xOffset=1.4>fb.STAGE_WIDTH/560?-80:0};i["world.minigame_pies.WorldPieToss"]=Gh;Gh.__name__=["world","minigame_pies","WorldPieToss"];
Gh.__super__=U;Gh.prototype=z(U.prototype,{start:function(){U.prototype.start.call(this)},dispose:function(){U.prototype.dispose.call(this)},_setState:function(a){this._state=a;switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld();this._onGenerationComplete();break;case 3:ha.start(function(){m.setBool("BOOL_GAME_WIN",!0)},1)}},update:function(a){if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&this._setState(T.INITIALIZING);break;case 2:this._tween.update(a);
this._elementManager.update(a);this._timer-=a;if(0>=this._timer){this._timer=0;m.setFloat("FLOAT_TIME",this._timer);this._setState(T.GAME_OVER);break}m.setFloat("FLOAT_TIME",this._timer);this._spawnTimer-=a;if(0>=this._spawnTimer){this._spawnTimer=this._flagFrenzy?M.randomFloat(0,0.5):M.randomFloat(0.5,1);M.shuffleArray(this._targets);for(var b=0,c=this._targets;b<c.length;){var d=c[b];++b;if(!d.isActive()){b=this._getSpawnLoc();null!=b&&d.spawn(b.x,b.y,this._xOffset);break}}}0==this._activePies.length&&
this._setState(T.GAME_OVER);this._handleTouch(a);break;case 3:this._tween.update(a),this._elementManager.update(a)}},_getSpawnLoc:function(){for(var a=[],b=0;3>b;)for(var c=b++,d=0;3>d;){for(var e=d++,f=!1,g=0,j=this._targets;g<j.length;){var h=j[g];++g;if(h.isActive()&&h.rowX==c&&h.rowY==e){f=!0;break}}f||a.push({x:c,y:e})}return a[M.randomInt(0,a.length-1)]},_addEventListeners:function(){U.prototype._addEventListeners.call(this);P.updateZSort.add(v(this,this._updateZSort));P.pieSplat.add(v(this,
this._onPieDrop))},_removeEventListeners:function(){U.prototype._removeEventListeners.call(this);P.updateZSort.remove(v(this,this._updateZSort));P.pieSplat.remove(v(this,this._onPieDrop))},_onPieDrop:function(a){var b=1E5,c,d=-1;c=-1;for(var e=0;3>e;)for(var f=e++,g=0;3>g;){var j=g++;this._inputPos.to(Gh.HOLE_POSITIONS[f][j].x,Gh.HOLE_POSITIONS[f][j].y-50);var h=Fd.distBetweenPoints(a.pos,this._inputPos);h<b&&(b=h,d=f,c=j)}e=b=!1;f=0;for(g=this._targets;f<g.length;)j=g[f],++f,j.canHit()&&j.rowX==
d&&j.rowY==c?(e=j.collideWithPie(a.getType()),b=!0):"LOUD_LAUGHS_EXPLODING_PIES"==m.getString("STRING_BOOSTER")&&j.canHit()&&1>=Math.abs(j.rowX-d)&&1>=Math.abs(j.rowY-c)&&(j.collideWithPie(a.getType()),b=!0);if(!b||!e)this._elementManager.addElement(this._requestFloatingText("loud_laughs.miss",a.get_x(),a.get_y()-100)),this._luan.animate("negative",1),this._luan.queueAnimation("idle");else{this._elementManager.addElement(this._requestFloatingText("loud_laughs.match",a.get_x(),a.get_y()-100));s.playSound("positive");
this._luan.animate("positive",1);this._luan.queueAnimation("idle");c=0;for(d=M.randomInt(6,10);c<d;)c++,this._elementManager.addElement(new Si(this._tween,{x:a.get_x(),y:a.get_y()}));if("none"!=a.getType()){c=0;for(d=M.randomInt(10,15);c<d;)c++,this._elementManager.addElement(new Si(this._tween,{x:M.randomFloat(-fb.STAGE_CENTER_X,fb.STAGE_CENTER_X),y:-280},M.randomFloat(2.5,3.5)),"layer_front")}}this._pieSplat.pos.toPoint(a.pos);"LOUD_LAUGHS_EXPLODING_PIES"==m.getString("STRING_BOOSTER")?this._pieSplat.setSkin("splat_explosive",
!0):"none"==a.getType()?this._pieSplat.setSkin("splat_lori",!0):this._pieSplat.setSkin("splat_"+a.getType(),!0);this._pieSplat.animate("animation",1);a.destroy(b);Z.remove(this._activePies,a);this._activePies.push(this._elementManager.addElement(new Ti(this._tween,this._getPieType(),{x:a.startX,y:a.startY,z:-150,usePerspective:!1,asset:"pies/pie_lincoln"})))},_updateZSort:function(){this._elementManager.updateZSort("layer_world")},_handleTouch:function(){if(!(m.getBool("BOOL_PAUSED")||this._state!=
T.GAMEPLAY)&&0<w.multiTouch.length)for(var a=0,b=w.multiTouch;a<b.length;){var c=b[a];++a;if(c.phase==Gb.DOWN){if(1==w.multiTouch.length){this._elementManager.camera.getWorldPositionOfScreenPoint(c.get_currentPos().x,c.get_currentPos().y,0,this._inputPos);for(var c=0,d=this._activePies;c<d.length;){var e=d[c];++c;if(Fd.distBetweenPoints(e.pos,this._inputPos)<e.get_width()/2&&e.canThrow()){this._heldPie=e;this._heldPie.grab();this._heldPie.updateTarget(this._inputPos.x,this._inputPos.y);break}}}}else c.phase==
Gb.MOVED?(this._elementManager.camera.getWorldPositionOfScreenPoint(c.get_currentPos().x,c.get_currentPos().y,0,this._inputPos),1==w.multiTouch.length&&null!=this._heldPie&&this._heldPie.updateTarget(Fd.clamp(this._inputPos.x,-240+this._xOffset,240+this._xOffset),Fd.clamp(this._inputPos.y,-170,150))):c.phase==Gb.UP&&null!=this._heldPie&&(this._elementManager.camera.getWorldPositionOfScreenPoint(c.get_currentPos().x,c.get_currentPos().y,0,this._inputPos),this._heldPie.updateTarget(this._inputPos.x,
this._inputPos.y),this._heldPie.drop(),this._heldPie=null)}},_onInput:function(){m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY||this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos)},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",1);this._cacheManager.addCache(this._TEXT_CACHE,Ri,3)},_initWorld:function(){U.prototype._initWorld.call(this);this._flagGameComplete=!1;this._timer=30;m.setInt("INT_SCORE",0);this._flagFrenzy=
"LOUD_LAUGHS_FRENZY_MODE"==m.getString("STRING_BOOSTER");this._targets=[];this._activePies=[];this._elementManager.addElement(new n({asset:"nick_arcade_background_zoomed-in_blurred"}),"layer_bg");this._elementManager.addElement(new n({asset:"machine_back",x:this._xOffset,y:-75}),"layer_bg");this._elementManager.addElement(new n({asset:"machine_mid_3",x:2+this._xOffset,y:-93,z:1,usePerspective:!1}));this._elementManager.addElement(new n({asset:"machine_mid_2",x:1+this._xOffset,y:-24,z:-2.5,usePerspective:!1}));
this._elementManager.addElement(new n({asset:"machine_mid_1",x:this._xOffset,y:82,z:-5.5,usePerspective:!1}));this._elementManager.addElement(new n({asset:"machine_bottom",x:this._xOffset,y:200,z:-8.5,usePerspective:!1}));this._targets.push(this._elementManager.addElement(new Df(this._tween,"baby",this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_character_boards_top",x:this._xOffset,usePerspective:!1})),{})));this._targets.push(this._elementManager.addElement(new Df(this._tween,
"lana",this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_character_boards_top",x:this._xOffset,usePerspective:!1})),{})));this._targets.push(this._elementManager.addElement(new Df(this._tween,"leni",this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_character_boards_top",x:this._xOffset,usePerspective:!1})),{})));this._targets.push(this._elementManager.addElement(new Df(this._tween,"lincoln",this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_character_boards_top",
x:this._xOffset,usePerspective:!1})),{})));this._targets.push(this._elementManager.addElement(new Df(this._tween,"lisa",this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_character_boards_top",x:this._xOffset,usePerspective:!1})),{})));this._targets.push(this._elementManager.addElement(new Df(this._tween,"lola",this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_character_boards_top",x:this._xOffset,usePerspective:!1})),{})));this._targets.push(this._elementManager.addElement(new Df(this._tween,
"lori",this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_character_boards_top",x:this._xOffset,usePerspective:!1})),{})));this._targets.push(this._elementManager.addElement(new Df(this._tween,"lucy",this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_character_boards_top",x:this._xOffset,usePerspective:!1})),{})));this._targets.push(this._elementManager.addElement(new Df(this._tween,"luna",this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_character_boards_top",
x:this._xOffset,usePerspective:!1})),{})));this._targets.push(this._elementManager.addElement(new Df(this._tween,"chicken",this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_character_boards_top",x:this._xOffset,usePerspective:!1})),{})));this._particleLayer=this._elementManager.addElement(new n({}));this._elementManager.addElement(new n({asset:"machine-front",x:this._xOffset,z:-99,usePerspective:!1}),"layer_front");this._pieSplat=this._elementManager.addElement(new E({library:"spine/nick_arcade_loudhouse_laugh_pie_splat",
x:this._xOffset,z:-100,usePerspective:!1}));this._elementManager.addElement(new n({asset:"Luan_chair",x:440+this._xOffset,y:185}),"layer_front");this._luan=this._elementManager.addElement(new E({library:"spine/arcade_loudhouse_luan",x:this._xOffset,y:0}),"layer_front");this._luan.animate("idle");this._activePies.push(this._elementManager.addElement(new Ti(this._tween,this._getPieType(),{x:-170+this._xOffset,y:200,z:-150,usePerspective:!1,asset:"pies/pie_lincoln"})));this._activePies.push(this._elementManager.addElement(new Ti(this._tween,
this._getPieType(),{x:-20+this._xOffset,y:200,z:-150,usePerspective:!1,asset:"pie_1"})));this._activePies.push(this._elementManager.addElement(new Ti(this._tween,this._getPieType(),{x:130+this._xOffset,y:200,z:-150,usePerspective:!1,asset:"pie_1"})))},_getPieType:function(){var a=M.randomObject(this._pieTypes);"none"!=a&&Z.remove(this._pieTypes,a);return a},__class__:Gh});var vf=i["world.minigame_pies.elements.PIE_STATE"]={__ename__:["world","minigame_pies","elements","PIE_STATE"],__constructs__:["IDLE",
"HELD","FALLING"]};vf.IDLE=["IDLE",0];vf.IDLE.toString=r;vf.IDLE.__enum__=vf;vf.HELD=["HELD",1];vf.HELD.toString=r;vf.HELD.__enum__=vf;vf.FALLING=["FALLING",2];vf.FALLING.toString=r;vf.FALLING.__enum__=vf;var Ti=function(a,b,c){this.startX=this.startY=0;this._pieType="baby";this.arcOffset=0;this._target=this._workPoint=this._velocity=null;this._state=vf.IDLE;this._tween=null;n.call(this,c);this.startX=this.get_x();this.startY=this.get_y();this._tween=a;this._workPoint=Aa.request();this._target=Aa.request();
this._velocity=Aa.request();this.arcOffset=0;this._pieType=b;switch(this._pieType){case "baby":this.setAsset("pies/pie_baby");break;case "lana":this.setAsset("pies/pie_lana");break;case "leni":this.setAsset("pies/pie_leni");break;case "lincoln":this.setAsset("pies/pie_lincoln");break;case "lisa":this.setAsset("pies/pie_lisa");break;case "lola":this.setAsset("pies/pie_lola");break;case "lori":this.setAsset("pies/pie_lori");break;case "lucy":this.setAsset("pies/pie_lucy");break;case "luna":this.setAsset("pies/pie_luna");
break;case "lynn":this.setAsset("pies/pie_lynn");break;default:this.setAsset("pies/pie_regular")}this._state=vf.IDLE;Ub.easeBounceIn(this,this._tween)};i["world.minigame_pies.elements.PieElement"]=Ti;Ti.__name__=["world","minigame_pies","elements","PieElement"];Ti.__super__=n;Ti.prototype=z(n.prototype,{_setState:function(a){var b=this;this._state=a;switch(this._state[1]){case 0:this.set_x(this.startX);this.set_y(this.startY);break;case 2:var a=this._tween,c=this.get_y()+50;a.tween({target:this,duration:0.2,
ease:G.inQuad},{y:c,rotation:160}).onComplete(function(){P.pieSplat.dispatch(b)})}},dispose:function(){this._workPoint.dispose();this._target.dispose();this._velocity.dispose();this._workPoint=this._target=this._velocity=null;n.prototype.dispose.call(this)},drop:function(){100<this.startY-this._target.y?(this._setState(vf.FALLING),s.playSound(M.randomObject(["arcade_minigame_toss","arcade_minigame_toss_02","arcade_minigame_toss_03","arcade_minigame_toss_04"]))):this._setState(vf.IDLE)},grab:function(){this._setState(vf.HELD);
s.playSound(M.randomObject(["arcade_minigame_toss","arcade_minigame_toss_02","arcade_minigame_toss_03","arcade_minigame_toss_04"]))},destroy:function(){this.doDelete=!0},updateTarget:function(a,b){this._target.to(a,b)},_updateMove:function(a){this._workPoint.to(this._target.x-this.pos.x,this._target.y-this.pos.y);this.set_x(this.get_x()+10*this._workPoint.x*a);this.set_y(this.get_y()+10*this._workPoint.y*a);this.set_scale(1+(this.get_y()-200)/800);this.rotation+=30*(this._workPoint.x/10-this.rotation)*
a},update:function(a){n.prototype.update.call(this,a);switch(this._state[1]){case 1:this._updateMove(a)}},canThrow:function(){return this._state==vf.IDLE},getType:function(){return this._pieType},__class__:Ti});var Si=function(a,b,c){this._tween=null;this._lifetime=0;var d=this;b.asset=this._getParticleAsset();this._tween=a;n.call(this,b);this.set_scale(0.75);this._lifetime=null==c?M.randomFloat(1.5,2):c;this._velocity={x:M.randomFloat(-5,5),y:M.randomFloat(-10,5)};this._rotationalVelocity=M.randomFloat(-10,
10);ha.start(function(){d._tween.tween({target:d,ease:G.outQuad,duration:d._lifetime/4},{alpha:0}).onComplete(function(){d.doDelete=!0})},3*this._lifetime/4)};i["world.minigame_pies.elements.SplatFx"]=Si;Si.__name__=["world","minigame_pies","elements","SplatFx"];Si.__super__=n;Si.prototype=z(n.prototype,{update:function(a){n.prototype.update.call(this,a);this._velocity.y+=Si._GRAVITY;this.pos.x+=this._velocity.x;this.pos.y+=this._velocity.y;this.rotation+=this._rotationalVelocity},_getParticleAsset:function(){return M.randomObject(["confetti_blue",
"confetti_green","confetti_orange","confetti_pink"])},__class__:Si});var Df=function(a,b,c,d){this._chickenStartY=0;this._flagIsChicken=!1;this._chicken=null;this._inFront=this._canHit=this._flagFrenzy=!1;this._bottomSpine=this._topSpine=this._pieSplat=null;this.rowX=this.rowY=0;this._type="baby";this._isActive=!1;this._tween=null;n.call(this,d);this._topSpine=c;this._tween=a;this._type=b;this._bottomSpine=this.addChild(new E({library:"spine/arcade_loudhouse_character_boards_bottom",usePerspective:!1}));
this._flagIsChicken="chicken"==this._type;this._chicken=this.addChild(new n({asset:"rubber_chicken",alpha:0,scale:1.1}));this._initImage();this.alpha=this._topSpine.alpha=0;this._canHit=this._isActive=this._inFront=!1;this._flagFrenzy="LOUD_LAUGHS_FRENZY_MODE"==m.getString("STRING_BOOSTER")};i["world.minigame_pies.elements.TargetElement"]=Df;Df.__name__=["world","minigame_pies","elements","TargetElement"];Df.__super__=n;Df.prototype=z(n.prototype,{get_depth:function(){return-(this.rowX+3*this.rowY)},
_initImage:function(){switch(this._type){case "chicken":this._bottomSpine.alpha=0;this._topSpine.alpha=0;this._chicken.alpha=1;break;case "lana":this._bottomSpine.setSkin("char_lana",!0);this._topSpine.setSkin("char_lana",!0);break;case "leni":this._bottomSpine.setSkin("char_leni",!0);this._topSpine.setSkin("char_leni",!0);break;case "lincoln":this._bottomSpine.setSkin("char_lincoln",!0);this._topSpine.setSkin("char_lincoln",!0);break;case "lisa":this._bottomSpine.setSkin("char_lisa",!0);this._topSpine.setSkin("char_lisa",
!0);break;case "lola":this._bottomSpine.setSkin("char_lola",!0);this._topSpine.setSkin("char_lola",!0);break;case "lori":this._bottomSpine.setSkin("char_lori",!0);this._topSpine.setSkin("char_lori",!0);break;case "lucy":this._bottomSpine.setSkin("char_lucy",!0);this._topSpine.setSkin("char_lucy",!0);break;case "luna":this._bottomSpine.setSkin("char_luna",!0);this._topSpine.setSkin("char_luna",!0);break;case "lynn":this._bottomSpine.setSkin("char_lynn",!0);this._topSpine.setSkin("char_lynn",!0);break;
default:this._bottomSpine.setSkin("char_baby",!0),this._topSpine.setSkin("char_baby",!0)}},spawn:function(a,b,c){this.rowX=a;this.rowY=b;"chicken"!=this._type&&this._topSpine.setAttachment("drip_"+this._type,null);this._chicken.setAsset("rubber_chicken");this.set_scale(0.8+b/10);this.pos.to(Gh.HOLE_POSITIONS[a][b].x+c,Gh.HOLE_POSITIONS[a][b].y+50);this.alpha=1;this._isActive=!0;this._inFront=this._canHit=!1;this._runUpDown()},collideWithPie:function(a){var b=this;s.playSound(M.randomObject(["blood_splat_03",
"blood_splat_04","blood_splat_05","loud_house_pie_splat"]));if(this._flagIsChicken)return this._chicken.setAsset("rubber_chicken_hit"),this._tween.tween({target:this,duration:0.25,ease:G.inBack,delay:0.5,thread:"z",overwrite:!0},{y:this._chickenStartY+100}).onComplete(function(){b.set_y(b._chickenStartY);b._inFront=!1;b._canHit=!1;b._isActive=!1;b.alpha=0}),m.modifyInt("INT_SCORE",1500*("DOUBLE_POINTS"==m.getString("STRING_BOOSTER")?2:1)),!0;this._bottomSpine.animate("hit",1);this._bottomSpine.queueAnimation("out_hit",
1);if("none"==a)return this._topSpine.animate("hit_incorrect",1),this._topSpine.queueAnimation("out",1),this._canHit=!1,m.modifyInt("INT_SCORE",1E3*("DOUBLE_POINTS"==m.getString("STRING_BOOSTER")?2:1)),this.hide(),!0;if(a==this._type)return this._topSpine.animate("hit",1),this._topSpine.queueAnimation("out_hit",1),this._canHit=!1,m.modifyInt("INT_SCORE",2E3*("DOUBLE_POINTS"==m.getString("STRING_BOOSTER")?2:1)),this.hide(),s.playSound("positive"),!0;this._topSpine.setAttachment("drip_"+this._type,
this._getSplat(a));this._topSpine.animate("hit_incorrect",1);this._topSpine.queueAnimation("out",1);this._canHit=!1;m.modifyInt("INT_SCORE",1E3*("DOUBLE_POINTS"==m.getString("STRING_BOOSTER")?2:1));this.hide();return!1},hide:function(){var a=this;this._topSpine.set_z(this.get_depth());P.updateZSort.dispatch();this._tween.tween({target:this,duration:0.25,ease:G.inQuad,thread:"z",overwrite:!0},{}).onComplete(function(){a._inFront=!1;a._canHit=!1});this._tween.tween({target:this,duration:1.5,ease:G.outQuad,
thread:"body",overwrite:!0},{}).onComplete(function(){a._isActive=!1;a.alpha=0})},_runUpDown:function(){var a=this;this._chickenStartY=this.get_y();this._tween.tween({target:this,duration:0.15,ease:G.inQuad,thread:"z",overwrite:!0},{}).onComplete(function(){a._inFront=!0;a._canHit=!0});this._flagIsChicken&&(this.set_y(this.get_y()+100),this._tween.tween({target:this,duration:0.3,ease:G.outBounce,thread:"chicken"},{y:this._chickenStartY-50}).onComplete(function(){a._tween.tween({target:a,duration:0.5,
ease:G.inQuad,delay:a._flagFrenzy?1.25:3.25,thread:"z",overwrite:!0},{y:a._chickenStartY+100}).onComplete(function(){a.set_y(a._chickenStartY)})}));this._bottomSpine.animate("in",1);this._bottomSpine.queueAnimation("idle");this._topSpine.animate("in",1);this._topSpine.queueAnimation("idle");this._topSpine.set_z(-1*(3*this.rowY+2.75));P.updateZSort.dispatch();this._tween.tween({target:this,duration:0.3,ease:G.inQuad,thread:"body"},{}).onComplete(function(){a._tween.tween({target:a,duration:0.1,ease:G.inQuad,
delay:a._flagFrenzy?1.25:3.25,thread:"z",overwrite:!0},{}).onComplete(function(){a._bottomSpine.animate("out",1);a._topSpine.animate("out",1);a._inFront=!1;a._canHit=!1});a._tween.tween({target:a,duration:0.5,ease:G.outQuad,delay:a._flagFrenzy?1.25:3.25,thread:"body"},{}).onComplete(function(){a._isActive=!1;a.alpha=0})})},update:function(a){n.prototype.update.call(this,a);this._topSpine.pos.to(this.get_x(),this.get_y(),this._topSpine.get_z());this._topSpine.alpha=this.alpha;this._topSpine.set_scale(this.scale)},
isActive:function(){return this._isActive},canHit:function(){return this._canHit?this._isActive:!1},_getSplat:function(a){switch(a){case "baby":return"drips_baby";case "lana":return"drips_lana";case "leni":return"drips_leni";case "lincoln":return"drips_lincoln";case "lisa":return"drips_lisa";case "lola":return"drips_lola";case "lucy":return"drips_lucy";case "luna":return"drips_luna";case "lynn":return"drips_lynn";default:return"drips_lori"}},__class__:Df});var Sk=function(a){U.call(this,a);this._elementManager.addLayer("layer_fg")};
i["world.minigame_rockem.WorldRockEm"]=Sk;Sk.__name__=["world","minigame_rockem","WorldRockEm"];Sk.__super__=U;Sk.prototype=z(U.prototype,{start:function(){U.prototype.start.call(this)},dispose:function(){this._enemyHealthBar=this._playerHealthBar=this._master=this._enemy=this._player=this._koBG=null;U.prototype.dispose.call(this)},_setState:function(a){var b=this;this._state=a;switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld();this._onGenerationComplete();break;case 3:ha.start(function(){m.setBool("BOOL_GAME_WIN",
!0);m.setInt("INT_SCORE",33*(b._player.health+(100-b._enemy.health)+Math.floor(100*b._timer/60))*("DOUBLE_POINTS"==m.getString("STRING_BOOSTER")?2:1))},1.5)}},update:function(a){if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&this._setState(T.INITIALIZING);break;case 2:this._tween.update(a);this._elementManager.update(a);this._timer-=a;0>=this._timer&&(this._timer=0);m.setFloat("FLOAT_TIME",this._timer);this._flagHoldingDuck&&this._player.startDuck();
(0>=this._player.health||0>=this._enemy.health)&&this._setState(T.GAME_OVER);break;case 3:this._tween.update(a),this._elementManager.update(a)}},_addEventListeners:function(){U.prototype._addEventListeners.call(this);P.playerAttack.add(v(this,this._onPlayerAttack));P.enemyAttack.add(v(this,this._onEnemyAttack));P.knockout.add(v(this,this._onKnockout))},_removeEventListeners:function(){U.prototype._removeEventListeners.call(this);P.playerAttack.remove(v(this,this._onPlayerAttack));P.enemyAttack.remove(v(this,
this._onEnemyAttack));P.knockout.remove(v(this,this._onKnockout))},_onPlayerAttack:function(a){var b=this;this._enemy.isVulnerable()&&(a==Xf.BASIC?(this._enemy.damage(5),s.playSound(M.randomObject(["sb_karate_chop","sb_karate_chop_02","sb_karate_chop_03"]))):ha.start(function(){"ROCKEM_ONE_PUNCH"==m.getString("STRING_BOOSTER")?b._enemy.damage(100):b._enemy.damage(50);s.playSound("sb_super");b._enemyHealthBar.updateHealth(b._enemy.health);b._elementManager.updateZSort("layer_world")},0.4));this._enemyHealthBar.updateHealth(this._enemy.health);
this._elementManager.updateZSort("layer_world")},_onKnockout:function(){s.playSound("karate_ko");this._tween.tween({target:this._koBG,duration:0.5,ease:G.inCirc,overwrite:!0},{alpha:1})},_onEnemyAttack:function(a){var b="ROCKEM_EXTRA_HEALTH"==m.getString("STRING_BOOSTER");this._player.isVulnerable()&&(a==Xf.BASIC?this._player.damage(b?6:10):this._player.damage(b?30:50));this._playerHealthBar.updateHealth(this._player.health);this._elementManager.updateZSort("layer_world")},_onInput:function(a,b){m.getBool("BOOL_PAUSED")||
this._state!=T.GAMEPLAY||(this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos),a==$.MOVE_LEFT&&(b?(this._flagHoldingDuck=!0,this._player.startDuck()):(this._flagHoldingDuck=!1,this._player.endDuck())),a==$.ATTACK&&b&&this._player.attack(Xf.BASIC),a==$.JUMP&&b&&100<=this._player.megaMeter&&this._player.attack(Xf.MEGA))},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",1)},_initWorld:function(){U.prototype._initWorld.call(this);
this._flagGameComplete=!1;this._timer=60;this._elementManager.addElement(new n({asset:"nick_arcade_background_zoomed-in_blurred"}),"layer_bg");var a=this._elementManager.addElement(new n({asset:"arcade_rockem_sockem_cab_bg",x:-5,y:-29,scale:0.44}),"layer_bg");this._elementManager.addElement(new E({library:"spine/arcade_rockem_sockem_bg",scale:0.87})).animate("cab_torches");this._master=this._elementManager.addElement(new E({library:"spine/arcade_rockem_sockem_master",x:a.get_x(),y:a.get_y()+15,scale:0.5}));
this._master.animate("master_idle");this._koBG=this._elementManager.addElement(new n({asset:"ko_background",x:a.get_x(),y:a.get_y(),scale:1}),"layer_bg");this._koBG.alpha=0;this._enemy=this._elementManager.addElement(new Hj(this._tween,{library:"spine/arcade_rockem_sockem_sandy",x:0,y:0,scale:0.87}));this._player=this._elementManager.addElement(new Ij(this._tween,{library:"spine/arcade_rockem_sockem_sb",x:0,y:0,scale:0.87}));this._elementManager.addElement(new n({asset:"VS",y:-210,scale:0.9}));this._playerHealthBar=
this._elementManager.addElement(new Ak(this._tween,{x:-285,y:-200,scale:0.87}),"layer_fg");this._enemyHealthBar=this._elementManager.addElement(new Ak(this._tween,{x:285,y:-200,scaleX:-0.87,scaleY:0.87}),"layer_fg");this._elementManager.addElement(new E({library:"spine/arcade_rockem_sockem_cab",scale:0.87}),"layer_fg").animate("cab_torches")},__class__:Sk});var Hj=function(a,b){this._left=!0;E.call(this,b);this._startingX=b.x;this._tween=a;this.megaMeter=this._timer=0;this.health=100;this._timeToAttack=
3;this._state=rb.NEAR;this._koSpecialAnim=!1;this.eventAnimationComplete.add(v(this,this._onEnemyAnimationComplete));this.animate("idle")};i["world.minigame_rockem.elements.EnemyElement"]=Hj;Hj.__name__=["world","minigame_rockem","elements","EnemyElement"];Hj.__super__=E;Hj.prototype=z(E.prototype,{pow:function(a){null==a&&(a=!1);null==this._powEffect&&(this._powEffect=this.addChild(new E({x:0,library:"spine/arcade_rockem_sockem_effect",scale:1})));this._powEffect.animate(a?"sandy_hit_ko":"sandy_hit_1",
1)},knockout:function(){P.knockout.dispatch();null==this._koEffect&&(this._koEffect=this.addChild(new E({x:200,library:"spine/ko_fx",scale:1})));this._koEffect.animate("K_O_Seq_2",1)},dispose:function(){this._powEffect=this._koEffect=null;E.prototype.dispose.call(this)},_onEnemyAnimationComplete:function(){},_setState:function(a){this._state=a;switch(this._state[1]){case 0:this.set_z(0);this.alpha=1;this.set_x(this._startingX);break;case 1:this.set_z(0);this.animate("block",1);break;case 2:this.set_z(-4);
break;case 3:this.set_z(0),this._timer=0.25,this.set_x(this._startingX)}},update:function(a){E.prototype.update.call(this,a);if(!(0>=this.health)){switch(this._state[1]){case 0:this._timeToAttack-=a;0>=this._timeToAttack&&(100<=this.megaMeter?(this.attack(Xf.MEGA),this._timeToAttack=3):0.25>M.random()?(this.startDuck(),this._timeToAttack=M.randomFloat(0.5,1.5)):(this.attack(Xf.BASIC),this._timeToAttack=M.randomFloat(1,3)));break;case 1:this._timeToAttack-=a;0>=this._timeToAttack&&(this.endDuck(),
this._timeToAttack=M.randomFloat(0.25,1));break;case 2:this._timer-=a;0>=this._timer&&this._setState(rb.NEAR);break;case 3:this._timer-=a,0>=this._timer&&(this._setState(rb.NEAR),0.5>Math.random()&&this.attack(Xf.BASIC))}this.megaMeter+=3.333*a;100<=this.megaMeter&&(this.megaMeter=100)}},getState:function(){return this._state},isVulnerable:function(){return this._state!=rb.NEAR?this._state==rb.ATTACKING:!0},damage:function(a){this.health-=a;ha.start(function(){s.playSound(M.randomObject(["metal_metal_hit_04",
"metal_metal_hit_06","metal_metal_hit_07"]))},0.15);0>=this.health?(this.pow(!0),this.knockout(),this.health=0,this._koSpecialAnim=0.5>Math.random(),this.animate(this._koSpecialAnim?"hit_ko-plankton":"hit_ko",1)):(this.pow(!1),this.animate("hit_1",1),this.queueAnimation("idle"));this._setState(rb.STUNNED)},startDuck:function(){this._state==rb.NEAR&&this._setState(rb.FAR)},endDuck:function(){this._state==rb.FAR&&(this.animate("block_out",1),this.queueAnimation("idle"),this._setState(rb.NEAR))},attack:function(a){this._state==
rb.ATTACKING||this._state==rb.STUNNED||(a==Xf.MEGA?(this._timer=0.7,this.megaMeter=0,this._setState(rb.ATTACKING),this.animate("punch_mega",1),this.queueAnimation("idle")):(this._timer=0.1,this._setState(rb.ATTACKING),s.playSound(M.randomObject(["sb_karate_chop","sb_karate_chop_02","sb_karate_chop_03"])),this._left?(this.animate("punch_1_in",1),this.queueAnimation("punch_1_out",1)):(this.animate("punch_2_in",1,1),this.queueAnimation("punch_2_out",1,1)),this.queueAnimation("idle"),this._left=!this._left),
P.enemyAttack.dispatch(a))},__class__:Hj});var Ak=function(a,b){n.call(this,b);this._tween=a;this._health=100;this._backgroundBar=this.addChild(new n({asset:"ui_health_bar",originX:0}));var c=this.addChild(new ii({}));c.setMask(0,-50,300,100);this._overlayBar=c.addChild(new n({asset:"ui_health_bar_fill",originX:0,x:0}))};i["world.minigame_rockem.elements.HealthBar"]=Ak;Ak.__name__=["world","minigame_rockem","elements","HealthBar"];Ak.__super__=n;Ak.prototype=z(n.prototype,{updateHealth:function(a){a>
this._health?(this._health=a,this._overlayBar.set_x(-this._overlayBar.get_width()+this._overlayBar.get_width()*(this._health/100))):a<this._health&&(this._health=a,this._tween.tween({target:this._overlayBar,duration:0.5,ease:G.outQuad,overwrite:!0},{x:-this._overlayBar.get_width()+this._overlayBar.get_width()*(this._health/100)}))},update:function(a){n.prototype.update.call(this,a)},__class__:Ak});var rb=i["world.minigame_rockem.elements.FIGHT_STATE"]={__ename__:["world","minigame_rockem","elements",
"FIGHT_STATE"],__constructs__:["NEAR","FAR","ATTACKING","STUNNED"]};rb.NEAR=["NEAR",0];rb.NEAR.toString=r;rb.NEAR.__enum__=rb;rb.FAR=["FAR",1];rb.FAR.toString=r;rb.FAR.__enum__=rb;rb.ATTACKING=["ATTACKING",2];rb.ATTACKING.toString=r;rb.ATTACKING.__enum__=rb;rb.STUNNED=["STUNNED",3];rb.STUNNED.toString=r;rb.STUNNED.__enum__=rb;var Xf=i["world.minigame_rockem.elements.ATTACK_TYPE"]={__ename__:["world","minigame_rockem","elements","ATTACK_TYPE"],__constructs__:["BASIC","MEGA"]};Xf.BASIC=["BASIC",0];
Xf.BASIC.toString=r;Xf.BASIC.__enum__=Xf;Xf.MEGA=["MEGA",1];Xf.MEGA.toString=r;Xf.MEGA.__enum__=Xf;var Ij=function(a,b){this._left=!0;E.call(this,b);this._startingX=b.x;this._tween=a;this.megaMeter=this._timer=0;this.health=100;this._state=rb.NEAR;this.animate("idle")};i["world.minigame_rockem.elements.PlayerElement"]=Ij;Ij.__name__=["world","minigame_rockem","elements","PlayerElement"];Ij.__super__=E;Ij.prototype=z(E.prototype,{pow:function(a){null==a&&(a=!1);null==this._powEffect&&(this._powEffect=
this.addChild(new E({x:0,library:"spine/arcade_rockem_sockem_effect",scale:1})));this._powEffect.animate(a?"sb_hit_ko":"sb_hit_1",1)},knockout:function(){P.knockout.dispatch();null==this._koEffect&&(this._koEffect=this.addChild(new E({x:-200,library:"spine/ko_fx",scale:1})));this._koEffect.animate("K_O_Seq_2",1)},dispose:function(){this._powEffect=this._koEffect=null;E.prototype.dispose.call(this)},_setState:function(a){this._state=a;switch(this._state[1]){case 0:this.set_z(0);this.alpha=1;this.set_x(this._startingX);
break;case 1:this.set_z(0);this.animate("block_in",1);break;case 2:this.set_z(-5);break;case 3:this.set_z(0),this._timer=0.25,this.set_x(this._startingX)}},update:function(a){E.prototype.update.call(this,a);switch(this._state[1]){case 2:this._timer-=a;0>=this._timer&&this._setState(rb.NEAR);break;case 3:this._timer-=a,0>=this._timer&&this._setState(rb.NEAR)}this.megaMeter+=10*a;100<=this.megaMeter&&(this.megaMeter=100);m.setInt("INT_POWER_LEVEL",this.megaMeter|0)},getState:function(){return this._state},
isVulnerable:function(){return this._state!=rb.NEAR?this._state==rb.ATTACKING:!0},damage:function(a){this.health-=a;ha.start(function(){s.playSound(M.randomObject(["metal_metal_hit_04","metal_metal_hit_06","metal_metal_hit_07"]))},0.15);0>=this.health?(this.pow(!0),this.knockout(),this.health=0,this.animate("hit_ko",1)):(this.pow(!1),this.animate("hit_1",1),this.queueAnimation("idle"));this.megaMeter+=a/2;this._setState(rb.STUNNED)},startDuck:function(){this._state==rb.NEAR&&this._setState(rb.FAR)},
endDuck:function(){this._state==rb.FAR&&(this.animate("block_out",1),this.queueAnimation("idle"),this._setState(rb.NEAR))},attack:function(a){this._state==rb.ATTACKING||this._state==rb.STUNNED||(a==Xf.MEGA?(this._timer=0.7,this.megaMeter=0,this.animate("punch_mega",1),this.queueAnimation("idle")):(this._timer=0.2,this._left?(this.animate("punch_1_in",1),this.queueAnimation("punch_1_out",1)):(this.animate("punch_2_in",1),this.queueAnimation("punch_2_out",1)),this.queueAnimation("idle"),this._left=
!this._left),this._setState(rb.ATTACKING),P.playerAttack.dispatch(a))},__class__:Ij});var Tk=function(a){this._difficulty=0;this._difficultyIncreaseRate=0.1;U.call(this,a);this._elementManager.addLayer("layer_player")};i["world.minigame_skate.WorldSkate"]=Tk;Tk.__name__=["world","minigame_skate","WorldSkate"];Tk.__super__=U;Tk.prototype=z(U.prototype,{start:function(){U.prototype.start.call(this)},dispose:function(){Uh.speedup.remove(v(this,this._onSpeedUp));this._obstacles=this._speedLines=this._road=
this._player=null;U.prototype.dispose.call(this)},_setState:function(a){this._state=a;switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld();this._onGenerationComplete();break;case 3:s.stopSound("casagrandes_skateboard"),m.setBool("BOOL_GAME_WIN",!0)}},update:function(a){if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&this._setState(T.INITIALIZING);break;case 2:this._tween.update(a);this._elementManager.update(a);this._handleTouch(a);
this._cameoTimer-=a;this._updateCollision(a);this._updateLaneSpawns(a);this._road.updateRoads(this._player.getSpeed(),a);this._difficulty+=this._difficultyIncreaseRate*a;break;case 3:this._tween.update(a),this._elementManager.update(a)}},_handleTouch:function(){if(!(m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY)&&0<w.multiTouch.length)for(var a=0,b=w.multiTouch;a<b.length;){var c=b[a];++a;if(c.phase!=Gb.DOWN&&c.phase==Gb.MOVED&&1==w.multiTouch.length)switch(c.swipe[1]){case 1:this._player.move(pg.LEFT);
break;case 2:this._player.move(pg.RIGHT)}}},_updateCollision:function(a){for(var b=0,c=this._obstacles;b<c.length;){var d=c[b];++b;d.updateMovement(this._player.getSpeed(),a);"SKATE_MAGNET"==m.getString("STRING_BOOSTER")&&d.getLane()!=this._player.getLane()&&d.canCollide()&&(d.getType()==La.PICKUP||d.getType()==La.POWERUP)&&Math.abs(d.get_y()-this._player.get_y())<d.getRadius()+this._player.getRadius()&&this._player.collide(d);d.getLane()==this._player.getLane()&&d.canCollide()&&Fd.distBetweenPoints(d.pos,
this._player.pos)<d.getRadius()+this._player.getRadius()&&this._player.collide(d)}for(a=this._obstacles.length;0<a--;)this._obstacles[a].doDelete&&this._obstacles.splice(a,1);0>=m.getInt("INT_HEALTH")&&this._setState(T.GAME_OVER)},_updateLaneSpawns:function(a){this._lane1Timer-=this._player.getSpeed()*a;0>=this._lane1Timer&&(this._lane1Timer=this._spawnInLane(ud.LEFT),this._elementManager.updateZSort("layer_world"));this._lane2Timer-=this._player.getSpeed()*a;0>=this._lane2Timer&&(this._lane2Timer=
this._spawnInLane(ud.CENTER),this._elementManager.updateZSort("layer_world"));this._lane3Timer-=this._player.getSpeed()*a;0>=this._lane3Timer&&(this._lane3Timer=this._spawnInLane(ud.RIGHT),this._elementManager.updateZSort("layer_world"))},_spawnInLane:function(a){switch(M.randomInt(0,20-Math.floor(Fd.clamp(this._difficulty,0,5)))){case 1:case 2:case 3:return this._spawnObstacle(La.PICKUP,a,-300),this._spawnObstacle(La.PICKUP,a,-380),this._spawnObstacle(La.PICKUP,a,-460),320;case 4:return this._spawnObstacle(La.PICKUP,
a,-300),this._spawnObstacle(La.POWERUP,a,-380),this._spawnObstacle(La.PICKUP,a,-460),320;case 5:return this._spawnObstacle(La.CAR,a,-340),300;case 7:return this._spawnObstacle(La.WALL,a,-310),200;case 8:return this._spawnObstacle(La.MANHOLE,a,-320),200;case 9:this._spawnObstacle(La.RAMP,a,-380);var b=M.randomInt(1,3),c=La.CAR;switch(b){case 1:c=La.CAR;break;case 2:c=La.MANHOLE;break;case 3:c=La.WALL}this._spawnObstacle(c,a,-480);return 750;case 6:case 10:return 0>this._cameoTimer?(this._cameoTimer=
10+10*Math.random(),this._spawnObstacle(La.CAMEO,ud.RIGHT,-310)):this._spawnObstacle(La.CONE,a,-310),160;case 0:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:return 250}return 0},_spawnObstacle:function(a,b,c){var d=this._cacheManager.requestElement("OBSTACLE_CACHE");d.init(this._tween,a,b,c);this._elementManager.addElement(d);this._obstacles.push(d)},_addEventListeners:function(){U.prototype._addEventListeners.call(this)},_removeEventListeners:function(){U.prototype._removeEventListeners.call(this)},
_onInput:function(a,b){m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY||(this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos),a==$.MOVE_LEFT&&b?this._player.move(pg.LEFT):a==$.MOVE_RIGHT&&b&&this._player.move(pg.RIGHT))},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",1);this._cacheManager.addCache("OBSTACLE_CACHE",Bk,16)},_onSpeedUp:function(){var a=this;1!=this._speedLines.alpha&&(this._speedLines.alpha=1,
this._speedLines.pos.y=-this._speedLines.get_height(),this._tween.tween({target:this._speedLines.pos,duration:0.66,ease:G.outQuad},{y:this._speedLines.get_height()+200}).onComplete(function(){a._speedLines.alpha=0}))},_initWorld:function(){U.prototype._initWorld.call(this);this._difficulty=0;this._cameoTimer=5;this._flagGameComplete=!1;this._timer=30;m.setInt("INT_HEALTH",3);m.setInt("INT_STREAK",0);m.setInt("INT_SCORE",0);this._lane1Timer=this._lane3Timer=0;this._lane2Timer=100;this._obstacles=[];
this._elementManager.addElement(new n({asset:"nick_arcade_background_zoomed-in_blurred"}),"layer_bg");this._road=this._elementManager.addElement(new Dm({}),"layer_bg");this._player=this._elementManager.addElement(new Uh(this._tween,{library:"spine/arcade_skate_player",y:90}),"layer_player");Uh.speedup.add(v(this,this._onSpeedUp));this._speedLines=this._elementManager.addElement(new n({asset:"speed_lines_1"}),"layer_player");this._speedLines.alpha=0},__class__:Tk});var La=i["world.minigame_skate.elements.OBSTACLE_TYPE"]=
{__ename__:["world","minigame_skate","elements","OBSTACLE_TYPE"],__constructs__:"PICKUP,POWERUP,CAR,CONE,MANHOLE,WALL,RAMP,CAMEO".split(",")};La.PICKUP=["PICKUP",0];La.PICKUP.toString=r;La.PICKUP.__enum__=La;La.POWERUP=["POWERUP",1];La.POWERUP.toString=r;La.POWERUP.__enum__=La;La.CAR=["CAR",2];La.CAR.toString=r;La.CAR.__enum__=La;La.CONE=["CONE",3];La.CONE.toString=r;La.CONE.__enum__=La;La.MANHOLE=["MANHOLE",4];La.MANHOLE.toString=r;La.MANHOLE.__enum__=La;La.WALL=["WALL",5];La.WALL.toString=r;La.WALL.__enum__=
La;La.RAMP=["RAMP",6];La.RAMP.toString=r;La.RAMP.__enum__=La;La.CAMEO=["CAMEO",7];La.CAMEO.toString=r;La.CAMEO.__enum__=La;var Bk=function(){n.call(this,{});this._speed=0;this._lane=ud.CENTER};i["world.minigame_skate.elements.ObstacleElement"]=Bk;Bk.__name__=["world","minigame_skate","elements","ObstacleElement"];Bk.__interfaces__=[Ej];Bk.__super__=n;Bk.prototype=z(n.prototype,{setReturnFunction:function(a){this._returnFunction=a},get_depth:function(){return-this.get_y()},init:function(a,b,c,d){this.doDelete=
!1;this._tween=a;this._type=b;this._magnetTween=!1;this._lane=c;null!=this._spine&&this.removeChild(this._spine);null!=this._cameo&&this.removeChild(this._cameo);switch(this._lane[1]){case 0:this.set_x(-160);break;case 1:this.set_x(0);break;case 2:this.set_x(160)}this.set_y(d);this._isActive=!0;switch(this._type[1]){case 0:this.setAsset("skate_coin_hitbox");null==this._spine&&(this._spine=new E({library:"spine/arcade_skate_coin"}),this._spine.animate("coin_idle",0));this.addChild(this._spine);break;
case 1:this.setAsset(0.5>Math.random()?"pickup_torta":"pickup_tamale");break;case 2:this.setAsset("obstacle_street_car_1");break;case 3:this.setAsset("obstacle_cone");break;case 4:this.setAsset("obstacle_manhole");break;case 5:this.setAsset("obstacle_barrier");break;case 6:this.setAsset("jump_ramp");break;case 7:this.setAsset("skate_coin_hitbox"),null==this._cameo&&(this._cameo=new E({library:"spine/sid_char_anim_1"}),this._cameo.animate(0.5>Math.random()?"idle_1":"idle_2"),this._cameo.set_scale(0.4),
this._cameo.set_x(100)),this.addChild(this._cameo)}},dispose:function(){this._returnFunction(this)},destroy:function(){n.prototype.dispose.call(this);this._returnFunction=this._spine=this._cameo=null},update:function(a){n.prototype.update.call(this,a);this.get_y()>280+this.get_height()&&(this.doDelete=!0)},updateMovement:function(a,b){this._type==La.CONE&&!this._isActive||this._magnetTween||this.set_y(this.get_y()+(a+this._speed)*b)},collide:function(){var a=this;this._isActive=!1;switch(this._type[1]){case 0:case 1:"SKATE_MAGNET"==
m.getString("STRING_BOOSTER")?this._magnetTween=!0:this.doDelete=!0;break;case 2:Ub.easeBounceIn(this,this._tween);break;case 3:this.set_x(this.get_x()+(0.5-Math.random()));var b=this._tween,c=0>=this.get_x()?-fb.STAGE_CENTER_X-100:fb.STAGE_CENTER_X+100,d=this.get_y()-400,e=0>=this.get_x()?-360:360;b.tween({target:this,duration:0.4,ease:G.outQuad},{x:c,y:d,rotation:e}).onComplete(function(){a.doDelete=!0});break;case 5:this.doDelete=!0;break;case 7:this._cameo.animate("cheer",0)}},canCollide:function(){return this._isActive},
getRadius:function(){return this.get_height()/2},getType:function(){return this._type},getLane:function(){return this._lane},__class__:Bk});var Sc=i["world.minigame_skate.elements.PLAYER_STATE"]={__ename__:["world","minigame_skate","elements","PLAYER_STATE"],__constructs__:["POWERUP","HURT","MOVING","RAMPING"]};Sc.POWERUP=["POWERUP",0];Sc.POWERUP.toString=r;Sc.POWERUP.__enum__=Sc;Sc.HURT=["HURT",1];Sc.HURT.toString=r;Sc.HURT.__enum__=Sc;Sc.MOVING=["MOVING",2];Sc.MOVING.toString=r;Sc.MOVING.__enum__=
Sc;Sc.RAMPING=["RAMPING",3];Sc.RAMPING.toString=r;Sc.RAMPING.__enum__=Sc;var ud=i["world.minigame_skate.elements.SKATE_LANE"]={__ename__:["world","minigame_skate","elements","SKATE_LANE"],__constructs__:["LEFT","CENTER","RIGHT"]};ud.LEFT=["LEFT",0];ud.LEFT.toString=r;ud.LEFT.__enum__=ud;ud.CENTER=["CENTER",1];ud.CENTER.toString=r;ud.CENTER.__enum__=ud;ud.RIGHT=["RIGHT",2];ud.RIGHT.toString=r;ud.RIGHT.__enum__=ud;var pg=i["world.minigame_skate.elements.MOVE_DIR"]={__ename__:["world","minigame_skate",
"elements","MOVE_DIR"],__constructs__:["LEFT","RIGHT"]};pg.LEFT=["LEFT",0];pg.LEFT.toString=r;pg.LEFT.__enum__=pg;pg.RIGHT=["RIGHT",1];pg.RIGHT.toString=r;pg.RIGHT.__enum__=pg;var Uh=function(a,b){E.call(this,b);this._speed=(this._flagFrenzy="SKATE_FRENZY_MODE"==m.getString("STRING_BOOSTER"))?600:400;this._radius=35;this.set_originY(0.65);this._shieldCount="SKATE_SHIELD"==m.getString("STRING_BOOSTER")?2:0;0<this._shieldCount&&(this._shield=this.addChild(new E({library:"spine/arcade_skate_player"})),
this._shield.animate("sheild_in",1),this._shield.queueAnimation("sheild_idle"));"SKATE_MAGNET"==m.getString("STRING_BOOSTER")&&(this._magnet=this.addChild(new E({library:"spine/arcade_skate_magnet"})),this._magnet.animate("magnet_pulse",0));this._tween=a;this._lane=ud.CENTER;this._state=Sc.MOVING;this._timerRamp=0;this.animate("idle",0);this.eventAnimationComplete.add(v(this,this._onAnimationComplete))};i["world.minigame_skate.elements.PlayerElement"]=Uh;Uh.__name__=["world","minigame_skate","elements",
"PlayerElement"];Uh.__super__=E;Uh.prototype=z(E.prototype,{_onAnimationComplete:function(){if(3==this._state[1])switch(this.get_currentAnimation()){case "ramp_hit_1":this.animate("jump_hold",0);break;case "ramp_hit_2":this.animate("jump_hold",0)}else"boost"==this.get_currentAnimation()&&this.animate("idle",0)},_setState:function(a){var b=this;if(!(a==Sc.POWERUP&&this._state==Sc.RAMPING))switch(this._state=a,this._state[1]){case 0:s.playSound("common_chime",0.5);this.animate("boost",1);this.alpha=
0<this._invulnerability?0.5:1;this._speed=this._flagFrenzy?600:500;Uh.speedup.dispatch();this._timer=5;break;case 1:s.playSound(M.randomObject(["skate_impact_1","skate_impact_2"]));this.animate("hit",1);this._invulnerability=1;this._speed=250;this._timer=this.alpha=0.5;break;case 2:s.playSound("casagrandes_skateboard",0.5,null,!0);this.alpha=0<this._invulnerability?0.5:1;this._speed=this._flagFrenzy?600:400;break;case 3:s.stopSound("casagrandes_skateboard"),Uh.speedup.dispatch(),this.animate(0.5>
Math.random()?"ramp_hit_1":"ramp_hit_2",1),this._timerRamp=3,this._speed=this._flagFrenzy?600:500,this._tween.tween({target:this,duration:0.3,ease:G.inQuad},{scale:1.3}).onComplete(function(){b._tween.tween({target:b,duration:0.3,ease:G.inQuad},{scale:1}).onComplete(function(){b.animate("idle",0);b._setState(Sc.MOVING)})})}},update:function(a){E.prototype.update.call(this,a);0<this._invulnerability&&(this._invulnerability-=a,0>=this._invulnerability&&(this.alpha=1));switch(this._state[1]){case 0:this._timer-=
a;0>=this._timer&&this._setState(Sc.MOVING);break;case 1:this._timer-=a;0>=this._timer&&this._setState(Sc.MOVING);break;case 3:this._timerRamp-=a,0>=this._timerRamp&&this._setState(Sc.MOVING)}},getSpeed:function(){return this._speed},getLane:function(){return this._lane},getRadius:function(){return this._radius},collide:function(a){this._collidedThisUpdate=!0;switch(a.getType()[1]){case 0:m.modifyInt("INT_STREAK",1);s.playSound("skate_coin");m.modifyInt("INT_SCORE",10*m.getInt("INT_STREAK")*(this._flagFrenzy?
3:1));if("SKATE_MAGNET"==m.getString("STRING_BOOSTER"))this._tween.tween({target:a,duration:0.3,ease:G.outQuad},{x:this.pos.x,y:this.pos.y}).onComplete(function(){a.doDelete=!0});break;case 1:m.modifyInt("INT_SCORE",500*(this._flagFrenzy?3:1));if("SKATE_MAGNET"==m.getString("STRING_BOOSTER"))this._tween.tween({target:a,duration:0.3,ease:G.outQuad},{x:this.pos.x,y:this.pos.y}).onComplete(function(){a.doDelete=!0});this._setState(Sc.POWERUP);break;case 6:m.modifyInt("INT_SCORE",500);this._setState(Sc.RAMPING);
break;case 7:m.modifyInt("INT_SCORE",300);break;default:this._state==Sc.RAMPING?this._collidedThisUpdate=!1:0<this._shieldCount?(this._shieldCount--,0==this._shieldCount&&this._shield.animate("sheild_out",1)):0<this._invulnerability?this._collidedThisUpdate=!1:(m.setInt("INT_STREAK",1),this._setState(Sc.HURT),m.modifyInt("INT_HEALTH",-1),100>m.getInt("INT_SCORE")?m.setInt("INT_SCORE",0):m.modifyInt("INT_SCORE",-100))}this._collidedThisUpdate&&a.collide()},move:function(a){if(!(a==pg.LEFT&&this._lane==
ud.LEFT||a==pg.RIGHT&&this._lane==ud.RIGHT||this._state==Sc.RAMPING)){var b=ud.CENTER;a==pg.LEFT?this._lane==ud.CENTER&&(b=ud.LEFT):this._lane==ud.CENTER&&(b=ud.RIGHT);this._targetLane!=b&&(this._targetLane=b,this._tweenToLane(b))}},_tweenToLane:function(a){var b=this,c=0;switch(a[1]){case 0:c=-160;break;case 1:c=0;break;case 2:c=160}var d=(c-this.pos.x)/2,e=this._tween,f=this.get_x();e.tween({target:this,duration:0.15,overwrite:!0,ease:G.inQuad,thread:"rot"},{rotation:c<f?-30:30});e=this._tween;
d=this.get_x()+d;e.tween({target:this,duration:0.15,overwrite:!0,ease:G.inQuad},{x:d}).onComplete(function(){b._lane=a;b._tween.tween({target:b,duration:0.15,ease:G.outQuad,thread:"rot"},{rotation:0});b._tween.tween({target:b,duration:0.15,ease:G.outQuad},{x:c})})},__class__:Uh});var Dm=function(a){ii.call(this,a);this._road1=this.addChild(new n({asset:"street"}));this._road2=this.addChild(new n({asset:"street",y:-640}));this._buildingRoot=this.addChild(new n({}));this._buildings=[];this.setMask(-430,
-322,860,645)};i["world.minigame_skate.elements.RoadElement"]=Dm;Dm.__name__=["world","minigame_skate","elements","RoadElement"];Dm.__super__=ii;Dm.prototype=z(ii.prototype,{updateRoads:function(a,b){var c=this._road1;c.set_y(c.get_y()+a*b);c=this._road2;c.set_y(c.get_y()+a*b);this._road1.get_y()>=this._road1.get_height()&&(c=this._road1,c.set_y(c.get_y()-1280));this._road2.get_y()>=this._road2.get_height()&&(c=this._road2,c.set_y(c.get_y()-1280));for(var c=0,d=this._buildings;c<d.length;){var e=
d[c];++c;var f=e;f.set_y(f.get_y()+a*b);e.get_y()>280+e.get_height()&&(f=e,f.set_y(f.get_y()-1280),this._buildingRoot.addChildToBottom(e))}},__class__:Dm});var $h=function(a){this._ballColor=this._gumColor=0;this._BALL_TOTAL=5;U.call(this,a)};i["world.minigame_skeeball.WorldSkeeball"]=$h;$h.__name__=["world","minigame_skeeball","WorldSkeeball"];$h.__super__=U;$h.prototype=z(U.prototype,{start:function(){U.prototype.start.call(this)},dispose:function(){U.prototype.dispose.call(this)},_setState:function(a){this._state=
a;switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld();this._onGenerationComplete();break;case 3:m.setBool("BOOL_GAME_WIN",!0)}},update:function(a){if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&this._setState(T.INITIALIZING);break;case 2:this._tween.update(a);this._elementManager.update(a);this._updatePhysics(a);this._handleTouch(a);this._checkRollingCollision(a);this._checkNewBall();break;case 3:this._tween.update(a),this._elementManager.update(a)}},
_handleTouch:function(a){if(!m.getBool("BOOL_PAUSED")&&!(this._state!=T.GAMEPLAY||this._activeBall.getState()!=Ae.IDLE))if(this._duration+=a,0<w.multiTouch.length)for(var a=0,b=w.multiTouch;a<b.length;){var c=b[a];++a;c.phase==Gb.DOWN?1==w.multiTouch.length&&(this._duration=0,this._elementManager.camera.getWorldPositionOfScreenPoint(c.get_currentPos().x,c.get_currentPos().y,0,this._inputPos),this._activeBall.contains(this._inputPos)&&(this._flagHeld=!0,this._aimer.alpha=1,this._aimLength.scaleY=0.1,
this._aimArrow.set_y(-10))):c.phase==Gb.MOVED?1==w.multiTouch.length&&this._flagHeld&&(this._aimer.rotation=c.line.get_vector().get_angle()-90,c=c.line.get_vector().get_length()/100,this._aimLength.scaleY=Math.min(c,1.5),this._aimArrow.set_y(-140*this._aimLength.scaleY)):c.phase==Gb.UP&&this._flagHeld&&(this._aimer.rotation=0,this._aimer.alpha=0,this._inputPos.toPoint(c.line.get_vector()),this._inputPos.multiply(-3.5),this._flagHeld=!1,0>this._inputPos.y&&50<this._inputPos.get_length()?this._rollBall():
Ub.easeRock(this._activeBall,this._tween,15))}},_checkNewBall:function(){if(this._activeBall.rollFinished())if(this._ballCount++,m.setInt("INT_SKEEBALL_BALL_COUNT",this._BALL_TOTAL-this._ballCount+1),P.updateDisplay.dispatch("INT_SKEEBALL_BALL_COUNT"),this._ballCount>this._BALL_TOTAL)this._setState(T.GAME_OVER);else{0==this._ballColor?(this._activeBall=this._ballLayer.addChild(new Ui(this._tween,this._physWorld,{library:"spine/arcade_skeeball_ball_blue",x:-246,y:226,scale:1.49})),this._ballDispenser.animate("tube_cycle_1",
1)):1==this._ballColor?(this._activeBall=this._ballLayer.addChild(new Ui(this._tween,this._physWorld,{library:"spine/arcade_skeeball_ball_red",x:-246,y:226,scale:1.49})),this._ballDispenser.animate("tube_cycle_2",1)):2==this._ballColor&&(this._activeBall=this._ballLayer.addChild(new Ui(this._tween,this._physWorld,{library:"spine/arcade_skeeball_ball_slime",x:-246,y:226,scale:1.49})),this._ballDispenser.animate("tube_cycle_1",1));this._ballColor=M.randomInt(0,1);this._tween.tween({target:this._background,
duration:0.7,ease:G.outQuad,delay:0,overwrite:!0},{y:0,scale:1});for(var a=0,b=this._lasers;a<b.length;){var c=b[a];++a;this._tween.tween({target:c,duration:0.5,ease:G.outQuad,delay:0,overwrite:!0,thread:"alpha"},{alpha:1})}}},_checkRollingCollision:function(a){if(this._activeBall.getState()==Ae.ROLLING){this._workLine.originToPoint(this._activeBall.pos);this._workLine.endTo(this._activeBall.get_x()+this._activeBall.velocity.x*a,this._activeBall.get_y()+this._activeBall.velocity.y*a);0>this._activeBall.get_x()?
this._leftLine.testLineSegmentIntercept(this._workLine).get_success()&&this._activeBall.bounce(-1):this._rightLine.testLineSegmentIntercept(this._workLine).get_success()&&this._activeBall.bounce(1);for(var a=0,b=this._lasers;a<b.length;){var c=b[a];++a;this._activeBall.contains(c.pos)&&this._activeBall.getState()==Ae.ROLLING&&(c.addChildToBottom(this._activeBall),s.playSound("skeeball_vacuum"),this._activeBall.destroy())}}},_updatePhysics:function(a){for(this._accumulator+=a;this._accumulator>=$h._timeStep;)this._physWorld.step($h._timeStep),
this._accumulator-=$h._timeStep},_rollBall:function(){this._activeBall.roll(this._inputPos.x,this._inputPos.y);s.playSound("skeeball_roll")},_addEventListeners:function(){U.prototype._addEventListeners.call(this);P.skeeballHole.add(v(this,this._onSkeeballHoleEnter));P.skeeballScore.add(v(this,this._onSkeeballJump))},_removeEventListeners:function(){U.prototype._removeEventListeners.call(this);P.skeeballHole.remove(v(this,this._onSkeeballHoleEnter));P.skeeballScore.remove(v(this,this._onSkeeballJump))},
_onSkeeballHoleEnter:function(a,b){s.playSound(M.randomObject(["skeeball_score_splat","skeeball_score_splat_02"]));if(-1<this._gummedHoles[a]){b.endSim();this._gummedBalls.push(b);ha.start(function(){b.flagStuck=!0},1.35);var c="ball_blue_stuck_in",d="ball_blue_stuck_idle",e="";switch(this._gumColor){case 1:e="gum_overlay_red";break;case 2:e="gum_overlay_slime";break;default:e="gum_overlay_blue"}if(1==b.getBallColor())switch(c="ball_red_stuck_in",d="ball_red_stuck_idle",this._gumColor){case 1:e="gum_overlay_red";
break;case 2:e="gum_overlay_slime";break;default:e="gum_overlay_blue"}else if(2==b.getBallColor())switch(c="ball_slime_stuck_in",d="ball_slime_stuck_idle",this._gumColor){case 1:e="gum_overlay_red";break;case 2:e="gum_overlay_slime";break;default:e="gum_overlay_blue"}b.setSkin(e);b.animate(c,1);b.queueAnimation(d)}else{ha.start(function(){s.playSound("common_chime",0.5)},0.15);c=0;switch(a){case 0:c=4E3;break;case 1:c=6E3;break;case 2:c=8E3;break;case 3:case 4:c=1E4}this._targetHoles[a].animate(0==
b.getBallColor()?"splat_blue_in":"splat_red_in",1);this._targetHoles[a].queueAnimation(0==b.getBallColor()?"splat_blue_idle":"splat_red_idle");d=0;for(e=this._targetHoles.length;d<e;){var f=d++;-1<this._gummedHoles[f]&&("splat_blue_idle"==this._targetHoles[f].get_currentAnimation()?this._targetHoles[f].animate("splat_blue_out",1):this._targetHoles[f].animate("splat_red_out",1),this._targetHoles[f].queueAnimation("hole_idle"))}d=0;for(e=this._gummedBalls.length;d<e;){var f=[this._gummedBalls[d++]],
g="ball_blue_stuck_out";1==f[0].getBallColor()?g="ball_red_stuck_out":2==f[0].getBallColor()&&(g="ball_slime_stuck_out");f[0].animate(g);this._tween.tween({target:f[0],duration:0.3,ease:G.linear},{alpha:0}).onComplete(function(a){return function(){a[0].doDelete=!0}}(f))}this._gummedBalls=[];this._gummedHoles=[-1,-1,-1,-1,-1];this._gummedHoles[a]=b.getBallColor();this._gumColor=this._gummedHoles[a];m.modifyInt("INT_SCORE",c*("DOUBLE_POINTS"==m.getString("STRING_BOOSTER")?2:1));b.doDelete=!0}},_onSkeeballJump:function(){this._tween.tween({target:this._background,
duration:0.5,ease:G.outQuad,overwrite:!0},{y:250,scale:1.7});for(var a=0,b=this._lasers;a<b.length;){var c=b[a];++a;this._tween.tween({target:c,duration:0.25,ease:G.outQuad,overwrite:!0,thread:"alpha"},{alpha:0})}},_onInput:function(){m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY||this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos)},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",1)},_initWorld:function(){U.prototype._initWorld.call(this);
this._flagGameComplete=!1;this._duration=0;this._ballCount=1;"EXTRA_AMMO"==m.getString("STRING_BOOSTER")&&(this._BALL_TOTAL=10);this._accumulator=0;this._lasers=[];this._leftLine=lf.request(-158,151,-38,-113);this._rightLine=lf.request(210,227,64,-113);this._workLine=lf.request();this._background=this._elementManager.addElement(new n({asset:"nick_arcade_background_zoomed-in_blurred"}));this._background.addChild(new n({asset:"base_backing",y:100}));this._ballDispenser=this._background.addChild(new E({library:"spine/gumball_tube",
x:-136,y:-59,scale:1}));this._ballDispenser.animate("tube_cycle_2",1);this._background.addChild(new E({library:"spine/target_board",x:0,y:-77})).animate("light_seq_1");this._background.addChild(new E({library:"spine/lane_board",x:2,y:300})).animate("light_seq_1");this._targetHoles=[];this._targetHoles.push(this._background.addChild(new E({library:"spine/arcade_skeeball_target_hole",x:2,y:-267})));this._targetHoles.push(this._background.addChild(new E({library:"spine/arcade_skeeball_target_hole",x:2,
y:-227})));this._targetHoles.push(this._background.addChild(new E({library:"spine/arcade_skeeball_target_hole",x:2,y:-195})));this._targetHoles.push(this._background.addChild(new E({library:"spine/arcade_skeeball_target_hole",x:-68,y:-256})));this._targetHoles.push(this._background.addChild(new E({library:"spine/arcade_skeeball_target_hole",x:70,y:-256})));this._gummedHoles=[-1,-1,-1,-1,-1];var a=this._background.addChild(new V({text:"skeeball.hole_label",x:2,y:-269}));a.setVariables([4]);a=this._background.addChild(new V({text:"skeeball.hole_label",
x:-68,y:-258}));a.setVariables([10]);a=this._background.addChild(new V({text:"skeeball.hole_label",x:70,y:-258}));a.setVariables([10]);a=this._background.addChild(new V({text:"skeeball.hole_label",x:2,y:-229}));a.setVariables([6]);a=this._background.addChild(new V({text:"skeeball.hole_label",x:2,y:-197}));a.setVariables([8]);this._background.addChild(new bm({tween:this._tween}));null==o.poolVec2?a=new ja:(a=o.poolVec2,o.poolVec2=a.zpp_pool,a.zpp_pool=null,a.zpp_disp=!1,a==o.nextVec2&&(o.nextVec2=
null));if(null==a.zpp_inner){var b;null==q.zpp_pool?b=new q:(b=q.zpp_pool,q.zpp_pool=b.next,b.next=null);b.weak=!1;b._immutable=!1;b.x=0;b.y=600;a.zpp_inner=b;a.zpp_inner.outer=a}else{if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=a.zpp_inner;if(b._immutable)throw new h("Error: Vec2 is immutable");null!=b._isimmutable&&b._isimmutable();if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=a.zpp_inner;null!=b._validate&&
b._validate();if(0==a.zpp_inner.x){if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");b=a.zpp_inner;null!=b._validate&&b._validate();b=600==a.zpp_inner.y}else b=!1;b||(a.zpp_inner.x=0,a.zpp_inner.y=600,b=a.zpp_inner,null!=b._invalidate&&b._invalidate(b))}a.zpp_inner.weak=!0;this._physWorld=new sj(a);null==l.BodyType_STATIC&&(l.internal=!0,l.BodyType_STATIC=new qd,l.internal=!1);a=new tf(l.BodyType_STATIC);b=a.zpp_inner.wrap_shapes;var c=new Rb(Rb.rect(-340,150,
680,10));b.zpp_inner.reverse_flag?b.push(c):b.unshift(c);b=a.zpp_inner.wrap_shapes;c=new Rb(Rb.rect(-350,0,10,400));b.zpp_inner.reverse_flag?b.push(c):b.unshift(c);a=a.zpp_inner.wrap_shapes;b=new Rb(Rb.rect(340,0,10,400));a.zpp_inner.reverse_flag?a.push(b):a.unshift(b);this._ballLayer=this._background.addChild(new Mb({}));this._aimer=this._ballLayer.addChild(new n({x:0,y:200,alpha:0}));this._aimer.addChild(new n({asset:"skeeball_aiming_tool_bottom",y:42}));this._aimLength=this._aimer.addChild(new n({asset:"skeeball_aiming_tool_meter",
y:-15,alpha:1,originY:1,scaleY:0.1}));this._aimArrow=this._aimer.addChild(new n({asset:"skeeball_aiming_tool_arrow",y:-10,scale:0.7}));this._activeBall=this._ballLayer.addChild(new Ui(this._tween,this._physWorld,{library:"spine/arcade_skeeball_ball_red",x:-246,y:226,scale:1.49}));this._background.addChild(new n({asset:"tube_exit",x:-252,y:213}));this._lasers.push(this._background.addChild(new Ck(this._tween,-52,-60,52,-60,{asset:"danger_laser",originX:0.45,originY:0.96,x:-52,y:-60,alpha:1})));this._lasers.push(this._background.addChild(new Ck(this._tween,
102,83,-102,83,{asset:"danger_laser",originX:0.45,originY:0.96,x:102,y:83,alpha:1})));this._generatePhysWorld();this._ballColor=0;this._gummedBalls=[];m.setInt("INT_SKEEBALL_BALL_COUNT",this._BALL_TOTAL-this._ballCount+1);P.updateDisplay.dispatch("INT_SKEEBALL_BALL_COUNT")},_generatePhysWorld:function(){this._addStaticPoly([314,10,338,11,338,182,315,181]);this._addStaticPoly([492,11,512,9,515,180,492,177,492,87]);this._addStaticPoly([338,104,342,121,345,132,350,144,363,161,376,171,401,180,427,180,
448,174,466,159,477,144,487,124,491,104,500,104,499,180,400,190,342,186,331,185,330,104,332,104]);this._addStaticPoly([365,105,366,90,370,78,381,66,398,56,411,52,425,54,433,57,444,61,454,72,460,82,463,91,465,102,462,100,458,89,447,72,429,61,407,60,389,67,377,77,367,95]);this._addStaticPoly([365,107,368,99,368,110,370,116,374,126,384,138,396,145,406,149,420,149,433,146,444,139,456,125,461,110,461,101,461,99,465,104,462,120,455,134,446,144,427,153,403,153,386,146,386,146,369,127]);this._addCircle(2,
-267,15);this._addCircle(-68,-256,15);this._addCircle(70,-256,15);this._addCircle(2,-195,15);this._addCircle(2,-227,15)},_addCircle:function(a,b,c){null==l.BodyType_STATIC&&(l.internal=!0,l.BodyType_STATIC=new qd,l.internal=!1);var d=new tf(l.BodyType_STATIC),e=d.zpp_inner.wrap_shapes,c=new pj(c);e.zpp_inner.reverse_flag?e.push(c):e.unshift(c);null==d.zpp_inner.wrap_pos&&d.zpp_inner.setupPosition();e=d.zpp_inner.wrap_pos;if(e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
c=e.zpp_inner;if(c._immutable)throw new h("Error: Vec2 is immutable");null!=c._isimmutable&&c._isimmutable();if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=e.zpp_inner;null!=c._validate&&c._validate();if(e.zpp_inner.x==a){if(e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");c=e.zpp_inner;null!=c._validate&&c._validate();c=e.zpp_inner.y==b}else c=!1;c||(e.zpp_inner.x=a,e.zpp_inner.y=
b,a=e.zpp_inner,null!=a._invalidate&&a._invalidate(a));a=this._physWorld;if(null!=d.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");d.zpp_inner.immutable_midstep("Body::space");if(d.zpp_inner.world)throw new h("Error: Space::world is immutable");if((null==d.zpp_inner.space?null:d.zpp_inner.space.outer)!=a){if(null!=(null==d.zpp_inner.space?null:d.zpp_inner.space.outer))d.zpp_inner.component.woken=!1;if(null!=
(null==d.zpp_inner.space?null:d.zpp_inner.space.outer))(null==d.zpp_inner.space?null:d.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(d);null!=a&&(a=a.zpp_inner.wrap_bodies,a.zpp_inner.reverse_flag?a.push(d):a.unshift(d))}},_addStaticPoly:function(a){for(var b=[],c=0;c<a.length;){var d=a[c]-a[0],e=a[c+1]-a[1];if(d!=d||e!=e)throw new h("Error: Vec2 components cannot be NaN");var f;null==o.poolVec2?f=new ja:(f=o.poolVec2,o.poolVec2=f.zpp_pool,f.zpp_pool=null,f.zpp_disp=!1,f==o.nextVec2&&(o.nextVec2=
null));if(null==f.zpp_inner){var g;null==q.zpp_pool?g=new q:(g=q.zpp_pool,q.zpp_pool=g.next,g.next=null);g.weak=!1;g._immutable=!1;g.x=d;g.y=e;f.zpp_inner=g;f.zpp_inner.outer=f}else{if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=f.zpp_inner;if(g._immutable)throw new h("Error: Vec2 is immutable");null!=g._isimmutable&&g._isimmutable();if(d!=d||e!=e)throw new h("Error: Vec2 components cannot be NaN");if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
g=f.zpp_inner;null!=g._validate&&g._validate();if(f.zpp_inner.x==d){if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=f.zpp_inner;null!=g._validate&&g._validate();g=f.zpp_inner.y==e}else g=!1;g||(f.zpp_inner.x=d,f.zpp_inner.y=e,d=f.zpp_inner,null!=d._invalidate&&d._invalidate(d))}f.zpp_inner.weak=!0;b.push(f);c+=2}c=sf.get(b);f=c.convexDecomposition();null==l.BodyType_STATIC&&(l.internal=!0,l.BodyType_STATIC=new qd,l.internal=!1);b=new tf(l.BodyType_STATIC);
f.zpp_inner.valmod();for(f=pd.get(f);;){f.zpp_inner.zpp_inner.valmod();d=f.zpp_inner;d.zpp_inner.valmod();d.zpp_inner.zip_length&&(d.zpp_inner.zip_length=!1,d.zpp_inner.user_length=d.zpp_inner.inner.length);d=d.zpp_inner.user_length;f.zpp_critical=!0;f.zpp_i<d?d=!0:(f.zpp_next=pd.zpp_pool,pd.zpp_pool=f,f.zpp_inner=null,d=!1);if(!d)break;f.zpp_critical=!1;d=f.zpp_inner.at(f.zpp_i++);e=new Rb(d);g=b.zpp_inner.wrap_shapes;g.zpp_inner.reverse_flag?g.push(e):g.unshift(e);d.dispose()}c.dispose();null==
b.zpp_inner.wrap_pos&&b.zpp_inner.setupPosition();c=b.zpp_inner.wrap_pos;f=a[0]-414;a=a[1]-302;if(c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(f!=f||a!=a)throw new h("Error: Vec2 components cannot be NaN");if(c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(c.zpp_inner.x==f){if(c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=c.zpp_inner;null!=d._validate&&d._validate();d=c.zpp_inner.y==a}else d=!1;d||(c.zpp_inner.x=f,c.zpp_inner.y=a,a=c.zpp_inner,null!=a._invalidate&&a._invalidate(a));a=this._physWorld;if(null!=b.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");b.zpp_inner.immutable_midstep("Body::space");if(b.zpp_inner.world)throw new h("Error: Space::world is immutable");if((null==b.zpp_inner.space?null:b.zpp_inner.space.outer)!=
a){if(null!=(null==b.zpp_inner.space?null:b.zpp_inner.space.outer))b.zpp_inner.component.woken=!1;if(null!=(null==b.zpp_inner.space?null:b.zpp_inner.space.outer))(null==b.zpp_inner.space?null:b.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(b);null!=a&&(a=a.zpp_inner.wrap_bodies,a.zpp_inner.reverse_flag?a.push(b):a.unshift(b))}},__class__:$h});var Ae=i["world.minigame_skeeball.elements.BALL_STATE"]={__ename__:["world","minigame_skeeball","elements","BALL_STATE"],__constructs__:["IDLE","ROLLING",
"SCORING"]};Ae.IDLE=["IDLE",0];Ae.IDLE.toString=r;Ae.IDLE.__enum__=Ae;Ae.ROLLING=["ROLLING",1];Ae.ROLLING.toString=r;Ae.ROLLING.__enum__=Ae;Ae.SCORING=["SCORING",2];Ae.SCORING.toString=r;Ae.SCORING.__enum__=Ae;var Ui=function(a,b,c){this._ballColor=0;E.call(this,c);this._flagSim=!1;this._tween=a;this._space=b;this._state=Ae.IDLE;this._ballColor=0<=c.library.indexOf("blue")?0:0<=c.library.indexOf("red")?1:2;this._tween.tween({target:this,duration:0.5,ease:G.outCubic},{x:0,y:200})};i["world.minigame_skeeball.elements.BallElement"]=
Ui;Ui.__name__=["world","minigame_skeeball","elements","BallElement"];Ui.__super__=E;Ui.prototype=z(E.prototype,{get_radius:function(){return 25.5*this.scale},dispose:function(){E.prototype.dispose.call(this);if(null!=this._body){var a=this._body;if(null!=a.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");a.zpp_inner.immutable_midstep("Body::space");if(a.zpp_inner.world)throw new h("Error: Space::world is immutable");
if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer)){if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer))a.zpp_inner.component.woken=!1;if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer))(null==a.zpp_inner.space?null:a.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(a)}}},_setState:function(a){var b=this;this._state=a;switch(this._state[1]){case 2:this._targetY=this.get_y();this._offsetY=0;var a=this.get_x()+0.25*this.velocity.x,a=Fd.clamp(a,-58,78),c=-132-
148*(this.velocity.y/-500),c=Fd.clamp(c,-280,-132);P.skeeballScore.dispatch();this._tween.tween({target:this,duration:0.4,ease:G.outQuad},{_targetY:c,x:a}).onComplete(function(){var a="ball_blue_jdle";1==b._ballColor?a="ball_red_idle":2==b._ballColor&&(a="ball_slime_idle");b.animate(a);b._startSim()})}},getBallColor:function(){return this._ballColor},_startSim:function(){null==l.BodyType_DYNAMIC&&(l.internal=!0,l.BodyType_DYNAMIC=new qd,l.internal=!1);this._body=new tf(l.BodyType_DYNAMIC);var a=this._body.zpp_inner.wrap_shapes,
b=new pj(this.get_radius());a.zpp_inner.reverse_flag?a.push(b):a.unshift(b);a=this._body;null==a.zpp_inner.wrap_pos&&a.zpp_inner.setupPosition();var a=a.zpp_inner.wrap_pos,b=this.get_x(),c=this.get_y();if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var d=a.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(b!=b||c!=c)throw new h("Error: Vec2 components cannot be NaN");if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=a.zpp_inner;null!=d._validate&&d._validate();if(a.zpp_inner.x==b){if(a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=a.zpp_inner;null!=d._validate&&d._validate();d=a.zpp_inner.y==c}else d=!1;d||(a.zpp_inner.x=b,a.zpp_inner.y=c,a=a.zpp_inner,null!=a._invalidate&&a._invalidate(a));a=this._body;b=this._space;if(null!=a.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");a.zpp_inner.immutable_midstep("Body::space");
if(a.zpp_inner.world)throw new h("Error: Space::world is immutable");if((null==a.zpp_inner.space?null:a.zpp_inner.space.outer)!=b){if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer))a.zpp_inner.component.woken=!1;if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer))(null==a.zpp_inner.space?null:a.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(a);null!=b&&(b=b.zpp_inner.wrap_bodies,b.zpp_inner.reverse_flag?b.push(a):b.unshift(a))}this._flagSim=!0;this._checkScoreCollisions(!0)},
endSim:function(){var a=this._body;if(null!=a.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");a.zpp_inner.immutable_midstep("Body::space");if(a.zpp_inner.world)throw new h("Error: Space::world is immutable");if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer)){if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer))a.zpp_inner.component.woken=!1;if(null!=(null==a.zpp_inner.space?null:a.zpp_inner.space.outer))(null==
a.zpp_inner.space?null:a.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(a)}},roll:function(a,b){this.velocity.x=a;this.velocity.y=b;this.velocity.calculateLength();100>this.velocity.get_length()&&this.velocity.normalizeTo(100);1E3<this.velocity.get_length()&&this.velocity.normalizeTo(1E3);this._setState(Ae.ROLLING);var c="ball_blue_roll";1==this._ballColor?c="ball_red_roll":2==this._ballColor&&(c="ball_slime_roll");this.animate(c);"SKEEBALL_MAGNET"==m.getString("STRING_BOOSTER")&&this._tween.tween({target:this.velocity,
duration:0.5,ease:G.outBack},{x:0})},rollFinished:function(){return this.doDelete?!0:this.flagStuck},bounce:function(a){this.velocity.x*=1;this.velocity.x=-1*Math.abs(this.velocity.x)*a},destroy:function(){var a=this;this._state=Ae.IDLE;this.set_x(this.get_x()-this.parent.get_x());this.set_y(this.get_y()-this.parent.get_y());this.set_scale(this.scale/this.parent.scale);var b="ball_blue_jdle";1==this._ballColor?b="ball_red_idle":2==this._ballColor&&(b="ball_slime_idle");this.animate(b);this._tween.tween({target:this,
duration:0.1,ease:G.inQuad},{x:0});this._tween.tween({target:this,duration:0.5,ease:G.inQuad},{y:-300,scale:0.6}).onComplete(function(){a.doDelete=!0})},update:function(a){E.prototype.update.call(this,a);switch(this._state[1]){case 1:this.set_x(this.get_x()+this.velocity.x*a);this.set_y(this.get_y()+this.velocity.y*a);this.set_scale(0.41+1.08*(this.get_y()- -110)/310);this.velocity.y+=-0.2*this.velocity.y*a;-110>=this.get_y()&&this._setState(Ae.SCORING);break;case 2:if(this._flagSim){var a=this.pos,
b=this._body;null==b.zpp_inner.wrap_pos&&b.zpp_inner.setupPosition();b=b.zpp_inner.wrap_pos;if(b.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var c=b.zpp_inner;null!=c._validate&&c._validate();b=b.zpp_inner.x;c=this._body;null==c.zpp_inner.wrap_pos&&c.zpp_inner.setupPosition();c=c.zpp_inner.wrap_pos;if(c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var d=c.zpp_inner;null!=d._validate&&d._validate();a.to(b,c.zpp_inner.y);this.rotation=this._body.zpp_inner.rot*
(180/Math.PI);this._checkScoreCollisions(!1)}else this.set_y(this._targetY+this._offsetY)}},_checkScoreCollisions:function(a){var b="DOUBLE_POINTS"==m.getString("STRING_BOOSTER");if(a){var a=this._dangerZone(),c=this._body;null==c.zpp_inner.wrap_pos&&c.zpp_inner.setupPosition();a.contains(c.zpp_inner.wrap_pos)&&(this.doDelete=!0);a=this._space;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner){var d;null==
q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=!1;d.x=2;d.y=-267;c.zpp_inner=d;c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(2==c.zpp_inner.x){if(null!=
c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=-267==c.zpp_inner.y}else d=!1;d||(c.zpp_inner.x=2,c.zpp_inner.y=-267,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;a=a.bodiesInCircle(c,30,!0,null);a.has(this._body)&&P.skeeballHole.dispatch(0,this);a=this._space;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==
c.zpp_inner)null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=2,d.y=-227,c.zpp_inner=d,c.zpp_inner.outer=c;else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(2==c.zpp_inner.x){if(null!=
c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=-227==c.zpp_inner.y}else d=!1;d||(c.zpp_inner.x=2,c.zpp_inner.y=-227,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;a=a.bodiesInCircle(c,30,!0,null);a.has(this._body)&&P.skeeballHole.dispatch(1,this);a=this._space;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==
c.zpp_inner)null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=2,d.y=-195,c.zpp_inner=d,c.zpp_inner.outer=c;else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(2==c.zpp_inner.x){if(null!=
c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=-195==c.zpp_inner.y}else d=!1;d||(c.zpp_inner.x=2,c.zpp_inner.y=-195,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;a=a.bodiesInCircle(c,30,!0,null);a.has(this._body)&&P.skeeballHole.dispatch(2,this);a=this._space;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==
c.zpp_inner)null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=-68,d.y=-256,c.zpp_inner=d,c.zpp_inner.outer=c;else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(-68==
c.zpp_inner.x){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=-256==c.zpp_inner.y}else d=!1;d||(c.zpp_inner.x=-68,c.zpp_inner.y=-256,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;a=a.bodiesInCircle(c,20,!0,null);a.has(this._body)&&P.skeeballHole.dispatch(3,this);a=this._space;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&
(o.nextVec2=null));if(null==c.zpp_inner)null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=70,d.y=-256,c.zpp_inner=d,c.zpp_inner.outer=c;else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&
d._validate();if(70==c.zpp_inner.x){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=-256==c.zpp_inner.y}else d=!1;d||(c.zpp_inner.x=70,c.zpp_inner.y=-256,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;a=a.bodiesInCircle(c,20,!0,null);a.has(this._body)&&P.skeeballHole.dispatch(4,this)}a=this._space;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=
!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner)null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=0,d.y=-165,c.zpp_inner=d,c.zpp_inner.outer=c;else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;
null!=d._validate&&d._validate();if(0==c.zpp_inner.x){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=-165==c.zpp_inner.y}else d=!1;d||(c.zpp_inner.x=0,c.zpp_inner.y=-165,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;a=a.bodiesInCircle(c,20,!0,null);a.has(this._body)&&(m.modifyInt("INT_SCORE",2E3*(b?2:1)),this.doDelete=!0);a=this._space;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=
c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner)null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=0,d.y=-135,c.zpp_inner=d,c.zpp_inner.outer=c;else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=c.zpp_inner;null!=d._validate&&d._validate();if(0==c.zpp_inner.x){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=-135==c.zpp_inner.y}else d=!1;d||(c.zpp_inner.x=0,c.zpp_inner.y=-135,d=c.zpp_inner,null!=d._invalidate&&d._invalidate(d))}c.zpp_inner.weak=!0;a=a.bodiesInCircle(c,20,!0,null);a.has(this._body)&&(m.modifyInt("INT_SCORE",1E3*(b?2:1)),this.doDelete=!0)},_dangerZone:function(){for(var a=[],b=0,c=[419,
175,417,126,422,141,434,158,450,171,465,178,485,179,510,179,523,178,535,175,547,166,553,156,563,142,569,129,571,120,572,189,418,188];b<c.length;){var d=c[b]-482,e=c[b+1]-301;if(d!=d||e!=e)throw new h("Error: Vec2 components cannot be NaN");var f;null==o.poolVec2?f=new ja:(f=o.poolVec2,o.poolVec2=f.zpp_pool,f.zpp_pool=null,f.zpp_disp=!1,f==o.nextVec2&&(o.nextVec2=null));if(null==f.zpp_inner){var g;null==q.zpp_pool?g=new q:(g=q.zpp_pool,q.zpp_pool=g.next,g.next=null);g.weak=!1;g._immutable=!1;g.x=d;
g.y=e;f.zpp_inner=g;f.zpp_inner.outer=f}else{if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=f.zpp_inner;if(g._immutable)throw new h("Error: Vec2 is immutable");null!=g._isimmutable&&g._isimmutable();if(d!=d||e!=e)throw new h("Error: Vec2 components cannot be NaN");if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");g=f.zpp_inner;null!=g._validate&&g._validate();if(f.zpp_inner.x==d){if(null!=f&&f.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
g=f.zpp_inner;null!=g._validate&&g._validate();g=f.zpp_inner.y==e}else g=!1;g||(f.zpp_inner.x=d,f.zpp_inner.y=e,d=f.zpp_inner,null!=d._invalidate&&d._invalidate(d))}f.zpp_inner.weak=!0;a.push(f);b+=2}return sf.get(a)},getState:function(){return this._state},contains:function(a){return Fd.distBetweenPoints(this.pos,a)<this.get_radius()},__class__:Ui,__properties__:z(E.prototype.__properties__,{get_radius:"get_radius"})});var Ck=function(a,b,c,d,e,f){n.call(this,f);this._tween=a;this.addChild(new n({asset:"laser_tube",
x:0,y:-250}));this._doTween(b,c,d,e);this.set_scale(1+0.5*((this.get_y()+100)/315))};i["world.minigame_skeeball.elements.LaserElement"]=Ck;Ck.__name__=["world","minigame_skeeball","elements","LaserElement"];Ck.__super__=n;Ck.prototype=z(n.prototype,{_doTween:function(a,b,c,d){var e=this;this._tween.tween({target:this,duration:2,ease:G.linear,delay:1},{x:c,y:d}).onComplete(function(){e._tween.tween({target:e,duration:2,ease:G.linear,delay:1},{x:a,y:b}).onComplete(function(){e._doTween(a,b,c,d)})})},
update:function(a){n.prototype.update.call(this,a);this.set_scale(1+0.5*((this.get_y()+100)/315))},__class__:Ck});var Xi=function(a){this._needleMoveSpeed=10;this._slimeNeedle=null;this._hits=[];this._slime=this._slimeSpine=this._guide=null;this._targets=[];this._belts=[];this._flagGameComplete=this._flagFrenzy=!1;this._spawnTimer=0;U.call(this,a)};i["world.minigame_slimeblast.WorldSlimeBlast"]=Xi;Xi.__name__=["world","minigame_slimeblast","WorldSlimeBlast"];Xi.__super__=U;Xi.prototype=z(U.prototype,
{start:function(){U.prototype.start.call(this);m.setInt("INT_SLIME_BLAST_LAST_SCORE",0);m.setInt("INT_SLIME_BLAST_CURR_SCORE",0)},dispose:function(){U.prototype.dispose.call(this)},_setState:function(a){var b=this;this._state=a;switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld();this._onGenerationComplete();break;case 3:ha.start(function(){var a=b._elementManager.addElement(new Ed({color:0,sizeX:fb.STAGE_WIDTH,sizeY:560,alpha:0}));b._tween.tween({target:a,duration:0.35,overwrite:!0,
ease:G.outQuad},{alpha:0.35});for(var d=b._elementManager.addElement(new n({x:0,y:0})),e=0,f=b._hits.length;e<f;){var g=e++,j=[-180*b._hits.length/2+90+180*g];ha.start(function(a){return function(){for(var c=0;6>c;)c++,b._elementManager.addElement(new Jj({x:a[0]}));s.playSound(M.randomObject(["blood_splat_03","blood_splat_04","blood_splat_05"]))}}(j),0.275*g);j=new n({asset:b._hits[g],x:j[0],y:30,scale:0});j=d.addChild(j);b._tween.tween({target:j,duration:0.35,overwrite:!0,delay:0.25*g,ease:G.outQuad},
{scaleX:1.5,scaleY:1.5})}ha.start(function(){var e=b._getCongratulatoryText(),e=new V({text:e,y:-150,scale:0}),e=d.addChild(e);Ub.easeBounceIn(e,b._tween,!0);m.modifyInt("INT_SCORE",m.getInt("INT_SLIME_BLAST_CURR_SCORE"));m.getInt("INT_SLIME_BLAST_LAST_SCORE")<m.getInt("INT_SLIME_BLAST_CURR_SCORE")?(m.setInt("INT_SLIME_BLAST_LAST_SCORE",m.getInt("INT_SLIME_BLAST_CURR_SCORE")),m.setInt("INT_SLIME_BLAST_CURR_SCORE",0),e=new V({text:"slime_blast.extra_blast",y:-105,scale:0}),e=d.addChild(e),Ub.easeBounceIn(e,
b._tween,!0),s.playSound("common_chime",0.5),ha.start(function(){b._tween.tween({target:a,duration:0.2,ease:G.outQuad},{scale:0,alpha:0});Ub.easeBounceOut(d,b._tween,!0);ha.start(function(){a.doDelete=!0;d.doDelete=!0;b._slimeSpine.animate("slime_machine_idle");P.slimeBlastReset.dispatch();b._setState(T.GAMEPLAY);b._hits=[];b._slime.doDelete=!0;b._slime=b._elementManager.addElement(new Dk(b._tween,{y:230}))},1)},0.25*b._hits.length+5)):ha.start(function(){m.setBool("BOOL_GAME_WIN",!0)},0.25*b._hits.length+
3)},0.25*b._hits.length)},1)}},_getCongratulatoryText:function(){var a=m.getInt("INT_SLIME_BLAST_CURR_SCORE");return 1E3<a&&2E3>=a?"slime_blast.completion_1":2E3<a&&3E3>=a?"slime_blast.completion_2":3E3<a?"slime_blast.completion_3":"slime_blast.completion_0"},update:function(a){if(!0!=m.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&this._setState(T.INITIALIZING);break;case 2:this._tween.update(a);this._elementManager.update(a);this._spawnTimer-=a;if(0>=this._spawnTimer&&
(a=this._getOpenBelts(),0<a.length)){this._spawnTimer=M.randomFloat(0.25,this._flagFrenzy?0.5:0.75);var a=a[M.randomInt(0,a.length-1)],b=this._cacheManager.requestElement("TARGET_CACHE");switch(M.randomInt(0,3)+(this._flagFrenzy?2:0)){case 0:b.init(this._tween,1);break;case 1:b.init(this._tween,5);break;case 2:b.init(this._tween,10);break;default:b.init(this._tween,20)}a.addChild(b);a.addTarget(b);this._targets.push(b);-10==this._slimeNeedle.rotation&&this._slimeSpine.animate("slime_machine_idle")}for(a=
this._targets.length;0<a--;)this._targets[a].doDelete&&this._targets.splice(a,1);break;case 3:this._tween.update(a),this._elementManager.update(a),this._checkSlimeCollision()}},_getOpenBelts:function(){for(var a=[],b=0,c=this._belts;b<c.length;){var d=c[b];++b;d.getCount()<Xi._BELT_CAPACITY&&a.push(d)}return a},_checkSlimeCollision:function(){for(var a=this._slime.getRect(),b=0,c=this._targets;b<c.length;){var d=c[b];++b;d.canLaunch()&&d.getRect().intersects(a)&&(d.launch(),this._hits.push(d.get_asset()))}},
_addEventListeners:function(){U.prototype._addEventListeners.call(this);P.slimeBlast.add(v(this,this._doBlast));P.slimeBlastPump.add(v(this,this._onSlimeBlastPump))},_removeEventListeners:function(){U.prototype._removeEventListeners.call(this);P.slimeBlast.remove(v(this,this._doBlast));P.slimeBlastPump.remove(v(this,this._onSlimeBlastPump))},_doBlast:function(){this._state!=T.GAME_OVER&&(this._setState(T.GAME_OVER),"SLIME_BIG_EXPLOSION"==m.getString("STRING_BOOSTER")?this._slimeSpine.animate("slime_2",
1):this._slimeSpine.animate("slime_1",1),s.playSound("audio/arcade_slime_wave"),this._slime.blast(550*((this._slimeNeedle.rotation+10)/70+0.5)))},_onSlimeBlastPump:function(){var a=this;s.playSound(M.randomObject(["blood_splat_03","blood_splat_04","blood_splat_05"]));this._slimeSpine.animate("slime_machine_charge",1);this._slimeSpine.queueAnimation("slime_machine_ready");this._tween.stop(this._slimeNeedle);this._tween.tween({target:this._slimeNeedle,duration:0.2,ease:G.outQuad},{rotation:70}).onComplete(function(){a._tween.tween({target:a._slimeNeedle,
duration:a._needleMoveSpeed,ease:G.outQuad},{rotation:-10})})},_onInput:function(a,b){m.getBool("BOOL_PAUSED")||this._state!=T.GAMEPLAY||(this._elementManager.camera.getWorldPositionOfScreenPoint(w.pointer.get_currentPos().x,w.pointer.get_currentPos().y,0,this._inputPos),a==$.JUMP&&b&&this._doBlast())},_initPools:function(){m.setInt("FLOAT_LOADING_PROGRESS",1);this._cacheManager.addCache("TARGET_CACHE",Ek,16)},_initWorld:function(){U.prototype._initWorld.call(this);this._flagGameComplete=!1;this._flagFrenzy=
"SLIME_FRENZY_MODE"==m.getString("STRING_BOOSTER");m.setInt("INT_SCORE",0);m.setInt("INT_REWARD_LEVEL",0);this._hits=[];this._elementManager.addElement(new n({asset:"nick_arcade_background_zoomed-in_blurred"}),"layer_bg");this._elementManager.addElement(new n({asset:"slime_bg_1"}));var a=this._elementManager.addElement(new E({library:"spine/slime_track_3",x:0,y:0}));a.animate("track_3_seq",0,0.3);this._targets=[];this._belts=[];this._belts.push(this._elementManager.addElement(new Vh({},[{x:442,y:22},
{x:336,y:16},{x:241,y:-15},{x:189,y:-56},{x:158,y:-99},{x:136,y:-164},{x:130,y:-272}])));this._belts.push(this._elementManager.addElement(new Vh({},[{x:442,y:102},{x:286,y:85},{x:161,y:45},{x:53,y:-31},{x:-21,y:-145},{x:-57,y:-276}])));a=this._elementManager.addElement(new E({library:"spine/slime_track_2",x:-10}));a.animate("track_2_seq",0,0.3);this._belts.push(this._elementManager.addElement(new Vh({},[{x:-466,y:8},{x:-411,y:-36},{x:-356,y:-57},{x:-248,y:-61},{x:-89,y:-52},{x:-30,y:-66},{x:12,y:-105},
{x:41,y:-147},{x:50,y:-199},{x:50,y:-275}])));this._belts.push(this._elementManager.addElement(new Vh({},[{x:-277,y:251},{x:-264,y:218},{x:-242,y:178},{x:-187,y:135},{x:-35,y:84},{x:60,y:68},{x:209,y:17},{x:298,y:-37},{x:358,y:-104},{x:423,y:-220},{x:454,y:-274}])));a=this._elementManager.addElement(new E({library:"spine/slime_track_1",x:0}));a.animate("track_1_seq",0,0.3);this._belts.push(this._elementManager.addElement(new Vh({},[{x:-437,y:159},{x:-311,y:142},{x:-233,y:105},{x:-203,y:68},{x:-190,
y:29},{x:-189,y:-260}])));this._belts.push(this._elementManager.addElement(new Vh({},[{x:-122,y:-267},{x:-122,y:-12},{x:-109,y:25},{x:-49,y:119},{x:-5,y:168},{x:49,y:187},{x:472,y:185}])));this._elementManager.addElement(new n({asset:"slime_cab_bottom",x:0,y:219}));this._guide=this._elementManager.addElement(new n({asset:"trajectory_guide",x:16,y:240,originY:1}));this._slimeSpine=this._elementManager.addElement(new E({library:"spine/nick_slime_cannon",y:-3,scale:1}));this._slimeNeedle=this._slimeSpine.addChild(new n({asset:"ui_slime_gauge_arrow",
x:-383,y:230,originY:0.8,rotation:70}));this._tween.tween({target:this._slimeNeedle,duration:this._needleMoveSpeed,ease:G.outQuad},{rotation:-10});this._slimeSpine.animate("slime_machine_idle");this._slimeSpine.runUpdate(0);this._elementManager.addElement(new n({asset:"slime_cab_top",x:0,y:-207}));this._elementManager.addElement(new n({asset:"slime_cab_l",x:-501,y:0}));this._elementManager.addElement(new n({asset:"cab_right",x:489,y:0}));this._elementManager.addElement(new n({asset:"cab_bottom_2",
x:0,y:220}));this._slime=this._elementManager.addElement(new Dk(this._tween,{y:230}))},__class__:Xi});var Vh=function(a,b){n.call(this,a);this._path=b;this._workPoint=Aa.request();this._targets=[];this._flagFrenzy="SLIME_FRENZY_MODE"==m.getString("STRING_BOOSTER")};i["world.minigame_slimeblast.elements.ConveyorBelt"]=Vh;Vh.__name__=["world","minigame_slimeblast","elements","ConveyorBelt"];Vh.__super__=n;Vh.prototype=z(n.prototype,{addTarget:function(a){a.pos.to(this._path[0].x,this._path[0].y);a.alpha=
1;this._targets.push(a)},update:function(a){n.prototype.update.call(this,a);for(a=this._targets.length;0<a--;)this._updateTarget(this._targets[a]),this._targets[a].doDelete&&this._targets.splice(a,1)},_updateTarget:function(a){this._workPoint.to(this._path[a.pathIndex].x,this._path[a.pathIndex].y);if(20>=Fd.distBetweenPoints(a.pos,this._workPoint)&&(a.pathIndex+=1,a.pathIndex>=this._path.length)){a.doDelete=!0;return}this._workPoint.to(this._path[a.pathIndex].x-a.pos.x,this._path[a.pathIndex].y-a.pos.y);
var b=this._workPoint.get_length();a.pathIndex==this._path.length-1&&Math.min(700,700*(b/200));this._workPoint.normalizeTo(this._flagFrenzy?800:400);this._workPoint.subtractPoint(a.velocity);a.velocity.addPoint(this._workPoint);700<a.velocity.get_length()&&a.velocity.normalizeTo(700)},getCount:function(){return this._targets.length},__class__:Vh});var Dk=function(a,b){n.call(this,b);this.alpha=1;this.set_originY(0);this._startY=this.get_y();this._fill=this.addChild(new Ed({color:16776960,sizeX:50,
sizeY:0,originY:0,alpha:0}));this._tween=a;this._collisionRect=Of.request(0,0,50,100)};i["world.minigame_slimeblast.elements.SlimeElement"]=Dk;Dk.__name__=["world","minigame_slimeblast","elements","SlimeElement"];Dk.__super__=n;Dk.prototype=z(n.prototype,{update:function(a){n.prototype.update.call(this,a);this._fill.sizeX=this._collisionRect.get_width();var a=this._startY,b=this.get_y();this._fill.sizeY=a-b},blast:function(a){var b=this,c=520;"SLIME_BIG_EXPLOSION"==m.getString("STRING_BOOSTER")?c=
1200:"SLIME_FRENZY_MODE"==m.getString("STRING_BOOSTER")&&(c=900);this._tween.tween({target:this._collisionRect,duration:0.3,ease:G.outQuad},{width:c}).onComplete(function(){});c=this._tween;a=this.get_y()-a;c.tween({target:this,duration:0.35,ease:G.outQuad},{y:a}).onComplete(function(){b._tween.tween({target:b,duration:0.5,ease:G.inQuad},{alpha:0})})},getRect:function(){this._collisionRect.set_y(this.get_y());this._collisionRect.set_centerX(0);return this._collisionRect},__class__:Dk});var Jj=function(a){this._rotationalVelocity=
0;this._velocity=null;this._lifetime=this._lifetimeTimer=0;var b=this;a.asset=0.5>M.randomFloat(0,1)?"slime_blob_1":"slime_blob_2";n.call(this,a);this.set_scale(M.randomFloat(0.5,1));this._lifetimeTimer=this._lifetime=M.randomFloat(0.65,1.5);this._velocity={x:M.randomFloat(-8,8),y:M.randomFloat(-8,4)};this._rotationalVelocity=M.randomFloat(-10,10);ha.start(function(){b.doDelete=!0},this._lifetime)};i["world.minigame_slimeblast.elements.SlimeParticle"]=Jj;Jj.__name__=["world","minigame_slimeblast",
"elements","SlimeParticle"];Jj.__super__=n;Jj.prototype=z(n.prototype,{update:function(a){n.prototype.update.call(this,a);this._velocity.y+=Jj._GRAVITY;this.pos.x+=this._velocity.x;this.pos.y+=this._velocity.y;this.rotation+=this._rotationalVelocity;0<this._lifetimeTimer&&(this._lifetimeTimer-=a,0>this._lifetimeTimer&&(this._lifetimeTimer=0),this.alpha=this._lifetimeTimer/this._lifetime)},__class__:Jj});var Tf=i["world.minigame_slimeblast.elements.TARGET_STATE"]={__ename__:["world","minigame_slimeblast",
"elements","TARGET_STATE"],__constructs__:["BELT","LAUNCHED"]};Tf.BELT=["BELT",0];Tf.BELT.toString=r;Tf.BELT.__enum__=Tf;Tf.LAUNCHED=["LAUNCHED",1];Tf.LAUNCHED.toString=r;Tf.LAUNCHED.__enum__=Tf;var Ek=function(){this._flagDouble=this._flagFrenzy=!1;this.pathIndex=0;this._text=this.velocity=null;this._state=Tf.BELT;this._score=0;this._collisionRect=this._tween=null;n.call(this,{});this.velocity=Aa.request();this._collisionRect=Of.request(0,0,this.get_width(),this.get_height());this._flagDouble="DOUBLE_POINTS"==
m.getString("STRING_BOOSTER")||"SLIME_FRENZY_MODE"==m.getString("STRING_BOOSTER")};i["world.minigame_slimeblast.elements.TargetElement"]=Ek;Ek.__name__=["world","minigame_slimeblast","elements","TargetElement"];Ek.__interfaces__=[Ej];Ek.__super__=n;Ek.prototype=z(n.prototype,{setReturnFunction:function(a){this._returnFunction=a},init:function(a,b){this.doDelete=!1;this.alpha=0;this._state=Tf.BELT;this.set_originY(0.9);this.velocity.x=0;this.rotation=this.velocity.y=0;switch(b){case 1:this.setAsset("character_lincoln");
break;case 5:switch(M.randomInt(0,3)){case 0:this.setAsset("character_annie");break;case 1:this.setAsset("character_pony");break;case 2:this.setAsset("character_brainstorm");break;case 3:this.setAsset("character_captman")}break;case 10:switch(M.randomInt(0,1)){case 0:this.setAsset("character_sb");break;case 1:this.setAsset("charater_mike")}break;case 20:this.setAsset("character_leo")}this._tween=a;this._score=b;this.pathIndex=0},dispose:function(){this._returnFunction(this)},destroy:function(){n.prototype.dispose.call(this);
this._returnFunction=null},launch:function(){var a=this;this._state=Tf.LAUNCHED;m.modifyInt("INT_SLIME_BLAST_CURR_SCORE",100*this._score*(this._flagDouble?2:1));var b=this._tween,c=0<this.get_x()?this.get_x()+300:this.get_x()-300,d=this.get_x();b.tween({target:this,duration:0.6,ease:G.outQuad},{x:c,y:-580,rotation:d}).onComplete(function(){a.doDelete=!0})},canLaunch:function(){return this._state!=Tf.LAUNCHED},getRect:function(){this._collisionRect.toXY(this.get_x()-this.get_width()/2,this.get_y()-
this.get_height()/2);return this._collisionRect},update:function(a){n.prototype.update.call(this,a);this._state==Tf.BELT&&(this.pos.x+=this.velocity.x*a,this.pos.y+=this.velocity.y*a)},setState:function(a){this._state=0==a?Tf.BELT:Tf.LAUNCHED},__class__:Ek});var rf=function(){};i["zpp_nape.ZPP_ID"]=rf;rf.__name__=["zpp_nape","ZPP_ID"];rf.Constraint=function(){return rf._Constraint++};rf.Interactor=function(){return rf._Interactor++};rf.CbType=function(){return rf._CbType++};rf.CbSet=function(){return rf._CbSet++};
var Zd=function(){this.body=this.constraint=null;this.pre_swapped=!1;this.int1=this.int2=this.set=this.wrap_arbiters=this.pre_arbiter=null;this.length=0;this.listener=this.next=this.prev=null;this.event=0;this.outer_body=this.outer_con=this.outer_int=null;this.length=0};i["zpp_nape.callbacks.ZPP_Callback"]=Zd;Zd.__name__=["zpp_nape","callbacks","ZPP_Callback"];Zd.prototype={wrapper_body:function(){null==this.outer_body&&(Zd.internal=!0,this.outer_body=new rl,Zd.internal=!1,this.outer_body.zpp_inner=
this);return this.outer_body},wrapper_con:function(){null==this.outer_con&&(Zd.internal=!0,this.outer_con=new sl,Zd.internal=!1,this.outer_con.zpp_inner=this);return this.outer_con},wrapper_int:function(){null==this.outer_int&&(Zd.internal=!0,this.outer_int=new tl,Zd.internal=!1,this.outer_int.zpp_inner=this);null==this.wrap_arbiters?this.wrap_arbiters=Mh.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=!0;this.wrap_arbiters.zpp_inner.at_ite=
null;return this.outer_int},push:function(a){null!=this.prev?this.prev.next=a:this.next=a;a.prev=this.prev;a.next=null;this.prev=a;this.length++},pop:function(){var a=this.next;this.next=a.next;null==this.next?this.prev=null:this.next.prev=null;this.length--;return a},empty:function(){return null==this.next},__class__:Zd};var ea=function(){this.interactors=this.constraints=null;this.zip_conlisteners=!1;this.conlisteners=null;this.zip_bodylisteners=!1;this.bodylisteners=null;this.zip_listeners=!1;
this.manager=this.cbpairs=this.listeners=null;this.id=0;this.next=null;this.count=0;this.cbTypes=null;this.cbTypes=new Wh;this.listeners=new Kj;this.zip_listeners=!0;this.bodylisteners=new Em;this.zip_bodylisteners=!0;this.conlisteners=new Fm;this.zip_conlisteners=!0;this.constraints=new oi;this.interactors=new pi;this.id=rf.CbSet();this.cbpairs=new No};i["zpp_nape.callbacks.ZPP_CbSet"]=ea;ea.__name__=["zpp_nape","callbacks","ZPP_CbSet"];ea.setlt=function(a,b){for(var c=a.cbTypes.head,d=b.cbTypes.head;null!=
c&&null!=d;){var e=c.elt,f=d.elt;if(e.id<f.id)return!0;if(f.id<e.id)return!1;c=c.next;d=d.next}return null!=d?null==c:!1};ea.get=function(a){var b;null==ea.zpp_pool?b=new ea:(b=ea.zpp_pool,ea.zpp_pool=b.next,b.next=null);for(var c=null,a=a.head;null!=a;){var d=a.elt,c=b.cbTypes.insert(c,d);d.cbsets.add(b);a=a.next}return b};ea.single_intersection=function(a,b,c){for(var d=null,e=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head;null!=e;){var f=e.elt;if(f.a==a&&f.b==b||f.a==b&&f.b==a){d=
f;break}e=e.next}null==d&&(null==O.zpp_pool?d=new O:(d=O.zpp_pool,O.zpp_pool=d.next,d.next=null),d.zip_listeners=!0,ea.setlt(a,b)?(d.a=a,d.b=b):(d.a=b,d.b=a),a.cbpairs.add(d),b!=a&&b.cbpairs.add(d));d.zip_listeners&&(d.zip_listeners=!1,d.__validate());a=d.listeners.head;return null!=a&&a.elt==c?null==a.next:!1};ea.prototype={invalidate_pairs:function(){for(var a=this.cbpairs.head;null!=a;)a.elt.zip_listeners=!0,a=a.next},realvalidate_listeners:function(){this.listeners.clear();for(var a=this.cbTypes.head;null!=
a;){for(var b=null,c=this.listeners.head,d=a.elt.listeners.head;null!=d;){var e=d.elt;if(null!=c&&c.elt==e)d=d.next,b=c,c=c.next;else{var f;null!=c?(f=c.elt,f=e.precedence<=f.precedence?e.precedence==f.precedence?e.id>f.id:!1:!0):f=!0;if(f){if(e.space==this.manager.space){f=this.listeners;var g;null==Za.zpp_pool?g=new Za:(g=Za.zpp_pool,Za.zpp_pool=g.next,g.next=null);g.elt=e;e=g;null==b?(e.next=f.head,f.head=e):(e.next=b.next,b.next=e);f.pushmod=f.modified=!0;f.length++;b=e}d=d.next}else b=c,c=c.next}}a=
a.next}},realvalidate_bodylisteners:function(){this.bodylisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.bodylisteners.head,d=a.elt.bodylisteners.head;null!=d;){var e=d.elt;if(null!=c&&c.elt==e)d=d.next,b=c,c=c.next;else{var f;null!=c?(f=c.elt,f=e.precedence<=f.precedence?e.precedence==f.precedence?e.id>f.id:!1:!0):f=!0;if(f){f=e.options;if(f.nonemptyintersection(this.cbTypes,f.excludes)?0:e.space==this.manager.space){f=this.bodylisteners;var g;null==Qd.zpp_pool?g=new Qd:
(g=Qd.zpp_pool,Qd.zpp_pool=g.next,g.next=null);g.elt=e;e=g;null==b?(e.next=f.head,f.head=e):(e.next=b.next,b.next=e);f.pushmod=f.modified=!0;f.length++;b=e}d=d.next}else b=c,c=c.next}}a=a.next}},realvalidate_conlisteners:function(){this.conlisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.conlisteners.head,d=a.elt.conlisteners.head;null!=d;){var e=d.elt;if(null!=c&&c.elt==e)d=d.next,b=c,c=c.next;else{var f;null!=c?(f=c.elt,f=e.precedence<=f.precedence?e.precedence==f.precedence?
e.id>f.id:!1:!0):f=!0;if(f){f=e.options;if(f.nonemptyintersection(this.cbTypes,f.excludes)?0:e.space==this.manager.space){f=this.conlisteners;var g;null==Ad.zpp_pool?g=new Ad:(g=Ad.zpp_pool,Ad.zpp_pool=g.next,g.next=null);g.elt=e;e=g;null==b?(e.next=f.head,f.head=e):(e.next=b.next,b.next=e);f.pushmod=f.modified=!0;f.length++;b=e}d=d.next}else b=c,c=c.next}}a=a.next}},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners());this.zip_bodylisteners&&(this.zip_bodylisteners=
!1,this.realvalidate_bodylisteners());this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},__class__:ea};var O=function(){this.listeners=null;this.zip_listeners=!1;this.a=this.b=this.next=null;this.listeners=new Kj};i["zpp_nape.callbacks.ZPP_CbSetPair"]=O;O.__name__=["zpp_nape","callbacks","ZPP_CbSetPair"];O.setlt=function(a,b){return ea.setlt(a.a,b.a)?!0:a.a==b.a?ea.setlt(a.b,b.b):!1};O.prototype={__validate:function(){this.listeners.clear();for(var a=this.a.listeners.head,
b=this.b.listeners.head;null!=a&&null!=b;){var c=a.elt,d=b.elt;if(c==d){var d=c.options1,e=this.a.cbTypes;d.nonemptyintersection(e,d.includes)&&!d.nonemptyintersection(e,d.excludes)?(d=c.options2,e=this.b.cbTypes,d=d.nonemptyintersection(e,d.includes)?!d.nonemptyintersection(e,d.excludes):!1):d=!1;d?d=!0:(d=c.options2,e=this.a.cbTypes,d.nonemptyintersection(e,d.includes)&&!d.nonemptyintersection(e,d.excludes)?(d=c.options1,e=this.b.cbTypes,d=d.nonemptyintersection(e,d.includes)?!d.nonemptyintersection(e,
d.excludes):!1):d=!1);d&&this.listeners.add(c);a=a.next;b=b.next}else c.precedence>d.precedence||c.precedence==d.precedence&&c.id>d.id?a=a.next:b=b.next}},__class__:O};var Kj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=Kj;Kj.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"];Kj.prototype={add:function(a){var b;null==Za.zpp_pool?b=new Za:(b=Za.zpp_pool,Za.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;
this.head=b;this.modified=!0;this.length++;return a},remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=Za.zpp_pool;Za.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},clear:function(){for(;null!=this.head;){var a=this.head;this.head=a.next;a.elt=null;a.next=Za.zpp_pool;Za.zpp_pool=a;null==this.head&&
(this.pushmod=!0);this.modified=!0;this.length--}this.pushmod=!0},__class__:Kj};var Em=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_BodyListener"]=Em;Em.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"];Em.prototype={remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=
Qd.zpp_pool;Qd.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},clear:function(){for(;null!=this.head;){var a=this.head;this.head=a.next;a.elt=null;a.next=Qd.zpp_pool;Qd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--}this.pushmod=!0},__class__:Em};var Fm=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=Fm;Fm.__name__=["zpp_nape","util","ZNPList_ZPP_ConstraintListener"];
Fm.prototype={remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=Ad.zpp_pool;Ad.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},clear:function(){for(;null!=this.head;){var a=this.head;this.head=a.next;a.elt=null;a.next=Ad.zpp_pool;Ad.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--}this.pushmod=
!0},__class__:Fm};var oi=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Constraint"]=oi;oi.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"];oi.prototype={add:function(a){var b;null==Lc.zpp_pool?b=new Lc:(b=Lc.zpp_pool,Lc.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){var c;null==Lc.zpp_pool?c=new Lc:(c=Lc.zpp_pool,Lc.zpp_pool=c.next,c.next=null);c.elt=b;null==
a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Lc.zpp_pool;Lc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=Lc.zpp_pool;
Lc.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Lc.zpp_pool;Lc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:oi};var pi=function(){this.length=0;this.modified=this.pushmod=!1;this.head=
null};i["zpp_nape.util.ZNPList_ZPP_Interactor"]=pi;pi.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"];pi.prototype={add:function(a){var b;null==F.zpp_pool?b=new F:(b=F.zpp_pool,F.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=F.zpp_pool;F.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();
return a},remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=F.zpp_pool;F.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:pi};var Lj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_CbSet"]=
Lj;Lj.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"];Lj.prototype={add:function(a){var b;null==fa.zpp_pool?b=new fa:(b=fa.zpp_pool,fa.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=fa.zpp_pool;fa.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){for(var b=null,c=
this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=fa.zpp_pool;fa.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},__class__:Lj};var Te=function(){this.cbsets=this.listeners=this.bodylisteners=this.conlisteners=null;this.id=0;this.outer=null;this.id=rf.CbType();this.listeners=new Kj;this.bodylisteners=new Em;this.conlisteners=new Fm;
this.constraints=new oi;this.interactors=new pi;this.cbsets=new Lj};i["zpp_nape.callbacks.ZPP_CbType"]=Te;Te.__name__=["zpp_nape","callbacks","ZPP_CbType"];Te.prototype={__class__:Te};var l=function(){};i["zpp_nape.util.ZPP_Flags"]=l;l.__name__=["zpp_nape","util","ZPP_Flags"];var qi=function(){this.body=this.constraint=this.interaction=this.space=null;this.id=this.type=this.event=this.precedence=0;this.outer=null};i["zpp_nape.callbacks.ZPP_Listener"]=qi;qi.__name__=["zpp_nape","callbacks","ZPP_Listener"];
qi.prototype={addedToSpace:function(){},removedFromSpace:function(){},__class__:qi};var Oo=function(){this.outer_zn=this.options=this.handler=null};i["zpp_nape.callbacks.ZPP_BodyListener"]=Oo;Oo.__name__=["zpp_nape","callbacks","ZPP_BodyListener"];Oo.__super__=qi;Oo.prototype=z(qi.prototype,{addedToSpace:function(){this.options.handler=v(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;){for(var b=a.elt,c=null,d=b.bodylisteners.head;null!=d;){var e=d.elt;if(this.precedence>e.precedence||
this.precedence==e.precedence&&this.id>e.id)break;c=d;d=d.next}d=b.bodylisteners;null==Qd.zpp_pool?e=new Qd:(e=Qd.zpp_pool,Qd.zpp_pool=e.next,e.next=null);e.elt=this;null==c?(e.next=d.head,d.head=e):(e.next=c.next,c.next=e);d.pushmod=d.modified=!0;d.length++;for(b=b.cbsets.head;null!=b;)b.elt.zip_bodylisteners=!0,b=b.next;a=a.next}},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.bodylisteners.remove(this);for(b=b.cbsets.head;null!=b;)b.elt.zip_bodylisteners=
!0,b=b.next;a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();var d=this.options;if(b)if(c){b=null;for(c=d.includes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}d=d.includes;null==qa.zpp_pool?c=new qa:(c=qa.zpp_pool,qa.zpp_pool=c.next,c.next=null);c.elt=a;a=c;null==b?(a.next=d.head,d.head=a):(a.next=b.next,b.next=a);d.pushmod=d.modified=!0;d.length++}else d.includes.remove(a);else if(c){b=null;for(c=d.excludes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}d=
d.excludes;null==qa.zpp_pool?c=new qa:(c=qa.zpp_pool,qa.zpp_pool=c.next,c.next=null);c.elt=a;a=c;null==b?(a.next=d.head,d.head=a):(a.next=b.next,b.next=a);d.pushmod=d.modified=!0;d.length++}else d.excludes.remove(a);this.addedToSpace()},__class__:Oo});var Po=function(){this.outer_zn=this.options=this.handler=null};i["zpp_nape.callbacks.ZPP_ConstraintListener"]=Po;Po.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"];Po.__super__=qi;Po.prototype=z(qi.prototype,{addedToSpace:function(){this.options.handler=
v(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;){for(var b=a.elt,c=null,d=b.conlisteners.head;null!=d;){var e=d.elt;if(this.precedence>e.precedence||this.precedence==e.precedence&&this.id>e.id)break;c=d;d=d.next}d=b.conlisteners;null==Ad.zpp_pool?e=new Ad:(e=Ad.zpp_pool,Ad.zpp_pool=e.next,e.next=null);e.elt=this;null==c?(e.next=d.head,d.head=e):(e.next=c.next,c.next=e);d.pushmod=d.modified=!0;d.length++;for(b=b.cbsets.head;null!=b;)b.elt.zip_conlisteners=!0,b=b.next;a=a.next}},
removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.conlisteners.remove(this);for(b=b.cbsets.head;null!=b;)b.elt.zip_conlisteners=!0,b=b.next;a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();var d=this.options;if(b)if(c){b=null;for(c=d.includes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}d=d.includes;null==qa.zpp_pool?c=new qa:(c=qa.zpp_pool,qa.zpp_pool=c.next,c.next=null);c.elt=a;a=c;null==b?(a.next=d.head,d.head=a):
(a.next=b.next,b.next=a);d.pushmod=d.modified=!0;d.length++}else d.includes.remove(a);else if(c){b=null;for(c=d.excludes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}d=d.excludes;null==qa.zpp_pool?c=new qa:(c=qa.zpp_pool,qa.zpp_pool=c.next,c.next=null);c.elt=a;a=c;null==b?(a.next=d.head,d.head=a):(a.next=b.next,b.next=a);d.pushmod=d.modified=!0;d.length++}else d.excludes.remove(a);this.addedToSpace()},__class__:Po});var Wh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_CbType"]=
Wh;Wh.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"];Wh.prototype={add:function(a){var b;null==qa.zpp_pool?b=new qa:(b=qa.zpp_pool,qa.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){var c;null==qa.zpp_pool?c=new qa:(c=qa.zpp_pool,qa.zpp_pool=c.next,c.next=null);c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){var a=this.head;
this.head=a.next;a.elt=null;a.next=qa.zpp_pool;qa.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=qa.zpp_pool;qa.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},
clear:function(){for(;null!=this.head;){var a=this.head;this.head=a.next;a.elt=null;a.next=qa.zpp_pool;qa.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--}this.pushmod=!0},has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Wh};var vc=function(){this.handlerp=null;this.allowSleepingCallbacks=this.pure=!1;this.options1=this.options2=this.handleri=
null;this.itype=0;this.outer_zni=this.outer_znp=null};i["zpp_nape.callbacks.ZPP_InteractionListener"]=vc;vc.__name__=["zpp_nape","callbacks","ZPP_InteractionListener"];vc.__super__=qi;vc.prototype=z(qi.prototype,{with_uniquesets:function(a){var b;null==oc.zpp_pool?b=new oc:(b=oc.zpp_pool,oc.zpp_pool=b.next,b.next=null);b.lt=O.setlt;for(var c=this.options2.includes,d=vc.UCbType,e=vc.VCbType,f=vc.WCbType,g=this.options1.includes.head,j=c.head;null!=g&&null!=j;){var h=g.elt,i=j.elt;if(h==i){var k;null==
qa.zpp_pool?k=new qa:(k=qa.zpp_pool,qa.zpp_pool=k.next,k.next=null);k.elt=h;var l=k;l.next=f.head;f.head=l;f.modified=!0;f.length++;g=g.next;j=j.next}else if(h.id<i.id){var n;null==qa.zpp_pool?n=new qa:(n=qa.zpp_pool,qa.zpp_pool=n.next,n.next=null);n.elt=h;var o=n;o.next=d.head;d.head=o;d.modified=!0;d.length++;g=g.next}else{var m;null==qa.zpp_pool?m=new qa:(m=qa.zpp_pool,qa.zpp_pool=m.next,m.next=null);m.elt=i;var q=m;q.next=e.head;e.head=q;e.modified=!0;e.length++;j=j.next}}for(;null!=g;){var r=
g.elt,u;null==qa.zpp_pool?u=new qa:(u=qa.zpp_pool,qa.zpp_pool=u.next,u.next=null);u.elt=r;var s=u;s.next=d.head;d.head=s;d.modified=!0;d.length++;g=g.next}for(;null!=j;){var t=j.elt,v;null==qa.zpp_pool?v=new qa:(v=qa.zpp_pool,qa.zpp_pool=v.next,v.next=null);v.elt=t;var z=v;z.next=e.head;e.head=z;e.modified=!0;e.length++;j=j.next}for(;null!=d.head;)for(var w=d.pop_unsafe(),y=c.head;null!=y;){for(var G=y.elt.cbsets,H=vc.UCbSet,F=vc.VCbSet,E=vc.WCbSet,J=w.cbsets.head,P=G.head;null!=J&&null!=P;){var K=
J.elt,M=P.elt;if(K==M){var rc;null==fa.zpp_pool?rc=new fa:(rc=fa.zpp_pool,fa.zpp_pool=rc.next,rc.next=null);rc.elt=K;var L=rc;L.next=E.head;E.head=L;E.modified=!0;E.length++;J=J.next;P=P.next}else if(ea.setlt(K,M)){var V;null==fa.zpp_pool?V=new fa:(V=fa.zpp_pool,fa.zpp_pool=V.next,V.next=null);V.elt=K;var Y=V;Y.next=H.head;H.head=Y;H.modified=!0;H.length++;J=J.next}else{var Ab;null==fa.zpp_pool?Ab=new fa:(Ab=fa.zpp_pool,fa.zpp_pool=Ab.next,Ab.next=null);Ab.elt=M;var S=Ab;S.next=F.head;F.head=S;F.modified=
!0;F.length++;P=P.next}}for(;null!=J;){var kc=J.elt,qf;null==fa.zpp_pool?qf=new fa:(qf=fa.zpp_pool,fa.zpp_pool=qf.next,qf.next=null);qf.elt=kc;var va=qf;va.next=H.head;H.head=va;H.modified=!0;H.length++;J=J.next}for(;null!=P;){var ka=P.elt,Z;null==fa.zpp_pool?Z=new fa:(Z=fa.zpp_pool,fa.zpp_pool=Z.next,Z.next=null);Z.elt=ka;var gh=Z;gh.next=F.head;F.head=gh;F.modified=!0;F.length++;P=P.next}for(;null!=H.head;)for(var Mc=H.pop_unsafe(),U=G.head;null!=U;){var ca=U.elt;Mc.validate();ca.validate();if(ea.single_intersection(Mc,
ca,this)){var la;null==O.zpp_pool?la=new O:(la=O.zpp_pool,O.zpp_pool=la.next,la.next=null);la.zip_listeners=!0;ea.setlt(Mc,ca)?(la.a=Mc,la.b=ca):(la.a=ca,la.b=Mc);b.try_insert(la)}U=U.next}for(;null!=F.head;)for(var ye=F.pop_unsafe(),Sf=E.head;null!=Sf;){var Vc=Sf.elt;ye.validate();Vc.validate();if(ea.single_intersection(ye,Vc,this)){var oa;null==O.zpp_pool?oa=new O:(oa=O.zpp_pool,O.zpp_pool=oa.next,oa.next=null);oa.zip_listeners=!0;ea.setlt(ye,Vc)?(oa.a=ye,oa.b=Vc):(oa.a=Vc,oa.b=ye);b.try_insert(oa)}Sf=
Sf.next}for(;null!=E.head;){var Yb=E.pop_unsafe();Yb.validate();Yb.validate();if(ea.single_intersection(Yb,Yb,this)){var tb;null==O.zpp_pool?tb=new O:(tb=O.zpp_pool,O.zpp_pool=tb.next,tb.next=null);tb.zip_listeners=!0;ea.setlt(Yb,Yb);tb.a=Yb;tb.b=Yb;b.try_insert(tb)}for(var ng=E.head;null!=ng;){var Ug=ng.elt;Yb.validate();Ug.validate();if(ea.single_intersection(Yb,Ug,this)){var Da;null==O.zpp_pool?Da=new O:(Da=O.zpp_pool,O.zpp_pool=Da.next,Da.next=null);Da.zip_listeners=!0;ea.setlt(Yb,Ug)?(Da.a=Yb,
Da.b=Ug):(Da.a=Ug,Da.b=Yb);b.try_insert(Da)}ng=ng.next}}y=y.next}for(;null!=e.head;)for(var $=e.pop_unsafe(),Le=f.head;null!=Le;){for(var lc=Le.elt.cbsets,Md=vc.UCbSet,I=vc.VCbSet,Sa=vc.WCbSet,ef=$.cbsets.head,ha=lc.head;null!=ef&&null!=ha;){var X=ef.elt,wa=ha.elt;if(X==wa){var ra;null==fa.zpp_pool?ra=new fa:(ra=fa.zpp_pool,fa.zpp_pool=ra.next,ra.next=null);ra.elt=X;var Ja=ra;Ja.next=Sa.head;Sa.head=Ja;Sa.modified=!0;Sa.length++;ef=ef.next;ha=ha.next}else if(ea.setlt(X,wa)){var Ea;null==fa.zpp_pool?
Ea=new fa:(Ea=fa.zpp_pool,fa.zpp_pool=Ea.next,Ea.next=null);Ea.elt=X;var A=Ea;A.next=Md.head;Md.head=A;Md.modified=!0;Md.length++;ef=ef.next}else{var xa;null==fa.zpp_pool?xa=new fa:(xa=fa.zpp_pool,fa.zpp_pool=xa.next,xa.next=null);xa.elt=wa;var Ma=xa;Ma.next=I.head;I.head=Ma;I.modified=!0;I.length++;ha=ha.next}}for(;null!=ef;){var $a=ef.elt,za;null==fa.zpp_pool?za=new fa:(za=fa.zpp_pool,fa.zpp_pool=za.next,za.next=null);za.elt=$a;var Db=za;Db.next=Md.head;Md.head=Db;Md.modified=!0;Md.length++;ef=
ef.next}for(;null!=ha;){var ya=ha.elt,Ua;null==fa.zpp_pool?Ua=new fa:(Ua=fa.zpp_pool,fa.zpp_pool=Ua.next,Ua.next=null);Ua.elt=ya;var Ba=Ua;Ba.next=I.head;I.head=Ba;I.modified=!0;I.length++;ha=ha.next}for(;null!=Md.head;)for(var zf=Md.pop_unsafe(),pa=lc.head;null!=pa;){var ga=pa.elt;zf.validate();ga.validate();if(ea.single_intersection(zf,ga,this)){var ia;null==O.zpp_pool?ia=new O:(ia=O.zpp_pool,O.zpp_pool=ia.next,ia.next=null);ia.zip_listeners=!0;ea.setlt(zf,ga)?(ia.a=zf,ia.b=ga):(ia.a=ga,ia.b=zf);
b.try_insert(ia)}pa=pa.next}for(;null!=I.head;)for(var Pc=I.pop_unsafe(),ac=Sa.head;null!=ac;){var W=ac.elt;Pc.validate();W.validate();if(ea.single_intersection(Pc,W,this)){var kb;null==O.zpp_pool?kb=new O:(kb=O.zpp_pool,O.zpp_pool=kb.next,kb.next=null);kb.zip_listeners=!0;ea.setlt(Pc,W)?(kb.a=Pc,kb.b=W):(kb.a=W,kb.b=Pc);b.try_insert(kb)}ac=ac.next}for(;null!=Sa.head;){var C=Sa.pop_unsafe();C.validate();C.validate();if(ea.single_intersection(C,C,this)){var Kg;null==O.zpp_pool?Kg=new O:(Kg=O.zpp_pool,
O.zpp_pool=Kg.next,Kg.next=null);Kg.zip_listeners=!0;ea.setlt(C,C);Kg.a=C;Kg.b=C;b.try_insert(Kg)}for(var ob=Sa.head;null!=ob;){var ta=ob.elt;C.validate();ta.validate();if(ea.single_intersection(C,ta,this)){var pb;null==O.zpp_pool?pb=new O:(pb=O.zpp_pool,O.zpp_pool=pb.next,pb.next=null);pb.zip_listeners=!0;ea.setlt(C,ta)?(pb.a=C,pb.b=ta):(pb.a=ta,pb.b=C);b.try_insert(pb)}ob=ob.next}}Le=Le.next}for(;null!=f.head;){for(var qh=f.pop_unsafe(),Q=qh.cbsets,aa=vc.UCbSet,Na=vc.VCbSet,ba=vc.WCbSet,Vf=qh.cbsets.head,
T=Q.head;null!=Vf&&null!=T;){var Hb=Vf.elt,bb=T.elt;if(Hb==bb){var ib;null==fa.zpp_pool?ib=new fa:(ib=fa.zpp_pool,fa.zpp_pool=ib.next,ib.next=null);ib.elt=Hb;var Oa=ib;Oa.next=ba.head;ba.head=Oa;ba.modified=!0;ba.length++;Vf=Vf.next;T=T.next}else if(ea.setlt(Hb,bb)){var Va;null==fa.zpp_pool?Va=new fa:(Va=fa.zpp_pool,fa.zpp_pool=Va.next,Va.next=null);Va.elt=Hb;var D=Va;D.next=aa.head;aa.head=D;aa.modified=!0;aa.length++;Vf=Vf.next}else{var lb;null==fa.zpp_pool?lb=new fa:(lb=fa.zpp_pool,fa.zpp_pool=
lb.next,lb.next=null);lb.elt=bb;var Ta=lb;Ta.next=Na.head;Na.head=Ta;Na.modified=!0;Na.length++;T=T.next}}for(;null!=Vf;){var jb=Vf.elt,gb;null==fa.zpp_pool?gb=new fa:(gb=fa.zpp_pool,fa.zpp_pool=gb.next,gb.next=null);gb.elt=jb;var Ga=gb;Ga.next=aa.head;aa.head=Ga;aa.modified=!0;aa.length++;Vf=Vf.next}for(;null!=T;){var Eb=T.elt,cb;null==fa.zpp_pool?cb=new fa:(cb=fa.zpp_pool,fa.zpp_pool=cb.next,cb.next=null);cb.elt=Eb;var zb=cb;zb.next=Na.head;Na.head=zb;Na.modified=!0;Na.length++;T=T.next}for(;null!=
aa.head;)for(var Nc=aa.pop_unsafe(),rd=Q.head;null!=rd;){var sa=rd.elt;Nc.validate();sa.validate();if(ea.single_intersection(Nc,sa,this)){var Ib;null==O.zpp_pool?Ib=new O:(Ib=O.zpp_pool,O.zpp_pool=Ib.next,Ib.next=null);Ib.zip_listeners=!0;ea.setlt(Nc,sa)?(Ib.a=Nc,Ib.b=sa):(Ib.a=sa,Ib.b=Nc);b.try_insert(Ib)}rd=rd.next}for(;null!=Na.head;)for(var ub=Na.pop_unsafe(),wb=ba.head;null!=wb;){var mb=wb.elt;ub.validate();mb.validate();if(ea.single_intersection(ub,mb,this)){var na;null==O.zpp_pool?na=new O:
(na=O.zpp_pool,O.zpp_pool=na.next,na.next=null);na.zip_listeners=!0;ea.setlt(ub,mb)?(na.a=ub,na.b=mb):(na.a=mb,na.b=ub);b.try_insert(na)}wb=wb.next}for(;null!=ba.head;){var B=ba.pop_unsafe();B.validate();B.validate();if(ea.single_intersection(B,B,this)){var Bb;null==O.zpp_pool?Bb=new O:(Bb=O.zpp_pool,O.zpp_pool=Bb.next,Bb.next=null);Bb.zip_listeners=!0;ea.setlt(B,B);Bb.a=B;Bb.b=B;b.try_insert(Bb)}for(var db=ba.head;null!=db;){var ab=db.elt;B.validate();ab.validate();if(ea.single_intersection(B,ab,
this)){var x;null==O.zpp_pool?x=new O:(x=O.zpp_pool,O.zpp_pool=x.next,x.next=null);x.zip_listeners=!0;ea.setlt(B,ab)?(x.a=B,x.b=ab):(x.a=ab,x.b=B);b.try_insert(x)}db=db.next}}for(var Nb=f.head;null!=Nb;){for(var Jb=Nb.elt.cbsets,qb=vc.UCbSet,da=vc.VCbSet,ma=vc.WCbSet,ja=qh.cbsets.head,vb=Jb.head;null!=ja&&null!=vb;){var eb=ja.elt,Ob=vb.elt;if(eb==Ob){var Ha;null==fa.zpp_pool?Ha=new fa:(Ha=fa.zpp_pool,fa.zpp_pool=Ha.next,Ha.next=null);Ha.elt=eb;var Vb=Ha;Vb.next=ma.head;ma.head=Vb;ma.modified=!0;ma.length++;
ja=ja.next;vb=vb.next}else if(ea.setlt(eb,Ob)){var Ca;null==fa.zpp_pool?Ca=new fa:(Ca=fa.zpp_pool,fa.zpp_pool=Ca.next,Ca.next=null);Ca.elt=eb;var Aa=Ca;Aa.next=qb.head;qb.head=Aa;qb.modified=!0;qb.length++;ja=ja.next}else{var yb;null==fa.zpp_pool?yb=new fa:(yb=fa.zpp_pool,fa.zpp_pool=yb.next,yb.next=null);yb.elt=Ob;var Ra=yb;Ra.next=da.head;da.head=Ra;da.modified=!0;da.length++;vb=vb.next}}for(;null!=ja;){var Xb=ja.elt,Fa;null==fa.zpp_pool?Fa=new fa:(Fa=fa.zpp_pool,fa.zpp_pool=Fa.next,Fa.next=null);
Fa.elt=Xb;var Pb=Fa;Pb.next=qb.head;qb.head=Pb;qb.modified=!0;qb.length++;ja=ja.next}for(;null!=vb;){var R=vb.elt,La;null==fa.zpp_pool?La=new fa:(La=fa.zpp_pool,fa.zpp_pool=La.next,La.next=null);La.elt=R;var Za=La;Za.next=da.head;da.head=Za;da.modified=!0;da.length++;vb=vb.next}for(;null!=qb.head;)for(var ae=qb.pop_unsafe(),Lb=Jb.head;null!=Lb;){var Ic=Lb.elt;ae.validate();Ic.validate();if(ea.single_intersection(ae,Ic,this)){var sc;null==O.zpp_pool?sc=new O:(sc=O.zpp_pool,O.zpp_pool=sc.next,sc.next=
null);sc.zip_listeners=!0;ea.setlt(ae,Ic)?(sc.a=ae,sc.b=Ic):(sc.a=Ic,sc.b=ae);b.try_insert(sc)}Lb=Lb.next}for(;null!=da.head;)for(var sb=da.pop_unsafe(),Wb=ma.head;null!=Wb;){var bc=Wb.elt;sb.validate();bc.validate();if(ea.single_intersection(sb,bc,this)){var me;null==O.zpp_pool?me=new O:(me=O.zpp_pool,O.zpp_pool=me.next,me.next=null);me.zip_listeners=!0;ea.setlt(sb,bc)?(me.a=sb,me.b=bc):(me.a=bc,me.b=sb);b.try_insert(me)}Wb=Wb.next}for(;null!=ma.head;){var Kb=ma.pop_unsafe();Kb.validate();Kb.validate();
if(ea.single_intersection(Kb,Kb,this)){var dc;null==O.zpp_pool?dc=new O:(dc=O.zpp_pool,O.zpp_pool=dc.next,dc.next=null);dc.zip_listeners=!0;ea.setlt(Kb,Kb);dc.a=Kb;dc.b=Kb;b.try_insert(dc)}for(var Ia=ma.head;null!=Ia;){var ua=Ia.elt;Kb.validate();ua.validate();if(ea.single_intersection(Kb,ua,this)){var N;null==O.zpp_pool?N=new O:(N=O.zpp_pool,O.zpp_pool=N.next,N.next=null);N.zip_listeners=!0;ea.setlt(Kb,ua)?(N.a=Kb,N.b=ua):(N.a=ua,N.b=Kb);b.try_insert(N)}Ia=Ia.next}}Nb=Nb.next}}if(null!=b.parent){for(var Qa=
b.parent;null!=Qa;)if(null!=Qa.prev)Qa=Qa.prev;else if(null!=Qa.next)Qa=Qa.next;else{var ic=Qa.data;a?this.space.freshListenerType(ic.a,ic.b):this.space.nullListenerType(ic.a,ic.b);var ne=ic;ne.a=ne.b=null;ne.listeners.clear();ne.next=O.zpp_pool;O.zpp_pool=ne;var Jd=Qa.parent;null!=Jd&&(Qa==Jd.prev?Jd.prev=null:Jd.next=null,Qa.parent=null);var fe=Qa;fe.data=null;fe.lt=null;fe.swapped=null;fe.next=oc.zpp_pool;oc.zpp_pool=fe;Qa=Jd}b.parent=null}var gc=b;gc.data=null;gc.lt=null;gc.swapped=null;gc.next=
oc.zpp_pool;oc.zpp_pool=gc},addedToSpace:function(){for(var a=3==this.type,b=this.options1.includes.head,c=this.options2.includes.head;null!=b&&null!=c;){var d=b.elt,e=c.elt;if(d==e){for(var e=null,f=d.listeners.head;null!=f;){var g=f.elt;if(this.precedence>g.precedence||this.precedence==g.precedence&&this.id>g.id)break;e=f;f=f.next}f=d.listeners;null==Za.zpp_pool?g=new Za:(g=Za.zpp_pool,Za.zpp_pool=g.next,g.next=null);g.elt=this;null==e?(g.next=f.head,f.head=g):(g.next=e.next,e.next=g);f.pushmod=
f.modified=!0;f.length++;for(e=d.cbsets.head;null!=e;)f=e.elt,f.zip_listeners=!0,f.invalidate_pairs(),e=e.next;if(a)for(d=d.interactors.head;null!=d;)d.elt.wake(),d=d.next;b=b.next;c=c.next}else if(d.id<e.id){e=null;for(f=d.listeners.head;null!=f;){g=f.elt;if(this.precedence>g.precedence||this.precedence==g.precedence&&this.id>g.id)break;e=f;f=f.next}f=d.listeners;null==Za.zpp_pool?g=new Za:(g=Za.zpp_pool,Za.zpp_pool=g.next,g.next=null);g.elt=this;null==e?(g.next=f.head,f.head=g):(g.next=e.next,e.next=
g);f.pushmod=f.modified=!0;f.length++;for(e=d.cbsets.head;null!=e;)f=e.elt,f.zip_listeners=!0,f.invalidate_pairs(),e=e.next;if(a)for(d=d.interactors.head;null!=d;)d.elt.wake(),d=d.next;b=b.next}else{d=null;for(f=e.listeners.head;null!=f;){g=f.elt;if(this.precedence>g.precedence||this.precedence==g.precedence&&this.id>g.id)break;d=f;f=f.next}f=e.listeners;null==Za.zpp_pool?g=new Za:(g=Za.zpp_pool,Za.zpp_pool=g.next,g.next=null);g.elt=this;null==d?(g.next=f.head,f.head=g):(g.next=d.next,d.next=g);f.pushmod=
f.modified=!0;f.length++;for(d=e.cbsets.head;null!=d;)f=d.elt,f.zip_listeners=!0,f.invalidate_pairs(),d=d.next;if(a)for(d=e.interactors.head;null!=d;)d.elt.wake(),d=d.next;c=c.next}}for(;null!=b;){d=b.elt;e=null;for(f=d.listeners.head;null!=f;){g=f.elt;if(this.precedence>g.precedence||this.precedence==g.precedence&&this.id>g.id)break;e=f;f=f.next}f=d.listeners;null==Za.zpp_pool?g=new Za:(g=Za.zpp_pool,Za.zpp_pool=g.next,g.next=null);g.elt=this;null==e?(g.next=f.head,f.head=g):(g.next=e.next,e.next=
g);f.pushmod=f.modified=!0;f.length++;for(e=d.cbsets.head;null!=e;)f=e.elt,f.zip_listeners=!0,f.invalidate_pairs(),e=e.next;if(a)for(d=d.interactors.head;null!=d;)d.elt.wake(),d=d.next;b=b.next}for(;null!=c;){b=c.elt;d=null;for(e=b.listeners.head;null!=e;){f=e.elt;if(this.precedence>f.precedence||this.precedence==f.precedence&&this.id>f.id)break;d=e;e=e.next}e=b.listeners;null==Za.zpp_pool?f=new Za:(f=Za.zpp_pool,Za.zpp_pool=f.next,f.next=null);f.elt=this;null==d?(f.next=e.head,e.head=f):(f.next=
d.next,d.next=f);e.pushmod=e.modified=!0;e.length++;for(d=b.cbsets.head;null!=d;)e=d.elt,e.zip_listeners=!0,e.invalidate_pairs(),d=d.next;if(a)for(b=b.interactors.head;null!=b;)b.elt.wake(),b=b.next;c=c.next}this.options1.handler=v(this,this.cbtype_change1);this.options2.handler=v(this,this.cbtype_change2);this.with_uniquesets(!0)},removedFromSpace:function(){this.with_uniquesets(!1);for(var a=3==this.type,b=this.options1.includes.head,c=this.options2.includes.head;null!=b&&null!=c;){var d=b.elt,
e=c.elt;if(d==e){d.listeners.remove(this);for(e=d.cbsets.head;null!=e;){var f=e.elt;f.zip_listeners=!0;f.invalidate_pairs();e=e.next}if(a)for(d=d.interactors.head;null!=d;)d.elt.wake(),d=d.next;b=b.next;c=c.next}else if(d.id<e.id){d.listeners.remove(this);for(e=d.cbsets.head;null!=e;)f=e.elt,f.zip_listeners=!0,f.invalidate_pairs(),e=e.next;if(a)for(d=d.interactors.head;null!=d;)d.elt.wake(),d=d.next;b=b.next}else{e.listeners.remove(this);for(d=e.cbsets.head;null!=d;)f=d.elt,f.zip_listeners=!0,f.invalidate_pairs(),
d=d.next;if(a)for(d=e.interactors.head;null!=d;)d.elt.wake(),d=d.next;c=c.next}}for(;null!=b;){d=b.elt;d.listeners.remove(this);for(e=d.cbsets.head;null!=e;)f=e.elt,f.zip_listeners=!0,f.invalidate_pairs(),e=e.next;if(a)for(d=d.interactors.head;null!=d;)d.elt.wake(),d=d.next;b=b.next}for(;null!=c;){b=c.elt;b.listeners.remove(this);for(d=b.cbsets.head;null!=d;)e=d.elt,e.zip_listeners=!0,e.invalidate_pairs(),d=d.next;if(a)for(b=b.interactors.head;null!=b;)b.elt.wake(),b=b.next;c=c.next}this.options1.handler=
null;this.options2.handler=null},cbtype_change1:function(a,b,c){this.cbtype_change(this.options1,a,b,c)},cbtype_change2:function(a,b,c){this.cbtype_change(this.options2,a,b,c)},cbtype_change:function(a,b,c,d){this.removedFromSpace();if(c)if(d){c=null;for(d=a.includes.head;null!=d&&!(b.id<d.elt.id);){c=d;d=d.next}a=a.includes;null==qa.zpp_pool?d=new qa:(d=qa.zpp_pool,qa.zpp_pool=d.next,d.next=null);d.elt=b;b=d;null==c?(b.next=a.head,a.head=b):(b.next=c.next,c.next=b);a.pushmod=a.modified=!0;a.length++}else a.includes.remove(b);
else if(d){c=null;for(d=a.excludes.head;null!=d&&!(b.id<d.elt.id);){c=d;d=d.next}a=a.excludes;null==qa.zpp_pool?d=new qa:(d=qa.zpp_pool,qa.zpp_pool=d.next,d.next=null);d.elt=b;b=d;null==c?(b.next=a.head,a.head=b):(b.next=c.next,c.next=b);a.pushmod=a.modified=!0;a.length++}else a.excludes.remove(b);this.addedToSpace()},__class__:vc});var Ap=function(){this.outer=this.handler=this.includes=this.excludes=this.wrap_includes=this.wrap_excludes=null};i["zpp_nape.callbacks.ZPP_OptionType"]=Ap;Ap.__name__=
["zpp_nape","callbacks","ZPP_OptionType"];Ap.prototype={setup_includes:function(){this.wrap_includes=Zg.get(this.includes,!0)},setup_excludes:function(){this.wrap_excludes=Zg.get(this.excludes,!0)},nonemptyintersection:function(a,b){for(var c=!1,d=a.head,e=b.head;null!=e&&null!=d;){var f=e.elt,g=d.elt;if(f==g){c=!0;break}else f.id<g.id?e=e.next:d=d.next}return c},__class__:Ap};var ri=function(){this.pre_dt=0;this.cbTypes=this.cbSet=null;this.ignore=this.__velocity=!1;this.component=null;this.breakUnderForce=
this.breakUnderError=this.removeOnBreak=!1;this.frequency=this.damping=this.maxForce=this.maxError=0;this.active=this.stiff=!1;this.compound=this.space=null;this.id=0;this.outer=null;this.__velocity=!1;this.id=rf.Constraint();this.active=this.stiff=!0;this.ignore=!1;this.frequency=10;this.damping=1;this.maxError=this.maxForce=Infinity;this.breakUnderForce=!1;this.removeOnBreak=!0;this.pre_dt=-1;this.cbTypes=new Wh};i["zpp_nape.constraint.ZPP_Constraint"]=ri;ri.__name__=["zpp_nape","constraint","ZPP_Constraint"];
ri.prototype={immutable_midstep:function(a){if(null!=this.space&&this.space.midstep)throw new h("Error: Constraint::"+a+" cannot be set during space step()");},insert_cbtype:function(a){if(!this.cbTypes.has(a)){null!=this.space&&(this.dealloc_cbSet(),a.constraints.add(this));for(var b=null,c=this.cbTypes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}var c=this.cbTypes,d;null==qa.zpp_pool?d=new qa:(d=qa.zpp_pool,qa.zpp_pool=d.next,d.next=null);d.elt=a;a=d;null==b?(a.next=c.head,c.head=a):(a.next=b.next,
b.next=a);c.pushmod=c.modified=!0;c.length++;null!=this.space&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){if(null!=(this.cbSet=this.space.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.constraints.add(this)},dealloc_cbSet:function(){if(null!=this.cbSet){this.cbSet.constraints.remove(this);if(0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var a=this.cbSet;a.listeners.clear();a.zip_listeners=!0;a.bodylisteners.clear();a.zip_bodylisteners=!0;a.conlisteners.clear();
for(a.zip_conlisteners=!0;null!=a.cbTypes.head;)a.cbTypes.pop_unsafe().cbsets.remove(a);a.next=ea.zpp_pool;ea.zpp_pool=a}this.cbSet=null}},activate:function(){null!=this.space&&this.activeInSpace()},deactivate:function(){null!=this.space&&this.inactiveOrOutSpace()},addedToSpace:function(){this.active&&this.activeInSpace();this.activeBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.add(this),a=a.next},removedFromSpace:function(){this.active&&this.inactiveOrOutSpace();this.inactiveBodies();
for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.remove(this),a=a.next},activeInSpace:function(){this.alloc_cbSet();null==Ef.zpp_pool?this.component=new Ef:(this.component=Ef.zpp_pool,Ef.zpp_pool=this.component.next,this.component.next=null);this.component.isBody=!1;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();var a=this.component;a.body=null;a.constraint=null;a.next=Ef.zpp_pool;Ef.zpp_pool=a;this.component=null},activeBodies:function(){},inactiveBodies:function(){},
clearcache:function(){},validate:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(){return!1},broken:function(){},warmStart:function(){},preStep:function(){return!1},applyImpulseVel:function(){return!1},applyImpulsePos:function(){return!1},wake:function(){null!=this.space&&this.space.wake_constraint(this)},__class__:ri};var vl=function(){this.stepped=!1;this.kMassa=this.kMassb=this.kMassc=this.jAccx=this.jAccy=this.jMax=this.gamma=this.biasx=this.biasy=0;this.wrap_a2=
null;this.a2localx=this.a2localy=this.a2relx=this.a2rely=0;this.wrap_a1=this.b2=null;this.a1localx=this.a1localy=this.a1relx=this.a1rely=0;this.outer_zn=this.b1=null;ri.call(this);this.stepped=!1;this.jAccy=this.jAccx=0;this.jMax=Infinity;this.a2rely=this.a2relx=this.a2localy=this.a2localx=this.a1rely=this.a1relx=this.a1localy=this.a1localx=0};i["zpp_nape.constraint.ZPP_PivotJoint"]=vl;vl.__name__=["zpp_nape","constraint","ZPP_PivotJoint"];vl.__super__=ri;vl.prototype=z(ri.prototype,{activeBodies:function(){null!=
this.b1&&this.b1.constraints.add(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(a){this.immutable_midstep("Constraint::a1");this.a1localx=a.x;this.a1localy=a.y;this.wake()},setup_a1:function(){var a=this.a1localx,
b=this.a1localy;if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");var c;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner){var d;null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=!1;d.x=a;d.y=b;c.zpp_inner=d;c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");
null!=d._isimmutable&&d._isimmutable();if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(c.zpp_inner.x==a){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=c.zpp_inner.y==b}else d=!1;d||(c.zpp_inner.x=a,c.zpp_inner.y=b,a=c.zpp_inner,null!=a._invalidate&&a._invalidate(a))}c.zpp_inner.weak=
!1;this.wrap_a1=c;this.wrap_a1.zpp_inner._inuse=!0;this.wrap_a1.zpp_inner._validate=v(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=v(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(a){this.immutable_midstep("Constraint::a2");this.a2localx=a.x;this.a2localy=a.y;this.wake()},setup_a2:function(){var a=this.a2localx,b=this.a2localy;if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");
var c;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner){var d;null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=!1;d.x=a;d.y=b;c.zpp_inner=d;c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();
if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(c.zpp_inner.x==a){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=c.zpp_inner.y==b}else d=!1;d||(c.zpp_inner.x=a,c.zpp_inner.y=b,a=c.zpp_inner,null!=a._invalidate&&a._invalidate(a))}c.zpp_inner.weak=!1;this.wrap_a2=
c;this.wrap_a2.zpp_inner._inuse=!0;this.wrap_a2.zpp_inner._validate=v(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=v(this,this.invalidate_a2)},validate:function(){if(null==this.b1||null==this.b2)throw new h("Error: PivotJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new h("Error: PivotJoint cannot be simulated with body1 == body2 (body1=body2="+this.b1.outer.toString()+")");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new h("Error: Constraints must have each body within the same space to which the constraint has been assigned (body1="+
this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")");if(2!=this.b1.type&&2!=this.b2.type)throw new h("Error: Constraints cannot have both bodies non-dynamic (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")");},wake_connected:function(){null!=this.b1&&2==this.b1.type&&this.b1.wake();null!=this.b2&&2==this.b2.type&&this.b2.wake()},forest:function(){if(2==this.b1.type){var a;if(this.b1.component==this.b1.component.parent)a=this.b1.component;else{a=this.b1.component;
for(var b=null;a!=a.parent;){var c=a.parent;a.parent=b;b=a;a=c}for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;){var d=b.parent;b.parent=c;c=b;b=d}for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}if(2==this.b2.type){if(this.b2.component==this.b2.component.parent)a=this.b2.component;else{a=this.b2.component;for(b=null;a!=a.parent;)c=a.parent,
a.parent=b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}},pair_exists:function(a,b){return this.b1.id==a&&this.b2.id==b?!0:this.b1.id==b?this.b2.id==a:!1},clearcache:function(){this.jAccy=this.jAccx=0;this.pre_dt=-1},preStep:function(a){-1==this.pre_dt&&
(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;this.stepped=!0;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var c=this.b1.smass+this.b2.smass;this.kMassa=c;this.kMassb=0;this.kMassc=c;if(0!=this.b1.sinertia){var c=this.a1relx*this.b1.sinertia,d=this.a1rely*this.b1.sinertia;
this.kMassa+=d*this.a1rely;this.kMassb+=-d*this.a1relx;this.kMassc+=c*this.a1relx}0!=this.b2.sinertia&&(c=this.a2relx*this.b2.sinertia,d=this.a2rely*this.b2.sinertia,this.kMassa+=d*this.a2rely,this.kMassb+=-d*this.a2relx,this.kMassc+=c*this.a2relx);c=this.kMassa*this.kMassc-this.kMassb*this.kMassb;c!=c?(this.kMassa=this.kMassb=this.kMassc=0,c=3):0==c?(c=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,c|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,c|=2),this.kMassb=0):(c=1/
c,d=this.kMassc*c,this.kMassc=this.kMassa*c,this.kMassa=d,this.kMassb*=-c,c=0);0!=(c&1)&&(this.jAccx=0);0!=(c&2)&&(this.jAccy=0);if(this.stiff)this.gamma=this.biasy=this.biasx=0;else{d=2*Math.PI*this.frequency;this.gamma=1/(a*d*(2*this.damping+d*a));c=1/(1+this.gamma);d=a*d*d*this.gamma;this.gamma*=c;this.kMassa*=c;this.kMassb*=c;this.kMassc*=c;this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);if(this.breakUnderError&&this.biasx*
this.biasx+this.biasy*this.biasy>this.maxError*this.maxError)return!0;c=-d;this.biasx*=c;this.biasy*=c;c=this.maxError;d=this.biasx*this.biasx+this.biasy*this.biasy;d>c*c&&(c*=1/Math.sqrt(d),this.biasx*=c,this.biasy*=c)}this.jAccx*=b;this.jAccy*=b;this.jMax=this.maxForce*a;return!1},warmStart:function(){var a=this.b1.imass;this.b1.velx-=this.jAccx*a;this.b1.vely-=this.jAccy*a;a=this.b2.imass;this.b2.velx+=this.jAccx*a;this.b2.vely+=this.jAccy*a;this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely)*
this.b1.iinertia;this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely)*this.b2.iinertia},applyImpulseVel:function(){var a=0,b=0,a=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),b=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel)),c=0,d=0,c=this.biasx-a,d=this.biasy-b,a=this.kMassa*
c+this.kMassb*d,d=this.kMassb*c+this.kMassc*d,b=this.gamma,c=a-this.jAccx*b,d=d-this.jAccy*b,b=a=0,a=this.jAccx,b=this.jAccy;this.jAccx+=1*c;this.jAccy+=1*d;if(this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else this.stiff||(c=this.jMax,d=this.jAccx*this.jAccx+this.jAccy*this.jAccy,d>c*c&&(c*=1/Math.sqrt(d),this.jAccx*=c,this.jAccy*=c));c=this.jAccx-a;d=this.jAccy-b;a=this.b1.imass;this.b1.velx-=c*a;this.b1.vely-=d*a;a=this.b2.imass;this.b2.velx+=
c*a;this.b2.vely+=d*a;this.b1.angvel-=(d*this.a1relx-c*this.a1rely)*this.b1.iinertia;this.b2.angvel+=(d*this.a2relx-c*this.a2rely)*this.b2.iinertia;return!1},applyImpulsePos:function(){var a=0,b=0,a=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,b=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,c=0,d=0,c=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,d=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,e=0,f=0,e=this.b2.posx+c-(this.b1.posx+a),f=this.b2.posy+d-(this.b1.posy+
b);if(this.breakUnderError&&e*e+f*f>this.maxError*this.maxError)return!0;if(e*e+f*f<u.constraintLinearSlop*u.constraintLinearSlop)return!1;var e=0.5*e,f=0.5*f,g=0,j=0;if(6<e*e+f*f&&(j=this.b1.smass+this.b2.smass,j>u.epsilon)){var j=0.75/j,g=-e*j,j=-f*j,h=g*g+j*j;400<h&&(h=20*(1/Math.sqrt(h)),g*=h,j*=h);h=this.b1.imass;this.b1.posx-=g*h;this.b1.posy-=j*h;h=this.b2.imass;this.b2.posx+=g*h;this.b2.posy+=j*h;e=this.b2.posx+c-(this.b1.posx+a);f=this.b2.posy+d-(this.b1.posy+b);e*=0.5;f*=0.5}var i=h=0,k=
0,h=g=this.b1.smass+this.b2.smass,i=0,k=g;0!=this.b1.sinertia&&(g=a*this.b1.sinertia,j=b*this.b1.sinertia,h+=j*b,i+=-j*a,k+=g*a);0!=this.b2.sinertia&&(g=c*this.b2.sinertia,j=d*this.b2.sinertia,h+=j*d,i+=-j*c,k+=g*c);g=-e;j=-f;e=g*g+j*j;36<e&&(e=6*(1/Math.sqrt(e)),g*=e,j*=e);e=h*k-i*i;e!=e?g=j=0:0==e?(g=0!=h?g/h:0,j=0!=k?j/k:0):(e=1/e,k=e*(k*g-i*j),j=e*(h*j-i*g),g=k);h=this.b1.imass;this.b1.posx-=g*h;this.b1.posy-=j*h;h=this.b2.imass;this.b2.posx+=g*h;this.b2.posy+=j*h;h=this.b1;a=-(j*a-g*b)*this.b1.iinertia;
h.rot+=a;1.0E-4<a*a?(h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot)):(i=a*a,b=1-0.5*i,i=1-i*i/8,k=(b*h.axisx+a*h.axisy)*i,h.axisy=(b*h.axisy-a*h.axisx)*i,h.axisx=k);a=this.b2;c=(j*c-g*d)*this.b2.iinertia;a.rot+=c;1.0E-4<c*c?(a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot)):(g=c*c,d=1-0.5*g,g=1-g*g/8,b=(d*a.axisx+c*a.axisy)*g,a.axisy=(d*a.axisy-c*a.axisx)*g,a.axisx=b);return!1},__class__:vl});var wl=function(){this.stepped=!1;this.phase=this.kMassa=this.kMassb=this.kMassd=this.kMassc=this.kMasse=
this.kMassf=this.jAccx=this.jAccy=this.jAccz=this.jMax=this.gamma=this.biasx=this.biasy=this.biasz=0;this.wrap_a2=null;this.a2localx=this.a2localy=this.a2relx=this.a2rely=0;this.wrap_a1=this.b2=null;this.a1localx=this.a1localy=this.a1relx=this.a1rely=0;this.outer_zn=this.b1=null;ri.call(this);this.jAccz=this.jAccy=this.jAccx=this.phase=0;this.jMax=Infinity;this.stepped=!1;this.a2rely=this.a2relx=this.a2localy=this.a2localx=this.a1rely=this.a1relx=this.a1localy=this.a1localx=0};i["zpp_nape.constraint.ZPP_WeldJoint"]=
wl;wl.__name__=["zpp_nape","constraint","ZPP_WeldJoint"];wl.__super__=ri;wl.prototype=z(ri.prototype,{activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(a){this.immutable_midstep("Constraint::a1");
this.a1localx=a.x;this.a1localy=a.y;this.wake()},setup_a1:function(){var a=this.a1localx,b=this.a1localy;if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");var c;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner){var d;null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=!1;d.x=a;d.y=b;c.zpp_inner=d;c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(c.zpp_inner.x==a){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=c.zpp_inner.y==b}else d=!1;d||(c.zpp_inner.x=
a,c.zpp_inner.y=b,a=c.zpp_inner,null!=a._invalidate&&a._invalidate(a))}c.zpp_inner.weak=!1;this.wrap_a1=c;this.wrap_a1.zpp_inner._inuse=!0;this.wrap_a1.zpp_inner._validate=v(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=v(this,this.invalidate_a1)},validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(a){this.immutable_midstep("Constraint::a2");this.a2localx=a.x;this.a2localy=a.y;this.wake()},setup_a2:function(){var a=
this.a2localx,b=this.a2localy;if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");var c;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner){var d;null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=!1;d.x=a;d.y=b;c.zpp_inner=d;c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;
if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(c.zpp_inner.x==a){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=c.zpp_inner.y==b}else d=!1;d||(c.zpp_inner.x=a,
c.zpp_inner.y=b,a=c.zpp_inner,null!=a._invalidate&&a._invalidate(a))}c.zpp_inner.weak=!1;this.wrap_a2=c;this.wrap_a2.zpp_inner._inuse=!0;this.wrap_a2.zpp_inner._validate=v(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=v(this,this.invalidate_a2)},validate:function(){if(null==this.b1||null==this.b2)throw new h("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new h("Error: WeldJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=
this.space)throw new h("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw new h("Error: Constraints cannot have both bodies non-dynamic");},wake_connected:function(){null!=this.b1&&2==this.b1.type&&this.b1.wake();null!=this.b2&&2==this.b2.type&&this.b2.wake()},forest:function(){if(2==this.b1.type){var a;if(this.b1.component==this.b1.component.parent)a=this.b1.component;else{a=this.b1.component;for(var b=
null;a!=a.parent;){var c=a.parent;a.parent=b;b=a;a=c}for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;){var d=b.parent;b.parent=c;c=b;b=d}for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}if(2==this.b2.type){if(this.b2.component==this.b2.component.parent)a=this.b2.component;else{a=this.b2.component;for(b=null;a!=a.parent;)c=a.parent,a.parent=
b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}},pair_exists:function(a,b){return this.b1.id==a&&this.b2.id==b?!0:this.b1.id==b?this.b2.id==a:!1},clearcache:function(){this.jAccz=this.jAccy=this.jAccx=0;this.pre_dt=-1},preStep:function(a){-1==this.pre_dt&&
(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;this.stepped=!0;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var c=this.b1.smass+this.b2.smass;this.kMassa=c;this.kMassb=0;this.kMassd=c;this.kMassf=this.kMasse=this.kMassc=0;if(0!=this.b1.sinertia){var c=this.a1relx*this.b1.sinertia,
d=this.a1rely*this.b1.sinertia;this.kMassa+=d*this.a1rely;this.kMassb+=-d*this.a1relx;this.kMassd+=c*this.a1relx;this.kMassc+=-d;this.kMasse+=c;this.kMassf+=this.b1.sinertia}0!=this.b2.sinertia&&(c=this.a2relx*this.b2.sinertia,d=this.a2rely*this.b2.sinertia,this.kMassa+=d*this.a2rely,this.kMassb+=-d*this.a2relx,this.kMassd+=c*this.a2relx,this.kMassc+=-d,this.kMasse+=c,this.kMassf+=this.b2.sinertia);c=this.kMassa*(this.kMassd*this.kMassf-this.kMasse*this.kMasse)+this.kMassb*(this.kMassc*this.kMasse-
this.kMassb*this.kMassf)+this.kMassc*(this.kMassb*this.kMasse-this.kMassc*this.kMassd);if(c!=c)this.kMassf=this.kMasse=this.kMassc=this.kMassd=this.kMassb=this.kMassa=0,c=7;else if(0==c)c=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,c|=1),0!=this.kMassd?this.kMassd=1/this.kMassd:(this.kMassd=0,c|=2),0!=this.kMassf?this.kMassf=1/this.kMassf:(this.kMassf=0,c|=4),this.kMassb=this.kMassc=this.kMasse=0;else{var c=1/c,d=c*(this.kMasse*this.kMassc-this.kMassb*this.kMassf),e=c*(this.kMassa*this.kMassf-
this.kMassc*this.kMassc),f=c*(this.kMassb*this.kMasse-this.kMassc*this.kMassd),g=c*(this.kMassb*this.kMassc-this.kMassa*this.kMasse),j=c*(this.kMassa*this.kMassd-this.kMassb*this.kMassb);this.kMassa=c*(this.kMassd*this.kMassf-this.kMasse*this.kMasse);this.kMassb=d;this.kMassd=e;this.kMassc=f;this.kMasse=g;this.kMassf=j;c=0}0!=(c&1)&&(this.jAccx=0);0!=(c&2)&&(this.jAccy=0);0!=(c&4)&&(this.jAccz=0);if(this.stiff)this.gamma=this.biasz=this.biasy=this.biasx=0;else{d=2*Math.PI*this.frequency;this.gamma=
1/(a*d*(2*this.damping+d*a));c=1/(1+this.gamma);d=a*d*d*this.gamma;this.gamma*=c;this.kMassa*=c;this.kMassb*=c;this.kMassd*=c;this.kMassc*=c;this.kMasse*=c;this.kMassf*=c;this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);this.biasz=this.b2.rot-this.b1.rot-this.phase;if(this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz>this.maxError*this.maxError)return!0;c=-d;this.biasx*=c;this.biasy*=
c;this.biasz*=c;c=this.maxError;d=this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz;d>c*c&&(c*=1/Math.sqrt(d),this.biasx*=c,this.biasy*=c,this.biasz*=c)}this.jAccx*=b;this.jAccy*=b;this.jAccz*=b;this.jMax=this.maxForce*a;return!1},warmStart:function(){var a=this.b1.imass;this.b1.velx-=this.jAccx*a;this.b1.vely-=this.jAccy*a;a=this.b2.imass;this.b2.velx+=this.jAccx*a;this.b2.vely+=this.jAccy*a;this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)*this.b1.iinertia;
this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz)*this.b2.iinertia},applyImpulseVel:function(){var a=0,b=0,c=0,a=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),b=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel)),c=this.b2.angvel+this.b2.kinangvel-this.b1.angvel-this.b1.kinangvel,
d=0,e=0,f=0,d=this.biasx-a,e=this.biasy-b,f=this.biasz-c,a=this.kMassa*d+this.kMassb*e+this.kMassc*f,b=this.kMassb*d+this.kMassd*e+this.kMasse*f,f=this.kMassc*d+this.kMasse*e+this.kMassf*f,c=this.gamma,d=a-this.jAccx*c,e=b-this.jAccy*c,f=f-this.jAccz*c,c=b=a=0,a=this.jAccx,b=this.jAccy,c=this.jAccz;this.jAccx+=1*d;this.jAccy+=1*e;this.jAccz+=1*f;if(this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz>this.jMax*this.jMax)return!0}else this.stiff||(d=this.jMax,
e=this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz,e>d*d&&(d*=1/Math.sqrt(e),this.jAccx*=d,this.jAccy*=d,this.jAccz*=d));d=this.jAccx-a;e=this.jAccy-b;f=this.jAccz-c;a=this.b1.imass;this.b1.velx-=d*a;this.b1.vely-=e*a;a=this.b2.imass;this.b2.velx+=d*a;this.b2.vely+=e*a;this.b1.angvel-=(e*this.a1relx-d*this.a1rely+f)*this.b1.iinertia;this.b2.angvel+=(e*this.a2relx-d*this.a2rely+f)*this.b2.iinertia;return!1},applyImpulsePos:function(){var a=0,b=0,a=this.b1.axisy*this.a1localx-this.b1.axisx*
this.a1localy,b=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,c=0,d=0,c=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,d=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,e=0,f=0,g=0,e=this.b2.posx+c-(this.b1.posx+a),f=this.b2.posy+d-(this.b1.posy+b),g=this.b2.rot-this.b1.rot-this.phase,j=0,h=0,i=0;if(this.breakUnderError&&e*e+f*f+g*g>this.maxError*this.maxError)return!0;j=!0;e*e+f*f<u.constraintLinearSlop*u.constraintLinearSlop&&(j=!1,f=e=0);h=u.constraintAngularSlop;if(g*
g<h*h)if(j)g=0;else return!1;e*=0.5;f*=0.5;g*=0.5;6<e*e+f*f&&(h=this.b1.smass+this.b2.smass,h>u.epsilon&&(h=0.75/h,j=-e*h,h*=-f,i=j*j+h*h,400<i&&(i=20*(1/Math.sqrt(i)),j*=i,h*=i),i=this.b1.imass,this.b1.posx-=j*i,this.b1.posy-=h*i,i=this.b2.imass,this.b2.posx+=j*i,this.b2.posy+=h*i,e=this.b2.posx+c-(this.b1.posx+a),f=this.b2.posy+d-(this.b1.posy+b),g=this.b2.rot-this.b1.rot-this.phase,e*=0.5,f*=0.5,g*=0.5));var k=0,l=0,n=0,o=0,m=0,q=0,k=j=this.b1.smass+this.b2.smass,l=0,n=j,q=m=o=0;0!=this.b1.sinertia&&
(j=a*this.b1.sinertia,h=b*this.b1.sinertia,k+=h*b,l+=-h*a,n+=j*a,o+=-h,m+=j,q+=this.b1.sinertia);0!=this.b2.sinertia&&(j=c*this.b2.sinertia,h=d*this.b2.sinertia,k+=h*d,l+=-h*c,n+=j*c,o+=-h,m+=j,q+=this.b2.sinertia);j=-e;h=-f;i=-g;e=j*j+h*h;36<e&&(e=6*(1/Math.sqrt(e)),j*=e,h*=e);e=k*(n*q-m*m)+l*(o*m-l*q)+o*(l*m-o*n);if(e!=e)j=h=i=0;else if(0==e)j=0!=k?j/k:0,h=0!=n?h/n:0,i=0!=q?i/q:0;else var e=1/e,r=m*o-l*q,f=l*m-o*n,g=l*o-k*m,m=e*(j*(n*q-m*m)+h*r+i*f),o=e*(j*r+h*(k*q-o*o)+i*g),i=e*(j*f+h*g+i*(k*n-
l*l)),j=m,h=o;k=this.b1.imass;this.b1.posx-=j*k;this.b1.posy-=h*k;k=this.b2.imass;this.b2.posx+=j*k;this.b2.posy+=h*k;k=this.b1;a=-(h*a-j*b+i)*this.b1.iinertia;k.rot+=a;1.0E-4<a*a?(k.axisx=Math.sin(k.rot),k.axisy=Math.cos(k.rot)):(l=a*a,b=1-0.5*l,l=1-l*l/8,n=(b*k.axisx+a*k.axisy)*l,k.axisy=(b*k.axisy-a*k.axisx)*l,k.axisx=n);a=this.b2;c=(h*c-j*d+i)*this.b2.iinertia;a.rot+=c;1.0E-4<c*c?(a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot)):(b=c*c,d=1-0.5*b,b=1-b*b/8,j=(d*a.axisx+c*a.axisy)*b,a.axisy=(d*
a.axisy-c*a.axisx)*b,a.axisx=j);return!1},__class__:wl});var Gc=function(){this.colarb=this.fluidarb=this.sensorarb=null;this.type=0;this.b1=this.b2=this.ws1=this.ws2=this.pair=null;this.invalidated=!1;this.immState=0;this.intchange=this.presentable=this.continuous=this.fresh=!1;this.present=0;this.active=this.cleared=this.sleeping=!1;this.id=this.di=this.stamp=this.up_stamp=this.sleep_stamp=this.endGenerated=0;this.outer=null};i["zpp_nape.dynamics.ZPP_Arbiter"]=Gc;Gc.__name__=["zpp_nape","dynamics",
"ZPP_Arbiter"];Gc.prototype={wrapper:function(){null==this.outer&&(Gc.internal=!0,this.type==Gc.COL?(this.colarb.outer_zn=new xl,this.outer=this.colarb.outer_zn):this.type==Gc.FLUID?(this.fluidarb.outer_zn=new yl,this.outer=this.fluidarb.outer_zn):this.outer=new Lh,this.outer.zpp_inner=this,Gc.internal=!1);return this.outer},__class__:Gc};var ch=function(){this.next=null;Gc.call(this);this.type=Gc.SENSOR;this.sensorarb=this};i["zpp_nape.dynamics.ZPP_SensorArbiter"]=ch;ch.__name__=["zpp_nape","dynamics",
"ZPP_SensorArbiter"];ch.__super__=Gc;ch.prototype=z(Gc.prototype,{__class__:ch});var Pf=function(){this.pre_dt=0;this.mutable=!1;this.wrap_position=null;this.wMass=this.adamp=this.agamma=this.vMassa=this.vMassb=this.vMassc=this.dampx=this.dampy=this.lgamma=this.nx=this.ny=this.buoyx=this.buoyy=0;this.nodrag=!1;this.centroidx=this.centroidy=this.overlap=this.r1x=this.r1y=this.r2x=this.r2y=0;this.outer_zn=this.next=null;Gc.call(this);this.type=Gc.FLUID;this.fluidarb=this;this.buoyy=this.buoyx=0;this.pre_dt=
-1};i["zpp_nape.dynamics.ZPP_FluidArbiter"]=Pf;Pf.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"];Pf.__super__=Gc;Pf.prototype=z(Gc.prototype,{__class__:Pf});var Qf=function(){this.pre_dt=0;this.stat=this.mutable=!1;this.next=null;this.hc2=this.hpc2=!1;this.c1=this.oc1=this.c2=this.oc2=null;this.__ref_vertex=0;this.__ref_edge1=this.__ref_edge2=null;this.biasCoef=0;this.rev=!1;this.kMassa=this.kMassb=this.kMassc=this.Ka=this.Kb=this.Kc=this.rMass=this.jrAcc=this.rn1a=this.rt1a=this.rn1b=this.rt1b=
this.rn2a=this.rt2a=this.rn2b=this.rt2b=this.k1x=this.k1y=this.k2x=this.k2y=this.surfacex=this.surfacey=this.lnormx=this.lnormy=this.lproj=this.radius=0;this.wrap_normal=null;this.nx=this.ny=0;this.s1=this.s2=this.contacts=this.wrap_contacts=this.innards=null;this.userdef_dyn_fric=this.userdef_stat_fric=this.userdef_restitution=this.userdef_rfric=!1;this.dyn_fric=this.stat_fric=this.restitution=this.rfric=0;this.outer_zn=null;Gc.call(this);this.pre_dt=-1;this.contacts=new sa;this.innards=new Gm;this.type=
Gc.COL;this.colarb=this};i["zpp_nape.dynamics.ZPP_ColArbiter"]=Qf;Qf.__name__=["zpp_nape","dynamics","ZPP_ColArbiter"];Qf.__super__=Gc;Qf.prototype=z(Gc.prototype,{__class__:Qf});var sa=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.dist=this.elasticity=0;this.fresh=!1;this.stamp=this.hash=0;this.active=this.posOnly=!1;this.arbiter=this.inner=null;this.px=this.py=0;this.outer=null;this.inner=new Gm};i["zpp_nape.dynamics.ZPP_Contact"]=sa;sa.__name__=["zpp_nape",
"dynamics","ZPP_Contact"];sa.prototype={wrapper:function(){null==this.outer&&(sa.internal=!0,this.outer=new On,sa.internal=!1,this.outer.zpp_inner=this);return this.outer},pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},__class__:sa};var Gm=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.r1x=this.r1y=this.r2x=this.r2y=this.nMass=this.tMass=this.bounce=this.friction=this.jnAcc=this.jtAcc=
this.lr1x=this.lr1y=this.lr2x=this.lr2y=0};i["zpp_nape.dynamics.ZPP_IContact"]=Gm;Gm.__name__=["zpp_nape","dynamics","ZPP_IContact"];Gm.prototype={add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},__class__:Gm};var Be=function(){this.collisionGroup=this.collisionMask=this.sensorGroup=this.sensorMask=this.fluidGroup=this.fluidMask=0;this.next=this.outer=this.shapes=null;this.shapes=new Mj;this.collisionGroup=this.sensorGroup=this.fluidGroup=1;this.collisionMask=
this.sensorMask=this.fluidMask=-1};i["zpp_nape.dynamics.ZPP_InteractionFilter"]=Be;Be.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"];Be.prototype={wrapper:function(){if(null==this.outer){this.outer=new Pn;var a=this.outer.zpp_inner;a.outer=null;a.next=Be.zpp_pool;Be.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},invalidate:function(){for(var a=this.shapes.head;null!=a;)a.elt.invalidate_filter(),a=a.next},__class__:Be};var Bp=function(){this.depth=0;this.group=this.interactors=null;
this.ignore=!1;this.outer=null};i["zpp_nape.dynamics.ZPP_InteractionGroup"]=Bp;Bp.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"];Bp.prototype={__class__:Bp};var sb=function(){this.wrap_max=null;this.maxx=this.maxy=0;this.wrap_min=null;this.minx=this.miny=0;this.outer=this.next=null;this._immutable=!1;this._invalidate=this._validate=null};i["zpp_nape.geom.ZPP_AABB"]=sb;sb.__name__=["zpp_nape","geom","ZPP_AABB"];sb.prototype={toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+
(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},__class__:sb};var Fk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Vec2"]=Fk;Fk.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"];Fk.prototype={add:function(a){var b;null==qg.zpp_pool?b=new qg:(b=qg.zpp_pool,qg.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){var c;null==qg.zpp_pool?c=new qg:(c=qg.zpp_pool,qg.zpp_pool=
c.next,c.next=null);c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=qg.zpp_pool;qg.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==
c&&(this.pushmod=!0));a=b;a.elt=null;a.next=qg.zpp_pool;qg.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;){var a=this.head;this.head=a.next;a.elt=null;a.next=qg.zpp_pool;qg.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--}this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Fk};var ka=function(){};i["zpp_nape.geom.ZPP_Collide"]=ka;ka.__name__=["zpp_nape","geom",
"ZPP_Collide"];ka.containTest=function(a,b){var c=a.aabb,d=b.aabb;if(d.minx>=c.minx&&d.miny>=c.miny&&d.maxx<=c.maxx&&d.maxy<=c.maxy){if(0==a.type){if(0==b.type){var c=a.circle.radius+-b.circle.radius,e=d=0,d=b.circle.worldCOMx-a.circle.worldCOMx,e=b.circle.worldCOMy-a.circle.worldCOMy;return d*d+e*e<=c*c}c=!0;for(d=b.polygon.gverts.next;null!=d;){var e=d,f=a.circle.radius,g=0,j=0,g=e.x-a.circle.worldCOMx,j=e.y-a.circle.worldCOMy;if(g*g+j*j<=f*f)d=d.next;else{c=!1;break}}return c}if(0==b.type){c=!0;
for(d=a.polygon.edges.head;null!=d;)if(e=d.elt,e.gnormx*b.circle.worldCOMx+e.gnormy*b.circle.worldCOMy+b.circle.radius<=e.gprojection)d=d.next;else{c=!1;break}return c}c=!0;for(d=a.polygon.edges.head;null!=d;){e=d.elt;f=-1.0E100;for(g=b.polygon.gverts.next;null!=g;)j=g,j=e.gnormx*j.x+e.gnormy*j.y,j>f&&(f=j),g=g.next;if(f<=e.gprojection)d=d.next;else{c=!1;break}}return c}return!1};ka.contactCollide=function(a,b,c,d){if(1==b.type)if(1==a.type){for(var e=!0,f=-1.0E100,g=-1,j=null,h=null,i=a.polygon.edges.head;null!=
i;){for(var k=i.elt,l=1.0E100,n=b.polygon.gverts.next;null!=n;){var o=n,m=k.gnormx*o.x+k.gnormy*o.y;m<l&&(l=m);if(l-k.gprojection<=f)break;n=n.next}l-=k.gprojection;if(0<=l){e=!1;break}l>f&&(f=l,j=k,g=1);i=i.next}if(e){for(var q=b.polygon.edges.head;null!=q;){for(var r=q.elt,s=1.0E100,t=a.polygon.gverts.next;null!=t;){var v=t,z=r.gnormx*v.x+r.gnormy*v.y;z<s&&(s=z);if(s-r.gprojection<=f)break;t=t.next}s-=r.gprojection;if(0<=s){e=!1;break}s>f&&(f=s,h=r,g=2);q=q.next}if(e){var w,y,G;1==g?(w=b.polygon,
y=j,G=1):(w=a.polygon,y=h,G=-1);for(var H=null,F=1.0E100,E=w.edges.head;null!=E;){var J=E.elt,O=y.gnormx*J.gnormx+y.gnormy*J.gnormy;O<F&&(F=O,H=J);E=E.next}var P=0,K=0,P=H.gp0.x,K=H.gp0.y,M=0,rc=0,M=H.gp1.x,rc=H.gp1.y,L=0,V=0,L=M-P,V=rc-K,Y=y.gnormy*P-y.gnormx*K,Ab=y.gnormy*M-y.gnormx*rc,S=1/(Ab-Y),kc=(-y.tp1-Y)*S;kc>u.epsilon&&(P+=L*kc,K+=V*kc);var qf=(-y.tp0-Ab)*S;qf<-u.epsilon&&(M+=L*qf,rc+=V*qf);var va=0,ka=0,Z=G,va=y.gnormx*Z,ka=y.gnormy*Z;c.lnormx=y.lnormx;c.lnormy=y.lnormy;c.lproj=y.lprojection;
c.radius=0;c.rev=d!=(-1==G);c.ptype=c.rev?1:0;var U=P*y.gnormx+K*y.gnormy-y.gprojection,Mc=M*y.gnormx+rc*y.gnormy-y.gprojection;if(0<U&&0<Mc)return!1;d&&(va=-va,ka=-ka);for(var fa=P-0.5*y.gnormx*U,la=K-0.5*y.gnormy*U,ha=c.rev?1:0,ye=null,ca=c.contacts.next;null!=ca;){var Vc=ca;if(ha==Vc.hash){ye=Vc;break}ca=ca.next}if(null==ye){null==sa.zpp_pool?ye=new sa:(ye=sa.zpp_pool,sa.zpp_pool=ye.next,ye.next=null);var oa=ye.inner;oa.jnAcc=oa.jtAcc=0;ye.hash=ha;ye.fresh=!0;ye.arbiter=c;c.jrAcc=0;var Yb=c.contacts;
ye._inuse=!0;var tb=ye;tb.next=Yb.next;Yb.next=tb;Yb.modified=!0;Yb.length++;c.innards.add(oa)}else ye.fresh=!1;ye.px=fa;ye.py=la;c.nx=va;c.ny=ka;ye.dist=U;ye.stamp=c.stamp;ye.posOnly=0<U;var ng=ye,P=P-1*w.body.posx,K=K-1*w.body.posy;ng.inner.lr1x=P*w.body.axisy+K*w.body.axisx;ng.inner.lr1y=K*w.body.axisy-P*w.body.axisx;for(var Ug=M-0.5*y.gnormx*Mc,Da=rc-0.5*y.gnormy*Mc,X=c.rev?0:1,Le=null,lc=c.contacts.next;null!=lc;){var Md=lc;if(X==Md.hash){Le=Md;break}lc=lc.next}if(null==Le){null==sa.zpp_pool?
Le=new sa:(Le=sa.zpp_pool,sa.zpp_pool=Le.next,Le.next=null);var I=Le.inner;I.jnAcc=I.jtAcc=0;Le.hash=X;Le.fresh=!0;Le.arbiter=c;c.jrAcc=0;var Sa=c.contacts;Le._inuse=!0;var ef=Le;ef.next=Sa.next;Sa.next=ef;Sa.modified=!0;Sa.length++;c.innards.add(I)}else Le.fresh=!1;Le.px=Ug;Le.py=Da;c.nx=va;c.ny=ka;Le.dist=Mc;Le.stamp=c.stamp;Le.posOnly=0<Mc;ng=Le;M-=1*w.body.posx;rc-=1*w.body.posy;ng.inner.lr1x=M*w.body.axisy+rc*w.body.axisx;ng.inner.lr1y=rc*w.body.axisy-M*w.body.axisx;1==g?(c.__ref_edge1=y,c.__ref_edge2=
H):(c.__ref_edge2=y,c.__ref_edge1=H);return!0}}}else{for(var pa=-1.0E100,ga=!0,wa=null,ra=null,Ja=b.polygon.gverts.next,Ea=b.polygon.edges.head;null!=Ea;){var A=Ea.elt,xa=A.gnormx*a.circle.worldCOMx+A.gnormy*a.circle.worldCOMy-A.gprojection-a.circle.radius;if(0<xa){ga=!1;break}xa>pa&&(pa=xa,wa=A,ra=Ja);Ja=Ja.next;Ea=Ea.next}if(ga){var Ma=ra,$a=null==ra.next?b.polygon.gverts.next:ra.next,za=a.circle.worldCOMy*wa.gnormx-a.circle.worldCOMx*wa.gnormy;if(za<=Ma.y*wa.gnormx-Ma.x*wa.gnormy){var Db=a.circle.radius,
ya=0,Ua=0,ya=Ma.x-a.circle.worldCOMx,Ua=Ma.y-a.circle.worldCOMy,Ba=ya*ya+Ua*Ua,T;if(Ba>Db*Db)T=null;else if(Ba<u.epsilon*u.epsilon){for(var $=a.circle.worldCOMx,na=a.circle.worldCOMy,ia=null,Pc=c.contacts.next;null!=Pc;){var ac=Pc;if(0==ac.hash){ia=ac;break}Pc=Pc.next}if(null==ia){null==sa.zpp_pool?ia=new sa:(ia=sa.zpp_pool,sa.zpp_pool=ia.next,ia.next=null);var da=ia.inner;da.jnAcc=da.jtAcc=0;ia.hash=0;ia.fresh=!0;ia.arbiter=c;c.jrAcc=0;var kb=c.contacts;ia._inuse=!0;var C=ia;C.next=kb.next;kb.next=
C;kb.modified=!0;kb.length++;c.innards.add(da)}else ia.fresh=!1;ia.px=$;ia.py=na;c.nx=1;c.ny=0;ia.dist=-Db;ia.stamp=c.stamp;ia.posOnly=!1;T=ia}else{var W=1/Math.sqrt(Ba),ob=W<u.epsilon?1.0E100:1/W,ta=0.5+(a.circle.radius-0.5*Db)*W;if(d){for(var pb=a.circle.worldCOMx+ya*ta,ea=a.circle.worldCOMy+Ua*ta,Q=null,aa=c.contacts.next;null!=aa;){var Na=aa;if(0==Na.hash){Q=Na;break}aa=aa.next}if(null==Q){null==sa.zpp_pool?Q=new sa:(Q=sa.zpp_pool,sa.zpp_pool=Q.next,Q.next=null);var ba=Q.inner;ba.jnAcc=ba.jtAcc=
0;Q.hash=0;Q.fresh=!0;Q.arbiter=c;c.jrAcc=0;var ma=c.contacts;Q._inuse=!0;var ja=Q;ja.next=ma.next;ma.next=ja;ma.modified=!0;ma.length++;c.innards.add(ba)}else Q.fresh=!1;Q.px=pb;Q.py=ea;c.nx=-ya*W;c.ny=-Ua*W;Q.dist=ob-Db;Q.stamp=c.stamp;Q.posOnly=!1;T=Q}else{for(var Hb=a.circle.worldCOMx+ya*ta,bb=a.circle.worldCOMy+Ua*ta,ib=null,Oa=c.contacts.next;null!=Oa;){var Va=Oa;if(0==Va.hash){ib=Va;break}Oa=Oa.next}if(null==ib){null==sa.zpp_pool?ib=new sa:(ib=sa.zpp_pool,sa.zpp_pool=ib.next,ib.next=null);
var D=ib.inner;D.jnAcc=D.jtAcc=0;ib.hash=0;ib.fresh=!0;ib.arbiter=c;c.jrAcc=0;var lb=c.contacts;ib._inuse=!0;var Ta=ib;Ta.next=lb.next;lb.next=Ta;lb.modified=!0;lb.length++;c.innards.add(D)}else ib.fresh=!1;ib.px=Hb;ib.py=bb;c.nx=ya*W;c.ny=Ua*W;ib.dist=ob-Db;ib.stamp=c.stamp;ib.posOnly=!1;T=ib}}if(null!=T){var jb=T.inner;c.ptype=2;var gb=0,Ga=0,gb=Ma.x-b.polygon.body.posx,Ga=Ma.y-b.polygon.body.posy;c.__ref_edge1=wa;c.__ref_vertex=-1;d?(jb.lr1x=gb*b.polygon.body.axisy+Ga*b.polygon.body.axisx,jb.lr1y=
Ga*b.polygon.body.axisy-gb*b.polygon.body.axisx,jb.lr2x=a.circle.localCOMx,jb.lr2y=a.circle.localCOMy):(jb.lr2x=gb*b.polygon.body.axisy+Ga*b.polygon.body.axisx,jb.lr2y=Ga*b.polygon.body.axisy-gb*b.polygon.body.axisx,jb.lr1x=a.circle.localCOMx,jb.lr1y=a.circle.localCOMy);c.radius=a.circle.radius}return null!=T}if(za>=$a.y*wa.gnormx-$a.x*wa.gnormy){var Eb=a.circle.radius,cb=0,zb=0,cb=$a.x-a.circle.worldCOMx,zb=$a.y-a.circle.worldCOMy,Nc=cb*cb+zb*zb,rd;if(Nc>Eb*Eb)rd=null;else if(Nc<u.epsilon*u.epsilon){for(var Ha=
a.circle.worldCOMx,Ib=a.circle.worldCOMy,ub=null,wb=c.contacts.next;null!=wb;){var mb=wb;if(0==mb.hash){ub=mb;break}wb=wb.next}if(null==ub){null==sa.zpp_pool?ub=new sa:(ub=sa.zpp_pool,sa.zpp_pool=ub.next,ub.next=null);var qa=ub.inner;qa.jnAcc=qa.jtAcc=0;ub.hash=0;ub.fresh=!0;ub.arbiter=c;c.jrAcc=0;var B=c.contacts;ub._inuse=!0;var Bb=ub;Bb.next=B.next;B.next=Bb;B.modified=!0;B.length++;c.innards.add(qa)}else ub.fresh=!1;ub.px=Ha;ub.py=Ib;c.nx=1;c.ny=0;ub.dist=-Eb;ub.stamp=c.stamp;ub.posOnly=!1;rd=
ub}else{var db=1/Math.sqrt(Nc),ab=db<u.epsilon?1.0E100:1/db,x=0.5+(a.circle.radius-0.5*Eb)*db;if(d){for(var Nb=a.circle.worldCOMx+cb*x,Jb=a.circle.worldCOMy+zb*x,qb=null,Ca=c.contacts.next;null!=Ca;){var Qa=Ca;if(0==Qa.hash){qb=Qa;break}Ca=Ca.next}if(null==qb){null==sa.zpp_pool?qb=new sa:(qb=sa.zpp_pool,sa.zpp_pool=qb.next,qb.next=null);var Fa=qb.inner;Fa.jnAcc=Fa.jtAcc=0;qb.hash=0;qb.fresh=!0;qb.arbiter=c;c.jrAcc=0;var vb=c.contacts;qb._inuse=!0;var eb=qb;eb.next=vb.next;vb.next=eb;vb.modified=!0;
vb.length++;c.innards.add(Fa)}else qb.fresh=!1;qb.px=Nb;qb.py=Jb;c.nx=-cb*db;c.ny=-zb*db;qb.dist=ab-Eb;qb.stamp=c.stamp;qb.posOnly=!1;rd=qb}else{for(var Ob=a.circle.worldCOMx+cb*x,La=a.circle.worldCOMy+zb*x,Vb=null,sb=c.contacts.next;null!=sb;){var Aa=sb;if(0==Aa.hash){Vb=Aa;break}sb=sb.next}if(null==Vb){null==sa.zpp_pool?Vb=new sa:(Vb=sa.zpp_pool,sa.zpp_pool=Vb.next,Vb.next=null);var yb=Vb.inner;yb.jnAcc=yb.jtAcc=0;Vb.hash=0;Vb.fresh=!0;Vb.arbiter=c;c.jrAcc=0;var Ra=c.contacts;Vb._inuse=!0;var Xb=
Vb;Xb.next=Ra.next;Ra.next=Xb;Ra.modified=!0;Ra.length++;c.innards.add(yb)}else Vb.fresh=!1;Vb.px=Ob;Vb.py=La;c.nx=cb*db;c.ny=zb*db;Vb.dist=ab-Eb;Vb.stamp=c.stamp;Vb.posOnly=!1;rd=Vb}}if(null!=rd){var ua=rd.inner;c.ptype=2;var Pb=0,R=0,Pb=$a.x-b.polygon.body.posx,R=$a.y-b.polygon.body.posy;c.__ref_edge1=wa;c.__ref_vertex=1;d?(ua.lr1x=Pb*b.polygon.body.axisy+R*b.polygon.body.axisx,ua.lr1y=R*b.polygon.body.axisy-Pb*b.polygon.body.axisx,ua.lr2x=a.circle.localCOMx,ua.lr2y=a.circle.localCOMy):(ua.lr2x=
Pb*b.polygon.body.axisy+R*b.polygon.body.axisx,ua.lr2y=R*b.polygon.body.axisy-Pb*b.polygon.body.axisx,ua.lr1x=a.circle.localCOMx,ua.lr1y=a.circle.localCOMy);c.radius=a.circle.radius}return null!=rd}var Ia=0,Za=0,ae=a.circle.radius+0.5*pa,Ia=wa.gnormx*ae,Za=wa.gnormy*ae,Lb=0,Ic=0,Lb=a.circle.worldCOMx-Ia,Ic=a.circle.worldCOMy-Za,sc;if(d){for(var Ka=wa.gnormx,Wb=wa.gnormy,bc=null,me=c.contacts.next;null!=me;){var Kb=me;if(0==Kb.hash){bc=Kb;break}me=me.next}if(null==bc){null==sa.zpp_pool?bc=new sa:(bc=
sa.zpp_pool,sa.zpp_pool=bc.next,bc.next=null);var dc=bc.inner;dc.jnAcc=dc.jtAcc=0;bc.hash=0;bc.fresh=!0;bc.arbiter=c;c.jrAcc=0;var Xa=c.contacts;bc._inuse=!0;var Ya=bc;Ya.next=Xa.next;Xa.next=Ya;Xa.modified=!0;Xa.length++;c.innards.add(dc)}else bc.fresh=!1;bc.px=Lb;bc.py=Ic;c.nx=Ka;c.ny=Wb;bc.dist=pa;bc.stamp=c.stamp;bc.posOnly=!1;sc=bc}else{for(var N=-wa.gnormx,nb=-wa.gnormy,ic=null,ne=c.contacts.next;null!=ne;){var Jd=ne;if(0==Jd.hash){ic=Jd;break}ne=ne.next}if(null==ic){null==sa.zpp_pool?ic=new sa:
(ic=sa.zpp_pool,sa.zpp_pool=ic.next,ic.next=null);var fe=ic.inner;fe.jnAcc=fe.jtAcc=0;ic.hash=0;ic.fresh=!0;ic.arbiter=c;c.jrAcc=0;var gc=c.contacts;ic._inuse=!0;var Qc=ic;Qc.next=gc.next;gc.next=Qc;gc.modified=!0;gc.length++;c.innards.add(fe)}else ic.fresh=!1;ic.px=Lb;ic.py=Ic;c.nx=N;c.ny=nb;ic.dist=pa;ic.stamp=c.stamp;ic.posOnly=!1;sc=ic}c.ptype=d?0:1;c.lnormx=wa.lnormx;c.lnormy=wa.lnormy;c.rev=!d;c.lproj=wa.lprojection;c.radius=a.circle.radius;sc.inner.lr1x=a.circle.localCOMx;sc.inner.lr1y=a.circle.localCOMy;
c.__ref_edge1=wa;c.__ref_vertex=0;return!0}}else{var Pa=a.circle.radius+b.circle.radius,Wa=0,fb=0,Wa=b.circle.worldCOMx-a.circle.worldCOMx,fb=b.circle.worldCOMy-a.circle.worldCOMy,Me=Wa*Wa+fb*fb,ze;if(Me>Pa*Pa)ze=null;else if(Me<u.epsilon*u.epsilon){for(var Tb=a.circle.worldCOMx,Ub=a.circle.worldCOMy,Ce=null,qc=c.contacts.next;null!=qc;){var rb=qc;if(0==rb.hash){Ce=rb;break}qc=qc.next}if(null==Ce){null==sa.zpp_pool?Ce=new sa:(Ce=sa.zpp_pool,sa.zpp_pool=Ce.next,Ce.next=null);var Mb=Ce.inner;Mb.jnAcc=
Mb.jtAcc=0;Ce.hash=0;Ce.fresh=!0;Ce.arbiter=c;c.jrAcc=0;var Pd=c.contacts;Ce._inuse=!0;var Mf=Ce;Mf.next=Pd.next;Pd.next=Mf;Pd.modified=!0;Pd.length++;c.innards.add(Mb)}else Ce.fresh=!1;Ce.px=Tb;Ce.py=Ub;c.nx=1;c.ny=0;Ce.dist=-Pa;Ce.stamp=c.stamp;Ce.posOnly=!1;ze=Ce}else{var Wf=1/Math.sqrt(Me),ve=Wf<u.epsilon?1.0E100:1/Wf,jd=0.5+(a.circle.radius-0.5*Pa)*Wf;if(d){for(var og=a.circle.worldCOMx+Wa*jd,cd=a.circle.worldCOMy+fb*jd,Jc=null,xb=c.contacts.next;null!=xb;){var sd=xb;if(0==sd.hash){Jc=sd;break}xb=
xb.next}if(null==Jc){null==sa.zpp_pool?Jc=new sa:(Jc=sa.zpp_pool,sa.zpp_pool=Jc.next,Jc.next=null);var nc=Jc.inner;nc.jnAcc=nc.jtAcc=0;Jc.hash=0;Jc.fresh=!0;Jc.arbiter=c;c.jrAcc=0;var be=c.contacts;Jc._inuse=!0;var hh=Jc;hh.next=be.next;be.next=hh;be.modified=!0;be.length++;c.innards.add(nc)}else Jc.fresh=!1;Jc.px=og;Jc.py=cd;c.nx=-Wa*Wf;c.ny=-fb*Wf;Jc.dist=ve-Pa;Jc.stamp=c.stamp;Jc.posOnly=!1;ze=Jc}else{for(var kd=a.circle.worldCOMx+Wa*jd,tc=a.circle.worldCOMy+fb*jd,Rc=null,Gb=c.contacts.next;null!=
Gb;){var Gc=Gb;if(0==Gc.hash){Rc=Gc;break}Gb=Gb.next}if(null==Rc){null==sa.zpp_pool?Rc=new sa:(Rc=sa.zpp_pool,sa.zpp_pool=Rc.next,Rc.next=null);var Gk=Rc.inner;Gk.jnAcc=Gk.jtAcc=0;Rc.hash=0;Rc.fresh=!0;Rc.arbiter=c;c.jrAcc=0;var hg=c.contacts;Rc._inuse=!0;var Ec=Rc;Ec.next=hg.next;hg.next=Ec;hg.modified=!0;hg.length++;c.innards.add(Gk)}else Rc.fresh=!1;Rc.px=kd;Rc.py=tc;c.nx=Wa*Wf;c.ny=fb*Wf;Rc.dist=ve-Pa;Rc.stamp=c.stamp;Rc.posOnly=!1;ze=Rc}}if(null!=ze){var Cb=ze.inner;d?(Cb.lr1x=b.circle.localCOMx,
Cb.lr1y=b.circle.localCOMy,Cb.lr2x=a.circle.localCOMx,Cb.lr2y=a.circle.localCOMy):(Cb.lr1x=a.circle.localCOMx,Cb.lr1y=a.circle.localCOMy,Cb.lr2x=b.circle.localCOMx,Cb.lr2y=b.circle.localCOMy);c.radius=a.circle.radius+b.circle.radius;c.ptype=2;return!0}}return!1};ka.testCollide_safe=function(a,b){if(0==b.type)var c=a,a=b,b=c;return ka.testCollide(a,b)};ka.testCollide=function(a,b){if(1==b.type){if(1==a.type){for(var c=!0,d=a.polygon.edges.head;null!=d;){for(var e=d.elt,f=1.0E100,g=b.polygon.gverts.next;null!=
g;){var j=g,j=e.gnormx*j.x+e.gnormy*j.y;j<f&&(f=j);g=g.next}f-=e.gprojection;if(0<f){c=!1;break}d=d.next}if(c){for(d=b.polygon.edges.head;null!=d;){e=d.elt;f=1.0E100;for(g=a.polygon.gverts.next;null!=g;)j=g,j=e.gnormx*j.x+e.gnormy*j.y,j<f&&(f=j),g=g.next;f-=e.gprojection;if(0<f){c=!1;break}d=d.next}return c}}else{d=c=null;e=!0;f=-1.0E100;g=b.polygon.gverts.next;for(j=b.polygon.edges.head;null!=j;){var h=j.elt,i=h.gnormx*a.circle.worldCOMx+h.gnormy*a.circle.worldCOMy-h.gprojection-a.circle.radius;
if(0<i){e=!1;break}i>f&&(f=i,c=h,d=g);g=g.next;j=j.next}if(e){e=d;d=null==d.next?b.polygon.gverts.next:d.next;f=a.circle.worldCOMy*c.gnormx-a.circle.worldCOMx*c.gnormy;if(f<=e.y*c.gnormx-e.x*c.gnormy)return c=a.circle.radius,f=d=0,d=e.x-a.circle.worldCOMx,f=e.y-a.circle.worldCOMy,d*d+f*f<=c*c;return f>=d.y*c.gnormx-d.x*c.gnormy?(c=a.circle.radius,f=e=0,e=d.x-a.circle.worldCOMx,f=d.y-a.circle.worldCOMy,e*e+f*f<=c*c):!0}}return!1}c=a.circle.radius+b.circle.radius;e=d=0;d=b.circle.worldCOMx-a.circle.worldCOMx;
e=b.circle.worldCOMy-a.circle.worldCOMy;return d*d+e*e<=c*c};ka.flowCollide=function(a,b,c){if(1==b.type){if(1==a.type){for(var d=[],e=[],f=!0,g=!0,j=a.polygon.edges.head;null!=j;){for(var p=j.elt,i=1.0E100,k=0,l=b.polygon.gverts.next;null!=l;){var n=l,o=p.gnormx*n.x+p.gnormy*n.y;o<i&&(i=o);o>=p.gprojection+u.epsilon&&(e[k]=!0,g=!1);++k;l=l.next}i-=p.gprojection;if(0<i){f=!1;break}j=j.next}if(g){var m=b.polygon;if(m.zip_worldCOM&&null!=m.body){m.zip_worldCOM=!1;if(m.zip_localCOM){m.zip_localCOM=!1;
if(1==m.type){var r=m.polygon;if(null==r.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==r.lverts.next.next)r.localCOMx=r.lverts.next.x,r.localCOMy=r.lverts.next.y;else if(null==r.lverts.next.next.next)r.localCOMx=r.lverts.next.x,r.localCOMy=r.lverts.next.y,r.localCOMx+=1*r.lverts.next.next.x,r.localCOMy+=1*r.lverts.next.next.y,r.localCOMx*=0.5,r.localCOMy*=0.5;else{r.localCOMx=0;for(var s=r.localCOMy=0,t=r.lverts.next,v=t,w=t=t.next,t=t.next;null!=t;){var y=
t,s=s+w.x*(y.y-v.y),z=y.y*w.x-y.x*w.y;r.localCOMx+=(w.x+y.x)*z;r.localCOMy+=(w.y+y.y)*z;v=w;w=y;t=t.next}var G=t=r.lverts.next,s=s+w.x*(G.y-v.y),H=G.y*w.x-G.x*w.y;r.localCOMx+=(w.x+G.x)*H;r.localCOMy+=(w.y+G.y)*H;var v=w,w=G,F=t=t.next,s=s+w.x*(F.y-v.y),E=F.y*w.x-F.x*w.y;r.localCOMx+=(w.x+F.x)*E;r.localCOMy+=(w.y+F.y)*E;var J=s=1/(3*s);r.localCOMx*=J;r.localCOMy*=J}}null!=m.wrap_localCOM&&(m.wrap_localCOM.zpp_inner.x=m.localCOMx,m.wrap_localCOM.zpp_inner.y=m.localCOMy)}var P=m.body;P.zip_axis&&(P.zip_axis=
!1,P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot));m.worldCOMx=m.body.posx+(m.body.axisy*m.localCOMx-m.body.axisx*m.localCOMy);m.worldCOMy=m.body.posy+(m.localCOMx*m.body.axisx+m.localCOMy*m.body.axisy)}c.overlap=b.polygon.area;c.centroidx=b.polygon.worldCOMx;c.centroidy=b.polygon.worldCOMy;return!0}if(f){for(var g=!0,O=b.polygon.edges.head;null!=O;){for(var K=O.elt,M=1.0E100,L=0,rc=a.polygon.gverts.next;null!=rc;){var V=rc,S=K.gnormx*V.x+K.gnormy*V.y;S<M&&(M=S);S>=K.gprojection+u.epsilon&&(d[L]=
!0,g=!1);++L;rc=rc.next}M-=K.gprojection;if(0<M){f=!1;break}O=O.next}if(g){var Y=a.polygon;if(Y.zip_worldCOM&&null!=Y.body){Y.zip_worldCOM=!1;if(Y.zip_localCOM){Y.zip_localCOM=!1;if(1==Y.type){var Ab=Y.polygon;if(null==Ab.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==Ab.lverts.next.next)Ab.localCOMx=Ab.lverts.next.x,Ab.localCOMy=Ab.lverts.next.y;else if(null==Ab.lverts.next.next.next)Ab.localCOMx=Ab.lverts.next.x,Ab.localCOMy=Ab.lverts.next.y,Ab.localCOMx+=
1*Ab.lverts.next.next.x,Ab.localCOMy+=1*Ab.lverts.next.next.y,Ab.localCOMx*=0.5,Ab.localCOMy*=0.5;else{Ab.localCOMx=0;for(var Z=Ab.localCOMy=0,kc=Ab.lverts.next,qf=kc,va=kc=kc.next,kc=kc.next;null!=kc;){var U=kc,Z=Z+va.x*(U.y-qf.y),fa=U.y*va.x-U.x*va.y;Ab.localCOMx+=(va.x+U.x)*fa;Ab.localCOMy+=(va.y+U.y)*fa;qf=va;va=U;kc=kc.next}var ha=kc=Ab.lverts.next,Z=Z+va.x*(ha.y-qf.y),Mc=ha.y*va.x-ha.x*va.y;Ab.localCOMx+=(va.x+ha.x)*Mc;Ab.localCOMy+=(va.y+ha.y)*Mc;var qf=va,va=ha,ca=kc=kc.next,Z=Z+va.x*(ca.y-
qf.y),la=ca.y*va.x-ca.x*va.y;Ab.localCOMx+=(va.x+ca.x)*la;Ab.localCOMy+=(va.y+ca.y)*la;var T=Z=1/(3*Z);Ab.localCOMx*=T;Ab.localCOMy*=T}}null!=Y.wrap_localCOM&&(Y.wrap_localCOM.zpp_inner.x=Y.localCOMx,Y.wrap_localCOM.zpp_inner.y=Y.localCOMy)}var ye=Y.body;ye.zip_axis&&(ye.zip_axis=!1,ye.axisx=Math.sin(ye.rot),ye.axisy=Math.cos(ye.rot));Y.worldCOMx=Y.body.posx+(Y.body.axisy*Y.localCOMx-Y.body.axisx*Y.localCOMy);Y.worldCOMy=Y.body.posy+(Y.localCOMx*Y.body.axisx+Y.localCOMy*Y.body.axisy)}c.overlap=a.polygon.area;
c.centroidx=a.polygon.worldCOMx;c.centroidy=a.polygon.worldCOMy;return!0}if(f){for(;null!=ka.flowpoly.head;){var pa=ka.flowpoly.pop_unsafe();if(!pa._inuse){var Vc=pa;null!=Vc.outer&&(Vc.outer.zpp_inner=null,Vc.outer=null);Vc._isimmutable=null;Vc._validate=null;Vc._invalidate=null;Vc.next=q.zpp_pool;q.zpp_pool=Vc}}for(var oa=null,Yb=!1,tb=a.polygon.gverts.next,W=0,X=b.polygon.gverts.next,Da=0,ga=0,Le=b.polygon.edgeCnt;ga<Le;){var lc=ga++;if(e[lc])X=X.next;else{Da=lc;break}}if(null==X){for(var X=b.polygon.gverts.next,
Yb=!0,Md=0,I=a.polygon.edgeCnt;Md<I;){var Sa=Md++;if(d[Sa])tb=tb.next;else{W=Sa;break}}null==tb?tb=a.polygon.gverts.next:(ka.flowpoly.add(tb),oa=ka.flowpoly.head.elt)}else ka.flowpoly.add(X),oa=ka.flowpoly.head.elt;var ef=1;if(null==ka.flowpoly.head){for(var da=!0,$=a.polygon.gverts.next,wa=$,ra=$.next;null!=ra;){for(var Ja=ra,Ea=2,A=b.polygon.gverts.next,xa=A,Ma=A.next;null!=Ma;){var $a=Ma,za=0,Db=0,ya=0,Db=wa.x-xa.x,ya=wa.y-xa.y,Ua=0,Ba=0,Ua=Ja.x-wa.x,Ba=Ja.y-wa.y,ma=0,na=0,ma=$a.x-xa.x,na=$a.y-
xa.y,ja=Ba*ma-Ua*na,ia;if(ja*ja>u.epsilon*u.epsilon){var ja=1/ja,Pc=(na*Db-ma*ya)*ja;if(Pc>u.epsilon&&Pc<1-u.epsilon){var ac=(Ba*Db-Ua*ya)*ja;ac>u.epsilon&&ac<1-u.epsilon?(za=Pc,ia=!0):ia=!1}else ia=!1}else ia=!1;ia&&za<Ea&&(Ea=za,X=A);A=Ma;xa=$a;Ma=Ma.next}for(;;){var ea=Ma=b.polygon.gverts.next,kb=0,C=0,sa=0,C=wa.x-xa.x,sa=wa.y-xa.y,ob=0,ta=0,ob=Ja.x-wa.x,ta=Ja.y-wa.y,pb=0,qa=0,pb=ea.x-xa.x,qa=ea.y-xa.y,Q=ta*pb-ob*qa,aa;if(Q*Q>u.epsilon*u.epsilon){var Q=1/Q,Na=(qa*C-pb*sa)*Q;if(Na>u.epsilon&&Na<
1-u.epsilon){var ba=(ta*C-ob*sa)*Q;ba>u.epsilon&&ba<1-u.epsilon?(kb=Na,aa=!0):aa=!1}else aa=!1}else aa=!1;aa&&kb<Ea&&(Ea=kb,X=A);break}if(2!=Ea){var Ha=0,Ca=0,Hb=Ea,Ha=wa.x+(Ja.x-wa.x)*Hb,Ca=wa.y+(Ja.y-wa.y)*Hb,bb;null==q.zpp_pool?bb=new q:(bb=q.zpp_pool,q.zpp_pool=bb.next,bb.next=null);bb.weak=!1;bb._immutable=!1;bb.x=Ha;bb.y=Ca;oa=bb;ka.flowpoly.add(oa);Yb=!0;tb=$;da=!1;break}$=ra;wa=Ja;ra=ra.next}if(da)for(;;){for(var ib=ra=a.polygon.gverts.next,Oa=2,Va=b.polygon.gverts.next,D=Va,lb=Va.next;null!=
lb;){var Ta=lb,jb=0,gb=0,Ga=0,gb=wa.x-D.x,Ga=wa.y-D.y,Eb=0,cb=0,Eb=ib.x-wa.x,cb=ib.y-wa.y,zb=0,Nc=0,zb=Ta.x-D.x,Nc=Ta.y-D.y,rd=cb*zb-Eb*Nc,Qa;if(rd*rd>u.epsilon*u.epsilon){var rd=1/rd,Ib=(Nc*gb-zb*Ga)*rd;if(Ib>u.epsilon&&Ib<1-u.epsilon){var ub=(cb*gb-Eb*Ga)*rd;ub>u.epsilon&&ub<1-u.epsilon?(jb=Ib,Qa=!0):Qa=!1}else Qa=!1}else Qa=!1;Qa&&jb<Oa&&(Oa=jb,X=Va);Va=lb;D=Ta;lb=lb.next}for(;;){var wb=lb=b.polygon.gverts.next,mb=0,ua=0,B=0,ua=wa.x-D.x,B=wa.y-D.y,Bb=0,db=0,Bb=ib.x-wa.x,db=ib.y-wa.y,ab=0,x=0,ab=
wb.x-D.x,x=wb.y-D.y,Nb=db*ab-Bb*x,Jb;if(Nb*Nb>u.epsilon*u.epsilon){var Nb=1/Nb,qb=(x*ua-ab*B)*Nb;if(qb>u.epsilon&&qb<1-u.epsilon){var Fa=(db*ua-Bb*B)*Nb;Fa>u.epsilon&&Fa<1-u.epsilon?(mb=qb,Jb=!0):Jb=!1}else Jb=!1}else Jb=!1;Jb&&mb<Oa&&(Oa=mb,X=Va);break}if(2!=Oa){var sb=0,Ra=0,vb=Oa,sb=wa.x+(ib.x-wa.x)*vb,Ra=wa.y+(ib.y-wa.y)*vb,eb;null==q.zpp_pool?eb=new q:(eb=q.zpp_pool,q.zpp_pool=eb.next,eb.next=null);eb.weak=!1;eb._immutable=!1;eb.x=sb;eb.y=Ra;oa=eb;ka.flowpoly.add(oa);Yb=!0;tb=$;break}break}ef=
2}for(;;)if(Yb)if(tb=tb.next,++W,null==tb&&(tb=a.polygon.gverts.next,W=0),d[W]){var Ob=ka.flowpoly.head.elt,La=tb,Vb=X,Aa=X.next;null==Aa&&(Aa=b.polygon.gverts.next);for(var Ia=-1,yb=null,Za=0,Xb=0,Xa=Aa,Pb=Aa;;){var R=Pb,Ka=0,Ya=0,ae=0,Ya=Vb.x-Ob.x,ae=Vb.y-Ob.y,Lb=0,Ic=0,Lb=R.x-Vb.x,Ic=R.y-Vb.y,sc=0,Wa=0,sc=La.x-Ob.x,Wa=La.y-Ob.y,Wb=Ic*sc-Lb*Wa,bc;if(Wb*Wb>u.epsilon*u.epsilon){var Wb=1/Wb,me=(Wa*Ya-sc*ae)*Wb;if(me>u.epsilon&&me<1-u.epsilon){var Kb=(Ic*Ya-Lb*ae)*Wb;Kb>u.epsilon&&Kb<1-u.epsilon?(Ka=
me,bc=!0):bc=!1}else bc=!1}else bc=!1;if(bc&&Ka>=Ia)if(yb=X,Za=Da,++Xb==ef){Ia=Ka;Pb=Xa;break}else Ia=Ka;Vb=R;X=Pb;++Da;Da>=b.polygon.edgeCnt&&(Da=0);Pb=Pb.next;null==Pb&&(Pb=b.polygon.gverts.next);break}for(;Pb!=Xa;){var dc=Pb,fb=0,Pa=0,N=0,Pa=Vb.x-Ob.x,N=Vb.y-Ob.y,nb=0,ic=0,nb=dc.x-Vb.x,ic=dc.y-Vb.y,ne=0,Jd=0,ne=La.x-Ob.x,Jd=La.y-Ob.y,fe=ic*ne-nb*Jd,gc;if(fe*fe>u.epsilon*u.epsilon){var fe=1/fe,Qc=(Jd*Pa-ne*N)*fe;if(Qc>u.epsilon&&Qc<1-u.epsilon){var qc=(ic*Pa-nb*N)*fe;qc>u.epsilon&&qc<1-u.epsilon?
(fb=Qc,gc=!0):gc=!1}else gc=!1}else gc=!1;if(gc&&fb>=Ia)if(yb=X,Za=Da,++Xb==ef){Ia=fb;Pb=Xa;break}else Ia=fb;Vb=dc;X=Pb;++Da;Da>=b.polygon.edgeCnt&&(Da=0);Pb=Pb.next;null==Pb&&(Pb=b.polygon.gverts.next)}if(null==yb)break;var Cb=yb,Gb=yb.next;null==Gb&&(Gb=b.polygon.gverts.next);var Me=Gb,ze=0,Mb=0,Tb=Ia,ze=Cb.x+(Me.x-Cb.x)*Tb,Mb=Cb.y+(Me.y-Cb.y)*Tb,Ce;if(null!=oa){var Ub=0,rb=0,Ub=ze-oa.x,rb=Mb-oa.y;Ce=Ub*Ub+rb*rb<u.epsilon}else Ce=!1;if(Ce)break;var Gc=ka.flowpoly,Pd;null==q.zpp_pool?Pd=new q:(Pd=
q.zpp_pool,q.zpp_pool=Pd.next,Pd.next=null);Pd.weak=!1;Pd._immutable=!1;Pd.x=ze;Pd.y=Mb;Gc.add(Pd);null==oa&&(oa=ka.flowpoly.head.elt);X=yb;Da=Za;Yb=!Yb;ef=2}else{var Mf=tb,Wf;if(null!=oa){var ve=0,jd=0,ve=Mf.x-oa.x,jd=Mf.y-oa.y;Wf=ve*ve+jd*jd<u.epsilon}else Wf=!1;if(Wf)break;ka.flowpoly.add(Mf);null==oa&&(oa=ka.flowpoly.head.elt);ef=1}else if(X=X.next,++Da,null==X&&(X=b.polygon.gverts.next,Da=0),e[Da]){var og=ka.flowpoly.head.elt,cd=X,Jc=tb,xb=tb.next;null==xb&&(xb=a.polygon.gverts.next);for(var sd=
-1,nc=null,be=0,hh=0,kd=xb,tc=xb;;){var Rc=tc,Ec=0,Sb=0,Gk=0,Sb=Jc.x-og.x,Gk=Jc.y-og.y,hg=0,mc=0,hg=Rc.x-Jc.x,mc=Rc.y-Jc.y,Id=0,Vi=0,Id=cd.x-og.x,Vi=cd.y-og.y,Hm=mc*Id-hg*Vi,Bd;if(Hm*Hm>u.epsilon*u.epsilon){var Hm=1/Hm,Yf=(Vi*Sb-Id*Gk)*Hm;if(Yf>u.epsilon&&Yf<1-u.epsilon){var $c=(mc*Sb-hg*Gk)*Hm;$c>u.epsilon&&$c<1-u.epsilon?(Ec=Yf,Bd=!0):Bd=!1}else Bd=!1}else Bd=!1;if(Bd&&Ec>=sd)if(nc=tb,be=W,++hh==ef){sd=Ec;tc=kd;break}else sd=Ec;Jc=Rc;tb=tc;++W;W>=a.polygon.edgeCnt&&(W=0);tc=tc.next;null==tc&&(tc=
a.polygon.gverts.next);break}for(;tc!=kd;){var Im=tc,Rd=0,Cd=0,md=0,Cd=Jc.x-og.x,md=Jc.y-og.y,fc=0,Qb=0,fc=Im.x-Jc.x,Qb=Im.y-Jc.y,Ac=0,Rp=0,Ac=cd.x-og.x,Rp=cd.y-og.y,Vd=Qb*Ac-fc*Rp,Qo;if(Vd*Vd>u.epsilon*u.epsilon){var Vd=1/Vd,Hk=(Rp*Cd-Ac*md)*Vd;if(Hk>u.epsilon&&Hk<1-u.epsilon){var rg=(Qb*Cd-fc*md)*Vd;rg>u.epsilon&&rg<1-u.epsilon?(Rd=Hk,Qo=!0):Qo=!1}else Qo=!1}else Qo=!1;if(Qo&&Rd>=sd)if(nc=tb,be=W,++hh==ef){sd=Rd;tc=kd;break}else sd=Rd;Jc=Im;tb=tc;++W;W>=a.polygon.edgeCnt&&(W=0);tc=tc.next;null==
tc&&(tc=a.polygon.gverts.next)}if(null==nc)break;var dd=nc,he=nc.next;null==he&&(he=a.polygon.gverts.next);var ff=he,Sp=0,Ff=0,aq=sd,Sp=dd.x+(ff.x-dd.x)*aq,Ff=dd.y+(ff.y-dd.y)*aq,Cc;if(null!=oa){var Bc=0,Hc=0,Bc=Sp-oa.x,Hc=Ff-oa.y;Cc=Bc*Bc+Hc*Hc<u.epsilon}else Cc=!1;if(Cc)break;var Fe=ka.flowpoly,vh;null==q.zpp_pool?vh=new q:(vh=q.zpp_pool,q.zpp_pool=vh.next,vh.next=null);vh.weak=!1;vh._immutable=!1;vh.x=Sp;vh.y=Ff;Fe.add(vh);null==oa&&(oa=ka.flowpoly.head.elt);tb=nc;W=be;Yb=!Yb;ef=2}else{var Tp=
X,ce;if(null!=oa){var Uc=0,dh=0,Uc=Tp.x-oa.x,dh=Tp.y-oa.y;ce=Uc*Uc+dh*dh<u.epsilon}else ce=!1;if(ce)break;ka.flowpoly.add(Tp);null==oa&&(oa=ka.flowpoly.head.elt);ef=1}if(null!=ka.flowpoly.head&&null!=ka.flowpoly.head.next&&null!=ka.flowpoly.head.next.next){for(var Xh=0,oe=0,kg=0,Xh=kg=oe=0,ie=ka.flowpoly.head,pe=ie.elt,ie=ie.next,cc=ie.elt,ie=ie.next;null!=ie;)var rh=ie.elt,Xh=Xh+cc.x*(rh.y-pe.y),Tc=rh.y*cc.x-rh.x*cc.y,oe=oe+(cc.x+rh.x)*Tc,kg=kg+(cc.y+rh.y)*Tc,pe=cc,cc=rh,ie=ie.next;var ie=ka.flowpoly.head,
hb=ie.elt,Xh=Xh+cc.x*(hb.y-pe.y),Jm=hb.y*cc.x-hb.x*cc.y,oe=oe+(cc.x+hb.x)*Jm,kg=kg+(cc.y+hb.y)*Jm,pe=cc,cc=hb,ie=ie.next,Gd=ie.elt,Xh=Xh+cc.x*(Gd.y-pe.y),td=Gd.y*cc.x-Gd.x*cc.y,oe=oe+(cc.x+Gd.x)*td,kg=kg+(cc.y+Gd.y)*td,Xh=0.5*Xh,Od=1/(6*Xh),oe=oe*Od,kg=kg*Od;c.overlap=-Xh;c.centroidx=oe;c.centroidy=kg;return!0}}}return!1}for(var ed=[],Wd=!0,Ik=null,Yh=null,Jk=-1.0E100,bd=!0,Gf=b.polygon.gverts.next,jh=0,$b=b.polygon.edges.head;null!=$b;){var Km=$b.elt,Ge=Km.gnormx*a.circle.worldCOMx+Km.gnormy*a.circle.worldCOMy;
if(Ge>Km.gprojection+a.circle.radius){bd=!1;break}else Ge+a.circle.radius>Km.gprojection+u.epsilon&&(Wd=!1,ed[jh]=!0);Ge-=Km.gprojection+a.circle.radius;Ge>Jk&&(Jk=Ge,Ik=Km,Yh=Gf);Gf=Gf.next;++jh;$b=$b.next}if(bd){if(Wd)return c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,!0;var Bh=Yh,He=null==Yh.next?b.polygon.gverts.next:Yh.next,bq=a.circle.worldCOMy*Ik.gnormx-a.circle.worldCOMx*Ik.gnormy,Dc;if(bq<=Bh.y*Ik.gnormx-Bh.x*Ik.gnormy){var vd=a.circle.radius,Af=
0,Kk=0,Af=Bh.x-a.circle.worldCOMx,Kk=Bh.y-a.circle.worldCOMy;Dc=Af*Af+Kk*Kk<=vd*vd}else if(bq>=He.y*Ik.gnormx-He.x*Ik.gnormy){var re=a.circle.radius,Zb=0,Ah=0,Zb=He.x-a.circle.worldCOMx,Ah=He.y-a.circle.worldCOMy;Dc=Zb*Zb+Ah*Ah<=re*re}else Dc=!0;if(Dc){for(var Hf=[],Fb=0,Zc=!0,We=null,If=0,Hd=b.polygon.gverts.next;null!=Hd;){var jc=Hd,ec=0,Ie=0,ec=jc.x-a.circle.worldCOMx,Ie=jc.y-a.circle.worldCOMy;(Hf[Fb]=ec*ec+Ie*Ie<=a.circle.radius*a.circle.radius)?(If=Fb,We=Hd):Zc=!1;++Fb;Hd=Hd.next}if(Zc){var Xd=
b.polygon;if(Xd.zip_worldCOM&&null!=Xd.body){Xd.zip_worldCOM=!1;if(Xd.zip_localCOM){Xd.zip_localCOM=!1;if(1==Xd.type){var fd=Xd.polygon;if(null==fd.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==fd.lverts.next.next)fd.localCOMx=fd.lverts.next.x,fd.localCOMy=fd.lverts.next.y;else if(null==fd.lverts.next.next.next)fd.localCOMx=fd.lverts.next.x,fd.localCOMy=fd.lverts.next.y,fd.localCOMx+=1*fd.lverts.next.next.x,fd.localCOMy+=1*fd.lverts.next.next.y,fd.localCOMx*=
0.5,fd.localCOMy*=0.5;else{fd.localCOMx=0;for(var zh=fd.localCOMy=0,eh=fd.lverts.next,Rb=eh,Je=eh=eh.next,eh=eh.next;null!=eh;){var zc=eh,zh=zh+Je.x*(zc.y-Rb.y),Lc=zc.y*Je.x-zc.x*Je.y;fd.localCOMx+=(Je.x+zc.x)*Lc;fd.localCOMy+=(Je.y+zc.y)*Lc;Rb=Je;Je=zc;eh=eh.next}var xd=eh=fd.lverts.next,zh=zh+Je.x*(xd.y-Rb.y),Fc=xd.y*Je.x-xd.x*Je.y;fd.localCOMx+=(Je.x+xd.x)*Fc;fd.localCOMy+=(Je.y+xd.y)*Fc;var Rb=Je,Je=xd,wc=eh=eh.next,zh=zh+Je.x*(wc.y-Rb.y),cq=wc.y*Je.x-wc.x*Je.y;fd.localCOMx+=(Je.x+wc.x)*cq;fd.localCOMy+=
(Je.y+wc.y)*cq;var Sc=zh=1/(3*zh);fd.localCOMx*=Sc;fd.localCOMy*=Sc}}null!=Xd.wrap_localCOM&&(Xd.wrap_localCOM.zpp_inner.x=Xd.localCOMx,Xd.wrap_localCOM.zpp_inner.y=Xd.localCOMy)}var gd=Xd.body;gd.zip_axis&&(gd.zip_axis=!1,gd.axisx=Math.sin(gd.rot),gd.axisy=Math.cos(gd.rot));Xd.worldCOMx=Xd.body.posx+(Xd.body.axisy*Xd.localCOMx-Xd.body.axisx*Xd.localCOMy);Xd.worldCOMy=Xd.body.posy+(Xd.localCOMx*Xd.body.axisx+Xd.localCOMy*Xd.body.axisy)}c.overlap=b.polygon.area;c.centroidx=b.polygon.worldCOMx;c.centroidy=
b.polygon.worldCOMy;return!0}for(;null!=ka.flowpoly.head;){var yc=ka.flowpoly.pop_unsafe();if(!yc._inuse){var ad=yc;null!=ad.outer&&(ad.outer.zpp_inner=null,ad.outer=null);ad._isimmutable=null;ad._validate=null;ad._invalidate=null;ad.next=q.zpp_pool;q.zpp_pool=ad}}ka.flowsegs.clear();var nd=null,Ch=1;null==We?(We=b.polygon.gverts.next,Ch=2):(nd=We,ka.flowpoly.add(nd));for(;0!=Ch;)if(1==Ch)if(We=We.next,null==We&&(We=b.polygon.gverts.next),++If,If>=b.polygon.edgeCnt&&(If=0),Hf[If]){var Yc=0,pd=0,Yc=
nd.x-We.x,pd=nd.y-We.y;if(Yc*Yc+pd*pd<u.epsilon)break;ka.flowpoly.add(We)}else{var Nj=ka.flowpoly.head.elt,zd=We,De=0,gf=0,De=zd.x-Nj.x,gf=zd.y-Nj.y,wf=0,wd=0,wf=Nj.x-a.circle.worldCOMx,wd=Nj.y-a.circle.worldCOMy,Sd=De*De+gf*gf,vc=2*(wf*De+wd*gf),dq=Math.sqrt(vc*vc-4*Sd*(wf*wf+wd*wd-a.circle.radius*a.circle.radius)),Sd=1/(2*Sd),Ld=(-vc-dq)*Sd,Up=0,le=0,qd=Ld<u.epsilon?(-vc+dq)*Sd:Ld,Up=Nj.x+(zd.x-Nj.x)*qd,le=Nj.y+(zd.y-Nj.y)*qd,ud=0,pc=0,ud=nd.x-Up,pc=nd.y-le;if(ud*ud+pc*pc<u.epsilon)break;var ke=
ka.flowpoly,xc;null==q.zpp_pool?xc=new q:(xc=q.zpp_pool,q.zpp_pool=xc.next,xc.next=null);xc.weak=!1;xc._immutable=!1;xc.x=Up;xc.y=le;ke.add(xc);Ch=2}else if(2==Ch){var Nd=We.next;null==Nd&&(Nd=b.polygon.gverts.next);for(var Kd=We,Ch=0,Kc=Nd,Xe=Nd;;){var Jf=Xe,Cp=If+1;Cp==b.polygon.edgeCnt&&(Cp=0);if(ed[If])if(Hf[Cp]){var oc=0,Dp=0,oc=Jf.x-Kd.x,Dp=Jf.y-Kd.y,Yd=0,Td=0,Yd=Kd.x-a.circle.worldCOMx,Td=Kd.y-a.circle.worldCOMy,hd=oc*oc+Dp*Dp,hc=2*(Yd*oc+Td*Dp),ee=Math.sqrt(hc*hc-4*hd*(Yd*Yd+Td*Td-a.circle.radius*
a.circle.radius)),hd=1/(2*hd),Ve=(-hc-ee)*hd,hf=0,Kf=0,eq=Ve<u.epsilon?(-hc+ee)*hd:Ve,hf=Kd.x+(Jf.x-Kd.x)*eq,Kf=Kd.y+(Jf.y-Kd.y)*eq,Ed=0,$d=0,Ed=nd.x-hf,$d=nd.y-Kf;if(Ed*Ed+$d*$d<u.epsilon){Ch=0;Xe=Kc;break}var xf;null==q.zpp_pool?xf=new q:(xf=q.zpp_pool,q.zpp_pool=xf.next,xf.next=null);xf.weak=!1;xf._immutable=!1;xf.x=hf;xf.y=Kf;var bf=xf;ka.flowsegs.add(ka.flowpoly.head.elt);ka.flowsegs.add(bf);ka.flowpoly.add(bf);Ch=1;Xe=Kc;break}else{var Oc=0,ld=0,Zd=0,Fd=0,Zd=Jf.x-Kd.x,Fd=Jf.y-Kd.y,uc=0,Zf=0,
uc=Kd.x-a.circle.worldCOMx,Zf=Kd.y-a.circle.worldCOMy,Lm=Zd*Zd+Fd*Fd,je=2*(uc*Zd+Zf*Fd),Bf=je*je-4*Lm*(uc*uc+Zf*Zf-a.circle.radius*a.circle.radius),Ne;Bf*Bf<u.epsilon?(Oc=0>Bf?10:ld=-je/(2*Lm),Ne=!1):(Bf=Math.sqrt(Bf),Lm=1/(2*Lm),Oc=(-je-Bf)*Lm,ld=(-je+Bf)*Lm,Ne=!0);if(Oc<1-u.epsilon&&ld>u.epsilon){var Te=0,df=0,ge=Oc,Te=Kd.x+(Jf.x-Kd.x)*ge,df=Kd.y+(Jf.y-Kd.y)*ge,Ye;if(null!=nd){var xe=0,Ze=0,xe=nd.x-Te,Ze=nd.y-df;Ye=xe*xe+Ze*Ze<u.epsilon}else Ye=!1;if(Ye){Ch=0;Xe=Kc;break}var od;null==q.zpp_pool?
od=new q:(od=q.zpp_pool,q.zpp_pool=od.next,od.next=null);od.weak=!1;od._immutable=!1;od.x=Te;od.y=df;var yf=od;null!=ka.flowpoly.head&&(ka.flowsegs.add(ka.flowpoly.head.elt),ka.flowsegs.add(yf));ka.flowpoly.add(yf);null==nd&&(nd=ka.flowpoly.head.elt);if(Ne){var Qe=0,of=0,Ae=ld,Qe=Kd.x+(Jf.x-Kd.x)*Ae,of=Kd.y+(Jf.y-Kd.y)*Ae,ig=ka.flowpoly,Dd;null==q.zpp_pool?Dd=new q:(Dd=q.zpp_pool,q.zpp_pool=Dd.next,Dd.next=null);Dd.weak=!1;Dd._immutable=!1;Dd.x=Qe;Dd.y=of;ig.add(Dd)}}}Kd=Jf;We=Xe;If=Cp;Xe=Xe.next;
null==Xe&&(Xe=b.polygon.gverts.next);break}for(;Xe!=Kc;){var Be=Xe,kf=If+1;kf==b.polygon.edgeCnt&&(kf=0);if(ed[If])if(Hf[kf]){var $e=0,af=0,$e=Be.x-Kd.x,af=Be.y-Kd.y,lf=0,mf=0,lf=Kd.x-a.circle.worldCOMx,mf=Kd.y-a.circle.worldCOMy,ue=$e*$e+af*af,nf=2*(lf*$e+mf*af),Of=Math.sqrt(nf*nf-4*ue*(lf*lf+mf*mf-a.circle.radius*a.circle.radius)),ue=1/(2*ue),cg=(-nf-Of)*ue,vf=0,rf=0,qg=cg<u.epsilon?(-nf+Of)*ue:cg,vf=Kd.x+(Be.x-Kd.x)*qg,rf=Kd.y+(Be.y-Kd.y)*qg,Lf=0,Rf=0,Lf=nd.x-vf,Rf=nd.y-rf;if(Lf*Lf+Rf*Rf<u.epsilon){Ch=
0;Xe=Kc;break}var yd;null==q.zpp_pool?yd=new q:(yd=q.zpp_pool,q.zpp_pool=yd.next,yd.next=null);yd.weak=!1;yd._immutable=!1;yd.x=vf;yd.y=rf;var $f=yd;ka.flowsegs.add(ka.flowpoly.head.elt);ka.flowsegs.add($f);ka.flowpoly.add($f);Ch=1;Xe=Kc;break}else{var Ke=0,Re=0,cf=0,Se=0,cf=Be.x-Kd.x,Se=Be.y-Kd.y,jf=0,tf=0,jf=Kd.x-a.circle.worldCOMx,tf=Kd.y-a.circle.worldCOMy,pf=cf*cf+Se*Se,Pe=2*(jf*cf+tf*Se),Ud=Pe*Pe-4*pf*(jf*jf+tf*tf-a.circle.radius*a.circle.radius),bg;Ud*Ud<u.epsilon?(Ke=0>Ud?10:Re=-Pe/(2*pf),
bg=!1):(Ud=Math.sqrt(Ud),pf=1/(2*pf),Ke=(-Pe-Ud)*pf,Re=(-Pe+Ud)*pf,bg=!0);if(Ke<1-u.epsilon&&Re>u.epsilon){var uf=0,Xf=0,ch=Ke,uf=Kd.x+(Be.x-Kd.x)*ch,Xf=Kd.y+(Be.y-Kd.y)*ch,Pf;if(null!=nd){var Qf=0,Cg=0,Qf=nd.x-uf,Cg=nd.y-Xf;Pf=Qf*Qf+Cg*Cg<u.epsilon}else Pf=!1;if(Pf){Ch=0;Xe=Kc;break}var se;null==q.zpp_pool?se=new q:(se=q.zpp_pool,q.zpp_pool=se.next,se.next=null);se.weak=!1;se._immutable=!1;se.x=uf;se.y=Xf;var eg=se;null!=ka.flowpoly.head&&(ka.flowsegs.add(ka.flowpoly.head.elt),ka.flowsegs.add(eg));
ka.flowpoly.add(eg);null==nd&&(nd=ka.flowpoly.head.elt);if(bg){var Eg=0,mg=0,ag=Re,Eg=Kd.x+(Be.x-Kd.x)*ag,mg=Kd.y+(Be.y-Kd.y)*ag,Jg=ka.flowpoly,Ee;null==q.zpp_pool?Ee=new q:(Ee=q.zpp_pool,q.zpp_pool=Ee.next,Ee.next=null);Ee.weak=!1;Ee._immutable=!1;Ee.x=Eg;Ee.y=mg;Jg.add(Ee)}}}Kd=Be;We=Xe;If=kf;Xe=Xe.next;null==Xe&&(Xe=b.polygon.gverts.next)}}if(null==ka.flowpoly.head)return!1;if(null==ka.flowpoly.head.next){for(var gg=!0,Nf=b.polygon.edges.head;null!=Nf;){var zg=Nf.elt;if(zg.gnormx*a.circle.worldCOMx+
zg.gnormy*a.circle.worldCOMy>zg.gprojection){gg=!1;break}Nf=Nf.next}return gg?(c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,!0):!1}var Qd=0,Ad=0,Ef=0;if(null!=ka.flowpoly.head.next.next){for(var Xc=0,qe=0,de=0,Xc=de=qe=0,Wc=ka.flowpoly.head,Cf=Wc.elt,Wc=Wc.next,kh=Wc.elt,Wc=Wc.next;null!=Wc;)var sf=Wc.elt,Xc=Xc+kh.x*(sf.y-Cf.y),Ag=sf.y*kh.x-sf.x*kh.y,qe=qe+(kh.x+sf.x)*Ag,de=de+(kh.y+sf.y)*Ag,Cf=kh,kh=sf,Wc=Wc.next;var Wc=ka.flowpoly.head,Df=Wc.elt,Xc=Xc+kh.x*
(Df.y-Cf.y),pg=Df.y*kh.x-Df.x*kh.y,qe=qe+(kh.x+Df.x)*pg,de=de+(kh.y+Df.y)*pg,Cf=kh,kh=Df,Wc=Wc.next,Tf=Wc.elt,Xc=Xc+kh.x*(Tf.y-Cf.y),dg=Tf.y*kh.x-Tf.x*kh.y,qe=qe+(kh.x+Tf.x)*dg,de=de+(kh.y+Tf.y)*dg,Xc=0.5*Xc,Fg=1/(6*Xc),qe=qe*Fg,de=de*Fg,Gg=-Xc,Qd=Qd+qe*Gg,Ad=Ad+de*Gg,Ef=Ef-Xc}else ka.flowsegs.add(ka.flowpoly.head.elt),ka.flowsegs.add(ka.flowpoly.head.next.elt);for(;null!=ka.flowsegs.head;)var Sg=ka.flowsegs.pop_unsafe(),fg=ka.flowsegs.pop_unsafe(),vg=0,Hg=0,vg=fg.x-Sg.x,Hg=fg.y-Sg.y,Ue=0,Oe=0,Ue=
vg,Oe=Hg,Ig=1/Math.sqrt(Ue*Ue+Oe*Oe),Ue=Ue*Ig,Oe=Oe*Ig,bh=Ue,Ue=-Oe,Oe=bh,id=0,te=0,id=Sg.x+fg.x,te=Sg.y+fg.y,id=0.5*id,te=0.5*te,id=id-1*a.circle.worldCOMx,te=te-1*a.circle.worldCOMy,xg=0,yg=0,sg=Ue*id+Oe*te,Lg=sg/a.circle.radius,lg=Math.sqrt(1-Lg*Lg),Mg=Math.acos(Lg),xg=a.circle.radius*(a.circle.radius*Mg-sg*lg),yg=0.6666666666666666*a.circle.radius*lg*lg*lg/(Mg-Lg*lg),id=a.circle.worldCOMx,te=a.circle.worldCOMy,mh=yg,id=id+Ue*mh,te=te+Oe*mh,Pg=xg,Qd=Qd+id*Pg,Ad=Ad+te*Pg,Ef=Ef+xg;var Wg=1/Ef,Qd=
Qd*Wg,Ad=Ad*Wg;c.overlap=Ef;c.centroidx=Qd;c.centroidy=Ad;return!0}}return!1}var lh=a.circle,th=b.circle,tg=0,jg=0,tg=th.worldCOMx-lh.worldCOMx,jg=th.worldCOMy-lh.worldCOMy,Xg=lh.radius+th.radius,Rg=tg*tg+jg*jg;if(Rg>Xg*Xg)return!1;if(Rg<u.epsilon*u.epsilon)lh.radius<th.radius?(c.overlap=lh.area,c.centroidx=lh.worldCOMx,c.centroidy=lh.worldCOMy):(c.overlap=th.area,c.centroidx=th.worldCOMx,c.centroidy=th.worldCOMy);else{var wg=Math.sqrt(Rg),Tg=1/wg,Uf=0.5*(wg-(th.radius*th.radius-lh.radius*lh.radius)*
Tg);if(Uf<=-lh.radius)c.overlap=lh.area,c.centroidx=lh.worldCOMx,c.centroidy=lh.worldCOMy;else{var Bg=wg-Uf;if(Bg<=-th.radius)c.overlap=th.area,c.centroidx=th.worldCOMx,c.centroidy=th.worldCOMy;else{var Ng=0,oh=0,Og=0,Vg=0,Dg=Uf/lh.radius,Qg=Math.sqrt(1-Dg*Dg),ph=Math.acos(Dg),Ng=lh.radius*(lh.radius*ph-Uf*Qg),oh=0.6666666666666666*lh.radius*Qg*Qg*Qg/(ph-Dg*Qg),Yg=Bg/th.radius,ug=Math.sqrt(1-Yg*Yg),Zg=Math.acos(Yg),Og=th.radius*(th.radius*Zg-Bg*ug),Vg=0.6666666666666666*th.radius*ug*ug*ug/(Zg-Yg*
ug),$g=Ng+Og,ah=(oh*Ng+(wg-Vg)*Og)/$g*Tg;c.overlap=$g;c.centroidx=lh.worldCOMx+tg*ah;c.centroidy=lh.worldCOMy+jg*ah}}}return!0};var qk=function(){};i["zpp_nape.geom.ZPP_Convex"]=qk;qk.__name__=["zpp_nape","geom","ZPP_Convex"];qk.isinner=function(a,b,c){var d=0,e=0,d=a.x-b.x,e=a.y-b.y,f=a=0,a=c.x-b.x,f=c.y-b.y;return 0<=f*d-a*e};qk.optimise=function(a){var b=a.vertices,c=a.vertices;if(null!=b)for(;!(b.sort(),b=b.next,b==c););a=c=a.vertices;if(null!=c)for(;;){for(var b=c,d=b.prev,e=null,f=b.diagonals.head;null!=
f;){var g=f.elt;if(qk.isinner(null==f.next?b.next:f.next.elt,b,d)){for(var j=!0,h=g,i=h.prev,k=null,l=h.diagonals.head;null!=l;){var n=l.elt;if(n==b){j=qk.isinner(null==l.next?h.next:l.next.elt,h,i);break}i=n;k=l;l=l.next}j?(f=b.diagonals.erase(e),h.diagonals.erase(k)):(d=g,e=f,f=f.next)}else e=f,d=g,f=f.next}c=c.next;if(c==a)break}};var Ep=function(){this.toiDistance=0;this.next=null;this.inner=!1;this.shape=null};i["zpp_nape.geom.ZPP_ConvexRayResult"]=Ep;Ep.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"];
Ep.prototype={__class__:Ep};var Bc=function(){this.forced=!1;this.prev=this.next=this.wrap=null;this.x=this.y=0};i["zpp_nape.geom.ZPP_GeomVert"]=Bc;Bc.__name__=["zpp_nape","geom","ZPP_GeomVert"];Bc.prototype={__class__:Bc};var Rn=function(a){this.outer=this.vertices=null;this.outer=a};i["zpp_nape.geom.ZPP_GeomPoly"]=Rn;Rn.__name__=["zpp_nape","geom","ZPP_GeomPoly"];Rn.prototype={__class__:Rn};var gi=function(){this._invalidate=this.next=null;this.a=this.b=this.c=this.d=this.tx=this.ty=0;this.outer=
null};i["zpp_nape.geom.ZPP_Mat23"]=gi;gi.__name__=["zpp_nape","geom","ZPP_Mat23"];gi.get=function(){var a;null==gi.zpp_pool?a=new gi:(a=gi.zpp_pool,gi.zpp_pool=a.next,a.next=null);return a};gi.prototype={__class__:gi};var Fp=function(){this.x=null;this.m=this.n=0};i["zpp_nape.geom.ZPP_MatMN"]=Fp;Fp.__name__=["zpp_nape","geom","ZPP_MatMN"];Fp.prototype={__class__:Fp};var Tb=function(){};i["zpp_nape.geom.ZPP_Monotone"]=Tb;Tb.__name__=["zpp_nape","geom","ZPP_Monotone"];Tb.bisector=function(a){var b=
a.prev,c=a.next,d=0,e=0,d=a.x-b.x,e=a.y-b.y,f=b=0,b=c.x-a.x,f=c.y-a.y;null==q.zpp_pool?a=new q:(a=q.zpp_pool,q.zpp_pool=a.next,a.next=null);a.weak=!1;a._immutable=!1;a.x=-e-f;a.y=d+b;c=1/Math.sqrt(a.x*a.x+a.y*a.y);a.x*=c;a.y*=c;0>f*d-b*e&&(a.x=-a.x,a.y=-a.y);return a};Tb.below=function(a,b){if(a.y<b.y)return!0;if(a.y>b.y)return!1;if(a.x<b.x)return!0;if(a.x>b.x)return!1;var c=Tb.bisector(a),d=Tb.bisector(b);c.x+=1*a.x;c.y+=1*a.y;d.x+=1*b.x;d.y+=1*b.y;var e=c.x<d.x||c.x==d.x&&c.y<d.y;null!=c.outer&&
(c.outer.zpp_inner=null,c.outer=null);c._isimmutable=null;c._validate=null;c._invalidate=null;c.next=q.zpp_pool;q.zpp_pool=c;null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d._isimmutable=null;d._validate=null;d._invalidate=null;d.next=q.zpp_pool;q.zpp_pool=d;return e};Tb.above=function(a,b){return Tb.below(b,a)};Tb.left_vertex=function(a){var b=a.prev;return b.y>a.y?!0:b.y==a.y?a.next.y<a.y:!1};Tb.decompose=function(a,b){null==b?b=new kf(a):b.init(a);if(null==b.vertices)return b;null==Tb.queue&&
(Tb.queue=new Oj);var c=b.vertices,d=b.vertices;if(null!=c)for(;;){var e=c;Tb.queue.add(e);var f=0,g=0,f=e.next.x-e.x,g=e.next.y-e.y,j=0,p=0,j=e.prev.x-e.x,p=e.prev.y-e.y,f=0<p*f-j*g;e.type=Tb.below(e.prev,e)?Tb.below(e.next,e)?f?0:3:4:Tb.below(e,e.next)?f?1:2:4;c=c.next;if(c==d)break}d=Tb.queue;if(null!=d.head&&null!=d.head.next){for(var c=d.head,j=g=f=e=null,p=1,i,k,l;;){i=0;f=c;for(e=c=null;null!=f;){++i;g=f;k=0;for(l=p;null!=g&&k<p;)++k,g=g.next;for(;0<k||0<l&&null!=g;)0==k?(j=g,g=g.next,--l):
0==l||null==g?(j=f,f=f.next,--k):Tb.above(f.elt,g.elt)?(j=f,f=f.next,--k):(j=g,g=g.next,--l),null!=e?e.next=j:c=j,e=j;f=g}e.next=null;p<<=1;if(!(1<i))break}d.head=c;d.modified=!0;d.pushmod=!0}null==Tb.edges&&(null==sg.zpp_pool?Tb.edges=new sg:(Tb.edges=sg.zpp_pool,sg.zpp_pool=Tb.edges.next,Tb.edges.next=null),Tb.edges.lt=ua.edge_lt,Tb.edges.swapped=ua.edge_swap);for(;null!=Tb.queue.head;)switch(d=Tb.queue.pop_unsafe(),d.type){case 0:d.helper=d;d.node=Tb.edges.insert(d);break;case 1:c=d.prev;if(null==
c.helper)throw new h("Fatal error (1): Polygon is not weakly-simple and clockwise");2==c.helper.type&&b.add_diagonal(d,c.helper);Tb.edges.remove_node(c.node);c.helper=null;break;case 2:c=d.prev;if(null==c.helper)throw new h("Fatal error (3): Polygon is not weakly-simple and clockwise");2==c.helper.type&&b.add_diagonal(d,c.helper);Tb.edges.remove_node(c.node);c=c.helper=null;if(!Tb.edges.empty()){for(e=Tb.edges.parent;null!=e.prev;)e=e.prev;for(;null!=e;){f=e.data;if(!ua.vert_lt(f,d)){c=f;break}if(null!=
e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}if(null!=c){if(null==c.helper)throw new h("Fatal error (4): Polygon is not weakly-simple and clockwise");2==c.helper.type&&b.add_diagonal(d,c.helper);c.helper=d}break;case 3:c=null;if(!Tb.edges.empty()){for(e=Tb.edges.parent;null!=e.prev;)e=e.prev;for(;null!=e;){f=e.data;if(!ua.vert_lt(f,d)){c=f;break}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=
e.parent;e=e.parent}}}if(null!=c){if(null==c.helper)throw new h("Fatal error (2): Polygon is not weakly-simple and clockwise");b.add_diagonal(d,c.helper);c.helper=d}d.node=Tb.edges.insert(d);d.helper=d;break;case 4:if(c=d.prev,Tb.left_vertex(d)){if(null==c.helper)throw new h("Fatal error (5): Polygon is not weakly-simple and clockwise");2==c.helper.type&&b.add_diagonal(d,c.helper);Tb.edges.remove_node(c.node);c.helper=null;d.node=Tb.edges.insert(d);d.helper=d}else{c=null;if(!Tb.edges.empty()){for(e=
Tb.edges.parent;null!=e.prev;)e=e.prev;for(;null!=e;){f=e.data;if(!ua.vert_lt(f,d)){c=f;break}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}if(null==c||null==c.helper)throw new h("Fatal error (6): Polygon is not weakly-simple and clockwise");2==c.helper.type&&b.add_diagonal(d,c.helper);c.helper=d}}return b};var ua=function(){this.next=this.prev=this.node=null;this.rightchain=!1;this.helper=null;this.type=0;this.diagonals=null;
this.forced=!1;this.id=this.mag=this.x=this.y=0;this.id=ua.nextId++;this.diagonals=new Oj};i["zpp_nape.geom.ZPP_PartitionVertex"]=ua;ua.__name__=["zpp_nape","geom","ZPP_PartitionVertex"];ua.rightdistance=function(a,b){var c=a.next.y>a.y,d=0,e=0,d=a.next.x-a.x,e=a.next.y-a.y,f=0,g=0,f=b.x-a.x,g=b.y-a.y;return(c?-1:1)*(g*d-f*e)};ua.vert_lt=function(a,b){if(b==a||b==a.next)return!0;if(a.y==a.next.y){var c=a.x,d=a.next.x;return(c<d?c:d)<=b.x}return 0>=ua.rightdistance(a,b)};ua.edge_swap=function(a,b){var c=
a.node;a.node=b.node;b.node=c};ua.edge_lt=function(a,b){if(a==b&&a.next==b.next)return!1;if(a==b.next)return!ua.vert_lt(a,b);if(b==a.next)return ua.vert_lt(b,a);if(a.y==a.next.y){if(b.y==b.next.y){var c=a.x,d=a.next.x,e=b.x,f=b.next.x;return(c>d?c:d)>(e>f?e:f)}return 0<ua.rightdistance(b,a)?!0:0<ua.rightdistance(b,a.next)}c=ua.rightdistance(a,b);d=ua.rightdistance(a,b.next);if(0==c&&0==d)return c=a.x,d=a.next.x,e=b.x,f=b.next.x,(c>d?c:d)>(e>f?e:f);if(0<=c*d)return 0>c?!0:0>d;c=ua.rightdistance(b,
a);d=ua.rightdistance(b,a.next);return 0<=c*d?0<c?!0:0<d:!1};ua.prototype={sort:function(){var a=0,b=0,c=0,d=0,a=this.prev.x-this.x,b=this.prev.y-this.y,c=this.next.x-this.x,d=this.next.y-this.y,e=d*a-c*b,e=0<e?-1:0==e?0:1,f=this.diagonals;if(null!=f.head&&null!=f.head.next){for(var g=f.head,j=null,h=null,i=null,k=null,l=1,n,m,o;;){n=0;h=g;for(j=g=null;null!=h;){++n;i=h;m=0;for(o=l;null!=i&&m<l;)++m,i=i.next;for(;0<m||0<o&&null!=i;)0==m?(k=i,i=i.next,--o):0==o||null==i?(k=h,h=h.next,--m):(1==e?(a=
h.elt.x-this.x,b=h.elt.y-this.y,c=i.elt.x-this.x,d=i.elt.y-this.y,k=d*a-c*b,k=1==(0<k?-1:0==k?0:1)):(a=this.prev.x-this.x,b=this.prev.y-this.y,c=h.elt.x-this.x,d=h.elt.y-this.y,k=d*a-c*b,k=0<k?-1:0==k?0:1,a=this.prev.x-this.x,b=this.prev.y-this.y,c=i.elt.x-this.x,d=i.elt.y-this.y,a=d*a-c*b,a=0<a?-1:0==a?0:1,1==k*a||0==k*a&&(1==k||1==a)?(a=h.elt.x-this.x,b=h.elt.y-this.y,c=i.elt.x-this.x,d=i.elt.y-this.y,k=d*a-c*b,k=1==(0<k?-1:0==k?0:1)):-1==k||-1==a?k=-1==a:0==k&&0==a?(a=this.x-this.prev.x,b=this.y-
this.prev.y,c=h.elt.x-this.x,d=h.elt.y-this.y,k=a*c+b*d,c=i.elt.x-this.x,d=i.elt.y-this.y,a=a*c+b*d,k=0>k&&0<a?!0:0>a&&0<k?!1:!0):k=!0),k?(k=h,h=h.next,--m):(k=i,i=i.next,--o)),null!=j?j.next=k:g=k,j=k;h=i}j.next=null;l<<=1;if(!(1<n))break}f.head=g;f.modified=!0;f.pushmod=!0}},__class__:ua};var kf=function(a){this.vertices=this.next=null;this.init(a)};i["zpp_nape.geom.ZPP_PartitionedPoly"]=kf;kf.__name__=["zpp_nape","geom","ZPP_PartitionedPoly"];kf.prototype={eq:function(a,b){var c=0,d=0,c=a.x-b.x,
d=a.y-b.y;return c*c+d*d<u.epsilon*u.epsilon},init:function(a){if(null!=a){var b=0;if(null!=a)for(var c=a;;){var d=c,b=b+d.x*(d.next.y-d.prev.y),c=c.next;if(c==a)break}b=0<0.5*b;for(c=a;!(b?(null==ua.zpp_pool?d=new ua:(d=ua.zpp_pool,ua.zpp_pool=d.next,d.next=null),d.x=c.x,d.y=c.y,null==this.vertices?this.vertices=d.prev=d.next=d:(d.prev=this.vertices,d.next=this.vertices.next,this.vertices.next.prev=d,this.vertices.next=d)):(null==ua.zpp_pool?d=new ua:(d=ua.zpp_pool,ua.zpp_pool=d.next,d.next=null),
d.x=c.x,d.y=c.y,null==this.vertices?this.vertices=d.prev=d.next=d:(d.next=this.vertices,d.prev=this.vertices.prev,this.vertices.prev.next=d,this.vertices.prev=d)),this.vertices=d,this.vertices.forced=c.forced,c=c.next,c==a););this.remove_collinear_vertices()}},remove_collinear_vertices:function(){for(var a=this.vertices,b=!0;b||a!=this.vertices;)if(b=!1,this.eq(a,a.next)){a==this.vertices&&(this.vertices=a.next,b=!0);a.forced&&(a.next.forced=!0);if(null!=a&&a.prev==a)a.next=a.prev=null,a.helper=null,
a.next=ua.zpp_pool,ua.zpp_pool=a,a=null;else{var c=a.next;a.prev.next=a.next;a.next.prev=a.prev;a.next=a.prev=null;a.helper=null;a.next=ua.zpp_pool;ua.zpp_pool=a;a=c}if(null==a){this.vertices=null;break}}else a=a.next;if(null==this.vertices)return!0;for(;;){c=!1;a=this.vertices;for(b=!0;b||a!=this.vertices;){var b=!1,d=a.prev,e=0,f=0,e=a.x-d.x,f=a.y-d.y,g=d=0,d=a.next.x-a.x,g=a.next.y-a.y,e=g*e-d*f;if(e*e>=u.epsilon*u.epsilon)a=a.next;else if(a==this.vertices&&(this.vertices=a.next,b=!0),null!=a&&
a.prev==a?(a.next=a.prev=null,a.helper=null,a.next=ua.zpp_pool,ua.zpp_pool=a,a=null):(c=a.next,a.prev.next=a.next,a.next.prev=a.prev,a.next=a.prev=null,a.helper=null,a.next=ua.zpp_pool,ua.zpp_pool=a,a=c),c=!0,null==a){c=!1;this.vertices=null;break}}if(!c)break}return null==this.vertices},add_diagonal:function(a,b){a.diagonals.add(b);b.diagonals.add(a);a.forced=b.forced=!0},extract_partitions:function(a){null==a&&(a=new zl);if(null!=this.vertices){var b=this.vertices,c=this.vertices;if(null!=b)for(;!(b.sort(),
b=b.next,b==c););for(this.pull_partitions(this.vertices,a);null!=this.vertices;)null!=this.vertices&&this.vertices.prev==this.vertices?(this.vertices.next=this.vertices.prev=null,c=this.vertices,c.helper=null,c.next=ua.zpp_pool,ua.zpp_pool=c,c=this.vertices=null):(c=this.vertices.next,this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null,b=this.vertices,b.helper=null,b.next=ua.zpp_pool,ua.zpp_pool=b,this.vertices=null),this.vertices=
c;c=null;for(b=a.head;null!=b;)b.elt.remove_collinear_vertices()?a.erase(c):(c=b,b=b.next)}return a},pull_partitions:function(a,b){var c;null==kf.zpp_pool?c=new kf:(c=kf.zpp_pool,kf.zpp_pool=c.next,c.next=null);for(var d=a;;){var e;null==ua.zpp_pool?e=new ua:(e=ua.zpp_pool,ua.zpp_pool=e.next,e.next=null);e.x=d.x;e.y=d.y;e.forced=d.forced;null==c.vertices?c.vertices=e.prev=e.next=e:(e.prev=c.vertices,e.next=c.vertices.next,c.vertices.next.prev=e,c.vertices.next=e);c.vertices=e;c.vertices.forced=d.forced;
if(null!=d.diagonals.head){e=d.diagonals;var f=e.head.elt;e.pop();if(f==a)break;else d=this.pull_partitions(d,b)}else d=d.next;if(d==a)break}e=0;var g=c.vertices,f=c.vertices;if(null!=g)for(;;){var j=g;e+=j.x*(j.next.y-j.prev.y);g=g.next;if(g==f)break}0!=0.5*e&&b.add(c);return d},extract:function(a){null==a&&(a=new Al);if(null!=this.vertices){var b=this.vertices,c=this.vertices;if(null!=b)for(;!(b.sort(),b=b.next,b==c););for(this.pull(this.vertices,a);null!=this.vertices;)null!=this.vertices&&this.vertices.prev==
this.vertices?(this.vertices.next=this.vertices.prev=null,c=this.vertices,c.helper=null,c.next=ua.zpp_pool,ua.zpp_pool=c,c=this.vertices=null):(c=this.vertices.next,this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null,b=this.vertices,b.helper=null,b.next=ua.zpp_pool,ua.zpp_pool=b,this.vertices=null),this.vertices=c}return a},pull:function(a,b){for(var c=null,d=a;;){var e=d.x,f=d.y,g;null==Bc.zpp_pool?g=new Bc:(g=Bc.zpp_pool,
Bc.zpp_pool=g.next,g.next=null);g.forced=!1;g.x=e;g.y=f;e=g;null==c?e.prev=e.next=e:(e.prev=c,e.next=c.next,c.next.prev=e,c.next=e);c=e;c.forced=d.forced;if(null!=d.diagonals.head)if(e=d.diagonals,f=e.head.elt,e.pop(),f==a)break;else d=this.pull(d,b);else d=d.next;if(d==a)break}e=0;f=g=c;if(null!=g)for(;;){var j=g,e=e+j.x*(j.next.y-j.prev.y);g=g.next;if(g==f)break}e*=0.5;if(e*e>=u.epsilon*u.epsilon){e=c;for(f=!0;f||e!=c;)if(f=!1,j=g=0,g=e.x-e.next.x,j=e.y-e.next.y,g*g+j*j<u.epsilon*u.epsilon){if(e==
c&&(c=e.next,f=!0),e.forced&&(e.next.forced=!0),null!=e&&e.prev==e?e=e.next=e.prev=null:(g=e.next,e.prev.next=e.next,e.next.prev=e.prev,e.next=e.prev=null,e=g),null==e){c=null;break}}else e=e.next;if(null!=c)for(;;){g=!1;e=c;for(f=!0;f||e!=c;){var f=!1,h=e.prev,i=j=0,j=e.x-h.x,i=e.y-h.y,k=h=0,h=e.next.x-e.x,k=e.next.y-e.y,j=k*j-h*i;if(j*j>=u.epsilon*u.epsilon)e=e.next;else if(e==c&&(c=e.next,f=!0),null!=e&&e.prev==e?e=e.next=e.prev=null:(g=e.next,e.prev.next=e.next,e.next.prev=e.prev,e.next=e.prev=
null,e=g),g=!0,null==e){g=!1;c=null;break}}if(!g)break}null!=c&&b.add(c)}return d},__class__:kf};var yf=function(){this.slipped=this.failed=this.kinematic=!1;this.c1=this.c2=this.axis=null;this.frozen1=this.frozen2=!1;this.s1=this.s2=this.arbiter=null;this.toi=0;this.next=null;this.c1=new q;this.c2=new q;this.axis=new q};i["zpp_nape.geom.ZPP_ToiEvent"]=yf;yf.__name__=["zpp_nape","geom","ZPP_ToiEvent"];yf.prototype={__class__:yf};var Pj=function(){};i["zpp_nape.geom.ZPP_SweepDistance"]=Pj;Pj.__name__=
["zpp_nape","geom","ZPP_SweepDistance"];Pj.dynamicSweep=function(a,b,c,d,e){null==e&&(e=!1);var f=a.s1,g=a.s2,j=f.body,h=g.body,i=0,k=0,i=h.velx-j.velx,k=h.vely-j.vely,l=j.angvel;0>l&&(l=-l);var n=h.angvel;0>n&&(n=-n);var m=f.sweepCoef*l+g.sweepCoef*n;if(!e&&!a.kinematic&&i*i+k*k<u.dynamicSweepLinearThreshold*u.dynamicSweepLinearThreshold&&m<u.dynamicSweepAngularThreshold)a.toi=-1,a.failed=!0;else{for(var o=a.c1,q=a.c2,r=a.axis,s=c,t=0;;){var w=s*b,v=w-j.sweepTime;if(0!=v){j.sweepTime=w;var y=v;j.posx+=
j.velx*y;j.posy+=j.vely*y;if(0!=j.angvel){var z=j.sweep_angvel*v;j.rot+=z;if(1.0E-4<z*z)j.axisx=Math.sin(j.rot),j.axisy=Math.cos(j.rot);else{var G=z*z,H=1-0.5*G,F=1-G*G/8,E=(H*j.axisx+z*j.axisy)*F;j.axisy=(H*j.axisy-z*j.axisx)*F;j.axisx=E}}}if(0==f.type)f.worldCOMx=j.posx+(j.axisy*f.localCOMx-j.axisx*f.localCOMy),f.worldCOMy=j.posy+(f.localCOMx*j.axisx+f.localCOMy*j.axisy);else{for(var J=f.polygon,P=J.lverts.next,O=J.gverts.next;null!=O;){var K=O,M=P,P=P.next;K.x=j.posx+(j.axisy*M.x-j.axisx*M.y);
K.y=j.posy+(M.x*j.axisx+M.y*j.axisy);O=O.next}for(var rc=J.edges.head,L=J.gverts.next,V=L,L=L.next;null!=L;){var Y=L,Ab=rc.elt,rc=rc.next;Ab.gnormx=j.axisy*Ab.lnormx-j.axisx*Ab.lnormy;Ab.gnormy=Ab.lnormx*j.axisx+Ab.lnormy*j.axisy;Ab.gprojection=j.posx*Ab.gnormx+j.posy*Ab.gnormy+Ab.lprojection;Ab.tp0=V.y*Ab.gnormx-V.x*Ab.gnormy;Ab.tp1=Y.y*Ab.gnormx-Y.x*Ab.gnormy;V=Y;L=L.next}var S=J.gverts.next,kc=rc.elt,rc=rc.next;kc.gnormx=j.axisy*kc.lnormx-j.axisx*kc.lnormy;kc.gnormy=kc.lnormx*j.axisx+kc.lnormy*
j.axisy;kc.gprojection=j.posx*kc.gnormx+j.posy*kc.gnormy+kc.lprojection;kc.tp0=V.y*kc.gnormx-V.x*kc.gnormy;kc.tp1=S.y*kc.gnormx-S.x*kc.gnormy}var qf=s*b,va=qf-h.sweepTime;if(0!=va){h.sweepTime=qf;var X=va;h.posx+=h.velx*X;h.posy+=h.vely*X;if(0!=h.angvel){var Z=h.sweep_angvel*va;h.rot+=Z;if(1.0E-4<Z*Z)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var U=Z*Z,Mc=1-0.5*U,ka=1-U*U/8,W=(Mc*h.axisx+Z*h.axisy)*ka;h.axisy=(Mc*h.axisy-Z*h.axisx)*ka;h.axisx=W}}}if(0==g.type)g.worldCOMx=h.posx+(h.axisy*
g.localCOMx-h.axisx*g.localCOMy),g.worldCOMy=h.posy+(g.localCOMx*h.axisx+g.localCOMy*h.axisy);else{for(var ha=g.polygon,ca=ha.lverts.next,fa=ha.gverts.next;null!=fa;){var Vc=fa,oa=ca,ca=ca.next;Vc.x=h.posx+(h.axisy*oa.x-h.axisx*oa.y);Vc.y=h.posy+(oa.x*h.axisx+oa.y*h.axisy);fa=fa.next}for(var Yb=ha.edges.head,tb=ha.gverts.next,la=tb,tb=tb.next;null!=tb;){var T=tb,Da=Yb.elt,Yb=Yb.next;Da.gnormx=h.axisy*Da.lnormx-h.axisx*Da.lnormy;Da.gnormy=Da.lnormx*h.axisx+Da.lnormy*h.axisy;Da.gprojection=h.posx*Da.gnormx+
h.posy*Da.gnormy+Da.lprojection;Da.tp0=la.y*Da.gnormx-la.x*Da.gnormy;Da.tp1=T.y*Da.gnormx-T.x*Da.gnormy;la=T;tb=tb.next}var pa=ha.gverts.next,$=Yb.elt,Yb=Yb.next;$.gnormx=h.axisy*$.lnormx-h.axisx*$.lnormy;$.gnormy=$.lnormx*h.axisx+$.lnormy*h.axisy;$.gprojection=h.posx*$.gnormx+h.posy*$.gnormy+$.lprojection;$.tp0=la.y*$.gnormx-la.x*$.gnormy;$.tp1=pa.y*$.gnormx-pa.x*$.gnormy}var lc=f,Md=g,I=o,Sa=q,ga;if(0==lc.type&&0==Md.type){var ja=lc.circle,da=Md.circle,wa,ra=0,Ja=0,ra=da.worldCOMx-ja.worldCOMx,
Ja=da.worldCOMy-ja.worldCOMy,Ea=Math.sqrt(ra*ra+Ja*Ja);wa=Ea-(ja.radius+da.radius);if(1.0E100>wa){if(0==Ea)ra=1,Ja=0;else var A=1/Ea,ra=ra*A,Ja=Ja*A;var xa=ja.radius;I.x=ja.worldCOMx+ra*xa;I.y=ja.worldCOMy+Ja*xa;var Ma=-da.radius;Sa.x=da.worldCOMx+ra*Ma;Sa.y=da.worldCOMy+Ja*Ma;r.x=ra;r.y=Ja}ga=wa}else{var $a=!1;if(0==lc.type&&1==Md.type)var za=lc,lc=Md,Md=za,Db=I,I=Sa,Sa=Db,$a=!0;if(1==lc.type&&0==Md.type){for(var ya=Md.circle,Ua=-1.0E100,Ba=null,ma=lc.polygon.edges.head;null!=ma;){var na=ma.elt,
ea=na.gnormx*ya.worldCOMx+na.gnormy*ya.worldCOMy-na.gprojection-ya.radius;if(1.0E100<ea){Ua=ea;break}0<ea?ea>Ua&&(Ua=ea,Ba=na):0>Ua&&ea>Ua&&(Ua=ea,Ba=na);ma=ma.next}if(1.0E100>Ua){var ia=Ba.gp0,Pc=Ba.gp1,ac=ya.worldCOMy*Ba.gnormx-ya.worldCOMx*Ba.gnormy;if(ac<=ia.y*Ba.gnormx-ia.x*Ba.gnormy){var sa=0,kb=0,sa=ya.worldCOMx-ia.x,kb=ya.worldCOMy-ia.y,C=Math.sqrt(sa*sa+kb*kb),Ua=C-ya.radius;if(1.0E100>Ua){if(0==C)sa=1,kb=0;else var qa=1/C,sa=sa*qa,kb=kb*qa;I.x=ia.x+0*sa;I.y=ia.y+0*kb;var ob=-ya.radius;Sa.x=
ya.worldCOMx+sa*ob;Sa.y=ya.worldCOMy+kb*ob;r.x=sa;r.y=kb}}else if(ac>=Pc.y*Ba.gnormx-Pc.x*Ba.gnormy){var ta=0,pb=0,ta=ya.worldCOMx-Pc.x,pb=ya.worldCOMy-Pc.y,Ha=Math.sqrt(ta*ta+pb*pb),Ua=Ha-ya.radius;if(1.0E100>Ua){if(0==Ha)ta=1,pb=0;else var Q=1/Ha,ta=ta*Q,pb=pb*Q;I.x=Pc.x+0*ta;I.y=Pc.y+0*pb;var aa=-ya.radius;Sa.x=ya.worldCOMx+ta*aa;Sa.y=ya.worldCOMy+pb*aa;r.x=ta;r.y=pb}}else{var Na=-ya.radius;Sa.x=ya.worldCOMx+Ba.gnormx*Na;Sa.y=ya.worldCOMy+Ba.gnormy*Na;var ba=-Ua;I.x=Sa.x+Ba.gnormx*ba;I.y=Sa.y+
Ba.gnormy*ba;r.x=Ba.gnormx;r.y=Ba.gnormy}}$a&&(r.x=-r.x,r.y=-r.y);ga=Ua}else{for(var Ca=lc.polygon,Qa=Md.polygon,Hb=-1.0E100,bb=null,ib=null,Oa=0,Va=Ca.edges.head;null!=Va;){for(var D=Va.elt,lb=1.0E100,Ta=Qa.gverts.next;null!=Ta;){var jb=Ta,gb=D.gnormx*jb.x+D.gnormy*jb.y;gb<lb&&(lb=gb);Ta=Ta.next}lb-=D.gprojection;if(1.0E100<lb){Hb=lb;break}0<lb?lb>Hb&&(Hb=lb,bb=D,Oa=1):0>Hb&&lb>Hb&&(Hb=lb,bb=D,Oa=1);Va=Va.next}if(1.0E100>Hb){for(var Ga=Qa.edges.head;null!=Ga;){for(var Eb=Ga.elt,cb=1.0E100,zb=Ca.gverts.next;null!=
zb;){var Nc=zb,rd=Eb.gnormx*Nc.x+Eb.gnormy*Nc.y;rd<cb&&(cb=rd);zb=zb.next}cb-=Eb.gprojection;if(1.0E100<cb){Hb=cb;break}0<cb?cb>Hb&&(Hb=cb,ib=Eb,Oa=2):0>Hb&&cb>Hb&&(Hb=cb,ib=Eb,Oa=2);Ga=Ga.next}if(1.0E100>Hb){var ua,Ib;if(1==Oa)ua=Qa,Ib=bb;else{ua=Ca;Ib=ib;var ub=I,I=Sa,Sa=ub,$a=!$a}for(var wb=null,mb=1.0E100,Fa=ua.edges.head;null!=Fa;){var B=Fa.elt,Bb=Ib.gnormx*B.gnormx+Ib.gnormy*B.gnormy;Bb<mb&&(mb=Bb,wb=B);Fa=Fa.next}$a?(r.x=-Ib.gnormx,r.y=-Ib.gnormy):(r.x=Ib.gnormx,r.y=Ib.gnormy);if(0<=Hb){var db=
Ib.gp0,ab=Ib.gp1,x=wb.gp0,Nb=wb.gp1,Jb=0,qb=0,Ia=0,La=0,Jb=ab.x-db.x,qb=ab.y-db.y,Ia=Nb.x-x.x,La=Nb.y-x.y,sb=1/(Jb*Jb+qb*qb),vb=1/(Ia*Ia+La*La),eb=-(Jb*(db.x-x.x)+qb*(db.y-x.y))*sb,Ob=-(Jb*(db.x-Nb.x)+qb*(db.y-Nb.y))*sb,Aa=-(Ia*(x.x-db.x)+La*(x.y-db.y))*vb,Vb=-(Ia*(x.x-ab.x)+La*(x.y-ab.y))*vb;0>eb?eb=0:1<eb&&(eb=1);0>Ob?Ob=0:1<Ob&&(Ob=1);0>Aa?Aa=0:1<Aa&&(Aa=1);0>Vb?Vb=0:1<Vb&&(Vb=1);var Ra=0,Za=0,yb=eb,Ra=db.x+Jb*yb,Za=db.y+qb*yb,Xa=0,Xb=0,Ka=Ob,Xa=db.x+Jb*Ka,Xb=db.y+qb*Ka,Pb=0,R=0,Ya=Aa,Pb=x.x+Ia*
Ya,R=x.y+La*Ya,fb=0,ae=0,Lb=Vb,fb=x.x+Ia*Lb,ae=x.y+La*Lb,Ic=0,sc=0,Ic=Ra-x.x,sc=Za-x.y,Wa=Ic*Ic+sc*sc,Wb=0,bc=0,Wb=Xa-Nb.x,bc=Xb-Nb.y,me=Wb*Wb+bc*bc,Kb=0,dc=0,Kb=Pb-db.x,dc=R-db.y,Pa=Kb*Kb+dc*dc,nb=0,N=0,nb=fb-ab.x,N=ae-ab.y,Cb=nb*nb+N*N,ic=0,ne=0,Jd=null;Wa<me?(ic=Ra,ne=Za,Jd=x):(ic=Xa,ne=Xb,Jd=Nb,Wa=me);var fe=0,gc=0,Qc=null;Pa<Cb?(fe=Pb,gc=R,Qc=db):(fe=fb,gc=ae,Qc=ab,Pa=Cb);Wa<Pa?(I.x=ic,I.y=ne,Sa.x=Jd.x,Sa.y=Jd.y,Hb=Math.sqrt(Wa)):(Sa.x=fe,Sa.y=gc,I.x=Qc.x,I.y=Qc.y,Hb=Math.sqrt(Pa));if(0!=Hb){r.x=
Sa.x-I.x;r.y=Sa.y-I.y;var qc=1/Hb;r.x*=qc;r.y*=qc;$a&&(r.x=-r.x,r.y=-r.y)}ga=Hb}else{var Gb=0,Mb=0,Gb=wb.gp0.x,Mb=wb.gp0.y,Me=0,ze=0,Me=wb.gp1.x,ze=wb.gp1.y,Ub=0,rb=0,Ub=Me-Gb,rb=ze-Mb,Ce=Ib.gnormy*Gb-Ib.gnormx*Mb,Tb=Ib.gnormy*Me-Ib.gnormx*ze,Ec=1/(Tb-Ce),Gc=(-Ib.tp1-Ce)*Ec;if(Gc>u.epsilon)var Pd=Gc,Gb=Gb+Ub*Pd,Mb=Mb+rb*Pd;var Mf=(-Ib.tp0-Tb)*Ec;if(Mf<-u.epsilon)var Wf=Mf,Me=Me+Ub*Wf,ze=ze+rb*Wf;var ve=Gb*Ib.gnormx+Mb*Ib.gnormy-Ib.gprojection,jd=Me*Ib.gnormx+ze*Ib.gnormy-Ib.gprojection;if(ve<jd){Sa.x=
Gb;Sa.y=Mb;var og=-ve;I.x=Sa.x+Ib.gnormx*og;I.y=Sa.y+Ib.gnormy*og;ga=ve}else{Sa.x=Me;Sa.y=ze;var cd=-jd;I.x=Sa.x+Ib.gnormx*cd;I.y=Sa.y+Ib.gnormy*cd;ga=jd}}}else ga=1.0E100}else ga=1.0E100}}var Jc=ga+d,xb=i*r.x+k*r.y;if(Jc<u.distanceThresholdCCD){if(e)break;var sd=0,nc=0,sd=o.x-j.posx,nc=o.y-j.posy,be=0,hh=0,be=q.x-h.posx,hh=q.y-h.posy,kd=xb-j.sweep_angvel*(r.y*sd-r.x*nc)+h.sweep_angvel*(r.y*be-r.x*hh);0<kd&&(a.slipped=!0);if(0>=kd||Jc<0.5*u.distanceThresholdCCD)break}var tc=(m-xb)*b;if(0>=tc){s=-1;
break}var Rc=Jc/tc;1.0E-6>Rc&&(Rc=1.0E-6);s+=Rc;if(1<=s){var s=1,Sb=s*b,mc=Sb-j.sweepTime;if(0!=mc){j.sweepTime=Sb;var Id=mc;j.posx+=j.velx*Id;j.posy+=j.vely*Id;if(0!=j.angvel){var hg=j.sweep_angvel*mc;j.rot+=hg;if(1.0E-4<hg*hg)j.axisx=Math.sin(j.rot),j.axisy=Math.cos(j.rot);else{var fc=hg*hg,$c=1-0.5*fc,Vi=1-fc*fc/8,Qb=($c*j.axisx+hg*j.axisy)*Vi;j.axisy=($c*j.axisy-hg*j.axisx)*Vi;j.axisx=Qb}}}if(0==f.type)f.worldCOMx=j.posx+(j.axisy*f.localCOMx-j.axisx*f.localCOMy),f.worldCOMy=j.posy+(f.localCOMx*
j.axisx+f.localCOMy*j.axisy);else{for(var Bd=f.polygon,Yf=Bd.lverts.next,hb=Bd.gverts.next;null!=hb;){var Im=hb,Rd=Yf,Yf=Yf.next;Im.x=j.posx+(j.axisy*Rd.x-j.axisx*Rd.y);Im.y=j.posy+(Rd.x*j.axisx+Rd.y*j.axisy);hb=hb.next}for(var Cd=Bd.edges.head,md=Bd.gverts.next,Cc=md,md=md.next;null!=md;){var Bc=md,Ac=Cd.elt,Cd=Cd.next;Ac.gnormx=j.axisy*Ac.lnormx-j.axisx*Ac.lnormy;Ac.gnormy=Ac.lnormx*j.axisx+Ac.lnormy*j.axisy;Ac.gprojection=j.posx*Ac.gnormx+j.posy*Ac.gnormy+Ac.lprojection;Ac.tp0=Cc.y*Ac.gnormx-Cc.x*
Ac.gnormy;Ac.tp1=Bc.y*Ac.gnormx-Bc.x*Ac.gnormy;Cc=Bc;md=md.next}var Hc=Bd.gverts.next,Vd=Cd.elt,Cd=Cd.next;Vd.gnormx=j.axisy*Vd.lnormx-j.axisx*Vd.lnormy;Vd.gnormy=Vd.lnormx*j.axisx+Vd.lnormy*j.axisy;Vd.gprojection=j.posx*Vd.gnormx+j.posy*Vd.gnormy+Vd.lprojection;Vd.tp0=Cc.y*Vd.gnormx-Cc.x*Vd.gnormy;Vd.tp1=Hc.y*Vd.gnormx-Hc.x*Vd.gnormy}var Uc=s*b,Hk=Uc-h.sweepTime;if(0!=Hk){h.sweepTime=Uc;var rg=Hk;h.posx+=h.velx*rg;h.posy+=h.vely*rg;if(0!=h.angvel){var dd=h.sweep_angvel*Hk;h.rot+=dd;if(1.0E-4<dd*
dd)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var he=dd*dd,ff=1-0.5*he,zc=1-he*he/8,Ff=(ff*h.axisx+dd*h.axisy)*zc;h.axisy=(ff*h.axisy-dd*h.axisx)*zc;h.axisx=Ff}}}if(0==g.type)g.worldCOMx=h.posx+(h.axisy*g.localCOMx-h.axisx*g.localCOMy),g.worldCOMy=h.posy+(g.localCOMx*h.axisx+g.localCOMy*h.axisy);else{for(var xd=g.polygon,Rb=xd.lverts.next,ad=xd.gverts.next;null!=ad;){var Dc=ad,Fe=Rb,Rb=Rb.next;Dc.x=h.posx+(h.axisy*Fe.x-h.axisx*Fe.y);Dc.y=h.posy+(Fe.x*h.axisx+Fe.y*h.axisy);ad=ad.next}for(var vh=
xd.edges.head,Tc=xd.gverts.next,ce=Tc,Tc=Tc.next;null!=Tc;){var td=Tc,dh=vh.elt,vh=vh.next;dh.gnormx=h.axisy*dh.lnormx-h.axisx*dh.lnormy;dh.gnormy=dh.lnormx*h.axisx+dh.lnormy*h.axisy;dh.gprojection=h.posx*dh.gnormx+h.posy*dh.gnormy+dh.lprojection;dh.tp0=ce.y*dh.gnormx-ce.x*dh.gnormy;dh.tp1=td.y*dh.gnormx-td.x*dh.gnormy;ce=td;Tc=Tc.next}var gd=xd.gverts.next,oe=vh.elt,vh=vh.next;oe.gnormx=h.axisy*oe.lnormx-h.axisx*oe.lnormy;oe.gnormy=oe.lnormx*h.axisx+oe.lnormy*h.axisy;oe.gprojection=h.posx*oe.gnormx+
h.posy*oe.gnormy+oe.lprojection;oe.tp0=ce.y*oe.gnormx-ce.x*oe.gnormy;oe.tp1=gd.y*oe.gnormx-gd.x*oe.gnormy}var kg=f,ie=g,pe=o,cc=q,rh;if(0==kg.type&&0==ie.type){var Zb=kg.circle,ec=ie.circle,Jm,Gd=0,wc=0,Gd=ec.worldCOMx-Zb.worldCOMx,wc=ec.worldCOMy-Zb.worldCOMy,Od=Math.sqrt(Gd*Gd+wc*wc);Jm=Od-(Zb.radius+ec.radius);if(1.0E100>Jm){if(0==Od)Gd=1,wc=0;else var ed=1/Od,Gd=Gd*ed,wc=wc*ed;var Wd=Zb.radius;pe.x=Zb.worldCOMx+Gd*Wd;pe.y=Zb.worldCOMy+wc*Wd;var xc=-ec.radius;cc.x=ec.worldCOMx+Gd*xc;cc.y=ec.worldCOMy+
wc*xc;r.x=Gd;r.y=wc}rh=Jm}else{var Yh=!1;if(0==kg.type&&1==ie.type)var Jk=kg,kg=ie,ie=Jk,bd=pe,pe=cc,cc=bd,Yh=!0;if(1==kg.type&&0==ie.type){for(var Gf=ie.circle,jh=-1.0E100,$b=null,re=kg.polygon.edges.head;null!=re;){var Ge=re.elt,Bh=Ge.gnormx*Gf.worldCOMx+Ge.gnormy*Gf.worldCOMy-Ge.gprojection-Gf.radius;if(1.0E100<Bh){jh=Bh;break}0<Bh?Bh>jh&&(jh=Bh,$b=Ge):0>jh&&Bh>jh&&(jh=Bh,$b=Ge);re=re.next}if(1.0E100>jh){var He=$b.gp0,Zc=$b.gp1,Lc=Gf.worldCOMy*$b.gnormx-Gf.worldCOMx*$b.gnormy;if(Lc<=He.y*$b.gnormx-
He.x*$b.gnormy){var vd=0,Af=0,vd=Gf.worldCOMx-He.x,Af=Gf.worldCOMy-He.y,Kk=Math.sqrt(vd*vd+Af*Af),jh=Kk-Gf.radius;if(1.0E100>jh){if(0==Kk)vd=1,Af=0;else var Fc=1/Kk,vd=vd*Fc,Af=Af*Fc;pe.x=He.x+0*vd;pe.y=He.y+0*Af;var Kc=-Gf.radius;cc.x=Gf.worldCOMx+vd*Kc;cc.y=Gf.worldCOMy+Af*Kc;r.x=vd;r.y=Af}}else if(Lc>=Zc.y*$b.gnormx-Zc.x*$b.gnormy){var Ah=0,Hf=0,Ah=Gf.worldCOMx-Zc.x,Hf=Gf.worldCOMy-Zc.y,Fb=Math.sqrt(Ah*Ah+Hf*Hf),jh=Fb-Gf.radius;if(1.0E100>jh){if(0==Fb)Ah=1,Hf=0;else var Wc=1/Fb,Ah=Ah*Wc,Hf=Hf*
Wc;pe.x=Zc.x+0*Ah;pe.y=Zc.y+0*Hf;var We=-Gf.radius;cc.x=Gf.worldCOMx+Ah*We;cc.y=Gf.worldCOMy+Hf*We;r.x=Ah;r.y=Hf}}else{var If=-Gf.radius;cc.x=Gf.worldCOMx+$b.gnormx*If;cc.y=Gf.worldCOMy+$b.gnormy*If;var Hd=-jh;pe.x=cc.x+$b.gnormx*Hd;pe.y=cc.y+$b.gnormy*Hd;r.x=$b.gnormx;r.y=$b.gnormy}}Yh&&(r.x=-r.x,r.y=-r.y);rh=jh}else{for(var jc=kg.polygon,zd=ie.polygon,Ie=-1.0E100,Xd=null,fd=null,zh=0,eh=jc.edges.head;null!=eh;){for(var Yc=eh.elt,Je=1.0E100,Sc=zd.gverts.next;null!=Sc;){var vc=Sc,Be=Yc.gnormx*vc.x+
Yc.gnormy*vc.y;Be<Je&&(Je=Be);Sc=Sc.next}Je-=Yc.gprojection;if(1.0E100<Je){Ie=Je;break}0<Je?Je>Ie&&(Ie=Je,Xd=Yc,zh=1):0>Ie&&Je>Ie&&(Ie=Je,Xd=Yc,zh=1);eh=eh.next}if(1.0E100>Ie){for(var od=zd.edges.head;null!=od;){for(var pd=od.elt,yc=1.0E100,hd=jc.gverts.next;null!=hd;){var le=hd,Oc=pd.gnormx*le.x+pd.gnormy*le.y;Oc<yc&&(yc=Oc);hd=hd.next}yc-=pd.gprojection;if(1.0E100<yc){Ie=yc;break}0<yc?yc>Ie&&(Ie=yc,fd=pd,zh=2):0>Ie&&yc>Ie&&(Ie=yc,fd=pd,zh=2);od=od.next}if(1.0E100>Ie){var Nd,nd;if(1==zh)Nd=zd,nd=
Xd;else{Nd=jc;nd=fd;var ud=pe,pe=cc,cc=ud,Yh=!Yh}for(var oc=null,Ld=1.0E100,Xc=Nd.edges.head;null!=Xc;){var Yd=Xc.elt,De=nd.gnormx*Yd.gnormx+nd.gnormy*Yd.gnormy;De<Ld&&(Ld=De,oc=Yd);Xc=Xc.next}Yh?(r.x=-nd.gnormx,r.y=-nd.gnormy):(r.x=nd.gnormx,r.y=nd.gnormy);if(0<=Ie){var gf=nd.gp0,wf=nd.gp1,wd=oc.gp0,Sd=oc.gp1,Td=0,pc=0,hc=0,Dd=0,Td=wf.x-gf.x,pc=wf.y-gf.y,hc=Sd.x-wd.x,Dd=Sd.y-wd.y,qd=1/(Td*Td+pc*pc),ld=1/(hc*hc+Dd*Dd),je=-(Td*(gf.x-wd.x)+pc*(gf.y-wd.y))*qd,yd=-(Td*(gf.x-Sd.x)+pc*(gf.y-Sd.y))*qd,Zd=
-(hc*(wd.x-gf.x)+Dd*(wd.y-gf.y))*ld,Ed=-(hc*(wd.x-wf.x)+Dd*(wd.y-wf.y))*ld;0>je?je=0:1<je&&(je=1);0>yd?yd=0:1<yd&&(yd=1);0>Zd?Zd=0:1<Zd&&(Zd=1);0>Ed?Ed=0:1<Ed&&(Ed=1);var $d=0,Kd=0,Fd=je,$d=gf.x+Td*Fd,Kd=gf.y+pc*Fd,Xe=0,Jf=0,uc=yd,Xe=gf.x+Td*uc,Jf=gf.y+pc*uc,qe=0,ke=0,de=Zd,qe=wd.x+hc*de,ke=wd.y+Dd*de,se=0,ee=0,Ve=Ed,se=wd.x+hc*Ve,ee=wd.y+Dd*Ve,Ee=0,Ne=0,Ee=$d-wd.x,Ne=Kd-wd.y,hf=Ee*Ee+Ne*Ne,Kf=0,Te=0,Kf=Xe-Sd.x,Te=Jf-Sd.y,df=Kf*Kf+Te*Te,id=0,xf=0,id=qe-gf.x,xf=ke-gf.y,bf=id*id+xf*xf,te=0,Ud=0,te=
se-wf.x,Ud=ee-wf.y,Ye=te*te+Ud*Ud,xe=0,Ze=0,Zf=null;hf<df?(xe=$d,Ze=Kd,Zf=wd):(xe=Xe,Ze=Jf,Zf=Sd,hf=df);var Ue=0,Oe=0,Bf=null;bf<Ye?(Ue=qe,Oe=ke,Bf=gf):(Ue=se,Oe=ee,Bf=wf,bf=Ye);hf<bf?(pe.x=xe,pe.y=Ze,cc.x=Zf.x,cc.y=Zf.y,Ie=Math.sqrt(hf)):(cc.x=Ue,cc.y=Oe,pe.x=Bf.x,pe.y=Bf.y,Ie=Math.sqrt(bf));if(0!=Ie){r.x=cc.x-pe.x;r.y=cc.y-pe.y;var pf=1/Ie;r.x*=pf;r.y*=pf;Yh&&(r.x=-r.x,r.y=-r.y)}rh=Ie}else{var ue=0,ge=0,ue=oc.gp0.x,ge=oc.gp0.y,Qd=0,Ad=0,Qd=oc.gp1.x,Ad=oc.gp1.y,Ke=0,kf=0,Ke=Qd-ue,kf=Ad-ge,$e=nd.gnormy*
ue-nd.gnormx*ge,Pe=nd.gnormy*Qd-nd.gnormx*Ad,af=1/(Pe-$e),lf=(-nd.tp1-$e)*af;if(lf>u.epsilon)var mf=lf,ue=ue+Ke*mf,ge=ge+kf*mf;var nf=(-nd.tp0-Pe)*af;if(nf<-u.epsilon)var Ef=nf,Qd=Qd+Ke*Ef,Ad=Ad+kf*Ef;var yf=ue*nd.gnormx+ge*nd.gnormy-nd.gprojection,Qe=Qd*nd.gnormx+Ad*nd.gnormy-nd.gprojection;if(yf<Qe){cc.x=ue;cc.y=ge;var Re=-yf;pe.x=cc.x+nd.gnormx*Re;pe.y=cc.y+nd.gnormy*Re;rh=yf}else{cc.x=Qd;cc.y=Ad;var cf=-Qe;pe.x=cc.x+nd.gnormx*cf;pe.y=cc.y+nd.gnormy*cf;rh=Qe}}}else rh=1.0E100}else rh=1.0E100}}var Se=
rh+d,jf=i*r.x+k*r.y;if(Se<u.distanceThresholdCCD){if(e)break;var sf=0,tf=0,sf=o.x-j.posx,tf=o.y-j.posy,of=0,Df=0,of=q.x-h.posx,Df=q.y-h.posy,vf=jf-j.sweep_angvel*(r.y*sf-r.x*tf)+h.sweep_angvel*(r.y*of-r.x*Df);0<vf&&(a.slipped=!0);if(0>=vf||Se<0.5*u.distanceThresholdCCD)break}s=-1;break}if(40<=++t){Jc>d&&(a.failed=!0);break}}a.toi=s}};Pj.staticSweep=function(a,b,c,d){var e=a.s1,f=a.s2,g=e.body,j=0,h=0,j=-g.velx,h=-g.vely,i=g.sweep_angvel;0>i&&(i=-i);for(var k=e.sweepCoef*i,l=a.c1,n=a.c2,m=a.axis,o=
c,r=0;;){var q=o*b,s=q-g.sweepTime;if(0!=s){g.sweepTime=q;var t=s;g.posx+=g.velx*t;g.posy+=g.vely*t;if(0!=g.angvel){var w=g.sweep_angvel*s;g.rot+=w;if(1.0E-4<w*w)g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot);else{var v=w*w,z=1-0.5*v,y=1-v*v/8,G=(z*g.axisx+w*g.axisy)*y;g.axisy=(z*g.axisy-w*g.axisx)*y;g.axisx=G}}}if(0==e.type)e.worldCOMx=g.posx+(g.axisy*e.localCOMx-g.axisx*e.localCOMy),e.worldCOMy=g.posy+(e.localCOMx*g.axisx+e.localCOMy*g.axisy);else{for(var H=e.polygon,F=H.lverts.next,E=H.gverts.next;null!=
E;){var J=E,P=F,F=F.next;J.x=g.posx+(g.axisy*P.x-g.axisx*P.y);J.y=g.posy+(P.x*g.axisx+P.y*g.axisy);E=E.next}for(var O=H.edges.head,K=H.gverts.next,M=K,K=K.next;null!=K;){var L=K,V=O.elt,O=O.next;V.gnormx=g.axisy*V.lnormx-g.axisx*V.lnormy;V.gnormy=V.lnormx*g.axisx+V.lnormy*g.axisy;V.gprojection=g.posx*V.gnormx+g.posy*V.gnormy+V.lprojection;V.tp0=M.y*V.gnormx-M.x*V.gnormy;V.tp1=L.y*V.gnormx-L.x*V.gnormy;M=L;K=K.next}var Z=H.gverts.next,Y=O.elt,O=O.next;Y.gnormx=g.axisy*Y.lnormx-g.axisx*Y.lnormy;Y.gnormy=
Y.lnormx*g.axisx+Y.lnormy*g.axisy;Y.gprojection=g.posx*Y.gnormx+g.posy*Y.gnormy+Y.lprojection;Y.tp0=M.y*Y.gnormx-M.x*Y.gnormy;Y.tp1=Z.y*Y.gnormx-Z.x*Y.gnormy}var Ab=e,S=f,kc=l,X=n,va;if(0==Ab.type&&0==S.type){var U=Ab.circle,ka=S.circle,$,Mc=0,ha=0,Mc=ka.worldCOMx-U.worldCOMx,ha=ka.worldCOMy-U.worldCOMy,ca=Math.sqrt(Mc*Mc+ha*ha);$=ca-(U.radius+ka.radius);if(1.0E100>$){if(0==ca)Mc=1,ha=0;else var W=1/ca,Mc=Mc*W,ha=ha*W;var fa=U.radius;kc.x=U.worldCOMx+Mc*fa;kc.y=U.worldCOMy+ha*fa;var la=-ka.radius;
X.x=ka.worldCOMx+Mc*la;X.y=ka.worldCOMy+ha*la;m.x=Mc;m.y=ha}va=$}else{var Vc=!1;if(0==Ab.type&&1==S.type)var oa=Ab,Ab=S,S=oa,Yb=kc,kc=X,X=Yb,Vc=!0;if(1==Ab.type&&0==S.type){for(var tb=S.circle,ga=-1.0E100,T=null,Da=Ab.polygon.edges.head;null!=Da;){var pa=Da.elt,ja=pa.gnormx*tb.worldCOMx+pa.gnormy*tb.worldCOMy-pa.gprojection-tb.radius;if(1.0E100<ja){ga=ja;break}0<ja?ja>ga&&(ga=ja,T=pa):0>ga&&ja>ga&&(ga=ja,T=pa);Da=Da.next}if(1.0E100>ga){var lc=T.gp0,Md=T.gp1,I=tb.worldCOMy*T.gnormx-tb.worldCOMx*T.gnormy;
if(I<=lc.y*T.gnormx-lc.x*T.gnormy){var Sa=0,da=0,Sa=tb.worldCOMx-lc.x,da=tb.worldCOMy-lc.y,na=Math.sqrt(Sa*Sa+da*da),ga=na-tb.radius;if(1.0E100>ga){if(0==na)Sa=1,da=0;else var ma=1/na,Sa=Sa*ma,da=da*ma;kc.x=lc.x+0*Sa;kc.y=lc.y+0*da;var wa=-tb.radius;X.x=tb.worldCOMx+Sa*wa;X.y=tb.worldCOMy+da*wa;m.x=Sa;m.y=da}}else if(I>=Md.y*T.gnormx-Md.x*T.gnormy){var ra=0,Ja=0,ra=tb.worldCOMx-Md.x,Ja=tb.worldCOMy-Md.y,Ea=Math.sqrt(ra*ra+Ja*Ja),ga=Ea-tb.radius;if(1.0E100>ga){if(0==Ea)ra=1,Ja=0;else var A=1/Ea,ra=
ra*A,Ja=Ja*A;kc.x=Md.x+0*ra;kc.y=Md.y+0*Ja;var xa=-tb.radius;X.x=tb.worldCOMx+ra*xa;X.y=tb.worldCOMy+Ja*xa;m.x=ra;m.y=Ja}}else{var Ma=-tb.radius;X.x=tb.worldCOMx+T.gnormx*Ma;X.y=tb.worldCOMy+T.gnormy*Ma;var $a=-ga;kc.x=X.x+T.gnormx*$a;kc.y=X.y+T.gnormy*$a;m.x=T.gnormx;m.y=T.gnormy}}Vc&&(m.x=-m.x,m.y=-m.y);va=ga}else{for(var za=Ab.polygon,Db=S.polygon,ya=-1.0E100,Ua=null,Ba=null,ea=0,sa=za.edges.head;null!=sa;){for(var qa=sa.elt,ia=1.0E100,Pc=Db.gverts.next;null!=Pc;){var ac=Pc,Ha=qa.gnormx*ac.x+qa.gnormy*
ac.y;Ha<ia&&(ia=Ha);Pc=Pc.next}ia-=qa.gprojection;if(1.0E100<ia){ya=ia;break}0<ia?ia>ya&&(ya=ia,Ua=qa,ea=1):0>ya&&ia>ya&&(ya=ia,Ua=qa,ea=1);sa=sa.next}if(1.0E100>ya){for(var kb=Db.edges.head;null!=kb;){for(var C=kb.elt,Ca=1.0E100,ob=za.gverts.next;null!=ob;){var ta=ob,pb=C.gnormx*ta.x+C.gnormy*ta.y;pb<Ca&&(Ca=pb);ob=ob.next}Ca-=C.gprojection;if(1.0E100<Ca){ya=Ca;break}0<Ca?Ca>ya&&(ya=Ca,Ba=C,ea=2):0>ya&&Ca>ya&&(ya=Ca,Ba=C,ea=2);kb=kb.next}if(1.0E100>ya){var Qa,Q;if(1==ea)Qa=Db,Q=Ua;else{Qa=za;Q=Ba;
var aa=kc,kc=X,X=aa,Vc=!Vc}for(var Na=null,ba=1.0E100,Ia=Qa.edges.head;null!=Ia;){var La=Ia.elt,Hb=Q.gnormx*La.gnormx+Q.gnormy*La.gnormy;Hb<ba&&(ba=Hb,Na=La);Ia=Ia.next}Vc?(m.x=-Q.gnormx,m.y=-Q.gnormy):(m.x=Q.gnormx,m.y=Q.gnormy);if(0<=ya){var bb=Q.gp0,ib=Q.gp1,Oa=Na.gp0,Va=Na.gp1,D=0,lb=0,Ta=0,jb=0,D=ib.x-bb.x,lb=ib.y-bb.y,Ta=Va.x-Oa.x,jb=Va.y-Oa.y,gb=1/(D*D+lb*lb),Ga=1/(Ta*Ta+jb*jb),Eb=-(D*(bb.x-Oa.x)+lb*(bb.y-Oa.y))*gb,cb=-(D*(bb.x-Va.x)+lb*(bb.y-Va.y))*gb,zb=-(Ta*(Oa.x-bb.x)+jb*(Oa.y-bb.y))*Ga,
Nc=-(Ta*(Oa.x-ib.x)+jb*(Oa.y-ib.y))*Ga;0>Eb?Eb=0:1<Eb&&(Eb=1);0>cb?cb=0:1<cb&&(cb=1);0>zb?zb=0:1<zb&&(zb=1);0>Nc?Nc=0:1<Nc&&(Nc=1);var rd=0,ua=0,Ib=Eb,rd=bb.x+D*Ib,ua=bb.y+lb*Ib,ub=0,wb=0,mb=cb,ub=bb.x+D*mb,wb=bb.y+lb*mb,Fa=0,B=0,Bb=zb,Fa=Oa.x+Ta*Bb,B=Oa.y+jb*Bb,db=0,ab=0,x=Nc,db=Oa.x+Ta*x,ab=Oa.y+jb*x,Nb=0,Jb=0,Nb=rd-Oa.x,Jb=ua-Oa.y,qb=Nb*Nb+Jb*Jb,Aa=0,Ra=0,Aa=ub-Va.x,Ra=wb-Va.y,sb=Aa*Aa+Ra*Ra,vb=0,eb=0,vb=Fa-bb.x,eb=B-bb.y,Ob=vb*vb+eb*eb,Za=0,Vb=0,Za=db-ib.x,Vb=ab-ib.y,Xa=Za*Za+Vb*Vb,Ka=0,yb=0,
Wa=null;qb<sb?(Ka=rd,yb=ua,Wa=Oa):(Ka=ub,yb=wb,Wa=Va,qb=sb);var Xb=0,fb=0,Pb=null;Ob<Xa?(Xb=Fa,fb=B,Pb=bb):(Xb=db,fb=ab,Pb=ib,Ob=Xa);qb<Ob?(kc.x=Ka,kc.y=yb,X.x=Wa.x,X.y=Wa.y,ya=Math.sqrt(qb)):(X.x=Xb,X.y=fb,kc.x=Pb.x,kc.y=Pb.y,ya=Math.sqrt(Ob));if(0!=ya){m.x=X.x-kc.x;m.y=X.y-kc.y;var R=1/ya;m.x*=R;m.y*=R;Vc&&(m.x=-m.x,m.y=-m.y)}va=ya}else{var Pa=0,Ya=0,Pa=Na.gp0.x,Ya=Na.gp0.y,ae=0,Lb=0,ae=Na.gp1.x,Lb=Na.gp1.y,Ic=0,sc=0,Ic=ae-Pa,sc=Lb-Ya,nb=Q.gnormy*Pa-Q.gnormx*Ya,Wb=Q.gnormy*ae-Q.gnormx*Lb,bc=1/(Wb-
nb),me=(-Q.tp1-nb)*bc;if(me>u.epsilon)var Kb=me,Pa=Pa+Ic*Kb,Ya=Ya+sc*Kb;var dc=(-Q.tp0-Wb)*bc;if(dc<-u.epsilon)var Gb=dc,ae=ae+Ic*Gb,Lb=Lb+sc*Gb;var Mb=Pa*Q.gnormx+Ya*Q.gnormy-Q.gprojection,N=ae*Q.gnormx+Lb*Q.gnormy-Q.gprojection;if(Mb<N){X.x=Pa;X.y=Ya;var Cb=-Mb;kc.x=X.x+Q.gnormx*Cb;kc.y=X.y+Q.gnormy*Cb;va=Mb}else{X.x=ae;X.y=Lb;var ic=-N;kc.x=X.x+Q.gnormx*ic;kc.y=X.y+Q.gnormy*ic;va=N}}}else va=1.0E100}else va=1.0E100}}var ne=va+d,Jd=j*m.x+h*m.y;if(ne<u.distanceThresholdCCD){var fe=0,gc=0,fe=l.x-
g.posx,gc=l.y-g.posy,Qc=Jd-g.sweep_angvel*(m.y*fe-m.x*gc);0<Qc&&(a.slipped=!0);if(0>=Qc||ne<0.5*u.distanceThresholdCCD)break}var qc=(k-Jd)*b;if(0>=qc){o=-1;break}var Ub=ne/qc;1.0E-6>Ub&&(Ub=1.0E-6);o+=Ub;if(1<=o){var o=1,rb=o*b,Me=rb-g.sweepTime;if(0!=Me){g.sweepTime=rb;var ze=Me;g.posx+=g.velx*ze;g.posy+=g.vely*ze;if(0!=g.angvel){var Tb=g.sweep_angvel*Me;g.rot+=Tb;if(1.0E-4<Tb*Tb)g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot);else{var Ec=Tb*Tb,Ce=1-0.5*Ec,Gc=1-Ec*Ec/8,mc=(Ce*g.axisx+Tb*g.axisy)*
Gc;g.axisy=(Ce*g.axisy-Tb*g.axisx)*Gc;g.axisx=mc}}}if(0==e.type)e.worldCOMx=g.posx+(g.axisy*e.localCOMx-g.axisx*e.localCOMy),e.worldCOMy=g.posy+(e.localCOMx*g.axisx+e.localCOMy*g.axisy);else{for(var Sb=e.polygon,Pd=Sb.lverts.next,Mf=Sb.gverts.next;null!=Mf;){var Wf=Mf,ve=Pd,Pd=Pd.next;Wf.x=g.posx+(g.axisy*ve.x-g.axisx*ve.y);Wf.y=g.posy+(ve.x*g.axisx+ve.y*g.axisy);Mf=Mf.next}for(var jd=Sb.edges.head,og=Sb.gverts.next,cd=og,og=og.next;null!=og;){var Jc=og,xb=jd.elt,jd=jd.next;xb.gnormx=g.axisy*xb.lnormx-
g.axisx*xb.lnormy;xb.gnormy=xb.lnormx*g.axisx+xb.lnormy*g.axisy;xb.gprojection=g.posx*xb.gnormx+g.posy*xb.gnormy+xb.lprojection;xb.tp0=cd.y*xb.gnormx-cd.x*xb.gnormy;xb.tp1=Jc.y*xb.gnormx-Jc.x*xb.gnormy;cd=Jc;og=og.next}var sd=Sb.gverts.next,nc=jd.elt,jd=jd.next;nc.gnormx=g.axisy*nc.lnormx-g.axisx*nc.lnormy;nc.gnormy=nc.lnormx*g.axisx+nc.lnormy*g.axisy;nc.gprojection=g.posx*nc.gnormx+g.posy*nc.gnormy+nc.lprojection;nc.tp0=cd.y*nc.gnormx-cd.x*nc.gnormy;nc.tp1=sd.y*nc.gnormx-sd.x*nc.gnormy}var be=e,
hh=f,kd=l,tc=n,Rc;if(0==be.type&&0==hh.type){var fc=be.circle,Cc=hh.circle,Id,hg=0,wc=0,hg=Cc.worldCOMx-fc.worldCOMx,wc=Cc.worldCOMy-fc.worldCOMy,hb=Math.sqrt(hg*hg+wc*wc);Id=hb-(fc.radius+Cc.radius);if(1.0E100>Id){if(0==hb)hg=1,wc=0;else var Vi=1/hb,hg=hg*Vi,wc=wc*Vi;var $c=fc.radius;kd.x=fc.worldCOMx+hg*$c;kd.y=fc.worldCOMy+wc*$c;var Bd=-Cc.radius;tc.x=Cc.worldCOMx+hg*Bd;tc.y=Cc.worldCOMy+wc*Bd;m.x=hg;m.y=wc}Rc=Id}else{var Yf=!1;if(0==be.type&&1==hh.type)var Tc=be,be=hh,hh=Tc,xd=kd,kd=tc,tc=xd,
Yf=!0;if(1==be.type&&0==hh.type){for(var Rd=hh.circle,Cd=-1.0E100,md=null,Bc=be.polygon.edges.head;null!=Bc;){var yc=Bc.elt,Ac=yc.gnormx*Rd.worldCOMx+yc.gnormy*Rd.worldCOMy-yc.gprojection-Rd.radius;if(1.0E100<Ac){Cd=Ac;break}0<Ac?Ac>Cd&&(Cd=Ac,md=yc):0>Cd&&Ac>Cd&&(Cd=Ac,md=yc);Bc=Bc.next}if(1.0E100>Cd){var Qb=md.gp0,Vd=md.gp1,Zb=Rd.worldCOMy*md.gnormx-Rd.worldCOMx*md.gnormy;if(Zb<=Qb.y*md.gnormx-Qb.x*md.gnormy){var ec=0,rg=0,ec=Rd.worldCOMx-Qb.x,rg=Rd.worldCOMy-Qb.y,dd=Math.sqrt(ec*ec+rg*rg),Cd=dd-
Rd.radius;if(1.0E100>Cd){if(0==dd)ec=1,rg=0;else var he=1/dd,ec=ec*he,rg=rg*he;kd.x=Qb.x+0*ec;kd.y=Qb.y+0*rg;var ff=-Rd.radius;tc.x=Rd.worldCOMx+ec*ff;tc.y=Rd.worldCOMy+rg*ff;m.x=ec;m.y=rg}}else if(Zb>=Vd.y*md.gnormx-Vd.x*md.gnormy){var Hc=0,Ff=0,Hc=Rd.worldCOMx-Vd.x,Ff=Rd.worldCOMy-Vd.y,ad=Math.sqrt(Hc*Hc+Ff*Ff),Cd=ad-Rd.radius;if(1.0E100>Cd){if(0==ad)Hc=1,Ff=0;else var Zc=1/ad,Hc=Hc*Zc,Ff=Ff*Zc;kd.x=Vd.x+0*Hc;kd.y=Vd.y+0*Ff;var Uc=-Rd.radius;tc.x=Rd.worldCOMx+Hc*Uc;tc.y=Rd.worldCOMy+Ff*Uc;m.x=Hc;
m.y=Ff}}else{var Rb=-Rd.radius;tc.x=Rd.worldCOMx+md.gnormx*Rb;tc.y=Rd.worldCOMy+md.gnormy*Rb;var Fe=-Cd;kd.x=tc.x+md.gnormx*Fe;kd.y=tc.y+md.gnormy*Fe;m.x=md.gnormx;m.y=md.gnormy}}Yf&&(m.x=-m.x,m.y=-m.y);Rc=Cd}else{for(var zc=be.polygon,td=hh.polygon,ce=-1.0E100,Dc=null,re=null,gd=0,oe=zc.edges.head;null!=oe;){for(var kg=oe.elt,ie=1.0E100,pe=td.gverts.next;null!=pe;){var cc=pe,rh=kg.gnormx*cc.x+kg.gnormy*cc.y;rh<ie&&(ie=rh);pe=pe.next}ie-=kg.gprojection;if(1.0E100<ie){ce=ie;break}0<ie?ie>ce&&(ce=ie,
Dc=kg,gd=1):0>ce&&ie>ce&&(ce=ie,Dc=kg,gd=1);oe=oe.next}if(1.0E100>ce){for(var xc=td.edges.head;null!=xc;){for(var Yc=xc.elt,oc=1.0E100,Gd=zc.gverts.next;null!=Gd;){var Td=Gd,Od=Yc.gnormx*Td.x+Yc.gnormy*Td.y;Od<oc&&(oc=Od);Gd=Gd.next}oc-=Yc.gprojection;if(1.0E100<oc){ce=oc;break}0<oc?oc>ce&&(ce=oc,re=Yc,gd=2):0>ce&&oc>ce&&(ce=oc,re=Yc,gd=2);xc=xc.next}if(1.0E100>ce){var ed,Wd;if(1==gd)ed=td,Wd=Dc;else{ed=zc;Wd=re;var pc=kd,kd=tc,tc=pc,Yf=!Yf}for(var hc=null,Jk=1.0E100,Dd=ed.edges.head;null!=Dd;){var Gf=
Dd.elt,jh=Wd.gnormx*Gf.gnormx+Wd.gnormy*Gf.gnormy;jh<Jk&&(Jk=jh,hc=Gf);Dd=Dd.next}Yf?(m.x=-Wd.gnormx,m.y=-Wd.gnormy):(m.x=Wd.gnormx,m.y=Wd.gnormy);if(0<=ce){var $b=Wd.gp0,pd=Wd.gp1,Ge=hc.gp0,bd=hc.gp1,He=0,Sc=0,Lc=0,vd=0,He=pd.x-$b.x,Sc=pd.y-$b.y,Lc=bd.x-Ge.x,vd=bd.y-Ge.y,Af=1/(He*He+Sc*Sc),Fc=1/(Lc*Lc+vd*vd),od=-(He*($b.x-Ge.x)+Sc*($b.y-Ge.y))*Af,zd=-(He*($b.x-bd.x)+Sc*($b.y-bd.y))*Af,Kc=-(Lc*(Ge.x-$b.x)+vd*(Ge.y-$b.y))*Fc,Hf=-(Lc*(Ge.x-pd.x)+vd*(Ge.y-pd.y))*Fc;0>od?od=0:1<od&&(od=1);0>zd?zd=0:1<
zd&&(zd=1);0>Kc?Kc=0:1<Kc&&(Kc=1);0>Hf?Hf=0:1<Hf&&(Hf=1);var Fb=0,hd=0,We=od,Fb=$b.x+He*We,hd=$b.y+Sc*We,If=0,Hd=0,jc=zd,If=$b.x+He*jc,Hd=$b.y+Sc*jc,Wc=0,Ie=0,Xd=Kc,Wc=Ge.x+Lc*Xd,Ie=Ge.y+vd*Xd,fd=0,vc=0,eh=Hf,fd=Ge.x+Lc*eh,vc=Ge.y+vd*eh,je=0,Je=0,je=Fb-Ge.x,Je=hd-Ge.y,Xc=je*je+Je*Je,yd=0,Zd=0,yd=If-bd.x,Zd=Hd-bd.y,Be=yd*yd+Zd*Zd,Ed=0,Nd=0,Ed=Wc-$b.x,Nd=Ie-$b.y,Yd=Ed*Ed+Nd*Nd,le=0,Oc=0,le=fd-pd.x,Oc=vc-pd.y,ue=le*le+Oc*Oc,nd=0,ge=0,Qd=null;Xc<Be?(nd=Fb,ge=hd,Qd=Ge):(nd=If,ge=Hd,Qd=bd,Xc=Be);var Ad=
0,Ld=0,qd=null;Yd<ue?(Ad=Wc,Ld=Ie,qd=$b):(Ad=fd,Ld=vc,qd=pd,Yd=ue);Xc<Yd?(kd.x=nd,kd.y=ge,tc.x=Qd.x,tc.y=Qd.y,ce=Math.sqrt(Xc)):(tc.x=Ad,tc.y=Ld,kd.x=qd.x,kd.y=qd.y,ce=Math.sqrt(Yd));if(0!=ce){m.x=tc.x-kd.x;m.y=tc.y-kd.y;var De=1/ce;m.x*=De;m.y*=De;Yf&&(m.x=-m.x,m.y=-m.y)}Rc=ce}else{var gf=0,wf=0,gf=hc.gp0.x,wf=hc.gp0.y,wd=0,Sd=0,wd=hc.gp1.x,Sd=hc.gp1.y,$d=0,ld=0,$d=wd-gf,ld=Sd-wf,ud=Wd.gnormy*gf-Wd.gnormx*wf,qe=Wd.gnormy*wd-Wd.gnormx*Sd,ke=1/(qe-ud),se=(-Wd.tp1-ud)*ke;if(se>u.epsilon)var ee=se,gf=
gf+$d*ee,wf=wf+ld*ee;var Fd=(-Wd.tp0-qe)*ke;if(Fd<-u.epsilon)var Ee=Fd,wd=wd+$d*Ee,Sd=Sd+ld*Ee;var uc=gf*Wd.gnormx+wf*Wd.gnormy-Wd.gprojection,de=wd*Wd.gnormx+Sd*Wd.gnormy-Wd.gprojection;if(uc<de){tc.x=gf;tc.y=wf;var Kd=-uc;kd.x=tc.x+Wd.gnormx*Kd;kd.y=tc.y+Wd.gnormy*Kd;Rc=uc}else{tc.x=wd;tc.y=Sd;var Ne=-de;kd.x=tc.x+Wd.gnormx*Ne;kd.y=tc.y+Wd.gnormy*Ne;Rc=de}}}else Rc=1.0E100}else Rc=1.0E100}}var Xe=Rc+d,Jf=j*m.x+h*m.y;if(Xe<u.distanceThresholdCCD){var Te=0,id=0,Te=l.x-g.posx,id=l.y-g.posy,te=Jf-g.sweep_angvel*
(m.y*Te-m.x*id);0<te&&(a.slipped=!0);if(0>=te||Xe<0.5*u.distanceThresholdCCD)break}o=-1;break}if(40<=++r){ne>d&&(a.failed=!0);break}}a.toi=o};var Qe=function(){this.node=null;this.id=this.di=0;this.a=this.b=null;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null};i["zpp_nape.geom.ZPP_PartitionPair"]=Qe;Qe.__name__=["zpp_nape","geom","ZPP_PartitionPair"];Qe.edge_swap=function(a,b){var c=a.node;a.node=b.node;b.node=c};Qe.edge_lt=function(a,b){return a.id>=b.id?a.id==b.id?a.di<b.di:
!1:!0};Qe.prototype={add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.next;this.pop();return a},__class__:Qe};var Pa=function(){};i["zpp_nape.geom.ZPP_Triangular"]=Pa;Pa.__name__=["zpp_nape","geom","ZPP_Triangular"];Pa.delaunay=function(a,b,c,d){var e=0,f=0,g=0,j=0,e=c.x-b.x,f=c.y-b.y,g=b.x-
a.x,j=b.y-a.y;0<=j*e-g*f?e=!0:(e=d.x-c.x,f=d.y-c.y,g=c.x-b.x,j=c.y-b.y,e=0<=j*e-g*f);e?e=!0:(e=a.x-d.x,f=a.y-d.y,g=d.x-c.x,j=d.y-c.y,e=0<=j*e-g*f);e?e=!0:(e=b.x-a.x,f=b.y-a.y,g=a.x-d.x,j=a.y-d.y,e=0<=j*e-g*f);return e?!0:0<b.x*(c.y*d.mag-c.mag*d.y)-c.x*(b.y*d.mag-b.mag*d.y)+d.x*(b.y*c.mag-b.mag*c.y)-(a.x*(c.y*d.mag-c.mag*d.y)-c.x*(a.y*d.mag-a.mag*d.y)+d.x*(a.y*c.mag-a.mag*c.y))+(a.x*(b.y*d.mag-b.mag*d.y)-b.x*(a.y*d.mag-a.mag*d.y)+d.x*(a.y*b.mag-a.mag*b.y))-(a.x*(b.y*c.mag-b.mag*c.y)-b.x*(a.y*c.mag-
a.mag*c.y)+c.x*(a.y*b.mag-a.mag*b.y))};Pa.optimise=function(a){var b=a.vertices,c=a.vertices;if(null!=b)for(;;){var d=b;d.sort();d.mag=d.x*d.x+d.y*d.y;b=b.next;if(b==c)break}null==Pa.edgeSet&&(null==Lg.zpp_pool?Pa.edgeSet=new Lg:(Pa.edgeSet=Lg.zpp_pool,Lg.zpp_pool=Pa.edgeSet.next,Pa.edgeSet.next=null),Pa.edgeSet.lt=Qe.edge_lt,Pa.edgeSet.swapped=Qe.edge_swap);null==Qe.zpp_pool?c=new Qe:(c=Qe.zpp_pool,Qe.zpp_pool=c.next,c.next=null);a=b=a.vertices;if(null!=b)for(;;){var d=b,e=d.next;d.diagonals.reverse();
for(var f=d.diagonals.head;null!=f;){var g=f.elt;if(!(g.id<d.id)&&!Pa.delaunay(d,e,g,null==f.next?d.prev:f.next.elt))null==Qe.zpp_pool?e=new Qe:(e=Qe.zpp_pool,Qe.zpp_pool=e.next,e.next=null),e.a=d,e.b=g,d.id<g.id?(e.id=d.id,e.di=g.id):(e.id=g.id,e.di=d.id),c.add(e),e.node=Pa.edgeSet.insert(e);e=g;f=f.next}b=b.next;if(b==a)break}for(;null!=c.next;){a=c.pop_unsafe();b=a.a;g=a.b;d=b.next;f=null;for(e=b.diagonals.head;null!=e;){var j=e.elt;if(j==g){e=e.next;f=null==e?b.prev:e.elt;break}d=j;e=e.next}b.diagonals.remove(g);
g.diagonals.remove(b);if(g==d.next)d.diagonals.add(f);else for(e=d.diagonals.head;null!=e;){if(e.elt==g){d.diagonals.insert(e,f);break}e=e.next}if(b==f.next)f.diagonals.add(d);else for(g=f.diagonals.head;null!=g;){if(g.elt==b){f.diagonals.insert(g,d);break}g=g.next}Pa.edgeSet.remove_node(a.node);a.a=a.b=null;a.node=null;a.next=Qe.zpp_pool;Qe.zpp_pool=a}c.a=c.b=null;c.node=null;c.next=Qe.zpp_pool;Qe.zpp_pool=c};Pa.triangulate=function(a){var b=a.vertices,c=a.vertices,d=a.vertices.next,e=a.vertices;
if(null!=d)for(;;){var f=d;if(f.y<b.y||f.y==b.y&&f.x<b.x)b=f;if(c.y<f.y||c.y==f.y&&c.x<f.x)c=f;d=d.next;if(d==e)break}null==Pa.queue&&(Pa.queue=new Oj);e=c.prev;d=c.next;for(Pa.queue.add(c);e!=b||d!=b;)e==b||d!=b&&(e.y<d.y||e.y==d.y&&e.x<d.x)?(Pa.queue.add(d),d.rightchain=!1,d=d.next):(Pa.queue.add(e),e.rightchain=!0,e=e.prev);Pa.queue.add(b);null==Pa.stack&&(Pa.stack=new Oj);Pa.stack.add(Pa.queue.pop_unsafe());e=Pa.queue.pop_unsafe();for(Pa.stack.add(e);;){b=Pa.queue.pop_unsafe();if(null==Pa.queue.head)break;
if(b.rightchain!=Pa.stack.head.elt.rightchain)for(;;){d=Pa.stack.pop_unsafe();if(null==Pa.stack.head)break;a.add_diagonal(d,b)}else for(e=Pa.stack.pop_unsafe();null!=Pa.stack.head;){var d=Pa.stack.head.elt,g=f=0,f=b.x-e.x,g=b.y-e.y,j=0,h=0,j=e.x-d.x,h=e.y-d.y,f=h*f-j*g;if(b.rightchain&&0<=f||!b.rightchain&&0>=f)break;a.add_diagonal(d,b);e=d;Pa.stack.pop()}Pa.stack.add(e);Pa.stack.add(b);e=b}if(null!=Pa.stack.head)for(Pa.stack.pop();null!=Pa.stack.head;){b=Pa.stack.pop_unsafe();if(null==Pa.stack.head)break;
a.add_diagonal(c,b)}return a};var q=function(){this.length=this.x=this.y=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.weak=!1;this._isimmutable=this.outer=null;this._immutable=!1;this._invalidate=this._validate=null};i["zpp_nape.geom.ZPP_Vec2"]=q;q.__name__=["zpp_nape","geom","ZPP_Vec2"];q.prototype={add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},insert:function(a,b){b._inuse=!0;null==a?(b.next=this.next,this.next=b):(b.next=a.next,
a.next=b);this.pushmod=this.modified=!0;this.length++;return b},erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.next,b=null;null!=a;){var c=a.next;a.next=b;b=this.next=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.next;0<a--&&null!=b;)b=b.next;return b},toString:function(){return"{ x: "+
this.x+" y: "+this.y+" }"},__class__:q};var Gp=function(){this._validate=null;this.x=this.y=this.z=0};i["zpp_nape.geom.ZPP_Vec3"]=Gp;Gp.__name__=["zpp_nape","geom","ZPP_Vec3"];Gp.prototype={__class__:Gp};var je=function(){this.userData=this.ishape=this.ibody=this.icompound=this.cbsets=this.group=this.cbTypes=this.cbSet=null;this.id=0;this.outer_i=null;this.id=rf.Interactor();this.cbsets=new Ro;this.cbTypes=new Wh};i["zpp_nape.phys.ZPP_Interactor"]=je;je.__name__=["zpp_nape","phys","ZPP_Interactor"];
je.get=function(a,b){for(var c=a.id<b.id?a.id:b.id,d=a.id<b.id?b.id:a.id,e=null,f=(a.cbsets.length<b.cbsets.length?a.cbsets:b.cbsets).head;null!=f;){var g=f.elt;if(g.id==c&&g.di==d){e=g;break}f=f.next}return e};je.prototype={__iaddedToSpace:function(){null!=this.group&&this.group.interactors.add(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.add(this),a=a.next;this.alloc_cbSet()},__iremovedFromSpace:function(){null!=this.group&&this.group.interactors.remove(this);for(var a=this.cbTypes.head;null!=
a;)a.elt.interactors.remove(this),a=a.next;this.dealloc_cbSet()},wake:function(){if(null!=this.ishape){var a=this.ishape.body;null!=a&&null!=a.space&&a.space.non_inlined_wake(a)}else null!=this.ibody?null!=this.ibody.space&&this.ibody.space.non_inlined_wake(this.ibody):null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound)},insert_cbtype:function(a){if(!this.cbTypes.has(a)){var b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:
this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.add(this));for(var c=null,d=this.cbTypes.head;null!=d&&!(a.id<d.elt.id);){c=d;d=d.next}var d=this.cbTypes,e;null==qa.zpp_pool?e=new qa:(e=qa.zpp_pool,qa.zpp_pool=e.next,e.next=null);e.elt=a;a=e;null==c?(a.next=d.head,d.head=a):(a.next=c.next,c.next=a);d.pushmod=d.modified=!0;d.length++;null!=b&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){var a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=
this.ibody?this.ibody.space:this.icompound.space;if(null!=(this.cbSet=a.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.interactors.add(this),this.cbSet.validate(),a.freshInteractorType(this)},dealloc_cbSet:function(){var a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=this.cbSet){this.cbSet.interactors.remove(this);a.nullInteractorType(this);if(0==--this.cbSet.count){a.cbsets.remove(this.cbSet);a=this.cbSet;
a.listeners.clear();a.zip_listeners=!0;a.bodylisteners.clear();a.zip_bodylisteners=!0;a.conlisteners.clear();for(a.zip_conlisteners=!0;null!=a.cbTypes.head;)a.cbTypes.pop_unsafe().cbsets.remove(a);a.next=ea.zpp_pool;ea.zpp_pool=a}this.cbSet=null}},immutable_midstep:function(a){if(null!=this.ibody){var b=this.ibody;if(null!=b.space&&b.space.midstep)throw new h("Error: "+a+" cannot be set during a space step()");}else null!=this.ishape?this.ishape.__immutable_midstep(a):this.icompound.__imutable_midstep(a)},
__class__:je};var hi=function(){this.wrap_localCOM=this.wrap_worldCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_aabb=!1;this.aabb=null;this.norotate=!1;this.cinertia=this.iinertia=this.sinertia=0;this.zip_inertia=!1;this.inertiaMode=this.inertia=0;this.zip_gravMassScale=!1;this.gravMassMode=this.gravMassScale=0;this.zip_gravMass=!1;this.gravMass=0;this.nomove=!1;this.massMode=this.imass=this.smass=this.cmass=0;this.zip_mass=
!1;this.mass=0;this.zip_axis=!1;this.forcex=this.forcey=this.kinvelx=this.kinvely=this.svelx=this.svely=this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=this.axisx=this.axisy=0;this.wrap_vel=null;this.velx=this.vely=0;this.wrap_pos=null;this.pre_posx=this.pre_posy=this.posx=this.posy=0;this.bullet=this.bulletEnabled=this.disableCCD=!1;this.sweepRadius=0;this.sweepFrozen=!1;this.sweepTime=this.sweep_angvel=0;this.compound=this.shapes=this.wrap_shapes=this.space=this.arbiters=this.constraints=
this.component=null;this.type=0;this.world=!1;this.outer=null;je.call(this);this.ibody=this;this.bulletEnabled=this.world=!1;this.sweep_angvel=this.sweepTime=0;this.disableCCD=this.norotate=this.nomove=!1;this.axisx=this.rot=this.posy=this.posx=0;this.axisy=1;this.torque=this.angvel=this.kinangvel=this.forcey=this.forcex=this.kinvely=this.kinvelx=this.vely=this.velx=this.svely=this.svelx=0;this.pre_rot=this.pre_posy=this.pre_posx=Infinity;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=
0;this.zip_aabb=!0;var a;null==sb.zpp_pool?a=new sb:(a=sb.zpp_pool,sb.zpp_pool=a.next,a.next=null);a.minx=0;a.miny=0;a.maxx=0;a.maxy=0;this.aabb=a;this.aabb._immutable=!0;this.aabb._validate=v(this,this.aabb_validate);this.gravMassMode=this.massMode=0;this.gravMassScale=1;this.inertiaMode=0;this.arbiters=new Lk;this.constraints=new oi;this.shapes=new Mj;this.wrap_shapes=Oh.get(this.shapes);this.wrap_shapes.zpp_inner.adder=v(this,this.shapes_adder);this.wrap_shapes.zpp_inner.subber=v(this,this.shapes_subber);
this.wrap_shapes.zpp_inner._invalidate=v(this,this.shapes_invalidate);this.wrap_shapes.zpp_inner._modifiable=v(this,this.shapes_modifiable);this.kinematicDelaySleep=!1};i["zpp_nape.phys.ZPP_Body"]=hi;hi.__name__=["zpp_nape","phys","ZPP_Body"];hi.__static=function(){null==l.BodyType_STATIC&&(l.internal=!0,l.BodyType_STATIC=new qd,l.internal=!1);var a=new tf(l.BodyType_STATIC),b=a.zpp_inner;b.world=!0;b.wrap_shapes.zpp_inner.immutable=!0;b.smass=b.imass=b.cmass=b.mass=b.gravMass=0;b.sinertia=b.iinertia=
b.cinertia=b.inertia=0;b.cbTypes.clear();return a};hi.__super__=je;hi.prototype=z(je.prototype,{invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},invalidate_shapes:function(){this.zip_worldCOM=this.zip_localCOM=this.zip_aabb=!0;this.invalidate_mass();this.invalidate_inertia()},atRest:function(a){if(2!=this.type)return this.component.sleeping;var b=u.linearSleepThreshold,b=b*b;if(this.velx*this.velx+this.vely*this.vely>b)a=!1;else{var c=0,d=0,c=this.posx-this.pre_posx,d=
this.posy-this.pre_posy;c*c+d*d>0.25*b*a*a?a=!1:(c=b=0,b=this.aabb.maxx-this.aabb.minx,c=this.aabb.maxy-this.aabb.miny,b=b*b+c*c,c=u.angularSleepThreshold,c*=c,4*this.angvel*this.angvel*b>c?a=!1:(d=this.rot-this.pre_rot,a=d*d*b>c*a*a?!1:!0))}a||(this.component.waket=this.space.stamp);return this.component.waket+u.sleepDelay<this.space.stamp},refreshArbiters:function(){for(var a=this.arbiters.head;null!=a;)a.elt.invalidated=!0,a=a.next},pos_invalidate:function(a){this.immutable_midstep("Body::position");
if(1==this.type&&null!=this.space)throw new h("Error: Cannot move a static object once inside a Space");if(!(this.posx==a.x&&this.posy==a.y)){this.posx=a.x;this.posy=a.y;for(a=this.shapes.head;null!=a;){var b=a.elt;1==b.type&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0;this.wake()}},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(a){if(1==this.type)throw new h("Error: Static body cannot have its velocity set.");
this.velx=a.x;this.vely=a.y;this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},setupPosition:function(){var a=this.posx,b=this.posy;if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");var c;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner){var d;null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=
!1;d.x=a;d.y=b;c.zpp_inner=d;c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(c.zpp_inner.x==a){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");
d=c.zpp_inner;null!=d._validate&&d._validate();d=c.zpp_inner.y==b}else d=!1;d||(c.zpp_inner.x=a,c.zpp_inner.y=b,a=c.zpp_inner,null!=a._invalidate&&a._invalidate(a))}c.zpp_inner.weak=!1;this.wrap_pos=c;this.wrap_pos.zpp_inner._inuse=!0;this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=v(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=v(this,this.pos_validate))},setupVelocity:function(){var a=this.velx,b=this.vely;if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");
var c;null==o.poolVec2?c=new ja:(c=o.poolVec2,o.poolVec2=c.zpp_pool,c.zpp_pool=null,c.zpp_disp=!1,c==o.nextVec2&&(o.nextVec2=null));if(null==c.zpp_inner){var d;null==q.zpp_pool?d=new q:(d=q.zpp_pool,q.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=!1;d.x=a;d.y=b;c.zpp_inner=d;c.zpp_inner.outer=c}else{if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;if(d._immutable)throw new h("Error: Vec2 is immutable");null!=d._isimmutable&&d._isimmutable();
if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();if(c.zpp_inner.x==a){if(null!=c&&c.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");d=c.zpp_inner;null!=d._validate&&d._validate();d=c.zpp_inner.y==b}else d=!1;d||(c.zpp_inner.x=a,c.zpp_inner.y=b,a=c.zpp_inner,null!=a._invalidate&&a._invalidate(a))}c.zpp_inner.weak=!1;this.wrap_vel=
c;this.wrap_vel.zpp_inner._inuse=!0;this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=v(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=v(this,this.vel_validate))},invalidate_mass:function(){this.zip_mass=!0;this.invalidate_gravMass()},validate_mass:function(){if(this.zip_mass){this.zip_mass=!1;if(0==this.massMode){this.cmass=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cmass+=
b.area*b.material.density;a=a.next}}2==this.type&&!this.nomove?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Infinity,this.imass=this.smass=0)}},invalidate_gravMass:function(){1!=this.gravMassMode&&(this.zip_gravMass=!0);2!=this.gravMassMode&&(this.zip_gravMassScale=!0);this.wake()},validate_gravMass:function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),0==this.gravMassMode?(this.validate_mass(),this.gravMass=this.cmass):2==this.gravMassMode&&(this.validate_mass(),
this.gravMass=this.cmass*this.gravMassScale))},invalidate_inertia:function(){this.zip_inertia=!0;this.wake()},validate_inertia:function(){if(this.zip_inertia){this.zip_inertia=!1;if(0==this.inertiaMode){this.cinertia=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cinertia+=b.inertia*b.area*b.material.density;a=a.next}}2==this.type&&!this.norotate?(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia):(this.inertia=
Infinity,this.sinertia=this.iinertia=0)}},validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var a=0,b=0,c=0,d=this.shapes.head;null!=d;){var e=d.elt;if(e.zip_localCOM){e.zip_localCOM=!1;if(1==e.type){var f=e.polygon;if(null==f.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==f.lverts.next.next)f.localCOMx=f.lverts.next.x,f.localCOMy=f.lverts.next.y;else if(null==f.lverts.next.next.next)f.localCOMx=f.lverts.next.x,f.localCOMy=f.lverts.next.y,
f.localCOMx+=1*f.lverts.next.next.x,f.localCOMy+=1*f.lverts.next.next.y,f.localCOMx*=0.5,f.localCOMy*=0.5;else{f.localCOMx=0;for(var g=f.localCOMy=0,j=f.lverts.next,i=j,k=j=j.next,j=j.next;null!=j;){var l=j,g=g+k.x*(l.y-i.y),i=l.y*k.x-l.x*k.y;f.localCOMx+=(k.x+l.x)*i;f.localCOMy+=(k.y+l.y)*i;i=k;k=l;j=j.next}l=j=f.lverts.next;g+=k.x*(l.y-i.y);i=l.y*k.x-l.x*k.y;f.localCOMx+=(k.x+l.x)*i;f.localCOMy+=(k.y+l.y)*i;i=k;k=l;j=j.next;g+=k.x*(j.y-i.y);i=j.y*k.x-j.x*k.y;f.localCOMx+=(k.x+j.x)*i;f.localCOMy+=
(k.y+j.y)*i;g=1/(3*g);f.localCOMx*=g;f.localCOMy*=g}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}e.validate_area_inertia();f=e.area*e.material.density;a+=e.localCOMx*f;b+=e.localCOMy*f;c+=e.area*e.material.density;d=d.next}0!=c&&(d=1/c,this.localCOMx=a*d,this.localCOMy=b*d);null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy);this.zip_mass&&0==this.massMode&&(this.zip_mass=
!1,this.cmass=c,2==this.type?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Infinity,this.imass=this.smass=0))}},validate_worldCOM:function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&
(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},aabb_validate:function(){if(null==this.shapes.head)throw new h("Error: bounds only makes sense when Body has shapes");if(null==this.shapes.head)throw new h("Error: Body bounds only makes sense if it contains shapes");if(this.zip_aabb){this.zip_aabb=!1;this.aabb.minx=Infinity;this.aabb.miny=Infinity;this.aabb.maxx=-Infinity;this.aabb.maxy=-Infinity;for(var a=this.shapes.head;null!=a;){var b=a.elt;if(b.zip_aabb&&
null!=b.body)if(b.zip_aabb=!1,0==b.type){var c=b.circle;if(c.zip_worldCOM&&null!=c.body){c.zip_worldCOM=!1;if(c.zip_localCOM){c.zip_localCOM=!1;if(1==c.type){var d=c.polygon;if(null==d.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==d.lverts.next.next)d.localCOMx=d.lverts.next.x,d.localCOMy=d.lverts.next.y;else if(null==d.lverts.next.next.next)d.localCOMx=d.lverts.next.x,d.localCOMy=d.lverts.next.y,d.localCOMx+=1*d.lverts.next.next.x,d.localCOMy+=1*d.lverts.next.next.y,
d.localCOMx*=0.5,d.localCOMy*=0.5;else{d.localCOMx=0;for(var e=d.localCOMy=0,f=d.lverts.next,g=f,j=f=f.next,f=f.next;null!=f;){var i=f,e=e+j.x*(i.y-g.y),g=i.y*j.x-i.x*j.y;d.localCOMx+=(j.x+i.x)*g;d.localCOMy+=(j.y+i.y)*g;g=j;j=i;f=f.next}i=f=d.lverts.next;e+=j.x*(i.y-g.y);g=i.y*j.x-i.x*j.y;d.localCOMx+=(j.x+i.x)*g;d.localCOMy+=(j.y+i.y)*g;g=j;j=i;f=f.next;e+=j.x*(f.y-g.y);g=f.y*j.x-f.x*j.y;d.localCOMx+=(j.x+f.x)*g;d.localCOMy+=(j.y+f.y)*g;e=1/(3*e);d.localCOMx*=e;d.localCOMy*=e}}null!=c.wrap_localCOM&&
(c.wrap_localCOM.zpp_inner.x=c.localCOMx,c.wrap_localCOM.zpp_inner.y=c.localCOMy)}d=c.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot));c.worldCOMx=c.body.posx+(c.body.axisy*c.localCOMx-c.body.axisx*c.localCOMy);c.worldCOMy=c.body.posy+(c.localCOMx*c.body.axisx+c.localCOMy*c.body.axisy)}e=d=c.radius;c.aabb.minx=c.worldCOMx-d;c.aabb.miny=c.worldCOMy-e;c.aabb.maxx=c.worldCOMx+d;c.aabb.maxy=c.worldCOMy+e}else{c=b.polygon;if(c.zip_gverts&&null!=c.body){c.zip_gverts=!1;c.validate_lverts();
d=c.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot));d=c.lverts.next;for(e=c.gverts.next;null!=e;)j=e,f=d,d=d.next,j.x=c.body.posx+(c.body.axisy*f.x-c.body.axisx*f.y),j.y=c.body.posy+(f.x*c.body.axisx+f.y*c.body.axisy),e=e.next}if(null==c.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");d=c.gverts.next;c.aabb.minx=d.x;c.aabb.miny=d.y;c.aabb.maxx=d.x;c.aabb.maxy=d.y;for(d=c.gverts.next.next;null!=d;)e=d,e.x<c.aabb.minx&&(c.aabb.minx=e.x),e.x>
c.aabb.maxx&&(c.aabb.maxx=e.x),e.y<c.aabb.miny&&(c.aabb.miny=e.y),e.y>c.aabb.maxy&&(c.aabb.maxy=e.y),d=d.next}c=this.aabb;b=b.aabb;b.minx<c.minx&&(c.minx=b.minx);b.maxx>c.maxx&&(c.maxx=b.maxx);b.miny<c.miny&&(c.miny=b.miny);b.maxy>c.maxy&&(c.maxy=b.maxy);a=a.next}}},shapes_adder:function(a){if(a.zpp_inner.body!=this){null!=a.zpp_inner.body&&a.zpp_inner.body.wrap_shapes.remove(a);a.zpp_inner.body=this;a.zpp_inner.addedToBody();if(null!=this.space){var b=this.space,c=a.zpp_inner,d=c.body;d.world||(d.component.waket=
b.stamp+(b.midstep?0:1),3==d.type&&(d.kinematicDelaySleep=!0),d.component.sleeping&&b.really_wake(d,!1));b.bphase.insert(c);c.addedToSpace()}1==a.zpp_inner.type&&(a.zpp_inner.polygon.invalidate_gaxi(),a.zpp_inner.polygon.invalidate_gverts());return!0}return!1},shapes_subber:function(a){null!=this.space&&this.space.removed_shape(a.zpp_inner);a.zpp_inner.body=null;a.zpp_inner.removedFromBody()},shapes_invalidate:function(){this.invalidate_shapes()},shapes_modifiable:function(){this.immutable_midstep("Body::shapes");
if(1==this.type&&null!=this.space)throw new h("Error: Cannot modifiy shapes of static object once added to Space");},addedToSpace:function(){null==Ef.zpp_pool?this.component=new Ef:(this.component=Ef.zpp_pool,Ef.zpp_pool=this.component.next,this.component.next=null);this.component.isBody=!0;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){for(;null!=this.arbiters.head;){var a=this.arbiters.pop_unsafe(),b=this.space;a.cleared=!0;if(a.b2==this)for(var c=a.b1.arbiters,d=null,
e=c.head;null!=e;){if(e.elt==a){var f;null==d?(e=c.head,f=e.next,c.head=f,null==c.head&&(c.pushmod=!0)):(e=d.next,f=e.next,d.next=f,null==f&&(c.pushmod=!0));d=e;d.elt=null;d.next=la.zpp_pool;la.zpp_pool=d;c.modified=!0;c.length--;c.pushmod=!0;break}d=e;e=e.next}if(a.b1==this){c=a.b2.arbiters;d=null;for(e=c.head;null!=e;){if(e.elt==a){null==d?(e=c.head,f=e.next,c.head=f,null==c.head&&(c.pushmod=!0)):(e=d.next,f=e.next,d.next=f,null==f&&(c.pushmod=!0));d=e;d.elt=null;d.next=la.zpp_pool;la.zpp_pool=
d;c.modified=!0;c.length--;c.pushmod=!0;break}d=e;e=e.next}}null!=a.pair&&(a.pair.arb=null,a.pair=null);a.active=!1;b.f_arbiters.modified=!0}a=this.component;a.body=null;a.constraint=null;a.next=Ef.zpp_pool;Ef.zpp_pool=a;this.component=null;this.__iremovedFromSpace()},__class__:hi});var So=function(){this.compound=this.space=null;this.depth=0;this.outer=this.bodies=this.constraints=this.compounds=this.wrap_constraints=null};i["zpp_nape.phys.ZPP_Compound"]=So;So.__name__=["zpp_nape","phys","ZPP_Compound"];
So.__super__=je;So.prototype=z(je.prototype,{__imutable_midstep:function(a){if(null!=this.space&&this.space.midstep)throw new h("Error: "+a+" cannot be set during space step()");},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},__class__:So});var Hp=function(){this.wrap_gravity=null;this.viscosity=this.density=this.gravityx=this.gravityy=0;this.shapes=null};i["zpp_nape.phys.ZPP_FluidProperties"]=Hp;Hp.__name__=["zpp_nape","phys","ZPP_FluidProperties"];
Hp.prototype={__class__:Hp};var Qa=function(){this.dynamicFriction=this.staticFriction=this.density=this.elasticity=this.rollingFriction=0;this.next=this.outer=this.shapes=null;this.shapes=new Mj;this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=0.001;this.rollingFriction=0.01};i["zpp_nape.phys.ZPP_Material"]=Qa;Qa.__name__=["zpp_nape","phys","ZPP_Material"];Qa.prototype={wrapper:function(){if(null==this.outer){this.outer=new Vn;var a=this.outer.zpp_inner;a.outer=null;a.next=
Qa.zpp_pool;Qa.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},set:function(a){this.dynamicFriction=a.dynamicFriction;this.staticFriction=a.staticFriction;this.density=a.density;this.elasticity=a.elasticity;this.rollingFriction=a.rollingFriction},invalidate:function(a){for(var b=this.shapes.head;null!=b;)b.elt.invalidate_material(a),b=b.next},__class__:Qa};var Zh=function(a){this.zip_aabb=!1;this.sweep=this.node=this.pairs=this.aabb=null;this.fluidEnabled=this.sensorEnabled=!1;this.circle=
this.polygon=this.refmaterial=this.material=this.filter=this.fluidProperties=null;this.sweepCoef=0;this.zip_sweepRadius=!1;this.sweepRadius=0;this.wrap_localCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_angDrag=!1;this.inertia=this.angDrag=0;this.zip_area_inertia=!1;this.type=this.area=0;this.outer=this.body=null;je.call(this);this.pairs=new To;this.ishape=this;this.type=a;null==sb.zpp_pool?a=new sb:(a=sb.zpp_pool,sb.zpp_pool=
a.next,a.next=null);a.minx=0;a.miny=0;a.maxx=0;a.maxy=0;this.aabb=a;this.aabb._immutable=!0;this.aabb._validate=v(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.sensorEnabled=this.fluidEnabled=!1;this.body=this.fluidProperties=null;this.refmaterial=new Qa;this.sweepRadius=this.sweepCoef=0};i["zpp_nape.shape.ZPP_Shape"]=Zh;Zh.__name__=["zpp_nape","shape","ZPP_Shape"];Zh.__super__=
je;Zh.prototype=z(je.prototype,{validate_sweepRadius:function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,0==this.type?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},validate_area_inertia:function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,0==this.type?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},validate_angDrag:function(){if(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)this.zip_angDrag=
!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,0==this.type?this.circle.__validate_angDrag():this.polygon.__validate_angDrag()},invalidate_area_inertia:function(){this.zip_area_inertia=!0;if(null!=this.body){var a=this.body;a.zip_localCOM=!0;a.zip_worldCOM=!0;this.body.invalidate_mass();this.body.invalidate_inertia()}},invalidate_angDrag:function(){this.zip_angDrag=!0},invalidate_localCOM:function(){this.zip_localCOM=!0;this.invalidate_area_inertia();0==this.type&&(this.zip_sweepRadius=
!0);this.invalidate_angDrag();this.invalidate_worldCOM();if(null!=this.body){var a=this.body;a.zip_localCOM=!0;a.zip_worldCOM=!0}},invalidate_worldCOM:function(){this.zip_aabb=this.zip_worldCOM=!0;null!=this.body&&(this.body.zip_aabb=!0)},invalidate_material:function(a){0!=(a&Qa.WAKE)&&this.wake();0!=(a&Qa.ARBITERS)&&null!=this.body&&this.body.refreshArbiters();if(0!=(a&Qa.PROPS)&&null!=this.body){var b=this.body;b.zip_localCOM=!0;b.zip_worldCOM=!0;this.body.invalidate_mass();this.body.invalidate_inertia()}0!=
(a&Qa.ANGDRAG)&&this.invalidate_angDrag();this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},aabb_validate:function(){if(null==this.body)throw new h("Error: bounds only makes sense when Shape belongs to a Body");if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){var a=this.circle;if(a.zip_worldCOM&&null!=a.body){a.zip_worldCOM=!1;if(a.zip_localCOM){a.zip_localCOM=!1;if(1==a.type){var b=a.polygon;if(null==b.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");
if(null==b.lverts.next.next)b.localCOMx=b.lverts.next.x,b.localCOMy=b.lverts.next.y;else if(null==b.lverts.next.next.next)b.localCOMx=b.lverts.next.x,b.localCOMy=b.lverts.next.y,b.localCOMx+=1*b.lverts.next.next.x,b.localCOMy+=1*b.lverts.next.next.y,b.localCOMx*=0.5,b.localCOMy*=0.5;else{b.localCOMx=0;for(var c=b.localCOMy=0,d=b.lverts.next,e=d,f=d=d.next,d=d.next;null!=d;){var g=d,c=c+f.x*(g.y-e.y),e=g.y*f.x-g.x*f.y;b.localCOMx+=(f.x+g.x)*e;b.localCOMy+=(f.y+g.y)*e;e=f;f=g;d=d.next}g=d=b.lverts.next;
c+=f.x*(g.y-e.y);e=g.y*f.x-g.x*f.y;b.localCOMx+=(f.x+g.x)*e;b.localCOMy+=(f.y+g.y)*e;e=f;f=g;d=d.next;c+=f.x*(d.y-e.y);e=d.y*f.x-d.x*f.y;b.localCOMx+=(f.x+d.x)*e;b.localCOMy+=(f.y+d.y)*e;c=1/(3*c);b.localCOMx*=c;b.localCOMy*=c}}null!=a.wrap_localCOM&&(a.wrap_localCOM.zpp_inner.x=a.localCOMx,a.wrap_localCOM.zpp_inner.y=a.localCOMy)}b=a.body;b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot));a.worldCOMx=a.body.posx+(a.body.axisy*a.localCOMx-a.body.axisx*a.localCOMy);a.worldCOMy=
a.body.posy+(a.localCOMx*a.body.axisx+a.localCOMy*a.body.axisy)}c=b=a.radius;a.aabb.minx=a.worldCOMx-b;a.aabb.miny=a.worldCOMy-c;a.aabb.maxx=a.worldCOMx+b;a.aabb.maxy=a.worldCOMy+c}else{a=this.polygon;if(a.zip_gverts&&null!=a.body){a.zip_gverts=!1;a.validate_lverts();b=a.body;b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot));b=a.lverts.next;for(c=a.gverts.next;null!=c;)f=c,d=b,b=b.next,f.x=a.body.posx+(a.body.axisy*d.x-a.body.axisx*d.y),f.y=a.body.posy+(d.x*a.body.axisx+
d.y*a.body.axisy),c=c.next}if(null==a.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");b=a.gverts.next;a.aabb.minx=b.x;a.aabb.miny=b.y;a.aabb.maxx=b.x;a.aabb.maxy=b.y;for(b=a.gverts.next.next;null!=b;)c=b,c.x<a.aabb.minx&&(a.aabb.minx=c.x),c.x>a.aabb.maxx&&(a.aabb.maxx=c.x),c.y<a.aabb.miny&&(a.aabb.miny=c.y),c.y>a.aabb.maxy&&(a.aabb.maxy=c.y),b=b.next}},setMaterial:function(a){this.material!=a&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),
this.material=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},setFilter:function(a){this.filter!=a&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake())},__immutable_midstep:function(a){if(null!=this.body&&null!=this.body.space&&this.body.space.midstep)throw new h("Error: "+a+" cannot be set during a space step()");
},addedToBody:function(){this.invalidate_worldCOM();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0)},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace();this.material.shapes.add(this);this.filter.shapes.add(this);null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},removedFromSpace:function(){this.__iremovedFromSpace();this.material.shapes.remove(this);this.filter.shapes.remove(this);null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this)},
__class__:Zh});var El=function(){this.radius=0;this.outer_zn=null;Zh.call(this,0);this.circle=this;this.zip_localCOM=!1};i["zpp_nape.shape.ZPP_Circle"]=El;El.__name__=["zpp_nape","shape","ZPP_Circle"];El.__super__=Zh;El.prototype=z(Zh.prototype,{invalidate_radius:function(){this.invalidate_area_inertia();this.invalidate_angDrag();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);null!=this.body&&this.body.wake()},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+
this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var a=this.radius*this.radius;this.area=a*Math.PI;this.inertia=0.5*a+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var a=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,b=this.radius*this.radius;this.angDrag=(a+2*b)*this.material.dynamicFriction*u.fluidAngularDragFriction+0.5*u.fluidAngularDrag*(1+u.fluidVacuumDrag)*a;this.angDrag/=
2*(a+0.5*b)},__transform:function(a){var b=a.zpp_inner.a*a.zpp_inner.d-a.zpp_inner.b*a.zpp_inner.c;0>b&&(b=-b);this.radius*=Math.sqrt(b);b=a.zpp_inner.a*this.localCOMx+a.zpp_inner.b*this.localCOMy+a.zpp_inner.tx;this.localCOMy=a.zpp_inner.c*this.localCOMx+a.zpp_inner.d*this.localCOMy+a.zpp_inner.ty;this.localCOMx=b;this.invalidate_radius();this.invalidate_localCOM()},__class__:El});var zd=function(){this.tp0=this.tp1=0;this.lp0=this.gp0=this.lp1=this.gp1=null;this.length=this.lprojection=this.gprojection=
0;this.wrap_gnorm=null;this.gnormx=this.gnormy=0;this.wrap_lnorm=null;this.lnormx=this.lnormy=0;this.next=this.polygon=this.outer=null;this.gprojection=this.lprojection=this.length=this.gnormy=this.gnormx=this.lnormy=this.lnormx=0};i["zpp_nape.shape.ZPP_Edge"]=zd;zd.__name__=["zpp_nape","shape","ZPP_Edge"];zd.prototype={wrapper:function(){null==this.outer&&(zd.internal=!0,this.outer=new Wn,zd.internal=!1,this.outer.zpp_inner=this);return this.outer},__class__:zd};var Fl=function(){this.reverse_flag=
this.zip_lverts=this.zip_laxi=this.zip_gverts=this.zip_gaxi=this.zip_valid=this.zip_sanitation=!1;this.edgeCnt=0;this.outer_zn=this.lverts=this.wrap_lverts=this.gverts=this.wrap_gverts=this.edges=this.wrap_edges=null;Zh.call(this,1);this.polygon=this;this.lverts=new q;this.gverts=new q;this.edges=new Uo;this.edgeCnt=0};i["zpp_nape.shape.ZPP_Polygon"]=Fl;Fl.__name__=["zpp_nape","shape","ZPP_Polygon"];Fl.__super__=Zh;Fl.prototype=z(Zh.prototype,{lverts_pa_invalidate:function(){this.invalidate_lverts()},
lverts_pa_immutable:function(){if(null!=this.body&&1==this.body.type&&null!=this.body.space)throw new h("Error: Cannot modify local vertex of Polygon added to a static body whilst within a Space");},gverts_pa_validate:function(){if(null==this.body)throw new h("Error: World vertex only makes sense when Polygon is contained in a rigid body");if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1;this.validate_lverts();var a=this.body;a.zip_axis&&(a.zip_axis=!1,a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot));
for(var a=this.lverts.next,b=this.gverts.next;null!=b;){var c=b,d=a,a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);b=b.next}}},lverts_post_adder:function(a){a.zpp_inner._invalidate=v(this,this.lverts_pa_invalidate);a.zpp_inner._isimmutable=v(this,this.lverts_pa_immutable);for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a.zpp_inner);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;d=d.next}null==
q.zpp_pool?a=new q:(a=q.zpp_pool,q.zpp_pool=a.next,a.next=null);a.weak=!1;a._immutable=!0;a.x=0;a.y=0;this.gverts.insert(b,a);null!=this.lverts.next.next&&(null==this.lverts.next.next.next?(null==zd.zpp_pool?c=new zd:(c=zd.zpp_pool,zd.zpp_pool=c.next,c.next=null),c.polygon=this,this.edges.add(c),null==zd.zpp_pool?c=new zd:(c=zd.zpp_pool,zd.zpp_pool=c.next,c.next=null),c.polygon=this,this.edges.add(c),this.edgeCnt+=2):(null==zd.zpp_pool?b=new zd:(b=zd.zpp_pool,zd.zpp_pool=b.next,b.next=null),b.polygon=
this,this.edges.insert(c,b),this.edgeCnt++));a._validate=v(this,this.gverts_pa_validate)},lverts_subber:function(a){this.cleanup_lvert(a.zpp_inner)},lverts_invalidate:function(){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},lverts_modifiable:function(){this.immutable_midstep("Polygon::localVerts");if(null!=this.body&&1==this.body.type&&null!=this.body.space)throw new h("Error: Cannot modifiy shapes of static object once added to Space");},getlverts:function(){this.wrap_lverts=
Qj.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=v(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=v(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=v(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=v(this,this.lverts_validate);this.wrap_lverts.zpp_inner._modifiable=v(this,this.lverts_modifiable);this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();
this.invalidate_localCOM();this.invalidate_gverts();this.zip_sanitation=this.zip_valid=this.zip_lverts=!0;null!=this.body&&this.body.wake()},invalidate_laxi:function(){this.invalidate_gaxi();this.zip_laxi=this.zip_sweepRadius=!0},invalidate_gverts:function(){this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);this.zip_gverts=!0},invalidate_gaxi:function(){this.zip_gaxi=!0},valid:function(){if(this.zip_valid){this.zip_valid=!1;this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real());
if(3>this.lverts.length)return null==l.ValidationResult_DEGENERATE&&(l.internal=!0,l.ValidationResult_DEGENERATE=new ag,l.internal=!1),this.validation=l.ValidationResult_DEGENERATE;this.validate_lverts();this.validate_area_inertia();if(this.area<u.epsilon)return null==l.ValidationResult_DEGENERATE&&(l.internal=!0,l.ValidationResult_DEGENERATE=new ag,l.internal=!1),this.validation=l.ValidationResult_DEGENERATE;for(var a=!1,b=!1,c=!0,d=this.lverts.next,e=d,f=d=d.next,d=d.next;null!=d;){var g=d,j=0,
h=0,j=g.x-f.x,h=g.y-f.y,i=0,k=0,i=f.x-e.x,k=f.y-e.y,j=k*j-i*h;j>u.epsilon?b=!0:j<-u.epsilon&&(a=!0);if(b&&a){c=!1;break}e=f;f=g;d=d.next}if(c){for(g=d=this.lverts.next;;){h=j=0;j=g.x-f.x;h=g.y-f.y;k=i=0;i=f.x-e.x;k=f.y-e.y;e=k*j-i*h;e>u.epsilon?b=!0:e<-u.epsilon&&(a=!0);if(b&&a){c=!1;break}break}if(c){e=f;f=g;for(g=d=d.next;;){d=c=0;c=g.x-f.x;d=g.y-f.y;j=g=0;g=f.x-e.x;j=f.y-e.y;f=j*c-g*d;f>u.epsilon?b=!0:f<-u.epsilon&&(a=!0);if(b&&a)break;break}}}if(b&&a)return null==l.ValidationResult_CONCAVE&&(l.internal=
!0,l.ValidationResult_CONCAVE=new ag,l.internal=!1),this.validation=l.ValidationResult_CONCAVE;f=a=!0;b=e=this.lverts.next;for(e=e.next;null!=e;){c=e;if(!a){f=!1;break}g=!0;d=j=this.lverts.next;for(j=j.next;null!=j;){h=j;if(!(b==d||b==h||c==d||c==h)){var k=i=0,i=b.x-d.x,k=b.y-d.y,m=0,n=0,m=c.x-b.x,n=c.y-b.y,o=0,r=0,o=h.x-d.x,r=h.y-d.y,q=n*o-m*r;if(q*q>u.epsilon&&(q=1/q,o=(r*i-o*k)*q,o>u.epsilon&&o<1-u.epsilon&&(i=(n*i-m*k)*q,i>u.epsilon&&i<1-u.epsilon))){g=a=!1;break}}d=h;j=j.next}if(g)for(;;){k=
this.lverts.next;if(b==d||b==k||c==d||c==k)break;j=g=0;g=b.x-d.x;j=b.y-d.y;i=h=0;h=c.x-b.x;i=c.y-b.y;m=b=0;b=k.x-d.x;m=k.y-d.y;d=i*b-h*m;if(d*d>u.epsilon&&(d=1/d,b=(m*g-b*j)*d,b>u.epsilon&&b<1-u.epsilon&&(b=(i*g-h*j)*d,b>u.epsilon&&b<1-u.epsilon))){a=!1;break}break}b=c;e=e.next}if(f)for(;;){e=this.lverts.next;if(!a)break;c=!0;f=d=this.lverts.next;for(d=d.next;null!=d;){g=d;if(!(b==f||b==g||e==f||e==g))if(h=j=0,j=b.x-f.x,h=b.y-f.y,k=i=0,i=e.x-b.x,k=e.y-b.y,q=n=0,n=g.x-f.x,q=g.y-f.y,m=k*n-i*q,m*m>u.epsilon&&
(m=1/m,n=(q*j-n*h)*m,n>u.epsilon&&n<1-u.epsilon&&(j=(k*j-i*h)*m,j>u.epsilon&&j<1-u.epsilon))){c=a=!1;break}f=g;d=d.next}if(c)for(;;){h=this.lverts.next;if(b==f||b==h||e==f||e==h)break;d=c=0;c=b.x-f.x;d=b.y-f.y;j=g=0;g=e.x-b.x;j=e.y-b.y;e=b=0;b=h.x-f.x;e=h.y-f.y;f=j*b-g*e;if(f*f>u.epsilon&&(f=1/f,b=(e*c-b*d)*f,b>u.epsilon&&b<1-u.epsilon&&(b=(j*c-g*d)*f,b>u.epsilon&&b<1-u.epsilon))){a=!1;break}break}break}if(a)return null==l.ValidationResult_VALID&&(l.internal=!0,l.ValidationResult_VALID=new ag,l.internal=
!1),this.validation=l.ValidationResult_VALID;null==l.ValidationResult_SELF_INTERSECTING&&(l.internal=!0,l.ValidationResult_SELF_INTERSECTING=new ag,l.internal=!1);return this.validation=l.ValidationResult_SELF_INTERSECTING}return this.validation},validate_lverts:function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),0>this.area&&(this.reverse_vertices(),this.area=-this.area)))},cleanup_lvert:function(a){for(var b=null,c=null,d=this.lverts.next;null!=d&&
!(d==a);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;d=d.next}a=null==b?this.gverts.next:b.next;this.gverts.erase(b);null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=q.zpp_pool;q.zpp_pool=a;2==this.edgeCnt?(c=this.edges.pop_unsafe(),c.polygon=null,c.next=zd.zpp_pool,zd.zpp_pool=c,c=this.edges.pop_unsafe(),c.polygon=null,c.next=zd.zpp_pool,zd.zpp_pool=c,this.edgeCnt=0):0!=this.edgeCnt&&(b=null==c?this.edges.head.elt:
c.next.elt,this.edges.erase(c),b.polygon=null,b.next=zd.zpp_pool,zd.zpp_pool=b,this.edgeCnt--)},splice_collinear_real:function(){if(!(null==this.lverts.next||null==this.lverts.next.next)&&null!=this.lverts.next.next.next){for(var a=null,b=this.lverts.next;null!=b;){var c=b,d=null==b.next?this.lverts.next:b.next,e=0,f=0,e=c.x-d.x,f=c.y-d.y;e*e+f*f<u.epsilon*u.epsilon?(this.cleanup_lvert(b),b=this.lverts.erase(a)):(a=b,b=b.next)}if(null!=this.lverts.next)for(;;){a=!1;for(b=this.lverts.next;null!=b;){var c=
null==b.next?this.lverts.next:b.next,g=b,d=c,e=null==c.next?this.lverts.next:c.next,j=f=0,f=d.x-g.x,j=d.y-g.y,h=g=0,g=e.x-d.x,h=e.y-d.y,d=h*f-g*j;d*d>=u.epsilon*u.epsilon||(this.cleanup_lvert(c),this.lverts.erase(null==b.next?null:b),a=!0);b=b.next}if(!a)break}}},reverse_vertices:function(){this.lverts.reverse();this.gverts.reverse();this.edges.reverse();var a=this.edges.iterator_at(this.edgeCnt-1),b=this.edges.pop_unsafe();this.edges.insert(a,b);this.reverse_flag=!this.reverse_flag;null!=this.wrap_lverts&&
(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=!1;this.validate_lverts();for(var a=this.edges.head,b=this.lverts.next,c=b,b=b.next;null!=b;){var d=b,e=a.elt,a=a.next;e.lp0=c;e.lp1=d;var f=0,g=0,f=c.x-d.x,g=c.y-d.y,j=Math.sqrt(f*f+g*g);e.length=j;j=1/j;f*=j;g*=j;j=
f;f=-g;g=j;e.lprojection=f*c.x+g*c.y;e.lnormx=f;e.lnormy=g;null!=e.wrap_lnorm&&(e.wrap_lnorm.zpp_inner.x=f,e.wrap_lnorm.zpp_inner.y=g);c=d;b=b.next}e=this.lverts.next;a=a.elt;a.lp0=c;a.lp1=e;d=b=0;b=c.x-e.x;d=c.y-e.y;e=Math.sqrt(b*b+d*d);a.length=e;e=1/e;f=b*e;b=-(d*e);d=f;a.lprojection=b*c.x+d*c.y;a.lnormx=b;a.lnormy=d;null!=a.wrap_lnorm&&(a.wrap_lnorm.zpp_inner.x=b,a.wrap_lnorm.zpp_inner.y=d)}},__validate_sweepRadius:function(){var a=0,b=0;this.validate_laxi();for(var c=this.lverts.next;null!=c;){var d=
c,d=d.x*d.x+d.y*d.y;d>a&&(a=d);c=c.next}for(c=this.edges.head;null!=c;){d=c.elt;if(d.lprojection<b&&(b=d.lprojection,0>b))break;c=c.next}0>b&&(b=0);this.sweepRadius=Math.sqrt(a);this.sweepCoef=this.sweepRadius-b},__validate_area_inertia:function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.inertia=this.area=0;else{for(var a=this.area=0,b=0,c=this.lverts.next,d=c,e=c=c.next,c=c.next;null!=c;){var f=c,g=e.y*d.x-e.x*d.y,a=a+g*(e.x*e.x+e.y*e.y+(e.x*d.x+
e.y*d.y)+(d.x*d.x+d.y*d.y)),b=b+g;this.area+=e.x*(f.y-d.y);d=e;e=f;c=c.next}g=c=this.lverts.next;f=e.y*d.x-e.x*d.y;a+=f*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=e.x*(g.y-d.y);d=e;e=g;c=c.next;g=e.y*d.x-e.x*d.y;a+=g*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=e.x*(c.y-d.y);this.inertia=a/(6*(b+f+g));this.area*=0.5;0>this.area&&(this.area=-this.area,this.reverse_vertices())}},__validate_angDrag:function(){if(3>this.lverts.length)throw new h("Error: Polygon's with less than 3 vertices have no meaningful angDrag");
this.validate_area_inertia();this.validate_laxi();for(var a=0,b=this.edges.head,c=0,d=this.lverts.next,e=d,d=d.next;null!=d;){var f=d,g=b.elt,b=b.next,c=c+g.length,j=0,i=0,j=f.x-e.x,i=f.y-e.y,a=a+g.length*u.fluidAngularDragFriction*this.material.dynamicFriction*g.lprojection*g.lprojection,k=-(e.y*g.lnormx-e.x*g.lnormy)/(i*g.lnormx-j*g.lnormy);if(0<k)var l=1<k?1:k,m=0,n=0,m=e.x,n=e.y,o=l,m=m+j*o,n=n+i*o,o=g.lnormy*e.x-g.lnormx*e.y,m=g.lnormy*m-g.lnormx*n,a=a+(m*m*m-o*o*o)/(3*(m-o))*l*g.length*u.fluidAngularDrag;
1>k&&(k=0>k?0:k,m=l=0,l=e.x,m=e.y,e=k,l+=j*e,m+=i*e,e=g.lnormy*l-g.lnormx*m,j=g.lnormy*f.x-g.lnormx*f.y,a+=(j*j*j-e*e*e)/(3*(j-e))*u.fluidVacuumDrag*(1-k)*g.length*u.fluidAngularDrag);e=f;d=d.next}for(;;){d=this.lverts.next;b=b.elt;c+=b.length;g=f=0;f=d.x-e.x;g=d.y-e.y;a+=b.length*u.fluidAngularDragFriction*this.material.dynamicFriction*b.lprojection*b.lprojection;j=-(e.y*b.lnormx-e.x*b.lnormy)/(g*b.lnormx-f*b.lnormy);0<j&&(i=1<j?1:j,l=k=0,k=e.x,l=e.y,m=i,k+=f*m,l+=g*m,m=b.lnormy*e.x-b.lnormx*e.y,
k=b.lnormy*k-b.lnormx*l,a+=(k*k*k-m*m*m)/(3*(k-m))*i*b.length*u.fluidAngularDrag);1>j&&(j=0>j?0:j,k=i=0,i=e.x,k=e.y,e=j,i+=f*e,k+=g*e,e=b.lnormy*i-b.lnormx*k,d=b.lnormy*d.x-b.lnormx*d.y,a+=(d*d*d-e*e*e)/(3*(d-e))*u.fluidVacuumDrag*(1-j)*b.length*u.fluidAngularDrag);break}this.angDrag=a/(this.inertia*c)},__transform:function(a){for(var b=this.lverts.next;null!=b;){var c=b,d=a.zpp_inner.a*c.x+a.zpp_inner.b*c.y+a.zpp_inner.tx;c.y=a.zpp_inner.c*c.x+a.zpp_inner.d*c.y+a.zpp_inner.ty;c.x=d;b=b.next}this.invalidate_lverts()},
__class__:Fl});var si=function(){this.sweep=this.dynab=this.aabbShape=this.matrix=this.circShape=null;this.is_sweep=!1;this.space=null};i["zpp_nape.space.ZPP_Broadphase"]=si;si.__name__=["zpp_nape","space","ZPP_Broadphase"];si.prototype={insert:function(a){this.is_sweep?this.sweep.__insert(a):this.dynab.__insert(a)},remove:function(a){this.is_sweep?this.sweep.__remove(a):this.dynab.__remove(a)},sync:function(a){if(this.is_sweep){if(!this.sweep.space.continuous&&a.zip_aabb&&null!=a.body)if(a.zip_aabb=
!1,0==a.type){var b=a.circle;if(b.zip_worldCOM&&null!=b.body){b.zip_worldCOM=!1;if(b.zip_localCOM){b.zip_localCOM=!1;if(1==b.type){var c=b.polygon;if(null==c.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==c.lverts.next.next)c.localCOMx=c.lverts.next.x,c.localCOMy=c.lverts.next.y;else if(null==c.lverts.next.next.next)c.localCOMx=c.lverts.next.x,c.localCOMy=c.lverts.next.y,c.localCOMx+=1*c.lverts.next.next.x,c.localCOMy+=1*c.lverts.next.next.y,c.localCOMx*=0.5,
c.localCOMy*=0.5;else{c.localCOMx=0;for(var a=c.localCOMy=0,d=c.lverts.next,e=d,f=d=d.next,d=d.next;null!=d;){var g=d,a=a+f.x*(g.y-e.y),e=g.y*f.x-g.x*f.y;c.localCOMx+=(f.x+g.x)*e;c.localCOMy+=(f.y+g.y)*e;e=f;f=g;d=d.next}g=d=c.lverts.next;a+=f.x*(g.y-e.y);e=g.y*f.x-g.x*f.y;c.localCOMx+=(f.x+g.x)*e;c.localCOMy+=(f.y+g.y)*e;e=f;f=g;d=d.next;a+=f.x*(d.y-e.y);e=d.y*f.x-d.x*f.y;c.localCOMx+=(f.x+d.x)*e;c.localCOMy+=(f.y+d.y)*e;a=1/(3*a);c.localCOMx*=a;c.localCOMy*=a}}null!=b.wrap_localCOM&&(b.wrap_localCOM.zpp_inner.x=
b.localCOMx,b.wrap_localCOM.zpp_inner.y=b.localCOMy)}c=b.body;c.zip_axis&&(c.zip_axis=!1,c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot));b.worldCOMx=b.body.posx+(b.body.axisy*b.localCOMx-b.body.axisx*b.localCOMy);b.worldCOMy=b.body.posy+(b.localCOMx*b.body.axisx+b.localCOMy*b.body.axisy)}a=c=b.radius;b.aabb.minx=b.worldCOMx-c;b.aabb.miny=b.worldCOMy-a;b.aabb.maxx=b.worldCOMx+c;b.aabb.maxy=b.worldCOMy+a}else{b=a.polygon;if(b.zip_gverts&&null!=b.body){b.zip_gverts=!1;b.validate_lverts();c=b.body;c.zip_axis&&
(c.zip_axis=!1,c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot));c=b.lverts.next;for(a=b.gverts.next;null!=a;)f=a,d=c,c=c.next,f.x=b.body.posx+(b.body.axisy*d.x-b.body.axisx*d.y),f.y=b.body.posy+(d.x*b.body.axisx+d.y*b.body.axisy),a=a.next}if(null==b.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");c=b.gverts.next;b.aabb.minx=c.x;b.aabb.miny=c.y;b.aabb.maxx=c.x;b.aabb.maxy=c.y;for(c=b.gverts.next.next;null!=c;)a=c,a.x<b.aabb.minx&&(b.aabb.minx=a.x),a.x>b.aabb.maxx&&(b.aabb.maxx=
a.x),a.y<b.aabb.miny&&(b.aabb.miny=a.y),a.y>b.aabb.maxy&&(b.aabb.maxy=a.y),c=c.next}}else if(b=this.dynab,c=a.node,!c.synced){if(!b.space.continuous&&a.zip_aabb&&null!=a.body)if(a.zip_aabb=!1,0==a.type){f=a.circle;if(f.zip_worldCOM&&null!=f.body){f.zip_worldCOM=!1;if(f.zip_localCOM){f.zip_localCOM=!1;if(1==f.type){d=f.polygon;if(null==d.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==d.lverts.next.next)d.localCOMx=d.lverts.next.x,d.localCOMy=d.lverts.next.y;
else if(null==d.lverts.next.next.next)d.localCOMx=d.lverts.next.x,d.localCOMy=d.lverts.next.y,d.localCOMx+=1*d.lverts.next.next.x,d.localCOMy+=1*d.lverts.next.next.y,d.localCOMx*=0.5,d.localCOMy*=0.5;else{d.localCOMx=0;for(var e=d.localCOMy=0,j=d.lverts.next,i=j,g=j=j.next,j=j.next;null!=j;){var k=j,e=e+g.x*(k.y-i.y),i=k.y*g.x-k.x*g.y;d.localCOMx+=(g.x+k.x)*i;d.localCOMy+=(g.y+k.y)*i;i=g;g=k;j=j.next}k=j=d.lverts.next;e+=g.x*(k.y-i.y);i=k.y*g.x-k.x*g.y;d.localCOMx+=(g.x+k.x)*i;d.localCOMy+=(g.y+k.y)*
i;i=g;g=k;j=j.next;e+=g.x*(j.y-i.y);i=j.y*g.x-j.x*g.y;d.localCOMx+=(g.x+j.x)*i;d.localCOMy+=(g.y+j.y)*i;e=1/(3*e);d.localCOMx*=e;d.localCOMy*=e}}null!=f.wrap_localCOM&&(f.wrap_localCOM.zpp_inner.x=f.localCOMx,f.wrap_localCOM.zpp_inner.y=f.localCOMy)}d=f.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot));f.worldCOMx=f.body.posx+(f.body.axisy*f.localCOMx-f.body.axisx*f.localCOMy);f.worldCOMy=f.body.posy+(f.localCOMx*f.body.axisx+f.localCOMy*f.body.axisy)}e=d=f.radius;f.aabb.minx=
f.worldCOMx-d;f.aabb.miny=f.worldCOMy-e;f.aabb.maxx=f.worldCOMx+d;f.aabb.maxy=f.worldCOMy+e}else{f=a.polygon;if(f.zip_gverts&&null!=f.body){f.zip_gverts=!1;f.validate_lverts();d=f.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot));d=f.lverts.next;for(e=f.gverts.next;null!=e;)g=e,j=d,d=d.next,g.x=f.body.posx+(f.body.axisy*j.x-f.body.axisx*j.y),g.y=f.body.posy+(j.x*f.body.axisx+j.y*f.body.axisy),e=e.next}if(null==f.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");
d=f.gverts.next;f.aabb.minx=d.x;f.aabb.miny=d.y;f.aabb.maxx=d.x;f.aabb.maxy=d.y;for(d=f.gverts.next.next;null!=d;)e=d,e.x<f.aabb.minx&&(f.aabb.minx=e.x),e.x>f.aabb.maxx&&(f.aabb.maxx=e.x),e.y<f.aabb.miny&&(f.aabb.miny=e.y),e.y>f.aabb.maxy&&(f.aabb.maxy=e.y),d=d.next}c.dyn==(1==a.body.type?!1:!a.body.component.sleeping)?(f=c.aabb,a=a.aabb,a=!(a.minx>=f.minx&&a.miny>=f.miny&&a.maxx<=f.maxx&&a.maxy<=f.maxy)):a=!0;a&&(c.synced=!0,c.snext=b.syncs,b.syncs=c)}},broadphase:function(){},updateAABBShape:function(a){if(null==
this.aabbShape){null==l.BodyType_STATIC&&(l.internal=!0,l.BodyType_STATIC=new qd,l.internal=!1);var b=(new tf(l.BodyType_STATIC)).zpp_inner.wrap_shapes,a=this.aabbShape=new Rb(Rb.rect(a.minx,a.miny,a.maxx-a.minx,a.maxy-a.miny));b.zpp_inner.reverse_flag?b.push(a):b.unshift(a)}else{var b=this.aabbShape.zpp_inner.aabb,c=(a.maxx-a.minx)/(b.maxx-b.minx),d=(a.maxy-a.miny)/(b.maxy-b.miny);null==this.matrix&&(this.matrix=new Bl);var e=this.matrix;if(c!=c)throw new h("Error: Mat23::a cannot be NaN");e.zpp_inner.a=
c;e=e.zpp_inner;null!=e._invalidate&&e._invalidate();var f=e=this.matrix;f.zpp_inner.c=0;var g=f.zpp_inner;null!=g._invalidate&&g._invalidate();f=f.zpp_inner.c;if(f!=f)throw new h("Error: Mat23::b cannot be NaN");e.zpp_inner.b=f;e=e.zpp_inner;null!=e._invalidate&&e._invalidate();e=this.matrix;if(d!=d)throw new h("Error: Mat23::d cannot be NaN");e.zpp_inner.d=d;e=e.zpp_inner;null!=e._invalidate&&e._invalidate();e=this.matrix;c=a.minx-c*b.minx;if(c!=c)throw new h("Error: Mat23::tx cannot be NaN");e.zpp_inner.tx=
c;c=e.zpp_inner;null!=c._invalidate&&c._invalidate();c=this.matrix;a=a.miny-d*b.miny;if(a!=a)throw new h("Error: Mat23::ty cannot be NaN");c.zpp_inner.ty=a;a=c.zpp_inner;null!=a._invalidate&&a._invalidate();this.aabbShape.transform(this.matrix)}a=this.aabbShape.zpp_inner;if(a.zip_aabb&&null!=a.body)if(a.zip_aabb=!1,0==a.type){a=a.circle;if(a.zip_worldCOM&&null!=a.body){a.zip_worldCOM=!1;if(a.zip_localCOM){a.zip_localCOM=!1;if(1==a.type){b=a.polygon;if(null==b.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");
if(null==b.lverts.next.next)b.localCOMx=b.lverts.next.x,b.localCOMy=b.lverts.next.y;else if(null==b.lverts.next.next.next)b.localCOMx=b.lverts.next.x,b.localCOMy=b.lverts.next.y,b.localCOMx+=1*b.lverts.next.next.x,b.localCOMy+=1*b.lverts.next.next.y,b.localCOMx*=0.5,b.localCOMy*=0.5;else{b.localCOMx=0;d=b.localCOMy=0;f=e=b.lverts.next;c=e=e.next;for(e=e.next;null!=e;)g=e,d+=c.x*(g.y-f.y),f=g.y*c.x-g.x*c.y,b.localCOMx+=(c.x+g.x)*f,b.localCOMy+=(c.y+g.y)*f,f=c,c=g,e=e.next;g=e=b.lverts.next;d+=c.x*
(g.y-f.y);f=g.y*c.x-g.x*c.y;b.localCOMx+=(c.x+g.x)*f;b.localCOMy+=(c.y+g.y)*f;f=c;c=g;e=e.next;d+=c.x*(e.y-f.y);f=e.y*c.x-e.x*c.y;b.localCOMx+=(c.x+e.x)*f;b.localCOMy+=(c.y+e.y)*f;d=1/(3*d);b.localCOMx*=d;b.localCOMy*=d}}null!=a.wrap_localCOM&&(a.wrap_localCOM.zpp_inner.x=a.localCOMx,a.wrap_localCOM.zpp_inner.y=a.localCOMy)}b=a.body;b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot));a.worldCOMx=a.body.posx+(a.body.axisy*a.localCOMx-a.body.axisx*a.localCOMy);a.worldCOMy=a.body.posy+
(a.localCOMx*a.body.axisx+a.localCOMy*a.body.axisy)}d=b=a.radius;a.aabb.minx=a.worldCOMx-b;a.aabb.miny=a.worldCOMy-d;a.aabb.maxx=a.worldCOMx+b;a.aabb.maxy=a.worldCOMy+d}else{a=a.polygon;if(a.zip_gverts&&null!=a.body){a.zip_gverts=!1;a.validate_lverts();b=a.body;b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot));b=a.lverts.next;for(d=a.gverts.next;null!=d;)c=d,e=b,b=b.next,c.x=a.body.posx+(a.body.axisy*e.x-a.body.axisx*e.y),c.y=a.body.posy+(e.x*a.body.axisx+e.y*a.body.axisy),
d=d.next}if(null==a.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");b=a.gverts.next;a.aabb.minx=b.x;a.aabb.miny=b.y;a.aabb.maxx=b.x;a.aabb.maxy=b.y;for(b=a.gverts.next.next;null!=b;)d=b,d.x<a.aabb.minx&&(a.aabb.minx=d.x),d.x>a.aabb.maxx&&(a.aabb.maxx=d.x),d.y<a.aabb.miny&&(a.aabb.miny=d.y),d.y>a.aabb.maxy&&(a.aabb.maxy=d.y),b=b.next}a=this.aabbShape.zpp_inner.polygon;if(a.zip_gaxi&&null!=a.body){a.zip_gaxi=!1;a.validate_laxi();b=a.body;b.zip_axis&&(b.zip_axis=!1,b.axisx=
Math.sin(b.rot),b.axisy=Math.cos(b.rot));if(a.zip_gverts&&null!=a.body){a.zip_gverts=!1;a.validate_lverts();b=a.body;b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot));b=a.lverts.next;for(d=a.gverts.next;null!=d;)c=d,e=b,b=b.next,c.x=a.body.posx+(a.body.axisy*e.x-a.body.axisx*e.y),c.y=a.body.posy+(e.x*a.body.axisx+e.y*a.body.axisy),d=d.next}d=a.edges.head;b=c=a.gverts.next;for(c=c.next;null!=c;)e=c,f=d.elt,d=d.next,f.gp0=b,f.gp1=e,f.gnormx=a.body.axisy*f.lnormx-a.body.axisx*
f.lnormy,f.gnormy=f.lnormx*a.body.axisx+f.lnormy*a.body.axisy,f.gprojection=a.body.posx*f.gnormx+a.body.posy*f.gnormy+f.lprojection,null!=f.wrap_gnorm&&(f.wrap_gnorm.zpp_inner.x=f.gnormx,f.wrap_gnorm.zpp_inner.y=f.gnormy),f.tp0=f.gp0.y*f.gnormx-f.gp0.x*f.gnormy,f.tp1=f.gp1.y*f.gnormx-f.gp1.x*f.gnormy,b=e,c=c.next;c=a.gverts.next;d=d.elt;d.gp0=b;d.gp1=c;d.gnormx=a.body.axisy*d.lnormx-a.body.axisx*d.lnormy;d.gnormy=d.lnormx*a.body.axisx+d.lnormy*a.body.axisy;d.gprojection=a.body.posx*d.gnormx+a.body.posy*
d.gnormy+d.lprojection;null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy);d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy;d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}},bodiesInAABB:function(){return null},updateCircShape:function(a,b,c){if(null==this.circShape){null==l.BodyType_STATIC&&(l.internal=!0,l.BodyType_STATIC=new qd,l.internal=!1);var d=(new tf(l.BodyType_STATIC)).zpp_inner.wrap_shapes;if(a!=a||b!=b)throw new h("Error: Vec2 components cannot be NaN");var e;null==
o.poolVec2?e=new ja:(e=o.poolVec2,o.poolVec2=e.zpp_pool,e.zpp_pool=null,e.zpp_disp=!1,e==o.nextVec2&&(o.nextVec2=null));if(null==e.zpp_inner){var f;null==q.zpp_pool?f=new q:(f=q.zpp_pool,q.zpp_pool=f.next,f.next=null);f.weak=!1;f._immutable=!1;f.x=a;f.y=b;e.zpp_inner=f;e.zpp_inner.outer=e}else{if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=e.zpp_inner;if(f._immutable)throw new h("Error: Vec2 is immutable");null!=f._isimmutable&&f._isimmutable();if(a!=a||
b!=b)throw new h("Error: Vec2 components cannot be NaN");if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=e.zpp_inner;null!=f._validate&&f._validate();if(e.zpp_inner.x==a){if(null!=e&&e.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");f=e.zpp_inner;null!=f._validate&&f._validate();f=e.zpp_inner.y==b}else f=!1;f||(e.zpp_inner.x=a,e.zpp_inner.y=b,b=e.zpp_inner,null!=b._invalidate&&b._invalidate(b))}e.zpp_inner.weak=!1;b=this.circShape=
new pj(c,e);d.zpp_inner.reverse_flag?d.push(b):d.unshift(b)}else{d=this.circShape.zpp_inner.circle;c/=d.radius;null==this.matrix&&(this.matrix=new Bl);f=e=this.matrix;if(c!=c)throw new h("Error: Mat23::d cannot be NaN");f.zpp_inner.d=c;var g=f.zpp_inner;null!=g._invalidate&&g._invalidate();f=f.zpp_inner.d;if(f!=f)throw new h("Error: Mat23::a cannot be NaN");e.zpp_inner.a=f;e=e.zpp_inner;null!=e._invalidate&&e._invalidate();f=e=this.matrix;f.zpp_inner.c=0;g=f.zpp_inner;null!=g._invalidate&&g._invalidate();
f=f.zpp_inner.c;if(f!=f)throw new h("Error: Mat23::b cannot be NaN");e.zpp_inner.b=f;e=e.zpp_inner;null!=e._invalidate&&e._invalidate();e=this.matrix;a-=c*d.localCOMx;if(a!=a)throw new h("Error: Mat23::tx cannot be NaN");e.zpp_inner.tx=a;a=e.zpp_inner;null!=a._invalidate&&a._invalidate();a=this.matrix;b-=c*d.localCOMy;if(b!=b)throw new h("Error: Mat23::ty cannot be NaN");a.zpp_inner.ty=b;b=a.zpp_inner;null!=b._invalidate&&b._invalidate();this.circShape.transform(this.matrix)}b=this.circShape.zpp_inner;
if(b.zip_aabb&&null!=b.body)if(b.zip_aabb=!1,0==b.type){b=b.circle;if(b.zip_worldCOM&&null!=b.body){b.zip_worldCOM=!1;if(b.zip_localCOM){b.zip_localCOM=!1;if(1==b.type){a=b.polygon;if(null==a.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==a.lverts.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y;else if(null==a.lverts.next.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y,a.localCOMx+=1*a.lverts.next.next.x,a.localCOMy+=1*a.lverts.next.next.y,
a.localCOMx*=0.5,a.localCOMy*=0.5;else{a.localCOMx=0;d=a.localCOMy=0;f=e=a.lverts.next;c=e=e.next;for(e=e.next;null!=e;)g=e,d+=c.x*(g.y-f.y),f=g.y*c.x-g.x*c.y,a.localCOMx+=(c.x+g.x)*f,a.localCOMy+=(c.y+g.y)*f,f=c,c=g,e=e.next;g=e=a.lverts.next;d+=c.x*(g.y-f.y);f=g.y*c.x-g.x*c.y;a.localCOMx+=(c.x+g.x)*f;a.localCOMy+=(c.y+g.y)*f;f=c;c=g;e=e.next;d+=c.x*(e.y-f.y);f=e.y*c.x-e.x*c.y;a.localCOMx+=(c.x+e.x)*f;a.localCOMy+=(c.y+e.y)*f;d=1/(3*d);a.localCOMx*=d;a.localCOMy*=d}}null!=b.wrap_localCOM&&(b.wrap_localCOM.zpp_inner.x=
b.localCOMx,b.wrap_localCOM.zpp_inner.y=b.localCOMy)}a=b.body;a.zip_axis&&(a.zip_axis=!1,a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot));b.worldCOMx=b.body.posx+(b.body.axisy*b.localCOMx-b.body.axisx*b.localCOMy);b.worldCOMy=b.body.posy+(b.localCOMx*b.body.axisx+b.localCOMy*b.body.axisy)}d=a=b.radius;b.aabb.minx=b.worldCOMx-a;b.aabb.miny=b.worldCOMy-d;b.aabb.maxx=b.worldCOMx+a;b.aabb.maxy=b.worldCOMy+d}else{b=b.polygon;if(b.zip_gverts&&null!=b.body){b.zip_gverts=!1;b.validate_lverts();a=b.body;a.zip_axis&&
(a.zip_axis=!1,a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot));a=b.lverts.next;for(d=b.gverts.next;null!=d;)c=d,e=a,a=a.next,c.x=b.body.posx+(b.body.axisy*e.x-b.body.axisx*e.y),c.y=b.body.posy+(e.x*b.body.axisx+e.y*b.body.axisy),d=d.next}if(null==b.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");a=b.gverts.next;b.aabb.minx=a.x;b.aabb.miny=a.y;b.aabb.maxx=a.x;b.aabb.maxy=a.y;for(a=b.gverts.next.next;null!=a;)d=a,d.x<b.aabb.minx&&(b.aabb.minx=d.x),d.x>b.aabb.maxx&&(b.aabb.maxx=
d.x),d.y<b.aabb.miny&&(b.aabb.miny=d.y),d.y>b.aabb.maxy&&(b.aabb.maxy=d.y),a=a.next}},bodiesInCircle:function(){return null},__class__:si};var Id=function(){this.synced=this.first_sync=!1;this.snext=null;this.moved=!1;this.next=this.mnext=null;this.height=0;this.parent=this.child1=this.child2=null;this.dyn=!1;this.aabb=this.shape=null;this.height=-1};i["zpp_nape.space.ZPP_AABBNode"]=Id;Id.__name__=["zpp_nape","space","ZPP_AABBNode"];Id.prototype={__class__:Id};var Ld=function(){this.arb=this.next=
null;this.id=this.di=0;this.first=this.sleeping=!1;this.n1=this.n2=null};i["zpp_nape.space.ZPP_AABBPair"]=Ld;Ld.__name__=["zpp_nape","space","ZPP_AABBPair"];Ld.prototype={__class__:Ld};var re=function(){this.root=null};i["zpp_nape.space.ZPP_AABBTree"]=re;re.__name__=["zpp_nape","space","ZPP_AABBTree"];re.prototype={removeLeaf:function(a){if(a==this.root)this.root=null;else{var b=a.parent,c=b.parent,a=b.child1==a?b.child2:b.child1;if(null!=c){c.child1==b?c.child1=a:c.child2=a;a.parent=c;b.height=-1;
a=b.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=null;a._validate=null;a.next=sb.zpp_pool;sb.zpp_pool=a;b.child1=b.child2=b.parent=null;b.next=null;b.snext=null;b.mnext=null;b.next=Id.zpp_pool;Id.zpp_pool=b;for(b=c;null!=b;){if(!(null==b.child1||2>b.height)){var c=b.child1,a=b.child2,d=a.height-c.height;if(1<d){var d=a.child1,e=a.child2;a.child1=b;a.parent=b.parent;b.parent=a;null!=a.parent?a.parent.child1==b?a.parent.child1=a:a.parent.child2=
a:this.root=a;if(d.height>e.height){a.child2=d;b.child2=e;e.parent=b;var f=b.aabb,g=c.aabb,j=e.aabb;f.minx=g.minx<j.minx?g.minx:j.minx;f.miny=g.miny<j.miny?g.miny:j.miny;f.maxx=g.maxx>j.maxx?g.maxx:j.maxx;f.maxy=g.maxy>j.maxy?g.maxy:j.maxy;f=a.aabb;g=b.aabb;j=d.aabb;f.minx=g.minx<j.minx?g.minx:j.minx;f.miny=g.miny<j.miny?g.miny:j.miny;f.maxx=g.maxx>j.maxx?g.maxx:j.maxx;f.maxy=g.maxy>j.maxy?g.maxy:j.maxy;c=c.height;e=e.height;b.height=1+(c>e?c:e);b=b.height;c=d.height}else a.child2=e,b.child2=d,d.parent=
b,f=b.aabb,g=c.aabb,j=d.aabb,f.minx=g.minx<j.minx?g.minx:j.minx,f.miny=g.miny<j.miny?g.miny:j.miny,f.maxx=g.maxx>j.maxx?g.maxx:j.maxx,f.maxy=g.maxy>j.maxy?g.maxy:j.maxy,f=a.aabb,g=b.aabb,j=e.aabb,f.minx=g.minx<j.minx?g.minx:j.minx,f.miny=g.miny<j.miny?g.miny:j.miny,f.maxx=g.maxx>j.maxx?g.maxx:j.maxx,f.maxy=g.maxy>j.maxy?g.maxy:j.maxy,c=c.height,d=d.height,b.height=1+(c>d?c:d),b=b.height,c=e.height;a.height=1+(b>c?b:c);b=a}else-1>d&&(d=c.child1,e=c.child2,c.child1=b,c.parent=b.parent,b.parent=c,null!=
c.parent?c.parent.child1==b?c.parent.child1=c:c.parent.child2=c:this.root=c,d.height>e.height?(c.child2=d,b.child1=e,e.parent=b,f=b.aabb,g=a.aabb,j=e.aabb,f.minx=g.minx<j.minx?g.minx:j.minx,f.miny=g.miny<j.miny?g.miny:j.miny,f.maxx=g.maxx>j.maxx?g.maxx:j.maxx,f.maxy=g.maxy>j.maxy?g.maxy:j.maxy,f=c.aabb,g=b.aabb,j=d.aabb,f.minx=g.minx<j.minx?g.minx:j.minx,f.miny=g.miny<j.miny?g.miny:j.miny,f.maxx=g.maxx>j.maxx?g.maxx:j.maxx,f.maxy=g.maxy>j.maxy?g.maxy:j.maxy,a=a.height,e=e.height,b.height=1+(a>e?a:
e),b=b.height,a=d.height):(c.child2=e,b.child1=d,d.parent=b,f=b.aabb,g=a.aabb,j=d.aabb,f.minx=g.minx<j.minx?g.minx:j.minx,f.miny=g.miny<j.miny?g.miny:j.miny,f.maxx=g.maxx>j.maxx?g.maxx:j.maxx,f.maxy=g.maxy>j.maxy?g.maxy:j.maxy,f=c.aabb,g=b.aabb,j=e.aabb,f.minx=g.minx<j.minx?g.minx:j.minx,f.miny=g.miny<j.miny?g.miny:j.miny,f.maxx=g.maxx>j.maxx?g.maxx:j.maxx,f.maxy=g.maxy>j.maxy?g.maxy:j.maxy,a=a.height,d=d.height,b.height=1+(a>d?a:d),b=b.height,a=e.height),c.height=1+(b>a?b:a),b=c)}a=b.child1;c=b.child2;
d=b.aabb;e=a.aabb;f=c.aabb;d.minx=e.minx<f.minx?e.minx:f.minx;d.miny=e.miny<f.miny?e.miny:f.miny;d.maxx=e.maxx>f.maxx?e.maxx:f.maxx;d.maxy=e.maxy>f.maxy?e.maxy:f.maxy;a=a.height;c=c.height;b.height=1+(a>c?a:c);b=b.parent}}else this.root=a,a.parent=null,b.height=-1,c=b.aabb,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c.wrap_min=c.wrap_max=null,c._invalidate=null,c._validate=null,c.next=sb.zpp_pool,sb.zpp_pool=c,b.child1=b.child2=b.parent=null,b.next=null,b.snext=null,b.mnext=null,b.next=Id.zpp_pool,
Id.zpp_pool=b}},__class__:re};var Mm=function(a){this.stree=this.dtree=this.pairs=this.syncs=this.moves=this.treeStack=this.treeStack2=this.failed=null;si.call(this);this.space=a;this.is_sweep=!1;this.dynab=this;this.stree=new re;this.dtree=new re};i["zpp_nape.space.ZPP_DynAABBPhase"]=Mm;Mm.__name__=["zpp_nape","space","ZPP_DynAABBPhase"];Mm.__super__=si;Mm.prototype=z(si.prototype,{__insert:function(a){var b;null==Id.zpp_pool?b=new Id:(b=Id.zpp_pool,Id.zpp_pool=b.next,b.next=null);null==sb.zpp_pool?
b.aabb=new sb:(b.aabb=sb.zpp_pool,sb.zpp_pool=b.aabb.next,b.aabb.next=null);b.moved=!1;b.synced=!1;b.first_sync=!1;b.shape=a;a.node=b;b.synced=!0;b.first_sync=!0;b.snext=this.syncs;this.syncs=b},__remove:function(a){var b=a.node;b.first_sync||(b.dyn?this.dtree.removeLeaf(b):this.stree.removeLeaf(b));a.node=null;if(b.synced){for(var c=null,d=this.syncs;null!=d&&!(d==b);){c=d;d=d.snext}null==c?this.syncs=d.snext:c.snext=d.snext;d.snext=null;b.synced=!1}if(b.moved){c=null;for(d=this.moves;null!=d&&!(d==
b);){c=d;d=d.mnext}null==c?this.moves=d.mnext:c.mnext=d.mnext;d.mnext=null;b.moved=!1}for(var c=null,e=this.pairs;null!=e;)d=e.next,e.n1==b||e.n2==b?(null==c?this.pairs=d:c.next=d,null!=e.arb&&(e.arb.pair=null),e.arb=null,e.n1.shape.pairs.remove(e),e.n2.shape.pairs.remove(e),e.n1=e.n2=null,e.sleeping=!1,e.next=Ld.zpp_pool,Ld.zpp_pool=e):c=e,e=d;for(;null!=a.pairs.head;)c=a.pairs.pop_unsafe(),c.n1==b?c.n2.shape.pairs.remove(c):c.n1.shape.pairs.remove(c),null!=c.arb&&(c.arb.pair=null),c.arb=null,c.n1=
c.n2=null,c.sleeping=!1,c.next=Ld.zpp_pool,Ld.zpp_pool=c;b.height=-1;a=b.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=null;a._validate=null;a.next=sb.zpp_pool;sb.zpp_pool=a;b.child1=b.child2=b.parent=null;b.next=null;b.snext=null;b.mnext=null;b.next=Id.zpp_pool;Id.zpp_pool=b},sync_broadphase:function(){this.space.validation();if(null!=this.syncs)if(null==this.moves){for(var a=this.syncs;null!=a;){var b=a.shape;if(a.first_sync)a.first_sync=!1;else{var c=
a.dyn?this.dtree:this.stree;if(a==c.root)c.root=null;else{var d=a.parent,e=d.parent,f=d.child1==a?d.child2:d.child1;if(null!=e){e.child1==d?e.child1=f:e.child2=f;f.parent=e;var g=d;g.height=-1;var j=g.aabb;null!=j.outer&&(j.outer.zpp_inner=null,j.outer=null);j.wrap_min=j.wrap_max=null;j._invalidate=null;j._validate=null;j.next=sb.zpp_pool;sb.zpp_pool=j;g.child1=g.child2=g.parent=null;g.next=null;g.snext=null;g.mnext=null;g.next=Id.zpp_pool;Id.zpp_pool=g;for(var i=e;null!=i;){if(!(null==i.child1||
2>i.height)){var k=i.child1,l=i.child2,m=l.height-k.height;if(1<m){var n=l.child1,o=l.child2;l.child1=i;l.parent=i.parent;i.parent=l;null!=l.parent?l.parent.child1==i?l.parent.child1=l:l.parent.child2=l:c.root=l;if(n.height>o.height){l.child2=n;i.child2=o;o.parent=i;var r=i.aabb,q=k.aabb,s=o.aabb;r.minx=q.minx<s.minx?q.minx:s.minx;r.miny=q.miny<s.miny?q.miny:s.miny;r.maxx=q.maxx>s.maxx?q.maxx:s.maxx;r.maxy=q.maxy>s.maxy?q.maxy:s.maxy;var u=l.aabb,t=i.aabb,w=n.aabb;u.minx=t.minx<w.minx?t.minx:w.minx;
u.miny=t.miny<w.miny?t.miny:w.miny;u.maxx=t.maxx>w.maxx?t.maxx:w.maxx;u.maxy=t.maxy>w.maxy?t.maxy:w.maxy;var v=k.height,z=o.height;i.height=1+(v>z?v:z);var y=i.height,G=n.height;l.height=1+(y>G?y:G)}else{l.child2=o;i.child2=n;n.parent=i;var H=i.aabb,F=k.aabb,E=n.aabb;H.minx=F.minx<E.minx?F.minx:E.minx;H.miny=F.miny<E.miny?F.miny:E.miny;H.maxx=F.maxx>E.maxx?F.maxx:E.maxx;H.maxy=F.maxy>E.maxy?F.maxy:E.maxy;var J=l.aabb,O=i.aabb,P=o.aabb;J.minx=O.minx<P.minx?O.minx:P.minx;J.miny=O.miny<P.miny?O.miny:
P.miny;J.maxx=O.maxx>P.maxx?O.maxx:P.maxx;J.maxy=O.maxy>P.maxy?O.maxy:P.maxy;var K=k.height,M=n.height;i.height=1+(K>M?K:M);var X=i.height,V=o.height;l.height=1+(X>V?X:V)}i=l}else if(-1>m){var L=k.child1,Y=k.child2;k.child1=i;k.parent=i.parent;i.parent=k;null!=k.parent?k.parent.child1==i?k.parent.child1=k:k.parent.child2=k:c.root=k;if(L.height>Y.height){k.child2=L;i.child1=Y;Y.parent=i;var Ab=i.aabb,S=l.aabb,Z=Y.aabb;Ab.minx=S.minx<Z.minx?S.minx:Z.minx;Ab.miny=S.miny<Z.miny?S.miny:Z.miny;Ab.maxx=
S.maxx>Z.maxx?S.maxx:Z.maxx;Ab.maxy=S.maxy>Z.maxy?S.maxy:Z.maxy;var U=k.aabb,va=i.aabb,ha=L.aabb;U.minx=va.minx<ha.minx?va.minx:ha.minx;U.miny=va.miny<ha.miny?va.miny:ha.miny;U.maxx=va.maxx>ha.maxx?va.maxx:ha.maxx;U.maxy=va.maxy>ha.maxy?va.maxy:ha.maxy;var ka=l.height,T=Y.height;i.height=1+(ka>T?ka:T);var ga=i.height,$=L.height;k.height=1+(ga>$?ga:$)}else{k.child2=Y;i.child1=L;L.parent=i;var ca=i.aabb,W=l.aabb,fa=L.aabb;ca.minx=W.minx<fa.minx?W.minx:fa.minx;ca.miny=W.miny<fa.miny?W.miny:fa.miny;ca.maxx=
W.maxx>fa.maxx?W.maxx:fa.maxx;ca.maxy=W.maxy>fa.maxy?W.maxy:fa.maxy;var la=k.aabb,Vc=i.aabb,oa=Y.aabb;la.minx=Vc.minx<oa.minx?Vc.minx:oa.minx;la.miny=Vc.miny<oa.miny?Vc.miny:oa.miny;la.maxx=Vc.maxx>oa.maxx?Vc.maxx:oa.maxx;la.maxy=Vc.maxy>oa.maxy?Vc.maxy:oa.maxy;var Yb=l.height,tb=L.height;i.height=1+(Yb>tb?Yb:tb);var da=i.height,ja=Y.height;k.height=1+(da>ja?da:ja)}i=k}}var Da=i.child1,pa=i.child2,ea=i.aabb,lc=Da.aabb,na=pa.aabb;ea.minx=lc.minx<na.minx?lc.minx:na.minx;ea.miny=lc.miny<na.miny?lc.miny:
na.miny;ea.maxx=lc.maxx>na.maxx?lc.maxx:na.maxx;ea.maxy=lc.maxy>na.maxy?lc.maxy:na.maxy;var I=Da.height,Sa=pa.height;i.height=1+(I>Sa?I:Sa);i=i.parent}}else{c.root=f;f.parent=null;var sa=d;sa.height=-1;var ma=sa.aabb;null!=ma.outer&&(ma.outer.zpp_inner=null,ma.outer=null);ma.wrap_min=ma.wrap_max=null;ma._invalidate=null;ma._validate=null;ma.next=sb.zpp_pool;sb.zpp_pool=ma;sa.child1=sa.child2=sa.parent=null;sa.next=null;sa.snext=null;sa.mnext=null;sa.next=Id.zpp_pool;Id.zpp_pool=sa}}}var Ca=a.aabb;
if(!this.space.continuous&&b.zip_aabb&&null!=b.body)if(b.zip_aabb=!1,0==b.type){var wa=b.circle;if(wa.zip_worldCOM&&null!=wa.body){wa.zip_worldCOM=!1;if(wa.zip_localCOM){wa.zip_localCOM=!1;if(1==wa.type){var ra=wa.polygon;if(null==ra.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==ra.lverts.next.next)ra.localCOMx=ra.lverts.next.x,ra.localCOMy=ra.lverts.next.y;else if(null==ra.lverts.next.next.next)ra.localCOMx=ra.lverts.next.x,ra.localCOMy=ra.lverts.next.y,ra.localCOMx+=
1*ra.lverts.next.next.x,ra.localCOMy+=1*ra.lverts.next.next.y,ra.localCOMx*=0.5,ra.localCOMy*=0.5;else{ra.localCOMx=0;for(var Ja=ra.localCOMy=0,Ea=ra.lverts.next,A=Ea,xa=Ea=Ea.next,Ea=Ea.next;null!=Ea;){var Ma=Ea,Ja=Ja+xa.x*(Ma.y-A.y),$a=Ma.y*xa.x-Ma.x*xa.y;ra.localCOMx+=(xa.x+Ma.x)*$a;ra.localCOMy+=(xa.y+Ma.y)*$a;A=xa;xa=Ma;Ea=Ea.next}var za=Ea=ra.lverts.next,Ja=Ja+xa.x*(za.y-A.y),Db=za.y*xa.x-za.x*xa.y;ra.localCOMx+=(xa.x+za.x)*Db;ra.localCOMy+=(xa.y+za.y)*Db;var A=xa,xa=za,ya=Ea=Ea.next,Ja=Ja+
xa.x*(ya.y-A.y),Ua=ya.y*xa.x-ya.x*xa.y;ra.localCOMx+=(xa.x+ya.x)*Ua;ra.localCOMy+=(xa.y+ya.y)*Ua;var Ba=Ja=1/(3*Ja);ra.localCOMx*=Ba;ra.localCOMy*=Ba}}null!=wa.wrap_localCOM&&(wa.wrap_localCOM.zpp_inner.x=wa.localCOMx,wa.wrap_localCOM.zpp_inner.y=wa.localCOMy)}var qa=wa.body;qa.zip_axis&&(qa.zip_axis=!1,qa.axisx=Math.sin(qa.rot),qa.axisy=Math.cos(qa.rot));wa.worldCOMx=wa.body.posx+(wa.body.axisy*wa.localCOMx-wa.body.axisx*wa.localCOMy);wa.worldCOMy=wa.body.posy+(wa.localCOMx*wa.body.axisx+wa.localCOMy*
wa.body.axisy)}var Ha=wa.radius,Qa=wa.radius;wa.aabb.minx=wa.worldCOMx-Ha;wa.aabb.miny=wa.worldCOMy-Qa;wa.aabb.maxx=wa.worldCOMx+Ha;wa.aabb.maxy=wa.worldCOMy+Qa}else{var ia=b.polygon;if(ia.zip_gverts&&null!=ia.body){ia.zip_gverts=!1;ia.validate_lverts();var Pc=ia.body;Pc.zip_axis&&(Pc.zip_axis=!1,Pc.axisx=Math.sin(Pc.rot),Pc.axisy=Math.cos(Pc.rot));for(var ac=ia.lverts.next,Ia=ia.gverts.next;null!=Ia;){var kb=Ia,C=ac,ac=ac.next;kb.x=ia.body.posx+(ia.body.axisy*C.x-ia.body.axisx*C.y);kb.y=ia.body.posy+
(C.x*ia.body.axisx+C.y*ia.body.axisy);Ia=Ia.next}}if(null==ia.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");var La=ia.gverts.next;ia.aabb.minx=La.x;ia.aabb.miny=La.y;ia.aabb.maxx=La.x;ia.aabb.maxy=La.y;for(var ob=ia.gverts.next.next;null!=ob;){var ta=ob;ta.x<ia.aabb.minx&&(ia.aabb.minx=ta.x);ta.x>ia.aabb.maxx&&(ia.aabb.maxx=ta.x);ta.y<ia.aabb.miny&&(ia.aabb.miny=ta.y);ta.y>ia.aabb.maxy&&(ia.aabb.maxy=ta.y);ob=ob.next}}var pb=b.aabb;Ca.minx=pb.minx-3;Ca.miny=pb.miny-3;
Ca.maxx=pb.maxx+3;Ca.maxy=pb.maxy+3;var ua=(a.dyn=1==b.body.type?!1:!b.body.component.sleeping)?this.dtree:this.stree;if(null==ua.root)ua.root=a,ua.root.parent=null;else{for(var Q=a.aabb,aa=ua.root;null!=aa.child1;){var Na=aa.child1,ba=aa.child2,Fa=aa.aabb,Aa=2*(Fa.maxx-Fa.minx+(Fa.maxy-Fa.miny)),Hb=re.tmpaabb,bb=aa.aabb;Hb.minx=bb.minx<Q.minx?bb.minx:Q.minx;Hb.miny=bb.miny<Q.miny?bb.miny:Q.miny;Hb.maxx=bb.maxx>Q.maxx?bb.maxx:Q.maxx;Hb.maxy=bb.maxy>Q.maxy?bb.maxy:Q.maxy;var ib=re.tmpaabb,Oa=2*(ib.maxx-
ib.minx+(ib.maxy-ib.miny)),Va=2*Oa,D=2*(Oa-Aa),lb=re.tmpaabb,Ta=Na.aabb;lb.minx=Q.minx<Ta.minx?Q.minx:Ta.minx;lb.miny=Q.miny<Ta.miny?Q.miny:Ta.miny;lb.maxx=Q.maxx>Ta.maxx?Q.maxx:Ta.maxx;lb.maxy=Q.maxy>Ta.maxy?Q.maxy:Ta.maxy;var jb;if(null==Na.child1){var gb=re.tmpaabb;jb=2*(gb.maxx-gb.minx+(gb.maxy-gb.miny))+D}else{var Ga=Na.aabb,Eb=re.tmpaabb;jb=2*(Eb.maxx-Eb.minx+(Eb.maxy-Eb.miny))-2*(Ga.maxx-Ga.minx+(Ga.maxy-Ga.miny))+D}var cb=re.tmpaabb,zb=ba.aabb;cb.minx=Q.minx<zb.minx?Q.minx:zb.minx;cb.miny=
Q.miny<zb.miny?Q.miny:zb.miny;cb.maxx=Q.maxx>zb.maxx?Q.maxx:zb.maxx;cb.maxy=Q.maxy>zb.maxy?Q.maxy:zb.maxy;var Nc;if(null==ba.child1){var rd=re.tmpaabb;Nc=2*(rd.maxx-rd.minx+(rd.maxy-rd.miny))+D}else{var Ra=ba.aabb,Ib=re.tmpaabb;Nc=2*(Ib.maxx-Ib.minx+(Ib.maxy-Ib.miny))-2*(Ra.maxx-Ra.minx+(Ra.maxy-Ra.miny))+D}if(Va<jb&&Va<Nc)break;else aa=jb<Nc?Na:ba}var ub=aa,wb=ub.parent,mb;null==Id.zpp_pool?mb=new Id:(mb=Id.zpp_pool,Id.zpp_pool=mb.next,mb.next=null);null==sb.zpp_pool?mb.aabb=new sb:(mb.aabb=sb.zpp_pool,
sb.zpp_pool=mb.aabb.next,mb.aabb.next=null);mb.moved=!1;mb.synced=!1;mb.first_sync=!1;mb.parent=wb;var Za=mb.aabb,B=ub.aabb;Za.minx=Q.minx<B.minx?Q.minx:B.minx;Za.miny=Q.miny<B.miny?Q.miny:B.miny;Za.maxx=Q.maxx>B.maxx?Q.maxx:B.maxx;Za.maxy=Q.maxy>B.maxy?Q.maxy:B.maxy;mb.height=ub.height+1;null!=wb?(wb.child1==ub?wb.child1=mb:wb.child2=mb,mb.child1=ub,mb.child2=a,ub.parent=mb,a.parent=mb):(mb.child1=ub,mb.child2=a,ub.parent=mb,a.parent=mb,ua.root=mb);for(aa=a.parent;null!=aa;){if(!(null==aa.child1||
2>aa.height)){var Bb=aa.child1,db=aa.child2,ab=db.height-Bb.height;if(1<ab){var x=db.child1,Nb=db.child2;db.child1=aa;db.parent=aa.parent;aa.parent=db;null!=db.parent?db.parent.child1==aa?db.parent.child1=db:db.parent.child2=db:ua.root=db;if(x.height>Nb.height){db.child2=x;aa.child2=Nb;Nb.parent=aa;var Jb=aa.aabb,qb=Bb.aabb,Pa=Nb.aabb;Jb.minx=qb.minx<Pa.minx?qb.minx:Pa.minx;Jb.miny=qb.miny<Pa.miny?qb.miny:Pa.miny;Jb.maxx=qb.maxx>Pa.maxx?qb.maxx:Pa.maxx;Jb.maxy=qb.maxy>Pa.maxy?qb.maxy:Pa.maxy;var Xa=
db.aabb,Ya=aa.aabb,vb=x.aabb;Xa.minx=Ya.minx<vb.minx?Ya.minx:vb.minx;Xa.miny=Ya.miny<vb.miny?Ya.miny:vb.miny;Xa.maxx=Ya.maxx>vb.maxx?Ya.maxx:vb.maxx;Xa.maxy=Ya.maxy>vb.maxy?Ya.maxy:vb.maxy;var eb=Bb.height,Ob=Nb.height;aa.height=1+(eb>Ob?eb:Ob);var Ka=aa.height,Vb=x.height;db.height=1+(Ka>Vb?Ka:Vb)}else{db.child2=Nb;aa.child2=x;x.parent=aa;var Wa=aa.aabb,fb=Bb.aabb,yb=x.aabb;Wa.minx=fb.minx<yb.minx?fb.minx:yb.minx;Wa.miny=fb.miny<yb.miny?fb.miny:yb.miny;Wa.maxx=fb.maxx>yb.maxx?fb.maxx:yb.maxx;Wa.maxy=
fb.maxy>yb.maxy?fb.maxy:yb.maxy;var Mb=db.aabb,Xb=aa.aabb,nb=Nb.aabb;Mb.minx=Xb.minx<nb.minx?Xb.minx:nb.minx;Mb.miny=Xb.miny<nb.miny?Xb.miny:nb.miny;Mb.maxx=Xb.maxx>nb.maxx?Xb.maxx:nb.maxx;Mb.maxy=Xb.maxy>nb.maxy?Xb.maxy:nb.maxy;var Pb=Bb.height,R=x.height;aa.height=1+(Pb>R?Pb:R);var Gb=aa.height,Tb=Nb.height;db.height=1+(Gb>Tb?Gb:Tb)}aa=db}else if(-1>ab){var ae=Bb.child1,Lb=Bb.child2;Bb.child1=aa;Bb.parent=aa.parent;aa.parent=Bb;null!=Bb.parent?Bb.parent.child1==aa?Bb.parent.child1=Bb:Bb.parent.child2=
Bb:ua.root=Bb;if(ae.height>Lb.height){Bb.child2=ae;aa.child1=Lb;Lb.parent=aa;var Ic=aa.aabb,sc=db.aabb,Cb=Lb.aabb;Ic.minx=sc.minx<Cb.minx?sc.minx:Cb.minx;Ic.miny=sc.miny<Cb.miny?sc.miny:Cb.miny;Ic.maxx=sc.maxx>Cb.maxx?sc.maxx:Cb.maxx;Ic.maxy=sc.maxy>Cb.maxy?sc.maxy:Cb.maxy;var Wb=Bb.aabb,bc=aa.aabb,me=ae.aabb;Wb.minx=bc.minx<me.minx?bc.minx:me.minx;Wb.miny=bc.miny<me.miny?bc.miny:me.miny;Wb.maxx=bc.maxx>me.maxx?bc.maxx:me.maxx;Wb.maxy=bc.maxy>me.maxy?bc.maxy:me.maxy;var Kb=db.height,dc=Lb.height;
aa.height=1+(Kb>dc?Kb:dc);var Ub=aa.height,qc=ae.height;Bb.height=1+(Ub>qc?Ub:qc)}else{Bb.child2=Lb;aa.child1=ae;ae.parent=aa;var N=aa.aabb,rb=db.aabb,ic=ae.aabb;N.minx=rb.minx<ic.minx?rb.minx:ic.minx;N.miny=rb.miny<ic.miny?rb.miny:ic.miny;N.maxx=rb.maxx>ic.maxx?rb.maxx:ic.maxx;N.maxy=rb.maxy>ic.maxy?rb.maxy:ic.maxy;var ne=Bb.aabb,Jd=aa.aabb,fe=Lb.aabb;ne.minx=Jd.minx<fe.minx?Jd.minx:fe.minx;ne.miny=Jd.miny<fe.miny?Jd.miny:fe.miny;ne.maxx=Jd.maxx>fe.maxx?Jd.maxx:fe.maxx;ne.maxy=Jd.maxy>fe.maxy?Jd.maxy:
fe.maxy;var gc=db.height,Qc=ae.height;aa.height=1+(gc>Qc?gc:Qc);var Ec=aa.height,wc=Lb.height;Bb.height=1+(Ec>wc?Ec:wc)}aa=Bb}}var Gc=aa.child1,Me=aa.child2,ze=Gc.height,fc=Me.height;aa.height=1+(ze>fc?ze:fc);var Cc=aa.aabb,Ce=Gc.aabb,Sb=Me.aabb;Cc.minx=Ce.minx<Sb.minx?Ce.minx:Sb.minx;Cc.miny=Ce.miny<Sb.miny?Ce.miny:Sb.miny;Cc.maxx=Ce.maxx>Sb.maxx?Ce.maxx:Sb.maxx;Cc.maxy=Ce.maxy>Sb.maxy?Ce.maxy:Sb.maxy;aa=aa.parent}}a.synced=!1;a.moved=!0;a.mnext=a.snext;a.snext=null;a=a.mnext}var ec=this.syncs;this.syncs=
this.moves;this.moves=ec}else for(;null!=this.syncs;){var Hc=this.syncs;this.syncs=Hc.snext;Hc.snext=null;var Pd=Hc,Mf=Pd.shape;if(Pd.first_sync)Pd.first_sync=!1;else{var Wf=Pd.dyn?this.dtree:this.stree;if(Pd==Wf.root)Wf.root=null;else{var ve=Pd.parent,jd=ve.parent,Qb=ve.child1==Pd?ve.child2:ve.child1;if(null!=jd){jd.child1==ve?jd.child1=Qb:jd.child2=Qb;Qb.parent=jd;var cd=ve;cd.height=-1;var Jc=cd.aabb;null!=Jc.outer&&(Jc.outer.zpp_inner=null,Jc.outer=null);Jc.wrap_min=Jc.wrap_max=null;Jc._invalidate=
null;Jc._validate=null;Jc.next=sb.zpp_pool;sb.zpp_pool=Jc;cd.child1=cd.child2=cd.parent=null;cd.next=null;cd.snext=null;cd.mnext=null;cd.next=Id.zpp_pool;Id.zpp_pool=cd;for(var xb=jd;null!=xb;){if(!(null==xb.child1||2>xb.height)){var sd=xb.child1,nc=xb.child2,be=nc.height-sd.height;if(1<be){var oc=nc.child1,kd=nc.child2;nc.child1=xb;nc.parent=xb.parent;xb.parent=nc;null!=nc.parent?nc.parent.child1==xb?nc.parent.child1=nc:nc.parent.child2=nc:Wf.root=nc;if(oc.height>kd.height){nc.child2=oc;xb.child2=
kd;kd.parent=xb;var tc=xb.aabb,Rc=sd.aabb,yc=kd.aabb;tc.minx=Rc.minx<yc.minx?Rc.minx:yc.minx;tc.miny=Rc.miny<yc.miny?Rc.miny:yc.miny;tc.maxx=Rc.maxx>yc.maxx?Rc.maxx:yc.maxx;tc.maxy=Rc.maxy>yc.maxy?Rc.maxy:yc.maxy;var hb=nc.aabb,mc=xb.aabb,Bc=oc.aabb;hb.minx=mc.minx<Bc.minx?mc.minx:Bc.minx;hb.miny=mc.miny<Bc.miny?mc.miny:Bc.miny;hb.maxx=mc.maxx>Bc.maxx?mc.maxx:Bc.maxx;hb.maxy=mc.maxy>Bc.maxy?mc.maxy:Bc.maxy;var $c=sd.height,Tc=kd.height;xb.height=1+($c>Tc?$c:Tc);var ad=xb.height,xd=oc.height;nc.height=
1+(ad>xd?ad:xd)}else{nc.child2=kd;xb.child2=oc;oc.parent=xb;var Bd=xb.aabb,Yf=sd.aabb,Zb=oc.aabb;Bd.minx=Yf.minx<Zb.minx?Yf.minx:Zb.minx;Bd.miny=Yf.miny<Zb.miny?Yf.miny:Zb.miny;Bd.maxx=Yf.maxx>Zb.maxx?Yf.maxx:Zb.maxx;Bd.maxy=Yf.maxy>Zb.maxy?Yf.maxy:Zb.maxy;var hc=nc.aabb,Rd=xb.aabb,Cd=kd.aabb;hc.minx=Rd.minx<Cd.minx?Rd.minx:Cd.minx;hc.miny=Rd.miny<Cd.miny?Rd.miny:Cd.miny;hc.maxx=Rd.maxx>Cd.maxx?Rd.maxx:Cd.maxx;hc.maxy=Rd.maxy>Cd.maxy?Rd.maxy:Cd.maxy;var md=sd.height,pd=oc.height;xb.height=1+(md>pd?
md:pd);var bd=xb.height,Ac=kd.height;nc.height=1+(bd>Ac?bd:Ac)}xb=nc}else if(-1>be){var zc=sd.child1,Vd=sd.child2;sd.child1=xb;sd.parent=xb.parent;xb.parent=sd;null!=sd.parent?sd.parent.child1==xb?sd.parent.child1=sd:sd.parent.child2=sd:Wf.root=sd;if(zc.height>Vd.height){sd.child2=zc;xb.child1=Vd;Vd.parent=xb;var Sc=xb.aabb,Lc=nc.aabb,rg=Vd.aabb;Sc.minx=Lc.minx<rg.minx?Lc.minx:rg.minx;Sc.miny=Lc.miny<rg.miny?Lc.miny:rg.miny;Sc.maxx=Lc.maxx>rg.maxx?Lc.maxx:rg.maxx;Sc.maxy=Lc.maxy>rg.maxy?Lc.maxy:rg.maxy;
var dd=sd.aabb,he=xb.aabb,ff=zc.aabb;dd.minx=he.minx<ff.minx?he.minx:ff.minx;dd.miny=he.miny<ff.miny?he.miny:ff.miny;dd.maxx=he.maxx>ff.maxx?he.maxx:ff.maxx;dd.maxy=he.maxy>ff.maxy?he.maxy:ff.maxy;var gd=nc.height,Ff=Vd.height;xb.height=1+(gd>Ff?gd:Ff);var Zc=xb.height,Uc=zc.height;sd.height=1+(Zc>Uc?Zc:Uc)}else{sd.child2=Vd;xb.child1=zc;zc.parent=xb;var Rb=xb.aabb,Yc=nc.aabb,Fe=zc.aabb;Rb.minx=Yc.minx<Fe.minx?Yc.minx:Fe.minx;Rb.miny=Yc.miny<Fe.miny?Yc.miny:Fe.miny;Rb.maxx=Yc.maxx>Fe.maxx?Yc.maxx:
Fe.maxx;Rb.maxy=Yc.maxy>Fe.maxy?Yc.maxy:Fe.maxy;var td=sd.aabb,Dc=xb.aabb,ce=Vd.aabb;td.minx=Dc.minx<ce.minx?Dc.minx:ce.minx;td.miny=Dc.miny<ce.miny?Dc.miny:ce.miny;td.maxx=Dc.maxx>ce.maxx?Dc.maxx:ce.maxx;td.maxy=Dc.maxy>ce.maxy?Dc.maxy:ce.maxy;var xc=nc.height,Dd=zc.height;xb.height=1+(xc>Dd?xc:Dd);var od=xb.height,oe=Vd.height;sd.height=1+(od>oe?od:oe)}xb=sd}}var zd=xb.child1,ie=xb.child2,pe=xb.aabb,cc=zd.aabb,Kc=ie.aabb;pe.minx=cc.minx<Kc.minx?cc.minx:Kc.minx;pe.miny=cc.miny<Kc.miny?cc.miny:Kc.miny;
pe.maxx=cc.maxx>Kc.maxx?cc.maxx:Kc.maxx;pe.maxy=cc.maxy>Kc.maxy?cc.maxy:Kc.maxy;var Td=zd.height,Xc=ie.height;xb.height=1+(Td>Xc?Td:Xc);xb=xb.parent}}else{Wf.root=Qb;Qb.parent=null;var Fc=ve;Fc.height=-1;var Gd=Fc.aabb;null!=Gd.outer&&(Gd.outer.zpp_inner=null,Gd.outer=null);Gd.wrap_min=Gd.wrap_max=null;Gd._invalidate=null;Gd._validate=null;Gd.next=sb.zpp_pool;sb.zpp_pool=Gd;Fc.child1=Fc.child2=Fc.parent=null;Fc.next=null;Fc.snext=null;Fc.mnext=null;Fc.next=Id.zpp_pool;Id.zpp_pool=Fc}}}var hd=Pd.aabb;
if(!this.space.continuous&&Mf.zip_aabb&&null!=Mf.body)if(Mf.zip_aabb=!1,0==Mf.type){var Od=Mf.circle;if(Od.zip_worldCOM&&null!=Od.body){Od.zip_worldCOM=!1;if(Od.zip_localCOM){Od.zip_localCOM=!1;if(1==Od.type){var ed=Od.polygon;if(null==ed.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==ed.lverts.next.next)ed.localCOMx=ed.lverts.next.x,ed.localCOMy=ed.lverts.next.y;else if(null==ed.lverts.next.next.next)ed.localCOMx=ed.lverts.next.x,ed.localCOMy=ed.lverts.next.y,
ed.localCOMx+=1*ed.lverts.next.next.x,ed.localCOMy+=1*ed.lverts.next.next.y,ed.localCOMx*=0.5,ed.localCOMy*=0.5;else{ed.localCOMx=0;for(var Wd=ed.localCOMy=0,pc=ed.lverts.next,Wc=pc,vc=pc=pc.next,pc=pc.next;null!=pc;){var je=pc,Wd=Wd+vc.x*(je.y-Wc.y),Gf=je.y*vc.x-je.x*vc.y;ed.localCOMx+=(vc.x+je.x)*Gf;ed.localCOMy+=(vc.y+je.y)*Gf;Wc=vc;vc=je;pc=pc.next}var Yd=pc=ed.lverts.next,Wd=Wd+vc.x*(Yd.y-Wc.y),$b=Yd.y*vc.x-Yd.x*vc.y;ed.localCOMx+=(vc.x+Yd.x)*$b;ed.localCOMy+=(vc.y+Yd.y)*$b;var Wc=vc,vc=Yd,yd=
pc=pc.next,Wd=Wd+vc.x*(yd.y-Wc.y),Ge=yd.y*vc.x-yd.x*vc.y;ed.localCOMx+=(vc.x+yd.x)*Ge;ed.localCOMy+=(vc.y+yd.y)*Ge;var Zd=Wd=1/(3*Wd);ed.localCOMx*=Zd;ed.localCOMy*=Zd}}null!=Od.wrap_localCOM&&(Od.wrap_localCOM.zpp_inner.x=Od.localCOMx,Od.wrap_localCOM.zpp_inner.y=Od.localCOMy)}var He=Od.body;He.zip_axis&&(He.zip_axis=!1,He.axisx=Math.sin(He.rot),He.axisy=Math.cos(He.rot));Od.worldCOMx=Od.body.posx+(Od.body.axisy*Od.localCOMx-Od.body.axisx*Od.localCOMy);Od.worldCOMy=Od.body.posy+(Od.localCOMx*Od.body.axisx+
Od.localCOMy*Od.body.axisy)}var Ed=Od.radius,Nd=Od.radius;Od.aabb.minx=Od.worldCOMx-Ed;Od.aabb.miny=Od.worldCOMy-Nd;Od.aabb.maxx=Od.worldCOMx+Ed;Od.aabb.maxy=Od.worldCOMy+Nd}else{var vd=Mf.polygon;if(vd.zip_gverts&&null!=vd.body){vd.zip_gverts=!1;vd.validate_lverts();var Af=vd.body;Af.zip_axis&&(Af.zip_axis=!1,Af.axisx=Math.sin(Af.rot),Af.axisy=Math.cos(Af.rot));for(var Qd=vd.lverts.next,le=vd.gverts.next;null!=le;){var Be=le,qd=Qd,Qd=Qd.next;Be.x=vd.body.posx+(vd.body.axisy*qd.x-vd.body.axisx*qd.y);
Be.y=vd.body.posy+(qd.x*vd.body.axisx+qd.y*vd.body.axisy);le=le.next}}if(null==vd.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");var Hf=vd.gverts.next;vd.aabb.minx=Hf.x;vd.aabb.miny=Hf.y;vd.aabb.maxx=Hf.x;vd.aabb.maxy=Hf.y;for(var Fb=vd.gverts.next.next;null!=Fb;){var Oc=Fb;Oc.x<vd.aabb.minx&&(vd.aabb.minx=Oc.x);Oc.x>vd.aabb.maxx&&(vd.aabb.maxx=Oc.x);Oc.y<vd.aabb.miny&&(vd.aabb.miny=Oc.y);Oc.y>vd.aabb.maxy&&(vd.aabb.maxy=Oc.y);Fb=Fb.next}}var We=Mf.aabb;hd.minx=We.minx-
3;hd.miny=We.miny-3;hd.maxx=We.maxx+3;hd.maxy=We.maxy+3;var If=(Pd.dyn=1==Mf.body.type?!1:!Mf.body.component.sleeping)?this.dtree:this.stree;if(null==If.root)If.root=Pd,If.root.parent=null;else{for(var Hd=Pd.aabb,jc=If.root;null!=jc.child1;){var ge=jc.child1,Ie=jc.child2,Xd=jc.aabb,fd=2*(Xd.maxx-Xd.minx+(Xd.maxy-Xd.miny)),Ad=re.tmpaabb,Ld=jc.aabb;Ad.minx=Ld.minx<Hd.minx?Ld.minx:Hd.minx;Ad.miny=Ld.miny<Hd.miny?Ld.miny:Hd.miny;Ad.maxx=Ld.maxx>Hd.maxx?Ld.maxx:Hd.maxx;Ad.maxy=Ld.maxy>Hd.maxy?Ld.maxy:
Hd.maxy;var $d=re.tmpaabb,Je=2*($d.maxx-$d.minx+($d.maxy-$d.miny)),ue=2*Je,ld=2*(Je-fd),uc=re.tmpaabb,ud=ge.aabb;uc.minx=Hd.minx<ud.minx?Hd.minx:ud.minx;uc.miny=Hd.miny<ud.miny?Hd.miny:ud.miny;uc.maxx=Hd.maxx>ud.maxx?Hd.maxx:ud.maxx;uc.maxy=Hd.maxy>ud.maxy?Hd.maxy:ud.maxy;var qe;if(null==ge.child1){var ke=re.tmpaabb;qe=2*(ke.maxx-ke.minx+(ke.maxy-ke.miny))+ld}else{var de=ge.aabb,se=re.tmpaabb;qe=2*(se.maxx-se.minx+(se.maxy-se.miny))-2*(de.maxx-de.minx+(de.maxy-de.miny))+ld}var ee=re.tmpaabb,Fd=Ie.aabb;
ee.minx=Hd.minx<Fd.minx?Hd.minx:Fd.minx;ee.miny=Hd.miny<Fd.miny?Hd.miny:Fd.miny;ee.maxx=Hd.maxx>Fd.maxx?Hd.maxx:Fd.maxx;ee.maxy=Hd.maxy>Fd.maxy?Hd.maxy:Fd.maxy;var nd;if(null==Ie.child1){var Ee=re.tmpaabb;nd=2*(Ee.maxx-Ee.minx+(Ee.maxy-Ee.miny))+ld}else{var Ne=Ie.aabb,Te=re.tmpaabb;nd=2*(Te.maxx-Te.minx+(Te.maxy-Te.miny))-2*(Ne.maxx-Ne.minx+(Ne.maxy-Ne.miny))+ld}if(ue<qe&&ue<nd)break;else jc=qe<nd?ge:Ie}var id=jc,te=id.parent,De;null==Id.zpp_pool?De=new Id:(De=Id.zpp_pool,Id.zpp_pool=De.next,De.next=
null);null==sb.zpp_pool?De.aabb=new sb:(De.aabb=sb.zpp_pool,sb.zpp_pool=De.aabb.next,De.aabb.next=null);De.moved=!1;De.synced=!1;De.first_sync=!1;De.parent=te;var gf=De.aabb,wf=id.aabb;gf.minx=Hd.minx<wf.minx?Hd.minx:wf.minx;gf.miny=Hd.miny<wf.miny?Hd.miny:wf.miny;gf.maxx=Hd.maxx>wf.maxx?Hd.maxx:wf.maxx;gf.maxy=Hd.maxy>wf.maxy?Hd.maxy:wf.maxy;De.height=id.height+1;null!=te?(te.child1==id?te.child1=De:te.child2=De,De.child1=id,De.child2=Pd,id.parent=De,Pd.parent=De):(De.child1=id,De.child2=Pd,id.parent=
De,Pd.parent=De,If.root=De);for(jc=Pd.parent;null!=jc;){if(!(null==jc.child1||2>jc.height)){var wd=jc.child1,Sd=jc.child2,Ve=Sd.height-wd.height;if(1<Ve){var Ud=Sd.child1,xe=Sd.child2;Sd.child1=jc;Sd.parent=jc.parent;jc.parent=Sd;null!=Sd.parent?Sd.parent.child1==jc?Sd.parent.child1=Sd:Sd.parent.child2=Sd:If.root=Sd;if(Ud.height>xe.height){Sd.child2=Ud;jc.child2=xe;xe.parent=jc;var Ze=jc.aabb,df=wd.aabb,Ue=xe.aabb;Ze.minx=df.minx<Ue.minx?df.minx:Ue.minx;Ze.miny=df.miny<Ue.miny?df.miny:Ue.miny;Ze.maxx=
df.maxx>Ue.maxx?df.maxx:Ue.maxx;Ze.maxy=df.maxy>Ue.maxy?df.maxy:Ue.maxy;var Oe=Sd.aabb,Ye=jc.aabb,Ke=Ud.aabb;Oe.minx=Ye.minx<Ke.minx?Ye.minx:Ke.minx;Oe.miny=Ye.miny<Ke.miny?Ye.miny:Ke.miny;Oe.maxx=Ye.maxx>Ke.maxx?Ye.maxx:Ke.maxx;Oe.maxy=Ye.maxy>Ke.maxy?Ye.maxy:Ke.maxy;var kf=wd.height,pf=xe.height;jc.height=1+(kf>pf?kf:pf);var Kd=jc.height,yf=Ud.height;Sd.height=1+(Kd>yf?Kd:yf)}else{Sd.child2=xe;jc.child2=Ud;Ud.parent=jc;var Xe=jc.aabb,Jf=wd.aabb,Qe=Ud.aabb;Xe.minx=Jf.minx<Qe.minx?Jf.minx:Qe.minx;
Xe.miny=Jf.miny<Qe.miny?Jf.miny:Qe.miny;Xe.maxx=Jf.maxx>Qe.maxx?Jf.maxx:Qe.maxx;Xe.maxy=Jf.maxy>Qe.maxy?Jf.maxy:Qe.maxy;var $e=Sd.aabb,Pe=jc.aabb,af=xe.aabb;$e.minx=Pe.minx<af.minx?Pe.minx:af.minx;$e.miny=Pe.miny<af.miny?Pe.miny:af.miny;$e.maxx=Pe.maxx>af.maxx?Pe.maxx:af.maxx;$e.maxy=Pe.maxy>af.maxy?Pe.maxy:af.maxy;var lf=wd.height,mf=Ud.height;jc.height=1+(lf>mf?lf:mf);var nf=jc.height,Ef=xe.height;Sd.height=1+(nf>Ef?nf:Ef)}jc=Sd}else if(-1>Ve){var Re=wd.child1,hf=wd.child2;wd.child1=jc;wd.parent=
jc.parent;jc.parent=wd;null!=wd.parent?wd.parent.child1==jc?wd.parent.child1=wd:wd.parent.child2=wd:If.root=wd;if(Re.height>hf.height){wd.child2=Re;jc.child1=hf;hf.parent=jc;var Kf=jc.aabb,cf=Sd.aabb,Se=hf.aabb;Kf.minx=cf.minx<Se.minx?cf.minx:Se.minx;Kf.miny=cf.miny<Se.miny?cf.miny:Se.miny;Kf.maxx=cf.maxx>Se.maxx?cf.maxx:Se.maxx;Kf.maxy=cf.maxy>Se.maxy?cf.maxy:Se.maxy;var sf=wd.aabb,xf=jc.aabb,bf=Re.aabb;sf.minx=xf.minx<bf.minx?xf.minx:bf.minx;sf.miny=xf.miny<bf.miny?xf.miny:bf.miny;sf.maxx=xf.maxx>
bf.maxx?xf.maxx:bf.maxx;sf.maxy=xf.maxy>bf.maxy?xf.maxy:bf.maxy;var tf=Sd.height,of=hf.height;jc.height=1+(tf>of?tf:of);var Df=jc.height,vf=Re.height;wd.height=1+(Df>vf?Df:vf)}else{wd.child2=hf;jc.child1=Re;Re.parent=jc;var jf=jc.aabb,Zf=Sd.aabb,Ae=Re.aabb;jf.minx=Zf.minx<Ae.minx?Zf.minx:Ae.minx;jf.miny=Zf.miny<Ae.miny?Zf.miny:Ae.miny;jf.maxx=Zf.maxx>Ae.maxx?Zf.maxx:Ae.maxx;jf.maxy=Zf.maxy>Ae.maxy?Zf.maxy:Ae.maxy;var rf=wd.aabb,Bf=jc.aabb,Lf=hf.aabb;rf.minx=Bf.minx<Lf.minx?Bf.minx:Lf.minx;rf.miny=
Bf.miny<Lf.miny?Bf.miny:Lf.miny;rf.maxx=Bf.maxx>Lf.maxx?Bf.maxx:Lf.maxx;rf.maxy=Bf.maxy>Lf.maxy?Bf.maxy:Lf.maxy;var Rf=Sd.height,Cf=Re.height;jc.height=1+(Rf>Cf?Rf:Cf);var bg=jc.height,Nf=hf.height;wd.height=1+(bg>Nf?bg:Nf)}jc=wd}}var Of=jc.child1,uf=jc.child2,cg=Of.height,Xf=uf.height;jc.height=1+(cg>Xf?cg:Xf);var Tf=jc.aabb,Pf=Of.aabb,Qf=uf.aabb;Tf.minx=Pf.minx<Qf.minx?Pf.minx:Qf.minx;Tf.miny=Pf.miny<Qf.miny?Pf.miny:Qf.miny;Tf.maxx=Pf.maxx>Qf.maxx?Pf.maxx:Qf.maxx;Tf.maxy=Pf.maxy>Qf.maxy?Pf.maxy:
Qf.maxy;jc=jc.parent}}Pd.synced=!1;Pd.moved||(Pd.moved=!0,Pd.mnext=this.moves,this.moves=Pd)}},broadphase:function(a,b){for(var c=this.syncs;null!=c;){var d=c.shape;if(c.first_sync)c.first_sync=!1;else{var e=c.dyn?this.dtree:this.stree;if(c==e.root)e.root=null;else{var f=c.parent,g=f.parent,j=f.child1==c?f.child2:f.child1;if(null!=g){g.child1==f?g.child1=j:g.child2=j;j.parent=g;var i=f;i.height=-1;var k=i.aabb;null!=k.outer&&(k.outer.zpp_inner=null,k.outer=null);k.wrap_min=k.wrap_max=null;k._invalidate=
null;k._validate=null;k.next=sb.zpp_pool;sb.zpp_pool=k;i.child1=i.child2=i.parent=null;i.next=null;i.snext=null;i.mnext=null;i.next=Id.zpp_pool;Id.zpp_pool=i;for(var l=g;null!=l;){if(!(null==l.child1||2>l.height)){var m=l.child1,n=l.child2,o=n.height-m.height;if(1<o){var r=n.child1,q=n.child2;n.child1=l;n.parent=l.parent;l.parent=n;null!=n.parent?n.parent.child1==l?n.parent.child1=n:n.parent.child2=n:e.root=n;if(r.height>q.height){n.child2=r;l.child2=q;q.parent=l;var s=l.aabb,u=m.aabb,t=q.aabb;s.minx=
u.minx<t.minx?u.minx:t.minx;s.miny=u.miny<t.miny?u.miny:t.miny;s.maxx=u.maxx>t.maxx?u.maxx:t.maxx;s.maxy=u.maxy>t.maxy?u.maxy:t.maxy;var w=n.aabb,v=l.aabb,z=r.aabb;w.minx=v.minx<z.minx?v.minx:z.minx;w.miny=v.miny<z.miny?v.miny:z.miny;w.maxx=v.maxx>z.maxx?v.maxx:z.maxx;w.maxy=v.maxy>z.maxy?v.maxy:z.maxy;var y=m.height,G=q.height;l.height=1+(y>G?y:G);var H=l.height,F=r.height;n.height=1+(H>F?H:F)}else{n.child2=q;l.child2=r;r.parent=l;var E=l.aabb,J=m.aabb,O=r.aabb;E.minx=J.minx<O.minx?J.minx:O.minx;
E.miny=J.miny<O.miny?J.miny:O.miny;E.maxx=J.maxx>O.maxx?J.maxx:O.maxx;E.maxy=J.maxy>O.maxy?J.maxy:O.maxy;var P=n.aabb,K=l.aabb,M=q.aabb;P.minx=K.minx<M.minx?K.minx:M.minx;P.miny=K.miny<M.miny?K.miny:M.miny;P.maxx=K.maxx>M.maxx?K.maxx:M.maxx;P.maxy=K.maxy>M.maxy?K.maxy:M.maxy;var X=m.height,L=r.height;l.height=1+(X>L?X:L);var V=l.height,Y=q.height;n.height=1+(V>Y?V:Y)}l=n}else if(-1>o){var S=m.child1,Z=m.child2;m.child1=l;m.parent=l.parent;l.parent=m;null!=m.parent?m.parent.child1==l?m.parent.child1=
m:m.parent.child2=m:e.root=m;if(S.height>Z.height){m.child2=S;l.child1=Z;Z.parent=l;var ha=l.aabb,U=n.aabb,va=Z.aabb;ha.minx=U.minx<va.minx?U.minx:va.minx;ha.miny=U.miny<va.miny?U.miny:va.miny;ha.maxx=U.maxx>va.maxx?U.maxx:va.maxx;ha.maxy=U.maxy>va.maxy?U.maxy:va.maxy;var ka=m.aabb,T=l.aabb,W=S.aabb;ka.minx=T.minx<W.minx?T.minx:W.minx;ka.miny=T.miny<W.miny?T.miny:W.miny;ka.maxx=T.maxx>W.maxx?T.maxx:W.maxx;ka.maxy=T.maxy>W.maxy?T.maxy:W.maxy;var ga=n.height,fa=Z.height;l.height=1+(ga>fa?ga:fa);var $=
l.height,ca=S.height;m.height=1+($>ca?$:ca)}else{m.child2=Z;l.child1=S;S.parent=l;var la=l.aabb,da=n.aabb,Vc=S.aabb;la.minx=da.minx<Vc.minx?da.minx:Vc.minx;la.miny=da.miny<Vc.miny?da.miny:Vc.miny;la.maxx=da.maxx>Vc.maxx?da.maxx:Vc.maxx;la.maxy=da.maxy>Vc.maxy?da.maxy:Vc.maxy;var oa=m.aabb,sa=l.aabb,tb=Z.aabb;oa.minx=sa.minx<tb.minx?sa.minx:tb.minx;oa.miny=sa.miny<tb.miny?sa.miny:tb.miny;oa.maxx=sa.maxx>tb.maxx?sa.maxx:tb.maxx;oa.maxy=sa.maxy>tb.maxy?sa.maxy:tb.maxy;var na=n.height,ja=S.height;l.height=
1+(na>ja?na:ja);var Da=l.height,ma=Z.height;m.height=1+(Da>ma?Da:ma)}l=m}}var pa=l.child1,ea=l.child2,Ca=l.aabb,I=pa.aabb,Sa=ea.aabb;Ca.minx=I.minx<Sa.minx?I.minx:Sa.minx;Ca.miny=I.miny<Sa.miny?I.miny:Sa.miny;Ca.maxx=I.maxx>Sa.maxx?I.maxx:Sa.maxx;Ca.maxy=I.maxy>Sa.maxy?I.maxy:Sa.maxy;var qa=pa.height,Ha=ea.height;l.height=1+(qa>Ha?qa:Ha);l=l.parent}}else{e.root=j;j.parent=null;var ua=f;ua.height=-1;var wa=ua.aabb;null!=wa.outer&&(wa.outer.zpp_inner=null,wa.outer=null);wa.wrap_min=wa.wrap_max=null;
wa._invalidate=null;wa._validate=null;wa.next=sb.zpp_pool;sb.zpp_pool=wa;ua.child1=ua.child2=ua.parent=null;ua.next=null;ua.snext=null;ua.mnext=null;ua.next=Id.zpp_pool;Id.zpp_pool=ua}}}var ra=c.aabb;if(!a.continuous&&d.zip_aabb&&null!=d.body)if(d.zip_aabb=!1,0==d.type){var Ja=d.circle;if(Ja.zip_worldCOM&&null!=Ja.body){Ja.zip_worldCOM=!1;if(Ja.zip_localCOM){Ja.zip_localCOM=!1;if(1==Ja.type){var Ea=Ja.polygon;if(null==Ea.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");
if(null==Ea.lverts.next.next)Ea.localCOMx=Ea.lverts.next.x,Ea.localCOMy=Ea.lverts.next.y;else if(null==Ea.lverts.next.next.next)Ea.localCOMx=Ea.lverts.next.x,Ea.localCOMy=Ea.lverts.next.y,Ea.localCOMx+=1*Ea.lverts.next.next.x,Ea.localCOMy+=1*Ea.lverts.next.next.y,Ea.localCOMx*=0.5,Ea.localCOMy*=0.5;else{Ea.localCOMx=0;for(var A=Ea.localCOMy=0,xa=Ea.lverts.next,Ma=xa,$a=xa=xa.next,xa=xa.next;null!=xa;){var za=xa,A=A+$a.x*(za.y-Ma.y),Db=za.y*$a.x-za.x*$a.y;Ea.localCOMx+=($a.x+za.x)*Db;Ea.localCOMy+=
($a.y+za.y)*Db;Ma=$a;$a=za;xa=xa.next}var ya=xa=Ea.lverts.next,A=A+$a.x*(ya.y-Ma.y),Ua=ya.y*$a.x-ya.x*$a.y;Ea.localCOMx+=($a.x+ya.x)*Ua;Ea.localCOMy+=($a.y+ya.y)*Ua;var Ma=$a,$a=ya,Ba=xa=xa.next,A=A+$a.x*(Ba.y-Ma.y),Ia=Ba.y*$a.x-Ba.x*$a.y;Ea.localCOMx+=($a.x+Ba.x)*Ia;Ea.localCOMy+=($a.y+Ba.y)*Ia;var La=A=1/(3*A);Ea.localCOMx*=La;Ea.localCOMy*=La}}null!=Ja.wrap_localCOM&&(Ja.wrap_localCOM.zpp_inner.x=Ja.localCOMx,Ja.wrap_localCOM.zpp_inner.y=Ja.localCOMy)}var Qa=Ja.body;Qa.zip_axis&&(Qa.zip_axis=!1,
Qa.axisx=Math.sin(Qa.rot),Qa.axisy=Math.cos(Qa.rot));Ja.worldCOMx=Ja.body.posx+(Ja.body.axisy*Ja.localCOMx-Ja.body.axisx*Ja.localCOMy);Ja.worldCOMy=Ja.body.posy+(Ja.localCOMx*Ja.body.axisx+Ja.localCOMy*Ja.body.axisy)}var ia=Ja.radius,Pc=Ja.radius;Ja.aabb.minx=Ja.worldCOMx-ia;Ja.aabb.miny=Ja.worldCOMy-Pc;Ja.aabb.maxx=Ja.worldCOMx+ia;Ja.aabb.maxy=Ja.worldCOMy+Pc}else{var ac=d.polygon;if(ac.zip_gverts&&null!=ac.body){ac.zip_gverts=!1;ac.validate_lverts();var Fa=ac.body;Fa.zip_axis&&(Fa.zip_axis=!1,Fa.axisx=
Math.sin(Fa.rot),Fa.axisy=Math.cos(Fa.rot));for(var kb=ac.lverts.next,C=ac.gverts.next;null!=C;){var Ra=C,ob=kb,kb=kb.next;Ra.x=ac.body.posx+(ac.body.axisy*ob.x-ac.body.axisx*ob.y);Ra.y=ac.body.posy+(ob.x*ac.body.axisx+ob.y*ac.body.axisy);C=C.next}}if(null==ac.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");var ta=ac.gverts.next;ac.aabb.minx=ta.x;ac.aabb.miny=ta.y;ac.aabb.maxx=ta.x;ac.aabb.maxy=ta.y;for(var pb=ac.gverts.next.next;null!=pb;){var Aa=pb;Aa.x<ac.aabb.minx&&
(ac.aabb.minx=Aa.x);Aa.x>ac.aabb.maxx&&(ac.aabb.maxx=Aa.x);Aa.y<ac.aabb.miny&&(ac.aabb.miny=Aa.y);Aa.y>ac.aabb.maxy&&(ac.aabb.maxy=Aa.y);pb=pb.next}}var Q=d.aabb;ra.minx=Q.minx-3;ra.miny=Q.miny-3;ra.maxx=Q.maxx+3;ra.maxy=Q.maxy+3;var aa=(c.dyn=1==d.body.type?!1:!d.body.component.sleeping)?this.dtree:this.stree;if(null==aa.root)aa.root=c,aa.root.parent=null;else{for(var Na=c.aabb,ba=aa.root;null!=ba.child1;){var Za=ba.child1,Pa=ba.child2,Hb=ba.aabb,bb=2*(Hb.maxx-Hb.minx+(Hb.maxy-Hb.miny)),ib=re.tmpaabb,
Oa=ba.aabb;ib.minx=Oa.minx<Na.minx?Oa.minx:Na.minx;ib.miny=Oa.miny<Na.miny?Oa.miny:Na.miny;ib.maxx=Oa.maxx>Na.maxx?Oa.maxx:Na.maxx;ib.maxy=Oa.maxy>Na.maxy?Oa.maxy:Na.maxy;var Va=re.tmpaabb,D=2*(Va.maxx-Va.minx+(Va.maxy-Va.miny)),lb=2*D,Ta=2*(D-bb),jb=re.tmpaabb,gb=Za.aabb;jb.minx=Na.minx<gb.minx?Na.minx:gb.minx;jb.miny=Na.miny<gb.miny?Na.miny:gb.miny;jb.maxx=Na.maxx>gb.maxx?Na.maxx:gb.maxx;jb.maxy=Na.maxy>gb.maxy?Na.maxy:gb.maxy;var Ga;if(null==Za.child1){var Eb=re.tmpaabb;Ga=2*(Eb.maxx-Eb.minx+(Eb.maxy-
Eb.miny))+Ta}else{var cb=Za.aabb,zb=re.tmpaabb;Ga=2*(zb.maxx-zb.minx+(zb.maxy-zb.miny))-2*(cb.maxx-cb.minx+(cb.maxy-cb.miny))+Ta}var Nc=re.tmpaabb,rd=Pa.aabb;Nc.minx=Na.minx<rd.minx?Na.minx:rd.minx;Nc.miny=Na.miny<rd.miny?Na.miny:rd.miny;Nc.maxx=Na.maxx>rd.maxx?Na.maxx:rd.maxx;Nc.maxy=Na.maxy>rd.maxy?Na.maxy:rd.maxy;var Ya;if(null==Pa.child1){var Ib=re.tmpaabb;Ya=2*(Ib.maxx-Ib.minx+(Ib.maxy-Ib.miny))+Ta}else{var ub=Pa.aabb,wb=re.tmpaabb;Ya=2*(wb.maxx-wb.minx+(wb.maxy-wb.miny))-2*(ub.maxx-ub.minx+
(ub.maxy-ub.miny))+Ta}if(lb<Ga&&lb<Ya)break;else ba=Ga<Ya?Za:Pa}var mb=ba,fb=mb.parent,B;null==Id.zpp_pool?B=new Id:(B=Id.zpp_pool,Id.zpp_pool=B.next,B.next=null);null==sb.zpp_pool?B.aabb=new sb:(B.aabb=sb.zpp_pool,sb.zpp_pool=B.aabb.next,B.aabb.next=null);B.moved=!1;B.synced=!1;B.first_sync=!1;B.parent=fb;var Bb=B.aabb,db=mb.aabb;Bb.minx=Na.minx<db.minx?Na.minx:db.minx;Bb.miny=Na.miny<db.miny?Na.miny:db.miny;Bb.maxx=Na.maxx>db.maxx?Na.maxx:db.maxx;Bb.maxy=Na.maxy>db.maxy?Na.maxy:db.maxy;B.height=
mb.height+1;null!=fb?(fb.child1==mb?fb.child1=B:fb.child2=B,B.child1=mb,B.child2=c,mb.parent=B,c.parent=B):(B.child1=mb,B.child2=c,mb.parent=B,c.parent=B,aa.root=B);for(ba=c.parent;null!=ba;){if(!(null==ba.child1||2>ba.height)){var ab=ba.child1,x=ba.child2,Nb=x.height-ab.height;if(1<Nb){var Jb=x.child1,qb=x.child2;x.child1=ba;x.parent=ba.parent;ba.parent=x;null!=x.parent?x.parent.child1==ba?x.parent.child1=x:x.parent.child2=x:aa.root=x;if(Jb.height>qb.height){x.child2=Jb;ba.child2=qb;qb.parent=ba;
var Xa=ba.aabb,Wa=ab.aabb,Ka=qb.aabb;Xa.minx=Wa.minx<Ka.minx?Wa.minx:Ka.minx;Xa.miny=Wa.miny<Ka.miny?Wa.miny:Ka.miny;Xa.maxx=Wa.maxx>Ka.maxx?Wa.maxx:Ka.maxx;Xa.maxy=Wa.maxy>Ka.maxy?Wa.maxy:Ka.maxy;var vb=x.aabb,eb=ba.aabb,Ob=Jb.aabb;vb.minx=eb.minx<Ob.minx?eb.minx:Ob.minx;vb.miny=eb.miny<Ob.miny?eb.miny:Ob.miny;vb.maxx=eb.maxx>Ob.maxx?eb.maxx:Ob.maxx;vb.maxy=eb.maxy>Ob.maxy?eb.maxy:Ob.maxy;var nb=ab.height,Vb=qb.height;ba.height=1+(nb>Vb?nb:Vb);var Cb=ba.height,Mb=Jb.height;x.height=1+(Cb>Mb?Cb:Mb)}else{x.child2=
qb;ba.child2=Jb;Jb.parent=ba;var yb=ba.aabb,rb=ab.aabb,Xb=Jb.aabb;yb.minx=rb.minx<Xb.minx?rb.minx:Xb.minx;yb.miny=rb.miny<Xb.miny?rb.miny:Xb.miny;yb.maxx=rb.maxx>Xb.maxx?rb.maxx:Xb.maxx;yb.maxy=rb.maxy>Xb.maxy?rb.maxy:Xb.maxy;var Gb=x.aabb,Pb=ba.aabb,R=qb.aabb;Gb.minx=Pb.minx<R.minx?Pb.minx:R.minx;Gb.miny=Pb.miny<R.miny?Pb.miny:R.miny;Gb.maxx=Pb.maxx>R.maxx?Pb.maxx:R.maxx;Gb.maxy=Pb.maxy>R.maxy?Pb.maxy:R.maxy;var Tb=ab.height,Ub=Jb.height;ba.height=1+(Tb>Ub?Tb:Ub);var ae=ba.height,Lb=qb.height;x.height=
1+(ae>Lb?ae:Lb)}ba=x}else if(-1>Nb){var Ic=ab.child1,sc=ab.child2;ab.child1=ba;ab.parent=ba.parent;ba.parent=ab;null!=ab.parent?ab.parent.child1==ba?ab.parent.child1=ab:ab.parent.child2=ab:aa.root=ab;if(Ic.height>sc.height){ab.child2=Ic;ba.child1=sc;sc.parent=ba;var Sb=ba.aabb,Wb=x.aabb,bc=sc.aabb;Sb.minx=Wb.minx<bc.minx?Wb.minx:bc.minx;Sb.miny=Wb.miny<bc.miny?Wb.miny:bc.miny;Sb.maxx=Wb.maxx>bc.maxx?Wb.maxx:bc.maxx;Sb.maxy=Wb.maxy>bc.maxy?Wb.maxy:bc.maxy;var me=ab.aabb,Kb=ba.aabb,dc=Ic.aabb;me.minx=
Kb.minx<dc.minx?Kb.minx:dc.minx;me.miny=Kb.miny<dc.miny?Kb.miny:dc.miny;me.maxx=Kb.maxx>dc.maxx?Kb.maxx:dc.maxx;me.maxy=Kb.maxy>dc.maxy?Kb.maxy:dc.maxy;var Ec=x.height,vc=sc.height;ba.height=1+(Ec>vc?Ec:vc);var N=ba.height,oc=Ic.height;ab.height=1+(N>oc?N:oc)}else{ab.child2=sc;ba.child1=Ic;Ic.parent=ba;var ic=ba.aabb,ne=x.aabb,Jd=Ic.aabb;ic.minx=ne.minx<Jd.minx?ne.minx:Jd.minx;ic.miny=ne.miny<Jd.miny?ne.miny:Jd.miny;ic.maxx=ne.maxx>Jd.maxx?ne.maxx:Jd.maxx;ic.maxy=ne.maxy>Jd.maxy?ne.maxy:Jd.maxy;var fe=
ab.aabb,gc=ba.aabb,Qc=sc.aabb;fe.minx=gc.minx<Qc.minx?gc.minx:Qc.minx;fe.miny=gc.miny<Qc.miny?gc.miny:Qc.miny;fe.maxx=gc.maxx>Qc.maxx?gc.maxx:Qc.maxx;fe.maxy=gc.maxy>Qc.maxy?gc.maxy:Qc.maxy;var wc=x.height,yc=Ic.height;ba.height=1+(wc>yc?wc:yc);var Cc=ba.height,mc=sc.height;ab.height=1+(Cc>mc?Cc:mc)}ba=ab}}var ze=ba.child1,Bc=ba.child2,Gc=ze.height,fc=Bc.height;ba.height=1+(Gc>fc?Gc:fc);var Hc=ba.aabb,Qb=ze.aabb,Zb=Bc.aabb;Hc.minx=Qb.minx<Zb.minx?Qb.minx:Zb.minx;Hc.miny=Qb.miny<Zb.miny?Qb.miny:Zb.miny;
Hc.maxx=Qb.maxx>Zb.maxx?Qb.maxx:Zb.maxx;Hc.maxy=Qb.maxy>Zb.maxy?Qb.maxy:Zb.maxy;ba=ba.parent}}c.synced=!1;c=c.snext}for(;null!=this.syncs;){var Pd=this.syncs;this.syncs=Pd.snext;Pd.snext=null;var ec=Pd;if(!ec.moved){ec.moved=!1;var hb=ec.shape;if(!hb.body.component.sleeping){var ve=ec.aabb,jd=null;null!=this.dtree.root&&(this.dtree.root.next=jd,jd=this.dtree.root);for(;null!=jd;){var zc=jd,jd=zc.next;zc.next=null;var cd=zc;if(cd!=ec)if(null==cd.child1){var Jc=cd.shape;if(Jc.body!=hb.body&&!(1==Jc.body.type&&
1==hb.body.type)){var xb=cd.aabb;if(xb.miny<=ve.maxy&&ve.miny<=xb.maxy&&xb.minx<=ve.maxx&&ve.minx<=xb.maxx){var sd,nc;hb.id<Jc.id?(sd=hb.id,nc=Jc.id):(sd=Jc.id,nc=hb.id);for(var be=null,Lc=(hb.pairs.length<Jc.pairs.length?hb:Jc).pairs.head;null!=Lc;){var kd=Lc.elt;if(kd.id==sd&&kd.di==nc){be=kd;break}Lc=Lc.next}if(null!=be)be.sleeping&&(be.sleeping=!1,be.next=this.pairs,this.pairs=be,be.first=!0);else{null==Ld.zpp_pool?be=new Ld:(be=Ld.zpp_pool,Ld.zpp_pool=be.next,be.next=null);be.n1=ec;be.n2=cd;
be.id=sd;be.di=nc;be.next=this.pairs;this.pairs=be;be.first=!0;var tc=hb.pairs,Rc;null==qc.zpp_pool?Rc=new qc:(Rc=qc.zpp_pool,qc.zpp_pool=Rc.next,Rc.next=null);Rc.elt=be;var Yc=Rc;Yc.next=tc.head;tc.head=Yc;tc.modified=!0;tc.length++;var Dc=Jc.pairs,pc;null==qc.zpp_pool?pc=new qc:(pc=qc.zpp_pool,qc.zpp_pool=pc.next,pc.next=null);pc.elt=be;var Kc=pc;Kc.next=Dc.head;Dc.head=Kc;Dc.modified=!0;Dc.length++}}}}else{var Fc=cd.aabb;Fc.miny<=ve.maxy&&ve.miny<=Fc.maxy&&Fc.minx<=ve.maxx&&ve.minx<=Fc.maxx&&(null!=
cd.child1&&(cd.child1.next=jd,jd=cd.child1),null!=cd.child2&&(cd.child2.next=jd,jd=cd.child2))}}null!=this.stree.root&&(this.stree.root.next=jd,jd=this.stree.root);for(;null!=jd;){var $c=jd,jd=$c.next;$c.next=null;var hc=$c;if(hc!=ec)if(null==hc.child1){var Sc=hc.shape;if(Sc.body!=hb.body&&!(1==Sc.body.type&&1==hb.body.type)){var Bd=hc.aabb;if(Bd.miny<=ve.maxy&&ve.miny<=Bd.maxy&&Bd.minx<=ve.maxx&&ve.minx<=Bd.maxx){var Yf,Tc;hb.id<Sc.id?(Yf=hb.id,Tc=Sc.id):(Yf=Sc.id,Tc=hb.id);for(var Rb=null,Rd=(hb.pairs.length<
Sc.pairs.length?hb:Sc).pairs.head;null!=Rd;){var Cd=Rd.elt;if(Cd.id==Yf&&Cd.di==Tc){Rb=Cd;break}Rd=Rd.next}if(null!=Rb)Rb.sleeping&&(Rb.sleeping=!1,Rb.next=this.pairs,this.pairs=Rb,Rb.first=!0);else{null==Ld.zpp_pool?Rb=new Ld:(Rb=Ld.zpp_pool,Ld.zpp_pool=Rb.next,Rb.next=null);Rb.n1=ec;Rb.n2=hc;Rb.id=Yf;Rb.di=Tc;Rb.next=this.pairs;this.pairs=Rb;Rb.first=!0;var md=hb.pairs,ad;null==qc.zpp_pool?ad=new qc:(ad=qc.zpp_pool,qc.zpp_pool=ad.next,ad.next=null);ad.elt=Rb;var td=ad;td.next=md.head;md.head=td;
md.modified=!0;md.length++;var Ac=Sc.pairs,xd;null==qc.zpp_pool?xd=new qc:(xd=qc.zpp_pool,qc.zpp_pool=xd.next,xd.next=null);xd.elt=Rb;var Vd=xd;Vd.next=Ac.head;Ac.head=Vd;Ac.modified=!0;Ac.length++}}}}else{var pd=hc.aabb;pd.miny<=ve.maxy&&ve.miny<=pd.maxy&&pd.minx<=ve.maxx&&ve.minx<=pd.maxx&&(null!=hc.child1&&(hc.child1.next=jd,jd=hc.child1),null!=hc.child2&&(hc.child2.next=jd,jd=hc.child2))}}}}}for(;null!=this.moves;){var bd=this.moves;this.moves=bd.mnext;bd.mnext=null;var gd=bd;gd.moved=!1;var dd=
gd.shape;if(!dd.body.component.sleeping){var he=gd.aabb,ff=null;null!=this.dtree.root&&(this.dtree.root.next=ff,ff=this.dtree.root);for(;null!=ff;){var Zc=ff,ff=Zc.next;Zc.next=null;var Ff=Zc;if(Ff!=gd)if(null==Ff.child1){var Uc=Ff.shape;if(Uc.body!=dd.body&&!(1==Uc.body.type&&1==dd.body.type)){var xc=Ff.aabb;if(xc.miny<=he.maxy&&he.miny<=xc.maxy&&xc.minx<=he.maxx&&he.minx<=xc.maxx){var Oc,je;dd.id<Uc.id?(Oc=dd.id,je=Uc.id):(Oc=Uc.id,je=dd.id);for(var Fe=null,Yd=(dd.pairs.length<Uc.pairs.length?dd:
Uc).pairs.head;null!=Yd;){var Dd=Yd.elt;if(Dd.id==Oc&&Dd.di==je){Fe=Dd;break}Yd=Yd.next}if(null!=Fe)Fe.sleeping&&(Fe.sleeping=!1,Fe.next=this.pairs,this.pairs=Fe,Fe.first=!0);else{null==Ld.zpp_pool?Fe=new Ld:(Fe=Ld.zpp_pool,Ld.zpp_pool=Fe.next,Fe.next=null);Fe.n1=gd;Fe.n2=Ff;Fe.id=Oc;Fe.di=je;Fe.next=this.pairs;this.pairs=Fe;Fe.first=!0;var ce=dd.pairs,Wc;null==qc.zpp_pool?Wc=new qc:(Wc=qc.zpp_pool,qc.zpp_pool=Wc.next,Wc.next=null);Wc.elt=Fe;var od=Wc;od.next=ce.head;ce.head=od;ce.modified=!0;ce.length++;
var zd=Uc.pairs,oe;null==qc.zpp_pool?oe=new qc:(oe=qc.zpp_pool,qc.zpp_pool=oe.next,oe.next=null);oe.elt=Fe;var yd=oe;yd.next=zd.head;zd.head=yd;zd.modified=!0;zd.length++}}}}else{var ie=Ff.aabb;ie.miny<=he.maxy&&he.miny<=ie.maxy&&ie.minx<=he.maxx&&he.minx<=ie.maxx&&(null!=Ff.child1&&(Ff.child1.next=ff,ff=Ff.child1),null!=Ff.child2&&(Ff.child2.next=ff,ff=Ff.child2))}}null!=this.stree.root&&(this.stree.root.next=ff,ff=this.stree.root);for(;null!=ff;){var pe=ff,ff=pe.next;pe.next=null;var cc=pe;if(cc!=
gd)if(null==cc.child1){var hd=cc.shape;if(hd.body!=dd.body&&!(1==hd.body.type&&1==dd.body.type)){var ud=cc.aabb;if(ud.miny<=he.maxy&&he.miny<=ud.maxy&&ud.minx<=he.maxx&&he.minx<=ud.maxx){var Td,Fd;dd.id<hd.id?(Td=dd.id,Fd=hd.id):(Td=hd.id,Fd=dd.id);for(var Gd=null,Xc=(dd.pairs.length<hd.pairs.length?dd:hd).pairs.head;null!=Xc;){var Od=Xc.elt;if(Od.id==Td&&Od.di==Fd){Gd=Od;break}Xc=Xc.next}if(null!=Gd)Gd.sleeping&&(Gd.sleeping=!1,Gd.next=this.pairs,this.pairs=Gd,Gd.first=!0);else{null==Ld.zpp_pool?
Gd=new Ld:(Gd=Ld.zpp_pool,Ld.zpp_pool=Gd.next,Gd.next=null);Gd.n1=gd;Gd.n2=cc;Gd.id=Td;Gd.di=Fd;Gd.next=this.pairs;this.pairs=Gd;Gd.first=!0;var ed=dd.pairs,Wd;null==qc.zpp_pool?Wd=new qc:(Wd=qc.zpp_pool,qc.zpp_pool=Wd.next,Wd.next=null);Wd.elt=Gd;var le=Wd;le.next=ed.head;ed.head=le;ed.modified=!0;ed.length++;var qd=hd.pairs,id;null==qc.zpp_pool?id=new qc:(id=qc.zpp_pool,qc.zpp_pool=id.next,id.next=null);id.elt=Gd;var ge=id;ge.next=qd.head;qd.head=ge;qd.modified=!0;qd.length++}}}}else{var Qd=cc.aabb;
Qd.miny<=he.maxy&&he.miny<=Qd.maxy&&Qd.minx<=he.maxx&&he.minx<=Qd.maxx&&(null!=cc.child1&&(cc.child1.next=ff,ff=cc.child1),null!=cc.child2&&(cc.child2.next=ff,ff=cc.child2))}}}}for(var Ad=null,$b=this.pairs;null!=$b;){var Zd;if($b.first)Zd=!1;else{var Ge=$b.n1.aabb,Ed=$b.n2.aabb;Zd=!(Ed.miny<=Ge.maxy&&Ge.miny<=Ed.maxy&&Ed.minx<=Ge.maxx&&Ge.minx<=Ed.maxx)}if(Zd){null==Ad?this.pairs=$b.next:Ad.next=$b.next;for(var He=$b.n1.shape.pairs,$d=null,ld=He.head;null!=ld;){if(ld.elt==$b){var vd,Nd;null==$d?
(vd=He.head,Nd=vd.next,He.head=Nd,null==He.head&&(He.pushmod=!0)):(vd=$d.next,Nd=vd.next,$d.next=Nd,null==Nd&&(He.pushmod=!0));var Be=vd;Be.elt=null;Be.next=qc.zpp_pool;qc.zpp_pool=Be;He.modified=!0;He.length--;He.pushmod=!0;break}$d=ld;ld=ld.next}for(var uc=$b.n2.shape.pairs,qe=null,ke=uc.head;null!=ke;){if(ke.elt==$b){var de,Fb;null==qe?(de=uc.head,Fb=de.next,uc.head=Fb,null==uc.head&&(uc.pushmod=!0)):(de=qe.next,Fb=de.next,qe.next=Fb,null==Fb&&(uc.pushmod=!0));var se=de;se.elt=null;se.next=qc.zpp_pool;
qc.zpp_pool=se;uc.modified=!0;uc.length--;uc.pushmod=!0;break}qe=ke;ke=ke.next}var We=$b.next;null!=$b.arb&&($b.arb.pair=null);$b.arb=null;var ee=$b;ee.n1=ee.n2=null;ee.sleeping=!1;ee.next=Ld.zpp_pool;Ld.zpp_pool=ee;$b=We}else{var Hd=$b.n1.shape,jc=Hd.body,te=$b.n2.shape,Ie=te.body;if(!$b.first&&(jc.component.sleeping||1==jc.type)&&(Ie.component.sleeping||1==Ie.type))$b.sleeping=!0,null==Ad?this.pairs=$b.next:Ad.next=$b.next;else{$b.first=!1;var Xd=Hd.aabb,fd=te.aabb;if(fd.miny<=Xd.maxy&&Xd.miny<=
fd.maxy&&fd.minx<=Xd.maxx&&Xd.minx<=fd.maxx){var Ud=$b.arb;$b.arb=b?a.narrowPhase(Hd,te,2!=jc.type||2!=Ie.type,$b.arb,!1):a.continuousEvent(Hd,te,2!=jc.type||2!=Ie.type,$b.arb,!1);null==$b.arb?null!=Ud&&(Ud.pair=null):$b.arb.pair=$b}Ad=$b}$b=$b.next}}},bodiesInAABB:function(a,b,c,d,e){this.sync_broadphase();this.updateAABBShape(a);a=this.aabbShape.zpp_inner.aabb;e=null==e?new wg:e;null==this.failed&&(this.failed=new wg);if(null!=this.stree.root){null==this.treeStack&&(this.treeStack=new ti);for(this.treeStack.add(this.stree.root);null!=
this.treeStack.head;){var f=this.treeStack.pop_unsafe(),g=f.aabb;if(g.minx>=a.minx&&g.miny>=a.miny&&g.maxx<=a.maxx&&g.maxy<=a.maxy)if(null==f.child1)null!=d?(g=f.shape.filter,g=0!=(g.collisionMask&d.collisionGroup)?0!=(d.collisionMask&g.collisionGroup):!1):g=!0,g&&(g=f.shape.body.outer,e.has(g)||e.push(g));else{null==this.treeStack2&&(this.treeStack2=new ti);for(this.treeStack2.add(f);null!=this.treeStack2.head;)g=this.treeStack2.pop_unsafe(),null==g.child1?(null!=d?(f=g.shape.filter,f=0!=(f.collisionMask&
d.collisionGroup)?0!=(d.collisionMask&f.collisionGroup):!1):f=!0,f&&(g=g.shape.body.outer,e.has(g)||e.push(g))):(null!=g.child1&&this.treeStack2.add(g.child1),null!=g.child2&&this.treeStack2.add(g.child2))}else if(g=f.aabb,a.miny<=g.maxy&&g.miny<=a.maxy&&a.minx<=g.maxx&&g.minx<=a.maxx)if(null==f.child1){var g=f.shape.body.outer,j;null!=d?(j=f.shape.filter,j=0!=(j.collisionMask&d.collisionGroup)?0!=(d.collisionMask&j.collisionGroup):!1):j=!0;j&&(b?c?this.failed.has(g)||(f=ka.containTest(this.aabbShape.zpp_inner,
f.shape),!e.has(g)&&f?e.push(g):f||(e.remove(g),this.failed.push(g))):!e.has(g)&&ka.testCollide_safe(f.shape,this.aabbShape.zpp_inner)&&e.push(g):c?this.failed.has(g)||(f=f.shape.aabb,f=f.minx>=a.minx&&f.miny>=a.miny&&f.maxx<=a.maxx&&f.maxy<=a.maxy,!e.has(g)&&f?e.push(g):f||(e.remove(g),this.failed.push(g))):(e.has(g)?f=!1:(f=f.shape.aabb,f=f.minx>=a.minx&&f.miny>=a.miny&&f.maxx<=a.maxx?f.maxy<=a.maxy:!1),f&&e.push(g)))}else null!=f.child1&&this.treeStack.add(f.child1),null!=f.child2&&this.treeStack.add(f.child2)}}if(null!=
this.dtree.root){null==this.treeStack&&(this.treeStack=new ti);for(this.treeStack.add(this.dtree.root);null!=this.treeStack.head;)if(f=this.treeStack.pop_unsafe(),g=f.aabb,g.minx>=a.minx&&g.miny>=a.miny&&g.maxx<=a.maxx&&g.maxy<=a.maxy)if(null==f.child1)null!=d?(g=f.shape.filter,g=0!=(g.collisionMask&d.collisionGroup)?0!=(d.collisionMask&g.collisionGroup):!1):g=!0,g&&(g=f.shape.body.outer,e.has(g)||e.push(g));else{null==this.treeStack2&&(this.treeStack2=new ti);for(this.treeStack2.add(f);null!=this.treeStack2.head;)g=
this.treeStack2.pop_unsafe(),null==g.child1?(null!=d?(f=g.shape.filter,f=0!=(f.collisionMask&d.collisionGroup)?0!=(d.collisionMask&f.collisionGroup):!1):f=!0,f&&(g=g.shape.body.outer,e.has(g)||e.push(g))):(null!=g.child1&&this.treeStack2.add(g.child1),null!=g.child2&&this.treeStack2.add(g.child2))}else g=f.aabb,a.miny<=g.maxy&&g.miny<=a.maxy&&a.minx<=g.maxx&&g.minx<=a.maxx&&(null==f.child1?(g=f.shape.body.outer,null!=d?(j=f.shape.filter,j=0!=(j.collisionMask&d.collisionGroup)?0!=(d.collisionMask&
j.collisionGroup):!1):j=!0,j&&(b?c?this.failed.has(g)||(f=ka.containTest(this.aabbShape.zpp_inner,f.shape),!e.has(g)&&f?e.push(g):f||(e.remove(g),this.failed.push(g))):!e.has(g)&&ka.testCollide_safe(f.shape,this.aabbShape.zpp_inner)&&e.push(g):c?this.failed.has(g)||(f=f.shape.aabb,f=f.minx>=a.minx&&f.miny>=a.miny&&f.maxx<=a.maxx&&f.maxy<=a.maxy,!e.has(g)&&f?e.push(g):f||(e.remove(g),this.failed.push(g))):(e.has(g)?f=!1:(f=f.shape.aabb,f=f.minx>=a.minx&&f.miny>=a.miny&&f.maxx<=a.maxx?f.maxy<=a.maxy:
!1),f&&e.push(g)))):(null!=f.child1&&this.treeStack.add(f.child1),null!=f.child2&&this.treeStack.add(f.child2)))}this.failed.clear();return e},bodiesInCircle:function(a,b,c,d,e,f){this.sync_broadphase();this.updateCircShape(a,b,c);a=this.circShape.zpp_inner.aabb;f=null==f?new wg:f;null==this.failed&&(this.failed=new wg);if(null!=this.stree.root){null==this.treeStack&&(this.treeStack=new ti);for(this.treeStack.add(this.stree.root);null!=this.treeStack.head;)if(b=this.treeStack.pop_unsafe(),c=b.aabb,
a.miny<=c.maxy&&c.miny<=a.maxy&&a.minx<=c.maxx&&c.minx<=a.maxx)if(null==b.child1){var c=b.shape.body.outer,g;null!=e?(g=b.shape.filter,g=0!=(g.collisionMask&e.collisionGroup)?0!=(e.collisionMask&g.collisionGroup):!1):g=!0;g&&(d?this.failed.has(c)||(b=ka.containTest(this.circShape.zpp_inner,b.shape),!f.has(c)&&b?f.push(c):b||(f.remove(c),this.failed.push(c))):!f.has(c)&&ka.testCollide_safe(b.shape,this.circShape.zpp_inner)&&f.push(c))}else null!=b.child1&&this.treeStack.add(b.child1),null!=b.child2&&
this.treeStack.add(b.child2)}if(null!=this.dtree.root){null==this.treeStack&&(this.treeStack=new ti);for(this.treeStack.add(this.dtree.root);null!=this.treeStack.head;)b=this.treeStack.pop_unsafe(),c=b.aabb,a.miny<=c.maxy&&c.miny<=a.maxy&&a.minx<=c.maxx&&c.minx<=a.maxx&&(null==b.child1?(c=b.shape.body.outer,null!=e?(g=b.shape.filter,g=0!=(g.collisionMask&e.collisionGroup)?0!=(e.collisionMask&g.collisionGroup):!1):g=!0,g&&(d?this.failed.has(c)||(b=ka.containTest(this.circShape.zpp_inner,b.shape),!f.has(c)&&
b?f.push(c):b||(f.remove(c),this.failed.push(c))):!f.has(c)&&ka.testCollide_safe(b.shape,this.circShape.zpp_inner)&&f.push(c))):(null!=b.child1&&this.treeStack.add(b.child1),null!=b.child2&&this.treeStack.add(b.child2)))}this.failed.clear();return f},__class__:Mm});var Bg=function(){this.waket=0;this.sleep=!1;this.comps=null;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.comps=new Vo};i["zpp_nape.space.ZPP_Island"]=Bg;Bg.__name__=["zpp_nape","space","ZPP_Island"];Bg.prototype=
{pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},__class__:Bg};var Ef=function(){this.woken=!1;this.waket=0;this.sleeping=!1;this.body=this.constraint=this.island=null;this.isBody=!1;this.rank=0;this.next=this.parent=null;this.sleeping=!1;this.island=null;this.parent=this;this.rank=0;this.woken=!1};i["zpp_nape.space.ZPP_Component"]=Ef;Ef.__name__=["zpp_nape","space","ZPP_Component"];Ef.prototype={__class__:Ef};var Lf=function(){this.freed=
this.lazydel=!1;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.int1=this.int2=this.next=null;this.id=this.di=0;this.arbiters=new Lk};i["zpp_nape.space.ZPP_CallbackSet"]=Lf;Lf.__name__=["zpp_nape","space","ZPP_CallbackSet"];Lf.get=function(a,b){var c;null==Lf.zpp_pool?c=new Lf:(c=Lf.zpp_pool,Lf.zpp_pool=c.next,c.next=null);c.freed=!1;c.lazydel=!1;c.COLLISIONstate=1;c.COLLISIONstamp=0;c.SENSORstate=1;c.SENSORstamp=0;c.FLUIDstate=1;c.FLUIDstamp=0;a.id<b.id?(c.int1=a,c.int2=b):(c.int1=b,
c.int2=a);c.id=c.int1.id;c.di=c.int2.id;return c};Lf.prototype={remove_arb:function(a){for(var b=this.arbiters,c=null,d=b.head;null!=d;){if(d.elt==a){null==c?(a=b.head,d=a.next,b.head=d,null==b.head&&(b.pushmod=!0)):(a=c.next,d=a.next,c.next=d,null==d&&(b.pushmod=!0));c=a;c.elt=null;c.next=la.zpp_pool;la.zpp_pool=c;b.modified=!0;b.length--;b.pushmod=!0;break}c=d;d=d.next}},empty_arb:function(a){var b;b=!0;for(var c=this.arbiters.head;null!=c;)if(0==(c.elt.type&a))c=c.next;else{b=!1;break}return b},
__class__:Lf};var Wo=function(a){this.cbsets=this.space=null;null==lg.zpp_pool?this.cbsets=new lg:(this.cbsets=lg.zpp_pool,lg.zpp_pool=this.cbsets.next,this.cbsets.next=null);this.cbsets.lt=ea.setlt;this.space=a};i["zpp_nape.space.ZPP_CbSetManager"]=Wo;Wo.__name__=["zpp_nape","space","ZPP_CbSetManager"];Wo.prototype={get:function(a){if(null==a.head)return null;var b;null==ea.zpp_pool?b=new ea:(b=ea.zpp_pool,ea.zpp_pool=b.next,b.next=null);var c=b.cbTypes;b.cbTypes=a;var d=this.cbsets.find_weak(b);
null!=d?a=d.data:(a=ea.get(a),this.cbsets.insert(a),a.manager=this);b.cbTypes=c;b.listeners.clear();b.zip_listeners=!0;b.bodylisteners.clear();b.zip_bodylisteners=!0;b.conlisteners.clear();for(b.zip_conlisteners=!0;null!=b.cbTypes.head;)b.cbTypes.pop_unsafe().cbsets.remove(b);b.next=ea.zpp_pool;ea.zpp_pool=b;return a},remove:function(a){for(this.cbsets.remove(a);null!=a.cbpairs.head;){var b=a.cbpairs.pop_unsafe();b.a!=b.b&&(a==b.a?b.b.cbpairs.remove(b):b.a.cbpairs.remove(b));b.a=b.b=null;b.listeners.clear();
b.next=O.zpp_pool;O.zpp_pool=b}a.manager=null},__class__:Wo};var Yn=function(a,b){this.precb=this.prelisteners=null;this.continuous=!1;this.toiEvents=null;this.pre_dt=0;this.c_arbiters_true=this.c_arbiters_false=this.f_arbiters=this.s_arbiters=this.live=this.wrap_live=this.live_constraints=this.wrap_livecon=this.staticsleep=this.islands=this.listeners=this.wrap_listeners=this.callbacks=this.callbackset_list=this.cbsets=null;this.sortcontacts=!1;this.time=0;this.midstep=!1;this.global_lin_drag=this.global_ang_drag=
this.stamp=0;this.bodies=this.wrap_bodies=this.compounds=this.wrap_compounds=this.constraints=this.wrap_constraints=this.kinematics=this.bphase=this.__static=null;this.gravityx=this.gravityy=0;this.outer=null;this.toiEvents=new Xo;this.global_ang_drag=this.global_lin_drag=0.015;Zd.internal=!0;this.precb=new ul;this.precb.zpp_inner=new Zd;Zd.internal=!1;this.sortcontacts=!0;this.pre_dt=0;var c;null!=b?(null==l.Broadphase_DYNAMIC_AABB_TREE&&(l.internal=!0,l.Broadphase_DYNAMIC_AABB_TREE=new rj,l.internal=
!1),c=b==l.Broadphase_DYNAMIC_AABB_TREE):c=!0;c?this.bphase=new Mm(this):(null==l.Broadphase_SWEEP_AND_PRUNE&&(l.internal=!0,l.Broadphase_SWEEP_AND_PRUNE=new rj,l.internal=!1),b==l.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new Nm(this)));this.time=0;null!=a?(this.gravityx=a.x,this.gravityy=a.y):this.gravityy=this.gravityx=0;this.bodies=new Wi;this.wrap_bodies=ah.get(this.bodies);this.wrap_bodies.zpp_inner.adder=v(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=v(this,this.bodies_subber);
this.wrap_bodies.zpp_inner._modifiable=v(this,this.bodies_modifiable);this.compounds=new Om;this.wrap_compounds=Nh.get(this.compounds);this.wrap_compounds.zpp_inner.adder=v(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=v(this,this.compounds_subber);this.wrap_compounds.zpp_inner._modifiable=v(this,this.compounds_modifiable);this.kinematics=new Wi;this.c_arbiters_true=new Pm;this.c_arbiters_false=new Pm;this.f_arbiters=new Yo;this.s_arbiters=new Zo;this.islands=new Bg;this.live=new Wi;
this.wrap_live=ah.get(this.live,!0);this.staticsleep=new Wi;this.constraints=new oi;this.wrap_constraints=$g.get(this.constraints);this.wrap_constraints.zpp_inner.adder=v(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=v(this,this.constraints_subber);this.wrap_constraints.zpp_inner._modifiable=v(this,this.constraints_modifiable);this.live_constraints=new oi;this.wrap_livecon=$g.get(this.live_constraints,!0);this.__static=hi.__static();this.__static.zpp_inner.space=this;this.callbacks=
new Zd;this.midstep=!1;this.listeners=new Qm;this.wrap_listeners=Kh.get(this.listeners);this.wrap_listeners.zpp_inner.adder=v(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=v(this,this.listeners_subber);this.wrap_listeners.zpp_inner._modifiable=v(this,this.listeners_modifiable);this.callbackset_list=new Lf;this.mrca1=new pi;this.mrca2=new pi;this.prelisteners=new Kj;this.cbsets=new Wo(this)};i["zpp_nape.space.ZPP_Space"]=Yn;Yn.__name__=["zpp_nape","space","ZPP_Space"];Yn.prototype=
{bodies_adder:function(a){if(null!=a.zpp_inner.compound)throw new h("Error: Cannot set the space of a Body belonging to a Compound, only the root Compound space can be set");return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(a),this.addBody(a.zpp_inner),!0):!1},bodies_subber:function(a){this.remBody(a.zpp_inner)},bodies_modifiable:function(){if(this.midstep)throw new h("Error: Space::bodies cannot be set during space step()");},compounds_adder:function(a){if(null!=
a.zpp_inner.compound)throw new h("Error: Cannot set the space of an inner Compound, only the root Compound space can be set");return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_compounds.remove(a),this.addCompound(a.zpp_inner),!0):!1},compounds_subber:function(a){this.remCompound(a.zpp_inner)},compounds_modifiable:function(){if(this.midstep)throw new h("Error: Space::compounds cannot be set during space step()");},constraints_adder:function(a){if(null!=a.zpp_inner.compound)throw new h("Error: Cannot set the space of a Constraint belonging to a Compound, only the root Compound space can be set");
return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(a),this.addConstraint(a.zpp_inner),!0):!1},constraints_subber:function(a){this.remConstraint(a.zpp_inner)},constraints_modifiable:function(){if(this.midstep)throw new h("Error: Space::constraints cannot be set during space step()");},listeners_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(a),this.addListener(a.zpp_inner),
!0):!1},listeners_subber:function(a){this.remListener(a.zpp_inner)},listeners_modifiable:function(){if(this.midstep)throw new h("Error: Space::listeners cannot be set during space step()");},addListener:function(a){a.space=this;a.addedToSpace()},remListener:function(a){a.removedFromSpace();a.space=null},add_callbackset:function(a){var b=a.int1.cbsets,c;null==Xc.zpp_pool?c=new Xc:(c=Xc.zpp_pool,Xc.zpp_pool=c.next,c.next=null);c.elt=a;c.next=b.head;b.head=c;b.modified=!0;b.length++;b=a.int2.cbsets;
null==Xc.zpp_pool?c=new Xc:(c=Xc.zpp_pool,Xc.zpp_pool=c.next,c.next=null);c.elt=a;c.next=b.head;b.head=c;b.modified=!0;b.length++;b=this.callbackset_list;a._inuse=!0;a.next=b.next;b.next=a;b.modified=!0;b.length++},remove_callbackset:function(a){a.lazydel=!0;for(var b=a.int1.cbsets,c=null,d=b.head;null!=d;){if(d.elt==a){var e;null==c?(d=b.head,e=d.next,b.head=e,null==b.head&&(b.pushmod=!0)):(d=c.next,e=d.next,c.next=e,null==e&&(b.pushmod=!0));c=d;c.elt=null;c.next=Xc.zpp_pool;Xc.zpp_pool=c;b.modified=
!0;b.length--;b.pushmod=!0;break}c=d;d=d.next}b=a.int2.cbsets;c=null;for(d=b.head;null!=d;){if(d.elt==a){null==c?(a=b.head,d=a.next,b.head=d,null==b.head&&(b.pushmod=!0)):(a=c.next,d=a.next,c.next=d,null==d&&(b.pushmod=!0));a.elt=null;a.next=Xc.zpp_pool;Xc.zpp_pool=a;b.modified=!0;b.length--;b.pushmod=!0;break}c=d;d=d.next}},transmitType:function(a,b){a.world||(a.component.waket=this.stamp+(this.midstep?0:1),3==a.type&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!1));2==a.type?
this.live.remove(a):3==a.type?(this.kinematics.remove(a),this.staticsleep.remove(a)):1==a.type&&this.staticsleep.remove(a);a.type=b;3==a.type&&this.kinematics.add(a);1==a.type&&this.static_validation(a);a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),3==a.type&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0))},removed_shape:function(a,b){null==b&&(b=!1);var c=a.body;b||c.wake();for(var d=null,e=c.arbiters.head;null!=e;){var f=e.elt;if(f.ws1==
a||f.ws2==a){if(0!=f.present){this.MRCA_chains(f.ws1,f.ws2);for(e=this.mrca1.head;null!=e;){for(var g=e.elt,j=this.mrca2.head;null!=j;){var h=j.elt,i=g.cbSet,k=h.cbSet;i.validate();k.validate();for(var l=null,m=(i.cbpairs.length<k.cbpairs.length?i.cbpairs:k.cbpairs).head;null!=m;){var n=m.elt;if(n.a==i&&n.b==k||n.a==k&&n.b==i){l=n;break}m=m.next}null==l&&(null==O.zpp_pool?l=new O:(l=O.zpp_pool,O.zpp_pool=l.next,l.next=null),l.zip_listeners=!0,ea.setlt(i,k)?(l.a=i,l.b=k):(l.a=k,l.b=i),i.cbpairs.add(l),
k!=i&&k.cbpairs.add(l));l.zip_listeners&&(l.zip_listeners=!1,l.__validate());if(null!=l.listeners.head){h=je.get(g,h);h.remove_arb(f);f.present--;l=null;for(m=(i.cbpairs.length<k.cbpairs.length?i.cbpairs:k.cbpairs).head;null!=m;){n=m.elt;if(n.a==i&&n.b==k||n.a==k&&n.b==i){l=n;break}m=m.next}null==l&&(null==O.zpp_pool?l=new O:(l=O.zpp_pool,O.zpp_pool=l.next,l.next=null),l.zip_listeners=!0,ea.setlt(i,k)?(l.a=i,l.b=k):(l.a=k,l.b=i),i.cbpairs.add(l),k!=i&&k.cbpairs.add(l));l.zip_listeners&&(l.zip_listeners=
!1,l.__validate());for(i=l.listeners.head;null!=i;){n=i.elt;if(1==n.event&&0!=(n.itype&f.type)&&h.empty_arb(n.itype)){k=this.push_callback(n);k.event=1;var l=h.int1,m=h.int2,o=n.options1,r=l.cbTypes;o.nonemptyintersection(r,o.includes)&&!o.nonemptyintersection(r,o.excludes)?(n=n.options2,o=m.cbTypes,n=n.nonemptyintersection(o,n.includes)?!n.nonemptyintersection(o,n.excludes):!1):n=!1;n?(k.int1=l,k.int2=m):(k.int1=m,k.int2=l);k.set=h}i=i.next}null==h.arbiters.head&&this.remove_callbackset(h)}j=j.next}e=
e.next}}f.b1!=c&&2==f.b1.type&&(e=f.b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1)));f.b2!=c&&2==f.b2.type&&(e=f.b2,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1)));f.cleared=!0;if(null==c||f.b2==c){e=f.b1.arbiters;g=null;for(j=e.head;null!=j;){if(j.elt==f){null==g?(j=e.head,h=j.next,e.head=h,null==e.head&&(e.pushmod=
!0)):(j=g.next,h=j.next,g.next=h,null==h&&(e.pushmod=!0));g=j;g.elt=null;g.next=la.zpp_pool;la.zpp_pool=g;e.modified=!0;e.length--;e.pushmod=!0;break}g=j;j=j.next}}if(null==c||f.b1==c){e=f.b2.arbiters;g=null;for(j=e.head;null!=j;){if(j.elt==f){null==g?(j=e.head,h=j.next,e.head=h,null==e.head&&(e.pushmod=!0)):(j=g.next,h=j.next,g.next=h,null==h&&(e.pushmod=!0));g=j;g.elt=null;g.next=la.zpp_pool;la.zpp_pool=g;e.modified=!0;e.length--;e.pushmod=!0;break}g=j;j=j.next}}null!=f.pair&&(f.pair.arb=null,f.pair=
null);f.active=!1;this.f_arbiters.modified=!0;e=c.arbiters.erase(d)}else d=e,e=e.next}this.bphase.remove(a);a.removedFromSpace()},addConstraint:function(a){a.space=this;a.addedToSpace();a.active&&(a.component.sleeping=!0,this.wake_constraint(a,!0))},remConstraint:function(a){a.active&&(this.wake_constraint(a,!0),this.live_constraints.remove(a));a.removedFromSpace();a.space=null},addCompound:function(a){a.space=this;a.addedToSpace();for(var b=a.bodies.head;null!=b;)this.addBody(b.elt),b=b.next;for(b=
a.constraints.head;null!=b;)this.addConstraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.addCompound(a.elt),a=a.next},remCompound:function(a){for(var b=a.bodies.head;null!=b;)this.remBody(b.elt),b=b.next;for(b=a.constraints.head;null!=b;)this.remConstraint(b.elt),b=b.next;for(b=a.compounds.head;null!=b;)this.remCompound(b.elt),b=b.next;a.removedFromSpace();a.space=null},addBody:function(a,b){null==b&&(b=-1);a.space=this;a.addedToSpace();a.component.sleeping=!0;a.world||(a.component.waket=
this.stamp+(this.midstep?0:1),3==a.type&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0));for(var c=a.shapes.head;null!=c;){var d=c.elt;this.bphase.insert(d);d.addedToSpace();c=c.next}1==a.type?this.static_validation(a):2!=a.type&&3!=b&&this.kinematics.add(a)},remBody:function(a,b){null==b&&(b=-1);1==a.type?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),3==a.type&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a)):
2==a.type?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),3==a.type&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.live.remove(a)):(3!=b&&this.kinematics.remove(a),a.world||(a.component.waket=this.stamp+(this.midstep?0:1),3==a.type&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a));for(var c=a.shapes.head;null!=c;)this.removed_shape(c.elt,!0),c=c.next;a.removedFromSpace();a.space=null},bodiesInAABB:function(a,
b,c,d,e){return this.bphase.bodiesInAABB(a.zpp_inner,b,c,d,e)},bodiesInCircle:function(a,b,c,d,e){var f=this.bphase;if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var g=a.zpp_inner;null!=g._validate&&g._validate();g=a.zpp_inner.x;if(null!=a&&a.zpp_disp)throw new h("Error: Vec2 has been disposed and cannot be used!");var j=a.zpp_inner;null!=j._validate&&j._validate();return f.bodiesInCircle(g,a.zpp_inner.y,b,c,d,e)},push_callback:function(a){var b;null==Zd.zpp_pool?
b=new Zd:(b=Zd.zpp_pool,Zd.zpp_pool=b.next,b.next=null);this.callbacks.push(b);b.listener=a;return b},step:function(a,b,c){if(this.midstep)throw new h("Error: ... REALLY?? you're going to call space.step() inside of space.step()? COME ON!!");this.time+=a;this.pre_dt=a;this.midstep=!0;this.stamp++;this.validation();this.bphase.broadphase(this,!0);this.prestep(a);if(this.sortcontacts){var d=this.c_arbiters_false;if(null!=d.head&&null!=d.head.next){for(var e=d.head,f=null,g=null,j=null,i=null,k=1,l,
m,n;;){l=0;g=e;for(f=e=null;null!=g;){++l;j=g;m=0;for(n=k;null!=j&&m<k;)++m,j=j.next;for(;0<m||0<n&&null!=j;)0==m?(i=j,j=j.next,--n):0==n||null==j?(i=g,g=g.next,--m):(g.elt.active&&j.elt.active?g.elt.oc1.dist<j.elt.oc1.dist:1)?(i=g,g=g.next,--m):(i=j,j=j.next,--n),null!=f?f.next=i:e=i,f=i;g=j}f.next=null;k<<=1;if(!(1<l))break}d.head=e;d.modified=!0;d.pushmod=!0}}this.updateVel(a);this.warmStart();this.iterateVel(b);for(b=this.kinematics.head;null!=b;)d=b.elt,d.pre_posx=d.posx,d.pre_posy=d.posy,d.pre_rot=
d.rot,b=b.next;for(b=this.live.head;null!=b;)d=b.elt,d.pre_posx=d.posx,d.pre_posy=d.posy,d.pre_rot=d.rot,b=b.next;this.updatePos(a);this.continuous=!0;this.continuousCollisions(a);this.continuous=!1;this.iteratePos(c);for(c=this.kinematics.head;null!=c;){b=c.elt;d=b.pre_rot!=b.rot;if(!(b.posx==b.pre_posx&&b.posy==b.pre_posy)){for(e=b.shapes.head;null!=e;)f=e.elt,1==f.type&&(f.polygon.invalidate_gverts(),f.polygon.invalidate_gaxi()),f.invalidate_worldCOM(),e=e.next;b.zip_worldCOM=!0}if(d){b.zip_axis=
!0;for(d=b.shapes.head;null!=d;)e=d.elt,1==e.type&&(e.polygon.invalidate_gverts(),e.polygon.invalidate_gaxi()),e.invalidate_worldCOM(),d=d.next;b.zip_worldCOM=!0}c=c.next}for(c=this.live.head;null!=c;){b=c.elt;d=b.pre_rot!=b.rot;if(!(b.posx==b.pre_posx&&b.posy==b.pre_posy)){for(e=b.shapes.head;null!=e;)f=e.elt,1==f.type&&(f.polygon.invalidate_gverts(),f.polygon.invalidate_gaxi()),f.invalidate_worldCOM(),e=e.next;b.zip_worldCOM=!0}if(d){b.zip_axis=!0;for(d=b.shapes.head;null!=d;)e=d.elt,1==e.type&&
(e.polygon.invalidate_gverts(),e.polygon.invalidate_gaxi()),e.invalidate_worldCOM(),d=d.next;b.zip_worldCOM=!0}c=c.next}c=null;for(b=this.staticsleep.head;null!=b;)d=b.elt,3!=d.type||0==d.velx&&0==d.vely&&0==d.angvel?d.kinematicDelaySleep?(d.kinematicDelaySleep=!1,b=b.next):(d.component.sleeping=!0,b=this.staticsleep,null==c?(e=b.head,d=e.next,b.head=d,null==b.head&&(b.pushmod=!0)):(e=c.next,d=e.next,c.next=d,null==d&&(b.pushmod=!0)),e.elt=null,e.next=gd.zpp_pool,gd.zpp_pool=e,b.modified=!0,b.length--,
b.pushmod=!0,b=d):(c=b,b=b.next);this.doForests(a);this.sleepArbiters();this.midstep=!1;b=null;for(c=this.callbackset_list.next;null!=c;)if(a=c,null==a.arbiters.head)c=this.callbackset_list,null==b?(d=c.next,e=d.next,c.next=e,null==c.next&&(c.pushmod=!0)):(d=b.next,e=d.next,b.next=e,null==e&&(c.pushmod=!0)),d._inuse=!1,c.modified=!0,c.length--,c.pushmod=!0,c=e,a.int1=a.int2=null,a.id=a.di=-1,a.freed=!0,a.next=Lf.zpp_pool,Lf.zpp_pool=a;else{b=!0;for(d=a.arbiters.head;null!=d;)if(d.elt.sleeping)d=d.next;
else{b=!1;break}d=a.int1.cbSet;e=a.int2.cbSet;f=null;for(g=(d.cbpairs.length<e.cbpairs.length?d.cbpairs:e.cbpairs).head;null!=g;){j=g.elt;if(j.a==d&&j.b==e||j.a==e&&j.b==d){f=j;break}g=g.next}null==f&&(null==O.zpp_pool?f=new O:(f=O.zpp_pool,O.zpp_pool=f.next,f.next=null),f.zip_listeners=!0,ea.setlt(d,e)?(f.a=d,f.b=e):(f.a=e,f.b=d),d.cbpairs.add(f),e!=d&&e.cbpairs.add(f));f.zip_listeners&&(f.zip_listeners=!1,f.__validate());for(d=f.listeners.head;null!=d;){j=d.elt;if(6==j.event&&(!b||j.allowSleepingCallbacks)&&
!a.empty_arb(j.itype))e=this.push_callback(j),e.event=6,f=a.int1,g=a.int2,i=j.options1,k=f.cbTypes,i.nonemptyintersection(k,i.includes)&&!i.nonemptyintersection(k,i.excludes)?(j=j.options2,i=g.cbTypes,j=j.nonemptyintersection(i,j.includes)?!j.nonemptyintersection(i,j.excludes):!1):j=!1,j?(e.int1=f,e.int2=g):(e.int1=g,e.int2=f),e.set=a;d=d.next}b=c;c=c.next}for(;!this.callbacks.empty();)a=this.callbacks.pop(),0==a.listener.type?a.listener.body.handler(a.wrapper_body()):1==a.listener.type?a.listener.constraint.handler(a.wrapper_con()):
2==a.listener.type&&a.listener.interaction.handleri(a.wrapper_int()),a.int1=a.int2=null,a.body=null,a.constraint=null,a.listener=null,null!=a.wrap_arbiters&&(a.wrap_arbiters.zpp_inner.inner=null),a.set=null,a.next=Zd.zpp_pool,Zd.zpp_pool=a},continuousCollisions:function(a){var b=2*Math.PI/a;this.bphase.broadphase(this,!1);for(var c=0;1>c&&null!=this.toiEvents.head;){for(var d=null,e=2,f=!1,g=null,j=null,h=this.toiEvents.head;null!=h;){var i=h.elt,k=i.s1.body,l=i.s2.body;if(k.sweepFrozen&&l.sweepFrozen)if(0!=
i.toi&&ka.testCollide_safe(i.s1,i.s2))i.toi=0;else{var h=this.toiEvents.erase(j),m=i;m.next=yf.zpp_pool;yf.zpp_pool=m;continue}if(i.frozen1!=k.sweepFrozen||i.frozen2!=l.sweepFrozen)if(i.kinematic){var h=this.toiEvents.erase(j),n=i;n.next=yf.zpp_pool;yf.zpp_pool=n;continue}else{i.frozen1=k.sweepFrozen;i.frozen2=l.sweepFrozen;if(i.frozen1){var o=i.s1;i.s1=i.s2;i.s2=o;i.frozen1=!1;i.frozen2=!0}Pj.staticSweep(i,a,0,u.collisionSlopCCD);if(0>i.toi){var h=this.toiEvents.erase(j),r=i;r.next=yf.zpp_pool;yf.zpp_pool=
r;continue}}if(0<=i.toi&&(i.toi<e||!f&&i.kinematic))d=i,e=i.toi,f=i.kinematic,g=j;j=h;h=h.next}if(null==d)break;this.toiEvents.erase(g);var c=d.toi,q=d.s1.body,s=d.s2.body;if(!q.sweepFrozen){var t=c*a,w=t-q.sweepTime;if(0!=w){q.sweepTime=t;var v=w;q.posx+=q.velx*v;q.posy+=q.vely*v;if(0!=q.angvel){var z=q.sweep_angvel*w;q.rot+=z;if(1.0E-4<z*z)q.axisx=Math.sin(q.rot),q.axisy=Math.cos(q.rot);else{var y=z*z,G=1-0.5*y,H=1-y*y/8,F=(G*q.axisx+z*q.axisy)*H;q.axisy=(G*q.axisy-z*q.axisx)*H;q.axisx=F}}}var E=
d.s1;if(0==E.type)E.worldCOMx=q.posx+(q.axisy*E.localCOMx-q.axisx*E.localCOMy),E.worldCOMy=q.posy+(E.localCOMx*q.axisx+E.localCOMy*q.axisy);else{for(var J=E.polygon,O=J.lverts.next,P=J.gverts.next;null!=P;){var K=P,M=O,O=O.next;K.x=q.posx+(q.axisy*M.x-q.axisx*M.y);K.y=q.posy+(M.x*q.axisx+M.y*q.axisy);P=P.next}for(var X=J.edges.head,L=J.gverts.next,V=L,L=L.next;null!=L;){var Y=L,S=X.elt,X=X.next;S.gnormx=q.axisy*S.lnormx-q.axisx*S.lnormy;S.gnormy=S.lnormx*q.axisx+S.lnormy*q.axisy;S.gprojection=q.posx*
S.gnormx+q.posy*S.gnormy+S.lprojection;S.tp0=V.y*S.gnormx-V.x*S.gnormy;S.tp1=Y.y*S.gnormx-Y.x*S.gnormy;V=Y;L=L.next}var Z=J.gverts.next,U=X.elt,X=X.next;U.gnormx=q.axisy*U.lnormx-q.axisx*U.lnormy;U.gnormy=U.lnormx*q.axisx+U.lnormy*q.axisy;U.gprojection=q.posx*U.gnormx+q.posy*U.gnormy+U.lprojection;U.tp0=V.y*U.gnormx-V.x*U.gnormy;U.tp1=Z.y*U.gnormx-Z.x*U.gnormy}}if(!s.sweepFrozen){var ha=c*a,va=ha-s.sweepTime;if(0!=va){s.sweepTime=ha;var T=va;s.posx+=s.velx*T;s.posy+=s.vely*T;if(0!=s.angvel){var W=
s.sweep_angvel*va;s.rot+=W;if(1.0E-4<W*W)s.axisx=Math.sin(s.rot),s.axisy=Math.cos(s.rot);else{var ga=W*W,fa=1-0.5*ga,$=1-ga*ga/8,da=(fa*s.axisx+W*s.axisy)*$;s.axisy=(fa*s.axisy-W*s.axisx)*$;s.axisx=da}}}var ca=d.s2;if(0==ca.type)ca.worldCOMx=s.posx+(s.axisy*ca.localCOMx-s.axisx*ca.localCOMy),ca.worldCOMy=s.posy+(ca.localCOMx*s.axisx+ca.localCOMy*s.axisy);else{for(var sa=ca.polygon,la=sa.lverts.next,na=sa.gverts.next;null!=na;){var oa=na,ja=la,la=la.next;oa.x=s.posx+(s.axisy*ja.x-s.axisx*ja.y);oa.y=
s.posy+(ja.x*s.axisx+ja.y*s.axisy);na=na.next}for(var tb=sa.edges.head,ma=sa.gverts.next,pa=ma,ma=ma.next;null!=ma;){var Da=ma,ea=tb.elt,tb=tb.next;ea.gnormx=s.axisy*ea.lnormx-s.axisx*ea.lnormy;ea.gnormy=ea.lnormx*s.axisx+ea.lnormy*s.axisy;ea.gprojection=s.posx*ea.gnormx+s.posy*ea.gnormy+ea.lprojection;ea.tp0=pa.y*ea.gnormx-pa.x*ea.gnormy;ea.tp1=Da.y*ea.gnormx-Da.x*ea.gnormy;pa=Da;ma=ma.next}var Ca=sa.gverts.next,qa=tb.elt,tb=tb.next;qa.gnormx=s.axisy*qa.lnormx-s.axisx*qa.lnormy;qa.gnormy=qa.lnormx*
s.axisx+qa.lnormy*s.axisy;qa.gprojection=s.posx*qa.gnormx+s.posy*qa.gnormy+qa.lprojection;qa.tp0=pa.y*qa.gnormx-pa.x*qa.gnormy;qa.tp1=Ca.y*qa.gnormx-Ca.x*qa.gnormy}}var ua=this.narrowPhase(d.s1,d.s2,!0,d.arbiter,!0);if(null==ua)null!=d.arbiter&&null!=d.arbiter.pair&&(d.arbiter.pair.arb=null,d.arbiter.pair=null);else if(!this.presteparb(ua,a,!0)&&ua.type==Gc.COL&&ua.active&&0!=(ua.immState&1)){var I=ua.colarb,Sa=I.nx*I.c1.jnAcc-I.ny*I.c1.jtAcc,Ha=I.ny*I.c1.jnAcc+I.nx*I.c1.jtAcc,Qa=I.b1.imass;I.b1.velx-=
Sa*Qa;I.b1.vely-=Ha*Qa;I.b1.angvel-=I.b1.iinertia*(Ha*I.c1.r1x-Sa*I.c1.r1y);var Fa=I.b2.imass;I.b2.velx+=Sa*Fa;I.b2.vely+=Ha*Fa;I.b2.angvel+=I.b2.iinertia*(Ha*I.c1.r2x-Sa*I.c1.r2y);if(I.hc2){var wa=I.nx*I.c2.jnAcc-I.ny*I.c2.jtAcc,ra=I.ny*I.c2.jnAcc+I.nx*I.c2.jtAcc,Ja=I.b1.imass;I.b1.velx-=wa*Ja;I.b1.vely-=ra*Ja;I.b1.angvel-=I.b1.iinertia*(ra*I.c2.r1x-wa*I.c2.r1y);var Ea=I.b2.imass;I.b2.velx+=wa*Ea;I.b2.vely+=ra*Ea;I.b2.angvel+=I.b2.iinertia*(ra*I.c2.r2x-wa*I.c2.r2y)}I.b2.angvel+=I.jrAcc*I.b2.iinertia;
I.b1.angvel-=I.jrAcc*I.b1.iinertia;var A=ua.colarb,xa,Ma,$a,za,Db,ya,Ua=A.k1x+A.b2.velx-A.c1.r2y*A.b2.angvel-(A.b1.velx-A.c1.r1y*A.b1.angvel),Ba=A.k1y+A.b2.vely+A.c1.r2x*A.b2.angvel-(A.b1.vely+A.c1.r1x*A.b1.angvel);$a=(Ba*A.nx-Ua*A.ny+A.surfacex)*A.c1.tMass;za=A.c1.friction*A.c1.jnAcc;Db=A.c1.jtAcc;ya=Db-$a;ya>za?ya=za:ya<-za&&(ya=-za);$a=ya-Db;A.c1.jtAcc=ya;xa=-A.ny*$a;Ma=A.nx*$a;A.b2.velx+=xa*A.b2.imass;A.b2.vely+=Ma*A.b2.imass;A.b1.velx-=xa*A.b1.imass;A.b1.vely-=Ma*A.b1.imass;A.b2.angvel+=A.rt1b*
$a*A.b2.iinertia;A.b1.angvel-=A.rt1a*$a*A.b1.iinertia;if(A.hc2){var Ia=A.k2x+A.b2.velx-A.c2.r2y*A.b2.angvel-(A.b1.velx-A.c2.r1y*A.b1.angvel),Aa=A.k2y+A.b2.vely+A.c2.r2x*A.b2.angvel-(A.b1.vely+A.c2.r1x*A.b1.angvel);$a=(Aa*A.nx-Ia*A.ny+A.surfacex)*A.c2.tMass;za=A.c2.friction*A.c2.jnAcc;Db=A.c2.jtAcc;ya=Db-$a;ya>za?ya=za:ya<-za&&(ya=-za);$a=ya-Db;A.c2.jtAcc=ya;xa=-A.ny*$a;Ma=A.nx*$a;A.b2.velx+=xa*A.b2.imass;A.b2.vely+=Ma*A.b2.imass;A.b1.velx-=xa*A.b1.imass;A.b1.vely-=Ma*A.b1.imass;A.b2.angvel+=A.rt2b*
$a*A.b2.iinertia;A.b1.angvel-=A.rt2a*$a*A.b1.iinertia;var Ua=A.k1x+A.b2.velx-A.c1.r2y*A.b2.angvel-(A.b1.velx-A.c1.r1y*A.b1.angvel),Ba=A.k1y+A.b2.vely+A.c1.r2x*A.b2.angvel-(A.b1.vely+A.c1.r1x*A.b1.angvel),Ia=A.k2x+A.b2.velx-A.c2.r2y*A.b2.angvel-(A.b1.velx-A.c2.r1y*A.b1.angvel),Aa=A.k2y+A.b2.vely+A.c2.r2x*A.b2.angvel-(A.b1.vely+A.c2.r1x*A.b1.angvel),La=A.c1.jnAcc,ia=A.c2.jnAcc,Pc=Ua*A.nx+Ba*A.ny+A.surfacey+A.c1.bounce-(A.Ka*La+A.Kb*ia),ac=Ia*A.nx+Aa*A.ny+A.surfacey+A.c2.bounce-(A.Kb*La+A.Kc*ia),Ra=
-(A.kMassa*Pc+A.kMassb*ac),kb=-(A.kMassb*Pc+A.kMassc*ac);0<=Ra&&0<=kb?(Pc=Ra-La,ac=kb-ia,A.c1.jnAcc=Ra,A.c2.jnAcc=kb):(Ra=-A.c1.nMass*Pc,0<=Ra&&0<=A.Kb*Ra+ac?(Pc=Ra-La,ac=-ia,A.c1.jnAcc=Ra,A.c2.jnAcc=0):(kb=-A.c2.nMass*ac,0<=kb&&0<=A.Kb*kb+Pc?(Pc=-La,ac=kb-ia,A.c1.jnAcc=0,A.c2.jnAcc=kb):0<=Pc&&0<=ac?(Pc=-La,ac=-ia,A.c1.jnAcc=A.c2.jnAcc=0):ac=Pc=0));$a=Pc+ac;xa=A.nx*$a;Ma=A.ny*$a;A.b2.velx+=xa*A.b2.imass;A.b2.vely+=Ma*A.b2.imass;A.b1.velx-=xa*A.b1.imass;A.b1.vely-=Ma*A.b1.imass;A.b2.angvel+=(A.rn1b*
Pc+A.rn2b*ac)*A.b2.iinertia;A.b1.angvel-=(A.rn1a*Pc+A.rn2a*ac)*A.b1.iinertia}else 0!=A.radius&&($a=(A.b2.angvel-A.b1.angvel)*A.rMass,za=A.rfric*A.c1.jnAcc,Db=A.jrAcc,A.jrAcc-=$a,A.jrAcc>za?A.jrAcc=za:A.jrAcc<-za&&(A.jrAcc=-za),$a=A.jrAcc-Db,A.b2.angvel+=$a*A.b2.iinertia,A.b1.angvel-=$a*A.b1.iinertia),Ua=A.k1x+A.b2.velx-A.c1.r2y*A.b2.angvel-(A.b1.velx-A.c1.r1y*A.b1.angvel),Ba=A.k1y+A.b2.vely+A.c1.r2x*A.b2.angvel-(A.b1.vely+A.c1.r1x*A.b1.angvel),$a=(A.c1.bounce+(A.nx*Ua+A.ny*Ba)+A.surfacey)*A.c1.nMass,
Db=A.c1.jnAcc,ya=Db-$a,0>ya&&(ya=0),$a=ya-Db,A.c1.jnAcc=ya,xa=A.nx*$a,Ma=A.ny*$a,A.b2.velx+=xa*A.b2.imass,A.b2.vely+=Ma*A.b2.imass,A.b1.velx-=xa*A.b1.imass,A.b1.vely-=Ma*A.b1.imass,A.b2.angvel+=A.rn1b*$a*A.b2.iinertia,A.b1.angvel-=A.rn1a*$a*A.b1.iinertia;var C=ua.colarb,Za,ob,ta,pb,Pa,Q,aa=C.k1x+C.b2.velx-C.c1.r2y*C.b2.angvel-(C.b1.velx-C.c1.r1y*C.b1.angvel),Na=C.k1y+C.b2.vely+C.c1.r2x*C.b2.angvel-(C.b1.vely+C.c1.r1x*C.b1.angvel);ta=(Na*C.nx-aa*C.ny+C.surfacex)*C.c1.tMass;pb=C.c1.friction*C.c1.jnAcc;
Pa=C.c1.jtAcc;Q=Pa-ta;Q>pb?Q=pb:Q<-pb&&(Q=-pb);ta=Q-Pa;C.c1.jtAcc=Q;Za=-C.ny*ta;ob=C.nx*ta;C.b2.velx+=Za*C.b2.imass;C.b2.vely+=ob*C.b2.imass;C.b1.velx-=Za*C.b1.imass;C.b1.vely-=ob*C.b1.imass;C.b2.angvel+=C.rt1b*ta*C.b2.iinertia;C.b1.angvel-=C.rt1a*ta*C.b1.iinertia;if(C.hc2){var ba=C.k2x+C.b2.velx-C.c2.r2y*C.b2.angvel-(C.b1.velx-C.c2.r1y*C.b1.angvel),Ya=C.k2y+C.b2.vely+C.c2.r2x*C.b2.angvel-(C.b1.vely+C.c2.r1x*C.b1.angvel);ta=(Ya*C.nx-ba*C.ny+C.surfacex)*C.c2.tMass;pb=C.c2.friction*C.c2.jnAcc;Pa=C.c2.jtAcc;
Q=Pa-ta;Q>pb?Q=pb:Q<-pb&&(Q=-pb);ta=Q-Pa;C.c2.jtAcc=Q;Za=-C.ny*ta;ob=C.nx*ta;C.b2.velx+=Za*C.b2.imass;C.b2.vely+=ob*C.b2.imass;C.b1.velx-=Za*C.b1.imass;C.b1.vely-=ob*C.b1.imass;C.b2.angvel+=C.rt2b*ta*C.b2.iinertia;C.b1.angvel-=C.rt2a*ta*C.b1.iinertia;var aa=C.k1x+C.b2.velx-C.c1.r2y*C.b2.angvel-(C.b1.velx-C.c1.r1y*C.b1.angvel),Na=C.k1y+C.b2.vely+C.c1.r2x*C.b2.angvel-(C.b1.vely+C.c1.r1x*C.b1.angvel),ba=C.k2x+C.b2.velx-C.c2.r2y*C.b2.angvel-(C.b1.velx-C.c2.r1y*C.b1.angvel),Ya=C.k2y+C.b2.vely+C.c2.r2x*
C.b2.angvel-(C.b1.vely+C.c2.r1x*C.b1.angvel),Wa=C.c1.jnAcc,Hb=C.c2.jnAcc,bb=aa*C.nx+Na*C.ny+C.surfacey+C.c1.bounce-(C.Ka*Wa+C.Kb*Hb),ib=ba*C.nx+Ya*C.ny+C.surfacey+C.c2.bounce-(C.Kb*Wa+C.Kc*Hb),Oa=-(C.kMassa*bb+C.kMassb*ib),Va=-(C.kMassb*bb+C.kMassc*ib);0<=Oa&&0<=Va?(bb=Oa-Wa,ib=Va-Hb,C.c1.jnAcc=Oa,C.c2.jnAcc=Va):(Oa=-C.c1.nMass*bb,0<=Oa&&0<=C.Kb*Oa+ib?(bb=Oa-Wa,ib=-Hb,C.c1.jnAcc=Oa,C.c2.jnAcc=0):(Va=-C.c2.nMass*ib,0<=Va&&0<=C.Kb*Va+bb?(bb=-Wa,ib=Va-Hb,C.c1.jnAcc=0,C.c2.jnAcc=Va):0<=bb&&0<=ib?(bb=
-Wa,ib=-Hb,C.c1.jnAcc=C.c2.jnAcc=0):ib=bb=0));ta=bb+ib;Za=C.nx*ta;ob=C.ny*ta;C.b2.velx+=Za*C.b2.imass;C.b2.vely+=ob*C.b2.imass;C.b1.velx-=Za*C.b1.imass;C.b1.vely-=ob*C.b1.imass;C.b2.angvel+=(C.rn1b*bb+C.rn2b*ib)*C.b2.iinertia;C.b1.angvel-=(C.rn1a*bb+C.rn2a*ib)*C.b1.iinertia}else 0!=C.radius&&(ta=(C.b2.angvel-C.b1.angvel)*C.rMass,pb=C.rfric*C.c1.jnAcc,Pa=C.jrAcc,C.jrAcc-=ta,C.jrAcc>pb?C.jrAcc=pb:C.jrAcc<-pb&&(C.jrAcc=-pb),ta=C.jrAcc-Pa,C.b2.angvel+=ta*C.b2.iinertia,C.b1.angvel-=ta*C.b1.iinertia),aa=
C.k1x+C.b2.velx-C.c1.r2y*C.b2.angvel-(C.b1.velx-C.c1.r1y*C.b1.angvel),Na=C.k1y+C.b2.vely+C.c1.r2x*C.b2.angvel-(C.b1.vely+C.c1.r1x*C.b1.angvel),ta=(C.c1.bounce+(C.nx*aa+C.ny*Na)+C.surfacey)*C.c1.nMass,Pa=C.c1.jnAcc,Q=Pa-ta,0>Q&&(Q=0),ta=Q-Pa,C.c1.jnAcc=Q,Za=C.nx*ta,ob=C.ny*ta,C.b2.velx+=Za*C.b2.imass,C.b2.vely+=ob*C.b2.imass,C.b1.velx-=Za*C.b1.imass,C.b1.vely-=ob*C.b1.imass,C.b2.angvel+=C.rn1b*ta*C.b2.iinertia,C.b1.angvel-=C.rn1a*ta*C.b1.iinertia;var D=ua.colarb,lb,Ta,jb,gb,Ga,Eb,cb=D.k1x+D.b2.velx-
D.c1.r2y*D.b2.angvel-(D.b1.velx-D.c1.r1y*D.b1.angvel),zb=D.k1y+D.b2.vely+D.c1.r2x*D.b2.angvel-(D.b1.vely+D.c1.r1x*D.b1.angvel);jb=(zb*D.nx-cb*D.ny+D.surfacex)*D.c1.tMass;gb=D.c1.friction*D.c1.jnAcc;Ga=D.c1.jtAcc;Eb=Ga-jb;Eb>gb?Eb=gb:Eb<-gb&&(Eb=-gb);jb=Eb-Ga;D.c1.jtAcc=Eb;lb=-D.ny*jb;Ta=D.nx*jb;D.b2.velx+=lb*D.b2.imass;D.b2.vely+=Ta*D.b2.imass;D.b1.velx-=lb*D.b1.imass;D.b1.vely-=Ta*D.b1.imass;D.b2.angvel+=D.rt1b*jb*D.b2.iinertia;D.b1.angvel-=D.rt1a*jb*D.b1.iinertia;if(D.hc2){var Nc=D.k2x+D.b2.velx-
D.c2.r2y*D.b2.angvel-(D.b1.velx-D.c2.r1y*D.b1.angvel),rd=D.k2y+D.b2.vely+D.c2.r2x*D.b2.angvel-(D.b1.vely+D.c2.r1x*D.b1.angvel);jb=(rd*D.nx-Nc*D.ny+D.surfacex)*D.c2.tMass;gb=D.c2.friction*D.c2.jnAcc;Ga=D.c2.jtAcc;Eb=Ga-jb;Eb>gb?Eb=gb:Eb<-gb&&(Eb=-gb);jb=Eb-Ga;D.c2.jtAcc=Eb;lb=-D.ny*jb;Ta=D.nx*jb;D.b2.velx+=lb*D.b2.imass;D.b2.vely+=Ta*D.b2.imass;D.b1.velx-=lb*D.b1.imass;D.b1.vely-=Ta*D.b1.imass;D.b2.angvel+=D.rt2b*jb*D.b2.iinertia;D.b1.angvel-=D.rt2a*jb*D.b1.iinertia;var cb=D.k1x+D.b2.velx-D.c1.r2y*
D.b2.angvel-(D.b1.velx-D.c1.r1y*D.b1.angvel),zb=D.k1y+D.b2.vely+D.c1.r2x*D.b2.angvel-(D.b1.vely+D.c1.r1x*D.b1.angvel),Nc=D.k2x+D.b2.velx-D.c2.r2y*D.b2.angvel-(D.b1.velx-D.c2.r1y*D.b1.angvel),rd=D.k2y+D.b2.vely+D.c2.r2x*D.b2.angvel-(D.b1.vely+D.c2.r1x*D.b1.angvel),fb=D.c1.jnAcc,Ib=D.c2.jnAcc,ub=cb*D.nx+zb*D.ny+D.surfacey+D.c1.bounce-(D.Ka*fb+D.Kb*Ib),wb=Nc*D.nx+rd*D.ny+D.surfacey+D.c2.bounce-(D.Kb*fb+D.Kc*Ib),mb=-(D.kMassa*ub+D.kMassb*wb),Ka=-(D.kMassb*ub+D.kMassc*wb);0<=mb&&0<=Ka?(ub=mb-fb,wb=Ka-
Ib,D.c1.jnAcc=mb,D.c2.jnAcc=Ka):(mb=-D.c1.nMass*ub,0<=mb&&0<=D.Kb*mb+wb?(ub=mb-fb,wb=-Ib,D.c1.jnAcc=mb,D.c2.jnAcc=0):(Ka=-D.c2.nMass*wb,0<=Ka&&0<=D.Kb*Ka+ub?(ub=-fb,wb=Ka-Ib,D.c1.jnAcc=0,D.c2.jnAcc=Ka):0<=ub&&0<=wb?(ub=-fb,wb=-Ib,D.c1.jnAcc=D.c2.jnAcc=0):wb=ub=0));jb=ub+wb;lb=D.nx*jb;Ta=D.ny*jb;D.b2.velx+=lb*D.b2.imass;D.b2.vely+=Ta*D.b2.imass;D.b1.velx-=lb*D.b1.imass;D.b1.vely-=Ta*D.b1.imass;D.b2.angvel+=(D.rn1b*ub+D.rn2b*wb)*D.b2.iinertia;D.b1.angvel-=(D.rn1a*ub+D.rn2a*wb)*D.b1.iinertia}else 0!=
D.radius&&(jb=(D.b2.angvel-D.b1.angvel)*D.rMass,gb=D.rfric*D.c1.jnAcc,Ga=D.jrAcc,D.jrAcc-=jb,D.jrAcc>gb?D.jrAcc=gb:D.jrAcc<-gb&&(D.jrAcc=-gb),jb=D.jrAcc-Ga,D.b2.angvel+=jb*D.b2.iinertia,D.b1.angvel-=jb*D.b1.iinertia),cb=D.k1x+D.b2.velx-D.c1.r2y*D.b2.angvel-(D.b1.velx-D.c1.r1y*D.b1.angvel),zb=D.k1y+D.b2.vely+D.c1.r2x*D.b2.angvel-(D.b1.vely+D.c1.r1x*D.b1.angvel),jb=(D.c1.bounce+(D.nx*cb+D.ny*zb)+D.surfacey)*D.c1.nMass,Ga=D.c1.jnAcc,Eb=Ga-jb,0>Eb&&(Eb=0),jb=Eb-Ga,D.c1.jnAcc=Eb,lb=D.nx*jb,Ta=D.ny*jb,
D.b2.velx+=lb*D.b2.imass,D.b2.vely+=Ta*D.b2.imass,D.b1.velx-=lb*D.b1.imass,D.b1.vely-=Ta*D.b1.imass,D.b2.angvel+=D.rn1b*jb*D.b2.iinertia,D.b1.angvel-=D.rn1a*jb*D.b1.iinertia;var B=ua.colarb,Bb,db,ab,x,Nb,Jb,qb=B.k1x+B.b2.velx-B.c1.r2y*B.b2.angvel-(B.b1.velx-B.c1.r1y*B.b1.angvel),Xa=B.k1y+B.b2.vely+B.c1.r2x*B.b2.angvel-(B.b1.vely+B.c1.r1x*B.b1.angvel);ab=(Xa*B.nx-qb*B.ny+B.surfacex)*B.c1.tMass;x=B.c1.friction*B.c1.jnAcc;Nb=B.c1.jtAcc;Jb=Nb-ab;Jb>x?Jb=x:Jb<-x&&(Jb=-x);ab=Jb-Nb;B.c1.jtAcc=Jb;Bb=-B.ny*
ab;db=B.nx*ab;B.b2.velx+=Bb*B.b2.imass;B.b2.vely+=db*B.b2.imass;B.b1.velx-=Bb*B.b1.imass;B.b1.vely-=db*B.b1.imass;B.b2.angvel+=B.rt1b*ab*B.b2.iinertia;B.b1.angvel-=B.rt1a*ab*B.b1.iinertia;if(B.hc2){var sb=B.k2x+B.b2.velx-B.c2.r2y*B.b2.angvel-(B.b1.velx-B.c2.r1y*B.b1.angvel),rb=B.k2y+B.b2.vely+B.c2.r2x*B.b2.angvel-(B.b1.vely+B.c2.r1x*B.b1.angvel);ab=(rb*B.nx-sb*B.ny+B.surfacex)*B.c2.tMass;x=B.c2.friction*B.c2.jnAcc;Nb=B.c2.jtAcc;Jb=Nb-ab;Jb>x?Jb=x:Jb<-x&&(Jb=-x);ab=Jb-Nb;B.c2.jtAcc=Jb;Bb=-B.ny*ab;
db=B.nx*ab;B.b2.velx+=Bb*B.b2.imass;B.b2.vely+=db*B.b2.imass;B.b1.velx-=Bb*B.b1.imass;B.b1.vely-=db*B.b1.imass;B.b2.angvel+=B.rt2b*ab*B.b2.iinertia;B.b1.angvel-=B.rt2a*ab*B.b1.iinertia;var qb=B.k1x+B.b2.velx-B.c1.r2y*B.b2.angvel-(B.b1.velx-B.c1.r1y*B.b1.angvel),Xa=B.k1y+B.b2.vely+B.c1.r2x*B.b2.angvel-(B.b1.vely+B.c1.r1x*B.b1.angvel),sb=B.k2x+B.b2.velx-B.c2.r2y*B.b2.angvel-(B.b1.velx-B.c2.r1y*B.b1.angvel),rb=B.k2y+B.b2.vely+B.c2.r2x*B.b2.angvel-(B.b1.vely+B.c2.r1x*B.b1.angvel),vb=B.c1.jnAcc,eb=B.c2.jnAcc,
Ob=qb*B.nx+Xa*B.ny+B.surfacey+B.c1.bounce-(B.Ka*vb+B.Kb*eb),nb=sb*B.nx+rb*B.ny+B.surfacey+B.c2.bounce-(B.Kb*vb+B.Kc*eb),Vb=-(B.kMassa*Ob+B.kMassb*nb),hb=-(B.kMassb*Ob+B.kMassc*nb);0<=Vb&&0<=hb?(Ob=Vb-vb,nb=hb-eb,B.c1.jnAcc=Vb,B.c2.jnAcc=hb):(Vb=-B.c1.nMass*Ob,0<=Vb&&0<=B.Kb*Vb+nb?(Ob=Vb-vb,nb=-eb,B.c1.jnAcc=Vb,B.c2.jnAcc=0):(hb=-B.c2.nMass*nb,0<=hb&&0<=B.Kb*hb+Ob?(Ob=-vb,nb=hb-eb,B.c1.jnAcc=0,B.c2.jnAcc=hb):0<=Ob&&0<=nb?(Ob=-vb,nb=-eb,B.c1.jnAcc=B.c2.jnAcc=0):nb=Ob=0));ab=Ob+nb;Bb=B.nx*ab;db=B.ny*
ab;B.b2.velx+=Bb*B.b2.imass;B.b2.vely+=db*B.b2.imass;B.b1.velx-=Bb*B.b1.imass;B.b1.vely-=db*B.b1.imass;B.b2.angvel+=(B.rn1b*Ob+B.rn2b*nb)*B.b2.iinertia;B.b1.angvel-=(B.rn1a*Ob+B.rn2a*nb)*B.b1.iinertia}else 0!=B.radius&&(ab=(B.b2.angvel-B.b1.angvel)*B.rMass,x=B.rfric*B.c1.jnAcc,Nb=B.jrAcc,B.jrAcc-=ab,B.jrAcc>x?B.jrAcc=x:B.jrAcc<-x&&(B.jrAcc=-x),ab=B.jrAcc-Nb,B.b2.angvel+=ab*B.b2.iinertia,B.b1.angvel-=ab*B.b1.iinertia),qb=B.k1x+B.b2.velx-B.c1.r2y*B.b2.angvel-(B.b1.velx-B.c1.r1y*B.b1.angvel),Xa=B.k1y+
B.b2.vely+B.c1.r2x*B.b2.angvel-(B.b1.vely+B.c1.r1x*B.b1.angvel),ab=(B.c1.bounce+(B.nx*qb+B.ny*Xa)+B.surfacey)*B.c1.nMass,Nb=B.c1.jnAcc,Jb=Nb-ab,0>Jb&&(Jb=0),ab=Jb-Nb,B.c1.jnAcc=Jb,Bb=B.nx*ab,db=B.ny*ab,B.b2.velx+=Bb*B.b2.imass,B.b2.vely+=db*B.b2.imass,B.b1.velx-=Bb*B.b1.imass,B.b1.vely-=db*B.b1.imass,B.b2.angvel+=B.rn1b*ab*B.b2.iinertia,B.b1.angvel-=B.rn1a*ab*B.b1.iinertia;q.sweep_angvel=q.angvel%b;s.sweep_angvel=s.angvel%b}if(null!=ua&&ua.active&&0!=(ua.immState&1)&&ua.type==Gc.COL){if(!q.sweepFrozen&&
3!=q.type)if(q.sweepFrozen=!0,d.failed)q.angvel=q.sweep_angvel=0;else if(d.slipped){var Cb=q;Cb.sweep_angvel*=u.angularCCDSlipScale;q.angvel=Cb.sweep_angvel}else q.angvel=q.sweep_angvel;if(!s.sweepFrozen&&3!=s.type)if(s.sweepFrozen=!0,d.failed)s.angvel=s.sweep_angvel=0;else if(d.slipped){var yb=s;yb.sweep_angvel*=u.angularCCDSlipScale;s.angvel=yb.sweep_angvel}else s.angvel=s.sweep_angvel}var Mb=d;Mb.next=yf.zpp_pool;yf.zpp_pool=Mb}for(;null!=this.toiEvents.head;){var Xb=this.toiEvents.pop_unsafe();
Xb.next=yf.zpp_pool;yf.zpp_pool=Xb}for(var Gb=this.kinematics.head;null!=Gb;){var Pb=Gb.elt,R=a-Pb.sweepTime;if(0!=R){Pb.sweepTime=a;var Rb=R;Pb.posx+=Pb.velx*Rb;Pb.posy+=Pb.vely*Rb;if(0!=Pb.angvel){var Tb=Pb.sweep_angvel*R;Pb.rot+=Tb;if(1.0E-4<Tb*Tb)Pb.axisx=Math.sin(Pb.rot),Pb.axisy=Math.cos(Pb.rot);else{var Sb=Tb*Tb,Lb=1-0.5*Sb,Ic=1-Sb*Sb/8,sc=(Lb*Pb.axisx+Tb*Pb.axisy)*Ic;Pb.axisy=(Lb*Pb.axisy-Tb*Pb.axisx)*Ic;Pb.axisx=sc}}}Pb.sweepTime=0;Gb=Gb.next}for(var Ub=this.live.head;null!=Ub;){var Wb=Ub.elt;
if(!Wb.sweepFrozen){var bc=a-Wb.sweepTime;if(0!=bc){Wb.sweepTime=a;var Qb=bc;Wb.posx+=Wb.velx*Qb;Wb.posy+=Wb.vely*Qb;if(0!=Wb.angvel){var Kb=Wb.sweep_angvel*bc;Wb.rot+=Kb;if(1.0E-4<Kb*Kb)Wb.axisx=Math.sin(Wb.rot),Wb.axisy=Math.cos(Wb.rot);else{var dc=Kb*Kb,Zb=1-0.5*dc,ec=1-dc*dc/8,N=(Zb*Wb.axisx+Kb*Wb.axisy)*ec;Wb.axisy=(Zb*Wb.axisy-Kb*Wb.axisx)*ec;Wb.axisx=N}}}}Wb.sweepTime=0;Ub=Ub.next}},continuousEvent:function(a,b,c,d){if(a.body.sweepFrozen&&b.body.sweepFrozen||a.body.disableCCD||b.body.disableCCD)return d;
var e;if(null!=d&&null==d.colarb)e=!0;else{e=a.body;var f=b.body,g;g=!1;for(var j=e.constraints.head;null!=j;){var h=j.elt;if(h.ignore&&h.pair_exists(e.id,f.id)){g=!0;break}j=j.next}if(g)g=!1;else{for(g=a;null!=g&&null==g.group;)g=null!=g.ishape?g.ishape.body:null!=g.icompound?g.icompound.compound:g.ibody.compound;g=null==g?null:g.group;if(null==g)g=!1;else{for(j=b;null!=j&&null==j.group;)j=null!=j.ishape?j.ishape.body:null!=j.icompound?j.icompound.compound:j.ibody.compound;j=null==j?null:j.group;
if(null==j)g=!1;else{for(h=!1;null!=g&&null!=j;){if(g==j){h=g.ignore;break}g.depth<j.depth?j=j.group:g=g.group}g=h}}g=!g}g?(a.sensorEnabled||b.sensorEnabled?(g=a.filter,j=b.filter,g=0!=(g.sensorMask&j.sensorGroup)?0!=(j.sensorMask&g.sensorGroup):!1):g=!1,g?e=2:(a.fluidEnabled||b.fluidEnabled?(g=a.filter,j=b.filter,g=0!=(g.fluidMask&j.fluidGroup)?0!=(j.fluidMask&g.fluidGroup):!1):g=!1,g&&!(0==e.imass&&0==f.imass&&0==e.iinertia&&0==f.iinertia)?e=0:(g=a.filter,j=b.filter,e=0!=(g.collisionMask&j.collisionGroup)&&
0!=(j.collisionMask&g.collisionGroup)&&!(0==e.imass&&0==f.imass&&0==e.iinertia&&0==f.iinertia)?1:-1))):e=-1;e=0>=e}if(e)return d;f=a.body;g=b.body;if(c||f.bullet||g.bullet)null==yf.zpp_pool?e=new yf:(e=yf.zpp_pool,yf.zpp_pool=e.next,e.next=null),e.failed=!1,e.s1=e.s2=null,e.arbiter=null,f=3==f.type||3==g.type,c&&!f?(2!=a.body.type?(e.s2=a,e.s1=b):(e.s1=a,e.s2=b),e.kinematic=!1,Pj.staticSweep(e,this.pre_dt,0,u.collisionSlopCCD)):(e.s1=a,e.s2=b,e.kinematic=f,e.s1.body.sweepFrozen||e.s2.body.sweepFrozen?
(e.s1.body.sweepFrozen&&(a=e.s1,e.s1=e.s2,e.s2=a,e.frozen1=!1,e.frozen2=!0),Pj.staticSweep(e,this.pre_dt,0,u.collisionSlopCCD)):Pj.dynamicSweep(e,this.pre_dt,0,u.collisionSlopCCD)),c&&0>e.toi||e.failed?(c=e,c.next=yf.zpp_pool,yf.zpp_pool=c):(this.toiEvents.add(e),e.frozen1=e.s1.body.sweepFrozen,e.frozen2=e.s2.body.sweepFrozen,e.arbiter=null!=d?d.colarb:null);return d},bodyCbWake:function(a){if(2==a.type&&null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;2==c.event&&
(c=this.push_callback(c),c.event=2,c.body=a);b=b.next}else a.component.woken=!0},bodyCbSleep:function(a){if(2==a.type&&null!=a.cbSet)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;3==c.event&&(c=this.push_callback(c),c.event=3,c.body=a);b=b.next}},constraintCbWake:function(a){if(null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;2==c.event&&(c=this.push_callback(c),c.event=2,c.constraint=a);b=b.next}else a.component.woken=!0},constraintCbSleep:function(a){if(null!=
a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;3==c.event&&(c=this.push_callback(c),c.event=3,c.constraint=a);b=b.next}},constraintCbBreak:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;4==c.event&&(c=this.push_callback(c),c.event=4,c.constraint=a);b=b.next}},nullListenerType:function(a,b){for(var c=new pi,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=c.head;){var e=
c.pop_unsafe();if(null!=e.icompound){d=e.icompound;for(e=d.bodies.head;null!=e;)c.add(e.elt),e=e.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{d=null!=e.ishape?e.ishape:null;for(e=(null!=e.ibody?e.ibody:e.ishape.body).arbiters.head;null!=e;){var f=e.elt;if(0!=f.present&&(null==d||f.ws1==d||f.ws2==d)){this.MRCA_chains(f.ws1,f.ws2);for(f=this.mrca1.head;null!=f;){var g=f.elt;if(!(g.cbSet!=a&&g.cbSet!=b))for(var j=this.mrca2.head;null!=j;){var h=j.elt;if(!(g.cbSet==a&&h.cbSet!=b||g.cbSet==
b&&h.cbSet!=a))if(h=je.get(g,h),null!=h){for(;null!=h.arbiters.head;)h.arbiters.pop_unsafe().present--;this.remove_callbackset(h)}j=j.next}f=f.next}}e=e.next}}}},nullInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.nullInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.nullInteractorType(c.elt,b),c=c.next}else{c=null!=a.ishape?a.ishape:null;for(d=(null!=a.ibody?a.ibody:a.ishape.body).arbiters.head;null!=d;){var e=
d.elt;if(0!=e.present&&(null==c||e.ws1==c||e.ws2==c)){this.MRCA_chains(e.ws1,e.ws2);for(var f=this.mrca1.head;null!=f;){for(var g=f.elt,j=this.mrca2.head;null!=j;){var h=j.elt;g!=b&&h!=b||(h=je.get(g,h),null!=h&&(e.present--,h.remove_arb(e),null==h.arbiters.head&&this.remove_callbackset(h)));j=j.next}f=f.next}}d=d.next}}},freshListenerType:function(a,b){for(var c=new pi,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=c.head;){var e=
c.pop_unsafe();if(null!=e.icompound){d=e.icompound;for(e=d.bodies.head;null!=e;)c.add(e.elt),e=e.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{d=null!=e.ishape?e.ishape:null;for(e=(null!=e.ibody?e.ibody:e.ishape.body).arbiters.head;null!=e;){var f=e.elt;if(f.presentable&&(null==d||f.ws1==d||f.ws2==d)){this.MRCA_chains(f.ws1,f.ws2);for(var g=this.mrca1.head;null!=g;){var j=g.elt;if(!(j.cbSet!=a&&j.cbSet!=b))for(var h=this.mrca2.head;null!=h;){var i=h.elt;if(!(j.cbSet==a&&i.cbSet!=
b||j.cbSet==b&&i.cbSet!=a)){var k=je.get(j,i);null==k&&(k=Lf.get(j,i),this.add_callbackset(k));for(var i=!1,l=k.arbiters.head;null!=l;){if(l.elt==f){i=!0;break}l=l.next}i?k=!1:(k=k.arbiters,null==la.zpp_pool?i=new la:(i=la.zpp_pool,la.zpp_pool=i.next,i.next=null),i.elt=f,i.next=k.head,k.head=i,k.modified=!0,k.length++,k=!0);k&&f.present++}h=h.next}g=g.next}}e=e.next}}}},freshInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.freshInteractorType(d.elt,
b),d=d.next;for(c=c.compounds.head;null!=c;)this.freshInteractorType(c.elt,b),c=c.next}else{c=null!=a.ishape?a.ishape:null;for(d=(null!=a.ibody?a.ibody:a.ishape.body).arbiters.head;null!=d;){var e=d.elt;if(e.presentable&&(null==c||e.ws1==c||e.ws2==c)){this.MRCA_chains(e.ws1,e.ws2);for(var f=this.mrca1.head;null!=f;){for(var g=f.elt,j=this.mrca2.head;null!=j;){var h=j.elt;if(!(g!=b&&h!=b)){var i=g.cbSet,k=h.cbSet;i.validate();k.validate();for(var l=null,m=(i.cbpairs.length<k.cbpairs.length?i.cbpairs:
k.cbpairs).head;null!=m;){var n=m.elt;if(n.a==i&&n.b==k||n.a==k&&n.b==i){l=n;break}m=m.next}null==l&&(null==O.zpp_pool?l=new O:(l=O.zpp_pool,O.zpp_pool=l.next,l.next=null),l.zip_listeners=!0,ea.setlt(i,k)?(l.a=i,l.b=k):(l.a=k,l.b=i),i.cbpairs.add(l),k!=i&&k.cbpairs.add(l));l.zip_listeners&&(l.zip_listeners=!1,l.__validate());if(null!=l.listeners.head){i=je.get(g,h);null==i&&(i=Lf.get(g,h),this.add_callbackset(i));h=!1;for(k=i.arbiters.head;null!=k;){if(k.elt==e){h=!0;break}k=k.next}h?h=!1:(h=i.arbiters,
null==la.zpp_pool?i=new la:(i=la.zpp_pool,la.zpp_pool=i.next,i.next=null),i.elt=e,i.next=h.head,h.head=i,h.modified=!0,h.length++,h=!0);h&&e.present++}}j=j.next}f=f.next}}d=d.next}}},wakeCompound:function(a){for(var b=a.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),3==c.type&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=a.constraints.head;null!=b;)this.wake_constraint(b.elt),b=b.next;for(a=a.compounds.head;null!=
a;)this.wakeCompound(a.elt),a=a.next},wakeIsland:function(a){for(;null!=a.comps.head;){var b=a.comps.pop_unsafe();b.waket=this.stamp+(this.midstep?0:1);if(b.isBody){var c=b.body;this.live.add(c);for(var d=c.arbiters.head;null!=d;){var e=d.elt;if(e.sleeping)if(e.sleeping=!1,e.up_stamp+=this.stamp-e.sleep_stamp,e.type==Gc.COL){var f=e.colarb;if(f.stat)var e=this.c_arbiters_true,g;else e=this.c_arbiters_false;null==xd.zpp_pool?g=new xd:(g=xd.zpp_pool,xd.zpp_pool=g.next,g.next=null);g.elt=f;f=g;f.next=
e.head;e.head=f;e.modified=!0;e.length++}else e.type==Gc.FLUID?(f=this.f_arbiters,e=e.fluidarb,null==Yd.zpp_pool?g=new Yd:(g=Yd.zpp_pool,Yd.zpp_pool=g.next,g.next=null)):(f=this.s_arbiters,e=e.sensorarb,null==Td.zpp_pool?g=new Td:(g=Td.zpp_pool,Td.zpp_pool=g.next,g.next=null)),g.elt=e,e=g,e.next=f.head,f.head=e,f.modified=!0,f.length++;d=d.next}this.bodyCbWake(c);b.sleeping=!1;b.island=null;b.parent=b;b.rank=0;if(1!=c.type)for(b=c.shapes.head;null!=b;)c=b.elt,null!=c.node&&this.bphase.sync(c),b=b.next}else c=
b.constraint,d=this.live_constraints,null==Lc.zpp_pool?f=new Lc:(f=Lc.zpp_pool,Lc.zpp_pool=f.next,f.next=null),f.elt=c,f.next=d.head,d.head=f,d.modified=!0,d.length++,this.constraintCbWake(c),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0}a.next=Bg.zpp_pool;Bg.zpp_pool=a},non_inlined_wake:function(a,b){null==b&&(b=!1);a.world||(a.component.waket=this.stamp+(this.midstep?0:1),3==a.type&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,b))},really_wake:function(a,b){null==b&&(b=
!1);if(null==a.component.island){a.component.sleeping=!1;if(3==a.type||1==a.type)var c=this.staticsleep,d;else c=this.live;null==gd.zpp_pool?d=new gd:(d=gd.zpp_pool,gd.zpp_pool=d.next,d.next=null);d.elt=a;d.next=c.head;c.head=d;c.modified=!0;c.length++;for(c=a.constraints.head;null!=c;)d=c.elt,d.space==this&&this.wake_constraint(d),c=c.next;for(c=a.arbiters.head;null!=c;){d=c.elt;if(d.sleeping)if(d.sleeping=!1,d.up_stamp+=this.stamp+(this.midstep?0:1)-d.sleep_stamp,d.type==Gc.COL){var e=d.colarb;
if(e.stat)var f=this.c_arbiters_true,g;else f=this.c_arbiters_false;null==xd.zpp_pool?g=new xd:(g=xd.zpp_pool,xd.zpp_pool=g.next,g.next=null);g.elt=e;e=g;e.next=f.head;f.head=e;f.modified=!0;f.length++}else d.type==Gc.FLUID?(e=this.f_arbiters,f=d.fluidarb,null==Yd.zpp_pool?g=new Yd:(g=Yd.zpp_pool,Yd.zpp_pool=g.next,g.next=null)):(e=this.s_arbiters,f=d.sensorarb,null==Td.zpp_pool?g=new Td:(g=Td.zpp_pool,Td.zpp_pool=g.next,g.next=null)),g.elt=f,f=g,f.next=e.head,e.head=f,e.modified=!0,e.length++;d.type!=
Gc.SENSOR&&!d.cleared&&d.up_stamp>=this.stamp&&0!=(d.immState&1)&&(2==d.b1.type&&d.b1.component.sleeping&&(e=d.b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))),2==d.b2.type&&d.b2.component.sleeping&&(d=d.b2,d.world||(d.component.waket=this.stamp+(this.midstep?0:1),3==d.type&&(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1))));c=c.next}!b&&2==a.type&&this.bodyCbWake(a);if(!b&&!this.bphase.is_sweep&&
1!=a.type)for(c=a.shapes.head;null!=c;)d=c.elt,null!=d.node&&this.bphase.sync(d),c=c.next}else this.wakeIsland(a.component.island)},wake_constraint:function(a,b){null==b&&(b=!1);if(a.active&&(a.component.waket=this.stamp+(this.midstep?0:1),a.component.sleeping)){if(null==a.component.island){a.component.sleeping=!1;var c=this.live_constraints,d;null==Lc.zpp_pool?d=new Lc:(d=Lc.zpp_pool,Lc.zpp_pool=d.next,d.next=null);d.elt=a;d.next=c.head;c.head=d;c.modified=!0;c.length++;a.wake_connected();b||this.constraintCbWake(a)}else this.wakeIsland(a.component.island);
return!0}return!1},doForests:function(a){for(var b=this.c_arbiters_false.head;null!=b;){var c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&1)&&2==c.b1.type&&2==c.b2.type){var d;if(c.b1.component==c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(var e=null;d!=d.parent;){var f=d.parent;d.parent=e;e=d;d=f}for(;null!=e;)f=e.parent,e.parent=d,e=f}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(e=null;c!=c.parent;)f=c.parent,c.parent=e,
e=c,c=f;for(;null!=e;)f=e.parent,e.parent=c,e=f}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.f_arbiters.head;null!=b;){c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&1)&&2==c.b1.type&&2==c.b2.type){if(c.b1.component==c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(e=null;d!=d.parent;)f=d.parent,d.parent=e,e=d,d=f;for(;null!=e;)f=e.parent,e.parent=d,e=f}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=
c.b2.component;for(e=null;c!=c.parent;)f=c.parent,c.parent=e,e=c,c=f;for(;null!=e;)f=e.parent,e.parent=c,e=f}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.live_constraints.head;null!=b;)b.elt.forest(),b=b.next;for(;null!=this.live.head;){b=this.live;d=b.head.elt;b.pop();b=d.component;if(b==b.parent)c=b;else{c=b;for(e=null;c!=c.parent;)f=c.parent,c.parent=e,e=c,c=f;for(;null!=e;)f=e.parent,e.parent=c,e=f}null==c.island&&(null==Bg.zpp_pool?c.island=
new Bg:(c.island=Bg.zpp_pool,Bg.zpp_pool=c.island.next,c.island.next=null),c.island.waket=0,e=this.islands,f=c.island,f._inuse=!0,f.next=e.next,e.next=f,e.modified=!0,e.length++,c.island.sleep=!0);b.island=c.island;c=b.island.comps;null==Mg.zpp_pool?e=new Mg:(e=Mg.zpp_pool,Mg.zpp_pool=e.next,e.next=null);e.elt=b;e.next=c.head;c.head=e;c.modified=!0;c.length++;d=d.atRest(a);b.island.sleep=b.island.sleep&&d;b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;null!=this.live_constraints.head;){a=this.live_constraints;
b=a.head.elt;a.pop();a=b.component;if(a==a.parent)b=a;else{b=a;for(d=null;b!=b.parent;)c=b.parent,b.parent=d,d=b,b=c;for(;null!=d;)c=d.parent,d.parent=b,d=c}a.island=b.island;b=a.island.comps;null==Mg.zpp_pool?d=new Mg:(d=Mg.zpp_pool,Mg.zpp_pool=d.next,d.next=null);d.elt=a;d.next=b.head;b.head=d;b.modified=!0;b.length++;a.waket>a.island.waket&&(a.island.waket=a.waket)}for(;null!=this.islands.next;)if(a=this.islands,b=a.next,a.pop(),a=b,a.sleep)for(a=a.comps.head;null!=a;){d=a.elt;if(d.isBody){b=d.body;
b.velx=0;b.vely=0;b.angvel=0;d.sleeping=!0;for(d=b.shapes.head;null!=d;)this.bphase.sync(d.elt),d=d.next;this.bodyCbSleep(b)}else this.constraintCbSleep(d.constraint),d.sleeping=!0;a=a.next}else{for(;null!=a.comps.head;)b=a.comps,d=b.head.elt,b.pop(),b=d,b.waket=a.waket,b.isBody?(d=this.live,c=b.body,null==gd.zpp_pool?e=new gd:(e=gd.zpp_pool,gd.zpp_pool=e.next,e.next=null)):(d=this.live_constraints,c=b.constraint,null==Lc.zpp_pool?e=new Lc:(e=Lc.zpp_pool,Lc.zpp_pool=e.next,e.next=null)),e.elt=c,c=
e,c.next=d.head,d.head=c,d.modified=!0,d.length++,b.sleeping=!1,b.island=null,b.parent=b,b.rank=0;a.next=Bg.zpp_pool;Bg.zpp_pool=a}},sleepArbiters:function(){var a=null,b=this.c_arbiters_true,c=b.head,d=null!=this.c_arbiters_false;d&&null==c&&(d=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null);for(;null!=c;){var e=c.elt;e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,null==a?(e=b.head,c=e.next,b.head=c,null==b.head&&(b.pushmod=!0)):(e=a.next,
c=e.next,a.next=c,null==c&&(b.pushmod=!0)),e.elt=null,e.next=xd.zpp_pool,xd.zpp_pool=e,b.modified=!0,b.length--,b.pushmod=!0):(a=c,c=c.next);d&&null==c&&(d=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null)}a=null;b=this.f_arbiters;c=b.head;d=!1;for(;null!=c;)e=c.elt,e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,null==a?(e=b.head,c=e.next,b.head=c,null==b.head&&(b.pushmod=!0)):(e=a.next,c=e.next,a.next=c,null==c&&(b.pushmod=!0)),e.elt=null,e.next=
Yd.zpp_pool,Yd.zpp_pool=e,b.modified=!0,b.length--,b.pushmod=!0):(a=c,c=c.next),d&&null==c&&(d=!1,a=b=null);a=null;b=this.s_arbiters;c=b.head;d=!1;for(;null!=c;)e=c.elt,e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,null==a?(e=b.head,c=e.next,b.head=c,null==b.head&&(b.pushmod=!0)):(e=a.next,c=e.next,a.next=c,null==c&&(b.pushmod=!0)),e.elt=null,e.next=Td.zpp_pool,Td.zpp_pool=e,b.modified=!0,b.length--,b.pushmod=!0):(a=c,c=c.next),d&&null==c&&(d=!1,a=b=null)},
static_validation:function(a){if(null!=a.shapes.head){if(null==a.shapes.head)throw new h("Error: Body bounds only makes sense if it contains shapes");if(a.zip_aabb){a.zip_aabb=!1;a.aabb.minx=Infinity;a.aabb.miny=Infinity;a.aabb.maxx=-Infinity;a.aabb.maxy=-Infinity;for(var b=a.shapes.head;null!=b;){var c=b.elt;if(c.zip_aabb&&null!=c.body)if(c.zip_aabb=!1,0==c.type){var d=c.circle;if(d.zip_worldCOM&&null!=d.body){d.zip_worldCOM=!1;if(d.zip_localCOM){d.zip_localCOM=!1;if(1==d.type){var e=d.polygon;if(null==
e.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=1*e.lverts.next.next.x,e.localCOMy+=1*e.lverts.next.next.y,e.localCOMx*=0.5,e.localCOMy*=0.5;else{e.localCOMx=0;for(var f=e.localCOMy=0,g=e.lverts.next,j=g,i=g=g.next,g=g.next;null!=g;){var k=g,f=f+i.x*(k.y-j.y),j=k.y*i.x-k.x*i.y;
e.localCOMx+=(i.x+k.x)*j;e.localCOMy+=(i.y+k.y)*j;j=i;i=k;g=g.next}k=g=e.lverts.next;f+=i.x*(k.y-j.y);j=k.y*i.x-k.x*i.y;e.localCOMx+=(i.x+k.x)*j;e.localCOMy+=(i.y+k.y)*j;j=i;i=k;g=g.next;f+=i.x*(g.y-j.y);j=g.y*i.x-g.x*i.y;e.localCOMx+=(i.x+g.x)*j;e.localCOMy+=(i.y+g.y)*j;f=1/(3*f);e.localCOMx*=f;e.localCOMy*=f}}null!=d.wrap_localCOM&&(d.wrap_localCOM.zpp_inner.x=d.localCOMx,d.wrap_localCOM.zpp_inner.y=d.localCOMy)}e=d.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));
d.worldCOMx=d.body.posx+(d.body.axisy*d.localCOMx-d.body.axisx*d.localCOMy);d.worldCOMy=d.body.posy+(d.localCOMx*d.body.axisx+d.localCOMy*d.body.axisy)}f=e=d.radius;d.aabb.minx=d.worldCOMx-e;d.aabb.miny=d.worldCOMy-f;d.aabb.maxx=d.worldCOMx+e;d.aabb.maxy=d.worldCOMy+f}else{d=c.polygon;if(d.zip_gverts&&null!=d.body){d.zip_gverts=!1;d.validate_lverts();e=d.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));e=d.lverts.next;for(f=d.gverts.next;null!=f;)i=f,g=e,e=e.next,i.x=
d.body.posx+(d.body.axisy*g.x-d.body.axisx*g.y),i.y=d.body.posy+(g.x*d.body.axisx+g.y*d.body.axisy),f=f.next}if(null==d.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");e=d.gverts.next;d.aabb.minx=e.x;d.aabb.miny=e.y;d.aabb.maxx=e.x;d.aabb.maxy=e.y;for(e=d.gverts.next.next;null!=e;)f=e,f.x<d.aabb.minx&&(d.aabb.minx=f.x),f.x>d.aabb.maxx&&(d.aabb.maxx=f.x),f.y<d.aabb.miny&&(d.aabb.miny=f.y),f.y>d.aabb.maxy&&(d.aabb.maxy=f.y),e=e.next}d=a.aabb;c=c.aabb;c.minx<d.minx&&(d.minx=
c.minx);c.maxx>d.maxx&&(d.maxx=c.maxx);c.miny<d.miny&&(d.miny=c.miny);c.maxy>d.maxy&&(d.maxy=c.maxy);b=b.next}}}a.validate_mass();a.validate_inertia();if(0!=a.velx||0!=a.vely||0!=a.angvel)throw new h("Error: Static body cannot have any real velocity, only kinematic or surface velocities");for(b=a.shapes.head;null!=b;){c=b.elt;if(1==c.type){d=c.polygon;d.zip_sanitation&&(d.zip_sanitation=!1,d.splice_collinear_real());d=c.polygon.valid();null==l.ValidationResult_VALID&&(l.internal=!0,l.ValidationResult_VALID=
new ag,l.internal=!1);if(d!=l.ValidationResult_VALID)throw new h("Error: Cannot simulate with an invalid Polygon : "+c.polygon.outer.toString()+" is invalid : "+d.toString());c=c.polygon;if(c.zip_gaxi&&null!=c.body){c.zip_gaxi=!1;c.validate_laxi();d=c.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot));if(c.zip_gverts&&null!=c.body){c.zip_gverts=!1;c.validate_lverts();d=c.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot));d=c.lverts.next;
for(e=c.gverts.next;null!=e;)f=e,i=d,d=d.next,f.x=c.body.posx+(c.body.axisy*i.x-c.body.axisx*i.y),f.y=c.body.posy+(i.x*c.body.axisx+i.y*c.body.axisy),e=e.next}e=c.edges.head;d=f=c.gverts.next;for(f=f.next;null!=f;)i=f,g=e.elt,e=e.next,g.gp0=d,g.gp1=i,g.gnormx=c.body.axisy*g.lnormx-c.body.axisx*g.lnormy,g.gnormy=g.lnormx*c.body.axisx+g.lnormy*c.body.axisy,g.gprojection=c.body.posx*g.gnormx+c.body.posy*g.gnormy+g.lprojection,null!=g.wrap_gnorm&&(g.wrap_gnorm.zpp_inner.x=g.gnormx,g.wrap_gnorm.zpp_inner.y=
g.gnormy),g.tp0=g.gp0.y*g.gnormx-g.gp0.x*g.gnormy,g.tp1=g.gp1.y*g.gnormx-g.gp1.x*g.gnormy,d=i,f=f.next;f=c.gverts.next;e=e.elt;e.gp0=d;e.gp1=f;e.gnormx=c.body.axisy*e.lnormx-c.body.axisx*e.lnormy;e.gnormy=e.lnormx*c.body.axisx+e.lnormy*c.body.axisy;e.gprojection=c.body.posx*e.gnormx+c.body.posy*e.gnormy+e.lprojection;null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy);e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy;e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy}}b=b.next}a.sweepFrozen=
!0},validation:function(){var a=this.cbsets;if(!a.cbsets.empty()){for(var b=a.cbsets.parent;null!=b.prev;)b=b.prev;for(;null!=b;)if(b.data.validate(),null!=b.next)for(b=b.next;null!=b.prev;)b=b.prev;else{for(;null!=b.parent&&b==b.parent.next;)b=b.parent;b=b.parent}}for(var c=this.live.head;null!=c;){var d=c.elt;d.sweepRadius=0;for(var e=d.shapes.head;null!=e;){var f=e.elt;if(1==f.type){var g=f.polygon;g.zip_sanitation&&(g.zip_sanitation=!1,g.splice_collinear_real());var j=f.polygon.valid();null==
l.ValidationResult_VALID&&(l.internal=!0,l.ValidationResult_VALID=new ag,l.internal=!1);if(j!=l.ValidationResult_VALID)throw new h("Error: Cannot simulate with an invalid Polygon : "+f.polygon.outer.toString()+" is invalid : "+j.toString());var i=f.polygon;if(i.zip_gaxi&&null!=i.body){i.zip_gaxi=!1;i.validate_laxi();var k=i.body;k.zip_axis&&(k.zip_axis=!1,k.axisx=Math.sin(k.rot),k.axisy=Math.cos(k.rot));if(i.zip_gverts&&null!=i.body){i.zip_gverts=!1;i.validate_lverts();var m=i.body;m.zip_axis&&(m.zip_axis=
!1,m.axisx=Math.sin(m.rot),m.axisy=Math.cos(m.rot));for(var n=i.lverts.next,o=i.gverts.next;null!=o;){var q=o,r=n,n=n.next;q.x=i.body.posx+(i.body.axisy*r.x-i.body.axisx*r.y);q.y=i.body.posy+(r.x*i.body.axisx+r.y*i.body.axisy);o=o.next}}for(var s=i.edges.head,u=i.gverts.next,t=u,u=u.next;null!=u;){var w=u,v=s.elt,s=s.next;v.gp0=t;v.gp1=w;v.gnormx=i.body.axisy*v.lnormx-i.body.axisx*v.lnormy;v.gnormy=v.lnormx*i.body.axisx+v.lnormy*i.body.axisy;v.gprojection=i.body.posx*v.gnormx+i.body.posy*v.gnormy+
v.lprojection;null!=v.wrap_gnorm&&(v.wrap_gnorm.zpp_inner.x=v.gnormx,v.wrap_gnorm.zpp_inner.y=v.gnormy);v.tp0=v.gp0.y*v.gnormx-v.gp0.x*v.gnormy;v.tp1=v.gp1.y*v.gnormx-v.gp1.x*v.gnormy;t=w;u=u.next}var z=i.gverts.next,y=s.elt,s=s.next;y.gp0=t;y.gp1=z;y.gnormx=i.body.axisy*y.lnormx-i.body.axisx*y.lnormy;y.gnormy=y.lnormx*i.body.axisx+y.lnormy*i.body.axisy;y.gprojection=i.body.posx*y.gnormx+i.body.posy*y.gnormy+y.lprojection;null!=y.wrap_gnorm&&(y.wrap_gnorm.zpp_inner.x=y.gnormx,y.wrap_gnorm.zpp_inner.y=
y.gnormy);y.tp0=y.gp0.y*y.gnormx-y.gp0.x*y.gnormy;y.tp1=y.gp1.y*y.gnormx-y.gp1.x*y.gnormy}}f.validate_sweepRadius();f.sweepRadius>d.sweepRadius&&(d.sweepRadius=f.sweepRadius);e=e.next}d.validate_mass();d.validate_inertia();if(null!=d.shapes.head){if(null==d.shapes.head)throw new h("Error: Body bounds only makes sense if it contains shapes");if(d.zip_aabb){d.zip_aabb=!1;d.aabb.minx=Infinity;d.aabb.miny=Infinity;d.aabb.maxx=-Infinity;d.aabb.maxy=-Infinity;for(var G=d.shapes.head;null!=G;){var H=G.elt;
if(H.zip_aabb&&null!=H.body)if(H.zip_aabb=!1,0==H.type){var E=H.circle;if(E.zip_worldCOM&&null!=E.body){E.zip_worldCOM=!1;if(E.zip_localCOM){E.zip_localCOM=!1;if(1==E.type){var F=E.polygon;if(null==F.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y,F.localCOMx+=1*F.lverts.next.next.x,F.localCOMy+=
1*F.lverts.next.next.y,F.localCOMx*=0.5,F.localCOMy*=0.5;else{F.localCOMx=0;for(var J=F.localCOMy=0,O=F.lverts.next,P=O,K=O=O.next,O=O.next;null!=O;){var M=O,J=J+K.x*(M.y-P.y),S=M.y*K.x-M.x*K.y;F.localCOMx+=(K.x+M.x)*S;F.localCOMy+=(K.y+M.y)*S;P=K;K=M;O=O.next}var L=O=F.lverts.next,J=J+K.x*(L.y-P.y),X=L.y*K.x-L.x*K.y;F.localCOMx+=(K.x+L.x)*X;F.localCOMy+=(K.y+L.y)*X;var P=K,K=L,V=O=O.next,J=J+K.x*(V.y-P.y),Y=V.y*K.x-V.x*K.y;F.localCOMx+=(K.x+V.x)*Y;F.localCOMy+=(K.y+V.y)*Y;var U=J=1/(3*J);F.localCOMx*=
U;F.localCOMy*=U}}null!=E.wrap_localCOM&&(E.wrap_localCOM.zpp_inner.x=E.localCOMx,E.wrap_localCOM.zpp_inner.y=E.localCOMy)}var Z=E.body;Z.zip_axis&&(Z.zip_axis=!1,Z.axisx=Math.sin(Z.rot),Z.axisy=Math.cos(Z.rot));E.worldCOMx=E.body.posx+(E.body.axisy*E.localCOMx-E.body.axisx*E.localCOMy);E.worldCOMy=E.body.posy+(E.localCOMx*E.body.axisx+E.localCOMy*E.body.axisy)}var ha=E.radius,W=E.radius;E.aabb.minx=E.worldCOMx-ha;E.aabb.miny=E.worldCOMy-W;E.aabb.maxx=E.worldCOMx+ha;E.aabb.maxy=E.worldCOMy+W}else{var va=
H.polygon;if(va.zip_gverts&&null!=va.body){va.zip_gverts=!1;va.validate_lverts();var T=va.body;T.zip_axis&&(T.zip_axis=!1,T.axisx=Math.sin(T.rot),T.axisy=Math.cos(T.rot));for(var ca=va.lverts.next,ka=va.gverts.next;null!=ka;){var ea=ka,sa=ca,ca=ca.next;ea.x=va.body.posx+(va.body.axisy*sa.x-va.body.axisx*sa.y);ea.y=va.body.posy+(sa.x*va.body.axisx+sa.y*va.body.axisy);ka=ka.next}}if(null==va.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");var ga=va.gverts.next;va.aabb.minx=
ga.x;va.aabb.miny=ga.y;va.aabb.maxx=ga.x;va.aabb.maxy=ga.y;for(var fa=va.gverts.next.next;null!=fa;){var $=fa;$.x<va.aabb.minx&&(va.aabb.minx=$.x);$.x>va.aabb.maxx&&(va.aabb.maxx=$.x);$.y<va.aabb.miny&&(va.aabb.miny=$.y);$.y>va.aabb.maxy&&(va.aabb.maxy=$.y);fa=fa.next}}var la=d.aabb,da=H.aabb;da.minx<la.minx&&(la.minx=da.minx);da.maxx>la.maxx&&(la.maxx=da.maxx);da.miny<la.miny&&(la.miny=da.miny);da.maxy>la.maxy&&(la.maxy=da.maxy);G=G.next}}d.validate_worldCOM()}d.validate_gravMass();d.zip_axis&&(d.zip_axis=
!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot));if(!d.nomove&&2==d.type&&0==d.mass)throw new h("Error: Dynamic Body cannot be simulated with 0 mass unless allowMovement is false");if(!d.norotate&&2==d.type&&0==d.inertia)throw new h("Error: Dynamic Body cannot be simulated with 0 inertia unless allowRotation is false");if(d.component.woken&&null!=d.cbSet)for(var oa=d.cbSet.bodylisteners.head;null!=oa;){var ma=oa.elt;if(2==ma.event){var qa=this.push_callback(ma);qa.event=2;qa.body=d}oa=oa.next}d.component.woken=
!1;for(var na=d.shapes.head;null!=na;)this.bphase.sync(na.elt),na=na.next;c=c.next}for(var ja=this.kinematics.head;null!=ja;){var Da=ja.elt;Da.sweepRadius=0;for(var pa=Da.shapes.head;null!=pa;){var ua=pa.elt;if(1==ua.type){var Ca=ua.polygon;Ca.zip_sanitation&&(Ca.zip_sanitation=!1,Ca.splice_collinear_real());var Ha=ua.polygon.valid();null==l.ValidationResult_VALID&&(l.internal=!0,l.ValidationResult_VALID=new ag,l.internal=!1);if(Ha!=l.ValidationResult_VALID)throw new h("Error: Cannot simulate with an invalid Polygon : "+
ua.polygon.outer.toString()+" is invalid : "+Ha.toString());var I=ua.polygon;if(I.zip_gaxi&&null!=I.body){I.zip_gaxi=!1;I.validate_laxi();var Sa=I.body;Sa.zip_axis&&(Sa.zip_axis=!1,Sa.axisx=Math.sin(Sa.rot),Sa.axisy=Math.cos(Sa.rot));if(I.zip_gverts&&null!=I.body){I.zip_gverts=!1;I.validate_lverts();var La=I.body;La.zip_axis&&(La.zip_axis=!1,La.axisx=Math.sin(La.rot),La.axisy=Math.cos(La.rot));for(var Za=I.lverts.next,Qa=I.gverts.next;null!=Qa;){var wa=Qa,ra=Za,Za=Za.next;wa.x=I.body.posx+(I.body.axisy*
ra.x-I.body.axisx*ra.y);wa.y=I.body.posy+(ra.x*I.body.axisx+ra.y*I.body.axisy);Qa=Qa.next}}for(var Ja=I.edges.head,Ea=I.gverts.next,A=Ea,Ea=Ea.next;null!=Ea;){var xa=Ea,Ma=Ja.elt,Ja=Ja.next;Ma.gp0=A;Ma.gp1=xa;Ma.gnormx=I.body.axisy*Ma.lnormx-I.body.axisx*Ma.lnormy;Ma.gnormy=Ma.lnormx*I.body.axisx+Ma.lnormy*I.body.axisy;Ma.gprojection=I.body.posx*Ma.gnormx+I.body.posy*Ma.gnormy+Ma.lprojection;null!=Ma.wrap_gnorm&&(Ma.wrap_gnorm.zpp_inner.x=Ma.gnormx,Ma.wrap_gnorm.zpp_inner.y=Ma.gnormy);Ma.tp0=Ma.gp0.y*
Ma.gnormx-Ma.gp0.x*Ma.gnormy;Ma.tp1=Ma.gp1.y*Ma.gnormx-Ma.gp1.x*Ma.gnormy;A=xa;Ea=Ea.next}var $a=I.gverts.next,za=Ja.elt,Ja=Ja.next;za.gp0=A;za.gp1=$a;za.gnormx=I.body.axisy*za.lnormx-I.body.axisx*za.lnormy;za.gnormy=za.lnormx*I.body.axisx+za.lnormy*I.body.axisy;za.gprojection=I.body.posx*za.gnormx+I.body.posy*za.gnormy+za.lprojection;null!=za.wrap_gnorm&&(za.wrap_gnorm.zpp_inner.x=za.gnormx,za.wrap_gnorm.zpp_inner.y=za.gnormy);za.tp0=za.gp0.y*za.gnormx-za.gp0.x*za.gnormy;za.tp1=za.gp1.y*za.gnormx-
za.gp1.x*za.gnormy}}ua.validate_sweepRadius();ua.sweepRadius>Da.sweepRadius&&(Da.sweepRadius=ua.sweepRadius);pa=pa.next}Da.validate_mass();Da.validate_inertia();if(null!=Da.shapes.head){if(null==Da.shapes.head)throw new h("Error: Body bounds only makes sense if it contains shapes");if(Da.zip_aabb){Da.zip_aabb=!1;Da.aabb.minx=Infinity;Da.aabb.miny=Infinity;Da.aabb.maxx=-Infinity;Da.aabb.maxy=-Infinity;for(var Db=Da.shapes.head;null!=Db;){var ya=Db.elt;if(ya.zip_aabb&&null!=ya.body)if(ya.zip_aabb=!1,
0==ya.type){var Ua=ya.circle;if(Ua.zip_worldCOM&&null!=Ua.body){Ua.zip_worldCOM=!1;if(Ua.zip_localCOM){Ua.zip_localCOM=!1;if(1==Ua.type){var Ba=Ua.polygon;if(null==Ba.lverts.next)throw new h("Error: An empty polygon has no meaningful localCOM");if(null==Ba.lverts.next.next)Ba.localCOMx=Ba.lverts.next.x,Ba.localCOMy=Ba.lverts.next.y;else if(null==Ba.lverts.next.next.next)Ba.localCOMx=Ba.lverts.next.x,Ba.localCOMy=Ba.lverts.next.y,Ba.localCOMx+=1*Ba.lverts.next.next.x,Ba.localCOMy+=1*Ba.lverts.next.next.y,
Ba.localCOMx*=0.5,Ba.localCOMy*=0.5;else{Ba.localCOMx=0;for(var Fa=Ba.localCOMy=0,Ia=Ba.lverts.next,Aa=Ia,ia=Ia=Ia.next,Ia=Ia.next;null!=Ia;){var Ra=Ia,Fa=Fa+ia.x*(Ra.y-Aa.y),ac=Ra.y*ia.x-Ra.x*ia.y;Ba.localCOMx+=(ia.x+Ra.x)*ac;Ba.localCOMy+=(ia.y+Ra.y)*ac;Aa=ia;ia=Ra;Ia=Ia.next}var Pa=Ia=Ba.lverts.next,Fa=Fa+ia.x*(Pa.y-Aa.y),kb=Pa.y*ia.x-Pa.x*ia.y;Ba.localCOMx+=(ia.x+Pa.x)*kb;Ba.localCOMy+=(ia.y+Pa.y)*kb;var Aa=ia,ia=Pa,C=Ia=Ia.next,Fa=Fa+ia.x*(C.y-Aa.y),Ka=C.y*ia.x-C.x*ia.y;Ba.localCOMx+=(ia.x+C.x)*
Ka;Ba.localCOMy+=(ia.y+C.y)*Ka;var ob=Fa=1/(3*Fa);Ba.localCOMx*=ob;Ba.localCOMy*=ob}}null!=Ua.wrap_localCOM&&(Ua.wrap_localCOM.zpp_inner.x=Ua.localCOMx,Ua.wrap_localCOM.zpp_inner.y=Ua.localCOMy)}var ta=Ua.body;ta.zip_axis&&(ta.zip_axis=!1,ta.axisx=Math.sin(ta.rot),ta.axisy=Math.cos(ta.rot));Ua.worldCOMx=Ua.body.posx+(Ua.body.axisy*Ua.localCOMx-Ua.body.axisx*Ua.localCOMy);Ua.worldCOMy=Ua.body.posy+(Ua.localCOMx*Ua.body.axisx+Ua.localCOMy*Ua.body.axisy)}var pb=Ua.radius,Wa=Ua.radius;Ua.aabb.minx=Ua.worldCOMx-
pb;Ua.aabb.miny=Ua.worldCOMy-Wa;Ua.aabb.maxx=Ua.worldCOMx+pb;Ua.aabb.maxy=Ua.worldCOMy+Wa}else{var Q=ya.polygon;if(Q.zip_gverts&&null!=Q.body){Q.zip_gverts=!1;Q.validate_lverts();var aa=Q.body;aa.zip_axis&&(aa.zip_axis=!1,aa.axisx=Math.sin(aa.rot),aa.axisy=Math.cos(aa.rot));for(var Na=Q.lverts.next,ba=Q.gverts.next;null!=ba;){var fb=ba,Ya=Na,Na=Na.next;fb.x=Q.body.posx+(Q.body.axisy*Ya.x-Q.body.axisx*Ya.y);fb.y=Q.body.posy+(Ya.x*Q.body.axisx+Ya.y*Q.body.axisy);ba=ba.next}}if(null==Q.lverts.next)throw new h("Error: An empty polygon has no meaningful bounds");
var Hb=Q.gverts.next;Q.aabb.minx=Hb.x;Q.aabb.miny=Hb.y;Q.aabb.maxx=Hb.x;Q.aabb.maxy=Hb.y;for(var bb=Q.gverts.next.next;null!=bb;){var ib=bb;ib.x<Q.aabb.minx&&(Q.aabb.minx=ib.x);ib.x>Q.aabb.maxx&&(Q.aabb.maxx=ib.x);ib.y<Q.aabb.miny&&(Q.aabb.miny=ib.y);ib.y>Q.aabb.maxy&&(Q.aabb.maxy=ib.y);bb=bb.next}}var Oa=Da.aabb,Va=ya.aabb;Va.minx<Oa.minx&&(Oa.minx=Va.minx);Va.maxx>Oa.maxx&&(Oa.maxx=Va.maxx);Va.miny<Oa.miny&&(Oa.miny=Va.miny);Va.maxy>Oa.maxy&&(Oa.maxy=Va.maxy);Db=Db.next}}Da.validate_worldCOM()}Da.validate_gravMass();
Da.zip_axis&&(Da.zip_axis=!1,Da.axisx=Math.sin(Da.rot),Da.axisy=Math.cos(Da.rot));if(!Da.nomove&&2==Da.type&&0==Da.mass)throw new h("Error: Dynamic Body cannot be simulated with 0 mass unless allowMovement is false");if(!Da.norotate&&2==Da.type&&0==Da.inertia)throw new h("Error: Dynamic Body cannot be simulated with 0 inertia unless allowRotation is false");for(var D=Da.shapes.head;null!=D;)this.bphase.sync(D.elt),D=D.next;ja=ja.next}for(var lb=this.live_constraints.head;null!=lb;){var Ta=lb.elt;
if(Ta.active){Ta.validate();if(Ta.component.woken&&null!=Ta.cbSet)for(var jb=Ta.cbSet.conlisteners.head;null!=jb;){var gb=jb.elt;if(2==gb.event){var Ga=this.push_callback(gb);Ga.event=2;Ga.constraint=Ta}jb=jb.next}Ta.component.woken=!1}lb=lb.next}},updateVel:function(a){for(var b=1-a*this.global_lin_drag,c=1-a*this.global_ang_drag,d=this.live.head;null!=d;){var e=d.elt;if(0!=e.smass){var f=a*e.imass;e.velx=b*e.velx+(e.forcex+this.gravityx*e.gravMass)*f;e.vely=b*e.vely+(e.forcey+this.gravityy*e.gravMass)*
f}if(0!=e.sinertia){var g=f=0,f=e.worldCOMx-e.posx,g=e.worldCOMy-e.posy;e.angvel=c*e.angvel+(e.torque+(this.gravityy*f-this.gravityx*g)*e.gravMass)*a*e.iinertia}d=d.next}},updatePos:function(a){for(var b=2*Math.PI/a,c=this.live.head;null!=c;){var d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=d.angvel%b;var e=a-d.sweepTime;if(0!=e){d.sweepTime=a;var f=e;d.posx+=d.velx*f;d.posy+=d.vely*f;if(0!=d.angvel){var g=d.sweep_angvel*e;d.rot+=g;if(1.0E-4<g*g)d.axisx=
Math.sin(d.rot),d.axisy=Math.cos(d.rot);else{var j=g*g,h=1-0.5*j,i=1-j*j/8,k=(h*d.axisx+g*d.axisy)*i;d.axisy=(h*d.axisy-g*d.axisx)*i;d.axisx=k}}}if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else{var l=u.staticCCDLinearThreshold*d.sweepRadius,m=u.staticCCDAngularThreshold;if((d.velx*d.velx+d.vely*d.vely)*a*a>l*l||d.angvel*d.angvel*a*a>m*m||3==d.type){var n=d.sweep_angvel;0>n&&(n=-n);for(var o=1/n,q=d.shapes.head;null!=q;){var r=q.elt,s=r.aabb,t=s.minx,v=s.miny,w=s.maxx,y=s.maxy,z=0.008333333333333333*
n*a*r.sweepCoef|0;8<z&&(z=8);var F=n*a/z,E=a-d.sweepTime;if(0!=E){d.sweepTime=a;var G=E;d.posx+=d.velx*G;d.posy+=d.vely*G;if(0!=d.angvel){var H=d.sweep_angvel*E;d.rot+=H;if(1.0E-4<H*H)d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot);else{var J=H*H,O=1-0.5*J,P=1-J*J/8,K=(O*d.axisx+H*d.axisy)*P;d.axisy=(O*d.axisy-H*d.axisx)*P;d.axisx=K}}}if(0==r.type){var M=r.circle;M.worldCOMx=M.body.posx+(M.body.axisy*M.localCOMx-M.body.axisx*M.localCOMy);M.worldCOMy=M.body.posy+(M.localCOMx*M.body.axisx+M.localCOMy*
M.body.axisy);M.aabb.minx=M.worldCOMx-M.radius;M.aabb.miny=M.worldCOMy-M.radius;M.aabb.maxx=M.worldCOMx+M.radius;M.aabb.maxy=M.worldCOMy+M.radius}else{var L=r.polygon,S=L.lverts.next,V=L.gverts.next,Y=S,S=S.next;V.x=L.body.posx+(L.body.axisy*Y.x-L.body.axisx*Y.y);V.y=L.body.posy+(Y.x*L.body.axisx+Y.y*L.body.axisy);L.aabb.minx=V.x;L.aabb.miny=V.y;L.aabb.maxx=V.x;L.aabb.maxy=V.y;for(var X=L.gverts.next.next;null!=X;){var U=X,Z=S,S=S.next;U.x=L.body.posx+(L.body.axisy*Z.x-L.body.axisx*Z.y);U.y=L.body.posy+
(Z.x*L.body.axisx+Z.y*L.body.axisy);U.x<L.aabb.minx&&(L.aabb.minx=U.x);U.x>L.aabb.maxx&&(L.aabb.maxx=U.x);U.y<L.aabb.miny&&(L.aabb.miny=U.y);U.y>L.aabb.maxy&&(L.aabb.maxy=U.y);X=X.next}}t<s.minx?s.minx=t:t=s.minx;v<s.miny?s.miny=v:v=s.miny;w>s.maxx?s.maxx=w:w=s.maxx;y>s.maxy?s.maxy=y:y=s.maxy;for(var ha=1,va=z;ha<va;){var T=ha++,W=F*T*o,ka=W-d.sweepTime;if(0!=ka){d.sweepTime=W;var $=ka;d.posx+=d.velx*$;d.posy+=d.vely*$;if(0!=d.angvel){var ca=d.sweep_angvel*ka;d.rot+=ca;if(1.0E-4<ca*ca)d.axisx=Math.sin(d.rot),
d.axisy=Math.cos(d.rot);else{var la=ca*ca,da=1-0.5*la,sa=1-la*la/8,ga=(da*d.axisx+ca*d.axisy)*sa;d.axisy=(da*d.axisy-ca*d.axisx)*sa;d.axisx=ga}}}if(0==r.type){var ea=r.circle;ea.worldCOMx=ea.body.posx+(ea.body.axisy*ea.localCOMx-ea.body.axisx*ea.localCOMy);ea.worldCOMy=ea.body.posy+(ea.localCOMx*ea.body.axisx+ea.localCOMy*ea.body.axisy);ea.aabb.minx=ea.worldCOMx-ea.radius;ea.aabb.miny=ea.worldCOMy-ea.radius;ea.aabb.maxx=ea.worldCOMx+ea.radius;ea.aabb.maxy=ea.worldCOMy+ea.radius}else{var oa=r.polygon,
fa=oa.lverts.next,ma=oa.gverts.next,na=fa,fa=fa.next;ma.x=oa.body.posx+(oa.body.axisy*na.x-oa.body.axisx*na.y);ma.y=oa.body.posy+(na.x*oa.body.axisx+na.y*oa.body.axisy);oa.aabb.minx=ma.x;oa.aabb.miny=ma.y;oa.aabb.maxx=ma.x;oa.aabb.maxy=ma.y;for(var ja=oa.gverts.next.next;null!=ja;){var Da=ja,pa=fa,fa=fa.next;Da.x=oa.body.posx+(oa.body.axisy*pa.x-oa.body.axisx*pa.y);Da.y=oa.body.posy+(pa.x*oa.body.axisx+pa.y*oa.body.axisy);Da.x<oa.aabb.minx&&(oa.aabb.minx=Da.x);Da.x>oa.aabb.maxx&&(oa.aabb.maxx=Da.x);
Da.y<oa.aabb.miny&&(oa.aabb.miny=Da.y);Da.y>oa.aabb.maxy&&(oa.aabb.maxy=Da.y);ja=ja.next}}t<s.minx?s.minx=t:t=s.minx;v<s.miny?s.miny=v:v=s.miny;w>s.maxx?s.maxx=w:w=s.maxx;y>s.maxy?s.maxy=y:y=s.maxy}this.bphase.sync(r);q=q.next}d.sweepFrozen=!1;if(2==d.type&&d.bulletEnabled){var qa=u.bulletCCDLinearThreshold*d.sweepRadius,ua=u.bulletCCDAngularThreshold;if((d.velx*d.velx+d.vely*d.vely)*a*a>qa*qa||d.angvel*d.angvel*a*a>ua*ua)d.bullet=!0}}else d.sweepFrozen=!0,d.bullet=!1}c=c.next}for(var Ca=this.kinematics.head;null!=
Ca;){var I=Ca.elt;I.pre_posx=I.posx;I.pre_posy=I.posy;I.pre_rot=I.rot;I.sweepTime=0;I.sweep_angvel=I.angvel%b;var Sa=a-I.sweepTime;if(0!=Sa){I.sweepTime=a;var Ia=Sa;I.posx+=I.velx*Ia;I.posy+=I.vely*Ia;if(0!=I.angvel){var Ha=I.sweep_angvel*Sa;I.rot+=Ha;if(1.0E-4<Ha*Ha)I.axisx=Math.sin(I.rot),I.axisy=Math.cos(I.rot);else{var Fa=Ha*Ha,wa=1-0.5*Fa,ra=1-Fa*Fa/8,Ja=(wa*I.axisx+Ha*I.axisy)*ra;I.axisy=(wa*I.axisy-Ha*I.axisx)*ra;I.axisx=Ja}}}if(I.disableCCD)I.sweepFrozen=!0,I.bullet=!1;else{var Ea=u.staticCCDLinearThreshold*
I.sweepRadius,A=u.staticCCDAngularThreshold;if((I.velx*I.velx+I.vely*I.vely)*a*a>Ea*Ea||I.angvel*I.angvel*a*a>A*A||3==I.type){var xa=I.sweep_angvel;0>xa&&(xa=-xa);for(var Ma=1/xa,$a=I.shapes.head;null!=$a;){var za=$a.elt,Db=za.aabb,ya=Db.minx,Ua=Db.miny,Ba=Db.maxx,La=Db.maxy,Qa=0.008333333333333333*xa*a*za.sweepCoef|0;8<Qa&&(Qa=8);var Ra=xa*a/Qa,ia=a-I.sweepTime;if(0!=ia){I.sweepTime=a;var Za=ia;I.posx+=I.velx*Za;I.posy+=I.vely*Za;if(0!=I.angvel){var Pa=I.sweep_angvel*ia;I.rot+=Pa;if(1.0E-4<Pa*Pa)I.axisx=
Math.sin(I.rot),I.axisy=Math.cos(I.rot);else{var Aa=Pa*Pa,kb=1-0.5*Aa,C=1-Aa*Aa/8,Ya=(kb*I.axisx+Pa*I.axisy)*C;I.axisy=(kb*I.axisy-Pa*I.axisx)*C;I.axisx=Ya}}}if(0==za.type){var ob=za.circle;ob.worldCOMx=ob.body.posx+(ob.body.axisy*ob.localCOMx-ob.body.axisx*ob.localCOMy);ob.worldCOMy=ob.body.posy+(ob.localCOMx*ob.body.axisx+ob.localCOMy*ob.body.axisy);ob.aabb.minx=ob.worldCOMx-ob.radius;ob.aabb.miny=ob.worldCOMy-ob.radius;ob.aabb.maxx=ob.worldCOMx+ob.radius;ob.aabb.maxy=ob.worldCOMy+ob.radius}else{var ta=
za.polygon,pb=ta.lverts.next,Ka=ta.gverts.next,Q=pb,pb=pb.next;Ka.x=ta.body.posx+(ta.body.axisy*Q.x-ta.body.axisx*Q.y);Ka.y=ta.body.posy+(Q.x*ta.body.axisx+Q.y*ta.body.axisy);ta.aabb.minx=Ka.x;ta.aabb.miny=Ka.y;ta.aabb.maxx=Ka.x;ta.aabb.maxy=Ka.y;for(var aa=ta.gverts.next.next;null!=aa;){var Na=aa,ba=pb,pb=pb.next;Na.x=ta.body.posx+(ta.body.axisy*ba.x-ta.body.axisx*ba.y);Na.y=ta.body.posy+(ba.x*ta.body.axisx+ba.y*ta.body.axisy);Na.x<ta.aabb.minx&&(ta.aabb.minx=Na.x);Na.x>ta.aabb.maxx&&(ta.aabb.maxx=
Na.x);Na.y<ta.aabb.miny&&(ta.aabb.miny=Na.y);Na.y>ta.aabb.maxy&&(ta.aabb.maxy=Na.y);aa=aa.next}}ya<Db.minx?Db.minx=ya:ya=Db.minx;Ua<Db.miny?Db.miny=Ua:Ua=Db.miny;Ba>Db.maxx?Db.maxx=Ba:Ba=Db.maxx;La>Db.maxy?Db.maxy=La:La=Db.maxy;for(var Wa=1,fb=Qa;Wa<fb;){var Hb=Wa++,bb=Ra*Hb*Ma,ib=bb-I.sweepTime;if(0!=ib){I.sweepTime=bb;var Oa=ib;I.posx+=I.velx*Oa;I.posy+=I.vely*Oa;if(0!=I.angvel){var Va=I.sweep_angvel*ib;I.rot+=Va;if(1.0E-4<Va*Va)I.axisx=Math.sin(I.rot),I.axisy=Math.cos(I.rot);else{var D=Va*Va,lb=
1-0.5*D,Ta=1-D*D/8,jb=(lb*I.axisx+Va*I.axisy)*Ta;I.axisy=(lb*I.axisy-Va*I.axisx)*Ta;I.axisx=jb}}}if(0==za.type){var gb=za.circle;gb.worldCOMx=gb.body.posx+(gb.body.axisy*gb.localCOMx-gb.body.axisx*gb.localCOMy);gb.worldCOMy=gb.body.posy+(gb.localCOMx*gb.body.axisx+gb.localCOMy*gb.body.axisy);gb.aabb.minx=gb.worldCOMx-gb.radius;gb.aabb.miny=gb.worldCOMy-gb.radius;gb.aabb.maxx=gb.worldCOMx+gb.radius;gb.aabb.maxy=gb.worldCOMy+gb.radius}else{var Ga=za.polygon,Eb=Ga.lverts.next,cb=Ga.gverts.next,zb=Eb,
Eb=Eb.next;cb.x=Ga.body.posx+(Ga.body.axisy*zb.x-Ga.body.axisx*zb.y);cb.y=Ga.body.posy+(zb.x*Ga.body.axisx+zb.y*Ga.body.axisy);Ga.aabb.minx=cb.x;Ga.aabb.miny=cb.y;Ga.aabb.maxx=cb.x;Ga.aabb.maxy=cb.y;for(var nb=Ga.gverts.next.next;null!=nb;){var Xa=nb,sb=Eb,Eb=Eb.next;Xa.x=Ga.body.posx+(Ga.body.axisy*sb.x-Ga.body.axisx*sb.y);Xa.y=Ga.body.posy+(sb.x*Ga.body.axisx+sb.y*Ga.body.axisy);Xa.x<Ga.aabb.minx&&(Ga.aabb.minx=Xa.x);Xa.x>Ga.aabb.maxx&&(Ga.aabb.maxx=Xa.x);Xa.y<Ga.aabb.miny&&(Ga.aabb.miny=Xa.y);
Xa.y>Ga.aabb.maxy&&(Ga.aabb.maxy=Xa.y);nb=nb.next}}ya<Db.minx?Db.minx=ya:ya=Db.minx;Ua<Db.miny?Db.miny=Ua:Ua=Db.miny;Ba>Db.maxx?Db.maxx=Ba:Ba=Db.maxx;La>Db.maxy?Db.maxy=La:La=Db.maxy}this.bphase.sync(za);$a=$a.next}I.sweepFrozen=!1;if(2==I.type&&I.bulletEnabled){var Ib=u.bulletCCDLinearThreshold*I.sweepRadius,ub=u.bulletCCDAngularThreshold;if((I.velx*I.velx+I.vely*I.vely)*a*a>Ib*Ib||I.angvel*I.angvel*a*a>ub*ub)I.bullet=!0}}else I.sweepFrozen=!0,I.bullet=!1}Ca=Ca.next}},presteparb:function(a,b,c){null==
c&&(c=!1);if(!a.cleared&&a.b1.component.sleeping&&a.b2.component.sleeping)return a.sleep_stamp=this.stamp,a.sleeping=!0;if(!a.cleared||0!=a.present||a.intchange){var d=!c&&a.up_stamp==this.stamp-1&&!a.cleared&&!a.intchange,e=a.fresh&&!a.cleared&&!a.intchange;d&&(a.endGenerated=this.stamp);if(e||d||a.cleared||a.intchange){for(var f=a.ws1,g=a.ws2,j=this.mrca1;null!=j.head;){var h=j.head;j.head=h.next;var i=h;i.elt=null;i.next=F.zpp_pool;F.zpp_pool=i;null==j.head&&(j.pushmod=!0);j.modified=!0;j.length--}j.pushmod=
!0;for(var k=this.mrca2;null!=k.head;){var l=k.head;k.head=l.next;var m=l;m.elt=null;m.next=F.zpp_pool;F.zpp_pool=m;null==k.head&&(k.pushmod=!0);k.modified=!0;k.length--}k.pushmod=!0;if(null!=f.cbSet){var n=this.mrca1,o;null==F.zpp_pool?o=new F:(o=F.zpp_pool,F.zpp_pool=o.next,o.next=null);o.elt=f;var q=o;q.next=n.head;n.head=q;n.modified=!0;n.length++}if(null!=f.body.cbSet){var r=this.mrca1,s=f.body,t;null==F.zpp_pool?t=new F:(t=F.zpp_pool,F.zpp_pool=t.next,t.next=null);t.elt=s;var v=t;v.next=r.head;
r.head=v;r.modified=!0;r.length++}if(null!=g.cbSet){var w=this.mrca2,y;null==F.zpp_pool?y=new F:(y=F.zpp_pool,F.zpp_pool=y.next,y.next=null);y.elt=g;var z=y;z.next=w.head;w.head=z;w.modified=!0;w.length++}if(null!=g.body.cbSet){var E=this.mrca2,G=g.body,H;null==F.zpp_pool?H=new F:(H=F.zpp_pool,F.zpp_pool=H.next,H.next=null);H.elt=G;var J=H;J.next=E.head;E.head=J;E.modified=!0;E.length++}for(var P=f.body.compound,K=g.body.compound;P!=K;)if((null==P?0:P.depth)<(null==K?0:K.depth)){if(null!=K.cbSet){var M=
this.mrca2,L;null==F.zpp_pool?L=new F:(L=F.zpp_pool,F.zpp_pool=L.next,L.next=null);L.elt=K;var S=L;S.next=M.head;M.head=S;M.modified=!0;M.length++}K=K.compound}else{if(null!=P.cbSet){var V=this.mrca1,U;null==F.zpp_pool?U=new F:(U=F.zpp_pool,F.zpp_pool=U.next,U.next=null);U.elt=P;var X=U;X.next=V.head;V.head=X;V.modified=!0;V.length++}P=P.compound}for(var Y=this.mrca1.head;null!=Y;){for(var Z=Y.elt,ha=this.mrca2.head;null!=ha;){for(var W=ha.elt,T=Z.cbSet,va=W.cbSet,ca=null,ka=(T.cbpairs.length<va.cbpairs.length?
T.cbpairs:va.cbpairs).head;null!=ka;){var fa=ka.elt;if(fa.a==T&&fa.b==va||fa.a==va&&fa.b==T){ca=fa;break}ka=ka.next}if(null==ca){var $;null==O.zpp_pool?$=new O:($=O.zpp_pool,O.zpp_pool=$.next,$.next=null);$.zip_listeners=!0;ea.setlt(T,va)?($.a=T,$.b=va):($.a=va,$.b=T);ca=$;T.cbpairs.add(ca);va!=T&&va.cbpairs.add(ca)}ca.zip_listeners&&(ca.zip_listeners=!1,ca.__validate());if(null!=ca.listeners.head){var da=je.get(Z,W);if(e||a.intchange){null==da&&(da=Lf.get(Z,W),this.add_callbackset(da));for(var ga=
null,ma=(T.cbpairs.length<va.cbpairs.length?T.cbpairs:va.cbpairs).head;null!=ma;){var na=ma.elt;if(na.a==T&&na.b==va||na.a==va&&na.b==T){ga=na;break}ma=ma.next}if(null==ga){var ja;null==O.zpp_pool?ja=new O:(ja=O.zpp_pool,O.zpp_pool=ja.next,ja.next=null);ja.zip_listeners=!0;ea.setlt(T,va)?(ja.a=T,ja.b=va):(ja.a=va,ja.b=T);ga=ja;T.cbpairs.add(ga);va!=T&&va.cbpairs.add(ga)}ga.zip_listeners&&(ga.zip_listeners=!1,ga.__validate());for(var pa=ga.listeners.head;null!=pa;){var oa=pa.elt;if(0==oa.event&&0!=
(oa.itype&a.type)&&da.empty_arb(oa.itype)){var qa=this.push_callback(oa);qa.event=0;var ua=da.int1,Ca=da.int2,Ha,Da=oa.options1,Ia=ua.cbTypes;if(Da.nonemptyintersection(Ia,Da.includes)&&!Da.nonemptyintersection(Ia,Da.excludes)){var La=oa.options2,Pa=Ca.cbTypes;Ha=La.nonemptyintersection(Pa,La.includes)?!La.nonemptyintersection(Pa,La.excludes):!1}else Ha=!1;Ha?(qa.int1=ua,qa.int2=Ca):(qa.int1=Ca,qa.int2=ua);qa.set=da}pa=pa.next}var Fa,I;I=!1;for(var Sa=da.arbiters.head;null!=Sa;){if(Sa.elt==a){I=!0;
break}Sa=Sa.next}if(I)Fa=!1;else{var Qa=da.arbiters,Aa;null==la.zpp_pool?Aa=new la:(Aa=la.zpp_pool,la.zpp_pool=Aa.next,Aa.next=null);Aa.elt=a;var Za=Aa;Za.next=Qa.head;Qa.head=Za;Qa.modified=!0;Qa.length++;Fa=!0}Fa&&a.present++}else{a.present--;da.remove_arb(a);for(var wa=null,ra=(T.cbpairs.length<va.cbpairs.length?T.cbpairs:va.cbpairs).head;null!=ra;){var Ja=ra.elt;if(Ja.a==T&&Ja.b==va||Ja.a==va&&Ja.b==T){wa=Ja;break}ra=ra.next}if(null==wa){var Ea;null==O.zpp_pool?Ea=new O:(Ea=O.zpp_pool,O.zpp_pool=
Ea.next,Ea.next=null);Ea.zip_listeners=!0;ea.setlt(T,va)?(Ea.a=T,Ea.b=va):(Ea.a=va,Ea.b=T);wa=Ea;T.cbpairs.add(wa);va!=T&&va.cbpairs.add(wa)}wa.zip_listeners&&(wa.zip_listeners=!1,wa.__validate());for(var A=wa.listeners.head;null!=A;){var xa=A.elt;if(1==xa.event&&0!=(xa.itype&a.type)&&da.empty_arb(xa.itype)){var Ma=this.push_callback(xa);Ma.event=1;var $a=da.int1,za=da.int2,Db,ya=xa.options1,Ua=$a.cbTypes;if(ya.nonemptyintersection(Ua,ya.includes)&&!ya.nonemptyintersection(Ua,ya.excludes)){var Ba=
xa.options2,Ra=za.cbTypes;Db=Ba.nonemptyintersection(Ra,Ba.includes)?!Ba.nonemptyintersection(Ra,Ba.excludes):!1}else Db=!1;Db?(Ma.int1=$a,Ma.int2=za):(Ma.int1=za,Ma.int2=$a);Ma.set=da}A=A.next}null==da.arbiters.head&&this.remove_callbackset(da)}}ha=ha.next}Y=Y.next}}a.fresh=!1;a.intchange=!1}if(a.cleared||a.up_stamp+(a.type==Gc.COL?u.arbiterExpirationDelay:0)<this.stamp){if(a.type==Gc.SENSOR){var Ka=a.sensorarb;if(!Ka.cleared){for(var Xa=Ka.b1.arbiters,ia=null,Ya=Xa.head;null!=Ya;){if(Ya.elt==Ka){var Wa,
fb;null==ia?(Wa=Xa.head,fb=Wa.next,Xa.head=fb,null==Xa.head&&(Xa.pushmod=!0)):(Wa=ia.next,fb=Wa.next,ia.next=fb,null==fb&&(Xa.pushmod=!0));var kb=Wa;kb.elt=null;kb.next=la.zpp_pool;la.zpp_pool=kb;Xa.modified=!0;Xa.length--;Xa.pushmod=!0;break}ia=Ya;Ya=Ya.next}for(var C=Ka.b2.arbiters,nb=null,ob=C.head;null!=ob;){if(ob.elt==Ka){var ta,pb;null==nb?(ta=C.head,pb=ta.next,C.head=pb,null==C.head&&(C.pushmod=!0)):(ta=nb.next,pb=ta.next,nb.next=pb,null==pb&&(C.pushmod=!0));var sb=ta;sb.elt=null;sb.next=la.zpp_pool;
la.zpp_pool=sb;C.modified=!0;C.length--;C.pushmod=!0;break}nb=ob;ob=ob.next}null!=Ka.pair&&(Ka.pair.arb=null,Ka.pair=null)}Ka.b1=Ka.b2=null;Ka.active=!1;Ka.intchange=!1;Ka.next=ch.zpp_pool;ch.zpp_pool=Ka}else if(a.type==Gc.FLUID){var Q=a.fluidarb;if(!Q.cleared){for(var aa=Q.b1.arbiters,Na=null,ba=aa.head;null!=ba;){if(ba.elt==Q){var hb,rb;null==Na?(hb=aa.head,rb=hb.next,aa.head=rb,null==aa.head&&(aa.pushmod=!0)):(hb=Na.next,rb=hb.next,Na.next=rb,null==rb&&(aa.pushmod=!0));var Hb=hb;Hb.elt=null;Hb.next=
la.zpp_pool;la.zpp_pool=Hb;aa.modified=!0;aa.length--;aa.pushmod=!0;break}Na=ba;ba=ba.next}for(var bb=Q.b2.arbiters,ib=null,Oa=bb.head;null!=Oa;){if(Oa.elt==Q){var Va,D;null==ib?(Va=bb.head,D=Va.next,bb.head=D,null==bb.head&&(bb.pushmod=!0)):(Va=ib.next,D=Va.next,ib.next=D,null==D&&(bb.pushmod=!0));var lb=Va;lb.elt=null;lb.next=la.zpp_pool;la.zpp_pool=lb;bb.modified=!0;bb.length--;bb.pushmod=!0;break}ib=Oa;Oa=Oa.next}null!=Q.pair&&(Q.pair.arb=null,Q.pair=null)}Q.b1=Q.b2=null;Q.active=!1;Q.intchange=
!1;Q.next=Pf.zpp_pool;Pf.zpp_pool=Q;Q.pre_dt=-1}else{var Ta=a.colarb;if(!Ta.cleared){for(var jb=Ta.b1.arbiters,gb=null,Ga=jb.head;null!=Ga;){if(Ga.elt==Ta){var Eb,cb;null==gb?(Eb=jb.head,cb=Eb.next,jb.head=cb,null==jb.head&&(jb.pushmod=!0)):(Eb=gb.next,cb=Eb.next,gb.next=cb,null==cb&&(jb.pushmod=!0));var zb=Eb;zb.elt=null;zb.next=la.zpp_pool;la.zpp_pool=zb;jb.modified=!0;jb.length--;jb.pushmod=!0;break}gb=Ga;Ga=Ga.next}for(var Nc=Ta.b2.arbiters,Gb=null,Cb=Nc.head;null!=Cb;){if(Cb.elt==Ta){var Ib,
ub;null==Gb?(Ib=Nc.head,ub=Ib.next,Nc.head=ub,null==Nc.head&&(Nc.pushmod=!0)):(Ib=Gb.next,ub=Ib.next,Gb.next=ub,null==ub&&(Nc.pushmod=!0));var wb=Ib;wb.elt=null;wb.next=la.zpp_pool;la.zpp_pool=wb;Nc.modified=!0;Nc.length--;Nc.pushmod=!0;break}Gb=Cb;Cb=Cb.next}null!=Ta.pair&&(Ta.pair.arb=null,Ta.pair=null)}Ta.b1=Ta.b2=null;Ta.active=!1;for(Ta.intchange=!1;null!=Ta.contacts.next;){var mb=Ta.contacts,Tb=mb.next;mb.pop();var B=Tb;B.arbiter=null;B.next=sa.zpp_pool;sa.zpp_pool=B;var Bb=Ta.innards,db=Bb.next;
Bb.next=db.next;db._inuse=!1;null==Bb.next&&(Bb.pushmod=!0);Bb.modified=!0;Bb.length--}Ta.userdef_dyn_fric=!1;Ta.userdef_stat_fric=!1;Ta.userdef_restitution=!1;Ta.userdef_rfric=!1;Ta.__ref_edge1=Ta.__ref_edge2=null;Ta.next=Qf.zpp_pool;Qf.zpp_pool=Ta;Ta.pre_dt=-1}return!0}var ab=a.active;a.active=a.presentable=a.up_stamp==this.stamp;if(0!=(a.immState&1)){if(a.active&&a.type!=Gc.SENSOR)if(null!=a.colarb){var x=a.colarb;x.invalidated&&(x.invalidated=!1,x.userdef_restitution||(x.restitution=-Infinity>=
x.s1.material.elasticity||-Infinity>=x.s2.material.elasticity?0:Infinity<=x.s1.material.elasticity||Infinity<=x.s2.material.elasticity?1:(x.s1.material.elasticity+x.s2.material.elasticity)/2,0>x.restitution&&(x.restitution=0),1<x.restitution&&(x.restitution=1)),x.userdef_dyn_fric||(x.dyn_fric=Math.sqrt(x.s1.material.dynamicFriction*x.s2.material.dynamicFriction)),x.userdef_stat_fric||(x.stat_fric=Math.sqrt(x.s1.material.staticFriction*x.s2.material.staticFriction)),x.userdef_rfric||(x.rfric=Math.sqrt(x.s1.material.rollingFriction*
x.s2.material.rollingFriction)));-1==x.pre_dt&&(x.pre_dt=b);var Nb=b/x.pre_dt;x.pre_dt=b;var Jb=x.b1.smass+x.b2.smass;x.hc2=!1;var qb=!0;x.biasCoef=2!=x.b1.type||2!=x.b2.type?x.continuous?u.contactContinuousStaticBiasCoef:u.contactStaticBiasCoef:x.continuous?u.contactContinuousBiasCoef:u.contactBiasCoef;x.continuous=!1;for(var Mb=null,Rb=null,Sb=x.innards.next,vb=x.contacts.next;null!=vb;){var eb=vb;if(eb.stamp+u.arbiterExpirationDelay<x.stamp){var Ob=x.contacts,Ub,Vb;null==Mb?(Ub=Ob.next,Vb=Ub.next,
Ob.next=Vb,null==Ob.next&&(Ob.pushmod=!0)):(Ub=Mb.next,Vb=Ub.next,Mb.next=Vb,null==Vb&&(Ob.pushmod=!0));Ub._inuse=!1;Ob.modified=!0;Ob.length--;Ob.pushmod=!0;var vb=Vb,Qb=x.innards,Zb,yb;null==Rb?(Zb=Qb.next,yb=Zb.next,Qb.next=yb,null==Qb.next&&(Qb.pushmod=!0)):(Zb=Rb.next,yb=Zb.next,Rb.next=yb,null==yb&&(Qb.pushmod=!0));Zb._inuse=!1;Qb.modified=!0;Qb.length--;Qb.pushmod=!0;var Sb=yb,ec=eb;ec.arbiter=null;ec.next=sa.zpp_pool;sa.zpp_pool=ec}else{var Xb=eb.inner,hc=eb.active;eb.active=eb.stamp==x.stamp;
if(eb.active){qb?(qb=!1,x.c1=Xb,x.oc1=eb):(x.hc2=!0,x.c2=Xb,x.oc2=eb);Xb.r2x=eb.px-x.b2.posx;Xb.r2y=eb.py-x.b2.posy;Xb.r1x=eb.px-x.b1.posx;Xb.r1y=eb.py-x.b1.posy;var Pb=Xb.r2x*x.nx+Xb.r2y*x.ny,R=Jb+x.b2.sinertia*Pb*Pb,Ec=Xb.r1x*x.nx+Xb.r1y*x.ny,R=R+x.b1.sinertia*Ec*Ec;Xb.tMass=R<u.epsilon*u.epsilon?0:1/R;var vc=x.ny*Xb.r2x-x.nx*Xb.r2y,oc=Jb+x.b2.sinertia*vc*vc,Lb=x.ny*Xb.r1x-x.nx*Xb.r1y,oc=oc+x.b1.sinertia*Lb*Lb;Xb.nMass=oc<u.epsilon*u.epsilon?0:1/oc;var Ic=0,sc=0,qc=x.b2.angvel+x.b2.kinangvel,Ic=
x.b2.velx+x.b2.kinvelx-Xb.r2y*qc,sc=x.b2.vely+x.b2.kinvely+Xb.r2x*qc,qc=x.b1.angvel+x.b1.kinangvel,Ic=Ic-(x.b1.velx+x.b1.kinvelx-Xb.r1y*qc),sc=sc-(x.b1.vely+x.b1.kinvely+Xb.r1x*qc),Wb=x.nx*Ic+x.ny*sc;eb.elasticity=x.restitution;Xb.bounce=Wb*eb.elasticity;Xb.bounce>-u.elasticThreshold&&(Xb.bounce=0);var Wb=sc*x.nx-Ic*x.ny,bc=u.staticFrictionThreshold;Xb.friction=Wb*Wb>bc*bc?x.dyn_fric:x.stat_fric;Xb.jnAcc*=Nb;Xb.jtAcc*=Nb}hc!=eb.active&&(x.contacts.modified=!0);Mb=vb;Rb=Sb;Sb=Sb.next;vb=vb.next}}if(x.hc2){x.hpc2=
!0;if(x.oc1.posOnly){var wc=x.c1;x.c1=x.c2;x.c2=wc;var Kb=x.oc1;x.oc1=x.oc2;x.oc2=Kb;x.hc2=!1}else x.oc2.posOnly&&(x.hc2=!1);x.oc1.posOnly&&(qb=!0)}else x.hpc2=!1;x.jrAcc*=Nb;qb||(x.rn1a=x.ny*x.c1.r1x-x.nx*x.c1.r1y,x.rt1a=x.c1.r1x*x.nx+x.c1.r1y*x.ny,x.rn1b=x.ny*x.c1.r2x-x.nx*x.c1.r2y,x.rt1b=x.c1.r2x*x.nx+x.c1.r2y*x.ny,x.k1x=x.b2.kinvelx-x.c1.r2y*x.b2.kinangvel-(x.b1.kinvelx-x.c1.r1y*x.b1.kinangvel),x.k1y=x.b2.kinvely+x.c1.r2x*x.b2.kinangvel-(x.b1.kinvely+x.c1.r1x*x.b1.kinangvel));if(x.hc2)if(x.rn2a=
x.ny*x.c2.r1x-x.nx*x.c2.r1y,x.rt2a=x.c2.r1x*x.nx+x.c2.r1y*x.ny,x.rn2b=x.ny*x.c2.r2x-x.nx*x.c2.r2y,x.rt2b=x.c2.r2x*x.nx+x.c2.r2y*x.ny,x.k2x=x.b2.kinvelx-x.c2.r2y*x.b2.kinangvel-(x.b1.kinvelx-x.c2.r1y*x.b1.kinangvel),x.k2y=x.b2.kinvely+x.c2.r2x*x.b2.kinangvel-(x.b1.kinvely+x.c2.r1x*x.b1.kinangvel),x.kMassa=Jb+x.b1.sinertia*x.rn1a*x.rn1a+x.b2.sinertia*x.rn1b*x.rn1b,x.kMassb=Jb+x.b1.sinertia*x.rn1a*x.rn2a+x.b2.sinertia*x.rn1b*x.rn2b,x.kMassc=Jb+x.b1.sinertia*x.rn2a*x.rn2a+x.b2.sinertia*x.rn2b*x.rn2b,
x.kMassa*x.kMassa+2*x.kMassb*x.kMassb+x.kMassc*x.kMassc<u.illConditionedThreshold*(x.kMassa*x.kMassc-x.kMassb*x.kMassb)){x.Ka=x.kMassa;x.Kb=x.kMassb;x.Kc=x.kMassc;var dc=x.kMassa*x.kMassc-x.kMassb*x.kMassb;if(dc!=dc)x.kMassa=x.kMassb=x.kMassc=0;else if(0==dc)x.kMassa=0!=x.kMassa?1/x.kMassa:0,x.kMassc=0!=x.kMassc?1/x.kMassc:0,x.kMassb=0;else{var dc=1/dc,Hc=x.kMassc*dc;x.kMassc=x.kMassa*dc;x.kMassa=Hc;x.kMassb*=-dc}}else{x.hc2=!1;if(x.oc2.dist<x.oc1.dist){var yc=x.c1;x.c1=x.c2;x.c2=yc}x.oc2.active=
!1;x.contacts.modified=!0}x.surfacex=x.b2.svelx;x.surfacey=x.b2.svely;x.surfacex+=1*x.b1.svelx;x.surfacey+=1*x.b1.svely;x.surfacex=-x.surfacex;x.surfacey=-x.surfacey;x.rMass=x.b1.sinertia+x.b2.sinertia;0!=x.rMass&&(x.rMass=1/x.rMass);qb&&(a.active=!1)}else{var N=a.fluidarb;-1==N.pre_dt&&(N.pre_dt=b);var Cc=b/N.pre_dt;N.pre_dt=b;N.r1x=N.centroidx-N.b1.posx;N.r1y=N.centroidy-N.b1.posy;N.r2x=N.centroidx-N.b2.posx;N.r2y=N.centroidy-N.b2.posy;var ic=0,mc=0;N.ws1.fluidEnabled&&null!=N.ws1.fluidProperties.wrap_gravity?
(ic=N.ws1.fluidProperties.gravityx,mc=N.ws1.fluidProperties.gravityy):(ic=this.gravityx,mc=this.gravityy);var Jd=0,Bc=0;N.ws2.fluidEnabled&&null!=N.ws2.fluidProperties.wrap_gravity?(Jd=N.ws2.fluidProperties.gravityx,Bc=N.ws2.fluidProperties.gravityy):(Jd=this.gravityx,Bc=this.gravityy);var gc=0,Qc=0;if(N.ws1.fluidEnabled&&N.ws2.fluidEnabled){var pc=N.overlap*N.ws1.fluidProperties.density,fc=N.overlap*N.ws2.fluidProperties.density;if(pc>fc)var Sc=pc+fc,gc=gc-ic*Sc,Qc=Qc-mc*Sc;else if(pc<fc)var Lc=
pc+fc,gc=gc+Jd*Lc,Qc=Qc+Bc*Lc;else{var Dc=0,zc=0,Dc=ic+Jd,zc=mc+Bc,Dc=0.5*Dc,zc=0.5*zc;if(N.ws1.worldCOMx*Dc+N.ws1.worldCOMy*zc>N.ws2.worldCOMx*Dc+N.ws2.worldCOMy*zc)var Uc=pc+fc,gc=gc-Dc*Uc,Qc=Qc-zc*Uc;else var ad=pc+fc,gc=gc+Dc*ad,Qc=Qc+zc*ad}}else if(N.ws1.fluidEnabled)var Yc=N.overlap*N.ws1.fluidProperties.density,gc=gc-ic*Yc,Qc=Qc-mc*Yc;else if(N.ws2.fluidEnabled)var gd=N.overlap*N.ws2.fluidProperties.density,gc=gc+Jd*gd,Qc=Qc+Bc*gd;gc*=b;Qc*=b;N.buoyx=gc;N.buoyy=Qc;if(2==N.b1.type){var xd=N.b1.imass;
N.b1.velx-=gc*xd;N.b1.vely-=Qc*xd;N.b1.angvel-=(Qc*N.r1x-gc*N.r1y)*N.b1.iinertia}if(2==N.b2.type){var Pd=N.b2.imass;N.b2.velx+=gc*Pd;N.b2.vely+=Qc*Pd;N.b2.angvel+=(Qc*N.r2x-gc*N.r2y)*N.b2.iinertia}if((!N.ws1.fluidEnabled||0==N.ws1.fluidProperties.viscosity)&&(!N.ws2.fluidEnabled||0==N.ws2.fluidProperties.viscosity))N.nodrag=!0,N.dampx=0,N.dampy=0,N.adamp=0;else{N.nodrag=!1;var Fc=0;N.ws1.fluidEnabled&&(N.ws2.validate_angDrag(),Fc+=N.ws1.fluidProperties.viscosity*N.ws2.angDrag*N.overlap/N.ws2.area);
N.ws2.fluidEnabled&&(N.ws1.validate_angDrag(),Fc+=N.ws2.fluidProperties.viscosity*N.ws1.angDrag*N.overlap/N.ws1.area);if(0!=Fc){var $c=N.b1.sinertia+N.b2.sinertia;N.wMass=0!=$c?1/$c:0;var Fc=4.0E-4*Fc,ve=2*Math.PI*Fc;N.agamma=1/(b*ve*(2+ve*b));var jd=1/(1+N.agamma);N.agamma*=jd;N.wMass*=jd}else N.wMass=0,N.agamma=0;var Tc=N.b2.velx+N.b2.kinvelx-N.r2y*(N.b2.angvel+N.b2.kinangvel)-(N.b1.velx+N.b1.kinvelx-N.r1y*(N.b2.angvel+N.b2.kinangvel)),cd=N.b2.vely+N.b2.kinvely+N.r2x*(N.b2.angvel+N.b2.kinangvel)-
(N.b1.vely+N.b1.kinvely+N.r1x*(N.b1.angvel+N.b1.kinangvel));if(!(Tc*Tc+cd*cd<u.epsilon*u.epsilon)){var Jc=1/Math.sqrt(Tc*Tc+cd*cd),Tc=Tc*Jc,cd=cd*Jc;N.nx=Tc;N.ny=cd}var xb=0;if(N.ws1.fluidEnabled){var sd=-N.ws1.fluidProperties.viscosity*N.overlap/N.ws2.area;if(0==N.ws2.type)xb-=sd*N.ws2.circle.radius*u.fluidLinearDrag/(2*N.ws2.circle.radius*Math.PI);else{for(var nc=0,be=0,Kc=N.ws2.polygon.edges.head;null!=Kc;){var kd=Kc.elt,nc=nc+kd.length,tc=sd*kd.length*(kd.gnormx*N.nx+kd.gnormy*N.ny);0<tc&&(tc*=
-u.fluidVacuumDrag);be-=0.5*tc*u.fluidLinearDrag;Kc=Kc.next}xb+=be/nc}}if(N.ws2.fluidEnabled){var Rc=-N.ws2.fluidProperties.viscosity*N.overlap/N.ws1.area;if(0==N.ws1.type)xb-=Rc*N.ws1.circle.radius*u.fluidLinearDrag/(2*N.ws1.circle.radius*Math.PI);else{for(var hd=0,pd=0,Wc=N.ws1.polygon.edges.head;null!=Wc;){var bd=Wc.elt,hd=hd+bd.length,td=Rc*bd.length*(bd.gnormx*N.nx+bd.gnormy*N.ny);0<td&&(td*=-u.fluidVacuumDrag);pd-=0.5*td*u.fluidLinearDrag;Wc=Wc.next}xb+=pd/hd}}if(0!=xb){var Zc=N.b1.smass+N.b2.smass,
xc=0,Oc=0,Bd=0,xc=Zc,Oc=0,Bd=Zc;if(0!=N.b1.sinertia)var Yd=N.r1x*N.b1.sinertia,zd=N.r1y*N.b1.sinertia,xc=xc+zd*N.r1y,Oc=Oc+-zd*N.r1x,Bd=Bd+Yd*N.r1x;if(0!=N.b2.sinertia)var uc=N.r2x*N.b2.sinertia,Rd=N.r2y*N.b2.sinertia,xc=xc+Rd*N.r2y,Oc=Oc+-Rd*N.r2x,Bd=Bd+uc*N.r2x;var Cd=xc*Bd-Oc*Oc;if(Cd!=Cd)xc=Oc=Bd=0;else if(0==Cd)xc=0!=xc?1/xc:0,Bd=0!=Bd?1/Bd:0,Oc=0;else var Cd=1/Cd,md=Bd*Cd,Bd=xc*Cd,xc=md,Oc=Oc*-Cd;N.vMassa=xc;N.vMassb=Oc;N.vMassc=Bd;var Id=2*Math.PI*xb;N.lgamma=1/(b*Id*(2+Id*b));var Dd=1/(1+
N.lgamma);N.lgamma*=Dd;N.vMassa*=Dd;N.vMassb*=Dd;N.vMassc*=Dd}else N.vMassa=0,N.vMassb=0,N.vMassc=0,N.lgamma=0}N.dampx*=Cc;N.dampy*=Cc;N.adamp*=Cc}}else if(null!=a.colarb){var Ac=a.colarb,id=!0,Vd=null,ud=null,Td=Ac.innards.next;Ac.hc2=!1;for(var od=Ac.contacts.next;null!=od;){var dd=od;if(dd.stamp+u.arbiterExpirationDelay<Ac.stamp){var he=Ac.contacts,Fd,Ad;null==Vd?(Fd=he.next,Ad=Fd.next,he.next=Ad,null==he.next&&(he.pushmod=!0)):(Fd=Vd.next,Ad=Fd.next,Vd.next=Ad,null==Ad&&(he.pushmod=!0));Fd._inuse=
!1;he.modified=!0;he.length--;he.pushmod=!0;var od=Ad,Xc=Ac.innards,yd,qd;null==ud?(yd=Xc.next,qd=yd.next,Xc.next=qd,null==Xc.next&&(Xc.pushmod=!0)):(yd=ud.next,qd=yd.next,ud.next=qd,null==qd&&(Xc.pushmod=!0));yd._inuse=!1;Xc.modified=!0;Xc.length--;Xc.pushmod=!0;var Td=qd,ld=dd;ld.arbiter=null;ld.next=sa.zpp_pool;sa.zpp_pool=ld}else{var Nd=dd.inner,Qd=dd.active;dd.active=dd.stamp==Ac.stamp;dd.active&&(id?(id=!1,Ac.c1=Nd,Ac.oc1=dd):(Ac.hc2=!0,Ac.c2=Nd,Ac.oc2=dd));Qd!=dd.active&&(Ac.contacts.modified=
!0);Vd=od;ud=Td;Td=Td.next;od=od.next}}if(Ac.hc2){Ac.hpc2=!0;if(Ac.oc1.posOnly){var Ed=Ac.c1;Ac.c1=Ac.c2;Ac.c2=Ed;var $d=Ac.oc1;Ac.oc1=Ac.oc2;Ac.oc2=$d;Ac.hc2=!1}else Ac.oc2.posOnly&&(Ac.hc2=!1);Ac.oc1.posOnly&&(id=!0)}else Ac.hpc2=!1;id&&(a.active=!1)}ab!=a.active&&(a.b1.arbiters.modified=!0,a.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=!0,this.s_arbiters.modified=this.f_arbiters.modified=!0);return!1},prestep:function(a){for(var b=null,c=this.live_constraints.head;null!=
c;){var d=c.elt;d.preStep(a)?(c=this.live_constraints.erase(b),d.broken(),this.constraintCbBreak(d),d.removeOnBreak?(d.component.sleeping=!0,this.midstep=!1,null!=d.compound?d.compound.wrap_constraints.remove(d.outer):this.wrap_constraints.remove(d.outer),this.midstep=!0):d.active=!1,d.clearcache()):(b=c,c=c.next)}var b=null,c=this.c_arbiters_true,e=c.head;if((d=null!=this.c_arbiters_false)&&null==e)d=!1,e=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null;for(;null!=e;){if(this.presteparb(e.elt,
a)){var f;null==b?(f=c.head,e=f.next,c.head=e,null==c.head&&(c.pushmod=!0)):(f=b.next,e=f.next,b.next=e,null==e&&(c.pushmod=!0));f.elt=null;f.next=xd.zpp_pool;xd.zpp_pool=f;c.modified=!0;c.length--;c.pushmod=!0}else b=e,e=e.next;d&&null==e&&(d=!1,e=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null)}b=null;c=this.f_arbiters;e=c.head;d=!1;for(;null!=e;)this.presteparb(e.elt,a)?(null==b?(f=c.head,e=f.next,c.head=e,null==c.head&&(c.pushmod=!0)):(f=b.next,e=f.next,b.next=e,null==e&&(c.pushmod=
!0)),f.elt=null,f.next=Yd.zpp_pool,Yd.zpp_pool=f,c.modified=!0,c.length--,c.pushmod=!0):(b=e,e=e.next),d&&null==e&&(d=!1,b=c=null);b=null;c=this.s_arbiters;e=c.head;d=!1;for(;null!=e;)this.presteparb(e.elt,a)?(null==b?(f=c.head,e=f.next,c.head=e,null==c.head&&(c.pushmod=!0)):(f=b.next,e=f.next,b.next=e,null==e&&(c.pushmod=!0)),f.elt=null,f.next=Td.zpp_pool,Td.zpp_pool=f,c.modified=!0,c.length--,c.pushmod=!0):(b=e,e=e.next),d&&null==e&&(d=!1,b=c=null)},warmStart:function(){for(var a=this.f_arbiters.head;null!=
a;){var b=a.elt;if(b.active&&0!=(b.immState&1)){var c=b.b1.imass;b.b1.velx-=b.dampx*c;b.b1.vely-=b.dampy*c;c=b.b2.imass;b.b2.velx+=b.dampx*c;b.b2.vely+=b.dampy*c;b.b1.angvel-=b.b1.iinertia*(b.dampy*b.r1x-b.dampx*b.r1y);b.b2.angvel+=b.b2.iinertia*(b.dampy*b.r2x-b.dampx*b.r2y);b.b1.angvel-=b.adamp*b.b1.iinertia;b.b2.angvel+=b.adamp*b.b2.iinertia}a=a.next}a=this.c_arbiters_false.head;b=!0;null==a&&(a=this.c_arbiters_true.head,b=!1);for(;null!=a;){c=a.elt;if(c.active&&0!=(c.immState&1)){var d=c.nx*c.c1.jnAcc-
c.ny*c.c1.jtAcc,e=c.ny*c.c1.jnAcc+c.nx*c.c1.jtAcc,f=c.b1.imass;c.b1.velx-=d*f;c.b1.vely-=e*f;c.b1.angvel-=c.b1.iinertia*(e*c.c1.r1x-d*c.c1.r1y);f=c.b2.imass;c.b2.velx+=d*f;c.b2.vely+=e*f;c.b2.angvel+=c.b2.iinertia*(e*c.c1.r2x-d*c.c1.r2y);c.hc2&&(d=c.nx*c.c2.jnAcc-c.ny*c.c2.jtAcc,e=c.ny*c.c2.jnAcc+c.nx*c.c2.jtAcc,f=c.b1.imass,c.b1.velx-=d*f,c.b1.vely-=e*f,c.b1.angvel-=c.b1.iinertia*(e*c.c2.r1x-d*c.c2.r1y),f=c.b2.imass,c.b2.velx+=d*f,c.b2.vely+=e*f,c.b2.angvel+=c.b2.iinertia*(e*c.c2.r2x-d*c.c2.r2y));
c.b2.angvel+=c.jrAcc*c.b2.iinertia;c.b1.angvel-=c.jrAcc*c.b1.iinertia}a=a.next;b&&null==a&&(a=this.c_arbiters_true.head,b=!1)}for(a=this.live_constraints.head;null!=a;)a.elt.warmStart(),a=a.next},iterateVel:function(a){for(var b=0;b<a;){b++;for(var c=this.f_arbiters.head;null!=c;){var d=c.elt;if(d.active&&0!=(d.immState&1)&&!d.nodrag){var e=d.b1.angvel+d.b1.kinangvel,f=d.b2.angvel+d.b2.kinangvel,g=d.b1.velx+d.b1.kinvelx-d.r1y*e-(d.b2.velx+d.b2.kinvelx-d.r2y*f),j=d.b1.vely+d.b1.kinvely+d.r1x*e-(d.b2.vely+
d.b2.kinvely+d.r2x*f),h=d.vMassa*g+d.vMassb*j,j=d.vMassb*g+d.vMassc*j,g=h,h=d.lgamma,g=g-d.dampx*h,j=j-d.dampy*h;d.dampx+=1*g;d.dampy+=1*j;h=d.b1.imass;d.b1.velx-=g*h;d.b1.vely-=j*h;h=d.b2.imass;d.b2.velx+=g*h;d.b2.vely+=j*h;d.b1.angvel-=d.b1.iinertia*(j*d.r1x-g*d.r1y);d.b2.angvel+=d.b2.iinertia*(j*d.r2x-g*d.r2y);e=(e-f)*d.wMass-d.adamp*d.agamma;d.adamp+=e;d.b1.angvel-=e*d.b1.iinertia;d.b2.angvel+=e*d.b2.iinertia}c=c.next}c=null;for(d=this.live_constraints.head;null!=d;)e=d.elt,e.applyImpulseVel()?
(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next);c=this.c_arbiters_false.head;d=!0;null==c&&(c=this.c_arbiters_true.head,d=!1);for(;null!=c;){e=c.elt;if(e.active&&0!=(e.immState&1)){var i,f=e.k1x+e.b2.velx-e.c1.r2y*e.b2.angvel-(e.b1.velx-e.c1.r1y*e.b1.angvel),k=e.k1y+
e.b2.vely+e.c1.r2x*e.b2.angvel-(e.b1.vely+e.c1.r1x*e.b1.angvel),g=(k*e.nx-f*e.ny+e.surfacex)*e.c1.tMass,f=e.c1.friction*e.c1.jnAcc,j=e.c1.jtAcc,h=j-g;h>f?h=f:h<-f&&(h=-f);g=h-j;e.c1.jtAcc=h;j=-e.ny*g;i=e.nx*g;e.b2.velx+=j*e.b2.imass;e.b2.vely+=i*e.b2.imass;e.b1.velx-=j*e.b1.imass;e.b1.vely-=i*e.b1.imass;e.b2.angvel+=e.rt1b*g*e.b2.iinertia;e.b1.angvel-=e.rt1a*g*e.b1.iinertia;e.hc2?(h=e.k2x+e.b2.velx-e.c2.r2y*e.b2.angvel-(e.b1.velx-e.c2.r1y*e.b1.angvel),i=e.k2y+e.b2.vely+e.c2.r2x*e.b2.angvel-(e.b1.vely+
e.c2.r1x*e.b1.angvel),g=(i*e.nx-h*e.ny+e.surfacex)*e.c2.tMass,f=e.c2.friction*e.c2.jnAcc,j=e.c2.jtAcc,h=j-g,h>f?h=f:h<-f&&(h=-f),g=h-j,e.c2.jtAcc=h,j=-e.ny*g,i=e.nx*g,e.b2.velx+=j*e.b2.imass,e.b2.vely+=i*e.b2.imass,e.b1.velx-=j*e.b1.imass,e.b1.vely-=i*e.b1.imass,e.b2.angvel+=e.rt2b*g*e.b2.iinertia,e.b1.angvel-=e.rt2a*g*e.b1.iinertia,f=e.k1x+e.b2.velx-e.c1.r2y*e.b2.angvel-(e.b1.velx-e.c1.r1y*e.b1.angvel),k=e.k1y+e.b2.vely+e.c1.r2x*e.b2.angvel-(e.b1.vely+e.c1.r1x*e.b1.angvel),h=e.k2x+e.b2.velx-e.c2.r2y*
e.b2.angvel-(e.b1.velx-e.c2.r1y*e.b1.angvel),i=e.k2y+e.b2.vely+e.c2.r2x*e.b2.angvel-(e.b1.vely+e.c2.r1x*e.b1.angvel),g=e.c1.jnAcc,j=e.c2.jnAcc,f=f*e.nx+k*e.ny+e.surfacey+e.c1.bounce-(e.Ka*g+e.Kb*j),h=h*e.nx+i*e.ny+e.surfacey+e.c2.bounce-(e.Kb*g+e.Kc*j),i=-(e.kMassa*f+e.kMassb*h),k=-(e.kMassb*f+e.kMassc*h),0<=i&&0<=k?(f=i-g,h=k-j,e.c1.jnAcc=i,e.c2.jnAcc=k):(i=-e.c1.nMass*f,0<=i&&0<=e.Kb*i+h?(f=i-g,h=-j,e.c1.jnAcc=i,e.c2.jnAcc=0):(k=-e.c2.nMass*h,0<=k&&0<=e.Kb*k+f?(f=-g,h=k-j,e.c1.jnAcc=0,e.c2.jnAcc=
k):0<=f&&0<=h?(f=-g,h=-j,e.c1.jnAcc=e.c2.jnAcc=0):h=f=0)),g=f+h,j=e.nx*g,i=e.ny*g,e.b2.velx+=j*e.b2.imass,e.b2.vely+=i*e.b2.imass,e.b1.velx-=j*e.b1.imass,e.b1.vely-=i*e.b1.imass,e.b2.angvel+=(e.rn1b*f+e.rn2b*h)*e.b2.iinertia,e.b1.angvel-=(e.rn1a*f+e.rn2a*h)*e.b1.iinertia):(0!=e.radius&&(g=(e.b2.angvel-e.b1.angvel)*e.rMass,f=e.rfric*e.c1.jnAcc,j=e.jrAcc,e.jrAcc-=g,e.jrAcc>f?e.jrAcc=f:e.jrAcc<-f&&(e.jrAcc=-f),g=e.jrAcc-j,e.b2.angvel+=g*e.b2.iinertia,e.b1.angvel-=g*e.b1.iinertia),f=e.k1x+e.b2.velx-e.c1.r2y*
e.b2.angvel-(e.b1.velx-e.c1.r1y*e.b1.angvel),k=e.k1y+e.b2.vely+e.c1.r2x*e.b2.angvel-(e.b1.vely+e.c1.r1x*e.b1.angvel),g=(e.c1.bounce+(e.nx*f+e.ny*k)+e.surfacey)*e.c1.nMass,j=e.c1.jnAcc,h=j-g,0>h&&(h=0),g=h-j,e.c1.jnAcc=h,j=e.nx*g,i=e.ny*g,e.b2.velx+=j*e.b2.imass,e.b2.vely+=i*e.b2.imass,e.b1.velx-=j*e.b1.imass,e.b1.vely-=i*e.b1.imass,e.b2.angvel+=e.rn1b*g*e.b2.iinertia,e.b1.angvel-=e.rn1a*g*e.b1.iinertia)}c=c.next;d&&null==c&&(c=this.c_arbiters_true.head,d=!1)}}},iteratePos:function(a){for(var b=0;b<
a;){b++;for(var c=null,d=this.live_constraints.head;null!=d;){var e=d.elt;!e.__velocity&&e.stiff&&e.applyImpulsePos()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next)}var f=this.c_arbiters_false.head,g=!0;null==f&&(f=this.c_arbiters_true.head,g=!1);for(;null!=f;){var h=
f.elt;if(h.active&&0!=(h.immState&1))if(2==h.ptype){var i=h.c1,k=0,l=0,k=h.b2.axisy*i.lr2x-h.b2.axisx*i.lr2y,l=i.lr2x*h.b2.axisx+i.lr2y*h.b2.axisy,k=k+1*h.b2.posx,l=l+1*h.b2.posy,m=0,n=0,m=h.b1.axisy*i.lr1x-h.b1.axisx*i.lr1y,n=i.lr1x*h.b1.axisx+i.lr1y*h.b1.axisy,m=m+1*h.b1.posx,n=n+1*h.b1.posy,o=0,q=0,o=k-m,q=l-n,r=Math.sqrt(o*o+q*q),s=h.radius-u.collisionSlop,t=r-s;0>o*h.nx+q*h.ny&&(o=-o,q=-q,t-=h.radius);if(0>t)if(r<u.epsilon)0!=h.b1.smass?h.b1.posx+=10*u.epsilon:h.b2.posx+=10*u.epsilon;else{var v=
1/r,o=o*v,q=q*v,w=0.5*(m+k),y=0.5*(n+l),z=r-s,m=w-h.b1.posx,n=y-h.b1.posy,k=w-h.b2.posx,l=y-h.b2.posy,E=q*m-o*n,F=q*k-o*l,G=h.b2.smass+F*F*h.b2.sinertia+h.b1.smass+E*E*h.b1.sinertia;if(0!=G){var H=-h.biasCoef*z/G,J=0,O=0,P=H,J=o*P,O=q*P,K=h.b1.imass;h.b1.posx-=J*K;h.b1.posy-=O*K;var M=h.b1,L=-E*h.b1.iinertia*H;M.rot+=L;if(1.0E-4<L*L)M.axisx=Math.sin(M.rot),M.axisy=Math.cos(M.rot);else{var S=L*L,V=1-0.5*S,U=1-S*S/8,Y=(V*M.axisx+L*M.axisy)*U;M.axisy=(V*M.axisy-L*M.axisx)*U;M.axisx=Y}var X=h.b2.imass;
h.b2.posx+=J*X;h.b2.posy+=O*X;var T=h.b2,Z=F*h.b2.iinertia*H;T.rot+=Z;if(1.0E-4<Z*Z)T.axisx=Math.sin(T.rot),T.axisy=Math.cos(T.rot);else{var ea=Z*Z,da=1-0.5*ea,ca=1-ea*ea/8,ha=(da*T.axisx+Z*T.axisy)*ca;T.axisy=(da*T.axisy-Z*T.axisx)*ca;T.axisx=ha}}}}else{var $=0,W=0,ga,fa=0,ka=0,ja=0,la=0;0==h.ptype?($=h.b1.axisy*h.lnormx-h.b1.axisx*h.lnormy,W=h.lnormx*h.b1.axisx+h.lnormy*h.b1.axisy,ga=h.lproj+($*h.b1.posx+W*h.b1.posy),fa=h.b2.axisy*h.c1.lr1x-h.b2.axisx*h.c1.lr1y,ka=h.c1.lr1x*h.b2.axisx+h.c1.lr1y*
h.b2.axisy,fa+=1*h.b2.posx,ka+=1*h.b2.posy,h.hpc2&&(ja=h.b2.axisy*h.c2.lr1x-h.b2.axisx*h.c2.lr1y,la=h.c2.lr1x*h.b2.axisx+h.c2.lr1y*h.b2.axisy,ja+=1*h.b2.posx,la+=1*h.b2.posy)):($=h.b2.axisy*h.lnormx-h.b2.axisx*h.lnormy,W=h.lnormx*h.b2.axisx+h.lnormy*h.b2.axisy,ga=h.lproj+($*h.b2.posx+W*h.b2.posy),fa=h.b1.axisy*h.c1.lr1x-h.b1.axisx*h.c1.lr1y,ka=h.c1.lr1x*h.b1.axisx+h.c1.lr1y*h.b1.axisy,fa+=1*h.b1.posx,ka+=1*h.b1.posy,h.hpc2&&(ja=h.b1.axisy*h.c2.lr1x-h.b1.axisx*h.c2.lr1y,la=h.c2.lr1x*h.b1.axisx+h.c2.lr1y*
h.b1.axisy,ja+=1*h.b1.posx,la+=1*h.b1.posy));var ma=fa*$+ka*W-ga-h.radius,ma=ma+u.collisionSlop,oa=0;h.hpc2&&(oa=ja*$+la*W-ga-h.radius,oa+=u.collisionSlop);if(0>ma||0>oa){h.rev&&($=-$,W=-W);var na=0,sa=0,na=fa-h.b1.posx,sa=ka-h.b1.posy,pa=0,qa=0,pa=fa-h.b2.posx,qa=ka-h.b2.posy,ua=0,Ca=0,Ha=0,La=0;if(h.hpc2){var ua=ja-h.b1.posx,Ca=la-h.b1.posy,Ha=ja-h.b2.posx,La=la-h.b2.posy,Ia=W*na-$*sa,I=W*pa-$*qa,Sa=W*ua-$*Ca,Fa=W*Ha-$*La,Ka=h.b1.smass+h.b2.smass;h.kMassa=Ka+h.b1.sinertia*Ia*Ia+h.b2.sinertia*I*
I;h.kMassb=Ka+h.b1.sinertia*Ia*Sa+h.b2.sinertia*I*Fa;h.kMassc=Ka+h.b1.sinertia*Sa*Sa+h.b2.sinertia*Fa*Fa;for(var Pa=0,wa=0,ra=0,Pa=h.kMassa,wa=h.kMassb,ra=h.kMassc,Ja=ma*h.biasCoef,Ea=oa*h.biasCoef;;){var A=0,xa=0,A=Ja,xa=Ea,A=-A,xa=-xa,Ma=h.kMassa*h.kMassc-h.kMassb*h.kMassb;if(Ma!=Ma)A=xa=0;else if(0==Ma)A=0!=h.kMassa?A/h.kMassa:0,xa=0!=h.kMassc?xa/h.kMassc:0;else var Ma=1/Ma,Qa=Ma*(h.kMassc*A-h.kMassb*xa),xa=Ma*(h.kMassa*xa-h.kMassb*A),A=Qa;if(0<=A&&0<=xa){var za=(A+xa)*h.b1.imass;h.b1.posx-=$*
za;h.b1.posy-=W*za;var Aa=h.b1,ya=-h.b1.iinertia*(Ia*A+Sa*xa);Aa.rot+=ya;if(1.0E-4<ya*ya)Aa.axisx=Math.sin(Aa.rot),Aa.axisy=Math.cos(Aa.rot);else{var Ua=ya*ya,Ba=1-0.5*Ua,Za=1-Ua*Ua/8,Ra=(Ba*Aa.axisx+ya*Aa.axisy)*Za;Aa.axisy=(Ba*Aa.axisy-ya*Aa.axisx)*Za;Aa.axisx=Ra}var Xa=(A+xa)*h.b2.imass;h.b2.posx+=$*Xa;h.b2.posy+=W*Xa;var ia=h.b2,Ya=h.b2.iinertia*(I*A+Fa*xa);ia.rot+=Ya;if(1.0E-4<Ya*Ya)ia.axisx=Math.sin(ia.rot),ia.axisy=Math.cos(ia.rot);else{var Wa=Ya*Ya,fb=1-0.5*Wa,kb=1-Wa*Wa/8,C=(fb*ia.axisx+
Ya*ia.axisy)*kb;ia.axisy=(fb*ia.axisy-Ya*ia.axisx)*kb;ia.axisx=C}break}var A=-Ja/Pa,xa=0,nb=wa*A+Ea;if(0<=A&&0<=nb){var ob=(A+xa)*h.b1.imass;h.b1.posx-=$*ob;h.b1.posy-=W*ob;var ta=h.b1,pb=-h.b1.iinertia*(Ia*A+Sa*xa);ta.rot+=pb;if(1.0E-4<pb*pb)ta.axisx=Math.sin(ta.rot),ta.axisy=Math.cos(ta.rot);else{var sb=pb*pb,Q=1-0.5*sb,aa=1-sb*sb/8,Na=(Q*ta.axisx+pb*ta.axisy)*aa;ta.axisy=(Q*ta.axisy-pb*ta.axisx)*aa;ta.axisx=Na}var ba=(A+xa)*h.b2.imass;h.b2.posx+=$*ba;h.b2.posy+=W*ba;var hb=h.b2,rb=h.b2.iinertia*
(I*A+Fa*xa);hb.rot+=rb;if(1.0E-4<rb*rb)hb.axisx=Math.sin(hb.rot),hb.axisy=Math.cos(hb.rot);else{var Hb=rb*rb,bb=1-0.5*Hb,ib=1-Hb*Hb/8,Oa=(bb*hb.axisx+rb*hb.axisy)*ib;hb.axisy=(bb*hb.axisy-rb*hb.axisx)*ib;hb.axisx=Oa}break}var A=0,xa=-Ea/ra,Va=wa*xa+Ja;if(0<=xa&&0<=Va){var D=(A+xa)*h.b1.imass;h.b1.posx-=$*D;h.b1.posy-=W*D;var lb=h.b1,Ta=-h.b1.iinertia*(Ia*A+Sa*xa);lb.rot+=Ta;if(1.0E-4<Ta*Ta)lb.axisx=Math.sin(lb.rot),lb.axisy=Math.cos(lb.rot);else{var jb=Ta*Ta,gb=1-0.5*jb,Ga=1-jb*jb/8,Eb=(gb*lb.axisx+
Ta*lb.axisy)*Ga;lb.axisy=(gb*lb.axisy-Ta*lb.axisx)*Ga;lb.axisx=Eb}var cb=(A+xa)*h.b2.imass;h.b2.posx+=$*cb;h.b2.posy+=W*cb;var zb=h.b2,Cb=h.b2.iinertia*(I*A+Fa*xa);zb.rot+=Cb;if(1.0E-4<Cb*Cb)zb.axisx=Math.sin(zb.rot),zb.axisy=Math.cos(zb.rot);else{var Gb=Cb*Cb,Mb=1-0.5*Gb,Ib=1-Gb*Gb/8,ub=(Mb*zb.axisx+Cb*zb.axisy)*Ib;zb.axisy=(Mb*zb.axisy-Cb*zb.axisx)*Ib;zb.axisx=ub}break}break}}else{var wb=W*na-$*sa,mb=W*pa-$*qa,Rb=h.b2.smass+mb*mb*h.b2.sinertia+h.b1.smass+wb*wb*h.b1.sinertia;if(0!=Rb){var B=-h.biasCoef*
ma/Rb,Bb=0,db=0,ab=B,Bb=$*ab,db=W*ab,x=h.b1.imass;h.b1.posx-=Bb*x;h.b1.posy-=db*x;var Nb=h.b1,Jb=-wb*h.b1.iinertia*B;Nb.rot+=Jb;if(1.0E-4<Jb*Jb)Nb.axisx=Math.sin(Nb.rot),Nb.axisy=Math.cos(Nb.rot);else{var qb=Jb*Jb,Tb=1-0.5*qb,Qb=1-qb*qb/8,Ub=(Tb*Nb.axisx+Jb*Nb.axisy)*Qb;Nb.axisy=(Tb*Nb.axisy-Jb*Nb.axisx)*Qb;Nb.axisx=Ub}var vb=h.b2.imass;h.b2.posx+=Bb*vb;h.b2.posy+=db*vb;var eb=h.b2,Ob=mb*h.b2.iinertia*B;eb.rot+=Ob;if(1.0E-4<Ob*Ob)eb.axisx=Math.sin(eb.rot),eb.axisy=Math.cos(eb.rot);else{var Sb=Ob*
Ob,Vb=1-0.5*Sb,Zb=1-Sb*Sb/8,ec=(Vb*eb.axisx+Ob*eb.axisy)*Zb;eb.axisy=(Vb*eb.axisy-Ob*eb.axisx)*Zb;eb.axisx=ec}}}}}f=f.next;g&&null==f&&(f=this.c_arbiters_true.head,g=!1)}}},narrowPhase:function(a,b,c,d,e){var f=null,g=a.body,h=b.body,i;i=!1;for(var k=g.constraints.head;null!=k;){var m=k.elt;if(m.ignore&&m.pair_exists(g.id,h.id)){i=!0;break}k=k.next}var n,o;if(i)o=!1;else{for(var q=a;null!=q&&null==q.group;)q=null!=q.ishape?q.ishape.body:null!=q.icompound?q.icompound.compound:q.ibody.compound;var r=
null==q?null:q.group,s;if(null==r)s=!1;else{for(var t=b;null!=t&&null==t.group;)t=null!=t.ishape?t.ishape.body:null!=t.icompound?t.icompound.compound:t.ibody.compound;var v=null==t?null:t.group;if(null==v)s=!1;else{for(var w=!1;null!=r&&null!=v;){if(r==v){w=r.ignore;break}r.depth<v.depth?v=v.group:r=r.group}s=w}}o=!s}if(o){var y;if(a.sensorEnabled||b.sensorEnabled){var z=a.filter,E=b.filter;y=0!=(z.sensorMask&E.sensorGroup)?0!=(E.sensorMask&z.sensorGroup):!1}else y=!1;if(y)n=2;else{var G;if(a.fluidEnabled||
b.fluidEnabled){var H=a.filter,J=b.filter;G=0!=(H.fluidMask&J.fluidGroup)?0!=(J.fluidMask&H.fluidGroup):!1}else G=!1;if(G&&!(0==g.imass&&0==h.imass&&0==g.iinertia&&0==h.iinertia))n=0;else{var M=a.filter,P=b.filter;n=0!=(M.collisionMask&P.collisionGroup)&&0!=(P.collisionMask&M.collisionGroup)&&!(0==g.imass&&0==h.imass&&0==g.iinertia&&0==h.iinertia)?1:-1}}}else n=-1;if(-1!=n){var K,L;a.type>b.type?(K=b,L=a):a.type==b.type?a.id<b.id?(K=a,L=b):(L=a,K=b):(K=a,L=b);var T=K==b;if(0==n){var S;if(null==d){for(var V=
null,U=(g.arbiters.length<h.arbiters.length?g:h).arbiters.head;null!=U;){var X=U.elt;if(X.id==K.id&&X.di==L.id){V=X;break}U=U.next}S=V}else S=d;var Z=null==S,Y,$=!1;if(Z)null==Pf.zpp_pool?Y=new Pf:(Y=Pf.zpp_pool,Pf.zpp_pool=Y.next,Y.next=null);else if(null==S.fluidarb){S.cleared=!0;for(var W=S.b1.arbiters,da=null,ca=W.head;null!=ca;){if(ca.elt==S){var fa,ha;null==da?(fa=W.head,ha=fa.next,W.head=ha,null==W.head&&(W.pushmod=!0)):(fa=da.next,ha=fa.next,da.next=ha,null==ha&&(W.pushmod=!0));var ja=fa;
ja.elt=null;ja.next=la.zpp_pool;la.zpp_pool=ja;W.modified=!0;W.length--;W.pushmod=!0;break}da=ca;ca=ca.next}for(var ga=S.b2.arbiters,ma=null,na=ga.head;null!=na;){if(na.elt==S){var pa,qa;null==ma?(pa=ga.head,qa=pa.next,ga.head=qa,null==ga.head&&(ga.pushmod=!0)):(pa=ma.next,qa=pa.next,ma.next=qa,null==qa&&(ga.pushmod=!0));var ua=pa;ua.elt=null;ua.next=la.zpp_pool;la.zpp_pool=ua;ga.modified=!0;ga.length--;ga.pushmod=!0;break}ma=na;na=na.next}null!=S.pair&&(S.pair.arb=null,S.pair=null);S.active=!1;this.f_arbiters.modified=
!0;null==Pf.zpp_pool?Y=new Pf:(Y=Pf.zpp_pool,Pf.zpp_pool=Y.next,Y.next=null);$=Z=Y.intchange=!0}else Y=S.fluidarb;if(Z||Y.stamp!=this.stamp||e)if(Y.stamp=this.stamp,ka.flowCollide(K,L,Y)){if(Z){var Ca=L.id;Y.b1=a.body;Y.ws1=a;Y.b2=b.body;Y.ws2=b;Y.id=K.id;Y.di=Ca;var Aa=Y.b1.arbiters,oa;null==la.zpp_pool?oa=new la:(oa=la.zpp_pool,la.zpp_pool=oa.next,oa.next=null);oa.elt=Y;var Ia=oa;Ia.next=Aa.head;Aa.head=Ia;Aa.modified=!0;Aa.length++;var Ha=Y.b2.arbiters,Fa;null==la.zpp_pool?Fa=new la:(Fa=la.zpp_pool,
la.zpp_pool=Fa.next,Fa.next=null);Fa.elt=Y;var La=Fa;La.next=Ha.head;Ha.head=La;Ha.modified=!0;Ha.length++;Y.active=!0;Y.present=0;Y.cleared=!1;Y.sleeping=!1;Y.fresh=!1;Y.presentable=!1;Y.nx=0;Y.ny=1;Y.dampx=0;Y.dampy=0;Y.adamp=0;var Da=this.f_arbiters,Ka;null==Yd.zpp_pool?Ka=new Yd:(Ka=Yd.zpp_pool,Yd.zpp_pool=Ka.next,Ka.next=null);Ka.elt=Y;var Pa=Ka;Pa.next=Da.head;Da.head=Pa;Da.modified=!0;Da.length++;Y.fresh=!$}else Y.fresh=Y.up_stamp<this.stamp-1||Y.endGenerated==this.stamp&&e;Y.up_stamp=Y.stamp;
if(Y.fresh||0==(Y.immState&4)){Y.immState=1;for(var Qa=!1,Ra=Y.ws1.id>Y.ws2.id?Y.ws2:Y.ws1,I=Y.ws1.id>Y.ws2.id?Y.ws1:Y.ws2,Sa=this.mrca1;null!=Sa.head;){var Xa=Sa.head;Sa.head=Xa.next;var Ya=Xa;Ya.elt=null;Ya.next=F.zpp_pool;F.zpp_pool=Ya;null==Sa.head&&(Sa.pushmod=!0);Sa.modified=!0;Sa.length--}Sa.pushmod=!0;for(var Wa=this.mrca2;null!=Wa.head;){var wa=Wa.head;Wa.head=wa.next;var ra=wa;ra.elt=null;ra.next=F.zpp_pool;F.zpp_pool=ra;null==Wa.head&&(Wa.pushmod=!0);Wa.modified=!0;Wa.length--}Wa.pushmod=
!0;if(null!=Ra.cbSet){var Ja=this.mrca1,Ea;null==F.zpp_pool?Ea=new F:(Ea=F.zpp_pool,F.zpp_pool=Ea.next,Ea.next=null);Ea.elt=Ra;var A=Ea;A.next=Ja.head;Ja.head=A;Ja.modified=!0;Ja.length++}if(null!=Ra.body.cbSet){var xa=this.mrca1,Ma=Ra.body,$a;null==F.zpp_pool?$a=new F:($a=F.zpp_pool,F.zpp_pool=$a.next,$a.next=null);$a.elt=Ma;var za=$a;za.next=xa.head;xa.head=za;xa.modified=!0;xa.length++}if(null!=I.cbSet){var fb=this.mrca2,ya;null==F.zpp_pool?ya=new F:(ya=F.zpp_pool,F.zpp_pool=ya.next,ya.next=null);
ya.elt=I;var Ua=ya;Ua.next=fb.head;fb.head=Ua;fb.modified=!0;fb.length++}if(null!=I.body.cbSet){var Ba=this.mrca2,nb=I.body,hb;null==F.zpp_pool?hb=new F:(hb=F.zpp_pool,F.zpp_pool=hb.next,hb.next=null);hb.elt=nb;var sb=hb;sb.next=Ba.head;Ba.head=sb;Ba.modified=!0;Ba.length++}for(var ia=Ra.body.compound,rb=I.body.compound;ia!=rb;)if((null==ia?0:ia.depth)<(null==rb?0:rb.depth)){if(null!=rb.cbSet){var Cb=this.mrca2,Gb;null==F.zpp_pool?Gb=new F:(Gb=F.zpp_pool,F.zpp_pool=Gb.next,Gb.next=null);Gb.elt=rb;
var kb=Gb;kb.next=Cb.head;Cb.head=kb;Cb.modified=!0;Cb.length++}rb=rb.compound}else{if(null!=ia.cbSet){var C=this.mrca1,Mb;null==F.zpp_pool?Mb=new F:(Mb=F.zpp_pool,F.zpp_pool=Mb.next,Mb.next=null);Mb.elt=ia;var ob=Mb;ob.next=C.head;C.head=ob;C.modified=!0;C.length++}ia=ia.compound}for(var ta=this.mrca1.head;null!=ta;){for(var pb=ta.elt,Rb=this.mrca2.head;null!=Rb;){for(var Q=Rb.elt,aa=pb.cbSet,Na=Q.cbSet,ba=null,Tb=(aa.cbpairs.length<Na.cbpairs.length?aa.cbpairs:Na.cbpairs).head;null!=Tb;){var Sb=
Tb.elt;if(Sb.a==aa&&Sb.b==Na||Sb.a==Na&&Sb.b==aa){ba=Sb;break}Tb=Tb.next}if(null==ba){var Hb;null==O.zpp_pool?Hb=new O:(Hb=O.zpp_pool,O.zpp_pool=Hb.next,Hb.next=null);Hb.zip_listeners=!0;ea.setlt(aa,Na)?(Hb.a=aa,Hb.b=Na):(Hb.a=Na,Hb.b=aa);ba=Hb;aa.cbpairs.add(ba);Na!=aa&&Na.cbpairs.add(ba)}ba.zip_listeners&&(ba.zip_listeners=!1,ba.__validate());if(null!=ba.listeners.head){for(var bb=null,ib=null,Oa=this.prelisteners;null!=Oa.head;){var Va=Oa.head;Oa.head=Va.next;var D=Va;D.elt=null;D.next=Za.zpp_pool;
Za.zpp_pool=D;null==Oa.head&&(Oa.pushmod=!0);Oa.modified=!0;Oa.length--}Oa.pushmod=!0;for(var lb=null,Ta=null,jb=(aa.cbpairs.length<Na.cbpairs.length?aa.cbpairs:Na.cbpairs).head;null!=jb;){var gb=jb.elt;if(gb.a==aa&&gb.b==Na||gb.a==Na&&gb.b==aa){Ta=gb;break}jb=jb.next}if(null==Ta){var Ga;null==O.zpp_pool?Ga=new O:(Ga=O.zpp_pool,O.zpp_pool=Ga.next,Ga.next=null);Ga.zip_listeners=!0;ea.setlt(aa,Na)?(Ga.a=aa,Ga.b=Na):(Ga.a=Na,Ga.b=aa);Ta=Ga;aa.cbpairs.add(Ta);Na!=aa&&Na.cbpairs.add(Ta)}Ta.zip_listeners&&
(Ta.zip_listeners=!1,Ta.__validate());for(var Eb=Ta.listeners.head;null!=Eb;){var cb=Eb.elt;if(5==cb.event&&0!=(cb.itype&4)){var zb=this.prelisteners,Qb;null==Za.zpp_pool?Qb=new Za:(Qb=Za.zpp_pool,Za.zpp_pool=Qb.next,Qb.next=null);Qb.elt=cb;var Ub=Qb;null==lb?(Ub.next=zb.head,zb.head=Ub):(Ub.next=lb.next,lb.next=Ub);zb.pushmod=zb.modified=!0;zb.length++;lb=Ub;Qa=Qa?!0:!cb.pure}Eb=Eb.next}if(null!=this.prelisteners.head)if(bb=je.get(pb,Q),null==bb&&(ib=Lf.get(pb,Q),this.add_callbackset(ib)),null==
bb||(bb.FLUIDstamp!=this.stamp||e)&&0==(bb.FLUIDstate&4)){null!=ib&&(bb=ib);if(null!=bb)for(var Zb=this.prelisteners.head;null!=Zb;)7==Zb.elt.itype&&(bb.COLLISIONstamp=this.stamp,bb.SENSORstamp=this.stamp),bb.FLUIDstamp=this.stamp,Zb=Zb.next;Y.mutable=!0;null!=Y.wrap_position&&(Y.wrap_position.zpp_inner._immutable=!1);var Ib=Y.active;Y.active=!0;this.precb.zpp_inner.pre_arbiter=Y;this.precb.zpp_inner.set=bb;for(var ub=this.prelisteners.head;null!=ub;){var wb=ub.elt;this.precb.zpp_inner.listener=wb;
var mb=this.precb.zpp_inner,ec=bb.int1,B=bb.int2,Bb,db=wb.options1,ab=ec.cbTypes;if(db.nonemptyintersection(ab,db.includes)&&!db.nonemptyintersection(ab,db.excludes)){var x=wb.options2,Nb=B.cbTypes;Bb=x.nonemptyintersection(Nb,x.includes)?!x.nonemptyintersection(Nb,x.excludes):!1}else Bb=!1;Bb?(mb.int1=ec,mb.int2=B):(mb.int1=B,mb.int2=ec);this.precb.zpp_inner.pre_swapped=pb!=this.precb.zpp_inner.int1;var Jb=wb.handlerp(this.precb);if(null!=Jb){var qb;null==l.PreFlag_ACCEPT&&(l.internal=!0,l.PreFlag_ACCEPT=
new df,l.internal=!1);Jb==l.PreFlag_ACCEPT?qb=5:(null==l.PreFlag_ACCEPT_ONCE&&(l.internal=!0,l.PreFlag_ACCEPT_ONCE=new df,l.internal=!1),Jb==l.PreFlag_ACCEPT_ONCE?qb=1:(null==l.PreFlag_IGNORE&&(l.internal=!0,l.PreFlag_IGNORE=new df,l.internal=!1),qb=Jb==l.PreFlag_IGNORE?6:2));Y.immState=qb}ub=ub.next}Y.mutable=!1;null!=Y.wrap_position&&(Y.wrap_position.zpp_inner._immutable=!0);Y.active=Ib;if(null!=bb)for(var qc=this.prelisteners.head;null!=qc;)7==qc.elt.itype&&(bb.COLLISIONstate=Y.immState,bb.SENSORstate=
Y.immState),bb.FLUIDstate=Y.immState,qc=qc.next}else null==bb?0==(Y.immState&4)&&(Y.immState=1):Y.immState=bb.FLUIDstate}Rb=Rb.next}ta=ta.next}if(Qa&&0==(Y.immState&4)){if(2==Y.b1.type){var mc=Y.b1;mc.world||(mc.component.waket=this.stamp+(this.midstep?0:1),3==mc.type&&(mc.kinematicDelaySleep=!0),mc.component.sleeping&&this.really_wake(mc,!1))}if(2==Y.b1.type){var oc=Y.b2;oc.world||(oc.component.waket=this.stamp+(this.midstep?0:1),3==oc.type&&(oc.kinematicDelaySleep=!0),oc.component.sleeping&&this.really_wake(oc,
!1))}}}if(0!=(Y.immState&1)){if(2==Y.b1.type&&Y.b1.component.sleeping){var vb=Y.b1;vb.world||(vb.component.waket=this.stamp+(this.midstep?0:1),3==vb.type&&(vb.kinematicDelaySleep=!0),vb.component.sleeping&&this.really_wake(vb,!1))}if(2==Y.b2.type&&Y.b2.component.sleeping){var eb=Y.b2;eb.world||(eb.component.waket=this.stamp+(this.midstep?0:1),3==eb.type&&(eb.kinematicDelaySleep=!0),eb.component.sleeping&&this.really_wake(eb,!1))}}if(Y.sleeping){Y.sleeping=!1;var Ob=this.f_arbiters,pc;null==Yd.zpp_pool?
pc=new Yd:(pc=Yd.zpp_pool,Yd.zpp_pool=pc.next,pc.next=null);pc.elt=Y;var Vb=pc;Vb.next=Ob.head;Ob.head=Vb;Ob.modified=!0;Ob.length++}f=Y}else if(Z){var Bc=Y;Bc.next=Pf.zpp_pool;Pf.zpp_pool=Bc;f=null}else f=Y;else f=Y}else if(1==n){var fc=c?this.c_arbiters_true:this.c_arbiters_false,yb;if(null==d){for(var Dc=null,Xb=(g.arbiters.length<h.arbiters.length?g:h).arbiters.head;null!=Xb;){var zc=Xb.elt;if(zc.id==K.id&&zc.di==L.id){Dc=zc;break}Xb=Xb.next}yb=Dc}else yb=d;var Pb=null==yb,R,Ec=!1;if(Pb)null==
Qf.zpp_pool?R=new Qf:(R=Qf.zpp_pool,Qf.zpp_pool=R.next,R.next=null),R.stat=c;else if(null==yb.colarb){yb.cleared=!0;for(var hc=yb.b1.arbiters,xc=null,Lb=hc.head;null!=Lb;){if(Lb.elt==yb){var Ic,sc;null==xc?(Ic=hc.head,sc=Ic.next,hc.head=sc,null==hc.head&&(hc.pushmod=!0)):(Ic=xc.next,sc=Ic.next,xc.next=sc,null==sc&&(hc.pushmod=!0));var Cc=Ic;Cc.elt=null;Cc.next=la.zpp_pool;la.zpp_pool=Cc;hc.modified=!0;hc.length--;hc.pushmod=!0;break}xc=Lb;Lb=Lb.next}for(var Wb=yb.b2.arbiters,bc=null,vc=Wb.head;null!=
vc;){if(vc.elt==yb){var Kb,dc;null==bc?(Kb=Wb.head,dc=Kb.next,Wb.head=dc,null==Wb.head&&(Wb.pushmod=!0)):(Kb=bc.next,dc=Kb.next,bc.next=dc,null==dc&&(Wb.pushmod=!0));var Fc=Kb;Fc.elt=null;Fc.next=la.zpp_pool;la.zpp_pool=Fc;Wb.modified=!0;Wb.length--;Wb.pushmod=!0;break}bc=vc;vc=vc.next}null!=yb.pair&&(yb.pair.arb=null,yb.pair=null);yb.active=!1;this.f_arbiters.modified=!0;null==Qf.zpp_pool?R=new Qf:(R=Qf.zpp_pool,Qf.zpp_pool=R.next,R.next=null);R.intchange=!0;R.stat=c;Ec=Pb=!0}else R=yb.colarb,T=
K!=R.s1,R.stat!=c&&(R.stat=c,R.sleeping||((c?this.c_arbiters_false:this.c_arbiters_true).remove(R),fc.add(R)));if(Pb||R.stamp!=this.stamp||e)if(R.stamp=this.stamp,ka.contactCollide(K,L,R,T)){if(Pb){var Oc=L.id;R.b1=a.body;R.ws1=a;R.b2=b.body;R.ws2=b;R.id=K.id;R.di=Oc;var N=R.b1.arbiters,wc;null==la.zpp_pool?wc=new la:(wc=la.zpp_pool,la.zpp_pool=wc.next,wc.next=null);wc.elt=R;var ic=wc;ic.next=N.head;N.head=ic;N.modified=!0;N.length++;var Hc=R.b2.arbiters,yc;null==la.zpp_pool?yc=new la:(yc=la.zpp_pool,
la.zpp_pool=yc.next,yc.next=null);yc.elt=R;var Tc=yc;Tc.next=Hc.head;Hc.head=Tc;Hc.modified=!0;Hc.length++;R.active=!0;R.present=0;R.cleared=!1;R.sleeping=!1;R.fresh=!1;R.presentable=!1;R.s1=a;R.s2=b;R.userdef_restitution||(R.restitution=-Infinity>=R.s1.material.elasticity||-Infinity>=R.s2.material.elasticity?0:Infinity<=R.s1.material.elasticity||Infinity<=R.s2.material.elasticity?1:(R.s1.material.elasticity+R.s2.material.elasticity)/2,0>R.restitution&&(R.restitution=0),1<R.restitution&&(R.restitution=
1));R.userdef_dyn_fric||(R.dyn_fric=Math.sqrt(R.s1.material.dynamicFriction*R.s2.material.dynamicFriction));R.userdef_stat_fric||(R.stat_fric=Math.sqrt(R.s1.material.staticFriction*R.s2.material.staticFriction));R.userdef_rfric||(R.rfric=Math.sqrt(R.s1.material.rollingFriction*R.s2.material.rollingFriction));var gc;null==xd.zpp_pool?gc=new xd:(gc=xd.zpp_pool,xd.zpp_pool=gc.next,gc.next=null);gc.elt=R;var Qc=gc;Qc.next=fc.head;fc.head=Qc;fc.modified=!0;fc.length++;R.fresh=!Ec}else R.fresh=R.up_stamp<
this.stamp-1||R.endGenerated==this.stamp&&e;R.up_stamp=R.stamp;if(R.fresh||0==(R.immState&4)){R.immState=1;for(var Sc=!1,Lc=R.ws1.id>R.ws2.id?R.ws2:R.ws1,Uc=R.ws1.id>R.ws2.id?R.ws1:R.ws2,Gc=this.mrca1;null!=Gc.head;){var ad=Gc.head;Gc.head=ad.next;var Yc=ad;Yc.elt=null;Yc.next=F.zpp_pool;F.zpp_pool=Yc;null==Gc.head&&(Gc.pushmod=!0);Gc.modified=!0;Gc.length--}Gc.pushmod=!0;for(var Kc=this.mrca2;null!=Kc.head;){var gd=Kc.head;Kc.head=gd.next;var hd=gd;hd.elt=null;hd.next=F.zpp_pool;F.zpp_pool=hd;null==
Kc.head&&(Kc.pushmod=!0);Kc.modified=!0;Kc.length--}Kc.pushmod=!0;if(null!=Lc.cbSet){var $c=this.mrca1,Wc;null==F.zpp_pool?Wc=new F:(Wc=F.zpp_pool,F.zpp_pool=Wc.next,Wc.next=null);Wc.elt=Lc;var pd=Wc;pd.next=$c.head;$c.head=pd;$c.modified=!0;$c.length++}if(null!=Lc.body.cbSet){var bd=this.mrca1,td=Lc.body,Xc;null==F.zpp_pool?Xc=new F:(Xc=F.zpp_pool,F.zpp_pool=Xc.next,Xc.next=null);Xc.elt=td;var jd=Xc;jd.next=bd.head;bd.head=jd;bd.modified=!0;bd.length++}if(null!=Uc.cbSet){var od=this.mrca2,cd;null==
F.zpp_pool?cd=new F:(cd=F.zpp_pool,F.zpp_pool=cd.next,cd.next=null);cd.elt=Uc;var Jc=cd;Jc.next=od.head;od.head=Jc;od.modified=!0;od.length++}if(null!=Uc.body.cbSet){var xb=this.mrca2,sd=Uc.body,nc;null==F.zpp_pool?nc=new F:(nc=F.zpp_pool,F.zpp_pool=nc.next,nc.next=null);nc.elt=sd;var Ad=nc;Ad.next=xb.head;xb.head=Ad;xb.modified=!0;xb.length++}for(var Zc=Lc.body.compound,kd=Uc.body.compound;Zc!=kd;)if((null==Zc?0:Zc.depth)<(null==kd?0:kd.depth)){if(null!=kd.cbSet){var tc=this.mrca2,Rc;null==F.zpp_pool?
Rc=new F:(Rc=F.zpp_pool,F.zpp_pool=Rc.next,Rc.next=null);Rc.elt=kd;var Dd=Rc;Dd.next=tc.head;tc.head=Dd;tc.modified=!0;tc.length++}kd=kd.compound}else{if(null!=Zc.cbSet){var qd=this.mrca1,id;null==F.zpp_pool?id=new F:(id=F.zpp_pool,F.zpp_pool=id.next,id.next=null);id.elt=Zc;var Fd=id;Fd.next=qd.head;qd.head=Fd;qd.modified=!0;qd.length++}Zc=Zc.compound}for(var ud=this.mrca1.head;null!=ud;){for(var yd=ud.elt,zd=this.mrca2.head;null!=zd;){for(var Id=zd.elt,Bd=yd.cbSet,uc=Id.cbSet,ld=null,Nd=(Bd.cbpairs.length<
uc.cbpairs.length?Bd.cbpairs:uc.cbpairs).head;null!=Nd;){var Rd=Nd.elt;if(Rd.a==Bd&&Rd.b==uc||Rd.a==uc&&Rd.b==Bd){ld=Rd;break}Nd=Nd.next}if(null==ld){var Cd;null==O.zpp_pool?Cd=new O:(Cd=O.zpp_pool,O.zpp_pool=Cd.next,Cd.next=null);Cd.zip_listeners=!0;ea.setlt(Bd,uc)?(Cd.a=Bd,Cd.b=uc):(Cd.a=uc,Cd.b=Bd);ld=Cd;Bd.cbpairs.add(ld);uc!=Bd&&uc.cbpairs.add(ld)}ld.zip_listeners&&(ld.zip_listeners=!1,ld.__validate());if(null!=ld.listeners.head){for(var md=null,Qd=null,Ed=this.prelisteners;null!=Ed.head;){var Ac=
Ed.head;Ed.head=Ac.next;var $d=Ac;$d.elt=null;$d.next=Za.zpp_pool;Za.zpp_pool=$d;null==Ed.head&&(Ed.pushmod=!0);Ed.modified=!0;Ed.length--}Ed.pushmod=!0;for(var Vd=null,Ld=null,ke=(Bd.cbpairs.length<uc.cbpairs.length?Bd.cbpairs:uc.cbpairs).head;null!=ke;){var de=ke.elt;if(de.a==Bd&&de.b==uc||de.a==uc&&de.b==Bd){Ld=de;break}ke=ke.next}if(null==Ld){var dd;null==O.zpp_pool?dd=new O:(dd=O.zpp_pool,O.zpp_pool=dd.next,dd.next=null);dd.zip_listeners=!0;ea.setlt(Bd,uc)?(dd.a=Bd,dd.b=uc):(dd.a=uc,dd.b=Bd);
Ld=dd;Bd.cbpairs.add(Ld);uc!=Bd&&uc.cbpairs.add(Ld)}Ld.zip_listeners&&(Ld.zip_listeners=!1,Ld.__validate());for(var he=Ld.listeners.head;null!=he;){var le=he.elt;if(5==le.event&&0!=(le.itype&1)){var ee=this.prelisteners,Zd;null==Za.zpp_pool?Zd=new Za:(Zd=Za.zpp_pool,Za.zpp_pool=Zd.next,Zd.next=null);Zd.elt=le;var ge=Zd;null==Vd?(ge.next=ee.head,ee.head=ge):(ge.next=Vd.next,Vd.next=ge);ee.pushmod=ee.modified=!0;ee.length++;Vd=ge;Sc=Sc?!0:!le.pure}he=he.next}if(null!=this.prelisteners.head)if(md=je.get(yd,
Id),null==md&&(Qd=Lf.get(yd,Id),this.add_callbackset(Qd)),null==md||(md.COLLISIONstamp!=this.stamp||e)&&0==(md.COLLISIONstate&4)){null!=Qd&&(md=Qd);if(null!=md)for(var qe=this.prelisteners.head;null!=qe;)7==qe.elt.itype?(md.COLLISIONstamp=this.stamp,md.SENSORstamp=this.stamp,md.FLUIDstamp=this.stamp):md.COLLISIONstamp=this.stamp,qe=qe.next;R.mutable=!0;null!=R.wrap_normal&&(R.wrap_normal.zpp_inner._immutable=!1);null!=R.wrap_contacts&&(R.wrap_contacts.zpp_inner.immutable=!1);var Be=R.active,te=R.active=
!0,Fe=null,re=null,se=R.innards.next;R.hc2=!1;for(var ce=R.contacts.next;null!=ce;){var Ud=ce;if(Ud.stamp+u.arbiterExpirationDelay<R.stamp){var ue=R.contacts,Ee,oe;null==Fe?(Ee=ue.next,oe=Ee.next,ue.next=oe,null==ue.next&&(ue.pushmod=!0)):(Ee=Fe.next,oe=Ee.next,Fe.next=oe,null==oe&&(ue.pushmod=!0));Ee._inuse=!1;ue.modified=!0;ue.length--;ue.pushmod=!0;var ce=oe,xe=R.innards,ie,pe;null==re?(ie=xe.next,pe=ie.next,xe.next=pe,null==xe.next&&(xe.pushmod=!0)):(ie=re.next,pe=ie.next,re.next=pe,null==pe&&
(xe.pushmod=!0));ie._inuse=!1;xe.modified=!0;xe.length--;xe.pushmod=!0;var se=pe,cc=Ud;cc.arbiter=null;cc.next=sa.zpp_pool;sa.zpp_pool=cc}else{var Ne=Ud.inner,Te=Ud.active;Ud.active=Ud.stamp==R.stamp;Ud.active&&(te?(te=!1,R.c1=Ne,R.oc1=Ud):(R.hc2=!0,R.c2=Ne,R.oc2=Ud));Te!=Ud.active&&(R.contacts.modified=!0);Fe=ce;re=se;se=se.next;ce=ce.next}}if(R.hc2){R.hpc2=!0;if(R.oc1.posOnly){var Ue=R.c1;R.c1=R.c2;R.c2=Ue;var Ye=R.oc1;R.oc1=R.oc2;R.oc2=Ye;R.hc2=!1}else R.oc2.posOnly&&(R.hc2=!1);R.oc1.posOnly&&
(te=!0)}else R.hpc2=!1;this.precb.zpp_inner.pre_arbiter=R;this.precb.zpp_inner.set=md;for(var Gd=this.prelisteners.head;null!=Gd;){var Ke=Gd.elt;this.precb.zpp_inner.listener=Ke;var Od=this.precb.zpp_inner,ed=md.int1,Wd=md.int2,Qe,Pe=Ke.options1,af=ed.cbTypes;if(Pe.nonemptyintersection(af,Pe.includes)&&!Pe.nonemptyintersection(af,Pe.excludes)){var Re=Ke.options2,cf=Wd.cbTypes;Qe=Re.nonemptyintersection(cf,Re.includes)?!Re.nonemptyintersection(cf,Re.excludes):!1}else Qe=!1;Qe?(Od.int1=ed,Od.int2=Wd):
(Od.int1=Wd,Od.int2=ed);this.precb.zpp_inner.pre_swapped=yd!=this.precb.zpp_inner.int1;var Se=Ke.handlerp(this.precb);if(null!=Se){var $b;null==l.PreFlag_ACCEPT&&(l.internal=!0,l.PreFlag_ACCEPT=new df,l.internal=!1);Se==l.PreFlag_ACCEPT?$b=5:(null==l.PreFlag_ACCEPT_ONCE&&(l.internal=!0,l.PreFlag_ACCEPT_ONCE=new df,l.internal=!1),Se==l.PreFlag_ACCEPT_ONCE?$b=1:(null==l.PreFlag_IGNORE&&(l.internal=!0,l.PreFlag_IGNORE=new df,l.internal=!1),$b=Se==l.PreFlag_IGNORE?6:2));R.immState=$b}Gd=Gd.next}R.mutable=
!1;null!=R.wrap_normal&&(R.wrap_normal.zpp_inner._immutable=!0);null!=R.wrap_contacts&&(R.wrap_contacts.zpp_inner.immutable=!0);R.active=Be;if(null!=md)for(var Ze=this.prelisteners.head;null!=Ze;)7==Ze.elt.itype?(md.COLLISIONstate=R.immState,md.SENSORstate=R.immState,md.FLUIDstate=R.immState):md.COLLISIONstate=R.immState,Ze=Ze.next}else null==md?0==(R.immState&4)&&(R.immState=1):R.immState=md.COLLISIONstate}zd=zd.next}ud=ud.next}if(Sc&&0==(R.immState&4)){if(2==R.b1.type){var Ge=R.b1;Ge.world||(Ge.component.waket=
this.stamp+(this.midstep?0:1),3==Ge.type&&(Ge.kinematicDelaySleep=!0),Ge.component.sleeping&&this.really_wake(Ge,!1))}if(2==R.b1.type){var Oe=R.b2;Oe.world||(Oe.component.waket=this.stamp+(this.midstep?0:1),3==Oe.type&&(Oe.kinematicDelaySleep=!0),Oe.component.sleeping&&this.really_wake(Oe,!1))}}}if(0!=(R.immState&1)){if(2==R.b1.type&&R.b1.component.sleeping){var He=R.b1;He.world||(He.component.waket=this.stamp+(this.midstep?0:1),3==He.type&&(He.kinematicDelaySleep=!0),He.component.sleeping&&this.really_wake(He,
!1))}if(2==R.b2.type&&R.b2.component.sleeping){var Ve=R.b2;Ve.world||(Ve.component.waket=this.stamp+(this.midstep?0:1),3==Ve.type&&(Ve.kinematicDelaySleep=!0),Ve.component.sleeping&&this.really_wake(Ve,!1))}}if(R.sleeping){R.sleeping=!1;var $e;null==xd.zpp_pool?$e=new xd:($e=xd.zpp_pool,xd.zpp_pool=$e.next,$e.next=null);$e.elt=R;var vd=$e;vd.next=fc.head;fc.head=vd;fc.modified=!0;fc.length++}f=R}else if(Pb){var Af=R;Af.userdef_dyn_fric=!1;Af.userdef_stat_fric=!1;Af.userdef_restitution=!1;Af.userdef_rfric=
!1;Af.__ref_edge1=Af.__ref_edge2=null;Af.next=Qf.zpp_pool;Qf.zpp_pool=Af;f=null}else f=R;else f=R}else{var Ae;if(null==d){for(var sf=null,kf=(g.arbiters.length<h.arbiters.length?g:h).arbiters.head;null!=kf;){var pf=kf.elt;if(pf.id==K.id&&pf.di==L.id){sf=pf;break}kf=kf.next}Ae=sf}else Ae=d;var Hf=null==Ae,Fb,yf=!1;if(Hf)null==ch.zpp_pool?Fb=new ch:(Fb=ch.zpp_pool,ch.zpp_pool=Fb.next,Fb.next=null);else if(null==Ae.sensorarb){Ae.cleared=!0;for(var We=Ae.b1.arbiters,If=null,Hd=We.head;null!=Hd;){if(Hd.elt==
Ae){var jc,jf;null==If?(jc=We.head,jf=jc.next,We.head=jf,null==We.head&&(We.pushmod=!0)):(jc=If.next,jf=jc.next,If.next=jf,null==jf&&(We.pushmod=!0));var Ie=jc;Ie.elt=null;Ie.next=la.zpp_pool;la.zpp_pool=Ie;We.modified=!0;We.length--;We.pushmod=!0;break}If=Hd;Hd=Hd.next}for(var Xd=Ae.b2.arbiters,fd=null,lf=Xd.head;null!=lf;){if(lf.elt==Ae){var mf,nf;null==fd?(mf=Xd.head,nf=mf.next,Xd.head=nf,null==Xd.head&&(Xd.pushmod=!0)):(mf=fd.next,nf=mf.next,fd.next=nf,null==nf&&(Xd.pushmod=!0));var Je=mf;Je.elt=
null;Je.next=la.zpp_pool;la.zpp_pool=Je;Xd.modified=!0;Xd.length--;Xd.pushmod=!0;break}fd=lf;lf=lf.next}null!=Ae.pair&&(Ae.pair.arb=null,Ae.pair=null);Ae.active=!1;this.f_arbiters.modified=!0;null==ch.zpp_pool?Fb=new ch:(Fb=ch.zpp_pool,ch.zpp_pool=Fb.next,Fb.next=null);yf=Hf=Fb.intchange=!0}else Fb=Ae.sensorarb;if(Hf||Fb.stamp!=this.stamp||e)if(Fb.stamp=this.stamp,ka.testCollide(K,L)){if(Hf){var Ef=L.id;Fb.b1=a.body;Fb.ws1=a;Fb.b2=b.body;Fb.ws2=b;Fb.id=K.id;Fb.di=Ef;var tf=Fb.b1.arbiters,of;null==
la.zpp_pool?of=new la:(of=la.zpp_pool,la.zpp_pool=of.next,of.next=null);of.elt=Fb;var Df=of;Df.next=tf.head;tf.head=Df;tf.modified=!0;tf.length++;var vf=Fb.b2.arbiters,rf;null==la.zpp_pool?rf=new la:(rf=la.zpp_pool,la.zpp_pool=rf.next,rf.next=null);rf.elt=Fb;var Tf=rf;Tf.next=vf.head;vf.head=Tf;vf.modified=!0;vf.length++;Fb.active=!0;Fb.present=0;Fb.cleared=!1;Fb.sleeping=!1;Fb.fresh=!1;Fb.presentable=!1;var Rf=this.s_arbiters,Cf;null==Td.zpp_pool?Cf=new Td:(Cf=Td.zpp_pool,Td.zpp_pool=Cf.next,Cf.next=
null);Cf.elt=Fb;var bg=Cf;bg.next=Rf.head;Rf.head=bg;Rf.modified=!0;Rf.length++;Fb.fresh=!yf}else Fb.fresh=Fb.up_stamp<this.stamp-1||Fb.endGenerated==this.stamp&&e;Fb.up_stamp=Fb.stamp;if(Fb.fresh||0==(Fb.immState&4)){Fb.immState=1;for(var nd=!1,Nf=Fb.ws1.id>Fb.ws2.id?Fb.ws2:Fb.ws1,Of=Fb.ws1.id>Fb.ws2.id?Fb.ws1:Fb.ws2,uf=this.mrca1;null!=uf.head;){var cg=uf.head;uf.head=cg.next;var Xf=cg;Xf.elt=null;Xf.next=F.zpp_pool;F.zpp_pool=Xf;null==uf.head&&(uf.pushmod=!0);uf.modified=!0;uf.length--}uf.pushmod=
!0;for(var De=this.mrca2;null!=De.head;){var gf=De.head;De.head=gf.next;var wf=gf;wf.elt=null;wf.next=F.zpp_pool;F.zpp_pool=wf;null==De.head&&(De.pushmod=!0);De.modified=!0;De.length--}De.pushmod=!0;if(null!=Nf.cbSet){var wd=this.mrca1,Sd;null==F.zpp_pool?Sd=new F:(Sd=F.zpp_pool,F.zpp_pool=Sd.next,Sd.next=null);Sd.elt=Nf;var qg=Sd;qg.next=wd.head;wd.head=qg;wd.modified=!0;wd.length++}if(null!=Nf.body.cbSet){var ig=this.mrca1,Cg=Nf.body,$f;null==F.zpp_pool?$f=new F:($f=F.zpp_pool,F.zpp_pool=$f.next,
$f.next=null);$f.elt=Cg;var zg=$f;zg.next=ig.head;ig.head=zg;ig.modified=!0;ig.length++}if(null!=Of.cbSet){var lg=this.mrca2,eg;null==F.zpp_pool?eg=new F:(eg=F.zpp_pool,F.zpp_pool=eg.next,eg.next=null);eg.elt=Of;var Eg=eg;Eg.next=lg.head;lg.head=Eg;lg.modified=!0;lg.length++}if(null!=Of.body.cbSet){var mg=this.mrca2,Sg=Of.body,fg;null==F.zpp_pool?fg=new F:(fg=F.zpp_pool,F.zpp_pool=fg.next,fg.next=null);fg.elt=Sg;var Kd=fg;Kd.next=mg.head;mg.head=Kd;mg.modified=!0;mg.length++}for(var ag=Nf.body.compound,
Xe=Of.body.compound;ag!=Xe;)if((null==ag?0:ag.depth)<(null==Xe?0:Xe.depth)){if(null!=Xe.cbSet){var Jf=this.mrca2,gg;null==F.zpp_pool?gg=new F:(gg=F.zpp_pool,F.zpp_pool=gg.next,gg.next=null);gg.elt=Xe;var Lg=gg;Lg.next=Jf.head;Jf.head=Lg;Jf.modified=!0;Jf.length++}Xe=Xe.compound}else{if(null!=ag.cbSet){var tg=this.mrca1,jg;null==F.zpp_pool?jg=new F:(jg=F.zpp_pool,F.zpp_pool=jg.next,jg.next=null);jg.elt=ag;var Qg=jg;Qg.next=tg.head;tg.head=Qg;tg.modified=!0;tg.length++}ag=ag.compound}for(var ug=this.mrca1.head;null!=
ug;){for(var wg=ug.elt,xg=this.mrca2.head;null!=xg;){for(var Jg=xg.elt,hf=wg.cbSet,Kf=Jg.cbSet,Uf=null,Ag=(hf.cbpairs.length<Kf.cbpairs.length?hf.cbpairs:Kf.cbpairs).head;null!=Ag;){var pg=Ag.elt;if(pg.a==hf&&pg.b==Kf||pg.a==Kf&&pg.b==hf){Uf=pg;break}Ag=Ag.next}if(null==Uf){var xf;null==O.zpp_pool?xf=new O:(xf=O.zpp_pool,O.zpp_pool=xf.next,xf.next=null);xf.zip_listeners=!0;ea.setlt(hf,Kf)?(xf.a=hf,xf.b=Kf):(xf.a=Kf,xf.b=hf);Uf=xf;hf.cbpairs.add(Uf);Kf!=hf&&Kf.cbpairs.add(Uf)}Uf.zip_listeners&&(Uf.zip_listeners=
!1,Uf.__validate());if(null!=Uf.listeners.head){for(var bf=null,Dg=null,dg=this.prelisteners;null!=dg.head;){var Yg=dg.head;dg.head=Yg.next;var Rg=Yg;Rg.elt=null;Rg.next=Za.zpp_pool;Za.zpp_pool=Rg;null==dg.head&&(dg.pushmod=!0);dg.modified=!0;dg.length--}dg.pushmod=!0;for(var Fg=null,Zf=null,Gg=(hf.cbpairs.length<Kf.cbpairs.length?hf.cbpairs:Kf.cbpairs).head;null!=Gg;){var vg=Gg.elt;if(vg.a==hf&&vg.b==Kf||vg.a==Kf&&vg.b==hf){Zf=vg;break}Gg=Gg.next}if(null==Zf){var Bf;null==O.zpp_pool?Bf=new O:(Bf=
O.zpp_pool,O.zpp_pool=Bf.next,Bf.next=null);Bf.zip_listeners=!0;ea.setlt(hf,Kf)?(Bf.a=hf,Bf.b=Kf):(Bf.a=Kf,Bf.b=hf);Zf=Bf;hf.cbpairs.add(Zf);Kf!=hf&&Kf.cbpairs.add(Zf)}Zf.zip_listeners&&(Zf.zip_listeners=!1,Zf.__validate());for(var Hg=Zf.listeners.head;null!=Hg;){var Ig=Hg.elt;if(5==Ig.event&&0!=(Ig.itype&2)){var yg=this.prelisteners,sg;null==Za.zpp_pool?sg=new Za:(sg=Za.zpp_pool,Za.zpp_pool=sg.next,sg.next=null);sg.elt=Ig;var Bg=sg;null==Fg?(Bg.next=yg.head,yg.head=Bg):(Bg.next=Fg.next,Fg.next=Bg);
yg.pushmod=yg.modified=!0;yg.length++;Fg=Bg;nd=nd?!0:!Ig.pure}Hg=Hg.next}if(null!=this.prelisteners.head)if(bf=je.get(wg,Jg),null==bf&&(Dg=Lf.get(wg,Jg),this.add_callbackset(Dg)),null==bf||(bf.SENSORstamp!=this.stamp||e)&&0==(bf.SENSORstate&4)){null!=Dg&&(bf=Dg);if(null!=bf)for(var Mg=this.prelisteners.head;null!=Mg;)7==Mg.elt.itype?(bf.COLLISIONstamp=this.stamp,bf.SENSORstamp=this.stamp,bf.FLUIDstamp=this.stamp):bf.SENSORstamp=this.stamp,Mg=Mg.next;var mh=Fb.active;Fb.active=!0;this.precb.zpp_inner.pre_arbiter=
Fb;this.precb.zpp_inner.set=bf;for(var Ng=this.prelisteners.head;null!=Ng;){var Og=Ng.elt;this.precb.zpp_inner.listener=Og;var Pg=this.precb.zpp_inner,Wg=bf.int1,Xg=bf.int2,bh,Tg=Og.options1,oh=Wg.cbTypes;if(Tg.nonemptyintersection(oh,Tg.includes)&&!Tg.nonemptyintersection(oh,Tg.excludes)){var Vg=Og.options2,ph=Xg.cbTypes;bh=Vg.nonemptyintersection(ph,Vg.includes)?!Vg.nonemptyintersection(ph,Vg.excludes):!1}else bh=!1;bh?(Pg.int1=Wg,Pg.int2=Xg):(Pg.int1=Xg,Pg.int2=Wg);this.precb.zpp_inner.pre_swapped=
wg!=this.precb.zpp_inner.int1;var Zg=Og.handlerp(this.precb);if(null!=Zg){var $g;null==l.PreFlag_ACCEPT&&(l.internal=!0,l.PreFlag_ACCEPT=new df,l.internal=!1);Zg==l.PreFlag_ACCEPT?$g=5:(null==l.PreFlag_ACCEPT_ONCE&&(l.internal=!0,l.PreFlag_ACCEPT_ONCE=new df,l.internal=!1),Zg==l.PreFlag_ACCEPT_ONCE?$g=1:(null==l.PreFlag_IGNORE&&(l.internal=!0,l.PreFlag_IGNORE=new df,l.internal=!1),$g=Zg==l.PreFlag_IGNORE?6:2));Fb.immState=$g}Ng=Ng.next}Fb.active=mh;if(null!=bf)for(var ah=this.prelisteners.head;null!=
ah;)7==ah.elt.itype?(bf.COLLISIONstate=Fb.immState,bf.SENSORstate=Fb.immState,bf.FLUIDstate=Fb.immState):bf.SENSORstate=Fb.immState,ah=ah.next}else null==bf?0==(Fb.immState&4)&&(Fb.immState=1):Fb.immState=bf.SENSORstate}xg=xg.next}ug=ug.next}if(nd&&0==(Fb.immState&4)){if(1!=Fb.b1.type){var fh=Fb.b1;fh.world||(fh.component.waket=this.stamp+(this.midstep?0:1),3==fh.type&&(fh.kinematicDelaySleep=!0),fh.component.sleeping&&this.really_wake(fh,!1))}if(1!=Fb.b2.type){var ih=Fb.b2;ih.world||(ih.component.waket=
this.stamp+(this.midstep?0:1),3==ih.type&&(ih.kinematicDelaySleep=!0),ih.component.sleeping&&this.really_wake(ih,!1))}}}if(Fb.sleeping){Fb.sleeping=!1;var uh=this.s_arbiters,nh;null==Td.zpp_pool?nh=new Td:(nh=Td.zpp_pool,Td.zpp_pool=nh.next,nh.next=null);nh.elt=Fb;var wh=nh;wh.next=uh.head;uh.head=wh;uh.modified=!0;uh.length++}f=Fb}else if(Hf){var xh=Fb;xh.next=ch.zpp_pool;ch.zpp_pool=xh;f=null}else f=Fb;else f=Fb}}return f},MRCA_chains:function(a,b){for(var c=this.mrca1;null!=c.head;){var d=c.head;
c.head=d.next;d.elt=null;d.next=F.zpp_pool;F.zpp_pool=d;null==c.head&&(c.pushmod=!0);c.modified=!0;c.length--}c.pushmod=!0;for(c=this.mrca2;null!=c.head;)d=c.head,c.head=d.next,d.elt=null,d.next=F.zpp_pool,F.zpp_pool=d,null==c.head&&(c.pushmod=!0),c.modified=!0,c.length--;c.pushmod=!0;null!=a.cbSet&&(c=this.mrca1,null==F.zpp_pool?d=new F:(d=F.zpp_pool,F.zpp_pool=d.next,d.next=null),d.elt=a,d.next=c.head,c.head=d,c.modified=!0,c.length++);if(null!=a.body.cbSet){var c=this.mrca1,d=a.body,e;null==F.zpp_pool?
e=new F:(e=F.zpp_pool,F.zpp_pool=e.next,e.next=null);e.elt=d;d=e;d.next=c.head;c.head=d;c.modified=!0;c.length++}null!=b.cbSet&&(c=this.mrca2,null==F.zpp_pool?d=new F:(d=F.zpp_pool,F.zpp_pool=d.next,d.next=null),d.elt=b,d.next=c.head,c.head=d,c.modified=!0,c.length++);null!=b.body.cbSet&&(c=this.mrca2,d=b.body,null==F.zpp_pool?e=new F:(e=F.zpp_pool,F.zpp_pool=e.next,e.next=null),e.elt=d,d=e,d.next=c.head,c.head=d,c.modified=!0,c.length++);c=a.body.compound;for(d=b.body.compound;c!=d;)if((null==c?
0:c.depth)<(null==d?0:d.depth)){if(null!=d.cbSet){e=this.mrca2;var f;null==F.zpp_pool?f=new F:(f=F.zpp_pool,F.zpp_pool=f.next,f.next=null);f.elt=d;f.next=e.head;e.head=f;e.modified=!0;e.length++}d=d.compound}else null!=c.cbSet&&(e=this.mrca1,null==F.zpp_pool?f=new F:(f=F.zpp_pool,F.zpp_pool=f.next,f.next=null),f.elt=c,f.next=e.head,e.head=f,e.modified=!0,e.length++),c=c.compound},__class__:Yn};var ui=function(){this.next=this.prev=this.shape=this.aabb=null};i["zpp_nape.space.ZPP_SweepData"]=ui;ui.__name__=
["zpp_nape","space","ZPP_SweepData"];ui.prototype={__class__:ui};var Nm=function(a){this.list=this.failed=null;si.call(this);this.space=a;this.is_sweep=!0;this.sweep=this};i["zpp_nape.space.ZPP_SweepPhase"]=Nm;Nm.__name__=["zpp_nape","space","ZPP_SweepPhase"];Nm.__super__=si;Nm.prototype=z(si.prototype,{__insert:function(a){var b;null==ui.zpp_pool?b=new ui:(b=ui.zpp_pool,ui.zpp_pool=b.next,b.next=null);a.sweep=b;b.shape=a;b.aabb=a.aabb;b.next=this.list;null!=this.list&&(this.list.prev=b);this.list=
b},__remove:function(a){var b=a.sweep;null==b.prev?this.list=b.next:b.prev.next=b.next;null!=b.next&&(b.next.prev=b.prev);a.sweep=null;b.prev=null;b.shape=null;b.aabb=null;b.next=ui.zpp_pool;ui.zpp_pool=b},sync_broadphase:function(){this.space.validation();if(null!=this.list)for(var a=this.list.next;null!=a;){var b=a.next,c=a.prev;if(!(a.aabb.minx>c.aabb.minx)){for(;null!=c.prev&&c.prev.aabb.minx>a.aabb.minx;)c=c.prev;var d=a.prev;d.next=a.next;null!=a.next&&(a.next.prev=d);null==c.prev?(a.prev=null,
this.list=a,a.next=c,c.prev=a):(a.prev=c.prev,c.prev=a,a.prev.next=a,a.next=c)}a=b}},broadphase:function(a,b){if(null!=this.list){for(var c=this.list.next;null!=c;){var d=c.next,e=c.prev;if(!(c.aabb.minx>e.aabb.minx)){for(;null!=e.prev&&e.prev.aabb.minx>c.aabb.minx;)e=e.prev;var f=c.prev;f.next=c.next;null!=c.next&&(c.next.prev=f);null==e.prev?(c.prev=null,this.list=c,c.next=e,e.prev=c):(c.prev=e.prev,e.prev=c,c.prev.next=c,c.next=e)}c=d}for(c=this.list;null!=c;){for(var d=c.next,e=c.shape,f=e.body,
g=c.aabb.maxx;null!=d&&!(d.aabb.minx>g);){var h=d.shape,i=h.body;if(i!=f&&!(1==f.type&&1==i.type)&&(!f.component.sleeping||!i.component.sleeping)){var k=e.aabb,l=h.aabb;l.miny>k.maxy||k.miny>l.maxy||(b?a.narrowPhase(e,h,2!=f.type||2!=i.type,null,!1):a.continuousEvent(e,h,2!=f.type||2!=i.type,null,!1))}d=d.next}c=c.next}}},bodiesInAABB:function(a,b,c,d,e){this.sync_broadphase();this.updateAABBShape(a);a=this.aabbShape.zpp_inner.aabb;e=null==e?new wg:e;null==this.failed&&(this.failed=new wg);for(var f=
this.list;null!=f&&f.aabb.maxx<a.minx;)f=f.next;for(;null!=f&&f.aabb.minx<=a.maxx;){var g=f.shape,h=g.body.outer,i=f.aabb;a.miny<=i.maxy&&i.miny<=a.maxy&&a.minx<=i.maxx&&i.minx<=a.maxx&&(null!=d?(i=g.filter,i=0!=(i.collisionMask&d.collisionGroup)?0!=(d.collisionMask&i.collisionGroup):!1):i=!0,i&&(b?c?this.failed.has(h)||(g=ka.containTest(this.aabbShape.zpp_inner,g),!e.has(h)&&g?e.push(h):g||(e.remove(h),this.failed.push(h))):!e.has(h)&&ka.testCollide_safe(g,this.aabbShape.zpp_inner)&&e.push(h):c?
this.failed.has(h)||(g=g.aabb,g=g.minx>=a.minx&&g.miny>=a.miny&&g.maxx<=a.maxx&&g.maxy<=a.maxy,!e.has(h)&&g?e.push(h):g||(e.remove(h),this.failed.push(h))):(e.has(h)?g=!1:(g=g.aabb,g=g.minx>=a.minx&&g.miny>=a.miny&&g.maxx<=a.maxx?g.maxy<=a.maxy:!1),g&&e.push(h))));f=f.next}this.failed.clear();return e},bodiesInCircle:function(a,b,c,d,e,f){this.sync_broadphase();this.updateCircShape(a,b,c);a=this.circShape.zpp_inner.aabb;f=null==f?new wg:f;null==this.failed&&(this.failed=new wg);for(b=this.list;null!=
b&&b.aabb.maxx<a.minx;)b=b.next;for(;null!=b&&b.aabb.minx<=a.maxx;){c=b.aabb;if(a.miny<=c.maxy&&c.miny<=a.maxy&&a.minx<=c.maxx&&c.minx<=a.maxx){var g=b.shape,c=g.body.outer,h;null!=e?(h=g.filter,h=0!=(h.collisionMask&e.collisionGroup)?0!=(e.collisionMask&h.collisionGroup):!1):h=!0;h&&(d?this.failed.has(c)||(g=ka.containTest(this.circShape.zpp_inner,g),!f.has(c)&&g?f.push(c):g||(f.remove(c),this.failed.push(c))):!f.has(c)&&ka.testCollide_safe(g,this.circShape.zpp_inner)&&f.push(c))}b=b.next}this.failed.clear();
return f},__class__:Nm});var Ro=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=Ro;Ro.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"];Ro.prototype={__class__:Ro};var Mj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Shape"]=Mj;Mj.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"];Mj.prototype={add:function(a){var b;null==mh.zpp_pool?b=new mh:(b=mh.zpp_pool,mh.zpp_pool=b.next,
b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){var c;null==mh.zpp_pool?c=new mh:(c=mh.zpp_pool,mh.zpp_pool=c.next,c.next=null);c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=
!0));b=a;b.elt=null;b.next=mh.zpp_pool;mh.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Mj};var Wi=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Body"]=Wi;Wi.__name__=["zpp_nape","util","ZNPList_ZPP_Body"];Wi.prototype={add:function(a){var b;null==gd.zpp_pool?b=new gd:(b=gd.zpp_pool,gd.zpp_pool=b.next,b.next=null);b.elt=a;b.next=
this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){var c;null==gd.zpp_pool?c=new gd:(c=gd.zpp_pool,gd.zpp_pool=c.next,c.next=null);c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=gd.zpp_pool;gd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){for(var b=null,c=this.head;null!=
c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=gd.zpp_pool;gd.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=gd.zpp_pool;gd.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Wi};var Om=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Compound"]=Om;Om.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"];Om.prototype={remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=
c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=Rm.zpp_pool;Rm.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Om};var Lk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Arbiter"]=Lk;Lk.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"];Lk.prototype={pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=la.zpp_pool;la.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=la.zpp_pool;la.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Lk};var No=function(){this.length=
0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=No;No.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"];No.prototype={add:function(a){var b;null==uh.zpp_pool?b=new uh:(b=uh.zpp_pool,uh.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=uh.zpp_pool;uh.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=
this.head.elt;this.pop();return a},remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=uh.zpp_pool;uh.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},__class__:No};var Oj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_PartitionVertex"]=Oj;Oj.__name__=
["zpp_nape","util","ZNPList_ZPP_PartitionVertex"];Oj.prototype={add:function(a){var b;null==Rf.zpp_pool?b=new Rf:(b=Rf.zpp_pool,Rf.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){var c;null==Rf.zpp_pool?c=new Rf:(c=Rf.zpp_pool,Rf.zpp_pool=c.next,c.next=null);c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){var a=this.head;this.head=
a.next;a.elt=null;a.next=Rf.zpp_pool;Rf.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=Rf.zpp_pool;Rf.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Rf.zpp_pool;Rf.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.head,b=null;null!=a;){var c=a.next;a.next=b;b=this.head=a;a=c}this.pushmod=this.modified=!0},__class__:Oj};var zl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_PartitionedPoly"]=
zl;zl.__name__=["zpp_nape","util","ZNPList_ZPP_PartitionedPoly"];zl.prototype={add:function(a){var b;null==nh.zpp_pool?b=new nh:(b=nh.zpp_pool,nh.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=nh.zpp_pool;nh.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){var b,c;
null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=nh.zpp_pool;nh.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:zl};var Al=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_GeomVert"]=Al;Al.__name__=["zpp_nape","util","ZNPList_ZPP_GeomVert"];Al.prototype={add:function(a){var b;null==vi.zpp_pool?b=new vi:(b=vi.zpp_pool,
vi.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=vi.zpp_pool;vi.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},__class__:Al};var To=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_AABBPair"]=To;To.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"];
To.prototype={pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=qc.zpp_pool;qc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=qc.zpp_pool;qc.zpp_pool=b;this.modified=!0;
this.length--;this.pushmod=!0;break}b=c;c=c.next}},__class__:To};var Uo=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Edge"]=Uo;Uo.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"];Uo.prototype={add:function(a){var b;null==qe.zpp_pool?b=new qe:(b=qe.zpp_pool,qe.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){var c;null==qe.zpp_pool?c=new qe:(c=qe.zpp_pool,qe.zpp_pool=
c.next,c.next=null);c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=qe.zpp_pool;qe.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==
c&&(this.pushmod=!0));a=b;a.elt=null;a.next=qe.zpp_pool;qe.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.head,b=null;null!=a;){var c=a.next;a.next=b;b=this.head=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Uo};var ti=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_AABBNode"]=ti;ti.__name__=["zpp_nape","util","ZNPList_ZPP_AABBNode"];
ti.prototype={add:function(a){var b;null==wi.zpp_pool?b=new wi:(b=wi.zpp_pool,wi.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=wi.zpp_pool;wi.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},__class__:ti};var Vo=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};
i["zpp_nape.util.ZNPList_ZPP_Component"]=Vo;Vo.__name__=["zpp_nape","util","ZNPList_ZPP_Component"];Vo.prototype={pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Mg.zpp_pool;Mg.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},__class__:Vo};var Yo=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=Yo;Yo.__name__=["zpp_nape","util",
"ZNPList_ZPP_FluidArbiter"];Yo.prototype={__class__:Yo};var Zo=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=Zo;Zo.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"];Zo.prototype={__class__:Zo};var Qm=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_Listener"]=Qm;Qm.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"];Qm.prototype={remove:function(a){for(var b=null,c=this.head;null!=
c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=Sm.zpp_pool;Sm.zpp_pool=b;this.modified=!0;this.length--;this.pushmod=!0;break}b=c;c=c.next}},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Qm};var Pm=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=Pm;Pm.__name__=["zpp_nape",
"util","ZNPList_ZPP_ColArbiter"];Pm.prototype={add:function(a){var b;null==xd.zpp_pool?b=new xd:(b=xd.zpp_pool,xd.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},remove:function(a){for(var b=null,c=this.head;null!=c;){if(c.elt==a){null==b?(a=this.head,this.head=c=a.next,null==this.head&&(this.pushmod=!0)):(a=b.next,c=a.next,b.next=c,null==c&&(this.pushmod=!0));b=a;b.elt=null;b.next=xd.zpp_pool;xd.zpp_pool=b;this.modified=!0;this.length--;
this.pushmod=!0;break}b=c;c=c.next}},__class__:Pm};var Ip=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=Ip;Ip.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionGroup"];Ip.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Ip};var Xo=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=Xo;Xo.__name__=["zpp_nape","util",
"ZNPList_ZPP_ToiEvent"];Xo.prototype={add:function(a){var b;null==wh.zpp_pool?b=new wh:(b=wh.zpp_pool,wh.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=wh.zpp_pool;wh.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==
this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=wh.zpp_pool;wh.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Xo};var Jp=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ConvexResult"]=Jp;Jp.__name__=["zpp_nape","util","ZNPList_ConvexResult"];Jp.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Jp};var $o=function(){this.length=
0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=$o;$o.__name__=["zpp_nape","util","ZNPList_ZPP_GeomPoly"];$o.prototype={add:function(a){var b;null==xh.zpp_pool?b=new xh:(b=xh.zpp_pool,xh.zpp_pool=b.next,b.next=null);b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){var c;null==xh.zpp_pool?c=new xh:(c=xh.zpp_pool,xh.zpp_pool=c.next,c.next=null);c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=
c);this.pushmod=this.modified=!0;this.length++;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:$o};var Kp=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};i["zpp_nape.util.ZNPList_RayResult"]=Kp;Kp.__name__=["zpp_nape","util","ZNPList_RayResult"];Kp.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Kp};var qa=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_CbType"]=
qa;qa.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"];qa.prototype={__class__:qa};var Xc=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=Xc;Xc.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"];Xc.prototype={__class__:Xc};var mh=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Shape"]=mh;mh.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"];mh.prototype={__class__:mh};var gd=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Body"]=
gd;gd.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"];gd.prototype={__class__:gd};var Lc=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Constraint"]=Lc;Lc.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"];Lc.prototype={__class__:Lc};var Rm=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Compound"]=Rm;Rm.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"];Rm.prototype={__class__:Rm};var la=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=
la;la.__name__=["zpp_nape","util","ZNPNode_ZPP_Arbiter"];la.prototype={__class__:la};var Za=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=Za;Za.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"];Za.prototype={__class__:Za};var fa=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_CbSet"]=fa;fa.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"];fa.prototype={__class__:fa};var F=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Interactor"]=
F;F.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"];F.prototype={__class__:F};var Qd=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=Qd;Qd.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"];Qd.prototype={__class__:Qd};var uh=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=uh;uh.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"];uh.prototype={__class__:uh};var Ad=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=
Ad;Ad.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"];Ad.prototype={__class__:Ad};var Rf=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_PartitionVertex"]=Rf;Rf.__name__=["zpp_nape","util","ZNPNode_ZPP_PartitionVertex"];Rf.prototype={__class__:Rf};var nh=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_PartitionedPoly"]=nh;nh.__name__=["zpp_nape","util","ZNPNode_ZPP_PartitionedPoly"];nh.prototype={__class__:nh};var vi=function(){this.next=this.elt=null};
i["zpp_nape.util.ZNPNode_ZPP_GeomVert"]=vi;vi.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomVert"];vi.prototype={__class__:vi};var qg=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Vec2"]=qg;qg.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"];qg.prototype={__class__:qg};var qc=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=qc;qc.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"];qc.prototype={__class__:qc};var qe=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Edge"]=
qe;qe.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"];qe.prototype={__class__:qe};var wi=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_AABBNode"]=wi;wi.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBNode"];wi.prototype={__class__:wi};var Mg=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Component"]=Mg;Mg.__name__=["zpp_nape","util","ZNPNode_ZPP_Component"];Mg.prototype={__class__:Mg};var Yd=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=
Yd;Yd.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"];Yd.prototype={__class__:Yd};var Td=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=Td;Td.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"];Td.prototype={__class__:Td};var Sm=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_Listener"]=Sm;Sm.__name__=["zpp_nape","util","ZNPNode_ZPP_Listener"];Sm.prototype={__class__:Sm};var xd=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=
xd;xd.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"];xd.prototype={__class__:xd};var Lp=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=Lp;Lp.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"];Lp.prototype={__class__:Lp};var wh=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=wh;wh.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"];wh.prototype={__class__:wh};var Mp=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ConvexResult"]=
Mp;Mp.__name__=["zpp_nape","util","ZNPNode_ConvexResult"];Mp.prototype={__class__:Mp};var xh=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=xh;xh.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"];xh.prototype={__class__:xh};var Np=function(){this.next=this.elt=null};i["zpp_nape.util.ZNPNode_RayResult"]=Np;Np.__name__=["zpp_nape","util","ZNPNode_RayResult"];Np.prototype={__class__:Np};var Qj=function(){this.at_index=0;this.at_ite=null;this.zip_length=!1;this._length=
0;this.inner=null;Cf.call(this);this.at_ite=null;this.at_index=0;this.zip_length=!0;this._length=0};i["zpp_nape.util.ZPP_MixVec2List"]=Qj;Qj.__name__=["zpp_nape","util","ZPP_MixVec2List"];Qj.get=function(a,b){null==b&&(b=!1);var c=new Qj;c.inner=a;c.zpp_inner.immutable=b;return c};Qj.__super__=Cf;Qj.prototype=z(Cf.prototype,{zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;for(var a=this.inner.next;null!=a;)this._length++,a=a.next;this.zip_length=!1}return this._length},zpp_vm:function(){this.zpp_inner.validate();
this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},at:function(a){this.zpp_vm();if(0>a||a>=this.zpp_gl())throw new h("Error: Index out of bounds");this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.at_index||null==this.at_ite){this.at_index=0;for(this.at_ite=this.inner.next;;)break}for(;this.at_index!=a;){this.at_index++;for(this.at_ite=this.at_ite.next;;)break}a=this.at_ite;if(null==a.outer){a.outer=new ja;var b=a.outer.zpp_inner;null!=b.outer&&(b.outer.zpp_inner=
null,b.outer=null);b._isimmutable=null;b._validate=null;b._invalidate=null;b.next=q.zpp_pool;q.zpp_pool=b;a.outer.zpp_inner=a}return a.outer},push:function(a){if(this.zpp_inner.immutable)throw new h("Error: Vec2List is immutable");this.zpp_inner.modify_test();this.zpp_vm();if(a.zpp_inner._inuse)throw new h("Error: Vec2 is already in use");var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;b&&(this.zpp_inner.reverse_flag?this.inner.add(a.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-
1),a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a));return b},__class__:Qj});var $g=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this._modifiable=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new oi;this._invalidated=!0};i["zpp_nape.util.ZPP_ConstraintList"]=
$g;$g.__name__=["zpp_nape","util","ZPP_ConstraintList"];$g.get=function(a,b){null==b&&(b=!1);var c=new Mn;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};$g.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=
!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:$g};var ah=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this._modifiable=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Wi;this._invalidated=!0};i["zpp_nape.util.ZPP_BodyList"]=
ah;ah.__name__=["zpp_nape","util","ZPP_BodyList"];ah.get=function(a,b){null==b&&(b=!1);var c=new wg;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};ah.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=
!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:ah};var oj=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_InteractorList"]=oj;oj.__name__=["zpp_nape","util","ZPP_InteractorList"];oj.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&
(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:oj};var Nh=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this._modifiable=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=
new Om;this._invalidated=!0};i["zpp_nape.util.ZPP_CompoundList"]=Nh;Nh.__name__=["zpp_nape","util","ZPP_CompoundList"];Nh.get=function(a,b){null==b&&(b=!1);var c=new Un;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Nh.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){null!=this._modifiable&&this._modifiable()},
validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Nh};var Kh=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this._modifiable=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Qm;
this._invalidated=!0};i["zpp_nape.util.ZPP_ListenerList"]=Kh;Kh.__name__=["zpp_nape","util","ZPP_ListenerList"];Kh.get=function(a,b){null==b&&(b=!1);var c=new Kn;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Kh.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){null!=this._modifiable&&this._modifiable()},
validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Kh};var Zg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this._modifiable=this.adder=this.post_adder=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Wh;this._invalidated=
!0};i["zpp_nape.util.ZPP_CbTypeList"]=Zg;Zg.__name__=["zpp_nape","util","ZPP_CbTypeList"];Zg.get=function(a,b){null==b&&(b=!1);var c=new mk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Zg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&
(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Zg};var Fi=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this._modifiable=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Fk;this._invalidated=!0};i["zpp_nape.util.ZPP_Vec2List"]=
Fi;Fi.__name__=["zpp_nape","util","ZPP_Vec2List"];Fi.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},
__class__:Fi};var Ei=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this._modifiable=this.adder=this.post_adder=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new $o;this._invalidated=!0};i["zpp_nape.util.ZPP_GeomPolyList"]=Ei;Ei.__name__=["zpp_nape","util","ZPP_GeomPolyList"];Ei.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&
(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Ei};var nj=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;
this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_RayResultList"]=nj;nj.__name__=["zpp_nape","util","ZPP_RayResultList"];nj.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:nj};var mj=function(){this.user_length=0;this.zip_length=
!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_ConvexResultList"]=mj;mj.__name__=["zpp_nape","util","ZPP_ConvexResultList"];mj.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&
this._validate())},__class__:mj};var qj=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_EdgeList"]=qj;qj.__name__=["zpp_nape","util","ZPP_EdgeList"];qj.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&
(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:qj};var Oh=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this._modifiable=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Mj;this._invalidated=!0};i["zpp_nape.util.ZPP_ShapeList"]=Oh;Oh.__name__=["zpp_nape","util","ZPP_ShapeList"];Oh.get=
function(a,b){null==b&&(b=!1);var c=new Xn;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Oh.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){null!=this._modifiable&&this._modifiable()},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=
!0;null!=this._invalidate&&this._invalidate(this)},__class__:Oh};var lj=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_InteractionGroupList"]=lj;lj.__name__=["zpp_nape","util","ZPP_InteractionGroupList"];lj.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=
!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:lj};var Mh=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Lk;this._invalidated=!0};i["zpp_nape.util.ZPP_ArbiterList"]=Mh;Mh.__name__=["zpp_nape","util","ZPP_ArbiterList"];Mh.get=
function(a,b){null==b&&(b=!1);var c=new Nn;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Mh.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Mh};var kj=function(){this.user_length=0;this.zip_length=!1;this.at_ite=
this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=this._invalidated=!1;this.inner=null};i["zpp_nape.util.ZPP_ContactList"]=kj;kj.__name__=["zpp_nape","util","ZPP_ContactList"];kj.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},
__class__:kj};var o=function(){};i["zpp_nape.util.ZPP_PubPool"]=o;o.__name__=["zpp_nape","util","ZPP_PubPool"];var oc=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};i["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=oc;oc.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"];oc.prototype={__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,g,h,i,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,g=a.prev,h=a.next,i=b.next):
(d=b,e=a,g=b.prev,h=a.prev,i=a.next)):(d=c,g=c.prev,a==b.prev?(e=a,f=b,h=a.prev,i=a.next,k=b.next):(e=b,f=a,h=b.prev,i=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=a);d.prev=g;null!=g&&(g.parent=d);d.next=h;null!=h&&(h.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=i;null!=i&&(i.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&
0==e.parent.colour){a=e;continue}break}},try_insert:function(a){var b=null,c=null;if(null==this.parent)null==oc.zpp_pool?b=new oc:(b=oc.zpp_pool,oc.zpp_pool=b.next,b.next=null),b.data=a,this.parent=b;else for(c=this.parent;;)if(this.lt(a,c.data))if(null==c.prev){null==oc.zpp_pool?b=new oc:(b=oc.zpp_pool,oc.zpp_pool=b.next,b.next=null);b.data=a;c.prev=b;b.parent=c;break}else c=c.prev;else if(this.lt(c.data,a))if(null==c.next){null==oc.zpp_pool?b=new oc:(b=oc.zpp_pool,oc.zpp_pool=b.next,b.next=null);
b.data=a;c.next=b;b.parent=c;break}else c=c.next;else break;if(null==b)return c;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:oc};var sg=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};i["zpp_nape.util.ZPP_Set_ZPP_PartitionVertex"]=sg;sg.__name__=["zpp_nape","util","ZPP_Set_ZPP_PartitionVertex"];sg.prototype={empty:function(){return null==this.parent},remove_node:function(a){if(null!=a.next&&null!=
a.prev){for(var b=a.next;null!=b.prev;)b=b.prev;var c=a.data;a.data=b.data;b.data=c;null!=this.swapped&&this.swapped(a.data,b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var d=c.prev;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);
break}}d=c.next;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=a.next=null;a.data=null;a.lt=null;a.swapped=null;a.next=sg.zpp_pool;sg.zpp_pool=a},__fix_neg_red:function(a){var b=
a.parent;if(b.prev==a){var c=a.prev,d=a.next,e=d.prev,f=d.next;c.colour=0;a.colour=b.colour=1;a.next=e;null!=e&&(e.parent=a);a=b.data;b.data=d.data;d.data=a;null!=this.swapped&&this.swapped(b.data,d.data);d.prev=f;null!=f&&(f.parent=d);d.next=b.next;null!=b.next&&(b.next.parent=d);b.next=d}else c=a.next,d=a.prev,e=d.next,f=d.prev,c.colour=0,a.colour=b.colour=1,a.prev=e,null!=e&&(e.parent=a),a=b.data,b.data=d.data,d.data=a,null!=this.swapped&&this.swapped(b.data,d.data),d.next=f,null!=f&&(f.parent=
d),d.prev=b.prev,null!=b.prev&&(b.prev.parent=d),b.prev=d;null!=d&&(d.parent=b);b=c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,g,h,i,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,g=a.prev,h=a.next,i=b.next):(d=b,e=a,g=b.prev,h=a.prev,i=a.next)):(d=c,g=c.prev,a==b.prev?(e=a,f=b,h=a.prev,i=a.next,k=b.next):(e=b,f=a,h=b.prev,i=a.prev,
k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=a);d.prev=g;null!=g&&(g.parent=d);d.next=h;null!=h&&(h.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=i;null!=i&&(i.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},insert:function(a){var b;null==sg.zpp_pool?b=new sg:(b=sg.zpp_pool,sg.zpp_pool=
b.next,b.next=null);b.data=a;if(null==this.parent)this.parent=b;else for(a=this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:sg};var Lg=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};i["zpp_nape.util.ZPP_Set_ZPP_PartitionPair"]=Lg;Lg.__name__=["zpp_nape",
"util","ZPP_Set_ZPP_PartitionPair"];Lg.prototype={remove_node:function(a){if(null!=a.next&&null!=a.prev){for(var b=a.next;null!=b.prev;)b=b.prev;var c=a.data;a.data=b.data;b.data=c;null!=this.swapped&&this.swapped(a.data,b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var d=c.prev;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==
d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}d=c.next;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=
a.next=null;a.data=null;a.lt=null;a.swapped=null;a.next=Lg.zpp_pool;Lg.zpp_pool=a},__fix_neg_red:function(a){var b=a.parent;if(b.prev==a){var c=a.prev,d=a.next,e=d.prev,f=d.next;c.colour=0;a.colour=b.colour=1;a.next=e;null!=e&&(e.parent=a);a=b.data;b.data=d.data;d.data=a;null!=this.swapped&&this.swapped(b.data,d.data);d.prev=f;null!=f&&(f.parent=d);d.next=b.next;null!=b.next&&(b.next.parent=d);b.next=d}else c=a.next,d=a.prev,e=d.next,f=d.prev,c.colour=0,a.colour=b.colour=1,a.prev=e,null!=e&&(e.parent=
a),a=b.data,b.data=d.data,d.data=a,null!=this.swapped&&this.swapped(b.data,d.data),d.next=f,null!=f&&(f.parent=d),d.prev=b.prev,null!=b.prev&&(b.prev.parent=d),b.prev=d;null!=d&&(d.parent=b);b=c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,g,h,i,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,g=a.prev,h=a.next,i=b.next):(d=b,e=a,g=
b.prev,h=a.prev,i=a.next)):(d=c,g=c.prev,a==b.prev?(e=a,f=b,h=a.prev,i=a.next,k=b.next):(e=b,f=a,h=b.prev,i=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=a);d.prev=g;null!=g&&(g.parent=d);d.next=h;null!=h&&(h.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=i;null!=i&&(i.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=
e;continue}break}},insert:function(a){var b;null==Lg.zpp_pool?b=new Lg:(b=Lg.zpp_pool,Lg.zpp_pool=b.next,b.next=null);b.data=a;if(null==this.parent)this.parent=b;else for(a=this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:Lg};var lg=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=
this.next=this.parent=null};i["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=lg;lg.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSet"];lg.prototype={empty:function(){return null==this.parent},find:function(a){for(var b=this.parent;null!=b&&b.data!=a;)b=this.lt(a,b.data)?b.prev:b.next;return b},find_weak:function(a){for(var b=this.parent;null!=b;)if(this.lt(a,b.data))b=b.prev;else if(this.lt(b.data,a))b=b.next;else break;return b},remove:function(a){this.remove_node(this.find(a))},remove_node:function(a){if(null!=
a.next&&null!=a.prev){for(var b=a.next;null!=b.prev;)b=b.prev;var c=a.data;a.data=b.data;b.data=c;null!=this.swapped&&this.swapped(a.data,b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var d=c.prev;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);
break}}d=c.next;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=a.next=null;a.data=null;a.lt=null;a.swapped=null;a.next=lg.zpp_pool;lg.zpp_pool=a},__fix_neg_red:function(a){var b=
a.parent;if(b.prev==a){var c=a.prev,d=a.next,e=d.prev,f=d.next;c.colour=0;a.colour=b.colour=1;a.next=e;null!=e&&(e.parent=a);a=b.data;b.data=d.data;d.data=a;null!=this.swapped&&this.swapped(b.data,d.data);d.prev=f;null!=f&&(f.parent=d);d.next=b.next;null!=b.next&&(b.next.parent=d);b.next=d}else c=a.next,d=a.prev,e=d.next,f=d.prev,c.colour=0,a.colour=b.colour=1,a.prev=e,null!=e&&(e.parent=a),a=b.data,b.data=d.data,d.data=a,null!=this.swapped&&this.swapped(b.data,d.data),d.next=f,null!=f&&(f.parent=
d),d.prev=b.prev,null!=b.prev&&(b.prev.parent=d),b.prev=d;null!=d&&(d.parent=b);b=c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,g,h,i,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,g=a.prev,h=a.next,i=b.next):(d=b,e=a,g=b.prev,h=a.prev,i=a.next)):(d=c,g=c.prev,a==b.prev?(e=a,f=b,h=a.prev,i=a.next,k=b.next):(e=b,f=a,h=b.prev,i=a.prev,
k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=a);d.prev=g;null!=g&&(g.parent=d);d.next=h;null!=h&&(h.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=i;null!=i&&(i.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},insert:function(a){var b;null==lg.zpp_pool?b=new lg:(b=lg.zpp_pool,lg.zpp_pool=
b.next,b.next=null);b.data=a;if(null==this.parent)this.parent=b;else for(a=this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:lg};var Qp,fq=0;i.Math=Math;String.prototype.__class__=i.String=String;String.__name__=["String"];i.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=i.Date=
Date;Date.__name__=["Date"];var ph=i.Int={__name__:["Int"]},gq=i.Dynamic={__name__:["Dynamic"]},W=i.Float=Number;W.__name__=["Float"];var eg=i.Bool=Boolean;eg.__ename__=["Bool"];var Wp=i.Class={__name__:["Class"]},Xp={},K={},Bn=Op.ArrayBuffer||Yg;null==Bn.prototype.slice&&(Bn.prototype.slice=Yg.sliceImpl);var kp=Op.Uint8Array||fi._new;oh.eventUpdate=yd._new();S.Element=0;S.PCData=1;S.CData=2;S.Comment=3;S.DocType=4;S.ProcessingInstruction=5;S.Document=6;zi.GlobalPrizes=[{id:0,image:"collections/stickers/sticker_anchovy_flick_0",
price:[150],name:"shop.sticker_anchovy_flick_0"},{id:1,image:"collections/stickers/sticker_basketball_0",price:[150],name:"shop.sticker_basketball_0"},{id:2,image:"collections/stickers/sticker_dangerlaser_0",price:[150],name:"shop.sticker_dangerlaser_0"},{id:3,image:"collections/stickers/sticker_general_0",price:[150],name:"shop.sticker_general_0"},{id:4,image:"collections/stickers/sticker_pack_maze_0",price:[200],name:"shop.sticker_pack_maze_0"},{id:5,image:"collections/stickers/sticker_rock_em_0",
price:[200],name:"shop.sticker_rock_em_0"},{id:6,image:"collections/stickers/sticker_skate_lane_0",price:[200],name:"shop.sticker_skate_lane_0"},{id:7,image:"collections/stickers/sticker_skeeball_0",price:[200],name:"shop.sticker_skeeball_0"},{id:8,image:"collections/stickers/sticker_slime_explode_0",price:[250],name:"shop.sticker_slime_explode_0"},{id:9,image:"collections/stickers/sticker_whack_a_mole_0",price:[250],name:"shop.sticker_whack_a_mole_0"},{id:10,image:"collections/stickers/sticker_anchovy_flick_1",
price:[250],name:"shop.sticker_anchovy_flick_1"},{id:11,image:"collections/stickers/sticker_basketball_1",price:[250],name:"shop.sticker_basketball_1"},{id:12,image:"collections/stickers/sticker_dangerlaser_1",price:[300],name:"shop.sticker_dangerlaser_1"},{id:13,image:"collections/stickers/sticker_general_1",price:[300],name:"shop.sticker_general_1"},{id:14,image:"collections/stickers/sticker_pack_maze_1",price:[300],name:"shop.sticker_pack_maze_1"},{id:15,image:"collections/stickers/sticker_rock_em_1",
price:[150,300],name:"shop.sticker_rock_em_1"},{id:16,image:"collections/stickers/sticker_skate_lane_1",price:[150,350],name:"shop.sticker_skate_lane_1"},{id:17,image:"collections/stickers/sticker_skeeball_1",price:[150,400],name:"shop.sticker_skeeball_1"},{id:18,image:"collections/stickers/sticker_slime_explode_1",price:[150,450],name:"shop.sticker_slime_explode_1"},{id:19,image:"collections/stickers/sticker_whack_a_mole_1",price:[150,500],name:"shop.sticker_whack_a_mole_1"},{id:20,image:"collections/stickers/sticker_anchovy_flick_2",
price:[250,550],name:"shop.sticker_anchovy_flick_2"},{id:21,image:"collections/stickers/sticker_basketball_2",price:[250,600],name:"shop.sticker_basketball_2"},{id:22,image:"collections/stickers/sticker_dangerlaser_2",price:[250,650],name:"shop.sticker_dangerlaser_2"},{id:23,image:"collections/stickers/sticker_general_2",price:[250,700],name:"shop.sticker_general_2"},{id:24,image:"collections/stickers/sticker_pack_maze_2",price:[150,200,300],name:"shop.sticker_pack_maze_2"},{id:25,image:"collections/stickers/sticker_rock_em_2",
price:[150,200,350],name:"shop.sticker_rock_em_2"},{id:26,image:"collections/stickers/sticker_skate_lane_2",price:[150,200,400],name:"shop.sticker_skate_lane_2"},{id:27,image:"collections/stickers/sticker_skeeball_2",price:[250,350,400],name:"shop.sticker_skeeball_2"},{id:28,image:"collections/stickers/sticker_slime_explode_2",price:[250,350,600],name:"shop.sticker_slime_explode_2"},{id:29,image:"collections/stickers/sticker_whack_a_mole_2",price:[250,350,800],name:"shop.sticker_whack_a_mole_2"},
{id:30,image:"collections/stickers/hoof_machine/sticker_hoof_machine_0",price:[0],name:"shop.sticker_hoof_machine_0"},{id:31,image:"collections/stickers/hoof_machine/sticker_hoof_machine_1",price:[0],name:"shop.sticker_hoof_machine_1"},{id:32,image:"collections/stickers/hoof_machine/sticker_hoof_machine_2",price:[0],name:"shop.sticker_hoof_machine_2"},{id:33,image:"collections/stickers/hoof_machine/sticker_hoof_machine_3",price:[0],name:"shop.sticker_hoof_machine_3"},{id:34,image:"collections/stickers/hoof_machine/sticker_hoof_machine_4",
price:[0],name:"shop.sticker_hoof_machine_4"},{id:35,image:"collections/stickers/hoof_machine/sticker_hoof_machine_5",price:[0],name:"shop.sticker_hoof_machine_5"},{id:36,image:"collections/stickers/hoof_machine/sticker_hoof_machine_6",price:[0],name:"shop.sticker_hoof_machine_6"},{id:37,image:"collections/stickers/hoof_machine/sticker_hoof_machine_7",price:[0],name:"shop.sticker_hoof_machine_7"},{id:38,image:"collections/stickers/hoof_machine/sticker_hoof_machine_8",price:[0],name:"shop.sticker_hoof_machine_8"},
{id:39,image:"collections/stickers/hoof_machine/sticker_hoof_machine_9",price:[0],name:"shop.sticker_hoof_machine_9"},{id:40,image:"collections/stickers/hoof_machine/sticker_hoof_machine_10",price:[0],name:"shop.sticker_hoof_machine_10"},{id:41,image:"collections/stickers/hoof_machine/sticker_hoof_machine_11",price:[0],name:"shop.sticker_hoof_machine_11"},{id:42,image:"collections/stickers/hoof_machine/sticker_hoof_machine_12",price:[0],name:"shop.sticker_hoof_machine_12"},{id:43,image:"collections/stickers/hoof_machine/sticker_hoof_machine_13",
price:[0],name:"shop.sticker_hoof_machine_13"},{id:44,image:"collections/stickers/hoof_machine/sticker_hoof_machine_14",price:[0],name:"shop.sticker_hoof_machine_14"},{id:45,image:"collections/stickers/hoof_machine/sticker_hoof_machine_15",price:[0],name:"shop.sticker_hoof_machine_15"},{id:46,image:"collections/stickers/hoof_machine/sticker_hoof_machine_16",price:[0],name:"shop.sticker_hoof_machine_16"}];fb.STAGE_WIDTH=960;fb.STAGE_CENTER_X=480;P.flow=yd._new();P.resizeCanvas=yd._new();P.updateDisplay=
yd._new();P.pause=yd._new();P.initialLoadComplete=ke._new();P.worldGenerationComplete=ke._new();P.refreshPrizeKiosk=ke._new();P.purchaseKioskPrize=yd._new();P.lightPowerTapped=ap._new();P.playerAttack=yd._new();P.enemyAttack=yd._new();P.knockout=ke._new();P.burgerCollide=yd._new();P.pacmanPowerup=ke._new();P.basketballCollide=yd._new();P.slimeBlast=ke._new();P.slimeBlastReset=ke._new();P.updateZSort=ke._new();P.pieSplat=yd._new();P.releaseCrane=ke._new();P.skeeballScore=ke._new();P.skeeballHole=Yi._new();
P.slimeBlastPump=ke._new();P.slimeBasketballDump=ke._new();di.instance=new di;Ye.DISPATCHING_SENTINEL=new aj(null,null);ma.root=new Wk;ma.uncaughtError=new hc;ma.hidden=new Cg(!1);ma.volume=new $f(1);ma._platform=di.instance;ma._calledInit=!1;$k.logger=new cn(ma._platform.createLogHandler("flambe"));xe.__meta__={obj:{assets:[{minigame_rockem_audio:[{bytes:42037,md5:"002e7a57cda0e036a5652bd87d327f50",name:"karate_ko.mp3"},{bytes:57148,md5:"2c671c3c4c64360069e0f379d759df70",name:"karate_ko.ogg"},{bytes:34480,
md5:"f1ada8c6fc870135840417dece294833",name:"metal_metal_hit_04.mp3"},{bytes:32177,md5:"ef384d4a72532b8ea4367d4ebe6a33a6",name:"metal_metal_hit_04.ogg"},{bytes:84635,md5:"11d39dc52ac339a0257f13689aad1be1",name:"metal_metal_hit_06.mp3"},{bytes:66941,md5:"6a4b2923c4b348104c00b622dda6a9b6",name:"metal_metal_hit_06.ogg"},{bytes:63737,md5:"1e03ee27c5ac5ec88c90f2ea63a9fd34",name:"metal_metal_hit_07.mp3"},{bytes:57707,md5:"2757753016cdaaec7df5e82379a33e2f",name:"metal_metal_hit_07.ogg"},{bytes:6264,md5:"fbbda5c0dd698b0bb30c16561cbdb041",
name:"sb_karate_chop.mp3"},{bytes:10133,md5:"6e697f3ec39654cc3d07ae652bb18cd9",name:"sb_karate_chop.ogg"},{bytes:8352,md5:"72ed9802733d42d7729232f9b31201f9",name:"sb_karate_chop_02.mp3"},{bytes:11326,md5:"559ee20fa8e39fe5b29743fef17414d3",name:"sb_karate_chop_02.ogg"},{bytes:6264,md5:"daa59f0a52fd8aef991f2bde92813922",name:"sb_karate_chop_03.mp3"},{bytes:9365,md5:"5af914c208a4a254a8401a3e05f25cb2",name:"sb_karate_chop_03.ogg"},{bytes:42037,md5:"002e7a57cda0e036a5652bd87d327f50",name:"sb_karate_ko.mp3"},
{bytes:57148,md5:"5b47273111fafedd750c828214c9dbcd",name:"sb_karate_ko.ogg"},{bytes:39705,md5:"be01839ca88d1759e7c09d8a14600147",name:"sb_super.mp3"},{bytes:41433,md5:"c96483d12a4c419732a641426f9828c6",name:"sb_super.ogg"}],fonts_en_simple:[{bytes:12175,md5:"b55aa508eef4b5cd60f9a672f42185ea",name:"nick-arcade_font_basic_en.fnt"},{bytes:156760,md5:"a11b6dacb92e1e018635ea2dd68c2c94",name:"nick-arcade_font_basic_en.png"}],minigame_danger_lasers_audio:[{bytes:7036,md5:"a891070cf0ae80a42e0153ce7ac77f85",
name:"danger_laser_blue_button_blip.mp3"},{bytes:14059,md5:"075191a1fb147cfe060a96d3922737f1",name:"danger_laser_blue_button_blip.ogg"},{bytes:46175,md5:"8aebd450e31b8427889b144925e37c38",name:"danger_laser_red_button_shock.mp3"},{bytes:76160,md5:"f61b5c9090da39abe2a8a47bdececaaf",name:"danger_laser_red_button_shock.ogg"},{bytes:15269,md5:"dc77c0c7ca3e087a4876f663f31df6c9",name:"danger_laser_white_button_wave.mp3"},{bytes:25177,md5:"666ad855e73abd7be487e20443f4de9b",name:"danger_laser_white_button_wave.ogg"},
{bytes:6957,md5:"98c14a895911650b8d8d23b48587f472",name:"danger_laser_yellow_button_blip.mp3"},{bytes:13806,md5:"3a0edf6ee514258d7362450b8f7a9f50",name:"danger_laser_yellow_button_blip.ogg"}],minigame_danger_lasers:[{bytes:1784,md5:"724880d3c64c9cba12ff80afa165da8b",name:"minigame_danger_lasers_0.atlas"},{bytes:230698,md5:"989e2b88ebcff807b8e83f9530f4cf95",name:"minigame_danger_lasers_0.png"},{bytes:1284,md5:"7ab2dcb2ce196060c34d3d5c18e3c36d",name:"minigame_danger_lasers_1.atlas"},{bytes:36261,md5:"d54afd6f1441f4b60c58040a0233c71f",
name:"minigame_danger_lasers_1.png"},{bytes:428,md5:"0fa98ab6cdd395159142977c78f876c1",name:"spine/arcade_danger_lasers_effect_awol.atlas"},{bytes:10057,md5:"9eaf5f0fe60e6425f312a02764435117",name:"spine/arcade_danger_lasers_effect_awol.json"},{bytes:22660,md5:"3fbe0942ab4efd05d7d997a6c6549b2d",name:"spine/arcade_danger_lasers_effect_awol.png"},{bytes:432,md5:"5c3487026551c8d720ec560c0c28ad6c",name:"spine/arcade_danger_lasers_effect_brainstorm.atlas"},{bytes:5206,md5:"7c94dfed6dbc19cfa17eda774bc6ddb4",
name:"spine/arcade_danger_lasers_effect_brainstorm.json"},{bytes:19691,md5:"41bd9b64c972029ca679854daabf9b45",name:"spine/arcade_danger_lasers_effect_brainstorm.png"},{bytes:324,md5:"f989b32fa126bc12d8dcfa396137ee5e",name:"spine/arcade_danger_lasers_effect_hit.atlas"},{bytes:2394,md5:"38941a0cde9e2bb8774a97c6687b6477",name:"spine/arcade_danger_lasers_effect_hit.json"},{bytes:13449,md5:"95e4a2d327410b91c3535a4961eaa801",name:"spine/arcade_danger_lasers_effect_hit.png"},{bytes:225,md5:"19c16f3d9fd852df250891047be23abd",
name:"spine/arcade_danger_lasers_effect_shoutout.atlas"},{bytes:4987,md5:"67898ca75c9fec4785399a04112a6303",name:"spine/arcade_danger_lasers_effect_shoutout.json"},{bytes:13229,md5:"5d083d995ce4aa1a859ca9526e842742",name:"spine/arcade_danger_lasers_effect_shoutout.png"},{bytes:834,md5:"f66beecbdab9ff3590c074985eaa2c12",name:"spine/arcade_danger_lasers_effect_volt.atlas"},{bytes:8590,md5:"52f92bc72155bac5ab8e416dfd9b59bf",name:"spine/arcade_danger_lasers_effect_volt.json"},{bytes:106775,md5:"61db56857a4ca61832f8f0e5fcfc2f94",
name:"spine/arcade_danger_lasers_effect_volt.png"},{bytes:2204,md5:"df2f80211c78cad03f8a860210649b67",name:"spine/arcade_danger_lasers_electric_tubes.atlas"},{bytes:7591,md5:"9fc83a27b42603ba20dba46c19e90b59",name:"spine/arcade_danger_lasers_electric_tubes.json"},{bytes:71516,md5:"36129b4b8b664609b425bc67466c5cf8",name:"spine/arcade_danger_lasers_electric_tubes.png"},{bytes:313,md5:"c1cd063f2cff30cb616acc3e8b4cb935",name:"spine/butt_word.atlas"},{bytes:4063,md5:"d1189d0834f484db9ba261a2814ffeb9",
name:"spine/butt_word.json"},{bytes:23291,md5:"3229057f9349a5e3fe218a495315112a",name:"spine/butt_word.png"},{bytes:197,md5:"2873ac826f53d1f640be641c50ac0a40",name:"spine/goat.atlas"},{bytes:2305,md5:"09dcd704528ab4d0602e786c0ad89d87",name:"spine/goat.json"},{bytes:95335,md5:"7525c7971630043376d4e33eed5e2fec",name:"spine/goat.png"}],minigame_loud_laugh:[{bytes:2123,md5:"31d19b7c70fda8d7fc9e676bcad7e3c0",name:"minigame_loud_laugh_0.atlas"},{bytes:141533,md5:"fde8aabe7b7e491680c99509f4d11ce9",name:"minigame_loud_laugh_0.png"},
{bytes:1222,md5:"59567dd857d00d221ddccb72702de18d",name:"minigame_loud_laugh_1.atlas"},{bytes:123873,md5:"4a451b94f95a9f23038f410ed623c1ee",name:"minigame_loud_laugh_1.png"},{bytes:311,md5:"d262cf79a81d9d59eb8e65f6e7cb6546",name:"minigame_loud_laugh_2.atlas"},{bytes:22914,md5:"f6b583294b699278d93fb55cc083441c",name:"minigame_loud_laugh_2.png"},{bytes:1268,md5:"c9968935a50750752278689517d01f77",name:"spine/arcade_loudhouse_character_boards_bottom.atlas"},{bytes:6273,md5:"b9fd515ef07bfb3ea08066254954ed3c",
name:"spine/arcade_loudhouse_character_boards_bottom.json"},{bytes:117710,md5:"827093f72967c38a3c2eea10c3d84398",name:"spine/arcade_loudhouse_character_boards_bottom.png"},{bytes:3490,md5:"3a9560be93df87353aebd1da867a8c2d",name:"spine/arcade_loudhouse_character_boards_top.atlas"},{bytes:20313,md5:"b7933255b25bc1f47cff253805fb288a",name:"spine/arcade_loudhouse_character_boards_top.json"},{bytes:185361,md5:"73b081dbc737a909a1135e386db168d1",name:"spine/arcade_loudhouse_character_boards_top.png"},{bytes:3098,
md5:"b97a96359a94d416efa66e88a0daf9f2",name:"spine/arcade_loudhouse_luan.atlas"},{bytes:43861,md5:"5d6bdb49fd7830ca8edbe80cfb6009d5",name:"spine/arcade_loudhouse_luan.json"},{bytes:51903,md5:"9a2913c362d40921eed360e11c1ab354",name:"spine/arcade_loudhouse_luan.png"},{bytes:19157,md5:"b212641d08f56ef70a03854785635fbd",name:"spine/nick_arcade_loudhouse_laugh_pie_splat.atlas"},{bytes:69214,md5:"49a15d1c1b3f592e7a52d95f21416d01",name:"spine/nick_arcade_loudhouse_laugh_pie_splat.json"},{bytes:122815,md5:"a30070b11ae445aab3fa840d0dd446a9",
name:"spine/nick_arcade_loudhouse_laugh_pie_splat.png"}],minigame_hoof_machine_audio:[{bytes:4858,md5:"8b4cf6e1c598e920232f957b5c7e0f30",name:"claw_machine_clamp_down.mp3"},{bytes:11176,md5:"ec649c3f8561fe3f2d68df4bc131db81",name:"claw_machine_clamp_down.ogg"},{bytes:14534,md5:"8e88c69ea5cbc462b4e978d96c965706",name:"claw_machine_whirring_loop.mp3"},{bytes:23425,md5:"98b1bfc9b5f4f1ffa63c290ec0095fd8",name:"claw_machine_whirring_loop.ogg"}],preload:[{bytes:2260228,md5:"ecbac52599d56146fb29b1157d18e3a7",
name:"nick_arcade_ambience.mp3"},{bytes:3514744,md5:"2eb4c0e26014614e04f5a29bf3873832",name:"nick_arcade_ambience.ogg"},{bytes:1152,md5:"f239a5139753ee1ce5194719b896a347",name:"preload_0.atlas"},{bytes:51862,md5:"0af54c54098dc3f16e56982a7b2af431",name:"preload_0.png"}],minigame_skeeball:[{bytes:1686,md5:"d3f93b2c8b18128a12257e1179e19694",name:"minigame_skeeball_0.atlas"},{bytes:160787,md5:"364cd6914b00b6c4880b0cec7de685fd",name:"minigame_skeeball_0.png"},{bytes:320,md5:"129379d898e7983c94337587fab19d39",
name:"minigame_skeeball_1.atlas"},{bytes:21756,md5:"d75879c1af9832bb79b21beaaaca5175",name:"minigame_skeeball_1.png"},{bytes:2198,md5:"5afcb7c1d4d4810f56321962f9892523",name:"spine/arcade_skeeball_ball_blue.atlas"},{bytes:13766,md5:"558c79f0d29a55f7fa1ea88cf32065e0",name:"spine/arcade_skeeball_ball_blue.json"},{bytes:11104,md5:"52a18a9aabb04e8c0475a9fbf1b89f2d",name:"spine/arcade_skeeball_ball_blue.png"},{bytes:2181,md5:"0ef766eb44236f05c3cc9ede52b0330a",name:"spine/arcade_skeeball_ball_red.atlas"},
{bytes:9055,md5:"10033f2dfa974352369d1e304237cc95",name:"spine/arcade_skeeball_ball_red.json"},{bytes:11629,md5:"a650ca8d6e10c5a51e6de5dc2a06f2fd",name:"spine/arcade_skeeball_ball_red.png"},{bytes:1307,md5:"9afd1eabcdfae46db31acbe3d264d1aa",name:"spine/arcade_skeeball_ball_slime.atlas"},{bytes:12644,md5:"349d7291ff220d0a64e01fe187313618",name:"spine/arcade_skeeball_ball_slime.json"},{bytes:41928,md5:"5be78f2778c32b33f691a7e5c8468c2f",name:"spine/arcade_skeeball_ball_slime.png"},{bytes:608,md5:"d47ef04aa09fe8170026ed521585361e",
name:"spine/arcade_skeeball_target_hole.atlas"},{bytes:6459,md5:"890bcb6e64928e868834bccd3a4ceae3",name:"spine/arcade_skeeball_target_hole.json"},{bytes:6594,md5:"7539314dd3c5faf6bc83a47a1417b784",name:"spine/arcade_skeeball_target_hole.png"},{bytes:405,md5:"9068e1124f0f45e6b3d0ec8e520ba2d4",name:"spine/gumball_tube.atlas"},{bytes:13191,md5:"42f382d0e5246ca4b71bd90eec1a97a9",name:"spine/gumball_tube.json"},{bytes:17231,md5:"ce25c2958e54e862094be22c441151f8",name:"spine/gumball_tube.png"},{bytes:1107,
md5:"5e4d63758a2893a5baeeb2224797cff4",name:"spine/lane_board.atlas"},{bytes:11280,md5:"ae1b2d57694683d34df6f6108e0b4816",name:"spine/lane_board.json"},{bytes:116174,md5:"151b287544cb9d847234fb9725ac9bfa",name:"spine/lane_board.png"},{bytes:412,md5:"280f29085009b9b1f166d10d6e5624c9",name:"spine/target_board.atlas"},{bytes:10671,md5:"b78380bfae8a9b315d59caee59dead67",name:"spine/target_board.json"},{bytes:28844,md5:"2ad102369ab0ea4b5a52f95a6f9feb60",name:"spine/target_board.png"}],minigame_slime_blast:[{bytes:38168,
md5:"d74f8facdd5b27df96efe9683795ec42",name:"cab_bottom_2.png"},{bytes:100719,md5:"0b95a16f35bb7f7e988aea3eb5f5ee14",name:"cab_right.png"},{bytes:1448,md5:"74c85084a82894cc8fd715bac4376f5c",name:"minigame_slime_blast_0.atlas"},{bytes:133054,md5:"ce10faa34e71dff0e01336ba9a01fd90",name:"minigame_slime_blast_0.png"},{bytes:1104,md5:"bb96d558a620a2cc3256d41016e7669b",name:"minigame_slime_blast_1.atlas"},{bytes:198103,md5:"f7c4e7c28671f80851ba97a5dd61d6b3",name:"minigame_slime_blast_1.png"},{bytes:551,
md5:"51ebad4700deb78347dcd8d7ecc0c9a7",name:"minigame_slime_blast_2.atlas"},{bytes:81619,md5:"420a98a6ffec941e918c1e6065195ef8",name:"minigame_slime_blast_2.png"},{bytes:439,md5:"832702cc6b3b56debcf0b94e40de1c6a",name:"minigame_slime_blast_3.atlas"},{bytes:84889,md5:"f99be8767f1118d3a0d483c788f3e32e",name:"minigame_slime_blast_3.png"},{bytes:315,md5:"f8f245090840712f3199fe8aa8e0abec",name:"minigame_slime_blast_4.atlas"},{bytes:82429,md5:"06c83133ae1b7a69ce2d609921e74933",name:"minigame_slime_blast_4.png"},
{bytes:2889,md5:"83624b98fec94bcefb6ad2d5af135605",name:"spine/nick_slime_cannon.atlas"},{bytes:257934,md5:"4ce665e0ef86d7febb382694c5a12b63",name:"spine/nick_slime_cannon.json"},{bytes:75201,md5:"55754201420573c0b42e921b61952573",name:"spine/nick_slime_cannon.png"},{bytes:300,md5:"e6324cfe7af27e40f67860bfe0760461",name:"spine/slime_track_1.atlas"},{bytes:3281,md5:"9aac8bd3eba6257b5f62f145562fb140",name:"spine/slime_track_1.json"},{bytes:82205,md5:"af399fc2731dbcb689bf46de36ddac14",name:"spine/slime_track_1.png"},
{bytes:298,md5:"74558c9fe48c303bae5688d1f3eb29d2",name:"spine/slime_track_2.atlas"},{bytes:3483,md5:"0c24d60bcefd64f083d4235f95529d3a",name:"spine/slime_track_2.json"},{bytes:98136,md5:"92d7a3c2fe9773a466110da47a4555d0",name:"spine/slime_track_2.png"},{bytes:297,md5:"b1fdf374c11333585679012cbb3a5fe0",name:"spine/slime_track_3.atlas"},{bytes:3198,md5:"0fe793ae0e105a8ed84a20fd56ea016a",name:"spine/slime_track_3.json"},{bytes:58046,md5:"4f030fd87ce9038e688bc0dd285d4cfa",name:"spine/slime_track_3.png"},
{bytes:74450,md5:"989361da1f3f6653253cb20a54fae0df",name:"tracks_1.png"}],initial_audio_required:[{bytes:4519,md5:"f54931fc25693de0de191b0c31a86b82",name:"arcade_burger_drop.mp3"},{bytes:10768,md5:"4d3ef168ef2b26981890afd6aae04d63",name:"arcade_burger_drop.ogg"},{bytes:28624,md5:"160ac0109e930ec73dfab9cc9b9bc2fd",name:"arcade_claim_prize.mp3"},{bytes:47465,md5:"f61ed8daed1fc242c62176997c3b8398",name:"arcade_claim_prize.ogg"},{bytes:17951,md5:"988969a5d7851ab9d666a900b438f623",name:"arcade_interactive_anchovy_garbage.mp3"},
{bytes:35387,md5:"2bd8aaa3a28ff48852aa3f3e9e74e860",name:"arcade_interactive_anchovy_garbage.ogg"},{bytes:24005,md5:"a8e8793a3a0cedda144f22847540858f",name:"arcade_interactive_anchovy_garbage_toss.mp3"},{bytes:46617,md5:"cd3c9c54dffd624ba25b673aec8e9d9d",name:"arcade_interactive_anchovy_garbage_toss.ogg"},{bytes:36309,md5:"18e277994709b3681557f43d78c0754b",name:"arcade_interactive_balloon_deflate.mp3"},{bytes:106245,md5:"fab03b641ef84b581a9169c8004be05e",name:"arcade_interactive_balloon_deflate.ogg"},
{bytes:13904,md5:"3e65d1a7fc25f30699b7e3db1e44dc91",name:"arcade_interactive_burger_alarm.mp3"},{bytes:28580,md5:"af4b5b3109ecfcbd4ad0dbec15e72716",name:"arcade_interactive_burger_alarm.ogg"},{bytes:28140,md5:"d0b9e6888024d532895cbf685b3e7230",name:"arcade_interactive_chicken.mp3"},{bytes:46835,md5:"c9b0fd4594594da5da32b9ed4a4b98cf",name:"arcade_interactive_chicken.ogg"},{bytes:17026,md5:"76b4443a1cd9d1be67c2242b54542798",name:"arcade_interactive_chicken_alt.mp3"},{bytes:27988,md5:"799d2b54c9f33650259cc1783f1ad963",
name:"arcade_interactive_chicken_alt.ogg"},{bytes:9707,md5:"e2b2fd32563bc3733e943bac8e49dc7b",name:"arcade_interactive_door_close.mp3"},{bytes:19002,md5:"32aa4c4d6720442de7ad785e9b377482",name:"arcade_interactive_door_close.ogg"},{bytes:6601,md5:"7751a7df5dc950d96585e64c4ec11d6d",name:"arcade_interactive_door_open.mp3"},{bytes:13662,md5:"5f1aab1a9cd0c39c65cab17747edd3ff",name:"arcade_interactive_door_open.ogg"},{bytes:38880,md5:"7fde91c2bb168e2287e3325ae0fb447c",name:"arcade_interactive_fountain.mp3"},
{bytes:210722,md5:"36241a81e1aa758fbfeb9ad038ef5d2f",name:"arcade_interactive_fountain.ogg"},{bytes:4623,md5:"2288f0f9e091ba1f8cafa132fddec931",name:"arcade_interactive_light_switch.mp3"},{bytes:12342,md5:"ef41cbb01720746c1a917201cd596df8",name:"arcade_interactive_light_switch.ogg"},{bytes:58018,md5:"f77989d5368d0426041cb0f4fc7f67b7",name:"arcade_interactive_rocker_launch.mp3"},{bytes:112031,md5:"8a6656b40e235bfb6878c82b774b324b",name:"arcade_interactive_rocker_launch.ogg"},{bytes:37693,md5:"2e842079df96beeeb0e1ae0f894f78a6",
name:"arcade_interactive_slushie_machine.mp3"},{bytes:70376,md5:"ef5ad79e50c48392342d9ce7f7dd6f7e",name:"arcade_interactive_slushie_machine.ogg"},{bytes:11378,md5:"69eb418028f005e870c84f98f27575f1",name:"arcade_interactive_tentacle.mp3"},{bytes:33123,md5:"251c78ebb0b2dc3212e4ba9a033dc0d3",name:"arcade_interactive_tentacle.ogg"},{bytes:61057,md5:"8e470aaa5339f4eeeddd70a217ace4b7",name:"arcade_interactive_ticket_dispenser.mp3"},{bytes:104002,md5:"351b12655dcf2aeee0e152a2e6caea41",name:"arcade_interactive_ticket_dispenser.ogg"},
{bytes:99209,md5:"cb425dcff2e73f76a1e580f61ea66d20",name:"arcade_interactive_toliet.mp3"},{bytes:165088,md5:"d519fd37f8bef71c197c435b87108577",name:"arcade_interactive_toliet.ogg"},{bytes:13311,md5:"a33d8b1f73ed74d97ef3b774801fcdc1",name:"arcade_interactive_tongue_chest.mp3"},{bytes:35714,md5:"fabc50a7216981de74597a69c49cd43f",name:"arcade_interactive_tongue_chest.ogg"},{bytes:4178,md5:"d96e3823b480cce614078423aece3ac4",name:"btn_default.mp3"},{bytes:6171,md5:"ea1442bff0f8930a6fa99dd68f3edf51",name:"btn_default.ogg"},
{bytes:8358,md5:"3948d2f5e280b4066c1db366a82e3363",name:"customer_bite.mp3"},{bytes:12872,md5:"58c096ade0473f853c5c432545c9d298",name:"customer_bite.ogg"},{bytes:32391,md5:"d852e54fff8c98bb2e1c85b8262c13c0",name:"elec_buttonclick.mp3"},{bytes:28913,md5:"bbb6f4df185395b859c9e6569791aa61",name:"elec_buttonclick.ogg"},{bytes:8358,md5:"3948d2f5e280b4066c1db366a82e3363",name:"krabby_customer_bite.mp3"},{bytes:12872,md5:"b14555bfefe7d67e81e84a7aaa2cd115",name:"krabby_customer_bite.ogg"},{bytes:815814,md5:"1dd97bc747e726205030f14565c7ca10",
name:"nick_arcade_track_2.mp3"},{bytes:1437575,md5:"c3ab85626f4295afbb6e7ae3cc26ec05",name:"nick_arcade_track_2.ogg"},{bytes:984100,md5:"ed1c306a4f622df5c0d6a4bdfd0c494d",name:"nick_arcade_track_3.mp3"},{bytes:1789094,md5:"4d67e33c4b64c42d111b3f5524bb9609",name:"nick_arcade_track_3.ogg"}],minigame_hoof_machine:[{bytes:86050,md5:"5c68c71672649438a2bb4da04ed85a41",name:"corn_light_glow.png"},{bytes:117583,md5:"3ff30f8db5618dd031ed01c8506fab86",name:"corn_light_stalks.png"},{bytes:31014,md5:"155270375c2170119f42bf47010ebe51",
name:"dropbox_glass_barrier.png"},{bytes:973,md5:"a50abe43f93402484f2f6bab48bc949d",name:"minigame_hoof_machine_0.atlas"},{bytes:137255,md5:"d0d0c4d75bfacb814bac40d47a1563b2",name:"minigame_hoof_machine_0.png"},{bytes:1100,md5:"8c71784be63d256d9256067165d28a95",name:"minigame_hoof_machine_1.atlas"},{bytes:132487,md5:"093c56fe1bf0786e747b8711c3455212",name:"minigame_hoof_machine_1.png"},{bytes:214,md5:"28d77564836b19308a0ebba62e933fcf",name:"minigame_hoof_machine_2.atlas"},{bytes:68827,md5:"f79b5054e8412dcfcb2a518936683b20",
name:"minigame_hoof_machine_2.png"},{bytes:318,md5:"0ceda0c5ccd6dfafcc187a665b78aa6b",name:"spine/arrow_arm.atlas"},{bytes:2075,md5:"b21595dd68146b06f5ae21dcd0ff762b",name:"spine/arrow_arm.json"},{bytes:11308,md5:"0f22f33c79b986f57f84d46cff6463d6",name:"spine/arrow_arm.png"},{bytes:834,md5:"d5244e72580aa5294a9edced8b1498a0",name:"spine/chicken_prop_anim_1.atlas"},{bytes:22442,md5:"e307b1b09ad513bdef81fc50259ccafd",name:"spine/chicken_prop_anim_1.json"},{bytes:69722,md5:"ada06412487926f545a6f583ba95ac14",
name:"spine/chicken_prop_anim_1.png"},{bytes:525,md5:"7ca838aa1db9e7418c284f97e796130f",name:"spine/drop_box.atlas"},{bytes:4094,md5:"63a25a3dc25b738e3a8d42490fdd94ab",name:"spine/drop_box.json"},{bytes:35491,md5:"fed059843aa0b4efcb0ad90f3a6c5c6f",name:"spine/drop_box.png"},{bytes:433,md5:"52eacac206320ec687deb5e6bf2c6a71",name:"spine/frame_overlay_corn_lights.atlas"},{bytes:16183,md5:"f1802914e26717705b775d6c94f753cd",name:"spine/frame_overlay_corn_lights.json"},{bytes:123791,md5:"ec4d2323a7260706d5d78007dcaaa7d5",
name:"spine/frame_overlay_corn_lights.png"}],minigame_skate:[{bytes:2278,md5:"d31cbc01bf59d09e0d0d7303d629fce7",name:"minigame_skate_0.atlas"},{bytes:564493,md5:"a359283f43d0404b21ed5fb08055b5c5",name:"minigame_skate_0.png"},{bytes:769,md5:"eed5ec5ac918655694f84e1692dde0d5",name:"minigame_skate_1.atlas"},{bytes:343855,md5:"33fc073ff11ab91cac647e63790a493d",name:"minigame_skate_1.png"},{bytes:508,md5:"0cdd6163928e78605006c87316df2c09",name:"spine/arcade_skate_coin.atlas"},{bytes:4966,md5:"4a08719a700878458df8df7a5c82465b",
name:"spine/arcade_skate_coin.json"},{bytes:6279,md5:"4e1b3e38b88124210e868e2f36134a46",name:"spine/arcade_skate_coin.png"},{bytes:401,md5:"02f70e26d545450f258248acc18e468f",name:"spine/arcade_skate_magnet.atlas"},{bytes:11884,md5:"637cdb0971e87a591deb199327f44fe3",name:"spine/arcade_skate_magnet.json"},{bytes:8077,md5:"ee954bf5f75ddc125695d0ab3b963b1c",name:"spine/arcade_skate_magnet.png"},{bytes:1940,md5:"f2cb4bbf7aa0fa2bfa83353035c4da89",name:"spine/arcade_skate_player.atlas"},{bytes:77901,md5:"f63f1b63a47199e4395246b71b65ebe7",
name:"spine/arcade_skate_player.json"},{bytes:19335,md5:"d60c74a831328d0ccc1ca2fddd643756",name:"spine/arcade_skate_player.png"},{bytes:1069,md5:"459acaff8639ee45ec43aee116488d93",name:"spine/sid_char_anim_1.atlas"},{bytes:13163,md5:"323a87f7111155bdc88d3e3e56a41118",name:"spine/sid_char_anim_1.json"},{bytes:34793,md5:"6e590cd3bc81f2d1da3dd6ce48d38113",name:"spine/sid_char_anim_1.png"}],gameplay_audio_required:[{bytes:4640,md5:"99c68e0b2363a6be7c258c3e1d0f6ccd",name:"arcade_minigame_damage.mp3"},
{bytes:10067,md5:"0778740b41a9b3648019ac986243d5a9",name:"arcade_minigame_damage.ogg"},{bytes:4230,md5:"6874e0b5bb2ae7b6d814eb6afce78ea1",name:"arcade_minigame_damage_02.mp3"},{bytes:10804,md5:"f3d1874d2d574d30f532e0b4e68f7275",name:"arcade_minigame_damage_02.ogg"},{bytes:3966,md5:"4a21932dee19bf2dc989fb23a1e1d99d",name:"arcade_minigame_toss.mp3"},{bytes:9252,md5:"ce89213abf456de06b9eee3ddf26fcdd",name:"arcade_minigame_toss.ogg"},{bytes:5426,md5:"6159141d3407f22438c8d6488128ebc4",name:"arcade_minigame_toss_02.mp3"},
{bytes:11224,md5:"2f376c23468fb19977523d44eae25a5b",name:"arcade_minigame_toss_02.ogg"},{bytes:4800,md5:"165c161419749cb7e08577a9a3aeba36",name:"arcade_minigame_toss_03.mp3"},{bytes:9572,md5:"1eb72321a3148222bd9124e283cb2b4c",name:"arcade_minigame_toss_03.ogg"},{bytes:5218,md5:"1ff8a56a8b34dd504ff7d3189389e986",name:"arcade_minigame_toss_04.mp3"},{bytes:10103,md5:"a9d592c67562d9a4e0b135868957e251",name:"arcade_minigame_toss_04.ogg"},{bytes:34480,md5:"b7ff258b35a7eca1a1f586e831de74d6",name:"blood_splat_03.mp3"},
{bytes:50892,md5:"593d9a96b504b829ee8d5230f7097668",name:"blood_splat_03.ogg"},{bytes:31346,md5:"8b60dedcbfc4e379e00af2aba51b200a",name:"blood_splat_04.mp3"},{bytes:49060,md5:"18abd064451bb4e723f1ca3ae71b329d",name:"blood_splat_04.ogg"},{bytes:41795,md5:"1de49f49f1b79f81409286e66ca9e4bc",name:"blood_splat_05.mp3"},{bytes:61870,md5:"e8682878e995a3e99834d013258027c7",name:"blood_splat_05.ogg"},{bytes:66872,md5:"7f48d019a8109d286aad1c75c01aa58b",name:"common_chime.mp3"},{bytes:62425,md5:"f798771b7ac7ea6c0a0783021b8742b7",
name:"common_chime.ogg"},{bytes:65612,md5:"5a75eeb392d933edfcd57611f4a41ab8",name:"end_screen_slime_meter.mp3"},{bytes:111796,md5:"4b4feedfa1cf92fdab85d84e6f2b03d4",name:"end_screen_slime_meter.ogg"},{bytes:3786,md5:"a3fd186d1357e354cfbaef45c0f4281e",name:"nick_arcade_general_pickup.mp3"},{bytes:8680,md5:"df79c18b15ff367f3708aca34f19992c",name:"nick_arcade_general_pickup.ogg"},{bytes:8119,md5:"331a7704901f908544e9857b6beb9bb6",name:"nick_arcade_general_pickup_alt.mp3"},{bytes:14454,md5:"1eb910fb9704615f4893b221a6446bf2",
name:"nick_arcade_general_pickup_alt.ogg"},{bytes:2114,md5:"869b633d9b59868e52a68153fe351d7b",name:"placeholder_silent.mp3"},{bytes:5514,md5:"497e87903c25c13a8bf7cbf9b0e7e61e",name:"placeholder_silent.ogg"},{bytes:65827,md5:"2a3ddc33e1a5afe5963ab33e2ec102ca",name:"positive.mp3"},{bytes:44957,md5:"65282736b933f22058c4a426f5beeabe",name:"positive.ogg"},{bytes:65827,md5:"62d5344e9f13fd93fa14a6278b1a43a8",name:"splat.mp3"},{bytes:54346,md5:"d5a3b2db9898597638435cb6714e4ec6",name:"splat.ogg"}],gameplay_universal:[{bytes:1095,
md5:"47b180e9604e3d285724e1b12b53276b",name:"end_game/endgame_bar_back.png"},{bytes:3463,md5:"901cd507a9ff25d562ecf3c5cbead60d",name:"end_game/endgame_fill_cap.png"},{bytes:6392,md5:"38593d715588404fa2e88f2fb4d91399",name:"end_game/endgame_fill_glow.png"},{bytes:55824,md5:"074d57175df9b42dd26d51dc80a99c54",name:"end_game/endgame_panel.png"},{bytes:152,md5:"f06a1ce6ae3cc74e1068e5cc996b957b",name:"end_game/load_fill.png"},{bytes:511,md5:"0b4d3864cdd40c10d6c0d15f022615b2",name:"end_game/ui_bar_edge_glow.atlas"},
{bytes:31377,md5:"16810a56ea487ac8f4e6e66e9c5a9aff",name:"end_game/ui_bar_edge_glow.json"},{bytes:8227,md5:"3d7e3aa73ffb5b0d7bc532af003e8afc",name:"end_game/ui_bar_edge_glow.png"},{bytes:877,md5:"c28559e1b0752e5e0a55105a59774602",name:"end_game/ui_prize_capsule.atlas"},{bytes:12630,md5:"5bb2c81c1030a449b81da69fecf42987",name:"end_game/ui_prize_capsule.json"},{bytes:72184,md5:"3c0a9ccb007ff5e9d348c791bf4320b5",name:"end_game/ui_prize_capsule.png"},{bytes:2651,md5:"bacabe4be66cc8c8b4e487125d9b4dab",
name:"gameplay_universal_0.atlas"},{bytes:90476,md5:"d7c2ce6a3b516fbfb4542f9a16156fb9",name:"gameplay_universal_0.png"},{bytes:4883,md5:"0613ad29b4b12f8ff5b182e98e0f3484",name:"gameplay_universal_1.atlas"},{bytes:89679,md5:"784f325fa853684df50343d8c74b216a",name:"gameplay_universal_1.png"}],initial_universal:[{bytes:707229,md5:"7fdf5b6b017ca618be634803304794a0",name:"arcade_gallery_bg.png"},{bytes:724852,md5:"16f58386af28d1c1e6fb6c570fead40a",name:"arcade_gallery_bg_tile_2.png"},{bytes:10926,md5:"c1d02e15754faa3dee15221d5159fad4",
name:"big_gulp_1.png"},{bytes:2340,md5:"dc1dd9a7623f68296d71da5f9c4b3b52",name:"initial_universal_0.atlas"},{bytes:203691,md5:"976f15f85292ea3fa3a076860fac4f58",name:"initial_universal_0.png"},{bytes:1762,md5:"2360caa1bb2f5cd4e0189ed6fd5105b1",name:"initial_universal_1.atlas"},{bytes:142179,md5:"4c23a2ae6327ecaf4201b491ba57a1e5",name:"initial_universal_1.png"},{bytes:2326,md5:"97cf64d379c4f10285cb7e046b8962d6",name:"initial_universal_2.atlas"},{bytes:189055,md5:"eeb8452758ddfe3a00e43eb3569eacf1",
name:"initial_universal_2.png"},{bytes:2418,md5:"71dcea47562ad9a8cab88bfbd086654f",name:"initial_universal_3.atlas"},{bytes:273859,md5:"f298a3c6b01f19368a3b6b9ff9a52926",name:"initial_universal_3.png"},{bytes:3086,md5:"a383b68afbe2c9a929087ce8907d60a3",name:"initial_universal_4.atlas"},{bytes:262422,md5:"89b9e3c756a9ad5b3b4621e4c3e4b0f4",name:"initial_universal_4.png"},{bytes:7041,md5:"cef011f42b25cc8151295e659dd481cd",name:"initial_universal_5.atlas"},{bytes:1229616,md5:"1369b45e3e6eb1ffe156e031fc33a181",
name:"initial_universal_5.png"},{bytes:3305,md5:"2b54f3b024f52181c3b86198e55ad73b",name:"initial_universal_6.atlas"},{bytes:75344,md5:"3ac9f1775de2bac0b171e7ea6d7034d4",name:"initial_universal_6.png"},{bytes:59642,md5:"c67bdb672f70d236cbee6773f1b5e905",name:"nick_arcade_background_zoomed-in_blurred.jpg"},{bytes:7591,md5:"c67f85a182c10f7f2f0c59d3b9d1a496",name:"slime_pipe_flow_tile_1.png"},{bytes:2575,md5:"36ddce432dc61b925b7d0a209cc9642d",name:"spine/burger_stand.atlas"},{bytes:217585,md5:"27d9e6dfa879ade85d2bac4e18cc6e65",
name:"spine/burger_stand.json"},{bytes:283160,md5:"cf4cb6f20f082892e28450f12de2f212",name:"spine/burger_stand.png"},{bytes:834,md5:"75d020f97293abbe8c031a2863adecc6",name:"spine/chest.atlas"},{bytes:31474,md5:"5b1e4114d038f109344124e895f1da52",name:"spine/chest.json"},{bytes:33605,md5:"2194e005cac19c8030b9af4b78ee9056",name:"spine/chest.png"},{bytes:995,md5:"ef810c561d50da9a27b498bc768df3dc",name:"spine/chicken_bucket.atlas"},{bytes:16149,md5:"566c270abae11b311d495a7c64418a79",name:"spine/chicken_bucket.json"},
{bytes:91723,md5:"041a7927455484787ff03beb44bb195a",name:"spine/chicken_bucket.png"},{bytes:2348,md5:"1016dbb9b5ba06ebd87497bacd0cfce4",name:"spine/drink_fountain.atlas"},{bytes:95553,md5:"1487d24f77be65cfe182a88808b3ad42",name:"spine/drink_fountain.json"},{bytes:50681,md5:"c5d1b80d73e1960578a80f765e567922",name:"spine/drink_fountain.png"},{bytes:951,md5:"ba32cee13e5be97fa770602f9e05474a",name:"spine/fish_trash_can_1.atlas"},{bytes:9012,md5:"a01c6def32e1d466aa2c7cd89e343836",name:"spine/fish_trash_can_1.json"},
{bytes:51331,md5:"3b54c92353587596eedf266b355cf2b0",name:"spine/fish_trash_can_1.png"},{bytes:750,md5:"d7017cc25938aedab41b1fbbab10e48a",name:"spine/glove_balloons.atlas"},{bytes:88085,md5:"d0d944f69e6164c9272df6ceb7094604",name:"spine/glove_balloons.json"},{bytes:79022,md5:"bb09c9fe83dc61c9b30ea5ba197a1225",name:"spine/glove_balloons.png"},{bytes:2104,md5:"5fa1a24ad9a150d692d13ba443a9c191",name:"spine/multi_TV_screen_1.atlas"},{bytes:12205,md5:"aade2dc6f38ef607e3365013fcdec9d2",name:"spine/multi_TV_screen_1.json"},
{bytes:243636,md5:"85b37980f447ea69f26fc5379b304153",name:"spine/multi_TV_screen_1.png"},{bytes:308,md5:"e84e3448b0b63abe4ef352fc40073c31",name:"spine/neon_sign_1.atlas"},{bytes:1822,md5:"1f9e4cd5c772229c859c8ccb750d7a76",name:"spine/neon_sign_1.json"},{bytes:65475,md5:"38561a16e91707e14cb9dc2b2f8daa12",name:"spine/neon_sign_1.png"},{bytes:319,md5:"c7d6ad0b4e8fe7195b24a606e7891721",name:"spine/neon_sign_2.atlas"},{bytes:1842,md5:"209bd943c98d1e4a72183d465f717d66",name:"spine/neon_sign_2.json"},{bytes:49282,
md5:"6e508fc9cc3835afee3dc6acad0923bd",name:"spine/neon_sign_2.png"},{bytes:316,md5:"d727bd4d7bb7b7194950bdee8f4d5098",name:"spine/neon_sign_3.atlas"},{bytes:1838,md5:"89b85711b271ad9d9037b01af33cea77",name:"spine/neon_sign_3.json"},{bytes:70721,md5:"55bf65047f93d8feb5a7e5c6e0950fda",name:"spine/neon_sign_3.png"},{bytes:316,md5:"1c7f6a132aa169370b89defbb3a74274",name:"spine/neon_sign_4.atlas"},{bytes:1837,md5:"3f12b18d30458f6bc80faae82a844e3e",name:"spine/neon_sign_4.json"},{bytes:49101,md5:"99573957ef49176c2a054a12255ecd32",
name:"spine/neon_sign_4.png"},{bytes:821,md5:"ab3071dc05c3d406947121d2fce8e932",name:"spine/nick_arcade_slime.atlas"},{bytes:402897,md5:"7061bb256cb622ea35ca7ff6ca497066",name:"spine/nick_arcade_slime.json"},{bytes:67550,md5:"198280e6ef6288c717e014802109739a",name:"spine/nick_arcade_slime.png"},{bytes:1938,md5:"9ba2b8c6f31b02efe9786605c93b7b8c",name:"spine/rocket_trash_can.atlas"},{bytes:16249,md5:"1502b920b3a28e2d1837e862e61df42f",name:"spine/rocket_trash_can.json"},{bytes:527102,md5:"0c635f8f7a1bb65122ce34712ced2665",
name:"spine/rocket_trash_can.png"},{bytes:964,md5:"da86744704bbb08a446c6ae87bc62547",name:"spine/single_TV_screen_1.atlas"},{bytes:5601,md5:"5fcfa4b0fa838db8f62ae5399b8e7ada",name:"spine/single_TV_screen_1.json"},{bytes:198082,md5:"0916f95706a44d8efbdc1b64f96770d8",name:"spine/single_TV_screen_1.png"},{bytes:11433,md5:"be8b11fbeb8b8c1367b92823d8531ab8",name:"spine/slime_pipe_flow_tile_1.png"},{bytes:436,md5:"14f49d9b1ea611a2084a3e4e5fb75c20",name:"spine/slushie_screen_fill.atlas"},{bytes:4558,md5:"f83e54047ebb14b904fde79c91d11389",
name:"spine/slushie_screen_fill.json"},{bytes:96870,md5:"8fe505daa0f787ec987f4058266d7051",name:"spine/slushie_screen_fill.png"},{bytes:893,md5:"68b0c47151668aa0a6d6bbe117f5a201",name:"spine/special_door.atlas"},{bytes:7543,md5:"0bde3ca14d143129ea69a07075e5de78",name:"spine/special_door.json"},{bytes:115455,md5:"454cb8f7ede7cb6dbb989f21b6e75b43",name:"spine/special_door.png"},{bytes:306,md5:"513dc4bc34eb4629384a175446bca0de",name:"spine/spotlight.atlas"},{bytes:6003,md5:"94d7c4383a0bbeb3fb1015da5b1c674e",
name:"spine/spotlight.json"},{bytes:92078,md5:"9a7872b046d918542317fd3b5ddb8b5e",name:"spine/spotlight.png"},{bytes:935,md5:"8a9b6aa55867a6b6071337af245bec9e",name:"spine/ticket_machine.atlas"},{bytes:30431,md5:"2832e3149ef9a832a371c5a2cb4efd88",name:"spine/ticket_machine.json"},{bytes:29757,md5:"8ba2bab2e925d1ad67f91ff31cb025f7",name:"spine/ticket_machine.png"}],minigame_rockem:[{bytes:185930,md5:"5cfb846db9c18da1a3ca06ab17080e54",name:"arcade_rockem_sockem_cab_bg.jpg"},{bytes:881,md5:"bacce9be0de68ea066fd0391651e40e1",
name:"minigame_rockem_0.atlas"},{bytes:168824,md5:"8474d92407fbc1e10e3a9a3a80b9686b",name:"minigame_rockem_0.png"},{bytes:986,md5:"36b9cc9b4f6bd259fa708fca12dc74fb",name:"spine/arcade_rockem_sockem_bg.atlas"},{bytes:12802,md5:"c974fcf995811d607d81b1b999241ad7",name:"spine/arcade_rockem_sockem_bg.json"},{bytes:98799,md5:"574aadf384a8a36dd1c3bd68d19f51b6",name:"spine/arcade_rockem_sockem_bg.png"},{bytes:1733,md5:"194471f9feac70543e3a28dfb01fe74c",name:"spine/arcade_rockem_sockem_cab.atlas"},{bytes:11060,
md5:"19763f65a623abbe4ea44f01f814cc6f",name:"spine/arcade_rockem_sockem_cab.json"},{bytes:991414,md5:"8b7d2f39030e6ae82649dd7ce997dfb7",name:"spine/arcade_rockem_sockem_cab.png"},{bytes:1134,md5:"ecf77b63e4c46f0bfeb2a493e50e6f70",name:"spine/arcade_rockem_sockem_effect.atlas"},{bytes:136992,md5:"d21bde28723fd9b28e898aa65270d9e1",name:"spine/arcade_rockem_sockem_effect.json"},{bytes:394500,md5:"1fd732b81cea31e3eecb541f4c93f9a6",name:"spine/arcade_rockem_sockem_effect.png"},{bytes:1970,md5:"bd5bcca8d421388a2eccb8fc9ec9380f",
name:"spine/arcade_rockem_sockem_master.atlas"},{bytes:17912,md5:"a5ca394bc9e1126db20d9859975329ba",name:"spine/arcade_rockem_sockem_master.json"},{bytes:74021,md5:"172cb6b529dd3bd031d640f1a9ae1283",name:"spine/arcade_rockem_sockem_master.png"},{bytes:3121,md5:"8458a318116f62a3d450a0f2c6255a59",name:"spine/arcade_rockem_sockem_sandy.atlas"},{bytes:100924,md5:"eb1d61d386aa1253091429696d785950",name:"spine/arcade_rockem_sockem_sandy.json"},{bytes:498645,md5:"497c8a1933613eb520613b713b4ee26f",name:"spine/arcade_rockem_sockem_sandy.png"},
{bytes:2524,md5:"11bf79eb40c78f4fe0f1fe877c1eb05b",name:"spine/arcade_rockem_sockem_sb.atlas"},{bytes:79632,md5:"efca1cb5459d5f4b564839b13638a822",name:"spine/arcade_rockem_sockem_sb.json"},{bytes:374788,md5:"62473cff252364e2b85aeae6bb5f25e7",name:"spine/arcade_rockem_sockem_sb.png"},{bytes:1530,md5:"9ab5df852e80bcaf8780297f13f81529",name:"spine/flame.atlas"},{bytes:13165,md5:"a230ad95a3677b9bdd6eb5033c0e1b56",name:"spine/flame.json"},{bytes:151456,md5:"5088782e90d1d8e46920c73d856ad73e",name:"spine/flame.png"},
{bytes:780,md5:"7ba7ab3d7de2334db20bd747bac2b401",name:"spine/ko_fx.atlas"},{bytes:12271,md5:"4c9ab64ba3f6569f6c57530b1e08ecc6",name:"spine/ko_fx.json"},{bytes:174556,md5:"a2dc6ff8fce8ee1b2f8488770d88c02c",name:"spine/ko_fx.png"},{bytes:455,md5:"69650bfbb5b1836d459c294c478e2711",name:"spine/power_btn.atlas"},{bytes:4596,md5:"b609f96017387a25cc71d4e9e8427226",name:"spine/power_btn.json"},{bytes:82248,md5:"e90aee2015c942f5c4071b269cc6af4f",name:"spine/power_btn.png"}],minigame_pack_maze:[{bytes:5085,
md5:"b7b0ba81dc1d35edb86ca0a3e7996df9",name:"minigame_pack_maze_0.atlas"},{bytes:113609,md5:"a64c2bbdc7b81041e2b88b520f196d5c",name:"minigame_pack_maze_0.png"},{bytes:7510,md5:"a3cc625dc2787e59ae7b3e9f71564e14",name:"minigame_pack_maze_1.atlas"},{bytes:40851,md5:"cf5b065fd5212e6f544a99c4bf1800d9",name:"minigame_pack_maze_1.png"},{bytes:336,md5:"6997118befdd137a8a186b32753dce2a",name:"minigame_pack_maze_2.atlas"},{bytes:2583,md5:"fce508324b517b353a1acc3db5c05ab4",name:"minigame_pack_maze_2.png"}],
minigame_pack_maze_audio:[{bytes:13582,md5:"40814dbdd1a471c07e658835317bd56f",name:"ollie_next_level.mp3"},{bytes:15409,md5:"3a9b2400097f3c3eafa4ac00e764fd7a",name:"ollie_next_level.ogg"},{bytes:7965,md5:"4df9f76cfb91c59e9692365be6266def",name:"ollie_pellet_consumption.mp3"},{bytes:13327,md5:"76695a66e22c051dc035d12618a0c47c",name:"ollie_pellet_consumption.ogg"},{bytes:5512,md5:"6ed77bc0704bc6dc94085436c248f4b7",name:"ollie_powerup_grab.mp3"},{bytes:10878,md5:"c9fbb53b6925b632a79f5c5f0374218b",name:"ollie_powerup_grab.ogg"},
{bytes:24031,md5:"dcdba699b2626e26e595d0b49913e9a2",name:"ollie_spawn_enemy.mp3"},{bytes:27490,md5:"30f2ab00178ce9b922cb48ff100849c7",name:"ollie_spawn_enemy.ogg"}],bootstrap:[{bytes:24640,md5:"dd2708c9cc6acec398de8838f57aebe3",name:"audio/arcade_slime_wave.mp3"},{bytes:65727,md5:"c9bed92b66d7d0190f5a6dc541019f62",name:"audio/arcade_slime_wave.ogg"},{bytes:14421,md5:"79282c3d828484a134579c3dc23f490c",name:"audio/arcade_slime_wave_alt.mp3"},{bytes:36771,md5:"13c4e515c684de1b3b56cb09464f8fe6",name:"audio/arcade_slime_wave_alt.ogg"},
{bytes:855231,md5:"1960fb8f96d148fe1f00a93b2476a943",name:"audio/nick_arcade_track_1.mp3"},{bytes:1333990,md5:"114f3997365bd2e34c0044d67f573058",name:"audio/nick_arcade_track_1.ogg"},{bytes:2114,md5:"869b633d9b59868e52a68153fe351d7b",name:"audio/silent.mp3"},{bytes:5514,md5:"497e87903c25c13a8bf7cbf9b0e7e61e",name:"audio/silent.ogg"},{bytes:444,md5:"d17ccf4ccd14fa7c9312cdf763ffff04",name:"config/config.xml"},{bytes:275229,md5:"87ce0cdde511607e774e0ca14ba9ff86",name:"ui/splash/nick_arcade_splash.jpg"},
{bytes:34052,md5:"871155b6d7fce78529ebf248c36f0c11",name:"ui/splash/nick_arcade_splash_logo.png"}],fonts_ru:[{bytes:14350,md5:"db5882b110951678836ba99de9841c84",name:"nick-arcade_font_russian.fnt"},{bytes:223482,md5:"1acb032b0db78cef0b08e05b2fabd59f",name:"nick-arcade_font_russian.png"},{bytes:27930,md5:"22c8b91ba14a27dff1c16739f6d47666",name:"translation.xml"}],fonts_la:[{bytes:17051,md5:"0f9eb33b84edd7475071abba5819d3ef",name:"nick-arcade_font_ext_latin.fnt"},{bytes:205407,md5:"01fe89da78a8df8fedf7c2e5e22f297c",
name:"nick-arcade_font_ext_latin.png"},{bytes:27932,md5:"d8b608e0f0a27f9614c72df4a3e653c6",name:"translation.xml"}],fonts_kr:[{bytes:17051,md5:"0f9eb33b84edd7475071abba5819d3ef",name:"nick-arcade_font_ext_latin.fnt"},{bytes:205407,md5:"01fe89da78a8df8fedf7c2e5e22f297c",name:"nick-arcade_font_ext_latin.png"},{bytes:27932,md5:"d8b608e0f0a27f9614c72df4a3e653c6",name:"translation.xml"}],fonts_jp:[{bytes:17051,md5:"0f9eb33b84edd7475071abba5819d3ef",name:"nick-arcade_font_ext_latin.fnt"},{bytes:205407,
md5:"01fe89da78a8df8fedf7c2e5e22f297c",name:"nick-arcade_font_ext_latin.png"},{bytes:27932,md5:"d8b608e0f0a27f9614c72df4a3e653c6",name:"translation.xml"}],fonts_en:[{bytes:12423,md5:"ae2d3ea937502459114dd66c784946d8",name:"nick-arcade_font_basic_en.fnt"},{bytes:159440,md5:"8dab817321051e41ba0d36a5b505424e",name:"nick-arcade_font_basic_en.png"},{bytes:27932,md5:"cb362989d5907c4a431bba57e9b099cc",name:"translation.xml"}],fonts_cn:[{bytes:17051,md5:"0f9eb33b84edd7475071abba5819d3ef",name:"nick-arcade_font_ext_latin.fnt"},
{bytes:205407,md5:"01fe89da78a8df8fedf7c2e5e22f297c",name:"nick-arcade_font_ext_latin.png"},{bytes:27932,md5:"d8b608e0f0a27f9614c72df4a3e653c6",name:"translation.xml"}],minigame_basketball:[{bytes:365876,md5:"97c27013e745aac0143e79e2a7df40cc",name:"hoops_wall_back.png"},{bytes:64E3,md5:"856f7fd632941b1d0daa8d261e95cf56",name:"hoop_backboard_stencil.png"},{bytes:986,md5:"27ecde9818898422462facf08b5a6422",name:"minigame_basketball_0.atlas"},{bytes:139347,md5:"48342c9eee1d900bf0fa458667b399ad",name:"minigame_basketball_0.png"},
{bytes:2306,md5:"d1e0875b30efff0083c9ca09418eded9",name:"spine/arcade_slimeball_all.atlas"},{bytes:25577,md5:"c0b14e7ae0d2ebddf40b360f83f43bc5",name:"spine/arcade_slimeball_all.json"},{bytes:267658,md5:"898a2d8bfdcdc60185bebf3cb626128c",name:"spine/arcade_slimeball_all.png"},{bytes:645,md5:"cc876e23c2e9037372cb1aa1e204de87",name:"spine/arcade_slimeball_backboard.atlas"},{bytes:19782,md5:"21316ed7c3f52edf906fecc2d1304f0f",name:"spine/arcade_slimeball_backboard.json"},{bytes:100397,md5:"f0468f397ddc0858574186d75c18bacc",
name:"spine/arcade_slimeball_backboard.png"},{bytes:911,md5:"99853a31c7f3e4fdcba7df4fc59b213f",name:"spine/arcade_slimeball_ball.atlas"},{bytes:8076,md5:"bbd6e37536ed986cdaf4f338ad130024",name:"spine/arcade_slimeball_ball.json"},{bytes:41749,md5:"0198ff36e4f664fb27e6ab38d25fe745",name:"spine/arcade_slimeball_ball.png"},{bytes:1090,md5:"a91e323f277b70cbb1476a2257a5db65",name:"spine/arcade_slimeball_crowd.atlas"},{bytes:14380,md5:"ace03245dafa8400aa7505aac4d3e754",name:"spine/arcade_slimeball_crowd.json"},
{bytes:471093,md5:"25ef9bea945a98b3687facf1df8a3e41",name:"spine/arcade_slimeball_crowd.png"},{bytes:715,md5:"392b817b16c2de8cc46386125608d4e8",name:"spine/arcade_slimeball_hoop_back.atlas"},{bytes:12094,md5:"13e6188a8f2e472afca005305d362f04",name:"spine/arcade_slimeball_hoop_back.json"},{bytes:21836,md5:"52008cc2222daa3e82df5c8bef58c328",name:"spine/arcade_slimeball_hoop_back.png"},{bytes:288,md5:"ddb4f41b1bb287d71d182d0c5fee815f",name:"spine/arcade_slimeball_hoop_front.atlas"},{bytes:3369,md5:"27de08b25499f7be74e01f8db0dfd0f7",
name:"spine/arcade_slimeball_hoop_front.json"},{bytes:4482,md5:"779f51e7cfd900f40b52229e50ffa6b3",name:"spine/arcade_slimeball_hoop_front.png"},{bytes:519,md5:"cb73336ed946303c049c961d7b9e8322",name:"spine/arcade_slimeball_pipe_back.atlas"},{bytes:2532,md5:"cec3230af69e52b2c98b96e1a031aad6",name:"spine/arcade_slimeball_pipe_back.json"},{bytes:44214,md5:"9d501e1521648c6004cfa12c476f512e",name:"spine/arcade_slimeball_pipe_back.png"},{bytes:989,md5:"9f2dc565515800f495338f736ef20085",name:"spine/arcade_slimeball_pipe_front.atlas"},
{bytes:10038,md5:"ebec5745b1207418197993f79c118827",name:"spine/arcade_slimeball_pipe_front.json"},{bytes:18793,md5:"e0d8243d742ebe493ed325131b6e7d5f",name:"spine/arcade_slimeball_pipe_front.png"},{bytes:2596,md5:"d3fe017243a2e48bf636605e05541632",name:"spine/nick_arcade_slimeball_pop_dump.atlas"},{bytes:256234,md5:"093fb2e7af6fba7f85ed5cead5412713",name:"spine/nick_arcade_slimeball_pop_dump.json"},{bytes:185977,md5:"a9f0b0607dd98e94dbc290b517ce08b2",name:"spine/nick_arcade_slimeball_pop_dump.png"},
{bytes:6788,md5:"32938754f09161f2f721b54cc260d5e6",name:"splat.png"},{bytes:3243911,md5:"3ca2ed96ef60c1d95d304e6195aaeeac",name:"splat_1.png"},{bytes:3233863,md5:"dbdd66a3b632e7214bdccab2993650aa",name:"splat_2.png"},{bytes:3238845,md5:"3c12366cf2154330cc44a9476fd5a382",name:"splat_3.png"}],minigame_basketball_audio:[{bytes:14742,md5:"5f9168413659e2691f02163afd55e7cc",name:"slimeball_backboard_bounce_02.mp3"},{bytes:35341,md5:"cd238140cfaaaba4f53b37e2e3a5f890",name:"slimeball_backboard_bounce_02.ogg"},
{bytes:11775,md5:"a45788308a9db3f9df15a5e7a33f5e41",name:"slimeball_net_swish.mp3"},{bytes:22153,md5:"954a106fec411314164be918ba3cb798",name:"slimeball_net_swish.ogg"},{bytes:8480,md5:"210b5a6e34e1fe1729b2d72a7987d9d1",name:"slimeball_net_swish_alt.mp3"},{bytes:17971,md5:"ee20d678828f5c148ea3d7ceb085ca62",name:"slimeball_net_swish_alt.ogg"}],minigame_skate_audio:[{bytes:67087,md5:"b4ac49711b3b1dd21e38011e2486a94d",name:"casagrandes_skateboard.mp3"},{bytes:149238,md5:"64829376e09a97aead8d0aada5acee8f",
name:"casagrandes_skateboard.ogg"},{bytes:8358,md5:"d89ab363419ff730bbfa4699d5b38cda",name:"skate_coin.mp3"},{bytes:10043,md5:"6ba248656e43ee0ce7735d74dff44529",name:"skate_coin.ogg"},{bytes:8757,md5:"3187e4918c8bc954b5a4e91b5d8d2a27",name:"skate_impact_1.mp3"},{bytes:14643,md5:"8a3e6b99881acf7ffa484325773f1344",name:"skate_impact_1.ogg"},{bytes:50154,md5:"22db22a4893f5ec6548498f7cf19477e",name:"skate_impact_2.mp3"},{bytes:48927,md5:"0da4b0da0dd03fbd1fc7fd265e3e96d6",name:"skate_impact_2.ogg"},{bytes:45974,
md5:"14e6d4adbecea93b6f7f922a63031fc9",name:"skate_land.mp3"},{bytes:36449,md5:"6b6bc13c0b8f7427dd9541887d387b5b",name:"skate_land.ogg"},{bytes:94040,md5:"f22974d773d6ad4839fd5edd18158f4d",name:"skate_lose.mp3"},{bytes:102458,md5:"4076dde9873a64403b317f3aa14249b1",name:"skate_lose.ogg"},{bytes:66872,md5:"7f48d019a8109d286aad1c75c01aa58b",name:"skate_power.mp3"},{bytes:62425,md5:"f798771b7ac7ea6c0a0783021b8742b7",name:"skate_power.ogg"}],minigame_skeeball_audio:[{bytes:26091,md5:"c6e57f460bbeadbe24f0c464d4cd20f3",
name:"skeeball_roll.mp3"},{bytes:43590,md5:"9b5f69b13c239425abfb7c690063bd6c",name:"skeeball_roll.ogg"},{bytes:5743,md5:"529547921ff0bb2134043a800a8d7fe2",name:"skeeball_score_splat.mp3"},{bytes:15243,md5:"23d3621b02665c1aeeb403d1af21b4e8",name:"skeeball_score_splat.ogg"},{bytes:6160,md5:"c431ce88f8eb6666092067517a9d5042",name:"skeeball_score_splat_02.mp3"},{bytes:15656,md5:"4b7e5d00ce76d255a1cc548730d3bac0",name:"skeeball_score_splat_02.ogg"},{bytes:65827,md5:"fcba78dcabb7eee098dfb6bd2c1f923e",name:"skeeball_vacuum.mp3"},
{bytes:85083,md5:"111283f6283fc9f7847ca106dd14a7dd",name:"skeeball_vacuum.ogg"}],minigame_loud_laugh_audio:[{bytes:4623,md5:"ec27c638e033f3e55261307dd94beed0",name:"loud_house_pie_splat.mp3"},{bytes:11898,md5:"dd933795163a3449c083b95078a01557",name:"loud_house_pie_splat.ogg"},{bytes:4623,md5:"ec27c638e033f3e55261307dd94beed0",name:"loud_laughs_pie_splat.mp3"},{bytes:11898,md5:"fa8db3699ead87e0c1ec5de55fd46566",name:"loud_laughs_pie_splat.ogg"}],minigame_anchovy:[{bytes:1855,md5:"084e90e001a253cd787bc61ae76e4a39",
name:"minigame_anchovy_0.atlas"},{bytes:110553,md5:"9765f0b1649be3fa941d167286619e24",name:"minigame_anchovy_0.png"},{bytes:3505,md5:"da7e93e980c7f2b5a194e8f30cdf9cb5",name:"spine/anchovie_anim_1.atlas"},{bytes:22906,md5:"e28c930c68a825f162225a7dd28f994f",name:"spine/anchovie_anim_1.json"},{bytes:117420,md5:"489ee5a0127c44b6ba3398f34ebd9f83",name:"spine/anchovie_anim_1.png"},{bytes:650,md5:"95999d3848c8f28c49606b5a80fe0f07",name:"spine/cab_back.atlas"},{bytes:7407,md5:"b23d6a32a8ff71eb7cf2805f5206ecfe",
name:"spine/cab_back.json"},{bytes:150526,md5:"490c9d6a772700ec29f77076730c66bb",name:"spine/cab_back.png"},{bytes:284,md5:"cbcb97a7288719ad8cb0887321547174",name:"spine/cab_front.atlas"},{bytes:2125,md5:"4a72af2c3151d536fbb6121886fd4c3c",name:"spine/cab_front.json"},{bytes:1709601,md5:"8a370dd1232504f47f98a0cd62fd90ea",name:"spine/cab_front.png"},{bytes:2635,md5:"2c31a95e5be7c8fb8336ad50dfc228da",name:"spine/clarinet_squidward.atlas"},{bytes:65968,md5:"478ca3d32e251b3404d7151db4e87341",name:"spine/clarinet_squidward.json"},
{bytes:40851,md5:"3b710576c4356f28a0c9e99ade1365f9",name:"spine/clarinet_squidward.png"},{bytes:937,md5:"0f3622da47077fed8468f1f1d514f0c4",name:"spine/hungry_pat_1.atlas"},{bytes:8408,md5:"77d0bb32c42e7c03319e5ba916ed0bf7",name:"spine/hungry_pat_1.json"},{bytes:62124,md5:"7819e8fc9de4a9201c66ffb548a62313",name:"spine/hungry_pat_1.png"},{bytes:428,md5:"287619e07c115ddd42d9deadad67b98b",name:"spine/krabby_dispenser.atlas"},{bytes:3156,md5:"a3675b64ef7a4af6fc68400efee0bb2f",name:"spine/krabby_dispenser.json"},
{bytes:8652,md5:"19d476bd4a10e56634baeb4015471ac1",name:"spine/krabby_dispenser.png"}]}]}};xe._supportsCrossOrigin=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;Vg.NEWLINE=new bj(10);le._scratchPoint=new Ih;Pg._sharedEvent=new jn;Wc._sharedEvent=new kn;ig._sharedEvent=new ln;$i.CANVAS_TEXTURES=!1;Tc._mediaRefCount=0;Tc._detectBlobSupport=!0;nb.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];nb.SHOULD_HIDE_MOBILE_BROWSER=window.top==window?
(new Ng("Mobile(/.*)? Safari","")).match(window.navigator.userAgent):!1;Uc._detectSupport=!0;cf.USE_CACHE=!1;cf.USE_ENUM_INDEX=!1;cf.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Se.DEFAULT_RESOLVER=new pl;Se.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Qg.count=0;bi.escapes=function(){var a=new $c;null!=K.lt?a.setReserved("lt","<"):a.h.lt="<";null!=K.gt?a.setReserved("gt",">"):a.h.gt=">";null!=K.amp?a.setReserved("amp","&"):a.h.amp="&";null!=
K.quot?a.setReserved("quot",'"'):a.h.quot='"';null!=K.apos?a.setReserved("apos","'"):a.h.apos="'";return a}(this);y.__toStr={}.toString;fi.BYTES_PER_ELEMENT=1;lp.allConfig=["config/config.xml"];u.epsilon=1.0E-8;u.fluidAngularDragFriction=2.5;u.fluidAngularDrag=100;u.fluidVacuumDrag=0.5;u.fluidLinearDrag=0.5;u.collisionSlop=0.2;u.collisionSlopCCD=0.5;u.distanceThresholdCCD=0.05;u.staticCCDLinearThreshold=0.05;u.staticCCDAngularThreshold=0.005;u.bulletCCDLinearThreshold=0.125;u.bulletCCDAngularThreshold=
0.0125;u.dynamicSweepLinearThreshold=17;u.dynamicSweepAngularThreshold=0.6;u.angularCCDSlipScale=0.75;u.arbiterExpirationDelay=6;u.staticFrictionThreshold=2;u.elasticThreshold=20;u.sleepDelay=60;u.linearSleepThreshold=0.2;u.angularSleepThreshold=0.4;u.contactBiasCoef=0.3;u.contactStaticBiasCoef=0.6;u.contactContinuousBiasCoef=0.4;u.contactContinuousStaticBiasCoef=0.5;u.constraintLinearSlop=0.1;u.constraintAngularSlop=0.001;u.illConditionedThreshold=2E8;mg.zpp_internalAlloc=!1;$e.zpp_internalAlloc=
!1;Pe.zpp_internalAlloc=!1;Ha._DEFAULT_LAYER="ui_default";Ha._DEBUG_SHOW_CLICKWALL=!1;E.VERSION="3.8.xx";E.ATLAS_FILE_TYPE=".atlas";E.FPS=30;da._scratchPoint=new Ih;da._DEBUG_SHOW_HITBOX=!1;Ph._DEBUG_SHOW_HITBOX=!1;H.eventLoadError=ke._new();H._assets=new $c;H._packs=new $c;H._spritesheets=new $c;H._flump=new $c;H._customManifests=new $c;H._fontCache=new $c;H._requests=[];H._loadQueue=[];H._manifestsLoaded=0;H._manifestsMax=0;H._flagBaseIsCrossdomain=!1;H._loadingProgress=0;H._loadingTotal=0;m._values=
new $c;m._defaults=new $c;Hc._pools=new $c;w.eventInput=Yi._new();w.eventMouseWheel=yd._new();w.eventKey=Yi._new();w.leftStick=Aa.request();w.rightStick=Aa.request();w.pointer=new dm(-1);w.multiTouch=[];w.enabled=!1;w._inputTrackers=[];w._virtualDown=[];w._controllerDown=[];Fc._localizedData=new $c;Fc.region="";M._seeds=new $c;s.eventVOStatus=yd._new();s.subtitleQueue=[];s._sound=[];s._voQueue=[];s._tween=new Gi;s._musicId="";s._stateVo=Jg.STOPPED;s._musicGain=1;ha._timers=[];ha._uniqueInc=0;ha._paused=
!1;ki.NEWLINE=new bj(10);Rh._BUTTON_BLANK_PIXELS=40;Rh._43_SIZE=746.6666666666666;Rh._169_SIZE=995.5555555555555;Rh._43_HALF=373.3333333333333;Rh._169_HALF=497.77777777777777;Rh._169_RENDER_WIDTH=124.44444444444446;pa.PI=Math.PI;pa.PI2=2*Math.PI;pa.radDeg=180/Math.PI;pa.degRad=Math.PI/180;Ee.NONE=-1;Ee.BEFORE=-2;Ee.AFTER=-3;Ee.epsilon=1.0E-5;$d.SUBSEQUENT=0;$d.FIRST=1;$d.HOLD=2;$d.HOLD_MIX=3;$d.NOT_LAST=4;mc.ENTRIES=5;mc.PREV_TIME=-5;mc.PREV_R=-4;mc.PREV_G=-3;mc.PREV_B=-2;mc.PREV_A=-1;mc.R=1;mc.G=
2;mc.B=3;mc.A=4;Xa.ENTRIES=6;Xa.PREV_TIME=-6;Xa.PREV_MIX=-5;Xa.PREV_SOFTNESS=-4;Xa.PREV_BEND_DIRECTION=-3;Xa.PREV_COMPRESS=-2;Xa.PREV_STRETCH=-1;Xa.MIX=1;Xa.SOFTNESS=2;Xa.BEND_DIRECTION=3;Xa.COMPRESS=4;Xa.STRETCH=5;Yc.ENTRIES=3;Yc.PREV_TIME=-3;Yc.PREV_ROTATE=-2;Yc.PREV_TRANSLATE=-1;Yc.ROTATE=1;Yc.TRANSLATE=2;bd.ENTRIES=2;bd.PREV_TIME=-2;bd.PREV_VALUE=-1;bd.VALUE=1;ad.ENTRIES=2;ad.PREV_TIME=-2;ad.PREV_ROTATION=-1;ad.ROTATION=1;Ia.ENTRIES=3;Ia.PREV_TIME=-3;Ia.PREV_X=-2;Ia.PREV_Y=-1;Ia.X=1;Ia.Y=2;Cb.ENTRIES=
5;Cb.PREV_TIME=-5;Cb.PREV_ROTATE=-4;Cb.PREV_TRANSLATE=-3;Cb.PREV_SCALE=-2;Cb.PREV_SHEAR=-1;Cb.ROTATE=1;Cb.TRANSLATE=2;Cb.SCALE=3;Cb.SHEAR=4;Fa.ENTRIES=8;Fa.PREV_TIME=-8;Fa.PREV_R=-7;Fa.PREV_G=-6;Fa.PREV_B=-5;Fa.PREV_A=-4;Fa.PREV_R2=-3;Fa.PREV_G2=-2;Fa.PREV_B2=-1;Fa.R=1;Fa.G=2;Fa.B=3;Fa.A=4;Fa.R2=5;Fa.G2=6;Fa.B2=7;Cc.nextID=0;Nd.BLX=0;Nd.BLY=1;Nd.ULX=2;Nd.ULY=3;Nd.URX=4;Nd.URY=5;Nd.BRX=6;Nd.BRY=7;Pi.QUAD_TRIANGLES=[0,1,2,2,3,0];Pi.VERTEX_SIZE=8;xi.eventFlowDelegate=Yi._new();U.UNTUTORIALIZED_BOOSTERS=
["DOUBLE_POINTS","EXTRA_AMMO","EXTRA_TIME","NONE"];Eh._BURGER_AMOUNT=12;zg._GRAVITY=0.3;zk._CONVEYOR_VEL=50;Fj._FADE_RATE=0.5;Fh._timeStep=0.016666666666666666;Ka._basicGrid=["XXX.XXXXXXX.XXX,.OXO.......O...,X.X.X.XXX.X.X.X,X...X.XeX.X.X.X,X.X.X.X_X.X...X,X.X....O....XOX,X...X.XXX.X.X.X,X.X.X.XFX.XO..X,.O..........X..,XXX XXXXXXX XXX".split(","),"XX.XXXXXXXXX.XX,X...X..X..X...X,X.X.X.XXX.X.X.X,X.X...XFX...X.X,X...X.....X...X,X.X.X.XXX.X.X.X,X.....XeX.....X,X.XXX.X_X.XXX.X,X...X.....X...X,XX XXXXXXXXX XX".split(","),
"XXX.XXXXXXX.XXX,..X...XeX...X..,XO..X.X_X.X..OX,XX.XX.....XX.XX,XX.XX.XFX.XX.XX,....X..X..X....,X.X...XXX...X.X,X.XXX..X..XXX.X,X.O.X.....X.O.X,XXX XXXXXXX XXX".split(",")];Ka._poweredFruitChance=0.2;Ka._poweredPowerupChance=0.1;Ka.ROW_COUNT=10;Ka.COL_COUNT=15;Ka.ROW_PIXELS=50;Ka.COL_PIXELS=50;Ka.START_X=-345;Ka.START_Y=-250;Gh.HOLE_POSITIONS=[[{x:-170,y:-85},{x:-195,y:-15},{x:-235,y:70}],[{x:0,y:-85},{x:0,y:-15},{x:0,y:70}],[{x:170,y:-85},{x:195,y:-15},{x:235,y:70}]];Si._GRAVITY=0.2;Hj._DODGE_OFFSET=
100;Hj._ATTACK_OFFSET=-30;Ij._DODGE_OFFSET=-100;Ij._ATTACK_OFFSET=30;Uh.speedup=ke._new();$h._timeStep=0.016666666666666666;Xi._BELT_CAPACITY=8;Jj._GRAVITY=0.2;rf._Constraint=0;rf._Interactor=0;rf._CbType=0;rf._CbSet=0;Zd.internal=!1;Te.ANY_SHAPE=new Rg;Te.ANY_BODY=new Rg;Te.ANY_COMPOUND=new Rg;Te.ANY_CONSTRAINT=new Rg;l.internal=!1;vc.UCbSet=new Lj;vc.VCbSet=new Lj;vc.WCbSet=new Lj;vc.UCbType=new Wh;vc.VCbType=new Wh;vc.WCbType=new Wh;Gc.internal=!1;Gc.COL=1;Gc.FLUID=4;Gc.SENSOR=2;sa.internal=!1;
ka.flowpoly=new Fk;ka.flowsegs=new Fk;ua.nextId=0;hi.types=function(){null==l.BodyType_STATIC&&(l.internal=!0,l.BodyType_STATIC=new qd,l.internal=!1);var a=l.BodyType_STATIC;null==l.BodyType_DYNAMIC&&(l.internal=!0,l.BodyType_DYNAMIC=new qd,l.internal=!1);var b=l.BodyType_DYNAMIC;null==l.BodyType_KINEMATIC&&(l.internal=!0,l.BodyType_KINEMATIC=new qd,l.internal=!1);return[null,a,b,l.BodyType_KINEMATIC]}(this);Qa.WAKE=1;Qa.PROPS=2;Qa.ANGDRAG=4;Qa.ARBITERS=8;zd.internal=!1;re.tmpaabb=new sb;$g.internal=
!1;ah.internal=!1;oj.internal=!1;Nh.internal=!1;Kh.internal=!1;Zg.internal=!1;Fi.internal=!1;Ei.internal=!1;nj.internal=!1;mj.internal=!1;qj.internal=!1;Oh.internal=!1;lj.internal=!1;Mh.internal=!1;kj.internal=!1;oh.main()})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
