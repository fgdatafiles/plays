/** Cooked with Flambe, https://getflambe.com */
'use strict';
(function() {
    function l(a, b) {
        function c() {} c.prototype = a; var d = new c,
            e; for (e in b) d[e] = b[e];
        b.toString !== Object.prototype.toString && (d.toString = b.toString); return d }

    function Xm(a) { return a instanceof Array ? function() { return N.iter(a) } : "function" == typeof a.iterator ? n(a, a.iterator) : a.iterator }

    function n(a, b) {
        if (null == b) return null;
        null == b.__id__ && (b.__id__ = On++);
        var c;
        null == a.hx__closures__ ? a.hx__closures__ = {} : c = a.hx__closures__[b.__id__];
        null == c && (c = function() {
            return c.method.apply(c.scope,
                arguments)
        }, c.scope = a, c.method = b, a.hx__closures__[b.__id__] = c);
        return c
    }
    var g = {},
        r = function() { return U.__string_rec(this, "") },
        Qc = function(a, b) { b = b.split("u").join("");
            this.r = RegExp(a, b) };
    g.EReg = Qc;
    Qc.__name__ = ["EReg"];
    Qc.prototype = {
        match: function(a) { this.r.global && (this.r.lastIndex = 0);
            this.r.m = this.r.exec(a);
            this.r.s = a; return null != this.r.m },
        matched: function(a) { if (null != this.r.m && 0 <= a && a < this.r.m.length) return this.r.m[a]; throw "EReg::matched"; },
        matchedPos: function() {
            if (null == this.r.m) throw "No string matched";
            return { pos: this.r.m.index, len: this.r.m[0].length }
        },
        split: function(a) { return a.replace(this.r, "#__delim__#").split("#__delim__#") },
        replace: function(a, b) { return a.replace(this.r, b) },
        __class__: Qc
    };
    var N = function() {};
    g.HxOverrides = N;
    N.__name__ = ["HxOverrides"];
    N.dateStr = function(a) { var b = a.getMonth() + 1,
            c = a.getDate(),
            d = a.getHours(),
            e = a.getMinutes(),
            f = a.getSeconds(); return a.getFullYear() + "-" + (10 > b ? "0" + b : "" + b) + "-" + (10 > c ? "0" + c : "" + c) + " " + (10 > d ? "0" + d : "" + d) + ":" + (10 > e ? "0" + e : "" + e) + ":" + (10 > f ? "0" + f : "" + f) };
    N.strDate =
        function(a) { switch (a.length) {
                case 8:
                    var a = a.split(":"),
                        b = new Date;
                    b.setTime(0);
                    b.setUTCHours(a[0]);
                    b.setUTCMinutes(a[1]);
                    b.setUTCSeconds(a[2]); return b;
                case 10:
                    return a = a.split("-"), new Date(a[0], a[1] - 1, a[2], 0, 0, 0);
                case 19:
                    return b = a.split(" "), a = b[0].split("-"), b = b[1].split(":"), new Date(a[0], a[1] - 1, a[2], b[0], b[1], b[2]);
                default:
                    throw "Invalid date format : " + a; } };
    N.cca = function(a, b) { var c = a.charCodeAt(b); return c != c ? void 0 : c };
    N.substr = function(a, b, c) {
        if (null != b && 0 != b && null != c && 0 > c) return "";
        null ==
            c && (c = a.length);
        0 > b ? (b = a.length + b, 0 > b && (b = 0)) : 0 > c && (c = a.length + c - b);
        return a.substr(b, c)
    };
    N.remove = function(a, b) { var c = a.indexOf(b); if (-1 == c) return !1;
        a.splice(c, 1); return !0 };
    N.iter = function(a) { return { cur: 0, arr: a, hasNext: function() { return this.cur < this.arr.length }, next: function() { return this.arr[this.cur++] } } };
    var wf = function() {};
    g.Lambda = wf;
    wf.__name__ = ["Lambda"];
    wf.array = function(a) { for (var b = [], a = Xm(a)(); a.hasNext();) { var c = a.next();
            b.push(c) } return b };
    wf.exists = function(a, b) {
        for (var c = Xm(a)(); c.hasNext();) {
            var d =
                c.next();
            if (b(d)) return !0
        }
        return !1
    };
    wf.count = function(a, b) { var c = 0; if (null == b)
            for (var d = Xm(a)(); d.hasNext();) d.next(), c++;
        else
            for (d = Xm(a)(); d.hasNext();) { var e = d.next();
                b(e) && c++ }
        return c };
    var Be = function() { this.length = 0 };
    g.List = Be;
    Be.__name__ = ["List"];
    Be.prototype = {
        add: function(a) { a = [a];
            null == this.h ? this.h = a : this.q[1] = a;
            this.q = a;
            this.length++ },
        push: function(a) { this.h = a = [a, this.h];
            null == this.q && (this.q = a);
            this.length++ },
        pop: function() {
            if (null == this.h) return null;
            var a = this.h[0];
            this.h = this.h[1];
            null == this.h && (this.q = null);
            this.length--;
            return a
        },
        iterator: function() { return { h: this.h, hasNext: function() { return null != this.h }, next: function() { if (null == this.h) return null; var a = this.h[0];
                    this.h = this.h[1]; return a } } },
        __class__: Be
    };
    var Cg = function() {};
    g.IMap = Cg;
    Cg.__name__ = ["IMap"];
    Cg.prototype = { __class__: Cg };
    Math.__name__ = ["Math"];
    var y = function() {};
    g.Reflect = y;
    y.__name__ = ["Reflect"];
    y.field = function(a, b) { try { return a[b] } catch (c) { return null } };
    y.setField = function(a, b, c) { a[b] = c };
    y.getProperty = function(a,
        b) { var c; return null == a ? null : a.__properties__ && (c = a.__properties__["get_" + b]) ? a[c]() : a[b] };
    y.setProperty = function(a, b, c) { var d; if (a.__properties__ && (d = a.__properties__["set_" + b])) a[d](c);
        else a[b] = c };
    y.fields = function(a) { var b = []; if (null != a) { var c = Object.prototype.hasOwnProperty,
                d; for (d in a) "__id__" != d && "hx__closures__" != d && c.call(a, d) && b.push(d) } return b };
    y.isFunction = function(a) { return "function" == typeof a && !(a.__name__ || a.__ename__) };
    y.deleteField = function(a, b) {
        if (!Object.prototype.hasOwnProperty.call(a,
                b)) return !1;
        delete a[b];
        return !0
    };
    var u = function() {};
    g.Std = u;
    u.__name__ = ["Std"];
    u.is = function(a, b) { return U.__instanceof(a, b) };
    u.instance = function(a, b) { return a instanceof b ? a : null };
    u.string = function(a) { return U.__string_rec(a, "") };
    u["int"] = function(a) { return a | 0 };
    u.parseInt = function(a) { var b = parseInt(a, 10); if (0 == b && (120 == N.cca(a, 1) || 88 == N.cca(a, 1))) b = parseInt(a); return isNaN(b) ? null : b };
    u.parseFloat = function(a) { return parseFloat(a) };
    var Te = function() { this.b = "" };
    g.StringBuf = Te;
    Te.__name__ = ["StringBuf"];
    Te.prototype = { add: function(a) { this.b += u.string(a) }, addSub: function(a, b, c) { this.b = null == c ? this.b + N.substr(a, b, null) : this.b + N.substr(a, b, c) }, __class__: Te };
    var ka = function() {};
    g.StringTools = ka;
    ka.__name__ = ["StringTools"];
    ka.startsWith = function(a, b) { return a.length >= b.length && N.substr(a, 0, b.length) == b };
    ka.isSpace = function(a, b) { var c = N.cca(a, b); return 8 < c && 14 > c || 32 == c };
    ka.ltrim = function(a) { for (var b = a.length, c = 0; c < b && ka.isSpace(a, c);) c++; return 0 < c ? N.substr(a, c, b - c) : a };
    ka.rtrim = function(a) {
        for (var b = a.length,
                c = 0; c < b && ka.isSpace(a, b - c - 1);) c++;
        return 0 < c ? N.substr(a, 0, b - c) : a
    };
    ka.trim = function(a) { return ka.ltrim(ka.rtrim(a)) };
    ka.lpad = function(a, b, c) { if (0 >= b.length) return a; for (; a.length < c;) a = b + a; return a };
    ka.replace = function(a, b, c) { return a.split(b).join(c) };
    ka.fastCodeAt = function(a, b) { return a.charCodeAt(b) };
    var O = g.ValueType = { __ename__: ["ValueType"], __constructs__: "TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",") };
    O.TNull = ["TNull", 0];
    O.TNull.toString = r;
    O.TNull.__enum__ = O;
    O.TInt = ["TInt", 1];
    O.TInt.toString = r;
    O.TInt.__enum__ = O;
    O.TFloat = ["TFloat", 2];
    O.TFloat.toString = r;
    O.TFloat.__enum__ = O;
    O.TBool = ["TBool", 3];
    O.TBool.toString = r;
    O.TBool.__enum__ = O;
    O.TObject = ["TObject", 4];
    O.TObject.toString = r;
    O.TObject.__enum__ = O;
    O.TFunction = ["TFunction", 5];
    O.TFunction.toString = r;
    O.TFunction.__enum__ = O;
    O.TClass = function(a) { a = ["TClass", 6, a];
        a.__enum__ = O;
        a.toString = r; return a };
    O.TEnum = function(a) { a = ["TEnum", 7, a];
        a.__enum__ = O;
        a.toString = r; return a };
    O.TUnknown = ["TUnknown", 8];
    O.TUnknown.toString = r;
    O.TUnknown.__enum__ = O;
    var Y = function() {};
    g.Type = Y;
    Y.__name__ = ["Type"];
    Y.getClass = function(a) { return null == a ? null : a instanceof Array && null == a.__enum__ ? Array : a.__class__ };
    Y.getClassName = function(a) { return a.__name__.join(".") };
    Y.getEnumName = function(a) { return a.__ename__.join(".") };
    Y.resolveClass = function(a) { a = g[a]; return null == a || !a.__name__ ? null : a };
    Y.resolveEnum = function(a) { a = g[a]; return null == a || !a.__ename__ ? null : a };
    Y.createInstance = function(a, b) {
        switch (b.length) {
            case 0:
                return new a;
            case 1:
                return new a(b[0]);
            case 2:
                return new a(b[0], b[1]);
            case 3:
                return new a(b[0], b[1], b[2]);
            case 4:
                return new a(b[0], b[1], b[2], b[3]);
            case 5:
                return new a(b[0], b[1], b[2], b[3], b[4]);
            case 6:
                return new a(b[0], b[1], b[2], b[3], b[4], b[5]);
            case 7:
                return new a(b[0], b[1], b[2], b[3], b[4], b[5], b[6]);
            case 8:
                return new a(b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7]);
            default:
                throw "Too many arguments";
        }
    };
    Y.createEmptyInstance = function(a) {
        function b() {} b.prototype = a.prototype; return new b };
    Y.createEnum = function(a, b, c) {
        var d = y.field(a, b);
        if (null ==
            d) throw "No such constructor " + b;
        if (y.isFunction(d)) { if (null == c) throw "Constructor " + b + " need parameters"; return d.apply(a, c) }
        if (null != c && 0 != c.length) throw "Constructor " + b + " does not need parameters";
        return d
    };
    Y.getEnumConstructs = function(a) { return a.__constructs__.slice() };
    Y["typeof"] = function(a) {
        switch (typeof a) {
            case "boolean":
                return O.TBool;
            case "string":
                return O.TClass(String);
            case "number":
                return Math.ceil(a) == a % 2147483648 ? O.TInt : O.TFloat;
            case "object":
                if (null == a) return O.TNull;
                var b = a.__enum__;
                if (null != b) return O.TEnum(b);
                a = a instanceof Array && null == a.__enum__ ? Array : a.__class__;
                return null != a ? O.TClass(a) : O.TObject;
            case "function":
                return a.__name__ || a.__ename__ ? O.TObject : O.TFunction;
            case "undefined":
                return O.TNull;
            default:
                return O.TUnknown
        }
    };
    Y.enumEq = function(a, b) { if (a == b) return !0; try { if (a[0] != b[0]) return !1; for (var c = 2, d = a.length; c < d;) { var e = c++; if (!Y.enumEq(a[e], b[e])) return !1 } var f = a.__enum__; if (f != b.__enum__ || null == f) return !1 } catch (j) { return !1 } return !0 };
    Y.enumIndex = function(a) { return a[1] };
    g.XmlType = { __ename__: ["XmlType"], __constructs__: [] };
    var W = function() {};
    g.Xml = W;
    W.__name__ = ["Xml"];
    W.parse = function(a) { return Ue.parse(a) };
    W.createElement = function(a) { var b = new W;
        b.nodeType = W.Element;
        b._children = [];
        b._attributes = new K;
        b.set_nodeName(a); return b };
    W.createPCData = function(a) { var b = new W;
        b.nodeType = W.PCData;
        b.set_nodeValue(a); return b };
    W.createCData = function(a) { var b = new W;
        b.nodeType = W.CData;
        b.set_nodeValue(a); return b };
    W.createComment = function(a) {
        var b = new W;
        b.nodeType = W.Comment;
        b.set_nodeValue(a);
        return b
    };
    W.createDocType = function(a) { var b = new W;
        b.nodeType = W.DocType;
        b.set_nodeValue(a); return b };
    W.createProcessingInstruction = function(a) { var b = new W;
        b.nodeType = W.ProcessingInstruction;
        b.set_nodeValue(a); return b };
    W.createDocument = function() { var a = new W;
        a.nodeType = W.Document;
        a._children = []; return a };
    W.prototype = {
        get_nodeName: function() { if (this.nodeType != W.Element) throw "bad nodeType"; return this._nodeName },
        set_nodeName: function(a) {
            if (this.nodeType != W.Element) throw "bad nodeType";
            return this._nodeName =
                a
        },
        get_nodeValue: function() { if (this.nodeType == W.Element || this.nodeType == W.Document) throw "bad nodeType"; return this._nodeValue },
        set_nodeValue: function(a) { if (this.nodeType == W.Element || this.nodeType == W.Document) throw "bad nodeType"; return this._nodeValue = a },
        get: function(a) { if (this.nodeType != W.Element) throw "bad nodeType"; return this._attributes.get(a) },
        set: function(a, b) { if (this.nodeType != W.Element) throw "bad nodeType";
            this._attributes.set(a, b) },
        exists: function(a) {
            if (this.nodeType != W.Element) throw "bad nodeType";
            return this._attributes.exists(a)
        },
        iterator: function() { if (null == this._children) throw "bad nodetype"; return { cur: 0, x: this._children, hasNext: function() { return this.cur < this.x.length }, next: function() { return this.x[this.cur++] } } },
        elementsNamed: function(a) {
            if (null == this._children) throw "bad nodetype";
            return {
                cur: 0,
                x: this._children,
                hasNext: function() { for (var b = this.cur, c = this.x.length; b < c;) { var d = this.x[b]; if (d.nodeType == W.Element && d._nodeName == a) break;
                        b++ } this.cur = b; return b < c },
                next: function() {
                    for (var b = this.cur,
                            c = this.x.length; b < c;) { var d = this.x[b];
                        b++; if (d.nodeType == W.Element && d._nodeName == a) return this.cur = b, d }
                    return null
                }
            }
        },
        firstElement: function() { if (null == this._children) throw "bad nodetype"; for (var a = 0, b = this._children.length; a < b;) { var c = this._children[a]; if (c.nodeType == W.Element) return c;
                a++ } return null },
        addChild: function(a) { if (null == this._children) throw "bad nodetype";
            null != a._parent && N.remove(a._parent._children, a);
            a._parent = this;
            this._children.push(a) },
        __class__: W,
        __properties__: {
            set_nodeValue: "set_nodeValue",
            get_nodeValue: "get_nodeValue",
            set_nodeName: "set_nodeName",
            get_nodeName: "get_nodeName"
        }
    };
    var Dc = function() {};
    g["flambe.util.Disposable"] = Dc;
    Dc.__name__ = ["flambe", "util", "Disposable"];
    Dc.prototype = { __class__: Dc };
    var k = function() { this._flags = 0;
        this.owner = this.next = null };
    g["flambe.Component"] = k;
    k.__name__ = ["flambe", "Component"];
    k.__interfaces__ = [Dc];
    k.prototype = {
        onAdded: function() {},
        onRemoved: function() {},
        onStart: function() {},
        onStop: function() {},
        onUpdate: function() {},
        dispose: function() {
            null != this.owner &&
                this.owner.remove(this)
        },
        get_name: function() { return null },
        __class__: k,
        __properties__: { get_name: "get_name" }
    };
    var Ta = function() { k.call(this);
        this._disposables = [] };
    g["flambe.Disposer"] = Ta;
    Ta.__name__ = ["flambe", "Disposer"];
    Ta.__super__ = k;
    Ta.prototype = l(k.prototype, {
        get_name: function() { return "Disposer_68" },
        add: function(a) { this._disposables.push(a); return this },
        connect0: function(a, b) { this.add(a.connect(b)); return this },
        connect1: function(a, b) { this.add(a.connect(b)); return this },
        onRemoved: function() { this.freeDisposables() },
        dispose: function() { k.prototype.dispose.call(this);
            this.freeDisposables() },
        freeDisposables: function() { var a = this._disposables;
            this._disposables = []; for (var b = 0; b < a.length;) { var c = a[b];++b;
                c.dispose() } },
        __class__: Ta
    });
    var A = function() { this.parent = this.firstChild = this.next = this.firstComponent = null;
        this._compMap = {} };
    g["flambe.Entity"] = A;
    A.__name__ = ["flambe", "Entity"];
    A.__interfaces__ = [Dc];
    A.prototype = {
        add: function(a) {
            null != a.owner && a.owner.remove(a);
            var b = a.get_name(),
                c = this._compMap[b];
            null != c && this.remove(c);
            this._compMap[b] = a;
            b = null;
            for (c = this.firstComponent; null != c;) b = c, c = c.next;
            null != b ? b.next = a : this.firstComponent = a;
            a.owner = this;
            a.next = null;
            a.onAdded();
            return this
        },
        remove: function(a) { for (var b = null, c = this.firstComponent; null != c;) { var d = c.next; if (c == a) return null == b ? this.firstComponent = d : (b.owner = this, b.next = d), delete this._compMap[c.get_name()], 0 != (c._flags & 1) && (c.onStop(), c._flags &= -2), c.onRemoved(), c.owner = null, c.next = null, !0;
                b = c;
                c = d } return !1 },
        getComponent: function(a) { return this._compMap[a] },
        addChild: function(a,
            b) { null == b && (b = !0);
            null != a.parent && a.parent.removeChild(a);
            a.parent = this; if (b) { for (var c = null, d = this.firstChild; null != d;) c = d, d = d.next;
                null != c ? c.next = a : this.firstChild = a } else a.next = this.firstChild, this.firstChild = a; return this },
        removeChild: function(a) { for (var b = null, c = this.firstChild; null != c;) { var d = c.next; if (c == a) { null == b ? this.firstChild = d : b.next = d;
                    c.parent = null;
                    c.next = null; break } b = c;
                c = d } },
        disposeChildren: function() { for (; null != this.firstChild;) this.firstChild.dispose() },
        dispose: function() {
            for (null !=
                this.parent && this.parent.removeChild(this); null != this.firstComponent;) this.firstComponent.dispose();
            this.disposeChildren()
        },
        _internal_getFromParents: function(a, b) { var c = this;
            do { var d = c._compMap[a];
                null != b && !(d instanceof b) && (d = null); if (null != d) return d;
                c = c.parent } while (null != c); return null },
        _internal_getFromChildren: function(a, b) {
            var c = this._compMap[a];
            null != b && !(c instanceof b) && (c = null);
            if (null != c) return c;
            for (c = this.firstChild; null != c;) {
                var d = c._internal_getFromChildren(a, b);
                if (null != d) return d;
                c = c.next
            }
            return null
        },
        __class__: A
    };
    var Ym = function() {};
    g["flambe.util.PackageLog"] = Ym;
    Ym.__name__ = ["flambe", "util", "PackageLog"];
    var tl = function() {};
    g["flambe.platform.Platform"] = tl;
    tl.__name__ = ["flambe", "platform", "Platform"];
    tl.prototype = { __class__: tl };
    var Rc = function() {};
    g["flambe.platform.html.HtmlPlatform"] = Rc;
    Rc.__name__ = ["flambe", "platform", "html", "HtmlPlatform"];
    Rc.__interfaces__ = [tl];
    Rc.prototype = {
        init: function() {
            var a = this;
            la.fixAndroidMath();
            var b = null;
            try { b = window.flambe.canvas } catch (c) {} b.setAttribute("tabindex",
                "0");
            b.style.outlineStyle = "none";
            b.style.webkitTapHighlightColor = "transparent";
            b.setAttribute("moz-opaque", "true");
            this._stage = new Dg(b);
            this._pointer = new zb;
            this._mouse = new Ph(this._pointer, b);
            this._renderer = this.createRenderer(b);
            this.mainLoop = new Vf;
            this.musicPlaying = !1;
            this._canvas = b;
            this._container = b.parentElement;
            this._container.style.overflow = "hidden";
            this._container.style.position = "relative";
            this._container.style.msTouchAction = "none";
            var d = 0,
                e = function(c) {
                    if (!(1E3 > c.timeStamp - d)) {
                        var e = b.getBoundingClientRect(),
                            f = a.getX(c, e),
                            e = a.getY(c, e);
                        switch (c.type) {
                            case "mousedown":
                                c.target == b && (c.preventDefault(), a._mouse.submitDown(f, e, c.button), b.focus()); break;
                            case "mousemove":
                                a._mouse.submitMove(f, e); break;
                            case "mouseup":
                                a._mouse.submitUp(f, e, c.button); break;
                            case "mousewheel":
                            case "DOMMouseScroll":
                                a._mouse.submitScroll(f, e, "mousewheel" == c.type ? c.wheelDelta / 40 : -c.detail) && c.preventDefault() }
                    }
                };
            window.addEventListener("mousedown", e, !1);
            window.addEventListener("mousemove", e, !1);
            window.addEventListener("mouseup", e,
                !1);
            b.addEventListener("mousewheel", e, !1);
            b.addEventListener("DOMMouseScroll", e, !1);
            b.addEventListener("contextmenu", function(a) { a.preventDefault() }, !1);
            var f = "undefined" != typeof window.ontouchstart,
                e = "msMaxTouchPoints" in window.navigator && 1 < window.navigator.msMaxTouchPoints;
            if (f || e) {
                var j = new Qh(this._pointer, f ? 4 : window.navigator.msMaxTouchPoints);
                this._touch = j;
                e = function(b) {
                    var c;
                    c = f ? b.changedTouches : [b];
                    var e = b.target.getBoundingClientRect();
                    d = b.timeStamp;
                    switch (b.type) {
                        case "touchstart":
                        case "MSPointerDown":
                        case "pointerdown":
                            b.preventDefault();
                            la.SHOULD_HIDE_MOBILE_BROWSER && la.hideMobileBrowser();
                            for (b = 0; b < c.length;) { var p = c[b];++b; var va = a.getX(p, e),
                                    h = a.getY(p, e);
                                j.submitDown((f ? p.identifier : p.pointerId) | 0, va, h) }
                            break;
                        case "touchmove":
                        case "MSPointerMove":
                        case "pointermove":
                            b.preventDefault();
                            for (b = 0; b < c.length;) p = c[b], ++b, va = a.getX(p, e), h = a.getY(p, e), j.submitMove((f ? p.identifier : p.pointerId) | 0, va, h);
                            break;
                        case "touchend":
                        case "touchcancel":
                        case "MSPointerUp":
                        case "pointerup":
                            for (b = 0; b < c.length;) p = c[b], ++b, va = a.getX(p, e), h = a.getY(p, e),
                                j.submitUp((f ? p.identifier : p.pointerId) | 0, va, h)
                    }
                };
                f ? (b.addEventListener("touchstart", e, !1), b.addEventListener("touchmove", e, !1), b.addEventListener("touchend", e, !1), b.addEventListener("touchcancel", e, !1)) : (b.addEventListener("MSPointerDown", e, !1), b.addEventListener("MSPointerMove", e, !1), b.addEventListener("MSPointerUp", e, !1))
            } else this._touch = new Rh;
            var p = window.onerror;
            window.onerror = function(a, b, c) { w.uncaughtError.emit(a); return null != p ? p(a, b, c) : !1 };
            var va = la.loadExtension("hidden", window.document);
            null != va.value ? (e = function() { w.hidden.set__(y.field(window.document, va.field)) }, e(null), window.document.addEventListener(va.prefix + "visibilitychange", e, !1)) : (e = function(a) { w.hidden.set__("pagehide" == a.type) }, window.addEventListener("pageshow", e, !1), window.addEventListener("pagehide", e, !1));
            w.hidden.get_changed().connect(function(b) { b || (a._skipFrame = !0) });
            this._skipFrame = !1;
            this._lastUpdate = Date.now();
            var h = la.loadExtension("requestAnimationFrame").value;
            if (null != h) {
                var g = window.performance,
                    i = null !=
                    g && la.polyfill("now", g);
                i ? this._lastUpdate = g.now() : null;
                var k = null,
                    k = function(c) { a.update(i ? g.now() : c);
                        h(k, b) };
                h(k, b)
            } else window.setInterval(function() { a.update(Date.now()) }, 16);
            Eg.info("Initialized HTML platform", ["renderer", this._renderer.get_type()])
        },
        loadAssetPack: function(a) { return (new Ja(this, a)).promise },
        getStage: function() { return this._stage },
        getStorage: function() { if (null == this._storage) { var a = Sh.getLocalStorage();
                this._storage = null != a ? new Th(a) : new Uh } return this._storage },
        getLocale: function() {
            var a =
                window.navigator.language;
            null == a && (a = window.navigator.userLanguage);
            return a
        },
        getTime: function() { return Date.now() / 1E3 },
        update: function(a) { var b = (a - this._lastUpdate) / 1E3;
            this._lastUpdate = a;
            w.hidden._value || (this._skipFrame ? this._skipFrame = !1 : (this.mainLoop.update(b), this.mainLoop.render(this._renderer))) },
        getPointer: function() { return this._pointer },
        getMouse: function() { return this._mouse },
        getTouch: function() { return this._touch },
        getKeyboard: function() {
            var a = this;
            if (null == this._keyboard) {
                this._keyboard =
                    new Sc;
                var b = function(b) { switch (b.type) {
                        case "keydown":
                            a._keyboard.submitDown(b.keyCode) && b.preventDefault(); break;
                        case "keyup":
                            a._keyboard.submitUp(b.keyCode) } };
                this._canvas.addEventListener("keydown", b, !1);
                this._canvas.addEventListener("keyup", b, !1)
            }
            return this._keyboard
        },
        getExternal: function() { null == this._external && (this._external = new Vh); return this._external },
        getRenderer: function() { return this._renderer },
        getX: function(a, b) { return (a.clientX - b.left) * this._stage.get_width() / b.width },
        getY: function(a,
            b) { return (a.clientY - b.top) * this._stage.get_height() / b.height },
        createRenderer: function(a) { try { var b = Zm.getContextWebGL(a, { alpha: !1, depth: !1, failIfMajorPerformanceCaveat: !0 }); if (null != b)
                    if (la.detectSlowDriver(b)) null;
                    else return new Wh(this._stage, b) } catch (c) {} return new Wf(a) },
        __class__: Rc
    };
    var Cb = function(a, b) { this._value = a;
        this._changed = null != b ? new Tc(b) : null };
    g["flambe.util.Value"] = Cb;
    Cb.__name__ = ["flambe", "util", "Value"];
    Cb.prototype = {
        watch: function(a) { a(this._value, this._value); return this.get_changed().connect(a) },
        get__: function() { return this._value },
        set__: function(a) { var b = this._value;
            a != b && (this._value = a, null != this._changed && this._changed.emit(a, b)); return a },
        get_changed: function() { null == this._changed && (this._changed = new Tc); return this._changed },
        __class__: Cb,
        __properties__: { get_changed: "get_changed", set__: "set__", get__: "get__" }
    };
    var Xf = function(a, b) { this._next = null;
        this._signal = a;
        this._listener = b;
        this.stayInList = !0 };
    g["flambe.util.SignalConnection"] = Xf;
    Xf.__name__ = ["flambe", "util", "SignalConnection"];
    Xf.__interfaces__ = [Dc];
    Xf.prototype = { once: function() { this.stayInList = !1; return this }, dispose: function() { null != this._signal && (this._signal.disconnect(this), this._signal = null) }, __class__: Xf };
    var Kb = function(a) { this._head = null != a ? new Xf(this, a) : null;
        this._deferredTasks = null };
    g["flambe.util.SignalBase"] = Kb;
    Kb.__name__ = ["flambe", "util", "SignalBase"];
    Kb.prototype = {
        connectImpl: function(a, b) { var c = this,
                d = new Xf(this, a);
            this._head == Kb.DISPATCHING_SENTINEL ? this.defer(function() { c.listAdd(d, b) }) : this.listAdd(d, b); return d },
        disconnect: function(a) {
            var b =
                this;
            this._head == Kb.DISPATCHING_SENTINEL ? this.defer(function() { b.listRemove(a) }) : this.listRemove(a)
        },
        defer: function(a) { for (var b = null, c = this._deferredTasks; null != c;) b = c, c = c.next;
            a = new ul(a);
            null != b ? b.next = a : this._deferredTasks = a },
        willEmit: function() { var a = this._head;
            this._head = Kb.DISPATCHING_SENTINEL; return a },
        didEmit: function(a) { this._head = a;
            a = this._deferredTasks; for (this._deferredTasks = null; null != a;) a.fn(), a = a.next },
        listAdd: function(a, b) {
            if (b) a._next = this._head, this._head = a;
            else {
                for (var c = null,
                        d = this._head; null != d;) c = d, d = d._next;
                null != c ? c._next = a : this._head = a
            }
        },
        listRemove: function(a) { for (var b = null, c = this._head; null != c;) { if (c == a) { a = c._next;
                    null == b ? this._head = a : b._next = a; break } b = c;
                c = c._next } },
        __class__: Kb
    };
    var Tc = function(a) { Kb.call(this, a) };
    g["flambe.util.Signal2"] = Tc;
    Tc.__name__ = ["flambe", "util", "Signal2"];
    Tc.__super__ = Kb;
    Tc.prototype = l(Kb.prototype, {
        connect: function(a, b) { null == b && (b = !1); return this.connectImpl(a, b) },
        emit: function(a, b) {
            var c = this;
            this._head == Kb.DISPATCHING_SENTINEL ? this.defer(function() {
                c.emitImpl(a,
                    b)
            }) : this.emitImpl(a, b)
        },
        emitImpl: function(a, b) { for (var c = this.willEmit(), d = c; null != d;) d._listener(a, b), d.stayInList || d.dispose(), d = d._next;
            this.didEmit(c) },
        __class__: Tc
    });
    var I = function(a) { Kb.call(this, a) };
    g["flambe.util.Signal1"] = I;
    I.__name__ = ["flambe", "util", "Signal1"];
    I.__super__ = Kb;
    I.prototype = l(Kb.prototype, {
        connect: function(a, b) { null == b && (b = !1); return this.connectImpl(a, b) },
        emit: function(a) { var b = this;
            this._head == Kb.DISPATCHING_SENTINEL ? this.defer(function() { b.emitImpl(a) }) : this.emitImpl(a) },
        emitImpl: function(a) { for (var b = this.willEmit(), c = b; null != c;) c._listener(a), c.stayInList || c.dispose(), c = c._next;
            this.didEmit(b) },
        __class__: I
    });
    var Ca = function(a, b) { this._behavior = null;
        Cb.call(this, a, b) };
    g["flambe.animation.AnimatedFloat"] = Ca;
    Ca.__name__ = ["flambe", "animation", "AnimatedFloat"];
    Ca.__super__ = Cb;
    Ca.prototype = l(Cb.prototype, {
        set__: function(a) { this._behavior = null; return Cb.prototype.set__.call(this, a) },
        update: function(a) {
            null != this._behavior && (Cb.prototype.set__.call(this, this._behavior.update(a)),
                this._behavior.isComplete() && (this._behavior = null))
        },
        animateTo: function(a, b, c) { this.set_behavior(new Fg(this._value, a, b, c)) },
        set_behavior: function(a) { this._behavior = a;
            this.update(0); return a },
        __class__: Ca,
        __properties__: l(Cb.prototype.__properties__, { set_behavior: "set_behavior" })
    });
    var w = function() {};
    g["flambe.System"] = w;
    w.__name__ = ["flambe", "System"];
    w.init = function() { w._calledInit || (w._platform.init(), w._calledInit = !0) };
    var Eg = function() {};
    g["flambe.Log"] = Eg;
    Eg.__name__ = ["flambe", "Log"];
    Eg.info =
        function() { null };
    Eg.__super__ = Ym;
    Eg.prototype = l(Ym.prototype, { __class__: Eg });
    var Yf = function(a) { null == a && (a = 1);
        this._realDt = 0;
        k.call(this);
        this.scale = new Ca(a) };
    g["flambe.SpeedAdjuster"] = Yf;
    Yf.__name__ = ["flambe", "SpeedAdjuster"];
    Yf.__super__ = k;
    Yf.prototype = l(k.prototype, { get_name: function() { return "SpeedAdjuster_63" }, onUpdate: function(a) { 0 < this._realDt && (a = this._realDt, this._realDt = 0);
            this.scale.update(a) }, __class__: Yf });
    var Zf = function() {};
    g["flambe.animation.Behavior"] = Zf;
    Zf.__name__ = ["flambe", "animation",
        "Behavior"
    ];
    Zf.prototype = { __class__: Zf };
    var E = function() {};
    g["flambe.animation.Ease"] = E;
    E.__name__ = ["flambe", "animation", "Ease"];
    E.linear = function(a) { return a };
    E.quadIn = function(a) { return a * a };
    E.quadOut = function(a) { return a * (2 - a) };
    E.quadInOut = function(a) { return 0.5 >= a ? 2 * a * a : 1 - 2 * --a * a };
    E.cubeOut = function(a) { return 1 + --a * a * a };
    E.quintIn = function(a) { return a * a * a * a * a };
    E.quintOut = function(a) { return (a -= 1) * a * a * a * a + 1 };
    E.quintInOut = function(a) { return 1 > (a *= 2) ? a * a * a * a * a / 2 : ((a -= 2) * a * a * a * a + 2) / 2 };
    E.sineInOut = function(a) {
        return 0.5 -
            Math.cos(3.141592653589793 * a) / 2
    };
    E.bounceOut = function(a) { return 0.36363636363636365 > a ? 7.5625 * a * a : 0.7272727272727273 > a ? 7.5625 * (a - 0.5454545454545454) * (a - 0.5454545454545454) + 0.75 : 0.9090909090909091 > a ? 7.5625 * (a - 0.8181818181818182) * (a - 0.8181818181818182) + 0.9375 : 7.5625 * (a - 0.9545454545454546) * (a - 0.9545454545454546) + 0.984375 };
    E.backOut = function(a) { return 1 - --a * a * (-2.70158 * a - 1.70158) };
    E.backInOut = function(a) { a *= 2; if (1 > a) return a * a * (2.70158 * a - 1.70158) / 2;
        a -= 2; return (1 - a * a * (-2.70158 * a - 1.70158)) / 2 + 0.5 };
    E.elasticOut =
        function(a) { return 1 * Math.pow(2, -10 * a) * Math.sin(6.283185307179586 * (a - 0.06366197723675814 * Math.asin(1)) / 0.4) + 1 };
    var Ve = function(a, b) { this.base = a;
        this.strength = b };
    g["flambe.animation.Jitter"] = Ve;
    Ve.__name__ = ["flambe", "animation", "Jitter"];
    Ve.__interfaces__ = [Zf];
    Ve.prototype = { update: function() { return this.base + 2 * Math.random() * this.strength - this.strength }, isComplete: function() { return !1 }, __class__: Ve };
    var db = function(a, b, c, d, e) {
        null == e && (e = 0);
        null == d && (d = 0);
        null == c && (c = 1);
        this.start = a;
        this.end = b;
        this.cycles =
            d;
        this.speed = new Ca(c);
        this._count = 1.5707963267948966 + e * (3.141592653589793 / c);
        this._distance = 0.5 * (a - b);
        this._center = b + this._distance
    };
    g["flambe.animation.Sine"] = db;
    db.__name__ = ["flambe", "animation", "Sine"];
    db.__interfaces__ = [Zf];
    db.prototype = {
        update: function(a) { this.speed.update(a);
            this._count += a * (3.141592653589793 / this.speed._value); return this._center + Math.sin(this._count) * this._distance },
        isComplete: function() { return 0 < this.cycles && 0.5 * ((this._count - 1.5707963267948966) / 3.141592653589793) >= this.cycles },
        __class__: db
    };
    var Fg = function(a, b, c, d) { this._from = a;
        this._to = b;
        this._duration = c;
        this.elapsed = 0;
        this._easing = null != d ? d : E.linear };
    g["flambe.animation.Tween"] = Fg;
    Fg.__name__ = ["flambe", "animation", "Tween"];
    Fg.__interfaces__ = [Zf];
    Fg.prototype = { update: function(a) { this.elapsed += a; return this.elapsed >= this._duration ? this._to : this._from + (this._to - this._from) * this._easing(this.elapsed / this._duration) }, isComplete: function() { return this.elapsed >= this._duration }, __class__: Fg };
    var xf = function() {};
    g["flambe.asset.Asset"] =
        xf;
    xf.__name__ = ["flambe", "asset", "Asset"];
    xf.__interfaces__ = [Dc];
    xf.prototype = { __class__: xf };
    var J = g["flambe.asset.AssetFormat"] = { __ename__: ["flambe", "asset", "AssetFormat"], __constructs__: "WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",") };
    J.WEBP = ["WEBP", 0];
    J.WEBP.toString = r;
    J.WEBP.__enum__ = J;
    J.JXR = ["JXR", 1];
    J.JXR.toString = r;
    J.JXR.__enum__ = J;
    J.PNG = ["PNG", 2];
    J.PNG.toString = r;
    J.PNG.__enum__ = J;
    J.JPG = ["JPG", 3];
    J.JPG.toString = r;
    J.JPG.__enum__ = J;
    J.GIF = ["GIF", 4];
    J.GIF.toString = r;
    J.GIF.__enum__ =
        J;
    J.DDS = ["DDS", 5];
    J.DDS.toString = r;
    J.DDS.__enum__ = J;
    J.PVR = ["PVR", 6];
    J.PVR.toString = r;
    J.PVR.__enum__ = J;
    J.PKM = ["PKM", 7];
    J.PKM.toString = r;
    J.PKM.__enum__ = J;
    J.MP3 = ["MP3", 8];
    J.MP3.toString = r;
    J.MP3.__enum__ = J;
    J.M4A = ["M4A", 9];
    J.M4A.toString = r;
    J.M4A.__enum__ = J;
    J.OPUS = ["OPUS", 10];
    J.OPUS.toString = r;
    J.OPUS.__enum__ = J;
    J.OGG = ["OGG", 11];
    J.OGG.toString = r;
    J.OGG.__enum__ = J;
    J.WAV = ["WAV", 12];
    J.WAV.toString = r;
    J.WAV.__enum__ = J;
    J.Data = ["Data", 13];
    J.Data.toString = r;
    J.Data.__enum__ = J;
    var vl = function(a, b, c, d) {
        this.name = a;
        this.url = b;
        this.format = c;
        this.bytes = d
    };
    g["flambe.asset.AssetEntry"] = vl;
    vl.__name__ = ["flambe", "asset", "AssetEntry"];
    vl.prototype = { __class__: vl };
    var Xh = function() {};
    g["flambe.asset.AssetPack"] = Xh;
    Xh.__name__ = ["flambe", "asset", "AssetPack"];
    Xh.__interfaces__ = [Dc];
    Xh.prototype = { __class__: Xh };
    var Yh = function() {};
    g["flambe.asset.File"] = Yh;
    Yh.__name__ = ["flambe", "asset", "File"];
    Yh.__interfaces__ = [xf];
    Yh.prototype = { __class__: Yh };
    var pa = function() { this._localBase = this._remoteBase = null;
        this._entries = [] };
    g["flambe.asset.Manifest"] =
        pa;
    pa.__name__ = ["flambe", "asset", "Manifest"];
    pa.fromAssets = function(a, b) { null == b && (b = !0); var c = y.field(wl.getType(pa).assets[0], a); if (null == c) { if (b) throw kb.withFields("Missing asset pack", ["name", a]); return null } var d = new pa;
        d.set_localBase("assets"); for (var e = 0; e < c.length;) { var f = c[e];++e; var j = f.name,
                p = a + "/" + j + "?v=" + u.string(f.md5),
                va = pa.inferFormat(j);
            va != J.Data && (j = kb.removeFileExtension(j));
            d.add(j, p, f.bytes, va) } return d };
    pa.fromAssetsLocalized = function(a, b, c) {
        null == c && (c = !0);
        null == b && (b = w._platform.getLocale());
        if (null != b)
            for (b = b.split("-"); 0 < b.length;) { var d = pa.fromAssets(a + "_" + b.join("-"), !1); if (null != d) return d;
                b.pop() }
        return pa.fromAssets(a, c)
    };
    pa.exists = function(a) { return Object.prototype.hasOwnProperty.call(wl.getType(pa).assets[0], a) };
    pa.inferFormat = function(a) {
        a = kb.getUrlExtension(a);
        if (null != a) switch (a.toLowerCase()) {
            case "gif":
                return J.GIF;
            case "jpg":
            case "jpeg":
                return J.JPG;
            case "jxr":
            case "wdp":
                return J.JXR;
            case "png":
                return J.PNG;
            case "webp":
                return J.WEBP;
            case "dds":
                return J.DDS;
            case "pvr":
                return J.PVR;
            case "pkm":
                return J.PKM;
            case "m4a":
                return J.M4A;
            case "mp3":
                return J.MP3;
            case "ogg":
                return J.OGG;
            case "opus":
                return J.OPUS;
            case "wav":
                return J.WAV
        } else null;
        return J.Data
    };
    pa.prototype = {
        add: function(a, b, c, d) { null == c && (c = 0);
            null == d && (d = pa.inferFormat(b));
            a = new vl(a, b, d, c);
            this._entries.push(a); return a },
        iterator: function() { return N.iter(this._entries) },
        getFullURL: function(a) {
            var b;
            b = null != this.get_remoteBase() && pa._supportsCrossOrigin ? this.get_remoteBase() : this.get_localBase();
            return null != b ? kb.joinPath(b,
                a.url) : a.url
        },
        get_localBase: function() { return this._localBase },
        set_localBase: function(a) { null != a && xl.that(!ka.startsWith(a, "http://") && !ka.startsWith(a, "https://"), "localBase must be a path on the same domain, NOT starting with http(s)://", null); return this._localBase = a },
        get_remoteBase: function() { return this._remoteBase },
        set_remoteBase: function(a) {
            null != a && xl.that(ka.startsWith(a, "http://") || ka.startsWith(a, "https://"), "remoteBase must be on a remote domain, starting with http(s)://", null);
            return this._remoteBase =
                a
        },
        __class__: pa,
        __properties__: { set_remoteBase: "set_remoteBase", get_remoteBase: "get_remoteBase", set_localBase: "set_localBase", get_localBase: "get_localBase" }
    };
    var Ma = g["flambe.display.BlendMode"] = { __ename__: ["flambe", "display", "BlendMode"], __constructs__: "Normal,Add,Multiply,Screen,Mask,Copy".split(",") };
    Ma.Normal = ["Normal", 0];
    Ma.Normal.toString = r;
    Ma.Normal.__enum__ = Ma;
    Ma.Add = ["Add", 1];
    Ma.Add.toString = r;
    Ma.Add.__enum__ = Ma;
    Ma.Multiply = ["Multiply", 2];
    Ma.Multiply.toString = r;
    Ma.Multiply.__enum__ = Ma;
    Ma.Screen = ["Screen", 3];
    Ma.Screen.toString = r;
    Ma.Screen.__enum__ = Ma;
    Ma.Mask = ["Mask", 4];
    Ma.Mask.toString = r;
    Ma.Mask.__enum__ = Ma;
    Ma.Copy = ["Copy", 5];
    Ma.Copy.toString = r;
    Ma.Copy.__enum__ = Ma;
    var ob = function(a, b) { null == b && (b = 0);
        null == a && (a = 0);
        this.x = a;
        this.y = b };
    g["flambe.math.Point"] = ob;
    ob.__name__ = ["flambe", "math", "Point"];
    ob.prototype = { set: function(a, b) { this.x = a;
            this.y = b }, __class__: ob };
    var s = function() {
        this._viewMatrixUpdateCount = this._parentViewMatrixUpdateCount = 0;
        this.blendMode = this.scissor = this._viewMatrix = null;
        var a = this;
        k.call(this);
        this._flags |= 54;
        this._localMatrix = new Uc;
        var b = function() { a._flags |= 24 };
        this.x = new Ca(0, b);
        this.y = new Ca(0, b);
        this.rotation = new Ca(0, b);
        this.scaleX = new Ca(1, b);
        this.scaleY = new Ca(1, b);
        this.anchorX = new Ca(0, b);
        this.anchorY = new Ca(0, b);
        this.alpha = new Ca(1)
    };
    g["flambe.display.Sprite"] = s;
    s.__name__ = ["flambe", "display", "Sprite"];
    s.hitTest = function(a, b, c) {
        var d = a._compMap.Sprite_19;
        if (null != d) {
            if (6 != (d._flags & 6)) return null;
            d.getLocalMatrix().inverseTransform(b, c, s._scratchPoint) &&
                (b = s._scratchPoint.x, c = s._scratchPoint.y);
            var e = d.scissor;
            if (null != e && !e.contains(b, c)) return null
        }
        a = s.hitTestBackwards(a.firstChild, b, c);
        return null != a ? a : null != d && d.containsLocal(b, c) ? d : null
    };
    s.getBounds = function(a, b) { null == b && (b = new Ab);
        b.set(1.79769313486231E308, 1.79769313486231E308, -1.79769313486231E308, -1.79769313486231E308);
        s.getBoundsImpl(a, null, b);
        b.width -= b.x;
        b.height -= b.y; return b };
    s.render = function(a, b) {
        var c = a._compMap.Sprite_19;
        if (null != c) {
            var d = c.alpha._value;
            if (0 == (c._flags & 2) || 0 >=
                d) return;
            b.save();
            1 > d && b.multiplyAlpha(d);
            null != c.blendMode && b.setBlendMode(c.blendMode);
            var d = c.getLocalMatrix(),
                e = d.m02,
                f = d.m12;
            0 != (c._flags & 32) && (e = Math.round(e), f = Math.round(f));
            b.transform(d.m00, d.m10, d.m01, d.m11, e, f);
            d = c.scissor;
            null != d && b.applyScissor(d.x, d.y, d.width, d.height);
            c.draw(b)
        }
        d = a._compMap.Director_69;
        if (null != d) { d = d.occludedScenes; for (e = 0; e < d.length;) f = d[e], ++e, s.render(f, b) }
        for (d = a.firstChild; null != d;) e = d.next, s.render(d, b), d = e;
        null != c && b.restore()
    };
    s.hitTestBackwards = function(a,
        b, c) { if (null != a) { var d = s.hitTestBackwards(a.next, b, c); return null != d ? d : s.hitTest(a, b, c) } return null };
    s.getBoundsImpl = function(a, b, c) {
        var d = a._compMap.Sprite_19;
        if (null != d) { var b = null != b ? Uc.multiply(b, d.getLocalMatrix()) : d.getLocalMatrix(),
                e = d.getNaturalWidth(),
                d = d.getNaturalHeight();
            0 < e && 0 < d && (s.extendRect(b, 0, 0, c), s.extendRect(b, e, 0, c), s.extendRect(b, e, d, c), s.extendRect(b, 0, d, c)) } e = a._compMap.Director_69;
        if (null != e)
            for (var e = e.occludedScenes, d = 0, f = e.length; d < f;) s.getBoundsImpl(e[d], b, c), ++d;
        for (a =
            a.firstChild; null != a;) e = a.next, s.getBoundsImpl(a, b, c), a = e
    };
    s.extendRect = function(a, b, c, d) { a = a.transform(b, c, s._scratchPoint);
        b = a.x;
        c = a.y;
        b < d.x && (d.x = b);
        c < d.y && (d.y = c);
        b > d.width && (d.width = b);
        c > d.height && (d.height = c) };
    s.__super__ = k;
    s.prototype = l(k.prototype, {
        get_name: function() { return "Sprite_19" },
        getNaturalWidth: function() { return 0 },
        getNaturalHeight: function() { return 0 },
        containsLocal: function(a, b) { return 0 <= a && a < this.getNaturalWidth() && 0 <= b && b < this.getNaturalHeight() },
        getLocalMatrix: function() {
            0 != (this._flags &
                8) && (this._flags &= -9, this._localMatrix.compose(this.x._value, this.y._value, this.scaleX._value, this.scaleY._value, 3.141592653589793 * this.rotation._value / 180), this._localMatrix.translate(-this.anchorX._value, -this.anchorY._value));
            return this._localMatrix
        },
        getViewMatrix: function() {
            if (this.isViewMatrixDirty()) {
                var a = this.getParentSprite();
                this._viewMatrix = null != a ? Uc.multiply(a.getViewMatrix(), this.getLocalMatrix(), this._viewMatrix) : this.getLocalMatrix().clone(this._viewMatrix);
                this._flags &= -17;
                null !=
                    a && (this._parentViewMatrixUpdateCount = a._viewMatrixUpdateCount);
                ++this._viewMatrixUpdateCount
            }
            return this._viewMatrix
        },
        setAnchor: function(a, b) { this.anchorX.set__(a);
            this.anchorY.set__(b); return this },
        centerAnchor: function() { this.anchorX.set__(this.getNaturalWidth() / 2);
            this.anchorY.set__(this.getNaturalHeight() / 2); return this },
        setXY: function(a, b) { this.x.set__(a);
            this.y.set__(b); return this },
        setAlpha: function(a) { this.alpha.set__(a); return this },
        setRotation: function(a) { this.rotation.set__(a); return this },
        setScale: function(a) { this.scaleX.set__(a);
            this.scaleY.set__(a); return this },
        setScaleXY: function(a, b) { this.scaleX.set__(a);
            this.scaleY.set__(b); return this },
        disablePointer: function() { this.set_pointerEnabled(!1); return this },
        onAdded: function() { 0 != (this._flags & 64) && this.connectHover() },
        onRemoved: function() { null != this._hoverConnection && (this._hoverConnection.dispose(), this._hoverConnection = null) },
        onUpdate: function(a) {
            this.x.update(a);
            this.y.update(a);
            this.rotation.update(a);
            this.scaleX.update(a);
            this.scaleY.update(a);
            this.alpha.update(a);
            this.anchorX.update(a);
            this.anchorY.update(a)
        },
        draw: function() {},
        isViewMatrixDirty: function() { if (0 != (this._flags & 16)) return !0; var a = this.getParentSprite(); return null == a ? !1 : this._parentViewMatrixUpdateCount != a._viewMatrixUpdateCount || a.isViewMatrixDirty() },
        getParentSprite: function() { if (null == this.owner) return null; for (var a = this.owner.parent; null != a;) { var b = a._compMap.Sprite_19; if (null != b) return b;
                a = a.parent } return null },
        get_pointerDown: function() {
            null == this._pointerDown && (this._pointerDown =
                new I);
            return this._pointerDown
        },
        get_pointerUp: function() { null == this._pointerUp && (this._pointerUp = new I); return this._pointerUp },
        get_pointerIn: function() { null == this._pointerIn && (this._pointerIn = new I); return this._pointerIn },
        connectHover: function() {
            var a = this;
            null == this._hoverConnection && (this._hoverConnection = w._platform.getPointer().move.connect(function(b) {
                for (var c = b.hit; null != c;) { if (c == a) return;
                    c = c.getParentSprite() } null != a._pointerOut && 0 != (a._flags & 64) && a._pointerOut.emit(b);
                a._flags &= -65;
                a._hoverConnection.dispose();
                a._hoverConnection = null
            }))
        },
        set_visible: function(a) { this._flags = Zh.set(this._flags, 2, a); return a },
        set_pointerEnabled: function(a) { this._flags = Zh.set(this._flags, 4, a); return a },
        set_pixelSnapping: function(a) { this._flags = Zh.set(this._flags, 32, a); return a },
        onPointerDown: function(a) { this.onHover(a);
            null != this._pointerDown && this._pointerDown.emit(a) },
        onPointerMove: function(a) { this.onHover(a);
            null != this._pointerMove && this._pointerMove.emit(a) },
        onHover: function(a) {
            if (0 == (this._flags & 64) && (this._flags |= 64,
                    null != this._pointerIn || null != this._pointerOut)) null != this._pointerIn && this._pointerIn.emit(a), this.connectHover()
        },
        onPointerUp: function(a) { switch (a.source[1]) {
                case 1:
                    null != this._pointerOut && 0 != (this._flags & 64) && this._pointerOut.emit(a), this._flags &= -65, null != this._hoverConnection && (this._hoverConnection.dispose(), this._hoverConnection = null) } null != this._pointerUp && this._pointerUp.emit(a) },
        __class__: s,
        __properties__: l(k.prototype.__properties__, {
            set_pixelSnapping: "set_pixelSnapping",
            set_pointerEnabled: "set_pointerEnabled",
            set_visible: "set_visible",
            get_pointerIn: "get_pointerIn",
            get_pointerUp: "get_pointerUp",
            get_pointerDown: "get_pointerDown"
        })
    });
    var wb = function(a, b, c) { s.call(this);
        this.color = a;
        this.width = new Ca(b);
        this.height = new Ca(c) };
    g["flambe.display.FillSprite"] = wb;
    wb.__name__ = ["flambe", "display", "FillSprite"];
    wb.__super__ = s;
    wb.prototype = l(s.prototype, {
        draw: function(a) { a.fillRect(this.color, 0, 0, this.width._value, this.height._value) },
        getNaturalWidth: function() { return this.width._value },
        getNaturalHeight: function() { return this.height._value },
        setSize: function(a, b) { this.width.set__(a);
            this.height.set__(b); return this },
        onUpdate: function(a) { s.prototype.onUpdate.call(this, a);
            this.width.update(a);
            this.height.update(a) },
        __class__: wb
    });
    var $h = function(a) { this._kernings = null;
        this.xOffset = this.yOffset = this.xAdvance = 0;
        this.page = null;
        this.x = this.y = this.width = this.height = 0;
        this.charCode = a };
    g["flambe.display.Glyph"] = $h;
    $h.__name__ = ["flambe", "display", "Glyph"];
    $h.prototype = {
        draw: function(a, b, c) {
            0 < this.width && a.drawSubTexture(this.page, b + this.xOffset,
                c + this.yOffset, this.x, this.y, this.width, this.height)
        },
        getKerning: function(a) { return null != this._kernings ? u["int"](this._kernings.get(a)) : 0 },
        setKerning: function(a, b) { null == this._kernings && (this._kernings = new Ec);
            this._kernings.set(a, b) },
        __class__: $h
    };
    var yf = function(a, b) { this.name = b;
        this._pack = a;
        this._file = a.getFile(b + ".fnt");
        this.reload() };
    g["flambe.display.Font"] = yf;
    yf.__name__ = ["flambe", "display", "Font"];
    yf.prototype = {
        layoutText: function(a, b, c, d, e) {
            null == e && (e = 0);
            null == d && (d = 0);
            null == c && (c = 0);
            null ==
                b && (b = Z.Left);
            return new zf(this, a, b, c, d, e)
        },
        reload: function() {
            this._glyphs = new Ec;
            this._glyphs.set(yf.NEWLINE.charCode, yf.NEWLINE);
            for (var a = new $f(this._file.toString()), b = new Ec, c = this.name.lastIndexOf("/"), c = 0 <= c ? N.substr(this.name, 0, c + 1) : "", d = a.keywords(); d.hasNext();) switch (d.next()) {
                case "info":
                    for (var e = a.pairs(); e.hasNext();) { var f = e.next(); switch (f.key) {
                            case "size":
                                this.size = f.getInt() } }
                    break;
                case "common":
                    for (e = a.pairs(); e.hasNext();) switch (f = e.next(), f.key) {
                        case "lineHeight":
                            this.lineHeight =
                                f.getInt()
                    }
                    break;
                case "page":
                    for (var e = 0, f = null, j = a.pairs(); j.hasNext();) { var p = j.next(); switch (p.key) {
                            case "id":
                                e = p.getInt(); break;
                            case "file":
                                f = p.getString() } } f = this._pack.getTexture(c + kb.removeFileExtension(f));
                    b.set(e, f);
                    break;
                case "char":
                    e = null;
                    for (f = a.pairs(); f.hasNext();) switch (j = f.next(), j.key) {
                        case "id":
                            e = new $h(j.getInt());
                            break;
                        case "x":
                            e.x = j.getInt();
                            break;
                        case "y":
                            e.y = j.getInt();
                            break;
                        case "width":
                            e.width = j.getInt();
                            break;
                        case "height":
                            e.height = j.getInt();
                            break;
                        case "page":
                            j = j.getInt();
                            e.page = b.get(j);
                            break;
                        case "xoffset":
                            e.xOffset = j.getInt();
                            break;
                        case "yoffset":
                            e.yOffset = j.getInt();
                            break;
                        case "xadvance":
                            e.xAdvance = j.getInt()
                    }
                    this._glyphs.set(e.charCode, e);
                    break;
                case "kerning":
                    e = null;
                    j = f = 0;
                    for (p = a.pairs(); p.hasNext();) { var va = p.next(); switch (va.key) {
                            case "first":
                                e = this._glyphs.get(va.getInt()); break;
                            case "second":
                                f = va.getInt(); break;
                            case "amount":
                                j = va.getInt() } } null != e && 0 != j && e.setKerning(f, j)
            }
        },
        __class__: yf
    };
    var Z = g["flambe.display.TextAlign"] = {
        __ename__: ["flambe", "display", "TextAlign"],
        __constructs__: ["Left", "Center", "Right"]
    };
    Z.Left = ["Left", 0];
    Z.Left.toString = r;
    Z.Left.__enum__ = Z;
    Z.Center = ["Center", 1];
    Z.Center.toString = r;
    Z.Center.__enum__ = Z;
    Z.Right = ["Right", 2];
    Z.Right.toString = r;
    Z.Right.__enum__ = Z;
    var zf = function(a, b, c, d, e, f) {
        this.lines = 0;
        var j = this;
        this._font = a;
        this._glyphs = [];
        this._offsets = [];
        this._lineOffset = Math.round(a.lineHeight + f);
        this.bounds = new Ab;
        for (var p = [], f = b.length, va = 0; va < f;) { var h = va++,
                h = b.charCodeAt(h),
                h = a._glyphs.get(h);
            null != h ? this._glyphs.push(h) : null }
        for (var b = -1, g = 0, i = 0, a = a._glyphs.get(10), f = function() { j.bounds.width = Za.max(j.bounds.width, g);
                j.bounds.height += i;
                p[j.lines] = g;
                i = g = 0;++j.lines }, va = 0; va < this._glyphs.length;) {
            h = this._glyphs[va];
            this._offsets[va] = Math.round(g);
            var k = 0 < d && g + h.width > d;
            k || h == a ? (k && (0 <= b ? (this._glyphs[b] = a, g = this._offsets[b], va = b) : this._glyphs.splice(va, 0, a)), b = -1, i = this._lineOffset, f()) : (32 == h.charCode && (b = va), g += h.xAdvance + e, i = Za.max(i, h.height + h.yOffset), va + 1 < this._glyphs.length && (g += h.getKerning(this._glyphs[va + 1].charCode)));
            ++va
        }
        f();
        e = 0;
        a = zf.getAlignOffset(c, p[0], d);
        b = 1.79769313486231E308;
        f = -1.79769313486231E308;
        h = va = 0;
        for (k = this._glyphs.length; h < k;) { var l = this._glyphs[h];
            10 == l.charCode && (e += this._lineOffset, ++va, a = zf.getAlignOffset(c, p[va], d));
            this._offsets[h] += a; var m = e + l.yOffset;
            b < m || (b = m);
            f = Za.max(f, m + l.height);++h } this.bounds.x = zf.getAlignOffset(c, this.bounds.width, d);
        this.bounds.y = b;
        this.bounds.height = f - b
    };
    g["flambe.display.TextLayout"] = zf;
    zf.__name__ = ["flambe", "display", "TextLayout"];
    zf.getAlignOffset = function(a,
        b, c) { switch (a[1]) {
            case 0:
                return 0;
            case 2:
                return c - b;
            case 1:
                return Math.round((c - b) / 2) } };
    zf.prototype = { draw: function(a) { for (var b = 0, c = 0, d = this._glyphs.length; c < d;) { var e = this._glyphs[c];
                10 == e.charCode ? b += this._lineOffset : e.draw(a, this._offsets[c], b);++c } }, __class__: zf };
    var $f = function(a) { this._configText = a;
        this._keywordPattern = new Qc("([A-Za-z]+)(.*)", "");
        this._pairPattern = new Qc('([A-Za-z]+)=("[^"]*"|[^\\s]+)', "") };
    g["flambe.display._Font.ConfigParser"] = $f;
    $f.__name__ = ["flambe", "display", "_Font",
        "ConfigParser"
    ];
    $f.advance = function(a, b) { var c = b.matchedPos(); return N.substr(a, c.pos + c.len, a.length) };
    $f.prototype = {
        keywords: function() { var a = this,
                b = this._configText; return { next: function() { b = $f.advance(b, a._keywordPattern);
                    a._pairText = a._keywordPattern.matched(2); return a._keywordPattern.matched(1) }, hasNext: function() { return a._keywordPattern.match(b) } } },
        pairs: function() {
            var a = this,
                b = this._pairText;
            return {
                next: function() { b = $f.advance(b, a._pairPattern); return new yl(a._pairPattern.matched(1), a._pairPattern.matched(2)) },
                hasNext: function() { return a._pairPattern.match(b) }
            }
        },
        __class__: $f
    };
    var yl = function(a, b) { this.key = a;
        this._value = b };
    g["flambe.display._Font.ConfigPair"] = yl;
    yl.__name__ = ["flambe", "display", "_Font", "ConfigPair"];
    yl.prototype = { getInt: function() { return u.parseInt(this._value) }, getString: function() { return 34 != this._value.charCodeAt(0) ? null : N.substr(this._value, 1, this._value.length - 2) }, __class__: yl };
    var zl = function() {};
    g["flambe.display.Graphics"] = zl;
    zl.__name__ = ["flambe", "display", "Graphics"];
    zl.prototype = { __class__: zl };
    var V = function(a) { s.call(this);
        this.texture = a };
    g["flambe.display.ImageSprite"] = V;
    V.__name__ = ["flambe", "display", "ImageSprite"];
    V.__super__ = s;
    V.prototype = l(s.prototype, { draw: function(a) { null != this.texture && a.drawTexture(this.texture, 0, 0) }, getNaturalWidth: function() { return null != this.texture ? this.texture.get_width() : 0 }, getNaturalHeight: function() { return null != this.texture ? this.texture.get_height() : 0 }, __class__: V });
    var We = g["flambe.display.Orientation"] = {
        __ename__: ["flambe", "display",
            "Orientation"
        ],
        __constructs__: ["Portrait", "Landscape"]
    };
    We.Portrait = ["Portrait", 0];
    We.Portrait.toString = r;
    We.Portrait.__enum__ = We;
    We.Landscape = ["Landscape", 1];
    We.Landscape.toString = r;
    We.Landscape.__enum__ = We;
    var ai = function() {};
    g["flambe.display.Texture"] = ai;
    ai.__name__ = ["flambe", "display", "Texture"];
    ai.__interfaces__ = [xf];
    ai.prototype = { __class__: ai };
    var $m = function() {};
    g["flambe.display.SubTexture"] = $m;
    $m.__name__ = ["flambe", "display", "SubTexture"];
    $m.__interfaces__ = [ai];
    var gb = function(a, b) {
        null ==
            b && (b = "");
        this._layout = null;
        var c = this;
        s.call(this);
        this._font = a;
        this._text = b;
        this._align = Z.Left;
        this._flags |= 128;
        var d = function() { c._flags |= 128 };
        this.wrapWidth = new Ca(0, d);
        this.letterSpacing = new Ca(0, d);
        this.lineSpacing = new Ca(0, d)
    };
    g["flambe.display.TextSprite"] = gb;
    gb.__name__ = ["flambe", "display", "TextSprite"];
    gb.__super__ = s;
    gb.prototype = l(s.prototype, {
        draw: function(a) { this.updateLayout();
            this._layout.draw(a) },
        getNaturalWidth: function() {
            this.updateLayout();
            return 0 < this.wrapWidth._value ? this.wrapWidth._value :
                this._layout.bounds.width
        },
        getNaturalHeight: function() { this.updateLayout(); var a = this._layout.lines * (this._font.lineHeight + this.lineSpacing._value),
                b = this._layout.bounds.height; return a > b ? a : b },
        containsLocal: function(a, b) { this.updateLayout(); return this._layout.bounds.contains(a, b) },
        setWrapWidth: function(a) { this.wrapWidth.set__(a); return this },
        setAlign: function(a) { this.set_align(a); return this },
        set_text: function(a) { a != this._text && (this._text = a, this._flags |= 128); return a },
        set_font: function(a) {
            a != this._font &&
                (this._font = a, this._flags |= 128);
            return a
        },
        set_align: function(a) { a != this._align && (this._align = a, this._flags |= 128); return a },
        updateLayout: function() { 0 != (this._flags & 128) && (this._flags &= -129, this._layout = this._font.layoutText(this._text, this._align, this.wrapWidth._value, this.letterSpacing._value, this.lineSpacing._value)) },
        onUpdate: function(a) { s.prototype.onUpdate.call(this, a);
            this.wrapWidth.update(a);
            this.letterSpacing.update(a);
            this.lineSpacing.update(a) },
        __class__: gb,
        __properties__: l(s.prototype.__properties__, { set_align: "set_align", set_font: "set_font", set_text: "set_text" })
    });
    var i = g["flambe.input.Key"] = { __ename__: ["flambe", "input", "Key"], __constructs__: "A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",") };
    i.A = ["A", 0];
    i.A.toString = r;
    i.A.__enum__ = i;
    i.B = ["B", 1];
    i.B.toString = r;
    i.B.__enum__ = i;
    i.C = ["C", 2];
    i.C.toString = r;
    i.C.__enum__ = i;
    i.D = ["D", 3];
    i.D.toString = r;
    i.D.__enum__ = i;
    i.E = ["E", 4];
    i.E.toString = r;
    i.E.__enum__ = i;
    i.F = ["F", 5];
    i.F.toString = r;
    i.F.__enum__ = i;
    i.G = ["G", 6];
    i.G.toString = r;
    i.G.__enum__ = i;
    i.H = ["H", 7];
    i.H.toString = r;
    i.H.__enum__ = i;
    i.I = ["I", 8];
    i.I.toString = r;
    i.I.__enum__ = i;
    i.J = ["J", 9];
    i.J.toString = r;
    i.J.__enum__ = i;
    i.K = ["K", 10];
    i.K.toString = r;
    i.K.__enum__ = i;
    i.L = ["L", 11];
    i.L.toString = r;
    i.L.__enum__ =
        i;
    i.M = ["M", 12];
    i.M.toString = r;
    i.M.__enum__ = i;
    i.N = ["N", 13];
    i.N.toString = r;
    i.N.__enum__ = i;
    i.O = ["O", 14];
    i.O.toString = r;
    i.O.__enum__ = i;
    i.P = ["P", 15];
    i.P.toString = r;
    i.P.__enum__ = i;
    i.Q = ["Q", 16];
    i.Q.toString = r;
    i.Q.__enum__ = i;
    i.R = ["R", 17];
    i.R.toString = r;
    i.R.__enum__ = i;
    i.S = ["S", 18];
    i.S.toString = r;
    i.S.__enum__ = i;
    i.T = ["T", 19];
    i.T.toString = r;
    i.T.__enum__ = i;
    i.U = ["U", 20];
    i.U.toString = r;
    i.U.__enum__ = i;
    i.V = ["V", 21];
    i.V.toString = r;
    i.V.__enum__ = i;
    i.W = ["W", 22];
    i.W.toString = r;
    i.W.__enum__ = i;
    i.X = ["X", 23];
    i.X.toString =
        r;
    i.X.__enum__ = i;
    i.Y = ["Y", 24];
    i.Y.toString = r;
    i.Y.__enum__ = i;
    i.Z = ["Z", 25];
    i.Z.toString = r;
    i.Z.__enum__ = i;
    i.Number0 = ["Number0", 26];
    i.Number0.toString = r;
    i.Number0.__enum__ = i;
    i.Number1 = ["Number1", 27];
    i.Number1.toString = r;
    i.Number1.__enum__ = i;
    i.Number2 = ["Number2", 28];
    i.Number2.toString = r;
    i.Number2.__enum__ = i;
    i.Number3 = ["Number3", 29];
    i.Number3.toString = r;
    i.Number3.__enum__ = i;
    i.Number4 = ["Number4", 30];
    i.Number4.toString = r;
    i.Number4.__enum__ = i;
    i.Number5 = ["Number5", 31];
    i.Number5.toString = r;
    i.Number5.__enum__ =
        i;
    i.Number6 = ["Number6", 32];
    i.Number6.toString = r;
    i.Number6.__enum__ = i;
    i.Number7 = ["Number7", 33];
    i.Number7.toString = r;
    i.Number7.__enum__ = i;
    i.Number8 = ["Number8", 34];
    i.Number8.toString = r;
    i.Number8.__enum__ = i;
    i.Number9 = ["Number9", 35];
    i.Number9.toString = r;
    i.Number9.__enum__ = i;
    i.Numpad0 = ["Numpad0", 36];
    i.Numpad0.toString = r;
    i.Numpad0.__enum__ = i;
    i.Numpad1 = ["Numpad1", 37];
    i.Numpad1.toString = r;
    i.Numpad1.__enum__ = i;
    i.Numpad2 = ["Numpad2", 38];
    i.Numpad2.toString = r;
    i.Numpad2.__enum__ = i;
    i.Numpad3 = ["Numpad3", 39];
    i.Numpad3.toString =
        r;
    i.Numpad3.__enum__ = i;
    i.Numpad4 = ["Numpad4", 40];
    i.Numpad4.toString = r;
    i.Numpad4.__enum__ = i;
    i.Numpad5 = ["Numpad5", 41];
    i.Numpad5.toString = r;
    i.Numpad5.__enum__ = i;
    i.Numpad6 = ["Numpad6", 42];
    i.Numpad6.toString = r;
    i.Numpad6.__enum__ = i;
    i.Numpad7 = ["Numpad7", 43];
    i.Numpad7.toString = r;
    i.Numpad7.__enum__ = i;
    i.Numpad8 = ["Numpad8", 44];
    i.Numpad8.toString = r;
    i.Numpad8.__enum__ = i;
    i.Numpad9 = ["Numpad9", 45];
    i.Numpad9.toString = r;
    i.Numpad9.__enum__ = i;
    i.NumpadAdd = ["NumpadAdd", 46];
    i.NumpadAdd.toString = r;
    i.NumpadAdd.__enum__ = i;
    i.NumpadDecimal = ["NumpadDecimal", 47];
    i.NumpadDecimal.toString = r;
    i.NumpadDecimal.__enum__ = i;
    i.NumpadDivide = ["NumpadDivide", 48];
    i.NumpadDivide.toString = r;
    i.NumpadDivide.__enum__ = i;
    i.NumpadEnter = ["NumpadEnter", 49];
    i.NumpadEnter.toString = r;
    i.NumpadEnter.__enum__ = i;
    i.NumpadMultiply = ["NumpadMultiply", 50];
    i.NumpadMultiply.toString = r;
    i.NumpadMultiply.__enum__ = i;
    i.NumpadSubtract = ["NumpadSubtract", 51];
    i.NumpadSubtract.toString = r;
    i.NumpadSubtract.__enum__ = i;
    i.F1 = ["F1", 52];
    i.F1.toString = r;
    i.F1.__enum__ = i;
    i.F2 = ["F2", 53];
    i.F2.toString =
        r;
    i.F2.__enum__ = i;
    i.F3 = ["F3", 54];
    i.F3.toString = r;
    i.F3.__enum__ = i;
    i.F4 = ["F4", 55];
    i.F4.toString = r;
    i.F4.__enum__ = i;
    i.F5 = ["F5", 56];
    i.F5.toString = r;
    i.F5.__enum__ = i;
    i.F6 = ["F6", 57];
    i.F6.toString = r;
    i.F6.__enum__ = i;
    i.F7 = ["F7", 58];
    i.F7.toString = r;
    i.F7.__enum__ = i;
    i.F8 = ["F8", 59];
    i.F8.toString = r;
    i.F8.__enum__ = i;
    i.F9 = ["F9", 60];
    i.F9.toString = r;
    i.F9.__enum__ = i;
    i.F10 = ["F10", 61];
    i.F10.toString = r;
    i.F10.__enum__ = i;
    i.F11 = ["F11", 62];
    i.F11.toString = r;
    i.F11.__enum__ = i;
    i.F12 = ["F12", 63];
    i.F12.toString = r;
    i.F12.__enum__ = i;
    i.F13 = ["F13", 64];
    i.F13.toString = r;
    i.F13.__enum__ = i;
    i.F14 = ["F14", 65];
    i.F14.toString = r;
    i.F14.__enum__ = i;
    i.F15 = ["F15", 66];
    i.F15.toString = r;
    i.F15.__enum__ = i;
    i.Left = ["Left", 67];
    i.Left.toString = r;
    i.Left.__enum__ = i;
    i.Up = ["Up", 68];
    i.Up.toString = r;
    i.Up.__enum__ = i;
    i.Right = ["Right", 69];
    i.Right.toString = r;
    i.Right.__enum__ = i;
    i.Down = ["Down", 70];
    i.Down.toString = r;
    i.Down.__enum__ = i;
    i.Alt = ["Alt", 71];
    i.Alt.toString = r;
    i.Alt.__enum__ = i;
    i.Backquote = ["Backquote", 72];
    i.Backquote.toString = r;
    i.Backquote.__enum__ = i;
    i.Backslash = ["Backslash", 73];
    i.Backslash.toString = r;
    i.Backslash.__enum__ = i;
    i.Backspace = ["Backspace", 74];
    i.Backspace.toString = r;
    i.Backspace.__enum__ = i;
    i.CapsLock = ["CapsLock", 75];
    i.CapsLock.toString = r;
    i.CapsLock.__enum__ = i;
    i.Comma = ["Comma", 76];
    i.Comma.toString = r;
    i.Comma.__enum__ = i;
    i.Command = ["Command", 77];
    i.Command.toString = r;
    i.Command.__enum__ = i;
    i.Control = ["Control", 78];
    i.Control.toString = r;
    i.Control.__enum__ = i;
    i.Delete = ["Delete", 79];
    i.Delete.toString = r;
    i.Delete.__enum__ = i;
    i.End = ["End", 80];
    i.End.toString = r;
    i.End.__enum__ =
        i;
    i.Enter = ["Enter", 81];
    i.Enter.toString = r;
    i.Enter.__enum__ = i;
    i.Equals = ["Equals", 82];
    i.Equals.toString = r;
    i.Equals.__enum__ = i;
    i.Escape = ["Escape", 83];
    i.Escape.toString = r;
    i.Escape.__enum__ = i;
    i.Home = ["Home", 84];
    i.Home.toString = r;
    i.Home.__enum__ = i;
    i.Insert = ["Insert", 85];
    i.Insert.toString = r;
    i.Insert.__enum__ = i;
    i.LeftBracket = ["LeftBracket", 86];
    i.LeftBracket.toString = r;
    i.LeftBracket.__enum__ = i;
    i.Minus = ["Minus", 87];
    i.Minus.toString = r;
    i.Minus.__enum__ = i;
    i.PageDown = ["PageDown", 88];
    i.PageDown.toString = r;
    i.PageDown.__enum__ =
        i;
    i.PageUp = ["PageUp", 89];
    i.PageUp.toString = r;
    i.PageUp.__enum__ = i;
    i.Period = ["Period", 90];
    i.Period.toString = r;
    i.Period.__enum__ = i;
    i.Quote = ["Quote", 91];
    i.Quote.toString = r;
    i.Quote.__enum__ = i;
    i.RightBracket = ["RightBracket", 92];
    i.RightBracket.toString = r;
    i.RightBracket.__enum__ = i;
    i.Semicolon = ["Semicolon", 93];
    i.Semicolon.toString = r;
    i.Semicolon.__enum__ = i;
    i.Shift = ["Shift", 94];
    i.Shift.toString = r;
    i.Shift.__enum__ = i;
    i.Slash = ["Slash", 95];
    i.Slash.toString = r;
    i.Slash.__enum__ = i;
    i.Space = ["Space", 96];
    i.Space.toString =
        r;
    i.Space.__enum__ = i;
    i.Tab = ["Tab", 97];
    i.Tab.toString = r;
    i.Tab.__enum__ = i;
    i.Menu = ["Menu", 98];
    i.Menu.toString = r;
    i.Menu.__enum__ = i;
    i.Search = ["Search", 99];
    i.Search.toString = r;
    i.Search.__enum__ = i;
    i.Unknown = function(a) { a = ["Unknown", 100, a];
        a.__enum__ = i;
        a.toString = r; return a };
    var Al = function() { this.init(0, null) };
    g["flambe.input.KeyboardEvent"] = Al;
    Al.__name__ = ["flambe", "input", "KeyboardEvent"];
    Al.prototype = { init: function(a, b) { this.id = a;
            this.key = b }, __class__: Al };
    var Lb = g["flambe.input.MouseButton"] = {
        __ename__: ["flambe",
            "input", "MouseButton"
        ],
        __constructs__: ["Left", "Middle", "Right", "Unknown"]
    };
    Lb.Left = ["Left", 0];
    Lb.Left.toString = r;
    Lb.Left.__enum__ = Lb;
    Lb.Middle = ["Middle", 1];
    Lb.Middle.toString = r;
    Lb.Middle.__enum__ = Lb;
    Lb.Right = ["Right", 2];
    Lb.Right.toString = r;
    Lb.Right.__enum__ = Lb;
    Lb.Unknown = function(a) { a = ["Unknown", 3, a];
        a.__enum__ = Lb;
        a.toString = r; return a };
    var Fc = g["flambe.input.MouseCursor"] = { __ename__: ["flambe", "input", "MouseCursor"], __constructs__: ["Default", "Button", "None"] };
    Fc.Default = ["Default", 0];
    Fc.Default.toString =
        r;
    Fc.Default.__enum__ = Fc;
    Fc.Button = ["Button", 1];
    Fc.Button.toString = r;
    Fc.Button.__enum__ = Fc;
    Fc.None = ["None", 2];
    Fc.None.toString = r;
    Fc.None.__enum__ = Fc;
    var Bl = function() { this.init(0, 0, 0, null) };
    g["flambe.input.MouseEvent"] = Bl;
    Bl.__name__ = ["flambe", "input", "MouseEvent"];
    Bl.prototype = { init: function(a, b, c, d) { this.id = a;
            this.viewX = b;
            this.viewY = c;
            this.button = d }, __class__: Bl };
    var bi = g["flambe.input.EventSource"] = { __ename__: ["flambe", "input", "EventSource"], __constructs__: ["Mouse", "Touch"] };
    bi.Mouse = function(a) {
        a = ["Mouse", 0, a];
        a.__enum__ = bi;
        a.toString = r;
        return a
    };
    bi.Touch = function(a) { a = ["Touch", 1, a];
        a.__enum__ = bi;
        a.toString = r; return a };
    var Cl = function() { this.init(0, 0, 0, null, null) };
    g["flambe.input.PointerEvent"] = Cl;
    Cl.__name__ = ["flambe", "input", "PointerEvent"];
    Cl.prototype = { init: function(a, b, c, d, e) { this.id = a;
            this.viewX = b;
            this.viewY = c;
            this.hit = d;
            this.source = e;
            this._stopped = !1 }, __class__: Cl };
    var Dl = function(a) { this.id = a;
        this._source = bi.Touch(this) };
    g["flambe.input.TouchPoint"] = Dl;
    Dl.__name__ = ["flambe", "input",
        "TouchPoint"
    ];
    Dl.prototype = { init: function(a, b) { this.viewX = a;
            this.viewY = b }, __class__: Dl };
    var Za = function() {};
    g["flambe.math.FMath"] = Za;
    Za.__name__ = ["flambe", "math", "FMath"];
    Za.toDegrees = function(a) { return 180 * a / 3.141592653589793 };
    Za.max = function(a, b) { return a > b ? a : b };
    Za.min = function(a, b) { return a < b ? a : b };
    Za.clamp = function(a, b, c) { return a < b ? b : a > c ? c : a };
    var Uc = function() { this.identity() };
    g["flambe.math.Matrix"] = Uc;
    Uc.__name__ = ["flambe", "math", "Matrix"];
    Uc.multiply = function(a, b, c) {
        null == c && (c = new Uc);
        var d =
            a.m00 * b.m00 + a.m01 * b.m10,
            e = a.m00 * b.m01 + a.m01 * b.m11,
            f = a.m00 * b.m02 + a.m01 * b.m12 + a.m02;
        c.m00 = d;
        c.m01 = e;
        c.m02 = f;
        d = a.m10 * b.m00 + a.m11 * b.m10;
        e = a.m10 * b.m01 + a.m11 * b.m11;
        f = a.m10 * b.m02 + a.m11 * b.m12 + a.m12;
        c.m10 = d;
        c.m11 = e;
        c.m12 = f;
        return c
    };
    Uc.prototype = {
        set: function(a, b, c, d, e, f) { this.m00 = a;
            this.m01 = c;
            this.m02 = e;
            this.m10 = b;
            this.m11 = d;
            this.m12 = f },
        identity: function() { this.set(1, 0, 0, 1, 0, 0) },
        compose: function(a, b, c, d, e) { var f = Math.sin(e),
                e = Math.cos(e);
            this.set(e * c, f * c, -f * d, e * d, a, b) },
        translate: function(a, b) {
            this.m02 += this.m00 *
                a + this.m01 * b;
            this.m12 += this.m11 * b + this.m10 * a
        },
        invert: function() { var a = this.determinant(); if (0 == a) return !1;
            this.set(this.m11 / a, -this.m01 / a, -this.m10 / a, this.m00 / a, (this.m01 * this.m12 - this.m11 * this.m02) / a, (this.m10 * this.m02 - this.m00 * this.m12) / a); return !0 },
        transform: function(a, b, c) { null == c && (c = new ob);
            c.x = a * this.m00 + b * this.m01 + this.m02;
            c.y = a * this.m10 + b * this.m11 + this.m12; return c },
        transformArray: function(a, b, c) {
            for (var d = 0; d < b;) {
                var e = a[d],
                    f = a[d + 1];
                c[d++] = e * this.m00 + f * this.m01 + this.m02;
                c[d++] = e * this.m10 +
                    f * this.m11 + this.m12
            }
        },
        determinant: function() { return this.m00 * this.m11 - this.m01 * this.m10 },
        inverseTransform: function(a, b, c) { var d = this.determinant(); if (0 == d) return !1;
            a -= this.m02;
            b -= this.m12;
            c.x = (a * this.m11 - b * this.m01) / d;
            c.y = (b * this.m00 - a * this.m10) / d; return !0 },
        clone: function(a) { null == a && (a = new Uc);
            a.set(this.m00, this.m10, this.m01, this.m11, this.m02, this.m12); return a },
        __class__: Uc
    };
    var Ab = function(a, b, c, d) { null == d && (d = 0);
        null == c && (c = 0);
        null == b && (b = 0);
        null == a && (a = 0);
        this.set(a, b, c, d) };
    g["flambe.math.Rectangle"] =
        Ab;
    Ab.__name__ = ["flambe", "math", "Rectangle"];
    Ab.prototype = {
        set: function(a, b, c, d) { this.x = a;
            this.y = b;
            this.width = c;
            this.height = d },
        contains: function(a, b) { a -= this.x; if (0 <= this.width) { if (0 > a || a > this.width) return !1 } else if (0 < a || a < this.width) return !1;
            b -= this.y; if (0 <= this.height) { if (0 > b || b > this.height) return !1 } else if (0 < b || b < this.height) return !1; return !0 },
        clone: function(a) { null == a && (a = new Ab);
            a.set(this.x, this.y, this.width, this.height); return a },
        equals: function(a) {
            return this.x == a.x && this.y == a.y && this.width ==
                a.width && this.height == a.height
        },
        __class__: Ab
    };
    var Vb = function() { this._disposed = !1 };
    g["flambe.platform.BasicAsset"] = Vb;
    Vb.__name__ = ["flambe", "platform", "BasicAsset"];
    Vb.__interfaces__ = [xf];
    Vb.prototype = { dispose: function() { this._disposed || (this._disposed = !0, this.onDisposed()) }, onDisposed: function() { null }, __class__: Vb };
    var Bf = function(a, b) {
        var c = this;
        this.manifest = b;
        this._platform = a;
        this.promise = new Af;
        this._bytesLoaded = new K;
        this._pack = new ci(b, this);
        var d = wf.array(b);
        if (0 == d.length) this.handleSuccess();
        else { for (var e = new K, f = 0; f < d.length;) { var j = d[f];++f; var p = e.get(j.name);
                null == p && (p = [], e.set(j.name, p));
                p.push(j) } this._assetsRemaining = wf.count(e); for (d = e.iterator(); d.hasNext();) e = [d.next()], this.pickBestEntry(e[0], function(a) { return function(d) { if (null != d) { var e = b.getFullURL(d); try { c.loadEntry(e, d) } catch (f) { c.handleError(d, "Unexpected error: " + u.string(f)) } e = c.promise;
                        e.set_total(e._total + d.bytes) } else d = a[0][0], Bf.isAudio(d.format) ? c.handleLoad(d, Vc.getInstance()) : c.handleError(d, "Could not find a supported format to load") } }(e)) }
    };
    g["flambe.platform.BasicAssetPackLoader"] = Bf;
    Bf.__name__ = ["flambe", "platform", "BasicAssetPackLoader"];
    Bf.isAudio = function(a) { switch (a[1]) {
            case 8:
            case 9:
            case 10:
            case 11:
            case 12:
                return !0;
            default:
                return !1 } };
    Bf.prototype = {
        onDisposed: function() {},
        pickBestEntry: function(a, b) { this.getAssetFormats(function(c) { for (var d = 0; d < c.length;) { var e = c[d];++d; for (var f = 0; f < a.length;) { var j = a[f];++f; if (j.format == e) { b(j); return } } } b(null) }) },
        loadEntry: function() { null },
        getAssetFormats: function() { null },
        handleLoad: function(a,
            b) { if (!this._pack.disposed) { this.handleProgress(a, a.bytes); var c; switch (a.format[1]) {
                    case 0:
                    case 1:
                    case 2:
                    case 3:
                    case 4:
                    case 5:
                    case 6:
                    case 7:
                        c = this._pack.textures; break;
                    case 8:
                    case 9:
                    case 10:
                    case 11:
                    case 12:
                        c = this._pack.sounds; break;
                    case 13:
                        c = this._pack.files } c.set(a.name, b);
                this._assetsRemaining -= 1;
                0 == this._assetsRemaining && this.handleSuccess() } },
        handleProgress: function(a, b) { this._bytesLoaded.set(a.name, b); for (var c = 0, d = this._bytesLoaded.iterator(); d.hasNext();) var e = d.next(),
                c = c + e;
            this.promise.set_progress(c) },
        handleSuccess: function() { this.promise.set_result(this._pack) },
        handleError: function(a, b) { this.promise.error.emit(kb.withFields(b, ["url", a.url])) },
        handleTextureError: function(a) { this.handleError(a, "Failed to create texture. Is the GPU context unavailable?") },
        __class__: Bf
    };
    var ci = function(a, b) { this.disposed = !1;
        this._manifest = a;
        this.loader = b;
        this.textures = new K;
        this.sounds = new K;
        this.files = new K };
    g["flambe.platform._BasicAssetPackLoader.BasicAssetPack"] = ci;
    ci.__name__ = ["flambe", "platform", "_BasicAssetPackLoader",
        "BasicAssetPack"
    ];
    ci.__interfaces__ = [Xh];
    ci.prototype = {
        getTexture: function(a, b) { null == b && (b = !0); var c = this.textures.get(a); if (null == c && b) throw kb.withFields("Missing texture", ["name", a]); return c },
        getSound: function(a, b) { null == b && (b = !0); var c = this.sounds.get(a); if (null == c && b) throw kb.withFields("Missing sound", ["name", a]); return c },
        getFile: function(a, b) { null == b && (b = !0); var c = this.files.get(a); if (null == c && b) throw kb.withFields("Missing file", ["name", a]); return c },
        dispose: function() {
            if (!this.disposed) {
                this.disposed = !0;
                for (var a = this.textures.iterator(); a.hasNext();) a.next().dispose();
                this.textures = null;
                for (a = this.sounds.iterator(); a.hasNext();) a.next().dispose();
                this.sounds = null;
                for (a = this.files.iterator(); a.hasNext();) a.next().dispose();
                this.files = null;
                this.loader.onDisposed()
            }
        },
        get_manifest: function() { return this._manifest },
        __class__: ci,
        __properties__: { get_manifest: "get_manifest" }
    };
    var Gg = function(a) { this._disposed = !1;
        this._content = a };
    g["flambe.platform.BasicFile"] = Gg;
    Gg.__name__ = ["flambe", "platform", "BasicFile"];
    Gg.__interfaces__ = [Yh];
    Gg.__super__ = Vb;
    Gg.prototype = l(Vb.prototype, { toString: function() { return this._content }, onDisposed: function() { this._content = null }, __class__: Gg });
    var El = function() {};
    g["flambe.subsystem.KeyboardSystem"] = El;
    El.__name__ = ["flambe", "subsystem", "KeyboardSystem"];
    El.prototype = { __class__: El };
    var Sc = function() { this.down = new I;
        this.up = new I;
        this.backButton = new ia;
        this._keyStates = new Ec };
    g["flambe.platform.BasicKeyboard"] = Sc;
    Sc.__name__ = ["flambe", "platform", "BasicKeyboard"];
    Sc.__interfaces__ = [El];
    Sc.prototype = {
        isDown: function(a) { return this.isCodeDown(Hg.toKeyCode(a)) },
        isCodeDown: function(a) { return this._keyStates.exists(a) },
        submitDown: function(a) { if (16777238 == a) return null != this.backButton._head ? (this.backButton.emit(), !0) : !1;
            this._keyStates.exists(a) || (this._keyStates.set(a, !0), Sc._sharedEvent.init(Sc._sharedEvent.id + 1, Hg.toKey(a)), this.down.emit(Sc._sharedEvent)); return !0 },
        submitUp: function(a) {
            this._keyStates.exists(a) && (this._keyStates.remove(a), Sc._sharedEvent.init(Sc._sharedEvent.id +
                1, Hg.toKey(a)), this.up.emit(Sc._sharedEvent))
        },
        __class__: Sc
    };
    var Fl = function() {};
    g["flambe.subsystem.MouseSystem"] = Fl;
    Fl.__name__ = ["flambe", "subsystem", "MouseSystem"];
    Fl.prototype = { __class__: Fl };
    var Wc = function(a) { this._pointer = a;
        this._source = bi.Mouse(Wc._sharedEvent);
        this.down = new I;
        this.move = new I;
        this.up = new I;
        this.scroll = new I;
        this._y = this._x = 0;
        this._cursor = Fc.Default;
        this._buttonStates = new Ec };
    g["flambe.platform.BasicMouse"] = Wc;
    Wc.__name__ = ["flambe", "platform", "BasicMouse"];
    Wc.__interfaces__ = [Fl];
    Wc.prototype = {
        get_x: function() { return this._x },
        get_y: function() { return this._y },
        set_cursor: function(a) { return this._cursor = a },
        submitDown: function(a, b, c) { this._buttonStates.exists(c) || (this._buttonStates.set(c, !0), this.prepare(a, b, Gl.toButton(c)), this._pointer.submitDown(a, b, this._source), this.down.emit(Wc._sharedEvent)) },
        submitMove: function(a, b) { this.prepare(a, b, null);
            this._pointer.submitMove(a, b, this._source);
            this.move.emit(Wc._sharedEvent) },
        submitUp: function(a, b, c) {
            this._buttonStates.exists(c) &&
                (this._buttonStates.remove(c), this.prepare(a, b, Gl.toButton(c)), this._pointer.submitUp(a, b, this._source), this.up.emit(Wc._sharedEvent))
        },
        submitScroll: function(a, b, c) { this._x = a;
            this._y = b; if (null == this.scroll._head) return !1;
            this.scroll.emit(c); return !0 },
        prepare: function(a, b, c) { this._x = a;
            this._y = b;
            Wc._sharedEvent.init(Wc._sharedEvent.id + 1, a, b, c) },
        __class__: Wc,
        __properties__: { set_cursor: "set_cursor", get_y: "get_y", get_x: "get_x" }
    };
    var Hl = function() {};
    g["flambe.subsystem.PointerSystem"] = Hl;
    Hl.__name__ = ["flambe",
        "subsystem", "PointerSystem"
    ];
    Hl.prototype = { __class__: Hl };
    var zb = function(a, b, c) { null == c && (c = !1);
        null == b && (b = 0);
        null == a && (a = 0);
        this.down = new I;
        this.move = new I;
        this.up = new I;
        this._x = a;
        this._y = b;
        this._isDown = c };
    g["flambe.platform.BasicPointer"] = zb;
    zb.__name__ = ["flambe", "platform", "BasicPointer"];
    zb.__interfaces__ = [Hl];
    zb.prototype = {
        get_x: function() { return this._x },
        get_y: function() { return this._y },
        submitDown: function(a, b, c) {
            if (!this._isDown) {
                this.submitMove(a, b, c);
                this._isDown = !0;
                var d = [],
                    e = s.hitTest(w.root,
                        a, b);
                if (null != e) { var f = e.owner;
                    do { var j = f._compMap.Sprite_19;
                        null != j && d.push(j);
                        f = f.parent } while (null != f) } this.prepare(a, b, e, c);
                for (a = 0; a < d.length;)
                    if (b = d[a], ++a, b.onPointerDown(zb._sharedEvent), zb._sharedEvent._stopped) return;
                this.down.emit(zb._sharedEvent)
            }
        },
        submitMove: function(a, b, c) {
            if (!(a == this._x && b == this._y)) {
                var d = [],
                    e = s.hitTest(w.root, a, b);
                if (null != e) { var f = e.owner;
                    do { var j = f._compMap.Sprite_19;
                        null != j && d.push(j);
                        f = f.parent } while (null != f) } this.prepare(a, b, e, c);
                for (a = 0; a < d.length;)
                    if (b = d[a],
                        ++a, b.onPointerMove(zb._sharedEvent), zb._sharedEvent._stopped) return;
                this.move.emit(zb._sharedEvent)
            }
        },
        submitUp: function(a, b, c) { if (this._isDown) { this.submitMove(a, b, c);
                this._isDown = !1; var d = [],
                    e = s.hitTest(w.root, a, b); if (null != e) { var f = e.owner;
                    do { var j = f._compMap.Sprite_19;
                        null != j && d.push(j);
                        f = f.parent } while (null != f) } this.prepare(a, b, e, c); for (a = 0; a < d.length;)
                    if (b = d[a], ++a, b.onPointerUp(zb._sharedEvent), zb._sharedEvent._stopped) return;
                this.up.emit(zb._sharedEvent) } },
        prepare: function(a, b, c, d) {
            this._x =
                a;
            this._y = b;
            zb._sharedEvent.init(zb._sharedEvent.id + 1, a, b, c, d)
        },
        __class__: zb,
        __properties__: { get_y: "get_y", get_x: "get_x" }
    };
    var de = function(a, b, c) { this._x = this._y = 0;
        this._parent = null;
        this.rootX = this.rootY = 0;
        this._disposed = !1;
        this.root = a;
        this._width = b;
        this._height = c };
    g["flambe.platform.BasicTexture"] = de;
    de.__name__ = ["flambe", "platform", "BasicTexture"];
    de.__interfaces__ = [$m];
    de.__super__ = Vb;
    de.prototype = l(Vb.prototype, {
        subTexture: function(a, b, c, d) {
            c = this.root.createTexture(c, d);
            c._parent = this;
            c._x = a;
            c._y = b;
            c.rootX = this.rootX + a;
            c.rootY = this.rootY + b;
            return c
        },
        get_graphics: function() { return this.root.getGraphics() },
        onDisposed: function() { null == this._parent && this.root.dispose() },
        get_width: function() { return this._width },
        get_height: function() { return this._height },
        __class__: de,
        __properties__: { get_height: "get_height", get_width: "get_width", get_graphics: "get_graphics" }
    });
    var di = function() {};
    g["flambe.subsystem.TouchSystem"] = di;
    di.__name__ = ["flambe", "subsystem", "TouchSystem"];
    di.prototype = { __class__: di };
    var Qh = function(a, b) { null == b && (b = 4);
        this._pointer = a;
        this._maxPoints = b;
        this._pointMap = new Ec;
        this._points = [];
        this.down = new I;
        this.move = new I;
        this.up = new I };
    g["flambe.platform.BasicTouch"] = Qh;
    Qh.__name__ = ["flambe", "platform", "BasicTouch"];
    Qh.__interfaces__ = [di];
    Qh.prototype = {
        get_supported: function() { return !0 },
        submitDown: function(a, b, c) {
            if (!this._pointMap.exists(a)) {
                var d = new Dl(a);
                d.init(b, c);
                this._pointMap.set(a, d);
                this._points.push(d);
                null == this._pointerTouch && (this._pointerTouch = d, this._pointer.submitDown(b,
                    c, d._source));
                this.down.emit(d)
            }
        },
        submitMove: function(a, b, c) { a = this._pointMap.get(a);
            null != a && (a.init(b, c), this._pointerTouch == a && this._pointer.submitMove(b, c, a._source), this.move.emit(a)) },
        submitUp: function(a, b, c) { var d = this._pointMap.get(a);
            null != d && (d.init(b, c), this._pointMap.remove(a), N.remove(this._points, d), this._pointerTouch == d && (this._pointerTouch = null, this._pointer.submitUp(b, c, d._source)), this.up.emit(d)) },
        __class__: Qh,
        __properties__: { get_supported: "get_supported" }
    };
    var ag = function() {};
    g["flambe.sound.Sound"] = ag;
    ag.__name__ = ["flambe", "sound", "Sound"];
    ag.__interfaces__ = [xf];
    ag.prototype = { __class__: ag };
    var Vc = function() { this._disposed = !1;
        this._playback = new ei(this) };
    g["flambe.platform.DummySound"] = Vc;
    Vc.__name__ = ["flambe", "platform", "DummySound"];
    Vc.__interfaces__ = [ag];
    Vc.getInstance = function() { null == Vc._instance && (Vc._instance = new Vc); return Vc._instance };
    Vc.__super__ = Vb;
    Vc.prototype = l(Vb.prototype, {
        play: function() { return this._playback },
        loop: function() { return this._playback },
        get_duration: function() { return 0 },
        onDisposed: function() {},
        __class__: Vc,
        __properties__: { get_duration: "get_duration" }
    });
    var bg = function() {};
    g["flambe.sound.Playback"] = bg;
    bg.__name__ = ["flambe", "sound", "Playback"];
    bg.__interfaces__ = [Dc];
    bg.prototype = { __class__: bg };
    var ei = function(a) { this._sound = a;
        this.volume = new Ca(0);
        this._complete = new Cb(!0) };
    g["flambe.platform.DummyPlayback"] = ei;
    ei.__name__ = ["flambe", "platform", "DummyPlayback"];
    ei.__interfaces__ = [bg];
    ei.prototype = {
        set_paused: function() { return !0 },
        get_complete: function() { return this._complete },
        dispose: function() {},
        __class__: ei,
        __properties__: { get_complete: "get_complete", set_paused: "set_paused" }
    };
    var fi = function() {};
    g["flambe.subsystem.StorageSystem"] = fi;
    fi.__name__ = ["flambe", "subsystem", "StorageSystem"];
    fi.prototype = { __class__: fi };
    var Uh = function() { this.clear() };
    g["flambe.platform.DummyStorage"] = Uh;
    Uh.__name__ = ["flambe", "platform", "DummyStorage"];
    Uh.__interfaces__ = [fi];
    Uh.prototype = {
        set: function(a, b) { this._hash.set(a, b); return !0 },
        get: function(a, b) {
            return this._hash.exists(a) ? this._hash.get(a) :
                b
        },
        clear: function() { this._hash = new K },
        __class__: Uh
    };
    var Rh = function() { this.down = new I;
        this.move = new I;
        this.up = new I };
    g["flambe.platform.DummyTouch"] = Rh;
    Rh.__name__ = ["flambe", "platform", "DummyTouch"];
    Rh.__interfaces__ = [di];
    Rh.prototype = { get_supported: function() { return !1 }, __class__: Rh, __properties__: { get_supported: "get_supported" } };
    var Ig = function() { this._entries = [] };
    g["flambe.platform.EventGroup"] = Ig;
    Ig.__name__ = ["flambe", "platform", "EventGroup"];
    Ig.__interfaces__ = [Dc];
    Ig.prototype = {
        addListener: function(a,
            b, c) { a.addEventListener(b, c, !1);
            this._entries.push(new Il(a, b, c)) },
        addDisposingListener: function(a, b, c) { var d = this;
            this.addListener(a, b, function(a) { d.dispose();
                c(a) }) },
        dispose: function() { for (var a = 0, b = this._entries; a < b.length;) { var c = b[a];++a;
                c.dispatcher.removeEventListener(c.type, c.listener, !1) } this._entries = [] },
        __class__: Ig
    };
    var Il = function(a, b, c) { this.dispatcher = a;
        this.type = b;
        this.listener = c };
    g["flambe.platform._EventGroup.Entry"] = Il;
    Il.__name__ = ["flambe", "platform", "_EventGroup", "Entry"];
    Il.prototype = { __class__: Il };
    var Jg = function() {};
    g["flambe.platform.InternalGraphics"] = Jg;
    Jg.__name__ = ["flambe", "platform", "InternalGraphics"];
    Jg.__interfaces__ = [zl];
    Jg.prototype = { __class__: Jg };
    var Jl = function() {};
    g["flambe.subsystem.RendererSystem"] = Jl;
    Jl.__name__ = ["flambe", "subsystem", "RendererSystem"];
    Jl.prototype = { __class__: Jl };
    var Kg = function() {};
    g["flambe.platform.InternalRenderer"] = Kg;
    Kg.__name__ = ["flambe", "platform", "InternalRenderer"];
    Kg.__interfaces__ = [Jl];
    Kg.prototype = { __class__: Kg };
    var Hg = function() {};
    g["flambe.platform.KeyCodes"] = Hg;
    Hg.__name__ = ["flambe", "platform", "KeyCodes"];
    Hg.toKey = function(a) {
        switch (a) {
            case 65:
                return i.A;
            case 66:
                return i.B;
            case 67:
                return i.C;
            case 68:
                return i.D;
            case 69:
                return i.E;
            case 70:
                return i.F;
            case 71:
                return i.G;
            case 72:
                return i.H;
            case 73:
                return i.I;
            case 74:
                return i.J;
            case 75:
                return i.K;
            case 76:
                return i.L;
            case 77:
                return i.M;
            case 78:
                return i.N;
            case 79:
                return i.O;
            case 80:
                return i.P;
            case 81:
                return i.Q;
            case 82:
                return i.R;
            case 83:
                return i.S;
            case 84:
                return i.T;
            case 85:
                return i.U;
            case 86:
                return i.V;
            case 87:
                return i.W;
            case 88:
                return i.X;
            case 89:
                return i.Y;
            case 90:
                return i.Z;
            case 48:
                return i.Number0;
            case 49:
                return i.Number1;
            case 50:
                return i.Number2;
            case 51:
                return i.Number3;
            case 52:
                return i.Number4;
            case 53:
                return i.Number5;
            case 54:
                return i.Number6;
            case 55:
                return i.Number7;
            case 56:
                return i.Number8;
            case 57:
                return i.Number9;
            case 96:
                return i.Numpad0;
            case 97:
                return i.Numpad1;
            case 98:
                return i.Numpad2;
            case 99:
                return i.Numpad3;
            case 100:
                return i.Numpad4;
            case 101:
                return i.Numpad5;
            case 102:
                return i.Numpad6;
            case 103:
                return i.Numpad7;
            case 104:
                return i.Numpad8;
            case 105:
                return i.Numpad9;
            case 107:
                return i.NumpadAdd;
            case 110:
                return i.NumpadDecimal;
            case 111:
                return i.NumpadDivide;
            case 108:
                return i.NumpadEnter;
            case 106:
                return i.NumpadMultiply;
            case 109:
                return i.NumpadSubtract;
            case 112:
                return i.F1;
            case 113:
                return i.F2;
            case 114:
                return i.F3;
            case 115:
                return i.F4;
            case 116:
                return i.F5;
            case 117:
                return i.F6;
            case 118:
                return i.F7;
            case 119:
                return i.F8;
            case 120:
                return i.F9;
            case 121:
                return i.F10;
            case 122:
                return i.F11;
            case 123:
                return i.F12;
            case 37:
                return i.Left;
            case 38:
                return i.Up;
            case 39:
                return i.Right;
            case 40:
                return i.Down;
            case 18:
                return i.Alt;
            case 192:
                return i.Backquote;
            case 220:
                return i.Backslash;
            case 8:
                return i.Backspace;
            case 20:
                return i.CapsLock;
            case 188:
                return i.Comma;
            case 15:
                return i.Command;
            case 17:
                return i.Control;
            case 46:
                return i.Delete;
            case 35:
                return i.End;
            case 13:
                return i.Enter;
            case 187:
                return i.Equals;
            case 27:
                return i.Escape;
            case 36:
                return i.Home;
            case 45:
                return i.Insert;
            case 219:
                return i.LeftBracket;
            case 189:
                return i.Minus;
            case 34:
                return i.PageDown;
            case 33:
                return i.PageUp;
            case 190:
                return i.Period;
            case 222:
                return i.Quote;
            case 221:
                return i.RightBracket;
            case 186:
                return i.Semicolon;
            case 16:
                return i.Shift;
            case 191:
                return i.Slash;
            case 32:
                return i.Space;
            case 9:
                return i.Tab;
            case 16777234:
                return i.Menu;
            case 16777247:
                return i.Search
        }
        return i.Unknown(a)
    };
    Hg.toKeyCode = function(a) {
        switch (a[1]) {
            case 0:
                return 65;
            case 1:
                return 66;
            case 2:
                return 67;
            case 3:
                return 68;
            case 4:
                return 69;
            case 5:
                return 70;
            case 6:
                return 71;
            case 7:
                return 72;
            case 8:
                return 73;
            case 9:
                return 74;
            case 10:
                return 75;
            case 11:
                return 76;
            case 12:
                return 77;
            case 13:
                return 78;
            case 14:
                return 79;
            case 15:
                return 80;
            case 16:
                return 81;
            case 17:
                return 82;
            case 18:
                return 83;
            case 19:
                return 84;
            case 20:
                return 85;
            case 21:
                return 86;
            case 22:
                return 87;
            case 23:
                return 88;
            case 24:
                return 89;
            case 25:
                return 90;
            case 26:
                return 48;
            case 27:
                return 49;
            case 28:
                return 50;
            case 29:
                return 51;
            case 30:
                return 52;
            case 31:
                return 53;
            case 32:
                return 54;
            case 33:
                return 55;
            case 34:
                return 56;
            case 35:
                return 57;
            case 36:
                return 96;
            case 37:
                return 97;
            case 38:
                return 98;
            case 39:
                return 99;
            case 40:
                return 100;
            case 41:
                return 101;
            case 42:
                return 102;
            case 43:
                return 103;
            case 44:
                return 104;
            case 45:
                return 105;
            case 46:
                return 107;
            case 47:
                return 110;
            case 48:
                return 111;
            case 49:
                return 108;
            case 50:
                return 106;
            case 51:
                return 109;
            case 52:
                return 112;
            case 53:
                return 113;
            case 54:
                return 114;
            case 55:
                return 115;
            case 56:
                return 116;
            case 57:
                return 117;
            case 58:
                return 118;
            case 59:
                return 119;
            case 60:
                return 120;
            case 61:
                return 121;
            case 62:
                return 122;
            case 63:
                return 123;
            case 64:
                return 124;
            case 65:
                return 125;
            case 66:
                return 126;
            case 67:
                return 37;
            case 68:
                return 38;
            case 69:
                return 39;
            case 70:
                return 40;
            case 71:
                return 18;
            case 72:
                return 192;
            case 73:
                return 220;
            case 74:
                return 8;
            case 75:
                return 20;
            case 76:
                return 188;
            case 77:
                return 15;
            case 78:
                return 17;
            case 79:
                return 46;
            case 80:
                return 35;
            case 81:
                return 13;
            case 82:
                return 187;
            case 83:
                return 27;
            case 84:
                return 36;
            case 85:
                return 45;
            case 86:
                return 219;
            case 87:
                return 189;
            case 88:
                return 34;
            case 89:
                return 33;
            case 90:
                return 190;
            case 91:
                return 222;
            case 92:
                return 221;
            case 93:
                return 186;
            case 94:
                return 16;
            case 95:
                return 191;
            case 96:
                return 32;
            case 97:
                return 9;
            case 98:
                return 16777234;
            case 99:
                return 16777247;
            case 100:
                return a[2]
        }
    };
    var Vf = function() { this._tickables = [] };
    g["flambe.platform.MainLoop"] = Vf;
    Vf.__name__ = ["flambe", "platform", "MainLoop"];
    Vf.updateEntity = function(a, b) {
        var c = a._compMap.SpeedAdjuster_63;
        if (null != c && (c._realDt = b, b *= c.scale._value, 0 >= b)) { c.onUpdate(b); return }
        for (c = a.firstComponent; null != c;) {
            var d = c.next;
            0 == (c._flags &
                1) && (c._flags |= 1, c.onStart());
            c.onUpdate(b);
            c = d
        }
        for (c = a.firstChild; null != c;) d = c.next, Vf.updateEntity(c, b), c = d
    };
    Vf.prototype = { update: function(a) { if (!(0 >= a)) { 1 < a && (a = 1); for (var b = 0; b < this._tickables.length;) { var c = this._tickables[b];
                    null == c || c.update(a) ? this._tickables.splice(b, 1) : ++b } w.volume.update(a);
                Vf.updateEntity(w.root, a) } }, render: function(a) { var b = a.graphics;
            null != b && (a.willRender(), s.render(w.root, b), a.didRender()) }, addTickable: function(a) { this._tickables.push(a) }, __class__: Vf };
    var Kl = function() {};
    g["flambe.platform.MathUtil"] = Kl;
    Kl.__name__ = ["flambe", "platform", "MathUtil"];
    Kl.nextPowerOfTwo = function(a) { for (var b = 1; b < a;) b <<= 1; return b };
    var Gl = function() {};
    g["flambe.platform.MouseCodes"] = Gl;
    Gl.__name__ = ["flambe", "platform", "MouseCodes"];
    Gl.toButton = function(a) { switch (a) {
            case 0:
                return Lb.Left;
            case 1:
                return Lb.Middle;
            case 2:
                return Lb.Right } return Lb.Unknown(a) };
    var gi = function() {};
    g["flambe.platform.TextureRoot"] = gi;
    gi.__name__ = ["flambe", "platform", "TextureRoot"];
    gi.prototype = { __class__: gi };
    var hi =
        function() {};
    g["flambe.platform.Tickable"] = hi;
    hi.__name__ = ["flambe", "platform", "Tickable"];
    hi.prototype = { __class__: hi };
    var ic = function(a, b) { this._firstDraw = !1;
        this._canvasCtx = a.getContext("2d", { alpha: b }) };
    g["flambe.platform.html.CanvasGraphics"] = ic;
    ic.__name__ = ["flambe", "platform", "html", "CanvasGraphics"];
    ic.__interfaces__ = [Jg];
    ic.prototype = {
        save: function() { this._canvasCtx.save() },
        translate: function(a, b) { this._canvasCtx.translate(a | 0, b | 0) },
        scale: function(a, b) { this._canvasCtx.scale(a, b) },
        rotate: function(a) {
            this._canvasCtx.rotate(3.141592653589793 *
                a / 180)
        },
        transform: function(a, b, c, d, e, f) { this._canvasCtx.transform(a, b, c, d, e, f) },
        restore: function() { this._canvasCtx.restore() },
        drawTexture: function(a, b, c) { this.drawSubTexture(a, b, c, 0, 0, a.get_width(), a.get_height()) },
        drawSubTexture: function(a, b, c, d, e, f, j) {
            this._firstDraw ? (this._firstDraw = !1, this._canvasCtx.globalCompositeOperation = "copy", this.drawSubTexture(a, b, c, d, e, f, j), this._canvasCtx.globalCompositeOperation = "source-over") : this._canvasCtx.drawImage(a.root.image, a.rootX + d | 0, a.rootY + e | 0, f | 0, j | 0, b |
                0, c | 0, f | 0, j | 0)
        },
        drawPattern: function(a, b, c, d, e) { this._firstDraw ? (this._firstDraw = !1, this._canvasCtx.globalCompositeOperation = "copy", this.drawPattern(a, b, c, d, e), this._canvasCtx.globalCompositeOperation = "source-over") : (this._canvasCtx.fillStyle = a.getPattern(), this._canvasCtx.fillRect(b | 0, c | 0, d | 0, e | 0)) },
        fillRect: function(a, b, c, d, e) {
            if (this._firstDraw) this._firstDraw = !1, this._canvasCtx.globalCompositeOperation = "copy", this.fillRect(a, b, c, d, e), this._canvasCtx.globalCompositeOperation = "source-over";
            else {
                for (a =
                    (16777215 & a).toString(16); 6 > a.length;) a = "0" + u.string(a);
                this._canvasCtx.fillStyle = "#" + u.string(a);
                this._canvasCtx.fillRect(b | 0, c | 0, d | 0, e | 0)
            }
        },
        multiplyAlpha: function(a) { this._canvasCtx.globalAlpha *= a },
        setBlendMode: function(a) { var b; switch (a[1]) {
                case 0:
                    b = "source-over"; break;
                case 1:
                    b = "lighter"; break;
                case 2:
                    b = "multiply"; break;
                case 3:
                    b = "screen"; break;
                case 4:
                    b = "destination-in"; break;
                case 5:
                    b = "copy" } this._canvasCtx.globalCompositeOperation = b },
        applyScissor: function(a, b, c, d) {
            this._canvasCtx.beginPath();
            this._canvasCtx.rect(a |
                0, b | 0, c | 0, d | 0);
            this._canvasCtx.clip()
        },
        willRender: function() { this._firstDraw = !0 },
        didRender: function() {},
        onResize: function() {},
        __class__: ic
    };
    var Wf = function(a) { this.graphics = new ic(a, !1);
        this._hasGPU = new Cb(!0) };
    g["flambe.platform.html.CanvasRenderer"] = Wf;
    Wf.__name__ = ["flambe", "platform", "html", "CanvasRenderer"];
    Wf.__interfaces__ = [Kg];
    Wf.prototype = {
        get_type: function() { return Gc.Canvas },
        createTextureFromImage: function(a) {
            a = new cg(Wf.CANVAS_TEXTURES ? la.createCanvas(a) : a);
            return a.createTexture(a.width,
                a.height)
        },
        createTexture: function(a, b) { return (new cg(la.createEmptyCanvas(a, b))).createTexture(a, b) },
        getCompressedTextureFormats: function() { return [] },
        createCompressedTexture: function() { return null },
        willRender: function() { this.graphics.willRender() },
        didRender: function() { this.graphics.didRender() },
        __class__: Wf,
        __properties__: { get_type: "get_type" }
    };
    var ii = function(a, b, c) { this._rootUpdateCount = 0;
        this._pattern = null;
        de.call(this, a, b, c) };
    g["flambe.platform.html.CanvasTexture"] = ii;
    ii.__name__ = ["flambe", "platform",
        "html", "CanvasTexture"
    ];
    ii.__super__ = de;
    ii.prototype = l(de.prototype, { getPattern: function() { if (this._rootUpdateCount != this.root.updateCount || null == this._pattern) this._rootUpdateCount = this.root.updateCount, this._pattern = this.root.createPattern(this.rootX, this.rootY, this._width, this._height); return this._pattern }, __class__: ii });
    var cg = function(a) { this._graphics = null;
        this.updateCount = 0;
        this._disposed = !1;
        this.image = a;
        this.width = a.width;
        this.height = a.height };
    g["flambe.platform.html.CanvasTextureRoot"] =
        cg;
    cg.__name__ = ["flambe", "platform", "html", "CanvasTextureRoot"];
    cg.__interfaces__ = [gi];
    cg.__super__ = Vb;
    cg.prototype = l(Vb.prototype, {
        createTexture: function(a, b) { return new ii(this, a, b) },
        getGraphics: function() { null == this._graphics && (this.getContext2d(), this._graphics = new ji(this)); return this._graphics },
        createPattern: function(a, b, c, d) {
            var e = this.getContext2d(),
                f = this.image;
            if (0 != a || 0 != b || c != this.width || d != this.height) f = la.createEmptyCanvas(c, d), c = f.getContext("2d"), c.globalCompositeOperation = "copy",
                c.drawImage(this.image, -a, -b);
            return e.createPattern(f, "repeat")
        },
        getContext2d: function() { U.__instanceof(this.image, HTMLCanvasElement) || (this.image = la.createCanvas(this.image)); return this.image.getContext("2d") },
        onDisposed: function() { this._graphics = this.image = null },
        __class__: cg
    });
    var ji = function(a) { ic.call(this, a.image, !0);
        this._renderTarget = a };
    g["flambe.platform.html._CanvasTextureRoot.InternalGraphics"] = ji;
    ji.__name__ = ["flambe", "platform", "html", "_CanvasTextureRoot", "InternalGraphics"];
    ji.__super__ =
        ic;
    ji.prototype = l(ic.prototype, { drawTexture: function(a, b, c) { ic.prototype.drawTexture.call(this, a, b, c);++this._renderTarget.updateCount }, drawSubTexture: function(a, b, c, d, e, f, j) { ic.prototype.drawSubTexture.call(this, a, b, c, d, e, f, j);++this._renderTarget.updateCount }, drawPattern: function(a, b, c, d, e) { ic.prototype.drawPattern.call(this, a, b, c, d, e);++this._renderTarget.updateCount }, fillRect: function(a, b, c, d, e) { ic.prototype.fillRect.call(this, a, b, c, d, e);++this._renderTarget.updateCount }, __class__: ji });
    var Ja =
        function(a, b) { Bf.call(this, a, b) };
    g["flambe.platform.html.HtmlAssetPackLoader"] = Ja;
    Ja.__name__ = ["flambe", "platform", "html", "HtmlAssetPackLoader"];
    Ja.detectImageFormats = function(a) {
        var b = [J.PNG, J.JPG, J.GIF],
            c = 2,
            d;
        d = window.document.createElement("img");
        d.onload = d.onerror = function() { 1 == d.width && b.unshift(J.WEBP);--c;
            0 == c && a(b) };
        d.src = "data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";
        var e;
        e = window.document.createElement("img");
        e.onload = e.onerror = function() {
            1 == e.width && b.unshift(J.JXR);
            --c;
            0 == c && a(b)
        };
        e.src = "data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="
    };
    Ja.detectAudioFormats = function() {
        var a;
        a = window.document.createElement("audio");
        if (null == a || null == n(a, a.canPlayType)) return [];
        var b = new Qc("\\b(iPhone|iPod|iPad|Windows Phone)\\b", ""),
            c = window.navigator.userAgent;
        if (!Da.get_supported() && b.match(c)) return [];
        for (var b = [{
                format: J.M4A,
                mimeType: "audio/mp4; codecs=mp4a"
            }, { format: J.MP3, mimeType: "audio/mpeg" }, { format: J.OPUS, mimeType: "audio/ogg; codecs=opus" }, { format: J.OGG, mimeType: "audio/ogg; codecs=vorbis" }, { format: J.WAV, mimeType: "audio/wav" }], c = [], d = 0; d < b.length;) { var e = b[d];++d; var f = ""; try { f = a.canPlayType(e.mimeType) } catch (j) {} "" != f && c.push(e.format) }
        return c
    };
    Ja.supportsBlob = function() {
        if (Ja._detectBlobSupport) {
            Ja._detectBlobSupport = !1;
            if ((new Qc("\\bSilk\\b", "")).match(window.navigator.userAgent) || null == window.Blob) return !1;
            var a = new XMLHttpRequest;
            a.open("GET", ".", !0);
            if ("" != a.responseType) return !1;
            a.responseType = "blob";
            if ("blob" != a.responseType) return !1;
            Ja._URL = la.loadExtension("URL").value
        }
        return null != Ja._URL && null != Ja._URL.createObjectURL
    };
    Ja.__super__ = Bf;
    Ja.prototype = l(Bf.prototype, {
        loadEntry: function(a, b) {
            var c = this;
            switch (b.format[1]) {
                case 0:
                case 1:
                case 2:
                case 3:
                case 4:
                    var d;
                    d = window.document.createElement("img");
                    var e = new Ig;
                    e.addDisposingListener(d, "load", function() {
                        Ja.supportsBlob() && Ja._URL.revokeObjectURL(d.src);
                        var a = c._platform.getRenderer().createTextureFromImage(d);
                        null != a ? c.handleLoad(b, a) : c.handleTextureError(b)
                    });
                    e.addDisposingListener(d, "error", function() { c.handleError(b, "Failed to load image") });
                    Ja.supportsBlob() ? this.download(a, b, "blob", function(a) { d.src = Ja._URL.createObjectURL(a) }) : d.src = a;
                    break;
                case 5:
                case 6:
                case 7:
                    this.download(a, b, "arraybuffer", function() { var a = c._platform.getRenderer().createCompressedTexture(b.format, null);
                        null != a ? c.handleLoad(b, a) : c.handleTextureError(b) });
                    break;
                case 8:
                case 9:
                case 10:
                case 11:
                case 12:
                    if (Da.get_supported()) this.download(a,
                        b, "arraybuffer",
                        function(a) { Da.ctx.decodeAudioData(a, function(a) { c.handleLoad(b, new Da(a)) }, function() { c.handleLoad(b, Vc.getInstance()) }) });
                    else {
                        var f;
                        f = window.document.createElement("audio");
                        f.preload = "auto";
                        var j = ++Ja._mediaRefCount;
                        null == Ja._mediaElements && (Ja._mediaElements = new Ec);
                        Ja._mediaElements.set(j, f);
                        e = new Ig;
                        e.addDisposingListener(f, "canplaythrough", function() { Ja._mediaElements.remove(j);
                            c.handleLoad(b, new Lg(f)) });
                        e.addDisposingListener(f, "error", function() {
                            Ja._mediaElements.remove(j);
                            var a = f.error.code;
                            3 == a || 4 == a ? c.handleLoad(b, Vc.getInstance()) : c.handleError(b, "Failed to load audio: " + f.error.code)
                        });
                        e.addListener(f, "progress", function() { if (0 < f.buffered.length && 0 < f.duration) { var a = f.buffered.end(0) / f.duration;
                                c.handleProgress(b, a * b.bytes | 0) } });
                        f.src = a;
                        f.load()
                    }
                    break;
                case 13:
                    this.download(a, b, "text", function(a) { c.handleLoad(b, new Gg(a)) })
            }
        },
        getAssetFormats: function(a) {
            var b = this;
            null == Ja._supportedFormats && (Ja._supportedFormats = new Af, Ja.detectImageFormats(function(a) { Ja._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(Ja.detectAudioFormats()).concat([J.Data])) }));
            Ja._supportedFormats.get(a)
        },
        download: function(a, b, c, d) {
            var e = this,
                f = null,
                j = null,
                p = 0,
                va = !1,
                h = function() { va && (va = !1, window.clearInterval(p)) },
                g = 3,
                i = function() {--g; return 0 <= g ? (j(), !0) : !1 },
                j = function() {
                    h();
                    null != f && f.abort();
                    f = new XMLHttpRequest;
                    f.open("GET", a, !0);
                    f.responseType = c;
                    var j = 0;
                    f.onprogress = function(a) { va || (va = !0, p = window.setInterval(function() { 4 != f.readyState && 5E3 < Date.now() - j && !i() && (h(), e.handleError(b, "Download stalled")) }, 1E3));
                        j = Date.now();
                        e.handleProgress(b, a.loaded) };
                    f.onerror = function() {
                        if (0 !=
                            f.status || !i()) h(), e.handleError(b, "HTTP error " + f.status)
                    };
                    f.onload = function() { var a = f.response;
                        null == a && (a = f.responseText);
                        h();
                        d(a) };
                    f.send()
                };
            j()
        },
        __class__: Ja
    });
    var Ll = function() {};
    g["flambe.subsystem.ExternalSystem"] = Ll;
    Ll.__name__ = ["flambe", "subsystem", "ExternalSystem"];
    Ll.prototype = { __class__: Ll };
    var Vh = function() {};
    g["flambe.platform.html.HtmlExternal"] = Vh;
    Vh.__name__ = ["flambe", "platform", "html", "HtmlExternal"];
    Vh.__interfaces__ = [Ll];
    Vh.prototype = {
        call: function(a, b) {
            null == b && (b = []);
            for (var c =
                    window, d = c, e = 0, f = a.split("."); e < f.length;) { var j = f[e];++e;
                c = d;
                d = y.field(c, j) }
            return d.apply(c, b)
        },
        __class__: Vh
    };
    var Ph = function(a, b) { Wc.call(this, a);
        this._canvas = b };
    g["flambe.platform.html.HtmlMouse"] = Ph;
    Ph.__name__ = ["flambe", "platform", "html", "HtmlMouse"];
    Ph.__super__ = Wc;
    Ph.prototype = l(Wc.prototype, { set_cursor: function(a) { var b; switch (a[1]) {
                case 0:
                    b = ""; break;
                case 1:
                    b = "pointer"; break;
                case 2:
                    b = "none" } this._canvas.style.cursor = b; return Wc.prototype.set_cursor.call(this, a) }, __class__: Ph });
    var Lg = function(a) {
        this._disposed = !1;
        this.audioElement = a
    };
    g["flambe.platform.html.HtmlSound"] = Lg;
    Lg.__name__ = ["flambe", "platform", "html", "HtmlSound"];
    Lg.__interfaces__ = [ag];
    Lg.__super__ = Vb;
    Lg.prototype = l(Vb.prototype, { play: function(a) { null == a && (a = 1); return new Mg(this, a, !1) }, loop: function(a) { null == a && (a = 1); return new Mg(this, a, !0) }, get_duration: function() { return this.audioElement.duration }, onDisposed: function() { this.audioElement = null }, __class__: Lg, __properties__: { get_duration: "get_duration" } });
    var Mg = function(a, b, c) {
        var d = this;
        this._sound =
            a;
        this._tickableAdded = !1;
        this._clonedElement = window.document.createElement("audio");
        this._clonedElement.loop = c;
        this._clonedElement.src = a.audioElement.src;
        this.volume = new Ca(b, function() { d.updateVolume() });
        this.updateVolume();
        this._complete = new Cb(!1);
        this.playAudio();
        w.hidden._value && this.set_paused(!0)
    };
    g["flambe.platform.html._HtmlSound.HtmlPlayback"] = Mg;
    Mg.__name__ = ["flambe", "platform", "html", "_HtmlSound", "HtmlPlayback"];
    Mg.__interfaces__ = [hi, bg];
    Mg.prototype = {
        set_paused: function(a) {
            this._clonedElement.paused !=
                a && (a ? this._clonedElement.pause() : this.playAudio());
            return a
        },
        get_complete: function() { return this._complete },
        update: function(a) { this.volume.update(a);
            this._complete.set__(this._clonedElement.ended); return this._complete._value || this._clonedElement.paused ? (this._tickableAdded = !1, this._volumeBinding.dispose(), this._hideBinding.dispose(), !0) : !1 },
        dispose: function() { this.set_paused(!0);
            this._complete.set__(!0) },
        playAudio: function() {
            var a = this;
            this._clonedElement.loop && !Rc.instance.musicPlaying && (Rc.instance.musicPlaying = !0, this._clonedElement.play(), this._tickableAdded || (Rc.instance.mainLoop.addTickable(this), this._tickableAdded = !0, this._volumeBinding = w.volume.get_changed().connect(function() { a.updateVolume() }), this._hideBinding = w.hidden.get_changed().connect(function(b) { b ? (a._wasPaused = a._clonedElement.paused, a.set_paused(!0)) : a.set_paused(a._wasPaused) })))
        },
        updateVolume: function() { this._clonedElement.volume = w.volume._value * this.volume._value },
        __class__: Mg,
        __properties__: { get_complete: "get_complete", set_paused: "set_paused" }
    };
    var Ml = function() {};
    g["flambe.subsystem.StageSystem"] = Ml;
    Ml.__name__ = ["flambe", "subsystem", "StageSystem"];
    Ml.prototype = { __class__: Ml };
    var Dg = function(a) {
        var b = this;
        this._canvas = a;
        this.resize = new ia;
        this.scaleFactor = 1;
        la.SHOULD_HIDE_MOBILE_BROWSER && (window.addEventListener("orientationchange", function() { la.callLater(n(b, b.hideMobileBrowser), 200) }, !1), this.hideMobileBrowser());
        window.addEventListener("resize", n(this, this.onWindowResize), !1);
        this.onWindowResize(null);
        this.orientation = new Cb(null);
        null !=
            window.orientation && (window.addEventListener("orientationchange", n(this, this.onOrientationChange), !1), this.onOrientationChange(null));
        this.fullscreen = new Cb(!1);
        la.addVendorListener(window.document, "fullscreenchange", function() { b.updateFullscreen() }, !1);
        this.updateFullscreen()
    };
    g["flambe.platform.html.HtmlStage"] = Dg;
    Dg.__name__ = ["flambe", "platform", "html", "HtmlStage"];
    Dg.__interfaces__ = [Ml];
    Dg.prototype = {
        get_width: function() { return this._canvas.width },
        get_height: function() { return this._canvas.height },
        onWindowResize: function() { var a = this._canvas.parentElement.getBoundingClientRect();
            this.resizeCanvas(a.width, a.height) },
        resizeCanvas: function(a, b) { var c = this.scaleFactor * a,
                d = this.scaleFactor * b; if (this._canvas.width == c && this._canvas.height == d) return !1;
            this._canvas.width = c | 0;
            this._canvas.height = d | 0;
            this.resize.emit(); return !0 },
        hideMobileBrowser: function() {
            var a = this,
                b = window.document.documentElement.style;
            b.height = window.innerHeight + 100 + "px";
            b.width = window.innerWidth + "px";
            b.overflow = "visible";
            la.callLater(function() {
                la.hideMobileBrowser();
                la.callLater(function() { b.height = window.innerHeight + "px";
                    a.onWindowResize(null) }, 100)
            })
        },
        onOrientationChange: function() { this.orientation.set__(la.orientation(window.orientation)) },
        updateFullscreen: function() { this.fullscreen.set__(!0 == la.loadFirstExtension(["fullscreen", "fullScreen", "isFullScreen"], window.document).value) },
        __class__: Dg,
        __properties__: { get_height: "get_height", get_width: "get_width" }
    };
    var Th = function(a) { this._storage = a };
    g["flambe.platform.html.HtmlStorage"] = Th;
    Th.__name__ = ["flambe", "platform",
        "html", "HtmlStorage"
    ];
    Th.__interfaces__ = [fi];
    Th.prototype = { set: function(a, b) { var c; try { var d = new Ce;
                d.useCache = !0;
                d.useEnumIndex = !1;
                d.serialize(b);
                c = d.toString() } catch (e) { return !1 } try { this._storage.setItem("flambe:" + a, c) } catch (f) { return !1 } return !0 }, get: function(a, b) { var c = null; try { c = this._storage.getItem("flambe:" + a) } catch (d) { null } if (null != c) try { return xb.run(c) } catch (e) { null }
            return b }, __class__: Th };
    var la = function() {};
    g["flambe.platform.html.HtmlUtil"] = la;
    la.__name__ = ["flambe", "platform", "html",
        "HtmlUtil"
    ];
    la.callLater = function(a, b) { null == b && (b = 0);
        window.setTimeout(a, b) };
    la.hideMobileBrowser = function() { window.scrollTo(1, 0) };
    la.loadExtension = function(a, b) { null == b && (b = window); var c = y.field(b, a); if (null != c) return { prefix: "", field: a, value: c }; for (var c = a.charAt(0).toUpperCase() + N.substr(a, 1, null), d = 0, e = la.VENDOR_PREFIXES; d < e.length;) { var f = e[d];++d; var j = f + c,
                p = y.field(b, j); if (null != p) return { prefix: f, field: j, value: p } } return { prefix: null, field: null, value: null } };
    la.loadFirstExtension = function(a, b) {
        for (var c =
                0; c < a.length;) { var d = a[c];++c;
            d = la.loadExtension(d, b); if (null != d.field) return d }
        return { prefix: null, field: null, value: null }
    };
    la.polyfill = function(a, b) { null == b && (b = window); var c = la.loadExtension(a, b).value; if (null == c) return !1;
        b[a] = c; return !0 };
    la.addVendorListener = function(a, b, c, d) { for (var e = 0, f = la.VENDOR_PREFIXES; e < f.length;) { var j = f[e];++e;
            a.addEventListener(j + b, c, d) } a.addEventListener(b, c, d) };
    la.orientation = function(a) { switch (a) {
            case -90:
            case 90:
                return We.Landscape;
            default:
                return We.Portrait } };
    la.createEmptyCanvas =
        function(a, b) { var c;
            c = window.document.createElement("canvas");
            c.width = a;
            c.height = b; return c };
    la.createCanvas = function(a) { var b = la.createEmptyCanvas(a.width, a.height),
            c = b.getContext("2d");
        c.save();
        c.globalCompositeOperation = "copy";
        c.drawImage(a, 0, 0);
        c.restore(); return b };
    la.detectSlowDriver = function(a) { if (0 <= window.navigator.platform.indexOf("Win") && null != window.chrome) { for (var b = 0, a = a.getSupportedExtensions(); b < a.length;) { var c = a[b];++b; if (0 <= c.indexOf("WEBGL_compressed_texture")) return !1 } return !0 } return !1 };
    la.fixAndroidMath = function() { if (0 <= window.navigator.userAgent.indexOf("Linux; U; Android 4")) { var a = Math.sin,
                b = Math.cos;
            Math.sin = function(b) { return 0 == b ? 0 : a(b) };
            Math.cos = function(a) { return 0 == a ? 1 : b(a) } } };
    var Da = function(a) { this._disposed = !1;
        this.buffer = a };
    g["flambe.platform.html.WebAudioSound"] = Da;
    Da.__name__ = ["flambe", "platform", "html", "WebAudioSound"];
    Da.__interfaces__ = [ag];
    Da.__properties__ = { get_supported: "get_supported" };
    Da.get_supported = function() {
        if (Da._detectSupport) {
            Da._detectSupport = !1;
            var a =
                la.loadExtension("AudioContext").value;
            null != a && (Da.ctx = new a, Da.gain = Da.createGain(), Da.gain.connect(Da.ctx.destination), w.volume.watch(function(a) { Da.gain.gain.value = a }))
        }
        return null != Da.ctx
    };
    Da.createGain = function() { return null != Da.ctx.createGain ? Da.ctx.createGain() : Da.ctx.createGainNode() };
    Da.start = function(a, b) { null != a.start ? a.start(b) : a.noteOn(b) };
    Da.__super__ = Vb;
    Da.prototype = l(Vb.prototype, {
        play: function(a) { null == a && (a = 1); return new Ng(this, a, !1) },
        loop: function(a) {
            null == a && (a = 1);
            return new Ng(this,
                a, !0)
        },
        get_duration: function() { return this.buffer.duration },
        onDisposed: function() { this.buffer = null },
        __class__: Da,
        __properties__: { get_duration: "get_duration" }
    });
    var Ng = function(a, b, c) {
        var d = this;
        this._sound = a;
        this._head = Da.gain;
        this._complete = new Cb(!1);
        this._sourceNode = Da.ctx.createBufferSource();
        this._sourceNode.buffer = a.buffer;
        this._sourceNode.loop = c;
        this._sourceNode.onended = function() { d._complete.set__(!0) };
        Da.start(this._sourceNode, 0);
        this.playAudio();
        this.volume = new Ca(b, function(a) { d.setVolume(a) });
        1 != b && this.setVolume(b);
        w.hidden._value && this.set_paused(!0)
    };
    g["flambe.platform.html._WebAudioSound.WebAudioPlayback"] = Ng;
    Ng.__name__ = ["flambe", "platform", "html", "_WebAudioSound", "WebAudioPlayback"];
    Ng.__interfaces__ = [hi, bg];
    Ng.prototype = {
        set_paused: function(a) { a != 0 <= this._pausedAt && (a ? (this._sourceNode.disconnect(), this._pausedAt = this.get_position()) : this.playAudio()); return a },
        get_complete: function() { return this._complete },
        get_position: function() {
            return this._complete._value ? this._sound.get_duration() :
                0 <= this._pausedAt ? this._pausedAt : (Da.ctx.currentTime - this._startedAt) % this._sound.get_duration()
        },
        update: function(a) { this.volume.update(a);
            3 == this._sourceNode.playbackState && this._complete.set__(!0); return this._complete._value || 0 <= this._pausedAt ? (this._tickableAdded = !1, this._hideBinding.dispose(), !0) : !1 },
        dispose: function() { this.set_paused(!0);
            this._complete.set__(!0) },
        setVolume: function(a) {
            null == this._gainNode && (this._gainNode = Da.createGain(), this.insertNode(this._gainNode));
            this._gainNode.gain.value =
                a
        },
        insertNode: function(a) { 0 <= this._pausedAt || (this._sourceNode.disconnect(), this._sourceNode.connect(a));
            a.connect(this._head);
            this._head = a },
        playAudio: function() { var a = this;
            this._sourceNode.connect(this._head);
            this._startedAt = Da.ctx.currentTime;
            this._pausedAt = -1;
            this._tickableAdded || (Rc.instance.mainLoop.addTickable(this), this._tickableAdded = !0, this._hideBinding = w.hidden.get_changed().connect(function(b) { b ? (a._wasPaused = 0 <= a._pausedAt, a.set_paused(!0)) : a.set_paused(a._wasPaused) })) },
        __class__: Ng,
        __properties__: { get_position: "get_position", get_complete: "get_complete", set_paused: "set_paused" }
    };
    var Nl = function(a) {
        this._quads = this._maxQuads = this._dataOffset = this._backbufferWidth = this._backbufferHeight = 0;
        this._pendingSetScissor = !1;
        this._lastBlendMode = this._lastRenderTarget = this._lastShader = this._lastTexture = this._lastScissor = this._currentBlendMode = this._currentShader = this._currentTexture = this._currentRenderTarget = null;
        this._gl = a;
        a.clearColor(0, 0, 0, 0);
        a.enable(3042);
        a.pixelStorei(37441, 1);
        this._vertexBuffer =
            a.createBuffer();
        a.bindBuffer(34962, this._vertexBuffer);
        this._quadIndexBuffer = a.createBuffer();
        a.bindBuffer(34963, this._quadIndexBuffer);
        this._drawTextureShader = new ki(a);
        this._drawPatternShader = new li(a);
        this._fillRectShader = new mi(a);
        this.resize(16)
    };
    g["flambe.platform.html.WebGLBatcher"] = Nl;
    Nl.__name__ = ["flambe", "platform", "html", "WebGLBatcher"];
    Nl.prototype = {
        resizeBackbuffer: function(a, b) { this._gl.viewport(0, 0, a, b);
            this._backbufferWidth = a;
            this._backbufferHeight = b },
        willRender: function() {},
        didRender: function() { this.flush() },
        bindTexture: function(a) { this.flush();
            this._currentTexture = this._lastTexture = null;
            this._gl.bindTexture(3553, a) },
        deleteTexture: function(a) { null != this._lastTexture && this._lastTexture.root == a && (this.flush(), this._currentTexture = this._lastTexture = null);
            this._gl.deleteTexture(a.nativeTexture) },
        bindFramebuffer: function(a) { a != this._lastRenderTarget && (this.flush(), this.bindRenderTarget(a)) },
        deleteFramebuffer: function(a) {
            a == this._lastRenderTarget && (this.flush(), this._currentRenderTarget = this._lastRenderTarget =
                null);
            this._gl.deleteFramebuffer(a.framebuffer)
        },
        prepareDrawTexture: function(a, b, c, d) { d != this._lastTexture && (this.flush(), this._lastTexture = d); return this.prepareQuad(5, a, b, c, this._drawTextureShader) },
        prepareDrawPattern: function(a, b, c, d) { d != this._lastTexture && (this.flush(), this._lastTexture = d); return this.prepareQuad(5, a, b, c, this._drawPatternShader) },
        prepareFillRect: function(a, b, c) { return this.prepareQuad(6, a, b, c, this._fillRectShader) },
        prepareQuad: function(a, b, c, d, e) {
            b != this._lastRenderTarget && (this.flush(),
                this._lastRenderTarget = b);
            c != this._lastBlendMode && (this.flush(), this._lastBlendMode = c);
            e != this._lastShader && (this.flush(), this._lastShader = e);
            if (null != d || null != this._lastScissor)
                if (null == d || null == this._lastScissor || !this._lastScissor.equals(d)) this.flush(), this._lastScissor = null != d ? d.clone(this._lastScissor) : null, this._pendingSetScissor = !0;
            this._quads >= this._maxQuads && this.resize(2 * this._maxQuads);
            ++this._quads;
            b = this._dataOffset;
            this._dataOffset += 4 * a;
            return b
        },
        flush: function() {
            if (!(1 > this._quads)) {
                this._lastRenderTarget !=
                    this._currentRenderTarget && this.bindRenderTarget(this._lastRenderTarget);
                if (this._lastBlendMode != this._currentBlendMode) { switch (this._lastBlendMode[1]) {
                        case 0:
                            this._gl.blendFunc(1, 771); break;
                        case 1:
                            this._gl.blendFunc(1, 1); break;
                        case 2:
                            this._gl.blendFunc(774, 771); break;
                        case 3:
                            this._gl.blendFunc(1, 769); break;
                        case 4:
                            this._gl.blendFunc(0, 770); break;
                        case 5:
                            this._gl.blendFunc(1, 0) } this._currentBlendMode = this._lastBlendMode } this._pendingSetScissor && (null != this._lastScissor ? (this._gl.enable(3089), this._gl.scissor(this._lastScissor.x |
                    0, this._lastScissor.y | 0, this._lastScissor.width | 0, this._lastScissor.height | 0)) : this._gl.disable(3089), this._pendingSetScissor = !1);
                this._lastTexture != this._currentTexture && (this._gl.bindTexture(3553, this._lastTexture.root.nativeTexture), this._currentTexture = this._lastTexture);
                this._lastShader != this._currentShader && (this._lastShader.useProgram(), this._lastShader.prepare(), this._currentShader = this._lastShader);
                if (this._lastShader == this._drawPatternShader) {
                    var a = this._lastTexture,
                        b = a.root;
                    this._drawPatternShader.setRegion(a.rootX /
                        b.width, a.rootY / b.height, a._width / b.width, a._height / b.height)
                }
                this._gl.bufferData(34962, this.data.subarray(0, this._dataOffset), 35040);
                this._gl.drawElements(4, 6 * this._quads, 5123, 0);
                this._dataOffset = this._quads = 0
            }
        },
        resize: function(a) {
            this.flush();
            if (!(1024 < a)) {
                this._maxQuads = a;
                this.data = new Float32Array(24 * a);
                this._gl.bufferData(34962, 4 * this.data.length, 35040);
                for (var b = new Uint16Array(6 * a), c = 0; c < a;) { var d = c++;
                    b[6 * d] = 4 * d;
                    b[6 * d + 1] = 4 * d + 1;
                    b[6 * d + 2] = 4 * d + 2;
                    b[6 * d + 3] = 4 * d + 2;
                    b[6 * d + 4] = 4 * d + 3;
                    b[6 * d + 5] = 4 * d } this._gl.bufferData(34963,
                    b, 35044)
            }
        },
        bindRenderTarget: function(a) { null != a ? (this._gl.bindFramebuffer(36160, a.framebuffer), this._gl.viewport(0, 0, a.width, a.height)) : (this._gl.bindFramebuffer(36160, null), this._gl.viewport(0, 0, this._backbufferWidth, this._backbufferHeight));
            this._lastRenderTarget = this._currentRenderTarget = a },
        __class__: Nl
    };
    var Xc = function(a, b) { this._inverseProjection = this._stateList = null;
        null == Xc._scratchQuadArray && (Xc._scratchQuadArray = new Float32Array(8));
        this._batcher = a;
        this._renderTarget = b };
    g["flambe.platform.html.WebGLGraphics"] =
        Xc;
    Xc.__name__ = ["flambe", "platform", "html", "WebGLGraphics"];
    Xc.__interfaces__ = [Jg];
    Xc.prototype = {
        save: function() { var a = this._stateList,
                b = this._stateList.next;
            null == b && (b = new ni, b.prev = a, a.next = b);
            a.matrix.clone(b.matrix);
            b.alpha = a.alpha;
            b.blendMode = a.blendMode;
            b.scissor = null != a.scissor ? a.scissor.clone(b.scissor) : null;
            this._stateList = b },
        translate: function(a, b) { var c = this._stateList.matrix;
            c.m02 += c.m00 * a + c.m01 * b;
            c.m12 += c.m10 * a + c.m11 * b },
        scale: function(a, b) {
            var c = this._stateList.matrix;
            c.m00 *= a;
            c.m10 *=
                a;
            c.m01 *= b;
            c.m11 *= b
        },
        rotate: function(a) { var b = this._stateList.matrix,
                a = 3.141592653589793 * a / 180,
                c = Math.sin(a),
                a = Math.cos(a),
                d = b.m00,
                e = b.m10,
                f = b.m01,
                j = b.m11;
            b.m00 = d * a + f * c;
            b.m10 = e * a + j * c;
            b.m01 = f * a - d * c;
            b.m11 = j * a - e * c },
        transform: function(a, b, c, d, e, f) { var j = this._stateList;
            Xc._scratchMatrix.set(a, b, c, d, e, f);
            Uc.multiply(j.matrix, Xc._scratchMatrix, j.matrix) },
        restore: function() { this._stateList = this._stateList.prev },
        drawTexture: function(a, b, c) { this.drawSubTexture(a, b, c, 0, 0, a.get_width(), a.get_height()) },
        drawSubTexture: function(a,
            b, c, d, e, f, j) { var p = this._stateList,
                va = a.root,
                b = this.transformQuad(b, c, f, j),
                c = va.width,
                va = va.height,
                d = (a.rootX + d) / c,
                e = (a.rootY + e) / va,
                f = d + f / c,
                j = e + j / va,
                c = p.alpha,
                a = this._batcher.prepareDrawTexture(this._renderTarget, p.blendMode, p.scissor, a),
                p = this._batcher.data;
            p[a] = b[0];
            p[++a] = b[1];
            p[++a] = d;
            p[++a] = e;
            p[++a] = c;
            p[++a] = b[2];
            p[++a] = b[3];
            p[++a] = f;
            p[++a] = e;
            p[++a] = c;
            p[++a] = b[4];
            p[++a] = b[5];
            p[++a] = f;
            p[++a] = j;
            p[++a] = c;
            p[++a] = b[6];
            p[++a] = b[7];
            p[++a] = d;
            p[++a] = j;
            p[++a] = c },
        drawPattern: function(a, b, c, d, e) {
            var f = this._stateList,
                j = a.root,
                b = this.transformQuad(b, c, d, e),
                d = d / j.width,
                e = e / j.height,
                j = f.alpha,
                a = this._batcher.prepareDrawPattern(this._renderTarget, f.blendMode, f.scissor, a),
                f = this._batcher.data;
            f[a] = b[0];
            f[++a] = b[1];
            f[++a] = 0;
            f[++a] = 0;
            f[++a] = j;
            f[++a] = b[2];
            f[++a] = b[3];
            f[++a] = d;
            f[++a] = 0;
            f[++a] = j;
            f[++a] = b[4];
            f[++a] = b[5];
            f[++a] = d;
            f[++a] = e;
            f[++a] = j;
            f[++a] = b[6];
            f[++a] = b[7];
            f[++a] = 0;
            f[++a] = e;
            f[++a] = j
        },
        fillRect: function(a, b, c, d, e) {
            var f = this._stateList,
                b = this.transformQuad(b, c, d, e),
                c = (a & 16711680) / 16711680,
                d = (a & 65280) / 65280,
                a =
                (a & 255) / 255,
                e = f.alpha,
                f = this._batcher.prepareFillRect(this._renderTarget, f.blendMode, f.scissor),
                j = this._batcher.data;
            j[f] = b[0];
            j[++f] = b[1];
            j[++f] = c;
            j[++f] = d;
            j[++f] = a;
            j[++f] = e;
            j[++f] = b[2];
            j[++f] = b[3];
            j[++f] = c;
            j[++f] = d;
            j[++f] = a;
            j[++f] = e;
            j[++f] = b[4];
            j[++f] = b[5];
            j[++f] = c;
            j[++f] = d;
            j[++f] = a;
            j[++f] = e;
            j[++f] = b[6];
            j[++f] = b[7];
            j[++f] = c;
            j[++f] = d;
            j[++f] = a;
            j[++f] = e
        },
        multiplyAlpha: function(a) { this._stateList.alpha *= a },
        setBlendMode: function(a) { this._stateList.blendMode = a },
        applyScissor: function(a, b, c, d) {
            var e = this._stateList,
                f = Xc._scratchQuadArray;
            f[0] = a;
            f[1] = b;
            f[2] = a + c;
            f[3] = b + d;
            e.matrix.transformArray(f, 4, f);
            this._inverseProjection.transformArray(f, 4, f);
            a = f[0];
            b = f[1];
            c = f[2] - a;
            d = f[3] - b;
            0 > c && (a += c, c = -c);
            0 > d && (b += d, d = -d);
            e.applyScissor(a, b, c, d)
        },
        willRender: function() { this._batcher.willRender() },
        didRender: function() { this._batcher.didRender() },
        onResize: function(a, b) {
            this._stateList = new ni;
            var c;
            c = null != this._renderTarget ? -1 : 1;
            this._stateList.matrix.set(2 / a, 0, 0, -2 * c / b, -1, c);
            this._inverseProjection = new Uc;
            this._inverseProjection.set(2 /
                a, 0, 0, 2 / b, -1, -1);
            this._inverseProjection.invert()
        },
        transformQuad: function(a, b, c, d) { var c = a + c,
                d = b + d,
                e = Xc._scratchQuadArray;
            e[0] = a;
            e[1] = b;
            e[2] = c;
            e[3] = b;
            e[4] = c;
            e[5] = d;
            e[6] = a;
            e[7] = d;
            this._stateList.matrix.transformArray(e, 8, e); return e },
        __class__: Xc
    };
    var ni = function() { this.scissor = this.prev = this.next = null;
        this.matrix = new Uc;
        this.alpha = 1;
        this.blendMode = Ma.Normal };
    g["flambe.platform.html._WebGLGraphics.DrawingState"] = ni;
    ni.__name__ = ["flambe", "platform", "html", "_WebGLGraphics", "DrawingState"];
    ni.prototype = { applyScissor: function(a, b, c, d) { if (null != this.scissor) var e = Za.max(this.scissor.x, a),
                f = Za.max(this.scissor.y, b),
                c = Za.min(this.scissor.x + this.scissor.width, a + c),
                d = Za.min(this.scissor.y + this.scissor.height, b + d),
                a = e,
                b = f,
                c = c - e,
                d = d - f;
            else this.scissor = new Ab;
            this.scissor.set(Math.round(a), Math.round(b), Math.round(c), Math.round(d)) }, __class__: ni };
    var Wh = function(a, b) {
        var c = this;
        this._hasGPU = new Cb(!0);
        this.gl = b;
        b.canvas.addEventListener("webglcontextlost", function(a) { a.preventDefault();
                c._hasGPU.set__(!1) },
            !1);
        b.canvas.addEventListener("webglcontextrestore", function() { c.init();
            c._hasGPU.set__(!0) }, !1);
        a.resize.connect(n(this, this.onResize));
        this.init()
    };
    g["flambe.platform.html.WebGLRenderer"] = Wh;
    Wh.__name__ = ["flambe", "platform", "html", "WebGLRenderer"];
    Wh.__interfaces__ = [Kg];
    Wh.prototype = {
        get_type: function() { return Gc.WebGL },
        createTextureFromImage: function(a) { if (this.gl.isContextLost()) return null; var b = new Xe(this, a.width, a.height);
            b.uploadImageData(a); return b.createTexture(a.width, a.height) },
        createTexture: function(a,
            b) { if (this.gl.isContextLost()) return null; var c = new Xe(this, a, b);
            c.clear(); return c.createTexture(a, b) },
        getCompressedTextureFormats: function() { return [] },
        createCompressedTexture: function() { this.gl.isContextLost(); return null },
        willRender: function() { this.graphics.willRender() },
        didRender: function() { this.graphics.didRender() },
        onResize: function() { var a = this.gl.canvas.width,
                b = this.gl.canvas.height;
            this.batcher.resizeBackbuffer(a, b);
            this.graphics.onResize(a, b) },
        init: function() {
            this.batcher = new Nl(this.gl);
            this.graphics = new Xc(this.batcher, null);
            this.onResize()
        },
        __class__: Wh,
        __properties__: { get_type: "get_type" }
    };
    var oi = function(a, b, c) { de.call(this, a, b, c) };
    g["flambe.platform.html.WebGLTexture"] = oi;
    oi.__name__ = ["flambe", "platform", "html", "WebGLTexture"];
    oi.__super__ = de;
    oi.prototype = l(de.prototype, { __class__: oi });
    var Xe = function(a, b, c) {
        this.framebuffer = this._graphics = null;
        this._disposed = !1;
        this._renderer = a;
        this.width = Za.max(2, Kl.nextPowerOfTwo(b));
        this.height = Za.max(2, Kl.nextPowerOfTwo(c));
        b = a.gl;
        this.nativeTexture =
            b.createTexture();
        a.batcher.bindTexture(this.nativeTexture);
        b.texParameteri(3553, 10242, 33071);
        b.texParameteri(3553, 10243, 33071);
        b.texParameteri(3553, 10240, 9729);
        b.texParameteri(3553, 10241, 9729)
    };
    g["flambe.platform.html.WebGLTextureRoot"] = Xe;
    Xe.__name__ = ["flambe", "platform", "html", "WebGLTextureRoot"];
    Xe.__interfaces__ = [gi];
    Xe.drawBorder = function(a, b, c) { var d = a.getContext("2d");
        d.drawImage(a, b - 1, 0, 1, c, b, 0, 1, c);
        d.drawImage(a, 0, c - 1, b, 1, 0, c, b, 1) };
    Xe.__super__ = Vb;
    Xe.prototype = l(Vb.prototype, {
        createTexture: function(a,
            b) { return new oi(this, a, b) },
        uploadImageData: function(a) { if (this.width != a.width || this.height != a.height) { var b = la.createEmptyCanvas(this.width, this.height);
                b.getContext("2d").drawImage(a, 0, 0);
                Xe.drawBorder(b, a.width, a.height);
                a = b } this._renderer.batcher.bindTexture(this.nativeTexture);
            this._renderer.gl.texImage2D(3553, 0, 6408, 6408, 5121, a) },
        clear: function() { this._renderer.batcher.bindTexture(this.nativeTexture);
            this._renderer.gl.texImage2D(3553, 0, 6408, this.width, this.height, 0, 6408, 5121, null) },
        getGraphics: function() {
            if (null ==
                this._graphics) { this._graphics = new Xc(this._renderer.batcher, this);
                this._graphics.onResize(this.width, this.height); var a = this._renderer.gl;
                this.framebuffer = a.createFramebuffer();
                this._renderer.batcher.bindFramebuffer(this);
                a.framebufferTexture2D(36160, 36064, 3553, this.nativeTexture, 0) }
            return this._graphics
        },
        onDisposed: function() { var a = this._renderer.batcher;
            a.deleteTexture(this);
            null != this.framebuffer && a.deleteFramebuffer(this);
            this._graphics = this.framebuffer = this.nativeTexture = null },
        __class__: Xe
    });
    var jc = function(a, b, c) { c = "#ifdef GL_ES\nprecision mediump float;\n#endif\n" + c;
        this._gl = a;
        this._program = a.createProgram();
        a.attachShader(this._program, jc.createShader(a, 35633, b));
        a.attachShader(this._program, jc.createShader(a, 35632, c));
        a.linkProgram(this._program);
        a.useProgram(this._program) };
    g["flambe.platform.shader.ShaderGL"] = jc;
    jc.__name__ = ["flambe", "platform", "shader", "ShaderGL"];
    jc.createShader = function(a, b, c) { b = a.createShader(b);
        a.shaderSource(b, c);
        a.compileShader(b); return b };
    jc.prototype = { useProgram: function() { this._gl.useProgram(this._program) }, prepare: function() { null }, getAttribLocation: function(a) { return this._gl.getAttribLocation(this._program, a) }, getUniformLocation: function(a) { return this._gl.getUniformLocation(this._program, a) }, __class__: jc };
    var li = function(a) {
        jc.call(this, a, "attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
            "varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");
        this.a_pos = this.getAttribLocation("a_pos");
        this.a_uv = this.getAttribLocation("a_uv");
        this.a_alpha = this.getAttribLocation("a_alpha");
        this.u_texture = this.getUniformLocation("u_texture");
        this.u_region = this.getUniformLocation("u_region");
        this.setTexture(0)
    };
    g["flambe.platform.shader.DrawPatternGL"] =
        li;
    li.__name__ = ["flambe", "platform", "shader", "DrawPatternGL"];
    li.__super__ = jc;
    li.prototype = l(jc.prototype, {
        setTexture: function(a) { this._gl.uniform1i(this.u_texture, a) },
        setRegion: function(a, b, c, d) { this._gl.uniform4f(this.u_region, a, b, c, d) },
        prepare: function() {
            this._gl.enableVertexAttribArray(this.a_pos);
            this._gl.enableVertexAttribArray(this.a_uv);
            this._gl.enableVertexAttribArray(this.a_alpha);
            this._gl.vertexAttribPointer(this.a_pos, 2, 5126, !1, 20, 0);
            this._gl.vertexAttribPointer(this.a_uv, 2, 5126, !1, 20,
                8);
            this._gl.vertexAttribPointer(this.a_alpha, 1, 5126, !1, 20, 16)
        },
        __class__: li
    });
    var ki = function(a) {
        jc.call(this, a, "attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}", "varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");
        this.a_pos = this.getAttribLocation("a_pos");
        this.a_uv = this.getAttribLocation("a_uv");
        this.a_alpha = this.getAttribLocation("a_alpha");
        this.u_texture = this.getUniformLocation("u_texture");
        this.setTexture(0)
    };
    g["flambe.platform.shader.DrawTextureGL"] = ki;
    ki.__name__ = ["flambe", "platform", "shader", "DrawTextureGL"];
    ki.__super__ = jc;
    ki.prototype = l(jc.prototype, {
        setTexture: function(a) { this._gl.uniform1i(this.u_texture, a) },
        prepare: function() {
            this._gl.enableVertexAttribArray(this.a_pos);
            this._gl.enableVertexAttribArray(this.a_uv);
            this._gl.enableVertexAttribArray(this.a_alpha);
            this._gl.vertexAttribPointer(this.a_pos, 2, 5126, !1, 20, 0);
            this._gl.vertexAttribPointer(this.a_uv, 2, 5126, !1, 20, 8);
            this._gl.vertexAttribPointer(this.a_alpha, 1, 5126, !1, 20, 16)
        },
        __class__: ki
    });
    var mi = function(a) {
        jc.call(this, a, "attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}", "varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");
        this.a_pos = this.getAttribLocation("a_pos");
        this.a_rgb = this.getAttribLocation("a_rgb");
        this.a_alpha = this.getAttribLocation("a_alpha")
    };
    g["flambe.platform.shader.FillRectGL"] = mi;
    mi.__name__ = ["flambe", "platform", "shader", "FillRectGL"];
    mi.__super__ = jc;
    mi.prototype = l(jc.prototype, {
        prepare: function() {
            this._gl.enableVertexAttribArray(this.a_pos);
            this._gl.enableVertexAttribArray(this.a_rgb);
            this._gl.enableVertexAttribArray(this.a_alpha);
            this._gl.vertexAttribPointer(this.a_pos, 2, 5126, !1, 24, 0);
            this._gl.vertexAttribPointer(this.a_rgb,
                3, 5126, !1, 24, 8);
            this._gl.vertexAttribPointer(this.a_alpha, 1, 5126, !1, 24, 20)
        },
        __class__: mi
    });
    var pi = function() { this._transitor = null;
        k.call(this);
        this.scenes = [];
        this.occludedScenes = [];
        this._root = new A };
    g["flambe.scene.Director"] = pi;
    pi.__name__ = ["flambe", "scene", "Director"];
    pi.__super__ = k;
    pi.prototype = l(k.prototype, {
        get_name: function() { return "Director_69" },
        pushScene: function(a, b) {
            var c = this;
            this.completeTransition();
            var d = this.get_topScene();
            null != d ? this.playTransition(d, a, b, function() { c.hide(d) }) : (this.add(a),
                this.invalidateVisibility())
        },
        popScene: function(a) { var b = this;
            this.completeTransition(); var c = this.get_topScene(); if (null != c) { this.scenes.pop(); var d = this.get_topScene();
                null != d ? this.playTransition(c, d, a, function() { b.hideAndDispose(c) }) : (this.hideAndDispose(c), this.invalidateVisibility()) } },
        unwindToScene: function(a, b) {
            var c = this;
            this.completeTransition();
            var d = this.get_topScene();
            if (null != d) {
                if (d != a) {
                    for (this.scenes.pop(); 0 < this.scenes.length && this.scenes[this.scenes.length - 1] != a;) this.scenes.pop().dispose();
                    this.playTransition(d, a, b, function() { c.hideAndDispose(d) })
                }
            } else this.pushScene(a, b)
        },
        onAdded: function() { this.owner.addChild(this._root) },
        onRemoved: function() { this.completeTransition(); for (var a = 0, b = this.scenes; a < b.length;) { var c = b[a];++a;
                c.dispose() } this.scenes = [];
            this.occludedScenes = [];
            this._root.dispose() },
        onUpdate: function(a) { null != this._transitor && this._transitor.update(a) && this.completeTransition() },
        get_topScene: function() { var a = this.scenes.length; return 0 < a ? this.scenes[a - 1] : null },
        add: function(a) {
            var b =
                this.get_topScene();
            null != b && this._root.removeChild(b);
            N.remove(this.scenes, a);
            this.scenes.push(a);
            this._root.addChild(a)
        },
        hide: function(a) { a = a._compMap.Scene_46;
            null != a && a.hidden.emit() },
        hideAndDispose: function(a) { this.hide(a);
            a.dispose() },
        show: function(a) { a = a._compMap.Scene_46;
            null != a && a.shown.emit() },
        invalidateVisibility: function() {
            for (var a = this.scenes.length; 0 < a;) { var b = this.scenes[--a]._compMap.Scene_46; if (null == b || b.opaque) break } this.occludedScenes = 0 < this.scenes.length ? this.scenes.slice(a,
                this.scenes.length - 1) : [];
            a = this.get_topScene();
            null != a && this.show(a)
        },
        completeTransition: function() { null != this._transitor && (this._transitor.complete(), this._transitor = null, this.invalidateVisibility()) },
        playTransition: function(a, b, c, d) { this.completeTransition();
            this.add(b);
            null != c ? (this.occludedScenes.push(a), this._transitor = new Ol(a, b, c, d), this._transitor.init(this)) : (d(), this.invalidateVisibility()) },
        __class__: pi,
        __properties__: l(k.prototype.__properties__, { get_topScene: "get_topScene" })
    });
    var Ol =
        function(a, b, c, d) { this._from = a;
            this._to = b;
            this._transition = c;
            this._onComplete = d };
    g["flambe.scene._Director.Transitor"] = Ol;
    Ol.__name__ = ["flambe", "scene", "_Director", "Transitor"];
    Ol.prototype = { init: function(a) { this._transition.init(a, this._from, this._to) }, update: function(a) { return this._transition.update(a) }, complete: function() { this._transition.complete();
            this._onComplete() }, __class__: Ol };
    var Og = function() {};
    g["flambe.scene.Transition"] = Og;
    Og.__name__ = ["flambe", "scene", "Transition"];
    Og.prototype = {
        init: function(a,
            b, c) { this._director = a;
            this._from = b;
            this._to = c },
        update: function() { return !0 },
        complete: function() {},
        __class__: Og
    };
    var Ye = function(a, b) { this._duration = a;
        this._ease = null != b ? b : E.linear };
    g["flambe.scene.TweenTransition"] = Ye;
    Ye.__name__ = ["flambe", "scene", "TweenTransition"];
    Ye.__super__ = Og;
    Ye.prototype = l(Og.prototype, {
        init: function(a, b, c) { Og.prototype.init.call(this, a, b, c);
            this._elapsed = 0 },
        update: function(a) { this._elapsed += a; return this._elapsed >= this._duration },
        interp: function(a, b) {
            return a + (b - a) * this._ease(this._elapsed /
                this._duration)
        },
        __class__: Ye
    });
    var qi = function(a, b) { Ye.call(this, a, b) };
    g["flambe.scene.FadeTransition"] = qi;
    qi.__name__ = ["flambe", "scene", "FadeTransition"];
    qi.__super__ = Ye;
    qi.prototype = l(Ye.prototype, {
        init: function(a, b, c) { Ye.prototype.init.call(this, a, b, c);
            a = this._to._compMap.Sprite_19;
            null == a && this._to.add(a = new s);
            a.alpha.set__(0) },
        update: function(a) { a = Ye.prototype.update.call(this, a);
            this._to._compMap.Sprite_19.alpha.set__(this.interp(0, 1)); return a },
        complete: function() { this._to._compMap.Sprite_19.alpha.set__(1) },
        __class__: qi
    });
    var Ze = function(a) { null == a && (a = !0);
        k.call(this);
        this.opaque = a;
        this.shown = new ia;
        this.hidden = new ia };
    g["flambe.scene.Scene"] = Ze;
    Ze.__name__ = ["flambe", "scene", "Scene"];
    Ze.__super__ = k;
    Ze.prototype = l(k.prototype, { get_name: function() { return "Scene_46" }, __class__: Ze });
    var $e = function() {};
    g["flambe.script.Action"] = $e;
    $e.__name__ = ["flambe", "script", "Action"];
    $e.prototype = { __class__: $e };
    var De = function(a, b, c, d) { this._value = a;
        this._to = b;
        this._seconds = c;
        this._easing = d };
    g["flambe.script.AnimateTo"] =
        De;
    De.__name__ = ["flambe", "script", "AnimateTo"];
    De.__interfaces__ = [$e];
    De.prototype = { update: function(a) { null == this._tween && (this._tween = new Fg(this._value._value, this._to, this._seconds, this._easing), this._value.set_behavior(this._tween), this._value.update(a)); if (this._value._behavior != this._tween) { var b = this._tween.elapsed - this._seconds;
                this._tween = null; return 0 < b ? Math.max(0, a - b) : 0 } return -1 }, __class__: De };
    var Db = function(a) { this._fn = a };
    g["flambe.script.CallFunction"] = Db;
    Db.__name__ = ["flambe", "script",
        "CallFunction"
    ];
    Db.__interfaces__ = [$e];
    Db.prototype = { update: function() { this._fn(); return 0 }, __class__: Db };
    var kc = function(a) { this._duration = a;
        this._elapsed = 0 };
    g["flambe.script.Delay"] = kc;
    kc.__name__ = ["flambe", "script", "Delay"];
    kc.__interfaces__ = [$e];
    kc.prototype = { update: function(a) { this._elapsed += a; if (this._elapsed >= this._duration) { var b = this._elapsed - this._duration;
                this._elapsed = 0; return a - b } return -1 }, __class__: kc };
    var dg = function(a) {
        this._completedActions = [];
        this._runningActions = null != a ? a.slice() : []
    };
    g["flambe.script.Parallel"] = dg;
    dg.__name__ = ["flambe", "script", "Parallel"];
    dg.__interfaces__ = [$e];
    dg.prototype = { add: function(a) { this._runningActions.push(a) }, update: function(a, b) { for (var c = !0, d = 0, e = 0, f = this._runningActions.length; e < f;) { var j = e++,
                    p = this._runningActions[j]; if (null != p) { var va = p.update(a, b);
                    0 <= va ? (this._runningActions[j] = null, this._completedActions.push(p), va > d && (d = va)) : c = !1 } } return c ? (this._runningActions = this._completedActions, this._completedActions = [], d) : -1 }, __class__: dg };
    var Bd =
        function() { k.call(this);
            this.stopAll() };
    g["flambe.script.Script"] = Bd;
    Bd.__name__ = ["flambe", "script", "Script"];
    Bd.__super__ = k;
    Bd.prototype = l(k.prototype, { get_name: function() { return "Script_62" }, run: function(a) { a = new ri(a);
            this._handles.push(a); return a }, stopAll: function() { this._handles = [] }, onUpdate: function(a) { for (var b = 0; b < this._handles.length;) { var c = this._handles[b];
                c.removed || 0 <= c.action.update(a, this.owner) ? this._handles.splice(b, 1) : ++b } }, __class__: Bd });
    var ri = function(a) {
        this.removed = !1;
        this.action =
            a
    };
    g["flambe.script._Script.Handle"] = ri;
    ri.__name__ = ["flambe", "script", "_Script", "Handle"];
    ri.__interfaces__ = [Dc];
    ri.prototype = { dispose: function() { this.removed = !0;
            this.action = null }, __class__: ri };
    var Eb = function(a) { this._idx = 0;
        this._runningActions = null != a ? a.slice() : [] };
    g["flambe.script.Sequence"] = Eb;
    Eb.__name__ = ["flambe", "script", "Sequence"];
    Eb.__interfaces__ = [$e];
    Eb.prototype = {
        add: function(a) { this._runningActions.push(a) },
        removeAll: function() { this._idx = 0;
            this._runningActions = [] },
        update: function(a,
            b) { for (var c = 0;;) { var d = this._runningActions[this._idx]; if (null != d)
                    if (d = d.update(a - c, b), 0 <= d) c += d;
                    else return -1;++this._idx; if (this._idx >= this._runningActions.length) { this._idx = 0; break } else if (c > a) return -1 } return c },
        __class__: Eb
    };
    var si = function(a, b, c) { this._strengthX = a;
        this._strengthY = b;
        this._duration = c;
        this._elapsed = 0 };
    g["flambe.script.Shake"] = si;
    si.__name__ = ["flambe", "script", "Shake"];
    si.__interfaces__ = [$e];
    si.prototype = {
        update: function(a, b) {
            var c = b._compMap.Sprite_19;
            null == this._jitterX && (this._jitterX =
                new Ve(c.x._value, this._strengthX), this._jitterY = new Ve(c.y._value, this._strengthY), c.x.set_behavior(this._jitterX), c.y.set_behavior(this._jitterY));
            this._elapsed += a;
            if (this._elapsed >= this._duration) { var d = this._elapsed - this._duration;
                c.x._behavior == this._jitterX && c.x.set__(this._jitterX.base);
                c.y._behavior == this._jitterY && c.y.set__(this._jitterY.base);
                this._jitterY = this._jitterX = null;
                this._elapsed = 0; return a - d }
            return -1
        },
        __class__: si
    };
    var Gc = g["flambe.subsystem.RendererType"] = {
        __ename__: ["flambe",
            "subsystem", "RendererType"
        ],
        __constructs__: ["Stage3D", "WebGL", "Canvas"]
    };
    Gc.Stage3D = ["Stage3D", 0];
    Gc.Stage3D.toString = r;
    Gc.Stage3D.__enum__ = Gc;
    Gc.WebGL = ["WebGL", 1];
    Gc.WebGL.toString = r;
    Gc.WebGL.__enum__ = Gc;
    Gc.Canvas = ["Canvas", 2];
    Gc.Canvas.toString = r;
    Gc.Canvas.__enum__ = Gc;
    var ti = function() {};
    g["flambe.swf.Symbol"] = ti;
    ti.__name__ = ["flambe", "swf", "Symbol"];
    ti.prototype = { __class__: ti };
    var ui = function(a, b) {
        this._name = a.symbol;
        var c = a.rect;
        this.texture = b.subTexture(c[0], c[1], c[2], c[3]);
        c = a.origin;
        null !=
            c ? (this.anchorX = c[0], this.anchorY = c[1]) : this.anchorY = this.anchorX = 0
    };
    g["flambe.swf.BitmapSymbol"] = ui;
    ui.__name__ = ["flambe", "swf", "BitmapSymbol"];
    ui.__interfaces__ = [ti];
    ui.prototype = { createSprite: function() { var a = new V(this.texture);
            a.setAnchor(this.anchorX, this.anchorY); return a }, __class__: ui };
    var Pl = function(a, b) {
        this._file = a.getFile(b + "/library.json");
        var c = JSON.parse(this._file.toString());
        this._symbols = new K;
        this.frameRate = c.frameRate;
        for (var d = [], e = 0, f = c.movies; e < f.length;) {
            var j = f[e];
            ++e;
            j =
                new vi(this, j);
            d.push(j);
            this._symbols.set(j._name, j)
        }
        c = c.textureGroups;
        (1 != c[0].scaleFactor || 1 < c.length) && null;
        c = c[0].atlases;
        for (e = 0; e < c.length;) { var p = c[e];++e;
            f = a.getTexture(b + "/" + kb.removeFileExtension(p.file));
            j = 0; for (p = p.textures; j < p.length;) { var va = p[j];++j;
                va = new ui(va, f);
                this._symbols.set(va._name, va) } }
        for (c = 0; c < d.length;) {
            f = d[c];
            ++c;
            e = 0;
            for (f = f.layers; e < f.length;) {
                j = f[e];
                ++e;
                j = j.keyframes;
                p = j.length;
                for (va = 0; va < p;) {
                    var h = va++,
                        g = j[h];
                    if (null != g.symbolName) {
                        var i = this._symbols.get(g.symbolName);
                        g.symbol = i
                    }
                    if (g.tweened && 1 == g.duration && h + 1 < p && (h = j[h + 1], !h.visible || null == h.symbolName)) g.visible = !1
                }
            }
        }
    };
    g["flambe.swf.Library"] = Pl;
    Pl.__name__ = ["flambe", "swf", "Library"];
    Pl.prototype = { createSprite: function(a, b) { null == b && (b = !0); var c = this._symbols.get(a); if (null == c) { if (b) throw kb.withFields("Missing symbol", ["name", a]); return null } return c.createSprite() }, __class__: Pl };
    var Pg = function(a) {
        this._looped = null;
        s.call(this);
        this.symbol = a;
        this.speed = new Ca(1);
        this._animators = Array(a.layers.length);
        for (var b =
                0, c = this._animators.length; b < c;) { var d = b++;
            this._animators[d] = new Ql(a.layers[d]) } this._position = this._frame = 0;
        this["goto"](1)
    };
    g["flambe.swf.MovieSprite"] = Pg;
    Pg.__name__ = ["flambe", "swf", "MovieSprite"];
    Pg.__super__ = s;
    Pg.prototype = l(s.prototype, {
        getLayer: function(a, b) { null == b && (b = !0); for (var c = 0, d = this._animators; c < d.length;) { var e = d[c];++c; if (e.layer.name == a) return e.content } if (b) throw kb.withFields("Missing layer", ["name", a]); return null },
        onAdded: function() {
            s.prototype.onAdded.call(this);
            for (var a =
                    0, b = this._animators; a < b.length;) { var c = b[a];++a;
                this.owner.addChild(c.content) }
        },
        onRemoved: function() { s.prototype.onRemoved.call(this); for (var a = 0, b = this._animators; a < b.length;) { var c = b[a];++a;
                this.owner.removeChild(c.content) } },
        onUpdate: function(a) {
            s.prototype.onUpdate.call(this, a);
            this.speed.update(a);
            switch (this._flags & 384) {
                case 0:
                    this._position += this.speed._value * a;
                    this._position > this.symbol.duration && (this._position %= this.symbol.duration, null != this._looped && this._looped.emit());
                    break;
                case 256:
                    this._flags &=
                        -257
            }
            this["goto"](this._position * this.symbol.frameRate)
        },
        "goto": function(a) { if (this._frame != a) { if (a < this._frame)
                    for (var b = 0, c = this._animators; b < c.length;) { var d = c[b];++b;
                        d.needsKeyframeUpdate = !0;
                        d.keyframeIdx = 0 } b = 0; for (c = this._animators; b < c.length;) d = c[b], ++b, d.composeFrame(a);
                this._frame = a } },
        set_position: function(a) { return this._position = Za.clamp(a, 0, this.symbol.duration) },
        get_looped: function() { null == this._looped && (this._looped = new ia); return this._looped },
        set_pixelSnapping: function(a) {
            for (var b =
                    0, c = this._animators; b < c.length;) { var d = c[b];++b;
                d.setPixelSnapping(a) }
            return s.prototype.set_pixelSnapping.call(this, a)
        },
        rewind: function() { this._position = 0;
            this._flags |= 256 },
        __class__: Pg,
        __properties__: l(s.prototype.__properties__, { get_looped: "get_looped", set_position: "set_position" })
    });
    var Ql = function(a) {
        this.keyframeIdx = 0;
        this.needsKeyframeUpdate = !1;
        this.layer = a;
        this.content = new A;
        if (a.empty) this._sprites = null;
        else {
            this._sprites = Array(a.keyframes.length);
            for (var b = 0, c = this._sprites.length; b < c;) {
                var d =
                    b++,
                    e = a.keyframes[d];
                this._sprites[d] = 0 < d && a.keyframes[d - 1].symbol == e.symbol ? this._sprites[d - 1] : null == e.symbol ? new s : e.symbol.createSprite()
            }
            this.content.add(this._sprites[0])
        }
    };
    g["flambe.swf._MovieSprite.LayerAnimator"] = Ql;
    Ql.__name__ = ["flambe", "swf", "_MovieSprite", "LayerAnimator"];
    Ql.prototype = {
        composeFrame: function(a) {
            if (null != this._sprites) {
                var b = this.layer.keyframes,
                    c = b.length - 1;
                if (a > this.layer.frames) this.content._compMap.Sprite_19.set_visible(!1), this.keyframeIdx = c, this.needsKeyframeUpdate = !0;
                else {
                    for (; this.keyframeIdx < c && b[this.keyframeIdx + 1].index <= a;) ++this.keyframeIdx, this.needsKeyframeUpdate = !0;
                    var d;
                    this.needsKeyframeUpdate ? (this.needsKeyframeUpdate = !1, d = this._sprites[this.keyframeIdx], d != this.content._compMap.Sprite_19 && (Y.getClass(d) == Pg && d.rewind(), this.content.add(d))) : d = this.content._compMap.Sprite_19;
                    var e = b[this.keyframeIdx],
                        f = e.visible && null != e.symbol;
                    d.set_visible(f);
                    if (f) {
                        var f = e.x,
                            j = e.y,
                            p = e.scaleX,
                            h = e.scaleY,
                            g = e.skewX,
                            i = e.skewY,
                            k = e.alpha;
                        if (e.tweened && this.keyframeIdx <
                            c) { a = (a - e.index) / e.duration;
                            c = e.ease; if (0 != c) { var l;
                                0 > c ? (l = 1 - a, l = 1 - l * l, c = -c) : l = a * a;
                                a = c * l + (1 - c) * a } b = b[this.keyframeIdx + 1];
                            f += (b.x - f) * a;
                            j += (b.y - j) * a;
                            p += (b.scaleX - p) * a;
                            h += (b.scaleY - h) * a;
                            g += (b.skewX - g) * a;
                            i += (b.skewY - i) * a;
                            k += (b.alpha - k) * a } b = d.getLocalMatrix();
                        a = Math.sin(g);
                        g = Math.cos(g);
                        c = Math.sin(i);
                        i = Math.cos(i);
                        b.set(i * p, c * p, -a * h, g * h, f, j);
                        b.translate(-e.pivotX, -e.pivotY);
                        d.alpha.set__(k)
                    }
                }
            }
        },
        setPixelSnapping: function(a) { for (var b = 0, c = this._sprites; b < c.length;) { var d = c[b];++b;
                d.set_pixelSnapping(a) } },
        __class__: Ql
    };
    var vi = function(a, b) { this._name = b.id;
        this.frameRate = a.frameRate;
        this.frames = 0;
        this.layers = Array(b.layers.length); for (var c = 0, d = this.layers.length; c < d;) { var e = c++,
                f = new Rl(b.layers[e]);
            this.frames = Math.max(f.frames, this.frames);
            this.layers[e] = f } this.duration = this.frames / this.frameRate };
    g["flambe.swf.MovieSymbol"] = vi;
    vi.__name__ = ["flambe", "swf", "MovieSymbol"];
    vi.__interfaces__ = [ti];
    vi.prototype = { createSprite: function() { return new Pg(this) }, __class__: vi };
    var Rl = function(a) {
        this.empty = !0;
        this.name = a.name;
        var b = null;
        this.keyframes = Array(a.keyframes.length);
        for (var c = 0, d = this.keyframes.length; c < d;) { var e = c++,
                b = new Sl(a.keyframes[e], b);
            this.keyframes[e] = b;
            this.empty = this.empty && null == b.symbolName } this.frames = null != b ? b.index + b.duration : 0
    };
    g["flambe.swf.MovieLayer"] = Rl;
    Rl.__name__ = ["flambe", "swf", "MovieLayer"];
    Rl.prototype = { __class__: Rl };
    var Sl = function(a, b) {
        this.ease = 0;
        this.visible = this.tweened = !0;
        this.alpha = 1;
        this.skewX = this.skewY = this.pivotX = this.pivotY = 0;
        this.scaleX = this.scaleY = 1;
        this.x = this.y = 0;
        this.symbol = null;
        this.index = null != b ? b.index + b.duration : 0;
        this.duration = a.duration;
        this.label = a.label;
        this.symbolName = a.ref;
        var c = a.loc;
        null != c && (this.x = c[0], this.y = c[1]);
        c = a.scale;
        null != c && (this.scaleX = c[0], this.scaleY = c[1]);
        c = a.skew;
        null != c && (this.skewX = c[0], this.skewY = c[1]);
        c = a.pivot;
        null != c && (this.pivotX = c[0], this.pivotY = c[1]);
        null != a.alpha && (this.alpha = a.alpha);
        null != a.visible && (this.visible = a.visible);
        null != a.tweened && (this.tweened = a.tweened);
        null != a.ease && (this.ease = a.ease)
    };
    g["flambe.swf.MovieKeyframe"] = Sl;
    Sl.__name__ = ["flambe", "swf", "MovieKeyframe"];
    Sl.prototype = { __class__: Sl };
    var xl = function() {};
    g["flambe.util.Assert"] = xl;
    xl.__name__ = ["flambe", "util", "Assert"];
    xl.that = function() {};
    var Zh = function() {};
    g["flambe.util.BitSets"] = Zh;
    Zh.__name__ = ["flambe", "util", "BitSets"];
    Zh.set = function(a, b, c) { return c ? a | b : a & ~b };
    var Af = function() { this.success = new I;
        this.error = new I;
        this.progressChanged = new ia;
        this.hasResult = !1;
        this._total = this._progress = 0 };
    g["flambe.util.Promise"] = Af;
    Af.__name__ = ["flambe", "util", "Promise"];
    Af.prototype = {
        get_result: function() { if (!this.hasResult) throw "Promise result not yet available"; return this._result },
        set_result: function(a) { if (this.hasResult) throw "Promise result already assigned";
            this._result = a;
            this.hasResult = !0;
            this.success.emit(a); return a },
        get: function(a) { return this.hasResult ? (a(this._result), null) : this.success.connect(a).once() },
        set_progress: function(a) { this._progress != a && (this._progress = a, this.progressChanged.emit()); return a },
        set_total: function(a) {
            this._total !=
                a && (this._total = a, this.progressChanged.emit());
            return a
        },
        __class__: Af,
        __properties__: { set_total: "set_total", set_progress: "set_progress", set_result: "set_result", get_result: "get_result" }
    };
    var wi = function(a) {
        Af.call(this);
        this._promises = a.slice();
        this._successCount = 0;
        this._disposer = new Ta;
        this.onProgressChanged();
        for (var a = this._promises, b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            this._disposer.connect1(c.error, n(this, this.onError));
            this._disposer.connect0(c.progressChanged, n(this, this.onProgressChanged));
            c = c.get(n(this,
                this.onSuccess));
            null != c && this._disposer.add(c)
        }
    };
    g["flambe.util.MultiPromise"] = wi;
    wi.__name__ = ["flambe", "util", "MultiPromise"];
    wi.__super__ = Af;
    wi.prototype = l(Af.prototype, {
        onSuccess: function() { if (null != this._promises && (++this._successCount, this._successCount >= this._promises.length)) { for (var a = [], b = 0, c = this._promises; b < c.length;) { var d = c[b];++b;
                    a.push(d.get_result()) } this.finalize();
                this.set_result(a) } },
        onError: function(a) { null != this._promises && (this.finalize(), this.error.emit(a)) },
        onProgressChanged: function() {
            if (null !=
                this._promises) { for (var a = this._total = this._progress = 0, b = this._promises; a < b.length;) { var c = b[a];++a;
                    this._progress += c._progress;
                    this._total += c._total } this.progressChanged.emit() }
        },
        finalize: function() { this._disposer.dispose();
            this._promises = null },
        __class__: wi
    });
    var ia = function(a) { Kb.call(this, a) };
    g["flambe.util.Signal0"] = ia;
    ia.__name__ = ["flambe", "util", "Signal0"];
    ia.__super__ = Kb;
    ia.prototype = l(Kb.prototype, {
        connect: function(a, b) { null == b && (b = !1); return this.connectImpl(a, b) },
        emit: function() {
            var a = this;
            this._head == Kb.DISPATCHING_SENTINEL ? this.defer(function() { a.emitImpl() }) : this.emitImpl()
        },
        emitImpl: function() { for (var a = this.willEmit(), b = a; null != b;) b._listener(), b.stayInList || b.dispose(), b = b._next;
            this.didEmit(a) },
        __class__: ia
    });
    var ul = function(a) { this.next = null;
        this.fn = a };
    g["flambe.util._SignalBase.Task"] = ul;
    ul.__name__ = ["flambe", "util", "_SignalBase", "Task"];
    ul.prototype = { __class__: ul };
    var kb = function() {};
    g["flambe.util.Strings"] = kb;
    kb.__name__ = ["flambe", "util", "Strings"];
    kb.getFileExtension = function(a) {
        var b =
            a.lastIndexOf(".");
        return 0 < b ? N.substr(a, b + 1, null) : null
    };
    kb.removeFileExtension = function(a) { var b = a.lastIndexOf("."); return 0 < b ? N.substr(a, 0, b) : a };
    kb.getUrlExtension = function(a) { var b = a.lastIndexOf("?");
        0 <= b && (a = N.substr(a, 0, b));
        b = a.lastIndexOf("/");
        0 <= b && (a = N.substr(a, b + 1, null)); return kb.getFileExtension(a) };
    kb.joinPath = function(a, b) { 0 < a.length && 47 != a.charCodeAt(a.length - 1) && (a += "/"); return a + b };
    kb.withFields = function(a, b) {
        var c = b.length;
        if (0 < c) {
            for (var a = 0 < a.length ? a + " [" : a + "[", d = 0; d < c;) {
                0 < d &&
                    (a += ", ");
                var e = b[d],
                    f = b[d + 1];
                if (u.is(f, Error)) { var j = f.stack;
                    null != j && (f = j) } a += e + "=" + u.string(f);
                d += 2
            }
            a += "]"
        }
        return a
    };
    var yi = function() { k.call(this);
        this.sdk = new Wb;
        w.uncaughtError.connect((xi = this.sdk, n(xi, xi.onException)));
        wa.onSuspendToggle = function(a) { w.root.add(new Yf(a ? 0 : 1)) } };
    g["flambesdk.SDKComponent"] = yi;
    yi.__name__ = ["flambesdk", "SDKComponent"];
    yi.__super__ = k;
    yi.prototype = l(k.prototype, { get_name: function() { return "SDKComponent_1" }, onUpdate: function(a) { this.sdk.onUpdate(a) }, __class__: yi });
    var ba = function() {};
    g["game.Analytics"] = ba;
    ba.__name__ = ["game", "Analytics"];
    ba.init = function() { null != m.config.canada_tracking && (ba.canadaTrackingEnabled = m.config.canada_tracking.enabled);
        Ua.initDeltaDNA(m.config, ba.onDeltaDNAReady) };
    ba.onDeltaDNAReady = function() { ba.isReady = !0;
        z.isNewPlayer && ba.track("newPlayer", {});
        ba.track("gameStarted");
        z.trackClientDevice() };
    ba.track = function(a, b) { null == b && (b = {});
        z.track(a, b) };
    ba.trackUI = function(a, b) {
        ba.track("uiInteraction", {
            UIName: a,
            UIAction: "Click",
            UIType: "Button",
            UILocation: b
        })
    };
    ba.trackPlayButton = function() { ba.canadaTrackingEnabled && w._platform.getExternal().call("trackFlashEvent", ["Show Title: Game Title", "play", "true"]) };
    ba.trackMatchStarted = function(a) { a = ba.getMatchData(a);
        ba.track("matchStarted", a) };
    ba.trackMatchSummary = function(a, b, c) {
        null == c && (c = !1);
        a = ba.getMatchData(a);
        a.userScore = m.teamScore;
        a.matchResult = c ? "ABANDON" : m.hasWon ? "WIN" : "LOSS";
        a.totalChecks = m.checks;
        a.totalChecked = m.checked;
        a.superMovesActivated = m.superUsed;
        a.timeSpentInMatch = b;
        ba.track("matchSummary",
            a)
    };
    ba.getMatchData = function(a) {
        var b = m.currentCharacter.name,
            c = "",
            d = "",
            e = "",
            f = "",
            j = "";
        null != a && (a.exists("flag") && (c = a.get("flag").id), a.exists("head") && (d = a.get("head").id), a.exists("shoulders") && (e = a.get("shoulders").id), a.exists("stick") && (f = a.get("stick").id), a.exists("trail") && (j = a.get("trail").id));
        return {
            matchID: "Round " + (m.isTournament ? m.tournamentCount : m.quickMatchCount),
            matchType: m.isTournament ? "Tournament" : "Quick Match",
            userLevel: m.isTournament ? m.game.getLevel(b) : 0,
            characterSelected: null ==
                m.codeCharacter ? b : "Shared " + b,
            flagName: c,
            helmetName: d,
            shoulderPadName: e,
            stickName: f,
            trailName: j,
            opponentName: m.currentOpponent.name
        }
    };
    ba.emitSdkEvent = function(a, b) { od.sendGameEvent(a, b) };
    var Tl = function() {};
    g["game.Debug"] = Tl;
    Tl.__name__ = ["game", "Debug"];
    var rb = function() {};
    g["game.Main"] = rb;
    rb.__name__ = ["game", "Main"];
    rb.main = function() {
        ib.init();
        w.init();
        o.init(q.width, q.height);
        M.defaultTransform = "uppercase";
        var a = new Ua(!0);
        w.root.add(a);
        C.setScenes(zi.scenes);
        C.onChange.connect(rb.onSceneChange);
        D.loadPacks(["config", "ui_loading"], rb.onInitPacksReady)
    };
    rb.onSceneChange = function() { F.killAll() };
    rb.onInitPacksReady = function() {
        m.init();
        rb.removeProperties();
        ba.init();
        ba.emitSdkEvent("onLoadingStart");
        qa.checkPiracy(m.config.nick.url);
        Ua.configure(m.config);
        C.change("Loading", C.createInstantTransition());
        var a = ["text", "fonts", "ui", "ui_title", "levels", "actors", "ai", "ui_character", "ui_customize", "ui_end", "ui_level", "ui_mode", "ui_win", $.packName];
        o.mobile ? a.push("htp_mobile") : a.push("htp");
        af.instance.load(a,
            rb.onBasePacksLoaded)
    };
    rb.onBasePacksLoaded = function() { v.enableMuteStorage = !1;
        v.loadSounds(rb.getSoundPack(), rb.onSoundsLoaded);
        G.setSharedAssets("ui");
        M.addFontPack(D.getPack("fonts"));
        mb.loadXML();
        lc.init("actors", an.components, !0);
        $.init();
        ba.emitSdkEvent("onLoadingEnd");
        C.change(zi.DefaultScene) };
    rb.onSoundsLoaded = function() { v.playMusic("menu", !1, q.musicVolume) };
    rb.getSoundPack = function() { return o.lowMemory ? "sound_mobile" : "sound" };
    rb.removeProperties = function() {
        for (var a = ca.list, b = a.length; 0 <
            b--;) { var c = a[b];
            null != c && !m.config.PGBC && c.team == ca.PGBC && N.remove(a, c) }
    };
    var Q = function(a) { null == a && (a = !0);
        this._disposer = new Ta;
        Ze.call(this, a) };
    g["stolo.ui.BaseScene"] = Q;
    Q.__name__ = ["stolo", "ui", "BaseScene"];
    Q.__super__ = Ze;
    Q.prototype = l(Ze.prototype, {
        dispose: function() { Ze.prototype.dispose.call(this);
            this.set_pack(null) },
        loadAssets: function(a, b) { null == b && (b = !0);
            this._loadedPackName = a;
            this._autoDisposePack = b;
            D.loadPack(a, n(this, this.onAssetsLoaded)) },
        onAssetsLoaded: function(a) { this.set_pack(a) },
        onAssetsReady: function() {},
        onStart: function() { this.owner.add(this._disposer);
            this.makeReady() },
        makeReady: function() { if (!this.isReady && !(null == this._pack || null == this.owner)) this.onAssetsReady(), this.isReady = !0 },
        createButton: function(a, b, c, d, e, f) { null == d && (d = "buttons");
            a = G.createButton(a, b, c, d, this.getPack(f));
            this.addSprite(a, e); return a },
        createImage: function(a, b, c) { a = G.createImage(a, this.getPack(c));
            this.addSprite(a, b); return a },
        createText: function(a, b, c, d) {
            a = M.getLocalizedTextSprite(a, b, 0, 0, d);
            this.addSprite(a,
                c);
            return a
        },
        createTextSprite: function(a, b, c) { b = M.getTextSprite(b, null, 0, 0);
            b.set_text(a);
            this.addSprite(b, c); return b },
        addSprite: function(a, b) { null == b && (b = this.owner); return G.addSprite(a, b) },
        getTexture: function(a, b) { return G.getTexture(a, this.getPack(b)) },
        getPack: function(a) { null == a && (a = this._pack);
            null == a && (a = G.get_sharedAssets()); return a },
        set_pack: function(a) {
            null != this._pack && null != this._loadedPackName && this._autoDisposePack && this._pack != a && (D.disposePack(this._loadedPackName), this._loadedPackName =
                null);
            this._pack = a;
            null != a && this.makeReady();
            return this._pack
        },
        __class__: Q,
        __properties__: l(Ze.prototype.__properties__, { set_pack: "set_pack" })
    });
    var ee = function(a) { this._time = 0;
        Q.call(this);
        this._packName = a };
    g["stolo.ui.PreloadingScene"] = ee;
    ee.__name__ = ["stolo", "ui", "PreloadingScene"];
    ee.__super__ = Q;
    ee.prototype = l(Q.prototype, {
        dispose: function() { Q.prototype.dispose.call(this);
            this._loader = null },
        onStart: function() {
            Q.prototype.onStart.call(this);
            null == this._packName && (this._packName = ee.defaultPack);
            this.loadAssets(this._packName, !1)
        },
        onUpdate: function(a) { Q.prototype.onUpdate.call(this, a);
            this._time += a },
        load: function(a, b) { this.set_loader(D.loadPacks(a, b)); return this._loader },
        setProgress: function() {},
        set_loader: function(a) { this._loader = a;
            null != this._loader && this._disposer.add(this._loader.progressChanged.connect(n(this, this.onLoaderProgress))); return this._loader },
        onLoaderProgress: function() { this.setProgress(this._loader._progress / this._loader._total) },
        __class__: ee,
        __properties__: l(Q.prototype.__properties__, { set_loader: "set_loader" })
    });
    var af = function() { this._wheelSpeed = 90;
        ee.call(this);
        af.instance = this };
    g["game.ui.Loading"] = af;
    af.__name__ = ["game", "ui", "Loading"];
    af.__super__ = ee;
    af.prototype = l(ee.prototype, {
        dispose: function() { ee.prototype.dispose.call(this);
            af.instance == this && (af.instance = null) },
        onAssetsReady: function() {
            this.createImage("bg");
            var a = new yf(this._pack, "font");
            this._txtProgress = new gb(a);
            this._txtProgress.setAlign(Z.Center);
            this._txtProgress.x.set__(q.width / 2);
            this._txtProgress.y.set__(346);
            this.owner.addChild((new A).add(this._txtProgress));
            this._bar = this.createImage("loading_bar");
            this._bar.setXY(0, q.height / 2 - this._bar.getNaturalHeight() / 2);
            this._bar.scissor = new Ab(0, 0, 1, this._bar.getNaturalHeight());
            this._zamboni = this.createImage("zamboni");
            this._zamboni.centerAnchor().setXY(0, 215);
            this._wheelback = this.createImage("wheel", this._zamboni.owner);
            this._wheelback.centerAnchor().setXY(140, 170);
            this._wheelfront = this.createImage("wheel", this._zamboni.owner);
            this._wheelfront.centerAnchor().setXY(275,
                170)
        },
        onUpdate: function(a) { ee.prototype.onUpdate.call(this, a); var b = this._wheelback.rotation;
            b.set__(b._value + this._wheelSpeed * a);
            b = this._wheelfront.rotation;
            b.set__(b._value + this._wheelSpeed * a) },
        setProgress: function(a) { var b = Math.round(100 * a);
            null != this._zamboni && this._zamboni.x.set__(75 + q.width * a);
            null != this._bar && (this._bar.scissor.width = this._bar.getNaturalWidth() * a);
            null != this._txtProgress && this._txtProgress.set_text(b + " %") },
        __class__: af
    });
    var eg = function() { Q.call(this, !1) };
    g["game.ui.Title"] =
        eg;
    eg.__name__ = ["game", "ui", "Title"];
    eg.onClick = function() { ba.emitSdkEvent("onTitleScreenEnd");
        ba.trackUI("Play", "Title");
        v.play("ui_click", "UI");
        v.playMusic("music_menu", !1, q.musicVolume);
        C.change("GameMode") };
    eg.__super__ = Q;
    eg.prototype = l(Q.prototype, {
        onAdded: function() { Q.prototype.onAdded.call(this);
            ba.emitSdkEvent("onTitleScreenStart");
            this.loadAssets("ui_title");
            v.playMusic("music_menu", !1, q.musicVolume) },
        onAssetsReady: function() {
            Q.prototype.onAssetsReady.call(this);
            this.createImage("bg");
            var a =
                this.createImage("title_stick").centerAnchor().setXY(q.width / 2, 140),
                b = this.createImage("title_hockey").centerAnchor().setXY(q.width / 2, 120),
                c = this.createImage("title_stars").centerAnchor().setXY(q.width / 2, 200),
                d = this.createImage("title_nick").centerAnchor().setXY(q.width / 2, 80);
            F.from(b, { x: "-=500" }, { delay: 0.2, time: 0.8, ease: E.quintOut });
            F.from(c, { x: "+=500" }, { delay: 0.4, time: 0.8, ease: E.quintOut });
            F.from(a, { x: "-=500" }, { delay: 0.6, time: 0.8, ease: E.backOut });
            F.from(d, { y: "-=100" }, { delay: 0.8, time: 1, ease: E.bounceOut });
            a = this.createText(w._platform.getTouch().get_supported() ? "PLAY_TOUCH" : "PLAY", "23_white").setXY(480, 492);
            F.from(a, { y: "+=80" }, { delay: 0.1, time: 0.8, ease: E.backOut });
            a.alpha.set_behavior(new db(1, 0.5, 0.5))
        },
        onStart: function() { Q.prototype.onStart.call(this);
            w._platform.getPointer().up.connect(eg.onClick).once() },
        __class__: eg
    });
    var Ai = function() { Q.call(this, !1) };
    g["game.ui.GameMode"] = Ai;
    Ai.__name__ = ["game", "ui", "GameMode"];
    Ai.__super__ = Q;
    Ai.prototype = l(Q.prototype, {
        onAdded: function() {
            Q.prototype.onAdded.call(this);
            this.loadAssets("ui_mode");
            v.playMusic("music_menu", !1, q.musicVolume)
        },
        onAssetsReady: function() {
            Q.prototype.onAssetsReady.call(this);
            this.createImage("bg");
            var a = this.createText("GAME_MODE_TITLE", "title");
            a.setAlign(Z.Left);
            a.setXY(100, 45);
            this._btnQuickMatch = this.createButton(n(this, this.onQuickMatch), "btn_quickmatch", "BTN_QUICK_MATCH");
            this._btnQuickMatch.setXY(440, 160);
            this._btnQuickMatch.label.setXY(400, 220);
            this._btnTournament = this.createButton(n(this, this.onTournament), "btn_tournament", "BTN_TOURNAMENT");
            this._btnTournament.setXY(-50, 150);
            this._btnTournament.label.setXY(440, 185);
            if (m.config.codeEnabled) { var b = this.createButton(n(this, this.onCode), "btn_enter_code", "BTN_CODE").setXY(665, 460),
                    c = b.label.x;
                c.set__(c._value + 8);
                c = b.label.y;
                c.set__(c._value - 3);
                this.owner.addChild(b.owner) } F.from(a, { y: "-=60", alpha: 0 }, { time: 0.7, ease: E.quintOut, delay: 0 })
        },
        onTournament: function() { ba.trackUI("Tournament", "Select Mode");
            v.play("ui_click", "UI");
            m.isTournament = !0;
            C.change("SelectCharacter") },
        onQuickMatch: function() {
            ba.trackUI("Quick Match",
                "Select Mode");
            v.play("ui_click", "UI");
            m.isTournament = !1;
            m.currentLevel = "level1";
            Bi.setSneakPeak();
            C.change("SelectCharacter")
        },
        onCode: function() { ba.trackUI("Enter Code", "Select Mode");
            v.play("ui_click", "UI");
            C.push("CodeEntry") },
        onStop: function() { Q.prototype.onStop.call(this) },
        __class__: Ai
    });
    var Cd = function() { this._loading = !1;
        this._levels = new K;
        this._characterContainer = new A;
        this._btnCodeIndex = 0;
        this._list = ca.list;
        Q.call(this, !1) };
    g["game.ui.SelectCharacter"] = Cd;
    Cd.__name__ = ["game", "ui", "SelectCharacter"];
    Cd.__super__ = Q;
    Cd.prototype = l(Q.prototype, {
        onAdded: function() { Q.prototype.onAdded.call(this);
            this.loadAssets("ui_character");
            v.playMusic("music_menu", !1, q.musicVolume) },
        onAssetsReady: function() {
            Q.prototype.onAssetsReady.call(this);
            null == m.currentCharacter && (m.currentCharacter = ca.leo);
            this._uiPack = D.getPack("ui");
            this.createImage("bg");
            var a = this.createText(m.isTournament ? "TOURNAMENT" : "QUICKMATCH", "title");
            a.setXY(650, 45);
            var b = this.getIndexByName(m.currentCharacter.name); - 1 < b || (b = 0);
            this.select(b);
            this._noCharacter = this.createImage("mystery_avatar");
            this._noCharacter.centerAnchor().setXY(105, 250);
            this.owner.addChild(this._characterContainer);
            this._btnNext = this.createButton(n(this, this.onNext), "btn_play");
            this._btnNext.centerAnchor().setXY(865 + (o.mobile ? 65 : 0), 475 - q.getOffset(200));
            this._btnBack = this.createButton(n(this, this.onBack), "btn_back");
            this._btnBack.setXY(50 + q.getOffset(40), 50);
            this._btnBack.centerAnchor();
            m.config.codeEnabled && (this._btnCode = this.createButton(n(this, this.onCode), "btn_enter_code",
                "BTN_CODE"), b = this._btnCode.label.y, b.set__(b._value - 3), this._btnCode.setXY(224, 162), this._btnCode.owner.addChild((new A).add(new Cf(this._btnCode.getNaturalWidth()))), this._btnCode.set_visible(!1));
            this._btnCustomize = this.createButton(n(this, this.onCustomize), "btn_customize", "BTN_CUSTOMIZE");
            b = this._btnCustomize.label.x;
            b.set__(b._value + 23);
            b = this._btnCustomize.label.y;
            b.set__(b._value + 24);
            this._btnCustomize.setScale(0.85);
            this._btnCustomize.setXY(320 - q.getOffset(65), 420 - q.getOffset(95));
            b = new Cf(175);
            b.setXY(68, 66);
            this._btnCustomize.owner.addChild((new A).add(b));
            this.buildGrid();
            this._characterName = this.createText(m.currentCharacter.name.toUpperCase(), "23_white");
            this._characterName.setAlign(Z.Left);
            this._characterName.setXY(230, 65);
            this._dots = this.createImage("dots");
            this._dots.setXY(230, 95);
            this._description = this.createText("FRIEND_CODE", "23_white");
            this._description.setAlign(Z.Left);
            this._description.setWrapWidth(175);
            this._description.setXY(230, 225);
            this._teamName = this.createText("TEAM_" +
                m.currentCharacter.team.toUpperCase(), "16_white");
            this._teamName.setAlign(Z.Left);
            this._teamName.setWrapWidth(150);
            this._teamName.setXY(230, 120 - this._teamName.getNaturalHeight() / 2);
            this._statBox = new Dd;
            this._statBox.setXY(230, 240);
            this.owner.addChild((new A).add(this._statBox));
            F.from(a, { y: "-=60", alpha: 0 }, { time: 0.7, ease: E.quintOut, delay: 0 });
            a = 0;
            for (b = this._buttons.length; a < b;) { var c = a++;
                F.from(this._buttons[c], { y: "-=100", alpha: 0 }, { time: 0.5, ease: E.backOut, delay: 0.06 * c }) } F.delayCallTo(n(this, this.activateScreen),
                0.06 * this._buttons.length + 0.5, this.owner);
            F.from(this._btnNext, { x: "+=100", alpha: 0 }, { time: 0.7, ease: E.quintOut, delay: 0.5 });
            this._loadingIcon = new fg;
            this._loadingIcon.setXY(140, 250).set_visible(!1);
            this.owner.addChild((new A).add(this._loadingIcon));
            this._characterName.set_visible(!1);
            this._dots.set_visible(!1);
            this._btnCustomize.set_visible(!1);
            m.config.codeEnabled && this._btnCode.set_visible(!1);
            this._description.set_visible(!1);
            this._statBox.set_visible(!1);
            this.loadCharacter("spine/" + m.currentCharacter.name)
        },
        activateScreen: function() { for (var a = 0, b = this._buttons; a < b.length;) { var c = b[a];++a;
                c.set_pointerEnabled(!0) } m.game.characterDone || (C.push("CharacterTuto"), m.game.characterDone = !0, m.game.save()) },
        onStop: function() { Q.prototype.onStop.call(this) },
        onNext: function() {
            v.play("ui_click", "UI");
            null == m.currentCharacter ? (m.currentCharacter = this._codeData.character, m.codeCharacter = this._codeData) : m.codeCharacter = null;
            m.isTournament ? (ba.trackUI("Select Levels", "Select Player"), C.change("SelectLevel")) : (null == m.currentLevel &&
                (m.currentLevel = "level1"), ba.trackPlayButton(), C.change("GameplayLoading"))
        },
        onBack: function() { ba.trackUI("Back", "Select Player");
            v.play("ui_click", "UI");
            C.change("GameMode") },
        onCustomize: function() { ba.trackUI("Customize", "Select Player");
            v.play("ui_click", "UI");
            C.change("CustomizeCharacter") },
        onCode: function() { ba.trackUI("Enter Code", "Select Player");
            v.play("ui_click", "UI");
            C.onPop.connect(n(this, this.onCodeClosed)).once();
            C.push("CodeEntry") },
        onCodeClosed: function() {
            var a = this._buttons[this._btnCodeIndex];
            null == m.game.characterCode ? a.setAlpha(0.5) : (a.updateTexture("characters/mystery"), a.set_pointerEnabled(!0), a.setAlpha(1), m.currentCharacter = ca.leo, this.onButtonClick(a))
        },
        select: function(a) {
            a = this._list[a];
            m.currentCharacter != a && (null != m.currentCharacter && this._levels.get(m.currentCharacter.name).set_visible(!1), m.currentCharacter = a, null == a ? this.selectCodeCharacter() : (this._codeData = null, this._characterName.setText(a.name.toUpperCase(), "23_white"), this._characterName.setAlign(Z.Left), this._teamName.setText("TEAM_" +
                a.team.toUpperCase()), this._teamName.setAlign(Z.Left), this._btnNext.set_visible(!0), null != this._character && this._characterContainer.removeChild(this._character), this.updateStats(), m.config.vo && v.play(m.currentCharacter.name + "_select", "VO"), this.loadCharacter("spine/" + m.currentCharacter.name)))
        },
        selectCodeCharacter: function() {
            null == m.game.characterCode ? (this._btnNext.set_visible(!1), this.updateStats(), null != this._character && this._characterContainer.removeChild(this._character), this._noCharacter.set_visible(!0)) :
                (this._codeData = Ia.decode(m.game.characterCode), this.updateStats(), this._characterName.setText(this._codeData.character.name.toUpperCase(), "23_white"), this._characterName.setAlign(Z.Left), this._teamName.setText("TEAM_" + u.string(this._codeData.character.team.toUpperCase())), this._teamName.setAlign(Z.Left), this._btnNext.set_visible(!0), null != this._character && this._characterContainer.removeChild(this._character), m.config.vo && v.play(u.string(this._codeData.character.name) + "_select", "VO"), this.loadCharacter("spine/" +
                    u.string(this._codeData.character.name)))
        },
        loadCharacter: function(a) { this._loadingIcon.set_visible(!0);
            this._noCharacter.set_visible(!1);
            this._characterPack = a;
            this._loading = !0;
            D.loadPack(a, n(this, this.buildCharacter)) },
        buildCharacter: function() {
            this._loading = !1;
            var a;
            if (null == m.currentCharacter) { if (null == this._codeData) return;
                m.codeCharacter = this._codeData;
                a = this._codeData.inventory;
                a = { inventoryJson: a } } else m.codeCharacter = null, a = ga.getCustomizationData(ga.getDefaultItems(m.currentCharacter.name)),
                a = { inventorySave: m.currentCharacter.name, inventoryJson: a };
            this._character = L.create({ transform: { position: { x: 100, y: 470 } }, spine: { pack: this._characterPack, asset: this._characterPack.split("/")[1], pixelSnapping: !1, defaultAnimation: "idle" }, gameCustomization: a });
            this._loadingIcon.set_visible(!1);
            this._characterContainer.addChild(this._character);
            this._character._compMap.CustomizationComponent_6.onInventoryReady.connect(n(this, this.updateStats)).once()
        },
        updateStats: function() {
            var a = mc.getItemsStats(this._character),
                b;
            b = null == this._codeData ? m.currentCharacter : this._codeData.character;
            this._characterName.set_visible(!1);
            this._dots.set_visible(!1);
            this._btnCustomize.set_visible(!1);
            m.config.codeEnabled && this._btnCode.set_visible(!1);
            this._statBox.y.set__(170);
            this._description.set_visible(!1);
            this._teamName.set_visible(!1);
            this._statBox.set_visible(!1);
            null != this._codeData || null == b ? (m.config.codeEnabled && this._btnCode.set_visible(!0), this._statBox.y.set__(240), null != this._codeData ? (this._characterName.set_visible(!0),
                this._teamName.set_visible(!0), this._dots.set_visible(!0), this._statBox.set_visible(!0), this._statBox.basePower = b.power + a.power, this._statBox.baseSpeed = b.speed + a.speed, this._statBox.baseSuperRate = b.superRate + a.superRate, this._statBox.update()) : (this._description.set_visible(!0), this._description.setText("FRIEND_CODE"), this._description.setAlign(Z.Left))) : (m.isTournament && this._levels.get(m.currentCharacter.name).set_visible(!0), this._btnCustomize.set_visible(!0), this._teamName.set_visible(!0), this._characterName.set_visible(!0),
                this._dots.set_visible(!0), this._statBox.set_visible(!0), this._statBox.basePower = b.power + a.power, this._statBox.baseSpeed = b.speed + a.speed, this._statBox.baseSuperRate = b.superRate + a.superRate, this._statBox.update())
        },
        buildGrid: function() { this._buttons = [];
            this._container = (new s).setXY(Cd.Grid.x, Cd.Grid.y);
            this.owner.addChild((new A).add(this._container)); for (var a = 0, b = 0, c = this._list; b < c.length;) { var d = c[b];++b;
                this.addButton(d, a);
                a++ } },
        addButton: function(a, b) {
            var c;
            if (null == a) {
                if (!m.config.codeEnabled) return;
                this._btnCodeIndex = b;
                c = "mystery"
            } else c = a.name;
            var d = this.createButton(n(this, this.onButtonClick), "characters/" + c);
            d.index = b;
            d.set_pointerEnabled(!1);
            var e = Math.round(b % Cd.Grid.perRow),
                f = Math.floor(b / Cd.Grid.perRow);
            12 == b && (e = 4, f = 2);
            d.setXY(e * Cd.Grid.spacing.x - f * Cd.Grid.spacing.x / 2, f * Cd.Grid.spacing.y).setScale(0.9);
            null != a ? (e = this.createImage("level_indicator_bg", d.owner), e.setXY(10, 95).set_pointerEnabled(!1), f = M.getLocalizedTextSprite("LVL", "16_white"), f.setXY(23, 5), e.owner.addChild((new A).add(f)),
                c = M.getTextSprite("16_white", u.string(m.game.getLevel(c))), c.setXY(58, 5), e.owner.addChild((new A).add(c)), e.set_visible(!1), this._levels.set(a.name, e)) : (c = d.x, c.set__(c._value - 25));
            a == m.currentCharacter && (this._currentButton = d, d.select());
            this._container.owner.addChild(d.owner);
            this._buttons.push(d)
        },
        onButtonClick: function(a) { this._loading || (null != this._currentButton && this._currentButton.deselect(), a.select(), this._currentButton = a, this.select(a.index)) },
        getIndexByName: function(a) {
            for (var b = 0, c = this._list; b <
                c.length;) { var d = c[b];++b; if (null != d && d.name == a) return this._list.indexOf(d) }
            return -1
        },
        __class__: Cd
    });
    var Ci = function() { this._playSound = !0;
        this._itemsPage = this._itemsPageCount = this._itemsPerPage = 0;
        this._itemsSpacing = { x: 125, y: 140 };
        this._itemsColumns = 3;
        this._itemsRows = 2;
        this._characterContainer = new A;
        Q.call(this, !1) };
    g["game.ui.CustomizeCharacter"] = Ci;
    Ci.__name__ = ["game", "ui", "CustomizeCharacter"];
    Ci.__super__ = Q;
    Ci.prototype = l(Q.prototype, {
        onAdded: function() { Q.prototype.onAdded.call(this);
            this.loadAssets("ui_customize") },
        onStop: function() { Q.prototype.onStop.call(this) },
        onAssetsReady: function() {
            Q.prototype.onAssetsReady.call(this);
            this.createImage("bg");
            this.owner.addChild(this._characterContainer);
            this._itemsGrid = this.addSprite((new s).setXY(540, 250));
            this._statBox = new Dd;
            this._statBox.setXY(275, 200);
            this.owner.addChild((new A).add(this._statBox));
            var a = this.createText("CUSTOMIZE_TITLE", "title");
            a.setAlign(Z.Left);
            a.setXY(100, 50);
            a = this.createText(m.currentCharacter.name.toUpperCase(), "23_white");
            a.setAlign(Z.Left);
            a.setXY(100, 100);
            this._categoryLabel = this.createText("FLAG", "23_white");
            this._categoryLabel.setXY(660, 150);
            if (m.config.codeEnabled) { a = this.createButton(n(this, this.onShare), "btn_share", "BTN_SHARE");
                a.setXY(40, 485); var b = a.label.y;
                b.set__(b._value - 3);
                a.owner.addChild((new A).add(new Cf(a.getNaturalWidth())));
                F.from(a, { x: "-=100", alpha: 0 }, { time: 0.7, ease: E.quintOut, delay: 0.5 }) } a = this.createButton(n(this, this.onValidateClick), "btn_confirm");
            a.setXY(895, 495 - q.getOffset(100));
            a.centerAnchor();
            F.from(a, {
                x: "+=100",
                alpha: 0
            }, { time: 0.7, ease: E.quintOut, delay: 0.5 });
            a.scaleX.set_behavior(new db(1, 0.95, 0.35));
            a.scaleY.set_behavior(new db(1, 0.95, 0.35));
            a = this.createButton(n(this, this.onBackClick), "btn_back");
            a.setXY(50 + q.getOffset(40), 50);
            a.centerAnchor();
            F.from(a, { x: "-=100", alpha: 0 }, { time: 0.7, ease: E.quintOut, delay: 0.5 });
            this._loadingIcon = new fg;
            this._loadingIcon.setXY(140, 250);
            this.owner.addChild((new A).add(this._loadingIcon));
            this.loadCharacter("spine/" + m.currentCharacter.name);
            v.playMusic("music_menu", !1, q.musicVolume)
        },
        loadCharacter: function(a) { this._characterPack = a;
            D.loadPack(a, n(this, this.buildCharacter)) },
        buildCharacter: function() {
            this.owner.removeChild(this._loadingIcon.owner);
            var a = m.currentCharacter.name,
                b = ga.getCustomizationData(ga.getDefaultItems(a));
            this._character = L.create({ transform: { position: { x: 190, y: 470 } }, spine: { pack: this._characterPack, asset: this._characterPack.split("/")[1], pixelSnapping: !1, defaultAnimation: "idle", scale: 0.9 }, customization: { inventorySave: a, inventoryJson: b } });
            this._characterContainer.addChild(this._character);
            this._characterSpine = this._character._compMap.Sprite_19;
            this._characterCustomization = this._character._compMap.CustomizationComponent_6;
            this._statBox.baseSpeed = m.currentCharacter.speed;
            this._statBox.basePower = m.currentCharacter.power;
            this._statBox.baseSuperRate = m.currentCharacter.superRate;
            this._statBox.update();
            this._characterCustomization.onInventoryReady.connect(n(this, this.onInventoryReady)).once()
        },
        onInventoryReady: function() {
            m.game.custoTutoDone || (C.push("CustomizationTuto"), m.game.custoTutoDone = !0, m.game.save());
            this.buildItemsGrid();
            this.buildCategoriesMenu()
        },
        buildCategoriesMenu: function() {
            this._categoriesMenu = this.addSprite((new s).setXY(475, 85));
            for (var a = 0, b = [], c = 0, d = pd.ALTERABLE; c < d.length;) { var e = d[c];++c; var f = this.createButton(n(this, this.onCategoryClick), "btn_" + e, null, "buttons", this._categoriesMenu.owner);
                f.data = e;
                f.centerAnchor();
                f.setXY(90 * a++, 0);
                b.push(f) } this._categoriesSelector = this.createImage("category_selector", this._categoriesMenu.owner);
            this._categoriesSelector.centerAnchor();
            this._categoriesSelector.setXY(0, 12);
            this.onCategoryClick(b[0])
        },
        onCategoryClick: function(a) { v.play("ui_click", "UI");
            F.to(this._categoriesSelector, { x: a.x._value + 2 }, { time: 0.7, ease: E.quintOut });
            this.setItemsCategory(a.data);
            this._categoryLabel.setText(a.data.toUpperCase()) },
        buildItemsGrid: function() {
            this._itemsPerPage = this._itemsColumns * this._itemsRows;
            this._itemsNext = this.createButton(n(this, this.onItemNextClick), "arrow_next");
            this._itemsNext.setXY(900, 300);
            this._itemsNext.centerAnchor();
            this._itemsNext.x.set_behavior(new db(900,
                905, 0.35));
            this._itemsPrevious = this.createButton(n(this, this.onItemPreviousClick), "arrow_back");
            this._itemsPrevious.setXY(450, 300);
            this._itemsPrevious.centerAnchor();
            this._itemsPrevious.x.set_behavior(new db(450, 445, 0.35))
        },
        setItemsCategory: function(a) { this._itemsCategory = a;
            this._itemsInCategory = $.getByType(a); "head" == a && (this._itemsInCategory = this.filterItems());
            this._itemsPage = 0;
            this._itemsPageCount = null == this._itemsInCategory ? 0 : Math.ceil(this._itemsInCategory.length / this._itemsPerPage);
            this.loadItemsGridPage() },
        filterItems: function() { for (var a = [], b, c = m.currentCharacter.template, d = !1, e = 0, f = this._itemsInCategory.length; e < f;) { var j = e++;
                b = this._itemsInCategory[j].characters; if (null != b) { for (var d = !1, p = 0; p < b.length;) { var h = b[p];++p; if (h == c) { d = !0; break } } if (!d) continue } a.push(this._itemsInCategory[j]) } return a },
        onItemNextClick: function() { this._itemsPage = Za.min(this._itemsPageCount - 1, this._itemsPage + 1);
            this.loadItemsGridPage() },
        onItemPreviousClick: function() { this._itemsPage = Za.max(0, this._itemsPage - 1);
            this.loadItemsGridPage() },
        loadItemsGridPage: function() {
            this._itemsGrid.owner.disposeChildren();
            this._itemsLoading = this.createButton(null, "loading", null, "ui", this._itemsGrid.owner);
            this._itemsLoading.setXY(172, 80);
            this._itemsLoading.centerAnchor();
            this._itemsLoading.rotation.set_behavior(new db(90, -90, 1));
            var a = [];
            this._itemsInPage = [];
            if (null == this._itemsInCategory) this.buildItemsGridPage(null);
            else {
                for (var b = this._itemsPage * this._itemsPerPage, c = b, b = b + this._itemsPerPage; c < b;) {
                    var d = this._itemsInCategory[c++];
                    if (null == d) break;
                    for (var e = 0, f = d.parts; e < f.length;) { var j = f[e];++e;
                        null != j.url && a.push(j.url) } this._itemsInPage.push(d)
                }
                "trail" == this._itemsCategory ? this.buildItemsGridPage(null) : (this._itemsGridPackName = "itemsGrid_" + this._itemsCategory + "_" + this._itemsPage, D.disposePack(this._itemsGridPackName), D.createDynamicPack(this._itemsGridPackName, a, n(this, this.buildItemsGridPage), !0))
            }
        },
        buildItemsGridPage: function(a) {
            this._itemsLoading.owner.parent.removeChild(this._itemsLoading.owner);
            var b = 0,
                c = null,
                d = 0,
                e = 0;
            this._buttonContainer =
                new A;
            this._itemsGrid.owner.addChild(this._buttonContainer);
            this._itemsGridSelector = this.createImage("item_selector", this._itemsGrid.owner);
            this._itemsGridSelector.centerAnchor();
            this._itemsGridSelector.set_visible(!1);
            this._itemContainer = new A;
            this._itemsGrid.owner.addChild(this._itemContainer);
            "trail" == this._itemsCategory && (this._trails = new K);
            for (var f = 0, j = this._itemsInPage; f < j.length;) {
                var p = j[f];
                ++f;
                d = Math.round(b % this._itemsColumns) * this._itemsSpacing.x;
                e = Math.floor(b / this._itemsColumns) * this._itemsSpacing.y;
                d = "trail" == this._itemsCategory ? this.createTrailButton(p, d, e) : this.createItemButton(p, a, d, e);
                this._characterCustomization.getItem(this._itemsCategory).id == p.id && (c = d, this._playSound = !1, this.onItemClick(c), this._playSound = !0);
                b++
            }
            this._itemsPrevious.set_visible(0 < this._itemsPage);
            this._itemsNext.set_visible(this._itemsPage < this._itemsPageCount - 1);
            null != c && (this._itemsGridSelector.set_visible(!0), this._itemsGridSelector.setXY(c.x._value, c.y._value - 3))
        },
        createItemButton: function(a, b, c, d) {
            var e = m.game.isLootUnlocked(m.currentCharacter.name,
                    a.id),
                f = "item_bg";
            e || (f = "lock_" + this._itemsCategory);
            null == a.parts[0].url && (f = "unequip");
            f = this.createButton(n(this, this.onItemClick), f, null, "buttons", this._buttonContainer);
            f.centerAnchor();
            f.setXY(c, d);
            if (e && 0 < a.parts.length && null != a.parts[0].url) {
                b = this.createImage(a.parts[0].url, this._itemContainer, b);
                b.set_pointerEnabled(!1);
                b.centerAnchor();
                b.setXY(c, d);
                if ("shoulders" == this._itemsCategory || "flag5" == a.id || "flag10" == a.id) c = b.x, c.set__(c._value - 10), c = b.y, c.set__(c._value - 25);
                var c = f.getNaturalWidth() +
                    30,
                    d = f.getNaturalHeight() + 30,
                    j = b.getNaturalWidth() / c,
                    p = b.getNaturalHeight() / d;
                if (1 < j || 1 < p) b.setScale(j > p ? c / b.getNaturalWidth() : d / b.getNaturalHeight())
            }
            e || (f.disable(), f.set_pointerEnabled(!1));
            f.data = a;
            return f
        },
        createTrailButton: function(a, b, c) {
            var d = m.game.isLootUnlocked(m.currentCharacter.name, a.id),
                e = "item_bg";
            d || (e = "lock_" + this._itemsCategory);
            "trailclear" == a.id && (e = "unequip");
            e = this.createButton(n(this, this.onItemClick), e, null, "buttons", this._buttonContainer);
            e.centerAnchor();
            e.setXY(b, c);
            if (d &&
                "trailclear" != a.id) { var f = new Xb(a.id, "trails");
                f.set_pointerEnabled(!1);
                f.setXY(b, c);
                f.gotoAndStop("idle");
                f.onReady.connect(n(this, this.onAnimReady)).once();
                this._itemContainer.addChild((new A).add(f));
                this._trails.set(a.id, f) } d || (e.disable(), e.set_pointerEnabled(!1));
            e.data = a;
            return e
        },
        onAnimReady: function(a) { this._currentTrail != a && a.gotoAndStop("idle"); var b = a.getNaturalWidth() / 100,
                c = a.getNaturalHeight() / 100; if (1 < b || 1 < c) a.setScale(b > c ? 100 / a.getNaturalWidth() : 100 / a.getNaturalHeight()) },
        onItemClick: function(a) {
            F.to(this._itemsGridSelector, { x: a.x._value, y: a.y._value - 5 }, { time: 0.3, ease: E.cubeOut });
            this._itemsGridSelector.set_visible(!0);
            "trail" == this._itemsCategory ? (null != this._currentTrail && this._currentTrail.gotoAndStop("idle"), this._currentTrail = this._trails.get(a.data.id), null != this._currentTrail && this._currentTrail.gotoAndPlay("start"), this._characterCustomization.inventory.set(this._itemsCategory, a.data), this._characterCustomization.saveInventory()) : this._characterCustomization.equipItem(a.data, this._itemsCategory);
            this.updateStats(a.data.stats);
            this._statBox.update();
            this._playSound && v.play("equip_item", "SFX")
        },
        updateStats: function(a) { var b = mc.getItemsStats(this._character),
                c = m.currentCharacter;
            this._statBox.basePower = c.power + b.power - a.power | 0;
            this._statBox.baseSpeed = c.speed + b.speed - a.speed | 0;
            this._statBox.baseSuperRate = c.superRate + b.superRate - a.superRate | 0;
            this._statBox.addedPower = a.power;
            this._statBox.addedSpeed = a.speed;
            this._statBox.addedSuperRate = a.superRate;
            this._statBox.update() },
        onBackClick: function() { v.play("ui_click", "UI");
            C.change("SelectCharacter") },
        onValidateClick: function() { v.play("ui_click", "UI");
            this._characterCustomization.saveInventory();
            C.change("SelectCharacter") },
        onShare: function() { v.play("ui_click", "UI"); var a = this._characterCustomization.exportInventory(),
                a = Ia.encode(m.currentCharacter, a);
            m.shareCode = a;
            C.push("CodeResult") },
        __class__: Ci
    });
    var Ed = function() { this._list = jb.LIST;
        Q.call(this, !1) };
    g["game.ui.SelectLevel"] = Ed;
    Ed.__name__ = ["game", "ui", "SelectLevel"];
    Ed.__super__ = Q;
    Ed.prototype = l(Q.prototype, {
        onAdded: function() {
            Q.prototype.onAdded.call(this);
            this.loadAssets("ui_level");
            v.playMusic("music_menu", !1, q.musicVolume)
        },
        onAssetsReady: function() {
            Q.prototype.onAssetsReady.call(this);
            this.createImage("bg");
            var a = this.createText("LEVEL_TITLE");
            a.setXY(0.5 * q.width, 40);
            this.buildGrid();
            this._btnNext = this.createButton(n(this, this.onNext), "btn_play", null, null, null, D.getPack("ui"));
            this._btnNext.setXY(897, 496 - q.getOffset(300));
            this._btnNext.centerAnchor();
            this._btnBack = this.createButton(n(this, this.onBack), "btn_back");
            this._btnBack.setXY(50 + (o.mobile ?
                65 : 0), 50);
            this._btnBack.centerAnchor();
            F.from(a, { y: "-=60", alpha: 0 }, { time: 0.7, ease: E.quintOut, delay: 0 });
            for (var a = 0, b = this._buttons; a < b.length;) { var c = b[a];++a;
                F.from(c, { y: "-=100", alpha: 0 }, { time: 0.5, ease: E.backOut, delay: 0.06 * c.index }) } F.from(this._btnNext, { x: "+=100", alpha: 0 }, { time: 0.7, ease: E.quintOut, delay: 0.5 });
            this._selector = this.createImage("selector");
            this._selector.centerAnchor().setXY(-100, 285);
            F.delayCallTo(n(this, this.startSelect), 0.7, null, this)
        },
        startSelect: function() {
            var a = m.game.getLevel(m.currentCharacter.name) -
                1;
            this.select(-1 < a ? a : 0, !0)
        },
        onStop: function() { Q.prototype.onStop.call(this) },
        onNext: function() { null != m.currentLevel && (ba.trackPlayButton(), Bi.setSneakPeak(), C.change("GameplayLoading")) },
        onBack: function() { ba.trackUI("Back", "Select Level");
            v.play("ui_click", "UI");
            C.change("SelectCharacter") },
        select: function(a, b) {
            null == b && (b = !1);
            var c = this._list[a];
            if (null == c) throw "No data for button" + a;
            m.game.isLevelLocked(m.currentCharacter.name, c);
            if (m.currentLevel != c || b) m.currentLevel = c, F.to(this._selector, {
                x: this._buttons[a].x._value +
                    122,
                y: this._buttons[a].y._value + 245
            }, { time: b ? 0 : 0.7, ease: E.quintOut })
        },
        buildGrid: function() { this._buttons = [];
            this._container = (new s).setXY(Ed.Grid.x, Ed.Grid.y);
            this.owner.addChild((new A).add(this._container)); for (var a = 0, b = 0, c = this._list; b < c.length;) { var d = c[b];++b;
                this.addButton(d, a);
                a++ } },
        addButton: function(a, b) {
            var c = m.game.isLevelLocked(m.currentCharacter.name, a),
                d = this.createButton(n(this, this.onButtonClick), c ? "locked" : a);
            d.index = b;
            d.id = a;
            this.createText("LEVEL_LEVEL", "23_white", d.owner).setXY(75,
                15);
            this.createTextSprite("0" + u.string(a.charAt(5)), "40_white", d.owner).setXY(98, 65);
            var e = Math.round(b % Ed.Grid.perRow);
            d.setXY(e * Ed.Grid.spacing.x + 37 * (b % 2), Math.floor(b / Ed.Grid.perRow) * Ed.Grid.spacing.y + 100 * (b % 2));
            c && d.set_pointerEnabled(!1);
            this._container.owner.addChild(d.owner);
            this._buttons.push(d)
        },
        onButtonClick: function(a) { v.play("ui_click", "UI");
            this.select(a.index) },
        __class__: Ed
    });
    var Di = function() { this._characterContainer = new A;
        this._loadingIcons = [];
        Q.call(this) };
    g["game.ui.GameplayLoading"] =
        Di;
    Di.__name__ = ["game", "ui", "GameplayLoading"];
    Di.__super__ = Q;
    Di.prototype = l(Q.prototype, {
        onAdded: function() { Q.prototype.onAdded.call(this);
            this.loadAssets("ui_preview") },
        dispose: function() { Q.prototype.dispose.call(this) },
        onAssetsReady: function() {
            this.createImage("bg");
            this.owner.addChild(this._characterContainer);
            var a = this.createText(m.isTournament ? m.currentLevel.toUpperCase() : "QUICKMATCH", "30_black");
            a.setAlign(Z.Left);
            a.setXY(50, 35);
            this.owner.addChild((new A).add(new Ei));
            this._loadingLabel =
                this.createText("LOADING", "23_white");
            this._loadingLabel.setXY(q.width - 10, 480);
            this._loadingLabel.setAlign(Z.Right);
            this._loadingLabel.alpha.set_behavior(new db(1, 0, 1));
            this.createText("VS", "65_black").setXY(q.width / 2 + 10, 220);
            this.createCharacters();
            this.createImage("teams_textbox").centerAnchor().setXY(q.width / 2, 400);
            this.createImage("team_" + m.currentCharacter.team).centerAnchor().setXY(q.width / 2 - 50, 400).setScale(0.7);
            this.createImage("team_" + m.currentOpponent.team).centerAnchor().setXY(q.width /
                2 + 50, 400).setScale(0.7);
            U.__cast(this.createText("TEAM_" + m.currentCharacter.team.toUpperCase(), "16_white", null, { align: "right" }).setXY(q.width / 2 - 245, 385), gb).setWrapWidth(150);
            U.__cast(this.createText("TEAM_" + m.currentOpponent.team.toUpperCase(), "16_white", null, { align: "left" }).setXY(q.width / 2 + 91, 385), gb).setWrapWidth(150);
            this._btnPlay = this.createButton(n(this, this.onPlay), "btn_play", null, null, null, D.getPack("ui"));
            this._btnPlay.setXY(897, 493 - q.getOffset(100));
            this._btnPlay.centerAnchor();
            this._btnPlay.set_visible(!1);
            this.load(jb.get(m.currentLevel).getPacks(), n(this, this.onPacksLoaded))
        },
        load: function(a, b) { this._loader = D.loadPacks(a, b) },
        onPacksLoaded: function() { this._loadingLabel.owner.parent.removeChild(this._loadingLabel.owner);
            this._btnPlay.set_visible(!0);
            this._btnPlay.scaleX.set_behavior(new db(1.1, 1, 0.35));
            this._btnPlay.scaleY.set_behavior(new db(1.1, 1, 0.35)) },
        onPlay: function() { ba.trackUI("Play", "Game Preview");
            m.isTournament ? m.tournamentCount++ : m.quickMatchCount++;
            v.play("ui_click", "UI");
            C.change("gameplay") },
        createCharacters: function() {
            m.setRandomOpponent();
            this._characterQueue = [];
            m.singlePlayer || this.addToQueue({ template: m.currentCharacter.partner, flip: !1, scale: 0.65, sneakPeak: [] }, 100, 360);
            this.addToQueue({ template: m.currentCharacter.template, flip: !1, scale: 0.7, sneakPeak: [] }, 225, 415);
            this.addToQueue({ template: m.currentOpponent.partner, flip: !0, scale: 0.65, sneakPeak: m.sneakPeak2 }, q.width - 100, 360);
            this.addToQueue({ template: m.currentOpponent.template, flip: !0, scale: 0.65, sneakPeak: m.sneakPeak1 }, q.width - 240, 415);
            this.loadCharacter()
        },
        addToQueue: function(a, b, c) { var d = new fg;
            d.setXY(b, c - 100);
            this.owner.addChild((new A).add(d));
            this._loadingIcons.push(d);
            a.x = b;
            a.y = c;
            this._characterQueue.push(a) },
        loadCharacter: function() { this._loadingCharacter = this._characterQueue.shift(); if (null != this._loadingCharacter) { var a = "spine/" + u.string(this._loadingCharacter.template);
                D.loadPack(a, n(this, this.buildCharacter)) } },
        buildCharacter: function() {
            this.owner.removeChild(this._loadingIcons.shift().owner);
            var a, b;
            if (null != m.codeCharacter &&
                this._loadingCharacter.template == m.codeCharacter.character.template) b = null, a = m.codeCharacter.inventory;
            else if (0 < this._loadingCharacter.sneakPeak.length) { b = null;
                a = ga.getDefaultItems(this._loadingCharacter.template); for (var c = this._loadingCharacter.sneakPeak, d = 0; d < c.length;) { var e = c[d];++d;
                    a.push(e) } a = ga.getCustomizationData(a) } else b = this._loadingCharacter.template, a = ga.getCustomizationData(ga.getDefaultItems(this._loadingCharacter.template));
            b = L.create({
                transform: {
                    position: {
                        x: this._loadingCharacter.x,
                        y: this._loadingCharacter.y
                    },
                    direction: this._loadingCharacter.flip ? -1 : 1
                },
                spine: { pack: "spine/" + u.string(this._loadingCharacter.template), asset: this._loadingCharacter.template, pixelSnapping: !1, defaultAnimation: "slide", scale: this._loadingCharacter.scale },
                customization: { inventorySave: b, inventoryJson: a }
            });
            this._loadingCharacter.template == m.currentCharacter.template && (this._currentCharacter = b);
            this._characterContainer.addChild(b);
            this.loadCharacter()
        },
        __class__: Di
    });
    var Fi = function() { Q.call(this) };
    g["game.ui.Gameplay"] =
        Fi;
    Fi.__name__ = ["game", "ui", "Gameplay"];
    Fi.__super__ = Q;
    Fi.prototype = l(Q.prototype, { onAdded: function() { Q.prototype.onAdded.call(this);
            this._gameEntity = new A;
            this._gameEntity.add(new s);
            this._gameSystem = new Qg;
            this._gameEntity.add(this._gameSystem);
            this.owner.addChild(this._gameEntity);
            v.playMusic("music_game", !0, q.musicVolume) }, __class__: Fi });
    var Gi = function() { Q.call(this, !1) };
    g["game.ui.Pause"] = Gi;
    Gi.__name__ = ["game", "ui", "Pause"];
    Gi.__super__ = Q;
    Gi.prototype = l(Q.prototype, {
        onAdded: function() {
            Q.prototype.onAdded.call(this);
            this.loadAssets("ui_pause");
            v.playMusic("music_menu", !0, q.musicVolume)
        },
        onAssetsReady: function() {
            this.owner.add(new V(this.getTexture("bg")));
            this.createText("PAUSED", "30_black").setXY(420, 180);
            this.owner.addChild(this.createButton(n(this, this.onResume), "btn_play").setXY(470, 300).owner);
            this.owner.addChild(this.createButton(n(this, this.onHelp), "btn_help").setXY(425, 240).owner);
            this.owner.addChild(this.createButton(n(this, this.onQuit), "btn_quit").setXY(535, 240).owner);
            if (m.config.codeEnabled) {
                var a =
                    this.createButton(n(this, this.onCode), "btn_enter_code", "BTN_CODE").setXY(656, 450),
                    b = a.label.x;
                b.set__(b._value + 8);
                b = a.label.y;
                b.set__(b._value - 3);
                this.owner.addChild(a.owner)
            }
        },
        onResume: function() { ba.trackUI("Resume", "Pause");
            v.play("ui_click", "UI");
            C.pop();
            v.playMusic("music_game", !0, q.musicVolume) },
        onHelp: function() { ba.trackUI("Help", "Pause");
            v.play("ui_click", "UI");
            C.push("Help") },
        onQuit: function() { ba.trackUI("Quit", "Pause");
            v.play("ui_click", "UI");
            this.owner.addChild((new A).add(new Hi)) },
        onCode: function() {
            ba.trackUI("Enter Code",
                "Pause");
            v.play("ui_click", "UI");
            C.push("CodeEntry")
        },
        __class__: Gi
    });
    var gg = function() { this._totalPage = 7;
        this._currentPage = 1;
        Q.call(this, !1) };
    g["game.ui.Help"] = gg;
    gg.__name__ = ["game", "ui", "Help"];
    gg.close = function() { ba.trackUI("Close", "Help");
        v.play("ui_click", "UI");
        C.pop() };
    gg.__super__ = Q;
    gg.prototype = l(Q.prototype, {
        onAdded: function() { Q.prototype.onAdded.call(this);
            this.loadAssets("ui_help") },
        onAssetsReady: function() {
            this.createImage("bg");
            this._backgroundSprite = this.createImage("page1");
            this._backgroundSprite.centerAnchor().setXY(q.width /
                2, 220);
            var a = this.createButton(n(this, this.prevPage), "btn_prev");
            a.setXY(65, 0.5 * q.height);
            a.centerAnchor();
            this.owner.addChild(a.owner);
            a = this.createButton(n(this, this.nextPage), "btn_next");
            a.setXY(895, 0.5 * q.height);
            a.centerAnchor();
            this.owner.addChild(a.owner);
            this._label = this.createText("HELP_TEXT_1", "30_black");
            this._label.setWrapWidth(600);
            this._label.setAlign(Z.Center);
            this._label.setXY(q.width / 2 - 300, 275);
            this._txt1 = this.createText("HELP_TEXT_7_1", "30_black");
            this._txt1.setXY(q.width / 2 - 200, 200);
            this._txt2 = this.createText("HELP_TEXT_7_2", "30_black");
            this._txt2.setXY(q.width / 2, 200);
            this._txt3 = this.createText("HELP_TEXT_7_3", "30_black");
            this._txt3.setXY(q.width / 2 + 200, 200);
            this._txt1.set_visible(!1);
            this._txt2.set_visible(!1);
            this._txt3.set_visible(!1);
            this.owner.addChild(this.createButton(gg.close, "btn_quit").setXY(877, 15).owner);
            this.updatePage();
            Q.prototype.onAssetsReady.call(this)
        },
        prevPage: function() { 1 == this._currentPage ? this._currentPage = this._totalPage : this._currentPage--;
            this.updatePage() },
        nextPage: function() { this._currentPage == this._totalPage ? this._currentPage = 1 : this._currentPage++;
            this.updatePage() },
        updatePage: function() {
            var a = "";
            if (o.mobile && (1 == this._currentPage || 5 == this._currentPage || 6 == this._currentPage)) a = "_m";
            this._backgroundSprite.texture = this.getTexture("page" + this._currentPage + a);
            this._label.setText("HELP_TEXT_" + this._currentPage + a.toUpperCase());
            switch (this._currentPage) {
                case 7:
                    this._txt1.set_visible(!0);
                    this._txt2.set_visible(!0);
                    this._txt3.set_visible(!0);
                    break;
                default:
                    this._txt1.set_visible(!1),
                        this._txt2.set_visible(!1), this._txt3.set_visible(!1)
            }
        },
        __class__: gg
    });
    var Ii = function() { this._glowRotationSpeed = 10;
        Q.call(this, !1) };
    g["game.ui.GameplayWin"] = Ii;
    Ii.__name__ = ["game", "ui", "GameplayWin"];
    Ii.__super__ = Q;
    Ii.prototype = l(Q.prototype, {
        onAdded: function() { Q.prototype.onAdded.call(this);
            this.loadAssets("ui_win");
            v.playMusic("music_menu", !0, q.musicVolume) },
        onAssetsReady: function() {
            this.createImage("bg");
            var a = this.buildConfettiBG();
            this._characterContainer = new A;
            this.owner.addChild(this._characterContainer);
            this.createCharacters();
            var b = this.buildConfettiFG();
            this._btnBack = this.createButton(n(this, this.onBack), "btn_back");
            this._btnBack.setXY(50 + q.getOffset(40), 50);
            this._btnBack.centerAnchor();
            this._btnBack.setAlpha(0);
            this._btnPlay = this.createButton(n(this, this.onClick), "btn_play", null, null, null, D.getPack("ui")).setXY(900, 465 - q.getOffset()).centerAnchor();
            this._btnPlay.setAlpha(0);
            this.owner.addChild(this._btnPlay.owner);
            var c = this.createText(m.hasWon ? "WIN_TITLE" : "FAIL_TITLE", "65_black");
            c.toUpperCase();
            c.setXY(q.width / 2, 30);
            this._teamScore = this.createText("", m.hasWon ? "65_pink" : "65_white");
            this._teamScore.localized = !1;
            this._teamScore.set_text(u.string(m.teamScore));
            this._teamScore.setAlpha(0);
            this._teamScore.setXY(q.width / 2 - 115, 110);
            this._opponentScore = this.createText("", m.hasWon ? "65_white" : "65_pink");
            this._opponentScore.localized = !1;
            this._opponentScore.set_text(u.string(m.opponentScore));
            this._opponentScore.setAlpha(0);
            this._opponentScore.setXY(q.width / 2 + 115, 110);
            this._checks = M.getTextSprite("30_pink",
                u.string(m.checks));
            this._checks.setAlign(Z.Center).setXY(q.width / 2, 200).setAlpha(0);
            this.owner.addChild((new A).add(this._checks));
            this._checksLabel = M.getLocalizedTextSprite("WIN_CHECKS", "18_black");
            this._checksLabel.setAlign(Z.Center).setXY(q.width / 2, 230).setAlpha(0);
            this.owner.addChild((new A).add(this._checksLabel));
            this._checked = M.getTextSprite("30_pink", u.string(m.checked));
            this._checked.setAlign(Z.Center).setXY(q.width / 2, 260).setAlpha(0);
            this.owner.addChild((new A).add(this._checked));
            this._checkedLabel =
                M.getLocalizedTextSprite("WIN_CHECKED", "18_black");
            this._checkedLabel.setAlign(Z.Center).setXY(q.width / 2, 290).setAlpha(0);
            this.owner.addChild((new A).add(this._checkedLabel));
            this._super = M.getTextSprite("30_pink", u.string(m.superUsed));
            this._super.setAlign(Z.Center).setXY(q.width / 2, 320).setAlpha(0);
            this.owner.addChild((new A).add(this._super));
            this._superLabel = M.getLocalizedTextSprite("WIN_SUPER", "18_black");
            this._superLabel.setAlign(Z.Center).setXY(q.width / 2, 350).setAlpha(0);
            this.owner.addChild((new A).add(this._superLabel));
            m.isTournament && m.hasWon && (null == m.currentLevel && (m.currentLevel = "level1"), this._completed = this.createText("WIN_LEVEL", "30_pink", null, { level: m.currentLevel.charAt(5) }), this._completed.centerAnchor(), this._completed.setWrapWidth(200), this._completed.setAlign(Z.Center).setXY(q.width / 2 + 75, 400).setAlpha(0));
            a.start();
            b.start();
            null == m.codeCharacter && this.checkLoot();
            this.animateScreen();
            Q.prototype.onAssetsReady.call(this)
        },
        onUpdate: function(a) {
            Q.prototype.onUpdate.call(this, a);
            if (null != this._glow) {
                var b =
                    this._glow.rotation;
                b.set__(b._value + a * this._glowRotationSpeed)
            }
        },
        onBack: function() { ba.trackUI("Back", "Match End");
            v.play("ui_click", "UI");
            C.change("GameMode") },
        onClick: function() { ba.trackUI("Continue", "Match End");
            v.play("ui_click", "UI"); if (m.isTournament) { var a = jb.getLvlIndexByName(m.currentLevel);
                a == jb.LIST.length - 1 ? m.hasWon ? C.change("End") : C.change("SelectCharacter") : (m.currentLevel = jb.LIST[a + 1], Bi.setSneakPeak(), C.change("GameplayLoading")) } else C.change("SelectCharacter") },
        createCharacters: function() {
            this._characterQueue = [];
            this._characterQueue.push({ template: m.currentCharacter.template, x: 300, y: 450, flip: !1, sneakPeak: [] });
            m.singlePlayer || this._characterQueue.push({ template: m.currentCharacter.partner, x: 100, y: 450, flip: !1, sneakPeak: [] });
            this._characterQueue.push({ template: m.currentOpponent.template, x: q.width - 300, y: 450, flip: !0, sneakPeak: m.sneakPeak1 });
            this._characterQueue.push({ template: m.currentOpponent.partner, x: q.width - 100, y: 450, flip: !0, sneakPeak: m.sneakPeak2 });
            this.loadCharacter()
        },
        loadCharacter: function() {
            this._loadingCharacter =
                this._characterQueue.shift();
            if (null != this._loadingCharacter) { var a = "spine/" + u.string(this._loadingCharacter.template);
                D.loadPack(a, n(this, this.buildCharacter)) }
        },
        buildCharacter: function() {
            var a, b;
            if (null != m.codeCharacter && this._loadingCharacter.template == m.codeCharacter.character.template) b = null, a = m.codeCharacter.inventory;
            else if (0 < this._loadingCharacter.sneakPeak.length) {
                b = null;
                a = ga.getDefaultItems(this._loadingCharacter.template);
                for (var c = this._loadingCharacter.sneakPeak, d = 0; d < c.length;) {
                    var e =
                        c[d];
                    ++d;
                    a.push(e)
                }
                a = ga.getCustomizationData(a)
            } else b = this._loadingCharacter.template, a = ga.getCustomizationData(ga.getDefaultItems(this._loadingCharacter.template));
            c = m.hasWon != this._loadingCharacter.flip;
            b = L.create({
                transform: { position: { x: this._loadingCharacter.x, y: this._loadingCharacter.y }, direction: this._loadingCharacter.flip ? -1 : 1 },
                spine: { pack: "spine/" + u.string(this._loadingCharacter.template), asset: this._loadingCharacter.template, pixelSnapping: !1, defaultAnimation: c ? "idle" : "idle_sad", scale: 0.8 },
                customization: { inventorySave: b, inventoryJson: a }
            });
            this._loadingCharacter.template == m.currentCharacter.template && (this._currentCharacter = b);
            this._characterContainer.addChild(b);
            this.loadCharacter()
        },
        animateScreen: function() {
            var a = this,
                b = 0.3;
            this.showText(this._teamScore);
            F.delayCallTo(function() { a.showText(a._opponentScore) }, b);
            b += 0.3;
            F.delayCallTo(function() { a.playVO();
                a.showText(a._checks);
                a.showText(a._checksLabel, 1.2) }, b);
            b += 0.3;
            F.delayCallTo(function() {
                a.showText(a._checked);
                a.showText(a._checkedLabel,
                    1.2)
            }, b);
            b += 0.3;
            F.delayCallTo(function() { a.showText(a._super);
                a.showText(a._superLabel, 1.2) }, b);
            b += 0.3;
            null != this._completed && (F.delayCallTo(function() { a.showText(a._completed) }, b), b += 0.3);
            F.delayCallTo(function() { null == a._popup ? (a._btnBack.setAlpha(1), a._btnPlay.setAlpha(1), F.from(a._btnBack, { x: "-=100" }, { time: 0.5, ease: E.quadOut }), F.from(a._btnPlay, { x: "+=100" }, { time: 0.5, ease: E.quadOut })) : (v.play("unlock", "SFX"), a._popupBg.alpha.animateTo(0.5, 0.2), a._popup.x.animateTo(250, 0.75, E.quintOut)) }, b + 0.8)
        },
        showText: function(a, b) { null == b && (b = 1.5);
            a.setAlpha(1);
            a.setScale(b);
            a.scaleX.animateTo(1, 0.3, E.quadOut);
            a.scaleY.animateTo(1, 0.3, E.quadOut) },
        checkLoot: function() {
            var a = 0,
                a = m.hasWon ? m.isTournament ? q.tournamentLootRatio : q.quickMatchLootRatio : q.loseLootRatio;
            Math.random() > a || (a = Qa.getLoot(m.currentLevel), "" != a ? (this._loot = $.getById(a), m.game.setLoot(m.currentCharacter.name, a), this.trackEvent("newGearUnlocked"), this.buildPopup("NEW_GEAR_UNLOCKED"), "trail" == this._loot.type ? this.buildTrail() : $.getAssetPack(this._loot,
                n(this, this.onItemLoaded))) : null)
        },
        buildTrail: function() { var a = new Xb(this._loot.id, "trails", null, !0, { defaultAnim: "start" });
            a.setXY(275, 75);
            this._popup.owner.addChild((new A).add(a));
            this.addEquipButton() },
        onItemLoaded: function(a, b) {
            var c = this.createImage(this._loot.parts[0].url, this._popup.owner, b),
                d = 130 / c.getNaturalWidth(),
                e = 130 / c.getNaturalHeight();
            c.setScale(Math.min(d, e));
            c.centerAnchor().setXY(280, 110);
            if ("shoulders" == this._loot.type || "flag5" == this._loot.id || "flag10" == this._loot.id) d = c.x, d.set__(d._value -
                10), c = c.y, c.set__(c._value - 25);
            this.addEquipButton()
        },
        buildPopup: function(a) {
            this._popupBg = new wb(0, q.width, q.height);
            this._popupBg.setAlpha(0);
            this.owner.addChild((new A).add(this._popupBg));
            this._popup = this.addSprite(new s);
            this.createImage("popup", this._popup.owner).setAnchor(250, 200).set_pointerEnabled(!1);
            a = this.createText(a, "23_white", this._popup.owner);
            a.setWrapWidth(250);
            a.setXY(-70, 40);
            a.setAlign(Z.Right);
            this.createImage("popup_arrow", this._popup.owner).centerAnchor().setXY(200, 65);
            this._glow =
                this.createImage("popup_beams", this._popup.owner);
            this._glow.centerAnchor().setScale(1.2);
            this._glow.setXY(275, 115);
            this.createButton(n(this, this.onClosePopup), "btn_quit", null, null, this._popup.owner).setXY(350, -15);
            this._popup.setXY(-450, 200)
        },
        addEquipButton: function() {
            var a = this.createButton(n(this, this.onEquip), "btn_equip", "BTN_EQUIP", null, this._popup.owner);
            a.label.setXY(a.label.getNaturalWidth() / 2, -5);
            a.centerAnchor().setXY(100, 125);
            a.scaleX.set_behavior(new db(1, 0.95, 0.35));
            a.scaleY.set_behavior(new db(1,
                0.95, 0.35))
        },
        onEquip: function(a) { v.play("equip_item", "SFX");
            this.onClosePopup(a);
            a = this._currentCharacter._compMap.CustomizationComponent_6;
            a.equipItem(this._loot, this._loot.type);
            a.saveInventory();
            this.trackEvent("newGearEquipped") },
        onClosePopup: function() { this._popup.x.animateTo(-450, 0.3, E.quadIn);
            this.owner.removeChild(this._popupBg.owner);
            this._btnBack.setAlpha(1);
            this._btnPlay.setAlpha(1);
            F.from(this._btnBack, { x: "-=100" }, { time: 0.5, ease: E.quadOut });
            F.from(this._btnPlay, { x: "+=100" }, { time: 0.5, ease: E.quadOut }) },
        buildConfettiBG: function() { var a = new Rg(q.width, q.height);
            a.autoStart = !1;
            this.owner.addChild((new A).add(a));
            a.maxCount = 80;
            a.startSpreadY = 0.3;
            a.speed.set__(2);
            a.speed.animateTo(1, 2);
            a.width = 0.4 * q.width;
            a.centerX = m.hasWon ? q.width / 4 : 3 * q.width / 4; return a },
        buildConfettiFG: function() { var a = new Rg(q.width, q.height);
            a.autoStart = !1;
            this.owner.addChild((new A).add(a));
            a.maxCount = 20;
            a.startSpreadY = 0.3;
            a.speed.set__(2);
            a.speed.animateTo(1, 2);
            a.width = 0.4 * q.width;
            a.centerX = m.hasWon ? q.width / 4 : 3 * q.width / 4; return a },
        playVO: function() { var a = "_lose";
            m.hasWon && (a = "_win" + (Math.floor(2 * Math.random()) + 1));
            m.config.vo && v.play(m.currentCharacter.name + a, "VO") },
        trackEvent: function(a) { var b = { matchType: m.isTournament ? "Tournament" : "Quick Match", gearType: this._loot.type, characterSelected: m.currentCharacter.name, flagName: "", helmetName: "", shoulderPadName: "", stickName: "", trailName: "" };
            this.setAnalyticItem(b);
            ba.track(a, b) },
        setAnalyticItem: function(a) {
            switch (this._loot.type) {
                case "flag":
                    a.flagName = this._loot.id;
                    break;
                case "head":
                    a.helmetName =
                        this._loot.id;
                    break;
                case "shoulders":
                    a.shoulderPadName = this._loot.id;
                    break;
                case "stick":
                    a.stickName = this._loot.id;
                    break;
                case "trail":
                    a.trailName = this._loot.id
            }
        },
        __class__: Ii
    });
    var hg = function() { this._characterContainer = new A;
        Q.call(this, !1) };
    g["game.ui.GameplayEnd"] = hg;
    hg.__name__ = ["game", "ui", "GameplayEnd"];
    hg.onClick = function() { ba.trackUI("Continue", "End Tournament");
        v.play("ui_click", "UI");
        C.change("SelectCharacter") };
    hg.__super__ = Q;
    hg.prototype = l(Q.prototype, {
        onAdded: function() {
            Q.prototype.onAdded.call(this);
            this.loadAssets("ui_end");
            v.playMusic("music_menu", !0, q.musicVolume)
        },
        onAssetsReady: function() { this.createImage("bg");
            this.createText("END_TITLE", "65_black").setXY(q.width / 2, 35);
            this.owner.addChild(this._characterContainer); var a = this.createButton(hg.onClick, "btn_play");
            a.setXY(850, 450 - q.getOffset(100));
            this.owner.addChild(a.owner);
            this.createCharacters();
            Q.prototype.onAssetsReady.call(this) },
        createCharacters: function() {
            this._characterQueue = [{ template: m.currentCharacter.template, x: 125, y: 450, flip: !1 },
                { template: m.currentCharacter.partner, x: q.width - 125, y: 450, flip: !0 }
            ];
            this.loadCharacter()
        },
        loadCharacter: function() { this._loadingCharacter = this._characterQueue.shift(); if (null != this._loadingCharacter) { var a = "spine/" + u.string(this._loadingCharacter.template);
                D.loadPack(a, n(this, this.buildCharacter)) } },
        buildCharacter: function() {
            var a = L.create({
                transform: { position: { x: this._loadingCharacter.x, y: this._loadingCharacter.y }, direction: this._loadingCharacter.flip ? -1 : 1 },
                spine: {
                    pack: "spine/" + u.string(this._loadingCharacter.template),
                    asset: this._loadingCharacter.template,
                    pixelSnapping: !1,
                    defaultAnimation: "idle"
                },
                customization: { inventorySave: this._loadingCharacter.template }
            });
            this._loadingCharacter.template == m.currentCharacter.template && (this._currentCharacter = a);
            this._characterContainer.addChild(a);
            this.loadCharacter()
        },
        __class__: hg
    });
    var Ji = function() { this.bgAlpha = 0.7;
        Q.call(this, !1) };
    g["game.ui.CustomizationTuto"] = Ji;
    Ji.__name__ = ["game", "ui", "CustomizationTuto"];
    Ji.__super__ = Q;
    Ji.prototype = l(Q.prototype, {
        onAdded: function() {
            Q.prototype.onAdded.call(this);
            this.loadAssets("ui_codes")
        },
        onAssetsReady: function() {
            this._bg = new wb(0, q.width, q.height);
            this._bg.setAlpha(this.bgAlpha);
            this.addSprite(this._bg);
            var a = this.createImage("bg"),
                b = q.width / 2,
                c = q.height / 2;
            a.getNaturalWidth();
            a.getNaturalHeight();
            a.setXY(b, c).centerAnchor();
            this.createText("CUSTOMIZATION_TITLE", "30_pink").setXY(b, c - 80);
            this.createText("CUSTOMIZATION_TUTO", "16_white").setWrapWidth(350).setXY(b - 175, c - 25);
            a = this.createButton(n(this, this.onClose), "btn_pink", "BTN_CLOSE");
            a.setXY(b - a.getNaturalWidth() /
                2, c + 45);
            F.from(this._bg, { alpha: 0 }, { time: 1.5, ease: E.quintOut, delay: 0 })
        },
        onClose: function() { v.play("ui_click", "UI");
            C.pop() },
        __class__: Ji
    });
    var Ki = function() { this.bgAlpha = 0.7;
        Q.call(this, !1) };
    g["game.ui.CharacterTuto"] = Ki;
    Ki.__name__ = ["game", "ui", "CharacterTuto"];
    Ki.__super__ = Q;
    Ki.prototype = l(Q.prototype, {
        onAdded: function() { Q.prototype.onAdded.call(this);
            this.loadAssets("ui_codes") },
        onAssetsReady: function() {
            this._bg = new wb(0, q.width, q.height);
            this._bg.setAlpha(this.bgAlpha);
            this.addSprite(this._bg);
            var a = this.createImage("bg"),
                b = q.width / 2,
                c = q.height / 2;
            a.getNaturalWidth();
            a.getNaturalHeight();
            a.setXY(b, c).centerAnchor();
            this.createText("CHARACTER_TUTO", "16_white").setWrapWidth(400).setXY(b - 200, c - 65);
            var a = this.createButton(n(this, this.onCustomize), "btn_customize", "BTN_CUSTOMIZE", null, null, D.getPack("ui_character")),
                d = a.label.x;
            d.set__(d._value + 23);
            d = a.label.y;
            d.set__(d._value + 24);
            a.setScale(0.85);
            a.setXY(b - 120, c);
            d = new Cf(175);
            d.setXY(68, 66);
            a.owner.addChild((new A).add(d));
            this.createButton(n(this,
                this.onClose), "btn_quit").centerAnchor().setXY(b + 225, c - 125);
            F.from(this._bg, { alpha: 0 }, { time: 1.5, ease: E.quintOut, delay: 0 })
        },
        onClose: function() { v.play("ui_click", "UI");
            C.pop() },
        onCustomize: function() { v.play("ui_click", "UI");
            C.change("customizeCharacter") },
        __class__: Ki
    });
    var zi = function() {};
    g["game.SceneList"] = zi;
    zi.__name__ = ["game", "SceneList"];
    var nc = function() {
        this._saveLimits = {};
        this._camera = new Sg;
        this._targets = [];
        this.currentTargetIndex = -1;
        this.selfUpdate = !0;
        this.autoSwitch = !1;
        this.enabled = this.autoCenterZoom = !0;
        k.call(this)
    };
    g["stolo.ensys.system.CameraSystem"] = nc;
    nc.__name__ = ["stolo", "ensys", "system", "CameraSystem"];
    nc.__super__ = k;
    nc.prototype = l(k.prototype, {
        get_name: function() { return "CameraSystem_26" },
        dispose: function() { k.prototype.dispose.call(this);
            this._saveLimits = this._renderer = this._camera = this._target = this._targets = this.rendererOffset = null },
        onAdded: function() { this.sharedBase = new A;
            this.owner.addChild(this.sharedBase) },
        onStart: function() { this._renderer = this.owner._compMap.RendererSystem_50 },
        onUpdate: function(a) {
            this.selfUpdate &&
                this.update(a)
        },
        update: function(a) {
            if (this.enabled) {
                this.autoSwitch && null == this._camera.target && this.nextTarget();
                this._camera.update(a);
                var b = 0,
                    c = 0;
                null != this.rendererOffset && (this.rendererOffset.update(a), b += this.rendererOffset.x._value, c += this.rendererOffset.y._value);
                null != this._camera.zoom && (this.autoCenterZoom && (a = this._renderer.dimensions, b += 0.5 * (a.width - a.width * this._camera.zoom._value), c += 0.5 * (a.height - a.height * this._camera.zoom._value)), this._renderer.setScale(this._camera.zoom._value));
                this._renderer.move(-this._camera.x + b, -this._camera.y + c)
            }
        },
        centerRenderer: function() { null == this._renderer && (this._renderer = this.owner._compMap.RendererSystem_50);
            null == this.rendererOffset && (this.rendererOffset = new fe);
            this.rendererOffset.x.set__(Math.round(this._renderer.dimensions.width / 2));
            this.rendererOffset.y.set__(Math.round(this._renderer.dimensions.height / 2)) },
        configure: function(a) { if (null != a)
                for (var b = 0, c = y.fields(a); b < c.length;) { var d = c[b];++b;
                    y.setProperty(this._camera, d, y.field(a, d)) } },
        addTarget: function(a) { this._targets.push(a);
            null == this._target && this.autoSwitch && this.nextTarget() },
        removeTarget: function(a) { null != this._targets && N.remove(this._targets, a) && this._target == a && this.previousTarget() },
        setTarget: function(a, b) {
            null == b && (b = { time: 0 });
            if (null == a) { if (0 == this._targets.length) return this._target = null;
                a = this._targets[0] } this._target = a;
            if (null == this._target || null == this._target.owner) return null;
            if (0 < b.time) {
                var c = this._target.owner._compMap.TransformComponent_66.position,
                    d = this._target.owner._compMap.Sprite_19;
                null != d && (c = { x: d.x._value, y: d.y._value });
                this._wasSpringX = this.get_camera().springX;
                this._wasSpringY = this.get_camera().springY;
                this.get_camera().springX = this.get_camera().springY = !1;
                this.offsetTarget(a, 0, 0, b.time, b.ease);
                this.get_camera().animateTo(c.x + a.offsetX, c.y + a.offsetY, b.time, b.ease);
                F.delayCallTo(n(this, this.onCameraAnimationComplete), b.time, this.owner)
            } else this.syncTarget(!1), this.offsetTarget(a, a.offsetX, a.offsetY, b.offsetTime, b.offsetEase, b.offsetTimeY, b.offsetEaseY);
            return a
        },
        onCameraAnimationComplete: function() {
            this.offsetTarget(this.get_target(),
                this.get_target().offsetX, this.get_target().offsetY, 0.3);
            this.syncTarget(!1);
            this.get_camera().springX = this._wasSpringX;
            this.get_camera().springY = this._wasSpringY
        },
        syncTarget: function(a) { null == a && (a = !1); if (!(null == this._target || null == this._target.owner)) { var b = this._target.owner._compMap.Sprite_19;
                null != b && this._camera.followSprite(b);
                a && this._camera.moveToTarget() } },
        get_target: function() { return this._target },
        offsetTarget: function(a, b, c, d, e, f, j) {
            null == f && (f = -1);
            null == d && (d = -1);
            a.offsetX = b;
            a.offsetY =
                c;
            0 > d && (d = nc.DEFAULT_OFFET_TIME);
            null == e && (e = nc.DEFAULT_OFFET_EASING);
            this._camera.setOffset(b * a.offsetDirectionX, c * a.offsetDirectionY, d, e, f, j)
        },
        offsetTargetDirectionX: function(a, b, c, d) { null == c && (c = 0);
            this._camera.setOffsetX(a.offsetX * a.offsetDirectionX, c, d) },
        get_camera: function() { return this._camera },
        nextTarget: function() { this.currentTargetIndex++;
            this.currentTargetIndex > this._targets.length - 1 && (this.currentTargetIndex = 0); return this.setTarget(this._targets[this.currentTargetIndex]) },
        previousTarget: function() {
            this.currentTargetIndex--;
            0 > this.currentTargetIndex && (this.currentTargetIndex = this._targets.length - 1);
            return this.setTarget(this._targets[this.currentTargetIndex])
        },
        __class__: nc,
        __properties__: l(k.prototype.__properties__, { get_camera: "get_camera", get_target: "get_target" })
    });
    var Li = function() { this.playerOffsetY = 80;
        this.maxPlayerDistY = 100;
        this.maxPlayerDistX = 150;
        this.followPuck = !0;
        nc.call(this) };
    g["game.camera.GameCamera"] = Li;
    Li.__name__ = ["game", "camera", "GameCamera"];
    Li.__super__ = nc;
    Li.prototype = l(nc.prototype, {
        onStart: function() {
            nc.prototype.onStart.call(this);
            this._logic = this.owner._compMap.GameLogic_27
        },
        onStop: function() { nc.prototype.onStop.call(this);
            this._logic = null },
        onUpdate: function(a) {
            if (this._logic.isStarted && null != this._cameraTarget) {
                if (this.followPuck && null != this._logic.player && null != this._logic.player.owner && null != this._logic.puck) {
                    this._camera.followTarget = !0;
                    var b = this._logic.puck._compMap.TransformComponent_66,
                        c = this._logic.playerEntity._compMap.TransformComponent_66,
                        d = 0.5 * (b.position.x + c.position.x),
                        b = 0.5 * (b.position.y + c.position.y),
                        d = Za.clamp(d,
                            c.position.x - this.maxPlayerDistX, c.position.x + this.maxPlayerDistX),
                        b = Za.clamp(b, c.position.y - this.maxPlayerDistY - this.playerOffsetY, c.position.y + this.maxPlayerDistY - this.playerOffsetY);
                    this._cameraTarget.setXY(d, b)
                }
                this._camera.update(a);
                d = c = 0;
                null != this.rendererOffset && (this.rendererOffset.update(a), c += this.rendererOffset.x._value, d += this.rendererOffset.y._value);
                null != this._camera.zoom && (this.autoCenterZoom && (a = this._renderer.dimensions, c += 0.5 * (a.width - a.width * this._camera.zoom._value), d += 0.5 * (a.height -
                    a.height * this._camera.zoom._value)), this._renderer.setScale(this._camera.zoom._value));
                this._renderer.move(-this._camera.x + c, -this._camera.y + d)
            }
        },
        configure: function() { nc.prototype.configure.call(this, { linearDampingX: 0.2, springX: !0, stiffnessX: 0.8, massX: 40, dampingX: 10, linearDampingY: 0.2, springY: !0, stiffnessY: 0.7, massY: 40, dampingY: 20 });
            this.centerRenderer() },
        setIceLimits: function(a, b, c, d) { this.get_camera().setLimits(a, b, c, d);
            this._cameraTarget = this.get_camera().setTarget(0, 0, !0) },
        centerForFaceoff: function(a,
            b, c) { null == a && (a = 0);
            null == b && (b = E.backInOut);
            null == c && (c = E.quintInOut);
            this.animateTo(0, 0, a, b, c) },
        centerForGoal: function(a, b, c, d, e, f) { null == d && (d = -50);
            null == c && (c = 0);
            null == b && (b = 0.5);
            null == e && (e = E.quadInOut);
            null == f && (f = E.quadInOut); var j = this.get_camera().getLimits();
            this.animateTo((a ? j.minX : j.maxX) + c, d, b, e, f) },
        animateTo: function(a, b, c, d, e) {
            null == c && (c = 1);
            null == d && (d = E.quintInOut);
            null == e && (e = E.quadInOut);
            this.followPuck = !1;
            this.get_camera().springX = this.get_camera().springY = !1;
            this.get_camera().linearDampingX =
                this.get_camera().linearDampingY = 1;
            0 < c ? (this._cameraTarget.x.animateTo(a, c, d), this._cameraTarget.y.animateTo(b, c, e)) : (this._cameraTarget.setXY(a, b), this.get_camera().moveToTarget())
        },
        startFollow: function() { this.followPuck = !0;
            this.get_camera().springX = this.get_camera().springY = !0 },
        __class__: Li
    });
    var Mi = function() { this._cooldown = 0;
        this.detectionRange = 275;
        this.cooldown = 0.3;
        k.call(this) };
    g["game.characters.Action"] = Mi;
    Mi.__name__ = ["game", "characters", "Action"];
    Mi.__super__ = k;
    Mi.prototype = l(k.prototype, {
        get_name: function() { return "Action_11" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._logic = this.owner._internal_getFromParents("GameLogic_27");
            this._tuto = this.owner._internal_getFromParents("TutorialManager_32");
            this._character = this.owner._compMap.Character_30;
            this._puckHandling = this.owner._compMap.PuckHandling_12;
            this._state = this.owner._compMap.CharacterState_29;
            this._transform = this.owner._compMap.TransformComponent_66;
            this._puck = this._logic.puck;
            this._opponents = [];
            for (var a = 0, b = this._logic.characters; a <
                b.length;) { var c = b[a];++a;
                this._character.isTeam != c._compMap.Character_30.isTeam && this._opponents.push(c) }
        },
        onStop: function() { k.prototype.onStop.call(this) },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a);
            this._cooldown -= a },
        inRange: function() { var a = this.getDistance(this._puck, !0); if (-1 != a && a <= this.detectionRange) return !0; for (var b = 0, c = this._opponents; b < c.length;)
                if (a = c[b], ++b, a = this.getDistance(a), -1 != a && a <= this.detectionRange) return !0; return !1 },
        onAction: function() {
            if (0 < this._cooldown) return !1;
            v.play("slapshot_swoosh", "SFX2");
            var a = this.getDistance(this._puck, !0); - 1 != a && a <= this.detectionRange && (a = this._puck._compMap.TransformComponent_66, this._puckHandling.slapshot(Math.atan2(a.position.y - this._transform.position.y, a.position.x - this._transform.position.x)));
            for (var b = 0, c = this._opponents; b < c.length;) { var d = c[b];++b;
                a = this.getDistance(d); - 1 != a && a <= this.detectionRange && this.checkOpponent(d) } this._state.changeState(ra.PRE_SLAPSHOT, { returnState: ra.SLAPSHOT });
            this._cooldown = this.cooldown;
            return !0
        },
        checkOpponent: function(a) { var b = a._compMap.Character_30;
            0 < b.get_invincible() || (this._character.isPlayer && (m.checks++, this._tuto.isActive && this._tuto.currentStepId == ab.CHECK && this._tuto.showNextStep()), v.play("check", "CHECK"), b.isPlayer && m.checked++, a._compMap.CharacterState_29.changeState(ra.CHECKED, { duration: b.stunDuration }), b.stun(), m.config.vo && 0.4 < Math.random() && v.play(a._compMap.TemplateComponent_47.key + "_checked", "VO")) },
        getDistance: function(a, b) {
            null == b && (b = !1);
            var c = -1,
                d = a._compMap.TransformComponent_66;
            if (b) { if (1 == this._transform.direction && d.position.x >= this._transform.position.x || -1 == this._transform.direction && d.position.x < this._transform.position.x) c = Math.abs(d.position.x - this._transform.position.x) + Math.abs(d.position.y - this._transform.position.y) } else c = Math.abs(d.position.x - this._transform.position.x) + Math.abs(d.position.y - this._transform.position.y);
            return c
        },
        __class__: Mi
    });
    var Ni = function() { this._nextImage = 0;
        this._images = [];
        this.duration = this.startingAlpha = 0.5;
        this.frequency = 0.1;
        k.call(this) };
    g["game.characters.AfterImage"] = Ni;
    Ni.__name__ = ["game", "characters", "AfterImage"];
    Ni.__super__ = k;
    Ni.prototype = l(k.prototype, {
        get_name: function() { return "AfterImage_95" },
        onStart: function() { k.prototype.onStart.call(this);
            this._anim = this.owner._compMap.Sprite_19;
            this._character = this.owner._compMap.Character_30;
            this._transform = this.owner._compMap.TransformComponent_66;
            this._actors = this.owner._internal_getFromParents("ActorSystem_48");
            o.lowPerformance && (this.duration = 0.2) },
        onStop: function() {
            this._actors =
                this._transform = this._character = this._anim = this._images = null;
            k.prototype.onStop.call(this)
        },
        onUpdate: function(a) { null != this._images && (0 < this._images.length && 0 == this._images[0].alpha._value && this._images.shift().owner.dispose(), 0 >= this._character.fast || (k.prototype.onUpdate.call(this, a), this._nextImage -= a, 0 >= this._nextImage && (this.spawnAfterImage(), this._nextImage = this.frequency))) },
        spawnAfterImage: function() {
            if (!o.lowPerformance || this._character.isPlayer) {
                var a = w._platform.getRenderer().createTexture(500,
                    500);
                a.get_graphics().translate(250 - this._transform.position.x, 250 - this._transform.position.y);
                s.render(this.owner, a.get_graphics());
                a = new V(a);
                this.owner.parent.addChild((new A).add(a));
                a.setAlpha(0.5);
                a.alpha.animateTo(0, this.duration);
                a.setXY(this._transform.position.x - 250, this._transform.position.y - 250);
                this._images.push(a)
            }
        },
        __class__: Ni
    });
    var Tg = function() {
        this._applyImpulse = !1;
        this._disabledDelay = 0;
        this._targetAngle = new Ca(0);
        this.slowed = this.fast = this._invincible = 0;
        this.animSpeed = this.speedEffect =
            1;
        this.isTeam = this.isEnabled = !0;
        this.isPlayer = !1;
        this.maxAnimSpeed = 2;
        this.stunRecovery = 1;
        this.stunDuration = 0.5;
        this.minSpeedForBreak = 200;
        this.breakDelay = 0.1;
        this.minVelocity = 50;
        this.turnAgility = 0.1;
        this.baseForce = 1E4;
        k.call(this)
    };
    g["game.characters.Character"] = Tg;
    Tg.__name__ = ["game", "characters", "Character"];
    Tg.__super__ = k;
    Tg.prototype = l(k.prototype, {
        get_name: function() { return "Character_30" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._anim = this.owner._compMap.Sprite_19;
            this._state = this.owner._compMap.CharacterState_29;
            this._physics = this.owner._compMap.PhysicsComponent_42;
            this._transform = this.owner._compMap.TransformComponent_66;
            this._speedModifer = this.owner._compMap.SpeedModifier_41;
            this._super = this.owner._compMap.SuperMove_31;
            this.position = this._transform.position;
            o.mobile || (this.turnAgility *= 10)
        },
        onStop: function() { k.prototype.onStop.call(this) },
        onUpdate: function(a) {
            this.isEnabled && (0 < this._disabledDelay && 0 >= this._disabledDelay - a && this.recover(), this._disabledDelay -= a, this.slowed -= a, this.fast -= a, this._invincible -=
                a, this.setAnimSpeed(), this._targetAngle.update(a), this._physics.getVelocity().set_angle(this._targetAngle._value), k.prototype.onUpdate.call(this, a))
        },
        enable: function(a) { null == a && (a = !0); if (!a) return this.disable();
            this.isEnabled || (this.isEnabled = !0, this._physics.enable(), this._state.changeState(ra.SLIDE, { force: !0 })) },
        disable: function() { this.isEnabled && (this.isEnabled = !1, this._physics.disable()) },
        isStun: function() { return 0 < this._disabledDelay },
        skate: function(a) {
            if (!(0 < this._disabledDelay)) {
                Math.abs(this._physics.getVelocity().get_x()) +
                    Math.abs(this._physics.getVelocity().get_y()) <= this.minVelocity && (this._applyImpulse = !0);
                if (this._applyImpulse) this._applyImpulse = !1, this._physics.applyImpulse(Math.cos(a) * this.baseForce, Math.sin(a) * this.baseForce), this._targetAngle.set__(a);
                else { var b = this._physics.getVelocity().get_angle() - a,
                        c = a;
                    b > Math.PI ? c += 2 * Math.PI : b < -Math.PI && (c -= 2 * Math.PI);
                    this._targetAngle.set__(this._physics.getVelocity().get_angle());
                    this._targetAngle.animateTo(c, this.turnAgility) } this._transform.direction = Math.abs(a) > Math.PI /
                    2 ? -1 : 1;
                this._speedModifer.appliedModifier = 0 < this.fast || 0 < this.slowed ? this.speedEffect : 1;
                this.isSkating = !0
            }
        },
        get_invincible: function() { return this._invincible },
        set_invincible: function(a) { return a < this._invincible ? this._invincible : this._invincible = a },
        bump: function(a, b, c) { 0 < c && (this._disabledDelay = c, this._state.changeState(ra.BUMPED));
            this._physics.applyImpulse(Math.cos(a) * b, Math.sin(a) * b);
            this._targetAngle.set__(a) },
        stop: function() {
            null != this._physics && (this._physics.resetImpulse(), this._physics.resetVelocity());
            this.isSkating = !1
        },
        slide: function(a) { null == a && (a = !1); if (a) { var b = this._physics.getVelocity();
                b.set_x(0.95 * function() { b.zpp_inner.validate(); return b.zpp_inner.x }(this)); var c = this._physics.getVelocity();
                c.set_y(0.95 * function() { c.zpp_inner.validate(); return c.zpp_inner.y }(this)) } this.isSkating = !1 },
        stun: function(a) {
            null == a && (a = -1);
            0 < this.get_invincible() || (this._disabledDelay = -1 == a ? this.stunDuration : a, this.set_invincible(this.stunRecovery + this._disabledDelay), this._physics.resetImpulse(), this._physics.resetVelocity(),
                this.isSkating = !1, this.addHitFx())
        },
        recover: function() { this._disabledDelay = -1;
            this._state.changeState(this._state.defaultState, { force: !0 }) },
        supermove: function() { this._super.isReady() && (this.recover(), this._state.changeState(ra.SUPER, { callback: n(this, this.onSuperAnimDone) }), this._super.activate()) },
        onSuperAnimDone: function() { this._super.animDone() },
        setAnimSpeed: function() {
            this.animSpeed = 1;
            this._state.currentState != ra.SUPER && (0 < this.slowed ? this.animSpeed = 0.5 : 0 < this.fast && (this.animSpeed = 2));
            this.animSpeed =
                Math.min(this.animSpeed, this.maxAnimSpeed);
            this._anim.setSpeed(this.animSpeed / 2)
        },
        addHitFx: function() { null != this._hit && this.removeHitFx();
            this._hit = G.createImage("hit", D.getPack("sprites"));
            this._hit.centerAnchor().setXY(0, -75).setScale(3);
            this.owner.addChild((new A).add(this._hit));
            F.delayCallTo(n(this, this.removeHitFx), 0.15) },
        removeHitFx: function() { this.owner.removeChild(this._hit.owner);
            this._hit = null },
        __class__: Tg,
        __properties__: l(k.prototype.__properties__, { set_invincible: "set_invincible", get_invincible: "get_invincible" })
    });
    var ig = function() { k.call(this) };
    g["stolo.ensys.components.SpawnPointComponent"] = ig;
    ig.__name__ = ["stolo", "ensys", "components", "SpawnPointComponent"];
    ig.__super__ = k;
    ig.prototype = l(k.prototype, { get_name: function() { return "SpawnPointComponent_40" }, __class__: ig });
    var Sd = function() { this.playerId = 0;
        k.call(this) };
    g["game.characters.CharacterSpawn"] = Sd;
    Sd.__name__ = ["game", "characters", "CharacterSpawn"];
    Sd.getSpawnWithId = function(a, b) {
        for (var c = [], d = 0; d < b.length;) {
            var e = b[d];
            ++d;
            U.__cast(e._compMap.SpawnPointComponent_40,
                Sd).playerId == a && c.push(e)
        }
        return 0 < c.length ? c[Math.floor(Math.random() * c.length)] : null
    };
    Sd.__super__ = ig;
    Sd.prototype = l(ig.prototype, { __class__: Sd });
    var ra = function() { this.currentState = this._options = null;
        this.defaultState = ra.SLIDE;
        k.call(this) };
    g["game.characters.CharacterState"] = ra;
    ra.__name__ = ["game", "characters", "CharacterState"];
    ra.__super__ = k;
    ra.prototype = l(k.prototype, {
        get_name: function() { return "CharacterState_29" },
        onStart: function() { k.prototype.onStart.call(this);
            this._anim = this.owner._compMap.Sprite_19 },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a); if (!(null == this._anim || null == this._options) && null != this._options.duration) this._options.duration -= a, 0 >= this._options.duration && (this._options.duration = null, this.onStateDone(this._anim)) },
        changeState: function(a, b) { null == this._anim || a == this.currentState || null != this.currentState && a.priority < this.currentState.priority && (null == b || !0 != b.force) || (this._options = b, this.currentState = a, this._anim.play(a.name, !0, n(this, this.onStateDone), !1)) },
        onStateDone: function() {
            if (!(null !=
                    this._options && null != this._options.duration)) { null != this._options && null != this._options.callback && this._options.callback(); var a;
                a = this.currentState.loop ? this.currentState : this.defaultState;
                null != this._options && null != this._options.returnState && (a = this._options.returnState);
                this.changeState(a, { force: !0 }) }
        },
        __class__: ra
    });
    var Mb = function() {
        this._cooldown = 0;
        this._offsetX = new Ca(0);
        this.fixed = !1;
        this.state = Mb.STATE_ACTIVE;
        this.onDeath = new ia;
        this.slapCooldown = 1;
        this.slapPower = 6;
        this.variationY = 100;
        this.variationX =
            55;
        this.speed = 2;
        this.isTeam = !0;
        k.call(this)
    };
    g["game.characters.Goalkeeper"] = Mb;
    Mb.__name__ = ["game", "characters", "Goalkeeper"];
    Mb.__super__ = k;
    Mb.prototype = l(k.prototype, {
        get_name: function() { return "Goalkeeper_28" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._display = this.owner._compMap.Sprite_19;
            this._physics = this.owner._compMap.PhysicsComponent_42;
            this._transform = this.owner._compMap.TransformComponent_66;
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_44");
            this._target =
                new fe(this._transform.position.x, this._transform.position.y);
            this.isTeam ? (this._transform.direction = 1, this._target.x.set_behavior(new db(this._transform.position.x + this.variationX, this._transform.position.x - this.variationX, this.speed))) : (this._transform.direction = -1, this._target.x.set_behavior(new db(this._transform.position.x - this.variationX, this._transform.position.x + this.variationX, this.speed)));
            this._target.y.set_behavior(new db(this._transform.position.y - this.variationY, this._transform.position.y +
                this.variationY, this.speed));
            this._physicSystem.addContactListener(ma.BEGIN, Aa.ANY, "PUCK", "ANY_BODY", this.owner, n(this, this.onPuckContact))
        },
        onStop: function() { this._physicSystem.removeContactListener(ma.BEGIN, Aa.ANY, "PUCK", "ANY_BODY", this.owner);
            k.prototype.onStop.call(this) },
        onUpdate: function(a) {
            this.state != Mb.STATE_ACTIVE || this.fixed || (this._cooldown -= a, k.prototype.onUpdate.call(this, a), this._target.update(a), this._offsetX.update(a), this._physics.setPosition(this._target.x._value + this._offsetX._value,
                this._target.y._value))
        },
        reset: function() { this.state == Mb.STATE_FROZEN && this.destroy();
            this.state == Mb.STATE_BROKEN && (this._display.setAlpha(1), this.state = Mb.STATE_ACTIVE, this._transform.fixed = !1, this._physics.setDynamic(), this._physics.enable(!0), this.fixed = !1) },
        lockPosition: function() { this.fixed = !0;
            this._transform.fixed = !0;
            this._physics.resetVelocity();
            this._physics.setSensor() },
        freeze: function() {
            var a = this;
            this.state != Mb.STATE_BROKEN && (this._display.setAlpha(1), F.delayCallTo(function() {
                v.play("super_freeze_goalie",
                    "SFX");
                a._display.alpha.animateTo(0.5, 0.5)
            }, 1.2, this.owner), this.state = Mb.STATE_FROZEN, this._physicSystem.addContactListener(ma.PRELISTENER, Aa.ANY, "PUCK", "ANY_BODY", this.owner, n(this, this.onPuckPreContact)))
        },
        destroy: function() { this.state != Mb.STATE_BROKEN && (this.state = Mb.STATE_BROKEN, this._physics.enable(!1), this._display.setAlpha(0), this._physicSystem.removeContactListener(ma.PRELISTENER, Aa.ANY, "PUCK", "ANY_BODY", this.owner), this.onDeath.emit()) },
        onPuckContact: function(a, b) {
            var c = this;
            if (!(null ==
                    a || null == b || 0 < this._cooldown)) {
                this._cooldown = this.slapCooldown;
                var d = a._compMap.PhysicsComponent_42,
                    e = d.getVelocity(),
                    f = Math.abs(function() { e.zpp_inner.validate(); return e.zpp_inner.x }(this)) + Math.abs(function() { e.zpp_inner.validate(); return e.zpp_inner.y }(this)),
                    f = Math.max(a._compMap.Puck_34.minImpactVelocity, f * this.slapPower);
                d.resetImpulse();
                d.resetVelocity();
                e.set_x(Math.cos(b.angle) * f);
                e.set_y(Math.sin(b.angle) * f);
                a._compMap.Puck_34.hit();
                this._offsetX.set_behavior(new Ve(0, 8));
                F.delayCallTo(function() { c._offsetX.set__(0) },
                    0.4, this.owner);
                v.play("block", "SFX")
            }
        },
        onPuckPreContact: function() { this.destroy(); return !1 },
        __class__: Mb
    });
    var Td = function() { k.call(this) };
    g["game.characters.Mods"] = Td;
    Td.__name__ = ["game", "characters", "Mods"];
    Td.__super__ = k;
    Td.prototype = l(k.prototype, {
        get_name: function() { return "Mods_7" },
        applyMods: function(a) { this._stats = a; for (a = this.owner.firstComponent; null != a;) { var b = L.getComponentName(a),
                    b = y.field(Td.statOverrides, b);
                null != b && this.applyOverride(a, b);
                a = a.next } },
        applyOverride: function(a, b) {
            var c =
                y.fields(b),
                d;
            d = "";
            for (var e = 0, f = 0; f < c.length;) { var j = c[f];++f;
                d = y.field(b, j); switch (d.stat) {
                    case "speed":
                        e = this._stats.speed; break;
                    case "power":
                        e = this._stats.power; break;
                    case "superRate":
                        e = this._stats.superRate } d = d.values[e]; var p = {};
                p[j] = d;
                H.applyMods(a, p) }
        },
        __class__: Td
    });
    var Ug = function() { this._firstMove = !0;
        this._lastRadian = 0;
        this._disposer = new Ta;
        this.onReady = new ia;
        k.call(this) };
    g["game.characters.Player"] = Ug;
    Ug.__name__ = ["game", "characters", "Player"];
    Ug.__super__ = k;
    Ug.prototype = l(k.prototype, {
        get_name: function() { return "Player_15" },
        onStart: function() {
            this._action = this.owner._compMap.Action_11;
            this._character = this.owner._compMap.Character_30;
            this._state = this.owner._compMap.CharacterState_29;
            this._physics = this.owner._compMap.PhysicsComponent_42;
            this._transform = this.owner._compMap.TransformComponent_66;
            this._controls = this.owner._internal_getFromParents("WebControls_16");
            this._camera = this.owner._internal_getFromParents("CameraSystem_26");
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_44");
            this._tuto = this.owner._internal_getFromParents("TutorialManager_32");
            this._disposer.add(this.owner._compMap.PuckHandling_12.onHitPuck.connect(n(this, this.onHitPuck)));
            this.isReady = this._character.isPlayer = !0;
            this.onReady.emit();
            this._physicSystem.addContactListener(ma.PRELISTENER, Aa.COLLISION, "PLAYER", "WALL", this.owner, n(this, this.onWallPreContact));
            k.prototype.onStart.call(this);
            this.addPlayerCircle()
        },
        onStop: function() {
            this._physicSystem.removeContactListener(ma.PRELISTENER, Aa.COLLISION, "PLAYER",
                "WALL", this.owner);
            this._disposer.dispose();
            this._tuto = this._physicSystem = this._camera = this._controls = this._transform = this._physics = this._state = this._action = this._character = null;
            k.prototype.onStop.call(this)
        },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a);
            this._circle.setXY(this._transform.position.x, this._transform.position.y);
            this._controls.get_enabled() && (this.move(a), this._controls.special && this._character.supermove()) },
        onWallPreContact: function(a, b) { b.disableFriction(); return !0 },
        getSpeed: function() {
            return Math.abs(this._physics.getVelocity().get_x()) +
                Math.abs(this._physics.getVelocity().get_y())
        },
        move: function() {
            if (this._controls.action || this._controls.move) {
                this._tuto.isActive && this._tuto.currentStepId == ab.MOVE && this._tuto.showNextStep();
                w._platform.getPointer().get_x();
                this._camera.get_camera();
                w._platform.getPointer().get_y();
                this._camera.get_camera();
                var a = this._controls.angle / 180 * Math.PI;
                if (this._controls.action) this._action.onAction();
                this._state.changeState(ra.SKATE);
                this._character.skate(a, this._controls.action);
                if (this.getSpeed() > this._character.minSpeedForBreak &&
                    (Math.abs(this._lastRadian) > 0.7 * Math.PI && Math.abs(a) < 0.3 * Math.PI || Math.abs(this._lastRadian) < 0.3 * Math.PI && Math.abs(a) > 0.7 * Math.PI)) this._state.changeState(ra.SKID_STOP), v.play("brake", "SFX2"), this._character.stop();
                this._lastRadian = a;
                this._firstMove = this._controls.action = !1
            } else this._firstMove || this._state.changeState(ra.SLIDE), this._character.slide(!0)
        },
        addPlayerCircle: function() {
            this._circle = G.createImage("player_circle", D.getPack("sprites"));
            this._circle.centerAnchor();
            this.owner.parent.addChild((new A).add(this._circle),
                !1)
        },
        onHitPuck: function() {},
        __class__: Ug
    });
    var Oi = function() { this._preCooldown = 0;
        this.onHitPuck = new I;
        this.assistDegrees = 45;
        this.preSlapshotCooldown = 1.5;
        this.anticipationDistance = 250;
        this.slapPower = 6;
        k.call(this) };
    g["game.characters.PuckHandling"] = Oi;
    Oi.__name__ = ["game", "characters", "PuckHandling"];
    Oi.__super__ = k;
    Oi.prototype = l(k.prototype, {
        get_name: function() { return "PuckHandling_12" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._character = this.owner._compMap.Character_30;
            this._state = this.owner._compMap.CharacterState_29;
            this._transform = this.owner._compMap.TransformComponent_66;
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_44");
            this._physicSystem.addContactListener(ma.BEGIN, Aa.COLLISION, "PLAYER", "PUCK", this.owner, n(this, this.onContactBegin));
            this._puck = this.owner._internal_getFromParents("GameLogic_27").puck;
            this._puckTransform = this._puck._compMap.TransformComponent_66;
            this._goalX = this.owner._internal_getFromParents("LevelSystem_14").ice.midIce + 750
        },
        onStop: function() {
            this._physicSystem.removeContactListener(ma.BEGIN,
                Aa.COLLISION, "PLAYER", "PUCK", this.owner);
            this._transform = this._state = this._physicSystem = null;
            k.prototype.onStop.call(this)
        },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a);
            this._preCooldown -= a },
        onContactBegin: function(a, b) { if (this._character.isStun()) return !1;
            null != b && null != a._compMap.Puck_34 && this.onHitPuck.emit(this.owner); return !0 },
        slapshot: function(a) {
            this._character.isPlayer && (a = this.getAssistRadian(a, this._puckTransform.position.x, this._puckTransform.position.y, this._goalX, 0));
            var b =
                this._puck._compMap.PhysicsComponent_42.getVelocity();
            v.play("slapshot", "SFX", 1.5);
            var c = Math.abs(function() { b.zpp_inner.validate(); return b.zpp_inner.x }(this)) + Math.abs(function() { b.zpp_inner.validate(); return b.zpp_inner.y }(this)),
                c = Math.max(this._puck._compMap.Puck_34.minImpactVelocity, c * this.slapPower);
            b.set_x(Math.cos(a) * c);
            b.set_y(Math.sin(a) * c);
            this._puck._compMap.Puck_34.hit();
            this.onHitPuck.emit(this.owner)
        },
        getAssistRadian: function(a, b, c, d, e) {
            b = Math.atan2(e - c, d - b);
            return Math.abs(a - b) < this.assistDegrees /
                180 * Math.PI ? b : a
        },
        __class__: Oi
    });
    var Ud = function() { this._enabled = !0;
        this._currentTickDt = 0;
        this.pack = Ud.DefaultPack;
        this.tickRate = 0.5;
        k.call(this) };
    g["stolo.ai.components.BaseAI"] = Ud;
    Ud.__name__ = ["stolo", "ai", "components", "BaseAI"];
    Ud.__super__ = k;
    Ud.prototype = l(k.prototype, {
        get_name: function() { return "BaseAI_8" },
        dispose: function() { k.prototype.dispose.call(this);
            this.disposeBehavior() },
        enable: function(a) { null == a && (a = !0); if (!a) return this.disable();
            this._enabled = !0 },
        disable: function() { this._enabled = !1 },
        onStart: function() { k.prototype.onStart.call(this);
            this.createBehavior(this.data) },
        onUpdate: function(a) { if (null != this._behavior && this._enabled)
                for (this._currentTickDt += a; this._currentTickDt >= this.tickRate;) this.updateBehavior(), this._currentTickDt -= this.tickRate },
        updateBehavior: function() { this._behavior.tick(this) },
        createBehavior: function(a, b) {
            null == b && (b = !0);
            null == a && null != this.file && (a = Ka.getBehaviorData(this.file, this.pack));
            if (null != a) this._behavior = Ka.fromData(a);
            else if (b) throw "No data to create behavior!";
        },
        disposeBehavior: function() { null != this._behavior && (this._behavior.abort(), this._behavior.dispose(), this.file = this.data = this._behavior = null) },
        __class__: Ud
    });
    var qd = function() { this._weakTarget = !1;
        this.axisX = this.axisY = this.radians = 0;
        this.detectionRadius = 300;
        this.detectionDistance = 500;
        Ud.call(this) };
    g["stolo.ai.components.BaseTargetAI"] = qd;
    qd.__name__ = ["stolo", "ai", "components", "BaseTargetAI"];
    qd.__super__ = Ud;
    qd.prototype = l(Ud.prototype, {
        get_name: function() { return "BaseTargetAI_9" },
        dispose: function() {
            Ud.prototype.dispose.call(this);
            this._targetTransform = this._transform = this._physics = null
        },
        onStart: function() { Ud.prototype.onStart.call(this);
            this._physics = this.owner._compMap.PhysicsComponent_42;
            this._transform = this.owner._compMap.TransformComponent_66;
            X.getSystemEntity(this.owner);
            this.owner._compMap.Disposer_68.add(X.getSystemEntity(this.owner).getComponent("PhysicSystem_44").onPhysicUpdate.connect(n(this, this.onFixedUpdate)));
            this.createBehavior(this.data) },
        createTarget: function() { var a = qd.TARGET_TEMPLATE; return this.owner._internal_getFromParents("ActorSystem_48").spawn(a)._compMap.TransformComponent_66 },
        currentTarget: function() { return this._targetTransform },
        onUpdate: function() {},
        onFixedUpdate: function(a) { if (null != this._behavior && this._enabled)
                for (this._currentTickDt += a; this._currentTickDt >= this.tickRate;) this.updateBehavior(), this._currentTickDt -= this.tickRate },
        updateBehavior: function() { this.aimAtTarget();
            Ud.prototype.updateBehavior.call(this) },
        aimAtTarget: function() { null != this._targetTransform && !this.clearTarget() && this.aimAt(this._targetTransform.position.x, this._targetTransform.position.y) },
        aimAt: function(a,
            b) { this.radians = Math.atan2(b - this._transform.position.y, a - this._transform.position.x);
            this.axisX = Math.cos(this.radians);
            this.axisY = -1 * Math.sin(this.radians) },
        clearTarget: function() { return this._weakTarget && this._targetTransform.position.x < this._transform.position.x ? (this.setTarget(null), !0) : !1 },
        setTarget: function(a, b) { null == b && (b = !1);
            this._targetTransform = a;
            this._weakTarget = b; return S.Success },
        targetActor: function(a, b) { null == b && (b = !1); return this.setTarget(a._compMap.TransformComponent_66, b) },
        __class__: qd
    });
    var Pi = function() { this._isLeader = !1;
        this._speedByDiff = 0;
        this._actionCooldown = [12, 10, 8, 5];
        this._decisionRate = [0.35, 0.25, 0.15, 0.15];
        this._speed = [0.75, 1, 1.25, 1.5];
        this._agility = [15, 15, 15, 15];
        this._actionRange = [275, 325, 375, 375];
        this.difficulty = 1;
        qd.call(this);
        this.file = "hockey_ai.json" };
    g["game.characters.ai.CharacterAI"] = Pi;
    Pi.__name__ = ["game", "characters", "ai", "CharacterAI"];
    Pi.__super__ = qd;
    Pi.prototype = l(qd.prototype, {
        get_name: function() { return "CharacterAI_10" },
        dispose: function() {
            qd.prototype.dispose.call(this);
            this._targetTransform = this._transform = this._character = this._action = null
        },
        onStart: function() {
            qd.prototype.onStart.call(this);
            this._action = this.owner._compMap.Action_11;
            this._character = this.owner._compMap.Character_30;
            this._speedModifier = this.owner._compMap.SpeedModifier_41;
            this._state = this.owner._compMap.CharacterState_29;
            this._transform = this.owner._compMap.TransformComponent_66;
            this._level = this.owner._internal_getFromParents("LevelSystem_14");
            this._logic = this.owner._internal_getFromParents("GameLogic_27");
            this._isLeader = this.owner._compMap.TemplateComponent_47.key == m.currentOpponent.template;
            this.tickRate = this._decisionRate[this.difficulty];
            this._state.defaultState = ra.SKATE;
            this._action.detectionRange = this._actionRange[this.difficulty];
            this._action.cooldown = this._actionCooldown[this.difficulty];
            this._character.turnAgility *= this._agility[this.difficulty];
            this._speedByDiff = this._speed[this.difficulty];
            this._speedModifier.minVelocity *= this._speedByDiff;
            this._speedModifier.maxVelocityX *= this._speedByDiff;
            this._speedModifier.maxVelocityY *= this._speedByDiff
        },
        onUpdate: function(a) {
            this._enabled && this._logic.isStarted && (null != this._targetTransform && (this.aimAtTarget(), null != this._targetTransform.owner._compMap.Character_30 && 90 > this._transform.distanceTo(this._targetTransform) ? (this._speedModifier.maxVelocityX *= 0.93, this._speedModifier.maxVelocityY *= 0.93, this._state.changeState(ra.IDLE)) : (this._speedModifier.maxVelocityX = 500 * this._speedByDiff, this._speedModifier.maxVelocityY = 500 * this._speedByDiff, this._character.skate(this.radians),
                this._state.changeState(ra.SKATE))), qd.prototype.onUpdate.call(this, a))
        },
        updateBehavior: function() { qd.prototype.updateBehavior.call(this) },
        setTarget: function(a, b) { null == b && (b = !1);
            this._targetTransform = a;
            this._weakTarget = b; return S.Success },
        IsLeader: function() { return this._isLeader ? S.Success : S.Failure },
        InRange: function() { return this._action.inRange() ? S.Success : S.Failure },
        DoAction: function() { return this._action.onAction() ? S.Success : S.Failure },
        TargetPuck: function() {
            this.targetActor(this._logic.puck);
            return S.Success
        },
        TargetPlayer: function() { for (var a, b = 0, c = this._logic.characters; b < c.length;) { var d = c[b];++b; if (d._compMap.Character_30.isTeam != this._character.isTeam && (a = d._compMap.TransformComponent_66, !(this._character.isTeam && 0 < a.position.x || !this._character.isTeam && 0 > a.position.x)))
                    if (a = Math.abs(this._transform.position.x - a.position.x) + Math.abs(this._transform.position.y - a.position.y), 0 < a) return this.targetActor(d), S.Success } return S.Failure },
        TargetGoal: function() {
            this.targetActor(this._character.isTeam ?
                this._level.ice.teamDefense[Math.floor(Math.random() * this._level.ice.teamDefense.length)] : this._level.ice.opponentDefense[Math.floor(Math.random() * this._level.ice.opponentDefense.length)]);
            return S.Failure
        },
        Skate: function() { return S.Success },
        __class__: Pi
    });
    var Vd = function() { this.angle = -1;
        this.disableDuration = 0.3;
        this.idleForce = 0;
        this.force = 13E3;
        k.call(this) };
    g["game.components.Bumper"] = Vd;
    Vd.__name__ = ["game", "components", "Bumper"];
    Vd.__super__ = k;
    Vd.prototype = l(k.prototype, {
        get_name: function() { return "Bumper_33" },
        onStart: function() { k.prototype.onStart.call(this);
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_44");
            this._physicSystem.addContactListener(ma.BEGIN, Aa.ANY, "ANY_BODY", "ANY_BODY", this.owner, n(this, this.onContact)) },
        onStop: function() { this._physicSystem.removeContactListener(ma.BEGIN, Aa.ANY, "ANY_BODY", "ANY_BODY", this.owner);
            k.prototype.onStop.call(this) },
        onContact: function(a, b) {
            var c = a._compMap.PhysicsComponent_42,
                d;
            d = null != b ? b.angle : -1; - 1 != this.angle && (d = Nb.radians(this.angle));
            var e = this.force,
                f = a._compMap.Character_30;
            null != f ? (0 <= this.idleForce && !f.isSkating && (e = this.idleForce), f.bump(d, e, this.disableDuration)) : c.applyImpulse(Math.cos(d) * e, Math.sin(d) * e);
            return !0
        },
        __class__: Vd
    });
    var Qi = function() { this._increaseTime = 0;
        this._increase = new Ca(0);
        this.ratio = 1;
        this.enabled = !0;
        this.maxScale = 1;
        this.minScale = 0.8;
        k.call(this) };
    g["game.components.DepthScale"] = Qi;
    Qi.__name__ = ["game", "components", "DepthScale"];
    Qi.__super__ = k;
    Qi.prototype = l(k.prototype, {
        get_name: function() { return "DepthScale_35" },
        onStart: function() { k.prototype.onStart.call(this);
            this._sprite = this.owner._compMap.Sprite_19;
            this._transform = this.owner._compMap.TransformComponent_66 },
        onStop: function() { this._transform = this._sprite = null;
            k.prototype.onStop.call(this) },
        onUpdate: function(a) { null != this._sprite && (this._increase.update(a), 0 < this._increaseTime && 0 > this._increaseTime - a && this.returnToNormal(), this._increaseTime -= a, a = this.minScale + this.ratio * (this.maxScale - this.minScale), a += this._increase._value, this._sprite.scale = a) },
        setRatio: function(a) {
            this.ratio =
                a
        },
        increase: function(a, b) { this._increaseTime = b;
            this._increase.set__(a) },
        returnToNormal: function() { var a = this,
                b = this._sprite.alpha._value;
            this._sprite.alpha.set_behavior(new db(b, b / 2, 0.1, 3));
            F.delayCallTo(function() { v.play("super_reduce", "SUPER");
                a._increase.animateTo(0, 0.75, E.bounceOut) }, 0.5, this.owner) },
        __class__: Qi
    });
    var Wd = function() { this.isCollected = !1;
        this.collectedSound = "";
        this.type = "COLLECTABLE";
        this.data = {};
        this.amount = 1;
        this.isActive = !0;
        k.call(this) };
    g["stolo.ensys.components.CollectableComponent"] =
        Wd;
    Wd.__name__ = ["stolo", "ensys", "components", "CollectableComponent"];
    Wd.__super__ = k;
    Wd.prototype = l(k.prototype, {
        get_name: function() { return "CollectableComponent_5" },
        onStart: function() { X.getSystemEntity(this.owner);
            this._actorSystem = X.getSystemEntity(this.owner).getComponent("ActorSystem_48");
            null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.addContactType(this.type);
            this._soundSystem = X.getSystemEntity(this.owner)._compMap.SoundSystem_39 },
        collect: function(a) {
            "" !=
            this.collectedSound && this._soundSystem.play(this.collectedSound, this.owner, Wd.SOUND_CHANNEL);
            this.isCollected = !0;
            null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.enable(!1);
            if (U.__instanceof(this.owner._compMap.Sprite_19, Ob)) { var b = this.owner._compMap.Sprite_19; if (b.animation.hasAnim("pickup")) { b.animation.gotoAndPlay("pickup", { onComplete: function(a, b) { return function() { return a(b) } }(n(this, this.onCollect), a), loop: !1 }); return } } this.onCollect(a)
        },
        onCollect: function() { this._actorSystem.removeActor(this.owner) },
        isCollectable: function() { return this.isActive && !this.isCollected },
        __class__: Wd
    });
    var Ri = function() { Wd.call(this) };
    g["game.pickups.GameCollectable"] = Ri;
    Ri.__name__ = ["game", "pickups", "GameCollectable"];
    Ri.__super__ = Wd;
    Ri.prototype = l(Wd.prototype, {
        onStart: function() { Wd.prototype.onStart.call(this) },
        collect: function() {
            "" != this.collectedSound && this._soundSystem.play(this.collectedSound, this.owner, Wd.SOUND_CHANNEL);
            this.isCollected = !0;
            null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.enable(!1);
            this.owner._compMap.Sprite_19.play(u.string(this.data.type) + "_out", !1, n(this, this.onPickedUp))
        },
        onPickedUp: function(a) { this.onCollect(a.owner) },
        __class__: Ri
    });
    var Xd = function() { this.onCollection = new Tc;
        this.targets = ["COLLECTABLE"];
        k.call(this) };
    g["stolo.ensys.components.CollectorComponent"] = Xd;
    Xd.__name__ = ["stolo", "ensys", "components", "CollectorComponent"];
    Xd.__super__ = k;
    Xd.prototype = l(k.prototype, {
        get_name: function() { return "CollectorComponent_4" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._physic = this.owner._compMap.PhysicsComponent_42;
            null != this._physic && this._physic.addContactType("COLLECTOR");
            X.getSystemEntity(this.owner);
            this._physicSystem = X.getSystemEntity(this.owner).getComponent("PhysicSystem_44");
            this._physicSystem.addContactListener(ma.BEGIN, Aa.ANY, "COLLECTOR", this.targets, this.owner, n(this, this.onContactBegin))
        },
        onStop: function() { this._physicSystem.removeContactListener(ma.BEGIN, Aa.ANY, "COLLECTOR", this.targets, this.owner);
            this._physic = this._physicSystem = null;
            k.prototype.onStop.call(this) },
        onContactBegin: function(a) { var b = a._compMap.CollectableComponent_5;
            null != b && (b.isCollectable() && b.collect(this.owner), this.onCollection.emit(this.owner, a)) },
        __class__: Xd
    });
    var Si = function() { this._slowTime = this._shieldTime = -1;
        this._disposer = new Ta;
        this.onlyPlayer = !1;
        Xd.call(this) };
    g["game.pickups.GameCollector"] = Si;
    Si.__name__ = ["game", "pickups", "GameCollector"];
    Si.__super__ = Xd;
    Si.prototype = l(Xd.prototype, {
        onStart: function() {
            Xd.prototype.onStart.call(this);
            this._pickups = this.owner._internal_getFromParents("PickupSystem_24");
            this._character = this.owner._compMap.Character_30;
            this._disposer.add(this.onCollection.connect(n(this, this.onCollect)))
        },
        onStop: function() { this._disposer.dispose();
            this._pickups = this._disposer = null;
            Xd.prototype.onStop.call(this) },
        onUpdate: function(a) { Xd.prototype.onUpdate.call(this, a);
            this._slowTime -= a;
            this._shieldTime -= a;
            null != this._slowFx && 0 > this._slowTime && this.removeSlow();
            null != this._shieldFx && 0 > this._shieldTime && this.removeShield() },
        onContactBegin: function(a, b) {
            (!this.onlyPlayer || this._character.isPlayer) &&
            Xd.prototype.onContactBegin.call(this, a, b)
        },
        onCollect: function(a, b) {
            var c = b._compMap.CollectableComponent_5.data;
            switch (c.type) {
                case "frost":
                    this._character.speedEffect = c.speed;
                    this._character.slowed = c.duration;
                    this._character.fast = 0;
                    (!o.lowPerformance || this._character.isPlayer) && this.spawnSlow(c.duration);
                    break;
                case "shield":
                    this._character.set_invincible(c.duration);
                    (!o.lowPerformance || this._character.isPlayer) && this.spawnShield(c.duration);
                    break;
                case "speed":
                    this._character.speedEffect = c.speed,
                        this._character.fast = c.duration, this._character.slowed = 0
            }
            this._character.isPlayer && v.play("pickup_" + u.string(c.type), "PICKUP");
            this._pickups.removePickup(b)
        },
        spawnSlow: function(a) { null != this._slowFx && this.removeSlow();
            this._slowTime = a;
            this._slowFx = new Xb("fx_slow", "sprites");
            this._slowFx.setScale(2.2).setXY(0, -105);
            this.owner.addChild((new A).add(this._slowFx)) },
        removeSlow: function() { this._slowFx.owner.dispose();
            this._slowFx = null },
        spawnShield: function(a) {
            null != this._shieldFx && this.removeShield();
            this._shieldTime = a;
            this._shieldFx = new Xb("fx_shield", "sprites");
            this._shieldFx.setScale(2.2).setXY(0, -135);
            this.owner.addChild((new A).add(this._shieldFx))
        },
        removeShield: function() { this._shieldFx.owner.dispose();
            this._shieldFx = null },
        __class__: Si
    });
    var Ee = function() { this.onReady = new ia;
        this.isReady = !1;
        this.width = this.midIce = this.minY = this.maxY = 0;
        this.nbTile = 1;
        k.call(this) };
    g["game.components.IceRink"] = Ee;
    Ee.__name__ = ["game", "components", "IceRink"];
    Ee.__super__ = k;
    Ee.prototype = l(k.prototype, {
        get_name: function() { return "IceRink_36" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._actors = this.owner._internal_getFromParents("ActorSystem_48");
            this.width = this.nbTile * Ee.TILE_SIZE;
            this.midIce = this.width / 2;
            this.minY = -217;
            this.maxY = 496;
            o.lowMemory || this.spawnCrowdBack();
            this._actors.spawn({ template: { key: "ice_bg_right" }, transform: { position: { x: this.midIce - 1, y: 0 } } });
            this._actors.spawn({ template: { key: "ice_crowd_left" }, transform: { position: { x: 1 - this.midIce, y: 0 } } });
            this._actors.spawn({
                template: { key: "ice_crowd_middle" },
                transform: {
                    position: {
                        x: 0,
                        y: 0
                    }
                },
                pattern: { width: this.width }
            });
            this._actors.spawn({ template: { key: "ice_bg_left" }, transform: { position: { x: 1 - this.midIce, y: 0 } } });
            this._actors.spawn({ template: { key: "ice_bg_middle" }, transform: { position: { x: 0, y: 0 } }, pattern: { width: this.width } });
            this._actors.spawn({ template: { key: "ice_crowd_right" }, transform: { position: { x: this.midIce - 1, y: 0 } } });
            this._actors.spawn({ template: { key: "ice_rink_left_1" }, transform: { position: { x: 1 - this.midIce, y: 0 } } });
            this._actors.spawn({
                template: { key: "ice_rink_left_2" },
                transform: {
                    position: {
                        x: 1 -
                            this.midIce,
                        y: 0
                    }
                }
            });
            this._actors.spawn({ template: { key: "ice_rink_right_1" }, transform: { position: { x: this.midIce - 1, y: 0 } } });
            this._actors.spawn({ template: { key: "ice_rink_right_2" }, transform: { position: { x: this.midIce - 1, y: 0 } } });
            this._actors.spawn({ template: { key: "ice_rink_top" }, transform: { position: { x: 0, y: 0 } }, pattern: { width: this.width }, physics: { shape: { width: this.width + Ee.physicWidthBuffer, height: 38 }, offset: { x: 0, y: -321 } } });
            this._actors.spawn({ template: { key: "ice_rink_center" }, transform: { position: { x: 0, y: 0 } } });
            this._actors.spawn({
                template: { key: "ice_logo" },
                image: { asset: "icelogo_" + m.currentCharacter.team },
                transform: { position: { x: 5, y: 10 } }
            });
            this._actors.spawn({ template: { key: "ice_front_left_1" }, transform: { position: { x: 1 - this.midIce, y: 0 } } });
            this._actors.spawn({ template: { key: "ice_front_left_2" }, transform: { position: { x: 1 - this.midIce, y: 0 } } });
            this._actors.spawn({ template: { key: "ice_front_right_1" }, transform: { position: { x: this.midIce - 1, y: 0 } } });
            this._actors.spawn({ template: { key: "ice_front_right_2" }, transform: { position: { x: this.midIce - 1, y: 0 } } });
            this._actors.spawn({
                template: { key: "ice_front_middle" },
                transform: { position: { x: 0, y: 0 } },
                pattern: { width: this.width },
                physics: { shape: { width: this.width + Ee.physicWidthBuffer, height: 38 } }
            });
            this._actors.spawn({ template: { key: "goal_left" }, transform: { position: { x: -this.width / 2 - 765, y: -5 } }, goal: { isTeam: !0 } });
            this._actors.spawn({ template: { key: "goal_right" }, transform: { position: { x: this.width / 2 + 765, y: -5 } }, goal: { isTeam: !1 } });
            this._actors.spawn({ template: { key: "goal_wall_left" }, transform: { position: { x: -this.width / 2 - 750, y: -5 } } });
            this._actors.spawn({
                template: { key: "goal_wall_right" },
                transform: { position: { x: this.width / 2 + 750, y: -5 } }
            });
            o.lowMemory || (this._actors.spawn({ template: { key: "ice_corner_1" }, transform: { position: { x: -this.midIce - 785, y: 500 } } }), this._actors.spawn({ template: { key: "ice_corner_2" }, transform: { position: { x: -this.midIce - 871, y: -105 } } }), this._actors.spawn({ template: { key: "ice_corner_1" }, transform: { position: { x: this.midIce + 785, y: 500 }, direction: -1 } }), this._actors.spawn({ template: { key: "ice_corner_2" }, transform: { position: { x: this.midIce + 871, y: -105 }, direction: -1 } }));
            this.createDefensePositions();
            this.generateGoalkeepers();
            this.setCameraLimits();
            o.lowMemory || this.spawnCrowdFront();
            this.isReady = !0;
            this.onReady.emit()
        },
        onStop: function() { k.prototype.onStop.call(this) },
        createDefensePositions: function() {
            this.teamDefense = [];
            var a = this._actors.spawn({ template: { key: "defense_position" }, transform: { position: { x: -this.midIce - 450, y: 0 } } });
            this.teamDefense.push(a);
            a = this._actors.spawn({ template: { key: "defense_position" }, transform: { position: { x: -this.midIce - 500, y: -150 } } });
            this.teamDefense.push(a);
            a = this._actors.spawn({
                template: { key: "defense_position" },
                transform: { position: { x: -this.midIce - 550, y: 150 } }
            });
            this.teamDefense.push(a);
            this.opponentDefense = [];
            a = this._actors.spawn({ template: { key: "defense_position" }, transform: { position: { x: this.midIce + 450, y: 0 } } });
            this.opponentDefense.push(a);
            a = this._actors.spawn({ template: { key: "defense_position" }, transform: { position: { x: this.midIce + 550, y: -150 } } });
            this.opponentDefense.push(a);
            a = this._actors.spawn({ template: { key: "defense_position" }, transform: { position: { x: this.midIce + 500, y: 150 } } });
            this.opponentDefense.push(a)
        },
        generateGoalkeepers: function() { var a = 2 - 0.2 * jb.getLvlIndexByName(m.currentLevel);
            this._actors.spawn({ template: { key: "goalkeeper_" + m.currentCharacter.team }, transform: { position: { x: -this.midIce - 642, y: -20 } }, goalkeeper: { isTeam: !0, speed: a } });
            this._actors.spawn({ template: { key: "goalkeeper_" + m.currentOpponent.team }, transform: { position: { x: this.midIce + 642, y: -20 } }, goalkeeper: { isTeam: !1, speed: a } }) },
        setCameraLimits: function() {
            this.owner._internal_getFromParents("CameraSystem_26").setIceLimits(-this.midIce - 445, this.midIce +
                445, -500, 310)
        },
        spawnCrowdBack: function() { this._actors.spawnTemplate("bell");
            this._actors.spawnTemplate("chef");
            this._actors.spawnTemplate("jelly");
            this._actors.spawnTemplate("krang");
            this._actors.spawnTemplate("lightgreenfish");
            this._actors.spawnTemplate("mrkrabs");
            this._actors.spawnTemplate("mrleslie");
            this._actors.spawnTemplate("shredder") },
        spawnCrowdFront: function() {
            this._actors.spawnTemplate("april_crowd");
            this._actors.spawnTemplate("crab");
            this._actors.spawnTemplate("hector");
            this._actors.spawnTemplate("megan");
            this._actors.spawnTemplate("splinter")
        },
        __class__: Ee
    });
    var Ti = function() { this._nbAnimReady = 0;
        this._nbAnims = 2;
        this._anims = [];
        this.isTeam = !1;
        k.call(this) };
    g["game.components.Goal"] = Ti;
    Ti.__name__ = ["game", "components", "Goal"];
    Ti.__super__ = k;
    Ti.prototype = l(k.prototype, {
        get_name: function() { return "Goal_96" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._transform = this.owner._compMap.TransformComponent_66;
            this._logic = this.owner._internal_getFromParents("GameLogic_27");
            this._actors = this.owner._internal_getFromParents("ActorSystem_48");
            this._physicSystem = this.owner._internal_getFromParents("PhysicSystem_44");
            o.lowMemory || (this.createAnim(105, -375), this.createAnim(185, -435));
            this._physicSystem.addContactListener(ma.BEGIN, Aa.SENSOR, "ANY_BODY", "ANY_BODY", this.owner, n(this, this.onContact))
        },
        onStop: function() { this._physicSystem.removeContactListener(ma.BEGIN, Aa.SENSOR, "ANY_BODY", "ANY_BODY", this.owner);
            this._logic = this._actors = this._physicSystem = null;
            k.prototype.onStop.call(this) },
        onContact: function(a) {
            if (null != a._compMap.Puck_34) {
                a =
                    a._compMap.PhysicsComponent_42;
                a.resetImpulse();
                a.resetVelocity();
                this._logic.score(this.isTeam);
                for (var a = 0, b = this._anims; a < b.length;) { var c = b[a];++a;
                    this._nbAnimReady = 0;
                    c.animation.gotoAndPlay("start", { onComplete: n(this, this.playIdle), loop: !1 }) } F.delayCallTo(n(this, this.onScoreDone), 2)
            }
            return !0
        },
        playIdle: function() { this._nbAnimReady++; if (this._nbAnimReady == this._nbAnims)
                for (var a = 0, b = this._anims; a < b.length;) { var c = b[a];++a;
                    c.animation.gotoAndPlay("idle", { loop: !0 }) } },
        onScoreDone: function() {
            for (var a =
                    0, b = this._anims; a < b.length;) { var c = b[a];++a;
                c.animation.gotoAndPlay("end", { loop: !1 }) } this._logic.scoreDone()
        },
        createAnim: function(a, b) { var c = this._actors.spawn({ animation: { pack: "sprites_highend", asset: "goal_canon" + (this.isTeam ? "_left" : ""), offset: { x: this._transform.position.x + (this.isTeam ? a : -a), y: this._transform.position.y + b }, layer: "fg", loop: !1 } })._compMap.Sprite_19;
            c.onInitComplete.connect(n(this, this.onAnimReady)).once();
            this._anims.push(c) },
        onAnimReady: function() {
            this._nbAnimReady++;
            if (this._nbAnimReady ==
                this._nbAnims)
                for (var a = 0, b = this._anims; a < b.length;) { var c = b[a];++a;
                    c.animation.gotoAndStop("start", { loop: !1 }) }
        },
        __class__: Ti
    });
    var Ui = function() {};
    g["stolo.ensys.components.ICullingComponent"] = Ui;
    Ui.__name__ = ["stolo", "ensys", "components", "ICullingComponent"];
    Ui.prototype = { __class__: Ui };
    var lb = function() {
        this._typesToRemove = [];
        this._typesToAdd = [];
        this._complexShape = !1;
        this.onShapeCreated = new Tc;
        this.onShapesCreated = new ia;
        this.onInitialize = new ia;
        this.forceUpdate = this.initialized = !1;
        this.setTransform = !0;
        this.damping = lb.defaultDamping;
        k.call(this)
    };
    g["stolo.ensys.components.PhysicsComponent"] = lb;
    lb.__name__ = ["stolo", "ensys", "components", "PhysicsComponent"];
    lb.__interfaces__ = [Ui];
    lb.__super__ = k;
    lb.prototype = l(k.prototype, {
        get_name: function() { return "PhysicsComponent_42" },
        onAdded: function() { k.prototype.onAdded.call(this);
            this.cleanShapes() },
        onActorAdded: function() {
            X.getSystemEntity(this.owner);
            this._cullingSystem = X.getSystemEntity(this.owner).getComponent("CullingSystem_49");
            X.getSystemEntity(this.owner);
            this._physicSystem = X.getSystemEntity(this.owner).getComponent("PhysicSystem_44");
            X.getSystemEntity(this.owner);
            this._physicDebugSystem = X.getSystemEntity(this.owner).getComponent("PhysicDebugSystem_43");
            this._transform = this.owner._compMap.TransformComponent_66;
            this._display = this.owner._compMap.Sprite_19;
            this.createBody();
            if (null != this._display && !this._display.initialized && null != this._display.onInitComplete) this._display.onInitComplete.connect(n(this, this.initBody)).once();
            else this.initBody()
        },
        onStart: function() {},
        onStop: function() { this.enable(!1);
            this._cullingSystem.removeComponent(this, this.owner);
            k.prototype.onRemoved.call(this);
            this._physicDebugSystem = this._display = this._cullingSystem = this._physicSystem = null;
            null != this._body && (this._body.get_userData().component = null, this._body.get_userData().actor = null);
            this._transform = this._rayResultList = this._ray = null },
        onUpdate: function(a) {
            if (this.enabled) {
                if (!this._transform.fixed || this.forceUpdate) this.setTransform ? 0 < this.damping ? (this._transform.position.x = Nb.lerp(this._transform.position.x,
                    this._body.get_position().get_x(), a * this.damping), this._transform.position.y = Nb.lerp(this._transform.position.y, this._body.get_position().get_y(), a * this.damping)) : (this._transform.position.x = this._body.get_position().get_x(), this._transform.position.y = this._body.get_position().get_y()) : this.setPosition(this._transform.position.x, this._transform.position.y);
                if (!this._transform.fixedRotation || this.forceUpdate) this.setTransform ? this._transform.rotation = 180 * this._body.zpp_inner.rot / 3.141592653589793 :
                    this.setRotation(3.141592653589793 * this._transform.rotation / 180);
                this.forceUpdate = !1
            }
        },
        enableCulling: function(a) { a ? this._physicSystem.removeBody(this._body) : this.enabled && this._physicSystem.addBody(this._body) },
        enable: function(a) { null == a && (a = !0);
            null != this._physicSystem && (a ? (!this.enabled && null != this._transform && this.setPosition(this._transform.position.x, this._transform.position.y), this._physicSystem.addBody(this._body)) : this._physicSystem.removeBody(this._body), this.enabled = a) },
        disable: function() { this.enable(!1) },
        createBody: function() {
            this._body = new Vg;
            this.resetType();
            0 != this.mass && this._body.set_mass(this.mass); - 1 != this.massScale && this._body.set_gravMassScale(this.massScale);
            this._body.set_allowRotation(!this._transform.fixedRotation);
            this._body.set_isBullet(this.bullet);
            this._body.get_userData().component = this;
            this._body.get_userData().actor = this.owner;
            this._body.get_position().set_x(this._transform.position.x);
            this._body.get_position().set_y(this._transform.position.y);
            this._body.set_rotation(3.141592653589793 *
                this._transform.rotation / 180)
        },
        initBody: function() { this.createShapes();
            this.initContacts(); for (var a = 0, b = this._typesToAdd; a < b.length;) { var c = b[a];++a;
                this.addContactType(c) } a = 0; for (b = this._typesToRemove; a < b.length;) c = b[a], ++a, this.removeContactType(c);
            this.setVelocity(this.velocity.x, this.velocity.y);
            this.applyImpulse(this.impulse.x, this.impulse.y);
            this._cullingSystem.addComponent(this, this.owner);
            this.onInitialize.emit();
            this.initialized = !0 },
        cleanShapes: function() {
            if (H.is(this.shape, O.TObject)) this.shape =
                H.merge(lb.DEFAULT_SHAPE, this.shape, !0);
            else if (H.is(this.shape, O.TClass(Array))) { var a;
                a = U.__cast(this.shape, Array); for (var b = 0, c = a.length; b < c;) { var d = b++;
                    a[d] = H.merge(lb.DEFAULT_SHAPE, a[d], !0) } this.shape = a }
        },
        createShapes: function() { this._body.zpp_inner.wrap_shapes.clear(); if (H.is(this.shape, O.TObject)) this._complexShape = !1, this.createShape(this.shape);
            else if (H.is(this.shape, O.TClass(Array))) { this._complexShape = !0; var a = 0,
                    b; for (b = U.__cast(this.shape, Array); a < b.length;) { var c = b[a];++a;
                    this.createShape(c) } } this.onShapesCreated.emit() },
        createShape: function(a) { this._complexShape || (this._complexShape = !("box" == a.type || null == a.type)); var b = bn.createShape(a, this._display, this.offset);
            this.addShape(b);
            this.onShapeCreated.emit(a, b); return b },
        addShape: function(a) { a = this._body.zpp_inner.wrap_shapes.add(a);
            1 < this._body.zpp_inner.wrap_shapes.get_length() && (this._complexShape = !0); return a },
        getBody: function() { return this._body },
        initContacts: function() {
            if (H.is(this.contacts, O.TClass(String))) this.addContactType(this.contacts.toUpperCase());
            else if (H.is(this.contacts,
                    O.TClass(Array))) { var a = 0,
                    b; for (b = U.__cast(this.contacts, Array); a < b.length;) { var c = b[a];++a;
                    this.addContactType(c.toUpperCase()) } }
        },
        getCbType: function(a) { return this._physicSystem.getCbType(a) },
        hasContactType: function(a) { return this._body.get_cbTypes().has(this.getCbType(a)) },
        removeContactType: function(a) { null == this._body ? this._typesToRemove.push(a) : this._body.get_cbTypes().remove(this.getCbType(a)) },
        addContactType: function(a) { null == this._body ? this._typesToAdd.push(a) : this._body.get_cbTypes().add(this.getCbType(a)) },
        getSize: function() { return this._complexShape ? { width: this._body.zpp_inner.aabb.wrapper().get_width(), height: this._body.zpp_inner.aabb.wrapper().get_height() } : { width: this.shape.width, height: this.shape.height } },
        getVelocity: function() { return null == this._body ? fa.get(0, 0, !0) : this._body.get_velocity() },
        resetVelocity: function() { null != this._body && this.getVelocity().setxy(0, 0) },
        setVelocity: function(a, b) { null != this._body && (this._body.get_velocity().set_x(a), this._body.get_velocity().set_y(b)) },
        applyImpulse: function(a,
            b) { null != this._body && this._body.applyImpulse(fa.get(a, b, !0)) },
        applyAngularImpulse: function(a, b) { null != this._body && this._body.applyImpulse(fa.weak(Math.cos(a) * b, Math.sin(a) * b)) },
        resetImpulse: function() { null != this._body && this._body.set_force(fa.get(0, 0, !0)) },
        setPosition: function(a, b, c) {
            null == c && (c = 0);
            null != this._body && (0 < c ? this._body.setVelocityFromTarget(fa.get(a, b, !0), this._body.zpp_inner.rot, c) : (this._body.set_position(fa.get(a, b, !0)), this.setTransform && (this._transform.position.x = a, this._transform.position.y =
                b)))
        },
        enableRotation: function(a) { this._transform.fixedRotation = !a;
            this._body.set_allowRotation(a);
            a || (this._body.set_angularVel(0), this._transform.rotation = 0, a = this.owner._compMap.Sprite_19, null != a && a.setRotation(0)) },
        rotate: function(a) { var b = this._body;
            b.set_rotation(b.zpp_inner.rot + a) },
        setRotation: function(a) { null != this._body && (this._body.set_rotation(a), this.setTransform && (this._transform.rotation = 180 * this._body.zpp_inner.rot / 3.141592653589793)) },
        getRotation: function() { return this._body.zpp_inner.rot },
        getAngle: function(a) { var b = a._compMap.PhysicsComponent_42.getBody().get_position(); return Math.atan2(function() { b.zpp_inner.validate(); return b.zpp_inner.y }(this) - this._body.get_position().get_y(), function() { b.zpp_inner.validate(); return b.zpp_inner.x }(this) - this._body.get_position().get_x()) },
        setKinematic: function(a) {
            null == a && (a = !1);
            this.kinematic = !0;
            null != this._body && this._body.set_type(function() { null == h.BodyType_KINEMATIC && (h.internal = !0, h.BodyType_KINEMATIC = new Pb, h.internal = !1); return h.BodyType_KINEMATIC }(this));
            a && (this.setTransform = !1)
        },
        setDynamic: function() { this._body.set_type(function() { null == h.BodyType_DYNAMIC && (h.internal = !0, h.BodyType_DYNAMIC = new Pb, h.internal = !1); return h.BodyType_DYNAMIC }(this)) },
        setSensor: function(a) { null == a && (a = !0); for (var b = this._body.zpp_inner.wrap_shapes.iterator(); b.hasNext();) { var c;
                b.zpp_critical = !1;
                c = b.zpp_inner.at(b.zpp_i++);
                c.zpp_inner.immutable_midstep("Shape::sensorEnabled");
                c.zpp_inner.sensorEnabled = a;
                c.zpp_inner.wake();
                c.zpp_inner.sensorEnabled } },
        resetType: function() {
            if (null !=
                this._transform) { var a;
                this._transform.fixed ? (null == h.BodyType_STATIC && (h.internal = !0, h.BodyType_STATIC = new Pb, h.internal = !1), a = h.BodyType_STATIC) : (null == h.BodyType_DYNAMIC && (h.internal = !0, h.BodyType_DYNAMIC = new Pb, h.internal = !1), a = h.BodyType_DYNAMIC);
                this.kinematic && (null == h.BodyType_KINEMATIC && (h.internal = !0, h.BodyType_KINEMATIC = new Pb, h.internal = !1), a = h.BodyType_KINEMATIC, this._transform.fixed = !1);
                null != this._body && this._body.set_type(a) }
        },
        __class__: lb
    });
    var Wg = function() { lb.call(this) };
    g["game.components.ConcavePhysics"] =
        Wg;
    Wg.__name__ = ["game", "components", "ConcavePhysics"];
    Wg.__super__ = lb;
    Wg.prototype = l(lb.prototype, {
        onStart: function() { lb.prototype.onStart.call(this) },
        createShapes: function() {
            this._body.zpp_inner.wrap_shapes.clear();
            this._complexShape = !0;
            for (var a = this.shape, b = null, c = [], b = a.points, d = 0; d < b.length;) { var e = b[d];++d;
                c.push(fa.weak(e.x + this.offset.x, e.y + this.offset.y)) } c = new Fe(c);
            b = new Vi;
            c.convexDecomposition(!0, b);
            b.zpp_inner.valmod();
            for (c = rd.get(b); c.hasNext();) {
                c.zpp_critical = !1;
                b = c.zpp_inner.at(c.zpp_i++);
                b = new Yc(b);
                null != a.material && (d = Fd.get(a.material), null != d ? (b.zpp_inner.immutable_midstep("Shape::material"), b.zpp_inner.setMaterial(d.zpp_inner), b.zpp_inner.material.wrapper()) : null);
                null != a.fluid && (b.zpp_inner.immutable_midstep("Shape::fluidEnabled"), b.zpp_inner.fluidEnabled = !0, null == b.zpp_inner.fluidProperties && b.set_fluidProperties(new ge), b.zpp_inner.wake(), b.zpp_inner.fluidEnabled, null != a.fluid.density && (b.zpp_inner.immutable_midstep("Shape::fluidProperties"), null == b.zpp_inner.fluidProperties &&
                    b.zpp_inner.setFluid((new ge).zpp_inner), b.zpp_inner.fluidProperties.wrapper().set_density(a.fluid.density)), null != a.fluid.viscosity && (b.zpp_inner.immutable_midstep("Shape::fluidProperties"), null == b.zpp_inner.fluidProperties && b.zpp_inner.setFluid((new ge).zpp_inner), b.zpp_inner.fluidProperties.wrapper().set_viscosity(a.fluid.viscosity)));
                d = null != a.filter ? a.filter : lb.defaultShapeFilter;
                if (null != d)
                    for (var e = 0, f = y.fields(d); e < f.length;) {
                        var j = f[e];
                        ++e;
                        switch (j) {
                            case "collisionMask":
                                b.zpp_inner.filter.wrapper().set_collisionMask(y.field(d,
                                    j));
                                break;
                            case "collisionGroup":
                                b.zpp_inner.filter.wrapper().set_collisionGroup(y.field(d, j));
                                break;
                            case "sensorGroup":
                                b.zpp_inner.filter.wrapper().set_sensorGroup(y.field(d, j));
                                break;
                            case "sensorMask":
                                b.zpp_inner.filter.wrapper().set_sensorMask(y.field(d, j));
                                break;
                            case "fluidGroup":
                                b.zpp_inner.filter.wrapper().set_fluidGroup(y.field(d, j));
                                break;
                            case "fluidMask":
                                b.zpp_inner.filter.wrapper().set_fluidMask(y.field(d, j));
                                break;
                            default:
                                null
                        }
                    }
                this._body.zpp_inner.wrap_shapes.add(b)
            }
            this.onShapesCreated.emit()
        },
        __class__: Wg
    });
    var Wi = function() { this._enabled = !0;
        this._boost = 0;
        this.appliedModifier = 1;
        this.maxIncrease = 200;
        this.slowRate = 0.05;
        this.minVelocity = 10;
        this.maxVelocityX = this.maxVelocityY = 500;
        k.call(this) };
    g["game.components.SpeedModifier"] = Wi;
    Wi.__name__ = ["game", "components", "SpeedModifier"];
    Wi.__super__ = k;
    Wi.prototype = l(k.prototype, {
        get_name: function() { return "SpeedModifier_41" },
        onStart: function() { k.prototype.onStart.call(this);
            this._physics = this.owner._compMap.PhysicsComponent_42 },
        onUpdate: function(a) {
            k.prototype.onUpdate.call(this,
                a);
            if (this._enabled) {
                var b = this._physics.getVelocity();
                Math.abs(function() { b.zpp_inner.validate(); return b.zpp_inner.x }(this)) > this.minVelocity ? (b.zpp_inner.validate(), a = b.zpp_inner.x, b.zpp_inner.validate(), a -= b.zpp_inner.x * this.slowRate) : (b.zpp_inner.validate(), a = b.zpp_inner.x);
                var c;
                Math.abs(function() { b.zpp_inner.validate(); return b.zpp_inner.y }(this)) > this.minVelocity ? (b.zpp_inner.validate(), c = b.zpp_inner.y, b.zpp_inner.validate(), c -= b.zpp_inner.y * this.slowRate) : (b.zpp_inner.validate(), c = b.zpp_inner.y);
                this._physics.setVelocity(Za.clamp(a, -(this.maxVelocityX + this._boost) * this.appliedModifier, (this.maxVelocityX + this._boost) * this.appliedModifier), Za.clamp(c, -(this.maxVelocityY + this._boost) * this.appliedModifier, (this.maxVelocityY + this._boost) * this.appliedModifier))
            }
        },
        onStop: function() { this._physics = null;
            k.prototype.onStop.call(this) },
        __class__: Wi
    });
    var Gd = function() {
        this._success = !1;
        this._disposer = new Ta;
        this.enabled = !0;
        this.onSwipeEnd = new Tc;
        this.onSwipeSuccess = new Tc;
        this.onSwipeStart = new ia;
        this.swipeDistance =
            100;
        k.call(this)
    };
    g["game.controls.Swipe"] = Gd;
    Gd.__name__ = ["game", "controls", "Swipe"];
    Gd.__super__ = k;
    Gd.prototype = l(k.prototype, {
        get_name: function() { return "Swipe_37" },
        onStart: function() { k.prototype.onStart.call(this);
            this._disposer.add(w._platform.getPointer().down.connect(n(this, this.onDown))) },
        onStop: function() { this.startPosition = this._upConnection = this._moveConnection = null;
            this._disposer.dispose();
            this._disposer = null;
            k.prototype.onStop.call(this) },
        onDown: function(a) {
            this.enabled && (this._moveConnection =
                w._platform.getPointer().move.connect(n(this, this.onMove)), this._disposer.add(this._moveConnection), this._upConnection = w._platform.getPointer().up.connect(n(this, this.onUp)), this._disposer.add(this._upConnection), this.startPosition = new ob(a.viewX, a.viewY), this._success = !1, this.onSwipeStart.emit())
        },
        onMove: function(a) { this._success || this.getDistance(this.startPosition.x - a.viewX, this.startPosition.y - a.viewY) >= this.swipeDistance && this.swipeSuccess(a) },
        onUp: function(a) {
            this._moveConnection.dispose();
            var b = this.getAngle(this.startPosition.x, a.viewX, this.startPosition.y, a.viewY),
                a = this.getDistance(this.startPosition.x - a.viewX, this.startPosition.y - a.viewY);
            this.onSwipeEnd.emit(b, a)
        },
        swipeSuccess: function(a) { a = this.getAngle(this.startPosition.x, a.viewX, this.startPosition.y, a.viewY);
            this._success = !0;
            this.onSwipeSuccess.emit(this.owner, a) },
        getAngle: function(a, b, c, d) { return Math.atan2(d - c, b - a) * (180 / Math.PI) },
        getDistance: function(a, b) { return Math.sqrt(a * a + b * b) },
        __class__: Gd
    });
    var Xi = function() {
        this._down = !1;
        Gd.call(this)
    };
    g["game.controls.SwipeThrough"] = Xi;
    Xi.__name__ = ["game", "controls", "SwipeThrough"];
    Xi.__super__ = Gd;
    Xi.prototype = l(Gd.prototype, {
        onStart: function() {
            Gd.prototype.onStart.call(this);
            var a = this.owner._compMap.Sprite_19;
            a.set_pointerEnabled(!0);
            null != a && (this._disposer.add(a.get_pointerIn().connect(n(this, this.onIn))), this._disposer.add(a.get_pointerDown().connect(n(this, this.onDisplayDown))));
            this._disposer.add(w._platform.getPointer().down.connect(n(this, this.onDown)));
            this._disposer.add(w._platform.getPointer().up.connect(n(this,
                this.onStageUp)))
        },
        onStop: function() { Gd.prototype.onStop.call(this) },
        onDisplayDown: function(a) { this.onDown(a);
            this.onIn(a) },
        onDown: function() { this._down = !0 },
        onIn: function(a) { this._down && (Gd.prototype.onDown.call(this, a), this._down = !1) },
        onStageUp: function() { this._down = !1 },
        __class__: Xi
    });
    var Yi = function() { this.minImpactVelocity = 400;
        k.call(this) };
    g["game.components.Puck"] = Yi;
    Yi.__name__ = ["game", "components", "Puck"];
    Yi.__super__ = k;
    Yi.prototype = l(k.prototype, {
        get_name: function() { return "Puck_34" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._anim = this.owner._compMap.Sprite_19;
            this._physics = this.owner._compMap.PhysicsComponent_42;
            this._fx = G.createImage("puck_trail", D.getPack("spine/puck"));
            this._fx.setAnchor(90, 34).setAlpha(0);
            this.owner.addChild((new A).add(this._fx), !1)
        },
        onStop: function() { this._fx = this._anim = null;
            k.prototype.onStop.call(this) },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a);
            null != this._fx && 0 < this._fx.alpha._value && this._fx.setRotation(180 * this._physics.getVelocity().get_angle() / Math.PI) },
        hit: function() {
            this._anim.play("hit",
                !1, n(this, this.onHit), !0);
            this._fx.setAlpha(1);
            this._fx.alpha.animateTo(0, 1, E.quadIn)
        },
        onHit: function() { this._anim.play("idle", !0) },
        __class__: Yi
    });
    var Zi = function() { k.call(this) };
    g["game.components.Crowd"] = Zi;
    Zi.__name__ = ["game", "components", "Crowd"];
    Zi.__super__ = k;
    Zi.prototype = l(k.prototype, {
        get_name: function() { return "Crowd_97" },
        onStart: function() { k.prototype.onStart.call(this);
            this._display = this.owner._compMap.Sprite_19;
            this._script = new Bd;
            this.owner.add(this._script) },
        onStop: function() {
            this._script =
                this._display = null;
            k.prototype.onStop.call(this)
        },
        __class__: Zi
    });
    var Yb = function() { this._nextActionIn = 0;
        this._state = Yb.HIDDEN;
        this.jitterDuration = 1;
        this.hiddenDuration = 3;
        this.visibleDuration = 1;
        Vd.call(this) };
    g["game.components.HiddenBumper"] = Yb;
    Yb.__name__ = ["game", "components", "HiddenBumper"];
    Yb.__super__ = Vd;
    Yb.prototype = l(Vd.prototype, {
        onStart: function() {
            Vd.prototype.onStart.call(this);
            this._anim = this.owner._compMap.Sprite_19;
            this._anim.loop = !1;
            this._physics = this.owner._compMap.PhysicsComponent_42;
            this._transform = this.owner._compMap.TransformComponent_66;
            this.hide()
        },
        onStop: function() { Vd.prototype.onStop.call(this) },
        onUpdate: function(a) { Vd.prototype.onUpdate.call(this, a);
            this._nextActionIn -= a; if (0 >= this._nextActionIn) switch (this._state) {
                case Yb.HIDDEN:
                    this.jitter(); break;
                case Yb.JITTERING:
                    this.show(); break;
                case Yb.SHOWN:
                    this.hide() } },
        jitter: function() {
            this._state = Yb.JITTERING;
            this._anim.x.set_behavior(new Ve(this._transform.position.x, 3));
            this._anim.y.set_behavior(new Ve(this._transform.position.y,
                3));
            this._nextActionIn = this.jitterDuration
        },
        show: function() { this._state = Yb.SHOWN;
            this._anim.setXY(this._transform.position.x, this._transform.position.y);
            this._anim.hasAnimation("in") ? this._anim.animation.gotoAndPlay(["in", "show"]) : this._anim.animation.gotoAndPlay("show");
            this._nextActionIn = this.visibleDuration;
            this._physics.enable(!0);
            this.owner._compMap.DepthScale_35.enabled = !0 },
        hide: function() {
            this._state = Yb.HIDDEN;
            this._anim.setXY(this._transform.position.x, this._transform.position.y);
            this._anim.hasAnimation("out") ?
                this._anim.animation.gotoAndPlay(["out", "hide"]) : this._anim.animation.gotoAndPlay("hide");
            this._nextActionIn = this.hiddenDuration;
            this._physics.enable(!1);
            this.owner._compMap.DepthScale_35.enabled = !1
        },
        onContact: function(a, b) { return this._state != Yb.SHOWN ? !0 : Vd.prototype.onContact.call(this, a, b) },
        __class__: Yb
    });
    var Ge = function() { this.onInventoryReady = new ia;
        this.isLoaded = !1;
        this.inventory = new K;
        this.inventoryJson = {};
        this.inventorySave = null;
        k.call(this) };
    g["stolo.customization.CustomizationComponent"] =
        Ge;
    Ge.__name__ = ["stolo", "customization", "CustomizationComponent"];
    Ge.__super__ = k;
    Ge.prototype = l(k.prototype, {
        get_name: function() { return "CustomizationComponent_6" },
        onStart: function() { this._spine = this.owner._compMap.Sprite_19; if (null == this._spine) throw "SpineComponent not found";
            this.loadInventory() || this.importInventory(this.inventoryJson) },
        equipItem: function(a, b) { null != a && (this.inventory.set(b, a), $.getAssetPack(a, n(this, this.setupItem))) },
        getItem: function(a) { return this.inventory.get(a) },
        setupItem: function(a,
            b) { for (var c = 0, d = a.parts; c < d.length;) { var e = d[c];++c;
                this._spine.changeSlotFromImage(e.attachment, null != e.url ? b.getTexture(e.url) : null, e.offset) } },
        importInventory: function(a) { if (null == a) return !1; for (var b = y.fields(a), c = 0; c < b.length;) { var d = b[c];++c;
                this.equipItem($.getById(y.field(a, d)), d) } this.isLoaded = !0;
            this.onInventoryReady.emit(); return !0 },
        exportInventory: function() { for (var a = {}, b = this.inventory.keys(); b.hasNext();) { var c = b.next();
                a[c] = this.inventory.get(c).id } return a },
        saveInventory: function() {
            return $.saveInventory(this.inventorySave,
                this.exportInventory())
        },
        loadInventory: function() { return this.importInventory($.loadInventory(this.inventorySave)) },
        __class__: Ge
    });
    var $i = function() { this.sneakPeaks = [];
        Ge.call(this) };
    g["game.customization.GameCustomizationComponent"] = $i;
    $i.__name__ = ["game", "customization", "GameCustomizationComponent"];
    $i.__super__ = Ge;
    $i.prototype = l(Ge.prototype, {
        onStart: function() {
            if (null != m.codeCharacter && (null == m.currentCharacter || this.inventorySave == m.currentCharacter.name)) this.inventorySave = null, this.inventoryJson =
                m.codeCharacter.inventory;
            else { for (var a = this.owner._compMap.TemplateComponent_47, a = ga.getDefaultItems(null == a ? m.currentCharacter.template : a.key), b = 0, c = this.sneakPeaks; b < c.length;) { var d = c[b];++b;
                    a.push(d) } a = ga.getCustomizationData(a);
                b = this.owner._compMap.Player_15;
                null != this.owner._compMap.Character_30 && null == b && (this.inventorySave = null);
                this.inventoryJson = a } Ge.prototype.onStart.call(this)
        },
        importInventory: function(a) {
            (a = Ge.prototype.importInventory.call(this, a)) && mc.applyMods(this.owner); return a },
        __class__: $i
    });
    var ya = function() { this._enabled = !1;
        this.current = 0;
        this.onActivate = new I;
        this.onReady = new I;
        this.sfxDelay = 0;
        this.interuptDuration = 2;
        this.baseChargeRate = 3.5;
        this.charge = 100;
        k.call(this) };
    g["game.super.SuperMove"] = ya;
    ya.__name__ = ["game", "super", "SuperMove"];
    ya.__super__ = k;
    ya.prototype = l(k.prototype, {
        get_name: function() { return "SuperMove_31" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._character = this.owner._compMap.Character_30;
            this._logic = this.owner._internal_getFromParents("GameLogic_27");
            this._tuto = this.owner._internal_getFromParents("TutorialManager_32")
        },
        onStop: function() { k.prototype.onStop.call(this) },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a);
            this._enabled && (a *= this.baseChargeRate, this.current < this.charge && this.current + a >= this.charge && this.onReady.emit(this.owner), this.current = Math.min(this.current + a, this.charge)) },
        enable: function(a) { this._enabled = a },
        isReady: function() { return this.current >= this.charge },
        activate: function() {
            if (this._character.isPlayer) {
                m.superUsed++;
                var a = m.currentCharacter.name;
                m.config.vo && v.play(a + "_super", "VO");
                v.play("super_activate", "SFX");
                F.delayCallTo(function() { v.play("super_" + a, "SUPER") }, this.sfxDelay / this._character.animSpeed)
            }
            this._tuto.isActive && this._tuto.currentStepId == ab.SUPERMOVE && this._tuto.showNextStep();
            this.current = 0;
            this.onActivate.emit(this.owner);
            this._logic.interupt()
        },
        animDone: function() { this.done() },
        done: function() { this._logic.resume() },
        __class__: ya
    });
    var aj = function() {
        this._superLoaded = !1;
        this.freezeSfx = "";
        this.freezeDuration =
            8;
        this.spineAsset = "super_freeze_tornado";
        this.animTemplate = "super_freeze";
        ya.call(this)
    };
    g["game.super.SuperFreeze"] = aj;
    aj.__name__ = ["game", "super", "SuperFreeze"];
    aj.__super__ = ya;
    aj.prototype = l(ya.prototype, {
        onAdded: function() { ya.prototype.onAdded.call(this);
            this._superLoaded || D.loadPack("spine/" + this.spineAsset, n(this, this.onAssetLoaded)) },
        onAssetLoaded: function() { this._superLoaded = !0 },
        onStart: function() {
            ya.prototype.onStart.call(this);
            this._camera = this.owner._internal_getFromParents("BaseGameSystem_23").camera;
            this._actors = this.owner._internal_getFromParents("ActorSystem_48");
            for (var a = this._actors.getActorsByComponent(Mb), b = 0; b < a.length;) { var c = a[b];++b; if (this._character.isTeam != c._compMap.Goalkeeper_28.isTeam) { this._goalkeeper = c._compMap.Goalkeeper_28;
                    this._goalkeeperTransform = c._compMap.TransformComponent_66; break } }
        },
        onStop: function() { ya.prototype.onStop.call(this) },
        onUpdate: function(a) { ya.prototype.onUpdate.call(this, a) },
        activate: function() { ya.prototype.activate.call(this);
            this._goalkeeper.lockPosition() },
        animDone: function() { this.spawnFreeze() },
        spawnFreeze: function() {
            null != this._freeze && this._actors.removeActor(this._freeze);
            this._freeze = this._actors.spawn({ template: { key: this.animTemplate }, transform: { position: { x: this._goalkeeperTransform.position.x, y: this._goalkeeperTransform.position.y - 10 } }, spine: { pack: "spine/" + this.spineAsset, asset: this.spineAsset } });
            this._camera.centerForGoal(!this._character.isTeam);
            this._goalkeeper.freeze();
            this._freezeSpine = this._freeze._compMap.Sprite_19;
            this._freezeSpine.play("in",
                !1, n(this, this.onFreezeReady));
            "" != this.freezeSfx && v.play(this.freezeSfx, "SFX2")
        },
        onFreezeReady: function() { this._goalkeeper.onDeath.connect(n(this, this.onFreezeDeath)).once();
            this.done() },
        onFreezeDeath: function() { this._freezeSpine.play("out", !1, n(this, this.onFreezeDestroyed)) },
        onFreezeDestroyed: function() { this._actors.removeActor(this._freeze) },
        done: function() { this._camera.startFollow();
            ya.prototype.done.call(this) },
        __class__: aj
    });
    var bj = function() {
        this._timeLeft = 0;
        this._opponents = [];
        this.scaleIncrease =
            0.2;
        this.force = 13E3;
        this.duration = 8;
        ya.call(this)
    };
    g["game.super.SuperGiant"] = bj;
    bj.__name__ = ["game", "super", "SuperGiant"];
    bj.__super__ = ya;
    bj.prototype = l(ya.prototype, {
        onStart: function() {
            ya.prototype.onStart.call(this);
            this._action = this.owner._compMap.Action_11;
            this._scale = this.owner._compMap.DepthScale_35;
            this._transform = this.owner._compMap.TransformComponent_66;
            for (var a = 0, b = this.owner._internal_getFromParents("GameLogic_27").characters; a < b.length;) {
                var c = b[a];
                ++a;
                c._compMap.Character_30.isTeam !=
                    this._character.isTeam && this._opponents.push(c)
            }
        },
        onStop: function() { ya.prototype.onStop.call(this) },
        onUpdate: function(a) { ya.prototype.onUpdate.call(this, a);
            this._timeLeft -= a;
            0 < this._timeLeft && this.checkCollision() },
        animDone: function() { ya.prototype.animDone.call(this);
            this._character.set_invincible(this.duration);
            this._timeLeft = this.duration;
            this._scale.increase(this.scaleIncrease, this.duration) },
        checkCollision: function() {
            for (var a = 0, b = 0, c = this._opponents; b < c.length;) {
                var d = c[b];
                ++b;
                a = this._action.getDistance(d); -
                1 != a && a <= this._action.detectionRange && this.stun(d)
            }
        },
        stun: function(a) { var b = a._compMap.Character_30;
            a._compMap.CharacterState_29.changeState(ra.CHECKED, { duration: b.stunDuration });
            b.stun() },
        __class__: bj
    });
    var cj = function() { this._disposer = new Ta;
        this.freezeDuration = 8;
        ya.call(this) };
    g["game.super.SuperStun"] = cj;
    cj.__name__ = ["game", "super", "SuperStun"];
    cj.__super__ = ya;
    cj.prototype = l(ya.prototype, {
        onStart: function() {
            ya.prototype.onStart.call(this);
            this._anim = this.owner._compMap.Sprite_19;
            this._disposer.add(this._anim.onEvent.connect(n(this,
                this.onAnimEvent)));
            this._camera = this.owner._internal_getFromParents("BaseGameSystem_23").camera;
            var a = this.owner._internal_getFromParents("ActorSystem_48").getActorsByComponent(Tg);
            this._opponents = [];
            for (var b, c = 0; c < a.length;) { var d = a[c];++c;
                b = d._compMap.Character_30;
                this._character.isTeam != b.isTeam && this._opponents.push(d) }
        },
        onStop: function() { this._disposer.dispose();
            this._camera = this._opponents = this._anim = null;
            ya.prototype.onStop.call(this) },
        onUpdate: function(a) {
            ya.prototype.onUpdate.call(this,
                a)
        },
        activate: function() { ya.prototype.activate.call(this) },
        animDone: function() { ya.prototype.animDone.call(this); for (var a = 0, b = this._opponents; a < b.length;) { var c = b[a];++a;
                c._compMap.CharacterState_29.changeState(ra.CHECKED, { duration: this.freezeDuration });
                c._compMap.Character_30.stun(this.freezeDuration) } },
        onAnimEvent: function(a, b) { "shake" == b.stringValue && (this._camera.get_camera().shake(1, 75, 0), v.play("super_smash", "SFX")) },
        __class__: cj
    });
    var dj = function() {
        this._posX = 0;
        this._superLoaded = !1;
        this.spineAsset =
            "super_wall_iced";
        this.animTemplate = "super_wall";
        ya.call(this)
    };
    g["game.super.SuperWall"] = dj;
    dj.__name__ = ["game", "super", "SuperWall"];
    dj.__super__ = ya;
    dj.prototype = l(ya.prototype, {
        onAdded: function() { ya.prototype.onAdded.call(this);
            this._superLoaded || D.loadPack("spine/" + this.spineAsset, n(this, this.onAssetLoaded)) },
        onAssetLoaded: function() { this._superLoaded = !0 },
        onStart: function() {
            ya.prototype.onStart.call(this);
            this.animTemplate += this._character.isTeam ? "_left" : "_right";
            this._actors = this.owner._internal_getFromParents("ActorSystem_48");
            this._game = this.owner._internal_getFromParents("BaseGameSystem_23");
            this._camera = this._game.camera;
            this._posX = -this.owner._internal_getFromParents("LevelSystem_14").ice.midIce - 500
        },
        onStop: function() { this._wall = null;
            ya.prototype.onStop.call(this) },
        onUpdate: function(a) { ya.prototype.onUpdate.call(this, a) },
        animDone: function() { this.spawnWall() },
        spawnWall: function() {
            null != this._wall && this._actors.removeActor(this._wall);
            this._wall = this._actors.spawn({
                template: { key: this.animTemplate },
                transform: {
                    position: {
                        x: this._posX,
                        y: 230
                    }
                },
                spine: { pack: "spine/" + this.spineAsset, asset: this.spineAsset }
            });
            this._camera.centerForGoal(this._character.isTeam);
            this._wallSpine = this._wall._compMap.Sprite_19;
            this._wallSpine.play("in", !1, n(this, this.onWallReady));
            this._wall._compMap.HealthComponent_87.onDeath.connect(n(this, this.onWallDeath)).once();
            for (var a = 0; 12 > a;) { var b = a++;
                F.delayCallTo(function() { v.play("super_wall", "SFX") }, 0.5 + 1 * b / 12) }
        },
        onWallReady: function() { this.done() },
        onWallDeath: function() {
            this._wallSpine.play("out", !1, n(this,
                this.onWallDestroyed));
            this._wall._compMap.PhysicsComponent_42.disable()
        },
        onWallDestroyed: function() { this._actors.removeActor(this._wall);
            this._wall = null },
        done: function() { this._camera.startFollow();
            ya.prototype.done.call(this) },
        __class__: dj
    });
    var ej = function() { this._timeLeft = -1;
        this.onDone = new I;
        this.spawnRate = this.duration = 1;
        k.call(this) };
    g["game.trails.TrailComponent"] = ej;
    ej.__name__ = ["game", "trails", "TrailComponent"];
    ej.__super__ = k;
    ej.prototype = l(k.prototype, {
        get_name: function() { return "TrailComponent_3" },
        onStart: function() { k.prototype.onStart.call(this);
            this._anim = this.owner._compMap.Sprite_19;
            this._anim.animation.gotoAndPlay("start", { onComplete: n(this, this.onInDone) }) },
        onStop: function() { k.prototype.onStop.call(this) },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a); - 1 != this._timeLeft && (this._timeLeft -= a, 0 >= this._timeLeft && (this._anim.animation.gotoAndPlay("end", { onComplete: n(this, this.onOutDone) }), this._timeLeft = -1)) },
        onInDone: function() { this._timeLeft = this.duration;
            this._anim.animation.gotoAndPlay("idle") },
        onOutDone: function() { this._anim.setAlpha(0);
            this.onDone.emit(this.owner) },
        __class__: ej
    });
    var fj = function() { this._nextSpawn = 0;
        this._trails = [];
        this.template = "";
        k.call(this) };
    g["game.trails.TrailGeneratorComponent"] = fj;
    fj.__name__ = ["game", "trails", "TrailGeneratorComponent"];
    fj.__super__ = k;
    fj.prototype = l(k.prototype, {
        get_name: function() { return "TrailGeneratorComponent_2" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._character = this.owner._compMap.Character_30;
            null == this.owner._compMap.Player_15 ?
                this.owner.remove(this) : (this._actors = this.owner._internal_getFromParents("ActorSystem_48"), this._anim = this.owner._compMap.Sprite_19, this._transform = this.owner._compMap.TransformComponent_66)
        },
        onStop: function() { for (var a = 0, b = this._trails; a < b.length;) { var c = b[a];++a;
                this._actors.removeActor(c) } this._trails = [];
            k.prototype.onStop.call(this) },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a);
            this._character.isSkating && (0 >= this._nextSpawn && this.spawnTrail(), this._nextSpawn -= a * this._character.animSpeed) },
        spawnTrail: function() { if ("" == this.template && !this.checkForTemplate()) this.owner.remove(this);
            else { var a = this._actors.spawn({ template: { key: this.template }, transform: { position: { x: this._transform.position.x, y: this._transform.position.y - 1 }, direction: this._transform.direction } }),
                    b = a._compMap.TrailComponent_3;
                b.onDone.connect(n(this, this.onTrailDone)).once();
                this._nextSpawn = b.spawnRate;
                o.lowPerformance && (this._nextSpawn *= 3);
                this._trails.push(a) } },
        onTrailDone: function(a) { N.remove(this._trails, a);
            this._actors.removeActor(a) },
        checkForTemplate: function() { var a = this.owner._compMap.CustomizationComponent_6.getItem("trail"); if (null == a || null == a.id || "trailclear" == a.id) return !1;
            this.template = a.id; return !0 },
        __class__: fj
    });
    var R = function() { this.onInitComplete = new ia;
        this.initialized = !1;
        this.forceUpdate = !0;
        this.scale = this.flipX = this.flipY = 1;
        s.call(this);
        this.set_pointerEnabled(R.ENABLE_POINTER);
        this.set_visible(!1) };
    g["stolo.ensys.components.DisplayComponent"] = R;
    R.__name__ = ["stolo", "ensys", "components", "DisplayComponent"];
    R.__interfaces__ = [Ui];
    R.__super__ = s;
    R.prototype = l(s.prototype, {
        dispose: function() { this.layer = this.offset = this._transform = null;
            s.prototype.dispose.call(this) },
        onAdded: function() { s.prototype.onAdded.call(this);
            this.mobilePack && o.mobile && (this.pack += R.mobilePackSuffix);
            o.slow && (this.lowEndPack && (this.pack += R.lowEndPackSuffix), null != this.lowEndAsset && (this.asset = this.lowEndAsset));
            this.initialized || this.initStart() },
        initStart: function() { this.initEnd() },
        initEnd: function() { this.set_pointerEnabled(0 != (this._flags & 4)) },
        initComplete: function() {
            this.initialized ||
                (this.applyOffset(), this.updateDisplay(), this.initialized = !0, this.onInitComplete.emit())
        },
        onStart: function() { s.prototype.onStart.call(this);
            this._transform = this.owner._compMap.TransformComponent_66;
            X.getSystemEntity(this.owner);
            this._cullingSystem = X.getSystemEntity(this.owner).getComponent("CullingSystem_49");
            null != this._cullingSystem ? this._cullingSystem.addComponent(this, this.owner) : this.enableCulling(!1);
            this.initComplete() },
        onStop: function() {
            null != this._cullingSystem && this._cullingSystem.removeComponent(this,
                this.owner);
            s.prototype.onStop.call(this)
        },
        applyOffset: function() {
            this.centerAnchor();
            null != this.pivot && (0 <= this.pivot.x && this.anchorX.set__(this.getNaturalWidth() * this.pivot.x), 0 <= this.pivot.y && this.anchorY.set__(this.getNaturalHeight() * this.pivot.y));
            null != this.align && ("none" == this.align ? this.setAnchor(0, 0) : "left" == this.align ? this.anchorX.set__(0) : "right" == this.align && this.anchorX.set__(this.getNaturalWidth()));
            if (null != this.offset) {
                if (0 != this.offset.x) { var a = this.anchorX;
                    a.set__(a._value - this.offset.x) } 0 !=
                    this.offset.y && (a = this.anchorY, a.set__(a._value - this.offset.y))
            }
        },
        enableCulling: function(a) { this.set_visible(!a) },
        updateDisplay: function() { if (null != this._transform) { if (!this._transform.fixed || this.forceUpdate) this.setXY(this._transform.position.x, this._transform.position.y), this.setScaleXY(this._transform.direction * this.scale * this.flipX, this.scale * this.flipY), this.set_visible(!0);
                (!this._transform.fixedRotation || this.forceUpdate) && this.setRotation(this._transform.rotation);
                this.forceUpdate = !1 } },
        onUpdate: function(a) {
            this.updateDisplay();
            s.prototype.onUpdate.call(this, a)
        },
        getTexture: function(a, b) { var c = D.getPack(a, !1); if (null == c) throw "Cannot load asset '" + b + "', pack '" + a + "' was not found or loaded..."; return G.getTexture(b, c) },
        __class__: R
    });
    var bf = function() {
        this._locked = !1;
        this._loop = !0;
        this._queue = [];
        this._defaultSlotOffset = { x: 0, y: 0 };
        this.onEvent = new Tc;
        this.resetPose = bf.ResetPose;
        this.speed = 0.5;
        this.loop = !0;
        this.boneOverrides = [];
        this.mixOverrides = [];
        this.defaultMixTime = 0;
        this.defaultAnimation = "idle";
        this.customSkinName = "custom";
        R.call(this)
    };
    g["stolo.spine.SpineComponent"] = bf;
    bf.__name__ = ["stolo", "spine", "SpineComponent"];
    bf.__super__ = R;
    bf.prototype = l(R.prototype, {
        onAdded: function() { R.prototype.onAdded.call(this);
            this.setAtlas(this.atlas) },
        applyOffset: function() { this.setAnchor(0, 0);
            null != this.offset && null != this._animation && this._animation.setAnchor(-this.offset.x, -this.offset.y) },
        setAtlas: function(a) { this.atlas = a;
            this._atlasLoader = this.loadAtlas(this.pack, this.asset) },
        loadAtlas: function(a, b, c) {
            null == c && (c = !0);
            var a = D.getPack(a),
                d = a.getFile((null != this.atlas ? this.atlas : b) + ".atlas", !1),
                e = "";
            null != d && (e = d.toString());
            d = new Ul(e, new gj(a));
            d = new Hd(d);
            c && this.loadSkeleton(d, a, b);
            return d
        },
        loadSkeleton: function(a, b, c) {
            a = new La(a);
            b = b.getFile(c + ".json").toString();
            this._skeletonData = a.readSkeletonData(b, c);
            null != this._animation && (this.owner.removeChild(this._animation.owner), this._animation.state.onComplete.remove(n(this, this.onAnimDone)), this._animation.state.onEvent.remove(n(this, this.onAnimEvent)));
            this._animation = new hj(this._skeletonData,
                this.defaultMixTime);
            this._animation.set_pixelSnapping(0 != (this._flags & 32));
            this._animation.timeScale = this.speed;
            this._animation.state.onComplete.add(n(this, this.onAnimDone));
            this._animation.state.onEvent.add(n(this, this.onAnimEvent));
            null != this.defaultAnimation && (this._animName = this.defaultAnimation, this._animation.state.setAnimationByName(0, this.defaultAnimation, this.loop));
            this.applyMixOverrides(this.mixOverrides);
            this.applyBoneOverrides(this.boneOverrides);
            this.owner.addChild((new A).add(this._animation));
            this.applyOffset()
        },
        applyBoneOverrides: function(a) { for (var b = 0; b < a.length;) { var c = a[b];++b;
                this.applyBoneOverride(c) } },
        applyBoneOverride: function(a) { var b = this._animation.skeleton.findBone(a.bone); if (null == b) throw "Bone '" + u.string(a.bone) + "' not found for override";
            b = b.data;
            null != a.offsetX && (b.x += a.offsetX);
            null != a.offsetY && (b.y += a.offsetY);
            null != a.scaleX && (b.scaleX = a.scaleX);
            null != a.scaleY && (b.scaleY = a.scaleY) },
        applyMixOverrides: function(a) { for (var b = 0; b < a.length;) { var c = a[b];++b;
                this.applyMixOverride(c) } },
        applyMixOverride: function(a) { this._animation.stateData.setMixByName(a.from, a.to, a.time) },
        play: function(a, b, c, d) { null == d && (d = !1);
            null == b && (b = !0);
            a == this._currentAnim || this._locked || (this._locked = d, this._currentAnim = a, this._loop = b, this._callback = c, this._queue = a instanceof Array && null == a.__enum__ ? a : [a], this.playNextAnim()) },
        playNextAnim: function() {
            this.resetPose && (this._animation.skeleton.setBonesToSetupPose(), this._animation.skeleton.setSlotsToSetupPose());
            this._animName = this._queue.shift();
            this._animation.state.setAnimationByName(0,
                this._animName, this._loop)
        },
        onAnimDone: function() { this._locked = !1;
            0 < this._queue.length ? this.playNextAnim() : null != this._callback && (this._callback(this), this._loop || (this._callback = null)) },
        onAnimEvent: function(a, b) { this.onEvent.emit(this, b) },
        setSpeed: function(a) { this._animation.timeScale = a },
        changeSlotFromImage: function(a, b, c) {
            if (null == b) this.clearSlot(this.getSlot(a));
            else {
                var a = this.createRegion(a, c),
                    c = new ij,
                    d = new jj;
                d.rendererObject = b;
                d.width = c.width = b.get_width();
                d.height = c.height = b.get_height();
                c.page = d;
                a.rendererObject = c
            }
        },
        clearSlot: function(a) { if (null != a.attachment) { var b = U.__cast(a.attachment, He).wrapper;
                null != b && null != b.owner && (b.owner.dispose(), b.dispose());
                a.set_attachment(null) } },
        getSlot: function(a, b) { null == b && (b = !1); var c = this._animation.skeleton.findSlot(a); if (null == c) throw "Slot '" + a + "' not found.";
            b && this.clearSlot(c); return c },
        createRegion: function(a, b, c, d, e) {
            null == e && (e = !1);
            var f = this.getSlot(a, !0),
                j = this.findAttachmentData(this._skeletonData.findSkin(this.customSkinName), a);
            if (null == j) throw "Skin attachment '" + a + "' not found. Slot name and placeholder name must be the same.";
            var p;
            if (null != c) { if (p = this._atlasLoader.newRegionAttachment(null, a, c + "/" + d), null == p) throw "'" + c + "/" + d + "' not found in the atlas for slot '" + a + "'"; } else p = new He(j.name);
            p.weak = e;
            f.set_attachment(p);
            this.updateAttachment(p, j, b);
            return p
        },
        updateAttachment: function(a, b, c) {
            null == c && (c = this._defaultSlotOffset);
            var d = b.rotation * Math.PI / 180;
            a.x = b.x + c.x * Math.cos(d) + c.y * Math.sin(d);
            a.y = b.y + c.x * Math.sin(d) -
                c.y * Math.cos(d);
            a.width = b.width;
            a.height = b.height;
            a.scaleX = b.scaleX;
            a.scaleY = b.scaleY;
            a.rotation = b.rotation;
            a.a = b.a
        },
        findAttachmentData: function(a, b) { for (var c = 0, d = a.attachments; c < d.length;) { var e = d[c];++c; if (null != e && null != e.get(b)) return e.get(b) } return null },
        __class__: bf
    });
    var an = function() {};
    g["game.components.ComponentList"] = an;
    an.__name__ = ["game", "components", "ComponentList"];
    var q = function() {};
    g["game.config.GameConfig"] = q;
    q.__name__ = ["game", "config", "GameConfig"];
    q.getOffset = function(a) {
        null ==
            a && (a = 80);
        return o.iphone ? a : 0
    };
    var Xg = function(a, b, c, d, e) {
        null == e && (e = 0.001);
        null == d && (d = 1);
        null == c && (c = 2);
        null == b && (b = 1);
        null == a && (a = 0);
        this.zpp_inner = null;
        null == sa.zpp_pool ? this.zpp_inner = new sa : (this.zpp_inner = sa.zpp_pool, sa.zpp_pool = this.zpp_inner.next, this.zpp_inner.next = null);
        null;
        this.zpp_inner.outer = this;
        a != this.zpp_inner.elasticity && (this.zpp_inner.elasticity = a / 1, this.zpp_inner.invalidate(sa.WAKE | sa.ARBITERS));
        this.zpp_inner.elasticity;
        b != this.zpp_inner.dynamicFriction && (this.zpp_inner.dynamicFriction =
            b / 1, this.zpp_inner.invalidate(sa.WAKE | sa.ANGDRAG | sa.ARBITERS));
        this.zpp_inner.dynamicFriction;
        c != this.zpp_inner.staticFriction && (this.zpp_inner.staticFriction = c / 1, this.zpp_inner.invalidate(sa.WAKE | sa.ARBITERS));
        this.zpp_inner.staticFriction;
        d != 1E3 * this.zpp_inner.density && (this.zpp_inner.density = d / 1E3, this.zpp_inner.invalidate(sa.WAKE | sa.PROPS));
        1E3 * this.zpp_inner.density;
        e != this.zpp_inner.rollingFriction && (this.zpp_inner.rollingFriction = e / 1, this.zpp_inner.invalidate(sa.WAKE | sa.ARBITERS));
        this.zpp_inner.rollingFriction
    };
    g["nape.phys.Material"] = Xg;
    Xg.__name__ = ["nape", "phys", "Material"];
    Xg.prototype = { toString: function() { return "{ elasticity: " + this.zpp_inner.elasticity + " dynamicFriction: " + this.zpp_inner.dynamicFriction + " staticFriction: " + this.zpp_inner.staticFriction + " density: " + 1E3 * this.zpp_inner.density + " rollingFriction: " + this.zpp_inner.rollingFriction + " }" }, __class__: Xg };
    var sa = function() {
        this.dynamicFriction = this.staticFriction = this.density = this.elasticity = this.rollingFriction = 0;
        this.next = this.outer = this.shapes =
            null;
        this.shapes = new Df;
        this.elasticity = 0;
        this.dynamicFriction = 1;
        this.staticFriction = 2;
        this.density = 0.001;
        this.rollingFriction = 0.01
    };
    g["zpp_nape.phys.ZPP_Material"] = sa;
    sa.__name__ = ["zpp_nape", "phys", "ZPP_Material"];
    sa.prototype = {
        wrapper: function() { if (null == this.outer) { this.outer = new Xg; var a = this.outer.zpp_inner;
                a.outer = null;
                a.next = sa.zpp_pool;
                sa.zpp_pool = a;
                this.outer.zpp_inner = this } return this.outer },
        set: function(a) {
            this.dynamicFriction = a.dynamicFriction;
            this.staticFriction = a.staticFriction;
            this.density =
                a.density;
            this.elasticity = a.elasticity;
            this.rollingFriction = a.rollingFriction
        },
        invalidate: function(a) { for (var b = this.shapes.head; null != b;) b.elt.invalidate_material(a), b = b.next },
        __class__: sa
    };
    var Df = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Shape"] = Df;
    Df.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Shape"];
    Df.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == oc.zpp_pool ? b = new oc : (b = oc.zpp_pool, oc.zpp_pool =
                b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) { var c;
            null == oc.zpp_pool ? c = new oc : (c = oc.zpp_pool, oc.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++; return c },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() {
            var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next =
                oc.zpp_pool;
            oc.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt =
                null;
            a.next = oc.zpp_pool;
            oc.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: Df
    };
    var Ef = function() {};
    g["game.config.PhysicsConfig"] = Ef;
    Ef.__name__ = ["game", "config", "PhysicsConfig"];
    Ef.init = function() { Fd.add("puck", Ef.PuckMaterial);
        Fd.add("player", Ef.PlayerMaterial);
        Fd.add("wall", Ef.PlayerMaterial);
        lb.defaultDamping = 10 };
    var Ia = function() {};
    g["game.customization.CustomizationCode"] = Ia;
    Ia.__name__ = ["game", "customization", "CustomizationCode"];
    Ia.encode = function(a, b) { var c = Ia.simplify(a, b);
        Ia.ENCRYPT && (c = Zc.ofString(c), c = Id.encode(c)); return c };
    Ia.decode = function(a) { Ia.ENCRYPT && (a = Id.decode(a).toString()); return Ia.parse(a) };
    Ia.simplify = function(a, b) { var c;
        c = "" + a.code;
        c += Ia.getItemCode(b.flag);
        c += Ia.getItemCode(b.head);
        c += Ia.getItemCode(b.shoulders);
        c += Ia.getItemCode(b.stick); return c += Ia.getItemCode(b.trail) };
    Ia.parse = function(a) {
        a = a.split("");
        return {
            character: ca.getDataByCode(a[0]),
            inventory: {
                flag: Ia.getItemId("flag",
                    a[1]),
                head: Ia.getItemId("head", a[2]),
                shoulders: Ia.getItemId("shoulders", a[3]),
                stick: Ia.getItemId("stick", a[4]),
                trail: Ia.getItemId("trail", a[5])
            }
        }
    };
    Ia.getItemCode = function(a) { return null == a ? "0" : $.getById(a).code };
    Ia.getItemId = function(a, b) { var c = $.getByCode(a, b); return null == c ? null : c.id };
    var pd = function() {};
    g["game.customization.CustomizationSlot"] = pd;
    pd.__name__ = ["game", "customization", "CustomizationSlot"];
    var ga = function() {};
    g["game.customization.ItemConfig"] = ga;
    ga.__name__ = ["game", "customization",
        "ItemConfig"
    ];
    ga.getDefaultItems = function(a) { return y.field(ga, a).slice() };
    ga.getCustomizationData = function(a) { var b = "{",
            c;
        c = !0; for (var d = 0; d < a.length;) { var e = a[d];++d;
            c || (b += ",");
            c = $.getById(e);
            b += '"' + c.type + '":"' + c.id + '"';
            c = !1 } return JSON.parse(b + "}") };
    var Qa = function() {};
    g["game.customization.LootList"] = Qa;
    Qa.__name__ = ["game", "customization", "LootList"];
    Qa.init = function() {
        Qa.initDone = !0;
        Qa.loot.set("quickmatch", [{ id: "flag1", rarity: 1 }, { id: "flag2", rarity: 1 }, { id: "flag3", rarity: 1 }, { id: "flag4", rarity: 1 },
            { id: "flag5", rarity: 1 }, { id: "flag6", rarity: 1 }, { id: "flag7", rarity: 1 }, { id: "flag8", rarity: 1 }, { id: "flag9", rarity: 1 }, { id: "flag10", rarity: 1 }, { id: "head8", rarity: 1 }, { id: "head9", rarity: 1 }, { id: "head10", rarity: 1 }, { id: "head11", rarity: 1 }, { id: "head12", rarity: 1 }, { id: "head13", rarity: 1 }, { id: "head14", rarity: 1 }, { id: "head15", rarity: 1 }, { id: "head16", rarity: 1 }, { id: "head17", rarity: 1 }, { id: "shoulders1", rarity: 1 }, { id: "shoulders2", rarity: 1 }, { id: "shoulders3", rarity: 1 }, { id: "shoulders4", rarity: 1 }, { id: "shoulders5", rarity: 1 }, {
                id: "shoulders6",
                rarity: 1
            }, { id: "shoulders7", rarity: 1 }, { id: "shoulders8", rarity: 1 }, { id: "shoulders9", rarity: 1 }, { id: "shoulders10", rarity: 1 }, { id: "stick2", rarity: 1 }, { id: "stick3", rarity: 1 }, { id: "stick4", rarity: 1 }, { id: "stick5", rarity: 1 }, { id: "stick6", rarity: 1 }, { id: "stick7", rarity: 1 }, { id: "stick8", rarity: 1 }, { id: "stick9", rarity: 1 }, { id: "stick10", rarity: 1 }, { id: "trail_coins", rarity: 1 }, { id: "trail_cute", rarity: 1 }, { id: "trail_fire", rarity: 1 }, { id: "trail_flower", rarity: 1 }, { id: "trail_smell", rarity: 1 }, { id: "trail_coins_02", rarity: 1 }, {
                id: "trail_cute_02",
                rarity: 1
            }, { id: "trail_fire_02", rarity: 1 }, { id: "trail_flower_02", rarity: 1 }, { id: "trail_smell_02", rarity: 1 }
        ]);
        Qa.loot.set("level1", [{ id: "flag1", rarity: 1 }, { id: "flag2", rarity: 1 }, { id: "flag3", rarity: 1 }, { id: "flag4", rarity: 1 }, { id: "flag5", rarity: 0 }, { id: "flag6", rarity: 0 }, { id: "flag7", rarity: 0 }, { id: "flag8", rarity: 0 }, { id: "flag9", rarity: 0 }, { id: "flag10", rarity: 0 }, { id: "head8", rarity: 1 }, { id: "head9", rarity: 1 }, { id: "head10", rarity: 1 }, { id: "head11", rarity: 1 }, { id: "head12", rarity: 0 }, { id: "head13", rarity: 0 }, { id: "head14", rarity: 0 },
            { id: "head15", rarity: 0 }, { id: "head16", rarity: 0 }, { id: "head17", rarity: 0 }, { id: "shoulders1", rarity: 1 }, { id: "shoulders2", rarity: 1 }, { id: "shoulders3", rarity: 1 }, { id: "shoulders4", rarity: 1 }, { id: "shoulders5", rarity: 0 }, { id: "shoulders6", rarity: 0 }, { id: "shoulders7", rarity: 0 }, { id: "shoulders8", rarity: 0 }, { id: "shoulders9", rarity: 0 }, { id: "shoulders10", rarity: 0 }, { id: "stick2", rarity: 1 }, { id: "stick3", rarity: 1 }, { id: "stick4", rarity: 1 }, { id: "stick5", rarity: 1 }, { id: "stick6", rarity: 0 }, { id: "stick7", rarity: 0 }, { id: "stick8", rarity: 0 },
            { id: "stick9", rarity: 0 }, { id: "stick10", rarity: 0 }, { id: "trail_coins", rarity: 1 }, { id: "trail_cute", rarity: 1 }, { id: "trail_fire", rarity: 1 }, { id: "trail_flower", rarity: 1 }, { id: "trail_smell", rarity: 0 }, { id: "trail_coins_02", rarity: 0 }, { id: "trail_cute_02", rarity: 0 }, { id: "trail_fire_02", rarity: 0 }, { id: "trail_flower_02", rarity: 0 }, { id: "trail_smell_02", rarity: 0 }
        ]);
        Qa.loot.set("level2", [{ id: "flag1", rarity: 1 }, { id: "flag2", rarity: 1 }, { id: "flag3", rarity: 1 }, { id: "flag4", rarity: 1 }, { id: "flag5", rarity: 0 }, { id: "flag6", rarity: 0 }, {
                id: "flag7",
                rarity: 0
            }, { id: "flag8", rarity: 0 }, { id: "flag9", rarity: 0 }, { id: "flag10", rarity: 0 }, { id: "head8", rarity: 1 }, { id: "head9", rarity: 1 }, { id: "head10", rarity: 1 }, { id: "head11", rarity: 1 }, { id: "head12", rarity: 0 }, { id: "head13", rarity: 0 }, { id: "head14", rarity: 0 }, { id: "head15", rarity: 0 }, { id: "head16", rarity: 0 }, { id: "head17", rarity: 0 }, { id: "shoulders1", rarity: 1 }, { id: "shoulders2", rarity: 1 }, { id: "shoulders3", rarity: 1 }, { id: "shoulders4", rarity: 1 }, { id: "shoulders5", rarity: 0 }, { id: "shoulders6", rarity: 0 }, { id: "shoulders7", rarity: 0 }, {
                id: "shoulders8",
                rarity: 0
            }, { id: "shoulders9", rarity: 0 }, { id: "shoulders10", rarity: 0 }, { id: "stick2", rarity: 1 }, { id: "stick3", rarity: 1 }, { id: "stick4", rarity: 1 }, { id: "stick5", rarity: 1 }, { id: "stick6", rarity: 0 }, { id: "stick7", rarity: 0 }, { id: "stick8", rarity: 0 }, { id: "stick9", rarity: 0 }, { id: "stick10", rarity: 0 }, { id: "trail_coins", rarity: 1 }, { id: "trail_cute", rarity: 1 }, { id: "trail_fire", rarity: 1 }, { id: "trail_flower", rarity: 1 }, { id: "trail_smell", rarity: 0 }, { id: "trail_coins_02", rarity: 0 }, { id: "trail_cute_02", rarity: 0 }, { id: "trail_fire_02", rarity: 0 },
            { id: "trail_flower_02", rarity: 0 }, { id: "trail_smell_02", rarity: 0 }
        ]);
        Qa.loot.set("level3", [{ id: "flag1", rarity: 0 }, { id: "flag2", rarity: 0 }, { id: "flag3", rarity: 0 }, { id: "flag4", rarity: 0 }, { id: "flag5", rarity: 1 }, { id: "flag6", rarity: 1 }, { id: "flag7", rarity: 1 }, { id: "flag8", rarity: 0 }, { id: "flag9", rarity: 0 }, { id: "flag10", rarity: 0 }, { id: "head8", rarity: 0 }, { id: "head9", rarity: 0 }, { id: "head10", rarity: 0 }, { id: "head11", rarity: 0 }, { id: "head12", rarity: 1 }, { id: "head13", rarity: 1 }, { id: "head14", rarity: 1 }, { id: "head15", rarity: 0 }, {
            id: "head16",
            rarity: 0
        }, { id: "head17", rarity: 0 }, { id: "shoulders1", rarity: 0 }, { id: "shoulders2", rarity: 0 }, { id: "shoulders3", rarity: 0 }, { id: "shoulders4", rarity: 0 }, { id: "shoulders5", rarity: 1 }, { id: "shoulders6", rarity: 1 }, { id: "shoulders7", rarity: 1 }, { id: "shoulders8", rarity: 0 }, { id: "shoulders9", rarity: 0 }, { id: "shoulders10", rarity: 0 }, { id: "stick2", rarity: 0 }, { id: "stick3", rarity: 0 }, { id: "stick4", rarity: 0 }, { id: "stick5", rarity: 0 }, { id: "stick6", rarity: 1 }, { id: "stick7", rarity: 1 }, { id: "stick8", rarity: 1 }, { id: "stick9", rarity: 0 }, {
            id: "stick10",
            rarity: 0
        }, { id: "trail_coins", rarity: 0 }, { id: "trail_cute", rarity: 0 }, { id: "trail_fire", rarity: 0 }, { id: "trail_flower", rarity: 0 }, { id: "trail_smell", rarity: 1 }, { id: "trail_coins_02", rarity: 1 }, { id: "trail_cute_02", rarity: 1 }, { id: "trail_fire_02", rarity: 0 }, { id: "trail_flower_02", rarity: 0 }, { id: "trail_smell_02", rarity: 0 }]);
        Qa.loot.set("level4", [{ id: "flag1", rarity: 0 }, { id: "flag2", rarity: 0 }, { id: "flag3", rarity: 0 }, { id: "flag4", rarity: 0 }, { id: "flag5", rarity: 1 }, { id: "flag6", rarity: 1 }, { id: "flag7", rarity: 1 }, { id: "flag8", rarity: 0 },
            { id: "flag9", rarity: 0 }, { id: "flag10", rarity: 0 }, { id: "head8", rarity: 0 }, { id: "head9", rarity: 0 }, { id: "head10", rarity: 0 }, { id: "head11", rarity: 0 }, { id: "head12", rarity: 1 }, { id: "head13", rarity: 1 }, { id: "head14", rarity: 1 }, { id: "head15", rarity: 0 }, { id: "head16", rarity: 0 }, { id: "head17", rarity: 0 }, { id: "shoulders1", rarity: 0 }, { id: "shoulders2", rarity: 0 }, { id: "shoulders3", rarity: 0 }, { id: "shoulders4", rarity: 0 }, { id: "shoulders5", rarity: 1 }, { id: "shoulders6", rarity: 1 }, { id: "shoulders7", rarity: 1 }, { id: "shoulders8", rarity: 0 }, {
                id: "shoulders9",
                rarity: 0
            }, { id: "shoulders10", rarity: 0 }, { id: "stick2", rarity: 0 }, { id: "stick3", rarity: 0 }, { id: "stick4", rarity: 0 }, { id: "stick5", rarity: 0 }, { id: "stick6", rarity: 1 }, { id: "stick7", rarity: 1 }, { id: "stick8", rarity: 1 }, { id: "stick9", rarity: 0 }, { id: "stick10", rarity: 0 }, { id: "trail_coins", rarity: 0 }, { id: "trail_cute", rarity: 0 }, { id: "trail_fire", rarity: 0 }, { id: "trail_flower", rarity: 0 }, { id: "trail_smell", rarity: 1 }, { id: "trail_coins_02", rarity: 1 }, { id: "trail_cute_02", rarity: 1 }, { id: "trail_fire_02", rarity: 0 }, { id: "trail_flower_02", rarity: 0 },
            { id: "trail_smell_02", rarity: 0 }
        ]);
        Qa.loot.set("level5", [{ id: "flag1", rarity: 0 }, { id: "flag2", rarity: 0 }, { id: "flag3", rarity: 0 }, { id: "flag4", rarity: 0 }, { id: "flag5", rarity: 0 }, { id: "flag6", rarity: 0 }, { id: "flag7", rarity: 0 }, { id: "flag8", rarity: 1 }, { id: "flag9", rarity: 1 }, { id: "flag10", rarity: 1 }, { id: "head8", rarity: 0 }, { id: "head9", rarity: 0 }, { id: "head10", rarity: 0 }, { id: "head11", rarity: 0 }, { id: "head12", rarity: 0 }, { id: "head13", rarity: 0 }, { id: "head14", rarity: 0 }, { id: "head15", rarity: 1 }, { id: "head16", rarity: 1 }, { id: "head17", rarity: 1 },
            { id: "shoulders1", rarity: 0 }, { id: "shoulders2", rarity: 0 }, { id: "shoulders3", rarity: 0 }, { id: "shoulders4", rarity: 0 }, { id: "shoulders5", rarity: 0 }, { id: "shoulders6", rarity: 0 }, { id: "shoulders7", rarity: 0 }, { id: "shoulders8", rarity: 1 }, { id: "shoulders9", rarity: 1 }, { id: "shoulders10", rarity: 1 }, { id: "stick2", rarity: 0 }, { id: "stick3", rarity: 0 }, { id: "stick4", rarity: 0 }, { id: "stick5", rarity: 0 }, { id: "stick6", rarity: 0 }, { id: "stick7", rarity: 0 }, { id: "stick8", rarity: 1 }, { id: "stick9", rarity: 1 }, { id: "stick10", rarity: 1 }, { id: "trail_coins", rarity: 0 },
            { id: "trail_cute", rarity: 0 }, { id: "trail_fire", rarity: 0 }, { id: "trail_flower", rarity: 0 }, { id: "trail_smell", rarity: 0 }, { id: "trail_coins_02", rarity: 0 }, { id: "trail_cute_02", rarity: 0 }, { id: "trail_fire_02", rarity: 1 }, { id: "trail_flower_02", rarity: 1 }, { id: "trail_smell_02", rarity: 1 }
        ]);
        Qa.loot.set("level6", [{ id: "flag1", rarity: 0 }, { id: "flag2", rarity: 0 }, { id: "flag3", rarity: 0 }, { id: "flag4", rarity: 0 }, { id: "flag5", rarity: 0 }, { id: "flag6", rarity: 0 }, { id: "flag7", rarity: 0 }, { id: "flag8", rarity: 1 }, { id: "flag9", rarity: 1 }, { id: "flag10", rarity: 1 },
            { id: "head8", rarity: 0 }, { id: "head9", rarity: 0 }, { id: "head10", rarity: 0 }, { id: "head11", rarity: 0 }, { id: "head12", rarity: 0 }, { id: "head13", rarity: 0 }, { id: "head14", rarity: 0 }, { id: "head15", rarity: 1 }, { id: "head16", rarity: 1 }, { id: "head17", rarity: 1 }, { id: "shoulders1", rarity: 0 }, { id: "shoulders2", rarity: 0 }, { id: "shoulders3", rarity: 0 }, { id: "shoulders4", rarity: 0 }, { id: "shoulders5", rarity: 0 }, { id: "shoulders6", rarity: 0 }, { id: "shoulders7", rarity: 0 }, { id: "shoulders8", rarity: 1 }, { id: "shoulders9", rarity: 1 }, { id: "shoulders10", rarity: 1 }, {
                id: "stick2",
                rarity: 0
            }, { id: "stick3", rarity: 0 }, { id: "stick4", rarity: 0 }, { id: "stick5", rarity: 0 }, { id: "stick6", rarity: 0 }, { id: "stick7", rarity: 0 }, { id: "stick8", rarity: 1 }, { id: "stick9", rarity: 1 }, { id: "stick10", rarity: 1 }, { id: "trail_coins", rarity: 0 }, { id: "trail_cute", rarity: 0 }, { id: "trail_fire", rarity: 0 }, { id: "trail_flower", rarity: 0 }, { id: "trail_smell", rarity: 0 }, { id: "trail_coins_02", rarity: 0 }, { id: "trail_cute_02", rarity: 0 }, { id: "trail_fire_02", rarity: 1 }, { id: "trail_flower_02", rarity: 1 }, { id: "trail_smell_02", rarity: 1 }
        ])
    };
    Qa.getLoot =
        function(a, b) { null == b && (b = !0);
            Qa.initDone || Qa.init();
            m.isTournament || (a = "quickmatch"); var c;
            c = b ? m.game.getLoot(m.currentCharacter.name) : [];
            c = Qa.filterOwned(Qa.loot.get(a), c); var d = "";
            0 < c.length && (d = c[Math.floor(Math.random() * c.length)]); return d };
    Qa.getSneakPeak = function(a, b, c) { null == c && (c = 0.7);
        null == b && (b = 1); for (var d = [], e, f = 0; f < b;) f++, Math.random() > c || (e = Qa.getLoot(a, !1), "" != e && d.push(e)); return d };
    Qa.filterOwned = function(a, b) {
        if (null == a) return [];
        for (var c = [], d = 0; d < a.length;) {
            var e = a[d];
            ++d;
            if (!Qa.compare(e.id,
                    b))
                for (var f = 0, j = e.rarity; f < j;) f++, c.push(e.id)
        }
        return c
    };
    Qa.compare = function(a, b) { for (var c = 0; c < b.length;) { var d = b[c];++c; if (a == d) return !0 } return !1 };
    var mc = function() {};
    g["game.customization.StatsManager"] = mc;
    mc.__name__ = ["game", "customization", "StatsManager"];
    mc.applyMods = function(a) { var b = mc.getItemsStats(a);
        null != a._compMap.Mods_7 && a._compMap.Mods_7.applyMods(b) };
    mc.getItemsStats = function(a) {
        for (var b = 0, c = 0, d = 0, a = a._compMap.CustomizationComponent_6.inventory.iterator(); a.hasNext();) var e = a.next(),
            b = b + e.stats.speed,
            c = c + e.stats.power,
            d = d + e.stats.superRate;
        b = Za.clamp(b, mc.minValue, mc.maxValue);
        c = Za.clamp(c, mc.minValue, mc.maxValue);
        d = Za.clamp(d, mc.minValue, mc.maxValue);
        return { speed: b, power: c, superRate: d }
    };
    var ca = function() {};
    g["game.data.Characters"] = ca;
    ca.__name__ = ["game", "data", "Characters"];
    ca.getDataByName = function(a) { for (var b = 0, c = ca.list; b < c.length;) { var d = c[b];++b; if (null != d && d.name == a) return d } return null };
    ca.getDataByCode = function(a) {
        for (var b = 0, c = ca.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (null != d && d.code == a) return d
        }
        return null
    };
    var m = function() {};
    g["game.data.GameData"] = m;
    m.__name__ = ["game", "data", "GameData"];
    m.init = function() { m.loadConfig("config.json");
        na.Prefix = q.$name + "_";
        m.game = new Vl;
        m.game.load() };
    m.loadConfig = function(a, b, c) { null == c && (c = !0);
        null == b && (b = "config");
        null == a && (a = "config.json");
        m.config = D.getJSON(a, b, c) };
    m.setRandomOpponent = function() {
        for (var a = [], b = 0, c = ca.list; b < c.length;) {
            var d = c[b];
            ++b;
            null != d && d.team != m.currentCharacter.team && !(null != m.currentOpponent && m.currentOpponent.team ==
                d.team) && a.push(d)
        }
        m.currentOpponent = a[Math.floor(Math.random() * a.length)]
    };
    var pc = function() {};
    g["stolo.ensys.data.LevelData"] = pc;
    pc.__name__ = ["stolo", "ensys", "data", "LevelData"];
    pc.get = function(a, b, c) { null == b && (b = "levels"); if ("storage" == b) return pc.getFromStorage(a, null, c); var d = pc._levelCache.get(a);
        null == d && (b = D.getJSON(a, b), b.filename = a, d = pc.createData(c), d.parse(b), pc._levelCache.set(a, d)); return d };
    pc.getFromStorage = function(a, b, c) {
        if (null == b || "" == b) b = a;
        b = na.get(b);
        return null != b && "" != b ? (b =
            JSON.parse(b), b.filename = a, a = pc.createData(c), a.parse(b), a) : null
    };
    pc.createData = function(a) { return Y.createInstance(a, []) };
    pc.prototype = {
        getDefaultLayers: function() { return [{ name: "default", parallax: { x: 0, y: 0 }, editor: { locked: !0 }, alpha: 1 }] },
        parse: function(a) { if (null == a) throw "Level data null";
            this.data = a;
            this.name = this.parseName();
            this.filename = this.parseFilename();
            this.env = this.parseEnv();
            this.layers = this.parseLayers();
            this.actors = this.parseActors() },
        parseName: function() {
            return null == this.data.name ? "noname" :
                this.data.name
        },
        parseFilename: function() { return null == this.data.filename ? "nofilename" : this.data.filename },
        parseEnv: function() { return null == this.data.env ? "1" : this.data.env },
        parseActors: function() { return null == this.data.actors ? [] : this.data.actors },
        parseLayers: function() { return null == this.data.layers ? this.getDefaultLayers() : this.data.layers },
        __class__: pc
    };
    var jb = function() {};
    g["game.data.GameLevelData"] = jb;
    jb.__name__ = ["game", "data", "GameLevelData"];
    jb.get = function(a) { return pc.get(a, "levels", jb) };
    jb.getLvlIndexByName =
        function(a) { return jb.LIST.indexOf(a) };
    jb.__super__ = pc;
    jb.prototype = l(pc.prototype, {
        getDefaultLayers: function() { return [{ name: "fbg", parallax: { x: 0, y: 0 }, editor: { locked: !0 } }, { name: "bg", parallax: { x: 1, y: 1 }, editor: { locked: !0 } }, { name: "back", parallax: { x: 1, y: 1 } }, { name: "default", parallax: { x: 1, y: 1 } }, { name: "front", parallax: { x: 1, y: 1 } }, { name: "player", parallax: { x: 1, y: 1 } }, { name: "player_front", parallax: { x: 1, y: 1 } }, { name: "fg", parallax: { x: 1, y: 1 } }] },
        getPacks: function() {
            var a = ["actors", "ai", "sprites", "sprites_env" + this.env,
                "ui_hud", "ui_callouts", "spine/puck", "spine/pickups", "spine/" + m.currentCharacter.name, "spine/" + m.currentCharacter.partner, "spine/" + m.currentOpponent.name, "spine/" + m.currentOpponent.partner
            ];
            m.game.tutoDone || (o.mobile ? a.push("htp_mobile") : a.push("htp"));
            o.lowMemory || a.push("sprites_highend");
            return a
        },
        __class__: jb
    });
    var Vl = function() { this.tutoDone = this.custoTutoDone = this.characterDone = !1;
        this.clear() };
    g["game.data.SaveGame"] = Vl;
    Vl.__name__ = ["game", "data", "SaveGame"];
    Vl.prototype = {
        clear: function() {
            this.characterCode =
                this.lastUnlockedLevel = null;
            this.unlockedLevels = new K;
            this.customizedCharacters = new K;
            this.highscores = new K;
            this.charactersLoot = new K;
            this.characterCode = null;
            this.characterDone = this.custoTutoDone = this.tutoDone = !1
        },
        load: function() {
            this.unlockedLevels = na.get("levels", new K);
            this.customizedCharacters = na.get("customizedCharacters", new K);
            this.highscores = na.get("highscores", new K);
            this.charactersLoot = na.get("charactersLoot", new K);
            this.characterCode = na.get("characterCode", null);
            this.tutoDone = na.get("tutoDone",
                !1);
            this.custoTutoDone = na.get("custoTutoDone", !1);
            this.characterDone = na.get("characterDone", !1)
        },
        save: function() { na.set("levels", this.unlockedLevels);
            na.set("customizedCharacters", this.customizedCharacters);
            na.set("highscores", this.highscores);
            na.set("charactersLoot", this.charactersLoot);
            na.set("characterCode", this.characterCode);
            na.set("tutoDone", this.tutoDone);
            na.set("custoTutoDone", this.custoTutoDone);
            na.set("characterDone", this.characterDone) },
        isLevelLocked: function(a, b) {
            if ("level1" == b) return !1;
            if (!this.unlockedLevels.exists(a)) { var c = new K;
                this.unlockedLevels.set(a, c) }
            return !Yg.isUnlocked(b, this.unlockedLevels.get(a))
        },
        unlockLevel: function(a, b) { if (!this.unlockedLevels.exists(a)) { var c = new K;
                this.unlockedLevels.set(a, c) } c = Yg.unlock(b, this.unlockedLevels.get(a));
            this.lastUnlockedLevel = b;
            c && this.save(); return !0 },
        getLevel: function(a) {
            if (!this.unlockedLevels.exists(a)) { var b = new K;
                this.unlockedLevels.set(a, b) } b = 1;
            for (a = this.unlockedLevels.get(a).iterator(); a.hasNext();) a.next() && b++;
            return u["int"](Math.min(jb.LIST.length,
                b))
        },
        getLoot: function(a) { if (!this.charactersLoot.exists(a)) { var b = ga.getDefaultItems(a);
                this.charactersLoot.set(a, b) } return this.charactersLoot.get(a) },
        setLoot: function(a, b) { if (!this.charactersLoot.exists(a)) { var c = ga.getDefaultItems(a);
                this.charactersLoot.set(a, c) } this.charactersLoot.get(a).push(b);
            this.save() },
        isLootUnlocked: function(a, b) {
            if (!this.charactersLoot.exists(a)) { var c = ga.getDefaultItems(a);
                this.charactersLoot.set(a, c);
                this.charactersLoot.get(a).push("flag1") }
            for (var c = 0, d = this.charactersLoot.get(a); c <
                d.length;) { var e = d[c];++c; if (e == b) return !0 }
            return !1
        },
        __class__: Vl
    };
    var kj = function() { this._minY = this._maxY = 0;
        k.call(this) };
    g["game.managers.DepthManager"] = kj;
    kj.__name__ = ["game", "managers", "DepthManager"];
    kj.__super__ = k;
    kj.prototype = l(k.prototype, {
        get_name: function() { return "DepthManager_25" },
        onAdded: function() { k.prototype.onAdded.call(this) },
        onStart: function() {
            k.prototype.onStart.call(this);
            var a = this.owner.parent._compMap.GameLogic_27;
            if (a.isStarted) this.onGameStart();
            else a.onGameStart.connect(n(this,
                this.onGameStart)).once()
        },
        onGameStart: function() { this._iceRink = U.__cast(this.owner.parent._compMap.LevelSystem_14, Zg).ice;
            this._minY = this._iceRink.minY;
            this._maxY = this._iceRink.maxY;
            this._layer = this.owner.parent._compMap.RendererSystem_50.getLayer("player");
            this._layer.depthSorter = new lj },
        onUpdate: function(a) {
            k.prototype.onUpdate.call(this, a);
            if (null != this._layer) {
                this._layer.sortDepthByY();
                for (var b = 0, c = this._layer.getChildren(); b < c.length;) {
                    var d = c[b];
                    ++b;
                    a = d._compMap.DepthScale_35;
                    null != a && (a.setRatio((d._compMap.TransformComponent_66.position.y -
                        this._minY) / (this._maxY - this._minY)), a.enabled || this._layer.sendToBack(a.owner))
                }
            }
        },
        __class__: kj
    });
    var jg = function() { this.direction = 1;
        this.addHeight = !0 };
    g["stolo.display.DepthSorter"] = jg;
    jg.__name__ = ["stolo", "display", "DepthSorter"];
    jg.prototype = {
        reorder: function(a, b) { for (var c = 0; c < a.length;) { var d = a[c];++c;
                b.addChild(d) } },
        sortByY: function(a) { a.sort(n(this, this.getOrderY)) },
        getOrderY: function(a, b) {
            var c = a._compMap.Sprite_19,
                d = b._compMap.Sprite_19;
            if (null == c) return -1;
            if (null == d) return 1;
            var e = c.y._value,
                f = d.y._value;
            this.addHeight && (e += c.getNaturalHeight(), f += d.getNaturalHeight());
            return e == f ? 0 : e > f ? this.direction : -this.direction
        },
        __class__: jg
    };
    var lj = function() { jg.call(this) };
    g["game.managers.DepthSorterHockey"] = lj;
    lj.__name__ = ["game", "managers", "DepthSorterHockey"];
    lj.__super__ = jg;
    lj.prototype = l(jg.prototype, {
        getOrderY: function(a, b) {
            var c = a._compMap.Sprite_19,
                d = b._compMap.Sprite_19;
            if (null == c) return -1;
            if (null == d) return 1;
            var e = a._compMap.TemplateComponent_47,
                f = b._compMap.TemplateComponent_47;
            if ("super_wall_left" ==
                e.key && ("puck" != f.key || -1 < f.key.indexOf("goalkeeper") || "base_character" != f.parent)) return -1;
            if ("super_wall_left" == f.key && ("puck" == e.key || -1 >= e.key.indexOf("goalkeeper") || "base_character" == e.parent)) return 1;
            e = c.y._value;
            f = d.y._value;
            this.addHeight && (e += c.getNaturalHeight(), f += d.getNaturalHeight());
            return e == f ? 0 : e > f ? this.direction : -this.direction
        },
        __class__: lj
    });
    var Bi = function() {};
    g["game.managers.SneakPeakManager"] = Bi;
    Bi.__name__ = ["game", "managers", "SneakPeakManager"];
    Bi.setSneakPeak = function() {
        var a =
            2;
        m.isTournament && (a = jb.getLvlIndexByName(m.currentLevel), a = Math.floor(a / 2) + 1);
        m.sneakPeak1 = Qa.getSneakPeak(m.currentLevel, a);
        m.sneakPeak2 = Qa.getSneakPeak(m.currentLevel, a)
    };
    var Ff = function() { this._pickups = [];
        this._nextPickupIn = 0;
        this._active = !1;
        this.maxPickups = 1;
        this.range = new Ab(-500, -200, 1E3, 400);
        this.spawnRate = 3;
        k.call(this) };
    g["game.pickups.PickupSystem"] = Ff;
    Ff.__name__ = ["game", "pickups", "PickupSystem"];
    Ff.__super__ = k;
    Ff.prototype = l(k.prototype, {
        get_name: function() { return "PickupSystem_24" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._actors = this.owner._internal_getFromParents("ActorSystem_48")
        },
        onStop: function() { this.deactivate();
            this._actors = null;
            k.prototype.onStop.call(this) },
        onUpdate: function(a) { this._active && (k.prototype.onUpdate.call(this, a), this._pickups.length >= this.maxPickups || (this._nextPickupIn -= a, 0 >= this._nextPickupIn && this.spawnPickup())) },
        activate: function() { this._active = !0;
            this._nextPickupIn = this.spawnRate },
        deactivate: function() { this._active = !1 },
        removePickup: function(a) { N.remove(this._pickups, a) },
        spawnPickup: function() {
            this._pickups.push(this._actors.spawn({
                template: { key: this.getPickupType() },
                transform: { position: { x: this.range.x + Math.random() * this.range.width, y: this.range.y + Math.random() * this.range.height } }
            }));
            this._nextPickupIn = this.spawnRate
        },
        getPickupType: function() { return Ff.pickupTemplates[Math.floor(Math.random() * Ff.pickupTemplates.length)] },
        __class__: Ff
    });
    var mj = function(a) { this._itemCount = this._dashId = this._superId = 0;
        this._camera = a;
        k.call(this) };
    g["game.system.GameHud"] = mj;
    mj.__name__ = ["game", "system", "GameHud"];
    mj.__super__ = k;
    mj.prototype = l(k.prototype, {
        get_name: function() { return "GameHud_17" },
        onAdded: function() { this.pack = D.getPack("ui_hud");
            this.container = new A;
            this.container.add(new s);
            this._disposer = new Ta;
            this.owner.addChild((new A).add(this._disposer));
            this.build() },
        onStart: function() {
            null == this.container.parent && this.owner.addChild(this.container);
            this._logic = this.owner._internal_getFromParents("GameLogic_27");
            this._controls = this.owner._internal_getFromParents("WebControls_16");
            this._disposer.add(this._logic.onScore.connect(n(this, this.onScore)));
            this._disposer.add(this._logic.onScoreComplete.connect(n(this,
                this.onScoreComplete)));
            this._disposer.add(this._logic.onFaceOff.connect(n(this, this.onFaceOff)));
            this._logic.onGameStart.connect(n(this, this.onGameStart)).once()
        },
        onStop: function() { this._pauseButton = this.container = this.pack = null;
            this._disposer.dispose();
            k.prototype.onStop.call(this) },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a) },
        build: function() {
            this._pauseButton = G.createButton(n(this, this.onPauseClick), "btn_pause");
            this._pauseButton.setXY(q.width - 80, 20);
            this.addSprite(this._pauseButton);
            this._darken = new wb(0, q.width, q.height);
            this._darken.set_pointerEnabled(!1);
            this.owner.addChild((new A).add(this._darken));
            this._scorePanel = new nj;
            this._scorePanel.setXY(q.width / 2, 50);
            this.addSprite(this._scorePanel);
            this.indicator = new oj(this._camera);
            this.indicator.setScale(0.8).set_pointerEnabled(!1);
            this.addSprite(this.indicator);
            this.superGauge = new pj;
            this.superGauge.setXY(850, 485).set_pointerEnabled(!0);
            this.addSprite(this.superGauge);
            w._platform.getTouch().get_supported() || (this._disposer.add(this.superGauge.get_pointerDown().connect(n(this,
                this.onSuperDown))), this._disposer.add(this.superGauge.get_pointerUp().connect(n(this, this.onSuperUp))));
            if (o.mobile || Tl.mobileControls) this.joystick = new qj(this.pack), this.joystick.texture_base = "joystick_base", this.joystick.texture_handle = "joystick_handle", this.joystick.startAlpha = 1, this.joystick.returnX = 50, this.joystick.returnY = 450, this.addSprite(this.joystick), this.dashButton = G.createButton(null, "btn_check", null, null, this.pack), this.dashButton.centerAnchor().setXY(900, 425), this.addSprite(this.dashButton),
                this.superGauge.setXY(800, 495 - q.getOffset(70)), this._disposer.add(w._platform.getTouch().down.connect(n(this, this.onTouchDown))), this._disposer.add(w._platform.getTouch().up.connect(n(this, this.onTouchUp)));
            this.buildCallouts();
            this.buildEffect()
        },
        buildEffect: function() { this._effect = M.getTextSprite("title");
            this._effect.setXY(q.width / 2, q.height - 50);
            this.owner.addChild((new A).add(this._effect)) },
        buildCallouts: function() { this.callouts = new rj;
            this.owner.add(this.callouts) },
        onScore: function(a) {
            this.callouts.show(a ?
                sj : tj)
        },
        onScoreComplete: function() { this._darken.alpha.animateTo(1, 0.5, E.quadOut) },
        onGameStart: function() { this._disposer.add(this._logic.playerEntity._compMap.CollectorComponent_4.onCollection.connect(n(this, this.onPickup))) },
        onFaceOff: function(a) { a ? this.callouts.show(uj, 0, { textId: "CALLOUT_3" }) : this.callouts.show(vj, 0, { textId: "CALLOUT_FACEOFF" });
            this._darken.alpha.animateTo(0, 0.5, E.quadIn) },
        onPickup: function(a, b) { this.callouts.show(wj, 0, { textId: "CALLOUT_PICKUP_" + u.string(b._compMap.CollectableComponent_5.data.type.toUpperCase()) }) },
        onPauseClick: function() { C.push("Pause") },
        onSuperDown: function() { this._controls.special = !0 },
        onSuperUp: function() { this._controls.special = !1 },
        onTouchDown: function(a) {
            var b = a.viewX / o.scale,
                c = a.viewY / o.scale;
            this.superGauge.x._value < b + 100 && this.superGauge.x._value > b - 100 && this.superGauge.y._value < c + 100 && this.superGauge.y._value > c - 100 ? (this._superId = a.id, this._controls.special = !0) : this.dashButton.x._value < b + 100 && this.dashButton.x._value > b - 100 && this.dashButton.y._value < c + 100 && this.dashButton.y._value > c - 100 &&
                (this._dashId = a.id, this._controls.action = !0)
        },
        onTouchUp: function(a) { a.id == this._dashId ? (this._dashId = -1, this._controls.action = !1) : a.id == this._superId && (this._superId = -1, this._controls.special = !1) },
        addSprite: function(a, b) { null == b && (b = this.container);
            b.addChild((new A).add(a)); var c = a.owner._compMap.Sprite_19;
            null != c && (c.y._value < q.height / 2 ? Math.random() : Math.random(), c.y.animateTo(c.y._value, 1.5 + 0.2 * this._itemCount, E.elasticOut));
            this._itemCount++; return a },
        __class__: mj
    });
    var sd = function() {
        this.onLevelLoaded =
            new I;
        k.call(this)
    };
    g["stolo.ensys.system.LevelSystem"] = sd;
    sd.__name__ = ["stolo", "ensys", "system", "LevelSystem"];
    sd.__super__ = k;
    sd.prototype = l(k.prototype, {
        get_name: function() { return "LevelSystem_14" },
        onAdded: function() { this._actors = this.owner._compMap.ActorSystem_48;
            this._renderer = this.owner._compMap.RendererSystem_50 },
        onRemoved: function() { k.prototype.onRemoved.call(this);
            this._renderer = this._actors = null },
        load: function(a) { this.build(a.layers, a.actors);
            this.onLevelLoaded.emit(a) },
        build: function(a, b) {
            if (null ==
                a) throw "No layers in level!";
            for (var c = 0; c < a.length;) { var d = a[c];++c;
                this._renderer.addLayer(d) }
            if (null != b)
                for (c = 0; c < b.length;) d = b[c], ++c, null != d.template && (d.template.spawner = 1), this.spawnActor(d)
        },
        spawnActor: function(a) { return this._actors.spawn(a) },
        __class__: sd
    });
    var Zg = function() { this.onLevelReady = new ia;
        sd.call(this) };
    g["game.system.GameLevel"] = Zg;
    Zg.__name__ = ["game", "system", "GameLevel"];
    Zg.__super__ = sd;
    Zg.prototype = l(sd.prototype, {
        onAdded: function() {
            sd.prototype.onAdded.call(this);
            this._system =
                this.owner._compMap.BaseGameSystem_23
        },
        dispose: function() { this._system = null;
            sd.prototype.dispose.call(this) },
        load: function(a) { this.data = a;
            null == lb.defaultShapeFilter && (lb.defaultShapeFilter = { collisionGroup: 2, collisionMask: -1 });
            this.build(a.layers, a.actors);
            this.ice = this._system.actors.getActorsByTemplate("ice_rink")[0]._compMap.IceRink_36; if (this.ice.isReady) this.OnReady();
            else this.ice.onReady.connect(n(this, this.OnReady)).once() },
        OnReady: function() {
            this.spawns = this._system.actors.getActorsByTemplate("spawnPoint");
            this._system.pickups.range = new Ab(-this.ice.width / 2, this.ice.minY, this.ice.width, this.ice.maxY);
            this._system.physics.addContactListener(ma.PRELISTENER, Aa.COLLISION, "PLAYER", "WALL", this.owner, n(this, this.onPreContact));
            this.onLevelReady.emit()
        },
        onPreContact: function(a, b) { b.disableFriction(); return !0 },
        createPlayer: function() {
            if (null == m.currentCharacter) throw "GameData.currentCharacter cannot be null!";
            var a = this._system.actors.getActorsByTemplate("spawnPoint");
            if (null == a || 1 > a.length) throw "No spawn point found!";
            a = Sd.getSpawnWithId(1, a);
            a = this._system.actors.spawn({ template: { key: m.currentCharacter.template, spawner: 1 }, transform: { position: a._compMap.TransformComponent_66.position }, character: { partner: m.currentCharacter.partner }, spine: { boneOverrides: this.getBoneOverrides(m.currentCharacter.template) } });
            null == a._compMap.Player_15 && a.add(new Ug);
            return a
        },
        getBoneOverrides: function() { return [] },
        createPuck: function() { return this._system.actors.spawn({ template: { key: "puck", spawner: 1 }, transform: { position: { x: 0, y: 0 } } }) },
        resetPuck: function(a) { a = a._compMap.PhysicsComponent_42;
            a.resetImpulse();
            a.resetVelocity();
            a.setPosition(0, 0) },
        createOthers: function() {
            for (var a, b = this.owner._compMap.GameLogic_27.playerEntity._compMap.TransformComponent_66.position, c = [m.currentCharacter.partner, m.currentOpponent.template, m.currentOpponent.partner], d = [
                    [], m.sneakPeak1, m.sneakPeak2
                ], e = 0, f = c.length; e < f;) {
                var j = e++;
                if (!(m.singlePlayer && 0 == j) && (Sd.getSpawnWithId(j + 2, this.spawns), a = Sd.getSpawnWithId(j + 2, this.spawns).getComponent("TransformComponent_66").position,
                        a.x != b.x || a.y != b.y)) this.owner._compMap.GameLogic_27.characters.push(this._system.actors.spawn({ template: { key: c[j] }, transform: { position: { x: a.x, y: a.y }, direction: 0 < a.x ? -1 : 1 }, ai: { difficulty: this.data.data.ai.difficulty }, character: { partner: ca.getDataByName(c[j]).partner, isTeam: 0 == j }, gameCustomization: { sneakPeaks: d[j], inventorySave: 0 < j ? null : c[j] }, spine: { boneOverrides: this.getBoneOverrides(c[j]) } }))
            }
        },
        __class__: Zg
    });
    var xj = function() {
        this._inTeamGoal = this._updateTime = this._interupted = this._tracked = !1;
        this.onPuckReady =
            new I;
        this.onFaceOff = new I;
        this.onGameStart = new ia;
        this.onScoreComplete = new ia;
        this.onScore = new I;
        this.characters = [];
        this.gameTime = 0;
        this.isStarted = !1;
        k.call(this)
    };
    g["game.system.GameLogic"] = xj;
    xj.__name__ = ["game", "system", "GameLogic"];
    xj.__super__ = k;
    xj.prototype = l(k.prototype, {
        get_name: function() { return "GameLogic_27" },
        onAdded: function() { k.prototype.onAdded.call(this);
            this._disposer = this.owner._compMap.Disposer_68;
            this._system = this.owner._compMap.BaseGameSystem_23;
            this._level = this._system.level },
        onRemoved: function() { this._tracked || ba.trackMatchSummary(this.playerEntity._compMap.CustomizationComponent_6.inventory, this.gameTime - m.gameTime);
            k.prototype.onRemoved.call(this) },
        dispose: function() { null != this._skatingLoop && this._skatingLoop.dispose();
            this._level = this._system = this._disposer = this._skatingLoop = null;
            k.prototype.dispose.call(this) },
        onUpdate: function(a) {
            this.isStarted && !this._interupted && (this._updateTime && (m.gameTime -= a), 0 >= m.gameTime && this.end(m.teamScore >= m.opponentScore), k.prototype.onUpdate.call(this,
                a))
        },
        onStart: function() { this.isStarted || (this._camera = this._system.camera, this._level.onLevelReady.connect(n(this, this.onLevelReady)), this._level.load(jb.get(m.currentLevel))) },
        onLevelReady: function() { this.startGame() },
        interupt: function() {
            this._interupted = !0;
            for (var a = 0, b = this.characters; a < b.length;) { var c = b[a];++a;
                c._compMap.Character_30.stop();
                c._compMap.SuperMove_31.enable(!1);
                null != c._compMap.CharacterAI_10 && c._compMap.CharacterAI_10.enable(!1) } this.puck._compMap.PhysicsComponent_42.enable(!1);
            this._system.controls.disable()
        },
        resume: function() { this._interupted = !1;
            this._system.controls.enable();
            this.puck._compMap.PhysicsComponent_42.enable(!0); for (var a = 0, b = this.characters; a < b.length;) { var c = b[a];++a;
                c._compMap.SuperMove_31.enable(!0);
                null != c._compMap.CharacterAI_10 && c._compMap.CharacterAI_10.enable(!0) } },
        end: function(a) {
            this.isStarted && (this.isStarted = !1, m.hasWon = a, m.isTournament && a && (a = jb.getLvlIndexByName(m.currentLevel), a < jb.LIST.length - 1 && m.game.unlockLevel(m.currentCharacter.name,
                jb.LIST[a + 1])), this._system.setSpeed(0, 0.5), F.delayCallTo(n(this, this.onEndComplete), 0.5, this.owner.parent))
        },
        onEndComplete: function() { this._tracked = !0;
            ba.trackMatchSummary(this.playerEntity._compMap.CustomizationComponent_6.inventory, this.gameTime - m.gameTime);
            C.change("Win") },
        setPlayer: function(a) { this.player = a; if (null == a || a.isReady) this.onPlayerReady();
            else if (null != a) a.onReady.connect(n(this, this.onPlayerReady)).once();
            this.characters.push(this.playerEntity) },
        score: function(a) {
            (this._inTeamGoal =
                a) ? (m.opponentScore++, v.play("score_bad", "SCORE", 0.9)) : (m.teamScore++, a = "_goal" + (Math.floor(2 * Math.random()) + 1), m.config.vo && v.play(m.currentCharacter.name + a, "VO"), v.play("score_good", "SCORE", 0.9), this._system.tutorial.isActive && this._system.tutorial.currentStepId == ab.GOAL && this._system.tutorial.showNextStep());
            this.interupt();
            this.deactivateCharacters();
            this._camera.centerForGoal(this._inTeamGoal, 0.5, 0, -200);
            this._camera.followPuck = !1;
            this._system.pickups.deactivate();
            this.onScore.emit(this._inTeamGoal);
            this._updateTime = !1;
            null != this._skatingLoop && this._skatingLoop.dispose()
        },
        scoreDone: function() { var a = this;
            F.delayCallTo(function() { m.teamScore == q.pointsToFinishGame ? a.end(!0) : m.opponentScore == q.pointsToFinishGame ? a.end(!1) : (a.onScoreComplete.emit(), a._system.setSpeed(0, 1), F.delayCallTo(n(a, a.resetGame), 1, a.owner.parent)) }, 1, this.owner.parent) },
        onPlayerReady: function() { null != this.player && this._system.actors.setActorId(this.player.owner, "player") },
        startGame: function() {
            m.teamScore = 0;
            m.opponentScore =
                0;
            this.gameTime = m.gameTime = this._level.data.data.duration;
            null != this._level.data.data.scoreTarget && (q.pointsToFinishGame = this._level.data.data.scoreTarget);
            m.checks = 0;
            m.checked = 0;
            m.superUsed = 0;
            this.playerEntity = this._level.createPlayer();
            this.setPlayer(this.playerEntity._compMap.Player_15);
            this.puck = this._level.createPuck();
            this.onPuckReady.emit(this.puck);
            this._level.createOthers();
            this.isStarted = !0;
            this.faceoff(!0);
            this.onGameStart.emit();
            this.interupt();
            this._skatingLoop = v.play("skating_loop",
                "AMBIANCE", 1.25, !0);
            this._tracked = !1;
            var a = this.playerEntity._compMap.CustomizationComponent_6;
            if (a.isLoaded) this.onInventoryReady();
            else a.onInventoryReady.connect(n(this, this.onInventoryReady)).once()
        },
        onInventoryReady: function() { ba.trackMatchStarted(this.playerEntity._compMap.CustomizationComponent_6.inventory) },
        resetGame: function() {
            if (this.isStarted || null == this._level) {
                this._level.resetPuck(this.puck);
                this._system.setSpeed(1);
                this._camera.centerForFaceoff();
                this._camera.followPuck = !0;
                for (var a,
                        b = 0, c = this.characters.length; b < c;) {
                    var d = b++;
                    a = this.characters[d];
                    var e = d + 1;
                    m.singlePlayer && e++;
                    var d = a._compMap.PhysicsComponent_42,
                        f = a._compMap.TransformComponent_66;
                    Sd.getSpawnWithId(e, this._level.spawns);
                    e = Sd.getSpawnWithId(e, this._level.spawns).getComponent("TransformComponent_66");
                    d.resetImpulse();
                    d.resetVelocity();
                    d.setPosition(e.position.x, e.position.y);
                    f.direction = 0 < e.position.x ? -1 : 1;
                    U.__cast(a._compMap.Sprite_19, bf).play("slide");
                    a._compMap.Character_30.recover();
                    a._compMap.CharacterState_29.changeState(ra.SLIDE, { force: !0 })
                }
                a = 0;
                for (b = this._system.actors.getActorsByComponent(Mb); a < b.length;) c = b[a], ++a, c = c._compMap.Goalkeeper_28, c.isTeam == this._inTeamGoal && c.reset();
                this.faceoff()
            }
        },
        faceoff: function(a) { null == a && (a = !1); var b = this;
            this._updateTime = !0;
            this.onFaceOff.emit(a);
            F.delayCallTo(function() { b._system.pickups.activate();
                b.activateCharacters();
                b.resume();
                a && b._system.tutorial.showStep(0) }, a ? 4.5 : 1.5, this.owner.parent) },
        activateCharacters: function() {
            for (var a = 0, b = this.characters; a < b.length;) {
                var c = b[a];
                ++a;
                null != c._compMap.CharacterAI_10 && c._compMap.CharacterAI_10.enable(!0);
                c._compMap.Character_30.enable(!0)
            }
        },
        deactivateCharacters: function() { for (var a = 0, b = this.characters; a < b.length;) { var c = b[a];++a;
                c._compMap.Character_30.enable(!1);
                null != c._compMap.CharacterAI_10 && c._compMap.CharacterAI_10.enable(!1);
                c._compMap.CharacterState_29.changeState(ra.SLIDE, { force: !0 }) } },
        __class__: xj
    });
    var qc = function(a) { this._disposer = new Ta;
        this.onInitComplete = new ia;
        k.call(this);
        this.dimensions = a };
    g["stolo.ensys.system.BaseGameSystem"] =
        qc;
    qc.__name__ = ["stolo", "ensys", "system", "BaseGameSystem"];
    qc.__super__ = k;
    qc.prototype = l(k.prototype, {
        get_name: function() { return "BaseGameSystem_23" },
        dispose: function() { k.prototype.dispose.call(this);
            null != this.parallelEntity && (this.parallelEntity.dispose(), this.parallelEntity = null);
            this.level = this.camera = this.culling = this.physics = this.sound = this.actors = this.renderer = this.parallelScript = this._speedAdjuster = this._disposer = null },
        onAdded: function() {
            k.prototype.onAdded.call(this);
            this.owner.add(this._disposer);
            this.parallelEntity = new A;
            this.parallelScript = new Bd;
            this.parallelEntity.add(this.parallelScript);
            this._speedAdjuster = new Yf;
            this.owner.add(this._speedAdjuster);
            this.buildSubSystems();
            this.init()
        },
        onStart: function() { k.prototype.onStart.call(this);
            null != this.owner.parent ? this.owner.parent.addChild(this.parallelEntity) : w.root.addChild(this.parallelEntity) },
        buildSubSystems: function() { this.buildRenderer();
            this.buildCamera();
            this.buildActors();
            this.buildPhysics();
            this.buildSound();
            this.buildLevel() },
        buildRenderer: function() {
            this.renderer =
                new yj(this.dimensions);
            this.culling = new zj(this.renderer, this.dimensions);
            this.owner.add(this.renderer);
            this.owner.add(this.culling)
        },
        buildCamera: function() { this.camera = new nc;
            this.owner.add(this.camera) },
        buildActors: function() { this.actors = new Gf;
            this.owner.add(this.actors) },
        buildPhysics: function() { this.physics = new he;
            this.owner.add(this.physics) },
        buildSound: function() { this.sound = new Aj;
            this.owner.add(this.sound) },
        buildLevel: function() { this.level = new sd;
            this.owner.add(this.level) },
        init: function() { this.onInitComplete.emit() },
        setSpeed: function(a, b, c) { null == b && (b = 0.2);
            0 >= b ? (this._speedAdjuster.scale.set__(a), this._speedAdjuster.scale.set_behavior(null)) : this._speedAdjuster.scale.animateTo(a, b, c) },
        __class__: qc
    });
    var Qg = function() { var a = new Ab(0, 0, q.width, q.height);
        qc.call(this, a) };
    g["game.system.GameSystem"] = Qg;
    Qg.__name__ = ["game", "system", "GameSystem"];
    Qg.__super__ = qc;
    Qg.prototype = l(qc.prototype, {
        onAdded: function() { qc.prototype.onAdded.call(this) },
        dispose: function() {
            qc.prototype.dispose.call(this);
            this.touchControls = this.controls =
                this.logic = this.hud = null
        },
        buildSubSystems: function() { qc.prototype.buildSubSystems.call(this);
            this.buildHud();
            this.buildControls();
            this.buildTutorial();
            this.buildLogic();
            this.buildPickups() },
        buildRenderer: function() { qc.prototype.buildRenderer.call(this);
            this.renderer.getContainer().add(new kj) },
        buildCamera: function() { this.camera = new Li;
            this.owner.add(this.camera);
            this.camera.configure({ linearDampingX: 0.05 });
            this.camera.centerRenderer() },
        buildPhysics: function() {
            qc.prototype.buildPhysics.call(this);
            Ef.init();
            this.physics.setGravity(0, 0)
        },
        buildLevel: function() { this.level = new Zg;
            this.owner.add(this.level) },
        buildHud: function() { this.hud = new mj(this.camera.get_camera());
            this.owner.add(this.hud) },
        buildControls: function() { var a = o.mobile;
            Tl.mobileControls && (a = !0);
            this.controls = a ? this.touchControls = new Bj : new rc;
            this.owner.add(this.controls) },
        buildLogic: function() { this.logic = new xj;
            this.owner.add(this.logic) },
        buildPickups: function() { this.pickups = new Ff;
            this.owner.add(this.pickups) },
        buildTutorial: function() {
            this.tutorial =
                new ab(this.hud.container);
            this.owner.add(this.tutorial)
        },
        __class__: Qg
    });
    var rc = function() { this._disposer = new Ta;
        this.down = this.move = this.action = this.special = this._enabled = !1;
        this.originX = this.originY = this.targetX = this.targetY = this.angle = 0;
        k.call(this) };
    g["game.system.WebControls"] = rc;
    rc.__name__ = ["game", "system", "WebControls"];
    rc.__super__ = k;
    rc.prototype = l(k.prototype, {
        get_name: function() { return "WebControls_16" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this.owner.addChild((new A).add(this._disposer));
            this._hud = U.__cast(this.owner._compMap.BaseGameSystem_23, Qg).hud;
            this.set_enabled(!0);
            this._disposer.add(w._platform.getKeyboard().down.connect(n(this, this.onKeyDown)));
            this._disposer.add(w._platform.getKeyboard().up.connect(n(this, this.onKeyUp)));
            w._platform.getTouch().get_supported() || (this._disposer.add(w._platform.getPointer().down.connect(n(this, this.onPointerDown))), this._disposer.add(w._platform.getPointer().move.connect(n(this, this.onPointerMove))), this._disposer.add(w._platform.getPointer().up.connect(n(this,
                this.onPointerUp))))
        },
        onRemoved: function() { this.set_enabled(!1) },
        dispose: function() { this._disposer.dispose();
            this.set_enabled(!1);
            this._disposer = this._hud = null;
            k.prototype.dispose.call(this) },
        onUpdate: function(a) { this._enabled && (this.updateKeyboard(), k.prototype.onUpdate.call(this, a)) },
        enable: function() { this.set_enabled(!0) },
        disable: function() { this.set_enabled(!1) },
        updateKeyboard: function() {
            var a = w._platform.getKeyboard();
            a.isDown(i.Down) && a.isDown(i.Right) ? this.angle = 45 : a.isDown(i.Down) && a.isDown(i.Left) ?
                this.angle = 135 : a.isDown(i.Up) && a.isDown(i.Right) ? this.angle = -45 : a.isDown(i.Up) && a.isDown(i.Left) ? this.angle = -135 : a.isDown(i.Down) ? this.angle = 90 : a.isDown(i.Up) ? this.angle = -90 : a.isDown(i.Right) ? this.angle = 0 : a.isDown(i.Left) && (this.angle = 180)
        },
        onKeyDown: function(a) { a.key == i.Space && (this.action = !0);
            a.key == i.Z && (this.special = !0); if (a.key == i.Up || a.key == i.Down || a.key == i.Left || a.key == i.Right) this.move = !0 },
        onKeyUp: function(a) {
            a.key == i.Space && (this.action = !1);
            a.key == i.Z && (this.special = !1);
            a = w._platform.getKeyboard();
            !a.isDown(i.Up) && !a.isDown(i.Down) && !a.isDown(i.Left) && !a.isDown(i.Right) && (this.move = !1)
        },
        onPointerDown: function(a) { this.originX = a.viewX;
            this.originY = a.viewY;
            this.down = !0;
            this.onPointerMove(a) },
        onPointerMove: function(a) { this.down && (this.originX = a.viewX, this.originY = a.viewY) },
        onPointerUp: function() { this.originY = this.originX = 0;
            this.down = !1 },
        get_enabled: function() { return this._enabled },
        set_enabled: function(a) {
            if (a == this._enabled) return this._enabled;
            this._enabled = a;
            this._enabled || (this.targetY = this.targetX =
                0, this.special = this.action = !1);
            return this._enabled
        },
        __class__: rc,
        __properties__: l(k.prototype.__properties__, { set_enabled: "set_enabled", get_enabled: "get_enabled" })
    });
    var Bj = function() { rc.call(this) };
    g["game.system.TouchControls"] = Bj;
    Bj.__name__ = ["game", "system", "TouchControls"];
    Bj.__super__ = rc;
    Bj.prototype = l(rc.prototype, {
        onStart: function() { rc.prototype.onStart.call(this);
            this.buildTouchControls() },
        onStop: function() { rc.prototype.onStop.call(this) },
        dispose: function() { rc.prototype.dispose.call(this) },
        onUpdate: function(a) { this._enabled && (this.move = this._hud.joystick.isActive, rc.prototype.onUpdate.call(this, a), this.angle = this._hud.joystick.angle) },
        buildTouchControls: function() {},
        __class__: Bj
    });
    var ab = function(a) { this._timeLeft = -1;
        this._steps = [];
        this._disposer = new Ta;
        this.currentStepId = -1;
        this.isActive = !1;
        this._container = a;
        k.call(this) };
    g["game.tutorial.TutorialManager"] = ab;
    ab.__name__ = ["game", "tutorial", "TutorialManager"];
    ab.__super__ = k;
    ab.prototype = l(k.prototype, {
        get_name: function() { return "TutorialManager_32" },
        onAdded: function() { k.prototype.onAdded.call(this);
            m.game.tutoDone || this.initSteps() },
        onStop: function() { k.prototype.onStop.call(this) },
        onUpdate: function(a) { this.isActive && 0 < this._timeLeft && (this._timeLeft -= a, 0 >= this._timeLeft && this.showNextStep()) },
        initSteps: function() {
            this.isActive = !0;
            var a;
            o.mobile ? (a = new ie(ab.MOVE, "move_mobile_textbox", "HTP_TEXT_1_M"), a.images = [{ asset: "arrow_left", x: 200, y: -100 }, { asset: "arrow_right", x: 400, y: -100 }], a.setXY(160, 415)) : (a = new ie(ab.MOVE, "move_desktop_textbox", "HTP_TEXT_1"),
                a.images = [{ asset: "arrow_left", x: 200, y: -100 }, { asset: "arrow_right", x: 400, y: -100 }], a.textWidth = 0.5, a.textOffsetX = 125, a.setXY(50, 440));
            this._steps.push(a);
            o.mobile ? (a = new ie(ab.CHECK, "check_mobile_textbox", "HTP_TEXT_5_M"), a.setXY(490, 380)) : (a = new ie(ab.CHECK, "check_desktop_textbox", "HTP_TEXT_5"), a.setXY(50, 440));
            this._steps.push(a);
            a = new ie(ab.GOAL, "score_textbox", "HTP_TEXT_3");
            a.images = [{ asset: "arrow_right", x: q.width - 150, y: (q.height / 2 | 0) - 440 }];
            a.setXY(50, 440);
            this._steps.push(a);
            o.mobile ? (a = new ie(ab.SUPERMOVE,
                "supermove_mobile_textbox", "HTP_TEXT_6_M"), a.textOffsetY = -8, a.setXY(425, 340)) : (a = new ie(ab.SUPERMOVE, "supermove_desktop_textbox", "HTP_TEXT_6"), a.textOffsetY = -8, a.textWidth = 0.62, a.textOffsetX = 75, a.setXY(500, 280));
            this._steps.push(a)
        },
        showStep: function(a) {
            this.isActive && (this.currentStepId = a, this._currentStep = this._steps[a], null != this._currentStep ? (this.currentStepId == ab.SUPERMOVE && (a = this.owner._internal_getFromParents("GameLogic_27").playerEntity._compMap.SuperMove_31, a.current = a.charge - 1), this._disposer.add(this._currentStep.onDone.connect(n(this,
                this.showNextStep))), this._container.addChild((new A).add(this._currentStep))) : this.tutorialDone())
        },
        showNextStep: function() { this.completeStep();
            this.showStep(++this.currentStepId);
            this._timeLeft = ab.tutoDuration },
        completeStep: function() { this._disposer.dispose();
            this._container.removeChild(this._currentStep.owner);
            this._currentStep.dispose();
            this._currentStep = null },
        tutorialDone: function() { this.isActive = !1;
            m.game.tutoDone = !0;
            m.game.save() },
        __class__: ab
    });
    var ie = function(a, b, c) {
        this._addedEntities = [];
        this.duration = -1;
        this.images = [];
        this.textOffsetY = 0;
        this.textOffsetX = 25;
        this.textWidth = 0.75;
        this.bgAsset = this.textId = "";
        this.step = 0;
        this.onDone = new ia;
        this.step = a;
        this.bgAsset = b;
        this.textId = c;
        s.call(this)
    };
    g["game.tutorial.TutorialStep"] = ie;
    ie.__name__ = ["game", "tutorial", "TutorialStep"];
    ie.__super__ = s;
    ie.prototype = l(s.prototype, {
        onStart: function() {
            s.prototype.onStart.call(this);
            this._pack = D.getPack(o.mobile ? "htp_mobile" : "htp");
            var a = G.createImage(this.bgAsset, this._pack);
            this.owner.addChild((new A).add(a));
            var b = G.createText(this.textId, "16_white", this.owner);
            b.setWrapWidth(a.getNaturalWidth() * this.textWidth);
            b.setXY(25 + this.textOffsetX, a.getNaturalHeight() / 2 - b.getNaturalHeight() / 2 + this.textOffsetY);
            a = 0;
            for (b = this.images; a < b.length;) { var c = b[a];++a;
                this.spawnImage(c) }
        },
        onUpdate: function(a) { s.prototype.onUpdate.call(this, a); - 1 != this.duration && (this.duration -= a, 0 >= this.duration && this.onDone.emit()) },
        onRemoved: function() { for (var a = 0, b = this._addedEntities; a < b.length;) { var c = b[a];++a;
                null != c.parent && c.parent.removeChild(c) } s.prototype.onRemoved.call(this) },
        spawnImage: function(a) { if (null == a.target) this.spawnInTuto(a);
            else { var b = this.owner._internal_getFromParents("ActorSystem_48");
                this.spawnOnComponent(a, b.getActorsByComponent(a.target)) } },
        spawnOnComponent: function(a, b) { for (var c = 0; c < b.length;) { var d = b[c];++c; var e = new A;
                d.addChild(e);
                d = G.createImage(a.asset, this._pack);
                d.centerAnchor().setXY(a.x, a.y);
                e.add(d);
                this._addedEntities.push(e) } },
        spawnInTuto: function(a) {
            var b = new A;
            this.owner.addChild(b);
            var c = G.createImage(a.asset, this._pack);
            c.centerAnchor().setXY(a.x,
                a.y);
            b.add(c);
            this._addedEntities.push(b)
        },
        __class__: ie
    });
    var Cf = function(a) { this._width = 100;
        this.delay = 1;
        this.animTime = 1.5;
        this._width = a;
        s.call(this) };
    g["game.ui.ButtonShine"] = Cf;
    Cf.__name__ = ["game", "ui", "ButtonShine"];
    Cf.__super__ = s;
    Cf.prototype = l(s.prototype, {
        onStart: function() { s.prototype.onStart.call(this);
            this._shine = new V(D.getPack("ui").getTexture("shine"));
            this.owner.addChild((new A).add(this._shine));
            this.scissor = new Ab(8, 5, this._width - 13, this._shine.getNaturalHeight());
            this.move() },
        move: function() {
            this._shine.x.set__(-this._shine.getNaturalWidth());
            this._shine.x.animateTo(this._width, this.animTime, E.quadInOut);
            F.delayCallTo(n(this, this.move), this.animTime + this.delay, this.owner)
        },
        __class__: Cf
    });
    var fg = function() { this.speed = 120; var a = D.getPack("ui").getTexture("loading");
        V.call(this, a);
        this.centerAnchor() };
    g["game.ui.LoadingIcon"] = fg;
    fg.__name__ = ["game", "ui", "LoadingIcon"];
    fg.__super__ = V;
    fg.prototype = l(V.prototype, {
        onUpdate: function(a) { if (0 != (this._flags & 2)) { V.prototype.onUpdate.call(this, a); var b = this.rotation;
                b.set__(b._value + this.speed * a) } },
        __class__: fg
    });
    var Hi = function() { this.bgAlpha = 0.7;
        s.call(this) };
    g["game.ui.QuitPopup"] = Hi;
    Hi.__name__ = ["game", "ui", "QuitPopup"];
    Hi.__super__ = s;
    Hi.prototype = l(s.prototype, {
        onStart: function() {
            s.prototype.onStart.call(this);
            this._bg = new wb(0, q.width, q.height);
            this._bg.setAlpha(this.bgAlpha);
            this.owner.addChild((new A).add(this._bg));
            var a = G.createImage("popup_box"),
                b = q.width / 2,
                c = q.height / 2;
            a.getNaturalWidth();
            a.getNaturalHeight();
            a.setXY(b, c).centerAnchor();
            this.owner.addChild((new A).add(a));
            a = G.createText("POPUP_QUIT",
                "23_white", this.owner);
            a.setWrapWidth(350);
            a.setXY(b - 175, c - 75);
            b = Hf.createTextImageButton("btn_pink", "BTN_NO", "23_white", n(this, this.onCancel), "ui");
            b.setXY(402, 321);
            c = b.owner._compMap.ButtonText_103.textSprite.y;
            c.set__(c._value - 3);
            this.owner.addChild(b.owner);
            b = Hf.createTextImageButton("btn_green", "BTN_YES", "23_white", n(this, this.onQuit), "ui");
            b.setXY(560, 321);
            c = b.owner._compMap.ButtonText_103.textSprite.y;
            c.set__(c._value - 3);
            this.owner.addChild(b.owner);
            F.from(this._bg, { alpha: 0 }, {
                time: 1.5,
                ease: E.quintOut,
                delay: 0
            })
        },
        onCancel: function() { ba.trackUI("Cancel", "Quit Popup");
            v.play("ui_click", "UI");
            this.owner.parent.removeChild(this.owner) },
        onQuit: function() { ba.trackUI("Quit", "Quit Popup");
            v.play("ui_click", "UI");
            C.change("SelectCharacter") },
        __class__: Hi
    });
    var Dd = function() { this._powerIcons = [];
        this._superRateIcons = [];
        this._speedIcons = [];
        this.addedPower = this.addedSpeed = this.addedSuperRate = 0;
        this.basePower = this.baseSpeed = this.baseSuperRate = 1;
        s.call(this) };
    g["game.ui.StatBox"] = Dd;
    Dd.__name__ = ["game", "ui", "StatBox"];
    Dd.__super__ = s;
    Dd.prototype = l(s.prototype, {
        onAdded: function() {
            s.prototype.onAdded.call(this);
            this._pack = D.getPack("ui");
            G.createText("SPEED", "16_white", this.owner).setAlign(Z.Left).setXY(0, 0);
            for (var a = 0, b = Dd.NB_STAT; a < b;) { var c = a++;
                this._speedIcons.push(this.createIcon(this.getTexture(c, this.baseSpeed, this.addedSpeed), 20 * c + 10, 30)) } G.createText("SUPER", "16_white", this.owner).setAlign(Z.Left).setXY(0, 45);
            a = 0;
            for (b = Dd.NB_STAT; a < b;) c = a++, this._superRateIcons.push(this.createIcon(this.getTexture(c, this.baseSuperRate,
                this.addedSuperRate), 20 * c + 10, 75));
            G.createText("POWER", "16_white", this.owner).setAlign(Z.Left).setXY(0, 90);
            a = 0;
            for (b = Dd.NB_STAT; a < b;) c = a++, this._powerIcons.push(this.createIcon(this.getTexture(c, this.basePower, this.addedPower), 20 * c + 10, 120))
        },
        onStop: function() { this._powerIcons = this._superRateIcons = this._speedIcons = this._pack = null;
            s.prototype.onStop.call(this) },
        update: function() {
            for (var a = 0, b = Dd.NB_STAT; a < b;) { var c = a++;
                this._speedIcons[c].texture = this.getTexture(c, this.baseSpeed, this.addedSpeed) } a =
                0;
            for (b = Dd.NB_STAT; a < b;) c = a++, this._superRateIcons[c].texture = this.getTexture(c, this.baseSuperRate, this.addedSuperRate);
            a = 0;
            for (b = Dd.NB_STAT; a < b;) c = a++, this._powerIcons[c].texture = this.getTexture(c, this.basePower, this.addedPower)
        },
        getTexture: function(a, b, c) { var d = "stat_"; return G.getTexture(a < b ? d + "red" : a < b + c ? d + "green" : d + "grey", this._pack) },
        createIcon: function(a, b, c) { a = new V(a);
            a.centerAnchor().setXY(b, c);
            this.owner.addChild((new A).add(a)); return a },
        __class__: Dd
    });
    var oa = function() {
        this.hideDelay =
            1;
        this.complete = new I;
        s.call(this)
    };
    g["game.ui.callouts.BaseCallout"] = oa;
    oa.__name__ = ["game", "ui", "callouts", "BaseCallout"];
    oa.__super__ = s;
    oa.prototype = l(s.prototype, {
        onAdded: function() { s.prototype.onAdded.call(this);
            null == this._pack && (this._pack = D.getPack("ui_callouts"));
            this.build() },
        build: function() { this._animation = new Cj;
            this.owner.add(this._animation) },
        show: function(a, b) {
            this.set_visible(!0);
            if (!this._animation.isShowing) {
                var c = this.getShowSequence(b);
                c.onComplete.connect(n(this, this.showComplete)).once();
                this._animation.show(c, a)
            }
        },
        getShowSequence: function() { var a = this; return (new Zb).addActions([new Db(function() { td.scaleIn(a) }), new kc(0.3), new Db(function() { td.shake(a) })]) },
        showComplete: function() { this.hide(this.hideDelay) },
        hide: function(a, b) { null == a && (a = 0); if (!this._animation.isHiding) { var c = this.getHideSequence(b);
                c.onComplete.connect(n(this, this.hideComplete)).once();
                this._animation.hide(c, a) } },
        getHideSequence: function() {
            var a = this;
            return (new Zb).addActions([new Db(function() { td.scaleOut(a) }),
                new kc(0.7)
            ])
        },
        hideComplete: function() { this.set_visible(!1);
            this.complete.emit(this) },
        dispose: function() { s.prototype.dispose.call(this) },
        createText: function(a, b, c) { a = M.getLocalizedTextSprite(a, b, null, null, c);
            a.centerAnchor();
            a.disablePointer();
            this.addSprite(a); return a },
        createImage: function(a) { a = G.createImage(a, this._pack);
            this.addSprite(a);
            a.centerAnchor();
            a.disablePointer(); return a },
        addSprite: function(a) { null == a.owner && (new A).add(a);
            this.owner.addChild(a.owner); return a },
        __class__: oa
    });
    var rj =
        function() { this._calloutMap = new K;
            k.call(this) };
    g["game.ui.callouts.Callouts"] = rj;
    rj.__name__ = ["game", "ui", "callouts", "Callouts"];
    rj.__super__ = k;
    rj.prototype = l(k.prototype, {
        get_name: function() { return "Callouts_18" },
        dispose: function() { k.prototype.dispose.call(this); for (var a = this._calloutMap.iterator(); a.hasNext();) { var b = a.next();
                null != b.owner ? b.owner.dispose() : b.dispose() } this._currentCallout = this._calloutMap = null },
        show: function(a, b, c) {
            null == b && (b = 0);
            if (null == this._calloutMap) return null;
            var d = Y.getClassName(a);
            if (Y.getClass(this._currentCallout) == a && !(null == c || c.force)) return this._currentCallout;
            null != this._currentCallout && this._currentCallout.hide();
            this._calloutMap.exists(d) ? this._currentCallout = this._calloutMap.get(d) : (a = this._currentCallout = Y.createInstance(a, []), this._calloutMap.set(d, a), a);
            null == this._currentCallout.owner && (new A).add(this._currentCallout);
            this.owner.addChild(this._currentCallout.owner);
            this._currentCallout.setXY(0.5 * w._platform.getStage().get_width(), 0.5 * w._platform.getStage().get_height());
            this._currentCallout.complete.connect(n(this, this.onCalloutComplete)).once();
            this._currentCallout.show(b, c);
            return this._currentCallout
        },
        onCalloutComplete: function(a) { null != a.owner && null != a.owner.parent && a.owner.parent.removeChild(this.owner);
            this._currentCallout == a && (this._currentCallout = null) },
        __class__: rj
    });
    var uj = function() { oa.call(this) };
    g["game.ui.callouts.CountdownCallout"] = uj;
    uj.__name__ = ["game", "ui", "callouts", "CountdownCallout"];
    uj.__super__ = oa;
    uj.prototype = l(oa.prototype, {
        build: function() {
            oa.prototype.build.call(this);
            var a = this.createImage("callout"),
                b = a.x;
            b.set__(b._value + 20);
            b = a.y;
            b.set__(b._value + 150);
            this._txt = this.createText("CALLOUT_FACEOFF", "90_blue");
            this._txt.setXY(50, 150);
            a.setScale(Math.min(1, 2 * (this._txt.getNaturalWidth() / a.getNaturalWidth())))
        },
        show: function(a, b) { this._txt.setText(b.textId);
            oa.prototype.show.call(this, a, b) },
        getShowSequence: function() {
            var a = this;
            return (new Zb).addActions([new Db(function() { td.scaleIn(a) }), new kc(1), new Db(function() { a._txt.setText("CALLOUT_2");
                    td.scaleIn(a) }), new kc(1),
                new Db(function() { a._txt.setText("CALLOUT_1");
                    td.scaleIn(a) }), new kc(1), new Db(function() { a._txt.setText("CALLOUT_FACEOFF");
                    td.shake(a);
                    td.scaleIn(a) })
            ])
        },
        __class__: uj
    });
    var vj = function() { oa.call(this) };
    g["game.ui.callouts.GoCallout"] = vj;
    vj.__name__ = ["game", "ui", "callouts", "GoCallout"];
    vj.__super__ = oa;
    vj.prototype = l(oa.prototype, {
        build: function() {
            oa.prototype.build.call(this);
            var a = this.createImage("callout"),
                b = a.x;
            b.set__(b._value + 20);
            b = a.y;
            b.set__(b._value + 150);
            this._txt = this.createText("CALLOUT_FACEOFF",
                "90_blue");
            this._txt.setXY(50, 150);
            a.setScale(Math.min(1, 2 * (this._txt.getNaturalWidth() / a.getNaturalWidth())))
        },
        show: function(a, b) { this._txt.setText(b.textId);
            oa.prototype.show.call(this, a, b) },
        __class__: vj
    });
    var sj = function() { oa.call(this) };
    g["game.ui.callouts.OhNoCallout"] = sj;
    sj.__name__ = ["game", "ui", "callouts", "OhNoCallout"];
    sj.__super__ = oa;
    sj.prototype = l(oa.prototype, {
        build: function() {
            oa.prototype.build.call(this);
            var a = this.createImage("callout"),
                b = a.x;
            b.set__(b._value + 20);
            var b = this.createText("CALLOUT_OHNO",
                    "90_blue"),
                c = b.x;
            c.set__(c._value + b.getNaturalWidth() / 2);
            a.setScale(Math.min(1, 2 * (b.getNaturalWidth() / a.getNaturalWidth())))
        },
        __class__: sj
    });
    var wj = function() { oa.call(this) };
    g["game.ui.callouts.PickupCallout"] = wj;
    wj.__name__ = ["game", "ui", "callouts", "PickupCallout"];
    wj.__super__ = oa;
    wj.prototype = l(oa.prototype, {
        build: function() {
            oa.prototype.build.call(this);
            var a = this.createImage("callout"),
                b = a.x;
            b.set__(b._value + 20);
            b = a.y;
            b.set__(b._value + 150);
            this._txt = this.createText("", "90_blue");
            this._txt.setScale(0.7).setXY(50,
                150);
            a.setScale(Math.min(1, 2 * (this._txt.getNaturalWidth() / a.getNaturalWidth())))
        },
        show: function(a, b) { this._txt.setText(b.textId);
            oa.prototype.show.call(this, a, b) },
        __class__: wj
    });
    var tj = function() { oa.call(this) };
    g["game.ui.callouts.ScoreCallout"] = tj;
    tj.__name__ = ["game", "ui", "callouts", "ScoreCallout"];
    tj.__super__ = oa;
    tj.prototype = l(oa.prototype, {
        build: function() {
            oa.prototype.build.call(this);
            var a = this.createImage("callout"),
                b = a.x;
            b.set__(b._value + 20);
            var b = this.createText("CALLOUT_SCORE", "90_blue"),
                c = b.x;
            c.set__(c._value + b.getNaturalWidth() / 2);
            a.setScale(Math.min(1, 2 * (b.getNaturalWidth() / a.getNaturalWidth())))
        },
        __class__: tj
    });
    var oj = function(a) { this._enabled = !0;
        this._camera = a;
        s.call(this) };
    g["game.ui.hud.PuckIndicator"] = oj;
    oj.__name__ = ["game", "ui", "hud", "PuckIndicator"];
    oj.__super__ = s;
    oj.prototype = l(s.prototype, {
        onStart: function() {
            s.prototype.onStart.call(this);
            var a = D.getPack("ui_hud");
            this._indicator = G.createImage("puck_indicator", a);
            this._indicator.setAnchor(62, 48);
            this.owner.addChild((new A).add(this._indicator));
            a = G.createImage("puck_icon", a);
            a.centerAnchor();
            this.owner.addChild((new A).add(a));
            a = this.owner._internal_getFromParents("GameLogic_27");
            if (null == a.puck) a.onPuckReady.connect(n(this, this.setPuck)).once();
            else this.setPuck(a.puck)
        },
        onStop: function() { this._indicator = null;
            s.prototype.onStop.call(this) },
        onUpdate: function(a) { if (this._enabled && !(null == this._puckTransform || null == this._camera)) s.prototype.onUpdate.call(this, a), this.outOfScreen() ? this.show() : this.hide() },
        setPuck: function(a) {
            this._puckTransform =
                a._compMap.TransformComponent_66
        },
        outOfScreen: function() { return Math.abs(this._puckTransform.position.x - this._camera.x) > q.width / 2 || Math.abs(this._puckTransform.position.y - this._camera.y) > q.height / 2 },
        show: function() {
            this.setAlpha(1);
            var a = 0,
                b = this._puckTransform.position.y - this._camera.y + q.height / 2;
            75 > b ? (b = 75, a = 90) : b > q.height - 75 && (b = q.height - 75, a = -90);
            var c = this._puckTransform.position.x - this._camera.x + q.width / 2;
            75 > c ? c = 75 : c > q.width - 75 && (c = q.width - 75, a = 180);
            this._indicator.setRotation(a);
            this.setXY(c,
                b)
        },
        hide: function() { this.setAlpha(0) },
        __class__: oj
    });
    var nj = function() { this._teamScore = this._opponentScore = -1;
        s.call(this) };
    g["game.ui.hud.ScorePanel"] = nj;
    nj.__name__ = ["game", "ui", "hud", "ScorePanel"];
    nj.__super__ = s;
    nj.prototype = l(s.prototype, {
        onStart: function() {
            s.prototype.onStart.call(this);
            this._pack = D.getPack("ui_hud");
            this._bgScoreLeft = G.createImage("bg_score", this._pack);
            this._bgScoreLeft.centerAnchor();
            this._bgScoreLeft.setXY(-150, 10);
            this.owner.addChild((new A).add(this._bgScoreLeft));
            this._iconLeft =
                G.createImage("team_" + m.currentCharacter.team);
            this._iconLeft.centerAnchor();
            this._iconLeft.setXY(-215, 10);
            this.owner.addChild((new A).add(this._iconLeft));
            this._bgScoreRight = G.createImage("bg_score", this._pack);
            this._bgScoreRight.centerAnchor();
            this._bgScoreRight.setScaleXY(-1, 1);
            this._bgScoreRight.setXY(150, 10);
            this.owner.addChild((new A).add(this._bgScoreRight));
            this._iconRight = G.createImage("team_" + m.currentOpponent.team);
            this._iconRight.centerAnchor();
            this._iconRight.setXY(215, 10);
            this.owner.addChild((new A).add(this._iconRight));
            this._scoreLeft = M.getTextSprite("40_white");
            this._scoreLeft.setXY(-140, -5);
            this.owner.addChild((new A).add(this._scoreLeft));
            this._scoreRight = M.getTextSprite("40_white");
            this._scoreRight.setXY(140, -5);
            this.owner.addChild((new A).add(this._scoreRight));
            this._bgTimer = G.createImage("bg_timer", this._pack);
            this._bgTimer.centerAnchor();
            this._bgTimer.setXY(0, 0);
            this.owner.addChild((new A).add(this._bgTimer));
            this._time = M.getTextSprite("20_black");
            this._time.setXY(this._bgTimer.getNaturalWidth() / 2, 25);
            this._bgTimer.owner.addChild((new A).add(this._time));
            this.updateScore()
        },
        onStop: function() { s.prototype.onStop.call(this) },
        onUpdate: function(a) { s.prototype.onUpdate.call(this, a);
            this.updateScore();
            this.updateTime() },
        updateScore: function() {
            null != this._scoreLeft && this._teamScore != m.teamScore && (this._teamScore = m.teamScore, this._scoreLeft.set_text(u.string(this._teamScore)), this._bgScoreLeft.setScale(1.5), this._bgScoreLeft.scaleX.animateTo(1, 1, E.quadOut), this._bgScoreLeft.scaleY.animateTo(1, 1, E.quadOut), this._scoreLeft.setScale(1.5), this._scoreLeft.scaleX.animateTo(1,
                1, E.quadOut), this._scoreLeft.scaleY.animateTo(1, 1, E.quadOut));
            null != this._scoreRight && this._opponentScore != m.opponentScore && (this._opponentScore = m.opponentScore, this._scoreRight.set_text(u.string(this._opponentScore)), this._bgScoreRight.setScaleXY(-1.5, 1.5), this._bgScoreRight.scaleX.animateTo(-1, 1, E.quadOut), this._bgScoreRight.scaleY.animateTo(1, 1, E.quadOut), this._scoreRight.setScale(1.5), this._scoreRight.scaleX.animateTo(1, 1, E.quadOut), this._scoreRight.scaleY.animateTo(1, 1, E.quadOut))
        },
        updateTime: function() {
            var a =
                this.parseTime(m.gameTime);
            a != this._currentTime && (this._currentTime = a, this._time.set_text(a))
        },
        parseTime: function(a) { var b = Math.floor(a / 60),
                a = Math.floor(a - 60 * b); return (9 < b ? null == b ? "null" : "" + b : "0" + b) + " : " + (9 < a ? null == a ? "null" : "" + a : "0" + a) },
        __class__: nj
    });
    var pj = function() { this._disposer = new Ta;
        s.call(this) };
    g["game.ui.hud.SuperGauge"] = pj;
    pj.__name__ = ["game", "ui", "hud", "SuperGauge"];
    pj.__super__ = s;
    pj.prototype = l(s.prototype, {
        onStart: function() {
            s.prototype.onStart.call(this);
            this._superMove = this.owner._internal_getFromParents("GameLogic_27").playerEntity._compMap.SuperMove_31;
            this._disposer.add(this._superMove.onReady.connect(n(this, this.onSuperReady)));
            this._disposer.add(this._superMove.onActivate.connect(n(this, this.onSuperActivated)));
            var a = D.getPack("ui_hud");
            this._btn = G.createImage("supermove_bg", a);
            this._btn.centerAnchor().setXY(0, 0).setAlpha(0);
            this.owner.addChild((new A).add(this._btn));
            this._bg = G.createImage("supermove_back", a);
            this._bg.centerAnchor().setXY(20, 0);
            this.owner.addChild((new A).add(this._bg));
            this._bar = G.createImage("supermove_fill", a);
            this._bar.scissor =
                new Ab(0, this._bar.getNaturalHeight(), this._bar.getNaturalWidth(), 0);
            this._bar.centerAnchor().setXY(0, -8);
            this.owner.addChild((new A).add(this._bar));
            this._label = G.createText("BTN_SUPER" + (o.mobile ? "_M" : ""), null, this.owner);
            this._label.setXY(0, -20).setAlpha(0)
        },
        onStop: function() { this._disposer.dispose();
            this._disposer = null;
            s.prototype.onStop.call(this) },
        onUpdate: function(a) {
            s.prototype.onUpdate.call(this, a);
            a = Math.min(1, this._superMove.current / this._superMove.charge);
            this._bar.scissor.height = -this._bar.getNaturalHeight() *
                a
        },
        onSuperReady: function() { var a = this;
            v.play("super_ready", "SUPER");
            this._btn.setAlpha(1);
            this._btn.setScale(1.5);
            this._label.setAlpha(1);
            this._btn.scaleX.animateTo(1, 0.5, E.quadOut);
            this._btn.scaleY.animateTo(1, 0.5, E.quadOut);
            F.delayCallTo(function() { a._btn.scaleX.set_behavior(new db(1, 1.2, 0.35));
                a._btn.scaleY.set_behavior(new db(1, 1.2, 0.35));
                a._label.scaleX.set_behavior(new db(1, 1.2, 0.35));
                a._label.scaleY.set_behavior(new db(1, 1.2, 0.35)) }, 0.5, this.owner) },
        onSuperActivated: function() {
            this._label.setAlpha(0);
            this._btn.scaleX.set_behavior(null);
            this._btn.scaleY.set_behavior(null);
            this._label.scaleX.set_behavior(null);
            this._label.scaleY.set_behavior(null);
            this._btn.setScale(1.5);
            this._btn.scaleX.animateTo(0, 0.3, E.quadOut);
            this._btn.scaleY.animateTo(0, 0.3, E.quadOut);
            this._btn.alpha.animateTo(0, 0.3, E.quadOut)
        },
        __class__: pj
    });
    var Ei = function() { this._tipsQty = 7;
        k.call(this) };
    g["game.ui.tips.Tip"] = Ei;
    Ei.__name__ = ["game", "ui", "tips", "Tip"];
    Ei.__super__ = k;
    Ei.prototype = l(k.prototype, {
        get_name: function() { return "Tip_100" },
        onAdded: function() { k.prototype.onAdded.call(this);
            this.showTip() },
        showTip: function() { var a = M.getLocalizedTextSprite("PREVIEW_TIP_" + (Math.floor(Math.random() * this._tipsQty) + 1), "23_white");
            a.setWrapWidth(600).setAlign(Z.Left);
            a.setXY(125, 490 - a.getNaturalHeight() / 2 - q.getOffset(10));
            this.owner.addChild((new A).add(a)) },
        __class__: Ei
    });
    var ud = g["haxe.StackItem"] = { __ename__: ["haxe", "StackItem"], __constructs__: ["CFunction", "Module", "FilePos", "Method", "LocalFunction"] };
    ud.CFunction = ["CFunction", 0];
    ud.CFunction.toString =
        r;
    ud.CFunction.__enum__ = ud;
    ud.Module = function(a) { a = ["Module", 1, a];
        a.__enum__ = ud;
        a.toString = r; return a };
    ud.FilePos = function(a, b, c) { a = ["FilePos", 2, a, b, c];
        a.__enum__ = ud;
        a.toString = r; return a };
    ud.Method = function(a, b) { var c = ["Method", 3, a, b];
        c.__enum__ = ud;
        c.toString = r; return c };
    ud.LocalFunction = function(a) { a = ["LocalFunction", 4, a];
        a.__enum__ = ud;
        a.toString = r; return a };
    var Jd = function() {};
    g["haxe.CallStack"] = Jd;
    Jd.__name__ = ["haxe", "CallStack"];
    Jd.callStack = function() {
        var a = Error.prepareStackTrace;
        Error.prepareStackTrace =
            function(a, b) { for (var e = [], f = 0; f < b.length;) { var j = b[f];++f; var p = null,
                        h = j.getFunctionName(); if (null != h) { var g = h.lastIndexOf(".");
                        0 <= g && (p = N.substr(h, 0, g), h = N.substr(h, g + 1, null), p = ud.Method(p, h)) } e.push(ud.FilePos(p, j.getFileName(), j.getLineNumber())) } return e };
        var b = Jd.makeStack(Error().stack);
        b.shift();
        Error.prepareStackTrace = a;
        return b
    };
    Jd.exceptionStack = function() { return [] };
    Jd.toString = function(a) { for (var b = new Te, c = 0; c < a.length;) { var d = a[c];++c;
            b.b += "\nCalled from ";
            Jd.itemToString(b, d) } return b.b };
    Jd.itemToString = function(a, b) {
        switch (b[1]) {
            case 0:
                a.b += "a C function";
                break;
            case 1:
                var c = b[2];
                a.b += "module ";
                a.b = null == c ? a.b + "null" : a.b + ("" + c);
                break;
            case 2:
                var c = b[4],
                    d = b[3],
                    e = b[2];
                null != e && (Jd.itemToString(a, e), a.b += " (");
                a.b = null == d ? a.b + "null" : a.b + ("" + d);
                a.b += " line ";
                a.b = null == c ? a.b + "null" : a.b + ("" + c);
                null != e && (a.b += ")");
                break;
            case 3:
                c = b[3];
                d = b[2];
                a.b = null == d ? a.b + "null" : a.b + ("" + d);
                a.b += ".";
                a.b = null == c ? a.b + "null" : a.b + ("" + c);
                break;
            case 4:
                c = b[2], a.b += "local function #", a.b = null == c ? a.b + "null" : a.b + ("" +
                    c)
        }
    };
    Jd.makeStack = function(a) { if ("string" == typeof a) { for (var a = a.split("\n"), b = [], c = 0; c < a.length;) { var d = a[c];++c;
                b.push(ud.Module(d)) } return b } return a };
    var $g = function(a) { this.url = a;
        this.headers = new Be;
        this.params = new Be;
        this.async = !0 };
    g["haxe.Http"] = $g;
    $g.__name__ = ["haxe", "Http"];
    $g.prototype = {
        addHeader: function(a, b) { this.headers.push({ header: a, value: b }); return this },
        setPostData: function(a) { this.postData = a; return this },
        request: function(a) {
            var b = this;
            b.responseData = null;
            var c = this.req = Sh.createXMLHttpRequest(),
                d = function() { if (4 == c.readyState) { var a; try { a = c.status } catch (d) { a = null } void 0 == a && (a = null); if (null != a) b.onStatus(a); if (null != a && 200 <= a && 400 > a) b.req = null, b.onData(b.responseData = c.responseText);
                        else if (null == a) b.req = null, b.onError("Failed to connect or resolve host");
                        else switch (a) {
                            case 12029:
                                b.req = null;
                                b.onError("Failed to connect to host"); break;
                            case 12007:
                                b.req = null;
                                b.onError("Unknown host"); break;
                            default:
                                b.req = null, b.responseData = c.responseText, b.onError("Http Error #" + c.status) } } };
            this.async &&
                (c.onreadystatechange = d);
            var e = this.postData;
            if (null != e) a = !0;
            else
                for (var f = this.params.iterator(); f.hasNext();) var j = f.next(),
                    e = null == e ? "" : e + "&",
                    e = e + (encodeURIComponent(j.param) + "=" + encodeURIComponent(j.value));
            try { if (a) c.open("POST", this.url, this.async);
                else if (null != e) { var p = 1 >= this.url.split("?").length;
                    c.open("GET", this.url + (p ? "?" : "&") + e, this.async);
                    e = null } else c.open("GET", this.url, this.async) } catch (h) { b.req = null;
                this.onError(h.toString()); return }!wf.exists(this.headers, function(a) {
                return "Content-Type" ==
                    a.header
            }) && a && null == this.postData && c.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            for (a = this.headers.iterator(); a.hasNext();) f = a.next(), c.setRequestHeader(f.header, f.value);
            c.send(e);
            this.async || d(null)
        },
        onData: function() {},
        onError: function() {},
        onStatus: function() {},
        __class__: $g
    };
    var Ce = function() { this.buf = new Te;
        this.cache = [];
        this.useCache = Ce.USE_CACHE;
        this.useEnumIndex = Ce.USE_ENUM_INDEX;
        this.shash = new K;
        this.scount = 0 };
    g["haxe.Serializer"] = Ce;
    Ce.__name__ = ["haxe", "Serializer"];
    Ce.prototype = {
        toString: function() { return this.buf.b },
        serializeString: function(a) { var b = this.shash.get(a);
            null != b ? (this.buf.b += "R", this.buf.b = null == b ? this.buf.b + "null" : this.buf.b + ("" + b)) : (this.shash.set(a, this.scount++), this.buf.b += "y", a = encodeURIComponent(a), this.buf.b = null == a.length ? this.buf.b + "null" : this.buf.b + ("" + a.length), this.buf.b += ":", this.buf.b = null == a ? this.buf.b + "null" : this.buf.b + ("" + a)) },
        serializeRef: function(a) {
            for (var b = typeof a, c = 0, d = this.cache.length; c < d;) {
                var e = c++,
                    f = this.cache[e];
                if (typeof f == b && f == a) return this.buf.b += "r", this.buf.b = null == e ? this.buf.b + "null" : this.buf.b + ("" + e), !0
            }
            this.cache.push(a);
            return !1
        },
        serializeFields: function(a) { for (var b = 0, c = y.fields(a); b < c.length;) { var d = c[b];++b;
                this.serializeString(d);
                this.serialize(y.field(a, d)) } this.buf.b += "g" },
        serialize: function(a) {
            var b = Y["typeof"](a);
            switch (b[1]) {
                case 0:
                    this.buf.b += "n";
                    break;
                case 1:
                    if (0 == a) { this.buf.b += "z"; break } this.buf.b += "i";
                    this.buf.b = null == a ? this.buf.b + "null" : this.buf.b + ("" + a);
                    break;
                case 2:
                    Math.isNaN(a) ?
                        this.buf.b += "k" : Math.isFinite(a) ? (this.buf.b += "d", this.buf.b = null == a ? this.buf.b + "null" : this.buf.b + ("" + a)) : this.buf.b = 0 > a ? this.buf.b + "m" : this.buf.b + "p";
                    break;
                case 3:
                    this.buf.b = a ? this.buf.b + "t" : this.buf.b + "f";
                    break;
                case 6:
                    b = b[2];
                    if (b == String) { this.serializeString(a); break }
                    if (this.useCache && this.serializeRef(a)) break;
                    switch (b) {
                        case Array:
                            b = 0;
                            this.buf.b += "a";
                            for (var c = a.length, d = 0; d < c;) {
                                var e = d++;
                                null == a[e] ? b++ : (0 < b && (1 == b ? this.buf.b += "n" : (this.buf.b += "u", this.buf.b = null == b ? this.buf.b + "null" : this.buf.b +
                                    ("" + b)), b = 0), this.serialize(a[e]))
                            }
                            0 < b && (1 == b ? this.buf.b += "n" : (this.buf.b += "u", this.buf.b = null == b ? this.buf.b + "null" : this.buf.b + ("" + b)));
                            this.buf.b += "h";
                            break;
                        case Be:
                            this.buf.b += "l";
                            for (a = a.iterator(); a.hasNext();) this.serialize(a.next());
                            this.buf.b += "h";
                            break;
                        case Date:
                            this.buf.b += "v";
                            this.buf.add(N.dateStr(a));
                            break;
                        case K:
                            this.buf.b += "b";
                            for (b = a.keys(); b.hasNext();) c = b.next(), this.serializeString(c), this.serialize(a.get(c));
                            this.buf.b += "h";
                            break;
                        case Ec:
                            this.buf.b += "q";
                            for (b = a.keys(); b.hasNext();) c =
                                b.next(), this.buf.b += ":", this.buf.b = null == c ? this.buf.b + "null" : this.buf.b + ("" + c), this.serialize(a.get(c));
                            this.buf.b += "h";
                            break;
                        case $b:
                            this.buf.b += "M";
                            for (b = a.keys(); b.hasNext();) c = b.next(), d = y.field(c, "__id__"), y.deleteField(c, "__id__"), this.serialize(c), c.__id__ = d, this.serialize(a.h[c.__id__]);
                            this.buf.b += "h";
                            break;
                        case Zc:
                            d = 0;
                            e = a.length - 2;
                            b = new Te;
                            for (c = Ce.BASE64; d < e;) {
                                var f = a.get(d++),
                                    j = a.get(d++),
                                    p = a.get(d++);
                                b.add(c.charAt(f >> 2));
                                b.add(c.charAt((f << 4 | j >> 4) & 63));
                                b.add(c.charAt((j << 2 | p >> 6) & 63));
                                b.add(c.charAt(p & 63))
                            }
                            d == e ? (e = a.get(d++), a = a.get(d++), b.add(c.charAt(e >> 2)), b.add(c.charAt((e << 4 | a >> 4) & 63)), b.add(c.charAt(a << 2 & 63))) : d == e + 1 && (a = a.get(d++), b.add(c.charAt(a >> 2)), b.add(c.charAt(a << 4 & 63)));
                            a = b.b;
                            this.buf.b += "s";
                            this.buf.b = null == a.length ? this.buf.b + "null" : this.buf.b + ("" + a.length);
                            this.buf.b += ":";
                            this.buf.b = null == a ? this.buf.b + "null" : this.buf.b + ("" + a);
                            break;
                        default:
                            this.useCache && this.cache.pop(), null != a.hxSerialize ? (this.buf.b += "C", this.serializeString(Y.getClassName(b)), this.useCache &&
                                this.cache.push(a), a.hxSerialize(this), this.buf.b += "g") : (this.buf.b += "c", this.serializeString(Y.getClassName(b)), this.useCache && this.cache.push(a), this.serializeFields(a))
                    }
                    break;
                case 4:
                    if (this.useCache && this.serializeRef(a)) break;
                    this.buf.b += "o";
                    this.serializeFields(a);
                    break;
                case 7:
                    b = b[2];
                    if (this.useCache) { if (this.serializeRef(a)) break;
                        this.cache.pop() } this.buf.b = this.useEnumIndex ? this.buf.b + "j" : this.buf.b + "w";
                    this.serializeString(Y.getEnumName(b));
                    this.useEnumIndex ? (this.buf.b += ":", this.buf.b += u.string(a[1])) :
                        this.serializeString(a[0]);
                    this.buf.b += ":";
                    b = a.length;
                    this.buf.b += u.string(b - 2);
                    for (c = 2; c < b;) d = c++, this.serialize(a[d]);
                    this.useCache && this.cache.push(a);
                    break;
                case 5:
                    throw "Cannot serialize function";
                default:
                    throw "Cannot serialize " + u.string(a);
            }
        },
        __class__: Ce
    };
    var Ie = function(a) { var b = this;
        this.id = setInterval(function() { b.run() }, a) };
    g["haxe.Timer"] = Ie;
    Ie.__name__ = ["haxe", "Timer"];
    Ie.delay = function(a, b) { var c = new Ie(b);
        c.run = function() { c.stop();
            a() }; return c };
    Ie.stamp = function() {
        return (new Date).getTime() /
            1E3
    };
    Ie.prototype = { stop: function() { null != this.id && (clearInterval(this.id), this.id = null) }, run: function() {}, __class__: Ie };
    var xb = function(a) { this.buf = a;
        this.length = a.length;
        this.pos = 0;
        this.scache = [];
        this.cache = [];
        a = xb.DEFAULT_RESOLVER;
        null == a && (a = Y, xb.DEFAULT_RESOLVER = a);
        this.setResolver(a) };
    g["haxe.Unserializer"] = xb;
    xb.__name__ = ["haxe", "Unserializer"];
    xb.initCodes = function() { for (var a = [], b = 0, c = xb.BASE64.length; b < c;) { var d = b++;
            a[xb.BASE64.charCodeAt(d)] = d } return a };
    xb.run = function(a) { return (new xb(a)).unserialize() };
    xb.prototype = {
        setResolver: function(a) { this.resolver = null == a ? { resolveClass: function() { return null }, resolveEnum: function() { return null } } : a },
        get: function(a) { return this.buf.charCodeAt(a) },
        readDigits: function() { for (var a = 0, b = !1, c = this.pos;;) { var d = this.buf.charCodeAt(this.pos); if (d != d) break; if (45 == d) { if (this.pos != c) break;
                    b = !0 } else { if (48 > d || 57 < d) break;
                    a = 10 * a + (d - 48) } this.pos++ } b && (a *= -1); return a },
        unserializeObject: function(a) {
            for (;;) {
                if (this.pos >= this.length) throw "Invalid object";
                if (103 == this.buf.charCodeAt(this.pos)) break;
                var b = this.unserialize();
                if ("string" != typeof b) throw "Invalid object key";
                var c = this.unserialize();
                a[b] = c
            }
            this.pos++
        },
        unserializeEnum: function(a, b) { if (58 != this.get(this.pos++)) throw "Invalid enum format"; var c = this.readDigits(); if (0 == c) return Y.createEnum(a, b); for (var d = []; 0 < c--;) d.push(this.unserialize()); return Y.createEnum(a, b, d) },
        unserialize: function() {
            switch (this.get(this.pos++)) {
                case 110:
                    return null;
                case 116:
                    return !0;
                case 102:
                    return !1;
                case 122:
                    return 0;
                case 105:
                    return this.readDigits();
                case 100:
                    for (var a =
                            this.pos;;) { var b = this.buf.charCodeAt(this.pos); if (43 <= b && 58 > b || 101 == b || 69 == b) this.pos++;
                        else break }
                    return u.parseFloat(N.substr(this.buf, a, this.pos - a));
                case 121:
                    a = this.readDigits();
                    if (58 != this.get(this.pos++) || this.length - this.pos < a) throw "Invalid string length";
                    b = N.substr(this.buf, this.pos, a);
                    this.pos += a;
                    b = decodeURIComponent(b.split("+").join(" "));
                    this.scache.push(b);
                    return b;
                case 107:
                    return Math.NaN;
                case 109:
                    return Math.NEGATIVE_INFINITY;
                case 112:
                    return Math.POSITIVE_INFINITY;
                case 97:
                    a = [];
                    for (this.cache.push(a);;) {
                        b =
                            this.buf.charCodeAt(this.pos);
                        if (104 == b) { this.pos++; break } 117 == b ? (this.pos++, b = this.readDigits(), a[a.length + b - 1] = null) : a.push(this.unserialize())
                    }
                    return a;
                case 111:
                    return a = {}, this.cache.push(a), this.unserializeObject(a), a;
                case 114:
                    a = this.readDigits();
                    if (0 > a || a >= this.cache.length) throw "Invalid reference";
                    return this.cache[a];
                case 82:
                    a = this.readDigits();
                    if (0 > a || a >= this.scache.length) throw "Invalid string reference";
                    return this.scache[a];
                case 120:
                    throw this.unserialize();
                case 99:
                    a = this.unserialize();
                    b = this.resolver.resolveClass(a);
                    if (null == b) throw "Class not found " + a;
                    a = Y.createEmptyInstance(b);
                    this.cache.push(a);
                    this.unserializeObject(a);
                    return a;
                case 119:
                    a = this.unserialize();
                    b = this.resolver.resolveEnum(a);
                    if (null == b) throw "Enum not found " + a;
                    a = this.unserializeEnum(b, this.unserialize());
                    this.cache.push(a);
                    return a;
                case 106:
                    a = this.unserialize();
                    b = this.resolver.resolveEnum(a);
                    if (null == b) throw "Enum not found " + a;
                    this.pos++;
                    var c = this.readDigits(),
                        d = Y.getEnumConstructs(b)[c];
                    if (null == d) throw "Unknown enum index " +
                        a + "@" + c;
                    a = this.unserializeEnum(b, d);
                    this.cache.push(a);
                    return a;
                case 108:
                    a = new Be;
                    for (this.cache.push(a); 104 != this.buf.charCodeAt(this.pos);) a.add(this.unserialize());
                    this.pos++;
                    return a;
                case 98:
                    a = new K;
                    for (this.cache.push(a); 104 != this.buf.charCodeAt(this.pos);) b = this.unserialize(), a.set(b, this.unserialize());
                    this.pos++;
                    return a;
                case 113:
                    a = new Ec;
                    this.cache.push(a);
                    for (b = this.get(this.pos++); 58 == b;) b = this.readDigits(), a.set(b, this.unserialize()), b = this.get(this.pos++);
                    if (104 != b) throw "Invalid IntMap format";
                    return a;
                case 77:
                    a = new $b;
                    for (this.cache.push(a); 104 != this.buf.charCodeAt(this.pos);) b = this.unserialize(), a.set(b, this.unserialize());
                    this.pos++;
                    return a;
                case 118:
                    return a = N.substr(this.buf, this.pos, 19), a = N.strDate(a), this.cache.push(a), this.pos += 19, a;
                case 115:
                    a = this.readDigits();
                    d = this.buf;
                    if (58 != this.get(this.pos++) || this.length - this.pos < a) throw "Invalid bytes length";
                    var e = xb.CODES;
                    null == e && (e = xb.initCodes(), xb.CODES = e);
                    for (var f = this.pos, j = a & 3, p = f + (a - j), b = Zc.alloc(3 * (a >> 2) + (2 <= j ? j - 1 : 0)), c = 0; f <
                        p;) { var h = e[ka.fastCodeAt(d, f++)],
                            g = e[ka.fastCodeAt(d, f++)];
                        b.set(c++, h << 2 | g >> 4);
                        h = e[ka.fastCodeAt(d, f++)];
                        b.set(c++, g << 4 | h >> 2);
                        g = e[ka.fastCodeAt(d, f++)];
                        b.set(c++, h << 6 | g) } 2 <= j && (g = e[ka.fastCodeAt(d, f++)], p = e[ka.fastCodeAt(d, f++)], b.set(c++, g << 2 | p >> 4), 3 == j && (d = e[ka.fastCodeAt(d, f++)], b.set(c++, p << 4 | d >> 2)));
                    this.pos += a;
                    this.cache.push(b);
                    return b;
                case 67:
                    a = this.unserialize();
                    b = this.resolver.resolveClass(a);
                    if (null == b) throw "Class not found " + a;
                    a = Y.createEmptyInstance(b);
                    this.cache.push(a);
                    a.hxUnserialize(this);
                    if (103 != this.get(this.pos++)) throw "Invalid custom data";
                    return a
            }
            this.pos--;
            throw "Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos;
        },
        __class__: xb
    };
    var Zc = function(a, b) { this.length = a;
        this.b = b };
    g["haxe.io.Bytes"] = Zc;
    Zc.__name__ = ["haxe", "io", "Bytes"];
    Zc.alloc = function(a) { for (var b = [], c = 0; c < a;) c++, b.push(0); return new Zc(a, b) };
    Zc.ofString = function(a) {
        for (var b = [], c = 0; c < a.length;) {
            var d = ka.fastCodeAt(a, c++);
            55296 <= d && 56319 >= d && (d = d - 55232 << 10 | ka.fastCodeAt(a, c++) & 1023);
            127 >= d ? b.push(d) :
                (2047 >= d ? b.push(192 | d >> 6) : (65535 >= d ? b.push(224 | d >> 12) : (b.push(240 | d >> 18), b.push(128 | d >> 12 & 63)), b.push(128 | d >> 6 & 63)), b.push(128 | d & 63))
        }
        return new Zc(b.length, b)
    };
    Zc.prototype = {
        get: function(a) { return this.b[a] },
        set: function(a, b) { this.b[a] = b & 255 },
        getString: function(a, b) {
            if (0 > a || 0 > b || a + b > this.length) throw vd.OutsideBounds;
            for (var c = "", d = this.b, e = String.fromCharCode, f = a, j = a + b; f < j;) {
                var p = d[f++];
                if (128 > p) { if (0 == p) break;
                    c += e(p) } else if (224 > p) c += e((p & 63) << 6 | d[f++] & 127);
                else if (240 > p) var h = d[f++],
                    c = c + e((p &
                        31) << 12 | (h & 127) << 6 | d[f++] & 127);
                else var h = d[f++],
                    g = d[f++],
                    p = (p & 15) << 18 | (h & 127) << 12 | (g & 127) << 6 | d[f++] & 127,
                    c = c + e((p >> 10) + 55232),
                    c = c + e(p & 1023 | 56320)
            }
            return c
        },
        toString: function() { return this.getString(0, this.length) },
        __class__: Zc
    };
    var Id = function() {};
    g["haxe.crypto.Base64"] = Id;
    Id.__name__ = ["haxe", "crypto", "Base64"];
    Id.encode = function(a, b) { null == b && (b = !0); var c = (new Dj(Id.BYTES)).encodeBytes(a).toString(); if (b)
            for (var d = 0, e = (3 - 4 * a.length % 3) % 3; d < e;) d++, c += "="; return c };
    Id.decode = function(a, b) {
        null == b &&
            (b = !0);
        if (b)
            for (; 61 == N.cca(a, a.length - 1);) a = N.substr(a, 0, -1);
        return (new Dj(Id.BYTES)).decodeBytes(Zc.ofString(a))
    };
    var Dj = function(a) { for (var b = a.length, c = 1; b > 1 << c;) c++; if (8 < c || b != 1 << c) throw "BaseCode : base length must be a power of two.";
        this.base = a;
        this.nbits = c };
    g["haxe.crypto.BaseCode"] = Dj;
    Dj.__name__ = ["haxe", "crypto", "BaseCode"];
    Dj.prototype = {
        encodeBytes: function(a) {
            for (var b = this.nbits, c = this.base, d = 8 * a.length / b | 0, e = Zc.alloc(d + (0 == 8 * a.length % b ? 0 : 1)), f = 0, j = 0, p = (1 << b) - 1, h = 0, g = 0; g < d;) {
                for (; j < b;) j +=
                    8, f <<= 8, f |= a.get(h++);
                j -= b;
                e.set(g++, c.b[f >> j & p])
            }
            0 < j && e.set(g++, c.b[f << b - j & p]);
            return e
        },
        initTable: function() { for (var a = [], b = 0; 256 > b;) { var c = b++;
                a[c] = -1 } b = 0; for (c = this.base.length; b < c;) { var d = b++;
                a[this.base.b[d]] = d } this.tbl = a },
        decodeBytes: function(a) { var b = this.nbits;
            null == this.tbl && this.initTable(); for (var c = this.tbl, d = a.length * b >> 3, e = Zc.alloc(d), f = 0, j = 0, p = 0, h = 0; h < d;) { for (; 8 > j;) { var j = j + b,
                        f = f << b,
                        g = c[a.get(p++)]; if (-1 == g) throw "BaseCode : invalid encoded char";
                    f |= g } j -= 8;
                e.set(h++, f >> j & 255) } return e },
        __class__: Dj
    };
    var sb = function() {};
    g["haxe.ds.ArraySort"] = sb;
    sb.__name__ = ["haxe", "ds", "ArraySort"];
    sb.sort = function(a, b) { sb.rec(a, b, 0, a.length) };
    sb.rec = function(a, b, c, d) { var e = c + d >> 1; if (12 > d - c) { if (!(d <= c))
                for (e = c + 1; e < d;)
                    for (var f = e++; f > c;) { if (0 > b(a[f], a[f - 1])) sb.swap(a, f - 1, f);
                        else break;
                        f-- } } else sb.rec(a, b, c, e), sb.rec(a, b, e, d), sb.doMerge(a, b, c, e, d, e - c, d - e) };
    sb.doMerge = function(a, b, c, d, e, f, j) {
        var p, h, g, i;
        0 == f || 0 == j || (2 == f + j ? 0 > b(a[d], a[c]) && sb.swap(a, d, c) : (f > j ? (g = f >> 1, p = c + g, h = sb.lower(a, b, d, e, p), i =
            h - d) : (i = j >> 1, h = d + i, p = sb.upper(a, b, c, d, h), g = p - c), sb.rotate(a, b, p, d, h), d = p + i, sb.doMerge(a, b, c, p, d, g, i), sb.doMerge(a, b, d, h, e, f - g, j - i)))
    };
    sb.rotate = function(a, b, c, d, e) { if (!(c == d || d == e))
            for (b = sb.gcd(e - c, d - c); 0 != b--;) { for (var f = a[c + b], j = d - c, p = c + b, h = c + b + j; h != c + b;) a[p] = a[h], p = h, h = e - h > j ? h + j : c + (j - (e - h));
                a[p] = f } };
    sb.gcd = function(a, b) { for (; 0 != b;) var c = a % b,
            a = b,
            b = c; return a };
    sb.upper = function(a, b, c, d, e) { for (var d = d - c, f, j; 0 < d;) f = d >> 1, j = c + f, 0 > b(a[e], a[j]) ? d = f : (c = j + 1, d = d - f - 1); return c };
    sb.lower = function(a, b, c, d, e) {
        for (var d =
                d - c, f, j; 0 < d;) f = d >> 1, j = c + f, 0 > b(a[j], a[e]) ? (c = j + 1, d = d - f - 1) : d = f;
        return c
    };
    sb.swap = function(a, b, c) { var d = a[b];
        a[b] = a[c];
        a[c] = d };
    var Ec = function() { this.h = {} };
    g["haxe.ds.IntMap"] = Ec;
    Ec.__name__ = ["haxe", "ds", "IntMap"];
    Ec.__interfaces__ = [Cg];
    Ec.prototype = {
        set: function(a, b) { this.h[a] = b },
        get: function(a) { return this.h[a] },
        exists: function(a) { return this.h.hasOwnProperty(a) },
        remove: function(a) { if (!this.h.hasOwnProperty(a)) return !1;
            delete this.h[a]; return !0 },
        keys: function() {
            var a = [],
                b;
            for (b in this.h) this.h.hasOwnProperty(b) &&
                a.push(b | 0);
            return N.iter(a)
        },
        iterator: function() { return { ref: this.h, it: this.keys(), hasNext: function() { return this.it.hasNext() }, next: function() { return this.ref[this.it.next()] } } },
        __class__: Ec
    };
    var $b = function() { this.h = {};
        this.h.__keys__ = {} };
    g["haxe.ds.ObjectMap"] = $b;
    $b.__name__ = ["haxe", "ds", "ObjectMap"];
    $b.__interfaces__ = [Cg];
    $b.prototype = {
        set: function(a, b) { var c = a.__id__ || (a.__id__ = ++$b.count);
            this.h[c] = b;
            this.h.__keys__[c] = a },
        get: function(a) { return this.h[a.__id__] },
        remove: function(a) {
            a = a.__id__;
            if (null == this.h.__keys__[a]) return !1;
            delete this.h[a];
            delete this.h.__keys__[a];
            return !0
        },
        keys: function() { var a = [],
                b; for (b in this.h.__keys__) this.h.hasOwnProperty(b) && a.push(this.h.__keys__[b]); return N.iter(a) },
        iterator: function() { return { ref: this.h, it: this.keys(), hasNext: function() { return this.it.hasNext() }, next: function() { return this.ref[this.it.next().__id__] } } },
        __class__: $b
    };
    var K = function() { this.h = {} };
    g["haxe.ds.StringMap"] = K;
    K.__name__ = ["haxe", "ds", "StringMap"];
    K.__interfaces__ = [Cg];
    K.prototype = { set: function(a, b) { this.h["$" + a] = b }, get: function(a) { return this.h["$" + a] }, exists: function(a) { return this.h.hasOwnProperty("$" + a) }, remove: function(a) { a = "$" + a; if (!this.h.hasOwnProperty(a)) return !1;
            delete this.h[a]; return !0 }, keys: function() { var a = [],
                b; for (b in this.h) this.h.hasOwnProperty(b) && a.push(b.substr(1)); return N.iter(a) }, iterator: function() { return { ref: this.h, it: this.keys(), hasNext: function() { return this.it.hasNext() }, next: function() { return this.ref["$" + this.it.next()] } } }, __class__: K };
    var ah =
        function(a, b) { this.replacer = a;
            this.indent = b;
            this.pretty = null != b;
            this.nind = 0;
            this.buf = new Te };
    g["haxe.format.JsonPrinter"] = ah;
    ah.__name__ = ["haxe", "format", "JsonPrinter"];
    ah.print = function(a, b, c) { b = new ah(b, c);
        b.write("", a); return b.buf.b };
    ah.prototype = {
        ipad: function() { if (this.pretty) { var a = ka.lpad("", this.indent, this.nind * this.indent.length);
                this.buf.b = null == a ? this.buf.b + "null" : this.buf.b + ("" + a) } },
        write: function(a, b) {
            null != this.replacer && (b = this.replacer(a, b));
            var c = Y["typeof"](b);
            switch (c[1]) {
                case 8:
                    this.buf.b +=
                        '"???"';
                    break;
                case 4:
                    this.fieldsString(b, y.fields(b));
                    break;
                case 1:
                    c = b;
                    this.buf.b = null == c ? this.buf.b + "null" : this.buf.b + ("" + c);
                    break;
                case 2:
                    c = Math.isFinite(b) ? b : "null";
                    this.buf.b = null == c ? this.buf.b + "null" : this.buf.b + ("" + c);
                    break;
                case 5:
                    this.buf.b += '"<fun>"';
                    break;
                case 6:
                    c = c[2];
                    if (c == String) this.quote(b);
                    else if (c == Array) {
                        c = b;
                        this.buf.b += "[";
                        for (var d = c.length, e = d - 1, f = 0; f < d;) {
                            var j = f++;
                            0 < j ? this.buf.b += "," : this.nind++;
                            this.pretty && (this.buf.b += "\n");
                            this.ipad();
                            this.write(j, c[j]);
                            j == e && (this.nind--,
                                this.pretty && (this.buf.b += "\n"), this.ipad())
                        }
                        this.buf.b += "]"
                    } else if (c == K) { c = b;
                        d = {}; for (e = c.keys(); e.hasNext();) f = e.next(), y.setField(d, f, c.get(f));
                        this.fieldsString(d, y.fields(d)) } else c == Date ? this.quote(N.dateStr(b)) : this.fieldsString(b, y.fields(b));
                    break;
                case 7:
                    c = Y.enumIndex(b);
                    this.buf.b = null == c ? this.buf.b + "null" : this.buf.b + ("" + c);
                    break;
                case 3:
                    c = b;
                    this.buf.b = null == c ? this.buf.b + "null" : this.buf.b + ("" + c);
                    break;
                case 0:
                    this.buf.b += "null"
            }
        },
        fieldsString: function(a, b) {
            this.buf.b += "{";
            for (var c = b.length,
                    d = c - 1, e = 0; e < c;) { var f = e++,
                    j = b[f],
                    p = y.field(a, j);
                y.isFunction(p) || (0 < f ? this.buf.b += "," : this.nind++, this.pretty && (this.buf.b += "\n"), this.ipad(), this.quote(j), this.buf.b += ":", this.pretty && (this.buf.b += " "), this.write(j, p), f == d && (this.nind--, this.pretty && (this.buf.b += "\n"), this.ipad())) } this.buf.b += "}"
        },
        quote: function(a) {
            this.buf.b += '"';
            for (var b = 0;;) {
                var c = ka.fastCodeAt(a, b++);
                if (c != c) break;
                switch (c) {
                    case 34:
                        this.buf.b += '\\"';
                        break;
                    case 92:
                        this.buf.b += "\\\\";
                        break;
                    case 10:
                        this.buf.b += "\\n";
                        break;
                    case 13:
                        this.buf.b +=
                            "\\r";
                        break;
                    case 9:
                        this.buf.b += "\\t";
                        break;
                    case 8:
                        this.buf.b += "\\b";
                        break;
                    case 12:
                        this.buf.b += "\\f";
                        break;
                    default:
                        this.buf.b += String.fromCharCode(c)
                }
            }
            this.buf.b += '"'
        },
        __class__: ah
    };
    var cn = function() {};
    g["haxe.io.Eof"] = cn;
    cn.__name__ = ["haxe", "io", "Eof"];
    cn.prototype = { toString: function() { return "Eof" }, __class__: cn };
    var vd = g["haxe.io.Error"] = { __ename__: ["haxe", "io", "Error"], __constructs__: ["Blocked", "Overflow", "OutsideBounds", "Custom"] };
    vd.Blocked = ["Blocked", 0];
    vd.Blocked.toString = r;
    vd.Blocked.__enum__ =
        vd;
    vd.Overflow = ["Overflow", 1];
    vd.Overflow.toString = r;
    vd.Overflow.__enum__ = vd;
    vd.OutsideBounds = ["OutsideBounds", 2];
    vd.OutsideBounds.toString = r;
    vd.OutsideBounds.__enum__ = vd;
    vd.Custom = function(a) { a = ["Custom", 3, a];
        a.__enum__ = vd;
        a.toString = r; return a };
    var wl = function() {};
    g["haxe.rtti.Meta"] = wl;
    wl.__name__ = ["haxe", "rtti", "Meta"];
    wl.getType = function(a) { a = a.__meta__; return null == a || null == a.obj ? {} : a.obj };
    var Wl = function(a) { this.__x = a };
    g["haxe.xml._Fast.NodeAccess"] = Wl;
    Wl.__name__ = ["haxe", "xml", "_Fast", "NodeAccess"];
    Wl.prototype = { resolve: function(a) { var b = this.__x.elementsNamed(a).next(); if (null == b) throw (this.__x.nodeType == W.Document ? "Document" : this.__x.get_nodeName()) + " is missing element " + a; return new bh(b) }, __class__: Wl };
    var Xl = function(a) { this.__x = a };
    g["haxe.xml._Fast.AttribAccess"] = Xl;
    Xl.__name__ = ["haxe", "xml", "_Fast", "AttribAccess"];
    Xl.prototype = {
        resolve: function(a) {
            if (this.__x.nodeType == W.Document) throw "Cannot access document attribute " + a;
            var b = this.__x.get(a);
            if (null == b) throw this.__x.get_nodeName() +
                " is missing attribute " + a;
            return b
        },
        __class__: Xl
    };
    var Yl = function(a) { this.__x = a };
    g["haxe.xml._Fast.HasAttribAccess"] = Yl;
    Yl.__name__ = ["haxe", "xml", "_Fast", "HasAttribAccess"];
    Yl.prototype = { resolve: function(a) { if (this.__x.nodeType == W.Document) throw "Cannot access document attribute " + a; return this.__x.exists(a) }, __class__: Yl };
    var Zl = function(a) { this.__x = a };
    g["haxe.xml._Fast.HasNodeAccess"] = Zl;
    Zl.__name__ = ["haxe", "xml", "_Fast", "HasNodeAccess"];
    Zl.prototype = {
        resolve: function(a) { return this.__x.elementsNamed(a).hasNext() },
        __class__: Zl
    };
    var $l = function(a) { this.__x = a };
    g["haxe.xml._Fast.NodeListAccess"] = $l;
    $l.__name__ = ["haxe", "xml", "_Fast", "NodeListAccess"];
    $l.prototype = { resolve: function(a) { for (var b = new Be, a = this.__x.elementsNamed(a); a.hasNext();) { var c = a.next();
                b.add(new bh(c)) } return b }, __class__: $l };
    var bh = function(a) { if (a.nodeType != W.Document && a.nodeType != W.Element) throw "Invalid nodeType " + u.string(a.nodeType);
        this.x = a;
        this.node = new Wl(a);
        this.nodes = new $l(a);
        this.att = new Xl(a);
        this.has = new Yl(a);
        this.hasNode = new Zl(a) };
    g["haxe.xml.Fast"] = bh;
    bh.__name__ = ["haxe", "xml", "Fast"];
    bh.prototype = {
        get_name: function() { return this.x.nodeType == W.Document ? "Document" : this.x.get_nodeName() },
        get_innerData: function() {
            var a = this.x.iterator();
            if (!a.hasNext()) throw this.get_name() + " does not have data";
            var b = a.next(),
                c = a.next();
            if (null != c) {
                if (b.nodeType == W.PCData && c.nodeType == W.CData && "" == ka.trim(b.get_nodeValue()) && (b = a.next(), null == b || b.nodeType == W.PCData && "" == ka.trim(b.get_nodeValue()) && null == a.next())) return c.get_nodeValue();
                throw this.get_name() +
                    " does not only have data";
            }
            if (b.nodeType != W.PCData && b.nodeType != W.CData) throw this.get_name() + " does not have data";
            return b.get_nodeValue()
        },
        __class__: bh,
        __properties__: { get_innerData: "get_innerData", get_name: "get_name" }
    };
    var Ue = function() {};
    g["haxe.xml.Parser"] = Ue;
    Ue.__name__ = ["haxe", "xml", "Parser"];
    Ue.parse = function(a) { var b = W.createDocument();
        Ue.doParse(a, 0, b); return b };
    Ue.doParse = function(a, b, c) {
        null == b && (b = 0);
        for (var d = null, e = 1, f = 1, j = null, p = 0, h = 0, g = 0, i = a.charCodeAt(b), k = new Te; i == i;) {
            switch (e) {
                case 0:
                    switch (i) {
                        case 10:
                        case 13:
                        case 9:
                        case 32:
                            break;
                        default:
                            e = f;
                            continue
                    }
                    break;
                case 1:
                    switch (i) {
                        case 60:
                            e = 0;
                            f = 2; break;
                        default:
                            p = b;
                            e = 13; continue }
                    break;
                case 13:
                    60 == i ? (f = W.createPCData(k.b + N.substr(a, p, b - p)), k = new Te, c.addChild(f), h++, e = 0, f = 2) : 38 == i && (k.addSub(a, p, b - p), e = 18, f = 13, p = b + 1);
                    break;
                case 17:
                    93 == i && 93 == a.charCodeAt(b + 1) && 62 == a.charCodeAt(b + 2) && (e = W.createCData(N.substr(a, p, b - p)), c.addChild(e), h++, b += 2, e = 1);
                    break;
                case 2:
                    switch (i) {
                        case 33:
                            if (91 == a.charCodeAt(b + 1)) {
                                b += 2;
                                if ("CDATA[" != N.substr(a, b, 6).toUpperCase()) throw "Expected <![CDATA[";
                                b += 5;
                                e =
                                    17
                            } else if (68 == a.charCodeAt(b + 1) || 100 == a.charCodeAt(b + 1)) { if ("OCTYPE" != N.substr(a, b + 2, 6).toUpperCase()) throw "Expected <!DOCTYPE";
                                b += 8;
                                e = 16 } else { if (45 != a.charCodeAt(b + 1) || 45 != a.charCodeAt(b + 2)) throw "Expected <\!--";
                                b += 2;
                                e = 15 } p = b + 1;
                            break;
                        case 63:
                            e = 14;
                            p = b;
                            break;
                        case 47:
                            if (null == c) throw "Expected node name";
                            p = b + 1;
                            e = 0;
                            f = 10;
                            break;
                        default:
                            e = 3;
                            p = b;
                            continue
                    }
                    break;
                case 3:
                    if (!(97 <= i && 122 >= i || 65 <= i && 90 >= i || 48 <= i && 57 >= i || 58 == i || 46 == i || 95 == i || 45 == i)) {
                        if (b == p) throw "Expected node name";
                        d = W.createElement(N.substr(a,
                            p, b - p));
                        c.addChild(d);
                        e = 0;
                        f = 4;
                        continue
                    }
                    break;
                case 4:
                    switch (i) {
                        case 47:
                            e = 11;
                            h++; break;
                        case 62:
                            e = 9;
                            h++; break;
                        default:
                            e = 5;
                            p = b; continue }
                    break;
                case 5:
                    if (!(97 <= i && 122 >= i || 65 <= i && 90 >= i || 48 <= i && 57 >= i || 58 == i || 46 == i || 95 == i || 45 == i)) { if (p == b) throw "Expected attribute name";
                        j = N.substr(a, p, b - p); if (d.exists(j)) throw "Duplicate attribute";
                        e = 0;
                        f = 6; continue }
                    break;
                case 6:
                    switch (i) {
                        case 61:
                            e = 0;
                            f = 7; break;
                        default:
                            throw "Expected ="; }
                    break;
                case 7:
                    switch (i) {
                        case 34:
                        case 39:
                            e = 8;
                            p = b; break;
                        default:
                            throw 'Expected "'; }
                    break;
                case 8:
                    i ==
                        a.charCodeAt(p) && (f = N.substr(a, p + 1, b - p - 1), d.set(j, f), e = 0, f = 4);
                    break;
                case 9:
                    p = b = Ue.doParse(a, b, d);
                    e = 1;
                    break;
                case 11:
                    switch (i) {
                        case 62:
                            e = 1; break;
                        default:
                            throw "Expected >"; }
                    break;
                case 12:
                    switch (i) {
                        case 62:
                            return 0 == h && c.addChild(W.createPCData("")), b;
                        default:
                            throw "Expected >"; }
                case 10:
                    if (!(97 <= i && 122 >= i || 65 <= i && 90 >= i || 48 <= i && 57 >= i || 58 == i || 46 == i || 95 == i || 45 == i)) { if (p == b) throw "Expected node name"; if (N.substr(a, p, b - p) != c.get_nodeName()) throw "Expected </" + c.get_nodeName() + ">";
                        e = 0;
                        f = 12; continue }
                    break;
                case 15:
                    45 ==
                        i && 45 == a.charCodeAt(b + 1) && 62 == a.charCodeAt(b + 2) && (c.addChild(W.createComment(N.substr(a, p, b - p))), b += 2, e = 1);
                    break;
                case 16:
                    91 == i ? g++ : 93 == i ? g-- : 62 == i && 0 == g && (c.addChild(W.createDocType(N.substr(a, p, b - p))), e = 1);
                    break;
                case 14:
                    63 == i && 62 == a.charCodeAt(b + 1) && (b++, e = N.substr(a, p + 1, b - p - 2), c.addChild(W.createProcessingInstruction(e)), e = 1);
                    break;
                case 18:
                    59 == i && (p = N.substr(a, p, b - p), 35 == p.charCodeAt(0) ? (p = 120 == p.charCodeAt(1) ? u.parseInt("0" + N.substr(p, 1, p.length - 1)) : u.parseInt(N.substr(p, 1, p.length - 1)), k.add(String.fromCharCode(p))) :
                        Ue.escapes.exists(p) ? k.add(Ue.escapes.get(p)) : k.b += u.string("&" + p + ";"), p = b + 1, e = f)
            }
            i = ka.fastCodeAt(a, ++b)
        }
        1 == e && (p = b, e = 13);
        if (13 == e) return (b != p || 0 == h) && c.addChild(W.createPCData(k.b + N.substr(a, p, b - p))), b;
        throw "Unexpected end";
    };
    var U = function() {};
    g["js.Boot"] = U;
    U.__name__ = ["js", "Boot"];
    U.getClass = function(a) { return a instanceof Array && null == a.__enum__ ? Array : a.__class__ };
    U.__string_rec = function(a, b) {
        if (null == a) return "null";
        if (5 <= b.length) return "<...>";
        var c = typeof a;
        if ("function" == c && (a.__name__ || a.__ename__)) c =
            "object";
        switch (c) {
            case "object":
                if (a instanceof Array) { if (a.__enum__) { if (2 == a.length) return a[0]; for (var c = a[0] + "(", b = b + "\t", d = 2, e = a.length; d < e;) var f = d++,
                            c = 2 != f ? c + ("," + U.__string_rec(a[f], b)) : c + U.__string_rec(a[f], b); return c + ")" } c = a.length;
                    d = "[";
                    b += "\t"; for (e = 0; e < c;) f = e++, d += (0 < f ? "," : "") + U.__string_rec(a[f], b); return d + "]" }
                try { d = a.toString } catch (j) { return "???" }
                if (null != d && d != Object.toString && (c = a.toString(), "[object Object]" != c)) return c;
                c = null;
                d = "{\n";
                b += "\t";
                e = null != a.hasOwnProperty;
                for (c in a)
                    if (!e ||
                        a.hasOwnProperty(c)) "prototype" == c || "__class__" == c || "__super__" == c || "__interfaces__" == c || "__properties__" == c || (2 != d.length && (d += ", \n"), d += b + c + " : " + U.__string_rec(a[c], b));
                b = b.substring(1);
                return d + ("\n" + b + "}");
            case "function":
                return "<function>";
            case "string":
                return a;
            default:
                return "" + a
        }
    };
    U.__interfLoop = function(a, b) {
        if (null == a) return !1;
        if (a == b) return !0;
        var c = a.__interfaces__;
        if (null != c)
            for (var d = 0, e = c.length; d < e;) { var f = d++,
                    f = c[f]; if (f == b || U.__interfLoop(f, b)) return !0 }
        return U.__interfLoop(a.__super__,
            b)
    };
    U.__instanceof = function(a, b) { if (null == b) return !1; switch (b) {
            case Jn:
                return (a | 0) === a;
            case Fn:
                return "number" == typeof a;
            case Kn:
                return "boolean" == typeof a;
            case String:
                return "string" == typeof a;
            case Array:
                return a instanceof Array && null == a.__enum__;
            case Pn:
                return !0;
            default:
                if (null != a) { if ("function" == typeof b && (a instanceof b || U.__interfLoop(U.getClass(a), b))) return !0 } else return !1; return b == Qn && null != a.__name__ || b == Rn && null != a.__ename__ ? !0 : a.__enum__ == b } };
    U.__cast = function(a, b) {
        if (U.__instanceof(a, b)) return a;
        throw "Cannot cast " + u.string(a) + " to " + u.string(b);
    };
    var Sh = function() {};
    g["js.Browser"] = Sh;
    Sh.__name__ = ["js", "Browser"];
    Sh.getLocalStorage = function() { try { var a = window.localStorage;
            a.getItem(""); return a } catch (b) { return null } };
    Sh.createXMLHttpRequest = function() { if ("undefined" != typeof XMLHttpRequest) return new XMLHttpRequest; if ("undefined" != typeof ActiveXObject) return new ActiveXObject("Microsoft.XMLHTTP"); throw "Unable to create XMLHttpRequest object."; };
    var Zm = function() {};
    g["js.html._CanvasElement.CanvasUtil"] =
        Zm;
    Zm.__name__ = ["js", "html", "_CanvasElement", "CanvasUtil"];
    Zm.getContextWebGL = function(a, b) { for (var c = 0, d = ["webgl", "experimental-webgl"]; c < d.length;) { var e = d[c];++c;
            e = a.getContext(e, b); if (null != e) return e } return null };
    var hb = function() { k.call(this); if (null != hb._scaleSprite) throw "AutoScale should be added only once!";
        Ea.init() };
    g["jsembed.AutoScale"] = hb;
    hb.__name__ = ["jsembed", "AutoScale"];
    hb.__super__ = k;
    hb.prototype = l(k.prototype, {
        get_name: function() { return "AutoScale_99" },
        onAdded: function() {
            null !=
                this.owner._compMap.Sprite_19 ? hb._scaleSprite = this.owner._compMap.Sprite_19 : (hb._scaleSprite = new s, this.owner.add(hb._scaleSprite))
        },
        onUpdate: function() { hb.tmp = Ea.get_canvasScale();
            0 < hb.tmp && hb.tmp != hb.SCALE && (hb.SCALE = hb.tmp, hb._scaleSprite.scaleX.set__(hb.tmp), hb._scaleSprite.scaleY.set__(hb.tmp)) },
        __class__: hb
    });
    var ac = function() {};
    g["jsembed.BaseUtils"] = ac;
    ac.__name__ = ["jsembed", "BaseUtils"];
    ac.setupManifest = function(a) { "" != ac.BASE_URL && (Ea.get_isCrossdomain() ? a.set_remoteBase(ac.BASE_URL) : a.set_localBase(ac.BASE_URL)) };
    ac.setupBaseURL = function() { Ea.init();
        ac.BASE_URL = Ea.get_exists() ? Ea.get_isCrossdomain() ? ac.appendAssetsToUrl(Ea.get_base()) : ac.trimUrl(Ea.get_base()) : "" };
    ac.trimUrl = function(a) { if ("" == a) return ""; if (0 > a.indexOf("http")) return "/" == a.charAt(0) && (a = N.substr(a, 1, a.length - 1)), a; var b = a.indexOf("http://");
        0 > b ? (b = a.indexOf("https://"), b = 0 > b ? 0 : b + 8) : b += 7;
        b = a.indexOf("/", b);
        a = N.substr(a, b, a.length - b); return a = ac.appendAssetsToUrl(a) };
    ac.appendAssetsToUrl = function(a) {
        "/" != a.charAt(a.length - 1) && (a += "/");
        return a +
            "assets/"
    };
    var ib = function(a, b) { k.call(this); if (!ib.hasInit) throw "Please call 'jsembed.HardwareAutoScale.init();' BEFORE  Flambe 'System.init()'";
        Ea.init();
        this.gameWidth = a;
        this.gameHeight = b;
        this._htmlStage = w._platform.getStage();
        this._stage = w._platform.getStage();
        this._canvas = this._stage._canvas;
        this.resizeCanvas(a, b) };
    g["jsembed.HardwareAutoScale"] = ib;
    ib.__name__ = ["jsembed", "HardwareAutoScale"];
    ib.init = function() {
        if (!ib.hasInit) {
            ib.hasInit = !0;
            var a = Dg;
            a.prototype.onWindowResize = function() {};
            a.prototype.requestResize =
                function() {};
            a.prototype.resizeCanvas = function(a, c) { this._canvas.width = a;
                this._canvas.height = c;
                this.resize.emit(); return !0 }
        }
    };
    ib.__super__ = k;
    ib.prototype = l(k.prototype, {
        get_name: function() { return "HardwareAutoScale_98" },
        resizeCanvas: function(a, b) { this._canvas.width = this._stage.width = a;
            this._canvas.height = this._stage.width = b;
            this._htmlStage.resize.emit() },
        onUpdate: function() {
            ib._tmp = Ea.get_canvasScale();
            0 < ib._tmp && ib._tmp != ib.SCALE && (ib.SCALE = ib._tmp, this._canvas.style.width = this.gameWidth * ib.SCALE +
                "px", this._canvas.style.height = this.gameHeight * ib.SCALE + "px")
        },
        __class__: ib
    });
    var Ea = function() {};
    g["jsembed.JSEmbedProxy"] = Ea;
    Ea.__name__ = ["jsembed", "JSEmbedProxy"];
    Ea.__properties__ = { get_canvasScale: "get_canvasScale", get_isCrossdomain: "get_isCrossdomain", get_base: "get_base", get_exists: "get_exists" };
    Ea.init = function() { if (null != Ea.JSEMBED) return !0; try { return Ea.JSEMBED = eval("jsembed"), Ea.enabled = !0 } catch (a) {} return !1 };
    Ea.get_exists = function() { return !Ea.enabled ? !1 : Ea.JSEMBED.exists() };
    Ea.get_base =
        function() { return !Ea.enabled ? null : Ea.JSEMBED.baseUrl() };
    Ea.get_isCrossdomain = function() { return !Ea.enabled ? !0 : Ea.JSEMBED.isBaseCrossdomain() };
    Ea.get_canvasScale = function() { return !Ea.enabled ? 0 : u.parseFloat(Ea.JSEMBED.canvasScale()) };
    var t = function() {};
    g["nape.Config"] = t;
    t.__name__ = ["nape", "Config"];
    var bc = function() { this.zpp_inner = null };
    g["nape.callbacks.Callback"] = bc;
    bc.__name__ = ["nape", "callbacks", "Callback"];
    bc.prototype = { toString: function() { return "" }, __class__: bc };
    var Ej = function() {
        this.zpp_inner =
            null
    };
    g["nape.callbacks.BodyCallback"] = Ej;
    Ej.__name__ = ["nape", "callbacks", "BodyCallback"];
    Ej.__super__ = bc;
    Ej.prototype = l(bc.prototype, { toString: function() { var a;
            a = "Cb:" + ["WAKE", "SLEEP"][this.zpp_inner.event - h.id_CbEvent_WAKE];
            a += ":" + this.zpp_inner.body.outer.toString(); return a += " : listener: " + u.string(this.zpp_inner.listener.outer) }, __class__: Ej });
    var cc = function() { this.zpp_inner = null };
    g["nape.callbacks.Listener"] = cc;
    cc.__name__ = ["nape", "callbacks", "Listener"];
    cc.prototype = {
        toString: function() {
            var a =
                "BEGIN,END,WAKE,SLEEP,BREAK,PRE,ONGOING".split(",")[this.zpp_inner.event];
            if (this.zpp_inner.type == h.id_ListenerType_BODY) return "BodyListener{" + a + "::" + u.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer) + "}";
            if (this.zpp_inner.type == h.id_ListenerType_CONSTRAINT) return "ConstraintListener{" + a + "::" + u.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer) + "}";
            var b = this.zpp_inner.interaction,
                c;
            switch (b.itype) {
                case h.id_InteractionType_COLLISION:
                    c = "COLLISION";
                    break;
                case h.id_InteractionType_SENSOR:
                    c =
                        "SENSOR";
                    break;
                case h.id_InteractionType_FLUID:
                    c = "FLUID";
                    break;
                default:
                    c = "ALL"
            }
            return (this.zpp_inner.type == h.id_ListenerType_INTERACTION ? "InteractionListener{" + a + "#" + c + "::" + u.string(b.outer_zni.zpp_inner_zn.options1.outer) + ":" + u.string(b.outer_zni.zpp_inner_zn.options2.outer) + "}" : "PreListener{" + c + "::" + u.string(b.outer_znp.zpp_inner_zn.options1.outer) + ":" + u.string(b.outer_znp.zpp_inner_zn.options2.outer) + "}") + " precedence=" + this.zpp_inner.precedence
        },
        __class__: cc
    };
    var am = function() {
        this.zpp_inner_zn =
            null
    };
    g["nape.callbacks.BodyListener"] = am;
    am.__name__ = ["nape", "callbacks", "BodyListener"];
    am.__super__ = cc;
    am.prototype = l(cc.prototype, { __class__: am });
    var sc = function() {};
    g["nape.callbacks.CbEvent"] = sc;
    sc.__name__ = ["nape", "callbacks", "CbEvent"];
    sc.prototype = {
        toString: function() {
            var a;
            null == h.CbEvent_PRE && (h.internal = !0, h.CbEvent_PRE = new sc, h.internal = !1);
            this == h.CbEvent_PRE ? a = "PRE" : (null == h.CbEvent_BEGIN && (h.internal = !0, h.CbEvent_BEGIN = new sc, h.internal = !1), this == h.CbEvent_BEGIN ? a = "BEGIN" : (null == h.CbEvent_ONGOING &&
                (h.internal = !0, h.CbEvent_ONGOING = new sc, h.internal = !1), this == h.CbEvent_ONGOING ? a = "ONGOING" : (null == h.CbEvent_END && (h.internal = !0, h.CbEvent_END = new sc, h.internal = !1), this == h.CbEvent_END ? a = "END" : (null == h.CbEvent_WAKE && (h.internal = !0, h.CbEvent_WAKE = new sc, h.internal = !1), this == h.CbEvent_WAKE ? a = "WAKE" : (null == h.CbEvent_SLEEP && (h.internal = !0, h.CbEvent_SLEEP = new sc, h.internal = !1), this == h.CbEvent_SLEEP ? a = "SLEEP" : (null == h.CbEvent_BREAK && (h.internal = !0, h.CbEvent_BREAK = new sc, h.internal = !1), a = this == h.CbEvent_BREAK ?
                    "BREAK" : ""))))));
            return a
        },
        __class__: sc
    };
    var cf = function() { this.zpp_inner = null;
        this.zpp_inner = new dc;
        this.zpp_inner.outer = this };
    g["nape.callbacks.CbType"] = cf;
    cf.__name__ = ["nape", "callbacks", "CbType"];
    cf.prototype = { toString: function() { return this == dc.ANY_BODY ? "ANY_BODY" : this == dc.ANY_SHAPE ? "ANY_SHAPE" : this == dc.ANY_COMPOUND ? "ANY_COMPOUND" : this == dc.ANY_CONSTRAINT ? "ANY_CONSTRAINT" : "CbType#" + this.zpp_inner.id }, __class__: cf };
    var tc = function() {
        this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner =
            null
    };
    g["nape.callbacks.CbTypeIterator"] = tc;
    tc.__name__ = ["nape", "callbacks", "CbTypeIterator"];
    tc.get = function(a) { var b;
        null == tc.zpp_pool ? (je.internal = !0, b = new tc, je.internal = !1) : (b = tc.zpp_pool, tc.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    tc.prototype = {
        hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = tc.zpp_pool;
            tc.zpp_pool = this;
            this.zpp_inner = null; return !1 },
        next: function() {
            this.zpp_critical = !1;
            return this.zpp_inner.at(this.zpp_i++)
        },
        __class__: tc
    };
    var Fj = function() { this.zpp_inner = null;
        this.zpp_inner = new je;
        this.zpp_inner.outer = this };
    g["nape.callbacks.CbTypeList"] = Fj;
    Fj.__name__ = ["nape", "callbacks", "CbTypeList"];
    Fj.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        has: function(a) { this.zpp_inner.valmod(); return this.zpp_inner.inner.has(a.zpp_inner) },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) :
                !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) : (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        unshift: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ?
                this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)) : this.zpp_inner.inner.add(a.zpp_inner), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        add: function(a) { return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a) },
        remove: function(a) { this.zpp_inner.modify_test();
            this.zpp_inner.valmod(); var b;
            b = !1; for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner), this.zpp_inner.invalidate()); return b },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = tc.get(this); c.hasNext();) {
                var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null ==
                    d ? a + "NULL" : a + d.toString();
                b = !1
            }
            return a + "]"
        },
        __class__: Fj,
        __properties__: { get_length: "get_length" }
    };
    var Gj = function() { this.zpp_inner = null };
    g["nape.callbacks.ConstraintCallback"] = Gj;
    Gj.__name__ = ["nape", "callbacks", "ConstraintCallback"];
    Gj.__super__ = bc;
    Gj.prototype = l(bc.prototype, { toString: function() { var a;
            a = "Cb:" + ["WAKE", "SLEEP", "BREAK"][this.zpp_inner.event - h.id_CbEvent_WAKE];
            a += ":" + this.zpp_inner.constraint.outer.toString(); return a += " : listener: " + u.string(this.zpp_inner.listener.outer) }, __class__: Gj });
    var bm = function() { this.zpp_inner_zn = null };
    g["nape.callbacks.ConstraintListener"] = bm;
    bm.__name__ = ["nape", "callbacks", "ConstraintListener"];
    bm.__super__ = cc;
    bm.prototype = l(cc.prototype, { __class__: bm });
    var Hj = function() { this.zpp_inner = null };
    g["nape.callbacks.InteractionCallback"] = Hj;
    Hj.__name__ = ["nape", "callbacks", "InteractionCallback"];
    Hj.__super__ = bc;
    Hj.prototype = l(bc.prototype, {
        toString: function() {
            var a;
            a = "Cb:" + "BEGIN,END,,,,,ONGOING".split(",")[this.zpp_inner.event];
            a += ":" + this.zpp_inner.int1.outer_i.toString() +
                "/" + this.zpp_inner.int2.outer_i.toString();
            a += " : " + this.zpp_inner.wrap_arbiters.toString();
            return a += " : listener: " + u.string(this.zpp_inner.listener.outer)
        },
        __class__: Hj
    });
    var kg = function(a, b, c, d, e, f) {
        null == f && (f = 0);
        this.zpp_inner = this.zpp_inner_zn = null;
        var j = -1;
        null == h.CbEvent_BEGIN && (h.internal = !0, h.CbEvent_BEGIN = new sc, h.internal = !1);
        a == h.CbEvent_BEGIN ? j = h.id_CbEvent_BEGIN : (null == h.CbEvent_END && (h.internal = !0, h.CbEvent_END = new sc, h.internal = !1), a == h.CbEvent_END ? j = h.id_CbEvent_END : (null == h.CbEvent_ONGOING &&
            (h.internal = !0, h.CbEvent_ONGOING = new sc, h.internal = !1), a == h.CbEvent_ONGOING && (j = h.id_CbEvent_ONGOING)));
        this.zpp_inner = this.zpp_inner_zn = new Fb(df.argument(c), df.argument(d), j, h.id_ListenerType_INTERACTION);
        this.zpp_inner.outer = this;
        this.zpp_inner_zn.outer_zni = this;
        this.zpp_inner.precedence = f;
        this.zpp_inner_zn.handleri = e;
        this.set_interactionType(b)
    };
    g["nape.callbacks.InteractionListener"] = kg;
    kg.__name__ = ["nape", "callbacks", "InteractionListener"];
    kg.__super__ = cc;
    kg.prototype = l(cc.prototype, {
        get_interactionType: function() {
            var a =
                this.zpp_inner_zn.itype;
            if (a == h.id_InteractionType_COLLISION) return null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION = new Va, h.internal = !1), h.InteractionType_COLLISION;
            if (a == h.id_InteractionType_SENSOR) return null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR = new Va, h.internal = !1), h.InteractionType_SENSOR;
            if (a == h.id_InteractionType_FLUID) return null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Va, h.internal = !1), h.InteractionType_FLUID;
            return a == h.id_InteractionType_ANY ? (null == h.InteractionType_ANY && (h.internal = !0, h.InteractionType_ANY = new Va, h.internal = !1), h.InteractionType_ANY) : null
        },
        set_interactionType: function(a) {
            if (this.get_interactionType() != a) {
                var b = this.zpp_inner_zn;
                null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION = new Va, h.internal = !1);
                a == h.InteractionType_COLLISION ? a = h.id_InteractionType_COLLISION : (null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR = new Va, h.internal = !1),
                    a == h.InteractionType_SENSOR ? a = h.id_InteractionType_SENSOR : (null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Va, h.internal = !1), a = a == h.InteractionType_FLUID ? h.id_InteractionType_FLUID : h.id_InteractionType_ANY));
                b.itype = a
            }
            return this.get_interactionType()
        },
        __class__: kg,
        __properties__: { set_interactionType: "set_interactionType", get_interactionType: "get_interactionType" }
    });
    var Va = function() {};
    g["nape.callbacks.InteractionType"] = Va;
    Va.__name__ = ["nape", "callbacks", "InteractionType"];
    Va.prototype = {
        toString: function() {
            var a;
            null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION = new Va, h.internal = !1);
            this == h.InteractionType_COLLISION ? a = "COLLISION" : (null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR = new Va, h.internal = !1), this == h.InteractionType_SENSOR ? a = "SENSOR" : (null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Va, h.internal = !1), this == h.InteractionType_FLUID ? a = "FLUID" : (null == h.InteractionType_ANY && (h.internal = !0,
                h.InteractionType_ANY = new Va, h.internal = !1), a = this == h.InteractionType_ANY ? "ANY" : "")));
            return a
        },
        __class__: Va
    };
    var ze = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.callbacks.ListenerIterator"] = ze;
    ze.__name__ = ["nape", "callbacks", "ListenerIterator"];
    ze.get = function(a) { var b;
        null == ze.zpp_pool ? (ef.internal = !0, b = new ze, ef.internal = !1) : (b = ze.zpp_pool, ze.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    ze.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = ze.zpp_pool;
            ze.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: ze
    };
    var cm = function() { this.zpp_inner = null;
        this.zpp_inner = new ef;
        this.zpp_inner.outer = this };
    g["nape.callbacks.ListenerList"] = cm;
    cm.__name__ = ["nape", "callbacks", "ListenerList"];
    cm.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length &&
                (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) : (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder &&
                this.zpp_inner.post_adder(a);
            return b
        },
        unshift: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)) : this.zpp_inner.inner.add(a.zpp_inner), this.zpp_inner.invalidate(),
                null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        add: function(a) { return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a) },
        remove: function(a) { this.zpp_inner.modify_test();
            this.zpp_inner.valmod(); var b;
            b = !1; for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner), this.zpp_inner.invalidate()); return b },
        toString: function() {
            var a =
                "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = ze.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 }
            return a + "]"
        },
        __class__: cm,
        __properties__: { get_length: "get_length" }
    };
    var lg = function() {};
    g["nape.callbacks.ListenerType"] = lg;
    lg.__name__ = ["nape", "callbacks", "ListenerType"];
    lg.prototype = {
        toString: function() {
            var a;
            null == h.ListenerType_BODY && (h.internal = !0, h.ListenerType_BODY = new lg, h.internal = !1);
            this == h.ListenerType_BODY ? a = "BODY" :
                (null == h.ListenerType_CONSTRAINT && (h.internal = !0, h.ListenerType_CONSTRAINT = new lg, h.internal = !1), this == h.ListenerType_CONSTRAINT ? a = "CONSTRAINT" : (null == h.ListenerType_INTERACTION && (h.internal = !0, h.ListenerType_INTERACTION = new lg, h.internal = !1), this == h.ListenerType_INTERACTION ? a = "INTERACTION" : (null == h.ListenerType_PRE && (h.internal = !0, h.ListenerType_PRE = new lg, h.internal = !1), a = this == h.ListenerType_PRE ? "PRE" : "")));
            return a
        },
        __class__: lg
    };
    var mg = function(a, b) {
        this.zpp_inner = null;
        this.zpp_inner = new df;
        this.zpp_inner.outer = this;
        null != a && this.including(a);
        null != b && this.excluding(b)
    };
    g["nape.callbacks.OptionType"] = mg;
    mg.__name__ = ["nape", "callbacks", "OptionType"];
    mg.prototype = {
        including: function(a) { this.zpp_inner.append(this.zpp_inner.includes, a); return this },
        excluding: function(a) { this.zpp_inner.append(this.zpp_inner.excludes, a); return this },
        toString: function() {
            null == this.zpp_inner.wrap_includes && this.zpp_inner.setup_includes();
            var a = this.zpp_inner.wrap_includes.toString();
            null == this.zpp_inner.wrap_excludes &&
                this.zpp_inner.setup_excludes();
            return "@{" + a + " excluding " + this.zpp_inner.wrap_excludes.toString() + "}"
        },
        __class__: mg
    };
    var Ij = function() { this.zpp_inner = null };
    g["nape.callbacks.PreCallback"] = Ij;
    Ij.__name__ = ["nape", "callbacks", "PreCallback"];
    Ij.__super__ = bc;
    Ij.prototype = l(bc.prototype, {
        toString: function() { var a;
            a = "Cb:PRE:" + (":" + this.zpp_inner.int1.outer_i.toString() + "/" + this.zpp_inner.int2.outer_i.toString());
            a += " : " + this.zpp_inner.pre_arbiter.wrapper().toString(); return a += " : listnener: " + u.string(this.zpp_inner.listener.outer) },
        __class__: Ij
    });
    var Na = function() {};
    g["nape.callbacks.PreFlag"] = Na;
    Na.__name__ = ["nape", "callbacks", "PreFlag"];
    Na.prototype = {
        toString: function() {
            var a;
            null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new Na, h.internal = !1);
            this == h.PreFlag_ACCEPT ? a = "ACCEPT" : (null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new Na, h.internal = !1), this == h.PreFlag_IGNORE ? a = "IGNORE" : (null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new Na, h.internal = !1), this == h.PreFlag_ACCEPT_ONCE ? a = "ACCEPT_ONCE" :
                (null == h.PreFlag_IGNORE_ONCE && (h.internal = !0, h.PreFlag_IGNORE_ONCE = new Na, h.internal = !1), a = this == h.PreFlag_IGNORE_ONCE ? "IGNORE_ONCE" : "")));
            return a
        },
        __class__: Na
    };
    var Jj = function(a, b, c, d, e, f) {
        null == f && (f = !1);
        null == e && (e = 0);
        this.zpp_inner = this.zpp_inner_zn = null;
        this.zpp_inner = this.zpp_inner_zn = new Fb(df.argument(b), df.argument(c), h.id_CbEvent_PRE, h.id_ListenerType_PRE);
        this.zpp_inner.outer = this;
        this.zpp_inner_zn.outer_znp = this;
        this.zpp_inner.precedence = e;
        this.zpp_inner_zn.pure = f;
        this.zpp_inner_zn.handlerp =
            d;
        this.set_interactionType(a)
    };
    g["nape.callbacks.PreListener"] = Jj;
    Jj.__name__ = ["nape", "callbacks", "PreListener"];
    Jj.__super__ = cc;
    Jj.prototype = l(cc.prototype, {
        get_interactionType: function() {
            var a = this.zpp_inner_zn.itype;
            if (a == h.id_InteractionType_COLLISION) return null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION = new Va, h.internal = !1), h.InteractionType_COLLISION;
            if (a == h.id_InteractionType_SENSOR) return null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR =
                new Va, h.internal = !1), h.InteractionType_SENSOR;
            if (a == h.id_InteractionType_FLUID) return null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Va, h.internal = !1), h.InteractionType_FLUID;
            return a == h.id_InteractionType_ANY ? (null == h.InteractionType_ANY && (h.internal = !0, h.InteractionType_ANY = new Va, h.internal = !1), h.InteractionType_ANY) : null
        },
        set_interactionType: function(a) {
            if (this.get_interactionType() != a) {
                var b = this.zpp_inner_zn;
                null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION =
                    new Va, h.internal = !1);
                a == h.InteractionType_COLLISION ? a = h.id_InteractionType_COLLISION : (null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR = new Va, h.internal = !1), a == h.InteractionType_SENSOR ? a = h.id_InteractionType_SENSOR : (null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Va, h.internal = !1), a = a == h.InteractionType_FLUID ? h.id_InteractionType_FLUID : h.id_InteractionType_ANY));
                b.itype = a
            }
            return this.get_interactionType()
        },
        __class__: Jj,
        __properties__: {
            set_interactionType: "set_interactionType",
            get_interactionType: "get_interactionType"
        }
    });
    var dn = function() {};
    g["nape.constraint.Constraint"] = dn;
    dn.__name__ = ["nape", "constraint", "Constraint"];
    dn.prototype = { toString: function() { return "{Constraint}" }, __class__: dn };
    var Qb = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.constraint.ConstraintIterator"] = Qb;
    Qb.__name__ = ["nape", "constraint", "ConstraintIterator"];
    Qb.get = function(a) {
        var b;
        null == Qb.zpp_pool ? (Je.internal = !0, b = new Qb, Je.internal = !1) : (b = Qb.zpp_pool,
            Qb.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1;
        return b
    };
    Qb.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = Qb.zpp_pool;
            Qb.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: Qb };
    var dm = function() { this.zpp_inner = null;
        this.zpp_inner = new Je;
        this.zpp_inner.outer = this };
    g["nape.constraint.ConstraintList"] =
        dm;
    dm.__name__ = ["nape", "constraint", "ConstraintList"];
    dm.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        at: function(a) {
            this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index !=
                    a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
            return this.zpp_inner.at_ite.elt.outer
        },
        remove: function(a) { this.zpp_inner.modify_test();
            this.zpp_inner.valmod(); var b;
            b = !1; for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner), this.zpp_inner.invalidate()); return b },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = Qb.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 }
            return a + "]"
        },
        __class__: dm,
        __properties__: { get_length: "get_length" }
    };
    var ff = function() { this.zpp_inner = null };
    g["nape.dynamics.Arbiter"] = ff;
    ff.__name__ = ["nape", "dynamics", "Arbiter"];
    ff.prototype = {
        get_collisionArbiter: function() { return this.zpp_inner.type == aa.COL ? this.zpp_inner.colarb.outer_zn : null },
        get_state: function() {
            var a = this.zpp_inner.immState;
            if (a == (h.id_ImmState_ACCEPT |
                    h.id_ImmState_ALWAYS)) return null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new Na, h.internal = !1), h.PreFlag_ACCEPT;
            switch (a) {
                case h.id_ImmState_ACCEPT:
                    return null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new Na, h.internal = !1), h.PreFlag_ACCEPT_ONCE;
                default:
                    if (a == (h.id_ImmState_IGNORE | h.id_ImmState_ALWAYS)) return null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new Na, h.internal = !1), h.PreFlag_IGNORE;
                    null == h.PreFlag_IGNORE_ONCE && (h.internal = !0, h.PreFlag_IGNORE_ONCE =
                        new Na, h.internal = !1);
                    return h.PreFlag_IGNORE_ONCE
            }
        },
        toString: function() {
            var a;
            a = this.zpp_inner.type == aa.COL ? "CollisionArbiter" : this.zpp_inner.type == aa.FLUID ? "FluidArbiter" : "SensorArbiter";
            return this.zpp_inner.cleared ? a + "(object-pooled)" : a + "(" + (this.zpp_inner.ws1.id > this.zpp_inner.ws2.id ? this.zpp_inner.ws2.outer : this.zpp_inner.ws1.outer).toString() + "|" + (this.zpp_inner.ws1.id > this.zpp_inner.ws2.id ? this.zpp_inner.ws1.outer : this.zpp_inner.ws2.outer).toString() + ")" + (this.zpp_inner.type == aa.COL ? "[" + ["SD",
                "DD"
            ][this.zpp_inner.colarb.stat ? 0 : 1] + "]" : "") + "<-" + this.get_state().toString()
        },
        __class__: ff,
        __properties__: { get_state: "get_state", get_collisionArbiter: "get_collisionArbiter" }
    };
    var Rb = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.dynamics.ArbiterIterator"] = Rb;
    Rb.__name__ = ["nape", "dynamics", "ArbiterIterator"];
    Rb.get = function(a) {
        var b;
        null == Rb.zpp_pool ? (gf.internal = !0, b = new Rb, gf.internal = !1) : (b = Rb.zpp_pool, Rb.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner =
            a;
        b.zpp_critical = !1;
        return b
    };
    Rb.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.zpp_gl();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = Rb.zpp_pool;
            Rb.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: Rb };
    var em = function() { this.zpp_inner = null;
        this.zpp_inner = new gf;
        this.zpp_inner.outer = this };
    g["nape.dynamics.ArbiterList"] = em;
    em.__name__ = ["nape", "dynamics", "ArbiterList"];
    em.prototype = {
        zpp_gl: function() { this.zpp_inner.valmod(); if (this.zpp_inner.zip_length) { this.zpp_inner.zip_length = !1;
                this.zpp_inner.user_length = 0; for (var a = this.zpp_inner.inner.head; null != a;) a.elt.active && this.zpp_inner.user_length++, a = a.next } return this.zpp_inner.user_length },
        zpp_vm: function() { this.zpp_inner.valmod() },
        at: function(a) {
            this.zpp_vm();
            this.zpp_inner.reverse_flag && (a = this.zpp_gl() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) {
                this.zpp_inner.at_index = 0;
                for (this.zpp_inner.at_ite =
                    this.zpp_inner.inner.head; !this.zpp_inner.at_ite.elt.active;) this.zpp_inner.at_ite = this.zpp_inner.at_ite.next
            }
            for (; this.zpp_inner.at_index != a;) { this.zpp_inner.at_index++; for (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; !this.zpp_inner.at_ite.elt.active;) this.zpp_inner.at_ite = this.zpp_inner.at_ite.next }
            return this.zpp_inner.at_ite.elt.wrapper()
        },
        iterator: function() { this.zpp_vm(); return Rb.get(this) },
        toString: function() {
            for (var a = "[", b = !0, c = this.iterator(); c.hasNext();) {
                var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1
            }
            return a + "]"
        },
        __class__: em
    };
    var ch = function() {};
    g["nape.dynamics.ArbiterType"] = ch;
    ch.__name__ = ["nape", "dynamics", "ArbiterType"];
    ch.prototype = {
        toString: function() {
            var a;
            null == h.ArbiterType_COLLISION && (h.internal = !0, h.ArbiterType_COLLISION = new ch, h.internal = !1);
            this == h.ArbiterType_COLLISION ? a = "COLLISION" : (null == h.ArbiterType_SENSOR && (h.internal = !0, h.ArbiterType_SENSOR = new ch, h.internal = !1), this == h.ArbiterType_SENSOR ? a = "SENSOR" :
                (null == h.ArbiterType_FLUID && (h.internal = !0, h.ArbiterType_FLUID = new ch, h.internal = !1), a = this == h.ArbiterType_FLUID ? "FLUID" : ""));
            return a
        },
        __class__: ch
    };
    var Kj = function() { this.zpp_inner = null };
    g["nape.dynamics.CollisionArbiter"] = Kj;
    Kj.__name__ = ["nape", "dynamics", "CollisionArbiter"];
    Kj.__super__ = ff;
    Kj.prototype = l(ff.prototype, {
        get_dynamicFriction: function() {
            var a = this.zpp_inner.colarb;
            a.invalidated && (a.invalidated = !1, a.userdef_restitution || (a.restitution = a.s1.material.elasticity <= Math.NEGATIVE_INFINITY ||
                    a.s2.material.elasticity <= Math.NEGATIVE_INFINITY ? 0 : a.s1.material.elasticity >= Math.POSITIVE_INFINITY || a.s2.material.elasticity >= Math.POSITIVE_INFINITY ? 1 : (a.s1.material.elasticity + a.s2.material.elasticity) / 2, 0 > a.restitution && (a.restitution = 0), 1 < a.restitution && (a.restitution = 1)), a.userdef_dyn_fric || (a.dyn_fric = Math.sqrt(a.s1.material.dynamicFriction * a.s2.material.dynamicFriction)), a.userdef_stat_fric || (a.stat_fric = Math.sqrt(a.s1.material.staticFriction * a.s2.material.staticFriction)), a.userdef_rfric ||
                (a.rfric = Math.sqrt(a.s1.material.rollingFriction * a.s2.material.rollingFriction)));
            return a.dyn_fric
        },
        set_dynamicFriction: function(a) { var b = this.zpp_inner.colarb;
            b.dyn_fric = a;
            b.userdef_dyn_fric = !0; return this.get_dynamicFriction() },
        get_staticFriction: function() {
            var a = this.zpp_inner.colarb;
            a.invalidated && (a.invalidated = !1, a.userdef_restitution || (a.restitution = a.s1.material.elasticity <= Math.NEGATIVE_INFINITY || a.s2.material.elasticity <= Math.NEGATIVE_INFINITY ? 0 : a.s1.material.elasticity >= Math.POSITIVE_INFINITY ||
                a.s2.material.elasticity >= Math.POSITIVE_INFINITY ? 1 : (a.s1.material.elasticity + a.s2.material.elasticity) / 2, 0 > a.restitution && (a.restitution = 0), 1 < a.restitution && (a.restitution = 1)), a.userdef_dyn_fric || (a.dyn_fric = Math.sqrt(a.s1.material.dynamicFriction * a.s2.material.dynamicFriction)), a.userdef_stat_fric || (a.stat_fric = Math.sqrt(a.s1.material.staticFriction * a.s2.material.staticFriction)), a.userdef_rfric || (a.rfric = Math.sqrt(a.s1.material.rollingFriction * a.s2.material.rollingFriction)));
            return a.stat_fric
        },
        set_staticFriction: function(a) { var b = this.zpp_inner.colarb;
            b.stat_fric = a;
            b.userdef_stat_fric = !0; return this.get_staticFriction() },
        get_rollingFriction: function() {
            var a = this.zpp_inner.colarb;
            a.invalidated && (a.invalidated = !1, a.userdef_restitution || (a.restitution = a.s1.material.elasticity <= Math.NEGATIVE_INFINITY || a.s2.material.elasticity <= Math.NEGATIVE_INFINITY ? 0 : a.s1.material.elasticity >= Math.POSITIVE_INFINITY || a.s2.material.elasticity >= Math.POSITIVE_INFINITY ? 1 : (a.s1.material.elasticity + a.s2.material.elasticity) /
                2, 0 > a.restitution && (a.restitution = 0), 1 < a.restitution && (a.restitution = 1)), a.userdef_dyn_fric || (a.dyn_fric = Math.sqrt(a.s1.material.dynamicFriction * a.s2.material.dynamicFriction)), a.userdef_stat_fric || (a.stat_fric = Math.sqrt(a.s1.material.staticFriction * a.s2.material.staticFriction)), a.userdef_rfric || (a.rfric = Math.sqrt(a.s1.material.rollingFriction * a.s2.material.rollingFriction)));
            return a.rfric
        },
        set_rollingFriction: function(a) { var b = this.zpp_inner.colarb;
            b.rfric = a;
            b.userdef_rfric = !0; return this.get_rollingFriction() },
        __class__: Kj,
        __properties__: l(ff.prototype.__properties__, { set_rollingFriction: "set_rollingFriction", get_rollingFriction: "get_rollingFriction", set_staticFriction: "set_staticFriction", get_staticFriction: "get_staticFriction", set_dynamicFriction: "set_dynamicFriction", get_dynamicFriction: "get_dynamicFriction" })
    });
    var fm = function() { this.zpp_inner = null };
    g["nape.dynamics.Contact"] = fm;
    fm.__name__ = ["nape", "dynamics", "Contact"];
    fm.prototype = {
        toString: function() {
            return null == this.zpp_inner.arbiter || this.zpp_inner.arbiter.cleared ?
                "{object-pooled}" : "{Contact}"
        },
        __class__: fm
    };
    var Yd = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.dynamics.ContactIterator"] = Yd;
    Yd.__name__ = ["nape", "dynamics", "ContactIterator"];
    Yd.get = function(a) { var b;
        null == Yd.zpp_pool ? (dh.internal = !0, b = new Yd, dh.internal = !1) : (b = Yd.zpp_pool, Yd.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    Yd.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = Yd.zpp_pool;
            Yd.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: Yd
    };
    var en = function() { this.zpp_inner = null };
    g["nape.dynamics.ContactList"] = en;
    en.__name__ = ["nape", "dynamics", "ContactList"];
    en.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            if (this.zpp_inner.zip_length) {
                this.zpp_inner.zip_length = !1;
                this.zpp_inner.user_length = 0;
                for (var a = this.zpp_inner.inner.next; null !=
                    a;) { var b = a;
                    b.active && b.arbiter.active && this.zpp_inner.user_length++;
                    a = a.next }
            }
            return this.zpp_inner.user_length
        },
        at: function(a) {
            this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) { this.zpp_inner.at_index = 0; for (this.zpp_inner.at_ite = this.zpp_inner.inner.next;;) { var b = this.zpp_inner.at_ite; if (b.active && b.arbiter.active) break;
                    this.zpp_inner.at_ite = this.zpp_inner.at_ite.next } }
            for (; this.zpp_inner.at_index != a;) {
                this.zpp_inner.at_index++;
                for (this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;;) { b = this.zpp_inner.at_ite; if (b.active && b.arbiter.active) break;
                    this.zpp_inner.at_ite = this.zpp_inner.at_ite.next }
            }
            return this.zpp_inner.at_ite.wrapper()
        },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = Yd.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: en,
        __properties__: { get_length: "get_length" }
    };
    var Lj = function() {
        this.zpp_inner =
            null
    };
    g["nape.dynamics.FluidArbiter"] = Lj;
    Lj.__name__ = ["nape", "dynamics", "FluidArbiter"];
    Lj.__super__ = ff;
    Lj.prototype = l(ff.prototype, { __class__: Lj });
    var gm = function(a, b, c, d, e, f) {
        null == f && (f = -1);
        null == e && (e = 1);
        null == d && (d = -1);
        null == c && (c = 1);
        null == b && (b = -1);
        null == a && (a = 1);
        this.zpp_inner = null;
        null == Ra.zpp_pool ? this.zpp_inner = new Ra : (this.zpp_inner = Ra.zpp_pool, Ra.zpp_pool = this.zpp_inner.next, this.zpp_inner.next = null);
        null;
        this.zpp_inner.outer = this;
        this.zpp_inner.collisionGroup != a && (this.zpp_inner.collisionGroup =
            a, this.zpp_inner.invalidate());
        this.zpp_inner.collisionGroup;
        this.zpp_inner.collisionMask != b && (this.zpp_inner.collisionMask = b, this.zpp_inner.invalidate());
        this.zpp_inner.collisionMask;
        this.zpp_inner.sensorGroup != c && (this.zpp_inner.sensorGroup = c, this.zpp_inner.invalidate());
        this.zpp_inner.sensorGroup;
        this.zpp_inner.sensorMask != d && (this.zpp_inner.sensorMask = d, this.zpp_inner.invalidate());
        this.zpp_inner.sensorMask;
        this.zpp_inner.fluidGroup != e && (this.zpp_inner.fluidGroup = e, this.zpp_inner.invalidate());
        this.zpp_inner.fluidGroup;
        this.zpp_inner.fluidMask != f && (this.zpp_inner.fluidMask = f, this.zpp_inner.invalidate());
        this.zpp_inner.fluidMask
    };
    g["nape.dynamics.InteractionFilter"] = gm;
    gm.__name__ = ["nape", "dynamics", "InteractionFilter"];
    gm.prototype = {
        set_collisionGroup: function(a) { this.zpp_inner.collisionGroup != a && (this.zpp_inner.collisionGroup = a, this.zpp_inner.invalidate()); return this.zpp_inner.collisionGroup },
        set_collisionMask: function(a) {
            this.zpp_inner.collisionMask != a && (this.zpp_inner.collisionMask =
                a, this.zpp_inner.invalidate());
            return this.zpp_inner.collisionMask
        },
        set_sensorGroup: function(a) { this.zpp_inner.sensorGroup != a && (this.zpp_inner.sensorGroup = a, this.zpp_inner.invalidate()); return this.zpp_inner.sensorGroup },
        set_sensorMask: function(a) { this.zpp_inner.sensorMask != a && (this.zpp_inner.sensorMask = a, this.zpp_inner.invalidate()); return this.zpp_inner.sensorMask },
        set_fluidGroup: function(a) { this.zpp_inner.fluidGroup != a && (this.zpp_inner.fluidGroup = a, this.zpp_inner.invalidate()); return this.zpp_inner.fluidGroup },
        set_fluidMask: function(a) { this.zpp_inner.fluidMask != a && (this.zpp_inner.fluidMask = a, this.zpp_inner.invalidate()); return this.zpp_inner.fluidMask },
        __class__: gm,
        __properties__: { set_fluidMask: "set_fluidMask", set_fluidGroup: "set_fluidGroup", set_sensorMask: "set_sensorMask", set_sensorGroup: "set_sensorGroup", set_collisionMask: "set_collisionMask", set_collisionGroup: "set_collisionGroup" }
    };
    var fn = function() { this.zpp_inner = null };
    g["nape.dynamics.InteractionGroup"] = fn;
    fn.__name__ = ["nape", "dynamics", "InteractionGroup"];
    fn.prototype = { toString: function() { var a = "InteractionGroup";
            this.zpp_inner.ignore && (a += ":ignore"); return a }, __class__: fn };
    var ke = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.dynamics.InteractionGroupIterator"] = ke;
    ke.__name__ = ["nape", "dynamics", "InteractionGroupIterator"];
    ke.get = function(a) { var b;
        null == ke.zpp_pool ? (eh.internal = !0, b = new ke, eh.internal = !1) : (b = ke.zpp_pool, ke.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    ke.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = ke.zpp_pool;
            ke.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: ke };
    var gn = function() { this.zpp_inner = null };
    g["nape.dynamics.InteractionGroupList"] = gn;
    gn.__name__ = ["nape", "dynamics", "InteractionGroupList"];
    gn.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length &&
                (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = ke.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: gn,
        __properties__: { get_length: "get_length" }
    };
    var hm = function(a, b, c, d) { null == d && (d = 0);
        null == c && (c = 0);
        null == b && (b = 0);
        null == a && (a = 0);
        this.zpp_inner = null;
        this.zpp_inner = Wa.get(a, b, a + c, b + d);
        this.zpp_inner.outer = this };
    g["nape.geom.AABB"] = hm;
    hm.__name__ = ["nape", "geom", "AABB"];
    hm.prototype = { get_width: function() { this.zpp_inner.validate(); return this.zpp_inner.width() }, get_height: function() { this.zpp_inner.validate(); return this.zpp_inner.height() }, toString: function() { this.zpp_inner.validate(); return this.zpp_inner.toString() }, __class__: hm, __properties__: { get_height: "get_height", get_width: "get_width" } };
    var hn = function() { this.zpp_inner = null };
    g["nape.geom.ConvexResult"] = hn;
    hn.__name__ = ["nape", "geom", "ConvexResult"];
    hn.prototype = {
        toString: function() {
            return "{ shape: " + u.string(this.zpp_inner.shape) +
                " toi: " + this.zpp_inner.toiDistance + " }"
        },
        __class__: hn
    };
    var le = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.geom.ConvexResultIterator"] = le;
    le.__name__ = ["nape", "geom", "ConvexResultIterator"];
    le.get = function(a) { var b;
        null == le.zpp_pool ? (fh.internal = !0, b = new le, fh.internal = !1) : (b = le.zpp_pool, le.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    le.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = le.zpp_pool;
            le.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: le
    };
    var jn = function() { this.zpp_inner = null };
    g["nape.geom.ConvexResultList"] = jn;
    jn.__name__ = ["nape", "geom", "ConvexResultList"];
    jn.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = le.get(this); c.hasNext();) {
                var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1
            }
            return a + "]"
        },
        __class__: jn,
        __properties__: { get_length: "get_length" }
    };
    var Fe = function(a) {
        this.zpp_pool = this.zpp_inner = null;
        this.zpp_inner = new im(this);
        if (null != a) {
            if (a instanceof Array && null == a.__enum__)
                for (var b = 0; b < a.length;) {
                    var c = a[b];
                    ++b;
                    var d = c,
                        c = uc.get(function() { d.zpp_inner.validate(); return d.zpp_inner.x }(this), function() { d.zpp_inner.validate(); return d.zpp_inner.y }(this));
                    null == this.zpp_inner.vertices ?
                        this.zpp_inner.vertices = c.prev = c.next = c : (c.prev = this.zpp_inner.vertices, c.next = this.zpp_inner.vertices.next, this.zpp_inner.vertices.next.prev = c, this.zpp_inner.vertices.next = c);
                    this.zpp_inner.vertices = c
                } else if (U.__instanceof(a, Hc))
                    for (b = a.iterator(); b.hasNext();) {
                        var e;
                        b.zpp_critical = !1;
                        e = b.zpp_inner.at(b.zpp_i++);
                        c = uc.get(function() { e.zpp_inner.validate(); return e.zpp_inner.x }(this), function() { e.zpp_inner.validate(); return e.zpp_inner.y }(this));
                        null == this.zpp_inner.vertices ? this.zpp_inner.vertices =
                            c.prev = c.next = c : (c.prev = this.zpp_inner.vertices, c.next = this.zpp_inner.vertices.next, this.zpp_inner.vertices.next.prev = c, this.zpp_inner.vertices.next = c);
                        this.zpp_inner.vertices = c
                    } else if (U.__instanceof(a, Fe) && (b = a.zpp_inner.vertices, null != b)) {
                        c = b;
                        do {
                            var f = fa.get(c.x, c.y, null),
                                c = c.next,
                                j = uc.get(function() { f.zpp_inner.validate(); return f.zpp_inner.x }(this), function() { f.zpp_inner.validate(); return f.zpp_inner.y }(this));
                            null == this.zpp_inner.vertices ? this.zpp_inner.vertices = j.prev = j.next = j : (j.prev = this.zpp_inner.vertices,
                                j.next = this.zpp_inner.vertices.next, this.zpp_inner.vertices.next.prev = j, this.zpp_inner.vertices.next = j);
                            this.zpp_inner.vertices = j;
                            f.dispose()
                        } while (c != b)
                    } this.skipForward(1);
            if (a instanceof Array && null == a.__enum__)
                for (b = 0; b < a.length;) { c = a[b]; if (j = c.zpp_inner.weak) c.dispose(), j = !0;
                    j ? a.splice(b, 1) : b++ } else if (U.__instanceof(a, Hc)) {
                    null != a.zpp_inner._validate && a.zpp_inner._validate();
                    a = a.zpp_inner.inner;
                    b = null;
                    for (c = a.head; null != c;) j = c.elt, j.outer.zpp_inner.weak ? (c = a.erase(b), j.outer.zpp_inner.weak ?
                        (j.outer.dispose(), !0) : !1) : (b = c, c = c.next)
                }
        }
    };
    g["nape.geom.GeomPoly"] = Fe;
    Fe.__name__ = ["nape", "geom", "GeomPoly"];
    Fe.get = function(a) {
        var b;
        null == hf.poolGeomPoly ? b = new Fe : (b = hf.poolGeomPoly, hf.poolGeomPoly = b.zpp_pool, b.zpp_pool = null);
        if (null != a) {
            if (a instanceof Array && null == a.__enum__)
                for (var c = 0; c < a.length;) {
                    var d = a[c];
                    ++c;
                    var e = d,
                        d = uc.get(function() { e.zpp_inner.validate(); return e.zpp_inner.x }(this), function() { e.zpp_inner.validate(); return e.zpp_inner.y }(this));
                    null == b.zpp_inner.vertices ? b.zpp_inner.vertices =
                        d.prev = d.next = d : (d.prev = b.zpp_inner.vertices, d.next = b.zpp_inner.vertices.next, b.zpp_inner.vertices.next.prev = d, b.zpp_inner.vertices.next = d);
                    b.zpp_inner.vertices = d
                } else if (U.__instanceof(a, Hc))
                    for (c = a.iterator(); c.hasNext();) {
                        var f;
                        c.zpp_critical = !1;
                        f = c.zpp_inner.at(c.zpp_i++);
                        d = uc.get(function() { f.zpp_inner.validate(); return f.zpp_inner.x }(this), function() { f.zpp_inner.validate(); return f.zpp_inner.y }(this));
                        null == b.zpp_inner.vertices ? b.zpp_inner.vertices = d.prev = d.next = d : (d.prev = b.zpp_inner.vertices,
                            d.next = b.zpp_inner.vertices.next, b.zpp_inner.vertices.next.prev = d, b.zpp_inner.vertices.next = d);
                        b.zpp_inner.vertices = d
                    } else if (U.__instanceof(a, Fe) && (c = a.zpp_inner.vertices, null != c)) {
                        d = c;
                        do {
                            var j = fa.get(d.x, d.y, null),
                                d = d.next,
                                p = uc.get(function() { j.zpp_inner.validate(); return j.zpp_inner.x }(this), function() { j.zpp_inner.validate(); return j.zpp_inner.y }(this));
                            null == b.zpp_inner.vertices ? b.zpp_inner.vertices = p.prev = p.next = p : (p.prev = b.zpp_inner.vertices, p.next = b.zpp_inner.vertices.next, b.zpp_inner.vertices.next.prev =
                                p, b.zpp_inner.vertices.next = p);
                            b.zpp_inner.vertices = p;
                            j.dispose()
                        } while (d != c)
                    } b.skipForward(1);
            if (a instanceof Array && null == a.__enum__)
                for (c = 0; c < a.length;) { d = a[c]; if (p = d.zpp_inner.weak) d.dispose(), p = !0;
                    p ? a.splice(c, 1) : c++ } else if (U.__instanceof(a, Hc)) { null != a.zpp_inner._validate && a.zpp_inner._validate();
                    a = a.zpp_inner.inner;
                    c = null; for (d = a.head; null != d;) p = d.elt, p.outer.zpp_inner.weak ? (d = a.erase(c), p.outer.zpp_inner.weak ? (p.outer.dispose(), !0) : !1) : (c = d, d = d.next) }
        }
        return b
    };
    Fe.prototype = {
        skipForward: function(a) {
            if (null !=
                this.zpp_inner.vertices)
                if (0 < a)
                    for (; 0 < a--;) this.zpp_inner.vertices = this.zpp_inner.vertices.next;
                else if (0 > a)
                for (; 0 > a++;) this.zpp_inner.vertices = this.zpp_inner.vertices.prev;
            return this
        },
        toString: function() { var a = "GeomPoly[",
                b = this.zpp_inner.vertices,
                c = this.zpp_inner.vertices; if (null != b) { do { var d = b;
                    d != this.zpp_inner.vertices && (a += ",");
                    a += "{" + d.x + "," + d.y + "}";
                    b = b.next } while (b != c) } return a + "]" },
        convexDecomposition: function(a, b) {
            null == a && (a = !1);
            var c = da.decompose(this.zpp_inner.vertices, function() {
                    null ==
                        da.sharedPPoly && (da.sharedPPoly = new pb);
                    return da.sharedPPoly
                }(this)).extract_partitions(function() { null == pb.sharedPPList && (pb.sharedPPList = new Mj); return pb.sharedPPList }(this)),
                d;
            for (d = null == b ? new Vi : b; null != c.head;) {
                var e = c.pop_unsafe();
                ea.triangulate(e);
                a && ea.optimise(e);
                gh.optimise(e);
                var f = e.extract(function() { null == pb.sharedGVList && (pb.sharedGVList = new Nj); return pb.sharedGVList }(this));
                e.next = pb.zpp_pool;
                for (pb.zpp_pool = e; null != f.head;) {
                    var e = f.pop_unsafe(),
                        j = Fe.get();
                    j.zpp_inner.vertices =
                        e;
                    d.zpp_inner.reverse_flag ? d.push(j) : d.unshift(j)
                }
            }
            return d
        },
        __class__: Fe
    };
    var rd = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.geom.GeomPolyIterator"] = rd;
    rd.__name__ = ["nape", "geom", "GeomPolyIterator"];
    rd.get = function(a) { var b;
        null == rd.zpp_pool ? (ng.internal = !0, b = new rd, ng.internal = !1) : (b = rd.zpp_pool, rd.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    rd.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = rd.zpp_pool;
            rd.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: rd
    };
    var Vi = function() { this.zpp_inner = null;
        this.zpp_inner = new ng;
        this.zpp_inner.outer = this };
    g["nape.geom.GeomPolyList"] = Vi;
    Vi.__name__ = ["nape", "geom", "GeomPolyList"];
    Vi.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length =
                this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) : (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        unshift: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)) : this.zpp_inner.inner.add(a.zpp_inner), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        toString: function() {
            var a =
                "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = rd.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 }
            return a + "]"
        },
        __class__: Vi,
        __properties__: { get_length: "get_length" }
    };
    var kn = function() { this.zpp_inner = null };
    g["nape.geom.Mat23"] = kn;
    kn.__name__ = ["nape", "geom", "Mat23"];
    kn.prototype = {
        toString: function() {
            return "{ a: " + this.zpp_inner.a + " b: " + this.zpp_inner.b + " c: " + this.zpp_inner.c + " d: " + this.zpp_inner.d + " tx: " + this.zpp_inner.tx +
                " ty: " + this.zpp_inner.ty + " }"
        },
        __class__: kn
    };
    var ln = function() { this.zpp_inner = null };
    g["nape.geom.MatMN"] = ln;
    ln.__name__ = ["nape", "geom", "MatMN"];
    ln.prototype = { toString: function() { for (var a = "{ ", b = !0, c = 0, d = this.zpp_inner.m; c < d;) { var e = c++;
                b || (a += "; "); for (var b = !1, f = 0, j = this.zpp_inner.n; f < j;) var p = f++,
                    a = a + (this.zpp_inner.x[e * this.zpp_inner.n + p] + " ") } return a + "}" }, __class__: ln };
    var Ln = function() {};
    g["nape.geom.Ray"] = Ln;
    Ln.__name__ = ["nape", "geom", "Ray"];
    var mn = function() { this.zpp_inner = null };
    g["nape.geom.RayResult"] =
        mn;
    mn.__name__ = ["nape", "geom", "RayResult"];
    mn.prototype = { toString: function() { return "{ shape: " + u.string(this.zpp_inner.shape) + " distance: " + this.zpp_inner.toiDistance + " ?inner: " + u.string(this.zpp_inner.inner) + " }" }, __class__: mn };
    var Kd = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.geom.RayResultIterator"] = Kd;
    Kd.__name__ = ["nape", "geom", "RayResultIterator"];
    Kd.get = function(a) {
        var b;
        null == Kd.zpp_pool ? (hh.internal = !0, b = new Kd, hh.internal = !1) : (b = Kd.zpp_pool,
            Kd.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1;
        return b
    };
    Kd.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = Kd.zpp_pool;
            Kd.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: Kd };
    var nn = function() { this.zpp_inner = null };
    g["nape.geom.RayResultList"] = nn;
    nn.__name__ = ["nape", "geom", "RayResultList"];
    nn.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        at: function(a) {
            this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++,
                    this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
            return this.zpp_inner.at_ite.elt
        },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = Kd.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: nn,
        __properties__: { get_length: "get_length" }
    };
    var fa = function(a, b) { null == b && (b = 0);
        null == a && (a = 0);
        this.zpp_inner = this.zpp_pool = null;
        this.zpp_inner = xa.get(a, b, null);
        this.zpp_inner.outer = this };
    g["nape.geom.Vec2"] =
        fa;
    fa.__name__ = ["nape", "geom", "Vec2"];
    fa.weak = function(a, b) { null == b && (b = 0);
        null == a && (a = 0); return fa.get(a, b, !0) };
    fa.get = function(a, b, c) {
        null == c && (c = !1);
        null == b && (b = 0);
        null == a && (a = 0);
        var d;
        null == hf.poolVec2 ? d = new fa : (d = hf.poolVec2, hf.poolVec2 = d.zpp_pool, d.zpp_pool = null);
        if (null == d.zpp_inner) d.zpp_inner = xa.get(a, b, null), d.zpp_inner.outer = d;
        else { var e;
            d.zpp_inner.validate(); if (e = d.zpp_inner.x == a) d.zpp_inner.validate(), e = d.zpp_inner.y == b;
            e || (d.zpp_inner.x = a, d.zpp_inner.y = b, d.zpp_inner.invalidate());
            d } d.zpp_inner.weak =
            c;
        return d
    };
    fa.prototype = {
        dispose: function() { var a = this.zpp_inner;
            this.zpp_inner = this.zpp_inner.outer = null;
            this.zpp_pool = hf.poolVec2;
            hf.poolVec2 = this;
            null != a.outer && (a.outer.zpp_inner = null, a.outer = null);
            a._isimmutable = null;
            a._validate = null;
            a._invalidate = null;
            a.next = xa.zpp_pool;
            xa.zpp_pool = a },
        get_x: function() { this.zpp_inner.validate(); return this.zpp_inner.x },
        set_x: function(a) {
            this.zpp_inner.validate();
            this.zpp_inner.x != a && (this.zpp_inner.x = a, this.zpp_inner.invalidate());
            this.zpp_inner.validate();
            return this.zpp_inner.x
        },
        get_y: function() { this.zpp_inner.validate(); return this.zpp_inner.y },
        set_y: function(a) { this.zpp_inner.validate();
            this.zpp_inner.y != a && (this.zpp_inner.y = a, this.zpp_inner.invalidate());
            this.zpp_inner.validate(); return this.zpp_inner.y },
        set: function(a) { var b = this.setxy(function() { a.zpp_inner.validate(); return a.zpp_inner.x }(this), function() { a.zpp_inner.validate(); return a.zpp_inner.y }(this));
            a.zpp_inner.weak ? (a.dispose(), !0) : !1; return b },
        setxy: function(a, b) {
            var c;
            this.zpp_inner.validate();
            if (c = this.zpp_inner.x == a) this.zpp_inner.validate(), c = this.zpp_inner.y == b;
            c || (this.zpp_inner.x = a, this.zpp_inner.y = b, this.zpp_inner.invalidate());
            return this
        },
        get_angle: function() { var a;
            this.zpp_inner.validate();
            a = this.zpp_inner.x;
            this.zpp_inner.validate(); if (a = a == this.zpp_inner.y) this.zpp_inner.validate(), a = 0 == this.zpp_inner.x; return a ? 0 : Math.atan2(function(a) { a.zpp_inner.validate(); return a.zpp_inner.y }(this), function(a) { a.zpp_inner.validate(); return a.zpp_inner.x }(this)) },
        set_angle: function(a) {
            var b =
                Math.sqrt(function(a) { a.zpp_inner.validate(); return a.zpp_inner.x }(this) * function(a) { a.zpp_inner.validate(); return a.zpp_inner.x }(this) + function(a) { a.zpp_inner.validate(); return a.zpp_inner.y }(this) * function(a) { a.zpp_inner.validate(); return a.zpp_inner.y }(this));
            this.setxy(b * Math.cos(a), b * Math.sin(a));
            this.zpp_inner.validate();
            a = this.zpp_inner.x;
            this.zpp_inner.validate();
            if (a = a == this.zpp_inner.y) this.zpp_inner.validate(), a = 0 == this.zpp_inner.x;
            return a ? 0 : Math.atan2(function(a) {
                a.zpp_inner.validate();
                return a.zpp_inner.y
            }(this), function(a) { a.zpp_inner.validate(); return a.zpp_inner.x }(this))
        },
        sub: function(a, b) { null == b && (b = !1); var c = fa.get(function(a) { a.zpp_inner.validate(); return a.zpp_inner.x }(this) - function() { a.zpp_inner.validate(); return a.zpp_inner.x }(this), function(a) { a.zpp_inner.validate(); return a.zpp_inner.y }(this) - function() { a.zpp_inner.validate(); return a.zpp_inner.y }(this), b);
            a.zpp_inner.weak ? (a.dispose(), !0) : !1; return c },
        muleq: function(a) {
            return this.setxy(function(a) {
                a.zpp_inner.validate();
                return a.zpp_inner.x
            }(this) * a, function(a) { a.zpp_inner.validate(); return a.zpp_inner.y }(this) * a)
        },
        toString: function() { this.zpp_inner.validate(); return this.zpp_inner.toString() },
        __class__: fa,
        __properties__: { set_angle: "set_angle", get_angle: "get_angle", set_y: "set_y", get_y: "get_y", set_x: "set_x", get_x: "get_x" }
    };
    var wd = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.geom.Vec2Iterator"] = wd;
    wd.__name__ = ["nape", "geom", "Vec2Iterator"];
    wd.get = function(a) {
        var b;
        null ==
            wd.zpp_pool ? (og.internal = !0, b = new wd, og.internal = !1) : (b = wd.zpp_pool, wd.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1;
        return b
    };
    wd.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.zpp_gl();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = wd.zpp_pool;
            wd.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: wd };
    var Hc = function() {
        this.zpp_inner = null;
        this.zpp_inner =
            new og;
        this.zpp_inner.outer = this
    };
    g["nape.geom.Vec2List"] = Hc;
    Hc.__name__ = ["nape", "geom", "Vec2List"];
    Hc.prototype = {
        zpp_gl: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        zpp_vm: function() { this.zpp_inner.valmod() },
        at: function(a) {
            this.zpp_vm();
            this.zpp_inner.reverse_flag && (a = this.zpp_gl() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index =
                a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
            return this.zpp_inner.at_ite.elt.wrapper()
        },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_vm();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) : (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = this.empty() ? null : this.zpp_inner.inner.iterator_at(this.zpp_gl() -
                1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        empty: function() { return 0 == this.zpp_gl() },
        iterator: function() { this.zpp_vm(); return wd.get(this) },
        toString: function() { for (var a = "[", b = !0, c = this.iterator(); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: Hc
    };
    var on = function() {
        this.zpp_inner =
            null
    };
    g["nape.geom.Vec3"] = on;
    on.__name__ = ["nape", "geom", "Vec3"];
    on.prototype = { toString: function() { this.zpp_inner.validate(); var a = "{ x: " + this.zpp_inner.x + " y: ";
            this.zpp_inner.validate();
            a = a + this.zpp_inner.y + " z: ";
            this.zpp_inner.validate(); return a + this.zpp_inner.z + " }" }, __class__: on };
    var ih = function() {};
    g["nape.geom.Winding"] = ih;
    ih.__name__ = ["nape", "geom", "Winding"];
    ih.prototype = {
        toString: function() {
            var a;
            null == h.Winding_UNDEFINED && (h.internal = !0, h.Winding_UNDEFINED = new ih, h.internal = !1);
            this ==
                h.Winding_UNDEFINED ? a = "UNDEFINED" : (null == h.Winding_CLOCKWISE && (h.internal = !0, h.Winding_CLOCKWISE = new ih, h.internal = !1), this == h.Winding_CLOCKWISE ? a = "CLOCKWISE" : (null == h.Winding_ANTICLOCKWISE && (h.internal = !0, h.Winding_ANTICLOCKWISE = new ih, h.internal = !1), a = this == h.Winding_ANTICLOCKWISE ? "ANTICLOCKWISE" : ""));
            return a
        },
        __class__: ih
    };
    var me = function() { this.zpp_inner_i = null };
    g["nape.phys.Interactor"] = me;
    me.__name__ = ["nape", "phys", "Interactor"];
    me.prototype = {
        get_userData: function() {
            null == this.zpp_inner_i.userData &&
                (this.zpp_inner_i.userData = {});
            return this.zpp_inner_i.userData
        },
        get_castBody: function() { return null != this.zpp_inner_i.ibody ? this.zpp_inner_i.ibody.outer : null },
        get_cbTypes: function() { null == this.zpp_inner_i.wrap_cbTypes && this.zpp_inner_i.setupcbTypes(); return this.zpp_inner_i.wrap_cbTypes },
        toString: function() { return "" },
        __class__: me,
        __properties__: { get_cbTypes: "get_cbTypes", get_castBody: "get_castBody", get_userData: "get_userData" }
    };
    var Vg = function(a, b) {
        this.zpp_inner_i = this.zpp_inner = null;
        this.zpp_inner =
            new Ke;
        this.zpp_inner.outer = this;
        this.zpp_inner.outer_i = this;
        this.zpp_inner_i = this.zpp_inner;
        null != b ? (b.zpp_inner.validate(), this.zpp_inner.posx = b.zpp_inner.x, b.zpp_inner.validate(), this.zpp_inner.posy = b.zpp_inner.y) : (this.zpp_inner.posx = 0, this.zpp_inner.posy = 0);
        this.set_type(null == a ? function() { null == h.BodyType_DYNAMIC && (h.internal = !0, h.BodyType_DYNAMIC = new Pb, h.internal = !1); return h.BodyType_DYNAMIC }(this) : a);
        null != b && (b.zpp_inner.weak ? (b.dispose(), !0) : !1);
        this.zpp_inner_i.insert_cbtype(dc.ANY_BODY.zpp_inner)
    };
    g["nape.phys.Body"] = Vg;
    Vg.__name__ = ["nape", "phys", "Body"];
    Vg.__super__ = me;
    Vg.prototype = l(me.prototype, {
        set_type: function(a) {
            this.zpp_inner.immutable_midstep("Body::type");
            Ke.types[this.zpp_inner.type] != a && (null == h.BodyType_DYNAMIC && (h.internal = !0, h.BodyType_DYNAMIC = new Pb, h.internal = !1), a == h.BodyType_DYNAMIC ? a = h.id_BodyType_DYNAMIC : (null == h.BodyType_KINEMATIC && (h.internal = !0, h.BodyType_KINEMATIC = new Pb, h.internal = !1), a = a == h.BodyType_KINEMATIC ? h.id_BodyType_KINEMATIC : h.id_BodyType_STATIC), a == h.id_BodyType_STATIC &&
                null != this.zpp_inner.space && (this.zpp_inner.velx = 0, this.zpp_inner.vely = 0, this.zpp_inner.angvel = 0), this.zpp_inner.invalidate_type(), null != this.zpp_inner.space ? this.zpp_inner.space.transmitType(this.zpp_inner, a) : this.zpp_inner.type = a);
            return Ke.types[this.zpp_inner.type]
        },
        set_isBullet: function(a) { this.zpp_inner.bulletEnabled = a; return this.zpp_inner.bulletEnabled },
        get_position: function() { null == this.zpp_inner.wrap_pos && this.zpp_inner.setupPosition(); return this.zpp_inner.wrap_pos },
        set_position: function(a) {
            null ==
                this.zpp_inner.wrap_pos && this.zpp_inner.setupPosition();
            this.zpp_inner.wrap_pos.set(a);
            null == this.zpp_inner.wrap_pos && this.zpp_inner.setupPosition();
            return this.zpp_inner.wrap_pos
        },
        get_velocity: function() { null == this.zpp_inner.wrap_vel && this.zpp_inner.setupVelocity(); return this.zpp_inner.wrap_vel },
        setVelocityFromTarget: function(a, b, c) {
            c = 1 / c;
            null == this.zpp_inner.wrap_vel && this.zpp_inner.setupVelocity();
            this.zpp_inner.wrap_vel.set(a.sub(function(a) {
                null == a.zpp_inner.wrap_pos && a.zpp_inner.setupPosition();
                return a.zpp_inner.wrap_pos
            }(this), !0).muleq(c));
            this.set_angularVel((b - this.zpp_inner.rot) * c);
            a.zpp_inner.weak ? (a.dispose(), !0) : !1;
            return this
        },
        set_force: function(a) { null == this.zpp_inner.wrap_force && this.zpp_inner.setupForce();
            this.zpp_inner.wrap_force.set(a);
            null == this.zpp_inner.wrap_force && this.zpp_inner.setupForce(); return this.zpp_inner.wrap_force },
        set_rotation: function(a) {
            this.zpp_inner.immutable_midstep("Body::rotation");
            this.zpp_inner.rot != a && (this.zpp_inner.rot = a, this.zpp_inner.invalidate_rot(),
                this.zpp_inner.wake());
            return this.zpp_inner.rot
        },
        set_angularVel: function(a) { this.zpp_inner.angvel != a && (this.zpp_inner.angvel = a, this.zpp_inner.wake()); return this.zpp_inner.angvel },
        set_allowRotation: function(a) { this.zpp_inner.immutable_midstep("Body::" + (null == a ? "null" : "" + a));!this.zpp_inner.norotate != a && (this.zpp_inner.norotate = !a, this.zpp_inner.invalidate_inertia()); return !this.zpp_inner.norotate },
        set_mass: function(a) {
            this.zpp_inner.immutable_midstep("Body::mass");
            this.zpp_inner.massMode = h.id_MassMode_FIXED;
            this.zpp_inner.cmass = a;
            this.zpp_inner.invalidate_mass();
            this.zpp_inner.validate_mass();
            return this.zpp_inner.cmass
        },
        set_gravMassScale: function(a) { this.zpp_inner.immutable_midstep("Body::gravMassScale");
            this.zpp_inner.gravMassMode = h.id_GravMassMode_SCALED;
            this.zpp_inner.gravMassScale = a;
            this.zpp_inner.invalidate_gravMassScale();
            this.zpp_inner.validate_gravMassScale(); return this.zpp_inner.gravMassScale },
        applyImpulse: function(a, b, c) {
            null == c && (c = !1);
            if (c && this.zpp_inner.component.sleeping) return a.zpp_inner.weak ?
                (a.dispose(), !0) : !1, null != b && (b.zpp_inner.weak ? (b.dispose(), !0) : !1), this;
            this.zpp_inner.validate_mass();
            var d = this.zpp_inner.imass,
                e = this.zpp_inner,
                f = this.zpp_inner.velx;
            a.zpp_inner.validate();
            e.velx = f + a.zpp_inner.x * d;
            e = this.zpp_inner;
            f = this.zpp_inner.vely;
            a.zpp_inner.validate();
            e.vely = f + a.zpp_inner.y * d;
            if (null != b) {
                var j = 0,
                    d = 0;
                b.zpp_inner.validate();
                j = b.zpp_inner.x - this.zpp_inner.posx;
                b.zpp_inner.validate();
                d = b.zpp_inner.y - this.zpp_inner.posy;
                this.zpp_inner.validate_inertia();
                e = this.zpp_inner;
                f = this.zpp_inner.angvel;
                a.zpp_inner.validate();
                j *= a.zpp_inner.y;
                a.zpp_inner.validate();
                e.angvel = f + (j - a.zpp_inner.x * d) * this.zpp_inner.iinertia;
                b.zpp_inner.weak ? (b.dispose(), !0) : !1
            }
            c || this.zpp_inner.type == h.id_BodyType_DYNAMIC && this.zpp_inner.wake();
            a.zpp_inner.weak ? (a.dispose(), !0) : !1;
            return this
        },
        toString: function() { return (this.zpp_inner.world ? "(space::world" : "(" + (this.zpp_inner.type == h.id_BodyType_DYNAMIC ? "dynamic" : this.zpp_inner.type == h.id_BodyType_STATIC ? "static" : "kinematic")) + ")#" + this.zpp_inner_i.id },
        __class__: Vg,
        __properties__: l(me.prototype.__properties__, { set_gravMassScale: "set_gravMassScale", set_mass: "set_mass", set_allowRotation: "set_allowRotation", set_angularVel: "set_angularVel", set_rotation: "set_rotation", set_force: "set_force", get_velocity: "get_velocity", set_position: "set_position", get_position: "get_position", set_isBullet: "set_isBullet", set_type: "set_type" })
    });
    var ne = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.phys.BodyIterator"] = ne;
    ne.__name__ = ["nape", "phys", "BodyIterator"];
    ne.get = function(a) {
        var b;
        null == ne.zpp_pool ? (Le.internal = !0, b = new ne, Le.internal = !1) : (b = ne.zpp_pool, ne.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1;
        return b
    };
    ne.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = ne.zpp_pool;
            ne.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: ne };
    var jm = function() {
        this.zpp_inner = null;
        this.zpp_inner =
            new Le;
        this.zpp_inner.outer = this
    };
    g["nape.phys.BodyList"] = jm;
    jm.__name__ = ["nape", "phys", "BodyList"];
    jm.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        at: function(a) {
            this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite =
                this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
            return this.zpp_inner.at_ite.elt.outer
        },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) : (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() -
                1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        unshift: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ? null : this.zpp_inner.inner.iterator_at(this.get_length() -
                1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)) : this.zpp_inner.inner.add(a.zpp_inner), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        add: function(a) { return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a) },
        remove: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            b = !1;
            for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber &&
                this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner), this.zpp_inner.invalidate());
            return b
        },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = ne.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: jm,
        __properties__: { get_length: "get_length" }
    };
    var Pb = function() {};
    g["nape.phys.BodyType"] = Pb;
    Pb.__name__ = ["nape", "phys", "BodyType"];
    Pb.prototype = {
        toString: function() {
            var a;
            null == h.BodyType_STATIC && (h.internal = !0, h.BodyType_STATIC = new Pb, h.internal = !1);
            this == h.BodyType_STATIC ? a = "STATIC" : (null == h.BodyType_DYNAMIC && (h.internal = !0, h.BodyType_DYNAMIC = new Pb, h.internal = !1), this == h.BodyType_DYNAMIC ? a = "DYNAMIC" : (null == h.BodyType_KINEMATIC && (h.internal = !0, h.BodyType_KINEMATIC = new Pb, h.internal = !1), a = this == h.BodyType_KINEMATIC ? "KINEMATIC" : ""));
            return a
        },
        __class__: Pb
    };
    var km = function() { this.zpp_inner = null };
    g["nape.phys.Compound"] = km;
    km.__name__ = ["nape", "phys", "Compound"];
    km.__super__ =
        me;
    km.prototype = l(me.prototype, { toString: function() { return "Compound" + this.zpp_inner_i.id }, __class__: km });
    var oe = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.phys.CompoundIterator"] = oe;
    oe.__name__ = ["nape", "phys", "CompoundIterator"];
    oe.get = function(a) { var b;
        null == oe.zpp_pool ? (jf.internal = !0, b = new oe, jf.internal = !1) : (b = oe.zpp_pool, oe.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    oe.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = oe.zpp_pool;
            oe.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: oe
    };
    var lm = function() { this.zpp_inner = null;
        this.zpp_inner = new jf;
        this.zpp_inner.outer = this };
    g["nape.phys.CompoundList"] = lm;
    lm.__name__ = ["nape", "phys", "CompoundList"];
    lm.prototype = {
        get_length: function() {
            this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length);
            return this.zpp_inner.user_length
        },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer },
        remove: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            b = !1;
            for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner), this.zpp_inner.invalidate());
            return b
        },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = oe.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: lm,
        __properties__: { get_length: "get_length" }
    };
    var ge = function(a, b) { null == b && (b = 1);
        null == a && (a = 1);
        this.zpp_inner = null;
        null == kf.zpp_pool ? this.zpp_inner = new kf : (this.zpp_inner = kf.zpp_pool, kf.zpp_pool = this.zpp_inner.next, this.zpp_inner.next = null);
        null;
        this.zpp_inner.outer = this;
        a != 1E3 * this.zpp_inner.density && (this.zpp_inner.density = a / 1E3, this.zpp_inner.invalidate());
        1E3 * this.zpp_inner.density;
        b != this.zpp_inner.viscosity && (this.zpp_inner.viscosity = b / 1, this.zpp_inner.invalidate());
        this.zpp_inner.viscosity };
    g["nape.phys.FluidProperties"] = ge;
    ge.__name__ = ["nape", "phys", "FluidProperties"];
    ge.prototype = {
        set_density: function(a) { a != 1E3 * this.zpp_inner.density && (this.zpp_inner.density = a / 1E3, this.zpp_inner.invalidate()); return 1E3 * this.zpp_inner.density },
        set_viscosity: function(a) { a != this.zpp_inner.viscosity && (this.zpp_inner.viscosity = a / 1, this.zpp_inner.invalidate()); return this.zpp_inner.viscosity },
        toString: function() {
            return "{ density: " + 1E3 * this.zpp_inner.density + " viscosity: " + this.zpp_inner.viscosity + " gravity: " +
                u.string(this.zpp_inner.wrap_gravity) + " }"
        },
        __class__: ge,
        __properties__: { set_viscosity: "set_viscosity", set_density: "set_density" }
    };
    var jh = function() {};
    g["nape.phys.GravMassMode"] = jh;
    jh.__name__ = ["nape", "phys", "GravMassMode"];
    jh.prototype = {
        toString: function() {
            var a;
            null == h.GravMassMode_DEFAULT && (h.internal = !0, h.GravMassMode_DEFAULT = new jh, h.internal = !1);
            this == h.GravMassMode_DEFAULT ? a = "DEFAULT" : (null == h.GravMassMode_FIXED && (h.internal = !0, h.GravMassMode_FIXED = new jh, h.internal = !1), this == h.GravMassMode_FIXED ?
                a = "FIXED" : (null == h.GravMassMode_SCALED && (h.internal = !0, h.GravMassMode_SCALED = new jh, h.internal = !1), a = this == h.GravMassMode_SCALED ? "SCALED" : ""));
            return a
        },
        __class__: jh
    };
    var Oj = function() {};
    g["nape.phys.InertiaMode"] = Oj;
    Oj.__name__ = ["nape", "phys", "InertiaMode"];
    Oj.prototype = {
        toString: function() {
            var a;
            null == h.InertiaMode_DEFAULT && (h.internal = !0, h.InertiaMode_DEFAULT = new Oj, h.internal = !1);
            this == h.InertiaMode_DEFAULT ? a = "DEFAULT" : (null == h.InertiaMode_FIXED && (h.internal = !0, h.InertiaMode_FIXED = new Oj, h.internal = !1), a = this == h.InertiaMode_FIXED ? "FIXED" : "");
            return a
        },
        __class__: Oj
    };
    var pe = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.phys.InteractorIterator"] = pe;
    pe.__name__ = ["nape", "phys", "InteractorIterator"];
    pe.get = function(a) { var b;
        null == pe.zpp_pool ? (kh.internal = !0, b = new pe, kh.internal = !1) : (b = pe.zpp_pool, pe.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    pe.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = pe.zpp_pool;
            pe.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: pe
    };
    var pn = function() { this.zpp_inner = null };
    g["nape.phys.InteractorList"] = pn;
    pn.__name__ = ["nape", "phys", "InteractorList"];
    pn.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.outer_i },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = pe.get(this); c.hasNext();) {
                var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1
            }
            return a + "]"
        },
        __class__: pn,
        __properties__: { get_length: "get_length" }
    };
    var Pj = function() {};
    g["nape.phys.MassMode"] = Pj;
    Pj.__name__ = ["nape", "phys", "MassMode"];
    Pj.prototype = {
        toString: function() {
            var a;
            null == h.MassMode_DEFAULT && (h.internal = !0, h.MassMode_DEFAULT = new Pj, h.internal = !1);
            this == h.MassMode_DEFAULT ? a = "DEFAULT" : (null == h.MassMode_FIXED && (h.internal = !0, h.MassMode_FIXED = new Pj, h.internal = !1), a = this == h.MassMode_FIXED ? "FIXED" :
                "");
            return a
        },
        __class__: Pj
    };
    var Me = function() { this.zpp_inner_i = this.zpp_inner = null };
    g["nape.shape.Shape"] = Me;
    Me.__name__ = ["nape", "shape", "Shape"];
    Me.__super__ = me;
    Me.prototype = l(me.prototype, {
        set_localCOM: function(a) {
            this.zpp_inner.immutable_midstep("Body::localCOM");
            null == this.zpp_inner.wrap_localCOM && (this.zpp_inner.type == h.id_ShapeType_CIRCLE ? this.zpp_inner.circle.setupLocalCOM() : this.zpp_inner.polygon.setupLocalCOM());
            this.zpp_inner.wrap_localCOM.set(a);
            null == this.zpp_inner.wrap_localCOM && (this.zpp_inner.type ==
                h.id_ShapeType_CIRCLE ? this.zpp_inner.circle.setupLocalCOM() : this.zpp_inner.polygon.setupLocalCOM());
            return this.zpp_inner.wrap_localCOM
        },
        set_fluidProperties: function(a) { this.zpp_inner.setFluid(a.zpp_inner);
            this.zpp_inner.immutable_midstep("Shape::fluidProperties");
            null == this.zpp_inner.fluidProperties && this.zpp_inner.setFluid((new ge).zpp_inner); return this.zpp_inner.fluidProperties.wrapper() },
        set_sensorEnabled: function(a) {
            this.zpp_inner.immutable_midstep("Shape::sensorEnabled");
            this.zpp_inner.sensorEnabled =
                a;
            this.zpp_inner.wake();
            return this.zpp_inner.sensorEnabled
        },
        rotate: function(a) { this.zpp_inner.immutable_midstep("Shape::rotate()"); if (0 != a % (2 * Math.PI)) { var b = Math.cos(a),
                    a = Math.sin(a);
                this.zpp_inner.type == h.id_ShapeType_CIRCLE ? this.zpp_inner.circle.__rotate(a, b) : this.zpp_inner.polygon.__rotate(a, b) } return this },
        toString: function() { return (this.zpp_inner.type == h.id_ShapeType_CIRCLE ? "Circle" : "Polygon") + "#" + this.zpp_inner_i.id },
        __class__: Me,
        __properties__: l(me.prototype.__properties__, {
            set_sensorEnabled: "set_sensorEnabled",
            set_fluidProperties: "set_fluidProperties",
            set_localCOM: "set_localCOM"
        })
    });
    var Rj = function(a, b, c, d) {
        this.zpp_inner_zn = null;
        Me.call(this);
        this.zpp_inner_zn = new Qj;
        this.zpp_inner_zn.outer = this;
        this.zpp_inner_zn.outer_zn = this;
        this.zpp_inner_i = this.zpp_inner = this.zpp_inner_zn;
        this.zpp_inner_i.outer_i = this;
        this.zpp_inner.immutable_midstep("Circle::radius");
        a != this.zpp_inner_zn.radius && (this.zpp_inner_zn.radius = a, this.zpp_inner_zn.invalidate_radius());
        this.zpp_inner_zn.radius;
        null == b ? (this.zpp_inner.localCOMx =
            0, this.zpp_inner.localCOMy = 0) : (b.zpp_inner.validate(), this.zpp_inner.localCOMx = b.zpp_inner.x, b.zpp_inner.validate(), this.zpp_inner.localCOMy = b.zpp_inner.y, b.zpp_inner.weak ? (b.dispose(), !0) : !1);
        null == c ? (null == sa.zpp_pool ? this.zpp_inner.material = new sa : (this.zpp_inner.material = sa.zpp_pool, sa.zpp_pool = this.zpp_inner.material.next, this.zpp_inner.material.next = null), null) : (this.zpp_inner.immutable_midstep("Shape::material"), this.zpp_inner.setMaterial(c.zpp_inner), this.zpp_inner.material.wrapper());
        null ==
            d ? (null == Ra.zpp_pool ? this.zpp_inner.filter = new Ra : (this.zpp_inner.filter = Ra.zpp_pool, Ra.zpp_pool = this.zpp_inner.filter.next, this.zpp_inner.filter.next = null), null) : (this.zpp_inner.immutable_midstep("Shape::filter"), this.zpp_inner.setFilter(d.zpp_inner), this.zpp_inner.filter.wrapper());
        this.zpp_inner_i.insert_cbtype(dc.ANY_SHAPE.zpp_inner)
    };
    g["nape.shape.Circle"] = Rj;
    Rj.__name__ = ["nape", "shape", "Circle"];
    Rj.__super__ = Me;
    Rj.prototype = l(Me.prototype, { __class__: Rj });
    var mm = function() { this.zpp_inner = null };
    g["nape.shape.Edge"] = mm;
    mm.__name__ = ["nape", "shape", "Edge"];
    mm.prototype = {
        toString: function() {
            if (null == this.zpp_inner.polygon) return "Edge(object-pooled)";
            if (null == this.zpp_inner.polygon.body) return this.zpp_inner.polygon.validate_laxi(), "{ localNormal : " + ("{ x: " + this.zpp_inner.lnormx + " y: " + this.zpp_inner.lnormy + " }") + " }";
            this.zpp_inner.polygon.validate_gaxi();
            return "{ localNormal : " + ("{ x: " + this.zpp_inner.lnormx + " y: " + this.zpp_inner.lnormy + " }") + " worldNormal : " + ("{ x: " + this.zpp_inner.gnormx +
                " y: " + this.zpp_inner.gnormy + " }") + " }"
        },
        __class__: mm
    };
    var Ld = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.shape.EdgeIterator"] = Ld;
    Ld.__name__ = ["nape", "shape", "EdgeIterator"];
    Ld.get = function(a) { var b;
        null == Ld.zpp_pool ? (lh.internal = !0, b = new Ld, lh.internal = !1) : (b = Ld.zpp_pool, Ld.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    Ld.prototype = {
        hasNext: function() {
            this.zpp_inner.zpp_inner.valmod();
            var a = this.zpp_inner.get_length();
            this.zpp_critical = !0;
            if (this.zpp_i < a) return !0;
            this.zpp_next = Ld.zpp_pool;
            Ld.zpp_pool = this;
            this.zpp_inner = null;
            return !1
        },
        next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) },
        __class__: Ld
    };
    var qn = function() { this.zpp_inner = null };
    g["nape.shape.EdgeList"] = qn;
    qn.__name__ = ["nape", "shape", "EdgeList"];
    qn.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        at: function(a) { this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && a != this.get_length() - 1 && (a = this.get_length() - 2 - a); if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index = a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next; return this.zpp_inner.at_ite.elt.wrapper() },
        toString: function() {
            var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod();
            for (c = Ld.get(this); c.hasNext();) {
                var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1
            }
            return a + "]"
        },
        __class__: qn,
        __properties__: { get_length: "get_length" }
    };
    var Yc = function(a, b, c) {
        this.zpp_inner_zn = null;
        Me.call(this);
        this.zpp_inner_zn = new Sj;
        this.zpp_inner_zn.outer = this;
        this.zpp_inner_zn.outer_zn = this;
        this.zpp_inner_i = this.zpp_inner = this.zpp_inner_zn;
        this.zpp_inner_i.outer_i = this;
        if (a instanceof Array && null == a.__enum__)
            for (var d = 0; d < a.length;) {
                var e = a[d];
                ++d;
                var f = e;
                null == this.zpp_inner_zn.wrap_lverts &&
                    this.zpp_inner_zn.getlverts();
                this.zpp_inner_zn.wrap_lverts.push(fa.get(function() { f.zpp_inner.validate(); return f.zpp_inner.x }(this), function() { f.zpp_inner.validate(); return f.zpp_inner.y }(this), !1))
            } else if (U.__instanceof(a, Hc))
                for (d = a.iterator(); d.hasNext();) {
                    var j;
                    d.zpp_critical = !1;
                    j = d.zpp_inner.at(d.zpp_i++);
                    null == this.zpp_inner_zn.wrap_lverts && this.zpp_inner_zn.getlverts();
                    this.zpp_inner_zn.wrap_lverts.push(fa.get(function() { j.zpp_inner.validate(); return j.zpp_inner.x }(this), function() {
                        j.zpp_inner.validate();
                        return j.zpp_inner.y
                    }(this), !1))
                } else if (U.__instanceof(a, Fe) && (d = a.zpp_inner.vertices, null != d)) { e = d;
                    do { var p = fa.get(e.x, e.y, null),
                            e = e.next;
                        null == this.zpp_inner_zn.wrap_lverts && this.zpp_inner_zn.getlverts();
                        this.zpp_inner_zn.wrap_lverts.push(fa.get(function() { p.zpp_inner.validate(); return p.zpp_inner.x }(this), function() { p.zpp_inner.validate(); return p.zpp_inner.y }(this), !1));
                        p.dispose() } while (e != d) } if (a instanceof Array && null == a.__enum__)
            for (d = 0; d < a.length;) {
                var e = a[d],
                    h;
                if (h = e.zpp_inner.weak) e.dispose(),
                    h = !0;
                h ? a.splice(d, 1) : d++
            } else if (U.__instanceof(a, Hc)) { null != a.zpp_inner._validate && a.zpp_inner._validate();
                a = a.zpp_inner.inner;
                d = null; for (e = a.head; null != e;) h = e.elt, h.outer.zpp_inner.weak ? (e = a.erase(d), h.outer.zpp_inner.weak ? (h.outer.dispose(), !0) : !1) : (d = e, e = e.next) } null == b ? (null == sa.zpp_pool ? this.zpp_inner.material = new sa : (this.zpp_inner.material = sa.zpp_pool, sa.zpp_pool = this.zpp_inner.material.next, this.zpp_inner.material.next = null), null) : (this.zpp_inner.immutable_midstep("Shape::material"), this.zpp_inner.setMaterial(b.zpp_inner),
            this.zpp_inner.material.wrapper());
        null == c ? (null == Ra.zpp_pool ? this.zpp_inner.filter = new Ra : (this.zpp_inner.filter = Ra.zpp_pool, Ra.zpp_pool = this.zpp_inner.filter.next, this.zpp_inner.filter.next = null), null) : (this.zpp_inner.immutable_midstep("Shape::filter"), this.zpp_inner.setFilter(c.zpp_inner), this.zpp_inner.filter.wrapper());
        this.zpp_inner_i.insert_cbtype(dc.ANY_SHAPE.zpp_inner)
    };
    g["nape.shape.Polygon"] = Yc;
    Yc.__name__ = ["nape", "shape", "Polygon"];
    Yc.rect = function(a, b, c, d, e) {
        null == e && (e = !1);
        return [fa.get(a,
            b, e), fa.get(a + c, b, e), fa.get(a + c, b + d, e), fa.get(a, b + d, e)]
    };
    Yc.box = function(a, b, c) { null == c && (c = !1); return Yc.rect(-a / 2, -b / 2, a, b, c) };
    Yc.regular = function(a, b, c, d, e) { null == e && (e = !1);
        null == d && (d = 0); for (var f = [], j = 2 * Math.PI / c, p = 0; p < c;) { var h = p++ * j + d,
                h = fa.get(Math.cos(h) * a, Math.sin(h) * b, e);
            f.push(h) } return f };
    Yc.__super__ = Me;
    Yc.prototype = l(Me.prototype, { __class__: Yc });
    var yb = function() { this.zpp_next = null;
        this.zpp_critical = !1;
        this.zpp_i = 0;
        this.zpp_inner = null };
    g["nape.shape.ShapeIterator"] = yb;
    yb.__name__ = ["nape",
        "shape", "ShapeIterator"
    ];
    yb.get = function(a) { var b;
        null == yb.zpp_pool ? (lf.internal = !0, b = new yb, lf.internal = !1) : (b = yb.zpp_pool, yb.zpp_pool = b.zpp_next);
        b.zpp_i = 0;
        b.zpp_inner = a;
        b.zpp_critical = !1; return b };
    yb.prototype = { hasNext: function() { this.zpp_inner.zpp_inner.valmod(); var a = this.zpp_inner.get_length();
            this.zpp_critical = !0; if (this.zpp_i < a) return !0;
            this.zpp_next = yb.zpp_pool;
            yb.zpp_pool = this;
            this.zpp_inner = null; return !1 }, next: function() { this.zpp_critical = !1; return this.zpp_inner.at(this.zpp_i++) }, __class__: yb };
    var nm = function() { this.zpp_inner = null;
        this.zpp_inner = new lf;
        this.zpp_inner.outer = this };
    g["nape.shape.ShapeList"] = nm;
    nm.__name__ = ["nape", "shape", "ShapeList"];
    nm.prototype = {
        get_length: function() { this.zpp_inner.valmod();
            this.zpp_inner.zip_length && (this.zpp_inner.zip_length = !1, this.zpp_inner.user_length = this.zpp_inner.inner.length); return this.zpp_inner.user_length },
        at: function(a) {
            this.zpp_inner.valmod();
            this.zpp_inner.reverse_flag && (a = this.get_length() - 1 - a);
            if (a < this.zpp_inner.at_index || null == this.zpp_inner.at_ite) this.zpp_inner.at_index =
                a, this.zpp_inner.at_ite = this.zpp_inner.inner.iterator_at(a);
            else
                for (; this.zpp_inner.at_index != a;) this.zpp_inner.at_index++, this.zpp_inner.at_ite = this.zpp_inner.at_ite.next;
            return this.zpp_inner.at_ite.elt.outer
        },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.zpp_inner.inner.add(a.zpp_inner) : (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ?
                null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        unshift: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? (null == this.zpp_inner.push_ite && (this.zpp_inner.push_ite = null == this.zpp_inner.inner.head ?
                null : this.zpp_inner.inner.iterator_at(this.get_length() - 1)), this.zpp_inner.push_ite = this.zpp_inner.inner.insert(this.zpp_inner.push_ite, a.zpp_inner)) : this.zpp_inner.inner.add(a.zpp_inner), this.zpp_inner.invalidate(), null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        pop: function() {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var a = null;
            if (this.zpp_inner.reverse_flag) {
                var a = this.zpp_inner.inner.head.elt,
                    b = a.outer;
                null != this.zpp_inner.subber && this.zpp_inner.subber(b);
                this.zpp_inner.dontremove ||
                    this.zpp_inner.inner.pop()
            } else { null != this.zpp_inner.at_ite && null == this.zpp_inner.at_ite.next && (this.zpp_inner.at_ite = null); var b = 1 == this.get_length() ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 2),
                    a = null == b ? this.zpp_inner.inner.head.elt : b.next.elt,
                    c = a.outer;
                null != this.zpp_inner.subber && this.zpp_inner.subber(c);
                this.zpp_inner.dontremove || this.zpp_inner.inner.erase(b) } this.zpp_inner.invalidate();
            return a.outer
        },
        shift: function() {
            this.zpp_inner.modify_test();
            this.zpp_inner.valmod();
            var a =
                null;
            if (this.zpp_inner.reverse_flag) { null != this.zpp_inner.at_ite && null == this.zpp_inner.at_ite.next && (this.zpp_inner.at_ite = null); var b;
                b = 1 == this.get_length() ? null : this.zpp_inner.inner.iterator_at(this.get_length() - 2); var a = null == b ? this.zpp_inner.inner.head.elt : b.next.elt,
                    c = a.outer;
                null != this.zpp_inner.subber && this.zpp_inner.subber(c);
                this.zpp_inner.dontremove || this.zpp_inner.inner.erase(b) } else a = this.zpp_inner.inner.head.elt, b = a.outer, null != this.zpp_inner.subber && this.zpp_inner.subber(b), this.zpp_inner.dontremove ||
                this.zpp_inner.inner.pop();
            this.zpp_inner.invalidate();
            return a.outer
        },
        add: function(a) { return this.zpp_inner.reverse_flag ? this.push(a) : this.unshift(a) },
        remove: function(a) { this.zpp_inner.modify_test();
            this.zpp_inner.valmod(); var b;
            b = !1; for (var c = this.zpp_inner.inner.head; null != c;) { if (c.elt == a.zpp_inner) { b = !0; break } c = c.next } b && (null != this.zpp_inner.subber && this.zpp_inner.subber(a), this.zpp_inner.dontremove || this.zpp_inner.inner.remove(a.zpp_inner), this.zpp_inner.invalidate()); return b },
        clear: function() {
            if (this.zpp_inner.reverse_flag)
                for (; null !=
                    this.zpp_inner.inner.head;) this.pop();
            else
                for (; null != this.zpp_inner.inner.head;) this.shift()
        },
        empty: function() { return null == this.zpp_inner.inner.head },
        iterator: function() { this.zpp_inner.valmod(); return yb.get(this) },
        toString: function() { var a = "[",
                b = !0,
                c;
            this.zpp_inner.valmod(); for (c = yb.get(this); c.hasNext();) { var d;
                c.zpp_critical = !1;
                d = c.zpp_inner.at(c.zpp_i++);
                b || (a += ",");
                a = null == d ? a + "NULL" : a + d.toString();
                b = !1 } return a + "]" },
        __class__: nm,
        __properties__: { get_length: "get_length" }
    };
    var Tj = function() {};
    g["nape.shape.ShapeType"] = Tj;
    Tj.__name__ = ["nape", "shape", "ShapeType"];
    Tj.prototype = { toString: function() { var a;
            null == h.ShapeType_CIRCLE && (h.internal = !0, h.ShapeType_CIRCLE = new Tj, h.internal = !1);
            this == h.ShapeType_CIRCLE ? a = "CIRCLE" : (null == h.ShapeType_POLYGON && (h.internal = !0, h.ShapeType_POLYGON = new Tj, h.internal = !1), a = this == h.ShapeType_POLYGON ? "POLYGON" : ""); return a }, __class__: Tj };
    var pg = function() {};
    g["nape.shape.ValidationResult"] = pg;
    pg.__name__ = ["nape", "shape", "ValidationResult"];
    pg.prototype = {
        toString: function() {
            var a;
            null == h.ValidationResult_VALID && (h.internal = !0, h.ValidationResult_VALID = new pg, h.internal = !1);
            this == h.ValidationResult_VALID ? a = "VALID" : (null == h.ValidationResult_DEGENERATE && (h.internal = !0, h.ValidationResult_DEGENERATE = new pg, h.internal = !1), this == h.ValidationResult_DEGENERATE ? a = "DEGENERATE" : (null == h.ValidationResult_CONCAVE && (h.internal = !0, h.ValidationResult_CONCAVE = new pg, h.internal = !1), this == h.ValidationResult_CONCAVE ? a = "CONCAVE" : (null == h.ValidationResult_SELF_INTERSECTING && (h.internal = !0, h.ValidationResult_SELF_INTERSECTING =
                new pg, h.internal = !1), a = this == h.ValidationResult_SELF_INTERSECTING ? "SELF_INTERSECTING" : "")));
            return a
        },
        __class__: pg
    };
    var qg = function() {};
    g["nape.space.Broadphase"] = qg;
    qg.__name__ = ["nape", "space", "Broadphase"];
    qg.prototype = {
        toString: function() {
            var a;
            null == h.Broadphase_DYNAMIC_AABB_TREE && (h.internal = !0, h.Broadphase_DYNAMIC_AABB_TREE = new qg, h.internal = !1);
            this == h.Broadphase_DYNAMIC_AABB_TREE ? a = "DYNAMIC_AABB_TREE" : (null == h.Broadphase_SWEEP_AND_PRUNE && (h.internal = !0, h.Broadphase_SWEEP_AND_PRUNE = new qg,
                h.internal = !1), a = this == h.Broadphase_SWEEP_AND_PRUNE ? "SWEEP_AND_PRUNE" : "");
            return a
        },
        __class__: qg
    };
    var pm = function(a, b) { this.zpp_inner = null;
        this.zpp_inner = new om(null == a ? null : a.zpp_inner, b);
        this.zpp_inner.outer = this;
        null != a && (a.zpp_inner.weak ? (a.dispose(), !0) : !1) };
    g["nape.space.Space"] = pm;
    pm.__name__ = ["nape", "space", "Space"];
    pm.prototype = {
        get_gravity: function() { null == this.zpp_inner.wrap_gravity && this.zpp_inner.getgravity(); return this.zpp_inner.wrap_gravity },
        set_gravity: function(a) {
            null == this.zpp_inner.wrap_gravity &&
                this.zpp_inner.getgravity();
            this.zpp_inner.wrap_gravity.set(a);
            null == this.zpp_inner.wrap_gravity && this.zpp_inner.getgravity();
            return this.zpp_inner.wrap_gravity
        },
        clear: function() { this.zpp_inner.clear() },
        step: function(a, b, c) { null == c && (c = 10);
            null == b && (b = 10);
            this.zpp_inner.step(a, b, c) },
        __class__: pm,
        __properties__: { set_gravity: "set_gravity", get_gravity: "get_gravity" }
    };
    var Ua = function(a, b) {
        null == b && (b = !0);
        null == a && (a = !1);
        k.call(this);
        Ea.init();
        ac.setupBaseURL();
        D.onManifestInit.connect(Ua.onManifestInit);
        w.root.add(new yi);
        a && (b ? w.root.add(new ib(o.gameWidth, o.gameHeight)) : (Ua.autoScaleEnabled = !0, w.root.add(new s), w.root.add(new hb)))
    };
    g["nick.NickUtils"] = Ua;
    Ua.__name__ = ["nick", "NickUtils"];
    Ua.configure = function(a) {
        if (null == a.nick) throw "No nick section found in config.json";
        if (null == a.nick.url) throw "nick.url not set in config.json";
        if (null != a.nick.url && -1 < a.nick.url.indexOf("GAME_PAGE.html")) throw "nick.url requires actual game url (should not be GAME_PAGE)";
        a = qa;
        if ("" == a.REDIRECT_URL || null == a.REDIRECT_URL) throw "Please call AntiPiracy.checkPiracy(GameData.config.nick.url) before NickUtils.configure!";
        if (null != a.DOMAIN_LIST)
            for (var b = 0, c = Ua.staging; b < c.length;) { var d = c[b];++b;
                a.DOMAIN_LIST.push(d) } Ua.setupSdkListeners()
    };
    Ua.onManifestInit = function(a, b) { ac.setupManifest(b) };
    Ua.initDeltaDNA = function(a, b) { var c = a.delta_dna;
        z.allowLiveKey = !0 == c.allowLiveKey;
        z.staging = Ua.staging; var d = a.nick.url;
        null != a.version && (z.clientVersion = a.version);
        null != c.platforms && z.setPlatforms(c.platforms);
        z.onReady.connect(b).once();
        z.init(d, c.key_dev, c.key_live, c.collect, c.engage) };
    Ua.setupSdkListeners = function() {
        wa.onAudioToggle =
            Ua.onAudioToggle;
        wa.onPlaybackToggle = Ua.onPlaybackToggle
    };
    Ua.onAudioToggle = function(a) { Ua.onMute.emit(a) };
    Ua.onPlaybackToggle = function(a) { a ? Ua.onResume.emit() : Ua.onPause.emit() };
    Ua.__super__ = k;
    Ua.prototype = l(k.prototype, { get_name: function() { return "NickUtils_0" }, onUpdate: function() { Ua.autoScaleEnabled && o.setScale(hb.SCALE) }, __class__: Ua });
    var qa = function() {};
    g["nicksdk.AntiPiracy"] = qa;
    qa.__name__ = ["nicksdk", "AntiPiracy"];
    qa.checkPiracy = function(a) {
        null == a && (a = "");
        var b;
        b = Id.decode("aHR0cDovL3d3dy5uaWNrLmNvbS9uaWNrLWFzc2V0cy9nYW1lcy9uaWNrX2RvbWFpbi9OaWNrRG9tYWluLmpzb24=").toString();
        qa.REDIRECT_URL = a;
        "" == qa.REDIRECT_URL && (qa.REDIRECT_URL = "http://www.nick.com/games/");
        od.sendGameEvent("Check AntiPiracy : ", qa.REDIRECT_URL);
        Wb.eval("eval", ["window.getDomains = function(data) {eval('list=data.domains');}"]);
        Wb.eval("eval", ["window.getList = function() {return list;}"]);
        qa.eval("var script = document.createElement('script');script.src = \"" + b + '",document.body.insertBefore(script, document.body.firstChild);');
        Ie.delay(function() {
            for (var a = null, a = Wb.eval("getList"), a = U.__cast(a, Array),
                    b = 0; b < a.length;) { var e = a[b];++b;
                qa.DOMAIN_LIST.push(e) } qa.startCheck()
        }, qa.GET_DOMAINS_DELAY)
    };
    qa.startCheck = function() {
        qa.debug("startCheck()");
        var a = "",
            b = a = "",
            c = !1,
            d = !0,
            a = window.location.host;
        try { b = window.parent.location.host } catch (e) { c = !0 } b != a && (c = !0);
        qa.debug("childURL : " + a);
        qa.debug("parentURL : " + b);
        qa.debug("isiFrameCrossDomain : " + (null == c ? "null" : "" + c));
        if (c) d = !0;
        else { b = 0; for (c = qa.DOMAIN_LIST; b < c.length;) { var f = c[b];++b; if ((new Qc(f, "i")).match(a)) { d = !1; break } } } d ? (qa.debug("redirect"), Ie.delay(qa.redirect,
            qa.REDIRECT_DELAY)) : qa.debug("do not redirect")
    };
    qa.redirect = function() { window.top.location.replace(qa.REDIRECT_URL) };
    qa.eval = function(a) { Wb.eval("eval", ["void (function() {" + a + "}())"]) };
    qa.debug = function() {};
    var Wb = function() { this.isDirty = !1;
        this.eventQueue = new Be;
        this.debugMode = !1;
        this.modules = [];
        this.gameObj = { majorversion: 1, minorversion: 0.4, apiversion: 1 };
        wa.init(this);
        od.init(this);
        this.initializeBridge() };
    g["nicksdk.SDK"] = Wb;
    Wb.__name__ = ["nicksdk", "SDK"];
    Wb.eval = function(a, b) {
        null == b && (b = []);
        for (var c = null, d = null, e = 0, f = a.split("."); e < f.length;) { var j = f[e];++e;
            c = d;
            d = null == c ? y.field(window, j) : y.field(c, j) }
        return d.apply(c, b)
    };
    Wb.prototype = {
        onException: function(a) { try { this.queueEvent("error", { msg: a, callstack: Jd.toString(Jd.callStack()), exceptionstack: Jd.toString(Jd.exceptionStack()) }) } catch (b) { this.queueEvent("error", { msg: a }) } },
        initializeBridge: function() { try { this.queueEvent("init", { js: wa.executeWebRequest }) } catch (a) { null } },
        setDebugMode: function(a) {
            (this.debugMode = a) ? this.gameObj.debugmode = !0: y.deleteField(this.gameObj, "debugmode");
            this.isDirty = !0;
            for (var b = 0, c = this.modules; b < c.length;) { var d = c[b];++b;
                d.setDebugMode(a) }
        },
        queueEvent: function(a, b) { b.eventName = a;
            y.setField(b, "timestamp", (new Date).getTime());
            this.eventQueue.add(b);
            this.flush_events();
            this.sync_state() },
        onUpdate: function(a) { var b = this.isDirty;
            this.isDirty = !1; for (var c = 0, d = this.modules; c < d.length;) { var e = d[c];++c;
                b = b || e.update(a) } 0 < this.eventQueue.length && (b = !0, this.flush_events());
            b && this.sync_state() },
        flush_events: function() {
            for (; 0 <
                this.eventQueue.length;) Wb.output_event_array.push(this.eventQueue.pop())
        },
        sync_state: function() { try { Wb.eval("nsdk_expose", [this.gameObj, Wb.output_event_array]), Wb.output_event_array.length = 0 } catch (a) { null } },
        log: function(a, b) { this.debugMode && this.queueEvent("log", { id: a, msg: b }) },
        __class__: Wb
    };
    var rn = function() {};
    g["nicksdk.SDKModule"] = rn;
    rn.__name__ = ["nicksdk", "SDKModule"];
    rn.prototype = { __class__: rn };
    var od = function() {};
    g["nicksdk.event.GameEventEmitter"] = od;
    od.__name__ = ["nicksdk", "event", "GameEventEmitter"];
    od.init = function(a) { od.sdk = a };
    od.sendGameEvent = function(a, b) { od.callExternal(a, b) };
    od.callExternal = function(a, b) { if (null != od.sdk) od.sdk.queueEvent(a, { params: b });
        else throw "SDK not initialized!"; };
    var wa = function() {};
    g["nicksdk.event.GameEventListener"] = wa;
    wa.__name__ = ["nicksdk", "event", "GameEventListener"];
    wa.init = function(a) { wa.sdk = a };
    wa.executeWebRequest = function(a) {
        wa.AssertType(a, O.TObject);
        if (null == a.name) return !1;
        switch (a.name) {
            case "toggleaudio":
                wa.AssertParameter(a, "enable", O.TBool);
                if (null !=
                    wa.onAudioToggle) return wa.onAudioToggle(a.enable), !0;
                wa.sdk.log("SDKGameEventListener", "Audio Toggle is not implemented.");
                break;
            case "toggleplayback":
                wa.AssertParameter(a, "enable", O.TBool);
                if (null != wa.onPlaybackToggle) return wa.onPlaybackToggle(a.enable), !0;
                wa.sdk.log("SDKGameEventListener", "Playback Toggle is not implemented.");
                break;
            case "togglesuspend":
                wa.AssertParameter(a, "enable", O.TBool);
                if (null != wa.onSuspendToggle) wa.onSuspendToggle(a.enable);
                else wa.sdk.log("SDKGameEventListener", "Suspend Toggle is not implemented.");
                break;
            case "toggledebug":
                wa.AssertParameter(a, "enable", O.TBool);
                if (null != wa.onDebugModeToggle) wa.onDebugModeToggle(a.enable);
                else wa.sdk.log("SDKGameEventListener", "Debug Mode Toggle is not implemented.");
                if (null != wa.sdk) return wa.sdk.setDebugMode(a.enable), !0;
                break;
            default:
                wa.sdk.log("SDKGameEventListener", "Unknown function")
        }
        return !1
    };
    wa.AssertType = function(a, b) {
        var c = Y["typeof"](a);
        if (c != b) throw c = "TypeCheck: Object {" + u.string(a) + "} was of type {" + u.string(c) + "}. Expected type {" + u.string(b) +
            "}", null != wa.sdk && wa.sdk.log("SDKGameEventListener", c), c;
    };
    wa.AssertParameter = function(a, b, c) { if (Object.prototype.hasOwnProperty.call(a, b)) a = y.field(a, b), wa.AssertType(a, c);
        else throw c = "ParameterCheck: Parameter {" + b + "} of type{" + u.string(c) + "} does not exist!", null != wa.sdk && wa.sdk.log("SDKGameEventListener", c), c; };
    var $c = function() {};
    g["spinehaxe.ArrayUtils"] = $c;
    $c.__name__ = ["spinehaxe", "ArrayUtils"];
    $c.allocFloat = function(a) { var b;
        b = Array(a); for (var c = 0; c < a;) { var d = c++;
            b[d] = 0 } return b };
    var If =
        function(a, b, c) { this.flipX = this.flipY = !1;
            this.x = this.y = this.rotation = this.rotationIK = this.scaleX = this.scaleY = 0;
            this.worldFlipX = this.worldFlipY = !1;
            this.m00 = this.m01 = this.m10 = this.m11 = this.worldX = this.worldY = this.worldRotation = this.worldScaleX = this.worldScaleY = 0; if (null == a) throw new ja("data cannot be null."); if (null == b) throw new ja("skeleton cannot be null.");
            this.data = a;
            this.skeleton = b;
            this.parent = c;
            this.setToSetupPose() };
    g["spinehaxe.Bone"] = If;
    If.__name__ = ["spinehaxe", "Bone"];
    If.prototype = {
        updateWorldTransform: function() {
            if (null !=
                this.parent) this.worldX = this.x * this.parent.m00 + this.y * this.parent.m01 + this.parent.worldX, this.worldY = this.x * this.parent.m10 + this.y * this.parent.m11 + this.parent.worldY, this.data.inheritScale ? (this.worldScaleX = this.parent.worldScaleX * this.scaleX, this.worldScaleY = this.parent.worldScaleY * this.scaleY) : (this.worldScaleX = this.scaleX, this.worldScaleY = this.scaleY), this.worldRotation = this.data.inheritRotation ? this.parent.worldRotation + this.rotationIK : this.rotationIK, this.worldFlipX = this.parent.worldFlipX != this.flipX,
                this.worldFlipY = this.parent.worldFlipY != this.flipY;
            else { var a = this.skeleton.flipX,
                    b = this.skeleton.flipY;
                this.worldX = a ? -this.x : this.x;
                this.worldY = b != If.yDown ? -this.y : this.y;
                this.worldScaleX = this.scaleX;
                this.worldScaleY = this.scaleY;
                this.worldRotation = this.rotationIK;
                this.worldFlipX = a != this.flipX;
                this.worldFlipY = b != this.flipY } b = this.worldRotation * (Math.PI / 180);
            a = Math.cos(b);
            b = Math.sin(b);
            this.worldFlipX ? (this.m00 = -a * this.worldScaleX, this.m01 = b * this.worldScaleY) : (this.m00 = a * this.worldScaleX, this.m01 = -b * this.worldScaleY);
            this.worldFlipY != If.yDown ? (this.m10 = -b * this.worldScaleX, this.m11 = -a * this.worldScaleY) : (this.m10 = b * this.worldScaleX, this.m11 = a * this.worldScaleY)
        },
        setToSetupPose: function() { this.x = this.data.x;
            this.y = this.data.y;
            this.rotationIK = this.rotation = this.data.rotation;
            this.scaleX = this.data.scaleX;
            this.scaleY = this.data.scaleY;
            this.flipX = this.data.flipX;
            this.flipY = this.data.flipY },
        worldToLocal: function(a) {
            var b = a[0] - this.worldX,
                c = a[1] - this.worldY,
                d = this.m00,
                e = this.m10,
                f = this.m01,
                j = this.m11;
            this.worldFlipX != (this.worldFlipY != If.yDown) && (d = -d, j = -j);
            var p = 1 / (d * j - f * e);
            a[0] = b * d * p - c * f * p;
            a[1] = c * j * p - b * e * p
        },
        localToWorld: function(a) { var b = a[0],
                c = a[1];
            a[0] = b * this.m00 + c * this.m01 + this.worldX;
            a[1] = b * this.m10 + c * this.m11 + this.worldY },
        __class__: If
    };
    var qm = function(a, b) {
        this.inheritScale = this.inheritRotation = this.flipX = this.flipY = !1;
        this.scaleX = this.scaleY = 1;
        this.length = this.x = this.y = this.rotation = 0;
        this.scaleY = this.scaleX = 1;
        this.inheritRotation = this.inheritScale = !0;
        if (null == a) throw new ja("name cannot be null.");
        this.name = a;
        this.parent = b
    };
    g["spinehaxe.BoneData"] = qm;
    qm.__name__ = ["spinehaxe", "BoneData"];
    qm.prototype = { __class__: qm };
    var rm = function(a) { if (null == a) throw new ja("data cannot be null.");
        this.data = a };
    g["spinehaxe.Event"] = rm;
    rm.__name__ = ["spinehaxe", "Event"];
    rm.prototype = { __class__: rm };
    var sm = function(a) { if (null == a) throw new ja("name cannot be null.");
        this.name = a };
    g["spinehaxe.EventData"] = sm;
    sm.__name__ = ["spinehaxe", "EventData"];
    sm.prototype = { __class__: sm };
    var ja = function(a) { this.msg = a };
    g["spinehaxe.Exception"] =
        ja;
    ja.__name__ = ["spinehaxe", "Exception"];
    ja.prototype = { toString: function() { return this.msg }, __class__: ja };
    var $a = function(a, b) { this.bendDirection = this.mix = 0; if (null == a) throw new ja("data cannot be null."); if (null == b) throw new ja("skeleton cannot be null.");
        this.data = a;
        this.mix = a.mix;
        this.bendDirection = a.bendDirection;
        this.bones = []; for (var c = 0, d = a.bones; c < d.length;) { var e = d[c];++c;
            this.bones[this.bones.length] = b.findBone(e.name) } this.target = b.findBone(a.target.name) };
    g["spinehaxe.IkConstraint"] = $a;
    $a.__name__ = ["spinehaxe", "IkConstraint"];
    $a.apply1 = function(a, b, c, d) { var e;
        e = !a.data.inheritRotation || null == a.parent ? 0 : a.parent.worldRotation; var f = a.rotation,
            b = Math.atan2(c - a.worldY, b - a.worldX) * $a.radDeg - e;
        a.rotationIK = f + (b - f) * d };
    $a.apply2 = function(a, b, c, d, e, f) {
        var j = b.rotation,
            p = a.rotation;
        if (0 == f) b.rotationIK = j, a.rotationIK = p;
        else {
            var h, g;
            g = a.parent;
            null != g ? ($a.tempPosition[0] = c, $a.tempPosition[1] = d, g.worldToLocal($a.tempPosition), c = ($a.tempPosition[0] - a.x) * g.worldScaleX, d = ($a.tempPosition[1] -
                a.y) * g.worldScaleY) : (c -= a.x, d -= a.y);
            b.parent == a ? (h = b.x, g = b.y) : ($a.tempPosition[0] = b.x, $a.tempPosition[1] = b.y, b.parent.localToWorld($a.tempPosition), a.worldToLocal($a.tempPosition), h = $a.tempPosition[0], g = $a.tempPosition[1]);
            h *= a.worldScaleX;
            var i = g * a.worldScaleY;
            g = Math.atan2(i, h);
            i = Math.sqrt(h * h + i * i);
            h = b.data.length * b.worldScaleX;
            var k = 2 * i * h;
            1.0E-4 > k ? b.rotationIK = j + (Math.atan2(d, c) * $a.radDeg - p - j) * f : (k = (c * c + d * d - i * i - h * h) / k, -1 > k ? k = -1 : 1 < k && (k = 1), e *= Math.acos(k), i += h * k, h *= Math.sin(e), c = (Math.atan2(d * i -
                c * h, c * i + d * h) - g) * $a.radDeg - p, 180 < c ? c -= 360 : -180 > c && (c += 360), a.rotationIK = p + c * f, c = (e + g) * $a.radDeg - j, 180 < c ? c -= 360 : -180 > c && (c += 360), b.rotationIK = j + (c + a.worldRotation - b.parent.worldRotation) * f)
        }
    };
    $a.prototype = { apply: function() { switch (this.bones.length) {
                case 1:
                    $a.apply1(this.bones[0], this.target.worldX, this.target.worldY, this.mix); break;
                case 2:
                    $a.apply2(this.bones[0], this.bones[1], this.target.worldX, this.target.worldY, this.bendDirection, this.mix) } }, __class__: $a };
    var tm = function(a) {
        this.bendDirection = this.mix =
            1;
        this.bones = [];
        if (null == a) throw new ja("name cannot be null.");
        this.name = a
    };
    g["spinehaxe.IkConstraintData"] = tm;
    tm.__name__ = ["spinehaxe", "IkConstraintData"];
    tm.prototype = { __class__: tm };
    var x = function() {};
    g["spinehaxe.JsonUtils"] = x;
    x.__name__ = ["spinehaxe", "JsonUtils"];
    x.parse = function(a) { return JSON.parse(a) };
    x.fields = function(a) { return y.fields(a) };
    x.getNode = function(a, b) { return x.getDynamic(a, b) };
    x.getDynamic = function(a, b) { return y.getProperty(a, b) };
    x.getNodesArray = function(a, b) {
        return U.__cast(x.getDynamic(a,
            b), Array)
    };
    x.getInt = function(a, b, c) { null == c && (c = 0);
        a = x.getDynamic(a, b); return null == a ? c : U.__cast(a, Jn) };
    x.getFloat = function(a, b, c) { null == c && (c = 0);
        a = x.getDynamic(a, b); return null == a ? c : U.__cast(a, Fn) };
    x.getStr = function(a, b, c) { a = x.getDynamic(a, b); return null == a ? c : u.string(a) };
    x.getBool = function(a, b, c) { null == c && (c = !1);
        a = x.getDynamic(a, b); return null == a ? c : a };
    x.getFloatArray = function(a, b, c) { a = x.getDynamic(a, b); if (1 != c)
            for (var b = 0, d = a.length; b < d;) { var e = b++;
                a[e] *= c }
        return a };
    x.getIntArray = function(a, b) {
        return x.getDynamic(a,
            b)
    };
    x.hasOwnProperty = function(a, b) { return Object.prototype.hasOwnProperty.call(a, b) };
    var vm = function(a) {
        this.flipX = this.flipY = !1;
        this.time = 0;
        this.a = 1;
        this._boneCache = [];
        if (null == a) throw new ja("data cannot be null.");
        this.data = a;
        this.bones = [];
        for (var b = 0, c = a.bones; b < c.length;) { var d = c[b];++b; var e;
            e = null == d.parent ? null : this.bones[a.bones.indexOf(d.parent)];
            this.bones[this.bones.length] = new If(d, this, e) } this.slots = [];
        this.drawOrder = [];
        b = 0;
        for (c = a.slots; b < c.length;) d = c[b], ++b, e = this.bones[a.bones.indexOf(d.boneData)],
            d = new um(d, e), this.slots[this.slots.length] = d, this.drawOrder[this.drawOrder.length] = d;
        this.ikConstraints = [];
        b = 0;
        for (a = a.ikConstraints; b < a.length;) c = a[b], ++b, this.ikConstraints[this.ikConstraints.length] = new $a(c, this);
        this.updateCache()
    };
    g["spinehaxe.Skeleton"] = vm;
    vm.__name__ = ["spinehaxe", "Skeleton"];
    vm.prototype = {
        updateCache: function() {
            var a = this.ikConstraints.length + 1;
            this._boneCache.length > a && this._boneCache.splice(a, this._boneCache.length - a);
            for (var b = 0, c = this._boneCache; b < c.length;) {
                var d = c[b];
                ++b;
                d.splice(0, d.length)
            }
            for (; this._boneCache.length < a;) this._boneCache[this._boneCache.length] = [];
            a = this._boneCache[0];
            b = !1;
            c = 0;
            for (d = this.bones; c < d.length;) { var e = d[c];++c; var f = e;
                do { for (var j = 0, p = 0, h = this.ikConstraints; p < h.length;) { var g = h[p];++p; for (var i = g.bones[0], g = g.bones[g.bones.length - 1]; !b;)
                            if (f == g) this._boneCache[j].push(e), this._boneCache[j + 1].push(e), b = !0;
                            else { if (g == i) break;
                                g = g.parent } if (b) break;
                        j++ } if (b) break;
                    f = f.parent } while (null != f);
                b ? b = !1 : a[a.length] = e }
        },
        updateWorldTransform: function() {
            for (var a =
                    0, b = this.bones; a < b.length;) { var c = b[a];++a;
                c.rotationIK = c.rotation } a = 0;
            for (b = this._boneCache.length - 1;;) { for (var c = 0, d = this._boneCache[a]; c < d.length;) { var e = d[c];++c;
                    e.updateWorldTransform() } if (a == b) break;
                this.ikConstraints[a].apply();
                a++ }
        },
        setBonesToSetupPose: function() { for (var a = 0, b = this.bones; a < b.length;) { var c = b[a];++a;
                c.setToSetupPose() } a = 0; for (b = this.ikConstraints; a < b.length;) c = b[a], ++a, c.bendDirection = c.data.bendDirection, c.mix = c.data.mix },
        setSlotsToSetupPose: function(a) {
            null == a && (a = !0);
            var b =
                0;
            this.drawOrder.splice(0, this.drawOrder.length);
            for (var c = 0, d = this.slots; c < d.length;) { var e = d[c];++c;
                this.drawOrder[b++] = e;
                e.setToSetupPose(a) }
        },
        findBone: function(a) { if (null == a) throw new ja("boneName cannot be null."); for (var b = 0, c = this.bones; b < c.length;) { var d = c[b];++b; if (d.data.name == a) return d } return null },
        findSlot: function(a) { if (null == a) throw new ja("slotName cannot be null."); for (var b = 0, c = this.slots; b < c.length;) { var d = c[b];++b; if (d.data.name == a) return d } return null },
        getAttachmentForSlotIndex: function(a,
            b) { if (null == b) throw new ja("attachmentName cannot be null."); if (null != this.skin) { var c = this.skin.getAttachment(a, b); if (null != c) return c } return null != this.data.defaultSkin ? this.data.defaultSkin.getAttachment(a, b) : null },
        __class__: vm
    };
    var wm = function() { this.width = this.height = 0;
        this.ikConstraints = [];
        this.animations = [];
        this.events = [];
        this.skins = [];
        this.slots = [];
        this.bones = [] };
    g["spinehaxe.SkeletonData"] = wm;
    wm.__name__ = ["spinehaxe", "SkeletonData"];
    wm.prototype = {
        findBone: function(a) {
            if (null == a) throw new ja("boneName cannot be null.");
            for (var b = 0, c = this.bones; b < c.length;) { var d = c[b];++b; if (d.name == a) return d }
            return null
        },
        findBoneIndex: function(a) { if (null == a) throw new ja("boneName cannot be null."); for (var b = 0, c = this.bones.length; b < c;) { var d = b++; if (this.bones[d].name == a) return d } return -1 },
        findSlotIndex: function(a) { if (null == a) throw new ja("slotName cannot be null."); for (var b = 0, c = this.slots.length; b < c;) { var d = b++; if (this.slots[d].name == a) return d } return -1 },
        findSkin: function(a) {
            if (null == a) throw new ja("skinName cannot be null.");
            for (var b = 0, c = this.skins; b < c.length;) { var d = c[b];++b; if (d.name == a) return d }
            return null
        },
        findEvent: function(a) { if (null == a) throw new ja("eventName cannot be null."); for (var b = 0, c = this.events; b < c.length;) { var d = c[b];++b; if (d.name == a) return d } return null },
        findAnimation: function(a) { if (null == a) throw new ja("animationName cannot be null."); for (var b = 0, c = this.animations; b < c.length;) { var d = c[b];++b; if (d.name == a) return d } return null },
        findIkConstraint: function(a) {
            if (null == a) throw new ja("ikConstraintName cannot be null.");
            for (var b = 0, c = this.ikConstraints; b < c.length;) { var d = c[b];++b; if (d.name == a) return d }
            return null
        },
        __class__: wm
    };
    var La = function(a) { this.scale = 1;
        this.attachmentLoader = a };
    g["spinehaxe.SkeletonJson"] = La;
    La.__name__ = ["spinehaxe", "SkeletonJson"];
    La.readCurve = function(a, b, c) { c = x.getNode(c, "curve");
        null != c && ("string" == typeof c && "stepped" == U.__cast(c, String) ? a.setStepped(b) : c instanceof Array && null == c.__enum__ && a.setCurve(b, c[0], c[1], c[2], c[3])) };
    La.toColor = function(a, b) {
        if (8 != a.length) throw new ja("Color hexidecimal length must be 8, recieved: " +
            a);
        return u.parseInt("0x" + a.substring(2 * b, 2 * b + 2)) / 255
    };
    La.prototype = {
        readSkeletonData: function(a, b) {
            if (null == a) throw new ja("object cannot be null.");
            var c = x.parse(a),
                d = new wm;
            d.name = b;
            if (x.hasOwnProperty(c, "skeleton")) { var e = c.skeleton;
                d.hash = x.getStr(e, "hash");
                d.version = x.getStr(e, "spine");
                d.width = x.getFloat(e, "width");
                d.height = x.getFloat(e, "height") }
            for (var f = 0, j = x.getNodesArray(c, "bones"); f < j.length;) {
                var p = j[f];
                ++f;
                var e = null,
                    h = x.getStr(p, "parent");
                if (null != h && (e = d.findBone(h), null == e)) throw "Parent bone not found: " +
                    h;
                e = new qm(p.name, e);
                e.length = x.getFloat(p, "length", 0) * this.scale;
                e.x = x.getFloat(p, "x") * this.scale;
                e.y = x.getFloat(p, "y") * this.scale;
                e.rotation = x.getFloat(p, "rotation");
                e.scaleX = x.getFloat(p, "scaleX", 1);
                e.scaleY = x.getFloat(p, "scaleY", 1);
                e.flipX = x.getBool(p, "flipX", !1);
                e.flipY = x.getBool(p, "flipY", !1);
                e.inheritScale = x.getBool(p, "inheritScale", !0);
                e.inheritRotation = x.getBool(p, "inheritRotation", !0);
                d.bones[d.bones.length] = e
            }
            if (x.hasOwnProperty(c, "ik")) {
                e = 0;
                for (f = x.getNodesArray(c, "ik"); e < f.length;) {
                    j =
                        f[e];
                    ++e;
                    for (var p = new tm(x.getStr(j, "name")), h = 0, g = x.getNodesArray(j, "bones"); h < g.length;) { var i = g[h];++h; var k = d.findBone(i); if (null == k) throw "IK bone not found: " + u.string(i);
                        p.bones[p.bones.length] = k } p.target = d.findBone(x.getStr(j, "target"));
                    if (null == p.target) throw "Target bone not found: " + x.getStr(j, "target");
                    p.bendDirection = x.getBool(j, "bendPositive", !0) ? 1 : -1;
                    p.mix = x.getFloat(j, "mix", 1);
                    d.ikConstraints[d.ikConstraints.length] = p
                }
            }
            f = 0;
            for (j = x.getNodesArray(c, "slots"); f < j.length;) {
                p = j[f];
                ++f;
                h =
                    x.getStr(p, "bone");
                e = d.findBone(h);
                if (null == e) throw "Slot bone not found: " + h;
                e = new xm(x.getStr(p, "name"), e);
                h = x.getStr(p, "color");
                null != h && (e.r = La.toColor(h, 0), e.g = La.toColor(h, 1), e.b = La.toColor(h, 2), e.a = La.toColor(h, 3));
                e.attachmentName = x.getStr(p, "attachment");
                e.additiveBlending = x.getBool(p, "additive");
                d.slots[d.slots.length] = e
            }
            e = x.getNode(c, "skins");
            f = 0;
            for (j = x.fields(e); f < j.length;) {
                h = j[f];
                ++f;
                p = x.getNode(e, h);
                h = new ym(h);
                g = 0;
                for (i = x.fields(p); g < i.length;) {
                    var l = i[g];
                    ++g;
                    for (var k = d.findSlotIndex(l),
                            l = x.getNode(p, l), m = 0, n = x.fields(l); m < n.length;) { var o = n[m];++m; var t = this.readAttachment(h, o, x.getNode(l, o));
                        null != t && h.addAttachment(k, o, t) }
                }
                d.skins[d.skins.length] = h;
                "default" == h.name && (d.defaultSkin = h)
            }
            e = x.getNode(c, "events");
            if (null != e) { f = 0; for (j = x.fields(e); f < j.length;) h = j[f], ++f, p = x.getNode(e, h), h = new sm(h), h.intValue = x.getInt(p, "int"), h.floatValue = x.getFloat(p, "float"), h.stringValue = x.getStr(p, "string"), d.events[d.events.length] = h } c = x.getNode(c, "animations");
            e = 0;
            for (f = x.fields(c); e < f.length;) j =
                f[e], ++e, this.readAnimation(j, x.getNode(c, j), d);
            return d
        },
        readAttachment: function(a, b, c) {
            var b = x.getStr(c, "name", b),
                d = x.getStr(c, "type", "region"),
                e = x.getStr(c, "path", b),
                f = this.scale;
            switch (d) {
                case "region":
                    a = this.attachmentLoader.newRegionAttachment(a, b, e);
                    if (null == a) break;
                    a.path = e;
                    a.x = x.getFloat(c, "x") * f;
                    a.y = x.getFloat(c, "y") * f;
                    a.scaleX = x.getFloat(c, "scaleX", 1);
                    a.scaleY = x.getFloat(c, "scaleY", 1);
                    a.rotation = x.getFloat(c, "rotation");
                    a.width = x.getFloat(c, "width") * f;
                    a.height = x.getFloat(c, "height") * f;
                    e = x.getStr(c, "color");
                    null != e && (a.r = La.toColor(e, 0), a.g = La.toColor(e, 1), a.b = La.toColor(e, 2), a.a = La.toColor(e, 3));
                    a.updateOffset();
                    return a;
                case "mesh":
                    a = this.attachmentLoader.newMeshAttachment(a, b, e);
                    if (null == a) break;
                    a.path = e;
                    a.vertices = x.getFloatArray(c, "vertices", f);
                    a.triangles = x.getIntArray(c, "triangles");
                    a.regionUVs = x.getFloatArray(c, "uvs", 1);
                    a.updateUVs();
                    e = x.getStr(c, "color");
                    null != e && (a.r = La.toColor(e, 0), a.g = La.toColor(e, 1), a.b = La.toColor(e, 2), a.a = La.toColor(e, 3));
                    a.hullLength = 2 * x.getInt(c,
                        "hull");
                    x.hasOwnProperty(c, "edges") && (a.edges = x.getIntArray(c, "edges"));
                    a.width = x.getFloat(c, "width") * f;
                    a.height = x.getFloat(c, "height") * f;
                    return a;
                case "skinnedmesh":
                    a = this.attachmentLoader.newSkinnedMeshAttachment(a, b, e);
                    if (null == a) break;
                    a.path = e;
                    for (var b = x.getFloatArray(c, "uvs", 1), e = x.getFloatArray(c, "vertices", 1), d = [], j = [], h = 0, g = e.length; h < g;) { var i = u["int"](e[h++]);
                        j[j.length] = i; for (i = h + 4 * i; h < i;) j[j.length] = e[h] | 0, d[d.length] = e[h + 1] * f, d[d.length] = e[h + 2] * f, d[d.length] = e[h + 3], h += 4 } a.bones = j;
                    a.weights =
                        d;
                    a.triangles = x.getIntArray(c, "triangles");
                    a.regionUVs = b;
                    a.updateUVs();
                    e = x.getStr(c, "color");
                    null != e && (a.r = La.toColor(e, 0), a.g = La.toColor(e, 1), a.b = La.toColor(e, 2), a.a = La.toColor(e, 3));
                    a.hullLength = 2 * x.getInt(c, "hull");
                    x.hasOwnProperty(c, "edges") && (a.edges = x.getIntArray(c, "edges"));
                    a.width = x.getFloat(c, "width") * f;
                    a.height = x.getFloat(c, "height") * f;
                    return a;
                case "boundingbox":
                    a = this.attachmentLoader.newBoundingBoxAttachment(a, b);
                    c = x.getFloatArray(c, "vertices", 1);
                    for (e = 0; e < c.length;) b = c[e], ++e, a.vertices.push(b *
                        f);
                    return a;
                default:
                    throw "Attachment type not implemented: " + u.string(d);
            }
            return null
        },
        readAnimation: function(a, b, c) {
            for (var d = [], e = 0, f, j = 0, h, g = 0, i = x.getNode(b, "slots"), k = 0, l = x.fields(i); k < l.length;) {
                var m = l[k];
                ++k;
                f = y.getProperty(i, m);
                for (var j = c.findSlotIndex(m), n = 0, o = x.fields(f); n < o.length;) {
                    var t = o[n];
                    ++n;
                    h = x.getNodesArray(f, t);
                    if ("color" == t) {
                        var r = new Uj(h.length);
                        r.slotIndex = j;
                        for (var s = g = 0; s < h.length;) {
                            var v = h[s];
                            ++s;
                            var u = x.getStr(v, "color"),
                                w = La.toColor(u, 0),
                                A = La.toColor(u, 1),
                                z = La.toColor(u,
                                    2),
                                q = La.toColor(u, 3);
                            r.setFrame(g, x.getFloat(v, "time"), w, A, z, q);
                            La.readCurve(r, g, v);
                            g++
                        }
                        d[d.length] = r;
                        e = Math.max(e, function() { var a = 5 * r.get_frameCount() - 5; return r.frames[a] }(this))
                    } else if ("attachment" == t) { var D = new Vj(h.length);
                        D.slotIndex = j; for (var E = g = 0; E < h.length;) { var F = h[E];++E;
                            D.setFrame(g++, x.getFloat(F, "time"), x.getStr(F, "name")) } d[d.length] = D;
                        e = Math.max(e, function() { var a = D.get_frameCount() - 1; return D.frames[a] }(this)) } else throw "Invalid timeline type for a slot: " + t + " (" + m + ")";
                }
            }
            for (var G =
                    x.getNode(b, "bones"), C = 0, J = x.fields(G); C < J.length;) {
                var M = J[C];
                ++C;
                var K = c.findBoneIndex(M);
                if (-1 == K) throw "Bone not found: " + M;
                for (var N = x.getNode(G, M), O = 0, Q = x.fields(N); O < Q.length;) {
                    var P = Q[O];
                    ++O;
                    h = x.getNodesArray(N, P);
                    if ("rotate" == P) { var L = new Wj(h.length);
                        L.boneIndex = K; for (var R = g = 0; R < h.length;) { var H = h[R];++R;
                            L.setFrame(g, x.getFloat(H, "time"), x.getFloat(H, "angle"));
                            La.readCurve(L, g, H);
                            g++ } d[d.length] = L;
                        e = Math.max(e, function() { var a = 2 * L.get_frameCount() - 2; return L.frames[a] }(this)) } else if ("translate" ==
                        P || "scale" == P) { var W, I = 1; "scale" == P ? W = new Xj(h.length) : (W = new Jf(h.length), I = this.scale);
                        W.boneIndex = K; for (var S = g = 0; S < h.length;) { var X = h[S];++S; var ba = x.getFloat(X, "x") * I,
                                ca = x.getFloat(X, "y") * I;
                            W.setFrame(g, x.getFloat(X, "time"), ba, ca);
                            La.readCurve(W, g, X);
                            g++ } d[d.length] = W;
                        e = Math.max(e, function() { var a = 3 * W.get_frameCount() - 3; return W.frames[a] }(this)) } else if ("flipX" == P || "flipY" == P) {
                        var Z = "flipX" == P,
                            Y;
                        Y = Z ? new Kf(h.length) : new Yj(h.length);
                        Y.boneIndex = K;
                        var $;
                        $ = Z ? "x" : "y";
                        for (var ha = g = 0; ha < h.length;) {
                            var na =
                                h[ha];
                            ++ha;
                            Y.setFrame(g, x.getFloat(na, "time"), x.getBool(na, $, !1));
                            g++
                        }
                        d[d.length] = Y;
                        e = Math.max(e, function() { var a = 2 * Y.get_frameCount() - 2; return Y.frames[a] }(this))
                    } else throw "Invalid timeline type for a bone: " + P + " (" + M + ")";
                }
            }
            for (var ea = x.getNode(b, "ik"), ja = 0, ka = x.fields(ea); ja < ka.length;) {
                var B = ka[ja];
                ++ja;
                var ma = c.findIkConstraint(B);
                h = x.getNodesArray(ea, B);
                var ia = new Zj(h.length);
                ia.ikConstraintIndex = c.ikConstraints.indexOf(ma);
                for (var da = g = 0; da < h.length;) {
                    var xa = h[da];
                    ++da;
                    var ta = x.getFloat(xa,
                            "mix", 1),
                        la;
                    la = x.getBool(xa, "bendPositive", !0) ? 1 : -1;
                    ia.setFrame(g, x.getFloat(xa, "time"), ta, la);
                    La.readCurve(ia, g, xa);
                    g++
                }
                d[d.length] = ia;
                e = Math.max(e, function() { var a = 3 * ia.get_frameCount() - 3; return ia.frames[a] }(this))
            }
            for (var fa = x.getNode(b, "ffd"), Aa = 0, aa = x.fields(fa); Aa < aa.length;) {
                var sa = aa[Aa];
                ++Aa;
                var wa = c.findSkin(sa);
                f = x.getNode(fa, sa);
                for (var ya = 0, Ca = x.fields(f); ya < Ca.length;) {
                    var ga = Ca[ya];
                    ++ya;
                    for (var j = c.findSlotIndex(ga), Da = x.getNode(f, ga), ra = 0, Ja = x.fields(Da); ra < Ja.length;) {
                        var V = Ja[ra];
                        ++ra;
                        h = x.getNodesArray(Da, V);
                        var qa = new $j(h.length),
                            Lf = wa.getAttachment(j, V);
                        if (null == Lf) throw "FFD attachment not found: " + V;
                        qa.slotIndex = j;
                        qa.attachment = Lf;
                        for (var Ea = 0, Ea = U.__instanceof(Lf, Md) ? U.__cast(Lf, Md).vertices.length : 2 * (U.__cast(Lf, mh).weights.length / 3) | 0, Ka = g = 0; Ka < h.length;) {
                            var Fa = h[Ka];
                            ++Ka;
                            var za;
                            if (x.hasOwnProperty(Fa, "vertices")) {
                                var cb = x.getFloatArray(Fa, "vertices", 1),
                                    Ua = x.getInt(Fa, "offset"),
                                    ab = cb.length;
                                za = [];
                                for (var fb = 0; fb < Ea;) { var oa = fb++;
                                    za[oa] = 0 }
                                if (1 == this.scale)
                                    for (var Na =
                                            0; Na < ab;) { var Ya = Na++;
                                        za[Ya + Ua] = cb[Ya] } else
                                        for (var Pa = 0; Pa < ab;) { var pa = Pa++;
                                            za[pa + Ua] = cb[pa] * this.scale }
                                if (U.__instanceof(Lf, Md))
                                    for (var T = U.__cast(Lf, Md).vertices, Za = 0; Za < Ea;) { var Qa = Za++;
                                        za[Qa] += T[Qa] }
                            } else za = U.__instanceof(Lf, Md) ? U.__cast(Lf, Md).vertices : [];
                            qa.setFrame(g, x.getFloat(Fa, "time"), za);
                            La.readCurve(qa, g, Fa);
                            g++
                        }
                        d[d.length] = qa;
                        e = Math.max(e, function() { var a = qa.get_frameCount() - 1; return qa.frames[a] }(this))
                    }
                }
            }
            var Va = x.getNode(b, "drawOrder");
            null == Va && (Va = x.getNode(b, "draworder"));
            if (null !=
                Va && 0 < Va.length) {
                for (var $a = new ak(Va.length), Xa = c.slots.length, eb = g = 0; eb < Va.length;) {
                    var Gn = Va[eb];
                    ++eb;
                    var Ta = null;
                    if (x.hasOwnProperty(Gn, "offsets")) {
                        for (var Ta = Array(Xa), db = Xa - 1; 0 <= db;) { var zm = db--;
                            Ta[zm] = -1 }
                        var Ma = x.getNodesArray(Gn, "offsets"),
                            Ia;
                        Ia = Array(Xa - Ma.length | 0);
                        for (var Wa = 0, Ba = 0, ua = 0; ua < Ma.length;) {
                            var kb = Ma[ua];
                            ++ua;
                            j = c.findSlotIndex(x.getStr(kb, "slot"));
                            if (-1 == j) throw "Slot not found: " + x.getStr(kb, "slot");
                            for (; Wa != j;) { var Sa = Ba++,
                                    Ga = Wa++;
                                Ia[Sa] = Ga }
                            var mb = Wa + x.getInt(kb, "offset"),
                                lb =
                                Wa++;
                            Ta[mb] = lb
                        }
                        for (; Wa < Xa;) { var sb = Ba++,
                                ob = Wa++;
                            Ia[sb] = ob }
                        for (var ib = Xa - 1; 0 <= ib;) { if (-1 == Ta[ib]) { var Bb = --Ba;
                                Ta[ib] = Ia[Bb] } ib-- }
                    }
                    $a.setFrame(g++, x.getFloat(Gn, "time"), Ta)
                }
                d[d.length] = $a;
                e = Math.max(e, function() { var a = $a.get_frameCount() - 1; return $a.frames[a] }(this))
            }
            var jb = x.getNode(b, "events");
            if (null != jb && 0 < jb.length) {
                var hb = new bk(jb.length),
                    Hn = g = 0,
                    Oa;
                for (Oa = U.__cast(jb, Array); Hn < Oa.length;) {
                    var qb = Oa[Hn];
                    ++Hn;
                    var nb = c.findEvent(x.getStr(qb, "name"));
                    if (null == nb) throw "Event not found: " + x.getStr(qb,
                        "name");
                    var Ha = new rm(nb);
                    Ha.intValue = x.getInt(qb, "int", nb.intValue);
                    Ha.floatValue = x.getFloat(qb, "float", Ha.floatValue);
                    Ha.stringValue = x.getStr(qb, "string", nb.stringValue);
                    hb.setFrame(g++, x.getFloat(qb, "time"), Ha)
                }
                d[d.length] = hb;
                e = Math.max(e, function() { var a = hb.get_frameCount() - 1; return hb.frames[a] }(this))
            }
            c.animations[c.animations.length] = new ec(a, d, e)
        },
        __class__: La
    };
    var ym = function(a) { this.attachments = []; if (null == a) throw new ja("name cannot be null.");
        this.name = a };
    g["spinehaxe.Skin"] = ym;
    ym.__name__ = ["spinehaxe", "Skin"];
    ym.prototype = { addAttachment: function(a, b, c) { if (null == c) throw new ja("attachment cannot be null.");
            null == this.attachments[a] && (this.attachments[a] = new K);
            this.attachments[a].set(b, c);
            c }, getAttachment: function(a, b) { return null == this.attachments[a] ? null : this.attachments[a].get(b) }, __class__: ym };
    var um = function(a, b) {
        this.attachmentVertices = [];
        this.r = this.g = this.b = this.a = this._attachmentTime = 0;
        if (null == a) throw new ja("data cannot be null.");
        if (null == b) throw new ja("bone cannot be null.");
        this.data = a;
        this.bone = b;
        this.setToSetupPose()
    };
    g["spinehaxe.Slot"] = um;
    um.__name__ = ["spinehaxe", "Slot"];
    um.prototype = {
        set_attachment: function(a) { this.attachment = a;
            this._attachmentTime = this.bone.skeleton.time;
            this.attachmentVertices.splice(0, this.attachmentVertices.length); return a },
        setToSetupPose: function(a) {
            null == a && (a = !0);
            var b = this.bone.skeleton.data.slots.indexOf(this.data);
            this.r = this.data.r;
            this.g = this.data.g;
            this.b = this.data.b;
            this.a = this.data.a;
            if (a && (null == this.attachment || this.attachment.weak)) this.set_attachment(null ==
                this.data.attachmentName ? null : this.bone.skeleton.getAttachmentForSlotIndex(b, this.data.attachmentName))
        },
        __class__: um,
        __properties__: { set_attachment: "set_attachment" }
    };
    var xm = function(a, b) { this.a = this.b = this.g = this.r = 1; if (null == a) throw new ja("name cannot be null."); if (null == b) throw new ja("boneData cannot be null.");
        this.name = a;
        this.boneData = b };
    g["spinehaxe.SlotData"] = xm;
    xm.__name__ = ["spinehaxe", "SlotData"];
    xm.prototype = { __class__: xm };
    var ec = function(a, b, c) {
        this.duration = 0;
        if (null == a) throw new ja("name cannot be null.");
        if (null == b) throw new ja("timelines cannot be null.");
        this.name = a;
        this.timelines = b;
        this.duration = c
    };
    g["spinehaxe.animation.Animation"] = ec;
    ec.__name__ = ["spinehaxe", "animation", "Animation"];
    ec.binarySearch = function(a, b, c) { var d = 0,
            e = a.length / c - 2 | 0; if (0 == e) return c; for (var f = e >>> 1;;) { a[(f + 1) * c] <= b ? d = f + 1 : e = f; if (d == e) return (d + 1) * c;
            f = d + e >>> 1 } return 0 };
    ec.binarySearch1 = function(a, b) { var c = 0,
            d = a.length - 2; if (0 == d) return 1; for (var e = d >>> 1;;) { a[e + 1] <= b ? c = e + 1 : d = e; if (c == d) return c + 1;
            e = c + d >>> 1 } return 0 };
    ec.prototype = { apply: function(a, b, c, d, e) { if (null == a) throw new ja("skeleton cannot be null.");
            d && 0 != this.duration && (c %= this.duration, b %= this.duration); for (var d = this.timelines.length, f = 0; f < d;) this.timelines[f++].apply(a, b, c, e, 1) }, mix: function(a, b, c, d, e, f) { if (null == a) throw new ja("skeleton cannot be null.");
            d && 0 != this.duration && (c %= this.duration, b %= this.duration); for (var d = this.timelines.length, j = 0; j < d;) this.timelines[j++].apply(a, b, c, e, f) }, __class__: ec };
    var Am = function(a) {
        this.timeScale = 1;
        this.tracks = [];
        this.events = [];
        this.onStart = new rg;
        this.onEnd = new rg;
        this.onComplete = new rg;
        this.onEvent = new rg;
        this.timeScale = 1;
        if (null == a) throw new ja("data cannot be null.");
        this.data = a
    };
    g["spinehaxe.animation.AnimationState"] = Am;
    Am.__name__ = ["spinehaxe", "animation", "AnimationState"];
    Am.prototype = {
        update: function(a) {
            for (var a = a * this.timeScale, b = 0, c = this.tracks.length; b < c;) {
                var d = b++,
                    e = this.tracks[d];
                if (null != e) {
                    e.time += a * e.timeScale;
                    if (null != e.previous) { var f = a * e.previous.timeScale;
                        e.previous.time += f;
                        e.mixTime += f } f = e.next;
                    null != f ? (f.time = e.lastTime - f.delay, 0 <= f.time && this.setCurrent(d, f)) : !e.loop && e.lastTime >= e.endTime && this.clearTrack(d)
                }
            }
        },
        apply: function(a) {
            for (var b = 0, c = this.tracks.length; b < c;) {
                var d = b++,
                    e = this.tracks[d];
                if (null != e) {
                    this.events.splice(0, this.events.length);
                    var f = e.time,
                        j = e.lastTime,
                        h = e.endTime,
                        g = e.loop;
                    !g && f > h && (f = h);
                    var i = e.previous;
                    if (null == i) 1 == e.mix ? e.animation.apply(a, e.lastTime, f, g, this.events) : e.animation.mix(a, e.lastTime, f, g, this.events, e.mix);
                    else {
                        var k = i.time;
                        !i.loop && k > i.endTime && (k =
                            i.endTime);
                        i.animation.apply(a, k, k, i.loop, null);
                        i = e.mixTime / e.mixDuration * e.mix;
                        1 <= i && (i = 1, e.previous = null);
                        e.animation.mix(a, e.lastTime, f, g, this.events, i)
                    }
                    i = 0;
                    for (k = this.events; i < k.length;) { var l = k[i];++i; if (null != e.onEvent) e.onEvent(d, l);
                        this.onEvent.invoke(d, l) }
                    if (g ? 0 == h || j % h > f % h : j < h && f >= h) { f = f / h | 0; if (null != e.onComplete) e.onComplete(d, f);
                        this.onComplete.invoke(d, f) } e.lastTime = e.time
                }
            }
        },
        clearTrack: function(a) {
            if (!(a >= this.tracks.length)) {
                var b = this.tracks[a];
                if (null != b) {
                    if (null != b.onEnd) b.onEnd(a);
                    this.onEnd.invoke(a);
                    this.tracks[a] = null
                }
            }
        },
        expandToIndex: function(a) { if (a < this.tracks.length) return this.tracks[a]; for (; a >= this.tracks.length;) this.tracks[this.tracks.length] = null; return null },
        setCurrent: function(a, b) {
            var c = this.expandToIndex(a);
            if (null != c) { var d = c.previous;
                c.previous = null; if (null != c.onEnd) c.onEnd(a);
                this.onEnd.invoke(a);
                b.mixDuration = this.data.getMix(c.animation, b.animation);
                0 < b.mixDuration && (b.mixTime = 0, b.previous = null != d && 0.5 > c.mixTime / c.mixDuration ? d : c) } this.tracks[a] = b;
            if (null !=
                b.onStart) b.onStart(a);
            this.onStart.invoke(a)
        },
        setAnimationByName: function(a, b, c) { var d = this.data.skeletonData.findAnimation(b); if (null == d) throw new ja("Animation not found: " + b); return this.setAnimation(a, d, c) },
        setAnimation: function(a, b, c) { var d = new Bm;
            d.animation = b;
            d.loop = c;
            d.endTime = b.duration;
            this.setCurrent(a, d); return d },
        __class__: Am
    };
    var Cm = function(a) { this.defaultMix = 0;
        this.animationToMixTime = new K;
        this.defaultMix = 0;
        this.skeletonData = a };
    g["spinehaxe.animation.AnimationStateData"] = Cm;
    Cm.__name__ = ["spinehaxe", "animation", "AnimationStateData"];
    Cm.prototype = {
        setMixByName: function(a, b, c) { var d = this.skeletonData.findAnimation(a); if (null == d) throw new ja("Animation not found: " + a);
            a = this.skeletonData.findAnimation(b); if (null == a) throw new ja("Animation not found: " + b);
            this.setMix(d, a, c) },
        setMix: function(a, b, c) { if (null == a) throw new ja("from cannot be null."); if (null == b) throw new ja("to cannot be null.");
            this.animationToMixTime.set(a.name + ":" + b.name, c);
            c },
        getMix: function(a, b) {
            var c = a.name + ":" + b.name;
            return !this.animationToMixTime.exists(c) ? this.defaultMix : this.animationToMixTime.get(c)
        },
        __class__: Cm
    };
    var Mf = function() {};
    g["spinehaxe.animation.Timeline"] = Mf;
    Mf.__name__ = ["spinehaxe", "animation", "Timeline"];
    Mf.prototype = { __class__: Mf };
    var Vj = function(a) { this.frames = $c.allocFloat(a);
        this.attachmentNames = Array(a) };
    g["spinehaxe.animation.AttachmentTimeline"] = Vj;
    Vj.__name__ = ["spinehaxe", "animation", "AttachmentTimeline"];
    Vj.__interfaces__ = [Mf];
    Vj.prototype = {
        get_frameCount: function() { return this.frames.length },
        setFrame: function(a, b, c) { this.frames[a] = b;
            this.attachmentNames[a] = c },
        apply: function(a, b, c) { c < this.frames[0] ? b > c && this.apply(a, b, 2147483647, null, 0) : (b > c && (b = -1), c = c >= this.frames[this.frames.length - 1] ? this.frames.length - 1 : ec.binarySearch1(this.frames, c) - 1, this.frames[c] < b || (b = this.attachmentNames[c], a.slots[this.slotIndex].set_attachment(null == b ? null : a.getAttachmentForSlotIndex(this.slotIndex, b)))) },
        __class__: Vj,
        __properties__: { get_frameCount: "get_frameCount" }
    };
    var Sb = function(a) {
        this.curves = $c.allocFloat(19 *
            (a - 1))
    };
    g["spinehaxe.animation.CurveTimeline"] = Sb;
    Sb.__name__ = ["spinehaxe", "animation", "CurveTimeline"];
    Sb.__interfaces__ = [Mf];
    Sb.prototype = {
        apply: function() {},
        get_frameCount: function() { return this.curves.length / 19 + 1 | 0 },
        setStepped: function(a) { this.curves[19 * a] = 1 },
        setCurve: function(a, b, c, d, e) {
            var f = 0.1 * 0.1,
                j = 0.1 * f,
                h = 3 * 0.1,
                g = 3 * f,
                i = 6 * f,
                f = 6 * j,
                k = 2 * -b + d,
                l = 2 * -c + e,
                d = 3 * (b - d) + 1,
                e = 3 * (c - e) + 1,
                b = b * h + k * g + d * j,
                c = c * h + l * g + e * j,
                j = k * i + d * f,
                i = l * i + e * f,
                l = d * f,
                f = e * f,
                a = 19 * a,
                d = this.curves,
                e = a++;
            d[e] = 2;
            e = b;
            h = c;
            for (g = a + 19 - 1; a < g;) d[a] =
                e, d[a + 1] = h, b += j, c += i, j += l, i += f, e += b, h += c, a += 2
        },
        getCurvePercent: function(a, b) { var c = this.curves,
                d = 19 * a,
                e = c[d]; if (0 == e) return b; if (1 == e) return 0;
            d++; for (var e = 0, f = d, j = d + 19 - 1; d < j;) { e = c[d]; if (e >= b) return d == f ? j = f = 0 : (f = c[d - 2], j = c[d - 1]), j + (c[d + 1] - j) * (b - f) / (e - f);
                d += 2 } c = c[d - 1]; return c + (1 - c) * (b - e) / (1 - e) },
        __class__: Sb,
        __properties__: { get_frameCount: "get_frameCount" }
    };
    var Uj = function(a) { Sb.call(this, a);
        this.frames = $c.allocFloat(5 * a) };
    g["spinehaxe.animation.ColorTimeline"] = Uj;
    Uj.__name__ = ["spinehaxe", "animation",
        "ColorTimeline"
    ];
    Uj.__super__ = Sb;
    Uj.prototype = l(Sb.prototype, {
        setFrame: function(a, b, c, d, e, f) { a *= 5;
            this.frames[a] = b;
            this.frames[a + 1] = c;
            this.frames[a + 2] = d;
            this.frames[a + 3] = e;
            this.frames[a + 4] = f },
        apply: function(a, b, c, d, e) {
            if (!(c < this.frames[0])) {
                var f, j;
                if (c >= this.frames[this.frames.length - 5]) b = this.frames.length - 1, c = this.frames[b - 3], f = this.frames[b - 2], j = this.frames[b - 1], b = this.frames[b];
                else {
                    var b = ec.binarySearch(this.frames, c, 5),
                        h = this.frames[b - 4];
                    f = this.frames[b - 3];
                    j = this.frames[b - 2];
                    var d = this.frames[b -
                            1],
                        g = this.frames[b],
                        g = 1 - (c - g) / (this.frames[b + -5] - g),
                        g = this.getCurvePercent(b / 5 - 1 | 0, 0 > g ? 0 : 1 < g ? 1 : g),
                        c = h + (this.frames[b + 1] - h) * g;
                    f += (this.frames[b + 2] - f) * g;
                    j += (this.frames[b + 3] - j) * g;
                    b = d + (this.frames[b + 4] - d) * g
                }
                a = a.slots[this.slotIndex];
                1 > e ? (a.r += (c - a.r) * e, a.g += (f - a.g) * e, a.b += (j - a.b) * e, a.a += (b - a.a) * e) : (a.r = c, a.g = f, a.b = j, a.a = b)
            }
        },
        __class__: Uj
    });
    var ak = function(a) { this.frames = $c.allocFloat(a);
        this.drawOrders = Array(a) };
    g["spinehaxe.animation.DrawOrderTimeline"] = ak;
    ak.__name__ = ["spinehaxe", "animation", "DrawOrderTimeline"];
    ak.__interfaces__ = [Mf];
    ak.prototype = { get_frameCount: function() { return this.frames.length }, setFrame: function(a, b, c) { this.frames[a] = b;
            this.drawOrders[a] = c }, apply: function(a, b, c) { if (!(c < this.frames[0])) { var c = c >= this.frames[this.frames.length - 1] ? this.frames.length - 1 : ec.binarySearch1(this.frames, c) - 1,
                    b = a.drawOrder,
                    d = this.drawOrders[c],
                    c = 0; if (null == d) { d = 0; for (a = a.slots; d < a.length;) { var e = a[d];++d;
                        b[c++] = e } } else
                    for (e = 0; e < d.length;) { var f = d[e];++e;
                        b[c++] = a.slots[f] } } }, __class__: ak, __properties__: { get_frameCount: "get_frameCount" } };
    var bk = function(a) { this.frames = $c.allocFloat(a);
        this.events = Array(a) };
    g["spinehaxe.animation.EventTimeline"] = bk;
    bk.__name__ = ["spinehaxe", "animation", "EventTimeline"];
    bk.__interfaces__ = [Mf];
    bk.prototype = {
        get_frameCount: function() { return this.frames.length },
        setFrame: function(a, b, c) { this.frames[a] = b;
            this.events[a] = c },
        apply: function(a, b, c, d, e) {
            if (null != d) {
                if (b > c) this.apply(a, b, 32767, d, e), b = -1;
                else if (a = b, e = this.get_frameCount() - 1, a >= this.frames[e]) return;
                if (!(c < this.frames[0])) {
                    if (b < this.frames[0]) b =
                        0;
                    else { b = ec.binarySearch1(this.frames, b); for (a = this.frames[b]; 0 < b && !(this.frames[b - 1] != a);) b-- }
                    for (; b < this.get_frameCount() && c >= this.frames[b];) d.push(this.events[b]), b++
                }
            }
        },
        __class__: bk,
        __properties__: { get_frameCount: "get_frameCount" }
    };
    var $j = function(a) { Sb.call(this, a);
        this.frames = $c.allocFloat(a);
        this.frameVertices = Array(a) };
    g["spinehaxe.animation.FfdTimeline"] = $j;
    $j.__name__ = ["spinehaxe", "animation", "FfdTimeline"];
    $j.__super__ = Sb;
    $j.prototype = l(Sb.prototype, {
        setFrame: function(a, b, c) {
            this.frames[a] =
                b;
            this.frameVertices[a] = c
        },
        apply: function(a, b, c, d, e) {
            b = a.slots[this.slotIndex];
            if (b.attachment == this.attachment && (d = this.frames, !(c < d[0]))) {
                var f = this.frameVertices,
                    a = f[0].length,
                    b = b.attachmentVertices;
                b.length != a && (e = 1);
                if (c >= d[d.length - 1])
                    if (c = f[d.length - 1], 1 > e)
                        for (d = 0; d < a;) f = d++, b[f] += (c[f] - b[f]) * e;
                    else
                        for (e = 0; e < a;) d = e++, b[d] = c[d];
                else {
                    var j = ec.binarySearch1(d, c),
                        h = d[j],
                        c = 1 - (c - h) / (d[j - 1] - h),
                        c = this.getCurvePercent(j - 1, 0 > c ? 0 : 1 < c ? 1 : c),
                        d = f[j - 1],
                        f = f[j];
                    if (1 > e)
                        for (h = 0; h < a;) {
                            var g = h++,
                                j = d[g];
                            b[g] += (j +
                                (f[g] - j) * c - b[g]) * e
                        } else
                            for (e = 0; e < a;) h = e++, j = d[h], b[h] = j + (f[h] - j) * c
                }
            }
        },
        __class__: $j
    });
    var Kf = function(a) { this.frames = $c.allocFloat(2 * a) };
    g["spinehaxe.animation.FlipXTimeline"] = Kf;
    Kf.__name__ = ["spinehaxe", "animation", "FlipXTimeline"];
    Kf.__interfaces__ = [Mf];
    Kf.prototype = {
        get_frameCount: function() { return this.frames.length / 2 | 0 },
        setFrame: function(a, b, c) { a *= 2;
            this.frames[a] = b;
            this.frames[a + 1] = c ? 1 : 0 },
        apply: function(a, b, c) {
            c < this.frames[0] ? b > c && this.apply(a, b, 2147483647, null, 0) : (b > c && (b = -1), c = (c >= this.frames[this.frames.length -
                2] ? this.frames.length : ec.binarySearch(this.frames, c, 2)) - 2, this.frames[c] < b || this.setFlip(a.bones[this.boneIndex], 0 != this.frames[c + 1]))
        },
        setFlip: function(a, b) { a.flipX = b },
        __class__: Kf,
        __properties__: { get_frameCount: "get_frameCount" }
    };
    var Yj = function(a) { Kf.call(this, a) };
    g["spinehaxe.animation.FlipYTimeline"] = Yj;
    Yj.__name__ = ["spinehaxe", "animation", "FlipYTimeline"];
    Yj.__super__ = Kf;
    Yj.prototype = l(Kf.prototype, { setFlip: function(a, b) { a.flipY = b }, __class__: Yj });
    var Zj = function(a) {
        Sb.call(this, a);
        this.frames =
            $c.allocFloat(3 * a)
    };
    g["spinehaxe.animation.IkConstraintTimeline"] = Zj;
    Zj.__name__ = ["spinehaxe", "animation", "IkConstraintTimeline"];
    Zj.__super__ = Sb;
    Zj.prototype = l(Sb.prototype, {
        setFrame: function(a, b, c, d) { a *= 3;
            this.frames[a] = b;
            this.frames[a + 1] = c;
            this.frames[a + 2] = d },
        apply: function(a, b, c, d, e) {
            if (!(c < this.frames[0]))
                if (a = a.ikConstraints[this.ikConstraintIndex], c >= this.frames[this.frames.length - 3]) a.mix += (this.frames[this.frames.length - 2] - a.mix) * e, a.bendDirection = this.frames[this.frames.length - 1] | 0;
                else {
                    var b =
                        ec.binarySearch(this.frames, c, 3),
                        d = this.frames[b + -2],
                        f = this.frames[b],
                        c = 1 - (c - f) / (this.frames[b + -3] - f),
                        c = this.getCurvePercent(b / 3 - 1 | 0, 0 > c ? 0 : 1 < c ? 1 : c);
                    a.mix += (d + (this.frames[b + 1] - d) * c - a.mix) * e;
                    a.bendDirection = this.frames[b + -1] | 0
                }
        },
        __class__: Zj
    });
    var rg = function() { this.listeners = [] };
    g["spinehaxe.animation.Listeners"] = rg;
    rg.__name__ = ["spinehaxe", "animation", "Listeners"];
    rg.prototype = {
        add: function(a) { if (null == a) throw new ja("listener cannot be null.");
            this.listeners.push(a) },
        remove: function(a) {
            if (null ==
                a) throw new ja("listener cannot be null.");
            N.remove(this.listeners, a)
        },
        invoke: function(a, b) { for (var c = 0, d = this.listeners; c < d.length;) { var e = d[c];++c;
                e(a, b) } },
        __class__: rg
    };
    var Wj = function(a) { Sb.call(this, a);
        this.frames = $c.allocFloat(2 * a) };
    g["spinehaxe.animation.RotateTimeline"] = Wj;
    Wj.__name__ = ["spinehaxe", "animation", "RotateTimeline"];
    Wj.__super__ = Sb;
    Wj.prototype = l(Sb.prototype, {
        setFrame: function(a, b, c) { a *= 2;
            this.frames[a] = b;
            this.frames[a + 1] = c },
        apply: function(a, b, c, d, e) {
            if (!(c < this.frames[0])) {
                a =
                    a.bones[this.boneIndex];
                if (c >= this.frames[this.frames.length - 2]) d = a.data.rotation + this.frames[this.frames.length - 1] - a.rotation;
                else { for (var d = ec.binarySearch(this.frames, c, 2), b = this.frames[d - 1], f = this.frames[d], c = 1 - (c - f) / (this.frames[d + -2] - f), c = this.getCurvePercent(Math.floor(d / 2 - 1), 0 > c ? 0 : 1 < c ? 1 : c), d = this.frames[d + 1] - b; 180 < d;) d -= 360; for (; - 180 > d;) d += 360;
                    d = a.data.rotation + (b + d * c) - a.rotation }
                for (; 180 < d;) d -= 360;
                for (; - 180 > d;) d += 360;
                a.rotation += d * e
            }
        },
        __class__: Wj
    });
    var Jf = function(a) {
        this.frames = $c.allocFloat(3 *
            a);
        Sb.call(this, a)
    };
    g["spinehaxe.animation.TranslateTimeline"] = Jf;
    Jf.__name__ = ["spinehaxe", "animation", "TranslateTimeline"];
    Jf.__super__ = Sb;
    Jf.prototype = l(Sb.prototype, {
        setFrame: function(a, b, c, d) { a *= 3;
            this.frames[a] = b;
            this.frames[a + 1] = c;
            this.frames[a + 2] = d },
        apply: function(a, b, c, d, e) {
            if (!(c < this.frames[0]))
                if (a = a.bones[this.boneIndex], c >= this.frames[this.frames.length - 3]) a.x += (a.data.x + this.frames[this.frames.length - 2] - a.x) * e, a.y += (a.data.y + this.frames[this.frames.length - 1] - a.y) * e;
                else {
                    var b = ec.binarySearch(this.frames,
                            c, 3),
                        d = this.frames[b - 2],
                        f = this.frames[b - 1],
                        j = this.frames[b],
                        c = 1 - (c - j) / (this.frames[b + -3] - j),
                        c = this.getCurvePercent(Math.floor(b / 3 - 1), 0 > c ? 0 : 1 < c ? 1 : c);
                    a.x += (a.data.x + d + (this.frames[b + 1] - d) * c - a.x) * e;
                    a.y += (a.data.y + f + (this.frames[b + 2] - f) * c - a.y) * e
                }
        },
        __class__: Jf
    });
    var Xj = function(a) { Jf.call(this, a) };
    g["spinehaxe.animation.ScaleTimeline"] = Xj;
    Xj.__name__ = ["spinehaxe", "animation", "ScaleTimeline"];
    Xj.__super__ = Jf;
    Xj.prototype = l(Jf.prototype, {
        apply: function(a, b, c, d, e) {
            if (!(c < this.frames[0]))
                if (a = a.bones[this.boneIndex],
                    c >= this.frames[this.frames.length - 3]) a.scaleX += (a.data.scaleX * this.frames[this.frames.length - 2] - a.scaleX) * e, a.scaleY += (a.data.scaleY * this.frames[this.frames.length - 1] - a.scaleY) * e;
                else { var b = ec.binarySearch(this.frames, c, 3),
                        d = this.frames[b - 2],
                        f = this.frames[b - 1],
                        j = this.frames[b],
                        c = 1 - (c - j) / (this.frames[b + -3] - j),
                        c = this.getCurvePercent(Math.floor(b / 3 - 1), 0 > c ? 0 : 1 < c ? 1 : c);
                    a.scaleX += (a.data.scaleX * (d + (this.frames[b + 1] - d) * c) - a.scaleX) * e;
                    a.scaleY += (a.data.scaleY * (f + (this.frames[b + 2] - f) * c) - a.scaleY) * e }
        },
        __class__: Xj
    });
    var Bm = function() { this.timeScale = this.mix = 1;
        this.lastTime = -1;
        this.time = 0 };
    g["spinehaxe.animation.TrackEntry"] = Bm;
    Bm.__name__ = ["spinehaxe", "animation", "TrackEntry"];
    Bm.prototype = { __class__: Bm };
    var Ul = function(a, b) { this.regions = [];
        this.pages = [];
        this.load(a, b) };
    g["spinehaxe.atlas.Atlas"] = Ul;
    Ul.__name__ = ["spinehaxe", "atlas", "Atlas"];
    Ul.prototype = {
        load: function(a, b) {
            if (null == b) throw new ja("textureLoader cannot be null.");
            this.textureLoader = b;
            for (var c = new Dm(a), d = [], e = null;;) {
                var f = c.readLine();
                if (null ==
                    f) break;
                f = c.trim(f);
                if (0 == f.length) e = null;
                else if (null == e) { e = new jj;
                    e.name = f;
                    2 == c.readTuple(d) && (e.width = u.parseInt(d[0]), e.height = u.parseInt(d[1]), c.readTuple(d));
                    e.format = d[0];
                    c.readTuple(d);
                    e.minFilter = d[0];
                    e.magFilter = d[1]; var j = c.readValue();
                    e.uWrap = "clampToEdge";
                    e.vWrap = "clampToEdge"; "x" == j ? e.uWrap = "repeat" : "y" == j ? e.vWrap = "repeat" : "xy" == j && (e.uWrap = e.vWrap = "repeat");
                    b.loadPage(e, f);
                    this.pages[this.pages.length] = e } else {
                    j = new ij;
                    j.name = f;
                    j.page = e;
                    j.rotate = "true" == c.readValue();
                    c.readTuple(d);
                    var f = u.parseInt(d[0]),
                        h = u.parseInt(d[1]);
                    c.readTuple(d);
                    var g = u.parseInt(d[0]),
                        i = u.parseInt(d[1]);
                    j.u = f / e.width;
                    j.v = h / e.height;
                    j.rotate ? (j.u2 = (f + i) / e.width, j.v2 = (h + g) / e.height) : (j.u2 = (f + g) / e.width, j.v2 = (h + i) / e.height);
                    j.x = f;
                    j.y = h;
                    j.width = u["int"](Math.abs(g));
                    j.height = u["int"](Math.abs(i));
                    4 == c.readTuple(d) && (j.splits = [u.parseInt(d[0]), u.parseInt(d[1]), u.parseInt(d[2]), u.parseInt(d[3])], 4 == c.readTuple(d) && (j.pads = [u.parseInt(d[0]), u.parseInt(d[1]), u.parseInt(d[2]), u.parseInt(d[3])], c.readTuple(d)));
                    j.originalWidth = u.parseInt(d[0]);
                    j.originalHeight = u.parseInt(d[1]);
                    c.readTuple(d);
                    j.offsetX = u.parseInt(d[0]);
                    j.offsetY = u.parseInt(d[1]);
                    j.index = u.parseInt(c.readValue());
                    b.loadRegion(j);
                    this.regions[this.regions.length] = j
                }
            }
        },
        findRegion: function(a) { for (var b = 0, c = this.regions.length; b < c;) { var d = b++; if (this.regions[d].name == a) return this.regions[d] } return null },
        __class__: Ul
    };
    var Dm = function(a) { this.index = 0;
        this.lines = (new Qc("[ \t]*((\r\n)|\r|\n)[ \t]*", "g")).split(a) };
    g["spinehaxe.atlas.Reader"] = Dm;
    Dm.__name__ = ["spinehaxe", "atlas", "Reader"];
    Dm.prototype = {
        trim: function(a) { return ka.trim(a) },
        readLine: function() { return this.index >= this.lines.length ? null : this.lines[this.index++] },
        readValue: function() { var a = this.readLine(),
                b = a.indexOf(":"); if (-1 == b) throw "Invalid line: " + a; return this.trim(a.substring(b + 1)) },
        readTuple: function(a) {
            var b = this.readLine(),
                c = b.indexOf(":");
            if (-1 == c) throw "Invalid line: " + b;
            for (var d = 0, c = c + 1; 3 > d;) {
                var e = b.indexOf(",", c);
                if (-1 == e) break;
                a[d] = this.trim(N.substr(b, c, e - c));
                c =
                    e + 1;
                d++
            }
            a[d] = this.trim(b.substring(c));
            return d + 1
        },
        __class__: Dm
    };
    var jj = function() { this.width = this.height = 0 };
    g["spinehaxe.atlas.AtlasPage"] = jj;
    jj.__name__ = ["spinehaxe", "atlas", "AtlasPage"];
    jj.prototype = { __class__: jj };
    var ij = function() { this.rotate = !1;
        this.x = this.y = this.width = this.height = this.u = this.v = this.u2 = this.v2 = this.offsetX = this.offsetY = this.originalWidth = this.originalHeight = this.index = 0 };
    g["spinehaxe.atlas.AtlasRegion"] = ij;
    ij.__name__ = ["spinehaxe", "atlas", "AtlasRegion"];
    ij.prototype = { __class__: ij };
    var Em = function() {};
    g["spinehaxe.atlas.TextureLoader"] = Em;
    Em.__name__ = ["spinehaxe", "atlas", "TextureLoader"];
    Em.prototype = { __class__: Em };
    var Fm = function() {};
    g["spinehaxe.attachments.AttachmentLoader"] = Fm;
    Fm.__name__ = ["spinehaxe", "attachments", "AttachmentLoader"];
    Fm.prototype = { __class__: Fm };
    var Hd = function(a) { if (null == a) throw new ja("atlas cannot be null.");
        this.atlas = a };
    g["spinehaxe.attachments.AtlasAttachmentLoader"] = Hd;
    Hd.__name__ = ["spinehaxe", "attachments", "AtlasAttachmentLoader"];
    Hd.__interfaces__ = [Fm];
    Hd.nextPOT = function(a) { a--;
        a |= a >> 1;
        a |= a >> 2;
        a |= a >> 4;
        a |= a >> 8; return (a | a >> 16) + 1 };
    Hd.prototype = {
        newRegionAttachment: function(a, b, c) {
            a = this.atlas.findRegion(c);
            if (null == a) return new He(b);
            b = new He(b);
            b.rendererObject = a;
            var c = a.page.width / Hd.nextPOT(a.page.width),
                d = a.page.height / Hd.nextPOT(a.page.height);
            b.setUVs(a.u * c, a.v * d, a.u2 * c, a.v2 * d, a.rotate);
            b.regionOffsetX = a.offsetX;
            b.regionOffsetY = a.offsetY;
            b.regionWidth = a.width;
            b.regionHeight = a.height;
            b.regionOriginalWidth = a.originalWidth;
            b.regionOriginalHeight =
                a.originalHeight;
            return b
        },
        newMeshAttachment: function(a, b, c) {
            a = this.atlas.findRegion(c);
            if (null == a) throw "Region not found in atlas: " + c + " (mesh attachment: " + b + ")";
            b = new Md(b);
            b.rendererObject = a;
            var c = a.page.width / Hd.nextPOT(a.page.width),
                d = a.page.height / Hd.nextPOT(a.page.height);
            b.regionU = a.u * c;
            b.regionV = a.v * d;
            b.regionU2 = a.u2 * c;
            b.regionV2 = a.v2 * d;
            b.regionRotate = a.rotate;
            b.regionOffsetX = a.offsetX;
            b.regionOffsetY = a.offsetY;
            b.regionWidth = a.width;
            b.regionHeight = a.height;
            b.regionOriginalWidth = a.originalWidth;
            b.regionOriginalHeight = a.originalHeight;
            return b
        },
        newSkinnedMeshAttachment: function(a, b, c) {
            a = this.atlas.findRegion(c);
            if (null == a) throw "Region not found in atlas: " + c + " (skinned mesh attachment: " + b + ")";
            b = new mh(b);
            b.rendererObject = a;
            var c = a.page.width / Hd.nextPOT(a.page.width),
                d = a.page.height / Hd.nextPOT(a.page.height);
            b.regionU = a.u * c;
            b.regionV = a.v * d;
            b.regionU2 = a.u2 * c;
            b.regionV2 = a.v2 * d;
            b.regionRotate = a.rotate;
            b.regionOffsetX = a.offsetX;
            b.regionOffsetY = a.offsetY;
            b.regionWidth = a.width;
            b.regionHeight = a.height;
            b.regionOriginalWidth = a.originalWidth;
            b.regionOriginalHeight = a.originalHeight;
            return b
        },
        newBoundingBoxAttachment: function(a, b) { return new ck(b) },
        __class__: Hd
    };
    var ad = function(a, b) { null == b && (b = !0);
        this.weak = !0; if (null == a) throw new ja("name cannot be null.");
        this.name = a;
        this.weak = b };
    g["spinehaxe.attachments.Attachment"] = ad;
    ad.__name__ = ["spinehaxe", "attachments", "Attachment"];
    ad.prototype = { __class__: ad };
    var ck = function(a) { ad.call(this, a);
        this.vertices = [] };
    g["spinehaxe.attachments.BoundingBoxAttachment"] =
        ck;
    ck.__name__ = ["spinehaxe", "attachments", "BoundingBoxAttachment"];
    ck.__super__ = ad;
    ck.prototype = l(ad.prototype, { __class__: ck });
    var Md = function(a) { this.regionOffsetX = this.regionOffsetY = this.regionWidth = this.regionHeight = this.regionOriginalWidth = this.regionOriginalHeight = this.width = this.height = 0;
        this.regionRotate = !1;
        this.regionU = this.regionV = this.regionU2 = this.regionV2 = 0;
        this.r = this.g = this.b = this.a = 1;
        this.hullLength = 0;
        ad.call(this, a) };
    g["spinehaxe.attachments.MeshAttachment"] = Md;
    Md.__name__ = ["spinehaxe",
        "attachments", "MeshAttachment"
    ];
    Md.__super__ = ad;
    Md.prototype = l(ad.prototype, { updateUVs: function() { var a = this.regionU2 - this.regionU,
                b = this.regionV2 - this.regionV,
                c = this.regionUVs.length; if (null == this.uvs || this.uvs.length != c) this.uvs = []; if (this.regionRotate)
                for (var d = 0; d < c;) this.uvs[d] = this.regionU + this.regionUVs[d + 1] * a, this.uvs[d + 1] = this.regionV + b - this.regionUVs[d] * b, d += 2;
            else
                for (d = 0; d < c;) this.uvs[d] = this.regionU + this.regionUVs[d] * a, this.uvs[d + 1] = this.regionV + this.regionUVs[d + 1] * b, d += 2 }, __class__: Md });
    var He = function(a) { this.regionOffsetX = this.regionOffsetY = this.regionWidth = this.regionHeight = this.regionOriginalWidth = this.regionOriginalHeight = 0;
        this.r = this.g = this.b = this.a = 1;
        this.rotation = this.width = this.height = 0;
        this.scaleX = this.scaleY = 1;
        this.x = this.y = 0;
        ad.call(this, a);
        this.offset = $c.allocFloat(8);
        this.uvs = []; for (a = 0; 8 > a;) this.uvs[a++] = 0 };
    g["spinehaxe.attachments.RegionAttachment"] = He;
    He.__name__ = ["spinehaxe", "attachments", "RegionAttachment"];
    He.__super__ = ad;
    He.prototype = l(ad.prototype, {
        setUVs: function(a,
            b, c, d, e) { e ? (this.uvs[2] = a, this.uvs[3] = d, this.uvs[4] = a, this.uvs[5] = b, this.uvs[6] = c, this.uvs[7] = b, this.uvs[0] = c, this.uvs[1] = d) : (this.uvs[0] = a, this.uvs[1] = d, this.uvs[2] = a, this.uvs[3] = b, this.uvs[4] = c, this.uvs[5] = b, this.uvs[6] = c, this.uvs[7] = d) },
        updateOffset: function() {
            var a = this.width / this.regionOriginalWidth * this.scaleX,
                b = this.height / this.regionOriginalHeight * this.scaleY,
                c = -this.width / 2 * this.scaleX + this.regionOffsetX * a,
                d = -this.height / 2 * this.scaleY + this.regionOffsetY * b,
                e = c + this.regionWidth * a,
                b = d + this.regionHeight *
                b,
                a = this.rotation * Math.PI / 180,
                f = Math.cos(a),
                j = Math.sin(a),
                a = c * f + this.x,
                c = c * j,
                h = d * f + this.y,
                d = d * j,
                g = e * f + this.x,
                e = e * j,
                f = b * f + this.y,
                b = b * j;
            this.offset[0] = a - d;
            this.offset[1] = h + c;
            this.offset[2] = a - b;
            this.offset[3] = f + c;
            this.offset[4] = g - b;
            this.offset[5] = f + e;
            this.offset[6] = g - d;
            this.offset[7] = h + e
        },
        __class__: He
    });
    var mh = function(a) {
        this.regionOffsetX = this.regionOffsetY = this.regionWidth = this.regionHeight = this.regionOriginalWidth = this.regionOriginalHeight = this.width = this.height = 0;
        this.regionRotate = !1;
        this.regionU =
            this.regionV = this.regionU2 = this.regionV2 = 0;
        this.r = this.g = this.b = this.a = 1;
        ad.call(this, a)
    };
    g["spinehaxe.attachments.SkinnedMeshAttachment"] = mh;
    mh.__name__ = ["spinehaxe", "attachments", "SkinnedMeshAttachment"];
    mh.__super__ = ad;
    mh.prototype = l(ad.prototype, {
        updateUVs: function() {
            var a = this.regionU2 - this.regionU,
                b = this.regionV2 - this.regionV,
                c = this.regionUVs.length;
            if (null == this.uvs || this.uvs.length != c) this.uvs = [];
            if (this.regionRotate)
                for (var d = 0; d < c;) this.uvs[d] = this.regionU + this.regionUVs[d + 1] * a, this.uvs[d +
                    1] = this.regionV + b - this.regionUVs[d] * b, d += 2;
            else
                for (d = 0; d < c;) this.uvs[d] = this.regionU + this.regionUVs[d] * a, this.uvs[d + 1] = this.regionV + this.regionUVs[d + 1] * b, d += 2
        },
        __class__: mh
    });
    var gj = function(a) { this.pack = a };
    g["spinehaxe.platform.flambe.BitmapDataTextureLoader"] = gj;
    gj.__name__ = ["spinehaxe", "platform", "flambe", "BitmapDataTextureLoader"];
    gj.__interfaces__ = [Em];
    gj.prototype = {
        loadPage: function(a, b) {
            -1 < b.indexOf(".png") && (b = b.substring(0, b.length - 4));
            var c = this.pack.getTexture(b);
            if (null == c) throw new ja("Texture not found with name: " +
                b);
            a.rendererObject = c;
            a.width = c.get_width();
            a.height = c.get_height()
        },
        loadRegion: function() {},
        __class__: gj
    };
    var dk = function(a) {
        this._rotation = this._textureWidth = this._textureHeight = this._textureX = this._textureY = 0;
        this._xScale = this._yScale = 1;
        this._x = this._y = 0;
        s.call(this);
        if (null == a) throw "RegionAttachment can't be null";
        var b = a.rendererObject;
        if (null == b) throw "AtlasRegion not found : " + a.name;
        this._textureWidth = b.rotate ? b.height : b.width;
        this._textureHeight = b.rotate ? b.width : b.height;
        this._rotation = -a.rotation;
        this._xScale = a.scaleX * (a.width / b.width);
        this._yScale = a.scaleY * (a.height / b.height);
        var c = -a.rotation * Math.PI / 180,
            d = Math.cos(c),
            c = Math.sin(c),
            e = -a.width / 2 * a.scaleX,
            f = -a.height / 2 * a.scaleY;
        b.rotate && (this._rotation += 90, e += this._textureHeight * (a.width / b.width));
        this._x = a.x + e * d - f * c;
        this._y = -a.y + e * c + f * d;
        this._textureX = b.x;
        this._textureY = b.y;
        this._texture = b.page.rendererObject
    };
    g["spinehaxe.platform.flambe.RegionAttachmentSprite"] = dk;
    dk.__name__ = ["spinehaxe", "platform", "flambe", "RegionAttachmentSprite"];
    dk.__super__ = s;
    dk.prototype = l(s.prototype, { draw: function(a) { a.translate(this._x, this._y);
            a.rotate(this._rotation);
            a.drawSubTexture(this._texture, 0, 0, this._textureX, this._textureY, this._textureWidth, this._textureHeight);
            a.scale(this._xScale, this._yScale) }, getNaturalWidth: function() { return this._textureWidth }, getNaturalHeight: function() { return this._textureHeight }, __class__: dk });
    var Nf = function(a) { this.container = new A;
        s.call(this);
        this.skeleton = new vm(a);
        this.skeleton.updateWorldTransform() };
    g["spinehaxe.platform.flambe.SkeletonSprite"] =
        Nf;
    Nf.__name__ = ["spinehaxe", "platform", "flambe", "SkeletonSprite"];
    Nf.__super__ = s;
    Nf.prototype = l(s.prototype, {
        onAdded: function() { this.owner.addChild(this.container) },
        onRemoved: function() { this.owner.removeChild(this.container) },
        removeAllAttachments: function() { for (var a = this.container.firstChild; null != a;) this.container.removeChild(a), a = a.next },
        onUpdate: function(a) {
            s.prototype.onUpdate.call(this, a);
            this.removeAllAttachments();
            for (var a = this.skeleton.drawOrder, b = 0, c = a.length; b < c;) {
                var d = b++,
                    e = a[d];
                if (null !=
                    e.attachment && U.__instanceof(e.attachment, He)) {
                    var f;
                    f = U.__cast(e.attachment, He);
                    d = f.wrapper;
                    null == d && (d = f.wrapper = new dk(f), d.set_pixelSnapping(0 != (this._flags & 32)), (new A).add(d));
                    d.setAlpha(this.skeleton.a * e.a * f.a);
                    e = e.bone;
                    f = this.skeleton.flipX ? -1 : 1;
                    var j;
                    j = this.skeleton.flipY ? -1 : 1;
                    e.flipX && (f = -f);
                    e.flipY && (j = -j);
                    for (var h = e.parent; null != h;) h.flipX && (f = -f), h.flipY && (j = -j), h = h.parent;
                    this.container.addChild(d.owner);
                    d.setXY(e.worldX, e.worldY);
                    d.setRotation(-e.worldRotation * f * j);
                    d.setScaleXY(e.worldScaleX *
                        f, e.worldScaleY * j)
                }
            }
        },
        __class__: Nf
    });
    var hj = function(a, b) { null == b && (b = 0.1);
        this.timeScale = 1;
        Nf.call(this, a);
        this.stateData = new Cm(a);
        this.stateData.defaultMix = b;
        this.state = new Am(this.stateData) };
    g["spinehaxe.platform.flambe.SkeletonAnimation"] = hj;
    hj.__name__ = ["spinehaxe", "platform", "flambe", "SkeletonAnimation"];
    hj.__super__ = Nf;
    hj.prototype = l(Nf.prototype, {
        onUpdate: function(a) {
            this.state.update(a * this.timeScale);
            this.state.apply(this.skeleton);
            this.skeleton.updateWorldTransform();
            Nf.prototype.onUpdate.call(this,
                a)
        },
        __class__: hj
    });
    var xd = function() { this.status = S.Invalid };
    g["stolo.ai.bt.Behavior"] = xd;
    xd.__name__ = ["stolo", "ai", "bt", "Behavior"];
    xd.prototype = {
        initialize: function() {},
        terminate: function() {},
        update: function() { return this.status },
        reset: function() { this.status = S.Invalid },
        abort: function() { this.terminate(S.Aborted);
            this.status = S.Aborted },
        dispose: function() {},
        tick: function(a) { this.status != S.Running && this.initialize();
            this.status = this.update(a);
            this.status != S.Running && this.terminate(this.status); return this.status },
        __class__: xd
    };
    var ek = function(a, b) { this.status = S.Invalid;
        this._action = a;
        this._params = b };
    g["stolo.ai.bt.Action"] = ek;
    ek.__name__ = ["stolo", "ai", "bt", "Action"];
    ek.__super__ = xd;
    ek.prototype = l(xd.prototype, { update: function(a) { return null == this._action ? S.Failure : y.field(a, this._action).apply(a, [this._params]) }, dispose: function() { xd.prototype.dispose.call(this);
            this._params = this._action = null }, __class__: ek });
    var Sa = function() { this.status = S.Invalid;
        this.children = new Be };
    g["stolo.ai.bt.Composite"] = Sa;
    Sa.__name__ = ["stolo", "ai", "bt", "Composite"];
    Sa.__super__ = xd;
    Sa.prototype = l(xd.prototype, { initialize: function() {}, addChild: function(a) { this.children.add(a) }, terminate: function() { for (var a = this.children.iterator(); a.hasNext();) { var b = a.next();
                b.status == S.Running && b.abort() } }, dispose: function() { xd.prototype.dispose.call(this); for (var a = this.children.iterator(); a.hasNext();) a.next().dispose();
            this.children = null }, __class__: Sa });
    var Ne = function() { Sa.call(this) };
    g["stolo.ai.bt.Selector"] = Ne;
    Ne.__name__ = ["stolo", "ai",
        "bt", "Selector"
    ];
    Ne.__super__ = Sa;
    Ne.prototype = l(Sa.prototype, {
        initialize: function() { null != this.children && (this._current = this.children.iterator(), this._currentBehavior = this._current.next()) },
        update: function(a) { for (; null != this._currentBehavior;) { var b = this._currentBehavior.tick(a); if (b != S.Failure) return b; if (this._current.hasNext()) this._currentBehavior = this._current.next();
                else break } return S.Failure },
        terminate: function(a) { Sa.prototype.terminate.call(this, a) },
        dispose: function() {
            Sa.prototype.dispose.call(this);
            this._currentBehavior = this._current = null
        },
        __class__: Ne
    });
    var fk = function() { Sa.call(this) };
    g["stolo.ai.bt.ActiveSelector"] = fk;
    fk.__name__ = ["stolo", "ai", "bt", "ActiveSelector"];
    fk.__super__ = Ne;
    fk.prototype = l(Ne.prototype, {
        initialize: function() { for (this._current = this.children.iterator(); this._current.hasNext();) this._currentBehavior = this._current.next() },
        update: function(a) {
            var b = this._currentBehavior;
            Ne.prototype.initialize.call(this);
            a = Ne.prototype.update.call(this, a);
            this._currentBehavior != b && b.terminate(S.Aborted);
            return a
        },
        __class__: fk
    });
    var S = g["stolo.ai.bt.BehaviorStatus"] = { __ename__: ["stolo", "ai", "bt", "BehaviorStatus"], __constructs__: ["Invalid", "Success", "Running", "Failure", "Aborted"] };
    S.Invalid = ["Invalid", 0];
    S.Invalid.toString = r;
    S.Invalid.__enum__ = S;
    S.Success = ["Success", 1];
    S.Success.toString = r;
    S.Success.__enum__ = S;
    S.Running = ["Running", 2];
    S.Running.toString = r;
    S.Running.__enum__ = S;
    S.Failure = ["Failure", 3];
    S.Failure.toString = r;
    S.Failure.__enum__ = S;
    S.Aborted = ["Aborted", 4];
    S.Aborted.toString = r;
    S.Aborted.__enum__ =
        S;
    var Ka = function() {};
    g["stolo.ai.bt.BehaviorTree"] = Ka;
    Ka.__name__ = ["stolo", "ai", "bt", "BehaviorTree"];
    Ka.getBehaviorData = function(a, b) { null == b && (b = Ka.defaultPack); var c = b + "_" + a; if (Ka._cache.exists(c)) return Ka._cache.get(c); var d = D.getJSON(a, b);
        Ka._cache.set(c, d);
        d; if (d instanceof Array && null == d.__enum__) throw "Unsupported format: Array"; return d };
    Ka.fromData = function(a) { if (null != a && null != a.type) return Ka.createBehavior(a); var b = new Ne;
        null != a && Ka.createComposite(a, b); return b };
    Ka.createComposite =
        function(a, b) { for (var c, d = 0, e = a.behaviors.length; d < e;) c = d++, c = a.behaviors[c], b.addChild(Ka.createBehavior(c)) };
    Ka.createBehavior = function(a) {
        switch (a.type) {
            case "action":
                return new ek(a.action, a.params);
            case "sequence":
                var b = new gk;
                Ka.createComposite(a, b);
                return b;
            case "random":
                return b = new hk, Ka.createComposite(a, b), b;
            case "parallel":
                var b = null != a.success ? Ka.policyFromString(a.success) : bd.RequireOne,
                    c;
                c = null != a.failure ? Ka.policyFromString(a.failure) : bd.RequireOne;
                b = new ik(b, c);
                Ka.createComposite(a,
                    b);
                return b;
            case "repeat":
                return b = Ka.createBehavior(a.behavior), a = null != a.count ? u.parseInt(a.count) : 1, new jk(b, a);
            case "inverter":
                return a = Ka.createBehavior(a.behavior), new kk(a);
            case "succeeder":
                return a = Ka.createBehavior(a.behavior), new lk(a);
            case "active":
                return b = new fk, Ka.createComposite(a, b), b;
            case "selector":
                return b = new Ne, Ka.createComposite(a, b), b;
            case "wait":
                return new mk(null != a.time ? a.time : 1);
            case "file":
                return a = Ka.getBehaviorData(a.file, a.pack), Ka.fromData(a);
            default:
                throw "Unrecognized behavior type : " +
                    u.string(a.type);
        }
    };
    Ka.policyFromString = function(a) { switch (a) {
            case "one":
                return bd.RequireOne;
            case "all":
                return bd.RequireAll;
            default:
                throw "Invalid policy, expected `one` or `all`."; } };
    var cd = function(a) { this.status = S.Invalid;
        this.child = a };
    g["stolo.ai.bt.Decorator"] = cd;
    cd.__name__ = ["stolo", "ai", "bt", "Decorator"];
    cd.__super__ = xd;
    cd.prototype = l(xd.prototype, { terminate: function() { this.child.status == S.Running && this.child.abort() }, dispose: function() { xd.prototype.dispose.call(this);
            this.child = null }, __class__: cd });
    var kk = function(a) { cd.call(this, a) };
    g["stolo.ai.bt.Inverter"] = kk;
    kk.__name__ = ["stolo", "ai", "bt", "Inverter"];
    kk.__super__ = cd;
    kk.prototype = l(cd.prototype, { update: function(a) { a = this.child.tick(a); switch (a[1]) {
                case 1:
                    return S.Failure;
                case 3:
                    return S.Success } return a }, __class__: kk });
    var bd = g["stolo.ai.bt.Policy"] = { __ename__: ["stolo", "ai", "bt", "Policy"], __constructs__: ["RequireOne", "RequireAll"] };
    bd.RequireOne = ["RequireOne", 0];
    bd.RequireOne.toString = r;
    bd.RequireOne.__enum__ = bd;
    bd.RequireAll = ["RequireAll",
        1
    ];
    bd.RequireAll.toString = r;
    bd.RequireAll.__enum__ = bd;
    var ik = function(a, b) { Sa.call(this);
        this._successPolicy = a;
        this._failurePolicy = b };
    g["stolo.ai.bt.Parallel"] = ik;
    ik.__name__ = ["stolo", "ai", "bt", "Parallel"];
    ik.__super__ = Sa;
    ik.prototype = l(Sa.prototype, {
        update: function(a) {
            for (var b = 0, c = 0, d = this.children.iterator(); d.hasNext();) {
                var e = d.next();
                e.status == S.Success || e.status == S.Failure || e.tick(a);
                switch (e.status[1]) {
                    case 1:
                        b += 1;
                        if (this._successPolicy == bd.RequireOne) return S.Success;
                        break;
                    case 3:
                        if (c += 1,
                            this._failurePolicy == bd.RequireOne) return S.Failure
                }
            }
            return this._failurePolicy == bd.RequireAll && c == this.children.length ? S.Failure : this._successPolicy == bd.RequireAll && b == this.children.length ? S.Success : S.Running
        },
        __class__: ik
    });
    var hk = function() { Sa.call(this) };
    g["stolo.ai.bt.Random"] = hk;
    hk.__name__ = ["stolo", "ai", "bt", "Random"];
    hk.__super__ = Sa;
    hk.prototype = l(Sa.prototype, {
        initialize: function() { var a = wf.array(this.children),
                b = Math.floor(Math.random() * a.length);
            this._currentBehavior = a[b] },
        update: function(a) { return this._currentBehavior.tick(a) },
        terminate: function(a) { Sa.prototype.terminate.call(this, a) },
        dispose: function() { Sa.prototype.dispose.call(this);
            this._currentBehavior = null },
        __class__: hk
    });
    var jk = function(a, b) { null == b && (b = 0);
        this.count = this._counter = 0;
        cd.call(this, a);
        this.count = b };
    g["stolo.ai.bt.Repeat"] = jk;
    jk.__name__ = ["stolo", "ai", "bt", "Repeat"];
    jk.__super__ = cd;
    jk.prototype = l(cd.prototype, {
        initialize: function() { this._counter = 0 },
        update: function(a) {
            try {
                for (;;) {
                    switch (this.child.tick(a)[1]) {
                        case 2:
                            throw "__break__";
                        case 3:
                            return S.Failure;
                        default:
                            if (++this._counter == this.count) return S.Success
                    }
                    this.child.reset()
                }
            } catch (b) { if ("__break__" != b) throw b; }
            return S.Invalid
        },
        __class__: jk
    });
    var gk = function() { Sa.call(this) };
    g["stolo.ai.bt.Sequence"] = gk;
    gk.__name__ = ["stolo", "ai", "bt", "Sequence"];
    gk.__super__ = Sa;
    gk.prototype = l(Sa.prototype, {
        initialize: function() { null != this.children && (this._current = this.children.iterator(), this._currentBehavior = this._current.next()) },
        update: function(a) {
            for (; null != this._currentBehavior;) {
                var b = this._currentBehavior.tick(a);
                if (b != S.Success) return b;
                if (this._current.hasNext()) this._currentBehavior = this._current.next();
                else break
            }
            return S.Success
        },
        terminate: function(a) { Sa.prototype.terminate.call(this, a) },
        dispose: function() { Sa.prototype.dispose.call(this);
            this._currentBehavior = this._current = null },
        __class__: gk
    });
    var lk = function(a) { cd.call(this, a) };
    g["stolo.ai.bt.Succeeder"] = lk;
    lk.__name__ = ["stolo", "ai", "bt", "Succeeder"];
    lk.__super__ = cd;
    lk.prototype = l(cd.prototype, {
        update: function(a) { a = this.child.tick(a); switch (a[1]) {
                case 3:
                    return S.Success } return a },
        __class__: lk
    });
    var mk = function(a) { this.status = S.Invalid;
        this._time = a };
    g["stolo.ai.bt.Wait"] = mk;
    mk.__name__ = ["stolo", "ai", "bt", "Wait"];
    mk.__super__ = xd;
    mk.prototype = l(xd.prototype, { initialize: function() { this._countTimer = this._time }, update: function(a) { this._countTimer -= a.behaviorTickRate; return 0 >= this._countTimer ? S.Success : S.Running }, __class__: mk });
    var nh = function(a) { this._ai = a;
        k.call(this) };
    g["stolo.ai.debug.DebugTargetAI"] = nh;
    nh.__name__ = ["stolo", "ai", "debug", "DebugTargetAI"];
    nh.__super__ = k;
    nh.prototype =
        l(k.prototype, {
            get_name: function() { return "DebugTargetAI_13" },
            onAdded: function() { k.prototype.onAdded.call(this);
                this._physics = this.owner._compMap.PhysicsComponent_42;
                this._transform = this.owner._compMap.TransformComponent_66;
                this.createDebugTarget(this.owner._compMap.TemplateComponent_47.key) },
            onUpdate: function(a) {
                k.prototype.onUpdate.call(this, a);
                if (null != this._debugTarget)
                    if (a = this._ai.currentTarget(), null != a) {
                        this._debugTarget.setXY(a.position.x, a.position.y);
                        if (null == this._debugLine) {
                            var b = (new A).add(new wb(nh.color,
                                100, 2));
                            this.owner.parent.addChild(b);
                            this._debugLine = u.instance(b._compMap.Sprite_19, wb)
                        }
                        a = G.gap(this._transform.position.x, this._transform.position.y, a.position.x, a.position.y);
                        this._debugLine.setXY(a.x, a.y);
                        this._debugLine.scaleX.set__(a.width / 100);
                        this._debugLine.rotation.set__(a.rotation);
                        this._debugLine.set_visible(!0)
                    } else this._debugTarget.setXY(-5E4, -5E4), null != this._debugLine && this._debugLine.set_visible(!1)
            },
            createDebugTarget: function(a) {
                a = this._ai.createTarget(a);
                null == this._debugTarget &&
                    (this._debugTarget = a);
                return a
            },
            __class__: nh
        });
    var F = function() {};
    g["stolo.animation.Animate"] = F;
    F.__name__ = ["stolo", "animation", "Animate"];
    F.delayCallTo = function(a, b, c) { if (0 >= b) return a(), null;
        null == c && (c = w.root); var d = c._compMap.Script_62;
        null == d && (d = new Bd, c.add(d));
        a = new Eb([new kc(b), new Db(a)]);
        d.run(a); return a };
    F.kill = function(a) { F.removeSequence(a) };
    F.killAll = function() { for (var a = F.tweens.iterator(); a.hasNext();) a.next().dispose();
        F.tweens = new $b };
    F.removeSequence = function(a) {
        if (null != F.tweens.h.__keys__[a.__id__]) {
            var b =
                F.tweens.h[a.__id__];
            F.tweens.remove(a);
            b.dispose()
        }
    };
    F.to = function(a, b, c, d) { if (null == a) return null;
        c = F.checkTweenParams(c, d);
        F.kill(a);
        d = new oh(a, c.entity, c.delay);
        d.to(b, c.time, c.ease, 0, c.origin);
        F.tweens.set(a, d);
        d.addListener(d.onStart, c.onStart);
        d.run(null, c.onComplete); return d };
    F.from = function(a, b, c, d) {
        if (null == a) return null;
        c = F.checkTweenParams(c, d);
        F.kill(a);
        d = new oh(a, c.entity, c.delay);
        d.from(b, c.time, c.ease, 0, c.origin);
        F.tweens.set(a, d);
        d.addListener(d.onStart, c.onStart);
        d.run(null, c.onComplete);
        return d
    };
    F.checkTweenParams = function(a, b) { 0 < a && (a = { time: a });
        null == a && (a = {});
        null == a.time && (a.time = F.DefaultTime);
        null != b && (a.ease = b);
        null == a.ease && (a.ease = F.DefaultEase); return a };
    F.runTemplate = function(a, b, c) {
        for (var d = null, e = 0; e < a.length;) {
            var f = a[e];
            ++e;
            if (null != f.then) { if (null == d) throw "'then' can be used only after 'to' or 'from' sequences";
                d.then(f.then, f.time, f.ease, f.delay, null != c ? c.origin : null) } else if (null != f.to || null != f.from)
                if (null != c ? (d = { time: f.time, ease: f.ease }, d.delay = c.delay, d.onStart =
                        c.onStart, d.onComplete = c.onComplete, d.origin = c.origin) : d = f, null != f.to) d = F.to(b, f.to, d);
                else if (null != f.from) d = F.from(b, f.from, d);
            else throw "Unsupported tween data:" + u.string(f);
            else null != f.delay && 0 < f.delay && d.addDelay(f.delay)
        }
        return d
    };
    var td = function() {};
    g["stolo.animation.Animations"] = td;
    td.__name__ = ["stolo", "animation", "Animations"];
    td.scaleIn = function(a, b, c) {
        null == b && (b = 1);
        if (null == a) throw "Target cannot be null";
        null == c && (c = {});
        0 <= c.time || (c.time = 0.4);
        null == c.ease && (c.ease = E.quintOut);
        a.setScale(0);
        return F.to(a, { scaleX: b, scaleY: b }, c)
    };
    td.scaleOut = function(a, b) { if (null == a) throw "Target cannot be null";
        null == b && (b = {});
        0 <= b.time || (b.time = 0.35);
        null == b.ease && (b.ease = E.quintIn); return F.to(a, { scaleX: 0, scaleY: 0 }, b) };
    td.shake = function(a, b, c, d, e) { null == d && (d = 2);
        null == c && (c = 2);
        null == b && (b = 2); var f = a.owner._compMap.Script_62;
        null == f && (f = new Bd);
        a.owner.add(f);
        a = new Eb([new si(c, d, b), new kc(b)]);
        null != e && a.add(new Db(e));
        f.run(a) };
    var fe = function(a, b, c) {
        null == c && (c = 0);
        null == b && (b = 0);
        null == a && (a = 0);
        this.x =
            new Ca(a);
        this.y = new Ca(b);
        this.z = new Ca(c)
    };
    g["stolo.animation.behaviors.AnimatedPoint"] = fe;
    fe.__name__ = ["stolo", "animation", "behaviors", "AnimatedPoint"];
    fe.__interfaces__ = [Zf];
    fe.prototype = {
        dispose: function() { this.z = this.y = this.x = null },
        setXY: function(a, b, c) { null == c && (c = !1);
            null == b && (b = 0);
            null == a && (a = 0);
            this.x.set__(a);
            this.y.set__(b);
            c && (this.x.set_behavior(null), this.y.set_behavior(null)) },
        update: function(a) { this.x.update(a);
            this.y.update(a);
            this.z.update(a); return 0 },
        isComplete: function() {
            return null !=
                this.x._behavior && !this.x._behavior.isComplete() || null != this.y._behavior && !this.y._behavior.isComplete() || null != this.z._behavior && !this.z._behavior.isComplete() ? !1 : !0
        },
        __class__: fe
    };
    var Cj = function(a, b, c) { null == c && (c = !1);
        this._showIn = this._hideIn = 0;
        this.isVisible = this.isShowing = this.isHiding = !1;
        this.onHide = new ia;
        this.onShow = new ia;
        k.call(this);
        this.isVisible = c;
        this.showAnimation = a;
        this.hideAnimation = b };
    g["stolo.animation.components.AnimatedComponent"] = Cj;
    Cj.__name__ = ["stolo", "animation", "components",
        "AnimatedComponent"
    ];
    Cj.__super__ = k;
    Cj.prototype = l(k.prototype, {
        get_name: function() { return "AnimatedComponent_20" },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a);
            0 < this._showIn ? (this._showIn -= a, 0 > this._showIn && this.show(this._showSequence)) : 0 < this._hideIn && (this._hideIn -= a, 0 > this._hideIn && this.hide(this._hideSequence)) },
        onAdded: function() { k.prototype.onAdded.call(this) },
        dispose: function() { k.prototype.dispose.call(this);
            this.cancelSequence() },
        show: function(a, b) {
            null == b && (b = 0);
            0 < b ? (this._hideIn =
                0, this._showIn = b, this._showSequence = a) : !this.isVisible && !this.isShowing && (this.isShowing = this.isVisible = !0, this.isHiding = !1, this._showIn = this._hideIn = 0, null == a && null != this.showAnimation && (a = this.showAnimation()), this.startShow(a))
        },
        startShow: function(a) { this.cancelSequence();
            this.currentSequence = a;
            this.onShow.emit();
            null != a ? a.run(this.owner, n(this, this.showComplete)) : this.showComplete() },
        showComplete: function() { this.isShowing = !1 },
        hide: function(a, b) {
            null == b && (b = 0);
            0 < b ? (this._showIn = 0, this._hideIn =
                b, this._hideSequence = a) : this.isVisible && !this.isHiding && (this.isVisible = !1, this.isHiding = !0, this.isShowing = !1, this._showIn = this._hideIn = 0, null == a && null != this.hideAnimation && (a = this.hideAnimation()), this.startHide(a))
        },
        startHide: function(a) { this.cancelSequence();
            this.currentSequence = a;
            this.onHide.emit();
            null != a ? a.run(this.owner, n(this, this.hideComplete)) : this.hideComplete() },
        hideComplete: function() { this.isHiding = !1 },
        cancelSequence: function() {
            null != this.currentSequence && (this.currentSequence.cancel(),
                this.currentSequence = null)
        },
        __class__: Cj
    });
    var Zb = function(a, b) { null == b && (b = 0);
        this.currentIndex = 0;
        this._disposables = new Ta;
        this.onComplete = new ia;
        this.onStart = new ia;
        this.isRunning = this.isPaused = !1;
        Eb.call(this);
        null != a && (this._entity = a);
        this.setDelay(b);
        this.add(new Db((xi = this.onStart, n(xi, xi.emit)))) };
    g["stolo.animation.sequences.AnimationSequence"] = Zb;
    Zb.__name__ = ["stolo", "animation", "sequences", "AnimationSequence"];
    Zb.__super__ = Eb;
    Zb.prototype = l(Eb.prototype, {
        dispose: function() {
            this._ownScript &&
                null != this._script && (null != this._script.owner && this._script.owner.dispose(), this._script.stopAll(), this._script.dispose());
            this.onComplete = this.onStart = this._entity = this._script = null;
            this.isRunning = !1;
            this.removeAll();
            null != this._disposables && this._disposables.dispose();
            this._disposables = null
        },
        cancel: function() { this.complete() },
        update: function(a, b) { if (this.isPaused) return -1; var c = Eb.prototype.update.call(this, a, b);
            this.currentIndex = this._idx; return c },
        addActions: function(a) {
            if (null == a) return null;
            for (var b = 0; b < a.length;) { var c = a[b];++b;
                this.add(c) }
            return this
        },
        add: function(a) { if (this.isRunning) { var b = this._runningActions.pop();
                Eb.prototype.add.call(this, a);
                Eb.prototype.add.call(this, b) } else Eb.prototype.add.call(this, a) },
        setDelay: function(a) { return this.addDelay(a) },
        addDelay: function(a) { null == a && (a = 0); if (0 >= a) return this;
            this.add(new kc(a)); return this },
        run: function(a, b) {
            null != a && (this._entity = a);
            this.currentIndex = this._idx = 0;
            this._ownScript = !0;
            this._script = new Bd;
            this._entity.addChild((new A).add(this._script));
            this.add(new Db(n(this, this.complete)));
            null != b && this.addListener(this.onComplete, b);
            this.isRunning = !0;
            this._script.run(this);
            return this
        },
        addListener: function(a, b) { null != b && this._disposables.add(a.connect(b)) },
        complete: function() { this.isRunning = !1;
            this._ownScript && null != this._script && this._script.stopAll();
            null != this.onComplete && this.onComplete.emit();
            this.dispose() },
        __class__: Zb
    });
    var Gb = function(a, b) { null == b && (b = 0);
        Zb.call(this, a, b) };
    g["stolo.animation.sequences.RelativeSequence"] = Gb;
    Gb.__name__ = ["stolo", "animation", "sequences", "RelativeSequence"];
    Gb.__super__ = Zb;
    Gb.prototype = l(Zb.prototype, {
        init: function(a, b, c, d, e) { null == e && (e = 0);
            null == d && (d = !1);
            null == c && (c = !0);
            Gb.lastDest = null;
            this.appendActions(a, b);
            d && (a = a.reverse(), a.shift(), this.appendActions(a, b), this.appendActions([{ x: 0, y: 0 }], b));
            (c || d) && this.appendActions([{ x: 0, y: 0 }], b);
            0 < e && this.add(new kc(e)); return this },
        appendActions: function(a, b) {
            for (var c = 0; c < a.length;) {
                var d = a[c];
                ++c;
                Object.prototype.hasOwnProperty.call(d, "delay") && this.add(new kc(d.delay));
                var e = Object.prototype.hasOwnProperty.call(d, "x"),
                    f = Object.prototype.hasOwnProperty.call(d, "y");
                e && f && (e = new ob(d.x + b.offsetX, d.y + b.offsetY), this.add(this.getMovementAction(d, b.x, b.y, e, Gb.lastDest, b)), Gb.lastDest = e)
            }
            return this
        },
        getMovementAction: function(a, b, c, d, e, f) {
            var j = Gb.DefaultMoveSpeed,
                h = Gb.DefaultMovePPS,
                g = Gb.DefaultMoveEase,
                i = Gb.DefaultMoveTime,
                k = !1;
            0 < a.time ? i = a.time : k = !0;
            0 < a.pps && (h = a.pps);
            0 < a.speed && (j = a.speed);
            k && (a = null != e ? Math.abs(e.x - d.x) + Math.abs(e.y - d.y) : Math.abs(b._value - d.x) + Math.abs(c._value -
                d.y), i = a / h - 0.1 * (a / h) * j, 0 >= i && (i = Gb.DefaultMoveTime));
            null != f && null != f.ease && (g = f.ease);
            return new dg([new De(b, d.x, i, g), new De(c, d.y, i, g)])
        },
        __class__: Gb
    });
    var Of = function(a) { Zb.call(this, a) };
    g["stolo.animation.sequences.ShakeSequence"] = Of;
    Of.__name__ = ["stolo", "animation", "sequences", "ShakeSequence"];
    Of.shake = function(a, b, c, d, e) { null == d && (d = 60);
        null == c && (c = 1);
        a = new Of(a);
        a.sineShake(b, c, d, e); return a };
    Of.__super__ = Zb;
    Of.prototype = l(Zb.prototype, {
        sineShake: function(a, b, c, d) {
            null == c && (c = 60);
            null == b &&
                (b = 1);
            if (null == a) throw "No shakeProp set!";
            c = new db(0.5 * -c, 0.5 * c, 0.05);
            c.speed.animateTo(0.3 * b, 0.75 * b, E.sineInOut);
            a.set_behavior(c);
            this.add(new kc(0.75 * b));
            this.add(new De(a, 0, 0.25 * b, E.sineInOut));
            this.run(null, d)
        },
        __class__: Of
    });
    var oh = function(a, b, c) { null == c && (c = 0);
        this._target = a;
        this._entity = b;
        null == b && (b = a.owner);
        null == b && (b = w.root);
        Zb.call(this, b, c) };
    g["stolo.animation.sequences.TweenSequence"] = oh;
    oh.__name__ = ["stolo", "animation", "sequences", "TweenSequence"];
    oh.__super__ = Zb;
    oh.prototype = l(Zb.prototype, {
        dispose: function() { Zb.prototype.dispose.call(this);
            null != this._target && (null != F.tweens.h.__keys__[this._target.__id__] && F.tweens.remove(this._target), this._target = null) },
        to: function(a, b, c, d, e) { null == d && (d = 0);
            null == c && (c = F.DefaultEase); if (0 > b || null == b) b = F.DefaultTime;
            this.addDelay(d);
            this.add(this.getActions(a, b, c, !1, e)); return this },
        from: function(a, b, c, d, e) { null == d && (d = 0);
            null == c && (c = F.DefaultEase); if (0 > b || null == b) b = F.DefaultTime;
            this.addDelay(d);
            this.add(this.getActions(a, b, c, !0, e)); return this },
        then: function(a, b, c, d, e) { null == d && (d = 0);
            null == c && (c = F.DefaultEase); if (0 > b || null == b) b = F.DefaultTime;
            this.addDelay(d);
            this.add(this.getActions(a, b, c, !1, e)); return this },
        getActions: function(a, b, c, d, e) {
            null == d && (d = !1);
            for (var f = [], j, h, g = 0, i = y.fields(a); g < i.length;) {
                var k = i[g];
                ++g;
                j = y.field(this._target, k);
                if (null == j) throw "Cannot find property '" + k + "' to animate";
                var l = y.field(a, k);
                h = j._value;
                null != e && Object.prototype.hasOwnProperty.call(e, k) && (h = y.field(e, k));
                "string" == typeof l && (l = H.mod(h, l));
                d && (j.set__(l),
                    l = h);
                f.push(new De(j, l, b, c))
            }
            return new dg(f)
        },
        __class__: oh
    });
    var Hm = function(a) { this.parts = [];
        this.type = "default";
        this.code = "0";
        this.id = "unknown";
        H.configure(this, a);
        this.id = this.id.toLowerCase();
        this.parts = []; for (var b = 0, a = U.__cast(a.parts, Array); b < a.length;) { var c = a[b];++b; if (!("leg_knee_b_item" == c.attachment || "leg_knee_f_item" == c.attachment)) { var d = new Gm;
                d.attachment = c.attachment;
                d.url = c.url;
                d.offset = c.offset;
                this.parts.push(d) } } };
    g["stolo.customization.CustomizationItem"] = Hm;
    Hm.__name__ = ["stolo",
        "customization", "CustomizationItem"
    ];
    Hm.prototype = { __class__: Hm };
    var Gm = function() {};
    g["stolo.customization.CustomizationItemPart"] = Gm;
    Gm.__name__ = ["stolo", "customization", "CustomizationItemPart"];
    Gm.prototype = { __class__: Gm };
    var $ = function() {};
    g["stolo.customization.CustomizationManager"] = $;
    $.__name__ = ["stolo", "customization", "CustomizationManager"];
    $.init = function() { $.load() };
    $.getByType = function(a) { return $._byType.get(a) };
    $.getById = function(a) { return $._byId.get(a) };
    $.getByCode = function(a, b) { return $._byCode.get(a).get(b) };
    $.load = function() { for (var a = D.getPack($.packName).get_manifest().iterator(); a.hasNext();)
            for (var b = a.next(), b = D.getJSON(b.name, $.packName), c = 0; c < b.length;) { var d = b[c];++c;
                $.create(d) } D.disposePack($.packName) };
    $.create = function(a) { var b = new Hm(a); if (null == b.id) throw "CustomizationItem with no id" + u.string(a);
        $.register(b) };
    $.register = function(a) {
        $._all.push(a);
        $._byId.set(a.id, a);
        var b = $._byType.get(a.type);
        null == b && (b = [], $._byType.set(a.type, b));
        b.push(a);
        b = $._byCode.get(a.type);
        null == b && (b = new K,
            $._byCode.set(a.type, b));
        b.set(a.code, a)
    };
    $.getAssetPack = function(a, b) { var c = $.getAssetPackData(a);
        0 == c.files.length ? b(a, null) : D.createDynamicPack(c.name, c.files, function(c) { b(a, c) }, !0) };
    $.getAssetPackData = function(a) { for (var b = [], c = 0, d = a.parts; c < d.length;) { var e = d[c];++c;
            null != e.url && b.push(e.url) } return { name: $.getItemAssetPackName(a), files: b, useFileAsEntryName: !0 } };
    $.getItemAssetPackName = function(a) { return "customizationItem_" + a.id };
    $.saveInventory = function(a, b) {
        return null == a || "" == a ? !1 : na.set($.savePrefix +
            a, b)
    };
    $.loadInventory = function(a) { return na.get($.savePrefix + a, null) };
    var yd = function() { this._isDirty = !1;
        this._children = [];
        this.depthSorter = new jg;
        s.call(this) };
    g["stolo.display.Container"] = yd;
    yd.__name__ = ["stolo", "display", "Container"];
    yd.__super__ = s;
    yd.prototype = l(s.prototype, {
        onStop: function() { s.prototype.onStop.call(this);
            this._children = null },
        onUpdate: function() { this._isDirty && this.sortDepth() },
        addChild: function(a) { this._children.push(a);
            this.owner.addChild(a); return a },
        removeChild: function(a) {
            N.remove(this._children,
                a);
            this.owner.removeChild(a);
            return a
        },
        setChildIndex: function(a, b) { return 0 <= b && b <= this._children.length && a.parent == this.owner ? (N.remove(this._children, a), this._children.splice(b, 0, a), this._isDirty = !0, a) : null },
        getChildren: function() { return this._children },
        getChildIndex: function(a) { for (var b = 0, c = this._children.length; b < c;) { var d = b++; if (this._children[d] == a) return d } return -1 },
        sortDepth: function() { this.depthSorter.reorder(this._children, this.owner);
            this._isDirty = !1 },
        bringToFront: function(a) {
            this.owner.addChild(a);
            N.remove(this._children, a);
            this._children.push(a)
        },
        sendToBack: function(a) { this.owner.addChild(a, !1);
            N.remove(this._children, a);
            this._children.unshift(a) },
        sortDepthByY: function() { this.depthSorter.sortByY(this._children);
            this._isDirty = !0 },
        __class__: yd
    });
    var nk = function() { this.skewX = this.skewY = 0;
        k.call(this) };
    g["stolo.display.Skew"] = nk;
    nk.__name__ = ["stolo", "display", "Skew"];
    nk.__super__ = k;
    nk.prototype = l(k.prototype, {
        get_name: function() { return "Skew_74" },
        dispose: function() {
            k.prototype.dispose.call(this);
            this._sprite = null
        },
        onStart: function() { k.prototype.onStart.call(this);
            this._sprite = this.owner._compMap.Sprite_19 },
        onUpdate: function(a) {
            k.prototype.onUpdate.call(this, a);
            if (null != this._sprite) {
                var a = this._sprite.getLocalMatrix(),
                    b = 0,
                    c = 1,
                    d = 0,
                    e = 1,
                    f = -3.141592653589793 * this.skewX / 180,
                    j = 3.141592653589793 * this.skewY / 180;
                0 != f && (b = Math.sin(f), c = Math.cos(f));
                0 != j && (d = Math.sin(j), e = Math.cos(j));
                a.set(e * this._sprite.scaleX._value, d * this._sprite.scaleX._value, -b * this._sprite.scaleY._value, c * this._sprite.scaleY._value,
                    a.m02, a.m12)
            }
        },
        __class__: nk
    });
    var L = function() {};
    g["stolo.ensys.actor.ActorFactory"] = L;
    L.__name__ = ["stolo", "ensys", "actor", "ActorFactory"];
    L.reset = function() { for (var a = L._registeredComponents.keys(); a.hasNext();) { var b = a.next();
            L._registeredComponents.remove(b) } for (a = L._componentMap.keys(); a.hasNext();) b = a.next(), L._componentMap.remove(b); for (a = L._templateMap.keys(); a.hasNext();) b = a.next(), L._templateMap.remove(b) };
    L.create = function(a) {
        var b = new A,
            c = L.getTemplate(L.getTemplateName(a, !0));
        if (null !=
            c && (c.template.onlyHighEnd && o.slow || c.template.onlySlowEnd && !o.slow)) return null;
        a = H.merge(c, a, !0);
        if (null == a) return null;
        L.onActorData.emit(a);
        return L.compose(b, a)
    };
    L.fromTemplate = function(a) { var b = L.getTemplate(a); if (null == b) throw "Template not found: '" + a + "'";
        a = new A; return L.compose(a, b) };
    L.compose = function(a, b) {
        for (var c = 0, d = y.fields(b); c < d.length;) {
            var e = d[c];
            ++c;
            var f = y.field(b, e);
            if (!(null == f || !1 == f) && null == f.debug) {
                f = L.createComponent(e, f);
                if (null == f) throw "ActorFactory: Unknown component '" +
                    e + "'";
                a.add(f)
            }
        }
        null == a._compMap.TransformComponent_66 && a.add(new Oe);
        return a
    };
    L.registerComponent = function(a, b) { L._registeredComponents.set(a, b); var c = Y.getClassName(b);
        L._componentMap.set(c, a) };
    L.getComponentName = function(a) { a = Y.getClassName(Y.getClass(a)); return L._componentMap.get(a) };
    L.getComponentsIds = function() { for (var a = [], b = L._registeredComponents.iterator(); b.hasNext();) { var c = b.next();
            a.push(Y.getClassName(c)) } return a };
    L.getTemplateIds = function() {
        for (var a = [], b = L._templateMap.iterator(); b.hasNext();) {
            var c =
                b.next();
            a.push(c.template.key)
        }
        return a
    };
    L.getTemplate = function(a, b) { null == b && (b = !0);
        L._lastTempalte = a; var c = L._templateMap.get(a); if (b && null != c && Object.prototype.hasOwnProperty.call(c.template, "parent")) { var d;
            d = L._templateMap.get(c.template.parent); if (null == d) throw "parent template not found: '" + u.string(c.template.parent) + "' for template '" + a + "'";
            c = H.merge(d, c, !0) } return c };
    L.addTemplate = function(a) { var b = L.getTemplateName(a);
        null != b && (L._templateMap.exists(b) ? null : L._templateMap.set(b, a), L.onTemplateAdded.emit(a)) };
    L.getTemplateName = function(a, b) { null == b && (b = !1); var c = y.getProperty(a, "template"); if (null != c && null != c.key) { c = c.key; if (b && !L._templateMap.exists(c)) throw "ActorFactory: Unknown template '" + c + "'"; return c } return null };
    L.createComponent = function(a, b) { var c; if ("string" == typeof a) { if (c = L._registeredComponents.get(a), null == c) return null } else c = a; return L.initComponent(Y.createInstance(c, []), b) };
    L.initComponent = function(a, b) {
        var c = L.getComponentDefaults(a);
        null != c && (b = null != b ? H.merge(c, b, !0) : c);
        L.applyProps(a,
            b);
        return a
    };
    L.applyProps = function(a, b) { for (var c = 0, d = y.fields(b); c < d.length;) { var e = d[c];++c; var f = y.field(b, e);
            y.setProperty(a, e, f) } return a };
    L.getComponentDefaults = function(a) { return y.getProperty(Y.getClass(a), "DEFAULTS") };
    var Ob = function() { this.onAnimStart = new ia;
        this.onCreate = new ia;
        this.fps = -1;
        this.loop = !0;
        this.delay = 0;
        this.autoRemove = !1;
        R.call(this) };
    g["stolo.ensys.components.AnimationComponent"] = Ob;
    Ob.__name__ = ["stolo", "ensys", "components", "AnimationComponent"];
    Ob.__super__ = R;
    Ob.prototype =
        l(R.prototype, {
            onAdded: function() { this.createAnim();
                R.prototype.onAdded.call(this) },
            onUpdate: function(a) { R.prototype.onUpdate.call(this, a);
                0 < this._timeout && (this._timeout -= a, 0 > this._timeout && this._timeoutCallback()) },
            createAnim: function() { this.animation = new Xb(this.asset, this.pack, null, !1, this.overrides);
                this.owner.addChild((new A).add(this.animation));
                this.onCreate.emit() },
            initStart: function() {
                this.animation.setAnchor(0, 0);
                0 < this.fps && (this.animation.get_spritesheet().fps = this.fps);
                if (this.autoRemove) this.animation.animComplete.connect(n(this,
                    this.onAutoRemove)).once();
                0 < this.delay ? (this.setTimeout(n(this, this.startAnim), this.delay), this.animation.set_visible(!1)) : this.startAnim();
                this.initEnd()
            },
            startAnim: function() { null == this.start && (this.start = this.animation.get_spritesheet().defaultAnim); var a = this.start; - 1 != this.start.indexOf(",") && (a = this.start.split(","));
                this.animation.set_visible(!0);
                a = this.animation.gotoAndPlay(a);!this.loop && null != a && (a.loop = !1);
                this.onAnimStart.emit() },
            onAutoRemove: function() {
                !X.inEditor() && this.autoRemove &&
                    (X.getSystemEntity(this.owner), X.getSystemEntity(this.owner).getComponent("ActorSystem_48").removeActor(this.owner))
            },
            enableCulling: function(a) { R.prototype.enableCulling.call(this, a);
                this.animation.set_isPlaying(!a) },
            hasAnimation: function(a, b) { null == b && (b = !0); if (null == this.animation) return !1;
                b && null != this.suffix && (a += this.suffix); return this.animation.hasAnim(a) },
            getNaturalWidth: function() { return null != this.animation ? this.animation.getNaturalWidth() : 100 },
            getNaturalHeight: function() {
                return null != this.animation ?
                    this.animation.getNaturalHeight() : 100
            },
            set_pointerEnabled: function(a) { null != this.animation && this.animation.set_pointerEnabled(a); return R.prototype.set_pointerEnabled.call(this, a) },
            setTimeout: function(a, b) { this._timeout = b;
                this._timeoutCallback = a },
            __class__: Ob
        });
    var ok = function() { this.target = "ANY_BODY";
        this.enabled = !0;
        k.call(this) };
    g["stolo.ensys.components.BouncerComponent"] = ok;
    ok.__name__ = ["stolo", "ensys", "components", "BouncerComponent"];
    ok.__super__ = k;
    ok.prototype = l(k.prototype, {
        get_name: function() { return "BouncerComponent_94" },
        onStart: function() { k.prototype.onStart.call(this);
            X.getSystemEntity(this.owner);
            this._physicsSystem = X.getSystemEntity(this.owner).getComponent("PhysicSystem_44");
            null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.addContactType("BOUNCER");
            this._physicsSystem.addContactListener(ma.BEGIN, Aa.ANY, this.target, "BOUNCER", this.owner, n(this, this.onContactBegin)) },
        onStop: function() {
            this._physicsSystem.removeContactListener(ma.BEGIN, Aa.ANY, this.target, "BOUNCER", this.owner);
            this._physicsSystem = null;
            k.prototype.onStop.call(this)
        },
        onContactBegin: function(a, b) {
            if (this.enabled && null != b) {
                var c = a._compMap.PhysicsComponent_42;
                if (null != c) {
                    var d = c.getVelocity();
                    if (0 < this.impulse) { var e = -Math.cos(b.angle) * this.impulse,
                            e = Math.round(100 * e) / 100,
                            f = -Math.sin(b.angle) * this.impulse,
                            f = Math.round(100 * f) / 100;
                        c.setVelocity(function() { d.zpp_inner.validate(); return d.zpp_inner.x }(this) + e, function() { d.zpp_inner.validate(); return d.zpp_inner.y }(this) + f) } else 0 < this.ratio && c.setVelocity(function() {
                        d.zpp_inner.validate();
                        return d.zpp_inner.x
                    }(this) * this.ratio, function() { d.zpp_inner.validate(); return d.zpp_inner.y }(this) * this.ratio)
                }
            }
        },
        __class__: ok
    });
    var pk = function() { this.offsetDirectionX = this.offsetDirectionY = 1;
        this.offsetX = this.offsetY = 0;
        this.active = !1;
        k.call(this) };
    g["stolo.ensys.components.CameraTargetComponent"] = pk;
    pk.__name__ = ["stolo", "ensys", "components", "CameraTargetComponent"];
    pk.__super__ = k;
    pk.prototype = l(k.prototype, {
        get_name: function() { return "CameraTargetComponent_38" },
        dispose: function() {
            k.prototype.dispose.call(this);
            null != this._cameraSystem && (this._cameraSystem.removeTarget(this), this._cameraSystem = null);
            this._returnParams = this._returnTarget = null
        },
        onActorAdded: function() { X.getSystemEntity(this.owner);
            this._cameraSystem = X.getSystemEntity(this.owner).getComponent("CameraSystem_26");
            null != this._cameraSystem && (this._cameraSystem.addTarget(this), this.active && this._cameraSystem.setTarget(this)) },
        setOffsetDirectionX: function(a, b, c) {
            this._cameraSystem.get_target() != this || a == this.offsetDirectionX || (this.offsetDirectionX =
                a, this._cameraSystem.offsetTargetDirectionX(this, a, b, c))
        },
        __class__: pk
    });
    var qk = function() { this.directionEaseX = E.quadInOut;
        this.directionTimeX = 1.5;
        this.directionSwapX = !0;
        k.call(this) };
    g["stolo.ensys.components.CameraTargetDirection"] = qk;
    qk.__name__ = ["stolo", "ensys", "components", "CameraTargetDirection"];
    qk.__super__ = k;
    qk.prototype = l(k.prototype, {
        get_name: function() { return "CameraTargetDirection_77" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._target = this.owner._compMap.CameraTargetComponent_38;
            this._transform = this.owner._compMap.TransformComponent_66
        },
        onStop: function() { k.prototype.onStop.call(this);
            this._transform = this._target = null },
        onUpdate: function() { this.directionSwapX && this.setCameraDirectionX(this._transform.direction) },
        setCameraDirectionX: function(a) { this._target.setOffsetDirectionX(a, this.directionTimeX, this.directionEaseX) },
        __class__: qk
    });
    var rk = function() { this.enabled = !0;
        k.call(this) };
    g["stolo.ensys.components.CheckpointComponent"] = rk;
    rk.__name__ = ["stolo", "ensys", "components",
        "CheckpointComponent"
    ];
    rk.__super__ = k;
    rk.prototype = l(k.prototype, { get_name: function() { return "CheckpointComponent_90" }, onStart: function() { null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.addContactType("CHECKPOINT") }, __class__: rk });
    var sk = function() { this._respawnPosition = new ob;
        k.call(this) };
    g["stolo.ensys.components.CheckpointerComponent"] = sk;
    sk.__name__ = ["stolo", "ensys", "components", "CheckpointerComponent"];
    sk.__super__ = k;
    sk.prototype = l(k.prototype, {
        get_name: function() { return "CheckpointerComponent_91" },
        dispose: function() { k.prototype.dispose.call(this);
            this._physicsSystem = this._physics = this._transform = null;
            this.clear();
            this._respawnPosition = null },
        onStart: function() {
            this._transform = this.owner._compMap.TransformComponent_66;
            this._physics = this.owner._compMap.PhysicsComponent_42;
            null != this._physics && this._physics.addContactType("CHECKPOINTER");
            null == this.position && (this.position = { x: this._transform.position.x, y: this._transform.position.y });
            X.getSystemEntity(this.owner);
            this._physicsSystem = X.getSystemEntity(this.owner).getComponent("PhysicSystem_44");
            this._physicsSystem.addContactListener(ma.BEGIN, Aa.SENSOR, "CHECKPOINT", "CHECKPOINTER", this.owner, n(this, this.onContactBegin))
        },
        onStop: function() { this._physicsSystem.removeContactListener(ma.BEGIN, Aa.SENSOR, "CHECKPOINT", "CHECKPOINTER", this.owner);
            k.prototype.onStop.call(this) },
        onContactBegin: function(a) { this.lastCheckPoint = a._compMap.CheckpointComponent_90 },
        clear: function() { this.lastCheckPoint = null },
        __class__: sk
    });
    var ph = function() {
        this.onDamage = new I;
        this._ignoreList = new $b;
        this._actorsToDamage = [];
        this.currentCooldown = -100;
        k.call(this)
    };
    g["stolo.ensys.components.DamageComponent"] = ph;
    ph.__name__ = ["stolo", "ensys", "components", "DamageComponent"];
    ph.__super__ = k;
    ph.prototype = l(k.prototype, {
        get_name: function() { return "DamageComponent_86" },
        onStart: function() {
            null == this.damager && (this.damager = this.owner);
            this._physicsSystem = X.getSystemEntity(this.owner)._compMap.PhysicSystem_44;
            null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.addContactType("DAMAGER");
            this._physicsSystem.addContactListener(ma.PRELISTENER,
                Aa.ANY, this.target, "DAMAGER", this.owner, n(this, this.onPreContact));
            this._physicsSystem.addContactListener(ma.BEGIN, Aa.ANY, this.target, "DAMAGER", this.owner, n(this, this.onContactBegin));
            this._physicsSystem.addContactListener(ma.END, Aa.ANY, this.target, "DAMAGER", this.owner, n(this, this.onContactEnd));
            k.prototype.onStart.call(this)
        },
        onStop: function() {
            this._physicsSystem.removeContactListener(ma.PRELISTENER, Aa.ANY, this.target, "DAMAGER", this.owner);
            this._physicsSystem.removeContactListener(ma.BEGIN, Aa.ANY,
                this.target, "DAMAGER", this.owner);
            this._physicsSystem.removeContactListener(ma.END, Aa.ANY, this.target, "DAMAGER", this.owner);
            this._actorsToDamage = this._ignoreList = this._physicsSystem = null;
            k.prototype.onStop.call(this)
        },
        onUpdate: function(a) { this.currentCooldown -= a; if (!(0 < this.currentCooldown || 0 == this._actorsToDamage.length || !this.enabled || 0 == this.charge)) { for (var a = 0, b = this._actorsToDamage; a < b.length;) { var c = b[a];++a;
                    this.damageActor(c) } this.charge--;
                this.currentCooldown = this.cooldown } },
        damageActor: function(a) {
            if (!this._ignoreList.h[a.__id__]) {
                var b =
                    a._compMap.HealthComponent_87,
                    c = !1;
                null != b && (c = b.damage(this.value, this.damager, this.knockBackX, this.knockBackY)) && this.onDamage.emit(a)
            }
        },
        onPreContact: function() { return !0 },
        onContactBegin: function(a) { this._actorsToDamage.push(a) },
        onContactEnd: function(a) { N.remove(this._actorsToDamage, a) },
        __class__: ph
    });
    var Pe = function(a, b, c, d, e) {
        null == e && (e = 0.3);
        null == d && (d = 16727552);
        null == b && (b = 100);
        null == a && (a = 100);
        this.font = Pe.DefaultFont;
        this.debugOnly = !0;
        k.call(this);
        this.shape = Pe.getShape(a, b, d, e);
        this.text =
            c
    };
    g["stolo.ensys.components.DebugComponent"] = Pe;
    Pe.__name__ = ["stolo", "ensys", "components", "DebugComponent"];
    Pe.getShape = function(a, b, c, d) { null == d && (d = 0.3);
        null == c && (c = 16727552);
        null == b && (b = 100);
        null == a && (a = 100); return { alpha: d, color: c, width: a, height: b } };
    Pe.__super__ = k;
    Pe.prototype = l(k.prototype, {
        get_name: function() { return "DebugComponent_65" },
        onAdded: function() { this.debugOnly && this.owner.remove(this) },
        onStart: function() {
            this.debugOnly || (null == this.owner._compMap.Sprite_19 && this.owner.add(new R), null !=
                this.shape && 0 < this.shape.width && 0 < this.shape.height && (0 >= this.shape.color && (this.shape.color = 0), 0 >= this.shape.alpha && (this.shape.alpha = 0.3), this.setShape(this.shape)), null != this.text && "" != this.text && (this.textSprite = M.getTextSprite(this.font), this.textSprite.set_text(this.text), this.owner.addChild((new A).add(this.textSprite)), this.centerText && this.textSprite.centerAnchor()), k.prototype.onStart.call(this))
        },
        setShape: function(a) {
            null != this.bg && this.bg.owner.dispose();
            this.bg = new wb(a.color, a.width,
                a.height);
            this.bg.alpha.set__(a.alpha);
            this.owner.addChild((new A).add(this.bg));
            this.center && this.bg.centerAnchor();
            return this.bg
        },
        __class__: Pe
    });
    var qh = function() { this.disposer = new Ta;
        this.onlyHighEnd = this.onlyLowEnd = !1;
        this.uuid = "";
        this.spawner = 0;
        this.tags = [];
        this.comment = "";
        this.key = "no_name";
        k.call(this) };
    g["stolo.ensys.components.TemplateComponent"] = qh;
    qh.__name__ = ["stolo", "ensys", "components", "TemplateComponent"];
    qh.__super__ = k;
    qh.prototype = l(k.prototype, {
        get_name: function() { return "TemplateComponent_47" },
        onAdded: function() { k.prototype.onAdded.call(this);
            this.owner.add(this.disposer) },
        dispose: function() { k.prototype.dispose.call(this);
            this.tags = this.disposer = null },
        __class__: qh
    });
    var Oe = function() { this.fixed = this.fixedRotation = !0;
        this.direction = 1;
        this.rotation = 0;
        k.call(this) };
    g["stolo.ensys.components.TransformComponent"] = Oe;
    Oe.__name__ = ["stolo", "ensys", "components", "TransformComponent"];
    Oe.__super__ = k;
    Oe.prototype = l(k.prototype, {
        get_name: function() { return "TransformComponent_66" },
        onAdded: function() {
            k.prototype.onAdded.call(this);
            null == this.position && (this.position = { x: 0, y: 0 })
        },
        setXY: function(a, b) { this.position.x = a;
            this.position.y = b },
        flip: function() { this.direction *= -1; var a = this.owner._compMap.Sprite_19;
            null != a && (a.forceUpdate = !0) },
        distanceTo: function(a) { return Math.sqrt(this.distanceToSquared(a)) },
        distanceToSquared: function(a) { var b = this.position.x - a.position.x,
                a = this.position.y - a.position.y; return b * b + a * a },
        __class__: Oe
    });
    var tk = function() { this.y = new Ca(0);
        this.x = new Ca(0);
        k.call(this) };
    g["stolo.ensys.components.MoveTransformComponent"] =
        tk;
    tk.__name__ = ["stolo", "ensys", "components", "MoveTransformComponent"];
    tk.__super__ = k;
    tk.prototype = l(k.prototype, {
        get_name: function() { return "MoveTransformComponent_75" },
        dispose: function() { k.prototype.dispose.call(this);
            this.y = this.x = this._callback = this._transform = null },
        onActorAdded: function() { this._transform = this.owner._compMap.TransformComponent_66; if (null == this._transform) throw "This component depends on a transform component";
            this.x.set__(this._transform.position.x);
            this.y.set__(this._transform.position.y) },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a);
            this.isComplete() || (this.x.update(a), this.y.update(a), this._transform.setXY(this.x._value, this.y._value), this.isComplete() && this.complete()) },
        complete: function() { if (null != this._callback) { var a = this._callback;
                this._callback = null;
                a(this.owner) } },
        isComplete: function() { return null != this.x._behavior && !this.x._behavior.isComplete() || null != this.y._behavior && !this.y._behavior.isComplete() ? !1 : !0 },
        __class__: tk
    });
    var In = function() {};
    g["stolo.ensys.components.IActivable"] =
        In;
    In.__name__ = ["stolo", "ensys", "components", "IActivable"];
    var rh = function() { this.speed = 1;
        this.isToggle = this.repeat = !1;
        this.isActive = !0;
        k.call(this) };
    g["stolo.ensys.components.MoveSequenceComponent"] = rh;
    rh.__name__ = ["stolo", "ensys", "components", "MoveSequenceComponent"];
    rh.__interfaces__ = [In];
    rh.__super__ = k;
    rh.prototype = l(k.prototype, {
        get_name: function() { return "MoveSequenceComponent_76" },
        dispose: function() {
            k.prototype.dispose.call(this);
            null != this._sequence && this._sequence.dispose();
            this.initPosition =
                this.position = this._sequence = this._script = this._physics = this._transform = null
        },
        onStart: function() { this._transform = this.owner._compMap.TransformComponent_66;
            this._transform.fixed = !1;
            this.initPosition = new ob(this._transform.position.x, this._transform.position.y);
            this._physics = this.owner._compMap.PhysicsComponent_42;
            null != this._physics && this._physics.setKinematic(!0);!X.inEditor(this.owner) && this.isActive && (this.isActive = !1, this.activate()) },
        onUpdate: function(a) {
            null != this.position && (this.position.update(a),
                this._transform.setXY(this.position.x._value, this.position.y._value))
        },
        startSequence: function() {
            if (!(null == this.sequence || null != this._sequence)) {
                var a = this.sequence.actions;
                this.position = new fe(this.initPosition.x, this.initPosition.y);
                var b = { x: this.position.x, y: this.position.y, offsetX: this.initPosition.x, offsetY: this.initPosition.y };
                null == this.sequence.loop && (this.sequence.loop = !0);
                this.repeat = this.sequence.yoyo || this.sequence.loop;
                this._sequence = new Gb;
                this._sequence.init(a, b, this.sequence.loop,
                    this.sequence.yoyo, this.sequence.delay);
                this._sequence.add(new Db(n(this, this.onSequenceComplete)));
                this._script = new Bd;
                this.owner.add(this._script);
                this._script.run(this._sequence)
            }
        },
        onSequenceComplete: function() { this.repeat && this._script.run(this._sequence) },
        activate: function() { this.isActive || (this.isActive = !0, null != this.sequence && this.startSequence()) },
        __class__: rh
    });
    var sh = function() {
        this.crossLength = 20;
        this.crossThickness = 3;
        this.padding = 0;
        this.color2 = 16777215;
        this.color1 = 0;
        this.dotLength = 5;
        this.thickness =
            1;
        k.call(this)
    };
    g["stolo.ensys.editor.component.EditorSelectionComponent"] = sh;
    sh.__name__ = ["stolo", "ensys", "editor", "component", "EditorSelectionComponent"];
    sh.__super__ = k;
    sh.prototype = l(k.prototype, {
        get_name: function() { return "EditorSelectionComponent_54" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._transform = this.owner._compMap.TransformComponent_66;
            this._display = this.owner._compMap.Sprite_19;
            if (null != this._display)
                if (this._display.initialized) this.build();
                else this._display.onInitComplete.connect(n(this,
                    this.build)).once()
        },
        onRemoved: function() { k.prototype.onRemoved.call(this);
            null != this._container && (this._container.parent.removeChild(this._container), this._container = null);
            this._display = this._transform = this._sprite = null },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a);
            this.updateTransform() },
        updateTransform: function() { null != this._sprite && (this._sprite.setXY(this._transform.position.x, this._transform.position.y), this._sprite.setRotation(this._transform.rotation)) },
        build: function() {
            null != this._container &&
                this._container.dispose();
            var a;
            a = this.owner._internal_getFromParents("RendererSystem_50");
            var b = a.getActorLayer(this.owner);
            a = a.addLayer({ name: b.getName() + "_selection\u00a0", parallax: b.parallax, editor: { unlockable: !0, locked: !0 } });
            a.set_pointerEnabled(!1);
            var b = this._display.getNaturalWidth() + 2 * this.padding,
                c = this._display.getNaturalHeight() + 2 * this.padding;
            if (U.__instanceof(this._display, Ob) && null != this.owner._compMap.PhysicsComponent_42) {
                var d = this.owner._compMap.PhysicsComponent_42.shape;
                null != d.width &&
                    null != d.height && (b = d.width + 2 * this.padding, c = d.height + 2 * this.padding)
            }
            var d = w._platform.getRenderer().createTexture(b, c),
                e = d.get_graphics();
            this.drawDottedLine(e, !0, 0, 0, b, this.dotLength, this.thickness, this.color1, this.color2);
            this.drawDottedLine(e, !1, 0, 0, c, this.dotLength, this.thickness, this.color1, this.color2);
            this.drawDottedLine(e, !0, 0, c - this.thickness, b, this.dotLength, this.thickness, this.color1, this.color2);
            this.drawDottedLine(e, !1, b - this.thickness, 0, c, this.dotLength, this.thickness, this.color1, this.color2);
            this.drawDottedLine(e, !0, this._display.anchorX._value - 0.5 * this.crossLength, this._display.anchorY._value - 0.5 * this.crossThickness, this.crossLength, this.dotLength, this.crossThickness, this.color1, this.color1);
            this.drawDottedLine(e, !1, this._display.anchorX._value - 0.5 * this.crossThickness, this._display.anchorY._value - 0.5 * this.crossLength, this.crossLength, this.dotLength, this.crossThickness, this.color1, this.color1);
            this._sprite = new V(d);
            this._sprite.setAnchor(this._display.anchorX._value, this._display.anchorY._value);
            b = this._sprite.scaleX;
            b.set__(b._value * this._transform.direction);
            this._container = new A;
            this._container.add(this._sprite);
            a.owner.addChild(this._container)
        },
        drawDottedLine: function(a, b, c, d, e, f, j, h, g) { for (var i = 0, k = !1; i < e;) { var l;
                l = k ? h : g;
                b ? a.fillRect(l, c + i, d, Math.min(f, e - i), j) : a.fillRect(l, c, d + i, j, Math.min(f, e - i));
                k = !k;
                i += f } },
        __class__: sh
    });
    var th = function() { this._startingSymbol = null;
        R.call(this) };
    g["stolo.ensys.components.ImageComponent"] = th;
    th.__name__ = ["stolo", "ensys", "components", "ImageComponent"];
    th.__super__ = R;
    th.prototype = l(R.prototype, {
        dispose: function() { R.prototype.dispose.call(this);
            this._startingSymbol = this._texture = this.bitmapSprite = this.sprite = null },
        initStart: function() { null != this.spritesheet ? this.loadSpritesheet(this.spritesheet, this.asset) : (this.set_texture(this.getTexture(this.pack, this.asset)), this.width = this.get_texture().get_width(), this.height = this.get_texture().get_height(), this.useSprite && this.createSprite(), R.prototype.initStart.call(this)) },
        initEnd: function() {
            null != this._startingSymbol &&
                (this.setSymbol(this._startingSymbol), this._startingSymbol = null);
            R.prototype.initEnd.call(this)
        },
        createSprite: function() { null == this.sprite && (this.sprite = new V(this._texture), this.sprite.set_pointerEnabled(!1), this.owner.addChild((new A).add(this.sprite)), this._texture = null) },
        draw: function(a) { null != this._texture && a.drawTexture(this._texture, 0, 0) },
        get_texture: function() { return null != this.sprite ? this.sprite.texture : this._texture },
        set_texture: function(a) {
            this.width = a.get_width();
            this.height = a.get_height();
            return null != this.sprite ? this.sprite.texture = a : this._texture = a
        },
        set_pointerEnabled: function(a) { null != this.sprite && this.sprite.set_pointerEnabled(a);
            null != this.bitmapSprite && this.bitmapSprite.set_pointerEnabled(a); return R.prototype.set_pointerEnabled.call(this, a) },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        loadSpritesheet: function(a, b) { var c = new A;
            this.owner.addChild(c);
            this.bitmapSprite = new Hb(a, b, this.pack, n(this, this.onBitmapSpriteInit), !1);
            c.add(this.bitmapSprite) },
        onBitmapSpriteInit: function() { this.updateBitmapSprite();
            this.initEnd() },
        setSymbol: function(a) { if (!this.initialized) return this._startingSymbol = a, null; if (null == this.bitmapSprite) throw "Not spritesheet loaded!";
            a = this.bitmapSprite.setSymbol(a);
            this.updateBitmapSprite(); return a },
        updateBitmapSprite: function() { this.width = Math.round(this.bitmapSprite.getNaturalWidth());
            this.height = Math.round(this.bitmapSprite.getNaturalHeight()) },
        __class__: th,
        __properties__: l(R.prototype.__properties__, {
            set_texture: "set_texture",
            get_texture: "get_texture"
        })
    });
    var uh = function() { R.call(this) };
    g["stolo.ensys.components.FillComponent"] = uh;
    uh.__name__ = ["stolo", "ensys", "components", "FillComponent"];
    uh.__super__ = R;
    uh.prototype = l(R.prototype, { initStart: function() { this.setAlpha(1 - this.transparency);
            this.initEnd() }, draw: function(a) { a.fillRect(this.color, 0, 0, this.width, this.height) }, getNaturalWidth: function() { return this.width }, getNaturalHeight: function() { return this.height }, __class__: uh });
    var vh = function() { this.labelLayer = "Time";
        Ob.call(this) };
    g["stolo.ensys.components.FlumpAnimationComponent"] = vh;
    vh.__name__ = ["stolo", "ensys", "components", "FlumpAnimationComponent"];
    vh.__super__ = Ob;
    vh.prototype = l(Ob.prototype, {
        onStart: function() { Ob.prototype.onStart.call(this) },
        onStop: function() { this.flump = null;
            Ob.prototype.onStop.call(this) },
        createAnim: function() { this.animation = this.flump = new uk(this.prefix, this.asset, this.pack, null, !1);
            this.owner.addChild((new A).add(this.animation));
            this.setReplacementAnim() },
        setReplacementAnim: function() {
            null != this.textureReplace &&
                (this.flump.setDecorator(n(this, this.replaceAnims)), null != this.flump.movie && this.replaceAnims(this.flump.movie))
        },
        replaceAnims: function(a) { if (this.textureReplace instanceof Array && null == this.textureReplace.__enum__)
                for (var b = this.textureReplace, c = 0; c < b.length;) { var d = b[c];++c;
                    this.replaceAnim(a, d) } else this.replaceAnim(a, this.textureReplace) },
        replaceAnim: function(a, b) {
            var c = null;
            null != b.asset && null != b.sprite && (c = D.getPack(b.sprite).getTexture(b.asset));
            var d = a.getLayer(b.layer, !1);
            null != d && (d = d._internal_getFromChildren("Sprite_19",
                V), null != d && (d.texture = c))
        },
        __class__: vh
    });
    var wh = function() { R.call(this) };
    g["stolo.ensys.components.PatternComponent"] = wh;
    wh.__name__ = ["stolo", "ensys", "components", "PatternComponent"];
    wh.__super__ = R;
    wh.prototype = l(R.prototype, {
        initStart: function() { this._texture = this.getTexture(this.pack, this.asset);
            null != this._texture && (0 < this.width || (this.width = this._texture.get_width()), 0 < this.height || (this.height = this._texture.get_height()));
            this.initEnd() },
        draw: function(a) {
            null != this._texture && a.drawPattern(this._texture,
                0, 0, this.width, this.height)
        },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        __class__: wh
    });
    var vc = function() { this._px = this._py = this._tx = this._ty = 0;
        R.call(this) };
    g["stolo.ensys.components.TilerComponent"] = vc;
    vc.__name__ = ["stolo", "ensys", "components", "TilerComponent"];
    vc.__super__ = R;
    vc.prototype = l(R.prototype, {
        draw: function(a) { null != this._texture && a.drawTexture(this._texture, 0, 0) },
        enableCulling: function(a) {
            R.prototype.enableCulling.call(this, a);
            this.cullTexture &&
                !a && !this.isBuilt && this.buildTexture()
        },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        onStart: function() {
            this._transform = this.owner._compMap.TransformComponent_66;
            this._image = this.getTexture(this.pack, this.asset);
            this.updatePosition();
            this.width = this.xsize * this.tileWidth | 0;
            this.height = this.ysize * this.tileHeight | 0;
            0 != this.xsize % 2 && (this._px += 0.5 * this.tileWidth | 0);
            0 != this.ysize % 2 && (this._py += 0.5 * this.tileHeight | 0);
            this._tx = (this._px - 0.5 * this.width) / this.tileWidth |
                0;
            this._ty = (this._py - 0.5 * this.height) / this.tileHeight | 0;
            null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.setPosition(this._transform.position.x, this._transform.position.y);
            this._grid = vc.tileCache.get(this.grid);
            null == this._grid && (this._grid = new K, vc.tileCache.set(this.grid, this._grid));
            for (var a = 0, b = this.xsize; a < b;)
                for (var c = a++, d = 0, e = this.ysize; d < e;) { var f = d++;
                    this.setTile(this._tx + c, this._ty + f) } this.cullTexture || this.buildTexture();
            R.prototype.onStart.call(this)
        },
        updatePosition: function() { this._px = u["int"](Math.floor(this._transform.position.x / this.tileWidth) * this.tileWidth);
            this._py = u["int"](Math.floor(this._transform.position.y / this.tileHeight) * this.tileHeight);
            this._transform.position.x = this._px;
            this._transform.position.y = this._py;
            this.forceUpdate = !0 },
        onUpdate: function(a) { R.prototype.onUpdate.call(this, a);
            null != this.owner._internal_getFromParents("BaseGameSystem_23", Ib) && this.updatePosition() },
        getTileId: function(a, b) { return a + "_" + b },
        getTile: function(a,
            b) { return this._grid.get(this.getTileId(a, b)) },
        setTile: function(a, b, c) { null == c && (c = !0);
            this._grid.set(this.getTileId(a, b), c) },
        getTextureCacheId: function() { return "tiler_" + this.pack + "_" + this.asset + "_" + this.width + "x" + this.height },
        buildTexture: function() {
            this.isBuilt = !0;
            var a = null,
                b = null;
            if (this.drawTexture) { a = this.getTextureCacheId();
                this._texture = vc.cache.get(a); if (null != this._texture) return this.endBuild();
                this._texture = w._platform.getRenderer().createTexture(this.width, this.height);
                b = this._texture.get_graphics() }
            for (var c =
                    Math.floor(this._image.get_width() / this.tileWidth), d = 0, e = this.xsize; d < e;)
                for (var f = d++, j = 0, h = this.ysize; j < h;) {
                    var g = j++,
                        i = this._tx + f,
                        k = this._ty + g,
                        l = 0;
                    this.cornerMode ? (this.getTile(i + 1, k - 1) && (l += 1), this.getTile(i + 1, k + 1) && (l += 2), this.getTile(i - 1, k + 1) && (l += 4), this.getTile(i - 1, k - 1) && (l += 8), 7 == l && !this.getTile(i, k - 1) && (l = 6), 7 == l && !this.getTile(i - 1, k) && (l = 3), 14 == l && !this.getTile(i, k - 1) && (l = 6), 14 == l && !this.getTile(i + 1, k) && (l = 12), 11 == l && !this.getTile(i, k + 1) && (l = 9), 11 == l && !this.getTile(i - 1, k) && (l = 3), 13 == l &&
                        !this.getTile(i, k + 1) && (l = 9), 13 == l && !this.getTile(i + 1, k) && (l = 12)) : (this.getTile(i, k - 1) && (l += 1), this.getTile(i + 1, k) && (l += 2), this.getTile(i, k + 1) && (l += 4), this.getTile(i - 1, k) && (l += 8));
                    var i = this.mapping[l],
                        m = i[Math.floor(Math.random() * i.length)],
                        i = m % c,
                        k = Math.floor(m / c);
                    this.drawTexture ? b.drawSubTexture(this._image, f * this.tileWidth, g * this.tileHeight, i * this.tileWidth, k * this.tileHeight, this.tileWidth, this.tileHeight) : (a = "tiler_" + this.pack + "_" + this.asset + "_" + l + "_" + m, l = null, vc.cache.exists(a) ? l = vc.cache.get(a) :
                        (l = this._image.subTexture(i * this.tileWidth, k * this.tileHeight, this.tileWidth, this.tileHeight), vc.cache.set(a, l)), l = new V(l), l.set_pointerEnabled(0 != (this._flags & 4)), this.owner.addChild((new A).add(l)), l.setXY(f * this.tileWidth, g * this.tileHeight))
                }
            this.drawTexture && vc.cache.set(a, this._texture);
            this.endBuild()
        },
        endBuild: function() { this.initEnd();
            this.isBuilt = !0 },
        dispose: function() { this._texture = this._grid = this._image = null;
            R.prototype.dispose.call(this) },
        __class__: vc
    });
    var ub = function() { R.call(this) };
    g["stolo.ensys.components.SlicerComponent"] = ub;
    ub.__name__ = ["stolo", "ensys", "components", "SlicerComponent"];
    ub.ValidateActorExport = function(a, b) { a.width = b.dataWidth;
        a.height = b.dataHeight; return a };
    ub.__super__ = R;
    ub.prototype = l(R.prototype, {
        draw: function(a) { null != this._texture && a.drawTexture(this._texture, 0, 0) },
        onAdded: function() { this.dataWidth = this.width;
            this.dataHeight = this.height;
            R.prototype.onAdded.call(this) },
        enableCulling: function(a) {
            R.prototype.enableCulling.call(this, a);
            this.cullTexture && !a &&
                !this.isBuilt && this.buildTexture()
        },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        initStart: function() {
            this._image = this.getTexture(this.pack, this.asset);
            var a = this.slices[0],
                b = this.slices[1];
            this.slicesData = new Ec;
            for (var c = 0, d = 0, e, f, j = 0, h = 0, g = b.length - 1; h < g;) { c = h++;
                d = b[c];
                f = b[c + 1] - d; for (var i = 0, k = a.length - 1; i < k;) e = i++, c = a[e], e = a[e + 1] - c, this.slicesData.set(++j, { id: j, x: c, y: d, width: e, height: f }) } this.slicesData.set(-1, { id: -1, x: 0, y: 0, width: 0, height: 0 });
            b = this.slicesData.get(this.template[0][0][0]);
            j = this.slicesData.get(this.template[0][2][0]);
            a = this.slicesData.get(this.template[1][1][0]);
            this.slicesData.get(this.template[2][0][0]);
            d = this.slicesData.get(this.template[2][2][0]);
            j = b.width + j.width;
            this.widthVar = this.width - j;
            this.widthRepeat = Math.ceil(this.widthVar / a.width);
            this.widthVar = this.widthRepeat * a.width | 0;
            b = b.height + d.height;
            this.heightVar = this.height - b;
            this.heightRepeat = Math.ceil(this.heightVar / a.height);
            this.heightVar = this.heightRepeat * a.height |
                0;
            this.width = this.widthVar + j;
            this.height = this.heightVar + b;
            this.cullTexture || this.buildTexture()
        },
        getTextureCacheId: function() { return "slicer_" + this.pack + "_" + this.asset + "_" + this.slices[0].toString() + "_" + this.slices[1].toString() + "_" + this.dataWidth + "x" + this.dataHeight },
        buildTexture: function() {
            var a = 0,
                b = 0,
                c, d, e = null,
                f = null,
                j = null;
            if (this.drawTexture) {
                j = this.getTextureCacheId();
                this._texture = ub.cache.get(j);
                if (null != this._texture) return this.endBuild();
                this._texture = w._platform.getRenderer().createTexture(this.width,
                    this.height);
                f = this._texture.get_graphics()
            }
            for (var h = 0; 3 > h;) {
                for (var g = h++, i = this.template[g], k = 0; 3 > k;) {
                    var l = k++,
                        m = i[l];
                    d = 1 == g ? this.heightRepeat : 1;
                    c = 1 == l ? this.widthRepeat : 1;
                    for (var n = 0, o = 0, t = 0; t < d;) {
                        t++;
                        for (var r = 0; r < c;) {
                            r++;
                            e = this.slicesData.get(m[Math.floor(Math.random() * m.length)]);
                            if (-1 != e.id && 0 < e.width && 0 < e.height)
                                if (this.drawTexture) f.drawSubTexture(this._image, a + n, b + o, e.x, e.y, e.width, e.height);
                                else {
                                    var j = "slicer_" + this.pack + "_" + this.asset + "_" + u.string(e.x) + "x" + u.string(e.y) + "_" + u.string(e.width) +
                                        "x" + u.string(e.height),
                                        s = null;
                                    ub.cache.exists(j) ? s = ub.cache.get(j) : (s = this._image.subTexture(e.x, e.y, e.width, e.height), ub.cache.set(j, s));
                                    s = new V(s);
                                    s.set_pointerEnabled(0 != (this._flags & 4));
                                    this.owner.addChild((new A).add(s));
                                    s.setXY(a + n, b + o)
                                } n += e.width
                        }
                        o += e.height;
                        n = 0
                    }
                    a = 1 == l ? a + this.widthVar : a + e.width
                }
                a = 0;
                b = 1 == g ? b + this.heightVar : b + e.height
            }
            this.drawTexture && ub.cache.set(j, this._texture);
            this.endBuild()
        },
        endBuild: function() { this.initEnd();
            this.isBuilt = !0 },
        dispose: function() {
            this.slicesData = this._texture =
                this.template = this.slices = this._image = null;
            R.prototype.dispose.call(this)
        },
        __class__: ub
    });
    var vk = function() { this.textvars = {};
        this.localized = !0;
        this.font = "debug_font";
        this.text = "notext";
        R.call(this) };
    g["stolo.ensys.components.TextComponent"] = vk;
    vk.__name__ = ["stolo", "ensys", "components", "TextComponent"];
    vk.__super__ = R;
    vk.prototype = l(R.prototype, {
        initStart: function() {
            this.localized ? this.textfield = new Qe(this.text, this.font, this.textvars) : (this.textfield = M.getTextSprite(this.font), this.textfield.set_text(this.text));
            this.owner.addChild((new A).add(this.textfield));
            this.initEnd()
        },
        getNaturalWidth: function() { return this.textfield.getNaturalWidth() },
        getNaturalHeight: function() { return this.textfield.getNaturalWidth() },
        __class__: vk
    });
    var dd = function() { this._partsTotal = 0;
        this._parts = [];
        this.horizontal = !0;
        this.scroll = this.scrollOffset = this.autoScroll = 0;
        R.call(this) };
    g["stolo.ensys.components.ScrollerComponent"] = dd;
    dd.__name__ = ["stolo", "ensys", "components", "ScrollerComponent"];
    dd.__super__ = R;
    dd.prototype = l(R.prototype, {
        onAdded: function() { R.prototype.onAdded.call(this);
            null == this.assets && (this.assets = []);
            null != this.asset && "" != this.asset && this.assets.push(this.asset) },
        onRemoved: function() { R.prototype.onRemoved.call(this); for (var a = 0, b = this._parts; a < b.length;) { var c = b[a];++a;
                c.texture = null;
                c.next = null;
                c.previous = null } this._parts = null },
        onUpdate: function(a) { this.scrollOffset += this.autoScroll;
            R.prototype.onUpdate.call(this, a) },
        onStart: function() {
            for (var a = 0, b = this.assets; a < b.length;) {
                var c = b[a];
                ++a;
                var d = 0,
                    e = null,
                    f =
                    0,
                    j = 0,
                    f = c.split("@");
                if ("void" == f[0]) { if (1 == f.length) throw "You must specify a size for the void " + u.string(this.assets);
                    2 == f.length ? d = u.parseInt(f[1]) : 3 == f.length && (d = u.parseInt(f[1]) + Math.round(Math.random() * u.parseInt(f[2])));
                    f = this.horizontal ? d : this.width;
                    j = this.horizontal ? this.height : d } else e = this.getTexture(this.pack, c), d = this.horizontal ? e.get_width() : e.get_height(), f = e.get_width(), j = e.get_height();
                this._parts.push({
                    texture: e,
                    width: f,
                    height: j,
                    next: null,
                    previous: null,
                    first: !1,
                    last: !1,
                    start: this._partsTotal,
                    end: this._partsTotal + d
                });
                this._partsTotal += d
            }
            a = 0;
            for (b = this._parts.length; a < b;) c = a++, d = this._parts[c], d.next = this._parts[c + 1], d.previous = this._parts[c - 1], d.first = 0 == c, d.last = c == this._parts.length - 1;
            this._parts[0].previous = this._parts[this._parts.length - 1];
            this._parts[this._parts.length - 1].next = this._parts[0];
            this._drawTextureFunc = this.horizontal ? n(this, this.drawTextureHorizontal) : n(this, this.drawTextureVertical);
            R.prototype.onStart.call(this)
        },
        draw: function(a) {
            if (!(0 >= this._parts.length)) {
                var b = (this.scroll +
                    this.scrollOffset) % this._partsTotal;
                0 > b && (b = this._partsTotal + b);
                for (var c = this._parts[0]; b > c.end && !(c = c.next, c.last););
                this._drawTextureFunc(a, c, b - c.start, 0)
            }
        },
        drawTextureHorizontal: function(a, b, c, d) { var e = Math.max(1, b.width - c),
                f = Math.max(1, this.width - d);
            e < f ? (null != b.texture && a.drawSubTexture(b.texture, d, 0, c, 0, e, this.height), this.drawTextureHorizontal(a, b.next, 0, d + e)) : null != b.texture && a.drawSubTexture(b.texture, d, 0, c, 0, f, this.height) },
        drawTextureVertical: function(a, b, c, d) {
            var e = Math.max(1, b.height -
                    c),
                f = Math.max(1, this.height - d);
            e < f ? (null != b.texture && a.drawSubTexture(b.texture, 0, d, 0, c, this.width, e), this.drawTextureVertical(a, b.next, 0, d + e)) : null != b.texture && a.drawSubTexture(b.texture, 0, d, 0, c, this.width, f)
        },
        getNaturalWidth: function() { return this.width },
        getNaturalHeight: function() { return this.height },
        __class__: dd
    });
    var wk = function() { this.lockHorizontal = this.lockVertical = this.lockWidth = this.lockHeight = !1;
        dd.call(this) };
    g["stolo.ensys.components.LayerScrollerComponent"] = wk;
    wk.__name__ = ["stolo", "ensys",
        "components", "LayerScrollerComponent"
    ];
    wk.__super__ = dd;
    wk.prototype = l(dd.prototype, {
        onAdded: function() { dd.prototype.onAdded.call(this) },
        onRemoved: function() { dd.prototype.onRemoved.call(this) },
        onStart: function() {
            dd.prototype.onStart.call(this);
            this._layer = this.owner.parent._compMap.Sprite_19;
            this._layerX = this._layer.x;
            this._layerY = this._layer.y;
            this._layerS = this.horizontal ? this._layerX : this._layerY;
            var a;
            X.getSystemEntity(this.owner);
            a = X.getSystemEntity(this.owner).getComponent("RendererSystem_50");
            this._rendererDimensions = null != a ? a.dimensionsScaled : new Ab(0, 0, o.gameWidth, o.gameHeight)
        },
        onUpdate: function(a) { dd.prototype.onUpdate.call(this, a);
            this.scroll = -this._layerS._value;
            this.lockHorizontal && this.anchorX.set__(this._layerX._value);
            this.lockVertical && this.anchorY.set__(this._layerY._value);
            this.lockWidth && (this.width = this._rendererDimensions.width | 0);
            this.lockHeight && (this.height = this._rendererDimensions.height | 0) },
        __class__: wk
    });
    var xk = function() { this.lockX = this.lockY = !1;
        k.call(this) };
    g["stolo.ensys.components.PositionLockComponent"] =
        xk;
    xk.__name__ = ["stolo", "ensys", "components", "PositionLockComponent"];
    xk.__super__ = k;
    xk.prototype = l(k.prototype, {
        get_name: function() { return "PositionLockComponent_78" },
        onStart: function() { k.prototype.onStart.call(this);
            this._transform = this.owner._compMap.TransformComponent_66;
            this._targetX = this._transform.position.x;
            this._targetY = this._transform.position.y },
        onStop: function() { k.prototype.onStop.call(this) },
        onUpdate: function(a) {
            k.prototype.onUpdate.call(this, a);
            this.lockX && (this._transform.position.x =
                this._targetX);
            this.lockY && (this._transform.position.y = this._targetY)
        },
        __class__: xk
    });
    var ed = function() { this.color = 0;
        this.thickness = 1;
        this.dotLength = 5;
        this.length = 100;
        R.call(this) };
    g["stolo.ensys.components.LineComponent"] = ed;
    ed.__name__ = ["stolo", "ensys", "components", "LineComponent"];
    ed.__super__ = R;
    ed.prototype = l(R.prototype, {
        dispose: function() { R.prototype.dispose.call(this);
            null != this._texture && !ed.USE_CACHE && this._texture.dispose() },
        onStart: function() {
            R.prototype.onStart.call(this);
            this._texture =
                this.createDottedLine(this.length, this.dotLength, this.thickness, this.color)
        },
        draw: function(a) { null != this._texture && a.drawTexture(this._texture, 0, 0) },
        createDottedLine: function(a, b, c, d) { null == d && (d = 0); var e = a + "@" + b + "@" + c + "@" + d; if (ed.USE_CACHE && ed.CACHE.exists(e)) return ed.CACHE.get(e); var f = w._platform.getRenderer().createTexture(a, c),
                j = f.get_graphics(); if (0 < b)
                for (var h = 0, g = !1; h < a;) g && j.fillRect(d, h, 0, Math.min(b, a - h), c), g = !g, h += b;
            else j.fillRect(d, 0, 0, a, c);
            ed.USE_CACHE && ed.CACHE.set(e, f); return f },
        getNaturalWidth: function() { return this.length },
        getNaturalHeight: function() { return this.thickness },
        __class__: ed
    });
    var yk = function() { this.spread = 200;
        this.maxScale = 1;
        this.minScale = 0.1;
        this.maxAlpha = 0.3;
        this.minAlpha = 0.1;
        this.pack = "sprites";
        this.asset = "shadow";
        this.enabled = !0;
        k.call(this) };
    g["stolo.ensys.components.GroundShadowComponent"] = yk;
    yk.__name__ = ["stolo", "ensys", "components", "GroundShadowComponent"];
    yk.__super__ = k;
    yk.prototype = l(k.prototype, {
        get_name: function() { return "GroundShadowComponent_79" },
        dispose: function() { k.prototype.dispose.call(this);
            this.reference = this._shadow = null },
        onStart: function() { k.prototype.onStart.call(this);
            this._shadow = new V(G.getTextureFromPack(this.asset, this.pack));
            this._shadow.centerAnchor();
            null != this.offset && this._shadow.setXY(this.offset.x, this.offset.y);
            (new A).add(this._shadow);
            this.sendToBack() },
        sendToBack: function() { null != this._shadow && this.owner.addChild(this._shadow.owner, !1) },
        onUpdate: function(a) {
            k.prototype.onUpdate.call(this, a);
            this.enabled && null != this.reference &&
                this.set(this.reference.y._value)
        },
        set: function(a) { var b = 1 - a / -this.spread,
                a = this.minAlpha + b * (this.maxAlpha - this.minAlpha),
                b = this.minScale + b * (this.maxScale - this.minScale);
            0 < a ? (this._shadow.set_visible(!0), this._shadow.setScale(b), this._shadow.setAlpha(a)) : this._shadow.set_visible(!1) },
        __class__: yk
    });
    var xh = function() { this.color = 16776960;
        this.debug = !0;
        k.call(this) };
    g["stolo.ensys.components.PhysicsDebugComponent"] = xh;
    xh.__name__ = ["stolo", "ensys", "components", "PhysicsDebugComponent"];
    xh.__super__ = k;
    xh.prototype = l(k.prototype, {
        get_name: function() { return "PhysicsDebugComponent_45" },
        onActorAdded: function() { this._transform = this.owner._compMap.TransformComponent_66;
            this._physics = this.owner._compMap.PhysicsComponent_42; if (null != this._physics) { var a = this._physics.getBody(); if (null != a && !a.zpp_inner.wrap_shapes.empty()) this.onShapesCreated();
                this._physics.onShapesCreated.connect(n(this, this.onShapesCreated));
                this._physics.onShapeCreated.connect(n(this, this.onNewShape)) } },
        onStop: function() {
            null != this.container &&
                (this.container.parent.removeChild(this.container), this.container = null);
            this.sprite = null;
            k.prototype.onStop.call(this)
        },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a);
            this.updateTransform() },
        updateTransform: function() { null != this.sprite && (this.sprite.setXY(this._transform.position.x, this._transform.position.y), this.sprite.setRotation(this._transform.rotation)) },
        init: function() {
            if (null == this.container) {
                var a;
                X.getSystemEntity(this.owner);
                a = X.getSystemEntity(this.owner).getComponent("RendererSystem_50");
                var b = a.getActorLayer(this.owner);
                this.layer = a.addLayer({ name: b.getName() + "_physics", parallax: b.parallax, editor: { unlockable: !0, locked: !0 } });
                this.layer.set_pointerEnabled(!1);
                this.createContainer()
            }
        },
        createContainer: function() { this.container = new A;
            this.sprite = new s;
            this.sprite.setAnchor(-this._physics.offset.x, -this._physics.offset.y);
            this.container.add(this.sprite);
            this.layer.owner.addChild(this.container) },
        onShapesCreated: function() {
            null != this.container && (this.container.remove(this.sprite), this.container.dispose(),
                this.container = null, this.createContainer());
            this.onNewShape(this._physics.shape, null)
        },
        onNewShape: function(a) { if (H.is(a, O.TObject)) this.createShape(a);
            else if (H.is(a, O.TClass(Array)))
                for (var b = 0, a = U.__cast(a, Array); b < a.length;) { var c = a[b];++b;
                    this.createShape(c) } },
        createShape: function(a) { this.init();
            a = new qe(a, this.color);
            null != a.texture && (a.actor = this.owner, this.container.addChild((new A).add(a)));
            this.firstSprite = u.instance(this.container.firstChild._compMap.Sprite_19, qe) },
        __class__: xh
    });
    var yh =
        function() { this.left = this.right = this.top = this.bottom = this.acceptOnce = !1;
            k.call(this) };
    g["stolo.ensys.components.PassthroughComponent"] = yh;
    yh.__name__ = ["stolo", "ensys", "components", "PassthroughComponent"];
    yh.__super__ = k;
    yh.prototype = l(k.prototype, {
        get_name: function() { return "PassthroughComponent_80" },
        onStart: function() {
            k.prototype.onStart.call(this);
            null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.addContactType("PASSTHROUGH");
            X.getSystemEntity(this.owner);
            this._physicSystem =
                X.getSystemEntity(this.owner).getComponent("PhysicSystem_44");
            this._physicSystem.addContactListener(ma.PRELISTENER, Aa.COLLISION, "PASSTHROUGH", "PASSTHROUGHABLE", this.owner, n(this, this.onPreContact), this.acceptOnce)
        },
        onStop: function() { this._physicSystem.removeContactListener(ma.PRELISTENER, Aa.COLLISION, "PASSTHROUGH", "PASSTHROUGHABLE", this.owner);
            k.prototype.onStop.call(this);
            this._physicSystem = null },
        onPreContact: function(a, b) {
            var c = a._compMap.PassthroughableComponent_81,
                d = null != a._compMap.TransformComponent_66 &&
                1 == a._compMap.TransformComponent_66.direction;
            return this.left || c.left && 180 * b.angle / 3.141592653589793 == (d ? 180 : 0) || this.right || c.right && 180 * b.angle / 3.141592653589793 == (d ? 0 : 180) || this.top || c.top && 90 == 180 * b.angle / 3.141592653589793 || this.bottom || c.bottom && -90 == 180 * b.angle / 3.141592653589793 ? !1 : !0
        },
        __class__: yh
    });
    var zh = function() { k.call(this) };
    g["stolo.ensys.components.PassthroughableComponent"] = zh;
    zh.__name__ = ["stolo", "ensys", "components", "PassthroughableComponent"];
    zh.__super__ = k;
    zh.prototype = l(k.prototype, { get_name: function() { return "PassthroughableComponent_81" }, onStart: function() { null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.addContactType("PASSTHROUGHABLE") }, __class__: zh });
    var Ah = function() { k.call(this) };
    g["stolo.ensys.components.FrictionerComponent"] = Ah;
    Ah.__name__ = ["stolo", "ensys", "components", "FrictionerComponent"];
    Ah.__super__ = k;
    Ah.prototype = l(k.prototype, {
        get_name: function() { return "FrictionerComponent_82" },
        onStart: function() {
            k.prototype.onStart.call(this);
            null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.addContactType("FRICTIONER");
            X.getSystemEntity(this.owner);
            this._physicSystem = X.getSystemEntity(this.owner).getComponent("PhysicSystem_44");
            this._physicSystem.addContactListener(ma.PRELISTENER, Aa.COLLISION, "FRICTIONER", "ANY_BODY", this.owner, n(this, this.onPreContact))
        },
        onStop: function() { this._physicSystem.removeContactListener(ma.PRELISTENER, Aa.COLLISION, "FRICTIONER", "ANY_BODY", this.owner);
            k.prototype.onStop.call(this) },
        onPreContact: function(a, b) { 90 != 180 * b.angle / 3.141592653589793 && b.disableFriction(); return !0 },
        __class__: Ah
    });
    var mf = function() { this._contacts = new Ta;
        this.listenFrom = this.listenTo = "ANY_BODY";
        this.enabled = !0;
        k.call(this) };
    g["stolo.ensys.physics.components.BaseContactHandler"] = mf;
    mf.__name__ = ["stolo", "ensys", "physics", "components", "BaseContactHandler"];
    mf.__super__ = k;
    mf.prototype = l(k.prototype, {
        get_name: function() { return "BaseContactHandler_83" },
        dispose: function() {
            null != this._contacts && this._contacts.dispose();
            this._system = this._contacts = this._interactionType = null;
            k.prototype.dispose.call(this)
        },
        onActorAdded: function() { this._system = this.owner._internal_getFromParents("PhysicSystem_44") },
        onStart: function() { k.prototype.onStart.call(this);
            this.listenFrom = this.validateContactType(this.listenFrom);
            this.listenTo = this.validateContactType(this.listenTo); if (null == this._interactionType) { if (null != this.contactMode && "" != this.contactMode) throw "TODO: handle contactMode string";
                this._interactionType = Aa.ANY } },
        addLocalListeners: function(a,
            b, c, d) { return this.addListeners(this.listenFrom, this.listenTo, this._interactionType, a, b, c, d) },
        addListeners: function(a, b, c, d, e, f, j) { null == c && (c = Aa.ANY); if (null == a || null == b) throw "Need both listenFrom and listenTo";
            null != d && this.addContactListener(ma.BEGIN, c, a, b, this.owner, d);
            null != e && this.addContactListener(ma.END, c, a, b, this.owner, e);
            null != f && this.addContactListener(ma.PRELISTENER, c, a, b, this.owner, f);
            null != j && this.addContactListener(ma.ONGOING, c, a, b, this.owner, j) },
        addContactListener: function(a, b, c,
            d, e, f, j) { null == j && (j = !1);
            this._contacts.add(new zk(this._system, a, b, c, d, e, f, j)) },
        validateContactType: function(a) { return null == a || "" == a ? "ANY_BODY" : a },
        onStop: function() { null != this._contacts && this._contacts.dispose();
            k.prototype.onStop.call(this) },
        __class__: mf
    });
    var Ak = function() { this.adaptive = this.ongoing = this._fixedAngle = !1;
        this.unidirectional = !0;
        this.angle = -1;
        this.center = !1;
        this.force = 3E3;
        mf.call(this) };
    g["stolo.ensys.physics.components.ForceField"] = Ak;
    Ak.__name__ = ["stolo", "ensys", "physics", "components",
        "ForceField"
    ];
    Ak.__super__ = mf;
    Ak.prototype = l(mf.prototype, {
        get_name: function() { return "ForceField_84" },
        dispose: function() { mf.prototype.dispose.call(this) },
        onStart: function() { mf.prototype.onStart.call(this);
            this.addLocalListeners(n(this, this.onContactBegin), null, null, this.ongoing ? n(this, this.onContactOnGoing) : null);
            this.setAngle(this.angle) },
        onContactBegin: function(a, b) { if (!this.enabled || !this.isValidContact(a, b)) return !1;
            this.applyForce(a, this.getContactAngle(a, b)); return !0 },
        onContactOnGoing: function(a,
            b) { if (!this.enabled || !this.isValidContact(a, b)) return !1;
            this.applyForce(a, this.getContactAngle(a, b)); return !0 },
        isValidContact: function(a) { return this._fixedAngle && this.unidirectional && 0 > a._compMap.PhysicsComponent_42.getVelocity().get_x() * this.owner._compMap.TransformComponent_66.direction ? !1 : !0 },
        getContactAngle: function(a, b) {
            return this._fixedAngle ? this.adaptive && -1 == this.owner._compMap.TransformComponent_66.direction ? this._radians + Math.PI : this._radians : this.center || null == b ? this.owner._compMap.PhysicsComponent_42.getAngle(a) :
                b.angle
        },
        applyForce: function(a, b) { a._compMap.PhysicsComponent_42.applyAngularImpulse(b, this.force) },
        setAngle: function(a) { this.angle = a; - 1 == a ? this._fixedAngle = !1 : (this._fixedAngle = !0, this._radians = Nb.radians(a + -90)) },
        __class__: Ak
    });
    var sg = function() { this.resistanceX = this.resistanceY = -1;
        this.resistance = sg.defaultResistance;
        this.enabled = !0;
        k.call(this) };
    g["stolo.ensys.physics.components.AirFriction"] = sg;
    sg.__name__ = ["stolo", "ensys", "physics", "components", "AirFriction"];
    sg.__super__ = k;
    sg.prototype = l(k.prototype, {
        get_name: function() { return "AirFriction_85" },
        dispose: function() { k.prototype.dispose.call(this);
            this._physics = null },
        onStart: function() { k.prototype.onStart.call(this); - 1 == this.resistanceX && (this.resistanceX = this.resistance); - 1 == this.resistanceY && (this.resistanceY = this.resistance);
            this._physics = this.owner._compMap.PhysicsComponent_42 },
        onUpdate: function(a) {
            k.prototype.onUpdate.call(this, a);
            if (this.enabled) {
                var b = this._physics.getBody();
                if (null != b) {
                    var c;
                    null == b.zpp_inner.wrap_vel && b.zpp_inner.setupVelocity();
                    c = b.zpp_inner.wrap_vel;
                    0 < this.resistanceX && c.set_x(function() { c.zpp_inner.validate(); return c.zpp_inner.x }(this) - function() { c.zpp_inner.validate(); return c.zpp_inner.x }(this) * this.resistanceX * a);
                    0 < this.resistanceY && c.set_y(function() { c.zpp_inner.validate(); return c.zpp_inner.y }(this) - function() { c.zpp_inner.validate(); return c.zpp_inner.y }(this) * this.resistanceY * a)
                }
            }
        },
        __class__: sg
    });
    var Zd = function() {
        this._cooldown = 0;
        this.onDeath = new I;
        this.onDamageCancelled = new I;
        this.onDamage = new I;
        this.health = new Cb(0);
        k.call(this)
    };
    g["stolo.ensys.components.HealthComponent"] = Zd;
    Zd.__name__ = ["stolo", "ensys", "components", "HealthComponent"];
    Zd.__super__ = k;
    Zd.prototype = l(k.prototype, {
        get_name: function() { return "HealthComponent_87" },
        dispose: function() { k.prototype.dispose.call(this);
            this._soundSystem = null },
        onAdded: function() { 0 < this.hits && (this.maximum = this.hits);
            this.set(0 < this.start ? this.start : this.maximum) },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._soundSystem = X.getSystemEntity(this.owner)._compMap.SoundSystem_39;
            null != this.owner._compMap.PhysicsComponent_42 && this.owner._compMap.PhysicsComponent_42.addContactType("DAMAGEABLE")
        },
        onUpdate: function(a) { 0 < this._cooldown && (this._cooldown -= a);
            k.prototype.onUpdate.call(this, a) },
        onStop: function() { k.prototype.onStop.call(this);
            this.onDeath = this.onDamage = this.onDamageCancelled = null },
        modify: function(a) { this.health.set__(Math.min(Math.max(0, this.health._value + a), this.maximum)); return this.health._value },
        set: function(a) {
            this.health.set__(Math.min(Math.max(0, a), this.maximum));
            return this.health._value
        },
        isDead: function() { return 0 >= this.health._value },
        canDamage: function() { return this.invincible || 0 >= this.health._value ? !1 : !0 },
        damage: function(a, b, c, d) {
            null == d && (d = 0);
            null == c && (c = 0);
            if (0 < this._cooldown) return !1;
            if (!this.canDamage()) return this.invincible && null != this.invincibleSound && !this.isDead() && this._soundSystem.play(this.invincibleSound, this.owner, Zd.SOUND_CHANNEL), this.onDamageCancelled.emit(b), !1;
            0 < this.hits ? (this.modify(-1), this.lastDamage = 1) : (this.modify(-a), this.lastDamage =
                a);
            0 < this.cooldown && (this._cooldown = this.cooldown);
            null != this.damageSound && !this.isDead() && this._soundSystem.play(this.damageSound, this.owner, Zd.SOUND_CHANNEL);
            (0 != this.knock && 0 != c || 0 != d) && this.knockPhysics(b, c, d, this.knock);
            this.onDamage.emit(b);
            this.isDead() && this.die(b);
            return !0
        },
        die: function(a) {
            this.health.set__(0);
            "" != this.deathSound && this._soundSystem.play(this.deathSound, this.owner, Zd.SOUND_CHANNEL_DEATH);
            if (this.disposeOwner) X.getSystemEntity(this.owner), X.getSystemEntity(this.owner).getComponent("ActorSystem_48").removeActor(this.owner);
            else if (this.removePhysics) { var b = this.owner._compMap.PhysicsComponent_42;
                null != b && b.enable(!1) } this.onDeath.emit(a)
        },
        knockPhysics: function(a, b, c, d) { null == d && (d = 1);
            null == c && (c = 0);
            null == b && (b = 0); if (0 != d) { var e = this.owner._compMap.PhysicsComponent_42,
                    f = this.owner._compMap.TransformComponent_66;
                null != e && !e.kinematic && e.setVelocity(b * d * (a._compMap.TransformComponent_66.position.x > f.position.x ? -1 : 1), -c * d) } },
        __class__: Zd
    });
    var nf = function() {
        this._timer = 0;
        this.assetDisplayType = "image";
        this.assetBase = 1;
        this.assetIndex =
            0;
        k.call(this)
    };
    g["stolo.ensys.components.LauncherComponent"] = nf;
    nf.__name__ = ["stolo", "ensys", "components", "LauncherComponent"];
    nf.__super__ = k;
    nf.prototype = l(k.prototype, {
        get_name: function() { return "LauncherComponent_88" },
        onStart: function() { this._timer = this.shotDelay;
            X.getSystemEntity(this.owner);
            this._actors = X.getSystemEntity(this.owner).getComponent("ActorSystem_48");
            X.getSystemEntity(this.owner);
            this._sounds = X.getSystemEntity(this.owner).getComponent("SoundSystem_39");
            this._transform = this.owner._compMap.TransformComponent_66 },
        onStop: function() { k.prototype.onStop.call(this);
            this._sounds = this._actors = this._transform = null },
        onUpdate: function(a) { 0 < this._timer && (this._timer -= a) },
        __class__: nf
    });
    var Bh = function() { this.angleSpread = 50;
        this.projectiles = 0;
        nf.call(this) };
    g["stolo.ensys.components.ExploderComponent"] = Bh;
    Bh.__name__ = ["stolo", "ensys", "components", "ExploderComponent"];
    Bh.__super__ = nf;
    Bh.prototype = l(nf.prototype, { __class__: Bh });
    var Ch = function() {
        this._removeIn = 0;
        this.onExploded = new I;
        this.onExplode = new I;
        this.ignoreActors = [];
        this.exploded = !1;
        k.call(this)
    };
    g["stolo.ensys.components.ProjectileComponent"] = Ch;
    Ch.__name__ = ["stolo", "ensys", "components", "ProjectileComponent"];
    Ch.__super__ = k;
    Ch.prototype = l(k.prototype, {
        get_name: function() { return "ProjectileComponent_89" },
        onStart: function() {
            k.prototype.onStart.call(this);
            X.getSystemEntity(this.owner);
            this._actorSystem = X.getSystemEntity(this.owner).getComponent("ActorSystem_48");
            X.getSystemEntity(this.owner);
            this._physicSystem = X.getSystemEntity(this.owner).getComponent("PhysicSystem_44");
            X.getSystemEntity(this.owner);
            this._soundSystem = X.getSystemEntity(this.owner).getComponent("SoundSystem_39");
            this._sprite = this.owner._compMap.Sprite_19;
            this._animation = null != u.instance(this.owner._compMap.Sprite_19, Ob) ? this._sprite : null;
            this._physics = this.owner._compMap.PhysicsComponent_42;
            this._transform = this.owner._compMap.TransformComponent_66;
            null != this._physics && (this._physics.addContactType("PROJECTILE"), this._physicSystem.addContactListener(ma.PRELISTENER, Aa.COLLISION, "PROJECTILE", this.target,
                this.owner, n(this, this.onContactBegin)));
            this._removeIn = this.expire;
            if (null != this._animation) { this.velocityRotation && this._animation.rotation.set__(0); var a = this._animation.animation;
                null != a && a.hasAnim("shoot") && a.hasAnim("idle") && (a.gotoAndPlay(["shoot", "idle"]).loop = !1) }
        },
        onStop: function() {
            this._physicSystem.removeContactListener(ma.PRELISTENER, Aa.COLLISION, "PROJECTILE", this.target, this.owner);
            k.prototype.onStop.call(this);
            this._soundSystem = this._physicSystem = this._actorSystem = this._transform = this._animation =
                this._physics = this._sprite = this.onExploded = this.onExplode = this.ignoreActors = null
        },
        onUpdate: function(a) { if (this.exploded || 0 < this.expire) 0 < this._removeIn ? this._removeIn -= a : this._actorSystem.removeActor(this.owner);!this.exploded && this.velocityRotation && (a = this._physics.getVelocity(), null != this._animation && (a.zpp_inner.validate(), 0 > a.zpp_inner.y ? this._animation.rotation.set__(0) : this._animation.rotation.set__(180))) },
        onContactBegin: function(a) {
            var b = a._compMap.PhysicsComponent_42;
            if (null == b || b.hasContactType("PROJECTILE") &&
                this.ignoreProjectiles) return !1;
            for (var b = 0, c = this.ignoreActors; b < c.length;) { var d = c[b];++b; if (d == a) return !1 } this.exploded || this.explode();
            return !0
        },
        explode: function() {
            if (!this.exploded) {
                this.onExplode.emit(this.owner);
                this.exploded = !0;
                this._removeIn = this.removeAfter;
                if (null != this._animation) {
                    var a = this._animation.animation;
                    null != a && a.hasAnim("explode") && (a.gotoAndPlay("explode", { onComplete: n(this, this.onExplodeComplete) }), this._removeIn = 999, "" != this.explodeSound && this._soundSystem.play(this.explodeSound,
                        this.owner, "PROJECTILE"), this._animation.rotation.set__(0), this._transform.rotation = 0, this._transform.fixedRotation = !0)
                } else this.onExploded.emit(this.owner);
                null != this._physics && this.stopPhysicOnExplode && (this._physics.enable(!1), "" != this.hitSound && this._soundSystem.play(this.hitSound, this.owner, "PROJECTILE"))
            }
        },
        onExplodeComplete: function() { this._removeIn = -1;
            null != this._animation && this._animation.animation.stop();
            this.onExploded.emit(this.owner) },
        __class__: Ch
    });
    var Dh = function() {
        this._activated = !1;
        k.call(this)
    };
    g["stolo.ensys.components.PlatformComponent"] = Dh;
    Dh.__name__ = ["stolo", "ensys", "components", "PlatformComponent"];
    Dh.__super__ = k;
    Dh.prototype = l(k.prototype, {
        get_name: function() { return "PlatformComponent_92" },
        onStart: function() {
            this._physics = this.owner._compMap.PhysicsComponent_42;
            this._initPosition = new ob(this.owner._compMap.TransformComponent_66.position.x, this.owner._compMap.TransformComponent_66.position.y);
            this._script = this.owner._compMap.Script_62;
            null == this._script && (this._script =
                new Bd, this.owner.add(this._script));
            this._activated && (this._activated = !1);
            this.activate()
        },
        onStop: function() { k.prototype.onStop.call(this);
            this._position = this._sequence = this._physics = this._script = null },
        onUpdate: function(a) { null != this._position && (this._position.update(a), this._physics.setPosition(this._position.x._value, this._position.y._value, 0.6)) },
        startSequence: function() {
            if (!this.repeat && null != this._sequence) this._script.run(this._sequence);
            else if (!(null == this.sequence || null != this._sequence)) {
                var a =
                    this.sequence.actions;
                this._position = new fe(this._initPosition.x, this._initPosition.y);
                var b = { x: this._position.x, y: this._position.y, offsetX: this._initPosition.x, offsetY: this._initPosition.y };
                null == this.sequence.loop && (this.sequence.loop = !0);
                this.repeat = this.sequence.yoyo || this.sequence.loop;
                this._sequence = Xa.getMovementSequence(a, b, this.sequence.loop, this.sequence.yoyo, this.sequence.delay);
                this._sequence.add(new Db(n(this, this.onSequenceComplete)));
                this._script.run(this._sequence)
            }
        },
        onSequenceComplete: function() {
            null !=
                this._script && (this.repeat ? this._script.run(this._sequence) : this._activated = !1)
        },
        activate: function() { this._activated || (this._activated = !0, null != this.sequence && this.startSequence()) },
        __class__: Dh
    });
    var Pf = function() { k.call(this) };
    g["stolo.mods.components.ModsComponent"] = Pf;
    Pf.__name__ = ["stolo", "mods", "components", "ModsComponent"];
    Pf.__super__ = k;
    Pf.prototype = l(k.prototype, {
        get_name: function() { return "ModsComponent_73" },
        onStart: function() { k.prototype.onStart.call(this);
            null != this.mods && this.applyMods(this.mods) },
        applyMods: function(a) { for (var b = this.owner.firstComponent; null != b;) { var c = L.getComponentName(b),
                    c = y.field(a, c);
                null != c && this.applyComponentMods(b, c);
                b = b.next } },
        applyComponentMods: function(a, b) { H.applyMods(a, b) },
        __class__: Pf
    });
    var Eh = function() { k.call(this) };
    g["stolo.mods.components.StatsModsComponent"] = Eh;
    Eh.__name__ = ["stolo", "mods", "components", "StatsModsComponent"];
    Eh.__super__ = Pf;
    Eh.prototype = l(Pf.prototype, {
        onStart: function() {
            Pf.prototype.onStart.call(this);
            null != this.stats && this.applyStats(this.stats,
                this.source)
        },
        applyStats: function(a, b) { null == b && (b = this.source);
            null == b && (b = Eh.defaultSource); if (null == b) throw "No statistic source to apply!"; for (var c = 0, d = y.fields(a); c < d.length;) { var e = d[c];++c; var f = 0;
                Object.prototype.hasOwnProperty.call(a, e) && (f = y.field(a, e));
                e = y.field(b, e);
                null != e && (f = e[f], null != f && this.applyMods(f)) } },
        __class__: Eh
    });
    var sn = function() {};
    g["stolo.ensys.components.DefaultComponents"] = sn;
    sn.__name__ = ["stolo", "ensys", "components", "DefaultComponents"];
    var Qf = function(a) {
        this.parallax = { x: 1, y: 1 };
        yd.call(this);
        this.data = a;
        this._name = a.name;
        null != a.parallax && (this.parallax.x = u.parseFloat(a.parallax.x), this.parallax.y = u.parseFloat(a.parallax.y));
        a.alpha && this.setAlpha(a.alpha)
    };
    g["stolo.ensys.display.LayerSprite"] = Qf;
    Qf.__name__ = ["stolo", "ensys", "display", "LayerSprite"];
    Qf.__super__ = yd;
    Qf.prototype = l(yd.prototype, { getName: function() { return this._name }, move: function(a, b) { null != this.offset && (a += this.offset.x, b += this.offset.y);
            this.setXY(a * this.parallax.x, b * this.parallax.y) }, __class__: Qf });
    var Bk = function(a, b, c, d) { null == d && (d = 100);
        this._width = this._height = 1E3;
        this._size = 100;
        Qf.call(this, a);
        this._width = b;
        this._height = c;
        this._size = d;
        this.setAlpha(0.4);
        this.construct() };
    g["stolo.ensys.display.LayerGridSprite"] = Bk;
    Bk.__name__ = ["stolo", "ensys", "display", "LayerGridSprite"];
    Bk.__super__ = Qf;
    Bk.prototype = l(Qf.prototype, {
        draw: function(a) { a.drawTexture(this._texture, (-Math.floor(this.x._value / this._size) - 1) * this._size, (-Math.floor(this.y._value / this._size) - 1) * this._size) },
        construct: function() {
            var a =
                Math.ceil(this._width / this._size) + 1,
                b = Math.ceil(this._height / this._size) + 1;
            this._gridTexture = D.getPack("debug").getTexture("grid");
            this._texture = w._platform.getRenderer().createTexture(a * this._size, b * this._size);
            for (var c = this._texture.get_graphics(), d = 0; d < a;)
                for (var e = d++, f = 0; f < b;) { var j = f++;
                    c.drawTexture(this._gridTexture, e * this._size, j * this._size) }
        },
        __class__: Bk
    });
    var Ib = function() {
        this.storagePrefix = "editor";
        this.roundValues = !0;
        this.preventReload = !1;
        this.onEditorLoaded = new ia;
        this.onEditorReady =
            new ia
    };
    g["stolo.ensys.editor.EditorSystem"] = Ib;
    Ib.__name__ = ["stolo", "ensys", "editor", "EditorSystem"];
    Ib.__super__ = qc;
    Ib.prototype = l(qc.prototype, {
        buildSubSystems: function() {
            qc.prototype.buildSubSystems.call(this);
            this.level.onLevelLoaded.connect(n(this, this.onLevelLoaded));
            this.camera.enabled = !1;
            this.clipboard = new Ck;
            this.owner.add(this.clipboard);
            this.tool = new Dk;
            this.owner.add(this.tool);
            this.shortcut = new Ek;
            this.owner.add(this.shortcut);
            this.history = new Fk;
            this.history.onCommand.connect(n(this,
                this.onCommand));
            this.owner.add(this.history);
            this.selection = new Gk;
            this.owner.add(this.selection);
            this.document = new Hk;
            this.owner.add(this.document);
            this.rendererState = new Ik(this);
            this.owner.add(this.rendererState);
            this.dialog = new Jk;
            this.owner.add(this.dialog);
            this.logic = new Kk;
            this.logic.onComplete.connect(n(this, this.onLogicComplete));
            this.owner.add(this.logic);
            window.onbeforeunload = n(this, this.onWindowBeforeUnload);
            fc.focusOnCanvas();
            this.onEditorReady.emit()
        },
        onLevelLoaded: function() { ta.main.load() },
        onCommand: function() { this.document.isDirty = !0 },
        onWindowBeforeUnload: function() { if (this.document.isDirty || this.preventReload) { if (this.document.isDirty) this.document["export"](); return "Dude, are you sure you want to leave? Think of the kittens!" } return null },
        buildLevel: function() { this.level = new Lk;
            this.owner.add(this.level) },
        onLogicComplete: function() { this.onEditorLoaded.emit() },
        __class__: Ib
    });
    var Jb = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.Action"] = Jb;
    Jb.__name__ = ["stolo", "ensys",
        "editor", "actions", "Action"
    ];
    Jb.prototype = { execute: function() { throw "action execute not implemented"; }, __class__: Jb };
    var Mk = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.BringToFrontAction"] = Mk;
    Mk.__name__ = ["stolo", "ensys", "editor", "actions", "BringToFrontAction"];
    Mk.__super__ = Jb;
    Mk.prototype = l(Jb.prototype, {
        execute: function() {
            var a = this._system.selection.getAll();
            if (0 != a.length)
                if (1 == a.length) this._system.history.add(new Rf(a[0], !0));
                else {
                    for (var b = new Sf, c = 0; c < a.length;) {
                        var d = a[c];
                        ++c;
                        b.add(new Rf(d, !0))
                    }
                    this._system.history.add(b)
                }
        },
        __class__: Mk
    });
    var Fh = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.CopyAction"] = Fh;
    Fh.__name__ = ["stolo", "ensys", "editor", "actions", "CopyAction"];
    Fh.__super__ = Jb;
    Fh.prototype = l(Jb.prototype, { execute: function() { var a = this._system.selection.getAll(); if (0 != a.length) { for (var b = [], c = 0; c < a.length;) { var d = a[c];++c;
                    d = d._compMap.EditorMetaComponent_55;
                    null != d && b.push(H.clone(d.getTemplate())) } this._system.clipboard.set(b) } }, __class__: Fh });
    var Nk =
        function(a) { this._system = a };
    g["stolo.ensys.editor.actions.DuplicateAction"] = Nk;
    Nk.__name__ = ["stolo", "ensys", "editor", "actions", "DuplicateAction"];
    Nk.__super__ = Jb;
    Nk.prototype = l(Jb.prototype, { execute: function() {
            (new Fh(this._system)).execute();
            (new Gh(this._system)).execute() }, __class__: Nk });
    var Gh = function(a) { this.offset = new ob(10, 10);
        this._system = a };
    g["stolo.ensys.editor.actions.PasteAction"] = Gh;
    Gh.__name__ = ["stolo", "ensys", "editor", "actions", "PasteAction"];
    Gh.__super__ = Jb;
    Gh.prototype = l(Jb.prototype, {
        execute: function() { var a = H.clone(this._system.clipboard.get()); if (0 != a.length) { for (var b = new Sf, c = 0; c < a.length;) { var d = a[c];++c;
                    b.add(this.createSpawnCommand(d)) } this._system.history.add(b);
                this._system.selection.clear();
                a = 0; for (b = b.get_commands(); a < b.length;) c = b[a], ++a, this._system.selection.add(U.__cast(c, tg).actor) } },
        createSpawnCommand: function(a) {
            a = H.clone(a);
            null == a.transform && (a.transform = {});
            var b = a.transform.position;
            null == b && (b = a.transform.position = { x: 0, y: 0 });
            b.x += this.offset.x;
            b.y += this.offset.y;
            return new tg(this._system, a.template.key, b, a)
        },
        __class__: Gh
    });
    var Ok = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.RedoAction"] = Ok;
    Ok.__name__ = ["stolo", "ensys", "editor", "actions", "RedoAction"];
    Ok.__super__ = Jb;
    Ok.prototype = l(Jb.prototype, { execute: function() { this._system.history.redo() }, __class__: Ok });
    var Pk = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.SendToBackAction"] = Pk;
    Pk.__name__ = ["stolo", "ensys", "editor", "actions", "SendToBackAction"];
    Pk.__super__ = Jb;
    Pk.prototype = l(Jb.prototype, { execute: function() { var a = this._system.selection.getAll(); if (0 != a.length)
                if (1 == a.length) this._system.history.add(new Rf(a[0], !1));
                else { for (var b = new Sf, c = 0; c < a.length;) { var d = a[c];++c;
                        b.add(new Rf(d, !1)) } this._system.history.add(b) } }, __class__: Pk });
    var Qk = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.TestAction"] = Qk;
    Qk.__name__ = ["stolo", "ensys", "editor", "actions", "TestAction"];
    Qk.__super__ = Jb;
    Qk.prototype = l(Jb.prototype, {
        execute: function() { this._system.history.add(new Rk(this._system)) },
        __class__: Qk
    });
    var Sk = function(a) { this._system = a };
    g["stolo.ensys.editor.actions.UndoAction"] = Sk;
    Sk.__name__ = ["stolo", "ensys", "editor", "actions", "UndoAction"];
    Sk.__super__ = Jb;
    Sk.prototype = l(Jb.prototype, { execute: function() { this._system.history.undo() }, __class__: Sk });
    var Oa = function(a) { null == a && (a = Y.getClassName(Y.getClass(this)));
        this.label = this.name = a };
    g["stolo.ensys.editor.commands.Command"] = Oa;
    Oa.__name__ = ["stolo", "ensys", "editor", "commands", "Command"];
    Oa.prototype = {
        redo: function() {
            throw "redo not implemented";
        },
        undo: function() { throw "undo not implemented"; },
        __class__: Oa
    };
    var Sf = function() { this._commands = [];
        Oa.call(this, "Compound") };
    g["stolo.ensys.editor.commands.CompoundCommand"] = Sf;
    Sf.__name__ = ["stolo", "ensys", "editor", "commands", "CompoundCommand"];
    Sf.__super__ = Oa;
    Sf.prototype = l(Oa.prototype, {
        get_commands: function() { return this._commands },
        add: function(a) { this._commands.push(a) },
        redo: function() { for (var a = 0, b = this._commands; a < b.length;) { var c = b[a];++a;
                c.redo() } },
        undo: function() {
            for (var a = 0, b = this._commands; a <
                b.length;) { var c = b[a];++a;
                c.undo() }
        },
        __class__: Sf,
        __properties__: { get_commands: "get_commands" }
    });
    var Rf = function(a, b) { null == b && (b = !1);
        Oa.call(this, b ? "Bring actor to front" : "Send actor to back");
        this._actor = a;
        this._container = a.parent._compMap.Sprite_19;
        this._index = this._container.getChildIndex(a);
        this._bringToFront = b };
    g["stolo.ensys.editor.commands.DepthCommand"] = Rf;
    Rf.__name__ = ["stolo", "ensys", "editor", "commands", "DepthCommand"];
    Rf.__super__ = Oa;
    Rf.prototype = l(Oa.prototype, {
        redo: function() {
            this._bringToFront ?
                this._container.bringToFront(this._actor) : this._container.sendToBack(this._actor)
        },
        undo: function() { this._container.setChildIndex(this._actor, this._index) },
        __class__: Rf
    });
    var Tk = function(a, b, c, d) { var e = b._compMap.TemplateComponent_47;
        Oa.call(this, "Move actor '" + (null != e ? e.key : "unknown") + "' from " + u.string(c) + " to " + u.string(d));
        this.system = a;
        this.actor = b;
        this.from = c;
        this.to = d };
    g["stolo.ensys.editor.commands.MoveCommand"] = Tk;
    Tk.__name__ = ["stolo", "ensys", "editor", "commands", "MoveCommand"];
    Tk.__super__ =
        Oa;
    Tk.prototype = l(Oa.prototype, { redo: function() { this.system.logic.setDefaultTool();
            this.system.tool.getCurrent().moveActor(this.to.x, this.to.y, this.actor, !1, !1) }, undo: function() { this.system.logic.setDefaultTool();
            this.system.tool.getCurrent().moveActor(this.from.x, this.from.y, this.actor, !1, !1) }, __class__: Tk });
    var Uk = function(a, b, c, d, e) { Oa.call(this, "Rotate actor '" + b._compMap.TemplateComponent_47.key + "' from " + c + " to " + d);
        this.system = a;
        this.actor = b;
        this.from = c;
        this.to = d;
        this.snap = e };
    g["stolo.ensys.editor.commands.RotateCommand"] =
        Uk;
    Uk.__name__ = ["stolo", "ensys", "editor", "commands", "RotateCommand"];
    Uk.__super__ = Oa;
    Uk.prototype = l(Oa.prototype, { redo: function() { this.system.logic.setDefaultTool();
            this.system.tool.getCurrent().rotateActor(this.to, this.actor, !1, this.snap) }, undo: function() { this.system.logic.setDefaultTool();
            this.system.tool.getCurrent().rotateActor(this.from, this.actor, !1, this.snap) }, __class__: Uk });
    var tg = function(a, b, c, d) {
        Oa.call(this, "Spawn actor '" + b + "'");
        this.system = a;
        this.templateName = b;
        this.position = c;
        this.data =
            d
    };
    g["stolo.ensys.editor.commands.SpawnCommand"] = tg;
    tg.__name__ = ["stolo", "ensys", "editor", "commands", "SpawnCommand"];
    tg.__super__ = Oa;
    tg.prototype = l(Oa.prototype, { redo: function() { var a = { template: { key: this.templateName }, transform: { position: this.position } };
            null != this.data && (a = H.merge(this.data, a, !0));
            this.actor = this.system.level.spawnActor(a);
            this.system.selection.set(this.actor) }, undo: function() { this.system.actors.removeActor(this.actor) }, __class__: tg });
    var Rk = function(a, b) {
        null == b && (b = "trace command");
        Oa.call(this, "Trace");
        this.label = b;
        this._editor = a;
        this._text = b
    };
    g["stolo.ensys.editor.commands.TraceCommand"] = Rk;
    Rk.__name__ = ["stolo", "ensys", "editor", "commands", "TraceCommand"];
    Rk.__super__ = Oa;
    Rk.prototype = l(Oa.prototype, { redo: function() { null }, undo: function() { null }, __class__: Rk });
    var Hh = function() { this._disposer = new Ta;
        this.smallStepX = this.smallStepY = -1;
        this.smallStep = 10;
        this.stepX = this.stepY = -1;
        this.step = 100;
        this.buttonSize = new ob(30, 30);
        this.isActive = !1;
        this.fontStyle = Ib.DEFAULT_FONT;
        k.call(this) };
    g["stolo.ensys.editor.component.BaseEditorResizer"] = Hh;
    Hh.__name__ = ["stolo", "ensys", "editor", "component", "BaseEditorResizer"];
    Hh.__super__ = k;
    Hh.prototype = l(k.prototype, {
        get_name: function() { return "BaseEditorResizer_70" },
        onStart: function() {
            k.prototype.onStart.call(this);
            0 > this.stepX && (this.stepX = this.step);
            0 > this.stepY && (this.stepY = this.step);
            0 > this.smallStepX && (this.smallStepX = this.smallStep);
            0 > this.smallStepY && (this.smallStepY = this.smallStep);
            this._buttonsX = this.addButtons(n(this, this.onIncreaseX),
                n(this, this.onDecreaseX));
            this._buttonsX._compMap.Sprite_19.setXY(0, -this.buttonSize.y);
            this._buttonsY = this.addButtons(n(this, this.onIncreaseY), n(this, this.onDecreaseY));
            this._buttonsY._compMap.Sprite_19.setXY(0, 0);
            this._buttonsY._compMap.Sprite_19.setRotation(90);
            this.owner._compMap.EditorMetaComponent_55.onSelect.connect(n(this, this.onSelect));
            this.owner._compMap.EditorMetaComponent_55.onDeselect.connect(n(this, this.onDeselect));
            this.onDeselect(null)
        },
        onSelect: function() {
            this.isActive = !0;
            this._buttonsX._compMap.Sprite_19.set_visible(!0);
            this._buttonsY._compMap.Sprite_19.set_visible(!0);
            this._disposer.add(w._platform.getKeyboard().up.connect(n(this, this.onKeyUp)))
        },
        onKeyUp: function(a) { switch (a.key[1]) {
                case 89:
                    this.onIncreaseY(null); break;
                case 88:
                    this.onDecreaseY(null); break;
                case 82:
                    this.onIncreaseX(null); break;
                case 87:
                    this.onDecreaseX(null) } },
        smallSteps: function() { return w._platform.getKeyboard().isDown(Hh.SMALL_STEP_MODIFIER) },
        onDeselect: function() {
            this.isActive = !1;
            this._buttonsX._compMap.Sprite_19.set_visible(!1);
            this._buttonsY._compMap.Sprite_19.set_visible(!1);
            this._disposer.dispose()
        },
        addButtons: function(a, b) { var c = new A;
            c.add(new s);
            this.owner.addChild(c); var d = this.addButton("-", b);
            c.addChild(d.owner);
            d = this.addButton("+", a);
            d.setXY(this.buttonSize.x, 0);
            c.addChild(d.owner); return c },
        addButton: function(a, b) {
            var c = new A,
                d = new wb(10053375, this.buttonSize.x, this.buttonSize.y);
            d.alpha.set__(0.3);
            c.add(d);
            c = G.createTextSprite(a, this.fontStyle, c);
            c.set_pointerEnabled(!1);
            c.set_align(Z.Center);
            c.centerAnchor();
            c.setXY(this.buttonSize.x / 2, this.buttonSize.y / 2);
            d.get_pointerDown().connect(b);
            return d
        },
        onIncreaseX: function() { this.smallSteps() },
        onDecreaseX: function() { this.smallSteps() },
        onIncreaseY: function() { this.smallSteps() },
        onDecreaseY: function() { this.smallSteps() },
        __class__: Hh
    });
    var Ih = function() { k.call(this) };
    g["stolo.ensys.editor.component.EditorRemover"] = Ih;
    Ih.__name__ = ["stolo", "ensys", "editor", "component", "EditorRemover"];
    Ih.__super__ = k;
    Ih.prototype = l(k.prototype, {
        get_name: function() { return "EditorRemover_61" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this.owner._internal_getFromParents("ActorSystem_48").removeActor(this.owner)
        },
        __class__: Ih
    });
    var Vk = function(a) { this.moveEnabled = !0;
        this.onDeselect = new I;
        this.onSelect = new I;
        k.call(this);
        this._template = null == a ? {} : a };
    g["stolo.ensys.editor.component.EditorMetaComponent"] = Vk;
    Vk.__name__ = ["stolo", "ensys", "editor", "component", "EditorMetaComponent"];
    Vk.__super__ = k;
    Vk.prototype = l(k.prototype, {
        get_name: function() { return "EditorMetaComponent_55" },
        onAdded: function() { k.prototype.onAdded.call(this) },
        onRemoved: function() { k.prototype.onRemoved.call(this) },
        updateProperty: function(a, b, c) { Object.prototype.hasOwnProperty.call(this._template, a) || y.setProperty(this._template, a, {});
            a = y.getProperty(this._template, a);
            y.setProperty(a, b, c) },
        getTemplate: function() { return this._template },
        __class__: Vk
    });
    var Wk = function() { this.selection = "";
        s.call(this) };
    g["stolo.ensys.editor.component.EditorSelectionInfo"] = Wk;
    Wk.__name__ = ["stolo", "ensys", "editor", "component", "EditorSelectionInfo"];
    Wk.__super__ = s;
    Wk.prototype = l(s.prototype, {
        onStart: function() {
            s.prototype.onStart.call(this);
            this._text = M.getTextSprite("debug_font");
            this.owner.addChild((new A).add(this._text))
        },
        onUpdate: function(a) { s.prototype.onUpdate.call(this, a);
            null != this.thumbnail ? this._text.set_text(this.thumbnail) : null != this.current && this.updateInfo() },
        show: function(a) { this.current = a;
            this.updateInfo() },
        updateInfo: function() {
            if (!(null == this.current || null == this.current.firstComponent)) {
                var a = this.current._compMap.TransformComponent_66;
                this.selection = this.current._compMap.TemplateComponent_47.key + ": " + u.string(a.position.x) +
                    "," + u.string(a.position.y);
                this._text.set_text(this.selection)
            }
        },
        hide: function() { this.current = null;
            this._text.set_text(this.selection = "") },
        __class__: Wk
    });
    var ta = function(a, b, c, d) { this.folders = new K;
        s.call(this);
        this._system = b;
        null == c && (null == ta.main && (ta.main = new Jh(b)), c = ta.main.gui);
        this.id = a;
        this.gui = c;
        null != d && H.configure(this, d) };
    g["stolo.ensys.editor.dialog.Dialog"] = ta;
    ta.__name__ = ["stolo", "ensys", "editor", "dialog", "Dialog"];
    ta.createGui = function(a) { return new dat.GUI(a) };
    ta.__super__ = s;
    ta.prototype =
        l(s.prototype, {
            onAdded: function() { s.prototype.onAdded.call(this) },
            getFolder: function(a) { var b = this.folders.get(a); if (null == b) { var c = b = this.gui.addFolder(a);
                    this.folders.set(a, c);
                    c } return b },
            getRangeController: function(a, b, c, d, e) {
                null == e && (e = -1);
                var f = null;
                if (c instanceof Array && null == c.__enum__) f = d.add(a, b, c[0], c[1]).listen();
                else if (0 < c) {
                    var j = null;
                    0 >= e && (e = 1, 10 > c && (e = 0.25), 5 > c && (e = 0.1), 1 >= c && (e = 0.05), 500 < c && (e = 10));
                    1 > e && (j = y.field(a, b), a[b] = 0.1);
                    f = d.add(a, b, 0, c).listen().step(e);
                    1 > e && (a[b] = j, f[b] =
                        j)
                }
                return f
            },
            __class__: ta
        });
    var Xk = function(a) { ta.call(this, "editor", a) };
    g["stolo.ensys.editor.dialog.EditorDialog"] = Xk;
    Xk.__name__ = ["stolo", "ensys", "editor", "dialog", "EditorDialog"];
    Xk.__super__ = ta;
    Xk.prototype = l(ta.prototype, {
        onStart: function() {
            var a = this;
            ta.prototype.onStart.call(this);
            this._folder = this.getFolder("Editor");
            this._data = {
                snapX: this._system.logic.snapX,
                snapY: this._system.logic.snapY,
                snapRotation: this._system.logic.snapRotation,
                enablePhysics: this._system.logic.get_enablePhysics(),
                launch: function() {
                    var b =
                        a._system.document["export"](!1),
                        c = a._system.document.getName();
                    na.set(c, b);
                    Ic.getURL("./?level=" + c + "&levels_pack=storage")
                },
                "export": function() { a._system.document["export"]() }
            };
            this.gui.remember(this._data);
            this._folder.add(this._system.selection.info, "selection").listen();
            this._folder.add(this._data, "snapX", 0, 100).step(10).listen().onChange(function(b) { a._system.logic.snapX = b });
            this._folder.add(this._data, "snapY", 0, 100).step(10).listen().onChange(function(b) { a._system.logic.snapY = b });
            this._folder.add(this._data,
                "snapRotation", 0, 180).step(5).listen().onChange(function(b) { a._system.logic.snapRotation = b });
            this._folder.add(this._data, "enablePhysics").onChange(function(b) { a._system.logic.set_enablePhysics(b) });
            this._folder.add(this._data, "export");
            this._folder.add(this._data, "launch");
            var b = Ic.getUrlParams();
            if (0 != b.width && 0 != b.height) {
                var c = b.width,
                    d = b.height;
                if (!(1E4 < c || 1E4 < d)) {
                    var b = this._system.renderer.addLayer({ name: "borders", parallax: { x: 1, y: 1 }, editor: { locked: !0 } }),
                        e = w._platform.getRenderer().createTexture(c,
                            d),
                        f = e.get_graphics();
                    f.fillRect(16777215, 0, 0, c, 2);
                    f.fillRect(16777215, 0, d - 2, c, 2);
                    f.fillRect(16777215, 0, 0, 2, d);
                    f.fillRect(16777215, c - 2, 0, 2, d);
                    f.translate(0.5 * c, 0.5 * d);
                    f.fillRect(16777215, -10, -1, 20, 2);
                    f.fillRect(16777215, -1, -10, 2, 20);
                    c = new V(e);
                    c.set_pointerEnabled(!1);
                    b.owner.addChild((new A).add(c))
                }
            }
        },
        onUpdate: function(a) {
            ta.prototype.onUpdate.call(this, a);
            this._data.snapX = this._system.logic.snapX;
            this._data.snapY = this._system.logic.snapY;
            this._data.snapRotation = this._system.logic.snapRotation;
            this._data.enablePhysics = this._system.logic.get_enablePhysics()
        },
        __class__: Xk
    });
    var Yk = function(a) { this._opened = !0;
        this._folders = [];
        this.skipTemplates = ["disposer", "editorSelection"];
        ta.call(this, "entity", a, ta.createGui());
        this._selection = a.selection };
    g["stolo.ensys.editor.dialog.EntityDialog"] = Yk;
    Yk.__name__ = ["stolo", "ensys", "editor", "dialog", "EntityDialog"];
    Yk.__super__ = ta;
    Yk.prototype = l(ta.prototype, {
        onStart: function() {
            ta.prototype.onStart.call(this);
            this._selection.onSelect.connect(n(this, this.onSelect));
            this._selection.onDeselect.connect(n(this, this.onDeselect))
        },
        addComponent: function(a) { var b = L.getComponentName(a);!(null != this.skipTemplates && -1 < this.skipTemplates.indexOf(b)) && null != b && (b = this.gui.addFolder(b), this._folders.push(b), this.expose(a, b, ["_flags"])) },
        onSelect: function(a) {
            if (null != this._currentEntity) this.onDeselect();
            this._currentEntity = a;
            null == this.gui && (this.gui = ta.createGui({ closed: !this._opened }));
            this.template = a._compMap.TemplateComponent_47.key;
            this.titleController = this.gui.add(this,
                "template");
            for (a = a.firstComponent; null != a;) this.addComponent(a), a = a.next
        },
        onDeselect: function() { this._currentEntity = null;
            null != this.gui && (this._opened = !this.gui.closed, this.gui.destroy(), this.gui = null) },
        expose: function(a, b, c, d, e, f) {
            for (var j = this, h = [], g = null, g = null, i = [], k = this.getExcludes(a), l = 0, m = y.fields(a); l < m.length;) {
                var n = m[l];
                ++l;
                !(null != c && -1 < c.indexOf(n)) && !(null != k && -1 < k.indexOf(n)) && (g = y.field(a, n), "boolean" != typeof g && "string" != typeof g && "number" != typeof g && (g | 0) !== g ? 0 < y.fields(g).length &&
                    Y["typeof"](g) == O.TObject && this.expose(g, b.addFolder(n), c, a, n) : i.push(n))
            }
            if (0 == i.length) return null;
            for (c = 0; c < i.length;) g = [i[c]], ++c, null != f && f.exists(g[0]) ? (k = f.get(g[0]), g = this.getRangeController(a, g[0], k, b)) : g = b.add(a, g[0]).listen().onChange(function(b) { return function(c) { var f = !1;
                    d ? (f = U.__instanceof(d, Oe), j.updateComponentMeta(d, e)) : (f = U.__instanceof(a, Oe), j.updateProperty(a, b[0], c));
                    f && j.updateTransform() } }(g)), null != g && h.push(h);
            this.addMethods(a, b);
            return h
        },
        getExcludes: function(a) {
            a = Y.getClass(a);
            if (null == a) return null;
            a = y.getProperty(a, "EDITOR_EXCLUDE");
            return null == a ? null : a
        },
        addMethods: function(a, b) { var c = Y.getClass(a); if (null != c && (c = y.getProperty(c, "EDITOR_METHODS"), null != c))
                for (var d = 0; d < c.length;) { var e = c[d];++d;
                    b.add(a, e) } },
        updateProperty: function(a, b, c) { var d = this._currentEntity._compMap.EditorMetaComponent_55,
                a = L.getComponentName(a);
            d.updateProperty(a, b, c) },
        updateComponentMeta: function(a, b) {
            var c = this._currentEntity._compMap.EditorMetaComponent_55,
                d = L.getComponentName(a),
                e = y.field(a,
                    b);
            c.updateProperty(d, b, e)
        },
        updateTransform: function() { var a = this._currentEntity._compMap.TransformComponent_66;
            this._system.tool.getCurrent().moveActor(a.position.x, a.position.y, this._currentEntity, !1, !1) },
        __class__: Yk
    });
    var Zk = function(a) { ta.call(this, "history", a) };
    g["stolo.ensys.editor.dialog.HistoryDialog"] = Zk;
    Zk.__name__ = ["stolo", "ensys", "editor", "dialog", "HistoryDialog"];
    Zk.__super__ = ta;
    Zk.prototype = l(ta.prototype, {
        onStart: function() {
            var a = this;
            ta.prototype.onStart.call(this);
            this._folder = this.getFolder("History");
            this._data = { undo: function() { a._system.history.undo() }, redo: function() { a._system.history.redo() } };
            this._folder.add(this._data, "redo");
            this._folder.add(this._data, "undo")
        },
        __class__: Zk
    });
    var Jh = function(a) { ta.call(this, "main", a, ta.createGui()) };
    g["stolo.ensys.editor.dialog.MainDialog"] = Jh;
    Jh.__name__ = ["stolo", "ensys", "editor", "dialog", "MainDialog"];
    Jh.__super__ = ta;
    Jh.prototype = l(ta.prototype, {
        onAdded: function() {
            var a = this;
            ta.prototype.onAdded.call(this);
            this._rendererState = this._system.rendererState;
            this.gui._save = this.gui.save;
            this.gui.save = function() { var b = a.gui.preset;
                a.gui._save();
                null != a._rendererState && (a._rendererState.preset = b, a._rendererState.save()) };
            this.gui._revert = this.gui.revert;
            this.gui.revert = function() { var b = a.gui.preset;
                null != a._rendererState && (a._rendererState.preset = b, a._rendererState.load());
                a.gui._revert() }
        },
        load: function() { var a = this,
                b = this.gui.preset;
            this._rendererState.preset = b;
            this._rendererState.load();
            Ie.delay(function() { a.gui.preset = b }, 50) },
        __class__: Jh
    });
    var $k =
        function(a) { this._layersLock = new K;
            ta.call(this, "renderer", a);
            this._renderer = a.renderer };
    g["stolo.ensys.editor.dialog.RendererDialog"] = $k;
    $k.__name__ = ["stolo", "ensys", "editor", "dialog", "RendererDialog"];
    $k.__super__ = ta;
    $k.prototype = l(ta.prototype, {
        onStart: function() {
            var a = this;
            ta.prototype.onStart.call(this);
            this._layers = this._renderer.getLayers();
            this._folder = this.getFolder("Renderer");
            this._data = { x: this._renderer.displacement.x, y: this._renderer.displacement.y, scale: this._renderer.scale };
            this._folder.add(this._data,
                "x").listen().onChange(function(b) { a._renderer.move(b, a._data.y) });
            this._folder.add(this._data, "y").listen().onChange(function(b) { a._renderer.move(a._data.x, b) });
            this._folder.add(this._data, "scale", 0.2, 1).listen().onChange(function(b) { a._renderer.setScale(b) });
            for (var b = this._system.rendererState.layersAlphaData, c = this._system.rendererState.layersLockedData, d = this._folder.addFolder("Layers lock"), e = this._folder.addFolder("Layers alpha"), f = 0, j = this._layers; f < j.length;) {
                var h = [j[f]];
                ++f;
                var g = h[0].getName(),
                    i = h[0].data.editor;
                if (null == i || !0 != i.unlockable) y.setProperty(c, g, 0 == (h[0]._flags & 4)), i = d.add(c, g).listen().onChange(function(a) { return function(b) { a[0].set_pointerEnabled(!b) } }(h)), this._layersLock.set(g, i), i;
                y.setProperty(b, g, h[0].alpha._value);
                e.add(b, g, 0, 1).listen().onChange(function(a) { return function(b) { a[0].setAlpha(b) } }(h))
            }
            this._system.rendererState.onLoad.connect(n(this, this.onRenderStateLoaded))
        },
        onRenderStateLoaded: function() {
            for (var a, b = this._layersLock.keys(); b.hasNext();) {
                var c = b.next();
                a = this._layersLock.get(c);
                a.setValue(y.field(this._system.rendererState.layersLockedData, c))
            }
        },
        onUpdate: function(a) { ta.prototype.onUpdate.call(this, a);
            this._data.scale = this._renderer.scale;
            this._data.x = this._renderer.displacement.x;
            this._data.y = this._renderer.displacement.y },
        __class__: $k
    });
    var Jc = function(a) { this._hasDisplay = !1;
        this.padding = 2;
        s.call(this);
        this._template = a;
        this.templateKey = this._template.template.key };
    g["stolo.ensys.editor.dialog.TemplateThumbnail"] = Jc;
    Jc.__name__ = ["stolo", "ensys",
        "editor", "dialog", "TemplateThumbnail"
    ];
    Jc.getDisplayComponent = function(a) { for (var b = 0, a = y.fields(a); b < a.length;) { var c = a[b];++b; if (-1 != Jc.spriteComponents.indexOf(c)) return c } return null };
    Jc.__super__ = s;
    Jc.prototype = l(s.prototype, {
        onAdded: function() {
            s.prototype.onAdded.call(this);
            this._background = new wb(16777215, 50, 50);
            this.owner.addChild((new A).add(this._background));
            try { this.createSimplifiedActor(Jc.getDisplayComponent(this._template)) } catch (a) {
                if (U.__instanceof(a, String)) this.createSimplifiedActor();
                else throw a;
            }
            this._textSprite = M.getTextSprite("debug_font");
            this._textSprite.set_text(this.templateKey);
            this.owner.addChild((new A).add(this._textSprite))
        },
        createSimplifiedActor: function(a) {
            null != this._displaySprite && null != this._displaySprite.owner && (this._displaySprite.owner.parent.removeChild(this._displaySprite.owner), this._displaySprite = null);
            var b = { transform: {} };
            null != this._template.transform && (H.configure(b.transform, this._template.transform), b.transform.fixed = !0);
            null != a ? (this._hasDisplay = !0, y.setField(b, a, H.clone(y.field(this._template, a)))) : (this._hasDisplay = !1, b.image = { pack: "debug", asset: "sprite" });
            null != this._template.customization && (b.customization = H.clone(this._template.customization));
            a = L.create(b);
            this._displaySprite = a._compMap.Sprite_19;
            U.__cast(this._displaySprite, R).offset = null;
            U.__cast(this._displaySprite, R).applyOffset();
            this._displaySprite.centerAnchor();
            this.owner.addChild(a)
        },
        onStart: function() { s.prototype.onStart.call(this) },
        setSize: function(a, b) {
            var c = a - 2 * this.padding,
                d = b - 2 * this.padding;
            this._background.setSize(a, b);
            this._displaySprite.setScaleXY(1, 1);
            var e = s.getBounds(this._displaySprite.owner),
                f = e.width,
                e = e.height,
                j = f / c,
                h = e / d;
            this._displaySprite.centerAnchor();
            var g = 1;
            if (1 < j || 1 < h) g = j > h ? c / f : d / e, this._displaySprite.setScaleXY(g * (0 < this._displaySprite.scaleX._value ? 1 : -1), g);
            this._displaySprite.setXY(0.5 * a, 0.5 * b);
            this._textSprite.setXY(this.padding, this.padding);
            this._textSprite.setWrapWidth(c)
        },
        setTextVisible: function(a) {
            this._textSprite.set_visible(this._hasDisplay ?
                a : !0)
        },
        filter: function(a) { if ("" == a) return !0;
            a = a.toLowerCase(); if (-1 != this.templateKey.toLowerCase().indexOf(a)) return !0; var b = this._template.template.tags; if (null != b && -1 != b.toString().toLowerCase().indexOf(a)) return !0; for (var b = 0, c = y.fields(this._template); b < c.length;) { var d = c[b];++b; if (-1 != d.toLowerCase().indexOf(a)) return !0 } return !1 },
        __class__: Jc
    });
    var al = function(a) {
        this._lastPointerUpTime = 0;
        this._filter = "";
        this._sprite = new s;
        this._container = new A;
        this._thumbnails = [];
        this._showLabel = !1;
        this._thumbnailMargin =
            5;
        this._thumbnailSize = 40;
        this._width = 200;
        this._height = w._platform.getStage().get_height();
        ta.call(this, "editor", a);
        this._backgroundSprite = new wb(0, this._width, this._height);
        this._backgroundSprite.setAlpha(0.5)
    };
    g["stolo.ensys.editor.dialog.TemplatesDialog"] = al;
    al.__name__ = ["stolo", "ensys", "editor", "dialog", "TemplatesDialog"];
    al.__super__ = ta;
    al.prototype = l(ta.prototype, {
        onStart: function() {
            var a = this;
            ta.prototype.onStart.call(this);
            this.owner.addChild((new A).add(this._backgroundSprite));
            this.owner.addChild(this._container.add(this._sprite));
            this._sprite.set_visible(!1);
            this.createThumbnails();
            this._folder = this.getFolder("Templates");
            this._data = { visible: 0 != (this._flags & 2), width: this._width, size: this._thumbnailSize, margin: this._thumbnailMargin, filter: this._filter, text: !1 };
            this._folder.add(this._data, "visible").onChange(function(b) { a.set_visible(b) });
            this._folder.add(this._data, "width", 0, w._platform.getStage().get_width()).onChange(function(b) { a._width = b;
                a.refresh() });
            this._folder.add(this._data, "size", 20, 200).step(10).onChange(function(b) {
                a._thumbnailSize =
                    b;
                a.refresh()
            });
            this._folder.add(this._data, "margin", 0, 100).step(10).onChange(function(b) { a._thumbnailMargin = b;
                a.refresh() });
            this._folder.add(this._data, "text").onChange(function(b) { a._showLabel = b;
                a.refresh() });
            this._folder.add(this._data, "filter").onChange(function(b) { a._filter = b;
                a.refresh() })
        },
        createThumbnails: function() {
            for (var a, b = 0, c = L.getTemplateIds(); b < c.length;) a = c[b], ++b, a = L.getTemplate(a), Object.prototype.hasOwnProperty.call(a, Ih.COMPONENT_NAME) || (a = new Jc(a), this._container.addChild((new A).add(a)),
                this._thumbnails.push(a), a.get_pointerUp().connect(n(this, this.onThumbnailPointerUp)));
            this.refresh();
            F.delayCallTo(n(this, this.refresh), 0.1)
        },
        refresh: function() {
            this._sprite.set_visible(!0);
            for (var a = [], b = 0, c = this._thumbnails; b < c.length;) { var d = c[b];++b;
                d.filter(this._filter) ? (d.set_visible(!0), d.setTextVisible(this._showLabel), a.push(d)) : d.set_visible(!1) } b = Math.floor(this._width / (this._thumbnailSize + this._thumbnailMargin));
            c = 0;
            for (d = a.length; c < d;) {
                var e = c++,
                    f = a[e];
                f.setSize(this._thumbnailSize,
                    this._thumbnailSize);
                f.setXY(this._thumbnailMargin + e % b * (this._thumbnailSize + this._thumbnailMargin), this._thumbnailMargin + Math.floor(e / b) * (this._thumbnailSize + this._thumbnailMargin))
            }
            this._backgroundSprite.setSize(this._width, this._thumbnailMargin + Math.floor(a.length / b) * (this._thumbnailSize + this._thumbnailMargin))
        },
        onUpdate: function(a) {
            ta.prototype.onUpdate.call(this, a);
            var b = null;
            if (w._platform.getPointer().get_x() < this._backgroundSprite.getNaturalWidth()) {
                if (50 > w._platform.getPointer().get_y() &&
                    0 > this._sprite.y._value) { var c = this._sprite.y;
                    c.set__(c._value + 600 * a) } else w._platform.getPointer().get_y() > this._height - 50 && this._sprite.y._value > -this._backgroundSprite.getNaturalHeight() + this._height && (c = this._sprite.y, c.set__(c._value - 600 * a));
                a = s.hitTest(this._container, w._platform.getPointer().get_x(), w._platform.getPointer().get_y());
                if (null != a) { if (null == a.owner._internal_getFromParents("Sprite_19", Jc)) return;
                    b = a.owner._internal_getFromParents("Sprite_19", Jc).templateKey }
            }
            this._system.selection.info.thumbnail =
                b
        },
        onThumbnailPointerUp: function(a) { if (0.3 > w._platform.getTime() - this._lastPointerUpTime) { for (var b = this._system.renderer.displacement, a = a.hit, c = null; null != a && null == c;) U.__instanceof(a, Jc) && (c = a), a = null == a.owner ? null : null == a.owner.parent ? null : a.owner.parent._compMap.Sprite_19; if (null == c) return;
                this._system.history.add(new tg(this._system, c.templateKey, { x: 0.5 * this._system.renderer.dimensionsScaled.width - b.x, y: 0.5 * this._system.renderer.dimensionsScaled.height - b.y })) } this._lastPointerUpTime = w._platform.getTime() },
        __class__: al
    });
    var of = function(a) { this.preset = "Default";
        this.isLoading = this.isSaving = !1;
        this.onSave = new I;
        this.onLoad = new I;
        k.call(this);
        this._system = a };
    g["stolo.ensys.editor.states.BaseEditorState"] = of ; of .__name__ = ["stolo", "ensys", "editor", "states", "BaseEditorState"]; of .__super__ = k; of .prototype = l(k.prototype, {
        get_name: function() { return "BaseEditorState_64" },
        isBusy: function() { return this.isLoading || this.isSaving },
        save: function(a) {
            if (!this.isBusy() && (null == a && (a = this.get()), null != a)) {
                this.isSaving = !0;
                var b = JSON.stringify(a),
                    c = this.getStorageprefix();
                na.setWithPrefix(c, "renderer", b);
                this.onSave.emit(a);
                this.isSaving = !1
            }
        },
        get: function() { return {} },
        getStorageprefix: function() { return this._system.storagePrefix + this.preset + "_" },
        load: function() { if (!this.isBusy()) { var a = this.getStorageprefix(),
                    a = na.getWithPrefix(a, "renderer");
                null != a && (this.isLoading = !0, a = JSON.parse(a), null != a && this.apply(a), this.onLoad.emit(a), this.isLoading = !1) } },
        apply: function(a) { H.configure(this, a, !0) },
        __class__: of
    });
    var Ik = function(a) {
        this.layersLockedData = {};
        this.layersAlphaData = {};
        this.zoomMin = 0.2;
        this.zoomMax = 1; of .call(this, a)
    };
    g["stolo.ensys.editor.states.EditorRendererState"] = Ik;
    Ik.__name__ = ["stolo", "ensys", "editor", "states", "EditorRendererState"];
    Ik.__super__ = of ;
    Ik.prototype = l( of .prototype, {
        setRendererScale: function(a, b) { null == b && (b = !0);
            b && (a += this._system.renderer.scale);
            this._system.renderer.setScale(Math.max(this.zoomMin, Math.min(this.zoomMax, a))) },
        setRendererPosition: function(a, b, c) {
            null == c && (c = !1);
            c && (a += this._system.renderer.displacement.x,
                b += this._system.renderer.displacement.y);
            this._system.renderer.move(a, b)
        },
        load: function() { for (var a = 0, b = this._system.renderer.getLayers(); a < b.length;) { var c = b[a];++a;
                c.getName(); var d = c.data.editor;
                null != d && !0 == d.locked && c.set_pointerEnabled(!1) } of .prototype.load.call(this) },
        get: function() {
            if (null == this._system.renderer) return null;
            for (var a = { renderer: { x: this._system.renderer.displacement.x, y: this._system.renderer.displacement.y, scale: this._system.renderer.scale }, alpha: this.layersAlphaData, locked: this.layersLockedData },
                    b = 0, c = this._system.renderer.getLayers(); b < c.length;) { var d = c[b];++b; var e = d.getName();
                this.layersAlphaData[e] = d.alpha._value;
                this.layersLockedData[e] = 0 == (d._flags & 4) }
            return a
        },
        apply: function(a) {
            null != a.renderer && (this.setRendererPosition(a.renderer.x, a.renderer.y), this.setRendererScale(a.renderer.scale, !1), y.deleteField(a, "renderer"));
            this.layersAlphaData = {};
            this.layersLockedData = {};
            var b;
            if (null != a.locked) {
                for (var c = 0, d = y.fields(a.locked); c < d.length;) {
                    var e = d[c];
                    ++c;
                    b = this._system.renderer.getLayer(e);
                    if (null != b) { var f = y.field(a.locked, e);
                        b.set_pointerEnabled(!f);
                        this.layersLockedData[e] = f }
                }
                y.deleteField(a, "locked")
            }
            if (null != a.alpha) { c = 0; for (d = y.fields(a.alpha); c < d.length;) e = d[c], ++c, b = this._system.renderer.getLayer(e), null != b && (f = y.field(a.alpha, e), 0 <= f && (b.setAlpha(f), this.layersAlphaData[e] = f));
                y.deleteField(a, "alpha") } of .prototype.apply.call(this, a)
        },
        __class__: Ik
    });
    var Ck = function() { this._templates = [];
        k.call(this) };
    g["stolo.ensys.editor.system.ClipboardSystem"] = Ck;
    Ck.__name__ = ["stolo", "ensys",
        "editor", "system", "ClipboardSystem"
    ];
    Ck.__super__ = k;
    Ck.prototype = l(k.prototype, { get_name: function() { return "ClipboardSystem_51" }, set: function(a) { this._templates = a }, get: function() { return this._templates }, __class__: Ck });
    var Jk = function() { this._map = new K;
        k.call(this) };
    g["stolo.ensys.editor.system.DialogSystem"] = Jk;
    Jk.__name__ = ["stolo", "ensys", "editor", "system", "DialogSystem"];
    Jk.__super__ = k;
    Jk.prototype = l(k.prototype, {
        get_name: function() { return "DialogSystem_60" },
        onAdded: function() {
            this._system = u.instance(this.owner._compMap.BaseGameSystem_23,
                Ib);
            this.container = new A;
            this.container.add(new s);
            this._disposer = this.owner._compMap.Disposer_68;
            this.build()
        },
        onStart: function() { k.prototype.onStart.call(this);
            null == this.container.parent && this.owner.addChild(this.container) },
        onStop: function() { k.prototype.onStop.call(this);
            this._disposer = this.container = null },
        build: function() {
            this.createMainDialog();
            this.editor = this.add(new Xk(this._system), this.main.owner);
            this.renderer = this.add(new $k(this._system), this.main.owner);
            this.history = this.add(new Zk(this._system),
                this.main.owner);
            this.templates = this.add(new al(this._system), this.container);
            this.entity = this.add(new Yk(this._system))
        },
        createMainDialog: function() { this.main = ta.main = new Jh(this._system);
            this.main.setXY(w._platform.getStage().get_width(), w._platform.getStage().get_height());
            this.add(this.main) },
        add: function(a, b) { null == b && (b = this.container);
            this._map.set(a.id, a);
            a;
            b.addChild((new A).add(a)); return a },
        onUpdate: function(a) { k.prototype.onUpdate.call(this, a) },
        __class__: Jk
    });
    var Hk = function() {
        this.isDirty = !1;
        k.call(this)
    };
    g["stolo.ensys.editor.system.DocumentSystem"] = Hk;
    Hk.__name__ = ["stolo", "ensys", "editor", "system", "DocumentSystem"];
    Hk.__super__ = k;
    Hk.prototype = l(k.prototype, {
        get_name: function() { return "DocumentSystem_58" },
        onStart: function() { k.prototype.onStart.call(this);
            this._system = u.instance(this.owner._compMap.BaseGameSystem_23, Ib);
            this.show() },
        onStop: function() { k.prototype.onStop.call(this) },
        getName: function() { var a = this._system.levelData.filename.split("/"); return a[a.length - 1] },
        "export": function(a) {
            null ==
                a && (a = !0);
            var b = this._system.actors.getAll();
            sb.sort(b, n(this, this.sortActors));
            for (var c = [], d, e = 0; e < b.length;) d = b[e], ++e, d = d._compMap.EditorMetaComponent_55, null != d && c.push(d.getTemplate());
            this._system.levelData.data.actors = c;
            b = this.getName();
            c = ah.print(this._system.levelData.data, null, "\t");
            na.setWithPrefix(this._system.storagePrefix, b, c);
            this.isDirty = !1;
            a && Ic.getURL("./editor.html?json=true&level=" + b + "&r=" + Math.random());
            return c
        },
        show: function() {
            var a = Ic.getUrlParams();
            if (null != a.json && null !=
                a.level) { var b = this.getName(),
                    b = na.getWithPrefix(this._system.storagePrefix, b),
                    c = eval("document");
                c.title = a.level + ".json';";
                c.body.innerHTML = "<pre>" + u.string(b.toString()) + "</pre>";
                null != ta.main && ta.main.gui.getRoot().destroy() }
        },
        sortActors: function(a, b) { var c = a.parent._compMap.Sprite_19,
                d = b.parent._compMap.Sprite_19,
                e = this._system.renderer.getSprite().getChildIndex(c.owner),
                f = this._system.renderer.getSprite().getChildIndex(d.owner); return c == d ? c.getChildIndex(a) > d.getChildIndex(b) ? 1 : -1 : e > f ? 1 : -1 },
        __class__: Hk
    });
    var Lk = function() { sd.call(this) };
    g["stolo.ensys.editor.system.EditorLevelSystem"] = Lk;
    Lk.__name__ = ["stolo", "ensys", "editor", "system", "EditorLevelSystem"];
    Lk.__super__ = sd;
    Lk.prototype = l(sd.prototype, {
        onAdded: function() { sd.prototype.onAdded.call(this);
            this._system = u.instance(this.owner._compMap.BaseGameSystem_23, Ib) },
        spawnActor: function(a) {
            if (this._system.roundValues && null != a.transform && (a.transform.position.x = Math.round(a.transform.position.x), a.transform.position.y = Math.round(a.transform.position.y),
                    0 < a.transform.rotation || 0 > a.transform.rotation)) a.transform.rotation = Math.round(a.transform.rotation);
            var b = this._actors.spawn(a);
            b.add(new Vk(a));
            if (null == b._compMap.Sprite_19) { a = new wh;
                a.asset = "sprite";
                a.pack = "debug";
                a.width = a.height = 10; var c = b._compMap.PhysicsComponent_42;
                null != c && (c = c.getSize(), a.width = c.width, a.height = c.height);
                b.add(a) }
            return b
        },
        __class__: Lk
    });
    var Fk = function() { this.onCommand = new I;
        this.limit = 50;
        k.call(this) };
    g["stolo.ensys.editor.system.HistorySystem"] = Fk;
    Fk.__name__ = ["stolo",
        "ensys", "editor", "system", "HistorySystem"
    ];
    Fk.__super__ = k;
    Fk.prototype = l(k.prototype, {
        get_name: function() { return "HistorySystem_57" },
        onStart: function() { k.prototype.onStart.call(this);
            this._redos = [];
            this._undos = [] },
        onStop: function() { k.prototype.onStop.call(this);
            this._redos = this._undos = null },
        add: function(a, b) { null == b && (b = !0);
            b && a.redo();
            this._redos.push(a);
            this._undos.splice(0, this._undos.length);
            this._undos.length > this.limit && this._undos.splice(0, 1);
            this.onCommand.emit(a) },
        redo: function() {
            var a = this._undos.pop();
            null != a && (a.redo(), this._redos.push(a), this.onCommand.emit(a))
        },
        undo: function() { var a = this._redos.pop();
            null != a && (a.undo(), this._undos.push(a), this.onCommand.emit(a)) },
        __class__: Fk
    });
    var Kk = function() { this._enablePhysics = !1;
        this.snapRotation = 45;
        this.snapX = this.snapY = 30;
        this.onComplete = new ia;
        k.call(this);
        R.ENABLE_POINTER = !0;
        ug.enabled = !0 };
    g["stolo.ensys.editor.system.LogicSystem"] = Kk;
    Kk.__name__ = ["stolo", "ensys", "editor", "system", "LogicSystem"];
    Kk.__super__ = k;
    Kk.prototype = l(k.prototype, {
        get_name: function() { return "LogicSystem_52" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._system = u.instance(this.owner._compMap.BaseGameSystem_23, Ib);
            this._disposer = this.owner._compMap.Disposer_68;
            this._system.physics.enable(this.get_enablePhysics());
            this._disposer.add(this._system.shortcut.onAction.connect(n(this, this.onAction)));
            this._disposer.add(w._platform.getKeyboard().down.connect(n(this, this.onKeyDown)));
            this._disposer.add(w._platform.getKeyboard().up.connect(n(this, this.onKeyUp)));
            this._system.shortcut.add(new Qk(this._system),
                [i.Shift, i.T]);
            this._system.shortcut.add(new Sk(this._system), [i.Control, i.Z]);
            this._system.shortcut.add(new Ok(this._system), [i.Control, i.Y]);
            this._system.shortcut.add(new Fh(this._system), [i.Control, i.C]);
            this._system.shortcut.add(new Nk(this._system), [i.Control, i.D]);
            this._system.shortcut.add(new Gh(this._system), [i.Control, i.V]);
            this._system.shortcut.add(new Mk(this._system), [i.Control, i.F]);
            this._system.shortcut.add(new Pk(this._system), [i.Control, i.B]);
            this.setDefaultTool();
            this._system.level.load(this._system.levelData);
            this.onComplete.emit()
        },
        onStop: function() { k.prototype.onStop.call(this);
            this._disposer = this._system = null },
        setDefaultTool: function() { this._system.tool.set(new bl(this._system)) },
        onAction: function(a) { a.execute() },
        onKeyUp: function(a) { a.key == i.Space && this.setDefaultTool() },
        onKeyDown: function(a) { a.key == i.Space && this._system.tool.set(new cl(this._system)) },
        get_enablePhysics: function() { return this._enablePhysics },
        set_enablePhysics: function(a) {
            null != this._system && this._system.physics.enable(a);
            return this._enablePhysics =
                a
        },
        __class__: Kk,
        __properties__: l(k.prototype.__properties__, { set_enablePhysics: "set_enablePhysics", get_enablePhysics: "get_enablePhysics" })
    });
    var Gk = function() { this.onDeselect = new ia;
        this.onSelect = new I;
        k.call(this) };
    g["stolo.ensys.editor.system.SelectionSystem"] = Gk;
    Gk.__name__ = ["stolo", "ensys", "editor", "system", "SelectionSystem"];
    Gk.__super__ = k;
    Gk.prototype = l(k.prototype, {
        get_name: function() { return "SelectionSystem_53" },
        onStart: function() {
            k.prototype.onStart.call(this);
            this._actors = [];
            this.info = new Wk;
            this.info.setXY(210, 10);
            this.owner.addChild((new A).add(this.info))
        },
        onStop: function() { this._actors = null;
            k.prototype.onStop.call(this) },
        contains: function(a) { return -1 != this._actors.indexOf(a) },
        set: function(a) { this.clear();
            this.add(a) },
        add: function(a) { if (!(this.contains(a) || null == a)) { this._actors.push(a);
                a.add(new sh); var b = a._compMap.EditorMetaComponent_55;
                null != b && (b.isSelected = !0, b.onSelect.emit(a));
                this.onSelect.emit(a);
                this.info.show(a) } },
        remove: function(a) {
            if (this.contains(a) && null != a) {
                N.remove(this._actors,
                    a);
                a.remove(a._compMap.EditorSelectionComponent_54);
                var b = a._compMap.EditorMetaComponent_55;
                null != b && (b.isSelected = !1, b.onDeselect.emit(a));
                this.onDeselect.emit();
                this.info.hide()
            }
        },
        toggle: function(a) { null != a && (this.contains(a) ? this.remove(a) : this.add(a)) },
        getAll: function() { for (var a = [], b = 0, c = this._actors; b < c.length;) { var d = c[b];++b;
                a.push(d) } return a },
        clear: function() { for (var a = this.getAll(), b = 0; b < a.length;) { var c = a[b];++b;
                this.remove(c) } this.onDeselect.emit() },
        __class__: Gk
    });
    var Ek = function() {
        this.onAction =
            new I;
        k.call(this)
    };
    g["stolo.ensys.editor.system.ShortcutSystem"] = Ek;
    Ek.__name__ = ["stolo", "ensys", "editor", "system", "ShortcutSystem"];
    Ek.__super__ = k;
    Ek.prototype = l(k.prototype, {
        get_name: function() { return "ShortcutSystem_59" },
        onStart: function() { k.prototype.onStart.call(this);
            this._disposer = this.owner._compMap.Disposer_68;
            this._disposer.add(w._platform.getKeyboard().down.connect(n(this, this.onKeyDown)));
            this._actions = new $b },
        onStop: function() {
            k.prototype.onStop.call(this);
            this._disposer = this._actions =
                null
        },
        add: function(a, b) { this._actions.set(a, b) },
        onKeyDown: function(a) { for (var b = this._actions.keys(); b.hasNext();) { for (var c = b.next(), d = this._actions.h[c.__id__], e = !0, f = 0; f < d.length;) { var j = d[f];++f; if (!w._platform.getKeyboard().isDown(j) && a.key != j) { e = !1; break } } e && this.onAction.emit(c) } },
        __class__: Ek
    });
    var Dk = function() { k.call(this) };
    g["stolo.ensys.editor.system.ToolSystem"] = Dk;
    Dk.__name__ = ["stolo", "ensys", "editor", "system", "ToolSystem"];
    Dk.__super__ = k;
    Dk.prototype = l(k.prototype, {
        get_name: function() { return "ToolSystem_56" },
        onStart: function() { k.prototype.onStart.call(this) },
        onStop: function() { k.prototype.onStop.call(this);
            this._tool = null },
        onUpdate: function(a) { if (null != this._tool) this._tool.onUpdate(a) },
        set: function(a) { null != this._tool && this._tool.stop();
            this._tool = a;
            null != this._tool && this._tool.start(); return this._tool },
        getCurrent: function() { return this._tool },
        __class__: Dk
    });
    var fd = function(a) { this._started = !1;
        this._disposer = new Ta;
        this._system = a };
    g["stolo.ensys.editor.tools.Tool"] = fd;
    fd.__name__ = ["stolo", "ensys", "editor",
        "tools", "Tool"
    ];
    fd.prototype = {
        onKeyRelease: function() {},
        onKeyPress: function() {},
        onDragStart: function() {},
        onDrag: function() {},
        onDragStop: function() {},
        onTap: function() {},
        onWheel: function() {},
        onUpdate: function() {},
        start: function() {
            this._disposer.add(w._platform.getPointer().down.connect(n(this, this.onPointerDown)));
            this._disposer.add(w._platform.getPointer().move.connect(n(this, this.onPointerMove)));
            this._disposer.add(w._platform.getPointer().up.connect(n(this, this.onPointerUp)));
            this._disposer.add(w._platform.getKeyboard().down.connect(n(this,
                this.onKeyDown)));
            this._disposer.add(w._platform.getKeyboard().up.connect(n(this, this.onKeyUp)));
            this._disposer.add(w._platform.getMouse().scroll.connect(n(this, this.onMouseWheel)));
            this._started = !0
        },
        stop: function() { this._disposer.dispose();
            this._system = null;
            this._started = !1 },
        onKeyDown: function(a) { if (this._started) this.onKeyPress(a.key) },
        onKeyUp: function(a) { if (this._started) this.onKeyRelease(a.key) },
        onMouseWheel: function(a) { if (this._started) this.onWheel(a) },
        onPointerDown: function(a) {
            if (this._started) {
                var b =
                    this.findActor(a.viewX, a.viewY);
                this._pointer = { drag: !1, x: 0, y: 0, xo: a.viewX, yo: a.viewY, xl: 0, yl: 0, distance: 0, actor: b }
            }
        },
        onPointerMove: function(a) {
            if (this._started && null != this._pointer)
                if (this._pointer.xl = this._pointer.x, this._pointer.yl = this._pointer.y, this._pointer.x = a.viewX, this._pointer.y = a.viewY, this._pointer.distance = Math.sqrt(Math.pow(this._pointer.xo - this._pointer.x, 2) + Math.pow(this._pointer.yo - this._pointer.y, 2)), this._pointer.drag) this.onDrag(this._pointer);
                else 10 < this._pointer.distance && (this._pointer.drag = !0, this.onDragStart(this._pointer))
        },
        onPointerUp: function() { if (this._started && null != this._pointer) { if (this._pointer.drag) this.onDragStop(this._pointer);
                else this.onTap(this._pointer);
                this._pointer = null } },
        findActor: function(a, b) { var c = s.hitTest(this._system.renderer.getContainer(), a, b); if (null == c) return null; for (c = c.owner; null != c && null == c._compMap.TransformComponent_66;) c = c.parent; return c },
        getRendererInverseScale: function() { return 1 / this._system.renderer.scale },
        __class__: fd
    };
    var bl = function(a) {
        this._actorStartRotations =
            new $b;
        this._actorStartPositions = new $b;
        this._rotate = !1;
        this.selectorAlpha = 0.5;
        this.selectorColor = 65280;
        fd.call(this, a)
    };
    g["stolo.ensys.editor.tools.ActorTransformTool"] = bl;
    bl.__name__ = ["stolo", "ensys", "editor", "tools", "ActorTransformTool"];
    bl.__super__ = fd;
    bl.prototype = l(fd.prototype, {
        start: function() { fd.prototype.start.call(this);
            w._platform.getMouse().set_cursor(Fc.Default) },
        stop: function() { this._rotate = !1;
            this._positions = null;
            this.removeSelector();
            fd.prototype.stop.call(this) },
        onTap: function(a) {
            a =
                a.actor;
            (null == a || !w._platform.getKeyboard().isDown(i.Shift)) && this._system.selection.clear();
            this._system.selection.toggle(a)
        },
        onDragStart: function(a) {
            var b = a.actor;
            if (null != b)
                if (w._platform.getKeyboard().isDown(i.Control)) this._rotate = !0;
                else {
                    a = this._system.selection.contains(b) ? this._system.selection.getAll() : [b];
                    this._positions = [];
                    for (b = 0; b < a.length;) {
                        var c = a[b];
                        ++b;
                        var d = c._compMap.TransformComponent_66.position;
                        this._positions.push(new ob(d.x, d.y));
                        d = { x: d.x, y: d.y };
                        this._actorStartPositions.set(c,
                            d);
                        d;
                        d = c._compMap.TransformComponent_66.rotation;
                        this._actorStartRotations.set(c, d);
                        d
                    }
                }
            else b = this._system.renderer.getLayers(), b = b[b.length - 1], this._selector = (new A).add((new wb(this.selectorColor, 1, 1)).setAlpha(this.selectorAlpha).setXY(-this._system.renderer.displacement.x + a.x * this.getRendererInverseScale(), -this._system.renderer.displacement.y + a.y * this.getRendererInverseScale())), b.owner.addChild(this._selector)
        },
        getSelectedActors: function() {
            return this._system.selection.contains(this._selectedActor) ?
                this._system.selection.getAll() : [this._selectedActor]
        },
        onDrag: function(a) {
            this._selectedActor = a.actor;
            if (null != this._selector) u.instance(this._selector._compMap.Sprite_19, wb).setSize(this.getRendererInverseScale() * (a.x - a.xo), this.getRendererInverseScale() * (a.y - a.yo));
            else if (this._rotate) {
                var b = this._selectedActor._compMap.TransformComponent_66.position;
                this.rotateActor(Za.toDegrees(Math.atan2(-this._system.renderer.displacement.y + a.y * this.getRendererInverseScale() - b.y, -this._system.renderer.displacement.x +
                    a.x * this.getRendererInverseScale() - b.x)), this._selectedActor)
            } else if (null != this._positions) { this._system.selection.contains(this._selectedActor); for (var b = this.getSelectedActors(), c = 0, d = 0; d < b.length;) { var e = b[d];++d; var f = this._positions[c],
                        j = f.x + this.getRendererInverseScale() * (a.x - a.xo),
                        f = f.y + this.getRendererInverseScale() * (a.y - a.yo);
                    this.moveActor(j, f, e, !1, !0);
                    c++ } }
        },
        onDragStop: function(a) {
            if (null != this._selector) {
                var b = u.instance(this._selector._compMap.Sprite_19, wb),
                    c = this._system.actors.getAll(),
                    d = a.xo * this.getRendererInverseScale() - this._system.renderer.displacement.x,
                    e;
                0 > b.width._value ? (e = d, d = e + b.width._value) : e = d + b.width._value;
                var a = a.yo * this.getRendererInverseScale() - this._system.renderer.displacement.y,
                    f;
                0 > b.height._value ? (f = a, a = f + b.height._value) : f = a + b.height._value;
                for (b = 0; b < c.length;) { var j = c[b];++b; if (!(null == j || null == j.parent)) { var h = j.parent._compMap.Sprite_19;
                        null == h || 0 == (h._flags & 4) || (h = j._compMap.TransformComponent_66.position, d > h.x || e < h.x || a > h.y || f < h.y || this._system.selection.add(j)) } }
            } else if (null !=
                this._positions || this._rotate) { c = this._system.selection.contains(this._selectedActor);
                d = this.getSelectedActors();
                e = new Sf; for (a = 0; a < d.length;) f = d[a], ++a, this._rotate ? e.add(new Uk(this._system, f, this._actorStartRotations.h[f.__id__], f._compMap.TransformComponent_66.rotation, c ? !1 : !0)) : (b = f._compMap.TransformComponent_66.position, e.add(new Tk(this._system, f, this._actorStartPositions.h[f.__id__], { x: b.x, y: b.y })));
                this._system.history.add(e, !1) } this._rotate = !1;
            this._positions = null;
            this.removeSelector()
        },
        onKeyRelease: function(a) {
            var b = this._system.selection.getAll(),
                c;
            c = w._platform.getKeyboard().isDown(i.Shift) ? 1 : this._system.logic.snapX;
            if (a == i.Backspace || a == i.Delete) { for (var d = 0; d < b.length;) { var e = b[d];++d;
                    this._system.actors.removeActor(e) } this._system.selection.clear() }
            if (a == i.I)
                for (d = 0; d < b.length;) ++d, null;
            if (a == i.Left)
                for (a = 0; a < b.length;) d = b[a], ++a, this.moveActor(-c, 0, d, !0, !1);
            else if (a == i.Right)
                for (a = 0; a < b.length;) d = b[a], ++a, this.moveActor(c, 0, d, !0, !1);
            else if (a == i.Up)
                for (a = 0; a < b.length;) d =
                    b[a], ++a, this.moveActor(0, -c, d, !0, !1);
            else if (a == i.Down)
                for (a = 0; a < b.length;) d = b[a], ++a, this.moveActor(0, c, d, !0, !1)
        },
        removeSelector: function() { null != this._selector && (this._selector.parent.removeChild(this._selector), this._selector = null) },
        moveActor: function(a, b, c, d, e) {
            null == e && (e = !0);
            null == d && (d = !1);
            var f = c._compMap.PhysicsComponent_42,
                j = c._compMap.Sprite_19,
                h = c._compMap.TransformComponent_66,
                c = c._compMap.EditorMetaComponent_55;
            c.moveEnabled && (d && (a += h.position.x, b += h.position.y), !w._platform.getKeyboard().isDown(i.Shift) &&
                0 != this._system.logic.snapX && 0 != this._system.logic.snapY && e && (a = Math.round(a / this._system.logic.snapX) * this._system.logic.snapX, b = Math.round(b / this._system.logic.snapY) * this._system.logic.snapY), null != h && (h.position.x = a, h.position.y = b), null != f && (f.forceUpdate = !0, f.setPosition(a, b)), null != j && (j.forceUpdate = !0), null != c && c.updateProperty("transform", "position", { x: this._system.roundValues ? Math.round(a) : a, y: this._system.roundValues ? Math.round(b) : b }))
        },
        rotateActor: function(a, b, c, d) {
            null == d && (d = !0);
            null ==
                c && (c = !1);
            var e = b._compMap.PhysicsComponent_42,
                f = b._compMap.Sprite_19,
                j = b._compMap.TransformComponent_66,
                b = b._compMap.EditorMetaComponent_55;
            c && (a += j.rotation);
            !w._platform.getKeyboard().isDown(i.Shift) && 0 != this._system.logic.snapRotation && d && (a = Math.round(a / this._system.logic.snapRotation) * this._system.logic.snapRotation);
            null != j && (j.rotation = a);
            null != e && (e.forceUpdate = !0, e.setRotation(3.141592653589793 * a / 180));
            null != f && (f.forceUpdate = !0);
            null != b && b.updateProperty("transform", "rotation", this._system.roundValues ?
                Math.round(a) : a)
        },
        __class__: bl
    });
    var cl = function(a) { this.zoomSpeed = 0.1;
        this.moveSpeedMultiplicator = 5;
        this.moveSpeed = 50;
        fd.call(this, a) };
    g["stolo.ensys.editor.tools.RendererTransformTool"] = cl;
    cl.__name__ = ["stolo", "ensys", "editor", "tools", "RendererTransformTool"];
    cl.__super__ = fd;
    cl.prototype = l(fd.prototype, {
        start: function() { fd.prototype.start.call(this);
            this._state = this._system.rendererState;
            w._platform.getMouse().set_cursor(Fc.Button) },
        stop: function() {
            this._state.save();
            this._start = null;
            w._platform.getMouse().set_cursor(Fc.Default);
            fd.prototype.stop.call(this)
        },
        onDragStart: function() { this._start = new ob(this._system.renderer.displacement.x, this._system.renderer.displacement.y) },
        onDrag: function(a) { null != this._start && this._state.setRendererPosition(this._start.x + this.getRendererInverseScale() * (a.x - a.xo), this._start.y + this.getRendererInverseScale() * (a.y - a.yo)) },
        onDragStop: function() { this._start = null;
            this._state.save() },
        onKeyRelease: function(a) {
            var b = this.moveSpeed * this.getRendererInverseScale();
            w._platform.getKeyboard().isDown(i.Shift) &&
                (b *= this.moveSpeedMultiplicator);
            a == i.PageUp && this._state.setRendererScale(this.zoomSpeed);
            a == i.PageDown && this._state.setRendererScale(-this.zoomSpeed);
            a == i.Left ? this._state.setRendererPosition(b, 0, !0) : a == i.Right ? this._state.setRendererPosition(-b, 0, !0) : a == i.Up ? this._state.setRendererPosition(0, b, !0) : a == i.Down && this._state.setRendererPosition(0, -b, !0)
        },
        onWheel: function(a) {
            var b = this._system.renderer.displacement.x,
                c = this._system.renderer.displacement.y,
                d = w._platform.getMouse().get_x() * this.getRendererInverseScale(),
                e = w._platform.getMouse().get_y() * this.getRendererInverseScale();
            this._state.setRendererScale(a / 100);
            var a = w._platform.getMouse().get_x() * this.getRendererInverseScale(),
                f = w._platform.getMouse().get_y() * this.getRendererInverseScale();
            this._state.setRendererPosition(b + (a - d), c + (f - e))
        },
        __class__: cl
    });
    var X = function() {};
    g["stolo.ensys.helpers.ComponentHelper"] = X;
    X.__name__ = ["stolo", "ensys", "helpers", "ComponentHelper"];
    X.getSystemEntity = function(a) { return a.parent.parent.parent };
    X.inEditor = function() {
        if (-1 !=
            X.isInEditor) return 1 == X.isInEditor;
        X.isInEditor = null != w.root._internal_getFromChildren("BaseGameSystem_23", Ib) ? 1 : 0;
        return X.inEditor()
    };
    var lc = function() {};
    g["stolo.ensys.helpers.SystemHelper"] = lc;
    lc.__name__ = ["stolo", "ensys", "helpers", "SystemHelper"];
    lc.init = function(a, b, c) { null == c && (c = !0);
        L.reset();
        lc.registerComponents(b, c);
        lc.loadTemplates(a) };
    lc.registerComponents = function(a, b) {
        null == b && (b = !0);
        if (!lc.defaultComponentsRegistered && b) {
            for (var c = sn.ComponentMap, d = c.keys(); d.hasNext();) {
                var e = d.next();
                L.registerComponent(e, c.get(e))
            }
            lc.defaultComponentsRegistered = !0
        }
        if (null != a)
            for (c = a.keys(); c.hasNext();) d = c.next(), L.registerComponent(d, a.get(d))
    };
    lc.loadTemplates = function(a) { for (var b = D.getPack(a).get_manifest().iterator(); b.hasNext();) { var c = b.next(); if (-1 < c.name.indexOf(".json")) { var d = D.getJSON(c.name, a, !0, !1); if (null == d) throw "Invalid actors file '" + c.name + "'";
                lc.addTemplates(d) } } };
    lc.addTemplates = function(a) { for (var b = 0; b < a.length;) { var c = a[b];++b;
            lc.addTemplate(c) } };
    lc.addTemplate = function(a) { L.addTemplate(a) };
    var zk = function(a, b, c, d, e, f, j, h) { null == h && (h = !1); if (null == a) throw "No physics system received";
        this._system = a;
        this._event = b;
        this._mode = c;
        this._type1 = d;
        this._type2 = e;
        this._entity = f;
        a.addContactListener(b, c, d, e, f, j, h) };
    g["stolo.ensys.physics.Contact"] = zk;
    zk.__name__ = ["stolo", "ensys", "physics", "Contact"];
    zk.__interfaces__ = [Dc];
    zk.prototype = {
        dispose: function() {
            null != this._system && (this._system.removeContactListener(this._event, this._mode, this._type1, this._type2, this._entity), this._entity = this._type2 = this._type1 =
                this._mode = this._event = this._system = null)
        },
        __class__: zk
    };
    var dl = function() {};
    g["stolo.ensys.physics.ContactArbiter"] = dl;
    dl.__name__ = ["stolo", "ensys", "physics", "ContactArbiter"];
    dl.__interfaces__ = [Dc];
    dl.prototype = {
        init: function(a, b) {
            this._arbiter = a;
            var c;
            b.zpp_inner.validate();
            c = b.zpp_inner.x;
            b.zpp_inner.validate();
            if (c = c == b.zpp_inner.y) b.zpp_inner.validate(), c = 0 == b.zpp_inner.x;
            this.angle = c ? 0 : Math.atan2(function() { b.zpp_inner.validate(); return b.zpp_inner.y }(this), function() {
                b.zpp_inner.validate();
                return b.zpp_inner.x
            }(this));
            b.zpp_inner.validate();
            this.normaly = b.zpp_inner.y
        },
        dispose: function() { this._arbiter = null },
        disableFriction: function() { this._arbiter.set_dynamicFriction(0);
            this._arbiter.set_rollingFriction(0);
            this._arbiter.set_staticFriction(0) },
        __class__: dl
    };
    var h = function() {};
    g["zpp_nape.util.ZPP_Flags"] = h;
    h.__name__ = ["zpp_nape", "util", "ZPP_Flags"];
    var ma = function() {};
    g["stolo.ensys.physics.ContactEvent"] = ma;
    ma.__name__ = ["stolo", "ensys", "physics", "ContactEvent"];
    var el = function(a, b) {
        null ==
            b && (b = !1);
        this._alwaysInverseNormal = this._acceptOnce = !1;
        this._contactArbiter = new dl;
        this._entities = new $b;
        this._alwaysInverseNormal = a;
        this._acceptOnce = b
    };
    g["stolo.ensys.physics.ContactListenerHandler"] = el;
    el.__name__ = ["stolo", "ensys", "physics", "ContactListenerHandler"];
    el.__interfaces__ = [Dc];
    el.prototype = {
        dispose: function() { this._entities = null;
            this._contactArbiter.dispose();
            this._contactArbiter = null },
        addEntity: function(a, b) { this._entities.set(a, b) },
        removeEntity: function(a) { this._entities.remove(a) },
        onPreContact: function(a) {
            var b = a.zpp_inner.int1.outer_i.get_userData().actor,
                c = a.zpp_inner.int2.outer_i.get_userData().actor,
                d = null,
                e = a.zpp_inner.pre_arbiter.wrapper().get_collisionArbiter(),
                f = !0;
            if (null != e && (d = this.fixNormal(a.zpp_inner.int1.outer_i.get_castBody(), a.zpp_inner.int2.outer_i.get_castBody(), function() { null == e.zpp_inner.colarb.wrap_normal && e.zpp_inner.colarb.getnormal(); return e.zpp_inner.colarb.wrap_normal }(this)), this._contactArbiter.init(e, d), d = this._contactArbiter, f = e.get_state(),
                    null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new Na, h.internal = !1), !(f = f == h.PreFlag_ACCEPT))) f = e.get_state(), null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new Na, h.internal = !1), f = f == h.PreFlag_ACCEPT_ONCE;
            var a = this.getCallback(b),
                j = this.getCallback(c),
                g = !0,
                i = !0;
            null != a && null != c && (g = a(c, d));
            null != j && null != b && (i = j(b, d));
            if (f && g && i) {
                if (this._acceptOnce) return null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new Na, h.internal = !1), h.PreFlag_ACCEPT_ONCE;
                null ==
                    h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new Na, h.internal = !1);
                return h.PreFlag_ACCEPT
            }
            if (this._acceptOnce) return null == h.PreFlag_IGNORE_ONCE && (h.internal = !0, h.PreFlag_IGNORE_ONCE = new Na, h.internal = !1), h.PreFlag_IGNORE_ONCE;
            null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new Na, h.internal = !1);
            return h.PreFlag_IGNORE
        },
        onOngoingContact: function(a) {
            var b = a.zpp_inner.int1.outer_i.get_userData().actor,
                a = a.zpp_inner.int2.outer_i.get_userData().actor,
                c = this.getCallback(b),
                d = this.getCallback(a);
            null != c && null != a && c(a, null);
            null != d && null != b && d(b, null)
        },
        onContactBegin: function(a) {
            var b = a.zpp_inner.int1.outer_i.get_userData().actor,
                c = a.zpp_inner.int2.outer_i.get_userData().actor,
                d = this.getCallback(b),
                e = this.getCallback(c),
                f = null,
                j = a.zpp_inner.wrap_arbiters.at(0).get_collisionArbiter();
            if (null != j) {
                f = j.get_state();
                null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new Na, h.internal = !1);
                if (f == h.PreFlag_IGNORE) return;
                a = this.fixNormal(a.zpp_inner.int1.outer_i.get_castBody(), a.zpp_inner.int2.outer_i.get_castBody(),
                    function() { null == j.zpp_inner.colarb.wrap_normal && j.zpp_inner.colarb.getnormal(); return j.zpp_inner.colarb.wrap_normal }(this));
                this._contactArbiter.init(j, a);
                f = this._contactArbiter
            }
            null != d && null != c && d(c, f);
            null != e && null != b && e(b, f)
        },
        onContactEnd: function(a) { var b = a.zpp_inner.int1.outer_i.get_userData().actor,
                a = a.zpp_inner.int2.outer_i.get_userData().actor,
                c = this.getCallback(b),
                d = this.getCallback(a);
            null != c && null != a && c(a, null);
            null != d && null != b && d(b, null) },
        getCallback: function(a) {
            return null == a ? null :
                this._entities.h[a.__id__]
        },
        fixNormal: function(a, b, c) { var d = fa.get(function() { c.zpp_inner.validate(); return c.zpp_inner.x }(this), function() { c.zpp_inner.validate(); return c.zpp_inner.y }(this), !0); if (this._alwaysInverseNormal || a.zpp_inner_i.id > b.zpp_inner_i.id) d.set_x(-1 * function() { d.zpp_inner.validate(); return d.zpp_inner.x }(this)), d.set_y(-1 * function() { d.zpp_inner.validate(); return d.zpp_inner.y }(this)); return d },
        __class__: el
    };
    var Aa = function() {};
    g["stolo.ensys.physics.ContactMode"] = Aa;
    Aa.__name__ = ["stolo", "ensys", "physics", "ContactMode"];
    var Pa = function() {};
    g["stolo.ensys.physics.ContactType"] = Pa;
    Pa.__name__ = ["stolo", "ensys", "physics", "ContactType"];
    var Fd = function() {};
    g["stolo.ensys.physics.Materials"] = Fd;
    Fd.__name__ = ["stolo", "ensys", "physics", "Materials"];
    Fd.get = function(a) { return Fd._materialMap.exists(a) ? Fd._materialMap.get(a) : y.getProperty(Fd, a) };
    Fd.add = function(a, b) { Fd._materialMap.set(a, b); return !0 };
    var bn = function() {};
    g["stolo.ensys.physics.PhysicsFactory"] = bn;
    bn.__name__ = ["stolo",
        "ensys", "physics", "PhysicsFactory"
    ];
    bn.createShape = function(a, b, c) {
        var d = null,
            e;
        e = 0 < a.x || 0 > a.x ? a.x : 0;
        var f;
        f = 0 < a.y || 0 > a.y ? a.y : 0;
        if ("box" == a.type || null == a.type) {
            null == a.width && (a.width = 0);
            null == a.height && (a.height = 0);
            0 >= a.width && null != b && (a.width = b.getNaturalWidth());
            0 >= a.height && null != b && (a.height = b.getNaturalHeight());
            var d = a.width,
                j = a.height,
                h = a.padding,
                g = a.docking;
            if (null != b && null != g) {
                var i = 0.5 * b.getNaturalWidth(),
                    k = 0.5 * b.getNaturalHeight();
                0 != g.left && 0 != g.right ? d = (g.left + g.right) * i : 0 != g.left ?
                    e = -i + 0.5 * d : 0 != g.right && (e = i - 0.5 * d);
                0 != g.top && 0 != g.bottom ? j = (g.top + g.bottom) * k : 0 != g.top ? f = -k + 0.5 * j : 0 != g.bottom && (f = k - 0.5 * j);
                null != b.align && (-1 < b.align.indexOf("left") && (e -= -i), -1 < b.align.indexOf("top") && (f -= -k))
            }
            null != h && (0 != h.left && (d -= h.left, e += 0.5 * h.left), 0 != h.right && (d -= h.right, e -= 0.5 * h.right), 0 != h.top && (j -= h.top, f += 0.5 * h.top), 0 != h.bottom && (j -= h.bottom, f -= 0.5 * h.bottom));
            0 >= d && (d = 100);
            0 >= j && (j = 100);
            a.finalw = d;
            a.finalh = j;
            d = new Yc(Yc.box(d, j, !0))
        } else if ("circle" == a.type) d = new Rj(a.radius);
        else if ("regular" ==
            a.type) d = new Yc(Yc.regular(a.xRadius, a.yRadius, a.edge));
        else if ("polygon" == a.type) { b = [];
            d = a.points; for (j = 0; j < d.length;) h = d[j], ++j, b.push(fa.weak(h.x, h.y));
            d = new Yc(b) } a.finalx = e;
        a.finaly = f;
        if (null == d) return null;
        (0 < a.rotation || 0 > a.rotation) && d.rotate(Nb.radians(a.rotation));
        b = null != a.filter ? a.filter : lb.defaultShapeFilter;
        if (null != b) {
            j = 0;
            for (h = y.fields(b); j < h.length;) switch (g = h[j], ++j, g) {
                case "collisionMask":
                    d.zpp_inner.filter.wrapper().set_collisionMask(y.field(b, g));
                    break;
                case "collisionGroup":
                    d.zpp_inner.filter.wrapper().set_collisionGroup(y.field(b,
                        g));
                    break;
                case "sensorGroup":
                    d.zpp_inner.filter.wrapper().set_sensorGroup(y.field(b, g));
                    break;
                case "sensorMask":
                    d.zpp_inner.filter.wrapper().set_sensorMask(y.field(b, g));
                    break;
                case "fluidGroup":
                    d.zpp_inner.filter.wrapper().set_fluidGroup(y.field(b, g));
                    break;
                case "fluidMask":
                    d.zpp_inner.filter.wrapper().set_fluidMask(y.field(b, g));
                    break;
                default:
                    null
            }
        }
        null != a.material && (b = Fd.get(a.material), null != b ? (d.zpp_inner.immutable_midstep("Shape::material"), d.zpp_inner.setMaterial(b.zpp_inner), d.zpp_inner.material.wrapper()) :
            null);
        null != a.fluid && (d.zpp_inner.immutable_midstep("Shape::fluidEnabled"), d.zpp_inner.fluidEnabled = !0, null == d.zpp_inner.fluidProperties && d.set_fluidProperties(new ge), d.zpp_inner.wake(), d.zpp_inner.fluidEnabled, null != a.fluid.density && (d.zpp_inner.immutable_midstep("Shape::fluidProperties"), null == d.zpp_inner.fluidProperties && d.zpp_inner.setFluid((new ge).zpp_inner), d.zpp_inner.fluidProperties.wrapper().set_density(a.fluid.density)), null != a.fluid.viscosity && (d.zpp_inner.immutable_midstep("Shape::fluidProperties"),
            null == d.zpp_inner.fluidProperties && d.zpp_inner.setFluid((new ge).zpp_inner), d.zpp_inner.fluidProperties.wrapper().set_viscosity(a.fluid.viscosity)));
        null != c ? d.set_localCOM(fa.weak(c.x + e, c.y + f)) : d.set_localCOM(fa.get(e, f, !0));
        d.set_sensorEnabled(a.sensor);
        return d
    };
    var qe = function(a, b) { null == b && (b = -1);
        this.color = 16776960;
        this.size = 1;
        s.call(this); - 1 != b && (this.color = b);
        null != a && this.drawShape(a) };
    g["stolo.ensys.physics.debug.PhysicsDebugSprite"] = qe;
    qe.__name__ = ["stolo", "ensys", "physics", "debug", "PhysicsDebugSprite"];
    qe.__super__ = s;
    qe.prototype = l(s.prototype, {
        draw: function(a) { null != this.texture && a.drawTexture(this.texture, 0, 0) },
        drawShape: function(a) {
            if ("box" == a.type || null == a.type) {
                var b = Math.round(a.finalw),
                    c = Math.round(a.finalh);
                if (b > qe.maxSize || c > qe.maxSize) b = Math.min(qe.maxSize, a.finalw), c = Math.min(qe.maxSize, a.finalh);
                this.texture = w._platform.getRenderer().createTexture(b, c);
                var d = this.texture.get_graphics();
                d.fillRect(this.color, 0, 0, b, this.size);
                d.fillRect(this.color, 0, c - this.size, b, this.size);
                d.fillRect(this.color,
                    0, 0, this.size, c);
                d.fillRect(this.color, b - this.size, 0, this.size, c);
                d.translate(0.5 * b, 0.5 * c);
                d.fillRect(this.color, -10, 0.5 * -this.size, 20, this.size);
                d.fillRect(this.color, 0.5 * -this.size, -10, this.size, 20);
                this.setAnchor(0.5 * b, 0.5 * c)
            } else if ("circle" == a.type) {
                b = a.radius;
                this.texture = w._platform.getRenderer().createTexture(Math.ceil(2 * b + 2 * this.size), Math.ceil(2 * b + 2 * this.size));
                c = this.texture.get_graphics();
                for (d = 0; 360 > d;) {
                    var e = d++;
                    c.fillRect(this.color, this.size + b + Math.cos(e) * b, this.size + b + Math.sin(e) *
                        b, this.size, this.size)
                }
                c.translate(this.size + b, this.size + b);
                c.fillRect(this.color, 0, 0, b, this.size);
                this.setAnchor(b, b)
            } else if ("polygon" == a.type) {
                var c = b = 9999999,
                    d = e = -9999999,
                    f = 0,
                    j;
                for (j = U.__cast(a.points, Array); f < j.length;) { var h = j[f];++f;
                    b = Math.min(b, h.x);
                    c = Math.min(c, h.y);
                    e = Math.max(e, h.x);
                    d = Math.max(d, h.y) } b = e - b;
                c = d - c;
                this.texture = w._platform.getRenderer().createTexture(b, c);
                d = this.texture.get_graphics();
                e = a.points[0];
                d.translate(-e.x, -e.y);
                f = 0;
                for (j = a.points.length; f < j;) {
                    var g = f++,
                        h = a.points[g],
                        i;
                    i = g == a.points.length - 1 ? e : a.points[g + 1];
                    var g = i.x - h.x,
                        k = i.y - h.y;
                    i = Math.sqrt(Math.pow(g, 2) + Math.pow(k, 2));
                    g = 180 * Math.atan2(k, g) / Math.PI;
                    d.save();
                    d.translate(h.x, h.y);
                    d.rotate(g);
                    d.fillRect(this.color, 0, 0, i, this.size);
                    d.restore()
                }
                this.setAnchor(0.5 * b, 0.5 * c)
            }
            this.setXY(a.finalx, a.finaly);
            (0 < a.rotation || 0 > a.rotation) && this.setRotation(a.rotation)
        },
        getNaturalWidth: function() { return null != this.texture ? this.texture.get_width() : 0 },
        getNaturalHeight: function() {
            return null != this.texture ? this.texture.get_height() :
                0
        },
        __class__: qe
    });
    var Gf = function() { this._actorsToRemove = [];
        this._actorsById = new K;
        this._actorsByTags = new K;
        this._actorsByTemplate = new K;
        this._actorsByComponents = new K;
        this._actors = [];
        this.onActorRemoved = new I;
        this.onActorAdded = new I;
        this.onActorSpawn = new Tc;
        k.call(this) };
    g["stolo.ensys.system.ActorSystem"] = Gf;
    Gf.__name__ = ["stolo", "ensys", "system", "ActorSystem"];
    Gf.__super__ = k;
    Gf.prototype = l(k.prototype, {
        get_name: function() { return "ActorSystem_48" },
        onAdded: function() {
            this._renderer = this.owner._compMap.RendererSystem_50;
            for (var a = L.getComponentsIds(), b = 0; b < a.length;) { var c = a[b];++b;
                this._actorsByComponents.set(c, []) } a = L.getTemplateIds();
            for (b = 0; b < a.length;) c = a[b], ++b, this._actorsByTemplate.set(c, [])
        },
        onRemoved: function() { k.prototype.onRemoved.call(this);
            this._actorsToRemove = this._actorsById = this._actorsByTags = this._actorsByTemplate = this._actorsByComponents = this._renderer = null },
        onUpdate: function() { for (; 0 < this._actorsToRemove.length;) this._removeActor(this._actorsToRemove.pop()) },
        spawn: function(a, b) {
            var c = L.create(a);
            if (null == c) return null;
            this.onActorSpawn.emit(c, a);
            this.addActor(c);
            if (null != b) { var d = c._compMap.Sprite_19; if (null != d) d.onInitComplete.connect(b).once();
                else b() }
            return c
        },
        spawnTemplate: function(a) { a = L.fromTemplate(a);
            null != a && (this.onActorSpawn.emit(a, null), this.addActor(a)); return a },
        addActor: function(a) { this.registerActor(a);
            this._renderer.addActor(a);
            null != Gf.addedMethod && this.callMethodOn(a, Gf.addedMethod);
            this.onActorAdded.emit(a); return a },
        callMethodOn: function(a, b) {
            for (var c = a.firstComponent,
                    d; null != c;) d = y.getProperty(c, b), null != d && d.apply(c, null), c = c.next;
            return a
        },
        removeActor: function(a) { if (null == this._actorsToRemove) return null;
            this._actorsToRemove.push(a); return a },
        _removeActor: function(a) { this.unregisterActor(a);
            this.onActorRemoved.emit(a);
            this._renderer.removeActor(a);
            a.dispose(); return a },
        getAll: function() { return this._actors },
        getActorsByComponent: function(a) { return this._actorsByComponents.get(Y.getClassName(a)) },
        getActorsByTemplate: function(a) { return this._actorsByTemplate.get(a) },
        registerActor: function(a) {
            this._actors.push(a);
            for (var b = a.firstComponent; null != b;) { var c = Y.getClassName(Y.getClass(b)),
                    d = this._actorsByComponents.get(c);
                null == d && (d = [], this._actorsByComponents.set(c, d));
                d.push(a);
                b = b.next } b = a._compMap.TemplateComponent_47;
            if (null != b) {
                c = this._actorsByTemplate.get(b.key);
                null == c && (c = [], this._actorsByTemplate.set(b.key, c));
                c.push(a);
                c = 0;
                for (d = b.tags; c < d.length;) { var e = d[c];++c; var f = this._actorsByTags.get(e);
                    null == f && (f = [], this._actorsByTags.set(e, f));
                    f.push(a) }
                "" !=
                b.uuid && null != b.uuid && this._actorsById.set(b.uuid, a)
            }
        },
        unregisterActor: function(a) { N.remove(this._actors, a); for (var b = [this._actorsByComponents, this._actorsByTemplate, this._actorsByTags], c = 0; c < b.length;) { var d = b[c];++c; for (d = d.iterator(); d.hasNext();) { var e = d.next();
                    N.remove(e, a) } } a = a._compMap.TemplateComponent_47;
            null != a && this._actorsById.remove(a.uuid) },
        setActorId: function(a, b) {
            var c = a._compMap.TemplateComponent_47;
            null != c && (null != c.uuid && "" != c.uuid && this._actorsById.exists(c.uuid) && this._actorsById.remove(c.uuid),
                c.uuid = b);
            this._actorsById.set(b, a)
        },
        __class__: Gf
    });
    var zj = function(a, b) { this._actorMap = new $b;
        this.enable = !1;
        k.call(this);
        this._dimensions = b;
        this._renderer = a };
    g["stolo.ensys.system.CullingSystem"] = zj;
    zj.__name__ = ["stolo", "ensys", "system", "CullingSystem"];
    zj.__super__ = k;
    zj.prototype = l(k.prototype, {
        get_name: function() { return "CullingSystem_49" },
        onAdded: function() { null == this._dimensions && (this._dimensions = this._renderer.dimensions) },
        addComponent: function(a, b) {
            if (this.enable) {
                var c = this._actorMap.h[b.__id__];
                if (null == c) { var c = b._compMap.Sprite_19,
                        d = this._renderer.getLayer(null == c ? "default" : c.layer);
                    null == d && (d = this._renderer.getLayer("default"));
                    c = { actor: b, position: b._compMap.TransformComponent_66.position, display: c, layer: d, components: [], culling: !0, start: !0 };
                    this._actorMap.set(b, c) } c.components.push(a)
            } else a.enableCulling(!1)
        },
        removeComponent: function(a, b) {
            var c = this._actorMap.h[b.__id__];
            if (null != c) {
                for (var c = c.components, d = 0, e = c.length; d < e;) { var f = d++; if (a == c[f]) { c.splice(f, 1); break } } 0 == c.length &&
                    this._actorMap.remove(b)
            }
        },
        onUpdate: function() {
            if (this.enable) {
                var a;
                a = null == this._camera ? this._dimensions.width / 2 - 100 : this._camera.x - 100;
                for (var b = a + this._dimensions.width + 100, c = 0, d = 0, c = !1, e = this._actorMap.iterator(); e.hasNext();) {
                    var f = e.next(),
                        d = null == f.display ? 0 : 0.5 * f.display.getNaturalWidth(),
                        c = f.position.x + f.layer.x._value + (null == this._camera ? this._dimensions.width / 2 : this._camera.x),
                        c = c + d < a || c - d > b;
                    if (f.start || c != f.culling) {
                        f.start = !1;
                        f.culling = c;
                        f = f.components;
                        for (d = 0; d < f.length;) {
                            var j = f[d];
                            ++d;
                            j.enableCulling(c)
                        }
                    }
                }
            }
        },
        __class__: zj
    });
    var ug = function() { this.onComplete = new ia };
    g["stolo.ensys.system.PhysicDebugSystem"] = ug;
    ug.__name__ = ["stolo", "ensys", "system", "PhysicDebugSystem"];
    ug.__super__ = k;
    ug.prototype = l(k.prototype, {
        get_name: function() { return "PhysicDebugSystem_43" },
        onAdded: function() { this.initActors(this.owner._compMap.ActorSystem_48) },
        onStart: function() {
            this._renderer = this.owner._compMap.RendererSystem_50;
            this._space = this.owner._compMap.PhysicSystem_44.getSpace();
            null == this.dimensions &&
                (this.dimensions = this._renderer.dimensions);
            k.prototype.onStart.call(this);
            this.onComplete.emit()
        },
        onUpdate: function() {},
        dispose: function() { k.prototype.dispose.call(this) },
        initActors: function(a) { a.onActorSpawn.connect(n(this, this.onActorSpawn)) },
        onActorSpawn: function(a) { null != a && ug.enabled && null != a._compMap.PhysicsComponent_42 && null == a._compMap.PhysicsDebugComponent_45 && a.add(new xh) },
        __class__: ug
    });
    var he = function() {
        this._bodiesToRemove = [];
        this._bodiesToAdd = [];
        this._contactsListenerHandler = new K;
        this._contactsListener = new K;
        this._contactTypes = new K;
        this._speed = 1;
        this._fixedDt = 0.025;
        this._currentDt = 0;
        this._enabled = !0;
        this.alwaysInverseNormal = !1;
        this.stepMode = 1;
        this.onPhysicUpdate = new I;
        k.call(this);
        this._contactTypes.set("ANY_BODY", dc.ANY_BODY)
    };
    g["stolo.ensys.system.PhysicSystem"] = he;
    he.__name__ = ["stolo", "ensys", "system", "PhysicSystem"];
    he.getListenerId = function(a, b, c, d) { return u.string(a) + "-" + u.string(b) + "-" + he.getOptionId(c) + "-" + he.getOptionId(d) };
    he.getOptionId = function(a) {
        return H.is(a,
            O.TClass(Array)) ? a.join(",") : a
    };
    he.__super__ = k;
    he.prototype = l(k.prototype, {
        get_name: function() { return "PhysicSystem_44" },
        getSpace: function() { return this._space },
        setGravity: function(a, b) { this._space.set_gravity(fa.get(a, b, !0)); return this._space.get_gravity() },
        onAdded: function() { this._space = new pm(fa.get(0, 900, !0));
            this._speedAdjuster = this.owner._compMap.SpeedAdjuster_63 },
        onRemoved: function() {
            this._space.clear();
            if (null != this._contactsListenerHandler)
                for (var a = this._contactsListenerHandler.iterator(); a.hasNext();) a.next().dispose();
            this._speedAdjuster = this._contactTypes = this._contactsListener = this._bodiesToRemove = this._bodiesToAdd = this._space = null;
            k.prototype.onRemoved.call(this)
        },
        onUpdate: function(a) {
            if (this._enabled) {
                null != this._speedAdjuster && (this._speed = this._speedAdjuster.scale._value);
                if (0 >= this._speed) return;
                switch (this.stepMode) {
                    case 1:
                        this._fixedDiff = a / (this._fixedDt * this._speed);
                        this._step = 1.1 < this._fixedDiff ? (this._fixedDt * this._fixedDiff + 0.008) * this._speed : this._fixedDt * this._speed;
                        0.009 >= this._step && (this._step =
                            0.009);
                        0.06 < this._step && (this._step = 0.06);
                        this._space.step(this._step);
                        break;
                    case 2:
                        for (this._currentDt += a; this._currentDt >= this._fixedDt;) this.onPhysicUpdate.emit(this._fixedDt), this._space.step(this._fixedDt), this._currentDt -= this._fixedDt;
                        break;
                    case 0:
                        this._space.step(this._fixedDt)
                }
                this.onPhysicUpdate.emit(a)
            }
            for (; 0 < this._bodiesToAdd.length;) this._space.zpp_inner.wrap_bodies.add(this._bodiesToAdd.pop());
            for (; 0 < this._bodiesToRemove.length;) this._space.zpp_inner.wrap_bodies.remove(this._bodiesToRemove.pop())
        },
        enable: function(a) { this._enabled = a },
        addBody: function(a) { null != this._space && null != a && this._bodiesToAdd.push(a) },
        removeBody: function(a) { null != this._space && null != a && this._bodiesToRemove.push(a) },
        addContactListener: function(a, b, c, d, e, f, j) {
            null == j && (j = !1);
            if (null != this._space) {
                var h = this.getCbType(c),
                    g = this.getCbType(d),
                    c = he.getListenerId(a, b, c, d);
                if (null == this._contactsListener.get(c)) {
                    j = new el(this.alwaysInverseNormal, j);
                    if (a == ma.PRELISTENER) a = new Jj(b, h, g, n(j, j.onPreContact));
                    else if (a == ma.ONGOING) a =
                        new kg(a, b, h, g, n(j, j.onOngoingContact));
                    else if (a == ma.END) a = new kg(a, b, h, g, n(j, j.onContactEnd));
                    else if (a == ma.BEGIN) a = new kg(a, b, h, g, n(j, j.onContactBegin));
                    else throw "PhysicSystem: Contact listener unsupported: " + u.string(a);
                    this._space.zpp_inner.wrap_listeners.add(a);
                    this._contactsListener.set(c, a);
                    this._contactsListenerHandler.set(c, j)
                }
                this._contactsListenerHandler.get(c).addEntity(e, f)
            }
        },
        removeContactListener: function(a, b, c, d, e) {
            null != this._space && (this.getCbType(c), this.getCbType(d), a = this._contactsListenerHandler.get(he.getListenerId(a,
                b, c, d)), null != a && a.removeEntity(e))
        },
        getCbType: function(a) {
            if (null == this._space) return null;
            if (H.is(a, O.TClass(Array))) { if (1 == a.length) return this.getCbType(a[0]); var b = a.join(","),
                    c = this._contactTypes.get(b); if (null == c) { for (var c = new mg, d = 0; d < a.length;) { var e = a[d];++d;
                        e = this.getCbType(e);
                        c.including(e) } this._contactTypes.set(b, c) } return c }
            if (H.is(a, O.TClass(String))) return a = a.toUpperCase(), b = this._contactTypes.get(a), null == b && (b = new cf, this._contactTypes.set(a, b)), b;
            throw "Unknown kind of contact type " +
                u.string(a);
        },
        __class__: he
    });
    var yj = function(a, b) { null == b && (b = !1);
        this._layers = new K;
        this._container = new A;
        this.onLayerAdded = new I;
        this.scale = 1;
        this.displacement = new ob;
        this.dimensions = null != a ? a : new Ab(0, 0, w._platform.getStage().get_width(), w._platform.getStage().get_height());
        this.dimensionsScaled = this.dimensions.clone();
        this._useScissor = b;
        k.call(this) };
    g["stolo.ensys.system.RendererSystem"] = yj;
    yj.__name__ = ["stolo", "ensys", "system", "RendererSystem"];
    yj.__super__ = k;
    yj.prototype = l(k.prototype, {
        get_name: function() { return "RendererSystem_50" },
        onAdded: function() { this._sprite = new yd;
            this._useScissor && (this._sprite.scissor = new Ab(0, 0, this.dimensions.width, this.dimensions.height));
            this._sprite.setXY(this.dimensions.x, this.dimensions.y);
            this._container.add(this._sprite);
            this.owner.addChild(this._container) },
        getContainer: function() { return this._container },
        getSprite: function() { return this._sprite },
        addLayer: function(a) {
            var b = a.name,
                c = this.getLayer(b);
            null == c && (c = ka.startsWith(b, "grid") && 4 < b.length ? new Bk(a, Math.round(this.dimensions.width), Math.round(this.dimensions.height),
                u.parseInt(N.substr(b, 4, null))) : new Qf(a), this._layers.set(b, c), this._sprite.addChild((new A).add(c)), this.onLayerAdded.emit(c), this.move(this.displacement.x, this.displacement.y));
            return c
        },
        getLayer: function(a) { return this._layers.get(a) },
        getLayers: function() { for (var a = [], b = this._layers.iterator(); b.hasNext();) { var c = b.next();
                a.push(c) } return a },
        addActor: function(a) { this.getActorLayer(a).addChild(a) },
        removeActor: function(a) { this.getActorLayer(a).removeChild(a) },
        getActorLayer: function(a, b) {
            null == b &&
                (b = !0);
            var c = a._compMap.Sprite_19,
                c = null != c && null != c.layer ? c.layer : "default",
                d = this.getLayer(c);
            if (null == d && b) throw "Layer not found:" + c;
            return d
        },
        move: function(a, b) { this.displacement.set(a, b); for (var c = this._layers.iterator(); c.hasNext();) c.next().move(a, b) },
        setScale: function(a) { this.scale = a;
            this.dimensionsScaled.width = this.dimensions.width / a;
            this.dimensionsScaled.height = this.dimensions.height / a;
            this._sprite.setScale(a) },
        __class__: yj
    });
    var Aj = function() { k.call(this) };
    g["stolo.ensys.system.SoundSystem"] =
        Aj;
    Aj.__name__ = ["stolo", "ensys", "system", "SoundSystem"];
    Aj.__super__ = k;
    Aj.prototype = l(k.prototype, {
        get_name: function() { return "SoundSystem_39" },
        play: function(a, b, c, d, e, f, j) {
            null == f && (f = !1);
            null == e && (e = !1);
            null == d && (d = 1);
            if (null == a || "" == a) return null;
            if (null != b) { if (null == this._targetTransform) return null;
                b = b._compMap.TransformComponent_66; if (null == b || 64E4 < Math.pow(b.position.x - this._targetTransform.position.x, 2) + Math.pow(b.position.y - this._targetTransform.position.y, 2)) return null }
            return v.play(a, c,
                d, e, f, j)
        },
        __class__: Aj
    });
    var D = function() {};
    g["stolo.managers.AssetManager"] = D;
    D.__name__ = ["stolo", "managers", "AssetManager"];
    D.loadPacks = function(a, b, c) {
        null == c && (c = !0);
        for (var d = [], e = 0; e < a.length;) { var f = a[e];++e; var j = null;
            H.is(f, O.TObject) ? null != f.files && (j = D.createDynamicPack(f.name, f.files, function() {}, null != f.useFileAsEntryName ? f.useFileAsEntryName : !1)) : H.is(f, O.TClass(String)) && (j = D.loadPack(f, function() {}, c));
            null != j && d.push(j) }
        if (0 == d.length) return null != b && b(), null;
        a = new wi(d);
        if (null !=
            b) a.success.connect(function() { null != b && b() }).once();
        return a
    };
    D.getPack = function(a, b) { null == b && (b = !0);
        a = D.validatePackName(a); if (!D._cachedPacks.exists(a)) { if (b) throw "Assetpack " + a + " is not loaded: use AssetManager.loadPack"; return null } return D._cachedPacks.get(a) };
    D.validatePackName = function(a) { D._replacedPacks.exists(a) && (a = D._replacedPacks.get(a)); return a };
    D.loadPack = function(a, b, c, d, e) {
        null == c && (c = !0);
        null == d && (d = D.locale);
        a = D.validatePackName(a);
        if (D._cachedPacks.exists(a)) return b(D._cachedPacks.get(a)),
            null;
        if (D._loadingPacks.exists(a)) return D._loadingPacks.get(a).callbacks.push(b), D._loadingPacks.get(a).loader;
        if (null == e) { if (!pa.exists(a)) { if (-1 < a.indexOf("/")) return D.createSubPack(a, b); if (c) throw "Pack not found: '" + a + "'"; return null } e = null == d ? pa.fromAssets(a) : pa.fromAssetsLocalized(a, d) } D.onManifestInit.emit(a, e);
        c = w._platform.loadAssetPack(e);
        d = [];
        d.push(b);
        b = { name: a, manifest: e, loader: c, callbacks: d };
        D._loadingPacks.set(a, b);
        D._loadingPacksDict.set(e, b);
        c.get(D.onAssetsLoaded);
        return c
    };
    D.createDynamicPack =
        function(a, b, c, d) { null == d && (d = !1); var e = new pa;
            e.set_localBase("assets"); for (var f, j = 0, h = 0; h < b.length;) { var g = b[h];++h;
                f = g.split("/");
                f = pa.fromAssets(f[0]); if (null == f) throw "Unable to create the Manifest for the file " + g; for (var i = N.iter(f._entries); i.hasNext();)
                    if (f = i.next(), -1 != f.url.indexOf(g)) { j++;
                        g = d ? g : f.name.substring(f.name.lastIndexOf("/") + 1, f.name.length);
                        e.add(g, f.url, f.bytes, f.format); break } } if (0 == j) throw "The dynamic pack " + a + " is empty"; return D.loadPack(a, c, !1, null, e) };
    D.createSubPack =
        function(a, b) {
            if (pa.exists(a)) throw "Manifest" + a + " already exist";
            var c = a.split("/"),
                d = a.substring(a.indexOf("/") + 1, a.length),
                e = pa.fromAssets(c[0]);
            if (null == e) throw "Unable to create the Manifest for the path " + a;
            c = new pa;
            c.set_localBase("assets");
            for (var f = 0, j = N.iter(e._entries); j.hasNext();) { var h = j.next(); - 1 != h.name.indexOf(d) && (f++, e = h.name.substring(h.name.lastIndexOf("/") + 1, h.name.length), c.add(e, h.url, h.bytes, h.format)) }
            if (0 == f) throw "The sub pack " + a + " is empty";
            return D.loadPack(a, b, !1, null,
                c)
        };
    D.onAssetsLoaded = function(a) { var b, c = a.get_manifest();
        b = D._loadingPacksDict.h[c.__id__];
        D._loadingPacks.remove(b.name);
        c = a.get_manifest();
        D._loadingPacksDict.remove(c);
        D._cachedPacks.set(b.name, a);
        c = 0; for (b = b.callbacks; c < b.length;) { var d = b[c];++c;
            d(a) } };
    D.disposePack = function(a) {
        if (D._protectedPacks.exists(a)) throw "AssetPack " + a + " was protected using AssetManager.protectPack(), Please make sure you do not attempt to dispose of it!";
        if (D._loadingPacks.exists(a)) throw "Pack '" + a + "' is loading";
        if (!D._cachedPacks.exists(a)) return null;
        var b = D._cachedPacks.get(a);
        b.dispose();
        D._cachedPacks.remove(a);
        return b
    };
    D.getJSON = function(a, b, c, d) {
        null == d && (d = !0);
        null == c && (c = !0);
        null != a && 0 > a.indexOf(".") && (a += ".json");
        var e = D.getPack(b),
            f = null;
        if (d && (f = b + "_" + a, D._jsonCache.exists(f))) return D._jsonCache.get(f);
        e = e.getFile(a, !1);
        if (null == e) { if (c) throw "Cannot find JSON file '" + a + "' in pack " + b; return null }
        try { var j = JSON.parse(e.toString());
            d && (D._jsonCache.set(f, j), j);
            e.dispose(); return j } catch (h) {
            throw "Error loading JSON '" + a + "', pack:" + b +
                "\n\t" + u.string(h);
        }
    };
    var mb = function() {};
    g["stolo.managers.LocalizationManager"] = mb;
    mb.__name__ = ["stolo", "managers", "LocalizationManager"];
    mb.getLocale = function(a) { return mb.localesMap.get(a) };
    mb.localize = function(a, b) { var c = mb.getLocale(a);
        null != c ? (c.text = mb.applyTemplate(c._text, b), c.localized = !0) : c = { text: mb.NOT_FOUND_PREFIX + a + mb.NOT_FOUND_SUFFIX, localized: !1 }; return c };
    mb.localizeTextField = function(a, b, c, d) {
        c = mb.localize(b, c);
        null != c ? (a.set_text(c.text), null != c.fontStyle ? M.applyFontStyle(a, c.fontStyle) :
            a.set_font(d)) : a.set_text(b);
        return c
    };
    mb.applyTemplate = function(a, b) { if (null == b) return a; for (var c = 0, d = y.fields(b); c < d.length;) { var e = d[c];++c;
            a = ka.replace(a, "{{" + e + "}}", y.field(b, e)) } return a };
    mb.loadXML = function(a, b, c) {
        null == c && (c = !0);
        null == b && (b = "text");
        null == a && (a = "localization.xml");
        var d = D.getPack(b).getFile(a, !1);
        if (null == d) throw "Cannot find '" + a + "' in pack " + b;
        a = d.toString();
        a = mb.processCharacters(a);
        a = W.parse(a);
        a = new bh(a.firstElement());
        a.hasNode.resolve("fonts") && (b = a.node.resolve("fonts"),
            M.configureFromXML(b));
        if (a.hasNode.resolve("strings")) { a.node.resolve("strings"); for (a = a.node.resolve("strings").nodes.resolve("string").iterator(); a.hasNext();) b = a.next(), mb.addLocaleFormatFromXML(b) } c && d.dispose()
    };
    mb.addLocaleFormatFromXML = function(a) {
        var b = a.att.resolve("id"),
            c = { _text: a.get_innerData() },
            d = null;
        a.has.resolve("fontStyle") && (d = M.getFontStyle(a.att.resolve("fontStyle")));
        a.has.resolve("fontScale") && (d = M.extendFontStyle(d, "fontScale", u.parseFloat(a.att.resolve("fontScale"))));
        a.has.resolve("offsetX") &&
            (d = M.extendFontStyle(d, "offsetX", u.parseFloat(a.att.resolve("offsetX"))));
        a.has.resolve("offsetY") && (d = M.extendFontStyle(d, "offsetY", u.parseFloat(a.att.resolve("offsetY"))));
        a.has.resolve("align") && "" != a.att.resolve("align") && (d = M.extendFontStyle(d, "align", a.att.resolve("align")));
        if (a.has.resolve("fontName")) { var e = M.getFont(a.att.resolve("fontName"));
            null == e ? null : (d = M.extendFontStyle(d, "fontName", a.att.resolve("fontName")), d = M.extendFontStyle(d, "fontName", e)) } null != d && (!0 == d.generated && (d.name =
            b + "_style"), c.fontStyle = d);
        mb.localesMap.set(b, c)
    };
    mb.processCharacters = function(a) { a = (new Qc("\r\n", "g")).replace(a, "\n"); return a = (new Qc("\r", "g")).replace(a, "\n") };
    var C = function() {};
    g["stolo.managers.SceneManager"] = C;
    C.__name__ = ["stolo", "managers", "SceneManager"];
    C.createInstantTransition = function() { return new qi(0, E.quintOut) };
    C.change = function(a, b) {
        null == b && (b = C.createInstantTransition());
        if (null == C._director) throw "Director not set, was SceneManager.setScenes called?";
        C.onChange.emit();
        if (C.SkipChange) return C.SkipChange = !1, null;
        var c = C.getScene(a);
        C._director.unwindToScene((new A).add(c), b);
        return c
    };
    C.push = function(a, b) { null == b && (b = C.createInstantTransition()); if (null == C._director) throw "Director not set, was SceneManager.setScenes called?";
        C.onPush.emit(); var c = C.getScene(a);
        C._director.pushScene((new A).add(c), b); return c };
    C.pop = function(a) {
        if (1 == C._director.scenes.length) throw "Scene will not be removed (last in stack!)";
        var b = C._director.scenes[C._director.scenes.length - 1]._compMap.Scene_46;
        C.onPop.emit();
        C._director.popScene(a);
        return b
    };
    C.setScenes = function(a, b) { null == b && (b = !0);
        null == C._director && (C._director = new pi, b ? w.root.addChild((new A).add(C._director)) : w.root.add(C._director));
        C.addScenes(a) };
    C.addScenes = function(a) { for (var b = a.keys(); b.hasNext();) { var c = b.next();
            C.addScene(c, a.get(c)) } };
    C.addScene = function(a, b) { C.CaseSensitive || (a = a.toLowerCase()); if (C._sceneMap.exists(a)) throw "Illegal operation: scene '" + a + "' is already registered";
        C._sceneMap.set(a, b) };
    C.getScene = function(a) {
        C.CaseSensitive || (a = a.toLowerCase());
        if (!C._sceneMap.exists(a)) throw "Scene '" + a + "' is not registered or does not exists.";
        a = C._sceneMap.get(a);
        return Y.createInstance(a, [])
    };
    var v = function() {};
    g["stolo.managers.SoundManager"] = v;
    v.__name__ = ["stolo", "managers", "SoundManager"];
    v.__properties__ = { get_isMuted: "get_isMuted" };
    v.playMusic = function(a, b, c) {
        null == c && (c = -1);
        null == b && (b = !1);
        if (v._musicDisabled || null == v._soundPack) return null;
        v._unmuteMusic = a;
        if (0 == v._volume) return null;
        0 > c && (c = v.defaultMusicVolume);
        if (v._currentMusic == a && !b) return null;
        b = v.play(a, "MUSIC", c, !0, !1);
        if (null == b) return b;
        v._currentMusic = a;
        return v._currentMusicPlayback = b
    };
    v.play = function(a, b, c, d, e, f) {
        null == e && (e = !1);
        null == d && (d = !1);
        null == c && (c = 1);
        if (v._soundsDisabled || null == v._soundPack || 0 == v._volume || null == a) return null;
        0 <= a.indexOf("{") && (a = v.getIdFromTemplate(a, f));
        f = Ie.stamp();
        if (v.soundPollingMap.exists(a)) { var j = v.soundPollingMap.get(a); if (f - j < v.soundPollingSeconds) return null } v.soundPollingMap.set(a, f);
        f = null;
        a = v._soundPack.getSound(a, !1);
        if (null == a || 0 >= a.get_duration()) return null;
        null == b && (b = "OTHER");
        if (v.channels.exists(b)) { f = v.channels.get(b); if (!(null == f || f.get_complete().get__()) && e) return null;
            f = v.__playSoundInChannel(a, c, d, b, f) } else f = v.__playSoundInChannel(a, c, d, b);
        b = f;
        null != b._clonedElement && (b._clonedElement.autoplay = !0);
        return f
    };
    v.getIdFromTemplate = function(a, b) {
        var c = a;
        if (0 <= c.indexOf("{random(")) var d = c.split("{random(")[1],
            d = u.parseInt(d.split(")}")[0]),
            e = Math.floor(Math.random() * d + 1),
            c = ka.replace(c, "{random(" + d + ")}", "" + e);
        if (null != b) {
            d = 0;
            for (e = y.fields(b); d <
                e.length;) { var f = e[d];++d;
                c = ka.replace(c, "{{" + f + "}}", y.field(b, f)) }
        }
        return c
    };
    v.__playSoundInChannel = function(a, b, c, d, e) { null != e && (e.set_paused(!0), e.dispose(), v.channels.set(d, null));
        e = c ? a.loop(b) : a.play(b);
        v.channels.set(d, e); return e };
    v.mute = function() { v.setVolume(0) };
    v.unmute = function() { v.setVolume(v._unmuteVolume);
        null != v._unmuteMusic && v.playMusic(v._unmuteMusic) };
    v.setVolume = function(a, b, c) {
        null == b && (b = 0.2);
        null == c && (c = E.quadInOut);
        0 == a ? (v._unmuteVolume = 0 < v._volume ? v._volume : v.defaultVolume,
            v._volume = 0, v.enableMuteStorage && na.set("soundMuted", !0)) : (v._volume = a, 0 > v._volume && (v._volume = v.defaultVolume), v.enableMuteStorage && na.set("soundMuted", !1));
        w.volume.animateTo(v._volume, b, c);
        return w.volume
    };
    v.get_isMuted = function() { return -1 < v._volume ? 0 == v._volume : !1 };
    v.loadSounds = function(a, b) { D.loadPack(a, v.onAssetsLoaded);
        v.enableMuteStorage && !0 == na.get("soundMuted", !1) ? v.mute() : v.setVolume(v.defaultVolume);
        v._callback = b };
    v.setSounds = function(a) { v._soundPack = a };
    v.onAssetsLoaded = function(a) {
        v.setSounds(a);
        null != v._callback && v._callback()
    };
    var eb = g["stolo.managers.SpritesheetType"] = { __ename__: ["stolo", "managers", "SpritesheetType"], __constructs__: ["Auto", "JsonArray", "Grid", "Flump", "Zoe"] };
    eb.Auto = ["Auto", 0];
    eb.Auto.toString = r;
    eb.Auto.__enum__ = eb;
    eb.JsonArray = ["JsonArray", 1];
    eb.JsonArray.toString = r;
    eb.JsonArray.__enum__ = eb;
    eb.Grid = ["Grid", 2];
    eb.Grid.toString = r;
    eb.Grid.__enum__ = eb;
    eb.Flump = ["Flump", 3];
    eb.Flump.toString = r;
    eb.Flump.__enum__ = eb;
    eb.Zoe = ["Zoe", 4];
    eb.Zoe.toString = r;
    eb.Zoe.__enum__ = eb;
    var Ba =
        function() {};
    g["stolo.managers.SpritesheetManager"] = Ba;
    Ba.__name__ = ["stolo", "managers", "SpritesheetManager"];
    Ba.getSpritesheet = function(a, b, c, d) {
        null == b && (b = Ba.DefaultManifest);
        null == d && (d = eb.Auto);
        var e = b + "_" + a;
        if (Ba._cachedSpritesheets.exists(e)) c(Ba._cachedSpritesheets.get(e));
        else if (Ba._loadingSpritesheets.exists(e)) Ba._loadingSpritesheets.get(e).callbacks.push(c);
        else {
            var f = Ba.createRequest(e, a, b, c, d);
            Ba._loadingSpritesheets.set(e, f);
            f.loader = D.loadPack(b, function(a) {
                Ba.onRequestComplete(f,
                    a)
            })
        }
    };
    Ba.createRequest = function(a, b, c, d, e) { for (var f = b.split(","), j = [], h = 0; h < f.length;) { var g = f[h];++h; switch (e[1]) {
                case 3:
                    g = Im.getFileInfo(g, null); break;
                default:
                    g = Im.getFileInfo(g, Ba.DefaultFileName) } j.push(g) } f = [];
        f.push(d); return { id: a, pack: c, name: b, type: e, jsonFiles: j, callbacks: f } };
    Ba.onRequestComplete = function(a, b) {
        var c = null,
            d = a.jsonFiles[0],
            e;
        if (a.type == eb.Flump) c = new fl(a.name, b), c.set_name(a.id);
        else
            for (var f = 0, j = a.jsonFiles; f < j.length;) {
                var h = j[f];
                ++f;
                e = b.getFile(h.url, !1);
                if (null == e)
                    for (var g = !1, i = 0; !g;) { e = ka.replace(h.url, ".json", i + ".json");
                        e = b.getFile(e, !1); if (null == e) { if (0 == i) throw "Spritesheet not found: '" + h.url + "' on pack '" + a.pack + "'";
                            g = !0 } else e = JSON.parse(e.toString()), c = Ba.appendToSpriteSheet(c, e, b, h);
                        i++ } else e = JSON.parse(e.toString()), c = Ba.appendToSpriteSheet(c, e, b, h);
                c.set_name(a.id)
            }
        c.finalize();
        d = ka.replace(d.url, ".json", "_meta.json");
        e = b.getFile(d, !1);
        null != e && (d = JSON.parse(e.toString()), c.applyOverrides(d));
        Ba._loadingSpritesheets.remove(a.id);
        Ba._cachedSpritesheets.set(a.id,
            c);
        if (null != c) { d = 0; for (f = a.callbacks; d < f.length;) j = f[d], ++d, j(c) }
    };
    Ba.appendToSpriteSheet = function(a, b, c, d) { if (null != b.frames && b.frames.length) null == a && (a = new Kc), a.parseData(c, b, d.path);
        else if (0 < b.frameWidth) null == a && (a = new vg), a.parseData(c, b, d.path);
        else throw "Unsupported JSON data: " + u.string(b); return a };
    var na = function() {};
    g["stolo.managers.StorageManager"] = na;
    na.__name__ = ["stolo", "managers", "StorageManager"];
    na.get = function(a, b, c) {
        null == c && (c = !0);
        null == b && null != na.Defaults && (b = na.getDefaultValue(a));
        c && (a = na.Prefix + a);
        return w._platform.getStorage().get(a, b)
    };
    na.getDefaultValue = function(a) { return !Object.prototype.hasOwnProperty.call(na.Defaults, a) ? null : y.field(na.Defaults, a) };
    na.set = function(a, b, c) { null == c && (c = !0); if (c) { if (null == na.Prefix) throw "StorageManager.Prefix was not set";
            a = na.Prefix + a } return w._platform.getStorage().set(a, b) };
    na.getWithPrefix = function(a, b, c) { null == c && null != na.Defaults && (c = na.getDefaultValue(b)); return null == a ? na.get(b, c) : w._platform.getStorage().get(a + b, c) };
    na.setWithPrefix =
        function(a, b, c) { return null == a ? na.set(b, c) : w._platform.getStorage().set(a + b, c) };
    var M = function() {};
    g["stolo.managers.TextManager"] = M;
    M.__name__ = ["stolo", "managers", "TextManager"];
    M.addFontPack = function(a) { for (var b, c, d = a.get_manifest().iterator(); d.hasNext();) b = d.next(), c = b.name.indexOf(".fnt"), -1 < c && (c = b.name.substring(0, c), b = new yf(a, c), null == M.defaultFont && (M.defaultFont = b), M._fontMap.set(c, b)) };
    M.getFont = function(a, b) {
        null == b && (b = !0);
        if (b && !M._fontMap.exists(a)) throw "Font not found: '" + a + "'";
        return M._fontMap.get(a)
    };
    M.setDefaultFont = function(a) { M.defaultFont = a;
        M._fontMap.set(M.defaultFontName, a) };
    M.getFontStyle = function(a, b) { null == b && (b = !0); if (b && !M._fontStylesMap.exists(a)) throw "Font style not found: '" + a + "'"; return M._fontStylesMap.get(a) };
    M.addFontStyle = function(a) { if (null == a.font && (a.font = M.getFont(a.fontName), null == a.font)) throw "Font '" + a.fontName + "' not found to create font style '" + a.name + "'";
        M._fontStylesMap.set(a.name, a); return a };
    M.applyFontStyle = function(a, b) {
        null != b.font &&
            a.set_font(b.font);
        0 < b.fontScale && (a.setScale(b.fontScale), M.ChangePixelSnapping && 1 != b.fontScale && a.set_pixelSnapping(!1));
        if ((0 < b.offsetX || 0 > b.offsetX || 0 < b.offsetY || 0 > b.offsetY) && !U.__instanceof(a, Qe)) { if (0 < b.offsetX || 0 > b.offsetX) { var c = a.anchorX;
                c.set__(c._value - b.offsetX) } if (0 < b.offsetY || 0 > b.offsetY) c = a.anchorY, c.set__(c._value - b.offsetY) } null != b.align && a.set_align(b.align);
        null != b.letterSpacing && a.letterSpacing.set__(b.letterSpacing);
        return a
    };
    M.getLocalizedTextSprite = function(a, b, c, d, e) {
        a = new Qe(a,
            b, e);
        null != c && null != d && a.setXY(c, d);
        return a
    };
    M.getTextSprite = function(a, b, c, d) { null == b && (b = "");
        null == a && (a = M.defaultFontName); var e = M.getFontStyle(a, !1),
            a = null != e ? e.font : M.getFont(a),
            b = new gb(a, b);
        null != c && b.x.set__(c);
        null != d && b.y.set__(d);
        null != e && (M.applyFontStyle(b, e), null != e.transform && b.set_text(M.applyTransform(b._text, e.transform))); return b };
    M.applyTransform = function(a, b) { return "uppercase" == b ? a.toUpperCase() : "lowercase" == b ? a.toLowerCase() : a };
    M.extendFontStyle = function(a, b, c) {
        if (null == a ||
            !0 != a.generated) { var d = { generated: !0 }; if (null != a) { d.parent = a; for (var e = 0, f = y.fields(a); e < f.length;) { var j = f[e];++e;
                    y.setProperty(d, j, y.field(a, j)) } } a = d } y.setProperty(a, b, c);
        return a
    };
    M.configureFromXML = function(a) {
        var b = null;
        if (a.has.resolve("defaultFont") && (b = M.getFont(a.att.resolve("defaultFont")), null == b)) throw "Default font '" + a.att.resolve("defaultFont") + "' not found";
        for (a = a.nodes.resolve("style").iterator(); a.hasNext();) {
            var c = a.next(),
                d = M.createFontStyle(c.att.resolve("name"));
            c.has.resolve("fontName") &&
                (d.fontName = c.att.resolve("fontName"));
            c.has.resolve("fontScale") && (d.fontScale = u.parseFloat(c.att.resolve("fontScale")));
            c.has.resolve("offsetX") && (d.offsetX = u.parseFloat(c.att.resolve("offsetX")));
            c.has.resolve("offsetY") && (d.offsetY = u.parseFloat(c.att.resolve("offsetY")));
            c.has.resolve("letterSpacing") && (d.letterSpacing = u.parseFloat(c.att.resolve("letterSpacing")));
            c.has.resolve("align") && ("center" == c.att.resolve("align") && (d.align = Z.Center), "left" == c.att.resolve("align") && (d.align = Z.Left), "right" ==
                c.att.resolve("align") && (d.align = Z.Right));
            c.has.resolve("transform") && (d.transform = c.att.resolve("transform"));
            null == b && (b = d.font);
            M.addFontStyle(d)
        }
        null != b ? M.setDefaultFont(b) : null
    };
    M.createFontStyle = function(a) { return { name: a, fontName: M.defaultFontName, transform: M.defaultTransform } };
    var wg = function(a, b, c, d, e, f, j) { null == j && (j = !0);
        this.fps = -1;
        this.frames = [];
        this.name = b;
        this.prefix = c;
        this.spriteSheet = a;
        this.fps = d;
        this.width = e;
        this.height = f;
        this.loop = j };
    g["stolo.sprites.AnimationSymbol"] = wg;
    wg.__name__ = ["stolo", "sprites", "AnimationSymbol"];
    wg.prototype = {
        getReversedFrames: function() { return null != this._reversedFrames ? this._reversedFrames : this._reversedFrames = this.frames.slice().reverse() },
        addCuePoint: function(a) { null == this.cues && (this.cues = []);
            this.cues.push(a) },
        addFrame: function(a) { this.frames.push(a) },
        orderFramesByName: function() { this.frames.sort(function(a, b) { return a.name == b.name ? 0 : a.name > b.name ? 1 : -1 }) },
        setFrames: function(a, b) {
            for (var c = [], d = 0; d < a.length;) {
                var e = a[d];
                ++d;
                var f = b[e - Kc.BaseIndex];
                if (null == f) throw "Frame " + e + " not found";
                c.push(f)
            }
            0 < c.length && (this.frames = c);
            return this.frames
        },
        setFrameData: function(a, b) { null != this.frames[a] && (this.frames[a].data = b) },
        __class__: wg
    };
    var Hb = function(a, b, c, d, e) { null == e && (e = !0);
        this.onInit = new ia;
        this.autoCenter = !0;
        V.call(this, null);
        this.autoCenter = e;
        this.currentSymbolName = b; if (null != d) this.onInit.connect(d).once();
        null != a && Ba.getSpritesheet(a, c, function(a) { return function(b) { return a(b) } }(n(this, this.onSpritesheetReady))) };
    g["stolo.sprites.BitmapSprite"] =
        Hb;
    Hb.__name__ = ["stolo", "sprites", "BitmapSprite"];
    Hb.__super__ = V;
    Hb.prototype = l(V.prototype, {
        set_currentSymbol: function(a) { this._currentSymbol = a;
            null != this._currentSymbol && (this.currentSymbolName = this._currentSymbol.name); return this._currentSymbol },
        onStop: function() { V.prototype.onStop.call(this);
            this.onInit = this.currentSymbolName = this._currentSymbol = this._spritesheet = null },
        onAdded: function() { V.prototype.onAdded.call(this);
            null != this._spritesheet && this.onInit.emit() },
        onSpritesheetReady: function(a) { this.initialize(a) },
        setSymbol: function(a, b) { null == b && (b = !0); var c = this._spritesheet.getBitmapSymbol(a); if (null == c) { if (b) throw "Symbol not found: '" + a + "' for spritesheet '" + this._spritesheet.get_name() + "'"; return null } this.set_currentSymbol(c); return this._currentSymbol },
        initialize: function(a) { this._spritesheet = a;
            null != this.currentSymbolName && this.setSymbol(this.currentSymbolName);
            this.autoCenter && null != this._currentSymbol && 0 >= this._currentSymbol.width && this.centerAnchor();
            null != this.owner && this.onInit.emit() },
        draw: function(a) {
            null !=
                this._currentSymbol ? 0 < this._currentSymbol.width && 0 < this._currentSymbol.height && a.drawSubTexture(this._currentSymbol.texture, this._currentSymbol.offsetX, this._currentSymbol.offsetY, this._currentSymbol.x, this._currentSymbol.y, this._currentSymbol.width, this._currentSymbol.height) : V.prototype.draw.call(this, a)
        },
        getNaturalWidth: function() { return null == this._currentSymbol ? 0 : this._currentSymbol.sourceWidth },
        getNaturalHeight: function() { return null == this._currentSymbol ? 0 : this._currentSymbol.sourceHeight },
        __class__: Hb,
        __properties__: l(V.prototype.__properties__, { set_currentSymbol: "set_currentSymbol" })
    });
    var Xb = function(a, b, c, d, e) { null == d && (d = !0);
        this._isPlaying = !1;
        this._currentFrame = 0;
        this.nextCuePointFrame = this._cuepointIndex = -1;
        this.isReady = !1;
        this.onCuePoint = new Tc;
        this.onReady = new I;
        this.onPlaylistComplete = new ia;
        this.animComplete = new Tc;
        this.isReady = this.autoRestart = !1;
        this._position = this._currentFrame = 0;
        this.speed = new Ca(1);
        this._overrides = e;
        Hb.call(this, a, null, b, c, d) };
    g["stolo.sprites.BitmapAnimation"] =
        Xb;
    Xb.__name__ = ["stolo", "sprites", "BitmapAnimation"];
    Xb.__super__ = Hb;
    Xb.prototype = l(Hb.prototype, {
        onSpritesheetReady: function(a) { this.initialize(a) },
        dispose: function() { Hb.prototype.dispose.call(this);
            this.onReady = this.animComplete = null;
            this._isPlaying = !1;
            this._completeCallback = this._animation = this._currentSprite = this._spritesheet = this._frames = null },
        initialize: function(a) {
            this._spritesheet = a;
            null != this._overrides && a.applyOverrides(this._overrides);
            null == this.animName && (this.animName = this._spritesheet.defaultAnim);
            this.start();
            this.onInit.emit()
        },
        onAdded: function() { Hb.prototype.onAdded.call(this);
            null != this._spritesheet && (this.isReady ? this.onReady.emit(this) : this.start()) },
        start: function() { this.isReady || (this.isReady = !0, this.gotoAndPlay(this.animName, this.animParams), this.autoCenter && null != this._animation && 0 < this._animation.width && this.centerAnchor(), null == this._animation && (this._isPlaying = !1, this.animName = null), null != this.owner && this.onReady.emit(this)) },
        onUpdate: function(a) {
            this.isReady && (this.updateAnim(a),
                Hb.prototype.onUpdate.call(this, a))
        },
        updateAnim: function(a) { 0 != (this._flags & 2) && this._isPlaying && (this.speed.update(a), this._newPos = this._position + a * this._currentFPS * this.speed._value, this._newPos > this._frames.length ? this.handleAnimComplete() : (this._position = this._newPos, this.gotoFrame(Math.floor(this._position) + 1))) },
        handleAnimComplete: function() {
            !this._animation.loop || null != this._frames && 1 >= this._frames.length ? (this.stop(), this.gotoFrame(this._frames.length)) : this._position = 0;
            if (null != this._completeCallback) {
                var a =
                    this._completeCallback;
                this._completeCallback = null;
                a()
            }
            null != this.animComplete && (this.animComplete.emit(this._animation.name, this), this.nextAnim())
        },
        nextAnim: function(a) { null != this._playlist && (0 >= this._playlist.length ? (this._animCompletePlaylistCallback = this._playlist = null, this.onPlaylistComplete.emit()) : (this.gotoAnim(this._playlist.shift(), a), null == a && null != this._animCompletePlaylistCallback && (this._completeCallback = this._animCompletePlaylistCallback))) },
        hasAnim: function(a) {
            return null == this._spritesheet ?
                !1 : null != this._spritesheet.getAnimation(a, this.prefix)
        },
        stop: function() { this._isPlaying = !1 },
        gotoAndStop: function(a, b) { this.gotoAndPlay(a, b);
            this._isPlaying = !1; return this._animation },
        gotoAndPlay: function(a, b) {
            this.isReady && (this._playlist = null);
            if ("string" == typeof a) { if (!this.autoRestart && null != this._animation && a == this._animation.name && this._isPlaying) return this.gotoAnim(a, b), this._animation;
                this.gotoAnim(a, b) } else if ((a | 0) === a) this.gotoFrame(a, !0), this._position = this._currentFrame - 1;
            else if (a instanceof Array && null == a.__enum__) { this._playlist = a; if (0 >= this._playlist.length) throw "Received empty playlist!";
                this.nextAnim(b) } this._isPlaying = !0;
            return this._animation
        },
        gotoAnim: function(a, b) {
            if (null == this._spritesheet) this.animName = a, this.animParams = b;
            else {
                var c = this._spritesheet.getAnimation(a, this.prefix);
                if (null == c) Xb.verbose && null;
                else if (this.animName = a, this.animParams = b, this._completeCallback = null, null == b) this.setAnim(c);
                else if ((b | 0) === b && 0 < b) this.setAnim(c), this.gotoAndPlay(b);
                else {
                    null != b.onComplete &&
                        (this._completeCallback = b.onComplete);
                    Object.prototype.hasOwnProperty.call(b, "next") && (null == this._playlist && (this._playlist = []), this._playlist.push(b.next));
                    null != this._playlist && (null != b.onPlaylistComplete ? (this.onPlaylistComplete.connect(b.onPlaylistComplete).once(), this._animCompletePlaylistCallback = b.onComplete) : null != this._completeCallback && (this.onPlaylistComplete.connect(this._completeCallback).once(), this._completeCallback = null));
                    this.setAnim(c, b.reverse);
                    if (Object.prototype.hasOwnProperty.call(b,
                            "loop") && null != this.get_animation() && (!0 == b.loop || !1 == b.loop)) this.get_animation().loop = b.loop;
                    0 < b.frame && this.gotoAndPlay(b.frame)
                }
            }
        },
        setAnim: function(a, b) {
            null == b && (b = !1);
            this._animation = a;
            this._frames = b ? a.getReversedFrames() : a.frames;
            this._currentFPS = 0 < this._animation.fps ? this._animation.fps : this.get_spritesheet().fps;
            this.nextCuePointFrame = this._cuepointIndex = -1;
            this.gotoFrame(1, !0);
            this.getNextCuePoint();
            this._position = 0;
            if (null == this._frames) throw "Animation '" + this._defaultAnimName + "' does not have frames!";
            this.autoCenter && this.centerAnchor()
        },
        gotoFrame: function(a, b) { null == b && (b = !1);
            1 > a && (a = 1);
            a > this._frames.length && (a = this._frames.length); if (this._currentFrame != a || b) - 1 < this.nextCuePointFrame && a >= this.nextCuePointFrame && this._currentFrame != a && (this.onCuePoint.emit(this._animation.cues[this._cuepointIndex].name, this), this.nextCuePointFrame = -1, this.getNextCuePoint()), a < this._currentFrame && (this._cuepointIndex = -1, this.getNextCuePoint()), this._currentFrame = a, this._currentSymbol = this._frames[a - 1] },
        getNextCuePoint: function() {
            null ==
                this._animation.cues ? this.nextCuePointFrame = -1 : (this._cuepointIndex++, null == this._animation.cues[this._cuepointIndex] ? this._cuepointIndex-- : this.nextCuePointFrame = this._animation.cues[this._cuepointIndex].frame)
        },
        get_spritesheet: function() { return this._spritesheet },
        set_isPlaying: function(a) { return this._isPlaying = a },
        get_animation: function() { return this._animation },
        __class__: Xb,
        __properties__: l(Hb.prototype.__properties__, { get_animation: "get_animation", set_isPlaying: "set_isPlaying", get_spritesheet: "get_spritesheet" })
    });
    var gl = function() {};
    g["stolo.sprites.BitmapFrameSymbol"] = gl;
    gl.__name__ = ["stolo", "sprites", "BitmapFrameSymbol"];
    gl.prototype = { get_subTexture: function() { null == this._subTexture && null != this.texture && (this._subTexture = this.texture.subTexture(this.x, this.y, this.width, this.height)); return this._subTexture }, __class__: gl, __properties__: { get_subTexture: "get_subTexture" } };
    var uk = function(a, b, c, d, e) {
        null == e && (e = !0);
        this._root = new A;
        this._cache = new K;
        this.onUpdateSignal = new I;
        "" == a && (a = null);
        this.prefix = a;
        Xb.call(this,
            null, null, d, e);
        null != b && Ba.getSpritesheet(b, c, function(a) { return function(b) { return a(b) } }(n(this, this.onSpritesheetReady)), eb.Flump)
    };
    g["stolo.sprites.FlumpAnimation"] = uk;
    uk.__name__ = ["stolo", "sprites", "FlumpAnimation"];
    uk.__super__ = Xb;
    uk.prototype = l(Xb.prototype, {
        onAdded: function() { this.owner.addChild(this._root);
            Xb.prototype.onAdded.call(this) },
        onUpdate: function(a) { this.onUpdateSignal.emit(a);
            Xb.prototype.onUpdate.call(this, a) },
        initialize: function(a) {
            this.flump = a;
            if (null == this.flump) throw "Missing or incompatible spritesheet: " +
                u.string(a);
            this._lib = this.flump.lib;
            Xb.prototype.initialize.call(this, a)
        },
        setDecorator: function(a) { this._decorator = a; return this },
        start: function() { this.isReady || (this.onReady.emit(this), this.isReady = !0, this.gotoAndPlay(this.animName, this.animParams)) },
        updateAnim: function(a) { 0 != (this._flags & 2) && this._isPlaying && this.speed.update(a) },
        setAnim: function(a) { this._animation = a;
            this._currentFPS = 0 < this._animation.fps ? this._animation.fps : this.get_spritesheet().fps;
            this.playFromCache(a.name) },
        gotoFrame: function(a) {
            null !=
                this.movie && this.movie.set_position((a - 1) / this.movie.symbol.frameRate)
        },
        playFromCache: function(a) { var b; if (null != this._cache)
                if (b = this._cache.get(a), null != b) b.set_position(0);
                else { if (null == this._lib._symbols.get(a)) return Xb.verbose && null, null;
                    b = this.createMovie(a);
                    this._cache.set(a, b) } else b = this.createMovie(a); return this.setCurrent(b) },
        createMovie: function(a) { a = this._lib.createSprite(a, !0);
            null != this._decorator && this._decorator(a); return a },
        setCurrent: function(a) {
            this._root.add(a);
            this.movie = a;
            null != this._animCompleteConnection && this._animCompleteConnection.dispose();
            this._animCompleteConnection = a.get_looped().connect(n(this, this.handleAnimComplete));
            return a
        },
        __class__: uk
    });
    var Kc = function() { this._animations = new K;
        this.nameSeparator = "/";
        this.prefixSeparator = "_";
        this.defaultAnim = "idle";
        this.fps = Kc.DefaultFPS;
        this.type = eb.JsonArray };
    g["stolo.sprites.Spritesheet"] = Kc;
    Kc.__name__ = ["stolo", "sprites", "Spritesheet"];
    Kc.prototype = {
        getAnimation: function(a, b, c) {
            null == c && (c = !1);
            null != b && (a = b + this.prefixSeparator +
                a);
            if (!this._animations.exists(a)) { if (c) throw "Animation not found: '" + a + "' in spritesheet " + this._name; return null }
            return this._animations.get(a)
        },
        getTexture: function(a, b, c) { null == c && (c = !0);
            a = this.getBitmapSymbol(a, b, c); return null == a ? null : a.get_subTexture() },
        getBitmapSymbol: function(a, b, c) { null == c && (c = !1); if (c && !this._bitmapSymbols.exists(a)) throw "Symbol '" + a + "' not found in spritesheet " + this._name; return this._bitmapSymbols.get(a) },
        finalize: function() {
            this.orderFramesByName();
            null != this._overrides &&
                this.applyOverrides(this._overrides)
        },
        parseData: function(a, b, c) {
            for (var a = a.getTexture(c + kb.removeFileExtension(b.meta.image)), d, e = c = 0, f = b.frames; e < f.length;) { var j = f[e];++e;
                d = null != this.nameSeparator ? j.filename.lastIndexOf(this.nameSeparator) : -1;
                d = 0 >= d ? null : N.substr(j.filename, 0, d);
                j = this.createFrameSymbol(j, a, c);
                null != d && this.addToAnim(d, j, a, c);
                this.addBitmapSymbol(j);
                null == this._frames && (this._frames = []);
                this._frames.push(j);
                c++ } null == this._animations.get(this.defaultAnim) && null != this._firstSymbol &&
                (this.defaultAnim = this._firstSymbol.name);
            if (null == this._animations.get(this.defaultAnim)) { c = 0; for (e = this._frames; c < e.length;) f = e[c], ++c, this.addToAnim(this.defaultAnim, f, a) } null != b.spritesheet && (this._overrides = b.spritesheet)
        },
        orderFramesByName: function() { for (var a = this._animations.iterator(); a.hasNext();) a.next().orderFramesByName();
            null != this._frames && this._frames.sort(function(a, c) { return a.name == c.name ? 0 : a.name > c.name ? 1 : -1 }) },
        addToAnim: function(a, b) {
            var c = this._animations.get(a);
            null == c && (c =
                new wg(this, a, null, -1, b.sourceWidth, b.sourceHeight), this._animations.set(a, c), null == this._firstSymbol && (this._firstSymbol = c));
            c.addFrame(b);
            return c
        },
        addBitmapSymbol: function(a, b) { null == this._bitmapSymbols && (this._bitmapSymbols = new K);
            null == b && (b = a.name);
            this._bitmapSymbols.set(b, a) },
        createFrameSymbol: function(a, b, c) {
            var d = new gl;
            d.index = c;
            d.name = a.filename;
            d.name.lastIndexOf(".") == d.name.length - 4 && (c = d.name.lastIndexOf("."), d.name = N.substr(d.name, 0, c));
            d.texture = b;
            d.x = a.frame.x;
            d.y = a.frame.y;
            d.width =
                a.frame.w;
            d.height = a.frame.h;
            d.offsetX = a.spriteSourceSize.x;
            d.offsetY = a.spriteSourceSize.y;
            d.sourceWidth = a.sourceSize.w;
            d.sourceHeight = a.sourceSize.h;
            return d
        },
        applyOverrides: function(a) { for (var b, c = 0, d = y.fields(a); c < d.length;) { var e = d[c];++c;
                b = y.field(a, e); if ("animations" == e || "anims" == e)
                    for (var e = 0, f = y.fields(b); e < f.length;) { var j = f[e];++e;
                        this.modAnim(j, y.field(b, j), !0) } else this.applyOverride(e, b) } },
        applyOverride: function(a, b) {
            Object.prototype.hasOwnProperty.call(this, a) && y.setProperty(this, a,
                b)
        },
        modAnim: function(a, b, c, d) {
            null == c && (c = !0);
            var e = this.getAnimation(a, d);
            if (null == e)
                if (c && null != b.frames) e = new wg(this, a, d, -1, 0, 0), this._animations.set(a, e);
                else throw "Anim '" + a + "' not found";
            a = 0;
            for (c = y.fields(b); a < c.length;) {
                var f = c[a];
                ++a;
                d = y.field(b, f);
                if ("frames" == f)
                    if (0 < d.length && 0 <= d[0] && e.setFrames(d, this._frames), 0 < d.length)
                        for (var f = 0, j = d.length; f < j;) { var h = f++;
                            e.setFrameData(h, d[h]) } else throw "Unknown frames format: " + u.string(d);
                    else "cues" == f || "cuepoints" == f ? (d = y.field(b, f), this.addCuePoints(e.name,
                        d, null, e)) : y.setProperty(e, f, d)
            }
            return e
        },
        addCuePoints: function(a, b, c, d) { null == d && (d = this.getAnimation(a, c, !0)); for (var e = 0; e < b.length;) { var f = b[e];++e;
                this.addCuePoint(a, f, c, d) } },
        addCuePoint: function(a, b, c, d) { null == d && (d = this.getAnimation(a, c, !0));
            d.addCuePoint(b); return d },
        get_name: function() { return this._name },
        set_name: function(a) { return this._name = a },
        __class__: Kc,
        __properties__: { set_name: "set_name", get_name: "get_name" }
    };
    var fl = function(a, b) {
        Kc.call(this);
        this.type = eb.Flump;
        this.loadLibrary(a,
            b)
    };
    g["stolo.sprites.FlumpSpritesheet"] = fl;
    fl.__name__ = ["stolo", "sprites", "FlumpSpritesheet"];
    fl.__super__ = Kc;
    fl.prototype = l(Kc.prototype, {
        getAnimation: function(a, b) { null != b && (a = b + this.prefixSeparator + a); return !this._animations.exists(a) ? this.createAnimation(a, b) : this._animations.get(a) },
        loadLibrary: function(a, b) { this.lib = new Pl(b, a) },
        createAnimation: function(a, b) { if (null == this.lib._symbols.get(a)) return null; var c = new wg(this, a, b, -1, 0, 0);
            this._animations.set(a, c); return c },
        finalize: function() {},
        __class__: fl
    });
    var vg = function() { this._framesMap = new Ec;
        Kc.call(this);
        this.type = eb.Grid };
    g["stolo.sprites.GridSpritesheet"] = vg;
    vg.__name__ = ["stolo", "sprites", "GridSpritesheet"];
    vg.__super__ = Kc;
    vg.prototype = l(Kc.prototype, {
        finalize: function() {},
        parseData: function(a, b, c) {
            a = a.getTexture(c + kb.removeFileExtension(b.image));
            null != b.defaultAnim && (this.defaultAnim = b.defaultAnim);
            for (var d = 0, e = y.fields(b.animations); d < e.length;) {
                var f = e[d];
                ++d;
                var j = y.field(b.animations, f),
                    c = new wg(this, f, null, 0 < j.fps ? j.fps :
                        -1, b.frameWidth, b.frameHeight, j.loop),
                    j = j.frames;
                if (null != j)
                    for (var h = 0; h < j.length;) { var g = j[h];++h; var g = g - vg.BaseIndex,
                            i; if (this._framesMap.exists(g)) i = this._framesMap.get(g);
                        else { i = new gl;
                            this._framesMap.set(g, i); for (var k = 0, l = 0, m = c.width * g; m >= a.get_width();) m -= a.get_width(), l += c.height;
                            k += m;
                            i.index = g;
                            i.name = f + "_" + g;
                            i.texture = a;
                            i.x = k;
                            i.y = l;
                            i.width = b.frameWidth;
                            i.height = b.frameHeight;
                            i.offsetX = 0;
                            i.offsetY = 0;
                            i.sourceWidth = b.frameWidth;
                            i.sourceHeight = b.frameHeight } c.addFrame(i) } this._animations.set(f,
                        c)
            }
        },
        __class__: vg
    });
    var Fa = g["stolo.ui.ButtonState"] = { __ename__: ["stolo", "ui", "ButtonState"], __constructs__: ["up", "pressed", "selected", "over", "disabled"] };
    Fa.up = ["up", 0];
    Fa.up.toString = r;
    Fa.up.__enum__ = Fa;
    Fa.pressed = ["pressed", 1];
    Fa.pressed.toString = r;
    Fa.pressed.__enum__ = Fa;
    Fa.selected = ["selected", 2];
    Fa.selected.toString = r;
    Fa.selected.__enum__ = Fa;
    Fa.over = ["over", 3];
    Fa.over.toString = r;
    Fa.over.__enum__ = Fa;
    Fa.disabled = ["disabled", 4];
    Fa.disabled.toString = r;
    Fa.disabled.__enum__ = Fa;
    var Kh = function(a, b,
        c, d, e) {
        null == e && (e = "buttons");
        null == d && (d = "");
        this._centered = this._hadDown = !1;
        this._textID = this._fontStyle = "";
        this._state = Fa.up;
        this.onDownCallback = this.onUpCallback = null;
        this.onChange = new I;
        this.onDown = new I;
        this.onUp = new I;
        this.onClick = new I;
        this.pressAnimation = td.bounceDownTemplate;
        this.clickNeedsDown = this.upClick = !0;
        this.data = {};
        this.index = -1;
        this.isSelected = this.isDisabled = !1;
        s.call(this);
        null == a && (a = G.get_sharedAssets());
        this._pack = a;
        this._disposer = new Ta;
        this.updateTexture(b);
        null != c && this._disposer.add(this.onClick.connect(c));
        this._textID = d;
        this._fontStyle = e
    };
    g["stolo.ui.Button"] = Kh;
    Kh.__name__ = ["stolo", "ui", "Button"];
    Kh.__super__ = s;
    Kh.prototype = l(s.prototype, {
        onAdded: function() { this.owner.add(this._disposer);
            this.build();
            null == this.origin && this.updateOrigin() },
        onRemoved: function() { F.kill(this);
            s.prototype.onRemoved.call(this);
            this.pressAnimation = this.onChange = this.onDown = this.onUp = this.onClick = this.onUpCallback = this.onDownCallback = this._disposer = this.origin = this._pack = this._downTexture = this._texture = this.display = null },
        setXY: function(a, b) { s.prototype.setXY.call(this, a, b);
            this.updateOrigin(); return this },
        updateOrigin: function() { null == this.origin && (this.origin = new ob(this.x._value, this.y._value));
            this.origin.x = this.x._value;
            this.origin.y = this.y._value },
        build: function() {
            if (null != this.display) throw "This button was already added into an Entity.";
            this.display = new V(this._texture);
            this.owner.addChild((new A).add(this.display));
            this._centered && this.display.centerAnchor();
            this._disposer.add(w._platform.getPointer().up.connect(n(this,
                this.onStageUp)));
            "" != this._textID && this.createLabel()
        },
        createLabel: function() { this.label = new Qe(this._textID, this._fontStyle);
            this.label.setAlign(Z.Center);
            this.owner.addChild((new A).add(this.label)); var a = s.getBounds(this.owner);
            this.label.centerAnchor().setXY(0.5 * a.width + 0.5 * this.label.getNaturalWidth(), 0.5 * a.height) },
        updateUpTexture: function(a) { this._texture = a },
        updateTexture: function(a) {
            null != a && (this._texture = G.getTexture(a, this._pack), this._downTexture = G.getTexture(a + "_pressed", this._pack,
                !1), this._disabledTexture = G.getTexture(a + "_disabled", this._pack, !1), this._selectedTexture = G.getTexture(a + "_selected", this._pack, !1))
        },
        updateState: function(a, b) {
            switch (a[1]) {
                case 1:
                    b = this._downTexture;
                    this.PressedAnimation(); break;
                case 2:
                    b = this._selectedTexture; break;
                case 4:
                    b = this._disabledTexture; break;
                default:
                    if (this.isDisabled) return this.updateState(Fa.disabled); if (this.isSelected) return this.updateState(Fa.selected);
                    b = this._texture } null == b && (b = this._texture);
            this.display.texture = b;
            this._state !=
                a && this._state
        },
        PressedAnimation: function() { null != this.pressAnimation && (this.setXY(this.origin.x, this.origin.y), F.runTemplate(this.pressAnimation, this)) },
        centerAnchor: function() { null != this.display && this.display.centerAnchor();
            this._centered = !0; return this },
        getNaturalWidth: function() { return this.owner.firstChild._compMap.Sprite_19.getNaturalWidth() },
        getNaturalHeight: function() { return this.owner.firstChild._compMap.Sprite_19.getNaturalHeight() },
        onStageUp: function() {
            this._hadDown && this.updateState(Fa.up);
            this._hadDown = !1
        },
        disable: function() { this.isSelected || (this.isDisabled = !0, this.updateState(Fa.disabled), this.onChange.emit(this)) },
        enable: function() { this.isDisabled && (this.isDisabled = !1, this.updateState(Fa.up), this.onChange.emit(this)) },
        select: function() { this.isSelected || (this.isSelected = !0, this.updateState(Fa.selected), this.onChange.emit(this)) },
        deselect: function() { this.isSelected && (this.isSelected = !1, this.updateState(Fa.up), this.onChange.emit(this)) },
        onPointerDown: function(a) {
            if (!this.isDisabled) {
                s.prototype.onPointerDown.call(this,
                    a);
                this._hadDown = !0;
                a._stopped = !0;
                this.updateState(Fa.pressed);
                this.onDown.emit(this);
                if (null != this.onDownCallback) this.onDownCallback(a);
                this.upClick || this.dispatchClick()
            }
        },
        onPointerUp: function(a) { if (!this.isDisabled && (s.prototype.onPointerUp.call(this, a), !this.clickNeedsDown || this._hadDown)) { this.updateState(Fa.up);
                this.onUp.emit(this); if (null != this.onUpCallback) this.onUpCallback(a);
                this.upClick && this.dispatchClick();
                this._hadDown = !1 } },
        dispatchClick: function() { this.onClick.emit(this) },
        __class__: Kh
    });
    var Re = function(a) { this._target = new ob;
        this._startPosition = new ob;
        this.returnX = this.returnY = -1;
        this.texture_handle = "dpad_handle";
        this.texture_base = "dpad";
        this.radians = this.pointerId = -1;
        this.axisX = this.axisY = this.directionX = this.directionY = 0;
        this.isActive = !1;
        this.enabled = !0;
        this.followSpeed = 0.8;
        this.isVisible = !0;
        this.startAlpha = 0;
        this.followTolerance = 1.1;
        this.follow = !0;
        this.limits = new Ab(0.1, 0.2, 0.6, 0.8);
        this.radiusSnapping = 0.9;
        this.deadZone = 0.1;
        this.radius = 75;
        k.call(this);
        this.pack = a };
    g["stolo.ui.Dpad"] =
        Re;
    Re.__name__ = ["stolo", "ui", "Dpad"];
    Re.__super__ = k;
    Re.prototype = l(k.prototype, {
        get_name: function() { return "Dpad_21" },
        dispose: function() { k.prototype.dispose.call(this);
            this.limits = this._base = this._handle = this._target = this._startPosition = this._disposer = this.pack = null },
        onStart: function() {
            this._disposer = this.owner._compMap.Disposer_68;
            null == this._disposer && (this._disposer = new Ta, this.owner.addChild((new A).add(this._disposer)));
            0 > this.returnX && (this.returnX = o.gameWidth * this.limits.x);
            0 > this.returnY &&
                (this.returnY = o.gameHeight * this.limits.height);
            this.setupListeners();
            this.build()
        },
        onUpdate: function(a) {
            k.prototype.onUpdate.call(this, a);
            if (this.isActive && this.follow && (Math.abs(this._startPosition.x - this._target.x) > this.radius * this.followTolerance || Math.abs(this._startPosition.y - this._target.y) > this.radius * this.followTolerance)) this._startPosition.x = Nb.lerp(this._startPosition.x, this._target.x, a * this.followSpeed), this._startPosition.y = Nb.lerp(this._startPosition.y, this._target.y, a * this.followSpeed),
                this.setXY(this._startPosition.x, this._startPosition.y)
        },
        setupListeners: function() { this._disposer.add(w._platform.getTouch().down.connect(n(this, this.onTouchDown)));
            this._disposer.add(w._platform.getTouch().move.connect(n(this, this.onTouchMove)));
            this._disposer.add(w._platform.getTouch().up.connect(n(this, this.onTouchUp))) },
        onTouchDown: function(a) { this.onPointerDown(a.viewX, a.viewY, a.id) },
        onTouchMove: function(a) { this.onPointerMove(a.viewX, a.viewY, a.id) },
        onTouchUp: function(a) {
            this.onPointerUp(a.viewX,
                a.viewY, a.id)
        },
        build: function() { null == this._base && (this._base = G.createImage(this.texture_base, this.pack), this.owner.addChild((new A).add(this._base)), this._base.disablePointer(), this._base.centerAnchor(), this._base.setAlpha(this.startAlpha), this._handle = G.createImage(this.texture_handle, this.pack), this._base.owner.addChild((new A).add(this._handle)), this._handle.disablePointer(), this._handle.centerAnchor(), this._handle.setAlpha(this.startAlpha), this.setXY(this.returnX, this.returnY), this.setVisible(this.isVisible)) },
        setVisible: function(a) { this.isVisible = a;
            null != this._base && (this._base.set_visible(a), this._handle.set_visible(a)) },
        setXY: function(a, b) {
            null != this.limits && (a = Nb.clamp(a, o.gameWidth * this.limits.x, o.gameWidth * this.limits.width), b = Nb.clamp(b, o.gameHeight * this.limits.y, o.gameHeight * this.limits.height));
            this._base.setXY(a, b);
            var c = this.radius / 2 * this.axisX,
                d = this.radius / 2 * this.axisY,
                e = this.radius / 2 * Math.sin(this.radians);
            Math.abs(c) > Math.abs(e) && (c = e);
            e = this.radius / 2 * Math.cos(this.radians);
            Math.abs(d) > Math.abs(e) &&
                (d = e);
            this._handle.setXY(this._base.anchorX._value + c, this._base.anchorY._value + -1 * d)
        },
        onPointerDown: function(a, b, c) { this.enabled && (a /= o.scale, b /= o.scale, null != this.limits && (a > o.gameWidth * this.limits.width || b < o.gameHeight * this.limits.y) || -1 != this.pointerId || (this.pointerId = c, this._base.setAlpha(1), this._handle.setAlpha(1), this._startPosition = new ob(a, b), this._target.x = a, this._target.y = b, this.setXY(this._startPosition.x, this._startPosition.y))) },
        onPointerMove: function(a, b, c) {
            this.enabled && this.pointerId ==
                c && (this.isActive = !0, a /= o.scale, b /= o.scale, this.axisX = Nb.clamp((a - this._startPosition.x) / this.radius, -1, 1), this.axisY = Nb.clamp((this._startPosition.y - b) / this.radius, -1, 1), Math.abs(this.axisX) < this.deadZone && (this.axisX = 0), Math.abs(this.axisY) < this.deadZone && (this.axisY = 0), this.directionX = 0 == this.axisX ? 0 : 0 < this.axisX ? 1 : -1, this.directionY = 0 == this.axisY ? 0 : 0 < this.axisY ? 1 : -1, Math.abs(this.axisX) >= this.radiusSnapping && (this.axisX = this.directionX), Math.abs(this.axisY) >= this.radiusSnapping && (this.axisY = this.directionY),
                    this.radians = Math.atan2(this.axisX, this.axisY), this.setXY(this._startPosition.x, this._startPosition.y), this.follow && (this._target.x = a, this._target.y = b))
        },
        onPointerUp: function(a, b, c) { c == this.pointerId && (this.pointerId = -1, this.isActive = !1, this._base.alpha.animateTo(0, 2, E.quadOut), this._handle.alpha.animateTo(0, 2, E.quadOut), this._handle.x.animateTo(this._base.anchorX._value, 0.35, E.backInOut), this._handle.y.animateTo(this._base.anchorY._value, 0.35, E.backInOut)) },
        __class__: Re
    });
    var qj = function(a) {
        this.angle = -1;
        Re.call(this, a)
    };
    g["stolo.ui.Joystick"] = qj;
    qj.__name__ = ["stolo", "ui", "Joystick"];
    qj.__super__ = Re;
    qj.prototype = l(Re.prototype, { onStart: function() { Re.prototype.onStart.call(this) }, onStop: function() { Re.prototype.onStop.call(this) }, onPointerMove: function(a, b, c) { Re.prototype.onPointerMove.call(this, a, b, c);
            this.enabled && -1 != this.pointerId && (this.angle = 180 * Math.atan2(b / o.scale - this._startPosition.y, a / o.scale - this._startPosition.x) / Math.PI) }, __class__: qj });
    var Qe = function(a, b, c) {
        this._x = this._y = this._offsetX =
            this._offsetY = 0;
        this.localized = !1;
        null != b && (this.fontStyle = M.getFontStyle(b), this._defaultFont = null != this.fontStyle ? this.fontStyle.font : M.getFont(b));
        null == this._defaultFont && (this._defaultFont = M.defaultFont);
        gb.call(this, this._defaultFont);
        null != a && this.setText(a, c)
    };
    g["stolo.ui.LocalizedTextSprite"] = Qe;
    Qe.__name__ = ["stolo", "ui", "LocalizedTextSprite"];
    Qe.__super__ = gb;
    Qe.prototype = l(gb.prototype, {
        applyFontStyle: function(a, b) {
            null == b && (b = !0);
            null == a && (a = this.fontStyle);
            null != a && (b && M.applyFontStyle(this,
                a), null != a.offsetX && (this._offsetX = a.offsetX), null != a.offsetY && (this._offsetY = a.offsetY), null != a.transform && gb.prototype.set_text.call(this, M.applyTransform(this._text, a.transform)), this.setXY(this._x, this._y))
        },
        onAdded: function() { gb.prototype.onAdded.call(this) },
        setText: function(a, b, c) { null == c && (c = !0);
            this._id = a;
            this.localized = !1;
            a = mb.localizeTextField(this, a, b, this._defaultFont);
            this.localized = a.localized;
            c && (null != this.fontStyle && this.applyFontStyle(this.fontStyle), null != a.fontStyle && this.applyFontStyle(a.fontStyle)) },
        set_text: function(a) { if (this.localized) throw "Attempting to set text directly with '" + a + "', please use setText() send null as constructor id or use a TextSprite instead";
            this.localized = !1; return gb.prototype.set_text.call(this, a) },
        setXY: function(a, b) { this._x = a;
            this._y = b; return gb.prototype.setXY.call(this, this._x + this._offsetX, this._y + this._offsetY) },
        toUpperCase: function() { gb.prototype.set_text.call(this, this._text.toUpperCase()) },
        __class__: Qe
    });
    var Jm = function(a) {
        this.onUpdateSound = new I;
        yd.call(this);
        this._pack = a;
        this._downOnTexture = G.getTexture("btn_sound_on_pressed", this._pack);
        this._downOffTexture = G.getTexture("btn_sound_off_pressed", this._pack)
    };
    g["stolo.ui.SoundButton"] = Jm;
    Jm.__name__ = ["stolo", "ui", "SoundButton"];
    Jm.__super__ = yd;
    Jm.prototype = l(yd.prototype, {
        dispose: function() { this.onUpdateSound = this._pack = null;
            yd.prototype.dispose.call(this) },
        onAdded: function() {
            yd.prototype.onAdded.call(this);
            this._soundButton = new Kh(this._pack, "btn_sound_off");
            this._soundButton.setXY(0, 0);
            this._soundButton.get_pointerUp().connect(n(this,
                this.onUp));
            this._soundButton.get_pointerDown().connect(n(this, this.onDown));
            this.owner.addChild((new A).add(this._soundButton));
            this.updateSoundState()
        },
        onUp: function(a) { a._stopped = !0;
            v.get_isMuted() ? v.unmute() : v.mute();
            this.onUpdateSound.emit(v.get_isMuted());
            this.updateSoundState() },
        onDown: function(a) { a._stopped = !0;
            v.get_isMuted() ? null != this._downOnTexture && (this._soundButton.display.texture = this._downOnTexture) : null != this._downOffTexture && (this._soundButton.display.texture = this._downOffTexture) },
        updateSoundState: function() { this._soundButton.display.texture = v.get_isMuted() ? G.getTexture("btn_sound_off", this._pack) : G.getTexture("btn_sound_on", this._pack);
            this._soundButton.updateUpTexture(this._soundButton.display.texture) },
        __class__: Jm
    });
    var hl = function(a) { this.onUp = {};
        this.onDown = {};
        k.call(this);
        H.configure(this, a) };
    g["stolo.ui.button.ButtonAnimation"] = hl;
    hl.__name__ = ["stolo", "ui", "button", "ButtonAnimation"];
    hl.__super__ = k;
    hl.prototype = l(k.prototype, {
        get_name: function() { return "ButtonAnimation_105" },
        onStart: function() { k.prototype.onStart.call(this);
            this._button = this.owner._compMap.Sprite_19;
            this._button.disposer.add(this._button.onDown.connect(n(this, this.onButtonDown)));
            this._button.disposer.add(this._button.onUp.connect(n(this, this.onButtonUp))) },
        onRemoved: function() { F.kill(this._button);
            k.prototype.onRemoved.call(this);
            this._button = null },
        onButtonDown: function() { F.to(this._button.display, this.onDown.props, this.onDown.params) },
        onButtonUp: function() {
            F.to(this._button.display, this.onUp.props,
                this.onUp.params)
        },
        __class__: hl
    });
    var il = function(a) { this._hadDown = !1;
        this.disposer = new Ta;
        this.state = fb.up;
        this.onChange = new I;
        this.onClick = new I;
        this.onDown = new I;
        this.onUp = new I;
        this.isSelected = this.isDisabled = !1;
        s.call(this);
        null != a && (null != a.onUp && this.onUp.connect(a.onUp), null != a.onDown && this.onDown.connect(a.onDown), null != a.onClick && this.onClick.connect(a.onClick), this.data = a.data) };
    g["stolo.ui.button.ButtonBase"] = il;
    il.__name__ = ["stolo", "ui", "button", "ButtonBase"];
    il.__super__ = s;
    il.prototype =
        l(s.prototype, {
            onAdded: function() { s.prototype.onAdded.call(this);
                this.display = new s;
                this.owner.addChild((new A).add(this.display)) },
            onStart: function() { s.prototype.onStart.call(this);
                this.disposer.add(this.get_pointerUp().connect(n(this, this.onPointerUpHandler)));
                this.disposer.add(this.get_pointerDown().connect(n(this, this.onPointerDownHandler)));
                this.disposer.add(w._platform.getPointer().up.connect(n(this, this.onPointerUpHandler)));
                this.owner.add(this.disposer) },
            onRemoved: function() {
                s.prototype.onRemoved.call(this);
                this.onChange = this.onDown = this.onUp = this.disposer = null
            },
            updateState: function(a) { if (this.isDisabled) return this.updateState(fb.disabled); if (this.isSelected) return this.updateState(fb.selected);
                this.state = a;
                this.onChange.emit(this) },
            disable: function() { this.isDisabled || (this.isDisabled = !0, this.updateState(fb.disabled)) },
            enable: function() { this.isDisabled && (this.isDisabled = !1, this.updateState(fb.up)) },
            select: function() { this.isSelected || (this.isSelected = !0, this.updateState(fb.selected)) },
            deselect: function() {
                this.isSelected &&
                    (this.isSelected = !1, this.updateState(fb.up))
            },
            onPointerDownHandler: function(a) { this.isDisabled || (this._hadDown = !0, a._stopped = !0, this.updateState(fb.pressed), this.onDown.emit(this)) },
            onPointerUpHandler: function(a) { if (!this.isDisabled && this._hadDown) { this._hadDown = !1;
                    this.updateState(fb.up);
                    this.onUp.emit(this); var b = new ob;
                    this.getViewMatrix().inverseTransform(a.viewX, a.viewY, b);
                    null != s.hitTest(this.display.owner, b.x, b.y) && this.onClick.emit(this) } },
            addChildSprite: function(a) {
                this.display.owner.addChild(null !=
                    a.owner ? a.owner : (new A).add(a))
            },
            __class__: il
        });
    var Hf = function() {};
    g["stolo.ui.button.ButtonFactory"] = Hf;
    Hf.__name__ = ["stolo", "ui", "button", "ButtonFactory"];
    Hf.create = function(a, b) { a = H.merge(Hf.DEFAULT_BUTTON_PARAMS, a, !0);
        null != b && (a = H.merge(a, b, !0)); var c = new A,
            d = new il(a.button);
        c.add(d);
        null != a.image && c.add(new jl(a.image));
        null != a.text && c.add(new kl(a.text));
        null != a.animation && c.add(new hl(a.animation));
        null != a.sound && c.add(new ll(a.sound)); return d };
    Hf.createTextImageButton = function(a, b, c, d,
        e, f) { null == c && (c = "buttons"); return Hf.create({ button: { onClick: d }, image: { asset: a, pack: e }, text: { value: b, fontStyle: c } }, f) };
    var jl = function(a) { this.autoCenter = !0;
        this.x = this.y = 0;
        k.call(this);
        H.configure(this, a);
        this.loadTextures() };
    g["stolo.ui.button.ButtonImage"] = jl;
    jl.__name__ = ["stolo", "ui", "button", "ButtonImage"];
    jl.__super__ = k;
    jl.prototype = l(k.prototype, {
        get_name: function() { return "ButtonImage_104" },
        onAdded: function() {
            k.prototype.onAdded.call(this);
            this.image = new V(null);
            this._button = this.owner._compMap.Sprite_19;
            this._button.addChildSprite(this.image);
            this._button.disposer.add(this._button.onChange.connect(n(this, this.onButtonChange)));
            this.onButtonChange(null)
        },
        onRemoved: function() { k.prototype.onRemoved.call(this);
            this.image = this._pack = this._button = this._selectedTexture = this._disabledTexture = this._downTexture = this._normalTexture = null },
        loadTextures: function() {
            this._pack = null == this.pack ? G.get_sharedAssets() : D.getPack(this.pack);
            null != this.asset && (this._normalTexture = G.getTexture(this.asset, this._pack), this._downTexture =
                G.getTexture(this.asset + "_pressed", this._pack, !1), this._disabledTexture = G.getTexture(this.asset + "_disabled", this._pack, !1), this._selectedTexture = G.getTexture(this.asset + "_selected", this._pack, !1));
            null == this._normalTexture && (this._normalTexture = w._platform.getRenderer().createTexture(100, 100), this._normalTexture.get_graphics().fillRect(16711680, 0, 0, 100, 100))
        },
        onButtonChange: function() {
            var a = null;
            switch (this._button.state[1]) {
                case 1:
                    a = this._downTexture;
                    break;
                case 2:
                    a = this._selectedTexture;
                    break;
                case 4:
                    a =
                        this._disabledTexture;
                    break;
                default:
                    a = this._normalTexture
            }
            this.image.texture = null != a ? a : this._normalTexture;
            this.image.setXY(this.x, this.y);
            this.autoCenter && this.image.centerAnchor()
        },
        __class__: jl
    });
    var ll = function(a) { k.call(this);
        H.configure(this, a) };
    g["stolo.ui.button.ButtonSound"] = ll;
    ll.__name__ = ["stolo", "ui", "button", "ButtonSound"];
    ll.__super__ = k;
    ll.prototype = l(k.prototype, {
        get_name: function() { return "ButtonSound_106" },
        onAdded: function() {
            k.prototype.onAdded.call(this);
            this._button = this.owner._compMap.Sprite_19;
            this._button.disposer.add(this._button.onUp.connect(n(this, this.onButtonUp)));
            this._button.disposer.add(this._button.onDown.connect(n(this, this.onButtonDown)));
            this._button.disposer.add(this._button.onClick.connect(n(this, this.onButtonClick)))
        },
        onButtonUp: function() { null != this.onUp && v.play(this.onUp) },
        onButtonDown: function() { null != this.onDown && v.play(this.onDown) },
        onButtonClick: function() { null != this.onClick && v.play(this.onClick) },
        __class__: ll
    });
    var fb = g["stolo.ui.button.ButtonState"] = {
        __ename__: ["stolo",
            "ui", "button", "ButtonState"
        ],
        __constructs__: ["up", "pressed", "selected", "over", "disabled"]
    };
    fb.up = ["up", 0];
    fb.up.toString = r;
    fb.up.__enum__ = fb;
    fb.pressed = ["pressed", 1];
    fb.pressed.toString = r;
    fb.pressed.__enum__ = fb;
    fb.selected = ["selected", 2];
    fb.selected.toString = r;
    fb.selected.__enum__ = fb;
    fb.over = ["over", 3];
    fb.over.toString = r;
    fb.over.__enum__ = fb;
    fb.disabled = ["disabled", 4];
    fb.disabled.toString = r;
    fb.disabled.__enum__ = fb;
    var kl = function(a) {
        this.localize = !0;
        this.wrapWidth = 0;
        this.autoCenter = !0;
        this.x = this.y =
            0;
        k.call(this);
        H.configure(this, a)
    };
    g["stolo.ui.button.ButtonText"] = kl;
    kl.__name__ = ["stolo", "ui", "button", "ButtonText"];
    kl.__super__ = k;
    kl.prototype = l(k.prototype, {
        get_name: function() { return "ButtonText_103" },
        onAdded: function() { k.prototype.onAdded.call(this);
            this.textSprite = this.localize ? new Qe(null, this.fontStyle) : M.getTextSprite(this.fontStyle, null, 0, 0);
            this._button = this.owner._compMap.Sprite_19;
            this._button.addChildSprite(this.textSprite);
            this.updateText() },
        updateText: function(a) {
            null != a && (this.value =
                a);
            this.textSprite.setWrapWidth(this.wrapWidth);
            this.textSprite.setXY(this.x, this.y);
            this.localize ? U.__cast(this.textSprite, Qe).setText(this.value, this.vars) : this.textSprite.set_text(this.value);
            null != this.align && (a = Z.Left, "center" == this.align ? a = Z.Center : "right" == this.align && (a = Z.Right), this.textSprite.setAlign(a));
            this.autoCenter ? this.textSprite._align == Z.Center ? this.textSprite.setAnchor(0, this.textSprite.getNaturalHeight() / 2) : this.textSprite._align == Z.Left ? this.textSprite.centerAnchor() : this.textSprite._align ==
                Z.Right && this.textSprite.setAnchor(-this.textSprite.getNaturalWidth() / 2, this.textSprite.getNaturalHeight() / 2) : this.textSprite.setAnchor(0, 0)
        },
        onRemoved: function() { k.prototype.onRemoved.call(this);
            this._button = this.textSprite = null },
        __class__: kl
    });
    var Lh = function() { this.shortLived = this.isDisposed = !1;
        this.maxY = 580;
        this.spreadX = 30;
        this.startX = 0;
        k.call(this) };
    g["stolo.ui.fx.Confetti"] = Lh;
    Lh.__name__ = ["stolo", "ui", "fx", "Confetti"];
    Lh.__super__ = k;
    Lh.prototype = l(k.prototype, {
        get_name: function() { return "Confetti_102" },
        dispose: function() { this.isDisposed = !0;
            this.allWaveProps = this.flipHolderSprite = this.rotHolderSprite = this.confettiSprite = null;
            k.prototype.dispose.call(this) },
        onAdded: function() { this.build();
            k.prototype.onAdded.call(this) },
        build: function() {
            var a = Math.round(10 + 5 * Math.random());
            this.flipHolderSprite = new s;
            this.owner.add(this.flipHolderSprite);
            this.flipHolderSprite.disablePointer();
            var b = new A;
            this.owner.addChild(b);
            this.rotHolderSprite = new s;
            b.add(this.rotHolderSprite);
            this.rotHolderSprite.disablePointer();
            var c = new A;
            b.addChild(c);
            this.confettiSprite = new wb(this.color, a, a);
            c.add(this.confettiSprite);
            this.confettiSprite.x.set__(-a / 2);
            this.confettiSprite.y.set__(-a / 2);
            this.confettiSprite.disablePointer();
            this.xProp = new Tf(0.25, 1);
            this.yProp = new Tf(2, 4);
            this.flipProp = new Tf(4, 8);
            this.rotProp = new Tf(1, 4);
            this.flipRotProp = new Tf(0.25, 1);
            this.allWaveProps = [this.xProp, this.yProp, this.flipProp, this.rotProp, this.flipRotProp];
            this.reset()
        },
        reset: function() {
            for (var a = 0, b = this.allWaveProps.length; a < b;) this.allWaveProps[a++].randomizeSpeed();
            this.yProp.value = 0
        },
        update: function(a) {
            if (!this.isDisposed) {
                for (var b = 0, c = this.allWaveProps.length; b < c;) this.allWaveProps[b++].update(a);
                this.yProp.value > 2 * Math.PI && (this.shortLived ? this.dispose() : this.reset());
                this.flipHolderSprite.x.set__(this.startX + Math.sin(this.xProp.value) * this.spreadX);
                this.flipHolderSprite.y.set__(this.yProp.value / (2 * Math.PI) * this.maxY);
                null != this.flipRotProp && this.flipHolderSprite.rotation.set__(360 * this.flipRotProp.value);
                null != this.flipProp && this.flipHolderSprite.scaleX.set__(Math.cos(this.flipProp.value));
                null != this.rotProp && this.rotHolderSprite.rotation.set__(360 * this.rotProp.value)
            }
        },
        __class__: Lh
    });
    var Tf = function(a, b) { this.min = a;
        this.max = b;
        this.value = 2 * Math.random() * Math.PI };
    g["stolo.ui.fx.WaveProp"] = Tf;
    Tf.__name__ = ["stolo", "ui", "fx", "WaveProp"];
    Tf.prototype = { randomizeSpeed: function() { this.speed = this.min + Math.random() * (this.min - this.max) }, update: function(a) { this.value += a * this.speed }, __class__: Tf };
    var Rg = function(a, b) {
        this.confettiColors = [16711680, 16746496, 16776960, 8978176, 65280, 65416, 65535, 35071,
            255, 8913151, 16711935
        ];
        this.startSpreadY = 1;
        this.shortLived = !1;
        this.maxCount = 50;
        this.spreadX = 30;
        this.centerX = 0;
        this.autoStart = !0;
        this.speed = new Ca(0.3);
        k.call(this);
        this.width = a;
        this.height = b
    };
    g["stolo.ui.fx.Confettis"] = Rg;
    Rg.__name__ = ["stolo", "ui", "fx", "Confettis"];
    Rg.__super__ = k;
    Rg.prototype = l(k.prototype, {
        get_name: function() { return "Confettis_101" },
        dispose: function() { k.prototype.dispose.call(this) },
        onAdded: function() { 0 == this.centerX && (this.centerX = 0.5 * this.width);
            this.autoStart && this.start() },
        onRemoved: function() {},
        onUpdate: function(a) { this.speed.update(a); if (!(0 == this.speed._value || null == this.items))
                for (var b = 0, c = this.items.length; b < c;) this.items[b++].update(a * this.speed._value) },
        start: function() { this._container = new s;
            this.owner.addChild((new A).add(this._container));
            this._container.disablePointer();
            this.items = []; for (var a = 0, b = this.maxCount; a < b;) { var c = a++,
                    d = this.getConfetti();
                this.setupConfetti(d, c);
                this.addConfetti(d, c) } },
        getConfetti: function() { return new Lh },
        setupConfetti: function(a, b) {
            a.startX = this.centerX +
                (b / (this.maxCount - 1) - 0.5) * this.width;
            a.color = this.confettiColors[Math.floor(0.999 * b / (this.maxCount - 1) * this.confettiColors.length)];
            a.spreadX = this.spreadX;
            a.maxY = this.height;
            a.shortLived = this.shortLived;
            return new Lh
        },
        addConfetti: function(a) { this._container.owner.addChild((new A).add(a));
            a.yProp.value = 2 * Math.random() * Math.PI * this.startSpreadY;
            this.items.push(a); return a },
        __class__: Rg
    });
    var Im = function() {};
    g["stolo.utils.AssetUtils"] = Im;
    Im.__name__ = ["stolo", "utils", "AssetUtils"];
    Im.getFileInfo = function(a,
        b) {
        var c, d = kb.getFileExtension(a),
            e;
        null == d && null != b ? (a.lastIndexOf("/") == a.length - 1 && (e = a.lastIndexOf("/"), a = N.substr(a, 0, e)), e = a, c = a.substring(a.lastIndexOf("/") + 1, a.length), b = ka.replace(b, "{{name}}", c), -1 < c.indexOf(".") && a.substring(0, a.lastIndexOf(".")), e.lastIndexOf("/") < e.length - 1 && (e += "/"), a = b, d = kb.getFileExtension(a)) : (e = a.substring(0, a.lastIndexOf("/") + 1), c = -1 < a.indexOf("/") ? a.substring(a.lastIndexOf("/") + 1, a.lastIndexOf(".")) : a.substring(0, a.lastIndexOf(".")));
        return {
            name: c,
            path: e,
            url: a,
            ext: d
        }
    };
    var Ic = function() {};
    g["stolo.utils.BrowserUtils"] = Ic;
    Ic.__name__ = ["stolo", "utils", "BrowserUtils"];
    Ic.getCurrentURL = function(a) { null == a && (a = !1); var b = w._platform.getExternal().call("window.location.href.toString");
        a && null != b && (b = b.split("?")[0]); return b };
    Ic.getUrlParams = function() {
        if (null != Ic.urlParams) return Ic.urlParams;
        var a = Ic.getCurrentURL().split("?");
        if (1 == a.length) return {};
        for (var b = {}, a = a[1].split("&"), c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            d = d.split("=");
            2 == d.length && (d[1] = ka.replace(d[1],
                "#", ""), y.setProperty(b, d[0], d[1]))
        }
        Ic.urlParams = b;
        return Ic.urlParams
    };
    Ic.getURL = function(a, b) { null == b && (b = "_blank");
        window.open(a, b) };
    Ic.execute = function(a) { return eval(a) };
    var Yg = function() {};
    g["stolo.utils.DataUtils"] = Yg;
    Yg.__name__ = ["stolo", "utils", "DataUtils"];
    Yg.isUnlocked = function(a, b) { return !b.exists(a) ? !1 : b.get(a) };
    Yg.unlock = function(a, b) { if (Yg.isUnlocked(a, b)) return !1;
        b.set(a, !0); return !0 };
    var o = function() {};
    g["stolo.utils.DeviceUtils"] = o;
    o.__name__ = ["stolo", "utils", "DeviceUtils"];
    o.init =
        function(a, b) {
            null == o.UA && (0 < a && 0 < b ? o.setSize(a, b) : o.setSize(w._platform.getStage().get_width(), w._platform.getStage().get_height()), o.touch = w._platform.getTouch().get_supported(), o.mobile = o.touch, o.power = 30, o.UA = o.getUA(), null != o.UA && (o.ua = o.UA.toLowerCase(), o.getScreenSize(), o.iphone = o.phone = -1 < o.ua.indexOf("iphone") || -1 < o.ua.indexOf("ipod"), o.ipad = o.tablet = -1 < o.ua.indexOf("ipad"), o.ios = o.iphone || o.ipad, o.ie = -1 < o.ua.indexOf("msie") || -1 <= o.ua.indexOf("trident"), o.android = o.touch && (-1 < o.ua.indexOf("linux") ||
                -1 < o.ua.indexOf("android")), o.ios ? o.setupIos() : o.android && o.setupAndroid()), o.slow = 0 >= o.power)
        };
    o.setupIos = function() { o.mobile = !0; var a = u.parseInt(w._platform.getExternal().call("window.devicePixelRatio.toString"));
        0 < a && (o.ipadVersion = 1 + a); var b = eval("window"),
            c = b.ondevicemotion;
        b.ondevicemotion = function(a) { null == a.acceleration && (o.ipadVersion -= 1);
            b.ondevicemotion = c }; if (-1 < o.ua.indexOf("ipod") || 3 > o.ipadVersion) o.power = 0, o.lowPerformance = !0, o.lowMemory = !0 };
    o.setupAndroid = function() {
        o.mobile = !0;
        if (-1 <
            o.ua.indexOf("mobile")) { if (o.phone = !0, o.tablet = o.detectTablet(), o.lowPerformance = o.detectLowPerformance(), o.lowMemory = o.detectLowMemory(), o.lowPerformance || o.lowMemory) o.power = 0 } else o.tablet = !0, -1 < o.ua.indexOf("sgh-t") && (o.tablet = !1, o.phone = !0)
    };
    o.detectTablet = function() { return -1 < o.ua.indexOf("nexus 5") || -1 < o.ua.indexOf("tablet") || 700 < o.landscapeScreenWidth ? !0 : !1 };
    o.detectLowPerformance = function() {
        for (var a = 0, b = o.lowPerformanceDevices; a < b.length;) {
            var c = b[a];
            ++a;
            for (var d = 0; d < c.length;) {
                var e = c[d];
                ++d;
                if (-1 < o.UA.indexOf(e)) return !0
            }
        }
        return !1
    };
    o.detectLowMemory = function() { for (var a = 0, b = o.lowMemoryDevices; a < b.length;) { var c = b[a];++a; for (var d = 0; d < c.length;) { var e = c[d];++d; if (-1 < o.UA.indexOf(e)) return !0 } } return !1 };
    o.getScreenSize = function() {
        o.screenWidth = u.parseFloat(w._platform.getExternal().call("window.screen.width.toString"));
        o.screenHeight = u.parseFloat(w._platform.getExternal().call("window.screen.height.toString"));
        o.screenWidth > o.screenHeight ? (o.landscapeScreenWidth = o.screenWidth, o.landscapeScreenHeight =
            o.screenHeight) : (o.landscapeScreenWidth = o.screenHeight, o.landscapeScreenHeight = o.screenWidth)
    };
    o.setSize = function(a, b) { o.gameWidth = Math.round(a);
        o.gameHeight = Math.round(b);
        o.stageWidth = a * o.scale;
        o.stageHeight = b * o.scale };
    o.setScale = function(a) { a != o.scale && (o.scale = a, o.stageWidth = o.gameWidth * a, o.stageHeight = o.gameHeight * a, o.onScaleChange.emit()) };
    o.getUA = function() { if (null != o.UA) return o.UA;
        o.UA = eval("navigator.userAgent"); return o.UA };
    var G = function() {};
    g["stolo.utils.DisplayUtils"] = G;
    G.__name__ = ["stolo",
        "utils", "DisplayUtils"
    ];
    G.__properties__ = { get_sharedAssets: "get_sharedAssets" };
    G.setSharedAssets = function(a) { G._sharedPack = a;
        G._sharedAssets = D.getPack(a); return G._sharedAssets };
    G.get_sharedAssets = function() { return G._sharedAssets };
    G.createButton = function(a, b, c, d, e) { null == d && (d = "buttons");
        null == e && (e = G._sharedAssets); return new Kh(e, b, a, c, d) };
    G.createImage = function(a, b) { null == b && (b = G._sharedAssets); return new V(G.getTexture(a, b)) };
    G.createText = function(a, b, c, d) {
        a = M.getLocalizedTextSprite(a, b, 0, 0,
            d);
        G.addSprite(a, c);
        return a
    };
    G.createTextSprite = function(a, b, c) { b = M.getTextSprite(b, null, 0, 0);
        b.set_text(a);
        G.addSprite(b, c); return b };
    G.getTexture = function(a, b, c) {
        null == c && (c = !0);
        var d = null;
        null == b && (b = G._sharedAssets);
        if (null == b) throw "Asset pack must be provided";
        d = b.getTexture(a, null == G._sharedAssets);
        null == d && null != G._spritesheets.h.__keys__[b.__id__] && (d = G._spritesheets.h[b.__id__].getTexture(a, null, !1));
        null == d && null != G._sharedAssets && (null != G._spritesheets.h.__keys__[G._sharedAssets.__id__] &&
            (d = G._spritesheets.h[G._sharedAssets.__id__].getTexture(a, null, !1)), null == d && (d = G._sharedAssets.getTexture(a, c)));
        return d
    };
    G.getTextureFromPack = function(a, b, c) { null == c && (c = !0); return G.getTexture(a, D.getPack(b, c), c) };
    G.addSprite = function(a, b) { null != a.owner ? b.addChild(a.owner) : b.addChild((new A).add(a)); return a };
    G.gap = function(a, b, c, d, e) {
        null == e && (e = {});
        var c = a - c,
            f = b - d,
            d = Math.sqrt(c * c + f * f),
            c = Nb.degrees(Math.atan2(f, c)) + 180;
        U.__instanceof(e, s) ? (f = e, f.setXY(a, b), f.scaleX.set__(d / f.getNaturalWidth()),
            f.rotation.set__(c)) : (e.x = a, e.y = b, e.width = d, e.rotation = c);
        return e
    };
    var H = function() {};
    g["stolo.utils.DynamicUtils"] = H;
    H.__name__ = ["stolo", "utils", "DynamicUtils"];
    H.is = function(a, b) { var c = Y["typeof"](a); return Y.enumEq(c, b) };
    H.configure = function(a, b, c) { null == c && (c = !0); for (var d = 0, e = y.fields(b); d < e.length;) { var f = e[d];++d; var j = y.field(b, f); "string" == typeof j && ("false" == j && (j = !1), "true" == j && (j = !0));
            (c || !(null == j || "" == j)) && y.setProperty(a, f, j) } };
    H.applyMods = function(a, b) {
        for (var c = 0, d = y.fields(b); c <
            d.length;) { var e = d[c];++c; var f = y.field(b, e);
            null == f || "" == f || y.setProperty(a, e, H.mod(y.getProperty(a, e), f)) }
    };
    H.mod = function(a, b) { if ("string" == typeof b) { var c = b.split("="),
                d; if (2 <= c.length) switch (d = u.parseFloat(c[c.length - 1]), c[0]) {
                case "+":
                    a += d; break;
                case "-":
                    a -= d; break;
                case "/":
                    a /= d; break;
                case "*":
                    a *= d; break;
                default:
                    a = d } else a = u.parseFloat(b) } else return b; return a };
    H.merge = function(a, b, c) {
        null == c && (c = !1);
        if (H.is(b, O.TNull) || H.is(b, O.TInt) || H.is(b, O.TFloat) || H.is(b, O.TBool) || H.is(b, O.TClass(String)) ||
            H.is(b, O.TFunction)) return b;
        if (H.is(b, O.TClass(Array))) return c ? H.clone(b) : b;
        if (H.is(b, O.TObject)) { if (H.is(a, O.TObject)) { var d;
                d = c ? H.clone(a) : a; for (var e = 0, f = y.fields(b); e < f.length;) { var j = f[e];++e; var h = y.field(a, j),
                        g = y.field(b, j);
                    y.setField(d, j, H.merge(h, g, c)) } return d } return c ? H.clone(b) : b }
        throw "Type not supported in the merge :" + u.string(b);
    };
    H.clone = function(a) {
        if (H.is(a, O.TNull) || H.is(a, O.TInt) || H.is(a, O.TFloat) || H.is(a, O.TBool) || H.is(a, O.TClass(String)) || H.is(a, O.TFunction)) return a;
        if (H.is(a,
                O.TClass(Array))) { for (var b = [], c = 0, d = a.length; c < d;) { var e = c++;
                b[e] = H.clone(a[e]) } return b }
        if (H.is(a, O.TObject)) { b = {};
            c = 0; for (d = y.fields(a); c < d.length;) e = d[c], ++c, y.setField(b, e, H.clone(y.field(a, e))); return b }
        return null
    };
    var Nb = function() {};
    g["stolo.utils.MathUtils"] = Nb;
    Nb.__name__ = ["stolo", "utils", "MathUtils"];
    Nb.degrees = function(a) { return a * (180 / Math.PI) };
    Nb.radians = function(a) { return a * Math.PI / 180 };
    Nb.lerp = function(a, b, c) { return 0 > c ? a : 1 < c ? b : a * (1 - c) + b * c };
    Nb.clamp = function(a, b, c) {
        return a < b ? b : a >
            c ? c : a
    };
    var Xa = function() {};
    g["stolo.utils.SequenceUtils"] = Xa;
    Xa.__name__ = ["stolo", "utils", "SequenceUtils"];
    Xa.getMovementSequence = function(a, b, c, d, e) { null == e && (e = 0);
        null == d && (d = !1);
        null == c && (c = !0); var f = new Eb;
        Xa.lastDest = null;
        Xa.appendMovementActions(a, f, b);
        d && (a = a.reverse(), a.shift(), Xa.appendMovementActions(a, f, b), Xa.appendMovementActions([{ x: 0, y: 0 }], f, b));
        (c || d) && Xa.appendMovementActions([{ x: 0, y: 0 }], f, b);
        0 < e && f.add(new kc(e)); return f };
    Xa.appendMovementActions = function(a, b, c) {
        null == b && (b = new Eb);
        for (var d = 0; d < a.length;) { var e = a[d];++d;
            Object.prototype.hasOwnProperty.call(e, "delay") && b.add(new kc(e.delay)); var f = Object.prototype.hasOwnProperty.call(e, "x"),
                j = Object.prototype.hasOwnProperty.call(e, "y"),
                h; if (f || j) h = new ob, f && (h.x = e.x + c.offsetX), j && (h.y = e.y + c.offsetY), b.add(Xa.getMovementAction(e, f ? c.x : null, j ? c.y : null, h, Xa.lastDest, c)), Xa.lastDest = h }
        return b
    };
    Xa.getMovementAction = function(a, b, c, d, e, f) {
        var j = Xa.DefaultMoveSpeed,
            h = Xa.DefaultMovePPS,
            g = Xa.DefaultMoveEase,
            i = Xa.DefaultMoveTime,
            k = !1;
        0 < a.time ? i = a.time : k = !0;
        0 < a.pps && (h = a.pps);
        0 < a.speed && (j = a.speed);
        k && (i = 0, null != e ? (null != b && (i += Math.abs(e.x - d.x)), null != c && (i += Math.abs(e.y - d.y))) : (null != b && (i += Math.abs(b._value - d.x)), null != c && (i += Math.abs(c._value - d.y))), i = i / h - 0.1 * (i / h) * j, 0 >= i && (i = Xa.DefaultMoveTime));
        null != f && null != f.ease && (g = f.ease);
        e = new dg;
        null != b && e.add(new De(b, d.x, i, g));
        null != c && e.add(new De(c, d.y, i, g));
        return e
    };
    Xa.__super__ = k;
    Xa.prototype = l(k.prototype, { get_name: function() { return "SequenceUtils_93" }, __class__: Xa });
    var fc =
        function() {};
    g["stolo.web.BrowserTools"] = fc;
    fc.__name__ = ["stolo", "web", "BrowserTools"];
    fc.init = function(a, b) {
        null == a && (a = !1);
        if (!fc.hasInit) {
            fc.hasInit = !0;
            Ic.execute("/**\n* Those utilities are added to the browser window by BrowserTools.hx\n*/\nvar stolo = stolo || { };\nwindow.stolo = stolo;\n\nstolo.version = \"v0.1\";\nstolo.loadingScripts = {};\nstolo.loadedScripts = {};\n\nstolo.url_jquery = 'http://code.jquery.com/jquery-1.11.3.min.js';\n\nstolo.getJquery = function(success)\n{\n\treturn stolo.loadScriptIf(window.jQuery==null, stolo.url_jquery, function()\n\t{\n\t\tsuccess(window.jQuery);\n\t})\n};\n\nstolo.loadScriptIf = function(condition, url, success)\n{\n\tif(condition) {\n\t\tstolo.loadScript(url, success);\n\t} else {\n\t\tsuccess();\n\t}\n};\n\nstolo.loadScript = function(url, success)\n{\n\tvar id = encodeURIComponent(url);\n\t\n\t// Already loaded\n\tif(stolo.loadedScripts[id]) success();\n\t\n\t// Already loading\n\tif(stolo.loadingScripts[id]) return;\n\t\n\tvar head = document.getElementsByTagName('head')[0];\n\tvar script = document.createElement('script');\n\tscript.src = url;\n\t\n\tstolo.loadingScripts[id] = script;\n\n\t// Attach handlers for all browsers\n\tscript.onload = script.onreadystatechange = function()\n\t{\n\t\tif (stolo.loadingScripts[id] && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete'))\n\t\t{\n\t\t\tstolo.loadingScripts[id] = null;\n\t\t\tdelete stolo.loadedScripts[id];\n\n\t\t\t// callback function provided as param\n\t\t\tsuccess();\n\t\t\t\n\t\t\tscript.onload = script.onreadystatechange = null;\n\t\t\thead.removeChild(script);\n\t\t};\n\t};\n\n\thead.appendChild(script);\n};");
            var c = w;
            fc.canvas = c._platform._canvas;
            fc.container = c._platform._container;
            fc.stolo = y.field(window, "stolo");
            a ? fc.LoadJquery(b) : null != b && b()
        }
    };
    fc.focusOnCanvas = function() { fc.init();
        fc.canvas.focus() };
    fc.LoadJquery = function(a) { fc.stolo.getJquery(function(b) { fc.jQuery = b;
            null != a && a() }) };
    var z = function() {};
    g["stolo.web.DeltaDNA"] = z;
    z.__name__ = ["stolo", "web", "DeltaDNA"];
    z.init = function(a, b, c, d, e) {
        if (null == a) throw "Missing gameURL";
        a = ka.replace(a, "http://", "");
        a = ka.replace(a, "https://", "");
        z.gameURL = a;
        z.collectURL =
            d;
        z.engageURL = e;
        z.setLiveStatus();
        z.getPlatform();
        z.getDeviceType();
        z.key = z.isLive ? c : b;
        a = na.get("UserId", null);
        z.isValidUserID(a) ? z.setUserID(a) : z.getNewUserID()
    };
    z.setLiveStatus = function() { if (z.allowLiveKey) { z.isLive = !0; var a = z.getCurrentURL(); if (null != a && null != z.staging)
                for (var a = a.toLowerCase(), b = 0, c = z.staging; b < c.length;) { var d = c[b];++b; if (-1 < a.indexOf(d)) { z.isLive = !1; break } } z.isLive && z.debug && null } };
    z.setReady = function() {
        if (!z.isReady && (z.isReady = !0, z.onReady.emit(), null != z._trackRequestsQueue)) {
            for (var a =
                    0, b = z._trackRequestsQueue; a < b.length;) { var c = b[a];++a;
                z.track(c.eventName, c.eventParams) } z._trackRequestsQueue = null
        }
    };
    z.setUserID = function(a) { z.userID = a;
        na.set(z.userIDStorageField, a);
        null == z.sessionID ? z.createSession() : z.setReady() };
    z.getNewUserID = function() { z.isNewPlayer = !0; var a = new $g(z.collectURL + "/uuid");
        a.onData = function(a) { var c = JSON.parse(a);
            z.isValidUserID(c.userID) ? z.setUserID(c.userID) : (z.logError("Invalid or missing userID:"), z.logError(a)) };
        a.request() };
    z.isValidUserID = function(a) {
        return null ==
            a || "" == a || "NULL" == a.toUpperCase() ? !1 : !0
    };
    z.createSession = function() { var a = new $g(z.collectURL + "/uuid");
        a.onData = function(a) { var c = JSON.parse(a);
            z.isValidUserID(c.userID) ? (z.sessionID = c.userID, z.setReady()) : (z.logError("Invalid or missing uuid for sessionID:"), z.logError(a)) };
        a.request() };
    z.track = function(a, b) { z.isReady ? z.collectRequest(a, b) : (null == z._trackRequestsQueue && (z._trackRequestsQueue = []), z._trackRequestsQueue.push({ eventName: a, eventParams: b })) };
    z.collectRequest = function(a, b, c, d, e) {
        null ==
            e && (e = z.collectURL + "/" + z.key);
        e = new $g(e);
        b || (b = {});
        b.sdkVersion = z.sdkVersion;
        b.platform = z.getPlatform();
        z.useTimezoneOffset && (b.timezoneOffset = z.getTimeZoneOffset());
        null != z.clientVersion && (b.clientVersion = z.clientVersion);
        a = { eventName: a, userID: z.userID, sessionID: z.sessionID, eventParams: b };
        e.addHeader("Content-Type", "application/json");
        e.setPostData(JSON.stringify(a));
        e.onData = function(a) { z.debug && null;
            a = null != a && "" != a && " " != a ? JSON.parse(a) : null;
            null != c && c(a) };
        e.onStatus = function(a) {
            204 != a && z.logError("status: " +
                a)
        };
        e.onError = function(a) { z.logError(a);
            null != d && d(a) };
        z.debug && null;
        e.request(!0);
        return e
    };
    z.getPlatform = function() {
        if (null != z.platform) return z.platform;
        z.platform = "PIRACY_UNKNOWN";
        var a = z.getCurrentURL(),
            b = o.UA.toLowerCase(),
            c = z.getReferrer();
        if (null == a) return z.platform;
        a = a.toLowerCase();
        null != c && (c = c.toLowerCase());
        if (!(-1 < a.indexOf(".nick") || -1 < a.indexOf("nick.com/games/data/"))) return z.platform;
        var d = !1,
            e = window;
        if (o.android || o.ios) {
            if (null != c && (-1 < c.indexOf("apikey") || -1 < c.indexOf("www.ludei.com"))) d = !0;
            null != e.cocoonjsCheckArgs && (d = !0);
            o.ios && -1 == b.indexOf("safari") && -1 == b.indexOf("chrome") && (d = !0)
        }
        if (d) z.platform = o.ios ? z.platforms.app.ios : z.platforms.app.android;
        else { z.platform = z.platforms.web.desktop; if (-1 < a.indexOf("m.nick") || o.mobile) z.platform = z.platforms.web.mobile; if (-1 < a.indexOf("t.nick") || o.tablet) z.platform = z.platforms.web.tablet }
        return z.platform
    };
    z.getCurrentURL = function() {
        if (null != z._currentURL) return z._currentURL;
        z._currentURL = eval("window.location.href");
        return null == z._currentURL ?
            "invalid URL" : z._currentURL
    };
    z.getReferrer = function() { if (null != z._currentReferrer) return z._currentReferrer;
        z._currentReferrer = window.document.referrer; return null == z._currentReferrer ? "invalid Referrer" : z._currentReferrer };
    z.setPlatforms = function(a) { for (var b = 0, c = y.fields(a); b < c.length;) { var d = c[b];++b; for (var e = y.field(a, d), f = 0, j = y.fields(e); f < j.length;) { var h = j[f];++f; var g = y.field(e, h),
                    i = y.field(z.platforms, d); if (null == i) throw "Invalid platform type '" + d + "'";
                i[h] = g } } };
    z.getDeviceType = function() {
        if (null !=
            z.deviceType) return z.deviceType;
        z.deviceType = o.tablet ? "TABLET" : o.phone ? "MOBILE_PHONE" : "DESKTOP";
        return z.deviceType
    };
    z.trackClientDevice = function() {
        var a = "DESKTOP";
        o.ipad && (a = "IPAD");
        o.iphone && (a = "IPHONE");
        o.android && (a = o.tablet ? "ANDROID_TABLET" : "ANDROID_PHONE");
        var b = "PC";
        o.mobile && (b = "MOBILE_PHONE");
        o.tablet && (b = "TABLET");
        var c = "UNKNOWN",
            d = "UNKNOWN",
            e = o.ua;
        if (null != e) {
            -1 < e.indexOf("webkit") && (c = "UNKNOWN_WEBKIT"); - 1 < e.indexOf("safari") && (c = "SAFARI"); - 1 < e.indexOf("chrome") && (c = "CHROME"); - 1 < e.indexOf("firefox") &&
                (c = "FIREFOX"); - 1 < e.indexOf("opera") && (c = "Opera"); - 1 < e.indexOf("tizen") && (c = "TIZEN");
            if (-1 < e.indexOf("msie") || -1 < e.indexOf("trident")) c = "IE";
            if (-1 < e.indexOf("iemobile") || -1 < e.indexOf("msiemobile")) c = "IE_MOBILE"; - 1 < e.indexOf("windows") && (d = "WINDOWS");
            if (-1 < e.indexOf("macos") || -1 < e.indexOf("macintosh") || -1 < e.indexOf("os x")) d = "OSX"; - 1 < e.indexOf("linux") && (d = "LINUX");
            o.ios && (d = "IOS");
            o.android && (d = "ANDROID");
            if (-1 < e.indexOf("kindle") || -1 < e.indexOf("silk")) d = "FIREOS"; - 1 < e.indexOf("blackberry") && (d = "BLACKBERRY")
        }
        e =
            o.UA;
        null == e && (e = "UNKNOWN");
        z.track("clientDevice", { deviceName: a, deviceType: b, browserName: c, operatingSystem: d, operatingSystemVersion: e })
    };
    z.getTimeZoneOffset = function() { var a = z.getTimeZoneOffsetSeconds(),
            a = Math.round(-1 * (a / 60)),
            b = a + ":00";
        0 > a && -10 < a && (b = ka.replace(b, "-", "-0"));
        0 < a && (b = "+" + b, 10 > a && (b = ka.replace(b, "+", "+0"))); return b };
    z.getTimeZoneOffsetSeconds = function() { return N.strDate("1970-01-01").getTime() / 1E3 / 60 };
    z.logError = function(a) { w._platform.getExternal().call("window.console.error", [a]) };
    var Sg = function() { this._zoom = 1;
        this._minX = this._maxX = this._minY = this._maxY = -1;
        this.limitTarget = this._limitX = this._limitY = !1;
        this.checkLimit = !0;
        this.x = this.y = this._x = this._y = 0;
        this.followTarget = !0;
        this.velocityY = 0;
        this.massY = 40;
        this.dampingY = 20;
        this.stiffnessY = 0.7;
        this.springY = !1;
        this.velocityX = 0;
        this.massX = 40;
        this.dampingX = 10;
        this.stiffnessX = 0.8;
        this.springX = !1;
        this.linearDampingX = this.linearDampingY = 0.2 };
    g["stolo.world.Camera"] = Sg;
    Sg.__name__ = ["stolo", "world", "Camera"];
    Sg.prototype = {
        update: function(a) {
            null !=
                this.zoom && (this.zoom.update(a), this._zoom = this.zoom._value);
            this.followTarget && (null != this.target ? (this.target.update(a), this._targetX = this.target.x._value, this._targetY = this.target.y._value) : (this._targetX = this._x, this._targetY = this._y), this._targetX != this._x && (this._diff = this._targetX - this._x, this.springX ? (this.velocityX += (this.stiffnessX * this._diff - this.dampingX * this.velocityX) / this.massX, this._x += this.velocityX) : this._x += this._diff * this.linearDampingX, 0.5 > Math.abs(this._diff) && (this._x = this._targetX)),
                this._targetY != this._y && (this._diff = this._targetY - this._y, this.springY ? (this.velocityY += (this.stiffnessY * this._diff - this.dampingY * this.velocityY) / this.massY, this._y += this.velocityY) : this._y += this._diff * this.linearDampingY, 0.5 > Math.abs(this._diff) && (this._y = this._targetY)), this.x = this._x, this.y = this._y, null != this.offset && (this.offset.update(a), this.x += this.offset.x._value, this.y += this.offset.y._value), null != this.fx && (this.fx.update(a), this.x += this.fx.x._value, this.y += this.fx.y._value));
            this.checkLimit &&
                (this._limitX && (-1 != this._minX && (this.x = Math.max(this._minX, this.x)), -1 != this._maxX && (this.x = Math.min(this.x, this._maxX))), this._limitY && (-1 != this._minY && (this.y = Math.max(this._minY, this.y)), -1 != this._maxY && (this.y = Math.min(this.y, this._maxY))), this.limitTarget && null != this.target && (this.target.x.set__(this.x), this.target.y.set__(this.y), null != this.offset && (a = this.target.y, a.set__(a._value - this.offset.x._value), a = this.target.y, a.set__(a._value - this.offset.y._value)), null != this.fx && (a = this.target.y,
                    a.set__(a._value - this.fx.x._value), a = this.target.y, a.set__(a._value - this.fx.y._value))))
        },
        setXY: function(a, b, c) { null == c && (c = !0);
            this.x = a;
            this.y = b;
            c && (this._x = this.x, this._y = this.y, this.velocityY = this.velocityX = 0, null != this.offset && (this.x += this.offset.x._value, this.y += this.offset.y._value), null != this.fx && (this.x += this.fx.x._value, this.y += this.fx.y._value)) },
        moveToTarget: function() { var a = this._x,
                b = this._y;
            null != this.target && (a = this.target.x._value, b = this.target.y._value);
            this.setXY(a, b, !0) },
        setTarget: function(a,
            b, c) { null == c && (c = !1);
            null != this.target && this.target.dispose();
            this.target = new fe(a, b);
            c && this.moveToTarget(); return this.target },
        animateTo: function(a, b, c, d) { null == d && (d = Sg.DEFAULT_EASING);
            this.setTarget(this._x, this._y, !1);
            this.target.x.animateTo(a, c, d);
            this.target.y.animateTo(b, c, d) },
        setAnimatedTarget: function(a, b, c) { null == c && (c = !1);
            null != this.target && this.target.dispose();
            this.setTarget(a._value, b._value, c);
            this.target.x = a;
            this.target.y = b; return this.target },
        followSprite: function(a, b) {
            null == b &&
                (b = !1);
            return this.setAnimatedTarget(a.x, a.y, b)
        },
        setOffset: function(a, b, c, d, e, f) { null == e && (e = -1);
            null == c && (c = 0);
            null == this.offset && (this.offset = new fe(a, b));
            this.setOffsetX(a, c, d);
            this.setOffsetY(b, 0 <= e ? e : c, null != f ? f : d) },
        setOffsetX: function(a, b, c) { null == b && (b = 0);
            0 < b ? (null == c && (c = E.quintInOut), this.offset.x.animateTo(a, b, c)) : (this.offset.x.set_behavior(null), this.offset.x.set__(a)) },
        setOffsetY: function(a, b, c) {
            null == b && (b = 0);
            0 < b ? (null == c && (c = E.quintInOut), this.offset.y.animateTo(a, b, c)) : (this.offset.y.set_behavior(null),
                this.offset.y.set__(a))
        },
        setLimits: function(a, b, c, d) { null == d && (d = -1);
            null == c && (c = -1);
            null == b && (b = -1);
            null == a && (a = -1);
            this.setLimitsX(a, b);
            this.setLimitsY(c, d) },
        setLimitsX: function(a, b) { null == b && (b = -1);
            null == a && (a = -1);
            this._minX = a;
            this._maxX = b; if (-1 != this._minX || -1 != this._maxX) this._limitX = !0 },
        setLimitsY: function(a, b) { null == b && (b = -1);
            null == a && (a = -1);
            this._minY = a;
            this._maxY = b; if (-1 != this._minY || -1 != this._maxY) this._limitY = !0 },
        getLimits: function() {
            return {
                minX: this._minX,
                maxX: this._maxX,
                minY: this._minY,
                maxY: this._maxY
            }
        },
        startFX: function() { null != this._fxScript && this._fxScript.dispose();
            null == this.fxEntity && (this.fxEntity = new A, w.root.addChild(this.fxEntity));
            this._fxScript = new Bd;
            this.fxEntity.add(this._fxScript);
            null != this.fx && this.fx.dispose();
            this.fx = new fe(0, 0) },
        endFX: function() { this.fx = null;
            null != this._fxScript && (this._fxScript.dispose(), null != this._fxScript.owner && this._fxScript.owner.remove(this._fxScript), this._fxScript = null) },
        shake: function(a, b, c) {
            null == c && (c = 0);
            null == b && (b = 30);
            null == a &&
                (a = 0.5);
            this.startFX();
            0 < b && Of.shake(this._fxScript.owner, this.fx.y, a, b, n(this, this.endFX));
            0 < c && Of.shake(this._fxScript.owner, this.fx.x, a, c, n(this, this.endFX))
        },
        __class__: Sg
    };
    var Lc = function() {};
    g["zpp_nape.ZPP_ID"] = Lc;
    Lc.__name__ = ["zpp_nape", "ZPP_ID"];
    Lc.Interactor = function() { return Lc._Interactor++ };
    Lc.CbType = function() { return Lc._CbType++ };
    Lc.CbSet = function() { return Lc._CbSet++ };
    Lc.Listener = function() { return Lc._Listener++ };
    var Nd = function() {
        this.body = this.constraint = null;
        this.pre_swapped = !1;
        this.int1 = this.int2 = this.set = this.wrap_arbiters = this.pre_arbiter = null;
        this.length = 0;
        this.listener = this.next = this.prev = null;
        this.event = 0;
        this.outer_body = this.outer_con = this.outer_int = null;
        this.length = 0
    };
    g["zpp_nape.callbacks.ZPP_Callback"] = Nd;
    Nd.__name__ = ["zpp_nape", "callbacks", "ZPP_Callback"];
    Nd.prototype = {
        wrapper_body: function() { null == this.outer_body && (this.outer_body = new Ej, this.outer_body.zpp_inner = this); return this.outer_body },
        wrapper_con: function() {
            null == this.outer_con && (this.outer_con = new Gj,
                this.outer_con.zpp_inner = this);
            return this.outer_con
        },
        wrapper_int: function() { null == this.outer_int && (this.outer_int = new Hj, this.outer_int.zpp_inner = this);
            null == this.wrap_arbiters ? this.wrap_arbiters = gf.get(this.set.arbiters, !0) : this.wrap_arbiters.zpp_inner.inner = this.set.arbiters;
            this.wrap_arbiters.zpp_inner.zip_length = !0;
            this.wrap_arbiters.zpp_inner.at_ite = null; return this.outer_int },
        push: function(a) { null != this.prev ? this.prev.next = a : this.next = a;
            a.prev = this.prev;
            a.next = null;
            this.prev = a;
            this.length++ },
        pop: function() { var a = this.next;
            this.next = a.next;
            null == this.next ? this.prev = null : this.next.prev = null;
            this.length--; return a },
        empty: function() { return null == this.next },
        __class__: Nd
    };
    var za = function() {
        this.interactors = this.constraints = null;
        this.zip_conlisteners = !1;
        this.conlisteners = null;
        this.zip_bodylisteners = !1;
        this.bodylisteners = null;
        this.zip_listeners = !1;
        this.manager = this.cbpairs = this.listeners = null;
        this.id = 0;
        this.next = null;
        this.count = 0;
        this.cbTypes = null;
        this.cbTypes = new re;
        this.listeners = new xg;
        this.zip_listeners = !0;
        this.bodylisteners = new ml;
        this.zip_bodylisteners = !0;
        this.conlisteners = new nl;
        this.zip_conlisteners = !0;
        this.constraints = new pf;
        this.interactors = new qf;
        this.id = Lc.CbSet();
        this.cbpairs = new Km
    };
    g["zpp_nape.callbacks.ZPP_CbSet"] = za;
    za.__name__ = ["zpp_nape", "callbacks", "ZPP_CbSet"];
    za.setlt = function(a, b) { for (var c = a.cbTypes.head, d = b.cbTypes.head; null != c && null != d;) { var e = c.elt,
                f = d.elt; if (e.id < f.id) return !0; if (f.id < e.id) return !1;
            c = c.next;
            d = d.next } return null != d && null == c };
    za.get = function(a) {
        var b;
        null ==
            za.zpp_pool ? b = new za : (b = za.zpp_pool, za.zpp_pool = b.next, b.next = null);
        null;
        for (var c = null, a = a.head; null != a;) { var d = a.elt,
                c = b.cbTypes.insert(c, d);
            d.cbsets.add(b);
            a = a.next }
        return b
    };
    za.single_intersection = function(a, b, c) { return a.manager.pair(a, b).single_intersection(c) };
    za.find_all = function(a, b, c, d) { a.manager.pair(a, b).forall(c, d) };
    za.prototype = {
        invalidate_pairs: function() { for (var a = this.cbpairs.head; null != a;) a.elt.zip_listeners = !0, a = a.next },
        realvalidate_listeners: function() {
            this.listeners.clear();
            for (var a =
                    this.cbTypes.head; null != a;) { for (var b = null, c = this.listeners.head, d = a.elt.listeners.head; null != d;) { var e = d.elt;
                    null != c && c.elt == e ? (d = d.next, b = c, c = c.next) : null == c || Mc.setlt(e, c.elt) ? (e.space == this.manager.space && (b = this.listeners.inlined_insert(b, e)), d = d.next) : (b = c, c = c.next) } a = a.next }
        },
        realvalidate_bodylisteners: function() {
            this.bodylisteners.clear();
            for (var a = this.cbTypes.head; null != a;) {
                for (var b = null, c = this.bodylisteners.head, d = a.elt.bodylisteners.head; null != d;) {
                    var e = d.elt;
                    null != c && c.elt == e ? (d = d.next,
                        b = c, c = c.next) : null == c || Mc.setlt(e, c.elt) ? (!e.options.excluded(this.cbTypes) && e.space == this.manager.space && (b = this.bodylisteners.inlined_insert(b, e)), d = d.next) : (b = c, c = c.next)
                }
                a = a.next
            }
        },
        realvalidate_conlisteners: function() {
            this.conlisteners.clear();
            for (var a = this.cbTypes.head; null != a;) {
                for (var b = null, c = this.conlisteners.head, d = a.elt.conlisteners.head; null != d;) {
                    var e = d.elt;
                    null != c && c.elt == e ? (d = d.next, b = c, c = c.next) : null == c || Mc.setlt(e, c.elt) ? (!e.options.excluded(this.cbTypes) && e.space == this.manager.space &&
                        (b = this.conlisteners.inlined_insert(b, e)), d = d.next) : (b = c, c = c.next)
                }
                a = a.next
            }
        },
        validate: function() { this.zip_listeners && (this.zip_listeners = !1, this.realvalidate_listeners());
            this.zip_bodylisteners && (this.zip_bodylisteners = !1, this.realvalidate_bodylisteners());
            this.zip_conlisteners && (this.zip_conlisteners = !1, this.realvalidate_conlisteners()) },
        free: function() {
            this.listeners.clear();
            this.zip_listeners = !0;
            this.bodylisteners.clear();
            this.zip_bodylisteners = !0;
            this.conlisteners.clear();
            for (this.zip_conlisteners = !0; null != this.cbTypes.head;) this.cbTypes.pop_unsafe().cbsets.remove(this)
        },
        __class__: za
    };
    var gc = function() { this.listeners = null;
        this.zip_listeners = !1;
        this.a = this.b = this.next = null;
        this.listeners = new xg };
    g["zpp_nape.callbacks.ZPP_CbSetPair"] = gc;
    gc.__name__ = ["zpp_nape", "callbacks", "ZPP_CbSetPair"];
    gc.get = function(a, b) { var c;
        null == gc.zpp_pool ? c = new gc : (c = gc.zpp_pool, gc.zpp_pool = c.next, c.next = null);
        c.zip_listeners = !0;
        za.setlt(a, b) ? (c.a = a, c.b = b) : (c.a = b, c.b = a); return c };
    gc.setlt = function(a, b) {
        return za.setlt(a.a,
            b.a) || a.a == b.a && za.setlt(a.b, b.b)
    };
    gc.prototype = {
        __validate: function() { this.listeners.clear(); for (var a = this.a.listeners.head, b = this.b.listeners.head; null != a && null != b;) { var c = a.elt,
                    d = b.elt;
                c == d ? ((c.options1.compatible(this.a.cbTypes) && c.options2.compatible(this.b.cbTypes) || c.options2.compatible(this.a.cbTypes) && c.options1.compatible(this.b.cbTypes)) && this.listeners.add(c), a = a.next, b = b.next) : c.precedence > d.precedence || c.precedence == d.precedence && c.id > d.id ? a = a.next : b = b.next } },
        empty_intersection: function() {
            return null ==
                this.listeners.head
        },
        single_intersection: function(a) { var b = this.listeners.head; return null != b && b.elt == a && null == b.next },
        forall: function(a, b) { for (var c = this.listeners.head; null != c;) { var d = c.elt;
                d.event == a && b(d);
                c = c.next } },
        __class__: gc
    };
    var xg = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_InteractionListener"] = xg;
    xg.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_InteractionListener"];
    xg.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == gd.zpp_pool ? b = new gd : (b = gd.zpp_pool, gd.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        inlined_insert: function(a, b) { var c;
            null == gd.zpp_pool ? c = new gd : (c = gd.zpp_pool, gd.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++; return c },
        inlined_pop: function() {
            var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = gd.zpp_pool;
            gd.zpp_pool = a;
            null ==
                this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = gd.zpp_pool;
            gd.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        inlined_clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        __class__: xg
    };
    var ml = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_BodyListener"] = ml;
    ml.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_BodyListener"];
    ml.prototype = {
        inlined_insert: function(a, b) {
            var c;
            null == Od.zpp_pool ? c = new Od : (c = Od.zpp_pool, Od.zpp_pool = c.next, c.next = null);
            null;
            c.elt =
                b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Od.zpp_pool;
            Od.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) {
            var b,
                c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Od.zpp_pool;
            Od.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        __class__: ml
    };
    var nl = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_ConstraintListener"] = nl;
    nl.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_ConstraintListener"];
    nl.prototype = {
        inlined_insert: function(a, b) { var c;
            null == $d.zpp_pool ? c = new $d : (c = $d.zpp_pool, $d.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++; return c },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = $d.zpp_pool;
            $d.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) {
            for (var b =
                    null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next }
            return d
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = $d.zpp_pool;
            $d.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        __class__: nl
    };
    var pf = function() {
        this.length = 0;
        this.modified =
            this.pushmod = !1;
        this.head = null
    };
    g["zpp_nape.util.ZNPList_ZPP_Constraint"] = pf;
    pf.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Constraint"];
    pf.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == ae.zpp_pool ? b = new ae : (b = ae.zpp_pool, ae.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() {
            var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = ae.zpp_pool;
            ae.zpp_pool =
                a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next,
                null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = ae.zpp_pool;
            ae.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: pf
    };
    var qf = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Interactor"] = qf;
    qf.__name__ = ["zpp_nape",
        "util", "ZNPList_ZPP_Interactor"
    ];
    qf.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == se.zpp_pool ? b = new se : (b = se.zpp_pool, se.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = se.zpp_pool;
            se.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = se.zpp_pool;
            se.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        inlined_clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: qf
    };
    var yg = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_CbSet"] = yg;
    yg.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CbSet"];
    yg.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == be.zpp_pool ? b = new be : (b = be.zpp_pool, be.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = be.zpp_pool;
            be.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() {
            var a = this.head.elt;
            this.pop();
            return a
        },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = be.zpp_pool;
            be.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: yg
    };
    var dc = function() {
        this.cbsets =
            this.listeners = this.bodylisteners = this.conlisteners = null;
        this.id = 0;
        this.outer = null;
        this.id = Lc.CbType();
        this.listeners = new xg;
        this.bodylisteners = new ml;
        this.conlisteners = new nl;
        this.constraints = new pf;
        this.interactors = new qf;
        this.cbsets = new yg
    };
    g["zpp_nape.callbacks.ZPP_CbType"] = dc;
    dc.__name__ = ["zpp_nape", "callbacks", "ZPP_CbType"];
    dc.prototype = {
        addint: function(a) {
            for (var b = null, c = this.listeners.head; null != c;) {
                var d = c.elt;
                if (a.precedence > d.precedence || a.precedence == d.precedence && a.id > d.id) break;
                b = c;
                c = c.next
            }
            this.listeners.inlined_insert(b, a);
            this.invalidateint()
        },
        invalidateint: function() { for (var a = this.cbsets.head; null != a;) { var b = a.elt;
                b.zip_listeners = !0;
                b.invalidate_pairs();
                a = a.next } },
        addbody: function(a) { for (var b = null, c = this.bodylisteners.head; null != c;) { var d = c.elt; if (a.precedence > d.precedence || a.precedence == d.precedence && a.id > d.id) break;
                b = c;
                c = c.next } this.bodylisteners.inlined_insert(b, a);
            this.invalidatebody() },
        invalidatebody: function() {
            for (var a = this.cbsets.head; null != a;) a.elt.zip_bodylisteners = !0, a = a.next
        },
        addconstraint: function(a) { for (var b = null, c = this.conlisteners.head; null != c;) { var d = c.elt; if (a.precedence > d.precedence || a.precedence == d.precedence && a.id > d.id) break;
                b = c;
                c = c.next } this.conlisteners.inlined_insert(b, a);
            this.invalidateconstraint() },
        invalidateconstraint: function() { for (var a = this.cbsets.head; null != a;) a.elt.zip_conlisteners = !0, a = a.next },
        __class__: dc
    };
    var Mc = function() {
        this.body = this.constraint = this.interaction = this.space = null;
        this.id = this.type = this.event = this.precedence = 0;
        this.outer =
            null;
        this.id = Lc.Listener()
    };
    g["zpp_nape.callbacks.ZPP_Listener"] = Mc;
    Mc.__name__ = ["zpp_nape", "callbacks", "ZPP_Listener"];
    Mc.setlt = function(a, b) { return a.precedence > b.precedence || a.precedence == b.precedence && a.id > b.id };
    Mc.prototype = { addedToSpace: function() {}, removedFromSpace: function() {}, __class__: Mc };
    var Lm = function() { this.outer_zn = this.options = this.handler = null };
    g["zpp_nape.callbacks.ZPP_BodyListener"] = Lm;
    Lm.__name__ = ["zpp_nape", "callbacks", "ZPP_BodyListener"];
    Lm.__super__ = Mc;
    Lm.prototype = l(Mc.prototype, { addedToSpace: function() { this.options.handler = n(this, this.cbtype_change); for (var a = this.options.includes.head; null != a;) a.elt.addbody(this), a = a.next }, removedFromSpace: function() { for (var a = this.options.includes.head; null != a;) { var b = a.elt;
                b.bodylisteners.remove(this);
                b.invalidatebody();
                a = a.next } this.options.handler = null }, cbtype_change: function(a, b, c) { this.removedFromSpace();
            this.options.effect_change(a, b, c);
            this.addedToSpace() }, __class__: Lm });
    var Mm = function() {
        this.outer_zn = this.options = this.handler =
            null
    };
    g["zpp_nape.callbacks.ZPP_ConstraintListener"] = Mm;
    Mm.__name__ = ["zpp_nape", "callbacks", "ZPP_ConstraintListener"];
    Mm.__super__ = Mc;
    Mm.prototype = l(Mc.prototype, {
        addedToSpace: function() { this.options.handler = n(this, this.cbtype_change); for (var a = this.options.includes.head; null != a;) a.elt.addconstraint(this), a = a.next },
        removedFromSpace: function() { for (var a = this.options.includes.head; null != a;) { var b = a.elt;
                b.conlisteners.remove(this);
                b.invalidateconstraint();
                a = a.next } this.options.handler = null },
        cbtype_change: function(a,
            b, c) { this.removedFromSpace();
            this.options.effect_change(a, b, c);
            this.addedToSpace() },
        __class__: Mm
    });
    var re = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_CbType"] = re;
    re.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CbType"];
    re.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == hd.zpp_pool ? b = new hd : (b = hd.zpp_pool, hd.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) { var c;
            null == hd.zpp_pool ? c = new hd : (c = hd.zpp_pool, hd.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++; return c },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = hd.zpp_pool;
            hd.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next =
                hd.zpp_pool;
            hd.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        has: function(a) { return this.inlined_has(a) },
        inlined_has: function(a) { var b;
            b = !1; for (var c = this.head; null != c;) { if (c.elt == a) { b = !0; break } c = c.next } return b },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: re
    };
    var Fb = function(a, b, c, d) {
        this.handlerp = null;
        this.allowSleepingCallbacks = this.pure = !1;
        this.options1 =
            this.options2 = this.handleri = null;
        this.itype = 0;
        this.outer_zni = this.outer_znp = null;
        Mc.call(this);
        this.type = d;
        this.interaction = this;
        this.event = c;
        this.options1 = a.zpp_inner;
        this.options2 = b.zpp_inner;
        this.allowSleepingCallbacks = !1
    };
    g["zpp_nape.callbacks.ZPP_InteractionListener"] = Fb;
    Fb.__name__ = ["zpp_nape", "callbacks", "ZPP_InteractionListener"];
    Fb.__super__ = Mc;
    Fb.prototype = l(Mc.prototype, {
        CbSetset: function(a, b, c) {
            for (var d = Fb.UCbSet, e = Fb.VCbSet, f = Fb.WCbSet, a = a.head, j = b.head; null != a && null != j;) {
                var h = a.elt,
                    g = j.elt;
                h == g ? (f.inlined_add(h), a = a.next, j = j.next) : za.setlt(h, g) ? (d.inlined_add(h), a = a.next) : (e.inlined_add(g), j = j.next)
            }
            for (; null != a;) d.inlined_add(a.elt), a = a.next;
            for (; null != j;) e.inlined_add(j.elt), j = j.next;
            for (; null != d.head;) { a = d.pop_unsafe(); for (j = b.head; null != j;) c(a, j.elt), j = j.next }
            for (; null != e.head;) { b = e.pop_unsafe(); for (d = f.head; null != d;) c(b, d.elt), d = d.next }
            for (; null != f.head;) { e = f.pop_unsafe();
                c(e, e); for (b = f.head; null != b;) c(e, b.elt), b = b.next }
        },
        CbTypeset: function(a, b, c) {
            for (var d = Fb.UCbType,
                    e = Fb.VCbType, f = Fb.WCbType, a = a.head, j = b.head; null != a && null != j;) { var h = a.elt,
                    g = j.elt;
                h == g ? (f.inlined_add(h), a = a.next, j = j.next) : h.id < g.id ? (d.inlined_add(h), a = a.next) : (e.inlined_add(g), j = j.next) }
            for (; null != a;) d.inlined_add(a.elt), a = a.next;
            for (; null != j;) e.inlined_add(j.elt), j = j.next;
            for (; null != d.head;) { a = d.pop_unsafe(); for (j = b.head; null != j;) c(a, j.elt), j = j.next }
            for (; null != e.head;) { b = e.pop_unsafe(); for (d = f.head; null != d;) c(b, d.elt), d = d.next }
            for (; null != f.head;) {
                e = f.pop_unsafe();
                c(e, e);
                for (b = f.head; null != b;) c(e,
                    b.elt), b = b.next
            }
        },
        with_uniquesets: function(a) {
            var b = this,
                c;
            null == Ga.zpp_pool ? c = new Ga : (c = Ga.zpp_pool, Ga.zpp_pool = c.next, c.next = null);
            null;
            c.lt = gc.setlt;
            this.CbTypeset(this.options1.includes, this.options2.includes, function(a, d) { b.CbSetset(a.cbsets, d.cbsets, function(a, d) { a.validate();
                    d.validate();
                    za.single_intersection(a, d, b) && c.try_insert(gc.get(a, d)) }) });
            c.clear_with(function(c) {
                a ? b.space.freshListenerType(c.a, c.b) : b.space.nullListenerType(c.a, c.b);
                c.a = c.b = null;
                c.listeners.clear();
                c.next = gc.zpp_pool;
                gc.zpp_pool = c
            });
            var d = c;
            d.data = null;
            d.lt = null;
            d.swapped = null;
            d.next = Ga.zpp_pool;
            Ga.zpp_pool = d
        },
        with_union: function(a) { for (var b = this.options1.includes.head, c = this.options2.includes.head; null != b && null != c;) { var d = b.elt,
                    e = c.elt;
                d == e ? (a(d), b = b.next, c = c.next) : d.id < e.id ? (a(d), b = b.next) : (a(e), c = c.next) } for (; null != b;) a(b.elt), b = b.next; for (; null != c;) a(c.elt), c = c.next },
        addedToSpace: function() {
            var a = this,
                b = this.type == h.id_ListenerType_PRE;
            this.with_union(function(c) {
                c.addint(a);
                if (b)
                    for (c = c.interactors.head; null !=
                        c;) c.elt.wake(), c = c.next
            });
            this.options1.handler = n(this, this.cbtype_change1);
            this.options2.handler = n(this, this.cbtype_change2);
            this.with_uniquesets(!0)
        },
        removedFromSpace: function() { var a = this;
            this.with_uniquesets(!1); var b = this.type == h.id_ListenerType_PRE;
            this.with_union(function(c) { c.listeners.remove(a);
                c.invalidateint(); if (b)
                    for (c = c.interactors.head; null != c;) c.elt.wake(), c = c.next });
            this.options1.handler = null;
            this.options2.handler = null },
        cbtype_change1: function(a, b, c) {
            this.cbtype_change(this.options1,
                a, b, c)
        },
        cbtype_change2: function(a, b, c) { this.cbtype_change(this.options2, a, b, c) },
        cbtype_change: function(a, b, c, d) { this.removedFromSpace();
            a.effect_change(b, c, d);
            this.addedToSpace();
            null },
        __class__: Fb
    });
    var df = function() { this.outer = this.handler = this.includes = this.excludes = this.wrap_includes = this.wrap_excludes = null;
        this.includes = new re;
        this.excludes = new re };
    g["zpp_nape.callbacks.ZPP_OptionType"] = df;
    df.__name__ = ["zpp_nape", "callbacks", "ZPP_OptionType"];
    df.argument = function(a) {
        return null == a ? new mg : U.__instanceof(a,
            mg) ? a : (new mg).including(a)
    };
    df.prototype = {
        setup_includes: function() { this.wrap_includes = je.get(this.includes, !0) },
        setup_excludes: function() { this.wrap_excludes = je.get(this.excludes, !0) },
        excluded: function(a) { return this.nonemptyintersection(a, this.excludes) },
        compatible: function(a) { return this.nonemptyintersection(a, this.includes) && !this.nonemptyintersection(a, this.excludes) },
        nonemptyintersection: function(a, b) {
            for (var c = !1, d = a.head, e = b.head; null != e && null != d;) {
                var f = e.elt,
                    j = d.elt;
                if (f == j) { c = !0; break } else f.id <
                    j.id ? e = e.next : d = d.next
            }
            return c
        },
        effect_change: function(a, b, c) { if (b)
                if (c) { b = null; for (c = this.includes.head; null != c && !(a.id < c.elt.id);) { b = c;
                        c = c.next } this.includes.inlined_insert(b, a) } else this.includes.remove(a);
            else if (c) { b = null; for (c = this.excludes.head; null != c && !(a.id < c.elt.id);) { b = c;
                    c = c.next } this.excludes.inlined_insert(b, a) } else this.excludes.remove(a) },
        append_type: function(a, b) {
            a == this.includes ? this.includes.has(b) || (this.excludes.has(b) ? null != this.handler ? this.handler(b, !1, !1) : this.effect_change(b,
                !1, !1) : null != this.handler ? this.handler(b, !0, !0) : this.effect_change(b, !0, !0)) : this.excludes.has(b) || (this.includes.has(b) ? null != this.handler ? this.handler(b, !0, !1) : this.effect_change(b, !0, !1) : null != this.handler ? this.handler(b, !1, !0) : this.effect_change(b, !1, !0))
        },
        append: function(a, b) {
            if (U.__instanceof(b, cf)) this.append_type(a, b.zpp_inner);
            else if (U.__instanceof(b, Fj)) { var c;
                b.zpp_inner.valmod(); for (c = tc.get(b); c.hasNext();) { var d;
                    c.zpp_critical = !1;
                    d = c.zpp_inner.at(c.zpp_i++);
                    this.append_type(a, d.zpp_inner) } } else if (b instanceof Array && null == b.__enum__)
                for (c = 0; c < b.length;) d = b[c], ++c, this.append_type(a, d.zpp_inner)
        },
        __class__: df
    };
    var tn = function() { this.cbTypes = this.cbSet = null;
        this.ignore = this.__velocity = !1;
        this.component = null;
        this.active = this.stiff = this.removeOnBreak = !1;
        this.outer = this.compound = this.space = null };
    g["zpp_nape.constraint.ZPP_Constraint"] = tn;
    tn.__name__ = ["zpp_nape", "constraint", "ZPP_Constraint"];
    tn.prototype = {
        alloc_cbSet: function() { if (null != (this.cbSet = this.space.cbsets.get(this.cbTypes))) this.cbSet.count++, this.cbSet.constraints.add(this) },
        dealloc_cbSet: function() { if (null != this.cbSet) { this.cbSet.constraints.remove(this); if (0 == --this.cbSet.count) { this.space.cbsets.remove(this.cbSet); var a = this.cbSet;
                    a.free();
                    a.next = za.zpp_pool;
                    za.zpp_pool = a } this.cbSet = null } },
        addedToSpace: function() { this.active && this.activeInSpace();
            this.activeBodies(); for (var a = this.cbTypes.head; null != a;) a.elt.constraints.add(this), a = a.next },
        removedFromSpace: function() {
            this.active && this.inactiveOrOutSpace();
            this.inactiveBodies();
            for (var a = this.cbTypes.head; null != a;) a.elt.constraints.remove(this),
                a = a.next
        },
        activeInSpace: function() { this.alloc_cbSet();
            null == wc.zpp_pool ? this.component = new wc : (this.component = wc.zpp_pool, wc.zpp_pool = this.component.next, this.component.next = null);
            null;
            this.component.isBody = !1;
            this.component.constraint = this },
        inactiveOrOutSpace: function() { this.dealloc_cbSet(); var a = this.component;
            a.body = null;
            a.constraint = null;
            null;
            a.next = wc.zpp_pool;
            wc.zpp_pool = a;
            this.component = null },
        activeBodies: function() {},
        inactiveBodies: function() {},
        clearcache: function() {},
        wake_connected: function() {},
        forest: function() {},
        pair_exists: function() { return !1 },
        broken: function() {},
        warmStart: function() {},
        preStep: function() { return !1 },
        applyImpulseVel: function() { return !1 },
        applyImpulsePos: function() { return !1 },
        __class__: tn
    };
    var aa = function() {
        this.colarb = this.fluidarb = this.sensorarb = null;
        this.type = 0;
        this.b1 = this.b2 = this.ws1 = this.ws2 = this.pair = null;
        this.invalidated = !1;
        this.immState = 0;
        this.intchange = this.presentable = this.continuous = this.fresh = !1;
        this.present = 0;
        this.active = this.cleared = this.sleeping = !1;
        this.id =
            this.di = this.stamp = this.up_stamp = this.sleep_stamp = this.endGenerated = 0;
        this.outer = null
    };
    g["zpp_nape.dynamics.ZPP_Arbiter"] = aa;
    aa.__name__ = ["zpp_nape", "dynamics", "ZPP_Arbiter"];
    aa.prototype = { wrapper: function() { null == this.outer && (aa.internal = !0, this.type == aa.COL ? (this.colarb.outer_zn = new Kj, this.outer = this.colarb.outer_zn) : this.type == aa.FLUID ? (this.fluidarb.outer_zn = new Lj, this.outer = this.fluidarb.outer_zn) : this.outer = new ff, this.outer.zpp_inner = this, aa.internal = !1); return this.outer }, __class__: aa };
    var Tb = function() { this.next = null;
        aa.call(this);
        this.type = aa.SENSOR;
        this.sensorarb = this };
    g["zpp_nape.dynamics.ZPP_SensorArbiter"] = Tb;
    Tb.__name__ = ["zpp_nape", "dynamics", "ZPP_SensorArbiter"];
    Tb.__super__ = aa;
    Tb.prototype = l(aa.prototype, { retire: function() { this.cleared || (this.b1.arbiters.inlined_try_remove(this), this.b2.arbiters.inlined_try_remove(this), null != this.pair && (this.pair = this.pair.arb = null));
            this.b1 = this.b2 = null;
            this.intchange = this.active = !1;
            this.next = Tb.zpp_pool;
            Tb.zpp_pool = this }, __class__: Tb });
    var hc = function() { this.wMass = this.adamp = this.agamma = this.vMassa = this.vMassb = this.vMassc = this.dampx = this.dampy = this.lgamma = this.nx = this.ny = this.buoyx = this.buoyy = this.pre_dt = 0;
        this.nodrag = !1;
        this.centroidx = this.centroidy = this.overlap = this.r1x = this.r1y = this.r2x = this.r2y = 0;
        this.outer_zn = this.next = null;
        aa.call(this);
        this.type = aa.FLUID;
        this.fluidarb = this;
        this.buoyy = this.buoyx = 0;
        this.pre_dt = -1 };
    g["zpp_nape.dynamics.ZPP_FluidArbiter"] = hc;
    hc.__name__ = ["zpp_nape", "dynamics", "ZPP_FluidArbiter"];
    hc.__super__ =
        aa;
    hc.prototype = l(aa.prototype, {
        retire: function() { this.cleared || (this.b1.arbiters.inlined_try_remove(this), this.b2.arbiters.inlined_try_remove(this), null != this.pair && (this.pair = this.pair.arb = null));
            this.b1 = this.b2 = null;
            this.intchange = this.active = !1;
            this.next = hc.zpp_pool;
            hc.zpp_pool = this;
            this.pre_dt = -1 },
        preStep: function(a, b) {
            -1 == this.pre_dt && (this.pre_dt = b);
            var c = b / this.pre_dt;
            this.pre_dt = b;
            this.r1x = this.centroidx - this.b1.posx;
            this.r1y = this.centroidy - this.b1.posy;
            this.r2x = this.centroidx - this.b2.posx;
            this.r2y = this.centroidy - this.b2.posy;
            var d = 0,
                e = 0;
            this.ws1.fluidEnabled && null != this.ws1.fluidProperties.wrap_gravity ? (d = this.ws1.fluidProperties.gravityx, e = this.ws1.fluidProperties.gravityy) : (d = a.gravityx, e = a.gravityy);
            var f = 0,
                j = 0;
            this.ws2.fluidEnabled && null != this.ws2.fluidProperties.wrap_gravity ? (f = this.ws2.fluidProperties.gravityx, j = this.ws2.fluidProperties.gravityy) : (f = a.gravityx, j = a.gravityy);
            var g = 0,
                i = 0;
            if (this.ws1.fluidEnabled && this.ws2.fluidEnabled) {
                var k = this.overlap * this.ws1.fluidProperties.density,
                    l = this.overlap * this.ws2.fluidProperties.density;
                if (k > l) f = k + l, g -= d * f, i -= e * f;
                else if (k < l) d = k + l, g += f * d, i += j * d;
                else { var m = 0,
                        n = 0,
                        m = 0.5 * (d + f),
                        n = 0.5 * (e + j);
                    this.ws1.worldCOMx * m + this.ws1.worldCOMy * n > this.ws2.worldCOMx * m + this.ws2.worldCOMy * n ? (d = k + l, g -= m * d, i -= n * d) : (d = k + l, g += m * d, i += n * d) }
            } else this.ws1.fluidEnabled ? (f = this.overlap * this.ws1.fluidProperties.density, g -= d * f, i -= e * f) : this.ws2.fluidEnabled && (d = this.overlap * this.ws2.fluidProperties.density, g += f * d, i += j * d);
            g *= b;
            i *= b;
            this.buoyx = g;
            this.buoyy = i;
            this.b1.type ==
                h.id_BodyType_DYNAMIC && (d = this.b1.imass, this.b1.velx -= g * d, this.b1.vely -= i * d, this.b1.angvel -= (i * this.r1x - g * this.r1y) * this.b1.iinertia);
            this.b2.type == h.id_BodyType_DYNAMIC && (d = this.b2.imass, this.b2.velx += g * d, this.b2.vely += i * d, this.b2.angvel += (i * this.r2x - g * this.r2y) * this.b2.iinertia);
            if ((!this.ws1.fluidEnabled || 0 == this.ws1.fluidProperties.viscosity) && (!this.ws2.fluidEnabled || 0 == this.ws2.fluidProperties.viscosity)) this.nodrag = !0, this.adamp = this.dampy = this.dampx = 0;
            else {
                this.nodrag = !1;
                g = 0;
                this.ws1.fluidEnabled &&
                    (this.ws2.validate_angDrag(), g += this.ws1.fluidProperties.viscosity * this.ws2.angDrag * this.overlap / this.ws2.area);
                this.ws2.fluidEnabled && (this.ws1.validate_angDrag(), g += this.ws2.fluidProperties.viscosity * this.ws1.angDrag * this.overlap / this.ws1.area);
                0 != g ? (i = this.b1.sinertia + this.b2.sinertia, this.wMass = 0 != i ? 1 / i : 0, g = 2 * Math.PI * 4.0E-4 * g, this.agamma = 1 / (b * g * (2 + g * b)), g = 1 / (1 + this.agamma), this.agamma *= g, this.wMass *= g) : this.agamma = this.wMass = 0;
                g = this.b2.velx + this.b2.kinvelx - this.r2y * (this.b2.angvel + this.b2.kinangvel) -
                    (this.b1.velx + this.b1.kinvelx - this.r1y * (this.b2.angvel + this.b2.kinangvel));
                i = this.b2.vely + this.b2.kinvely + this.r2x * (this.b2.angvel + this.b2.kinangvel) - (this.b1.vely + this.b1.kinvely + this.r1x * (this.b1.angvel + this.b1.kinangvel));
                g * g + i * i < t.epsilon * t.epsilon || (d = 1 / Math.sqrt(g * g + i * i), this.nx = g * d, this.ny = i * d);
                g = 0;
                if (this.ws1.fluidEnabled)
                    if (i = -this.ws1.fluidProperties.viscosity * this.overlap / this.ws2.area, this.ws2.type == h.id_ShapeType_CIRCLE) g -= i * this.ws2.circle.radius * t.fluidLinearDrag / (2 * this.ws2.circle.radius *
                        Math.PI);
                    else { e = d = 0; for (f = this.ws2.polygon.edges.head; null != f;) j = f.elt, d += j.length, j = i * j.length * (j.gnormx * this.nx + j.gnormy * this.ny), 0 < j && (j = j *= -t.fluidVacuumDrag), e -= 0.5 * j * t.fluidLinearDrag, f = f.next;
                        g += e / d } if (this.ws2.fluidEnabled)
                    if (i = -this.ws2.fluidProperties.viscosity * this.overlap / this.ws1.area, this.ws1.type == h.id_ShapeType_CIRCLE) g -= i * this.ws1.circle.radius * t.fluidLinearDrag / (2 * this.ws1.circle.radius * Math.PI);
                    else {
                        e = d = 0;
                        for (f = this.ws1.polygon.edges.head; null != f;) j = f.elt, d += j.length, j = i * j.length *
                            (j.gnormx * this.nx + j.gnormy * this.ny), 0 < j && (j = j *= -t.fluidVacuumDrag), e -= 0.5 * j * t.fluidLinearDrag, f = f.next;
                        g += e / d
                    } 0 != g ? (f = this.b1.smass + this.b2.smass, e = d = i = 0, i = f, d = 0, e = f, 0 != this.b1.sinertia && (f = this.r1x * this.b1.sinertia, j = this.r1y * this.b1.sinertia, i += j * this.r1y, d += -j * this.r1x, e += f * this.r1x), 0 != this.b2.sinertia && (f = this.r2x * this.b2.sinertia, j = this.r2y * this.b2.sinertia, i += j * this.r2y, d += -j * this.r2x, e += f * this.r2x), f = i * e - d * d, f != f ? (i = d = e = 0, 3) : 0 == f ? (f = 0, 0 != i ? i = 1 / i : (i = 0, f |= 1), 0 != e ? e = 1 / e : (e = 0, f |= 2), d = 0, f) : (f =
                    1 / f, j = e * f, e = i * f, i = j, d *= -f, 0), this.vMassa = i, this.vMassb = d, this.vMassc = e, g *= 2 * Math.PI, this.lgamma = 1 / (b * g * (2 + g * b)), g = 1 / (1 + this.lgamma), this.lgamma *= g, this.vMassa *= g, this.vMassb *= g, this.vMassc *= g) : this.lgamma = this.vMassc = this.vMassb = this.vMassa = 0
            }
            this.dampx *= c;
            this.dampy *= c;
            this.adamp *= c
        },
        warmStart: function() {
            var a = this.b1.imass;
            this.b1.velx -= this.dampx * a;
            this.b1.vely -= this.dampy * a;
            a = this.b2.imass;
            this.b2.velx += this.dampx * a;
            this.b2.vely += this.dampy * a;
            this.b1.angvel -= this.b1.iinertia * (this.dampy * this.r1x -
                this.dampx * this.r1y);
            this.b2.angvel += this.b2.iinertia * (this.dampy * this.r2x - this.dampx * this.r2y);
            this.b1.angvel -= this.adamp * this.b1.iinertia;
            this.b2.angvel += this.adamp * this.b2.iinertia
        },
        applyImpulseVel: function() {
            if (!this.nodrag) {
                var a = this.b1.angvel + this.b1.kinangvel,
                    b = this.b2.angvel + this.b2.kinangvel,
                    c = this.b1.velx + this.b1.kinvelx - this.r1y * a - (this.b2.velx + this.b2.kinvelx - this.r2y * b),
                    d = this.b1.vely + this.b1.kinvely + this.r1x * a - (this.b2.vely + this.b2.kinvely + this.r2x * b),
                    e = this.vMassa * c + this.vMassb * d,
                    d = this.vMassb * c + this.vMassc * d,
                    f = this.lgamma,
                    c = e - this.dampx * f,
                    d = d - this.dampy * f;
                this.dampx += 1 * c;
                this.dampy += 1 * d;
                e = this.b1.imass;
                this.b1.velx -= c * e;
                this.b1.vely -= d * e;
                e = this.b2.imass;
                this.b2.velx += c * e;
                this.b2.vely += d * e;
                this.b1.angvel -= this.b1.iinertia * (d * this.r1x - c * this.r1y);
                this.b2.angvel += this.b2.iinertia * (d * this.r2x - c * this.r2y);
                a = (a - b) * this.wMass - this.adamp * this.agamma;
                this.adamp += a;
                this.b1.angvel -= a * this.b1.iinertia;
                this.b2.angvel += a * this.b2.iinertia
            }
        },
        __class__: hc
    });
    var Nc = function() {
        this.pre_dt =
            0;
        this.stat = !1;
        this.next = null;
        this.hc2 = this.hpc2 = !1;
        this.c1 = this.oc1 = this.c2 = this.oc2 = null;
        this.__ref_vertex = 0;
        this.__ref_edge1 = this.__ref_edge2 = null;
        this.biasCoef = 0;
        this.rev = !1;
        this.kMassa = this.kMassb = this.kMassc = this.Ka = this.Kb = this.Kc = this.rMass = this.jrAcc = this.rn1a = this.rt1a = this.rn1b = this.rt1b = this.rn2a = this.rt2a = this.rn2b = this.rt2b = this.k1x = this.k1y = this.k2x = this.k2y = this.surfacex = this.surfacey = this.lnormx = this.lnormy = this.lproj = this.radius = 0;
        this.wrap_normal = null;
        this.nx = this.ny = 0;
        this.s1 =
            this.s2 = this.contacts = this.innards = null;
        this.userdef_dyn_fric = this.userdef_stat_fric = this.userdef_restitution = this.userdef_rfric = !1;
        this.dyn_fric = this.stat_fric = this.restitution = this.rfric = 0;
        this.outer_zn = null;
        aa.call(this);
        this.pre_dt = -1;
        this.contacts = new xc;
        this.innards = new ol;
        this.type = aa.COL;
        this.colarb = this
    };
    g["zpp_nape.dynamics.ZPP_ColArbiter"] = Nc;
    Nc.__name__ = ["zpp_nape", "dynamics", "ZPP_ColArbiter"];
    Nc.__super__ = aa;
    Nc.prototype = l(aa.prototype, {
        normal_validate: function() {
            if (this.cleared) throw "Error: Arbiter not currently in use";
            this.wrap_normal.zpp_inner.x = this.nx;
            this.wrap_normal.zpp_inner.y = this.ny;
            this.ws1.id > this.ws2.id && (this.wrap_normal.zpp_inner.x = -this.wrap_normal.zpp_inner.x, this.wrap_normal.zpp_inner.y = -this.wrap_normal.zpp_inner.y)
        },
        getnormal: function() { this.wrap_normal = fa.get(0, 0, null);
            this.wrap_normal.zpp_inner._immutable = !0;
            this.wrap_normal.zpp_inner._inuse = !0;
            this.wrap_normal.zpp_inner._validate = n(this, this.normal_validate) },
        injectContact: function(a, b, c, d, e, f, j) {
            null == j && (j = !1);
            for (var h = null, g = this.contacts.next; null !=
                g;) { var i = g; if (f == i.hash) { h = i; break } g = g.next } null == h ? (null == xc.zpp_pool ? h = new xc : (h = xc.zpp_pool, xc.zpp_pool = h.next, h.next = null), null, g = h.inner, g.jnAcc = g.jtAcc = 0, h.hash = f, h.fresh = !0, h.arbiter = this, this.jrAcc = 0, this.contacts.inlined_add(h), this.innards.add(g)) : h.fresh = !1;
            h.px = a;
            h.py = b;
            this.nx = c;
            this.ny = d;
            h.dist = e;
            h.stamp = this.stamp;
            h.posOnly = j;
            return h
        },
        retire: function() {
            this.cleared || (this.b1.arbiters.inlined_try_remove(this), this.b2.arbiters.inlined_try_remove(this), null != this.pair && (this.pair = this.pair.arb =
                null));
            this.b1 = this.b2 = null;
            for (this.intchange = this.active = !1; null != this.contacts.next;) { var a = this.contacts.inlined_pop_unsafe();
                a.arbiter = null;
                a.next = xc.zpp_pool;
                xc.zpp_pool = a;
                this.innards.inlined_pop() } this.userdef_rfric = this.userdef_restitution = this.userdef_stat_fric = this.userdef_dyn_fric = !1;
            this.__ref_edge1 = this.__ref_edge2 = null;
            this.next = Nc.zpp_pool;
            Nc.zpp_pool = this;
            this.pre_dt = -1
        },
        cleanupContacts: function() {
            var a = !0,
                b = null,
                c = null,
                d = this.innards.next;
            this.hc2 = !1;
            for (var e = this.contacts.next; null !=
                e;) { var f = e;
                f.stamp + t.arbiterExpirationDelay < this.stamp ? (e = this.contacts.inlined_erase(b), d = this.innards.inlined_erase(c), f.arbiter = null, f.next = xc.zpp_pool, xc.zpp_pool = f) : (b = f.inner, c = f.active, f.active = f.stamp == this.stamp, f.active && (a ? (a = !1, this.c1 = b, this.oc1 = f) : (this.hc2 = !0, this.c2 = b, this.oc2 = f)), c != f.active && (this.contacts.modified = !0), b = e, c = d, d = d.next, e = e.next) } this.hc2 ? (this.hpc2 = !0, this.oc1.posOnly ? (d = this.c1, this.c1 = this.c2, this.c2 = d, d = this.oc1, this.oc1 = this.oc2, this.oc2 = d, this.hc2 = !1) : this.oc2.posOnly &&
                (this.hc2 = !1), this.oc1.posOnly && (a = !0)) : this.hpc2 = !1;
            return a
        },
        preStep: function(a) {
            this.invalidated && (this.invalidated = !1, this.userdef_restitution || (this.restitution = this.s1.material.elasticity <= Math.NEGATIVE_INFINITY || this.s2.material.elasticity <= Math.NEGATIVE_INFINITY ? 0 : this.s1.material.elasticity >= Math.POSITIVE_INFINITY || this.s2.material.elasticity >= Math.POSITIVE_INFINITY ? 1 : (this.s1.material.elasticity + this.s2.material.elasticity) / 2, 0 > this.restitution && (this.restitution = 0), 1 < this.restitution &&
                (this.restitution = 1)), this.userdef_dyn_fric || (this.dyn_fric = Math.sqrt(this.s1.material.dynamicFriction * this.s2.material.dynamicFriction)), this.userdef_stat_fric || (this.stat_fric = Math.sqrt(this.s1.material.staticFriction * this.s2.material.staticFriction)), this.userdef_rfric || (this.rfric = Math.sqrt(this.s1.material.rollingFriction * this.s2.material.rollingFriction))); - 1 == this.pre_dt && (this.pre_dt = a);
            var b = a / this.pre_dt;
            this.pre_dt = a;
            var c = this.b1.smass + this.b2.smass;
            this.hc2 = !1;
            a = !0;
            this.biasCoef = this.b1.type !=
                h.id_BodyType_DYNAMIC || this.b2.type != h.id_BodyType_DYNAMIC ? this.continuous ? t.contactContinuousStaticBiasCoef : t.contactStaticBiasCoef : this.continuous ? t.contactContinuousBiasCoef : t.contactBiasCoef;
            this.continuous = !1;
            for (var d = null, e = null, f = this.innards.next, j = this.contacts.next; null != j;) {
                var g = j;
                if (g.stamp + t.arbiterExpirationDelay < this.stamp) j = this.contacts.inlined_erase(d), f = this.innards.inlined_erase(e), g.arbiter = null, g.next = xc.zpp_pool, xc.zpp_pool = g;
                else {
                    d = g.inner;
                    e = g.active;
                    g.active = g.stamp == this.stamp;
                    if (g.active) {
                        a ? (a = !1, this.c1 = d, this.oc1 = g) : (this.hc2 = !0, this.c2 = d, this.oc2 = g);
                        d.r2x = g.px - this.b2.posx;
                        d.r2y = g.py - this.b2.posy;
                        d.r1x = g.px - this.b1.posx;
                        d.r1y = g.py - this.b1.posy;
                        var i = c + this.b2.sinertia * Mh.sqr(d.r2x * this.nx + d.r2y * this.ny),
                            i = i + this.b1.sinertia * Mh.sqr(d.r1x * this.nx + d.r1y * this.ny);
                        d.tMass = i < t.epsilon * t.epsilon ? 0 : 1 / i;
                        i = c + this.b2.sinertia * Mh.sqr(this.ny * d.r2x - this.nx * d.r2y);
                        i += this.b1.sinertia * Mh.sqr(this.ny * d.r1x - this.nx * d.r1y);
                        d.nMass = i < t.epsilon * t.epsilon ? 0 : 1 / i;
                        var k = i = 0,
                            l = this.b2.angvel +
                            this.b2.kinangvel,
                            i = this.b2.velx + this.b2.kinvelx - d.r2y * l,
                            k = this.b2.vely + this.b2.kinvely + d.r2x * l,
                            l = this.b1.angvel + this.b1.kinangvel,
                            i = i - (this.b1.velx + this.b1.kinvelx - d.r1y * l),
                            k = k - (this.b1.vely + this.b1.kinvely + d.r1x * l),
                            l = this.nx * i + this.ny * k;
                        g.elasticity = this.restitution;
                        d.bounce = l * g.elasticity;
                        d.bounce > -t.elasticThreshold && (d.bounce = 0);
                        l = k * this.nx - i * this.ny;
                        i = t.staticFrictionThreshold;
                        d.friction = l * l > i * i ? this.dyn_fric : this.stat_fric;
                        d.jnAcc *= b;
                        d.jtAcc *= b
                    }
                    e != g.active && (this.contacts.modified = !0);
                    d = j;
                    e = f;
                    f = f.next;
                    j = j.next
                }
            }
            this.hc2 ? (this.hpc2 = !0, this.oc1.posOnly ? (f = this.c1, this.c1 = this.c2, this.c2 = f, f = this.oc1, this.oc1 = this.oc2, this.oc2 = f, this.hc2 = !1) : this.oc2.posOnly && (this.hc2 = !1), this.oc1.posOnly && (a = !0)) : this.hpc2 = !1;
            this.jrAcc *= b;
            a || (this.rn1a = this.ny * this.c1.r1x - this.nx * this.c1.r1y, this.rt1a = this.c1.r1x * this.nx + this.c1.r1y * this.ny, this.rn1b = this.ny * this.c1.r2x - this.nx * this.c1.r2y, this.rt1b = this.c1.r2x * this.nx + this.c1.r2y * this.ny, this.k1x = this.b2.kinvelx - this.c1.r2y * this.b2.kinangvel - (this.b1.kinvelx -
                this.c1.r1y * this.b1.kinangvel), this.k1y = this.b2.kinvely + this.c1.r2x * this.b2.kinangvel - (this.b1.kinvely + this.c1.r1x * this.b1.kinangvel));
            this.hc2 && (this.rn2a = this.ny * this.c2.r1x - this.nx * this.c2.r1y, this.rt2a = this.c2.r1x * this.nx + this.c2.r1y * this.ny, this.rn2b = this.ny * this.c2.r2x - this.nx * this.c2.r2y, this.rt2b = this.c2.r2x * this.nx + this.c2.r2y * this.ny, this.k2x = this.b2.kinvelx - this.c2.r2y * this.b2.kinangvel - (this.b1.kinvelx - this.c2.r1y * this.b1.kinangvel), this.k2y = this.b2.kinvely + this.c2.r2x * this.b2.kinangvel -
                (this.b1.kinvely + this.c2.r1x * this.b1.kinangvel), this.kMassa = c + this.b1.sinertia * this.rn1a * this.rn1a + this.b2.sinertia * this.rn1b * this.rn1b, this.kMassb = c + this.b1.sinertia * this.rn1a * this.rn2a + this.b2.sinertia * this.rn1b * this.rn2b, this.kMassc = c + this.b1.sinertia * this.rn2a * this.rn2a + this.b2.sinertia * this.rn2b * this.rn2b, this.kMassa * this.kMassa + 2 * this.kMassb * this.kMassb + this.kMassc * this.kMassc < t.illConditionedThreshold * (this.kMassa * this.kMassc - this.kMassb * this.kMassb) ? (this.Ka = this.kMassa, this.Kb = this.kMassb,
                    this.Kc = this.kMassc, b = this.kMassa * this.kMassc - this.kMassb * this.kMassb, b != b ? (this.kMassa = this.kMassb = this.kMassc = 0, 3) : 0 == b ? (b = 0, 0 != this.kMassa ? this.kMassa = 1 / this.kMassa : (this.kMassa = 0, b |= 1), 0 != this.kMassc ? this.kMassc = 1 / this.kMassc : (this.kMassc = 0, b |= 2), this.kMassb = 0, b) : (b = 1 / b, c = this.kMassc * b, this.kMassc = this.kMassa * b, this.kMassa = c, this.kMassb *= -b, 0)) : (this.hc2 = !1, this.oc2.dist < this.oc1.dist && (b = this.c1, this.c1 = this.c2, this.c2 = b), this.oc2.active = !1, this.contacts.modified = !0));
            this.surfacex = this.b2.svelx;
            this.surfacey = this.b2.svely;
            this.surfacex += 1 * this.b1.svelx;
            this.surfacey += 1 * this.b1.svely;
            this.surfacex = -this.surfacex;
            this.surfacey = -this.surfacey;
            this.rMass = this.b1.sinertia + this.b2.sinertia;
            0 != this.rMass && (this.rMass = 1 / this.rMass);
            return a
        },
        warmStart: function() {
            var a = this.nx * this.c1.jnAcc - this.ny * this.c1.jtAcc,
                b = this.ny * this.c1.jnAcc + this.nx * this.c1.jtAcc,
                c = this.b1.imass;
            this.b1.velx -= a * c;
            this.b1.vely -= b * c;
            this.b1.angvel -= this.b1.iinertia * (b * this.c1.r1x - a * this.c1.r1y);
            c = this.b2.imass;
            this.b2.velx +=
                a * c;
            this.b2.vely += b * c;
            this.b2.angvel += this.b2.iinertia * (b * this.c1.r2x - a * this.c1.r2y);
            this.hc2 && (a = this.nx * this.c2.jnAcc - this.ny * this.c2.jtAcc, b = this.ny * this.c2.jnAcc + this.nx * this.c2.jtAcc, c = this.b1.imass, this.b1.velx -= a * c, this.b1.vely -= b * c, this.b1.angvel -= this.b1.iinertia * (b * this.c2.r1x - a * this.c2.r1y), c = this.b2.imass, this.b2.velx += a * c, this.b2.vely += b * c, this.b2.angvel += this.b2.iinertia * (b * this.c2.r2x - a * this.c2.r2y));
            this.b2.angvel += this.jrAcc * this.b2.iinertia;
            this.b1.angvel -= this.jrAcc * this.b1.iinertia
        },
        applyImpulseVel: function() {
            var a, b, c, d, e;
            d = this.k1x + this.b2.velx - this.c1.r2y * this.b2.angvel - (this.b1.velx - this.c1.r1y * this.b1.angvel);
            var f = this.k1y + this.b2.vely + this.c1.r2x * this.b2.angvel - (this.b1.vely + this.c1.r1x * this.b1.angvel);
            c = (f * this.nx - d * this.ny + this.surfacex) * this.c1.tMass;
            d = this.c1.friction * this.c1.jnAcc;
            a = this.c1.jtAcc;
            e = a - c;
            e > d ? e = d : e < -d && (e = -d);
            c = e - a;
            this.c1.jtAcc = e;
            a = -this.ny * c;
            b = this.nx * c;
            this.b2.velx += a * this.b2.imass;
            this.b2.vely += b * this.b2.imass;
            this.b1.velx -= a * this.b1.imass;
            this.b1.vely -=
                b * this.b1.imass;
            this.b2.angvel += this.rt1b * c * this.b2.iinertia;
            this.b1.angvel -= this.rt1a * c * this.b1.iinertia;
            this.hc2 ? (e = this.k2x + this.b2.velx - this.c2.r2y * this.b2.angvel - (this.b1.velx - this.c2.r1y * this.b1.angvel), b = this.k2y + this.b2.vely + this.c2.r2x * this.b2.angvel - (this.b1.vely + this.c2.r1x * this.b1.angvel), c = (b * this.nx - e * this.ny + this.surfacex) * this.c2.tMass, d = this.c2.friction * this.c2.jnAcc, a = this.c2.jtAcc, e = a - c, e > d ? e = d : e < -d && (e = -d), c = e - a, this.c2.jtAcc = e, a = -this.ny * c, b = this.nx * c, this.b2.velx += a * this.b2.imass,
                this.b2.vely += b * this.b2.imass, this.b1.velx -= a * this.b1.imass, this.b1.vely -= b * this.b1.imass, this.b2.angvel += this.rt2b * c * this.b2.iinertia, this.b1.angvel -= this.rt2a * c * this.b1.iinertia, d = this.k1x + this.b2.velx - this.c1.r2y * this.b2.angvel - (this.b1.velx - this.c1.r1y * this.b1.angvel), f = this.k1y + this.b2.vely + this.c1.r2x * this.b2.angvel - (this.b1.vely + this.c1.r1x * this.b1.angvel), e = this.k2x + this.b2.velx - this.c2.r2y * this.b2.angvel - (this.b1.velx - this.c2.r1y * this.b1.angvel), b = this.k2y + this.b2.vely + this.c2.r2x * this.b2.angvel -
                (this.b1.vely + this.c2.r1x * this.b1.angvel), c = this.c1.jnAcc, a = this.c2.jnAcc, d = d * this.nx + f * this.ny + this.surfacey + this.c1.bounce - (this.Ka * c + this.Kb * a), e = e * this.nx + b * this.ny + this.surfacey + this.c2.bounce - (this.Kb * c + this.Kc * a), b = -(this.kMassa * d + this.kMassb * e), f = -(this.kMassb * d + this.kMassc * e), 0 <= b && 0 <= f ? (d = b - c, e = f - a, this.c1.jnAcc = b, this.c2.jnAcc = f) : (b = -this.c1.nMass * d, 0 <= b && 0 <= this.Kb * b + e ? (d = b - c, e = -a, this.c1.jnAcc = b, this.c2.jnAcc = 0) : (f = -this.c2.nMass * e, 0 <= f && 0 <= this.Kb * f + d ? (d = -c, e = f - a, this.c1.jnAcc = 0, this.c2.jnAcc =
                    f) : 0 <= d && 0 <= e ? (d = -c, e = -a, this.c1.jnAcc = this.c2.jnAcc = 0) : e = d = 0)), c = d + e, a = this.nx * c, b = this.ny * c, this.b2.velx += a * this.b2.imass, this.b2.vely += b * this.b2.imass, this.b1.velx -= a * this.b1.imass, this.b1.vely -= b * this.b1.imass, this.b2.angvel += (this.rn1b * d + this.rn2b * e) * this.b2.iinertia, this.b1.angvel -= (this.rn1a * d + this.rn2a * e) * this.b1.iinertia) : (0 != this.radius && (c = (this.b2.angvel - this.b1.angvel) * this.rMass, d = this.rfric * this.c1.jnAcc, a = this.jrAcc, this.jrAcc -= c, this.jrAcc > d ? this.jrAcc = d : this.jrAcc < -d && (this.jrAcc = -d), c = this.jrAcc - a, this.b2.angvel += c * this.b2.iinertia, this.b1.angvel -= c * this.b1.iinertia), d = this.k1x + this.b2.velx - this.c1.r2y * this.b2.angvel - (this.b1.velx - this.c1.r1y * this.b1.angvel), f = this.k1y + this.b2.vely + this.c1.r2x * this.b2.angvel - (this.b1.vely + this.c1.r1x * this.b1.angvel), c = (this.c1.bounce + (this.nx * d + this.ny * f) + this.surfacey) * this.c1.nMass, a = this.c1.jnAcc, e = a - c, 0 > e && (e = 0), c = e - a, this.c1.jnAcc = e, a = this.nx * c, b = this.ny * c, this.b2.velx += a * this.b2.imass, this.b2.vely += b * this.b2.imass, this.b1.velx -= a * this.b1.imass,
                this.b1.vely -= b * this.b1.imass, this.b2.angvel += this.rn1b * c * this.b2.iinertia, this.b1.angvel -= this.rn1a * c * this.b1.iinertia)
        },
        applyImpulsePos: function() {
            if (2 == this.ptype) {
                var a = this.c1,
                    b = 0,
                    c = 0,
                    b = this.b2.axisy * a.lr2x - this.b2.axisx * a.lr2y,
                    c = a.lr2x * this.b2.axisx + a.lr2y * this.b2.axisy,
                    b = b + 1 * this.b2.posx,
                    c = c + 1 * this.b2.posy,
                    d = 0,
                    e = 0,
                    d = this.b1.axisy * a.lr1x - this.b1.axisx * a.lr1y,
                    e = a.lr1x * this.b1.axisx + a.lr1y * this.b1.axisy,
                    d = d + 1 * this.b1.posx,
                    e = e + 1 * this.b1.posy,
                    f = a = 0,
                    a = b - d,
                    f = c - e,
                    j = Math.sqrt(a * a + f * f),
                    h = this.radius -
                    t.collisionSlop,
                    g = j - h;
                0 > a * this.nx + f * this.ny && (a = -a, f = -f, g -= this.radius);
                0 > g && (j < t.epsilon ? 0 != this.b1.smass ? this.b1.posx += 10 * t.epsilon : this.b2.posx += 10 * t.epsilon : (g = 1 / j, a *= g, f *= g, b = 0.5 * (d + b), c = 0.5 * (e + c), d = b - this.b1.posx, e = c - this.b1.posy, b -= this.b2.posx, c -= this.b2.posy, d = f * d - a * e, b = f * b - a * c, c = this.b2.smass + b * b * this.b2.sinertia + this.b1.smass + d * d * this.b1.sinertia, 0 != c && (j = -this.biasCoef * (j - h) / c, c = h = 0, h = a * j, c = f * j, a = this.b1.imass, this.b1.posx -= h * a, this.b1.posy -= c * a, this.b1.delta_rot(-d * this.b1.iinertia * j),
                    a = this.b2.imass, this.b2.posx += h * a, this.b2.posy += c * a, this.b2.delta_rot(b * this.b2.iinertia * j))))
            } else {
                var i = g = f = a = 0,
                    e = b = 0;
                0 == this.ptype ? (a = this.b1.axisy * this.lnormx - this.b1.axisx * this.lnormy, f = this.lnormx * this.b1.axisx + this.lnormy * this.b1.axisy, h = this.lproj + (a * this.b1.posx + f * this.b1.posy), g = this.b2.axisy * this.c1.lr1x - this.b2.axisx * this.c1.lr1y, i = this.c1.lr1x * this.b2.axisx + this.c1.lr1y * this.b2.axisy, g += 1 * this.b2.posx, i += 1 * this.b2.posy, this.hpc2 && (b = this.b2.axisy * this.c2.lr1x - this.b2.axisx * this.c2.lr1y,
                    e = this.c2.lr1x * this.b2.axisx + this.c2.lr1y * this.b2.axisy, b += 1 * this.b2.posx, e += 1 * this.b2.posy)) : (a = this.b2.axisy * this.lnormx - this.b2.axisx * this.lnormy, f = this.lnormx * this.b2.axisx + this.lnormy * this.b2.axisy, h = this.lproj + (a * this.b2.posx + f * this.b2.posy), g = this.b1.axisy * this.c1.lr1x - this.b1.axisx * this.c1.lr1y, i = this.c1.lr1x * this.b1.axisx + this.c1.lr1y * this.b1.axisy, g += 1 * this.b1.posx, i += 1 * this.b1.posy, this.hpc2 && (b = this.b1.axisy * this.c2.lr1x - this.b1.axisx * this.c2.lr1y, e = this.c2.lr1x * this.b1.axisx + this.c2.lr1y *
                    this.b1.axisy, b += 1 * this.b1.posx, e += 1 * this.b1.posy));
                j = g * a + i * f - h - this.radius;
                j += t.collisionSlop;
                c = 0;
                this.hpc2 && (c = b * a + e * f - h - this.radius, c += t.collisionSlop);
                if (0 > j || 0 > c) {
                    this.rev && (a = -a, f = -f);
                    var k = 0,
                        l = 0,
                        k = g - this.b1.posx,
                        l = i - this.b1.posy,
                        d = h = 0,
                        h = g - this.b2.posx,
                        d = i - this.b2.posy,
                        m = 0,
                        n = 0,
                        i = g = 0;
                    if (this.hpc2) {
                        m = b - this.b1.posx;
                        n = e - this.b1.posy;
                        g = b - this.b2.posx;
                        i = e - this.b2.posy;
                        b = f * k - a * l;
                        h = f * h - a * d;
                        e = f * m - a * n;
                        d = f * g - a * i;
                        g = this.b1.smass + this.b2.smass;
                        this.kMassa = g + this.b1.sinertia * b * b + this.b2.sinertia * h * h;
                        this.kMassb =
                            g + this.b1.sinertia * b * e + this.b2.sinertia * h * d;
                        this.kMassc = g + this.b1.sinertia * e * e + this.b2.sinertia * d * d;
                        k = i = g = 0;
                        g = this.kMassa;
                        i = this.kMassb;
                        k = this.kMassc;
                        l = j * this.biasCoef;
                        m = c * this.biasCoef;
                        c = j = 0;
                        j = -l;
                        c = -m;
                        n = this.kMassa * this.kMassc - this.kMassb * this.kMassb;
                        if (n != n) j = c = 0;
                        else if (0 == n) j = 0 != this.kMassa ? j / this.kMassa : 0, c = 0 != this.kMassc ? c / this.kMassc : 0;
                        else var n = 1 / n,
                            o = n * (this.kMassc * j - this.kMassb * c),
                            c = n * (this.kMassa * c - this.kMassb * j),
                            j = o;
                        0 <= j && 0 <= c ? (g = (j + c) * this.b1.imass, this.b1.posx -= a * g, this.b1.posy -= f * g,
                            this.b1.delta_rot(-this.b1.iinertia * (b * j + e * c)), b = (j + c) * this.b2.imass, this.b2.posx += a * b, this.b2.posy += f * b, this.b2.delta_rot(this.b2.iinertia * (h * j + d * c))) : (j = -l / g, c = 0, 0 <= j && 0 <= i * j + m ? (g = (j + c) * this.b1.imass, this.b1.posx -= a * g, this.b1.posy -= f * g, this.b1.delta_rot(-this.b1.iinertia * (b * j + e * c)), b = (j + c) * this.b2.imass, this.b2.posx += a * b, this.b2.posy += f * b, this.b2.delta_rot(this.b2.iinertia * (h * j + d * c))) : (j = 0, c = -m / k, 0 <= c && 0 <= i * c + l && (g = (j + c) * this.b1.imass, this.b1.posx -= a * g, this.b1.posy -= f * g, this.b1.delta_rot(-this.b1.iinertia *
                            (b * j + e * c)), b = (j + c) * this.b2.imass, this.b2.posx += a * b, this.b2.posy += f * b, this.b2.delta_rot(this.b2.iinertia * (h * j + d * c)))))
                    } else b = f * k - a * l, h = f * h - a * d, c = this.b2.smass + h * h * this.b2.sinertia + this.b1.smass + b * b * this.b1.sinertia, 0 != c && (j = -this.biasCoef * j / c, d = c = 0, c = a * j, d = f * j, a = this.b1.imass, this.b1.posx -= c * a, this.b1.posy -= d * a, this.b1.delta_rot(-b * this.b1.iinertia * j), a = this.b2.imass, this.b2.posx += c * a, this.b2.posy += d * a, this.b2.delta_rot(h * this.b2.iinertia * j))
                }
            }
        },
        __class__: Nc
    });
    var xc = function() {
        this.length = 0;
        this._inuse =
            this.modified = this.pushmod = !1;
        this.next = null;
        this.dist = this.elasticity = 0;
        this.fresh = !1;
        this.stamp = this.hash = 0;
        this.active = this.posOnly = !1;
        this.arbiter = this.inner = null;
        this.px = this.py = 0;
        this.outer = null;
        this.inner = new ol
    };
    g["zpp_nape.dynamics.ZPP_Contact"] = xc;
    xc.__name__ = ["zpp_nape", "dynamics", "ZPP_Contact"];
    xc.prototype = {
        wrapper: function() { null == this.outer && (xc.internal = !0, this.outer = new fm, xc.internal = !1, this.outer.zpp_inner = this); return this.outer },
        inlined_add: function(a) {
            a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.next;
            this.next = a.next;
            a._inuse = !1;
            null == this.next && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        inlined_pop_unsafe: function() { var a = this.next;
            this.pop(); return a },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.next, this.next = c = b.next, null == this.next && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            b._inuse = !1;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        __class__: xc
    };
    var ol = function() { this.length = 0;
        this._inuse = this.modified = this.pushmod = !1;
        this.next = null;
        this.r1x = this.r1y = this.r2x = this.r2y = this.nMass = this.tMass = this.bounce = this.friction = this.jnAcc = this.jtAcc = this.lr1x = this.lr1y = this.lr2x = this.lr2y = 0 };
    g["zpp_nape.dynamics.ZPP_IContact"] = ol;
    ol.__name__ = ["zpp_nape", "dynamics", "ZPP_IContact"];
    ol.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++;
            return a
        },
        inlined_pop: function() { var a = this.next;
            this.next = a.next;
            a._inuse = !1;
            null == this.next && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.next, this.next = c = b.next, null == this.next && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            b._inuse = !1;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: ol
    };
    var Ra = function() {
        this.collisionGroup = this.collisionMask = this.sensorGroup = this.sensorMask = this.fluidGroup = this.fluidMask =
            0;
        this.next = this.outer = this.shapes = null;
        this.shapes = new Df;
        this.collisionGroup = this.sensorGroup = this.fluidGroup = 1;
        this.collisionMask = this.sensorMask = this.fluidMask = -1
    };
    g["zpp_nape.dynamics.ZPP_InteractionFilter"] = Ra;
    Ra.__name__ = ["zpp_nape", "dynamics", "ZPP_InteractionFilter"];
    Ra.prototype = {
        wrapper: function() { if (null == this.outer) { this.outer = new gm; var a = this.outer.zpp_inner;
                a.outer = null;
                a.next = Ra.zpp_pool;
                Ra.zpp_pool = a;
                this.outer.zpp_inner = this } return this.outer },
        shouldCollide: function(a) {
            return 0 !=
                (this.collisionMask & a.collisionGroup) && 0 != (a.collisionMask & this.collisionGroup)
        },
        shouldSense: function(a) { return 0 != (this.sensorMask & a.sensorGroup) && 0 != (a.sensorMask & this.sensorGroup) },
        shouldFlow: function(a) { return 0 != (this.fluidMask & a.fluidGroup) && 0 != (a.fluidMask & this.fluidGroup) },
        invalidate: function() { for (var a = this.shapes.head; null != a;) a.elt.invalidate_filter(), a = a.next },
        __class__: Ra
    };
    var un = function() { this.depth = 0;
        this.group = this.interactors = null;
        this.ignore = !1;
        this.outer = null };
    g["zpp_nape.dynamics.ZPP_InteractionGroup"] =
        un;
    un.__name__ = ["zpp_nape", "dynamics", "ZPP_InteractionGroup"];
    un.prototype = { __class__: un };
    var Wa = function() { this.wrap_max = null;
        this.maxx = this.maxy = 0;
        this.wrap_min = null;
        this.minx = this.miny = 0;
        this.outer = this.next = null;
        this._immutable = !1;
        this._invalidate = this._validate = null };
    g["zpp_nape.geom.ZPP_AABB"] = Wa;
    Wa.__name__ = ["zpp_nape", "geom", "ZPP_AABB"];
    Wa.get = function(a, b, c, d) { var e;
        null == Wa.zpp_pool ? e = new Wa : (e = Wa.zpp_pool, Wa.zpp_pool = e.next, e.next = null);
        null;
        e.minx = a;
        e.miny = b;
        e.maxx = c;
        e.maxy = d; return e };
    Wa.prototype = {
        validate: function() { null != this._validate && this._validate() },
        wrapper: function() { if (null == this.outer) { this.outer = new hm; var a = this.outer.zpp_inner;
                null != a.outer && (a.outer.zpp_inner = null, a.outer = null);
                a.wrap_min = a.wrap_max = null;
                a._invalidate = null;
                a._validate = null;
                a.next = Wa.zpp_pool;
                Wa.zpp_pool = a;
                this.outer.zpp_inner = this } return this.outer },
        width: function() { return this.maxx - this.minx },
        height: function() { return this.maxy - this.miny },
        perimeter: function() {
            return 2 * (this.maxx - this.minx + (this.maxy -
                this.miny))
        },
        intersectY: function(a) { return !(a.miny > this.maxy || this.miny > a.maxy) },
        intersect: function(a) { return a.miny <= this.maxy && this.miny <= a.maxy && a.minx <= this.maxx && this.minx <= a.maxx },
        combine: function(a) { a.minx < this.minx && (this.minx = a.minx);
            a.maxx > this.maxx && (this.maxx = a.maxx);
            a.miny < this.miny && (this.miny = a.miny);
            a.maxy > this.maxy && (this.maxy = a.maxy) },
        contains: function(a) { return a.minx >= this.minx && a.miny >= this.miny && a.maxx <= this.maxx && a.maxy <= this.maxy },
        setCombine: function(a, b) {
            this.minx = a.minx <
                b.minx ? a.minx : b.minx;
            this.miny = a.miny < b.miny ? a.miny : b.miny;
            this.maxx = a.maxx > b.maxx ? a.maxx : b.maxx;
            this.maxy = a.maxy > b.maxy ? a.maxy : b.maxy
        },
        setExpand: function(a, b) { this.minx = a.minx - b;
            this.miny = a.miny - b;
            this.maxx = a.maxx + b;
            this.maxy = a.maxy + b },
        toString: function() { return "{ x: " + this.minx + " y: " + this.miny + " w: " + (this.maxx - this.minx) + " h: " + (this.maxy - this.miny) + " }" },
        __class__: Wa
    };
    var Nh = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Vec2"] = Nh;
    Nh.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Vec2"];
    Nh.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == yc.zpp_pool ? b = new yc : (b = yc.zpp_pool, yc.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) {
            var c;
            null == yc.zpp_pool ? c = new yc : (c = yc.zpp_pool, yc.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next =
                a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = yc.zpp_pool;
            yc.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head,
                this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = yc.zpp_pool;
            yc.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: Nh
    };
    var P = function() {};
    g["zpp_nape.geom.ZPP_Collide"] = P;
    P.__name__ = ["zpp_nape", "geom", "ZPP_Collide"];
    P.contactCollide = function(a,
        b, c, d) {
        if (b.type == h.id_ShapeType_POLYGON)
            if (a.type == h.id_ShapeType_POLYGON) {
                for (var e = !0, f = -1.0E100, j = -1, g = null, i = null, k = a.polygon.edges.head; null != k;) { for (var l = k.elt, m = 1.0E100, n = b.polygon.gverts.next; null != n;) { var o = n,
                            o = l.gnormx * o.x + l.gnormy * o.y;
                        o < m && (m = o); if (m - l.gprojection <= f) break;
                        n = n.next } m -= l.gprojection; if (0 <= m) { e = !1; break } m > f && (f = m, g = l, j = 1);
                    k = k.next }
                if (e) {
                    for (k = b.polygon.edges.head; null != k;) {
                        l = k.elt;
                        m = 1.0E100;
                        for (n = a.polygon.gverts.next; null != n;) {
                            o = n;
                            o = l.gnormx * o.x + l.gnormy * o.y;
                            o < m && (m = o);
                            if (m - l.gprojection <= f) break;
                            n = n.next
                        }
                        m -= l.gprojection;
                        if (0 <= m) { e = !1; break } m > f && (f = m, i = l, j = 2);
                        k = k.next
                    }
                    if (e) {
                        1 == j ? (a = b.polygon, b = g, i = 1) : (a = a.polygon, b = i, i = -1);
                        g = null;
                        e = 1.0E100;
                        for (f = a.edges.head; null != f;) k = f.elt, l = b.gnormx * k.gnormx + b.gnormy * k.gnormy, l < e && (e = l, g = k), f = f.next;
                        var f = e = 0,
                            e = g.gp0.x,
                            f = g.gp0.y,
                            l = k = 0,
                            k = g.gp1.x,
                            l = g.gp1.y,
                            n = m = 0,
                            m = k - e,
                            n = l - f,
                            r = b.gnormy * e - b.gnormx * f,
                            o = b.gnormy * k - b.gnormx * l,
                            s = 1 / (o - r),
                            r = (-b.tp1 - r) * s;
                        r > t.epsilon && (e += m * r, f += n * r);
                        o = (-b.tp0 - o) * s;
                        o < -t.epsilon && (k += m * o, l += n * o);
                        n = m = 0;
                        n =
                            i;
                        m = b.gnormx * n;
                        n *= b.gnormy;
                        c.lnormx = b.lnormx;
                        c.lnormy = b.lnormy;
                        c.lproj = b.lprojection;
                        c.radius = 0;
                        c.rev = d != (-1 == i);
                        c.ptype = c.rev ? 1 : 0;
                        o = e * b.gnormx + f * b.gnormy - b.gprojection;
                        i = k * b.gnormx + l * b.gnormy - b.gprojection;
                        if (0 < o && 0 < i) return !1;
                        d && (m = -m, n = -n);
                        d = c.injectContact(e - 0.5 * b.gnormx * o, f - 0.5 * b.gnormy * o, m, n, o, c.rev ? 1 : 0, 0 < o);
                        e -= 1 * a.body.posx;
                        f -= 1 * a.body.posy;
                        d.inner.lr1x = e * a.body.axisy + f * a.body.axisx;
                        d.inner.lr1y = f * a.body.axisy - e * a.body.axisx;
                        d = c.injectContact(k - 0.5 * b.gnormx * i, l - 0.5 * b.gnormy * i, m, n, i, c.rev ? 0 :
                            1, 0 < i);
                        k -= 1 * a.body.posx;
                        l -= 1 * a.body.posy;
                        d.inner.lr1x = k * a.body.axisy + l * a.body.axisx;
                        d.inner.lr1y = l * a.body.axisy - k * a.body.axisx;
                        1 == j ? (c.__ref_edge1 = b, c.__ref_edge2 = g) : (c.__ref_edge2 = b, c.__ref_edge1 = g);
                        return !0
                    }
                }
            } else {
                i = -1.0E100;
                g = !0;
                e = j = null;
                f = b.polygon.gverts.next;
                for (k = b.polygon.edges.head; null != k;) { l = k.elt;
                    m = l.gnormx * a.circle.worldCOMx + l.gnormy * a.circle.worldCOMy - l.gprojection - a.circle.radius; if (0 < m) { g = !1; break } m > i && (i = m, j = l, e = f);
                    f = f.next;
                    k = k.next }
                if (g) {
                    g = e;
                    e = null == e.next ? b.polygon.gverts.next :
                        e.next;
                    f = a.circle.worldCOMy * j.gnormx - a.circle.worldCOMx * j.gnormy;
                    if (f <= g.y * j.gnormx - g.x * j.gnormy) return i = a.circle.radius, f = e = 0, e = g.x - a.circle.worldCOMx, f = g.y - a.circle.worldCOMy, k = e * e + f * f, k > i * i ? i = null : k < t.epsilon * t.epsilon ? i = c.injectContact(a.circle.worldCOMx, a.circle.worldCOMy, 1, 0, -i, 0, null) : (k = 1 / Math.sqrt(k), l = k < t.epsilon ? 1.0E100 : 1 / k, m = 0.5 + (a.circle.radius - 0.5 * i) * k, i = d ? c.injectContact(a.circle.worldCOMx + e * m, a.circle.worldCOMy + f * m, -e * k, -f * k, l - i, 0, null) : c.injectContact(a.circle.worldCOMx + e * m, a.circle.worldCOMy +
                            f * m, e * k, f * k, l - i, 0, null)), null != i && (e = i.inner, c.ptype = 2, k = f = 0, f = g.x - b.polygon.body.posx, k = g.y - b.polygon.body.posy, c.__ref_edge1 = j, c.__ref_vertex = -1, d ? (e.lr1x = f * b.polygon.body.axisy + k * b.polygon.body.axisx, e.lr1y = k * b.polygon.body.axisy - f * b.polygon.body.axisx, e.lr2x = a.circle.localCOMx, e.lr2y = a.circle.localCOMy) : (e.lr2x = f * b.polygon.body.axisy + k * b.polygon.body.axisx, e.lr2y = k * b.polygon.body.axisy - f * b.polygon.body.axisx, e.lr1x = a.circle.localCOMx, e.lr1y = a.circle.localCOMy), c.radius = a.circle.radius), null !=
                        i;
                    if (f >= e.y * j.gnormx - e.x * j.gnormy) return g = a.circle.radius, f = i = 0, i = e.x - a.circle.worldCOMx, f = e.y - a.circle.worldCOMy, k = i * i + f * f, k > g * g ? g = null : k < t.epsilon * t.epsilon ? g = c.injectContact(a.circle.worldCOMx, a.circle.worldCOMy, 1, 0, -g, 0, null) : (k = 1 / Math.sqrt(k), l = k < t.epsilon ? 1.0E100 : 1 / k, m = 0.5 + (a.circle.radius - 0.5 * g) * k, g = d ? c.injectContact(a.circle.worldCOMx + i * m, a.circle.worldCOMy + f * m, -i * k, -f * k, l - g, 0, null) : c.injectContact(a.circle.worldCOMx + i * m, a.circle.worldCOMy + f * m, i * k, f * k, l - g, 0, null)), null != g && (i = g.inner, c.ptype =
                        2, k = f = 0, f = e.x - b.polygon.body.posx, k = e.y - b.polygon.body.posy, c.__ref_edge1 = j, c.__ref_vertex = 1, d ? (i.lr1x = f * b.polygon.body.axisy + k * b.polygon.body.axisx, i.lr1y = k * b.polygon.body.axisy - f * b.polygon.body.axisx, i.lr2x = a.circle.localCOMx, i.lr2y = a.circle.localCOMy) : (i.lr2x = f * b.polygon.body.axisy + k * b.polygon.body.axisx, i.lr2y = k * b.polygon.body.axisy - f * b.polygon.body.axisx, i.lr1x = a.circle.localCOMx, i.lr1y = a.circle.localCOMy), c.radius = a.circle.radius), null != g;
                    g = b = 0;
                    g = a.circle.radius + 0.5 * i;
                    b = j.gnormx * g;
                    g *= j.gnormy;
                    f = e = 0;
                    e = a.circle.worldCOMx - b;
                    f = a.circle.worldCOMy - g;
                    b = d ? c.injectContact(e, f, j.gnormx, j.gnormy, i, 0, null) : c.injectContact(e, f, -j.gnormx, -j.gnormy, i, 0, null);
                    c.ptype = d ? 0 : 1;
                    c.lnormx = j.lnormx;
                    c.lnormy = j.lnormy;
                    c.rev = !d;
                    c.lproj = j.lprojection;
                    c.radius = a.circle.radius;
                    b.inner.lr1x = a.circle.localCOMx;
                    b.inner.lr1y = a.circle.localCOMy;
                    c.__ref_edge1 = j;
                    c.__ref_vertex = 0;
                    return !0
                }
            }
        else if (j = a.circle.radius + b.circle.radius, i = g = 0, g = b.circle.worldCOMx - a.circle.worldCOMx, i = b.circle.worldCOMy - a.circle.worldCOMy, e = g * g +
            i * i, e > j * j ? j = null : e < t.epsilon * t.epsilon ? j = c.injectContact(a.circle.worldCOMx, a.circle.worldCOMy, 1, 0, -j, 0, null) : (e = 1 / Math.sqrt(e), f = e < t.epsilon ? 1.0E100 : 1 / e, k = 0.5 + (a.circle.radius - 0.5 * j) * e, j = d ? c.injectContact(a.circle.worldCOMx + g * k, a.circle.worldCOMy + i * k, -g * e, -i * e, f - j, 0, null) : c.injectContact(a.circle.worldCOMx + g * k, a.circle.worldCOMy + i * k, g * e, i * e, f - j, 0, null)), null != j) return j = j.inner, d ? (j.lr1x = b.circle.localCOMx, j.lr1y = b.circle.localCOMy, j.lr2x = a.circle.localCOMx, j.lr2y = a.circle.localCOMy) : (j.lr1x = a.circle.localCOMx,
            j.lr1y = a.circle.localCOMy, j.lr2x = b.circle.localCOMx, j.lr2y = b.circle.localCOMy), c.radius = a.circle.radius + b.circle.radius, c.ptype = 2, !0;
        return !1
    };
    P.testCollide_safe = function(a, b) { if (b.type == h.id_ShapeType_CIRCLE) var c = a,
            a = b,
            b = c; return P.testCollide(a, b) };
    P.testCollide = function(a, b) {
        if (b.type == h.id_ShapeType_POLYGON) {
            if (a.type == h.id_ShapeType_POLYGON) {
                for (var c = !0, d = a.polygon.edges.head; null != d;) {
                    for (var e = d.elt, f = 1.0E100, j = b.polygon.gverts.next; null != j;) {
                        var g = j,
                            g = e.gnormx * g.x + e.gnormy * g.y;
                        g < f && (f = g);
                        j = j.next
                    }
                    f -= e.gprojection;
                    if (0 < f) { c = !1; break } d = d.next
                }
                if (c) { for (d = b.polygon.edges.head; null != d;) { e = d.elt;
                        f = 1.0E100; for (j = a.polygon.gverts.next; null != j;) g = j, g = e.gnormx * g.x + e.gnormy * g.y, g < f && (f = g), j = j.next;
                        f -= e.gprojection; if (0 < f) { c = !1; break } d = d.next } return c }
            } else {
                d = c = null;
                e = !0;
                f = -1.0E100;
                j = b.polygon.gverts.next;
                for (g = b.polygon.edges.head; null != g;) { var i = g.elt,
                        k = i.gnormx * a.circle.worldCOMx + i.gnormy * a.circle.worldCOMy - i.gprojection - a.circle.radius; if (0 < k) { e = !1; break } k > f && (f = k, c = i, d = j);
                    j = j.next;
                    g = g.next }
                if (e) {
                    e =
                        d;
                    d = null == d.next ? b.polygon.gverts.next : d.next;
                    f = a.circle.worldCOMy * c.gnormx - a.circle.worldCOMx * c.gnormy;
                    if (f <= e.y * c.gnormx - e.x * c.gnormy) return c = a.circle.radius, f = d = 0, d = e.x - a.circle.worldCOMx, f = e.y - a.circle.worldCOMy, d * d + f * f <= c * c;
                    return f >= d.y * c.gnormx - d.x * c.gnormy ? (c = a.circle.radius, f = e = 0, e = d.x - a.circle.worldCOMx, f = d.y - a.circle.worldCOMy, e * e + f * f <= c * c) : !0
                }
            }
            return !1
        }
        c = a.circle.radius + b.circle.radius;
        e = d = 0;
        d = b.circle.worldCOMx - a.circle.worldCOMx;
        e = b.circle.worldCOMy - a.circle.worldCOMy;
        return d * d + e *
            e <= c * c
    };
    P.flowCollide = function(a, b, c) {
        if (b.type == h.id_ShapeType_POLYGON) {
            if (a.type == h.id_ShapeType_POLYGON) {
                for (var d = [], e = [], f = !0, j = !0, g = a.polygon.edges.head; null != g;) { for (var i = g.elt, k = 1.0E100, l = 0, m = b.polygon.gverts.next; null != m;) { var n = m,
                            o = i.gnormx * n.x + i.gnormy * n.y;
                        o < k && (k = o);
                        o >= i.gprojection + t.epsilon && (e[l] = !0, j = !1);
                        l++;
                        m = m.next } k -= i.gprojection; if (0 < k) { f = !1; break } g = g.next }
                if (j) return b.polygon.validate_worldCOM(), c.overlap = b.polygon.area, c.centroidx = b.polygon.worldCOMx, c.centroidy = b.polygon.worldCOMy,
                    null, !0;
                if (f) {
                    for (var j = !0, r = b.polygon.edges.head; null != r;) { for (var s = r.elt, v = 1.0E100, u = 0, x = a.polygon.gverts.next; null != x;) { var w = x,
                                y = s.gnormx * w.x + s.gnormy * w.y;
                            y < v && (v = y);
                            y >= s.gprojection + t.epsilon && (d[u] = !0, j = !1);
                            u++;
                            x = x.next } v -= s.gprojection; if (0 < v) { f = !1; break } r = r.next }
                    if (j) return a.polygon.validate_worldCOM(), c.overlap = a.polygon.area, c.centroidx = a.polygon.worldCOMx, c.centroidy = a.polygon.worldCOMy, null, !0;
                    if (f) {
                        for (; null != P.flowpoly.head;) {
                            var A = P.flowpoly.pop_unsafe();
                            if (!A._inuse) {
                                var z = A;
                                null !=
                                    z.outer && (z.outer.zpp_inner = null, z.outer = null);
                                z._isimmutable = null;
                                z._validate = null;
                                z._invalidate = null;
                                z.next = xa.zpp_pool;
                                xa.zpp_pool = z
                            }
                        }
                        for (var q = null, D = !1, E = a.polygon.gverts.next, F = 0, G = b.polygon.gverts.next, C = 0, M = 0, K = b.polygon.edgeCnt; M < K;) { var J = M++; if (e[J]) G = G.next;
                            else { C = J; break } }
                        if (null == G) { for (var G = b.polygon.gverts.next, D = !0, O = 0, N = a.polygon.edgeCnt; O < N;) { var Q = O++; if (d[Q]) E = E.next;
                                else { F = Q; break } } null == E ? E = a.polygon.gverts.next : (P.flowpoly.add(E), q = P.flowpoly.head.elt) } else P.flowpoly.add(G),
                            q = P.flowpoly.head.elt;
                        var L = 1;
                        if (null == P.flowpoly.head) {
                            for (var W = !0, R = a.polygon.gverts.next, H = R, U = R.next; null != U;) {
                                for (var I = U, S = 2, X = b.polygon.gverts.next, Y = X, ba = X.next; null != ba;) { var ca = ba,
                                        Z = 0;
                                    (function() { var a = 0,
                                            b = 0,
                                            a = H.x - Y.x,
                                            b = H.y - Y.y,
                                            c = 0,
                                            d = 0,
                                            c = I.x - H.x,
                                            d = I.y - H.y,
                                            e = 0,
                                            f = 0,
                                            e = ca.x - Y.x,
                                            f = ca.y - Y.y,
                                            j = d * e - c * f;
                                        j * j > t.epsilon * t.epsilon ? (j = 1 / j, e = (f * a - e * b) * j, e > t.epsilon && e < 1 - t.epsilon ? (a = (d * a - c * b) * j, a > t.epsilon && a < 1 - t.epsilon ? (Z = e, a = !0) : a = !1) : a = !1) : a = !1; return a })(this) && Z < S && (S = Z, G = X);
                                    X = ba;
                                    Y = ca;
                                    ba = ba.next }
                                var ha =
                                    ba = b.polygon.gverts.next,
                                    $ = 0;
                                (function() { var a = 0,
                                        b = 0,
                                        a = H.x - Y.x,
                                        b = H.y - Y.y,
                                        c = 0,
                                        d = 0,
                                        c = I.x - H.x,
                                        d = I.y - H.y,
                                        e = 0,
                                        f = 0,
                                        e = ha.x - Y.x,
                                        f = ha.y - Y.y,
                                        j = d * e - c * f;
                                    j * j > t.epsilon * t.epsilon ? (j = 1 / j, e = (f * a - e * b) * j, e > t.epsilon && e < 1 - t.epsilon ? (a = (d * a - c * b) * j, a > t.epsilon && a < 1 - t.epsilon ? ($ = e, a = !0) : a = !1) : a = !1) : a = !1; return a })(this) && $ < S && (S = $, G = X);
                                if (2 != S) { var ia = 0,
                                        na = 0,
                                        ja = S,
                                        ia = H.x + (I.x - H.x) * ja,
                                        na = H.y + (I.y - H.y) * ja,
                                        q = xa.get(ia, na, null);
                                    P.flowpoly.add(q);
                                    D = !0;
                                    E = R;
                                    W = !1; break } R = U;
                                H = I;
                                U = U.next
                            }
                            if (W) {
                                for (var ea = U = a.polygon.gverts.next,
                                        B = 2, ka = b.polygon.gverts.next, da = ka, ma = ka.next; null != ma;) { var la = ma,
                                        ta = 0;
                                    (function() { var a = 0,
                                            b = 0,
                                            a = H.x - da.x,
                                            b = H.y - da.y,
                                            c = 0,
                                            d = 0,
                                            c = ea.x - H.x,
                                            d = ea.y - H.y,
                                            e = 0,
                                            f = 0,
                                            e = la.x - da.x,
                                            f = la.y - da.y,
                                            j = d * e - c * f;
                                        j * j > t.epsilon * t.epsilon ? (j = 1 / j, e = (f * a - e * b) * j, e > t.epsilon && e < 1 - t.epsilon ? (a = (d * a - c * b) * j, a > t.epsilon && a < 1 - t.epsilon ? (ta = e, a = !0) : a = !1) : a = !1) : a = !1; return a })(this) && ta < B && (B = ta, G = ka);
                                    ka = ma;
                                    da = la;
                                    ma = ma.next }
                                var fa = ma = b.polygon.gverts.next,
                                    Aa = 0;
                                (function() {
                                    var a = 0,
                                        b = 0,
                                        a = H.x - da.x,
                                        b = H.y - da.y,
                                        c = 0,
                                        d = 0,
                                        c = ea.x - H.x,
                                        d = ea.y -
                                        H.y,
                                        e = 0,
                                        f = 0,
                                        e = fa.x - da.x,
                                        f = fa.y - da.y,
                                        j = d * e - c * f;
                                    j * j > t.epsilon * t.epsilon ? (j = 1 / j, e = (f * a - e * b) * j, e > t.epsilon && e < 1 - t.epsilon ? (a = (d * a - c * b) * j, a > t.epsilon && a < 1 - t.epsilon ? (Aa = e, a = !0) : a = !1) : a = !1) : a = !1;
                                    return a
                                })(this) && Aa < B && (B = Aa, G = ka);
                                if (2 != B) { var aa = 0,
                                        ya = 0,
                                        sa = B,
                                        aa = H.x + (ea.x - H.x) * sa,
                                        ya = H.y + (ea.y - H.y) * sa,
                                        q = xa.get(aa, ya, null);
                                    P.flowpoly.add(q);
                                    D = !0;
                                    E = R }
                            }
                            L = 2
                        }
                        for (;;)
                            if (D)
                                if (E = E.next, F++, null == E && (E = a.polygon.gverts.next, F = 0), d[F]) {
                                    var wa = P.flowpoly.head.elt,
                                        qa = E,
                                        za = G,
                                        Ca = G.next;
                                    null == Ca && (Ca = b.polygon.gverts.next);
                                    var ga = -1,
                                        ra = null,
                                        Da = 0,
                                        Fa = 0,
                                        Ja = Ca,
                                        V = Ca;
                                    do { var Ea = V,
                                            Ka = 0; if (function() { var a = 0,
                                                    b = 0,
                                                    a = za.x - wa.x,
                                                    b = za.y - wa.y,
                                                    c = 0,
                                                    d = 0,
                                                    c = Ea.x - za.x,
                                                    d = Ea.y - za.y,
                                                    e = 0,
                                                    f = 0,
                                                    e = qa.x - wa.x,
                                                    f = qa.y - wa.y,
                                                    j = d * e - c * f;
                                                j * j > t.epsilon * t.epsilon ? (j = 1 / j, e = (f * a - e * b) * j, e > t.epsilon && e < 1 - t.epsilon ? (a = (d * a - c * b) * j, a > t.epsilon && a < 1 - t.epsilon ? (Ka = e, a = !0) : a = !1) : a = !1) : a = !1; return a }(this) && Ka >= ga)
                                            if (ra = G, Da = C, ++Fa == L) { ga = Ka;
                                                V = Ja; break } else ga = Ka;
                                        za = Ea;
                                        G = V;
                                        C++;
                                        C >= b.polygon.edgeCnt && (C = 0);
                                        V = V.next;
                                        null == V && (V = b.polygon.gverts.next) } while (0);
                                    for (; V != Ja;) {
                                        var Va =
                                            V,
                                            cb = 0;
                                        if (function() { var a = 0,
                                                    b = 0,
                                                    a = za.x - wa.x,
                                                    b = za.y - wa.y,
                                                    c = 0,
                                                    d = 0,
                                                    c = Va.x - za.x,
                                                    d = Va.y - za.y,
                                                    e = 0,
                                                    f = 0,
                                                    e = qa.x - wa.x,
                                                    f = qa.y - wa.y,
                                                    j = d * e - c * f;
                                                j * j > t.epsilon * t.epsilon ? (j = 1 / j, e = (f * a - e * b) * j, e > t.epsilon && e < 1 - t.epsilon ? (a = (d * a - c * b) * j, a > t.epsilon && a < 1 - t.epsilon ? (cb = e, a = !0) : a = !1) : a = !1) : a = !1; return a }(this) && cb >= ga)
                                            if (ra = G, Da = C, ++Fa == L) { ga = cb;
                                                V = Ja; break } else ga = cb;
                                        za = Va;
                                        G = V;
                                        C++;
                                        C >= b.polygon.edgeCnt && (C = 0);
                                        V = V.next;
                                        null == V && (V = b.polygon.gverts.next)
                                    }
                                    if (null == ra) break;
                                    var Ta = ra,
                                        Ua = ra.next;
                                    null == Ua && (Ua = b.polygon.gverts.next);
                                    var ab = Ua,
                                        La = 0,
                                        Wa = 0,
                                        Xa = ga,
                                        La = Ta.x + (ab.x - Ta.x) * Xa,
                                        Wa = Ta.y + (ab.y - Ta.y) * Xa;
                                    if (null != q && qb.vec_dsq(La, Wa, q.x, q.y) < t.epsilon) break;
                                    P.flowpoly.add(xa.get(La, Wa, null));
                                    null == q && (q = P.flowpoly.head.elt);
                                    G = ra;
                                    C = Da;
                                    D = !D;
                                    L = 2
                                } else { var fb = E; if (null != q && qb.vec_dsq(fb.x, fb.y, q.x, q.y) < t.epsilon) break;
                                    P.flowpoly.add(fb);
                                    null == q && (q = P.flowpoly.head.elt);
                                    L = 1 }
                        else if (G = G.next, C++, null == G && (G = b.polygon.gverts.next, C = 0), e[C]) {
                            var Na = P.flowpoly.head.elt,
                                $a = G,
                                T = E,
                                Ya = E.next;
                            null == Ya && (Ya = a.polygon.gverts.next);
                            var Ia = -1,
                                Qa =
                                null,
                                oa = 0,
                                Pa = 0,
                                eb = Ya,
                                pa = Ya;
                            do { var Ma = pa,
                                    Za = 0; if (function() { var a = 0,
                                            b = 0,
                                            a = T.x - Na.x,
                                            b = T.y - Na.y,
                                            c = 0,
                                            d = 0,
                                            c = Ma.x - T.x,
                                            d = Ma.y - T.y,
                                            e = 0,
                                            f = 0,
                                            e = $a.x - Na.x,
                                            f = $a.y - Na.y,
                                            j = d * e - c * f;
                                        j * j > t.epsilon * t.epsilon ? (j = 1 / j, e = (f * a - e * b) * j, e > t.epsilon && e < 1 - t.epsilon ? (a = (d * a - c * b) * j, a > t.epsilon && a < 1 - t.epsilon ? (Za = e, a = !0) : a = !1) : a = !1) : a = !1; return a }(this) && Za >= Ia)
                                    if (Qa = E, oa = F, ++Pa == L) { Ia = Za;
                                        pa = eb; break } else Ia = Za;
                                T = Ma;
                                E = pa;
                                F++;
                                F >= a.polygon.edgeCnt && (F = 0);
                                pa = pa.next;
                                null == pa && (pa = a.polygon.gverts.next) } while (0);
                            for (; pa != eb;) {
                                var zm =
                                    pa,
                                    Ba = 0;
                                if (function() { var a = 0,
                                            b = 0,
                                            a = T.x - Na.x,
                                            b = T.y - Na.y,
                                            c = 0,
                                            d = 0,
                                            c = zm.x - T.x,
                                            d = zm.y - T.y,
                                            e = 0,
                                            f = 0,
                                            e = $a.x - Na.x,
                                            f = $a.y - Na.y,
                                            j = d * e - c * f;
                                        j * j > t.epsilon * t.epsilon ? (j = 1 / j, e = (f * a - e * b) * j, e > t.epsilon && e < 1 - t.epsilon ? (a = (d * a - c * b) * j, a > t.epsilon && a < 1 - t.epsilon ? (Ba = e, a = !0) : a = !1) : a = !1) : a = !1; return a }(this) && Ba >= Ia)
                                    if (Qa = E, oa = F, ++Pa == L) { Ia = Ba;
                                        pa = eb; break } else Ia = Ba;
                                T = zm;
                                E = pa;
                                F++;
                                F >= a.polygon.edgeCnt && (F = 0);
                                pa = pa.next;
                                null == pa && (pa = a.polygon.gverts.next)
                            }
                            if (null == Qa) break;
                            var ua = Qa,
                                db = Qa.next;
                            null == db && (db = a.polygon.gverts.next);
                            var kb = db,
                                ib = 0,
                                jb = 0,
                                hb = Ia,
                                ib = ua.x + (kb.x - ua.x) * hb,
                                jb = ua.y + (kb.y - ua.y) * hb;
                            if (null != q && qb.vec_dsq(ib, jb, q.x, q.y) < t.epsilon) break;
                            P.flowpoly.add(xa.get(ib, jb, null));
                            null == q && (q = P.flowpoly.head.elt);
                            E = Qa;
                            F = oa;
                            D = !D;
                            L = 2
                        } else { var nb = G; if (null != q && qb.vec_dsq(nb.x, nb.y, q.x, q.y) < t.epsilon) break;
                            P.flowpoly.add(nb);
                            null == q && (q = P.flowpoly.head.elt);
                            L = 1 }
                        if (null != P.flowpoly.head && null != P.flowpoly.head.next && null != P.flowpoly.head.next.next) {
                            for (var Ha = 0, Sa = 0, Oa = 0, Ha = Oa = Sa = 0, Ga = P.flowpoly.head, mb = Ga.elt, Ga = Ga.next,
                                    Bb = Ga.elt, Ga = Ga.next; null != Ga;) var lb = Ga.elt,
                                Ha = Ha + Bb.x * (lb.y - mb.y),
                                sb = lb.y * Bb.x - lb.x * Bb.y,
                                Sa = Sa + (Bb.x + lb.x) * sb,
                                Oa = Oa + (Bb.y + lb.y) * sb,
                                mb = Bb,
                                Bb = lb,
                                Ga = Ga.next;
                            var Ga = P.flowpoly.head,
                                ob = Ga.elt,
                                Ha = Ha + Bb.x * (ob.y - mb.y),
                                Kb = ob.y * Bb.x - ob.x * Bb.y,
                                Sa = Sa + (Bb.x + ob.x) * Kb,
                                Oa = Oa + (Bb.y + ob.y) * Kb,
                                mb = Bb,
                                Bb = ob,
                                Ga = Ga.next,
                                wb = Ga.elt,
                                Ha = Ha + Bb.x * (wb.y - mb.y),
                                Mb = wb.y * Bb.x - wb.x * Bb.y,
                                Sa = Sa + (Bb.x + wb.x) * Mb,
                                Oa = Oa + (Bb.y + wb.y) * Mb,
                                Ha = 0.5 * Ha,
                                Sb = 1 / (6 * Ha),
                                Sa = Sa * Sb,
                                Oa = Oa * Sb;
                            c.overlap = -Ha;
                            c.centroidx = Sa;
                            c.centroidy = Oa;
                            null;
                            return !0
                        }
                    }
                }
                return !1
            }
            for (var Jb = [], Ub = !0, tb = null, Cb = null, Vb = -1.0E100, Xb = !0, Pb = b.polygon.gverts.next, $b = 0, Fb = b.polygon.edges.head; null != Fb;) { var zb = Fb.elt,
                    Ab = zb.gnormx * a.circle.worldCOMx + zb.gnormy * a.circle.worldCOMy; if (Ab > zb.gprojection + a.circle.radius) { Xb = !1; break } else Ab + a.circle.radius > zb.gprojection + t.epsilon && (Ub = !1, Jb[$b] = !0);
                Ab -= zb.gprojection + a.circle.radius;
                Ab > Vb && (Vb = Ab, tb = zb, Cb = Pb);
                Pb = Pb.next;
                $b++;
                Fb = Fb.next }
            if (Xb) {
                if (Ub) return c.overlap = a.circle.area, c.centroidx = a.circle.worldCOMx, c.centroidy = a.circle.worldCOMy, null,
                    !0;
                var Lb = Cb,
                    Db;
                Db = null == Cb.next ? b.polygon.gverts.next : Cb.next;
                var kc = a.circle.worldCOMy * tb.gnormx - a.circle.worldCOMx * tb.gnormy;
                if (kc <= Lb.y * tb.gnormx - Lb.x * tb.gnormy ? function() { var b = a.circle.radius,
                            c = 0,
                            d = 0,
                            c = Lb.x - a.circle.worldCOMx,
                            d = Lb.y - a.circle.worldCOMy; return c * c + d * d <= b * b }(this) : kc >= Db.y * tb.gnormx - Db.x * tb.gnormy ? function() { var b = a.circle.radius,
                            c = 0,
                            d = 0,
                            c = Db.x - a.circle.worldCOMx,
                            d = Db.y - a.circle.worldCOMy; return c * c + d * d <= b * b }(this) : 1) {
                    for (var Nb = [], Zb = 0, sc = !0, Ra = null, pb = 0, Gb = b.polygon.gverts.next; null !=
                        Gb;) { var vc = Gb,
                            Lc = qb.vec_dsq(vc.x, vc.y, a.circle.worldCOMx, a.circle.worldCOMy);
                        (Nb[Zb] = Lc <= a.circle.radius * a.circle.radius) ? (pb = Zb, Ra = Gb) : sc = !1;
                        Zb++;
                        Gb = Gb.next }
                    if (sc) return b.polygon.validate_worldCOM(), c.overlap = b.polygon.area, c.centroidx = b.polygon.worldCOMx, c.centroidy = b.polygon.worldCOMy, null, !0;
                    for (; null != P.flowpoly.head;) {
                        var xc = P.flowpoly.pop_unsafe();
                        if (!xc._inuse) {
                            var vb = xc;
                            null != vb.outer && (vb.outer.zpp_inner = null, vb.outer = null);
                            vb._isimmutable = null;
                            vb._validate = null;
                            vb._invalidate = null;
                            vb.next =
                                xa.zpp_pool;
                            xa.zpp_pool = vb
                        }
                    }
                    P.flowsegs.clear();
                    var id = null,
                        gb = 1;
                    null == Ra ? (Ra = b.polygon.gverts.next, gb = 2) : P.flowpoly.add(id = Ra);
                    for (; 0 != gb;)
                        if (1 == gb)
                            if (Ra = Ra.next, null == Ra && (Ra = b.polygon.gverts.next), pb++, pb >= b.polygon.edgeCnt && (pb = 0), Nb[pb]) { if (qb.vec_dsq(id.x, id.y, Ra.x, Ra.y) < t.epsilon) break;
                                P.flowpoly.add(Ra) } else {
                                var xb = P.flowpoly.head.elt,
                                    Yb = Ra,
                                    dc = 0,
                                    ec = 0,
                                    dc = Yb.x - xb.x,
                                    ec = Yb.y - xb.y,
                                    fc = 0,
                                    gc = 0,
                                    fc = xb.x - a.circle.worldCOMx,
                                    gc = xb.y - a.circle.worldCOMy,
                                    Tb = dc * dc + ec * ec,
                                    hc = 2 * (fc * dc + gc * ec),
                                    Nc = Math.sqrt(hc * hc -
                                        4 * Tb * (fc * fc + gc * gc - a.circle.radius * a.circle.radius)),
                                    Tb = 1 / (2 * Tb),
                                    Tc = (-hc - Nc) * Tb,
                                    Ec = 0,
                                    Fc = 0,
                                    Wc = Tc < t.epsilon ? (-hc + Nc) * Tb : Tc,
                                    Ec = xb.x + (Yb.x - xb.x) * Wc,
                                    Fc = xb.y + (Yb.y - xb.y) * Wc;
                                if (qb.vec_dsq(id.x, id.y, Ec, Fc) < t.epsilon) break;
                                P.flowpoly.add(xa.get(Ec, Fc, null));
                                gb = 2
                            }
                    else if (2 == gb) {
                        var jc = Ra.next;
                        null == jc && (jc = b.polygon.gverts.next);
                        var bb = Ra,
                            gb = 0,
                            Eb = jc,
                            jd = jc;
                        do {
                            var rb = jd,
                                mc = pb + 1;
                            mc == b.polygon.edgeCnt && (mc = 0);
                            if (Jb[pb])
                                if (Nb[mc]) {
                                    var nc = 0,
                                        oc = 0,
                                        nc = rb.x - bb.x,
                                        oc = rb.y - bb.y,
                                        pc = 0,
                                        qc = 0,
                                        pc = bb.x - a.circle.worldCOMx,
                                        qc = bb.y -
                                        a.circle.worldCOMy,
                                        ac = nc * nc + oc * oc,
                                        uc = 2 * (pc * nc + qc * oc),
                                        ad = Math.sqrt(uc * uc - 4 * ac * (pc * pc + qc * qc - a.circle.radius * a.circle.radius)),
                                        ac = 1 / (2 * ac),
                                        bd = (-uc - ad) * ac,
                                        Ic = 0,
                                        Kc = 0,
                                        gd = bd < t.epsilon ? (-uc + ad) * ac : bd,
                                        Ic = bb.x + (rb.x - bb.x) * gd,
                                        Kc = bb.y + (rb.y - bb.y) * gd;
                                    if (qb.vec_dsq(id.x, id.y, Ic, Kc) < t.epsilon) { gb = 0;
                                        jd = Eb; break }
                                    var hd = xa.get(Ic, Kc, null);
                                    P.flowsegs.add(P.flowpoly.head.elt);
                                    P.flowsegs.add(hd);
                                    P.flowpoly.add(hd);
                                    gb = 1;
                                    jd = Eb;
                                    break
                                } else {
                                    var wc = 0,
                                        yc = 0,
                                        Pc, Ac = 0,
                                        Bc = 0,
                                        Ac = rb.x - bb.x,
                                        Bc = rb.y - bb.y,
                                        Cc = 0,
                                        Dc = 0,
                                        Cc = bb.x - a.circle.worldCOMx,
                                        Dc = bb.y - a.circle.worldCOMy,
                                        Wb = Ac * Ac + Bc * Bc,
                                        lc = 2 * (Cc * Ac + Dc * Bc),
                                        Ob = lc * lc - 4 * Wb * (Cc * Cc + Dc * Dc - a.circle.radius * a.circle.radius);
                                    Ob * Ob < t.epsilon ? (wc = 0 > Ob ? 10 : yc = -lc / (2 * Wb), Pc = !1) : (Ob = Math.sqrt(Ob), Wb = 1 / (2 * Wb), wc = (-lc - Ob) * Wb, yc = (-lc + Ob) * Wb, Pc = !0);
                                    if (wc < 1 - t.epsilon && yc > t.epsilon) {
                                        var Yc = 0,
                                            Zc = 0,
                                            sd = wc,
                                            Yc = bb.x + (rb.x - bb.x) * sd,
                                            Zc = bb.y + (rb.y - bb.y) * sd;
                                        if (null != id && qb.vec_dsq(id.x, id.y, Yc, Zc) < t.epsilon) { gb = 0;
                                            jd = Eb; break }
                                        var td = xa.get(Yc, Zc, null);
                                        null != P.flowpoly.head && (P.flowsegs.add(P.flowpoly.head.elt), P.flowsegs.add(td));
                                        P.flowpoly.add(td);
                                        null == id && (id = P.flowpoly.head.elt);
                                        if (Pc) { var ud = 0,
                                                vd = 0,
                                                xd = yc,
                                                ud = bb.x + (rb.x - bb.x) * xd,
                                                vd = bb.y + (rb.y - bb.y) * xd;
                                            P.flowpoly.add(xa.get(ud, vd, null)) }
                                    }
                                } bb = rb;
                            Ra = jd;
                            pb = mc;
                            jd = jd.next;
                            null == jd && (jd = b.polygon.gverts.next)
                        } while (0);
                        for (; jd != Eb;) {
                            var ub = jd,
                                Mc = pb + 1;
                            Mc == b.polygon.edgeCnt && (Mc = 0);
                            if (Jb[pb])
                                if (Nb[Mc]) {
                                    var Oc = 0,
                                        Qc = 0,
                                        Oc = ub.x - bb.x,
                                        Qc = ub.y - bb.y,
                                        Uc = 0,
                                        Vc = 0,
                                        Uc = bb.x - a.circle.worldCOMx,
                                        Vc = bb.y - a.circle.worldCOMy,
                                        Gc = Oc * Oc + Qc * Qc,
                                        Xc = 2 * (Uc * Oc + Vc * Qc),
                                        Cd = Math.sqrt(Xc * Xc - 4 * Gc * (Uc * Uc + Vc * Vc - a.circle.radius *
                                            a.circle.radius)),
                                        Gc = 1 / (2 * Gc),
                                        Dd = (-Xc - Cd) * Gc,
                                        pd = 0,
                                        qd = 0,
                                        Fd = Dd < t.epsilon ? (-Xc + Cd) * Gc : Dd,
                                        pd = bb.x + (ub.x - bb.x) * Fd,
                                        qd = bb.y + (ub.y - bb.y) * Fd;
                                    if (qb.vec_dsq(id.x, id.y, pd, qd) < t.epsilon) { gb = 0;
                                        jd = Eb; break }
                                    var Jd = xa.get(pd, qd, null);
                                    P.flowsegs.add(P.flowpoly.head.elt);
                                    P.flowsegs.add(Jd);
                                    P.flowpoly.add(Jd);
                                    gb = 1;
                                    jd = Eb;
                                    break
                                } else {
                                    var $c = 0,
                                        cd = 0,
                                        yd, ed = 0,
                                        fd = 0,
                                        ed = ub.x - bb.x,
                                        fd = ub.y - bb.y,
                                        md = 0,
                                        nd = 0,
                                        md = bb.x - a.circle.worldCOMx,
                                        nd = bb.y - a.circle.worldCOMy,
                                        zc = ed * ed + fd * fd,
                                        Sc = 2 * (md * ed + nd * fd),
                                        ic = Sc * Sc - 4 * zc * (md * md + nd * nd - a.circle.radius *
                                            a.circle.radius);
                                    ic * ic < t.epsilon ? ($c = 0 > ic ? 10 : cd = -Sc / (2 * zc), yd = !1) : (ic = Math.sqrt(ic), zc = 1 / (2 * zc), $c = (-Sc - ic) * zc, cd = (-Sc + ic) * zc, yd = !0);
                                    if ($c < 1 - t.epsilon && cd > t.epsilon) {
                                        var Bd = 0,
                                            Ed = 0,
                                            Sd = $c,
                                            Bd = bb.x + (ub.x - bb.x) * Sd,
                                            Ed = bb.y + (ub.y - bb.y) * Sd;
                                        if (null != id && qb.vec_dsq(id.x, id.y, Bd, Ed) < t.epsilon) { gb = 0;
                                            jd = Eb; break }
                                        var Td = xa.get(Bd, Ed, null);
                                        null != P.flowpoly.head && (P.flowsegs.add(P.flowpoly.head.elt), P.flowsegs.add(Td));
                                        P.flowpoly.add(Td);
                                        null == id && (id = P.flowpoly.head.elt);
                                        if (yd) {
                                            var Ud = 0,
                                                Vd = 0,
                                                Wd = cd,
                                                Ud = bb.x + (ub.x -
                                                    bb.x) * Wd,
                                                Vd = bb.y + (ub.y - bb.y) * Wd;
                                            P.flowpoly.add(xa.get(Ud, Vd, null))
                                        }
                                    }
                                } bb = ub;
                            Ra = jd;
                            pb = Mc;
                            jd = jd.next;
                            null == jd && (jd = b.polygon.gverts.next)
                        }
                    }
                    if (null == P.flowpoly.head) return !1;
                    if (null == P.flowpoly.head.next) { for (var Xd = !0, rd = b.polygon.edges.head; null != rd;) { var Hd = rd.elt; if (Hd.gnormx * a.circle.worldCOMx + Hd.gnormy * a.circle.worldCOMy > Hd.gprojection) { Xd = !1; break } rd = rd.next } return Xd ? (c.overlap = a.circle.area, c.centroidx = a.circle.worldCOMx, c.centroidy = a.circle.worldCOMy, null, !0) : !1 }
                    var rc = 0,
                        tc = 0,
                        Hc = 0;
                    if (null !=
                        P.flowpoly.head.next.next) {
                        for (var yb = 0, Hb = 0, Ib = 0, yb = Ib = Hb = 0, te = P.flowpoly.head, dd = te.elt, te = te.next, kd = te.elt, te = te.next; null != te;) var Jc = te.elt,
                            yb = yb + kd.x * (Jc.y - dd.y),
                            ce = Jc.y * kd.x - Jc.x * kd.y,
                            Hb = Hb + (kd.x + Jc.x) * ce,
                            Ib = Ib + (kd.y + Jc.y) * ce,
                            dd = kd,
                            kd = Jc,
                            te = te.next;
                        var te = P.flowpoly.head,
                            Rc = te.elt,
                            yb = yb + kd.x * (Rc.y - dd.y),
                            de = Rc.y * kd.x - Rc.x * kd.y,
                            Hb = Hb + (kd.x + Rc.x) * de,
                            Ib = Ib + (kd.y + Rc.y) * de,
                            dd = kd,
                            kd = Rc,
                            te = te.next,
                            od = te.elt,
                            yb = yb + kd.x * (od.y - dd.y),
                            ee = od.y * kd.x - od.x * kd.y,
                            Hb = Hb + (kd.x + od.x) * ee,
                            Ib = Ib + (kd.y + od.y) * ee,
                            yb =
                            0.5 * yb,
                            fe = 1 / (6 * yb),
                            Hb = Hb * fe,
                            Ib = Ib * fe,
                            ge = -yb,
                            rc = rc + Hb * ge,
                            tc = tc + Ib * ge,
                            Hc = Hc - yb
                    } else P.flowsegs.add(P.flowpoly.head.elt), P.flowsegs.add(P.flowpoly.head.next.elt);
                    for (; null != P.flowsegs.head;) var Gd = P.flowsegs.pop_unsafe(),
                        Id = P.flowsegs.pop_unsafe(),
                        he = 0,
                        ie = 0,
                        he = Id.x - Gd.x,
                        ie = Id.y - Gd.y,
                        bc = 0,
                        cc = 0,
                        bc = he,
                        cc = ie,
                        je = 1 / Math.sqrt(bc * bc + cc * cc),
                        bc = bc * je,
                        cc = cc * je,
                        ze = bc,
                        bc = -cc,
                        cc = ze,
                        Qb = 0,
                        Rb = 0,
                        Qb = Gd.x + Id.x,
                        Rb = Gd.y + Id.y,
                        Qb = 0.5 * Qb,
                        Rb = 0.5 * Rb,
                        Qb = Qb - 1 * a.circle.worldCOMx,
                        Rb = Rb - 1 * a.circle.worldCOMy,
                        Yd = 0,
                        ke = 0,
                        le = bc * Qb + cc * Rb,
                        Kd = le / a.circle.radius,
                        wd = Math.sqrt(1 - Kd * Kd),
                        me = Math.acos(Kd),
                        Yd = a.circle.radius * (a.circle.radius * me - le * wd),
                        ke = 0.6666666666666666 * a.circle.radius * wd * wd * wd / (me - Kd * wd),
                        Qb = a.circle.worldCOMx,
                        Rb = a.circle.worldCOMy,
                        ne = ke,
                        Qb = Qb + bc * ne,
                        Rb = Rb + cc * ne,
                        oe = Yd,
                        rc = rc + Qb * oe,
                        tc = tc + Rb * oe,
                        Hc = Hc + Yd;
                    var pe = 1 / Hc,
                        rc = rc * pe,
                        tc = tc * pe;
                    c.overlap = Hc;
                    c.centroidx = rc;
                    c.centroidy = tc;
                    null;
                    return !0
                }
            }
            return !1
        }
        var ld = a.circle,
            Pd = b.circle,
            Ld = 0,
            Md = 0,
            Ld = Pd.worldCOMx - ld.worldCOMx,
            Md = Pd.worldCOMy - ld.worldCOMy,
            qe = ld.radius + Pd.radius,
            Zd = Ld * Ld +
            Md * Md;
        if (Zd > qe * qe) return !1;
        if (Zd < t.epsilon * t.epsilon) ld.radius < Pd.radius ? (c.overlap = ld.area, c.centroidx = ld.worldCOMx, c.centroidy = ld.worldCOMy) : (c.overlap = Pd.area, c.centroidx = Pd.worldCOMx, c.centroidy = Pd.worldCOMy);
        else {
            var Nd = Math.sqrt(Zd),
                re = 1 / Nd,
                Od = 0.5 * (Nd - (Pd.radius * Pd.radius - ld.radius * ld.radius) * re);
            if (Od <= -ld.radius) c.overlap = ld.area, c.centroidx = ld.worldCOMx, c.centroidy = ld.worldCOMy;
            else {
                var $d = Nd - Od;
                if ($d <= -Pd.radius) c.overlap = Pd.area, c.centroidx = Pd.worldCOMx, c.centroidy = Pd.worldCOMy;
                else {
                    var ae =
                        0,
                        se = 0,
                        be = 0,
                        ue = 0,
                        Qd = Od / ld.radius,
                        zd = Math.sqrt(1 - Qd * Qd),
                        ve = Math.acos(Qd),
                        ae = ld.radius * (ld.radius * ve - Od * zd),
                        se = 0.6666666666666666 * ld.radius * zd * zd * zd / (ve - Qd * zd),
                        Rd = $d / Pd.radius,
                        Ad = Math.sqrt(1 - Rd * Rd),
                        we = Math.acos(Rd),
                        be = Pd.radius * (Pd.radius * we - $d * Ad),
                        ue = 0.6666666666666666 * Pd.radius * Ad * Ad * Ad / (we - Rd * Ad),
                        xe = ae + be,
                        ye = (se * ae + (Nd - ue) * be) / xe * re;
                    c.overlap = xe;
                    c.centroidx = ld.worldCOMx + Ld * ye;
                    c.centroidy = ld.worldCOMy + Md * ye
                }
            }
        }
        null;
        return !0
    };
    var gh = function() {};
    g["zpp_nape.geom.ZPP_Convex"] = gh;
    gh.__name__ = ["zpp_nape",
        "geom", "ZPP_Convex"
    ];
    gh.isinner = function(a, b, c) { var d = 0,
            e = 0,
            d = a.x - b.x,
            e = a.y - b.y,
            f = a = 0,
            a = c.x - b.x,
            f = c.y - b.y; return 0 <= f * d - a * e };
    gh.optimise = function(a) {
        var b = a.vertices,
            c = a.vertices;
        if (null != b) { do b.sort(), b = b.next; while (b != c) } a = c = a.vertices;
        if (null != c) {
            do {
                for (var b = c, d = b.prev, e = null, f = b.diagonals.head; null != f;) {
                    var j = f.elt;
                    if (gh.isinner(null == f.next ? b.next : f.next.elt, b, d)) {
                        for (var h = !0, g = j, i = g.prev, k = null, l = g.diagonals.head; null != l;) {
                            var m = l.elt;
                            if (m == b) {
                                h = gh.isinner(null == l.next ? g.next : l.next.elt,
                                    g, i);
                                break
                            }
                            i = m;
                            k = l;
                            l = l.next
                        }
                        h ? (f = b.diagonals.erase(e), g.diagonals.erase(k)) : (d = j, e = f, f = f.next)
                    } else e = f, d = j, f = f.next
                }
                c = c.next
            } while (c != a)
        }
    };
    var vn = function() { this.toiDistance = 0;
        this.inner = !1;
        this.shape = null };
    g["zpp_nape.geom.ZPP_ConvexRayResult"] = vn;
    vn.__name__ = ["zpp_nape", "geom", "ZPP_ConvexRayResult"];
    vn.prototype = { __class__: vn };
    var uc = function() { this.forced = !1;
        this.prev = this.next = null;
        this.x = this.y = 0 };
    g["zpp_nape.geom.ZPP_GeomVert"] = uc;
    uc.__name__ = ["zpp_nape", "geom", "ZPP_GeomVert"];
    uc.get = function(a,
        b) { var c;
        null == uc.zpp_pool ? c = new uc : (c = uc.zpp_pool, uc.zpp_pool = c.next, c.next = null);
        c.forced = !1;
        c.x = a;
        c.y = b; return c };
    uc.prototype = { __class__: uc };
    var im = function(a) { this.outer = this.vertices = null;
        this.outer = a };
    g["zpp_nape.geom.ZPP_GeomPoly"] = im;
    im.__name__ = ["zpp_nape", "geom", "ZPP_GeomPoly"];
    im.prototype = { __class__: im };
    var wn = function() { this.a = this.b = this.c = this.d = this.tx = this.ty = 0 };
    g["zpp_nape.geom.ZPP_Mat23"] = wn;
    wn.__name__ = ["zpp_nape", "geom", "ZPP_Mat23"];
    wn.prototype = { __class__: wn };
    var xn = function() {
        this.x =
            null;
        this.m = this.n = 0
    };
    g["zpp_nape.geom.ZPP_MatMN"] = xn;
    xn.__name__ = ["zpp_nape", "geom", "ZPP_MatMN"];
    xn.prototype = { __class__: xn };
    var da = function() {};
    g["zpp_nape.geom.ZPP_Monotone"] = da;
    da.__name__ = ["zpp_nape", "geom", "ZPP_Monotone"];
    da.bisector = function(a) { var b = a.prev,
            c = a.next,
            d = 0,
            e = 0,
            d = a.x - b.x,
            e = a.y - b.y,
            f = b = 0,
            b = c.x - a.x,
            f = c.y - a.y,
            a = xa.get(-e - f, d + b, null),
            c = 1 / Math.sqrt(a.x * a.x + a.y * a.y);
        a.x *= c;
        a.y *= c;
        0 > f * d - b * e && (a.x = -a.x, a.y = -a.y); return a };
    da.below = function(a, b) {
        if (a.y < b.y) return !0;
        if (a.y > b.y) return !1;
        if (a.x < b.x) return !0;
        if (a.x > b.x) return !1;
        var c = da.bisector(a),
            d = da.bisector(b);
        c.x += 1 * a.x;
        c.y += 1 * a.y;
        d.x += 1 * b.x;
        d.y += 1 * b.y;
        var e = c.x < d.x || c.x == d.x && c.y < d.y;
        null != c.outer && (c.outer.zpp_inner = null, c.outer = null);
        c._isimmutable = null;
        c._validate = null;
        c._invalidate = null;
        c.next = xa.zpp_pool;
        xa.zpp_pool = c;
        null != d.outer && (d.outer.zpp_inner = null, d.outer = null);
        d._isimmutable = null;
        d._validate = null;
        d._invalidate = null;
        d.next = xa.zpp_pool;
        xa.zpp_pool = d;
        return e
    };
    da.above = function(a, b) { return da.below(b, a) };
    da.left_vertex =
        function(a) { var b = a.prev; return b.y > a.y || b.y == a.y && a.next.y < a.y };
    da.decompose = function(a, b) {
        null == b ? b = new pb(a) : b.init(a);
        if (null == b.vertices) return b;
        null == da.queue && (da.queue = new zg);
        var c = b.vertices,
            d = b.vertices;
        if (null != c) { do { var e = c;
                da.queue.add(e); var f = 0,
                    j = 0,
                    f = e.next.x - e.x,
                    j = e.next.y - e.y,
                    h = 0,
                    g = 0,
                    h = e.prev.x - e.x,
                    g = e.prev.y - e.y,
                    f = 0 < g * f - h * j;
                e.type = da.below(e.prev, e) ? da.below(e.next, e) ? f ? 0 : 3 : 4 : da.below(e, e.next) ? f ? 1 : 2 : 4;
                c = c.next } while (c != d) } d = da.queue;
        if (null != d.head && null != d.head.next) {
            var c = d.head,
                h = j = f = e = null,
                g = 1,
                i, k, l;
            do { i = 0;
                f = c; for (e = c = null; null != f;) { i++;
                    j = f;
                    k = 0; for (l = g; null != j && k < g;) k++, j = j.next; for (; 0 < k || 0 < l && null != j;) 0 == k ? (h = j, j = j.next, l--) : 0 == l || null == j ? (h = f, f = f.next, k--) : da.above(f.elt, j.elt) ? (h = f, f = f.next, k--) : (h = j, j = j.next, l--), null != e ? e.next = h : c = h, e = h;
                    f = j } e.next = null;
                g <<= 1 } while (1 < i);
            d.head = c;
            d.modified = !0;
            d.pushmod = !0
        }
        null == da.edges && (null == md.zpp_pool ? da.edges = new md : (da.edges = md.zpp_pool, md.zpp_pool = da.edges.next, da.edges.next = null), null, da.edges.lt = ha.edge_lt, da.edges.swapped =
            ha.edge_swap);
        for (; null != da.queue.head;) switch (d = da.queue.pop_unsafe(), d.type) {
            case 0:
                d.helper = d;
                d.node = da.edges.insert(d);
                break;
            case 1:
                c = d.prev;
                2 == c.helper.type && b.add_diagonal(d, c.helper);
                da.edges.remove_node(c.node);
                break;
            case 3:
                c = null;
                if (!da.edges.empty()) { for (e = da.edges.parent; null != e.prev;) e = e.prev; for (; null != e;) { f = e.data; if (!ha.vert_lt(f, d)) { c = f; break } if (null != e.next)
                            for (e = e.next; null != e.prev;) e = e.prev;
                        else { for (; null != e.parent && e == e.parent.next;) e = e.parent;
                            e = e.parent } } } null != c && (b.add_diagonal(d,
                    c.helper), c.helper = d);
                d.node = da.edges.insert(d);
                d.helper = d;
                break;
            case 2:
                c = d.prev;
                2 == c.helper.type && b.add_diagonal(d, c.helper);
                da.edges.remove_node(c.node);
                c = null;
                if (!da.edges.empty()) { for (e = da.edges.parent; null != e.prev;) e = e.prev; for (; null != e;) { f = e.data; if (!ha.vert_lt(f, d)) { c = f; break } if (null != e.next)
                            for (e = e.next; null != e.prev;) e = e.prev;
                        else { for (; null != e.parent && e == e.parent.next;) e = e.parent;
                            e = e.parent } } } null != c && (2 == c.helper.type && b.add_diagonal(d, c.helper), c.helper = d);
                break;
            case 4:
                if (c = d.prev, da.left_vertex(d)) 2 ==
                    c.helper.type && b.add_diagonal(d, c.helper), da.edges.remove_node(c.node), d.node = da.edges.insert(d), d.helper = d;
                else { c = null; if (!da.edges.empty()) { for (e = da.edges.parent; null != e.prev;) e = e.prev; for (; null != e;) { f = e.data; if (!ha.vert_lt(f, d)) { c = f; break } if (null != e.next)
                                for (e = e.next; null != e.prev;) e = e.prev;
                            else { for (; null != e.parent && e == e.parent.next;) e = e.parent;
                                e = e.parent } } } 2 == c.helper.type && b.add_diagonal(d, c.helper);
                    c.helper = d }
        }
        return b
    };
    var ha = function() {
        this.next = this.prev = this.node = null;
        this.rightchain = !1;
        this.helper = null;
        this.type = 0;
        this.diagonals = null;
        this.forced = !1;
        this.id = this.mag = this.x = this.y = 0;
        this.id = ha.nextId++;
        this.diagonals = new zg
    };
    g["zpp_nape.geom.ZPP_PartitionVertex"] = ha;
    ha.__name__ = ["zpp_nape", "geom", "ZPP_PartitionVertex"];
    ha.get = function(a) { var b;
        null == ha.zpp_pool ? b = new ha : (b = ha.zpp_pool, ha.zpp_pool = b.next, b.next = null);
        null;
        b.x = a.x;
        b.y = a.y; return b };
    ha.rightdistance = function(a, b) {
        var c = a.next.y > a.y,
            d = 0,
            e = 0,
            d = a.next.x - a.x,
            e = a.next.y - a.y,
            f = 0,
            j = 0,
            f = b.x - a.x,
            j = b.y - a.y;
        return (c ? -1 : 1) * (j * d -
            f * e)
    };
    ha.vert_lt = function(a, b) { var c; if (b == a || b == a.next) c = !0;
        else if (a.y == a.next.y) { c = a.x; var d = a.next.x;
            c = (c < d ? c : d) <= b.x } else c = 0 >= ha.rightdistance(a, b); return c };
    ha.edge_swap = function(a, b) { var c = a.node;
        a.node = b.node;
        b.node = c };
    ha.edge_lt = function(a, b) {
        if (a == b && a.next == b.next) return !1;
        if (a == b.next) return !ha.vert_lt(a, b);
        if (b == a.next) return ha.vert_lt(b, a);
        if (a.y == a.next.y) return b.y == b.next.y ? function() { var b = a.x,
                    c = a.next.x; return b > c ? b : c }(this) > function() { var a = b.x,
                    c = b.next.x; return a > c ? a : c }(this) :
            0 < ha.rightdistance(b, a) || 0 < ha.rightdistance(b, a.next);
        var c = ha.rightdistance(a, b),
            d = ha.rightdistance(a, b.next);
        if (0 == c && 0 == d) return function() { var b = a.x,
                c = a.next.x; return b > c ? b : c }(this) > function() { var a = b.x,
                c = b.next.x; return a > c ? a : c }(this);
        if (0 <= c * d) return 0 > c || 0 > d;
        c = ha.rightdistance(b, a);
        d = ha.rightdistance(b, a.next);
        return 0 <= c * d ? 0 < c || 0 < d : !1
    };
    ha.prototype = {
        copy: function() {
            var a;
            null == ha.zpp_pool ? a = new ha : (a = ha.zpp_pool, ha.zpp_pool = a.next, a.next = null);
            null;
            a.x = this.x;
            a.y = this.y;
            a.forced = this.forced;
            return a
        },
        sort: function() {
            var a = 0,
                b = 0,
                c = 0,
                d = 0,
                e, a = this.prev.x - this.x,
                b = this.prev.y - this.y,
                c = this.next.x - this.x,
                d = this.next.y - this.y;
            e = d * a - c * b;
            e = 0 < e ? -1 : 0 == e ? 0 : 1;
            var f = this.diagonals;
            if (null != f.head && null != f.head.next) {
                var j = f.head,
                    h = null,
                    g = null,
                    i = null,
                    k = null,
                    l = 1,
                    m, n, o;
                do {
                    m = 0;
                    g = j;
                    for (h = j = null; null != g;) {
                        m++;
                        i = g;
                        n = 0;
                        for (o = l; null != i && n < l;) n++, i = i.next;
                        for (; 0 < n || 0 < o && null != i;) 0 == n ? (k = i, i = i.next, o--) : 0 == o || null == i ? (k = g, g = g.next, n--) : (1 == e ? 1 == function(e) {
                            a = g.elt.x - e.x;
                            b = g.elt.y - e.y;
                            c = i.elt.x - e.x;
                            d = i.elt.y -
                                e.y;
                            e = d * a - c * b;
                            return 0 < e ? -1 : 0 == e ? 0 : 1
                        }(this) : function(e) {
                            var f;
                            a = e.prev.x - e.x;
                            b = e.prev.y - e.y;
                            c = g.elt.x - e.x;
                            d = g.elt.y - e.y;
                            f = d * a - c * b;
                            f = 0 < f ? -1 : 0 == f ? 0 : 1;
                            var j;
                            a = e.prev.x - e.x;
                            b = e.prev.y - e.y;
                            c = i.elt.x - e.x;
                            d = i.elt.y - e.y;
                            j = d * a - c * b;
                            j = 0 < j ? -1 : 0 == j ? 0 : 1;
                            return 1 == f * j || 0 == f * j && (1 == f || 1 == j) ? 1 == function(e) { a = g.elt.x - e.x;
                                b = g.elt.y - e.y;
                                c = i.elt.x - e.x;
                                d = i.elt.y - e.y;
                                e = d * a - c * b; return 0 < e ? -1 : 0 == e ? 0 : 1 }(e) : -1 == f || -1 == j ? -1 == j : 0 == f && 0 == j ? function(e) {
                                a = e.x - e.prev.x;
                                b = e.y - e.prev.y;
                                c = g.elt.x - e.x;
                                d = g.elt.y - e.y;
                                var f = a * c + b * d;
                                c = i.elt.x -
                                    e.x;
                                d = i.elt.y - e.y;
                                e = a * c + b * d;
                                return 0 > f && 0 < e ? !0 : 0 > e && 0 < f ? !1 : !0
                            }(e) : !0
                        }(this)) ? (k = g, g = g.next, n--) : (k = i, i = i.next, o--), null != h ? h.next = k : j = k, h = k;
                        g = i
                    }
                    h.next = null;
                    l <<= 1
                } while (1 < m);
                f.head = j;
                f.modified = !0;
                f.pushmod = !0
            }
        },
        __class__: ha
    };
    var pb = function(a) { this.vertices = this.next = null;
        this.init(a) };
    g["zpp_nape.geom.ZPP_PartitionedPoly"] = pb;
    pb.__name__ = ["zpp_nape", "geom", "ZPP_PartitionedPoly"];
    pb.prototype = {
        eq: function(a, b) { return qb.vec_dsq(a.x, a.y, b.x, b.y) < t.epsilon * t.epsilon },
        init: function(a) {
            if (null != a) {
                var b;
                b = 0;
                if (null != a) { var c = a;
                    do { var d = c;
                        b += d.x * (d.next.y - d.prev.y);
                        c = c.next } while (c != a) } b = 0 < 0.5 * b;
                c = a;
                do b ? (d = ha.get(c), null == this.vertices ? this.vertices = d.prev = d.next = d : (d.prev = this.vertices, d.next = this.vertices.next, this.vertices.next.prev = d, this.vertices.next = d)) : (d = ha.get(c), null == this.vertices ? this.vertices = d.prev = d.next = d : (d.next = this.vertices, d.prev = this.vertices.prev, this.vertices.prev.next = d, this.vertices.prev = d)), this.vertices = d, this.vertices.forced = c.forced, c = c.next; while (c != a);
                this.remove_collinear_vertices()
            }
        },
        remove_collinear_vertices: function() {
            for (var a = this.vertices, b = !0; b || a != this.vertices;)
                if (b = !1, this.eq(a, a.next)) { a == this.vertices && (this.vertices = a.next, b = !0);
                    a.forced && (a.next.forced = !0); if (null != a && a.prev == a) a.next = a.prev = null, a.helper = null, null, a.next = ha.zpp_pool, ha.zpp_pool = a, a = a = null;
                    else { var c = a.next;
                        a.prev.next = a.next;
                        a.next.prev = a.prev;
                        a.next = a.prev = null;
                        a.helper = null;
                        null;
                        a.next = ha.zpp_pool;
                        ha.zpp_pool = a;
                        a = c } if (null == a) { this.vertices = null; break } } else a = a.next;
            if (null == this.vertices) return !0;
            do {
                c = !1;
                a = this.vertices;
                for (b = !0; b || a != this.vertices;) {
                    var b = !1,
                        d = a.prev,
                        e = 0,
                        f = 0,
                        e = a.x - d.x,
                        f = a.y - d.y,
                        j = d = 0,
                        d = a.next.x - a.x,
                        j = a.next.y - a.y,
                        e = j * e - d * f;
                    if (e * e >= t.epsilon * t.epsilon) a = a.next;
                    else if (a == this.vertices && (this.vertices = a.next, b = !0), null != a && a.prev == a ? (a.next = a.prev = null, a.helper = null, null, a.next = ha.zpp_pool, ha.zpp_pool = a, a = a = null) : (c = a.next, a.prev.next = a.next, a.next.prev = a.prev, a.next = a.prev = null, a.helper = null, null, a.next = ha.zpp_pool, ha.zpp_pool = a, a = c), c = !0, null == a) {
                        c = !1;
                        this.vertices = null;
                        break
                    }
                }
            } while (c);
            return null == this.vertices
        },
        add_diagonal: function(a, b) { a.diagonals.add(b);
            b.diagonals.add(a);
            a.forced = b.forced = !0 },
        extract_partitions: function(a) {
            null == a && (a = new Mj);
            if (null != this.vertices) {
                var b = this.vertices,
                    c = this.vertices;
                if (null != b) { do b.sort(), b = b.next; while (b != c) }
                for (this.pull_partitions(this.vertices, a); null != this.vertices;) null != this.vertices && this.vertices.prev == this.vertices ? (this.vertices.next = this.vertices.prev = null, c = this.vertices, c.helper = null, null, c.next = ha.zpp_pool,
                    ha.zpp_pool = c, this.vertices = this.vertices = null) : (c = this.vertices.next, this.vertices.prev.next = this.vertices.next, this.vertices.next.prev = this.vertices.prev, this.vertices.next = this.vertices.prev = null, b = this.vertices, b.helper = null, null, b.next = ha.zpp_pool, ha.zpp_pool = b, this.vertices = null, this.vertices = c);
                c = null;
                for (b = a.head; null != b;) b.elt.remove_collinear_vertices() ? a.erase(c) : (c = b, b = b.next)
            }
            return a
        },
        pull_partitions: function(a, b) {
            var c;
            null == pb.zpp_pool ? c = new pb : (c = pb.zpp_pool, pb.zpp_pool = c.next, c.next =
                null);
            null;
            var d = a;
            do { var e = d.copy();
                null == c.vertices ? c.vertices = e.prev = e.next = e : (e.prev = c.vertices, e.next = c.vertices.next, c.vertices.next.prev = e, c.vertices.next = e);
                c.vertices = e;
                c.vertices.forced = d.forced; if (null != d.diagonals.head)
                    if (d.diagonals.inlined_pop_unsafe() == a) break;
                    else d = this.pull_partitions(d, b);
                else d = d.next } while (d != a);
            var e = 0,
                f = c.vertices,
                j = c.vertices;
            if (null != f) { do var h = f,
                    e = e + h.x * (h.next.y - h.prev.y),
                    f = f.next; while (f != j) } 0 != 0.5 * e && b.add(c);
            return d
        },
        extract: function(a) {
            null == a && (a =
                new Nj);
            if (null != this.vertices) {
                var b = this.vertices,
                    c = this.vertices;
                if (null != b) { do b.sort(), b = b.next; while (b != c) }
                for (this.pull(this.vertices, a); null != this.vertices;) null != this.vertices && this.vertices.prev == this.vertices ? (this.vertices.next = this.vertices.prev = null, c = this.vertices, c.helper = null, null, c.next = ha.zpp_pool, ha.zpp_pool = c, this.vertices = this.vertices = null) : (c = this.vertices.next, this.vertices.prev.next = this.vertices.next, this.vertices.next.prev = this.vertices.prev, this.vertices.next = this.vertices.prev =
                    null, b = this.vertices, b.helper = null, null, b.next = ha.zpp_pool, ha.zpp_pool = b, this.vertices = null, this.vertices = c)
            }
            return a
        },
        pull: function(a, b) {
            var c = null,
                d = a;
            do { var e = uc.get(d.x, d.y);
                null == c ? e.prev = e.next = e : (e.prev = c, e.next = c.next, c.next.prev = e, c.next = e);
                c = e;
                c.forced = d.forced; if (null != d.diagonals.head)
                    if (d.diagonals.inlined_pop_unsafe() == a) break;
                    else d = this.pull(d, b);
                else d = d.next } while (d != a);
            var e = 0,
                f = c,
                j = c;
            if (null != f) { do var h = f,
                    e = e + h.x * (h.next.y - h.prev.y),
                    f = f.next; while (f != j) } e *= 0.5;
            if (e * e >= t.epsilon *
                t.epsilon) {
                e = c;
                for (j = !0; j || e != c;)
                    if (j = !1, qb.vec_dsq(e.x, e.y, e.next.x, e.next.y) < t.epsilon * t.epsilon) { if (e == c && (c = e.next, j = !0), e.forced && (e.next.forced = !0), null != e && e.prev == e ? e = e = e.next = e.prev = null : (f = e.next, e.prev.next = e.next, e.next.prev = e.prev, e.next = e.prev = null, e = f), null == e) { c = null; break } } else e = e.next;
                if (null != c) {
                    do {
                        f = !1;
                        e = c;
                        for (j = !0; j || e != c;) {
                            var j = !1,
                                g = e.prev,
                                i = h = 0,
                                h = e.x - g.x,
                                i = e.y - g.y,
                                k = g = 0,
                                g = e.next.x - e.x,
                                k = e.next.y - e.y,
                                h = k * h - g * i;
                            if (h * h >= t.epsilon * t.epsilon) e = e.next;
                            else if (e == c && (c = e.next, j = !0), null != e && e.prev == e ? e = e = e.next = e.prev = null : (f = e.next, e.prev.next = e.next, e.next.prev = e.prev, e.next = e.prev = null, e = f), f = !0, null == e) { f = !1;
                                c = null; break }
                        }
                    } while (f)
                }
                null == c || b.add(c)
            }
            return d
        },
        __class__: pb
    };
    var vb = function() { this.slipped = this.failed = this.kinematic = !1;
        this.c1 = this.c2 = this.axis = null;
        this.frozen1 = this.frozen2 = !1;
        this.s1 = this.s2 = this.arbiter = null;
        this.toi = 0;
        this.next = null;
        this.c1 = new xa;
        this.c2 = new xa;
        this.axis = new xa };
    g["zpp_nape.geom.ZPP_ToiEvent"] = vb;
    vb.__name__ = ["zpp_nape", "geom", "ZPP_ToiEvent"];
    vb.prototype = { __class__: vb };
    var ce = function() {};
    g["zpp_nape.geom.ZPP_SweepDistance"] = ce;
    ce.__name__ = ["zpp_nape", "geom", "ZPP_SweepDistance"];
    ce.dynamicSweep = function(a, b, c, d, e) {
        null == e && (e = !1);
        var f = a.s1,
            j = a.s2,
            h = f.body,
            g = j.body,
            i = 0,
            k = 0,
            i = g.velx - h.velx,
            k = g.vely - h.vely,
            l = h.angvel;
        0 > l && (l = -l);
        var m = g.angvel;
        0 > m && (m = -m);
        var n = f.sweepCoef * l + j.sweepCoef * m;
        if (!e && !a.kinematic && i * i + k * k < t.dynamicSweepLinearThreshold * t.dynamicSweepLinearThreshold && n < t.dynamicSweepAngularThreshold) a.toi = -1, a.failed = !0;
        else {
            for (var o =
                    a.c1, l = a.c2, m = a.axis, r = 0;;) {
                h.sweepIntegrate(c * b);
                h.sweepValidate(f);
                g.sweepIntegrate(c * b);
                g.sweepValidate(j);
                var s = ce.distance(f, j, o, l, m, null) + d,
                    v = i * m.x + k * m.y;
                if (s < t.distanceThresholdCCD) { if (e) break; var x = 0,
                        u = 0,
                        x = o.x - h.posx,
                        u = o.y - h.posy,
                        q = 0,
                        w = 0,
                        q = l.x - g.posx,
                        w = l.y - g.posy,
                        x = v - h.sweep_angvel * (m.y * x - m.x * u) + g.sweep_angvel * (m.y * q - m.x * w);
                    0 < x && (a.slipped = !0); if (0 >= x || s < 0.5 * t.distanceThresholdCCD) break } v = (n - v) * b;
                if (0 >= v) { c = -1; break } v = s / v;
                1.0E-6 > v && (v = 1.0E-6);
                c += v;
                if (1 <= c) {
                    c = 1;
                    h.sweepIntegrate(c * b);
                    h.sweepValidate(f);
                    g.sweepIntegrate(c * b);
                    g.sweepValidate(j);
                    b = ce.distance(f, j, o, l, m, null) + d;
                    i = i * m.x + k * m.y;
                    if (b < t.distanceThresholdCCD) { if (e) break;
                        k = e = 0;
                        e = o.x - h.posx;
                        k = o.y - h.posy;
                        d = o = 0;
                        o = l.x - g.posx;
                        d = l.y - g.posy;
                        h = i - h.sweep_angvel * (m.y * e - m.x * k) + g.sweep_angvel * (m.y * o - m.x * d);
                        0 < h && (a.slipped = !0); if (0 >= h || b < 0.5 * t.distanceThresholdCCD) break } c = -1;
                    break
                }
                if (40 <= ++r) { s > d && (a.failed = !0); break }
            }
            a.toi = c
        }
    };
    ce.staticSweep = function(a, b, c, d) {
        var e = a.s1,
            f = a.s2,
            j = e.body,
            h = 0,
            g = 0,
            h = -j.velx,
            g = -j.vely,
            i = j.sweep_angvel;
        0 > i && (i = -i);
        for (var k =
                e.sweepCoef * i, i = a.c1, l = a.c2, m = a.axis, n = 0;;) {
            j.sweepIntegrate(c * b);
            j.sweepValidate(e);
            var o = ce.distance(e, f, i, l, m, null) + d,
                r = h * m.x + g * m.y;
            if (o < t.distanceThresholdCCD) { var s = 0,
                    v = 0,
                    s = i.x - j.posx,
                    v = i.y - j.posy,
                    s = r - j.sweep_angvel * (m.y * s - m.x * v);
                0 < s && (a.slipped = !0); if (0 >= s || o < 0.5 * t.distanceThresholdCCD) break } r = (k - r) * b;
            if (0 >= r) { c = -1; break } r = o / r;
            1.0E-6 > r && (r = 1.0E-6);
            c += r;
            if (1 <= c) {
                c = 1;
                j.sweepIntegrate(c * b);
                j.sweepValidate(e);
                b = ce.distance(e, f, i, l, m, null) + d;
                h = h * m.x + g * m.y;
                if (b < t.distanceThresholdCCD && (d = g = 0, g = i.x -
                        j.posx, d = i.y - j.posy, j = h - j.sweep_angvel * (m.y * g - m.x * d), 0 < j && (a.slipped = !0), 0 >= j || b < 0.5 * t.distanceThresholdCCD)) break;
                c = -1;
                break
            }
            if (40 <= ++n) { o > d && (a.failed = !0); break }
        }
        a.toi = c
    };
    ce.distance = function(a, b, c, d, e, f) {
        null == f && (f = 1.0E100);
        if (a.type == h.id_ShapeType_CIRCLE && b.type == h.id_ShapeType_CIRCLE) {
            var j = a.circle,
                g = b.circle,
                i, k = 0,
                l = 0,
                k = g.worldCOMx - j.worldCOMx,
                l = g.worldCOMy - j.worldCOMy,
                m = Math.sqrt(k * k + l * l);
            i = m - (j.radius + g.radius);
            if (i < f) {
                if (0 == m) k = 1, l = 0;
                else var n = 1 / m,
                    k = k * n,
                    l = l * n;
                var o = j.radius;
                c.x = j.worldCOMx +
                    k * o;
                c.y = j.worldCOMy + l * o;
                var r = -g.radius;
                d.x = g.worldCOMx + k * r;
                d.y = g.worldCOMy + l * r;
                e.x = k;
                e.y = l
            }
            return i
        }
        var s = !1;
        if (a.type == h.id_ShapeType_CIRCLE && b.type == h.id_ShapeType_POLYGON) var v = a,
            a = b,
            b = v,
            x = c,
            c = d,
            d = x,
            s = !0;
        if (a.type == h.id_ShapeType_POLYGON && b.type == h.id_ShapeType_CIRCLE) {
            for (var u = b.circle, q = -1.0E100, w = null, z = a.polygon.edges.head; null != z;) { var y = z.elt,
                    A = y.gnormx * u.worldCOMx + y.gnormy * u.worldCOMy - y.gprojection - u.radius; if (A > f) { q = A; break } 0 < A ? A > q && (q = A, w = y) : 0 > q && A > q && (q = A, w = y);
                z = z.next }
            if (q < f) {
                var D =
                    w.gp0,
                    E = w.gp1,
                    G = u.worldCOMy * w.gnormx - u.worldCOMx * w.gnormy;
                if (G <= D.y * w.gnormx - D.x * w.gnormy) { var F = 0,
                        C = 0,
                        F = u.worldCOMx - D.x,
                        C = u.worldCOMy - D.y,
                        H = Math.sqrt(F * F + C * C),
                        q = H - u.radius; if (q < f) { if (0 == H) F = 1, C = 0;
                        else var M = 1 / H,
                            F = F * M,
                            C = C * M;
                        c.x = D.x + 0 * F;
                        c.y = D.y + 0 * C; var L = -u.radius;
                        d.x = u.worldCOMx + F * L;
                        d.y = u.worldCOMy + C * L;
                        e.x = F;
                        e.y = C } } else if (G >= E.y * w.gnormx - E.x * w.gnormy) {
                    var K = 0,
                        J = 0,
                        K = u.worldCOMx - E.x,
                        J = u.worldCOMy - E.y,
                        P = Math.sqrt(K * K + J * J),
                        q = P - u.radius;
                    if (q < f) {
                        if (0 == P) K = 1, J = 0;
                        else var O = 1 / P,
                            K = K * O,
                            J = J * O;
                        c.x = E.x + 0 * K;
                        c.y =
                            E.y + 0 * J;
                        var N = -u.radius;
                        d.x = u.worldCOMx + K * N;
                        d.y = u.worldCOMy + J * N;
                        e.x = K;
                        e.y = J
                    }
                } else { var Q = -u.radius;
                    d.x = u.worldCOMx + w.gnormx * Q;
                    d.y = u.worldCOMy + w.gnormy * Q; var R = -q;
                    c.x = d.x + w.gnormx * R;
                    c.y = d.y + w.gnormy * R;
                    e.x = w.gnormx;
                    e.y = w.gnormy }
            }
            s && (e.x = -e.x, e.y = -e.y);
            return q
        }
        for (var U = a.polygon, W = b.polygon, I = -1.0E100, S = null, Y = null, X = 0, ba = U.edges.head; null != ba;) {
            for (var ca = ba.elt, Z = 1.0E100, $ = W.gverts.next; null != $;) { var da = $,
                    ha = ca.gnormx * da.x + ca.gnormy * da.y;
                ha < Z && (Z = ha);
                $ = $.next } Z -= ca.gprojection;
            if (Z > f) { I = Z; break } 0 <
                Z ? Z > I && (I = Z, S = ca, X = 1) : 0 > I && Z > I && (I = Z, S = ca, X = 1);
            ba = ba.next
        }
        if (I < f) {
            for (var ea = W.edges.head; null != ea;) { for (var ka = ea.elt, B = 1.0E100, ia = U.gverts.next; null != ia;) { var ma = ia,
                        na = ka.gnormx * ma.x + ka.gnormy * ma.y;
                    na < B && (B = na);
                    ia = ia.next } B -= ka.gprojection; if (B > f) { I = B; break } 0 < B ? B > I && (I = B, Y = ka, X = 2) : 0 > I && B > I && (I = B, Y = ka, X = 2);
                ea = ea.next }
            if (I < f) {
                var ja, V;
                if (1 == X) ja = W, V = S;
                else { ja = U;
                    V = Y; var za = c,
                        c = d,
                        d = za,
                        s = !s }
                for (var la = null, ta = 1.0E100, wa = ja.edges.head; null != wa;) {
                    var xa = wa.elt,
                        Aa = V.gnormx * xa.gnormx + V.gnormy * xa.gnormy;
                    Aa < ta && (ta = Aa, la = xa);
                    wa = wa.next
                }
                s ? (e.x = -V.gnormx, e.y = -V.gnormy) : (e.x = V.gnormx, e.y = V.gnormy);
                if (0 <= I) {
                    var fa = V.gp0,
                        pa = V.gp1,
                        ga = la.gp0,
                        aa = la.gp1,
                        qa = 0,
                        ra = 0,
                        ya = 0,
                        sa = 0,
                        qa = pa.x - fa.x,
                        ra = pa.y - fa.y,
                        ya = aa.x - ga.x,
                        sa = aa.y - ga.y,
                        Ca = 1 / (qa * qa + ra * ra),
                        Ga = 1 / (ya * ya + sa * sa),
                        Da = -(qa * (fa.x - ga.x) + ra * (fa.y - ga.y)) * Ca,
                        Na = -(qa * (fa.x - aa.x) + ra * (fa.y - aa.y)) * Ca,
                        Ja = -(ya * (ga.x - fa.x) + sa * (ga.y - fa.y)) * Ga,
                        Ka = -(ya * (ga.x - pa.x) + sa * (ga.y - pa.y)) * Ga;
                    0 > Da ? Da = 0 : 1 < Da && (Da = 1);
                    0 > Na ? Na = 0 : 1 < Na && (Na = 1);
                    0 > Ja ? Ja = 0 : 1 < Ja && (Ja = 1);
                    0 > Ka ? Ka = 0 : 1 < Ka && (Ka = 1);
                    var Ea = 0,
                        Fa = 0,
                        cb = Da,
                        Ea = fa.x + qa * cb,
                        Fa = fa.y + ra * cb,
                        Ha = 0,
                        Ia = 0,
                        Va = Na,
                        Ha = fa.x + qa * Va,
                        Ia = fa.y + ra * Va,
                        Ta = 0,
                        Qa = 0,
                        T = Ja,
                        Ta = ga.x + ya * T,
                        Qa = ga.y + sa * T,
                        Sa = 0,
                        Oa = 0,
                        Ua = Ka,
                        Sa = ga.x + ya * Ua,
                        Oa = ga.y + sa * Ua,
                        La = qb.vec_dsq(Ea, Fa, ga.x, ga.y),
                        Wa = qb.vec_dsq(Ha, Ia, aa.x, aa.y),
                        $a = qb.vec_dsq(Ta, Qa, fa.x, fa.y),
                        fb = qb.vec_dsq(Sa, Oa, pa.x, pa.y),
                        Ya = 0,
                        ab = 0,
                        Ra = null;
                    La < Wa ? (Ya = Ea, ab = Fa, Ra = ga) : (Ya = Ha, ab = Ia, Ra = aa, La = Wa);
                    var Xa = 0,
                        Za = 0,
                        oa = null;
                    $a < fb ? (Xa = Ta, Za = Qa, oa = fa) : (Xa = Sa, Za = Oa, oa = pa, $a = fb);
                    La < $a ? (c.x = Ya, c.y = ab, d.x = Ra.x, d.y = Ra.y, I = Math.sqrt(La)) :
                        (d.x = Xa, d.y = Za, c.x = oa.x, c.y = oa.y, I = Math.sqrt($a));
                    if (0 != I) { e.x = d.x - c.x;
                        e.y = d.y - c.y; var eb = 1 / I;
                        e.x *= eb;
                        e.y *= eb;
                        s && (e.x = -e.x, e.y = -e.y) }
                    return I
                }
                var Ba = 0,
                    ua = 0,
                    Ba = la.gp0.x,
                    ua = la.gp0.y,
                    Ma = 0,
                    Pa = 0,
                    Ma = la.gp1.x,
                    Pa = la.gp1.y,
                    db = 0,
                    lb = 0,
                    db = Ma - Ba,
                    lb = Pa - ua,
                    kb = V.gnormy * Ba - V.gnormx * ua,
                    ob = V.gnormy * Ma - V.gnormx * Pa,
                    ib = 1 / (ob - kb),
                    Bb = (-V.tp1 - kb) * ib;
                Bb > t.epsilon && (Ba += db * Bb, ua += lb * Bb);
                var mb = (-V.tp0 - ob) * ib;
                mb < -t.epsilon && (Ma += db * mb, Pa += lb * mb);
                var jb = Ba * V.gnormx + ua * V.gnormy - V.gprojection,
                    nb = Ma * V.gnormx + Pa * V.gnormy - V.gprojection;
                if (jb < nb) { d.x = Ba;
                    d.y = ua; var gb = -jb;
                    c.x = d.x + V.gnormx * gb;
                    c.y = d.y + V.gnormy * gb; return jb } d.x = Ma;
                d.y = Pa;
                var hb = -nb;
                c.x = d.x + V.gnormx * hb;
                c.y = d.y + V.gnormy * hb;
                return nb
            }
        }
        return f
    };
    var nb = function() { this.node = null;
        this.id = this.di = 0;
        this.a = this.b = null;
        this.length = 0;
        this._inuse = this.modified = this.pushmod = !1;
        this.next = null };
    g["zpp_nape.geom.ZPP_PartitionPair"] = nb;
    nb.__name__ = ["zpp_nape", "geom", "ZPP_PartitionPair"];
    nb.get = function(a, b) {
        var c;
        null == nb.zpp_pool ? c = new nb : (c = nb.zpp_pool, nb.zpp_pool = c.next, c.next = null);
        null;
        c.a = a;
        c.b = b;
        a.id < b.id ? (c.id = a.id, c.di = b.id) : (c.id = b.id, c.di = a.id);
        return c
    };
    nb.edge_swap = function(a, b) { var c = a.node;
        a.node = b.node;
        b.node = c };
    nb.edge_lt = function(a, b) { return a.id < b.id || a.id == b.id && a.di < b.di };
    nb.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() {
            var a = this.next;
            this.next = a.next;
            a._inuse = !1;
            null == this.next && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.next;
            this.pop(); return a },
        __class__: nb
    };
    var ea = function() {};
    g["zpp_nape.geom.ZPP_Triangular"] = ea;
    ea.__name__ = ["zpp_nape", "geom", "ZPP_Triangular"];
    ea.right_turn = function(a, b, c) { var d = 0,
            e = 0,
            d = c.x - b.x,
            e = c.y - b.y,
            f = c = 0,
            c = b.x - a.x,
            f = b.y - a.y; return f * d - c * e };
    ea.delaunay = function(a, b, c, d) {
        var e = 0,
            f = 0,
            j = 0,
            h = 0,
            e = c.x - b.x,
            f = c.y - b.y,
            j = b.x - a.x,
            h = b.y - a.y;
        if (!(e = 0 <= h * e - j * f))
            if (e = d.x -
                c.x, f = d.y - c.y, j = c.x - b.x, h = c.y - b.y, !(e = 0 <= h * e - j * f))
                if (e = a.x - d.x, f = a.y - d.y, j = d.x - c.x, h = d.y - c.y, !(e = 0 <= h * e - j * f)) e = b.x - a.x, f = b.y - a.y, j = a.x - d.x, h = a.y - d.y, e = 0 <= h * e - j * f;
        return e ? !0 : 0 < b.x * (c.y * d.mag - c.mag * d.y) - c.x * (b.y * d.mag - b.mag * d.y) + d.x * (b.y * c.mag - b.mag * c.y) - (a.x * (c.y * d.mag - c.mag * d.y) - c.x * (a.y * d.mag - a.mag * d.y) + d.x * (a.y * c.mag - a.mag * c.y)) + (a.x * (b.y * d.mag - b.mag * d.y) - b.x * (a.y * d.mag - a.mag * d.y) + d.x * (a.y * b.mag - a.mag * b.y)) - (a.x * (b.y * c.mag - b.mag * c.y) - b.x * (a.y * c.mag - a.mag * c.y) + c.x * (a.y * b.mag - a.mag * b.y))
    };
    ea.optimise =
        function(a) {
            var b = a.vertices,
                c = a.vertices;
            if (null != b) { do { var d = b;
                    d.sort();
                    d.mag = d.x * d.x + d.y * d.y;
                    b = b.next } while (b != c) } null == ea.edgeSet && (null == nd.zpp_pool ? ea.edgeSet = new nd : (ea.edgeSet = nd.zpp_pool, nd.zpp_pool = ea.edgeSet.next, ea.edgeSet.next = null), null, ea.edgeSet.lt = nb.edge_lt, ea.edgeSet.swapped = nb.edge_swap);
            null == nb.zpp_pool ? c = new nb : (c = nb.zpp_pool, nb.zpp_pool = c.next, c.next = null);
            null;
            a = b = a.vertices;
            if (null != b) {
                do {
                    var d = b,
                        e = d.next;
                    d.diagonals.reverse();
                    for (var f = d.diagonals.head; null != f;) {
                        var j = f.elt;
                        if (!(j.id < d.id) && !ea.delaunay(d, e, j, null == f.next ? d.prev : f.next.elt)) e = nb.get(d, j), c.add(e), e.node = ea.edgeSet.insert(e);
                        e = j;
                        f = f.next
                    }
                    b = b.next
                } while (b != a)
            }
            for (; null != c.next;) {
                a = c.pop_unsafe();
                b = a.a;
                j = a.b;
                d = b.next;
                f = null;
                for (e = b.diagonals.head; null != e;) { var h = e.elt; if (h == j) { e = e.next;
                        f = null == e ? b.prev : e.elt; break } d = h;
                    e = e.next } b.diagonals.remove(j);
                j.diagonals.remove(b);
                if (j == d.next) d.diagonals.add(f);
                else
                    for (e = d.diagonals.head; null != e;) { if (e.elt == j) { d.diagonals.insert(e, f); break } e = e.next }
                if (b == f.next) f.diagonals.add(d);
                else
                    for (j = f.diagonals.head; null != j;) { if (j.elt == b) { f.diagonals.insert(j, d); break } j = j.next } ea.edgeSet.remove_node(a.node);
                a.a = a.b = null;
                a.node = null;
                a.next = nb.zpp_pool;
                nb.zpp_pool = a
            }
            c.a = c.b = null;
            c.node = null;
            c.next = nb.zpp_pool;
            nb.zpp_pool = c
        };
    ea.triangulate = function(a) {
        var b = a.vertices,
            c = a.vertices,
            d = a.vertices.next,
            e = a.vertices;
        if (null != d) { do { var f = d; if (f.y < b.y || f.y == b.y && f.x < b.x) b = f; if (c.y < f.y || c.y == f.y && c.x < f.x) c = f;
                d = d.next } while (d != e) } null == ea.queue && (ea.queue = new zg);
        e = c.prev;
        d = c.next;
        for (ea.queue.add(c); e !=
            b || d != b;) e == b || d != b && (e.y < d.y || e.y == d.y && e.x < d.x) ? (ea.queue.add(d), d.rightchain = !1, d = d.next) : (ea.queue.add(e), e.rightchain = !0, e = e.prev);
        ea.queue.add(b);
        null == ea.stack && (ea.stack = new zg);
        ea.stack.add(ea.queue.pop_unsafe());
        e = ea.queue.pop_unsafe();
        for (ea.stack.add(e);;) {
            b = ea.queue.pop_unsafe();
            if (null == ea.queue.head) break;
            if (b.rightchain != ea.stack.head.elt.rightchain)
                for (;;) { d = ea.stack.pop_unsafe(); if (null == ea.stack.head) break;
                    a.add_diagonal(d, b) } else
                    for (e = ea.stack.pop_unsafe(); null != ea.stack.head;) {
                        d =
                            ea.stack.head.elt;
                        f = ea.right_turn(d, e, b);
                        if (b.rightchain && 0 <= f || !b.rightchain && 0 >= f) break;
                        a.add_diagonal(d, b);
                        e = d;
                        ea.stack.pop()
                    }
            ea.stack.add(e);
            ea.stack.add(b);
            e = b
        }
        if (null != ea.stack.head)
            for (ea.stack.pop(); null != ea.stack.head;) { b = ea.stack.pop_unsafe(); if (null == ea.stack.head) break;
                a.add_diagonal(c, b) }
        return a
    };
    var xa = function() {
        this.length = this.x = this.y = 0;
        this._inuse = this.modified = this.pushmod = !1;
        this.next = null;
        this.weak = !1;
        this._isimmutable = this.outer = null;
        this._immutable = !1;
        this._invalidate = this._validate =
            null
    };
    g["zpp_nape.geom.ZPP_Vec2"] = xa;
    xa.__name__ = ["zpp_nape", "geom", "ZPP_Vec2"];
    xa.get = function(a, b, c) { null == c && (c = !1); var d;
        null == xa.zpp_pool ? d = new xa : (d = xa.zpp_pool, xa.zpp_pool = d.next, d.next = null);
        d.weak = !1;
        d._immutable = c;
        d.x = a;
        d.y = b; return d };
    xa.prototype = {
        validate: function() { null != this._validate && this._validate() },
        invalidate: function() { null != this._invalidate && this._invalidate(this) },
        wrapper: function() {
            if (null == this.outer) {
                this.outer = new fa;
                var a = this.outer.zpp_inner;
                null != a.outer && (a.outer.zpp_inner =
                    null, a.outer = null);
                a._isimmutable = null;
                a._validate = null;
                a._invalidate = null;
                a.next = xa.zpp_pool;
                xa.zpp_pool = a;
                this.outer.zpp_inner = this
            }
            return this.outer
        },
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) {
            b._inuse = !0;
            null == a ? (b.next = this.next, this.next = b) : (b.next = a.next, a.next = b);
            this.pushmod = this.modified = !0;
            this.length++;
            return b
        },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.next, this.next = c = b.next, null == this.next && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            b._inuse = !1;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        reverse: function() { for (var a = this.next, b = null; null != a;) { var c = a.next;
                a.next = b;
                b = this.next = a;
                a = c } this.pushmod = this.modified = !0 },
        iterator_at: function(a) { for (var b = this.next; 0 < a-- && null != b;) b = b.next; return b },
        toString: function() {
            return "{ x: " +
                this.x + " y: " + this.y + " }"
        },
        __class__: xa
    };
    var yn = function() { this._validate = null;
        this.x = this.y = this.z = 0 };
    g["zpp_nape.geom.ZPP_Vec3"] = yn;
    yn.__name__ = ["zpp_nape", "geom", "ZPP_Vec3"];
    yn.prototype = { validate: function() { null != this._validate && this._validate() }, __class__: yn };
    var qb = function() {};
    g["zpp_nape.geom.ZPP_VecMath"] = qb;
    qb.__name__ = ["zpp_nape", "geom", "ZPP_VecMath"];
    qb.vec_dsq = function(a, b, c, d) { var e = 0,
            f = 0,
            e = a - c,
            f = b - d; return e * e + f * f };
    var cb = function() {
        this.userData = this.ishape = this.ibody = this.icompound =
            this.cbsets = this.group = this.cbTypes = this.cbSet = this.wrap_cbTypes = null;
        this.id = 0;
        this.outer_i = null;
        this.id = Lc.Interactor();
        this.cbsets = new Nm;
        this.cbTypes = new re
    };
    g["zpp_nape.phys.ZPP_Interactor"] = cb;
    cb.__name__ = ["zpp_nape", "phys", "ZPP_Interactor"];
    cb.get = function(a, b) { var c;
        c = a.id < b.id ? a.id : b.id; var d;
        d = a.id < b.id ? b.id : a.id; for (var e = null, f = (a.cbsets.length < b.cbsets.length ? a.cbsets : b.cbsets).head; null != f;) { var h = f.elt; if (h.id == c && h.di == d) { e = h; break } f = f.next } return e };
    cb.int_callback = function(a, b, c) {
        var d =
            a.int1,
            a = a.int2;
        b.options1.compatible(d.cbTypes) && b.options2.compatible(a.cbTypes) ? (c.int1 = d, c.int2 = a) : (c.int1 = a, c.int2 = d)
    };
    cb.prototype = {
        __iaddedToSpace: function() { null != this.group && this.group.interactors.add(this); for (var a = this.cbTypes.head; null != a;) a.elt.interactors.add(this), a = a.next;
            this.alloc_cbSet() },
        __iremovedFromSpace: function() { null != this.group && this.group.interactors.remove(this); for (var a = this.cbTypes.head; null != a;) a.elt.interactors.remove(this), a = a.next;
            this.dealloc_cbSet() },
        wake: function() {
            if (null !=
                this.ishape) { var a = this.ishape.body;
                null != a && null != a.space && a.space.non_inlined_wake(a);!0 } else null != this.ibody ? null != this.ibody.space ? this.ibody.space.non_inlined_wake(this.ibody) : !1 : (null != this.icompound.space && this.icompound.space.wakeCompound(this.icompound), !0)
        },
        setupcbTypes: function() {
            this.wrap_cbTypes = je.get(this.cbTypes);
            this.wrap_cbTypes.zpp_inner.adder = n(this, this.wrap_cbTypes_adder);
            this.wrap_cbTypes.zpp_inner.subber = n(this, this.wrap_cbTypes_subber);
            this.wrap_cbTypes.zpp_inner.dontremove = !0
        },
        wrap_cbTypes_subber: function(a) { a = a.zpp_inner; if (this.cbTypes.has(a)) { var b;
                b = null != this.ishape ? null == this.ishape.body ? null : this.ishape.body.space : null != this.ibody ? this.ibody.space : this.icompound.space;
                null != b && (this.dealloc_cbSet(), a.interactors.remove(this));
                this.cbTypes.remove(a);
                null != b && (this.alloc_cbSet(), this.wake()) } },
        wrap_cbTypes_adder: function(a) { this.insert_cbtype(a.zpp_inner); return !1 },
        insert_cbtype: function(a) {
            if (!this.cbTypes.has(a)) {
                var b;
                b = null != this.ishape ? null == this.ishape.body ?
                    null : this.ishape.body.space : null != this.ibody ? this.ibody.space : this.icompound.space;
                null != b && (this.dealloc_cbSet(), a.interactors.add(this));
                for (var c = null, d = this.cbTypes.head; null != d && !(a.id < d.elt.id);) { c = d;
                    d = d.next } this.cbTypes.inlined_insert(c, a);
                null != b && (this.alloc_cbSet(), this.wake())
            }
        },
        alloc_cbSet: function() {
            var a;
            a = null != this.ishape ? null == this.ishape.body ? null : this.ishape.body.space : null != this.ibody ? this.ibody.space : this.icompound.space;
            if (null != (this.cbSet = a.cbsets.get(this.cbTypes))) this.cbSet.count++,
                this.cbSet.interactors.add(this), this.cbSet.validate(), a.freshInteractorType(this)
        },
        dealloc_cbSet: function() { var a;
            a = null != this.ishape ? null == this.ishape.body ? null : this.ishape.body.space : null != this.ibody ? this.ibody.space : this.icompound.space;
            null != this.cbSet && (this.cbSet.interactors.remove(this), a.nullInteractorType(this), 0 == --this.cbSet.count && (a.cbsets.remove(this.cbSet), a = this.cbSet, a.free(), a.next = za.zpp_pool, za.zpp_pool = a), this.cbSet = null) },
        immutable_midstep: function(a) {
            null != this.ibody ? null :
                null != this.ishape ? this.ishape.__immutable_midstep(a) : this.icompound.__imutable_midstep(a)
        },
        lookup_group: function() { for (var a = this; null != a && null == a.group;) a = null != a.ishape ? a.ishape.body : null != a.icompound ? a.icompound.compound : a.ibody.compound; return null == a ? null : a.group },
        __class__: cb
    };
    var Ke = function() {
        this.wrap_localCOM = this.wrap_worldCOM = null;
        this.zip_worldCOM = !1;
        this.worldCOMx = this.worldCOMy = 0;
        this.zip_localCOM = !1;
        this.localCOMx = this.localCOMy = 0;
        this.zip_aabb = !1;
        this.aabb = null;
        this.norotate = !1;
        this.cinertia =
            this.iinertia = this.sinertia = 0;
        this.zip_inertia = !1;
        this.inertiaMode = this.inertia = 0;
        this.zip_gravMassScale = !1;
        this.gravMassMode = this.gravMassScale = 0;
        this.zip_gravMass = !1;
        this.gravMass = 0;
        this.nomove = !1;
        this.massMode = this.imass = this.smass = this.cmass = 0;
        this.zip_mass = !1;
        this.mass = 0;
        this.zip_axis = !1;
        this.kinvelx = this.kinvely = this.svelx = this.svely = this.angvel = this.torque = this.kinangvel = this.pre_rot = this.rot = this.axisx = this.axisy = 0;
        this.wrap_force = null;
        this.forcex = this.forcey = 0;
        this.wrap_vel = null;
        this.velx =
            this.vely = 0;
        this.wrap_pos = null;
        this.pre_posx = this.pre_posy = this.posx = this.posy = 0;
        this.bullet = this.bulletEnabled = this.disableCCD = !1;
        this.sweepRadius = 0;
        this.sweepFrozen = !1;
        this.sweepTime = this.sweep_angvel = 0;
        this.compound = this.shapes = this.wrap_shapes = this.space = this.arbiters = this.constraints = this.component = null;
        this.type = 0;
        this.world = !1;
        this.outer = null;
        cb.call(this);
        this.ibody = this;
        this.bulletEnabled = this.world = !1;
        this.sweep_angvel = this.sweepTime = 0;
        this.disableCCD = this.norotate = this.nomove = !1;
        this.axisx =
            this.rot = this.posy = this.posx = 0;
        this.axisy = 1;
        this.torque = this.angvel = this.kinangvel = this.forcey = this.forcex = this.kinvely = this.kinvelx = this.vely = this.velx = this.svely = this.svelx = 0;
        this.pre_rot = this.pre_posy = this.pre_posx = Math.POSITIVE_INFINITY;
        this.worldCOMy = this.worldCOMx = this.localCOMy = this.localCOMx = 0;
        this.zip_aabb = !0;
        this.aabb = Wa.get(0, 0, 0, 0);
        this.aabb._immutable = !0;
        this.aabb._validate = n(this, this.aabb_validate);
        this.massMode = h.id_MassMode_DEFAULT;
        this.gravMassMode = h.id_GravMassMode_DEFAULT;
        this.gravMassScale =
            1;
        this.inertiaMode = h.id_InertiaMode_DEFAULT;
        this.arbiters = new Oh;
        this.constraints = new pf;
        this.shapes = new Df;
        this.wrap_shapes = lf.get(this.shapes);
        this.wrap_shapes.zpp_inner.adder = n(this, this.shapes_adder);
        this.wrap_shapes.zpp_inner.subber = n(this, this.shapes_subber);
        this.wrap_shapes.zpp_inner._invalidate = n(this, this.shapes_invalidate);
        this.kinematicDelaySleep = !1
    };
    g["zpp_nape.phys.ZPP_Body"] = Ke;
    Ke.__name__ = ["zpp_nape", "phys", "ZPP_Body"];
    Ke.__static = function() {
        var a = Vg;
        null == h.BodyType_STATIC && (h.internal = !0, h.BodyType_STATIC = new Pb, h.internal = !1);
        var a = new a(h.BodyType_STATIC),
            b = a.zpp_inner;
        b.world = !0;
        b.wrap_shapes.zpp_inner.immutable = !0;
        b.smass = b.imass = b.cmass = b.mass = b.gravMass = 0;
        b.sinertia = b.iinertia = b.cinertia = b.inertia = 0;
        b.cbTypes.clear();
        return a
    };
    Ke.__super__ = cb;
    Ke.prototype = l(cb.prototype, {
        invalidate_type: function() { this.invalidate_mass();
            this.invalidate_inertia() },
        invalidate_shapes: function() { this.zip_worldCOM = this.zip_localCOM = this.zip_aabb = !0;
            this.invalidate_mass();
            this.invalidate_inertia() },
        atRest: function(a) {
            if (this.type != h.id_BodyType_DYNAMIC) return this.component.sleeping;
            var b = t.linearSleepThreshold,
                b = b * b;
            if (this.velx * this.velx + this.vely * this.vely > b) a = !1;
            else if (qb.vec_dsq(this.posx, this.posy, this.pre_posx, this.pre_posy) > 0.25 * b * a * a) a = !1;
            else { var c = b = 0,
                    b = this.aabb.maxx - this.aabb.minx,
                    c = this.aabb.maxy - this.aabb.miny,
                    b = b * b + c * c,
                    c = t.angularSleepThreshold,
                    c = c * c; if (4 * this.angvel * this.angvel * b > c) a = !1;
                else var d = this.rot - this.pre_rot,
                    a = d * d * b > c * a * a ? !1 : !0 } a || (this.component.waket = this.space.stamp);
            return this.component.waket + t.sleepDelay < this.space.stamp
        },
        refreshArbiters: function() { for (var a = this.arbiters.head; null != a;) a.elt.invalidated = !0, a = a.next },
        sweepIntegrate: function(a) { var b = a - this.sweepTime;
            0 != b && (this.sweepTime = a, this.posx += this.velx * b, this.posy += this.vely * b, 0 != this.angvel && this.delta_rot(this.sweep_angvel * b)) },
        sweepValidate: function(a) {
            if (a.type == h.id_ShapeType_CIRCLE) a.worldCOMx = this.posx + (this.axisy * a.localCOMx - this.axisx * a.localCOMy), a.worldCOMy = this.posy + (a.localCOMx * this.axisx +
                a.localCOMy * this.axisy);
            else {
                for (var a = a.polygon, b = a.lverts.next, c = a.gverts.next; null != c;) { var d = c,
                        e = b,
                        b = b.next;
                    d.x = this.posx + (this.axisy * e.x - this.axisx * e.y);
                    d.y = this.posy + (e.x * this.axisx + e.y * this.axisy);
                    c = c.next } c = a.edges.head;
                b = d = a.gverts.next;
                for (d = d.next; null != d;) {
                    var e = d,
                        f = c.elt,
                        c = c.next;
                    f.gnormx = this.axisy * f.lnormx - this.axisx * f.lnormy;
                    f.gnormy = f.lnormx * this.axisx + f.lnormy * this.axisy;
                    f.gprojection = this.posx * f.gnormx + this.posy * f.gnormy + f.lprojection;
                    f.tp0 = b.y * f.gnormx - b.x * f.gnormy;
                    f.tp1 = e.y * f.gnormx -
                        e.x * f.gnormy;
                    b = e;
                    d = d.next
                }
                a = a.gverts.next;
                c = c.elt;
                c.gnormx = this.axisy * c.lnormx - this.axisx * c.lnormy;
                c.gnormy = c.lnormx * this.axisx + c.lnormy * this.axisy;
                c.gprojection = this.posx * c.gnormx + this.posy * c.gnormy + c.lprojection;
                c.tp0 = b.y * c.gnormx - b.x * c.gnormy;
                c.tp1 = a.y * c.gnormx - a.x * c.gnormy
            }
        },
        invalidate_pos: function() { for (var a = this.shapes.head; null != a;) { var b = a.elt;
                b.type == h.id_ShapeType_POLYGON && (b.polygon.invalidate_gverts(), b.polygon.invalidate_gaxi());
                b.invalidate_worldCOM();
                a = a.next } this.zip_worldCOM = !0 },
        pos_invalidate: function(a) { this.immutable_midstep("Body::position");
            this.posx == a.x && this.posy == a.y || (this.posx = a.x, this.posy = a.y, this.invalidate_pos(), this.wake()) },
        pos_validate: function() { this.wrap_pos.zpp_inner.x = this.posx;
            this.wrap_pos.zpp_inner.y = this.posy },
        vel_invalidate: function(a) { this.velx = a.x;
            this.vely = a.y;
            this.wake() },
        vel_validate: function() { this.wrap_vel.zpp_inner.x = this.velx;
            this.wrap_vel.zpp_inner.y = this.vely },
        force_invalidate: function(a) { this.forcex = a.x;
            this.forcey = a.y;
            this.wake() },
        force_validate: function() { this.wrap_force.zpp_inner.x = this.forcex;
            this.wrap_force.zpp_inner.y = this.forcey },
        setupPosition: function() { this.wrap_pos = fa.get(this.posx, this.posy, null);
            this.wrap_pos.zpp_inner._inuse = !0;
            this.world ? this.wrap_pos.zpp_inner._immutable = !0 : (this.wrap_pos.zpp_inner._invalidate = n(this, this.pos_invalidate), this.wrap_pos.zpp_inner._validate = n(this, this.pos_validate)) },
        setupVelocity: function() {
            this.wrap_vel = fa.get(this.velx, this.vely, null);
            this.wrap_vel.zpp_inner._inuse = !0;
            this.world ?
                this.wrap_vel.zpp_inner._immutable = !0 : (this.wrap_vel.zpp_inner._invalidate = n(this, this.vel_invalidate), this.wrap_vel.zpp_inner._validate = n(this, this.vel_validate))
        },
        setupForce: function() { this.wrap_force = fa.get(this.forcex, this.forcey, null);
            this.wrap_force.zpp_inner._inuse = !0;
            this.world ? this.wrap_force.zpp_inner._immutable = !0 : (this.wrap_force.zpp_inner._invalidate = n(this, this.force_invalidate), this.wrap_force.zpp_inner._validate = n(this, this.force_validate)) },
        invalidate_rot: function() {
            this.zip_axis = !0;
            for (var a = this.shapes.head; null != a;) { var b = a.elt;
                b.type == h.id_ShapeType_POLYGON && (b.polygon.invalidate_gverts(), b.polygon.invalidate_gaxi());
                b.invalidate_worldCOM();
                a = a.next } this.zip_worldCOM = !0
        },
        validate_axis: function() { this.zip_axis && (this.zip_axis = !1, this.axisx = Math.sin(this.rot), this.axisy = Math.cos(this.rot), null) },
        delta_rot: function(a) {
            this.rot += a;
            if (1.0E-4 < a * a) this.axisx = Math.sin(this.rot), this.axisy = Math.cos(this.rot), null;
            else {
                var b = a * a,
                    c = 1 - 0.5 * b,
                    b = 1 - b * b / 8,
                    d = (c * this.axisx + a * this.axisy) *
                    b;
                this.axisy = (c * this.axisy - a * this.axisx) * b;
                this.axisx = d
            }
        },
        invalidate_mass: function() { this.zip_mass = !0;
            this.invalidate_gravMass() },
        validate_mass: function() {
            if (this.zip_mass) {
                this.zip_mass = !1;
                if (this.massMode == h.id_MassMode_DEFAULT) { this.cmass = 0; for (var a = this.shapes.head; null != a;) { var b = a.elt;
                        b.refmaterial.density = b.material.density;
                        b.validate_area_inertia();
                        this.cmass += b.area * b.material.density;
                        a = a.next } } this.type == h.id_BodyType_DYNAMIC && !this.nomove ? (this.mass = this.cmass, this.imass = this.smass = 1 /
                    this.mass) : (this.mass = Math.POSITIVE_INFINITY, this.imass = this.smass = 0)
            }
        },
        invalidate_gravMass: function() { this.gravMassMode != h.id_GravMassMode_FIXED && (this.zip_gravMass = !0);
            this.gravMassMode != h.id_GravMassMode_SCALED && (this.zip_gravMassScale = !0);
            this.wake() },
        validate_gravMass: function() {
            this.zip_gravMass && (this.zip_gravMass = !1, this.validate_mass(), this.gravMassMode == h.id_GravMassMode_DEFAULT ? (this.validate_mass(), this.gravMass = this.cmass) : this.gravMassMode == h.id_GravMassMode_SCALED && (this.validate_mass(),
                this.gravMass = this.cmass * this.gravMassScale))
        },
        invalidate_gravMassScale: function() { this.gravMassMode != h.id_GravMassMode_SCALED ? this.zip_gravMassScale = !0 : this.invalidate_gravMass() },
        validate_gravMassScale: function() { this.zip_gravMassScale && (this.zip_gravMassScale = !1, this.gravMassMode == h.id_GravMassMode_DEFAULT ? this.gravMassScale = 1 : this.gravMassMode == h.id_GravMassMode_FIXED && (this.validate_mass(), this.gravMassScale = this.gravMass / this.cmass)) },
        invalidate_inertia: function() { this.zip_inertia = !0;
            this.wake() },
        validate_inertia: function() { if (this.zip_inertia) { this.zip_inertia = !1; if (this.inertiaMode == h.id_InertiaMode_DEFAULT) { this.cinertia = 0; for (var a = this.shapes.head; null != a;) { var b = a.elt;
                        b.refmaterial.density = b.material.density;
                        b.validate_area_inertia();
                        this.cinertia += b.inertia * b.area * b.material.density;
                        a = a.next } } this.type == h.id_BodyType_DYNAMIC && !this.norotate ? (this.inertia = this.cinertia, this.sinertia = this.iinertia = 1 / this.inertia) : (this.inertia = Math.POSITIVE_INFINITY, this.sinertia = this.iinertia = 0) } },
        validate_aabb: function() {
            if (this.zip_aabb) {
                this.zip_aabb = !1;
                this.aabb.minx = Math.POSITIVE_INFINITY;
                this.aabb.miny = Math.POSITIVE_INFINITY;
                this.aabb.maxx = Math.NEGATIVE_INFINITY;
                this.aabb.maxy = Math.NEGATIVE_INFINITY;
                for (var a = this.shapes.head; null != a;) { var b = a.elt;
                    b.zip_aabb && null != b.body && (b.zip_aabb = !1, b.type == h.id_ShapeType_CIRCLE ? b.circle.__validate_aabb() : b.polygon.__validate_aabb());
                    this.aabb.combine(b.aabb);
                    a = a.next }
            }
        },
        invalidate_localCOM: function() { this.zip_worldCOM = this.zip_localCOM = !0 },
        validate_localCOM: function() {
            if (this.zip_localCOM) {
                this.zip_localCOM = !1;
                for (var a = 0, b = 0, c = 0, d = this.shapes.head; null != d;) { var e = d.elt;
                    e.zip_localCOM && (e.zip_localCOM = !1, e.type == h.id_ShapeType_POLYGON && e.polygon.__validate_localCOM(), null != e.wrap_localCOM && (e.wrap_localCOM.zpp_inner.x = e.localCOMx, e.wrap_localCOM.zpp_inner.y = e.localCOMy));
                    e.validate_area_inertia(); var f = e.area * e.material.density,
                        a = a + e.localCOMx * f,
                        b = b + e.localCOMy * f,
                        c = c + e.area * e.material.density,
                        d = d.next } 0 != c && (d = 1 / c, this.localCOMx = a * d, this.localCOMy = b * d);
                null != this.wrap_localCOM && (this.wrap_localCOM.zpp_inner.x =
                    this.localCOMx, this.wrap_localCOM.zpp_inner.y = this.localCOMy);
                this.zip_mass && this.massMode == h.id_MassMode_DEFAULT && (this.zip_mass = !1, this.cmass = c, this.type == h.id_BodyType_DYNAMIC ? (this.mass = this.cmass, this.imass = this.smass = 1 / this.mass) : (this.mass = Math.POSITIVE_INFINITY, this.imass = this.smass = 0))
            }
        },
        validate_worldCOM: function() {
            this.zip_worldCOM && (this.zip_worldCOM = !1, this.validate_localCOM(), this.zip_axis && (this.zip_axis = !1, this.axisx = Math.sin(this.rot), this.axisy = Math.cos(this.rot), null), this.worldCOMx =
                this.posx + (this.axisy * this.localCOMx - this.axisx * this.localCOMy), this.worldCOMy = this.posy + (this.localCOMx * this.axisx + this.localCOMy * this.axisy), null != this.wrap_worldCOM && (this.wrap_worldCOM.zpp_inner.x = this.worldCOMx, this.wrap_worldCOM.zpp_inner.y = this.worldCOMy))
        },
        aabb_validate: function() { this.validate_aabb() },
        shapes_adder: function(a) {
            return a.zpp_inner.body != this ? (null != a.zpp_inner.body && a.zpp_inner.body.wrap_shapes.remove(a), a.zpp_inner.body = this, a.zpp_inner.addedToBody(), null != this.space && this.space.added_shape(a.zpp_inner,
                null), a.zpp_inner.type == h.id_ShapeType_POLYGON && (a.zpp_inner.polygon.invalidate_gaxi(), a.zpp_inner.polygon.invalidate_gverts()), !0) : !1
        },
        shapes_subber: function(a) { null != this.space && this.space.removed_shape(a.zpp_inner);
            a.zpp_inner.body = null;
            a.zpp_inner.removedFromBody() },
        shapes_invalidate: function() { this.invalidate_shapes() },
        addedToSpace: function() {
            null == wc.zpp_pool ? this.component = new wc : (this.component = wc.zpp_pool, wc.zpp_pool = this.component.next, this.component.next = null);
            null;
            this.component.isBody = !0;
            this.component.body = this;
            this.__iaddedToSpace()
        },
        removedFromSpace: function() { for (; null != this.arbiters.head;) { var a = this.arbiters.pop_unsafe();
                a.cleared = !0;
                a.b2 == this && a.b1.arbiters.inlined_try_remove(a);
                a.b1 == this && a.b2.arbiters.inlined_try_remove(a);
                null != a.pair && (a.pair.arb = null, a.pair = null);
                a.active = !1;
                this.space.f_arbiters.modified = !0 } a = this.component;
            a.body = null;
            a.constraint = null;
            null;
            a.next = wc.zpp_pool;
            wc.zpp_pool = a;
            this.component = null;
            this.__iremovedFromSpace() },
        __class__: Ke
    });
    var Om = function() {
        this.compound =
            this.space = null;
        this.depth = 0;
        this.outer = this.bodies = this.constraints = this.compounds = this.wrap_constraints = null
    };
    g["zpp_nape.phys.ZPP_Compound"] = Om;
    Om.__name__ = ["zpp_nape", "phys", "ZPP_Compound"];
    Om.__super__ = cb;
    Om.prototype = l(cb.prototype, { __imutable_midstep: function() {}, addedToSpace: function() { this.__iaddedToSpace() }, removedFromSpace: function() { this.__iremovedFromSpace() }, __class__: Om });
    var kf = function() {
        this.wrap_gravity = null;
        this.viscosity = this.density = this.gravityx = this.gravityy = 0;
        this.next = this.outer =
            this.shapes = null;
        this.shapes = new Df;
        this.density = this.viscosity = 1;
        this.wrap_gravity = null;
        this.gravityy = this.gravityx = 0
    };
    g["zpp_nape.phys.ZPP_FluidProperties"] = kf;
    kf.__name__ = ["zpp_nape", "phys", "ZPP_FluidProperties"];
    kf.prototype = {
        wrapper: function() { if (null == this.outer) { this.outer = new ge; var a = this.outer.zpp_inner;
                a.outer = null;
                a.next = kf.zpp_pool;
                kf.zpp_pool = a;
                this.outer.zpp_inner = this } return this.outer },
        invalidate: function() { for (var a = this.shapes.head; null != a;) a.elt.invalidate_fluidprops(), a = a.next },
        __class__: kf
    };
    var Se = function(a) {
        this.zip_aabb = !1;
        this.sweep = this.node = this.pairs = this.aabb = null;
        this.fluidEnabled = this.sensorEnabled = !1;
        this.circle = this.polygon = this.refmaterial = this.material = this.filter = this.fluidProperties = null;
        this.sweepCoef = 0;
        this.zip_sweepRadius = !1;
        this.sweepRadius = 0;
        this.wrap_localCOM = null;
        this.zip_worldCOM = !1;
        this.worldCOMx = this.worldCOMy = 0;
        this.zip_localCOM = !1;
        this.localCOMx = this.localCOMy = 0;
        this.zip_angDrag = !1;
        this.inertia = this.angDrag = 0;
        this.zip_area_inertia = !1;
        this.type =
            this.area = 0;
        this.outer = this.body = null;
        cb.call(this);
        this.pairs = new Pm;
        this.ishape = this;
        this.type = a;
        this.aabb = Wa.get(0, 0, 0, 0);
        this.aabb._immutable = !0;
        this.aabb._validate = n(this, this.aabb_validate);
        this.zip_area_inertia = this.zip_angDrag = this.zip_localCOM = this.zip_sweepRadius = !0;
        this.worldCOMy = this.worldCOMx = this.localCOMy = this.localCOMx = 0;
        this.sensorEnabled = this.fluidEnabled = !1;
        this.body = this.fluidProperties = null;
        this.refmaterial = new sa;
        this.sweepRadius = this.sweepCoef = 0
    };
    g["zpp_nape.shape.ZPP_Shape"] =
        Se;
    Se.__name__ = ["zpp_nape", "shape", "ZPP_Shape"];
    Se.__super__ = cb;
    Se.prototype = l(cb.prototype, {
        validate_sweepRadius: function() { this.zip_sweepRadius && (this.zip_sweepRadius = !1, this.type == h.id_ShapeType_CIRCLE ? this.circle.__validate_sweepRadius() : this.polygon.__validate_sweepRadius()) },
        validate_area_inertia: function() { this.zip_area_inertia && (this.zip_area_inertia = !1, this.type == h.id_ShapeType_CIRCLE ? this.circle.__validate_area_inertia() : this.polygon.__validate_area_inertia()) },
        validate_angDrag: function() {
            if (this.zip_angDrag ||
                this.refmaterial.dynamicFriction != this.material.dynamicFriction) this.zip_angDrag = !1, this.refmaterial.dynamicFriction = this.material.dynamicFriction, this.type == h.id_ShapeType_CIRCLE ? this.circle.__validate_angDrag() : this.polygon.__validate_angDrag()
        },
        validate_worldCOM: function() {
            this.zip_worldCOM && null != this.body && (this.zip_worldCOM = !1, this.zip_localCOM && (this.zip_localCOM = !1, this.type == h.id_ShapeType_POLYGON && this.polygon.__validate_localCOM(), null != this.wrap_localCOM && (this.wrap_localCOM.zpp_inner.x =
                this.localCOMx, this.wrap_localCOM.zpp_inner.y = this.localCOMy)), this.body.validate_axis(), this.worldCOMx = this.body.posx + (this.body.axisy * this.localCOMx - this.body.axisx * this.localCOMy), this.worldCOMy = this.body.posy + (this.localCOMx * this.body.axisx + this.localCOMy * this.body.axisy))
        },
        invalidate_area_inertia: function() { this.zip_area_inertia = !0;
            null != this.body && (this.body.invalidate_localCOM(), this.body.invalidate_mass(), this.body.invalidate_inertia()) },
        invalidate_angDrag: function() { this.zip_angDrag = !0 },
        invalidate_localCOM: function() { this.zip_localCOM = !0;
            this.invalidate_area_inertia();
            this.type == h.id_ShapeType_CIRCLE && (this.zip_sweepRadius = !0);
            this.invalidate_angDrag();
            this.invalidate_worldCOM();
            null != this.body && this.body.invalidate_localCOM() },
        invalidate_worldCOM: function() { this.zip_aabb = this.zip_worldCOM = !0;
            null != this.body && (this.body.zip_aabb = !0) },
        invalidate_material: function(a) {
            0 != (a & sa.WAKE) && this.wake();
            0 != (a & sa.ARBITERS) && null != this.body && this.body.refreshArbiters();
            0 != (a & sa.PROPS) && null !=
                this.body && (this.body.invalidate_localCOM(), this.body.invalidate_mass(), this.body.invalidate_inertia());
            0 != (a & sa.ANGDRAG) && this.invalidate_angDrag();
            this.refmaterial.set(this.material)
        },
        invalidate_filter: function() { this.wake() },
        invalidate_fluidprops: function() { this.fluidEnabled && this.wake() },
        aabb_validate: function() { this.zip_aabb && null != this.body && (this.zip_aabb = !1, this.type == h.id_ShapeType_CIRCLE ? this.circle.__validate_aabb() : this.polygon.__validate_aabb()) },
        setMaterial: function(a) {
            this.material !=
                a && (null != this.body && null != this.body.space && null != this.material && this.material.shapes.remove(this), this.material = a, null != this.body && null != this.body.space && a.shapes.add(this), this.wake(), null != this.body && this.body.refreshArbiters())
        },
        setFilter: function(a) { this.filter != a && (null != this.body && null != this.body.space && null != this.filter && this.filter.shapes.remove(this), this.filter = a, null != this.body && null != this.body.space && a.shapes.add(this), this.wake()) },
        setFluid: function(a) {
            this.fluidProperties != a && (null !=
                this.body && null != this.body.space && null != this.fluidProperties && this.fluidProperties.shapes.remove(this), this.fluidProperties = a, null != this.body && null != this.body.space && a.shapes.add(this), this.fluidEnabled && this.wake())
        },
        __immutable_midstep: function() {},
        addedToBody: function() { this.invalidate_worldCOM();
            this.zip_aabb = !0;
            null != this.body && (this.body.zip_aabb = !0) },
        removedFromBody: function() {},
        addedToSpace: function() {
            this.__iaddedToSpace();
            this.material.shapes.add(this);
            this.filter.shapes.add(this);
            null !=
                this.fluidProperties && this.fluidProperties.shapes.add(this)
        },
        removedFromSpace: function() { this.__iremovedFromSpace();
            this.material.shapes.remove(this);
            this.filter.shapes.remove(this);
            null != this.fluidProperties && this.fluidProperties.shapes.remove(this) },
        __class__: Se
    });
    var Qj = function() { this.radius = 0;
        this.outer_zn = null;
        Se.call(this, h.id_ShapeType_CIRCLE);
        this.circle = this;
        this.zip_localCOM = !1 };
    g["zpp_nape.shape.ZPP_Circle"] = Qj;
    Qj.__name__ = ["zpp_nape", "shape", "ZPP_Circle"];
    Qj.__super__ = Se;
    Qj.prototype =
        l(Se.prototype, {
            invalidate_radius: function() { this.invalidate_area_inertia();
                this.invalidate_angDrag();
                this.zip_aabb = !0;
                null != this.body && (this.body.zip_aabb = !0);
                null != this.body && this.body.wake() },
            localCOM_validate: function() { this.wrap_localCOM.zpp_inner.x = this.localCOMx;
                this.wrap_localCOM.zpp_inner.y = this.localCOMy },
            localCOM_invalidate: function(a) { this.localCOMx = a.x;
                this.localCOMy = a.y;
                this.invalidate_localCOM();
                null != this.body && this.body.wake() },
            setupLocalCOM: function() {
                this.wrap_localCOM = fa.get(this.localCOMx,
                    this.localCOMy, null);
                this.wrap_localCOM.zpp_inner._inuse = !0;
                this.wrap_localCOM.zpp_inner._validate = n(this, this.localCOM_validate);
                this.wrap_localCOM.zpp_inner._invalidate = n(this, this.localCOM_invalidate)
            },
            __validate_aabb: function() {
                this.zip_worldCOM && null != this.body && (this.zip_worldCOM = !1, this.zip_localCOM && (this.zip_localCOM = !1, this.type == h.id_ShapeType_POLYGON && this.polygon.__validate_localCOM(), null != this.wrap_localCOM && (this.wrap_localCOM.zpp_inner.x = this.localCOMx, this.wrap_localCOM.zpp_inner.y =
                    this.localCOMy)), this.body.validate_axis(), this.worldCOMx = this.body.posx + (this.body.axisy * this.localCOMx - this.body.axisx * this.localCOMy), this.worldCOMy = this.body.posy + (this.localCOMx * this.body.axisx + this.localCOMy * this.body.axisy));
                var a = this.radius,
                    b = this.radius;
                this.aabb.minx = this.worldCOMx - a;
                this.aabb.miny = this.worldCOMy - b;
                this.aabb.maxx = this.worldCOMx + a;
                this.aabb.maxy = this.worldCOMy + b
            },
            _force_validate_aabb: function() {
                this.worldCOMx = this.body.posx + (this.body.axisy * this.localCOMx - this.body.axisx *
                    this.localCOMy);
                this.worldCOMy = this.body.posy + (this.localCOMx * this.body.axisx + this.localCOMy * this.body.axisy);
                this.aabb.minx = this.worldCOMx - this.radius;
                this.aabb.miny = this.worldCOMy - this.radius;
                this.aabb.maxx = this.worldCOMx + this.radius;
                this.aabb.maxy = this.worldCOMy + this.radius
            },
            __validate_sweepRadius: function() { this.sweepCoef = Math.sqrt(this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy);
                this.sweepRadius = this.sweepCoef + this.radius },
            __validate_area_inertia: function() {
                var a = this.radius * this.radius;
                this.area = a * Math.PI;
                this.inertia = 0.5 * a + (this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy)
            },
            __validate_angDrag: function() { var a = this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy,
                    b = this.radius * this.radius;
                this.angDrag = (a + 2 * b) * this.material.dynamicFriction * t.fluidAngularDragFriction + 0.5 * t.fluidAngularDrag * (1 + t.fluidVacuumDrag) * a;
                this.angDrag /= 2 * (a + 0.5 * b) },
            __rotate: function(a, b) {
                if (0 < this.localCOMx * this.localCOMx + this.localCOMy * this.localCOMy) {
                    var c = 0,
                        d = 0,
                        c = b * this.localCOMx - a * this.localCOMy,
                        d = this.localCOMx * a + this.localCOMy * b;
                    this.localCOMx = c;
                    this.localCOMy = d;
                    this.invalidate_localCOM()
                }
            },
            __class__: Qj
        });
    var ua = function() { this.tp0 = this.tp1 = 0;
        this.lp0 = this.gp0 = this.lp1 = this.gp1 = null;
        this.length = this.lprojection = this.gprojection = 0;
        this.wrap_gnorm = null;
        this.gnormx = this.gnormy = 0;
        this.wrap_lnorm = null;
        this.lnormx = this.lnormy = 0;
        this.next = this.polygon = this.outer = null;
        this.gprojection = this.lprojection = this.length = this.gnormy = this.gnormx = this.lnormy = this.lnormx = 0 };
    g["zpp_nape.shape.ZPP_Edge"] = ua;
    ua.__name__ = ["zpp_nape", "shape", "ZPP_Edge"];
    ua.prototype = { wrapper: function() { null == this.outer && (ua.internal = !0, this.outer = new mm, ua.internal = !1, this.outer.zpp_inner = this); return this.outer }, __class__: ua };
    var Sj = function() {
        this.reverse_flag = this.zip_lverts = this.zip_laxi = this.zip_gverts = this.zip_gaxi = this.zip_valid = this.zip_sanitation = !1;
        this.edgeCnt = 0;
        this.outer_zn = this.lverts = this.wrap_lverts = this.gverts = this.wrap_gverts = this.edges = this.wrap_edges = null;
        Se.call(this, h.id_ShapeType_POLYGON);
        this.polygon =
            this;
        this.lverts = new xa;
        this.gverts = new xa;
        this.edges = new Qm;
        this.edgeCnt = 0
    };
    g["zpp_nape.shape.ZPP_Polygon"] = Sj;
    Sj.__name__ = ["zpp_nape", "shape", "ZPP_Polygon"];
    Sj.__super__ = Se;
    Sj.prototype = l(Se.prototype, {
        lverts_pa_invalidate: function() { this.invalidate_lverts() },
        gverts_pa_validate: function() { this.validate_gverts() },
        lverts_post_adder: function(a) {
            a.zpp_inner._invalidate = n(this, this.lverts_pa_invalidate);
            for (var b = null, c = null, d = this.lverts.next; null != d && !(d == a.zpp_inner);) {
                b = null == b ? this.gverts.next :
                    b.next, c = null == c ? this.edges.head : c.next;
                d = d.next
            }
            a = xa.get(0, 0, !0);
            this.gverts.insert(b, a);
            null != this.lverts.next.next && (null == this.lverts.next.next.next ? (null == ua.zpp_pool ? c = new ua : (c = ua.zpp_pool, ua.zpp_pool = c.next, c.next = null), null, c.polygon = this, this.edges.add(c), null == ua.zpp_pool ? c = new ua : (c = ua.zpp_pool, ua.zpp_pool = c.next, c.next = null), null, c.polygon = this, this.edges.add(c), this.edgeCnt += 2) : (null == ua.zpp_pool ? b = new ua : (b = ua.zpp_pool, ua.zpp_pool = b.next, b.next = null), null, b.polygon = this, this.edges.insert(c,
                b), this.edgeCnt++));
            a._validate = n(this, this.gverts_pa_validate)
        },
        lverts_subber: function(a) { this.cleanup_lvert(a.zpp_inner) },
        lverts_invalidate: function() { this.invalidate_lverts() },
        lverts_validate: function() { this.validate_lverts() },
        getlverts: function() {
            this.wrap_lverts = Ag.get(this.lverts);
            this.wrap_lverts.zpp_inner.post_adder = n(this, this.lverts_post_adder);
            this.wrap_lverts.zpp_inner.subber = n(this, this.lverts_subber);
            this.wrap_lverts.zpp_inner._invalidate = n(this, this.lverts_invalidate);
            this.wrap_lverts.zpp_inner._validate =
                n(this, this.lverts_validate);
            this.wrap_lverts.zpp_inner.reverse_flag = this.reverse_flag
        },
        invalidate_lverts: function() { this.invalidate_laxi();
            this.invalidate_area_inertia();
            this.invalidate_angDrag();
            this.invalidate_localCOM();
            this.invalidate_gverts();
            this.zip_sanitation = this.zip_valid = this.zip_lverts = !0;
            null != this.body && this.body.wake() },
        invalidate_laxi: function() { this.invalidate_gaxi();
            this.zip_laxi = this.zip_sweepRadius = !0 },
        invalidate_gverts: function() {
            this.zip_aabb = !0;
            null != this.body && (this.body.zip_aabb = !0);
            this.zip_gverts = !0
        },
        invalidate_gaxi: function() { this.zip_gaxi = !0 },
        validate_lverts: function() { this.zip_lverts && (this.zip_lverts = !1, 2 < this.lverts.length && (this.validate_area_inertia(), 0 > this.area && (this.reverse_vertices(), this.area = -this.area))) },
        cleanup_lvert: function(a) {
            for (var b = null, c = null, d = this.lverts.next; null != d && !(d == a);) { b = null == b ? this.gverts.next : b.next, c = null == c ? this.edges.head : c.next;
                d = d.next } a = null == b ? this.gverts.next : b.next;
            this.gverts.erase(b);
            null != a.outer && (a.outer.zpp_inner = null,
                a.outer = null);
            a._isimmutable = null;
            a._validate = null;
            a._invalidate = null;
            a.next = xa.zpp_pool;
            xa.zpp_pool = a;
            2 == this.edgeCnt ? (c = this.edges.pop_unsafe(), c.polygon = null, c.next = ua.zpp_pool, ua.zpp_pool = c, c = this.edges.pop_unsafe(), c.polygon = null, c.next = ua.zpp_pool, ua.zpp_pool = c, this.edgeCnt = 0) : 0 != this.edgeCnt && (b = null == c ? this.edges.head.elt : c.next.elt, this.edges.erase(c), b.polygon = null, b.next = ua.zpp_pool, ua.zpp_pool = b, this.edgeCnt--)
        },
        splice_collinear: function() {
            this.zip_sanitation && (this.zip_sanitation = !1,
                this.splice_collinear_real())
        },
        splice_collinear_real: function() {
            if (!(null == this.lverts.next || null == this.lverts.next.next) && null != this.lverts.next.next.next) {
                for (var a = null, b = this.lverts.next; null != b;) { var c = b,
                        d = null == b.next ? this.lverts.next : b.next;
                    qb.vec_dsq(c.x, c.y, d.x, d.y) < t.epsilon * t.epsilon ? (this.cleanup_lvert(b), b = this.lverts.erase(a)) : (a = b, b = b.next) }
                if (null != this.lverts.next) {
                    do {
                        a = !1;
                        for (b = this.lverts.next; null != b;) {
                            var c = null == b.next ? this.lverts.next : b.next,
                                e = b,
                                d = c,
                                f = null == c.next ? this.lverts.next :
                                c.next,
                                h = 0,
                                g = 0,
                                h = d.x - e.x,
                                g = d.y - e.y,
                                i = e = 0,
                                e = f.x - d.x,
                                i = f.y - d.y,
                                d = i * h - e * g;
                            d * d >= t.epsilon * t.epsilon || (this.cleanup_lvert(c), this.lverts.erase(null == b.next ? null : b), a = !0);
                            b = b.next
                        }
                    } while (a)
                }
            }
        },
        reverse_vertices: function() {
            this.lverts.reverse();
            this.gverts.reverse();
            this.edges.reverse();
            var a = this.edges.iterator_at(this.edgeCnt - 1),
                b = this.edges.pop_unsafe();
            this.edges.insert(a, b);
            this.reverse_flag = !this.reverse_flag;
            null != this.wrap_lverts && (this.wrap_lverts.zpp_inner.reverse_flag = this.reverse_flag);
            null !=
                this.wrap_gverts && (this.wrap_gverts.zpp_inner.reverse_flag = this.reverse_flag);
            null != this.wrap_edges && (this.wrap_edges.zpp_inner.reverse_flag = this.reverse_flag)
        },
        validate_laxi: function() {
            if (this.zip_laxi) {
                this.zip_laxi = !1;
                this.validate_lverts();
                for (var a = this.edges.head, b = this.lverts.next, c = b, b = b.next; null != b;) {
                    var d = b,
                        e = a.elt,
                        a = a.next;
                    e.lp0 = c;
                    e.lp1 = d;
                    var f = 0,
                        h = 0,
                        f = c.x - d.x,
                        h = c.y - d.y,
                        g = Math.sqrt(f * f + h * h);
                    e.length = g;
                    g = 1 / g;
                    f *= g;
                    h *= g;
                    g = f;
                    f = -h;
                    h = g;
                    e.lprojection = f * c.x + h * c.y;
                    e.lnormx = f;
                    e.lnormy = h;
                    null != e.wrap_lnorm &&
                        (e.wrap_lnorm.zpp_inner.x = f, e.wrap_lnorm.zpp_inner.y = h);
                    c = d;
                    b = b.next
                }
                e = this.lverts.next;
                a = a.elt;
                a.lp0 = c;
                a.lp1 = e;
                d = b = 0;
                b = c.x - e.x;
                d = c.y - e.y;
                e = Math.sqrt(b * b + d * d);
                a.length = e;
                e = 1 / e;
                f = b * e;
                b = -(d * e);
                d = f;
                a.lprojection = b * c.x + d * c.y;
                a.lnormx = b;
                a.lnormy = d;
                null != a.wrap_lnorm && (a.wrap_lnorm.zpp_inner.x = b, a.wrap_lnorm.zpp_inner.y = d)
            }
        },
        validate_gverts: function() {
            if (this.zip_gverts && null != this.body) {
                this.zip_gverts = !1;
                this.validate_lverts();
                this.body.validate_axis();
                for (var a = this.lverts.next, b = this.gverts.next; null !=
                    b;) { var c = b,
                        d = a,
                        a = a.next;
                    c.x = this.body.posx + (this.body.axisy * d.x - this.body.axisx * d.y);
                    c.y = this.body.posy + (d.x * this.body.axisx + d.y * this.body.axisy);
                    b = b.next }
            }
        },
        validate_gaxi: function() {
            if (this.zip_gaxi && null != this.body) {
                this.zip_gaxi = !1;
                this.validate_laxi();
                this.body.validate_axis();
                this.validate_gverts();
                for (var a = this.edges.head, b = this.gverts.next, c = b, b = b.next; null != b;) {
                    var d = b,
                        e = a.elt,
                        a = a.next;
                    e.gp0 = c;
                    e.gp1 = d;
                    e.gnormx = this.body.axisy * e.lnormx - this.body.axisx * e.lnormy;
                    e.gnormy = e.lnormx * this.body.axisx +
                        e.lnormy * this.body.axisy;
                    e.gprojection = this.body.posx * e.gnormx + this.body.posy * e.gnormy + e.lprojection;
                    null != e.wrap_gnorm && (e.wrap_gnorm.zpp_inner.x = e.gnormx, e.wrap_gnorm.zpp_inner.y = e.gnormy);
                    e.tp0 = e.gp0.y * e.gnormx - e.gp0.x * e.gnormy;
                    e.tp1 = e.gp1.y * e.gnormx - e.gp1.x * e.gnormy;
                    c = d;
                    b = b.next
                }
                b = this.gverts.next;
                a = a.elt;
                a.gp0 = c;
                a.gp1 = b;
                a.gnormx = this.body.axisy * a.lnormx - this.body.axisx * a.lnormy;
                a.gnormy = a.lnormx * this.body.axisx + a.lnormy * this.body.axisy;
                a.gprojection = this.body.posx * a.gnormx + this.body.posy * a.gnormy +
                    a.lprojection;
                null != a.wrap_gnorm && (a.wrap_gnorm.zpp_inner.x = a.gnormx, a.wrap_gnorm.zpp_inner.y = a.gnormy);
                a.tp0 = a.gp0.y * a.gnormx - a.gp0.x * a.gnormy;
                a.tp1 = a.gp1.y * a.gnormx - a.gp1.x * a.gnormy
            }
        },
        __validate_aabb: function() {
            this.validate_gverts();
            var a = this.gverts.next;
            this.aabb.minx = a.x;
            this.aabb.miny = a.y;
            this.aabb.maxx = a.x;
            this.aabb.maxy = a.y;
            for (a = this.gverts.next.next; null != a;) {
                var b = a;
                b.x < this.aabb.minx && (this.aabb.minx = b.x);
                b.x > this.aabb.maxx && (this.aabb.maxx = b.x);
                b.y < this.aabb.miny && (this.aabb.miny = b.y);
                b.y > this.aabb.maxy && (this.aabb.maxy = b.y);
                a = a.next
            }
        },
        _force_validate_aabb: function() {
            var a = this.lverts.next,
                b = this.gverts.next,
                c = a,
                a = a.next;
            b.x = this.body.posx + (this.body.axisy * c.x - this.body.axisx * c.y);
            b.y = this.body.posy + (c.x * this.body.axisx + c.y * this.body.axisy);
            this.aabb.minx = b.x;
            this.aabb.miny = b.y;
            this.aabb.maxx = b.x;
            this.aabb.maxy = b.y;
            for (b = this.gverts.next.next; null != b;) {
                var c = b,
                    d = a,
                    a = a.next;
                c.x = this.body.posx + (this.body.axisy * d.x - this.body.axisx * d.y);
                c.y = this.body.posy + (d.x * this.body.axisx + d.y *
                    this.body.axisy);
                c.x < this.aabb.minx && (this.aabb.minx = c.x);
                c.x > this.aabb.maxx && (this.aabb.maxx = c.x);
                c.y < this.aabb.miny && (this.aabb.miny = c.y);
                c.y > this.aabb.maxy && (this.aabb.maxy = c.y);
                b = b.next
            }
        },
        __validate_sweepRadius: function() {
            var a = 0,
                b = 0;
            this.validate_laxi();
            for (var c = this.lverts.next; null != c;) { var d = c,
                    d = d.x * d.x + d.y * d.y;
                d > a && (a = d);
                c = c.next }
            for (c = this.edges.head; null != c;) { d = c.elt; if (d.lprojection < b && (b = d.lprojection, 0 > b)) break;
                c = c.next } 0 > b && (b = 0);
            this.sweepRadius = Math.sqrt(a);
            this.sweepCoef = this.sweepRadius -
                b
        },
        __validate_area_inertia: function() {
            if (null == this.lverts.next || null == this.lverts.next.next || null == this.lverts.next.next.next) this.inertia = this.area = 0;
            else {
                for (var a = this.area = 0, b = 0, c = this.lverts.next, d = c, e = c = c.next, c = c.next; null != c;) { var f = c,
                        h = e.y * d.x - e.x * d.y,
                        a = a + h * (e.x * e.x + e.y * e.y + (e.x * d.x + e.y * d.y) + (d.x * d.x + d.y * d.y)),
                        b = b + h;
                    this.area += e.x * (f.y - d.y);
                    d = e;
                    e = f;
                    c = c.next } h = c = this.lverts.next;
                f = e.y * d.x - e.x * d.y;
                a += f * (e.x * e.x + e.y * e.y + (e.x * d.x + e.y * d.y) + (d.x * d.x + d.y * d.y));
                this.area += e.x * (h.y - d.y);
                d = e;
                e = h;
                c = c.next;
                h = e.y * d.x - e.x * d.y;
                a += h * (e.x * e.x + e.y * e.y + (e.x * d.x + e.y * d.y) + (d.x * d.x + d.y * d.y));
                this.area += e.x * (c.y - d.y);
                this.inertia = a / (6 * (b + f + h));
                this.area *= 0.5;
                0 > this.area && (this.area = -this.area, this.reverse_vertices())
            }
        },
        __validate_angDrag: function() {
            this.validate_area_inertia();
            this.validate_laxi();
            for (var a = 0, b = this.edges.head, c = 0, d = this.lverts.next, e = d, d = d.next; null != d;) {
                var f = d,
                    h = b.elt,
                    b = b.next,
                    c = c + h.length,
                    g = 0,
                    i = 0,
                    g = f.x - e.x,
                    i = f.y - e.y,
                    a = a + h.length * t.fluidAngularDragFriction * this.material.dynamicFriction *
                    h.lprojection * h.lprojection,
                    k = -(e.y * h.lnormx - e.x * h.lnormy) / (i * h.lnormx - g * h.lnormy);
                if (0 < k) { var l;
                    l = 1 < k ? 1 : k; var m = 0,
                        n = 0,
                        m = e.x,
                        n = e.y,
                        o = l,
                        m = m + g * o,
                        n = n + i * o,
                        o = h.lnormy * e.x - h.lnormx * e.y,
                        m = h.lnormy * m - h.lnormx * n,
                        a = a + (m * m * m - o * o * o) / (3 * (m - o)) * l * h.length * t.fluidAngularDrag } 1 > k && (k = 0 > k ? 0 : k, m = l = 0, l = e.x, m = e.y, e = k, l += g * e, m += i * e, e = h.lnormy * l - h.lnormx * m, g = h.lnormy * f.x - h.lnormx * f.y, a += (g * g * g - e * e * e) / (3 * (g - e)) * t.fluidVacuumDrag * (1 - k) * h.length * t.fluidAngularDrag);
                e = f;
                d = d.next
            }
            d = this.lverts.next;
            b = b.elt;
            c += b.length;
            h = f =
                0;
            f = d.x - e.x;
            h = d.y - e.y;
            a += b.length * t.fluidAngularDragFriction * this.material.dynamicFriction * b.lprojection * b.lprojection;
            g = -(e.y * b.lnormx - e.x * b.lnormy) / (h * b.lnormx - f * b.lnormy);
            0 < g && (i = 1 < g ? 1 : g, m = l = 0, l = e.x, m = e.y, k = b.lnormy * e.x - b.lnormx * e.y, l = b.lnormy * (l + f * i) - b.lnormx * (m + h * i), a += (l * l * l - k * k * k) / (3 * (l - k)) * i * b.length * t.fluidAngularDrag);
            1 > g && (g = 0 > g ? 0 : g, k = i = 0, i = e.x, k = e.y, e = b.lnormy * (i + f * g) - b.lnormx * (k + h * g), d = b.lnormy * d.x - b.lnormx * d.y, a += (d * d * d - e * e * e) / (3 * (d - e)) * t.fluidVacuumDrag * (1 - g) * b.length * t.fluidAngularDrag);
            this.angDrag = a / (this.inertia * c)
        },
        __validate_localCOM: function() {
            if (null == this.lverts.next.next) this.localCOMx = this.lverts.next.x, this.localCOMy = this.lverts.next.y;
            else if (null == this.lverts.next.next.next) this.localCOMx = this.lverts.next.x, this.localCOMy = this.lverts.next.y, this.localCOMx += 1 * this.lverts.next.next.x, this.localCOMy += 1 * this.lverts.next.next.y, this.localCOMx *= 0.5, this.localCOMy *= 0.5;
            else {
                for (var a = this.localCOMy = this.localCOMx = 0, b = this.lverts.next, c = b, d = b = b.next, b = b.next; null != b;) {
                    var e =
                        b,
                        a = a + d.x * (e.y - c.y),
                        c = e.y * d.x - e.x * d.y;
                    this.localCOMx += (d.x + e.x) * c;
                    this.localCOMy += (d.y + e.y) * c;
                    c = d;
                    d = e;
                    b = b.next
                }
                e = b = this.lverts.next;
                a += d.x * (e.y - c.y);
                c = e.y * d.x - e.x * d.y;
                this.localCOMx += (d.x + e.x) * c;
                this.localCOMy += (d.y + e.y) * c;
                c = d;
                d = e;
                b = b.next;
                a += d.x * (b.y - c.y);
                c = b.y * d.x - b.x * d.y;
                this.localCOMx += (d.x + b.x) * c;
                this.localCOMy += (d.y + b.y) * c;
                a = 1 / (3 * a);
                this.localCOMx *= a;
                this.localCOMy *= a
            }
        },
        localCOM_validate: function() {
            this.zip_localCOM && (this.zip_localCOM = !1, this.type == h.id_ShapeType_POLYGON && this.polygon.__validate_localCOM(),
                null != this.wrap_localCOM && (this.wrap_localCOM.zpp_inner.x = this.localCOMx, this.wrap_localCOM.zpp_inner.y = this.localCOMy))
        },
        localCOM_invalidate: function(a) {
            this.zip_localCOM && (this.zip_localCOM = !1, this.type == h.id_ShapeType_POLYGON && this.polygon.__validate_localCOM(), null != this.wrap_localCOM && (this.wrap_localCOM.zpp_inner.x = this.localCOMx, this.wrap_localCOM.zpp_inner.y = this.localCOMy));
            for (var b = 0, c = 0, b = a.x - this.localCOMx, c = a.y - this.localCOMy, a = this.lverts.next; null != a;) {
                var d = a;
                d.x += 1 * b;
                d.y += 1 * c;
                a =
                    a.next
            }
            this.invalidate_lverts()
        },
        setupLocalCOM: function() { this.wrap_localCOM = fa.get(this.localCOMx, this.localCOMy, null);
            this.wrap_localCOM.zpp_inner._inuse = !0;
            this.wrap_localCOM.zpp_inner._validate = n(this, this.localCOM_validate);
            this.wrap_localCOM.zpp_inner._invalidate = n(this, this.localCOM_invalidate) },
        __rotate: function(a, b) { for (var c = this.lverts.next; null != c;) { var d = c,
                    e = 0,
                    f = 0,
                    e = b * d.x - a * d.y,
                    f = d.x * a + d.y * b;
                d.x = e;
                d.y = f;
                c = c.next } this.invalidate_lverts() },
        __class__: Sj
    });
    var rf = function() {
        this.sweep = this.dynab =
            null;
        this.is_sweep = !1;
        this.space = null
    };
    g["zpp_nape.space.ZPP_Broadphase"] = rf;
    rf.__name__ = ["zpp_nape", "space", "ZPP_Broadphase"];
    rf.prototype = {
        insert: function(a) { this.is_sweep ? this.sweep.__insert(a) : this.dynab.__insert(a) },
        remove: function(a) { this.is_sweep ? this.sweep.__remove(a) : this.dynab.__remove(a) },
        sync: function(a) { this.is_sweep ? !this.sweep.space.continuous && a.zip_aabb && null != a.body && (a.zip_aabb = !1, a.type == h.id_ShapeType_CIRCLE ? a.circle.__validate_aabb() : a.polygon.__validate_aabb()) : this.dynab.__sync(a) },
        broadphase: function() {},
        clear: function() {},
        __class__: rf
    };
    var Ub = function() { this.synced = this.first_sync = !1;
        this.snext = null;
        this.moved = !1;
        this.next = this.mnext = null;
        this.height = 0;
        this.parent = this.child1 = this.child2 = null;
        this.dyn = !1;
        this.aabb = this.shape = null;
        this.height = -1 };
    g["zpp_nape.space.ZPP_AABBNode"] = Ub;
    Ub.__name__ = ["zpp_nape", "space", "ZPP_AABBNode"];
    Ub.prototype = {
        free: function() {
            this.height = -1;
            var a = this.aabb;
            null != a.outer && (a.outer.zpp_inner = null, a.outer = null);
            a.wrap_min = a.wrap_max = null;
            a._invalidate =
                null;
            a._validate = null;
            a.next = Wa.zpp_pool;
            Wa.zpp_pool = a;
            this.mnext = this.snext = this.next = this.child1 = this.child2 = this.parent = null
        },
        __class__: Ub
    };
    var Ya = function() { this.arb = this.next = null;
        this.id = this.di = 0;
        this.first = this.sleeping = !1;
        this.n1 = this.n2 = null };
    g["zpp_nape.space.ZPP_AABBPair"] = Ya;
    Ya.__name__ = ["zpp_nape", "space", "ZPP_AABBPair"];
    Ya.prototype = { __class__: Ya };
    var Oc = function() { this.root = null };
    g["zpp_nape.space.ZPP_AABBTree"] = Oc;
    Oc.__name__ = ["zpp_nape", "space", "ZPP_AABBTree"];
    Oc.prototype = {
        clear: function() {
            if (null !=
                this.root) { var a;
                this.root.next = null; for (a = this.root; null != a;) { var b;
                    b = a;
                    a = b.next;
                    b.next = null;
                    null == b.child1 ? (b.shape.node = null, b.shape.removedFromSpace(), b.shape = null) : (null != b.child1 && (b.child1.next = a, a = b.child1), null != b.child2 && (b.child2.next = a, a = b.child2));
                    b.free();
                    b.next = Ub.zpp_pool;
                    Ub.zpp_pool = b } this.root = null }
        },
        inlined_insertLeaf: function(a) {
            if (null == this.root) this.root = a, this.root.parent = null;
            else {
                for (var b = a.aabb, c = this.root; null != c.child1;) {
                    var d = c.child1,
                        e = c.child2,
                        f = c.aabb.perimeter();
                    Oc.tmpaabb.setCombine(c.aabb, b);
                    var h = Oc.tmpaabb.perimeter(),
                        g = 2 * h,
                        f = 2 * (h - f);
                    Oc.tmpaabb.setCombine(b, d.aabb);
                    null == d.child1 ? h = Oc.tmpaabb.perimeter() + f : (h = d.aabb.perimeter(), h = Oc.tmpaabb.perimeter() - h + f);
                    Oc.tmpaabb.setCombine(b, e.aabb);
                    if (null == e.child1) f = Oc.tmpaabb.perimeter() + f;
                    else var i = e.aabb.perimeter(),
                        f = Oc.tmpaabb.perimeter() - i + f;
                    if (g < h && g < f) break;
                    else c = h < f ? d : e
                }
                d = c.parent;
                null == Ub.zpp_pool ? e = new Ub : (e = Ub.zpp_pool, Ub.zpp_pool = e.next, e.next = null);
                null == Wa.zpp_pool ? e.aabb = new Wa : (e.aabb = Wa.zpp_pool,
                    Wa.zpp_pool = e.aabb.next, e.aabb.next = null);
                null;
                e.moved = !1;
                e.synced = !1;
                e.first_sync = !1;
                e.parent = d;
                e.aabb.setCombine(b, c.aabb);
                e.height = c.height + 1;
                null != d ? (d.child1 == c ? d.child1 = e : d.child2 = e, e.child1 = c, e.child2 = a, c.parent = e, a.parent = e) : (e.child1 = c, e.child2 = a, c.parent = e, this.root = a.parent = e);
                for (c = a.parent; null != c;) c = this.balance(c), a = c.child1, b = c.child2, d = a.height, e = b.height, c.height = 1 + (d > e ? d : e), c.aabb.setCombine(a.aabb, b.aabb), c = c.parent
            }
        },
        removeLeaf: function(a) { this.inlined_removeLeaf(a) },
        inlined_removeLeaf: function(a) {
            if (a ==
                this.root) this.root = null;
            else { var b = a.parent,
                    c = b.parent,
                    a = b.child1 == a ? b.child2 : b.child1; if (null != c) { c.child1 == b ? c.child1 = a : c.child2 = a;
                    a.parent = c;
                    b.free();
                    b.next = Ub.zpp_pool;
                    Ub.zpp_pool = b; for (b = c; null != b;) b = this.balance(b), a = b.child1, c = b.child2, b.aabb.setCombine(a.aabb, c.aabb), a = a.height, c = c.height, b.height = 1 + (a > c ? a : c), b = b.parent } else this.root = a, a.parent = null, b.free(), b.next = Ub.zpp_pool, Ub.zpp_pool = b }
        },
        balance: function(a) {
            if (null == a.child1 || 2 > a.height) return a;
            var b = a.child1,
                c = a.child2,
                d = c.height -
                b.height;
            if (1 < d) {
                var e = c.child1,
                    f = c.child2;
                c.child1 = a;
                c.parent = a.parent;
                a.parent = c;
                null != c.parent ? c.parent.child1 == a ? c.parent.child1 = c : c.parent.child2 = c : this.root = c;
                e.height > f.height ? (c.child2 = e, a.child2 = f, f.parent = a, a.aabb.setCombine(b.aabb, f.aabb), c.aabb.setCombine(a.aabb, e.aabb), a.height = 1 + function() { var a = b.height,
                        c = f.height; return a > c ? a : c }(this), c.height = 1 + function() { var b = a.height,
                        c = e.height; return b > c ? b : c }(this)) : (c.child2 = f, a.child2 = e, e.parent = a, a.aabb.setCombine(b.aabb, e.aabb), c.aabb.setCombine(a.aabb,
                    f.aabb), a.height = 1 + function() { var a = b.height,
                        c = e.height; return a > c ? a : c }(this), c.height = 1 + function() { var b = a.height,
                        c = f.height; return b > c ? b : c }(this));
                return c
            }
            if (-1 > d) {
                var h = b.child1,
                    g = b.child2;
                b.child1 = a;
                b.parent = a.parent;
                a.parent = b;
                null != b.parent ? b.parent.child1 == a ? b.parent.child1 = b : b.parent.child2 = b : this.root = b;
                h.height > g.height ? (b.child2 = h, a.child1 = g, g.parent = a, a.aabb.setCombine(c.aabb, g.aabb), b.aabb.setCombine(a.aabb, h.aabb), a.height = 1 + function() { var a = c.height,
                            b = g.height; return a > b ? a : b }(this),
                    b.height = 1 + function() { var b = a.height,
                            c = h.height; return b > c ? b : c }(this)) : (b.child2 = g, a.child1 = h, h.parent = a, a.aabb.setCombine(c.aabb, h.aabb), b.aabb.setCombine(a.aabb, g.aabb), a.height = 1 + function() { var a = c.height,
                        b = h.height; return a > b ? a : b }(this), b.height = 1 + function() { var b = a.height,
                        c = g.height; return b > c ? b : c }(this));
                return b
            }
            return a
        },
        __class__: Oc
    };
    var pl = function(a) {
        this.stree = this.dtree = this.pairs = this.syncs = this.moves = null;
        rf.call(this);
        this.space = a;
        this.is_sweep = !1;
        this.dynab = this;
        this.stree = new Oc;
        this.dtree = new Oc
    };
    g["zpp_nape.space.ZPP_DynAABBPhase"] = pl;
    pl.__name__ = ["zpp_nape", "space", "ZPP_DynAABBPhase"];
    pl.__super__ = rf;
    pl.prototype = l(rf.prototype, {
        __insert: function(a) { var b;
            null == Ub.zpp_pool ? b = new Ub : (b = Ub.zpp_pool, Ub.zpp_pool = b.next, b.next = null);
            null == Wa.zpp_pool ? b.aabb = new Wa : (b.aabb = Wa.zpp_pool, Wa.zpp_pool = b.aabb.next, b.aabb.next = null);
            null;
            b.moved = !1;
            b.synced = !1;
            b.first_sync = !1;
            b.shape = a;
            a.node = b;
            b.synced = !0;
            b.first_sync = !0;
            b.snext = this.syncs;
            this.syncs = b },
        __remove: function(a) {
            var b =
                a.node;
            b.first_sync || (b.dyn ? this.dtree.removeLeaf(b) : this.stree.removeLeaf(b));
            a.node = null;
            if (b.synced) { for (var c = null, d = this.syncs; null != d && !(d == b);) { c = d;
                    d = d.snext } null == c ? this.syncs = d.snext : c.snext = d.snext;
                d.snext = null;
                b.synced = !1 }
            if (b.moved) { c = null; for (d = this.moves; null != d && !(d == b);) { c = d;
                    d = d.mnext } null == c ? this.moves = d.mnext : c.mnext = d.mnext;
                d.mnext = null;
                b.moved = !1 }
            for (var c = null, e = this.pairs; null != e;) d = e.next, e.n1 == b || e.n2 == b ? (null == c ? this.pairs = d : c.next = d, null != e.arb && (e.arb.pair = null), e.arb = null,
                e.n1.shape.pairs.remove(e), e.n2.shape.pairs.remove(e), e.n1 = e.n2 = null, e.sleeping = !1, e.next = Ya.zpp_pool, Ya.zpp_pool = e) : c = e, e = d;
            for (; null != a.pairs.head;) c = a.pairs.pop_unsafe(), c.n1 == b ? c.n2.shape.pairs.remove(c) : c.n1.shape.pairs.remove(c), null != c.arb && (c.arb.pair = null), c.arb = null, c.n1 = c.n2 = null, c.sleeping = !1, c.next = Ya.zpp_pool, Ya.zpp_pool = c;
            b.free();
            b.next = Ub.zpp_pool;
            Ub.zpp_pool = b
        },
        __sync: function(a) {
            var b = a.node;
            if (!b.synced && (!this.space.continuous && a.zip_aabb && null != a.body && (a.zip_aabb = !1, a.type ==
                    h.id_ShapeType_CIRCLE ? a.circle.__validate_aabb() : a.polygon.__validate_aabb()), b.dyn != (a.body.type == h.id_BodyType_STATIC ? !1 : !a.body.component.sleeping) || !b.aabb.contains(a.aabb))) b.synced = !0, b.snext = this.syncs, this.syncs = b
        },
        broadphase: function(a, b) {
            for (var c = this.syncs; null != c;) {
                var d = c.shape;
                c.first_sync ? c.first_sync = !1 : (c.dyn ? this.dtree : this.stree).inlined_removeLeaf(c);
                var e = c.aabb;
                !a.continuous && d.zip_aabb && null != d.body && (d.zip_aabb = !1, d.type == h.id_ShapeType_CIRCLE ? d.circle.__validate_aabb() : d.polygon.__validate_aabb());
                e.setExpand(d.aabb, 3);
                ((d.body.type == h.id_BodyType_STATIC ? c.dyn = !1 : c.dyn = !d.body.component.sleeping) ? this.dtree : this.stree).inlined_insertLeaf(c);
                c.synced = !1;
                c = c.snext
            }
            for (; null != this.syncs;)
                if (c = this.syncs, this.syncs = c.snext, c.snext = null, !c.moved && (c.moved = !1, d = c.shape, !d.body.component.sleeping)) {
                    var e = c.aabb,
                        f = null;
                    null != this.dtree.root && (this.dtree.root.next = f, f = this.dtree.root);
                    for (; null != f;) {
                        var g;
                        g = f;
                        f = g.next;
                        g.next = null;
                        if (g != c)
                            if (null == g.child1) {
                                var i = g.shape;
                                if (i.body != d.body && !(i.body.type ==
                                        h.id_BodyType_STATIC && d.body.type == h.id_BodyType_STATIC) && e.intersect(g.aabb)) {
                                    var k, l;
                                    d.id < i.id ? (k = d.id, l = i.id) : (k = i.id, l = d.id);
                                    for (var m = null, n = (d.pairs.length < i.pairs.length ? d : i).pairs.head; null != n;) { var o = n.elt; if (o.id == k && o.di == l) { m = o; break } n = n.next } null != m ? m.sleeping && (m.sleeping = !1, m.next = this.pairs, this.pairs = m, m.first = !0) : (null == Ya.zpp_pool ? m = new Ya : (m = Ya.zpp_pool, Ya.zpp_pool = m.next, m.next = null), null, m.n1 = c, m.n2 = g, m.id = k, m.di = l, m.next = this.pairs, this.pairs = m, m.first = !0, d.pairs.inlined_add(m),
                                        i.pairs.inlined_add(m))
                                }
                            } else e.intersect(g.aabb) && (null != g.child1 && (g.child1.next = f, f = g.child1), null != g.child2 && (g.child2.next = f, f = g.child2))
                    }
                    null != this.stree.root && (this.stree.root.next = f, f = this.stree.root);
                    for (; null != f;)
                        if (g = f, f = g.next, g.next = null, g != c)
                            if (null == g.child1) {
                                if (i = g.shape, i.body != d.body && !(i.body.type == h.id_BodyType_STATIC && d.body.type == h.id_BodyType_STATIC) && e.intersect(g.aabb)) {
                                    d.id < i.id ? (k = d.id, l = i.id) : (k = i.id, l = d.id);
                                    m = null;
                                    for (n = (d.pairs.length < i.pairs.length ? d : i).pairs.head; null !=
                                        n;) { o = n.elt; if (o.id == k && o.di == l) { m = o; break } n = n.next } null != m ? m.sleeping && (m.sleeping = !1, m.next = this.pairs, this.pairs = m, m.first = !0) : (null == Ya.zpp_pool ? m = new Ya : (m = Ya.zpp_pool, Ya.zpp_pool = m.next, m.next = null), null, m.n1 = c, m.n2 = g, m.id = k, m.di = l, m.next = this.pairs, this.pairs = m, m.first = !0, d.pairs.inlined_add(m), i.pairs.inlined_add(m))
                                }
                            } else e.intersect(g.aabb) && (null != g.child1 && (g.child1.next = f, f = g.child1), null != g.child2 && (g.child2.next = f, f = g.child2))
                } for (; null != this.moves;)
                if (c = this.moves, this.moves = c.mnext,
                    c.mnext = null, c.moved = !1, d = c.shape, !d.body.component.sleeping) {
                    e = c.aabb;
                    f = null;
                    null != this.dtree.root && (this.dtree.root.next = f, f = this.dtree.root);
                    for (; null != f;)
                        if (g = f, f = g.next, g.next = null, g != c)
                            if (null == g.child1) {
                                if (i = g.shape, i.body != d.body && !(i.body.type == h.id_BodyType_STATIC && d.body.type == h.id_BodyType_STATIC) && e.intersect(g.aabb)) {
                                    d.id < i.id ? (k = d.id, l = i.id) : (k = i.id, l = d.id);
                                    m = null;
                                    for (n = (d.pairs.length < i.pairs.length ? d : i).pairs.head; null != n;) { o = n.elt; if (o.id == k && o.di == l) { m = o; break } n = n.next } null != m ?
                                        m.sleeping && (m.sleeping = !1, m.next = this.pairs, this.pairs = m, m.first = !0) : (null == Ya.zpp_pool ? m = new Ya : (m = Ya.zpp_pool, Ya.zpp_pool = m.next, m.next = null), null, m.n1 = c, m.n2 = g, m.id = k, m.di = l, m.next = this.pairs, this.pairs = m, m.first = !0, d.pairs.inlined_add(m), i.pairs.inlined_add(m))
                                }
                            } else e.intersect(g.aabb) && (null != g.child1 && (g.child1.next = f, f = g.child1), null != g.child2 && (g.child2.next = f, f = g.child2));
                    null != this.stree.root && (this.stree.root.next = f, f = this.stree.root);
                    for (; null != f;)
                        if (g = f, f = g.next, g.next = null, g != c)
                            if (null ==
                                g.child1) {
                                if (i = g.shape, i.body != d.body && !(i.body.type == h.id_BodyType_STATIC && d.body.type == h.id_BodyType_STATIC) && e.intersect(g.aabb)) {
                                    d.id < i.id ? (k = d.id, l = i.id) : (k = i.id, l = d.id);
                                    m = null;
                                    for (n = (d.pairs.length < i.pairs.length ? d : i).pairs.head; null != n;) { o = n.elt; if (o.id == k && o.di == l) { m = o; break } n = n.next } null != m ? m.sleeping && (m.sleeping = !1, m.next = this.pairs, this.pairs = m, m.first = !0) : (null == Ya.zpp_pool ? m = new Ya : (m = Ya.zpp_pool, Ya.zpp_pool = m.next, m.next = null), null, m.n1 = c, m.n2 = g, m.id = k, m.di = l, m.next = this.pairs, this.pairs =
                                        m, m.first = !0, d.pairs.inlined_add(m), i.pairs.inlined_add(m))
                                }
                            } else e.intersect(g.aabb) && (null != g.child1 && (g.child1.next = f, f = g.child1), null != g.child2 && (g.child2.next = f, f = g.child2))
                } c = null;
            for (d = this.pairs; null != d;) !d.first && !d.n1.aabb.intersect(d.n2.aabb) ? (null == c ? this.pairs = d.next : c.next = d.next, d.n1.shape.pairs.inlined_try_remove(d), d.n2.shape.pairs.inlined_try_remove(d), e = d.next, null != d.arb && (d.arb.pair = null), d.arb = null, d.n1 = d.n2 = null, d.sleeping = !1, d.next = Ya.zpp_pool, Ya.zpp_pool = d, d = e) : (e = d.n1.shape,
                f = e.body, g = d.n2.shape, i = g.body, !d.first && (f.component.sleeping || f.type == h.id_BodyType_STATIC) && (i.component.sleeping || i.type == h.id_BodyType_STATIC) ? (d.sleeping = !0, null == c ? this.pairs = d.next : c.next = d.next) : (d.first = !1, e.aabb.intersect(g.aabb) && (c = d.arb, d.arb = b ? a.narrowPhase(e, g, f.type != h.id_BodyType_DYNAMIC || i.type != h.id_BodyType_DYNAMIC, d.arb, !1) : a.continuousEvent(e, g, f.type != h.id_BodyType_DYNAMIC || i.type != h.id_BodyType_DYNAMIC, d.arb, !1), null == d.arb ? null != c && (c.pair = null) : d.arb.pair = d), c = d), d = d.next)
        },
        clear: function() {
            for (; null != this.syncs;) { var a = this.syncs.snext;
                this.syncs.snext = null;
                this.syncs.first_sync && (this.syncs.shape.node = null, this.syncs.shape.removedFromSpace(), this.syncs.shape = null);
                this.syncs = a }
            for (; null != this.moves;) a = this.moves.mnext, this.moves.mnext = null, this.moves.first_sync && (this.moves.shape.node = null, this.moves.shape.removedFromSpace(), this.moves.shape = null), this.moves = a;
            for (; null != this.pairs;) {
                a = this.pairs.next;
                null != this.pairs.arb && (this.pairs.arb.pair = null);
                this.pairs.arb =
                    null;
                this.pairs.n1.shape.pairs.inlined_try_remove(this.pairs);
                this.pairs.n2.shape.pairs.inlined_try_remove(this.pairs);
                var b = this.pairs;
                b.n1 = b.n2 = null;
                b.sleeping = !1;
                b.next = Ya.zpp_pool;
                Ya.zpp_pool = b;
                this.pairs = a
            }
            this.dtree.clear();
            this.stree.clear()
        },
        __class__: pl
    });
    var Ha = function() { this.waket = 0;
        this.sleep = !1;
        this.comps = null;
        this.length = 0;
        this._inuse = this.modified = this.pushmod = !1;
        this.next = null;
        this.comps = new Rm };
    g["zpp_nape.space.ZPP_Island"] = Ha;
    Ha.__name__ = ["zpp_nape", "space", "ZPP_Island"];
    Ha.prototype = { inlined_add: function(a) { a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++; return a }, pop: function() { this.inlined_pop() }, inlined_pop: function() { var a = this.next;
            this.next = a.next;
            a._inuse = !1;
            null == this.next && (this.pushmod = !0);
            this.modified = !0;
            this.length-- }, inlined_pop_unsafe: function() { var a = this.next;
            this.pop(); return a }, __class__: Ha };
    var wc = function() {
        this.woken = !1;
        this.waket = 0;
        this.sleeping = !1;
        this.body = this.constraint = this.island = null;
        this.isBody = !1;
        this.rank = 0;
        this.next = this.parent =
            null;
        this.sleeping = !1;
        this.island = null;
        this.parent = this;
        this.rank = 0;
        this.woken = !1
    };
    g["zpp_nape.space.ZPP_Component"] = wc;
    wc.__name__ = ["zpp_nape", "space", "ZPP_Component"];
    wc.prototype = { __class__: wc };
    var tb = function() { this.freed = this.lazydel = !1;
        this.length = 0;
        this._inuse = this.modified = this.pushmod = !1;
        this.int1 = this.int2 = this.next = null;
        this.id = this.di = 0;
        this.arbiters = new Oh };
    g["zpp_nape.space.ZPP_CallbackSet"] = tb;
    tb.__name__ = ["zpp_nape", "space", "ZPP_CallbackSet"];
    tb.get = function(a, b) {
        var c;
        null == tb.zpp_pool ?
            c = new tb : (c = tb.zpp_pool, tb.zpp_pool = c.next, c.next = null);
        c.freed = !1;
        c.lazydel = !1;
        c.COLLISIONstate = h.id_PreFlag_ACCEPT;
        c.COLLISIONstamp = 0;
        c.SENSORstate = h.id_PreFlag_ACCEPT;
        c.SENSORstamp = 0;
        c.FLUIDstate = h.id_PreFlag_ACCEPT;
        c.FLUIDstamp = 0;
        a.id < b.id ? (c.int1 = a, c.int2 = b) : (c.int1 = b, c.int2 = a);
        c.id = c.int1.id;
        c.di = c.int2.id;
        return c
    };
    tb.prototype = {
        inlined_add: function(a) { a._inuse = !0;
            a.next = this.next;
            this.next = a;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() {
            var a =
                this.next;
            this.next = a.next;
            a._inuse = !1;
            null == this.next && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.next;
            this.pop(); return a },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.next, this.next = c = b.next, null == this.next && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            b._inuse = !1;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        remove_arb: function(a) { this.arbiters.inlined_try_remove(a) },
        empty_arb: function(a) { var b;
            b = !0; for (var c = this.arbiters.head; null != c;)
                if (0 == (c.elt.type & a)) c = c.next;
                else { b = !1; break } return b },
        sleeping: function() { var a;
            a = !0; for (var b = this.arbiters.head; null != b;)
                if (b.elt.sleeping) b = b.next;
                else { a = !1; break } return a },
        __class__: tb
    };
    var Sm = function(a) { this.cbsets = this.space = null;
        null == zc.zpp_pool ? this.cbsets = new zc : (this.cbsets = zc.zpp_pool, zc.zpp_pool = this.cbsets.next, this.cbsets.next = null);
        null;
        this.cbsets.lt = za.setlt;
        this.space = a };
    g["zpp_nape.space.ZPP_CbSetManager"] =
        Sm;
    Sm.__name__ = ["zpp_nape", "space", "ZPP_CbSetManager"];
    Sm.prototype = {
        get: function(a) { if (null == a.head) return null; var b;
            null == za.zpp_pool ? b = new za : (b = za.zpp_pool, za.zpp_pool = b.next, b.next = null);
            null; var c = b.cbTypes;
            b.cbTypes = a; var d = this.cbsets.find_weak(b);
            null != d ? a = d.data : (a = za.get(a), this.cbsets.insert(a), a.manager = this);
            b.cbTypes = c;
            b.free();
            b.next = za.zpp_pool;
            za.zpp_pool = b; return a },
        remove: function(a) {
            for (this.cbsets.remove(a); null != a.cbpairs.head;) {
                var b = a.cbpairs.pop_unsafe();
                b.a != b.b && (a == b.a ?
                    b.b.cbpairs.remove(b) : b.a.cbpairs.remove(b));
                b.a = b.b = null;
                b.listeners.clear();
                b.next = gc.zpp_pool;
                gc.zpp_pool = b
            }
            a.manager = null
        },
        clear: function() {},
        validate: function() { if (!this.cbsets.empty()) { for (var a = this.cbsets.parent; null != a.prev;) a = a.prev; for (; null != a;)
                    if (a.data.validate(), null != a.next)
                        for (a = a.next; null != a.prev;) a = a.prev;
                    else { for (; null != a.parent && a == a.parent.next;) a = a.parent;
                        a = a.parent } } },
        pair: function(a, b) {
            for (var c = null, d = (a.cbpairs.length < b.cbpairs.length ? a.cbpairs : b.cbpairs).head; null != d;) {
                var e =
                    d.elt;
                if (e.a == a && e.b == b || e.a == b && e.b == a) { c = e; break } d = d.next
            }
            null == c && (c = gc.get(a, b), a.cbpairs.add(c), b != a && b.cbpairs.add(c));
            c.zip_listeners && (c.zip_listeners = !1, c.__validate());
            return c
        },
        __class__: Sm
    };
    var om = function(a, b) {
        this.precb = this.prelisteners = null;
        this.continuous = !1;
        this.toiEvents = null;
        this.pre_dt = 0;
        this.c_arbiters_true = this.c_arbiters_false = this.f_arbiters = this.s_arbiters = this.live = this.wrap_live = this.live_constraints = this.wrap_livecon = this.staticsleep = this.islands = this.listeners = this.wrap_listeners =
            this.callbacks = this.callbackset_list = this.cbsets = null;
        this.sortcontacts = !1;
        this.time = 0;
        this.midstep = !1;
        this.global_lin_drag = this.global_ang_drag = this.stamp = 0;
        this.wrap_gravity = this.bodies = this.wrap_bodies = this.compounds = this.wrap_compounds = this.constraints = this.wrap_constraints = this.kinematics = this.bphase = this.__static = null;
        this.gravityx = this.gravityy = 0;
        this.outer = null;
        this.toiEvents = new Tm;
        this.global_ang_drag = this.global_lin_drag = 0.015;
        this.precb = new Ij;
        this.precb.zpp_inner = new Nd;
        this.sortcontacts = !0;
        this.pre_dt = 0;
        var c;
        if (!(c = null == b)) null == h.Broadphase_DYNAMIC_AABB_TREE && (h.internal = !0, h.Broadphase_DYNAMIC_AABB_TREE = new qg, h.internal = !1), c = b == h.Broadphase_DYNAMIC_AABB_TREE;
        c ? this.bphase = new pl(this) : (null == h.Broadphase_SWEEP_AND_PRUNE && (h.internal = !0, h.Broadphase_SWEEP_AND_PRUNE = new qg, h.internal = !1), b == h.Broadphase_SWEEP_AND_PRUNE && (this.bphase = new ql(this)));
        this.time = 0;
        null != a ? (this.gravityx = a.x, this.gravityy = a.y) : this.gravityy = this.gravityx = 0;
        this.bodies = new Uf;
        this.wrap_bodies = Le.get(this.bodies);
        this.wrap_bodies.zpp_inner.adder = n(this, this.bodies_adder);
        this.wrap_bodies.zpp_inner.subber = n(this, this.bodies_subber);
        this.compounds = new Bg;
        this.wrap_compounds = jf.get(this.compounds);
        this.wrap_compounds.zpp_inner.adder = n(this, this.compounds_adder);
        this.wrap_compounds.zpp_inner.subber = n(this, this.compounds_subber);
        this.kinematics = new Uf;
        this.c_arbiters_true = new rl;
        this.c_arbiters_false = new rl;
        this.f_arbiters = new Um;
        this.s_arbiters = new Vm;
        this.islands = new Ha;
        this.live = new Uf;
        this.wrap_live = Le.get(this.live,
            !0);
        this.staticsleep = new Uf;
        this.constraints = new pf;
        this.wrap_constraints = Je.get(this.constraints);
        this.wrap_constraints.zpp_inner.adder = n(this, this.constraints_adder);
        this.wrap_constraints.zpp_inner.subber = n(this, this.constraints_subber);
        this.live_constraints = new pf;
        this.wrap_livecon = Je.get(this.live_constraints, !0);
        this.__static = Ke.__static();
        this.__static.zpp_inner.space = this;
        this.callbacks = new Nd;
        this.midstep = !1;
        this.listeners = new sl;
        this.wrap_listeners = ef.get(this.listeners);
        this.wrap_listeners.zpp_inner.adder =
            n(this, this.listeners_adder);
        this.wrap_listeners.zpp_inner.subber = n(this, this.listeners_subber);
        this.callbackset_list = new tb;
        this.mrca1 = new qf;
        this.mrca2 = new qf;
        this.prelisteners = new xg;
        this.cbsets = new Sm(this)
    };
    g["zpp_nape.space.ZPP_Space"] = om;
    om.__name__ = ["zpp_nape", "space", "ZPP_Space"];
    om.prototype = {
        getgravity: function() {
            this.wrap_gravity = fa.get(this.gravityx, this.gravityy, null);
            this.wrap_gravity.zpp_inner._inuse = !0;
            this.wrap_gravity.zpp_inner._invalidate = n(this, this.gravity_invalidate);
            this.wrap_gravity.zpp_inner._validate =
                n(this, this.gravity_validate)
        },
        gravity_invalidate: function(a) {
            this.gravityx = a.x;
            this.gravityy = a.y;
            for (var a = new Bg, b = this.bodies.head; null != b;) { var c = b.elt;
                c.world || (c.component.waket = this.stamp + (this.midstep ? 0 : 1), c.type == h.id_BodyType_KINEMATIC && (c.kinematicDelaySleep = !0), c.component.sleeping && this.really_wake(c, !1));
                b = b.next }
            for (b = this.compounds.head; null != b;) a.add(b.elt), b = b.next;
            for (; null != a.head;) {
                b = a.pop_unsafe();
                for (c = b.bodies.head; null != c;) {
                    var d = c.elt;
                    d.world || (d.component.waket = this.stamp +
                        (this.midstep ? 0 : 1), d.type == h.id_BodyType_KINEMATIC && (d.kinematicDelaySleep = !0), d.component.sleeping && this.really_wake(d, !1));
                    c = c.next
                }
                for (b = b.compounds.head; null != b;) a.add(b.elt), b = b.next
            }
        },
        gravity_validate: function() { this.wrap_gravity.zpp_inner.x = this.gravityx;
            this.wrap_gravity.zpp_inner.y = this.gravityy },
        clear: function() {
            for (; null != this.listeners.head;) this.remListener(this.listeners.pop_unsafe());
            for (; null != this.callbackset_list.next;) {
                var a = this.callbackset_list.pop_unsafe();
                a.arbiters.clear();
                a.int1 = a.int2 = null;
                a.id = a.di = -1;
                a.freed = !0;
                null;
                a.next = tb.zpp_pool;
                tb.zpp_pool = a
            }
            for (; null != this.c_arbiters_true.head;) this.c_arbiters_true.pop_unsafe().retire();
            for (; null != this.c_arbiters_false.head;) this.c_arbiters_false.pop_unsafe().retire();
            for (; null != this.s_arbiters.head;) this.s_arbiters.pop_unsafe().retire();
            for (; null != this.f_arbiters.head;) this.f_arbiters.pop_unsafe().retire();
            for (this.bphase.clear(); null != this.bodies.head;) {
                a = this.bodies.pop_unsafe();
                if (null != a.component) {
                    var b = a.component.island;
                    if (null != b) { for (; null != b.comps.head;) { var c = b.comps.pop_unsafe();
                            c.sleeping = !1;
                            c.island = null;
                            c.parent = c;
                            c.rank = 0 } b.next = Ha.zpp_pool;
                        Ha.zpp_pool = b }
                }
                a.removedFromSpace();
                a.space = null
            }
            for (; null != this.constraints.head;) { a = this.constraints.pop_unsafe(); if (null != a.component && (b = a.component.island, null != b)) { for (; null != b.comps.head;) c = b.comps.pop_unsafe(), c.sleeping = !1, c.island = null, c.parent = c, c.rank = 0;
                    b.next = Ha.zpp_pool;
                    Ha.zpp_pool = b } a.removedFromSpace();
                a.space = null } this.kinematics.clear();
            for (a = new Bg; null !=
                this.compounds.head;) b = this.compounds.pop_unsafe(), a.add(b);
            for (; null != a.head;) {
                b = a.pop_unsafe();
                b.removedFromSpace();
                b.space = null;
                for (c = b.bodies.head; null != c;) { var d = c.elt; if (null != d.component) { var e = d.component.island; if (null != e) { for (; null != e.comps.head;) { var f = e.comps.pop_unsafe();
                                f.sleeping = !1;
                                f.island = null;
                                f.parent = f;
                                f.rank = 0 } e.next = Ha.zpp_pool;
                            Ha.zpp_pool = e } } d.removedFromSpace();
                    d.space = null;
                    c = c.next }
                for (c = b.constraints.head; null != c;) {
                    d = c.elt;
                    if (null != d.component && (e = d.component.island, null !=
                            e)) { for (; null != e.comps.head;) f = e.comps.pop_unsafe(), f.sleeping = !1, f.island = null, f.parent = f, f.rank = 0;
                        e.next = Ha.zpp_pool;
                        Ha.zpp_pool = e } d.removedFromSpace();
                    d.space = null;
                    c = c.next
                }
                for (b = b.compounds.head; null != b;) a.add(b.elt), b = b.next
            }
            this.staticsleep.clear();
            this.live.clear();
            this.live_constraints.clear();
            this.time = this.stamp = 0;
            this.mrca1.clear();
            this.mrca2.clear();
            this.prelisteners.clear();
            this.cbsets.clear()
        },
        bodies_adder: function(a) {
            return a.zpp_inner.space != this ? (null != a.zpp_inner.space && a.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(a),
                this.addBody(a.zpp_inner), !0) : !1
        },
        bodies_subber: function(a) { this.remBody(a.zpp_inner) },
        compounds_adder: function(a) { return a.zpp_inner.space != this ? (null != a.zpp_inner.space && a.zpp_inner.space.wrap_compounds.remove(a), this.addCompound(a.zpp_inner), !0) : !1 },
        compounds_subber: function(a) { this.remCompound(a.zpp_inner) },
        constraints_adder: function(a) { return a.zpp_inner.space != this ? (null != a.zpp_inner.space && a.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(a), this.addConstraint(a.zpp_inner), !0) : !1 },
        constraints_subber: function(a) { this.remConstraint(a.zpp_inner) },
        listeners_adder: function(a) { return a.zpp_inner.space != this ? (null != a.zpp_inner.space && a.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(a), this.addListener(a.zpp_inner), !0) : !1 },
        listeners_subber: function(a) { this.remListener(a.zpp_inner) },
        addListener: function(a) { a.space = this;
            a.addedToSpace();
            null != a.interaction && null },
        remListener: function(a) { null != a.interaction && null;
            a.removedFromSpace();
            a.space = null },
        add_callbackset: function(a) {
            a.int1.cbsets.inlined_add(a);
            a.int2.cbsets.inlined_add(a);
            this.callbackset_list.inlined_add(a)
        },
        remove_callbackset: function(a) { a.lazydel = !0;
            a.int1.cbsets.inlined_try_remove(a);
            a.int2.cbsets.inlined_try_remove(a) },
        transmitType: function(a, b) {
            a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a, !1));
            a.type == h.id_BodyType_DYNAMIC ? this.live.remove(a) : a.type == h.id_BodyType_KINEMATIC ? (this.kinematics.remove(a), this.staticsleep.remove(a)) :
                a.type == h.id_BodyType_STATIC && this.staticsleep.remove(a);
            a.type = b;
            a.type == h.id_BodyType_KINEMATIC && this.kinematics.add(a);
            a.type == h.id_BodyType_STATIC && this.static_validation(a);
            a.component.sleeping = !0;
            a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a, !0))
        },
        added_shape: function(a, b) {
            null == b && (b = !1);
            if (!b) {
                var c = a.body;
                c.world || (c.component.waket = this.stamp + (this.midstep ? 0 : 1), c.type == h.id_BodyType_KINEMATIC &&
                    (c.kinematicDelaySleep = !0), c.component.sleeping && this.really_wake(c, !1))
            }
            this.bphase.insert(a);
            a.addedToSpace()
        },
        removed_shape: function(a, b) {
            null == b && (b = !1);
            var c = this,
                d = a.body;
            b || d.wake();
            for (var e = null, f = d.arbiters.head; null != f;) {
                var g = [f.elt];
                if (g[0].ws1 == a || g[0].ws2 == a) {
                    if (0 != g[0].present) {
                        this.MRCA_chains(g[0].ws1, g[0].ws2);
                        for (f = this.mrca1.head; null != f;) {
                            for (var i = f.elt, k = this.mrca2.head; null != k;) {
                                var l = k.elt,
                                    m = i.cbSet,
                                    n = l.cbSet;
                                m.validate();
                                n.validate();
                                m.manager.pair(m, n).empty_intersection() ||
                                    (l = [cb.get(i, l)], l[0].remove_arb(g[0]), g[0].present--, m.manager.pair(m, n).forall(h.id_CbEvent_END, function(a, b) { return function(d) { if (0 != (d.itype & b[0].type) && a[0].empty_arb(d.itype)) { var e = c.push_callback(d);
                                                e.event = h.id_CbEvent_END;
                                                cb.int_callback(a[0], d, e);
                                                e.set = a[0] } } }(l, g)), null == l[0].arbiters.head && this.remove_callbackset(l[0]));
                                k = k.next
                            }
                            f = f.next
                        }
                    }
                    g[0].b1 != d && g[0].b1.type == h.id_BodyType_DYNAMIC && (f = g[0].b1, f.world || (f.component.waket = this.stamp + (this.midstep ? 0 : 1), f.type == h.id_BodyType_KINEMATIC &&
                        (f.kinematicDelaySleep = !0), f.component.sleeping && this.really_wake(f, !1)));
                    g[0].b2 != d && g[0].b2.type == h.id_BodyType_DYNAMIC && (f = g[0].b2, f.world || (f.component.waket = this.stamp + (this.midstep ? 0 : 1), f.type == h.id_BodyType_KINEMATIC && (f.kinematicDelaySleep = !0), f.component.sleeping && this.really_wake(f, !1)));
                    g[0].cleared = !0;
                    (null == d || g[0].b2 == d) && g[0].b1.arbiters.inlined_try_remove(g[0]);
                    (null == d || g[0].b1 == d) && g[0].b2.arbiters.inlined_try_remove(g[0]);
                    null != g[0].pair && (g[0].pair.arb = null, g[0].pair = null);
                    g[0].active = !1;
                    this.f_arbiters.modified = !0;
                    f = d.arbiters.erase(e)
                } else e = f, f = f.next
            }
            this.bphase.remove(a);
            a.removedFromSpace()
        },
        addConstraint: function(a) { a.space = this;
            a.addedToSpace();
            a.active && (a.component.sleeping = !0, this.wake_constraint(a, !0)) },
        remConstraint: function(a) { a.active && (this.wake_constraint(a, !0), this.live_constraints.remove(a));
            a.removedFromSpace();
            a.space = null },
        addCompound: function(a) {
            a.space = this;
            a.addedToSpace();
            for (var b = a.bodies.head; null != b;) this.addBody(b.elt), b = b.next;
            for (b = a.constraints.head; null !=
                b;) this.addConstraint(b.elt), b = b.next;
            for (a = a.compounds.head; null != a;) this.addCompound(a.elt), a = a.next
        },
        remCompound: function(a) { for (var b = a.bodies.head; null != b;) this.remBody(b.elt), b = b.next; for (b = a.constraints.head; null != b;) this.remConstraint(b.elt), b = b.next; for (b = a.compounds.head; null != b;) this.remCompound(b.elt), b = b.next;
            a.removedFromSpace();
            a.space = null },
        addBody: function(a, b) {
            null == b && (b = -1);
            a.space = this;
            a.addedToSpace();
            a.component.sleeping = !0;
            a.world || (a.component.waket = this.stamp + (this.midstep ?
                0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a, !0));
            for (var c = a.shapes.head; null != c;) this.added_shape(c.elt, !0), c = c.next;
            a.type == h.id_BodyType_STATIC ? this.static_validation(a) : a.type != h.id_BodyType_DYNAMIC && b != h.id_BodyType_KINEMATIC && this.kinematics.add(a)
        },
        remBody: function(a, b) {
            null == b && (b = -1);
            a.type == h.id_BodyType_STATIC ? (a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0),
                a.component.sleeping && this.really_wake(a, !0)), this.staticsleep.remove(a)) : a.type == h.id_BodyType_DYNAMIC ? (a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a, !0)), this.live.remove(a)) : (b != h.id_BodyType_KINEMATIC && this.kinematics.remove(a), a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a,
                !0)), this.staticsleep.remove(a));
            for (var c = a.shapes.head; null != c;) this.removed_shape(c.elt, !0), c = c.next;
            a.removedFromSpace();
            a.space = null
        },
        push_callback: function(a) { var b;
            null == Nd.zpp_pool ? b = new Nd : (b = Nd.zpp_pool, Nd.zpp_pool = b.next, b.next = null);
            null;
            this.callbacks.push(b);
            b.listener = a; return b },
        step: function(a, b, c) {
            var d = this;
            this.time += a;
            this.pre_dt = a;
            this.midstep = !0;
            this.stamp++;
            this.validation();
            this.bphase.broadphase(this, !0);
            this.prestep(a);
            if (this.sortcontacts) {
                var e = this.c_arbiters_false;
                if (null !=
                    e.head && null != e.head.next) { var f = e.head,
                        g = null,
                        i = null,
                        k = null,
                        l = null,
                        m = 1,
                        n, o, r;
                    do { n = 0;
                        i = f; for (g = f = null; null != i;) { n++;
                            k = i;
                            o = 0; for (r = m; null != k && o < m;) o++, k = k.next; for (; 0 < o || 0 < r && null != k;) 0 == o ? (l = k, k = k.next, r--) : 0 == r || null == k ? (l = i, i = i.next, o--) : (i.elt.active && k.elt.active ? i.elt.oc1.dist < k.elt.oc1.dist : 1) ? (l = i, i = i.next, o--) : (l = k, k = k.next, r--), null != g ? g.next = l : f = l, g = l;
                            i = k } g.next = null;
                        m <<= 1 } while (1 < n);
                    e.head = f;
                    e.modified = !0;
                    e.pushmod = !0 }
            }
            this.updateVel(a);
            this.warmStart();
            this.iterateVel(b);
            for (b = this.kinematics.head; null !=
                b;) e = b.elt, e.pre_posx = e.posx, e.pre_posy = e.posy, e.pre_rot = e.rot, b = b.next;
            for (b = this.live.head; null != b;) e = b.elt, e.pre_posx = e.posx, e.pre_posy = e.posy, e.pre_rot = e.rot, b = b.next;
            this.updatePos(a);
            this.continuous = !0;
            this.continuousCollisions(a);
            this.continuous = !1;
            this.iteratePos(c);
            for (c = this.kinematics.head; null != c;) b = c.elt, e = b.pre_rot != b.rot, !(b.posx == b.pre_posx && b.posy == b.pre_posy) && b.invalidate_pos(), e && b.invalidate_rot(), c = c.next;
            for (c = this.live.head; null != c;) b = c.elt, e = b.pre_rot != b.rot, !(b.posx == b.pre_posx &&
                b.posy == b.pre_posy) && b.invalidate_pos(), e && b.invalidate_rot(), c = c.next;
            c = null;
            for (b = this.staticsleep.head; null != b;) e = b.elt, e.type != h.id_BodyType_KINEMATIC || 0 == e.velx && 0 == e.vely && 0 == e.angvel ? e.kinematicDelaySleep ? (e.kinematicDelaySleep = !1, b = b.next) : (e.component.sleeping = !0, b = this.staticsleep.inlined_erase(c)) : (c = b, b = b.next);
            this.doForests(a);
            this.sleepArbiters();
            this.midstep = !1;
            c = null;
            for (a = this.callbackset_list.next; null != a;) b = [a], null == b[0].arbiters.head ? (a = this.callbackset_list.inlined_erase(c),
                b = b[0], b.int1 = b.int2 = null, b.id = b.di = -1, b.freed = !0, null, b.next = tb.zpp_pool, tb.zpp_pool = b) : (c = [b[0].sleeping()], za.find_all(b[0].int1.cbSet, b[0].int2.cbSet, h.id_CbEvent_ONGOING, function(a, b) { return function(c) { if ((!a[0] || c.allowSleepingCallbacks) && !b[0].empty_arb(c.itype)) { var e = d.push_callback(c);
                        e.event = h.id_CbEvent_ONGOING;
                        cb.int_callback(b[0], c, e);
                        e.set = b[0] } } }(c, b)), c = a, a = a.next);
            for (; !this.callbacks.empty();) a = this.callbacks.pop(), a.listener.type == h.id_ListenerType_BODY ? a.listener.body.handler(a.wrapper_body()) :
                a.listener.type == h.id_ListenerType_CONSTRAINT ? a.listener.constraint.handler(a.wrapper_con()) : a.listener.type == h.id_ListenerType_INTERACTION && a.listener.interaction.handleri(a.wrapper_int()), a.int1 = a.int2 = null, a.body = null, a.constraint = null, a.listener = null, null != a.wrap_arbiters && (a.wrap_arbiters.zpp_inner.inner = null), a.set = null, a.next = Nd.zpp_pool, Nd.zpp_pool = a
        },
        continuousCollisions: function(a) {
            var b = 2 * Math.PI / a;
            this.bphase.broadphase(this, !1);
            for (var c = 0; 1 > c && null != this.toiEvents.head;) {
                for (var d = null,
                        c = 2, e = !1, f = null, g = null, i = this.toiEvents.head; null != i;) {
                    var k = i.elt,
                        l = k.s1.body,
                        m = k.s2.body;
                    if (l.sweepFrozen && m.sweepFrozen)
                        if (0 != k.toi && P.testCollide_safe(k.s1, k.s2)) k.toi = 0;
                        else { i = this.toiEvents.erase(g);
                            k.next = vb.zpp_pool;
                            vb.zpp_pool = k; continue } if (k.frozen1 != l.sweepFrozen || k.frozen2 != m.sweepFrozen)
                        if (k.kinematic) { i = this.toiEvents.erase(g);
                            k.next = vb.zpp_pool;
                            vb.zpp_pool = k; continue } else if (k.frozen1 = l.sweepFrozen, k.frozen2 = m.sweepFrozen, k.frozen1 && (l = k.s1, k.s1 = k.s2, k.s2 = l, k.frozen1 = !1, k.frozen2 = !0),
                        ce.staticSweep(k, a, 0, t.collisionSlopCCD), 0 > k.toi) { i = this.toiEvents.erase(g);
                        k.next = vb.zpp_pool;
                        vb.zpp_pool = k; continue }
                    if (0 <= k.toi && (k.toi < c || !e && k.kinematic)) d = k, c = k.toi, e = k.kinematic, f = g;
                    g = i;
                    i = i.next
                }
                if (null == d) break;
                this.toiEvents.erase(f);
                c = d.toi;
                e = d.s1.body;
                f = d.s2.body;
                e.sweepFrozen || (e.sweepIntegrate(c * a), e.sweepValidate(d.s1));
                f.sweepFrozen || (f.sweepIntegrate(c * a), f.sweepValidate(d.s2));
                g = this.narrowPhase(d.s1, d.s2, !0, d.arbiter, !0);
                null == g ? null != d.arbiter && null != d.arbiter.pair && (d.arbiter.pair.arb =
                    null, d.arbiter.pair = null) : !this.presteparb(g, a, !0) && g.type == aa.COL && g.active && 0 != (g.immState & h.id_ImmState_ACCEPT) && (g.colarb.warmStart(), g.colarb.applyImpulseVel(), g.colarb.applyImpulseVel(), g.colarb.applyImpulseVel(), g.colarb.applyImpulseVel(), e.sweep_angvel = e.angvel % b, f.sweep_angvel = f.angvel % b);
                null != g && g.active && 0 != (g.immState & h.id_ImmState_ACCEPT) && g.type == aa.COL && (!e.sweepFrozen && e.type != h.id_BodyType_KINEMATIC && (e.sweepFrozen = !0, e.angvel = d.failed ? e.sweep_angvel = 0 : d.slipped ? e.sweep_angvel *=
                    t.angularCCDSlipScale : e.sweep_angvel), !f.sweepFrozen && f.type != h.id_BodyType_KINEMATIC && (f.sweepFrozen = !0, f.angvel = d.failed ? f.sweep_angvel = 0 : d.slipped ? f.sweep_angvel *= t.angularCCDSlipScale : f.sweep_angvel))
            }
            for (; null != this.toiEvents.head;) b = this.toiEvents.pop_unsafe(), b.next = vb.zpp_pool, vb.zpp_pool = b;
            for (b = this.kinematics.head; null != b;) d = b.elt, d.sweepIntegrate(a), d.sweepTime = 0, b = b.next;
            for (b = this.live.head; null != b;) d = b.elt, d.sweepFrozen || d.sweepIntegrate(a), d.sweepTime = 0, b = b.next
        },
        continuousEvent: function(a,
            b, c, d) {
            if (a.body.sweepFrozen && b.body.sweepFrozen || a.body.disableCCD || b.body.disableCCD || null != d && null == d.colarb || 0 >= this.interactionType(a, b, a.body, b.body)) return d;
            var e = a.body,
                f = b.body;
            if (c || e.bullet || f.bullet) {
                var g;
                null == vb.zpp_pool ? g = new vb : (g = vb.zpp_pool, vb.zpp_pool = g.next, g.next = null);
                g.failed = !1;
                g.s1 = g.s2 = null;
                g.arbiter = null;
                e = e.type == h.id_BodyType_KINEMATIC || f.type == h.id_BodyType_KINEMATIC;
                c && !e ? (a.body.type != h.id_BodyType_DYNAMIC ? (g.s2 = a, g.s1 = b) : (g.s1 = a, g.s2 = b), g.kinematic = !1, ce.staticSweep(g,
                    this.pre_dt, 0, t.collisionSlopCCD)) : (g.s1 = a, g.s2 = b, g.kinematic = e, g.s1.body.sweepFrozen || g.s2.body.sweepFrozen ? (g.s1.body.sweepFrozen && (a = g.s1, g.s1 = g.s2, g.s2 = a, g.frozen1 = !1, g.frozen2 = !0), ce.staticSweep(g, this.pre_dt, 0, t.collisionSlopCCD)) : ce.dynamicSweep(g, this.pre_dt, 0, t.collisionSlopCCD));
                c && 0 > g.toi || g.failed ? (c = g, c.next = vb.zpp_pool, vb.zpp_pool = c) : (this.toiEvents.add(g), g.frozen1 = g.s1.body.sweepFrozen, g.frozen2 = g.s2.body.sweepFrozen, g.arbiter = null != d ? d.colarb : null)
            }
            return d
        },
        bodyCbWake: function(a) {
            if (a.type ==
                h.id_BodyType_DYNAMIC && null != a.cbSet)
                if (this.midstep)
                    for (var b = a.cbSet.bodylisteners.head; null != b;) { var c = b.elt;
                        c.event == h.id_CbEvent_WAKE && (c = this.push_callback(c), c.event = h.id_CbEvent_WAKE, c.body = a);
                        b = b.next } else a.component.woken = !0
        },
        bodyCbSleep: function(a) { if (a.type == h.id_BodyType_DYNAMIC && null != a.cbSet)
                for (var b = a.cbSet.bodylisteners.head; null != b;) { var c = b.elt;
                    c.event == h.id_CbEvent_SLEEP && (c = this.push_callback(c), c.event = h.id_CbEvent_SLEEP, c.body = a);
                    b = b.next } },
        constraintCbWake: function(a) {
            if (null !=
                a.cbSet)
                if (this.midstep)
                    for (var b = a.cbSet.conlisteners.head; null != b;) { var c = b.elt;
                        c.event == h.id_CbEvent_WAKE && (c = this.push_callback(c), c.event = h.id_CbEvent_WAKE, c.constraint = a);
                        b = b.next } else a.component.woken = !0
        },
        constraintCbSleep: function(a) { if (null != a.cbSet)
                for (var b = a.cbSet.conlisteners.head; null != b;) { var c = b.elt;
                    c.event == h.id_CbEvent_SLEEP && (c = this.push_callback(c), c.event = h.id_CbEvent_SLEEP, c.constraint = a);
                    b = b.next } },
        constraintCbBreak: function(a) {
            if (null != a.cbSet)
                for (var b = a.cbSet.conlisteners.head; null !=
                    b;) { var c = b.elt;
                    c.event == h.id_CbEvent_BREAK && (c = this.push_callback(c), c.event = h.id_CbEvent_BREAK, c.constraint = a);
                    b = b.next }
        },
        nullListenerType: function(a, b) {
            for (var c = new qf, d = a.interactors.head; null != d;) c.add(d.elt), d = d.next;
            if (a != b)
                for (d = b.interactors.head; null != d;) c.add(d.elt), d = d.next;
            for (; null != c.head;)
                if (d = c.pop_unsafe(), null != d.icompound) { for (var d = d.icompound, e = d.bodies.head; null != e;) c.add(e.elt), e = e.next; for (d = d.compounds.head; null != d;) c.add(d.elt), d = d.next } else {
                    e = null != d.ibody ? d.ibody : d.ishape.body;
                    d = null != d.ishape ? d.ishape : null;
                    for (e = e.arbiters.head; null != e;) { var f = e.elt; if (0 != f.present && (null == d || f.ws1 == d || f.ws2 == d)) { this.MRCA_chains(f.ws1, f.ws2); for (f = this.mrca1.head; null != f;) { var g = f.elt; if (!(g.cbSet != a && g.cbSet != b))
                                    for (var h = this.mrca2.head; null != h;) { var i = h.elt; if (!(g.cbSet == a && i.cbSet != b || g.cbSet == b && i.cbSet != a))
                                            if (i = cb.get(g, i), null != i) { for (; null != i.arbiters.head;) i.arbiters.pop_unsafe().present--;
                                                this.remove_callbackset(i) } h = h.next } f = f.next } } e = e.next }
                }
        },
        nullInteractorType: function(a,
            b) {
            null == b && (b = a);
            if (null != a.icompound) { for (var c = a.icompound, d = c.bodies.head; null != d;) this.nullInteractorType(d.elt, b), d = d.next; for (c = c.compounds.head; null != c;) this.nullInteractorType(c.elt, b), c = c.next } else {
                d = null != a.ibody ? a.ibody : a.ishape.body;
                c = null != a.ishape ? a.ishape : null;
                for (d = d.arbiters.head; null != d;) {
                    var e = d.elt;
                    if (0 != e.present && (null == c || e.ws1 == c || e.ws2 == c)) {
                        this.MRCA_chains(e.ws1, e.ws2);
                        for (var f = this.mrca1.head; null != f;) {
                            for (var g = f.elt, h = this.mrca2.head; null != h;) {
                                var i = h.elt;
                                g != b && i != b ||
                                    (i = cb.get(g, i), null != i && (e.present--, i.remove_arb(e), null == i.arbiters.head && this.remove_callbackset(i)));
                                h = h.next
                            }
                            f = f.next
                        }
                    }
                    d = d.next
                }
            }
        },
        freshListenerType: function(a, b) {
            for (var c = new qf, d = a.interactors.head; null != d;) c.add(d.elt), d = d.next;
            if (a != b)
                for (d = b.interactors.head; null != d;) c.add(d.elt), d = d.next;
            for (; null != c.head;)
                if (d = c.pop_unsafe(), null != d.icompound) { for (var d = d.icompound, e = d.bodies.head; null != e;) c.add(e.elt), e = e.next; for (d = d.compounds.head; null != d;) c.add(d.elt), d = d.next } else {
                    e = null != d.ibody ?
                        d.ibody : d.ishape.body;
                    d = null != d.ishape ? d.ishape : null;
                    for (e = e.arbiters.head; null != e;) {
                        var f = e.elt;
                        if (f.presentable && (null == d || f.ws1 == d || f.ws2 == d)) {
                            this.MRCA_chains(f.ws1, f.ws2);
                            for (var g = this.mrca1.head; null != g;) {
                                var h = g.elt;
                                if (!(h.cbSet != a && h.cbSet != b))
                                    for (var i = this.mrca2.head; null != i;) {
                                        var k = i.elt;
                                        if (!(h.cbSet == a && k.cbSet != b || h.cbSet == b && k.cbSet != a)) { var l = cb.get(h, k);
                                            null == l && (l = tb.get(h, k), this.add_callbackset(l)); if (k = !l.arbiters.inlined_has(f)) l.arbiters.inlined_add(f), k = !0;
                                            k && f.present++ } i =
                                            i.next
                                    }
                                g = g.next
                            }
                        }
                        e = e.next
                    }
                }
        },
        freshInteractorType: function(a, b) {
            null == b && (b = a);
            if (null != a.icompound) { for (var c = a.icompound, d = c.bodies.head; null != d;) this.freshInteractorType(d.elt, b), d = d.next; for (c = c.compounds.head; null != c;) this.freshInteractorType(c.elt, b), c = c.next } else {
                d = null != a.ibody ? a.ibody : a.ishape.body;
                c = null != a.ishape ? a.ishape : null;
                for (d = d.arbiters.head; null != d;) {
                    var e = d.elt;
                    if (e.presentable && (null == c || e.ws1 == c || e.ws2 == c)) {
                        this.MRCA_chains(e.ws1, e.ws2);
                        for (var f = this.mrca1.head; null != f;) {
                            for (var g =
                                    f.elt, h = this.mrca2.head; null != h;) { var i = h.elt; if (!(g != b && i != b)) { var k = g.cbSet,
                                        l = i.cbSet;
                                    k.validate();
                                    l.validate(); if (!k.manager.pair(k, l).empty_intersection()) { k = cb.get(g, i);
                                        null == k && (k = tb.get(g, i), this.add_callbackset(k)); if (i = !k.arbiters.inlined_has(e)) k.arbiters.inlined_add(e), i = !0;
                                        i && e.present++ } } h = h.next } f = f.next
                        }
                    }
                    d = d.next
                }
            }
        },
        wakeCompound: function(a) {
            for (var b = a.bodies.head; null != b;) {
                var c = b.elt;
                c.world || (c.component.waket = this.stamp + (this.midstep ? 0 : 1), c.type == h.id_BodyType_KINEMATIC && (c.kinematicDelaySleep = !0), c.component.sleeping && this.really_wake(c, !1));
                b = b.next
            }
            for (b = a.constraints.head; null != b;) this.wake_constraint(b.elt), b = b.next;
            for (a = a.compounds.head; null != a;) this.wakeCompound(a.elt), a = a.next
        },
        wakeIsland: function(a) {
            for (; null != a.comps.head;) {
                var b = a.comps.pop_unsafe();
                b.waket = this.stamp + (this.midstep ? 0 : 1);
                if (b.isBody) {
                    var c = b.body;
                    this.live.add(c);
                    for (var d = c.arbiters.head; null != d;) {
                        var e = d.elt;
                        e.sleeping && (e.sleeping = !1, e.up_stamp += this.stamp - e.sleep_stamp, e.type == aa.COL ? (e = e.colarb, e.stat ? this.c_arbiters_true.inlined_add(e) :
                            this.c_arbiters_false.inlined_add(e)) : e.type == aa.FLUID ? this.f_arbiters.inlined_add(e.fluidarb) : this.s_arbiters.inlined_add(e.sensorarb));
                        d = d.next
                    }
                    this.bodyCbWake(c);
                    b.sleeping = !1;
                    b.island = null;
                    b.parent = b;
                    b.rank = 0;
                    if (c.type != h.id_BodyType_STATIC)
                        for (b = c.shapes.head; null != b;) c = b.elt, null != c.node && this.bphase.sync(c), b = b.next
                } else c = b.constraint, this.live_constraints.inlined_add(c), this.constraintCbWake(c), b.sleeping = !1, b.island = null, b.parent = b, b.rank = 0
            }
            a.next = Ha.zpp_pool;
            Ha.zpp_pool = a
        },
        non_inlined_wake: function(a,
            b) { null == b && (b = !1);
            a.world || (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.type == h.id_BodyType_KINEMATIC && (a.kinematicDelaySleep = !0), a.component.sleeping && this.really_wake(a, b)) },
        really_wake: function(a, b) {
            null == b && (b = !1);
            if (null == a.component.island) {
                a.component.sleeping = !1;
                a.type == h.id_BodyType_KINEMATIC || a.type == h.id_BodyType_STATIC ? this.staticsleep.inlined_add(a) : this.live.inlined_add(a);
                for (var c = a.constraints.head; null != c;) { var d = c.elt;
                    d.space == this && this.wake_constraint(d);
                    c = c.next }
                for (c =
                    a.arbiters.head; null != c;) {
                    d = c.elt;
                    if (d.sleeping)
                        if (d.sleeping = !1, d.up_stamp += this.stamp + (this.midstep ? 0 : 1) - d.sleep_stamp, d.type == aa.COL) { var e = d.colarb;
                            e.stat ? this.c_arbiters_true.inlined_add(e) : this.c_arbiters_false.inlined_add(e) } else d.type == aa.FLUID ? this.f_arbiters.inlined_add(d.fluidarb) : this.s_arbiters.inlined_add(d.sensorarb);
                    d.type != aa.SENSOR && !d.cleared && d.up_stamp >= this.stamp && 0 != (d.immState & h.id_ImmState_ACCEPT) && (d.b1.type == h.id_BodyType_DYNAMIC && d.b1.component.sleeping && (e = d.b1, e.world ||
                        (e.component.waket = this.stamp + (this.midstep ? 0 : 1), e.type == h.id_BodyType_KINEMATIC && (e.kinematicDelaySleep = !0), e.component.sleeping && this.really_wake(e, !1))), d.b2.type == h.id_BodyType_DYNAMIC && d.b2.component.sleeping && (d = d.b2, d.world || (d.component.waket = this.stamp + (this.midstep ? 0 : 1), d.type == h.id_BodyType_KINEMATIC && (d.kinematicDelaySleep = !0), d.component.sleeping && this.really_wake(d, !1))));
                    c = c.next
                }!b && a.type == h.id_BodyType_DYNAMIC && this.bodyCbWake(a);
                if (!b && !this.bphase.is_sweep && a.type != h.id_BodyType_STATIC)
                    for (c =
                        a.shapes.head; null != c;) d = c.elt, null != d.node && this.bphase.sync(d), c = c.next
            } else this.wakeIsland(a.component.island)
        },
        wake_constraint: function(a, b) { null == b && (b = !1); return a.active && (a.component.waket = this.stamp + (this.midstep ? 0 : 1), a.component.sleeping) ? (null == a.component.island ? (a.component.sleeping = !1, this.live_constraints.inlined_add(a), a.wake_connected(), b || this.constraintCbWake(a)) : this.wakeIsland(a.component.island), !0) : !1 },
        doForests: function(a) {
            for (var b = this.c_arbiters_false.head; null != b;) {
                var c =
                    b.elt;
                if (!c.cleared && c.up_stamp == this.stamp && 0 != (c.immState & h.id_ImmState_ACCEPT) && c.b1.type == h.id_BodyType_DYNAMIC && c.b2.type == h.id_BodyType_DYNAMIC) {
                    var d;
                    if (c.b1.component == c.b1.component.parent) d = c.b1.component;
                    else { d = c.b1.component; for (var e = null; d != d.parent;) { var f = d.parent;
                            d.parent = e;
                            e = d;
                            d = f } for (; null != e;) f = e.parent, e.parent = d, e = f }
                    if (c.b2.component == c.b2.component.parent) c = c.b2.component;
                    else {
                        c = c.b2.component;
                        for (e = null; c != c.parent;) f = c.parent, c.parent = e, e = c, c = f;
                        for (; null != e;) f = e.parent, e.parent =
                            c, e = f
                    }
                    d != c && (d.rank < c.rank ? d.parent = c : d.rank > c.rank ? c.parent = d : (c.parent = d, d.rank++))
                }
                b = b.next
            }
            for (b = this.f_arbiters.head; null != b;) {
                c = b.elt;
                if (!c.cleared && c.up_stamp == this.stamp && 0 != (c.immState & h.id_ImmState_ACCEPT) && c.b1.type == h.id_BodyType_DYNAMIC && c.b2.type == h.id_BodyType_DYNAMIC) {
                    if (c.b1.component == c.b1.component.parent) d = c.b1.component;
                    else { d = c.b1.component; for (e = null; d != d.parent;) f = d.parent, d.parent = e, e = d, d = f; for (; null != e;) f = e.parent, e.parent = d, e = f }
                    if (c.b2.component == c.b2.component.parent) c =
                        c.b2.component;
                    else { c = c.b2.component; for (e = null; c != c.parent;) f = c.parent, c.parent = e, e = c, c = f; for (; null != e;) f = e.parent, e.parent = c, e = f } d != c && (d.rank < c.rank ? d.parent = c : d.rank > c.rank ? c.parent = d : (c.parent = d, d.rank++))
                }
                b = b.next
            }
            for (b = this.live_constraints.head; null != b;) b.elt.forest(), b = b.next;
            for (; null != this.live.head;) {
                d = this.live.inlined_pop_unsafe();
                b = d.component;
                if (b == b.parent) c = b;
                else { c = b; for (e = null; c != c.parent;) f = c.parent, c.parent = e, e = c, c = f; for (; null != e;) f = e.parent, e.parent = c, e = f } null == c.island && (null ==
                    Ha.zpp_pool ? c.island = new Ha : (c.island = Ha.zpp_pool, Ha.zpp_pool = c.island.next, c.island.next = null), c.island.waket = 0, this.islands.inlined_add(c.island), c.island.sleep = !0);
                b.island = c.island;
                b.island.comps.inlined_add(b);
                d = d.atRest(a);
                b.island.sleep = b.island.sleep && d;
                b.waket > b.island.waket && (b.island.waket = b.waket)
            }
            for (; null != this.live_constraints.head;) {
                a = this.live_constraints.inlined_pop_unsafe().component;
                if (a == a.parent) b = a;
                else {
                    b = a;
                    for (d = null; b != b.parent;) c = b.parent, b.parent = d, d = b, b = c;
                    for (; null != d;) c =
                        d.parent, d.parent = b, d = c
                }
                a.island = b.island;
                a.island.comps.inlined_add(a);
                a.waket > a.island.waket && (a.island.waket = a.waket)
            }
            for (; null != this.islands.next;)
                if (a = this.islands.inlined_pop_unsafe(), a.sleep)
                    for (a = a.comps.head; null != a;) { d = a.elt; if (d.isBody) { b = d.body;
                            b.velx = 0;
                            b.vely = 0;
                            b.angvel = 0;
                            d.sleeping = !0; for (d = b.shapes.head; null != d;) this.bphase.sync(d.elt), d = d.next;
                            this.bodyCbSleep(b) } else this.constraintCbSleep(d.constraint), d.sleeping = !0;
                        a = a.next } else {
                        for (; null != a.comps.head;) b = a.comps.inlined_pop_unsafe(),
                            b.waket = a.waket, b.isBody ? this.live.inlined_add(b.body) : this.live_constraints.inlined_add(b.constraint), b.sleeping = !1, b.island = null, b.parent = b, b.rank = 0;
                        a.next = Ha.zpp_pool;
                        Ha.zpp_pool = a
                    }
        },
        sleepArbiters: function() {
            var a = null,
                b = this.c_arbiters_true,
                c = b.head,
                d = null != this.c_arbiters_false;
            d && null == c && (d = !1, c = this.c_arbiters_false.head, b = this.c_arbiters_false, a = null);
            for (; null != c;) {
                var e = c.elt;
                e.b1.component.sleeping && e.b2.component.sleeping ? (e.sleep_stamp = this.stamp, e.sleeping = !0, c = b.inlined_erase(a)) :
                    (a = c, c = c.next);
                d && null == c && (d = !1, c = this.c_arbiters_false.head, b = this.c_arbiters_false, a = null)
            }
            a = null;
            b = this.f_arbiters;
            c = b.head;
            d = !1;
            for (; null != c;) e = c.elt, e.b1.component.sleeping && e.b2.component.sleeping ? (e.sleep_stamp = this.stamp, e.sleeping = !0, c = b.inlined_erase(a)) : (a = c, c = c.next), d && null == c && (d = !1, a = b = null);
            a = null;
            b = this.s_arbiters;
            c = b.head;
            d = !1;
            for (; null != c;) e = c.elt, e.b1.component.sleeping && e.b2.component.sleeping ? (e.sleep_stamp = this.stamp, e.sleeping = !0, c = b.inlined_erase(a)) : (a = c, c = c.next), d && null ==
                c && (d = !1, a = b = null)
        },
        static_validation: function(a) { null != a.shapes.head && a.validate_aabb();
            a.validate_mass();
            a.validate_inertia(); for (var b = a.shapes.head; null != b;) { var c = b.elt;
                c.type == h.id_ShapeType_POLYGON && (c.polygon.splice_collinear(), c.polygon.validate_gaxi());
                b = b.next } a.sweepFrozen = !0 },
        validation: function() {
            this.cbsets.validate();
            for (var a = this.live.head; null != a;) {
                var b = a.elt;
                b.sweepRadius = 0;
                for (var c = b.shapes.head; null != c;) {
                    var d = c.elt;
                    d.type == h.id_ShapeType_POLYGON && (d.polygon.splice_collinear(),
                        d.polygon.validate_gaxi());
                    d.validate_sweepRadius();
                    d.sweepRadius > b.sweepRadius && (b.sweepRadius = d.sweepRadius);
                    c = c.next
                }
                b.validate_mass();
                b.validate_inertia();
                null != b.shapes.head && (b.validate_aabb(), b.validate_worldCOM());
                b.validate_gravMass();
                b.zip_axis && (b.zip_axis = !1, b.axisx = Math.sin(b.rot), b.axisy = Math.cos(b.rot), null);
                if (b.component.woken && null != b.cbSet)
                    for (c = b.cbSet.bodylisteners.head; null != c;) d = c.elt, d.event == h.id_CbEvent_WAKE && (d = this.push_callback(d), d.event = h.id_CbEvent_WAKE, d.body = b), c =
                        c.next;
                b.component.woken = !1;
                for (b = b.shapes.head; null != b;) this.bphase.sync(b.elt), b = b.next;
                a = a.next
            }
            for (a = this.kinematics.head; null != a;) {
                b = a.elt;
                b.sweepRadius = 0;
                for (c = b.shapes.head; null != c;) d = c.elt, d.type == h.id_ShapeType_POLYGON && (d.polygon.splice_collinear(), d.polygon.validate_gaxi()), d.validate_sweepRadius(), d.sweepRadius > b.sweepRadius && (b.sweepRadius = d.sweepRadius), c = c.next;
                b.validate_mass();
                b.validate_inertia();
                null != b.shapes.head && (b.validate_aabb(), b.validate_worldCOM());
                b.validate_gravMass();
                b.zip_axis && (b.zip_axis = !1, b.axisx = Math.sin(b.rot), b.axisy = Math.cos(b.rot), null);
                for (b = b.shapes.head; null != b;) this.bphase.sync(b.elt), b = b.next;
                a = a.next
            }
            for (a = this.live_constraints.head; null != a;) { b = a.elt; if (b.active) { if (b.component.woken && null != b.cbSet)
                        for (c = b.cbSet.conlisteners.head; null != c;) d = c.elt, d.event == h.id_CbEvent_WAKE && (d = this.push_callback(d), d.event = h.id_CbEvent_WAKE, d.constraint = b), c = c.next;
                    b.component.woken = !1 } a = a.next }
        },
        updateVel: function(a) {
            for (var b = 1 - a * this.global_lin_drag, c = 1 - a * this.global_ang_drag,
                    d = this.live.head; null != d;) { var e = d.elt; if (0 != e.smass) { var f = a * e.imass;
                    e.velx = b * e.velx + (e.forcex + this.gravityx * e.gravMass) * f;
                    e.vely = b * e.vely + (e.forcey + this.gravityy * e.gravMass) * f } if (0 != e.sinertia) { var g = f = 0,
                        f = e.worldCOMx - e.posx,
                        g = e.worldCOMy - e.posy;
                    e.angvel = c * e.angvel + (e.torque + (this.gravityy * f - this.gravityx * g) * e.gravMass) * a * e.iinertia } d = d.next }
        },
        updatePos: function(a) {
            for (var b = 2 * Math.PI / a, c = this.live.head; null != c;) {
                var d = c.elt;
                d.pre_posx = d.posx;
                d.pre_posy = d.posy;
                d.pre_rot = d.rot;
                d.sweepTime = 0;
                d.sweep_angvel =
                    d.angvel % b;
                d.sweepIntegrate(a);
                if (d.disableCCD) d.sweepFrozen = !0, d.bullet = !1;
                else {
                    var e = t.staticCCDLinearThreshold * d.sweepRadius,
                        f = t.staticCCDAngularThreshold;
                    if ((d.velx * d.velx + d.vely * d.vely) * a * a > e * e || d.angvel * d.angvel * a * a > f * f || d.type == h.id_BodyType_KINEMATIC) {
                        e = d.sweep_angvel;
                        0 > e && (e = -e);
                        for (var f = 1 / e, g = d.shapes.head; null != g;) {
                            var i = g.elt,
                                k = i.aabb,
                                l = k.minx,
                                m = k.miny,
                                n = k.maxx,
                                o = k.maxy,
                                r = 0.008333333333333333 * e * a * i.sweepCoef | 0;
                            8 < r && (r = 8);
                            var s = e * a / r;
                            d.sweepIntegrate(a);
                            i.type == h.id_ShapeType_CIRCLE ? i.circle._force_validate_aabb() :
                                i.polygon._force_validate_aabb();
                            l < k.minx ? k.minx = l : l = k.minx;
                            m < k.miny ? k.miny = m : m = k.miny;
                            n > k.maxx ? k.maxx = n : n = k.maxx;
                            o > k.maxy ? k.maxy = o : o = k.maxy;
                            for (var u = 1; u < r;) { var v = u++;
                                d.sweepIntegrate(s * v * f);
                                i.type == h.id_ShapeType_CIRCLE ? i.circle._force_validate_aabb() : i.polygon._force_validate_aabb();
                                l < k.minx ? k.minx = l : l = k.minx;
                                m < k.miny ? k.miny = m : m = k.miny;
                                n > k.maxx ? k.maxx = n : n = k.maxx;
                                o > k.maxy ? k.maxy = o : o = k.maxy } this.bphase.sync(i);
                            g = g.next
                        }
                        d.sweepFrozen = !1;
                        if (d.type == h.id_BodyType_DYNAMIC && d.bulletEnabled && (e = t.bulletCCDLinearThreshold *
                                d.sweepRadius, f = t.bulletCCDAngularThreshold, (d.velx * d.velx + d.vely * d.vely) * a * a > e * e || d.angvel * d.angvel * a * a > f * f)) d.bullet = !0
                    } else d.sweepFrozen = !0, d.bullet = !1
                }
                c = c.next
            }
            for (c = this.kinematics.head; null != c;) {
                d = c.elt;
                d.pre_posx = d.posx;
                d.pre_posy = d.posy;
                d.pre_rot = d.rot;
                d.sweepTime = 0;
                d.sweep_angvel = d.angvel % b;
                d.sweepIntegrate(a);
                if (d.disableCCD) d.sweepFrozen = !0, d.bullet = !1;
                else if (e = t.staticCCDLinearThreshold * d.sweepRadius, f = t.staticCCDAngularThreshold, (d.velx * d.velx + d.vely * d.vely) * a * a > e * e || d.angvel * d.angvel *
                    a * a > f * f || d.type == h.id_BodyType_KINEMATIC) {
                    e = d.sweep_angvel;
                    0 > e && (e = -e);
                    f = 1 / e;
                    for (g = d.shapes.head; null != g;) {
                        i = g.elt;
                        k = i.aabb;
                        l = k.minx;
                        m = k.miny;
                        n = k.maxx;
                        o = k.maxy;
                        r = 0.008333333333333333 * e * a * i.sweepCoef | 0;
                        8 < r && (r = 8);
                        s = e * a / r;
                        d.sweepIntegrate(a);
                        i.type == h.id_ShapeType_CIRCLE ? i.circle._force_validate_aabb() : i.polygon._force_validate_aabb();
                        l < k.minx ? k.minx = l : l = k.minx;
                        m < k.miny ? k.miny = m : m = k.miny;
                        n > k.maxx ? k.maxx = n : n = k.maxx;
                        o > k.maxy ? k.maxy = o : o = k.maxy;
                        for (u = 1; u < r;) v = u++, d.sweepIntegrate(s * v * f), i.type == h.id_ShapeType_CIRCLE ?
                            i.circle._force_validate_aabb() : i.polygon._force_validate_aabb(), l < k.minx ? k.minx = l : l = k.minx, m < k.miny ? k.miny = m : m = k.miny, n > k.maxx ? k.maxx = n : n = k.maxx, o > k.maxy ? k.maxy = o : o = k.maxy;
                        this.bphase.sync(i);
                        g = g.next
                    }
                    d.sweepFrozen = !1;
                    if (d.type == h.id_BodyType_DYNAMIC && d.bulletEnabled && (e = t.bulletCCDLinearThreshold * d.sweepRadius, f = t.bulletCCDAngularThreshold, (d.velx * d.velx + d.vely * d.vely) * a * a > e * e || d.angvel * d.angvel * a * a > f * f)) d.bullet = !0
                } else d.sweepFrozen = !0, d.bullet = !1;
                c = c.next
            }
        },
        presteparb: function(a, b, c) {
            null == c &&
                (c = !1);
            var d = this;
            if (!a.cleared && a.b1.component.sleeping && a.b2.component.sleeping) return a.sleep_stamp = this.stamp, a.sleeping = !0;
            if (!a.cleared || 0 != a.present || a.intchange) {
                var e = !c && a.up_stamp == this.stamp - 1 && !a.cleared && !a.intchange,
                    c = a.fresh && !a.cleared && !a.intchange;
                e && (a.endGenerated = this.stamp);
                if (c || e || a.cleared || a.intchange) {
                    this.inlined_MRCA_chains(a.ws1, a.ws2);
                    for (e = this.mrca1.head; null != e;) {
                        for (var f = e.elt, g = this.mrca2.head; null != g;) {
                            var i = g.elt,
                                k = f.cbSet,
                                l = i.cbSet;
                            if (!k.manager.pair(k, l).empty_intersection()) {
                                var m = [cb.get(f, i)];
                                if (c || a.intchange) { null == m[0] && (m[0] = tb.get(f, i), this.add_callbackset(m[0]));
                                    k.manager.pair(k, l).forall(h.id_CbEvent_BEGIN, function(b) { return function(c) { if (0 != (c.itype & a.type) && b[0].empty_arb(c.itype)) { var e = d.push_callback(c);
                                                e.event = h.id_CbEvent_BEGIN;
                                                cb.int_callback(b[0], c, e);
                                                e.set = b[0] } } }(m)); if (i = !m[0].arbiters.inlined_has(a)) m[0].arbiters.inlined_add(a), i = !0;
                                    i && a.present++ } else a.present--, m[0].remove_arb(a), k.manager.pair(k, l).forall(h.id_CbEvent_END, function(b) {
                                    return function(c) {
                                        if (0 !=
                                            (c.itype & a.type) && b[0].empty_arb(c.itype)) { var e = d.push_callback(c);
                                            e.event = h.id_CbEvent_END;
                                            cb.int_callback(b[0], c, e);
                                            e.set = b[0] }
                                    }
                                }(m)), null == m[0].arbiters.head && this.remove_callbackset(m[0])
                            }
                            g = g.next
                        }
                        e = e.next
                    }
                }
                a.fresh = !1;
                a.intchange = !1
            }
            if (a.cleared || a.up_stamp + (a.type == aa.COL ? t.arbiterExpirationDelay : 0) < this.stamp) return a.type == aa.SENSOR ? a.sensorarb.retire() : a.type == aa.FLUID ? a.fluidarb.retire() : a.colarb.retire(), !0;
            c = a.active;
            a.active = a.presentable = a.up_stamp == this.stamp;
            0 != (a.immState & h.id_ImmState_ACCEPT) ?
                a.active && a.type != aa.SENSOR && (null != a.colarb ? a.colarb.preStep(b) && (a.active = !1) : a.fluidarb.preStep(this, b)) : null != a.colarb && a.colarb.cleanupContacts() && (a.active = !1);
            c != a.active && (a.b1.arbiters.modified = !0, a.b2.arbiters.modified = !0, this.c_arbiters_true.modified = this.c_arbiters_false.modified = !0, this.s_arbiters.modified = this.f_arbiters.modified = !0);
            return !1
        },
        prestep: function(a) {
            for (var b = null, c = this.live_constraints.head; null != c;) {
                var d = c.elt;
                d.preStep(a) ? (c = this.live_constraints.erase(b), d.broken(),
                    this.constraintCbBreak(d), d.removeOnBreak ? (d.component.sleeping = !0, this.midstep = !1, null != d.compound ? d.compound.wrap_constraints.remove(d.outer) : this.wrap_constraints.remove(d.outer), this.midstep = !0) : d.active = !1, d.clearcache()) : (b = c, c = c.next)
            }
            var b = null,
                c = this.c_arbiters_true,
                d = c.head,
                e = null != this.c_arbiters_false;
            e && null == d && (e = !1, d = this.c_arbiters_false.head, c = this.c_arbiters_false, b = null);
            for (; null != d;) this.presteparb(d.elt, a) ? d = c.inlined_erase(b) : (b = d, d = d.next), e && null == d && (e = !1, d = this.c_arbiters_false.head,
                c = this.c_arbiters_false, b = null);
            b = null;
            c = this.f_arbiters;
            d = c.head;
            e = !1;
            for (; null != d;) this.presteparb(d.elt, a) ? d = c.inlined_erase(b) : (b = d, d = d.next), e && null == d && (e = !1, b = c = null);
            b = null;
            c = this.s_arbiters;
            d = c.head;
            e = !1;
            for (; null != d;) this.presteparb(d.elt, a) ? d = c.inlined_erase(b) : (b = d, d = d.next), e && null == d && (e = !1, b = c = null)
        },
        warmStart: function() {
            for (var a = this.f_arbiters.head; null != a;) { var b = a.elt;
                b.active && 0 != (b.immState & h.id_ImmState_ACCEPT) && b.warmStart();
                a = a.next } a = this.c_arbiters_false.head;
            b = !0;
            null ==
                a && (a = this.c_arbiters_true.head, b = !1);
            for (; null != a;) { var c = a.elt;
                c.active && 0 != (c.immState & h.id_ImmState_ACCEPT) && c.warmStart();
                a = a.next;
                b && null == a && (a = this.c_arbiters_true.head, b = !1) }
            for (a = this.live_constraints.head; null != a;) a.elt.warmStart(), a = a.next
        },
        iterateVel: function(a) {
            for (var b = 0; b < a;) {
                b++;
                for (var c = this.f_arbiters.head; null != c;) { var d = c.elt;
                    d.active && 0 != (d.immState & h.id_ImmState_ACCEPT) && d.applyImpulseVel();
                    c = c.next } c = null;
                for (d = this.live_constraints.head; null != d;) {
                    var e = d.elt;
                    e.applyImpulseVel() ?
                        (d = this.live_constraints.erase(c), e.broken(), this.constraintCbBreak(e), e.removeOnBreak ? (e.component.sleeping = !0, this.midstep = !1, null != e.compound ? e.compound.wrap_constraints.remove(e.outer) : this.wrap_constraints.remove(e.outer), this.midstep = !0) : e.active = !1, e.clearcache()) : (c = d, d = d.next)
                }
                c = this.c_arbiters_false.head;
                d = !0;
                null == c && (c = this.c_arbiters_true.head, d = !1);
                for (; null != c;) e = c.elt, e.active && 0 != (e.immState & h.id_ImmState_ACCEPT) && e.applyImpulseVel(), c = c.next, d && null == c && (c = this.c_arbiters_true.head,
                    d = !1)
            }
        },
        iteratePos: function(a) {
            for (var b = 0; b < a;) {
                b++;
                for (var c = null, d = this.live_constraints.head; null != d;) { var e = d.elt;!e.__velocity && e.stiff && e.applyImpulsePos() ? (d = this.live_constraints.erase(c), e.broken(), this.constraintCbBreak(e), e.removeOnBreak ? (e.component.sleeping = !0, this.midstep = !1, null != e.compound ? e.compound.wrap_constraints.remove(e.outer) : this.wrap_constraints.remove(e.outer), this.midstep = !0) : e.active = !1, e.clearcache()) : (c = d, d = d.next) } c = this.c_arbiters_false.head;
                d = !0;
                null == c && (c = this.c_arbiters_true.head,
                    d = !1);
                for (; null != c;) e = c.elt, e.active && 0 != (e.immState & h.id_ImmState_ACCEPT) && e.applyImpulsePos(), c = c.next, d && null == c && (c = this.c_arbiters_true.head, d = !1)
            }
        },
        group_ignore: function(a, b) { var c = a.lookup_group(); if (null == c) return !1; var d = b.lookup_group(); if (null == d) return !1; for (var e = !1; null != c && null != d;) { if (c == d) { e = c.ignore; break } c.depth < d.depth ? d = d.group : c = c.group } return e },
        interactionType: function(a, b, c, d) {
            var e;
            e = !1;
            for (var f = c.constraints.head; null != f;) {
                var g = f.elt;
                if (g.ignore && g.pair_exists(c.id, d.id)) {
                    e = !0;
                    break
                }
                f = f.next
            }
            return !e && !this.group_ignore(a, b) ? (a.sensorEnabled || b.sensorEnabled) && a.filter.shouldSense(b.filter) ? 2 : (a.fluidEnabled || b.fluidEnabled) && a.filter.shouldFlow(b.filter) && !(0 == c.imass && 0 == d.imass && 0 == c.iinertia && 0 == d.iinertia) ? 0 : a.filter.shouldCollide(b.filter) && !(0 == c.imass && 0 == d.imass && 0 == c.iinertia && 0 == d.iinertia) ? 1 : -1 : -1
        },
        narrowPhase: function(a, b, c, d, e) {
            var f = this,
                g = null,
                i = a.body,
                k = b.body,
                l = this.interactionType(a, b, i, k);
            if (-1 != l) {
                var m, n;
                a.type > b.type ? (m = b, n = a) : a.type == b.type ? a.id <
                    b.id ? (m = a, n = b) : (n = a, m = b) : (m = a, n = b);
                var o = m == b;
                if (0 == l) {
                    var r;
                    if (null == d) { for (var s = null, t = (i.arbiters.length < k.arbiters.length ? i : k).arbiters.head; null != t;) { var u = t.elt; if (u.id == m.id && u.di == n.id) { s = u; break } t = t.next } r = s } else r = d;
                    var v = null == r,
                        q, w = !1;
                    v ? (null == hc.zpp_pool ? q = new hc : (q = hc.zpp_pool, hc.zpp_pool = q.next, q.next = null), null) : null == r.fluidarb ? (r.cleared = !0, r.b1.arbiters.inlined_try_remove(r), r.b2.arbiters.inlined_try_remove(r), null != r.pair && (r.pair.arb = null, r.pair = null), r.active = !1, this.f_arbiters.modified = !0, null == hc.zpp_pool ? q = new hc : (q = hc.zpp_pool, hc.zpp_pool = q.next, q.next = null), null, w = v = q.intchange = !0) : q = r.fluidarb;
                    var x = h.id_InteractionType_FLUID;
                    if (v || q.stamp != this.stamp || e)
                        if (q.stamp = this.stamp, P.flowCollide(m, n, q)) {
                            v ? (q.b1 = a.body, q.ws1 = a, q.b2 = b.body, q.ws2 = b, q.id = m.id, q.di = n.id, q.b1.arbiters.inlined_add(q), q.b2.arbiters.inlined_add(q), q.active = !0, q.present = 0, q.cleared = !1, q.sleeping = !1, q.fresh = !1, q.presentable = !1, q.nx = 0, q.ny = 1, q.dampx = 0, q.dampy = 0, q.adamp = 0, this.f_arbiters.inlined_add(q), q.fresh = !w) : q.fresh = q.up_stamp < this.stamp - 1 || q.endGenerated == this.stamp && e;
                            q.up_stamp = q.stamp;
                            if (q.fresh || 0 == (q.immState & h.id_ImmState_ALWAYS)) {
                                q.immState = h.id_ImmState_ACCEPT;
                                var z = !1;
                                this.inlined_MRCA_chains(q.ws1.id > q.ws2.id ? q.ws2 : q.ws1, q.ws1.id > q.ws2.id ? q.ws1 : q.ws2);
                                for (var y = this.mrca1.head; null != y;) {
                                    for (var A = y.elt, D = this.mrca2.head; null != D;) {
                                        var E = D.elt,
                                            F = A.cbSet,
                                            G = E.cbSet;
                                        if (!F.manager.pair(F, G).empty_intersection()) {
                                            var C = null,
                                                H = null;
                                            this.prelisteners.inlined_clear();
                                            F.manager.pair(F, G).forall(h.id_CbEvent_PRE,
                                                function(a) { return function(b) { 0 != (b.itype & x) && (a[0] = f.prelisteners.inlined_insert(a[0], b), z = z || !b.pure) } }([null]));
                                            if (null != this.prelisteners.head)
                                                if (C = cb.get(A, E), null == C && (H = tb.get(A, E), this.add_callbackset(H)), null == C || (C.FLUIDstamp != this.stamp || e) && 0 == (C.FLUIDstate & h.id_ImmState_ALWAYS)) {
                                                    null != H && (C = H);
                                                    if (null != C)
                                                        for (var I = this.prelisteners.head; null != I;) I.elt.itype == h.id_InteractionType_ANY && (C.COLLISIONstamp = this.stamp, C.SENSORstamp = this.stamp), C.FLUIDstamp = this.stamp, I = I.next;
                                                    var K = q.active;
                                                    q.active = !0;
                                                    this.precb.zpp_inner.pre_arbiter = q;
                                                    this.precb.zpp_inner.set = C;
                                                    for (var J = this.prelisteners.head; null != J;) {
                                                        var M = J.elt;
                                                        this.precb.zpp_inner.listener = M;
                                                        cb.int_callback(C, M, this.precb.zpp_inner);
                                                        this.precb.zpp_inner.pre_swapped = A != this.precb.zpp_inner.int1;
                                                        var L = M.handlerp(this.precb);
                                                        if (null != L) {
                                                            var O = q,
                                                                N, Q = L;
                                                            null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new Na, h.internal = !1);
                                                            if (Q == h.PreFlag_ACCEPT) N = h.id_ImmState_ACCEPT | h.id_ImmState_ALWAYS;
                                                            else {
                                                                var R, U = L;
                                                                null == h.PreFlag_ACCEPT_ONCE &&
                                                                    (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new Na, h.internal = !1);
                                                                if (U == h.PreFlag_ACCEPT_ONCE) R = h.id_ImmState_ACCEPT;
                                                                else { var W = L;
                                                                    null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new Na, h.internal = !1);
                                                                    R = W == h.PreFlag_IGNORE ? h.id_ImmState_IGNORE | h.id_ImmState_ALWAYS : h.id_ImmState_IGNORE } N = R
                                                            }
                                                            O.immState = N
                                                        }
                                                        J = J.next
                                                    }
                                                    q.active = K;
                                                    if (null != C)
                                                        for (var S = this.prelisteners.head; null != S;) S.elt.itype == h.id_InteractionType_ANY && (C.COLLISIONstate = q.immState, C.SENSORstate = q.immState), C.FLUIDstate = q.immState, S = S.next
                                                } else null ==
                                                    C ? 0 == (q.immState & h.id_ImmState_ALWAYS) && (q.immState = h.id_ImmState_ACCEPT) : q.immState = C.FLUIDstate
                                        }
                                        D = D.next
                                    }
                                    y = y.next
                                }
                                if (z && 0 == (q.immState & h.id_ImmState_ALWAYS)) {
                                    if (q.b1.type == h.id_BodyType_DYNAMIC) { var V = q.b1;
                                        V.world || (V.component.waket = this.stamp + (this.midstep ? 0 : 1), V.type == h.id_BodyType_KINEMATIC && (V.kinematicDelaySleep = !0), V.component.sleeping && this.really_wake(V, !1)) }
                                    if (q.b1.type == h.id_BodyType_DYNAMIC) {
                                        var X = q.b2;
                                        X.world || (X.component.waket = this.stamp + (this.midstep ? 0 : 1), X.type == h.id_BodyType_KINEMATIC &&
                                            (X.kinematicDelaySleep = !0), X.component.sleeping && this.really_wake(X, !1))
                                    }
                                }
                            }
                            if (0 != (q.immState & h.id_ImmState_ACCEPT)) {
                                if (q.b1.type == h.id_BodyType_DYNAMIC && q.b1.component.sleeping) { var Y = q.b1;
                                    Y.world || (Y.component.waket = this.stamp + (this.midstep ? 0 : 1), Y.type == h.id_BodyType_KINEMATIC && (Y.kinematicDelaySleep = !0), Y.component.sleeping && this.really_wake(Y, !1)) }
                                if (q.b2.type == h.id_BodyType_DYNAMIC && q.b2.component.sleeping) {
                                    var Z = q.b2;
                                    Z.world || (Z.component.waket = this.stamp + (this.midstep ? 0 : 1), Z.type == h.id_BodyType_KINEMATIC &&
                                        (Z.kinematicDelaySleep = !0), Z.component.sleeping && this.really_wake(Z, !1))
                                }
                            }
                            q.sleeping && (q.sleeping = !1, this.f_arbiters.inlined_add(q));
                            g = q
                        } else if (v) { var ba = q;
                        ba.next = hc.zpp_pool;
                        hc.zpp_pool = ba;
                        g = null } else g = q;
                    else g = q
                } else if (1 == l) {
                    var ca;
                    ca = c ? this.c_arbiters_true : this.c_arbiters_false;
                    var $;
                    if (null == d) { for (var fa = null, ea = (i.arbiters.length < k.arbiters.length ? i : k).arbiters.head; null != ea;) { var ga = ea.elt; if (ga.id == m.id && ga.di == n.id) { fa = ga; break } ea = ea.next } $ = fa } else $ = d;
                    var da = null == $,
                        B, ha = !1;
                    da ? (null ==
                        Nc.zpp_pool ? B = new Nc : (B = Nc.zpp_pool, Nc.zpp_pool = B.next, B.next = null), null, B.stat = c) : null == $.colarb ? ($.cleared = !0, $.b1.arbiters.inlined_try_remove($), $.b2.arbiters.inlined_try_remove($), null != $.pair && ($.pair.arb = null, $.pair = null), $.active = !1, this.f_arbiters.modified = !0, null == Nc.zpp_pool ? B = new Nc : (B = Nc.zpp_pool, Nc.zpp_pool = B.next, B.next = null), null, B.intchange = !0, B.stat = c, ha = da = !0) : (B = $.colarb, o = m != B.s1, B.stat != c && (B.stat = c, B.sleeping || ((c ? this.c_arbiters_false : this.c_arbiters_true).remove(B), ca.add(B))));
                    var ka = h.id_InteractionType_COLLISION;
                    if (da || B.stamp != this.stamp || e)
                        if (B.stamp = this.stamp, P.contactCollide(m, n, B, o)) {
                            da ? (B.b1 = a.body, B.ws1 = a, B.b2 = b.body, B.ws2 = b, B.id = m.id, B.di = n.id, B.b1.arbiters.inlined_add(B), B.b2.arbiters.inlined_add(B), B.active = !0, B.present = 0, B.cleared = !1, B.sleeping = !1, B.fresh = !1, B.presentable = !1, B.s1 = a, B.s2 = b, B.userdef_restitution || (B.restitution = B.s1.material.elasticity <= Math.NEGATIVE_INFINITY || B.s2.material.elasticity <= Math.NEGATIVE_INFINITY ? 0 : B.s1.material.elasticity >= Math.POSITIVE_INFINITY ||
                                B.s2.material.elasticity >= Math.POSITIVE_INFINITY ? 1 : (B.s1.material.elasticity + B.s2.material.elasticity) / 2, 0 > B.restitution && (B.restitution = 0), 1 < B.restitution && (B.restitution = 1)), B.userdef_dyn_fric || (B.dyn_fric = Math.sqrt(B.s1.material.dynamicFriction * B.s2.material.dynamicFriction)), B.userdef_stat_fric || (B.stat_fric = Math.sqrt(B.s1.material.staticFriction * B.s2.material.staticFriction)), B.userdef_rfric || (B.rfric = Math.sqrt(B.s1.material.rollingFriction * B.s2.material.rollingFriction)), ca.inlined_add(B), B.fresh = !ha) : B.fresh = B.up_stamp < this.stamp - 1 || B.endGenerated == this.stamp && e;
                            B.up_stamp = B.stamp;
                            if (B.fresh || 0 == (B.immState & h.id_ImmState_ALWAYS)) {
                                B.immState = h.id_ImmState_ACCEPT;
                                var ia = !1;
                                this.inlined_MRCA_chains(B.ws1.id > B.ws2.id ? B.ws2 : B.ws1, B.ws1.id > B.ws2.id ? B.ws1 : B.ws2);
                                for (var ja = this.mrca1.head; null != ja;) {
                                    for (var la = ja.elt, ma = this.mrca2.head; null != ma;) {
                                        var na = ma.elt,
                                            pa = la.cbSet,
                                            wa = na.cbSet;
                                        if (!pa.manager.pair(pa, wa).empty_intersection()) {
                                            var aa = null,
                                                qa = null;
                                            this.prelisteners.inlined_clear();
                                            pa.manager.pair(pa,
                                                wa).forall(h.id_CbEvent_PRE, function(a) { return function(b) { 0 != (b.itype & ka) && (a[0] = f.prelisteners.inlined_insert(a[0], b), ia = ia || !b.pure) } }([null]));
                                            if (null != this.prelisteners.head)
                                                if (aa = cb.get(la, na), null == aa && (qa = tb.get(la, na), this.add_callbackset(qa)), null == aa || (aa.COLLISIONstamp != this.stamp || e) && 0 == (aa.COLLISIONstate & h.id_ImmState_ALWAYS)) {
                                                    null != qa && (aa = qa);
                                                    if (null != aa)
                                                        for (var ra = this.prelisteners.head; null != ra;) ra.elt.itype == h.id_InteractionType_ANY ? (aa.COLLISIONstamp = this.stamp, aa.SENSORstamp =
                                                            this.stamp, aa.FLUIDstamp = this.stamp) : aa.COLLISIONstamp = this.stamp, ra = ra.next;
                                                    var ya = B.active;
                                                    B.active = !0;
                                                    B.cleanupContacts();
                                                    this.precb.zpp_inner.pre_arbiter = B;
                                                    this.precb.zpp_inner.set = aa;
                                                    for (var sa = this.prelisteners.head; null != sa;) {
                                                        var xa = sa.elt;
                                                        this.precb.zpp_inner.listener = xa;
                                                        cb.int_callback(aa, xa, this.precb.zpp_inner);
                                                        this.precb.zpp_inner.pre_swapped = la != this.precb.zpp_inner.int1;
                                                        var ta = xa.handlerp(this.precb);
                                                        if (null != ta) {
                                                            var za = B,
                                                                Aa = ta,
                                                                Ca;
                                                            null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT =
                                                                new Na, h.internal = !1);
                                                            if (Aa == h.PreFlag_ACCEPT) Ca = h.id_ImmState_ACCEPT | h.id_ImmState_ALWAYS;
                                                            else { var Da, Ja = ta;
                                                                null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new Na, h.internal = !1); if (Ja == h.PreFlag_ACCEPT_ONCE) Da = h.id_ImmState_ACCEPT;
                                                                else { var Ka = ta;
                                                                    null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new Na, h.internal = !1);
                                                                    Da = Ka == h.PreFlag_IGNORE ? h.id_ImmState_IGNORE | h.id_ImmState_ALWAYS : h.id_ImmState_IGNORE } Ca = Da } za.immState = Ca
                                                        }
                                                        sa = sa.next
                                                    }
                                                    B.active = ya;
                                                    if (null != aa)
                                                        for (var Ga = this.prelisteners.head; null !=
                                                            Ga;) Ga.elt.itype == h.id_InteractionType_ANY ? (aa.COLLISIONstate = B.immState, aa.SENSORstate = B.immState, aa.FLUIDstate = B.immState) : aa.COLLISIONstate = B.immState, Ga = Ga.next
                                                } else null == aa ? 0 == (B.immState & h.id_ImmState_ALWAYS) && (B.immState = h.id_ImmState_ACCEPT) : B.immState = aa.COLLISIONstate
                                        }
                                        ma = ma.next
                                    }
                                    ja = ja.next
                                }
                                if (ia && 0 == (B.immState & h.id_ImmState_ALWAYS)) {
                                    if (B.b1.type == h.id_BodyType_DYNAMIC) {
                                        var Ea = B.b1;
                                        Ea.world || (Ea.component.waket = this.stamp + (this.midstep ? 0 : 1), Ea.type == h.id_BodyType_KINEMATIC && (Ea.kinematicDelaySleep = !0), Ea.component.sleeping && this.really_wake(Ea, !1))
                                    }
                                    if (B.b1.type == h.id_BodyType_DYNAMIC) { var Fa = B.b2;
                                        Fa.world || (Fa.component.waket = this.stamp + (this.midstep ? 0 : 1), Fa.type == h.id_BodyType_KINEMATIC && (Fa.kinematicDelaySleep = !0), Fa.component.sleeping && this.really_wake(Fa, !1)) }
                                }
                            }
                            if (0 != (B.immState & h.id_ImmState_ACCEPT)) {
                                if (B.b1.type == h.id_BodyType_DYNAMIC && B.b1.component.sleeping) {
                                    var Ha = B.b1;
                                    Ha.world || (Ha.component.waket = this.stamp + (this.midstep ? 0 : 1), Ha.type == h.id_BodyType_KINEMATIC && (Ha.kinematicDelaySleep = !0), Ha.component.sleeping && this.really_wake(Ha, !1))
                                }
                                if (B.b2.type == h.id_BodyType_DYNAMIC && B.b2.component.sleeping) { var Ia = B.b2;
                                    Ia.world || (Ia.component.waket = this.stamp + (this.midstep ? 0 : 1), Ia.type == h.id_BodyType_KINEMATIC && (Ia.kinematicDelaySleep = !0), Ia.component.sleeping && this.really_wake(Ia, !1)) }
                            }
                            B.sleeping && (B.sleeping = !1, ca.inlined_add(B));
                            g = B
                        } else if (da) {
                        var Ba = B;
                        Ba.userdef_dyn_fric = !1;
                        Ba.userdef_stat_fric = !1;
                        Ba.userdef_restitution = !1;
                        Ba.userdef_rfric = !1;
                        Ba.__ref_edge1 = Ba.__ref_edge2 = null;
                        Ba.next =
                            Nc.zpp_pool;
                        Nc.zpp_pool = Ba;
                        g = null
                    } else g = B;
                    else g = B
                } else {
                    var ua;
                    if (null == d) { for (var Ta = null, Ma = (i.arbiters.length < k.arbiters.length ? i : k).arbiters.head; null != Ma;) { var Qa = Ma.elt; if (Qa.id == m.id && Qa.di == n.id) { Ta = Qa; break } Ma = Ma.next } ua = Ta } else ua = d;
                    var La = null == ua,
                        T, Va = !1;
                    La ? (null == Tb.zpp_pool ? T = new Tb : (T = Tb.zpp_pool, Tb.zpp_pool = T.next, T.next = null), null) : null == ua.sensorarb ? (ua.cleared = !0, ua.b1.arbiters.inlined_try_remove(ua), ua.b2.arbiters.inlined_try_remove(ua), null != ua.pair && (ua.pair.arb = null, ua.pair =
                        null), ua.active = !1, this.f_arbiters.modified = !0, null == Tb.zpp_pool ? T = new Tb : (T = Tb.zpp_pool, Tb.zpp_pool = T.next, T.next = null), null, Va = La = T.intchange = !0) : T = ua.sensorarb;
                    var $a = h.id_InteractionType_SENSOR;
                    if (La || T.stamp != this.stamp || e)
                        if (T.stamp = this.stamp, P.testCollide(m, n)) {
                            La ? (T.b1 = a.body, T.ws1 = a, T.b2 = b.body, T.ws2 = b, T.id = m.id, T.di = n.id, T.b1.arbiters.inlined_add(T), T.b2.arbiters.inlined_add(T), T.active = !0, T.present = 0, T.cleared = !1, T.sleeping = !1, T.fresh = !1, T.presentable = !1, this.s_arbiters.inlined_add(T),
                                T.fresh = !Va) : T.fresh = T.up_stamp < this.stamp - 1 || T.endGenerated == this.stamp && e;
                            T.up_stamp = T.stamp;
                            if (T.fresh || 0 == (T.immState & h.id_ImmState_ALWAYS)) {
                                T.immState = h.id_ImmState_ACCEPT;
                                var Sa = !1;
                                this.inlined_MRCA_chains(T.ws1.id > T.ws2.id ? T.ws2 : T.ws1, T.ws1.id > T.ws2.id ? T.ws1 : T.ws2);
                                for (var Oa = this.mrca1.head; null != Oa;) {
                                    for (var Pa = Oa.elt, Ra = this.mrca2.head; null != Ra;) {
                                        var Ya = Ra.elt,
                                            Ua = Pa.cbSet,
                                            ab = Ya.cbSet;
                                        if (!Ua.manager.pair(Ua, ab).empty_intersection()) {
                                            var oa = null,
                                                Wa = null;
                                            this.prelisteners.inlined_clear();
                                            Ua.manager.pair(Ua,
                                                ab).forall(h.id_CbEvent_PRE, function(a) { return function(b) { 0 != (b.itype & $a) && (a[0] = f.prelisteners.inlined_insert(a[0], b), Sa = Sa || !b.pure) } }([null]));
                                            if (null != this.prelisteners.head)
                                                if (oa = cb.get(Pa, Ya), null == oa && (Wa = tb.get(Pa, Ya), this.add_callbackset(Wa)), null == oa || (oa.SENSORstamp != this.stamp || e) && 0 == (oa.SENSORstate & h.id_ImmState_ALWAYS)) {
                                                    null != Wa && (oa = Wa);
                                                    if (null != oa)
                                                        for (var Xa = this.prelisteners.head; null != Xa;) Xa.elt.itype == h.id_InteractionType_ANY ? (oa.COLLISIONstamp = this.stamp, oa.SENSORstamp = this.stamp,
                                                            oa.FLUIDstamp = this.stamp) : oa.SENSORstamp = this.stamp, Xa = Xa.next;
                                                    var fb = T.active;
                                                    T.active = !0;
                                                    this.precb.zpp_inner.pre_arbiter = T;
                                                    this.precb.zpp_inner.set = oa;
                                                    for (var Za = this.prelisteners.head; null != Za;) {
                                                        var eb = Za.elt;
                                                        this.precb.zpp_inner.listener = eb;
                                                        cb.int_callback(oa, eb, this.precb.zpp_inner);
                                                        this.precb.zpp_inner.pre_swapped = Pa != this.precb.zpp_inner.int1;
                                                        var db = eb.handlerp(this.precb);
                                                        if (null != db) {
                                                            var lb = T,
                                                                mb = db,
                                                                jb;
                                                            null == h.PreFlag_ACCEPT && (h.internal = !0, h.PreFlag_ACCEPT = new Na, h.internal = !1);
                                                            if (mb == h.PreFlag_ACCEPT) jb =
                                                                h.id_ImmState_ACCEPT | h.id_ImmState_ALWAYS;
                                                            else { var nb = db,
                                                                    kb;
                                                                null == h.PreFlag_ACCEPT_ONCE && (h.internal = !0, h.PreFlag_ACCEPT_ONCE = new Na, h.internal = !1); if (nb == h.PreFlag_ACCEPT_ONCE) kb = h.id_ImmState_ACCEPT;
                                                                else { var ob = db;
                                                                    null == h.PreFlag_IGNORE && (h.internal = !0, h.PreFlag_IGNORE = new Na, h.internal = !1);
                                                                    kb = ob == h.PreFlag_IGNORE ? h.id_ImmState_IGNORE | h.id_ImmState_ALWAYS : h.id_ImmState_IGNORE } jb = kb } lb.immState = jb
                                                        }
                                                        Za = Za.next
                                                    }
                                                    T.active = fb;
                                                    if (null != oa)
                                                        for (var ib = this.prelisteners.head; null != ib;) ib.elt.itype == h.id_InteractionType_ANY ?
                                                            (oa.COLLISIONstate = T.immState, oa.SENSORstate = T.immState, oa.FLUIDstate = T.immState) : oa.SENSORstate = T.immState, ib = ib.next
                                                } else null == oa ? 0 == (T.immState & h.id_ImmState_ALWAYS) && (T.immState = h.id_ImmState_ACCEPT) : T.immState = oa.SENSORstate
                                        }
                                        Ra = Ra.next
                                    }
                                    Oa = Oa.next
                                }
                                if (Sa && 0 == (T.immState & h.id_ImmState_ALWAYS)) {
                                    if (T.b1.type != h.id_BodyType_STATIC) {
                                        var gb = T.b1;
                                        gb.world || (gb.component.waket = this.stamp + (this.midstep ? 0 : 1), gb.type == h.id_BodyType_KINEMATIC && (gb.kinematicDelaySleep = !0), gb.component.sleeping && this.really_wake(gb,
                                            !1))
                                    }
                                    if (T.b2.type != h.id_BodyType_STATIC) { var hb = T.b2;
                                        hb.world || (hb.component.waket = this.stamp + (this.midstep ? 0 : 1), hb.type == h.id_BodyType_KINEMATIC && (hb.kinematicDelaySleep = !0), hb.component.sleeping && this.really_wake(hb, !1)) }
                                }
                            }
                            T.sleeping && (T.sleeping = !1, this.s_arbiters.inlined_add(T));
                            g = T
                        } else if (La) { var pb = T;
                        pb.next = Tb.zpp_pool;
                        Tb.zpp_pool = pb;
                        g = null } else g = T;
                    else g = T
                }
            }
            return g
        },
        MRCA_chains: function(a, b) { this.inlined_MRCA_chains(a, b) },
        inlined_MRCA_chains: function(a, b) {
            this.mrca1.inlined_clear();
            this.mrca2.inlined_clear();
            null != a.cbSet && this.mrca1.inlined_add(a);
            null != a.body.cbSet && this.mrca1.inlined_add(a.body);
            null != b.cbSet && this.mrca2.inlined_add(b);
            null != b.body.cbSet && this.mrca2.inlined_add(b.body);
            for (var c = a.body.compound, d = b.body.compound; c != d;)(null == c ? 0 : c.depth) < (null == d ? 0 : d.depth) ? (null != d.cbSet && this.mrca2.inlined_add(d), d = d.compound) : (null != c.cbSet && this.mrca1.inlined_add(c), c = c.compound)
        },
        __class__: om
    };
    var sf = function() { this.next = this.prev = this.shape = this.aabb = null };
    g["zpp_nape.space.ZPP_SweepData"] = sf;
    sf.__name__ = ["zpp_nape", "space", "ZPP_SweepData"];
    sf.prototype = { __class__: sf };
    var ql = function(a) { this.list = null;
        rf.call(this);
        this.space = a;
        this.is_sweep = !0;
        this.sweep = this };
    g["zpp_nape.space.ZPP_SweepPhase"] = ql;
    ql.__name__ = ["zpp_nape", "space", "ZPP_SweepPhase"];
    ql.__super__ = rf;
    ql.prototype = l(rf.prototype, {
        __insert: function(a) {
            var b;
            null == sf.zpp_pool ? b = new sf : (b = sf.zpp_pool, sf.zpp_pool = b.next, b.next = null);
            null;
            a.sweep = b;
            b.shape = a;
            b.aabb = a.aabb;
            b.next = this.list;
            null != this.list && (this.list.prev = b);
            this.list =
                b
        },
        __remove: function(a) { var b = a.sweep;
            null == b.prev ? this.list = b.next : b.prev.next = b.next;
            null != b.next && (b.next.prev = b.prev);
            a.sweep = null;
            b.prev = null;
            b.shape = null;
            b.aabb = null;
            b.next = sf.zpp_pool;
            sf.zpp_pool = b },
        sync_broadphase_fast: function() {
            for (var a = this.list.next; null != a;) {
                var b = a.next,
                    c = a.prev;
                if (!(a.aabb.minx > c.aabb.minx)) {
                    for (; null != c.prev && c.prev.aabb.minx > a.aabb.minx;) c = c.prev;
                    var d = a.prev;
                    d.next = a.next;
                    null != a.next && (a.next.prev = d);
                    null == c.prev ? (a.prev = null, this.list = a, a.next = c, c.prev = a) : (a.prev =
                        c.prev, c.prev = a, a.prev.next = a, a.next = c)
                }
                a = b
            }
        },
        broadphase: function(a, b) {
            if (null != this.list) {
                this.sync_broadphase_fast();
                for (var c = this.list; null != c;) {
                    for (var d = c.next, e = c.shape, f = e.body, g = c.aabb.maxx; null != d && !(d.aabb.minx > g);) {
                        var i = d.shape,
                            k = i.body;
                        if (k != f && !(f.type == h.id_BodyType_STATIC && k.type == h.id_BodyType_STATIC) && (!f.component.sleeping || !k.component.sleeping)) e.aabb.intersectY(i.aabb) && (b ? a.narrowPhase(e, i, f.type != h.id_BodyType_DYNAMIC || k.type != h.id_BodyType_DYNAMIC, null, !1) : a.continuousEvent(e,
                            i, f.type != h.id_BodyType_DYNAMIC || k.type != h.id_BodyType_DYNAMIC, null, !1));
                        d = d.next
                    }
                    c = c.next
                }
            }
        },
        clear: function() { for (; null != this.list;) this.list.shape.removedFromSpace(), this.__remove(this.list.shape) },
        __class__: ql
    });
    var Nm = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_CallbackSet"] = Nm;
    Nm.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CallbackSet"];
    Nm.prototype = {
        inlined_add: function(a) {
            var b;
            null == tf.zpp_pool ? b = new tf : (b = tf.zpp_pool, tf.zpp_pool = b.next,
                b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = tf.zpp_pool;
            tf.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: Nm
    };
    var Uf = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Body"] = Uf;
    Uf.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Body"];
    Uf.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Pc.zpp_pool ? b = new Pc : (b = Pc.zpp_pool, Pc.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a,
            b) { var c;
            null == Pc.zpp_pool ? c = new Pc : (c = Pc.zpp_pool, Pc.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++; return c },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Pc.zpp_pool;
            Pc.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() {
            var a =
                this.head.elt;
            this.pop();
            return a
        },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Pc.zpp_pool;
            Pc.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        clear: function() {
            for (; null !=
                this.head;) this.inlined_pop();
            this.pushmod = !0
        },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: Uf
    };
    var Bg = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Compound"] = Bg;
    Bg.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Compound"];
    Bg.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == ue.zpp_pool ? b = new ue : (b = ue.zpp_pool, ue.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = ue.zpp_pool;
            ue.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) {
            for (var b = null, c = this.head, d = !1; null != c;) {
                if (c.elt ==
                    a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next
            }
            return d
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = ue.zpp_pool;
            ue.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: Bg
    };
    var Oh = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Arbiter"] = Oh;
    Oh.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Arbiter"];
    Oh.prototype = {
        inlined_add: function(a) { var b;
            null == Qd.zpp_pool ? b = new Qd : (b = Qd.zpp_pool, Qd.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Qd.zpp_pool;
            Qd.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Qd.zpp_pool;
            Qd.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        clear: function() { for (; null != this.head;) this.inlined_pop();
            this.pushmod = !0 },
        inlined_has: function(a) { var b;
            b = !1; for (var c = this.head; null != c;) { if (c.elt == a) { b = !0; break } c = c.next } return b },
        __class__: Oh
    };
    var Km = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_CbSetPair"] = Km;
    Km.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_CbSetPair"];
    Km.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == zd.zpp_pool ?
                b = new zd : (b = zd.zpp_pool, zd.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = zd.zpp_pool;
            zd.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = zd.zpp_pool;
            zd.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: Km
    };
    var zg = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_PartitionVertex"] = zg;
    zg.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_PartitionVertex"];
    zg.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Ac.zpp_pool ? b = new Ac : (b = Ac.zpp_pool, Ac.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) {
            var c;
            null == Ac.zpp_pool ? c = new Ac : (c = Ac.zpp_pool, Ac.zpp_pool = c.next,
                c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Ac.zpp_pool;
            Ac.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Ac.zpp_pool;
            Ac.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        reverse: function() {
            for (var a = this.head, b =
                    null; null != a;) { var c = a.next;
                a.next = b;
                b = this.head = a;
                a = c } this.pushmod = this.modified = !0
        },
        __class__: zg
    };
    var Mj = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_PartitionedPoly"] = Mj;
    Mj.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_PartitionedPoly"];
    Mj.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == ve.zpp_pool ? b = new ve : (b = ve.zpp_pool, ve.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = ve.zpp_pool;
            ve.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = ve.zpp_pool;
            ve.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        __class__: Mj
    };
    var Nj = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_GeomVert"] = Nj;
    Nj.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_GeomVert"];
    Nj.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == uf.zpp_pool ? b = new uf : (b = uf.zpp_pool, uf.zpp_pool = b.next,
                b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = uf.zpp_pool;
            uf.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        __class__: Nj
    };
    var Pm = function() {
        this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null
    };
    g["zpp_nape.util.ZNPList_ZPP_AABBPair"] = Pm;
    Pm.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_AABBPair"];
    Pm.prototype = {
        inlined_add: function(a) { var b;
            null == Rd.zpp_pool ? b = new Rd : (b = Rd.zpp_pool, Rd.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() {
            var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Rd.zpp_pool;
            Rd.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) { for (var b = null, c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next } return d },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Rd.zpp_pool;
            Rd.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        __class__: Pm
    };
    var Qm = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Edge"] = Qm;
    Qm.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Edge"];
    Qm.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == Bc.zpp_pool ? b = new Bc : (b = Bc.zpp_pool, Bc.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) { var c;
            null == Bc.zpp_pool ? c = new Bc : (c = Bc.zpp_pool, Bc.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++; return c },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() {
            var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Bc.zpp_pool;
            Bc.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Bc.zpp_pool;
            Bc.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        reverse: function() {
            for (var a = this.head,
                    b = null; null != a;) { var c = a.next;
                a.next = b;
                b = this.head = a;
                a = c } this.pushmod = this.modified = !0
        },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: Qm
    };
    var Rm = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Component"] = Rm;
    Rm.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Component"];
    Rm.prototype = {
        inlined_add: function(a) {
            var b;
            null == vf.zpp_pool ? b = new vf : (b = vf.zpp_pool, vf.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = vf.zpp_pool;
            vf.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        __class__: Rm
    };
    var zn = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_InteractionGroup"] =
        zn;
    zn.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_InteractionGroup"];
    zn.prototype = { iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b }, __class__: zn };
    var Um = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_FluidArbiter"] = Um;
    Um.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_FluidArbiter"];
    Um.prototype = {
        inlined_add: function(a) {
            var b;
            null == Ad.zpp_pool ? b = new Ad : (b = Ad.zpp_pool, Ad.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Ad.zpp_pool;
            Ad.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next,
                c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Ad.zpp_pool;
            Ad.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        __class__: Um
    };
    var Vm = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_SensorArbiter"] = Vm;
    Vm.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_SensorArbiter"];
    Vm.prototype = {
        inlined_add: function(a) {
            var b;
            null == we.zpp_pool ? b = new we : (b = we.zpp_pool, we.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head =
                b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = we.zpp_pool;
            we.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next,
                a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = we.zpp_pool;
            we.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        __class__: Vm
    };
    var rl = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_ColArbiter"] = rl;
    rl.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_ColArbiter"];
    rl.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) {
            var b;
            null == xe.zpp_pool ? b = new xe : (b = xe.zpp_pool, xe.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++;
            return a
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = xe.zpp_pool;
            xe.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) {
            for (var b = null, c =
                    this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next }
            return d
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = xe.zpp_pool;
            xe.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        __class__: rl
    };
    var sl = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_Listener"] = sl;
    sl.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_Listener"];
    sl.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Cc.zpp_pool ? b = new Cc : (b = Cc.zpp_pool, Cc.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) {
            var c;
            null == Cc.zpp_pool ? c = new Cc : (c = Cc.zpp_pool, Cc.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) :
                (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++;
            return c
        },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() { var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = Cc.zpp_pool;
            Cc.zpp_pool = a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length-- },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        remove: function(a) { this.inlined_try_remove(a) },
        inlined_try_remove: function(a) {
            for (var b = null,
                    c = this.head, d = !1; null != c;) { if (c.elt == a) { this.inlined_erase(b);
                    d = !0; break } b = c;
                c = c.next }
            return d
        },
        inlined_erase: function(a) { var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = Cc.zpp_pool;
            Cc.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0; return c },
        iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b },
        __class__: sl
    };
    var Tm = function() {
        this.length = 0;
        this.modified =
            this.pushmod = !1;
        this.head = null
    };
    g["zpp_nape.util.ZNPList_ZPP_ToiEvent"] = Tm;
    Tm.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_ToiEvent"];
    Tm.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == ye.zpp_pool ? b = new ye : (b = ye.zpp_pool, ye.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        pop: function() { this.inlined_pop() },
        inlined_pop: function() {
            var a = this.head;
            this.head = a.next;
            a.elt = null;
            a.next = ye.zpp_pool;
            ye.zpp_pool =
                a;
            null == this.head && (this.pushmod = !0);
            this.modified = !0;
            this.length--
        },
        pop_unsafe: function() { return this.inlined_pop_unsafe() },
        inlined_pop_unsafe: function() { var a = this.head.elt;
            this.pop(); return a },
        erase: function(a) { return this.inlined_erase(a) },
        inlined_erase: function(a) {
            var b, c;
            null == a ? (b = this.head, this.head = c = b.next, null == this.head && (this.pushmod = !0)) : (b = a.next, c = b.next, a.next = c, null == c && (this.pushmod = !0));
            a = b;
            a.elt = null;
            a.next = ye.zpp_pool;
            ye.zpp_pool = a;
            this.modified = !0;
            this.length--;
            this.pushmod = !0;
            return c
        },
        __class__: Tm
    };
    var An = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ConvexResult"] = An;
    An.__name__ = ["zpp_nape", "util", "ZNPList_ConvexResult"];
    An.prototype = { iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b }, __class__: An };
    var Wm = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_ZPP_GeomPoly"] = Wm;
    Wm.__name__ = ["zpp_nape", "util", "ZNPList_ZPP_GeomPoly"];
    Wm.prototype = {
        add: function(a) { return this.inlined_add(a) },
        inlined_add: function(a) { var b;
            null == Ae.zpp_pool ? b = new Ae : (b = Ae.zpp_pool, Ae.zpp_pool = b.next, b.next = null);
            null;
            b.elt = a;
            b.next = this.head;
            this.head = b;
            this.modified = !0;
            this.length++; return a },
        insert: function(a, b) { return this.inlined_insert(a, b) },
        inlined_insert: function(a, b) { var c;
            null == Ae.zpp_pool ? c = new Ae : (c = Ae.zpp_pool, Ae.zpp_pool = c.next, c.next = null);
            null;
            c.elt = b;
            null == a ? (c.next = this.head, this.head = c) : (c.next = a.next, a.next = c);
            this.pushmod = this.modified = !0;
            this.length++; return c },
        iterator_at: function(a) {
            for (var b =
                    this.head; 0 < a-- && null != b;) b = b.next;
            return b
        },
        __class__: Wm
    };
    var Bn = function() { this.length = 0;
        this.modified = this.pushmod = !1;
        this.head = null };
    g["zpp_nape.util.ZNPList_RayResult"] = Bn;
    Bn.__name__ = ["zpp_nape", "util", "ZNPList_RayResult"];
    Bn.prototype = { iterator_at: function(a) { for (var b = this.head; 0 < a-- && null != b;) b = b.next; return b }, __class__: Bn };
    var hd = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_CbType"] = hd;
    hd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CbType"];
    hd.prototype = { __class__: hd };
    var tf = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_CallbackSet"] = tf;
    tf.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CallbackSet"];
    tf.prototype = { __class__: tf };
    var oc = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Shape"] = oc;
    oc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Shape"];
    oc.prototype = { __class__: oc };
    var Pc = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Body"] = Pc;
    Pc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Body"];
    Pc.prototype = { __class__: Pc };
    var ae =
        function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Constraint"] = ae;
    ae.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Constraint"];
    ae.prototype = { __class__: ae };
    var ue = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Compound"] = ue;
    ue.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Compound"];
    ue.prototype = { __class__: ue };
    var gd = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_InteractionListener"] = gd;
    gd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_InteractionListener"];
    gd.prototype = { __class__: gd };
    var Qd = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Arbiter"] = Qd;
    Qd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Arbiter"];
    Qd.prototype = { __class__: Qd };
    var be = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_CbSet"] = be;
    be.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CbSet"];
    be.prototype = { __class__: be };
    var se = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Interactor"] = se;
    se.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Interactor"];
    se.prototype = { __class__: se };
    var Od = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_BodyListener"] = Od;
    Od.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_BodyListener"];
    Od.prototype = { __class__: Od };
    var $d = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"] = $d;
    $d.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_ConstraintListener"];
    $d.prototype = { __class__: $d };
    var zd = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_CbSetPair"] = zd;
    zd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_CbSetPair"];
    zd.prototype = { __class__: zd };
    var Ac = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_PartitionVertex"] = Ac;
    Ac.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_PartitionVertex"];
    Ac.prototype = { __class__: Ac };
    var ve = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_PartitionedPoly"] = ve;
    ve.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_PartitionedPoly"];
    ve.prototype = { __class__: ve };
    var uf = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_GeomVert"] = uf;
    uf.__name__ = ["zpp_nape",
        "util", "ZNPNode_ZPP_GeomVert"
    ];
    uf.prototype = { __class__: uf };
    var Rd = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_AABBPair"] = Rd;
    Rd.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_AABBPair"];
    Rd.prototype = { __class__: Rd };
    var Bc = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Edge"] = Bc;
    Bc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Edge"];
    Bc.prototype = { __class__: Bc };
    var yc = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Vec2"] = yc;
    yc.__name__ = ["zpp_nape", "util",
        "ZNPNode_ZPP_Vec2"
    ];
    yc.prototype = { __class__: yc };
    var vf = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Component"] = vf;
    vf.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Component"];
    vf.prototype = { __class__: vf };
    var Cn = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"] = Cn;
    Cn.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_InteractionGroup"];
    Cn.prototype = { __class__: Cn };
    var Ad = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"] = Ad;
    Ad.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_FluidArbiter"];
    Ad.prototype = { __class__: Ad };
    var we = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"] = we;
    we.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_SensorArbiter"];
    we.prototype = { __class__: we };
    var xe = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_ColArbiter"] = xe;
    xe.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_ColArbiter"];
    xe.prototype = { __class__: xe };
    var Cc = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_Listener"] =
        Cc;
    Cc.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_Listener"];
    Cc.prototype = { __class__: Cc };
    var ye = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_ToiEvent"] = ye;
    ye.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_ToiEvent"];
    ye.prototype = { __class__: ye };
    var Dn = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ConvexResult"] = Dn;
    Dn.__name__ = ["zpp_nape", "util", "ZNPNode_ConvexResult"];
    Dn.prototype = { __class__: Dn };
    var Ae = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_ZPP_GeomPoly"] =
        Ae;
    Ae.__name__ = ["zpp_nape", "util", "ZNPNode_ZPP_GeomPoly"];
    Ae.prototype = { __class__: Ae };
    var En = function() { this.next = this.elt = null };
    g["zpp_nape.util.ZNPNode_RayResult"] = En;
    En.__name__ = ["zpp_nape", "util", "ZNPNode_RayResult"];
    En.prototype = { __class__: En };
    var Ag = function() { this.at_index = 0;
        this.at_ite = null;
        this.zip_length = !1;
        this._length = 0;
        this.inner = null;
        Hc.call(this);
        this.at_ite = null;
        this.at_index = 0;
        this.zip_length = !0;
        this._length = 0 };
    g["zpp_nape.util.ZPP_MixVec2List"] = Ag;
    Ag.__name__ = ["zpp_nape", "util",
        "ZPP_MixVec2List"
    ];
    Ag.get = function(a, b) { null == b && (b = !1); var c = new Ag;
        c.inner = a;
        c.zpp_inner.immutable = b; return c };
    Ag.__super__ = Hc;
    Ag.prototype = l(Hc.prototype, {
        zpp_gl: function() { this.zpp_vm(); if (this.zip_length) { this._length = 0; for (var a = this.inner.next; null != a;) this._length++, a = a.next;
                this.zip_length = !1 } return this._length },
        zpp_vm: function() { this.zpp_inner.validate();
            this.inner.modified && (this.zip_length = !0, this._length = 0, this.at_ite = null) },
        at: function(a) {
            this.zpp_vm();
            this.zpp_inner.reverse_flag &&
                (a = this.zpp_gl() - 1 - a);
            if (a < this.at_index || null == this.at_ite) { this.at_index = 0; for (this.at_ite = this.inner.next;;) break }
            for (; this.at_index != a;) { this.at_index++; for (this.at_ite = this.at_ite.next;;) break }
            return this.at_ite.wrapper()
        },
        push: function(a) {
            this.zpp_inner.modify_test();
            this.zpp_vm();
            var b;
            if (b = null != this.zpp_inner.adder ? this.zpp_inner.adder(a) : !0) this.zpp_inner.reverse_flag ? this.inner.add(a.zpp_inner) : this.inner.insert(this.inner.iterator_at(this.zpp_gl() - 1), a.zpp_inner), this.zpp_inner.invalidate(),
                null != this.zpp_inner.post_adder && this.zpp_inner.post_adder(a);
            return b
        },
        __class__: Ag
    });
    var Je = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new pf;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_ConstraintList"] = Je;
    Je.__name__ = ["zpp_nape", "util", "ZPP_ConstraintList"];
    Je.get = function(a,
        b) { null == b && (b = !1); var c = new dm;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0; return c };
    Je.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        modify_test: function() {},
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        invalidate: function() {
            this._invalidated = !0;
            null != this._invalidate &&
                this._invalidate(this)
        },
        __class__: Je
    };
    var Le = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Uf;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_BodyList"] = Le;
    Le.__name__ = ["zpp_nape", "util", "ZPP_BodyList"];
    Le.get = function(a, b) {
        null == b && (b = !1);
        var c = new jm;
        c.zpp_inner.inner =
            a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0;
        return c
    };
    Le.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, modify_test: function() {}, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) }, __class__: Le };
    var kh =
        function() { this.user_length = 0;
            this.zip_length = !1;
            this.at_ite = this.push_ite = null;
            this.at_index = 0;
            this.reverse_flag = !1;
            this._validate = null;
            this._invalidated = !1;
            this.inner = null };
    g["zpp_nape.util.ZPP_InteractorList"] = kh;
    kh.__name__ = ["zpp_nape", "util", "ZPP_InteractorList"];
    kh.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        validate: function() {
            this._invalidated &&
                (this._invalidated = !1, null != this._validate && this._validate())
        },
        __class__: kh
    };
    var jf = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Bg;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_CompoundList"] = jf;
    jf.__name__ = ["zpp_nape", "util", "ZPP_CompoundList"];
    jf.get = function(a, b) {
        null == b && (b = !1);
        var c = new lm;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0;
        return c
    };
    jf.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        modify_test: function() {},
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) },
        __class__: jf
    };
    var ef = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new sl;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_ListenerList"] = ef;
    ef.__name__ = ["zpp_nape", "util", "ZPP_ListenerList"];
    ef.get = function(a, b) {
        null == b && (b = !1);
        var c = new cm;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0;
        return c
    };
    ef.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, modify_test: function() {}, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) }, __class__: ef };
    var je = function() {
        this.user_length =
            0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new re;
        this._invalidated = !0
    };
    g["zpp_nape.util.ZPP_CbTypeList"] = je;
    je.__name__ = ["zpp_nape", "util", "ZPP_CbTypeList"];
    je.get = function(a, b) { null == b && (b = !1); var c = new Fj;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0; return c };
    je.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, modify_test: function() {}, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) }, __class__: je };
    var og = function() {
        this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite =
            null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Nh;
        this._invalidated = !0
    };
    g["zpp_nape.util.ZPP_Vec2List"] = og;
    og.__name__ = ["zpp_nape", "util", "ZPP_Vec2List"];
    og.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        modify_test: function() {},
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) },
        __class__: og
    };
    var ng = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = null;
        this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Wm;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_GeomPolyList"] =
        ng;
    ng.__name__ = ["zpp_nape", "util", "ZPP_GeomPolyList"];
    ng.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, modify_test: function() {}, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) }, __class__: ng };
    var hh = function() {
        this.user_length =
            0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this._invalidated = !1;
        this.inner = null
    };
    g["zpp_nape.util.ZPP_RayResultList"] = hh;
    hh.__name__ = ["zpp_nape", "util", "ZPP_RayResultList"];
    hh.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        validate: function() {
            this._invalidated && (this._invalidated = !1, null != this._validate &&
                this._validate())
        },
        __class__: hh
    };
    var fh = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this._invalidated = !1;
        this.inner = null };
    g["zpp_nape.util.ZPP_ConvexResultList"] = fh;
    fh.__name__ = ["zpp_nape", "util", "ZPP_ConvexResultList"];
    fh.prototype = {
        valmod: function() {
            this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0)
        },
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        __class__: fh
    };
    var lh = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this._invalidated = !1;
        this.inner = null };
    g["zpp_nape.util.ZPP_EdgeList"] = lh;
    lh.__name__ = ["zpp_nape", "util", "ZPP_EdgeList"];
    lh.prototype = {
        valmod: function() {
            this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite =
                null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0)
        },
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        __class__: lh
    };
    var lf = function() {
        this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.dontremove = this.reverse_flag = !1;
        this._invalidate = this._validate = this.adder = this.post_adder = this.subber = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Df;
        this._invalidated = !0
    };
    g["zpp_nape.util.ZPP_ShapeList"] = lf;
    lf.__name__ = ["zpp_nape", "util", "ZPP_ShapeList"];
    lf.get = function(a, b) { null == b && (b = !1); var c = new nm;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0; return c };
    lf.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        modify_test: function() {},
        validate: function() {
            this._invalidated && (this._invalidated = !1, null != this._validate && this._validate())
        },
        invalidate: function() { this._invalidated = !0;
            null != this._invalidate && this._invalidate(this) },
        __class__: lf
    };
    var eh = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this._invalidated = !1;
        this.inner = null };
    g["zpp_nape.util.ZPP_InteractionGroupList"] = eh;
    eh.__name__ = ["zpp_nape", "util", "ZPP_InteractionGroupList"];
    eh.prototype = {
        valmod: function() {
            this.validate();
            this.inner.modified &&
                (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0)
        },
        validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) },
        __class__: eh
    };
    var gf = function() { this.user_length = 0;
        this.zip_length = !1;
        this.at_ite = this.push_ite = null;
        this.at_index = 0;
        this.reverse_flag = !1;
        this._validate = null;
        this.immutable = this._invalidated = !1;
        this.outer = this.inner = null;
        this.inner = new Oh;
        this._invalidated = !0 };
    g["zpp_nape.util.ZPP_ArbiterList"] =
        gf;
    gf.__name__ = ["zpp_nape", "util", "ZPP_ArbiterList"];
    gf.get = function(a, b) { null == b && (b = !1); var c = new em;
        c.zpp_inner.inner = a;
        b && (c.zpp_inner.immutable = !0);
        c.zpp_inner.zip_length = !0; return c };
    gf.prototype = { valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) }, validate: function() { this._invalidated && (this._invalidated = !1, null != this._validate && this._validate()) }, __class__: gf };
    var dh =
        function() { this.user_length = 0;
            this.zip_length = !1;
            this.at_ite = this.push_ite = null;
            this.at_index = 0;
            this.reverse_flag = !1;
            this._validate = null;
            this._invalidated = !1;
            this.inner = null };
    g["zpp_nape.util.ZPP_ContactList"] = dh;
    dh.__name__ = ["zpp_nape", "util", "ZPP_ContactList"];
    dh.prototype = {
        valmod: function() { this.validate();
            this.inner.modified && (this.inner.pushmod && (this.push_ite = null), this.at_ite = null, this.inner.modified = !1, this.inner.pushmod = !1, this.zip_length = !0) },
        validate: function() {
            this._invalidated && (this._invalidated = !1, null != this._validate && this._validate())
        },
        __class__: dh
    };
    var Mh = function() {};
    g["zpp_nape.util.ZPP_Math"] = Mh;
    Mh.__name__ = ["zpp_nape", "util", "ZPP_Math"];
    Mh.sqr = function(a) { return a * a };
    var hf = function() {};
    g["zpp_nape.util.ZPP_PubPool"] = hf;
    hf.__name__ = ["zpp_nape", "util", "ZPP_PubPool"];
    var Ga = function() { this.colour = 0;
        this.lt = this.swapped = this.data = this.prev = this.next = this.parent = null };
    g["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"] = Ga;
    Ga.__name__ = ["zpp_nape", "util", "ZPP_Set_ZPP_CbSetPair"];
    Ga.prototype = {
        clear_with: function(a) {
            if (null !=
                this.parent) { for (var b = this.parent; null != b;) b = null != b.prev ? b.prev : null != b.next ? b.next : this.clear_node(b, a);
                this.parent = null }
        },
        clear_node: function(a, b) { b(a.data); var c = a.parent;
            null != c && (a == c.prev ? c.prev = null : c.next = null, a.parent = null);
            a.data = null;
            a.lt = null;
            a.swapped = null;
            a.next = Ga.zpp_pool;
            Ga.zpp_pool = a; return c },
        __fix_dbl_red: function(a) {
            for (;;) {
                var b = a.parent,
                    c = b.parent;
                if (null == c) { b.colour = 1; break }
                var d, e, f, g, h, i, k;
                b == c.prev ? (f = c, k = c.next, a == b.prev ? (d = a, e = b, g = a.prev, h = a.next, i = b.next) : (d = b, e = a,
                    g = b.prev, h = a.prev, i = a.next)) : (d = c, g = c.prev, a == b.prev ? (e = a, f = b, h = a.prev, i = a.next, k = b.next) : (e = b, f = a, h = b.prev, i = a.prev, k = a.next));
                a = c.parent;
                null == a ? this.parent = e : a.prev == c ? a.prev = e : a.next = e;
                null != e && (e.parent = a);
                d.prev = g;
                null != g && (g.parent = d);
                d.next = h;
                null != h && (h.parent = d);
                e.prev = d;
                null != d && (d.parent = e);
                e.next = f;
                null != f && (f.parent = e);
                f.prev = i;
                null != i && (i.parent = f);
                f.next = k;
                null != k && (k.parent = f);
                e.colour = c.colour - 1;
                d.colour = 1;
                f.colour = 1;
                if (e == this.parent) this.parent.colour = 1;
                else if (0 == e.colour && 0 ==
                    e.parent.colour) { a = e; continue }
                break
            }
        },
        try_insert: function(a) {
            var b = null,
                c = null;
            if (null == this.parent) null == Ga.zpp_pool ? b = new Ga : (b = Ga.zpp_pool, Ga.zpp_pool = b.next, b.next = null), null, b.data = a, this.parent = b;
            else
                for (c = this.parent;;)
                    if (this.lt(a, c.data))
                        if (null == c.prev) { null == Ga.zpp_pool ? b = new Ga : (b = Ga.zpp_pool, Ga.zpp_pool = b.next, b.next = null);
                            null;
                            b.data = a;
                            c.prev = b;
                            b.parent = c; break } else c = c.prev;
            else if (this.lt(c.data, a))
                if (null == c.next) {
                    null == Ga.zpp_pool ? b = new Ga : (b = Ga.zpp_pool, Ga.zpp_pool = b.next, b.next =
                        null);
                    null;
                    b.data = a;
                    c.next = b;
                    b.parent = c;
                    break
                } else c = c.next;
            else break;
            if (null == b) return c;
            null == b.parent ? b.colour = 1 : (b.colour = 0, 0 == b.parent.colour && this.__fix_dbl_red(b));
            return b
        },
        __class__: Ga
    };
    var md = function() { this.colour = 0;
        this.lt = this.swapped = this.data = this.prev = this.next = this.parent = null };
    g["zpp_nape.util.ZPP_Set_ZPP_PartitionVertex"] = md;
    md.__name__ = ["zpp_nape", "util", "ZPP_Set_ZPP_PartitionVertex"];
    md.prototype = {
        empty: function() { return null == this.parent },
        remove_node: function(a) {
            if (null != a.next &&
                null != a.prev) { for (var b = a.next; null != b.prev;) b = b.prev; var c = a.data;
                a.data = b.data;
                b.data = c;
                null != this.swapped && this.swapped(a.data, b.data);
                a = b } b = null == a.prev ? a.next : a.prev;
            if (1 == a.colour)
                if (null != a.prev || null != a.next) b.colour = 1;
                else if (null != a.parent)
                for (c = a.parent;;) {
                    c.colour++;
                    c.prev.colour--;
                    c.next.colour--;
                    var d = c.prev;
                    if (-1 == d.colour) { this.__fix_neg_red(d); break } else if (0 == d.colour) {
                        if (null != d.prev && 0 == d.prev.colour) { this.__fix_dbl_red(d.prev); break }
                        if (null != d.next && 0 == d.next.colour) {
                            this.__fix_dbl_red(d.next);
                            break
                        }
                    }
                    d = c.next;
                    if (-1 == d.colour) { this.__fix_neg_red(d); break } else if (0 == d.colour) { if (null != d.prev && 0 == d.prev.colour) { this.__fix_dbl_red(d.prev); break } if (null != d.next && 0 == d.next.colour) { this.__fix_dbl_red(d.next); break } }
                    if (2 == c.colour)
                        if (null == c.parent) c.colour = 1;
                        else { c = c.parent; continue } break
                }
            c = a.parent;
            null == c ? this.parent = b : c.prev == a ? c.prev = b : c.next = b;
            null != b && (b.parent = c);
            a.parent = a.prev = a.next = null;
            a.data = null;
            a.lt = null;
            a.swapped = null;
            a.next = md.zpp_pool;
            md.zpp_pool = a
        },
        __fix_neg_red: function(a) {
            var b =
                a.parent;
            if (b.prev == a) { var c = a.prev,
                    d = a.next,
                    e = d.prev,
                    f = d.next;
                c.colour = 0;
                a.colour = b.colour = 1;
                a.next = e;
                null != e && (e.parent = a);
                a = b.data;
                b.data = d.data;
                d.data = a;
                null != this.swapped && this.swapped(b.data, d.data);
                d.prev = f;
                null != f && (f.parent = d);
                d.next = b.next;
                null != b.next && (b.next.parent = d);
                b.next = d } else c = a.next, d = a.prev, e = d.next, f = d.prev, c.colour = 0, a.colour = b.colour = 1, a.prev = e, null != e && (e.parent = a), a = b.data, b.data = d.data, d.data = a, null != this.swapped && this.swapped(b.data, d.data), d.next = f, null != f && (f.parent =
                d), d.prev = b.prev, null != b.prev && (b.prev.parent = d), b.prev = d;
            null != d && (d.parent = b);
            b = c;
            null != b.prev && 0 == b.prev.colour ? this.__fix_dbl_red(b.prev) : null != b.next && 0 == b.next.colour && this.__fix_dbl_red(b.next)
        },
        __fix_dbl_red: function(a) {
            for (;;) {
                var b = a.parent,
                    c = b.parent;
                if (null == c) { b.colour = 1; break }
                var d, e, f, g, h, i, k;
                b == c.prev ? (f = c, k = c.next, a == b.prev ? (d = a, e = b, g = a.prev, h = a.next, i = b.next) : (d = b, e = a, g = b.prev, h = a.prev, i = a.next)) : (d = c, g = c.prev, a == b.prev ? (e = a, f = b, h = a.prev, i = a.next, k = b.next) : (e = b, f = a, h = b.prev, i = a.prev,
                    k = a.next));
                a = c.parent;
                null == a ? this.parent = e : a.prev == c ? a.prev = e : a.next = e;
                null != e && (e.parent = a);
                d.prev = g;
                null != g && (g.parent = d);
                d.next = h;
                null != h && (h.parent = d);
                e.prev = d;
                null != d && (d.parent = e);
                e.next = f;
                null != f && (f.parent = e);
                f.prev = i;
                null != i && (i.parent = f);
                f.next = k;
                null != k && (k.parent = f);
                e.colour = c.colour - 1;
                d.colour = 1;
                f.colour = 1;
                if (e == this.parent) this.parent.colour = 1;
                else if (0 == e.colour && 0 == e.parent.colour) { a = e; continue }
                break
            }
        },
        insert: function(a) {
            var b;
            null == md.zpp_pool ? b = new md : (b = md.zpp_pool, md.zpp_pool =
                b.next, b.next = null);
            null;
            b.data = a;
            if (null == this.parent) this.parent = b;
            else
                for (a = this.parent;;)
                    if (this.lt(b.data, a.data))
                        if (null == a.prev) { a.prev = b;
                            b.parent = a; break } else a = a.prev;
            else if (null == a.next) { a.next = b;
                b.parent = a; break } else a = a.next;
            null == b.parent ? b.colour = 1 : (b.colour = 0, 0 == b.parent.colour && this.__fix_dbl_red(b));
            return b
        },
        __class__: md
    };
    var nd = function() { this.colour = 0;
        this.lt = this.swapped = this.data = this.prev = this.next = this.parent = null };
    g["zpp_nape.util.ZPP_Set_ZPP_PartitionPair"] = nd;
    nd.__name__ = ["zpp_nape", "util", "ZPP_Set_ZPP_PartitionPair"];
    nd.prototype = {
        remove_node: function(a) {
            if (null != a.next && null != a.prev) { for (var b = a.next; null != b.prev;) b = b.prev; var c = a.data;
                a.data = b.data;
                b.data = c;
                null != this.swapped && this.swapped(a.data, b.data);
                a = b } b = null == a.prev ? a.next : a.prev;
            if (1 == a.colour)
                if (null != a.prev || null != a.next) b.colour = 1;
                else if (null != a.parent)
                for (c = a.parent;;) {
                    c.colour++;
                    c.prev.colour--;
                    c.next.colour--;
                    var d = c.prev;
                    if (-1 == d.colour) { this.__fix_neg_red(d); break } else if (0 == d.colour) {
                        if (null !=
                            d.prev && 0 == d.prev.colour) { this.__fix_dbl_red(d.prev); break }
                        if (null != d.next && 0 == d.next.colour) { this.__fix_dbl_red(d.next); break }
                    }
                    d = c.next;
                    if (-1 == d.colour) { this.__fix_neg_red(d); break } else if (0 == d.colour) { if (null != d.prev && 0 == d.prev.colour) { this.__fix_dbl_red(d.prev); break } if (null != d.next && 0 == d.next.colour) { this.__fix_dbl_red(d.next); break } }
                    if (2 == c.colour)
                        if (null == c.parent) c.colour = 1;
                        else { c = c.parent; continue } break
                }
            c = a.parent;
            null == c ? this.parent = b : c.prev == a ? c.prev = b : c.next = b;
            null != b && (b.parent = c);
            a.parent =
                a.prev = a.next = null;
            a.data = null;
            a.lt = null;
            a.swapped = null;
            a.next = nd.zpp_pool;
            nd.zpp_pool = a
        },
        __fix_neg_red: function(a) {
            var b = a.parent;
            if (b.prev == a) { var c = a.prev,
                    d = a.next,
                    e = d.prev,
                    f = d.next;
                c.colour = 0;
                a.colour = b.colour = 1;
                a.next = e;
                null != e && (e.parent = a);
                a = b.data;
                b.data = d.data;
                d.data = a;
                null != this.swapped && this.swapped(b.data, d.data);
                d.prev = f;
                null != f && (f.parent = d);
                d.next = b.next;
                null != b.next && (b.next.parent = d);
                b.next = d } else c = a.next, d = a.prev, e = d.next, f = d.prev, c.colour = 0, a.colour = b.colour = 1, a.prev = e, null != e &&
                (e.parent = a), a = b.data, b.data = d.data, d.data = a, null != this.swapped && this.swapped(b.data, d.data), d.next = f, null != f && (f.parent = d), d.prev = b.prev, null != b.prev && (b.prev.parent = d), b.prev = d;
            null != d && (d.parent = b);
            b = c;
            null != b.prev && 0 == b.prev.colour ? this.__fix_dbl_red(b.prev) : null != b.next && 0 == b.next.colour && this.__fix_dbl_red(b.next)
        },
        __fix_dbl_red: function(a) {
            for (;;) {
                var b = a.parent,
                    c = b.parent;
                if (null == c) { b.colour = 1; break }
                var d, e, f, g, h, i, k;
                b == c.prev ? (f = c, k = c.next, a == b.prev ? (d = a, e = b, g = a.prev, h = a.next, i = b.next) :
                    (d = b, e = a, g = b.prev, h = a.prev, i = a.next)) : (d = c, g = c.prev, a == b.prev ? (e = a, f = b, h = a.prev, i = a.next, k = b.next) : (e = b, f = a, h = b.prev, i = a.prev, k = a.next));
                a = c.parent;
                null == a ? this.parent = e : a.prev == c ? a.prev = e : a.next = e;
                null != e && (e.parent = a);
                d.prev = g;
                null != g && (g.parent = d);
                d.next = h;
                null != h && (h.parent = d);
                e.prev = d;
                null != d && (d.parent = e);
                e.next = f;
                null != f && (f.parent = e);
                f.prev = i;
                null != i && (i.parent = f);
                f.next = k;
                null != k && (k.parent = f);
                e.colour = c.colour - 1;
                d.colour = 1;
                f.colour = 1;
                if (e == this.parent) this.parent.colour = 1;
                else if (0 == e.colour &&
                    0 == e.parent.colour) { a = e; continue }
                break
            }
        },
        insert: function(a) { var b;
            null == nd.zpp_pool ? b = new nd : (b = nd.zpp_pool, nd.zpp_pool = b.next, b.next = null);
            null;
            b.data = a; if (null == this.parent) this.parent = b;
            else
                for (a = this.parent;;)
                    if (this.lt(b.data, a.data))
                        if (null == a.prev) { a.prev = b;
                            b.parent = a; break } else a = a.prev;
            else if (null == a.next) { a.next = b;
                b.parent = a; break } else a = a.next;
            null == b.parent ? b.colour = 1 : (b.colour = 0, 0 == b.parent.colour && this.__fix_dbl_red(b)); return b },
        __class__: nd
    };
    var zc = function() {
        this.colour = 0;
        this.lt =
            this.swapped = this.data = this.prev = this.next = this.parent = null
    };
    g["zpp_nape.util.ZPP_Set_ZPP_CbSet"] = zc;
    zc.__name__ = ["zpp_nape", "util", "ZPP_Set_ZPP_CbSet"];
    zc.prototype = {
        empty: function() { return null == this.parent },
        find: function(a) { for (var b = this.parent; null != b && b.data != a;) b = this.lt(a, b.data) ? b.prev : b.next; return b },
        find_weak: function(a) { for (var b = this.parent; null != b;)
                if (this.lt(a, b.data)) b = b.prev;
                else if (this.lt(b.data, a)) b = b.next;
            else break; return b },
        remove: function(a) { this.remove_node(this.find(a)) },
        remove_node: function(a) {
            if (null != a.next && null != a.prev) { for (var b = a.next; null != b.prev;) b = b.prev; var c = a.data;
                a.data = b.data;
                b.data = c;
                null != this.swapped && this.swapped(a.data, b.data);
                a = b } b = null == a.prev ? a.next : a.prev;
            if (1 == a.colour)
                if (null != a.prev || null != a.next) b.colour = 1;
                else if (null != a.parent)
                for (c = a.parent;;) {
                    c.colour++;
                    c.prev.colour--;
                    c.next.colour--;
                    var d = c.prev;
                    if (-1 == d.colour) { this.__fix_neg_red(d); break } else if (0 == d.colour) {
                        if (null != d.prev && 0 == d.prev.colour) { this.__fix_dbl_red(d.prev); break }
                        if (null !=
                            d.next && 0 == d.next.colour) { this.__fix_dbl_red(d.next); break }
                    }
                    d = c.next;
                    if (-1 == d.colour) { this.__fix_neg_red(d); break } else if (0 == d.colour) { if (null != d.prev && 0 == d.prev.colour) { this.__fix_dbl_red(d.prev); break } if (null != d.next && 0 == d.next.colour) { this.__fix_dbl_red(d.next); break } }
                    if (2 == c.colour)
                        if (null == c.parent) c.colour = 1;
                        else { c = c.parent; continue } break
                }
            c = a.parent;
            null == c ? this.parent = b : c.prev == a ? c.prev = b : c.next = b;
            null != b && (b.parent = c);
            a.parent = a.prev = a.next = null;
            a.data = null;
            a.lt = null;
            a.swapped = null;
            a.next =
                zc.zpp_pool;
            zc.zpp_pool = a
        },
        __fix_neg_red: function(a) {
            var b = a.parent;
            if (b.prev == a) { var c = a.prev,
                    d = a.next,
                    e = d.prev,
                    f = d.next;
                c.colour = 0;
                a.colour = b.colour = 1;
                a.next = e;
                null != e && (e.parent = a);
                a = b.data;
                b.data = d.data;
                d.data = a;
                null != this.swapped && this.swapped(b.data, d.data);
                d.prev = f;
                null != f && (f.parent = d);
                d.next = b.next;
                null != b.next && (b.next.parent = d);
                b.next = d } else c = a.next, d = a.prev, e = d.next, f = d.prev, c.colour = 0, a.colour = b.colour = 1, a.prev = e, null != e && (e.parent = a), a = b.data, b.data = d.data, d.data = a, null != this.swapped &&
                this.swapped(b.data, d.data), d.next = f, null != f && (f.parent = d), d.prev = b.prev, null != b.prev && (b.prev.parent = d), b.prev = d;
            null != d && (d.parent = b);
            b = c;
            null != b.prev && 0 == b.prev.colour ? this.__fix_dbl_red(b.prev) : null != b.next && 0 == b.next.colour && this.__fix_dbl_red(b.next)
        },
        __fix_dbl_red: function(a) {
            for (;;) {
                var b = a.parent,
                    c = b.parent;
                if (null == c) { b.colour = 1; break }
                var d, e, f, g, h, i, k;
                b == c.prev ? (f = c, k = c.next, a == b.prev ? (d = a, e = b, g = a.prev, h = a.next, i = b.next) : (d = b, e = a, g = b.prev, h = a.prev, i = a.next)) : (d = c, g = c.prev, a == b.prev ? (e =
                    a, f = b, h = a.prev, i = a.next, k = b.next) : (e = b, f = a, h = b.prev, i = a.prev, k = a.next));
                a = c.parent;
                null == a ? this.parent = e : a.prev == c ? a.prev = e : a.next = e;
                null != e && (e.parent = a);
                d.prev = g;
                null != g && (g.parent = d);
                d.next = h;
                null != h && (h.parent = d);
                e.prev = d;
                null != d && (d.parent = e);
                e.next = f;
                null != f && (f.parent = e);
                f.prev = i;
                null != i && (i.parent = f);
                f.next = k;
                null != k && (k.parent = f);
                e.colour = c.colour - 1;
                d.colour = 1;
                f.colour = 1;
                if (e == this.parent) this.parent.colour = 1;
                else if (0 == e.colour && 0 == e.parent.colour) { a = e; continue }
                break
            }
        },
        insert: function(a) {
            var b;
            null == zc.zpp_pool ? b = new zc : (b = zc.zpp_pool, zc.zpp_pool = b.next, b.next = null);
            null;
            b.data = a;
            if (null == this.parent) this.parent = b;
            else
                for (a = this.parent;;)
                    if (this.lt(b.data, a.data))
                        if (null == a.prev) { a.prev = b;
                            b.parent = a; break } else a = a.prev;
            else if (null == a.next) { a.next = b;
                b.parent = a; break } else a = a.next;
            null == b.parent ? b.colour = 1 : (b.colour = 0, 0 == b.parent.colour && this.__fix_dbl_red(b));
            return b
        },
        __class__: zc
    };
    var xi, On = 0;
    Math.NaN = Number.NaN;
    Math.NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY;
    Math.POSITIVE_INFINITY =
        Number.POSITIVE_INFINITY;
    g.Math = Math;
    Math.isFinite = function(a) { return isFinite(a) };
    Math.isNaN = function(a) { return isNaN(a) };
    String.prototype.__class__ = g.String = String;
    String.__name__ = ["String"];
    g.Array = Array;
    Array.__name__ = ["Array"];
    Date.prototype.__class__ = g.Date = Date;
    Date.__name__ = ["Date"];
    var Jn = g.Int = { __name__: ["Int"] },
        Pn = g.Dynamic = { __name__: ["Dynamic"] },
        Fn = g.Float = Number;
    Fn.__name__ = ["Float"];
    var Kn = g.Bool = Boolean;
    Kn.__ename__ = ["Bool"];
    var Qn = g.Class = { __name__: ["Class"] },
        Rn = {};
    W.Element = "element";
    W.PCData = "pcdata";
    W.CData = "cdata";
    W.Comment = "comment";
    W.DocType = "doctype";
    W.ProcessingInstruction = "processingInstruction";
    W.Document = "document";
    Rc.instance = new Rc;
    Kb.DISPATCHING_SENTINEL = new Xf(null, null);
    w.root = new A;
    w.uncaughtError = new I;
    w.hidden = new Cb(!1);
    w.volume = new Ca(1);
    w._platform = Rc.instance;
    w._calledInit = !1;
    pa.__meta__ = {
        obj: {
            assets: [{
                ui_title: [{ bytes: 600579, md5: "5f0708bee4e3bba59f222be7f9d4415d", name: "bg.jpg" }, { bytes: 25400, md5: "6b5f3b5375283a5811471f0705c44aa8", name: "title_hockey.png" },
                    { bytes: 2203, md5: "362323897992c5b5f0c05d56986e53e9", name: "title_nick.png" }, { bytes: 5483, md5: "40d906630b4d81c3be9bbe136a96b025", name: "title_stars.png" }, { bytes: 11418, md5: "a15f10d7dc161e8da95c9c8a693d8725", name: "title_stick.png" }
                ],
                ui_customize: [{ bytes: 1638, md5: "d317d06adcbd03e237881c0e53319f9c", name: "arrow_back.png" }, { bytes: 1614, md5: "b80e8659d19310e23239e2081b65b617", name: "arrow_next.png" }, { bytes: 153182, md5: "b36e347c8d6391cbdf54c6e9046db3f8", name: "bg.jpg" }, {
                    bytes: 4594,
                    md5: "4ebfae0e642d8afe6ba6f263b4a259fc",
                    name: "btn_confirm.png"
                }, { bytes: 4634, md5: "bd4b1492d070574a20eb754e11750a00", name: "btn_confirm_pressed.png" }, { bytes: 3027, md5: "9f9a5d7392ac664772504198a3f63b96", name: "btn_flag.png" }, { bytes: 3172, md5: "2e521700a5b1e6fe320c7318a41d3085", name: "btn_head.png" }, { bytes: 3217, md5: "f00656f2676d6a35fe7c697fdd63962d", name: "btn_shoulders.png" }, { bytes: 2970, md5: "ae7b8598f47c7e1fe461bec3cd3ef4c8", name: "btn_sound_normal.png" }, { bytes: 2985, md5: "53fd22a4d946ba3a59f12c4a12eacd24", name: "btn_sound_off.png" }, {
                    bytes: 3170,
                    md5: "2a654b39751a5230d6d59ce95a83de80",
                    name: "btn_stick.png"
                }, { bytes: 3258, md5: "ffcaf34fa8131c4e75110b658a64e43e", name: "btn_trail.png" }, { bytes: 4213, md5: "8e126d8a0a5826a1b472f12711f94b4f", name: "category_selector.png" }, { bytes: 6021, md5: "a690861a7f2e0e4bc10cb40595b984f1", name: "item_bg.png" }, { bytes: 5238, md5: "4fea58f7bbc5a65f604faee08d73e12c", name: "item_selector.png" }, { bytes: 6634, md5: "2fcb9b71bb16bbab6fc5c372d8779a71", name: "lock_flag.png" }, { bytes: 6307, md5: "c1cec03cbd84d18f6d00fa6e89eef99a", name: "lock_head.png" }, {
                    bytes: 6867,
                    md5: "22f95d28551b1d70e08ba6010b3e7359",
                    name: "lock_shoulders.png"
                }, { bytes: 6503, md5: "dc64fa378f4db6e38646b79a6fbe475d", name: "lock_stick.png" }, { bytes: 6662, md5: "7a10383e46ec5ee0c64c38f027cb7571", name: "lock_trail.png" }, { bytes: 1840, md5: "f05428a82a4c367c7d02d27b16e6a69e", name: "star.png" }, { bytes: 6165, md5: "2ffa9af03f247c3cf19fdcf4b4931d17", name: "unequip.png" }],
                accessories: [{ bytes: 4438, md5: "dc9597ec3d1a131671ac14750f91c0f0", name: "flags_bicycle_green.png" }, { bytes: 4304, md5: "00ea215c72f967d9b990f52cff872e99", name: "flags_bicycle_green_02.png" }, {
                        bytes: 3979,
                        md5: "f5371afc757914f5fc19053630bb91a5",
                        name: "flags_bicycle_orange.png"
                    }, { bytes: 3845, md5: "f81ba9951d492aba691c96a7ccef1e10", name: "flags_bicycle_orange_02.png" }, { bytes: 4031, md5: "1371467c8a4813941dcbbe5ffd747dcd", name: "flags_halo.png" }, { bytes: 3965, md5: "78ce551fbb2bce4fb3560a9e296743d5", name: "flags_halo_02.png" }, { bytes: 7337, md5: "efa08a4a5d4fac1250b4638dd706ab76", name: "flags_samurai.png" }, { bytes: 6011, md5: "1221d9cc5462f54bfc92d6999b1becfe", name: "flags_samurai_02.png" }, {
                        bytes: 4969,
                        md5: "6640a39e9088e991177e425611d17383",
                        name: "flags_wings.png"
                    }, { bytes: 4016, md5: "a38ef390b77e2f6047d929f5121f6ba1", name: "flags_wings_02.png" }, { bytes: 5575, md5: "761681d6fdb070c3bbc503b1ef8e6c9f", name: "hats_black.png" }, { bytes: 6584, md5: "53d70e108b88941b98cc1d47787df4e9", name: "hats_chloe.png" }, { bytes: 5825, md5: "676348ebe5d754622d3484c4aa80a6b4", name: "hats_goat_pig.png" }, { bytes: 9281, md5: "d40bcfe743bf83f80a3fbb55977f7c49", name: "hats_kitty.png" }, { bytes: 8363, md5: "3292d6b50fe1c3a5def56a2af20095e6", name: "hats_kitty_02.png" }, {
                        bytes: 12512,
                        md5: "e180d4ad04e12c97fb36ea814eabc877",
                        name: "hats_legionaire.png"
                    }, { bytes: 11794, md5: "9b72cbc931b67932d6f875c613b9d8a4", name: "hats_legionaire_02.png" }, { bytes: 5494, md5: "8b255079cc48cb3c9cfdad8cd95874f3", name: "hats_lincoln_lynn.png" }, { bytes: 6259, md5: "8508dc0a0f00722fa32207af6a956ad9", name: "hats_patrick.png" }, { bytes: 10144, md5: "f36913d0eece7571ae992fb3d429bc63", name: "hats_sombrero.png" }, { bytes: 8384, md5: "b9782d06029a55bea507d257eb3c70bd", name: "hats_sombrero_02.png" }, { bytes: 6474, md5: "432972fcc46718f18c9c6510a04ec282", name: "hats_spongebob.png" },
                    { bytes: 7528, md5: "992e7bdcd8be4c445fd0951b19660c45", name: "hats_squid.png" }, { bytes: 6939, md5: "8147835343620680f1f2493a63a8a788", name: "hats_squid_02.png" }, { bytes: 6322, md5: "52ea88f95a6bee5c76c735a07cc7d572", name: "hats_timmy.png" }, { bytes: 9765, md5: "4ef27a10ad43f6b60caecb57e0fa21f1", name: "hats_viking.png" }, { bytes: 8530, md5: "e90d0327d0808f7a06fa5430a09e690a", name: "hats_viking_02.png" }, { bytes: 3572, md5: "9d2f23bda9b4904ffe9ce81a913d2237", name: "shoulderpad_big_front.png" }, {
                        bytes: 3583,
                        md5: "f0abc47a3af5153b15471b82d80b6468",
                        name: "shoulderpad_big_front_02.png"
                    }, { bytes: 2610, md5: "3209b547fa20195f07d7c07e38cdd3c6", name: "shoulderpad_pineapples_back.png" }, { bytes: 2670, md5: "9009fb159caf8128b2baad53e3635a27", name: "shoulderpad_pineapples_back_02.png" }, { bytes: 2876, md5: "858665de426d814abf134dc2397905de", name: "shoulderpad_pineapples_front.png" }, { bytes: 2816, md5: "2da0dc3c6cb833238c1dd3c477c76bd0", name: "shoulderpad_pineapples_front_02.png" }, { bytes: 1626, md5: "f75b1eb24636d29e53f2ae6a5899e1f9", name: "shoulderpad_pizza_back.png" }, {
                        bytes: 1889,
                        md5: "f5660abd1d033788466ea430857c9d28",
                        name: "shoulderpad_pizza_back_02.png"
                    }, { bytes: 4176, md5: "4fe43e1722d74c8b6d1983408a0d086c", name: "shoulderpad_pizza_front.png" }, { bytes: 4170, md5: "bdc4f234b21d0ffe5250c5ff13031369", name: "shoulderpad_pizza_front_02.png" }, { bytes: 2744, md5: "f90af6550f789c8f81260346dd02b3db", name: "shoulderpad_rubber_back.png" }, { bytes: 2877, md5: "5b561838c8cb18266e72dd1b9b17040e", name: "shoulderpad_rubber_back_02.png" }, { bytes: 2970, md5: "5ae5ed6a8f41cf2af9103e90377f985f", name: "shoulderpad_rubber_front.png" },
                    { bytes: 3107, md5: "0ca3784d31b7f56cdaedc1db76900624", name: "shoulderpad_rubber_front_02.png" }, { bytes: 2679, md5: "5d5344b08fa816eec28dcb118d79a148", name: "shoulderpad_turtle_back.png" }, { bytes: 2753, md5: "fe9386c9e03faa211a9dfcccf4270026", name: "shoulderpad_turtle_back_02.png" }, { bytes: 2758, md5: "4bab5906cfbb91af183a8bb2f730971d", name: "shoulderpad_turtle_front.png" }, { bytes: 2765, md5: "05477e48d14be43e74ccab2a9f8da30c", name: "shoulderpad_turtle_front_02.png" }, { bytes: 6342, md5: "644cb405c291990c0c3912e41b45a1c9", name: "sticks_flamingo.png" },
                    { bytes: 6450, md5: "95b344073e9464cfc9c29fe1d31b7495", name: "sticks_flamingo_02.png" }, { bytes: 7377, md5: "b3b58daee29d5451e4ae6086b14bdbc4", name: "sticks_golf.png" }, { bytes: 7487, md5: "7cf3c8cf9e28fa9765055f60daf5aaa9", name: "sticks_golf_02.png" }, { bytes: 11049, md5: "0e5bc0b4a41cee1f9cb10db1d3b99ec0", name: "sticks_guitar.png" }, { bytes: 9562, md5: "8f34fb9ebb5aeaf9d0629e46770db1b2", name: "sticks_guitar_02.png" }, { bytes: 7891, md5: "f7e9092d0bf4fe9380a2282f4e0e3691", name: "sticks_hockey.png" }, {
                        bytes: 9412,
                        md5: "6fb322f9eee72cf8ac7a68e77dfc5beb",
                        name: "sticks_lamppost.png"
                    }, { bytes: 10342, md5: "6f2b00ce282606fd5e4ccbe88670d14f", name: "sticks_lamppost_02.png" }, { bytes: 7571, md5: "7d42542d9db978c8fa2ad2b9526dd47e", name: "sticks_metal_hockey.png" }
                ],
                ui_loading: [{ bytes: 3835, md5: "221e35670ad07ff1cfd71243a00a02aa", name: "bar.png" }, { bytes: 133056, md5: "5451c87c12b3d558a6307754ccd0bda5", name: "bg.jpg" }, { bytes: 2633, md5: "f8c1f1c29a75bcb49927ed1af33968e9", name: "font.fnt" }, { bytes: 1582, md5: "c520a5774336a53bc27c7a222de683fd", name: "font.png" }, {
                    bytes: 5709,
                    md5: "50f6c4cf9fcc3e7ffa95dda829941f62",
                    name: "loading_bar.png"
                }, { bytes: 13896, md5: "2000010bc4496f39cdbe664b77db54b4", name: "stick.png" }, { bytes: 2113, md5: "eb06978aca87421b384f04d4a0617b99", name: "wheel.png" }, { bytes: 9752, md5: "de78bb37ae476823860d07dc2714778d", name: "zamboni.png" }],
                levels: [{ bytes: 1208, md5: "6f172586aca33bb6d3e59d49d9a7c8d6", name: "level1.json" }, { bytes: 1362, md5: "92647a8c0b1116ad5952d13205c4c7e4", name: "level2.json" }, { bytes: 1208, md5: "7909648c8508b9195229bc6ef716c432", name: "level3.json" }, {
                    bytes: 1519,
                    md5: "e163bd854cc593135edd4e8db83cdf6f",
                    name: "level4.json"
                }, { bytes: 1526, md5: "cdd3ee0cdb37a0920cce290f2adb25b3", name: "level5.json" }, { bytes: 1693, md5: "06b2f2df7971a1486bd26c9669e00236", name: "level6.json" }],
                ui_level: [{ bytes: 163779, md5: "eabc88e4a50d879918cbf3a5021da33f", name: "bg.jpg" }, { bytes: 44049, md5: "c33c3e60d18d8edbb397a6b12c2561bf", name: "level1.png" }, { bytes: 43443, md5: "594356eed0737434e47164b6e98410aa", name: "level2.png" }, { bytes: 42239, md5: "2e4924af6c654456b33ef2f58e3c921e", name: "level3.png" }, {
                    bytes: 41427,
                    md5: "768ede013dac7edb4a28577ba5f0b9a9",
                    name: "level4.png"
                }, { bytes: 43527, md5: "50f6ef79c4c91cdbf4ec61923a8ca027", name: "level5.png" }, { bytes: 44058, md5: "ac0a5c95298987d313d1433ef3b49e9a", name: "level6.png" }, { bytes: 11430, md5: "9bd2228c4400d10536a94e047e7bb1e2", name: "locked.png" }, { bytes: 4796, md5: "24e6a35cc37adab4d15c4b6766bd89ae", name: "selector.png" }],
                actors: [{ bytes: 3700, md5: "2fd3ed429967d807b4256d85099c4e5d", name: "characters.json" }, { bytes: 967, md5: "f132d1259679aef577bcfb4b4679f048", name: "crowd.json" }, {
                    bytes: 1524,
                    md5: "9745e112dec17cd38dda1ecc8cce9e96",
                    name: "crowd_bg.json"
                }, { bytes: 7340, md5: "94d27555f56742c4ba7bfe7865cfd0e0", name: "decors.json" }, { bytes: 1236, md5: "dc1d0730a0eefdaa6e60a88b4b47ef97", name: "goalkeepers.json" }, { bytes: 1159, md5: "c5c49842dc860c0928b2c30eebdb1446", name: "interactives.json" }, { bytes: 259, md5: "d7187db3fd0141e205bb302ecde23ca3", name: "mobs.json" }, { bytes: 989, md5: "e340a13812ecae667720cd031040945c", name: "pickups.json" }, { bytes: 1620, md5: "f9f192eca8268f413fd303807c28b2de", name: "trails.json" }],
                ui_callouts: [{
                    bytes: 6818,
                    md5: "e54f91dfb6900eea8a19b5f9520c6137",
                    name: "callout.png"
                }],
                ui_character: [{ bytes: 179713, md5: "fe00a0221b9fa4034f4f1af6233b4378", name: "bg.jpg" }, { bytes: 23013, md5: "b479330e0abb5348abb8417dd9368ed8", name: "btn_customize.png" }, { bytes: 8046, md5: "18f75a4e676eedfa668a9ecf9878d612", name: "btn_customize_pressed.png" }, { bytes: 4430, md5: "dff2a3a01a90b664060015582130dc32", name: "btn_enter_code.png" }, { bytes: 4407, md5: "d3c22f6767e628b80fe6e553683ea146", name: "btn_enter_code_pressed.png" }, { bytes: 6533, md5: "a667ac01c5fb5a0caca75417be16deff", name: "characters/april.png" },
                    { bytes: 7022, md5: "ef547df4eaaec30203a8b7312278e115", name: "characters/april_locked.png" }, { bytes: 7981, md5: "ce34fe473da825318c301e339e20d8c9", name: "characters/april_locked_selected.png" }, { bytes: 7307, md5: "50fcd2c6cef297bc6bb64a7feaf3e6bf", name: "characters/april_selected.png" }, { bytes: 7498, md5: "05dba5158513f961c8bf0010ce0ab12e", name: "characters/casey.png" }, { bytes: 7497, md5: "b35c21fa105dea272f254e8f1c56a100", name: "characters/casey_locked.png" }, { bytes: 8406, md5: "063f4f91c81852822fee49f10c537dc6", name: "characters/casey_locked_selected.png" },
                    { bytes: 8250, md5: "b74065723712ef3368a4496939a5beb5", name: "characters/casey_selected.png" }, { bytes: 5935, md5: "8c61b99cc352a6801ef3fb5095860959", name: "characters/chloe.png" }, { bytes: 6911, md5: "a8480c1c65f82ac70dbab75bd829d9a2", name: "characters/chloe_locked.png" }, { bytes: 8111, md5: "fd7495ed4b67f5f444344311971316a4", name: "characters/chloe_locked_seleceted.png" }, { bytes: 6900, md5: "68046f342f74d1f84720f41ec8acc7f2", name: "characters/chloe_selected.png" }, { bytes: 5613, md5: "b7dc548cd2af46a00e0a9f196fc67d13", name: "characters/donnie.png" },
                    { bytes: 6806, md5: "897f97708c954d4a060bb5b35cd0cff0", name: "characters/donnie_locked.png" }, { bytes: 7988, md5: "df3fc6e8b440c05e94a0ed2122333223", name: "characters/donnie_locked_selected.png" }, { bytes: 6454, md5: "2dc149e08421dd6d81b87ac41c4d5f65", name: "characters/donnie_selected.png" }, { bytes: 6893, md5: "3a15defbc6e17422e2179716b264cd9a", name: "characters/goat.png" }, { bytes: 6868, md5: "dc0df3b911b177a57743f1647c1e326c", name: "characters/goat_locked.png" }, { bytes: 8020, md5: "c25fbdb9b675d47f41d18997e64f26fb", name: "characters/goat_locked_selected.png" },
                    { bytes: 7911, md5: "b5265539491a35af4de1a2c43b5c48b3", name: "characters/goat_selected.png" }, { bytes: 6032, md5: "7c5970210b71ee064411fc028e4b7b1f", name: "characters/leo.png" }, { bytes: 6610, md5: "e7c85667426d69082367487d2f53f643", name: "characters/leo_locked.png" }, { bytes: 7662, md5: "fe84138ebe5768327e044d4305413159", name: "characters/leo_Locked_selected.png" }, { bytes: 6916, md5: "340219dd3e8e53bec8ad3cdc6a83caa1", name: "characters/leo_selected.png" }, { bytes: 5431, md5: "56d0ad643de86681911606787833ced4", name: "characters/mike.png" },
                    { bytes: 6787, md5: "73c17c014ce88461b81b6c00b720a3b2", name: "characters/mike_locked.png" }, { bytes: 7864, md5: "f283fb8c7e9616146f28588e047d9c98", name: "characters/mike_locked_selected.png" }, { bytes: 6430, md5: "568db657ee95707f50ad87fdddb4b36d", name: "characters/mike_selected.png" }, { bytes: 5221, md5: "3f17a1cea8250e90bfe911f7c725ce62", name: "characters/mystery.png" }, { bytes: 6296, md5: "3136b96f7d937e7ba551f17819fd3f87", name: "characters/mystery_selected.png" }, { bytes: 3899, md5: "c8a3bb295da214133c9a362d8ce62dc9", name: "characters/new_character.png" },
                    { bytes: 4950, md5: "a92f0ccacfecd0aff184acd169027c6a", name: "characters/new_character_selected.png" }, { bytes: 6211, md5: "15bda915ca06539c70e47929ac203bdb", name: "characters/patrick.png" }, { bytes: 5430, md5: "60b308bdc0d2ff83eb4b2bb7ec6bb432", name: "characters/patrick_locked.png" }, { bytes: 6747, md5: "f9e6c5f27668d1790925064f2690381a", name: "characters/patrick_locked_selected.png" }, { bytes: 7106, md5: "94dd943ce2b78b71cc789b2da611b255", name: "characters/patrick_selected.png" }, {
                        bytes: 6441,
                        md5: "d5d49a90f2010d2608f8db2add0fbc47",
                        name: "characters/pig.png"
                    }, { bytes: 6333, md5: "6c80cbbc01e4029c3ebb6ecea2646f94", name: "characters/pig_locked.png" }, { bytes: 7501, md5: "c2442cf03e736a428299070a43bdd64e", name: "characters/pig_locked_selected.png" }, { bytes: 7440, md5: "1045752d8639f764c5c446daa8ca9e77", name: "characters/pig_selected.png" }, { bytes: 5891, md5: "7a959186e714a9b355297d3e93e2848d", name: "characters/raph.png" }, { bytes: 6647, md5: "b5a65835f1ad6d9f9ed94f201a624839", name: "characters/raph_locked.png" }, {
                        bytes: 7552,
                        md5: "2762e3eb913f1aa315a19a6e28718977",
                        name: "characters/raph_locked_selected.png"
                    }, { bytes: 6780, md5: "46ea5878f79396cfcc6e5e64152adb66", name: "characters/raph_selected.png" }, { bytes: 5995, md5: "1cb41ea756d363bb904fde58ba8cd7e7", name: "characters/spongebob.png" }, { bytes: 6401, md5: "983b6b6452d25eb8752d6cd487dea806", name: "characters/spongebob_locked.png" }, { bytes: 7692, md5: "60504ce30141527d3494c82e56dc1382", name: "characters/spongebob_locked_selected.png" }, { bytes: 6909, md5: "4456261bbdd8d3f544d12fdac8dd428d", name: "characters/spongebob_selected.png" }, {
                        bytes: 5871,
                        md5: "b0f85312708c4c7b3cfa9fdb2b811573",
                        name: "characters/timmy.png"
                    }, { bytes: 6361, md5: "951101972cc1a813ca07c6205fd1108f", name: "characters/timmy_locked.png" }, { bytes: 7652, md5: "cad92b0ba12217596550c8d81ce8595c", name: "characters/timmy_locked_selected.png" }, { bytes: 6991, md5: "b21ff5141ab9acb5f434941e0bd5d170", name: "characters/timmy_selected.png" }, { bytes: 192, md5: "a4cd60ab40e207b134451877e4018280", name: "dots.png" }, { bytes: 995, md5: "a9cdc6ee0cba64e223ceded18bd21a5e", name: "level_indicator_bg.png" }, {
                        bytes: 8705,
                        md5: "b9021f2ffc87d60f32fceaaef18f557c",
                        name: "logo_container.png"
                    }, { bytes: 4711, md5: "ad678a32f1146d82e036d75696d2e262", name: "mystery_avatar.png" }
                ],
                fonts: [{ bytes: 32043, md5: "907e881cf126d8a45bc91e7dece4e4d7", name: "15_pink.fnt" }, { bytes: 8282, md5: "e1d2384d46f72b353640cecdd851bc83", name: "15_pink.png" }, { bytes: 32076, md5: "4596658efb6607b2ec0d144e1eac29ad", name: "16_white.fnt" }, { bytes: 8887, md5: "94b589e12f249e9a7d0580160e8d442b", name: "16_white.png" }, { bytes: 32094, md5: "1a41694b5ec9f1fa43aa2988cd143763", name: "18_black.fnt" }, {
                    bytes: 7030,
                    md5: "1b587b74c4d2b13f8d4f6f4b4322c401",
                    name: "18_black.png"
                }, { bytes: 32110, md5: "27e64506337415c628c620dd0bd92b8e", name: "20_black.fnt" }, { bytes: 7873, md5: "275baf0cce4a44cb22111472886f15cd", name: "20_black.png" }, { bytes: 32171, md5: "1628fa9270c13ad7311a333cc11c3d81", name: "20_white.fnt" }, { bytes: 11332, md5: "bc9825bc62e3b59b0e3e4001cd8f9e62", name: "20_white.png" }, { bytes: 32177, md5: "26330f34e032a18bccdc46b0c637cf09", name: "23_blue.fnt" }, { bytes: 11885, md5: "65032c48c55c9c981e4429d4bb0d9b19", name: "23_blue.png" }, {
                    bytes: 32177,
                    md5: "0bfe106b791764252cf9c4099ef1c50e",
                    name: "23_pink.fnt"
                }, { bytes: 11885, md5: "4d9c3510a9afb4bd2d83b0a46969ccd4", name: "23_pink.png" }, { bytes: 32201, md5: "394cd8bb5cc93169d23df9d1963905ef", name: "23_white.fnt" }, { bytes: 12999, md5: "ba4f632834c20fe2496c2b8d09c8cb80", name: "23_white.png" }, { bytes: 32274, md5: "51bdc3bed038bf7dc3402a4a266c0c7a", name: "30_black.fnt" }, { bytes: 17855, md5: "a754853a442ffd613893eaf4b893f1b7", name: "30_black.png" }, { bytes: 32250, md5: "ff165d1e0d06d99aa94bd8d3c12bd7fc", name: "30_pink.fnt" }, {
                    bytes: 15520,
                    md5: "20268d1075a05defeb8dd2f90081d5cd",
                    name: "30_pink.png"
                }, { bytes: 2469, md5: "6a9b3e4e43003da3ad522a5b0b6aa1d1", name: "40_white.fnt" }, { bytes: 1046, md5: "91f292a22a424894b464c36b250b954f", name: "40_white.png" }, { bytes: 32485, md5: "57b597d61c3b9ab32fb6970e917735b5", name: "65_black.fnt" }, { bytes: 38066, md5: "e409bcdf61c800e8e380b2bdc4a68b98", name: "65_black.png" }, { bytes: 2474, md5: "971f3f13f28cd5f33e49c48f20f21a3d", name: "65_pink.fnt" }, { bytes: 2206, md5: "f36b538602dcd07932161774db3e3747", name: "65_pink.png" }, {
                    bytes: 2476,
                    md5: "48b8473108f88490814b7f379461be11",
                    name: "65_white.fnt"
                }, { bytes: 2206, md5: "ecd92265896f6cc79cd4896c7e607583", name: "65_white.png" }, { bytes: 32543, md5: "506d618df235a36c0cf8dad5702cd0fe", name: "90_blue.fnt" }, { bytes: 115461, md5: "fd686ad3285abb3317e8aa1f7e2bd72c", name: "90_blue.png" }],
                spine: [{ bytes: 6523, md5: "33951b8f1d9cdb54391fe206513eb599", name: "april/april.atlas" }, { bytes: 341140, md5: "5de80017ed5b234bb71294e65d966180", name: "april/april.json" }, { bytes: 390275, md5: "9842ba27ea3a4ed70a6246a3fc464b8d", name: "april/april.png" }, {
                        bytes: 5641,
                        md5: "d2e9fb1cccffa03d1a9152a6dea9bf3f",
                        name: "casey/casey.atlas"
                    }, { bytes: 296333, md5: "6a011cbff3e72535427fcacb595929bc", name: "casey/casey.json" }, { bytes: 69441, md5: "97edd5f0c93725cf84411c24eae0f6b5", name: "casey/casey.png" }, { bytes: 7670, md5: "96eb97b33f5df2307b833e59a2c395ed", name: "chloe/chloe.atlas" }, { bytes: 199675, md5: "510e03710a5b7fb24cb9099ee3640b95", name: "chloe/chloe.json" }, { bytes: 778534, md5: "a486d9fa2f57009ec44429a38548d825", name: "chloe/chloe.png" }, { bytes: 4739, md5: "fb993eda76a91a1f68cbc55c354f362a", name: "donnie/donnie.atlas" }, {
                        bytes: 216877,
                        md5: "2370de2b30b2df5f6ecbd2877d65e231",
                        name: "donnie/donnie.json"
                    }, { bytes: 227841, md5: "a9a0670a6ddab916ea066113522f1fa8", name: "donnie/donnie.png" }, { bytes: 4214, md5: "ac70a5b40218615fc6856f4f691c1b28", name: "goat/goat.atlas" }, { bytes: 183513, md5: "32927c53cfcea726d6efbc0704b6cfd3", name: "goat/goat.json" }, { bytes: 256031, md5: "6811662e9da06eb1c0d5656749ad747d", name: "goat/goat.png" }, { bytes: 3488, md5: "e24a6a0b16de19c9fa90bafd548e948e", name: "iceray/iceray.atlas" }, {
                        bytes: 44042,
                        md5: "76f4a10a94f1d757a20b23fb82fa39c9",
                        name: "iceray/iceray.json"
                    }, { bytes: 184109, md5: "5aede2a79cc47a346a434cdb45e0a6a0", name: "iceray/iceray.png" }, { bytes: 37886, md5: "1ea637ed0a415b1616e6991f42b3d3fe", name: "iceray/iceray2.png" }, { bytes: 5634, md5: "42bc0486eaee54e7f031e1672e64854a", name: "leo/leo.atlas" }, { bytes: 229091, md5: "4f05160a240ae3ca61f0ebeac14b1e1d", name: "leo/leo.json" }, { bytes: 356683, md5: "b744367f4420099ce8b5681dec5b0ac3", name: "leo/leo.png" }, { bytes: 4761, md5: "a24ec8759b7ddb47a243268502014417", name: "mike/mike.atlas" }, {
                        bytes: 207220,
                        md5: "ffa9f20a99d544485c576ea46cd3543d",
                        name: "mike/mike.json"
                    }, { bytes: 372732, md5: "29217270bd1b63413e6469d79c1ae592", name: "mike/mike.png" }, { bytes: 5121, md5: "a1df86ad07a73af3596de9c023edc609", name: "patrick/patrick.atlas" }, { bytes: 191148, md5: "a2f052693a4475ec140761162d1f9a2a", name: "patrick/patrick.json" }, { bytes: 365817, md5: "079b14e62ee115acd3ca2d3a1f5c2618", name: "patrick/patrick.png" }, { bytes: 1266, md5: "93db929e89b3f37248695a222b3eaf27", name: "pickups/pickups.atlas" }, { bytes: 11887, md5: "0f61066745ab8df19e6e5fd06d1aebd6", name: "pickups/pickups.json" },
                    { bytes: 23584, md5: "21c5c2187d3f4ededa6392d5fc532a15", name: "pickups/pickups.png" }, { bytes: 4231, md5: "572fe22f4c66889fe652ef12ab403800", name: "pig/pig.atlas" }, { bytes: 153631, md5: "43e3dcd3cae62a5530ad2839f9a9660a", name: "pig/pig.json" }, { bytes: 179774, md5: "4558728d13d9851f9ef2a4e009aeced2", name: "pig/pig.png" }, { bytes: 171, md5: "93345dacc4a52f196b4d968909d3f12d", name: "puck/puck.atlas" }, { bytes: 515, md5: "6753bd477024ff4a8f64680bf4cc7fa2", name: "puck/puck.json" }, { bytes: 2947, md5: "72999dd00914d3da599e3e0e60120105", name: "puck/puck.png" },
                    { bytes: 1499, md5: "d2af7ae0b69d071a81b459074130f9c9", name: "puck/puck_trail.png" }, { bytes: 5628, md5: "db25259d185e84d8c4bb730aaa93db9a", name: "raph/raph.atlas" }, { bytes: 223511, md5: "4a4601ae3d7a82c97ae5bcf71baf4a13", name: "raph/raph.json" }, { bytes: 71654, md5: "5c7b5710f9516ba39662321a6ef6ee64", name: "raph/raph.png" }, { bytes: 5089, md5: "ab770c95d335bd1ad6cbb118645b2f1e", name: "spongebob/spongebob.atlas" }, { bytes: 183301, md5: "61090abb235b8b9fb809cb8e5829717b", name: "spongebob/spongebob.json" }, {
                        bytes: 440698,
                        md5: "9687620d4028ad76c74ec9dcfe7b035d",
                        name: "spongebob/spongebob.png"
                    }, { bytes: 2257, md5: "b0c8d3065d8346ff09bab1d182d644d0", name: "super_freeze_notes/super_freeze_notes.atlas" }, { bytes: 32163, md5: "819f080d1ecec165c8ba17fe0863dccb", name: "super_freeze_notes/super_freeze_notes.json" }, { bytes: 150862, md5: "fc47f7f6f7b574fe71ac35b97c9293fe", name: "super_freeze_notes/super_freeze_notes.png" }, { bytes: 2580, md5: "724262f013a30410b680641e9b19de8a", name: "super_freeze_tornado/super_freeze_tornado.atlas" }, { bytes: 52628, md5: "b469e9280eaf82eb216f2a47844ae219", name: "super_freeze_tornado/super_freeze_tornado.json" },
                    { bytes: 138810, md5: "1142942b89c0e804cbb633f592134cca", name: "super_freeze_tornado/super_freeze_tornado.png" }, { bytes: 67249, md5: "0bc577895c0b881ae11889714feb75a4", name: "super_freeze_tornado/super_freeze_tornado2.png" }, { bytes: 1017, md5: "474e41daa04e35631f2e06e634c963c7", name: "super_wall_iced/super_wall_iced.atlas" }, { bytes: 45621, md5: "d5cb14c889625e5bc35830ac1380ecbe", name: "super_wall_iced/super_wall_iced.json" }, { bytes: 32791, md5: "b3a44bcdedd31c4aca98eeaf7c9c5486", name: "super_wall_iced/super_wall_iced.png" },
                    { bytes: 1011, md5: "734ee4344e2717aafe8bddfc51a9d339", name: "super_wall_nickels/super_wall_nickels.atlas" }, { bytes: 45839, md5: "e4c9a7d40a0d0e54eb78cb80c66594aa", name: "super_wall_nickels/super_wall_nickels.json" }, { bytes: 25505, md5: "31eebba3831b95ccfbdd07237f0c69c6", name: "super_wall_nickels/super_wall_nickels.png" }, { bytes: 1014, md5: "54e32e36fb3890e54ef2977868a9e2cd", name: "super_wall_patty/super_wall_patty.atlas" }, { bytes: 45843, md5: "eb32ebf9c2d8eb30ccc3526d2f1dba14", name: "super_wall_patty/super_wall_patty.json" },
                    { bytes: 21505, md5: "23b8f013cf463344afec6ae0b9b14636", name: "super_wall_patty/super_wall_patty.png" }, { bytes: 6575, md5: "315edc00c98a4cd653c819a66764103e", name: "timmy/timmy.atlas" }, { bytes: 161806, md5: "67e7c6c0b05bd1b3b1088ec9830db727", name: "timmy/timmy.json" }, { bytes: 738061, md5: "c37b89e994bc9e5bd0e3a9da3760aee3", name: "timmy/timmy.png" }
                ],
                sound: [{ bytes: 2990, md5: "50a3fa5973ef3445a9a07b481a02247a", name: "april_checked.mp3" }, { bytes: 6166, md5: "15b4a613ccb13011741bb41549991c7c", name: "april_checked.ogg" }, {
                        bytes: 4998,
                        md5: "00d51d043c094d41a954d3be59f83972",
                        name: "april_goal1.mp3"
                    }, { bytes: 8219, md5: "3b21401a3f56b31faa8d71cba6dd09e6", name: "april_goal1.ogg" }, { bytes: 3631, md5: "07008770b00572f2e974abd30af2c7f0", name: "april_goal2.mp3" }, { bytes: 6178, md5: "e51fe784c1dfe31dd2fa3465a1b78b8d", name: "april_goal2.ogg" }, { bytes: 4900, md5: "b036eaef545489b92b1c4e2b1c680ccf", name: "april_lose.mp3" }, { bytes: 8256, md5: "687f86f96e51c32b8bb1412bea3a3c56", name: "april_lose.ogg" }, { bytes: 4212, md5: "596a9d23415e9ff594316dd9312a446d", name: "april_select.mp3" },
                    { bytes: 7264, md5: "ce471d5340bf53fdafd591437e57cdb6", name: "april_select.ogg" }, { bytes: 2598, md5: "2102cd28881a6370096b9bc9e70bfbcc", name: "april_super.mp3" }, { bytes: 5644, md5: "b8b513188199c64c10474f4d1d4b14f7", name: "april_super.ogg" }, { bytes: 4998, md5: "00d51d043c094d41a954d3be59f83972", name: "april_win1.mp3" }, { bytes: 8219, md5: "a330b2e27216a8ca0d054dd3e3c951d1", name: "april_win1.ogg" }, { bytes: 3631, md5: "07008770b00572f2e974abd30af2c7f0", name: "april_win2.mp3" }, { bytes: 6178, md5: "0992e8781d7b7f954c12a9fa68a3f70a", name: "april_win2.ogg" },
                    { bytes: 1710, md5: "89f2a78d77badff54967a1a5eea268e5", name: "block.mp3" }, { bytes: 4863, md5: "588dc0a793b6e43c5dc5f6e1e07f223e", name: "block.ogg" }, { bytes: 4534, md5: "5e312eacb171b2eb364ad491b69b1d26", name: "brake.mp3" }, { bytes: 23633, md5: "d9a6c7b762466b6ad9e1205461eb6149", name: "brake.ogg" }, { bytes: 3330, md5: "3d59a7f52df0992062766ab9810ab84f", name: "casey_checked.mp3" }, { bytes: 6362, md5: "6788dba4dd76138bdbfe2680fb8ebfe8", name: "casey_checked.ogg" }, { bytes: 10303, md5: "ad67298c767d75adb36358367f7df629", name: "casey_goal1.mp3" },
                    { bytes: 13616, md5: "b4789a0200a7d7eeeb11f9bfd0a09194", name: "casey_goal1.ogg" }, { bytes: 3843, md5: "4f46684910e15873822de47ee0c22e4a", name: "casey_goal2.mp3" }, { bytes: 7082, md5: "510392ddd065521b69dac91499598f0c", name: "casey_goal2.ogg" }, { bytes: 7209, md5: "fdb8aded607981a1ec9b0efce32d2be1", name: "casey_lose.mp3" }, { bytes: 10515, md5: "00143383aed5ff4e6efec9bd3d48089e", name: "casey_lose.ogg" }, { bytes: 12614, md5: "9230515e06fb741d6bfbd0c8dc3a045f", name: "casey_select.mp3" }, {
                        bytes: 15367,
                        md5: "a014282de305a780f0dfc13a8be86b3a",
                        name: "casey_select.ogg"
                    }, { bytes: 3947, md5: "ff6a948a7eaad1a348a2c767c19d7c37", name: "casey_super.mp3" }, { bytes: 6863, md5: "443c888b8c42ba9c8e982ed001a625aa", name: "casey_super.ogg" }, { bytes: 4652, md5: "936c381ddcae03f01522f98ad7390432", name: "casey_win1.mp3" }, { bytes: 8257, md5: "40e9a3da4bc65cd49824d442923565d2", name: "casey_win1.ogg" }, { bytes: 3843, md5: "4f46684910e15873822de47ee0c22e4a", name: "casey_win2.mp3" }, { bytes: 7082, md5: "1c920c9f2d46808e6a753baa549f710b", name: "casey_win2.ogg" }, {
                        bytes: 7169,
                        md5: "ba0d056cbcd2bef432044ced6e762fb5",
                        name: "check.mp3"
                    }, { bytes: 8703, md5: "486073f24c6e42473f5857100f265717", name: "check.ogg" }, { bytes: 2149, md5: "a098e8fc371a65486fa423c1a7e0a2c1", name: "chloe_checked.mp3" }, { bytes: 5197, md5: "ef69cc21cff6d3ce9b800f7dbbe712c2", name: "chloe_checked.ogg" }, { bytes: 4373, md5: "a98b5e5fcf0df59f609863fb0d27a05b", name: "chloe_goal1.mp3" }, { bytes: 7580, md5: "5728a07f451a5c326e2121372cc0b475", name: "chloe_goal1.ogg" }, { bytes: 3270, md5: "b2c7437d59f57415b3e535f375318881", name: "chloe_goal2.mp3" }, {
                        bytes: 6204,
                        md5: "77ba15b0fec6eb74e9316fbce7ce844a",
                        name: "chloe_goal2.ogg"
                    }, { bytes: 6293, md5: "49b9c8e9dec82a63a52fb604ea79ed7b", name: "chloe_lose.mp3" }, { bytes: 9111, md5: "19b6753b0c365bb54fc1f63087dd7a98", name: "chloe_lose.ogg" }, { bytes: 4808, md5: "5b72e6986e73ef512ca9deb374c3df49", name: "chloe_select.mp3" }, { bytes: 8052, md5: "66b80ea9a61ebad8f14e95336b4e694d", name: "chloe_select.ogg" }, { bytes: 10682, md5: "a9ca857119e9230a49001dc9e8078f27", name: "chloe_super.mp3" }, { bytes: 13897, md5: "1e9e55510492782ff61c393e2eadd6a3", name: "chloe_super.ogg" }, {
                        bytes: 4373,
                        md5: "a98b5e5fcf0df59f609863fb0d27a05b",
                        name: "chloe_win1.mp3"
                    }, { bytes: 7580, md5: "9c0877026e480545399dc8996c40635c", name: "chloe_win1.ogg" }, { bytes: 6173, md5: "07589499fa423aa80898e922daef085f", name: "chloe_win2.mp3" }, { bytes: 9028, md5: "3b94728addcfbf8ee04cd74f598acab6", name: "chloe_win2.ogg" }, { bytes: 4676, md5: "c4efc21e38eff880eca22c865a4e9d35", name: "donnie_beam.mp3" }, { bytes: 7844, md5: "cdd4e62d758c0edde18140dc481068e5", name: "donnie_beam.ogg" }, { bytes: 6586, md5: "f185d2dce056c8a99b4f3436c71bd900", name: "donnie_select.mp3" }, {
                        bytes: 9248,
                        md5: "64ab9261222b5288ae3a1df4a77d2822",
                        name: "donnie_select.ogg"
                    }, { bytes: 8627, md5: "d9242d0372cb660c0f31bf405f4e1574", name: "donnie_super.mp3" }, { bytes: 13084, md5: "a09134871c92227d8fe94acce240e24b", name: "donnie_super.ogg" }, { bytes: 3278, md5: "778a32809aaf4d5a6777be1f6ac18fde", name: "equip_item.mp3" }, { bytes: 5597, md5: "d68b07e44801c5b6a2cb263b88274ae6", name: "equip_item.ogg" }, { bytes: 3422, md5: "4704475fe55f579549cef86f61142949", name: "goat_checked.mp3" }, { bytes: 6492, md5: "fbcebe0acb1190d6693a53f15b30f11e", name: "goat_checked.ogg" }, {
                        bytes: 5584,
                        md5: "0a02a78ad6bbb5339666cf5867b01f82",
                        name: "goat_goal1.mp3"
                    }, { bytes: 8311, md5: "7547f8f57615c37e3c9d4b47eeabab3e", name: "goat_goal1.ogg" }, { bytes: 5165, md5: "97600241c5bb60d34f2850606fca386c", name: "goat_goal2.mp3" }, { bytes: 8468, md5: "5d610dea7ac4f0a1315ace9d038f221c", name: "goat_goal2.ogg" }, { bytes: 3268, md5: "206e9974f04613ea3ec8db4867e43008", name: "goat_lose.mp3" }, { bytes: 6458, md5: "b9a7a36ed6c6d167e19f75c82e308b74", name: "goat_lose.ogg" }, { bytes: 7707, md5: "e2659d7a318eb2f35bcd2e366e553d09", name: "goat_select.mp3" }, {
                        bytes: 11061,
                        md5: "eed29da97942c88e2d620fb5c458c89b",
                        name: "goat_select.ogg"
                    }, { bytes: 8286, md5: "db2e7fbf98b645d8072706bc77fc4b5c", name: "goat_super.mp3" }, { bytes: 12213, md5: "738c86a7b66401898640f0404934acdd", name: "goat_super.ogg" }, { bytes: 5954, md5: "291b75eee61c8a67dab9a573d6215b64", name: "goat_win1.mp3" }, { bytes: 9090, md5: "678e4952cb8e43c48bb018760c2522a8", name: "goat_win1.ogg" }, { bytes: 7297, md5: "a2547485181cd434eb2dc48322ce8358", name: "goat_win2.mp3" }, { bytes: 9223, md5: "f860a92e2f87dc738eaa06c78a60b481", name: "goat_win2.ogg" }, {
                        bytes: 3133,
                        md5: "54a6a438238e256d6337cdab3ed70131",
                        name: "leo_checked.mp3"
                    }, { bytes: 6132, md5: "35178396e411dec80099a9ba2f60d28a", name: "leo_checked.ogg" }, { bytes: 4828, md5: "2db8034f093092896254f3360bc419bc", name: "leo_goal1.mp3" }, { bytes: 7949, md5: "b05ac23131b860c9e0edba70a370545e", name: "leo_goal1.ogg" }, { bytes: 10215, md5: "358e8d05bfb1f45ea4c9d7fc5c686c3f", name: "leo_goal2.mp3" }, { bytes: 14188, md5: "1543dd930ced87a68806adbde8c050cb", name: "leo_goal2.ogg" }, { bytes: 8200, md5: "d80aad3776e91f946d568e3ec2747da5", name: "leo_lose.mp3" }, {
                        bytes: 11538,
                        md5: "ba6c7ea690e67f07ab93b5996a201a6e",
                        name: "leo_lose.ogg"
                    }, { bytes: 4081, md5: "6146b493eefd9f0a3f9ee6f241928a7d", name: "leo_select.mp3" }, { bytes: 7216, md5: "8502e892a59bc0a50bd28c57515f40ba", name: "leo_select.ogg" }, { bytes: 5540, md5: "204f212ad4f029c0b2c96d22eb18d3b4", name: "leo_super.mp3" }, { bytes: 8638, md5: "9f30189c41ac728ad44b91ba0717883a", name: "leo_super.ogg" }, { bytes: 7978, md5: "e3371f7d6ea282ea862899543978105d", name: "leo_win1.mp3" }, { bytes: 11225, md5: "b7bb2b7f9d90909af2128c01d29a9dcb", name: "leo_win1.ogg" }, {
                        bytes: 9539,
                        md5: "579095f55503a8773dcd9ac464f6c77a",
                        name: "leo_win2.mp3"
                    }, { bytes: 13103, md5: "aa867cfd9223bd2884b19033d90e6913", name: "leo_win2.ogg" }, { bytes: 6451, md5: "3810a421ee998cd66fb67ab98998faaf", name: "mike_select.mp3" }, { bytes: 9749, md5: "be567b4c2e9b115820c58ce3a124b1a5", name: "mike_select.ogg" }, { bytes: 12942, md5: "c0fdbe855a6c86bb445eecc3bd297335", name: "mike_super.mp3" }, { bytes: 15063, md5: "206bcc1f645dab4bc3b55730351358e1", name: "mike_super.ogg" }, { bytes: 217728, md5: "e785bc1219784cbb0f926f145765324e", name: "music_game.mp3" }, {
                        bytes: 277353,
                        md5: "d39432edf9c70f3c3c1e6751a0fcbae6",
                        name: "music_game.ogg"
                    }, { bytes: 99716, md5: "e675c583297a114957ed7303212a638f", name: "music_menu.mp3" }, { bytes: 107437, md5: "e196f6c719ef7a5ff1189762a466def5", name: "music_menu.ogg" }, { bytes: 7517, md5: "74ca4577c4420e5fce165f7831cde573", name: "patrick_checked.mp3" }, { bytes: 10312, md5: "83a89af7e63a79d11a26da426bebaaa0", name: "patrick_checked.ogg" }, { bytes: 5017, md5: "be8da71c2e35892419c15084f4815737", name: "patrick_goal1.mp3" }, { bytes: 7964, md5: "98767c639692aaddc8dab462f92d91a7", name: "patrick_goal1.ogg" }, {
                        bytes: 3918,
                        md5: "ed5212ee7fe238021c84e66114dd9d46",
                        name: "patrick_goal2.mp3"
                    }, { bytes: 7310, md5: "52fb4bb7892e40da5ed8bf2a7a85340a", name: "patrick_goal2.ogg" }, { bytes: 5100, md5: "44aeddb0a318df3897599706447e33e6", name: "patrick_lose.mp3" }, { bytes: 8764, md5: "a3fe5f9084062a6140e1dfe375eca751", name: "patrick_lose.ogg" }, { bytes: 5889, md5: "b9cecf3886f51d451292028b8156a6bd", name: "patrick_select.mp3" }, { bytes: 9279, md5: "a7b104592f10305f5f4b1a2284bbb488", name: "patrick_select.ogg" }, { bytes: 4340, md5: "f9008b10edc73ca806a714ae3084e11a", name: "patrick_super.mp3" }, {
                        bytes: 7509,
                        md5: "6921658d16acab985225d6960eaf731c",
                        name: "patrick_super.ogg"
                    }, { bytes: 4517, md5: "f139ba0efad7f62f4a15dbf885b55a2f", name: "patrick_win1.mp3" }, { bytes: 7844, md5: "90abe2a2fca5933d7d5c8cbe47367369", name: "patrick_win1.ogg" }, { bytes: 3693, md5: "a1e549136b5c4f477c13a0734edea6e0", name: "patrick_win2.mp3" }, { bytes: 6671, md5: "be7cf7998dede5463aa8f92f925aa50d", name: "patrick_win2.ogg" }, { bytes: 42842, md5: "c8cf6f3c21c20f95e75ed5f0aca1f0c4", name: "pickup_frost.mp3" }, { bytes: 53678, md5: "1241199df7cf2e1e83481e36179a9403", name: "pickup_frost.ogg" }, {
                        bytes: 15408,
                        md5: "51152f5db4d0cac7718d40b9b531b23b",
                        name: "pickup_shield.mp3"
                    }, { bytes: 15884, md5: "3b42cf81b88a4ac42c3d8c11bf1ce8a3", name: "pickup_shield.ogg" }, { bytes: 19661, md5: "4dee157f67932400889afdce7ed7c2d5", name: "pickup_speed.mp3" }, { bytes: 25977, md5: "3dcf39d61107e0be8d29036230675357", name: "pickup_speed.ogg" }, { bytes: 3215, md5: "9f11ba7c761df9c195abf44cc544c935", name: "pig_checked.mp3" }, { bytes: 6398, md5: "c431bac4f3b52f93778310cb5ccc90d0", name: "pig_checked.ogg" }, { bytes: 11344, md5: "49ac60f798c6a725cfeeb88c76726730", name: "pig_goal1.mp3" }, {
                        bytes: 14326,
                        md5: "e45fa8f6fd9dd8bc6a3c9c0119cde7bc",
                        name: "pig_goal1.ogg"
                    }, { bytes: 11173, md5: "a0e04557429f72f26b499e7a63a7448e", name: "pig_goal2.mp3" }, { bytes: 14547, md5: "fdd4425a3ac6146ef67f5b0df965c83c", name: "pig_goal2.ogg" }, { bytes: 5456, md5: "b6ce895ee2f0e2796a3c1dd3c0107682", name: "pig_lose1.mp3" }, { bytes: 8268, md5: "9176bd20e97ea87d6efcdf11d4718dbb", name: "pig_lose1.ogg" }, { bytes: 5190, md5: "bdf27caabb5a4e17bd09627697e44aea", name: "pig_select.mp3" }, { bytes: 8372, md5: "53b7eda3f660d8933d0291f09e9927fe", name: "pig_select.ogg" }, {
                        bytes: 4182,
                        md5: "db01f83eeeb5351fca24006a1570a8c5",
                        name: "pig_super.mp3"
                    }, { bytes: 7284, md5: "0e8bec1208dae68e4d0cd99c77001582", name: "pig_super.ogg" }, { bytes: 6869, md5: "317cc1d122aaa65f45a2cfebb3ca6d2f", name: "pig_win1.mp3" }, { bytes: 9423, md5: "080ae2618d5f626b425db197f7b598e3", name: "pig_win1.ogg" }, { bytes: 5190, md5: "bdf27caabb5a4e17bd09627697e44aea", name: "pig_win2.mp3" }, { bytes: 8372, md5: "78d5f07bbce88536cbd92c73b24cbd78", name: "pig_win2.ogg" }, { bytes: 4151, md5: "142dac0691ca89bfacc03f890c8be8a0", name: "raph_checked.mp3" }, {
                        bytes: 7229,
                        md5: "23be5729ef1b4b91a36be90365904bc6",
                        name: "raph_checked.ogg"
                    }, { bytes: 6839, md5: "0770ddaaaf97e786572009672c29dbb3", name: "raph_goal1.mp3" }, { bytes: 10427, md5: "dbc8a55f5cf3299466d87d788243f21a", name: "raph_goal1.ogg" }, { bytes: 5870, md5: "4e439ae4eeb419890f9f6d3ba5ac5622", name: "raph_loose.mp3" }, { bytes: 8836, md5: "6385f4cc7b69c3cd71132d5022f35b42", name: "raph_loose.ogg" }, { bytes: 6374, md5: "e463bcdb3d2b4269770ff9bbb0cf9dac", name: "raph_select.mp3" }, { bytes: 9563, md5: "99fa9a5036ed55257142ccf25614f80b", name: "raph_select.ogg" }, {
                        bytes: 7997,
                        md5: "6a79982babd6bcb6fa0830a86377cbc1",
                        name: "raph_super.mp3"
                    }, { bytes: 11499, md5: "488bb99cdeb25e436c061ed371bce475", name: "raph_super.ogg" }, { bytes: 16590, md5: "45ec1ce13566ecc83fb7fb53b14c9ce4", name: "raph_win1.mp3" }, { bytes: 19855, md5: "d4f891151a5ab022cf1d32e1808391c1", name: "raph_win1.ogg" }, { bytes: 6911, md5: "ce361ea8ce02c8e19d389dd158dac727", name: "raph_win2.mp3" }, { bytes: 9881, md5: "286cee902909b1c48b2a5f1f2e2cfdfb", name: "raph_win2.ogg" }, { bytes: 133, md5: "5cd49cddadedf7331f18954ea459ca13", name: "README.md" }, {
                        bytes: 11850,
                        md5: "8e6b0cea1d595b10aec1052ca043d2b5",
                        name: "score_bad.mp3"
                    }, { bytes: 14973, md5: "c92bbb467c8cab21e51d2378d5946a81", name: "score_bad.ogg" }, { bytes: 11772, md5: "2645c076fc4770fd4913a933697b21a9", name: "score_good.mp3" }, { bytes: 15800, md5: "7c3d560040f217db66223dd2f4775c9e", name: "score_good.ogg" }, { bytes: 114448, md5: "f09d6d2ee26b377eec8a0b6556ff5b30", name: "skating_loop.mp3" }, { bytes: 108118, md5: "c120cc03f6819d1aadd08093f17908dc", name: "skating_loop.ogg" }, { bytes: 2932, md5: "b38416d729f357c79dc9e5a71c0918f7", name: "slapshot.mp3" }, {
                        bytes: 5533,
                        md5: "e5fa43d4025defc89597686d76d13e75",
                        name: "slapshot.ogg"
                    }, { bytes: 1659, md5: "72071830ea398942a27654cb70b378a5", name: "slapshot_swoosh.mp3" }, { bytes: 4787, md5: "2d6faf12bf6610e9d5cface82649693d", name: "slapshot_swoosh.ogg" }, { bytes: 4876, md5: "6b5a0eb817527c65c6185cc03c982b35", name: "spongebob_checked.mp3" }, { bytes: 8591, md5: "4ac8eb83139465c32177abda04d6b34f", name: "spongebob_checked.ogg" }, { bytes: 3226, md5: "b5e3bf8247df4564ee528eb671fe5ecb", name: "spongebob_goal1.mp3" }, { bytes: 6468, md5: "26978cc1c92bd02b5ed63f23919718fb", name: "spongebob_goal1.ogg" }, {
                        bytes: 5133,
                        md5: "7b27d4e2d25f0c70696f24fff6163bd9",
                        name: "spongebob_goal2.mp3"
                    }, { bytes: 8351, md5: "cd1d64c482129b98a30fd6d15f97974a", name: "spongebob_goal2.ogg" }, { bytes: 6006, md5: "3af3e3cf1604dadddded48c077dbeb5f", name: "spongebob_lose.mp3" }, { bytes: 9231, md5: "52eec3c33993610385dd4b69538d40b4", name: "spongebob_lose.ogg" }, { bytes: 7706, md5: "e965055e0e2dc1f9560c509a5ddfc384", name: "spongebob_select.mp3" }, { bytes: 10674, md5: "4903761400a8b2621a8a473090264de3", name: "spongebob_select.ogg" }, {
                        bytes: 18987,
                        md5: "f03c11190b14f13ad76bc95d4496b700",
                        name: "spongebob_super.mp3"
                    }, { bytes: 20769, md5: "ca681e8be06249077313dd23a39f60e9", name: "spongebob_super.ogg" }, { bytes: 4161, md5: "4618f235f96630ffe012e2ca3eb7f8ee", name: "spongebob_win1.mp3" }, { bytes: 7138, md5: "a23caa683a1d4a60739ec39d04554c87", name: "spongebob_win1.ogg" }, { bytes: 6328, md5: "82bdacba471da3a9d2447a7b573a44df", name: "spongebob_win2.mp3" }, { bytes: 9298, md5: "4758135609383bb8c81913a76b5d17eb", name: "spongebob_win2.ogg" }, { bytes: 14458, md5: "4b55ed1deed23997842ca6882dcf1f24", name: "super_april.mp3" }, {
                        bytes: 19317,
                        md5: "ec79c92014c1f24b974dd8af8ca46215",
                        name: "super_april.ogg"
                    }, { bytes: 7924, md5: "69278538aac4c6c442661a210307243c", name: "super_casey.mp3" }, { bytes: 10216, md5: "565c8e2dfe6e9da36f1572c736e395bd", name: "super_casey.ogg" }, { bytes: 8963, md5: "dc44e5cc9c33f127333469902b5b3637", name: "super_freeze_goalie.mp3" }, { bytes: 13181, md5: "6527bb3fb277b67bf877ead5feb0b24b", name: "super_freeze_goalie.ogg" }, { bytes: 18225, md5: "fe264a63c43e1b4a647fc8a0d085fbfe", name: "super_goat.mp3" }, {
                        bytes: 20350,
                        md5: "9e9e5f3be36110826c10c5c3938b895b",
                        name: "super_goat.ogg"
                    }, { bytes: 11580, md5: "a9abe943283d75046f358fc3daa2a9fb", name: "super_leo.mp3" }, { bytes: 14388, md5: "b92af7f4f26354c0581d5344040531c0", name: "super_leo.ogg" }, { bytes: 11669, md5: "18b09c9a116e7edc06d6bb869088958a", name: "super_pig.mp3" }, { bytes: 14087, md5: "293b32b789aca4608a59e753d874f402", name: "super_pig.ogg" }, { bytes: 3839, md5: "01ac7fd232ec8edf38441d4a0bfa6902", name: "super_ready.mp3" }, { bytes: 6440, md5: "5b019c1c843475a34f4135c7b64a8e4c", name: "super_ready.ogg" }, {
                        bytes: 3657,
                        md5: "52e7f2f42c1a71731db533ad89a0b4f3",
                        name: "super_reduce.mp3"
                    }, { bytes: 5973, md5: "7b274035245e69f861bc8374814bbb8c", name: "super_reduce.ogg" }, { bytes: 7976, md5: "0917e297092148b94549c0b1e363189b", name: "super_smash.mp3" }, { bytes: 11621, md5: "edb9ae238fc5befd6bf10f7f393cd03e", name: "super_smash.ogg" }, { bytes: 10383, md5: "2e14a50cf7bfd8eec06a83771fd82992", name: "super_spongebob.mp3" }, { bytes: 12552, md5: "3b3d4eda6843a89a4cb66dbb7f25515e", name: "super_spongebob.ogg" }, { bytes: 1460, md5: "7a03b6676fc826e69a4c63226917d2db", name: "super_wall.mp3" }, {
                        bytes: 4496,
                        md5: "70caf5ef85d16a4100ff6964f9faae83",
                        name: "super_wall.ogg"
                    }, { bytes: 2617, md5: "a9735e867e1842890928e98241ecdb24", name: "timmy_checked.mp3" }, { bytes: 5961, md5: "e6645dc5cb5291d0f4f2198e522d92a0", name: "timmy_checked.ogg" }, { bytes: 4415, md5: "de603b2e2c08ecfb0f89e9ac186eb1c1", name: "timmy_goal1.mp3" }, { bytes: 7117, md5: "0749b5fb7b9481c972e1124f71fe9c0e", name: "timmy_goal1.ogg" }, { bytes: 3059, md5: "3483d174a3fcfb62c82ff4e7f273f980", name: "timmy_goal2.mp3" }, { bytes: 6313, md5: "2612c535a2f11665e2d4bc4d61700b02", name: "timmy_goal2.ogg" }, {
                        bytes: 7470,
                        md5: "245430cbe5a67a6d4a785fae1f3fc7df",
                        name: "timmy_lose.mp3"
                    }, { bytes: 10702, md5: "ae0c959d6818ebd84593b9925a5a7239", name: "timmy_lose.ogg" }, { bytes: 7246, md5: "cacc21fa442b5359a19be02ffea7d7f1", name: "timmy_select.mp3" }, { bytes: 9732, md5: "70b0ae53494a9a0b01d6b7e87673808c", name: "timmy_select.ogg" }, { bytes: 13126, md5: "6490e7ff326814f216de0ce3b18dc7fe", name: "timmy_super.mp3" }, { bytes: 17352, md5: "9bb759fda2e323fd9d3ab5181742f9a4", name: "timmy_super.ogg" }, { bytes: 7045, md5: "cc2088fc0ed25ad43fac9e664010352b", name: "timmy_win1.mp3" }, {
                        bytes: 10027,
                        md5: "df323f7a3aa16376c6db0f3887008a01",
                        name: "timmy_win1.ogg"
                    }, { bytes: 5648, md5: "17a98602c8aa6259a6d59293da1c9280", name: "timmy_win2.mp3" }, { bytes: 8834, md5: "0dbd596b88d7972c911faa5f312cf36c", name: "timmy_win2.ogg" }, { bytes: 930, md5: "dfbc4150172b715c0eea9454696e8dfb", name: "ui_click.mp3" }, { bytes: 4056, md5: "54f581a516dc5de3a5d1dad0bd36e96e", name: "ui_click.ogg" }, { bytes: 3062, md5: "bf43a80c204b17fff2543c307823ec83", name: "unlock.mp3" }, { bytes: 5083, md5: "48ca404224443df24e8ebb137e1810f1", name: "unlock.ogg" }
                ],
                htp: [{
                    bytes: 2213,
                    md5: "8bf0dd3e4df78841acff507ed00343b5",
                    name: "arrow_down.png"
                }, { bytes: 1975, md5: "1f5386c0161f768ec4c21d72f4cce450", name: "arrow_left.png" }, { bytes: 1920, md5: "6f5f469b96d2b66ed787807c2d6eec3a", name: "arrow_right.png" }, { bytes: 13553, md5: "930dabe9bc26e684454140f4389776e4", name: "check_desktop_textbox.png" }, { bytes: 2266, md5: "5234bd4ae867e5d11571ae79520965a2", name: "curved_arrow.png" }, { bytes: 14440, md5: "6925f05e843e2ecefc9bd6174b667c40", name: "move_desktop_textbox.png" }, { bytes: 11339, md5: "afa058ceac4641b911711667953c2ca2", name: "puck_textbox.png" }, {
                    bytes: 11270,
                    md5: "0b8ee99a6b038659e059abf2791d616f",
                    name: "score_textbox.png"
                }, { bytes: 16919, md5: "358ac3a679737cb398690ecf18420110", name: "supermove_desktop_textbox.png" }],
                ui: [{ bytes: 2892, md5: "c83fb0e61e8fed68e2c40897e1d59f46", name: "btn_back.png" }, { bytes: 3006, md5: "93535708812e1a6e612c29af67be6d39", name: "btn_back_pressed.png" }, { bytes: 5767, md5: "a7d1a84bc2ff01375aca19ca96fc5468", name: "btn_enter_code.png" }, { bytes: 6011, md5: "c34e8b265f95831c225e85bebd222b3e", name: "btn_enter_code_pressed.png" }, {
                        bytes: 1495,
                        md5: "b56cd09fa6cc59966885aa2e7dcb542f",
                        name: "btn_equip.png"
                    }, { bytes: 1460, md5: "505c4609ced10896d836fd9b211f1b7f", name: "btn_equip_pressed.png" }, { bytes: 4150, md5: "7bc1c10f234cad178de17fbb8a2ca391", name: "btn_green.png" }, { bytes: 4214, md5: "eb6b8d871237655f1eefd66c0fa1d959", name: "btn_green_pressed.png" }, { bytes: 4277, md5: "3eee47484a7bc31731c9a3929aa3de8d", name: "btn_next.png" }, { bytes: 4196, md5: "501818b576549c35f7ef312019a39272", name: "btn_next_pressed.png" }, { bytes: 2240, md5: "f66d420a9d1068a5468708db98db5f42", name: "btn_pause.png" }, {
                        bytes: 2371,
                        md5: "f476528b08ad71323e5716a9ff6b65e7",
                        name: "btn_pause_pressed.png"
                    }, { bytes: 3869, md5: "9ed16355066905808433a46018f64960", name: "btn_pink.png" }, { bytes: 3908, md5: "1faea648e089f1b522efc0c1d8219d88", name: "btn_pink_pressed.png" }, { bytes: 4392, md5: "a39b656fbd1897c6949de60669b8f8cf", name: "btn_play.png" }, { bytes: 4599, md5: "dd35a2f580bfcf32c91e24fd7d1fdc8d", name: "btn_play_pressed.png" }, { bytes: 4250, md5: "da6f0967b3d5ba6166c349a26cd97078", name: "btn_prev.png" }, { bytes: 4423, md5: "2ca9389c3cad16871476fe3a649200df", name: "btn_prev_pressed.png" }, {
                        bytes: 2973,
                        md5: "1fd6891b9723ead6290b3f1bd7688b78",
                        name: "btn_quit.png"
                    }, { bytes: 3050, md5: "d703d3a7344c6237be8505d8dcd55c48", name: "btn_quit_pressed.png" }, { bytes: 1580, md5: "d7f08648b689d3c374b40d79ce8ea6cc", name: "btn_share.png" }, { bytes: 1520, md5: "d765f9dbe697b79aca07b69785750b71", name: "btn_share_pressed.png" }, { bytes: 2985, md5: "53fd22a4d946ba3a59f12c4a12eacd24", name: "btn_sound_off.png" }, { bytes: 2985, md5: "53fd22a4d946ba3a59f12c4a12eacd24", name: "btn_sound_off_pressed.png" }, { bytes: 2970, md5: "ae7b8598f47c7e1fe461bec3cd3ef4c8", name: "btn_sound_on.png" }, {
                        bytes: 2970,
                        md5: "ae7b8598f47c7e1fe461bec3cd3ef4c8",
                        name: "btn_sound_on_pressed.png"
                    }, { bytes: 1522, md5: "df8cdf061bd91351c69c0d1cecfe5b7f", name: "loading.png" }, { bytes: 16553, md5: "99f26c65e289745bddb30269dfe30e96", name: "popup_box.png" }, { bytes: 2033, md5: "36952b15d3a60d80b6941dec62879c2b", name: "shine.png" }, { bytes: 690, md5: "ae52f3bfe5ce4377af36f6394005d1c2", name: "stat_green.png" }, { bytes: 538, md5: "bdb78a787d5e91b6e045e75c0811c7ec", name: "stat_grey.png" }, { bytes: 690, md5: "5b622c4bfc14c659d98ef76c1384a005", name: "stat_red.png" },
                    { bytes: 3703, md5: "7ae753d15da34ed2ae57e9b3e66c32bc", name: "team_fop.png" }, { bytes: 12193, md5: "6f5f96fcdd54106e1d50db646ed26c31", name: "team_pgbc.png" }, { bytes: 4156, md5: "fc4a85fa273b2b1c8d6c39653d4c3725", name: "team_sbsp.png" }, { bytes: 3947, md5: "07afca29fb516b1274249d0b86b23797", name: "team_tmnt.png" }, { bytes: 1572, md5: "e2a147a17e7064f7ded0e94cbd06e1dd", name: "unlocked_icon.png" }
                ],
                ai: [{ bytes: 335, md5: "f939e03b4d28b46ea07e72462ddcc94b", name: "hockey_ai.json" }, { bytes: 254, md5: "65f07890a93177990ea5e162e72e0cfa", name: "hockey_defense_ai.json" },
                    { bytes: 109, md5: "85606218ab25ac93a27dc269833dabaf", name: "hockey_offense_ai.json" }
                ],
                ui_win: [{ bytes: 135223, md5: "1812b0a2f414c04b31c5bc02c325ef31", name: "bg.jpg" }, { bytes: 4288, md5: "067ce9fce68ffdf4997067e0fe5f19bb", name: "btn_equip.png" }, { bytes: 4412, md5: "a8a8f2a18fd4680cc94c67bfa0534650", name: "btn_equip_pressed.png" }, { bytes: 2578, md5: "21a2a1d8b8b0636ec7d0163913c76a55", name: "popup.png" }, { bytes: 513, md5: "27487900b1722853cff9e7324bca289a", name: "popup_arrow.png" }, {
                    bytes: 8546,
                    md5: "47970b9f7d5ee2c777ef040615176ce4",
                    name: "popup_beams.png"
                }],
                ui_hud: [{ bytes: 5317, md5: "39531ac96b04799b2676835a6c69f32a", name: "bg_score.png" }, { bytes: 2987, md5: "e42d89ff741e1a57b782f4a569c71265", name: "bg_timer.png" }, { bytes: 3205, md5: "850b762d72b758409d72374d771afa9c", name: "btn_check.png" }, { bytes: 3115, md5: "7b97f946d5bcf62cc4f56b2656efcf7b", name: "joystick_base.png" }, { bytes: 1945, md5: "25d55edbd4452c70b4c9bd14a5552300", name: "joystick_handle.png" }, { bytes: 1615, md5: "b5cf431c5609b9387fb3f2aacd3d2f1f", name: "puck_icon.png" }, {
                    bytes: 2147,
                    md5: "7e7880933ee10535e3a08957b001d1ce",
                    name: "puck_indicator.png"
                }, { bytes: 3382, md5: "41a3a92b0d3bd3dd99cf33b791182e1a", name: "supermove_back.png" }, { bytes: 2891, md5: "5b952c37c58ab9f8aa15049e4f6926ab", name: "supermove_bg.png" }, { bytes: 3262, md5: "59c9b80a3c8b383b8d663b87c215e50e", name: "supermove_fill.png" }],
                ui_end: [{ bytes: 183174, md5: "d37422bba05d3cbf8fcedbcbbf7a0801", name: "bg.jpg" }],
                ui_codes: [{ bytes: 16553, md5: "99f26c65e289745bddb30269dfe30e96", name: "bg.png" }],
                ui_mode: [{ bytes: 160840, md5: "fd6dc2742c5e05ed651f657876021fc6", name: "bg.jpg" }, {
                    bytes: 23884,
                    md5: "3a31d7377ce4489f01f7c75e413436b3",
                    name: "btn_quickmatch.png"
                }, { bytes: 27746, md5: "a9f3acff3c36058eed6ed8dc1c276ff9", name: "btn_tournament.png" }],
                ui_help: [{ bytes: 143463, md5: "7d71adcc03e7a66f3d29332864a70967", name: "bg.jpg" }, { bytes: 7943, md5: "bdf44f47da3b0af6a5c42dd2ae84111b", name: "page1.png" }, { bytes: 40206, md5: "c7d023f72715e98332ff827de2ceb388", name: "page1_m.png" }, { bytes: 38832, md5: "4d3c29e283b1802807e1393b9502f519", name: "page2.png" }, { bytes: 115372, md5: "473ae17f1ea45b72eea71ca957922b8f", name: "page3.png" },
                    { bytes: 61866, md5: "f0ce78cce4785941010adbcf55b44aff", name: "page4.png" }, { bytes: 81280, md5: "e2d787987e7c5ca1b31382538c88ec0b", name: "page5.png" }, { bytes: 88667, md5: "68ed8124f8880682638110c3b2a16456", name: "page5_m.png" }, { bytes: 6950, md5: "03b5dc00fc69e44f5f9f9e3205efcce4", name: "page6.png" }, { bytes: 6529, md5: "fea6363f5262e851c8ce52bfdef897fe", name: "page6_m.png" }, { bytes: 115102, md5: "eea6e8011ba6f8d029c142deef50cdc2", name: "page7.png" }
                ],
                sound_mobile: [{ bytes: 1710, md5: "d0137eb2d39d3025d960343e5b658996", name: "block.mp3" },
                    { bytes: 4856, md5: "2e02b6b20d3c5391db8b2dfe65e3b156", name: "block.ogg" }, { bytes: 4534, md5: "192c62fe67bcaa27cd443157c394956f", name: "brake.mp3" }, { bytes: 11889, md5: "68ec8836d5165783f9953a6e41396347", name: "brake.ogg" }, { bytes: 7248, md5: "2ff5643fe8607769a407b97e369aff9d", name: "check.mp3" }, { bytes: 10442, md5: "56020662bbcdd2077835e81042613239", name: "check.ogg" }, { bytes: 10656, md5: "8c812cb31f8c346f94daa4d09e06b9c1", name: "chloe_super.mp3" }, { bytes: 13897, md5: "31d8f0489f3d61342101b36ba59ecdf2", name: "chloe_super.ogg" }, {
                        bytes: 4990,
                        md5: "f232136e171187f107b4f529f7cb87b0",
                        name: "donnie_beam.mp3"
                    }, { bytes: 7809, md5: "2f2522fd6a8322685069665bcbea8ba5", name: "donnie_beam.ogg" }, { bytes: 8679, md5: "bb4ef85bbd7a428ecc8eeaeb0b532c43", name: "donnie_super.mp3" }, { bytes: 11622, md5: "1f0940a1ba344ef2d6239c81aaf4feba", name: "donnie_super.ogg" }, { bytes: 3278, md5: "778a32809aaf4d5a6777be1f6ac18fde", name: "equip_item.mp3" }, { bytes: 5597, md5: "e0105e837e6e8649aae0fe6c9aa17614", name: "equip_item.ogg" }, { bytes: 12839, md5: "9305beec6895bf70b8d0507b644f338e", name: "mike_super.mp3" },
                    { bytes: 11272, md5: "6f307fc57c0a450ecd2e20b9dbd4e891", name: "mike_super.ogg" }, { bytes: 42738, md5: "dbdf1d24f1c53f47ec07e38d1c1a3fc7", name: "pickup_frost.mp3" }, { bytes: 53586, md5: "b05a68f4441fd9fbe1259ecdd523c325", name: "pickup_frost.ogg" }, { bytes: 14520, md5: "21d3f6c08e7dd280ba4c106a72983cb2", name: "pickup_shield.mp3" }, { bytes: 16086, md5: "a5aa14921a1b4f6d907fcf00f5e4784c", name: "pickup_shield.ogg" }, { bytes: 19660, md5: "b198f98edc9b3d427469eccc8bd44fdb", name: "pickup_speed.mp3" }, {
                        bytes: 26140,
                        md5: "80161c5b2ac38d4c9ed4409a2b789eed",
                        name: "pickup_speed.ogg"
                    }, { bytes: 11824, md5: "d032a9d7096390faedd48bb6fa41b9b5", name: "score_bad.mp3" }, { bytes: 15085, md5: "a2bd415f3006892f319be952eff30696", name: "score_bad.ogg" }, { bytes: 11746, md5: "bce38a8391b7e13974791bbdf49aba88", name: "score_good.mp3" }, { bytes: 16055, md5: "965248f95704f999d0926ceaca69555b", name: "score_good.ogg" }, { bytes: 2906, md5: "6708deed51bd6cb111840f16ca7bca31", name: "slapshot.mp3" }, { bytes: 5215, md5: "7c779472a7c5dbd13c2841997a66f39b", name: "slapshot.ogg" }, {
                        bytes: 1658,
                        md5: "fcf4752fec396539661d62c12fc053f4",
                        name: "slapshot_swoosh.mp3"
                    }, { bytes: 4767, md5: "4fde68f5f0f988172cd2233bbf0b3c96", name: "slapshot_swoosh.ogg" }, { bytes: 14458, md5: "40ae1e792dcc9b0c136c1e3830a57609", name: "super_april.mp3" }, { bytes: 19262, md5: "9328258ea79f2d69b6cb28cc921ed65a", name: "super_april.ogg" }, { bytes: 7896, md5: "b33f937f5119cbeafae5086da9117e8d", name: "super_casey.mp3" }, { bytes: 10192, md5: "31e68c4f27487ade97b22ec46e973629", name: "super_casey.ogg" }, { bytes: 8626, md5: "07a6eafe1e97b6eba01722f65c806ad9", name: "super_freeze_goalie.mp3" }, {
                        bytes: 13049,
                        md5: "6dd881258c4867797b175479b7c216dc",
                        name: "super_freeze_goalie.ogg"
                    }, { bytes: 18355, md5: "e2e613daae27cabd53922f95c8c6bcb8", name: "super_goat.mp3" }, { bytes: 20379, md5: "eb1d6953326a2be1d7752fb36a78a89f", name: "super_goat.ogg" }, { bytes: 11213, md5: "fd03f1b39fbe560254ff589fff429acb", name: "super_leo.mp3" }, { bytes: 14370, md5: "16d37f183a585971c8f1a15a06f6a664", name: "super_leo.ogg" }, { bytes: 11694, md5: "854560bcabbee98e304819d7b1ad33f4", name: "super_pig.mp3" }, { bytes: 13685, md5: "ba91fab263a974d6f0dca6a409765f90", name: "super_pig.ogg" },
                    { bytes: 3839, md5: "11847311fc63f4c0f83f6239b2daf4af", name: "super_ready.mp3" }, { bytes: 6496, md5: "38422a46adda4749563c064a9f923082", name: "super_ready.ogg" }, { bytes: 3395, md5: "0cfbc965854798ca5645a53dc2238aa2", name: "super_reduce.mp3" }, { bytes: 5965, md5: "d81392372601ae963510fb638851090b", name: "super_reduce.ogg" }, { bytes: 8028, md5: "a1dcca2689f0405b704f1ce08548ab48", name: "super_smash.mp3" }, { bytes: 11545, md5: "d5596827d65c7a9f1146d9ec749fa571", name: "super_smash.ogg" }, {
                        bytes: 10096,
                        md5: "d9a2179186daf582936600d3ef0c42c1",
                        name: "super_spongebob.mp3"
                    }, { bytes: 13028, md5: "0bcfea1af9644a3ab343d819806fb135", name: "super_spongebob.ogg" }, { bytes: 1460, md5: "f18501aad4b8d349b9df2e9a90ffe391", name: "super_wall.mp3" }, { bytes: 4519, md5: "0b23476e50757e786b57a58dfabd8d82", name: "super_wall.ogg" }, { bytes: 13257, md5: "7df707c6350bd097268e5d6de75b8154", name: "timmy_super.mp3" }, { bytes: 16084, md5: "e4488f597ef2fc7b26ab099c1b95db77", name: "timmy_super.ogg" }, { bytes: 904, md5: "58ed72cc0d2563baffef60ccb2f34e9d", name: "ui_click.mp3" }, {
                        bytes: 4061,
                        md5: "5cef1416416d82993fa6b95104f8037f",
                        name: "ui_click.ogg"
                    }, { bytes: 3062, md5: "41dc0e85afd818241d4118506d243f0c", name: "unlock.mp3" }, { bytes: 4903, md5: "68526aff6e272036fbdbdfd97a0fa35b", name: "unlock.ogg" }
                ],
                ui_pause: [{ bytes: 153089, md5: "173d5398202577459aa78551f76ec0f6", name: "bg.jpg" }, { bytes: 5767, md5: "a7d1a84bc2ff01375aca19ca96fc5468", name: "btn_enter_code.png" }, { bytes: 6011, md5: "c34e8b265f95831c225e85bebd222b3e", name: "btn_enter_code_pressed.png" }, { bytes: 3010, md5: "8ed93aa0f4dc9ff1f94defdd5c5d3111", name: "btn_help.png" }, {
                    bytes: 3150,
                    md5: "c664a84dd0ac7799a87f4b710b0e9293",
                    name: "btn_help_pressed.png"
                }],
                htp_mobile: [{ bytes: 2213, md5: "8bf0dd3e4df78841acff507ed00343b5", name: "arrow_down.png" }, { bytes: 1975, md5: "1f5386c0161f768ec4c21d72f4cce450", name: "arrow_left.png" }, { bytes: 1920, md5: "6f5f469b96d2b66ed787807c2d6eec3a", name: "arrow_right.png" }, { bytes: 10870, md5: "b360c79a217d2d10c53774840a09d87f", name: "check_mobile_textbox.png" }, { bytes: 10999, md5: "401aec51ea8891174a0b3d5c6af7712e", name: "move_mobile_textbox.png" }, { bytes: 11339, md5: "afa058ceac4641b911711667953c2ca2", name: "puck_textbox.png" },
                    { bytes: 11270, md5: "0b8ee99a6b038659e059abf2791d616f", name: "score_textbox.png" }, { bytes: 11701, md5: "442b61d95578c8f1ba582b4352734c99", name: "supermove_mobile_textbox.png" }
                ],
                sprites: [{ bytes: 1194, md5: "3cf185c21f76d3432003a6e38c5f2969", name: "fx_shield/fx_shield0.json" }, { bytes: 75357, md5: "1d49a62a1273b56160f0515f57b1be37", name: "fx_shield/fx_shield0.png" }, { bytes: 2084, md5: "6a87d2c766dde436f4ef9838488d7965", name: "fx_slow/fx_slow0.json" }, { bytes: 84329, md5: "f7ccb3b00273c9ef0c44599707631b46", name: "fx_slow/fx_slow0.png" },
                    { bytes: 15864, md5: "1b56fe75ca9f837f1b3f13d4c1b3614b", name: "goaler_fop.png" }, { bytes: 5257, md5: "c8be4d60eff6478bf82ed7bee77cbc00", name: "goaler_pgbc.png" }, { bytes: 14256, md5: "9f03854f44d42ccb35bfae1b4ece5c60", name: "goaler_sbsp.png" }, { bytes: 5370, md5: "64e9b565bea7af9107c9b2912e47aee4", name: "goaler_tmnt.png" }, { bytes: 1152, md5: "133aa0560561de58bfe4e0e132d4ae72", name: "hidden_bumper/hidden_bumper0.json" }, { bytes: 10653, md5: "67abcde302207cd104aaa10e1e8cee61", name: "hidden_bumper/hidden_bumper0.png" }, {
                        bytes: 6292,
                        md5: "8e81ee18a8abc9e040f5c52332391505",
                        name: "hit.png"
                    }, { bytes: 4596, md5: "61435005ed0794dd4a3c542a2f904679", name: "player_circle.png" }, { bytes: 7618, md5: "fce1230eeb2add275add811151487ab9", name: "wall_bumper_1.png" }, { bytes: 3855, md5: "2c4c133d05fe8e7e7f465cd5253a4435", name: "wall_bumper_2.png" }
                ],
                ui_preview: [{ bytes: 144505, md5: "14190de9e8b4d416b3460c346e50031d", name: "bg.jpg" }, { bytes: 11886, md5: "e865ae960858f3a20f901660668a4cff", name: "teams_textbox.png" }],
                customization: [{ bytes: 10104, md5: "0ffa9162b3efee2a3b92f67fadd0c6af", name: "items.json" }],
                debug: [{
                    bytes: 300,
                    md5: "b6fe598da87b5fdb46129156ea00f2cd",
                    name: "debug_example.json"
                }, { bytes: 7992, md5: "a2d0330d20f20de8490e83806e1c7871", name: "debug_font.fnt" }, { bytes: 1780, md5: "3c6dc308b980589bc4580aa9446c5f48", name: "debug_font.png" }, { bytes: 2197, md5: "37d9558189dd4cbffe736595c840600d", name: "particles.pex" }, { bytes: 221, md5: "f1414380ccbb1cf9e58069cba28e904b", name: "sprite.png" }],
                sprites_env1: [{ bytes: 159141, md5: "011b7682a6c3338d80c411f654b90a22", name: "bande_left_01.png" }, {
                        bytes: 42538,
                        md5: "af360ba7dd76fea210fc99730f0cd242",
                        name: "bande_left_02.png"
                    }, { bytes: 8175, md5: "176076e3960270a5f09e01dd11815e00", name: "bande_middle.png" }, { bytes: 176412, md5: "f58087aaa42910965350619927713ae4", name: "bande_right_01.png" }, { bytes: 42779, md5: "c883daeab60c913a55fea8f4ff26a5b9", name: "bande_right_02.png" }, { bytes: 42877, md5: "c7c5c8b65f0d1db7abf45794b048cb23", name: "crowd_left.jpg" }, { bytes: 28343, md5: "ce919266529ab35bc8c3d090c0718fcd", name: "crowd_middle.jpg" }, { bytes: 44160, md5: "7e515444771ee7bf5d39c040afcaf039", name: "crowd_right.jpg" }, {
                        bytes: 101237,
                        md5: "568ee8491ac98bf1448d26ab1a7b5c75",
                        name: "ice_left.jpg"
                    }, { bytes: 49972, md5: "e882356c4d80cfd641ae5a53abbefe0e", name: "ice_middle.jpg" }, { bytes: 100664, md5: "af08afc5f90425ef54920817cdcb54d7", name: "ice_right.jpg" }, { bytes: 9071, md5: "7b4ca7f58b2d0aa7088970146485acd4", name: "icelogo_fop.png" }, { bytes: 15667, md5: "06ba4dad150564e93dd35ec445ad81e0", name: "icelogo_pgbc.png" }, { bytes: 11017, md5: "fe19ff1fc6ce0c221b5cbb6c10bc2189", name: "icelogo_sbsp.png" }, { bytes: 11383, md5: "75882e31e909b005688fd9d5a276528f", name: "icelogo_tmnt.png" },
                    { bytes: 6040, md5: "35c2ef90d0e0a7ff2d4abf7d30c0ed08", name: "midice_line.png" }, { bytes: 174375, md5: "ab2d897bfb907880c5284552ec67039a", name: "ol_left_01.png" }, { bytes: 35266, md5: "5e44dcdf77067f720cef2e57d4c359a2", name: "ol_left_02.png" }, { bytes: 5657, md5: "23b946cce5fb79e3d6e93d702177c4c7", name: "ol_middle.png" }, { bytes: 173356, md5: "91aea3d7b36a9b82c233799aed04f4a4", name: "ol_right_01.png" }, { bytes: 36574, md5: "77dc20eb03add58a230a6551e0d5268c", name: "ol_right_02.png" }
                ],
                sprites_highend: [{
                    bytes: 2517,
                    md5: "35f4425202e9d5df6dde99f83fe7704f",
                    name: "goal_canon/goal_canon0.json"
                }, { bytes: 132536, md5: "c3002955b368f5d05263946e2e29d84e", name: "goal_canon/goal_canon0.png" }, { bytes: 2522, md5: "e1d12b56c2ae373b1157936a61d398cb", name: "goal_canon_left/goal_canon_left0.json" }, { bytes: 135802, md5: "60fe6060672c043fe478cf4adc189285", name: "goal_canon_left/goal_canon_left0.png" }, { bytes: 12383, md5: "e8ae8c0d0160db7ef1a600c61957e8ef", name: "ol_coinleft_01.png" }, { bytes: 27682, md5: "8e77ebebe54c4574af4fe5f60b84e164", name: "ol_coinleft_02.png" }],
                text: [{
                    bytes: 11615,
                    md5: "221dc8aa1e97ee205f7577a18fe18a8a",
                    name: "localization.xml"
                }],
                temp: [],
                crowd: [{ bytes: 5019, md5: "c98e89c1da69fb28a04cf5b0c51fc210", name: "april/april.json" }, { bytes: 14233, md5: "3c8dddaedcf69c2f5e87f1aa7717083e", name: "april/april.png" }, { bytes: 4022, md5: "de4914f91e98a85df5ef8c3a921808d9", name: "crab/crab.json" }, { bytes: 25571, md5: "dfd14d64be14cae5ca3c3b0959bcbc6f", name: "crab/crab.png" }, { bytes: 5523, md5: "8dfc050fd891e503672c4aa5971001a4", name: "hector/hector.json" }, { bytes: 15736, md5: "2a13eb8a2932e240021d15617c0c3e2a", name: "hector/hector.png" }, {
                    bytes: 6654,
                    md5: "50e1cebb151c42c757fcbcaa14e9acee",
                    name: "megan/megan.json"
                }, { bytes: 39320, md5: "08a6fe32549cb84846252a025f3039cf", name: "megan/megan.png" }, { bytes: 4501, md5: "091cfe0bd6b341be57a8799e2cd9685f", name: "splinter/splinter.json" }, { bytes: 54378, md5: "d70a2dbbf91e54a47ce9c703c7e2e6f0", name: "splinter/splinter.png" }],
                crowd_bg: [{ bytes: 3722, md5: "ecfdab72e81700a0a9630b5b5d70a43d", name: "bell/bell.json" }, { bytes: 20499, md5: "3927a97fbff9a411bbf855952393e571", name: "bell/bell.png" }, {
                    bytes: 3954,
                    md5: "71f7d924bb7d58ee44ab81ac9b2abf7d",
                    name: "chef/chef.json"
                }, { bytes: 34266, md5: "806a48f10488e8139a5a4cb9ca201c74", name: "chef/chef.png" }, { bytes: 4767, md5: "81ee030bb26f72a9c887bf488d28a8a0", name: "jelly/jelly.json" }, { bytes: 8109, md5: "7945900028e7fe8cb4cbea9293df2e76", name: "jelly/jelly.png" }, { bytes: 3052, md5: "26caf2162437e60a7f8fac321639f699", name: "krang/krang.json" }, { bytes: 16006, md5: "1d0a8dd4f10e83672248664234c3b8b0", name: "krang/krang.png" }, { bytes: 5417, md5: "b7e845fb7b284577c610b8cd226d81a9", name: "lightgreenfish/lightgreenfish.json" }, {
                    bytes: 12474,
                    md5: "ffea9667bf14ba15a189d8522c1d8273",
                    name: "lightgreenfish/lightgreenfish.png"
                }, { bytes: 3538, md5: "b436f0fbedeb51b08874fa1473febf04", name: "mrkrabs/mrkrabs.json" }, { bytes: 24450, md5: "d816855b84d09986e5ba674576c1f571", name: "mrkrabs/mrkrabs.png" }, { bytes: 7548, md5: "03d39e074aff346ee1361dc2c3b8ddb9", name: "mrleslie/mrleslie.json" }, { bytes: 12881, md5: "3fa67166c2fd84eb71f6eb585f9af5ff", name: "mrleslie/mrleslie.png" }, { bytes: 3720, md5: "29db1c271ba4f6a13709b26ac5195bea", name: "shredder/shredder.json" }, {
                    bytes: 21141,
                    md5: "6498d24e6fc1012b6679ee013f21bd5a",
                    name: "shredder/shredder.png"
                }],
                config: [{ bytes: 651, md5: "968963d9f6aebef35863d1b0106fe965", name: "config.json" }],
                trails: [{ bytes: 5596, md5: "364ff98df1b1e2f7eb73d01174d93206", name: "trail_coins/trail_coins0.json" }, { bytes: 86204, md5: "6eb3265d0cca261d5084df88dbbadf20", name: "trail_coins/trail_coins0.png" }, { bytes: 5598, md5: "16987824a442dd6253e493e4b43244ac", name: "trail_coins_02/trail_coins_02.json" }, { bytes: 119832, md5: "17d9a10c9baea910bd79595ff1b223e3", name: "trail_coins_02/trail_coins_02.png" }, {
                        bytes: 4255,
                        md5: "7c2d4b39b76ac67116277d70e822eec0",
                        name: "trail_cute/trail_cute0.json"
                    }, { bytes: 61608, md5: "047a287ed121dbe66d8a1c8ea1eab81d", name: "trail_cute/trail_cute0.png" }, { bytes: 4257, md5: "ca2ba868866d34e551b3b5488bdd6e6d", name: "trail_cute_02/trail_cute_02.json" }, { bytes: 81461, md5: "9024748ea7b8f12a7a2824fd59923a9f", name: "trail_cute_02/trail_cute_02.png" }, { bytes: 3029, md5: "d0a7092d680596eeb5c49b5535436376", name: "trail_fire/trail_fire0.json" }, { bytes: 7776, md5: "1df2d0453e39930be12d44b26f54277b", name: "trail_fire/trail_fire0.png" }, {
                        bytes: 3031,
                        md5: "ef40d8347ec3de587f9e7d6f90eabcd1",
                        name: "trail_fire_02/trail_fire_02.json"
                    }, { bytes: 7620, md5: "f57b879e4e161e8d867cb34e48eb3303", name: "trail_fire_02/trail_fire_02.png" }, { bytes: 3821, md5: "c50bce0fa456783443b6fc265c1e7e00", name: "trail_flower/trail_flower0.json" }, { bytes: 20126, md5: "c9a50f4af05c21fd4b1bb4ae5e8ed3d7", name: "trail_flower/trail_flower0.png" }, { bytes: 3823, md5: "ec43397b31a2d22bcfb9ad86b10746cd", name: "trail_flower_02/trail_flower_02.json" }, { bytes: 20291, md5: "c6e10ddce5a9eb50230045dc2540add0", name: "trail_flower_02/trail_flower_02.png" },
                    { bytes: 4633, md5: "79d2397d6dbd4f853b62766b2cf1589a", name: "trail_smell/trail_smell0.json" }, { bytes: 19119, md5: "13a5fbb3f3a72ed0f2df126f144d751a", name: "trail_smell/trail_smell0.png" }, { bytes: 4635, md5: "f9c48f063bc3168cd01010551dd4f0b0", name: "trail_smell_02/trail_smell_02.json" }, { bytes: 19118, md5: "b0d0a50440bbe6b0d22cd7faf2861fa5", name: "trail_smell_02/trail_smell_02.png" }
                ]
            }]
        }
    };
    pa._supportsCrossOrigin = function() {
        var a;
        a = 0 <= window.navigator.userAgent.indexOf("Linux; U; Android") ? !1 : null != (new XMLHttpRequest).withCredentials;
        a || null;
        return a
    }();
    s._scratchPoint = new ob;
    yf.NEWLINE = new $h(10);
    Sc._sharedEvent = new Al;
    Wc._sharedEvent = new Bl;
    zb._sharedEvent = new Cl;
    Wf.CANVAS_TEXTURES = (new Qc("(iPhone|iPod|iPad)", "")).match(window.navigator.userAgent);
    Ja._mediaRefCount = 0;
    Ja._detectBlobSupport = !0;
    la.VENDOR_PREFIXES = ["webkit", "moz", "ms", "o", "khtml"];
    la.SHOULD_HIDE_MOBILE_BROWSER = window.top == window && (new Qc("Mobile(/.*)? Safari", "")).match(window.navigator.userAgent);
    Da._detectSupport = !0;
    Xc._scratchMatrix = new Uc;
    ba.canadaTrackingEnabled = !1;
    ba.isReady = !1;
    Tl.mobileControls = !1;
    ee.defaultPack = "ui_loading";
    Cd.Grid = { x: 475, y: 92, perRow: 4, spacing: { x: 110, y: 110 } };
    Ed.Grid = { x: 25, y: 150, perRow: 6, spacing: { x: 140, y: 150 } };
    zi.DefaultScene = "title";
    zi.scenes = function() {
        var a = new K;
        a.set("Loading", af);
        a.set("Title", eg);
        a.set("GameMode", Ai);
        a.set("SelectCharacter", Cd);
        a.set("CustomizeCharacter", Ci);
        a.set("SelectLevel", Ed);
        a.set("GameplayLoading", Di);
        a.set("Gameplay", Fi);
        a.set("Pause", Gi);
        a.set("Help", gg);
        a.set("Win", Ii);
        a.set("End", hg);
        a.set("CustomizationTuto",
            Ji);
        a.set("CharacterTuto", Ki);
        return a
    }(this);
    nc.DEFAULT_OFFET_TIME = 1;
    nc.DEFAULT_OFFET_EASING = E.quadInOut;
    ra.IDLE = { name: "idle", priority: 0, loop: !0 };
    ra.SKID_STOP = { name: "skid_stop", priority: 1, loop: !1 };
    ra.SLIDE = { name: "slide", priority: 0, loop: !0 };
    ra.SKATE = { name: "skate", priority: 0, loop: !0 };
    ra.CHECKED = { name: "checked", priority: 3, loop: !0 };
    ra.BUMPED = { name: "bumped", priority: 1, loop: !0 };
    ra.SLAPSHOT = { name: "slapshot", priority: 2, loop: !1 };
    ra.PRE_SLAPSHOT = { name: "pre_slapshot", priority: 1, loop: !1 };
    ra.SUPER = {
        name: "super_shoot",
        priority: 4,
        loop: !1
    };
    Mb.STATE_ACTIVE = 1;
    Mb.STATE_FROZEN = 2;
    Mb.STATE_BROKEN = 3;
    Td.superMoveValues = "3,4,5,6,7,8".split(",");
    Td.statOverrides = {
        superFreeze: { baseChargeRate: { stat: "superRate", values: Td.superMoveValues } },
        superGiant: { baseChargeRate: { stat: "superRate", values: Td.superMoveValues } },
        superStun: { baseChargeRate: { stat: "superRate", values: Td.superMoveValues } },
        superWall: { baseChargeRate: { stat: "superRate", values: Td.superMoveValues } },
        puckHandling: { slapPower: { stat: "power", values: "*=1,*=1,*=2,*=3,*=4,*=5".split(",") } },
        speedModifier: { maxVelocityX: { stat: "speed", values: "*=1,*=1,*=1.083,*=1.167,*=1.25,*=1.33".split(",") }, maxVelocityY: { stat: "speed", values: "*=1,*=1,*=1.083,*=1.167,*=1.25,*=1.33".split(",") } }
    };
    Ud.DefaultPack = "ai";
    qd.TARGET_TEMPLATE = { transform: { position: { x: 0, y: 0 }, fixed: !1 } };
    Wd.SOUND_CHANNEL = "COLLECTABLE";
    Ee.TILE_SIZE = 440;
    Ee.physicWidthBuffer = 25;
    lb.EDITOR_EXCLUDE = "_complexShape,initialized,forceUpdate,setTransform,enabled,velocity,impulse".split(",");
    lb.defaultDamping = 0;
    lb.DEFAULT_SHAPE = {
        x: 0,
        y: 0,
        width: 0,
        height: 0,
        padding: { left: 0, top: 0, right: 0, bottom: 0 },
        docking: { left: 0, top: 0, right: 0, bottom: 0 },
        sensor: !1,
        material: null,
        fluid: null,
        points: []
    };
    lb.DEFAULTS = { shape: {}, offset: { x: 0, y: 0 }, contacts: !0, mass: 0, massScale: -1, bullet: !1, velocity: { x: 0, y: 0 }, impulse: { x: 0, y: 0 }, kinematic: !1, enabled: !0 };
    Wg.DEFAULTS = {
        shape: { type: "polygon", x: 0, y: 0, sensor: !1, material: null, fluid: null, points: [{ x: 0, y: 0 }, { x: 100, y: 0 }, { x: 100, y: 200 }, { x: 0, y: 200 }, { x: 0, y: 150 }, { x: 50, y: 150 }, { x: 50, y: 50 }, { x: 0, y: 50 }, { x: 0, y: 0 }] },
        offset: { x: 0, y: 0 },
        contacts: !0,
        mass: 0,
        massScale: -1,
        bullet: !1,
        velocity: { x: 0, y: 0 },
        impulse: { x: 0, y: 0 },
        kinematic: !1,
        enabled: !0
    };
    Yb.HIDDEN = 0;
    Yb.JITTERING = 1;
    Yb.SHOWN = 2;
    R.EDITOR_EXCLUDE = ["forceUpdate", "initialized", "_parentViewMatrixUpdateCount", "_viewMatrixUpdateCount"];
    R.ENABLE_POINTER = !1;
    R.mobilePackSuffix = "_mobile";
    R.lowEndPackSuffix = "_low";
    bf.EDITOR_EXCLUDE = "_defaultSlotOffset,_locked,_loop,forceUpdate,initialized,_parentViewMatrixUpdateCount,_viewMatrixUpdateCount".split(",");
    bf.ResetPose = !0;
    an.components = function() {
        var a = new K;
        a.set("player", Ug);
        a.set("character", Tg);
        a.set("characterState", ra);
        a.set("puckHandling", Oi);
        a.set("action", Mi);
        a.set("depthScale", Qi);
        a.set("gameCollectable", Ri);
        a.set("gameCollector", Si);
        a.set("goalkeeper", Mb);
        a.set("mods", Td);
        a.set("afterImage", Ni);
        a.set("iceRink", Ee);
        a.set("goal", Ti);
        a.set("concavePhysics", Wg);
        a.set("speedModifier", Wi);
        a.set("swipe", Gd);
        a.set("swipeThrough", Xi);
        a.set("ai", Pi);
        a.set("puck", Yi);
        a.set("characterSpawn", Sd);
        a.set("crowd", Zi);
        a.set("bumper", Vd);
        a.set("hiddenBumper",
            Yb);
        a.set("gameCustomization", $i);
        a.set("superFreeze", aj);
        a.set("superGiant", bj);
        a.set("superStun", cj);
        a.set("superWall", dj);
        a.set("trail", ej);
        a.set("trailGenerator", fj);
        a.set("spine", bf);
        a.set("customization", Ge);
        return a
    }(this);
    q.$name = "nick_hockey_v3";
    q.width = 960;
    q.height = 560;
    q.pointsToFinishGame = 3;
    q.musicVolume = 0.5;
    q.tournamentLootRatio = 1;
    q.quickMatchLootRatio = 0.8;
    q.loseLootRatio = 0.6;
    sa.WAKE = 1;
    sa.PROPS = 2;
    sa.ANGDRAG = 4;
    sa.ARBITERS = 8;
    Ef.PlayerMaterial = new Xg(10, 0, 0, 1, 0.002);
    Ef.PuckMaterial = new Xg(250,
        0, 0, 1, 1);
    Ia.ENCRYPT = !1;
    pd.FLAG = "flag";
    pd.HEAD = "head";
    pd.SHOULDERS = "shoulders";
    pd.STICK = "stick";
    pd.TRAIL = "trail";
    pd.ALTERABLE = [pd.FLAG, pd.HEAD, pd.SHOULDERS, pd.STICK, pd.TRAIL];
    ga.leo = ["head1", "stick1", "flagclear", "shouldersclear", "trailclear"];
    ga.raph = ["head1", "stick1", "flagclear", "shouldersclear", "trailclear"];
    ga.mike = ["head1", "stick1", "flagclear", "shouldersclear", "trailclear"];
    ga.donnie = ["head1", "stick1", "flagclear", "shouldersclear", "trailclear"];
    ga.casey = ["head1", "stick1", "flagclear", "shouldersclear",
        "trailclear"
    ];
    ga.april = ["head1", "stick1", "flagclear", "shouldersclear", "trailclear"];
    ga.spongebob = ["head6", "stick1", "flagclear", "shouldersclear", "trailclear"];
    ga.patrick = ["head7", "stick1", "flagclear", "shouldersclear", "trailclear"];
    ga.pig = ["head2", "stick1", "flagclear", "shouldersclear", "trailclear"];
    ga.goat = ["head2", "stick1", "flagclear", "shouldersclear", "trailclear"];
    ga.chloe = ["head3", "stick1", "flagclear", "shouldersclear", "trailclear"];
    ga.timmy = ["head4", "stick1", "flagclear", "shouldersclear", "trailclear"];
    Qa.initDone = !1;
    Qa.loot = new K;
    mc.minValue = 0;
    mc.maxValue = 5;
    ca.TMNT = "tmnt";
    ca.SBSP = "sbsp";
    ca.PGBC = "pgbc";
    ca.FOP = "fop";
    ca.leo = { name: "leo", template: "leo", code: "A", team: ca.TMNT, partner: "raph", speed: 2, superRate: 1, power: 1 };
    ca.raph = { name: "raph", template: "raph", code: "B", team: ca.TMNT, partner: "leo", speed: 1, superRate: 1, power: 2 };
    ca.april = { name: "april", template: "april", code: "C", team: ca.TMNT, partner: "casey", speed: 1, superRate: 2, power: 1 };
    ca.casey = {
        name: "casey",
        template: "casey",
        code: "D",
        team: ca.TMNT,
        partner: "april",
        speed: 2,
        superRate: 1,
        power: 1
    };
    ca.spongebob = { name: "spongebob", template: "spongebob", code: "E", team: ca.SBSP, partner: "patrick", speed: 1, superRate: 2, power: 1 };
    ca.patrick = { name: "patrick", template: "patrick", code: "F", team: ca.SBSP, partner: "spongebob", speed: 1, superRate: 1, power: 2 };
    ca.pig = { name: "pig", template: "pig", code: "G", team: ca.PGBC, partner: "goat", speed: 1, superRate: 2, power: 1 };
    ca.goat = { name: "goat", template: "goat", code: "H", team: ca.PGBC, partner: "pig", speed: 1, superRate: 1, power: 2 };
    ca.mike = {
        name: "mike",
        template: "mike",
        code: "I",
        team: ca.TMNT,
        partner: "donnie",
        speed: 1,
        superRate: 1,
        power: 2
    };
    ca.donnie = { name: "donnie", template: "donnie", code: "J", team: ca.TMNT, partner: "mike", speed: 2, superRate: 1, power: 1 };
    ca.chloe = { name: "chloe", template: "chloe", code: "K", team: ca.FOP, partner: "timmy", speed: 1, superRate: 2, power: 1 };
    ca.timmy = { name: "timmy", template: "timmy", code: "L", team: ca.FOP, partner: "chloe", speed: 2, superRate: 1, power: 1 };
    ca.list = [ca.leo, ca.raph, ca.mike, ca.donnie, ca.april, ca.casey, ca.spongebob, ca.patrick, null, ca.pig, ca.goat, ca.chloe,
        ca.timmy
    ];
    m.sneakPeak1 = [];
    m.sneakPeak2 = [];
    m.isTournament = !1;
    m.tournamentCount = 0;
    m.quickMatchCount = 0;
    m.hasWon = !0;
    m.teamScore = 3;
    m.opponentScore = 2;
    m.gameTime = 0;
    m.checks = 0;
    m.checked = 0;
    m.superUsed = 0;
    m.shareCode = "XXXXXX";
    m.singlePlayer = !1;
    pc._levelCache = new K;
    jb.LIST = "level1,level2,level3,level4,level5,level6".split(",");
    Ff.pickupTemplates = ["pickup_frost", "pickup_shield", "pickup_speed"];
    ab.stepId = 0;
    ab.tutoDuration = 10;
    ab.MOVE = ab.stepId++;
    ab.CHECK = ab.stepId++;
    ab.GOAL = ab.stepId++;
    ab.SUPERMOVE = ab.stepId++;
    Dd.NB_STAT = 5;
    Ce.USE_CACHE = !1;
    Ce.USE_ENUM_INDEX = !1;
    Ce.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
    xb.DEFAULT_RESOLVER = Y;
    xb.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
    Id.CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    Id.BYTES = Zc.ofString(Id.CHARS);
    $b.count = 0;
    Ue.escapes = function() {
        var a = new K;
        a.set("lt", "<");
        a.set("gt", ">");
        a.set("amp", "&");
        a.set("quot", '"');
        a.set("apos", "'");
        a.set("nbsp", String.fromCharCode(160));
        return a
    }(this);
    hb.SCALE = 1;
    ac.BASE_URL = "";
    ib.SCALE = 1;
    ib.hasInit = !1;
    ib._tmp = 1;
    Ea.enabled = !1;
    t.epsilon = 1.0E-8;
    t.fluidAngularDragFriction = 2.5;
    t.fluidAngularDrag = 100;
    t.fluidVacuumDrag = 0.5;
    t.fluidLinearDrag = 0.5;
    t.collisionSlop = 0.2;
    t.collisionSlopCCD = 0.5;
    t.distanceThresholdCCD = 0.05;
    t.staticCCDLinearThreshold = 0.05;
    t.staticCCDAngularThreshold = 0.005;
    t.bulletCCDLinearThreshold = 0.125;
    t.bulletCCDAngularThreshold = 0.0125;
    t.dynamicSweepLinearThreshold = 17;
    t.dynamicSweepAngularThreshold = 0.6;
    t.angularCCDSlipScale =
        0.75;
    t.arbiterExpirationDelay = 6;
    t.staticFrictionThreshold = 2;
    t.elasticThreshold = 20;
    t.sleepDelay = 60;
    t.linearSleepThreshold = 0.2;
    t.angularSleepThreshold = 0.4;
    t.contactBiasCoef = 0.3;
    t.contactStaticBiasCoef = 0.6;
    t.contactContinuousBiasCoef = 0.4;
    t.contactContinuousStaticBiasCoef = 0.5;
    t.illConditionedThreshold = 2E8;
    Ua.staging = "localhost,stolo.com,192.168,hudson.mtvi.com,stash.mtvi.com,nick-q".split(",");
    Ua.onMute = new I;
    Ua.onPause = new ia;
    Ua.onResume = new ia;
    qa.REDIRECT_URL = "";
    qa.DOMAIN_LIST = [];
    qa.REDIRECT_DELAY =
        3E4;
    qa.GET_DOMAINS_DELAY = 3E3;
    Wb.output_event_array = [];
    If.yDown = !0;
    $a.tempPosition = Array(2);
    $a.radDeg = 180 / Math.PI;
    Ka.defaultPack = "ai";
    Ka._cache = new K;
    nh.color = 16776960;
    F.tweens = new $b;
    F.DefaultTime = 0.4;
    F.DefaultEase = E.quintOut;
    td.bounceDownTemplate = [{ to: { y: "+=10" }, time: 0.05, ease: E.quintOut }, { then: { y: "+=0" }, time: 0.3, ease: E.backOut }];
    Gb.DefaultMovePPS = 100;
    Gb.DefaultMoveSpeed = 1;
    Gb.DefaultMoveTime = 1;
    Gb.DefaultMoveEase = E.quadInOut;
    $.packName = "customization";
    $.savePrefix = "customization_";
    $._all = [];
    $._byId =
        new K;
    $._byType = new K;
    $._byCode = new K;
    L.onTemplateAdded = new I;
    L.onActorData = new I;
    L._registeredComponents = new K;
    L._componentMap = new K;
    L._templateMap = new K;
    Ob.EDITOR_DEFAULTS = {};
    ph.DEFAULTS = { value: 0.1, knockBackX: 0, knockBackY: 0, cooldown: 0.3, charge: -1, enabled: !0, target: "DAMAGEABLE" };
    Pe.DefaultFont = "debug_font";
    Pe.DEFAULTS = { center: !0, shape: {}, text: "" };
    qh.EDITOR_EXCLUDE = ["key", "spawner"];
    Oe.EDITOR_EXCLUDE = ["direction"];
    Oe.EDITOR_METHODS = ["flip"];
    th.EDITOR_EXCLUDE = ["forceUpdate", "initialized", "_parentViewMatrixUpdateCount",
        "_viewMatrixUpdateCount"
    ];
    uh.DEFAULTS = { layer: "default", offset: { x: 0, y: 0 }, color: 16711680, width: 100, height: 100, transparency: 0 };
    vh.DEFAULTS = { pack: "", asset: "", layer: "default", offset: { x: 0, y: 0 }, overrides: {}, start: null, autoRemove: !1, delay: 0, loop: !0, fps: -1 };
    vc.DEFAULTS = { cullTexture: !0, drawTexture: !1 };
    vc.EDITOR_DEFAULTS = {
        pack: "",
        asset: "",
        layer: "default",
        grid: "default",
        offset: { x: 0, y: 0 },
        xsize: 2,
        ysize: 2,
        tileWidth: 100,
        tileHeight: 100,
        mapping: [
            [4],
            [7],
            [1],
            [6],
            [1],
            [4],
            [0],
            [3],
            [1],
            [8],
            [4],
            [7],
            [2],
            [5],
            [1],
            [4]
        ],
        cornerMode: !1,
        cullTexture: !0,
        cache: !0
    };
    vc.tileCache = new K;
    vc.cache = new K;
    ub.DEFAULTS = vc.DEFAULTS;
    ub.EDITOR_DEFAULTS = { pack: "", asset: "", layer: "default", offset: { x: 0, y: 0 }, width: 200, height: 200, slices: [], template: [] };
    ub.cache = new K;
    ed.USE_CACHE = !0;
    ed.CACHE = new K;
    yh.DEFAULTS = {};
    zh.DEFAULTS = { left: !0, right: !0, top: !1, bottom: !0 };
    Ah.DEFAULTS = {};
    sg.defaultResistance = 2;
    Zd.SOUND_CHANNEL = "DAMAGE";
    Zd.SOUND_CHANNEL_DEATH = "DEATH";
    Zd.DEFAULTS = {
        maximum: 1,
        knock: 1,
        cooldown: 0,
        invincible: !1,
        disposeOwner: !1,
        removePhysics: !0,
        damageSound: "",
        invincibleSound: "",
        deathSound: ""
    };
    nf.DEFAULTS = { projectile: "", offset: { x: 0, y: 0 }, force: 100, angle: 0, launchSound: "", shotDelay: 1 };
    Bh.DEFAULTS = { projectile: "", projectiles: 5, offset: { x: 0, y: 0 }, force: 400, angle: -90, angleSpread: 50, launchSound: "", shotDelay: 0 };
    Ch.DEFAULTS = { removeAfter: 0, stopPhysicOnExplode: !1, velocityRotation: !1, explodeSound: "", hitSound: "", expire: 0, ignoreProjectiles: !0, target: "ANY_BODY" };
    Dh.DEFAULTS = { sequence: null, repeat: !1, speed: 1 };
    sn.ComponentMap = function() {
        var a = new K;
        a.set("debug", Pe);
        a.set("template",
            qh);
        a.set("transform", Oe);
        a.set("moveTransform", tk);
        a.set("moveSequence", rh);
        a.set("cameraTarget", pk);
        a.set("cameraTargetDirection", qk);
        a.set("editorSelection", sh);
        a.set("display", R);
        a.set("image", th);
        a.set("fill", uh);
        a.set("animation", Ob);
        a.set("flump", vh);
        a.set("pattern", wh);
        a.set("tiler", vc);
        a.set("slicer", ub);
        a.set("text", vk);
        a.set("scroller", dd);
        a.set("layerScroller", wk);
        a.set("positionLock", xk);
        a.set("skew", nk);
        a.set("line", ed);
        a.set("shadow", yk);
        a.set("physics", lb);
        a.set("physicsDebug", xh);
        a.set("passthrough", yh);
        a.set("passthroughable", zh);
        a.set("frictioner", Ah);
        a.set("forceField", Ak);
        a.set("airFriction", sg);
        a.set("spawnPoint", ig);
        a.set("damage", ph);
        a.set("health", Zd);
        a.set("collector", Xd);
        a.set("collectable", Wd);
        a.set("launcher", nf);
        a.set("exploder", Bh);
        a.set("projectile", Ch);
        a.set("checkpoint", rk);
        a.set("checkpointer", sk);
        a.set("platform", Dh);
        a.set("bouncer", ok);
        a.set("mods", Pf);
        a.set("stats", Eh);
        a.set("speedAdjuster", Yf);
        a.set("disposer", Ta);
        return a
    }(this);
    Ib.DEFAULT_FONT = "debug_font";
    Hh.SMALL_STEP_MODIFIER = i.Shift;
    Ih.COMPONENT_NAME = "editor_remover";
    Jc.spriteComponents = "image,fill,animation,flump,pattern,tiler,slicer,text,scroller,layerScroller,line,spine,tile_pattern".split(",");
    X.isInEditor = -1;
    lc.defaultComponentsRegistered = !1;
    h.internal = !1;
    h.id_ImmState_ACCEPT = 1;
    h.id_ImmState_IGNORE = 2;
    h.id_ImmState_ALWAYS = 4;
    h.id_GravMassMode_DEFAULT = 0;
    h.id_GravMassMode_FIXED = 1;
    h.id_GravMassMode_SCALED = 2;
    h.id_InertiaMode_DEFAULT = 0;
    h.id_MassMode_DEFAULT = 0;
    h.id_MassMode_FIXED = 1;
    h.id_BodyType_STATIC =
        1;
    h.id_BodyType_DYNAMIC = 2;
    h.id_BodyType_KINEMATIC = 3;
    h.id_ListenerType_BODY = 0;
    h.id_ListenerType_CONSTRAINT = 1;
    h.id_ListenerType_INTERACTION = 2;
    h.id_PreFlag_ACCEPT = 1;
    h.id_ListenerType_PRE = 3;
    h.id_CbEvent_BEGIN = 0;
    h.id_CbEvent_ONGOING = 6;
    h.id_CbEvent_END = 1;
    h.id_InteractionType_COLLISION = 1;
    h.id_CbEvent_WAKE = 2;
    h.id_InteractionType_SENSOR = 2;
    h.id_CbEvent_SLEEP = 3;
    h.id_InteractionType_FLUID = 4;
    h.id_CbEvent_BREAK = 4;
    h.id_InteractionType_ANY = 7;
    h.id_CbEvent_PRE = 5;
    h.id_ShapeType_CIRCLE = 0;
    h.id_ShapeType_POLYGON = 1;
    null ==
        h.CbEvent_PRE && (h.internal = !0, h.CbEvent_PRE = new sc, h.internal = !1);
    ma.PRELISTENER = h.CbEvent_PRE;
    null == h.CbEvent_BEGIN && (h.internal = !0, h.CbEvent_BEGIN = new sc, h.internal = !1);
    ma.BEGIN = h.CbEvent_BEGIN;
    null == h.CbEvent_END && (h.internal = !0, h.CbEvent_END = new sc, h.internal = !1);
    ma.END = h.CbEvent_END;
    null == h.CbEvent_ONGOING && (h.internal = !0, h.CbEvent_ONGOING = new sc, h.internal = !1);
    ma.ONGOING = h.CbEvent_ONGOING;
    null == h.InteractionType_COLLISION && (h.internal = !0, h.InteractionType_COLLISION = new Va, h.internal = !1);
    Aa.COLLISION =
        h.InteractionType_COLLISION;
    null == h.InteractionType_SENSOR && (h.internal = !0, h.InteractionType_SENSOR = new Va, h.internal = !1);
    Aa.SENSOR = h.InteractionType_SENSOR;
    null == h.InteractionType_FLUID && (h.internal = !0, h.InteractionType_FLUID = new Va, h.internal = !1);
    Aa.FLUID = h.InteractionType_FLUID;
    null == h.InteractionType_ANY && (h.internal = !0, h.InteractionType_ANY = new Va, h.internal = !1);
    Aa.ANY = h.InteractionType_ANY;
    Pa.ANY_BODY = "ANY_BODY";
    Pa.DEFAULT = "DEFAULT";
    Pa.PLAYER = "PLAYER";
    Pa.FRICTIONER = "FRICTIONER";
    Pa.FLUID = "FLUID";
    Pa.LAUNCHER = "LAUNCHER";
    Pa.PROJECTILE = "PROJECTILE";
    Pa.COLLECTABLE = "COLLECTABLE";
    Pa.COLLECTOR = "COLLECTOR";
    Pa.ACTIVABLE = "ACTIVABLE";
    Pa.ACTIVATOR = "ACTIVATOR";
    Pa.PASSTHROUGH = "PASSTHROUGH";
    Pa.PASSTHROUGHABLE = "PASSTHROUGHABLE";
    Pa.CHECKPOINT = "CHECKPOINT";
    Pa.CHECKPOINTER = "CHECKPOINTER";
    Pa.TELEPORTER = "TELEPORTER";
    Pa.TELEPORTABLE = "TELEPORTABLE";
    Pa.DAMAGEABLE = "DAMAGEABLE";
    Pa.DAMAGER = "DAMAGER";
    Pa.DAMAGEABLE_MOB = "DAMAGEABLE_MOB";
    Pa.MOB = "MOB";
    Pa.OBSTACLE = "OBSTACLE";
    Pa.GROUND = "GROUND";
    Pa.WALL = "WALL";
    Pa.BOUNCER = "BOUNCER";
    Fd._materialMap = new K;
    qe.maxSize = 5184;
    Gf.addedMethod = "onActorAdded";
    ug.enabled = !1;
    D.onManifestInit = new Tc;
    D._cachedPacks = new K;
    D._replacedPacks = new K;
    D._protectedPacks = new K;
    D._loadingPacks = new K;
    D._loadingPacksDict = new $b;
    D._jsonCache = new K;
    mb.localesMap = new K;
    mb.NOT_FOUND_PREFIX = "[(";
    mb.NOT_FOUND_SUFFIX = ")]";
    C.CaseSensitive = !1;
    C.SkipChange = !1;
    C.onChange = new ia;
    C.onPop = new ia;
    C.onPush = new ia;
    C._sceneMap = new K;
    v.channels = new K;
    v.soundPollingMap = new K;
    v.soundPollingSeconds = 0.1;
    v.defaultVolume = 1;
    v.defaultMusicVolume =
        1;
    v.enableMuteStorage = !0;
    v._volume = v.defaultVolume;
    v._unmuteVolume = v.defaultVolume;
    Ba.DefaultFileName = "{{name}}/{{name}}.json";
    Ba.DefaultManifest = "sprites";
    Ba._cachedSpritesheets = new K;
    Ba._loadingSpritesheets = new K;
    M.defaultFontName = "default";
    M.ChangePixelSnapping = !0;
    M._fontMap = new K;
    M._fontStylesMap = new K;
    Xb.verbose = !1;
    Kc.DefaultFPS = 12;
    Kc.BaseIndex = 1;
    vg.BaseIndex = Kc.BaseIndex;
    Hf.DEFAULT_BUTTON_PARAMS = {
        button: {},
        image: {},
        text: { align: "center", fontStyle: "buttons" },
        animation: {
            onDown: {
                props: { y: 6 },
                params: {
                    time: 0.05,
                    ease: E.quintOut
                }
            },
            onUp: { props: { y: 0 }, params: { time: 0.3, ease: E.backOut } }
        },
        sound: { onUp: "click", onDown: "click" }
    };
    o.galaxyS2 = ["GT-I9100", "SCH-i929", "GT-I9105"];
    o.galaxyS3 = "GT-I9300,GT-I9300I,GT-I9305,GT-I8190,GT-I8200,SGH-I747".split(",");
    o.galaxyS4 = "GT-I9500,GT-I9502,GT-I9505,GT-I9190,GT-I9195,SCH-I545,SPH-L720,SGH-M919,SGH-I337,SM-C101".split(",");
    o.galaxyTab2 = ["GT-P5110", "GT-P3110", "GT-P5100"];
    o.ie9 = ["MSIE 9"];
    o.ie10 = ["MSIE 10"];
    o.lowPerformanceDevices = [o.galaxyS2, o.galaxyS3, o.galaxyS4, o.galaxyTab2,
        o.ie9, o.ie10
    ];
    o.lowMemoryDevices = [o.galaxyS2, o.galaxyS3, o.galaxyS4, o.galaxyTab2];
    o.lowPerformance = !1;
    o.lowMemory = !1;
    o.power = 80;
    o.ipadVersion = 4;
    o.scale = 1;
    o.onScaleChange = new ia;
    G._spritesheets = new $b;
    Xa.DefaultMovePPS = 100;
    Xa.DefaultMoveSpeed = 1;
    Xa.DefaultMoveTime = 1;
    Xa.DefaultMoveEase = E.quadInOut;
    fc.hasInit = !1;
    z.sdkVersion = "Stolo Haxe v1.1.4";
    z.platforms = { web: { desktop: "NICKWEB_DESKTOP", desktop_flash: "NICKWEB_DESKTOP", mobile: "NICKWEB_MOBILE", tablet: "NICKWEB_TABLET" }, app: { android: "ANDROID_MOBILEAPP", ios: "IOS_MOBILEAPP" } };
    z.debug = !1;
    z.allowLiveKey = !0;
    z.useTimezoneOffset = !1;
    z.isLive = !1;
    z.isReady = !1;
    z.isNewPlayer = !1;
    z.userIDStorageField = "UserId";
    z.onReady = new ia;
    Sg.DEFAULT_EASING = E.quadInOut;
    Lc._Interactor = 0;
    Lc._CbType = 0;
    Lc._CbSet = 0;
    Lc._Listener = 0;
    dc.ANY_SHAPE = new cf;
    dc.ANY_BODY = new cf;
    dc.ANY_COMPOUND = new cf;
    dc.ANY_CONSTRAINT = new cf;
    Fb.UCbSet = new yg;
    Fb.VCbSet = new yg;
    Fb.WCbSet = new yg;
    Fb.UCbType = new re;
    Fb.VCbType = new re;
    Fb.WCbType = new re;
    aa.internal = !1;
    aa.COL = 1;
    aa.FLUID = 4;
    aa.SENSOR = 2;
    xc.internal = !1;
    P.flowpoly = new Nh;
    P.flowsegs =
        new Nh;
    ha.nextId = 0;
    var Mn;
    null == h.BodyType_STATIC && (h.internal = !0, h.BodyType_STATIC = new Pb, h.internal = !1);
    Mn = h.BodyType_STATIC;
    var Nn;
    null == h.BodyType_DYNAMIC && (h.internal = !0, h.BodyType_DYNAMIC = new Pb, h.internal = !1);
    Nn = h.BodyType_DYNAMIC;
    null == h.BodyType_KINEMATIC && (h.internal = !0, h.BodyType_KINEMATIC = new Pb, h.internal = !1);
    Ke.types = [null, Mn, Nn, h.BodyType_KINEMATIC];
    ua.internal = !1;
    Oc.tmpaabb = new Wa;
    Je.internal = !1;
    Le.internal = !1;
    kh.internal = !1;
    jf.internal = !1;
    ef.internal = !1;
    je.internal = !1;
    og.internal = !1;
    ng.internal = !1;
    hh.internal = !1;
    fh.internal = !1;
    lh.internal = !1;
    lf.internal = !1;
    eh.internal = !1;
    gf.internal = !1;
    dh.internal = !1;
    rb.main()
})();