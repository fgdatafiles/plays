(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+FTe":function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");i("9VWb"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("C9uT")),o=a(i("86MP")),h=i("zgbH"),r=s(i("QqF+")),d=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).loadTexture("empty"),i.items=[],i.stackType="",i.area.destroy(),i.area=null,i}(0,o.default)(e,t);var i=e.prototype;return i.init=function(e){if(e&&e.items)for(var i=0;i<e.items.length;i++){var s=this.location.addItem(e.items[i]);this.addItem(s,!1)}e&&this.setStackType(e.stack_type),t.prototype.init.call(this,e)},i.setStackType=function(t){this.stackType=t,"food"===t&&this.flags.push("ant")},i.isFull=function(){return 6===this.items.length},i.addItem=function(t,e){void 0===e&&(e=!0),t.disable(),this.addChild(t);var i=this.items.length>0?this.items[this.items.length-1]:null;t.x=0,t.y=i?i.y-i.data.stackHeight:0,t.setScale(1),t.stack=this,this.items.push(t),t.parentObj&&(t.parentObj.removeObject(t),t.parentObj=null),this.updateBounds(),e&&this.onChange.dispatch()},i.updateBounds=function(){var t=this.items[this.items.length-1],e=t?(-t.y+t.height)*r.SIZE_GROUND:16;this.bb=this.getBounds(),this.bb.y-=e-8,this.bb.height=e},i.breakStack=function(){if(!this.broken){this.broken=!0;for(var t=0;t<this.items.length;t++){var e=this.items[t];e.enable(),e.setScale(r.SIZE_GROUND),e.x=this.worldPosition.x-this.location.x+Phaser.Math.between(-4,4),e.y=this.worldPosition.y+e.y,e.stack=null,this.location.addObjectToLocation(e),this.location.tryPutIntoPond(e)||this.location.setDestinationPosition(e)}this.items=null,this.location.removeItem(this)}},i.handleInputUp=function(){this.location.stopDragItem(this),this.drag=!1,this.updateBounds(),this.scale.set(r.SIZE_GROUND);var t=this.pointer.x-this.startPos.x,e=this.pointer.y-this.startPos.y,i=t*t+e*e;if(this.pointer=null,i<h.TAP_LIMIT){var s="desktop"===this.game.deviceMetric.platform.type?r.SHIFT_UP_DESKTOP:r.SHIFT_UP_MOBILE;this.y-=s,this.breakStack()}else this.onDrop.dispatch(this)},i.handleTap=function(){this.breakStack()},i.canHover=function(){return!this.drag},i.serialize=function(){var e=t.prototype.serialize.call(this);e.open=this.isOpen,e.items=[];for(var i=0;i<this.items.length;i++)e.items.push(this.items[i].id);return e.stack_type=this.stackType,e},(0,n.default)(e,[{key:"height",get:function(){return this.bb?this.bb.height:0}}]),e}(r.default);e.default=d},"/hvn":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=s(i("37Wo")),h=i("zgbH"),r=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,s)||this).location=a,i.data=n,i.id=n.id,i.dz=n.dz||0,i.x=n.x,i.y=n.y,i.onChange=new Phaser.Signal,i.tr=255,i.tg=255,i.tb=255,i.tintColor=16777215,i.emptyBB={x:0,y:0,width:0,height:0},i.createAsset(),i.data.button&&i.addButton(),i.setSitPositions(),i}(0,n.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.asset=this.game.make.spine(0,0,this.data.key,!0),this.asset.anchor.set(.5,1),this.addChildAt(this.asset,0),this.rootBone=this.asset.skeleton.getRootBone(),this.scaleDefault=this.rootBone.scaleX},i.updateBounds=function(){this.bb=this.visible?this.getBounds():this.emptyBB},i.addObject=function(t){},i.removeObject=function(t){},i.getTop=function(t){if(this.data.top)for(var e=new Phaser.Rectangle,i=this.data.top.length,s=0;s<i;s++){var a=this.data.top[s];if(a.empty&&(e.x=this.bb.x+a.x,e.y=this.bb.y+a.y,e.width=a.w,e.height=a.h,Phaser.Rectangle.intersects(t,e)))return{y:e.y,h:a.h,character:a.character}}return null},i.getSide=function(t){if(this.data.side)for(var e=new Phaser.Rectangle,i=this.data.side.length,s=0;s<i;s++){var a=this.data.side[s];if(e.x=this.bb.x+a.x,e.y=this.bb.y+a.y,e.width=a.w,e.height=a.h,Phaser.Rectangle.intersects(t,e))return{y:e.y,h:a.h}}return null},i.setAnim=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=0),this.currentAnim=this.asset.setAnimationByName(i,t,e)},i.pauseAnim=function(){this.currentAnim.timeScale=0},i.unpauseAnim=function(){this.currentAnim.timeScale=1},i.setLight=function(t){var e=h.NIGHT_TINT,i=(e>>16)/255,s=(e>>8&255)/255,a=(255&e)/255;this.asset.skeleton.color.r=i+t*(1-i),this.asset.skeleton.color.g=s+t*(1-s),this.asset.skeleton.color.b=a+t*(1-a)},i.setLight2=function(t){var e=h.NIGHT_TINT,i=e>>16,s=e>>8&255,a=255&e;this.tr=i+(t*(255-i)|0),this.tg=s+(t*(255-s)|0),this.tb=a+(t*(255-a)|0),this.updateTint()},i.setNight=function(){},i.setDay=function(){},i.updateTint=function(t,e,i){var s=(0|this.tr)<<16|(0|this.tg)<<8|(0|this.tb);this.tintColor=s},i.addButton=function(){var t=this.data.button;this.button=this.game.make.button(t.x,t.y,"empty"),this.button.width=t.w,this.button.height=t.h,this.button.alpha=.01,this.addChild(this.button),this.button.inputEnabled=!0,this.button.events.onInputDown.add(this.handleInputDown,this),this.button.events.onInputUp.add(this.handleInputUp,this),this.button.input.useHandCursor=!0},i.handleInputDown=function(){},i.handleInputUp=function(){},i.addMagnifierIcon=function(){this.magnifierIcon=new o.default(this.game,this.data.macro_view.x+this.x,this.data.macro_view.y+this.y,this),this.location.addObjectToLocation(this.magnifierIcon),this.macroAnimInd=0},i.showMacroView=function(){this.location.showMacroView({x:this.magnifierIcon.worldPosition.x,y:this.magnifierIcon.worldPosition.y,macroView:this.data.macro_view,furniture:this,animInd:this.macroAnimInd}),this.macroAnimInd++,this.macroAnimInd%=this.data.macro_view.animNames.length},i.setSitPositions=function(){if(this.sitPoints=[],this.data.top)for(var t=this.data.top.length,e=0;e<t;e++){var i=this.data.top[e];if(i.empty=!0,"sit"===i.character){var s=this.x-.5*this.asset.width+i.x+.5*i.w,a=this.y-this.height+i.y+i.h-25,n={x:s,y:a,dz:this.dz-(a-this.y)+2,empty:!0,top:i};this.sitPoints.push(n)}}return null},i.canSit=function(t){if(this.sitPoints.length>0)for(var e=this.sitPoints.length,i=0;i<e;i++){var s=this.sitPoints[i];if(s.empty)if(t-s.x<40)return s}return null},i.step=function(t){var e=-this.location.x,i=e+this.game.width;this.x-.5*this.width>i||this.x+.5*this.width<e?this.visible=!1:this.visible=!0;var s=0;(s=this.visible?this.location.lights.getLightAt(this.worldPosition.x,this.worldPosition.y-(this.height>>1),!this.data.flashlight):this.location.lights.getLightAt(this.worldPosition.x,this.worldPosition.y-(this.height>>1),!0))>=0&&s!==this.lightPower&&(this.lightPower=s,this.setLight(s))},i.animateGrowUp=function(){this.scale.set(.5),this.game.add.tween(this.scale).to({x:1,y:1},150,null,!0)},i.pulse=function(t){void 0===t&&(t=2e3)},i.serialize=function(){return{id:this.id,x:this.x,y:this.y}},(0,a.default)(e,[{key:"depth",get:function(){return this.y+this.dz}},{key:"width",get:function(){return this.data.width||this.width}}]),e}(Phaser.Group);e.default=r},0:function(t,e,i){t.exports=i("vGYV")},"06Kr":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i=e.game,s=e.location,a=e.data;return t.call(this,{game:i,location:s,data:a})||this}return(0,a.default)(e,t),e.prototype.createAsset=function(){this.asset=this.game.make.image(0,0,this.data.key,"stool_log"),this.asset.anchor.set(.5,1),this.addChild(this.asset)},e}(s(i("seRm")).default);e.default=n},"0BGZ":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("6YV8"),a=i("Bx3X"),n=function(){function t(t,e){this.game=t,this.campout=e,this.step=0,this.completed=e.savedData.onboarding_completed}var e=t.prototype;return e.start=function(){this.completed||((0,s.getGA)().track({action:"tutorial_begin"}),this.game.time.events.add(100,this.step1,this),this.campout.gameHud.lockArrows(),this.campout.gameHud.hideScrollArrows())},e.step1=function(){this.step=1,this.campout.gameHud.lock(),this.campout.location.disableControls(),this.game.deviceMetric.category===a.PERFORMANCE_CATEGORY.HIGH_END?(this.campout.camera.pan(3150),this.campout.camera.onPosition.addOnce(this.step2,this)):this.step2(),this.game.controller.playVO("onboarding_hint_001"+("desktop"===this.game.deviceMetric.platform.type?"_click":""))},e.step2=function(){this.step=2,this.campout.camera.pan(2650),this.timeEvent=this.game.time.events.add(8e3,this.step3,this)},e.step3=function(){this.step=3,this.campout.location.enableControls(),this.campout.gameHud.showDragHint(!1),this.game.controller.stopVO(),this.game.controller.playVO("onboarding_hint_002"),this.timeEvent=this.game.time.events.add(8600,this.step4,this)},e.step4=function(){this.step=4,this.campout.location.disableControls(),this.campout.camera.pan(2650),this.campout.camera.onPosition.addOnce(this.step5,this),this.game.controller.stopVO(),this.game.controller.playVO("onboarding_hint_004"),2650===this.campout.camera.currentX&&this.step5()},e.step5=function(){this.step=5,this.campout.location.enableControls(),this.game.time.events.add(2e3,this.campout.location.pulseTents,this.campout.location),this.timeEvent=this.game.time.events.add(5400,this.step6,this)},e.step6=function(){this.step=6,this.timeEvent=this.game.time.events.add(3e3,this.step7,this)},e.step7=function(){this.step=7,this.game.controller.stopVO(),this.game.controller.playVO("onboarding_hint_003"),this.campout.gameHud.btnHelp.pulse(3500),this.game.time.events.add(3500,this.step8,this)},e.step8=function(){this.campout.gameHud.unlock(),this.campout.gameHud.unlockArrows(),this.campout.gameHud.unhideScrollArrows(),this.campout.setArrowsVisibility(),this.completed=!0,this.campout.savedData.onboarding_completed=!0,this.game.controller.saves.save({data:this.campout.savedData}),(0,s.getGA)().track({action:"tutorial_complete"})},e.interacted=function(t){2===this.step?(this.game.time.events.remove(this.timeEvent),this.step3()):5!==this.step&&6!==this.step||"tent_1_rolled"!==t.id&&"tent_2_rolled"!==t.id&&"tent_3_rolled"!==t.id||(this.game.time.events.remove(this.timeEvent),this.step7())},e.scrolled=function(){3===this.step&&(this.game.time.events.remove(this.timeEvent),this.campout.gameHud.removeDragHint(),this.step=-1,this.game.time.events.add(1e3,this.step4,this))},t}();e.default=n},"1kbJ":function(t,e,i){"use strict";var s=i("R6lU");i("YY9M"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e,i){var s;return(s=t.call(this,e)||this).data={skeletons:["spine_intro_audio","spine_intro_bg","spine_intro_butterfly2","spine_intro_butterfly","spine_intro_elinor","spine_intro_ari","spine_intro_olive"],audio_skeleton_id:"spine_intro_audio"},s.audioSkeleton=null,s.makeScene(),s.setAnim(i),s}(0,a.default)(e,t);var i=e.prototype;return i.makeScene=function(){this.skeletons={};for(var t=0;t<this.data.skeletons.length;t++){var e=this.data.skeletons[t],i=this.game.make.spine(0,0,e,!0);i.anchor.set(.5,1),this.skeletons[e]=i,this.addChild(i),e===this.data.audio_skeleton_id&&(this.audioSkeleton=i,this.audioSkeleton.onEvent.add(this.handleAudioEvent,this))}this.skeletons.spine_intro_elinor.setSkinByName("body"),this.skeletons.spine_intro_ari.setSkinByName("body"),this.skeletons.spine_intro_olive.setSkinByName("body")},i.handleAudioEvent=function(t,e){this.game.controller.playVO(e.data.name)},i.setAnim=function(t){this.tracks=[],this.tracks.push(this.skeletons.spine_intro_bg.setAnimationByName(0,"animation",!1)),this.tracks.push(this.skeletons.spine_intro_butterfly2.setAnimationByName(0,"3_butterfly_loop",!0)),this.tracks.push(this.skeletons.spine_intro_butterfly.setAnimationByName(0,"3_butterfly_loop",!0)),t?(this.tracks.push(this.skeletons.spine_intro_audio.setAnimationByName(0,"02_loop",!1)),this.tracks.push(this.skeletons.spine_intro_elinor.setAnimationByName(0,"02_loop",!0)),this.tracks.push(this.skeletons.spine_intro_ari.setAnimationByName(0,"02_loop",!0)),this.tracks.push(this.skeletons.spine_intro_olive.setAnimationByName(0,"02_loop",!0))):(this.tracks.push(this.skeletons.spine_intro_audio.setAnimationByName(0,"01_intro",!1)),this.tracks.push(this.skeletons.spine_intro_elinor.setAnimationByName(0,"01_intro",!1)),this.skeletons.spine_intro_elinor.addAnimationByName(0,"02_loop",!0),this.tracks.push(this.skeletons.spine_intro_ari.setAnimationByName(0,"01_intro",!1)),this.skeletons.spine_intro_ari.addAnimationByName(0,"02_loop",!0),this.tracks.push(this.skeletons.spine_intro_olive.setAnimationByName(0,"01_intro",!1)),this.skeletons.spine_intro_olive.addAnimationByName(0,"02_loop",!0));for(var e=0;e<this.tracks.length;e++)this.tracks[e].timeScale=0},i.playAnim=function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].timeScale=1},i.destroy=function(){this.btnSkip&&(this.btnSkip.destroy(),this.btnSkip=null),this.game.controller.stopVO();for(var e=0;e<this.skeletons.length;e++)this.removeChild(this.skeletons[e]),this.skeletons[e]&&this.skeletons[e].destroy();this.skeletons=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=n},"22ci":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=i("zgbH"),h=function(t){function e(e){var i,s=e.game,a=e.data,n=e.width;(i=t.call(this,s)||this)._width=n,i.tr=255,i.tg=255,i.tb=255;for(var o=0;o<a.parts.length;o++){var h=a.parts[o],r=i.game.make.image(h.x,i.game.height,a.asset,h.id);r.anchor.set(0,1),i.add(r)}return i}(0,n.default)(e,t);var i=e.prototype;return i.setNight=function(t){var e=o.NIGHT_TINT,i=e>>16,s=e>>8&255,a=255&e;t?(this.tr=i,this.tg=s,this.tb=a,this.updateTint()):this.game.add.tween(this).to({tr:i,tg:s,tb:a},500,null,!0).onUpdateCallback(this.updateTint,this)},i.setDay=function(){this.game.add.tween(this).to({tr:255,tg:255,tb:255},500,null,!0).onUpdateCallback(this.updateTint,this)},i.updateTint=function(t,e,i){for(var s=(0|this.tr)<<16|(0|this.tg)<<8|(0|this.tb),a=0;a<this.children.length;a++)this.children[a].tint=s},i.addObject=function(t){this.addChild(t)},(0,a.default)(e,[{key:"width",get:function(){return this._width}}]),e}(Phaser.Group);e.default=h},"2Hbv":function(t,e,i){"use strict";i("qnda"),i("XvIX"),i("QQAp"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(t,e,i,s,a){this.game=t,this.hintsData=e,this.objectsData=i,this.state=a,this.location=s,this.items=this.location.items,this.furnitures=this.location.furnitures,this.allObjects=[],this.lastLocationX=99,this.objectInd=0,this.lastObjX=0,this.lastObjId=""}var e=t.prototype;return e.showHint=function(){this.lastLocationX!==this.location.x&&(this.lastLocationX=this.location.x,this.objectInd=0,this.hintsToGo=-1),this.allObjects=this.getObjectsOnScreen();for(var t=[],e=0;e<this.allObjects.length;e++)this.allObjects[e].object.hadHint||t.push(this.allObjects[e]);if(0===t.length?t=this.allObjects:this.objectInd=0,this.objectInd%=t.length,this.hintsToGo<0&&(this.hintsToGo=Math.min(3,t.length)),0===this.hintsToGo){var i;this.hintsToGo=-1;do{i=Phaser.ArrayUtils.getRandomItem(this.hintsData.examples)}while(this.prevHintId===i);this.prevHintId=i;var s=this.hintsData.examplesByID[i],a=Phaser.ArrayUtils.getRandomItem(s),n=this.game.cache.getJSON("vos_captions")[i][0].end;this.state.gameHud.btnHelp.showExample(a,n),this.displayHint(null,null,i)}else if(t.length>0){this.hintsToGo--;var o=this.getHintFromObjects(t),h=o.obj,r=o.hint,d=o.hintId;this.displayHint(h.object,r,d),this.objectInd++,this.objectInd%=t.length}},e.displayHint=function(t,e,i){if(e)switch(e.action){case"pulse":t.pulse();break;case"gesture_tap":var s=t.x,a=t.y,n=t.bb.height;"bee_tree"===t.id&&(s+=t.button.x+.5*t.button.width,a+=t.button.y,n=0),this.state.showGesture(s,a-n).tap();break;case"gesture_slide":var o=t.x,h=t.y;"water_rock"===t.id&&(o+=t.parent.x,h+=t.parent.y),this.state.showGesture(o,h-t.bb.height).slide("lizard_rock"===t.id?"left":"right")}if(i.indexOf("target")>-1)switch(i){case"hint_target_001":t.pulse(),this.findTrashableItem().pulse();break;case"hint_target_002":t.pulse(),this.findCompostableItem().pulse();break;case"hint_target_006":t.pulse();break;case"hint_target_008":t.pulse(),this.findRecyclableItem().pulse()}var r=this.game.controller.playVO(i);r?r.get(i).onStop.addOnce(this.onSndEnd,this):this.onSndEnd()},e.onSndEnd=function(){this.state.gameHud.btnHelp.hide()},e.getHintFromObjects=function(t){var e=(t=t.sort((function(t,e){return e.x-t.x})))[this.objectInd],i=e.hints;e.object.hadHint=!0;var s=Phaser.ArrayUtils.getRandomItem(i);return{obj:e,hint:this.getHintData(s),hintId:s}},e.getHintData=function(t){return t.indexOf("question")>-1?this.hintsData.questionsByID[t]:t.indexOf("cta")>-1?this.hintsData.ctasByID[t]:t.indexOf("target")>-1?this.hintsData.targetsByID[t]:null},e.getObjectsOnScreen=function(){for(var t=this,e=[],i=[],s=50-this.location.x,a=s+this.game.width-100,n=function(n){var o=t.items[n];if(o.x>s&&o.x<a){i.push(o);var h=t.getHintsForItem(o),r=e.find((function(t){return t.object.id===o.id}));h.length>0&&!r&&e.push({object:o,type:"i",x:o.x,hints:h})}},o=0;o<this.items.length;o++)n(o);for(var h=0;h<this.furnitures.length;h++){var r=this.furnitures[h],d=r.x;if("water_rock"===r.id&&(d+=r.parent.x),d>s&&d<a&&!r.data.no_hint){var l=this.getHintsForFurniture(r,i);l.length>0&&e.push({object:r,type:"f",x:d,hints:l})}}return e},e.getHintsForItem=function(t){for(var e=[],i=0;i<this.hintsData.questions.length;i++){var s=this.hintsData.questions[i],a=this.hintsData.questionsByID[s];this.isHintForItem(a,t)&&e.push(s)}for(var n=0;n<this.hintsData.ctas.length;n++){var o=this.hintsData.ctas[n],h=this.hintsData.ctasByID[o];this.isHintForItem(h,t)&&e.push(o)}return e},e.isHintForItem=function(t,e){return(!t.device||!("desktop"===t.device&&"desktop"!==this.game.deviceMetric.platform.type||"mobile"===t.device&&"desktop"===this.game.deviceMetric.platform.type))&&(t.items?t.items.indexOf(e.id)>-1||(!!(t.items.indexOf("[SPAWN]")>-1&&e.spawn)||(!!(t.items.indexOf("[FOOD]")>-1&&e.canBeEaten())||(!!(t.items.indexOf("[TRASHABLE]")>-1&&e.canBeTrashed())||(!!(t.items.indexOf("[RECYCLABLE]")>-1&&e.isRecyclable())||!!(t.items.indexOf("[COMPOSTABLE]")>-1&&e.canBeComposted()))))):!!t.items_exceptions&&(!(t.items_exceptions.indexOf(e.id)>-1)&&!(t.items_exceptions.indexOf("[FOOD]")>-1&&e.canBeEaten())))},e.getHintsForFurniture=function(t,e){for(var i=[],s=0;s<this.hintsData.questions.length;s++){var a=this.hintsData.questions[s],n=this.hintsData.questionsByID[a];this.isHintForFurniture(n,t)&&i.push(a)}for(var o=0;o<this.hintsData.ctas.length;o++){var h=this.hintsData.ctas[o],r=this.hintsData.ctasByID[h];this.isHintForFurniture(r,t)&&i.push(h)}for(var d=0;d<this.hintsData.targets.length;d++){var l=this.hintsData.targets[d],u=this.hintsData.targetsByID[l];this.isTargetHint(u,t,e)&&i.push(l)}return i},e.isHintForFurniture=function(t,e){return(!t.device||!("desktop"===t.device&&"desktop"!==this.game.deviceMetric.platform.type||"mobile"===t.device&&"desktop"===this.game.deviceMetric.platform.type))&&(t.furnitures.indexOf(e.id)>-1||!!(t.furnitures.indexOf("[MACRO_VIEW]")>-1&&e.magnifierIcon))},e.isTargetHint=function(t,e,i){if(t.furnitures.indexOf(e.id)>-1){if(!(t.items.length>0))return!0;if(t.items.indexOf("[TRASHABLE]")>-1){for(var s=0;s<i.length;s++)if(i[s].canBeTrashed())return!0}else if(t.items.indexOf("[COMPOSTABLE]")>-1){for(var a=0;a<i.length;a++)if(i[a].canBeComposted())return!0}else if(t.items.indexOf("[RECYCLABLE]")>-1)for(var n=0;n<i.length;n++)if(i[n].isRecyclable())return!0}return!1},e.findCompostableItem=function(){for(var t=[],e=0;e<this.allObjects.length;e++){var i=this.allObjects[e];"i"===i.type&&i.object.canBeComposted()&&t.push(i.object)}return Phaser.ArrayUtils.getRandomItem(t)},e.findTrashableItem=function(){for(var t=[],e=0;e<this.allObjects.length;e++){var i=this.allObjects[e];"i"===i.type&&i.object.canBeTrashed()&&t.push(i.object)}return Phaser.ArrayUtils.getRandomItem(t)},e.findRecyclableItem=function(){for(var t=[],e=0;e<this.allObjects.length;e++){var i=this.allObjects[e];"i"===i.type&&i.object.isRecyclable()&&t.push(i.object)}return Phaser.ArrayUtils.getRandomItem(t)},t}();e.default=s},"37Wo":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("M1I4")),o=s(i("86MP")),h=function(t){function e(e,i,s,a){var o;return(o=t.call(this,e,i,s,"magnifier")||this).anchor.set(.39,.385),o.scale.set(.16),o.furniture=a,o.inputEnabled=!0,o.events.onInputDown.add(o.handleInputDown,(0,n.default)(o)),o.input.pixelPerfectAlpha=10,o.input.pixelPerfectClick=!0,o.input.pixelPerfectOver=!0,o.input.useHandCursor=!0,o.scale.set(0),o.visible=!1,o.active=!1,o}(0,o.default)(e,t);var i=e.prototype;return i.handleInputDown=function(){this.furniture.showMacroView(),this.hide()},i.show=function(){this.active=!0,this.visible=!0,this.tween&&this.tween.stop(),this.tween=this.game.add.tween(this.scale).to({x:.16,y:.16},250,Phaser.Easing.Back.Out,!0)},i.hide=function(){this.active=!1,this.tween&&this.tween.stop(),this.tween=this.game.add.tween(this.scale).to({x:0,y:0},250,Phaser.Easing.Back.In,!0),this.tween.onComplete.add(this.handleHideEnd,this)},i.handleHideEnd=function(){this.visible=!1},(0,a.default)(e,[{key:"depth",get:function(){return this.y+1e3}}]),e}(Phaser.Image);e.default=h},"3huV":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=i("zgbH"),h=function(t){function e(e,i){var s,n=void 0===i?{}:i,o=n.background,h=void 0!==o&&o,r=n.title,d=void 0!==r&&r,l=n.bgClr;return(s=t.call(this,e)||this).game.scale.onSizeChange.add(s.positionContainer,(0,a.default)(s)),l&&s.setBackgroundColour(l),h&&s.setBackground(h),d&&s.setTitle(d),s.positionContainer(),s}(0,n.default)(e,t);var i=e.prototype;return i.setBackgroundColour=function(t){this.bgClr||(this.bgClr=this.game.make.graphics(),this.bgClr.beginFill(t,1),this.bgClr.drawRect(0,0,this.game.defaultWidth,this.game.defaultHeight),this.add(this.bgClr))},i.setBackground=function(t){this.bg||(this.bg=this.game.make.image(0,0),this.bg.anchor.set(.5),this.bg.x=.5*this.game.defaultWidth,this.bg.y=.5*this.game.defaultHeight,this.addChildAt(this.bg,0)),this.bg.loadTexture(t)},i.setTitle=function(t){if(!this.title){var e={font:"75px "+o.FONT_EXTRA_BOLD,fill:"#ffffff",align:"center",wordWrap:!0,wordWrapWidth:960};this.title=this.game.make.text(.5*this.game.defaultWidth,50,"",e),this.title.setShadow(0,4,"rgba(0,0,0,0.15)",0),this.title.anchor.set(.5,0),this.add(this.title)}this.title.text=t},i.positionContainer=function(){this.x=(this.game.width-this.game.defaultWidth)/2,this.y=(this.game.height-this.game.defaultHeight)/2},i.update=function(){t.prototype.update.call(this)},i.destroy=function(){this.bgClr&&(this.bgClr.destroy(),this.bgClr=null),this.bg&&(this.bg.destroy(),this.bg=null),this.title&&(this.title.destroy(),this.title=null),this.game.scale.onSizeChange.remove(this.positionContainer,this),t.prototype.destroy.call(this,!0)},e}(Phaser.Group);e.default=h},"4UFF":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("qFwY")),h=s(i("r+OO")),r=s(i("V2+/")),d=s(i("JC40")),l=s(i("FA2v")),u=s(i("tn0Q")),c=s(i("FOrS")),p=function(t){function e(e,i){var s;return(s=t.call(this,e)||this).state=i,s.dragHintId=44,s.game.scale.onSizeChange.add(s.positionContainer,(0,a.default)(s)),s.onShowHint=new Phaser.Signal,s.onScrollLeft=new Phaser.Signal,s.onScrollRight=new Phaser.Signal,s.btnHome=new h.default({game:s.game,up:"btn_reset",over:"btn_reset",pressed:"btn_reset_pressed"}),s.btnHome.x=75,s.btnHome.y=75,s.btnHome.onPressed.add(s.handleBtnHome,(0,a.default)(s)),s.addChild(s.btnHome),s.btnHelp=new d.default(s.game,s.state),s.btnHelp.x=80,s.btnHelp.y=s.game.defaultHeight-20,s.btnHelp.onSelect.add(s.handleBtnHelp,(0,a.default)(s)),s.addChild(s.btnHelp),s.onToggleTime=new Phaser.Signal,s.btnToggleTime=new o.default(s.game),s.btnToggleTime.x=80,s.btnToggleTime.y=93,s.btnToggleTime.onToggle.add(s.handleToggleTime,(0,a.default)(s)),s.addChild(s.btnToggleTime),s.createScrollArrows(),s.hideScrollArrows(!1),s.positionContainer(),s}(0,n.default)(e,t);var i=e.prototype;return i.lock=function(){this.btnHelp.disable(),this.btnToggleTime.disable()},i.unlock=function(){this.btnHelp.enable(),this.btnToggleTime.enable()},i.handleBtnHome=function(){this.game.controller.showWelcomeScreen(!0)},i.handleBtnHelp=function(){this.onShowHint.dispatch()},i.handleToggleTime=function(t){this.onToggleTime.dispatch(t)},i.positionContainer=function(){this.btnHelp.x=this.game.width-("smartphone"===this.game.deviceMetric.platform.type?100:80),this.btnToggleTime.x=.5*this.game.width,this.macroView&&this.macroView.positionElements(),this.btnRight&&(this.btnRight.x=this.game.width-43)},i.showMacroView=function(t){var e=t.x,i=t.y,s=t.macroView,a=t.furniture,n=t.animInd;this.macroView=new r.default({game:this.game,x:e,y:i,macroView:s,furniture:a,animInd:n}),this.addChild(this.macroView),this.macroView.onClose.addOnce(this.handleMacroViewClose,this)},i.handleMacroViewClose=function(){this.macroView.onClose.remove(this.handleMacroViewClose,this),this.macroView.destroy(),this.macroView=null},i.showHoverGauge=function(t,e){this.hoverGauge?(this.hoverGauge.visible=!0,this.hoverGauge.x=t,this.hoverGauge.y=e,this.setHoverValue(0)):(this.hoverGauge=new l.default(this.game,t,e),this.addChild(this.hoverGauge)),this.hoverGauge.show()},i.hideHoverGauge=function(){this.hoverGauge.hide()},i.setHoverValue=function(t){this.hoverGauge.setValue(t)},i.showDragHint=function(t){void 0===t&&(t=!0),this.dragHint=new u.default(this.game,130,360,this.dragHintId,this,t),this.addChild(this.dragHint),this.dragHintId=44===this.dragHintId?45:44},i.hideDragHint=function(){this.dragHint=null,this.state.resetCameraTimer()},i.removeDragHint=function(){this.dragHint&&(this.dragHint.destroy(),this.dragHint=null)},i.createScrollArrows=function(){this.arrowsContainer=this.game.make.group(),this.addChild(this.arrowsContainer),this.btnLeft=new c.default({game:this.game,up:"arrow_left",down:"arrow_left"}),this.arrowsContainer.addChild(this.btnLeft),this.btnLeft.x=43,this.btnLeft.y=.5*this.game.height,this.btnLeft.onInputDown.add(this.handleBtnLeftInputDown,this),this.btnRight=new c.default({game:this.game,up:"arrow_right",down:"arrow_right"}),this.arrowsContainer.addChild(this.btnRight),this.btnRight.x=this.game.width-43,this.btnRight.y=.5*this.game.height,this.btnRight.onInputDown.add(this.handleBtnRightInputDown,this)},i.showScrollArrows=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.btnLeft.setVisibility(t),this.btnRight.setVisibility(e)},i.hideScrollArrows=function(t){void 0===t&&(t=!0),t&&(this.btnLeft.visible=!1,this.btnRight.visible=!1),this.btnLeft.hide(!0),this.btnRight.hide(!0)},i.unhideScrollArrows=function(){this.btnLeft.visible=!0,this.btnRight.visible=!0},i.lockArrows=function(){this.arrowsLocked=!0,this.btnLeft.input.enabled=!1,this.btnRight.input.enabled=!1},i.unlockArrows=function(){this.arrowsLocked=!1,this.btnLeft.input.enabled=!0,this.btnRight.input.enabled=!0},i.handleBtnLeftInputDown=function(){this.onScrollLeft.dispatch()},i.handleBtnRightInputDown=function(){this.onScrollRight.dispatch()},i.destroy=function(e,i){void 0===e&&(e=!0),this.game.scale.onSizeChange.remove(this.positionContainer,this),t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=p},"5mNR":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.STATE_MAP=e.STATE_CAMPOUT=e.STATE_WELCOME=e.STATE_LOAD=e.STATE_BOOT=void 0;var a=s(i("VawD")),n=s(i("GEMp")),o=s(i("WtpM")),h=s(i("Kcyx"));e.STATE_BOOT="STATE_BOOT";e.STATE_LOAD="STATE_LOAD";e.STATE_WELCOME="STATE_WELCOME";e.STATE_CAMPOUT="STATE_CAMPOUT";var r={STATE_BOOT:a.default,STATE_LOAD:n.default,STATE_WELCOME:o.default,STATE_CAMPOUT:h.default};e.STATE_MAP=r},"6/uN":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e,i,s){var n;return(n=t.call(this,e)||this).x=i,n.y=s,n.asset=n.game.make.image(0,0,"heart"),n.asset.anchor.set(.5),n.addChild(n.asset),n.asset.alpha=0,n.asset.scale.set(0),n.game.add.tween(n.asset).to({alpha:1},200,null,!0),n.game.add.tween(n.asset.scale).to({x:1,y:1},1e3,Phaser.Easing.Quadratic.Out,!0),n.game.add.tween(n.asset).to({y:-50},1e3,Phaser.Easing.Quadratic.Out,!0),n.game.add.tween((0,a.default)(n)).to({alpha:0},200,Phaser.Easing.Quadratic.In,!0,800).onComplete.add(n.handleAnimEnd,(0,a.default)(n)),n.game.sounds.playSFX("generic_heart",{spriteID:"sfx"}),n}return(0,n.default)(e,t),e.prototype.handleAnimEnd=function(){this.destroy()},e}(Phaser.Group);e.default=o},"6R9f":function(t,e,i){"use strict";i("wiMi"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("5mNR"),a=function(){function t(t){this.game=t,this.transitionToState=!1,this.transitionToParams=!1,this.onTransitionComplete=new Phaser.Signal}var e=t.prototype;return e.clearCurrentState=function(){this.game.state.clearCurrentState()},e.onTransitionInComplete=function(){this.switchStates()},e.isWelcomeScreen=function(){return this.game.state.current===s.STATE_WELCOME},e.switchStates=function(){var t;(t=this.game.state).start.apply(t,[this.transitionToState].concat(this.transitionToParams)),this.game.state.onStateChange.addOnce(this.handleStateChanged,this)},e.handleStateChanged=function(){this.onTransitionControllerComplete()},e.onTransitionControllerComplete=function(){this.onTransitionComplete.dispatch(),this.transitionController=null},e.startState=function(t){var e=t.nextState,i=t.nextStateParams;this.transitionToState=e,this.transitionToParams=i,this.switchStates()},t}();e.default=a},"6YV8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGA=function(t){return new n(t)},e.addGoogleAnalyticsPlugin=function(t){var e=t.plugin;return new n(e)};var s=i("TEuq"),a=null,n=function(){function t(t){var e=this;return a||(a=this,s.Debugger.log("log","GoogleAnalytics plugin registered"),this._plugin=t,this.startTime=Date.now(),window.addEventListener("unload",(function(){e.track({action:"endGame"})})),a)}var e=t.prototype;return e.destroy=function(){a=null,this._plugin=null},e.track=function(t){var e=t.category,i=void 0===e?"Game_Elinor Curious Campout":e,a=t.action,n=void 0===a?"":a,o=t.label,h=void 0===o?"":o,r=t.value,d=void 0===r?"":r;s.Debugger.log("log","GoogleAnalytics.track",i,n,h,d),this._plugin&&this._plugin.event(i,n,h,d)},t}()},"6a7y":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=function(t){function e(e,i,s){var a;return(a=t.call(this,e,i,s,"glow")||this).anchor.set(.5),a.onComplete=new Phaser.Signal,a.active=!1,a.visible=!1,a}(0,n.default)(e,t);var i=e.prototype;return i.init=function(t,e,i){void 0===i&&(i=0),this.active=!0,this.visible=!0,this.x=t,this.y=e;var s=Phaser.Math.random(.5,1.5);this.scale.set(s),this.direction=Phaser.Math.random(-Math.PI/6,Math.PI/6)+(Math.random()<.5?0:Math.PI),this.speed=s*Phaser.Math.between(50,100),this.alpha=0;var a=Phaser.Math.between(1500,2e3)*s,n=this.speed*(a/1e3),o=this.x+Math.cos(this.direction)*n,h=this.y+Math.sin(this.direction)*n;this.game.add.tween(this).to({alpha:[1,1,1,0]},a,null,!0,i),this.game.add.tween(this).to({x:o,y:h},a,null,!0,i).onComplete.addOnce(this.handleAnimComplete,this)},i.handleAnimComplete=function(){this.active=!1,this.visible=!1,this.onComplete.dispatch(this)},(0,a.default)(e,[{key:"depth",get:function(){return this.y+100}}]),e}(Phaser.Image);e.default=o},"8IPk":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=i("zgbH"),h=function(t){function e(e){var i,s=e.game,a=e.data,n=e.inputEnabled,o=void 0!==n&&n;(i=t.call(this,s)||this).data=a,i.w=0,i.tr=255,i.tg=255,i.tb=255,i.inputEnableChildren=o;for(var h=0,r=0;r<a.parts.length;r++){var d=i.game.make.image(h,i.game.height,a.parts[r]);d.anchor.set(0,1),h+=d.width,i.w+=d.width,i.add(d)}return i}(0,n.default)(e,t);var i=e.prototype;return i.setNight=function(t){var e=o.NIGHT_TINT,i=e>>16,s=e>>8&255,a=255&e;t?(this.tr=i,this.tg=s,this.tb=a,this.updateTint()):this.game.add.tween(this).to({tr:i,tg:s,tb:a},500,null,!0).onUpdateCallback(this.updateTint,this)},i.setDay=function(){this.game.add.tween(this).to({tr:255,tg:255,tb:255},500,null,!0).onUpdateCallback(this.updateTint,this)},i.updateTint=function(t,e,i){for(var s=(0|this.tr)<<16|(0|this.tg)<<8|(0|this.tb),a=0;a<this.children.length;a++)this.children[a].tint=s},i.addSlot=function(t){this.add(t)},i.addObject=function(t){this.addChild(t)},(0,a.default)(e,[{key:"width",get:function(){return this.data.width||this.w}}]),e}(Phaser.Group);e.default=h},"9Ft4":function(t,e,i){"use strict";var s=i("R6lU");i("wiMi"),i("j3Ef"),i("qnda"),i("XvIX"),i("QQAp"),i("3Ss1"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("M1I4")),o=s(i("86MP")),h=s(i("8IPk")),r=s(i("22ci")),d=s(i("yRMj")),l=s(i("cm+9")),u=s(i("gRxE")),c=s(i("SfJ3")),p=s(i("hO7r")),m=s(i("gvDg")),g=i("zgbH"),f=s(i("9Rdz")),v=s(i("Am35")),y=function(t){function e(e,i,s,a,o){var m;return(m=t.call(this,e)||this).locationData=i,m.sceneWidth=s,m.state=o,m.savedData=a,m.savedData.items||(m.savedData.items=i.items.concat(),m.savedData.furnitures=i.furnitures.concat(),m.savedData.characters=i.characters.concat()),m.onShowMacroView=new Phaser.Signal,m.furnitureFactory=new l.default(m.game,(0,n.default)(m),m.locationData.furnituresByID),m.itemsFactory=new u.default(m.game,(0,n.default)(m),m.locationData.itemsByID),m.crafting=new c.default(m.game,(0,n.default)(m),m.locationData.recipesByID),m.lights=new v.default(m.game,(0,n.default)(m)),m.isDraggingScene=!1,m.pointer=null,m.startPointerX=0,m.startSceneX=0,m.controlsEnabled=!1,m.dragSpeed=0,m.groundY=m.locationData.groundY,m.sky=new d.default({game:m.game,data:i.sky}),m.background=new h.default({game:m.game,data:i.background,inputEnabled:!0}),m.midground=m.game.make.group(),m.foreground=new r.default({game:m.game,data:i.foreground,widht:i.width}),m.addChild(m.sky),m.addChild(m.background),m.addChild(m.midground),m.addChild(m.foreground),m.noSave=!0,m.placeFurnitures(),m.placeCharacters(),m.placeItems(),m.fireflies=new p.default(m.game,(0,n.default)(m)),a.time===g.TIME_NIGHT?m.setNight(!0):m.setDay(),m.noSave=!1,m}(0,o.default)(e,t);var i=e.prototype;return i.setCamera=function(t){this.camera=t,this.camera.onPosition.add(this.handleCameraOnPosition,this),this.savePosition()},i.handleCameraOnPosition=function(){this.savePosition()},i.enableControls=function(){this.controlsEnabled=!0,this.background.onChildInputDown.add(this.handleInputDown,this),this.background.onChildInputUp.add(this.handleInputUp,this),this.pointer=null},i.disableControls=function(){this.controlsEnabled=!1,this.background.onChildInputDown.remove(this.handleInputDown,this),this.background.onChildInputUp.remove(this.handleInputUp,this),this.pointer=null},i.handleInputDown=function(t,e){this.isDraggingScene=!0,this.pointer=e,this.prevPointerX=e.x,this.startPointerX=e.x,this.startSceneX=.5*this.game.width-this.x,this.camera.setPosition(this.startSceneX)},i.handleInputUp=function(t,e){this.isDraggingScene=!1,this.pointer=null,this.state.scrolled()},i.setDayTime=function(t){t===g.TIME_DAY?this.setDay():this.setNight(),this.saveTime()},i.setDay=function(){this.time=g.TIME_DAY,this.lights.setDay(),this.sky.setDay(),this.background.setDay(),this.foreground.setDay();for(var t=0;t<this.furnitures.length;t++)this.furnitures[t].setDay();this.fireflies.hideFireflies(),this.game.sounds.stopAudioSprite("ambience_night",{spriteID:"sfx"}),this.game.sounds.playSFX("ambience_day",{spriteID:"sfx",loop:!0})},i.setNight=function(t){void 0===t&&(t=!1),this.time=g.TIME_NIGHT,this.lights.setNight(t),this.sky.setNight(t),this.background.setNight(t),this.foreground.setNight(t);for(var e=0;e<this.furnitures.length;e++)this.furnitures[e].setNight(t);this.fireflies.showFireflies(),this.game.sounds.stopAudioSprite("ambience_day",{spriteID:"sfx"}),this.game.sounds.playSFX("ambience_night",{spriteID:"sfx",loop:!0})},i.isDay=function(){return this.time===g.TIME_DAY},i.placeCharacters=function(){var t=this;this.characters=[];for(var e=function(e){var i=t.savedData.characters[e],s=t.locationData.charactersByID[i.id],a=new m.default(t.game,t,i.id,s);(a.x=i.x,a.y=i.y,t.midground.addChild(a),t.characters.push(a),a.onChange.add(t.saveCharacters,t),a.init(i),a.updateTransform(),i.in_tent)?t.tents.find((function(t){return t.id===i.tent})).addCharacter(a):i.in_pond?t.pond.addInto(a):t.stopDragCharacter(a)},i=0;i<this.savedData.characters.length;i++)e(i)},i.stopDragCharacter=function(t){this.game.sounds.playSFX("generic_down",{spriteID:"sfx"}),this.draggedItem=null,this.isDraggingItem=!1,this.trySitDown(t)||this.tryPutIntoTent(t)||this.tryWearSleepingBag2(t)||this.setCharDestPosition(t)||this.tryPutIntoPond(t)},i.trySitDown=function(t){for(var e=this.furnitures.length,i=0;i<e;i++){var s=this.furnitures[i],a=s.canSit(t.x);if(a&&t.canSit(a))return t.sitDown(s,a),this.moveItemsFromSeat(s,a.top),!0}return!1},i.moveItemsFromSeat=function(t,e){if(this.items){t.updateTransform(),t.updateBounds();for(var i=this.items.length,s=new Phaser.Rectangle(t.bb.x+e.x,t.bb.y+e.y,e.w,e.h),a=0;a<i;a++){var n=this.items[a];n.updateBounds(),n.inHand||n.stack||!Phaser.Rectangle.containsPoint(s,n.worldPosition)||this.setDestinationPosition(n)}}},i.tryPutIntoTent=function(t){if(t.inSleepingBag)for(var e=0;e<this.tents.length;e++){var i=this.tents[e];if(i.canAddCharacter(t.x,t.y))return i.addCharacter(t),this.saveCharacters(),!0}return!1},i.setCharDestPosition=function(t){for(var e=new Phaser.Rectangle(t.worldPosition.x-1,t.worldPosition.y,2,720-t.worldPosition.y),i=[],s=this.furnitures.length,a=0;a<s;a++){var n=this.furnitures[a];n.updateBounds(),Phaser.Rectangle.intersects(e,n.bb)&&i.push(n)}var o=null,h=720,r=t.y;s=i.length;for(var d=0;d<s;d++){var l=i[d],u=l.getTop(e);u&&"stand"===u.character&&u.y<h&&t.y<u.y+u.h&&(h=u.y,o=l);var c=l.getSide(e);(c&&t.y>c.y&&t.y<c.y+c.h&&c.y+c.h>r||!u&&c&&t.y>l.bb.y&&t.y<l.bb.y+l.bb.height&&c.y+c.h>r)&&(r=c.y+c.h)}var p=h-t.y;if(h<720&&p<40){var m=Math.max(t.y,h),g=o.y+("water_rock"===o.id?720:0),f=o.y-t.y+o.dz+2;return t.dz=f,t.parentObj=o,t.destDZ=g-m+o.dz+2,t.fallDownTo(m),o.addObject(t),!0}var v=(r=Math.max(r,this.groundY))-t.y+1;return t.dz=v,t.fallDownTo(r),!1},i.placeFurnitures=function(){this.furnitures=[],this.tents=[];for(var t=0;t<this.savedData.furnitures.length;t++){var e=this.savedData.furnitures[t],i=this.addFurniture(e);i.updateTransform(),i.updateBounds()}},i.addFurniture=function(t){var e=this.furnitureFactory.getObject(t);switch("mg"===e.data.layer?this.midground.addChildAt(e,0):"bg"===e.data.layer?this.background.addObject(e):this.foreground.addObject(e),e.updateBounds(),this.time===g.TIME_NIGHT&&(e.setNight(!0),e.setLight(0)),this.furnitures.push(e),e.onChange.add(this.saveFurnitures,this),t.id){case"campfire":this.campfire=e,this.lights.addLight(e);break;case"composter":this.composter=e;break;case"pond":this.pond=e,this.pond.initLayers();break;case"water_rock":this.pond.addRock(e);break;case"tent_1":case"tent_2":case"tent_3":this.tents.push(e),this.moveItemsUnderTent(e)}return e},i.removeFurniture=function(t){var e=this.furnitures.indexOf(t);this.furnitures.splice(e,1),t.destroy()},i.moveItemsUnderTent=function(t){if(this.items){t.updateTransform(),t.updateBounds();for(var e=this.items.length,i=0;i<e;i++){var s=this.items[i];s.updateBounds(),s.inHand||s.stack||!Phaser.Rectangle.intersects(t.bb,s.bb)||this.setDestinationPosition(s)}}},i.placeItems=function(){this.items=[];for(var t=0;t<this.savedData.items.length;t++){var e=this.savedData.items[t],i=this.addItem(e.id,e.x,e.y,e);i.updateTransform(),i.updateBounds(),i.init(e),e.in_pond?this.pond.addInto(i):e.in_hand||this.setDestinationPosition(i)}},i.addItem=function(t,e,i){var s=this.itemsFactory.getItem(t),a=s.data.position;return a&&(e=a.x,i=a.y),s.x=e,s.y=i,this.midground.addChildAt(s,0),s.updateBounds(),s.onDrop.add(this.handleItemDrop,this),s.onChange.add(this.saveItems,this),this.items.push(s),s},i.removeItem=function(t){t.onDrop.remove(this.handleItemDrop,this),t.onChange.remove(this.saveItems,this);var e=this.items.indexOf(t);this.items.splice(e,1),t.destroy(),this.saveItems()},i.spawnItems=function(t,e){for(var i=0;i<e.length;i++){var s=e[i];if("tent_1"===s||"tent_2"===s||"tent_3"===s){var a=this.addFurniture({id:s});this.saveFurnitures(),this.addCloud({x:a.x,y:a.y-.4*a.height,h:a.height}),a.animateGrowUp()}else{var n=t.data.spread?t.data.spread:30,o=Phaser.Math.between(-n,n),h=Phaser.Math.between(0,n),r=t.worldPosition.x-this.x,d=t.worldPosition.y,l=this.addItem(s,r,d);l.updateTransform(),this.tryPutIntoPond(l)||this.setDestinationPosition(l),t.hasFlag("same_position")||l.animateToPosition(l.x+o,l.y+h,500,l.inPond),l.data.hint&&this.state.setLoopHint(l.data.hint)}}this.addCloud({x:t.x,y:t.y,h:t.bb.height})},i.spawnItem=function(t,e,i,s){var a=e,n=Phaser.Math.between(-30,30),o=Phaser.Math.between(10,30),h=this.addItem(a,i,s);h.updateTransform(),this.tryPutIntoPond(h)?h.animateToPosition(h.x+n,h.y+o,50):(this.setDestinationPosition(h),h.animateToPosition(h.x+n,h.y+o)),this.addCloud({x:i,y:s,h:t.bb.height})},i.startDragItem=function(t){if(this.game.sounds.playSFX("generic_up",{spriteID:"sfx"}),this.draggedItem=t,this.isDraggingItem=!0,t.inHand){var e=t.worldPosition.x-this.x,i=t.worldPosition.y;t.x=e,t.y=i,t.angle=0,this.midground.addChild(t),t.pickupFromHand()}else if(t.inPond){var s=t.worldPosition.x-this.x,a=t.worldPosition.y;t.x=s,t.y=a,t.angle=0,this.midground.addChild(t),t.pickupFromPond()}else if(t.inTent){var n=t.worldPosition.x-this.x,o=t.worldPosition.y;t.x=n,t.y=o,this.midground.addChild(t),t.pickupFromTent()}},i.stopDragItem=function(t){this.game.sounds.playSFX("generic_down",{spriteID:"sfx"}),this.draggedItem=null,this.isDraggingItem=!1},i.handleItemDrop=function(t){if(!this.tryEatItem(t)){if(t.canBeHold()){var e=this.canPutItemIntoHand(t);if(e)return e.character.putItemIntoHand(t,e.slot),void this.saveItems();for(var i=this.characters.length,s=0;s<i;s++)this.characters[s].checkPose()}if(!this.tryWearHat(t)&&!this.tryWearSleepingBag(t)&&!(this.tryPutIntoFire(t)||this.tryPutIntoContainer(t)||this.tryBinItem(t)||this.tryCompostItem(t))){var a=[];a.push(t);for(var n=this.items.length,o=0;o<n;o++){var h=this.items[o];h!==t&&(h.updateBounds(),Phaser.Rectangle.intersects(t.bb,h.bb)&&a.push(h))}this.tryCraftItem(a,t)||this.tryStack(a,t)||this.setDestinationPosition(t)||this.tryPutIntoPond(t)}}},i.tryEatItem=function(t){if(t.canBeEaten()){var e=this.canPutFoodIntoMouth(t);if(e){if(e.eat(t,t.data.colour),t.data.drop_on_eat)for(var i=t.data.drop_on_eat.length,s=0;s<i;s++){var a=t.data.drop_on_eat[s],n=this.addItem(a,t.x,t.y),o=e.y+5,h=o-n.y+1;n.dz=h,n.fallDownTo(o)}return this.removeItem(t),!0}}return!1},i.tryWearHat=function(t){if(t.isHat()){var e=this.canWearHat(t);if(e)return e.wearHat(t),this.removeItem(t),!0}return!1},i.tryWearSleepingBag=function(t){if(t.isSleepingBag()){var e=this.canWearSleepingBag(t);if(e)return e.wearSleepingBag(t),this.removeItem(t),!0}return!1},i.tryWearSleepingBag2=function(t){if(this.items){for(var e=this.items.length,i=0;i<e;i++){var s=this.items[i];if(s.isSleepingBag()&&(s.updateBounds(),t.canWearSleepingBag(s)))return t.wearSleepingBag(s),this.removeItem(s),!0}return!1}},i.tryBinItem=function(t){for(var e=this.furnitures.length,i=0;i<e;i++){var s=this.furnitures[i];if(s.isBin&&(s.updateBounds(),s.canPutItemIntoBin(t)))return s.putItemIntoBin(t),!0}return!1},i.tryPutIntoFire=function(t){return!(!t.isFlammable()||!this.campfire.canAddFuel(t))&&(this.campfire.addFuel(),this.removeItem(t),!0)},i.tryPutIntoContainer=function(t){if(t.canBeStored())for(var e=this.items.length,i=0;i<e;i++){var s=this.items[i];if(s.isContainer&&s.canPutItem(t))return"flashlight"===t.id&&t.setState(!1),this.addCloud({x:t.x,y:t.y,h:s.bb.height}),s.addItem(t),!0}return!1},i.tryCompostItem=function(t){return!(!t.canBeComposted()||(this.composter.updateBounds(),!this.composter.canPutItemInto(t)))&&(this.composter.putItemInto(t),!0)},i.tryPutIntoPond=function(t){return this.pond.updateBounds(),(this.pond.isItemOver(t)||!!this.pond.isItemAbove(t))&&(this.pond.dropItemInto(t),!0)},i.tryCraftItem=function(t,e){var i=!1;if(t.length>1){var s=this.crafting.checkItems(t);if(s){i=!0;for(var a=0;a<s.toRemove.length;a++)s.toRemove[a].stack&&s.toRemove[a].stack.breakStack(),this.removeItem(s.toRemove[a]);var n=this.addItem(s.id,e.x,e.y);n.updateTransform(),n.animateOnCraft(),this.tryPutIntoPond(n)||this.setDestinationPosition(n),this.addCloud({x:e.x,y:n.y-.3*n.bb.height,h:n.bb.height}),this.game.sounds.playSFX("item_combine",{spriteID:"sfx"})}}return i},i.tryStack=function(t,e){var i=e.stackType;if(!i||e.hasType("stack")||!e.canStack(i))return!1;var s=!1,a=t.filter((function(t){return t.canStack(i)})),n=t.filter((function(t){return t.hasType("stack")&&t.stackType===i}));if(n.length>0)n[0].isFull()||(n[0].addItem(e),s=!0);else if(a.length>1){a=a.sort((function(t,e){return e.y-t.y}));var o=this.addItem("stack",a[0].x,a[0].y-1);o.setStackType(i);for(var h=0;h<a.length;h++)o.isFull()||(o.addItem(a[h]),s=!0);o.updateTransform(),this.setDestinationPosition(o)||this.tryPutIntoPond(o),this.game.sounds.playSFX("item_combine",{spriteID:"sfx"})}return s},i.setDestinationPosition=function(t){for(var e=new Phaser.Rectangle(t.worldPosition.x-1,t.worldPosition.y,2,720-t.worldPosition.y),i=[],s=this.items.length,a=0;a<s;a++){var n=this.items[a];n!==t&&(n.updateBounds(),Phaser.Rectangle.intersects(e,n.bb)&&i.push(n))}s=this.furnitures.length;for(var o=0;o<s;o++){var h=this.furnitures[o];h.updateBounds(),Phaser.Rectangle.intersects(e,h.bb)&&i.push(h)}var r=null,d=720,l=t.y;s=i.length;for(var u=0;u<s;u++){var c=i[u],p=c.getTop(e);p&&p.y<d&&t.y<p.y+p.h&&(d=p.y,r=c);var m=c.getSide(e);(m&&t.y>m.y&&t.y<m.y+m.h&&m.y+m.h>l||!p&&m&&t.y>c.bb.y&&t.y<c.bb.y+c.bb.height&&m.y+m.h>l)&&(l=m.y+m.h)}var g=d-t.y;if(d<720&&g<40){var f=Math.max(t.y,d),v=r.y+("water_rock"===r.id?720:0),y=v-t.y+r.dz+2;return t.dz=y,t.parentObj=r,t.destDZ=v-f+r.dz+2,r.addObject(t),t.fallDownTo(f),!0}var b=(l=Math.max(l,this.groundY))-t.y+1;return t.dz=b,t.fallDownTo(l),!1},i.canPutItemIntoHand=function(t){for(var e=0;e<this.characters.length;e++){var i=this.characters[e].canPutItemIntoHand(t);if(i)return{character:this.characters[e],slot:i}}return null},i.canPutFoodIntoMouth=function(t){for(var e=0;e<this.characters.length;e++)if(this.characters[e].canPutFoodIntoMouth(t))return this.characters[e];return null},i.canWearSleepingBag=function(t){for(var e=0;e<this.characters.length;e++)if(this.characters[e].canWearSleepingBag(t))return this.characters[e];return null},i.canWearHat=function(t){for(var e=0;e<this.characters.length;e++)if(this.characters[e].canWearHat(t))return this.characters[e];return null},i.setItemsRenderOrder=function(){this.midground.sort("depth",Phaser.Group.SORT_ASCENDING)},i.addObjectToLocation=function(t){this.midground.addChild(t)},i.showMacroView=function(t){var e=t.x,i=t.y,s=t.macroView,a=t.furniture,n=t.animInd;this.onShowMacroView.dispatch({x:e,y:i,macroView:s,furniture:a,animInd:n})},i.step=function(t){this.lights.checkLights();for(var e=this.items.length,i=0;i<e;i++)this.items[i]&&this.items[i].step(t);e=this.characters.length;for(var s=0;s<e;s++)this.characters[s].step(t);e=this.furnitures.length;for(var a=0;a<e;a++)this.furnitures[a].step(t);if(this.isDraggingScene&&this.pointer){this.dragSpeed=-(this.pointer.x-this.prevPointerX)/t,this.dragSpeed=Phaser.Math.clamp(this.dragSpeed,-1e3,1e3);var n=this.pointer.x-this.startPointerX;this.camera.destX=this.startSceneX-n,this.prevPointerX=this.pointer.x}else 0!==this.dragSpeed&&(this.camera.destX+=this.dragSpeed*t,this.dragSpeed-=this.dragSpeed*t*4,Math.abs(this.dragSpeed)<3&&(this.dragSpeed=0));if(this.setItemsRenderOrder(),this.isDraggingItem&&this.draggedItem.isItem&&this.draggedItem.canBeHold()){e=this.characters.length;for(var o=0;o<e;o++)this.characters[o].checkIfItemIsClose(this.draggedItem)}if(this.isDraggingItem&&this.draggedItem.isItem&&this.draggedItem.canBeEaten()){e=this.characters.length;for(var h=0;h<e;h++)this.characters[h].checkIfItemIsCloseToMouth(this.draggedItem)}if(this.isDraggingItem&&this.controlsEnabled){var r=this.game.width-150,d=this.draggedItem.pointer.x,l=720*t;if(d<150){if(this.x<0){var u=1-d/150;this.camera.destX-=l*u}}else if(d>r){if(this.x>-this.sceneWidth+this.game.width){var c=(d-r)/150;this.camera.destX+=l*c}}else{var p=.5*this.game.width-this.x;this.camera.destX=p}}var m=this.x/(this.width-this.game.width);this.sky.x=m*(this.sky.width-this.width)},i.getForegrounOffsetForX=function(t){return t/(this.width-this.game.width)*(this.foreground.width-this.width)},i.addCloud=function(t){var e=t.x,i=t.y,s=t.h,a=Phaser.Math.clamp(s/200,.4,1),n=new f.default(this.game,e,i,a);this.midground.addChild(n)},i.pulseTents=function(){for(var t=0;t<this.items.length;t++){var e=this.items[t];"tent_1_rolled"!==e.id&&"tent_2_rolled"!==e.id&&"tent_3_rolled"!==e.id||e.pulse(2e3)}},i.serializeItems=function(){for(var t=[],e=0;e<this.items.length;e++){var i=this.items[e].serialize();i&&t.push(i)}return t},i.serializeFurnitures=function(){for(var t=[],e=0;e<this.furnitures.length;e++){var i=this.furnitures[e].serialize();i&&t.push(i)}return t},i.serializeCharacters=function(){for(var t=[],e=0;e<this.characters.length;e++){var i=this.characters[e].serialize();t.push(i)}return t},i.saveCharacters=function(t){this.noSave||(this.savedData.characters=this.serializeCharacters(),this.game.controller.saves.save({data:this.savedData}))},i.saveFurnitures=function(){this.noSave||(this.savedData.furnitures=this.serializeFurnitures(),this.game.controller.saves.save({data:this.savedData}))},i.saveItems=function(){this.noSave||(this.savedData.items=this.serializeItems(),this.game.controller.saves.save({data:this.savedData}))},i.savePosition=function(){this.savedData.start_point=this.camera.currentX,this.game.controller.saves.save({data:this.savedData})},i.saveTime=function(){this.savedData.time=this.time,this.game.controller.saves.save({data:this.savedData})},(0,a.default)(e,[{key:"width",get:function(){return this.locationData.width}}]),e}(Phaser.Group);e.default=y},"9Rdz":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("M1I4")),o=s(i("86MP")),h=function(t){function e(e,i,s,a){var o;return(o=t.call(this,e)||this).x=i,o.y=s,o.asset=o.game.make.spine(0,0,"spine_cloud",!0),o.asset.anchor.set(.5,1),o.rootBone=o.asset.skeleton.getRootBone(),o.rootBone.scaleX=a,o.rootBone.scaleY=a,o.addChild(o.asset),o.asset.setAnimationByName(0,"animation",!1),o.asset.onComplete.addOnce(o.handleAnimComplete,(0,n.default)(o)),o}return(0,o.default)(e,t),e.prototype.handleAnimComplete=function(){this.destroy()},(0,a.default)(e,[{key:"depth",get:function(){return this.y+400}}]),e}(Phaser.Group);e.default=h},"9sOt":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).jumpTimes=[.7,.4,.2],i.jumpHeights=[75,30,10],i.squizeTimes=[.2,.2,.15],i.squizeValues=[.15,.15,.03],i}(0,a.default)(e,t);var i=e.prototype;return i.hitGround=function(){this.jump||(this.jump=!0,this.squize=!1,this.jumpY=this.y,this.jumpCount=0,this.jumpAngle=0,this.jumpTime=this.jumpTimes[this.jumpCount],this.jumpHeight=this.jumpHeights[this.jumpCount])},i.handleInputDown=function(e,i){this.jump=!1,t.prototype.handleInputDown.call(this,e,i)},i.step=function(e){if(t.prototype.step.call(this,e),this.jump)if(this.squize){if(this.jumpAngle+=e/this.squizeTimes[this.jumpCount],this.jumpAngle>=1&&(this.squize=!1,this.jumpAngle=0,this.jumpCount++,3===this.jumpCount?this.jump=!1:(this.jumpTime=this.jumpTimes[this.jumpCount],this.jumpHeight=this.jumpHeights[this.jumpCount])),this.jump){var i=Math.sin(Math.PI*this.jumpAngle),s=this.squizeValues[this.jumpCount];this.scale.y=this.scale.x*(1-s*i)}else this.scale.y=this.scale.x;this.y=this.jumpY,this.dz=0}else if(this.jumpAngle+=e/this.jumpTime,this.jumpAngle>=1&&(this.jumpAngle=0,this.squize=!0),this.jumpCount<3){var a=Math.sin(Math.PI*this.jumpAngle),n=-this.jumpHeight*this.jumpTime*a;this.y=this.jumpY+n,this.dz=-n}else this.y=this.jumpY,this.dz=0},e}(s(i("QqF+")).default);e.default=n},Am35:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("fKPv"));function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var h=function(){function t(t,e){this.game=t,this.location=e,this.ambient=1,this.prevAmbient=1,this.changed=!0,this.lights=[],this.lightsPrev=[]}var e=t.prototype;return e.checkLights=function(){var t=this.ambient!==this.prevAmbient;if(!t&&this.ambient<1)for(var e=this.lights.length,i=0;i<e;i++){var s=this.lights[i].getLight(),a=this.lightsPrev[i];if(s.power!==a.power||s.x!==a.x||s.y!==a.y){t=!0,this.lightsPrev[i]=o({},s);break}}this.prevAmbient=this.ambient,this.changed=t},e.setDay=function(t){t?this.ambient=1:this.game.add.tween(this).to({ambient:1},500,null,!0)},e.setNight=function(t){t?this.ambient=0:this.game.add.tween(this).to({ambient:0},500,null,!0)},e.addLight=function(t){this.lights.push(t),this.lightsPrev.push(t.getLight())},e.getLightAt=function(t,e,i){if(void 0===i&&(i=!1),!this.changed)return-1;var s=this.ambient;if(s<1&&!i)for(var a=this.lights.length,n=0;n<a&&s<1;){var o=this.lights[n].getLight(),h=Math.abs(o.x-t);if(h<o.w){var r=Math.abs(o.y-e);if(r<o.h)s+=o.power*(1-h/o.w)*(1-r/o.h),s=Math.min(s,1)}n++}return s},t}();e.default=h},Az84:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("3Ss1"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("/hvn")),o=s(i("6/uN")),h=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).state=1,i.rockState=2,i.isDay=!0,i.objects=[],i.asset.setMixByName("1_shadow","2_appear",.2),i.asset.setMixByName("3_sun","4_leave",.2),i.asset.setMixByName("2_appear","4_leave",.2),i.asset.setMixByName("4_leave","2_appear",.2),i.setAnim("1_shadow"),i.data.rock_x&&(i.asset.x=i.button.x=i.data.rock_x,i.asset.x<-30?i.rockState=1:i.rockState=2),i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.back=this.game.make.image(-22,-34,"lizard_rock","dragback"),this.back.anchor.set(.5,1),this.asset=this.game.make.spine(58,-46,"spine_lizard_rock",!0),this.asset.anchor.set(.5,1),this.light=this.game.make.image(-70,-33,"lizard_rock","rays"),this.light.anchor.set(.5,1),this.front=this.game.make.image(0,0,"lizard_rock","grass"),this.front.anchor.set(.5,1),this.addChild(this.back),this.addChild(this.asset),this.addChild(this.light),this.addChild(this.front),this.rootBone=this.asset.skeleton.getRootBone()},i.updateBounds=function(){this.bb=this.button.getBounds()},i.addObject=function(t){-1===this.objects.indexOf(t)&&this.objects.push(t)},i.removeObject=function(t){var e=this.objects.indexOf(t);this.objects.splice(e,1)},i.getTop=function(t){var e=new Phaser.Rectangle,i=this.button.getBounds(),s=this.data.top[0];return e.x=i.x+s.x,e.y=i.y+s.y,e.width=s.w,e.height=s.h,Phaser.Rectangle.intersects(t,e)?{y:e.y,h:s.h,character:s.character}:null},i.getSide=function(t){var e=new Phaser.Rectangle,i=this.button.getBounds(),s=this.data.side[0];return e.x=i.x+s.x,e.y=i.y+s.y,e.width=s.w,e.height=s.h,Phaser.Rectangle.intersects(t,e)?{y:e.y,h:s.h}:null},i.setDay=function(){this.isDay=!0,this.game.add.tween(this.light).to({alpha:1},500,null,!0)},i.setNight=function(t){this.isDay=!1,t?this.light.alpha=0:this.game.add.tween(this.light).to({alpha:0},500,null,!0)},i.setLight=function(e){t.prototype.setLight.call(this,e),t.prototype.setLight2.call(this,e)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.back.tint=this.tintColor,this.front.tint=this.tintColor},i.addButton=function(){t.prototype.addButton.call(this),this.button.anchor.set(.5,1)},i.handleInputDown=function(t,e){if("desktop"===this.game.deviceMetric.platform.type){if(1===this.rockState){this.rockState=2,this.prevX=this.asset.x;var i=this.game.add.tween(this.asset).to({x:58},500,Phaser.Easing.Quadratic.Out,!0);i.onUpdateCallback(this.updateMove,this),i.onComplete.add(this.onMoveRight,this)}else{this.rockState=1,this.prevX=this.asset.x;var s=this.game.add.tween(this.asset).to({x:-86},500,Phaser.Easing.Quadratic.Out,!0);s.onUpdateCallback(this.updateMove,this),s.onComplete.add(this.onMoveLeft,this)}this.audio=this.game.sounds.playSFX("item_rock",{spriteID:"sfx"})}else this.startPos={x:this.button.x,y:this.button.y},this.drag=!0,this.dragDx=this.button.x-(e.x-this.location.x-this.x),this.pointer=e,this.audio=this.game.sounds.playSFX("item_rock",{spriteID:"sfx",loop:!0}).get("item_rock"),this.audio.volume=0},i.updateMove=function(){this.button.x=this.asset.x;var t=this.asset.x-this.prevX;this.prevX=this.asset.x,this.moveObjectsBy(t)},i.onMoveRight=function(){this.game.sounds.stopAudioSprite("item_rock",{spriteID:"sfx"}),this.audio=null,this.onChange.dispatch()},i.onMoveLeft=function(){this.game.sounds.stopAudioSprite("item_rock",{spriteID:"sfx"}),this.audio=null,this.onChange.dispatch()},i.handleInputUp=function(){"desktop"!==this.game.deviceMetric.platform.type&&(this.drag=!1,this.pointer=null,this.game.sounds.stopAudioSprite("item_rock",{spriteID:"sfx"}),this.audio=null,this.onChange.dispatch())},i.step=function(e){t.prototype.step.call(this,e);var i=this.location.lights.getLightAt(this.asset.worldPosition.x,this.asset.worldPosition.y-(this.asset.height>>1),!this.data.flashlight);if(i>=0&&i!==this.lightPower&&(this.lightPower=i,t.prototype.setLight.call(this,i)),this.drag&&this.pointer){var s=-this.location.x+this.pointer.x-this.x+this.dragDx,a=(s=Phaser.Math.clamp(s,-86,58))-this.asset.x;this.asset.x=this.button.x=s,this.moveObjectsBy(a),this.audio.volume=Math.min(1,Math.abs(a)/2)}else{this.isDay&&this.asset.x<-30&&1===this.state?(this.state=2,this.game.time.events.add(500,this.setAnim,this,"2_appear",!1),this.game.time.events.add(500,this.playSndLeave,this),this.asset.onComplete.add(this.handleAnimAppear,this)):(this.asset.x>-30&&3===this.state||!this.isDay&&4!==this.state&&1!==this.state)&&(this.state=4,this.game.time.events.add(500,this.setAnim,this,"4_leave",!1),this.game.time.events.add(500,this.playSndLeave,this),this.asset.onComplete.add(this.handleAnimLeave,this))}},i.moveObjectsBy=function(t){for(var e=0;e<this.objects.length;e++){this.objects[e].x+=t}},i.playSndLeave=function(){this.game.sounds.playSFX("item_lizard",{spriteID:"sfx"})},i.handleAnimAppear=function(){if(this.asset.onComplete.remove(this.handleAnimAppear,this),this.state=3,this.setAnim("3_sun"),this.visible){var t=new o.default(this.game,this.asset.x,-135);this.addChild(t),this.location.state.setLoopHint(this.data.hint)}},i.handleAnimLeave=function(){this.asset.onComplete.remove(this.handleAnimLeave,this),this.state=1,this.setAnim("1_shadow")},i.pulse=function(t){void 0===t&&(t=1500),this.game.add.tween(this.rootBone).to({scaleX:[1.2,1,1.2,1,1.2,1],scaleY:[1.2,1,1.2,1,1.2,1]},t,null,!0)},i.serialize=function(){var e=t.prototype.serialize.call(this);return e.rock_x=this.asset.x,e},e}(n.default);e.default=h},Bx3X:function(t,e,i){"use strict";i("RiZp"),i("XvIX"),i("ZKpu"),i("6WZY"),i("XEfP"),i("Wse9"),i("LBAN"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.getDeviceMetric=e.isOld=e.getiOSversion=e.getIPadModel=e.getIPhoneModel=e.isIE11=e.isIE=e.PERFORMANCE_CATEGORY=void 0;var s=i("M2um"),a=/Android.*Nexus[\\s]+(7|9|10)/,n=/SM-T530|SM-T330|SM-N8010/,o=/HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel/,h=/HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410/,r=/sm-t377|sm-t56/,d=/hudl/,l={LOW_END:"LOW_END",MID_END:"MID_END",HIGH_END:"HIGH_END"};e.PERFORMANCE_CATEGORY=l;var u={LOW_END:"iPhone 1/3g/3gs,iPhone 4/4s,iPhone 5/5c/5s,iPad 1/2 | Mini 1",MID_END:"iPhone 6/6s/7/8,iPhone 6/6s/7/8 (Display Zoom),iPhone 6/6s/7 Plus/8 Plus,iPhone 6/6s/7 Plus/8 Plus (Display Zoom),iPad 3-5, iPad Air 1-2, iPad Mini 2-4, iPad Pro 9.7"};e.isIE=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}return!1};e.isIE11=function(){return!!window.MSInputMethodContext&&!!document.documentMode};var c=function(){var t=(window.screen.width>window.screen.height?window.screen.height:window.screen.width)/(window.screen.width>window.screen.height?window.screen.width:window.screen.height),e=window.devicePixelRatio;return t===320/480&&1===e?"iPhone 1/3g/3gs":t===640/960&&2===e?"iPhone 4/4s":t===640/1136&&2===e?"iPhone 5/5c/5s":t===750/1334&&2===e?"iPhone 6/6s/7/8":t===640/1136&&2===e?"iPhone 6/6s/7/8 (Display Zoom)":.5625===t&&3===e?"iPhone 6/6s/7 Plus/8 Plus":t===1125/2001&&3===e?"iPhone 6/6s/7 Plus/8 Plus (Display Zoom)":t===375/812&&3===e?"iPhone X":""};e.getIPhoneModel=c;var p=function(){var t=(window.screen.width>window.screen.height?window.screen.height:window.screen.width)/(window.screen.width>window.screen.height?window.screen.width:window.screen.height),e=window.devicePixelRatio;return.75===t?1===e?"iPad 1/2 | Mini 1":"iPad 3-5, iPad Air 1-2, iPad Mini 2-4, iPad Pro 9.7":.75===t?"iPad Pro 10.5":t===1024/1366?"iPad Pro 12.9, Pro 12.9 (2nd Gen)":void 0};e.getIPadModel=p;e.getiOSversion=function(){var t=window.navigator.userAgent,e=t.indexOf("OS ");return(t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1)&&e>-1?window.Number(t.substr(e+3,3).replace("_",".")):0};var m=function(){var t=window.navigator.userAgent;return!!t.match(a)||(!!t.match(n)||(!(!t.match(o)&&!t.match(h))||(!!t.match(r)||!!t.match(d))))};e.isOld=m;e.getDeviceMetric=function(){var t=l.MID_END,e=(0,s.getPlatform)();if("desktop"===e.type)t=l.HIGH_END;else if("unknown"!==e.type){switch(e.os){case"windows":case"blackberry":case"webos":t=l.LOW_END;break;case"fire":t=function(t){var e=l.MID_END;return t.kindle.gen<8&&(e=l.LOW_END),e}(e);break;case"android":t=function(t){if(m())return l.LOW_END;var e=t.version&&parseInt(t.version)||0;return e<=6?l.LOW_END:e>9?l.HIGH_END:l.MID_END}(e);break;case"ios":t=function(t){var e=l.HIGH_END;if("tablet"===t.type){var i=p();u.LOW_END.includes(i)?e=l.LOW_END:u.MID_END.includes(i)&&(e=t.majorVersion<13?l.LOW_END:l.MID_END)}else if("smartphone"===t.type){var s=c();u.LOW_END.includes(s)?e=l.LOW_END:u.MID_END.includes(s)&&(e=l.MID_END)}return e}(e)}return{platform:e,category:t}}return{platform:e,category:t}}},CDWU:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("fKPv")),n=s(i("C9uT")),o=i("TEuq");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={id:null,volume:.2},l=function(){function t(t){var e=t.game;this.game=e,this.sounds={},this.sprites={},this.backgroundMusic=r({},d),this._soundVolume=1,this._sfxVolume=1,this._musicVolume=1,this._voVolume=1}var e=t.prototype;return e.startup=function(){this.game.sound.mute=!1,this.touchLock()},e.decode=function(t,e,i){this.game.sound.setDecodedCallback(t,e,i)},e.handleGamePause=function(t){var e=this,i=this.game.sound.context.state;t&&"running"===i?(o.Debugger.log("log","Pause running AudioContext"),this.game.sound.context.suspend().then((function(){o.Debugger.log("log","AudioContext suspended")}))):t||"interrupted"!==i&&"suspended"!==i||(this.contextTimeout&&(clearTimeout(this.contextTimeout),this.contextTimeout=null),this.contextTimeout=setTimeout((function(){o.Debugger.log("log","UnPause "+i+" AudioContext"),e.game.sound.context.resume().then((function(){o.Debugger.log("log","AudioContext resumed")}))}),500))},e.touchLock=function(){this.game.sound.usingWebAudio&&"suspended"===this.game.sound.context.state&&(o.Debugger.log("log","AudioContext is suspended"),this.game.sound.setTouchLock(),this.isTouchLocked=!0)},e.checkAudioContext=function(){var t=this;this.isTouchLocked&&this.game.sound.usingWebAudio&&(o.Debugger.log("log","AudioContext attempting resume"),this.game.sound.context.resume().then((function(){o.Debugger.log("log","AudioContext resumed successfully"),t.isTouchLocked="suspended"===t.game.sound.context.state})))},e.addSound=function(t,e){this.sounds[t]=this.game.make.audio(e),this.sounds[t].stop()},e.removeSound=function(t,e){this.sounds[t]&&(this.sounds[t].destroy(),this.game.cache.removeSound(e))},e.addAudioSprite=function(t){var e=t.id;this.sprites[e]=this.game.add.audioSprite(e)},e.removeAudioSprite=function(t){var e=this,i=t.id;this.sprites[i]&&(this.sprites[i].isPlaying&&this.sprites[i].stop(),Object.keys(this.sprites[i].sounds).forEach((function(t){e.sprites[i].sounds[t].isPlaying&&e.sprites[i].sounds[t].stop(),e.sprites[i].sounds[t].destroy(),e.game.cache.removeSound(t),delete e.sprites[i].sounds[t]})),this.game.cache.removeJSON(i),this.game.cache.removeSound(i),delete this.sprites[i])},e.checkSfxExists=function(t,e){return this.sprites[e]&&this.sprites[e].sounds[t]},e.sfxExists=function(t,e){return!!this.checkSfxExists(t,e)||(o.Debugger.log("warn","Cant find "+t+" in audiosprite "+e+", has it been added? (config.json and assetpack)"),!1)},e.playSFX=function(t,e){return void 0===e&&(e={}),e.volume=(e.volume||1)*this._sfxVolume,this.playAudioSprite(t,e)},e.playVO=function(t,e){return void 0===e&&(e={}),e.volume=(e.volume||1)*this._voVolume,this.playAudioSprite(t,e)},e.playAudioSprite=function(t,e){void 0===e&&(e={});var i=e,s=i.volume,a=void 0===s?1:s,n=i.loop,o=void 0!==n&&n,h=i.ignoreIfPlaying,r=void 0!==h&&h,d=i.delay,l=void 0===d?null:d,u=i.onComplete,c=void 0===u?null:u,p=i.onCompleteScope,m=void 0===p?null:p,g=i.spriteID,f=void 0===g?"generic_audiosprite":g;if(!this.sfxExists(t,f))return!1;if(!0!==Phaser.Device.ie||!this.game.paused){if(this.checkAudioContext(),l)return e.delay=null,this.game.time.events.add(l,this.playAudioSprite,this,t,e),!0;var v=this.sprites[f],y=v.get(t);if(this.isTouchLocked){if(!c)return!1;var b=new Phaser.Signal;b.addOnce((function(){c.call(m)})),b.dispatch()}else{if(r&&y.isPlaying)return!1;y.loop=o,y.markers[t].loop=o,v.play(t,a),c&&y.onStop.addOnce((function(){c.call(m)}))}return v}},e.stopAudioSprite=function(t,e){void 0===e&&(e={});var i=e.spriteID,s=void 0===i?"":i;this.sprites[s]?this.sprites[s].get(t).isPlaying&&this.sprites[s].stop(t):this.sounds[t]&&this.sounds[t].isPlaying&&this.sounds[t].stop()},e.stopAllSFX=function(){for(var t in this.sprites)if(this.sprites.hasOwnProperty(t))for(var e in this.sprites[t].sounds)this.sprites[t].sounds.hasOwnProperty(e)&&this.sprites[t].sounds[e].isPlaying&&"click"!==e&&this.sprites[t].sounds[e].stop()},e.clearBackgroundMusic=function(){this.backgroundMusic=r({},d)},e.setBackgroundMusic=function(t){this.sounds[t]?this.backgroundMusic.id=t:o.Debugger.log("warn","Background music "+t+" not found.")},e.stopBackgroundMusic=function(){var t=this.backgroundMusic.id;this.stopSound(t)},e.playBackgroundMusic=function(){var t=this.backgroundMusic,e=t.id,i=t.volume,s=this.sounds[e];s&&this.allowMusic&&(s.paused||s.isPlaying?s.paused&&(s.volume=0,s.resume(),s.fadeTo(500,i)):s.play("",0,i,!0)),this.game.paused&&this.pauseBackgroundMusic()},e.pauseBackgroundMusic=function(){var t=this.backgroundMusic.id,e=this.sounds[t];e&&e.pause()},e.stopSound=function(t){this.sounds[t]&&(this.sounds[t].pausedPosition=0,this.sounds[t].isPlaying&&this.sounds[t].stop())},e.setVolume=function(t,e){this.backgroundMusic.id===t?(this.backgroundMusic.volume=e,this.sounds[t].fadeTo(1e3,e)):this.sounds[t].volume=e},(0,n.default)(t,[{key:"soundVolume",set:function(t){this.game.sound.volume=t,this._soundVolume=t}},{key:"sfxVolume",set:function(t){for(var e in this._sfxVolume=t,this.sounds)e!==this.backgroundMusic.id&&(this.sounds[e].mute=0===this._sfxVolume)}},{key:"musicVolume",set:function(t){this._musicVolume=t,1===this._musicVolume?this.playBackgroundMusic():this.pauseBackgroundMusic()}},{key:"voVolume",set:function(t){this._voVolume=t}},{key:"allowSFX",get:function(){return 1===this._sfxVolume}},{key:"allowMusic",get:function(){return 1===this._musicVolume}},{key:"allowVo",get:function(){return 1===this._voVolume}}]),t}();e.default=l},DaKh:function(t,e,i){"use strict";"resetTransform"in CanvasRenderingContext2D.prototype||(CanvasRenderingContext2D.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)})},E2Eq:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e,i,s){var n;return(n=t.call(this,e)||this).x=i,n.y=s,n.touched=!1,n.time=5,n.zipAngle=0,n.onComplete=new Phaser.Signal,n.asset=n.game.make.spine(0,0,"spine_curtain",!0),n.asset.onComplete.addOnce(n.handleAnimComplete,(0,a.default)(n)),n.asset.anchor.set(.5,1),n.addChild(n.asset),n.anim=n.asset.setAnimationByName(0,"animation",!1),n.anim.timeScale=0,n.button=n.game.make.button(0,240,"empty"),n.button.anchor.set(.5),n.button.width=80,n.button.height=240,n.addChild(n.button),n.button.events.onInputDown.add(n.handleInputDown,(0,a.default)(n)),n.button.events.onInputUp.add(n.handleInputUp,(0,a.default)(n)),n}(0,n.default)(e,t);var i=e.prototype;return i.handleInputDown=function(t,e){this.pointer=e,this.drag=!0,this.dragDY=this.button.y-e.y,this.touched=!0,this.game.sounds.checkAudioContext()},i.handleInputUp=function(t,e){this.pointer=null,this.drag=!1,this.unzip()},i.handleAnimComplete=function(){this.asset.onComplete.remove(this.handleAnimComplete,this),this.onComplete.dispatch()},i.unzip=function(){this.button.events.onInputDown.remove(this.handleInputDown,this),this.button.events.onInputUp.remove(this.handleInputUp,this),this.anim.timeScale=1,this.button.destroy(),this.button=null},i.update=function(){if(t.prototype.update.call(this),this.asset.update(),!this.touched){var e=this.game.time.elapsedMS/1e3;this.time>0&&(this.time-=e,this.time);var i=-.5*(Math.cos(this.zipAngle)-1);this.button.y=240-50*i,this.zipAngle+=5*e,this.setZipPosition(this.button.y)}if(this.drag){var s=this.pointer.y+this.dragDY;s=Phaser.Math.clamp(s,-240,240),this.button.y=s,this.setZipPosition(s),1-(s+240)/480>.8&&this.handleInputUp()}},i.setZipPosition=function(t){var e=1*(1-(t+240)/480);this.anim.trackTime=e},e}(Phaser.Group);e.default=o},F3nf:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).isEmpty=!0,i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.asset=this.game.make.image(0,0,this.data.key,"stump"),this.asset.anchor.set(.5,1),this.addChild(this.asset)},i.setLight=function(t){this.setLight2(t)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.asset.tint=this.tintColor},e}(s(i("/hvn")).default);e.default=n},FA2v:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e,i,s){var a;return(a=t.call(this,e)||this).x=i,a.y=s,a.asset=a.game.make.spine(0,0,"spine_hover",!0),a.asset.anchor.set(.5,1),a.addChild(a.asset),a.anim=a.asset.setAnimationByName(0,"animation",!1),a.rootBone=a.asset.skeleton.getRootBone(),a.rootBone.scaleX=.8,a.rootBone.scaleY=.8,a}(0,a.default)(e,t);var i=e.prototype;return i.show=function(){this.tween&&(this.tween.onComplete.remove(this.handleHide,this),this.tween.stop()),this.visible=!0,this.alpha=1,this.anim=this.asset.setAnimationByName(0,"animation",!1)},i.hide=function(){this.tween&&this.tween.stop(),this.tween=this.game.add.tween(this).to({alpha:0},150,Phaser.Easing.Quadratic.Out,!0),this.tween.onComplete.addOnce(this.handleHide,this)},i.handleHide=function(){this.visible=!1},i.setValue=function(t){},e}(Phaser.Group);e.default=n},FOrS:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("dD3M")),o=function(t){function e(e){var i,s=e.game,a=e.x,n=void 0===a?0:a,o=e.y,h=void 0===o?0:o,r=e.up,d=e.over,l=e.atlas,u=void 0===l?"ui_buttons":l,c=e.playClick,p=void 0===c||c,m=e.sfxID,g=void 0===m?"generic_ui":m;return(i=t.call(this,{game:s,x:n,y:h,up:r,over:d,atlas:u,playClick:p,sfxID:g})||this).state=1,i}(0,a.default)(e,t);var i=e.prototype;return i.setVisibility=function(t){t?this.show():this.hide()},i.show=function(){2!==this.state&&3!==this.state||(this.state=4,this.tween&&this.tween.stop(),this.tween=this.game.add.tween(this).to({alpha:1},100,null,!0),this.tween.onComplete.addOnce(this.handleShowEnd,this))},i.handleShowEnd=function(){this.state=1,this.tween=null,this.enable()},i.hide=function(t){t?(this.alpha=0,this.disable(),this.handleHideEnd()):1!==this.state&&4!==this.state||(this.state=3,this.tween&&this.tween.stop(),this.disable(),this.tween=this.game.add.tween(this).to({alpha:0},100,null,!0),this.tween.onComplete.addOnce(this.handleHideEnd,this))},i.handleHideEnd=function(){this.state=2,this.tween=null},e}(n.default);e.default=o},FxLT:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=s(i("/hvn")),h=i("zgbH"),r=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).isLit=!1,i.bb=new Phaser.Rectangle,i.cookArea=new Phaser.Rectangle(i.x+i.data.cook_area.x,i.y+i.data.cook_area.y,i.data.cook_area.w,i.data.cook_area.h),i.fire=i.asset.skeleton.findBone("fire"),i.asset.setMixByName("2_lit","3_extinguish",.2),i.asset.setMixByName("3_extinguish","2_lit",.2),i.asset.setMixByName("4_extinguished","2_lit",.2),i.setAnim("4_extinguished"),i.sticksAnim=i.asset.setAnimationByName(1,"sticks",!1),i.sticksAnim.timeScale=0,i.fuel=i.data.fuel||1,i.timeToSave=1,i.setSticks(),"on"===n.state&&i.lightUp(),i}(0,n.default)(e,t);var i=e.prototype;return i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s)},i.updateBounds=function(){this.bb.x=this.worldPosition.x+this.data.bounding_box.x,this.bb.y=this.worldPosition.y+this.data.bounding_box.y,this.bb.width=this.data.bounding_box.w,this.bb.height=this.data.bounding_box.h},i.handleInputDown=function(){this.location.state.interacted(this),this.isLit||this.lightUp()},i.handleBucketDown=function(){this.isLit&&this.extinguish()},i.lightUp=function(){this.isLit||(this.isLit=!0,this.setAnim("2_lit"),this.game.sounds.playSFX("item_lightfire",{spriteID:"sfx"}),this.ambience=this.game.sounds.playSFX("ambience_fire",{spriteID:"sfx",loop:!0}).get("ambience_fire"),this.onChange.dispatch())},i.extinguish=function(){this.isLit&&(this.isLit=!1,this.setAnim("3_extinguish",!1),this.location.time===h.TIME_NIGHT&&this.setNight(),this.ambience=null,this.game.sounds.stopAudioSprite("ambience_fire",{spriteID:"sfx"}),this.game.sounds.playSFX("item_extinguish",{spriteID:"sfx"}),this.onChange.dispatch())},i.canAddFuel=function(t){var e=this.x-t.x,i=this.y-20-t.y;return Math.abs(e)<40&&Math.abs(i)<40},i.addFuel=function(){this.fuel=1,this.setSticks(),this.onChange.dispatch()},i.destroy=function(){t.prototype.destroy.call(this)},i.step=function(e){if(t.prototype.step.call(this,e),this.isLit&&(this.fuel>0&&(this.fuel-=e/15,this.fuel=Math.max(0,this.fuel)),this.setSticks(),this.fire.scaleY=.15+.15*this.fuel,this.timeToSave-=e,this.timeToSave<=0&&this.fuel>0&&(this.timeToSave=1,this.onChange.dispatch())),this.ambience){var i=-this.location.x,s=i+this.game.width,a=.5*(s-i),n=.5*(s+i);this.x<s&&this.x>i?this.ambience.volume=1-Math.abs(this.x-n)/a:this.ambience.volume=0}},i.setSticks=function(){this.sticksAnim.trackTime=12*(1-this.fuel)},i.getLight=function(){return{x:this.worldPosition.x,y:this.worldPosition.y-30,power:this.isLit?.5+.5*this.fuel:0,w:200,h:100}},i.serialize=function(){var e=t.prototype.serialize.call(this);return e.state=this.isLit?"on":"off",e.fuel=this.fuel,e},(0,a.default)(e,[{key:"height",get:function(){return 100}}]),e}(o.default);e.default=r},G9dM:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(){this.currentPond="none",this.clearPlayerSaves=function(){},this.pondDebug=!1,this.myCreaturesUnlocked=!1,this.arrowsUnlocked=!1,this.sound=!0,this.sfx=!0,this.music=!0,this.vo=!0,this.captions=!0,this.nextLevel=function(){}}},GEMp:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("XEfP"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("LClc")),o=s(i("x1tP")),h=i("6YV8"),r=i("SPpy"),d=i("zgbH"),l=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.preload=function(){this.debug=!1,this.loadComplete=!1,this.loadBar=new n.default(this.game),this.game.add.existing(this.loadBar),this.assetsReady=!1,this.game.load.onLoadStart.add(this.handleLoadStart,this),this.game.load.onFileStart.add(this.handleFileStart,this),this.loadAppAssetPacks()},i.handleFileStart=function(t,e){-1!==e.indexOf("-audioatlas")&&this.audioSprites.push(e.replace("-audioatlas",""))},i.handleLoadStart=function(){(0,r.getGameFileLoadList)(this.game,this.debug)},i.loadAppAssetPacks=function(){this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.crossOrigin="anonymous",this.audioSprites=[];for(var t=this.game.cache.getJSON("load_manifest").main.packs,e=0;e<t.length;e++){var i=t[e];this.game.load.pack(i.key,i.path,null,this)}},i.loadUpdate=function(){this.loadBar.visible=!0,this.loadBar.setProgress(this.game.load.progress/100)},i.create=function(){this.assetsReady=!0,this.game.sounds.startup()},i.update=function(){this.checkLoading()},i.checkLoading=function(){!this.loadComplete&&this.assetsReady&&(this.loadBar.setProgress(1),this.handleLoadComplete())},i.handleLoadComplete=function(){var t=this;if(!this.loadComplete){this.loadComplete=!0,this.game.app_config=this.game.cache.getJSON("app_config"),this.setControllers();for(var e=0;e<this.audioSprites.length;e++)this.game.sounds.addAudioSprite({id:this.audioSprites[e]});for(var i=0;i<this.game.app_config.audio.length;i++)this.game.sounds.addSound(this.game.app_config.audio[i],this.game.app_config.audio[i]);this.game.sounds.decode(this.audioSprites,this.audioDecoded,this),this.decodeSoundsCallback=this.game.time.events.add(d.DECODE_TIMEOUT_SPEED,(function(){t.decodeSoundsCallback=null,t.loadBar&&t.loadBar.setProcessing()}))}},i.audioDecoded=function(){this.decodeSoundsCallback&&(this.game.time.events.remove(this.decodeSoundsCallback),this.decodeSoundsCallback=null),this.loadBar.onAnimationComplete.add(this.handleLoadAnimationComplete,this),this.loadBar.animateCompleteSequence({delay:500,duration:200});var t=this.game.springRollApplication.getPlugin("GoogleAnalytics");(0,h.addGoogleAnalyticsPlugin)({plugin:t})},i.setControllers=function(){this.game.controller=new o.default(this.game),this.game.controller.init()},i.handleLoadAnimationComplete=function(){this.game.controller.loadComplete(),this.loadComplete=!0},i.shutdown=function(){this.game.load.onLoadStart.remove(this.handleLoadStart,this),this.game.load.onFileStart.remove(this.handleFileStart,this),this.loadBar.onAnimationComplete.remove(this.handleLoadAnimationComplete,this),this.loadBar.destroy(),this.loadBar=null},e}(Phaser.State);e.default=l},H417:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("86MP")),o=i("zgbH"),h=s(i("QqF+")),r=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).isBackpack=!0,i.itemsInside=[],i}(0,n.default)(e,t);var i=e.prototype;return i.init=function(e){this.isOpen=e.open,this.isOpen&&this.open();for(var i=0;i<e.items.length;i++){var s=this.location.addItem(e.items[i]);this.addItem(s,!1)}t.prototype.init.call(this,e)},i.addItem=function(t,e){void 0===e&&(e=!0),t.disable(),this.addChild(t),t.visible=!1,t.x=0,t.y=0,t.container=this,this.itemsInside.push(t),this.updateBounds(),this.animateSquize(),this.game.sounds.playSFX("item_combine",{spriteID:"sfx"}),e&&this.onChange.dispatch()},i.open=function(){this.isOpen=!0,this.isContainer=!0,this.frameName=this.frameName+"_open"},i.handleInputUp=function(){this.location.stopDragItem(this),this.drag=!1,this.updateBounds(),this.setScale(h.SIZE_GROUND);var t=this.pointer.x-this.startPos.x,e=this.pointer.y-this.startPos.y,i=Math.sqrt(t*t+e*e);if(this.pointer=null,i<o.TAP_LIMIT&&"desktop"!==this.game.deviceMetric.platform.type){var s="desktop"===this.game.deviceMetric.platform.type?h.SHIFT_UP_DESKTOP:h.SHIFT_UP_MOBILE;this.y-=s,this.handleTap()}this.onDrop.dispatch(this)},i.handleTap=function(){this.isOpen||this.open(),this.animateStretch(),this.game.time.events.add(150,this.emptyContainer,this)},i.emptyContainer=function(){if(0!==this.itemsInside.length){for(var t=Math.max(1,this.itemsInside.length-1),e=Math.min(150,30*t),i=e/t,s=this.x-.5*e,a=0;a<this.itemsInside.length;a++){var n=this.itemsInside[a];n.enable(),n.setScale(h.SIZE_GROUND),n.x=this.worldPosition.x-this.location.x,n.y=this.worldPosition.y,n.container=null,n.visible=!0;var o=i*a+Phaser.Math.between(-5,5),r=Phaser.Math.between(5,30),d=s+o,l=this.y+r;this.location.addObjectToLocation(n),this.location.tryPutIntoPond(n)?(s=n.x-.5*e,n.animateToPosition(s+o,n.y,500,!0)):(n.animateToPosition(d,l),this.location.setDestinationPosition(n))}this.itemsInside=[],this.location.addCloud({x:this.x,y:this.y-.3*this.height,h:this.bb.height}),this.game.sounds.playSFX("item_combine",{spriteID:"sfx"})}},i.canPutItem=function(t){if(this.isOpen){if(this.updateBounds(),this.bb.x+=-this.location.x,Phaser.Rectangle.contains(this.bb,t.x,t.y))return this.bb.x+=this.location.x,!0;this.bb.x+=this.location.x}return!1},i.canHover=function(){return!this.drag&&(!this.isOpen||this.itemsInside.length>0)},i.serialize=function(){var e=t.prototype.serialize.call(this);e.open=this.isOpen,e.items=[];for(var i=0;i<this.itemsInside.length;i++)e.items.push(this.itemsInside[i].id);return e},e}(h.default);e.default=r},HIEV:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e){var i,s=e.game,n=e.location,o=e.data;return(i=t.call(this,{game:s,location:n,data:o})||this).state=o.state||1,i.setAnim("0"+i.state,!1),i.canTap=!0,i.asset.onComplete.add(i.handleAnimComplete,(0,a.default)(i)),i}(0,n.default)(e,t);var i=e.prototype;return i.handleInputDown=function(){this.canTap&&(this.canTap=!1,this.state=this.state<4?this.state+1:2,this.setAnim("0"+this.state,!1),2===this.state?this.game.sounds.playSFX("item_dandelion",{spriteID:"sfx"}):3===this.state&&(this.game.sounds.playSFX("item_dandelionblow",{spriteID:"sfx"}),this.location.state.setLoopHint(this.data.hint)),this.onChange.dispatch())},i.handleAnimComplete=function(){this.canTap=!0},i.updateBounds=function(){this.bb=this.getBounds(),this.bb.width=50,this.bb.height=130},i.serialize=function(){var e=t.prototype.serialize.call(this);return e.state=this.state,e},e}(s(i("/hvn")).default);e.default=o},IDWZ:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("3Ss1"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("/hvn")),o=i("ZBt7"),h=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).target=null,i.searchArea=new Phaser.Rectangle(i.x+i.data.area.x,i.y+i.data.area.y,i.data.area.w,i.data.area.h),i.spawnTime=.5,i.ants=[],i.antsPool=[],i.addButton(),i.addMagnifierIcon(),i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.asset=this.game.make.image(0,0,this.data.key,"anthill"),this.asset.anchor.set(.5,1),this.addChildAt(this.asset,0)},i.addButton=function(){this.asset.inputEnabled=!0,this.asset.events.onInputDown.add(this.handleInputDown,this),this.asset.input.pixelPerfectClick=!0,this.asset.input.pixelPerfectOver=!0,this.asset.input.useHandCursor=!0},i.handleInputDown=function(){this.magnifierIcon.active?this.magnifierIcon.hide():this.magnifierIcon.show()},i.setLight=function(t){this.setLight2(t)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.asset.tint=this.tintColor},i.lookForTarget=function(){for(var t=this.location.items,e=null,i=1e3,s=0,a=0;a<t.length;a++){var n=t[a],o=n.getPosForAnts();if(n.isTargetForAnt()&&Phaser.Rectangle.contains(this.searchArea,o.x,o.y)){var h=this.x-o.x,r=this.y-o.y;(s=Math.sqrt(h*h+r*r))<i&&(i=s,e=n)}}return{target:e,distance:s}},i.checkTarget=function(){var t=this.lookForTarget();if(this.target=t.target,this.target){this.distance=t.distance,this.requiredAnts=Math.max(1,Math.round(2*this.distance/o.SPEED));for(var e=this.target.getPosForAnts(),i=0;i<this.ants.length;i++)this.ants[i].setTarget(e.x,e.y-10,this.target)}if(!this.target){this.requiredAnts=0;for(var s=0;s<this.ants.length;s++)this.ants[s].returnHome()}},i.spawnAnt=function(){var t,e=this.x-37,i=this.y-26;(t=this.antsPool.length>0?this.antsPool.shift():this.location.addFurniture({id:"ant",x:e,y:i})).init(e,i),t.setTarget(this.target.x,this.target.y-10,this.target),t.anthill=this,this.ants.push(t)},i.removeAnt=function(t){var e=this.ants.indexOf(t);e>-1&&(this.ants.splice(e,1),t.removeAnt(),this.antsPool.push(t))},i.step=function(e){t.prototype.step.call(this,e),this.checkTarget(),this.target&&this.ants.length<this.requiredAnts&&(this.spawnTime-=e,this.spawnTime<=0&&(this.spawnTime=1,this.spawnAnt()))},i.onCloseMacroView=function(){},e}(n.default);e.default=h},JC40:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("Uk1t")),h=function(t){function e(e,i){var s;return(s=t.call(this,e)||this).state=i,s.onSelect=new Phaser.Signal,s.isDown=!0,s.asset=s.game.make.spine(0,0,"spine_help_button",!0),s.asset.anchor.set(.5,1),s.addChild(s.asset),s.asset.setAnimationByName(0,"down",!1),s.rootBone=s.asset.skeleton.getRootBone(),s.button=s.game.make.button(0,0,"empty"),s.button.width=80,s.button.height=80,s.button.anchor.set(.5,1),s.addChild(s.button),s.button.events.onInputDown.add(s.handleInputDown,(0,a.default)(s)),s.scaleDef=1,"smartphone"===s.game.deviceMetric.platform.type&&(s.scaleDef=1.2,s.rootBone.scaleX=s.scaleDef,s.rootBone.scaleY=s.scaleDef),s}(0,n.default)(e,t);var i=e.prototype;return i.enable=function(){this.button.input.enabled=!0},i.disable=function(){this.button.input.enabled=!1},i.handleInputDown=function(){this.isDown&&(this.isDown=!1,this.button.visible=!1,this.timeEvent?(this.game.time.events.remove(this.timeEvent),this.timeEvent=null):this.asset.setAnimationByName(0,"go_up",!1),this.onSelect.dispatch())},i.hide=function(){if(!this.isDown&&(this.asset.onComplete.addOnce(this.handleAnimDownComplete,this),this.asset.setAnimationByName(0,"go_down",!1),this.hintData)){this.hintData=null;for(var t=this.hintItems.length,e=0;e<t;e++)this.hintItems[e]&&this.hintItems[e].hide();this.hintItems=null}},i.handleAnimDownComplete=function(){this.isDown=!0,this.button.visible=!0},i.pulse=function(t){void 0===t&&(t=2500),this.asset.setAnimationByName(0,"go_up",!1);var e=1*this.scaleDef,i=1.2*this.scaleDef;this.game.add.tween(this.rootBone).to({scaleX:[i,e,i,e,i,e],scaleY:[i,e,i,e,i,e]},t,null,!0).onComplete.addOnce(this.onCompletePulse,this)},i.onCompletePulse=function(){this.asset.setAnimationByName(0,"go_down",!1)},i.growUp=function(){this.timeEvent?this.game.time.events.remove(this.timeEvent):this.asset.setAnimationByName(0,"go_up2",!1);var t=1*this.scaleDef,e=1.2*this.scaleDef;this.game.add.tween(this.rootBone).to({scaleX:[e,t,e,t,e,t,e,t],scaleY:[e,t,e,t,e,t,e,t]},3e3,null,!0),this.timeEvent=this.game.time.events.add(5e3,this.shrink,this)},i.shrink=function(){this.timeEvent=null,this.state.removeLoopHint(),this.asset.setAnimationByName(0,"go_down2",!1)},i.showExample=function(t,e){this.hintData=t,this.hintItems=[];for(var i=t.items.length,s=3===i?.7:1,a=3===i?0:-20,n=3===i?-45:-60,h=0;h<i;h++){var r=new o.default(this.game,t.items[h],a+n*h,s);r.y=-40,r.show(),this.hintItems.push(r),this.addChildAt(r,0)}t.result&&this.game.time.events.add(.5*e,this.combineItems,this)},i.combineItems=function(){for(var t=this.hintItems.length,e=0;e<t;e++)this.hintItems[e].rotateTo(-45);this.game.time.events.add(250,this.showNewItem,this)},i.showNewItem=function(){for(var t=this.hintItems.length,e=1;e<t;e++)this.hintItems[e].destroy(),this.hintItems[e]=null;this.hintItems[0].showNewItem(this.hintData.result)},e}(Phaser.Group);e.default=h},KNZN:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("3Ss1"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("/hvn")),o=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).state=1,i.isDay=!0,i.objects=[],i.addButton(),i.addMagnifierIcon(),n.state&&"up"===n.state&&(i.state=2,i.log.y=-60,i.magnifierIcon.show()),i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.back=this.game.make.image(47,-22,"roly_poly_log","grass_back"),this.back.anchor.set(.5,1),this.log=this.game.make.image(45,-24,"roly_poly_log","stump"),this.log.anchor.set(.5,1),this.front=this.game.make.image(0,0,"roly_poly_log","grass_front"),this.front.anchor.set(.5,1),this.rolypoly=this.game.make.spine(0,-20,"spine_roly_poly"),this.rolypoly.anchor.set(.5,1),this.rolypoly.setAnimationByName(0,"animation",!0),this.addChild(this.back),this.addChild(this.rolypoly),this.addChild(this.log),this.addChild(this.front)},i.updateBounds=function(){this.bb=this.getBounds(),this.bb.width=300,this.bb.height=160},i.addObject=function(t){-1===this.objects.indexOf(t)&&this.objects.push(t)},i.removeObject=function(t){var e=this.objects.indexOf(t);this.objects.splice(e,1)},i.getTop=function(t){var e=new Phaser.Rectangle,i=this.log.getBounds(),s=this.data.top[0];return e.x=i.x+s.x,e.y=i.y+s.y,e.width=s.w,e.height=s.h,Phaser.Rectangle.intersects(t,e)?{y:e.y,h:s.h,character:s.character}:null},i.getSide=function(t){var e=new Phaser.Rectangle,i=this.log.getBounds(),s=this.data.side[0];return e.x=i.x+s.x,e.y=i.y+s.y,e.width=s.w,e.height=s.h+(2===this.state?36:0),Phaser.Rectangle.intersects(t,e)?{y:e.y,h:e.height}:null},i.setLight=function(t){this.setLight2(t)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.back.tint=this.tintColor,this.front.tint=this.tintColor,this.log.tint=this.tintColor},i.addButton=function(){this.log.inputEnabled=!0,this.log.events.onInputDown.add(this.handleInputDown,this),this.log.input.pixelPerfectClick=!0,this.log.input.pixelPerfectOver=!0,this.log.input.useHandCursor=!0},i.handleInputDown=function(){this.location.state.interacted(this),1===this.state?(this.state=2,this.prevY=this.log.y,this.game.add.tween(this.log).to({y:-60},500,Phaser.Easing.Quadratic.Out,!0).onUpdateCallback(this.updateMove,this),this.magnifierIcon.show()):(this.state=1,this.prevY=this.log.y,this.game.add.tween(this.log).to({y:-24},500,Phaser.Easing.Quadratic.Out,!0).onUpdateCallback(this.updateMove,this),this.magnifierIcon.hide()),this.game.sounds.playSFX("item_log",{spriteID:"sfx"}),this.onChange.dispatch()},i.updateMove=function(){var t=this.log.y-this.prevY;this.prevY=this.log.y;for(var e=0;e<this.objects.length;e++){var i=this.objects[e];i.y+=t,i.dz-=t}},i.onCloseMacroView=function(){this.state=1,this.game.add.tween(this.log).to({y:-24},500,Phaser.Easing.Quadratic.Out,!0),this.magnifierIcon.hide()},i.serialize=function(){var e=t.prototype.serialize.call(this);return e.state=2===this.state?"up":"down",e},e}(n.default);e.default=o},Kcyx:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("9Ft4")),o=s(i("TCUz")),h=s(i("4UFF")),r=s(i("MSjt")),d=s(i("2Hbv")),l=s(i("0BGZ")),u=i("zgbH"),c=i("6YV8"),p=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(){var t=this.game.controller.saves;t.setSaveID("save01"),0===t.getSaves().length&&t.save({data:{}}),this.scrollsNumber=0,this.timeTotal=0,this.timeDay=0,this.timeSector1=0,this.timeSector2=0,this.timeSector3=0,this.game.time.events.add(6e4,this.trackTime,this)},i.create=function(){this.locationData=this.game.cache.getJSON("location_data"),this.savedData=this.game.controller.saves.load("save01"),this.container=this.game.add.group(),this.location=new n.default(this.game,this.locationData,this.locationData.width,this.savedData,this),this.container.addChild(this.location),this.location.onShowMacroView.add(this.handleShowMacroView,this),this.camera=new o.default(this.game,this.location,this),this.camera.setPosition(this.savedData.start_point||this.locationData.start_point),this.camera.onPosition.add(this.handleCameraOnPosition,this),this.navPointId=0,this.calculateNavPoints(),this.location.setCamera(this.camera),this.location.enableControls(),this.hintsController=new d.default(this.game,this.game.cache.getJSON("hints_data"),this.locationData,this.location,this),this.gameHud=new h.default(this.game,this),this.container.addChild(this.gameHud),this.gameHud.onToggleTime.add(this.handleToggleTime,this),this.gameHud.onShowHint.add(this.handleShowHint,this),this.gameHud.onScrollLeft.add(this.handleScrollLeft,this),this.gameHud.onScrollRight.add(this.handleScrollRight,this),this.setArrowsVisibility(),this.savedData.time===u.TIME_NIGHT&&this.gameHud.btnToggleTime.setNight(),this.game.onboarding||(this.game.onboarding=new l.default(this.game,this),this.game.onboarding.start()),this.game.scale.onSizeChange.add(this.handleResize,this)},i.handleResize=function(){this.calculateNavPoints(),this.setCurrentNavPoint()},i.handleScrollLeft=function(){this.setCurrentNavPoint(),this.lockLocation(),this.navPointId>0&&this.navPointId--,this.camera.destX=this.navPoints[this.navPointId],this.gameHud.showScrollArrows(this.navPointId>0,this.navPointId<this.navPoints.length-1)},i.handleScrollRight=function(){this.setCurrentNavPoint(),this.lockLocation(),this.navPointId<this.navPoints.length-1&&this.navPointId++,this.camera.destX=this.navPoints[this.navPointId],this.gameHud.showScrollArrows(this.navPointId>0,this.navPointId<this.navPoints.length-1)},i.setArrowsVisibility=function(){if(!this.gameHud.arrowsLocked){this.setCurrentNavPoint();var t=this.camera.currentX;this.gameHud.showScrollArrows(t>=this.navPoints[0]+5,t<=this.navPoints[this.navPoints.length-1]-5)}},i.handleCameraOnPosition=function(){this.setArrowsVisibility(),this.unlockLocation()},i.lockLocation=function(){if(!this.locationOverlay){this.locationOverlay=this.game.make.image(0,0,"empty"),this.locationOverlay.width=this.game.defaultWidth,this.locationOverlay.height=this.game.defaultHeight,this.locationOverlay.inputEnabled=!0,this.locationOverlay.input.useHandCursor=!1;var t=this.container.getChildIndex(this.location)+1;this.container.addChildAt(this.locationOverlay,t)}this.locationOverlay.visible=!0},i.unlockLocation=function(){this.locationOverlay&&(this.locationOverlay.visible=!1)},i.handleToggleTime=function(t){this.location.setDayTime(t)},i.calculateNavPoints=function(){var t=.5*this.game.width,e=this.locationData.width-.5*this.game.width,i=e-t;if(this.navPoints=[],i<this.game.width)this.navPoints.push(t),this.navPoints.push(e);else for(var s=Math.round(i/this.game.width)+1,a=i/s,n=0;n<s+1;n++)this.navPoints[n]=t+a*n},i.setCurrentNavPoint=function(){var t=this.camera.currentX,e=.5*this.game.width,i=this.locationData.width-.5*this.game.width;if(t<e)this.navPointId=0;else if(t>i)this.navPointId=this.navPoints.length-1;else for(var s=this.navPoints[1]-this.navPoints[0],a=0;a<this.navPoints.length;a++){if(Math.abs(this.navPoints[a]-t)<.5*s){this.navPointId=a;break}}},i.handleShowMacroView=function(t){var e=t.x,i=t.y,s=t.macroView,a=t.furniture,n=t.animInd;this.gameHud.showMacroView({x:e,y:i,macroView:s,furniture:a,animInd:n})},i.handleShowHint=function(){this.loopHintId?(this.hintsController.displayHint(null,null,this.loopHintId),this.removeLoopHint()):this.hintsController.showHint()},i.setLoopHint=function(t){this.loopHintId=t,this.gameHud.btnHelp.growUp()},i.removeLoopHint=function(){this.loopHintId=null},i.showGesture=function(t,e){var i=new r.default(this.game,t,e);return this.location.foreground.addChild(i),i},i.interacted=function(t){this.game.onboarding.completed||this.game.onboarding.interacted(t)},i.scrolled=function(){this.game.onboarding.completed?this.scrollsNumber++:this.game.onboarding.scrolled()},i.update=function(){var t=Math.min(.1,this.game.time.elapsedMS/1e3);this.location.controlsEnabled&&(this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)&&(this.camera.destX-=10),this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)&&(this.camera.destX+=10)),this.location.step(t),this.camera.step(t),!this.gameHud.dragHint&&this.scrollsNumber<2&&this.camera.stopTime>20&&this.gameHud.showDragHint(),this.timeTotal+=t,this.timeDay+=this.location.isDay()?t:0,this.camera.currentX<1800?this.timeSector1+=t:this.camera.currentX>3500?this.timeSector3+=t:this.timeSector2+=t},i.trackTime=function(){this.game.time.events.add(6e4,this.trackTime,this);var t=Math.round(this.timeTotal/60),e=Math.round(100*this.timeDay/this.timeTotal),i=Math.round(100*this.timeSector1/this.timeTotal),s=Math.round(100*this.timeSector2/this.timeTotal),a=100-i-s;(0,c.getGA)().track({action:"dayTime",label:t,value:e}),(0,c.getGA)().track({action:"timeSection1",label:t,value:i}),(0,c.getGA)().track({action:"timeSection2",label:t,value:s}),(0,c.getGA)().track({action:"timeSection3",label:t,value:a})},i.resetCameraTimer=function(){this.camera.stopTime=0},i.shutdown=function(){this.game.sounds.stopAudioSprite("loop",{spriteID:"sfx_location"}),this.location.onShowMacroView.remove(this.handleShowMacroView,this),this.gameHud.onToggleTime.remove(this.handleToggleTime,this),this.gameHud.onShowHint.remove(this.handleShowHint,this),this.gameHud.onScrollLeft.remove(this.handleScrollLeft,this),this.gameHud.onScrollRight.remove(this.handleScrollRight,this),this.camera.onPosition.remove(this.handleCameraOnPosition,this),this.container.destroy(!0),this.container=null},e}(Phaser.State);e.default=p},LClc:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("3huV")),o=s(i("ssJl")),h=function(t){function e(e){var i;return(i=t.call(this,e,{background:"bg_loading"})||this).onAnimationComplete=new Phaser.Signal,i.bee=i.game.make.spine(.5*i.game.defaultWidth,.5*i.game.defaultHeight,"spine_preloader"),i.bee.anchor.set(.5,1),i.bee.setAnimationByName(0,"idle",!0),i.addChild(i.bee),i.loadBar=new o.default(i.game),i.loadBar.x=.5*i.game.defaultWidth-.5*i.loadBar.width,i.loadBar.y=510,i.add(i.loadBar),i}(0,a.default)(e,t);var i=e.prototype;return i.setProgress=function(t){this.loadBar.setProgress(Math.max(0,Math.min(1,t)))},i.setProcessing=function(){this.loadBar.setProcessing()},i.animateCompleteSequence=function(t){var e=t.delay,i=void 0===e?500:e,s=t.duration,a=void 0===s?200:s;this.animateOutTween=this.game.add.tween(this).to({alpha:0},a,Phaser.Easing.Quadratic.Out,!0,i),this.animateOutTween.onComplete.add(this.handleAnimateSequenceComplete,this)},i.handleAnimateSequenceComplete=function(){this.onAnimationComplete.dispatch()},i.destroy=function(){this.onAnimationComplete.removeAll(),this.animateOutTween&&(this.animateOutTween.stop(),this.game.tweens.remove(this.animateOutTween)),this.loadBar.destroy(),this.onAnimationComplete=null,this.animateOutTween=null,this.loadBar=null,t.prototype.destroy.call(this,!0)},e}(n.default);e.default=h},LQVx:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("86MP")),o=s(i("QqF+")),h=i("zgbH"),r=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).startX=2600,i.startY=590,i.locked=!1,i.hitArea=new Phaser.Rectangle(-39,-80,78,80),i.asset=i.game.make.spine(0,0,"spine_bucket",!0),i.asset.anchor.set(.5,1),i.addChild(i.asset),i.rootBone=i.asset.skeleton.getRootBone(),i.asset.setAnimationByName(0,"idle",!1),i}(0,n.default)(e,t);var i=e.prototype;return i.setLight=function(t){var e=h.NIGHT_TINT,i=(e>>16)/255,s=(e>>8&255)/255,a=(255&e)/255;this.asset.skeleton.color.r=i+t*(1-i),this.asset.skeleton.color.g=s+t*(1-s),this.asset.skeleton.color.b=a+t*(1-a)},i.handleInputDown=function(e,i){this.locked||(this.released=!0,t.prototype.handleInputDown.call(this,e,i))},i.handleInputUp=function(){this.locked||(this.released?t.prototype.handleInputUp.call(this):this.released=!0)},i.update=function(){this.asset.update(),t.prototype.update.call(this)},i.step=function(e){if(t.prototype.step.call(this,e),this.drag&&this.pointer&&this.location.campfire.isLit){var i=this.location.campfire.x+80,s=this.location.campfire.y-150,a=this.x-i,n=this.y-s;a<0&&a>-120&&n<120&&n>0&&this.snapToPosition(i,s,300)}},i.snapToPosition=function(t,e,i){this.locked=!0,this.released=!1,this.location.stopDragItem(this),this.drag=!1,this.updateBounds(),this.scale.set(o.SIZE_GROUND),this.pointer=null,this.dz=this.location.campfire.y-e,this.game.add.tween(this).to({x:t,y:e},i,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(this.pourWater,this)},i.pourWater=function(){this.asset.onComplete.addOnce(this.returnToStart,this),this.asset.setAnimationByName(0,"pour",!1),this.game.time.events.add(500,this.extinguish,this)},i.extinguish=function(){this.location.campfire.extinguish()},i.returnToStart=function(){this.asset.setAnimationByName(0,"idle",!1),this.game.add.tween(this).to({x:this.startX,y:this.startY},300,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(this.handleReturn,this)},i.handleReturn=function(){this.locked=!1,this.onChange.dispatch()},i.pulse=function(t){void 0===t&&(t=1500);var e=.8,i=1.3,s=this.game.add.tween(this.rootBone).to({scaleX:[i,e,i,e,i,e,1],scaleY:[e,i,e,i,e,i,1]},t,null),a=this.game.add.tween(this.rootBone).to({scaleX:[i,e,i,e,i,e,1],scaleY:[e,i,e,i,e,i,1]},t,null,!1,200);s.chain(a),s.start()},e}(o.default);e.default=r},LWEJ:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("/hvn")),o=s(i("6/uN")),h=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).waterLevel=1,i.waterDestLevel=1,i.isFrog=!0,i.areas=i.data.areas,i.asset.setMixByName("press","jump_out",.2),i.ambience=i.game.sounds.playSFX("ambience_brook",{spriteID:"sfx",loop:!0,volume:0}).get("ambience_brook"),i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.riverBack=this.game.make.image(464,-417,this.data.key,"river_back"),this.riverBack.anchor.set(.5),this.riverMid=this.game.make.image(76,-342,this.data.key,"rivermid"),this.riverMid.anchor.set(.5),this.rockSide1=this.game.make.image(20,-277,this.data.key,"rockside_1"),this.rockSide1.anchor.set(.5),this.rockSide2=this.game.make.image(115,-267,this.data.key,"rockside_2"),this.rockSide2.anchor.set(.5),this.tinyStone=this.game.make.image(67,-279,this.data.key,"tinystone"),this.tinyStone.anchor.set(.5),this.whole=this.game.make.image(-9,-171,this.data.key,"pond_whole"),this.whole.anchor.set(.5),this.backFlood=this.game.make.image(95,-367,this.data.key,"back_flood"),this.backFlood.anchor.set(.5),this.water=this.game.make.image(16,-145,this.data.key,"water"),this.water.anchor.set(.5),this.waterRock=this.game.make.image(65,-278,this.data.key,"rock_water"),this.waterRock.anchor.set(.5),this.waterFront=this.game.make.image(14,-68,this.data.key,"water_front"),this.waterFront.anchor.set(.5),this.waterFrog=this.game.make.image(303,-31,this.data.key,"water_frog"),this.waterFrog.anchor.set(.5),this.plant=this.game.make.image(141,-309,this.data.key,"plant"),this.plant.anchor.set(.5),this.rocks=this.game.make.image(436,-99,this.data.key,"rocks"),this.rocks.anchor.set(.5),this.asset=this.game.make.spine(0,0,"spine_frog",!0),this.asset.anchor.set(.5,1),this.setAnim("idle"),this.surfaceY=this.waterFront.y-.5*this.waterFront.height,this.containerTop=this.game.make.group(),this.containerTop.y=this.surfaceY,this.containerBtm=this.game.make.group(),this.containerBtm.y=-50,this.addChild(this.riverBack),this.addChild(this.riverMid),this.addChild(this.backFlood),this.addChild(this.rockSide1),this.addChild(this.rockSide2),this.addChild(this.tinyStone),this.addChild(this.waterRock),this.addChild(this.whole),this.addChild(this.water),this.addChild(this.plant),this.backFlood.alpha=0},i.initLayers=function(){this.containerTop.x+=this.x,this.containerTop.y+=this.y,this.containerBtm.x+=this.x,this.containerBtm.y+=this.y,this.waterFront.x+=this.x,this.waterFront.y+=this.y,this.asset.x+=this.x,this.asset.y+=this.y,this.waterFrog.x+=this.x,this.waterFrog.y+=this.y,this.rocks.x+=this.x,this.rocks.y+=this.y,this.containerTop.depth=this.containerTop.y,this.containerBtm.depth=this.containerBtm.y,this.waterFront.depth=this.waterFront.y+.5*this.waterFront.height,this.asset.depth=this.asset.y+5,this.waterFrog.depth=this.waterFrog.y+.5*this.waterFrog.height,this.rocks.depth=this.rocks.y+.5*this.rocks.height,this.parent.addChild(this.containerTop),this.parent.addChild(this.containerBtm),this.parent.addChild(this.waterFront),this.parent.addChild(this.asset),this.parent.addChild(this.waterFrog),this.parent.addChild(this.rocks),isNaN(this.data.water_level)||(this.waterLevel=this.data.water_level,this.displayWaterLevel())},i.addRock=function(t){this.addChildAt(t,this.getChildIndex(this.rockSide1))},i.setLight=function(e){t.prototype.setLight.call(this,e),t.prototype.setLight2.call(this,e)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.riverBack.tint=this.tintColor,this.riverMid.tint=this.tintColor,this.rockSide1.tint=this.tintColor,this.rockSide2.tint=this.tintColor,this.tinyStone.tint=this.tintColor,this.plant.tint=this.tintColor,this.whole.tint=this.tintColor,this.backFlood.tint=this.tintColor,this.water.tint=this.tintColor,this.waterFront.tint=this.tintColor,this.waterFrog.tint=this.tintColor,this.waterRock.tint=this.tintColor,this.rocks.tint=this.tintColor},i.handleInputDown=function(){this.isFrog&&(this.setAnim("press",!1),this.asset.addAnimationByName(0,"idle",!0),this.game.sounds.playSFX("item_frog",{spriteID:"sfx",ignoreIfPlaying:!0}))},i.waterDown=function(){this.waterDestLevel=0},i.waterUp=function(){this.waterDestLevel=1},i.step=function(e){if(t.prototype.step.call(this,e),this.waterLevel!==this.waterDestLevel){var i=this.waterDestLevel>this.waterLevel?1:-1;this.waterLevel+=.3*e*i,(this.waterLevel>1||this.waterLevel<0)&&(this.waterLevel=this.waterDestLevel,this.onChange.dispatch()),this.displayWaterLevel()}if(this.isFrog&&this.waterLevel<.5?(this.isFrog=!1,this.setAnim("jump_out",!1),this.game.sounds.playSFX("item_frog",{spriteID:"sfx"})):!this.isFrog&&this.waterLevel>.5&&(this.isFrog=!0,this.setAnim("jump_in",!1),this.game.sounds.playSFX("item_frog",{spriteID:"sfx"}),this.game.time.events.add(300,this.showHeart,this)),this.ambience){var s=-this.location.x,a=s+this.game.width,n=.5*(a-s),o=.5*(a+s),h=this.x,r=0;r=h<a&&h>s?1-Math.abs(h-o)/n:0,r*=.5+.5*this.waterLevel,this.ambience.volume=r}},i.showHeart=function(){var t=new o.default(this.game,320,-130);this.addChild(t)},i.displayWaterLevel=function(){var t=58*(1-this.waterLevel);this.water.y=-145+t,this.waterFront.y=this.y-68+t,this.waterFrog.y=this.y-31+t,this.waterRock.y=-278+t,this.backFlood.alpha=1-this.waterLevel,this.backFlood.scale.x=1+.14*(1-this.waterLevel),this.backFlood.scale.y=1+.04*(1-this.waterLevel),this.surfaceY=this.waterFront.y-.5*this.waterFront.height,this.containerTop.y=this.surfaceY},i.isItemAbove=function(t){var e=new Phaser.Rectangle;this.areaOver=null;var i=this.areas[0];return e.x=this.x+this.whole.x-.5*this.whole.width+i.x,e.y=0,e.width=i.w,e.height=720,!!Phaser.Rectangle.contains(e,t.x,Math.min(719,t.y))},i.isItemOver=function(t){var e=new Phaser.Rectangle;this.areaOver=null;for(var i=0;i<this.areas.length;i++){var s=this.areas[i];if(e.x=this.x+this.whole.x-.5*this.whole.width+s.x,e.y=this.y-this.whole.height+s.y,e.width=s.w,e.height=s.h,Phaser.Rectangle.contains(e,t.x,Math.min(719,t.y)))return this.areaOver=s,!0}return!1},i.renderAreas=function(){this.debugGR=this.game.make.graphics(0,0),this.location.foreground.addChild(this.debugGR),this.debugGR.beginFill(16711680,.7);for(var t=0;t<this.areas.length;t++){var e=this.areas[t],i=this.x+this.whole.x-.5*this.whole.width+e.x,s=this.y-this.whole.height+e.y,a=e.w,n=e.h;this.debugGR.drawRect(i,s,a,n)}return!1},i.dropItemInto=function(t){if(t.inPond=!0,t.pond=this,t.x=t.x-this.containerTop.x,t.x=Phaser.Math.clamp(t.x,.5*-this.waterFront.width+100,.5*this.waterFront.width-100),t.dz=this.y,t.canFloat()){this.containerTop.addChild(t),t.y=t.y-this.containerTop.y;var e=Math.min(25,.4*t.height);"leaf_boat"===t.id&&(e=5),t.fallDownTo(e),t.startWaving()}else this.containerBtm.addChild(t),t.y=t.y-this.containerBtm.y,t.fallDownTo(0)},i.addInto=function(t){t.canFloat()?(this.containerTop.addChild(t),t.destY=t.y,t.startWaving()):this.containerBtm.addChild(t)},i.dropItemNextTo=function(t){},i.serialize=function(){var e=t.prototype.serialize.call(this);return e.water_level=this.waterLevel,e},e}(n.default);e.default=h},M2um:function(t,e,i){"use strict";i("6WZY"),i("XEfP"),i("LBAN"),Object.defineProperty(e,"__esModule",{value:!0}),e.getPlatform=void 0;var s=/KFONWI|KFMAWI|KFSUWI|KFAUWI|KFDOWI|KFGIWI|KFFOWI|KFMEWI|KFTBWI|KFARWI|KFASWI|KFSAWA|KFSAWI|KFAPWA|KFAPWI|KFSOWI|KFJWA|KFTHWI|KFTHWA|KFJWI|KFTT|KFOT|SD4930UR|Kindle|Kindle Fire/i,a={KFONWI:{gen:10,description:"Fire HD 8, 8+ (10th Gen)"},KFMAWI:{gen:9,description:"Fire HD 10 (9th Gen)"},KFMUWI:{gen:9,description:"Fire 7 (9th Gen)"},KFKAWI:{gen:8,description:"Fire HD 8 (8th Gen)"},KFSUWI:{gen:7,description:"Fire 7 (7th Gen)"},KFAUWI:{gen:7,description:"Fire HD 10 (7th Gen)"},KFDOWI:{gen:7,description:"Fire HD 8 (7th Gen)"},KFGIWI:{gen:6,description:"Fire HD 8 (6th Gen)"},KFTBWI:{gen:5,description:"Fire HD 10 (5th Gen)"},KFMEWI:{gen:5,description:"Fire HD 8 (5th Gen)"},KFFOWI:{gen:5,description:"Fire (5th Gen)"},KFSAWI:{gen:4,description:"Fire HDX 8.9 (4th Gen)"},KFSAWA:{gen:4,description:"Fire HDX 8.9 LTE (4th Gen)"},KFASWI:{gen:4,description:"Fire HD 7 (4th Gen)"},KFARWI:{gen:4,description:"Fire HD 6 (4th Gen)"},KFAPWI:{gen:3,description:"Fire HDX 8.9 (3rd Gen)"},KFAPWA:{gen:3,description:"Fire HDX 8.9 LTE (3rd Gen)"},KFTHWI:{gen:3,description:"Fire HDX 7 (3rd Gen)"},KFTHWA:{gen:3,description:"Fire HDX 7 LTE (3rd Gen)"},KFSOWI:{gen:3,description:"Fire HD 7 (3rd Gen)"},SD4930UR:{gen:1,description:"Fire Phone"}};function n(t){return t.match(/Tablet|Android.*Pixel C|PlayBook|Hudl HT7S3|Hudl 2|Nexus 7/)?"tablet":"smartphone"}e.getPlatform=function(){return function(){var t=window.navigator.platform,e=window.navigator.userAgent,i={type:"unknown",os:"unknown",family:"unknown",version:"unknown"};if(!window.MSStream){var o=e.match(/iPhone|iPod/),h=e.match(/iPad/),r="MacIntel"===t&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;if(o||h||r){var d=navigator.userAgent.match(/Version\/(\d+)\.(\d+)\.?(\d+)?/),l=d&&d[1]?d[1]:"",u=d&&d[2]?d[2]:"",c=d&&d[3]?d[3]:"";return i.os="ios",i.family="ios",i.type=o?"smartphone":"tablet",i.majorVersion=isNaN(parseInt(l))?0:parseInt(l),i.version=l+"."+u+"."+c,i}}var p=e.match(s);if(p){var m=a[p]||{gen:0,description:"unknown"};return i.type="tablet",i.os="fire",i.family="android",i.kindle=m,i}var g=e.match(/(Android)\s+([\d.]+)/);if(g)return i.type=n(e),i.os="android",i.family="android",i.version=g[2],i;if(e.match(/webOS|hpwOS/))return i.type=n(e),i.os="webos",i.family="webos",i;if(e.match(/BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+/))return i.type=n(e),i.os="blackberry",i.family="blackberry",i;var f=e.match(/Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE/),v=e.match(/Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM/);if(f||v)return i.type="smartphone",i.os="windows",i.family="windows",i;var y=e.match(/windows/i),b=e.match(/macintosh/i),w=e.match(/cros/i);return y||b||w?(i.type="desktop",i.os=y?"windows":b?"macintosh":w?"linux":"unknown",i):i}()}},MSjt:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=function(t){function e(e,i,s,a){var n;return(n=t.call(this,e)||this).type=a,n.hand=n.game.make.image(0,0,"hand"),n.hand.anchor.set(1,0),n.hand.x=.5*n.hand.width,n.hand.y=.5*-n.hand.height,n.addChild(n.hand),n.scaleMax=1,"desktop"===n.game.deviceMetric.platform.type&&(n.scaleMax=.5),n.x=i+.3*n.hand.width*n.scaleMax,n.y=s-.4*n.hand.height*n.scaleMax,n}(0,n.default)(e,t);var i=e.prototype;return i.tap=function(){this.scale.set(0),this.alpha=0;var t=this.game.add.tween(this.scale).to({x:this.scaleMax,y:this.scaleMax},250,Phaser.Easing.Quadratic.Out),e=this.game.add.tween(this).to({alpha:1,angle:20},250,Phaser.Easing.Quadratic.Out),i=this.game.add.tween(this.hand).to({angle:-30},200,Phaser.Easing.Quadratic.Out,!1,500),s=this.game.add.tween(this.hand).to({angle:0},200,Phaser.Easing.Quadratic.Out,!1,100);s.onComplete.addOnce(this.hideHand,this),i.chain(s),e.chain(i),t.start(),e.start()},i.slide=function(t){void 0===t&&(t="right"),this.scale.set(0),this.alpha=0;var e=this.game.add.tween(this.scale).to({x:this.scaleMax,y:this.scaleMax},250,Phaser.Easing.Quadratic.Out),i=this.game.add.tween(this).to({alpha:1,angle:20},250,Phaser.Easing.Quadratic.Out),s=this.game.add.tween(this.hand).to({angle:-30},200,Phaser.Easing.Quadratic.Out,!1,500),a=this.game.add.tween(this).to({x:"right"===t?"+100":"-100"},500,Phaser.Easing.Quadratic.Out,!1,100);a.onComplete.addOnce(this.hideHand,this),s.chain(a),i.chain(s),e.start(),i.start()},i.hideHand=function(){this.game.add.tween(this).to({angle:0},250,Phaser.Easing.Quadratic.Out,!0,500),this.game.add.tween(this.scale).to({x:0,y:0},250,Phaser.Easing.Quadratic.Out,!0,500).onComplete.add(this.handleHideEnd,this)},i.handleHideEnd=function(){this.destroy()},(0,a.default)(e,[{key:"depth",get:function(){return this.y+1100}}]),e}(Phaser.Group);e.default=o},P8QU:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=i("QqF+"),o=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).controller,i.pair=null,i.pairTime=0,i.noPairTime=0,i.drag=!1,i.active=!1,i.visible=!1,i.setAnim("fly"),i}(0,a.default)(e,t);var i=e.prototype;return i.canBePaired=function(){return this.active&&!this.pair&&!this.drag&&!this.isExiting&&!this.isEntering&&this.noPairTime<=0},i.setPair=function(t,e){this.pair=t,this.isGuide=e,this.pairTime=5,this.pairInd=0,this.onPlaceInPosition(),this.setAnim("flash")},i.breakPair=function(){this.pair&&(this.setAnim("fly"),this.pair.setAnim("fly"),this.pair.noPairTime=4,this.noPairTime=4,this.pair.pair=null,this.pair=null,this.controller.onBreakPair())},i.setLight=function(){},i.enterLocation=function(){this.isExiting=!1,this.isEntering=!0,this.destY=Phaser.Math.between(100,600),this.active||(this.x=Phaser.Math.between(300,this.location.width-300),this.y=this.destY<360?-30:750),this.active=!0,this.visible=!0,this.onPlaceInPosition()},i.exitLocation=function(){this.breakPair(),this.isExiting=!0,this.isEntering=!1,this.destY=this.y>360?750:-50},i.onPlaceInPosition=function(){this.navPoints={x:[],y:[]},this.dir=Math.random()<.5?-1:1,this.pair&&!this.isGuide&&(this.dir=-this.pair.dir);var t=this.getNextPoint(this.x,this.y,!1,!0);this.navPoints.x.push(t.x),this.navPoints.y.push(t.y),this.navPoints.x.push(this.x),this.navPoints.y.push(this.y),this.dir*=-1;for(var e=0;e<2;e++){var i=this.navPoints.x[this.navPoints.x.length-1],s=this.navPoints.y[this.navPoints.y.length-1],a=this.getNextPoint(i,s,!0,!0);this.navPoints.x.push(a.x),this.navPoints.y.push(a.y)}this.x=this.navPoints.x[1],this.y=this.navPoints.y[1],this.generatePath(this.navPoints.x[1],this.navPoints.y[1]),this.time=.333},i.getNextPoint=function(t,e,i,s){if(void 0===i&&(i=!0),void 0===s&&(s=!1),!this.isEntering&&!this.isExiting&&i&&(!this.pair||this.isGuide)&&Math.random()<.2&&(this.dir*=-1),this.pair&&!this.isGuide){this.dir=this.pair.dir;var a=s?this.navPoints.x.length:3,n=this.pair.navPoints.x[a]+Phaser.Math.between(10,20)*this.dir,o=this.pair.navPoints.y[a]+Phaser.Math.between(10,30)*(this.pairInd%2==0?1:-1);return this.pairInd++,{x:n,y:o}}var h=this.dir*Phaser.Math.between(100,200);this.isEntering||this.isExiting?h=this.dir*Phaser.Math.between(40,60):this.pair&&(h=this.dir*Phaser.Math.between(80,100));var r,d=t+h;if((d<-50||d>this.location.width+50)&&(this.dir*=-1,d=t+(h*=-1)),this.isEntering||this.isExiting){r=e+(e<this.destY?100:-100)}else{var l=Phaser.Math.between(-50,50);this.pair&&(l=Phaser.Math.between(30,70)*(this.pairInd%2==0?-1:1),this.pairInd++),((r=e+l)<20||r>700)&&(r=e+(l*=-1))}return{x:d,y:r}},i.generatePath=function(){this.path=[];for(var t=0;t<=300;t++){var e=Phaser.Math.catmullRomInterpolation(this.navPoints.x,t/300),i=Phaser.Math.catmullRomInterpolation(this.navPoints.y,t/300);this.path.push({x:e,y:i})}},i.generateNextPath=function(){this.navPoints.x.shift(),this.navPoints.y.shift();var t=this.navPoints.x[this.navPoints.x.length-1],e=this.navPoints.y[this.navPoints.y.length-1],i=this.getNextPoint(t,e);this.navPoints.x.push(i.x),this.navPoints.y.push(i.y),this.generatePath(this.navPoints.x[1],this.navPoints.y[1]),this.time=.333},i.handleInputDown=function(t,e){this.isExiting||(this.pointer=e,this.drag=!0,this.isEntering=!1,this.breakPair())},i.handleInputUp=function(){this.drag=!1,this.noPairTime=0,this.onPlaceInPosition()},i.step=function(e){if(this.active)if(t.prototype.step.call(this,e),this.drag&&this.pointer){var i="desktop"===this.game.deviceMetric.platform.type?0:n.SHIFT_UP_MOBILE;this.x=-this.location.x+this.pointer.x,this.y=this.pointer.y+i}else{if(this.time+=e*(this.isExiting||this.pair?.6:.2),this.time<=.666){var s=Math.round(300*this.time),a=this.path[s],o=a.x-this.x;0!==o&&(this.rootBone.scaleX=o>0?-1:1),this.x=a.x,this.y=a.y}else this.generateNextPath();this.pair?(this.pairTime-=e,this.pairTime<=0&&this.breakPair()):this.noPairTime>0?this.noPairTime-=e:this.controller.tryToPair(this),this.isEntering?(this.destY<360&&this.y>=this.destY-5||this.destY>=360&&this.y<=this.destY+5)&&(this.isEntering=!1):this.isExiting&&(this.destY<0&&this.y<=this.destY+5||this.destY>0&&this.y>=this.destY-5)&&(this.active=!1,this.visible=!1)}},i.removeMe=function(){this.active=!1,this.visible=!1},i.serialize=function(){return null},e}(s(i("/hvn")).default);e.default=o},PFbm:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i;return(i=t.call(this,e)||this).onFadeEnd=new Phaser.Signal,i.fade=i.game.add.spine(i.game.defaultWidth/2,i.game.defaultHeight/2,"transition_ring",!0),i.fade.anchor.set(.5,1),i.add(i.fade),i.fade.visible=!1,i}(0,a.default)(e,t);var i=e.prototype;return i.fadeIn=function(){this.game.add.existing(this),this.game.world.bringToTop(this),this.fade.visible=!0,this.fade.setAnimationByName(0,"fade_in",!1),this.update(),this.fade.onComplete.addOnce(this.handleFadeInEnd,this)},i.fadeOut=function(){this.game.add.existing(this),this.game.world.bringToTop(this),this.fade.visible=!0,this.fade.setAnimationByName(0,"fade_out",!1),this.update(),this.updateTransform(),this.fade.onComplete.addOnce(this.handleFadeOutEnd,this)},i.handleFadeInEnd=function(){this.onFadeEnd.dispatch()},i.handleFadeOutEnd=function(){this.fade.visible=!1,this.onFadeEnd.dispatch()},i.destroy=function(){this.fade.destroy(),this.fade=null,t.prototype.destroy.call(this)},e}(s(i("3huV")).default);e.default=n},PmTu:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("/hvn")),o=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).state=1,i.isButterfly=!0,i.asset.setMixByName("1_idle","2_ladybird_appear",.2),i.asset.setMixByName("2_ladybird_appear","3_ladybird_loop",.2),i.asset.setMixByName("3_ladybird_loop","4_ladybird_leave",.2),i.asset.setMixByName("1_idle","5_moth_appear",.2),i.asset.setMixByName("5_moth_appear","6_moth_loop",.2),i.asset.setMixByName("6_moth_loop","7_moth_leave",.2),i.setAnim("1_idle"),i}(0,a.default)(e,t);var i=e.prototype;return i.updateBounds=function(){this.bb=this.getBounds(),this.bb.height=150},i.setDay=function(){3!==this.state||this.isButterfly||this.handleInputDown()},i.setNight=function(){3===this.state&&this.isButterfly&&this.handleInputDown()},i.handleInputDown=function(){1===this.state?(this.state=2,this.asset.onComplete.add(this.handleAnimAppear,this),this.location.isDay()?(this.isButterfly=!0,this.setAnim("2_ladybird_appear",!1)):(this.isButterfly=!1,this.setAnim("5_moth_appear",!1)),this.game.sounds.playSFX("item_flowers",{spriteID:"sfx"})):3===this.state&&(this.state=4,this.asset.onComplete.add(this.handleAnimLeave,this),this.isButterfly?this.setAnim("4_ladybird_leave",!1):this.setAnim("7_moth_leave",!1),this.game.sounds.playSFX("item_flowers",{spriteID:"sfx"}))},i.handleAnimAppear=function(t){0===t.trackIndex&&(this.state=3,this.asset.onComplete.remove(this.handleAnimAppear,this),this.isButterfly?this.location.isDay()?this.setAnim("3_ladybird_loop"):this.handleInputDown():this.location.isDay()?this.handleInputDown():this.setAnim("6_moth_loop"))},i.handleAnimLeave=function(t){0===t.trackIndex&&(this.asset.onComplete.remove(this.handleAnimLeave,this),this.state=1,this.setAnim("1_idle"))},e}(n.default);e.default=o},"QqF+":function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("wiMi"),i("j3Ef"),i("qnda"),i("7EEF"),i("XvIX"),i("mizm"),i("pkSX"),i("3Ipg"),i("9VWb"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SHIFT_UP_DESKTOP=e.SHIFT_UP_MOBILE=e.TAP_TIME=e.SIZE_PICKED=e.SIZE_HAND=e.SIZE_GROUND=void 0;var a=s(i("fKPv")),n=s(i("C9uT")),o=s(i("M1I4")),h=s(i("86MP")),r=i("zgbH");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}e.SIZE_GROUND=.95;e.SIZE_HAND=.8;e.SIZE_PICKED=1.1;e.TAP_TIME=1.2;e.SHIFT_UP_MOBILE=-35;e.SHIFT_UP_DESKTOP=5;var l=function(t){function e(e){var i,s=e.game,n=e.location,h=e.data;(i=t.call(this,s,0,0,"items",h.id)||this).location=n,i.data=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},h),i.id=i.data.id,i.type=i.data.type,i.flags=i.data.flags.concat(),i.spawn=i.data.spawn?i.data.spawn.concat():null,i.stackType=i.data.stack_type,i.lightPower=1,i.updateLights=!0,i.isItem=!0,i.inHand=!1,i.trashed=!1,i.drag=!1,i.dz=0,i.tr=254,i.tg=254,i.tb=254,i.emptyBB={x:0,y:0,width:0,height:0},i.anchor.set(.5,1),i.setScale(.95),i.onDrop=new Phaser.Signal,i.onChange=new Phaser.Signal,(i.hasFlag("move")||i.spawn)&&(i.inputEnabled=!0,i.input.useHandCursor=!0,i.events.onInputDown.add(i.handleInputDown,(0,o.default)(i)),"desktop"===i.game.deviceMetric.platform.type?(i.events.onInputOver.add(i.handleInputOver,(0,o.default)(i)),i.events.onInputOut.add(i.handleInputOut,(0,o.default)(i))):i.events.onInputUp.add(i.handleInputUp,(0,o.default)(i)));var r="desktop"===i.game.deviceMetric.platform.type?45:70;return(i.width<r||i.height<r)&&i.createBiggerHitArea(r),i}(0,h.default)(e,t);var i=e.prototype;return i.init=function(t){if(t&&t.in_hand){this.isFalling=!1;var e=this.location.characters.find((function(e){return e.id===t.in_hand.character}));e.putItemIntoHand(this,"left"===t.in_hand.hand?e.slot1:e.slot2)}t&&(this.inPond=t.in_pond)},i.setScale=function(t){this.scale.set(t)},i.createBiggerHitArea=function(t){this.area=this.game.make.image(0,0,"empty"),this.area.alpha=.2,this.area.width=Math.max(t,this.width),this.area.height=Math.max(t,this.height),this.area.anchor.set(.5,1),this.area.y=.5*(this.area.height-this.height),this.addChild(this.area)},i.hasFlag=function(t){return this.flags.indexOf(t)>=0},i.hasType=function(t){return this.type&&this.type.indexOf(t)>=0},i.updateBounds=function(){this.bb=this.visible?this.getBounds():this.emptyBB},i.getPosForAnts=function(){return this.position},i.canBeTrashed=function(){return!this.trashed&&this.hasFlag("trashable")},i.isRecyclable=function(){if(this.type)for(var t=0;t<this.type.length;t++){var e=this.type[t];if("rubbish_paper"===e||"rubbish_plastic"===e)return!0}return!1},i.canBeHold=function(){return this.hasFlag("hold")},i.canBeEaten=function(){return this.hasFlag("eat")},i.canBeComposted=function(){return!this.trashed&&this.hasFlag("compostable")},i.canFloat=function(){return this.hasFlag("float")},i.canBeStored=function(){return this.hasFlag("storable")},i.isSleepingBag=function(){return this.hasFlag("sleeping_bag")},i.isHat=function(){return this.hasFlag("hat")},i.isFlammable=function(){return this.hasFlag("flammable")},i.isTargetForAnt=function(){return this.hasFlag("ant")&&!this.drag&&!this.inHand&&!this.isFalling},i.getTop=function(t){if(this.data.top)for(var e=new Phaser.Rectangle,i=this.data.top.length,s=0;s<i;s++){var a=this.data.top[s];if(e.x=this.bb.x+a.x,e.y=this.bb.y+a.y,e.width=a.w,e.height=a.h,Phaser.Rectangle.intersects(t,e))return{y:e.y,h:a.h}}return null},i.getSide=function(t){if(this.data.side)for(var e=new Phaser.Rectangle,i=this.data.side.length,s=0;s<i;s++){var a=this.data.side[s];if(e.x=this.bb.x+a.x,e.y=this.bb.y+a.y,e.width=a.w,e.height=a.h,Phaser.Rectangle.intersects(t,e))return{y:e.y,h:a.h}}return null},i.setLight=function(t){var e=r.NIGHT_TINT,i=e>>16,s=e>>8&255,a=255&e;this.tr=i+t*(255-i),this.tg=s+t*(255-s),this.tb=a+t*(255-a),this.updateTint()},i.updateTint=function(t,e,i){var s=(0|this.tr)<<16|(0|this.tg)<<8|(0|this.tb);this.tint=s},i.enable=function(){this.input.enabled=!0},i.disable=function(){this.input.enabled=!1},i.canHover=function(){return this.hasFlag("move")&&!this.drag&&this.spawn&&!this.isBackpack},i.handleInputOver=function(){this.canHover()&&(this.isHover=!0,this.hoverTime=0,this.location.state.gameHud.showHoverGauge(this.worldPosition.x,this.worldPosition.y-.5*this.height))},i.handleInputOut=function(){this.isHover&&(this.isHover=!1,this.location.state.gameHud.hideHoverGauge())},i.handleInputDown=function(t,e){this.handleInputOut(),this.drag?this.handleInputUp():(this.startPos={x:e.x,y:e.y},this.pointer=e,this.hasFlag("move")&&(this.location.state.interacted(this),this.location.startDragItem(this),this.drag=!0,this.dz=0,this.parentObj&&this.parentObj.removeObject(this),this.parentObj=null,this.dragDx=this.x-(e.x-this.location.x),this.dragDy=this.y-e.y,this.parent.bringToTop(this),this.setScale(1.1),this.handleStartDrag()))},i.handleStartDrag=function(){},i.handleInputUp=function(){this.location.stopDragItem(this),this.drag=!1,this.updateBounds(),this.setScale(.95);var t=this.pointer.x-this.startPos.x,e=this.pointer.y-this.startPos.y,i=Math.sqrt(t*t+e*e);this.pointer=null,i<r.TAP_LIMIT&&this.spawn&&"desktop"!==this.game.deviceMetric.platform.type?this.handleTap():this.onDrop.dispatch(this)},i.handleTap=function(){if(this.location.state.interacted(this),this.hasFlag("move")){var t="desktop"===this.game.deviceMetric.platform.type?5:-35;this.y-=t}this.hasFlag("spawn_single")?(this.animateStretch(),this.game.time.events.add(150,this.spawnItem,this,this.x,this.y),this.onDrop.dispatch(this),this.game.sounds.stopAudioSprite("generic_down",{spriteID:"sfx"})):(this.events.onInputDown.remove(this.handleInputDown,this),this.events.onInputUp.remove(this.handleInputUp,this),this.animateShrink(),this.game.time.events.add(150,this.spawnItems,this),this.game.sounds.stopAudioSprite("generic_down",{spriteID:"sfx"}))},i.spawnItems=function(){switch(this.location.spawnItems(this,this.spawn),this.id){case"banana":case"banana_bunch":this.game.sounds.playSFX("item_banana",{spriteID:"sfx"});break;case"pickle_jar":case"peanut_butter":this.game.sounds.playSFX("item_jar",{spriteID:"sfx"});break;case"watermelon":case"bread_loaf":this.game.sounds.playSFX("item_melon",{spriteID:"sfx"});break;case"marshmallow_bag":case"cracker_box":case"chocolate_bar":this.game.sounds.playSFX("item_foodopen",{spriteID:"sfx"});break;case"stick_bundle":this.game.sounds.playSFX("item_sticks",{spriteID:"sfx"});break;case"sleeping_bag_1":case"sleeping_bag_1_open":case"sleeping_bag_2":case"sleeping_bag_2_open":case"sleeping_bag_3":case"sleeping_bag_3_open":this.game.sounds.playSFX("item_sleepingbag",{spriteID:"sfx"})}this.onChange.dispatch()},i.spawnItem=function(t,e){switch(this.location.spawnItem(this,this.items.shift(),t,e),0===this.items.length&&this.onEmpty(),this.id){case"backpack_ari":case"backpack_elinor":case"backpack_olive":this.game.sounds.playSFX("item_combine",{spriteID:"sfx"})}this.onChange.dispatch()},i.drop=function(){this.location.startDragItem(this),this.location.stopDragItem(this),this.onDrop.dispatch(this)},i.onEmpty=function(){this.spawn=null,this.hasFlag("destroy")?this.location.removeItem(this):this.hasFlag("make_movable")&&this.flags.push("move")},i.putInHand=function(t,e){this.inHand=!0,this.character=t;var i=1;this.data.in_hand?(this.anchor.set(this.data.in_hand.anchor.x,this.data.in_hand.anchor.y),this.angle=e?this.data.in_hand.angle_left:this.data.in_hand.angle_right,e&&this.data.in_hand.scale_left&&(i=this.data.in_hand.scale_left)):(this.anchor.set(.5,.75),this.angle=e?-10:10),this.x=0,this.y=0,this.setScale(.8),this.scale.x*=i},i.pickupFromHand=function(){this.anchor.set(.5,1),this.angle=0,this.inHand=!1,this.character.pickupItemFromHand(),this.character=null},i.pickupFromPond=function(){this.inPond=!1,this.pond=null,this.dz=0},i.fallDownTo=function(t){this.destY=t,this.speedY=0,this.isFalling=!0},i.throwOutTo=function(t,e){this.x=t,this.y=e,this.game.add.tween(this).to({x:t+Phaser.Math.between(-20,20),y:e-30},150,Phaser.Easing.Quadratic.Out,!0).onComplete.addOnce(this.handleThrowEnd,this)},i.handleThrowEnd=function(){this.location.setDestinationPosition(this)},i.startWaving=function(){this.isWaving=!0,this.pondTime=0},i.canStack=function(t){return this.stackType===t&&!this.stack&&!this.hasType("stack")&&!this.container},i.hitGround=function(){},i.step=function(t){if(!(this.inPond||this.inHand||this.trashed||this.container||this.stack)){var e=-this.location.x,i=e+this.game.width;this.x-.5*this.width>i||this.x+.5*this.width<e?this.visible=!1:this.visible=!0}if("desktop"===this.game.deviceMetric.platform.type&&this.isHover){this.hoverTime+=t;var s=Math.min(1,this.hoverTime/1.2);this.location.state.gameHud.setHoverValue(s),this.hoverTime>1.2&&(this.handleInputOut(),this.handleTap())}if(this.drag&&this.pointer){this.x=-this.location.x+this.pointer.x,this.x=Phaser.Math.clamp(this.x,50,this.location.width-50);var a="desktop"===this.game.deviceMetric.platform.type?5:-35;this.y=this.pointer.y+a,this.updateLights=!0}else if(this.isFalling)this.speedY+=50*t,this.y+=this.speedY,this.y>this.destY&&(this.y=this.destY,this.isFalling=!1,this.parentObj?(this.dz=this.destDZ,this.destDZ=0):this.dz=0,this.inPond?this.game.sounds.playSFX("item_splash",{spriteID:"sfx"}):this.hitGround(),this.onChange.dispatch());else if(this.inPond&&this.isWaving){this.pondTime+=t;var n=Math.sin(this.pondTime),o=Math.sin(2*this.pondTime);this.y=this.destY+2+2*n,this.angle=2*o}var h,r=this.location.lights.changed;this.updateLights&&(this.location.lights.changed=!0),(h=this.visible?this.location.lights.getLightAt(this.worldPosition.x,this.worldPosition.y-(this.height>>1)):this.location.lights.getLightAt(this.worldPosition.x,this.worldPosition.y-(this.height>>1),!0))>=0&&h!==this.lightPower&&(this.lightPower=h,this.setLight(h)),this.updateLights&&(this.updateLights=!1,this.location.lights.changed=r)},i.animateToPosition=function(t,e,i,s){void 0===i&&(i=500),void 0===s&&(s=!1),s?this.game.add.tween(this).to({x:t},i,Phaser.Easing.Quadratic.Out,!0):this.game.add.tween(this).to({x:t,y:e},i,Phaser.Easing.Quadratic.Out,!0).onComplete.add(this.handleOnPosition,this)},i.handleOnPosition=function(){this.onChange.dispatch(),this.location.setDestinationPosition(this)||this.parentObj&&(this.parentObj.removeObject(this),this.parentObj=null)},i.animateOnCraft=function(){this.game.add.tween(this.scale).to({x:[1.25,.95],y:[1.25,.95]},350,null,!0)},i.animateShrink=function(){this.game.add.tween(this.scale).to({x:0,y:0},150,null,!0).onComplete.add(this.handleShrinkComplete,this)},i.animateSquize=function(){this.game.add.tween(this.scale).to({y:[1.1,.9,1]},500,null,!0)},i.animateStretch=function(){this.game.add.tween(this.scale).to({y:[.9,1.1,1]},500,null,!0)},i.animateGrowUp=function(){this.game.add.tween(this.scale).to({x:.95,y:.95},150,null,!0)},i.handleShrinkComplete=function(){this.location.removeItem(this)},i.pulse=function(t){void 0===t&&(t=1500);var e=.8,i=1.3,s=this.game.add.tween(this.scale).to({x:[i,e,i,e,i,e,1],y:[e,i,e,i,e,i,1]},t,null,!1),a=this.game.add.tween(this.scale).to({x:[i,e,i,e,i,e,1],y:[e,i,e,i,e,i,1]},t,null,!1,200);s.chain(a),s.start()},i.destroy=function(){this.events.onInputDown.remove(this.handleInputDown,this),this.events.onInputUp.remove(this.handleInputUp,this),t.prototype.destroy.call(this)},i.serialize=function(){if(this.container||this.stack)return null;var t={id:this.id,x:this.x,y:this.y};return this.inHand&&(t.in_hand={},t.in_hand.character=this.character.id,t.in_hand.hand=this.parent===this.character.slot1?"left":"right"),t.in_pond=this.inPond,t},(0,n.default)(e,[{key:"depth",get:function(){return this.y+this.dz+(this.drag?2e3:0)}}]),e}(Phaser.Sprite);e.default=l},RZI6:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("/TzG"),i("Rz/f"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.NEW_SAVE=e.ONBOARDING_SAVE=void 0;var a=s(i("fKPv")),n=i("cjcH");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.ONBOARDING_SAVE="ONBOARDING_SAVE";e.NEW_SAVE="NEW_SAVE";var r=function(){function t(){this.storage=(0,n.getLS)(),this.storage.onRead.addOnce(this.handleDataRead,this),this.saveID=null,this.storage.loadData()}var e=t.prototype;return e.handleDataRead=function(){this.saves=this.loadData("saves",{}),this.createSaveCount()},e.createSaveID=function(){return this.incrementSaveCount(),(new Date).getTime()},e.setSaveID=function(t){this.saveID="NEW_SAVE"===t?this.createSaveID():t},e.getSaveID=function(){return this.saveID},e.loadData=function(t,e){void 0===e&&(e={});var i=this.storage.getGameData()[t];return i?JSON.parse(i):e},e.createSaveCount=function(){this.saveCount=this.loadData("savecount",0);var t=JSON.stringify(this.saveCount);this.storage.setGameData("savecount",t)},e.incrementSaveCount=function(){this.saveCount++;var t=JSON.stringify(this.saveCount);this.storage.setGameData("savecount",t)},e.create=function(t){var e=t.saveID;if(!this.hasSave(e)){var i=this.saveCount;this.saves[e]={id:e,version:1.17,saveNumber:i}}return this.saveData(),this.saves[e]},e.load=function(t){var e=t||this.saveID;if(this.hasSave(e))return 1.17!==this.saves[e].version&&window.confirm("Saved data is incompatible due to development changes.\n\nClick OK to delete old saved data and restart")&&(this.deleteSave(e),this.saveID=null,location.reload()),this.saves[e]},e.save=function(t){var e=t.id,i=t.data,s=e||this.saveID;if(s){var a=h(h({},this.saves[s]||this.create({saveID:s})),i);this.saves[s]=a,this.saveData()}},e.renameSave=function(){if(this.saveID){var t=this.createSaveID();this.saves[t]=h({},this.saves[this.saveID]),this.saves[t].id=t,delete this.saves[this.saveID],this.setSaveID(t),this.saveData()}},e.deleteSaves=function(){if(this.playerHasSaves()){for(var t=0,e=Object.keys(this.saves);t<e.length;t++){var i=e[t];this.deleteSave(i)}return!0}return!1},e.deleteSave=function(t){var e=t||this.saveID;this.hasSave(e)&&(delete this.saves[e],this.saveData())},e.hasSave=function(t){return this.saves&&this.saves[t]||!1},e.playerHasSaves=function(){return!!this.saves&&Object.keys(this.saves).length>0},e.getSaves=function(){var t=this;return Object.keys(this.saves).map((function(e){return t.saves[e]}))},e.getSaveNumber=function(){return this.hasSave(this.saveID)?this.saves[this.saveID].saveNumber:this.saveCount},e.getSavesCount=function(){return this.saves?Object.keys(this.saves).length:0},e.hasColourThemeId=function(t){var e=t||this.saveID;return this.hasSave(e)&&this.saves[e].colourThemeId||!1},e.setColourThemeId=function(t){this.save({data:{colourThemeId:t}})},e.getColourThemeId=function(t){var e=t||this.saveID;if(this.hasSave(e))return this.saves[e].colourThemeId},e.saveData=function(){var t=JSON.stringify(this.saves);this.storage.setGameData("saves",t)},e.deserialize=function(t,e,i){var s=e&&e[i]||null;if(s)for(var a=0,n=Object.keys(s);a<n.length;a++){var o=n[a];null===t[o]&&void 0===t[o]||(t[o]=s[o])}},e.serialize=function(t,e,i){var s={};return s[e]=i.reduce((function(e,i){return e[i]=t[i],e}),{}),s},t}();e.default=r},SPpy:function(t,e,i){"use strict";i("j3Ef"),i("7EEF"),i("/TzG"),i("3Ipg"),i("XEfP"),i("ocEJ"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.getGameFileLoadList=e.unloadAssetPack=e.unloadFile=void 0;var s=i("Bx3X"),a=function(t,e){switch(e.type){case"image":t.cache.checkImageKey(e.key)&&t.cache.removeImage(e.key,!0);break;case"text":t.cache.checkTextKey(e.key)&&t.cache.removeText(e.key);break;case"json":t.cache.checkJSONKey(e.key)&&t.cache.removeJSON(e.key);break;case"xml":t.cache.checkXMLKey(e.key)&&t.cache.removeXML(e.key);break;case"binary":t.cache.checkBinaryKey(e.key)&&t.cache.removeBinary(e.key);break;case"spritesheet":t.cache.checkKey(e.key)&&t.cache.removeSpriteSheet(e.key);break;case"video":t.cache.checkVideoKey(e.key)&&t.cache.removeVideo(e.key);break;case"tilemap":t.cache.checkTilemapKey(e.key)&&t.cache.removeTilemap(e.key);break;case"physics":t.cache.checkPhysicsKey(e.key)&&t.cache.removePhysics(e.key);break;case"bitmapFont":t.cache.checkBitmapFontKey(e.key)&&t.cache.removeBitmapFont(e.key);break;case"atlasJSONArray":case"atlasJSONHash":case"atlasXML":case"atlas":case"textureatlas":t.cache.removeTextureAtlas(e.key);break;case"audiosprite":t.sounds.removeAudioSprite({id:e.key});break;case"audio":t.sounds.removeSound(e.key,e.key)}};e.unloadFile=a;e.unloadAssetPack=function(t,e){Object.keys(e).forEach((function(i){e[i].forEach((function(e){a(t,e)}))}))};e.getGameFileLoadList=function(t,e){return t.deviceMetric.category===s.PERFORMANCE_CATEGORY.LOW_END?t.load._fileList.filter((function(t){if("audio"===t.type){var e=t.url.map((function(t){return t.replace("64","32")}));t.url=e}return"packfile"!==t.type})):t.load._fileList.filter((function(t){return"packfile"!==t.type}))}},SfJ3:function(t,e,i){"use strict";i("wiMi"),i("XvIX"),i("3Ss1"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(t,e,i){this.game=t,this.location=e,this.recipes=i,this.onCraft=new Phaser.Signal}var e=t.prototype;return e.checkItems=function(t){t=t.concat();for(var e=0;e<t.length;e++)if("stack"===t[e].id){var i=t.splice(e,1)[0];e--,this.addItemsFromStack(i,t)}for(var s in this.recipes)if(this.recipes.hasOwnProperty(s))for(var a=this.recipes[s],n=0;n<a.length;n++){var o=this.checkRecipe(a[n],t);if(o)return o.id=s,o}return null},e.addItemsFromStack=function(t,e){for(var i=0;i<t.items.length;i++){var s=t.items[i];e.indexOf(s)<0&&e.push(s)}},e.checkRecipe=function(t,e){t=t.concat();for(var i=!1,s=[],a=0;a<e.length;a++){var n=e[a],o=t.indexOf(n.id);o>-1&&(0!==a&&"stack"!==n.id||(i=!0),n.hasFlag("unlimited")||s.push(n),t.splice(o,1))}return 0===t.length&&i?{toRemove:s}:null},t}();e.default=s},TCUz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(t,e){this.game=t,this.scene=e,this.target=null,this.isPanning=!1,this.stopTime=0,this.onPosition=new Phaser.Signal,this.onScroll=new Phaser.Signal}var e=t.prototype;return e.setTarget=function(t){this.target=t},e.step=function(t){var e=200;if(this.isPanning){if(e=50,this.currentX!==this.destX){var i=this.destX-this.currentX,s=i<0?-1:1;i=Math.min(e,Math.abs(i))*s,this.currentX+=i*t*10,this.setCamera(),Math.abs(this.destX-this.currentX)<3&&(this.currentX=this.destX,this.isPanning=!1,this.onPosition.dispatch())}}else if(this.target&&(this.destX=this.target.getDestX()),this.scene.sceneWidth<2e3&&(this.setPosition(872),this.onPosition.dispatch()),this.currentX!==this.destX){var a=this.destX-this.currentX,n=a<0?-1:1;a=Math.min(e,Math.abs(a))*n,this.currentX+=a*Math.min(1,30*t),this.setCamera(),this.onScroll.dispatch(),Math.abs(this.destX-this.currentX)<5&&(this.currentX=this.destX,this.onPosition.dispatch()),this.stopTime=0}else this.stopTime+=t},e.setPosition=function(t){this.destX=this.currentX=t,this.setCamera()},e.setCamera=function(){this.scene.x=.5*this.game.width-this.currentX,this.checkBorders()},e.checkBorders=function(){this.scene.x>0&&(this.scene.x=0,this.currentX=.5*this.game.width,this.destX=this.currentX);var t=this.scene.sceneWidth;this.scene.x+t<this.game.width&&(this.scene.x=this.game.width-t,this.currentX=.5*this.game.width-this.scene.x,this.destX=this.currentX)},e.pan=function(t){this.destX=t,this.isPanning=!0},t}();e.default=s},TPiU:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).isLit=!1,"on"===n.state&&i.lightUp(),i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.lantern=this.game.make.image(0,0,this.data.key,"lantern"),this.lantern.anchor.set(.5,1),this.branch=this.game.make.image(15,-212,this.data.key,"branch"),this.branch.anchor.set(.5),this.candleOff=this.game.make.image(12,-44,this.data.key,"candle_off"),this.candleOff.anchor.set(.5,1),this.candleOn=this.game.make.image(11.5,-44,this.data.key,"candle_on"),this.candleOn.anchor.set(.5,1),this.glow=this.game.make.image(12,-100,this.data.key,"glow"),this.glow.anchor.set(.5),this.scale.x=this.data.scale.x,this.scale.y=this.data.scale.y,this.addChild(this.branch),this.addChild(this.lantern),this.addChild(this.candleOff),this.addChild(this.candleOn),this.addChild(this.glow),this.candleOn.visible=!1,this.glow.alpha=0},i.setNight=function(){this.isLit&&this.game.add.tween(this.glow).to({alpha:1},500,null,!0)},i.setDay=function(){this.game.add.tween(this.glow).to({alpha:this.isLit?.25:0},500,null,!0)},i.setLight=function(t){this.setLight2(t)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.branch.tint=this.tintColor,this.lantern.tint=this.tintColor,this.candleOff.tint=this.tintColor},i.handleInputDown=function(){this.isLit?this.turnOff():this.lightUp(),this.game.sounds.playSFX("item_lantern",{spriteID:"sfx"}),this.onChange.dispatch()},i.lightUp=function(){this.isLit||(this.isLit=!0,this.candleOff.visible=!1,this.candleOn.visible=!0,this.location.isDay()?this.glow.alpha=.25:this.glow.alpha=1)},i.turnOff=function(){this.isLit&&(this.isLit=!1,this.candleOff.visible=!0,this.candleOn.visible=!1,this.glow.alpha=0)},i.serialize=function(){var e=t.prototype.serialize.call(this);return e.state=this.isLit?"on":"off",e},e}(s(i("/hvn")).default);e.default=n},TSJq:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("zgbH"),a=function(){function t(t){this.game=t}var e=t.prototype;return e.getBaseDirectory=function(){return s.PATH_BASE},e.resolveRelatveUrl=function(t){return this.getBaseDirectory()+t},e.getAssetsDirectory=function(t){return t?this.resolveRelatveUrl(s.PATH_ASSETS+t):this.resolveRelatveUrl(s.PATH_ASSETS)},e.getGameAssetsDirectory=function(t,e){return e?this.resolveRelatveUrl(s.PATH_ASSETS+"games/"+t+"/"+e):this.resolveRelatveUrl(s.PATH_ASSETS+"games/"+t+"/")},e.getFontsDirectory=function(t){return this.getAssetsDirectory("fonts/"+t)},e.getLocationBackground=function(t){return"locations/"+t+"/background.jpg"},e.getLocationCreatures=function(t){return"spritesheets/"+t+"/creatures"},e.getCopyXML=function(t){return"locale/"+t+".xml"},e.getResultImage=function(t){return"ui/images/result_"+t+".png"},t}();e.default=a},Uk1t:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("9Rdz")),o=function(t){function e(e,i,s,a){var n;(n=t.call(this,e)||this).size=a,n.circle=n.game.make.image(0,0,"hint_item"),n.circle.anchor.set(.5),n.item=n.game.make.image(0,0,"items",i),n.item.anchor.set(.5);var o=120/n.item.width,h=120/n.item.height,r=Math.min(1,Math.min(o,h));return n.item.scale.set(r),n.circle.addChild(n.item),n.addChild(n.circle),n.angle=s,n.circle.angle=-s,n.circle.scale.set(0),n}(0,a.default)(e,t);var i=e.prototype;return i.show=function(){this.game.add.tween(this.circle).to({y:-150},250,Phaser.Easing.Quadratic.Out,!0),this.game.add.tween(this.circle.scale).to({x:this.size,y:this.size},250,Phaser.Easing.Quadratic.Out,!0)},i.hide=function(){this.game.add.tween(this.circle).to({y:0},250,Phaser.Easing.Quadratic.In,!0),this.game.add.tween(this.circle.scale).to({x:0,y:0},250,Phaser.Easing.Quadratic.In,!0).onComplete.add(this.destroy,this)},i.rotateTo=function(t){this.game.add.tween(this).to({angle:t},250,Phaser.Easing.Quadratic.Out,!0),this.game.add.tween(this.circle).to({angle:-t},250,Phaser.Easing.Quadratic.Out,!0)},i.showNewItem=function(t){this.item.visible=!1,this.item2=this.game.make.image(0,0,"items",t),this.item2.anchor.set(.5);var e=120/this.item2.width,i=120/this.item2.height,s=Math.min(1,Math.min(e,i));this.item2.destScale=s,this.item2.scale.set(s),this.circle.addChild(this.item2);this.cloud=new n.default(this.game,0,0,.6),this.circle.addChild(this.cloud)},i.update=function(){t.prototype.update.call(this),this.cloud&&this.cloud.update()},e}(Phaser.Group);e.default=o},"V2+/":function(t,e,i){"use strict";var s=i("R6lU");i("YY9M"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("dD3M")),h=function(t){function e(e){var i,s=e.game,n=e.macroView,h=e.x,r=e.y,d=e.furniture,l=e.animInd;return(i=t.call(this,s)||this).macroView=n,i.furniture=d,i.animInd=l,i.onClose=new Phaser.Signal,i.bg=i.game.make.graphics(),i.bg.beginFill(0,.7),i.bg.drawRect(0,0,i.game.defaultWidth,i.game.defaultHeight),i.bg.endFill(),i.bg.inputEnabled=!0,i.bg.input.useHandCursor=!1,i.bg.alpha=0,i.addChild(i.bg),i.btnBack=new o.default({game:i.game,up:"btn_back",over:"btn_back"}),i.btnBack.x=60,i.btnBack.y=60,i.addChild(i.btnBack),i.createMagnifier({x:h,y:r,macroView:n}),i.game.add.tween(i.bg).to({alpha:1},300,null,!0),i.game.add.tween(i.container.scale).to({x:1,y:1},300,Phaser.Easing.Quadratic.Out,!0),i.game.add.tween(i.container).to({x:i.game.width/2,y:i.game.height/2},300,Phaser.Easing.Quadratic.Out,!0),i.game.add.tween(i.rootBone).to({scaleX:1,scaleY:1},300,Phaser.Easing.Quadratic.Out,!0).onComplete.add(i.onShow,(0,a.default)(i)),i.game.sounds.playSFX("generic_reveal",{spriteID:"sfx"}),i.game.time.events.add(300,i.playSfx,(0,a.default)(i)),i}(0,n.default)(e,t);var i=e.prototype;return i.onShow=function(){this.btnBack.onInputDown.add(this.handleBtnBack,this),this.bg.events.onInputDown.add(this.handleBtnBack,this)},i.createMagnifier=function(t){var e=t.x,i=t.y,s=t.macroView;this.container=this.game.make.group(),this.container.x=e,this.container.y=i,this.container.scale.set(.16),this.addChild(this.container),this.magnifier=this.game.make.image(0,0,"magnifier"),this.magnifier.anchor.set(.39,.385),this.magnifier.inputEnabled=!0,this.magnifier.input.pixelPerfectAlpha=10,this.magnifier.input.pixelPerfectClick=!0,this.container.addChild(this.magnifier),this.content=this.game.make.spine(0,0,s.contentId,!0),this.content.anchor.set(.5,1),this.content.setAnimationByName(0,s.animNames[this.animInd],!0),this.container.addChildAt(this.content,0),this.rootBone=this.content.skeleton.getRootBone(),this.rootBone.scaleX=.16,this.rootBone.scaleY=.16},i.playSfx=function(){this.macroView.audio&&this.game.sounds.playSFX(this.macroView.audio,{spriteID:"sfx",loop:!0}),this.content.onEvent.add(this.handleAudioEvent,this)},i.handleAudioEvent=function(t,e){this.game.sounds.playSFX(e.data.name,{spriteID:"sfx"})},i.handleBtnBack=function(){this.furniture.onCloseMacroView(),this.onClose.dispatch()},i.positionElements=function(){this.container.x=this.game.width/2,this.container.y=this.game.height/2},i.destroy=function(){this.content.onEvent.remove(this.handleAudioEvent,this),this.macroView.audio&&this.game.sounds.stopAudioSprite(this.macroView.audio,{spriteID:"sfx"}),t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=h},VawD:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("86MP")),o=a(i("01M/")),h=a(i("fY54")),r=i("zgbH"),d=i("5mNR"),l=i("mQkb"),u=s(i("zgbH")),c=function(t){function e(){return t.apply(this,arguments)||this}(0,n.default)(e,t);var i=e.prototype;return i.init=function(){},i.preload=function(){this.fontsReady=!1,this.loadComplete=!1,this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.crossOrigin="anonymous",this.game.load.pack("boot","assetpack.json",null,this),o.default.load({custom:{families:[r.FONT_COPY,r.FONT_SUBTITLE,r.FONT_REGULAR,r.FONT_ITALIC,r.FONT_EXTRA_BOLD,r.FONT_BOLD,r.FONT_BOLD_ITALIC,r.FONT_LIGHT],urls:[this.game.urls.getFontsDirectory(r.FONT_CSS)]},active:this.fontsLoaded.bind(this),inactive:this.fontsLoaded.bind(this)}),this.game.springRollScaleManagerPlugin=this.game.plugins.add(new l.ScaleManagerPlugin(this.game,this.game.plugins,{width:u.GAME_WIDTH_DEFAULT,height:u.GAME_HEIGHT_DEFAULT,safeWidth:u.GAME_SAFE_WIDTH,safeHeight:u.GAME_SAFE_HEIGHT})),Phaser.Loader.prototype.processPack=function(t){var e=t.data[t.key];if(e)for(var i=0;i<e.length;i++){var s=e[i];switch(s.type){case"image":this.image(s.key,s.url,s.overwrite);break;case"text":this.text(s.key,s.url,s.overwrite);break;case"json":this.json(s.key,s.url,s.overwrite);break;case"xml":this.xml(s.key,s.url,s.overwrite);break;case"script":this.script(s.key,s.url,s.callback,t.callbackContext||this);break;case"binary":this.binary(s.key,s.url,s.callback,t.callbackContext||this);break;case"spritesheet":this.spritesheet(s.key,s.url,s.frameWidth,s.frameHeight,s.frameMax,s.margin,s.spacing,s.skipFrames);break;case"video":this.video(s.key,s.urls);break;case"audio":this.audio(s.key,s.urls,s.autoDecode);break;case"audiosprite":this.audiosprite(s.key,s.urls,s.jsonURL,s.jsonData,s.autoDecode);break;case"tilemap":this.tilemap(s.key,s.url,s.data,Phaser.Tilemap[s.format]);break;case"physics":this.physics(s.key,s.url,s.data,Phaser.Loader[s.format]);break;case"bitmapFont":this.bitmapFont(s.key,s.textureURL,s.atlasURL,s.atlasData,s.xSpacing,s.ySpacing);break;case"atlasJSONArray":this.atlasJSONArray(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlasJSONHash":this.atlasJSONHash(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlasXML":this.atlasXML(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlas":this.atlas(s.key,s.textureURL,s.atlasURL,s.atlasData,Phaser.Loader[s.format]);break;case"shader":this.shader(s.key,s.url,s.overwrite);break;case"spine":this.spine(s.key,s.url)}}},PhaserSpine.Spine.prototype.update=function(){this.state.update(this.game.time.elapsed/1e3),this.state.apply(this.skeleton),this.skeleton.color.a=this.worldAlpha,this.skeleton.updateWorldTransform()},this.game.add.plugin(PhaserSpine.SpinePlugin,{triangleRendering:!0,debugRendering:!1})},i.fontsLoaded=function(){this.fontsReady=!0},i.create=function(){this.game.copy=new h.default(this.game,this.game.cache.getXML("copy_xml")),this.game.isTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,this.loadComplete=!0},i.update=function(){this.checkLoading()},i.checkLoading=function(){this.loadComplete&&this.fontsReady&&this.game.state.start(d.STATE_LOAD,!0,!1)},e}(Phaser.State);e.default=c},VomV:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("/hvn")),o=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).state=1,i.isButterfly=!0,i.asset.setMixByName("1_idle","2_butterfly_appear",.2),i.asset.setMixByName("2_butterfly_appear","3_butterfly_loop",.2),i.asset.setMixByName("3_butterfly_loop","4_butterfly_leave",.2),i.asset.setMixByName("1_idle","5_moth_appear",.2),i.asset.setMixByName("5_moth_appear","6_moth_loop",.2),i.asset.setMixByName("6_moth_loop","7_moth_leave",.2),i.setAnim("1_idle"),i}(0,a.default)(e,t);var i=e.prototype;return i.updateBounds=function(){this.bb=this.getBounds(),this.bb.height=150},i.setDay=function(){3!==this.state||this.isButterfly||this.handleInputDown()},i.setNight=function(){3===this.state&&this.isButterfly&&this.handleInputDown()},i.handleInputDown=function(){1===this.state?(this.state=2,this.asset.onComplete.add(this.handleAnimAppear,this),this.location.isDay()?(this.isButterfly=!0,this.setAnim("2_butterfly_appear",!1)):(this.isButterfly=!1,this.setAnim("5_moth_appear",!1)),this.game.sounds.playSFX("item_flowers",{spriteID:"sfx"})):3===this.state&&(this.state=4,this.asset.onComplete.add(this.handleAnimLeave,this),this.isButterfly?this.setAnim("4_butterfly_leave",!1):this.setAnim("7_moth_leave",!1),this.game.sounds.playSFX("item_flowers",{spriteID:"sfx"}))},i.handleAnimAppear=function(t){0===t.trackIndex&&(this.state=3,this.asset.onComplete.remove(this.handleAnimAppear,this),this.isButterfly?this.location.isDay()?this.setAnim("3_butterfly_loop"):this.handleInputDown():this.location.isDay()?this.handleInputDown():this.setAnim("6_moth_loop"))},i.handleAnimLeave=function(t){0===t.trackIndex&&(this.asset.onComplete.remove(this.handleAnimLeave,this),this.state=1,this.setAnim("1_idle"))},e}(n.default);e.default=o},WtpM:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("3huV")),o=s(i("dD3M")),h=i("6YV8"),r=s(i("E2Eq")),d=s(i("1kbJ")),l=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(){},i.preload=function(){},i.create=function(){this.container=new n.default(this.game),this.intro=new d.default(this.game,this.game.controller.introDisplayed),this.intro.x=.5*this.game.defaultWidth,this.intro.y=.5*this.game.defaultHeight,this.container.addChild(this.intro),this.logo=this.game.make.image(.5*this.game.defaultWidth,160,"logo_game"),this.logo.anchor.set(.5),this.container.addChild(this.logo),this.logo.visible=!1,this.btnStart=new o.default({game:this.game,up:"btn_start",over:"btn_start"}),this.btnStart.position.set(.5*this.game.defaultWidth,425),this.btnStart.onInputUp.add(this.handleBtnStart,this),this.container.addChild(this.btnStart),this.btnStart.visible=!1,this.curtain=new r.default(this.game,.5*this.game.defaultWidth,.5*this.game.defaultHeight),this.container.addChild(this.curtain),this.curtain.onComplete.addOnce(this.handleCurtainComplete,this),this.game.sounds.setBackgroundMusic("music_title",!0),this.game.sounds.playBackgroundMusic(),this.game.controller.introDisplayed&&this.handleCurtainComplete()},i.handleCurtainComplete=function(){this.curtain.visible=!1,this.logo.visible=!0,this.logo.scale.set(0),this.game.add.tween(this.logo.scale).to({x:1,y:1},500,Phaser.Easing.Back.Out,!0,100),this.btnStart.visible=!0,this.btnStart.scale.set(0),this.game.add.tween(this.btnStart.scale).to({x:1,y:1},500,Phaser.Easing.Back.Out,!0,200),this.intro.playAnim(),this.game.controller.introDisplayed=!0,this.game.sounds.checkAudioContext()},i.handleBtnStart=function(){(0,h.getGA)().track({action:"clickPlay"}),this.btnStart.onInputUp.remove(this.handleBtnStart,this),this.game.controller.startGame()},i.shutdown=function(){this.game.sounds.stopBackgroundMusic(),this.game.sounds.clearBackgroundMusic(),this.container.destroy(!0),this.container=null},e}(Phaser.State);e.default=l},XZAb:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("3Ss1"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("/hvn")),o=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).state=1,i.objects=[],i.addButton(),i.data.rock_x&&(i.rock.x=i.data.rock_x,i.rock.x<120?(i.state=1,i.location.pond.waterUp()):(i.state=2,i.location.pond.waterDown())),i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.rock=this.game.make.image(0,-5,"pond","rockslide"),this.rock.anchor.set(.5,1),this.addChild(this.rock)},i.updateBounds=function(){this.bb=this.rock.getBounds()},i.addObject=function(t){-1===this.objects.indexOf(t)&&this.objects.push(t)},i.removeObject=function(t){var e=this.objects.indexOf(t);this.objects.splice(e,1)},i.getTop=function(t){var e=new Phaser.Rectangle,i=this.rock.getBounds(),s=this.data.top[0];if(e.x=i.x+s.x,e.y=i.y+s.y,e.width=s.w,e.height=s.h,Phaser.Rectangle.intersects(t,e))return{y:e.y,h:s.h,character:s.character}},i.getSide=function(t){var e=new Phaser.Rectangle,i=this.rock.getBounds(),s=this.data.side[0];return e.x=i.x+s.x,e.y=i.y+s.y,e.width=s.w,e.height=s.h,Phaser.Rectangle.intersects(t,e)?{y:e.y,h:s.h}:null},i.setLight=function(e){t.prototype.setLight2.call(this,e)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.rock.tint=this.tintColor},i.addButton=function(){this.rock.inputEnabled=!0,this.rock.input.useHandCursor=!0,this.rock.events.onInputDown.add(this.handleInputDown,this),this.rock.events.onInputUp.add(this.handleInputUp,this)},i.handleInputDown=function(t,e){if("desktop"===this.game.deviceMetric.platform.type){if(1===this.state){this.state=2,this.prevX=this.rock.x;var i=this.game.add.tween(this.rock).to({x:140},500,Phaser.Easing.Quadratic.Out,!0);i.onUpdateCallback(this.updateMove,this),i.onComplete.add(this.onMoveRight,this)}else{this.state=1,this.prevX=this.rock.x;var s=this.game.add.tween(this.rock).to({x:0},500,Phaser.Easing.Quadratic.Out,!0);s.onUpdateCallback(this.updateMove,this),s.onComplete.add(this.onMoveLeft,this)}this.audio=this.game.sounds.playSFX("item_rock",{spriteID:"sfx"})}else this.startPos={x:this.rock.x,y:this.rock.y},this.drag=!0,this.dragDx=this.rock.x-(e.x-this.location.x-this.x),this.pointer=e,this.audio=this.game.sounds.playSFX("item_rock",{spriteID:"sfx",loop:!0}).get("item_rock"),this.audio.volume=0},i.updateMove=function(){var t=this.rock.x-this.prevX;this.prevX=this.rock.x,this.moveObjectsBy(t)},i.onMoveRight=function(){this.game.sounds.stopAudioSprite("item_rock",{spriteID:"sfx"}),this.audio=null,this.location.pond.waterDown(),this.onChange.dispatch()},i.onMoveLeft=function(){this.game.sounds.stopAudioSprite("item_rock",{spriteID:"sfx"}),this.audio=null,this.location.pond.waterUp(),this.onChange.dispatch(),this.location.state.setLoopHint(this.data.hint)},i.handleInputUp=function(){"desktop"!==this.game.deviceMetric.platform.type&&(this.drag=!1,this.pointer=null,this.game.sounds.stopAudioSprite("item_rock",{spriteID:"sfx"}),this.audio=null,this.onChange.dispatch(),this.rock.x<120&&this.location.state.setLoopHint(this.data.hint))},i.step=function(t){var e=this.location.lights.getLightAt(this.rock.worldPosition.x,this.rock.worldPosition.y-(this.rock.height>>1),!this.data.flashlight);if(e>=0&&e!==this.lightPower&&(this.lightPower=e,this.setLight(e)),this.drag&&this.pointer){var i=-this.location.x+this.pointer.x-this.x+this.dragDx,s=(i=Phaser.Math.clamp(i,0,140))-this.rock.x;this.rock.x=i,this.moveObjectsBy(s),i<120?this.location.pond.waterUp():this.location.pond.waterDown(),this.audio.volume=Math.min(1,Math.abs(s)/2)}},i.moveObjectsBy=function(t){for(var e=0;e<this.objects.length;e++){this.objects[e].x+=t}},i.pulse=function(t){void 0===t&&(t=1500),this.game.add.tween(this.rock.scale).to({x:[1.2,1,1.2,1,1.2,1],y:[1.2,1,1.2,1,1.2,1]},t,null,!0)},i.destroy=function(){this.rock.events.onInputDown.remove(this.handleInputDown,this),t.prototype.destroy.call(this)},i.serialize=function(){var e=t.prototype.serialize.call(this);return e.rock_x=this.rock.x,e},e}(n.default);e.default=o},XpOn:function(t,e,i){"use strict";var s=i("R6lU");i("YY9M"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("/hvn")),h=s(i("6/uN")),r=function(t){function e(e){var i,s=e.game,n=e.location,o=e.data;return(i=t.call(this,{game:s,location:n,data:o})||this).state=1,i.bb=new Phaser.Rectangle,i.dropArea=new Phaser.Rectangle(i.data.drop_area.x,i.data.drop_area.y,i.data.drop_area.w,i.data.drop_area.h),i.container=i.game.make.group(),i.container.y=-215,i.addChildAt(i.container,0),i.back=i.game.make.image(0,-25,"furnitures","composter_back"),i.back.anchor.set(.5,1),i.addChildAt(i.back,0),i.asset.setMixByName("idle","tweet",.2),i.asset.setMixByName("idle","action",.2),i.asset.setMixByName("tweet","action",.2),i.asset.setMixByName("idle","fly_away",.2),i.asset.setMixByName("fly_back","idle",.2),i.asset.onEvent.add(i.handleAudioEvent,(0,a.default)(i)),i.setAnim("idle"),i}(0,n.default)(e,t);var i=e.prototype;return i.updateBounds=function(){this.bb.x=this.worldPosition.x+this.data.bounding_box.x,this.bb.y=this.worldPosition.y+this.data.bounding_box.y,this.bb.width=this.data.bounding_box.w,this.bb.height=this.data.bounding_box.h},i.setNight=function(){1===this.state&&(this.state=4,this.setAnim("fly_away",!1))},i.setDay=function(){4===this.state&&(this.state=5,this.setAnim("fly_back",!1),this.asset.onComplete.addOnce(this.handelFlyBackEnd,this))},i.setLight=function(e){t.prototype.setLight.call(this,e),t.prototype.setLight2.call(this,e)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.back.tint=this.tintColor,this.container.tint=this.tintColor},i.canPutItemInto=function(t){if(this.visible){var e=new Phaser.Rectangle(this.bb.x+this.dropArea.x,this.bb.y+this.dropArea.y,this.dropArea.width,this.dropArea.height),i=t.bb;if(Phaser.Rectangle.intersects(e,i))return!0}return!1},i.putItemInto=function(t){t.trashed=!0,t.disable(),t.x=0,t.y=0,this.container.addChild(t),this.game.add.tween(t).to({y:30,alpha:0},500,null,!0,300).onComplete.add(this.handleSinkAnimEnd,this),this.game.sounds.stopAudioSprite("generic_down",{spriteID:"sfx"}),this.game.sounds.playSFX("item_compost",{spriteID:"sfx"}),this.location.state.setLoopHint(this.data.hint)},i.handleSinkAnimEnd=function(t){this.location.removeItem(t),3!==this.state&&this.location.isDay()&&(this.state=3,this.asset.onComplete.addOnce(this.handelWormAnimEnd,this),this.setAnim("action",!1))},i.handelWormAnimEnd=function(){this.location.isDay()?(this.state=5,this.setAnim("fly_back",!1),this.asset.onComplete.addOnce(this.handelFlyBackEnd,this)):this.state=4},i.handelFlyBackEnd=function(){this.location.isDay()?(this.state=1,this.setAnim("idle")):(this.state=4,this.setAnim("fly_away",!1))},i.handleInputDown=function(){1===this.state&&(this.state=2,this.asset.onComplete.addOnce(this.handelTweetAnimEnd,this),this.setAnim("tweet",!1),this.game.sounds.playSFX("item_robin",{spriteID:"sfx"}))},i.handelTweetAnimEnd=function(){this.handelFlyBackEnd()},i.handleAudioEvent=function(t,e){if(this.game.sounds.playSFX(e.data.name,{spriteID:"sfx"}),"item_eatworm"===e.data.name){var i=new h.default(this.game,20,-220);this.addChild(i)}},i.pulse=function(t){void 0===t&&(t=1500),this.game.add.tween(this.back.scale).to({x:[1.1,1,1.1,1,1.1,1],y:[1.1,1,1.1,1,1.1,1]},t,null,!0),this.game.add.tween(this.rootBone).to({scaleX:[1.1,1,1.1,1,1.1,1],scaleY:[1.1,1,1.1,1,1.1,1]},t,null,!0)},e}(o.default);e.default=r},ZBt7:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SPEED=void 0;var a=s(i("86MP")),n=s(i("/hvn"));e.SPEED=50;var o=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).setAnim("walk"),i.anthill,i.homeX=i.x,i.homeY=i.y,i.entranceX=i.x-45,i.entranceY=i.y,i.bb=new Phaser.Rectangle(0,0,30,30),i}(0,a.default)(e,t);var i=e.prototype;return i.init=function(t,e){this.active=!0,this.visible=!0,this.goHome=!1,this.isFull=!1,this.inCorridor=!0,this.x=t,this.y=e,this.dz=0,this.asset.rotation=0,this.rootBone.scaleX=1,this.setSkin("normal")},i.setSkin=function(t){var e=this.rootBone.scaleX,i=this.rootBone.scaleY;this.asset.setSkinByName(t),this.asset.setToSetupPose(),this.rootBone.scaleX=e,this.rootBone.scaleY=i},i.setTarget=function(t,e,i,s){if(void 0===i&&(i=null),void 0===s&&(s=!1),!this.isFull){this.targetX=t,this.targetY=e,this.targetItem=i;var a=t-this.x,n=e-this.y;this.walkAngle=Math.atan2(n,a),Math.abs(this.walkAngle)>Math.PI/2?(this.destRotation=(this.walkAngle<0?-Math.PI:Math.PI)-this.walkAngle,s&&(this.asset.rotation=this.destRotation),this.rootBone.scaleX=1):(this.destRotation=-this.walkAngle,s&&(this.asset.rotation=this.destRotation),this.rootBone.scaleX=-1)}},i.step=function(e){if(this.active)if(t.prototype.step.call(this,e),this.asset.rotation+=.1*(this.destRotation-this.asset.rotation),this.inCorridor)this.isFull?(this.rootBone.scaleX=-1,this.x+=50*e,this.x>this.homeX&&this.anthill.removeAnt(this)):(this.asset.rotation=0,this.rootBone.scaleX=1,this.x-=50*e,this.x<this.entranceX&&(this.inCorridor=!1,this.setTarget(this.targetX,this.targetY,this.targetItem)));else{this.x+=50*e*Math.cos(this.walkAngle),this.y+=50*e*Math.sin(this.walkAngle),this.dz=0,this.targetItem&&(this.targetItem.drag||!this.targetItem.parent?this.targetItem=null:(this.bb.x=this.x+this.location.x-.5*this.bb.width,this.bb.y=this.y-.5*this.bb.height,this.targetItem.updateBounds(),Phaser.Rectangle.intersects(this.bb,this.targetItem.bb)&&(this.dz=this.targetItem.bb.height+8)));var i=this.targetX-this.x,s=this.targetY-this.y;Math.sqrt(i*i+s*s)<5&&(this.isFull?this.goHome&&(this.inCorridor=!0,this.destRotation=0):(this.returnHome(),this.isFull=!0,this.setSkin("food")))}},i.returnHome=function(){this.setTarget(this.entranceX,this.entranceY,this.targetItem,!0),this.goHome=!0},i.removeAnt=function(){this.active=!1,this.visible=!1},i.serialize=function(){return null},e}(n.default);e.default=o},a2Oa:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("/hvn")),o=s(i("6/uN")),h=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).isBin=!0,i.type=i.data.type,i.dropArea=i.data.drop_area,i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.asset=this.game.make.image(0,0,this.data.key,this.id),this.asset.anchor.set(.5,1),this.addChild(this.asset)},i.setLight=function(t){this.setLight2(t)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.asset.tint=this.tintColor},i.canPutItemIntoBin=function(t){if(this.visible){var e=new Phaser.Rectangle(this.bb.x,this.bb.y,this.dropArea.w,this.dropArea.h),i=t.bb;if(Phaser.Rectangle.intersects(e,i))return!0}return!1},i.putItemIntoBin=function(t){if(this.game.add.tween(this.scale).to({x:[1.1,.9,1],y:[.9,1.1,1]},500,Phaser.Easing.Quadratic.Out,!0),"recycle"===this.type&&t.isRecyclable()){var e=new o.default(this.game,0,-this.asset.height);this.addChild(e)}t.canBeTrashed()?(t.trashed=!0,t.disable(),t.x=0,t.y=-this.height,this.addChild(t),this.location.removeItem(t)):(t.alpha=0,this.game.time.events.add(500,this.throwOutItem,this,t)),this.game.sounds.playSFX("item_bin",{spriteID:"sfx"}),this.location.state.setLoopHint(this.data.hint)},i.pulse=function(t){void 0===t&&(t=1500),this.game.add.tween(this.asset.scale).to({x:[1.2,1,1.2,1,1.2,1],y:[1.2,1,1.2,1,1.2,1]},t,null,!0)},i.throwOutItem=function(t){this.game.add.tween(this.scale).to({x:[1.1,.9,1],y:[.9,1.1,1]},500,Phaser.Easing.Quadratic.Out,!0),this.game.time.events.add(250,this.throwOutItem2,this,t)},i.throwOutItem2=function(t){t.visible=!0,t.alpha=1,t.throwOutTo(this.x,this.y-this.height+10)},e}(n.default);e.default=h},aMZi:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("M1I4")),o=a(i("86MP")),h=i("zgbH"),r=s(i("QqF+")),d=function(t){function e(e){var i,s=e.game,a=e.location,o=e.data;return"desktop"===(i=t.call(this,{game:s,location:a,data:o})||this).game.deviceMetric.platform.type&&i.events.onInputUp.add(i.handleInputUp,(0,n.default)(i)),i}return(0,o.default)(e,t),e.prototype.handleInputUp=function(){this.location.stopDragItem(this),this.drag=!1,this.updateBounds(),this.setScale(r.SIZE_GROUND);var t=this.pointer.x-this.startPos.x,e=this.pointer.y-this.startPos.y,i=Math.sqrt(t*t+e*e);this.pointer=null,i<h.TAP_LIMIT?this.handleTap():this.onDrop.dispatch(this)},e}(r.default);e.default=d},cjcH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLS=function(){return new n};var s=i("TEuq"),a=null,n=function(){function t(){return a||(a=this,this.useSpringroll=!1,this.onRead=new Phaser.Signal,a)}var e=t.prototype;return e.isSupported=function(){return"undefined"!=typeof Storage},e.parseData=function(t){try{return JSON.parse(t)}catch(t){}},e.handleLoadSuccess=function(t){if(this.useSpringroll=!0,this.data=t,!this.data){var e=window.localStorage.getItem("pbs_campout");e?(this.data=this.parseData(e),s.UserData.write("pbs_campout",this.data).then((function(){}))):this.data={}}this.onRead.dispatch()},e.handleLoadFail=function(t){var e=window.localStorage.getItem("pbs_campout");this.data=this.parseData(e)||{},this.onRead.dispatch()},e.loadData=function(){s.UserData.read("pbs_campout").then(this.handleLoadSuccess.bind(this),this.handleLoadFail.bind(this))},e.setGameData=function(t,e){if(this.data[t]=e,this.useSpringroll)s.UserData.write("pbs_campout",this.data).then((function(){}));else try{window.localStorage.setItem("pbs_campout",JSON.stringify(this.data))}catch(t){}},e.getGameData=function(){return this.data},e.destroy=function(){a=null},t}()},"cm+9":function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("fKPv")),n=s(i("fqYL")),o=s(i("dNOl")),h=s(i("tAmo")),r=s(i("v5o0")),d=s(i("F3nf")),l=s(i("lfrF")),u=s(i("Az84")),c=s(i("KNZN")),p=s(i("FxLT")),m=s(i("a2Oa")),g=s(i("HIEV")),f=s(i("XpOn")),v=s(i("IDWZ")),y=s(i("ZBt7")),b=s(i("LWEJ")),w=s(i("XZAb")),_=s(i("TPiU")),P=s(i("seRm")),k=s(i("06Kr")),I=s(i("P8QU")),x=s(i("VomV")),S=s(i("nYtc")),D=s(i("PmTu"));function T(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function O(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?T(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):T(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var C=function(){function t(t,e,i){this.game=t,this.location=e,this.furnituresByID=i}return t.prototype.getObject=function(t){var e,i=t.id;switch(t=O(O({},this.furnituresByID[i]),t),i){case"owl":e=new n.default({game:this.game,location:this.location,data:t});break;case"bee_tree":e=new o.default({game:this.game,location:this.location,data:t});break;case"yellow_flowers":case"poppies":e=new x.default({game:this.game,location:this.location,data:t});break;case"pampas":e=new D.default({game:this.game,location:this.location,data:t});break;case"bee":e=new h.default({game:this.game,location:this.location,data:t});break;case"tent_1":case"tent_2":case"tent_3":e=new r.default({game:this.game,location:this.location,data:t});break;case"stump":e=new d.default({game:this.game,location:this.location,data:t});break;case"bench":e=new l.default({game:this.game,location:this.location,data:t});break;case"lizard_rock":e=new u.default({game:this.game,location:this.location,data:t});break;case"roly_poly_log":e=new c.default({game:this.game,location:this.location,data:t});break;case"campfire":e=new p.default({game:this.game,location:this.location,data:t});break;case"dandelion":e=new g.default({game:this.game,location:this.location,data:t});break;case"bin":case"bin_recycle":e=new m.default({game:this.game,location:this.location,data:t});break;case"composter":e=new f.default({game:this.game,location:this.location,data:t});break;case"ant_hill":e=new v.default({game:this.game,location:this.location,data:t});break;case"ant":e=new y.default({game:this.game,location:this.location,data:t});break;case"pond":e=new b.default({game:this.game,location:this.location,data:t});break;case"water_rock":e=new w.default({game:this.game,location:this.location,data:t});break;case"lantern_back":case"lantern_front":e=new _.default({game:this.game,location:this.location,data:t});break;case"chair":e=new P.default({game:this.game,location:this.location,data:t});break;case"stool_log":e=new k.default({game:this.game,location:this.location,data:t});break;case"firefly":e=new I.default({game:this.game,location:this.location,data:t});break;case"butterfly_cycle":e=new S.default({game:this.game,location:this.location,data:t})}return e},t}();e.default=C},dD3M:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e){var i,s=e.game,n=e.x,o=void 0===n?0:n,h=e.y,r=void 0===h?0:h,d=e.up,l=e.over,u=e.atlas,c=void 0===u?"ui_buttons":u,p=e.playClick,m=void 0===p||p,g=e.sfxID,f=void 0===g?"generic_ui":g;return(i=t.call(this,s,o,r,c)||this).setFrames(l,d,d,d),i.anchor.set(.5),i.playClick=m,i.sfxID=f,i.data={},i.out=d,i.over=l,i.isOver=!1,i.input.useHandCursor=!0,i.onInputDown.add(i.onDown,(0,a.default)(i)),i.onInputUp.add(i.onUp,(0,a.default)(i)),i.onInputOver.add(i.onOver,(0,a.default)(i)),i.onInputOut.add(i.onOut,(0,a.default)(i)),i.init(),i}(0,n.default)(e,t);var i=e.prototype;return i.init=function(){if(this.game){var t=this.game.input.activePointer.x,e=this.game.input.activePointer.y;this.isWithinBounds(t,e)}this.enable()},i.enable=function(){this.input.enabled=!0},i.disable=function(){this.input.enabled=!1},i.isWithinBounds=function(t,e){return this.getBounds().contains(t,e)},i.onOver=function(){this.isOver=!0},i.onOut=function(){this.isOver=!1},i.onDown=function(){this.playClick&&this.game.sounds.playSFX(this.sfxID,{spriteID:"sfx"})},i.onUp=function(){},i.destroy=function(e){void 0===e&&(e=!0),this.clearFrames(),this.disable(),this.onInputDown.removeAll(),this.onInputDown=null,this.onInputUp.removeAll(),this.onInputUp=null,this.onInputOver.removeAll(),this.onInputOver=null,this.onInputOut.removeAll(),this.onInputOut=null,t.prototype.destroy.call(this,e)},e}(Phaser.Button);e.default=o},dNOl:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("3Ss1"),i("YY9M"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("6/uN")),h=s(i("/hvn")),r=function(t){function e(e){var i,s=e.game,n=e.location,o=e.data;return(i=t.call(this,{game:s,location:n,data:o})||this).bees=[],i.beesPool=[],i.targetIDs=[0,1,2],i.targets=[{x:-156,y:-102},{x:-198,y:-183},{x:-233,y:-122}],i.beeStart={x:-28,y:-300},i.honey=0,i.state=1,i.hiveBone=i.asset.skeleton.findBone("hive"),i.asset.onEvent.add(i.handleAudioEvent,(0,a.default)(i)),i.setAnim("1_idle"),i}(0,n.default)(e,t);var i=e.prototype;return i.updateBounds=function(){this.bb=this.getBounds(),this.bb.height=420},i.setNight=function(){for(var t=0;t<this.bees.length;t++)this.bees[t].returnHome()},i.handleInputDown=function(){if(this.location.isDay())if(1===this.state){var t=Phaser.ArrayUtils.removeRandomItem(this.targetIDs);this.spawnBee(t)}else for(var e=0;e<this.bees.length;e++)if(this.bees[e].onFlower){this.bees[e].returnHome();break}},i.spawnBee=function(t){var e,i=this.x+this.beeStart.x,s=this.y+this.beeStart.y;(e=this.beesPool.length>0?this.beesPool.shift():this.location.addFurniture({id:"bee",x:i,y:s})).init(i,s);var a=this.targets[t];e.setTarget({x:this.x+a.x,y:this.y+a.y},t),e.beeTree=this,this.bees.push(e),1===this.bees.length&&(this.ambience=this.game.sounds.playSFX("bee_loop",{spriteID:"sfx",loop:!0}).get("bee_loop")),3===this.bees.length&&(this.state=2)},i.removeBee=function(t){var e=this.bees.indexOf(t);if(e>-1&&(this.bees.splice(e,1),this.targetIDs.push(t.targetId),t.removeMe(),this.beesPool.push(t),this.honey++,3===this.honey&&(this.honey=0,this.setAnim("2_dripping",!1,1))),0===this.bees.length){this.ambience=null,this.game.sounds.stopAudioSprite("bee_loop",{spriteID:"sfx"});var i=new o.default(this.game,-30,-360);this.addChild(i),this.state=1}this.location.state.setLoopHint(this.data.hint)},i.handleAudioEvent=function(t,e){this.game.sounds.playSFX(e.data.name,{spriteID:"sfx"})},i.pulse=function(t){void 0===t&&(t=1500),this.game.add.tween(this.hiveBone).to({scaleX:[1.2,1,1.2,1,1.2,1],scaleY:[1.2,1,1.2,1,1.2,1]},t,null,!0)},i.step=function(e){if(t.prototype.step.call(this,e),this.ambience){var i=-this.location.x,s=i+this.game.width,a=.5*(s-i),n=.5*(s+i),o=this.x-200;this.ambience.volume=o<s&&o>i?1-Math.abs(o-n)/a:0}},e}(h.default);e.default=r},fY54:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("fKPv")),n=i("zgbH");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var r=function(){function t(t,e,i){this.copy={},this.game=t,this.levelDialogue=i;for(var s=e.getElementsByTagName("item"),a=0;a<s.length;a++)this.copy[s[a].getAttribute("id")]=s[a].childNodes[0].nodeValue}var e=t.prototype;return e.setElinorCopy=function(t){var e=t.getElementsByTagName("item");this.elinorCopy={};for(var i=0;i<e.length;i++)this.elinorCopy[e[i].getAttribute("id")]=e[i].childNodes[0].nodeValue},e.setSceneCopy=function(t){var e=t.getElementsByTagName("item");this.sceneCopy={};for(var i=0;i<e.length;i++)this.sceneCopy[e[i].getAttribute("id")]=e[i].childNodes[0].nodeValue},e.getElinorCopy=function(t,e){return e&&this.elinorCopy[t+"_device"]?this.elinorCopy[t+"_device"]:this.elinorCopy[t]||""},e.getSceneCopy=function(t,e){return e&&this.sceneCopy[t+"_device"]?this.sceneCopy[t+"_device"]:this.sceneCopy[t]||""},e.getCopy=function(t,e){return e&&this.copy[t+"_device"]?this.copy[t+"_device"]:this.copy[t]||"copy not found [ "+t+" ]"},e.getCopyNoDefault=function(t){return this.copy[t]||null},e.getFontFamily=function(t,e){return t?e+"px "+n.FONT_TITLE:e+"px "+n.FONT_COPY},e.createFontStyle=function(t,e,i,s){return void 0===s&&(s={}),h({font:this.getFontFamily(t,e),fill:i,boundsAlignH:s.boundsAlignH||"center",boundsAlignV:s.boundsAlignV||"middle"},s)},e.createSubtitleFontStyle=function(t,e,i){return void 0===i&&(i={}),h({font:t+"px "+n.FONT_SUBTITLE,fill:e,boundsAlignH:i.boundsAlignH||"center",boundsAlignV:i.boundsAlignV||"middle"},i)},e.createSetUpFontStyle=function(t,e,i){return void 0===i&&(i={}),h({font:t+"px "+n.FONT_ITALIC,fill:e,boundsAlignH:i.boundsAlignH||"center",boundsAlignV:i.boundsAlignV||"middle"},i)},e.getLevelDialogue=function(t){return this.levelDialogue[t]},e.getGameDialogue=function(t){return this.game.cache.getJSON("dialogue_"+t)},e.getGameIntroDialogue=function(t){var e=this.getGameDialogue(t);return!!e&&e.intro},e.getGameOutroDialogue=function(t,e){var i=this.getGameDialogue(t);return i&&i.outro[e]||!1},e.getCharacterName=function(t){return this.getCopy(t)},e.getHowToPlayCopy=function(){for(var t=0,e=[];t<1;){var i=this.copy["howtoplay_"+(t+1)+"_title"],s=this.copy["howtoplay_"+(t+1)+"_copy"];e.push({title:i,copy:s}),t++}return e},t}();e.default=r},fqYL:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("6/uN")),o=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).canTap=!0,i.asset.setMixByName("day","day2night",.2),i.asset.setMixByName("day2night","night",.2),i.asset.setMixByName("night","day",.2),i.asset.setMixByName("tap","day",.2),i.asset.setMixByName("tap","night",.2),i.setAnim("day"),i.rootBone.scaleX=1.1,i.rootBone.scaleY=1.1,i}(0,a.default)(e,t);var i=e.prototype;return i.setNight=function(t){t?this.setAnim("night"):(this.setAnim("day2night"),this.asset.addAnimationByName(0,"night",!0),this.worldPosition.x>10&&this.visible&&this.game.time.events.add(1e3,this.showHeart,this))},i.setDay=function(){this.setAnim("day")},i.handleInputDown=function(){this.canTap&&!this.location.isDay()&&(this.canTap=!1,this.setAnim("tap"),this.asset.onComplete.addOnce(this.handleTapAnimEnd,this),this.game.sounds.playSFX("item_owl",{spriteID:"sfx"}))},i.handleTapAnimEnd=function(){this.canTap=!0,this.location.isDay()?this.setAnim("day"):this.setAnim("night")},i.showHeart=function(){var t=new n.default(this.game,-30,-490);this.addChild(t)},e}(s(i("/hvn")).default);e.default=o},gRxE:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("fKPv")),n=s(i("QqF+")),o=s(i("H417")),h=s(i("+FTe")),r=s(i("o2CQ")),d=s(i("yg50")),l=s(i("zOXe")),u=s(i("keqO")),c=s(i("9sOt")),p=s(i("LQVx")),m=s(i("uJez")),g=s(i("aMZi"));function f(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function v(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?f(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var y=function(){function t(t,e,i){this.game=t,this.location=e,this.itemsByID=i}return t.prototype.getItem=function(t){var e,i=v(v({},this.itemsByID[t]),{},{id:t});switch(t){case"backpack_ari":case"backpack_elinor":case"backpack_olive":e=new o.default({game:this.game,location:this.location,data:i});break;case"marshmallow_stick":case"banana_stick":case"pickle_stick":case"apple_stick":case"banana_peanut_stick":e=new r.default({game:this.game,location:this.location,data:i});break;case"stack":e=new h.default({game:this.game,location:this.location,data:i});break;case"flashlight":e=new l.default({game:this.game,location:this.location,data:i});break;case"picnic_basket":case"coolbox":e=new d.default({game:this.game,location:this.location,data:i});break;case"leaf":e=new u.default({game:this.game,location:this.location,data:i});break;case"ball":e=new c.default({game:this.game,location:this.location,data:i});break;case"bucket":e=new p.default({game:this.game,location:this.location,data:i});break;case"book_1":case"book_2":case"book_3":e=new m.default({game:this.game,location:this.location,data:i});break;case"tent_1_rolled":case"tent_2_rolled":case"tent_3_rolled":e=new g.default({game:this.game,location:this.location,data:i});break;default:e=new n.default({game:this.game,location:this.location,data:i})}return e},t}();e.default=y},gsGo:function(t,e,i){"use strict";var s=i("R6lU"),a=i("IfHf");i("YY9M"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ShortcutStub=void 0;var n=a(i("+G5l")),o=s(i("wqsV")),h=i("cjcH"),r=function(){function t(){}var e=t.prototype;return e.reset=function(){},e.addPondData=function(){},e.showLevelSettings=function(){},t}();e.ShortcutStub=r;var d=function(){function t(t,e){var i=e.model,s=e.isVisible,a=void 0!==s&&s;this.game=t,this.model=i,this.gameSettings=null,this.saveSettings=null,this.levelSettings=null,this.myCreaturesUnlockedControl=null,this.currentPondControl=null,this.pondDebugControl=null,this.unlockArrowsControl=null,this.saveControl=null,this.soundControl=null,this.sfxControl=null,this.musicControl=null,this.voControl=null,this.captionsControl=null,this.boundClearSaves=this.clearSaves.bind(this),this.boundToggle=this.toggleDisplay.bind(this),this.boundToggleDebugPond=this.toggleDebugPond.bind(this),this.boundToggleUnlockArrows=this.toggleUnlockArrows.bind(this),this.boundToggleSound=this.toggleSound.bind(this),this.boundToggleSFX=this.toggleSFX.bind(this),this.boundToggleMusic=this.toggleMusic.bind(this),this.boundToggleVO=this.toggleVO.bind(this),this.boundToggleCaptions=this.toggleCaptions.bind(this),this.isVisible=a,this.trigger=new o.default({sequence:"↑ ↑ ↓ ↓ ← →",onComplete:this.boundToggle,onFail:function(t){}})}var e=t.prototype;return e.toggleDisplay=function(){this.isVisible?this.hide():this.show()},e.toggleDebugPond=function(){this.game.controller.shortcutDebugPond(this.model.pondDebug)},e.toggleUnlockArrows=function(){this.game.controller.updateShortcutsState(this.model)},e.toggleSound=function(){this.game.sounds.soundVolume=this.model.sound?1:0},e.toggleSFX=function(){this.game.sounds.sfxVolume=this.model.sfx?1:0},e.toggleMusic=function(){this.game.sounds.musicVolume=this.model.music?1:0},e.toggleVO=function(){this.game.sounds.voVolume=this.model.vo?1:0},e.toggleCaptions=function(){this.game.springRollCaptionsPlugin.setMute(!this.model.captions)},e.open=function(){this.gui.open()},e.close=function(){this.gui.close()},e.show=function(){this.isVisible=!0,this.gui.show()},e.hide=function(){this.isVisible=!1,this.gui.hide()},e.clearSaves=function(){(0,h.getLS)().deleteData()},e.setVisible=function(){this.isVisible?this.show():this.hide()},e.createGameSettings=function(){this.gameSettings=this.gui.addFolder("Game Settings"),this.currentPondControl=this.gameSettings.add(this.model,"currentPond").name("Current Pond Save");var t=this.currentPondControl.domElement.getElementsByTagName("input")[0];t&&(t.readOnly=!0),this.myCreaturesUnlockedControl=this.gameSettings.add(this.model,"myCreaturesUnlocked").name("My creatures unlocked"),this.pondDebugControl=this.gameSettings.add(this.model,"pondDebug").name("Debug Pond").onChange(this.boundToggleDebugPond),this.unlockArrowsControl=this.gameSettings.add(this.model,"arrowsUnlocked").name("Unlock Arrows").onChange(this.boundToggleUnlockArrows),this.gameSettings.open()},e.createSaveSettings=function(){this.saveSettings=this.gui.addFolder("Saved Data"),this.saveControl=this.saveSettings.add(this.model,"clearPlayerSaves").name("Delete all Pond Saves").onChange(this.boundClearSaves)},e.createAudioSettings=function(){this.audioSettings=this.gui.addFolder("Audio"),this.soundControl=this.audioSettings.add(this.model,"sound").name("Sound").onChange(this.boundToggleSound),this.sfxControl=this.audioSettings.add(this.model,"sfx").name("SFX").onChange(this.boundToggleSFX),this.musicControl=this.audioSettings.add(this.model,"music").name("Music").onChange(this.boundToggleMusic),this.voControl=this.audioSettings.add(this.model,"vo").name("VO").onChange(this.boundToggleVO),this.captionsControl=this.audioSettings.add(this.model,"captions").name("Captions").onChange(this.boundToggleCaptions)},e.create=function(){n.GUI.TEXT_CLOSED="Close Shortcuts",n.GUI.TEXT_OPEN="Open Shortcuts",this.gui=new n.GUI({name:"Shortcuts",closed:!0,autoPlace:!1,width:300}),this.gui.domElement.id="gui",document.getElementById("shortcuts-container").appendChild(this.gui.domElement),this.createGameSettings(),this.createSaveSettings(),this.createAudioSettings(),this.close(),this.hide()},e.update=function(){this.currentPondControl.updateDisplay()},e.reset=function(){this.model.currentPond="none",this.currentPondControl.updateDisplay(),this.levelSettings&&this.gui.removeFolder(this.levelSettings),this.levelSettings=null},e.addPondData=function(t){var e=t.saveId;this.model.currentPond=e,this.currentPondControl.updateDisplay()},e.showLevelSettings=function(){this.currentPondControl.updateDisplay()},e.cleanUp=function(t){t&&(t.remove(),t=null)},e.destroy=function(){this.cleanUp(this.unlockArrowsControl),this.cleanUp(this.myCreaturesUnlockedControl),this.cleanUp(this.currentPondControl),this.cleanUp(this.pondDebugControl),this.gui.removeFolder(this.gameSettings),this.gameSettings=null,this.cleanUp(this.saveControl),this.gui.removeFolder(this.saveSettings),this.saveSettings=null,this.cleanUp(this.soundControl),this.cleanUp(this.sfxControl),this.cleanUp(this.musicControl),this.cleanUp(this.voControl),this.cleanUp(this.captionsControl),this.gui.removeFolder(this.audioSettings),this.audioSettings=null,this.gui.removeFolder(this.levelSettings),this.levelSettings=null,this.gui.destroy(),this.gui=null,this.trigger.destroy(),this.trigger=null},t}();e.default=d},gvDg:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("6WZY"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=i("zgbH"),h=s(i("6/uN")),r=i("QqF+"),d=["body","lifejacket","raincoat","pyjamas"],l=function(t){function e(e,i,s,a){var n;return(n=t.call(this,e,0,0)||this).location=i,n.id=s,n.data=a,n.dz=0,n.isRabbit="rabbit"===s,n.onChange=new Phaser.Signal,n.asset=n.game.make.spine(0,0,s,!0),n.asset.anchor.set(.5,1),n.addChildAt(n.asset,0),n.rootBone=n.asset.skeleton.getRootBone(),n.scaleDefault=n.rootBone.scaleX,n.mixAnims(),n.inTent=!1,n.isEating=!1,n.inSleepingBag=!1,n.costumeInd=0,n.hat=null,n.setSkin(d[n.costumeInd]),n.setAnim("idle"),n.addButton(),n.anchorPos1=new Phaser.Point(0,0),n.anchor1=n.asset.skeleton.findBone("anchor_1"),n.anchor2=n.asset.skeleton.findBone("anchor_2"),n.anchorMouth=n.asset.skeleton.findBone("anchor_mouth"),n.anchor1&&(n.slot1=n.game.make.group(),n.slot2=n.game.make.group(),n.addChild(n.slot1),n.addChild(n.slot2)),n.addChomp(),n.setScale(.4),n.headY=.85*n.button.height,n}(0,n.default)(e,t);var i=e.prototype;return i.mixAnims=function(){this.asset.setMixByName("hands_empty","hands_holding",.4),this.asset.setMixByName("hands_holding","hands_empty",.4),this.asset.setMixByName("idle","pickup",.2),this.asset.setMixByName("pickup","idle",.2),this.asset.setMixByName("idle","eating",.2),this.asset.setMixByName("eating","idle",.2),this.isRabbit||(this.asset.setMixByName("idle","sleeping",.2),this.asset.setMixByName("sleeping","idle",.2),this.asset.setMixByName("idle","float",.2),this.asset.setMixByName("float","idle",.2))},i.createSkins=function(){for(var t=["body","lifejacket","raincoat","pyjamas","sleeping_bag_1","sleeping_bag_2","sleeping_bag_3"],e=["hat_1","hat_2","hat_3"],i=0;i<t.length;i++)for(var s=0;s<e.length;s++)this.asset.createCombinedSkin(t[i]+e[s],t[i],e[s])},i.addChomp=function(){var t=.4*this.anchorMouth.worldX,e=.4*-this.anchorMouth.worldY;this.chomp=this.game.make.spine(t,e,"spine_chomp",!0),this.chomp.anchor.set(.5,1),this.addChild(this.chomp),this.chomp.visible=!1},i.init=function(t){this.hat=t.hat,void 0!==t.costumeInd&&null!==t.costumeInd&&(this.costumeInd=t.costumeInd,this.setSkin(d[this.costumeInd])),t.sleeping_bag&&this.wearSleepingBag({id:t.sleeping_bag}),this.inPond=t.in_pond,this.inPond&&(this.pond=this.location.pond)},i.setScale=function(t){this.rootBone.scaleX=t*this.scaleDefault,this.rootBone.scaleY=t*this.scaleDefault;var e=this.chomp.skeleton.getRootBone();e.scaleX=e.scaleY=t*this.scaleDefault,this.button.width=.4*this.asset.width*this.rootBone.scaleX,this.button.height=.9*this.asset.height*this.rootBone.scaleY},i.setAnim=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0),0===e&&(this.animName=t),this.currentAnim=this.asset.setAnimationByName(e,t,i),"eating"===t&&(this.chomp.visible=!0,this.chomp.setAnimationByName(0,"animation",!1))},i.setSkin=function(t){if(!this.isRabbit){this.skinName=t;var e=this.rootBone.scaleX,i=this.rootBone.scaleY,s=this.rootBone.rotation;if(this.hat){var a=this.asset.createCombinedSkin(t+this.hat,this.hat,t);this.asset.setSkin(a)}else this.asset.setSkinByName(t);this.asset.setToSetupPose(),this.rootBone.scaleX=e,this.rootBone.scaleY=i,this.rootBone.rotation=s}},i.pauseAnim=function(){this.currentAnim.timeScale=0},i.unpauseAnim=function(){this.currentAnim.timeScale=1},i.setLight=function(t){var e=o.NIGHT_TINT,i=(e>>16)/255,s=(e>>8&255)/255,a=(255&e)/255;this.asset.skeleton.color.r=i+t*(1-i),this.asset.skeleton.color.g=s+t*(1-s),this.asset.skeleton.color.b=a+t*(1-a)},i.addButton=function(){this.button=this.game.make.button(0,0,"empty"),this.button.width=.4*this.asset.width,this.button.height=.9*this.asset.height,this.button.anchor.set(.5,1),this.button.alpha=0,this.addChild(this.button),this.button.events.onInputDown.add(this.handleInputDown,this),"desktop"===this.game.deviceMetric.platform.type?(this.button.events.onInputOver.add(this.handleInputOver,this),this.button.events.onInputOut.add(this.handleInputOut,this)):this.button.events.onInputUp.add(this.handleInputUp,this),this.button.input.useHandCursor=!0},i.handleInputDown=function(t,e){if(this.handleInputOut(),this.drag)this.handleInputUp();else{if(this.location.state.interacted(this),this.hat){var i=this.button.getBounds(),s=e.positionDown.y;if((i.y+i.height-s)/i.height>.7)return void this.pickupHat(e)}if(this.location.startDragItem(this),this.drag=!0,this.furniture&&(this.furniture.isEmpty=!0,this.furniture=null,this.sitPoint.top.empty=!0,this.sitPoint.empty=!0,this.sitPoint=null,this.isSitting=!1),this.dz=0,this.parentObj&&this.parentObj.removeObject(this),this.parentObj=null,this.dragStartX=e.x,this.dragStartY=e.y,this.dragDx=this.x-(e.x-this.location.x),this.dragDy=this.y-e.y,0!==this.button.angle){var a=Math.cos(-this.button.rotation),n=Math.sin(-this.button.rotation),o=this.dragDx*a-this.dragDy*n,h=this.dragDx*n+this.dragDy*a;this.dragDx=o,this.dragDy=h}this.pointer=e,this.parent.bringToTop(this),this.setScale(.45),this.setAngle(0),this.setAnim("pickup",0)}},i.handleInputUp=function(){if(this.pointer){var t=Math.abs(this.pointer.x-this.dragStartX),e=Math.abs(this.pointer.y-this.dragStartY);t<o.TAP_LIMIT&&e<o.TAP_LIMIT&&!this.isRabbit&&this.handleTap(),this.setScale(.4),this.setAnim("idle",0),this.location.stopDragCharacter(this),this.drag=!1,this.pointer=null,this.checkPose()}else this.hatRef.handleInputUp(),this.hatRef=null},i.handleTap=function(){this.inSleepingBag?this.leaveSleepingBag():(this.costumeInd++,this.costumeInd%=4,this.setSkin(d[this.costumeInd]),this.game.sounds.playSFX("item_clothing",{spriteID:"sfx"}),"raincoat"!==this.skinName||this.location.isDay()||this.showHeart(),"body"===this.skinName&&this.location.isDay()&&this.showHeart(),this.onChange.dispatch("set skin"))},i.canHover=function(){return!this.drag&&!this.tent&&!this.isRabbit},i.handleInputOver=function(){this.location.isDraggingItem||this.setScale(.42),this.canHover()&&(this.isHover=!0,this.hoverTime=0,this.location.state.gameHud.showHoverGauge(this.worldPosition.x,this.worldPosition.y-this.height-50))},i.handleInputOut=function(){this.setScale(.4),this.isHover&&(this.isHover=!1,this.location.state.gameHud.hideHoverGauge())},i.fallDownTo=function(t){this.destY=t,this.speedY=0,this.isFalling=!0},i.checkIfItemIsClose=function(t){if(this.hasEmptyHands()&&!this.inSleepingBag&&!this.inTent&&"float"!==this.animName){var e=this.worldPosition.x,i=this.worldPosition.y-this.button.height/2,s=t.worldPosition.x-e,a=t.worldPosition.y-t.height/2-i;s*s+a*a<22500?this.setAnim("hands_holding",1):this.asset.state.setEmptyAnimation(1,.2)}},i.getHeadPos=function(){var t=new Phaser.Point(0,-this.headY);return Phaser.Point.rotate(t,0,0,this.button.angle,!0)},i.canWearHat=function(t){if(!this.hat&&!this.isRabbit){var e=this.getHeadPos();e.x+=this.worldPosition.x,e.y+=this.worldPosition.y;var i=t.bb;if(Phaser.Rectangle.containsPoint(i,e))return!0}return!1},i.wearHat=function(t){this.hat=t.id,this.setSkin(this.skinName),this.onChange.dispatch("wear hat")},i.pickupHat=function(t){var e=this.location.addItem(this.hat,t.x,t.y);this.location.saveItems(),e.handleInputDown(null,t),this.hatRef=e,this.hat=null,this.setSkin(this.skinName),this.onChange.dispatch("wear hat")},i.canWearSleepingBag=function(t){if(!this.inSleepingBag&&!this.isRabbit){var e=this.button.getBounds(),i=t.bb;if(Phaser.Rectangle.intersects(e,i))return!0}return!1},i.wearSleepingBag=function(t){this.inSleepingBag=!0,"pyjamas"===this.skinName&&this.showHeart();var e=t.id.substring(0,t.id.indexOf("_open"));this.setSkin(e),this.dropItems(),this.game.sounds.playSFX("item_rucksack",{spriteID:"sfx"}),this.onChange.dispatch("wear sleeping bag")},i.leaveSleepingBag=function(){var t=this.skinName+"_open";this.setSkin(d[this.costumeInd]),this.inSleepingBag=!1,this.location.addItem(t,this.x,this.y),this.location.saveItems(),this.onChange.dispatch("leave sleeping bag")},i.canPutItemIntoHand=function(t){if(this.anchor1&&this.hasOneEmptyHand()&&!this.inSleepingBag&&!this.inTent&&"float"!==this.animName)for(var e=[this.anchor1,this.anchor2],i=[this.slot1,this.slot2],s=0;s<2;s++){var a=e[s],n=i[s];if(0===n.length){var o=this.worldPosition.x+a.worldX,h=this.worldPosition.y-a.worldY,r=t.getBounds(),d=r.x+.5*r.width,l=r.y+.5*r.height,u=Math.abs(d-o),c=Math.abs(l-h);if(u<40&&c<40)return n}}return null},i.putItemIntoHand=function(t,e){t.putInHand(this,e===this.slot1),e.addChild(t),this.setAnim("hands_holding",1)},i.dropItems=function(){this.hasEmptyHands()||(this.slot1.length>0&&this.slot1.children[0].drop(),this.slot2.length>0&&this.slot2.children[0].drop(),this.checkPose())},i.pickupItemFromHand=function(){},i.checkIfItemIsCloseToMouth=function(t){this.canPutFoodIntoMouth(t)?this.mouthOpen||(this.mouthOpen=!0,this.asset.setAnimationByName(2,"open_mouth",!1)):this.mouthOpen&&(this.mouthOpen=!1,this.asset.state.setEmptyAnimation(2,.1))},i.canPutFoodIntoMouth=function(t){if(!this.isEating){var e=this.worldPosition.x+this.anchorMouth.worldX,i=this.worldPosition.y-this.anchorMouth.worldY,s=t.getBounds(),a=t.worldPosition.x-e,n=t.worldPosition.y-.5*s.height-i;if(a*a+n*n<900)return!0}return!1},i.eat=function(t,e){if(!this.isEating){this.isEating=!0,this.checkPose(),this.game.time.events.add(50,this.setAnim,this,"eating",2,!1),this.asset.onComplete.addOnce(this.handleEatingEnd,this),this.game.sounds.playSFX("item_eating",{spriteID:"sfx"});var i=parseInt(e,16),s=(i>>16)/255,a=(i>>8&255)/255,n=(255&i)/255;this.chomp.skeleton.color.r=s,this.chomp.skeleton.color.g=a,this.chomp.skeleton.color.b=n,this.isRabbit||t.isStick&&!t.isCooked()||this.data.food.indexOf(t.id)>-1&&this.showHeart()}},i.handleEatingEnd=function(){this.isEating=!1,this.asset.state.setEmptyAnimation(2,.2)},i.canSit=function(t){if(!this.inSleepingBag){var e=Math.abs(t.x-this.x),i=this.isRabbit?150:45,s=Math.abs(t.y-(this.y-i)),a=this.isRabbit?50:30;if(e<30&&s<a)return!0}return!1},i.sitDown=function(t,e){var i=e.x,s=e.y,a=e.dz;e.empty=!1,e.top.empty=!1,this.isSitting=!0,this.furniture=t,this.sitPoint=e,this.furniture.isEmpty=!1,this.x=i;var n=this.isRabbit?150:45;this.y=s+n,this.setAnim("sitting",0,!0),this.dz=a-44,this.onChange.dispatch("sit down")},i.checkPose=function(){this.inTent||(this.hasEmptyHands()?this.asset.state.setEmptyAnimation(1,.2):this.setAnim("hands_holding",1))},i.hasEmptyHands=function(){return 0===this.slot1.length&&0===this.slot2.length},i.hasOneEmptyHand=function(){return 0===this.slot1.length||0===this.slot2.length},i.canFloat=function(){return!1},i.pickupFromPond=function(){this.inPond=!1,this.pond=null,this.dz=0},i.putIntoTent=function(t,e){this.x=e.x,this.y=e.y,this.setAngle(e.angle),this.setAnim("sleeping",0),this.inTent=!0,this.tent=t,this.inSleepingBag&&t.id===this.data.tent&&!this.location.isDay()&&this.showHeart()},i.pickupFromTent=function(){this.setAnim("idle",0),this.inTent=!1,this.tent.empty=!0,this.tent=null},i.setAngle=function(t){this.rootBone.rotation=-t,this.button.angle=t},i.showHeart=function(){var t=this.getHeadPos(),e=new h.default(this.game,t.x,t.y-20);this.addChild(e)},i.update=function(){this.asset.update(),this.chomp.update(),t.prototype.update.call(this),this.anchor1&&(this.slot1.x=this.anchor1.worldX,this.slot1.y=-this.anchor1.worldY,this.slot2.x=this.anchor2.worldX,this.slot2.y=-this.anchor2.worldY)},i.step=function(t){var e=this.location.lights.getLightAt(this.worldPosition.x,this.worldPosition.y-(this.height>>1),!0);if(e>=0&&e!==this.lightPower&&(this.lightPower=e,this.setLight(e)),"desktop"===this.game.deviceMetric.platform.type&&this.isHover){this.hoverTime+=t;var i=Math.min(1,this.hoverTime/r.TAP_TIME);this.location.state.gameHud.setHoverValue(i),this.hoverTime>r.TAP_TIME&&(this.handleInputOut(),this.handleTap())}this.drag&&this.pointer?(this.x=-this.location.x+this.pointer.x+this.dragDx,this.x=Phaser.Math.clamp(this.x,50,this.location.width-50),this.y=Math.min(720,this.pointer.y+this.dragDy)):this.isFalling&&(this.speedY+=50*t,this.y+=this.speedY,this.y>this.destY&&(this.y=this.destY,this.isFalling=!1,this.parentObj?this.dz=this.destDZ:this.dz=0,this.inPond&&(this.game.sounds.playSFX("item_splash",{spriteID:"sfx"}),"lifejacket"===this.skinName&&this.showHeart()),this.onChange.dispatch("on position"))),!this.isRabbit&&this.inPond&&this.pond&&(1===this.pond.waterLevel?"idle"===this.animName&&(this.setAnim("float",0),this.dropItems()):"float"===this.animName&&this.setAnim("idle",0))},i.serialize=function(){var t={id:this.id,x:this.x,y:this.y,costumeInd:this.costumeInd};return this.inSleepingBag&&(t.sleeping_bag=this.skinName+"_open"),t.in_tent=this.inTent,t.tent=this.tent?this.tent.id:null,t.hat=this.hat,t.in_pond=this.inPond,t},(0,a.default)(e,[{key:"depth",get:function(){return this.y+this.dz+(this.drag?2e3:0)}}]),e}(Phaser.Sprite);e.default=l},hO7r:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("3Ss1"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("6a7y")),n=function(){function t(t,e){this.game=t,this.location=e,this.fireflies=[];for(var i=0;i<4;i++){var s=this.location.addFurniture({id:"firefly",x:0,y:0});s.controller=this,this.fireflies.push(s)}this.glows=[],this.glowsPool=[]}var e=t.prototype;return e.showFireflies=function(){for(var t=0;t<this.fireflies.length;t++)this.fireflies[t].enterLocation()},e.hideFireflies=function(){for(var t=0;t<this.fireflies.length;t++)this.fireflies[t].exitLocation();this.onBreakPair()},e.tryToPair=function(t){if(t.canBePaired())for(var e=0;e<this.fireflies.length;e++){var i=this.fireflies[e];if(i.canBePaired()&&i!==t){var s=t.x-i.x,a=t.y-i.y;s*s+a*a<2500&&(t.setPair(i,!0),i.setPair(t,!1),this.showGlow())}}},e.onBreakPair=function(){this.isGlow=!1},e.handleGlowComplete=function(t){if(this.isGlow){var e=Phaser.Math.between(100,this.location.width-100),i=Phaser.Math.between(100,620);t.init(e,i)}else{t.parent.removeChild(t);var s=this.glows.indexOf(t);this.glows.splice(s,1)}},e.getGlow=function(){if(this.glowsPool.length>0)return this.glowsPool.shift();var t=new a.default(this.game,0,0);return t.onComplete.add(this.handleGlowComplete,this),t},e.showGlow=function(){if(this.isGlow=!0,this.glows.length<50)for(var t=50-this.glows.length,e=0;e<t;e++){var i=this.getGlow();this.location.midground.addChild(i);var s=Phaser.Math.between(100,this.location.width-100),a=Phaser.Math.between(100,620);i.init(s,a,10*e),this.glows.push(i)}this.game.sounds.playSFX("item_firefly",{spriteID:"sfx"})},t}();e.default=n},keqO:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;i=t.call(this,{game:s,location:a,data:n})||this;var o=Phaser.Math.between(1,12);return i.frameName="leaf_"+(o<10?"0":"")+o,i}return(0,a.default)(e,t),e}(s(i("QqF+")).default);e.default=n},lfrF:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).version=1,i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.asset=this.game.make.image(0,0,this.data.key,"bench"),this.asset.anchor.set(.5,1),this.addChild(this.asset)},i.setLight=function(t){this.setLight2(t)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.asset.tint=this.tintColor},e}(s(i("/hvn")).default);e.default=n},"m/lz":function(t,e,i){"use strict";var s=i("R6lU");i("7EEF"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("TSJq")),o=s(i("CDWU")),h=s(i("v2oV")),r=i("zgbH"),d=i("5mNR"),l=i("TEuq"),u=i("zgbH"),c=i("Bx3X"),p=i("Y66D"),m=function(){function t(){}var e=t.prototype;return e.init=function(t){var e,i=this,s=this;this.game=new Phaser.Game(r.GAME_WIDTH_DEFAULT,r.GAME_HEIGHT_DEFAULT,(/webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Phaser.AUTO),r.GAME_DIV_ID,{init:function(){l.Debugger.log("log","Initialising app"),this.game.springRollCaptionsPlugin=this.game.plugins.add(new p.CaptionsPlugin(this.game,this.game.plugins,s.captionsMuted)),this.game.springRollApplication=t,this.game.stage.disableVisibilityChange=!0,this.game.preserveDrawingBuffer=!0,this.game.input.maxPointers=1,this.game.stage.backgroundColor=u.GAME_BACKGROUND_COLOR,this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.pageAlignHorizontally=!1,this.game.scale.pageAlignVertically=!1,this.game.defaultWidth=r.GAME_WIDTH_DEFAULT,this.game.defaultHeight=r.GAME_HEIGHT_DEFAULT,this.game.offsetWidth=0,this.game.offsetHeight=0,this.game.screenPadding=.02*Math.max(r.GAME_WIDTH_DEFAULT,r.GAME_HEIGHT_DEFAULT),this.game.aspectController=new h.default(this.game),this.game.sounds=new o.default({game:this.game}),this.game.urls=new n.default(this.game),this.game.deviceMetric=(0,c.getDeviceMetric)()},preload:function(){},create:function(){var t=this;this.game.onBlur.add(s.onBlur,s),this.game.onFocus.add(s.onFocus,s),this.game.input.onUp.add(s.onFocus,s),this.game.input.onDown.add(s.onFocus,s),this.game.input.onTap.add(s.onFocus,s),this.game.input.onHold.add(s.onFocus,s),Object.keys(d.STATE_MAP).forEach((function(e){t.game.state.add(e,d.STATE_MAP[e],!1)})),this.game.canvas.addEventListener("MSPointerCancel",(function(e){t._pointerCancel(e)})),this.game.canvas.addEventListener("pointercancel",(function(e){t._pointerCancel(e)})),this.game.state.start(d.STATE_BOOT,!0,!1)}}),this.hidden=void 0,this.originalPauseValue=void 0,void 0!==document.hidden?(this.hidden="hidden",e="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",e="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this.hidden&&document.addEventListener(e,(function(){return i.handleVisibilityChange()}),!1),window.addEventListener("onpagehide",(function(){return i.onBlur()}),!1),window.addEventListener("pageshow",(function(){return i.onFocus()}),!1)},e.handleVisibilityChange=function(){document[this.hidden]?this.onBlur():this.onFocus()},e.onBlur=function(){document[this.hidden]&&void 0===this.originalPauseValue&&(this.originalPauseValue=this.game.paused,this.pauseGame(!0))},e.onFocus=function(){void 0!==this.originalPauseValue&&(this.pauseGame(this.originalPauseValue),this.originalPauseValue=void 0)},e.pauseGame=function(t){this.game.paused=t,this.game.sounds.handleGamePause(t)},e._pointerCancel=function(t){this.game.input&&this.game.input.enabled&&(t.identifier=t.pointerId,"mouse"===t.pointerType||4===t.pointerType?this.game.input.mousePointer.stop(t):this.game.input.stopPointer(t))},(0,a.default)(t,[{key:"captionsMuted",set:function(t){this._captionsMuted=t},get:function(){return this._captionsMuted}}]),t}();e.default=m},nYtc:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e){var i,s=e.game,n=e.location,o=e.data;return(i=t.call(this,{game:s,location:n,data:o})||this).state=o.state||1,i.setAnim(i.state,2===i.state),i.canTap=2===i.state,i.asset.onComplete.add(i.handleAnimComplete,(0,a.default)(i)),i.setButton(),i}(0,n.default)(e,t);var i=e.prototype;return i.handleInputDown=function(){this.canTap&&(this.canTap=!1,this.nextState(),this.setButton())},i.handleAnimComplete=function(){switch(this.state){case 1:this.nextState(),this.setButton(),this.canTap=!0;break;case 3:this.setButton(),this.canTap=!0;break;case 4:case 5:this.nextState()}},i.nextState=function(){this.canTap=!1,this.state=this.state<5?this.state+1:1,this.setAnim(this.state,2===this.state),5===this.state&&this.location.state.setLoopHint(this.data.hint),this.onChange.dispatch()},i.setButton=function(){1===this.state||2===this.state?(this.button.x=-150,this.button.y=-150,this.button.visible=!0):3===this.state?(this.button.x=-150,this.button.y=-50,this.button.visible=!0):this.button.visible=!1},i.updateBounds=function(){this.bb=this.getBounds(),this.bb.width=50,this.bb.height=70},i.serialize=function(){var e=t.prototype.serialize.call(this);return e.state=this.state,e},e}(s(i("/hvn")).default);e.default=o},o2CQ:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("QqF+")),o=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).cookTime=0,i.state=1,i.isStick=!0,i}(0,a.default)(e,t);var i=e.prototype;return i.init=function(e){e&&e.state&&this.setState(e.state),t.prototype.init.call(this,e)},i.getPosForAnts=function(){return{x:this.x+80,y:this.y}},i.step=function(e){if(t.prototype.step.call(this,e),this.drag&&this.pointer&&this.location.campfire.isLit){var i=this.location.campfire.cookArea;Phaser.Rectangle.contains(i,this.x-65,this.y-65)?(3!==this.state&&(this.cookTime+=e,this.cookTime>3&&1===this.state?(this.setState(2),this.game.sounds.playSFX("item_cook",{spriteID:"sfx"})):this.cookTime>6&&2===this.state&&(this.setState(3),this.game.sounds.playSFX("item_cook",{spriteID:"sfx"}))),-45===this.angle||this.tweenOver&&!this.tweenOut||(this.tweenOut&&(this.tweenOut.stop(),this.tweenOut=null),this.tweenOver=this.game.add.tween(this).to({angle:-45},150,null,!0))):0===this.angle||!this.tweenOver&&this.tweenOut||(this.tweenOver&&(this.tweenOver.stop(),this.tweenOver=null),this.tweenOut=this.game.add.tween(this).to({angle:0},150,null,!0))}},i.setState=function(t){this.state=t,2===this.state?(this.frameName=this.id+"_cooked",this.cookTime=3.01):3===this.state&&(this.state=3,this.frameName=this.id+"_burnt",this.cookTime=6.01)},i.isCooked=function(){return 2===this.state},i.handleStartDrag=function(){this.game.add.tween(this).to({angle:0},150,null,!0)},i.hitGround=function(){this.game.add.tween(this).to({angle:90},150,null,!0)},i.canBeTrashed=function(){return!this.trashed&&(this.hasFlag("trashable")||3===this.state)},i.canBeHold=function(){return this.hasFlag("hold")},i.serialize=function(){var e=t.prototype.serialize.call(this);return e&&(e.state=this.state),e},e}(n.default);e.default=o},ohYO:function(t,e,i){},qFwY:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=i("zgbH"),h=function(t){function e(e){var i;return(i=t.call(this,e)||this).time=o.TIME_DAY,i.onToggle=new Phaser.Signal,i.createContent(),i.bgDay.inputEnabled=!0,i.bgDay.input.pixelPerfectClick=!0,i.bgDay.input.useHandCursor=!0,i.bgDay.events.onInputDown.add(i.handleInputDown,(0,a.default)(i)),i.canTap=!0,i}(0,n.default)(e,t);var i=e.prototype;return i.createContent=function(){this.bgDay=this.game.make.image(0,0,"ui_toggle_time","bg_day"),this.bgDay.anchor.set(.5),this.bgNight=this.game.make.image(0,0,"ui_toggle_time","bg_night"),this.bgNight.anchor.set(.5),this.frame=this.game.make.image(0,0,"ui_toggle_time","frame"),this.frame.anchor.set(.5),this.stars=this.game.make.image(0,0,"ui_toggle_time","stars"),this.stars.anchor.set(.5),this.rays=this.game.make.image(0,0,"ui_toggle_time","sun_rays"),this.rays.anchor.set(.5),this.sun=this.game.make.image(0,0,"ui_toggle_time","sun"),this.sun.anchor.set(.5,1),this.moon=this.game.make.image(0,0,"ui_toggle_time","moon"),this.moon.anchor.set(.5,1),this.moon.angle=180,this.container=this.game.make.group(),this.container.y=69,this.container.addChild(this.sun),this.container.addChild(this.moon),this.maskGr=this.game.make.graphics(),this.maskGr.beginFill(16711680),this.maskGr.drawCircle(0,0,90),this.maskGr.endFill(),this.container.mask=this.maskGr,this.bgNight.alpha=0,this.stars.alpha=0,this.addChild(this.bgDay),this.addChild(this.bgNight),this.addChild(this.container),this.addChild(this.maskGr),this.addChild(this.frame),this.addChild(this.rays),this.addChild(this.stars)},i.enable=function(){this.bgDay.input.enabled=!0},i.disable=function(){this.bgDay.input.enabled=!1},i.setNight=function(){this.time=o.TIME_NIGHT,this.rays.alpha=0,this.bgNight.alpha=1,this.container.angle=180,this.stars.alpha=1},i.handleInputDown=function(){this.canTap&&(this.canTap=!1,this.time=this.time===o.TIME_DAY?o.TIME_NIGHT:o.TIME_DAY,this.onToggle.dispatch(this.time),this.time===o.TIME_NIGHT?(this.game.add.tween(this.rays).to({alpha:0},100,Phaser.Easing.Quadratic.Out,!0),this.game.add.tween(this.bgNight).to({alpha:1},500,null,!0),this.game.add.tween(this.container).to({angle:-180},400,null,!0,100),this.game.add.tween(this.stars).to({alpha:1},100,null,!0,500).onComplete.add(this.handleAnimNightEnd,this)):(this.game.add.tween(this.stars).to({alpha:0},100,Phaser.Easing.Quadratic.Out,!0),this.game.add.tween(this.bgNight).to({alpha:0},500,null,!0),this.game.add.tween(this.container).to({angle:0},400,null,!0,100),this.game.add.tween(this.rays).to({alpha:1},100,null,!0,500).onComplete.add(this.handleAnimDayEnd,this)))},i.handleAnimNightEnd=function(){this.canTap=!0,this.container.angle=180,this.game.sounds.playSFX("generic_night",{spriteID:"sfx"})},i.handleAnimDayEnd=function(){this.canTap=!0,this.container.angle=0,this.game.sounds.playSFX("generic_day",{spriteID:"sfx"})},e}(Phaser.Group);e.default=h},"r+OO":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i,s=e.game,a=e.x,n=void 0===a?0:a,o=e.y,h=void 0===o?0:o,r=e.up,d=e.over,l=e.atlas,u=void 0===l?"ui_buttons":l,c=e.pressed,p=e.sfxID;return(i=t.call(this,{game:s,x:n,y:h,up:r,over:d,atlas:u,sfxID:p})||this).frameNormal=r,i.framePressed=c,i.anchor.set(.5),i.onPressed=new Phaser.Signal,i.state=1,"smartphone"===i.game.deviceMetric.platform.type&&i.scale.set(1.2),i}(0,a.default)(e,t);var i=e.prototype;return i.onDown=function(){t.prototype.onDown.call(this),1===this.state?this.setStatePressed():this.onPressed.dispatch()},i.setStatePressed=function(){this.state=2;var t=this.framePressed;this.setFrames(t,t,t,t),this.game.time.events.add(3e3,this.setStateNormal,this)},i.setStateNormal=function(){this.state=1;var t=this.frameNormal;this.setFrames(t,t,t,t)},e}(s(i("dD3M")).default);e.default=n},seRm:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).isEmpty=!0,i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.asset=this.game.make.image(0,0,this.data.key,"chair"),this.asset.anchor.set(.5,1),this.addChild(this.asset)},i.setLight=function(t){this.setLight2(t)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.asset.tint=this.tintColor},e}(s(i("/hvn")).default);e.default=n},ssJl:function(t,e,i){"use strict";var s=i("R6lU");i("GFHg"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=i("zgbH"),h=function(t){function e(e){var i;return(i=t.call(this,e)||this).backing=i.game.make.graphics(),i.backing.beginFill(0,.2),i.backing.drawRoundedRect(0,0,200,20,10),i.addChild(i.backing),i.fill=i.game.make.graphics(),i.fill.beginFill(7822995),i.fill.drawRoundedRect(0,0,200,20,10),i.addChild(i.fill),i.masker=i.game.make.graphics(),i.masker.beginFill(16711680),i.masker.drawRect(0,0,200,20),i.addChild(i.masker),i.fill.mask=i.masker,i.copy=i.game.add.text(0,0,i.game.copy.getCopy("loading")+" 0%",{font:"47px "+o.FONT_REGULAR,fill:"#775e93",boundsAlignH:"center"}),i.copy.setTextBounds(-50,-90,300),i.addChild(i.copy),i.setProgress(0),i}(0,n.default)(e,t);var i=e.prototype;return i.setProgress=function(t){this.masker.clear(),this.masker.beginFill(16711680),this.masker.drawRect(0,0,this.fill.width*t,20);var e=Math.round(100*t);this.copy.text=this.game.copy.getCopy("loading")+" "+e+"%"},i.setProcessing=function(){this.copy.text=this.game.copy.getCopy("processing")},i.destroy=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.copy.destroy(),this.backing.destroy(),this.fill.destroy(),this.masker.destroy(),this.backing=null,this.fill=null,this.masker=null,this.copy=null,t.prototype.destroy.call(this,e,i)},(0,a.default)(e,[{key:"width",get:function(){return this.backing.width}},{key:"height",get:function(){return this.backing.height}}]),e}(Phaser.Group);e.default=h},tAmo:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("/hvn")),o=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).beeTree,i.onFlower=!1,i.timeToReturn=10,i.asset.setMixByName("fly","idle",.2),i.asset.setMixByName("idle","fly",.2),i.setAnim("fly"),i}(0,a.default)(e,t);var i=e.prototype;return i.init=function(t,e){this.active=!0,this.visible=!0,this.goHome=!1,this.homePos={},this.x=this.homePos.x=t,this.y=this.homePos.y=e,this.rootBone.scaleX=1,this.state=1,this.timeToReturn=10},i.setTarget=function(t,e){this.targetId=e;var i=t.x-this.homePos.x,s=t.y-this.homePos.y;this.path={x:[],y:[]},this.path.x.push(this.homePos.x),this.path.y.push(this.homePos.y),this.path.x.push(this.homePos.x+.1*i),this.path.y.push(this.homePos.y+.9*s),this.path.x.push(this.homePos.x+.8*i),this.path.y.push(this.homePos.y+.8*s),this.path.x.push(t.x),this.path.y.push(t.y),this.points=[];for(var a=0;a<=100;a++){var n=Phaser.Math.catmullRomInterpolation(this.path.x,a/100),o=Phaser.Math.catmullRomInterpolation(this.path.y,a/100);this.points.push({x:n,y:o})}this.time=0},i.handleInputDown=function(){this.onFlower&&this.returnHome()},i.returnHome=function(){this.onFlower=!1,this.rootBone.scaleX=-1,this.setAnim("fly"),this.state=3},i.step=function(e){if(this.active&&t.prototype.step.call(this,e),this.onFlower&&(this.timeToReturn-=e,this.timeToReturn<=0&&this.returnHome()),1===this.state)if(this.time+=.4*e,this.time<=1){var i=Math.round(100*this.time),s=this.points[i];this.x=s.x,this.y=s.y}else this.state=2,this.time=1,this.onFlower=!0,this.setAnim("idle");else if(3===this.state)if(this.time-=.4*e,this.time>=0){var a=Math.round(100*this.time),n=this.points[a];this.x=n.x,this.y=n.y}else this.state=2,this.beeTree.removeBee(this)},i.removeMe=function(){this.active=!1,this.visible=!1},i.serialize=function(){return null},e}(n.default);e.default=o},tn0Q:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=function(t){function e(e,i,s,a,n,o){var h;return(h=t.call(this,e)||this).gameHud=n,h.circle1=h.game.make.image(0,0,"drag_area"),h.circle1.anchor.set(.5),h.circle2=h.game.make.image(0,0,"drag_area"),h.circle2.anchor.set(.5),h.hand=h.game.make.image(0,0,"hand"),h.hand.anchor.set(0,.5),"desktop"===h.game.deviceMetric.platform.type&&h.scale.set(.5),h.circle1.alpha=0,h.circle2.alpha=0,h.hand.alpha=0,h.addChild(h.circle1),h.addChild(h.circle2),h.addChild(h.hand),h.x=i,h.y=s,h.steps=0,h.slide(),o&&h.gameHud.state.hintsController.displayHint(null,null,"hint_target_0"+a),h}(0,n.default)(e,t);var i=e.prototype;return i.slide=function(){this.circle1.x=0,this.circle2.x=0,this.hand.x=0,this.circle1.alpha=0,this.circle2.alpha=0,this.hand.alpha=0;var t=this.game.add.tween(this.circle2).to({alpha:1},250,Phaser.Easing.Quadratic.Out),e=this.game.add.tween(this.circle2).to({x:300},800,Phaser.Easing.Quadratic.Out,!1,400),i=this.game.add.tween(this.circle2).to({alpha:0},250,Phaser.Easing.Quadratic.Out,!1,250);t.chain(e,i);var s=this.game.add.tween(this.hand).to({alpha:1},250,Phaser.Easing.Quadratic.Out),a=this.game.add.tween(this.hand).to({x:300,angle:19},800,Phaser.Easing.Quadratic.Out,!1,400),n=this.game.add.tween(this.hand).to({alpha:0},250,Phaser.Easing.Quadratic.Out,!1,350);s.chain(a,n),n.onComplete.addOnce(this.endSlide,this);var o=this.game.add.tween(this.circle1).to({alpha:[.7,0],x:[150,300]},800,Phaser.Easing.Quadratic.Out,!1,800);t.start(),s.start(),o.start()},i.endSlide=function(){0===this.steps?(this.steps++,this.slide()):(this.gameHud.hideDragHint(),this.destroy())},(0,a.default)(e,[{key:"depth",get:function(){return this.y+1100}}]),e}(Phaser.Group);e.default=o},uJez:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("C9uT")),o=a(i("86MP")),h=s(i("QqF+")),r=i("zgbH"),d=i("zgbH"),l=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).loadTexture("empty"),i.state=1,i.hitArea=new Phaser.Rectangle(-50,-65,100,65),i.bbArea=new Phaser.Rectangle(-50,-65,100,65),i.asset=i.game.make.spine(0,-40,"spine_"+i.id,!0),i.asset.anchor.set(.5,1),i.addChild(i.asset),i.rootBone=i.asset.skeleton.getRootBone(),i.setScale(h.SIZE_GROUND),i.asset.setAnimationByName(0,"01_closed",!1),i}(0,o.default)(e,t);var i=e.prototype;return i.setScale=function(t){this.rootBone&&(this.rootBone.scaleX=this.rootBone.scaleY=t)},i.updateBounds=function(){this.visible?(this.updateTransform(),this.bbArea.x=this.worldPosition.x-.5*this.bbArea.width,this.bbArea.y=this.worldPosition.y-this.bbArea.height,this.bb=this.bbArea):this.bb=this.emptyBB},i.setLight=function(t){var e=r.NIGHT_TINT,i=(e>>16)/255,s=(e>>8&255)/255,a=(255&e)/255;this.asset.skeleton.color.r=i+t*(1-i),this.asset.skeleton.color.g=s+t*(1-s),this.asset.skeleton.color.b=a+t*(1-a)},i.changeState=function(){switch(this.state++,this.state=5===this.state?1:this.state,this.state){case 1:this.asset.setAnimationByName(0,"01_closed",!1);break;case 2:this.asset.setAnimationByName(0,"02_opening",!1),this.asset.onComplete.addOnce(this.changeState,this);break;case 3:this.hitArea=new Phaser.Rectangle(-85,-65,170,65),this.asset.setAnimationByName(0,"03_open",!1);break;case 4:this.hitArea=new Phaser.Rectangle(-50,-65,100,65),this.asset.setAnimationByName(0,"04_closing",!1),this.asset.onComplete.addOnce(this.changeState,this)}},i.canStack=function(e){return 1===this.state&&t.prototype.canStack.call(this,e)},i.handleInputUp=function(){this.location.stopDragItem(this),this.drag=!1,this.updateBounds(),this.setScale(h.SIZE_GROUND);var t=this.pointer.x-this.startPos.x,e=this.pointer.y-this.startPos.y,i=t*t+e*e;if(this.pointer=null,i<d.TAP_LIMIT&&"desktop"!==this.game.deviceMetric.platform.type){var s="desktop"===this.game.deviceMetric.platform.type?h.SHIFT_UP_DESKTOP:h.SHIFT_UP_MOBILE;this.y-=s,this.changeState()}this.onDrop.dispatch(this)},i.handleTap=function(){this.changeState()},i.canHover=function(){return!this.drag},i.update=function(){this.asset.update(),t.prototype.update.call(this)},i.pulse=function(t){void 0===t&&(t=1500);var e=.8,i=1.3,s=this.game.add.tween(this.rootBone).to({scaleX:[i,e,i,e,i,e,1],scaleY:[e,i,e,i,e,i,1]},t,null),a=this.game.add.tween(this.rootBone).to({scaleX:[i,e,i,e,i,e,1],scaleY:[e,i,e,i,e,i,1]},t,null,!1,200);s.chain(a),s.start()},(0,n.default)(e,[{key:"height",get:function(){return 65}}]),e}(h.default);e.default=l},v2oV:function(t,e,i){"use strict";var s=i("IfHf");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("zgbH")),n=i("TEuq"),o=function(){function t(t){this.game=t,this.rotateScreen=!1}return t.prototype.updateGameSize=function(t){if(this.game.scale){var e=t.width,i=t.height,s=768/a.GAME_SAFE_HEIGHT;i<=768&&(s=i/a.GAME_SAFE_HEIGHT),e<a.GAME_SAFE_WIDTH&&s>e/a.GAME_SAFE_WIDTH&&(s=e/a.GAME_SAFE_WIDTH),e=e>this.game.defaultWidth?this.game.defaultWidth:Math.floor(e),i=i>768?768:Math.floor(i),e=Math.floor(e/s),i=Math.floor(i/s),e%2==1&&e++,n.Debugger.log("log","Display size",e,i,", scale is",s),this.game.screenPadding=.02*Math.max(e,i),this.game.scale.setGameSize(e,i),this.game.scale.setUserScale(s),this.game.offsetWidth=e/2-this.game.defaultWidth/2,this.game.offsetHeight=i/2-this.game.defaultHeight/2}},t}();e.default=o},v5o0:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).version=n.version||1,i.back.frameName="back_"+i.version,i.front.frameName="front_"+i.version,i.empty=!0,i.addButton(),i}(0,a.default)(e,t);var i=e.prototype;return i.createAsset=function(){this.back=this.game.make.image(this.data.back_offset.x,this.data.back_offset.y,this.data.key,"back_1"),this.back.x-=.5*this.back.width,this.back.y-=this.back.height,this.container=this.game.make.group(),this.front=this.game.make.image(0,0,this.data.key,"front_1"),this.front.anchor.set(.5,1),this.addChild(this.back),this.addChild(this.container),this.addChild(this.front)},i.addButton=function(){this.front.inputEnabled=!0,this.front.events.onInputDown.add(this.handleInputDown,this),this.front.input.pixelPerfectClick=!0,this.front.input.pixelPerfectOver=!0,this.front.input.useHandCursor=!0,this.back.inputEnabled=!0,this.back.input.pixelPerfectClick=!0,this.back.input.pixelPerfectOver=!0,this.back.input.useHandCursor=!1},i.setLight=function(t){this.setLight2(t)},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.back.tint=this.tintColor,this.front.tint=this.tintColor},i.handleInputDown=function(){this.version++,this.version>3&&(this.version=1),this.back.frameName="back_"+this.version,this.front.frameName="front_"+this.version,this.game.sounds.playSFX("item_tentfabric",{spriteID:"sfx"}),this.onChange.dispatch()},i.canAddCharacter=function(t,e){return t=t-this.x-this.back.x,e=e-this.y-this.back.y,!!(this.empty&&t>0&&t<this.back.width&&e>0&&e<this.back.height&&this.back.input.checkPixel(t,e))},i.addCharacter=function(t){this.empty=!1,t.putIntoTent(this,this.data.sleep),this.container.addChild(t),this.game.sounds.playSFX("item_sleeping",{spriteID:"sfx"})},i.animateGrowUp=function(){t.prototype.animateGrowUp.call(this),this.game.sounds.playSFX("item_tentup",{spriteID:"sfx"})},i.serialize=function(){var e=t.prototype.serialize.call(this);return e.version=this.version,e},e}(s(i("/hvn")).default);e.default=n},vGYV:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ohYO");var n=i("TEuq"),o=a(i("a8kN")),h=a(i("LQdk")),r=a(i("GhOu")),d=a(i("m/lz")),l=s(i("zgbH"));i("DaKh");var u=i("vaxU");i("o+jM");o.default,h.default,r.default,window.PhaserGlobal={hideBanner:!0},document.getElementById(l.GAME_DIV_ID).className=l.GAME_DIV_CLASSNAME,n.Debugger.minLevel("GENERAL"),n.Debugger.enable(!1),n.Application.uses(new u.GoogleAnalytics);var c=new n.Application({features:{captions:!0,vo:!0,music:!0,sfx:!0}}),p=new d.default;c.state.ready.subscribe((function(t){t&&p.init(c)})),c.state.pause.subscribe((function(t){p.game&&p.pauseGame(t)})),c.state.captionsMuted.subscribe((function(t){p.captionsMuted=t,p.game&&p.game.springRollCaptionsPlugin&&p.game.springRollCaptionsPlugin.setMute(t)})),c.state.soundVolume.subscribe((function(t){p.game&&p.game.sounds&&(p.game.sounds.soundVolume=t)})),c.state.voVolume.subscribe((function(t){p.game&&p.game.sounds&&(p.game.sounds.voVolume=t)})),c.state.musicVolume.subscribe((function(t){p.game&&p.game.sounds&&(p.game.sounds.musicVolume=t)})),c.state.sfxVolume.subscribe((function(t){p.game&&p.game.sounds&&(p.game.sounds.sfxVolume=t)}));var m=c;e.default=m},wqsV:function(t,e,i){"use strict";i("a/rO"),i("/TzG"),i("vw/H"),i("XEfP"),i("388n"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={backspace:8,tab:9,enter:13,return:13,shift:16,"⇧":16,control:17,ctrl:17,"⌃":17,alt:18,option:18,"⌥":18,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,L:37,"←":37,up:38,U:38,"↑":38,right:39,R:39,"→":39,down:40,D:40,"↓":40,insert:45,delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,"⌘":91,command:91,kp_0:96,kp_1:97,kp_2:98,kp_3:99,kp_4:100,kp_5:101,kp_6:102,kp_7:103,kp_8:104,kp_9:105,kp_multiply:106,kp_plus:107,kp_minus:109,kp_decimal:110,kp_divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,equal:187,"=":187,comma:188,",":188,minus:189,"-":189,period:190,".":190},a=function(){};function n(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&(t["e"+e+i]=i,t[e+i]=function(){t["e"+e+i](window.event)},t.attachEvent("on"+e,t[e+i]))}function o(t,e,i){t.removeEventListener(e,i)}function h(t){t.index=0}function r(t,e){var i=t.str,s=t.seq,a=t.keys,n=t.next,o=t.fail,r=t.done,d=t.index;e===a[d]?(t.index++,n(i,s[d],d,s),t.index===a.length&&(r(i),h(t))):d>0&&(h(t),o(i))}var d=function(){function t(t){var e,i,n,o,h,r,d,l,u,c,p=t.sequence,m=void 0===p?"↑ ↑ ↓ ↓ ← →":p,g=t.onComplete,f=t.onNext,v=t.onFail;this.touchCoords={startX:null,startY:null,endX:null,endY:null},this.bindedNext=this.next.bind(this),this.bindedFail=this.fail.bind(this),this.bindedComplete=this.complete.bind(this),this.bindedKeyDown=this.keydown.bind(this),this.bindedKeyUp=this.keyup.bind(this),this.bindedTouchStart=this.touchstart.bind(this),this.bindedTouchEnd=this.touchend.bind(this),this.touchEnabled="ontouchstart"in window,this.sequence=(e=m,i={done:g||this.bindedComplete,next:f||this.bindedNext,fail:v||this.bindedFail},n=i.done,o=void 0===n?a:n,h=i.next,r=void 0===h?a:h,d=i.fail,l=void 0===d?a:d,u=e.split(" "),c=u.map((function(t){return s[t]})),{index:0,str:e,next:r,fail:l,done:o,seq:u,keys:c}),this.enable()}var e=t.prototype;return e.enable=function(){n(window,"keydown",this.bindedKeyDown),n(window,"keyup",this.bindedKeyUp),this.touchEnabled&&(n(window,"touchstart",this.bindedTouchStart),n(window,"touchend",this.bindedTouchEnd))},e.disable=function(){o(window,"keydown",this.bindedKeyDown),o(window,"keyup",this.bindedKeyUp),this.touchEnabled&&(o(window,"touchstart",this.bindedTouchStart),o(window,"touchend",this.bindedTouchEnd))},e.destroy=function(){this.disable(),this.sequence=null},e.keydown=function(t){},e.keyup=function(t){r(this.sequence,t.keyCode)},e.touchstart=function(t){this.touchCoords.startX=t.touches[0].screenX,this.touchCoords.startY=t.touches[0].screenY},e.touchend=function(t){this.touchCoords.endX=t.changedTouches[0].screenX,this.touchCoords.endY=t.changedTouches[0].screenY,this.determineSwipeDirection(this.touchCoords)},e.determineSwipeDirection=function(t){var e=t.startX,i=t.startY,a=t.endX-e,n=t.endY-i,o=Math.abs(a),h=Math.abs(n);(Math.abs(a)>100||Math.abs(n)>100)&&(h>1.5*o?n>100?r(this.sequence,s.down):n<-100&&r(this.sequence,s.up):o>1.5*h&&(a>100?r(this.sequence,s.right):a<-100&&r(this.sequence,s.left)))},e.fail=function(t){},e.next=function(t,e,i,s){},e.complete=function(t){},t}();e.default=d},x1tP:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("6R9f")),o=i("5mNR"),h=s(i("gsGo")),r=a(i("G9dM")),d=a(i("RZI6")),l=a(i("PFbm")),u=i("6YV8"),c=function(){function t(t){this.game=t,this.gameResets=1}var e=t.prototype;return e.init=function(){this.onGamePaused=new Phaser.Signal,this.onGameResume=new Phaser.Signal,this.stateController=new n.default(this.game),this.shortcutsModel=new r.default,this.shortcuts=new h.ShortcutStub},e.startBoot=function(){this.game.state.start(o.STATE_BOOT,!0,!0)},e.startLoad=function(){},e.reloadApp=function(){this.startBoot()},e.deleteSave=function(t){this.saves.deleteSave(t)},e.createSaveId=function(t){this.saves.setSaveID(t)},e.shortcutDebugPond=function(){},e.updateShortcutsState=function(){},e.loadComplete=function(){this.game.springRollCaptionsPlugin.setData(this.game.cache.getJSON("vos_captions")),(0,u.getGA)().track({action:"startGame"}),this.showWelcomeScreen()},e.showWelcomeScreen=function(t){if(void 0===t&&(t=!1),this.game.sounds.stopAllSFX(),this.shortcuts.reset(),this.game.paused&&this.resumeGame(),this.saves||(this.saves=new d.default),t){var e=this.saves.load();e.items=null,e.furnitures=null,e.characters=null,e.start_point=null,e.time=null,this.saves.save({data:e}),(0,u.getGA)().track({action:"clickReset",value:this.gameResets}),this.gameResets++}this.startState(o.STATE_WELCOME,{})},e.startGame=function(){(0,u.getGA)().track({action:"startLevel"}),this.startState(o.STATE_CAMPOUT)},e.getTransition=function(){return this.transition=new l.default(this.game),this.transition},e.startState=function(t,e){this.game.controller.stateController.startState({nextState:t,nextStateParams:[!0,!1,e]})},e.pauseGame=function(){this.game.paused||(this.onGamePaused.dispatch(),this.game.paused=!0,this.game.sounds.pauseAll())},e.resumeGame=function(){this.game.paused&&(this.onGameResume.dispatch(),this.game.paused=!1,this.game.sounds.resumeAll())},e.playVO=function(t){return this.game.springRollCaptionsPlugin.playCaption(t),this.sndVO=this.game.sounds.playVO(t,{spriteID:"vos"}),this.sndVO},e.stopVO=function(){this.sndVO&&(this.game.springRollCaptionsPlugin.stopCaption(),this.sndVO.stop())},t}();e.default=c},yRMj:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=function(t){function e(e){var i,s=e.game,a=e.data;(i=t.call(this,s)||this).data=a,i.day=i.game.make.group(),i.night=i.game.make.group(),i.night.alpha=0,i.addChild(i.day),i.addChild(i.night);var n=0;do{var o=i.game.make.image(n,0,a.key_day);i.day.addChild(o),o=i.game.make.image(n,0,a.key_night),i.night.addChild(o),n+=o.width}while(n<a.width);return i}(0,n.default)(e,t);var i=e.prototype;return i.setDay=function(){this.game.add.tween(this.night).to({alpha:0},500,null,!0)},i.setNight=function(t){t?this.night.alpha=1:this.game.add.tween(this.night).to({alpha:1},500,null,!0)},(0,a.default)(e,[{key:"width",get:function(){return this.data.width}}]),e}(Phaser.Group);e.default=o},yg50:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("86MP")),o=i("zgbH"),h=s(i("QqF+")),r=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).isContainer=!0,i.itemsContainer=i.game.make.group(),i.itemsContainer.x=i.data.container.x,i.itemsContainer.y=i.data.container.y,i.front=i.game.make.image(0,0,"items",i.id+"_front"),i.front.anchor.set(.5,1),i.addChild(i.itemsContainer),i.addChild(i.front),i.items=[],i}(0,n.default)(e,t);var i=e.prototype;return i.init=function(t){this.isOpen=t.open,this.isOpen?this.frameName=this.id+"_back":(this.itemsContainer.visible=!1,this.front.visible=!1);for(var e=0;e<t.items.length;e++){var i=this.location.addItem(t.items[e]);this.addItem(i,!1)}},i.updateTint=function(e,i,s){t.prototype.updateTint.call(this,e,i,s),this.front.tint=this.tint},i.lightUp=function(){t.prototype.lightUp.call(this),this.front.tint=this.tint;for(var e=0;e<this.items.length;e++)this.items[e].lightUp()},i.darken=function(){t.prototype.darken.call(this),this.front.tint=this.tint;for(var e=0;e<this.items.length;e++)this.items[e].darken()},i.addItem=function(t,e){void 0===e&&(e=!0),t.disable(),this.itemsContainer.addChild(t);var i=.5*this.data.container.width;t.x=Phaser.Math.between(-i,i),t.y=0,t.data.container_scale?t.setScale(t.data.container_scale):t.setScale(1),t.container=this,this.items.push(t),this.updateBounds(),this.animateSquize(),this.game.sounds.playSFX("item_combine",{spriteID:"sfx"}),e&&this.onChange.dispatch()},i.emptyContainer=function(){if(0!==this.items.length){for(var t=Math.max(1,this.items.length-1),e=Math.min(150,30*t),i=e/t,s=this.x-.5*e,a=0;a<this.items.length;a++){var n=this.items[a];n.enable(),n.setScale(h.SIZE_GROUND),n.x=this.worldPosition.x-this.location.x,n.y=this.worldPosition.y,n.container=null;var o=i*a+Phaser.Math.between(-5,5),r=Phaser.Math.between(5,30),d=s+o,l=this.y+r;this.location.addObjectToLocation(n),this.location.tryPutIntoPond(n)?(s=n.x-.5*e,n.animateToPosition(s+o,n.y,500,!0)):(n.animateToPosition(d,l),this.location.setDestinationPosition(n))}this.items=[],this.location.addCloud({x:this.x,y:this.y-.3*this.height,h:this.bb.height}),this.game.sounds.playSFX("item_combine",{spriteID:"sfx"})}},i.openContainer=function(){this.isOpen=!0,this.frameName=this.id+"_back",this.front.visible=!0,this.itemsContainer.visible=!0},i.canPutItem=function(t){if(this.isOpen&&!t.hasFlag("backpack_only")){if(this.updateBounds(),this.bb.x+=-this.location.x,Phaser.Rectangle.contains(this.bb,t.x,t.y))return this.bb.x+=this.location.x,!0;this.bb.x+=this.location.x}return!1},i.handleInputUp=function(){this.location.stopDragItem(this),this.drag=!1,this.updateBounds(),this.setScale(h.SIZE_GROUND);var t=this.pointer.x-this.startPos.x,e=this.pointer.y-this.startPos.y,i=t*t+e*e;if(this.pointer=null,i<o.TAP_LIMIT&&"desktop"!==this.game.deviceMetric.platform.type){var s="desktop"===this.game.deviceMetric.platform.type?h.SHIFT_UP_DESKTOP:h.SHIFT_UP_MOBILE;this.y-=s,this.handleTap()}this.onDrop.dispatch(this)},i.handleTap=function(){this.isOpen?(this.animateStretch(),this.game.time.events.add(150,this.emptyContainer,this)):this.openContainer()},i.canHover=function(){return!this.drag&&this.items.length>0},i.update=function(){this.itemsContainer.update(),t.prototype.update.call(this)},i.serialize=function(){var e=t.prototype.serialize.call(this);e.open=this.isOpen,e.items=[];for(var i=0;i<this.items.length;i++)e.items.push(this.items[i].id);return e},e}(h.default);e.default=r},zOXe:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("C9uT")),o=a(i("M1I4")),h=a(i("86MP")),r=s(i("QqF+")),d=i("zgbH"),l=function(t){function e(e){var i,s=e.game,a=e.location,n=e.data;return(i=t.call(this,{game:s,location:a,data:n})||this).isOn=!1,i.ray=i.game.make.image(28,-18,"items","flashlight_ray"),i.ray.anchor.set(0,.5),i.ray.visible=!1,i.addChild(i.ray),i.area&&(i.area.width=80),i.location.lights.addLight((0,o.default)(i)),i}(0,h.default)(e,t);var i=e.prototype;return i.init=function(e){e&&e.state&&this.setState("on"===e.state),t.prototype.init.call(this,e)},i.canHover=function(){return!this.drag},i.handleInputUp=function(){this.location.stopDragItem(this),this.drag=!1,this.updateBounds(),this.scale.set(r.SIZE_GROUND);var t=this.pointer.x-this.startPos.x,e=this.pointer.y-this.startPos.y,i=Math.sqrt(t*t+e*e);this.pointer=null,i<d.TAP_LIMIT&&"desktop"!==this.game.deviceMetric.platform.type&&this.handleTap(),this.onDrop.dispatch(this)},i.handleTap=function(){var t="desktop"===this.game.deviceMetric.platform.type?r.SHIFT_UP_DESKTOP:r.SHIFT_UP_MOBILE;this.y-=t,this.setState(!this.isOn),this.game.sounds.stopAudioSprite("generic_down",{spriteID:"sfx"}),this.game.sounds.playSFX("item_torch",{spriteID:"sfx"})},i.setState=function(t){this.isOn=t,this.ray.visible=this.isOn},i.putInHand=function(e,i){t.prototype.putInHand.call(this,e,i),this.ray.x=56*(1-this.anchor.x),this.ray.y=36*(1-this.anchor.y)-18},i.pickupFromHand=function(){t.prototype.pickupFromHand.call(this),this.ray.x=56*(1-this.anchor.x),this.ray.y=36*(1-this.anchor.y)-18},i.getLight=function(){return{x:this.worldPosition.x+(this.scale.x>0?170:-170),y:this.worldPosition.y-18,power:this.isOn?1:0,w:120,h:60}},i.serialize=function(){var e=t.prototype.serialize.call(this);return e&&(e.state=this.isOn?"on":"off"),e},(0,n.default)(e,[{key:"width",get:function(){return 350}}]),e}(r.default);e.default=l},zgbH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TAP_LIMIT=e.TIME_NIGHT=e.TIME_DAY=e.NIGHT_TINT=e.FONT_SUBTITLE_SIZE=e.FONT_SUBTITLE_CSS=e.FONT_SUBTITLE=e.FONT_COPY_CSS=e.FONT_COPY=e.FONT_TITLE=e.FONT_CSS=e.FONT_ITALIC=e.FONT_LIGHT=e.FONT_REGULAR=e.FONT_EXTRA_BOLD=e.FONT_BOLD_ITALIC=e.FONT_BOLD=e.PATH_ASSETS=e.PATH_BASE=e.SAVED_PLAYER_DATA_PREFIX=e.SAVED_PLAYER_DATA_ID=e.GAME_DIV_CLASSNAME=e.GAME_DIV_ID=e.DECODE_TIMEOUT_SPEED=e.GAME_BACKGROUND_COLOR=e.GAME_SAFE_HEIGHT=e.GAME_SAFE_WIDTH=e.GAME_HEIGHT_DEFAULT=e.GAME_WIDTH_DEFAULT=void 0;e.GAME_WIDTH_DEFAULT=1680;e.GAME_HEIGHT_DEFAULT=720;e.GAME_SAFE_WIDTH=960;e.GAME_SAFE_HEIGHT=720;e.GAME_BACKGROUND_COLOR="0xFFFFFF";e.DECODE_TIMEOUT_SPEED=3e3;e.GAME_DIV_ID="gameContent";e.GAME_DIV_CLASSNAME="canvas_container absolute_center page_background trap";e.SAVED_PLAYER_DATA_ID="ewwnature";e.SAVED_PLAYER_DATA_PREFIX="playersave_";e.PATH_BASE="./";e.PATH_ASSETS="assets/";e.FONT_BOLD="Elinor";e.FONT_BOLD_ITALIC="Elinor";e.FONT_EXTRA_BOLD="Elinor";e.FONT_REGULAR="Elinor";e.FONT_LIGHT="Elinor";e.FONT_ITALIC="Elinor";e.FONT_CSS="stylesheet.css";e.FONT_TITLE="Elinor";e.FONT_COPY="Elinor";e.FONT_COPY_CSS="stylesheet.css";e.FONT_SUBTITLE="Elinor";e.FONT_SUBTITLE_CSS="stylesheet.css";e.FONT_SUBTITLE_SIZE="32";e.NIGHT_TINT=9800385;e.TIME_DAY="day";e.TIME_NIGHT="night";e.TAP_LIMIT=8}},[[0,2,1]]]);
//# sourceMappingURL=../sourcemaps/js/main.2115a396.js.map