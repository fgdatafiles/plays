(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(t,e,i){var n;!function(){function o(t,e,i){return t.call.apply(t.bind,arguments)}function a(t,e,i){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,n),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function s(t,e,i){return(s=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:a).apply(null,arguments)}var r=Date.now||function(){return+new Date};var h=!!window.FontFace;function l(t,e,i,n){if(e=t.c.createElement(e),i)for(var o in i)i.hasOwnProperty(o)&&("style"==o?e.style.cssText=i[o]:e.setAttribute(o,i[o]));return n&&e.appendChild(t.c.createTextNode(n)),e}function c(t,e,i){(t=t.c.getElementsByTagName(e)[0])||(t=document.documentElement),t.insertBefore(i,t.lastChild)}function u(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e,i){e=e||[],i=i||[];for(var n=t.className.split(/\s+/),o=0;o<e.length;o+=1){for(var a=!1,s=0;s<n.length;s+=1)if(e[o]===n[s]){a=!0;break}a||n.push(e[o])}for(e=[],o=0;o<n.length;o+=1){for(a=!1,s=0;s<i.length;s+=1)if(n[o]===i[s]){a=!0;break}a||e.push(n[o])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(t,e){for(var i=t.className.split(/\s+/),n=0,o=i.length;n<o;n++)if(i[n]==e)return!0;return!1}function f(t){if("string"==typeof t.f)return t.f;var e=t.m.location.protocol;return"about:"==e&&(e=t.a.location.protocol),"https:"==e?"https:":"http:"}function g(t,e,i){function n(){r&&o&&a&&(r(s),r=null)}e=l(t,"link",{rel:"stylesheet",href:e,media:"all"});var o=!1,a=!0,s=null,r=i||null;h?(e.onload=function(){o=!0,n()},e.onerror=function(){o=!0,s=Error("Stylesheet failed to load"),n()}):setTimeout(function(){o=!0,n()},0),c(t,"head",e)}function m(t,e,i,n){var o=t.c.getElementsByTagName("head")[0];if(o){var a=l(t,"script",{src:e}),s=!1;return a.onload=a.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,i&&i(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&o.removeChild(a))},o.appendChild(a),setTimeout(function(){s||(s=!0,i&&i(Error("Script load timeout")))},n||5e3),a}return null}function y(){this.a=0,this.c=null}function b(t){return t.a++,function(){t.a--,w(t)}}function v(t,e){t.c=e,w(t)}function w(t){0==t.a&&t.c&&(t.c(),t.c=null)}function _(t){this.a=t||"-"}function C(t,e){this.c=t,this.f=4,this.a="n";var i=(e||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function S(t){var e=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var n=t[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?e.push("'"+n+"'"):e.push(n)}return e.join(",")}function T(t){return t.a+t.f}function x(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function E(t){var e=4,i="n",n=null;return t&&((n=t.match(/(normal|oblique|italic)/i))&&n[1]&&(i=n[1].substr(0,1).toLowerCase()),(n=t.match(/([1-9]00|normal|bold)/i))&&n[1]&&(/bold/i.test(n[1])?e=7:/[1-9]00/.test(n[1])&&(e=parseInt(n[1].substr(0,1),10)))),i+e}function k(t){if(t.g){var e=d(t.f,t.a.c("wf","active")),i=[],n=[t.a.c("wf","loading")];e||i.push(t.a.c("wf","inactive")),p(t.f,i,n)}O(t,"inactive")}function O(t,e,i){t.j&&t.h[e]&&(i?t.h[e](i.c,T(i)):t.h[e]())}function A(t,e){this.c=t,this.f=e,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function P(t){c(t.c,"body",t.a)}function D(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+S(t.c)+";font-style:"+x(t)+";font-weight:"+t.f+"00;"}function L(t,e,i,n,o,a){this.g=t,this.j=e,this.a=n,this.c=i,this.f=o||3e3,this.h=a||void 0}function I(t,e,i,n,o,a,s){this.v=t,this.B=e,this.c=i,this.a=n,this.s=s||"BESbswy",this.f={},this.w=o||3e3,this.u=a||null,this.o=this.j=this.h=this.g=null,this.g=new A(this.c,this.s),this.h=new A(this.c,this.s),this.j=new A(this.c,this.s),this.o=new A(this.c,this.s),t=D(t=new C(this.a.c+",serif",T(this.a))),this.g.a.style.cssText=t,t=D(t=new C(this.a.c+",sans-serif",T(this.a))),this.h.a.style.cssText=t,t=D(t=new C("serif",T(this.a))),this.j.a.style.cssText=t,t=D(t=new C("sans-serif",T(this.a))),this.o.a.style.cssText=t,P(this.g),P(this.h),P(this.j),P(this.o)}_.prototype.c=function(t){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},L.prototype.start=function(){var t=this.c.m.document,e=this,i=r(),n=new Promise(function(n,o){!function a(){r()-i>=e.f?o():t.fonts.load(function(t){return x(t)+" "+t.f+"00 300px "+S(t.c)}(e.a),e.h).then(function(t){1<=t.length?n():setTimeout(a,25)},function(){o()})}()}),o=new Promise(function(t,i){setTimeout(i,e.f)});Promise.race([o,n]).then(function(){e.g(e.a)},function(){e.j(e.a)})};var R={D:"serif",C:"sans-serif"},M=null;function G(){if(null===M){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);M=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return M}function j(t,e,i){for(var n in R)if(R.hasOwnProperty(n)&&e===t.f[R[n]]&&i===t.f[R[n]])return!0;return!1}function N(t){var e,i=t.g.a.offsetWidth,n=t.h.a.offsetWidth;(e=i===t.f.serif&&n===t.f["sans-serif"])||(e=G()&&j(t,i,n)),e?r()-t.A>=t.w?G()&&j(t,i,n)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?H(t,t.v):H(t,t.B):function(t){setTimeout(s(function(){N(this)},t),50)}(t):H(t,t.v)}function H(t,e){setTimeout(s(function(){u(this.g.a),u(this.h.a),u(this.j.a),u(this.o.a),e(this.a)},t),0)}function B(t,e,i){this.c=t,this.a=e,this.f=0,this.o=this.j=!1,this.s=i}I.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=r(),N(this)};var F=null;function W(t){0==--t.f&&t.j&&(t.o?((t=t.a).g&&p(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),O(t,"active")):k(t.a))}function z(t){this.j=t,this.a=new function(){this.c={}},this.h=0,this.f=this.g=!0}function U(t,e,i,n,o){var a=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=o||null,r=n||{};if(0===i.length&&a)k(e.a);else{e.f+=i.length,a&&(e.j=a);var h,l=[];for(h=0;h<i.length;h++){var c=i[h],u=r[c.c],d=e.a,f=c;d.g&&p(d.f,[d.a.c("wf",f.c,T(f).toString(),"loading")]),O(d,"fontloading",f),d=null,null===F&&(F=!!window.FontFace&&(!(f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))||42<parseInt(f[1],10))),d=F?new L(s(e.g,e),s(e.h,e),e.c,c,e.s,u):new I(s(e.g,e),s(e.h,e),e.c,c,e.s,t,u),l.push(d)}for(h=0;h<l.length;h++)l[h].start()}},0)}function V(t,e){this.c=t,this.a=e}function Y(t,e){this.c=t,this.a=e}B.prototype.g=function(t){var e=this.a;e.g&&p(e.f,[e.a.c("wf",t.c,T(t).toString(),"active")],[e.a.c("wf",t.c,T(t).toString(),"loading"),e.a.c("wf",t.c,T(t).toString(),"inactive")]),O(e,"fontactive",t),this.o=!0,W(this)},B.prototype.h=function(t){var e=this.a;if(e.g){var i=d(e.f,e.a.c("wf",t.c,T(t).toString(),"active")),n=[],o=[e.a.c("wf",t.c,T(t).toString(),"loading")];i||n.push(e.a.c("wf",t.c,T(t).toString(),"inactive")),p(e.f,n,o)}O(e,"fontinactive",t),W(this)},z.prototype.load=function(t){this.c=new function(t,e){this.a=t,this.m=e||t,this.c=this.m.document}(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,e,i){var n=[],o=i.timeout;!function(t){t.g&&p(t.f,[t.a.c("wf","loading")]),O(t,"loading")}(e);var n=function(t,e,i){var n,o=[];for(n in e)if(e.hasOwnProperty(n)){var a=t.c[n];a&&o.push(a(e[n],i))}return o}(t.a,i,t.c),a=new B(t.c,e,o);for(t.h=n.length,e=0,i=n.length;e<i;e++)n[e].load(function(e,i,n){U(t,a,e,i,n)})}(this,new function(t,e){this.c=t,this.f=t.m.document.documentElement,this.h=e,this.a=new _("-"),this.j=!1!==e.events,this.g=!1!==e.classes}(this.c,t),t)},V.prototype.load=function(t){var e=this,i=e.a.projectId,n=e.a.version;if(i){var o=e.c.m;m(this.c,function(t,e,i){return f(t.c)+"//"+(t=(t.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""))+"/"+e+".js"+(i?"?v="+i:"")}(e,i,n),function(n){n?t([]):(o["__MonotypeConfiguration__"+i]=function(){return e.a},function e(){if(o["__mti_fntLst"+i]){var n,a=o["__mti_fntLst"+i](),s=[];if(a)for(var r=0;r<a.length;r++){var h=a[r].fontfamily;void 0!=a[r].fontStyle&&void 0!=a[r].fontWeight?(n=a[r].fontStyle+a[r].fontWeight,s.push(new C(h,n))):s.push(new C(h))}t(s)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+i}else t([])},Y.prototype.load=function(t){var e,i,n=this.a.urls||[],o=this.a.families||[],a=this.a.testStrings||{},s=new y;for(e=0,i=n.length;e<i;e++)g(this.c,n[e],b(s));var r=[];for(e=0,i=o.length;e<i;e++)if((n=o[e].split(":"))[1])for(var h=n[1].split(","),l=0;l<h.length;l+=1)r.push(new C(n[0],h[l]));else r.push(new C(n[0]));v(s,function(){t(r,a)})};var q="//fonts.googleapis.com/css";var X={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},K={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},J={i:"i",italic:"i",n:"n",normal:"n"},Q=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Z(t,e){this.c=t,this.a=e}var $={Arimo:!0,Cousine:!0,Tinos:!0};function tt(t,e){this.c=t,this.a=e}function et(t,e){this.c=t,this.f=e,this.a=[]}Z.prototype.load=function(t){var e=new y,i=this.c,n=new function(t,e,i){this.c=t||e+q,this.a=[],this.f=[],this.g=i||""}(this.a.api,f(i),this.a.text),o=this.a.families;!function(t,e){for(var i=e.length,n=0;n<i;n++){var o=e[n].split(":");3==o.length&&t.f.push(o.pop());var a="";2==o.length&&""!=o[1]&&(a=":"),t.a.push(o.join(a))}}(n,o);var a=new function(t){this.f=t,this.a=[],this.c={}}(o);!function(t){for(var e=t.f.length,i=0;i<e;i++){var n=t.f[i].split(":"),o=n[0].replace(/\+/g," "),a=["n4"];if(2<=n.length){var s;if(s=[],r=n[1])for(var r,h=(r=r.split(",")).length,l=0;l<h;l++){var c;if((c=r[l]).match(/^[\w-]+$/))if(null==(p=Q.exec(c.toLowerCase())))c="";else{if(c=null==(c=p[2])||""==c?"n":J[c],null==(p=p[1])||""==p)p="4";else var u=K[p],p=u||(isNaN(p)?"4":p.substr(0,1));c=[c,p].join("")}else c="";c&&s.push(c)}0<s.length&&(a=s),3==n.length&&(s=[],0<(n=(n=n[2])?n.split(","):s).length&&(n=X[n[0]])&&(t.c[o]=n))}for(t.c[o]||(n=X[o])&&(t.c[o]=n),n=0;n<a.length;n+=1)t.a.push(new C(o,a[n]))}}(a),g(i,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,i=[],n=0;n<e;n++)i.push(t.a[n].replace(/ /g,"+"));return e=t.c+"?family="+i.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(n),b(e)),v(e,function(){t(a.a,a.c,$)})},tt.prototype.load=function(t){var e=this.a.id,i=this.c.m;e?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){e=i.Typekit.config.fn;for(var n=[],o=0;o<e.length;o+=2)for(var a=e[o],s=e[o+1],r=0;r<s.length;r++)n.push(new C(a,s[r]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(n)}},2e3):t([])},et.prototype.load=function(t){var e=this.f.id,i=this.c.m,n=this;e?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[e]=function(e,i){for(var o=0,a=i.fonts.length;o<a;++o){var s=i.fonts[o];n.a.push(new C(s.name,E("font-weight:"+s.weight+";font-style:"+s.style)))}t(n.a)},m(this.c,f(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+function(t){return t.m.location.hostname||t.a.location.hostname}(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var it=new z(window);it.a.c.custom=function(t,e){return new Y(e,t)},it.a.c.fontdeck=function(t,e){return new et(e,t)},it.a.c.monotype=function(t,e){return new V(e,t)},it.a.c.typekit=function(t,e){return new tt(e,t)},it.a.c.google=function(t,e){return new Z(e,t)};var nt={load:s(it.load,it)};void 0===(n=function(){return nt}.call(e,i,e,t))||(t.exports=n)}()},,function(t,e,i){var n;!function(i){"use strict";var o,a=void 0,s={},r={backspace:8,tab:9,enter:13,return:13,shift:16,"⇧":16,control:17,ctrl:17,"⌃":17,alt:18,option:18,"⌥":18,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,L:37,"←":37,up:38,U:38,"↑":38,right:39,R:39,"→":39,down:40,D:40,"↓":40,insert:45,delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,"⌘":91,command:91,kp_0:96,kp_1:97,kp_2:98,kp_3:99,kp_4:100,kp_5:101,kp_6:102,kp_7:103,kp_8:104,kp_9:105,kp_multiply:106,kp_plus:107,kp_minus:109,kp_decimal:110,kp_divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,equal:187,"=":187,comma:188,",":188,minus:189,"-":189,period:190,".":190},h=function(){},l={},c={startX:null,startY:null,endX:null,endY:null};function u(t){for(var e in s)s[e].keydown(t)}function p(t){var e,i,n,o,a;c.endX=t.changedTouches[0].screenX,c.endY=t.changedTouches[0].screenY,a=(e=c).endX-e.startX,i=e.endY-e.startY,n=Math.abs(a),o=Math.abs(i),(Math.abs(a)>100||Math.abs(i)>100)&&(o>1.5*n?i>100?u(r.down):i<-100&&u(r.up):n>1.5*o&&(a>100?u(r.right):a<-100&&u(r.left)))}function d(t){var e=void 0;for(e in l)l[e]=!1}function f(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&(t["e"+e+i]=i,t[e+i]=function(){t["e"+e+i](window.event)},t.attachEvent("on"+e,t[e+i]))}(o=function(t,e,i,n){var o=void 0;for(this.str=t,this.next=e||h,this.fail=i||h,this.done=n||h,this.seq=t.split(" "),this.keys=[],o=0;o<this.seq.length;++o)this.keys.push(r[this.seq[o]]);this.idx=0}).prototype.keydown=function(t){var e=this.idx;t===this.keys[e]?(this.next(this.str,this.seq[e],e,this.seq),a.__next(this.str,this.seq[e],e,this.seq),++this.idx===this.keys.length&&(this.done(this.str),a.__done(this.str),this.reset())):e>0&&(this.reset(),this.fail(this.str),a.__fail(this.str))},o.prototype.reset=function(){this.idx=0},(a=function(t,e){var i=void 0,n=void 0,a=void 0;"function"==typeof e?a=e:null!==e&&void 0!==e&&(i=e.next,n=e.fail,a=e.done,e.description),s[t]=new o(t,i,n,a)}).disable=function(t){delete s[t]},f(window,"keydown",function(t){var e=void 0,i=t?t.keyCode:event.keyCode;if(!l[i])for(e in l[i]=!0,s)s[e].keydown(i)}),f(window,"keyup",function(t){var e=t?t.keyCode:event.keyCode;l[e]=!1}),f(window,"blur",d),f(window,"focus",d),("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(f(window,"touchstart",function(t){c.startX=t.touches[0].screenX,c.startY=t.touches[0].screenY}),f(window,"touchend",function(t){p(t)})),a.__next=h,a.next=function(t){a.__next=null===t?h:t},a.__fail=h,a.fail=function(t){a.__fail=null===t?h:t},a.__done=h,a.done=function(t){a.__done=null===t?h:t},a.reset=function(t){var e=s[t];e instanceof o?e.reset():console.warn("cheet: Unknown sequence: "+t)},i.cheet=a,void 0===(n=function(){return a}.apply(e,[]))||(t.exports=n)}(this)},function(t,e,i){(function(t){var n,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(){function s(t,e){var i=h("div",null,"qs_label",e);return i.innerHTML=t,i}function r(t,e,i,n){var o=h("input",e,i,n);return o.type=t,o}function h(t,e,i,n){var o=document.createElement(t);if(o)return o.id=e,i&&(o.className=i),n&&n.appendChild(o),o}function l(){return-1!=navigator.userAgent.indexOf("rv:11")||-1!=navigator.userAgent.indexOf("MSIE")}var c=!1,u=".qs_main{background-color:#dddddd;text-align:left;position:absolute;width:200px;font:12px sans-serif;box-shadow:5px 5px 8px rgba(0,0,0,0.35);user-select:none;-webkit-user-select:none;color:#000000;border:none}.qs_content{background-color:#cccccc;overflow-y:auto}.qs_title_bar{background-color:#eeeeee;user-select:none;-webkit-user-select:none;cursor:pointer;padding:5px;font-weight:bold;border:none;color:#000000}.qs_container{margin:5px;padding:5px;background-color:#eeeeee;border:none;position:relative}.qs_container_selected{border:none;background-color:#ffffff}.qs_range{-webkit-appearance:none;-moz-appearance:none;width:100%;height:17px;padding:0;margin:0;background-color:transparent;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_range:focus{outline:none;border:none}.qs_range::-webkit-slider-runnable-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-webkit-slider-runnable-track{background:#cccccc}.qs_range::-webkit-slider-thumb{-webkit-appearance:none;height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;margin-top:0}.qs_range::-moz-range-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range::-moz-range-thumb{height:15px;width:15px;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer}.qs_range::-ms-track{width:100%;height:15px;cursor:pointer;visibility:hidden;background:transparent}.qs_range::-ms-thumb{height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;border:none}.qs_range::-ms-fill-lower{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-lower{background:#cccccc}.qs_range::-ms-fill-upper{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-upper{background:#cccccc}.qs_button{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif}.qs_button:active{background-color:#ffffff;border:1px solid #aaaaaa}.qs_button:focus{border:1px solid #aaaaaa;outline:none}.qs_checkbox{cursor:pointer;display:inline}.qs_checkbox input{position:absolute;left:-99999px}.qs_checkbox span{height:16px;width:100%;display:block;text-indent:20px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2OcOXPmfwYKACPIgLS0NLKMmDVrFsOoAaNhMJoOGBioFwZkZUWoJgApdFaxjUM1YwAAAABJRU5ErkJggg==') no-repeat}.qs_checkbox input:checked+span{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T63Tyw2EIBAA0OFKBxBL40wDRovAUACcKc1IB1zZDAkG18GYZTmSmafzgTnnMgwchoDWGlJKheGcP3JtnPceCqCUAmttSZznuYtgchsXQrgC+77DNE0kUpPbmBOoJaBOIVQylnqWgAAeKhDve/AN+EaklJBzhhgjWRoJVGTbNjiOowAIret6a+4jYIwpX8aDwLIs74C2D0IIYIyVP6Gm898m9kbVm85ljHUTf16k4VUefkwDrxk+zoUEwCt0GbUAAAAASUVORK5CYII=') no-repeat}.qs_checkbox_label{position:absolute;top:7px;left:30px}.qs_label{margin-bottom:3px;user-select:none;-webkit-user-select:none;cursor:default;font:12px sans-serif}.qs_text_input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;padding:0 0 0 5px;height:24px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_text_input:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_select{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAp0lEQVRIS+2SsQ3FIAwF7RVYhA5mgQFhFuhYhJKWL0eKxI8SGylKZ0p4+OBsHGNM+HChAiS7qkgyBKrovaLeOxhjbgtxZ+cFtgelFMg5QwgBvPd/EO5sDbKAlBLUWo/8CjmL075zDmKMj6rEKbpCqBL9aqc4ZUQAhVbInBMQUXz5Vg/WfxOktXZsWWtZLds9uIqlqaH1NFV3jdhSJA47E1CAaE8ViYp+wGiWMZ/T+cgAAAAASUVORK5CYII=') no-repeat right #f6f6f6;-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#000000;width:100%;height:24px;border:1px solid #aaaaaa;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;padding:0 5px;-moz-outline:none;font-size:14px}.qs_select option{font-size:14px}.qs_select::-ms-expand{display:none}.qs_select:focus{outline:none}.qs_number{height:24px}.qs_image{width:100%}.qs_progress{width:100%;height:15px;background-color:#cccccc;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_progress_value{height:100%;background-color:#999999}.qs_textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:vertical;width:100%;padding:3px 5px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_textarea:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_color{position:absolute;left:-999999px}.qs_color_label{width:100%;height:20px;display:block;border:1px solid #aaaaaa;cursor:pointer;padding:0 0 0 5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_file_chooser{position:absolute;left:-999999px}.qs_file_chooser_label{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif;width:100%;display:block;cursor:pointer;padding:7px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",p={_version:"3.0.2",_topZ:1,_panel:null,_titleBar:null,_content:null,_startX:0,_startY:0,_hidden:!1,_collapsed:!1,_controls:null,_keyCode:-1,_draggable:!0,_collapsible:!0,_globalChangeHandler:null,useExtStyleSheet:function(){c=!0},create:function(t,e,i,n){var o=Object.create(this);return o._init(t,e,i,n),o},destroy:function(){for(var t in this._panel.parentElement&&this._panel.parentElement.removeChild(this._panel),this)this[t]=null},_init:function(t,e,i,n){c||function(){var t=document.createElement("style");t.innerText=u,document.head.appendChild(t),c=!0}(),this._bindHandlers(),this._createPanel(t,e,n),this._createTitleBar(i||"QuickSettings"),this._createContent()},_bindHandlers:function(){this._startDrag=this._startDrag.bind(this),this._drag=this._drag.bind(this),this._endDrag=this._endDrag.bind(this),this._doubleClickTitle=this._doubleClickTitle.bind(this),this._onKeyUp=this._onKeyUp.bind(this)},getValuesAsJSON:function(t){var e={};for(var i in this._controls)this._controls[i].getValue&&(e[i]=this._controls[i].getValue());return t&&(e=JSON.stringify(e)),e},setValuesFromJSON:function(t){for(var e in"string"==typeof t&&(t=JSON.parse(t)),t)this._controls[e]&&this._controls[e].setValue&&this._controls[e].setValue(t[e]);return this},saveInLocalStorage:function(t){return this._localStorageName=t,this._readFromLocalStorage(t),this},clearLocalStorage:function(t){return localStorage.removeItem(t),this},_saveInLocalStorage:function(t){localStorage.setItem(t,this.getValuesAsJSON(!0))},_readFromLocalStorage:function(t){var e=localStorage.getItem(t);e&&this.setValuesFromJSON(e)},_createPanel:function(t,e,i){this._panel=h("div",null,"qs_main",i||document.body),this._panel.style.zIndex=++p._topZ,this.setPosition(t||0,e||0),this._controls={}},_createTitleBar:function(t){this._titleBar=h("div",null,"qs_title_bar",this._panel),this._titleBar.textContent=t,this._titleBar.addEventListener("mousedown",this._startDrag),this._titleBar.addEventListener("dblclick",this._doubleClickTitle)},_createContent:function(){this._content=h("div",null,"qs_content",this._panel)},_createContainer:function(){var t=h("div",null,"qs_container");return t.addEventListener("focus",function(){this.className+=" qs_container_selected"},!0),t.addEventListener("blur",function(){var t=this.className.indexOf(" qs_container_selected");t>-1&&(this.className=this.className.substr(0,t))},!0),this._content.appendChild(t),t},setPosition:function(t,e){return this._panel.style.left=t+"px",this._panel.style.top=Math.max(e,0)+"px",this},setSize:function(t,e){return this._panel.style.width=t+"px",this._content.style.width=t+"px",this._content.style.height=e-this._titleBar.offsetHeight+"px",this},setWidth:function(t){return this._panel.style.width=t+"px",this._content.style.width=t+"px",this},setHeight:function(t){return this._content.style.height=t-this._titleBar.offsetHeight+"px",this},setDraggable:function(t){return this._draggable=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},_startDrag:function(t){this._draggable&&(this._panel.style.zIndex=++p._topZ,document.addEventListener("mousemove",this._drag),document.addEventListener("mouseup",this._endDrag),this._startX=t.clientX,this._startY=t.clientY),t.preventDefault()},_drag:function(t){var e=parseInt(this._panel.style.left),i=parseInt(this._panel.style.top),n=t.clientX,o=t.clientY;this.setPosition(e+n-this._startX,i+o-this._startY),this._startX=n,this._startY=o,t.preventDefault()},_endDrag:function(t){document.removeEventListener("mousemove",this._drag),document.removeEventListener("mouseup",this._endDrag),t.preventDefault()},setGlobalChangeHandler:function(t){return this._globalChangeHandler=t,this},_callGCH:function(t){this._localStorageName&&this._saveInLocalStorage(this._localStorageName),this._globalChangeHandler&&this._globalChangeHandler(t)},hide:function(){return this._panel.style.visibility="hidden",this._hidden=!0,this},show:function(){return this._panel.style.visibility="visible",this._panel.style.zIndex=++p._topZ,this._hidden=!1,this},toggleVisibility:function(){return this._hidden?this.show():this.hide(),this},setCollapsible:function(t){return this._collapsible=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},collapse:function(){return this._panel.removeChild(this._content),this._collapsed=!0,this},expand:function(){return this._panel.appendChild(this._content),this._collapsed=!1,this},toggleCollapsed:function(){return this._collapsed?this.expand():this.collapse(),this},setKey:function(t){return this._keyCode=t.toUpperCase().charCodeAt(0),document.addEventListener("keyup",this._onKeyUp),this},_onKeyUp:function(t){t.keyCode===this._keyCode&&["INPUT","SELECT","TEXTAREA"].indexOf(t.target.tagName)<0&&this.toggleVisibility()},_doubleClickTitle:function(){this._collapsible&&this.toggleCollapsed()},removeControl:function(t){if(this._controls[t])var e=this._controls[t].container;return e&&e.parentElement&&e.parentElement.removeChild(e),this._controls[t]=null,this},enableControl:function(t){return this._controls[t]&&(this._controls[t].control.disabled=!1),this},disableControl:function(t){return this._controls[t]&&(this._controls[t].control.disabled=!0),this},hideControl:function(t){return this._controls[t]&&(this._controls[t].container.style.display="none"),this},showControl:function(t){return this._controls[t]&&(this._controls[t].container.style.display="block"),this},overrideStyle:function(t,e,i){return this._controls[t]&&(this._controls[t].control.style[e]=i),this},hideTitle:function(t){var e=this._controls[t].label;return e&&(e.style.display="none"),this},showTitle:function(t){var e=this._controls[t].label;return e&&(e.style.display="block"),this},hideAllTitles:function(){for(var t in this._controls){var e=this._controls[t].label;e&&(e.style.display="none")}return this},showAllTitles:function(){for(var t in this._controls){var e=this._controls[t].label;e&&(e.style.display="block")}return this},getValue:function(t){return this._controls[t].getValue()},setValue:function(t,e){return this._controls[t].setValue(e),this._callGCH(t),this},addBoolean:function(t,e,i){var n=this._createContainer(),o=h("label",null,"qs_checkbox_label",n);o.textContent=t,o.setAttribute("for",t);var a=h("label",null,"qs_checkbox",n);a.setAttribute("for",t);var s=r("checkbox",t,null,a);s.checked=e,h("span",null,null,a),this._controls[t]={container:n,control:s,getValue:function(){return this.control.checked},setValue:function(t){this.control.checked=t,i&&i(t)}};var l=this;return s.addEventListener("change",function(){i&&i(s.checked),l._callGCH(t)}),this},bindBoolean:function(t,e,i){return this.addBoolean(t,e,function(e){i[t]=e})},addButton:function(t,e){var i=this._createContainer(),n=r("button",t,"qs_button",i);n.value=t,this._controls[t]={container:i,control:n};var o=this;return n.addEventListener("click",function(){e&&e(n),o._callGCH(t)}),this},addColor:function(t,e,i){if(function(){var t=navigator.userAgent.toLowerCase();return!(t.indexOf("chrome")>-1||t.indexOf("firefox")>-1||t.indexOf("epiphany")>-1)&&t.indexOf("safari/")>-1}()||navigator.userAgent.toLowerCase().indexOf("edge")>-1||l())return this.addText(t,e,i);var n=this._createContainer(),o=s("<b>"+t+":</b> "+e,n),a=r("color",t,"qs_color",n);a.value=e||"#ff0000";var c=h("label",null,"qs_color_label",n);c.setAttribute("for",t),c.style.backgroundColor=a.value,this._controls[t]={container:n,control:a,colorLabel:c,label:o,title:t,getValue:function(){return this.control.value},setValue:function(t){this.control.value=t,this.colorLabel.style.backgroundColor=a.value,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,i&&i(t)}};var u=this;return a.addEventListener("input",function(){o.innerHTML="<b>"+t+":</b> "+a.value,c.style.backgroundColor=a.value,i&&i(a.value),u._callGCH(t)}),this},bindColor:function(t,e,i){return this.addColor(t,e,function(e){i[t]=e})},addDate:function(t,e,i){var n=void 0;if(e instanceof Date){var o=e.getFullYear(),a=e.getMonth()+1;a<10&&(a="0"+a),n=o+"-"+a+"-"+e.getDate()}else n=e;if(l())return this.addText(t,n,i);var h=this._createContainer(),c=s("<b>"+t+"</b>",h),u=r("date",t,"qs_text_input",h);u.value=n||"",this._controls[t]={container:h,control:u,label:c,getValue:function(){return this.control.value},setValue:function(t){var e=void 0;if(t instanceof Date){var n=t.getFullYear(),o=t.getMonth()+1;o<10&&(o="0"+o);var a=t.getDate();a<10&&(a="0"+a),e=n+"-"+o+"-"+a}else e=t;this.control.value=e||"",i&&i(e)}};var p=this;return u.addEventListener("input",function(){i&&i(u.value),p._callGCH(t)}),this},bindDate:function(t,e,i){return this.addDate(t,e,function(e){i[t]=e})},addDropDown:function(t,e,i){for(var n=this._createContainer(),o=s("<b>"+t+"</b>",n),a=h("select",null,"qs_select",n),r=0;r<e.length;r++){var l=h("option"),c=e[r];c.label?(l.value=c.value,l.innerText=c.label):(l.label=c,l.innerText=c),a.add(l)}var u=this;return a.addEventListener("change",function(){var n=a.selectedIndex,o=a.options;i&&i({index:n,label:o[n].label,value:e[n].value||e[n]}),u._callGCH(t)}),this._controls[t]={container:n,control:a,label:o,getValue:function(){var t=this.control.selectedIndex;return{index:t,label:this.control.options[t].label,value:e[t].value||e[t]}},setValue:function(t){var n;n=null!=t.index?t.index:t;var o=this.control.options;this.control.selectedIndex=n,i&&i({index:n,label:o[n].label,value:e[n].value||e[n]})}},this},bindDropDown:function(t,e,i){return this.addDropDown(t,e,function(e){i[t]=e.value})},addElement:function(t,e){var i=this._createContainer(),n=s("<b>"+t+"</b>",i);return i.appendChild(e),this._controls[t]={container:i,label:n},this},addFileChooser:function(t,e,i,n){var o=this._createContainer(),a=s("<b>"+t+"</b>",o),l=r("file",t,"qs_file_chooser",o);i&&(l.accept=i);var c=h("label",null,"qs_file_chooser_label",o);c.setAttribute("for",t),c.textContent=e||"Choose a file...",this._controls[t]={container:o,control:l,label:a,getValue:function(){return this.control.files[0]}};var u=this;return l.addEventListener("change",function(){l.files&&l.files.length&&(c.textContent=l.files[0].name,n&&n(l.files[0]),u._callGCH(t))}),this},addHTML:function(t,e){var i=this._createContainer(),n=s("<b>"+t+":</b> ",i),o=h("div",null,null,i);return o.innerHTML=e,this._controls[t]={container:i,label:n,control:o,getValue:function(){return this.control.innerHTML},setValue:function(t){this.control.innerHTML=t}},this},addImage:function(t,e,i){var n=this._createContainer(),o=s("<b>"+t+"</b>",n);return img=h("img",null,"qs_image",n),img.src=e,this._controls[t]={container:n,control:img,label:o,getValue:function(){return this.control.src},setValue:function(t){this.control.src=t,i&&img.addEventListener("load",function e(){img.removeEventListener("load",e),i(t)})}},this},addRange:function(t,e,i,n,o,a){return this._addNumber("range",t,e,i,n,o,a)},addNumber:function(t,e,i,n,o,a){return this._addNumber("number",t,e,i,n,o,a)},_addNumber:function(t,e,i,n,o,a,h){var c=this._createContainer(),u=s("",c),p=r(t,e,"range"===t?"qs_range":"qs_text_input qs_number",c);p.min=i||0,p.max=n||100,p.step=a||1,p.value=o||0,u.innerHTML="<b>"+e+":</b> "+p.value,this._controls[e]={container:c,control:p,label:u,title:e,callback:h,getValue:function(){return parseFloat(this.control.value)},setValue:function(t){this.control.value=t,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,h&&h(parseFloat(t))}};var d="input";"range"===t&&l()&&(d="change");var f=this;return p.addEventListener(d,function(){u.innerHTML="<b>"+e+":</b> "+p.value,h&&h(parseFloat(p.value)),f._callGCH(e)}),this},bindRange:function(t,e,i,n,o,a){return this.addRange(t,e,i,n,o,function(e){a[t]=e})},bindNumber:function(t,e,i,n,o,a){return this.addNumber(t,e,i,n,o,function(e){a[t]=e})},setRangeParameters:function(t,e,i,n){return this.setNumberParameters(t,e,i,n)},setNumberParameters:function(t,e,i,n){var o=this._controls[t],a=o.control.value;return o.control.min=e,o.control.max=i,o.control.step=n,o.control.value!==a&&o.callback&&o.callback(o.control.value),this},addPassword:function(t,e,i){return this._addText("password",t,e,i)},bindPassword:function(t,e,i){return this.addPassword(t,e,function(e){i[t]=e})},addProgressBar:function(t,e,i,n){var o=this._createContainer(),a=s("",o),r=h("div",null,"qs_progress",o),l=h("div",null,"qs_progress_value",r);return l.style.width=i/e*100+"%",a.innerHTML="numbers"===n?"<b>"+t+":</b> "+i+" / "+e:"percent"===n?"<b>"+t+":</b> "+Math.round(i/e*100)+"%":"<b>"+t+"</b>",this._controls[t]={container:o,control:r,valueDiv:l,valueDisplay:n,label:a,value:i,max:e,title:t,getValue:function(){return this.value},setValue:function(t){this.value=Math.max(0,Math.min(t,this.max)),this.valueDiv.style.width=this.value/this.max*100+"%","numbers"===this.valueDisplay?this.label.innerHTML="<b>"+this.title+":</b> "+this.value+" / "+this.max:"percent"===this.valueDisplay&&(this.label.innerHTML="<b>"+this.title+":</b> "+Math.round(this.value/this.max*100)+"%")}},this},setProgressMax:function(t,e){var i=this._controls[t];return i.max=e,i.value=Math.min(i.value,i.max),i.valueDiv.style.width=i.value/i.max*100+"%","numbers"===i.valueDisplay?i.label.innerHTML="<b>"+i.title+":</b> "+i.value+" / "+i.max:"percent"===i.valueDisplay?i.label.innerHTML="<b>"+i.title+":</b> "+Math.round(i.value/i.max*100)+"%":i.label.innerHTML="<b>"+i.title+"</b>",this},addText:function(t,e,i){return this._addText("text",t,e,i)},_addText:function(t,e,i,n){var o=void 0,a=this._createContainer(),l=s("<b>"+e+"</b>",a);"textarea"===t?(o=h("textarea",e,"qs_textarea",a)).rows=5:o=r(t,e,"qs_text_input",a),o.value=i||"",this._controls[e]={container:a,control:o,label:l,getValue:function(){return this.control.value},setValue:function(t){this.control.value=t,n&&n(t)}};var c=this;return o.addEventListener("input",function(){n&&n(o.value),c._callGCH(e)}),this},bindText:function(t,e,i){return this.addText(t,e,function(e){i[t]=e})},addTextArea:function(t,e,i){return this._addText("textarea",t,e,i)},setTextAreaRows:function(t,e){return this._controls[t].control.rows=e,this},bindTextArea:function(t,e,i){return this.addTextArea(t,e,function(e){i[t]=e})},addTime:function(t,e,i){var n=void 0;if(e instanceof Date){var o=e.getHours();o<10&&(o="0"+o);var a=e.getMinutes();a<10&&(a="0"+a);var h=e.getSeconds();h<10&&(h="0"+h),n=o+":"+a+":"+h}else n=e;if(l())return this.addText(t,n,i);var c=this._createContainer(),u=s("<b>"+t+"</b>",c),p=r("time",t,"qs_text_input",c);p.value=n||"",this._controls[t]={container:c,control:p,label:u,getValue:function(){return this.control.value},setValue:function(t){var e=void 0;if(t instanceof Date){var n=t.getHours();n<10&&(n="0"+n);var o=t.getMinutes();o<10&&(o="0"+o);var a=t.getSeconds();a<10&&(a="0"+a),e=n+":"+o+":"+a}else e=t;this.control.value=e||"",i&&i(e)}};var d=this;return p.addEventListener("input",function(){i&&i(p.value),d._callGCH(t)}),this},bindTime:function(t,e,i){return this.addTime(t,e,function(e){i[t]=e})}};"object"==a(e)&&"object"==a(t)?t.exports=p:void 0===(o="function"==typeof(n=p)?n.call(e,i,e,t):n)||(t.exports=o)}()}).call(this,i(9)(t))},,,,function(t,e,i){"use strict";i.r(e);i(15);var n=i(7),o=i.n(n),a=i(6),s=i.n(a),r=i(5),h=i.n(r),l="game-holder",c="canvas_container absolute_center page_background trap",u=720,p=1280,d=.03,f=.02,g=["school","park","library"],m="STATE_BOOT",y="STATE_LOAD",b="STATE_GAME",v="STATE_CHARACTER_INTRO",w="STATE_WELCOME",_="STATE_CUTSCENE",C="STATE_LEVELEND",S="STATE_GAMEEND",T="STATE_GAMEOVER",x="STATE_GAME_COMPLETE",E="PLAYER_ONE",k="luckiest_guyregular",O="bimbo_jveregular",A="#ed1c24",P="#2d3467",D="#2c3468",L="#ffffff",I="#ffd700",R="#34bbf7",M="#ffffff",G="#f62e21",j="rgba(135,136,138,1)",N="rgba(135,136,138,1)",H="GAME_LOAD_FULL",B="GAME_LOAD_LAZY",F="GAME_LOAD_BATCH",W="WISETRACK_2888_84dcf736c4",z="en_GB",U={type:Phaser.AUTO,parent:l,width:u,height:p},V=i(1);var Y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.preload=function(t){this.fontsReady=!1,this.loadComplete=!1,t.load.baseURL=this.game.urls.getAssetsDirectory(),t.load.crossOrigin="anonymous",t.load.pack("boot","assetpack.json",null,this),V.load({custom:{families:[k],urls:[this.game.urls.getFontsDirectory("luckiestguy-webfont.css")]},active:this.fontsLoaded.bind(this),inactive:this.fontsLoaded.bind(this)})},e.prototype.fontsLoaded=function(){this.fontsReady=!0},e.prototype.create=function(t){this.game.input.maxPointers=1,this.game.device.touch&&this.game.input.mouse.stop(),this.stage.backgroundColor="0x000000",t.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,t.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,t.scale.pageAlignHorizontally=!0,t.scale.pageAlignVertically=!0,t.stage.disableVisibilityChange=!0,this.loadComplete=!0},e.prototype.update=function(t){this.checkLoading(t)},e.prototype.checkLoading=function(t){this.loadComplete&&this.fontsReady&&(t.addCopy(this.game.cache.getXML("copy_xml")),t.controller.startLoad())},e}(Phaser.State);!function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.setProgress(0),n}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,t),e.prototype.setProgress=function(t){t=0===t?.001:t}}(Phaser.Group);var q=function(t){function e(i){var n=i.game,o=i.colour,a=i.alpha,s=i.blockInput,r=void 0===s||s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return h.fixedToCamera=!0,h.beginFill(o,a),h.drawRect(0,0,h.game.defaultWidth,h.game.defaultHeight),h.inputEnabled=r,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(Phaser.Graphics);var X=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.preload=function(t){this.container=t.make.group(),this.background=new q({game:t,colour:16133665,alpha:1}),this.container.add(this.background),this.backgroundoverlay=t.make.image(0,0,"bg_generic"),this.backgroundoverlay.anchor.set(.5),this.backgroundoverlay.position.set(t.defaultWidth/2,t.defaultHeight/2),this.backgroundoverlay.alpha=.5,this.container.add(this.backgroundoverlay),this.loadComplete=!1,this.image=this.game.make.sprite(),this.image.loadTexture("loader_anim"),this.image.animations.add("play"),this.image.animations.play("play",24,!0),this.image.anchor.set(.5),this.image.scale.set(2),this.image.x=this.game.defaultWidth/2,this.image.y=this.game.defaultHeight/2,this.container.add(this.image),this.fontsReady=!1,this.assetsReady=!1,V.load({custom:{families:[O],urls:[t.urls.getFontsDirectory("bimbo_jve-webfont.css")]},active:this.fontsLoaded.bind(this),inactive:this.fontsLoaded.bind(this)}),t.load.baseURL=t.urls.getAssetsDirectory(),t.load.crossOrigin="anonymous",t.load.pack("load","assetpack.json",null,this),t.load.pack("audio","assetpack_audio.json",null,this),t.load.pack("sprites_64","assetpack_audio.json",null,this),this.positionContainer(),t.windowEventController.handleWindowResize(),t.scale.onSizeChange.add(this.positionContainer,this)},e.prototype.positionContainer=function(){var t=.5*(this.game.width-this.game.defaultWidth),e=.5*(this.game.height-this.game.defaultHeight);this.background.scale.set(1),this.container.position.set(t,e)},e.prototype.loadUpdate=function(t){},e.prototype.create=function(t){this.assetsReady=!0,this.game.sounds.touchLock()},e.prototype.fontsLoaded=function(){this.fontsReady=!0,this.checkLoading()},e.prototype.update=function(t){this.checkLoading(t)},e.prototype.checkLoading=function(t){if(!this.loadComplete&&this.assetsReady&&this.fontsReady){var e=this.game.cache.getJSON("app_config");e&&(this.game.controller.init({config:e}),this.game.controller.showWelcomeScreen(),this.loadComplete=!0)}},e.prototype.shutdown=function(t){t.scale.onSizeChange.remove(this.positionContainer,this),this.background.destroy(!0),this.container.destroy(!0),this.background=null,this.container=null},e}(Phaser.State);var K=function(t){function e(i){var n=i.game,o=i.type,a=void 0===o?e.GENERIC:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,0,0,a));return s.loadTexture(a),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(Phaser.Image),J=K;K.GENERIC="bg_generic",K.STRIPED="bg_stripes",K.WELCOME="bg_welcome",K.GAMEEND="bg_gameend",K.GAMEOVER="bg_gameover";var Q=function(t,e){var i=Math.abs(t),n=Math.max(0,e-Math.floor(i).toString().length),o=Math.pow(10,n).toString().substr(1);return t<0&&(o="-"+o),o+i},Z=function(t){t=t.toString();for(var e=/(-?\d+)(\d{3})/;e.test(t);)t=t.replace(e,"$1,$2");return t},$=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},tt=function(t,e,i,n,o,a){var s=function(t){var e=t.font,i=t.size,n=t.clr,o=t.options,a=void 0===o?{}:o;return $({font:i+"px "+e,fill:n,boundsAlignH:a.boundsAlignH||"center",boundsAlignV:a.boundsAlignV||"middle"},a)}({font:e,size:i,clr:n,options:arguments.length>6&&void 0!==arguments[6]?arguments[6]:{}});return t.make.text(o,a,"",s)};!function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));o.bg=o.game.make.image(0,0,"ui","timerbg"),o.minutesDisplay=tt(o.game,k,42,A,78,-12),o.minutesDisplay.stroke=P,o.minutesDisplay.strokeThickness=9,o.minutesDisplay.setShadow(3,3,P,0);var a=o.minutesDisplay.y+9;return o.secondsDisplay=tt(o.game,k,32,A,170,a),o.secondsDisplay.stroke=P,o.secondsDisplay.strokeThickness=9,o.secondsDisplay.setShadow(3,3,P,0),o.add(o.bg),o.add(o.minutesDisplay),o.add(o.secondsDisplay),o.reset(),o}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,t),e.prototype.reset=function(){this.setTime(0)},e.prototype.setTime=function(t){var e=Math.floor(t/1e3)%60,i=Math.floor(t/6e4)%60;this.render(i,e)},e.prototype.render=function(t,e){this.minutesDisplay.text=Q(t,2),this.secondsDisplay.text=Q(e,2)},e.prototype.destroy=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];arguments[1];this.minutesDisplay=null,this.secondsDisplay=null,t.prototype.destroy.call(this,e)}}(Phaser.Group);var et="title_music",it="GNASHER_JUMP",nt="OBSTACLE_HIT",ot="PUDDLE_HIT",at="PAPER_COLLECTED",st="INTRO_CUTSCENE",rt="SAUSAGES_COLLECTED";var ht=function(t){function e(i){var n=i.game,o=i.id,a=(i.sfxID,i.position),s=i.skin,r=(i.ariaLabelID,i.spritesheet),h=i.defaultScale;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,0,0,r||"buttons"));return l.setFrames(s,s,s,s),l.id=o,l.input.useHandCursor=!0,l.game.time.events.add(10,l.init,l),l.grouped=!!a&&a.grouped,l.defaultScale=h||1,l.grouped||(a&&(l.xpos=a.x,l.ypos=a.y),l.anchor.set(.5),l.updatePosition()),l.enable(),l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(){},e.prototype.updatePosition=function(){this.position.set(this.game.width*this.xpos,this.game.height*this.ypos)},e.prototype.enable=function(){this.onInputDown.add(this.onDown,this),this.onInputOver.add(this.onOver,this),this.onInputOut.add(this.onOut,this)},e.prototype.disable=function(){this.onInputDown.forget(),this.onInputDown.dispose(),this.onInputDown.removeAll(),this.onInputOver.forget(),this.onInputOver.dispose(),this.onInputOver.removeAll(),this.onInputOut.forget(),this.onInputOut.dispose(),this.onInputOut.removeAll()},e.prototype.onOver=function(){this.scale.set(1.2*this.defaultScale)},e.prototype.onOut=function(){this.scale.set(1*this.defaultScale)},e.prototype.onDown=function(){this.game.sounds.playSFX("CLICK_SELECT")},e.prototype.destroy=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.disable(),t.prototype.destroy.call(this,e)},e}(Phaser.Button);var lt=function(t){function e(i){var n=i.game,o=i.id,a=(i.sfxID,i.position),s=i.skins;i.ariaLabelID;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,0,0,"buttons"));return r.id=o,r.skins=s,r.input.useHandCursor=!0,r.game.time.events.add(10,r.init,r),r.game.controller.uiModel.onAudioIsChanged.add(r.updateDisplayStatus,r),r.grouped=a.grouped,r.grouped||(r.xpos=a.x,r.ypos=a.y,r.anchor.set(.5),r.updatePosition()),r.updateDisplayStatus({isMuted:r.game.controller.uiModel.getIsMuted()}),r.enable(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(){},e.prototype.enable=function(){this.onInputDown.add(this.onDown,this),this.onInputOver.add(this.onOver,this),this.onInputOut.add(this.onOut,this)},e.prototype.disable=function(){this.onInputDown.forget(),this.onInputDown.dispose(),this.onInputDown.removeAll(),this.onInputOver.forget(),this.onInputOver.dispose(),this.onInputOver.removeAll(),this.onInputOut.forget(),this.onInputOut.dispose(),this.onInputOut.removeAll()},e.prototype.onOver=function(){this.scale.set(1.2)},e.prototype.onOut=function(){this.scale.set(1)},e.prototype.onDown=function(){this.game.sounds.playSFX("CLICK_SELECT")},e.prototype.updatePosition=function(){this.position.set(this.game.width*this.xpos,this.game.height*this.ypos)},e.prototype.updateDisplayStatus=function(t){var e=t.isMuted,i=e?this.skins.muted:this.skins.unmuted;this.setFrames(i,i,i,i),this.game.sound.mute=e,this.game.sounds.allowMusic=this.game.sounds.allowEffects=!e},e.prototype.destroy=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.disable(),this.game.controller.uiModel.onAudioIsChanged.remove(this.updateDisplayStatus,this),t.prototype.destroy.call(this,e)},e}(Phaser.Button);var ct=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.state=null,n.buttons={},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){this.buttonsConfig=t,this.createButtonGroups()},e.prototype.positionElements=function(){var t=this.game.screenPaddingX,e=this.game.screenPaddingY;this.positionButtonGroups(t,e)},e.prototype.positionButtonGroups=function(t,e){var i=this,n=this.game.width,o=this.game.height;this.buttonGroups.forEach(function(a){i.positionButtonGroupButtons(a,e);var s=n-t-a.groupWidth,r=o-a.groupHeight-e,h=n/2-a.groupWidth/2,l=o/2-a.groupHeight/2;switch(a.screenPosition){case"TOP_LEFT":a.x=t,a.y=e;break;case"TOP_RIGHT":a.x=s,a.y=e;break;case"BOTTOM_LEFT":a.x=t,a.y=r;break;case"BOTTOM_RIGHT":a.x=s,a.y=r;break;case"BOTTOM_CENTER":a.x=h,a.y=r;break;case"CENTER":a.x=h,a.y=l}})},e.prototype.positionButtonGroupButtons=function(t,e){var i=this;t.groupWidth=0,t.groupHeight=0,t.buttons.forEach(function(n,o){if("UNGROUPED"===t.screenPosition)n.updatePosition();else{if(n.x=0===o?n.x:t.groupWidth+e,t.groupWidth=n.x+n.width,t.groupHeight=Math.max(t.groupHeight,n.height),n.padding_left){var a=i.game.defaultWidth*n.padding_left;n.x+=a,t.groupWidth+=a}if(n.padding_bottom){var s=i.game.defaultHeight*n.padding_bottom;n.y-=s,t.groupHeight+=s}}})},e.prototype.createButtonGroups=function(){this.btnsTopLeft=this.createButtonGroup("TOP_LEFT"),this.btnsTopRight=this.createButtonGroup("TOP_RIGHT"),this.btnsBottomLeft=this.createButtonGroup("BOTTOM_LEFT"),this.btnsBottomRight=this.createButtonGroup("BOTTOM_RIGHT"),this.btnsBottomCenter=this.createButtonGroup("BOTTOM_CENTER"),this.btnsCenter=this.createButtonGroup("CENTER"),this.btnsUngrouped=this.createButtonGroup("UNGROUPED"),this.buttonGroups=[this.btnsTopLeft,this.btnsTopRight,this.btnsBottomLeft,this.btnsBottomRight,this.btnsBottomCenter,this.btnsCenter,this.btnsUngrouped],this.buttonGroupLookup={TOP_LEFT:this.btnsTopLeft,TOP_RIGHT:this.btnsTopRight,TOP_RIGHT_2:this.btnsTopRight,BOTTOM_LEFT:this.btnsBottomLeft,BOTTOM_RIGHT:this.btnsBottomRight,BOTTOM_CENTER:this.btnsBottomCenter,CENTER:this.btnsCenter,UNGROUPED:this.btnsUngrouped}},e.prototype.createButtonGroup=function(t){var e=this.game.make.group();return e.groupWidth=0,e.groupHeight=0,e.buttons=[],e.screenPosition=t,this.add(e),e},e.prototype.addToButtonGroup=function(t,e){var i=this.buttonGroupLookup[t];i.add(e),e.buttonGroup=i,i.buttons.push(e)},e.prototype.destroyButtons=function(){var t=this;Object.keys(this.buttons).map(function(e,i){var n=t.buttons[e];return n.buttonGroup.buttons.splice(n.buttonGroup.buttons.indexOf(n),1),n.onInputDown.remove(t.handleButtonInteraction,t),n.destroy(!0),n=null}),this.buttons={}},e.prototype.createButtons=function(t){var e=this;this.buttons={},t.forEach(function(t){e.createButton(t)})},e.prototype.createButton=function(t){var e=this.buttonsConfig[t];if(e){var i=e.id,n=e.sfx_id,o=e.skin,a=e.position,s=e.ariaLabelID,r=e.skins;console.log("creating button : "+i);var h={game:this.game,id:i,position:a,sfx_id:n,skin:o,ariaLabelID:s},l=void 0;return"btn_sound"===i?(h.skins=r,l=new lt(h)):l=new ht(h),this.buttons[i]=l,l.onInputDown.add(this.handleButtonInteraction,this),a.grouped?this.addToButtonGroup(a.id,l):this.addToButtonGroup("UNGROUPED",l),l}},e.prototype.renderButtons=function(t,e){this.handleButtonInteraction=e,this.destroyButtons(),this.createButtons(t)},e.prototype.destroy=function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0],arguments[1];t.prototype.destroy.call(this,!0)},e}(Phaser.Group);var ut=function(t){function e(i){var n=i.game,o=i.title;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return a.loadTexture(e.SPRITESHEET,o),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(Phaser.Image),pt=ut;ut.SPRITESHEET="titles",ut.HELLO="title_hello",ut.HOWTOPLAY="title_howtoplay",ut.JOINED_GNASHER="title_joined_gnasher",ut.JOINED_GNIPPER="title_joined_gnipper",ut.JOINED_ROBOTODOG="title_joined_robotdog",ut.JOINED_RUBI="title_joined_rubi",ut.OHNO="title_ohno",ut.WELLDONE="title_welldone",ut.YOUDIDIT="title_youdidit",ut.FREESAUSAGES="title_freesausages",ut.YOUFOUNDGNASHER="title_youfoundgnasher";var dt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var ft=function(t){function e(i){var n=i.game,o=i.message,a=i.onClose,s=void 0!==a&&a,r=i.onCloseScope,h=void 0!==r&&r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));l.game.sounds.playSFX(it);var c=l.game.controller.config.getIntroMessageById(o);return l.background=new q({game:n,colour:"#000000",alpha:.3}),l.add(l.background),l.container=l.game.make.group(),l.add(l.container),l.panel=l.game.make.image(0,0,"ui","panel_generic"),l.container.add(l.panel),l.character=l.game.make.image(0,0,c.image.spritesheet,c.image.frame),l.character.y=0,l.character.x=.5*l.panel.width-.5*l.character.width,l.container.addAt(l.character,0),l.title=new pt({game:n,title:pt[c.title]}),l.title.x=.5*l.panel.width-.5*l.title.width,l.title.y=.7*l.character.height,l.container.add(l.title),l.copy=tt(l.game,O,33,L,60,0,{wordWrap:!0,wordWrapWidth:.8*l.panel.width}),l.copy.angle=-2.5,l.copy.text=l.game.copy.getCopy(c.copy),l.copy.y=l.title.y+l.title.height,l.container.add(l.copy),l.panel.y=l.title.y+.25*l.title.height,l.btnContinue=new ht({game:l.game,id:"btn_go",skin:"btn_go"}),l.btnContinue.x=.5*l.panel.width,l.btnContinue.y=l.copy.y+l.copy.height+.5*l.btnContinue.height,l.btnContinue.onInputDown.add(l.handleContinue,l),l.container.addChild(l.btnContinue),l.panel.height=l.btnContinue.y+.2*l.btnContinue.height-l.panel.y,l.onClose=s,l.onCloseScope=h,l.game.scale.onSizeChange.add(l.handleScreenResize,l),l.fixedToCamera=!0,l.handleScreenResize(),l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleScreenResize=function(){var t=Math.min(1,.9*this.game.height/this.height);this.container.scale.set(t,t);var e=(1-t)/2;this.container.x=.5*this.game.width-.5*this.width,this.container.y=.5*this.game.height-.5*this.height,this.container.x+=this.panel.width*e,this.container.y+=this.panel.height*e},e.prototype.handleContinue=function(){this.onClose&&this.onClose.apply(this.onCloseScope),this.destroy()},e.prototype.destroy=function(){this.btnContinue.onInputDown.remove(this.handleContinue,this),this.game.scale.onSizeChange.remove(this.handleScreenResize,this),this.btnContinue.destroy(!0),this.title.destroy(!0),this.character.destroy(!0),this.panel.destroy(!0),this.container.destroy(!0),this.btnContinue=null,this.title=null,this.character=null,this.panel=null,this.container=null,t.prototype.destroy.call(this,!0)},dt(e,[{key:"height",get:function(){return this.panel.height+this.panel.y}},{key:"width",get:function(){return this.panel.width}}]),e}(Phaser.Group),gt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var mt=function(t){function e(i){var n=i.game,o=i.score,a=void 0===o?0:o;i.target;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return s.icon=s.game.make.sprite(0,0,"ui","icon_clock"),s.icon.x=0,s.icon.y=0,s.add(s.icon),s.timeDisplay=tt(s.game,k,150,I),s.timeDisplay.y=.5*s.icon.height-100,s.timeDisplay.x=s.icon.width+20,s.timeDisplay.text=a,s.add(s.timeDisplay),s.setTime(0),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setTime=function(t){var e=Math.floor(t/6e4),i=(t%6e4/1e3).toFixed(0);this.timeDisplay.text=Q(e,2)+":"+Q(i,2)},e.prototype.destroy=function(){this.icon.destroy(!0),this.timeDisplay.destroy(!0),this.icon=null,this.timeDisplay=null,t.prototype.destroy.call(this,!0)},gt(e,[{key:"width",get:function(){return this.timeDisplay.x+this.timeDisplay.width}},{key:"height",get:function(){return this.timeDisplay.height}}]),e}(Phaser.Group);var yt=function(t){function e(i){var n=i.game,o=i.type;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return a.type=o,a.soundFX=a.type==e.PAPER?at:rt,a.setRandomCostume(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setRandomCostume=function(){switch(this.type){case e.PAPER:this.chosenCostume="collectable_paper_"+Math.ceil(3*Math.random());break;case e.SAUSAGE:this.chosenCostume="collectable_sausage_"+Math.ceil(3*Math.random())}this.loadTexture("level_assets_shared",this.chosenCostume)},e.prototype.getWorldBounds=function(){return this.getBounds()},e}(Phaser.Sprite),bt=yt;yt.PAPER="PAPER",yt.SAUSAGE="SAUSAGE";var vt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var wt=function(t){function e(i){var n=i.game,o=i.score,a=void 0===o?0:o,s=i.target,r=void 0===s?100:s,h=i.type,l=void 0===h?bt.PAPER:h,c=i.scoreColour,u=void 0===c?I:c,p=i.targetColour,d=void 0===p?M:p;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return f.score=a,f.icon=f.game.make.sprite(0,0,"ui",l===bt.PAPER?"icon_paper":"icon_sausage"),f.icon.x=0,f.icon.y=0,f.add(f.icon),f.scoreDisplay=tt(f.game,k,150,u),f.scoreDisplay.y=.5*f.icon.height-100,f.scoreDisplay.x=f.icon.width+10,f.scoreDisplay.text=Z(a),f.add(f.scoreDisplay),f.scoreTargetDisplay=tt(f.game,k,55,d),f.scoreTargetDisplay.text="/ "+r,f.scoreTargetDisplay.x=f.scoreDisplay.x+f.scoreDisplay.width+10,f.scoreTargetDisplay.y=f.scoreDisplay.y+70,f.add(f.scoreTargetDisplay),l===bt.SAUSAGE&&(f.scoreTargetDisplay.text=""),f.onUpdate=new Phaser.Signal,f.onAnimatedScoreComplete=new Phaser.Signal,f.onAnimatedScoreUpdated=new Phaser.Signal,f}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setScore=function(t){this.score=t,this.setScoreDisplayText(this.score)},e.prototype.animateScore=function(t,e){this.animatedScoreTarget=t;var i=this.game.add.tween(this).to({animatedScoreTarget:e},1e3,Phaser.Easing.Exponential.Out,!0);i.onUpdateCallback(this.handleAnimatedScoreUpdate,this),i.onComplete.addOnce(this.handleAnimatedScoreComplete,this),this.game.sounds.playSFX("SCORE_TALLY",{loop:!0})},e.prototype.handleAnimatedScoreUpdate=function(){this.setScoreDisplayText(Math.ceil(this.animatedScoreTarget)),this.onAnimatedScoreUpdated.dispatch()},e.prototype.handleAnimatedScoreComplete=function(){this.setScoreDisplayText(Math.ceil(this.animatedScoreTarget)),this.onAnimatedScoreComplete.dispatch(),this.game.sounds.stopSFX("SCORE_TALLY",{loop:!0})},e.prototype.setScoreDisplayText=function(t){this.scoreDisplay.text=Z(t),this.scoreTargetDisplay.x=this.scoreDisplay.x+this.scoreDisplay.width+10},e.prototype.destroy=function(){this.game.sounds.stopSFX("SCORE_TALLY",{loop:!0}),this.icon.destroy(!0),this.scoreDisplay.destroy(!0),this.scoreTargetDisplay.destroy(!0),this.icon=null,this.scoreDisplay=null,this.scoreTargetDisplay=null,t.prototype.destroy.call(this,!0)},vt(e,[{key:"width",get:function(){return this.scoreTargetDisplay.x+this.scoreTargetDisplay.width}},{key:"height",get:function(){return this.scoreDisplay.height}}]),e}(Phaser.Group),_t=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Ct=function(t){function e(i){var n=i.game,o=i.levelData;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return a.fixedToCamera=!0,a.backingHeight=85,a.backing=a.game.make.graphics(),a.backing.beginFill(0,1),a.backing.drawRect(0,0,a.game.defaultWidth,a.backingHeight),a.add(a.backing),a.timeDisplay=new mt({game:n}),a.timeDisplay.scale.set(50/a.timeDisplay.height),a.timeDisplay.x=.5*a.game.width-a.timeDisplay.width*a.timeDisplay.scale.x-25,a.timeDisplay.y=20,a.add(a.timeDisplay),a.scoreDisplay=new wt({game:n,target:o.collectTarget,type:o.collectType}),a.scoreDisplay.x=.5*a.game.width+25,a.scoreDisplay.y=20,a.scoreDisplay.scale.set(60/a.scoreDisplay.height),a.add(a.scoreDisplay),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateStats=function(t,e){this.timeDisplay.setTime(t),this.scoreDisplay.setScore(e)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0)},_t(e,[{key:"height",get:function(){return this.backingHeight}}]),e}(Phaser.Group),St=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Tt=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.background=new q({game:n,colour:"#000000",alpha:.3}),o.add(o.background),o.container=o.game.make.group(),o.add(o.container),o.panel=o.game.make.image(0,0,"ui","panel_generic"),o.container.add(o.panel),o.title=new pt({game:n,title:pt.HOWTOPLAY}),o.title.x=.5*o.panel.width-.5*o.title.width,o.container.add(o.title),o.btnClose=new ht({game:o.game,id:"btn_close",skin:"btn_close"}),o.btnClose.x=.9*o.panel.width,o.btnClose.y=o.btnClose.height/2,o.btnClose.onInputDown.add(o.closePopup,o),o.container.addChild(o.btnClose),o.upperText=tt(o.game,O,33,L,60,0,{wordWrap:!0,wordWrapWidth:.8*o.panel.width}),o.upperText.angle=-2.5,o.upperText.text=o.game.copy.getCopy("instruction_01_upper"),o.upperText.y=o.title.y+o.title.height+20,o.container.add(o.upperText),o.instructionImage=o.game.make.image(0,0,"instruction_01"),o.instructionImage.x=50,o.instructionImage.y=o.panel.y+.45*o.panel.height,o.container.add(o.instructionImage),o.lowerText=tt(o.game,O,33,L,60,0,{wordWrap:!0,wordWrapWidth:.8*o.panel.width}),o.lowerText.angle=-2.5,o.lowerText.text=o.game.copy.getCopy("instruction_01_lower"),o.lowerText.y=o.instructionImage.y+o.instructionImage.height+30,o.container.add(o.lowerText),o.panel.y=o.title.y+.25*o.title.height,o.onClose=new Phaser.Signal,o.game.scale.onSizeChange.add(o.handleScreenResize,o),o.fixedToCamera=!0,o.handleScreenResize(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleScreenResize=function(){this.container.x=.5*this.game.width-.5*this.width,this.container.y=.5*this.game.height-.5*this.height},e.prototype.handleReplay=function(){this.game.controller.replayLevel(),this.destroy()},e.prototype.handleNextLevel=function(){this.game.controller.nextLevel(),this.destroy()},e.prototype.handleTryAgain=function(){this.game.controller.replayLevel(),this.destroy()},e.prototype.closePopup=function(){this.onClose.dispatch(),this.destroy(!0)},e.prototype.destroy=function(){this.game.scale.onSizeChange.remove(this.handleScreenResize,this),this.btnClose.onInputDown.remove(this.closePopup,this),this.btnClose.destroy(!0),this.title.destroy(!0),this.panel.destroy(!0),this.container.destroy(!0),this.btnClose=null,this.title=null,this.panel=null,this.container=null,t.prototype.destroy.call(this,!0)},St(e,[{key:"height",get:function(){return this.panel.height+this.panel.y}},{key:"width",get:function(){return this.panel.width}}]),e}(Phaser.Group),xt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Et=function(t){function e(i){var n=i.game,o=i.score,a=void 0===o?0:o,s=i.labelCopy,r=i.scoreColour,h=void 0===r?I:r,l=i.scoreFontSize,c=void 0===l?75:l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return u.score=a,u.label=tt(u.game,k,50,L),u.label.text=s||"",u.add(u.label),u.scoreDisplay=tt(u.game,k,c,h),u.scoreDisplay.text=Z(a),u.scoreDisplay.x=u.label.width+20,u.add(u.scoreDisplay),u.label.y=.5*u.scoreDisplay.height-.5*u.label.height,u.onUpdate=new Phaser.Signal,u.onAnimatedScoreComplete=new Phaser.Signal,u.onAnimatedScoreUpdated=new Phaser.Signal,u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setScore=function(t){this.score=t,this.setScoreDisplayText(this.score)},e.prototype.animateScore=function(t,e,i){this.animatedTween&&this.animatedTween.stop(),this.animatedScoreTarget=t,this.animatedTween=this.game.add.tween(this).to({animatedScoreTarget:e},i||1e3,Phaser.Easing.Exponential.Out,!0),this.animatedTween.onUpdateCallback(this.handleAnimatedScoreUpdate,this),this.animatedTween.onComplete.addOnce(this.handleAnimatedScoreComplete,this),this.game.sounds.playSFX("SCORE_TALLY",{loop:!0})},e.prototype.handleAnimatedScoreUpdate=function(){this.setScoreDisplayText(Math.ceil(this.animatedScoreTarget)),this.onAnimatedScoreUpdated.dispatch()},e.prototype.handleAnimatedScoreComplete=function(){this.setScoreDisplayText(Math.ceil(this.animatedScoreTarget)),this.onAnimatedScoreComplete.dispatch(),this.game.sounds.stopSFX("SCORE_TALLY",{loop:!0})},e.prototype.setScoreDisplayText=function(t){this.scoreDisplay.text=Z(t)},e.prototype.destroy=function(){this.game.sounds.stopSFX("SCORE_TALLY",{loop:!0}),this.scoreDisplay.destroy(!0),this.scoreDisplay=null,t.prototype.destroy.call(this,!0)},xt(e,[{key:"width",get:function(){return this.scoreDisplay.x+this.scoreDisplay.width}},{key:"height",get:function(){return this.scoreDisplay.height}}]),e}(Phaser.Group),kt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Ot=function(t){function e(i){var n=i.game,o=i.score,a=void 0===o?0:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return s.frame=s.game.make.sprite(0,0,"ui","frame_highscore"),s.add(s.frame),s.frameCenterY=.5*s.frame.height,s.starIcon=s.game.make.sprite(0,0,"ui","icon_highscore"),s.starIcon.scale.set(30/s.starIcon.height),s.starIcon.x=40,s.starIcon.y=.5*s.frame.height-.5*s.starIcon.height,s.add(s.starIcon),s.copyDisplay=tt(s.game,k,38,R),s.copyDisplay.text=s.game.copy.getCopy("best").toUpperCase(),s.copyDisplay.x=s.starIcon.x+s.starIcon.width+20,s.copyDisplay.y=s.frameCenterY-.5*s.copyDisplay.height,s.add(s.copyDisplay),s.paperIcon=s.game.make.image(0,0,"ui","icon_paper"),s.paperIcon.anchor.set(0,.5),s.paperIcon.x=.5*s.frame.width,s.paperIcon.y=.5*s.frame.height,s.paperIcon.scale.set(45/s.paperIcon.height),s.add(s.paperIcon),s.scoreDisplay=tt(s.game,k,54,R),s.scoreDisplay.x=s.paperIcon.x+s.paperIcon.width+20,s.scoreDisplay.y=.15*s.frame.height,s.scoreDisplay.text=Z(a),s.add(s.scoreDisplay),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setScore=function(t){this.scoreDisplay.text=t,this.scoreTargetDisplay.x=this.scoreDisplay.x+this.scoreDisplay.width+10},e.prototype.destroy=function(){this.frame.destroy(!0),this.starIcon.destroy(!0),this.paperIcon.destroy(!0),this.copyDisplay.destroy(!0),this.scoreDisplay.destroy(!0),this.frame=null,this.starIcon=null,this.paperIcon=null,this.copyDisplay=null,this.scoreDisplay=null,t.prototype.destroy.call(this,!0)},kt(e,[{key:"width",get:function(){return this.frame.width}},{key:"height",get:function(){return this.frame.height}}]),e}(Phaser.Group);var At=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.anchor.set(.5),o.loadTexture("starburst"),o.anim=o.animations.add("play"),o.animations.play("play",24,!1),o.anim.onComplete.add(o.handleAnimationComplete,o),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleAnimationComplete=function(){this.destroy(!0)},e}(Phaser.Sprite),Pt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Dt=function(t){function e(i){var n=i.game,o=i.friendsRemaining,a=i.numFriends;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));for(s.numFriends=a,s.totalWidth=0,s.friendsActivated=0,s.friendsRemaining=[].concat(o),s.friendsToUnlock=s.friendsRemaining.length,s.friendList=["rubi","robotdog","gnipper","gnasher"],s.friendCounters=[];s.friendCounters.length<s.numFriends;){var r=s.game.make.image();r.loadTexture("heads",s.friendList[s.friendCounters.length]+"_ghosted"),r.anchor.set(.5),r.scale.set(75/r.height),r.y=25,r.x=50*s.friendCounters.length+20*s.friendCounters.length,s.add(r),r.friend=s.friendList[s.friendCounters.length],s.friendCounters.push(r),s.totalWidth=r.x+25}return s.friendsActivated=0,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.canUnlockFriend=function(){return this.friendsToUnlock>0},e.prototype.activateFriend=function(){var t=this;this.friendsToUnlock--,this.friendsActivated++;var e=this.friendCounters.findIndex(function(e){return t.friendsRemaining.includes(e.friend.toUpperCase())});if(e>=0){this.friendCounters[e].loadTexture("heads",this.friendCounters[e].friend);var i=new At({game:this.game});i.x=this.friendCounters[e].x,i.y=this.friendCounters[e].y,this.add(i),this.friendCounters.splice(e,1),this.game.sounds.playSFX("BONUS_STARS")}},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0)},Pt(e,[{key:"width",get:function(){return this.totalWidth}},{key:"height",get:function(){return this.numFriends>0?this.friendCounters[0].height:0}}]),e}(Phaser.Group);var Lt=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.game=n,o.panel=o.game.make.image(0,0,"ui","panel_battersea"),o.panel.scale.set(.35),o.panel.anchor.set(1,1),o.add(o.panel),o.logo=o.game.make.image(0,0,"logo_battersea"),o.logo.scale.set(.4),o.logo.anchor.set(.5,.5),o.logo.position.set(.5*-o.panel.width,.5*-o.panel.height),o.add(o.logo),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(Phaser.Group),It=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Rt=function(t){function e(i){var n=i.game,o=i.isLastLevel,a=i.baseLevelScore,s=i.totalLevelScore,r=i.prevGameScore,h=i.newGameScore,l=i.collectTarget,c=i.collectType,u=i.friendsRemaining;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var p=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return p.game=n,p.isLastLevel=o,p.baseLevelScore=a,p.totalLevelScore=s,p.prevGameScore=r,p.newGameScore=h,p.collectTarget=l,p.collectType=c,p.friendsRemaining=u,p.background=new q({game:n,colour:"#000000",alpha:.5}),p.add(p.background),p.container=p.game.make.group(),p.add(p.container),p.panel=p.game.make.image(0,0,"ui","panel_generic"),p.container.add(p.panel),p.character=p.game.make.image(0,0,"modal_characters","modal_char_levelwin"),p.character.y=0,p.character.anchor.set(.5,0),p.character.x=.6*p.panel.width,p.container.addAt(p.character,0),p.title=new pt({game:n,title:pt.WELLDONE}),p.title.x=.5*p.panel.width-.5*p.title.width,p.title.y=.6*p.character.height,p.container.add(p.title),p.panel.y=p.title.y+.3*p.title.height,p.scoreDisplay=new wt({game:n,score:0,target:p.collectTarget,type:p.collectType}),p.scoreDisplay.x=.5*p.panel.width-.5*p.scoreDisplay.width,p.scoreDisplay.y=.65*p.panel.height,p.container.addChild(p.scoreDisplay),p.btnReplay=new ht({game:p.game,id:"btn_replay",skin:"btn_replay"}),p.btnReplay.x=.5*p.panel.width,p.btnReplay.y=p.panel.y+p.panel.height,p.btnReplay.onInputDown.add(p.handleReplay,p),o?(p.btnContinue=new ht({game:p.game,id:"btn_continue",skin:"btn_continue"}),p.btnContinue.x=.5*p.panel.width,p.btnContinue.y=p.btnReplay.y-p.btnReplay.height-.25*p.btnContinue.height,p.btnContinue.onInputDown.add(p.handleNextLevel,p)):(p.btnContinue=new ht({game:p.game,id:"btn_nextlevel",skin:"btn_nextlevel"}),p.btnContinue.x=.5*p.panel.width,p.btnContinue.y=p.btnReplay.y-p.btnReplay.height-.25*p.btnContinue.height,p.btnContinue.onInputDown.add(p.handleNextLevel,p)),p.game.scale.onSizeChange.add(p.handleScreenResize,p),p.fixedToCamera=!0,p.handleScreenResize(),p.scoreDisplay.onAnimatedScoreUpdated.add(p.handleAnimatedScoreUpdate,p),p.scoreDisplay.onAnimatedScoreComplete.add(p.handleAnimatedScoreComplete,p),p.scoreDisplay.animateScore(0,p.baseLevelScore),p}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleAnimatedScoreUpdate=function(){this.scoreDisplay.x=.5*this.panel.width-.5*this.scoreDisplay.width},e.prototype.handleAnimatedScoreComplete=function(){this.handleAnimatedScoreUpdate(),this.game.time.events.add(750,this.tallyLevelScore,this).autoDestroy=!0},e.prototype.addStarBurst=function(t,e){var i=new At({game:this.game});i.scale.set(2),i.position.set(t,e),this.container.add(i)},e.prototype.tallyLevelScore=function(){var t=.5*this.scoreDisplay.scale.x,e=this.scoreDisplay.width*t;this.game.add.tween(this.scoreDisplay.scale).to({x:t,y:t},500,Phaser.Easing.Exponential.Out,!0);var i=this.game.add.tween(this.scoreDisplay).to({x:.5*this.panel.width-.5*e,y:this.title.y+this.title.height+10},500,Phaser.Easing.Exponential.Out,!0);this.addStarBurst(this.panel.width/2,this.scoreDisplay.y),this.levelScoreContainer=this.game.make.group(),this.levelScoreContainer.y=this.scoreDisplay.y+200,this.levelScoreContainer.x=this.panel.width/2,this.container.add(this.levelScoreContainer),this.multiplierDisplay=new Dt({game:this.game,friendsRemaining:this.friendsRemaining,numFriends:this.game.controller.gameModel.getCurrentLevel()-1}),this.multiplierDisplay.x=.5*-this.multiplierDisplay.width,this.levelScoreContainer.addChild(this.multiplierDisplay),this.levelScoreDisplay=new Et({game:this.game,score:this.baseLevelScore,labelCopy:this.game.copy.getCopy("level_score")+" : "}),this.levelScoreDisplay.x=-this.levelScoreDisplay.width/2,this.levelScoreDisplay.y=this.multiplierDisplay.y+this.multiplierDisplay.height,this.levelScoreContainer.add(this.levelScoreDisplay),i.onComplete.addOnce(this.triggerMultipliers,this)},e.prototype.triggerMultipliers=function(){this.multiplierDisplay.canUnlockFriend()?(this.multiplierDisplay.activateFriend(),this.levelScoreDisplay.animateScore(this.baseLevelScore*this.multiplierDisplay.friendsActivated,this.baseLevelScore*(this.multiplierDisplay.friendsActivated+1),500),this.game.time.events.add(750,this.triggerMultipliers,this).autoDestroy=!0):this.handleMultipliersComplete()},e.prototype.handleMultipliersComplete=function(){this.game.time.events.add(750,this.tallyFinalScore,this).autoDestroy=!0},e.prototype.tallyFinalScore=function(){this.game.add.tween(this.levelScoreContainer.scale).to({x:.75,y:.75},500,Phaser.Easing.Exponential.Out,!0),this.game.add.tween(this.levelScoreContainer).to({y:this.scoreDisplay.y+100},500,Phaser.Easing.Exponential.Out,!0),this.addStarBurst(this.panel.width/2,this.levelScoreContainer.y),this.totalScoreDisplay=new Et({game:this.game,score:this.baseScore,labelCopy:this.game.copy.getCopy("total_score")+" : "}),this.totalScoreDisplay.scale.set(1.25),this.totalScoreDisplay.x=.5*-this.totalScoreDisplay.width,this.totalScoreDisplay.y=this.levelScoreDisplay.y+100,this.levelScoreContainer.add(this.totalScoreDisplay),this.totalScoreDisplay.animateScore(this.prevGameScore,this.newGameScore),this.totalScoreDisplay.onAnimatedScoreUpdated.add(this.handleFinalScoreAnimationUpdate,this),this.totalScoreDisplay.onAnimatedScoreComplete.add(this.handleFinalScoreAnimationComplete,this)},e.prototype.handleFinalScoreAnimationUpdate=function(){var t=.5*-this.totalScoreDisplay.width;this.totalScoreDisplay.x=this.totalScoreDisplay.scale.x*t},e.prototype.handleFinalScoreAnimationComplete=function(){this.totalScoreDisplay&&(this.handleFinalScoreAnimationUpdate(),this.addStarBurst(this.panel.width/2,this.totalScoreDisplay.y+this.levelScoreContainer.y)),this.btnContinue&&this.container.add(this.btnContinue),this.btnContinue&&this.container.add(this.btnContinue),this.btnReplay&&this.container.add(this.btnReplay),this.btnTryAgain&&this.container.add(this.btnTryAgain)},e.prototype.handleScreenResize=function(){this.container.x=.5*this.game.width-.5*this.width,this.container.y=.5*this.game.height-.5*this.height},e.prototype.handleReplay=function(){this.game.controller.replayLevel(),this.destroy()},e.prototype.handleNextLevel=function(){this.game.controller.nextLevel(),this.destroy()},e.prototype.handleTryAgain=function(){this.game.controller.replayLevel(),this.destroy()},e.prototype.destroy=function(){this.game.scale.onSizeChange.remove(this.handleScreenResize,this),this.btnTryAgain&&(this.btnTryAgain.onInputDown.remove(this.handleTryAgain,this),this.btnTryAgain.destroy(!0)),this.btnContinue&&(this.btnContinue.onInputDown.remove(this.handleNextLevel,this),this.btnContinue.destroy(!0)),this.btnReplay&&(this.btnReplay.onInputDown.remove(this.handleReplay,this),this.btnReplay.destroy(!0)),this.scoreDisplay.destroy(!0),this.title.destroy(!0),this.character.destroy(!0),this.panel.destroy(!0),this.container.destroy(!0),this.btnTryAgain=null,this.btnContinue=null,this.btnReplay=null,this.highScoreDisplay=null,this.scoreDisplay=null,this.title=null,this.character=null,this.panel=null,this.container=null,t.prototype.destroy.call(this,!0)},It(e,[{key:"height",get:function(){return this.panel.height+this.panel.y}},{key:"width",get:function(){return this.panel.width}}]),e}(Phaser.Group),Mt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Gt=function(t){function e(i){var n=i.game,o=i.totalLevelScore,a=i.newGameScore,s=i.collectTarget,r=i.collectType;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return h.totalLevelScore=o,h.newGameScore=a,h.collectTarget=s,h.background=new q({game:n,colour:"#000000",alpha:.5}),h.add(h.background),h.container=h.game.make.group(),h.add(h.container),h.panel=h.game.make.image(0,0,"ui","panel_generic"),h.container.add(h.panel),h.character=h.game.make.image(0,0,"modal_characters","modal_char_levelfail"),h.character.y=0,h.character.x=.5*h.panel.width-.5*h.character.width,h.container.addAt(h.character,0),h.title=new pt({game:n,title:pt.OHNO}),h.title.x=.5*h.panel.width-.5*h.title.width,h.title.y=.75*h.character.height,h.container.add(h.title),h.panel.y=h.title.y+.3*h.title.height,h.scoreDisplay=new wt({game:n,score:0,target:h.collectTarget,scoreColour:G,type:r}),h.scoreDisplay.x=.5*h.panel.width-.5*h.scoreDisplay.width,h.scoreDisplay.y=h.title.y+h.title.height+50,h.container.addChild(h.scoreDisplay),h.totalScoreDisplay=new Et({game:h.game,score:h.newGameScore,labelCopy:h.game.copy.getCopy("total_score")+" : "}),h.totalScoreDisplay.x=.5*h.panel.width-.5*h.totalScoreDisplay.width,h.totalScoreDisplay.y=h.scoreDisplay.y+h.scoreDisplay.height+20,h.btnTryAgain=new ht({game:h.game,id:"btn_tryagain",skin:"btn_tryagain"}),h.btnTryAgain.x=.5*h.panel.width,h.btnTryAgain.y=h.totalScoreDisplay.y+h.totalScoreDisplay.height+.75*h.btnTryAgain.height,h.btnTryAgain.onInputDown.add(h.handleTryAgain,h),h.panel.height=h.btnTryAgain.y-h.panel.y,h.game.scale.onSizeChange.add(h.handleScreenResize,h),h.fixedToCamera=!0,h.handleScreenResize(),h.scoreDisplay.onAnimatedScoreUpdated.add(h.handleAnimatedScoreUpdate,h),h.scoreDisplay.onAnimatedScoreComplete.add(h.handleAnimatedScoreComplete,h),h.scoreDisplay.animateScore(0,h.totalLevelScore),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleScreenResize=function(){this.container.x=.5*this.game.width-.5*this.width,this.container.y=.5*this.game.height-.5*this.height},e.prototype.handleAnimatedScoreUpdate=function(){this.scoreDisplay.x=.5*this.panel.width-.5*this.scoreDisplay.width},e.prototype.handleAnimatedScoreComplete=function(){this.handleAnimatedScoreUpdate(),this.container.add(this.totalScoreDisplay),this.addStarBurst(this.panel.width/2,this.totalScoreDisplay.y),this.container.add(this.btnTryAgain)},e.prototype.addStarBurst=function(t,e){var i=new At({game:this.game});i.scale.set(2),i.position.set(t,e),this.container.add(i)},e.prototype.handleTryAgain=function(){this.game.controller.replayLevel(),this.destroy()},e.prototype.destroy=function(){this.game.scale.onSizeChange.remove(this.handleScreenResize,this),this.btnTryAgain.onInputDown.remove(this.handleTryAgain,this),this.btnTryAgain.destroy(!0),this.scoreDisplay.destroy(!0),this.title.destroy(!0),this.character.destroy(!0),this.panel.destroy(!0),this.container.destroy(!0),this.btnTryAgain=null,this.btnNextLevel=null,this.btnReplay=null,this.highScoreDisplay=null,this.scoreDisplay=null,this.title=null,this.character=null,this.panel=null,this.container=null,t.prototype.destroy.call(this,!0)},Mt(e,[{key:"height",get:function(){return this.panel.height+this.panel.y}},{key:"width",get:function(){return this.panel.width}}]),e}(Phaser.Group),jt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Nt=function(t){function e(i){var n=i.game;i.message,i.onClose,i.onCloseScope;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.background=new q({game:n,colour:"#000000",alpha:.3}),o.add(o.background),o.bsLogo=new Lt({game:n}),o.bsLogo.position.set(o.game.width,o.game.height),o.add(o.bsLogo),o.container=o.game.make.group(),o.add(o.container),o.panel=o.game.make.image(0,0,"ui","panel_generic"),o.container.add(o.panel),o.btnContinue=new ht({game:o.game,id:"btn_continue",skin:"btn_continue"}),o.btnContinue.x=.5*o.panel.width,o.btnContinue.y=o.btnContinue.height,o.btnContinue.onInputDown.add(o.handleContinue,o),o.container.addChild(o.btnContinue),o.btnRestart=new ht({game:o.game,id:"btn_continue",skin:"btn_restart"}),o.btnRestart.y=o.btnContinue.y+o.btnContinue.height,o.btnRestart.x=.5*o.panel.width,o.btnRestart.onInputDown.add(o.handleRestart,o),o.container.addChild(o.btnRestart),o.btnCredits=new ht({game:o.game,id:"btn_continue",skin:"btn_credits"}),o.btnCredits.y=o.btnRestart.y+o.btnRestart.height,o.btnCredits.x=.5*o.panel.width,o.btnCredits.onInputDown.add(o.handleCredits,o),o.container.addChild(o.btnCredits),o.panel.height=o.btnCredits.y+.25*o.btnCredits.height,o.game.scale.onSizeChange.add(o.handleScreenResize,o),o.fixedToCamera=!0,o.handleScreenResize(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleScreenResize=function(){this.container.x=.5*this.game.width-.5*this.width,this.container.y=.5*this.game.height-.5*this.height,this.bsLogo.position.set(this.game.width,this.game.height)},e.prototype.handleCredits=function(){this.game.controller.showGameCredits()},e.prototype.handleRestart=function(){this.game.controller.restartLevel()},e.prototype.handleContinue=function(){this.game.controller.resumeGame()},e.prototype.destroy=function(){this.game.scale.onSizeChange.remove(this.handleScreenResize,this),this.btnContinue.onInputDown.remove(this.handleContinue,this),this.btnRestart.onInputDown.remove(this.handleContinue,this),this.btnCredits.onInputDown.remove(this.handleContinue,this),this.btnCredits.destroy(!0),this.btnRestart.destroy(!0),this.btnContinue.destroy(!0),this.panel.destroy(!0),this.container.destroy(!0),this.btnContinue=null,this.btnRestart=null,this.btnCredits=null,this.panel=null,this.container=null,t.prototype.destroy.call(this,!0)},jt(e,[{key:"height",get:function(){return this.panel.height+this.panel.y}},{key:"width",get:function(){return this.panel.width}}]),e}(Phaser.Group),Ht=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Bt=function(t){function e(i){var n=i.game,o=i.message;i.onClose,i.onCloseScope;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));a.game.controller.config.getIntroMessageById(o);return a.background=new q({game:n,colour:"#000000",alpha:.3}),a.add(a.background),a.bsLogo=new Lt({game:n}),a.bsLogo.position.set(a.game.width,a.game.height),a.add(a.bsLogo),a.container=a.game.make.group(),a.add(a.container),a.panel=a.game.make.image(0,0,"ui","panel_generic"),a.container.add(a.panel),a.copy=tt(a.game,O,27,N),a.copy.text=a.game.copy.getCopy("developed_by").toUpperCase(),a.copy.y=50,a.copy.x=.5*a.panel.width-.5*a.copy.width,a.container.add(a.copy),a.logo=a.game.make.image(0,0,"logo_jollywise"),a.logo.anchor.set(.5,0),a.logo.x=a.panel.width/2,a.logo.y=a.copy.y+a.copy.height,a.container.add(a.logo),a.btnClose=new ht({game:a.game,id:"btn_continue",skin:"btn_close"}),a.btnClose.y=0,a.btnClose.x=.92*a.panel.width,a.btnClose.onInputDown.add(a.handleClose,a),a.container.addChild(a.btnClose),a.panel.height=a.logo.y+a.logo.height+100,a.game.scale.onSizeChange.add(a.handleScreenResize,a),a.fixedToCamera=!0,a.handleScreenResize(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleScreenResize=function(){this.container.x=.5*this.game.width-.5*this.width,this.container.y=.5*this.game.height-.5*this.height,this.bsLogo.position.set(this.game.width,this.game.height)},e.prototype.handleClose=function(){this.game.controller.closeGameCredits()},e.prototype.destroy=function(){this.game.scale.onSizeChange.remove(this.handleScreenResize,this),this.btnClose.onInputDown.remove(this.handleClose,this),this.btnClose.destroy(!0),this.logo.destroy(!0),this.panel.destroy(!0),this.container.destroy(!0),this.btnClose=null,this.logo=null,this.panel=null,this.container=null,t.prototype.destroy.call(this,!0)},Ht(e,[{key:"height",get:function(){return this.panel.height+this.panel.y}},{key:"width",get:function(){return this.panel.width}}]),e}(Phaser.Group),Ft="VIEW_SCREEN_INSTRUCTIONS",Wt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};var zt=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.previousStates=[],n.state=null,n.enabled=!1,n.active=!0,n.visible=!1,n.screenIsRotated=!1,n.alpha=0,n.bindedHandleButtonInteraction=n.handleButtonInteraction.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){this.trimTop=this.game.add.image(0,0,"ui","vignette_top"),this.trimTop.y=0,this.add(this.trimTop),this.trimBottom=this.game.add.image(0,0,"ui","vignette_bottom"),this.trimBottom.anchor.set(0,1),this.add(this.trimBottom),this.hudButtons=new ct(this.game),this.hudButtons.init(t),this.createModal(),this.add(this.hudButtons),this.enable()},e.prototype.fadeIn=function(){this.alpha=0,this.visible=!0,this.game.add.tween(this).to({alpha:1},250).start()},e.prototype.isWelcomeScreen=function(){return null===this.state||this.state.id===e.WELCOME},e.prototype.setScreenIsRotated=function(t){this.screenIsRotated=t},e.prototype.show=function(){this.visible=!0},e.prototype.hide=function(){this.visible=!0},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.activate=function(t){var i=t.id,n=void 0===i?e.PLAYING:i,o=t.isModal,a=void 0!==o&&o,s=this.game.stage.children.length,r=this.screenIsRotated?s-2:s-1;this.game.stage.addChildAt(this,r),this.active=!0,this.configure({id:n,isModal:a}),this.visible=!0,this.game.scale.onSizeChange.add(this.positionElements,this)},e.prototype.deactivate=function(){this.reset(),this.active=!1,this.visible=!1,this.game.scale.onSizeChange.remove(this.positionElements,this),this.game.stage.removeChild(this)},e.prototype.configure=function(t){var i=t.id,n=void 0===i?e.PLAYING:i,o=t.isModal,a=void 0!==o&&o,s=t.isVisible,r=void 0===s||s;this.saveState(this.state),this.state={id:n,isModal:a};var h=e.STATES[this.state.id];this.hudButtons.renderButtons(h,this.bindedHandleButtonInteraction),this.showModal(this.state.isModal),this.visible=r,this.positionElements()},e.prototype.reset=function(){this.state=null,this.previousStates=[]},e.prototype.createModal=function(){},e.prototype.showModal=function(t){},e.prototype.showLevelWin=function(t){var e=t.isLastLevel,i=t.baseLevelScore,n=t.totalLevelScore,o=t.prevGameScore,a=t.newGameScore,s=t.collectTarget,r=t.collectType,h=t.friendsRemaining;this.levelEnd=new Rt({game:this.game,isLastLevel:e,baseLevelScore:i,totalLevelScore:n,prevGameScore:o,newGameScore:a,collectTarget:s,collectType:r,friendsRemaining:h}),this.add(this.levelEnd)},e.prototype.showLevelFail=function(t){var e=t.totalLevelScore,i=t.newGameScore,n=t.collectTarget;this.levelEnd=new Gt({game:this.game,totalLevelScore:e,newGameScore:i,collectTarget:n}),this.add(this.levelEnd)},e.prototype.closeLevelEnd=function(){this.levelEnd&&this.levelEnd.destroy()},e.prototype.showGamePause=function(){this.hudGamePause=new Nt({game:this.game}),this.add(this.hudGamePause)},e.prototype.closeGamePause=function(){this.hudGamePause&&this.hudGamePause.destroy(!0)},e.prototype.showGameIntro=function(t,e){this.gameIntro=new ft({game:this.game,onClose:t,onCloseScope:e}),this.add(this.gameIntro)},e.prototype.showGameIntroMessage=function(t,e,i){this.gameIntro=new ft({game:this.game,message:t,onClose:e,onCloseScope:i}),this.add(this.gameIntro)},e.prototype.closeGameIntro=function(){this.gameIntro&&this.gameIntro.destroy()},e.prototype.showGameCredits=function(){this.hudGameCredits=new Bt({game:this.game}),this.add(this.hudGameCredits)},e.prototype.closeGameCredits=function(){this.hudGameCredits&&this.hudGameCredits.destroy(!0)},e.prototype.showGamePlayHud=function(t){this.gamePlayHud||(this.gamePlayHud=new Ct({game:this.game,levelData:t}),this.addAt(this.gamePlayHud,0)),this.trimTop.y=this.gamePlayHud.height-1},e.prototype.hideGamePlayHud=function(){this.gamePlayHud&&(this.gamePlayHud.destroy(),this.gamePlayHud=null),this.trimTop.y=0},e.prototype.updateGamePlayHud=function(t,e){this.gamePlayHud&&this.gamePlayHud.updateStats(t,e)},e.prototype.showInstructions=function(){this.gameInstructions||(this.gameInstructions=new Tt({game:this.game}),this.gameInstructions.onClose.add(this.handleInstructionClose,this),this.add(this.gameInstructions))},e.prototype.handleInstructionClose=function(){this.gameInstructions.onClose.remove(this.handleInstructionClose,this),this.gameInstructions=null},e.prototype.updateTimeProgress=function(t){},e.prototype.showTimer=function(){},e.prototype.hideTimer=function(){},e.prototype.positionElements=function(){var t=this.game.screenPaddingX,e=this.game.screenPaddingY;this.hudButtons.positionButtonGroups(t,e),this.modalBG&&(this.modalBG.width=this.game.width,this.modalBG.height=this.game.height,this.modalBG.position.set(0)),this.timer&&this.timer.position.set(.5*(this.game.width-this.timer.width),e),this.add(this.trimTop),this.add(this.trimBottom),this.game.world.bringToTop(this.trimTop),this.game.world.bringToTop(this.trimBottom),this.trimBottom.y=this.game.height},e.prototype.handleButtonInteraction=function(t){this.handleSelectedButton(t.id)},e.prototype.handleSelectedButton=function(t){if(console.log("BUTTON : "+t),this.game.sounds.checkAudioContext(),this.enabled&&!this.screenIsRotated)switch(t){case"btn_play":this.game.track("GAME_PLAY"),this.game.controller.showGameIntro();break;case"btn_pause":this.game.track("GAME_PAUSE"),this.game.controller.pauseGame();break;case"btn_levelend_continue":this.configure({id:e.EMPTY}),this.game.controller.nextLevel();break;case"btn_paused_continue":this.game.track("GAME_RESUME"),this.configure({id:e.PLAYING}),this.game.controller.resumeGame();break;case"btn_gameend_restart":this.game.track("GAME_REPLAY"),this.configure({id:e.EMPTY}),this.game.controller.restartGame();break;case"btn_paused_restart":this.configure({id:e.EMPTY}),this.game.controller.restartGame(),this.game.track("GAME_RESTART");break;case"btn_paused_credits":this.configure({id:e.CREDITS,isModal:!1}),this.game.controller.showCredits(),this.game.track("VIEW_SCREEN_CREDITS");break;case"btn_home":this.game.track("GAME_EXIT"),this.game.controller.quitGame();break;case"btn_help":this.showInstructions();break;case"btn_sound":this.game.track(this.game.controller.uiModel.getIsMuted()?"AUDIO_ON":"AUDIO_OFF"),this.game.controller.uiModel.toggleAudio()}else console.info("HUD DISABLED : ignoring button",t)},e.prototype.saveState=function(t){t&&this.previousStates.push(Wt({},t))},e.prototype.retrievePreviousState=function(){return this.previousStates.pop()||null},e.prototype.destroy=function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0],arguments[1];t.prototype.destroy.call(this,!0)},e}(Phaser.Group);zt.EMPTY="EMPTY",zt.WELCOME="WELCOME",zt.PAUSE="PAUSE",zt.CREDITS="CREDITS",zt.PLAYING="PLAYING",zt.LEVELEND="LEVELEND",zt.GAMEEND="GAMEEND",zt.GAMEOVER="GAMEOVER",zt.GAMEOVER_BILLY="GAMEOVER_BILLY",zt.STATES={EMPTY:[],WELCOME:["help","sound"],PAUSE:["home","sound"],CREDITS:["home","sound"],PLAYING:["pause","sound"],LEVELEND:["levelend_continue"],GAMEEND:["home","sound"],GAMEOVER:["home","sound"],GAMEOVER_BILLY:["home","sound"]};var Ut=zt,Vt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Yt=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.copy=tt(o.game,O,18,j),o.copy.text=o.game.copy.getCopy("copyright"),o.add(o.copy),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),Vt(e,[{key:"width",get:function(){return this.copy.width}},{key:"height",get:function(){return this.copy.height}}]),e}(Phaser.Group);var qt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){},e.prototype.preload=function(t){},e.prototype.create=function(t){this.container=t.make.group(),this.game.track("VIEW_SCREEN_WELCOME"),this.background=new J({game:t}),this.background.anchor.set(.5),this.background.position.set(t.defaultWidth/2,t.defaultHeight/2),this.container.add(this.background),this.bsLogo=new Lt({game:this.game}),this.bsLogo.x=this.game.width,this.bsLogo.y=this.game.height,this.gameLogo=t.make.image(0,0,"logo_game"),this.gameLogo.anchor.set(.5),this.gameLogo.position.set(t.defaultWidth/2,.38*t.defaultHeight),this.container.add(this.gameLogo),this.brandLogo=t.make.image(0,0,"logo_dennisandgnasher"),this.brandLogo.anchor.set(.5,0),this.brandLogo.position.set(t.defaultWidth/2,30),this.container.add(this.brandLogo),this.characters=this.game.make.image(0,0,"welcome_characters"),this.characters.x=-90,this.characters.y=this.game.defaultHeight-.95*this.characters.height,this.container.add(this.characters),this.copyright=new Yt({game:t}),this.copyright.x=this.game.width/2-this.copyright.width/2,this.copyright.y=this.game.height-this.copyright.height,this.container.add(this.copyright),this.btnPlay=new ht({game:this.game,id:"btn_play",skin:"btn_play"}),this.btnPlay.x=.75*this.game.width,this.btnPlay.y=.54*this.game.height,this.btnPlay.onInputDown.add(this.handlePlayGame,this),this.container.add(this.btnPlay),t.windowEventController.handleWindowResize(),t.scale.onSizeChange.add(this.positionContainer,this),this.positionContainer(),t.hud.activate({id:Ut.WELCOME}),t.hud.fadeIn(),this.game.sounds.playBackgroundMusic(),console.log(this.game.stage),this.game.hud.add(this.bsLogo)},e.prototype.positionContainer=function(){this.copyright.x=this.game.width/2-this.copyright.width/2,this.copyright.y=this.game.height-this.copyright.height;var t=1-(this.game.defaultHeight-this.game.height)/(.25*this.game.defaultHeight),e=.1*t;this.characters.scale.set(.9+e),this.characters.y=this.game.defaultHeight-.95*this.characters.height,this.characters.y-=150*(1-t);var i=.2*this.game.height;this.btnPlay.y=.65*this.game.height,this.btnPlay.y+=i*(1-t),this.game.aspectController.is3by4?this.btnPlay.x=.5*this.game.width:this.btnPlay.x=.75*this.game.width,this.bsLogo.position.set(this.game.width,this.game.height);var n=.5*(this.game.width-this.game.defaultWidth);this.background.scale.set(1),this.container.position.set(n,0)},e.prototype.handlePlayGame=function(){this.game.controller.startNewGame()},e.prototype.shutdown=function(t){t.scale.onSizeChange.remove(this.positionContainer,this),this.game.hud.remove(this.bsLogo),this.background.destroy(!0),this.container.destroy(!0),this.background=null,this.bg_scene=null,this.container=null,this.gameLogo=null},e}(Phaser.State);var Xt=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.game.sounds.playSFX(st,{loop:!0,volume:.2}),o.onComplete=new Phaser.Signal,o.container=n.make.group(),o.background=new J({game:n,type:J.STRIPED}),o.background.anchor.set(.5),o.background.position.set(n.defaultWidth/2,n.defaultHeight/2),o.road=o.game.make.sprite(0,0,"vanintro","vanintro_road0001"),o.road.x=o.game.defaultWidth-o.road.width,o.road.y=o.game.defaultHeight-o.road.height,o.road.animations.add("play",Phaser.Animation.generateFrameNames("vanintro_road",1,3,"",4)),o.road.animations.play("play",12,!0),o.container.add(o.road),o.van=o.game.make.sprite(),o.van.costume=o.game.make.sprite(0,0,"vanintro","vanintro_van_closed0001"),o.van.costume.animations.add("play",Phaser.Animation.generateFrameNames("vanintro_van_closed",1,2,"",4)),o.van.costume.animations.play("play",12,!0),o.van.costume.initY=0,o.van.addChild(o.van.costume),o.van.baseShadow=o.game.make.sprite(.25*o.van.costume.width,.85*o.van.costume.height,"vanintro","vanintro_van_shadow0001"),o.van.baseShadow.animations.add("shadow",Phaser.Animation.generateFrameNames("vanintro_van_shadow",1,2,"",4)),o.van.baseShadow.animations.play("shadow",12,!0),o.van.addChildAt(o.van.baseShadow,0),o.game.add.existing(o.container),o.van.scale.set(1.5*o.game.defaultWidth/o.van.costume.width),o.van.x=o.game.defaultWidth-o.van.costume.width*o.van.scale.x+100,o.van.y=o.game.defaultHeight-o.van.costume.height*o.van.scale.y+100,o.container.add(o.van),o.btnSkip=new ht({game:o.game,id:"btn_play",skin:"btn_play",defaultScale:.5}),o.btnSkip.scale.set(.5),o.btnSkip.x=.85*o.game.width,o.btnSkip.y=.9*o.game.height,o.duration=0,o.birth=o.game.time.now,o.exitFlagged=!1,o.game.scale.onSizeChange.add(o.positionContainer,o),o.positionContainer(),o.game.add.existing(o.background),o.game.world.sendToBack(o.background),o.game.add.existing(o.btnSkip),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){this.moveVan()},e.prototype.positionContainer=function(){this.btnSkip.y=.9*this.game.height,this.container.x=this.game.width-this.game.defaultWidth,this.container.y=this.game.height-this.game.defaultHeight},e.prototype.moveVan=function(){this.game.add.tween(this.van.scale).to({x:1,y:1},2e3,Phaser.Easing.Exponential.Out,!0,2e3),this.game.add.tween(this.van).to({x:.25*this.game.defaultWidth,y:this.road.y-.83*this.van.costume.height},2e3,Phaser.Easing.Exponential.Out,!0,2e3).onComplete.add(this.openVan,this)},e.prototype.openVan=function(){var t=this;this.game.sounds.playSFX("VAN_DOOR_OPEN"),this.van.costume.animations.stop(),this.van.costume.loadTexture("vanintro","vanintro_van_open"),this.van.costume.x-=.21*this.van.costume.width,this.van.costume.y-=.15*this.van.costume.height,this.van.costume.initY=this.van.costume.y,this.sausageContainer=this.game.make.group(),this.sausageContainer.x=200,this.sausageContainer.y=800,this.container.add(this.sausageContainer),this.sausages=[],Kt.forEach(function(e,i){var n=t.game.make.sprite(0,0,"vanintro","vanintro_van_sausages");n.anchor.set(.5),n.angle=360*Math.random(),n.x=e.start.x,n.y=e.start.y;var o=t.game.add.tween(n).to({x:e.expand.x,y:e.expand.y},1e3,Phaser.Easing.Exponential.Out),a=t.game.add.tween(n).to({x:e.finish.x,y:e.finish.y},400,Phaser.Easing.Exponential.In);t.game.add.tween(n.scale).to({x:1.25,y:1.25},1300,Phaser.Easing.Exponential.In,!0);o.chain(a),o.start(),t.sausages.push(n),t.sausageContainer.add(n)}),this.game.time.events.add(2500,this.dispatchComplete,this).autoDestroy=!0,this.game.sounds.playSFX("GNASHER_FOLLOW")},e.prototype.update=function(t){this.duration+=this.game.time.elapsedMS,this.van.costume.y=this.van.costume.initY+Math.sin(.1*this.duration)},e.prototype.dispatchComplete=function(){this.onComplete.dispatch()},e.prototype.destroy=function(){this.game.sounds.stopSFX(st),this.game.scale.onSizeChange.remove(this.positionContainer,this),this.container.destroy(!0),this.container=null,t.prototype.destroy.call(this,!0)},e}(Phaser.Group),Kt=[{start:{x:166,y:211},expand:{x:144,y:289},finish:{x:-457,y:500}},{start:{x:351,y:57},expand:{x:359,y:139},finish:{x:200,y:1037}},{start:{x:263,y:102},expand:{x:170,y:154},finish:{x:-846,y:500}},{start:{x:268,y:209},expand:{x:226,y:244},finish:{x:-238,y:633}},{start:{x:374,y:156},expand:{x:366,y:206},finish:{x:339,y:738}}],Jt=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Qt=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.costume=o.game.make.image(0,0,"intro_base","intro_thought_bubble"),o.costume.anchor.set(.5),o.add(o.costume),o.bubbleMask=o.game.make.graphics(),o.bubbleMask.beginFill(16711680,.25),Zt.forEach(function(t){o.bubbleMask.drawCircle(t.x,t.y,t.radius)}),o.bubbleMask.y-=o.costume.height/2,o.bubbleMask.x-=o.costume.width/2,o.add(o.bubbleMask),o.content=o.game.make.group(),o.content.x=o.bubbleMask.x,o.content.y=o.bubbleMask.y,o.content.mask=o.bubbleMask,o.add(o.content),o.paperContainer=o.game.make.group(),o.paperContainer.x=60,o.paperContainer.y=100,o.content.add(o.paperContainer),o.paper=o.createPaperGrid(.9*o.costume.width,.6*o.costume.height,o.paperContainer),o.gnasher=o.game.make.sprite(),o.gnasher.loadTexture("intro_gnasher","intro_gnasher_run0001"),o.gnasher.animations.add("run",Phaser.Animation.generateFrameNames("intro_gnasher_run",1,9,"",4)),o.gnasher.animations.play("run",24,!0),o.gnasher.x=1.5*-o.gnasher.width,o.content.add(o.gnasher),o.sausageMountain=o.game.make.sprite(),o.sausageMountain.loadTexture("intro_base","intro_sausages"),o.sausageMountain.anchor.set(0,0),o.sausageMountain.y=o.costume.height,o.content.add(o.sausageMountain),o.gnasherSpeed=1,o.state=e.GNASHER_DASH,o.isActive=!1,o.onComplete=new Phaser.Signal,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.activate=function(){this.isActive=!0},e.prototype.createPaperGrid=function(t,e,i){for(var n=0,o=0,a=[];o<e;){for(n=0;n<t;){var s=this.game.make.sprite(0,0,"intro_base","intro_newspaper");s.scale.set(125/s.width),s.anchor.set(.5),s.x=n,s.y=o,i.add(s),n+=s.width+5,this.paperRowHeight=s.height+5,a.push(s)}o+=this.paperRowHeight}return a},e.prototype.update=function(){var t=this;if(this.isActive&&this.state===e.GNASHER_DASH){this.gnasher.x+=this.game.time.elapsedMS*this.gnasherSpeed*this.gnasher.scale.x,this.gnasher.scale.x>0&&this.gnasher.x>this.costume.width+this.gnasher.width&&this.paper.length>0?(this.gnasher.scale.set(-1,1),this.gnasher.y+=this.paperRowHeight):this.gnasher.scale.x<0&&this.paper.length>0&&this.gnasher.x<this.gnasher.width&&(this.gnasher.scale.set(1,1),this.gnasher.y+=this.paperRowHeight);var i=this.gnasher.getBounds(),n=i.x+.5*i.width,o=i.y+.5*i.height;this.paper=this.paper.filter(function(e){if(!e.isExploded){var i=e.getBounds(),a=i.x+.5*i.width,s=i.y+.5*i.height;if(Phaser.Math.distance(n,o,a,s)<50)return t.explodePaper(e),!1}return!0}),(0===this.paper.length&&this.gnasher.x<this.gnasher.width||0===this.paper.length&&this.gnasher.x>this.costume.width+this.gnasher.width)&&this.raiseSausages()}},e.prototype.explodePaper=function(t){t.isExploded=!0,this.game.sounds.playSFX("GNASHER_GROWL"),t.loadTexture("intro_paper","intro_paperburst_back0001"),t.scale.set(1),t.animations.add("burst",Phaser.Animation.generateFrameNames("intro_paperburst_back",1,12,"",4)),t.animations.play("burst",24,!1);var e=this.game.make.sprite(0,0,"intro_paper","intro_paperburst_front0001");e.anchor.set(.5),e.x=t.x+.5*t.width,e.y=t.y+.5*t.height,e.angle=360*Math.random(),e.animations.add("burst",Phaser.Animation.generateFrameNames("intro_paperburst_front",1,20,"",4)),e.animations.play("burst",24,!1),this.content.add(e)},e.prototype.raiseSausages=function(){this.state=e.GNASHER_RAISE,this.game.add.tween(this.sausageMountain).to({y:100},1e3,"Linear",!0).onComplete.addOnce(this.playSparkle,this),this.game.sounds.playSFX(it)},e.prototype.playSparkle=function(){this.sparkle=this.game.make.sprite(),this.sparkle.loadTexture("intro_base","intro_sparkle0001"),this.sparkle.animations.add("burst",Phaser.Animation.generateFrameNames("intro_sparkle",1,25,"",4)),this.sparkle.anchor.set(.5),this.sparkle.x=.72*this.sausageMountain.width,this.sparkle.y=.15*this.sausageMountain.height,this.sausageMountain.addChild(this.sparkle),this.sparkle.animations.play("burst",24,!1),this.game.time.events.add(2e3,this.dispatchComplete,this).autoDestroy=!0},e.prototype.dispatchComplete=function(){this.onComplete.dispatch()},Jt(e,[{key:"height",get:function(){return this.costume.height}},{key:"width",get:function(){return this.costume.width}}]),e}(Phaser.Group),Zt=[{x:110.4,y:206.3,radius:212.55},{x:225.45,y:134.75,radius:212.55},{x:143.45,y:374.95,radius:259.3},{x:125.85,y:492.2,radius:231.95},{x:197.75,y:571.2,radius:186.2},{x:561.05,y:491,radius:177.55},{x:557.1,y:355,radius:200.05},{x:550.95,y:205.05,radius:192.75},{x:430.75,y:122.85,radius:200.05},{x:323.1,y:80.4,radius:146.25},{x:376.4,y:551.85,radius:306.55},{x:346.05,y:335.25,radius:438.8}];Qt.GNASHER_DASH="IntroThoughtBubble.GNASHER_DASH",Qt.GNASHER_RAISE="IntroThoughtBubble.GNASHER_RAISE";var $t=Qt;var te={ButchersVan:Xt,GnasherIntro:function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.onComplete=new Phaser.Signal,o.container=n.make.group(),o.game.add.existing(o.container),o.background=new J({game:n,type:J.STRIPED}),o.background.anchor.set(.5),o.background.position.set(n.defaultWidth/2,n.defaultHeight/2),o.container.add(o.background),o.introPaper=o.game.make.image(0,0,"intro_base","intro_newspaper"),o.introPaper.anchor.set(.5),o.introPaper.x=.5*o.game.defaultWidth-.05*o.game.width,o.introPaper.y=.5*o.game.defaultHeight,o.container.add(o.introPaper),o.introGnasher=o.game.make.image(0,0,"intro_gnasher","intro_gnasher"),o.introGnasher.anchor.set(.5,1),o.introGnasher.x=o.game.width/2,o.introGnasher.y=o.game.defaultHeight+o.introGnasher.height,o.container.add(o.introGnasher),o.introGnasherResponsive=!1,o.introThoughtBubbleResponsive=!1,o.btnSkip=new ht({game:o.game,id:"btn_play",skin:"btn_play",defaultScale:.5}),o.btnSkip.scale.set(.5),o.btnSkip.x=.85*o.game.defaultWidth,o.btnSkip.y=.85*o.game.defaultHeight,o.game.add.existing(o.btnSkip),o.game.scale.onSizeChange.add(o.positionContainer,o),o.positionContainer(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){this.game.time.events.add(5e3,this.playStateOne,this).autoDestroy=!0},e.prototype.positionContainer=function(){this.btnSkip.y=.9*this.game.height;var t=1.75*this.game.height/this.container.height;this.introPaper&&(this.introPaper.scale.set(Math.min(1,t)),this.introPaper.y=.5*this.game.height),this.introGnasherResponsive&&(this.introGnasher.y=this.game.height),this.introThoughtBubbleResponsive&&(this.thoughtBubble.scale.set(Math.min(1,t)),this.thoughtBubble.y=.5*this.game.height),this.container.x=this.game.width-this.game.defaultWidth,this.container.y=0},e.prototype.playStateOne=function(){var t=this;this.game.sounds.playSFX("GNASHERINTRO_PAPER_SLIDE"),this.game.add.tween(this.introPaper).to({y:this.introPaper.y-this.game.defaultHeight},500,"Linear",!0).onComplete.add(function(){t.introGnasherResponsive=!0},this),this.game.add.tween(this.introGnasher).to({y:this.game.height},500,"Linear",!0).onComplete.addOnce(this.playStateTwo,this)},e.prototype.playStateTwo=function(){this.introPaper.destroy(!0),this.lightbulb=this.game.make.image(0,0,"intro_base","intro_light_off"),this.lightbulb.anchor.set(.5,1),this.lightbulb.y=-(this.introGnasher.height+20),this.lightbulb.scale.set(0),this.introGnasher.addChild(this.lightbulb),this.game.add.tween(this.lightbulb.scale).to({x:1,y:1},200,"Linear",!0,200).onComplete.addOnce(this.playStateThree,this)},e.prototype.playStateThree=function(){this.game.sounds.playSFX("GNASHERINTRO_LIGHTBULB"),this.lightbulb.loadTexture("intro_base","intro_light_on"),this.thoughtBubble=new $t({game:this.game}),this.thoughtBubble.position.set(this.game.width/2,-this.game.defaultHeight),this.container.add(this.thoughtBubble),this.game.time.events.add(2e3,this.addThoughtBubble,this).autoDestroy=!0},e.prototype.addThoughtBubble=function(){var t=this;this.game.sounds.playSFX("GNASHERINTRO_PAPER_SLIDE"),this.game.add.tween(this.introGnasher).to({y:2*this.game.defaultHeight},500,"Linear",!0).onComplete.add(function(){t.introGnasherResponsive=!1,t.introThoughtBubbleResponsive=!0},this),this.game.add.tween(this.thoughtBubble).to({y:this.game.defaultHeight/2},500,"Linear",!0).onComplete.add(this.playStateFour,this)},e.prototype.playStateFour=function(){this.thoughtBubble.onComplete.addOnce(this.dispatchComplete,this),this.thoughtBubble.activate()},e.prototype.dispatchComplete=function(){this.onComplete.dispatch()},e.prototype.destroy=function(){this.game.scale.onSizeChange.remove(this.positionContainer,this),this.container.destroy(!0),this.container=null,t.prototype.destroy.call(this,!0)},e}(Phaser.Group)},ee=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){var e=t.id;this.id=e},e.prototype.preload=function(t){},e.prototype.create=function(t){this.cutscene=new te[this.id]({game:t}),this.cutscene.onComplete.addOnce(this.endCutScene,this),this.cutscene.btnSkip.onInputDown.add(this.endCutScene,this),this.cutscene.start()},e.prototype.positionContainer=function(){},e.prototype.start=function(){},e.prototype.update=function(t){},e.prototype.endCutScene=function(){this.cutscene.onComplete.remove(this.endCutScene,this),this.game.input.onDown.remove(this.endCutScene,this),this.game.controller.startLevel()},e.prototype.shutdown=function(t){this.game.input.onDown.remove(this.endCutScene,this,0,t.id)},e}(Phaser.State),ie=ee;ee.GNASHER_INTRO="GNASHER_INTRO",ee.BUTCHERS_VAN="BUTCHERS_VAN";var ne=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.timePrev=0,this.timeStep=0,this.timeStart=0,this.timeTotal=0,this.active=!1,this.game.onPause.add(this.handleGamePaused,this),this.game.onResume.add(this.handleGameResumed,this),this.reset()}return t.prototype.handleGamePaused=function(){this.active&&(this.timePaused=this.game.time.now)},t.prototype.handleGameResumed=function(){this.active&&(this.timePrev+=this.game.time.now-this.timePaused)},t.prototype.reset=function(){this.timePrev=this.game.time.now,this.timeStep=0,this.timeTotal=0,this.active=!1},t.prototype.start=function(){this.reset(),this.active=!0,this.timeStart=this.game.time.now},t.prototype.stop=function(){this.active=!1},t.prototype.update=function(){return!1===this.active?0:(this.timeStep=this.game.time.now-this.timePrev,this.timePrev=this.game.time.now,this.timeTotal+=this.timeStep,this.timeStep)},t.prototype.destroy=function(){this.game.onPause.remove(this.handleGamePaused,this),this.game.onResume.remove(this.handleGameResumed,this),this.game=null,this.timePrev=null,this.timeStep=null,this.timeStart=null,this.timeTotal=null,this.active=!1},t}(),oe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},ae=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var se=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.levelData=oe({},i),this.map=this.levelData.map,this.tileDictionary=this.createTileDictionary(),this.patrolRoutes=this.createPatrolRoutes(),this.exit=this.calculateTilePosition(t.LAYER_ID_DATA,t.EXIT_TILE),this.entrance=this.calculateTilePosition(t.LAYER_ID_DATA,t.ENTRANCE_TILE)}return t.prototype.createTileDictionary=function(){var t={};return this.map.tilesets.forEach(function(e){e.tiles&&Object.keys(e.tiles).forEach(function(i){var n=e.firstgid+parseInt(i),o=e.tiles[i],a=o.image.slice(o.image.lastIndexOf("/")+1).replace(".png","").replace(".jpg","");t[n]=a})}),t},t.prototype.getTileFrame=function(t){return this.tileDictionary[t]},t.prototype.calculateTilePosition=function(t,e){var i=this.getLayerByName(t);if(i){var n=i.data.findIndex(function(t){return t===e});return{x:n%this.map.width,y:Math.floor(n/this.map.width)}}return!1},t.prototype.calculateTilePositions=function(t,e){var i=this;return this.getLayerByName(t).data.reduce(function(t,n,o){return n===e&&t.push({x:o%i.map.width,y:Math.floor(o/i.map.width)}),t},[])},t.prototype.get2DBackgroundMapAsFrames=function(){var e=this;return this.getLayerAs2D(t.LAYER_ID_BACKGROUND).reduce(function(t,i,n){var o=i.reduce(function(t,i){var n=e.getTileFrame(i);return t.push(n||!1),t},[]);return t.push(o),t},[])},t.prototype.get2DFurnitureMapAsFrames=function(){var e=this;return this.getLayerAs2D(t.LAYER_ID_FURNITURE).reduce(function(t,i,n){var o=i.reduce(function(t,i){var n=e.getTileFrame(i);return t.push(n||!1),t},[]);return t.push(o),t},[])},t.prototype.getWalkable2D=function(){var e=this,i=[];return this.getLayerByName("data").data.forEach(function(n,o){switch(o%e.levelWidth==0&&i.push([]),n){case t.WALKABLE_TILE:case t.ENTRANCE_TILE:case t.EXIT_TILE:i[i.length-1].push(0);break;default:i[i.length-1].push(1)}}),i},t.prototype.getLayerAs2D=function(t){var e=this;return this.getLayerByName(t).data.reduce(function(t,i,n){return n%e.map.width==0&&t.push([]),t[t.length-1].push(i),t},[])},t.prototype.getLayerByName=function(t){return this.map.layers.find(function(e){return e.name===t})},t.prototype.createPatrolRoutes=function(){var e=this,i=this.getLayerByName(t.LAYER_ID_PATROL);if(i){var n=[];return i.objects.forEach(function(t){if(t.polyline){var i={npc:t.type,path:[]};t.polyline.forEach(function(n){i.path.push({x:Math.floor((n.x+t.x)/e.map.tilewidth),y:Math.floor((n.y+t.y)/e.map.tileheight)})}),n.push(i)}}),n}return!1},ae(t,[{key:"tilesize",get:function(){return this.map.tilewidth}},{key:"tilesizeHalfed",get:function(){return this.map.tilewidth/2}},{key:"entranceTile",get:function(){return this.entrance}},{key:"exitTile",get:function(){return this.exit}},{key:"spritesheet",get:function(){return this.levelData.spritesheet}},{key:"levelWidth",get:function(){return this.map.width}},{key:"levelHeight",get:function(){return this.map.height}},{key:"levelPixelWidth",get:function(){return this.map.width*this.map.tilewidth}},{key:"levelPixelHeight",get:function(){return this.map.height*this.map.tileheight}}]),t}();se.ENTRANCE_TILE=2,se.EXIT_TILE=3,se.WALKABLE_TILE=0,se.LAYER_ID_BACKGROUND="background",se.LAYER_ID_FURNITURE="furniture",se.LAYER_ID_DATA="data",se.LAYER_ID_PATROL="waypoints";var re=function(t){function e(i){var n=i.game,o=i.spritesheet,a=i.tiles,s=i.offset,r=i.decorations,h=i.minHeight,l=i.maxHeight,c=i.flipTile,u=void 0!==c&&c,p=i.anchor,d=void 0===p?{x:0,y:0}:p;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return f.spritesheet=o,f.decorations=r,f.tiles=a,f.offset=s||{x:0,y:0},f.minHeight=h,f.maxHeight=l,f.tilesActive=[],f.tilesPool=[],f.decorationPool=[],f.tileAnchor=d,f.flipTile=u,f.fillContent(f.maxHeight),f}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.fillContent=function(t){for(var e=t;e>0;){var i=this.generateTile();i.y=e+this.offset.y-i.height,i.x=this.offset.x,this.flipTile&&(i.scale.set(-1,1),i.x+=Math.abs(i.width)),this.tilesActive.push(i),this.addAt(i,0),e=i.y}},e.prototype.generateTile=function(){var t=this.tilesPool.shift()||this.game.make.image();if(this.randomlyDecorateSprite(t,this.tiles),t.anchor.set(this.tileAnchor.x,this.tileAnchor.y),this.decorations&&this.decorations.length>0&&Math.random()>.5){var e=this.decorationPool.shift()||this.game.make.image();this.randomlyDecorateSprite(e,this.decorations),e.y=Math.random()>.5?.25*t.height:.75*t.y,e.x=t.width*(-1*t.anchor.x),t.decoration=e,t.addChild(e)}return t},e.prototype.randomlyDecorateSprite=function(t,e){var i=e[Math.floor(Math.random()*e.length)];return t.loadTexture(this.spritesheet,i),t},e.prototype.updateScoll=function(t){var e=this,i=!1;this.tilesActive=this.tilesActive.reduce(function(n,o){return o.y+=t,o.y>e.maxHeight?e.clearTile(o):n.push(o),(!1===i||o.y<i)&&(i=o.y),n},[]),i&&this.fillContent(i)},e.prototype.clearTile=function(t){t.decoration&&(this.decorationPool.push(t.decoration),t.removeChild(t.decoration),t.decoration=!1),this.remove(t),this.tilesPool.push(t)},e}(Phaser.Group);var he=function(t){function e(i){var n=i.game,o=i.data,a=i.spritesheet;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return s.sfx="LIQUID"==o.type?ot:nt,s.loadTexture(a,o.frame),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getWorldBounds=function(){var t=this.getBounds();return t.width=.65*t.width,t.height=.65*t.height,t.x+=.225*t.width,t.y+=.225*t.height,t},e}(Phaser.Sprite),le=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var ce=function(t){function e(i){var n=i.game,o=i.type,a=i.followTarget;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));switch(s.type=o,s.followTarget=a,s.type){case e.GNASHER:s.defaultTexture="char_gnasher_wait",s.spritesheet="gnasher",s.costume=s.game.make.sprite(0,0,s.spritesheet,s.defaultTexture),s.costume.loadTexture("gnasher","char_gnasher_wait"),s.costume.animations.add("run",Phaser.Animation.generateFrameNames("char_gnasher_run",1,8,"",4)),s.costume.animations.add("wait",["char_gnasher_wait"]);break;case e.GNIPPER:s.defaultTexture="char_gnipper_wait",s.spritesheet="gnipper",s.costume=s.game.make.sprite(0,0,s.spritesheet,s.defaultTexture),s.costume.loadTexture("gnipper","char_gnipper_wait"),s.costume.animations.add("run",Phaser.Animation.generateFrameNames("char_gnipper_run",1,6,"",4)),s.costume.animations.add("wait",["char_gnipper_wait"]);break;case e.ROBOTDOG:s.defaultTexture="char_robotdog_wait",s.spritesheet="robotdog",s.costume=s.game.make.sprite(0,0,s.spritesheet,s.defaultTexture),s.costume.loadTexture("robotdog","char_robotdog_wait"),s.costume.animations.add("run",Phaser.Animation.generateFrameNames("char_robotdog_run",1,20,"",4)),s.costume.animations.add("wait",["char_robotdog_wait"]);break;case e.RUBI:s.defaultTexture="char_rubi_wait",s.spritesheet="rubi",s.costume=s.game.make.sprite(0,0,s.spritesheet,s.defaultTexture),s.costume.loadTexture("rubi","char_rubi_wait"),s.costume.animations.add("run",Phaser.Animation.generateFrameNames("char_rubi_run",1,22,"",4)),s.costume.animations.add("wait",["char_rubi_wait"])}return s.costume.anchor.set(.5,0),s.addChild(s.costume),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getWorldBounds=function(){var t=this.costume.getBounds();return this.state===e.STATE_RUN&&(t.width=.65*t.width,t.height=.65*t.height,t.x+=.225*t.width,t.y+=.225*t.height),t},e.prototype.updateFriend=function(t){var e=t.x-this.x,i=t.y+.5*t.height-this.y;this.x+=.15*e,this.y+=.18*i},e.prototype.updatePauseStatus=function(t){var e=t.paused;this.costume.animations&&(this.costume.animations.paused=e)},e.prototype.run=function(){this.state=e.STATE_RUN,this.costume.animations.play("run",24,!0)},e.prototype.wait=function(){this.state=e.STATE_WAIT,this.costume.loadTexture(this.spritesheet,this.defaultTexture)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0)},le(e,[{key:"height",get:function(){return this.costume.height}},{key:"width",get:function(){return this.costume.width}}]),e}(Phaser.Sprite),ue=ce;ce.GNASHER="GNASHER",ce.GNIPPER="GNIPPER",ce.ROBOTDOG="ROBOTDOG",ce.RUBI="RUBI",ce.STATE_RUN="STATE_RUN",ce.STATE_WAIT="STATE_WAIT";var pe=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var de=function(t){function e(i){var n=i.game,o=i.levelData;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return a.levelData=o,a.distTravelled=0,a.lastActiveRow=0,a.rowHeight=270,a.rowHeightHalfed=a.rowHeight/2,a.columnWidth=270,a.columnWidthHalfed=a.columnWidth/2,a.spawnOffset=2*a.rowHeight,a.rowsBetweenFriendSpawn=15,a.rowRequestedFriendSpawn=!1,a.road=new re({game:n,spritesheet:o.spritesheet,tiles:o.roadTiles,offset:0,minHeight:a.game.defaultHeight,maxHeight:1.5*a.game.defaultHeight}),a.road.x=134,a.add(a.road),a.lanes=[a.road.x+a.columnWidthHalfed,a.road.x+a.columnWidth+a.columnWidthHalfed,a.road.x+a.columnWidth+a.columnWidth+a.columnWidthHalfed],a.edgeLeft=new re({game:n,spritesheet:o.spritesheet,tiles:o.edgeLeft.tiles,decorations:o.edgeLeft.decorations,offset:o.edgeLeft.offset,anchor:o.edgeLeft.anchor,flipTile:o.edgeLeft.flip_x,minHeight:a.game.defaultHeight,maxHeight:1.5*a.game.defaultHeight}),a.add(a.edgeLeft),a.edgeRight=new re({game:n,spritesheet:o.spritesheet,tiles:o.edgeRight.tiles,decorations:o.edgeRight.decorations,offset:o.edgeRight.offset,anchor:o.edgeRight.anchor,flipTile:o.edgeRight.flip_x,minHeight:a.game.defaultHeight,maxHeight:1.5*a.game.defaultHeight}),a.edgeRight.x=946,a.add(a.edgeRight),a.levelMap=[],a.itemContainer=a.game.make.group(),a.itemContainer.x=a.road.x,a.itemContainer.y=-500,a.add(a.itemContainer),a.collectables=[],a.collectablePool=[],a.hazards=[],a.hazardPool=[],a.friendQueued=!1,a.friendActive=!1,a.generateMap(500),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getClosestLaneTo=function(t){return t<this.lanes[0]+this.columnWidthHalfed?0:t>this.lanes[2]-this.columnWidthHalfed?2:1},e.prototype.getLanePosition=function(t){return this.lanes[t-1]},e.prototype.queueFriendSpawn=function(t){this.friendActive||this.friendQueued||(this.friendQueued=t)},e.prototype.generateMap=function(t){for(var e=0,i=this.levelData.collectableChain,n=this.levelData.collectableSpacing,o=this.levelData.hazardSpacing,a=this.game.rnd.integerInRange(0,2);this.levelMap.length<t;){if(this.levelMap.push([0,0,0]),n<=0)if(i>0)i--,this.levelMap[e][a]=1;else if(i=this.levelData.collectableChain,n=this.levelData.collectableSpacing,this.levelData.collectableSpacing>2){var s=Math.random()>.5;switch(a){case 0:a=!0===s?1:2;break;case 1:a=!0===s?0:2;break;case 2:a=!0===s?0:1}}else 0===a?a++:2===a?a--:a=Math.random()>.5?0:2;else n--;if(e>=o){var r=[0,1,2];r.splice(a,1);var h=r[Math.floor(Math.random()*r.length)];o=e+this.levelData.hazardSpacing,this.levelMap[e][h]=2}e++}},e.prototype.checkRowSpawn=function(){var t=this,e=Math.floor(this.distTravelled/this.rowHeight);if(e!=this.lastActiveRow)for(var i=function(){t.lastActiveRow++;var e=[];t.levelMap[t.lastActiveRow%t.levelMap.length].forEach(function(i,n){switch(i){case 1:t.spawnCollectable(n,t.lastActiveRow);break;case 2:t.spawnHazard(n,t.lastActiveRow);break;default:t.friendQueued&&!1===t.friendActive&&e.push(n)}}),t.friendQueued&&!1===t.friendActive&&t.spawnFriend(e)};this.lastActiveRow<e;)i()},e.prototype.spawnFriend=function(t){this.friendActive=new ue({game:this.game,type:this.friendQueued}),this.friendActive.isMap=!0;var e=t[Math.floor(Math.random()*t.length)];this.friendActive.x=this.lanes[e]-this.friendActive.width/2,this.friendActive.y=-this.spawnOffset+this.rowHeightHalfed,this.friendActive.markedForClearance=!1,this.itemContainer.add(this.friendActive),this.itemContainer.sort("y",Phaser.Group.SORT_ASCENDING)},e.prototype.collectFriend=function(){this.friendActive.destroy(!0),this.friendActive=!1,this.friendQueued=!1},e.prototype.dropTutorialCollectable=function(t){var e=this.spawnCollectable(t-1,200);return e.arrowLeft=this.game.make.image(0,0,"instructions","instruction_arrow_right"),e.arrowLeft.anchor.set(1,.5),e.arrowLeft.x=-e.width,e.addChild(e.arrowLeft),e.arrowRight=this.game.make.image(0,0,"instructions","instruction_arrow_left"),e.arrowRight.anchor.set(0,.5),e.arrowRight.x=e.width,e.addChild(e.arrowRight),e.isTutorial=!0,e},e.prototype.spawnCollectable=function(t,e){var i=this.collectablePool.shift();return i||(i=new bt({game:this.game,type:this.levelData.collectType})).anchor.set(.5),i.setRandomCostume(),i.markedForClearance=!1,i.x=this.columnWidth*t+this.columnWidthHalfed,i.y=-this.spawnOffset+this.rowHeightHalfed,this.collectables.push(i),this.itemContainer.add(i),this.itemContainer.sort("y",Phaser.Group.SORT_ASCENDING),i},e.prototype.spawnHazard=function(t,e){var i=this.levelData.randomHazard,n=this.hazardPool.shift()||new he({game:this.game,spritesheet:this.levelData.spritesheet,data:i});n.markedForClearance=!1,this.addWorldItem(n,t,e,this.itemContainer),this.hazards.push(n)},e.prototype.addWorldItem=function(t,e,i,n){t.x=this.columnWidth*e+this.columnWidthHalfed,t.y=-this.spawnOffset+this.rowHeightHalfed,t.anchor.set(.5),n.add(t),this.itemContainer.sort("y",Phaser.Group.SORT_ASCENDING)},e.prototype.clearCollectables=function(t){t.forEach(function(t){t.markedForClearance=!0})},e.prototype.clearHazards=function(t){t.forEach(function(t){t.markedForClearance=!0})},e.prototype.poolCollectable=function(t){t.destroy()},e.prototype.poolHazard=function(t){t.destroy()},e.prototype.updateMap=function(t,e){this.distTravelled+=t,this.edgeLeft.updateScoll(t),this.edgeRight.updateScoll(t),this.road.updateScoll(t),this.friendActive&&(this.friendActive.y+=t,this.friendActive.y>4*this.game.defaultHeight&&(this.friendActive.destroy(!0),this.friendActive=!1)),this.updateCollectables(t),this.updateHazards(t),e||this.checkRowSpawn()},e.prototype.updateCollectables=function(t){var e=this;this.collectables=this.collectables.filter(function(i){return i.y+=t,!(i.markedForClearance||i.y>2*e.game.defaultHeight)||(i.isTutorial?(i.y=-200,!0):(e.poolCollectable(i),!1))})},e.prototype.updateHazards=function(t){var e=this;this.hazards=this.hazards.filter(function(i){return i.y+=t,!(i.markedForClearance||i.y>2*e.game.defaultHeight)||(e.poolHazard(i),!1)})},e.prototype.checkForCollisions=function(t){return{isHitHazard:!1}},pe(e,[{key:"edgeBuffer",get:function(){return this.road.x}},{key:"canTakeFriend",get:function(){return!1===this.friendActive&&!1===this.friendQueued}}]),e}(Phaser.Group);var fe=function(){function t(e){var i=e.game,n=e.debug;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=i,n&&(this.debugger=this.game.make.graphics())}return t.prototype.clearDebugger=function(){this.debugger&&this.debugger.clear()},t.prototype.checkGroupCollisons=function(t,e){var i=this,n=t.getWorldBounds();this.renderBounds(n,!1);var o=[];return e.forEach(function(t){if(!1===t.markedForClearance){var e=t.getWorldBounds();n.intersects(e)?(i.renderBounds(e,!0),o.push(t)):i.renderBounds(e,!1)}}),o},t.prototype.renderBounds=function(t,e){this.debugger&&(this.debugger.lineStyle(3,e?16711680:16776960),this.debugger.beginFill(e?16711680:16776960,.25),this.debugger.drawRect(t.x,t.y,t.width,t.height))},t}(),ge=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var me=function(t){function e(i){var n=i.game,o=i.moveSpeed,a=void 0===o?1e3:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return s.speedMax=a,s.speedCurr=0,s.speedAcceleration=.5,s.costume=s.game.make.sprite(0,0,"dennis","char_dennis_run0001"),s.costume.anchor.set(.5,0),s.costume.animations.add("run",Phaser.Animation.generateFrameNames("char_dennis_run",1,13,"",4)),s.costume.animations.add("stumble",Phaser.Animation.generateFrameNames("char_dennis_stumble",1,13,"",4)),s.targetX=s.x,s.targetY=s.y,s.invisibility=0,s.addChild(s.costume),s.run(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getWorldBounds=function(){var t=this.costume.getBounds(),e=t.height/2;return t.x+=.2*t.width,t.width=.6*t.width,t.y+=e,t.height-=e,t},e.prototype.updatePauseStatus=function(t){var e=t.paused;this.costume.animations.paused=e},e.prototype.setTargetX=function(t){this.targetX=t},e.prototype.setTargetY=function(t){this.targetY=t},e.prototype.update=function(){var t=this.speedAcceleration*this.game.time.elapsedMS;if(this.speedCurr=Math.min(this.speedMax,this.speedCurr+t),this.x!=this.targetX){var e=this.speed/2*this.game.time.elapsedMS,i=this.x-this.targetX;e<Math.abs(i)?this.x-=e*Math.sign(i):this.x=this.targetX}if(this.y!=this.targetY){var n=this.speed/2*this.game.time.elapsedMS,o=this.y-this.targetY;n<Math.abs(o)?this.y-=n*Math.sign(o):this.y=this.targetY}this.invisibility>0?(this.invisibility-=this.game.time.elapsedMS,this.costume.alpha=(Math.sin(.02*this.invisibility)+1)/2):this.costume.alpha=1},e.prototype.run=function(){this.costume.animations.play("run",24,!0)},e.prototype.stumble=function(){this.invisibility<=0&&(this.speedCurr=0,this.invisibility=5e3,this.costume.animations.play("stumble",24),this.costume.animations.currentAnim.onComplete.add(this.endStumble,this))},e.prototype.endStumble=function(){this.costume.animations.currentAnim.onComplete.remove(this.endStumble,this),this.run()},e.prototype.destroy=function(){this.costume.destroy(!0),this.costume=null,t.prototype.destroy.call(this,!0)},ge(e,[{key:"isInvincible",get:function(){return this.invisibility>0}},{key:"speed",get:function(){return this.speedCurr/1e3}},{key:"height",get:function(){return this.costume.height}},{key:"width",get:function(){return this.costume.width}}]),e}(Phaser.Sprite);var ye=function(t){function e(i){var n=i.game,o=i.width,a=i.height,s=i.debug,r=void 0!==s&&s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return h.inputEnabled=!0,h.hitArea=new Phaser.Rectangle(0,0,o||h.game.defaultWidth,a||h.game.defaultHeight),h.tapsRegistered=0,h.onTap=new Phaser.Signal,r&&(h.debugGraphic=h.game.make.graphics(),h.debugGraphic.beginFill(16711680,.25),h.debugGraphic.drawRect(0,0,h.hitArea.width,h.hitArea.height),h.addChild(h.debugGraphic)),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.reset=function(){this.tapsRegistered=0},e.prototype.activate=function(){this.events.onInputDown.add(this.handleTap,this)},e.prototype.deactivate=function(){this.events.onInputDown.remove(this.handleTap,this)},e.prototype.handleTap=function(t,e){this.tapsRegistered++;var i=this.game.input.activePointer.x,n=this.game.input.activePointer.y;this.onTap.dispatch({taps_registered:this.tapsRegistered,x:i,y:n})},e.prototype.destroy=function(){this.deactivate(),t.prototype.destroy.call(this,!0)},e}(Phaser.Sprite);var be=function(t){function e(i){var n=i.game,o=i.costume;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return a.lifespan=250,a.duration=0,a.speed=.5,a.costume=a.game.make.sprite(0,0),a.costume.loadTexture("level_assets_shared",o),a.costume.anchor.set(.5),a.addChild(a.costume),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.duration+=this.game.time.elapsedMS,this.alpha=1-this.duration/this.lifespan,this.scale.set(.5+this.duration/this.lifespan),this.duration>=this.lifespan&&this.destroy(!0)},e}(Phaser.Sprite);var ve=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.loadTexture("instructions","finger_tap_icon"),o.duration=0,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.duration+=this.game.time.elapsedMS;var t=Math.sin(.01*this.duration)+1;this.alpha=t/2},e}(Phaser.Sprite);var we=function(t){function e(i){var n=i.game,o=i.dir,a=void 0===o?1:o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));switch(a){case 1:s.loadTexture("instructions","instruction_arrow_right");break;case-1:s.loadTexture("instructions","instruction_arrow_left");break;default:n.log("WARNING","invalid direction passed to instruction arrow")}return s.duration=0,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.duration+=this.game.time.elapsedMS;var t=Math.sin(.01*this.duration)+1;this.alpha=t/2},e}(Phaser.Sprite),_e=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Ce=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.background=new q({game:n,colour:"#000000",alpha:.5}),o.add(o.background),o.container=o.game.make.group(),o.add(o.container),o.panel=o.game.make.image(0,0,"ui","panel_generic"),o.container.add(o.panel),o.count=tt(o.game,k,350,M),o.count.y=50,o.count.x=o.panel.width/2,o.count.text=3,o.container.add(o.count),o.panel.height=o.count.y+500,o.game.scale.onSizeChange.add(o.handleScreenResize,o),o.fixedToCamera=!0,o.handleScreenResize(),o.duration=0,o.onComplete=new Phaser.Signal,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleScreenResize=function(){this.container.x=.5*this.game.width-.5*this.width,this.container.y=.5*this.game.height-.5*this.height},e.prototype.update=function(){this.count.x=.5*this.panel.width-.5*this.count.width,this.duration<3e3?(this.duration+=this.game.time.elapsedMS,this.count.text=3-Math.floor(this.duration/1e3)):this.dispatchedComplete||(this.count.text=0,this.dispatchedComplete=!0,this.onComplete.dispatch())},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0)},_e(e,[{key:"height",get:function(){return this.panel.height+this.panel.y}},{key:"width",get:function(){return this.panel.width}}]),e}(Phaser.Group);var Se=function(t){function e(i){var n=i.game,o=i.mapController,a=i.dennis;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return s.state=e.STATE_IDLE,s.mapController=o,s.dennis=a,s.onComplete=new Phaser.Signal,s.active=!0,s.control=s.game.make.image(0,0,""),s.device=Phaser.Device.desktop?"GameTutorialController.DEVICE_DESKTOP":"GameTutorialController.DEVICE_TOUCH",s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.nextStep=function(){switch(this.state){case e.STATE_IDLE:this.showSwitchLaneOne()}},e.prototype.showSwitchLaneOne=function(){this.state=e.STATE_CONTROLS_ONE;var t=this.mapController.getLanePosition(1);switch(this.device){case e.DEVICE_DESKTOP:this.instructionMovement=new we({game:this.game,dir:-1}),this.instructionMovement.scale.set(1);break;case e.DEVICE_TOUCH:this.instructionMovement=new ve({game:this.game}),this.instructionMovement.scale.set(.8)}this.instructionMovement.x=t-this.instructionMovement.width/2,this.instructionMovement.y=this.game.defaultHeight-this.instructionMovement.height,this.mapController.add(this.instructionMovement)},e.prototype.showSwitchLaneTwo=function(){switch(this.state=e.STATE_CONTROLS_TWO,this.device){case e.DEVICE_DESKTOP:this.instructionMovement.destroy(),this.instructionMovement=new we({game:this.game,dir:1}),this.mapController.add(this.instructionMovement)}var t=this.mapController.getLanePosition(2);this.instructionMovement.x=t-this.instructionMovement.width/2,this.instructionMovement.y=this.game.defaultHeight-this.instructionMovement.height},e.prototype.showCollectPaper=function(){this.state=e.STATE_COLLECT,this.instructionMovement.visible=!1;this.mapController.dropTutorialCollectable(2)},e.prototype.handleCollectedPaper=function(){this.countdown=new Ce({game:this.game}),this.countdown.onComplete.add(this.dispatchComplete,this),this.game.add.existing(this.countdown)},e.prototype.dispatchComplete=function(){this.active=!1,this.countdown.onComplete.remove(this.dispatchComplete,this),this.onComplete.dispatch()},e.prototype.update=function(){switch(this.state){case e.STATE_CONTROLS_ONE:Math.abs(this.dennis.x-this.mapController.getLanePosition(1))<20&&this.showSwitchLaneTwo();break;case e.STATE_CONTROLS_TWO:Math.abs(this.dennis.x-this.mapController.getLanePosition(2))<20&&(console.log("COLLECT PAPER"),this.showCollectPaper())}},e.prototype.destroy=function(){this.countdown.destroy(),t.prototype.destroy.call(this,!0)},e}(Phaser.Group),Te=Se;Se.STATE_IDLE="GameTutorialController.STATE_IDLE",Se.STATE_CONTROLS_ONE="GameTutorialController.STATE_CONTROLS_ONE",Se.STATE_CONTROLS_TWO="GameTutorialController.STATE_CONTROLS_TWO",Se.STATE_COLLECT="GameTutorialController.STATE_COLLECT",Se.STATE_AVOID="GameTutorialController.STATE_AVOID",Se.DEVICE_DESKTOP="GameTutorialController.DEVICE_DESKTOP",Se.DEVICE_TOUCH="GameTutorialController.DEVICE_TOUCH";var xe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){var e=t.levelData,i=t.showTutorial,n=t.playerLevel;this.levelData=e,this.showTutorial=i,this.playerLevel=n,this.game.log("Start Level","level : "+this.playerLevel,"show tutorial : "+this.showTutorial,this.levelData)},e.prototype.create=function(t){var e=this;this.game.hud.showGamePlayHud(this.levelData),this.gameScale=720/1080,this.gameContainer=t.make.group(),this.gameContainer.scale.set(this.gameScale),this.game.add.existing(this.gameContainer),this.playerScore=0,this.timeLimit=1e3*this.levelData.timeLimit,this.game.controller.uiModel.onPauseIsChanged.add(this.updatePauseStatus,this),this.isPaused=!1,this.gameTime=new ne(this.game),this.gameTime.start(),this.game.windowEventController.handleWindowResize(),this.game.scale.onSizeChange.add(this.positionContainer,this),this.positionContainer(),this.mapController=new de({game:t,levelData:this.levelData}),this.gameContainer.add(this.mapController),this.collisionController=new fe({game:t,debug:this.game.controller.config.debugCollisions}),this.collisionController.debugger&&this.game.add.existing(this.collisionController.debugger),this.currentLane=1,this.dennis=new me({game:t,moveSpeed:this.levelData.dennisMoveSpeed}),this.dennis.x=this.mapController.lanes[this.currentLane],this.dennis.y=this.game.defaultHeight/this.gameScale+300,this.dennis.setTargetX(this.dennis.x),this.gameContainer.add(this.dennis),this.dennis.run(),this.friends=[],this.levelData.availableFriends.forEach(function(t){e.addFriend(t)}),this.setDennisTargetY(),this.friendsAvailable=[],this.lanes=3,this.laneWidth=270,this.laneOffset=this.laneWidth/2,this.tapArea=new ye({game:t,width:this.game.defaultWidth,height:this.game.defaultHeight,debug:!1}),this.tapArea.onTap.add(this.handleUserInput,this),this.game.add.existing(this.tapArea),this.keyLeft=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.keyLeft.onDown.add(this.moveCharacterLeft,this),this.keyLeft=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.keyLeft.onDown.add(this.moveCharacterRight,this),this.tutorialMode=this.showTutorial,this.showTutorial&&(this.tutorialMode=!0,this.game.track("TUTORIAL_STARTED"),this.tutorialController=new Te({game:t,mapController:this.mapController,dennis:this.dennis}),this.tutorialController.onComplete.add(this.handleTutorialComplete,this)),this.levelData.introMessage?this.game.hud.showGameIntroMessage(this.levelData.introMessage,this.handleIntroMessageClosed,this):this.handleIntroMessageClosed()},e.prototype.createPlaceholderButtons=function(){this.buttonContainer=this.game.make.group(),this.btnEndLevel=new ht({game:this.game,id:"btn_endlevel",skin:"btn_endlevel"}),this.btnEndLevel.x=this.game.width/2,this.btnEndLevel.y=.25*this.game.height,this.btnEndLevel.onInputDown.add(this.handleEndLevel,this),this.buttonContainer.addChild(this.btnEndLevel),this.btnFailLevel=new ht({game:this.game,id:"btn_faillevel",skin:"btn_faillevel"}),this.btnFailLevel.x=this.game.width/2,this.btnFailLevel.y=this.btnEndLevel.y+this.btnEndLevel.height+20,this.btnFailLevel.onInputDown.add(this.handleFailLevel,this),this.buttonContainer.addChild(this.btnFailLevel),this.buttonContainer.fixedToCamera=!0,this.game.add.existing(this.buttonContainer)},e.prototype.handleEndLevel=function(){this.buttonContainer.destroy(!0),this.winLevel()},e.prototype.handleFailLevel=function(){this.buttonContainer.destroy(!0),this.failLevel()},e.prototype.handleUserInput=function(){this.currentLane=this.mapController.getClosestLaneTo(this.game.input.activePointer.x/this.gameScale),this.dennis.setTargetX(this.mapController.lanes[this.currentLane])},e.prototype.moveCharacterLeft=function(){this.currentLane=Math.max(0,this.currentLane-1),this.dennis.setTargetX(this.mapController.lanes[this.currentLane])},e.prototype.moveCharacterRight=function(){this.currentLane=Math.min(2,this.currentLane+1),this.dennis.setTargetX(this.mapController.lanes[this.currentLane])},e.prototype.handleIntroPopupClosed=function(){this.game.controller.setTutorialIsComplete(),this.startGame()},e.prototype.handleIntroMessageClosed=function(){switch(this.game.controller.setTutorialIsComplete(),this.startGame(),this.playerLevel){case 2:this.game.sounds.playSFX("LEVEL_2_START");break;case 3:case 4:this.game.sounds.playSFX("LEVEL_3-4_START");break;case 5:this.game.sounds.playSFX("LEVEL_5_START")}},e.prototype.handleIntroComplete=function(){this.startGame()},e.prototype.handleTutorialComplete=function(){this.game.controller.setTutorialIsComplete(),this.game.track("TUTORIAL_COMPLETE"),this.tutorialController.destroy(!0),this.mapController.distTravelled=0,this.tutorialMode=!1,this.gameTime.start(),this.levelData.introAudio&&this.game.sounds.playSFX(this.levelData.introAudio)},e.prototype.startGame=function(){this.gameActive=!0,this.tapArea.activate(),this.gameTime.start(),this.tutorialController?this.tutorialController.nextStep():this.levelData.introAudio&&this.game.sounds.playSFX(this.levelData.introAudio)},e.prototype.positionContainer=function(){this.gameContainer.y=this.game.height-this.game.defaultHeight},e.prototype.update=function(){var t=this;if(!this.isPaused&&this.gameActive){this.gameTime.update();var e=this.gameTime.timeStep*this.dennis.speed;this.mapController.updateMap(e,this.tutorialMode),this.collisionController.clearDebugger(),this.updateDennis(),this.friends.forEach(function(e,i){t.updateFriend(e,0===i?t.dennis:t.friends[i-1])}),this.updateFriendSpawn(),!1===this.tutorialMode&&this.game.hud.updateGamePlayHud(Math.max(0,this.timeLimit-this.gameTime.timeTotal),this.playerScore),!1===this.tutorialMode&&this.timeLimit<this.gameTime.timeTotal&&this.endLevel()}},e.prototype.updateDennis=function(){if(this.checkCollectableCollisions(this.dennis),!1===this.game.controller.config.invincible_mode&&!1===this.dennis.isInvincible){var t=this.collisionController.checkGroupCollisons(this.dennis,this.mapController.hazards);t.length>0&&this.handleHitHazard(t[0])}},e.prototype.updateFriend=function(t,e){if(t.updateFriend(e),this.checkCollectableCollisions(t),this.dennis.isInvincible)t.costume.alpha=this.dennis.costume.alpha;else if(t.costume.alpha=1,!1===this.game.controller.config.invincible_mode){var i=this.collisionController.checkGroupCollisons(t,this.mapController.hazards);i.length>0&&this.handleHitHazard(i[0])}},e.prototype.updateFriendSpawn=function(){if(this.friendsAvailable.length>0&&this.mapController.canTakeFriend)this.mapController.queueFriendSpawn(this.friendsAvailable.shift());else if(this.mapController.friendActive){this.collisionController.checkGroupCollisons(this.dennis,[this.mapController.friendActive]).length>0&&(this.game.sounds.playSFX("FRIEND_COLLECTED"),this.addFriend(this.mapController.friendQueued),this.mapController.collectFriend(),this.game.sounds.playSFX("BONUS_STARS"),this.addStarBurst(this.dennis.x,this.dennis.y))}},e.prototype.addFriend=function(t){var e=new ue({game:this.game,type:t});e.run();var i=this.friends.length>0?this.friends[this.friends.length-1]:this.dennis;e.x=i.x,e.y=i.y+i.height,this.friends.push(e),this.gameContainer.add(e),this.setDennisTargetY()},e.prototype.addStarBurst=function(t,e){var i=new At({game:this.game});i.scale.set(2),i.position.set(t,e),this.mapController.add(i)},e.prototype.removeLastFriend=function(){if(this.friends.length>0){var t=this.friends.length-1,e=this.friends[t];this.friendsAvailable.push(e.type),e.destroy(!0),this.friends.splice(t,1),this.setDennisTargetY()}},e.prototype.setDennisTargetY=function(){var t=this.game.defaultHeight/this.gameScale-50,e=this.friends.reduce(function(t,e){return t+.5*e.costume.height},0);this.dennis.setTargetY(t-this.dennis.height-e)},e.prototype.checkCollectableCollisions=function(t){var e=this.collisionController.checkGroupCollisons(t,this.mapController.collectables);if(e.length>0){this.game.sounds.playSFX(e[0].soundFX,{volume:.25}),this.tutorialMode?this.tutorialController.handleCollectedPaper():(this.playerScore+=e.length,this.playerScore===this.levelData.collectTarget&&this.game.sounds.playSFX("LEVEL_TARGET_MET"));var i=new be({game:this.game,costume:e[0].chosenCostume});i.x=this.dennis.x,i.y=this.dennis.y+this.dennis.height/2,this.gameContainer.add(i),this.mapController.clearCollectables(e)}},e.prototype.handleHitHazard=function(t){this.game.sounds.playSFX(t.sfx,{volume:.5}),this.removeLastFriend(),this.dennis.stumble()},e.prototype.updatePauseStatus=function(t){var e=t.paused;this.isPaused=e,this.isPaused?this.gameTime.handleGamePaused():this.gameTime.handleGameResumed(),this.dennis.updatePauseStatus({paused:e})},e.prototype.winLevel=function(){this.endLevel({score:0,isWin:!0})},e.prototype.failLevel=function(){this.endLevel({score:0,isWin:!1})},e.prototype.endLevel=function(){this.gameActive=!1,this.dennis.visible=!1;this.game.controller.gameModel.getGameIsComplete();this.game.controller.endLevel({score:this.playerScore,isWin:this.playerScore>=this.levelData.collectTarget,friendsRemaining:this.friends.reduce(function(t,e){return[].concat(t,[e.type])},[])})},e.prototype.shutdown=function(t){this.game.scale.onSizeChange.remove(this.positionContainer,this),this.game.hud.hideGamePlayHud(),this.gameContainer.destroy(!0),this.gameTime.destroy(),this.friendController=null,this.npcController=null,this.friendIntro=null,this.gameActive=!1,this.background=null,this.gameContainer=null,this.gameTime=null},e}(Phaser.State);var Ee=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){var e=t.character;this.character=e},e.prototype.create=function(t){switch(this.container=t.make.group(),this.background=new J({game:t}),this.background.anchor.set(.5),this.background.position.set(t.defaultWidth/2,t.defaultHeight/2),this.container.add(this.background),this.characterCard=this.game.make.image(),this.characterCard.anchor.set(.5),this.characterCard.position.set(t.defaultWidth/2,t.defaultHeight/2),this.character){case"GNASHER":this.characterCard.loadTexture("titles","title_joined_gnasher");break;case"GNIPPER":this.characterCard.loadTexture("titles","title_joined_gnipper");break;case"ROBOTDOG":this.characterCard.loadTexture("titles","title_joined_robotdog");break;case"RUBI":this.characterCard.loadTexture("titles","title_joined_rubi")}this.container.add(this.characterCard),this.game.add.existing(this.container),this.birthTime=this.game.time.now,this.flagged=!1,this.tapArea=new ye({game:t,width:this.game.defaultWidth,height:this.game.defaultHeight,debug:!1}),this.tapArea.onTap.add(this.handleUserInput,this),this.tapArea.activate(),this.container.add(this.tapArea)},e.prototype.update=function(t){!1===this.flagged&&this.game.time.now-this.birthTime>5e3&&(this.flagged=!0,this.game.controller.startLevel())},e.prototype.handleUserInput=function(){!1===this.flagged&&(this.flagged=!0,this.game.controller.startLevel())},e.prototype.shutDown=function(){this.tapArea.onTap.remove(this.handleUserInput,this),this.tapArea.destroy(!0),this.characterCard.destroy(!0),this.background.destroy(!0),this.container.destroy(!0),this.flagged=null,this.birthTime=null,this.background=null,this.characterCard=null,this.container=null,this.tapArea=null},e}(Phaser.State);var ke=function(t){function e(i){var n=i.game,o=i.s1,a=void 0===o?42:o,s=i.s2,r=void 0===s?32:s,h=i.stroke,l=void 0===h?9:h,c=i.shadow,u=void 0===c?3:c,p=i.pad,d=void 0===p?15:p;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var f=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n)),g=A,m=k;f.factor=r/a,f.pad=d*(a/r),l*=a/r,u*=a/r;var y={boundsAlignV:"top",boundsAlignH:"left"};return f.minutesDisplay=tt(f.game,m,a,g,0,0,y),f.minutesDisplay.stroke=P,f.minutesDisplay.strokeThickness=l,f.minutesDisplay.setShadow(u,u,P,0),y={boundsAlignV:"top",boundsAlignH:"right"},f.secondsDisplay=tt(f.game,m,r,g,0,0,y),f.secondsDisplay.stroke=P,f.secondsDisplay.strokeThickness=l,f.secondsDisplay.setShadow(u,u,P,0),f.add(f.minutesDisplay),f.add(f.secondsDisplay),f.visible=!1,f.game.time.events.add(1,f.init,f),f.setTime(0),f}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(){var t=this.minutesDisplay.width+this.secondsDisplay.width+this.pad,e=this.minutesDisplay.height;this.minutesDisplay.setTextBounds(0,0,t,e),this.secondsDisplay.setTextBounds(0,0,t,e),this.secondsDisplay.y=(this.minutesDisplay.height-this.secondsDisplay.height)*this.factor,this.visible=!0},e.prototype.setTime=function(t){var e=Math.floor(t/1e3)%60,i=Math.floor(t/6e4)%60;this.render(i,e)},e.prototype.render=function(t,e){this.minutesDisplay.padding.x=2,this.secondsDisplay.padding.x=2,this.minutesDisplay.text=Q(t,2),this.secondsDisplay.text=Q(e,2)},e.prototype.destroy=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];arguments[1];this.minutesDisplay=null,this.secondsDisplay=null,t.prototype.destroy.call(this,e)},e}(Phaser.Group);var Oe=function(t){function e(i){var n=i.game,o=i.showYourTime,a=void 0===o||o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return s.timerbg=n.make.image(0,0,"levelend","timerbg"),s.timerbg.anchor.set(0),s.timerbg.position.set(0,0),s.add(s.timerbg),s.currentTime=new ke({game:s.game,s1:80,s2:53}),s.bestTime=new ke({game:s.game,s1:54,s2:40}),s.add(s.currentTime),s.add(s.bestTime),s.currentTime.position.set(s.timerbg.x+84,s.timerbg.y-10),s.currentTime.angle=-4,s.bestTime.position.set(s.timerbg.x+170,s.timerbg.y+86),s.bestTime.angle=-2,a&&(s.yourTimeText=tt(s.game,O,40,D,0,0,{}),s.yourTimeText.position.set(6,-34),s.yourTimeText.angle=-2,s.add(s.yourTimeText),s.yourTimeText.text=s.game.copy.getCopy("results_your_time")),s.minsText=tt(s.game,O,40,D,0,0,{}),s.minsText.position.set(342,28),s.minsText.angle=-2,s.add(s.minsText),s.minsText.text=s.game.copy.getCopy("results_mins"),s.bestText=tt(s.game,O,32,D,0,0,{}),s.bestText.position.set(98,118),s.bestText.angle=-2,s.add(s.bestText),s.bestText.text=s.game.copy.getCopy("results_best"),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setResults=function(t){this.currentTime.setTime(t.current),this.bestTime.setTime(t.best)},e.prototype.destroy=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];arguments[1];this.currentTime&&this.currentTime.destroy(!0),this.bestTime&&this.bestTime.destroy(!0),this.timerbg=null,this.currentTime=null,this.bestTime=null,this.yourTimeText=null,this.minsText=null,this.bestText=null,t.prototype.destroy.call(this,e)},e}(Phaser.Group);var Ae=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){},e.prototype.preload=function(t){},e.prototype.create=function(t){this.game.track("VIEW_SCREEN_LEVEL_"+t.controller.gameModel.getCurrentLevel()+"_COMPLETE"),this.container=t.make.group();var e=t.controller.gameModel.getCurrentLevelID();this.background=new J({game:t}),this.background.anchor.set(.5),this.background.position.set(t.defaultWidth/2,t.defaultHeight/2),this.container.add(this.background),this.mapzoom=t.make.image(0,0,"levelend",e+"/mapzoom"),this.mapzoom.anchor.set(1,0),this.mapzoom.position.set(.932*t.defaultWidth,.05*t.defaultHeight),this.container.add(this.mapzoom),this.title=t.make.image(0,0,"levelend",e+"/title"),this.title.anchor.set(0,0),this.title.position.set(.175*t.defaultWidth,.114*t.defaultHeight),this.container.add(this.title),this.results=new Oe({game:this.game}),this.container.add(this.results),this.results.position.set(.195*t.defaultWidth,.443*t.defaultHeight),t.windowEventController.handleWindowResize(),t.scale.onSizeChange.add(this.positionContainer,this),this.positionContainer(),this.start(t)},e.prototype.positionContainer=function(){var t=.5*(this.game.width-this.game.defaultWidth),e=.5*(this.game.height-this.game.defaultHeight);this.background.scale.set(1),this.container.position.set(t,e)},e.prototype.start=function(t){var e=this.game.controller.gameModel.getCurrentLevelTimeResults();this.results.setResults(e)},e.prototype.update=function(t){},e.prototype.end=function(){this.game.controller.startLevel()},e.prototype.shutdown=function(t){t.scale.onSizeChange.remove(this.positionContainer,this),this.background.destroy(!0),this.container.destroy(!0),this.results.destroy(!0),this.background=null,this.container=null,this.results=null},e}(Phaser.State);var Pe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){},e.prototype.preload=function(t){},e.prototype.create=function(t){this.container=t.make.group();var e=t.controller.gameModel.getCurrentLevelID();this.game.track("VIEW_SCREEN_GAME_COMPLETE"),this.background=new J({game:t}),this.background.anchor.set(.5),this.background.position.set(t.defaultWidth/2,t.defaultHeight/2),this.container.add(this.background),this.road=t.make.image(0,0,"ui","road"),this.road.anchor.set(.5,1),this.road.position.set(.5*t.defaultWidth,t.defaultHeight),this.container.add(this.road),this.bg_scene=new J({game:t,type:J.GAMEEND}),this.bg_scene.anchor.set(.5,0),this.bg_scene.position.set(t.defaultWidth/2,0),this.container.add(this.bg_scene),this.title=t.make.image(0,0,"levelend",e+"/title"),this.title.anchor.set(.5,0),this.title.position.set(.5*t.defaultWidth,.093*t.defaultHeight),this.container.add(this.title),this.message=t.make.image(0,0,"levelend",e+"/message"),this.message.anchor.set(.5,0),this.message.position.set(.5*t.defaultWidth,.025*t.defaultHeight),this.container.add(this.message),this.results=new Oe({game:t,showYourTime:!1}),this.container.add(this.results),this.results.position.set(.5*(t.defaultWidth-this.results.width),.426*t.defaultHeight),t.windowEventController.handleWindowResize(),t.scale.onSizeChange.add(this.positionContainer,this),this.positionContainer(),this.start(t)},e.prototype.positionContainer=function(){var t=.5*(this.game.width-this.game.defaultWidth),e=.5*(this.game.height-this.game.defaultHeight);this.background.scale.set(1),this.container.position.set(t,e)},e.prototype.start=function(t){var e=this.game.controller.gameModel.getCurrentLevelTimeResults();this.results.setResults(e)},e.prototype.update=function(t){},e.prototype.end=function(){this.game.controller.startLevel()},e.prototype.shutdown=function(t){t.scale.onSizeChange.remove(this.positionContainer,this),this.background.destroy(!0),this.container.destroy(!0),this.results.destroy(!0),this.background=null,this.container=null,this.results=null},e}(Phaser.State);var De=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){},e.prototype.preload=function(t){},e.prototype.create=function(t){this.container=t.make.group(),this.message=tt(this.game,k,55,M),this.message.text="GAME COMPLETE \n\n screen to be designed",this.message.x=this.game.width/2-this.message.width/2,this.message.y=300,this.container.add(this.message),this.game.add.existing(this.container)},e.prototype.positionContainer=function(){var t=.5*(this.game.width-this.game.defaultWidth),e=.5*(this.game.height-this.game.defaultHeight);this.container.position.set(t,e)},e.prototype.start=function(t){},e.prototype.update=function(t){},e.prototype.end=function(){this.game.controller.startLevel()},e.prototype.shutdown=function(t){this.game.scale.onSizeChange.remove(this.positionContainer,this),this.container.destroy(!0),this.container=null},e}(Phaser.State),Le=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Ie=function(t){function e(i){var n=i.game,o=i.gameScore,a=i.bestScore;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return s.container=s.game.make.group(),s.add(s.container),s.panel=s.game.make.image(0,0,"ui","panel_generic"),s.container.add(s.panel),s.character=s.game.make.image(0,0,"modal_characters","modal_char_gamecomplete"),s.character.y=0,s.character.x=.5*s.panel.width-.5*s.character.width,s.container.addAt(s.character,0),s.title=new pt({game:n,title:pt.YOUDIDIT}),s.title.x=.5*s.panel.width-.5*s.title.width,s.title.y=.75*s.character.height,s.container.add(s.title),s.panel.y=s.title.y+.3*s.title.height,s.scoreDisplay=new Et({game:s.game,score:o,labelCopy:"",scoreFontSize:150}),s.scoreDisplay.x=.5*s.panel.width-.5*s.scoreDisplay.width,s.scoreDisplay.y=s.title.y+.8*s.title.height,s.container.addChild(s.scoreDisplay),s.highScoreDisplay=new Ot({game:s.game,score:a}),s.highScoreDisplay.x=.5*s.panel.width-.5*s.highScoreDisplay.width,s.highScoreDisplay.y=s.scoreDisplay.y+s.scoreDisplay.height+40,s.btnTryAgain=new ht({game:s.game,id:"btn_tryagain",skin:"btn_tryagain"}),s.btnTryAgain.x=.5*s.panel.width,s.btnTryAgain.y=s.highScoreDisplay.y+s.highScoreDisplay.height+.75*s.btnTryAgain.height,s.btnTryAgain.onInputDown.add(s.handleTryAgain,s),s.panel.height=s.btnTryAgain.y-s.panel.y,s.game.scale.onSizeChange.add(s.handleScreenResize,s),s.fixedToCamera=!0,s.handleScreenResize(),s.scoreDisplay.onAnimatedScoreUpdated.add(s.handleAnimatedScoreUpdate,s),s.scoreDisplay.onAnimatedScoreComplete.add(s.handleAnimatedScoreComplete,s),s.scoreDisplay.animateScore(0,o),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.handleScreenResize=function(){this.container.x=.5*this.game.width-.5*this.width,this.container.y=.5*this.game.height-.5*this.height},e.prototype.handleAnimatedScoreUpdate=function(){this.scoreDisplay.x=.5*this.panel.width-.5*this.scoreDisplay.width},e.prototype.handleAnimatedScoreComplete=function(){this.handleAnimatedScoreUpdate(),this.container.add(this.highScoreDisplay),this.addStarBurst(this.panel.width/2,this.highScoreDisplay.y),this.container.add(this.btnTryAgain)},e.prototype.addStarBurst=function(t,e){var i=new At({game:this.game});i.scale.set(2),i.position.set(t,e),this.container.add(i)},e.prototype.handleTryAgain=function(){this.game.hud.configure({id:Ut.EMPTY}),this.game.controller.restartGame()},e.prototype.destroy=function(){this.game.scale.onSizeChange.remove(this.handleScreenResize,this),t.prototype.destroy.call(this,!0)},Le(e,[{key:"height",get:function(){return this.btnTryAgain.y+this.btnTryAgain.height}},{key:"width",get:function(){return this.panel.width}}]),e}(Phaser.Group);var Re=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){},e.prototype.preload=function(t){},e.prototype.create=function(t){this.container=t.make.group(),this.background=new J({game:t}),this.background.anchor.set(.5),this.background.position.set(t.defaultWidth/2,t.defaultHeight/2),this.container.add(this.background),this.hud=new Ie({game:t,gameScore:this.game.controller.gameModel.getGameScore(),bestScore:this.game.controller.gameModel.getBestScore()}),this.container.add(this.hud),this.copyright=new Yt({game:t}),this.copyright.x=this.game.width/2-this.copyright.width/2,this.copyright.y=this.game.height-this.copyright.height,this.container.add(this.copyright),this.game.add.existing(this.container)},e.prototype.positionContainer=function(){this.copyright.x=this.game.width/2-this.copyright.width/2,this.copyright.y=this.game.height-this.copyright.height;var t=.5*(this.game.width-this.game.defaultWidth),e=.5*(this.game.height-this.game.defaultHeight);this.container.position.set(t,e)},e.prototype.start=function(t){},e.prototype.update=function(t){},e.prototype.end=function(){this.game.controller.restartGame()},e.prototype.shutdown=function(t){this.game.scale.onSizeChange.remove(this.positionContainer,this),this.container.destroy(!0),this.background=null,this.container=null},e}(Phaser.State);var Me=function(){function t(e){var i=e.settings;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.settings=i,this.paused=!1,this.onAudioIsChanged=new Phaser.Signal,this.onPauseIsChanged=new Phaser.Signal}return t.prototype.toggleAudio=function(){var t=this.settings.toggleAudio();t.isMuted,this.onAudioIsChanged.dispatch(t)},t.prototype.getAudio=function(){return this.settings.getAudio()},t.prototype.getIsMuted=function(){return this.settings.getIsMuted()},t.prototype.setPaused=function(t){this.paused=t,this.onPauseIsChanged.dispatch({paused:this.paused})},t.prototype.destroy=function(){this.onAudioIsChanged.forget(),this.onAudioIsChanged.dispose(),this.onAudioIsChanged.removeAll(),this.onPauseIsChanged.forget(),this.onPauseIsChanged.dispose(),this.onPauseIsChanged.removeAll(),Function.prototype.destroy.call(this)},t}();var Ge=function(t){function e(i){var n=i.id,o=i.game,a=i.sheet;i.index,i.hasRays;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o));return s.sheet=a,s.loadTexture(s.sheet,n),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(t){var e=t.position;this.position.set(e.x,e.y),this.alpha=0},e.prototype.show=function(){this.scale.set(.5),this.game.add.tween(this.scale).to({x:1,y:1},e.ANIM_DURATION,"Cubic.easeOut",!0),this.game.add.tween(this).to({alpha:1},.75*e.ANIM_DURATION,"Cubic.easeIn",!0)},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0)},e}(Phaser.Sprite);Ge.ANIM_DURATION=500;var je=Ge;var Ne=function(t){function e(i){var n=i.game,o=i.id,a=i.x,s=i.y,r=(i.sfxID,i.skin);i.ariaLabelID;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,a,s,"buttons"));return h.setFrames(r,r,r,r),h.id=o,h.input.useHandCursor=!0,h.game.time.events.add(1,h.init,h),h.anchor.set(.5),h.enable(),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(){this.enable()},e.prototype.enable=function(){this.onInputDown.add(this.onDown,this)},e.prototype.disable=function(){this.onInputDown.forget(),this.onInputDown.dispose(),this.onInputDown.removeAll()},e.prototype.onDown=function(){this.game.sounds.playSFX("CLICK_SELECT")},e.prototype.destroy=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.disable(),t.prototype.destroy.call(this,e)},e}(Phaser.Button);var He=function(t){function e(i){var n=i.game,o=i.closeBtnData;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));a.game.track(Ft);var s="instructions";return a.panels=[new je({id:"instructions01",game:a.game,sheet:s,index:0}),new je({id:"instructions02",game:a.game,sheet:s,index:1}),new je({id:"instructions03",game:a.game,sheet:s,index:2}),new je({id:"instructions04",game:a.game,sheet:s,index:3})],a.background=a.game.make.image(0,0,"bg_fade"),a.background.anchor.set(0),a.add(a.background),a.background.inputEnabled=!0,a.background.input.priorityID=0,a.background.input.useHandCursor=!1,a.panelContainer=a.game.make.group(),a.add(a.panelContainer),a.addPanels(),a.createCloseButton(o),a.positionElements(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.createCloseButton=function(t){if(t){var e=t.id,i=t.sfx_id,n=t.skin,o=t.ariaLabelID,a={game:this.game,id:e,x:0,y:0,sfx_id:i,skin:n,ariaLabelID:o};this.closeButton=new Ne(a),this.closeButton.onInputDown.add(this.handleClose,this);var s=this.panels[0].width+100,r=this.panels[this.panels.length-1].y+this.panels[this.panels.length-1].height+40;this.closeButton.position.set(s,r)}},e.prototype.handleClose=function(){this.game.controller.closeInstructions()},e.prototype.positionElements=function(){this.background.width=this.game.width,this.background.height=this.game.height,this.panelContainer.position.set(.5*(this.game.width-this.panelContainer.width),.04*this.game.height)},e.prototype.activate=function(){this.game.scale.onSizeChange.add(this.positionElements,this);var t=this.game.stage.children.length;this.game.stage.addChildAt(this,t),this.cnt=0,this.timer=this.game.time.events.repeat(e.ANIM_DURATION,this.panels.length,this.showPanel,this),this.showPanel()},e.prototype.deactivate=function(){this.game.scale.onSizeChange.remove(this.positionElements,this),this.game.world.remove(this)},e.prototype.addPanels=function(){var t=this.panels.entries(),i=Array.isArray(t),n=0;for(t=i?t:t[Symbol.iterator]();;){var o;if(i){if(n>=t.length)break;o=t[n++]}else{if((n=t.next()).done)break;o=n.value}var a=o,s=a[0],r=a[1],h=e.content[s];r.init(h),this.panelContainer.add(r)}},e.prototype.showPanel=function(){this.cnt<this.panels.length?(this.panels[this.cnt].show(),this.cnt++):this.panelContainer.add(this.closeButton)},e.prototype.destroy=function(){this.timer&&this.game.time.events.remove(this.timer),this.panelContainer.destroy(!0),this.panelContainer=null;var e=this.panels,i=Array.isArray(e),n=0;for(e=i?e:e[Symbol.iterator]();;){var o;if(i){if(n>=e.length)break;o=e[n++]}else{if((n=e.next()).done)break;o=n.value}var a=o;a.destroy(),a=null}this.closeButton.destroy(!0),this.closeButton=null,this.background=null,this.deactivate(),t.prototype.destroy.call(this,!0)},e}(Phaser.Group);He.content=[{position:{x:0,y:0}},{position:{x:75,y:165}},{position:{x:265,y:220}},{position:{x:75,y:400}}],He.ANIM_DURATION=1e3;var Be=He,Fe=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};var We=function(){function t(e){var i=e.settings,n=e.gameData;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.settings=i,this.data=Fe({},n),this.id=E,this.forceInstructions=!0,this.tutorialComplete=!1,this.currentLevelScores=[],this.currentGameScore=0,this.bestGameScore=0,this.bestLevelScores=[],this.reset(),this.init()}return t.prototype.init=function(){this.saveSlots=this.loadSlotsData(),this.saveSlots||this.initSaveSlots();var t=this.loadSimpleSave(this.id);t?this.deserialize(t):(this.createNewSaveSlot(this.id),this.savePlayerData(this.id,this.serialize()))},t.prototype.reset=function(){this.level=1,this.lives=this.data.lives_to_start,this.currentLevelScores=[]},t.prototype.setInstructionsViewed=function(){this.forceInstructions=!1,this.savePlayerData(this.id,this.serialize())},t.prototype.setTutorialIsComplete=function(){this.tutorialComplete=!0,this.savePlayerData(this.id,this.serialize())},t.prototype.getCurrentLevelTimeResults=function(){return{current:this.levelTimes[this.level-1],best:this.bestLevelTimes[this.level-1]}},t.prototype.getCurrentLevel=function(){return this.level},t.prototype.getCurrentLevelID=function(){return g[this.level-1]},t.prototype.getGameIsComplete=function(){return this.level===g.length},t.prototype.getIsTutorialMode=function(){return!this.tutorialComplete},t.prototype.getGameScore=function(){return this.currentLevelScores.reduce(function(t,e){return t+e},0)},t.prototype.getBestScore=function(){return this.bestGameScore},t.prototype.levelUp=function(){return this.level++,this.level},t.prototype.looseLife=function(){return this.lives--,this.lives},t.prototype.saveLevelScore=function(t,e){this.currentLevelScores[t-1]=e,this.bestLevelScores[t-1]=Math.max(this.bestLevelScores[t-1],e),this.savePlayerData(this.id,this.serialize())},t.prototype.saveGameScore=function(t){this.bestGameScore=Math.max(this.bestGameScore,t),this.savePlayerData(this.id,this.serialize())},t.prototype.saveLevelTime=function(t){var e=this.bestLevelTimes[this.level-1]||t,i=t<e,n=Math.min(t,e);return this.bestLevelTimes[this.level-1]=n,this.levelTimes[this.level-1]=t,this.savePlayerData(this.id,this.serialize()),i},t.prototype.deserialize=function(t){var e=JSON.parse(t);for(var i in e)null==this[i]&&void 0==this[i]||(this[i]=e[i])},t.prototype.serialize=function(){var t={id:this.id,forceInstructions:this.forceInstructions,bestLevelTimes:this.bestLevelTimes,tutorialComplete:this.tutorialComplete};return JSON.stringify(t)},t.prototype.initSaveSlots=function(){if(!this.loadSlotsData()){var t=JSON.stringify({slots:[]});this.settings.setGameData("slots",t)}},t.prototype.loadSlotsData=function(){var t=this.settings.getAllSettings().gameData.slots;return!!t&&JSON.parse(t)},t.prototype.createNewSaveSlot=function(t){var e=this.loadSlotsData();e.slots.push(t);var i=JSON.stringify(e);this.settings.setGameData("slots",i)},t.prototype.deleteSaveSlot=function(t){var e=this.loadSlotsData(),i=e.slots.indexOf(t);e.slots.splice(i,1);var n=JSON.stringify(e);this.settings.setGameData("slots",n),this.settings.setGameData("save"+t,null)},t.prototype.savePlayerData=function(t,e){this.settings.setGameData("save"+t,e)},t.prototype.loadSimpleSave=function(t){return this.settings.getAllSettings().gameData["save"+t]},t}();var ze=function(t){function e(i){var n=i.game,o=i.closeBtnData;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return a.background=a.game.make.image(0,0,"bg_fade"),a.background.anchor.set(0),a.add(a.background),a.background.inputEnabled=!0,a.background.input.priorityID=0,a.background.input.useHandCursor=!1,a.panelContainer=a.game.make.group(),a.add(a.panelContainer),a.panel=a.game.make.image(0,0,"ui","credits"),a.panel.anchor.set(0,.5),a.panelContainer.add(a.panel),a.createCloseButton(o),a.positionElements(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.createCloseButton=function(t){if(t){var e=t.id,i=t.sfx_id,n=t.skin,o=t.ariaLabelID,a={game:this.game,id:e,x:0,y:0,sfx_id:i,skin:n,ariaLabelID:o};this.closeButton=new Ne(a),this.closeButton.onInputDown.add(this.handleClose,this),this.panelContainer.add(this.closeButton);var s=.5*this.panel.width,r=.5*this.panel.height+60;this.closeButton.position.set(s,r)}},e.prototype.handleClose=function(){this.game.controller.closeCredits()},e.prototype.positionElements=function(){this.background.width=this.game.width,this.background.height=this.game.height,this.panelContainer.position.set(.5*(this.game.width-this.panelContainer.width),.48*this.game.height)},e.prototype.activate=function(){this.game.scale.onSizeChange.add(this.positionElements,this);var t=this.game.stage.children.length;this.game.stage.addChildAt(this,t)},e.prototype.deactivate=function(){this.game.scale.onSizeChange.remove(this.positionElements,this),this.game.world.remove(this)},e.prototype.destroy=function(){this.panelContainer.destroy(!0),this.panelContainer=null,this.panel=null,this.closeButton.destroy(!0),this.closeButton=null,this.background=null,this.deactivate(),t.prototype.destroy.call(this,!0)},e}(Phaser.Group),Ue=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Ve=function(){function t(e){var i=e.config;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dennisMoveSpeed=i.dennis_move_speed,this.spritesheet=i.spritesheet,this.timeLimit=i.time_limit,this.collectTarget=i.target_to_collect,this.collectType=i.collect_type,this.introMessage=i.intro_message,this.edgeRight=i.edge_right,this.edgeLeft=i.edge_left,this.unlockedFriend=i.unlocked_friends,this.availableFriends=i.available_friends,this.introCutscene=i.intro_cutscene,this.introAudio=i.intro_audio,this.roadTiles=i.road_tiles,this.hazards=i.hazards,this.collectableChain=i.map_config.collectable_chain,this.collectableSpacing=i.map_config.collectable_spacing,this.hazardSpacing=i.map_config.hazard_spacing}return Ue(t,[{key:"randomHazard",get:function(){return this.hazards[Math.floor(Math.random()*this.hazards.length)]}}]),t}(),Ye=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},qe=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Xe=function(){function t(e){var i=e.game,n=e.config;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=Ye({},n),this.allow_game_logs=!0,this.game=this.data.game,this.lives_to_start=this.game.lives_to_start,this.start_at_level=this.game.start_at_level,this.game_zoom_level=.75,this.npc_view_distance=this.data.game.npc_view_distance,this.npc_phonefriend_distance=this.data.game.npc_phonefriend_distance,this.npc_distraction_duration=this.data.game.npc_distraction_duration,this.npc_view_angle=this.data.game.npc_view_angle,this.invincible_mode=!1,this.dennis_move_speed=this.data.game.dennis_move_speed,this.test_level_mode="SCHOOL",this.introMessages=this.data.intro_messages,this.audio=this.data.audio,this.audioSprites=this.data.audioSprites,this.screenhud=this.data.screenhud,this.buttons=this.data.buttons,this.debugCollisions=!1,this.levels=[],this.levels=this.data.game_levels.reduce(function(t,e){return t.push(new Ve({game:i,config:e})),t},[])}return t.prototype.getDataNPC=function(t){return this.data.npcs.find(function(e){return e.id===t})},t.prototype.getIntroMessageById=function(t){return this.introMessages[t]},t.prototype.getLevelData=function(t){return this.levels[t-1]},qe(t,[{key:"animatedfurniture",get:function(){return this.data.animated_furniture}}]),t}();var Ke=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.background=o.game.make.image(0,0,"bg_generic"),o.add(o.background),o.maskp=o.game.add.graphics(),o.maskp.beginFill(0,1),o.maskp.drawCircle(0,0,10),o.maskp.endFill(),o.maskp.anchor.set(.5),o.maskp.position.set(.5*o.game.width,.5*o.game.height),o.addChild(o.maskp),o.background.mask=o.maskp,o.maskp.diameter=1,o.onInComplete=new Phaser.Signal,o.onOutComplete=new Phaser.Signal,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(){},e.prototype.startIn=function(){var t=this,e={step:0},i=this.game.add.tween(e).to({step:1280},1250,Phaser.Easing.Circular.Out);i.onUpdateCallback(function(){t.maskp.beginFill(0,0),t.maskp.drawCircle(0,0,e.step),t.maskp.endFill()}),i.start(),i.onComplete.addOnce(this.startInComplete,this)},e.prototype.startInComplete=function(){this.onInComplete.dispatch(this)},e.prototype.startOut=function(){var t=this,e={step:0},i=this.game.add.tween(e).to({step:1280},1250,Phaser.Easing.Circular.In);i.onUpdateCallback(function(){t.maskp.clear(),t.maskp.beginFill(0,0),t.maskp.drawCircle(0,0,1280-e.step),t.maskp.endFill()}),i.start(),i.onComplete.addOnce(this.startOutComplete,this)},e.prototype.startOutComplete=function(){this.onOutComplete.dispatch(this)},e.prototype.destroy=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];arguments[1];this.onInComplete.forget(),this.onInComplete.dispose(),this.onInComplete.removeAll(),this.onOutComplete.forget(),this.onOutComplete.dispose(),this.onOutComplete.removeAll(),this.background=null,this.maskp=null,t.prototype.destroy.call(this,e)},e}(Phaser.Group);var Je=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.background=o.game.make.image(0,0,"bg_generic"),o.add(o.background),o.render=o.render.bind(o),o.w=.5*o.game.defaultWidth,o.h=.5*o.game.defaultHeight,o.max=o.w+100,o.outer=o.generateOuter(),o.maskp=o.game.add.graphics(),o.addChild(o.maskp),o.background.mask=o.maskp,o.render(o.max),o.onInComplete=new Phaser.Signal,o.onOutComplete=new Phaser.Signal,o.game.input.enabled=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.generateOuter=function(){var t=this.game.defaultWidth,e=this.game.defaultHeight;return[0,0,t,0,t,e,0,e,0,0]},e.prototype.generatePolygon=function(t){var i=[],n=void 0;for(n=1;n<=e.NUMBER_SIDES;n++)i.push(this.w+t*Math.cos(2*n*Math.PI/e.NUMBER_SIDES)),i.push(this.h+t*Math.sin(2*n*Math.PI/e.NUMBER_SIDES));return i.push(i[0]),i.push(i[1]),i},e.prototype.render=function(t){var e=this.generatePolygon(t),i=[].concat(this.outer,e),n=new Phaser.Polygon(i);this.maskp.clear(),this.maskp.beginFill(0,1),this.maskp.drawPolygon(n.points),this.maskp.endFill()},e.prototype.init=function(){},e.prototype.startIn=function(){var t=this,i={step:this.max},n=this.game.add.tween(i).to({step:0},e.DURATION,Phaser.Easing.Circular.Out);n.onUpdateCallback(function(){t.render(i.step)}),n.start(),n.onComplete.addOnce(this.startInComplete,this)},e.prototype.startInComplete=function(){this.onInComplete.dispatch(this)},e.prototype.startOut=function(){var t=this,i={step:0},n=this.game.add.tween(i).to({step:this.max},e.DURATION,Phaser.Easing.Circular.In);n.onUpdateCallback(function(){t.render(i.step)}),n.start(),n.onComplete.addOnce(this.startOutComplete,this)},e.prototype.startOutComplete=function(){this.game.input.enabled=!0,this.onOutComplete.dispatch(this)},e.prototype.destroy=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];arguments[1];this.game.tweens.removeFrom(this,!0),this.game.tweens.removeFrom(this),this.onInComplete.forget(),this.onInComplete.dispose(),this.onInComplete.removeAll(),this.onOutComplete.forget(),this.onOutComplete.dispose(),this.onOutComplete.removeAll(),this.background=null,this.maskp=null,t.prototype.destroy.call(this,e)},e}(Phaser.Group);Je.DURATION=1e3,Je.NUMBER_SIDES=16;var Qe=Je;var Ze=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.background=o.game.make.image(0,0,"bg_generic"),o.add(o.background),o.render=o.render.bind(o),o.w=.5*o.game.defaultWidth,o.h=.5*o.game.defaultHeight,o.outer=o.generateOuter(),o.maskp=o.game.add.graphics(),o.maskp.anchor.set(.5),o.maskp.position.set(o.w,o.h),o.addChild(o.maskp),o.background.mask=o.maskp,o.render(10),o.onInComplete=new Phaser.Signal,o.onOutComplete=new Phaser.Signal,o.game.input.enabled=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.generateOuter=function(){var t=-this.w,e=-this.h,i=this.w,n=this.h;return[t,e,i,e,i,n,t,n,t,e]},e.prototype.render=function(t){var e=this.w/this.h,i=Math.min(0,-(this.w-t*e)),n=Math.min(0,-(this.h-t)),o=Math.max(0,this.w-t*e),a=Math.max(0,this.h-t),s=[];0!==n&&0!==a&&(s=[i,n,o,n,o,a,i,a,i,n]);var r=[].concat(this.outer,s),h=new Phaser.Polygon(r);this.maskp.clear(),this.maskp.beginFill(0,1),this.maskp.drawPolygon(h.points),this.maskp.endFill()},e.prototype.init=function(){},e.prototype.startIn=function(){var t=this,i={step:0},n=this.game.add.tween(i).to({step:this.h+1},e.DURATION,Phaser.Easing.Circular.Out);n.onUpdateCallback(function(){t.render(i.step)}),n.start(),n.onComplete.addOnce(this.startInComplete,this)},e.prototype.startInComplete=function(){this.onInComplete.dispatch(this)},e.prototype.startOut=function(){var t=this,i={step:this.h+1},n=this.game.add.tween(i).to({step:0},e.DURATION,Phaser.Easing.Circular.In);n.onUpdateCallback(function(){t.render(i.step)}),n.start(),n.onComplete.addOnce(this.startOutComplete,this)},e.prototype.startOutComplete=function(){this.game.input.enabled=!0,this.onOutComplete.dispatch(this)},e.prototype.destroy=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];arguments[1];this.game.tweens.removeFrom(this,!0),this.game.tweens.removeFrom(this),this.onInComplete.forget(),this.onInComplete.dispose(),this.onInComplete.removeAll(),this.onOutComplete.forget(),this.onOutComplete.dispose(),this.onOutComplete.removeAll(),this.background=null,this.maskp=null,t.prototype.destroy.call(this,e)},e}(Phaser.Group);Ze.DURATION=500;var $e=Ze;var ti=function(t){function e(i){var n=i.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.maskp=o.game.add.graphics(),o.maskp.beginFill(16777215,1),o.maskp.drawRect(0,0,o.game.width,o.game.height),o.maskp.endFill(),o.maskp.anchor.set(.5),o.maskp.position.set(0,0),o.maskp.alpha=0,o.addChild(o.maskp),o.onInComplete=new Phaser.Signal,o.onOutComplete=new Phaser.Signal,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.init=function(){},e.prototype.startIn=function(){var t=this.game.add.tween(this.maskp).to({alpha:1},200,"Cubic.easeInOut",!1);t.onComplete.addOnce(this.startInComplete,this),t.start()},e.prototype.startInComplete=function(){this.onInComplete.dispatch(this)},e.prototype.startOut=function(){var t=this.game.add.tween(this.maskp).to({alpha:0},200,"Cubic.easeInOut",!1);t.onComplete.addOnce(this.startOutComplete,this),t.start()},e.prototype.startOutComplete=function(){this.onOutComplete.dispatch(this)},e.prototype.destroy=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];arguments[1];this.onInComplete.forget(),this.onInComplete.dispose(),this.onInComplete.removeAll(),this.onOutComplete.forget(),this.onOutComplete.dispose(),this.onOutComplete.removeAll(),this.maskp=null,t.prototype.destroy.call(this,e)},e}(Phaser.Group);var ei=function(t){function e(i){var n=i.game,o=i.enabled;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return a.enabled=o,a.onTransitionInComplete=new Phaser.Signal,a.onTransitionOutComplete=new Phaser.Signal,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.startTransition=function(t){var i=t.type,n=void 0===i?e.POLY_MASK:i;if(this.game.stage.addChild(this),this.enabled){switch(n){case e.CIRCLE_MASK:this.transition=new Ke({game:this.game});break;case e.POLY_MASK:this.transition=new Qe({game:this.game});break;case e.RECT_MASK:this.transition=new $e({game:this.game});break;case e.LOW_FI:this.transition=new ti({game:this.game});break;default:this.transition=new ti({game:this.game})}this.addChild(this.transition)}this.transition?(this.transitionStart(),this.game.scale.onSizeChange.add(this.positionElements,this),this.positionElements()):this.onTransitionInComplete.dispatch()},e.prototype.positionElements=function(){var t=.5*(this.game.width-this.game.defaultWidth),e=.5*(this.game.height-this.game.defaultHeight);this.position.set(t,e)},e.prototype.transitionStart=function(){this.transition.onInComplete.addOnce(this.transitionInComplete,this),this.transition.onOutComplete.addOnce(this.transitionOutComplete,this),this.transition.init(),this.transition.startIn(0)},e.prototype.transitionInComplete=function(t){t&&t.onInComplete.removeAll(),this.onTransitionInComplete.dispatch()},e.prototype.transitionEnd=function(){this.transition?this.transition.startOut():this.transitionOutComplete()},e.prototype.transitionOutComplete=function(t){t&&t.onOutComplete.removeAll(),this.game.scale.onSizeChange.remove(this.positionElements,this),this.onTransitionOutComplete.dispatch()},e.prototype.destroy=function(){this.game.scale.onSizeChange.remove(this.positionElements,this),this.game.tweens.removeFrom(this,!0),this.game.tweens.removeFrom(this),this.onTransitionOutComplete.forget(),this.onTransitionOutComplete.dispose(),this.onTransitionOutComplete.removeAll(),this.onTransitionInComplete.forget(),this.onTransitionInComplete.dispose(),this.onTransitionInComplete.removeAll(),this.transition&&this.transition.destroy(),this.transition=null,t.prototype.destroy.call(this,!0)},e}(Phaser.Sprite);ei.CIRCLE_MASK="CIRCLE_MASK",ei.POLY_MASK="POLY_MASK",ei.RECT_MASK="RECT_MASK",ei.LOW_FI="LOW_FI";var ii=ei,ni=function(){var t=oi();return t===ai||t===si||t===ri},oi=function(){if(/iPhone/.test(navigator.userAgent)&&!window.MSStream){var t=(window.screen.width>window.screen.height?window.screen.height:window.screen.width)/(window.screen.width>window.screen.height?window.screen.width:window.screen.height),e=window.devicePixelRatio;return t==320/480&&1==e?ai:t==640/960&&2==e?si:t==640/1136&&2==e?ri:t==750/1334&&2==e?hi:t==640/1136&&2==e?li:.5625==t&&3==e?ci:t==1125/2001&&3==e?ui:t==375/812&&3==e?pi:""}return""},ai="iPhone 1/3g/3gs",si="iPhone 4/4s",ri="iPhone 5/5c/5s",hi="iPhone 6/6s/7/8",li="iPhone 6/6s/7/8 (Display Zoom)",ci="iPhone 6/6s/7 Plus/8 Plus",ui="iPhone 6/6s/7 Plus/8 Plus (Display Zoom)",pi="iPhone X";var di=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var e=screen.width,i=screen.height;switch(this.isOldIpad=1==window.devicePixelRatio&&(1024==e&&768==i||768==e&&1024==i)&&void 0===window.androidBridge,this.isOldIphone=ni(),this.isKindle=this.isKindle(),this.isNexus7=navigator.userAgent.indexOf("Nexus 7")>-1,this.isGalaxyTab4=navigator.userAgent.indexOf("SM-T530")>-1||navigator.userAgent.indexOf("SM-T330")>-1||navigator.userAgent.indexOf("GT-N8010")>-1,this.isSmallScreen=e<=768||i<=768,this.requiresLightVersion=!Phaser.Device.desktop&&this.doesRequireLightVersion(),!0===Phaser.Device.desktop?this.gameLoadType=B:this.gameLoadType=this.requiresLightVersion?F:B,this.allowTransitionTweens=0==this.requiresLightVersion,this.getParameterByName("loadtype")){case F:this.gameLoadType=F;break;case B:this.gameLoadType=B;break;case H:this.gameLoadType=H}}return t.prototype.getAppRenderTpye=function(){var t=Phaser.AUTO;return this.isOldAppleDevice()&&(t=Phaser.CANVAS),t},t.prototype.getAppTransitionType=function(){var e=t.TRANSITIONS_FULL;return this.isOldAppleDevice()&&(e=t.TRANSITIONS_LOWFI),e},t.prototype.getParameterByName=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},t.prototype.doesRequireLightVersion=function(){return!!(this.isOldIpad||this.isOldIphone||this.isKindle||this.isGalaxyTab4||this.isNexus7)},t.prototype.isOldAppleDevice=function(){return this.isOldIpad||this.isOldIphone},t.prototype.isKindle=function(){for(var t=["KFSUWI","KFAUWI","KFDOWI","KFGIWI","KFFOWI","KFMEWI","KFTBWI","KFARWI","KFASWI","KFSAWA","KFSAWI","KFAPWA","KFAPWI","KFAPWA","KFAPWI","KFSOWI","KFJWA","KFJWI","KFTT","KFOT","Kindle Fire"],e=0;e<t.length;e++)if(navigator.userAgent.indexOf(t[e])>-1)return!0;return!1},t.prototype.applyLightSettings=function(t){this.requiresLightVersion=t},t}();di.TRANSITIONS_FULL="TRANSITIONS_FULL",di.TRANSITIONS_LOWFI="TRANSITIONS_LOWFI",di.TRANSITIONS_NONE="TRANSITIONS_NONE";var fi=di;var gi=function(){function t(e){var i=e.game,n=e.transitionType,o=void 0===n?fi.TRANSITIONS_FULL:n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=i,this.transitionType=o,this.transitionToState=!1,this.transitionToParams=!1,this.onTransitionComplete=new Phaser.Signal,this.isStateTransition=!1}return t.prototype.clearCurrentState=function(){this.game.state.clearCurrentState()},t.prototype.switchStates=function(){var t;(t=this.game.state).start.apply(t,[this.transitionToState].concat(this.transitionToParams)),this.game.state.onStateChange.addOnce(this.handleStateChanged,this)},t.prototype.handleStateChanged=function(){this.game.camera.x=0,this.game.camera.y=0,this.game.time.events.add(300,this.transitionOut,this).autoDestroy=!0,this.game.hud.show()},t.prototype.transitionOut=function(){this.transitions.transitionEnd()},t.prototype.onTransitionInComplete=function(){this.switchStates()},t.prototype.onTransitionOutComplete=function(){this.onTransitionComplete.dispatch(),this.transitions.destroy(),this.transitions=null,this.isStateTransition=!1},t.prototype.startState=function(t){var e=t.nextState,i=t.nextStateParams;if(this.isStateTransition)console.log("stuck in transition");else{this.transitionToState=e,this.transitionToParams=i,this.isStateTransition=!0;var n=ii.POLY_MASK,o=!0;switch(this.transitionType){case fi.TRANSITIONS_FULL:n=ii.POLY_MASK;break;case fi.TRANSITIONS_LOWFI:n=ii.LOW_FI;break;case fi.TRANSITIONS_NONE:n="",o=!1}this.transitions=new ii({game:this.game,type:n,enabled:o}),this.transitions.onTransitionInComplete.add(this.onTransitionInComplete,this),this.transitions.onTransitionOutComplete.add(this.onTransitionOutComplete,this),this.transitions.startTransition({type:n})}},t}(),mi=i(4),yi=i.n(mi);var bi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,this.wrapper=document.createElement("div"),this.wrapper.className="cheat-window",this.bindedCloseWindow=this.closeWindow.bind(this),this.bindedOpenWindow=this.openWindow.bind(this),this.btnClose=document.createElement("div"),this.btnClose.className="btn-close",this.wrapper.appendChild(this.btnClose),this.btnClose.addEventListener("click",this.bindedCloseWindow),this.returnToWelcomeOnClose=!1,document.body.appendChild(this.wrapper),this.gameConfig=this.game.controller.configModel,this.createGameSettingsMenu()}return t.prototype.createGameSettingsMenu=function(){var t=this,e=yi.a.create(0,0,"Game Settings",this.wrapper);return e.addBoolean("Invincible Mode",this.gameConfig.invincible_mode,function(e){t.gameConfig.invincible_mode=e}),e.addBoolean("Show Collision Boxes",this.gameConfig.debugCollisions,function(e){t.gameConfig.debugCollisions=e}),this.game.controller.config.levels.forEach(function(i,n){e.addButton("start level "+(n+1),function(){t.game.controller.gameModel.reset(),t.game.controller.playLevel(n+1),t.wrapper.style.display="none"})}),e.addButton("complete game",function(){t.game.controller.config.levels.forEach(function(e,i){var n=100+Math.ceil(100*Math.random()),o=Math.round(4*Math.random());t.game.controller.gameModel.saveLevelScore(i+1,n*(o+1))}),t.game.hud.configure({id:"EMPTY"}),t.game.controller.showGameComplete(),t.wrapper.style.display="none"}),e.addButton("reset tutorials",function(){t.game.controller.gameModel.forceInstructions=!0,t.game.controller.gameModel.tutorialComplete=!1,t.closeWindow()}),e},t.prototype.closeWindow=function(){this.wrapper.style.display="none",this.game.controller.showWelcomeScreen()},t.prototype.openWindow=function(){this.wrapper.style.display="block "},t}(),vi=i(3),wi=i.n(vi);var _i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e,wi()("↑ ↑ ↓ ↓ ← →",{done:this.handleOpenCheatWindow.bind(this),description:"Open Cheat Window"})}return t.prototype.handleOpenCheatWindow=function(){this.game.controller.cheatController.openWindow()},t}(),Ci=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Si=function(){function t(e){var i=e.game,n=e.settings,o=e.hud,a=e.deviceController;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=i,this.settings=n,this.hud=o,this.deviceController=a}return t.prototype.init=function(t){var e=t.config;this.config=new Xe({game:this.game,config:e}),this.uiModel=new Me({settings:this.settings}),this._gameModel=new We({settings:this.settings,gameData:this.config.game}),this.stateController=new gi({game:this.game,transitionType:this.deviceController.getAppTransitionType()}),this.cheatController=new bi(this.game),this.shortcutController=new _i(this.game),this.game.sounds.addSounds(this.config.audio),this.game.sounds.addAudioSprites(this.config.audioSprites),this.hud.init(this.config.screenhud)},t.prototype.startBoot=function(){this.game.state.start(m,!0,!1)},t.prototype.startLoad=function(){this.game.state.start(y,!0,!1)},t.prototype.showWelcomeScreen=function(){this.game.sounds.dimBackgroundMusic(!1),this.game.track("VIEW_SCREEN_WELCOME"),this.hud.configure({id:Ut.WELCOME}),this.stateController.startState({nextState:w,nextStateParams:[!0,!1]})},t.prototype.showInstructions=function(){var t=this.config.buttons.instructionsClose;this.game.track(Ft),this.instructions=new Be({game:this.game,closeBtnData:t}),this.gameModel.setInstructionsViewed(),this.instructions.activate()},t.prototype.closeInstructions=function(){this.instructions.destroy(),this.game.controller.showCharacterIntro()},t.prototype.showGameIntro=function(){this.hud.configure({id:Ut.EMPTY}),this.stateController.startState({nextState:"STATE_GAME_INTRO",nextStateParams:[!0,!1]})},t.prototype.showButchersVanCutscene=function(){this.hud.configure({id:Ut.EMPTY}),this.stateController.startState({nextState:"STATE_BUTCHERS_VAN",nextStateParams:[!0,!1]})},t.prototype.showCharacterIntro=function(){var t=this.config.levels[this.gameModel.level-1];t.unlockedFriend?(this.hud.configure({id:Ut.EMPTY}),this.stateController.startState({nextState:v,nextStateParams:[!0,!1,{character:t.unlockedFriend}]})):this.startLevel()},t.prototype.setTutorialIsComplete=function(){this.gameModel.setTutorialIsComplete()},t.prototype.showCredits=function(){var t=this.config.buttons.creditsBack;this.game.track("VIEW_SCREEN_CREDITS"),this.credits=new ze({game:this.game,closeBtnData:t}),this.credits.activate()},t.prototype.closeCredits=function(){this.hud.configure({id:Ut.PAUSE,isModal:!0}),this.credits.destroy()},t.prototype.endLevel=function(t){var e=t.score,i=t.isWin,n=t.friendsRemaining,o=void 0===n?[]:n;i?this.winLevel(e,o):this.failLevel(e)},t.prototype.winLevel=function(t,e){this.game.sounds.playSFX("LEVEL_COMPLETE"),this.game.track("LEVEL_"+this.gameModel.level+"_COMPLETE");var i=this.config.levels[this.gameModel.level-1],n=t*(e.length+1),o=this.gameModel.getGameScore(),a=o+n;this.hud.showLevelWin({totalLevelScore:n,newGameScore:a,prevGameScore:o,baseLevelScore:t,collectTarget:i.collectTarget,collectType:i.collectType,friendsRemaining:e,isLastLevel:this.gameModel.level===this.config.levels.length}),this.gameModel.saveLevelScore(this.gameModel.level,n)},t.prototype.failLevel=function(t){this.game.sounds.playSFX("LEVEL_FAILED");var e=this.config.levels[this.gameModel.level-1];this.gameModel.saveLevelScore(this.gameModel.level,t),this.game.track("LEVEL_ "+this.gameModel.level+"_FAIL"),this.game.hud.showLevelFail({totalLevelScore:t,newGameScore:this.gameModel.getGameScore(),collectTarget:e.collectTarget})},t.prototype.showGameComplete=function(){this.game.sounds.playSFX("GAME_COMPLETE"),this.gameModel.getGameScore()>this.gameModel.bestGameScore&&this.game.track("NEW_HIGH_SCORE"),this.gameModel.saveGameScore(this.gameModel.getGameScore()),this.game.track("GAME_COMPLETE"),this.stateController.startState({nextState:x,nextStateParams:[!0,!1]}),this.hud.configure({id:Ut.GAMEEND,isVisible:!1})},t.prototype.startNewGame=function(){this.gameModel.reset(),this.playLevel()},t.prototype.playLevel=function(t){t&&(this.gameModel.level=t);var e=this.config.getLevelData(this.gameModel.level);e.introCutscene?(this.hud.configure({id:Ut.EMPTY}),this.stateController.startState({nextState:_,nextStateParams:[!0,!1,{id:e.introCutscene}]})):this.showCharacterIntro()},t.prototype.startLevel=function(t){this.game.sounds.dimBackgroundMusic(!0),t&&(this.gameModel.level=t),this.game.track("LEVEL_"+this.gameModel.level+"_PLAY");var e=this.config.levels[this.gameModel.level-1];this.stateController.startState({nextState:b,nextStateParams:[!0,!1,{levelData:e,playerLevel:this.gameModel.level,showTutorial:this.gameModel.getIsTutorialMode()}]}),this.hud.configure({id:Ut.PLAYING,isVisible:!1})},t.prototype.replayLevel=function(){this.startLevel()},t.prototype.nextLevel=function(){this.gameModel.level===this.config.levels.length?this.showGameComplete():(this.gameModel.levelUp(),this.playLevel())},t.prototype.showGameEnd=function(t){var e=t.time;this.game.sounds.dimBackgroundMusic(!1),this.gameModel.saveLevelTime(e)&&this.game.track("NEW_HIGH_SCORE"),this.stateController.startState({nextState:S,nextStateParams:[!0,!1],levelData:this.game.cache.getJSON("level_"+Q(this.gameModel.level,2))}),this.hud.configure({id:Ut.GAMEEND,isVisible:!1})},t.prototype.showGameOver=function(){this.game.sounds.dimBackgroundMusic(!1),this.stateController.startState({nextState:T,nextStateParams:[!0,!1]}),this.hud.configure({id:Ut.GAMEEND,isVisible:!1})},t.prototype.quitGame=function(){this.hud.deactivate(),this.gameModel.reset(),this.showWelcomeScreen()},t.prototype.restartGame=function(){this.gameModel.reset(),this.startNewGame()},t.prototype.pauseGame=function(){this.hud.disable(),setTimeout(this.showPauseScreenHud.bind(this),250)},t.prototype.showPauseScreenHud=function(){this.uiModel.setPaused(!0),this.hud.enable(),this.hud.activate({id:Ut.PAUSE,isModal:!0}),this.game.track("VIEW_SCREEN_PAUSE"),this.hud.showGamePause()},t.prototype.resumeGame=function(){this.hud.configure({id:Ut.PLAYING}),this.hud.closeGamePause(),this.uiModel.setPaused(!1)},t.prototype.restartLevel=function(){this.resumeGame(),this.startLevel()},t.prototype.showGameCredits=function(){this.hud.closeGamePause(),this.hud.activate({id:Ut.PAUSE,isModal:!0}),this.hud.showGameCredits()},t.prototype.closeGameCredits=function(){this.hud.closeGameCredits(),this.hud.activate({id:Ut.PAUSE,isModal:!0}),this.hud.showGamePause()},Ci(t,[{key:"configModel",get:function(){return this.config}},{key:"gameModel",get:function(){return this._gameModel}}]),t}();var Ti=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=e}return t.prototype.getBaseDirectory=function(){return"./"},t.prototype.resolveRelatveUrl=function(t){return this.getBaseDirectory()+t},t.prototype.getAssetsDirectory=function(t){return t?this.resolveRelatveUrl("assets/"+t):this.resolveRelatveUrl("assets/")},t.prototype.getFontsDirectory=function(t){return this.getAssetsDirectory("fonts/"+t)},t}();var xi=function(){function t(e){var i=e.game,n=e.isMuted,o=void 0!==n&&n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=i,this.sounds={},this.sprites={},this._allowMusic=!o,this._allowEffects=!o,this.backgroundMusic={id:et,volume:t.TITLEMUSIC_VOLUME},Object.defineProperty(this,"allowMusic",{get:function(){return this._allowMusic},set:function(t){this._allowMusic=t,this._allowMusic?this.playBackgroundMusic():this.pauseBackgroundMusic()}}),Object.defineProperty(this,"allowEffects",{get:function(){return this._allowEffects},set:function(t){for(var e in this._allowEffects=t,this.sounds)e!=this.backgroundMusic.id&&(this.sounds[e].mute=0==this._allowEffects)}})}return t.prototype.touchLock=function(){this.game.sound.usingWebAudio&&"suspended"===this.game.sound.context.state&&(console.info("AudioContext is suspended"),this.game.sound.setTouchLock(),this.isTouchLocked=!0)},t.prototype.checkAudioContext=function(){var t=this;this.isTouchLocked&&this.game.sound.usingWebAudio&&(console.info("AudioContext attempting resume"),this.game.sound.context.resume().then(function(){console.info("AudioContext resumed successfully"),t.isTouchLocked="suspended"===t.game.sound.context.state}))},t.prototype.addSounds=function(t){var e=t,i=Array.isArray(e),n=0;for(e=i?e:e[Symbol.iterator]();;){var o;if(i){if(n>=e.length)break;o=e[n++]}else{if((n=e.next()).done)break;o=n.value}var a=o;this.addSound(a,a)}},t.prototype.addSound=function(t,e){this.sounds[t]=this.game.add.audio(e)},t.prototype.addAudioSprites=function(t){var e=t,i=Array.isArray(e),n=0;for(e=i?e:e[Symbol.iterator]();;){var o;if(i){if(n>=e.length)break;o=e[n++]}else{if((n=e.next()).done)break;o=n.value}var a=o;this.addAudioSprite({id:a})}},t.prototype.addAudioSprite=function(t){var e=t.id;this.sprites[e]=this.game.add.audioSprite(e)},t.prototype.audioSpritesAreDecoded=function(){var t=this.sprites,e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var n;if(e){if(i>=t.length)break;n=t[i++]}else{if((i=t.next()).done)break;n=i.value}var o=n.sounds,a=Array.isArray(o),s=0;for(o=a?o:o[Symbol.iterator]();;){var r;if(a){if(s>=o.length)break;r=o[s++]}else{if((s=o.next()).done)break;r=s.value}if(!r.isDecoded)return!1}}return!0},t.prototype.sfxExists=function(t,e){var i=this.sprites[e]&&this.sprites[e].sounds[t];return i||console.warn("Cant find "+t+" in audiosprite "+e+", has it been added? (config.json and assetpack)"),i},t.prototype.playSFX=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{volume:1,loop:!1,delay:null,onComplete:null,onCompleteScope:null,spriteID:"games_sfx_base"},i=e.volume,n=e.loop,o=void 0!==n&&n,a=e.ignoreIfPlaying,s=void 0!==a&&a,r=e.delay,h=void 0===r?null:r,l=e.onComplete,c=void 0===l?null:l,u=e.onCompleteScope,p=void 0===u?null:u,d=e.spriteID,f=void 0===d?"games_sfx_base":d;if(this.sprites[f]&&"games_sfx_base"===f&&this.sprites[f].sounds[t],h)return e.delay=null,this.game.time.events.add(h,this.playSFX,this,t,e).autoDestroy=!0,!0;if(this._allowEffects&&!this.isTouchLocked){if(!this.sfxExists(t,f))return!1;if(s&&this.sprites[f].get(t).isPlaying)return!1;this.sprites[f].get(t).loop=o,this.sprites[f].get(t).markers[t].loop=o,this.sprites[f].play(t,i),c&&this.sprites[f].sounds[t].onStop.addOnce(c,p)}else{if(!c)return!1;var g=new Phaser.Signal;g.addOnce(c,p),g.dispatch()}return!0},t.prototype.stopSFX=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{spriteID:"games_sfx_base"}).spriteID,i=void 0===e?"games_sfx_base":e;this.sprites[i]&&"games_sfx_base"===i&&(this.sprites[i].sounds[t]||(i=GAME_SFX_EXTRA)),this.sfxExists(t,i)&&this.sprites[i].stop(t)},t.prototype.stopAllSFX=function(){for(var t in this.sprites)this.sprites[t].stop()},t.prototype.stopBackgroundMusic=function(){var t=this.backgroundMusic.id;this.stopSound(t)},t.prototype.playBackgroundMusic=function(){var t=this.backgroundMusic,e=t.id,i=t.volume,n=this.sounds[e];n&&this.game.hud.isWelcomeScreen()&&this._allowMusic&&(n.paused||n.isPlaying?n.paused&&(n.volume=0,n.resume(),n.fadeTo(500,i)):(this.backgroundAudio=n.play("",0,0,!0),n.volume=i))},t.prototype.dimBackgroundMusic=function(t){var e=this.backgroundMusic,i=e.id,n=e.volume,o=this.sounds[i];o.volume=t?n/4:n},t.prototype.pauseBackgroundMusic=function(){var t=this.backgroundMusic.id;if(this.game.hud.isWelcomeScreen()){var e=this.sounds[t];e&&e.pause()}},t.prototype.stopSound=function(t){this.sounds[t]&&(this.sounds[t].pausedPosition=0,this.sounds[t].stop())},t.prototype.isSoundPlaying=function(t){return!!this.sounds[t]&&this.sounds[t].isPlaying},t.prototype.stopAllSounds=function(){for(var t in this.sounds)this.sounds[t].stop()},t.prototype.setVolume=function(t,e){this.backgroundMusic.id==t?(this.backgroundMusic.volume=e,this.sounds[t].fadeTo(1e3,e)):this.sounds[t].volume=e},t}(),Ei=xi;xi.TITLEMUSIC_VOLUME=.1;var ki=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};var Oi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.copy={};for(var i=e.getElementsByTagName("item"),n=0;n<i.length;n++)this.copy[i[n].getAttribute("id")]=i[n].childNodes[0].nodeValue}return t.prototype.getCopy=function(t){return this.copy[t]||"copy not found [ "+t+" ]"},t.prototype.getCopyNoDefault=function(t){return this.copy[t]||null},t.prototype.createFontStyle=function(t){var e=t.font,i=t.font_size,n=t.font_colour,o=t.options,a=void 0===o?{}:o;return ki({font:i+"px "+e,fill:n,boundsAlignH:a.boundsAlignH||"center",boundsAlignV:a.boundsAlignV||"middle"},a)},t}();var Ai=function(){function t(e){var i=e.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=i,this.is3by4=!1}return t.prototype.updateGameSize=function(){if(this.game.scale)if(window.innerWidth<window.innerHeight){var t=window.innerHeight/window.innerWidth;if(t>.75){var e=Math.max(.75*this.game.defaultHeight,Math.min(this.game.defaultHeight,this.game.defaultWidth*t));this.is3by4=!0,this.game.scale.setGameSize(this.game.defaultWidth,e)}else this.game.scale.setGameSize(this.game.defaultWidth,this.game.defaultHeight),this.is3by4=!1}else this.game.scale.setGameSize(this.game.defaultWidth,this.game.defaultHeight),this.is3by4=!1},t}();var Pi=function(){function t(e){var i=e.game,n=e.activate;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.game=i,this.bindedHandleWindowResize=this.handleWindowResize.bind(this),this.bindedWindowBlur=this.handleWindowBlur.bind(this),this.bindedWindowFocus=this.handleWindowFocus.bind(this),this.bindedVisibilityChange=this.handleVisibilityChange.bind(this),n&&this.activate()}return t.prototype.activate=function(){window.addEventListener("resize",this.bindedHandleWindowResize),window.addEventListener("blur",this.bindedWindowBlur),window.addEventListener("focus",this.bindedWindowFocus),window.addEventListener("visibilitychange",this.bindedVisibilityChange)},t.prototype.deactivate=function(){window.removeEventListener("resize",this.bindedHandleWindowResize),window.removeEventListener("blur",this.bindedWindowBlur),window.removeEventListener("focus",this.bindedWindowFocus),window.removeEventListener("visibilitychange",this.bindedVisibilityChange)},t.prototype.handleWindowBlur=function(){},t.prototype.handleWindowFocus=function(){},t.prototype.handleVisibilityChange=function(){},t.prototype.handleWindowResize=function(){this.game.aspectController.updateGameSize()},t}(),Di=function(t){var e=t.reduce(function(t,e,i){return t.push(e.label),t},[]),i=t.reduce(function(t,e,i){return[].concat(t,e.output)},[]),n=Ri(i);n.labelMax=Ii(e);var o=t,a=Array.isArray(o),s=0;for(o=a?o:o[Symbol.iterator]();;){var r;if(a){if(s>=o.length)break;r=o[s++]}else{if((s=o.next()).done)break;r=s.value}var h=r;h.limits=n,Li(h)}},Li=function(t){var e,i=t.label,n=t.output,o=t.limits,a='font-family: monospace; src: local("Menlo");',s=a+"background-color:red; font-weight: bold; padding:3px 10px; color:white",r=['font-family: monospace; src: local("Menlo");background-color:gainsboro; padding:3px 6px 3px 12px; color:black','font-family: monospace; src: local("Menlo");background-color:palegreen; font-weight: bold; padding:3px 6px; color:black'],h=o||Ri(n),l="%c"+ji(i,o.labelMax)+Mi(n,h),c=n.reduce(function(t,e,i){return[].concat(t,r)},[]);(e=console).info.apply(e,[l,s].concat(c))},Ii=function(t){return t.reduce(function(t,e,i){return t=Math.max(t,e.toString().length)},0)},Ri=function(t){return t.reduce(function(t,e,i){return t.key=Math.max(t.key,e.key.toString().length),t.val=Math.max(t.val,e.val.toString().length),t},{key:0,val:0})},Mi=function(t,e){return t.reduce(function(t,i,n){return t+="%c"+Gi(i.key,e.key)+"%c"+ji(i.val,e.val)},"")},Gi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return""+" ".repeat(Math.max(e-t.toString().length,0))+t},ji=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return""+t+" ".repeat(Math.max(e-t.toString().length,0))},Ni=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var Hi=function(t){function e(i){var n=i.width,o=i.height,a=i.type,s=i.parent,r=void 0===s?l:s,h=i.settings,g=i.deviceController;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var E=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,o,a,r,null,!0)),k=document.getElementById(r);k&&(k.className=c),E.defaultWidth=u,E.defaultHeight=p,E.offsetWidth=0,E.offsetHeight=0,E._screenPaddingY=Math.max(E.width,E.height)*f,E._screenPaddingX=Math.max(E.width,E.height)*d,E._hud=new Ut(E),E._controller=new Si({game:E,settings:h,hud:E._hud,deviceController:g}),E._sounds=new Ei({game:E,isMuted:h.getIsMuted()}),E._aspectController=new Ai({game:E}),E._windowEventController=new Pi({game:E,activate:!0}),E._urls=new Ti(E),E._settings=h,E._deviceController=g,E.state.add(m,Y,!1),E.state.add(y,X,!1),E.state.add(w,qt,!1),E.state.add(_,ie,!1),E.state.add(b,xe,!1),E.state.add(v,Ee,!1),E.state.add(C,Ae,!1),E.state.add(S,Pe,!1),E.state.add(T,De,!1),E.state.add(x,Re,!1);var O=["AUTO","CANVAS","WEBGL","WEBGL_MULTI","HEADLESS"][E.renderType]||"UNKNOWN",A=[{key:"Is old:",val:g.requiresLightVersion},{key:"Transitions:",val:g.allowTransitionTweens},{key:"Load type:",val:g.gameLoadType},{key:"Renderer:",val:O}];Di([{label:"Webpack",output:[{key:"DEBUG:",val:!0},{key:"WATCH:",val:!1},{key:"SHORTCUTS:",val:!0},{key:"Node Env:",val:"production"}]},{label:"Device",output:A}]),E.controller.startBoot();var P=document.createElement("script");return P.type="text/javascript",P.src="//www.wisetrack.net/js2_detect.php?tracking_id="+W+"&country="+z,document.getElementsByTagName("head")[0].appendChild(P),E}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.addCopy=function(t){this._copy=new Oi(t)},e.prototype.track=function(t){window.WiseTrack&&window.WiseTrack.track(t)},e.prototype.log=function(t){var e="color: orange; font-weight: bold";if(-1!==t.indexOf("Starting Game"))console.log("\n%c"+t,e,"\n ");else{for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];if(n){var a,s=[];n.forEach(function(t){s.push(t),s.push("\n")}),(a=console).log.apply(a,["\n%c"+t,e,"\n\n"].concat(s,["\n "]))}else console.log("\n%c"+t,e,"\n ")}},Ni(e,[{key:"settings",get:function(){return this._settings}},{key:"deviceController",get:function(){return this._deviceController}},{key:"hud",get:function(){return this._hud}},{key:"copy",get:function(){return this._copy}},{key:"controller",get:function(){return this._controller}},{key:"sounds",get:function(){return this._sounds}},{key:"aspectController",get:function(){return this._aspectController}},{key:"windowEventController",get:function(){return this._windowEventController}},{key:"urls",get:function(){return this._urls}},{key:"screenPaddingY",set:function(t){this._screenPaddingY=t},get:function(){return this._screenPaddingY}},{key:"screenPaddingX",set:function(t){this._screenPaddingX=t},get:function(){return this._screenPaddingX}}]),e}(Phaser.Game),Bi=i(0),Fi=i.n(Bi);var Wi=null,zi=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Wi||(this._storageIsAllowed=Fi.a.canUse(),this._storageIsAllowed||console.warn("LOCAL STORAGE DISABLED"),this._loadLocalData(),Wi=this),Wi}return t.prototype.destroy=function(){Wi=null},t.prototype.toggleAudio=function(){var t=!this.getAudio();return this._setAudio(t),{isMuted:!t}},t.prototype.setAudio=function(t){this._setAudio(t)},t.prototype.getAudio=function(){return this.getAllSettings().audio},t.prototype.getIsMuted=function(){return!this.getAllSettings().audio},t.prototype.getAllSettings=function(){var t=JSON.parse(JSON.stringify(this.globalSettings));return t.audio=!t.muted,this._isStorageAllowed()?t.gameData=this.gameSettings:console.warn("getAllSettings : storage disabled"),t},t.prototype.setGameData=function(t,e){this._isStorageAllowed()?(this.gameSettings[t]=e,Fi.a.set("dennisGAME",JSON.stringify(this.gameSettings))):console.warn("setGameData : storage disabled")},t.prototype._setAudio=function(t){this.globalSettings.muted=!t,this._saveGlobalSettings()},t.prototype._loadLocalData=function(){this._isStorageAllowed()&&(this.globalSettings=this._parseLocalStorage("dennisUI"),this.gameSettings=this._parseLocalStorage("dennisGAME")||{},this.globalSettings||(this.globalSettings=this._getDefaultSettings(),this._saveGlobalSettings()))},t.prototype._saveGlobalSettings=function(){this._isStorageAllowed()&&Fi.a.set("dennisUI",JSON.stringify(this.globalSettings))},t.prototype._isStorageAllowed=function(){return this._storageIsAllowed},t.prototype._getDefaultSettings=function(){var t={muted:!1};return t},t.prototype._parseLocalStorage=function(t){var e=Fi.a.get(t);try{return JSON.parse(e)}catch(t){}return null},t}(),Ui=function(t,e){void 0===t&&console.error("Library Missing :\t",e)};Ui(o.a,"PIXI"),Ui(s.a,"p2"),Ui(h.a,"Phaser");var Vi=new fi;U.settings=new zi({}),U.deviceController=Vi,U.type=Vi.getAppRenderTpye(),window.app=new Hi(U)},,,,,,,function(t,e,i){},function(t,e,i){t.exports=i(8)}],[[16,0]]]);