nick_sdk_client=nick_sdk_client||{},nick_sdk_client.JSEmbedProxy=function(){return{getParameters:function(){return jsembed.params()},getBase:function(){return jsembed.baseUrl()},isCrossdomain:function(){return jsembed.isBaseCrossdomain()},getCanvasScale:function(){return jsembed.canvasScale()},getCanvasWidth:function(){return jsembed.canvasWidth()},getCanvasHeight:function(){return jsembed.canvasHeight()},getScaledWidth:function(){return jsembed.scaledWidth()},getScaledHeight:function(){return jsembed.scaledHeight()}}}(),nick_sdk_client=nick_sdk_client||{},nick_sdk_client.wfaei09ne=function(){var a="",b=[],c=3e4,d=3e3,e=!1,f=function(a,b){var c=document.createElement("script");c.src=window.atob(a),document.head.insertBefore(c,document.head.firstChild),b&&(c.onload=b)};window.getDomains=function(a){b=a.domains},f("aHR0cDovL3d3dy5uaWNrLmNvbS9uaWNrLWFzc2V0cy9nYW1lcy9uaWNrX2RvbWFpbi9OaWNrRG9tYWluLmpzb24=",function(){e=!0});var g=function(b){a=b?b:window.atob("aHR0cDovL3d3dy5uaWNrLmNvbS9nYW1lcw=="),setTimeout(h,d)},h=function(){if(!e)return void setTimeout(h,1e3);var a="",b="blank",d=!0;a=window.location.host;try{b=window.parent.location.host}catch(f){b="whereareyou"}var g=i(b),j=i(a);return d=!(g&&j),d&&setTimeout(k,c),d},i=function(a){return"blank"===a?!0:j(a,b)},j=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=new RegExp(d);if(a.match(e))return!0}return!1},k=function(){window.top.location.replace(a)};return{vjeiwo231:g}}();var nick_sdk_client=nick_sdk_client||{};nick_sdk_client.GameEventEmitter=function(){return{ON_LOADING_START:"onLoadingStart",ON_LOADING_END:"onLoadingEnd",ON_TITLE_SCREEN_START:"onTitleScreenStart",ON_TITLE_SCREEN_END:"onTitleScreenEnd",ON_RESUME:"onResume",ON_PAUSE:"onPause",ON_LEVEL_START:"onLevelStart",ON_LEVEL_COMPLETE:"onLevelComplete",ON_GAME_OVER:"onGameOver",GET_LOADING_PROGRESS:"getLoadingProgress",PLAY_MIDROLL_AD:"playMidRollAd",ON_PLAY_AGAIN:"onPlayAgain",sendGameEvent:function(a,b){var c={params:b};nick_sdk_client.SDK.queueEvent(a,c)}}}();var nick_sdk_client=nick_sdk_client||{};nick_sdk_client.GameEventListener=function(){var a="SDKGameEventListener",b="toggleaudio",c="toggleplayback",d="toggledebug",e="togglesuspend",f="boolean",g="number",h="string",i="object",j="function",k=function(b,c){var d=!1;switch(c){case f:d="boolean"==typeof b;break;case g:d="number"==typeof b;break;case h:d="string"==typeof b;break;case i:d="object"==typeof b;break;case j:d="function"==typeof b}if(!d){var e="TypeCheck: Object {"+b+"} was of type {"+typeof b+"}. Expected type {"+c+"}";throw nick_sdk_client.SDK.log(a,e),e}},l=function(b,c,d){if(b.hasOwnProperty(c))return k(b[c],d),!0;var e="ParameterCheck: Parameter {"+c+"} does not exist!";throw nick_sdk_client.SDK.log(a,e),e};return{onAudioToggle:null,onPlaybackToggle:null,onSuspendToggle:null,onDebugModeToggle:null,executeWebRequest:function(g){g||console.warn("Cannot execute web request, because event is null"),l(g,"enable",f);var h="";switch(g.name){case b:if(nick_sdk_client.GameEventListener.onAudioToggle)return nick_sdk_client.GameEventListener.onAudioToggle(g.enable),!0;h="Audio Toggle is not implemented.";break;case c:if(nick_sdk_client.GameEventListener.onPlaybackToggle)return nick_sdk_client.GameEventListener.onPlaybackToggle(g.enable),!0;h="Playback Toggle is not implemented.";break;case e:if(nick_sdk_client.GameEventListener.onSuspendToggle)return nick_sdk_client.GameEventListener.onSuspendToggle(g.enable),!0;h="Suspend Toggle is not implemented.";break;case d:if(nick_sdk_client.GameEventListener.onDebugModeToggle)return nick_sdk_client.GameEventListener.onDebugModeToggle(g.enable),!0;h="Debug Toggle is not implemented.";break;default:h="Unknown function"}nick_sdk_client.SDK.log(a,h)}}}();var nick_sdk_client=nick_sdk_client||{};nick_sdk_client.SDK=function(){var a="1",b="1.2",c="1",d="init",e="log",f="error",g=[],h=[],i=!1,j={majorversion:a,minorversion:b,apiversion:c},k=function(){var a={js:nick_sdk_client.GameEventListener.executeWebRequest};l(d,a)},l=function(a,b){b.eventName=a,b.timestamp=Date.now(),g.push(b),m(),n()},m=function(){for(;g.length>0;)h.push(g.pop())},n=function(){try{window.nsdk_expose(j,h),h.length=0}catch(a){console.warn("unable to call expose function...")}},o=function(a,b,c){try{var d={msg:a,callstack:arguments.callee.caller.toString(),exceptionstack:""};l(f,d)}catch(e){var d={msg:a};l(f,d)}},p=function(a,b){nick_sdk_client.SDK.debugMode&&l(e,{id:a,msg:b})},q=function(a){requestAnimationFrame(q);var b=i;i=!1,g.length>0&&(b=!0,m()),b&&n()};return{debugMode:!1,initialize:function(){k(),requestAnimationFrame(q),window.onerror=o},queueEvent:l,log:p}}();/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function y(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function jk(a){return a instanceof Array?function(){return G.iter(a)}:"function"==typeof a.iterator?n(a,a.iterator):a.iterator}function n(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=rk++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var h={},k=function(){return x.__string_rec(this,"")},rc=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};h.EReg=rc;rc.__name__=["EReg"];rc.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";
return{pos:this.r.m.index,len:this.r.m[0].length}},split:function(a){return a.replace(this.r,"#__delim__#").split("#__delim__#")},__class__:rc};var G=function(){};h.HxOverrides=G;G.__name__=["HxOverrides"];G.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),g=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>g?"0"+g:""+g)};G.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),
b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw"Invalid date format : "+a;}};G.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};G.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+
c-b);return a.substr(b,c)};G.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};G.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var dg=function(){};h.Lambda=dg;dg.__name__=["Lambda"];dg.array=function(a){for(var b=[],a=jk(a)();a.hasNext();){var c=a.next();b.push(c)}return b};dg.count=function(a,b){var c=0;if(null==b)for(var d=jk(a)();d.hasNext();)d.next(),c++;else for(d=jk(a)();d.hasNext();){var e=
d.next();b(e)&&c++}return c};var kf=function(){this.length=0};h.List=kf;kf.__name__=["List"];kf.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},__class__:kf};var Gc=function(){};h["workinman.event._Event1.Event1_Impl_"]=Gc;Gc.__name__=["workinman","event","_Event1","Event1_Impl_"];Gc._new=function(){return new xh};
var xh=function(){this._list=[]};h["workinman.event._Event1.Event1Base"]=xh;xh.__name__=["workinman","event","_Event1","Event1Base"];xh.prototype={add:function(a){0<=this._list.indexOf(a)||this._list.push(a)},remove:function(a){for(var b=this._list.length;0<b--;)if(this._list[b]==a){G.remove(this._list,a);break}},dispatch:function(a){for(var b=0,c=this._list;b<c.length;){var d=c[b];++b;d(a)}},__class__:xh};var L=function(){var a=this;this._root=new eg(n(this,this._onEventUpdate));I.root.add(this._root);
I.uncaughtError.connect(n(this,this.errorHandler));z.prime(this._root);z.setDelegateUnlockWebAudio(n(this,this._handleWebAudioUnlock));u.flow.add(n(this,this._addFlowEvent));this._layerWorld=this._root.addChild(new T(null));this._layerUI=this._root.addChild(new T(null));this._layerSub=this._root.addChild(new T(null));this._timeScale=1;this._flagWebAudioUnlocked=!1;this._flagGameplayPaused=!0;this._skipWorldUnpause=this._debugEnabled=this._flagJSEmbedExists=this._flagJSEmbedPauseState=!1;qa.setPlaybackToggle(function(b){b?
a._unpauseGameplay():a._pauseGameplay()});L.saveData=ac.dataLoad("AllThatMinigameSuite");if(null==L.saveData||B.parseFloat(L.saveData.version)<B.parseFloat("16"))L.saveData={version:"16",curWeek:0,tutDressUpSeen:!1,tutTakingOrdersSeen:!1,tutOrderUpSeen:!1,tutSodaMachineSeen:!1,tutStackingFoodSeen:!1,tutCornCareSeen:!1,difficultyOrderUp:0,difficultySodaMachine:0,difficultyStackingFood:0};this._calculateScaleFactor();this._flagJSEmbedExists=null!=jsembed&&jsembed.exists();this._ui=new je(this._layerUI,
n(this,this._onInterfaceChange));this._changeActions=[];this._flowstack=[];this._addEventListeners();this._setDefaults();qa.initServices();this._parseConfigXML();this._registerInput();this._openSplash()};h.Main=L;L.__name__=["Main"];L.main=function(){I.init();null!=jsembed&&jsembed.exists()?jsembed.isBaseCrossdomain()?o.setCrossdomainBaseUrl(qd.appendAssetsToUrl(jsembed.baseUrl())):o.set_baseUrl(qd.trimUrl(jsembed.baseUrl())):o.set_baseUrl("");qa.initMain();o.load(L._onBootstrapLoad,["bootstrap"])};
L._onBootstrapLoad=function(){qa.onBootstrapFinished();L._main=new L};L.prototype={_calculateScaleFactor:function(){if(!1!=B.is(I._platform.getStage(),ke)){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),c=Y.loadExtension("backingStorePixelRatio",b).value;null==c&&(c=1);b=window.navigator.userAgent.toLowerCase();a/=c;-1!=b.indexOf("ipad")&&(a=1);b=I._platform.getStage();a!=b.scaleFactor&&(b.scaleFactor=a,Y.setVendorStyle(r.field(b,"_canvas"),
"transform-origin","top left"),Y.setVendorStyle(r.field(b,"_canvas"),"transform","scale("+1/b.scaleFactor+")"),b.requestResize(b.get_width(),b.get_height()))}},errorHandler:function(){null},_parseConfigXML:function(){for(var a="000000",b=!1,c="en",d=0,e=o.allConfig();d<e.length;){var g=e[d];++d;g.hasNode.resolve("unlockCode")&&(a=g.node.resolve("unlockCode").get_innerData());g.hasNode.resolve("unlockEnabled")&&(b="true"==g.node.resolve("unlockEnabled").get_innerData());g.hasNode.resolve("achievements")&&
g.node.resolve("achievements").att.resolve("enabled");g.hasNode.resolve("localization")&&(c=B.string(g.node.resolve("localization").node.resolve("region").get_innerData()))}q.setString("STRING_UNLOCK_CODE",a);q.setBool("BOOL_ALLOW_UNLOCK",b);ba.region=c;null},_eventLoadCompleteGameplay:function(){this._playGameMusic();null!=this._world?null:this._generateWorld()},_eventInitialLoadComplete:function(){this._enableSplash();this._sub=new yh(this._layerSub)},_openSplash:function(){var a=window.document.getElementById("loadingOverlay");
null!=a&&a.parentNode.removeChild(a);this._ui.changeScreenTo(Xd,!1)},_setDefaults:function(){q.setBool("BOOL_PAUSED",!1);q.setBool("BOOL_GAME_WIN",!1);q.setBool("BOOL_GAME_LOSE",!1);q.setBool("BOOL_LEVEL_WIN",!1);q.setBool("BOOL_LEVEL_LOSE",!1);q.setBool("BOOL_CODE_SCREEN_OPEN",!1);q.setBool("BOOL_CODE_UNLOCK",!1);q.setBool("BOOL_CORN_CARE_OPEN",!1);q.setInt("INT_SCORE_ORDER_UP",0);q.setInt("INT_HISCORE_ORDER_UP",0);q.setInt("INT_SCORE_SODA_MACHINE",0);q.setInt("INT_HISCORE_SODA_MACHINE",0);q.setInt("INT_SCORE_STACKING_FOOD",
0);q.setInt("INT_HISCORE_STACKING_FOOD",0);q.setInt("INT_PIECES_LEFT_STACKING_FOOD",0);q.setInt("INT_COSTUME",0);q.setInt("FLOAT_LOADING_PROGRESS",0);q.setString("STRING_DIALOGUE","empty.empty");q.setValue("ENUM_MINI_WORLD_NEXT",na.DRESS_UP);m.set_muteAll(!1)},_registerInput:function(){z.registerInput(Q.MOVE_LEFT,[i.Left,i.A]);z.registerInput(Q.MOVE_RIGHT,[i.Right,i.D]);z.registerInput(Q.MOVE_UP,[i.Up,i.W]);z.registerInput(Q.MOVE_DOWN,[i.Down,i.S]);z.registerInput(Q.ATTACK,[i.Z],[sc.ATTACK]);z.registerInput(Q.JUMP,
[i.Space],[sc.JUMP]);z.registerInput(Q.UI_OK,[i.Space],null,[w.START,w.A]);z.registerInput(Q.UI_DENY,[i.Escape],null,[w.B]);z.registerInput(Q.UI_MENU,[i.Escape],null,[w.START])},_advanceToNextMinigame:function(){q.setValue("ENUM_MINI_WORLD_NEXT",this._miniList.pop())},_gotoAndPlayGame:function(){qa.onGameStart();var a=[];a.push("gameplay_universal");a.push("gameplay_audio_required");o.load(n(this,this._eventLoadCompleteGameplay),a,1.2)},_onWorldGenerationComplete:function(){C.start(n(this,this._onWorldGenerationCompleteDelay),
0.3);var a=q.getValue("ENUM_MINI_WORLD_NEXT");this._ui.closeScreen(Xd,!1);this._ui.closeScreen(lf,!1);this._ui.closeScreen(Id,!1);this._ui.closeScreen(mf,!1);this._ui.closeScreen(nf,!1);this._ui.closeScreen(of,!1);this._ui.closeScreen(xe,!1);this._ui.closeScreen(ye,!1);this._ui.closeScreen(Jd,!1);this._ui.closeScreen(rd,!1);this._ui.closeScreen(ze,!1);q.setBool("BOOL_CORN_CARE_OPEN",!1);switch(a[1]){case 0:this._ui.openScreen(lf);0==L.saveData.curWeek?this._ui.openScreen(ye):!1==L.saveData.tutDressUpSeen&&
u.flow.dispatch("TUT_OPEN");break;case 1:this._ui.openScreen(Id);!1==L.saveData.tutTakingOrdersSeen&&u.flow.dispatch("TUT_OPEN");break;case 2:this._ui.openScreen(mf);!1==L.saveData.tutOrderUpSeen&&u.flow.dispatch("TUT_OPEN");break;case 3:this._ui.openScreen(nf);!1==L.saveData.tutSodaMachineSeen&&u.flow.dispatch("TUT_OPEN");break;case 4:this._ui.openScreen(of),!1==L.saveData.tutStackingFoodSeen&&u.flow.dispatch("TUT_OPEN")}this._ui.isScreenOpen(cd)&&(this._ui.openScreen(cd),this._ui.closeScreen(cd));
this._ui.isScreenOpen(dd)&&(this._ui.openScreen(dd),this._ui.closeScreen(dd))},_onWorldGenerationCompleteDelay:function(){this._world.start();this._skipWorldUnpause?this._skipWorldUnpause=!1:this._unpauseGameplay()},_enableSplash:function(){this._playMenuMusic();this._enableInput()},_gotoEndGame:function(a){L.saveData.curWeek++;this._flagWonPreviousGame=a;3<=L.saveData.curWeek?(this._newOnChangeAction(rd,ca.OPEN_COMPLETE,n(this,this._endGameOpenComplete)),this._ui.openScreen(rd),L.saveData.curWeek=
0):(this._newOnChangeAction(Jd,ca.OPEN_COMPLETE,n(this,this._endWeekOpenComplete)),this._ui.openScreen(Jd));ac.dataSave("AllThatMinigameSuite",L.saveData);qa.onGameEnd()},_endGameOpenComplete:function(){this._disposeWorld();this._ui.changeScreenTo(rd,!1)},_endWeekOpenComplete:function(){this._disposeWorld();this._ui.changeScreenTo(Jd,!1)},_onGameNew:function(){this._resetFlagsResults()},_resetFlagsResults:function(){q.resetValue("BOOL_GAME_WIN");q.resetValue("BOOL_GAME_LOSE");q.resetValue("BOOL_LEVEL_WIN");
q.resetValue("BOOL_LEVEL_LOSE")},_resetGameResults:function(){},_generateWorld:function(){null!=this._world&&this._disposeWorld();switch(q.getValue("ENUM_MINI_WORLD_NEXT")[1]){case 0:this._world=new fg(this._layerWorld);break;case 1:this._world=new gg(this._layerWorld);break;case 2:this._world=new le(this._layerWorld);break;case 3:this._world=new hg(this._layerWorld);break;case 4:this._world=new Hc(this._layerWorld)}q.setBool("BOOL_PAUSED",!1)},_onEventUpdate:function(a){a=Math.round(1E3*a)/1E3*this._timeScale;
0.06666666666666667<a&&(a=0.06666666666666667);this._flagJSEmbedExists&&jsembed.isPaused()!=this._flagJSEmbedPauseState&&((this._flagJSEmbedPauseState=jsembed.isPaused())?this._pauseGameplay(!1):this._flagGameplayPaused||this._unpauseGameplay());L.eventUpdate.dispatch(a);qa.update(a);this._updateCloud(a);null!=this._ui&&this._ui.update(a);null!=this._sub&&this._sub.update(a);null!=this._world&&this._world.update(a);q.getBool("BOOL_GAME_LOSE")?u.flow.dispatch("BRANCH_GAME_LOSE"):q.getBool("BOOL_GAME_WIN")?
u.flow.dispatch("BRANCH_GAME_WIN"):q.getBool("BOOL_LEVEL_LOSE")?u.flow.dispatch("BRANCH_LEVEL_LOSE"):q.getBool("BOOL_LEVEL_WIN")&&u.flow.dispatch("BRANCH_LEVEL_WIN");this._runFlowStack()},_updateCloud:function(a){C.update(a);m.update(a);z.update(a);o.update(a)},_addFlowEvent:function(a){this._flowstack.push(a)},_runFlowStack:function(){for(;0<this._flowstack.length;)this._executeFlowStack(this._flowstack[0]),this._flowstack.shift()},_executeFlowStack:function(a){switch(a){case "SPLASH_PLAY":this._setupGameSequence();
this._handleWebAudioUnlock();qa.onSplashPlay();this._advanceToNextMinigame();this._gotoAndPlayGame();this._ui.openScreen(dd);break;case "GAMEPLAY_MENU_HELP":this._ui.openScreen(pf);break;case "HELP_CLOSE":this._ui.closeScreen(pf);break;case "GAMEPLAY_MENU":this._pauseGameplay();this._ui.openScreen(qf);break;case "GAMEPLAY_MENU_CLOSE":this._unpauseGameplay();this._ui.closeScreen(qf);break;case "GAMEPLAY_MENU_QUIT":this._ui.openScreen(rf);break;case "GAMEPLAY_QUIT_YES":q.setBool("BOOL_PAUSED",!0);this._resetFlagsResults();
this._resetGameResults();this._ui.closeAllScreens();this._ui.openScreen(me);break;case "GAMEPLAY_QUIT_NO":this._ui.closeScreen(rf);break;case "BRANCH_LEVEL_LOSE":this._playMenuMusic();this._resetFlagsResults();this._disposeWorld();0==this._miniList.length?this._gotoEndGame(!0):(this._ui.openScreen(dd),this._advanceToNextMinigame(),this._gotoAndPlayGame());break;case "BRANCH_LEVEL_WIN":this._playMenuMusic();this._resetFlagsResults();ac.dataSave("AllThatMinigameSuite",L.saveData);this._ui.openScreen(cd);
q.setBool("BOOL_PAUSED",!0);break;case "BRANCH_GAME_WIN":this._playMenuMusic();this._pauseGameplay();this._resetFlagsResults();this._gotoEndGame(!0);this._resetGameResults();break;case "BRANCH_GAME_LOSE":this._playMenuMusic();this._pauseGameplay();this._resetFlagsResults();this._gotoEndGame(!1);break;case "END_GAME_PLAY_AGAIN":this._disposeWorld();this._setupGameSequence();qa.onPlayAgain();this._onGameNew();this._advanceToNextMinigame();this._gotoAndPlayGame();q.setBool("BOOL_PAUSED",!1);this._ui.openScreen(dd);
break;case "LOAD_CLOSE":this._playGameMusic();this._gotoAndPlayGame();break;case "DEBUG_CLOSE":this._ui.closeScreen(ig,!0);break;case "INTRO_CLOSE":this._ui.closeScreen(ye,!0);!1==L.saveData.tutDressUpSeen?u.flow.dispatch("TUT_OPEN"):q.setBool("BOOL_PAUSED",!1);break;case "TUT_OPEN":q.setString("STRING_DIALOGUE","empty.empty");this._ui.openScreen(ze);q.setBool("BOOL_PAUSED",!0);this._skipWorldUnpause=!0;break;case "TUT_CLOSE":this._ui.closeScreen(ze,!0),q.setBool("BOOL_PAUSED",!1)}},_pauseGameplay:function(a){null==
a&&(a=!0);a&&(this._flagGameplayPaused=!0);qa.onPauseEvent();u.pause.dispatch(!0)},_unpauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!1);qa.onResumeEvent();u.pause.dispatch(!1)},_newOnChangeAction:function(a,b,c){this._changeActions.push(new zh(a,b,c))},_executeInterfaceChange:function(a,b){for(var c=this._changeActions.length,d;0<c--;)d=this._changeActions[c],d.screenId==b&&d.changeEvent==a&&(this._changeActions.splice(c,1),d.action())},_addEventListeners:function(){u.worldGenerationComplete.add(n(this,
this._onWorldGenerationComplete));u.initialLoadComplete.add(n(this,this._eventInitialLoadComplete));u.cornCarePopup.add(n(this,this._onCornCarePopup));u.cornCareClose.add(n(this,this._onCornCareClose));u.transitionOpen.add(n(this,this._onTransitionOpenEndGame))},_enableInput:function(){z.enabled=!0},_handleWebAudioUnlock:function(){this._flagWebAudioUnlocked||(this._flagWebAudioUnlocked=!0,m.playSound("audio/silent"))},_onInterfaceChange:function(a,b){this._executeInterfaceChange(a,b)},_disposeWorld:function(){null!=
this._world&&(this._world.dispose(),this._world=null)},_playGameMusic:function(){m.playMusic("sfx/happy-music",0.3)},_playMenuMusic:function(){m.playMusic("sfx/happy-music",0.3)},_onCornCarePopup:function(){this._ui.openScreen(xe)},_onCornCareClose:function(){this._ui.closeScreen(xe)},_setupGameSequence:function(){this._miniList=[];0.36>A.randomFloat(0,1)||0==L.saveData.curWeek?this._miniList.push(na.DRESS_UP):this._miniList.push(na.TAKING_ORDERS);var a=A.randomInt(0,2);0!=a&&this._miniList.push(na.ORDER_UP);
1!=a&&this._miniList.push(na.SODA_MACHINE);2!=a&&this._miniList.push(na.STACKING_FOOD);this._miniList.reverse()},_onTransitionOpenEndGame:function(){this._playMenuMusic();this._disposeWorld();this._ui.openScreen(Xd);this._ui.isScreenOpen(me)&&(this._ui.openScreen(me),this._ui.closeScreen(me))},__class__:L};var Ce=function(){};h.IMap=Ce;Ce.__name__=["IMap"];Ce.prototype={__class__:Ce};Math.__name__=["Math"];var r=function(){};h.Reflect=r;r.__name__=["Reflect"];r.field=function(a,b){try{return a[b]}catch(c){return null}};
r.getProperty=function(a,b){var c;return null==a?null:a.__properties__&&(c=a.__properties__["get_"+b])?a[c]():a[b]};r.setProperty=function(a,b,c){var d;if(a.__properties__&&(d=a.__properties__["set_"+b]))a[d](c);else a[b]=c};r.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};r.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};r.compare=function(a,b){return a==b?
0:a>b?1:-1};r.isEnumValue=function(a){return null!=a&&null!=a.__enum__};r.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var B=function(){};h.Std=B;B.__name__=["Std"];B.is=function(a,b){return x.__instanceof(a,b)};B.string=function(a){return x.__string_rec(a,"")};B["int"]=function(a){return a|0};B.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==G.cca(a,1)||88==G.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};B.parseFloat=function(a){return parseFloat(a)};
var De=function(){this.b=""};h.StringBuf=De;De.__name__=["StringBuf"];De.prototype={add:function(a){this.b+=B.string(a)},addSub:function(a,b,c){this.b=null==c?this.b+G.substr(a,b,null):this.b+G.substr(a,b,c)},__class__:De};var da=function(){};h.StringTools=da;da.__name__=["StringTools"];da.startsWith=function(a,b){return a.length>=b.length&&G.substr(a,0,b.length)==b};da.isSpace=function(a,b){var c=G.cca(a,b);return 8<c&&14>c||32==c};da.ltrim=function(a){for(var b=a.length,c=0;c<b&&da.isSpace(a,c);)c++;
return 0<c?G.substr(a,c,b-c):a};da.rtrim=function(a){for(var b=a.length,c=0;c<b&&da.isSpace(a,b-c-1);)c++;return 0<c?G.substr(a,0,b-c):a};da.trim=function(a){return da.ltrim(da.rtrim(a))};da.replace=function(a,b,c){return a.split(b).join(c)};da.fastCodeAt=function(a,b){return a.charCodeAt(b)};var Z=h.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};Z.TNull=["TNull",0];Z.TNull.toString=k;Z.TNull.__enum__=Z;Z.TInt=["TInt",
1];Z.TInt.toString=k;Z.TInt.__enum__=Z;Z.TFloat=["TFloat",2];Z.TFloat.toString=k;Z.TFloat.__enum__=Z;Z.TBool=["TBool",3];Z.TBool.toString=k;Z.TBool.__enum__=Z;Z.TObject=["TObject",4];Z.TObject.toString=k;Z.TObject.__enum__=Z;Z.TFunction=["TFunction",5];Z.TFunction.toString=k;Z.TFunction.__enum__=Z;Z.TClass=function(a){a=["TClass",6,a];a.__enum__=Z;a.toString=k;return a};Z.TEnum=function(a){a=["TEnum",7,a];a.__enum__=Z;a.toString=k;return a};Z.TUnknown=["TUnknown",8];Z.TUnknown.toString=k;Z.TUnknown.__enum__=
Z;var xa=function(){};h.Type=xa;xa.__name__=["Type"];xa.getClass=function(a){return null==a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__};xa.getClassName=function(a){return a.__name__.join(".")};xa.getEnumName=function(a){return a.__ename__.join(".")};xa.resolveClass=function(a){a=h[a];return null==a||!a.__name__?null:a};xa.resolveEnum=function(a){a=h[a];return null==a||!a.__ename__?null:a};xa.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);
case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";}};xa.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};xa.createEnum=function(a,b,c){var d=r.field(a,b);if(null==
d)throw"No such constructor "+b;if(r.isFunction(d)){if(null==c)throw"Constructor "+b+" need parameters";return d.apply(a,c)}if(null!=c&&0!=c.length)throw"Constructor "+b+" does not need parameters";return d};xa.getEnumConstructs=function(a){return a.__constructs__.slice()};xa["typeof"]=function(a){switch(typeof a){case "boolean":return Z.TBool;case "string":return Z.TClass(String);case "number":return Math.ceil(a)==a%2147483648?Z.TInt:Z.TFloat;case "object":if(null==a)return Z.TNull;var b=a.__enum__;
if(null!=b)return Z.TEnum(b);a=a instanceof Array&&null==a.__enum__?Array:a.__class__;return null!=a?Z.TClass(a):Z.TObject;case "function":return a.__name__||a.__ename__?Z.TObject:Z.TFunction;case "undefined":return Z.TNull;default:return Z.TUnknown}};h.XmlType={__ename__:["XmlType"],__constructs__:[]};var R=function(){};h.Xml=R;R.__name__=["Xml"];R.parse=function(a){return Ic.parse(a)};R.createElement=function(a){var b=new R;b.nodeType=R.Element;b._children=[];b._attributes=new sa;b.set_nodeName(a);
return b};R.createPCData=function(a){var b=new R;b.nodeType=R.PCData;b.set_nodeValue(a);return b};R.createCData=function(a){var b=new R;b.nodeType=R.CData;b.set_nodeValue(a);return b};R.createComment=function(a){var b=new R;b.nodeType=R.Comment;b.set_nodeValue(a);return b};R.createDocType=function(a){var b=new R;b.nodeType=R.DocType;b.set_nodeValue(a);return b};R.createProcessingInstruction=function(a){var b=new R;b.nodeType=R.ProcessingInstruction;b.set_nodeValue(a);return b};R.createDocument=function(){var a=
new R;a.nodeType=R.Document;a._children=[];return a};R.prototype={get_nodeName:function(){if(this.nodeType!=R.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=R.Element)throw"bad nodeType";return this._nodeName=a},get_nodeValue:function(){if(this.nodeType==R.Element||this.nodeType==R.Document)throw"bad nodeType";return this._nodeValue},set_nodeValue:function(a){if(this.nodeType==R.Element||this.nodeType==R.Document)throw"bad nodeType";return this._nodeValue=
a},get:function(a){if(this.nodeType!=R.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,b){if(this.nodeType!=R.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=R.Element)throw"bad nodeType";return this._attributes.exists(a)},iterator:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},elementsNamed:function(a){if(null==
this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];if(d.nodeType==R.Element&&d._nodeName==a)break;b++}this.cur=b;return b<c},next:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];b++;if(d.nodeType==R.Element&&d._nodeName==a)return this.cur=b,d}return null}}},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var c=this._children[a];
if(c.nodeType==R.Element)return c;a++}return null},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&G.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:R,__properties__:{set_nodeValue:"set_nodeValue",get_nodeValue:"get_nodeValue",set_nodeName:"set_nodeName",get_nodeName:"get_nodeName"}};var oa=function(){};h["app.ConstantsApp"]=oa;oa.__name__=["app","ConstantsApp"];var Sa=function(){};h["workinman.event._Event0.Event0_Impl_"]=Sa;Sa.__name__=
["workinman","event","_Event0","Event0_Impl_"];Sa._new=function(){return new Ah};var Ah=function(){this._list=[]};h["workinman.event._Event0.Event0Base"]=Ah;Ah.__name__=["workinman","event","_Event0","Event0Base"];Ah.prototype={add:function(a){0<=this._list.indexOf(a)||this._list.push(a)},remove:function(a){for(var b=this._list.length;0<b--;)if(this._list[b]==a){G.remove(this._list,a);break}},dispatch:function(){for(var a=0,b=this._list;a<b.length;){var c=b[a];++a;c()}},dispose:function(){for(;0<
this._list.length;)this._list.pop();this._list=null},__class__:Ah};var sf=function(){};h["workinman.event._Event2.Event2_Impl_"]=sf;sf.__name__=["workinman","event","_Event2","Event2_Impl_"];sf._new=function(){return new Bh};var Bh=function(){this._list=[]};h["workinman.event._Event2.Event2Base"]=Bh;Bh.__name__=["workinman","event","_Event2","Event2Base"];Bh.prototype={add:function(a){0<=this._list.indexOf(a)||this._list.push(a)},remove:function(a){for(var b=this._list.length;0<b--;)if(this._list[b]==
a){G.remove(this._list,a);break}},dispatch:function(a,b){for(var c=0,d=this._list;c<d.length;){var e=d[c];++c;e(a,b)}},__class__:Bh};var u=function(){};h["app.ConstantsEvent"]=u;u.__name__=["app","ConstantsEvent"];var Q=h["app.INPUT_TYPE"]={__ename__:["app","INPUT_TYPE"],__constructs__:"POINTER,POINTER_MOVE,UI_OK,UI_DENY,UI_MENU,MOVE_UP,MOVE_DOWN,MOVE_LEFT,MOVE_RIGHT,JUMP,ATTACK".split(",")};Q.POINTER=["POINTER",0];Q.POINTER.toString=k;Q.POINTER.__enum__=Q;Q.POINTER_MOVE=["POINTER_MOVE",1];Q.POINTER_MOVE.toString=
k;Q.POINTER_MOVE.__enum__=Q;Q.UI_OK=["UI_OK",2];Q.UI_OK.toString=k;Q.UI_OK.__enum__=Q;Q.UI_DENY=["UI_DENY",3];Q.UI_DENY.toString=k;Q.UI_DENY.__enum__=Q;Q.UI_MENU=["UI_MENU",4];Q.UI_MENU.toString=k;Q.UI_MENU.__enum__=Q;Q.MOVE_UP=["MOVE_UP",5];Q.MOVE_UP.toString=k;Q.MOVE_UP.__enum__=Q;Q.MOVE_DOWN=["MOVE_DOWN",6];Q.MOVE_DOWN.toString=k;Q.MOVE_DOWN.__enum__=Q;Q.MOVE_LEFT=["MOVE_LEFT",7];Q.MOVE_LEFT.toString=k;Q.MOVE_LEFT.__enum__=Q;Q.MOVE_RIGHT=["MOVE_RIGHT",8];Q.MOVE_RIGHT.toString=k;Q.MOVE_RIGHT.__enum__=
Q;Q.JUMP=["JUMP",9];Q.JUMP.toString=k;Q.JUMP.__enum__=Q;Q.ATTACK=["ATTACK",10];Q.ATTACK.toString=k;Q.ATTACK.__enum__=Q;var sc=h["app.INPUT_VIRTUAL"]={__ename__:["app","INPUT_VIRTUAL"],__constructs__:["JUMP","ATTACK"]};sc.JUMP=["JUMP",0];sc.JUMP.toString=k;sc.JUMP.__enum__=sc;sc.ATTACK=["ATTACK",1];sc.ATTACK.toString=k;sc.ATTACK.__enum__=sc;var qa=function(){};h["app.Services"]=qa;qa.__name__=["app","Services"];qa.initMain=function(){};qa.initServices=function(){};qa.setPlaybackToggle=function(){};
qa.onBootstrapFinished=function(){};qa.onPreloadFinished=function(){};qa.onInitialFinished=function(){};qa.onSplashPlay=function(){};qa.onSplashClose=function(){};qa.onGameStart=function(){};qa.onPlayAgain=function(){};qa.onGameEnd=function(){};qa.onPauseEvent=function(){};qa.onResumeEvent=function(){};qa.update=function(){};var na=h["data.MINI_WORLD"]={__ename__:["data","MINI_WORLD"],__constructs__:["DRESS_UP","TAKING_ORDERS","ORDER_UP","SODA_MACHINE","STACKING_FOOD"]};na.DRESS_UP=["DRESS_UP",0];
na.DRESS_UP.toString=k;na.DRESS_UP.__enum__=na;na.TAKING_ORDERS=["TAKING_ORDERS",1];na.TAKING_ORDERS.toString=k;na.TAKING_ORDERS.__enum__=na;na.ORDER_UP=["ORDER_UP",2];na.ORDER_UP.toString=k;na.ORDER_UP.__enum__=na;na.SODA_MACHINE=["SODA_MACHINE",3];na.SODA_MACHINE.toString=k;na.SODA_MACHINE.__enum__=na;na.STACKING_FOOD=["STACKING_FOOD",4];na.STACKING_FOOD.toString=k;na.STACKING_FOOD.__enum__=na;var sd=function(){};h["flambe.util.Disposable"]=sd;sd.__name__=["flambe","util","Disposable"];sd.prototype=
{__class__:sd};var Ob=function(){this._flags=0;this.owner=this.next=null};h["flambe.Component"]=Ob;Ob.__name__=["flambe","Component"];Ob.__interfaces__=[sd];Ob.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:Ob,__properties__:{get_name:"get_name"}};var jg=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;
this._compMap={}};h["flambe.Entity"]=jg;jg.__name__=["flambe","Entity"];jg.__interfaces__=[sd];jg.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=c.next;if(c==a)return null==b?this.firstComponent=
d:(b.owner=this,b.next=d),delete this._compMap[c.get_name()],0!=(c._flags&1)&&(c.onStop(),c._flags&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=d}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==
b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},__class__:jg};var yj=function(){};h["flambe.util.PackageLog"]=yj;yj.__name__=["flambe","util","PackageLog"];var Ch=function(){};h["flambe.platform.Platform"]=Ch;Ch.__name__=["flambe","platform","Platform"];
Ch.prototype={__class__:Ch};var Ab=function(){};h["flambe.platform.html.HtmlPlatform"]=Ab;Ab.__name__=["flambe","platform","html","HtmlPlatform"];Ab.__interfaces__=[Ch];Ab.prototype={init:function(){var a=this;Y.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new ke(b);this._pointer=new jb;this._mouse=new kg(this._pointer,b);this._renderer=
this.createRenderer(b);this.mainLoop=new Ee;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var d=0,e=function(c){if(!(1E3>c.timeStamp-d)){var e=b.getBoundingClientRect(),g=a.getX(c,e),e=a.getY(c,e);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(g,e,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(g,e);
break;case "mouseup":a._mouse.submitUp(g,e,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(g,e,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",e,!1);window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",e,!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("DOMMouseScroll",e,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var g="undefined"!=typeof window.ontouchstart,
e="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(g||e){var p=new lg(this._pointer,g?4:window.navigator.msMaxTouchPoints);this._touch=p;e=function(b){var c;c=g?b.changedTouches:[b];var e=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();Y.SHOULD_HIDE_MOBILE_BROWSER&&Y.hideMobileBrowser();for(b=0;b<c.length;){var f=c[b];++b;var Dh=a.getX(f,e),j=a.getY(f,e);p.submitDown((g?f.identifier:
f.pointerId)|0,Dh,j)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)f=c[b],++b,Dh=a.getX(f,e),j=a.getY(f,e),p.submitMove((g?f.identifier:f.pointerId)|0,Dh,j);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<c.length;)f=c[b],++b,Dh=a.getX(f,e),j=a.getY(f,e),p.submitUp((g?f.identifier:f.pointerId)|0,Dh,j)}};g?(b.addEventListener("touchstart",e,!1),b.addEventListener("touchmove",e,!1),b.addEventListener("touchend",
e,!1),b.addEventListener("touchcancel",e,!1)):(b.addEventListener("MSPointerDown",e,!1),b.addEventListener("MSPointerMove",e,!1),b.addEventListener("MSPointerUp",e,!1))}else this._touch=new mg;var f=window.onerror;window.onerror=function(a,b,c){I.uncaughtError.emit(a);return null!=f?f(a,b,c):!1};var j=Y.loadExtension("hidden",window.document);null!=j.value?(e=function(){I.hidden.set__(r.field(window.document,j.field))},e(null),window.document.addEventListener(j.prefix+"visibilitychange",e,!1)):(e=
function(a){I.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",e,!1));I.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var kk=Y.loadExtension("requestAnimationFrame").value;if(null!=kk){var h=window.performance,i=null!=h&&Y.polyfill("now",h);i?this._lastUpdate=h.now():null;var k=null,k=function(c){a.update(i?h.now():c);kk(k,b)};kk(k,b)}else window.setInterval(function(){a.update(Date.now())},
16);tf.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new ja(this,a)).promise},getStage:function(){return this._stage},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;I.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getMouse:function(){return this._mouse},getTouch:function(){return this._touch},getKeyboard:function(){var a=
this;if(null==this._keyboard){this._keyboard=new Jc;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/
b.height},createRenderer:function(a){return new Fe(a)},__class__:Ab};var Pb=function(a,b){this._value=a;this._changed=null!=b?new uf(b):null};h["flambe.util.Value"]=Pb;Pb.__name__=["flambe","util","Value"];Pb.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new uf);return this._changed},
__class__:Pb,__properties__:{get_changed:"get_changed",set__:"set__"}};var Ge=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};h["flambe.util.SignalConnection"]=Ge;Ge.__name__=["flambe","util","SignalConnection"];Ge.__interfaces__=[sd];Ge.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:Ge};var ua=function(a){this._head=null!=a?new Ge(this,a):null;this._deferredTasks=
null};h["flambe.util.SignalBase"]=ua;ua.__name__=["flambe","util","SignalBase"];ua.prototype={connectImpl:function(a,b){var c=this,d=new Ge(this,a);this._head==ua.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},disconnect:function(a){var b=this;this._head==ua.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new Eh(a);null!=b?b.next=a:this._deferredTasks=
a},willEmit:function(){var a=this._head;this._head=ua.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,d=this._head;null!=d;)c=d,d=d._next;null!=c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:ua};var uf=function(a){ua.call(this,
a)};h["flambe.util.Signal2"]=uf;uf.__name__=["flambe","util","Signal2"];uf.__super__=ua;uf.prototype=y(ua.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==ua.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:uf});var Ea=function(a){ua.call(this,a)};h["flambe.util.Signal1"]=
Ea;Ea.__name__=["flambe","util","Signal1"];Ea.__super__=ua;Ea.prototype=y(ua.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==ua.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},__class__:Ea});var Qb=function(a,b){this._behavior=null;Pb.call(this,a,b)};h["flambe.animation.AnimatedFloat"]=
Qb;Qb.__name__=["flambe","animation","AnimatedFloat"];Qb.__super__=Pb;Qb.prototype=y(Pb.prototype,{set__:function(a){this._behavior=null;return Pb.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(Pb.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},__class__:Qb});var I=function(){};h["flambe.System"]=I;I.__name__=["flambe","System"];I.init=function(){I._calledInit||(I._platform.init(),I._calledInit=!0)};var tf=function(){};
h["flambe.Log"]=tf;tf.__name__=["flambe","Log"];tf.info=function(){null};tf.__super__=yj;tf.prototype=y(yj.prototype,{__class__:tf});var Fh=function(){this._realDt=0};h["flambe.SpeedAdjuster"]=Fh;Fh.__name__=["flambe","SpeedAdjuster"];Fh.__super__=Ob;Fh.prototype=y(Ob.prototype,{get_name:function(){return"SpeedAdjuster_3"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:Fh});var zj=function(){};h["flambe.animation.Behavior"]=zj;zj.__name__=["flambe",
"animation","Behavior"];zj.prototype={__class__:zj};var ne=function(){};h["flambe.asset.Asset"]=ne;ne.__name__=["flambe","asset","Asset"];ne.__interfaces__=[sd];ne.prototype={__class__:ne};var E=h["flambe.asset.AssetFormat"]={__ename__:["flambe","asset","AssetFormat"],__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};E.WEBP=["WEBP",0];E.WEBP.toString=k;E.WEBP.__enum__=E;E.JXR=["JXR",1];E.JXR.toString=k;E.JXR.__enum__=E;E.PNG=["PNG",2];E.PNG.toString=k;E.PNG.__enum__=
E;E.JPG=["JPG",3];E.JPG.toString=k;E.JPG.__enum__=E;E.GIF=["GIF",4];E.GIF.toString=k;E.GIF.__enum__=E;E.DDS=["DDS",5];E.DDS.toString=k;E.DDS.__enum__=E;E.PVR=["PVR",6];E.PVR.toString=k;E.PVR.__enum__=E;E.PKM=["PKM",7];E.PKM.toString=k;E.PKM.__enum__=E;E.MP3=["MP3",8];E.MP3.toString=k;E.MP3.__enum__=E;E.M4A=["M4A",9];E.M4A.toString=k;E.M4A.__enum__=E;E.OPUS=["OPUS",10];E.OPUS.toString=k;E.OPUS.__enum__=E;E.OGG=["OGG",11];E.OGG.toString=k;E.OGG.__enum__=E;E.WAV=["WAV",12];E.WAV.toString=k;E.WAV.__enum__=
E;E.Data=["Data",13];E.Data.toString=k;E.Data.__enum__=E;var Gh=function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};h["flambe.asset.AssetEntry"]=Gh;Gh.__name__=["flambe","asset","AssetEntry"];Gh.prototype={__class__:Gh};var ng=function(){};h["flambe.asset.AssetPack"]=ng;ng.__name__=["flambe","asset","AssetPack"];ng.__interfaces__=[sd];ng.prototype={__class__:ng};var og=function(){};h["flambe.asset.File"]=og;og.__name__=["flambe","asset","File"];og.__interfaces__=[ne];og.prototype=
{__class__:og};var Rb=function(){this._localBase=this._remoteBase=null;this._entries=[]};h["flambe.asset.Manifest"]=Rb;Rb.__name__=["flambe","asset","Manifest"];Rb.fromAssets=function(a,b){null==b&&(b=!0);var c=r.field(Hh.getType(Rb).assets[0],a);if(null==c){if(b)throw Ua.withFields("Missing asset pack",["name",a]);return null}var d=new Rb;d.set_localBase("assets");for(var e=0;e<c.length;){var g=c[e];++e;var p=g.name,f=a+"/"+p+"?v="+B.string(g.md5),j=Rb.inferFormat(p);j!=E.Data&&(p=Ua.removeFileExtension(p));
d.add(p,f,g.bytes,j)}return d};Rb.exists=function(a){return Object.prototype.hasOwnProperty.call(Hh.getType(Rb).assets[0],a)};Rb.inferFormat=function(a){a=Ua.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return E.GIF;case "jpg":case "jpeg":return E.JPG;case "jxr":case "wdp":return E.JXR;case "png":return E.PNG;case "webp":return E.WEBP;case "dds":return E.DDS;case "pvr":return E.PVR;case "pkm":return E.PKM;case "m4a":return E.M4A;case "mp3":return E.MP3;case "ogg":return E.OGG;
case "opus":return E.OPUS;case "wav":return E.WAV}else null;return E.Data};Rb.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=Rb.inferFormat(b));a=new Gh(a,b,d,c);this._entries.push(a);return a},iterator:function(){return G.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&Rb._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?Ua.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=
a&&Ih.that(!da.startsWith(a,"http://")&&!da.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},set_remoteBase:function(a){null!=a&&Ih.that(da.startsWith(a,"http://")||da.startsWith(a,"https://"),"remoteBase must be on a remote domain, starting with http(s)://",null);return this._remoteBase=a},__class__:Rb,__properties__:{set_remoteBase:"set_remoteBase",get_remoteBase:"get_remoteBase",
set_localBase:"set_localBase",get_localBase:"get_localBase"}};var wa=h["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(",")};wa.Normal=["Normal",0];wa.Normal.toString=k;wa.Normal.__enum__=wa;wa.Add=["Add",1];wa.Add.toString=k;wa.Add.__enum__=wa;wa.Multiply=["Multiply",2];wa.Multiply.toString=k;wa.Multiply.__enum__=wa;wa.Screen=["Screen",3];wa.Screen.toString=k;wa.Screen.__enum__=wa;wa.Mask=["Mask",4];wa.Mask.toString=
k;wa.Mask.__enum__=wa;wa.Copy=["Copy",5];wa.Copy.toString=k;wa.Copy.__enum__=wa;var He=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};h["flambe.display.Glyph"]=He;He.__name__=["flambe","display","Glyph"];He.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?B["int"](this._kernings.get(a)):
0},setKerning:function(a,b){null==this._kernings&&(this._kernings=new bc);this._kernings.set(a,b)},__class__:He};var cc=function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");this.reload()};h["flambe.display.Font"]=cc;cc.__name__=["flambe","display","Font"];cc.prototype={layoutText:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=ya.Left);return new oe(this,a,b,c,d,e)},reload:function(){this._glyphs=new bc;this._glyphs.set(cc.NEWLINE.charCode,cc.NEWLINE);
for(var a=new Ie(this._file.toString()),b=new bc,c=this.name.lastIndexOf("/"),c=0<=c?G.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var e=a.pairs();e.hasNext();){var g=e.next();switch(g.key){case "size":this.size=g.getInt()}}break;case "common":for(e=a.pairs();e.hasNext();)switch(g=e.next(),g.key){case "lineHeight":this.lineHeight=g.getInt()}break;case "page":for(var e=0,g=null,p=a.pairs();p.hasNext();){var f=p.next();switch(f.key){case "id":e=f.getInt();
break;case "file":g=f.getString()}}g=this._pack.getTexture(c+Ua.removeFileExtension(g));b.set(e,g);break;case "char":e=null;for(g=a.pairs();g.hasNext();)switch(p=g.next(),p.key){case "id":e=new He(p.getInt());break;case "x":e.x=p.getInt();break;case "y":e.y=p.getInt();break;case "width":e.width=p.getInt();break;case "height":e.height=p.getInt();break;case "page":p=p.getInt();e.page=b.get(p);break;case "xoffset":e.xOffset=p.getInt();break;case "yoffset":e.yOffset=p.getInt();break;case "xadvance":e.xAdvance=
p.getInt()}this._glyphs.set(e.charCode,e);break;case "kerning":e=null;p=g=0;for(f=a.pairs();f.hasNext();){var j=f.next();switch(j.key){case "first":e=this._glyphs.get(j.getInt());break;case "second":g=j.getInt();break;case "amount":p=j.getInt()}}null!=e&&0!=p&&e.setKerning(g,p)}},__class__:cc};var ya=h["flambe.display.TextAlign"]={__ename__:["flambe","display","TextAlign"],__constructs__:["Left","Center","Right"]};ya.Left=["Left",0];ya.Left.toString=k;ya.Left.__enum__=ya;ya.Center=["Center",1];ya.Center.toString=
k;ya.Center.__enum__=ya;ya.Right=["Right",2];ya.Right.toString=k;ya.Right.__enum__=ya;var oe=function(a,b,c,d,e,g){this.lines=0;var p=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+g);this.bounds=new Jh;for(var f=[],g=b.length,j=0;j<g;){var h=j++,h=b.charCodeAt(h),h=a._glyphs.get(h);null!=h?this._glyphs.push(h):null}for(var b=-1,i=0,Ta=0,a=a._glyphs.get(10),g=function(){p.bounds.width=Ld.max(p.bounds.width,i);p.bounds.height+=Ta;f[p.lines]=i;Ta=i=0;++p.lines},
j=0;j<this._glyphs.length;){h=this._glyphs[j];this._offsets[j]=Math.round(i);var k=0<d&&i+h.width>d;k||h==a?(k&&(0<=b?(this._glyphs[b]=a,i=this._offsets[b],j=b):this._glyphs.splice(j,0,a)),b=-1,Ta=this._lineOffset,g()):(32==h.charCode&&(b=j),i+=h.xAdvance+e,Ta=Ld.max(Ta,h.height+h.yOffset),j+1<this._glyphs.length&&(i+=h.getKerning(this._glyphs[j+1].charCode)));++j}g();e=0;a=oe.getAlignOffset(c,f[0],d);b=1.79769313486231E308;g=-1.79769313486231E308;h=j=0;for(k=this._glyphs.length;h<k;){var l=this._glyphs[h];
10==l.charCode&&(e+=this._lineOffset,++j,a=oe.getAlignOffset(c,f[j],d));this._offsets[h]+=a;var m=e+l.yOffset;b<m||(b=m);g=Ld.max(g,m+l.height);++h}this.bounds.x=oe.getAlignOffset(c,this.bounds.width,d);this.bounds.y=b;this.bounds.height=g-b};h["flambe.display.TextLayout"]=oe;oe.__name__=["flambe","display","TextLayout"];oe.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return Math.round((c-b)/2)}};oe.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<
d;){var e=this._glyphs[c];10==e.charCode?b+=this._lineOffset:e.draw(a,this._offsets[c],b);++c}},__class__:oe};var Ie=function(a){this._configText=a;this._keywordPattern=new rc("([A-Za-z]+)(.*)","");this._pairPattern=new rc('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};h["flambe.display._Font.ConfigParser"]=Ie;Ie.__name__=["flambe","display","_Font","ConfigParser"];Ie.advance=function(a,b){var c=b.matchedPos();return G.substr(a,c.pos+c.len,a.length)};Ie.prototype={keywords:function(){var a=this,b=this._configText;
return{next:function(){b=Ie.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=Ie.advance(b,a._pairPattern);return new Kh(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:Ie};var Kh=function(a,b){this.key=a;this._value=b};h["flambe.display._Font.ConfigPair"]=
Kh;Kh.__name__=["flambe","display","_Font","ConfigPair"];Kh.prototype={getInt:function(){return B.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:G.substr(this._value,1,this._value.length-2)},__class__:Kh};var Lh=function(){};h["flambe.display.Graphics"]=Lh;Lh.__name__=["flambe","display","Graphics"];Lh.prototype={__class__:Lh};var Md=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};h["flambe.math.Point"]=Md;Md.__name__=["flambe","math","Point"];
Md.prototype={__class__:Md};var Ia=function(){this.blendMode=this.scissor=null;var a=this;Ob.call(this);this._flags|=54;this._localMatrix=new tc;var b=function(){a._flags|=24};this.x=new Qb(0,b);this.y=new Qb(0,b);this.rotation=new Qb(0,b);this.scaleX=new Qb(1,b);this.scaleY=new Qb(1,b);this.anchorX=new Qb(0,b);this.anchorY=new Qb(0,b);this.alpha=new Qb(1)};h["flambe.display.Sprite"]=Ia;Ia.__name__=["flambe","display","Sprite"];Ia.hitTest=function(a,b,c){var d=a._compMap.Sprite_0;if(null!=d){if(6!=
(d._flags&6))return null;d.getLocalMatrix().inverseTransform(b,c,Ia._scratchPoint)&&(b=Ia._scratchPoint.x,c=Ia._scratchPoint.y);var e=d.scissor;if(null!=e&&!e.contains(b,c))return null}a=Ia.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};Ia.render=function(a,b){var c=a._compMap.Sprite_0;if(null!=c){var d=c.alpha._value;if(0==(c._flags&2)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),e=
d.m02,g=d.m12;0!=(c._flags&32)&&(e=Math.round(e),g=Math.round(g));b.transform(d.m00,d.m10,d.m01,d.m11,e,g);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_2;if(null!=d){d=d.occludedScenes;for(e=0;e<d.length;)g=d[e],++e,Ia.render(g,b)}for(d=a.firstChild;null!=d;)e=d.next,Ia.render(d,b),d=e;null!=c&&b.restore()};Ia.hitTestBackwards=function(a,b,c){if(null!=a){var d=Ia.hitTestBackwards(a.next,b,c);return null!=d?d:Ia.hitTest(a,b,c)}return null};Ia.__super__=
Ob;Ia.prototype=y(Ob.prototype,{get_name:function(){return"Sprite_0"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));
return this._localMatrix},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=
a;){var b=a._compMap.Sprite_0;if(null!=b)return b;a=a.parent}return null},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=I._platform.getPointer().move.connect(function(b){for(var c=b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);
null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},
__class__:Ia});var Bb=h["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};Bb.Portrait=["Portrait",0];Bb.Portrait.toString=k;Bb.Portrait.__enum__=Bb;Bb.Landscape=["Landscape",1];Bb.Landscape.toString=k;Bb.Landscape.__enum__=Bb;var pg=function(){};h["flambe.display.Texture"]=pg;pg.__name__=["flambe","display","Texture"];pg.__interfaces__=[ne];pg.prototype={__class__:pg};var Aj=function(){};h["flambe.display.SubTexture"]=Aj;Aj.__name__=
["flambe","display","SubTexture"];Aj.__interfaces__=[pg];var i=h["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
i.A=["A",0];i.A.toString=k;i.A.__enum__=i;i.B=["B",1];i.B.toString=k;i.B.__enum__=i;i.C=["C",2];i.C.toString=k;i.C.__enum__=i;i.D=["D",3];i.D.toString=k;i.D.__enum__=i;i.E=["E",4];i.E.toString=k;i.E.__enum__=i;i.F=["F",5];i.F.toString=k;i.F.__enum__=i;i.G=["G",6];i.G.toString=k;i.G.__enum__=i;i.H=["H",7];i.H.toString=k;i.H.__enum__=i;i.I=["I",8];i.I.toString=k;i.I.__enum__=i;i.J=["J",9];i.J.toString=k;i.J.__enum__=i;i.K=["K",10];i.K.toString=k;i.K.__enum__=i;i.L=["L",11];i.L.toString=k;i.L.__enum__=
i;i.M=["M",12];i.M.toString=k;i.M.__enum__=i;i.N=["N",13];i.N.toString=k;i.N.__enum__=i;i.O=["O",14];i.O.toString=k;i.O.__enum__=i;i.P=["P",15];i.P.toString=k;i.P.__enum__=i;i.Q=["Q",16];i.Q.toString=k;i.Q.__enum__=i;i.R=["R",17];i.R.toString=k;i.R.__enum__=i;i.S=["S",18];i.S.toString=k;i.S.__enum__=i;i.T=["T",19];i.T.toString=k;i.T.__enum__=i;i.U=["U",20];i.U.toString=k;i.U.__enum__=i;i.V=["V",21];i.V.toString=k;i.V.__enum__=i;i.W=["W",22];i.W.toString=k;i.W.__enum__=i;i.X=["X",23];i.X.toString=
k;i.X.__enum__=i;i.Y=["Y",24];i.Y.toString=k;i.Y.__enum__=i;i.Z=["Z",25];i.Z.toString=k;i.Z.__enum__=i;i.Number0=["Number0",26];i.Number0.toString=k;i.Number0.__enum__=i;i.Number1=["Number1",27];i.Number1.toString=k;i.Number1.__enum__=i;i.Number2=["Number2",28];i.Number2.toString=k;i.Number2.__enum__=i;i.Number3=["Number3",29];i.Number3.toString=k;i.Number3.__enum__=i;i.Number4=["Number4",30];i.Number4.toString=k;i.Number4.__enum__=i;i.Number5=["Number5",31];i.Number5.toString=k;i.Number5.__enum__=
i;i.Number6=["Number6",32];i.Number6.toString=k;i.Number6.__enum__=i;i.Number7=["Number7",33];i.Number7.toString=k;i.Number7.__enum__=i;i.Number8=["Number8",34];i.Number8.toString=k;i.Number8.__enum__=i;i.Number9=["Number9",35];i.Number9.toString=k;i.Number9.__enum__=i;i.Numpad0=["Numpad0",36];i.Numpad0.toString=k;i.Numpad0.__enum__=i;i.Numpad1=["Numpad1",37];i.Numpad1.toString=k;i.Numpad1.__enum__=i;i.Numpad2=["Numpad2",38];i.Numpad2.toString=k;i.Numpad2.__enum__=i;i.Numpad3=["Numpad3",39];i.Numpad3.toString=
k;i.Numpad3.__enum__=i;i.Numpad4=["Numpad4",40];i.Numpad4.toString=k;i.Numpad4.__enum__=i;i.Numpad5=["Numpad5",41];i.Numpad5.toString=k;i.Numpad5.__enum__=i;i.Numpad6=["Numpad6",42];i.Numpad6.toString=k;i.Numpad6.__enum__=i;i.Numpad7=["Numpad7",43];i.Numpad7.toString=k;i.Numpad7.__enum__=i;i.Numpad8=["Numpad8",44];i.Numpad8.toString=k;i.Numpad8.__enum__=i;i.Numpad9=["Numpad9",45];i.Numpad9.toString=k;i.Numpad9.__enum__=i;i.NumpadAdd=["NumpadAdd",46];i.NumpadAdd.toString=k;i.NumpadAdd.__enum__=i;i.NumpadDecimal=
["NumpadDecimal",47];i.NumpadDecimal.toString=k;i.NumpadDecimal.__enum__=i;i.NumpadDivide=["NumpadDivide",48];i.NumpadDivide.toString=k;i.NumpadDivide.__enum__=i;i.NumpadEnter=["NumpadEnter",49];i.NumpadEnter.toString=k;i.NumpadEnter.__enum__=i;i.NumpadMultiply=["NumpadMultiply",50];i.NumpadMultiply.toString=k;i.NumpadMultiply.__enum__=i;i.NumpadSubtract=["NumpadSubtract",51];i.NumpadSubtract.toString=k;i.NumpadSubtract.__enum__=i;i.F1=["F1",52];i.F1.toString=k;i.F1.__enum__=i;i.F2=["F2",53];i.F2.toString=
k;i.F2.__enum__=i;i.F3=["F3",54];i.F3.toString=k;i.F3.__enum__=i;i.F4=["F4",55];i.F4.toString=k;i.F4.__enum__=i;i.F5=["F5",56];i.F5.toString=k;i.F5.__enum__=i;i.F6=["F6",57];i.F6.toString=k;i.F6.__enum__=i;i.F7=["F7",58];i.F7.toString=k;i.F7.__enum__=i;i.F8=["F8",59];i.F8.toString=k;i.F8.__enum__=i;i.F9=["F9",60];i.F9.toString=k;i.F9.__enum__=i;i.F10=["F10",61];i.F10.toString=k;i.F10.__enum__=i;i.F11=["F11",62];i.F11.toString=k;i.F11.__enum__=i;i.F12=["F12",63];i.F12.toString=k;i.F12.__enum__=i;i.F13=
["F13",64];i.F13.toString=k;i.F13.__enum__=i;i.F14=["F14",65];i.F14.toString=k;i.F14.__enum__=i;i.F15=["F15",66];i.F15.toString=k;i.F15.__enum__=i;i.Left=["Left",67];i.Left.toString=k;i.Left.__enum__=i;i.Up=["Up",68];i.Up.toString=k;i.Up.__enum__=i;i.Right=["Right",69];i.Right.toString=k;i.Right.__enum__=i;i.Down=["Down",70];i.Down.toString=k;i.Down.__enum__=i;i.Alt=["Alt",71];i.Alt.toString=k;i.Alt.__enum__=i;i.Backquote=["Backquote",72];i.Backquote.toString=k;i.Backquote.__enum__=i;i.Backslash=
["Backslash",73];i.Backslash.toString=k;i.Backslash.__enum__=i;i.Backspace=["Backspace",74];i.Backspace.toString=k;i.Backspace.__enum__=i;i.CapsLock=["CapsLock",75];i.CapsLock.toString=k;i.CapsLock.__enum__=i;i.Comma=["Comma",76];i.Comma.toString=k;i.Comma.__enum__=i;i.Command=["Command",77];i.Command.toString=k;i.Command.__enum__=i;i.Control=["Control",78];i.Control.toString=k;i.Control.__enum__=i;i.Delete=["Delete",79];i.Delete.toString=k;i.Delete.__enum__=i;i.End=["End",80];i.End.toString=k;i.End.__enum__=
i;i.Enter=["Enter",81];i.Enter.toString=k;i.Enter.__enum__=i;i.Equals=["Equals",82];i.Equals.toString=k;i.Equals.__enum__=i;i.Escape=["Escape",83];i.Escape.toString=k;i.Escape.__enum__=i;i.Home=["Home",84];i.Home.toString=k;i.Home.__enum__=i;i.Insert=["Insert",85];i.Insert.toString=k;i.Insert.__enum__=i;i.LeftBracket=["LeftBracket",86];i.LeftBracket.toString=k;i.LeftBracket.__enum__=i;i.Minus=["Minus",87];i.Minus.toString=k;i.Minus.__enum__=i;i.PageDown=["PageDown",88];i.PageDown.toString=k;i.PageDown.__enum__=
i;i.PageUp=["PageUp",89];i.PageUp.toString=k;i.PageUp.__enum__=i;i.Period=["Period",90];i.Period.toString=k;i.Period.__enum__=i;i.Quote=["Quote",91];i.Quote.toString=k;i.Quote.__enum__=i;i.RightBracket=["RightBracket",92];i.RightBracket.toString=k;i.RightBracket.__enum__=i;i.Semicolon=["Semicolon",93];i.Semicolon.toString=k;i.Semicolon.__enum__=i;i.Shift=["Shift",94];i.Shift.toString=k;i.Shift.__enum__=i;i.Slash=["Slash",95];i.Slash.toString=k;i.Slash.__enum__=i;i.Space=["Space",96];i.Space.toString=
k;i.Space.__enum__=i;i.Tab=["Tab",97];i.Tab.toString=k;i.Tab.__enum__=i;i.Menu=["Menu",98];i.Menu.toString=k;i.Menu.__enum__=i;i.Search=["Search",99];i.Search.toString=k;i.Search.__enum__=i;i.Unknown=function(a){a=["Unknown",100,a];a.__enum__=i;a.toString=k;return a};var Mh=function(){this.init(0,null)};h["flambe.input.KeyboardEvent"]=Mh;Mh.__name__=["flambe","input","KeyboardEvent"];Mh.prototype={init:function(a,b){this.id=a;this.key=b},__class__:Mh};var $a=h["flambe.input.MouseButton"]={__ename__:["flambe",
"input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};$a.Left=["Left",0];$a.Left.toString=k;$a.Left.__enum__=$a;$a.Middle=["Middle",1];$a.Middle.toString=k;$a.Middle.__enum__=$a;$a.Right=["Right",2];$a.Right.toString=k;$a.Right.__enum__=$a;$a.Unknown=function(a){a=["Unknown",3,a];a.__enum__=$a;a.toString=k;return a};var ed=h["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};ed.Default=["Default",0];ed.Default.toString=
k;ed.Default.__enum__=ed;ed.Button=["Button",1];ed.Button.toString=k;ed.Button.__enum__=ed;ed.None=["None",2];ed.None.toString=k;ed.None.__enum__=ed;var Nh=function(){this.init(0,0,0,null)};h["flambe.input.MouseEvent"]=Nh;Nh.__name__=["flambe","input","MouseEvent"];Nh.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:Nh};var qg=h["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};qg.Mouse=function(a){a=
["Mouse",0,a];a.__enum__=qg;a.toString=k;return a};qg.Touch=function(a){a=["Touch",1,a];a.__enum__=qg;a.toString=k;return a};var Oh=function(){this.init(0,0,0,null,null)};h["flambe.input.PointerEvent"]=Oh;Oh.__name__=["flambe","input","PointerEvent"];Oh.prototype={init:function(a,b,c,d,e){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._stopped=!1},__class__:Oh};var Ph=function(a){this.id=a;this._source=qg.Touch(this)};h["flambe.input.TouchPoint"]=Ph;Ph.__name__=["flambe","input",
"TouchPoint"];Ph.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:Ph};var Ld=function(){};h["flambe.math.FMath"]=Ld;Ld.__name__=["flambe","math","FMath"];Ld.max=function(a,b){return a>b?a:b};Ld.clamp=function(a,b,c){return a<b?b:a>c?c:a};var tc=function(){this.identity()};h["flambe.math.Matrix"]=tc;tc.__name__=["flambe","math","Matrix"];tc.multiply=function(a,b,c){null==c&&(c=new tc);var d=a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,g=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=d;
c.m01=e;c.m02=g;d=a.m10*b.m00+a.m11*b.m10;e=a.m10*b.m01+a.m11*b.m11;g=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=e;c.m12=g;return c};tc.prototype={set:function(a,b,c,d,e,g){this.m00=a;this.m01=c;this.m02=e;this.m10=b;this.m11=d;this.m12=g},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,e){var g=Math.sin(e),e=Math.cos(e);this.set(e*c,g*c,-g*d,e*d,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},determinant:function(){return this.m00*
this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},__class__:tc};var Jh=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};h["flambe.math.Rectangle"]=Jh;Jh.__name__=["flambe","math","Rectangle"];Jh.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;
if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},__class__:Jh};var Cb=function(){this._disposed=!1};h["flambe.platform.BasicAsset"]=Cb;Cb.__name__=["flambe","platform","BasicAsset"];Cb.__interfaces__=[ne];Cb.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:Cb};var pe=function(a,b){var c=
this;this.manifest=b;this._platform=a;this.promise=new rg;this._bytesLoaded=new sa;this._pack=new sg(b,this);var d=dg.array(b);if(0==d.length)this.handleSuccess();else{for(var e=new sa,g=0;g<d.length;){var p=d[g];++g;var f=e.get(p.name);null==f&&(f=[],e.set(p.name,f));f.push(p)}this._assetsRemaining=dg.count(e);for(d=e.iterator();d.hasNext();)e=[d.next()],this.pickBestEntry(e[0],function(a){return function(d){if(null!=d){var e=b.getFullURL(d);try{c.loadEntry(e,d)}catch(g){c.handleError(d,"Unexpected error: "+
B.string(g))}e=c.promise;e.set_total(e._total+d.bytes)}else d=a[0][0],pe.isAudio(d.format)?c.handleLoad(d,Kc.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(e))}};h["flambe.platform.BasicAssetPackLoader"]=pe;pe.__name__=["flambe","platform","BasicAssetPackLoader"];pe.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};pe.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=
0;d<c.length;){var e=c[d];++d;for(var g=0;g<a.length;){var p=a[g];++g;if(p.format==e){b(p);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&
this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=this._bytesLoaded.iterator();d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(Ua.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:pe};var sg=function(a,b){this.disposed=!1;this._manifest=
a;this.loader=b;this.textures=new sa;this.sounds=new sa;this.files=new sa};h["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=sg;sg.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];sg.__interfaces__=[ng];sg.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw Ua.withFields("Missing texture",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw Ua.withFields("Missing sound",
["name",a]);return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw Ua.withFields("Missing file",["name",a]);return c},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},get_manifest:function(){return this._manifest},
__class__:sg,__properties__:{get_manifest:"get_manifest"}};var vf=function(a){this._disposed=!1;this._content=a};h["flambe.platform.BasicFile"]=vf;vf.__name__=["flambe","platform","BasicFile"];vf.__interfaces__=[og];vf.__super__=Cb;vf.prototype=y(Cb.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:vf});var Qh=function(){};h["flambe.subsystem.KeyboardSystem"]=Qh;Qh.__name__=["flambe","subsystem","KeyboardSystem"];Qh.prototype={__class__:Qh};var Jc=
function(){this.down=new Ea;this.up=new Ea;this.backButton=new Je;this._keyStates=new bc};h["flambe.platform.BasicKeyboard"]=Jc;Jc.__name__=["flambe","platform","BasicKeyboard"];Jc.__interfaces__=[Qh];Jc.prototype={isDown:function(a){return this.isCodeDown(wf.toKeyCode(a))},isCodeDown:function(a){return this._keyStates.exists(a)},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),Jc._sharedEvent.init(Jc._sharedEvent.id+
1,wf.toKey(a)),this.down.emit(Jc._sharedEvent));return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),Jc._sharedEvent.init(Jc._sharedEvent.id+1,wf.toKey(a)),this.up.emit(Jc._sharedEvent))},__class__:Jc};var Rh=function(){};h["flambe.subsystem.MouseSystem"]=Rh;Rh.__name__=["flambe","subsystem","MouseSystem"];Rh.prototype={__class__:Rh};var Sb=function(a){this._pointer=a;this._source=qg.Mouse(Sb._sharedEvent);this.down=new Ea;this.move=new Ea;this.up=new Ea;this.scroll=
new Ea;this._y=this._x=0;this._cursor=ed.Default;this._buttonStates=new bc};h["flambe.platform.BasicMouse"]=Sb;Sb.__name__=["flambe","platform","BasicMouse"];Sb.__interfaces__=[Rh];Sb.prototype={submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,Sh.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(Sb._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(Sb._sharedEvent)},
submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,Sh.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(Sb._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=a;this._y=b;Sb._sharedEvent.init(Sb._sharedEvent.id+1,a,b,c)},__class__:Sb};var Th=function(){};h["flambe.subsystem.PointerSystem"]=Th;Th.__name__=["flambe","subsystem",
"PointerSystem"];Th.prototype={__class__:Th};var jb=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new Ea;this.move=new Ea;this.up=new Ea;this._x=a;this._y=b;this._isDown=c};h["flambe.platform.BasicPointer"]=jb;jb.__name__=["flambe","platform","BasicPointer"];jb.__interfaces__=[Th];jb.prototype={get_x:function(){return this._x},get_y:function(){return this._y},submitDown:function(a,b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var d=[],e=Ia.hitTest(I.root,
a,b);if(null!=e){var g=e.owner;do{var p=g._compMap.Sprite_0;null!=p&&d.push(p);g=g.parent}while(null!=g)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerDown(jb._sharedEvent),jb._sharedEvent._stopped)return;this.down.emit(jb._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],e=Ia.hitTest(I.root,a,b);if(null!=e){var g=e.owner;do{var p=g._compMap.Sprite_0;null!=p&&d.push(p);g=g.parent}while(null!=g)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],
++a,b.onPointerMove(jb._sharedEvent),jb._sharedEvent._stopped)return;this.move.emit(jb._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var d=[],e=Ia.hitTest(I.root,a,b);if(null!=e){var g=e.owner;do{var p=g._compMap.Sprite_0;null!=p&&d.push(p);g=g.parent}while(null!=g)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(jb._sharedEvent),jb._sharedEvent._stopped)return;this.up.emit(jb._sharedEvent)}},prepare:function(a,b,c,d){this._x=
a;this._y=b;jb._sharedEvent.init(jb._sharedEvent.id+1,a,b,c,d)},__class__:jb,__properties__:{get_y:"get_y",get_x:"get_x"}};var Yd=function(a,b,c){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=c};h["flambe.platform.BasicTexture"]=Yd;Yd.__name__=["flambe","platform","BasicTexture"];Yd.__interfaces__=[Aj];Yd.__super__=Cb;Yd.prototype=y(Cb.prototype,{subTexture:function(a,b,c,d){c=this.root.createTexture(c,d);c._parent=this;c._x=a;
c._y=b;c.rootX=this.rootX+a;c.rootY=this.rootY+b;return c},get_graphics:function(){return this.root.getGraphics()},onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:Yd,__properties__:{get_height:"get_height",get_width:"get_width",get_graphics:"get_graphics"}});var tg=function(){};h["flambe.subsystem.TouchSystem"]=tg;tg.__name__=["flambe","subsystem","TouchSystem"];tg.prototype={__class__:tg};
var lg=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new bc;this._points=[];this.down=new Ea;this.move=new Ea;this.up=new Ea};h["flambe.platform.BasicTouch"]=lg;lg.__name__=["flambe","platform","BasicTouch"];lg.__interfaces__=[tg];lg.prototype={get_supported:function(){return!0},submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new Ph(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,
c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),G.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit(d))},__class__:lg,__properties__:{get_supported:"get_supported"}};var Ke=function(){};
h["flambe.sound.Sound"]=Ke;Ke.__name__=["flambe","sound","Sound"];Ke.__interfaces__=[ne];Ke.prototype={__class__:Ke};var Kc=function(){this._disposed=!1;this._playback=new ug(this)};h["flambe.platform.DummySound"]=Kc;Kc.__name__=["flambe","platform","DummySound"];Kc.__interfaces__=[Ke];Kc.getInstance=function(){null==Kc._instance&&(Kc._instance=new Kc);return Kc._instance};Kc.__super__=Cb;Kc.prototype=y(Cb.prototype,{play:function(){return this._playback},loop:function(){return this._playback},onDisposed:function(){},
__class__:Kc});var Le=function(){};h["flambe.sound.Playback"]=Le;Le.__name__=["flambe","sound","Playback"];Le.__interfaces__=[sd];Le.prototype={__class__:Le};var ug=function(a){this._sound=a;this.volume=new Qb(0);this._complete=new Pb(!0)};h["flambe.platform.DummyPlayback"]=ug;ug.__name__=["flambe","platform","DummyPlayback"];ug.__interfaces__=[Le];ug.prototype={get_complete:function(){return this._complete},dispose:function(){},__class__:ug,__properties__:{get_complete:"get_complete"}};var mg=function(){this.down=
new Ea;this.move=new Ea;this.up=new Ea};h["flambe.platform.DummyTouch"]=mg;mg.__name__=["flambe","platform","DummyTouch"];mg.__interfaces__=[tg];mg.prototype={get_supported:function(){return!1},__class__:mg,__properties__:{get_supported:"get_supported"}};var xf=function(){this._entries=[]};h["flambe.platform.EventGroup"]=xf;xf.__name__=["flambe","platform","EventGroup"];xf.__interfaces__=[sd];xf.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new Uh(a,b,c))},addDisposingListener:function(a,
b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:xf};var Uh=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};h["flambe.platform._EventGroup.Entry"]=Uh;Uh.__name__=["flambe","platform","_EventGroup","Entry"];Uh.prototype={__class__:Uh};var vg=function(){};h["flambe.platform.InternalGraphics"]=vg;vg.__name__=["flambe",
"platform","InternalGraphics"];vg.__interfaces__=[Lh];vg.prototype={__class__:vg};var Vh=function(){};h["flambe.subsystem.RendererSystem"]=Vh;Vh.__name__=["flambe","subsystem","RendererSystem"];Vh.prototype={__class__:Vh};var wg=function(){};h["flambe.platform.InternalRenderer"]=wg;wg.__name__=["flambe","platform","InternalRenderer"];wg.__interfaces__=[Vh];wg.prototype={__class__:wg};var wf=function(){};h["flambe.platform.KeyCodes"]=wf;wf.__name__=["flambe","platform","KeyCodes"];wf.toKey=function(a){switch(a){case 65:return i.A;
case 66:return i.B;case 67:return i.C;case 68:return i.D;case 69:return i.E;case 70:return i.F;case 71:return i.G;case 72:return i.H;case 73:return i.I;case 74:return i.J;case 75:return i.K;case 76:return i.L;case 77:return i.M;case 78:return i.N;case 79:return i.O;case 80:return i.P;case 81:return i.Q;case 82:return i.R;case 83:return i.S;case 84:return i.T;case 85:return i.U;case 86:return i.V;case 87:return i.W;case 88:return i.X;case 89:return i.Y;case 90:return i.Z;case 48:return i.Number0;case 49:return i.Number1;
case 50:return i.Number2;case 51:return i.Number3;case 52:return i.Number4;case 53:return i.Number5;case 54:return i.Number6;case 55:return i.Number7;case 56:return i.Number8;case 57:return i.Number9;case 96:return i.Numpad0;case 97:return i.Numpad1;case 98:return i.Numpad2;case 99:return i.Numpad3;case 100:return i.Numpad4;case 101:return i.Numpad5;case 102:return i.Numpad6;case 103:return i.Numpad7;case 104:return i.Numpad8;case 105:return i.Numpad9;case 107:return i.NumpadAdd;case 110:return i.NumpadDecimal;
case 111:return i.NumpadDivide;case 108:return i.NumpadEnter;case 106:return i.NumpadMultiply;case 109:return i.NumpadSubtract;case 112:return i.F1;case 113:return i.F2;case 114:return i.F3;case 115:return i.F4;case 116:return i.F5;case 117:return i.F6;case 118:return i.F7;case 119:return i.F8;case 120:return i.F9;case 121:return i.F10;case 122:return i.F11;case 123:return i.F12;case 37:return i.Left;case 38:return i.Up;case 39:return i.Right;case 40:return i.Down;case 18:return i.Alt;case 192:return i.Backquote;
case 220:return i.Backslash;case 8:return i.Backspace;case 20:return i.CapsLock;case 188:return i.Comma;case 15:return i.Command;case 17:return i.Control;case 46:return i.Delete;case 35:return i.End;case 13:return i.Enter;case 187:return i.Equals;case 27:return i.Escape;case 36:return i.Home;case 45:return i.Insert;case 219:return i.LeftBracket;case 189:return i.Minus;case 34:return i.PageDown;case 33:return i.PageUp;case 190:return i.Period;case 222:return i.Quote;case 221:return i.RightBracket;
case 186:return i.Semicolon;case 16:return i.Shift;case 191:return i.Slash;case 32:return i.Space;case 9:return i.Tab;case 16777234:return i.Menu;case 16777247:return i.Search}return i.Unknown(a)};wf.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;
case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;
case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;
case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;
case 99:return 16777247;case 100:return a[2]}};var Ee=function(){this._tickables=[]};h["flambe.platform.MainLoop"]=Ee;Ee.__name__=["flambe","platform","MainLoop"];Ee.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_3;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var d=c.next;0==(c._flags&1)&&(c._flags|=1,c.onStart());c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,Ee.updateEntity(c,b),c=d};Ee.prototype={update:function(a){if(!(0>=
a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}I.volume.update(a);Ee.updateEntity(I.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),Ia.render(I.root,b),a.didRender())},addTickable:function(a){this._tickables.push(a)},__class__:Ee};var Sh=function(){};h["flambe.platform.MouseCodes"]=Sh;Sh.__name__=["flambe","platform","MouseCodes"];Sh.toButton=function(a){switch(a){case 0:return $a.Left;case 1:return $a.Middle;
case 2:return $a.Right}return $a.Unknown(a)};var Wh=function(){};h["flambe.platform.TextureRoot"]=Wh;Wh.__name__=["flambe","platform","TextureRoot"];Wh.prototype={__class__:Wh};var xg=function(){};h["flambe.platform.Tickable"]=xg;xg.__name__=["flambe","platform","Tickable"];xg.prototype={__class__:xg};var fd=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};h["flambe.platform.html.CanvasGraphics"]=fd;fd.__name__=["flambe","platform","html","CanvasGraphics"];fd.__interfaces__=
[vg];fd.prototype={save:function(){this._canvasCtx.save()},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},scale:function(a,b){this._canvasCtx.scale(a,b)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},transform:function(a,b,c,d,e,g){this._canvasCtx.transform(a,b,c,d,e,g)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,g,p){this._firstDraw?(this._firstDraw=
!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,d,e,g,p),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+d|0,a.rootY+e|0,g|0,p|0,b|0,c|0,g|0,p|0)},fillRect:function(a,b,c,d,e){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+B.string(a);this._canvasCtx.fillStyle=
"#"+B.string(a);this._canvasCtx.fillRect(b|0,c|0,d|0,e|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setAlpha:function(a){this._canvasCtx.globalAlpha=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,
d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},__class__:fd};var Fe=function(a){this.graphics=new fd(a,!1);this._hasGPU=new Pb(!0)};h["flambe.platform.html.CanvasRenderer"]=Fe;Fe.__name__=["flambe","platform","html","CanvasRenderer"];Fe.__interfaces__=[wg];Fe.prototype={get_type:function(){return uc.Canvas},createTextureFromImage:function(a){a=new Me(Fe.CANVAS_TEXTURES?Y.createCanvas(a):a);return a.createTexture(a.width,a.height)},createTexture:function(a,
b){return(new Me(Y.createEmptyCanvas(a,b))).createTexture(a,b)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:Fe,__properties__:{get_type:"get_type"}};var yg=function(a,b,c){Yd.call(this,a,b,c)};h["flambe.platform.html.CanvasTexture"]=yg;yg.__name__=["flambe","platform","html","CanvasTexture"];yg.__super__=Yd;yg.prototype=y(Yd.prototype,{__class__:yg});
var Me=function(a){this._graphics=null;this.updateCount=0;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};h["flambe.platform.html.CanvasTextureRoot"]=Me;Me.__name__=["flambe","platform","html","CanvasTextureRoot"];Me.__interfaces__=[Wh];Me.__super__=Cb;Me.prototype=y(Cb.prototype,{createTexture:function(a,b){return new yg(this,a,b)},getGraphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new zg(this));return this._graphics},getContext2d:function(){x.__instanceof(this.image,
HTMLCanvasElement)||(this.image=Y.createCanvas(this.image));return this.image.getContext("2d")},onDisposed:function(){this._graphics=this.image=null},__class__:Me});var zg=function(a){fd.call(this,a.image,!0);this._renderTarget=a};h["flambe.platform.html._CanvasTextureRoot.InternalGraphics"]=zg;zg.__name__=["flambe","platform","html","_CanvasTextureRoot","InternalGraphics"];zg.__super__=fd;zg.prototype=y(fd.prototype,{drawTexture:function(a,b,c){fd.prototype.drawTexture.call(this,a,b,c);++this._renderTarget.updateCount},
drawSubTexture:function(a,b,c,d,e,g,p){fd.prototype.drawSubTexture.call(this,a,b,c,d,e,g,p);++this._renderTarget.updateCount},fillRect:function(a,b,c,d,e){fd.prototype.fillRect.call(this,a,b,c,d,e);++this._renderTarget.updateCount},__class__:zg});var ja=function(a,b){pe.call(this,a,b)};h["flambe.platform.html.HtmlAssetPackLoader"]=ja;ja.__name__=["flambe","platform","html","HtmlAssetPackLoader"];ja.detectImageFormats=function(a){var b=[E.PNG,E.JPG,E.GIF],c=2,d;d=window.document.createElement("img");
d.onload=d.onerror=function(){1==d.width&&b.unshift(E.WEBP);--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&b.unshift(E.JXR);--c;0==c&&a(b)};e.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};ja.detectAudioFormats=
function(){var a;a=window.document.createElement("audio");if(null==a||null==n(a,a.canPlayType))return[];var b=new rc("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!va.get_supported()&&b.match(c))return[];for(var b=[{format:E.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:E.MP3,mimeType:"audio/mpeg"},{format:E.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:E.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:E.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var e=
b[d];++d;var g="";try{g=a.canPlayType(e.mimeType)}catch(p){}""!=g&&c.push(e.format)}return c};ja.supportsBlob=function(){if(ja._detectBlobSupport){ja._detectBlobSupport=!1;if((new rc("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;ja._URL=Y.loadExtension("URL").value}return null!=ja._URL&&null!=ja._URL.createObjectURL};ja.__super__=pe;
ja.prototype=y(pe.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d;d=window.document.createElement("img");var e=new xf;e.addDisposingListener(d,"load",function(){ja.supportsBlob()&&ja._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});ja.supportsBlob()?this.download(a,b,
"blob",function(a){d.src=ja._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(va.get_supported())this.download(a,b,"arraybuffer",function(a){va.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new va(a))},function(){c.handleLoad(b,Kc.getInstance())})});else{var g;g=window.document.createElement("audio");
g.preload="auto";var p=++ja._mediaRefCount;null==ja._mediaElements&&(ja._mediaElements=new bc);ja._mediaElements.set(p,g);e=new xf;e.addDisposingListener(g,"canplaythrough",function(){ja._mediaElements.remove(p);c.handleLoad(b,new yf(g))});e.addDisposingListener(g,"error",function(){ja._mediaElements.remove(p);var a=g.error.code;3==a||4==a?c.handleLoad(b,Kc.getInstance()):c.handleError(b,"Failed to load audio: "+g.error.code)});e.addListener(g,"progress",function(){if(0<g.buffered.length&&0<g.duration){var a=
g.buffered.end(0)/g.duration;c.handleProgress(b,a*b.bytes|0)}});g.src=a;g.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new vf(a))})}},getAssetFormats:function(a){var b=this;null==ja._supportedFormats&&(ja._supportedFormats=new rg,ja.detectImageFormats(function(a){ja._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(ja.detectAudioFormats()).concat([E.Data]))}));ja._supportedFormats.get(a)},download:function(a,b,c,d){var e=
this,g=null,p=null,f=0,j=!1,h=function(){j&&(j=!1,window.clearInterval(f))},i=3,Ta=function(){--i;return 0<=i?(p(),!0):!1},p=function(){h();null!=g&&g.abort();g=new XMLHttpRequest;g.open("GET",a,!0);g.responseType=c;var p=0;g.onprogress=function(a){j||(j=!0,f=window.setInterval(function(){4!=g.readyState&&5E3<Date.now()-p&&!Ta()&&(h(),e.handleError(b,"Download stalled"))},1E3));p=Date.now();e.handleProgress(b,a.loaded)};g.onerror=function(){if(0!=g.status||!Ta())h(),e.handleError(b,"HTTP error "+
g.status)};g.onload=function(){var a=g.response;null==a&&(a=g.responseText);h();d(a)};g.send()};p()},__class__:ja});var kg=function(a,b){Sb.call(this,a);this._canvas=b};h["flambe.platform.html.HtmlMouse"]=kg;kg.__name__=["flambe","platform","html","HtmlMouse"];kg.__super__=Sb;kg.prototype=y(Sb.prototype,{__class__:kg});var yf=function(a){this._disposed=!1;this.audioElement=a};h["flambe.platform.html.HtmlSound"]=yf;yf.__name__=["flambe","platform","html","HtmlSound"];yf.__interfaces__=[Ke];yf.__super__=
Cb;yf.prototype=y(Cb.prototype,{play:function(a){null==a&&(a=1);return new zf(this,a,!1)},loop:function(a){null==a&&(a=1);return new zf(this,a,!0)},onDisposed:function(){this.audioElement=null},__class__:yf});var zf=function(a,b,c){var d=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new Qb(b,function(){d.updateVolume()});this.updateVolume();this._complete=new Pb(!1);
this.playAudio();I.hidden._value&&this.set_paused(!0)};h["flambe.platform.html._HtmlSound.HtmlPlayback"]=zf;zf.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];zf.__interfaces__=[xg,Le];zf.prototype={set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},get_complete:function(){return this._complete},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?
(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(Ab.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=I.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=I.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},
updateVolume:function(){this._clonedElement.volume=I.volume._value*this.volume._value},__class__:zf,__properties__:{set_paused:"set_paused",get_complete:"get_complete"}};var Xh=function(){};h["flambe.subsystem.StageSystem"]=Xh;Xh.__name__=["flambe","subsystem","StageSystem"];Xh.prototype={__class__:Xh};var ke=function(a){var b=this;this._canvas=a;this.resize=new Je;this.scaleFactor=ke.computeScaleFactor();1!=this.scaleFactor&&(Y.setVendorStyle(this._canvas,"transform-origin","top left"),Y.setVendorStyle(this._canvas,
"transform","scale("+1/this.scaleFactor+")"));Y.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){Y.callLater(n(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",n(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new Pb(null);null!=window.orientation&&(window.addEventListener("orientationchange",n(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new Pb(!1);Y.addVendorListener(window.document,
"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};h["flambe.platform.html.HtmlStage"]=ke;ke.__name__=["flambe","platform","html","HtmlStage"];ke.__interfaces__=[Xh];ke.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),b=Y.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||1136<a*b?1:a};ke.prototype={get_width:function(){return this._canvas.width},
get_height:function(){return this._canvas.height},requestResize:function(a,b){if(this.resizeCanvas(a,b)){var c=this._canvas.parentElement;c.style.width=a+"px";c.style.height=b+"px"}},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();return!0},
hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";Y.callLater(function(){Y.hideMobileBrowser();Y.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(Y.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==Y.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],
window.document).value)},__class__:ke,__properties__:{get_height:"get_height",get_width:"get_width"}};var Y=function(){};h["flambe.platform.html.HtmlUtil"]=Y;Y.__name__=["flambe","platform","html","HtmlUtil"];Y.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};Y.hideMobileBrowser=function(){window.scrollTo(1,0)};Y.loadExtension=function(a,b){null==b&&(b=window);var c=r.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+G.substr(a,1,null),d=0,e=
Y.VENDOR_PREFIXES;d<e.length;){var g=e[d];++d;var p=g+c,f=r.field(b,p);if(null!=f)return{prefix:g,field:p,value:f}}return{prefix:null,field:null,value:null}};Y.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=Y.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};Y.polyfill=function(a,b){null==b&&(b=window);var c=Y.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};Y.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,e=Y.VENDOR_PREFIXES;d<
e.length;){var g=e[d];++d;a.setProperty("-"+g+"-"+b,c)}a.setProperty(b,c)};Y.addVendorListener=function(a,b,c,d){for(var e=0,g=Y.VENDOR_PREFIXES;e<g.length;){var p=g[e];++e;a.addEventListener(p+b,c,d)}a.addEventListener(b,c,d)};Y.orientation=function(a){switch(a){case -90:case 90:return Bb.Landscape;default:return Bb.Portrait}};Y.createEmptyCanvas=function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};Y.createCanvas=function(a){var b=Y.createEmptyCanvas(a.width,
a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};Y.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var va=function(a){this._disposed=!1;this.buffer=a};h["flambe.platform.html.WebAudioSound"]=va;va.__name__=["flambe","platform","html","WebAudioSound"];va.__interfaces__=[Ke];va.__properties__=
{get_supported:"get_supported"};va.get_supported=function(){if(va._detectSupport){va._detectSupport=!1;var a=Y.loadExtension("AudioContext").value;null!=a&&(va.ctx=new a,va.gain=va.createGain(),va.gain.connect(va.ctx.destination),I.volume.watch(function(a){va.gain.gain.value=a}))}return null!=va.ctx};va.createGain=function(){return null!=va.ctx.createGain?va.ctx.createGain():va.ctx.createGainNode()};va.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};va.__super__=Cb;va.prototype=y(Cb.prototype,
{play:function(a){null==a&&(a=1);return new Af(this,a,!1)},loop:function(a){null==a&&(a=1);return new Af(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:va,__properties__:{get_duration:"get_duration"}});var Af=function(a,b,c){var d=this;this._sound=a;this._head=va.gain;this._complete=new Pb(!1);this._sourceNode=va.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.onended=function(){d._complete.set__(!0)};
va.start(this._sourceNode,0);this.playAudio();this.volume=new Qb(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b);I.hidden._value&&this.set_paused(!0)};h["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=Af;Af.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];Af.__interfaces__=[xg,Le];Af.prototype={set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_complete:function(){return this._complete},
get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(va.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=
va.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=va.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(Ab.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=I.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=
a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:Af,__properties__:{get_position:"get_position",set_paused:"set_paused",get_complete:"get_complete"}};var Yh=function(){this._transitor=null};h["flambe.scene.Director"]=Yh;Yh.__name__=["flambe","scene","Director"];Yh.__super__=Ob;Yh.prototype=y(Ob.prototype,{get_name:function(){return"Director_2"},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=
b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},show:function(a){a=a._compMap.Scene_4;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_4;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,
this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},__class__:Yh,__properties__:y(Ob.prototype.__properties__,{get_topScene:"get_topScene"})});var Bj=function(){};h["flambe.scene._Director.Transitor"]=Bj;Bj.__name__=["flambe","scene","_Director","Transitor"];Bj.prototype={update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();
this._onComplete()},__class__:Bj};var Zh=function(){};h["flambe.scene.Scene"]=Zh;Zh.__name__=["flambe","scene","Scene"];Zh.__super__=Ob;Zh.prototype=y(Ob.prototype,{get_name:function(){return"Scene_4"},__class__:Zh});var Cj=function(){};h["flambe.scene.Transition"]=Cj;Cj.__name__=["flambe","scene","Transition"];Cj.prototype={update:function(){return!0},complete:function(){},__class__:Cj};var uc=h["flambe.subsystem.RendererType"]={__ename__:["flambe","subsystem","RendererType"],__constructs__:["Stage3D",
"WebGL","Canvas"]};uc.Stage3D=["Stage3D",0];uc.Stage3D.toString=k;uc.Stage3D.__enum__=uc;uc.WebGL=["WebGL",1];uc.WebGL.toString=k;uc.WebGL.__enum__=uc;uc.Canvas=["Canvas",2];uc.Canvas.toString=k;uc.Canvas.__enum__=uc;var Dj=function(){};h["flambe.swf.Symbol"]=Dj;Dj.__name__=["flambe","swf","Symbol"];var Ag=function(a,b){this._name=a.symbol;var c=a.rect;this.texture=b.subTexture(c[0],c[1],c[2],c[3]);c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};h["flambe.swf.BitmapSymbol"]=
Ag;Ag.__name__=["flambe","swf","BitmapSymbol"];Ag.__interfaces__=[Dj];Ag.prototype={__class__:Ag};var $h=function(a,b){this._file=a.getFile(b+"/library.json");var c=JSON.parse(this._file.toString());this._symbols=new sa;this.frameRate=c.frameRate;for(var d=[],e=0,g=c.movies;e<g.length;){var p=g[e];++e;p=new Bg(this,p);d.push(p);this._symbols.set(p._name,p)}c=c.textureGroups;(1!=c[0].scaleFactor||1<c.length)&&null;c=c[0].atlases;for(e=0;e<c.length;){var f=c[e];++e;g=a.getTexture(b+"/"+Ua.removeFileExtension(f.file));
p=0;for(f=f.textures;p<f.length;){var j=f[p];++p;j=new Ag(j,g);this._symbols.set(j._name,j)}}for(c=0;c<d.length;){g=d[c];++c;e=0;for(g=g.layers;e<g.length;){p=g[e];++e;p=p.keyframes;f=p.length;for(j=0;j<f;){var h=j++,i=p[h];if(null!=i.symbolName){var Ta=this._symbols.get(i.symbolName);i.symbol=Ta}if(i.tweened&&1==i.duration&&h+1<f&&(h=p[h+1],!h.visible||null==h.symbolName))i.visible=!1}}}};h["flambe.swf.Library"]=$h;$h.__name__=["flambe","swf","Library"];$h.prototype={__class__:$h};var Bg=function(a,
b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var e=c++,g=new ai(b.layers[e]);this.frames=Math.max(g.frames,this.frames);this.layers[e]=g}this.duration=this.frames/this.frameRate};h["flambe.swf.MovieSymbol"]=Bg;Bg.__name__=["flambe","swf","MovieSymbol"];Bg.__interfaces__=[Dj];Bg.prototype={__class__:Bg};var ai=function(a){this.empty=!0;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=
0,d=this.keyframes.length;c<d;){var e=c++,b=new bi(a.keyframes[e],b);this.keyframes[e]=b;this.empty=this.empty&&null==b.symbolName}this.frames=null!=b?b.index+b.duration:0};h["flambe.swf.MovieLayer"]=ai;ai.__name__=["flambe","swf","MovieLayer"];ai.prototype={__class__:ai};var bi=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=
a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};h["flambe.swf.MovieKeyframe"]=bi;bi.__name__=["flambe","swf","MovieKeyframe"];bi.prototype=
{__class__:bi};var Ih=function(){};h["flambe.util.Assert"]=Ih;Ih.__name__=["flambe","util","Assert"];Ih.that=function(){};var rg=function(){this.success=new Ea;this.error=new Ea;this.progressChanged=new Je;this.hasResult=!1;this._total=this._progress=0};h["flambe.util.Promise"]=rg;rg.__name__=["flambe","util","Promise"];rg.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?
(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:rg,__properties__:{set_total:"set_total",set_progress:"set_progress",set_result:"set_result"}};var Je=function(a){ua.call(this,a)};h["flambe.util.Signal0"]=Je;Je.__name__=["flambe","util","Signal0"];Je.__super__=ua;Je.prototype=y(ua.prototype,
{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==ua.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:Je});var Eh=function(a){this.next=null;this.fn=a};h["flambe.util._SignalBase.Task"]=Eh;Eh.__name__=["flambe","util","_SignalBase","Task"];Eh.prototype={__class__:Eh};var Ua=function(){};
h["flambe.util.Strings"]=Ua;Ua.__name__=["flambe","util","Strings"];Ua.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?G.substr(a,b+1,null):null};Ua.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?G.substr(a,0,b):a};Ua.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=G.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=G.substr(a,b+1,null));return Ua.getFileExtension(a)};Ua.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+
b};Ua.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",d=0;d<c;){0<d&&(a+=", ");var e=b[d],g=b[d+1];if(B.is(g,Error)){var p=g.stack;null!=p&&(g=p)}a+=e+"="+B.string(g);d+=2}a+="]"}return a};var vc=function(){this.buf=new De;this.cache=[];this.useCache=vc.USE_CACHE;this.useEnumIndex=vc.USE_ENUM_INDEX;this.shash=new sa;this.scount=0};h["haxe.Serializer"]=vc;vc.__name__=["haxe","Serializer"];vc.run=function(a){var b=new vc;b.serialize(a);return b.toString()};vc.prototype=
{toString:function(){return this.buf.b},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+="R",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)):(this.shash.set(a,this.scount++),this.buf.b+="y",a=encodeURIComponent(a),this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length),this.buf.b+=":",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a))},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var e=c++,g=this.cache[e];if(typeof g==
b&&g==a)return this.buf.b+="r",this.buf.b=null==e?this.buf.b+"null":this.buf.b+(""+e),!0}this.cache.push(a);return!1},serializeFields:function(a){for(var b=0,c=r.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(r.field(a,d))}this.buf.b+="g"},serialize:function(a){var b=xa["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;case 2:Math.isNaN(a)?this.buf.b+=
"k":Math.isFinite(a)?(this.buf.b+="d",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a)):this.buf.b=0>a?this.buf.b+"m":this.buf.b+"p";break;case 3:this.buf.b=a?this.buf.b+"t":this.buf.b+"f";break;case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:b=0;this.buf.b+="a";for(var c=a.length,d=0;d<c;){var e=d++;null==a[e]?b++:(0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)),b=
0),this.serialize(a[e]))}0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)));this.buf.b+="h";break;case kf:this.buf.b+="l";for(a=a.iterator();a.hasNext();)this.serialize(a.next());this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.add(G.dateStr(a));break;case sa:this.buf.b+="b";for(b=a.keys();b.hasNext();)c=b.next(),this.serializeString(c),this.serialize(a.get(c));this.buf.b+="h";break;case bc:this.buf.b+="q";for(b=a.keys();b.hasNext();)c=b.next(),
this.buf.b+=":",this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c),this.serialize(a.get(c));this.buf.b+="h";break;case Lc:this.buf.b+="M";for(b=a.keys();b.hasNext();)c=b.next(),d=r.field(c,"__id__"),r.deleteField(c,"__id__"),this.serialize(c),c.__id__=d,this.serialize(a.h[c.__id__]);this.buf.b+="h";break;case Ne:d=0;e=a.length-2;b=new De;for(c=vc.BASE64;d<e;){var g=a.get(d++),p=a.get(d++),f=a.get(d++);b.add(c.charAt(g>>2));b.add(c.charAt((g<<4|p>>4)&63));b.add(c.charAt((p<<2|f>>6)&63));b.add(c.charAt(f&
63))}d==e?(e=a.get(d++),a=a.get(d++),b.add(c.charAt(e>>2)),b.add(c.charAt((e<<4|a>>4)&63)),b.add(c.charAt(a<<2&63))):d==e+1&&(a=a.get(d++),b.add(c.charAt(a>>2)),b.add(c.charAt(a<<4&63)));a=b.b;this.buf.b+="s";this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length);this.buf.b+=":";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(xa.getClassName(b)),this.useCache&&this.cache.push(a),
a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(xa.getClassName(b)),this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+="o";this.serializeFields(a);break;case 7:b=b[2];if(this.useCache){if(this.serializeRef(a))break;this.cache.pop()}this.buf.b=this.useEnumIndex?this.buf.b+"j":this.buf.b+"w";this.serializeString(xa.getEnumName(b));this.useEnumIndex?(this.buf.b+=":",this.buf.b+=B.string(a[1])):this.serializeString(a[0]);
this.buf.b+=":";b=a.length;this.buf.b+=B.string(b-2);for(c=2;c<b;)d=c++,this.serialize(a[d]);this.useCache&&this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+B.string(a);}},__class__:vc};var Tb=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=Tb.DEFAULT_RESOLVER;null==a&&(a=xa,Tb.DEFAULT_RESOLVER=a);this.setResolver(a)};h["haxe.Unserializer"]=Tb;Tb.__name__=["haxe","Unserializer"];Tb.initCodes=function(){for(var a=
[],b=0,c=Tb.BASE64.length;b<c;){var d=b++;a[Tb.BASE64.charCodeAt(d)]=d}return a};Tb.run=function(a){return(new Tb(a)).unserialize()};Tb.prototype={setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},get:function(a){return this.buf.charCodeAt(a)},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&
(a*=-1);return a},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw"Invalid enum format";var c=this.readDigits();if(0==c)return xa.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return xa.createEnum(a,b,d)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;
case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return B.parseFloat(G.substr(this.buf,a,this.pos-a));case 121:a=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid string length";b=G.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 107:return Math.NaN;
case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw"Invalid reference";return this.cache[a];case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw"Invalid string reference";
return this.scache[a];case 120:throw this.unserialize();case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=xa.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+
a;this.pos++;var c=this.readDigits(),d=xa.getEnumConstructs(b)[c];if(null==d)throw"Unknown enum index "+a+"@"+c;a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 108:a=new kf;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 98:a=new sa;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 113:a=new bc;this.cache.push(a);for(b=this.get(this.pos++);58==
b;)b=this.readDigits(),a.set(b,this.unserialize()),b=this.get(this.pos++);if(104!=b)throw"Invalid IntMap format";return a;case 77:a=new Lc;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 118:return a=G.substr(this.buf,this.pos,19),a=G.strDate(a),this.cache.push(a),this.pos+=19,a;case 115:a=this.readDigits();d=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid bytes length";var e=Tb.CODES;null==
e&&(e=Tb.initCodes(),Tb.CODES=e);for(var g=this.pos,p=a&3,f=g+(a-p),b=Ne.alloc(3*(a>>2)+(2<=p?p-1:0)),c=0;g<f;){var j=e[da.fastCodeAt(d,g++)],h=e[da.fastCodeAt(d,g++)];b.set(c++,j<<2|h>>4);j=e[da.fastCodeAt(d,g++)];b.set(c++,h<<4|j>>2);h=e[da.fastCodeAt(d,g++)];b.set(c++,j<<6|h)}2<=p&&(h=e[da.fastCodeAt(d,g++)],f=e[da.fastCodeAt(d,g++)],b.set(c++,h<<2|f>>4),3==p&&(d=e[da.fastCodeAt(d,g++)],b.set(c++,f<<4|d>>2)));this.pos+=a;this.cache.push(b);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);
if(null==b)throw"Class not found "+a;a=xa.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.get(this.pos++))throw"Invalid custom data";return a}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},__class__:Tb};var Ka=function(){};h["haxe.ds.ArraySort"]=Ka;Ka.__name__=["haxe","ds","ArraySort"];Ka.sort=function(a,b){Ka.rec(a,b,0,a.length)};Ka.rec=function(a,b,c,d){var e=c+d>>1;if(12>d-c){if(!(d<=c))for(e=c+1;e<d;)for(var g=e++;g>c;){if(0>b(a[g],
a[g-1]))Ka.swap(a,g-1,g);else break;g--}}else Ka.rec(a,b,c,e),Ka.rec(a,b,e,d),Ka.doMerge(a,b,c,e,d,e-c,d-e)};Ka.doMerge=function(a,b,c,d,e,g,p){var f,j,h,i;0==g||0==p||(2==g+p?0>b(a[d],a[c])&&Ka.swap(a,d,c):(g>p?(h=g>>1,f=c+h,j=Ka.lower(a,b,d,e,f),i=j-d):(i=p>>1,j=d+i,f=Ka.upper(a,b,c,d,j),h=f-c),Ka.rotate(a,b,f,d,j),d=f+i,Ka.doMerge(a,b,c,f,d,h,i),Ka.doMerge(a,b,d,j,e,g-h,p-i)))};Ka.rotate=function(a,b,c,d,e){if(!(c==d||d==e))for(b=Ka.gcd(e-c,d-c);0!=b--;){for(var g=a[c+b],p=d-c,f=c+b,j=c+b+p;j!=
c+b;)a[f]=a[j],f=j,j=e-j>p?j+p:c+(p-(e-j));a[f]=g}};Ka.gcd=function(a,b){for(;0!=b;)var c=a%b,a=b,b=c;return a};Ka.upper=function(a,b,c,d,e){for(var d=d-c,g,p;0<d;)g=d>>1,p=c+g,0>b(a[e],a[p])?d=g:(c=p+1,d=d-g-1);return c};Ka.lower=function(a,b,c,d,e){for(var d=d-c,g,p;0<d;)g=d>>1,p=c+g,0>b(a[p],a[e])?(c=p+1,d=d-g-1):d=g;return c};Ka.swap=function(a,b,c){var d=a[b];a[b]=a[c];a[c]=d};var Cg=function(){};h["haxe.ds.BalancedTree"]=Cg;Cg.__name__=["haxe","ds","BalancedTree"];Cg.prototype={set:function(a,
b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return b.value;b=0>c?b.left:b.right}return null},iterator:function(){var a=[];this.iteratorLoop(this.root,a);return G.iter(a)},setLoop:function(a,b,c){if(null==c)return new rb(null,a,b,null);var d=this.compare(a,c.key);if(0==d)return new rb(c.left,a,b,c.right,null==c?0:c._height);if(0>d)return this.balance(this.setLoop(a,b,c.left),c.key,c.value,c.right);a=this.setLoop(a,b,c.right);
return this.balance(c.left,c.key,c.value,a)},iteratorLoop:function(a,b){null!=a&&(this.iteratorLoop(a.left,b),b.push(a.value),this.iteratorLoop(a.right,b))},balance:function(a,b,c,d){var e;e=null==a?0:a._height;var g;g=null==d?0:d._height;return e>g+2?function(){var b=a.left;return null==b?0:b._height}(this)>=function(){var b=a.right;return null==b?0:b._height}(this)?new rb(a.left,a.key,a.value,new rb(a.right,b,c,d)):new rb(new rb(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new rb(a.right.right,
b,c,d)):g>e+2?function(){var a=d.right;return null==a?0:a._height}(this)>function(){var a=d.left;return null==a?0:a._height}(this)?new rb(new rb(a,b,c,d.left),d.key,d.value,d.right):new rb(new rb(a,b,c,d.left.left),d.left.key,d.left.value,new rb(d.left.right,d.key,d.value,d.right)):new rb(a,b,c,d,(e>g?e:g)+1)},compare:function(a,b){return r.compare(a,b)},__class__:Cg};var rb=function(a,b,c,d,e){null==e&&(e=-1);this.left=a;this.key=b;this.value=c;this.right=d;this._height=-1==e?(function(a){a=a.left;
return null==a?0:a._height}(this)>function(a){a=a.right;return null==a?0:a._height}(this)?function(a){a=a.left;return null==a?0:a._height}(this):function(a){a=a.right;return null==a?0:a._height}(this))+1:e};h["haxe.ds.TreeNode"]=rb;rb.__name__=["haxe","ds","TreeNode"];rb.prototype={__class__:rb};var Bf=function(){};h["haxe.ds.EnumValueMap"]=Bf;Bf.__name__=["haxe","ds","EnumValueMap"];Bf.__interfaces__=[Ce];Bf.__super__=Cg;Bf.prototype=y(Cg.prototype,{compare:function(a,b){var c=a[1]-b[1];if(0!=c)return c;
var c=a.slice(2),d=b.slice(2);return 0==c.length&&0==d.length?0:this.compareArgs(c,d)},compareArgs:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=0,d=a.length;c<d;){var e=c++,e=this.compareArg(a[e],b[e]);if(0!=e)return e}return 0},compareArg:function(a,b){return r.isEnumValue(a)&&r.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof Array&&null==b.__enum__?this.compareArgs(a,b):r.compare(a,b)},__class__:Bf});var bc=function(){this.h={}};h["haxe.ds.IntMap"]=
bc;bc.__name__=["haxe","ds","IntMap"];bc.__interfaces__=[Ce];bc.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return G.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref[this.it.next()]}}},
__class__:bc};var Lc=function(){this.h={};this.h.__keys__={}};h["haxe.ds.ObjectMap"]=Lc;Lc.__name__=["haxe","ds","ObjectMap"];Lc.__interfaces__=[Ce];Lc.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++Lc.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return G.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},
next:function(){return this.ref[this.it.next().__id__]}}},__class__:Lc};var sa=function(){this.h={}};h["haxe.ds.StringMap"]=sa;sa.__name__=["haxe","ds","StringMap"];sa.__interfaces__=[Ce];sa.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return G.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},
next:function(){return this.ref["$"+this.it.next()]}}},__class__:sa};var Ne=function(a,b){this.length=a;this.b=b};h["haxe.io.Bytes"]=Ne;Ne.__name__=["haxe","io","Bytes"];Ne.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new Ne(a,b)};Ne.prototype={get:function(a){return this.b[a]},set:function(a,b){this.b[a]=b&255},__class__:Ne};var Ej=function(){};h["haxe.io.Eof"]=Ej;Ej.__name__=["haxe","io","Eof"];Ej.prototype={toString:function(){return"Eof"},__class__:Ej};var Hh=function(){};h["haxe.rtti.Meta"]=
Hh;Hh.__name__=["haxe","rtti","Meta"];Hh.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var ci=function(a){this.__x=a};h["haxe.xml._Fast.NodeAccess"]=ci;ci.__name__=["haxe","xml","_Fast","NodeAccess"];ci.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==R.Document?"Document":this.__x.get_nodeName())+" is missing element "+a;return new Cf(b)},__class__:ci};var di=function(a){this.__x=a};h["haxe.xml._Fast.AttribAccess"]=
di;di.__name__=["haxe","xml","_Fast","AttribAccess"];di.prototype={resolve:function(a){if(this.__x.nodeType==R.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);if(null==b)throw this.__x.get_nodeName()+" is missing attribute "+a;return b},__class__:di};var ei=function(a){this.__x=a};h["haxe.xml._Fast.HasAttribAccess"]=ei;ei.__name__=["haxe","xml","_Fast","HasAttribAccess"];ei.prototype={resolve:function(a){if(this.__x.nodeType==R.Document)throw"Cannot access document attribute "+
a;return this.__x.exists(a)},__class__:ei};var fi=function(a){this.__x=a};h["haxe.xml._Fast.HasNodeAccess"]=fi;fi.__name__=["haxe","xml","_Fast","HasNodeAccess"];fi.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},__class__:fi};var gi=function(a){this.__x=a};h["haxe.xml._Fast.NodeListAccess"]=gi;gi.__name__=["haxe","xml","_Fast","NodeListAccess"];gi.prototype={resolve:function(a){for(var b=new kf,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new Cf(c))}return b},
__class__:gi};var Cf=function(a){if(a.nodeType!=R.Document&&a.nodeType!=R.Element)throw"Invalid nodeType "+B.string(a.nodeType);this.x=a;this.node=new ci(a);this.nodes=new gi(a);this.att=new di(a);this.has=new ei(a);this.hasNode=new fi(a)};h["haxe.xml.Fast"]=Cf;Cf.__name__=["haxe","xml","Fast"];Cf.prototype={get_name:function(){return this.x.nodeType==R.Document?"Document":this.x.get_nodeName()},get_innerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.get_name()+" does not have data";
var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==R.PCData&&c.nodeType==R.CData&&""==da.trim(b.get_nodeValue())&&(b=a.next(),null==b||b.nodeType==R.PCData&&""==da.trim(b.get_nodeValue())&&null==a.next()))return c.get_nodeValue();throw this.get_name()+" does not only have data";}if(b.nodeType!=R.PCData&&b.nodeType!=R.CData)throw this.get_name()+" does not have data";return b.get_nodeValue()},__class__:Cf,__properties__:{get_innerData:"get_innerData",get_name:"get_name"}};var Ic=function(){};h["haxe.xml.Parser"]=
Ic;Ic.__name__=["haxe","xml","Parser"];Ic.parse=function(a){var b=R.createDocument();Ic.doParse(a,0,b);return b};Ic.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,g=1,p=null,f=0,j=0,h=0,i=a.charCodeAt(b),Ta=new De;i==i;){switch(e){case 0:switch(i){case 10:case 13:case 9:case 32:break;default:e=g;continue}break;case 1:switch(i){case 60:e=0;g=2;break;default:f=b;e=13;continue}break;case 13:60==i?(g=R.createPCData(Ta.b+G.substr(a,f,b-f)),Ta=new De,c.addChild(g),j++,e=0,g=2):38==i&&(Ta.addSub(a,
f,b-f),e=18,g=13,f=b+1);break;case 17:93==i&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(e=R.createCData(G.substr(a,f,b-f)),c.addChild(e),j++,b+=2,e=1);break;case 2:switch(i){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=G.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=G.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";
b+=2;e=15}f=b+1;break;case 63:e=14;f=b;break;case 47:if(null==c)throw"Expected node name";f=b+1;e=0;g=10;break;default:e=3;f=b;continue}break;case 3:if(!(97<=i&&122>=i||65<=i&&90>=i||48<=i&&57>=i||58==i||46==i||95==i||45==i)){if(b==f)throw"Expected node name";d=R.createElement(G.substr(a,f,b-f));c.addChild(d);e=0;g=4;continue}break;case 4:switch(i){case 47:e=11;j++;break;case 62:e=9;j++;break;default:e=5;f=b;continue}break;case 5:if(!(97<=i&&122>=i||65<=i&&90>=i||48<=i&&57>=i||58==i||46==i||95==i||
45==i)){if(f==b)throw"Expected attribute name";p=G.substr(a,f,b-f);if(d.exists(p))throw"Duplicate attribute";e=0;g=6;continue}break;case 6:switch(i){case 61:e=0;g=7;break;default:throw"Expected =";}break;case 7:switch(i){case 34:case 39:e=8;f=b;break;default:throw'Expected "';}break;case 8:i==a.charCodeAt(f)&&(g=G.substr(a,f+1,b-f-1),d.set(p,g),e=0,g=4);break;case 9:f=b=Ic.doParse(a,b,d);e=1;break;case 11:switch(i){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(i){case 62:return 0==
j&&c.addChild(R.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=i&&122>=i||65<=i&&90>=i||48<=i&&57>=i||58==i||46==i||95==i||45==i)){if(f==b)throw"Expected node name";if(G.substr(a,f,b-f)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";e=0;g=12;continue}break;case 15:45==i&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(R.createComment(G.substr(a,f,b-f))),b+=2,e=1);break;case 16:91==i?h++:93==i?h--:62==i&&0==h&&(c.addChild(R.createDocType(G.substr(a,f,b-f))),e=
1);break;case 14:63==i&&62==a.charCodeAt(b+1)&&(b++,e=G.substr(a,f+1,b-f-2),c.addChild(R.createProcessingInstruction(e)),e=1);break;case 18:59==i&&(f=G.substr(a,f,b-f),35==f.charCodeAt(0)?(f=120==f.charCodeAt(1)?B.parseInt("0"+G.substr(f,1,f.length-1)):B.parseInt(G.substr(f,1,f.length-1)),Ta.add(String.fromCharCode(f))):Ic.escapes.exists(f)?Ta.add(Ic.escapes.get(f)):Ta.b+=B.string("&"+f+";"),f=b+1,e=g)}i=da.fastCodeAt(a,++b)}1==e&&(f=b,e=13);if(13==e)return(b!=f||0==j)&&c.addChild(R.createPCData(Ta.b+
G.substr(a,f,b-f))),b;throw"Unexpected end";};var x=function(){};h["js.Boot"]=x;x.__name__=["js","Boot"];x.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};x.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var g=d++,c=2!=g?c+(","+
x.__string_rec(a[g],b)):c+x.__string_rec(a[g],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)g=e++,d+=(0<g?",":"")+x.__string_rec(a[g],b);return d+"]"}try{d=a.toString}catch(p){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+x.__string_rec(a[c],
b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};x.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var g=d++,g=c[g];if(g==b||x.__interfLoop(g,b))return!0}return x.__interfLoop(a.__super__,b)};x.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Df:return(a|0)===a;case X:return"number"==typeof a;case Dg:return"boolean"==typeof a;case String:return"string"==
typeof a;case Array:return a instanceof Array&&null==a.__enum__;case sk:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||x.__interfLoop(x.getClass(a),b)))return!0}else return!1;return b==tk&&null!=a.__name__||b==uk&&null!=a.__ename__?!0:a.__enum__==b}};x.__cast=function(a,b){if(x.__instanceof(a,b))return a;throw"Cannot cast "+B.string(a)+" to "+B.string(b);};var Fj=function(){};h["manifest.Xml"]=Fj;Fj.__name__=["manifest","Xml"];var t=function(){};h["nape.Config"]=t;t.__name__=
["nape","Config"];var Ub=function(){this.zpp_inner=null};h["nape.callbacks.Callback"]=Ub;Ub.__name__=["nape","callbacks","Callback"];Ub.prototype={toString:function(){return""},__class__:Ub};var Eg=function(){this.zpp_inner=null};h["nape.callbacks.BodyCallback"]=Eg;Eg.__name__=["nape","callbacks","BodyCallback"];Eg.__super__=Ub;Eg.prototype=y(Ub.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-f.id_CbEvent_WAKE];a+=":"+this.zpp_inner.body.outer.toString();return a+=
" : listener: "+B.string(this.zpp_inner.listener.outer)},__class__:Eg});var gd=function(){this.zpp_inner=null};h["nape.callbacks.Listener"]=gd;gd.__name__=["nape","callbacks","Listener"];gd.prototype={toString:function(){var a="BEGIN,END,WAKE,SLEEP,BREAK,PRE,ONGOING".split(",")[this.zpp_inner.event];if(this.zpp_inner.type==f.id_ListenerType_BODY)return"BodyListener{"+a+"::"+B.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}";if(this.zpp_inner.type==f.id_ListenerType_CONSTRAINT)return"ConstraintListener{"+
a+"::"+B.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var b=this.zpp_inner.interaction,c;switch(b.itype){case f.id_InteractionType_COLLISION:c="COLLISION";break;case f.id_InteractionType_SENSOR:c="SENSOR";break;case f.id_InteractionType_FLUID:c="FLUID";break;default:c="ALL"}return(this.zpp_inner.type==f.id_ListenerType_INTERACTION?"InteractionListener{"+a+"#"+c+"::"+B.string(b.outer_zni.zpp_inner_zn.options1.outer)+":"+B.string(b.outer_zni.zpp_inner_zn.options2.outer)+
"}":"PreListener{"+c+"::"+B.string(b.outer_znp.zpp_inner_zn.options1.outer)+":"+B.string(b.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},__class__:gd};var hi=function(){this.zpp_inner_zn=null};h["nape.callbacks.BodyListener"]=hi;hi.__name__=["nape","callbacks","BodyListener"];hi.__super__=gd;hi.prototype=y(gd.prototype,{__class__:hi});var sb=function(){};h["nape.callbacks.CbEvent"]=sb;sb.__name__=["nape","callbacks","CbEvent"];sb.prototype={toString:function(){var a;
null==f.CbEvent_PRE&&(f.internal=!0,f.CbEvent_PRE=new sb,f.internal=!1);this==f.CbEvent_PRE?a="PRE":(null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new sb,f.internal=!1),this==f.CbEvent_BEGIN?a="BEGIN":(null==f.CbEvent_ONGOING&&(f.internal=!0,f.CbEvent_ONGOING=new sb,f.internal=!1),this==f.CbEvent_ONGOING?a="ONGOING":(null==f.CbEvent_END&&(f.internal=!0,f.CbEvent_END=new sb,f.internal=!1),this==f.CbEvent_END?a="END":(null==f.CbEvent_WAKE&&(f.internal=!0,f.CbEvent_WAKE=new sb,f.internal=!1),
this==f.CbEvent_WAKE?a="WAKE":(null==f.CbEvent_SLEEP&&(f.internal=!0,f.CbEvent_SLEEP=new sb,f.internal=!1),this==f.CbEvent_SLEEP?a="SLEEP":(null==f.CbEvent_BREAK&&(f.internal=!0,f.CbEvent_BREAK=new sb,f.internal=!1),a=this==f.CbEvent_BREAK?"BREAK":""))))));return a},__class__:sb};var Ma=function(){this.zpp_inner=null;this.zpp_inner=new gb;this.zpp_inner.outer=this};h["nape.callbacks.CbType"]=Ma;Ma.__name__=["nape","callbacks","CbType"];Ma.prototype={toString:function(){return this==gb.ANY_BODY?"ANY_BODY":
this==gb.ANY_SHAPE?"ANY_SHAPE":this==gb.ANY_COMPOUND?"ANY_COMPOUND":this==gb.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},__class__:Ma};var wc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.callbacks.CbTypeIterator"]=wc;wc.__name__=["nape","callbacks","CbTypeIterator"];wc.get=function(a){var b;null==wc.zpp_pool?(hd.internal=!0,b=new wc,hd.internal=!1):(b=wc.zpp_pool,wc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};
wc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=wc.zpp_pool;wc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:wc};var Fg=function(){this.zpp_inner=null;this.zpp_inner=new hd;this.zpp_inner.outer=this};h["nape.callbacks.CbTypeList"]=Fg;Fg.__name__=["nape","callbacks","CbTypeList"];Fg.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},has:function(a){this.zpp_inner.valmod();return this.zpp_inner.inner.has(a.zpp_inner)},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,
a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,
a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},pop:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();var a=null;if(this.zpp_inner.reverse_flag){var a=this.zpp_inner.inner.head.elt,b=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(b);this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=
null);var b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-2),a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}this.zpp_inner.invalidate();return a.outer},shift:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();var a=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=
null);var b;b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-2);var a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}else a=this.zpp_inner.inner.head.elt,b=a.outer,null!=this.zpp_inner.subber&&this.zpp_inner.subber(b),this.zpp_inner.dontremove||this.zpp_inner.inner.pop();this.zpp_inner.invalidate();return a.outer},add:function(a){return this.zpp_inner.reverse_flag?
this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},clear:function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},
toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=wc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Fg,__properties__:{get_length:"get_length"}};var Gg=function(){this.zpp_inner=null};h["nape.callbacks.ConstraintCallback"]=Gg;Gg.__name__=["nape","callbacks","ConstraintCallback"];Gg.__super__=Ub;Gg.prototype=y(Ub.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-
f.id_CbEvent_WAKE];a+=":"+this.zpp_inner.constraint.outer.toString();return a+=" : listener: "+B.string(this.zpp_inner.listener.outer)},__class__:Gg});var ii=function(){this.zpp_inner_zn=null};h["nape.callbacks.ConstraintListener"]=ii;ii.__name__=["nape","callbacks","ConstraintListener"];ii.__super__=gd;ii.prototype=y(gd.prototype,{__class__:ii});var Hg=function(){this.zpp_inner=null};h["nape.callbacks.InteractionCallback"]=Hg;Hg.__name__=["nape","callbacks","InteractionCallback"];Hg.__super__=Ub;
Hg.prototype=y(Ub.prototype,{toString:function(){var a;a="Cb:"+"BEGIN,END,,,,,ONGOING".split(",")[this.zpp_inner.event];a+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString();a+=" : "+this.zpp_inner.wrap_arbiters.toString();return a+=" : listener: "+B.string(this.zpp_inner.listener.outer)},__class__:Hg});var Nd=function(a,b,c,d,e,g){null==g&&(g=0);this.zpp_inner=this.zpp_inner_zn=null;var p=-1;null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new sb,f.internal=
!1);a==f.CbEvent_BEGIN?p=f.id_CbEvent_BEGIN:(null==f.CbEvent_END&&(f.internal=!0,f.CbEvent_END=new sb,f.internal=!1),a==f.CbEvent_END?p=f.id_CbEvent_END:(null==f.CbEvent_ONGOING&&(f.internal=!0,f.CbEvent_ONGOING=new sb,f.internal=!1),a==f.CbEvent_ONGOING&&(p=f.id_CbEvent_ONGOING)));this.zpp_inner=this.zpp_inner_zn=new Db(Oe.argument(c),Oe.argument(d),p,f.id_ListenerType_INTERACTION);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zni=this;this.zpp_inner.precedence=g;this.zpp_inner_zn.handleri=e;
this.set_interactionType(b)};h["nape.callbacks.InteractionListener"]=Nd;Nd.__name__=["nape","callbacks","InteractionListener"];Nd.__super__=gd;Nd.prototype=y(gd.prototype,{get_interactionType:function(){var a=this.zpp_inner_zn.itype;if(a==f.id_InteractionType_COLLISION)return null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Ja,f.internal=!1),f.InteractionType_COLLISION;if(a==f.id_InteractionType_SENSOR)return null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=
new Ja,f.internal=!1),f.InteractionType_SENSOR;if(a==f.id_InteractionType_FLUID)return null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new Ja,f.internal=!1),f.InteractionType_FLUID;return a==f.id_InteractionType_ANY?(null==f.InteractionType_ANY&&(f.internal=!0,f.InteractionType_ANY=new Ja,f.internal=!1),f.InteractionType_ANY):null},set_interactionType:function(a){if(this.get_interactionType()!=a){var b=this.zpp_inner_zn;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=
new Ja,f.internal=!1);a==f.InteractionType_COLLISION?a=f.id_InteractionType_COLLISION:(null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new Ja,f.internal=!1),a==f.InteractionType_SENSOR?a=f.id_InteractionType_SENSOR:(null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new Ja,f.internal=!1),a=a==f.InteractionType_FLUID?f.id_InteractionType_FLUID:f.id_InteractionType_ANY));b.itype=a}return this.get_interactionType()},__class__:Nd,__properties__:{set_interactionType:"set_interactionType",
get_interactionType:"get_interactionType"}});var Ja=function(){};h["nape.callbacks.InteractionType"]=Ja;Ja.__name__=["nape","callbacks","InteractionType"];Ja.prototype={toString:function(){var a;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Ja,f.internal=!1);this==f.InteractionType_COLLISION?a="COLLISION":(null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new Ja,f.internal=!1),this==f.InteractionType_SENSOR?a="SENSOR":(null==f.InteractionType_FLUID&&
(f.internal=!0,f.InteractionType_FLUID=new Ja,f.internal=!1),this==f.InteractionType_FLUID?a="FLUID":(null==f.InteractionType_ANY&&(f.internal=!0,f.InteractionType_ANY=new Ja,f.internal=!1),a=this==f.InteractionType_ANY?"ANY":"")));return a},__class__:Ja};var td=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.callbacks.ListenerIterator"]=td;td.__name__=["nape","callbacks","ListenerIterator"];td.get=function(a){var b;null==td.zpp_pool?(id.internal=!0,b=
new td,id.internal=!1):(b=td.zpp_pool,td.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};td.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=td.zpp_pool;td.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:td};var ji=function(){this.zpp_inner=null;this.zpp_inner=new id;this.zpp_inner.outer=
this};h["nape.callbacks.ListenerList"]=ji;ji.__name__=["nape","callbacks","ListenerList"];ji.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),
this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-
1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&
this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=td.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:ji,__properties__:{get_length:"get_length"}};var Pe=function(){};h["nape.callbacks.ListenerType"]=Pe;Pe.__name__=["nape","callbacks","ListenerType"];
Pe.prototype={toString:function(){var a;null==f.ListenerType_BODY&&(f.internal=!0,f.ListenerType_BODY=new Pe,f.internal=!1);this==f.ListenerType_BODY?a="BODY":(null==f.ListenerType_CONSTRAINT&&(f.internal=!0,f.ListenerType_CONSTRAINT=new Pe,f.internal=!1),this==f.ListenerType_CONSTRAINT?a="CONSTRAINT":(null==f.ListenerType_INTERACTION&&(f.internal=!0,f.ListenerType_INTERACTION=new Pe,f.internal=!1),this==f.ListenerType_INTERACTION?a="INTERACTION":(null==f.ListenerType_PRE&&(f.internal=!0,f.ListenerType_PRE=
new Pe,f.internal=!1),a=this==f.ListenerType_PRE?"PRE":"")));return a},__class__:Pe};var Ef=function(a,b){this.zpp_inner=null;this.zpp_inner=new Oe;this.zpp_inner.outer=this;null!=a&&this.including(a);null!=b&&this.excluding(b)};h["nape.callbacks.OptionType"]=Ef;Ef.__name__=["nape","callbacks","OptionType"];Ef.prototype={including:function(a){this.zpp_inner.append(this.zpp_inner.includes,a);return this},excluding:function(a){this.zpp_inner.append(this.zpp_inner.excludes,a);return this},toString:function(){null==
this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var a=this.zpp_inner.wrap_includes.toString();null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes();return"@{"+a+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},__class__:Ef};var Ig=function(){this.zpp_inner=null};h["nape.callbacks.PreCallback"]=Ig;Ig.__name__=["nape","callbacks","PreCallback"];Ig.__super__=Ub;Ig.prototype=y(Ub.prototype,{toString:function(){var a;a="Cb:PRE:"+(":"+this.zpp_inner.int1.outer_i.toString()+
"/"+this.zpp_inner.int2.outer_i.toString());a+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString();return a+=" : listnener: "+B.string(this.zpp_inner.listener.outer)},__class__:Ig});var Va=function(){};h["nape.callbacks.PreFlag"]=Va;Va.__name__=["nape","callbacks","PreFlag"];Va.prototype={toString:function(){var a;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Va,f.internal=!1);this==f.PreFlag_ACCEPT?a="ACCEPT":(null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new Va,f.internal=
!1),this==f.PreFlag_IGNORE?a="IGNORE":(null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Va,f.internal=!1),this==f.PreFlag_ACCEPT_ONCE?a="ACCEPT_ONCE":(null==f.PreFlag_IGNORE_ONCE&&(f.internal=!0,f.PreFlag_IGNORE_ONCE=new Va,f.internal=!1),a=this==f.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")));return a},__class__:Va};var ki=function(){this.zpp_inner_zn=null};h["nape.callbacks.PreListener"]=ki;ki.__name__=["nape","callbacks","PreListener"];ki.__super__=gd;ki.prototype=y(gd.prototype,
{__class__:ki});var Gj=function(){};h["nape.constraint.Constraint"]=Gj;Gj.__name__=["nape","constraint","Constraint"];Gj.prototype={toString:function(){return"{Constraint}"},__class__:Gj};var ud=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.constraint.ConstraintIterator"]=ud;ud.__name__=["nape","constraint","ConstraintIterator"];ud.get=function(a){var b;null==ud.zpp_pool?(Od.internal=!0,b=new ud,Od.internal=!1):(b=ud.zpp_pool,ud.zpp_pool=b.zpp_next);
b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ud.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ud.zpp_pool;ud.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ud};var li=function(){this.zpp_inner=null;this.zpp_inner=new Od;this.zpp_inner.outer=this};h["nape.constraint.ConstraintList"]=li;li.__name__=
["nape","constraint","ConstraintList"];li.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();
for(c=ud.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:li,__properties__:{get_length:"get_length"}};var qe=function(){this.zpp_inner=null};h["nape.dynamics.Arbiter"]=qe;qe.__name__=["nape","dynamics","Arbiter"];qe.prototype={get_state:function(){var a=this.zpp_inner.immState;if(a==(f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS))return null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Va,
f.internal=!1),f.PreFlag_ACCEPT;switch(a){case f.id_ImmState_ACCEPT:return null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Va,f.internal=!1),f.PreFlag_ACCEPT_ONCE;default:if(a==(f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS))return null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new Va,f.internal=!1),f.PreFlag_IGNORE;null==f.PreFlag_IGNORE_ONCE&&(f.internal=!0,f.PreFlag_IGNORE_ONCE=new Va,f.internal=!1);return f.PreFlag_IGNORE_ONCE}},toString:function(){var a;a=this.zpp_inner.type==
ha.COL?"CollisionArbiter":this.zpp_inner.type==ha.FLUID?"FluidArbiter":"SensorArbiter";return this.zpp_inner.cleared?a+"(object-pooled)":a+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==ha.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-"+this.get_state().toString()},__class__:qe,__properties__:{get_state:"get_state"}};
var vd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.dynamics.ArbiterIterator"]=vd;vd.__name__=["nape","dynamics","ArbiterIterator"];vd.get=function(a){var b;null==vd.zpp_pool?(Mc.internal=!0,b=new vd,Mc.internal=!1):(b=vd.zpp_pool,vd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};vd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=
vd.zpp_pool;vd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:vd};var mi=function(){this.zpp_inner=null;this.zpp_inner=new Mc;this.zpp_inner.outer=this};h["nape.dynamics.ArbiterList"]=mi;mi.__name__=["nape","dynamics","ArbiterList"];mi.prototype={zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.head;null!=
a;)a.elt.active&&this.zpp_inner.user_length++,a=a.next}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},iterator:function(){this.zpp_vm();return vd.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:mi};var Ff=function(){};h["nape.dynamics.ArbiterType"]=Ff;Ff.__name__=["nape","dynamics","ArbiterType"];
Ff.prototype={toString:function(){var a;null==f.ArbiterType_COLLISION&&(f.internal=!0,f.ArbiterType_COLLISION=new Ff,f.internal=!1);this==f.ArbiterType_COLLISION?a="COLLISION":(null==f.ArbiterType_SENSOR&&(f.internal=!0,f.ArbiterType_SENSOR=new Ff,f.internal=!1),this==f.ArbiterType_SENSOR?a="SENSOR":(null==f.ArbiterType_FLUID&&(f.internal=!0,f.ArbiterType_FLUID=new Ff,f.internal=!1),a=this==f.ArbiterType_FLUID?"FLUID":""));return a},__class__:Ff};var Jg=function(){this.zpp_inner=null};h["nape.dynamics.CollisionArbiter"]=
Jg;Jg.__name__=["nape","dynamics","CollisionArbiter"];Jg.__super__=qe;Jg.prototype=y(qe.prototype,{__class__:Jg});var ni=function(){this.zpp_inner=null};h["nape.dynamics.Contact"]=ni;ni.__name__=["nape","dynamics","Contact"];ni.prototype={toString:function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},__class__:ni};var wd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.dynamics.ContactIterator"]=wd;
wd.__name__=["nape","dynamics","ContactIterator"];wd.get=function(a){var b;null==wd.zpp_pool?(Gf.internal=!0,b=new wd,Gf.internal=!1):(b=wd.zpp_pool,wd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};wd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=wd.zpp_pool;wd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},
__class__:wd};var Hj=function(){this.zpp_inner=null};h["nape.dynamics.ContactList"]=Hj;Hj.__name__=["nape","dynamics","ContactList"];Hj.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.next;null!=a;){var b=a;b.active&&b.arbiter.active&&this.zpp_inner.user_length++;a=a.next}}return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&
(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.wrapper()},
toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=wd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Hj,__properties__:{get_length:"get_length"}};var Kg=function(){this.zpp_inner=null};h["nape.dynamics.FluidArbiter"]=Kg;Kg.__name__=["nape","dynamics","FluidArbiter"];Kg.__super__=qe;Kg.prototype=y(qe.prototype,{__class__:Kg});var oi=function(a,b,c,d,e,g){null==g&&(g=-1);null==e&&
(e=1);null==d&&(d=-1);null==c&&(c=1);null==b&&(b=-1);null==a&&(a=1);this.zpp_inner=null;null==xc.zpp_pool?this.zpp_inner=new xc:(this.zpp_inner=xc.zpp_pool,xc.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;this.zpp_inner.collisionGroup!=a&&(this.zpp_inner.collisionGroup=a,this.zpp_inner.invalidate());this.zpp_inner.collisionGroup;this.zpp_inner.collisionMask!=b&&(this.zpp_inner.collisionMask=b,this.zpp_inner.invalidate());this.zpp_inner.collisionMask;this.zpp_inner.sensorGroup!=
c&&(this.zpp_inner.sensorGroup=c,this.zpp_inner.invalidate());this.zpp_inner.sensorGroup;this.zpp_inner.sensorMask!=d&&(this.zpp_inner.sensorMask=d,this.zpp_inner.invalidate());this.zpp_inner.sensorMask;this.zpp_inner.fluidGroup!=e&&(this.zpp_inner.fluidGroup=e,this.zpp_inner.invalidate());this.zpp_inner.fluidGroup;this.zpp_inner.fluidMask!=g&&(this.zpp_inner.fluidMask=g,this.zpp_inner.invalidate());this.zpp_inner.fluidMask};h["nape.dynamics.InteractionFilter"]=oi;oi.__name__=["nape","dynamics","InteractionFilter"];
oi.prototype={__class__:oi};var Ij=function(){this.zpp_inner=null};h["nape.dynamics.InteractionGroup"]=Ij;Ij.__name__=["nape","dynamics","InteractionGroup"];Ij.prototype={toString:function(){var a="InteractionGroup";this.zpp_inner.ignore&&(a+=":ignore");return a},__class__:Ij};var xd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.dynamics.InteractionGroupIterator"]=xd;xd.__name__=["nape","dynamics","InteractionGroupIterator"];xd.get=function(a){var b;
null==xd.zpp_pool?(Hf.internal=!0,b=new xd,Hf.internal=!1):(b=xd.zpp_pool,xd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};xd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=xd.zpp_pool;xd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:xd};var Jj=function(){this.zpp_inner=null};h["nape.dynamics.InteractionGroupList"]=
Jj;Jj.__name__=["nape","dynamics","InteractionGroupList"];Jj.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=xd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Jj,__properties__:{get_length:"get_length"}};var Kj=function(){this.zpp_inner=null};h["nape.geom.AABB"]=Kj;Kj.__name__=["nape",
"geom","AABB"];Kj.prototype={toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:Kj};var Lj=function(){this.zpp_inner=null};h["nape.geom.ConvexResult"]=Lj;Lj.__name__=["nape","geom","ConvexResult"];Lj.prototype={toString:function(){return"{ shape: "+B.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+" }"},__class__:Lj};var kb=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.geom.ConvexResultIterator"]=
kb;kb.__name__=["nape","geom","ConvexResultIterator"];kb.get=function(a){var b;null==kb.zpp_pool?(If.internal=!0,b=new kb,If.internal=!1):(b=kb.zpp_pool,kb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};kb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=kb.zpp_pool;kb.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},
__class__:kb};var Mj=function(){this.zpp_inner=null};h["nape.geom.ConvexResultList"]=Mj;Mj.__name__=["nape","geom","ConvexResultList"];Mj.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=
a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=kb.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Mj,__properties__:{get_length:"get_length"}};var pi=function(){this.zpp_inner=
null};h["nape.geom.GeomPoly"]=pi;pi.__name__=["nape","geom","GeomPoly"];pi.prototype={toString:function(){var a="GeomPoly[",b=this.zpp_inner.vertices,c=this.zpp_inner.vertices;if(null!=b){do{var d=b;d!=this.zpp_inner.vertices&&(a+=",");a+="{"+d.x+","+d.y+"}";b=b.next}while(b!=c)}return a+"]"},__class__:pi};var Nc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.geom.GeomPolyIterator"]=Nc;Nc.__name__=["nape","geom","GeomPolyIterator"];Nc.get=function(a){var b;
null==Nc.zpp_pool?(Jf.internal=!0,b=new Nc,Jf.internal=!1):(b=Nc.zpp_pool,Nc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Nc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Nc.zpp_pool;Nc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Nc};var Nj=function(){this.zpp_inner=null};h["nape.geom.GeomPolyList"]=
Nj;Nj.__name__=["nape","geom","GeomPolyList"];Nj.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Nc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Nj,__properties__:{get_length:"get_length"}};var Oj=function(){this.zpp_inner=null};h["nape.geom.Mat23"]=Oj;Oj.__name__=["nape","geom","Mat23"];Oj.prototype={toString:function(){return"{ a: "+
this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},__class__:Oj};var Pj=function(){this.zpp_inner=null};h["nape.geom.MatMN"]=Pj;Pj.__name__=["nape","geom","MatMN"];Pj.prototype={toString:function(){for(var a="{ ",b=!0,c=0,d=this.zpp_inner.m;c<d;){var e=c++;b||(a+="; ");for(var b=!1,g=0,p=this.zpp_inner.n;g<p;)var f=g++,a=a+(this.zpp_inner.x[e*this.zpp_inner.n+f]+" ")}return a+"}"},__class__:Pj};var ri=
function(a,b){this.zpp_inner=null;this.zpp_inner=new qi;this.zpp_inner.origin.set(a);this.zpp_inner.origin;this.zpp_inner.direction.set(b);this.zpp_inner.zip_dir=!0;this.zpp_inner.direction;this.zpp_inner.maxdist=Math.POSITIVE_INFINITY};h["nape.geom.Ray"]=ri;ri.__name__=["nape","geom","Ray"];ri.prototype={__class__:ri};var si=function(){this.zpp_inner=null};h["nape.geom.RayResult"]=si;si.__name__=["nape","geom","RayResult"];si.prototype={toString:function(){return"{ shape: "+B.string(this.zpp_inner.shape)+
" distance: "+this.zpp_inner.toiDistance+" ?inner: "+B.string(this.zpp_inner.inner)+" }"},__class__:si};var yc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.geom.RayResultIterator"]=yc;yc.__name__=["nape","geom","RayResultIterator"];yc.get=function(a){var b;null==yc.zpp_pool?(Qe.internal=!0,b=new yc,Qe.internal=!1):(b=yc.zpp_pool,yc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};yc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=yc.zpp_pool;yc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:yc};var Lg=function(){this.zpp_inner=null;this.zpp_inner=new Qe;this.zpp_inner.outer=this};h["nape.geom.RayResultList"]=Lg;Lg.__name__=["nape","geom","RayResultList"];Lg.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=
!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a=
"[",b=!0,c;this.zpp_inner.valmod();for(c=yc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Lg,__properties__:{get_length:"get_length"}};var l=function(a,b){null==b&&(b=0);null==a&&(a=0);this.zpp_inner=this.zpp_pool=null;this.zpp_inner=ka.get(a,b,null);this.zpp_inner.outer=this};h["nape.geom.Vec2"]=l;l.__name__=["nape","geom","Vec2"];l.get=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&
(a=0);var d;null==Kf.poolVec2?d=new l:(d=Kf.poolVec2,Kf.poolVec2=d.zpp_pool,d.zpp_pool=null);if(null==d.zpp_inner)d.zpp_inner=ka.get(a,b,null),d.zpp_inner.outer=d;else{var e;d.zpp_inner.validate();if(e=d.zpp_inner.x==a)d.zpp_inner.validate(),e=d.zpp_inner.y==b;e||(d.zpp_inner.x=a,d.zpp_inner.y=b,d.zpp_inner.invalidate());d}d.zpp_inner.weak=c;return d};l.prototype={dispose:function(){var a=this.zpp_inner;this.zpp_inner=this.zpp_inner.outer=null;this.zpp_pool=Kf.poolVec2;Kf.poolVec2=this;null!=a.outer&&
(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=ka.zpp_pool;ka.zpp_pool=a},get_x:function(){this.zpp_inner.validate();return this.zpp_inner.x},set_x:function(a){this.zpp_inner.validate();this.zpp_inner.x!=a&&(this.zpp_inner.x=a,this.zpp_inner.invalidate());this.zpp_inner.validate();return this.zpp_inner.x},get_y:function(){this.zpp_inner.validate();return this.zpp_inner.y},set_y:function(a){this.zpp_inner.validate();this.zpp_inner.y!=a&&(this.zpp_inner.y=
a,this.zpp_inner.invalidate());this.zpp_inner.validate();return this.zpp_inner.y},get_length:function(){return Math.sqrt(function(a){a.zpp_inner.validate();return a.zpp_inner.x}(this)*function(a){a.zpp_inner.validate();return a.zpp_inner.x}(this)+function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this)*function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this))},set_length:function(a){var a=a/Math.sqrt(function(a){a.zpp_inner.validate();return a.zpp_inner.x}(this)*function(a){a.zpp_inner.validate();
return a.zpp_inner.x}(this)+function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this)*function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this)),b=this;b.set_x(function(){b.zpp_inner.validate();return b.zpp_inner.x}(this)*a);var c=this;c.set_y(function(){c.zpp_inner.validate();return c.zpp_inner.y}(this)*a);this.zpp_inner.invalidate();return Math.sqrt(function(a){a.zpp_inner.validate();return a.zpp_inner.x}(this)*function(a){a.zpp_inner.validate();return a.zpp_inner.x}(this)+function(a){a.zpp_inner.validate();
return a.zpp_inner.y}(this)*function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this))},set:function(a){var b=this.setxy(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this),function(){a.zpp_inner.validate();return a.zpp_inner.y}(this));a.zpp_inner.weak?(a.dispose(),!0):!1;return b},setxy:function(a,b){var c;this.zpp_inner.validate();if(c=this.zpp_inner.x==a)this.zpp_inner.validate(),c=this.zpp_inner.y==b;c||(this.zpp_inner.x=a,this.zpp_inner.y=b,this.zpp_inner.invalidate());return this},
toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:l,__properties__:{set_length:"set_length",get_length:"get_length",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"}};var Oc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.geom.Vec2Iterator"]=Oc;Oc.__name__=["nape","geom","Vec2Iterator"];Oc.get=function(a){var b;null==Oc.zpp_pool?(Re.internal=!0,b=new Oc,Re.internal=!1):(b=Oc.zpp_pool,Oc.zpp_pool=b.zpp_next);
b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Oc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Oc.zpp_pool;Oc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Oc};var Pd=function(){this.zpp_inner=null;this.zpp_inner=new Re;this.zpp_inner.outer=this};h["nape.geom.Vec2List"]=Pd;Pd.__name__=["nape","geom","Vec2List"];
Pd.prototype={get_length:function(){return this.zpp_gl()},zpp_gl:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,
a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},empty:function(){return 0==this.zpp_gl()},iterator:function(){this.zpp_vm();return Oc.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Pd,__properties__:{get_length:"get_length"}};var Qj=function(){this.zpp_inner=null};h["nape.geom.Vec3"]=
Qj;Qj.__name__=["nape","geom","Vec3"];Qj.prototype={toString:function(){this.zpp_inner.validate();var a="{ x: "+this.zpp_inner.x+" y: ";this.zpp_inner.validate();a=a+this.zpp_inner.y+" z: ";this.zpp_inner.validate();return a+this.zpp_inner.z+" }"},__class__:Qj};var Lf=function(){};h["nape.geom.Winding"]=Lf;Lf.__name__=["nape","geom","Winding"];Lf.prototype={toString:function(){var a;null==f.Winding_UNDEFINED&&(f.internal=!0,f.Winding_UNDEFINED=new Lf,f.internal=!1);this==f.Winding_UNDEFINED?a="UNDEFINED":
(null==f.Winding_CLOCKWISE&&(f.internal=!0,f.Winding_CLOCKWISE=new Lf,f.internal=!1),this==f.Winding_CLOCKWISE?a="CLOCKWISE":(null==f.Winding_ANTICLOCKWISE&&(f.internal=!0,f.Winding_ANTICLOCKWISE=new Lf,f.internal=!1),a=this==f.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""));return a},__class__:Lf};var Pc=function(){this.zpp_inner_i=null};h["nape.phys.Interactor"]=Pc;Pc.__name__=["nape","phys","Interactor"];Pc.prototype={get_castBody:function(){return null!=this.zpp_inner_i.ibody?this.zpp_inner_i.ibody.outer:
null},get_cbTypes:function(){null==this.zpp_inner_i.wrap_cbTypes&&this.zpp_inner_i.setupcbTypes();return this.zpp_inner_i.wrap_cbTypes},toString:function(){return""},__class__:Pc,__properties__:{get_cbTypes:"get_cbTypes",get_castBody:"get_castBody"}};var Vb=function(a,b){this.zpp_inner_i=this.zpp_inner=null;this.zpp_inner=new Qd;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;null!=b?(b.zpp_inner.validate(),this.zpp_inner.posx=b.zpp_inner.x,b.zpp_inner.validate(),
this.zpp_inner.posy=b.zpp_inner.y):(this.zpp_inner.posx=0,this.zpp_inner.posy=0);this.set_type(null==a?function(){null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Na,f.internal=!1);return f.BodyType_DYNAMIC}(this):a);null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1);this.zpp_inner_i.insert_cbtype(gb.ANY_BODY.zpp_inner)};h["nape.phys.Body"]=Vb;Vb.__name__=["nape","phys","Body"];Vb.__super__=Pc;Vb.prototype=y(Pc.prototype,{set_type:function(a){this.zpp_inner.immutable_midstep("Body::type");
Qd.types[this.zpp_inner.type]!=a&&(null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Na,f.internal=!1),a==f.BodyType_DYNAMIC?a=f.id_BodyType_DYNAMIC:(null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Na,f.internal=!1),a=a==f.BodyType_KINEMATIC?f.id_BodyType_KINEMATIC:f.id_BodyType_STATIC),a==f.id_BodyType_STATIC&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?
this.zpp_inner.space.transmitType(this.zpp_inner,a):this.zpp_inner.type=a);return Qd.types[this.zpp_inner.type]},get_shapes:function(){return this.zpp_inner.wrap_shapes},set_space:function(a){this.zpp_inner.immutable_midstep("Body::space");if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=a){if(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer))this.zpp_inner.component.woken=!1;if(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer))(null==this.zpp_inner.space?
null:this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this);null!=a&&a.zpp_inner.wrap_bodies.add(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},get_position:function(){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},get_velocity:function(){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},set_velocity:function(a){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();
this.zpp_inner.wrap_vel.set(a);null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},set_rotation:function(a){this.zpp_inner.immutable_midstep("Body::rotation");this.zpp_inner.rot!=a&&(this.zpp_inner.rot=a,this.zpp_inner.invalidate_rot(),this.zpp_inner.wake());return this.zpp_inner.rot},set_angularVel:function(a){this.zpp_inner.angvel!=a&&(this.zpp_inner.angvel=a,this.zpp_inner.wake());return this.zpp_inner.angvel},set_massMode:function(a){this.zpp_inner.immutable_midstep("Body::massMode");
var b=this.zpp_inner;null==f.MassMode_DEFAULT&&(f.internal=!0,f.MassMode_DEFAULT=new Qc,f.internal=!1);b.massMode=a==f.MassMode_DEFAULT?f.id_MassMode_DEFAULT:f.id_MassMode_FIXED;this.zpp_inner.invalidate_mass();null==f.MassMode_DEFAULT&&(f.internal=!0,f.MassMode_DEFAULT=new Qc,f.internal=!1);a=f.MassMode_DEFAULT;null==f.MassMode_FIXED&&(f.internal=!0,f.MassMode_FIXED=new Qc,f.internal=!1);return[a,f.MassMode_FIXED][this.zpp_inner.massMode]},get_mass:function(){this.zpp_inner.validate_mass();return this.zpp_inner.cmass},
set_mass:function(a){this.zpp_inner.immutable_midstep("Body::mass");this.zpp_inner.massMode=f.id_MassMode_FIXED;this.zpp_inner.cmass=a;this.zpp_inner.invalidate_mass();this.zpp_inner.validate_mass();return this.zpp_inner.cmass},applyImpulse:function(a,b,c){null==c&&(c=!1);if(c&&this.zpp_inner.component.sleeping)return a.zpp_inner.weak?(a.dispose(),!0):!1,null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1),this;this.zpp_inner.validate_mass();var d=this.zpp_inner.imass,e=this.zpp_inner,g=this.zpp_inner.velx;
a.zpp_inner.validate();e.velx=g+a.zpp_inner.x*d;e=this.zpp_inner;g=this.zpp_inner.vely;a.zpp_inner.validate();e.vely=g+a.zpp_inner.y*d;if(null!=b){var p=0,d=0;b.zpp_inner.validate();p=b.zpp_inner.x-this.zpp_inner.posx;b.zpp_inner.validate();d=b.zpp_inner.y-this.zpp_inner.posy;this.zpp_inner.validate_inertia();e=this.zpp_inner;g=this.zpp_inner.angvel;a.zpp_inner.validate();p*=a.zpp_inner.y;a.zpp_inner.validate();e.angvel=g+(p-a.zpp_inner.x*d)*this.zpp_inner.iinertia;b.zpp_inner.weak?(b.dispose(),!0):
!1}c||this.zpp_inner.type==f.id_BodyType_DYNAMIC&&this.zpp_inner.wake();a.zpp_inner.weak?(a.dispose(),!0):!1;return this},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(this.zpp_inner.type==f.id_BodyType_DYNAMIC?"dynamic":this.zpp_inner.type==f.id_BodyType_STATIC?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:Vb,__properties__:y(Pc.prototype.__properties__,{set_mass:"set_mass",get_mass:"get_mass",set_massMode:"set_massMode",set_angularVel:"set_angularVel",set_rotation:"set_rotation",
set_velocity:"set_velocity",get_velocity:"get_velocity",get_position:"get_position",set_space:"set_space",get_shapes:"get_shapes",set_type:"set_type"})});var Rc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.phys.BodyIterator"]=Rc;Rc.__name__=["nape","phys","BodyIterator"];Rc.get=function(a){var b;null==Rc.zpp_pool?(Rd.internal=!0,b=new Rc,Rd.internal=!1):(b=Rc.zpp_pool,Rc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Rc.prototype=
{hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Rc.zpp_pool;Rc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Rc};var ti=function(){this.zpp_inner=null;this.zpp_inner=new Rd;this.zpp_inner.outer=this};h["nape.phys.BodyList"]=ti;ti.__name__=["nape","phys","BodyList"];ti.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},
push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&
this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a=
"[",b=!0,c;this.zpp_inner.valmod();for(c=Rc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:ti,__properties__:{get_length:"get_length"}};var Na=function(){};h["nape.phys.BodyType"]=Na;Na.__name__=["nape","phys","BodyType"];Na.prototype={toString:function(){var a;null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Na,f.internal=!1);this==f.BodyType_STATIC?a="STATIC":(null==f.BodyType_DYNAMIC&&
(f.internal=!0,f.BodyType_DYNAMIC=new Na,f.internal=!1),this==f.BodyType_DYNAMIC?a="DYNAMIC":(null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Na,f.internal=!1),a=this==f.BodyType_KINEMATIC?"KINEMATIC":""));return a},__class__:Na};var ui=function(){this.zpp_inner=null};h["nape.phys.Compound"]=ui;ui.__name__=["nape","phys","Compound"];ui.__super__=Pc;ui.prototype=y(Pc.prototype,{toString:function(){return"Compound"+this.zpp_inner_i.id},__class__:ui});var Sc=function(){this.zpp_next=
null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.phys.CompoundIterator"]=Sc;Sc.__name__=["nape","phys","CompoundIterator"];Sc.get=function(a){var b;null==Sc.zpp_pool?(Zd.internal=!0,b=new Sc,Zd.internal=!1):(b=Sc.zpp_pool,Sc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Sc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Sc.zpp_pool;Sc.zpp_pool=
this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Sc};var vi=function(){this.zpp_inner=null;this.zpp_inner=new Zd;this.zpp_inner.outer=this};h["nape.phys.CompoundList"]=vi;vi.__name__=["nape","phys","CompoundList"];vi.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=
!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Sc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:vi,__properties__:{get_length:"get_length"}};var Rj=function(){this.zpp_inner=null};h["nape.phys.FluidProperties"]=
Rj;Rj.__name__=["nape","phys","FluidProperties"];Rj.prototype={toString:function(){return"{ density: "+1E3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+B.string(this.zpp_inner.wrap_gravity)+" }"},__class__:Rj};var Mf=function(){};h["nape.phys.GravMassMode"]=Mf;Mf.__name__=["nape","phys","GravMassMode"];Mf.prototype={toString:function(){var a;null==f.GravMassMode_DEFAULT&&(f.internal=!0,f.GravMassMode_DEFAULT=new Mf,f.internal=!1);this==f.GravMassMode_DEFAULT?a="DEFAULT":
(null==f.GravMassMode_FIXED&&(f.internal=!0,f.GravMassMode_FIXED=new Mf,f.internal=!1),this==f.GravMassMode_FIXED?a="FIXED":(null==f.GravMassMode_SCALED&&(f.internal=!0,f.GravMassMode_SCALED=new Mf,f.internal=!1),a=this==f.GravMassMode_SCALED?"SCALED":""));return a},__class__:Mf};var Mg=function(){};h["nape.phys.InertiaMode"]=Mg;Mg.__name__=["nape","phys","InertiaMode"];Mg.prototype={toString:function(){var a;null==f.InertiaMode_DEFAULT&&(f.internal=!0,f.InertiaMode_DEFAULT=new Mg,f.internal=!1);
this==f.InertiaMode_DEFAULT?a="DEFAULT":(null==f.InertiaMode_FIXED&&(f.internal=!0,f.InertiaMode_FIXED=new Mg,f.internal=!1),a=this==f.InertiaMode_FIXED?"FIXED":"");return a},__class__:Mg};var zc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.phys.InteractorIterator"]=zc;zc.__name__=["nape","phys","InteractorIterator"];zc.get=function(a){var b;null==zc.zpp_pool?(Nf.internal=!0,b=new zc,Nf.internal=!1):(b=zc.zpp_pool,zc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=
a;b.zpp_critical=!1;return b};zc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=zc.zpp_pool;zc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:zc};var Sj=function(){this.zpp_inner=null};h["nape.phys.InteractorList"]=Sj;Sj.__name__=["nape","phys","InteractorList"];Sj.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},
toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=zc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Sj,__properties__:{get_length:"get_length"}};var Qc=function(){};h["nape.phys.MassMode"]=Qc;Qc.__name__=["nape","phys","MassMode"];Qc.prototype={toString:function(){var a;null==f.MassMode_DEFAULT&&(f.internal=!0,f.MassMode_DEFAULT=new Qc,f.internal=!1);this==f.MassMode_DEFAULT?a=
"DEFAULT":(null==f.MassMode_FIXED&&(f.internal=!0,f.MassMode_FIXED=new Qc,f.internal=!1),a=this==f.MassMode_FIXED?"FIXED":"");return a},__class__:Qc};var $d=function(a,b,c,d,e){null==e&&(e=0.001);null==d&&(d=1);null==c&&(c=2);null==b&&(b=1);null==a&&(a=0);this.zpp_inner=null;null==ra.zpp_pool?this.zpp_inner=new ra:(this.zpp_inner=ra.zpp_pool,ra.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;a!=this.zpp_inner.elasticity&&(this.zpp_inner.elasticity=a/1,this.zpp_inner.invalidate(ra.WAKE|
ra.ARBITERS));this.zpp_inner.elasticity;b!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=b/1,this.zpp_inner.invalidate(ra.WAKE|ra.ANGDRAG|ra.ARBITERS));this.zpp_inner.dynamicFriction;c!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=c/1,this.zpp_inner.invalidate(ra.WAKE|ra.ARBITERS));this.zpp_inner.staticFriction;d!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=d/1E3,this.zpp_inner.invalidate(ra.WAKE|ra.PROPS));1E3*this.zpp_inner.density;e!=this.zpp_inner.rollingFriction&&
(this.zpp_inner.rollingFriction=e/1,this.zpp_inner.invalidate(ra.WAKE|ra.ARBITERS));this.zpp_inner.rollingFriction};h["nape.phys.Material"]=$d;$d.__name__=["nape","phys","Material"];$d.prototype={toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1E3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},__class__:$d};var Se=function(){this.zpp_inner_i=
this.zpp_inner=null};h["nape.shape.Shape"]=Se;Se.__name__=["nape","shape","Shape"];Se.__super__=Pc;Se.prototype=y(Pc.prototype,{isPolygon:function(){return this.zpp_inner.type==f.id_ShapeType_POLYGON},get_body:function(){return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},get_castPolygon:function(){return this.zpp_inner.type==f.id_ShapeType_POLYGON?this.zpp_inner.polygon.outer_zn:null},toString:function(){return(this.zpp_inner.type==f.id_ShapeType_CIRCLE?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},
__class__:Se,__properties__:y(Pc.prototype.__properties__,{get_castPolygon:"get_castPolygon",get_body:"get_body"})});var wi=function(){this.zpp_inner=null};h["nape.shape.Edge"]=wi;wi.__name__=["nape","shape","Edge"];wi.prototype={toString:function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" }";this.zpp_inner.polygon.validate_gaxi();
return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+("{ x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" }")+" }"},__class__:wi};var Tc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.shape.EdgeIterator"]=Tc;Tc.__name__=["nape","shape","EdgeIterator"];Tc.get=function(a){var b;null==Tc.zpp_pool?(Of.internal=!0,b=new Tc,Of.internal=!1):(b=Tc.zpp_pool,Tc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=
a;b.zpp_critical=!1;return b};Tc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Tc.zpp_pool;Tc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Tc};var Tj=function(){this.zpp_inner=null};h["nape.shape.EdgeList"]=Tj;Tj.__name__=["nape","shape","EdgeList"];Tj.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&a!=this.get_length()-1&&(a=this.get_length()-2-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;
return this.zpp_inner.at_ite.elt.wrapper()},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Tc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Tj,__properties__:{get_length:"get_length"}};var tb=function(a,b,c){this.zpp_inner_zn=null;Se.call(this);this.zpp_inner_zn=new Ng;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;
this.zpp_inner_i.outer_i=this;if(a instanceof Array&&null==a.__enum__)for(var d=0;d<a.length;){var e=a[d];++d;var g=e;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(l.get(function(){g.zpp_inner.validate();return g.zpp_inner.x}(this),function(){g.zpp_inner.validate();return g.zpp_inner.y}(this),!1))}else if(x.__instanceof(a,Pd))for(d=a.iterator();d.hasNext();){var p;d.zpp_critical=!1;p=d.zpp_inner.at(d.zpp_i++);null==this.zpp_inner_zn.wrap_lverts&&
this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(l.get(function(){p.zpp_inner.validate();return p.zpp_inner.x}(this),function(){p.zpp_inner.validate();return p.zpp_inner.y}(this),!1))}else if(x.__instanceof(a,pi)&&(d=a.zpp_inner.vertices,null!=d)){e=d;do{var f=l.get(e.x,e.y,null),e=e.next;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(l.get(function(){f.zpp_inner.validate();return f.zpp_inner.x}(this),function(){f.zpp_inner.validate();
return f.zpp_inner.y}(this),!1));f.dispose()}while(e!=d)}if(a instanceof Array&&null==a.__enum__)for(d=0;d<a.length;){var e=a[d],j;if(j=e.zpp_inner.weak)e.dispose(),j=!0;j?a.splice(d,1):d++}else if(x.__instanceof(a,Pd)){null!=a.zpp_inner._validate&&a.zpp_inner._validate();a=a.zpp_inner.inner;d=null;for(e=a.head;null!=e;)j=e.elt,j.outer.zpp_inner.weak?(e=a.erase(d),j.outer.zpp_inner.weak?(j.outer.dispose(),!0):!1):(d=e,e=e.next)}null==b?(null==ra.zpp_pool?this.zpp_inner.material=new ra:(this.zpp_inner.material=
ra.zpp_pool,ra.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(b.zpp_inner),this.zpp_inner.material.wrapper());null==c?(null==xc.zpp_pool?this.zpp_inner.filter=new xc:(this.zpp_inner.filter=xc.zpp_pool,xc.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(c.zpp_inner),this.zpp_inner.filter.wrapper());
this.zpp_inner_i.insert_cbtype(gb.ANY_SHAPE.zpp_inner)};h["nape.shape.Polygon"]=tb;tb.__name__=["nape","shape","Polygon"];tb.__super__=Se;tb.prototype=y(Se.prototype,{__class__:tb});var yd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};h["nape.shape.ShapeIterator"]=yd;yd.__name__=["nape","shape","ShapeIterator"];yd.get=function(a){var b;null==yd.zpp_pool?(Uc.internal=!0,b=new yd,Uc.internal=!1):(b=yd.zpp_pool,yd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=
!1;return b};yd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=yd.zpp_pool;yd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:yd};var xi=function(){this.zpp_inner=null;this.zpp_inner=new Uc;this.zpp_inner.outer=this};h["nape.shape.ShapeList"]=xi;xi.__name__=["nape","shape","ShapeList"];xi.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},
push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&
this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},pop:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();var a=null;if(this.zpp_inner.reverse_flag){var a=this.zpp_inner.inner.head.elt,b=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(b);this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-
2),a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}this.zpp_inner.invalidate();return a.outer},shift:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();var a=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var b;b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-
2);var a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}else a=this.zpp_inner.inner.head.elt,b=a.outer,null!=this.zpp_inner.subber&&this.zpp_inner.subber(b),this.zpp_inner.dontremove||this.zpp_inner.inner.pop();this.zpp_inner.invalidate();return a.outer},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},clear:function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();
for(c=yd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:xi,__properties__:{get_length:"get_length"}};var Og=function(){};h["nape.shape.ShapeType"]=Og;Og.__name__=["nape","shape","ShapeType"];Og.prototype={toString:function(){var a;null==f.ShapeType_CIRCLE&&(f.internal=!0,f.ShapeType_CIRCLE=new Og,f.internal=!1);this==f.ShapeType_CIRCLE?a="CIRCLE":(null==f.ShapeType_POLYGON&&(f.internal=!0,f.ShapeType_POLYGON=
new Og,f.internal=!1),a=this==f.ShapeType_POLYGON?"POLYGON":"");return a},__class__:Og};var Te=function(){};h["nape.shape.ValidationResult"]=Te;Te.__name__=["nape","shape","ValidationResult"];Te.prototype={toString:function(){var a;null==f.ValidationResult_VALID&&(f.internal=!0,f.ValidationResult_VALID=new Te,f.internal=!1);this==f.ValidationResult_VALID?a="VALID":(null==f.ValidationResult_DEGENERATE&&(f.internal=!0,f.ValidationResult_DEGENERATE=new Te,f.internal=!1),this==f.ValidationResult_DEGENERATE?
a="DEGENERATE":(null==f.ValidationResult_CONCAVE&&(f.internal=!0,f.ValidationResult_CONCAVE=new Te,f.internal=!1),this==f.ValidationResult_CONCAVE?a="CONCAVE":(null==f.ValidationResult_SELF_INTERSECTING&&(f.internal=!0,f.ValidationResult_SELF_INTERSECTING=new Te,f.internal=!1),a=this==f.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":"")));return a},__class__:Te};var Ue=function(){};h["nape.space.Broadphase"]=Ue;Ue.__name__=["nape","space","Broadphase"];Ue.prototype={toString:function(){var a;
null==f.Broadphase_DYNAMIC_AABB_TREE&&(f.internal=!0,f.Broadphase_DYNAMIC_AABB_TREE=new Ue,f.internal=!1);this==f.Broadphase_DYNAMIC_AABB_TREE?a="DYNAMIC_AABB_TREE":(null==f.Broadphase_SWEEP_AND_PRUNE&&(f.internal=!0,f.Broadphase_SWEEP_AND_PRUNE=new Ue,f.internal=!1),a=this==f.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"");return a},__class__:Ue};var Pf=function(a,b){this.zpp_inner=null;this.zpp_inner=new yi(null==a?null:a.zpp_inner,b);this.zpp_inner.outer=this;null!=a&&(a.zpp_inner.weak?(a.dispose(),
!0):!1)};h["nape.space.Space"]=Pf;Pf.__name__=["nape","space","Space"];Pf.prototype={step:function(a,b,c){null==c&&(c=10);null==b&&(b=10);this.zpp_inner.step(a,b,c)},rayMultiCast:function(a,b,c,d){null==b&&(b=!1);return this.zpp_inner.rayMultiCast(a,b,c,d)},__class__:Pf};var J=function(a){this.classType=xa.getClass(this);this._elementManager=new Qf(a,oa.STAGE_CENTER_X,280,!0);this._useClickWall()&&(this._clickWall=this._elementManager.root.addElement(new Fa({color:16711680,sizeX:oa.STAGE_WIDTH,sizeY:560,
alpha:0})));this._elementManager.addLayer("ui_default");this._tween=new Ve;this._buildScreen();this._onEventResizeCanvas();this.doDelete=!1;this._setState(ta.IN);this._addEventListeners()};h["workinman.ui.ScreenBase"]=J;J.__name__=["workinman","ui","ScreenBase"];J.prototype={dispose:function(){this._removeEventListeners();this._clickWall=null;null!=this._elementManager&&(this._elementManager.dispose(),this._elementManager=null);null!=this._tween&&(this._tween.dispose(),this._tween=null);this.classType=
this._state=null},_buildScreen:function(){},_addEventListeners:function(){u.resizeCanvas.add(n(this,this._handleResizeCanvas));z.eventInput.add(n(this,this._handleInput))},_removeEventListeners:function(){u.resizeCanvas.remove(n(this,this._handleResizeCanvas));z.eventInput.remove(n(this,this._handleInput))},get_root:function(){return this._elementManager.root},_useClickWall:function(){return!0},_setState:function(a){if(this._state!=a)switch(this._state=a,this._state[1]){case 0:this._setInState();
break;case 2:this._setOpenedState()}},_setInState:function(){this._finishInState()},_finishInState:function(){this._setState(ta.OPENED);je.eventFlowDelegate.dispatch(ca.OPEN_COMPLETE,this.classType)},_setCloseState:function(){this._finishCloseState()},_finishCloseState:function(){this.doDelete=!0;je.eventFlowDelegate.dispatch(ca.CLOSE_COMPLETE,this.classType)},_setOpenedState:function(){},update:function(a){this._tween.update(a);this._elementManager.update(a)},_handleInput:function(a,b){!1!=this._clearInput()&&
this._onInput(a,b)},_onInput:function(){},open:function(a){null==a&&(a=!0);a?this._setState(ta.IN):this._finishInState()},close:function(a){null==a&&(a=!0);this._state!=ta.OUT&&(this._setState(ta.OUT),a?this._setCloseState():this._finishCloseState())},_handleResizeCanvas:function(){null!=this._clickWall&&(this._clickWall.sizeX=Math.floor(oa.STAGE_WIDTH),this._clickWall.sizeY=Math.floor(560));this._onEventResizeCanvas()},_onEventResizeCanvas:function(){},_clearInput:function(){return this._state!=
ta.OPENED?!1:!0},_clearButtonInput:function(){return this._state!=ta.OPENED?!1:!0},__class__:J,__properties__:{get_root:"get_root"}};var ig=function(a){J.call(this,a)};h["screen.ScreenDebug"]=ig;ig.__name__=["screen","ScreenDebug"];ig.__super__=J;ig.prototype=y(J.prototype,{_buildScreen:function(){this._tray=this._elementManager.addElement(new Fa({color:0,sizeX:oa.STAGE_WIDTH,sizeY:560,alpha:0.5}));this._tray.alpha=0;var a=this._tray.addElement(new O({text:"debug.debugfield",y:-260,scale:0.5}));a.setVariables(["Debug Screen"]);
a=this._tray.addElement(new O({text:"debug.debugfield",y:260,scale:0.5}));a.setVariables(["Game Version: 1.0.0"]);this._buildButtons()},dispose:function(){J.prototype.dispose.call(this);this._tray=null},_addButton:function(a,b,c,d){b=this._tray.addElement(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),x:b-oa.STAGE_CENTER_X,y:c-280}));b.eventClick.add(d);b.addElement(new O({text:"debug.debugfield"})).setVariables([a])},_setInState:function(){ma.easeBounceIn(this._tray,this._tween).onComplete(n(this,
this._finishInState))},_setCloseState:function(){ma.easeBounceOut(this._tray,this._tween).onComplete(n(this,this._finishCloseState))},_buildButtons:function(){this._addButton("X",50,50,n(this,this._onCloseClick))},_onCloseClick:function(){u.flow.dispatch("DEBUG_CLOSE")},__class__:ig});var rd=function(a){J.call(this,a)};h["screen.ScreenEndGame"]=rd;rd.__name__=["screen","ScreenEndGame"];rd.__super__=J;rd.prototype=y(J.prototype,{_buildScreen:function(){this._edFlipside=this._edFlipping=this._curtainsAnimated=
this._curtainsAnimating=this._readyToClose=this._closing=!1;this._tray=this._elementManager.addElement(new P({scale:0}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial",x:-115}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial",x:115}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial"}));this._tray.addChild(new P({asset:"intro_ending/employeeofthemonth",y:-165}));this._tray.addChild(new P({asset:"intro_ending/microwave",x:0,y:5}));this._tray.addChild(new P({asset:"intro_ending/monthcard",
x:0,y:135}));this._tray.addChild(new O({text:"intro.eotm",y:-190,color:16760901}));this._tray.addChild(new O({text:"intro.eotm2",y:-145,color:16760901}));this._tray.addChild(new O({text:"intro.april",x:0,y:133,color:0}));this._leftCurtain=this._tray.addChild(new v({asset:"dressup/curtains_l",x:-225,y:0,scaleX:1.05,scaleY:1.25}));this._rightCurtain=this._tray.addChild(new v({asset:"dressup/curtains_r",x:240,y:0,scaleX:1.05,scaleY:1.25}));this._dialogueBox=this._tray.addChild(new ae({tween:this._tween,
x:-40,y:210},!0));this._dialogueLineTimer=1;this._dialogueQueue=["end_month.end1","end_month.end2"];this._animQueue=["idle_positive","idle"];this._dialogueQueue.reverse();this._animQueue.reverse();this._kel=this._tray.addChild(new zd({library:"kel",x:350,y:360,scale:0.5}));this._kel.animate("idle")},dispose:function(){this._tray=null;J.prototype.dispose.call(this)},update:function(a){J.prototype.update.call(this,a);this._dialogueBox.get_doneDisplaying()&&!this._readyToClose&&(this._dialogueLineTimer-=
a,0>=this._dialogueLineTimer&&(0<this._dialogueQueue.length?(q.setString("STRING_DIALOGUE",this._dialogueQueue.pop()),a=this._animQueue.pop(),this._kel.get_currentAnimation()!=a&&this._kel.animate(a,0,1,0,!0),this._dialogueLineTimer=99999):this._checkEnd()))},_setInState:function(){ma.easeBounceIn(this._tray,this._tween);ma.easeBounceIn(this._dialogueBox,this._tween,!0,1.25).onComplete(n(this,this._finishInState))},_setCloseState:function(){ma.easeBounceOut(this._tray,this._tween).onComplete(n(this,
this._finishCloseState))},_onInput:function(a,b){switch(a[1]){case 0:case 2:b&&this._state==ta.OPENED&&(this._readyToClose?this._checkEnd():this._dialogueBox.get_doneDisplaying()?0<this._dialogueQueue.length?this._dialogueLineTimer=0:this._checkEnd():this._dialogueBox.skipToEnd())}},_openCurtains:function(){var a=this;this._curtainsAnimating=!0;q.setString("STRING_DIALOGUE","empty.empty");ma.easeBounceOut(this._dialogueBox,this._tween).onComplete(function(){a._tween.tween({target:a._leftCurtain,duration:1,
delay:0.25,ease:s.inOutQuad},{x:-780});a._tween.tween({target:a._rightCurtain,duration:1,delay:0.25,ease:s.inOutQuad},{x:780}).onComplete(function(){a._dialogueLineTimer=1;a._dialogueQueue=["end_month.end3","end_month.end4"];a._animQueue=["idle_shock","idle"];a._dialogueQueue.reverse();a._animQueue.reverse();ma.easeBounceIn(a._dialogueBox,a._tween,!0,1).onComplete(function(){a._curtainsAnimated=!0})})})},_transitionEd:function(){var a=this;this._edFlipping=!0;q.setString("STRING_DIALOGUE","empty.empty");
ma.easeBounceOut(this._dialogueBox,this._tween).onComplete(function(){a._kel.scaleX*=-1;a._tween.tween({target:a._kel,duration:1.5,ease:s.linear},{x:650}).onComplete(function(){a._kel.set_x(-650);a._dialogueBox.reverse();a._tween.tween({target:a._kel,duration:1.5,ease:s.linear},{x:-350}).onComplete(function(){a._dialogueLineTimer=1;a._dialogueQueue=["end_month.end5"];a._animQueue=["idle_positive"];a._dialogueQueue.reverse();a._animQueue.reverse();ma.easeBounceIn(a._dialogueBox,a._tween,!0,1).onComplete(function(){a._edFlipside=
!0})})})})},_checkEnd:function(){!1==this._curtainsAnimated?!1==this._curtainsAnimating&&this._openCurtains():!1==this._edFlipside?!1==this._edFlipping&&this._transitionEd():!1==this._closing&&(this._closing=!0,u.flow.dispatch("GAMEPLAY_QUIT_YES"))},__class__:rd});var Jd=function(a){J.call(this,a)};h["screen.ScreenEndWeek"]=Jd;Jd.__name__=["screen","ScreenEndWeek"];Jd.__super__=J;Jd.prototype=y(J.prototype,{_buildScreen:function(){this._closing=!1;this._tray=this._elementManager.addElement(new P({scale:0}));
this._tray.addChild(new P({asset:"intro_ending/bg_interstitial",x:-115}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial",x:115}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial"}));this._tray.addChild(new P({asset:"intro_ending/calendar"}));1==L.saveData.curWeek?(this._curWeekCrossOne=this._tray.addChild(new P({asset:"intro_ending/strikethrough",y:-100,x:-227,originX:0})),this._curWeekCrossTwo=this._tray.addChild(new P({asset:"intro_ending/strikethrough",y:-45,x:-227,
originX:0}))):2==L.saveData.curWeek&&(this._tray.addChild(new P({asset:"intro_ending/strikethrough",y:-100})),this._tray.addChild(new P({asset:"intro_ending/strikethrough",y:-45})),this._curWeekCrossOne=this._tray.addChild(new P({asset:"intro_ending/strikethrough",y:10,x:-227,originX:0})),this._curWeekCrossTwo=this._tray.addChild(new P({asset:"intro_ending/strikethrough",y:65,x:-227,originX:0})));this._dialogueBox=this._tray.addChild(new ae({tween:this._tween,x:-40,y:210},!0));this._dialogueLineTimer=
1;var a=A.randomFloat(0,1);this._dialogueQueue=0.25>a?["end_week.week2"]:0.5>a?["end_week.week2"]:0.75>a?["end_week.week3"]:["end_week.week4"];this._animQueue=["idle"];this._dialogueQueue.reverse();this._animQueue.reverse();this._kel=this._tray.addChild(new zd({library:"kel",x:350,y:360,scale:0.5}));this._kel.animate("idle");this._curWeekCrossOne.scaleX=0;this._curWeekCrossTwo.scaleX=0},dispose:function(){this._tray=null;J.prototype.dispose.call(this)},update:function(a){J.prototype.update.call(this,
a);this._dialogueBox.get_doneDisplaying()&&!this._readyToClose&&(this._dialogueLineTimer-=a,0>=this._dialogueLineTimer&&(0<this._dialogueQueue.length?(q.setString("STRING_DIALOGUE",this._dialogueQueue.pop()),a=this._animQueue.pop(),this._kel.get_currentAnimation()!=a&&this._kel.animate(a,0,1,0,!0),this._dialogueLineTimer=99999):!1==this._closing&&(this._closing=!0,u.flow.dispatch("END_GAME_PLAY_AGAIN"))))},_setInState:function(){ma.easeBounceIn(this._tray,this._tween);this._tween.tween({target:this._curWeekCrossOne,
duration:0.3,delay:1,ease:s.outQuad},{scaleX:1});this._tween.tween({target:this._curWeekCrossTwo,duration:0.3,delay:1.25,ease:s.outQuad},{scaleX:1});ma.easeBounceIn(this._dialogueBox,this._tween,!0,2).onComplete(n(this,this._finishInState))},_setCloseState:function(){ma.easeBounceOut(this._tray,this._tween).onComplete(n(this,this._finishCloseState));u.introSceneOver.dispatch()},_onInput:function(a,b){switch(a[1]){case 0:case 2:b&&this._state==ta.OPENED&&(this._readyToClose?!1==this._closing&&(this._closing=
!0,u.flow.dispatch("END_GAME_PLAY_AGAIN")):this._dialogueBox.get_doneDisplaying()?0<this._dialogueQueue.length?this._dialogueLineTimer=0:!1==this._closing&&(this._closing=!0,u.flow.dispatch("END_GAME_PLAY_AGAIN")):this._dialogueBox.skipToEnd())}},__class__:Jd});var V=function(a){J.call(this,a)};h["screen.ScreenGameplayHud"]=V;V.__name__=["screen","ScreenGameplayHud"];V.__super__=J;V.prototype=y(J.prototype,{_buildScreen:function(){this._pauseButton=this._elementManager.addElement(new ea({tween:this._tween,
clear:n(this,this._clearButtonInput),assetUp:"pause",x:oa.STAGE_CENTER_X-50,y:-230}));this._pauseButton.eventClick.add(n(this,this._onEventPauseClick));this._noInputTimeout=10;this._hands=[];this._usedTimerIds=[]},dispose:function(){this._pauseButton=null;for(var a=0,b=this._usedTimerIds;a<b.length;){var c=b[a];++a;C.stop("ingamehand"+c)}this._usedTimerIds=this._hands=null;J.prototype.dispose.call(this)},_addEventListeners:function(){J.prototype._addEventListeners.call(this);u.goodInput.add(n(this,
this._resetNoInputAnimation))},_removeEventListeners:function(){J.prototype._removeEventListeners.call(this);u.goodInput.remove(n(this,this._resetNoInputAnimation))},update:function(a){J.prototype.update.call(this,a);!0!=q.getBool("BOOL_PAUSED")&&0<this._noInputTimeout&&(this._noInputTimeout-=a,0>=this._noInputTimeout&&this._playNoInputAnimation())},_setInState:function(){ma.easeBounceIn(this._pauseButton,this._tween,!0,0.4);this._finishInState()},_onEventResizeCanvas:function(){this._pauseButton.pos.x=
oa.STAGE_CENTER_X-37.5},_onEventPauseClick:function(){u.flow.dispatch("GAMEPLAY_MENU");m.playSound("pause_screen/button_click_02")},_onInput:function(a,b){if(!1!=b)switch(a[1]){case 4:this._onEventPauseClick()}},_playNoInputAnimation:function(){for(var a=0,b=this._hands;a<b.length;){var c=b[a];++a;c.alpha=1}},_resetNoInputAnimation:function(){this._noInputTimeout=10;for(var a=0,b=this._hands;a<b.length;){var c=b[a];++a;c.alpha=0}},_addTapHereHand:function(a,b,c,d){this._hands.push(this._elementManager.addElement(new za({library:"tutorial_hand",
x:a,y:b,alpha:0})));this._hands[this._hands.length-1].inputEnabled=!1;this._playTapHereAnim(this._hands.length-1,c,d)},_playTapHereAnim:function(a,b,c){var d=this;C.start(function(){null==d._hands||d._hands.length<a||null==d._hands[a]||(d._hands[a].animate("tut_in",1,1,0,!0),d._hands[a].queueAnimation(b,1,1),d._hands[a].queueAnimation("tut_out",1,1),d._playTapHereAnim(a,b,4.6667))},c,"ingamehand"+V._timerId);this._usedTimerIds.push(V._timerId);V._timerId++},__class__:V});var xe=function(a){J.call(this,
a)};h["screen.ScreenGameplayHud_CornCare"]=xe;xe.__name__=["screen","ScreenGameplayHud_CornCare"];xe.__super__=V;xe.prototype=y(V.prototype,{_buildScreen:function(){this._eleTray=this._elementManager.addElement(new v({}));this._cornWarning=this._elementManager.addElement(new v({x:oa.STAGE_CENTER_X-75,y:205}));var a=this._cornWarning.addChild(new ea({tween:this._tween,clear:n(this,this._alwaysAllowButtonInput)}));a.eventClick.add(n(this,this._firePopupImmediately));a.setScale(0.45,0.45);this._clickWall=
this._eleTray.addChild(new Fa({color:16711680,sizeX:oa.STAGE_WIDTH,sizeY:560,alpha:0}));this._eleTray.addChild(new v({asset:"corn_care/bg_corncare"}));this._iteration=A.randomInt(0,3);this._heartSprites=[];this._eleTray.addChild(new v({asset:"corn_care/health",x:220,y:-140}));this._eleTray.addChild(new v({asset:"corn_care/ui_heart_half_l",x:139,y:-148,originX:1}));this._heartSprites.push(this._eleTray.addChild(new v({asset:"corn_care/ui_heart_full",x:139,y:-148,alpha:0})));this._heartSprites.push(this._eleTray.addChild(new v({asset:"corn_care/ui_heart_half_l",
x:193,y:-148,originX:1,alpha:0})));this._heartSprites.push(this._eleTray.addChild(new v({asset:"corn_care/ui_heart_full",x:193,y:-148,alpha:0})));this._heartSprites.push(this._eleTray.addChild(new v({asset:"corn_care/ui_heart_half_l",x:247,y:-148,originX:1,alpha:0})));this._heartSprites.push(this._eleTray.addChild(new v({asset:"corn_care/ui_heart_full",x:247,y:-148,alpha:0})));this._heartSprites.push(this._eleTray.addChild(new v({asset:"corn_care/ui_heart_half_l",x:301,y:-148,originX:1,alpha:0})));
this._heartSprites.push(this._eleTray.addChild(new v({asset:"corn_care/ui_heart_full",x:301,y:-148,alpha:0})));this._noInputTimeout=20;this._hands=[];this._usedTimerIds=[];switch(this._iteration){case 0:this._eleTray.addChild(new v({asset:"corn_care/corn",x:-100,y:60}));this._animEle=null;this._button=this._eleTray.addChild(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"corn_care/dish",x:140,y:120}));this._button.eventClick.add(n(this,this._hungryAnim));this._eleTray.addChild(new O({text:"corn_care.hungry",
color:0,y:170}));this._addTapHereHand(140,120,"tut_tap_1",0);break;case 1:this._animEle=null;this._button=this._eleTray.addChild(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"corn_care/corn",x:0,y:80}));this._button.eventClick.add(n(this,this._tiredAnim));this._eleTray.addChild(new O({text:"corn_care.tired",color:0,y:170}));this._addTapHereHand(0,80,"tut_tap_1",0);break;case 2:this._eleTray.addChild(new v({asset:"corn_care/corn",x:140,y:120}));this._animEle=this._eleTray.addChild(new P({x:-40,
y:70}));this._button=this._animEle.addChild(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"corn_care/ball"}));this._button.eventClick.add(n(this,this._playAnim));this._eleTray.addChild(new O({text:"corn_care.play",color:0,y:170}));this._addTapHereHand(-40,70,"tut_tap_1",0);break;case 3:this._eleTray.addChild(new v({asset:"corn_care/corn",x:-100,y:100}));this._animEle=null;this._button=this._eleTray.addChild(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"corn_care/bottle",
x:140,y:40}));this._button.eventClick.add(n(this,this._bathAnim));this._eleTray.addChild(new O({text:"corn_care.bath",color:0,y:170}));this._addTapHereHand(140,40,"tut_tap_1",0);break;case 4:this._eleTray.addChild(new v({asset:"corn_care/corn",x:140,y:120})),this._animEle=null,this._button=this._eleTray.addChild(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"corn_care/ball",x:-40,y:70})),this._button.eventClick.add(n(this,this._escapedAnim)),this._eleTray.addChild(new O({text:"corn_care.escaped",
color:0,y:170})),this._addTapHereHand(-40,70,"tut_tap_1",0)}this._eleTray.addChild(new v({asset:"corn_care/phone",y:40,scaleX:1.01})).inputEnabled=!1;this._eleTray.pos.to(0,600);this._blinkIterations=0},dispose:function(){this._button=this._animEle=this._heartSprites=this._eleTray=this._cornWarning=null;q.setBool("BOOL_CORN_CARE_OPEN",!1);V.prototype.dispose.call(this)},update:function(a){V.prototype.update.call(this,a);0<this._noInputTimeout&&(this._noInputTimeout-=a,0>=this._noInputTimeout&&this._playNoInputAnimation())},
_setInState:function(){var a=this;C.start(function(){a._cornWarning.alpha=0;C.start(function(){a._cornWarning.alpha=1;a._blinkIterations++;8>a._blinkIterations?a._setInState():(a._cornWarning.alpha=0,a._tween.tween({target:a._eleTray,duration:0.45,ease:s.outQuad},{y:0}).onComplete(n(a,a._finishInState)),q.setBool("BOOL_CORN_CARE_OPEN",!0))},0.125,"blink")},0.25,"blink")},_setCloseState:function(){this._tween.tween({target:this._eleTray,duration:0.45,ease:s.inQuad},{y:500}).onComplete(n(this,this._finishCloseState))},
_onEventResizeCanvas:function(){},_onInput:function(a,b){!1!=b&&(this._resetNoInputAnimation(),V.prototype._onInput.call(this,a,b))},_onEventWinClick:function(){this._button.disable();this._fillHearts()},_useClickWall:function(){return!1},_firePopupImmediately:function(){this._blinkIterations=999999},_fillHearts:function(){for(var a=0,b=this._heartSprites.length;a<b;){var c=a++;this._tween.tween({target:this._heartSprites[c],duration:0.075,delay:0.1*c,ease:s.linear},{alpha:1})}C.start(function(){u.cornCareClose.dispatch()},
1,"endcorncare")},_hungryAnim:function(){this._onEventWinClick();m.playSound("corn_care/growling_corn_hungry");this._tween.tween({target:this._eleTray.addChild(new v({asset:"corn_care/food",x:140,y:-110})),ease:s.inQuad,duration:0.45},{y:90,rotation:15})},_tiredAnim:function(){this._onEventWinClick();m.playSound("taking_orders/cornsnore");var a=this._eleTray.addChild(new O({text:"corn_care.z",x:0,y:40,alpha:0,color:0}));this._tween.tween({target:a,ease:s.outQuad,duration:0.45},{x:-10,y:10,rotation:-15,
alpha:1});this._tween.tween({target:a,ease:s.inQuad,duration:0.35},{alpha:0});a=this._eleTray.addChild(new O({text:"corn_care.z",x:10,y:20,alpha:0,color:0}));this._tween.tween({target:a,ease:s.outQuad,duration:0.45,delay:0.25},{x:20,y:-10,rotation:15,alpha:1,scale:1.2});this._tween.tween({target:a,ease:s.inQuad,duration:0.35},{alpha:0});a=this._eleTray.addChild(new O({text:"corn_care.z",x:-15,y:0,alpha:0,color:0}));this._tween.tween({target:a,ease:s.outQuad,duration:0.45,delay:0.5},{x:-25,y:-30,rotation:-15,
alpha:1,scale:1.5});this._tween.tween({target:a,ease:s.inQuad,duration:0.35},{alpha:0})},_playAnim:function(){this._onEventWinClick();m.playSound("corn_care/ball_bouncing_corn_play");this._tween.tween({target:this._animEle,ease:s.outQuad,duration:0.12,thread:"y"},{x:-80,y:0});this._tween.tween({target:this._animEle,ease:s.inQuad,duration:0.12,overwrite:!1,thread:"y"},{y:70}).onComplete(function(){m.playSound("corn_care/ball_bouncing_corn_play")});this._tween.tween({target:this._animEle,ease:s.outQuad,
duration:0.12,overwrite:!1,thread:"y"},{y:0});this._tween.tween({target:this._animEle,ease:s.inQuad,duration:0.12,overwrite:!1,thread:"y"},{y:70}).onComplete(function(){m.playSound("corn_care/ball_bouncing_corn_play")});this._tween.tween({target:this._animEle,ease:s.outQuad,duration:0.12,overwrite:!1,thread:"y"},{y:0});this._tween.tween({target:this._animEle,ease:s.inQuad,duration:0.12,overwrite:!1,thread:"y"},{y:70}).onComplete(function(){m.playSound("corn_care/ball_bouncing_corn_play")});this._tween.tween({target:this._animEle,
ease:s.outQuad,duration:0.12,overwrite:!1,thread:"y"},{y:0});this._tween.tween({target:this._animEle,ease:s.inQuad,duration:0.12,overwrite:!1,thread:"y"},{y:70});this._tween.tween({target:this._animEle,ease:s.inQuad,duration:0.12,thread:"x"},{x:-80,y:0});this._tween.tween({target:this._animEle,ease:s.outQuad,duration:0.12,overwrite:!1,thread:"x"},{x:-120});this._tween.tween({target:this._animEle,ease:s.inQuad,duration:0.12,overwrite:!1,thread:"x"},{x:-80});this._tween.tween({target:this._animEle,
ease:s.outQuad,duration:0.12,overwrite:!1,thread:"x"},{x:-40});this._tween.tween({target:this._animEle,ease:s.inQuad,duration:0.12,overwrite:!1,thread:"x"},{x:0});this._tween.tween({target:this._animEle,ease:s.outQuad,duration:0.12,overwrite:!1,thread:"x"},{x:40});this._tween.tween({target:this._animEle,ease:s.inQuad,duration:0.12,overwrite:!1,thread:"x"},{x:0});this._tween.tween({target:this._animEle,ease:s.outQuad,duration:0.12,overwrite:!1,thread:"x"},{x:-40})},_bathAnim:function(){this._onEventWinClick();
m.playSound("corn_care/spray_bottle_corn_bath");var a=this._eleTray.addChild(new v({asset:"corn_care/spray_water",x:60,y:0,alpha:0}));this._tween.tween({target:a,ease:s.inQuad,duration:0.25},{alpha:1});this._tween.tween({target:a,ease:s.outQuad,duration:0.25},{alpha:0}).onComplete(function(){m.playSound("corn_care/spray_bottle_corn_bath")});this._tween.tween({target:a,ease:s.inQuad,duration:0.25},{alpha:1});this._tween.tween({target:a,ease:s.outQuad,duration:0.25},{alpha:0})},_escapedAnim:function(){this._onEventWinClick()},
_alwaysAllowButtonInput:function(){return!0},_playNoInputAnimation:function(){V.prototype._playNoInputAnimation.call(this)},_resetNoInputAnimation:function(){V.prototype._resetNoInputAnimation.call(this)},__class__:xe});var lf=function(a){J.call(this,a)};h["screen.ScreenGameplayHud_DressUp"]=lf;lf.__name__=["screen","ScreenGameplayHud_DressUp"];lf.__super__=V;lf.prototype=y(V.prototype,{_buildScreen:function(){V.prototype._buildScreen.call(this);this._leftButton=this._elementManager.addElement(new ea({tween:this._tween,
clear:n(this,this._clearButtonInput),asset:"dressup/arrow_r",x:-240}));this._leftButton.setScale(-1,1);this._leftButton.eventClick.add(n(this,this._onLeftArrowClick));this._rightButton=this._elementManager.addElement(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),asset:"dressup/arrow_r",x:240}));this._rightButton.eventClick.add(n(this,this._onRightArrowClick));this._okButton=this._elementManager.addElement(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),asset:"dressup/button_ready",
x:oa.STAGE_CENTER_X-120,y:200}));this._okButton.setScale(0.75,0.75);this._okButton.addChild(new O({text:"common.ready",color:13378201,x:16,y:-11}));this._okButton.addChild(new O({text:"common.ready",x:20,y:-15}));this._okButton.eventClick.add(n(this,this._onOkClick));this._addTapHereHand(-240,0,"tut_tap_1",0.5);this._addTapHereHand(240,0,"tut_tap_1",1.75);this._addTapHereHand(oa.STAGE_CENTER_X-120,200,"tut_tap_1",3);!1==L.saveData.tutDressUpSeen&&(this._noInputTimeout=5)},dispose:function(){this._okButton=
this._rightButton=this._leftButton=null;V.prototype.dispose.call(this)},update:function(a){V.prototype.update.call(this,a)},_setInState:function(){this._finishInState()},_onEventResizeCanvas:function(){},_onInput:function(a,b){if(!1!=b)switch(V.prototype._onInput.call(this,a,b),a[1]){case 7:this._onLeftArrowClick();break;case 8:this._onRightArrowClick();break;case 2:this._onOkClick()}},_onLeftArrowClick:function(){this._resetNoInputAnimation();u.dressUpLeftClick.dispatch();m.playSound("pause_screen/button_click_01")},
_onRightArrowClick:function(){this._resetNoInputAnimation();u.dressUpRightClick.dispatch();m.playSound("pause_screen/button_click_02")},_onOkClick:function(){this._resetNoInputAnimation();q.setBool("BOOL_LEVEL_WIN",!0);m.playSound("pause_screen/button_click_01");m.playSound("pause_screen/button_click_02",0.5)},_playNoInputAnimation:function(){V.prototype._playNoInputAnimation.call(this)},_resetNoInputAnimation:function(){V.prototype._resetNoInputAnimation.call(this)},__class__:lf});var mf=function(a){J.call(this,
a)};h["screen.ScreenGameplayHud_OrderUp"]=mf;mf.__name__=["screen","ScreenGameplayHud_OrderUp"];mf.__super__=V;mf.prototype=y(V.prototype,{_buildScreen:function(){V.prototype._buildScreen.call(this);this._elementManager.addElement(new Sd({tween:this._tween,x:-oa.STAGE_CENTER_X+100,y:-240},!1));this._elementManager.addElement(new Sd({tween:this._tween,x:-oa.STAGE_CENTER_X+100,y:-180},!0));this._hands.push(this._elementManager.addElement(new za({library:"tutorial_hand",x:0,y:0,alpha:0,scale:0.7})));
this._hands[0].inputEnabled=!1;this._hands[0].animate("tut_in",1,1,0,!0);this._hands[0].queueAnimation("tut_tap_drag_line",0);!1==L.saveData.tutOrderUpSeen&&(this._noInputTimeout=5)},dispose:function(){V.prototype.dispose.call(this)},update:function(a){V.prototype.update.call(this,a)},_setInState:function(){this._finishInState()},_onEventResizeCanvas:function(){},_onInput:function(a,b){!1!=b&&V.prototype._onInput.call(this,a,b)},_playNoInputAnimation:function(){V.prototype._playNoInputAnimation.call(this)},
_resetNoInputAnimation:function(){V.prototype._resetNoInputAnimation.call(this)},__class__:mf});var nf=function(a){J.call(this,a)};h["screen.ScreenGameplayHud_SodaMachine"]=nf;nf.__name__=["screen","ScreenGameplayHud_SodaMachine"];nf.__super__=V;nf.prototype=y(V.prototype,{_buildScreen:function(){V.prototype._buildScreen.call(this);this._elementManager.addElement(new Sd({tween:this._tween,x:-oa.STAGE_CENTER_X+100,y:-240},!1));this._elementManager.addElement(new Sd({tween:this._tween,x:-oa.STAGE_CENTER_X+
100,y:-180},!0));this._addTapHereHand(-195,38,"tut_tap_2",0.5);this._addTapHereHand(5,38,"tut_tap_2",1.25);this._addTapHereHand(197,38,"tut_tap_2",2);!1==L.saveData.tutSodaMachineSeen&&(this._noInputTimeout=0.1)},dispose:function(){V.prototype.dispose.call(this)},update:function(a){V.prototype.update.call(this,a)},_setInState:function(){this._finishInState()},_onEventResizeCanvas:function(){},_onInput:function(a,b){!1!=b&&V.prototype._onInput.call(this,a,b)},_playNoInputAnimation:function(){V.prototype._playNoInputAnimation.call(this)},
_resetNoInputAnimation:function(){V.prototype._resetNoInputAnimation.call(this);this._noInputTimeout=3},__class__:nf});var of=function(a){J.call(this,a)};h["screen.ScreenGameplayHud_StackingFood"]=of;of.__name__=["screen","ScreenGameplayHud_StackingFood"];of.__super__=V;of.prototype=y(V.prototype,{_buildScreen:function(){V.prototype._buildScreen.call(this);this._elementManager.addElement(new Sd({tween:this._tween,x:oa.STAGE_CENTER_X-150,y:-150,scale:1.35},!1));this._elementManager.addElement(new Sd({tween:this._tween,
x:oa.STAGE_CENTER_X-150,y:-70,scale:1.35},!0));this._elementManager.addElement(new Pg({tween:this._tween,x:oa.STAGE_CENTER_X-150,y:50,scale:1.35}));this._addTapHereHand(240,-50,"tut_tap_1",0.25);this._addTapHereHand(-200,-50,"tut_tap_1",1.6);!1==L.saveData.tutStackingFoodSeen&&(this._noInputTimeout=0.1)},dispose:function(){V.prototype.dispose.call(this)},update:function(a){V.prototype.update.call(this,a)},_setInState:function(){this._finishInState()},_onEventResizeCanvas:function(){},_onInput:function(a,
b){!1!=b&&V.prototype._onInput.call(this,a,b)},_playNoInputAnimation:function(){V.prototype._playNoInputAnimation.call(this)},_resetNoInputAnimation:function(){V.prototype._resetNoInputAnimation.call(this)},__class__:of});var Id=function(a){J.call(this,a)};h["screen.ScreenGameplayHud_TakingOrders"]=Id;Id.__name__=["screen","ScreenGameplayHud_TakingOrders"];Id.__super__=V;Id.prototype=y(V.prototype,{_buildScreen:function(){V.prototype._buildScreen.call(this);this._moveButtons=[];this._moveTexts=[];
this._elementManager.addElement(new v({asset:"taking_orders/hud",x:0,y:230,scaleX:1.03}));this._moveButtons.push(this._elementManager.addElement(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"taking_orders/button_unselected",assetDown:"taking_orders/button_selected",x:110,y:160})));this._moveTexts.push(this._moveButtons[0].addChild(new O({text:this._getButtonString(0,0),color:0})));this._moveButtons[0].eventClick.add(n(this,this._onMoveZeroClick));this._moveButtons.push(this._elementManager.addElement(new ea({tween:this._tween,
clear:n(this,this._clearButtonInput),assetUp:"taking_orders/button_unselected",assetDown:"taking_orders/button_selected",x:300,y:160})));this._moveTexts.push(this._moveButtons[1].addChild(new O({text:this._getButtonString(1,0),color:0})));this._moveButtons[1].eventClick.add(n(this,this._onMoveOneClick));this._moveButtons.push(this._elementManager.addElement(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"taking_orders/button_unselected",assetDown:"taking_orders/button_selected",
x:110,y:220})));this._moveTexts.push(this._moveButtons[2].addChild(new O({text:this._getButtonString(2,0),color:0})));this._moveButtons[2].eventClick.add(n(this,this._onMoveTwoClick));this._moveButtons.push(this._elementManager.addElement(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"taking_orders/button_unselected",assetDown:"taking_orders/button_selected",x:300,y:220})));this._moveTexts.push(this._moveButtons[3].addChild(new O({text:this._getButtonString(3,0),color:0})));
this._moveButtons[3].eventClick.add(n(this,this._onMoveThreeClick));this._elementManager.addElement(new v({asset:"taking_orders/text_box",x:-200,y:190}));this._statusText=this._elementManager.addElement(new Rf({text:"taking_orders.waiting_status_cust0",align:ya.Left,x:-330,y:190,color:0}));this._statusText.setExactString("");for(this._randTexts=[0,1,2,3,4,5,6,7,8];3<this._randTexts.length;)this._randTexts.splice(A.randomInt(0,this._randTexts.length-1),1);this._setMoveNames(this._randTexts[0]);this._reactionTimer=
this._customerIndex=0;this._reactionString=ba.getLocalizeData(this._getWaitingText(this._randTexts[this._customerIndex])).string;this._reactionTimerMax=0.05*this._reactionString.length;this._gameEndSet=this._everyOther=!1;for(var a=0,b=this._moveButtons;a<b.length;){var c=b[a];++a;c.disable()}this._addTapHereHand(110,160,"tut_tap_1",0.5);this._addTapHereHand(300,160,"tut_tap_1",1.25);this._addTapHereHand(110,220,"tut_tap_1",2);this._addTapHereHand(300,220,"tut_tap_1",2.75)},dispose:function(){this._randTexts=
this._statusText=this._moveTexts=this._moveButtons=null;V.prototype.dispose.call(this)},update:function(a){V.prototype.update.call(this,a);if(!0!=q.getBool("BOOL_PAUSED"))if(this._reactionTimer+=a,this._reactionTimer<this._reactionTimerMax)this._statusText.setExactString(G.substr(this._reactionString,0,Math.floor(this._reactionTimer/0.05)));else if(this._statusText.setExactString(this._reactionString),this._reactionTimer>this._reactionTimerMax+1.5)if(2>=this._customerIndex)if(this._everyOther)this._setMoveNames(this._randTexts[this._customerIndex]),
this._reactionString=ba.getLocalizeData(this._getWaitingText(this._randTexts[this._customerIndex])).string,this._reactionTimer=0,this._reactionTimerMax=0.05*this._reactionString.length,this._everyOther=!1,u.takingOrdersNextCustomer.dispatch();else for(var a=0,b=this._moveButtons;a<b.length;){var c=b[a];++a;c.enable()}else this._gameEndSet||(this._gameEndSet=!0,q.setBool("BOOL_LEVEL_WIN",!0))},_onMoveZeroClick:function(){this._onMoveClick(0)},_onMoveOneClick:function(){this._onMoveClick(1)},_onMoveTwoClick:function(){this._onMoveClick(2)},
_onMoveThreeClick:function(){this._onMoveClick(3)},_onMoveClick:function(a){this._resetNoInputAnimation();for(var b=0,c=this._moveButtons;b<c.length;){var d=c[b];++b;d.disable()}this._reactionTimer=0;this._reactionString=this._getReactionString(a,this._randTexts[this._customerIndex]);this._statusText.setText(this._reactionString);this._statusText.setExactString("");this._fireCustReact(a,this._randTexts[this._customerIndex]);this._reactionString=ba.getLocalizeData(this._reactionString).string;this._reactionTimerMax=
0.05*this._reactionString.length;this._everyOther=!0;this._customerIndex++},_setMoveNames:function(a){this._moveTexts[0].setText(this._getButtonString(0,a));this._moveTexts[1].setText(this._getButtonString(1,a));this._moveTexts[2].setText(this._getButtonString(2,a));this._moveTexts[3].setText(this._getButtonString(3,a))},_getWaitingText:function(a){switch(a){case 0:return"taking_orders.waiting_status_cust0";case 1:return"taking_orders.waiting_status_cust1";case 2:return"taking_orders.waiting_status_cust2";
case 3:return"taking_orders.waiting_status_cust3";case 4:return"taking_orders.waiting_status_cust4";case 5:return"taking_orders.waiting_status_cust5";case 6:return"taking_orders.waiting_status_cust6";case 7:return"taking_orders.waiting_status_cust7";case 8:return"taking_orders.waiting_status_cust8";default:return""}},_getButtonString:function(a,b){switch(b){case 0:switch(a){case 0:return"taking_orders.button0_cust0";case 1:return"taking_orders.button1_cust0";case 2:return"taking_orders.button2_cust0";
case 3:return"taking_orders.button3_cust0";default:return""}case 1:switch(a){case 0:return"taking_orders.button0_cust1";case 1:return"taking_orders.button1_cust1";case 2:return"taking_orders.button2_cust1";case 3:return"taking_orders.button3_cust1";default:return""}case 2:switch(a){case 0:return"taking_orders.button0_cust2";case 1:return"taking_orders.button1_cust2";case 2:return"taking_orders.button2_cust2";case 3:return"taking_orders.button3_cust2";default:return""}case 3:switch(a){case 0:return"taking_orders.button0_cust3";
case 1:return"taking_orders.button1_cust3";case 2:return"taking_orders.button2_cust3";case 3:return"taking_orders.button3_cust3";default:return""}case 4:switch(a){case 0:return"taking_orders.button0_cust4";case 1:return"taking_orders.button1_cust4";case 2:return"taking_orders.button2_cust4";case 3:return"taking_orders.button3_cust4";default:return""}case 5:switch(a){case 0:return"taking_orders.button0_cust5";case 1:return"taking_orders.button1_cust5";case 2:return"taking_orders.button2_cust5";case 3:return"taking_orders.button3_cust5";
default:return""}case 6:switch(a){case 0:return"taking_orders.button0_cust6";case 1:return"taking_orders.button1_cust6";case 2:return"taking_orders.button2_cust6";case 3:return"taking_orders.button3_cust6";default:return""}case 7:switch(a){case 0:return"taking_orders.button0_cust7";case 1:return"taking_orders.button1_cust7";case 2:return"taking_orders.button2_cust7";case 3:return"taking_orders.button3_cust7";default:return""}case 8:switch(a){case 0:return"taking_orders.button0_cust8";case 1:return"taking_orders.button1_cust8";
case 2:return"taking_orders.button2_cust8";case 3:return"taking_orders.button3_cust8";default:return""}default:return""}},_getReactionString:function(a,b){switch(b){case 0:switch(a){case 0:return"taking_orders.react_storm_out";case 1:return"taking_orders.react_confused";case 2:return"taking_orders.react_messy";case 3:return"taking_orders.react_satisfied";default:return""}case 1:switch(a){case 0:return"taking_orders.react_blank_stare";case 1:return"taking_orders.react_ask_manager";case 2:return"taking_orders.react_not_digging";
case 3:return"taking_orders.react_starstruck";default:return""}case 2:switch(a){case 0:return"taking_orders.react_unsure";case 1:return"taking_orders.react_accept";case 2:return"taking_orders.react_storm_out";case 3:return"taking_orders.react_shock";default:return""}case 3:switch(a){case 0:return"taking_orders.react_accept";case 1:return"taking_orders.react_happy";case 2:return"taking_orders.react_ask_manager";case 3:return"taking_orders.react_messy";default:return""}case 4:switch(a){case 0:return"taking_orders.react_not_digging";
case 1:return"taking_orders.react_beaming";case 2:return"taking_orders.react_messy";case 3:return"taking_orders.react_confused";default:return""}case 5:switch(a){case 0:return"taking_orders.react_confused";case 1:return"taking_orders.react_unsure";case 2:return"taking_orders.react_satisfied";case 3:return"taking_orders.react_blank_stare";default:return""}case 6:switch(a){case 0:return"taking_orders.react_shock";case 1:return"taking_orders.react_confused";case 2:return"taking_orders.react_starstruck";
case 3:return"taking_orders.react_ask_manager";default:return""}case 7:switch(a){case 0:return"taking_orders.react_storm_out";case 1:return"taking_orders.react_messy";case 2:return"taking_orders.react_blank_stare";case 3:return"taking_orders.react_happy";default:return""}case 8:switch(a){case 0:return"taking_orders.react_shock";case 1:return"taking_orders.react_messy";case 2:return"taking_orders.react_messy";case 3:return"taking_orders.react_accept";default:return""}default:return""}},_fireCustReact:function(a,
b){switch(b){case 0:switch(a){case 0:u.takingOrdersPlayKelAnim.dispatch("EAT FRIES");this._playBigSplatSfx(3);break;case 1:u.takingOrdersPlayKelAnim.dispatch("GIVE BURGER");this._playBigSplatSfx(1);this._playThrowSfx();break;case 2:u.takingOrdersPlayKelAnim.dispatch("SPRAY KETCHUP");this._playSpraySfx();break;case 3:u.takingOrdersPlayKelAnim.dispatch("THROW FRIES");this._playBigSplatSfx(1);this._playThrowSfx();break;default:null}break;case 1:switch(a){case 0:u.takingOrdersPlayKelAnim.dispatch("I'M A DUDE");
this._playSingingSfx();break;case 1:u.takingOrdersPlayKelAnim.dispatch("HE'S A DUDE");this._playSingingSfx();break;case 2:u.takingOrdersPlayKelAnim.dispatch("SHE'S A DUDE");this._playSingingSfx();break;case 3:u.takingOrdersPlayKelAnim.dispatch("WE'RE ALL DUDES");this._playSingingSfx();break;default:null}break;case 2:switch(a){case 0:u.takingOrdersPlayKelAnim.dispatch("SHAKE YOUR BODY");this._playRustleSfx();break;case 1:u.takingOrdersPlayKelAnim.dispatch("SHAKE THEIR BODY");this._playRustleSfx();
break;case 2:u.takingOrdersPlayKelAnim.dispatch("SHAKE THE SHAKE");this._playRustleSfx();break;case 3:u.takingOrdersPlayKelAnim.dispatch("DRINK SHAKE IN UNDER 10 SECONDS");this._playBigSplatSfx(3);break;default:null}break;case 3:switch(a){case 0:u.takingOrdersPlayKelAnim.dispatch("GIVE BUNNY");this._playBigSplatSfx(0);this._playThrowSfx();break;case 1:u.takingOrdersPlayKelAnim.dispatch("GIVE JUST THE BUN");this._playBigSplatSfx(1);this._playThrowSfx();break;case 2:u.takingOrdersPlayKelAnim.dispatch("GIVE GLUTEN FREE BUN SIGN");
this._playThudSfx();break;case 3:u.takingOrdersPlayKelAnim.dispatch("GIVE 10 BURGERS GLUED TOGETHER");this._playBigSplatSfx(4);this._playThrowSfx();break;default:null}break;case 4:switch(a){case 0:u.takingOrdersPlayKelAnim.dispatch("GIVE KETCHUP");this._playSpraySfx();break;case 1:u.takingOrdersPlayKelAnim.dispatch("SQUEEZE MUSTARD");this._playSpraySfx();break;case 2:u.takingOrdersPlayKelAnim.dispatch("GIVE MAYO");this._playSpraySfx();break;case 3:u.takingOrdersPlayKelAnim.dispatch("DRINK MUSTARD");
this._playBigSplatSfx(3);break;default:null}break;case 5:switch(a){case 0:u.takingOrdersPlayKelAnim.dispatch("WORK OUT 3 TIMES A WEEK");this._playSpeakingSfx();break;case 1:u.takingOrdersPlayKelAnim.dispatch("GET 8 HOURS OF SLEEP");this._playSpeakingSfx();break;case 2:u.takingOrdersPlayKelAnim.dispatch("EAT BALANCED DIET");this._playBigSplatSfx(3);break;case 3:u.takingOrdersPlayKelAnim.dispatch("WASH HANDS AFTER YOU PEE");this._playSpeakingSfx();break;default:null}break;case 6:switch(a){case 0:u.takingOrdersPlayKelAnim.dispatch("MY NAME IS ED");
this._playSingingSfx();break;case 1:u.takingOrdersPlayKelAnim.dispatch("AND I'M HERE TO SAY");this._playSingingSfx();break;case 2:u.takingOrdersPlayKelAnim.dispatch("I LOVE SPICY CHICKEN");this._playSingingSfx();break;case 3:u.takingOrdersPlayKelAnim.dispatch("IN A MAJOR WAY");this._playSingingSfx();break;default:null}break;case 7:switch(a){case 0:u.takingOrdersPlayKelAnim.dispatch("SING A SONG");this._playSingingSfx();break;case 1:u.takingOrdersPlayKelAnim.dispatch("GIVE 62 GOOD WEENIES");this._playBigSplatSfx(4);
this._playThrowSfx();break;case 2:u.takingOrdersPlayKelAnim.dispatch("FALL ASLEEP");this._playSnoringSfx();break;case 3:u.takingOrdersPlayKelAnim.dispatch("GIVE GOOD CHUNKS");this._playBigSplatSfx(2);this._playThrowSfx();break;default:null}break;case 8:switch(a){case 0:u.takingOrdersPlayKelAnim.dispatch("GIVE WHOLE CHICKEN");this._playThudSfx();this._playBigSplatSfx(2);this._playThrowSfx();break;case 1:u.takingOrdersPlayKelAnim.dispatch("GIVE OATMEAL");this._playBigSplatSfx(2);this._playThrowSfx();
break;case 2:u.takingOrdersPlayKelAnim.dispatch("GIVE CORNMEAL");this._playBigSplatSfx(2);this._playThrowSfx();break;case 3:u.takingOrdersPlayKelAnim.dispatch("ORDER PIZZA");this._playSpeakingSfx();break;default:null}break;default:null}switch(this._reactionString){case "taking_orders.react_storm_out":u.takingOrdersPlayReact.dispatch(U.ANGRY);break;case "taking_orders.react_confused":u.takingOrdersPlayReact.dispatch(U.CONFUSED);break;case "taking_orders.react_tears":u.takingOrdersPlayReact.dispatch(U.GRIMACE);
break;case "taking_orders.react_happy":case "taking_orders.react_beaming":u.takingOrdersPlayReact.dispatch(U.HAPPY);break;case "taking_orders.react_blank_stare":u.takingOrdersPlayReact.dispatch(U.STUNNED);break;case "taking_orders.react_ask_manager":u.takingOrdersPlayReact.dispatch(U.ANGRY);break;case "taking_orders.react_not_digging":u.takingOrdersPlayReact.dispatch(U.UNHAPPY);break;case "taking_orders.react_starstruck":u.takingOrdersPlayReact.dispatch(U.STARSTRUCK);break;case "taking_orders.react_unsure":u.takingOrdersPlayReact.dispatch(U.UNSURE);
break;case "taking_orders.react_satisfied":case "taking_orders.react_accept":u.takingOrdersPlayReact.dispatch(U.ACCEPT);break;case "taking_orders.react_shock":u.takingOrdersPlayReact.dispatch(U.SHOCKED);break;case "taking_orders.react_messy":u.takingOrdersPlayReact.dispatch(U.MESSY);break;default:null}},_setInState:function(){this._finishInState()},_onEventResizeCanvas:function(){},_onInput:function(a,b){!1!=b&&V.prototype._onInput.call(this,a,b)},_playNoInputAnimation:function(){V.prototype._playNoInputAnimation.call(this)},
_resetNoInputAnimation:function(){V.prototype._resetNoInputAnimation.call(this);this._noInputTimeout=25},_playSpeakingSfx:function(){},_playSingingSfx:function(){},_playSpraySfx:function(){m.playSound("sfx/pop_01",0.35);C.start(function(){m.playSound("sfx/pop_02",0.85)},0.1);C.start(function(){m.playSound("sfx/pop_01",0.5)},0.3);C.start(function(){m.playSound("sfx/pop_03",0.9)},0.35);C.start(function(){m.playSound("sfx/pop_02",1)},0.4);C.start(function(){m.playSound("sfx/pop_01",0.45)},0.45);C.start(function(){m.playSound("sfx/pop_03",
0.75)},0.6);C.start(function(){m.playSound("sfx/pop_01",0.45)},0.65);C.start(function(){m.playSound("splat_01",0.85)},0.3);C.start(function(){m.playSound("splat_02",0.85)},0.45);C.start(function(){m.playSound("splat_03",0.5)},0.65);C.start(function(){m.playSound("splat_02",0.9)},0.8)},_playBigSplatSfx:function(a){C.start(function(){m.playSound("splat_01",0.85)},0.45);1<=a&&C.start(function(){m.playSound("splat_02",0.85)},0.55);2<=a&&C.start(function(){m.playSound("splat_03",0.85)},0.6);3<=a&&C.start(function(){m.playSound("splat_01",
0.85)},0.75);4<=a&&(C.start(function(){m.playSound("splat_02",0.85)},0.65),C.start(function(){m.playSound("splat_03",0.85)},0.85))},_playRustleSfx:function(){C.start(function(){m.playSound("taking_orders/rustling_01",A.randomFloat(0.5,1))},0.25);C.start(function(){m.playSound("taking_orders/rustling_02",A.randomFloat(0.5,1))},0.25)},_playThudSfx:function(){C.start(function(){m.playSound("sfx/impact_01",A.randomFloat(0.5,1))},0.45);C.start(function(){m.playSound("sfx/impact_02",A.randomFloat(0.5,1))},
0.45)},_playSnoringSfx:function(){m.playSound("taking_orders/cornsnore")},_playThrowSfx:function(){m.playSound("fling/tray_launch",A.randomFloat(0.75,1));m.playSound("fling/tray_launch_alt",A.randomFloat(0.75,1))},__class__:Id});var qf=function(a){J.call(this,a)};h["screen.ScreenGameplayMenu"]=qf;qf.__name__=["screen","ScreenGameplayMenu"];qf.__super__=J;qf.prototype=y(J.prototype,{_buildScreen:function(){this._closing=!1;this._vignette=this._elementManager.addElement(new P({asset:"soda_machine/overlay",
alpha:0,scale:1.1}));this._vignette.addChild(new P({asset:"soda_machine/overlay"}));this._vignette.addChild(new P({asset:"soda_machine/overlay"}));this._vignette.addChild(new P({asset:"soda_machine/overlay"}));this._tray=this._elementManager.addElement(new P({asset:"pause_screen/pause_screen",alpha:0}));this._tray.addElement(new O({text:"gameplay.menu",x:-2,y:-148,rotation:-5,color:8947848}));this._tray.addElement(new O({text:"gameplay.menu",y:-150,rotation:-5}));var a;a=this._tray.addElement(new ea({tween:this._tween,
clear:n(this,this._clearButtonInput),assetUp:"pause_screen/play",x:-100,y:-30}));a.eventClick.add(n(this,this._onEventResumeClick));a=this._tray.addElement(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"pause_screen/X",x:75,y:-40}));a.eventClick.add(n(this,this._onEventQuitClick));this._tray.addElement(new Qg({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"pause_screen/music_on",assetUpOff:"pause_screen/music_off",x:-10,y:50}))},dispose:function(){this._tray=
null;J.prototype.dispose.call(this)},_setInState:function(){this._closing=!1;ma.easeFadeIn(this._vignette,this._tween);ma.easeBounceIn(this._tray,this._tween).onComplete(n(this,this._finishInState))},_setCloseState:function(){this._closing||(this._closing=!0,ma.easeFadeOut(this._vignette,this._tween),ma.easeBounceOut(this._tray,this._tween).onComplete(n(this,this._finishCloseState)))},_onEventHelpClick:function(){m.playSound("pause_screen/button_click_01");u.flow.dispatch("GAMEPLAY_MENU_HELP")},_onEventResumeClick:function(){m.playSound("pause_screen/button_click_01");
u.flow.dispatch("GAMEPLAY_MENU_CLOSE")},_onEventQuitClick:function(){m.playSound("pause_screen/button_click_01");u.flow.dispatch("GAMEPLAY_MENU_QUIT")},_onInput:function(a,b){if(!1!=b)switch(a[1]){case 4:case 3:this._onEventResumeClick()}},__class__:qf});var pf=function(a){J.call(this,a)};h["screen.ScreenHelp"]=pf;pf.__name__=["screen","ScreenHelp"];pf.__super__=J;pf.prototype=y(J.prototype,{_buildScreen:function(){this._closing=!1;this._tray=this._elementManager.addElement(new P({alpha:0}));I._platform.getTouch().get_supported();
this._tray.addElement(new O({text:"help.help",y:-170}));this._button=this._tray.addElement(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),x:150}));this._button.eventClick.add(n(this,this._onEventPlayClick));this._tray.visible=!1},dispose:function(){this._button=this._tray=null;J.prototype.dispose.call(this)},_setInState:function(){this._closing=!1;ma.easeBounceIn(this._tray,this._tween).onComplete(n(this,this._finishInState))},_setCloseState:function(){this._closing||(this._closing=
!0,ma.easeBounceOut(this._tray,this._tween).onComplete(n(this,this._finishCloseState)))},_onEventPlayClick:function(){u.flow.dispatch("HELP_CLOSE")},__class__:pf});var ye=function(a){J.call(this,a)};h["screen.ScreenIntroScene"]=ye;ye.__name__=["screen","ScreenIntroScene"];ye.__super__=J;ye.prototype=y(J.prototype,{_buildScreen:function(){this._closing=!1;this._tray=this._elementManager.addElement(new P({scale:0}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial",x:-115}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial",
x:115}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial"}));this._tray.addChild(new P({asset:"intro_ending/employeeofthemonth",y:-165}));this._tray.addChild(new P({asset:"intro_ending/blender",x:-200,y:5}));this._tray.addChild(new P({asset:"intro_ending/microwave",x:0,y:5}));this._tray.addChild(new P({asset:"intro_ending/empty",x:200,y:5}));this._tray.addChild(new P({asset:"intro_ending/monthcard",x:-200,y:135}));this._tray.addChild(new P({asset:"intro_ending/monthcard",x:0,y:135}));
this._tray.addChild(new P({asset:"intro_ending/monthcard",x:200,y:135}));this._tray.addChild(new O({text:"intro.eotm",y:-190,color:16760901}));this._tray.addChild(new O({text:"intro.eotm2",y:-145,color:16760901}));this._tray.addChild(new O({text:"intro.february",x:-200,y:133,color:0}));this._tray.addChild(new O({text:"intro.march",x:0,y:133,color:0}));this._tray.addChild(new O({text:"intro.april",x:200,y:133,color:0}));this._tray.addChild(new O({text:"intro.questionmark",x:200,y:5,color:0}));this._dialogueBox=
this._tray.addChild(new ae({tween:this._tween,x:-40,y:210},!0));this._dialogueLineTimer=1;this._dialogueQueue=["intro.intro1","intro.intro2","intro.intro3","intro.intro4"];this._animQueue=["idle","idle","idle","idle_positive"];this._dialogueQueue.reverse();this._animQueue.reverse();this._kel=this._tray.addChild(new zd({library:"kel",x:350,y:360,scale:0.5}));this._kel.animate("idle")},dispose:function(){this._tray=null;J.prototype.dispose.call(this)},update:function(a){J.prototype.update.call(this,
a);this._closing||q.setBool("BOOL_PAUSED",!0);this._dialogueBox.get_doneDisplaying()&&!this._readyToClose&&(this._dialogueLineTimer-=a,0>=this._dialogueLineTimer&&(0<this._dialogueQueue.length?(q.setString("STRING_DIALOGUE",this._dialogueQueue.pop()),a=this._animQueue.pop(),this._kel.get_currentAnimation()!=a&&this._kel.animate(a,0,1,0,!0),this._dialogueLineTimer=99999):!1==this._closing&&(this._closing=!0,u.flow.dispatch("INTRO_CLOSE"))))},_setInState:function(){ma.easeBounceIn(this._tray,this._tween);
ma.easeBounceIn(this._dialogueBox,this._tween,!0,1.25).onComplete(n(this,this._finishInState))},_setCloseState:function(){ma.easeBounceOut(this._tray,this._tween).onComplete(n(this,this._finishCloseState));u.introSceneOver.dispatch()},_onInput:function(a,b){switch(a[1]){case 0:case 2:b&&this._state==ta.OPENED&&(this._readyToClose?!1==this._closing&&(this._closing=!0,u.flow.dispatch("INTRO_CLOSE")):this._dialogueBox.get_doneDisplaying()?0<this._dialogueQueue.length?this._dialogueLineTimer=0:!1==this._closing&&
(this._closing=!0,u.flow.dispatch("INTRO_CLOSE")):this._dialogueBox.skipToEnd())}},__class__:ye});var rf=function(a){this._TRAY_IN_TIME_2=0.2;this._TRAY_IN_TIME=0.35;J.call(this,a)};h["screen.ScreenQuitConfirm"]=rf;rf.__name__=["screen","ScreenQuitConfirm"];rf.__super__=J;rf.prototype=y(J.prototype,{_buildScreen:function(){this._closing=!1;this._tray=this._elementManager.addElement(new P({alpha:0}));this._tray.addChild(new P({asset:"pause_screen/pause_screen"}));this._tray.addElement(new O({text:"quit_confirm.quit_confirm_header",
rotation:-5,x:-2,y:-158,color:8947848}));this._tray.addElement(new O({text:"quit_confirm.quit_confirm_header",rotation:-5,y:-160}));this._tray.alpha=0;var a=this._tray.addElement(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"pause_screen/check",x:62,y:-10}));a.eventClick.add(n(this,this._onYesClick));a=this._tray.addElement(new ea({tween:this._tween,clear:n(this,this._clearButtonInput),assetUp:"pause_screen/X",x:-92,y:-10}));a.eventClick.add(n(this,this._onNoClick))},dispose:function(){J.prototype.dispose.call(this);
this._tray=this._wall=null},_setInState:function(){this._closing=!1;ma.easeBounceIn(this._tray,this._tween).onComplete(n(this,this._finishInState))},_setCloseState:function(){this._closing||(this._closing=!0,ma.easeBounceOut(this._tray,this._tween).onComplete(n(this,this._finishCloseState)))},_onYesClick:function(){u.flow.dispatch("GAMEPLAY_QUIT_YES")},_onNoClick:function(){u.flow.dispatch("GAMEPLAY_QUIT_NO")},__class__:rf});var cd=function(a){J.call(this,a)};h["screen.ScreenScorecard"]=cd;cd.__name__=
["screen","ScreenScorecard"];cd.__super__=J;cd.prototype=y(J.prototype,{_buildScreen:function(){this._tray=this._elementManager.addElement(new v({scale:0}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial",x:-115}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial",x:115}));this._tray.addChild(new P({asset:"intro_ending/bg_interstitial"}));this._tray.addChild(new v({asset:"intro_ending/scorecard"}));q.getValue("ENUM_MINI_WORLD_NEXT");var a="";this._stamp=this._tray.addChild(new v({asset:"intro_ending/stamp_circle",
x:190}));var b=A.randomFloat(0,1),c=0,d=q.getValue("ENUM_MINI_WORLD_NEXT");switch(d[1]){case 0:this._stamp.addChild(new v({asset:"intro_ending/A",x:-25,y:-15}));this._addStampSuffix();break;case 1:0.5>b?this._stamp.addChild(new v({asset:"intro_ending/A",x:-25,y:-15})):this._stamp.addChild(new v({asset:"intro_ending/B",x:-25,y:15,scale:0.9}));this._addStampSuffix();break;case 2:c=1>=L.saveData.difficultyOrderUp?12E3:2E4;this._addStamp("INT_SCORE_ORDER_UP",c,b);break;case 3:c=1>=L.saveData.difficultySodaMachine?
18E3:38E3;this._addStamp("INT_SCORE_SODA_MACHINE",c,b);break;case 4:c=1>=L.saveData.difficultyStackingFood?8E3:16E3,this._addStamp("INT_SCORE_STACKING_FOOD",c,b)}this._kel=this._tray.addChild(new zd({library:"kel",x:305,y:360,scale:0.5}));this._kel.animate("idle_positive");this._destXs=[];switch(d[1]){case 0:case 1:this._destXs.push(1-A.randomFloat(0,1)*A.randomFloat(0.25,0.85));this._destXs.push(1-A.randomFloat(0,1)*A.randomFloat(0.25,0.85));this._destXs.push(1-A.randomFloat(0,1)*A.randomFloat(0.25,
0.85));break;case 2:this._destXs.push(Math.min(0.25*A.randomFloat(0.75,1.05)+0.75*q.getInt("INT_SCORE_ORDER_UP")/c*A.randomFloat(0.75,1.05),1));this._destXs.push(Math.min(0.25*A.randomFloat(0.75,1.05)+0.75*q.getInt("INT_SCORE_ORDER_UP")/c*A.randomFloat(0.75,1.05),1));this._destXs.push(Math.min(0.25*A.randomFloat(0.75,1.05)+0.75*q.getInt("INT_SCORE_ORDER_UP")/c*A.randomFloat(0.75,1.05),1));break;case 3:this._destXs.push(Math.min(0.25*A.randomFloat(0.75,1.05)+0.75*q.getInt("INT_SCORE_SODA_MACHINE")/
c*A.randomFloat(0.75,1.05),1));this._destXs.push(Math.min(0.25*A.randomFloat(0.75,1.05)+0.75*q.getInt("INT_SCORE_SODA_MACHINE")/c*A.randomFloat(0.75,1.05),1));this._destXs.push(Math.min(0.25*A.randomFloat(0.75,1.05)+0.75*q.getInt("INT_SCORE_SODA_MACHINE")/c*A.randomFloat(0.75,1.05),1));break;case 4:this._destXs.push(Math.min(0.25*A.randomFloat(0.75,1.05)+0.75*q.getInt("INT_SCORE_STACKING_FOOD")/c*A.randomFloat(0.75,1.05),1)),this._destXs.push(Math.min(0.25*A.randomFloat(0.75,1.05)+0.75*q.getInt("INT_SCORE_STACKING_FOOD")/
c*A.randomFloat(0.75,1.05),1)),this._destXs.push(Math.min(0.25*A.randomFloat(0.75,1.05)+0.75*q.getInt("INT_SCORE_STACKING_FOOD")/c*A.randomFloat(0.75,1.05),1))}this._bars=[];this._smallTrays=[];this._smallTrays.push(this._tray.addChild(new v({x:-187.5,y:-65})));this._smallTrays.push(this._tray.addChild(new v({x:-187.5,y:20})));this._smallTrays.push(this._tray.addChild(new v({x:-265,y:75})));this._smallTrays.push(this._tray.addChild(new v({x:-265,y:112.5})));this._smallTrays.push(this._tray.addChild(new v({x:-265,
y:150})));this._smallTrays[2].addChild(new Fa({color:8947848,sizeX:200,sizeY:25,x:95,y:-12.5,alpha:0.5,origin:0}));this._bars.push(this._smallTrays[2].addChild(new Fa({color:14492194,sizeX:200,sizeY:25,x:95,y:-12.5,scaleX:0,origin:0})));this._smallTrays[3].addChild(new Fa({color:8947848,sizeX:200,sizeY:25,x:95,y:-12.5,alpha:0.5,origin:0}));this._bars.push(this._smallTrays[3].addChild(new Fa({color:14492194,sizeX:200,sizeY:25,x:95,y:-12.5,scaleX:0,origin:0})));d!=na.SODA_MACHINE?(this._smallTrays[4].addChild(new Fa({color:8947848,
sizeX:200,sizeY:25,x:95,y:-12.5,alpha:0.5,origin:0})),this._bars.push(this._smallTrays[4].addChild(new Fa({color:14492194,sizeX:200,sizeY:25,x:95,y:-12.5,scaleX:0,origin:0})))):this._smallTrays[4].addChild(new O({text:"soda_machine.drinkName"+A.randomInt(1,9),x:95,color:0,align:ya.Left}));this._smallTrays[0].addChild(new O({text:"scorecard.employee",y:-27.5,color:0}));this._smallTrays[0].addChild(new O({text:"scorecard.scorecard",y:27.5,color:0}));switch(d[1]){case 0:a="dress_up";break;case 1:a="taking_orders";
break;case 2:a="order_up";break;case 3:a="soda_machine";break;case 4:a="stacking_food"}this._smallTrays[1].addChild(new O({text:"scorecard."+a+"_title",color:0}));this._smallTrays[2].addChild(new O({text:"scorecard."+a+"_cat1",x:-95,color:0,align:ya.Left}));this._smallTrays[3].addChild(new O({text:"scorecard."+a+"_cat2",x:-95,color:0,align:ya.Left}));this._smallTrays[4].addChild(new O({text:"scorecard."+a+"_cat3",x:-95,color:0,align:ya.Left}));a=0;for(b=this._smallTrays;a<b.length;)c=b[a],++a,c.set_scale(2),
c.alpha=0;this._stamp.set_scale(2.5);this._stamp.alpha=0;this._spawnTimer=5;if(0<L.saveData.curWeek||d!=na.DRESS_UP)this._doCornCare=0.5<A.randomFloat(0,1)},dispose:function(){J.prototype.dispose.call(this)},_addEventListeners:function(){J.prototype._addEventListeners.call(this);u.cornCareClose.add(n(this,this._cornCareClose))},_removeEventListeners:function(){J.prototype._removeEventListeners.call(this);u.cornCareClose.remove(n(this,this._cornCareClose))},update:function(a){J.prototype.update.call(this,
a);0<this._spawnTimer&&(this._spawnTimer-=a,0>=this._spawnTimer&&(this._doCornCare?(0.5>A.randomFloat(0,1)?this._kel.animate("positive_corncare_react_in",1):this._kel.animate("shock_corncare_react_in",1),C.start(function(){m.playSound("corn_care/corntime")},0.25),C.start(function(){m.playSound("sfx/arm_swipe")},1.75),u.cornCarePopup.dispatch()):q.setBool("BOOL_LEVEL_LOSE",!0)))},_setInState:function(){var a=this;this._tween.tween({target:this._tray,duration:0.5,ease:s.outElastic,overwrite:!0},{scale:1});
this._tween.tween({target:this._smallTrays[0],duration:0.5,delay:0.4,ease:s.outBounce,overwrite:!0},{scale:1,alpha:1});C.start(function(){m.playSound("intro_ending/minigame_results_mid",0.55)},0.55);this._tween.tween({target:this._smallTrays[1],duration:0.5,delay:0.4,ease:s.outBounce,overwrite:!0},{scale:1,alpha:1});this._tween.tween({target:this._smallTrays[2],duration:0.5,delay:1.3,ease:s.outBounce,overwrite:!0},{scale:1,alpha:1});C.start(function(){m.playSound("intro_ending/minigame_results_up",
0.4)},1.45);this._tween.tween({target:this._smallTrays[3],duration:0.5,delay:1.5,ease:s.outBounce,overwrite:!0},{scale:1,alpha:1});C.start(function(){m.playSound("intro_ending/minigame_results_mid",0.4)},1.65);this._tween.tween({target:this._smallTrays[4],duration:0.5,delay:1.7,ease:s.outBounce,overwrite:!0},{scale:1,alpha:1});C.start(function(){m.playSound("intro_ending/minigame_results_down",0.4)},1.85);this._tween.tween({target:this._bars[0],duration:0.35,delay:1.8,ease:s.outQuad,overwrite:!0},
{scaleX:this._destXs[0]});this._tween.tween({target:this._bars[1],duration:0.35,delay:2,ease:s.outQuad,overwrite:!0},{scaleX:this._destXs[1]});2<this._bars.length&&null!=this._bars[2]&&this._tween.tween({target:this._bars[2],duration:0.35,delay:2.2,ease:s.outQuad,overwrite:!0},{scaleX:this._destXs[2]});this._tween.tween({target:this._stamp,duration:0.5,delay:3,ease:s.inQuart,overwrite:!0},{scale:1,alpha:1}).onComplete(function(){m.playSound("intro_ending/minigame_results_waylow");a._finishInState()})},
_setCloseState:function(){this._tween.tween({target:this._tray,duration:0.25,ease:s.inExpo,overwrite:!0},{scale:0}).onComplete(n(this,this._finishCloseState))},_onEventResizeCanvas:function(){},_onInput:function(a,b){!1!=b&&J.prototype._onInput.call(this,a,b)},_addStamp:function(a,b){q.getInt(a)>0.8*b?this._stamp.addChild(new v({asset:"intro_ending/A",x:-25,y:-15})):q.getInt(a)>0.45*b?this._stamp.addChild(new v({asset:"intro_ending/B",x:-25,y:15,scale:0.9})):this._stamp.addChild(new v({asset:"intro_ending/C",
x:-25,y:0,scale:0.9}));this._addStampSuffix()},_addStampSuffix:function(){var a=A.randomFloat(0,1),b=q.getValue("ENUM_MINI_WORLD_NEXT");0.2>a||b==na.DRESS_UP?this._stamp.addChild(new v({asset:"intro_ending/plus",x:65})):0.4>a?this._stamp.addChild(new v({asset:"intro_ending/minus",x:65})):0.7>a?this._stamp.addChild(new v({asset:"intro_ending/hashtag",x:65})):this._stamp.addChild(new v({asset:"intro_ending/question",x:75,scale:0.7}))},_cornCareClose:function(){q.setBool("BOOL_LEVEL_LOSE",!0)},__class__:cd});
var Xd=function(a){J.call(this,a)};h["screen.ScreenSplash"]=Xd;Xd.__name__=["screen","ScreenSplash"];Xd.__super__=J;Xd.prototype=y(J.prototype,{_buildScreen:function(){this._blinkAllowed=!0;this._closing=!1;this._blinkTimer=0;this._beginPreload();this._tray=this._elementManager.addElement(new P({}));this._tray.addChild(new P({asset:"ui/splash/splash",scaleX:1.03}));this._logo=this._tray.addChild(new P({asset:"ui/splash/logo",scale:0}));this._kel=this._tray.addChild(new P({asset:"ui/splash/kel_splash",
originY:1,x:280,y:480,scale:0}));this._reese=this._tray.addChild(new P({asset:"ui/splash/reese_splash",originY:1,x:-380,y:480,scale:0}));this._nathan=this._tray.addChild(new P({asset:"ui/splash/nathan_splash",originY:1,x:-200,y:480,scale:0}));this._tapTimer=1;this._seenDown=!1},dispose:function(){qa.onSplashClose();this._clickTray=this._textClickToPlay=this._nathan=this._reese=this._kel=this._logo=this._tray=null;J.prototype.dispose.call(this)},_beginPreload:function(){var a=["preload","fonts_"+ba.region];
o.load(n(this,this._onPreloadFinished),a,0)},_onPreloadFinished:function(){qa.onPreloadFinished();ba.parseLocalization();this._addPreload();this._beginInitialLoad()},_beginInitialLoad:function(){o.load(n(this,this._eventLoadCompleteInitial),["initial_universal","initial_audio_required"],1.2)},_eventLoadCompleteInitial:function(){this._addClickTray();qa.onInitialFinished();u.initialLoadComplete.dispatch()},_addPreload:function(){},_addClickTray:function(){if(null==this._clickTray){var a;a=I._platform.getTouch().get_supported()?
"splash.tap_anywhere":"splash.click_anywhere";this._clickTray=this._tray.addElement(new P({x:150,y:230,originY:1}));this._textClickToPlay=this._clickTray.addElement(new O({text:a,x:-2.5,y:2.5,originY:1,color:11149892}));this._textClickToPlay.addChild(new O({text:a,x:2.5,y:-2.5,originY:1,color:16729224}));ma.easeBounceIn(this._logo,this._tween,!0);ma.easeBounceIn(this._clickTray,this._tween,!0,0.5);this._tween.tween({target:this._kel,duration:0.3,ease:s.outQuad,delay:0.1,thread:"a"},{y:280});this._tween.tween({target:this._nathan,
duration:0.3,ease:s.outQuad,delay:0.25,thread:"a"},{y:280});this._tween.tween({target:this._reese,duration:0.3,ease:s.outQuad,delay:0.4,thread:"a"},{y:280});this._tween.tween({target:this._kel,duration:0.3,ease:s.outBack,delay:0.1,thread:"b"},{scale:1});this._tween.tween({target:this._nathan,duration:0.3,ease:s.outBack,delay:0.25,thread:"b"},{scale:1});this._tween.tween({target:this._reese,duration:0.3,ease:s.outBack,delay:0.4,thread:"b"},{scale:1})}},update:function(a){J.prototype.update.call(this,
a);this._blinkAllowed&&null!=this._clickTray?(this._blinkTimer+=a,this._clickTray.set_scale(1+0.05*Math.sin(2*this._blinkTimer*Math.PI))):null!=this._textClickToPlay&&(this._textClickToPlay.alpha=0);this._tapTimer-=a},_tweenOutClickTray:function(){null!=this._clickTray&&(this._tween.tween({target:this._clickTray,duration:0.15,overwrite:!0,ease:s.outQuad},{scaleX:1.1,scaleY:1.1}),this._tween.tween({target:this._clickTray,duration:0.15,overwrite:!1,ease:s.outQuad},{scaleX:0.1,scaleY:0.1,alpha:0}))},
_setCloseState:function(){ma.easeBounceOut(this._tray,this._tween).onComplete(n(this,this._finishCloseState))},_onInput:function(a,b){if(this._state==ta.OPENED)switch(a[1]){case 0:case 2:b&&(this._seenDown=!0),!1==b&&0>=this._tapTimer&&this._seenDown&&!1==this._closing&&!1==q.getBool("BOOL_CODE_SCREEN_OPEN")&&(this._closing=!0,this._tweenOutClickTray(),u.flow.dispatch("SPLASH_PLAY"))}},__class__:Xd});var dd=function(a){J.call(this,a)};h["screen.ScreenTransition"]=dd;dd.__name__=["screen","ScreenTransition"];
dd.__super__=J;dd.prototype=y(J.prototype,{_buildScreen:function(){this._transition=this._elementManager.addElement(new za({library:"transition",alpha:0}))},dispose:function(){J.prototype.dispose.call(this)},update:function(a){this._transition.alpha=1;J.prototype.update.call(this,a)},_setInState:function(){var a=this;this._transition.animate("transition_in_ns",1);C.start(function(){m.playSound("splat_01",0.25)},0.5);C.start(function(){m.playSound("splat_02",0.35)},0.525);C.start(function(){m.playSound("splat_03",
0.3)},0.7);C.start(function(){m.playSound("splat_02",0.2)},0.725);C.start(function(){m.playSound("splat_01",0.35)},0.9);C.start(function(){m.playSound("splat_03",0.25)},0.975);C.start(function(){m.playSound("splat_01",0.35)},1.1);C.start(function(){m.playSound("splat_03",0.25)},1.125);this._transition.queueAnimation("transition_idle_ns",0);C.start(function(){a._finishInState()},1)},_setCloseState:function(){var a=this;this._transition.animate("transition_out_ns",1);C.start(function(){m.playSound("sfx/glass_wiping",
0.75)},0.4);C.start(function(){a._finishCloseState()},1)},_onEventResizeCanvas:function(){},__class__:dd});var me=function(a){J.call(this,a)};h["screen.ScreenTransitionEndGame"]=me;me.__name__=["screen","ScreenTransitionEndGame"];me.__super__=dd;me.prototype=y(dd.prototype,{_finishInState:function(){u.transitionOpen.dispatch()},__class__:me});var ze=function(a){J.call(this,a)};h["screen.ScreenTutorial"]=ze;ze.__name__=["screen","ScreenTutorial"];ze.__super__=J;ze.prototype=y(J.prototype,{_buildScreen:function(){this._closing=
!1;this._bg=this._elementManager.addElement(new Fa({color:0,sizeX:99999,sizeY:99999,alpha:0.35}));this._dialogueBox=this._elementManager.addElement(new ae({tween:this._tween,x:-40,y:210},!0));this._dialogueLineTimer=1;var a=q.getValue("ENUM_MINI_WORLD_NEXT");if(I._platform.getTouch().get_supported())switch(a[1]){case 0:this._dialogueQueue=["tutorial.dress_up_tap"];this._animQueue=["idle"];L.saveData.tutDressUpSeen=!0;break;case 1:this._dialogueQueue=["tutorial.taking_orders_tap"];this._animQueue=
["idle"];L.saveData.tutTakingOrdersSeen=!0;break;case 2:this._dialogueQueue=["tutorial.order_up_tap"];this._animQueue=["idle"];L.saveData.tutOrderUpSeen=!0;break;case 3:this._dialogueQueue=["tutorial.soda_machine_tap"];this._animQueue=["idle"];L.saveData.tutSodaMachineSeen=!0;break;case 4:this._dialogueQueue=["tutorial.stacking_food_tap"],this._animQueue=["idle"],L.saveData.tutStackingFoodSeen=!0}else switch(a[1]){case 0:this._dialogueQueue=["tutorial.dress_up_click"];this._animQueue=["idle"];L.saveData.tutDressUpSeen=
!0;break;case 1:this._dialogueQueue=["tutorial.taking_orders_click"];this._animQueue=["idle"];L.saveData.tutTakingOrdersSeen=!0;break;case 2:this._dialogueQueue=["tutorial.order_up_click"];this._animQueue=["idle"];L.saveData.tutOrderUpSeen=!0;break;case 3:this._dialogueQueue=["tutorial.soda_machine_click"];this._animQueue=["idle"];L.saveData.tutSodaMachineSeen=!0;break;case 4:this._dialogueQueue=["tutorial.stacking_food_click"],this._animQueue=["idle"],L.saveData.tutStackingFoodSeen=!0}this._hands=
[];switch(a[1]){case 0:this._addTapHereHand(-240,0,"tut_tap_1",0.5);this._addTapHereHand(240,0,"tut_tap_1",1.25);break;case 2:this._hands.push(this._elementManager.addElement(new za({library:"tutorial_hand",x:0,y:0,scale:0.7})));this._hands[0].animate("tut_tap_drag_line");break;case 3:this._addTapHereHand(-195,38,"tut_tap_2",0.5);this._addTapHereHand(5,38,"tut_tap_2",1.25);this._addTapHereHand(197,38,"tut_tap_2",2);break;case 4:this._hands.push(this._elementManager.addElement(new za({library:"tutorial_hand",
x:-120,y:100,scale:0.7}))),this._hands[0].animate("tut_tetris_2"),this._addTapHereHand(240,-50,"tut_tap_1",0.25),this._addTapHereHand(-200,-50,"tut_tap_1",1.6)}ac.dataSave("AllThatMinigameSuite",L.saveData);this._dialogueQueue.reverse();this._animQueue.reverse();this._kel=this._elementManager.addElement(new zd({library:"kel",x:350,y:600,scale:0.5}));this._kel.animate("idle")},dispose:function(){for(var a=0,b=this._hands.length;a<b;){var c=a++;C.stop("hand"+c)}J.prototype.dispose.call(this)},update:function(a){J.prototype.update.call(this,
a);this._dialogueBox.get_doneDisplaying()&&!this._readyToClose&&(this._dialogueLineTimer-=a,0>=this._dialogueLineTimer&&(0<this._dialogueQueue.length?(q.setString("STRING_DIALOGUE",this._dialogueQueue.pop()),a=this._animQueue.pop(),this._kel.get_currentAnimation()!=a&&this._kel.animate(a,0,1,0,!0),this._dialogueLineTimer=99999):!1==this._closing&&(this._closing=!0,u.flow.dispatch("TUT_CLOSE"))))},_setInState:function(){this._tween.tween({target:this._bg,duration:0.5,ease:s.outQuad},{alpha:0.65});
this._tween.tween({target:this._kel,duration:0.5,ease:s.outBack},{y:360});ma.easeBounceIn(this._dialogueBox,this._tween,!0,0.75).onComplete(n(this,this._finishInState))},_setCloseState:function(){q.setString("STRING_DIALOGUE","empty.empty");this._tween.tween({target:this._bg,duration:0.5,ease:s.outQuad},{alpha:0});this._tween.tween({target:this._kel,duration:0.5,ease:s.inBack},{y:600});for(var a=0,b=this._hands;a<b.length;){var c=b[a];++a;this._tween.tween({target:c,duration:0.25,ease:s.outQuad},
{alpha:0})}ma.easeBounceOut(this._dialogueBox,this._tween,!0,0.25).onComplete(n(this,this._finishCloseState))},_onInput:function(a,b){switch(a[1]){case 0:case 2:b&&this._state==ta.OPENED&&(this._readyToClose?!1==this._closing&&(this._closing=!0,u.flow.dispatch("TUT_CLOSE")):this._dialogueBox.get_doneDisplaying()?0<this._dialogueQueue.length?this._dialogueLineTimer=0:!1==this._closing&&(this._closing=!0,u.flow.dispatch("TUT_CLOSE")):this._dialogueBox.skipToEnd())}},_addTapHereHand:function(a,b,c,d){this._hands.push(this._elementManager.addElement(new za({library:"tutorial_hand",
x:a,y:b})));this._playTapHereAnim(this._hands.length-1,c,d)},_playTapHereAnim:function(a,b,c){var d=this;C.start(function(){d._hands[a].animate("tut_in",1,1,0,!0);d._hands[a].queueAnimation(b,1,1);d._hands[a].queueAnimation("tut_out",1,1);d._playTapHereAnim(a,b,4.6667)},c,"hand"+a)},__class__:ze});var T=function(a){this.children=[];this.parent=null;this._matrix=new tc;this._viewMatrix=new tc;this.pos=aa.request(0,0,0);this.offset=aa.request(0,0,0);this.rotation=0;this.set_origin(0.5);this.set_scale(this.alpha=
1);this.inputEnabled=this.visible=this.useCamera=this.usePerspective=!0;this.doDelete=!1;null!=a&&(null!=a.alpha&&(this.alpha=a.alpha),null!=a.x&&this.set_x(a.x),null!=a.y&&this.set_y(a.y),null!=a.z&&this.set_z(a.z),null!=a.offsetX&&this.set_offsetX(a.offsetX),null!=a.offsetY&&this.set_offsetY(a.offsetY),null!=a.offsetZ&&this.set_offsetZ(a.offsetZ),null!=a.origin&&this.set_origin(a.origin),null!=a.originX&&this.set_originX(a.originX),null!=a.originY&&this.set_originY(a.originY),null!=a.scale&&this.set_scale(a.scale),
null!=a.scaleX&&(this.scaleX=a.scaleX),null!=a.scaleY&&(this.scaleY=a.scaleY),null!=a.rotation&&(this.rotation=a.rotation),null!=a.visible&&(this.visible=a.visible),null!=a.useCamera&&(this.useCamera=a.useCamera),null!=a.usePerspective&&(this.usePerspective=a.usePerspective))};h["workinman.display.Sprite"]=T;T.__name__=["workinman","display","Sprite"];T.prototype={dispose:function(){if(null!=this.children){for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;c.dispose()}this.children=null}this.parent=
null;null!=this.pos&&(this.pos.dispose(),this.pos=null);null!=this.offset&&(this.offset.dispose(),this.offset=null);this._viewMatrix=this._matrix=null},get_x:function(){return this.pos.x},set_x:function(a){return this.pos.x=a},get_y:function(){return this.pos.y},set_y:function(a){return this.pos.y=a},get_z:function(){return this.pos.z},set_z:function(a){return this.pos.z=a},get_offsetX:function(){return this.offset.x},set_offsetX:function(a){return this.offset.x=a},get_offsetY:function(){return this.offset.y},
set_offsetY:function(a){return this.offset.y=a},get_offsetZ:function(){return this.offset.z},set_offsetZ:function(a){return this.offset.z=a},get_depth:function(){return this.pos.z},set_originX:function(a){return this.originX=a},set_originY:function(a){return this.originY=a},get_width:function(){return 0},get_height:function(){return 0},set_scale:function(a){return this.scale=this.scaleX=this.scaleY=a},set_origin:function(a){this.set_originX(this.set_originY(a));return a},addElement:function(a){return this.addChild(a)},
addChild:function(a){null!=a.parent&&a.parent.removeChild(a);a.parent=this;this.children.push(a);return a},addChildToBottom:function(a){null!=a.parent&&a.parent.removeChild(a);a.parent=this;this.children.unshift(a);return a},removeElement:function(a){return this.removeChild(a)},removeChild:function(a){G.remove(this.children,a)&&(a.parent=null);return a},get_viewMatrix:function(){return null!=this.parent?this._viewMatrix:this._matrix},get_viewX:function(){var a=this.get_viewMatrix();return a.m02/a.m00},
get_viewY:function(){var a=this.get_viewMatrix();return a.m12/a.m11},hitTest:function(a,b,c){if(!1==this.visible||!1==this.inputEnabled)return null;for(var d=this.children.length,e=null;0<d--;)if(e=this.children[d].hitTest(a,b,c),null!=e)return e;return this.inverseTransform(a,b,c)?this:null},inverseTransform:function(a,b,c,d,e){null==e&&(e=-1);null==d&&(d=-1);0>d&&(d=this.get_width());0>e&&(e=this.get_height());var g=-this.originX*d,p=-this.originY*e;return this.get_viewMatrix().inverseTransform(a,
b,c)&&c.x>=g&&c.y>=p&&c.x<g+d&&c.y<p+e},runUpdate:function(a){this.update(a);for(var b=this.children.length;0<b--;)this.children[b].runUpdate(a),this.children[b].doDelete&&(this.children[b].dispose(),this.children.splice(b,1))},update:function(){},render:function(a,b){if(!1!=this.visible){var c=0,d=0,c=0,e=1;if(null==b||!1==this.useCamera||!1==this.usePerspective)c=this.pos.x,d=this.pos.y,e=1;else{c=this.pos.z-b.pos.z+this.get_offsetZ();if(c<-b.focalLength)return;e=0>=b.focalLength?1:b.focalLength/
(b.focalLength+c);c=b.worldCenterX+(this.pos.x-b.pos.x-b.worldCenterX)*e;d=b.worldCenterY+(this.pos.y-b.pos.y-b.worldCenterY)*e}this._matrix.compose(c,d,this.scaleX*e,this.scaleY*e,3.141592653589793*this.rotation/180);null!=this.parent&&tc.multiply(this.parent.get_viewMatrix(),this._matrix,this._viewMatrix);a.ctx.save();1>this.alpha&&a.ctx.multiplyAlpha(this.alpha);a.ctx.transform(this._matrix.m00,this._matrix.m10,this._matrix.m01,this._matrix.m11,this._matrix.m02,this._matrix.m12);a.ctx.save();a.ctx.translate(-this.get_width()*
this.originX+this.get_offsetX(),-this.get_height()*this.originY+this.get_offsetY());this._draw(a);a.ctx.restore();c=0;for(d=this.children.length;c<d;)this.children[c++].render(a,null);a.ctx.restore()}},_draw:function(){},__class__:T,__properties__:{get_viewY:"get_viewY",get_viewX:"get_viewX",get_viewMatrix:"get_viewMatrix",set_origin:"set_origin",set_scale:"set_scale",get_height:"get_height",get_width:"get_width",get_depth:"get_depth",set_offsetZ:"set_offsetZ",get_offsetZ:"get_offsetZ",set_offsetY:"set_offsetY",
get_offsetY:"get_offsetY",set_offsetX:"set_offsetX",get_offsetX:"get_offsetX",set_z:"set_z",get_z:"get_z",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_originY:"set_originY",set_originX:"set_originX"}};var P=function(a){T.call(this,a);this.texture=this.rect=null;null!=a&&null!=a.asset&&this.setAsset(a.asset)};h["workinman.display.ImageSprite"]=P;P.__name__=["workinman","display","ImageSprite"];P.__super__=T;P.prototype=y(T.prototype,{get_asset:function(){return this._asset},set_asset:function(a){this.setAsset(a);
return this._asset},dispose:function(){T.prototype.dispose.call(this);this.texture=this.rect=null},get_width:function(){return null==this.texture?0:null!=this.rect?this.rect.origX:this.texture.get_width()},get_height:function(){return null==this.texture?0:null!=this.rect?this.rect.origY:this.texture.get_height()},setAsset:function(a){if(null==a||""==a)return this;this._asset=a;this.texture=o.getTexture(a);this.rect=o.getSpriteRect(a);return this},setTexture:function(a){this.rect=null;this.texture=
a;return this},_draw:function(a){null!=this.texture&&(null!=this.rect?this.rect.rotate?(a.ctx.save(),a.ctx.rotate(90),a.ctx.drawSubTexture(this.texture,this.rect.origY-this.rect.sizeY-this.rect.offsetY,-this.rect.offsetX-this.rect.sizeX,this.rect.x,this.rect.y,this.rect.sizeY,this.rect.sizeX),a.ctx.restore()):a.ctx.drawSubTexture(this.texture,this.rect.offsetX,this.rect.origY-this.rect.sizeY-this.rect.offsetY,this.rect.x,this.rect.y,this.rect.sizeX,this.rect.sizeY):a.ctx.drawTexture(this.texture,
0,0))},__class__:P,__properties__:y(T.prototype.__properties__,{set_asset:"set_asset",get_asset:"get_asset"})});var ea=function(a){null==ea._scratchPoint&&(ea._scratchPoint=new Md);P.call(this,a);this.eventClick=Sa._new();this.eventDown=Sa._new();this.eventUp=Sa._new();this.eventOver=Sa._new();this.eventOut=Sa._new();this._tween=a.tween;this._containsInput=!1;this._clearFunction=a.clear;this._assetUp=a.assetUp;this._assetOver=a.assetOver;this._assetDown=a.assetDown;this._assetDisabled=a.assetDisabled;
this._state=Ga._STATE_UP;this.enable();this.setCustomHitBox(this.get_width(),this.get_height());z.eventInput.add(n(this,this._onInput));this._buttonScaleBase=aa.request(this.scaleX,this.scaleY)};h["workinman.ui.Button"]=ea;ea.__name__=["workinman","ui","Button"];ea.__super__=P;ea.prototype=y(P.prototype,{dispose:function(){z.eventInput.remove(n(this,this._onInput));this.eventClick.dispose();this.eventClick=null;this.eventDown.dispose();this.eventDown=null;this.eventUp.dispose();this.eventUp=null;
this.eventOver.dispose();this.eventOver=null;this.eventOut.dispose();this.eventOut=null;this._flagEnabled=!1;this._assetDisabled=this._assetDown=this._assetOver=this._assetUp=null;this._hitBox.dispose();this._tween=this._hitBox=null;this._buttonScaleBase.dispose();this._clearFunction=this._state=this._buttonScaleBase=null;P.prototype.dispose.call(this)},enable:function(){this._flagEnabled=!0;this._renderUp();return this},disable:function(){this._flagEnabled=!1;this._renderDisabled();return this},
get_hitbox:function(){return this._hitBox},setCustomHitBox:function(a,b){null==this._hitBox&&(this._hitBox=this.addChild(new Fa({color:16711680,sizeX:a,sizeY:b,alpha:0,originX:this.originX,originY:this.originY})));this._hitBox.sizeX=a;this._hitBox.sizeY=b;return this},_onInput:function(a,b){var c=I._platform.getPointer().get_x(),d=I._platform.getPointer().get_y();switch(a[1]){case 0:this._containsInput=this._hitBox.inverseTransform(c,d,ea._scratchPoint);if(b)switch(this._state[1]){case 0:case 2:case 3:this._containsInput&&
this._depthTest(c,d)&&(this._state=Ga._STATE_DOWN,this._onDown(c,d))}else switch(this._state[1]){case 1:this._containsInput?(this._state=Ga._STATE_CLICK,this._onUp(c,d)):(this._state=Ga._STATE_UP,this._renderReturnUp())}break;case 1:switch(this._state[1]){case 0:this._containsInput&&this._depthTest(c,d)&&(this._state=Ga._STATE_OVER,this._onOver());break;case 2:!1==this._containsInput&&(this._state=Ga._STATE_UP,this._onOut())}}},_depthTest:function(a,b){if(!1==this._flagEnabled)return!1;var c=z.hitTest(a,
b);return null!=this._hitBox&&c==this._hitBox?!0:!1},_dispatch:function(a){!1!=this._clearFunction()&&a.dispatch()},_click:function(){this._tween.tween({target:this,duration:0.1,overwrite:!0,ease:s.inQuad},{scaleX:1.1*this._buttonScaleBase.x,scaleY:1.1*this._buttonScaleBase.y});this._tween.tween({target:this,duration:0.4,overwrite:!1,ease:s.outElastic},{scaleX:this._buttonScaleBase.x,scaleY:this._buttonScaleBase.y}).onComplete(n(this,this._onClickComplete));this._playSoundClick();this._doClick()},
_onClickComplete:function(){this._containsInput&&this._flagEnabled?(this._state=Ga._STATE_OVER,this._renderOver()):this._state=Ga._STATE_UP},_doClick:function(){this._dispatch(this.eventClick)},_onDown:function(){this._flagEnabled&&(this._renderDown(),this._dispatch(this.eventDown))},_onUp:function(){this._flagEnabled&&(this._renderReturnUp(),this._click(),this._dispatch(this.eventUp))},_onOver:function(){this._renderOver();this._playSoundOver();this._dispatch(this.eventOver)},_onOut:function(){this._flagEnabled&&
(this._renderOut(),this._dispatch(this.eventOut))},_playSoundClick:function(){m.playSound("",1)},_playSoundOver:function(){m.playSound("",1)},setScale:function(a,b){this._buttonScaleBase.x=a;this._buttonScaleBase.y=b;this.scaleX=this._buttonScaleBase.x;this.scaleY=this._buttonScaleBase.y;return this},setBaseAsset:function(a){this._assetDisabled=this._assetDown=this._assetOver=this._assetUp=a;this.setAsset(this._assetUp);return this},_renderUp:function(){this.setAsset(this._assetUp)},_renderOver:function(){this._tween.tween({target:this,
duration:0.15,overwrite:!0,ease:s.inQuad},{scaleX:1.1*this._buttonScaleBase.x,scaleY:1.1*this._buttonScaleBase.y})},_renderOut:function(){this._tween.tween({target:this,duration:0.5,overwrite:!0,ease:s.outElastic},{scaleX:this._buttonScaleBase.x,scaleY:this._buttonScaleBase.y})},_renderDown:function(){this._tween.tween({target:this,duration:0.15,overwrite:!0,ease:s.outQuad},{scaleX:0.9*this._buttonScaleBase.x,scaleY:0.9*this._buttonScaleBase.y});this.setAsset(this._assetDown)},_renderReturnUp:function(){this._tween.tween({target:this,
duration:0.15,overwrite:!0,ease:s.outQuad},{scaleX:this._buttonScaleBase.x,scaleY:this._buttonScaleBase.y});this._renderUp()},_renderDisabled:function(){this.setAsset(this._assetDisabled)},__class__:ea,__properties__:y(P.prototype.__properties__,{get_hitbox:"get_hitbox"})});var Qg=function(a){ea.call(this,a);this._assetUpOn=a.assetUp;this._assetOverOn=a.assetOver;this._assetDownOn=a.assetDown;this._assetDisabledOn=a.assetDisabled;this._assetUpOff=a.assetUpOff;this._assetOverOff=a.assetOverOff;this._assetDownOff=
a.assetDownOff;this._assetDisabledOff=a.assetDisabledOff;this._refreshMuteState();this._renderUp()};h["screen.button.ButtonSoundToggle"]=Qg;Qg.__name__=["screen","button","ButtonSoundToggle"];Qg.__super__=ea;Qg.prototype=y(ea.prototype,{dispose:function(){this._assetDisabledOff=this._assetDownOff=this._assetOverOff=this._assetUpOff=this._assetDisabledOn=this._assetDownOn=this._assetOverOn=this._assetUpOn=null;ea.prototype.dispose.call(this)},_doClick:function(){this._flagEnabled&&(m.set_muteAll(!m.muteAll),
this._refreshMuteState(),this._renderUp(),m.playSound("pause_screen/button_click_02"))},_refreshMuteState:function(){m.muteAll?(this._assetUp=this._assetUpOff,this._assetOver=this._assetOverOff,this._assetDown=this._assetDownOff,this._assetDisabled=this._assetDisabledOff):(this._assetUp=this._assetUpOn,this._assetOver=this._assetOverOn,this._assetDown=this._assetDownOn,this._assetDisabled=this._assetDisabledOn)},__class__:Qg});var O=function(a){T.call(this,a);this._fontName="";this.set_wrapWidth(this.set_letterSpacing(this.set_lineSpacing(0)));
this.set_align(ya.Center);null!=a&&(null!=a.color&&(this._color=a.color),this.setText(a.text),this.setVariables(a.vars),null!=a.align&&this.set_align(a.align),null!=a.wrapWidth&&this.set_wrapWidth(a.wrapWidth),null!=a.lineSpacing&&this.set_lineSpacing(a.lineSpacing),null!=a.letterSpacing&&this.set_letterSpacing(a.letterSpacing));this.inputEnabled=!1};h["workinman.display.Text"]=O;O.__name__=["workinman","display","Text"];O.__super__=T;O.prototype=y(T.prototype,{dispose:function(){this._text=this._data=
this._fontName=this._font=this._layout=null;this.set_align(null);T.prototype.dispose.call(this)},get_width:function(){return null==this._layout||null==this._data?0:(0<this.wrapWidth?this.wrapWidth:this._layout.bounds.width)*this._data.scale},get_height:function(){if(null==this._layout||null==this._data)return 0;var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing),b=this._layout.bounds.height;return(a>b?a:b)*this._data.scale},set_align:function(a){if(null==a)return this.align=null;this.align=
a;this._updateLayout();return a},set_originX:function(){return this.originX=0},set_wrapWidth:function(a){this.wrapWidth=a;this._updateLayout();return a},set_letterSpacing:function(a){this.letterSpacing=a;this._updateLayout();return a},set_lineSpacing:function(a){this.lineSpacing=a;this._updateLayout();return a},setText:function(a,b){this._data=ba.getLocalizeData(a);null!=this._data&&(this.set_offsetX(this._data.offsetX),this.set_offsetY(this._data.offsetY),this._setFont(this._data.fontName),this._text=
this._replaceVars(b),this._updateLayout())},setColor:function(a){this._color=a},setVariables:function(a){null!=this._data&&(this._text=this._replaceVars(a),this._updateLayout())},_updateLayout:function(){null==this._data||null==this._font||(this._layout=this._font.layoutText(this._text,this.align,this.wrapWidth/this._data.scale,this.letterSpacing,this.lineSpacing))},_draw:function(a){if(null!=this._layout){a.ctx.save();if(0<this.wrapWidth){var b=this.wrapWidth*this._data.scale;switch(this.align[1]){case 1:a.ctx.translate(0.5*
-this.wrapWidth,0);break;case 2:a.ctx.translate(2*-b,0)}}a.ctx.scale(this._data.scale,this._data.scale);this._layout.draw(a.ctx);a.ctx.restore()}},_setFont:function(a){a!=this._fontName&&(this._font=null!=this._color?o.getFont(a,!0,this._color):o.getFont(a))},_replaceVars:function(a){for(var b="",c=this._data.string.split("}"),d=0;d<c.length;){var e=c[d];++d;e=e.split("{");b+=e[0];1<e.length&&(e=B.parseInt(e[1]),b=null!=a&&a.length>e?b+a[e]:b+("[Missing {"+e+"}]"))}return b},__class__:O,__properties__:y(T.prototype.__properties__,
{set_lineSpacing:"set_lineSpacing",set_letterSpacing:"set_letterSpacing",set_wrapWidth:"set_wrapWidth",set_align:"set_align"})});var Rf=function(a){O.call(this,a)};h["screen.display.CustomText"]=Rf;Rf.__name__=["screen","display","CustomText"];Rf.__super__=O;Rf.prototype=y(O.prototype,{dispose:function(){O.prototype.dispose.call(this)},setExactString:function(a){this._text=a;this._updateLayout()},__class__:Rf});var v=function(a){P.call(this,a);this.velocity=aa.request();this._addEventListeners()};
h["workinman.display.Element"]=v;v.__name__=["workinman","display","Element"];v.__super__=P;v.prototype=y(P.prototype,{dispose:function(){P.prototype.dispose.call(this);this.velocity.dispose();this.velocity=null;this._removeEventListeners()},_addEventListeners:function(){},_removeEventListeners:function(){},__class__:v});var Wa=function(a){this._flagLocked=!1;this._tween=a.tween;v.call(this,a)};h["workinman.ui.Display"]=Wa;Wa.__name__=["workinman","ui","Display"];Wa.__super__=v;Wa.prototype=y(v.prototype,
{_addEventListeners:function(){v.prototype._addEventListeners.call(this);u.updateDisplay.add(n(this,this._onUpdateDisplay))},_removeEventListeners:function(){v.prototype._removeEventListeners.call(this);u.updateDisplay.remove(n(this,this._onUpdateDisplay))},_onUpdateDisplay:function(a){this._flagLocked||a==this._updateValue()&&this._refresh()},_refresh:function(){},_updateValue:function(){return null},dispose:function(){this._tween=null;v.prototype.dispose.call(this)},lock:function(){this._flagLocked=
!0},unlock:function(){this._flagLocked=!1},__class__:Wa});var ae=function(a,b){Wa.call(this,a);this._skipFirstSfx=0;this._dialogueBubble=this.addChild(new v({asset:"intro_ending/diologue"}));this._dialogueText=this.addChild(new Rf({text:"intro.intro1",x:0,y:20,align:ya.Center,color:0}));this._refresh();this._dialogueString="";this._dialogueTimerMax=this._dialogueTimer=0;this._displayInstantly=b};h["screen.display.DisplayDialogueBox"]=ae;ae.__name__=["screen","display","DisplayDialogueBox"];ae.__super__=
Wa;ae.prototype=y(Wa.prototype,{get_doneDisplaying:function(){return this._dialogueTimer>=this._dialogueTimerMax||this._displayInstantly},update:function(a){Wa.prototype.update.call(this,a);this._dialogueTimer+=a;this._dialogueTimer<this._dialogueTimerMax&&!this._displayInstantly?this._dialogueText.setExactString(G.substr(this._dialogueString,0,Math.floor(this._dialogueTimer/0.05))):this._dialogueText.setExactString(this._dialogueString)},dispose:function(){this._dialogueText=this._dialogueBubble=
null;Wa.prototype.dispose.call(this)},_refresh:function(){this._dialogueString=ba.getLocalizeData(q.getString(this._updateValue())).string;this._dialogueTimer=0;this._dialogueTimerMax=0.05*this._dialogueString.length;this._displayInstantly&&2<=this._skipFirstSfx&&m.playSound("sfx/pop_02");this._skipFirstSfx++},_updateValue:function(){return"STRING_DIALOGUE"},skipToEnd:function(){this._dialogueTimer=this._dialogueTimerMax},reverse:function(){this.pos.x=-this.pos.x;this._dialogueBubble.scaleX=-1},__class__:ae,
__properties__:y(Wa.prototype.__properties__,{get_doneDisplaying:"get_doneDisplaying"})});var Pg=function(a){Wa.call(this,a);this._score=q.getInt(this._updateValue());this.addElement(new P({asset:"taking_orders/button_unselected"}));this.addElement(new O({text:this._textTitle(),x:-75,y:-10,align:ya.Left,color:0}));this._text=this.addElement(new O({text:"gameplay.score_number",x:0,y:10,align:ya.Center,color:0}));this._refresh()};h["screen.display.DisplayPiecesLeft"]=Pg;Pg.__name__=["screen","display",
"DisplayPiecesLeft"];Pg.__super__=Wa;Pg.prototype=y(Wa.prototype,{dispose:function(){this._text=null;Wa.prototype.dispose.call(this)},_refresh:function(){this._score=q.getInt(this._updateValue());this._text.setVariables([""+this._score]);ma.easeBounceIn(this._text,this._tween,!1)},_updateValue:function(){return"INT_PIECES_LEFT_STACKING_FOOD"},_textTitle:function(){return"gameplay.pieces_left"},__class__:Pg});var Sd=function(a,b){Wa.call(this,a);this._isHighscore=b;this._score=q.getInt(this._updateValue());
this.addElement(new P({asset:"taking_orders/button_unselected"}));this.addElement(new O({text:this._textTitle(),x:-75,y:-10,align:ya.Left,color:0}));this._text=this.addElement(new O({text:"gameplay.score_number",x:0,y:10,align:ya.Center,color:0}));this._refresh()};h["screen.display.DisplayScore"]=Sd;Sd.__name__=["screen","display","DisplayScore"];Sd.__super__=Wa;Sd.prototype=y(Wa.prototype,{dispose:function(){this._text=null;Wa.prototype.dispose.call(this)},_refresh:function(){this._score=q.getInt(this._updateValue());
for(var a=""+this._score;8>a.length;)a="0"+a;a=G.substr(a,0,2)+","+G.substr(a,2,3)+","+G.substr(a,5,3);this._text.setVariables([a]);ma.easeBounceIn(this._text,this._tween,!1)},_updateValue:function(){var a=q.getValue("ENUM_MINI_WORLD_NEXT");if(this._isHighscore)switch(a[1]){case 2:return"INT_HISCORE_ORDER_UP";case 3:return"INT_HISCORE_SODA_MACHINE";case 4:return"INT_HISCORE_STACKING_FOOD";default:return""}else switch(a[1]){case 2:return"INT_SCORE_ORDER_UP";case 3:return"INT_SCORE_SODA_MACHINE";case 4:return"INT_SCORE_STACKING_FOOD";
default:return""}},_textTitle:function(){return this._isHighscore?"gameplay.high_score":"gameplay.score"},__class__:Sd});var o=function(){};h["workinman.WMAssets"]=o;o.__name__=["workinman","WMAssets"];o.__properties__={set_baseUrl:"set_baseUrl",get_isLoading:"get_isLoading"};o.update=function(a){o.get_isLoading()||1>o._loadQueue.length||(o._loadQueue[0].delay-=a,0>o._loadQueue[0].delay&&o._beginLoad(o._loadQueue.shift()))};o.get_isLoading=function(){return o._manifestsLoaded<o._manifestsMax};o.set_baseUrl=
function(a){o.baseUrl=a;return o.baseUrl};o.setCrossdomainBaseUrl=function(a){o._flagBaseIsCrossdomain=!0;o.set_baseUrl(a)};o.load=function(a,b,c){null==c&&(c=0);if(null==a)throw"[WMAssets](load) Callback is null.";a=new zi(a,b,c);o.get_isLoading()||0<c?o._loadQueue.push(a):o._beginLoad(a)};o._beginLoad=function(a){for(var b=[],c=[],d=0,e=a.packs;d<e.length;){var g=e[d];++d;o._packs.exists(g)||(Rb.exists(g)?b.push(g):o._customManifests.exists(g)?c.push(g):null)}if(1>b.length&&1>c.length)a.complete();
else{q.setFloat("FLOAT_LOADING_PROGRESS",0);o._loadingProgress=0;o._loadingCallback=a.complete;o._manifestsMax+=c.length+b.length;for(d=0;d<b.length;)e=b[d],++d,o._loadPack(e);for(b=0;b<c.length;)d=c[b],++b,o._loadManifest(o._customManifests.get(d),d);a.dispose()}};o._loadPack=function(a){var b=Rb.fromAssets(a);""!=o.baseUrl&&(o._flagBaseIsCrossdomain?b.set_remoteBase(o.baseUrl):b.set_localBase(o.baseUrl));o._loadManifest(b,a)};o._loadManifest=function(a,b){var c=I._platform.loadAssetPack(a);o._loadingTotal+=
c._total;var d=0;c.error.connect(o._loadingError);c.progressChanged.connect(function(){var a=c._progress-d;d=c._progress;o._loadingProgress+=a;q.setFloat("FLOAT_LOADING_PROGRESS",Ld.clamp(o._loadingProgress/o._loadingTotal,0,1))});o._requests.push(c.get(function(a){o._addPack(b,new Ai(a));++o._manifestsLoaded>=o._manifestsMax&&o._onAllLoadComplete()}))};o._loadingError=function(){o.eventLoadError.dispatch();o._manifestsLoaded++};o._onAllLoadComplete=function(){if(null!=o._loadingCallback){var a=o._loadingCallback;
o._loadingCallback=null;a()}for(;0<o._requests.length;)o._requests.pop()};o._addPack=function(a,b){o._packs.set(a,b);b;for(var c=b.pack.get_manifest().iterator();c.hasNext();){var d=c.next();if(-1<d.name.indexOf("library.json")){var d=d.name,d=da.replace(d,"/library.json",""),e=new $h(b.pack,d);o._flump.set(d,e);e;b.flump.push(d)}else{switch(qd.getExtension(d.name)){case "atlas":case "txt":for(var e="",g=d.name.split("/"),p=0,f=g.length-1;p<f;)var j=p++,e=e+(g[j]+"/");o._parseSpriteAtlas(e,b.pack.getFile(d.name).toString(),
b)}o._assets.set(d.name,a);a;b.assets.push(d.name)}}};o._parseSpriteAtlas=function(a,b,c){for(b=b.split("\n");1<b.length;){for(;1>=b[0].length;)b.shift();for(var d=a+qd.removeExtension(da.rtrim(b.shift()));!(-1<b.shift().indexOf("repeat:")););for(;1<b.length&&1<b[0].length;)o._parsePackedSpriteAndMovePlayhead(d,b,c)}};o._parsePackedSpriteAndMovePlayhead=function(a,b,c){for(var d=[],e;!(e=b.shift(),d.push(da.rtrim(e)),-1<e.indexOf("index:")););o._addPackedSprite(d[0],a,new Bi(d),c)};o._addPackedSprite=
function(a,b,c,d){o._spritesheets.exists(a)&&o._spritesheets.get(a).dispose();b=new Ci(b,c);o._spritesheets.set(a,b);d.spritesheets.push(a)};o.hasTexture=function(a){null==a&&(a="");return null==a||""==a?!1:o._hasAsset(a)};o.hasSound=function(a){null==a&&(a="");return null==a||""==a?!1:o._hasAsset(a)};o.hasXML=function(a){null==a&&(a="");return null==a||""==a?!1:o._hasAsset(a)};o._hasAsset=function(a){return o._spritesheets.exists(a)?!0:o._assets.exists(a)};o.getPackForAsset=function(a){!1==o._assets.exists(a)?
a=null:(a=o._assets.get(a),a=o._packs.get(a).pack);return a};o.getTexture=function(a){if(!1==o.hasTexture(a))return null;o._spritesheets.exists(a)&&(a=o._spritesheets.get(a).atlas);if(!1==o._assets.exists(a))a=null;else var b=o._assets.get(a),a=o._packs.get(b).pack.getTexture(a);return a};o.getSpriteRect=function(a){return null==a||""==a||!1==o._spritesheets.exists(a)?null:o._spritesheets.get(a).rect};o.getSound=function(a){if(!1==o.hasSound(a))a=null;else var b=o._assets.get(a),a=o._packs.get(b).pack.getSound(a);
return a};o.getFile=function(a){if(!1==o._hasAsset(a))a=null;else var b=o._assets.get(a),a=o._packs.get(b).pack.getFile(a);return a};o.getXML=function(a){if(!1==o.hasXML(a))return null;a=R.parse(o.getFile(a).toString());return new Cf(a.firstElement())};o.allConfig=function(){for(var a=[],b=0,c=Fj.allConfig;b<c.length;){var d=c[b];++b;a.push(o.getXML(d))}return a};o.getFont=function(a,b,c){null==c&&(c=-1);null==b&&(b=!0);if(null==a||""==a||!1==o._assets.exists(a))return o.getFont(ba.defaultFont);if(-1==
c){if(!1==b)return new cc(function(){var b=o._assets.get(a);return o._packs.get(b)}(this).pack,a);if(!1==o._fontCache.exists(a)){var d=new cc(function(){var b=o._assets.get(a);return o._packs.get(b)}(this).pack,a);o._fontCache.set(a,d);d}return o._fontCache.get(a)}d=a+c;if(!1==b)return new jd(function(){var b=o._assets.get(a);return o._packs.get(b)}(this).pack,a,c);!1==o._fontCache.exists(d)&&(b=new jd(function(){var b=o._assets.get(a);return o._packs.get(b)}(this).pack,a,c),o._fontCache.set(d,b),
b);return o._fontCache.get(d)};var q=function(){};h["workinman.WMCloud"]=q;q.__name__=["workinman","WMCloud"];q.setBool=function(a,b){q.setValue(a,b)};q.getBool=function(a){return q._values.get(a)};q.setFloat=function(a,b){q.setValue(a,b)};q.getFloat=function(a){return q._values.get(a)};q.setInt=function(a,b){q.setValue(a,b)};q.modifyInt=function(a,b){return Math.floor(q.modifyValue(a,b))};q.getInt=function(a){return q._values.get(a)};q.setString=function(a,b){q.setValue(a,b)};q.getString=function(a){return q._values.get(a)};
q.setDefault=function(a,b){q._defaults.set(a,b);q.resetValue(a)};q.getValue=function(a){return q._values.get(a)};q.setValue=function(a,b){q._values.set(a,b);!1==q._defaults.exists(a)&&q.setDefault(a,b);q._updateDisplays(a)};q.modifyValue=function(a,b){null==b&&(b=1);var c=q.getFloat(a)+b;q._values.set(a,c);q._updateDisplays(a);return q.getFloat(a)};q.resetValue=function(a){var b=q._defaults.get(a);q._values.set(a,b);q._updateDisplays(a)};q._updateDisplays=function(a){u.updateDisplay.dispatch(a)};
var Sf=function(){};h["workinman.pooling.IStrictPoolable"]=Sf;Sf.__name__=["workinman","pooling","IStrictPoolable"];Sf.prototype={__class__:Sf};var bb=function(){};h["workinman.pooling.PoolStrictBase"]=bb;bb.__name__=["workinman","pooling","PoolStrictBase"];bb.__interfaces__=[Sf];bb.prototype={instance:function(a,b){this._returnFunction=b;this._key=a;this.poolActivate();this.create();return this},get_poolKey:function(){return this._key},create:function(){},poolActivate:function(){this._disposed=!1},
dispose:function(){this._disposed||(this._disposed=!0,this._returnFunction(this))},destroy:function(){this._returnFunction=null},__class__:bb,__properties__:{get_poolKey:"get_poolKey"}};var aa=function(){};h["workinman.math.WMPoint"]=aa;aa.__name__=["workinman","math","WMPoint"];aa.request=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);return ia.requestObject(aa).init(a,b,c)};aa.__super__=bb;aa.prototype=y(bb.prototype,{init:function(a,b,c){return this.to(a,b,c)},get_angle:function(){return 180*
Math.atan2(this.y,this.x)/Math.PI},clean:function(){this.x=Math.round(1E3*this.x)/1E3;this.y=Math.round(1E3*this.y)/1E3;this.z=Math.round(1E3*this.z)/1E3;return this},to:function(a,b,c){null==c&&(c=0);this.x=a;this.y=b;this.z=c;this.calculateLength();return this},toPoint:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.calculateLength();return this},add:function(a,b,c){null==c&&(c=0);this.x+=a;this.y+=b;this.z+=c;this.calculateLength();return this},addPoint:function(a){this.x+=a.x;this.y+=a.y;this.z+=
a.z;this.calculateLength();return this},addCopy:function(a,b,c){null==c&&(c=0);return aa.request(this.x+a,this.y+b,this.z+c)},addPointCopy:function(a){return aa.request(this.x+a.x,this.y+a.y,this.z+a.z)},subtract:function(a,b,c){null==c&&(c=0);this.x-=a;this.y-=b;this.z-=c;this.calculateLength();return this},subtractScalar:function(a){a=this._length-a;Td.sign(this._length)!=Td.sign(a)&&(a=0);this.set_length(a);return this},subtractPoint:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;this.calculateLength();
return this},subtractCopy:function(a,b,c){null==c&&(c=0);return aa.request(this.x-a,this.y-b,this.z-c)},subtractPointCopy:function(a){return aa.request(this.x-a.x,this.y-a.y,this.z-a.z)},multiply:function(a){this.x*=a;this.y*=a;this.z*=a;this.clean();this.calculateLength();return this},multiplyCopy:function(a){return aa.request(this.x*a,this.y*a,this.z*a)},divide:function(a){this.x/=a;this.y/=a;this.z/=a;this.clean();this.calculateLength();return this},divideCopy:function(a){return aa.request(this.x/
a,this.y/a,this.z/a)},reverse:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},copy:function(){return aa.request(this.x,this.y,this.z)},copyAndResize:function(a){return 0==a?aa.request(0,0):this.multiplyCopy(a/this._length)},equals:function(a){return this.x==a.x&&this.y==a.y&&this.z==a.z},get_length:function(){return this._length},set_length:function(a){if(0==this._length||0>=a)return this.to(0,0),this._length;this.multiply(a/this._length);return this._length},reverseCopy:function(){return aa.request(-1*
this.x,-1*this.y,-1*this.z)},normalize:function(){if(0==this._length)return this;this.x/=this._length;this.y/=this._length;this.z/=this._length;this.calculateLength();return this},normalizeTo:function(a){this.set_length(a);return this},normalizeCopy:function(){return 0==this._length?aa.request(0,0,0):aa.request(this.x/this._length,this.y/this._length,this.z/this._length)},normalizeCopyTo:function(a){if(0==this._length)return aa.request(0,0,0);this._workFloat=a/this._length;return aa.request(this.x*
this._workFloat,this.y*this._workFloat,this.z*this._workFloat)},pseudoCross:function(a){a.to(this.y,-this.x,this.z);return this},calculateLength:function(){this._length=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return this},rotate:function(a){a*=Math.PI/180;this._workFloat=this.x*Math.cos(a)-this.y*Math.sin(a);this.y=this.y*Math.cos(a)+this.x*Math.sin(a);this.x=this._workFloat;return this},rotateTo:function(a){this.rotate(a-this.get_angle());return this},getAngleBetween:function(a){return 0==
a.get_length()||0==this.get_length()?0:180/Math.PI*Math.acos((a.x*this.x+a.y*this.y)/(a.get_length()*this.get_length()))},rotateCopy:function(a){var b=Math.cos(a*Math.PI/180),a=Math.sin(a*Math.PI/180);return aa.request(this.x*b-this.y*a,this.x*a-this.y*b)},get_normalizedMagnitude:function(){var a=this.normalizeCopy(),b=Math.sqrt(a.x*a.x+a.y*a.y);a.dispose();return b},toString:function(){return"{ WMPoint : "+this.x+" , "+this.y+" , "+this.z+" , len: "+this._length+"  }"},dot:function(a){return this.x*
a.x+this.y*a.y},__class__:aa,__properties__:y(bb.prototype.__properties__,{get_normalizedMagnitude:"get_normalizedMagnitude",set_length:"set_length",get_length:"get_length",get_angle:"get_angle"})});var ia=function(){};h["workinman.WMPool"]=ia;ia.__name__=["workinman","WMPool"];ia._initPool=function(a,b,c,d){null==d&&(d=-1);!0!=ia._pools.exists(a)&&(null==c&&(c=lb.NONE),b=new Di(b,c,d),ia._pools.set(a,b))};ia.requestObject=function(a,b,c){null==c&&(c=-1);var d=xa.getClassName(a);ia._testPool(d,a,
b,c);b=ia._pools.get(d);ia._logCreate(d,b);if(0<b.get_numPooled())a=b.givePool(),a.poolActivate();else{b.incrementCreated();if(0<b.get_cap()&&b.get_created()>b.get_cap())throw"Too many instances of "+B.string(a)+" allocated - currently at "+b.get_created();a=xa.createEmptyInstance(a).instance(d,ia._returnObject)}return a};ia._logCreate=function(a,b){switch(b.get_log()[1]){case 1:null;break;case 2:1>b.get_numPooled()&&null;break;case 3:null}};ia._returnObject=function(a){var b=a.get_poolKey();!1!=
ia._pools.exists(b)&&(b=a.get_poolKey(),b=ia._pools.get(b),b.poolObject(a),ia._logReturn(a.get_poolKey(),b))};ia._logReturn=function(a,b){switch(b.get_log()[1]){case 0:case 2:break;case 3:null;break;default:null}};ia._testPool=function(a,b,c,d){null==d&&(d=-1);!1==ia._pools.exists(a)&&ia._initPool(a,b,c,d)};ia.tracePoolReport=function(){for(var a="\nPool Report:\n\n",b=0,c=ia._pools.keys();c.hasNext();){var d=c.next(),a=a+("\t"+d+"\n"),b=ia._pools.get(d).get_created()-ia._pools.get(d).get_numPooled(),
a=a+("\t\tTotal Created: "+ia._pools.get(d).get_created()+" \t\tPool: "+ia._pools.get(d).get_numPooled()+" \t\t\tLoose: "+b+" \t\t\tChange: "+(b-ia._pools.get(d).get_loose()));ia._pools.get(d).set_loose(b);a+="\n"}null};var lb=h["workinman.pooling.LOG_LEVEL"]={__ename__:["workinman","pooling","LOG_LEVEL"],__constructs__:["NONE","NO_STACK","NEW_STACK","ALL_STACK"]};lb.NONE=["NONE",0];lb.NONE.toString=k;lb.NONE.__enum__=lb;lb.NO_STACK=["NO_STACK",1];lb.NO_STACK.toString=k;lb.NO_STACK.__enum__=lb;lb.NEW_STACK=
["NEW_STACK",2];lb.NEW_STACK.toString=k;lb.NEW_STACK.__enum__=lb;lb.ALL_STACK=["ALL_STACK",3];lb.ALL_STACK.toString=k;lb.ALL_STACK.__enum__=lb;var Di=function(a,b,c){this._pool=[];this._class=a;this._log=b;this._created=this._max=0;this._cap=c;this._loose=0};h["workinman.pooling.PoolTracker"]=Di;Di.__name__=["workinman","pooling","PoolTracker"];Di.prototype={get_log:function(){return this._log},get_numPooled:function(){return this._pool.length},get_created:function(){return this._created},get_cap:function(){return this._cap},
get_loose:function(){return this._loose},set_loose:function(a){this._loose=a;return this.get_loose()},incrementCreated:function(){this._created++},poolObject:function(a){this._pool.push(a);this._max=Ld.max(this._max,this._pool.length)},givePool:function(){return this._pool.pop()},__class__:Di,__properties__:{set_loose:"set_loose",get_loose:"get_loose",get_cap:"get_cap",get_created:"get_created",get_numPooled:"get_numPooled",get_log:"get_log"}};var Rg=function(a){this.lastPos=aa.request();this.line=
dc.request();this.swipe=Aa.NONE;this.down=!1;this.fresh=!0;this.id=a;this.disposed=this.consumed=!1};h["workinman.input.Pointer"]=Rg;Rg.__name__=["workinman","input","Pointer"];Rg.prototype={dispose:function(){this.disposed=!0;this.lastPos.dispose();this.lastPos=null;this.line.dispose();this.swipe=this.line=null},get_currentPos:function(){return this.line.get_p1()},begin:function(a,b){this.line.toFloats(a,b,a,b);this.lastPos.to(a,b);this.phase=ab.DOWN;this.fresh=this.down=!0;this.consumed=!1;this.swipe=
Aa.NONE},move:function(a,b){this._updateInfo(a,b);this.phase!=ab.UP&&!this.fresh&&(this.fresh=!0,this.phase=ab.MOVED)},stop:function(){this.phase=ab.STOPPED},end:function(a,b){this._updateInfo(a,b);this.fresh=!0;this.phase=ab.UP;this.down=!1},_updateInfo:function(a,b){this.lastPos.toPoint(this.line.get_p1());this.line.endTo(a,b,0);var c=this.line.get_p0().x-this.line.get_p1().x,d=this.line.get_p0().y-this.line.get_p1().y;this.swipe=30<=Math.abs(c)&&30>Math.abs(d)?0<c?Aa.LEFT:Aa.RIGHT:30<=Math.abs(d)&&
30>Math.abs(c)?0<d?Aa.UP:Aa.DOWN:Aa.NONE},__class__:Rg,__properties__:{get_currentPos:"get_currentPos"}};var dc=function(){};h["workinman.math.WMLine"]=dc;dc.__name__=["workinman","math","WMLine"];dc.__interfaces__=[Sf];dc.request=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);return ia.requestObject(dc).init(a,b,c,d)};dc.__super__=bb;dc.prototype=y(bb.prototype,{init:function(a,b,c,d){this._p0=aa.request();this._p1=aa.request();this._normal=aa.request();this._vector=
aa.request();this._parametricDenom=aa.request();this.toFloats(a,b,c,d);this._calcProperties();return this},dispose:function(){this._p0.dispose();this._p0=null;this._p1.dispose();this._p1=null;this._normal.dispose();this._normal=null;this._vector.dispose();this._vector=null;this._parametricDenom.dispose();this._parametricDenom=null;bb.prototype.dispose.call(this)},get_p0:function(){return this._p0},get_p1:function(){return this._p1},get_slope:function(){return this._slope},get_yIntercept:function(){return this._yIntercept},
get_normal:function(){return this._normal},get_vector:function(){return this._vector},get_center:function(){return aa.request(this._p0.x+this._vector.x/2,this._p0.y+this._vector.y/2)},get_centerX:function(){return this._p0.x+this._vector.x/2},get_centerY:function(){return this._p0.y+this._vector.y/2},get_parametricDenom:function(){return this._parametricDenom},get_length:function(){return this._length},set_length:function(a){if(0==this.get_length())return this._length;this._p1.to(this._p0.x+this._vector.x*
(a/this.get_length()),this._p0.y+this._vector.y*(a/this.get_length()));this._calcProperties();return this._length},recalculate:function(){this._calcProperties()},getNewPoint:function(a,b){null==b&&(b=aa.request());b.to(this.get_p0().x+this._vector.x*a,this.get_p0().y+this._vector.y*a);return b},equals:function(a){return a.get_p0().equals(this.get_p0())&&a.get_p1().equals(this.get_p1())},flip:function(){var a=this._p0.copy();this._p0.toPoint(this._p1);this._p1.toPoint(a);a.dispose();this._calcProperties()},
clean:function(){this._p0.clean();this._p1.clean();this._calcProperties()},copy:function(){return dc.request().to(this._p0,this._p1)},to:function(a,b){this._p0.toPoint(a);this._p1.toPoint(b);this._calcProperties();return this},toLine:function(a){this._p0.toPoint(a.get_p0());this._p1.toPoint(a.get_p1());this._calcProperties();return this},toFloats:function(a,b,c,d){this._p0.to(a,b);this._p1.to(c,d);this._calcProperties();return this},originTo:function(a,b,c){null==c&&(c=0);this._p0.to(a,b,c);this._calcProperties();
return this},originToPoint:function(a){this._p0.toPoint(a);this._calcProperties()},endTo:function(a,b,c){null==c&&(c=0);this._p1.to(a,b,c);this._calcProperties()},endToPoint:function(a){this._p1.toPoint(a);this._calcProperties()},rotate:function(a){this._vector.rotateTo(a);this._p1.to(this._p0.x+this._vector.x,this._p0.y+this._vector.y);this._calcProperties();this._calcProperties()},rotateTo:function(a){this._vector.rotateTo(a);this._p1.to(this._p0.x+this._vector.x,this._p0.y+this._vector.y);this._calcProperties()},
shiftOrigin:function(a){var b=this._vector.reverseCopy();b.set_length(a);this._p0.addPoint(b);b.dispose();this._calcProperties()},shiftEnd:function(a){this.set_length(this.get_length()+a)},_calcProperties:function(){this._length=Math.round(1E3*Math.sqrt((this._p0.x-this._p1.x)*(this._p0.x-this._p1.x)+(this._p0.y-this._p1.y)*(this._p0.y-this._p1.y)))/1E3;this._vector.to(this.get_p1().x-this.get_p0().x,this.get_p1().y-this.get_p0().y);this._slope=this._vector.y/this._vector.x;0==this.get_vector().x&&
(this._slope=1E5);this._yIntercept=this.get_p0().y-this._slope*this.get_p0().x;this._parametricDenom.to(this.get_p1().x-this.get_p0().x,this.get_p1().y-this.get_p0().y);this._vector.pseudoCross(this._normal);this._normal.normalize()},testLineDot:function(a){return this._vector.dot(a.get_normal())},projectOntoLine:function(a){var b=a.get_vector().dot(this.get_vector().normalizeCopy());return dc.request().to(a.get_p0(),a.get_p1().addPointCopy(this._normal.copyAndResize(Math.sqrt(a.get_length()*a.get_length()-
b*b))))},testLineIntercept:function(a,b){null==b&&(b=new Sg(!1));this._inverseDeterminate=1/(-1*this._slope- -1*a.get_slope());b.set_success(!0);var c=aa.request((-1*a.get_yIntercept()- -1*this._yIntercept)*this._inverseDeterminate,(a.get_slope()*this._yIntercept-this.get_slope()*a.get_yIntercept())*this._inverseDeterminate,0);b.set_result(c);c.dispose();return b},testLineSegmentIntercept:function(a,b,c){var d=-a.get_vector().x*this._vector.y+this._vector.x*a.get_vector().y,e=this.get_p0().x-a.get_p0().x,
g=this.get_p0().y-a.get_p0().y,b=(-this._vector.y*e+this._vector.x*g)/d,a=(a.get_vector().x*g-a.get_vector().y*e)/d;null==c&&(c=new Sg(!1));c.set_success(!1);0<=b&&1>=b&&0<=a&&1>=a&&(c.set_success(!0),a=aa.request(this.get_p0().x+a*this._vector.x,this.get_p0().y+a*this._vector.y),c.set_result(a),a.dispose());return c},testPointSegmentIntercept:function(a,b){null==b&&(b=!1);this._xSegmentResult=0==this._parametricDenom.x?0:(a.x-this.get_p0().x)/this._parametricDenom.x;this._ySegmentResult=0==this._parametricDenom.y?
0:(a.y-this.get_p0().y)/this._parametricDenom.y;b&&null;return 0<=this._xSegmentResult&&1>=this._xSegmentResult&&0<=this._ySegmentResult&&1>=this._ySegmentResult?!0:!1},toString:function(){return"[WMLine] ("+this._p0.x+", "+this._p0.y+", "+this._p0.z+") ~> ("+this._p1.x+", "+this._p1.y+", "+this._p1.z+") / Len: "+this._length},__class__:dc,__properties__:y(bb.prototype.__properties__,{set_length:"set_length",get_length:"get_length",get_parametricDenom:"get_parametricDenom",get_centerY:"get_centerY",
get_centerX:"get_centerX",get_center:"get_center",get_vector:"get_vector",get_normal:"get_normal",get_yIntercept:"get_yIntercept",get_slope:"get_slope",get_p1:"get_p1",get_p0:"get_p0"})});var Aa=h["workinman.input.INPUT_SWIPE"]={__ename__:["workinman","input","INPUT_SWIPE"],__constructs__:["NONE","LEFT","RIGHT","UP","DOWN"]};Aa.NONE=["NONE",0];Aa.NONE.toString=k;Aa.NONE.__enum__=Aa;Aa.LEFT=["LEFT",1];Aa.LEFT.toString=k;Aa.LEFT.__enum__=Aa;Aa.RIGHT=["RIGHT",2];Aa.RIGHT.toString=k;Aa.RIGHT.__enum__=
Aa;Aa.UP=["UP",3];Aa.UP.toString=k;Aa.UP.__enum__=Aa;Aa.DOWN=["DOWN",4];Aa.DOWN.toString=k;Aa.DOWN.__enum__=Aa;var z=function(){};h["workinman.WMInput"]=z;z.__name__=["workinman","WMInput"];z.setDelegateUnlockWebAudio=function(a){z._delegateUnlockWebAudio=a};z._delegateDispatch=function(a,b){null!=z._delegateUnlockWebAudio&&!1==b&&(z._delegateUnlockWebAudio(),z._delegateUnlockWebAudio=null);!1!=z.enabled&&z.eventInput.dispatch(a,b)};z.update=function(){if(!1!=z.enabled){z._findGamepad();null!=z._gamepad&&
(z._gamepad.update(),z.leftStick.to(z._gamepad.leftX,z._gamepad.leftY),z.rightStick.to(z._gamepad.rightX,z._gamepad.rightY));for(var a=0,b=z._inputTrackers;a<b.length;){var c=b[a];++a;c.updateStatus()}z.pointer.fresh=!1;for(a=z.multiTouch.length;0<a--;)b=z.multiTouch[a],!1==b.fresh&&(!1==b.down?(b.dispose(),z.multiTouch.splice(a,1)):b.stop()),b.fresh=!1}};z._findGamepad=function(){if(r.isFunction((lk=window.navigator,n(lk,lk.getGamepads))))for(var a=0,b=window.navigator.getGamepads();a<b.length;){var c=
b[a];++a;if(null!=c&&-1<c.id.indexOf("Xbox 360 Controller")){null==z._gamepad?z._gamepad=new Tg(c):z._gamepad.setGamepad(c);break}}};z.prime=function(a){z._root=a;I._platform.getKeyboard().down.connect(z._onKeyDown);I._platform.getKeyboard().up.connect(z._onKeyUp);I._platform.getTouch().get_supported()&&(I._platform.getTouch().down.connect(z._onTouchDown),I._platform.getTouch().move.connect(z._onTouchMove),I._platform.getTouch().up.connect(z._onTouchUp));I._platform.getPointer().down.connect(z._onPointerDown);
I._platform.getPointer().move.connect(z._onPointerMove);I._platform.getPointer().up.connect(z._onPointerUp);I._platform.getMouse().scroll.connect(z._onScrollWheel)};z.hitTest=function(a,b){return z._root.hitTest(a,b)};z._onScrollWheel=function(a){z.eventMouseWheel.dispatch(a)};z.registerInput=function(a,b,c,d){z._createOrGetInputTracker(a).setKeys(b,c,d)};z._createOrGetInputTracker=function(a){for(var b=0,c=z._inputTrackers;b<c.length;){var d=c[b];++b;if(d.type==a)return d}a=new Ei(a,z._fireKeyEvent,
z._isVirtualDown,z._isControllerDown);z._inputTrackers.push(a);return a};z._fireKeyEvent=function(a,b){z._delegateDispatch(a,b)};z._onKeyDown=function(a){z.eventKey.dispatch(a.key,!0)};z._onKeyUp=function(a){z.eventKey.dispatch(a.key,!1)};z._isVirtualDown=function(a){for(var b=0,c=z._virtualDown;b<c.length;){var d=c[b];++b;if(d==a)return!0}return!1};z.onControllerDown=function(a){for(var b=0,c=z._controllerDown;b<c.length;){var d=c[b];++b;if(d==a)return}z._controllerDown.push(a)};z.onControllerUp=
function(a){for(var b=z._controllerDown.length;0<b--;)if(z._controllerDown[b]==a){z._controllerDown.splice(b,1);break}};z._isControllerDown=function(a){for(var b=0,c=z._controllerDown;b<c.length;){var d=c[b];++b;if(d==a)return!0}return!1};z._onTouchDown=function(a){z._doTouchDown(a.id,a.viewX,a.viewY)};z._onTouchMove=function(a){z._doTouchMove(a.id,a.viewX,a.viewY)};z._onTouchUp=function(a){z._doTouchUp(a.id,a.viewX,a.viewY)};z._doTouchDown=function(a,b,c){var d=z._findTouch(a);null==d&&(d=new Rg(a),
z.multiTouch.push(d));d.begin(b,c)};z._doTouchMove=function(a,b,c){a=z._findTouch(a);null!=a&&a.move(b,c)};z._doTouchUp=function(a,b,c){a=z._findTouch(a);null!=a&&a.end(b,c)};z._findTouch=function(a){for(var b=0,c=z.multiTouch;b<c.length;){var d=c[b];++b;if(d.id==a)return d}return null};z._onPointerDown=function(a){z.pointer.begin(a.viewX,a.viewY);!1==I._platform.getTouch().get_supported()&&z._doTouchDown(0,a.viewX,a.viewY);z._delegateDispatch(Q.POINTER,!0)};z._onPointerMove=function(a){z.pointer.move(a.viewX,
a.viewY);!1==I._platform.getTouch().get_supported()&&z._doTouchMove(0,a.viewX,a.viewY);z._delegateDispatch(Q.POINTER_MOVE,!0)};z._onPointerUp=function(a){z.pointer.end(a.viewX,a.viewY);!1==I._platform.getTouch().get_supported()&&z._doTouchUp(0,a.viewX,a.viewY);z._delegateDispatch(Q.POINTER,!1)};var ub=h["workinman.LOCALIZATION_FORMAT"]={__ename__:["workinman","LOCALIZATION_FORMAT"],__constructs__:["TRADITIONAL_XML","STRINGS_JS","STRINGS_JSON"]};ub.TRADITIONAL_XML=["TRADITIONAL_XML",0];ub.TRADITIONAL_XML.toString=
k;ub.TRADITIONAL_XML.__enum__=ub;ub.STRINGS_JS=["STRINGS_JS",1];ub.STRINGS_JS.toString=k;ub.STRINGS_JS.__enum__=ub;ub.STRINGS_JSON=["STRINGS_JSON",2];ub.STRINGS_JSON.toString=k;ub.STRINGS_JSON.__enum__=ub;var Fi=function(a,b,c,d,e,g,p){this.id=a;this.string=this._sanitizeString(b);this.fontName=c;this.scale=d;this.offsetX=e;this.offsetY=g;this.subtitleTime=p};h["workinman.localization.LocalizationData"]=Fi;Fi.__name__=["workinman","localization","LocalizationData"];Fi.prototype={dispose:function(){this.fontName=
this.string=this.id=null},_sanitizeString:function(a){a=da.replace(a,"<br>","\n");return a=da.replace(a,"\\n","\n")},__class__:Fi};var ba=function(){};h["workinman.WMLocalize"]=ba;ba.__name__=["workinman","WMLocalize"];ba.parseLocalization=function(a){null==a&&(a="");if(null==a||""==a)a="translation.xml";var b=o.getXML(a),a=ub.TRADITIONAL_XML;b.has.resolve("format")&&(a=xa.createEnum(ub,b.att.resolve("format")));ba.defaultFont=b.att.resolve("defaultFont");ba.rtl=!1;b.has.resolve("rtl")&&(ba.rtl="true"==
b.att.resolve("rtl"));ba.subtitlesEnabled=!1;b.has.resolve("sub")&&(ba.subtitlesEnabled="true"==b.att.resolve("sub"));switch(a[1]){case 0:a="";for(b=b.nodes.resolve("string").iterator();b.hasNext();){var c=b.next(),a=c.att.resolve("id");ba._localizedData.exists(a)||ba._addLocalizationData(a,c.get_innerData(),c.has.resolve("fontName")?c.att.resolve("fontName"):ba.defaultFont,c.has.resolve("fontScale")?c.att.resolve("fontScale"):"1",c.has.resolve("offsetX")?c.att.resolve("offsetX"):"0",c.has.resolve("offsetY")?
c.att.resolve("offsetY"):"0",c.has.resolve("subTime")?c.att.resolve("subTime"):"-1")}break;case 2:for(a=b.nodes.resolve("json").iterator();a.hasNext();)for(var b=a.next(),b=JSON.parse(o.getFile(b.get_innerData()).toString()),c=0,d=r.fields(b.strings);c<d.length;){var e=d[c];++c;var g=r.field(b.strings,e);null!=g.value?ba._addLocalizationData(e,g.value,null==g.fontName?"":g.fontName,null==g.fontScale?"1":g.fontScale,null==g.offsetX?"0":g.offsetX,null==g.offsetY?"0":g.offsetY,null==g.subTime?"-1":g.subTime):
ba._addLocalizationData(e,g,"","1","0","0","-1")}}};ba._addLocalizationData=function(a,b,c,d,e,g,p){ba._localizedData.exists(a)&&ba._localizedData.get(a).dispose();b=new Fi(a,b,c,B.parseFloat(d),B.parseFloat(e),B.parseFloat(g),B.parseFloat(p));ba._localizedData.set(a,b);b};ba.getLocalizeData=function(a){return!1==ba._localizedData.exists(a)?null:ba._localizedData.get(a)};var A=function(){};h["workinman.WMRandom"]=A;A.__name__=["workinman","WMRandom"];A.random=function(a){null==a&&(a="");return null==
a||""==a||null==A._seeds.get(a)?Math.random():A._seeds.get(a).random()};A.randomFloat=function(a,b,c){null==c&&(c="");return a+A.random(c)*(b-a)};A.randomInt=function(a,b,c){null==c&&(c="");return Math.floor(A.randomFloat(a,b+1,c))};var ac=function(){};h["workinman.WMSaving"]=ac;ac.__name__=["workinman","WMSaving"];ac.dataLoad=function(a){var a=ac._getLocal(a),b=a.data;a.dispose();return b};ac.dataSave=function(a,b){var c=ac._getLocal(a);c.data=b;c.flush();c.dispose()};ac._getLocal=function(a){var b=
new Gi(a);try{var c=window.localStorage.getItem(a);null!=c&&""!=c&&(b.data=Tb.run(c))}catch(d){null}return b};var vb=h["workinman.sound.VO_STATUS"]={__ename__:["workinman","sound","VO_STATUS"],__constructs__:["STOPPED","PLAYING","PAUSED"]};vb.STOPPED=["STOPPED",0];vb.STOPPED.toString=k;vb.STOPPED.__enum__=vb;vb.PLAYING=["PLAYING",1];vb.PLAYING.toString=k;vb.PLAYING.__enum__=vb;vb.PAUSED=["PAUSED",2];vb.PAUSED.toString=k;vb.PAUSED.__enum__=vb;var Ve=function(){this._objectTrackers=[]};h["workinman.tween.Tweener"]=
Ve;Ve.__name__=["workinman","tween","Tweener"];Ve.prototype={dispose:function(){for(var a=0,b=this._objectTrackers;a<b.length;){var c=b[a];++a;c.dispose()}this._objectTrackers=null},update:function(a){for(var b=this._objectTrackers.length;0<b--;){var c=this._objectTrackers[b];c.update(a);c.get_isComplete()&&(c.dispose(),this._objectTrackers.splice(b,1))}},tween:function(a,b){null==a.overwrite&&(a.overwrite=!1);null==a.thread&&(a.thread="def");for(var c=new Hi(a,b),d=0,e=this._objectTrackers;d<e.length;){var g=
e[d];++d;if(g.target==a.target)return a.overwrite&&g.stopThread(a.thread),g.queueStep(c,a.thread),c}d=new Ii(a.target);this._objectTrackers.push(d);d.queueStep(c,a.thread);return c},__class__:Ve};var m=function(){};h["workinman.WMSound"]=m;m.__name__=["workinman","WMSound"];m.__properties__={set_muteAll:"set_muteAll"};m.set_muteAll=function(a){m.muteAll=a;m._toggleMute();return a};m._toggleMute=function(){m._getMuteState(m.muteMusic)?m.stopMusic():m.playMusic(m._musicId,m._musicGain);m._getMuteState(m.muteSfx)&&
m.stopAllSound();m._getMuteState(m.muteVo)&&m.stopVO()};m._setVOState=function(a){if(a!=m._stateVo){m._stateVo=a;switch(m._stateVo[1]){case 0:null!=m._music&&m._tween.tween({target:m._music,duration:0.15,overwrite:!0,ease:s.inOutQuad},{volume:1});break;case 1:null!=m._music&&m._tween.tween({target:m._music,duration:0.15,overwrite:!0,ease:s.inOutQuad},{volume:0.25})}m.eventVOStatus.dispatch(a)}};m._getMuteState=function(a){return m.muteAll||m.muteSystem||a};m.playMusic=function(a,b,c){null==c&&(c=
-1);null==b&&(b=1);null==a||""==a||m._musicId==a&&null!=m._music||(m._musicId=a,m._musicGain=b,m.stopMusic(c,m._finishPlayingMusic))};m._finishPlayingMusic=function(){m._music=m._playAudio(m._musicId,m._musicGain,null,!0,m.muteMusic)};m.stopMusic=function(a,b){null==a&&(a=-1);0<a&&null!=m._music?m._tween.tween({target:m._music,duration:a,overwrite:!0,ease:s.linear,complete:function(){m._disposeMusic();null!=b&&b()}},{volume:0}):(m._disposeMusic(),null!=b&&b())};m._disposeMusic=function(){null!=m._music&&
(m._music.dispose(),m._music=null)};m.playSound=function(a,b,c,d){null==d&&(d=!1);null==b&&(b=1);a=m._playAudio(a,b,c,d,m.muteSfx);if(null==a)return null;m._sound.push(a);return a};m.stopAllSound=function(){for(;0<m._sound.length;)m._sound.pop().dispose()};m.stopVO=function(){for(;0<m._voQueue.length;)m._voQueue.pop().dispose();null!=m._vo&&(m._vo.dispose(),m._vo=null)};m._playAudio=function(a,b,c,d,e){if(null==a||""==a||m._getMuteState(e))return null!=c&&c(),null;e=o.getSound(a);return null==e?(null!=
c&&c(),null):d?new Ug(a,e.loop(b),c):new Ug(a,e.play(b),c)};m.update=function(a){m._tween.update(a);for(var b=m._sound.length;0<b--;){var c=m._sound[b];if(c.isComplete||c.disposed)c.dispose(),m._sound.splice(b,1)}if(null!=m._music&&(m._music.isComplete||m._music.disposed))m._music.dispose(),m._music=null;switch(m._stateVo[1]){case 0:case 2:m._checkVOQueue(a);break;case 1:if(null!=m._vo&&(m._vo.isComplete||m._vo.disposed))m._vo.dispose(),m._vo=null;null==m._vo&&m._checkVOQueue(a)}};m._checkVOQueue=
function(a){if(0<m._voQueue.length)if(m._voQueue[0].delay-=a,0>m._voQueue[0].delay){var b=m._voQueue.shift();m.subtitleQueue.push(b.localization);m._vo=m._playAudio(b.id,1,function(){null!=b.call&&b.call();m.subtitleQueue.shift()},!1,m.muteVo);b.dispose();m._setVOState(vb.PLAYING)}else m._setVOState(vb.PAUSED);else m._setVOState(vb.STOPPED)};var C=function(){};h["workinman.WMTimer"]=C;C.__name__=["workinman","WMTimer"];C.update=function(a){if(!C._paused)for(var b=C._timers.length;0<b--;)C._timers[b].update(a),
C._timers[b].get_isComplete()&&(C._timers[b].dispose(!0),C._timers.splice(b,1))};C.start=function(a,b,c){null==c&&(c="");null!=a&&C._timers.push(new Ji(a,b,""==c?"def"+C._uniqueInc++:c))};C.stop=function(a,b){null==b&&(b=!1);for(var c=C._timers.length;0<c--;)if(C._timers[c].id==a){C._timers[c].dispose(b);C._timers.splice(c,1);break}};var Ji=function(a,b,c){this.id=c;this._callback=a;this._timer=b;this.paused=!1};h["workinman.WMTimerData"]=Ji;Ji.__name__=["workinman","WMTimerData"];Ji.prototype={dispose:function(a){a&&
this._fireCallback();this._callback=this.id=null},get_isComplete:function(){return 0>=this._timer},update:function(a){this.paused||(this._timer-=a,0>this._timer&&this._fireCallback())},_fireCallback:function(){if(null!=this._callback){var a=this._callback;this._callback=null;a()}},__class__:Ji,__properties__:{get_isComplete:"get_isComplete"}};var qd=function(){};h["workinman.WMUtils"]=qd;qd.__name__=["workinman","WMUtils"];qd.trimUrl=function(a){if(""==a)return"";if(0>a.indexOf("http"))return"/"==
a.charAt(0)&&(a=G.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=G.substr(a,b,a.length-b);return a=qd.appendAssetsToUrl(a)};qd.appendAssetsToUrl=function(a){if(0==a.length)return a;"/"!=a.charAt(a.length-1)&&(a+="/");a.indexOf("/assets")<a.length-9&&(a+="assets/");return a};qd.getExtension=function(a){if(null==a)return"";var b=a.lastIndexOf(".");if(0>b)return"";var c=a.lastIndexOf("?");return c>b?a.substring(b+1,c):a.substring(b+
1,a.length)};qd.removeExtension=function(a){var b=a.lastIndexOf(".");return 0>b?a:a.substring(0,b)};var zi=function(a,b,c){this.packs=b;this.complete=a;this.delay=c};h["workinman.assets.LoadQueue"]=zi;zi.__name__=["workinman","assets","LoadQueue"];zi.prototype={dispose:function(){this.complete=this.packs=null},__class__:zi};var Ci=function(a,b){this.rect=b;this.atlas=a};h["workinman.assets.SpriteSheetDef"]=Ci;Ci.__name__=["workinman","assets","SpriteSheetDef"];Ci.prototype={dispose:function(){this.atlas=
this.rect=null},__class__:Ci};var Ai=function(a){this.pack=a;this.assets=[];this.spritesheets=[];this.flump=[]};h["workinman.assets.WMAssetPack"]=Ai;Ai.__name__=["workinman","assets","WMAssetPack"];Ai.prototype={__class__:Ai};var Ki=function(a,b,c){this._worldRoot=a;this.worldCenterX=b;this.worldCenterY=c;this.focalLength=300;this.set_rotation(0);this.pos=aa.request();this._scratchPoint=new Md};h["workinman.display.Camera"]=Ki;Ki.__name__=["workinman","display","Camera"];Ki.prototype={dispose:function(){this.pos.dispose();
this._scratchPoint=this.pos=null},set_rotation:function(a){this.rotation=a;this._worldRoot.rotation=a;return this.rotation},getWorldPositionOfScreenPoint:function(a,b,c,d){this._worldRoot.get_viewMatrix().inverseTransform(a,b,this._scratchPoint);a=1/(this.focalLength/(this.focalLength-(this.pos.z-c)));d.x=this.pos.x+(this.worldCenterX+(this._scratchPoint.x-this.worldCenterX)*a);d.y=this.pos.y+(this.worldCenterY+(this._scratchPoint.y-this.worldCenterY)*a);return d},__class__:Ki,__properties__:{set_rotation:"set_rotation"}};
var Qf=function(a,b,c,d){null==d&&(d=!1);this._layerOrder=[];this._layers=new sa;this.root=a.addChild(new Vg(b,c,this._layers,this._layerOrder));this.camera=this.root.camera;this._defaultLayer="";this._enablePointer=d};h["workinman.display.ElementManager"]=Qf;Qf.__name__=["workinman","display","ElementManager"];Qf.prototype={dispose:function(){null!=this.root&&(this.root.doDelete=!0,this.root=null);this._defaultLayer=this._layerOrder=this._layers=null},addLayer:function(a,b){null==b&&(b=!1);if(this._layers.exists(a))G.remove(this._layerOrder,
a);else{if(b||1>this._defaultLayer.length)this._defaultLayer=a;this._layers.set(a,[])}this._layerOrder.push(a)},addElement:function(a,b){null==b&&null!=this._defaultLayer&&(b=this._defaultLayer);if(null==b||!1==this._layers.exists(b))return a;null!=a.parent&&a.parent.removeChild(a);this.root.addElementLayer(a,b);return a},update:function(a){for(var b,c=this._layers.iterator();c.hasNext();)for(var d=c.next(),e=d.length;0<e--;)b=d[e],b.runUpdate(a),b.doDelete&&(b.dispose(),d.splice(e,1))},updateZSort:function(a,
b){Ka.sort(this._layers.get(a),null==b?n(this,this._zSort):b)},_zSort:function(a,b){return a.get_depth()>b.get_depth()?-1:a.get_depth()<b.get_depth()?1:0},__class__:Qf};var Vg=function(a,b,c,d){T.call(this,null);this.camera=new Ki(this,a,b);this._layers=c;this._layerOrder=d};h["workinman.display.ElementManagerSprite"]=Vg;Vg.__name__=["workinman","display","ElementManagerSprite"];Vg.__super__=T;Vg.prototype=y(T.prototype,{dispose:function(){T.prototype.dispose.call(this);null!=this.camera&&(this.camera.dispose(),
this.camera=null);if(null!=this._layers){for(var a=this._layers.iterator();a.hasNext();)for(var b=a.next(),c=0;c<b.length;){var d=b[c];++c;d.dispose()}this._layers=null}this._layerOrder=null},hitTest:function(a,b,c){if(!1==this.visible||!1==this.inputEnabled)return null;for(var d=null,e=this._layerOrder.length,g;0<e--;){g=this._layers.get(this._layerOrder[e]);for(var p=g.length;0<p--;)if(d=g[p].hitTest(a,b,c),null!=d)return d}return T.prototype.hitTest.call(this,a,b,c)},addElementLayer:function(a,
b){if(!1==this._layers.exists(b))return a;null!=a.parent&&a.parent.removeChild(a);a.parent=this;this._layers.get(b).push(a);return a},removeChild:function(a){for(var b=this._layers.iterator();b.hasNext();){var c=b.next();if(G.remove(c,a)){a.parent=null;break}}return a},render:function(a){a.ctx.save();this._matrix.compose(this.get_x(),this.get_y(),this.scaleX,this.scaleY,3.141592653589793*this.rotation/180);null!=this.parent&&tc.multiply(this.parent.get_viewMatrix(),this._matrix,this._viewMatrix);
a.ctx.transform(this._matrix.m00,this._matrix.m10,this._matrix.m01,this._matrix.m11,this._matrix.m02,this._matrix.m12);for(var b=0,c=this.children.length;b<c;)this.children[b++].render(a,null);for(var c=0,d=this._layerOrder.length;c<d;)for(var b=this._layers.get(this._layerOrder[c++]),e=0,g=b.length;e<g;){var p=e++;b[p].render(a,this.camera)}a.ctx.restore()},__class__:Vg});var Fa=function(a){T.call(this,a);this.color=16711680;this.sizeX=this.sizeY=10;null!=a&&(this.color=a.color,this.sizeX=a.sizeX,
this.sizeY=a.sizeY)};h["workinman.display.FillSprite"]=Fa;Fa.__name__=["workinman","display","FillSprite"];Fa.__super__=T;Fa.prototype=y(T.prototype,{get_width:function(){return Math.floor(this.sizeX)},get_height:function(){return Math.floor(this.sizeY)},_draw:function(a){a.ctx.fillRect(this.color,0,0,this.sizeX,this.sizeY)},__class__:Fa});var jd=function(a,b,c){this._color=c;cc.call(this,a,b)};h["workinman.display.FontColor"]=jd;jd.__name__=["workinman","display","FontColor"];jd.__super__=cc;jd.prototype=
y(cc.prototype,{reload:function(){this._glyphs=new bc;this._glyphs.set(jd.NEWLINE.charCode,jd.NEWLINE);for(var a=new We(this._file.toString()),b=new bc,c=this.name.lastIndexOf("/"),c=0<=c?G.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var e=a.pairs();e.hasNext();){var g=e.next();switch(g.key){case "size":this.size=g.getInt()}}break;case "common":for(e=a.pairs();e.hasNext();)switch(g=e.next(),g.key){case "lineHeight":this.lineHeight=g.getInt()}break;case "page":for(var e=
0,g=null,p=a.pairs();p.hasNext();){var f=p.next();switch(f.key){case "id":e=f.getInt();break;case "file":g=f.getString()}}null==b.get(e)&&(g=this._pack.getTexture(c+Ua.removeFileExtension(g)),this._texture=I._platform.getRenderer().createTexture(B["int"](g.get_width()),B["int"](g.get_height())),this._texture.get_graphics().fillRect(this._color,0,0,this._texture.get_width(),this._texture.get_height()),this._texture.get_graphics().setBlendMode(wa.Mask),this._texture.get_graphics().drawTexture(g,0,0),
this._texture.get_graphics().setBlendMode(wa.Normal),b.set(e,this._texture));break;case "char":e=null;for(g=a.pairs();g.hasNext();)switch(p=g.next(),p.key){case "id":e=new He(p.getInt());break;case "x":e.x=p.getInt();break;case "y":e.y=p.getInt();break;case "width":e.width=p.getInt();break;case "height":e.height=p.getInt();break;case "page":p=p.getInt();e.page=b.get(p);break;case "xoffset":e.xOffset=p.getInt();break;case "yoffset":e.yOffset=p.getInt();break;case "xadvance":e.xAdvance=p.getInt()}this._glyphs.set(e.charCode,
e);break;case "kerning":e=null;p=g=0;for(f=a.pairs();f.hasNext();){var j=f.next();switch(j.key){case "first":e=this._glyphs.get(j.getInt());break;case "second":g=j.getInt();break;case "amount":p=j.getInt()}}null!=e&&0!=p&&e.setKerning(g,p)}},__class__:jd});var We=function(a){this._configText=a;this._keywordPattern=new rc("([A-Za-z]+)(.*)","");this._pairPattern=new rc('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};h["workinman.display._FontColor.ConfigParser"]=We;We.__name__=["workinman","display","_FontColor",
"ConfigParser"];We.advance=function(a,b){var c=b.matchedPos();return G.substr(a,c.pos+c.len,a.length)};We.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=We.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=We.advance(b,a._pairPattern);return new Li(a._pairPattern.matched(1),a._pairPattern.matched(2))},
hasNext:function(){return a._pairPattern.match(b)}}},__class__:We};var Li=function(a,b){this.key=a;this._value=b};h["workinman.display._FontColor.ConfigPair"]=Li;Li.__name__=["workinman","display","_FontColor","ConfigPair"];Li.prototype={getInt:function(){return B.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:G.substr(this._value,1,this._value.length-2)},__class__:Li};var Mi=function(a){this.ctx=a;this.canvasCtx=null;x.__instanceof(a,fd)&&(this.canvasCtx=r.field(a,
"_canvasCtx"))};h["workinman.display.Graphics"]=Mi;Mi.__name__=["workinman","display","Graphics"];Mi.prototype={__class__:Mi};var Ud=function(){T.call(this,null)};h["workinman.display.GuideSprite"]=Ud;Ud.__name__=["workinman","display","GuideSprite"];Ud.__super__=T;Ud.prototype=y(T.prototype,{_draw:function(a){a.ctx.save();a.ctx.setAlpha(0.5);var b=oa.STAGE_CENTER_X-497.77777777777777;a.ctx.fillRect(65280,-373.3333333333333,-280,746.6666666666666,560);a.ctx.fillRect(14911259,-497.77777777777777,-280,
124.44444444444446,560);a.ctx.fillRect(14911259,373.3333333333333,-280,124.44444444444446,560);0<b&&(a.ctx.fillRect(16711680,-oa.STAGE_CENTER_X,-280,b,560),a.ctx.fillRect(16711680,oa.STAGE_CENTER_X-b,-280,b,560));a.ctx.fillRect(16777215,-oa.STAGE_CENTER_X,-280,oa.STAGE_WIDTH,40);a.ctx.fillRect(16777215,-oa.STAGE_CENTER_X,240,oa.STAGE_WIDTH,40);a.ctx.restore()},__class__:Ud});var eg=function(a){Ia.call(this);this._root=new T(null);this._lastStageX=this._lastStageX=0;this._updateDelegate=a;this._calcScale();
this._scratchPoint=new Md;null==this._graphics};h["workinman.display.RootSprite"]=eg;eg.__name__=["workinman","display","RootSprite"];eg.__super__=Ia;eg.prototype=y(Ia.prototype,{dispose:function(){this._scratchPoint=this._updateDelegate=null;Ia.prototype.dispose.call(this)},onUpdate:function(a){this._root.runUpdate(a);this._updateDelegate(a)},hitTest:function(a,b){return this._root.hitTest(a,b,this._scratchPoint)},_calcScale:function(){if(!(I._platform.getStage().get_width()==this._lastStageX&&I._platform.getStage().get_height()==
this._lastStageY)){this._lastStageX=I._platform.getStage().get_width();this._lastStageY=I._platform.getStage().get_height();this._root.set_x(0.5*this._lastStageX);this._root.set_y(0.5*this._lastStageY);var a=this._lastStageY/560;this._fullWidth=this._lastStageX/a;this._root.rotation=0;oa.STAGE_WIDTH=Math.min(Math.ceil(this._fullWidth),1024);oa.STAGE_CENTER_X=Math.floor(0.5*oa.STAGE_WIDTH);this._root.set_scale(a);u.resizeCanvas.dispatch(a)}},addChild:function(a){return this._root.addChild(a)},draw:function(a){null==
this._graphics&&(this._graphics=new Mi(a));this._calcScale();a.fillRect(0,-oa.STAGE_CENTER_X-1,-281,oa.STAGE_WIDTH+2,562);this._root.render(this._graphics,null);a.save();a.translate(this._root.get_x(),this._root.get_y());a.scale(this._root.scale,this._root.scale);a.rotate(this._root.rotation);var b=Math.ceil(0.5*(this._fullWidth-oa.STAGE_WIDTH)),c=Math.ceil(0.5*this._fullWidth);0<b&&(a.fillRect(0,-c,-281,b,562),a.fillRect(0,c-b,-281,b,562));a.restore()},__class__:eg});var Bi=function(a){this._parseRes=
{x:0,y:0};this.rotate=-1<a[1].indexOf("true");this._setXY(this._getLineData(a[2]));this._setSizeXY(this._getLineData(a[3]));this._setOrig(this._getLineData(a[4]));this._setOffset(this._getLineData(a[5]));this._parseRes=null};h["workinman.display.SpriteRect"]=Bi;Bi.__name__=["workinman","display","SpriteRect"];Bi.prototype={_getLineData:function(a){a=a.split(": ");a=a[1].split(", ");this._parseRes.x=B.parseInt(a[0]);this._parseRes.y=B.parseInt(a[1]);return this._parseRes},_setXY:function(a){this.x=
a.x;this.y=a.y},_setSizeXY:function(a){this.sizeX=a.x;this.sizeY=a.y},_setOrig:function(a){this.origX=a.x;this.origY=a.y},_setOffset:function(a){this.offsetX=a.x;this.offsetY=a.y},__class__:Bi};var Ba=function(){};h["workinman.display.spine.ArrayUtils"]=Ba;Ba.__name__=["workinman","display","spine","ArrayUtils"];Ba.allocIntArray=function(a){for(var b=[],c=0;c<a;){var d=c++;b[d]=[]}return b};Ba.allocFloatArray=function(a){for(var b=[],c=0;c<a;){var d=c++;b[d]=[]}return b};Ba.allocFloat=function(a){for(var b=
[],c=0;c<a;){var d=c++;b[d]=0}return b};Ba.allocString=function(a){for(var b=[],c=0;c<a;){var d=c++;b[d]=""}return b};var Tf=function(){};h["workinman.display.spine.Updatable"]=Tf;Tf.__name__=["workinman","display","spine","Updatable"];Tf.prototype={__class__:Tf};var be=function(a,b,c){this.x=this.y=this.rotation=this.scaleX=this.scaleY=this.appliedRotation=this.appliedScaleX=this.appliedScaleY=this.shearX=this.shearY=this._a=this._b=this._c=this._d=this._worldX=this._worldY=this._worldSignX=this._worldSignY=
this._worldRotationX=0;if(null==a)throw new H("data cannot be null.");if(null==b)throw new H("skeleton cannot be null.");this._data=a;this._skeleton=b;this._parent=c;this.setToSetupPose()};h["workinman.display.spine.Bone"]=be;be.__name__=["workinman","display","spine","Bone"];be.__interfaces__=[Tf];be.prototype={dispose:function(){this._parent=null;this._data.dispose();this._skeleton=this._data=null},updateWorldTransform:function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,
this.scaleY,this.shearX,this.shearY)},update:function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},updateWorldTransformWith:function(a,b,c,d,e,g,p){this.appliedRotation=c;this.appliedScaleX=d;this.appliedScaleY=e;var f=0,j=0,j=0,f=(c+g)*fb.degRad,j=(c+90+p)*fb.degRad,c=Math.cos(f)*d,p=Math.cos(j)*e,g=Math.sin(f)*d,h=Math.sin(j)*e,i=this._parent;if(null==i)f=this._skeleton,f.flipX&&(a=-a,c=-c,p=-p),f.flipY!=be.yDown&&(b=-b,g=-g,h=-h),
this._a=c,this._b=p,this._c=g,this._d=h,this._worldX=a,this._worldY=b,this._worldSignX=0>d?-1:1,this._worldSignY=0>e?-1:1;else{var Ta=i.get_a(),k=i.get_b(),l=i.get_c(),m=i.get_d();this._worldX=Ta*a+k*b+i.get_worldX();this._worldY=l*a+m*b+i.get_worldY();this._worldSignX=i.get_worldSignX()*(0>d?-1:1);this._worldSignY=i.get_worldSignY()*(0>e?-1:1);if(this.get_data().inheritRotation&&this.get_data().inheritScale)this._a=Ta*c+k*g,this._b=Ta*p+k*h,this._c=l*c+m*g,this._d=l*p+m*h;else{if(this.get_data().inheritRotation){Ta=
1;l=k=0;m=1;do{j=i.appliedRotation*fb.degRad;f=Math.cos(j);j=Math.sin(j);a=Ta*f+k*j;k=k*f-Ta*j;Ta=a;a=l*f+m*j;m=m*f-l*j;l=a;if(!i.get_data().inheritRotation)break;i=i.get_parent()}while(null!=i);this._a=Ta*c+k*g;this._b=Ta*p+k*h;this._c=l*c+m*g;this._d=l*p+m*h}else if(this.get_data().inheritScale){Ta=1;l=k=0;m=1;do{var j=i.appliedRotation*fb.degRad,f=Math.cos(j),j=Math.sin(j),a=i.appliedScaleX,t=i.appliedScaleY,b=f*a,d=j*t,e=j*a,t=f*t,r=Ta*b+k*e,k=k*t-Ta*d,Ta=r,r=l*b+m*e,m=m*t-l*d,l=r;0>a&&(j=-j);
r=Ta*f+k*j;k=k*f-Ta*j;Ta=r;r=l*f+m*j;m=m*f-l*j;l=r;if(!i.get_data().inheritScale)break;i=i.get_parent()}while(null!=i);this._a=Ta*c+k*g;this._b=Ta*p+k*h;this._c=l*c+m*g;this._d=l*p+m*h}else this._a=c,this._b=p,this._c=g,this._d=h;this._skeleton.flipX&&(this._a=-this._a,this._b=-this._b);this._skeleton.flipY!=be.yDown&&(this._c=-this._c,this._d=-this._d)}}this._worldRotationX=Math.atan2(this._c,this._a)*fb.radDeg},setToSetupPose:function(){this.x=this._data.x;this.y=this._data.y;this.rotation=this._data.rotation;
this.scaleX=this._data.scaleX;this.scaleY=this._data.scaleY;this.shearX=this._data.shearX;this.shearY=this._data.shearY},get_data:function(){return this._data},get_parent:function(){return this._parent},get_skeleton:function(){return this._skeleton},get_a:function(){return this._a},set_a:function(a){return this._a=a},get_b:function(){return this._b},set_b:function(a){return this._b=a},get_c:function(){return this._c},set_c:function(a){return this._c=a},get_d:function(){return this._d},set_d:function(a){return this._d=
a},get_worldX:function(){return this._worldX},set_worldX:function(a){return this._worldX=a},get_worldY:function(){return this._worldY},set_worldY:function(a){return this._worldY=a},get_worldSignX:function(){return this._worldSignX},get_worldSignY:function(){return this._worldSignY},get_worldRotationX:function(){return this._worldRotationX},get_worldScaleX:function(){return Math.sqrt(this._a*this._a+this._b*this._b)*this._worldSignX},localToWorld:function(a){var b=a[0],c=a[1];a[0]=b*this._a+c*this._b+
this._worldX;a[1]=b*this._c+c*this._d+this._worldY},__class__:be,__properties__:{get_worldScaleX:"get_worldScaleX",get_worldRotationX:"get_worldRotationX",get_worldSignY:"get_worldSignY",get_worldSignX:"get_worldSignX",set_worldY:"set_worldY",get_worldY:"get_worldY",set_worldX:"set_worldX",get_worldX:"get_worldX",set_d:"set_d",get_d:"get_d",set_c:"set_c",get_c:"get_c",set_b:"set_b",get_b:"get_b",set_a:"set_a",get_a:"get_a",get_skeleton:"get_skeleton",get_parent:"get_parent",get_data:"get_data"}};
var Ni=function(a,b){this.inheritScale=this.inheritRotation=!0;this.scaleX=this.scaleY=1;if(null==a)throw new H("name cannot be null.");this.name=a;this.parent=b};h["workinman.display.spine.BoneData"]=Ni;Ni.__name__=["workinman","display","spine","BoneData"];Ni.prototype={dispose:function(){this.parent=null},__class__:Ni};var Oi=function(a,b){if(null==b)throw new H("data cannot be null.");this.time=a;this.data=b};h["workinman.display.spine.Event"]=Oi;Oi.__name__=["workinman","display","spine","Event"];
Oi.prototype={dispose:function(){this.data.dispose();this.data=null},__class__:Oi};var Pi=function(a){if(null==a)throw new H("name cannot be null.");this.name=a};h["workinman.display.spine.EventData"]=Pi;Pi.__name__=["workinman","display","spine","EventData"];Pi.prototype={dispose:function(){},__class__:Pi};var H=function(a){this.msg=a};h["workinman.display.spine.Exception"]=H;H.__name__=["workinman","display","spine","Exception"];H.prototype={__class__:H};var ce=function(a,b){if(null==a)throw new H("data cannot be null.");
if(null==b)throw new H("skeleton cannot be null.");this._data=a;this.mix=a.mix;this.bendDirection=a.bendDirection;this.bones=[];for(var c=0,d=a.bones;c<d.length;){var e=d[c];++c;this.bones[this.bones.length]=b.findBone(e.name)}this.target=b.findBone(a.target.name)};h["workinman.display.spine.IkConstraint"]=ce;ce.__name__=["workinman","display","spine","IkConstraint"];ce.__interfaces__=[Tf];ce.apply1=function(a,b,c,d){var e=a.get_parent(),g=1/(e.get_a()*e.get_d()-e.get_b()*e.get_c()),b=b-e.get_worldX(),
p=c-e.get_worldY(),c=(b*e.get_d()-p*e.get_b())*g-a.x,e=(p*e.get_a()-b*e.get_c())*g-a.y,e=Math.atan2(e,c)*fb.radDeg-a.shearX-a.rotation;0>a.scaleX&&(e+=180);180<e?e-=360:-180>e&&(e+=360);a.updateWorldTransformWith(a.x,a.y,a.rotation+e*d,a.scaleX,a.scaleY,a.shearX,a.shearY)};ce.apply2=function(a,b,c,d,e,g){if(0==g)b.updateWorldTransform();else{var p=a.x,f=a.y,j=a.scaleX,i=a.scaleY,h=b.scaleX,k,l,m;0>j?(j=-j,k=180,m=-1):(k=0,m=1);0>i&&(i=-i,m=-m);0>h?(h=-h,l=180):l=0;var r=b.x,t,q,s,n=a.get_a(),o=a.get_b(),
v=a.get_c(),u=a.get_d(),w=1.0E-4>=Math.abs(j-i);w?(t=b.y,q=n*r+o*t+a.get_worldX(),s=v*r+u*t+a.get_worldY()):(t=0,q=n*r+a.get_worldX(),s=v*r+a.get_worldY());var y=a.get_parent(),n=y.get_a(),o=y.get_b(),v=y.get_c(),u=y.get_d(),z=1/(n*u-o*v),c=c-y.get_worldX(),d=d-y.get_worldY(),A=(c*u-d*o)*z-p,x=(d*n-c*v)*z-f,c=q-y.get_worldX(),d=s-y.get_worldY(),o=(c*u-d*o)*z-p,n=(d*n-c*v)*z-f,z=Math.sqrt(o*o+n*n),o=b.get_data().length*h,d=c=0;s=!1;if(w)o*=j,n=(A*A+x*x-z*z-o*o)/(2*z*o),-1>n?n=-1:1<n&&(n=1),d=Math.acos(n)*
e,n=z+o*n,o*=Math.sin(d),c=Math.atan2(x*n-A*o,A*n+x*o);else if(n=j*o,o*=i,h=n*n,q=o*o,w=A*A+x*x,A=Math.atan2(x,A),v=q*z*z+h*w-h*q,x=-2*q*z,y=q-h,u=x*x-4*y*v,0<=u&&(u=Math.sqrt(u),0>x&&(u=-u),u=-(x+u)/2,x=u/y,u=v/u,u=Math.abs(x)<Math.abs(u)?x:u,u*u<=w&&(d=Math.sqrt(w-u*u)*e,c=A-Math.atan2(d,u),d=Math.atan2(d/i,(u-z)/j),s=!0)),!s){var j=0,v=Math.POSITIVE_INFINITY,B=y=i=s=x=0,C=0,c=z+n,u=c*c;u>y&&(i=0,y=u,B=c);c=z-n;u=c*c;u<v&&(j=Math.PI,v=u,x=c);h=Math.acos(-n*z/(h-q));c=n*Math.cos(h)+z;d=o*Math.sin(h);
u=c*c+d*d;u<v&&(j=h,v=u,x=c,s=d);u>y&&(i=h,y=u,B=c,C=d);w<=(v+y)/2?(c=A-Math.atan2(s*e,x),d=j*e):(c=A-Math.atan2(C*e,B),d=i*e)}e=Math.atan2(t,r)*m;n=a.rotation;c=(c-e)*fb.radDeg+k-n;180<c?c-=360:-180>c&&(c+=360);a.updateWorldTransformWith(p,f,n+c*g,a.scaleX,a.scaleY,0,0);n=b.rotation;d=((d+e)*fb.radDeg-b.shearX)*m+l-n;180<d?d-=360:-180>d&&(d+=360);b.updateWorldTransformWith(r,t,n+d*g,b.scaleX,b.scaleY,b.shearX,b.shearY)}};ce.prototype={dispose:function(){this._data.dispose();this.target=this.bones=
this._data=null},update:function(){switch(this.bones.length){case 1:ce.apply1(this.bones[0],this.target.get_worldX(),this.target.get_worldY(),this.mix);break;case 2:ce.apply2(this.bones[0],this.bones[1],this.target.get_worldX(),this.target.get_worldY(),this.bendDirection,this.mix)}},get_data:function(){return this._data},__class__:ce,__properties__:{get_data:"get_data"}};var Qi=function(a){this.bendDirection=this.mix=1;this.bones=[];if(null==a)throw new H("name cannot be null.");this.name=a};h["workinman.display.spine.IkConstraintData"]=
Qi;Qi.__name__=["workinman","display","spine","IkConstraintData"];Qi.prototype={dispose:function(){this.target=this.bones=null},__class__:Qi};var fb=function(){};h["workinman.display.spine.MathUtils"]=fb;fb.__name__=["workinman","display","spine","MathUtils"];var Xe=function(){this.vertices=[]};h["workinman.display.spine.Polygon"]=Xe;Xe.__name__=["workinman","display","spine","Polygon"];Xe.prototype={dispose:function(){this.vertices=null},containsPoint:function(a,b){for(var c=this.vertices.length,
d=c-2,e=!1,g=0;g<c;){var p=this.vertices[g+1],f=this.vertices[d+1];if(p<b&&f>=b||f<b&&p>=b){var j=this.vertices[g];j+(b-p)/(f-p)*(this.vertices[d]-j)<a&&(e=!e)}d=g;g+=2}return e},__class__:Xe};var Si=function(a){this.x=this.y=0;this.flipX=this.flipY=!1;this.time=0;this.r=this.g=this.b=this.a=1;this._updateCache=[];if(null==a)throw new H("data cannot be null.");this._data=a;this.bones=[];for(var b=0,c=a.bones;b<c.length;){var d=c[b];++b;var e;e=null==d.parent?null:this.bones[a.bones.indexOf(d.parent)];
this.bones[this.bones.length]=new be(d,this,e)}this.slots=[];this.drawOrder=[];b=0;for(c=a.slots;b<c.length;)d=c[b],++b,e=this.bones[a.bones.indexOf(d.get_boneData())],d=new Ri(d,e),this.slots[this.slots.length]=d,this.drawOrder[this.drawOrder.length]=d;this.ikConstraints=[];b=0;for(c=a.ikConstraints;b<c.length;)d=c[b],++b,this.ikConstraints[this.ikConstraints.length]=new ce(d,this);this.transformConstraints=[];b=0;for(a=a.transformConstraints;b<a.length;)c=a[b],++b,this.transformConstraints[this.transformConstraints.length]=
new Wg(c,this);this.updateCache()};h["workinman.display.spine.Skeleton"]=Si;Si.__name__=["workinman","display","spine","Skeleton"];Si.prototype={dispose:function(){this._data.dispose();this._data=null;for(var a=0,b=this.bones;a<b.length;){var c=b[a];++a;c.dispose()}this.bones=null;a=0;for(b=this.slots;a<b.length;)c=b[a],++a,c.dispose();this.drawOrder=this.slots=null;a=0;for(b=this.ikConstraints;a<b.length;)c=b[a],++a,c.dispose();this.ikConstraints=null;a=0;for(b=this.transformConstraints;a<b.length;)c=
b[a],++a,c.dispose();this._updateCache=this.transformConstraints=null;null!=this.get_skin()&&this.get_skin().dispose();this.set_skin(null)},updateCache:function(){for(var a=this._updateCache,b=this.ikConstraints,c=this.transformConstraints,d=0,e=this.bones.length+b.length,g=0;g<e;)g++,a.push(null);e=0;for(g=this.bones;e<g.length;){var p=g[e];++e;a[d++]=p;for(var f=0;f<b.length;){var j=b[f];++f;if(p==j.bones[j.bones.length-1]){a[d++]=j;break}}}for(b=0;b<c.length;){d=c[b];++b;for(e=a.length-1;0<=e;){g=
a[e];if(g==d.bone||g==d.target){a.splice(e+1,0,d);break}e--}}},updateWorldTransform:function(){for(var a=0,b=this._updateCache;a<b.length;){var c=b[a];++a;c.update()}},setToSetupPose:function(){this.setBonesToSetupPose();this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=0,b=this.bones;a<b.length;){var c=b[a];++a;c.setToSetupPose()}a=0;for(b=this.ikConstraints;a<b.length;)c=b[a],++a,c.bendDirection=c.get_data().bendDirection,c.mix=c.get_data().mix;a=0;for(b=this.transformConstraints;a<
b.length;)c=b[a],++a,c.translateMix=c.get_data().translateMix,c.rotateMix=c.get_data().rotateMix,c.scaleMix=c.get_data().scaleMix,c.shearMix=c.get_data().shearMix},setSlotsToSetupPose:function(){for(var a=0,b=0,c=this.slots;b<c.length;){var d=c[b];++b;this.drawOrder[a++]=d;d.setToSetupPose()}},get_data:function(){return this._data},findBone:function(a){if(null==a)throw new H("boneName cannot be null.");for(var b=0,c=this.bones;b<c.length;){var d=c[b];++b;if(d.get_data().name==a)return d}return null},
findSlot:function(a){if(null==a)throw new H("slotName cannot be null.");for(var b=0,c=this.slots;b<c.length;){var d=c[b];++b;if(d.get_data().get_name()==a)return d}return null},get_skin:function(){return this._skin},set_skinName:function(a){var b=this.get_data().findSkin(a);if(null==b)throw new H("Skin not found: "+a);if(null!=this._skin&&a==this._skin.get_name())return this._skin.get_name();this.set_skin(b);return null==this._skin?null:this._skin.get_name()},set_skin:function(a){if(null!=a)if(null!=
this.get_skin())a.attachAll(this,this.get_skin());else for(var b=0,c=0,d=this.slots;c<d.length;){var e=d[c];++c;var g=e.get_data().attachmentName;""!=g&&(g=a.getAttachment(b,g),null!=g&&e.set_attachment(g));b++}return this._skin=a},getAttachmentForSlotIndex:function(a,b){if(null==b)throw new H("attachmentName cannot be null.");if(null!=this.get_skin()){var c=this.get_skin().getAttachment(a,b);if(null!=c)return c}return null!=this.get_data().defaultSkin?this.get_data().defaultSkin.getAttachment(a,
b):null},setAttachment:function(a,b){if(null==a)throw new H("slotName cannot be null.");for(var c=0,d=0,e=this.slots;d<e.length;){var g=e[d];++d;if(g.get_data().get_name()==a){d=null;if(null!=b&&(d=this.getAttachmentForSlotIndex(c,b),null==d))throw new H("Attachment not found: "+b+", for slot: "+a);g.set_attachment(d);return}c++}throw new H("Slot not found: "+a);},__class__:Si,__properties__:{set_skin:"set_skin",set_skinName:"set_skinName",get_skin:"get_skin",get_data:"get_data"}};var Ti=function(){this.polygonPool=
[];this.boundingBoxes=[];this.polygons=[]};h["workinman.display.spine.SkeletonBounds"]=Ti;Ti.__name__=["workinman","display","spine","SkeletonBounds"];Ti.prototype={dispose:function(){for(var a=0,b=this.boundingBoxes;a<b.length;){var c=b[a];++a;null!=c&&c.dispose()}this.boundingBoxes=null;a=0;for(b=this.polygons;a<b.length;)c=b[a],++a,null!=c&&c.dispose();this.polygons=null;a=0;for(b=this.polygonPool;a<b.length;)c=b[a],++a,null!=c&&c.dispose();this.polygonPool=null},update:function(a,b){var c=a.slots,
d=c.length,e=a.x,g=a.y;this.boundingBoxes=[];for(var p=0,f=this.polygons;p<f.length;){var j=f[p];++p;this.polygonPool[this.polygonPool.length]=j}this.polygons=[];for(p=0;p<d;){var f=p++,j=c[f],h=null;B.is(j.get_attachment(),re)&&(h=x.__cast(j.get_attachment(),re));if(null!=h){this.boundingBoxes[this.boundingBoxes.length]=h;var i=this.polygonPool.length;0<i?(f=this.polygonPool[i-1],this.polygonPool.splice(i-1,1)):f=new Xe;this.polygons[this.polygons.length]=f;h.computeWorldVertices(e,g,j.get_bone(),
f.vertices)}}b&&this.aabbCompute()},aabbCompute:function(){for(var a=2147483647,b=2147483647,c=-2147483648,d=-2147483648,e=0,g=this.polygons.length;e<g;)for(var p=this.polygons[e++].vertices,f=0,j=p.length;f<j;)var h=p[f],i=p[f+1],a=Math.min(a,h),b=Math.min(b,i),c=Math.max(c,h),d=Math.max(d,i),f=f+2;this.minX=a;this.minY=b;this.maxX=c;this.maxY=d},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},containsPoint:function(a,b){for(var c=0,d=this.polygons.length;c<
d;){var e=c++;if(this.polygons[e].containsPoint(a,b))return this.boundingBoxes[e]}return null},__class__:Ti};var Ui=function(){this.transformConstraints=[];this.ikConstraints=[];this.animations=[];this.events=[];this.skins=[];this.slots=[];this.bones=[]};h["workinman.display.spine.SkeletonData"]=Ui;Ui.__name__=["workinman","display","spine","SkeletonData"];Ui.prototype={dispose:function(){this.ikConstraints=this.animations=this.events=this.defaultSkin=this.skins=this.slots=this.bones=null},findBone:function(a){if(null==
a)throw new H("boneName cannot be null.");for(var b=0,c=this.bones.length;b<c;){var d=this.bones[b++];if(d.name==a)return d}return null},findBoneIndex:function(a){if(null==a)throw new H("boneName cannot be null.");for(var b=0,c=this.bones.length;b<c;){var d=b++;if(this.bones[d].name==a)return d}return-1},findSlotIndex:function(a){if(null==a)throw new H("slotName cannot be null.");for(var b=0,c=this.slots.length;b<c;){var d=b++;if(this.slots[d].get_name()==a)return d}return-1},findSkin:function(a){if(null==
a)throw new H("skinName cannot be null.");for(var b=0,c=this.skins;b<c.length;){var d=c[b];++b;if(d.get_name()==a)return d}return null},findEvent:function(a){if(null==a)throw new H("eventName cannot be null.");for(var b=0,c=this.events;b<c.length;){var d=c[b];++b;if(d.name==a)return d}return null},findAnimation:function(a){if(null==a)throw new H("animationName cannot be null.");for(var b=0,c=this.animations;b<c.length;){var d=c[b];++b;if(d.get_name()==a)return d}return null},findIkConstraint:function(a){if(null==
a)throw new H("constraintName cannot be null.");for(var b=0,c=this.ikConstraints;b<c.length;){var d=c[b];++b;if(d.name==a)return d}return null},__class__:Ui};var la=function(a){this.scale=1;this.attachmentLoader=a};h["workinman.display.spine.SkeletonJson"]=la;la.__name__=["workinman","display","spine","SkeletonJson"];la.readCurve=function(a,b,c){var d=r.field(c,"curve");null!=d&&("stepped"==d?a.setStepped(b):d instanceof Array&&null==d.__enum__?a.setCurve(b,d[0],d[1],d[2],d[3]):a.setCurve(b,d,function(){var a=
r.field(c,"c2");return null==a?0:x.__cast(a,X)}(this),function(){var a=r.field(c,"c3");return null==a?1:x.__cast(a,X)}(this),function(){var a=r.field(c,"c4");return null==a?1:x.__cast(a,X)}(this)))};la.toColor=function(a,b){if(8!=a.length)throw new H("Color hexidecimal length must be 8, recieved: "+a);return B.parseInt("0x"+a.substring(2*b,2*b+2))/255};la.getFloatArray=function(a,b,c){var a=r.field(a,b),b=[],d=a.length;if(1==c)for(c=0;c<d;){var e=c++;b[e]=a[e]}else for(e=0;e<d;){var g=e++;b[g]=a[g]*
c}return b};la.getIntArray=function(a,b){for(var c=r.field(a,b),d=[],e=0,g=c.length;e<g;){var p=e++;d[p]=c[p]}return d};la.getUIntArray=function(a,b){for(var c=r.field(a,b),d=[],e=0,g=c.length;e<g;){var p=e++;d[p]=c[p]}return d};la.prototype={readSkeletonData:function(a,b){if(null==a)throw new H("object cannot be null.");var c;c=JSON.parse(a);var d=new Ui;d.name=b;if(Object.prototype.hasOwnProperty.call(c,"skeleton")){var e;e=r.field(c,"skeleton");var g=r.field(e,"hash");d.hash=null==g?null:B.string(g);
var p=r.field(e,"spine");d.version=null==p?null:B.string(p);var f=r.field(e,"width");d.width=null==f?0:x.__cast(f,X);var j=r.field(e,"height");d.height=null==j?0:x.__cast(j,X)}for(var h=0,i=r.field(c,"bones");h<i.length;){var k=i[h];++h;var l=null,m,t=r.field(k,"parent");m=null==t?null:B.string(t);if(null!=m&&(l=d.findBone(m),null==l))throw"Parent bone not found: "+m;var n=new Ni(function(){var a=r.field(k,"name");return null==a?null:B.string(a)}(this),l);n.length=function(){var a=r.field(k,"length");
return null==a?0:x.__cast(a,X)}(this)*this.scale;n.x=function(){var a=r.field(k,"x");return null==a?0:x.__cast(a,X)}(this)*this.scale;n.y=function(){var a=r.field(k,"y");return null==a?0:x.__cast(a,X)}(this)*this.scale;var o=r.field(k,"rotation");n.rotation=null==o?0:x.__cast(o,X);var u=r.field(k,"scaleX");n.scaleX=null==u?1:x.__cast(u,X);var q=r.field(k,"scaleY");n.scaleY=null==q?1:x.__cast(q,X);var s=r.field(k,"shearX");n.shearX=null==s?0:x.__cast(s,X);var v=r.field(k,"shearY");n.shearY=null==v?
0:x.__cast(v,X);var y=r.field(k,"inheritScale");n.inheritScale=null==y?!0:x.__cast(y,Dg);var w=r.field(k,"inheritRotation");n.inheritRotation=null==w?!0:x.__cast(w,Dg);d.bones.push(n)}if(Object.prototype.hasOwnProperty.call(c,"ik"))for(var z=0,A=r.field(c,"ik");z<A.length;){var C=A[z];++z;for(var F=new Qi(function(){var a=r.field(C,"name");return null==a?null:B.string(a)}(this)),E=0,N=r.field(C,"bones");E<N.length;){var G=N[E];++E;var J=d.findBone(G);if(null==J)throw"IK bone not found: "+G;F.bones.push(J)}F.target=
d.findBone(function(){var a=r.field(C,"target");return null==a?null:B.string(a)}(this));if(null==F.target)throw"Target bone not found: "+function(){var a=r.field(C,"target");return null==a?null:B.string(a)}(this);F.bendDirection=function(){var a=r.field(C,"bendPositive");return null==a?!0:x.__cast(a,Dg)}(this)?1:-1;var Q=r.field(C,"mix");F.mix=null==Q?1:x.__cast(Q,X);d.ikConstraints.push(F)}var R=r.field(c,"transform");if(null!=R)for(var O=0,P=r.field(c,"transform");O<P.length;){var L=P[O];++O;var I=
new Vi(function(){var a=r.field(L,"name");return null==a?null:B.string(a)}(this)),V,U=r.field(L,"bone");V=null==U?null:B.string(U);I.bone=d.findBone(V);if(null==I.bone)throw new H("Bone not found: "+V);var K,T=r.field(L,"target");K=null==T?null:B.string(T);I.target=d.findBone(K);if(null==I.target)throw new H("Target bone not found: "+K);var Y=r.field(L,"rotation");I.offsetRotation=null==Y?0:x.__cast(Y,X);I.offsetX=function(){var a=r.field(L,"x");return null==a?0:x.__cast(a,X)}(this)*this.scale;I.offsetY=
function(){var a=r.field(L,"y");return null==a?0:x.__cast(a,X)}(this)*this.scale;I.offsetScaleX=function(){var a=r.field(L,"scaleX");return null==a?0:x.__cast(a,X)}(this)*this.scale;I.offsetScaleY=function(){var a=r.field(L,"scaleY");return null==a?0:x.__cast(a,X)}(this)*this.scale;I.offsetShearY=function(){var a=r.field(L,"shearY");return null==a?0:x.__cast(a,X)}(this)*this.scale;var aa=r.field(L,"rotateMix");I.rotateMix=null==aa?1:x.__cast(aa,X);var W=r.field(L,"translateMix");I.translateMix=null==
W?1:x.__cast(W,X);var Z=r.field(L,"scaleMix");I.scaleMix=null==Z?1:x.__cast(Z,X);var oa=r.field(L,"shearMix");I.shearMix=null==oa?1:x.__cast(oa,X);d.transformConstraints.push(I)}for(var R=null,ha=0,ka=r.field(c,"slots");ha<ka.length;){var ma=ka[ha];++ha;var ra,ea=r.field(ma,"bone");ra=null==ea?null:B.string(ea);var $=d.findBone(ra);if(null==$)throw"Slot bone not found: "+ra;var ba=new Wi(function(){var a=r.field(ma,"name");return null==a?null:B.string(a)}(this),$),D,da=r.field(ma,"color");D=null==
da?null:B.string(da);null!=D&&(ba.r=la.toColor(D,0),ba.g=la.toColor(D,1),ba.b=la.toColor(D,2),ba.a=la.toColor(D,3));var va=r.field(ma,"attachment");ba.attachmentName=null==va?null:B.string(va);var sa=r.field(ma,"blend");ba.blendMode=null==sa?"normal":B.string(sa);d.slots.push(ba)}var ja=r.field(c,"skins");if(0<ja.length)for(var Ae=0;Ae<ja.length;){var ia=ja[Ae];++Ae;var qa,xa=r.field(ia,"name");qa=null==xa?null:B.string(xa);var pa;pa=r.field(ia,"attachments");for(var Ye=new Xg(qa),ga=0,Yg=r.fields(pa);ga<
Yg.length;){var nk=Yg[ga];++ga;var vk=d.findSlotIndex(nk),na;na=r.field(pa,nk);for(var S=0,Aa=r.fields(na);S<Aa.length;){var wa=Aa[S];++S;var fa=this.readAttachment(Ye,wa,r.field(na,wa));null!=fa&&Ye.addAttachment(vk,wa,fa)}}d.skins.push(Ye);"default"==Ye.get_name()&&(d.defaultSkin=Ye)}else{var Uf;Uf=r.field(c,"skins");for(var ya=0,Ia=r.fields(Uf);ya<Ia.length;){var Ca=Ia[ya];++ya;var Be;Be=r.field(Uf,Ca);for(var wb=new Xg(Ca),Da=0,ca=r.fields(Be);Da<ca.length;){var ok=ca[Da];++Da;var Ad=d.findSlotIndex(ok),
ta;ta=r.field(Be,ok);for(var za=0,Ga=r.fields(ta);za<Ga.length;){var Ba=Ga[za];++za;var M=this.readAttachment(wb,Ba,r.field(ta,Ba));null!=M&&wb.addAttachment(Ad,Ba,M)}}d.skins.push(wb);"default"==wb.get_name()&&(d.defaultSkin=wb)}}var Ha;Ha=r.field(c,"events");if(null!=Ha)for(var Ea=0,Ka=r.fields(Ha);Ea<Ka.length;){var Na=Ka[Ea];++Ea;var Fa;Fa=r.field(Ha,Na);var Ze=new Pi(Na),db=r.field(Fa,"int");Ze.intValue=null==db?0:x.__cast(db,Df);var Vf=r.field(Fa,"float");Ze.floatValue=null==Vf?0:x.__cast(Vf,
X);var Zg=r.field(Fa,"string");Ze.stringValue=null==Zg?null:B.string(Zg);d.events.push(Ze)}var Oa;Oa=r.field(c,"animations");for(var Wf=0,kd=r.fields(Oa);Wf<kd.length;){var Va=kd[Wf];++Wf;this.readAnimation(Va,r.field(Oa,Va),d)}return d},readAttachment:function(a,b,c){var d=r.field(c,"name");null!=d&&(b=B.string(d));var e,d=r.field(c,"type");e=null==d?"region":B.string(d);"skinnedmesh"==e&&(e="weightedmesh");new Xi(0,e);var g,d=r.field(c,"path");g=null==d?b:B.string(d);d=this.scale;switch(e){case "region":a=
this.attachmentLoader.newRegionAttachment(a,b,g);if(null==a)break;a.path=g;a.x=function(){var a=r.field(c,"x");return null==a?0:x.__cast(a,X)}(this)*d;a.y=function(){var a=r.field(c,"y");return null==a?0:x.__cast(a,X)}(this)*d;b=r.field(c,"scaleX");a.scaleX=null==b?1:x.__cast(b,X);b=r.field(c,"scaleY");a.scaleY=null==b?1:x.__cast(b,X);b=r.field(c,"rotation");a.rotation=null==b?0:x.__cast(b,X);a.width=function(){var a=r.field(c,"width");return null==a?0:x.__cast(a,X)}(this)*d;a.height=function(){var a=
r.field(c,"height");return null==a?0:x.__cast(a,X)}(this)*d;d=r.field(c,"color");g=null==d?null:B.string(d);null!=g&&""!=g&&(a.r=la.toColor(g,0),a.g=la.toColor(g,1),a.b=la.toColor(g,2),a.a=la.toColor(g,3));a.updateOffset();return a;case "mesh":a=this.attachmentLoader.newMeshAttachment(a,b,g);if(null==a)break;a.path=g;a.vertices=la.getFloatArray(c,"vertices",d);a.triangles=la.getUIntArray(c,"triangles");a.regionUVs=la.getFloatArray(c,"uvs",1);a.updateUVs();b=r.field(c,"color");g=null==b?null:B.string(b);
null!=g&&""!=g&&(a.r=la.toColor(g,0),a.g=la.toColor(g,1),a.b=la.toColor(g,2),a.a=la.toColor(g,3));a.hullLength=2*function(){var a=r.field(c,"hull");return null==a?0:x.__cast(a,Df)}(this);Object.prototype.hasOwnProperty.call(c,"edges")&&(a.edges=la.getIntArray(c,"edges"));a.width=function(){var a=r.field(c,"width");return null==a?0:x.__cast(a,X)}(this)*d;a.height=function(){var a=r.field(c,"height");return null==a?0:x.__cast(a,X)}(this)*d;return a;case "weightedmesh":b=this.attachmentLoader.newWeightedMeshAttachment(a,
b,g);if(null==b)break;b.path=g;g=la.getFloatArray(c,"uvs",1);a=la.getFloatArray(c,"vertices",1);e=[];for(var p=[],f=0,j=a.length;f<j;){var h=Math.floor(a[f++]);p[p.length]=h;for(h=f+4*h;f<h;)p[p.length]=Math.floor(a[f]),e[e.length]=a[f+1]*d,e[e.length]=a[f+2]*d,e[e.length]=a[f+3],f+=4}b.bones=p;b.weights=e;b.triangles=la.getUIntArray(c,"triangles");b.regionUVs=g;b.updateUVs();a=r.field(c,"color");g=null==a?null:B.string(a);null!=g&&""!=g&&(b.r=la.toColor(g,0),b.g=la.toColor(g,1),b.b=la.toColor(g,
2),b.a=la.toColor(g,3));b.hullLength=2*function(){var a=r.field(c,"hull");return null==a?0:x.__cast(a,Df)}(this);Object.prototype.hasOwnProperty.call(c,"edges")&&(b.edges=la.getIntArray(c,"edges"));b.width=function(){var a=r.field(c,"width");return null==a?0:x.__cast(a,X)}(this)*d;b.height=function(){var a=r.field(c,"height");return null==a?0:x.__cast(a,X)}(this)*d;return b;case "boundingbox":b=this.attachmentLoader.newBoundingBoxAttachment(a,b);a=b.vertices;g=0;for(e=r.field(c,"vertices");g<e.length;)p=
e[g],++g,a[a.length]=p*d;return b}return null},readAnimation:function(a,b,c){var d=[],e=0,g,p,f,j,h;h=r.field(b,"slots");for(var i=0,k=r.fields(h);i<k.length;){var l=k[i];++i;g=r.field(h,l);p=c.findSlotIndex(l);for(var m=0,n=r.fields(g);m<n.length;){var t=n[m];++m;f=r.field(g,t);if("color"==t){var o=new $g(f.length);o.slotIndex=p;for(var u=j=0;u<f.length;){var q=f[u];++u;var s,v=r.field(q,"color");s=null==v?null:B.string(v);var y=la.toColor(s,0),w=la.toColor(s,1),z=la.toColor(s,2),A=la.toColor(s,
3);o.setFrame(j,function(){var a=r.field(q,"time");return null==a?0:x.__cast(a,X)}(this),y,w,z,A);la.readCurve(o,j,q);j++}d[d.length]=o;e=Math.max(e,o.frames[5*o.get_frameCount()-5])}else if("attachment"==t){var C=new ah(f.length);C.slotIndex=p;for(var F=j=0;F<f.length;){var E=f[F];++F;C.setFrame(j++,function(){var a=r.field(E,"time");return null==a?0:x.__cast(a,X)}(this),function(){var a=r.field(E,"name");return null==a?null:B.string(a)}(this))}d[d.length]=C;e=Math.max(e,C.frames[C.get_frameCount()-
1])}else throw new H("Invalid timeline type for a slot: "+t+" ("+l+")");}}var N;N=r.field(b,"bones");for(var G=0,I=r.fields(N);G<I.length;){var J=I[G];++G;var L=c.findBoneIndex(J);if(-1==L)throw new H("Bone not found: "+J);var Q;Q=r.field(N,J);for(var R=0,O=r.fields(Q);R<O.length;){var P=O[R];++R;f=r.field(Q,P);if("rotate"==P){var V=new bh(f.length);V.boneIndex=L;for(var U=j=0;U<f.length;){var K=f[U];++U;V.setFrame(j,function(){var a=r.field(K,"time");return null==a?0:x.__cast(a,X)}(this),function(){var a=
r.field(K,"angle");return null==a?0:x.__cast(a,X)}(this));la.readCurve(V,j,K);j++}d[d.length]=V;e=Math.max(e,V.frames[2*V.get_frameCount()-2])}else if("translate"==P||"scale"==P||"shear"==P){var T,Y=1;if("scale"==P){T=new ch(f.length);T.boneIndex=L;for(var aa=j=0;aa<f.length;){var W=f[aa];++aa;var Z;Z=function(){var a=r.field(W,"x");return null==a?1:x.__cast(a,X)}(this)*Y;var ma;ma=function(){var a=r.field(W,"y");return null==a?1:x.__cast(a,X)}(this)*Y;T.setFrame(j,function(){var a=r.field(W,"time");
return null==a?0:x.__cast(a,X)}(this),Z,ma);la.readCurve(T,j,W);j++}}else if("shear"==P){T=new dh(f.length);T.boneIndex=L;for(var ha=j=0;ha<f.length;){var ba=f[ha];++ha;var oa;oa=function(){var a=r.field(ba,"x");return null==a?0:x.__cast(a,X)}(this)*Y;var ka;ka=function(){var a=r.field(ba,"y");return null==a?0:x.__cast(a,X)}(this)*Y;T.setFrame(j,function(){var a=r.field(ba,"time");return null==a?0:x.__cast(a,X)}(this),oa,ka);la.readCurve(T,j,ba);j++}}else{T=new ld(f.length);Y=this.scale;T.boneIndex=
L;for(var ra=j=0;ra<f.length;){var ea=f[ra];++ra;var $;$=function(){var a=r.field(ea,"x");return null==a?0:x.__cast(a,X)}(this)*Y;var D;D=function(){var a=r.field(ea,"y");return null==a?0:x.__cast(a,X)}(this)*Y;T.setFrame(j,function(){var a=r.field(ea,"time");return null==a?0:x.__cast(a,X)}(this),$,D);la.readCurve(T,j,ea);j++}}d[d.length]=T;e=Math.max(e,T.frames[3*T.get_frameCount()-3])}else throw new H("Invalid timeline type for a bone: "+P+" ("+J+")");}}var da;da=r.field(b,"ik");for(var ja=0,va=
r.fields(da);ja<va.length;){var sa=va[ja];++ja;var Ae=c.findIkConstraint(sa);f=r.field(da,sa);var ia=new eh(f.length);ia.ikConstraintIndex=c.ikConstraints.indexOf(Ae);for(var pa=j=0;pa<f.length;){var ga=f[pa];++pa;var qa,Ye=r.field(ga,"mix");qa=null==Ye?1:x.__cast(Ye,X);var na;na=function(){var a=r.field(ga,"bendPositive");return null==a?!0:x.__cast(a,Dg)}(this)?1:-1;ia.setFrame(j,function(){var a=r.field(ga,"time");return null==a?0:x.__cast(a,X)}(this),qa,na);la.readCurve(ia,j,ga);j++}d[d.length]=
ia;e=Math.max(e,ia.frames[3*ia.get_frameCount()-3])}var Yg;Yg=r.field(b,"ffd");for(var xa=0,S=r.fields(Yg);xa<S.length;){var wa=S[xa];++xa;var Aa=c.findSkin(wa);g=r.field(Yg,wa);for(var ya=0,Ha=r.fields(g);ya<Ha.length;){var Da=Ha[ya];++ya;p=c.findSlotIndex(Da);var Uf;Uf=r.field(g,Da);for(var fa=0,Ia=r.fields(Uf);fa<Ia.length;){var ta=Ia[fa];++fa;f=r.field(Uf,ta);var Be=new fh(f.length),wb=Aa.getAttachment(p,ta);if(null==wb)throw new H("FFD attachment not found: "+ta);Be.slotIndex=p;Be.attachment=
wb;var za;za=x.__instanceof(wb,ec)?x.__cast(wb,ec).vertices.length:Math.floor(2*(x.__cast(wb,de).weights.length/3));for(var Ca=j=0;Ca<f.length;){var ca=f[Ca];++Ca;var Ad;if(Object.prototype.hasOwnProperty.call(ca,"vertices")){var Ea;Ea=r.field(ca,"vertices");Ad=Ba.allocFloat(za);var Fa,Ga=r.field(ca,"offset");Fa=null==Ga?0:x.__cast(Ga,Df);var Ka=Ea.length;if(1==this.scale)for(var M=0;M<Ka;){var Na=M++;Ad[Na+Fa]=Ea[Na]}else for(var Va=0;Va<Ka;){var ab=Va++;Ad[ab+Fa]=Ea[ab]*this.scale}if(x.__instanceof(wb,
ec))for(var cb=x.__cast(wb,ec).vertices,Sa=0;Sa<za;){var Ze=Sa++;Ad[Ze]+=cb[Ze]}}else Ad=x.__instanceof(wb,ec)?x.__cast(wb,ec).vertices:[];Be.setFrame(j,function(){var a=r.field(ca,"time");return null==a?0:x.__cast(a,X)}(this),Ad);la.readCurve(Be,j,ca);j++}d[d.length]=Be;e=Math.max(e,Be.frames[Be.get_frameCount()-1])}}}var db=r.field(b,"drawOrder");null==db&&(db=r.field(b,"draworder"));if(null!=db&&0<db.length){for(var Vf=new gh(db.length),Zg=c.slots.length,Oa=j=0;Oa<db.length;){var Wf=db[Oa];++Oa;
var kd=null;if(Object.prototype.hasOwnProperty.call(Wf,"offsets")){for(var kd=[],ua=Zg-1;0<=ua;)kd[ua]=-1,ua--;for(var Ua=r.field(Wf,"offsets"),mk=[],se=0,Xa=0,Qa=0;Qa<Ua.length;){var Eb=Ua[Qa];++Qa;p=c.findSlotIndex(function(){var a=r.field(Eb,"slot");return null==a?null:B.string(a)}(this));if(-1==p)throw new H("Slot not found: "+function(){var a=r.field(Eb,"slot");return null==a?null:B.string(a)}(this));for(;se!=p;)mk[Xa++]=se++;kd[se+function(){var a=r.field(Eb,"offset");return null==a?0:x.__cast(a,
Df)}(this)]=se++}for(;se<Zg;)mk[Xa++]=se++;for(var Vc=Zg-1;0<=Vc;)-1==kd[Vc]&&(kd[Vc]=mk[--Xa]),Vc--}Vf.setFrame(j++,function(){var a=r.field(Wf,"time");return null==a?0:x.__cast(a,X)}(this),kd)}d[d.length]=Vf;e=Math.max(e,Vf.frames[Vf.get_frameCount()-1])}var Fb=r.field(b,"events");if(null!=Fb&&0<Fb.length){for(var mb=new hh(Fb.length),ib=j=0;ib<Fb.length;){var Pa=Fb[ib];++ib;var ob=c.findEvent(function(){var a=r.field(Pa,"name");return null==a?null:B.string(a)}(this));if(null==ob)throw new H("Event not found: "+
function(){var a=r.field(Pa,"name");return null==a?null:B.string(a)}(this));var Ja=new Oi(function(){var a=r.field(Pa,"time");return null==a?0:x.__cast(a,X)}(this),ob),md=r.field(Pa,"Int");Ja.intValue=null==md?ob.intValue:x.__cast(md,Df);var Xf=r.field(Pa,"float");Ja.floatValue=null==Xf?ob.floatValue:x.__cast(Xf,X);var Ac=r.field(Pa,"string");Ja.stringValue=null==Ac?ob.stringValue:B.string(Ac);mb.setFrame(j++,Ja)}d[d.length]=mb;e=Math.max(e,mb.frames[Math.floor(mb.get_frameCount()-1)])}c.animations[c.animations.length]=
new hb(a,d,e)},__class__:la};var Xg=function(a){this._attachments=[];if(null==a)throw new H("name cannot be null.");this._name=a};h["workinman.display.spine.Skin"]=Xg;Xg.__name__=["workinman","display","spine","Skin"];Xg.prototype={dispose:function(){this._attachments=null},addAttachment:function(a,b,c){if(null==c)throw new H("attachment cannot be null.");null==this.get_attachments()[a]&&(this.get_attachments()[a]=new sa);this.get_attachments()[a].set(b,c);c},getAttachment:function(a,b){if(a>=this.get_attachments().length)return null;
var c=this.get_attachments()[a];return null!=c?c.get(b):null},get_attachments:function(){return this._attachments},get_name:function(){return this._name},attachAll:function(a,b){for(var c=0,d=0,e=a.slots;d<e.length;){var g=e[d];++d;var p=g.get_attachment();if(null!=p&&c<b.get_attachments().length){var f=b.get_attachments()[c];if(null!=f)for(var j=f.keys();j.hasNext();){var h=j.next(),i=f.get(h);if(p==i){p=this.getAttachment(c,h);null!=p&&g.set_attachment(p);break}}}c++}},__class__:Xg,__properties__:{get_name:"get_name",
get_attachments:"get_attachments"}};var Ri=function(a,b){this.attachmentVertices=[];if(null==a)throw new H("data cannot be null.");if(null==b)throw new H("bone cannot be null.");this._data=a;this._bone=b;this.setToSetupPose()};h["workinman.display.spine.Slot"]=Ri;Ri.__name__=["workinman","display","spine","Slot"];Ri.prototype={dispose:function(){this._data.dispose();this.attachmentVertices=this._attachment=this._bone=this._data=null},get_data:function(){return this._data},get_bone:function(){return this._bone},
get_skeleton:function(){return this._bone.get_skeleton()},get_attachment:function(){return this._attachment},set_attachment:function(a){if(this._attachment==a)return this._attachment;this._attachment=a;this._attachmentTime=this._bone.get_skeleton().time;this.attachmentVertices=[];return this._attachment},setToSetupPose:function(){var a=this._bone.get_skeleton().get_data().slots.indexOf(this.get_data());this.r=this._data.r;this.g=this._data.g;this.b=this._data.b;this.a=this._data.a;null==this._data.attachmentName?
this.set_attachment(null):(this._attachment=null,this.set_attachment(this._bone.get_skeleton().getAttachmentForSlotIndex(a,this.get_data().attachmentName)))},__class__:Ri,__properties__:{set_attachment:"set_attachment",get_attachment:"get_attachment",get_skeleton:"get_skeleton",get_bone:"get_bone",get_data:"get_data"}};var Wi=function(a,b){this.r=this.g=this.b=this.a=1;if(null==a)throw new H("name cannot be null.");if(null==b)throw new H("boneData cannot be null.");this._name=a;this._boneData=b};
h["workinman.display.spine.SlotData"]=Wi;Wi.__name__=["workinman","display","spine","SlotData"];Wi.prototype={dispose:function(){this._boneData=null},get_name:function(){return this._name},get_boneData:function(){return this._boneData},__class__:Wi,__properties__:{get_boneData:"get_boneData",get_name:"get_name"}};var za=function(a,b,c,d){null==d&&(d=!1);null==c&&(c="");null==b&&(b="");v.call(this,a);var e=a.library;""!=b&&(e=b);b=d?null:new Yi(o.getFile(e+".atlas").toString(),new ih(e.substring(0,
e.lastIndexOf("/")+1),o.getPackForAsset(e)));b=new la(new nd(b));e=""==c?e:c;c=b.readSkeletonData(o.getFile(e+".json").toString(),e);e=new Zi(c);this.state=new $i(e);this._renderer=new jh(c,a.debug);this._skeleton=this._renderer.skeleton;this._skeleton.updateWorldTransform();this.eventAnimationComplete=Sa._new();this._animationsSpine=new sa;e=0;for(c=c.animations;e<c.length;)b=c[e],++e,a.trace&&null,this._animationsSpine.set(b.get_name(),b);this.state.onStart.add(n(this,this._onAnimationStart));this.state.onComplete.add(n(this,
this._onAnimationCompleted));this.state.onEvent.add(n(this,this._onAnimationEvent));this.addChild(this._renderer);this._bounds=new Ti;this._boundsRegion=new aj(this._renderer);this._currentAnimation=this._hitName=""};h["workinman.display.spine.SpineElement"]=za;za.__name__=["workinman","display","spine","SpineElement"];za.__super__=v;za.prototype=y(v.prototype,{dispose:function(){this.state.onStart.remove(n(this,this._onAnimationStart));this.state.onComplete.remove(n(this,this._onAnimationCompleted));
this.state.onEvent.remove(n(this,this._onAnimationEvent));this._bounds.dispose();this._bounds=null;this._boundsRegion.dispose();this._boundsRegion=null;this.state.dispose();this.state=null;this.eventAnimationComplete.dispose();this._renderer=this._animationsSpine=this._skeleton=this.eventAnimationComplete=null;v.prototype.dispose.call(this)},get_currentAnimation:function(){return this._currentAnimation},get_animationsSpine:function(){return this._animationsSpine},get_hitName:function(){return this._hitName},
runUpdate:function(a){v.prototype.runUpdate.call(this,a);this.state.update(a);this.state.apply(this._skeleton);this._skeleton.updateWorldTransform()},getFrames:function(a){null==a&&(a=0);a=this.state.getCurrent(a);return null!=a?Math.floor(a.animation.duration*za.FPS):0},getFrame:function(a){null==a&&(a=0);a=this.state.getCurrent(a);return null!=a?Math.floor(a.animation.currentTime*za.FPS):0},setFrame:function(a,b){null==b&&(b=0);var c=this.state.getCurrent(b);null!=c&&(c.timeScale=0,c.time=Td.clamp(a/
za.FPS,0,c.animation.duration))},setTimeScale:function(a,b){null==b&&(b=0);var c=this.state.getCurrent(b);null!=c&&(c.timeScale=a)},startAnimation:function(a){null==a&&(a=0);a=this.state.getCurrent(a);null!=a&&(a.timeScale=1)},stopAnimation:function(a){null==a&&(a=0);a=this.state.getCurrent(a);null!=a&&(a.timeScale=0)},mixAnimation:function(a,b,c){this.state.get_data().setMixByName(a,b,c)},hasAnimation:function(a){return this._animationsSpine.exists(a)},animate:function(a,b,c,d,e){null==e&&(e=!1);
null==d&&(d=0);null==c&&(c=1);null==b&&(b=0);this._doAnimate(a,b,!1,0,c,d,e);return this},queueAnimation:function(a,b,c,d,e,g){null==g&&(g=0);null==e&&(e=!1);null==d&&(d=0);null==c&&(c=1);null==b&&(b=0);this._doAnimate(a,b,!0,g,c,d,e);return this},_doAnimate:function(a,b,c,d,e,g,p){null==p&&(p=!1);null==g&&(g=0);null==e&&(e=1);p&&this._skeleton.setToSetupPose();if(this.hasAnimation(a)){if(c=c?this.state.addAnimationByName(g,a,0==b,d):this.state.setAnimationByName(g,a,0==b),c.timeScale=e,0<b)for(d=
1;d<b;)d++,c=this.state.addAnimationByName(g,a,!1,0),c.timeScale=e}else null},clearQueue:function(){null!=this.state&&this.state.clearTracks()},setSkin:function(a,b){null==b&&(b=!1);this._skeleton.set_skinName(a);b&&this._skeleton.setSlotsToSetupPose()},setAttachment:function(a,b){this._skeleton.setAttachment(a,b)},getAttachment:function(a){a=this._skeleton.findSlot(a);return null==a||null==a.get_attachment()?"":a.get_attachment().name},hit:function(a,b,c){null==c&&(c="");this._hitName="";this._bounds.update(this._skeleton,
!0);return this._bounds.aabbContainsPoint(a,b)&&(a=this._bounds.containsPoint(a,b),null!=a&&(""==c||c==a.name))?(this._hitName=a.name,!0):!1},hitRegion:function(a,b,c){null==c&&(c="");this._hitName="";this._boundsRegion.update(this._skeleton,!0,this.scaleX,this.scaleY);return this._boundsRegion.aabbContainsPoint(a,b)&&(a=this._boundsRegion.containsPoint(a,b),null!=a&&(""==c||c==a.name))?(this._hitName=a.name,!0):!1},addElementToSlot:function(a,b){null==this._skeleton.findSlot(a)||null==function(b){var d=
b._renderer.get_sprites(),b=b._skeleton.findSlot(a).get_attachment();return d.get(b)}(this)||function(b){var d=b._renderer.get_sprites(),b=b._skeleton.findSlot(a).get_attachment();return d.get(b)}(this).addChild(b)},_onAnimationStart:function(a){this._currentAnimation=this.state.getCurrent(a).animation.get_name()},_onAnimationCompleted:function(){this.eventAnimationComplete.dispatch()},_onAnimationEvent:function(){},__class__:za,__properties__:y(v.prototype.__properties__,{get_hitName:"get_hitName",
get_animationsSpine:"get_animationsSpine",get_currentAnimation:"get_currentAnimation"})});var Wg=function(a,b){if(null==a)throw new H("data cannot be null.");if(null==b)throw new H("skeleton cannot be null.");this._data=a;this.translateMix=a.translateMix;this.rotateMix=a.rotateMix;this.scaleMix=a.scaleMix;this.shearMix=a.shearMix;this.offsetRotation=a.offsetRotation;this.offsetX=a.offsetX;this.offsetY=a.offsetY;this.offsetScaleX=a.offsetScaleX;this.offsetScaleY=a.offsetScaleY;this.offsetShearY=a.offsetShearY;
this.bone=b.findBone(a.bone.name);this.target=b.findBone(a.target.name)};h["workinman.display.spine.TransformConstraint"]=Wg;Wg.__name__=["workinman","display","spine","TransformConstraint"];Wg.__interfaces__=[Tf];Wg.prototype={dispose:function(){this._data.dispose();this.target=this.bone=this._data=null},update:function(){if(0<this.rotateMix){var a=this.bone.get_a(),b=this.bone.get_b(),c=this.bone.get_c(),d=this.bone.get_d(),e=Math.atan2(this.target.get_c(),this.target.get_a())-Math.atan2(c,a)+this.offsetRotation*
fb.degRad;e>Math.PI?e-=2*Math.PI:e<-Math.PI&&(e+=2*Math.PI);var e=e*this.rotateMix,g=Math.cos(e),e=Math.sin(e);this.bone.set_a(g*a-e*c);this.bone.set_b(g*b-e*d);this.bone.set_c(e*a+g*c);this.bone.set_d(e*b+g*d)}0<this.scaleMix&&(a=Math.sqrt(this.bone.get_a()*this.bone.get_a()+this.bone.get_c()*this.bone.get_c()),b=Math.sqrt(this.target.get_a()*this.target.get_a()+this.target.get_c()*this.target.get_c()),a=0<a?(a+(b-a+this.offsetScaleX)*this.scaleMix)/a:0,b=this.bone,b.set_a(b.get_a()*a),b=this.bone,
b.set_c(b.get_c()*a),a=Math.sqrt(this.bone.get_b()*this.bone.get_b()+this.bone.get_d()*this.bone.get_d()),b=Math.sqrt(this.target.get_b()*this.target.get_b()+this.target.get_d()*this.target.get_d()),a=0<a?(a+(b-a+this.offsetScaleY)*this.scaleMix)/a:0,b=this.bone,b.set_b(b.get_b()*a),b=this.bone,b.set_d(b.get_d()*a));0<this.shearMix&&(b=this.bone.get_b(),c=this.bone.get_d(),d=Math.atan2(c,b),a=Math.atan2(this.target.get_d(),this.target.get_b())-Math.atan2(this.target.get_c(),this.target.get_a())-(d-
Math.atan2(this.bone.get_c(),this.bone.get_a())),a>Math.PI?a-=2*Math.PI:a<-Math.PI&&(a+=2*Math.PI),a=d+(a+this.offsetShearY*fb.degRad)*this.shearMix,b=Math.sqrt(b*b+c*c),this.bone.set_b(Math.cos(a)*b),this.bone.set_d(Math.sin(a)*b));a=this.translateMix;0<a&&(b=Ba.allocFloat(2),b[0]=this.offsetX,b[1]=this.offsetY,this.target.localToWorld(b),c=this.bone,c.set_worldX(c.get_worldX()+(b[0]-this.bone.get_worldX())*a),c=this.bone,c.set_worldY(c.get_worldY()+(b[1]-this.bone.get_worldY())*a))},get_data:function(){return this._data},
__class__:Wg,__properties__:{get_data:"get_data"}};var Vi=function(a){if(null==a)throw new H("name cannot be null.");this._name=a};h["workinman.display.spine.TransformConstraintData"]=Vi;Vi.__name__=["workinman","display","spine","TransformConstraintData"];Vi.prototype={dispose:function(){this.target=this.bone=null},__class__:Vi};var hb=function(a,b,c){if(null==a)throw new H("name cannot be null.");if(null==b)throw new H("timelines cannot be null.");this._name=a;this._timelines=b;this.duration=c};
h["workinman.display.spine.animation.Animation"]=hb;hb.__name__=["workinman","display","spine","animation","Animation"];hb.binarySearch=function(a,b,c){var d=0,e=Math.floor(a.length/c-2);if(0==e)return c;for(var g=e>>>1;;){a[(g+1)*c]<=b?d=g+1:e=g;if(d==e)return(d+1)*c;g=d+e>>>1}return 0};hb.binarySearch1=function(a,b){var c=0,d=a.length-2;if(0==d)return 1;for(var e=d>>>1;;){a[e+1]<=b?c=e+1:d=e;if(c==d)return c+1;e=c+d>>>1}return 0};hb.prototype={get_timelines:function(){return this._timelines},apply:function(a,
b,c,d,e){if(null==a)throw new H("skeleton cannot be null.");d&&0!=this.duration&&(c%=this.duration,0<b&&(b%=this.duration));for(var d=0,g=this.get_timelines().length;d<g;){var p=d++;this.get_timelines()[p].apply(a,b,c,e,1)}this.currentTime=c},mix:function(a,b,c,d,e,g){if(null==a)throw new H("skeleton cannot be null.");d&&0!=this.duration&&(c%=this.duration,0<b&&(b%=this.duration));for(var d=0,p=this.get_timelines().length;d<p;){var f=d++;this.get_timelines()[f].apply(a,b,c,e,g)}},get_name:function(){return this._name},
__class__:hb,__properties__:{get_name:"get_name",get_timelines:"get_timelines"}};var $i=function(a){this.timeScale=1;if(null==a)throw new H("data cannot be null.");this._data=a;this._tracks=[];this._events=[];this.onStart=new $e;this.onEnd=new $e;this.onComplete=new $e;this.onEvent=new $e};h["workinman.display.spine.animation.AnimationState"]=$i;$i.__name__=["workinman","display","spine","animation","AnimationState"];$i.prototype={dispose:function(){this._data.dispose();this._data=null;for(var a=
0,b=this._tracks;a<b.length;){var c=b[a];++a;null!=c&&c.dispose()}this._tracks=null;a=0;for(b=this._events;a<b.length;)c=b[a],++a,c.dispose();this._events=null;this.onStart.dispose();this.onStart=null;this.onEnd.dispose();this.onEnd=null;this.onComplete.dispose();this.onComplete=null;this.onEvent.dispose();this.onEvent=null},get_data:function(){return this._data},update:function(a){for(var a=a*this.timeScale,b=0,c=this._tracks.length;b<c;){var d=b++,e=this._tracks[d];if(null!=e){e.time+=a*e.timeScale;
if(null!=e.previous){var g=a*e.previous.timeScale;e.previous.time+=g;e.mixTime+=g}var g=e.next,p=e.lastTime;0>e.timeScale&&(p=Math.abs(p));null!=g?(g.time=p-g.delay,0<=g.time&&this.setCurrent(d,g)):!e.loop&&p>=e.endTime&&this.clearTrack(d)}}},apply:function(a){for(var b=0,c=this._tracks.length;b<c;){var d=b++,e=this._tracks[d];if(null!=e){this._events=[];var g=e.time,p=e.lastTime,f=e.endTime,j=e.loop;!j&&g>f&&(g=f);if(0>e.timeScale){for(;0>g;)g+=e.animation.duration;for(;0>p;)p+=e.animation.duration}var h=
e.previous;if(null==h)1==e.mix?e.animation.apply(a,e.lastTime,g,j,this._events):e.animation.mix(a,e.lastTime,g,j,this._events,e.mix);else{var i=h.time;!h.loop&&i>h.endTime&&(i=h.endTime);h.animation.apply(a,i,i,h.loop,null);h=e.mixTime/e.mixDuration*e.mix;1<=h&&(h=1,e.previous=null);e.animation.mix(a,e.lastTime,g,j,this._events,h)}h=0;for(i=this._events;h<i.length;){var k=i[h];++h;if(null!=e.onEvent)e.onEvent(d,k);this.onEvent.invoke(d,k)}if(j?p%f>g%f:p<f&&g>=f){g=Math.floor(g/f);if(null!=e.onComplete)e.onComplete(d,
g);this.onComplete.invoke(d,g)}e.lastTime=e.time}}},clearTracks:function(){for(var a=0,b=this._tracks.length;a<b;)this.clearTrack(a++);this._tracks=[]},clearTrack:function(a){if(!(a>=this._tracks.length)){var b=this._tracks[a];if(null!=b){if(null!=b.onEnd)b.onEnd(a);this.onEnd.invoke(a);this._tracks[a]=null}}},expandToIndex:function(a){if(a<this._tracks.length)return this._tracks[a];for(;a>=this._tracks.length;)this._tracks[this._tracks.length]=null;return null},setCurrent:function(a,b){var c=this.expandToIndex(a);
if(null!=c){var d=c.previous;c.previous=null;if(null!=c.onEnd)c.onEnd(a);this.onEnd.invoke(a);b.mixDuration=this._data.getMix(c.animation,b.animation);0<b.mixDuration&&(b.mixTime=0,b.previous=null!=d&&0.5>c.mixTime/c.mixDuration?d:c)}this._tracks[a]=b;if(null!=b.onStart)b.onStart(a);this.onStart.invoke(a)},setAnimationByName:function(a,b,c){var d=this._data.get_skeletonData().findAnimation(b);if(null==d)throw new H("Animation not found: "+b);return this.setAnimation(a,d,c)},setAnimation:function(a,
b,c){var d=new kh;d.animation=b;d.loop=c;d.endTime=b.duration;this.setCurrent(a,d);return d},addAnimationByName:function(a,b,c,d){var e=this._data.get_skeletonData().findAnimation(b);if(null==e)throw new H("Animation not found: "+b);return this.addAnimation(a,e,c,d)},addAnimation:function(a,b,c,d){var e=new kh;e.animation=b;e.loop=c;e.endTime=b.duration;c=this.expandToIndex(a);if(null!=c){for(;null!=c.next;)c=c.next;c.next=e}else this._tracks[a]=e;0>=d&&(d=null!=c?d+(c.endTime-this._data.getMix(c.animation,
b)):0);e.delay=d;return e},getCurrent:function(a){return a>=this._tracks.length?null:this._tracks[a]},__class__:$i,__properties__:{get_data:"get_data"}};var Zi=function(a){this.defaultMix=0;this._skeletonData=a;this.animationToMixTime=new sa};h["workinman.display.spine.animation.AnimationStateData"]=Zi;Zi.__name__=["workinman","display","spine","animation","AnimationStateData"];Zi.prototype={dispose:function(){this._skeletonData=this.animationToMixTime=null},get_skeletonData:function(){return this._skeletonData},
setMixByName:function(a,b,c){var d=this._skeletonData.findAnimation(a);if(null==d)throw new H("Animation not found: "+a);a=this._skeletonData.findAnimation(b);if(null==a)throw new H("Animation not found: "+b);this.setMix(d,a,c)},setMix:function(a,b,c){if(null==a)throw new H("from cannot be null.");if(null==b)throw new H("to cannot be null.");this.animationToMixTime.set(a.get_name()+":"+b.get_name(),c);c},getMix:function(a,b){var c;c=this.animationToMixTime.get(a.get_name()+":"+b.get_name());return null==
c?this.defaultMix:c},__class__:Zi,__properties__:{get_skeletonData:"get_skeletonData"}};var af=function(){};h["workinman.display.spine.animation.Timeline"]=af;af.__name__=["workinman","display","spine","animation","Timeline"];af.prototype={__class__:af};var ah=function(a){this.frames=Ba.allocFloat(a);this.attachmentNames=Ba.allocString(a)};h["workinman.display.spine.animation.AttachmentTimeline"]=ah;ah.__name__=["workinman","display","spine","animation","AttachmentTimeline"];ah.__interfaces__=[af];
ah.prototype={get_frameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b;this.attachmentNames[a]=c},apply:function(a,b,c){var d=this.frames;c<d[0]?b>c&&this.apply(a,b,Math.POSITIVE_INFINITY,null,0):(b>c&&(b=-1),c=c>=d[d.length-1]?d.length-1:hb.binarySearch1(d,c)-1,d[c]<b||(b=this.attachmentNames[c],a.slots[this.slotIndex].set_attachment(null==b?null:a.getAttachmentForSlotIndex(this.slotIndex,b))))},__class__:ah,__properties__:{get_frameCount:"get_frameCount"}};
var Xa=function(a){this.curves=Ba.allocFloat(19*(a-1))};h["workinman.display.spine.animation.CurveTimeline"]=Xa;Xa.__name__=["workinman","display","spine","animation","CurveTimeline"];Xa.__interfaces__=[af];Xa.prototype={apply:function(){},get_frameCount:function(){return Math.floor(this.curves.length/19+1)},setStepped:function(a){this.curves[Math.floor(19*a)]=1},setCurve:function(a,b,c,d,e){var g=0.1*0.1,f=0.1*g,h=3*0.1,j=3*g,i=6*g,g=6*f,Kd=2*-b+d,k=2*-c+e,d=3*(b-d)+1,e=3*(c-e)+1,b=b*h+Kd*j+d*f,
c=c*h+k*j+e*f,f=Kd*i+d*g,i=k*i+e*g,k=d*g,g=e*g,a=19*a,d=this.curves;d[a++]=2;e=b;h=c;for(j=a+19-1;a<j;)d[a]=e,d[a+1]=h,b+=f,c+=i,f+=k,i+=g,e+=b,h+=c,a+=2},getCurvePercent:function(a,b){var c=this.curves,d=19*a,e=c[d];if(0==e)return b;if(1==e)return 0;d++;for(var e=0,g=d,f=d+19-1;d<f;){e=c[d];if(e>=b)return d==g?f=g=0:(g=c[d-2],f=c[d-1]),f+(c[d+1]-f)*(b-g)/(e-g);d+=2}c=c[d-1];return c+(1-c)*(b-e)/(1-e)},__class__:Xa,__properties__:{get_frameCount:"get_frameCount"}};var $g=function(a){Xa.call(this,
a);this.frames=Ba.allocFloat(a)};h["workinman.display.spine.animation.ColorTimeline"]=$g;$g.__name__=["workinman","display","spine","animation","ColorTimeline"];$g.__super__=Xa;$g.prototype=y(Xa.prototype,{setFrame:function(a,b,c,d,e,g){a*=5;this.frames[a]=b;this.frames[a+1]=c;this.frames[a+2]=d;this.frames[a+3]=e;this.frames[a+4]=g},apply:function(a,b,c,d,e){if(!(c<this.frames[0])){var g,f;if(c>=this.frames[this.frames.length-5])b=this.frames.length-1,c=this.frames[b-3],g=this.frames[b-2],f=this.frames[b-
1],b=this.frames[b];else{var b=hb.binarySearch(this.frames,c,5),h=this.frames[b-4];g=this.frames[b-3];f=this.frames[b-2];var d=this.frames[b-1],j=this.frames[b],j=1-(c-j)/(this.frames[b+-5]-j),j=this.getCurvePercent(Math.floor(b/5-1),0>j?0:1<j?1:j),c=h+(this.frames[b+1]-h)*j;g+=(this.frames[b+2]-g)*j;f+=(this.frames[b+3]-f)*j;b=d+(this.frames[b+4]-d)*j}a=a.slots[this.slotIndex];1>e?(a.r+=(c-a.r)*e,a.g+=(g-a.g)*e,a.b+=(f-a.b)*e,a.a+=(b-a.a)*e):(a.r=c,a.g=g,a.b=f,a.a=b)}},__class__:$g});var gh=function(a){this.frames=
Ba.allocFloat(a);this.drawOrders=Ba.allocIntArray(a)};h["workinman.display.spine.animation.DrawOrderTimeline"]=gh;gh.__name__=["workinman","display","spine","animation","DrawOrderTimeline"];gh.__interfaces__=[af];gh.prototype={get_frameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b;this.drawOrders[a]=c},apply:function(a,b,c){if(!(c<this.frames[0])){var c=c>=this.frames[this.frames.length-1]?this.frames.length-1:hb.binarySearch1(this.frames,c)-1,b=a.drawOrder,
a=a.slots,d=this.drawOrders[c],c=0;if(null==d)for(d=0;d<a.length;){var e=a[d];++d;b[c++]=e}else for(e=0;e<d.length;){var g=d[e];++e;b[c++]=a[g]}}},__class__:gh,__properties__:{get_frameCount:"get_frameCount"}};var hh=function(a){this.frames=Ba.allocFloat(a);this.events=[];for(var b=0;b<a;)b++,this.events.push(null)};h["workinman.display.spine.animation.EventTimeline"]=hh;hh.__name__=["workinman","display","spine","animation","EventTimeline"];hh.__interfaces__=[af];hh.prototype={get_frameCount:function(){return this.frames.length},
setFrame:function(a,b){this.frames[a]=b.time;this.events[a]=b},apply:function(a,b,c,d,e){if(null!=d){if(b>c)this.apply(a,b,Math.POSITIVE_INFINITY,d,e),b=-1;else if(b>=this.frames[this.get_frameCount()-1])return;if(!(c<this.frames[0])){if(b<this.frames[0])a=0;else{a=hb.binarySearch1(this.frames,b);for(b=this.frames[a];0<a&&!(this.frames[a-1]!=b);)a--}for(;a<this.get_frameCount()&&c>=this.frames[a];)d[d.length]=this.events[a],a++}}},__class__:hh,__properties__:{get_frameCount:"get_frameCount"}};var fh=
function(a){Xa.call(this,a);this.frames=Ba.allocFloat(a);this.frameVertices=Ba.allocFloatArray(a)};h["workinman.display.spine.animation.FfdTimeline"]=fh;fh.__name__=["workinman","display","spine","animation","FfdTimeline"];fh.__super__=Xa;fh.prototype=y(Xa.prototype,{setFrame:function(a,b,c){this.frames[a]=b;this.frameVertices[a]=c},apply:function(a,b,c,d,e){b=a.slots[this.slotIndex];if(b.get_attachment()==this.attachment&&(d=this.frames,!(c<d[0]))){var g=this.frameVertices,a=g[0].length,b=b.attachmentVertices;
b.length!=a&&(e=1);if(c>=d[d.length-1])if(c=g[d.length-1],1>e)for(d=0;d<a;)g=d++,b[g]+=(c[g]-b[g])*e;else for(e=0;e<a;)d=e++,b[d]=c[d];else{var f=hb.binarySearch1(d,c),h=d[f],c=1-(c-h)/(d[f-1]-h),c=this.getCurvePercent(f-1,0>c?0:1<c?1:c),d=g[f-1],g=g[f];if(1>e)for(h=0;h<a;){var j=h++,f=d[j];b[j]+=(f+(g[j]-f)*c-b[j])*e}else for(e=0;e<a;)h=e++,f=d[h],b[h]=f+(g[h]-f)*c}}},__class__:fh});var eh=function(a){Xa.call(this,a);this.frames=Ba.allocFloat(a)};h["workinman.display.spine.animation.IkConstraintTimeline"]=
eh;eh.__name__=["workinman","display","spine","animation","IkConstraintTimeline"];eh.__super__=Xa;eh.prototype=y(Xa.prototype,{setFrame:function(a,b,c,d){a*=3;this.frames[a]=b;this.frames[a+1]=c;this.frames[a+2]=d},apply:function(a,b,c,d,e){if(!(c<this.frames[0]))if(a=a.ikConstraints[this.ikConstraintIndex],c>=this.frames[this.frames.length-3])a.mix+=(this.frames[this.frames.length-2]-a.mix)*e,a.bendDirection=Math.floor(this.frames[this.frames.length-1]);else{var b=hb.binarySearch(this.frames,c,3),
d=this.frames[b+-2],g=this.frames[b],c=1-(c-g)/(this.frames[b+-3]-g),c=this.getCurvePercent(Math.floor(b/3-1),0>c?0:1<c?1:c);a.mix+=(d+(this.frames[b+1]-d)*c-a.mix)*e;a.bendDirection=Math.floor(this.frames[b+-1])}},__class__:eh});var $e=function(){this.listeners=[]};h["workinman.display.spine.animation.Listeners"]=$e;$e.__name__=["workinman","display","spine","animation","Listeners"];$e.prototype={dispose:function(){this.listeners=null},add:function(a){if(null==a)throw new H("listener cannot be null.");
this.listeners[this.listeners.length]=a},remove:function(a){if(null==a)throw new H("listener cannot be null.");this.listeners.splice(this.listeners.indexOf(a),1)},invoke:function(a,b){for(var c=0,d=this.listeners;c<d.length;){var e=d[c];++c;e(a,b)}},__class__:$e};var bh=function(a){Xa.call(this,a);this.frames=Ba.allocFloat(2*a)};h["workinman.display.spine.animation.RotateTimeline"]=bh;bh.__name__=["workinman","display","spine","animation","RotateTimeline"];bh.__super__=Xa;bh.prototype=y(Xa.prototype,
{setFrame:function(a,b,c){a*=2;this.frames[a]=b;this.frames[a+1]=c},apply:function(a,b,c,d,e){if(!(c<this.frames[0])){a=a.bones[this.boneIndex];if(c>=this.frames[this.frames.length-2])d=a.get_data().rotation+this.frames[this.frames.length-1]-a.rotation;else{for(var d=hb.binarySearch(this.frames,c,2),b=this.frames[d-1],g=this.frames[d],c=1-(c-g)/(this.frames[d+-2]-g),c=this.getCurvePercent(Math.floor(d/2-1),0>c?0:1<c?1:c),d=this.frames[d+1]-b;180<d;)d-=360;for(;-180>d;)d+=360;d=a.get_data().rotation+
(b+d*c)-a.rotation}for(;180<d;)d-=360;for(;-180>d;)d+=360;a.rotation+=d*e}},__class__:bh});var ld=function(a){this.FRAME_Y=2;this.FRAME_X=1;this.PREV_FRAME_TIME=-3;Xa.call(this,a);this.frames=Ba.allocFloat(a)};h["workinman.display.spine.animation.TranslateTimeline"]=ld;ld.__name__=["workinman","display","spine","animation","TranslateTimeline"];ld.__super__=Xa;ld.prototype=y(Xa.prototype,{setFrame:function(a,b,c,d){a*=3;this.frames[a]=b;this.frames[a+1]=c;this.frames[a+2]=d},apply:function(a,b,c,d,
e){if(!(c<this.frames[0]))if(a=a.bones[this.boneIndex],c>=this.frames[this.frames.length-3])a.x+=(a.get_data().x+this.frames[this.frames.length-2]-a.x)*e,a.y+=(a.get_data().y+this.frames[this.frames.length-1]-a.y)*e;else{var b=hb.binarySearch(this.frames,c,3),d=this.frames[b-2],g=this.frames[b-1],f=this.frames[b],c=1-(c-f)/(this.frames[b+this.PREV_FRAME_TIME]-f),c=this.getCurvePercent(Math.floor(b/3-1),0>c?0:1<c?1:c);a.x+=(a.get_data().x+d+(this.frames[b+this.FRAME_X]-d)*c-a.x)*e;a.y+=(a.get_data().y+
g+(this.frames[b+this.FRAME_Y]-g)*c-a.y)*e}},__class__:ld});var ch=function(a){ld.call(this,a)};h["workinman.display.spine.animation.ScaleTimeline"]=ch;ch.__name__=["workinman","display","spine","animation","ScaleTimeline"];ch.__super__=ld;ch.prototype=y(ld.prototype,{apply:function(a,b,c,d,e){if(!(c<this.frames[0]))if(a=a.bones[this.boneIndex],c>=this.frames[this.frames.length-3])a.scaleX+=(a.get_data().scaleX*this.frames[this.frames.length-2]-a.scaleX)*e,a.scaleY+=(a.get_data().scaleY*this.frames[this.frames.length-
1]-a.scaleY)*e;else{var b=hb.binarySearch(this.frames,c,3),d=this.frames[b-2],g=this.frames[b-1],f=this.frames[b],c=1-(c-f)/(this.frames[b+this.PREV_FRAME_TIME]-f),c=this.getCurvePercent(Math.floor(b/3-1),0>c?0:1<c?1:c);a.scaleX+=(a.get_data().scaleX*(d+(this.frames[b+this.FRAME_X]-d)*c)-a.scaleX)*e;a.scaleY+=(a.get_data().scaleY*(g+(this.frames[b+this.FRAME_Y]-g)*c)-a.scaleY)*e}},__class__:ch});var dh=function(a){ld.call(this,a)};h["workinman.display.spine.animation.ShearTimeline"]=dh;dh.__name__=
["workinman","display","spine","animation","ShearTimeline"];dh.__super__=ld;dh.prototype=y(ld.prototype,{apply:function(a,b,c,d,e){if(!(c<this.frames[0]))if(a=a.bones[this.boneIndex],c>=this.frames[this.frames.length-3])a.shearX+=(a.get_data().shearX+this.frames[this.frames.length-2]-a.shearX)*e,a.shearY+=(a.get_data().shearY+this.frames[this.frames.length-1]-a.shearY)*e;else{var b=hb.binarySearch(this.frames,c,3),d=this.frames[b-2],g=this.frames[b-1],f=this.frames[b],c=Td.clamp(1-(c-f)/(this.frames[b+
this.PREV_FRAME_TIME]-f),0,1),c=this.getCurvePercent(Math.floor(b/3-1),c);a.shearX+=(a.get_data().shearX+(d+(this.frames[b+this.FRAME_X]-d)*c)-a.shearX)*e;a.shearY+=(a.get_data().shearY+(g+(this.frames[b+this.FRAME_Y]-g)*c)-a.shearY)*e}},__class__:dh});var kh=function(){this.timeScale=this.mix=1;this.lastTime=-1;this.time=0};h["workinman.display.spine.animation.TrackEntry"]=kh;kh.__name__=["workinman","display","spine","animation","TrackEntry"];kh.prototype={dispose:function(){this.onEvent=this.onComplete=
this.onEnd=this.onStart=this.animation=this.previous=this.next=null},__class__:kh};var Yi=function(a,b){this.regions=[];this.pages=[];""!=a&&this.load(a,b)};h["workinman.display.spine.atlas.Atlas"]=Yi;Yi.__name__=["workinman","display","spine","atlas","Atlas"];Yi.prototype={load:function(a,b){if(null==b)throw new H("textureLoader cannot be null.");this.textureLoader=b;for(var c=new bj(a),d=Ba.allocString(4),e=null;;){var g=c.readLine();if(null==g)break;g=c.trim(g);if(0==g.length)e=null;else if(null==
e){e=new cj;e.name=g;2==c.readTuple(d)&&(e.width=B.parseInt(d[0]),e.height=B.parseInt(d[1]),c.readTuple(d));e.format=d[0];c.readTuple(d);e.minFilter=d[0];e.magFilter=d[1];var f=c.readValue();e.uWrap="clampToEdge";e.vWrap="clampToEdge";"x"==f?e.uWrap="repeat":"y"==f?e.vWrap="repeat":"xy"==f&&(e.uWrap=e.vWrap="repeat");b.loadPage(e,g);this.pages.push(e)}else{f=new Yf;f.name=g;f.page=e;f.rotate="true"==c.readValue();c.readTuple(d);var g=B.parseInt(d[0]),h=B.parseInt(d[1]);c.readTuple(d);var j=B.parseInt(d[0]),
i=B.parseInt(d[1]);f.u=g/e.width;f.v=h/e.height;f.rotate?(f.u2=(g+i)/e.width,f.v2=(h+j)/e.height):(f.u2=(g+j)/e.width,f.v2=(h+i)/e.height);f.x=g;f.y=h;f.width=Math.floor(Math.abs(j));f.height=Math.floor(Math.abs(i));4==c.readTuple(d)&&(f.splits=[B.parseInt(d[0]),B.parseInt(d[1]),B.parseInt(d[2]),B.parseInt(d[3])],4==c.readTuple(d)&&(f.pads=[B.parseInt(d[0]),B.parseInt(d[1]),B.parseInt(d[2]),B.parseInt(d[3])],c.readTuple(d)));f.originalWidth=B.parseInt(d[0]);f.originalHeight=B.parseInt(d[1]);c.readTuple(d);
f.offsetX=B.parseInt(d[0]);f.offsetY=B.parseInt(d[1]);f.index=B.parseInt(c.readValue());b.loadRegion(f);this.regions.push(f)}}},findRegion:function(a){for(var b=0,c=this.regions.length;b<c;){var d=b++;if(this.regions[d].name==a)return this.regions[d]}return null},__class__:Yi};var bj=function(a){this.index=0;this.lines=(new rc("[ \t]*((\r\n)|\r|\n)[ \t]*","g")).split(a)};h["workinman.display.spine.atlas.Reader"]=bj;bj.__name__=["workinman","display","spine","atlas","Reader"];bj.prototype={trim:function(a){return da.trim(a)},
readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw new H("Invalid line: "+a);return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw new H("Invalid line: "+b);for(var d=0,c=c+1;3>d;){var e=b.indexOf(",",c);if(-1==e)break;a[d]=this.trim(G.substr(b,c,e-c));c=e+1;d++}a[d]=this.trim(b.substring(c));return d+1},__class__:bj};var cj=function(){};
h["workinman.display.spine.atlas.AtlasPage"]=cj;cj.__name__=["workinman","display","spine","atlas","AtlasPage"];cj.prototype={__class__:cj};var Yf=function(){};h["workinman.display.spine.atlas.AtlasRegion"]=Yf;Yf.__name__=["workinman","display","spine","atlas","AtlasRegion"];Yf.prototype={__class__:Yf};var dj=function(){};h["workinman.display.spine.atlas.TextureLoader"]=dj;dj.__name__=["workinman","display","spine","atlas","TextureLoader"];dj.prototype={__class__:dj};var ej=function(){};h["workinman.display.spine.attachments.AttachmentLoader"]=
ej;ej.__name__=["workinman","display","spine","attachments","AttachmentLoader"];ej.prototype={__class__:ej};var nd=function(a){this.atlas=a};h["workinman.display.spine.attachments.AtlasAttachmentLoader"]=nd;nd.__name__=["workinman","display","spine","attachments","AtlasAttachmentLoader"];nd.__interfaces__=[ej];nd.nextPOT=function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;return(a|a>>16)+1};nd.prototype={newRegionAttachment:function(a,b,c){if(null==this.atlas)return null;a=this.atlas.findRegion(c);if(null==
a)throw new H("Region not found in atlas: "+c+" (region attachment: "+b+")");b=new ee(b);b.rendererObject=a;var c=a.page.width/nd.nextPOT(a.page.width),d=a.page.height/nd.nextPOT(a.page.height);b.setUVs(a.u*c,a.v*d,a.u2*c,a.v2*d,a.rotate);b.regionOffsetX=a.offsetX;b.regionOffsetY=a.offsetY;b.regionWidth=a.width;b.regionHeight=a.height;b.regionOriginalWidth=a.originalWidth;b.regionOriginalHeight=a.originalHeight;return b},newMeshAttachment:function(a,b,c){if(null==this.atlas)return null;a=this.atlas.findRegion(c);
if(null==a)throw new H("Region not found in atlas: "+c+" (mesh attachment: "+b+")");b=new ec(b);b.rendererObject=a;return b},newWeightedMeshAttachment:function(a,b,c){if(null==this.atlas)return null;a=this.atlas.findRegion(c);if(null==a)throw new H("Region not found in atlas: "+c+" (weighted mesh attachment: "+b+")");b=new de(b);b.rendererObject=a;var c=a.page.width/nd.nextPOT(a.page.width),d=a.page.height/nd.nextPOT(a.page.height);b.regionU=a.u*c;b.regionV=a.v*d;b.regionU2=a.u2*c;b.regionV2=a.v2*
d;b.regionRotate=a.rotate;b.regionOffsetX=a.offsetX;b.regionOffsetY=a.offsetY;b.regionWidth=a.width;b.regionHeight=a.height;b.regionOriginalWidth=a.originalWidth;b.regionOriginalHeight=a.originalHeight;return b},newBoundingBoxAttachment:function(a,b){return new re(b)},__class__:nd};var Qa=function(a){if(null==a)throw new H("name cannot be null.");this.name=a};h["workinman.display.spine.attachments.Attachment"]=Qa;Qa.__name__=["workinman","display","spine","attachments","Attachment"];Qa.prototype=
{dispose:function(){},__class__:Qa};var Xi=function(a,b){this.ordinal=a;this.name=b};h["workinman.display.spine.attachments.AttachmentType"]=Xi;Xi.__name__=["workinman","display","spine","attachments","AttachmentType"];Xi.prototype={__class__:Xi};var re=function(a){Qa.call(this,a);this.vertices=[]};h["workinman.display.spine.attachments.BoundingBoxAttachment"]=re;re.__name__=["workinman","display","spine","attachments","BoundingBoxAttachment"];re.__super__=Qa;re.prototype=y(Qa.prototype,{dispose:function(){Qa.prototype.dispose.call(this);
this.vertices=null},computeWorldVertices:function(a,b,c,d){for(;0<d.length;)d.pop();for(var a=a+c.get_worldX(),b=b+c.get_worldY(),e=c.get_a(),g=c.get_b(),f=c.get_c(),c=c.get_d(),h=this.vertices,j=0,i=h.length;j<i;){var Kd=j+1,k=h[j],l=h[Kd];d[j]=k*e+l*g+a;d[Kd]=k*f+l*c+b;j+=2}},__class__:re});var ec=function(a){this.r=this.g=this.b=this.a=1;Qa.call(this,a)};h["workinman.display.spine.attachments.MeshAttachment"]=ec;ec.__name__=["workinman","display","spine","attachments","MeshAttachment"];ec.__super__=
Qa;ec.prototype=y(Qa.prototype,{dispose:function(){Qa.prototype.dispose.call(this);this.region=this.worldVertices=this.rendererObject=this.triangles=this.regionUVs=this.uvs=this.vertices=null},updateUVs:function(){null==this.region&&(this.region=this.rendererObject);var a,b=this.regionUVs.length;if(null==this.uvs||this.uvs.length!=b)this.uvs=[];var c,d,e,g;null==this.region?(c=d=0,e=g=1):(c=this.region.u,d=this.region.v,e=this.region.u2-c,g=this.region.v2-d);var f=this.regionUVs;if(x.__instanceof(this.region,
Yf)&&x.__cast(this.region,Yf).rotate)for(a=0;a<b;)this.uvs[a]=c+f[a+1]*e,this.uvs[a+1]=d+g-f[a]*g,a+=2;else for(a=0;a<b;)this.uvs[a]=c+f[a]*e,this.uvs[a+1]=d+f[a+1]*g,a+=2},updateWorldVertices:function(a){var b=a.get_skeleton(),c=a.get_bone(),d=b.x+c.get_worldX(),b=b.y+c.get_worldY(),e=c.get_a(),g=c.get_b(),f=c.get_c(),c=c.get_d(),h=this.vertices,j=h.length;a.attachmentVertices.length==j&&(h=a.attachmentVertices);for(var a=[],i=0,Kd=0;Kd<j;){var k=h[i],l=h[i+1];a[Kd]=k*e+l*g+d;a[Kd+1]=k*f+l*c+b;i+=
2;Kd+=2}return a},__class__:ec});var ee=function(a){this.uvs=[];this.offset=[];this.scaleX=this.scaleY=this.r=this.g=this.b=this.a=1;Qa.call(this,a);this.offset=Ba.allocFloat(8);this.uvs=Ba.allocFloat(8)};h["workinman.display.spine.attachments.RegionAttachment"]=ee;ee.__name__=["workinman","display","spine","attachments","RegionAttachment"];ee.__super__=Qa;ee.prototype=y(Qa.prototype,{dispose:function(){Qa.prototype.dispose.call(this);this.rendererObject=null},setUVs:function(a,b,c,d,e){e?(this.uvs[2]=
a,this.uvs[3]=d,this.uvs[4]=a,this.uvs[5]=b,this.uvs[6]=c,this.uvs[7]=b,this.uvs[0]=c,this.uvs[1]=d):(this.uvs[0]=a,this.uvs[1]=d,this.uvs[2]=a,this.uvs[3]=b,this.uvs[4]=c,this.uvs[5]=b,this.uvs[6]=c,this.uvs[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,d=-this.height/2*this.scaleY+this.regionOffsetY*b,e=c+this.regionWidth*a,b=d+this.regionHeight*b,a=this.rotation*
Math.PI/180,g=Math.cos(a),f=Math.sin(a),a=c*g+this.x,c=c*f,h=d*g+this.y,d=d*f,j=e*g+this.x,e=e*f,g=b*g+this.y,b=b*f;this.offset[0]=a-d;this.offset[1]=h+c;this.offset[2]=a-b;this.offset[3]=g+c;this.offset[4]=j-b;this.offset[5]=g+e;this.offset[6]=j-d;this.offset[7]=h+e},computeWorldVertices:function(a,b,c,d){var a=a+c.get_worldX(),b=b+c.get_worldY(),e=c.get_a(),g=c.get_b(),f=c.get_c(),c=c.get_d(),h=this.offset[0],j=this.offset[1],i=this.offset[2],Kd=this.offset[3],k=this.offset[4],l=this.offset[5],
m=this.offset[6],n=this.offset[7];d[0]=h*e+j*g+a;d[1]=h*f+j*c+b;d[2]=i*e+Kd*g+a;d[3]=i*f+Kd*c+b;d[4]=k*e+l*g+a;d[5]=k*f+l*c+b;d[6]=m*e+n*g+a;d[7]=m*f+n*c+b},__class__:ee});var de=function(a){this.r=this.g=this.b=this.a=1;Qa.call(this,a)};h["workinman.display.spine.attachments.WeightedMeshAttachment"]=de;de.__name__=["workinman","display","spine","attachments","WeightedMeshAttachment"];de.__super__=Qa;de.prototype=y(Qa.prototype,{dispose:function(){Qa.prototype.dispose.call(this);this.rendererObject=
this.triangles=this.regionUVs=this.uvs=this.weights=this.bones=null},updateUVs:function(){var a=this.regionU2-this.regionU,b=this.regionV2-this.regionV,c,d=this.regionUVs.length;if(null==this.uvs||this.uvs.length!=d)this.uvs=[];if(this.regionRotate)for(c=0;c<d;)this.uvs[c]=this.regionU+this.regionUVs[c+1]*a,this.uvs[c+1]=this.regionV+b-this.regionUVs[c]*b,c+=2;else for(c=0;c<d;)this.uvs[c]=this.regionU+this.regionUVs[c]*a,this.uvs[c+1]=this.regionV+this.regionUVs[c+1]*b,c+=2},computeWorldVertices:function(a,
b,c,d){var e=c.get_skeleton().bones,g=this.weights,f=this.bones,h=0,j=0,i=0,k=0,l=f.length,m,n,t,r,o,s;if(0==c.attachmentVertices.length)for(;j<l;){n=m=0;for(c=f[j++]+j;j<c;)t=e[f[j]],r=g[i],o=g[i+1],s=g[i+2],m+=(r*t.get_a()+o*t.get_b()+t.get_worldX())*s,n+=(r*t.get_c()+o*t.get_d()+t.get_worldY())*s,j++,i+=3;d[h]=m+a;d[h+1]=n+b;h+=2}else for(var u=c.attachmentVertices;j<l;){n=m=0;for(c=f[j++]+j;j<c;)t=e[f[j]],r=g[i]+u[k],o=g[i+1]+u[k+1],s=g[i+2],m+=(r*t.get_a()+o*t.get_b()+t.get_worldX())*s,n+=(r*
t.get_c()+o*t.get_d()+t.get_worldY())*s,j++,i+=3,k+=2;d[h]=m+a;d[h+1]=n+b;h+=2}},__class__:de});var ih=function(a,b){this.prefix=a;this.pack=b};h["workinman.display.spine.platform.flambe.FlambeTextureLoader"]=ih;ih.__name__="workinman,display,spine,platform,flambe,FlambeTextureLoader".split(",");ih.__interfaces__=[dj];ih.prototype={loadPage:function(a,b){var c=this.pack.getTexture(this.prefix+Ua.removeFileExtension(b));a.rendererObject=c;a.width=c.get_width();a.height=c.get_height()},loadRegion:function(){},
__class__:ih};var lh=function(a,b,c){this._w=this._h=0;T.call(this,{originX:0,originY:0});this.meshAttachment=a;this.region=a.rendererObject;this.atlas=this.region.page.rendererObject;this.slot=b;this._flagRenderBoxes=c;a=this.region.rotate?this.region.height:this.region.width;b=this.region.rotate?this.region.width:this.region.height;this._w=a;this._h=b};h["workinman.display.spine.platform.flambe.MeshSprite"]=lh;lh.__name__="workinman,display,spine,platform,flambe,MeshSprite".split(",");lh.__super__=
T;lh.prototype=y(T.prototype,{dispose:function(){T.prototype.dispose.call(this);this.slot=this.atlas=this.region=this.meshAttachment=null},_draw:function(a){for(var b=this.meshAttachment.uvs,c=this.meshAttachment.triangles,d=this.worldVertices,e=0;e<c.length;){var g=2*c[e],f=d[g],h=d[g+1],j=b[g]*this.region.page.width,i=b[g+1]*this.region.page.height,g=2*c[e+1],k=d[g],l=d[g+1],m=b[g]*this.region.page.width,n=b[g+1]*this.region.page.height,g=2*c[e+2],t=d[g],r=d[g+1],o=b[g]*this.region.page.width,g=
b[g+1]*this.region.page.height;a.canvasCtx.save();a.canvasCtx.beginPath();a.canvasCtx.moveTo(f,h);a.canvasCtx.lineTo(k,l);a.canvasCtx.lineTo(t,r);a.canvasCtx.closePath();this._flagRenderBoxes&&(a.canvasCtx.strokeStyle="#00FF00",a.canvasCtx.stroke());a.canvasCtx.clip();var s=j*n+i*o+m*g-n*o-i*m-j*g;a.canvasCtx.transform((f*n+i*t+k*g-n*t-i*k-f*g)/s,(h*n+i*r+l*g-n*r-i*l-h*g)/s,(j*k+f*o+m*t-k*o-f*m-j*t)/s,(j*l+h*o+m*r-l*o-h*m-j*r)/s,(j*n*t+i*k*o+f*m*g-f*n*o-i*m*t-j*k*g)/s,(j*n*r+i*l*o+h*m*g-h*n*o-i*m*
r-j*l*g)/s);a.canvasCtx.drawImage(this.atlas.root.image,0,0);a.canvasCtx.restore();e+=3}},get_width:function(){return this.region.width},get_height:function(){return this.region.height},__class__:lh});var mh=function(a,b){this._w=this._h=0;T.call(this,{originX:0,originY:0});this.regionAttachment=a;this.region=a.rendererObject;this.atlas=this.region.page.rendererObject;this.slot=b;var c;c=this.region.rotate?this.region.height:this.region.width;var d;d=this.region.rotate?this.region.width:this.region.height;
this._w=c;this._h=d;this.rotation=-a.rotation;this.scaleX=a.scaleX*(a.width/this.region.originalWidth);this.scaleY=a.scaleY*(a.height/this.region.originalHeight);this.region.rotate&&(this.scaleY=a.scaleX*(a.width/this.region.originalWidth),this.scaleX=a.scaleY*(a.height/this.region.originalHeight));var e=-a.rotation*Math.PI/180,g=Math.cos(e),e=Math.sin(e),f=-a.width/2*Math.abs(a.scaleX),h=-a.height/2*Math.abs(a.scaleY),j=this.region.offsetX*this.scaleX,i=(this.region.originalHeight-this.region.height-
this.region.offsetY)*this.scaleY;0>a.scaleX&&(f=this.region.rotate?f-d*(a.width/this.region.originalWidth):a.width/2*Math.abs(a.scaleX));0>a.scaleY&&(h=this.region.rotate?h+c*(a.height/this.region.originalHeight):a.height/2*Math.abs(a.scaleY));this.region.rotate&&(this.rotation+=90,f+=d*(a.width*Math.abs(a.scaleX)/this.region.originalWidth));this.set_x(a.x+f*g-h*e+j*g-i*e);this.set_y(-a.y+f*e+h*g+j*e+i*g)};h["workinman.display.spine.platform.flambe.RegionSprite"]=mh;mh.__name__="workinman,display,spine,platform,flambe,RegionSprite".split(",");
mh.__super__=T;mh.prototype=y(T.prototype,{dispose:function(){T.prototype.dispose.call(this);this.slot=this.atlas=this.region=this.regionAttachment=null},_draw:function(a){a.ctx.drawSubTexture(this.atlas,0,0,this.region.x,this.region.y,this._w,this._h)},get_width:function(){return this.region.originalWidth},get_height:function(){return this.region.originalHeight},__class__:mh});var bf=function(a,b){null==b&&(b=!1);this.colorRegionBox=65280;this.colorBoundingBox=16711680;T.call(this,null);this._holder=
new T(null);be.yDown=!0;this.skeleton=new Si(a);this.skeleton.updateWorldTransform();this._sprites=new Lc;this._regions=new Lc;this._meshes=new Lc;this._weightedMeshes=new Lc;this._flagRenderBoxes=b;this.drawSprites(!0);this.addChild(this._holder)};h["workinman.display.spine.platform.flambe.SkeletonSprite"]=bf;bf.__name__="workinman,display,spine,platform,flambe,SkeletonSprite".split(",");bf.__super__=T;bf.prototype=y(T.prototype,{dispose:function(){null!=this._holder&&this.removeChild(this._holder);
T.prototype.dispose.call(this);null!=this.skeleton&&this.skeleton.dispose();this.skeleton=null;null!=this._holder&&this._holder.dispose();this._weightedMeshes=this._meshes=this._regions=this._sprites=this._holder=null},get_regions:function(){return this._regions},get_sprites:function(){return this._sprites},_draw:function(){this.drawSprites(!1)},drawSprites:function(a){for(var b=this._sprites.iterator();b.hasNext();)b.next().visible=!1;b=this.skeleton.drawOrder;a&&(b=this.skeleton.slots);for(var a=
0,c=b.length;a<c;){var d=a++,d=b[d];if(null!=d.get_attachment())if(B.is(d.get_attachment(),ee)){var e;e=x.__cast(d.get_attachment(),ee);if(null!=e){var g=this._sprites.h[e.__id__];if(null==g){var f=new mh(e,d),h=g=new cf;h.addChild(f);this._flagRenderBoxes&&this._renderBoxes(d,e,h);this._sprites.set(e,g);this._regions.set(e,f);this._holder.addChild(h)}this._holder.addChild(this._sprites.h[e.__id__]);f=d.get_bone();g.visible=!0;g.a=f.get_a();g.b=f.get_b();g.c=f.get_c();g.d=f.get_d();g.e=f.get_worldX();
g.f=f.get_worldY();g.alpha=this.skeleton.a*d.a*e.a;g=this.skeleton.g*d.g*e.g;f=this.skeleton.b*d.b*e.b;d="0x"+this.toHexColor(Math.floor(255*this.skeleton.r*d.r*e.r))+this.toHexColor(Math.floor(255*g))+this.toHexColor(Math.floor(255*f));this._regions.h[e.__id__].color=B.parseInt(d)}}else B.is(d.get_attachment(),ec)?(e=x.__cast(d.get_attachment(),ec),null!=e&&(g=this._sprites.h[e.__id__],null==g&&(f=new lh(e,d,this._flagRenderBoxes),h=g=new cf,h.addChild(f),this._sprites.set(e,g),this._meshes.set(e,
f),this._holder.addChild(h)),this._holder.addChild(this._sprites.h[e.__id__]),f=e.updateWorldVertices(d,!0),this._meshes.h[e.__id__].worldVertices=f,g.visible=!0,g.alpha=this.skeleton.a*d.a*e.a)):B.is(d.get_attachment(),de)&&(e=x.__cast(d.get_attachment(),de),null!=e&&(g=this._sprites.h[e.__id__],null==g&&(f=new nh(e,d),h=g=new cf,h.addChild(f),this._sprites.set(e,g),this._weightedMeshes.set(e,f),this._holder.addChild(h)),f=Ba.allocFloat(e.uvs.length),e.computeWorldVertices(this.skeleton.x,this.skeleton.y,
d,f),this._weightedMeshes.h[e.__id__].worldVertices=f,this._holder.addChild(this._sprites.h[e.__id__]),g.visible=!0,g.alpha=this.skeleton.a*d.a*e.a))}},_renderBoxes:function(a,b,c){var d,e=new Xe,g;g=this.skeleton.flipX?-1:1;var f;f=this.skeleton.flipY?-1:1;g=a.get_bone().get_worldRotationX()*g*f;g=g*-Math.PI/180;f=0;for(var h=this.skeleton.slots.length;f<h;){var j=f++,i=this.skeleton.slots[j];if(null!=this.skeleton.get_data().defaultSkin.get_attachments()[j])for(j=this.skeleton.get_data().defaultSkin.get_attachments()[j].iterator();j.hasNext();){var k=
j.next(),l;try{l=x.__cast(k,re)}catch(m){l=null}if(null!=l&&l.name==b.name){var k=0,n=l.vertices.length;e.vertices.splice(l.vertices.length,e.vertices.length-l.vertices.length);for(l.computeWorldVertices(this.skeleton.x,this.skeleton.y,i.get_bone(),e.vertices);k<n;){var t=k;d=k+2;k==n-2&&(d=0);var r=e.vertices[t]-i.get_bone().get_worldX(),t=e.vertices[t+1]-i.get_bone().get_worldY(),o=e.vertices[d]-i.get_bone().get_worldX();d=e.vertices[d+1]-i.get_bone().get_worldY();var s=r,u=t,r=Math.cos(g)*s-Math.sin(g)*
u,t=Math.sin(g)*s+Math.cos(g)*u,s=o,u=d,o=Math.cos(g)*s-Math.sin(g)*u;d=Math.sin(g)*s+Math.cos(g)*u;s=Math.abs(Math.sqrt((r-o)*(r-o)+(t-d)*(t-d)));o=180*Math.atan2(d-t,o-r)/Math.PI-90;d=new Fa({color:this.colorBoundingBox,sizeX:5,sizeY:Math.floor(s)});d.set_x(r);d.set_y(t);d.rotation=o;c.addChild(d);k+=2}}}}e=new Xe;b.computeWorldVertices(this.skeleton.x,this.skeleton.y,a.get_bone(),e.vertices);b=0;for(l=e.vertices.length;b<l;)h=b,j=b+2,b==l-2&&(j=0),f=e.vertices[h]-a.get_bone().get_worldX(),h=e.vertices[h+
1]-a.get_bone().get_worldY(),i=e.vertices[j]-a.get_bone().get_worldX(),j=e.vertices[j+1]-a.get_bone().get_worldY(),k=f,n=h,f=Math.cos(g)*k-Math.sin(g)*n,h=Math.sin(g)*k+Math.cos(g)*n,k=i,n=j,i=Math.cos(g)*k-Math.sin(g)*n,j=Math.sin(g)*k+Math.cos(g)*n,0>a.get_bone().get_worldScaleX()&&(h*=-1,j*=-1),k=Math.abs(Math.sqrt((f-i)*(f-i)+(h-j)*(h-j))),i=180*Math.atan2(j-h,i-f)/Math.PI-90,j=new Fa({color:this.colorRegionBox,sizeX:2,sizeY:Math.floor(k)}),j.set_x(f),j.set_y(h),j.rotation=i,c.addChild(j),b+=
2},toHexColor:function(a){a=Math.max(0,Math.min(a,255));return"0123456789ABCDEF".charAt(Math.floor((a-a%16)/16))+"0123456789ABCDEF".charAt(Math.floor(a%16))},__class__:bf,__properties__:y(T.prototype.__properties__,{get_sprites:"get_sprites",get_regions:"get_regions"})});var jh=function(a,b){null==b&&(b=!1);bf.call(this,a,b)};h["workinman.display.spine.platform.flambe.SkeletonAnimation"]=jh;jh.__name__="workinman,display,spine,platform,flambe,SkeletonAnimation".split(",");jh.__super__=bf;jh.prototype=
y(bf.prototype,{__class__:jh});var aj=function(a){this.regions=[];this.polygonPool=[];this.polygons=[];this._renderer=a};h["workinman.display.spine.platform.flambe.SkeletonRegions"]=aj;aj.__name__="workinman,display,spine,platform,flambe,SkeletonRegions".split(",");aj.prototype={dispose:function(){this._renderer=this.regions=null;for(var a=0,b=this.polygons;a<b.length;){var c=b[a];++a;null!=c&&c.dispose()}this.polygons=null;a=0;for(b=this.polygonPool;a<b.length;)c=b[a],++a,null!=c&&c.dispose();this.polygonPool=
null},update:function(a,b,c,d){for(var e=a.x,g=a.y,f=0,h=this.polygons;f<h.length;){var j=h[f];++f;this.polygonPool.push(j)}this.polygons=[];this.regions=[];a=a.drawOrder;f=0;for(h=a.length;f<h;)if(j=f++,j=a[j],null!=j.get_attachment()&&B.is(j.get_attachment(),ee)){var i;i=x.__cast(j.get_attachment(),ee);i=this._renderer.get_regions().get(i);if(!1!=this._renderer.get_sprites().get(i.regionAttachment).visible&&j.get_attachment()==i.regionAttachment){this.regions.push(i.regionAttachment);j=0<this.polygonPool.length?
this.polygonPool.pop():new Xe;this.polygons.push(j);i.regionAttachment.computeWorldVertices(e,g,i.slot.get_bone(),j.vertices);i=0;for(var k=j.vertices.length;i<k;)j.vertices[i]*=c,i+=2;i=1;for(k=j.vertices.length;i<k;)j.vertices[i]*=d,i+=2}}this.regions.reverse();this.polygons.reverse();b&&this.aabbCompute()},aabbCompute:function(){for(var a=2147483647,b=2147483647,c=-2147483648,d=-2147483648,e=0,g=this.polygons.length;e<g;){for(var f=this.polygons[e].vertices,h=0,j=f.length;h<j;)var i=f[h],k=f[h+
1],a=Math.min(a,i),b=Math.min(b,k),c=Math.max(c,i),d=Math.max(d,k),h=h+2;e++}this.minX=a;this.minY=b;this.maxX=c;this.maxY=d},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},containsPoint:function(a,b){for(var c=0,d=this.polygons.length;c<d;){if(this.polygons[c].containsPoint(a,b))return this.regions[c];c++}return null},__class__:aj};var nh=function(a,b){this._w=this._h=0;T.call(this,{originX:0,originY:0});this.meshAttachment=a;this.region=a.rendererObject;
this.atlas=this.region.page.rendererObject;this.slot=b;var c;c=this.region.rotate?this.region.height:this.region.width;var d;d=this.region.rotate?this.region.width:this.region.height;this._w=c;this._h=d};h["workinman.display.spine.platform.flambe.WeightedMeshSprite"]=nh;nh.__name__="workinman,display,spine,platform,flambe,WeightedMeshSprite".split(",");nh.__super__=T;nh.prototype=y(T.prototype,{dispose:function(){T.prototype.dispose.call(this);this.slot=this.atlas=this.region=this.meshAttachment=
null},_draw:function(a){for(var b=this.meshAttachment.uvs,c=this.meshAttachment.triangles,d=this.worldVertices,e=0;e<c.length;){var g=2*c[e],f=d[g],h=d[g+1],j=b[g]*this.region.page.width,i=b[g+1]*this.region.page.height,g=2*c[e+1],k=d[g],l=d[g+1],m=b[g]*this.region.page.width,n=b[g+1]*this.region.page.height,g=2*c[e+2],t=d[g],r=d[g+1],o=b[g]*this.region.page.width,g=b[g+1]*this.region.page.height;a.canvasCtx.save();a.canvasCtx.beginPath();a.canvasCtx.moveTo(f,h);a.canvasCtx.lineTo(k,l);a.canvasCtx.lineTo(t,
r);a.canvasCtx.closePath();a.canvasCtx.stroke();a.canvasCtx.clip();var s=j*n+i*o+m*g-n*o-i*m-j*g;a.canvasCtx.transform((f*n+i*t+k*g-n*t-i*k-f*g)/s,(h*n+i*r+l*g-n*r-i*l-h*g)/s,(j*k+f*o+m*t-k*o-f*m-j*t)/s,(j*l+h*o+m*r-l*o-h*m-j*r)/s,(j*n*t+i*k*o+f*m*g-f*n*o-i*m*t-j*k*g)/s,(j*n*r+i*l*o+h*m*g-h*n*o-i*m*r-j*l*g)/s);a.canvasCtx.drawImage(this.atlas.root.image,0,0);a.canvasCtx.restore();e+=3}},get_width:function(){return this.region.width},get_height:function(){return this.region.height},__class__:nh});
var cf=function(){T.call(this,null);this.a=this.b=this.c=this.d=this.e=this.f=0;this.a=1;this.d=-1};h["workinman.display.spine.platform.flambe.WrapperSprite"]=cf;cf.__name__="workinman,display,spine,platform,flambe,WrapperSprite".split(",");cf.__super__=T;cf.prototype=y(T.prototype,{render:function(a){if(!1!=this.visible){this._matrix.set(this.a,this.c,-this.b,-this.d,this.e,this.f);null!=this.parent&&tc.multiply(this.parent.get_viewMatrix(),this._matrix,this._viewMatrix);a.ctx.save();1>this.alpha&&
a.ctx.multiplyAlpha(this.alpha);a.ctx.transform(this._matrix.m00,this._matrix.m10,this._matrix.m01,this._matrix.m11,this._matrix.m02,this._matrix.m12);a.ctx.save();a.ctx.translate(-this.get_width()*this.originX+this.get_offsetX(),-this.get_height()*this.originY+this.get_offsetY());this._draw(a);a.ctx.restore();for(var b=0,c=this.children.length;b<c;)this.children[b++].render(a,null);a.ctx.restore()}},__class__:cf});var te=h["workinman.input.GAMEPAD_TYPE"]={__ename__:["workinman","input","GAMEPAD_TYPE"],
__constructs__:["NONE","XBOX_360"]};te.NONE=["NONE",0];te.NONE.toString=k;te.NONE.__enum__=te;te.XBOX_360=["XBOX_360",1];te.XBOX_360.toString=k;te.XBOX_360.__enum__=te;var df=function(a,b){this.gamepad=a;this.type=b;this._buttons=new Bf;this._addButton(w.A);this._addButton(w.B);this._addButton(w.X);this._addButton(w.Y);this._addButton(w.RB);this._addButton(w.LB);this._addButton(w.RT);this._addButton(w.LT);this._addButton(w.DPAD_UP);this._addButton(w.DPAD_DOWN);this._addButton(w.DPAD_LEFT);this._addButton(w.DPAD_RIGHT);
this._addButton(w.LSTICK_UP);this._addButton(w.LSTICK_DOWN);this._addButton(w.LSTICK_LEFT);this._addButton(w.LSTICK_RIGHT);this._addButton(w.RSTICK_UP);this._addButton(w.RSTICK_DOWN);this._addButton(w.RSTICK_LEFT);this._addButton(w.RSTICK_RIGHT);this._addButton(w.START);this._addButton(w.SELECT);this._addButton(w.LSTICK_BUTTON);this._addButton(w.RSTICK_BUTTON)};h["workinman.input.GamepadBase"]=df;df.__name__=["workinman","input","GamepadBase"];df.prototype={setGamepad:function(a){this.gamepad=a},
update:function(){this.leftX=this.leftY=this.rightX=this.rightY=0},_normalizeAxis:function(a){a=Math.floor(100*a)/100;0.15>Math.abs(a)&&(a=0);return a},_addButton:function(a){this._buttons.set(a,!1);!1},_testButton:function(a,b){!1==this._buttons.get(a)&&b?(this._buttons.set(a,!0),!0,z.onControllerDown(a)):!0==this._buttons.get(a)&&!1==b&&(this._buttons.set(a,!1),!1,z.onControllerUp(a))},__class__:df};var Tg=function(a){df.call(this,a,te.XBOX_360);this.leftX=this.leftY=this.rightX=this.rightY=0};
h["workinman.input.GamepadXbox360"]=Tg;Tg.__name__=["workinman","input","GamepadXbox360"];Tg.__super__=df;Tg.prototype=y(df.prototype,{update:function(){df.prototype.update.call(this);this.leftX=this._normalizeAxis(this.gamepad.axes[0]);this.leftY=this._normalizeAxis(this.gamepad.axes[1]);this.rightX=this._normalizeAxis(this.gamepad.axes[2]);this.rightY=this._normalizeAxis(this.gamepad.axes[3]);this._testButton(w.A,x.__cast(this.gamepad.buttons[0],GamepadButton).pressed);this._testButton(w.B,x.__cast(this.gamepad.buttons[1],
GamepadButton).pressed);this._testButton(w.X,x.__cast(this.gamepad.buttons[2],GamepadButton).pressed);this._testButton(w.Y,x.__cast(this.gamepad.buttons[3],GamepadButton).pressed);this._testButton(w.LB,x.__cast(this.gamepad.buttons[4],GamepadButton).pressed);this._testButton(w.RB,x.__cast(this.gamepad.buttons[5],GamepadButton).pressed);this._testButton(w.LT,x.__cast(this.gamepad.buttons[6],GamepadButton).pressed);this._testButton(w.RT,x.__cast(this.gamepad.buttons[7],GamepadButton).pressed);this._testButton(w.SELECT,
x.__cast(this.gamepad.buttons[8],GamepadButton).pressed);this._testButton(w.START,x.__cast(this.gamepad.buttons[9],GamepadButton).pressed);this._testButton(w.LSTICK_BUTTON,this.gamepad.buttons[10].pressed);this._testButton(w.RSTICK_BUTTON,this.gamepad.buttons[11].pressed);this._testButton(w.DPAD_UP,x.__cast(this.gamepad.buttons[12],GamepadButton).pressed);this._testButton(w.DPAD_DOWN,x.__cast(this.gamepad.buttons[13],GamepadButton).pressed);this._testButton(w.DPAD_LEFT,x.__cast(this.gamepad.buttons[14],
GamepadButton).pressed);this._testButton(w.DPAD_RIGHT,x.__cast(this.gamepad.buttons[15],GamepadButton).pressed);this._testButton(w.LSTICK_LEFT,0>this.leftX);this._testButton(w.LSTICK_RIGHT,0<this.leftX);this._testButton(w.LSTICK_UP,0>this.leftY);this._testButton(w.LSTICK_DOWN,0<this.leftY);this._testButton(w.RSTICK_LEFT,0>this.rightX);this._testButton(w.RSTICK_RIGHT,0<this.rightX);this._testButton(w.RSTICK_UP,0>this.rightY);this._testButton(w.RSTICK_DOWN,0<this.rightY)},__class__:Tg});var w=h["workinman.input.INPUT_CONTROLLER"]=
{__ename__:["workinman","input","INPUT_CONTROLLER"],__constructs__:"A,B,X,Y,DPAD_UP,DPAD_DOWN,DPAD_RIGHT,DPAD_LEFT,LB,RB,LT,RT,START,SELECT,LSTICK_UP,LSTICK_DOWN,LSTICK_RIGHT,LSTICK_LEFT,RSTICK_UP,RSTICK_DOWN,RSTICK_RIGHT,RSTICK_LEFT,LSTICK_BUTTON,RSTICK_BUTTON".split(",")};w.A=["A",0];w.A.toString=k;w.A.__enum__=w;w.B=["B",1];w.B.toString=k;w.B.__enum__=w;w.X=["X",2];w.X.toString=k;w.X.__enum__=w;w.Y=["Y",3];w.Y.toString=k;w.Y.__enum__=w;w.DPAD_UP=["DPAD_UP",4];w.DPAD_UP.toString=k;w.DPAD_UP.__enum__=
w;w.DPAD_DOWN=["DPAD_DOWN",5];w.DPAD_DOWN.toString=k;w.DPAD_DOWN.__enum__=w;w.DPAD_RIGHT=["DPAD_RIGHT",6];w.DPAD_RIGHT.toString=k;w.DPAD_RIGHT.__enum__=w;w.DPAD_LEFT=["DPAD_LEFT",7];w.DPAD_LEFT.toString=k;w.DPAD_LEFT.__enum__=w;w.LB=["LB",8];w.LB.toString=k;w.LB.__enum__=w;w.RB=["RB",9];w.RB.toString=k;w.RB.__enum__=w;w.LT=["LT",10];w.LT.toString=k;w.LT.__enum__=w;w.RT=["RT",11];w.RT.toString=k;w.RT.__enum__=w;w.START=["START",12];w.START.toString=k;w.START.__enum__=w;w.SELECT=["SELECT",13];w.SELECT.toString=
k;w.SELECT.__enum__=w;w.LSTICK_UP=["LSTICK_UP",14];w.LSTICK_UP.toString=k;w.LSTICK_UP.__enum__=w;w.LSTICK_DOWN=["LSTICK_DOWN",15];w.LSTICK_DOWN.toString=k;w.LSTICK_DOWN.__enum__=w;w.LSTICK_RIGHT=["LSTICK_RIGHT",16];w.LSTICK_RIGHT.toString=k;w.LSTICK_RIGHT.__enum__=w;w.LSTICK_LEFT=["LSTICK_LEFT",17];w.LSTICK_LEFT.toString=k;w.LSTICK_LEFT.__enum__=w;w.RSTICK_UP=["RSTICK_UP",18];w.RSTICK_UP.toString=k;w.RSTICK_UP.__enum__=w;w.RSTICK_DOWN=["RSTICK_DOWN",19];w.RSTICK_DOWN.toString=k;w.RSTICK_DOWN.__enum__=
w;w.RSTICK_RIGHT=["RSTICK_RIGHT",20];w.RSTICK_RIGHT.toString=k;w.RSTICK_RIGHT.__enum__=w;w.RSTICK_LEFT=["RSTICK_LEFT",21];w.RSTICK_LEFT.toString=k;w.RSTICK_LEFT.__enum__=w;w.LSTICK_BUTTON=["LSTICK_BUTTON",22];w.LSTICK_BUTTON.toString=k;w.LSTICK_BUTTON.__enum__=w;w.RSTICK_BUTTON=["RSTICK_BUTTON",23];w.RSTICK_BUTTON.toString=k;w.RSTICK_BUTTON.__enum__=w;var Ei=function(a,b,c,d){this.type=a;this._keys=[];this._virtual=[];this._controller=[];this._fireDelegate=b;this._virtualTestDelegate=c;this._controllerTestDelegate=
d;this._pointer=null;this.fresh=this.down=!1};h["workinman.input.InputTracker"]=Ei;Ei.__name__=["workinman","input","InputTracker"];Ei.prototype={setKeys:function(a,b,c){if(null!=a)for(var d=0;d<a.length;){var e=a[d];++d;this._keys.push(e)}if(null!=b)for(a=0;a<b.length;)d=b[a],++a,this._virtual.push(d);if(null!=c)for(b=0;b<c.length;)a=c[b],++b,this._controller.push(a)},updateStatus:function(){this.fresh=!1;this.down?!1==this._isDown()&&(this.down=!1,this._fireDelegate(this.type,!1)):this._isDown()&&
(this.fresh=this.down=!0,this._fireDelegate(this.type,!0))},_isDown:function(){for(var a=0,b=this._keys;a<b.length;){var c=b[a];++a;if(I._platform.getKeyboard().isDown(c))return!0}a=0;for(b=this._virtual;a<b.length;)if(c=b[a],++a,this._virtualTestDelegate(c))return!0;a=0;for(b=this._controller;a<b.length;)if(c=b[a],++a,this._controllerTestDelegate(c))return!0;return null!=this._pointer&&this._pointer.down?!0:!1},__class__:Ei};var ab=h["workinman.input.PHASE"]={__ename__:["workinman","input","PHASE"],
__constructs__:["DOWN","MOVED","STOPPED","UP"]};ab.DOWN=["DOWN",0];ab.DOWN.toString=k;ab.DOWN.__enum__=ab;ab.MOVED=["MOVED",1];ab.MOVED.toString=k;ab.MOVED.__enum__=ab;ab.STOPPED=["STOPPED",2];ab.STOPPED.toString=k;ab.STOPPED.__enum__=ab;ab.UP=["UP",3];ab.UP.toString=k;ab.UP.__enum__=ab;var Sg=function(a,b){this._success=a;this._result=aa.request();this._line1=dc.request();this._line2=dc.request();null!=b&&this._result.toPoint(b)};h["workinman.math.InterceptResult"]=Sg;Sg.__name__=["workinman","math",
"InterceptResult"];Sg.prototype={set_success:function(a){return this._success=a},set_result:function(a){null==a?this._result.to(0,0):this._result.toPoint(a);return this._result},__class__:Sg,__properties__:{set_result:"set_result",set_success:"set_success"}};var Td=function(){};h["workinman.math.WMMath"]=Td;Td.__name__=["workinman","math","WMMath"];Td.sign=function(a){return 0>a?-1:1};Td.distBetweenPoints=function(a,b){return Math.abs(Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y)))};Td.clamp=
function(a,b,c,d){null==d&&(d=!1);d?a>c?a=b:a<b&&(a=c):a>c?a=c:a<b&&(a=b);return a};var fc=h["workinman.math.Side"]={__ename__:["workinman","math","Side"],__constructs__:["TOP","RIGHT","BOTTOM","LEFT"]};fc.TOP=["TOP",0];fc.TOP.toString=k;fc.TOP.__enum__=fc;fc.RIGHT=["RIGHT",1];fc.RIGHT.toString=k;fc.RIGHT.__enum__=fc;fc.BOTTOM=["BOTTOM",2];fc.BOTTOM.toString=k;fc.BOTTOM.__enum__=fc;fc.LEFT=["LEFT",3];fc.LEFT.toString=k;fc.LEFT.__enum__=fc;var od=function(){};h["workinman.math.WMRectangle"]=od;od.__name__=
["workinman","math","WMRectangle"];od.__interfaces__=[Sf];od.request=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);return ia.requestObject(od).init(a,b,c,d)};od.fromRectangle=function(a){return od.request(a.x,a.y,a.width,a.height)};od.__super__=bb;od.prototype=y(bb.prototype,{create:function(){this._workLine=null},init:function(a,b,c,d){this._x=a;this._y=b;this._width=c;this._height=d;return this},dispose:function(){null!=this._workLine&&this._workLine.dispose();this._workLine=
null;bb.prototype.dispose.call(this)},_getWorkLine:function(){null==this._workLine&&(this._workLine=dc.request());return this._workLine},get_x:function(){return this._x},set_x:function(a){return this._x=a},get_y:function(){return this._y},set_y:function(a){return this._y=a},get_top:function(){return this._y},set_top:function(a){return this._y=a},get_left:function(){return this._x},set_left:function(a){return this._x=a},get_width:function(){return this._width},set_width:function(a){return this._width=
a},get_height:function(){return this._height},set_height:function(a){return this._height=a},get_bottom:function(){return this._y+this._height},set_bottom:function(a){this._y=a-this._height;return this.get_bottom()},get_right:function(){return this._x+this._width},set_right:function(a){this._x=a-this._width;return this.get_right()},get_centerX:function(){return this._x+this._width/2},set_centerX:function(a){this._x=a-this._width/2;return this.get_centerX()},get_centerY:function(){return this._y+this._height/
2},set_centerY:function(a){this._y=a-this._height/2;return this.get_centerY()},copy:function(){return od.request(this._x,this._y,this._width,this._height)},contains:function(a,b){return a<this.get_left()||a>this.get_right()||b>this.get_bottom()||b<this.get_top()?!1:!0},toXY:function(a,b){this.set_x(a);this.set_y(b)},toWH:function(a,b){this.set_width(a);this.set_height(b)},toXYWH:function(a,b,c,d){this.toXY(a,b);this.toWH(c,d)},containsPoint:function(a){return this.contains(a.x,a.y)},intersects:function(a){return this.get_left()<
a.get_right()&&this.get_right()>a.get_left()&&this.get_top()<a.get_bottom()&&this.get_bottom()>a.get_top()},intersection:function(a){var b=od.request();if(this.intersects(a)){b.set_x(this.get_left()>a.get_left()?this.get_left():a.get_left());b.set_y(this.get_top()>a.get_top()?this.get_top():a.get_top());var c;c=this.get_right()<a.get_right()?this.get_right():a.get_right();a=this.get_bottom()<a.get_bottom()?this.get_bottom():a.get_bottom();b.set_width(c-b.get_x());b.set_height(a-b.get_y())}return b},
_setSideLine:function(a){this._getWorkLine();switch(a[1]){case 0:this._workLine.toFloats(this.get_left(),this.get_top(),this.get_right(),this.get_top());break;case 1:this._workLine.toFloats(this.get_right(),this.get_top(),this.get_right(),this.get_bottom());break;case 2:this._workLine.toFloats(this.get_left(),this.get_bottom(),this.get_right(),this.get_bottom());break;case 3:this._workLine.toFloats(this.get_left(),this.get_top(),this.get_left(),this.get_bottom())}},sideLineIntercept:function(a,b,
c){null==this._workLine?(this._setSideLine(b),null):this._setSideLine(b);return this._workLine.testLineSegmentIntercept(a,!1,c)},toString:function(){return"{ WMRectangle x: "+this._x+" y: "+this._y+" width: "+this._width+" height: "+this._height+" }"},__class__:od,__properties__:y(bb.prototype.__properties__,{set_centerY:"set_centerY",get_centerY:"get_centerY",set_centerX:"set_centerX",get_centerX:"get_centerX",set_right:"set_right",get_right:"get_right",set_bottom:"set_bottom",get_bottom:"get_bottom",
set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_left:"set_left",get_left:"get_left",set_top:"set_top",get_top:"get_top",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"})});var fj=function(){this._caches=new sa;this._emptyParams=[]};h["workinman.pooling.CacheManager"]=fj;fj.__name__=["workinman","pooling","CacheManager"];fj.prototype={dispose:function(){for(var a=this._caches.iterator();a.hasNext();)a.next().dispose();this._emptyParams=this._caches=
null},addCache:function(a,b,c,d){null==d&&(d=0);b=new gj(b,this._emptyParams,c,d);this._caches.set(a,b);b},processFill:function(a){for(var b=this._caches.iterator();b.hasNext();)if(!1==b.next().fillCache(a))return!1;return!0},requestElement:function(a){return this._caches.get(a).requestElement()},__class__:fj};var gj=function(a,b,c,d){this._cache=[];this._initFill=c;this._type=a;this._emptyParams=b;this._totalFill=0;this._maxFill=d};h["workinman.pooling.ElementCache"]=gj;gj.__name__=["workinman",
"pooling","ElementCache"];gj.prototype={dispose:function(){for(;0<this._cache.length;)this._cache.pop().destroy();this._emptyParams=this._type=this._cache=null},fillCache:function(a){for(var b;this._cache.length<this._initFill;)if(this._totalFill++,b=xa.createInstance(this._type,this._emptyParams),b.setReturnFunction(n(this,this.returnFunction)),b.dispose(),0<a&&0>=a--)return!1;return!0},returnFunction:function(a){null==this._cache?a.destroy():this._cache.push(a)},requestElement:function(){var a;
if(0<this._cache.length)a=this._cache.pop();else if(1>this._maxFill||this._totalFill<this._maxFill)this._totalFill++,a=xa.createInstance(this._type,this._emptyParams),a.setReturnFunction(n(this,this.returnFunction));else return null;return a},__class__:gj};var Vd=function(){};h["workinman.pooling.ICacheableElement"]=Vd;Vd.__name__=["workinman","pooling","ICacheableElement"];Vd.prototype={__class__:Vd};var Uj=function(){};h["workinman.random.SeededRandom"]=Uj;Uj.__name__=["workinman","random","SeededRandom"];
Uj.prototype={set_seed:function(a){0==a&&(a=1);return this.seed=a},_randomInt:function(){return this.set_seed(16807*this.seed%2147483647)&1073741823},random:function(){return this._randomInt()/1073741823},__class__:Uj,__properties__:{set_seed:"set_seed"}};var Gi=function(a){this.data={version:"-1"};this.id=a};h["workinman.saving.WMSharedObject"]=Gi;Gi.__name__=["workinman","saving","WMSharedObject"];Gi.prototype={dispose:function(){this.id=this.data=null},flush:function(){window.localStorage.setItem(this.id,
vc.run(this.data))},__class__:Gi};var Ug=function(a,b,c){this.id=a;this._playback=b;this._completeListener=this._playback.get_complete().watch(n(this,this._onCompleteEvent));this._complete=c;this.disposed=this.isComplete=!1};h["workinman.sound.PlaybackDef"]=Ug;Ug.__name__=["workinman","sound","PlaybackDef"];Ug.prototype={_onCompleteEvent:function(a){!1!=a&&(this.isComplete=!0)},dispose:function(){if(!0!=this.disposed&&(this.disposed=!0,this._completeListener.dispose(),this._completeListener=null,
this._playback.dispose(),this.id=this._playback=null,null!=this._complete)){var a=this._complete;this._complete=null;a()}},__class__:Ug};var Vj=function(){};h["workinman.sound.VOQueue"]=Vj;Vj.__name__=["workinman","sound","VOQueue"];Vj.prototype={dispose:function(){this.localization=this.id=this.call=null},__class__:Vj};var s=function(){};h["workinman.tween.Ease"]=s;s.__name__=["workinman","tween","Ease"];s.linear=function(a,b,c,d){return c*a/d+b};s.inQuad=function(a,b,c,d){return c*(a/=d)*a+b};s.outQuad=
function(a,b,c,d){return-c*(a/=d)*(a-2)+b};s.inOutQuad=function(a,b,c,d){return 1>(a/=d/2)?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b};s.inExpo=function(a,b,c,d){return 0==a?b:c*Math.pow(2,10*(a/d-1))+b};s.outExpo=function(a,b,c,d){return a==d?b+c:c*(-Math.pow(2,-10*a/d)+1)+b};s.inOutExpo=function(a,b,c,d){return 0==a?b:a==d?b+c:1>(a/=d/2)?c/2*Math.pow(2,10*(a-1))+b:c/2*(-Math.pow(2,-10*--a)+2)+b};s.outElastic=function(a,b,c,d){if(0==a)return b;if(1==(a/=d))return b+c;var e=0.3*d,g=e/4;return c*Math.pow(2,-10*
a)*Math.sin((a*d-g)*2*Math.PI/e)+c+b};s.inBack=function(a,b,c,d){return c*(a/=d)*a*(2.70158*a-1.70158)+b};s.outBack=function(a,b,c,d){return c*((a=a/d-1)*a*(2.70158*a+1.70158)+1)+b};s.inOutBack=function(a,b,c,d){var e=1.70158;return 1>(a/=d/2)?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b};s.outBounce=function(a,b,c,d){return 0.36363636363636365>(a/=d)?c*7.5625*a*a+b:0.7272727272727273>a?c*(7.5625*(a-=0.5454545454545454)*a+0.75)+b:0.9090909090909091>a?c*(7.5625*(a-=0.8181818181818182)*
a+0.9375)+b:c*(7.5625*(a-=0.9545454545454546)*a+0.984375)+b};s.inQuart=function(a,b,c,d){return c*(a/=d)*a*a*a+b};var ma=function(){};h["workinman.tween.TweenUtils"]=ma;ma.__name__=["workinman","tween","TweenUtils"];ma.easeFadeIn=function(a,b,c,d){null==d&&(d=0);null==c&&(c=!0);c&&(a.visible=!0,a.alpha=0);return b.tween({target:a,duration:0.3,overwrite:!0,ease:s.inQuad,delay:d},{alpha:1})};ma.easeFadeOut=function(a,b,c,d){null==d&&(d=0);null==c&&(c=!0);c&&(a.visible=!0,a.alpha=1);return b.tween({target:a,
duration:0.3,overwrite:!0,ease:s.outQuad,delay:d},{alpha:0})};ma.easeBounceIn=function(a,b,c,d){null==d&&(d=0);null==c&&(c=!0);c&&(a.visible=!0,a.set_scale(0.1),a.alpha=0);b.tween({target:a,duration:0.15,overwrite:!0,ease:s.outQuad,delay:d},{scale:1.1,alpha:1});return b.tween({target:a,duration:0.15,ease:s.inQuad},{scale:1})};ma.easeBounceOut=function(a,b,c,d){null==d&&(d=0);null==c&&(c=!1);c&&(a.visible=!0,a.set_scale(1),a.alpha=1);b.tween({target:a,duration:0.15,overwrite:!0,ease:s.outQuad,delay:d},
{scale:1.1});return b.tween({target:a,duration:0.15,ease:s.inQuad},{scale:0.1,alpha:0})};var Ii=function(a){this.target=a;this._threads=[]};h["workinman.tween.data.ObjectTracker"]=Ii;Ii.__name__=["workinman","tween","data","ObjectTracker"];Ii.prototype={dispose:function(){if(null!=this.target){this.target=null;for(var a=0,b=this._threads;a<b.length;){var c=b[a];++a;c.dispose()}this._threads=null}},update:function(a){for(var b=this._threads.length;0<b--;){var c=this._threads[b];c.update(a);if(null==
this._threads)break;c.get_isComplete()&&(c.dispose(),this._threads.splice(b,1))}},get_isComplete:function(){return null==this._threads||1>this._threads.length},stopThread:function(a){for(var b=this._threads.length;0<b--;)if(this._threads[b].id==a){this._threads[b].dispose();this._threads.splice(b,1);break}},queueStep:function(a,b){for(var c=null,d=0,e=this._threads;d<e.length;){var g=e[d];++d;if(g.id==b){c=g;break}}null==c&&(c=new hj(b),this._threads.push(c));c.queueStep(a)},__class__:Ii,__properties__:{get_isComplete:"get_isComplete"}};
var ij=function(a,b){this.name=a;this.origin=0;this.dest=b};h["workinman.tween.data.PropertyReference"]=ij;ij.__name__=["workinman","tween","data","PropertyReference"];ij.prototype={dispose:function(){this.name=null},__class__:ij};var hj=function(a){this.id=a;this._tweens=[]};h["workinman.tween.data.ThreadQueue"]=hj;hj.__name__=["workinman","tween","data","ThreadQueue"];hj.prototype={dispose:function(){if(null!=this.id){this.id=null;for(var a=0,b=this._tweens;a<b.length;){var c=b[a];++a;c.dispose()}this._tweens=
null}},get_isComplete:function(){return null==this._tweens||1>this._tweens.length},update:function(a){if(!this.get_isComplete()){var b=this._tweens[0],a=b.update(a);b.get_isComplete()&&null!=this._tweens&&(b.dispose(),this._tweens.shift(),this.update(a))}},queueStep:function(a){this._tweens.push(a)},__class__:hj,__properties__:{get_isComplete:"get_isComplete"}};var Hi=function(a,b){this._properties=[];for(var c=0,d=r.fields(b);c<d.length;){var e=d[c];++c;this._properties.push(new ij(e,r.field(b,e)))}this._target=
a.target;this._easeFunction=a.ease;this._duration=a.duration;this._postDelay=this._delay=0;this._completionHandler=null;this._progress=0;this._started=!1;null!=a.delay&&(this._delay=a.delay);null!=a.postDelay&&(this._postDelay=a.postDelay);null!=a.complete&&(this._completionHandler=a.complete)};h["workinman.tween.data.TweenStep"]=Hi;Hi.__name__=["workinman","tween","data","TweenStep"];Hi.prototype={dispose:function(){if(null!=this._target){this._target=null;for(var a=0,b=this._properties;a<b.length;){var c=
b[a];++a;c.dispose()}this._completionHandler=this._easeFunction=this._properties=null}},update:function(a){if(0<this._delay){this._delay-=a;if(0<this._delay)return 0;a=-1*this._delay}if(!1==this._started){this._started=!0;for(var b=0,c=this._properties;b<c.length;){var d=c[b];++b;Object.prototype.hasOwnProperty.call(this._target,d.name)?d.origin=r.field(this._target,d.name):null!=r.getProperty(this._target,d.name)&&(d.origin=r.getProperty(this._target,d.name))}}if(this._progress<this._duration)if(this._progress+=
a,this._progress>=this._duration){a=this._duration-this._progress;this._progress=this._duration;b=0;for(c=this._properties;b<c.length;)d=c[b],++b,r.setProperty(this._target,d.name,d.dest)}else{a=0;for(b=this._properties;a<b.length;)c=b[a],++a,r.setProperty(this._target,c.name,this._easeFunction(this._progress,c.origin,c.dest-c.origin,this._duration));return 0}this._postDelay-=a;if(0>=this._postDelay)null!=this._completionHandler&&(a=this._completionHandler,this._completionHandler=null,a());else return 0;
return-1*this._postDelay},get_isComplete:function(){return this._progress>=this._duration&&0>this._postDelay&&null==this._completionHandler},onComplete:function(a){this._completionHandler=a;return this},__class__:Hi,__properties__:{get_isComplete:"get_isComplete"}};var Ga=h["workinman.ui._Button.ButtonState"]={__ename__:["workinman","ui","_Button","ButtonState"],__constructs__:["_STATE_UP","_STATE_DOWN","_STATE_OVER","_STATE_CLICK"]};Ga._STATE_UP=["_STATE_UP",0];Ga._STATE_UP.toString=k;Ga._STATE_UP.__enum__=
Ga;Ga._STATE_DOWN=["_STATE_DOWN",1];Ga._STATE_DOWN.toString=k;Ga._STATE_DOWN.__enum__=Ga;Ga._STATE_OVER=["_STATE_OVER",2];Ga._STATE_OVER.toString=k;Ga._STATE_OVER.__enum__=Ga;Ga._STATE_CLICK=["_STATE_CLICK",3];Ga._STATE_CLICK.toString=k;Ga._STATE_CLICK.__enum__=Ga;var ca=h["workinman.ui.CHANGE_TYPE"]={__ename__:["workinman","ui","CHANGE_TYPE"],__constructs__:["OPEN_BEGIN","OPEN_COMPLETE","CLOSE_BEGIN","CLOSE_COMPLETE"]};ca.OPEN_BEGIN=["OPEN_BEGIN",0];ca.OPEN_BEGIN.toString=k;ca.OPEN_BEGIN.__enum__=
ca;ca.OPEN_COMPLETE=["OPEN_COMPLETE",1];ca.OPEN_COMPLETE.toString=k;ca.OPEN_COMPLETE.__enum__=ca;ca.CLOSE_BEGIN=["CLOSE_BEGIN",2];ca.CLOSE_BEGIN.toString=k;ca.CLOSE_BEGIN.__enum__=ca;ca.CLOSE_COMPLETE=["CLOSE_COMPLETE",3];ca.CLOSE_COMPLETE.toString=k;ca.CLOSE_COMPLETE.__enum__=ca;var zh=function(a,b,c){this.screenId=a;this.changeEvent=b;this.action=c};h["workinman.ui.ChangeActionData"]=zh;zh.__name__=["workinman","ui","ChangeActionData"];zh.prototype={__class__:zh};var ta=h["workinman.ui.STATE_SCREEN"]=
{__ename__:["workinman","ui","STATE_SCREEN"],__constructs__:["IN","OUT","OPENED"]};ta.IN=["IN",0];ta.IN.toString=k;ta.IN.__enum__=ta;ta.OUT=["OUT",1];ta.OUT.toString=k;ta.OUT.__enum__=ta;ta.OPENED=["OPENED",2];ta.OPENED.toString=k;ta.OPENED.__enum__=ta;var je=function(a,b){this._root=a;this._screenOpen=[];this._interfaceDelegate=b;je.eventFlowDelegate.add(n(this,this._dispatchEventChange))};h["workinman.ui.ScreenManager"]=je;je.__name__=["workinman","ui","ScreenManager"];je.prototype={closeScreen:function(a,
b){null==b&&(b=!0);for(var c=this._screenOpen.length;0<c--;)this._screenOpen[c].classType==a&&(this._screenOpen[c].close(b),this._dispatchEventChange(ca.CLOSE_BEGIN,a))},closeAllScreens:function(a){null==a&&(a=!1);for(var b=0,c=this._screenOpen;b<c.length;){var d=c[b];++b;d.close(a)}},openScreen:function(a){if(this.isScreenOpen(a)){for(var b=0,c=this._screenOpen;b<c.length;){var d=c[b];++b;if(d.classType==a){this._root.addChild(d.get_root());break}}this._dispatchEventChange(ca.OPEN_BEGIN,a);this._dispatchEventChange(ca.OPEN_COMPLETE,
a)}else b=xa.createInstance(a,[this._root]),b.open(!0),this._screenOpen.push(b),this._dispatchEventChange(ca.OPEN_BEGIN,a)},changeScreenTo:function(a,b){null==b&&(b=!1);for(var c=this._screenOpen.length;0<c--;)this._screenOpen[c].classType!=a&&this._screenOpen[c].close(b);this.openScreen(a)},update:function(a){for(var b=this._screenOpen.length;0<b--;){var c=this._screenOpen[b];c.update(a);c.doDelete&&(c.dispose(),this._screenOpen.splice(b,1))}},isScreenOpen:function(a){for(var b=0,c=this._screenOpen;b<
c.length;){var d=c[b];++b;if(d.classType==a)return!0}return!1},_dispatchEventChange:function(a,b){this._interfaceDelegate(a,b)},__class__:je};var cb=h["workinman.ui._SubtitleManager.SUB_STATE"]={__ename__:["workinman","ui","_SubtitleManager","SUB_STATE"],__constructs__:["OFF","CHANGE_ON","CHANGE_OFF","ON"]};cb.OFF=["OFF",0];cb.OFF.toString=k;cb.OFF.__enum__=cb;cb.CHANGE_ON=["CHANGE_ON",1];cb.CHANGE_ON.toString=k;cb.CHANGE_ON.__enum__=cb;cb.CHANGE_OFF=["CHANGE_OFF",2];cb.CHANGE_OFF.toString=k;cb.CHANGE_OFF.__enum__=
cb;cb.ON=["ON",3];cb.ON.toString=k;cb.ON.__enum__=cb;var yh=function(a){this._elementManager=new Qf(a,0,0,!1);this._elementManager.addLayer("subtitle_default");this._image=this._elementManager.addElement(new v({asset:"",y:280,originY:1}));this._text=this._elementManager.addElement(new O({text:"",y:260,originY:1,align:ya.Center,wrapWidth:oa.STAGE_WIDTH-100}));this._tween=new Ve;this._setSubState(cb.ON)};h["workinman.ui.SubtitleManager"]=yh;yh.__name__=["workinman","ui","SubtitleManager"];yh.prototype=
{update:function(a){this._elementManager.update(a);this._tween.update(a);switch(this._subState[1]){case 3:0<this._timer&&(this._timer-=a)}if(0<m.subtitleQueue.length)a=m.subtitleQueue[0],a!=this._currentText&&ba.subtitlesEnabled&&(this._currentText=a,this._setSubtitle(this._currentText));else if(0>=this._timer)switch(this._subState[1]){case 3:case 1:this._setSubState(cb.CHANGE_OFF)}},_setSubState:function(a){var b=this;this._subState=a;switch(this._subState[1]){case 0:this._currentText="";this._image.visible=
!1;this._image.alpha=0;this._text.visible=!1;this._text.alpha=0;break;case 1:this._image.visible=!0;this._text.visible=!0;this._tween.tween({target:this._image,duration:0.2,overwrite:!0,ease:s.linear},{alpha:1}).onComplete(function(){b._setSubState(cb.ON)});this._tween.tween({target:this._text,duration:0.2,overwrite:!0,ease:s.linear},{alpha:1});break;case 2:this._tween.tween({target:this._image,duration:0.2,overwrite:!0,ease:s.linear},{alpha:0}).onComplete(function(){b._setSubState(cb.OFF)}),this._tween.tween({target:this._text,
duration:0.2,overwrite:!0,ease:s.linear},{alpha:0})}},_setSubtitle:function(a){this._timer=ba.getLocalizeData(a).subtitleTime;this._text.setText(a);switch(this._subState[1]){case 0:case 2:this._setSubState(cb.CHANGE_ON)}},__class__:yh};var Bd=function(a,b,c,d,e,g){null==g&&(g=16711680);null==e&&(e=4);null==d&&(d=!0);null==c&&(c=!1);v.call(this,a);this._body=b;this._thickness=e;this._color=g;this._constantUpdate=c;this._attachedToParent=d;this._fills=[];this._redrawLines()};h["world.DebugShowNapeHitbox"]=
Bd;Bd.__name__=["world","DebugShowNapeHitbox"];Bd.getAngle=function(a,b,c,d){return Math.atan2(d-b,c-a)*(180/Math.PI)};Bd._distBetweenPoints=function(a,b,c,d){return Math.abs(Math.sqrt((a-c)*(a-c)+(b-d)*(b-d)))};Bd.__super__=v;Bd.prototype=y(v.prototype,{update:function(a){v.prototype.update.call(this,a);this._attachedToParent?(this.pos.to((this._body.get_position().get_x()-this.parent.pos.x)/this.parent.scale,(this._body.get_position().get_y()-this.parent.pos.y)/this.parent.scale),this.set_scale(1/
this.parent.scale),this.rotation=this._body.zpp_inner.rot*(180/Math.PI)-this.parent.rotation):(this.pos.to(this._body.get_position().get_x(),this._body.get_position().get_y()),this.rotation=this._body.zpp_inner.rot*(180/Math.PI));this._constantUpdate&&this._redrawLines()},_redrawLines:function(){for(var a=0,b=0,c=0,d;a<this._body.zpp_inner.wrap_shapes.get_length();){b=0;if(this._body.zpp_inner.wrap_shapes.at(a).isPolygon()){for(d=this._body.zpp_inner.wrap_shapes.at(a).get_castPolygon();b<function(){null==
d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).get_length()-1;){if(c>=this._fills.length){var e=new Fa({color:this._color,sizeX:100,sizeY:this._thickness,x:0,y:0,alpha:0.5,origin:0});this.addChild(e);this._fills.push(e)}this._fills[c].alpha=1;this._fills[c].pos.to(function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_x(),function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();
return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_y());this._fills[c].sizeX=Bd._distBetweenPoints(function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_x(),function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_y(),function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b+1).get_x(),function(){null==d.zpp_inner_zn.wrap_lverts&&
d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b+1).get_y());this._fills[c].rotation=Bd.getAngle(function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_x(),function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_y(),function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b+1).get_x(),
function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b+1).get_y());c++;b++}c>=this._fills.length&&this._fills.push(this.addChild(new Fa({color:this._color,sizeX:0,sizeY:this._thickness,x:0,y:0,alpha:0.5,origin:0})));this._fills[c].alpha=1;this._fills[c].pos.to(function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_x(),function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();
return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_y());this._fills[c].sizeX=Bd._distBetweenPoints(function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_x(),function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_y(),function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(0).get_x(),function(){null==d.zpp_inner_zn.wrap_lverts&&
d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(0).get_y());this._fills[c].rotation=Bd.getAngle(function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_x(),function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(b).get_y(),function(){null==d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(0).get_x(),function(){null==
d.zpp_inner_zn.wrap_lverts&&d.zpp_inner_zn.getlverts();return d.zpp_inner_zn.wrap_lverts}(this).at(0).get_y());c++}a++}for(;c<this._fills.length;)this._fills[c].alpha=0,c++},dispose:function(){this._fills=this._body=null;v.prototype.dispose.call(this)},__class__:Bd});var gc=function(a){this._inputPos=aa.request();this._tween=new Ve;ia.tracePoolReport();this._cacheManager=new fj;this._elementManager=new Qf(a,0,0);this._elementManager.addLayer("layer_bg");this._elementManager.addLayer("layer_world",
!0);this._elementManager.addLayer("layer_fg");this._addEventListeners();this._setState(nb.ALLOCATE)};h["world.World"]=gc;gc.__name__=["world","World"];gc.prototype={start:function(){this._setState(nb.GAMEPLAY)},dispose:function(){this._tween.dispose();this._tween=null;this._elementManager.dispose();this._elementManager=null;this._removeEventListeners();this._cacheManager.dispose();this._state=this._cacheManager=null;this._inputPos.dispose();this._inputPos=null},_setState:function(a){this._state=a;
switch(a[1]){case 0:this._initPools();break;case 1:this._initWorld(),this._onGenerationComplete()}},update:function(a){if(!0!=q.getBool("BOOL_PAUSED"))switch(this._state[1]){case 0:this._cacheManager.processFill(10)&&this._setState(nb.INITIALIZING);break;case 2:this._tween.update(a),this._elementManager.update(a)}},_addEventListeners:function(){z.eventInput.add(n(this,this._onInput));u.pause.add(n(this,this._onPause))},_removeEventListeners:function(){z.eventInput.remove(n(this,this._onInput));u.pause.remove(n(this,
this._onPause))},_onPause:function(a){a?q.setBool("BOOL_PAUSED",!0):q.setBool("BOOL_PAUSED",!1)},_onInput:function(){q.getBool("BOOL_PAUSED")||this._state!=nb.GAMEPLAY||this._elementManager.camera.getWorldPositionOfScreenPoint(z.pointer.get_currentPos().x,z.pointer.get_currentPos().y,0,this._inputPos)},_initPools:function(){q.setInt("FLOAT_LOADING_PROGRESS",1);this._cacheManager.addCache("pointsparticlecache",Zf,15)},_initWorld:function(){},_onGenerationComplete:function(){u.worldGenerationComplete.dispatch()},
__class__:gc};var $=function(a){gc.call(this,a)};h["world.Mini_World"]=$;$.__name__=["world","Mini_World"];$.__super__=gc;$.prototype=y(gc.prototype,{update:function(a){gc.prototype.update.call(this,a);q.getBool("BOOL_PAUSED")},_onGenerationComplete:function(){gc.prototype._onGenerationComplete.call(this)},__class__:$});var nb=h["world._World.STATE"]={__ename__:["world","_World","STATE"],__constructs__:["ALLOCATE","INITIALIZING","GAMEPLAY"]};nb.ALLOCATE=["ALLOCATE",0];nb.ALLOCATE.toString=k;nb.ALLOCATE.__enum__=
nb;nb.INITIALIZING=["INITIALIZING",1];nb.INITIALIZING.toString=k;nb.INITIALIZING.__enum__=nb;nb.GAMEPLAY=["GAMEPLAY",2];nb.GAMEPLAY.toString=k;nb.GAMEPLAY.__enum__=nb;var zd=function(a,b,c,d){null==d&&(d=!1);null==c&&(c="");null==b&&(b="");za.call(this,a,b,c,d);switch(q.getInt("INT_COSTUME")){case 0:this.setSkin("work");break;case 1:this.setSkin("swim");break;case 2:this.setSkin("bling");break;case 3:this.setSkin("fancy");break;case 4:this.setSkin("parka");break;case 5:this.setSkin("pjs");break;case 6:this.setSkin("sports")}};
h["world.elements.KelSpine"]=zd;zd.__name__=["world","elements","KelSpine"];zd.__super__=za;zd.prototype=y(za.prototype,{__class__:zd});var Zf=function(){v.call(this,{});this._texts=[];this._texts.push(this.addChild(new O({text:"reward.combo",x:-6,y:-6,color:16777215})));this._texts.push(this.addChild(new O({text:"reward.combo",x:6,y:-6,color:16777215})));this._texts.push(this.addChild(new O({text:"reward.combo",x:-6,y:6,color:16777215})));this._texts.push(this.addChild(new O({text:"reward.combo",
x:6,y:6,color:16777215})));this._texts.push(this.addChild(new O({text:"reward.combo",color:0})));this._lifeTimer=0};h["world.elements.ParticleGoodJob"]=Zf;Zf.__name__=["world","elements","ParticleGoodJob"];Zf.__interfaces__=[Vd];Zf.__super__=v;Zf.prototype=y(v.prototype,{setReturnFunction:function(a){this._returnFunction=a},init:function(a,b,c){this.doDelete=!1;this.pos.to(a,b);this.velocity.to(A.randomFloat(-200*c,200*c),A.randomFloat(-100*c,-200*c));this.rotation=this.velocity.x/(200*c)*A.randomFloat(30,
40)+15;this.set_scale(0.5*c);this._lifeTimer=1;switch(A.randomInt(0,4)){case 0:a=0;for(b=this._texts;a<b.length;)c=b[a],++a,c.setText("reward.great");break;case 1:a=0;for(b=this._texts;a<b.length;)c=b[a],++a,c.setText("reward.two_fiddy");break;case 2:a=0;for(b=this._texts;a<b.length;)c=b[a],++a,c.setText("reward.hunned");break;case 3:a=0;for(b=this._texts;a<b.length;)c=b[a],++a,c.setText("reward.good");break;case 4:a=0;for(b=this._texts;a<b.length;)c=b[a],++a,c.setText("reward.combo")}},dispose:function(){this._returnFunction(this)},
destroy:function(){this._returnFunction=this._texts=null;v.prototype.dispose.call(this)},update:function(a){v.prototype.update.call(this,a);this.pos.x+=this.velocity.x*a;this.pos.y+=this.velocity.y*a;this.velocity.to(this.velocity.x*(1-a),this.velocity.y*(1-a));this.alpha=4*this._lifeTimer*this._lifeTimer;this._lifeTimer-=a;0>=this._lifeTimer&&(this.doDelete=!0)},__class__:Zf});var ra=function(){this.dynamicFriction=this.staticFriction=this.density=this.elasticity=this.rollingFriction=0;this.next=
this.outer=this.shapes=null;this.shapes=new ef;this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=0.001;this.rollingFriction=0.01};h["zpp_nape.phys.ZPP_Material"]=ra;ra.__name__=["zpp_nape","phys","ZPP_Material"];ra.prototype={wrapper:function(){if(null==this.outer){this.outer=new $d;var a=this.outer.zpp_inner;a.outer=null;a.next=ra.zpp_pool;ra.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},set:function(a){this.dynamicFriction=a.dynamicFriction;this.staticFriction=
a.staticFriction;this.density=a.density;this.elasticity=a.elasticity;this.rollingFriction=a.rollingFriction},invalidate:function(a){for(var b=this.shapes.head;null!=b;)b.elt.invalidate_material(a),b=b.next},__class__:ra};var ef=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Shape"]=ef;ef.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"];ef.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Bc.zpp_pool?b=new Bc:
(b=Bc.zpp_pool,Bc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Bc.zpp_pool?c=new Bc:(c=Bc.zpp_pool,Bc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=
a.next;a.elt=null;a.next=Bc.zpp_pool;Bc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&
(this.pushmod=!0));a=b;a.elt=null;a.next=Bc.zpp_pool;Bc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:ef};var K=function(){v.call(this,{asset:"fling/tray",scale:0.5});null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Na,f.internal=!1);this.body=new Vb(f.BodyType_DYNAMIC);this._foodType=F.BURGER;this.hasSplatted=!1};h["world.elements.order_up.FoodToss"]=K;K.__name__=["world",
"elements","order_up","FoodToss"];K.__interfaces__=[Vd];K.getHitboxBurger=function(){var a;a=Array(14);for(var b=0,c=a.length;b<c;){var d=b++,e=new l(22.4*Math.cos(d/6*Math.PI),22.4*Math.sin(d/6*Math.PI));a[d]=e}return a};K.getHitboxFries=function(){var a;a=Array(4);var b=new l(-56/3,-56/3);a[0]=b;b=new l(56/3,-56/3);a[1]=b;b=new l(11.2,22.4);a[2]=b;b=new l(-11.2,22.4);a[3]=b;return a};K.getHitboxShake=function(){var a;a=Array(4);var b=new l(-56/3,-56/3);a[0]=b;b=new l(56/3,-56/3);a[1]=b;b=new l(14,
56/1.5);a[2]=b;b=new l(-14,56/1.5);a[3]=b;return a};K.getHitboxTray=function(){var a;a=Array(4);var b=new l(-56,-56/6);a[0]=b;b=new l(56,0);a[1]=b;b=new l(56,56/6);a[2]=b;b=new l(-56,0);a[3]=b;return a};K.getHitboxBurgBit=function(){var a;a=Array(4);var b=new l(-56/3,-56/24);a[0]=b;b=new l(56/3,-56/24);a[1]=b;b=new l(56/3,56/24);a[2]=b;b=new l(-56/3,56/24);a[3]=b;return a};K.getHitboxFryBit=function(){var a;a=Array(4);var b=new l(-56/15,0);a[0]=b;b=new l(0,-56/3);a[1]=b;b=new l(56/15,0);a[2]=b;b=
new l(0,56/3);a[3]=b;return a};K.getHitboxFryContainer=function(){var a;a=Array(4);var b=new l(-14,0);a[0]=b;b=new l(14,0);a[1]=b;b=new l(11.2,56/3);a[2]=b;b=new l(-11.2,56/3);a[3]=b;return a};K.getHitboxShakeCup=function(){var a;a=Array(6);var b=new l(-56/3,-56/3);a[0]=b;b=new l(-56/6,-22.4);a[1]=b;b=new l(56/6,-22.4);a[2]=b;b=new l(56/3,-56/3);a[3]=b;b=new l(14,28);a[4]=b;b=new l(-14,28);a[5]=b;return a};K.getHitboxShakeStraw=function(){var a;a=Array(4);var b=new l(-56/24,-56/3);a[0]=b;b=new l(56/
24,-56/3);a[1]=b;b=new l(-224/24,56/3);a[2]=b;b=new l(-280/24,56/3);a[3]=b;return a};K.getFoodPosition=function(a){switch(a[1]){case 0:return new l(-240,15);case 1:return new l(-170,15);case 2:return new l(-200,0);case 3:return new l(-200,40);default:return new l(0,0)}};K.__super__=v;K.prototype=y(v.prototype,{get_foodType:function(){return this._foodType},setReturnFunction:function(a){this._returnFunction=a},init:function(a,b,c,d,e,g,p){this.doDelete=!1;this._foodType=c;this.body.zpp_inner.wrap_shapes.clear();
this.body.get_cbTypes().clear();this.body.set_space(a);for(a=0;a<b.length;){var h=b[a];++a;this.body.get_cbTypes().add(h)}this.body.get_velocity().setxy(0,0);this.body.set_angularVel(0);this.body.set_massMode(function(){null==f.MassMode_DEFAULT&&(f.internal=!0,f.MassMode_DEFAULT=new Qc,f.internal=!1);return f.MassMode_DEFAULT}(this));var j;switch(c[1]){case 0:j=K.getHitboxBurger();this.setAsset("fling/burg");this.scaleX=0.5;this.body.set_massMode(function(){null==f.MassMode_FIXED&&(f.internal=!0,
f.MassMode_FIXED=new Qc,f.internal=!1);return f.MassMode_FIXED}(this));this.body.set_mass(1.5);break;case 1:j=K.getHitboxFries();this.setAsset("fling/fries");this.scaleX=0.5;this.body.set_massMode(function(){null==f.MassMode_FIXED&&(f.internal=!0,f.MassMode_FIXED=new Qc,f.internal=!1);return f.MassMode_FIXED}(this));this.body.set_mass(1.5);break;case 2:j=K.getHitboxShake();this.setAsset("fling/soda");this.scaleX=0.5;this.body.set_massMode(function(){null==f.MassMode_FIXED&&(f.internal=!0,f.MassMode_FIXED=
new Qc,f.internal=!1);return f.MassMode_FIXED}(this));this.body.set_mass(1.5);break;case 3:j=K.getHitboxTray();this.setAsset("fling/tray");this.scaleX=-0.5;this.body.set_massMode(function(){null==f.MassMode_FIXED&&(f.internal=!0,f.MassMode_FIXED=new Qc,f.internal=!1);return f.MassMode_FIXED}(this));this.body.set_mass(1.5);break;case 4:j=K.getHitboxBurgBit();this.setAsset("fling/burg_bit_1");this.scaleX=0.5;break;case 5:j=K.getHitboxBurgBit();this.setAsset("fling/burg_bit_2");this.scaleX=0.5;break;
case 6:j=K.getHitboxBurgBit();this.setAsset("fling/burg_bit_3");this.scaleX=0.5;break;case 7:j=K.getHitboxBurgBit();this.setAsset("fling/burg_bit_4");this.scaleX=0.5;break;case 8:j=K.getHitboxBurgBit();this.setAsset("fling/burg_bit_5");this.scaleX=0.5;break;case 9:j=K.getHitboxBurgBit();this.setAsset("fling/burg_bit_6");this.scaleX=0.5;break;case 10:j=K.getHitboxFryBit();this.setAsset("fling/fries_bit_1");this.scaleX=0.5;break;case 11:j=K.getHitboxFryBit();this.setAsset("fling/fries_bit_2");this.scaleX=
0.5;break;case 12:j=K.getHitboxFryBit();this.setAsset("fling/fries_bit_3");this.scaleX=0.5;break;case 13:j=K.getHitboxFryContainer();this.setAsset("fling/fries_bit_4");this.scaleX=0.5;break;case 14:j=K.getHitboxShakeStraw();this.setAsset("fling/soda_bit_1");this.scaleX=0.5;break;case 15:j=K.getHitboxBurgBit();this.setAsset("fling/soda_bit_2");this.scaleX=0.5;break;case 16:j=K.getHitboxShakeCup(),this.setAsset("fling/soda_bit_3"),this.scaleX=0.5}this.body.set_rotation(0);var i=K.getFoodPosition(c);
0!=d||0!=e?this.move(d,e):this.move(function(){i.zpp_inner.validate();return i.zpp_inner.x}(this),function(){i.zpp_inner.validate();return i.zpp_inner.y}(this));(0!=g||0!=p)&&this.body.get_velocity().setxy(g,p);b=new tb(j);b.zpp_inner.immutable_midstep("Shape::material");b.zpp_inner.setMaterial(K.polyMat.zpp_inner);b.zpp_inner.material.wrapper();this.body.zpp_inner.wrap_shapes.add(b);this.hasSplatted=!1},dispose:function(){this._returnFunction(this)},destroy:function(){this._returnFunction=this.body=
null;v.prototype.dispose.call(this)},update:function(a){this.pos.x=this.body.get_position().get_x();this.pos.y=this.body.get_position().get_y();this.rotation=180*this.body.zpp_inner.rot/Math.PI;v.prototype.update.call(this,a)},move:function(a,b){this.pos.to(a,b);this.body.get_position().setxy(a,b)},__class__:K,__properties__:y(v.prototype.__properties__,{get_foodType:"get_foodType"})});var F=h["world.elements.order_up.FOOD_TOSS_TYPE"]={__ename__:["world","elements","order_up","FOOD_TOSS_TYPE"],__constructs__:"BURGER,FRIES,SHAKE,TRAY,BURG_BIT_1,BURG_BIT_2,BURG_BIT_3,BURG_BIT_4,BURG_BIT_5,BURG_BIT_6,FRY_BIT_1,FRY_BIT_2,FRY_BIT_3,FRY_BIT_4,SHAKE_BIT_1,SHAKE_BIT_2,SHAKE_BIT_3".split(",")};
F.BURGER=["BURGER",0];F.BURGER.toString=k;F.BURGER.__enum__=F;F.FRIES=["FRIES",1];F.FRIES.toString=k;F.FRIES.__enum__=F;F.SHAKE=["SHAKE",2];F.SHAKE.toString=k;F.SHAKE.__enum__=F;F.TRAY=["TRAY",3];F.TRAY.toString=k;F.TRAY.__enum__=F;F.BURG_BIT_1=["BURG_BIT_1",4];F.BURG_BIT_1.toString=k;F.BURG_BIT_1.__enum__=F;F.BURG_BIT_2=["BURG_BIT_2",5];F.BURG_BIT_2.toString=k;F.BURG_BIT_2.__enum__=F;F.BURG_BIT_3=["BURG_BIT_3",6];F.BURG_BIT_3.toString=k;F.BURG_BIT_3.__enum__=F;F.BURG_BIT_4=["BURG_BIT_4",7];F.BURG_BIT_4.toString=
k;F.BURG_BIT_4.__enum__=F;F.BURG_BIT_5=["BURG_BIT_5",8];F.BURG_BIT_5.toString=k;F.BURG_BIT_5.__enum__=F;F.BURG_BIT_6=["BURG_BIT_6",9];F.BURG_BIT_6.toString=k;F.BURG_BIT_6.__enum__=F;F.FRY_BIT_1=["FRY_BIT_1",10];F.FRY_BIT_1.toString=k;F.FRY_BIT_1.__enum__=F;F.FRY_BIT_2=["FRY_BIT_2",11];F.FRY_BIT_2.toString=k;F.FRY_BIT_2.__enum__=F;F.FRY_BIT_3=["FRY_BIT_3",12];F.FRY_BIT_3.toString=k;F.FRY_BIT_3.__enum__=F;F.FRY_BIT_4=["FRY_BIT_4",13];F.FRY_BIT_4.toString=k;F.FRY_BIT_4.__enum__=F;F.SHAKE_BIT_1=["SHAKE_BIT_1",
14];F.SHAKE_BIT_1.toString=k;F.SHAKE_BIT_1.__enum__=F;F.SHAKE_BIT_2=["SHAKE_BIT_2",15];F.SHAKE_BIT_2.toString=k;F.SHAKE_BIT_2.__enum__=F;F.SHAKE_BIT_3=["SHAKE_BIT_3",16];F.SHAKE_BIT_3.toString=k;F.SHAKE_BIT_3.__enum__=F;var Cd=function(a,b,c){v.call(this,a);null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Na,f.internal=!1);this.body=new Vb(f.BodyType_DYNAMIC);this._spineEle=this.addChild(new za({library:"taking_orders/spine/gb_characters",y:130,scale:0.4}));this._spineEle.animate("order_up_idle");
this.body.set_space(b);for(b=0;b<c.length;){var d=c[b];++b;this.body.get_cbTypes().add(d)}c=Array(7);switch(A.randomInt(0,7)){case 0:this._spineEle.setSkin("aria");b=new l(-30,-60);c[0]=b;b=new l(-15,-110);c[1]=b;b=new l(0,-125);c[2]=b;b=new l(15,-110);c[3]=b;b=new l(30,-60);c[4]=b;b=new l(30,110);c[5]=b;b=new l(-30,110);c[6]=b;this.body.set_mass(140);this._charHeight=-110;break;case 1:this._spineEle.setSkin("chinguun");b=new l(-35,-30);c[0]=b;b=new l(-20,-50);c[1]=b;b=new l(0,-60);c[2]=b;b=new l(20,
-50);c[3]=b;b=new l(35,-30);c[4]=b;b=new l(35,110);c[5]=b;b=new l(-30,110);c[6]=b;this.body.set_mass(85);this._charHeight=-60;break;case 2:this._spineEle.setSkin("gabriell");b=new l(-30,-60);c[0]=b;b=new l(-15,-90);c[1]=b;b=new l(0,-100);c[2]=b;b=new l(15,-90);c[3]=b;b=new l(30,-60);c[4]=b;b=new l(30,110);c[5]=b;b=new l(-30,110);c[6]=b;this.body.set_mass(125);this._charHeight=-100;break;case 3:this._spineEle.setSkin("kate");b=new l(-40,-40);c[0]=b;b=new l(-20,-70);c[1]=b;b=new l(0,-80);c[2]=b;b=new l(20,
-70);c[3]=b;b=new l(40,-40);c[4]=b;b=new l(25,110);c[5]=b;b=new l(-25,110);c[6]=b;this.body.set_mass(140);this._charHeight=-80;break;case 4:this._spineEle.setSkin("lex");b=new l(-50,10);c[0]=b;b=new l(-30,-70);c[1]=b;b=new l(0,-90);c[2]=b;b=new l(30,-70);c[3]=b;b=new l(50,10);c[4]=b;b=new l(25,110);c[5]=b;b=new l(-25,110);c[6]=b;this.body.set_mass(135);this._charHeight=-90;break;case 5:this._spineEle.setSkin("nathan");b=new l(-50,25);c[0]=b;b=new l(-35,-50);c[1]=b;b=new l(0,-70);c[2]=b;b=new l(35,
-50);c[3]=b;b=new l(50,25);c[4]=b;b=new l(25,110);c[5]=b;b=new l(-25,110);c[6]=b;this.body.set_mass(120);this._charHeight=-70;break;case 6:this._spineEle.setSkin("reece");b=new l(-50,25);c[0]=b;b=new l(-35,-45);c[1]=b;b=new l(0,-65);c[2]=b;b=new l(35,-45);c[3]=b;b=new l(50,25);c[4]=b;b=new l(25,110);c[5]=b;b=new l(-25,110);c[6]=b;this.body.set_mass(115);this._charHeight=-65;break;case 7:this._spineEle.setSkin("ryan"),b=new l(-30,-50),c[0]=b,b=new l(-15,-70),c[1]=b,b=new l(0,-80),c[2]=b,b=new l(15,
-70),c[3]=b,b=new l(30,-50),c[4]=b,b=new l(30,110),c[5]=b,b=new l(-30,110),c[6]=b,this.body.set_mass(115),this._charHeight=-80}this.body.set_rotation(0);this.move(a.x,a.y);a=new tb(c);a.zpp_inner.immutable_midstep("Shape::material");a.zpp_inner.setMaterial(Cd.polyMat.zpp_inner);a.zpp_inner.material.wrapper();this.body.zpp_inner.wrap_shapes.add(a);this._botMessy=this._midMessy=this._topMessy=!1};h["world.elements.order_up.TossCustomer"]=Cd;Cd.__name__=["world","elements","order_up","TossCustomer"];
Cd.__super__=v;Cd.prototype=y(v.prototype,{get_charHeight:function(){return this._charHeight},dispose:function(){this._spineEle=this.body=null;v.prototype.dispose.call(this)},update:function(a){this.pos.to(this.body.get_position().get_x(),this.body.get_position().get_y());this.rotation=180*this.body.zpp_inner.rot/Math.PI;v.prototype.update.call(this,a)},move:function(a,b){this.pos.to(a,b);this.body.get_position().setxy(a,b)},hitCustTop:function(){this._topMessy=!0;this._playCustHitAnim()},hitCustMid:function(){this._midMessy=
!0;this._playCustHitAnim()},hitCustBot:function(){this._botMessy=!0;this._playCustHitAnim()},_playCustHitAnim:function(){var a=0;"order_up_hit_"==function(a){var c=a._spineEle.get_currentAnimation();return G.substr(c,0,a._spineEle.get_currentAnimation().length-3)}(this)&&(a=this._spineEle.getFrame());this._spineEle.clearQueue();this._topMessy?this._midMessy?this._botMessy?(this._spineEle.animate("order_up_hit_111",1,1,0,!0),this._spineEle.queueAnimation("order_up_hit_111_idle")):(this._spineEle.animate("order_up_hit_110",
1,1,0,!0),this._spineEle.queueAnimation("order_up_hit_110_idle")):this._botMessy?(this._spineEle.animate("order_up_hit_101",1,1,0,!0),this._spineEle.queueAnimation("order_up_hit_101_idle")):(this._spineEle.animate("order_up_hit_100",1,1,0,!0),this._spineEle.queueAnimation("order_up_hit_100_idle")):this._midMessy?this._botMessy?(this._spineEle.animate("order_up_hit_011",1,1,0,!0),this._spineEle.queueAnimation("order_up_hit_011_idle")):(this._spineEle.animate("order_up_hit_010",1,1,0,!0),this._spineEle.queueAnimation("order_up_hit_010_idle")):
this._botMessy&&(this._spineEle.animate("order_up_hit_001",1,1,0,!0),this._spineEle.queueAnimation("order_up_hit_001_idle"));"order_up_hit_"==function(a){var c=a._spineEle.get_currentAnimation();return G.substr(c,0,a._spineEle.get_currentAnimation().length-3)}(this)&&(this._spineEle.runUpdate(0),this._spineEle.setFrame(a),this._spineEle.setTimeScale(1),this._spineEle.runUpdate(0))},__class__:Cd,__properties__:y(v.prototype.__properties__,{get_charHeight:"get_charHeight"})});var hc=function(a,b,c,
d){v.call(this,a);switch(b[1]){case 0:null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Na,f.internal=!1);this.body=new Vb(f.BodyType_DYNAMIC,l.get(a.x,a.y,null));break;case 1:null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Na,f.internal=!1),this.body=new Vb(f.BodyType_KINEMATIC,l.get(a.x,a.y,null))}this.body.set_space(c);for(a=0;a<d.length;)c=d[a],++a,this.body.get_cbTypes().add(c);d=null;switch(b[1]){case 0:d=Array(9);b=new l(-35,-30);d[0]=b;b=new l(-27,-55);d[1]=
b;b=new l(-20,-65);d[2]=b;b=new l(0,-70);d[3]=b;b=new l(20,-65);d[4]=b;b=new l(27,-55);d[5]=b;b=new l(35,-30);d[6]=b;b=new l(27,65);d[7]=b;b=new l(-27,65);d[8]=b;this.setAsset("fling/trash");this.set_scale(0.8);break;case 1:d=Array(8),b=new l(-50,-25),d[0]=b,b=new l(-35,-45),d[1]=b,b=new l(-15,-58),d[2]=b,b=new l(0,-60),d[3]=b,b=new l(15,-58),d[4]=b,b=new l(35,-45),d[5]=b,b=new l(50,-25),d[6]=b,b=new l(0,-15),d[7]=b,this.setAsset("fling/light"),this.set_scale(0.8)}this.body.set_rotation(0);d=new tb(d);
d.zpp_inner.immutable_midstep("Shape::material");d.zpp_inner.setMaterial(hc.polyMat.zpp_inner);d.zpp_inner.material.wrapper();this.body.zpp_inner.wrap_shapes.add(d)};h["world.elements.order_up.TossObstacle"]=hc;hc.__name__=["world","elements","order_up","TossObstacle"];hc.__super__=v;hc.prototype=y(v.prototype,{dispose:function(){this.body=null;v.prototype.dispose.call(this)},update:function(a){this.pos.to(this.body.get_position().get_x(),this.body.get_position().get_y());this.rotation=180*this.body.zpp_inner.rot/
Math.PI;v.prototype.update.call(this,a)},move:function(a,b){this.pos.to(a,b);this.body.get_position().setxy(a,b)},__class__:hc});var ic=h["world.elements.order_up.OBSTACLE_TYPE"]={__ename__:["world","elements","order_up","OBSTACLE_TYPE"],__constructs__:["TRASH","LIGHT"]};ic.TRASH=["TRASH",0];ic.TRASH.toString=k;ic.TRASH.__enum__=ic;ic.LIGHT=["LIGHT",1];ic.LIGHT.toString=k;ic.LIGHT.__enum__=ic;var fe=function(){v.call(this,{asset:"soda_machine/button_pink_tile"});this._tapUpTime=this._tapDownTime=
this._holdDur=this._moveTimer=this._laneIndex=0;this._initPos=aa.request(0,0);this._destPos=aa.request(0,0);this._world=null};h["world.elements.soda_machine.NoteBlock"]=fe;fe.__name__=["world","elements","soda_machine","NoteBlock"];fe.__interfaces__=[Vd];fe.__super__=v;fe.prototype=y(v.prototype,{get_laneIndex:function(){return this._laneIndex},setReturnFunction:function(a){this._returnFunction=a},get_depth:function(){return 60-this._moveTimer},init:function(a,b,c){this.doDelete=!1;this._laneIndex=
a;switch(this._laneIndex){case 1:this._initPos.to(0,-230);this._destPos.to(0,-85);this.setAsset("soda_machine/button_green_tile");this.pos.toPoint(this._initPos);break;case 2:this._initPos.to(120,-230);this._destPos.to(180,-85);this.setAsset("soda_machine/button_blue_tile");this.pos.toPoint(this._initPos);break;default:this._initPos.to(-120,-230),this._destPos.to(-175,-85),this.setAsset("soda_machine/button_pink_tile"),this.pos.toPoint(this._initPos)}this._holdDur=this._moveTimer=0;this._tapUpTime=
this._tapDownTime=-1;this.alpha=1;this.set_scale(0.75);this._world=c},dispose:function(){this._returnFunction(this);null!=this._world&&this._world.removeNoteBlock(this)},destroy:function(){this._initPos.dispose();this._initPos=null;this._destPos.dispose();this._returnFunction=this._world=this._destPos=null;v.prototype.dispose.call(this)},update:function(a){v.prototype.update.call(this,a);this._moveTimer+=a;if(0.5<this._moveTimer)this.alpha=1-(this._moveTimer-0.5)/0.15,this.alpha*=this.alpha,this.set_scale(1),
0.65<this._moveTimer&&(this.doDelete=!0);else{var a=this._moveTimer/0.5,b=Math.cos(0.5*a*Math.PI-0.5*Math.PI),a=1.5*a+-0.5*b,b=1-a;this.pos.to(this._destPos.x*a+this._initPos.x*b,this._destPos.y*a+this._initPos.y*b);this.set_scale(a+0.75*b)}},tapDown:function(){this._tapDownTime=this._moveTimer;if(0==this._holdDur){if(0.15>Math.abs(this._tapDownTime-0.5))return 0==this._holdDur&&(this.doDelete=!0),!0}else if(0.15>Math.abs(this._tapDownTime-0.5))return this._tapDownTime=this._moveTimer,!0;return!1},
tapUp:function(){if(0==this._holdDur)return!1;this._tapUpTime=this._moveTimer;if(0.15>Math.abs(this._tapUpTime-(0.5+this._holdDur)))return this.doDelete=!0;this.doDelete=!0;return!1},__class__:fe,__properties__:y(v.prototype.__properties__,{get_laneIndex:"get_laneIndex"})});var Gb=function(a){v.call(this,{asset:"soda_machine/cherry_splash_6",y:240,originY:1});this._lane=a;switch(a){case 0:this.pos.x=-197.5;break;case 1:this.pos.x=7.5;break;case 2:this.pos.x=200}this._animTimer=999};h["world.elements.soda_machine.SodaSplash"]=
Gb;Gb.__name__=["world","elements","soda_machine","SodaSplash"];Gb.__super__=v;Gb.prototype=y(v.prototype,{dispose:function(){v.prototype.dispose.call(this)},update:function(a){v.prototype.update.call(this,a);this._animTimer+=a;a=Math.floor(this._animTimer/0.05);if(12>=a){switch(this._lane){case 0:this.setAsset(Gb._pinkAnim[a]);break;case 1:this.setAsset(Gb._greenAnim[a]);break;case 2:this.setAsset(Gb._blueAnim[a])}this.alpha=1}else this.alpha=0},play:function(){0.30000000000000004>this._animTimer||
(this._animTimer=0.6000000000000001>this._animTimer?0.1:0)},stop:function(){this._animTimer=999;this.alpha=0},__class__:Gb});var S=function(){v.call(this,{asset:"soda_machine/soda_tile_cola_1",originY:0});this._moveTimer=this._laneIndex=0;this._initPos=aa.request(0,0);this._destPos=aa.request(0,0);this._world=null};h["world.elements.soda_machine.SodaStream"]=S;S.__name__=["world","elements","soda_machine","SodaStream"];S.__interfaces__=[Vd];S.__super__=v;S.prototype=y(v.prototype,{get_laneIndex:function(){return this._laneIndex},
setReturnFunction:function(a){this._returnFunction=a},init:function(a,b,c){this.doDelete=!1;this._laneIndex=a;switch(this._laneIndex){case 1:this._initPos.to(7.5,40);this._destPos.to(7.5,220);S._greenIndex++;2<S._greenIndex&&(S._greenIndex=0);this.setAsset(S._greenAnim[S._greenIndex]);this.pos.toPoint(this._initPos);break;case 2:this._initPos.to(200,40);this._destPos.to(200,220);S._colaIndex++;2<S._colaIndex&&(S._colaIndex=0);this.setAsset(S._colaAnim[S._colaIndex]);this.pos.toPoint(this._initPos);
break;default:this._initPos.to(-197.5,40),this._destPos.to(-197.5,220),S._pinkIndex++,2<S._pinkIndex&&(S._pinkIndex=0),this.setAsset(S._pinkAnim[S._pinkIndex]),this.pos.toPoint(this._initPos)}this._moveTimer=c;this.alpha=1;this._world=b},dispose:function(){this._returnFunction(this);null!=this._world&&this._world.removeSodaStream(this)},destroy:function(){this._initPos.dispose();this._initPos=null;this._destPos.dispose();this._returnFunction=this._world=this._destPos=null;v.prototype.dispose.call(this)},
update:function(a){v.prototype.update.call(this,a);this._moveTimer+=a;if(0.35<this._moveTimer)this.doDelete=!0;else{var a=this._moveTimer/0.35,b=1-a;this.pos.to(this._destPos.x*a+this._initPos.x*b,this._destPos.y*a+this._initPos.y*b);this.scaleY=Math.min(4*b,1)}},__class__:S,__properties__:y(v.prototype.__properties__,{get_laneIndex:"get_laneIndex"})});var jc=function(){v.call(this,{asset:"foodstack/boot"});null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Na,f.internal=!1);this.body=
new Vb(f.BodyType_DYNAMIC);this._type=W.ICE_CREAM};h["world.elements.stacking_food.FoodBlock"]=jc;jc.__name__=["world","elements","stacking_food","FoodBlock"];jc.__super__=v;jc.prototype=y(v.prototype,{get_type:function(){return this._type},init:function(a,b,c){this.doDelete=!1;this.pos.to(0,-300);this.body.zpp_inner.wrap_shapes.clear();this.body.get_cbTypes().clear();this.body.set_space(a);for(var d=0;d<b.length;){var e=b[d];++d;this.body.get_cbTypes().add(e)}this._type=c;var g=null,f=null;switch(c[1]){case 0:var g=
Array(4),f=Array(6),h=new l(-56,-56);g[0]=h;var j=new l(56/6,-56);g[1]=j;var i=new l(0,0);g[2]=i;var k=new l(-42,0);g[3]=k;var m=new l(-50.4,0);f[0]=m;var n=new l(0,0);f[1]=n;var t=new l(56,14);f[2]=t;var o=new l(56,42);f[3]=o;var r=new l(0,50.4);f[4]=r;var s=new l(-56,50.4);f[5]=s;this.setAsset("foodstack/boot");this.set_scale(1);for(var u=0,q=this.children;u<q.length;){var v=q[u];++u;v.set_scale(1/this.scale)}break;case 1:var g=Array(6),f=Array(4),y=new l(56,0);g[0]=y;var w=new l(0,0);g[1]=w;var z=
new l(0,-33.6);g[2]=z;var A=new l(56/3,-44.8);g[3]=A;var x=new l(112/3,-44.8);g[4]=x;var C=new l(56,-33.6);g[5]=C;var B=new l(-56*1.1,0);f[0]=B;var F=new l(56*1.1,0);f[1]=F;var E=new l(56*1.1,50.4);f[2]=E;var N=new l(-56*1.1,50.4);f[3]=N;this.setAsset("foodstack/tomatoes");this.set_scale(1);for(var G=0,L=this.children;G<L.length;){var J=L[G];++G;J.set_scale(1/this.scale)}break;case 2:var g=Array(6),f=Array(6),I=new l(-56*0.4,-56);g[0]=I;var P=new l(56*0.4,-56);g[1]=P;var Q=new l(28,-28);g[2]=Q;var R=
new l(56*0.35,0);g[3]=R;var O=new l(-56*0.35,0);g[4]=O;var T=new l(-28,-28);g[5]=T;var V=new l(-56*0.35,0);f[0]=V;var H=new l(56*0.35,0);f[1]=H;var U=new l(56*0.35,42);f[2]=U;var K=new l(14,56*0.95);f[3]=K;var Y=new l(-14,56*0.95);f[4]=Y;var X=new l(-56*0.35,42);f[5]=X;this.setAsset("foodstack/lettuce");this.set_scale(1);for(var W=0,aa=this.children;W<aa.length;){var Z=aa[W];++W;Z.set_scale(1/this.scale)}break;case 3:var g=Array(5),f=null,ba=new l(-56,-33.6);g[0]=ba;var ha=new l(0,-44.8);g[1]=ha;
var ma=new l(56,-33.6);g[2]=ma;var la=new l(56,56);g[3]=la;var oa=new l(-56,56);g[4]=oa;this.setAsset("foodstack/burgs");this.set_scale(1);for(var D=0,ka=this.children;D<ka.length;){var ra=ka[D];++D;ra.set_scale(1/this.scale)}break;case 4:var g=Array(6),f=Array(4),ea=new l(-44.8,-56);g[0]=ea;var ia=new l(-22.4,-67.2);g[1]=ia;var Ae=new l(11.2,-67.2);g[2]=Ae;var da=new l(33.6,-56);g[3]=da;var ja=new l(16.8,33.6);g[4]=ja;var $=new l(-22.4,33.6);g[5]=$;var va=new l(-22.4,33.6);f[0]=va;var ga=new l(16.8,
33.6);f[1]=ga;var sa=new l(33.6,67.2);f[2]=sa;var pa=new l(-44.8,67.2);f[3]=pa;this.setAsset("foodstack/blender_stack");this.set_scale(1);for(var xa=0,qa=this.children;xa<qa.length;){var na=qa[xa];++xa;na.set_scale(1/this.scale)}break;case 5:var g=Array(6),f=null,S=new l(-67.2,11.2);g[0]=S;var ca=new l(-33.6,-56);g[1]=ca;var wa=new l(56,-33.6);g[2]=wa;var ya=new l(67.2,33.6);g[3]=ya;var fa=new l(44.8,56);g[4]=fa;var Ea=new l(-33.6,56);g[5]=Ea;this.setAsset("foodstack/burgers");this.set_scale(1);for(var ta=
0,za=this.children;ta<za.length;){var Aa=za[ta];++ta;Aa.set_scale(1/this.scale)}break;case 6:var g=Array(5),f=null,wb=new l(-56,-22.4);g[0]=wb;var Ha=new l(-11.2,-44.8);g[1]=Ha;var Ca=new l(56,-11.2);g[2]=Ca;var Da=new l(56,44.8);g[3]=Da;var Ad=new l(-56,33.6);g[4]=Ad;this.setAsset("foodstack/cheese");this.set_scale(1);for(var Ia=0,Fa=this.children;Ia<Fa.length;){var Ga=Fa[Ia];++Ia;Ga.set_scale(1/this.scale)}break;case 7:var g=Array(10),f=null,Ka=new l(-28,-11.2);g[0]=Ka;var M=new l(-28,-22.4);g[1]=
M;var Na=new l(-14,-28);g[2]=Na;var Ba=new l(14,-28);g[3]=Ba;var Va=new l(28,-22.4);g[4]=Va;var ua=new l(28,-11.2);g[5]=ua;var Ja=new l(22.4,22.4);g[6]=Ja;var ab=new l(14,28);g[7]=ab;var db=new l(-14,28);g[8]=db;var Xa=new l(-22.4,22.4);g[9]=Xa;this.setAsset("foodstack/icecream");this.set_scale(1);for(var Qa=0,Oa=this.children;Qa<Oa.length;){var ib=Oa[Qa];++Qa;ib.set_scale(1/this.scale)}break;case 8:var g=Array(14),f=null,kd=new l(-117.6,0);g[0]=kd;var Sa=new l(-112,-11.2);g[1]=Sa;var Ua=new l(-224/
3,-22.4);g[2]=Ua;var cb=new l(-56/3,-28);g[3]=cb;var se=new l(56/3,-28);g[4]=se;var Wa=new l(224/3,-22.4);g[5]=Wa;var nb=new l(112,-11.2);g[6]=nb;var Eb=new l(117.6,0);g[7]=Eb;var Vc=new l(112,11.2);g[8]=Vc;var Fb=new l(224/3,22.4);g[9]=Fb;var mb=new l(56/3,28);g[10]=mb;var jb=new l(-56/3,28);g[11]=jb;var Pa=new l(-224/3,22.4);g[12]=Pa;var ob=new l(-112,11.2);g[13]=ob;this.setAsset("foodstack/surfboard");this.set_scale(1);for(var $a=0,md=this.children;$a<md.length;){var Xf=md[$a];++$a;Xf.set_scale(1/
this.scale)}}this.body.set_rotation(0);this.body.get_position().setxy(0,-1E4);var Ac=new tb(g);Ac.zpp_inner.immutable_midstep("Shape::material");Ac.zpp_inner.setMaterial(jc.polyMat.zpp_inner);Ac.zpp_inner.material.wrapper();this.body.zpp_inner.wrap_shapes.add(Ac);null!=f&&(Ac=new tb(f),Ac.zpp_inner.immutable_midstep("Shape::material"),Ac.zpp_inner.setMaterial(jc.polyMat.zpp_inner),Ac.zpp_inner.material.wrapper(),this.body.zpp_inner.wrap_shapes.add(Ac))},dispose:function(){v.prototype.dispose.call(this)},
destroy:function(){v.prototype.dispose.call(this)},update:function(a){this.pos.to(this.body.get_position().get_x(),this.body.get_position().get_y());this.rotation=180*this.body.zpp_inner.rot/Math.PI;v.prototype.update.call(this,a);0==this.body.zpp_inner.wrap_shapes.get_length()&&(u.foodStackBlockClear.dispatch(this._type,this.pos),this.doDelete=!0)},move:function(a,b){this.pos.to(a,b);this.body.get_position().setxy(a,b)},__class__:jc,__properties__:y(v.prototype.__properties__,{get_type:"get_type"})});
var W=h["world.elements.stacking_food.BLOCK_TYPE"]={__ename__:["world","elements","stacking_food","BLOCK_TYPE"],__constructs__:"BOOT,TOMATOES,LETTUCE,BURGS,BLENDER,BUNS,CHEESE,ICE_CREAM,SURFBOARD".split(",")};W.BOOT=["BOOT",0];W.BOOT.toString=k;W.BOOT.__enum__=W;W.TOMATOES=["TOMATOES",1];W.TOMATOES.toString=k;W.TOMATOES.__enum__=W;W.LETTUCE=["LETTUCE",2];W.LETTUCE.toString=k;W.LETTUCE.__enum__=W;W.BURGS=["BURGS",3];W.BURGS.toString=k;W.BURGS.__enum__=W;W.BLENDER=["BLENDER",4];W.BLENDER.toString=k;
W.BLENDER.__enum__=W;W.BUNS=["BUNS",5];W.BUNS.toString=k;W.BUNS.__enum__=W;W.CHEESE=["CHEESE",6];W.CHEESE.toString=k;W.CHEESE.__enum__=W;W.ICE_CREAM=["ICE_CREAM",7];W.ICE_CREAM.toString=k;W.ICE_CREAM.__enum__=W;W.SURFBOARD=["SURFBOARD",8];W.SURFBOARD.toString=k;W.SURFBOARD.__enum__=W;var $f=function(){v.call(this,{});this._rotVel=this._lifeTimer=0};h["world.elements.stacking_food.FoodParticle"]=$f;$f.__name__=["world","elements","stacking_food","FoodParticle"];$f.__interfaces__=[Vd];$f.__super__=
v;$f.prototype=y(v.prototype,{setReturnFunction:function(a){this._returnFunction=a},init:function(a,b,c,d){this.doDelete=!1;this.pos.to(a,b);this.setAsset(d);a=A.randomFloat(30*Math.PI/180,75*Math.PI/180);this.velocity.to(300*Math.cos(a),-300*Math.sin(a));c&&(this.velocity.x*=-1);this._rotVel=A.randomFloat(0,480);this.set_scale(A.randomFloat(0.5,0.75));this.alpha=1;this._lifeTimer=2.5},dispose:function(){this._returnFunction(this)},destroy:function(){v.prototype.dispose.call(this);this._returnFunction=
null},update:function(a){v.prototype.update.call(this,a);this.velocity.to(this.velocity.x*(1-a/2),this.velocity.y+500*a);this.pos.to(this.pos.x+this.velocity.x*a,this.pos.y+this.velocity.y*a);this.rotation+=this._rotVel*a;this._lifeTimer-=a;this.alpha-=a/5;this.set_scale(this.scale-a/5);if(0>=this._lifeTimer||-415>this.pos.x||165<this.pos.x)this.doDelete=!0},__class__:$f});var fg=function(a){gc.call(this,a);this._outfitTextures="dressup/kel_uniform,dressup/kel_bathingsuit,dressup/kel_bling,dressup/kel_fancy,dressup/kel_parka,dressup/kel_pjs,dressup/kel_sports".split(",");
this._dayNames="dress_up.monday,dress_up.tuesday,dress_up.wednesday,dress_up.thursday,dress_up.friday,dress_up.saturday,dress_up.sunday".split(",");this._dayIndex=0;this._elementManager.addElement(new v({asset:"dressup/bg_dressup",x:0,y:0,scaleX:1.03,scaleY:1}));this._elementManager.addElement(new v({asset:"dressup/spotlight_ground",x:20,y:190}));this._curCharModel=this._elementManager.addElement(new v({asset:"dressup/kel_uniform",x:0,y:20,scale:0.85}));this._nextCharModel=this._elementManager.addElement(new v({asset:"dressup/kel_uniform",
x:800,y:20,scale:0.85}));this._elementManager.addElement(new v({asset:"dressup/spotlight",x:20,y:-80}));this._elementManager.addElement(new v({asset:"dressup/dressthepart",y:-335,originY:0,scaleX:1.15}));this._elementManager.addElement(new O({text:"dress_up.title",x:-3,y:-217,color:5592405,scaleX:0.8}));this._elementManager.addElement(new O({text:"dress_up.title",x:-1.5,y:-218.5,color:11184810,scaleX:0.8}));this._elementManager.addElement(new O({text:"dress_up.title",x:0,y:-220,color:16777215,scaleX:0.8}));
this._leftCurtain=this._elementManager.addElement(new v({asset:"dressup/curtains_l",x:-225,y:-45,scaleX:1.03,scaleY:1.15}));this._rightCurtain=this._elementManager.addElement(new v({asset:"dressup/curtains_r",x:240,y:-45,scaleX:1.03,scaleY:1.15}));this._curTitle=this._elementManager.addElement(new O({text:this._dayNames[this._dayIndex],x:0,y:240}));this._nextTitle=this._elementManager.addElement(new O({text:this._dayNames[this._dayIndex],x:1E3,y:240}));q.setInt("INT_COSTUME",this._dayIndex);0!=L.saveData.curWeek&&
this._onIntroSceneOver()};h["world.minigames.Mini_DressUp"]=fg;fg.__name__=["world","minigames","Mini_DressUp"];fg.__super__=$;fg.prototype=y($.prototype,{dispose:function(){this._dayNames=this._outfitTextures=this._rightCurtain=this._leftCurtain=this._nextTitle=this._nextCharModel=this._curTitle=this._curCharModel=null;$.prototype.dispose.call(this)},_addEventListeners:function(){u.dressUpLeftClick.add(n(this,this._onLeftArrowClick));u.dressUpRightClick.add(n(this,this._onRightArrowClick));u.introSceneOver.add(n(this,
this._onIntroSceneOver));$.prototype._addEventListeners.call(this)},_removeEventListeners:function(){u.dressUpLeftClick.remove(n(this,this._onLeftArrowClick));u.dressUpRightClick.remove(n(this,this._onRightArrowClick));u.introSceneOver.remove(n(this,this._onIntroSceneOver));$.prototype._removeEventListeners.call(this)},_onLeftArrowClick:function(){this._resetPositions();this._dayIndex--;0>this._dayIndex&&(this._dayIndex=this._dayNames.length-1);q.setInt("INT_COSTUME",this._dayIndex);this._nextTitle.setText(this._dayNames[this._dayIndex]);
this._nextCharModel.setAsset(this._outfitTextures[this._dayIndex]);this._nextCharModel.set_x(800);this._nextTitle.set_x(1E3);this._tween.tween({target:this._curCharModel,ease:s.outExpo,duration:1,thread:"cur_char_model",overwrite:!0},{x:-800});this._tween.tween({target:this._curTitle,ease:s.outExpo,duration:1,thread:"cur_title",overwrite:!0},{x:-1E3});this._tween.tween({target:this._nextCharModel,ease:s.outExpo,duration:1,thread:"next_char_model",overwrite:!0},{x:0});this._tween.tween({target:this._nextTitle,
ease:s.outExpo,duration:1,thread:"next_title",overwrite:!0},{x:0}).onComplete(n(this,this._resetPositions))},_onRightArrowClick:function(){this._resetPositions();this._dayIndex++;this._dayIndex>this._dayNames.length-1&&(this._dayIndex=0);q.setInt("INT_COSTUME",this._dayIndex);this._nextTitle.setText(this._dayNames[this._dayIndex]);this._nextCharModel.setAsset(this._outfitTextures[this._dayIndex]);this._nextCharModel.set_x(-800);this._nextTitle.set_x(-1E3);this._tween.tween({target:this._curCharModel,
ease:s.outExpo,duration:1,thread:"cur_char_model",overwrite:!0},{x:800});this._tween.tween({target:this._curTitle,ease:s.outExpo,duration:1,thread:"cur_title",overwrite:!0},{x:1E3});this._tween.tween({target:this._nextCharModel,ease:s.outExpo,duration:1,thread:"next_char_model",overwrite:!0},{x:0});this._tween.tween({target:this._nextTitle,ease:s.outExpo,duration:1,thread:"next_title",overwrite:!0},{x:0}).onComplete(n(this,this._resetPositions))},_onIntroSceneOver:function(){this._tween.tween({target:this._leftCurtain,
duration:1,delay:1,ease:s.inOutQuad},{x:-540});this._tween.tween({target:this._rightCurtain,duration:1,delay:1,ease:s.inOutQuad},{x:580})},_resetPositions:function(){this._curCharModel.setAsset(this._outfitTextures[this._dayIndex]);this._curTitle.setText(this._dayNames[this._dayIndex]);this._curCharModel.set_x(0);this._curTitle.set_x(0);this._nextCharModel.set_x(800);this._nextTitle.set_x(1E3)},__class__:fg});var ka=function(){this.length=this.x=this.y=0;this._inuse=this.modified=this.pushmod=!1;
this.next=null;this.weak=!1;this._isimmutable=this.outer=null;this._immutable=!1;this._invalidate=this._validate=null};h["zpp_nape.geom.ZPP_Vec2"]=ka;ka.__name__=["zpp_nape","geom","ZPP_Vec2"];ka.get=function(a,b,c){null==c&&(c=!1);var d;null==ka.zpp_pool?d=new ka:(d=ka.zpp_pool,ka.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=c;d.x=a;d.y=b;return d};ka.prototype={validate:function(){null!=this._validate&&this._validate()},invalidate:function(){null!=this._invalidate&&this._invalidate(this)},
wrapper:function(){if(null==this.outer){this.outer=new l;var a=this.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=ka.zpp_pool;ka.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,
b){b._inuse=!0;null==a?(b.next=this.next,this.next=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.next,b=null;null!=a;){var c=a.next;a.next=b;b=this.next=
a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.next;0<a--&&null!=b;)b=b.next;return b},toString:function(){return"{ x: "+this.x+" y: "+this.y+" }"},__class__:ka};var le=function(a){gc.call(this,a);this._elementManager.addElement(new v({asset:"fling/bg_fling",x:0,y:0}),"layer_bg");this._elementManager.addElement(new v({asset:"fling/bg_fling2",x:995,y:0}),"layer_bg");this._elementManager.addElement(new v({asset:"fling/bg_fling2",x:1990,y:0}),"layer_bg");this._elementManager.addElement(new v({asset:"fling/bg_fling2",
x:2985,y:0}),"layer_bg");this._elementManager.addElement(new v({asset:"fling/bg_fling2",x:3980,y:0}),"layer_bg");this._edSpine=this._elementManager.addElement(new zd({library:"kel",x:-250,y:180,scale:0.25}));this._edSpine.animate("windup");this._edSpine.setFrame(0);this._space=new Pf(le._GRAVITY);this._simSpace=new Pf(le._GRAVITY);this._collisionTypes=[];this._floorType=new Ma;this._collisionTypes.push(this._floorType);this._foodType=new Ma;this._collisionTypes.push(this._foodType);this._bitType=
new Ma;this._collisionTypes.push(this._bitType);this._customerType=new Ma;this._collisionTypes.push(this._customerType);null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Na,f.internal=!1);this._boundaryBody=new Vb(f.BodyType_STATIC);var a=Array(4),b=new l(-2E4,200);a[0]=b;b=new l(2E4,200);a[1]=b;b=new l(2E4,300);a[2]=b;b=new l(-2E4,300);a[3]=b;a=new tb(a);this._boundaryBody.zpp_inner.wrap_shapes.add(a);a=Array(5);b=new l(-145,100);a[0]=b;b=new l(-10,100);a[1]=b;b=new l(-10,200);a[2]=b;
b=new l(-155,200);a[3]=b;b=new l(-155,120);a[4]=b;a=new tb(a);this._boundaryBody.zpp_inner.wrap_shapes.add(a);a=Array(4);b=new l(-480,-2E4);a[0]=b;b=new l(-480,200);a[1]=b;b=new l(-500,200);a[2]=b;b=new l(-500,-2E4);a[3]=b;a=new tb(a);this._boundaryBody.zpp_inner.wrap_shapes.add(a);a=Array(4);b=new l(-480,-105);a[0]=b;b=new l(-420,-105);a[1]=b;b=new l(-420,200);a[2]=b;b=new l(-480,200);a[3]=b;a=new tb(a);this._boundaryBody.zpp_inner.wrap_shapes.add(a);a=Array(4);b=new l(-420,90);a[0]=b;b=new l(-380,
90);a[1]=b;b=new l(-380,200);a[2]=b;b=new l(-420,200);a[3]=b;a=new tb(a);this._boundaryBody.zpp_inner.wrap_shapes.add(a);this._boundaryBody.get_position().setxy(0,0);this._boundaryBody.get_cbTypes().push(gb.ANY_BODY);this._boundaryBody.get_cbTypes().push(this._floorType);this._boundaryBody.set_space(this._space);null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new sb,f.internal=!1);a=f.CbEvent_BEGIN;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Ja,f.internal=
!1);a=new Nd(a,f.InteractionType_COLLISION,this._foodType,this._bitType,n(this,this._bitTouch));this._space.zpp_inner.wrap_listeners.add(a);null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new sb,f.internal=!1);a=f.CbEvent_BEGIN;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Ja,f.internal=!1);a=new Nd(a,f.InteractionType_COLLISION,this._foodType,this._floorType,n(this,this._floorTouch));this._space.zpp_inner.wrap_listeners.add(a);null==f.CbEvent_BEGIN&&(f.internal=
!0,f.CbEvent_BEGIN=new sb,f.internal=!1);a=f.CbEvent_BEGIN;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Ja,f.internal=!1);a=new Nd(a,f.InteractionType_COLLISION,this._foodType,this._customerType,n(this,this._customerTouch));this._space.zpp_inner.wrap_listeners.add(a);this._dragStart=aa.request();this._simPoints=[];this._simDots=[];for(a=0;10>a;)a++,this._simPoints.push(aa.request()),this._simDots.push(this._elementManager.addElement(new v({asset:"fling/dot",scale:0.5,
x:-3E3,y:-3E3})));this._simImpulse=new l(0,0);this._simBodies=[];for(a=0;4>a;){b=a++;this._simBodies.push(new Vb);this._simBodies[b].set_space(this._simSpace);var c,d;switch(b){case 1:c=K.getHitboxFries();d=K.getFoodPosition(F.FRIES);break;case 2:c=K.getHitboxShake();d=K.getFoodPosition(F.SHAKE);break;case 3:c=K.getHitboxTray();d=K.getFoodPosition(F.TRAY);break;default:c=K.getHitboxBurger(),d=K.getFoodPosition(F.BURGER)}this._simBodies[b].set_rotation(0);this._simBodies[b].get_position().setxy(function(){d.zpp_inner.validate();
return d.zpp_inner.x}(this),function(){d.zpp_inner.validate();return d.zpp_inner.y}(this));c=new tb(c);c.zpp_inner.immutable_midstep("Shape::material");c.zpp_inner.setMaterial(K.polyMat.zpp_inner);c.zpp_inner.material.wrapper();this._simBodies[b].zpp_inner.wrap_shapes.add(c)}this._resetSimBodies();this._curFood=[];this._curCustomer=this._elementManager.addElement(new Cd({x:this._getCustDistance(),y:100,scale:0.75},this._space,[this._customerType]));this._introTimer=2.5;this._camForceResetTimer=this._camResetTimer=
0;this._numThrows=3;q.setInt("INT_SCORE_ORDER_UP",0);this._addObstacles();this._splatSfxCooldown=this._traySfxCooldown=0;this._armPullSfxBreakpoints=[30,60,90,120,150];this._armPullSfxNoises=["fling/arm_pull_1","fling/arm_pull_2","fling/arm_pull_3","fling/arm_pull_4","fling/arm_pull_5"];this._armPullSfxIndex=-1;this._foodSplats=[];this._pushNewSplats();this._elementManager.camera.pos.x=20;this._pointerHeld=!1};h["world.minigames.Mini_OrderUp"]=le;le.__name__=["world","minigames","Mini_OrderUp"];le.__super__=
$;le.prototype=y($.prototype,{dispose:function(){this._foodSplats=this._armPullSfxNoises=this._armPullSfxBreakpoints=this._edSpine=this._curCustomer=this._simImpulse=this._simBodies=this._simDots=this._simPoints=this._curFood=this._dragStart=this._customerType=this._floorType=this._bitType=this._foodType=this._collisionTypes=this._boundaryBody=this._simSpace=this._space=null;$.prototype.dispose.call(this)},_initWorld:function(){$.prototype._initWorld.call(this);this._tween.tween({target:this._elementManager.camera.pos,
ease:s.inOutExpo,duration:0.8,thread:"cam_movement",overwrite:!0},{x:this._curCustomer.pos.x});this._tween.tween({target:this._elementManager.camera.pos,ease:s.inOutExpo,duration:0.8,thread:"cam_movement",overwrite:!1,delay:0.8},{x:20})},update:function(a){$.prototype.update.call(this,a);if(!0!=q.getBool("BOOL_PAUSED")){this._space.step(a);if(0<this._introTimer)this._introTimer-=a;else if(null!=this._curFood&&0<this._curFood.length){for(var b=0,c=1,d=this._curFood.length;c<d;){var e=c++;this._curFood[e].pos.x>
this._curFood[b].pos.x&&(b=e)}this._camForceResetTimer-=a;this._camResetTimer=0.1>this._curFood[b].body.get_velocity().get_length()||this._curFood[b].pos.x>this._curCustomer.pos.x+300?this._camResetTimer-a:2;0<this._camResetTimer&&0<this._camForceResetTimer?this._curFood[b].pos.x>this._elementManager.camera.pos.x&&this._tween.tween({target:this._elementManager.camera.pos,ease:s.inExpo,duration:0.03,thread:"cam_movement",overwrite:!0},{x:Math.min(this._curCustomer.pos.x,this._curFood[b].pos.x)}):0<
this._numThrows?(this._tween.tween({target:this._elementManager.camera.pos,ease:s.inExpo,duration:0.025,thread:"cam_movement",overwrite:!0},{x:20}),"windup"!=this._edSpine.get_currentAnimation()&&(this._edSpine.animate("windup"),this._edSpine.setFrame(0)),this._pushNewSplats()):(5E3<q.getInt("INT_SCORE_ORDER_UP")&&2>L.saveData.difficultyOrderUp&&L.saveData.difficultyOrderUp++,q.setBool("BOOL_LEVEL_WIN",!0))}this._traySfxCooldown-=a;this._splatSfxCooldown-=a}},_onInput:function(a,b){if(!q.getBool("BOOL_PAUSED")&&
!q.getBool("BOOL_CORN_CARE_OPEN")&&!(this._state!=nb.GAMEPLAY||0<this._camResetTimer&&0<this._camForceResetTimer||0<this._introTimer)){$.prototype._onInput.call(this,a,b);if(a==Q.POINTER)if(this._pointerHeld=b)this._dragStart.toPoint(this._inputPos);else{if(20>Td.distBetweenPoints(this._dragStart,this._inputPos)){for(var c=0,d=this._simDots;c<d.length;){var e=d[c];++c;e.pos.to(-3E3,-3E3)}this._edSpine.setFrame(0);return}this._curFood=[];this._curFood.push(this._elementManager.addElement(this._requestFood(F.TRAY)));
this._curFood.push(this._elementManager.addElement(this._requestFood(F.BURGER)));this._curFood.push(this._elementManager.addElement(this._requestFood(F.FRIES)));this._curFood.push(this._elementManager.addElement(this._requestFood(F.SHAKE)));for(var g=new l(0,0),c=0,d=this._curFood;c<d.length;)e=d[c],++c,g.setxy(15*(this._dragStart.x-this._inputPos.x),15*(this._dragStart.y-this._inputPos.y)),Math.sqrt(function(){g.zpp_inner.validate();return g.zpp_inner.x}(this)*function(){g.zpp_inner.validate();return g.zpp_inner.x}(this)+
function(){g.zpp_inner.validate();return g.zpp_inner.y}(this)*function(){g.zpp_inner.validate();return g.zpp_inner.y}(this))>1200*e.body.get_mass()&&g.set_length(1200*e.body.get_mass()),e.body.applyImpulse(g);this._camResetTimer=2;this._camForceResetTimer=7.5;c=0;for(d=this._simDots;c<d.length;)e=d[c],++c,e.pos.to(-3E3,-3E3);this._numThrows--;0.5>A.randomFloat(0,1)?(m.playSound("fling/tray_launch",A.randomFloat(0.75,1)),m.playSound("fling/tray_launch_alt",A.randomFloat(0.1,0.25))):(m.playSound("fling/tray_launch_alt",
A.randomFloat(0.75,1)),m.playSound("fling/tray_launch",A.randomFloat(0.1,0.25)));this._edSpine.animate("throw",1);this._edSpine.queueAnimation("idle");this._edSpine.setAttachment("tray_full_lg",null)}if(a==Q.POINTER_MOVE&&this._pointerHeld){u.goodInput.dispatch();this._resetSimBodies();c=0;for(d=this._simBodies;c<d.length;){var f=d[c];++c;this._simImpulse.setxy(15*(this._dragStart.x-this._inputPos.x),15*(this._dragStart.y-this._inputPos.y));e=this._simImpulse.get_length();f.zpp_inner.validate_mass();
e>1200*f.zpp_inner.cmass&&this._simImpulse.set_length(1200*function(){f.zpp_inner.validate_mass();return f.zpp_inner.cmass}(this));f.applyImpulse(this._simImpulse)}for(c=0;10>c;){d=c++;this._simSpace.step(0.1);for(var h=0,j=0,e=0,i=this._simBodies;e<i.length;){var k=i[e];++e;null==k.zpp_inner.wrap_pos&&k.zpp_inner.setupPosition();h+=0.25*k.zpp_inner.wrap_pos.get_x();null==k.zpp_inner.wrap_pos&&k.zpp_inner.setupPosition();j+=0.25*k.zpp_inner.wrap_pos.get_y()}this._simPoints[d].to(h,j);this._simDots[d].pos.toPoint(this._simPoints[d])}if(20>
Td.distBetweenPoints(this._dragStart,this._inputPos))for(c=0;10>c;)this._simDots[c++].alpha=0.5;else for(c=0;10>c;)this._simDots[c++].alpha=1;c=Math.abs(this._dragStart.x-this._inputPos.x)+Math.abs(this._dragStart.y-this._inputPos.y);d=-1;e=0;for(i=this._armPullSfxBreakpoints.length;e<i;)k=e++,c>this._armPullSfxBreakpoints[k]&&(d=k);-1!=d&&d!=this._armPullSfxIndex&&(m.playSound(this._armPullSfxNoises[d]),this._armPullSfxIndex=d);this._edSpine.setFrame(Math.floor(48*this._simImpulse.get_length()/(1200*
this._simBodies[2].get_mass())))}}},_requestFood:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);var g=this._cacheManager.requestElement("foodtosscache");this._isBit(a)?g.init(this._space,[this._foodType,this._bitType],a,b,c,d,e):g.init(this._space,[this._foodType],a,b,c,d,e);return g},_initPools:function(){$.prototype._initPools.call(this);this._cacheManager.addCache("foodtosscache",K,5)},_bitTouch:function(a){this._evaluateFoodExplosions(a)},_floorTouch:function(a){this._evaluateFoodExplosions(a);
for(var b=0,c=this._curFood;b<c.length;){var d=c[b];++b;if(a.zpp_inner.int1.outer_i.get_castBody()==d.body||a.zpp_inner.int2.outer_i.get_castBody()==d.body){this._tryAddFoodSplat(d);break}}},_customerTouch:function(a){this._evaluateFoodExplosions(a);a.zpp_inner.int1.outer_i.get_castBody()==this._curCustomer.body?a.zpp_inner.int2.outer_i.get_castBody().get_position().get_y()<(90-this._curCustomer.get_charHeight())/3?this._curCustomer.hitCustTop():a.zpp_inner.int2.outer_i.get_castBody().get_position().get_y()<
2*(90-this._curCustomer.get_charHeight())/3?this._curCustomer.hitCustMid():this._curCustomer.hitCustBot():a.zpp_inner.int1.outer_i.get_castBody().get_position().get_y()<(90-this._curCustomer.get_charHeight())/3?this._curCustomer.hitCustTop():a.zpp_inner.int1.outer_i.get_castBody().get_position().get_y()<2*(90-this._curCustomer.get_charHeight())/3?this._curCustomer.hitCustMid():this._curCustomer.hitCustBot();this._elementManager.addElement(this._cacheManager.requestElement("pointsparticlecache")).init(a.zpp_inner.int1.outer_i.get_castBody().get_position().get_x(),
a.zpp_inner.int1.outer_i.get_castBody().get_position().get_y(),0.5);q.modifyInt("INT_SCORE_ORDER_UP",0.5<A.randomFloat(0,1)?250:300);q.getInt("INT_SCORE_ORDER_UP")>q.getInt("INT_HISCORE_ORDER_UP")&&q.setInt("INT_HISCORE_ORDER_UP",q.getInt("INT_SCORE_ORDER_UP"))},_evaluateFoodExplosions:function(a){for(var b=0,c=this._curFood;b<c.length;){var d=c[b];++b;if(a.zpp_inner.int1.outer_i.get_castBody()==d.body||a.zpp_inner.int2.outer_i.get_castBody()==d.body){switch(d.get_foodType()[1]){case 0:this._curFood.push(this._elementManager.addElement(this._requestFood(F.BURG_BIT_1,
d.pos.x,d.pos.y,1.2*d.body.get_velocity().get_x()+A.randomFloat(-50,250),1.2*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.BURG_BIT_2,d.pos.x,d.pos.y,1.2*d.body.get_velocity().get_x()+A.randomFloat(-50,250),1.2*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.BURG_BIT_3,d.pos.x,d.pos.y,1.2*d.body.get_velocity().get_x()+A.randomFloat(-50,250),
1.2*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.BURG_BIT_4,d.pos.x,d.pos.y,1.2*d.body.get_velocity().get_x()+A.randomFloat(-50,250),1.2*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.BURG_BIT_5,d.pos.x,d.pos.y,1.2*d.body.get_velocity().get_x()+A.randomFloat(-50,250),1.2*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.BURG_BIT_6,
d.pos.x,d.pos.y,1.2*d.body.get_velocity().get_x()+A.randomFloat(-50,250),1.2*d.body.get_velocity().get_y()-A.randomFloat(100,300))));G.remove(this._curFood,d);d.body.set_space(null);d.doDelete=!0;this._playSplatSfx();break;case 1:this._curFood.push(this._elementManager.addElement(this._requestFood(F.FRY_BIT_1,d.pos.x,d.pos.y,1.35*d.body.get_velocity().get_x()+A.randomFloat(50,250),1.35*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.FRY_BIT_2,
d.pos.x,d.pos.y,1.35*d.body.get_velocity().get_x()+A.randomFloat(50,250),1.35*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.FRY_BIT_3,d.pos.x,d.pos.y,1.35*d.body.get_velocity().get_x()+A.randomFloat(50,250),1.35*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.FRY_BIT_1,d.pos.x,d.pos.y,1.35*d.body.get_velocity().get_x()+A.randomFloat(50,250),
1.35*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.FRY_BIT_2,d.pos.x,d.pos.y,1.35*d.body.get_velocity().get_x()+A.randomFloat(50,250),1.35*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.FRY_BIT_3,d.pos.x,d.pos.y,1.35*d.body.get_velocity().get_x()+A.randomFloat(50,250),1.35*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.FRY_BIT_4,
d.pos.x,d.pos.y,1.2*d.body.get_velocity().get_x()+A.randomFloat(-50,250),1.2*d.body.get_velocity().get_y()-A.randomFloat(100,300))));G.remove(this._curFood,d);d.body.set_space(null);d.doDelete=!0;this._playSplatSfx();break;case 2:this._curFood.push(this._elementManager.addElement(this._requestFood(F.SHAKE_BIT_1,d.pos.x+20*Math.sin(d.rotation*Math.PI/180),d.pos.y-20*Math.cos(d.rotation*Math.PI/180),1.35*d.body.get_velocity().get_x()+A.randomFloat(50,250),1.35*d.body.get_velocity().get_y()-A.randomFloat(100,
300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.SHAKE_BIT_2,d.pos.x+20*Math.sin(d.rotation*Math.PI/180),d.pos.y-20*Math.cos(d.rotation*Math.PI/180),1.5*d.body.get_velocity().get_x()+A.randomFloat(50,250),1.5*d.body.get_velocity().get_y()-A.randomFloat(100,300))));this._curFood.push(this._elementManager.addElement(this._requestFood(F.SHAKE_BIT_3,d.pos.x,d.pos.y,1.2*d.body.get_velocity().get_x()+A.randomFloat(-50,250),1.2*d.body.get_velocity().get_y()-A.randomFloat(100,
300))));G.remove(this._curFood,d);d.body.set_space(null);d.doDelete=!0;this._playSplatSfx();break;case 3:0>=this._traySfxCooldown&&(0.5>A.randomFloat(0,1)?(m.playSound("fling/lunch_tray_hit",A.randomFloat(0.5,0.75)),C.start(function(){m.playSound("fling/lunch_tray_hit_alt",A.randomFloat(0.1,0.2))},0.05)):(m.playSound("fling/lunch_tray_hit_alt",A.randomFloat(0.5,0.75)),C.start(function(){m.playSound("fling/lunch_tray_hit",A.randomFloat(0.1,0.2))},0.05)),this._traySfxCooldown=A.randomFloat(0.1,0.3));
d.body.get_cbTypes().push(this._bitType);break;default:this._playSplatSfx()}if(d.get_foodType()!=F.TRAY)break}if(this._isBit(d.get_foodType()))break}},_resetSimBodies:function(){for(var a=0;4>a;){var b=a++,c;switch(b){case 1:c=K.getFoodPosition(F.FRIES);break;case 2:c=K.getFoodPosition(F.SHAKE);break;case 3:c=K.getFoodPosition(F.TRAY);break;default:c=K.getFoodPosition(F.BURGER)}this._simBodies[b].get_position().setxy(function(){c.zpp_inner.validate();return c.zpp_inner.x}(this),function(){c.zpp_inner.validate();
return c.zpp_inner.y}(this));this._simBodies[b].set_rotation(0);this._simBodies[b].set_velocity(l.get(0,0,null));this._simBodies[b].set_angularVel(0)}},_isBit:function(a){switch(a[1]){case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:return!0;default:return!1}},_getCustDistance:function(){switch(L.saveData.difficultyOrderUp){case 1:return 720;case 2:return 920;default:return 420}},_addObstacles:function(){switch(L.saveData.difficultyOrderUp){case 1:this._elementManager.addElement(new hc({x:370,
y:0},ic.TRASH,this._space,[this._floorType]));break;case 2:this._elementManager.addElement(new hc({x:370,y:0},ic.TRASH,this._space,[this._floorType])),this._elementManager.addElement(new hc({x:300,y:-195},ic.LIGHT,this._space,[this._floorType])),this._elementManager.addElement(new hc({x:600,y:-195},ic.LIGHT,this._space,[this._floorType])),this._elementManager.addElement(new hc({x:900,y:-195},ic.LIGHT,this._space,[this._floorType])),this._elementManager.addElement(new hc({x:1200,y:-195},ic.LIGHT,this._space,
[this._floorType]))}},_playSplatSfx:function(){if(0>=this._splatSfxCooldown){var a=A.randomFloat(0,1);0.35>a?(m.playSound("splat_01",A.randomFloat(0.5,0.75)),C.start(function(){m.playSound("splat_02",A.randomFloat(0.1,0.2))},0.05)):0.65>a?(m.playSound("splat_02",A.randomFloat(0.5,0.75)),C.start(function(){m.playSound("splat_03",A.randomFloat(0.1,0.2))},0.05)):(m.playSound("splat_03",A.randomFloat(0.5,0.75)),C.start(function(){m.playSound("splat_01",A.randomFloat(0.1,0.2))},0.05));this._traySfxCooldown=
A.randomFloat(0.05,0.2)}},_pushNewSplats:function(){for(var a="";10>this._foodSplats.length;){switch(A.randomInt(0,6)){case 0:case 1:a="fling/floor_ketchup_1";break;case 2:case 3:a="fling/floor_mustard";break;case 4:a="fling/floor_soda_1";break;case 5:a="fling/floor_soda_2";break;case 6:a="fling/floor_ketchup_2"}this._foodSplats.push(this._elementManager.addElement(new v({asset:a,x:-3E3,y:-3E3,scale:0,alpha:0}),"layer_bg"))}},_tryAddFoodSplat:function(a){if(!a.hasSplatted&&0<this._foodSplats.length&&
150<a.get_y()&&(-300<a.get_x()&&-200>a.get_x()||50<a.get_x())){var b=this._foodSplats.pop();b.pos.to(a.get_x(),200+A.randomFloat(-35,35));this._tween.tween({target:b,duration:0.2,ease:s.outQuad},{scale:0.7,alpha:1});a.hasSplatted=!0}},__class__:le});var hg=function(a){gc.call(this,a);switch(L.saveData.difficultySodaMachine){case 1:this._parseLevelXML("soda_machine_data_level_2.xml");break;case 2:this._parseLevelXML("soda_machine_data_level_3.xml");break;default:this._parseLevelXML("soda_machine_data_level_1.xml")}this._elementManager.addElement(new v({asset:"soda_machine/bg_soda",
x:0,y:0}),"layer_bg");this._elementManager.addElement(new v({asset:"soda_machine/button_pink_off",x:-195,y:38}),"layer_fg");this._elementManager.addElement(new v({asset:"soda_machine/button_green_off",x:5,y:38}),"layer_fg");this._elementManager.addElement(new v({asset:"soda_machine/button_blue_off",x:197,y:38}),"layer_fg");this._leftLight=this._elementManager.addElement(new v({asset:"soda_machine/button_pink_glow",x:-195,y:25,alpha:0}),"layer_fg");this._midLight=this._elementManager.addElement(new v({asset:"soda_machine/button_green_glow",
x:5,y:25,alpha:0}),"layer_fg");this._rightLight=this._elementManager.addElement(new v({asset:"soda_machine/button_blue_glow",x:197,y:25,alpha:0}),"layer_fg");this._cup=this._elementManager.addElement(new v({asset:"soda_machine/cup_back",x:10,y:170}),"layer_bg");this._cupFront=this._elementManager.addElement(new v({asset:"soda_machine/cup_front",x:10,y:this._cup.get_y()+12}),"layer_fg");this._gameTimer=0;this._startDelay=1.56;this._rightHoldTimer=this._midHoldTimer=this._leftHoldTimer=this._endDelay=
0;this._curNotes=[];this._curStreams=[];this._splashes=[];this._splashes.push(this._elementManager.addElement(new Gb(0),"layer_fg"));this._splashes.push(this._elementManager.addElement(new Gb(1),"layer_fg"));this._splashes.push(this._elementManager.addElement(new Gb(2),"layer_fg"));q.setInt("INT_SCORE_SODA_MACHINE",0);this._elementManager.addElement(new v({asset:"soda_machine/overlay"}),"layer_fg");m.stopMusic(1);this._endWhenDone=!1};h["world.minigames.Mini_SodaMachine"]=hg;hg.__name__=["world",
"minigames","Mini_SodaMachine"];hg.__super__=$;hg.prototype=y($.prototype,{_initPools:function(){$.prototype._initPools.call(this);this._cacheManager.addCache("noteblockcache",fe,30);this._cacheManager.addCache("sodastreamcache",S,30)},dispose:function(){C.stop("esl1",!1);C.stop("esl2",!1);C.stop("esm1",!1);C.stop("esm2",!1);C.stop("esr1",!1);C.stop("esr2",!1);this._cupFront=this._cup=this._rightLight=this._midLight=this._leftLight=this._splashes=this._curStreams=this._curNotes=this._noteLanes=this._noteHoldDurs=
this._noteTimings=null;$.prototype.dispose.call(this)},_parseLevelXML:function(a){null==a&&(a="");a=o.getXML(a);this._noteTimings=[];this._noteHoldDurs=[];this._noteLanes=[];for(a=a.nodes.resolve("string").iterator();a.hasNext();){var b=a.next();this._noteTimings.push(B.parseFloat(b.att.resolve("startTime"))-0.5+1.56);this._noteHoldDurs.push(B.parseFloat(b.att.resolve("hold")));this._noteLanes.push(B.parseInt(b.att.resolve("lane")))}},update:function(a){$.prototype.update.call(this,a);if(!0!=q.getBool("BOOL_PAUSED")){if(0<
this._startDelay&&(this._startDelay-=a,0>=this._startDelay)){var b=this._elementManager.addElement(new za({library:"soda_machine/soda_light_effects",alpha:0}),"layer_fg");switch(L.saveData.difficultySodaMachine){case 1:m.playSound("soda_machine/GetUp",1);b.animate("soda_getup");break;case 2:m.playSound("soda_machine/Beastmode",1);b.animate("soda_beastmode");break;default:m.playSound("soda_machine/Devine",1),b.animate("soda_groove")}this._tween.tween({target:b,duration:0.5,ease:s.inOutQuad},{alpha:0.8})}0<
this._endDelay&&(this._endDelay-=a,0>=this._endDelay&&(q.setBool("BOOL_LEVEL_WIN",!0),m.playMusic("sfx/happy-music",0.3),5E3<q.getInt("INT_SCORE_SODA_MACHINE")&&2>L.saveData.difficultySodaMachine&&L.saveData.difficultySodaMachine++));this._gameTimer+=a;for(b=0;b<this._noteTimings.length;)if(this._gameTimer>this._noteTimings[b]){var c=this._elementManager.addElement(this._cacheManager.requestElement("noteblockcache"),"layer_world");c.init(this._noteLanes[b],this._noteHoldDurs[b],this);this._curNotes.push(c);
this._noteTimings.splice(b,1);this._noteHoldDurs.splice(b,1);this._noteLanes.splice(b,1);0==this._noteTimings.length&&(this._endWhenDone=!0);this._elementManager.updateZSort("layer_world")}else b++;0<this._leftHoldTimer&&(this._leftHoldTimer+=a,0.0875<this._leftHoldTimer&&(this._leftHoldTimer-=0.0875,b=this._elementManager.addElement(this._cacheManager.requestElement("sodastreamcache"),"layer_bg"),b.init(0,this,this._leftHoldTimer),this._curStreams.push(b)));0<this._midHoldTimer&&(this._midHoldTimer+=
a,0.0875<this._midHoldTimer&&(this._midHoldTimer-=0.0875,b=this._elementManager.addElement(this._cacheManager.requestElement("sodastreamcache"),"layer_bg"),b.init(1,this,this._midHoldTimer),this._curStreams.push(b)));0<this._rightHoldTimer&&(this._rightHoldTimer+=a,0.0875<this._rightHoldTimer&&(this._rightHoldTimer-=0.0875,a=this._elementManager.addElement(this._cacheManager.requestElement("sodastreamcache"),"layer_bg"),a.init(2,this,this._rightHoldTimer),this._curStreams.push(a)));a=this._getCupIndex();
if(-1!=a){b=0;for(c=this._curStreams;b<c.length;){var d=c[b];++b;d.get_laneIndex()==a&&155<d.pos.y&&this.removeSodaStream(d)}this._splashes[a].stop()}}},_onInput:function(a,b){if(!q.getBool("BOOL_PAUSED")&&!(q.getBool("BOOL_CORN_CARE_OPEN")||this._state!=nb.GAMEPLAY)){this._elementManager.camera.getWorldPositionOfScreenPoint(z.pointer.get_currentPos().x,z.pointer.get_currentPos().y,0,this._inputPos);var c=this._inputPos.x,d=this._inputPos.y,e=-1;a==Q.POINTER&&0<d&&(100<c&&300>c?e=2:100>c&&-100<c?
e=1:-100>c&&-300<c&&(e=0));a==Q.MOVE_RIGHT?e=2:a==Q.MOVE_UP||a==Q.MOVE_DOWN?e=1:a==Q.MOVE_LEFT&&(e=0);if(-1!=e){c=!1;for(d=0;d<this._curNotes.length&&!c;)this._curNotes[d].get_laneIndex()==e&&(c=b?this._curNotes[d].tapDown():this._curNotes[d].tapUp()),c?(this._elementManager.addElement(this._cacheManager.requestElement("pointsparticlecache"),"layer_fg").init(this._curNotes[d].pos.x,this._curNotes[d].pos.y,1),q.modifyInt("INT_SCORE_SODA_MACHINE",0.5<A.randomFloat(0,1)?250:300),q.getInt("INT_SCORE_SODA_MACHINE")>
q.getInt("INT_HISCORE_SODA_MACHINE")&&q.setInt("INT_HISCORE_SODA_MACHINE",q.getInt("INT_SCORE_SODA_MACHINE"))):d++;if(b){u.goodInput.dispatch();switch(e){case 0:this._tween.tween({target:this._cup,duration:0.075,ease:s.outQuad,overwrite:!0},{x:-200});this._tween.tween({target:this._cupFront,duration:0.075,ease:s.outQuad,overwrite:!0},{x:-200});break;case 1:this._tween.tween({target:this._cup,duration:0.075,ease:s.outQuad,overwrite:!0},{x:10});this._tween.tween({target:this._cupFront,duration:0.075,
ease:s.outQuad,overwrite:!0},{x:10});break;case 2:this._tween.tween({target:this._cup,duration:0.075,ease:s.outQuad,overwrite:!0},{x:200}),this._tween.tween({target:this._cupFront,duration:0.075,ease:s.outQuad,overwrite:!0},{x:200})}switch(e){case 0:this._leftLight.alpha=1;break;case 1:this._midLight.alpha=1;break;case 2:this._rightLight.alpha=1}switch(e){case 0:this._leftHoldTimer=0.0875;break;case 1:this._midHoldTimer=0.0875;break;case 2:this._rightHoldTimer=0.0875}}else{if(a==Q.POINTER)this._leftLight.alpha=
0,this._midLight.alpha=0,this._rightLight.alpha=0;else switch(e){case 0:this._leftLight.alpha=0;break;case 1:this._midLight.alpha=0;break;case 2:this._rightLight.alpha=0}switch(e){case 0:this._leftHoldTimer=0;break;case 1:this._midHoldTimer=0;break;case 2:this._rightHoldTimer=0}}}}},_getCupIndex:function(){return null==this._cup||null==this._cup.pos?-1:-175>this._cup.pos.x?0:-15<this._cup.pos.x&&35>this._cup.pos.x?1:175<this._cup.pos.x?2:-1},removeNoteBlock:function(a){G.remove(this._curNotes,a);
this._endWhenDone&&0==this._curNotes.length&&(this._endDelay=1.56);0==a.get_laneIndex()?0==this._leftHoldTimer&&(C.stop("esl1",!1),this._spawnExtraSodaStreamLeft(),C.start(n(this,this._spawnExtraSodaStreamLeft),0.0875,"esl1")):1==a.get_laneIndex()?0==this._midHoldTimer&&(C.stop("esm1",!1),this._spawnExtraSodaStreamMid(),C.start(n(this,this._spawnExtraSodaStreamMid),0.0875,"esm1")):2==a.get_laneIndex()&&0==this._rightHoldTimer&&(C.stop("esr1",!1),this._spawnExtraSodaStreamRight(),C.start(n(this,this._spawnExtraSodaStreamRight),
0.0875,"esr1"))},_spawnExtraSodaStreamLeft:function(){if(0==this._leftHoldTimer){var a=this._elementManager.addElement(this._cacheManager.requestElement("sodastreamcache"),"layer_bg");a.init(0,this,this._leftHoldTimer);this._curStreams.push(a)}},_spawnExtraSodaStreamMid:function(){if(0==this._midHoldTimer){var a=this._elementManager.addElement(this._cacheManager.requestElement("sodastreamcache"),"layer_bg");a.init(1,this,this._midHoldTimer);this._curStreams.push(a)}},_spawnExtraSodaStreamRight:function(){if(0==
this._rightHoldTimer){var a=this._elementManager.addElement(this._cacheManager.requestElement("sodastreamcache"),"layer_bg");a.init(2,this,this._rightHoldTimer);this._curStreams.push(a)}},removeSodaStream:function(a){G.remove(this._curStreams,a);a.doDelete=!0;this._getCupIndex()!=a.get_laneIndex()&&this._splashes[a.get_laneIndex()].play()},__class__:hg});var Hc=function(a){gc.call(this,a);this._elementManager.addElement(new Fa({color:13697023,x:-150,y:-135.5,sizeX:300,sizeY:300}),"layer_bg");this._elementManager.addElement(new zd({library:"kel",
x:-85,y:120,scale:0.32}),"layer_bg").animate("idle");this._elementManager.addElement(new Fa({color:13697016,x:-150,y:-135.5,sizeX:300,sizeY:300,alpha:0.4}),"layer_bg");this._elementManager.addElement(new v({asset:"foodstack/fridge",x:-990,y:0}),"layer_bg");this._elementManager.addElement(new v({asset:"foodstack/fridge",x:0,y:0}),"layer_bg");this._elementManager.addElement(new v({asset:"foodstack/fridge",x:990,y:0}),"layer_bg");this._elementManager.addElement(new v({asset:"foodstack/fridge_frame",
x:-120,y:0}),"layer_fg");this._space=new Pf(Hc._GRAVITY);this._collisionTypes=[];this._boundaryType=new Ma;this._collisionTypes.push(this._boundaryType);this._blockType=new Ma;this._collisionTypes.push(this._blockType);this._activeType=new Ma;this._collisionTypes.push(this._activeType);null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Na,f.internal=!1);this._boundaryBody=new Vb(f.BodyType_STATIC);var a=Array(4),b=new l(-415,-400);a[0]=b;b=new l(-415,400);a[1]=b;b=new l(-430,400);a[2]=
b;b=new l(-430,-400);a[3]=b;b=new tb(a);this._boundaryBody.zpp_inner.wrap_shapes.add(b);b=new l(165,-400);a[3]=b;b=new l(165,400);a[2]=b;b=new l(210,400);a[1]=b;b=new l(210,-400);a[0]=b;b=new tb(a);this._boundaryBody.zpp_inner.wrap_shapes.add(b);this._boundaryBody.get_position().setxy(0,0);this._boundaryBody.get_cbTypes().push(gb.ANY_BODY);this._boundaryBody.get_cbTypes().push(this._boundaryType);this._boundaryBody.set_space(this._space);null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Na,
f.internal=!1);this._boundaryBody=new Vb(f.BodyType_STATIC);b=new l(-400,250);a[0]=b;b=new l(170,250);a[1]=b;b=new l(170,300);a[2]=b;b=new l(-400,300);a[3]=b;b=new tb(a);this._boundaryBody.zpp_inner.wrap_shapes.add(b);this._boundaryBody.get_position().setxy(0,0);this._boundaryBody.get_cbTypes().push(gb.ANY_BODY);this._boundaryBody.get_cbTypes().push(this._boundaryType);this._boundaryBody.get_cbTypes().push(this._blockType);this._boundaryBody.set_space(this._space);this._lineClearRays=[];for(a=0;10>
a;)b=a++,b=new ri(new l(-431,250-56*(b+0.5)),new l(1,0)),b.zpp_inner.maxdist=642,b.zpp_inner.maxdist,this._lineClearRays.push(b);this._lineClearIndex=0;this._space.zpp_inner.wrap_listeners.add(new Nd(function(){null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new sb,f.internal=!1);return f.CbEvent_BEGIN}(this),function(){null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new Ja,f.internal=!1);return f.InteractionType_COLLISION}(this),this._activeType,this._blockType,
n(this,this._activeTouch)));this._rightHeld=this._leftHeld=this._pointerHeld=this._canControlFoodBlock=!1;this._spawnTimer=1.5;switch(L.saveData.difficultyStackingFood){case 1:this._speedUp=1;this._blockCount=30;break;case 2:this._speedUp=1.25;this._blockCount=45;break;default:this._speedUp=0.8,this._blockCount=25}q.setInt("INT_SCORE_STACKING_FOOD",0);q.setInt("INT_PIECES_LEFT_STACKING_FOOD",this._blockCount);this._particleLeft=!1;this._curFoodBlock=null};h["world.minigames.Mini_StackingFood"]=Hc;
Hc.__name__=["world","minigames","Mini_StackingFood"];Hc.__super__=$;Hc.prototype=y($.prototype,{dispose:function(){this._curFoodBlock=this._lineClearRays=this._activeType=this._blockType=this._boundaryType=this._collisionTypes=this._boundaryBody=this._space=null;$.prototype.dispose.call(this)},_addEventListeners:function(){u.foodStackBlockClear.add(n(this,this._onBlockClear));$.prototype._addEventListeners.call(this)},_removeEventListeners:function(){u.foodStackBlockClear.remove(n(this,this._onBlockClear));
$.prototype._removeEventListeners.call(this)},update:function(a){$.prototype.update.call(this,a);if(!0!=q.getBool("BOOL_PAUSED")){this._speedUp+=a/60;this._space.step(a*this._speedUp);if((null==this._curFoodBlock||this._curFoodBlock.doDelete||!this._canControlFoodBlock&&0.1>this._curFoodBlock.body.get_velocity().get_x()&&0.1>this._curFoodBlock.body.get_velocity().get_y())&&0==this._spawnTimer)this._spawnTimer=1.5;0>this._spawnTimer&&(0<this._blockCount?(this._curFoodBlock=this._requestPiece(this._getBlockType(A.randomInt(0,
29))),this._elementManager.addElement(this._curFoodBlock),this._curFoodBlock.move(-100,-280),this._canControlFoodBlock=!0,this._spawnTimer=0,this._blockCount--,q.setInt("INT_PIECES_LEFT_STACKING_FOOD",this._blockCount)):(2>L.saveData.difficultyStackingFood&&L.saveData.difficultyStackingFood++,q.setBool("BOOL_LEVEL_WIN",!0)));if(0<this._spawnTimer){this._spawnTimer-=a;var b=this._space.rayMultiCast(this._lineClearRays[this._lineClearIndex],!0);this._lineClearIndex++;this._lineClearIndex>=this._lineClearRays.length&&
(this._lineClearIndex=0);if(0.835<this._getPercentageRowFilled(b)){b.zpp_inner.valmod();for(b=yc.get(b);b.hasNext();){var c;b.zpp_critical=!1;c=b.zpp_inner.at(b.zpp_i++);null!=c.zpp_inner.shape.get_body()&&!c.zpp_inner.shape.get_body().get_cbTypes().has(this._boundaryType)&&!c.zpp_inner.shape.get_body().get_cbTypes().has(this._activeType)&&(this._elementManager.addElement(this._cacheManager.requestElement("pointsparticlecache")).init(c.zpp_inner.shape.get_body().get_position().get_x(),c.zpp_inner.shape.get_body().get_position().get_y(),
0.75),c.zpp_inner.shape.get_body().get_shapes().clear(),q.modifyInt("INT_SCORE_STACKING_FOOD",0.5<A.randomFloat(0,1)?250:300),q.getInt("INT_SCORE_STACKING_FOOD")>q.getInt("INT_HISCORE_STACKING_FOOD")&&q.setInt("INT_HISCORE_STACKING_FOOD",q.getInt("INT_SCORE_STACKING_FOOD")))}}}if(this._canControlFoodBlock)if(this._pointerHeld||this._leftHeld||this._rightHeld)if(this._pointerHeld&&z.pointer.get_currentPos().x>oa.STAGE_CENTER_X||this._rightHeld)this._curFoodBlock.body.set_velocity(new l(500*a+this._curFoodBlock.body.get_velocity().get_x(),
Hc._DROP_SPEED)),this._curFoodBlock.body.set_angularVel(this._curFoodBlock.body.zpp_inner.angvel+5*a);else{if(this._pointerHeld&&z.pointer.get_currentPos().x<oa.STAGE_CENTER_X||this._leftHeld)this._curFoodBlock.body.set_velocity(new l(-500*a+this._curFoodBlock.body.get_velocity().get_x(),Hc._DROP_SPEED)),this._curFoodBlock.body.set_angularVel(this._curFoodBlock.body.zpp_inner.angvel+-5*a)}else 0<this._curFoodBlock.body.get_velocity().get_x()?this._curFoodBlock.body.set_velocity(new l(-200*a+this._curFoodBlock.body.get_velocity().get_x()*
(1-2*a),Hc._DROP_SPEED)):this._curFoodBlock.body.set_velocity(new l(200*a+this._curFoodBlock.body.get_velocity().get_x()*(1-2*a),Hc._DROP_SPEED)),0<this._curFoodBlock.body.zpp_inner.angvel?this._curFoodBlock.body.set_angularVel(this._curFoodBlock.body.zpp_inner.angvel+-0.5*a):this._curFoodBlock.body.set_angularVel(this._curFoodBlock.body.zpp_inner.angvel+0.5*a)}},_initWorld:function(){$.prototype._initWorld.call(this)},_onInput:function(a,b){if(!q.getBool("BOOL_PAUSED")&&!(q.getBool("BOOL_CORN_CARE_OPEN")||
this._state!=nb.GAMEPLAY))$.prototype._onInput.call(this,a,b),a==Q.POINTER&&(b&&(this._rightHeld=this._leftHeld=!1,u.goodInput.dispatch()),this._pointerHeld=b),a==Q.MOVE_LEFT&&(b&&(this._rightHeld=this._pointerHeld=!1,u.goodInput.dispatch()),this._leftHeld=b),a==Q.MOVE_RIGHT&&(b&&(this._leftHeld=this._pointerHeld=!1,u.goodInput.dispatch()),this._rightHeld=b)},_requestPiece:function(a){var b=new jc;b.init(this._space,[this._blockType,this._activeType],a);return b},_initPools:function(){$.prototype._initPools.call(this);
this._cacheManager.addCache("foodblockcache",$f,30)},_getBlockType:function(a){switch(a){case 1:return W.BLENDER;case 2:return W.SURFBOARD;case 3:case 4:case 5:case 6:case 7:return W.TOMATOES;case 8:case 9:case 10:case 11:case 12:case 13:case 14:return W.LETTUCE;case 15:case 16:case 17:case 18:case 19:case 20:return W.BURGS;case 21:case 22:return W.BUNS;case 23:case 24:case 25:return W.CHEESE;case 26:case 27:case 28:case 29:return W.ICE_CREAM;default:return W.BOOT}},_getPercentageRowFilled:function(a){var b=
-1337,c=0;a.zpp_inner.valmod();for(a=yc.get(a);a.hasNext();){var d;a.zpp_critical=!1;d=a.zpp_inner.at(a.zpp_i++);-1337==b?b=d.zpp_inner.toiDistance:(c+=d.zpp_inner.toiDistance-b,b=-1337)}return c/672},_activeTouch:function(){q.modifyInt("INT_SCORE_STACKING_FOOD",100);q.getInt("INT_SCORE_STACKING_FOOD")>q.getInt("INT_HISCORE_STACKING_FOOD")&&q.setInt("INT_HISCORE_STACKING_FOOD",q.getInt("INT_SCORE_STACKING_FOOD"));if(-270>this._curFoodBlock.pos.y)q.setBool("BOOL_LEVEL_WIN",!0);else switch(this._curFoodBlock.body.get_cbTypes().remove(this._activeType),
this._canControlFoodBlock=!1,this._curFoodBlock.get_type()[1]){case 0:m.playSound("foodstack/frozen_uh_boot");break;case 3:m.playSound("foodstack/frozen_patties");break;case 1:m.playSound("foodstack/frozen_wood_pallet");break;case 2:case 6:m.playSound("foodstack/frozen_veggie_drop");break;case 5:m.playSound("sfx/impact_01");break;case 4:m.playSound("sfx/impact_02");break;case 7:m.playSound("foodstack/frozen_patties");break;case 8:0.5>A.randomFloat(0,1)?m.playSound("sfx/impact_02"):m.playSound("foodstack/frozen_uh_boot")}},
_onBlockClear:function(a,b){switch(a[1]){case 0:this._requestFoodParticle(b.x,b.y,"foodstack/boot_bit_1");this._requestFoodParticle(b.x,b.y,"foodstack/boot_bit_2");this._requestFoodParticle(b.x,b.y,"foodstack/boot_bit_3");this._requestFoodParticle(b.x,b.y,"foodstack/boot_bit_4");break;case 1:this._requestFoodParticle(b.x,b.y,"foodstack/tomato_bit_1");this._requestFoodParticle(b.x,b.y,"foodstack/tomato_bit_2");this._requestFoodParticle(b.x,b.y,"foodstack/tomato_bit_3");this._requestFoodParticle(b.x,
b.y,"foodstack/tomato_bit_4");break;case 2:this._requestFoodParticle(b.x,b.y,"foodstack/lettuce_bit_1");this._requestFoodParticle(b.x,b.y,"foodstack/lettuce_bit_2");this._requestFoodParticle(b.x,b.y,"foodstack/lettuce_bit_3");this._requestFoodParticle(b.x,b.y,"foodstack/lettuce_bit_4");break;case 3:this._requestFoodParticle(b.x,b.y,"fling/burg_bit_1");this._requestFoodParticle(b.x,b.y,"fling/burg_bit_2");this._requestFoodParticle(b.x,b.y,"fling/burg_bit_3");this._requestFoodParticle(b.x,b.y,"fling/burg_bit_4");
break;case 4:this._requestFoodParticle(b.x,b.y,"foodstack/blender_bit_1");this._requestFoodParticle(b.x,b.y,"foodstack/blender_bit_2");this._requestFoodParticle(b.x,b.y,"foodstack/blender_bit_2");this._requestFoodParticle(b.x,b.y,"foodstack/blender_bit_3");break;case 5:this._requestFoodParticle(b.x,b.y,"foodstack/burgers_bit_1");this._requestFoodParticle(b.x,b.y,"foodstack/burgers_bit_2");this._requestFoodParticle(b.x,b.y,"foodstack/burgers_bit_3");this._requestFoodParticle(b.x,b.y,"foodstack/burgers_bit_4");
break;case 6:this._requestFoodParticle(b.x,b.y,"foodstack/cheese_bit_1");this._requestFoodParticle(b.x,b.y,"foodstack/cheese_bit_2");this._requestFoodParticle(b.x,b.y,"foodstack/cheese_bit_3");this._requestFoodParticle(b.x,b.y,"foodstack/cheese_bit_3");break;case 7:this._requestFoodParticle(b.x,b.y,"foodstack/icecream_bit_1");this._requestFoodParticle(b.x,b.y,"foodstack/icecream_bit_1");this._requestFoodParticle(b.x,b.y,"foodstack/icecream_bit_2");this._requestFoodParticle(b.x,b.y,"foodstack/icecream_bit_3");
break;case 8:this._requestFoodParticle(b.x,b.y,"foodstack/surfboard_bit_1"),this._requestFoodParticle(b.x,b.y,"foodstack/surfboard_bit_1"),this._requestFoodParticle(b.x,b.y,"foodstack/surfboard_bit_2"),this._requestFoodParticle(b.x,b.y,"foodstack/surfboard_bit_3")}},_requestFoodParticle:function(a,b,c){var d=this._cacheManager.requestElement("foodblockcache");this._elementManager.addElement(d);d.init(a,b,this._particleLeft,c);this._particleLeft=!this._particleLeft},__class__:Hc});var gg=function(a){gc.call(this,
a);this._possibleCustomers="aria,reece,gabriell,ryan,lex,chinguun,nathan,kate".split(",");this._elementManager.addElement(new v({asset:"taking_orders/taking_orders_bg",scaleX:1.03}));this._customerSpine=this._elementManager.addElement(new za({library:"taking_orders/spine/gb_characters",x:-250,y:250,originY:1,scale:0.8}));this._reactSprite=this._elementManager.addElement(new v({asset:"taking_orders/bubble",x:-150,y:-150,scale:0}));this._reactDots=[];this._reactDots.push(this._reactSprite.addChild(new v({asset:"taking_orders/blankly",
x:-40,y:-10,alpha:0})));this._reactDots.push(this._reactSprite.addChild(new v({asset:"taking_orders/blankly",x:0,y:-10,alpha:0})));this._reactDots.push(this._reactSprite.addChild(new v({asset:"taking_orders/blankly",x:40,y:-10,alpha:0})));this._reactShrug=this._reactSprite.addChild(new v({asset:"taking_orders/accept",x:0,y:-10,alpha:0}));this._elementManager.addElement(new v({asset:"taking_orders/counter",x:30,y:0}));this._kelSpine=this._elementManager.addElement(new za({library:"taking_orders/spine/taking_orders_kel",
x:270,y:320,originY:1}));switch(q.getInt("INT_COSTUME")){case 0:this._kelSpine.setSkin("kel_default");break;case 1:this._kelSpine.setSkin("kel_swim");break;case 2:this._kelSpine.setSkin("kel_bling");break;case 3:this._kelSpine.setSkin("kel_tux");break;case 4:this._kelSpine.setSkin("kel_parka");break;case 5:this._kelSpine.setSkin("kel_default");break;case 6:this._kelSpine.setSkin("kel_sports")}this._customerSpine.animate("taking_orders_idle");this._kelSpine.animate("idle");this._onNextCustomer()};
h["world.minigames.Mini_TakingOrders"]=gg;gg.__name__=["world","minigames","Mini_TakingOrders"];gg.__super__=$;gg.prototype=y($.prototype,{dispose:function(){this._possibleCustomers=this._reactShrug=this._reactDots=this._reactSprite=this._customerSpine=this._kelSpine=null;$.prototype.dispose.call(this)},_addEventListeners:function(){u.takingOrdersNextCustomer.add(n(this,this._onNextCustomer));u.takingOrdersPlayReact.add(n(this,this.playCustReactAnim));u.takingOrdersPlayReact.add(n(this,this._setCustomerEmotion));
u.takingOrdersPlayKelAnim.add(n(this,this.playKelAnimation))},_removeEventListeners:function(){u.takingOrdersNextCustomer.remove(n(this,this._onNextCustomer));u.takingOrdersPlayReact.remove(n(this,this.playCustReactAnim));u.takingOrdersPlayReact.remove(n(this,this._setCustomerEmotion));u.takingOrdersPlayKelAnim.remove(n(this,this.playKelAnimation))},_onNextCustomer:function(){var a=this,b=A.randomInt(0,this._possibleCustomers.length-1);this._customerSpine.scaleX=-this._customerSpine.scaleX;this._tween.tween({target:this._customerSpine,
duration:0.35,ease:s.inQuad},{x:-550}).onComplete(function(){a._customerSpine.scaleX=-a._customerSpine.scaleX;a._customerSpine.setSkin(a._possibleCustomers[b],!0);a._customerSpine.animate("taking_orders_idle");a._setReactSpritePos(a._possibleCustomers[b]);a._possibleCustomers.splice(b,1);a._tween.tween({target:a._customerSpine,duration:0.35,ease:s.outQuad},{x:-250})})},playKelAnimation:function(a){this._kelSpine.animate(a,1,1,0,!0);this._kelSpine.queueAnimation("idle");"SHAKE THEIR BODY"==a&&(this._tween.tween({target:this._customerSpine,
duration:0.05,delay:0.2,ease:s.outQuad},{x:this._customerSpine.get_x()-25}),this._tween.tween({target:this._customerSpine,duration:0.1,ease:s.outQuad},{x:this._customerSpine.get_x()+25}),this._tween.tween({target:this._customerSpine,duration:0.1,ease:s.outQuad},{x:this._customerSpine.get_x()-25}),this._tween.tween({target:this._customerSpine,duration:0.1,ease:s.outQuad},{x:this._customerSpine.get_x()+20}),this._tween.tween({target:this._customerSpine,duration:0.1,ease:s.outQuad},{x:this._customerSpine.get_x()-
20}),this._tween.tween({target:this._customerSpine,duration:0.1,ease:s.outQuad},{x:this._customerSpine.get_x()+20}),this._tween.tween({target:this._customerSpine,duration:0.1,ease:s.outQuad},{x:this._customerSpine.get_x()-15}),this._tween.tween({target:this._customerSpine,duration:0.1,ease:s.outQuad},{x:this._customerSpine.get_x()+15}),this._tween.tween({target:this._customerSpine,duration:0.1,ease:s.outQuad},{x:this._customerSpine.get_x()-15}),this._tween.tween({target:this._customerSpine,duration:0.1,
ease:s.outQuad},{x:this._customerSpine.get_x()+10}),this._tween.tween({target:this._customerSpine,duration:0.05,ease:s.outQuad},{x:this._customerSpine.get_x()}))},playCustReactAnim:function(a){var b=this;switch(a[1]){case 0:case 9:this._reactSprite.setAsset("taking_orders/rage");this._reactSprite.set_scale(0);this._reactSprite.alpha=1;this._tween.tween({target:this._reactSprite,duration:0.125,ease:s.outQuad},{rotation:15,scale:1});this._tween.tween({target:this._reactSprite,duration:0.25,ease:s.inOutQuad},
{rotation:-15});this._tween.tween({target:this._reactSprite,duration:0.25,ease:s.inOutQuad},{rotation:15});this._tween.tween({target:this._reactSprite,duration:0.25,ease:s.inOutQuad},{rotation:-15});this._tween.tween({target:this._reactSprite,duration:0.25,ease:s.inOutQuad},{rotation:15});this._tween.tween({target:this._reactSprite,duration:0.25,ease:s.inOutQuad},{rotation:-15});this._tween.tween({target:this._reactSprite,duration:0.25,ease:s.inOutQuad},{rotation:15});this._tween.tween({target:this._reactSprite,
duration:0.25,ease:s.inOutQuad},{rotation:-15});this._tween.tween({target:this._reactSprite,duration:0.25,ease:s.inOutQuad},{rotation:15});this._tween.tween({target:this._reactSprite,duration:0.25,ease:s.inOutQuad},{rotation:-15});this._tween.tween({target:this._reactSprite,duration:0.25,ease:s.inOutQuad},{rotation:15});this._tween.tween({target:this._reactSprite,duration:0.125,ease:s.inQuad},{rotation:0,scale:0});m.playSound("taking_orders/customer_order_action_alt02");break;case 1:this._reactSprite.setAsset("taking_orders/confused");
this._reactSprite.set_scale(0);this._reactSprite.alpha=1;this._tween.tween({target:this._reactSprite,duration:0.2,ease:s.outQuad},{scale:1});this._tween.tween({target:this._reactSprite,duration:3,ease:s.linear,thread:"rot"},{rotation:720}).onComplete(function(){b._reactSprite.rotation=0});this._tween.tween({target:this._reactSprite,duration:0.2,delay:2.6,ease:s.inQuad},{scale:0});m.playSound("taking_orders/customer_order_action03");break;case 2:this._reactSprite.setAsset("taking_orders/bubble");this._reactSprite.pos.to(this._reactSprite.pos.x+
40,this._reactSprite.pos.y);this._reactSprite.set_scale(0);this._reactSprite.alpha=1;this._reactDots[0].alpha=0;this._reactDots[1].alpha=0;this._reactDots[2].alpha=0;this._tween.tween({target:this._reactSprite,duration:0.2,ease:s.outQuad},{scale:1});C.start(function(){b._reactDots[0].alpha=1},0.525);C.start(function(){b._reactDots[1].alpha=1},0.85);C.start(function(){b._reactDots[2].alpha=1},1.175);C.start(function(){b._reactDots[0].alpha=0;b._reactDots[1].alpha=0;b._reactDots[2].alpha=0},1.5);C.start(function(){b._reactDots[0].alpha=
1},1.825);C.start(function(){b._reactDots[1].alpha=1},2.15);C.start(function(){b._reactDots[2].alpha=1},2.475);this._tween.tween({target:this._reactSprite,duration:0.2,delay:2.6,ease:s.inQuad},{scale:0}).onComplete(function(){b._reactDots[0].alpha=0;b._reactDots[1].alpha=0;b._reactDots[2].alpha=0});m.playSound("taking_orders/customer_order_action_01");break;case 3:this._reactSprite.setAsset("taking_orders/shocked");this._reactSprite.set_scale(0);this._reactSprite.alpha=1;this._tween.tween({target:this._reactSprite,
duration:0.25,ease:s.outBack},{x:this._reactSprite.get_x()+15,scaleX:-1.2,scaleY:0.2});this._tween.tween({target:this._reactSprite,duration:0.1,ease:s.inQuad},{x:this._reactSprite.get_x()+17,y:this._reactSprite.get_y()-35,scaleX:-1,scaleY:1});this._tween.tween({target:this._reactSprite,duration:0.1,ease:s.outQuad},{x:this._reactSprite.get_x()+19,y:this._reactSprite.get_y()-70});this._tween.tween({target:this._reactSprite,duration:0.6,ease:s.inOutBack},{x:this._reactSprite.get_x()+15,y:this._reactSprite.get_y()});
this._tween.tween({target:this._reactSprite,duration:0.2,ease:s.inQuad,delay:1.75},{x:this._reactSprite.get_x()+10,y:this._reactSprite.get_y()-20,scaleX:0,scaleY:0});m.playSound("taking_orders/customer_order_action_alt");break;case 4:this._reactSprite.setAsset("taking_orders/sweatdroptear");this._reactSprite.set_scale(1);this._reactSprite.alpha=0;this._reactSprite.set_y(this._reactSprite.get_y()-20);this._tween.tween({target:this._reactSprite,duration:0.85,ease:s.inQuad},{y:this._reactSprite.get_y()+
20,alpha:1});this._tween.tween({target:this._reactSprite,duration:0.85,ease:s.outQuad},{y:this._reactSprite.get_y()+40,alpha:0});m.playSound("taking_orders/customer_order_action03");break;case 5:this._reactSprite.setAsset("taking_orders/not_digging");this._reactSprite.set_scale(0);this._reactSprite.alpha=1;this._tween.tween({target:this._reactSprite,duration:0.2,ease:s.outBack},{scale:1});C.start(function(){b._reactSprite.scaleX*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},0.15);C.start(function(){b._reactSprite.scaleY*=
-1;b._reactSprite.rotation=A.randomFloat(0,360)},0.3);C.start(function(){b._reactSprite.scaleX*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},0.45);C.start(function(){b._reactSprite.scaleY*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},0.6);C.start(function(){b._reactSprite.scaleX*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},0.75);C.start(function(){b._reactSprite.scaleY*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},0.9);C.start(function(){b._reactSprite.scaleX*=-1;b._reactSprite.rotation=
A.randomFloat(0,360)},1.05);C.start(function(){b._reactSprite.scaleY*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},1.2);C.start(function(){b._reactSprite.scaleX*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},1.35);C.start(function(){b._reactSprite.scaleY*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},1.5);C.start(function(){b._reactSprite.scaleX*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},1.65);C.start(function(){b._reactSprite.scaleY*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},
1.8);C.start(function(){b._reactSprite.scaleX*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},1.95);C.start(function(){b._reactSprite.scaleY*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},2.1);C.start(function(){b._reactSprite.scaleX*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},2.25);C.start(function(){b._reactSprite.scaleY*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},2.4);C.start(function(){b._reactSprite.scaleX*=-1;b._reactSprite.rotation=A.randomFloat(0,360)},2.55);C.start(function(){b._reactSprite.scaleY*=
-1;b._reactSprite.rotation=A.randomFloat(0,360)},2.7);this._tween.tween({target:this._reactSprite,duration:0.1,delay:2.51,ease:s.inBack},{scale:0}).onComplete(function(){b._reactSprite.rotation=0});m.playSound("taking_orders/customer_order_action_alt02");break;case 6:this._reactSprite.setAsset("taking_orders/not_sure");this._reactSprite.set_scale(0);this._reactSprite.alpha=1;this._tween.tween({target:this._reactSprite,duration:0.35,ease:s.outQuad},{rotation:40,scale:1});this._tween.tween({target:this._reactSprite,
duration:0.5,ease:s.inOutQuad},{rotation:-15});this._tween.tween({target:this._reactSprite,duration:0.5,ease:s.inOutQuad},{rotation:40});this._tween.tween({target:this._reactSprite,duration:0.5,ease:s.inOutQuad},{rotation:-15});this._tween.tween({target:this._reactSprite,duration:0.5,ease:s.inOutQuad},{rotation:40});this._tween.tween({target:this._reactSprite,duration:0.5,ease:s.inOutQuad},{rotation:-15});this._tween.tween({target:this._reactSprite,duration:0.15,ease:s.inQuad},{rotation:0,scale:0});
m.playSound("taking_orders/customer_order_action_01");break;case 7:this._reactSprite.setAsset("taking_orders/bubble");this._reactSprite.pos.to(this._reactSprite.pos.x+40,this._reactSprite.pos.y);this._reactSprite.set_scale(0);this._reactSprite.alpha=1;this._reactDots[0].alpha=0;this._reactDots[1].alpha=0;this._reactDots[2].alpha=0;this._reactShrug.setAsset("taking_orders/accept");this._reactShrug.set_scale(0);this._reactShrug.alpha=1;this._tween.tween({target:this._reactSprite,duration:0.2,ease:s.outQuad},
{scale:1});this._tween.tween({target:this._reactShrug,duration:0.25,ease:s.outQuad},{scale:1.2});this._tween.tween({target:this._reactShrug,duration:0.1,ease:s.inQuad},{scale:1});this._tween.tween({target:this._reactShrug,duration:0.1,delay:1,ease:s.outQuad},{scaleY:1.1,y:this._reactShrug.get_y()-3});this._tween.tween({target:this._reactShrug,duration:0.1,ease:s.inQuad},{scaleY:1,y:this._reactShrug.get_y()});this._tween.tween({target:this._reactSprite,duration:0.2,delay:2.6,ease:s.inQuad},{scale:0}).onComplete(function(){b._reactShrug.alpha=
0});m.playSound("taking_orders/customer_order_action02");break;case 8:case 10:this._reactSprite.setAsset("taking_orders/bubble"),this._reactSprite.pos.to(this._reactSprite.pos.x+40,this._reactSprite.pos.y),this._reactSprite.set_scale(0),this._reactSprite.alpha=1,this._reactDots[0].alpha=0,this._reactDots[1].alpha=0,this._reactDots[2].alpha=0,this._reactShrug.setAsset("taking_orders/correct_check"),this._reactShrug.set_scale(0),this._reactShrug.alpha=1,this._tween.tween({target:this._reactSprite,duration:0.2,
ease:s.outQuad},{scale:1}),this._tween.tween({target:this._reactShrug,duration:0.25,ease:s.outQuad},{scale:1.2}),this._tween.tween({target:this._reactShrug,duration:0.1,ease:s.inQuad},{scale:1}),this._tween.tween({target:this._reactShrug,duration:0.1,delay:1,ease:s.outQuad},{scaleY:1.1,y:this._reactShrug.get_y()-3}),this._tween.tween({target:this._reactShrug,duration:0.1,ease:s.inQuad},{scaleY:1,y:this._reactShrug.get_y()}),this._tween.tween({target:this._reactSprite,duration:0.2,delay:2.6,ease:s.inQuad},
{scale:0}).onComplete(function(){b._reactShrug.alpha=0}),m.playSound("taking_orders/customer_order_action02")}},_setReactSpritePos:function(a){switch(a){case "aria":case "reece":this._reactSprite.pos.to(-150,-150);break;case "gabriell":this._reactSprite.pos.to(-150,-180);break;case "ryan":this._reactSprite.pos.to(-165,-200);break;case "lex":this._reactSprite.pos.to(-150,-200);break;case "chinguun":this._reactSprite.pos.to(-180,-150);break;case "nathan":this._reactSprite.pos.to(-150,-160);break;case "kate":this._reactSprite.pos.to(-150,
-170)}},_setCustomerEmotion:function(a){switch(a[1]){case 3:this._customerSpine.animate("taking_orders_shocked",1,0.7,0,!0);break;case 0:this._customerSpine.animate("taking_orders_angry",1,0.7,0,!0);break;case 5:this._customerSpine.animate("taking_orders_unhappy",1,0.7,0,!0);break;case 1:this._customerSpine.animate("taking_orders_confused",1,0.7,0,!0);break;case 2:case 10:this._customerSpine.animate("taking_orders_stunned",1,0.7,0,!0);break;case 4:this._customerSpine.animate("taking_orders_grimace",
1,0.7,0,!0);break;case 6:this._customerSpine.animate("taking_orders_unsure",1,0.7,0,!0);break;case 7:this._customerSpine.animate("taking_orders_accept",1,0.7,0,!0);break;case 8:this._customerSpine.animate("taking_orders_accept",1,0.7,0,!0);break;case 9:this._customerSpine.animate("taking_orders_messy",1,0.7,0,!0)}this._customerSpine.queueAnimation("taking_orders_idle")},__class__:gg});var U=h["world.minigames.CUST_REACTS"]={__ename__:["world","minigames","CUST_REACTS"],__constructs__:"ANGRY,CONFUSED,STUNNED,SHOCKED,GRIMACE,UNHAPPY,UNSURE,ACCEPT,HAPPY,MESSY,STARSTRUCK".split(",")};
U.ANGRY=["ANGRY",0];U.ANGRY.toString=k;U.ANGRY.__enum__=U;U.CONFUSED=["CONFUSED",1];U.CONFUSED.toString=k;U.CONFUSED.__enum__=U;U.STUNNED=["STUNNED",2];U.STUNNED.toString=k;U.STUNNED.__enum__=U;U.SHOCKED=["SHOCKED",3];U.SHOCKED.toString=k;U.SHOCKED.__enum__=U;U.GRIMACE=["GRIMACE",4];U.GRIMACE.toString=k;U.GRIMACE.__enum__=U;U.UNHAPPY=["UNHAPPY",5];U.UNHAPPY.toString=k;U.UNHAPPY.__enum__=U;U.UNSURE=["UNSURE",6];U.UNSURE.toString=k;U.UNSURE.__enum__=U;U.ACCEPT=["ACCEPT",7];U.ACCEPT.toString=k;U.ACCEPT.__enum__=
U;U.HAPPY=["HAPPY",8];U.HAPPY.toString=k;U.HAPPY.__enum__=U;U.MESSY=["MESSY",9];U.MESSY.toString=k;U.MESSY.__enum__=U;U.STARSTRUCK=["STARSTRUCK",10];U.STARSTRUCK.toString=k;U.STARSTRUCK.__enum__=U;var Hb=function(){};h["zpp_nape.ZPP_ID"]=Hb;Hb.__name__=["zpp_nape","ZPP_ID"];Hb.Interactor=function(){return Hb._Interactor++};Hb.CbType=function(){return Hb._CbType++};Hb.CbSet=function(){return Hb._CbSet++};Hb.Listener=function(){return Hb._Listener++};var Dd=function(){this.body=this.constraint=null;
this.pre_swapped=!1;this.int1=this.int2=this.set=this.wrap_arbiters=this.pre_arbiter=null;this.length=0;this.listener=this.next=this.prev=null;this.event=0;this.outer_body=this.outer_con=this.outer_int=null;this.length=0};h["zpp_nape.callbacks.ZPP_Callback"]=Dd;Dd.__name__=["zpp_nape","callbacks","ZPP_Callback"];Dd.prototype={wrapper_body:function(){null==this.outer_body&&(this.outer_body=new Eg,this.outer_body.zpp_inner=this);return this.outer_body},wrapper_con:function(){null==this.outer_con&&(this.outer_con=
new Gg,this.outer_con.zpp_inner=this);return this.outer_con},wrapper_int:function(){null==this.outer_int&&(this.outer_int=new Hg,this.outer_int.zpp_inner=this);null==this.wrap_arbiters?this.wrap_arbiters=Mc.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=!0;this.wrap_arbiters.zpp_inner.at_ite=null;return this.outer_int},push:function(a){null!=this.prev?this.prev.next=a:this.next=a;a.prev=this.prev;a.next=null;this.prev=a;this.length++},
pop:function(){var a=this.next;this.next=a.next;null==this.next?this.prev=null:this.next.prev=null;this.length--;return a},empty:function(){return null==this.next},__class__:Dd};var pa=function(){this.interactors=this.constraints=null;this.zip_conlisteners=!1;this.conlisteners=null;this.zip_bodylisteners=!1;this.bodylisteners=null;this.zip_listeners=!1;this.manager=this.cbpairs=this.listeners=null;this.id=0;this.next=null;this.count=0;this.cbTypes=null;this.cbTypes=new Ed;this.listeners=new ff;this.zip_listeners=
!0;this.bodylisteners=new oh;this.zip_bodylisteners=!0;this.conlisteners=new ph;this.zip_conlisteners=!0;this.constraints=new Fd;this.interactors=new Gd;this.id=Hb.CbSet();this.cbpairs=new jj};h["zpp_nape.callbacks.ZPP_CbSet"]=pa;pa.__name__=["zpp_nape","callbacks","ZPP_CbSet"];pa.setlt=function(a,b){for(var c=a.cbTypes.head,d=b.cbTypes.head;null!=c&&null!=d;){var e=c.elt,g=d.elt;if(e.id<g.id)return!0;if(g.id<e.id)return!1;c=c.next;d=d.next}return null!=d&&null==c};pa.get=function(a){var b;null==
pa.zpp_pool?b=new pa:(b=pa.zpp_pool,pa.zpp_pool=b.next,b.next=null);null;for(var c=null,a=a.head;null!=a;){var d=a.elt,c=b.cbTypes.insert(c,d);d.cbsets.add(b);a=a.next}return b};pa.single_intersection=function(a,b,c){return a.manager.pair(a,b).single_intersection(c)};pa.find_all=function(a,b,c,d){a.manager.pair(a,b).forall(c,d)};pa.prototype={invalidate_pairs:function(){for(var a=this.cbpairs.head;null!=a;)a.elt.zip_listeners=!0,a=a.next},realvalidate_listeners:function(){this.listeners.clear();for(var a=
this.cbTypes.head;null!=a;){for(var b=null,c=this.listeners.head,d=a.elt.listeners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):null==c||Wb.setlt(e,c.elt)?(e.space==this.manager.space&&(b=this.listeners.inlined_insert(b,e)),d=d.next):(b=c,c=c.next)}a=a.next}},realvalidate_bodylisteners:function(){this.bodylisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.bodylisteners.head,d=a.elt.bodylisteners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,
b=c,c=c.next):null==c||Wb.setlt(e,c.elt)?(!e.options.excluded(this.cbTypes)&&e.space==this.manager.space&&(b=this.bodylisteners.inlined_insert(b,e)),d=d.next):(b=c,c=c.next)}a=a.next}},realvalidate_conlisteners:function(){this.conlisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.conlisteners.head,d=a.elt.conlisteners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):null==c||Wb.setlt(e,c.elt)?(!e.options.excluded(this.cbTypes)&&e.space==this.manager.space&&
(b=this.conlisteners.inlined_insert(b,e)),d=d.next):(b=c,c=c.next)}a=a.next}},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners());this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners());this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},free:function(){this.listeners.clear();this.zip_listeners=!0;this.bodylisteners.clear();this.zip_bodylisteners=!0;this.conlisteners.clear();for(this.zip_conlisteners=
!0;null!=this.cbTypes.head;)this.cbTypes.pop_unsafe().cbsets.remove(this)},__class__:pa};var xb=function(){this.listeners=null;this.zip_listeners=!1;this.a=this.b=this.next=null;this.listeners=new ff};h["zpp_nape.callbacks.ZPP_CbSetPair"]=xb;xb.__name__=["zpp_nape","callbacks","ZPP_CbSetPair"];xb.get=function(a,b){var c;null==xb.zpp_pool?c=new xb:(c=xb.zpp_pool,xb.zpp_pool=c.next,c.next=null);c.zip_listeners=!0;pa.setlt(a,b)?(c.a=a,c.b=b):(c.a=b,c.b=a);return c};xb.setlt=function(a,b){return pa.setlt(a.a,
b.a)||a.a==b.a&&pa.setlt(a.b,b.b)};xb.prototype={__validate:function(){this.listeners.clear();for(var a=this.a.listeners.head,b=this.b.listeners.head;null!=a&&null!=b;){var c=a.elt,d=b.elt;c==d?((c.options1.compatible(this.a.cbTypes)&&c.options2.compatible(this.b.cbTypes)||c.options2.compatible(this.a.cbTypes)&&c.options1.compatible(this.b.cbTypes))&&this.listeners.add(c),a=a.next,b=b.next):c.precedence>d.precedence||c.precedence==d.precedence&&c.id>d.id?a=a.next:b=b.next}},empty_intersection:function(){return null==
this.listeners.head},single_intersection:function(a){var b=this.listeners.head;return null!=b&&b.elt==a&&null==b.next},forall:function(a,b){for(var c=this.listeners.head;null!=c;){var d=c.elt;d.event==a&&b(d);c=c.next}},__class__:xb};var ff=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=ff;ff.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"];ff.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;
null==kc.zpp_pool?b=new kc:(b=kc.zpp_pool,kc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_insert:function(a,b){var c;null==kc.zpp_pool?c=new kc:(c=kc.zpp_pool,kc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=kc.zpp_pool;kc.zpp_pool=a;null==
this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=kc.zpp_pool;kc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=
!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:ff};var oh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_BodyListener"]=oh;oh.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"];oh.prototype={inlined_insert:function(a,b){var c;null==Wc.zpp_pool?c=new Wc:(c=Wc.zpp_pool,Wc.zpp_pool=c.next,c.next=null);null;c.elt=
b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Wc.zpp_pool;Wc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Wc.zpp_pool;Wc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:oh};var ph=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=ph;ph.__name__=["zpp_nape","util","ZNPList_ZPP_ConstraintListener"];
ph.prototype={inlined_insert:function(a,b){var c;null==Xc.zpp_pool?c=new Xc:(c=Xc.zpp_pool,Xc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Xc.zpp_pool;Xc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=
null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Xc.zpp_pool;Xc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:ph};var Fd=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Constraint"]=Fd;Fd.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"];Fd.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==pd.zpp_pool?b=new pd:(b=pd.zpp_pool,pd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=pd.zpp_pool;pd.zpp_pool=
a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,
a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=pd.zpp_pool;pd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Fd};var Gd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Interactor"]=Gd;Gd.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"];Gd.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;
null==Yc.zpp_pool?b=new Yc:(b=Yc.zpp_pool,Yc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Yc.zpp_pool;Yc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},
inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Yc.zpp_pool;Yc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=
this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Gd};var gf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_CbSet"]=gf;gf.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"];gf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Zc.zpp_pool?b=new Zc:(b=Zc.zpp_pool,Zc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Zc.zpp_pool;Zc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Zc.zpp_pool;Zc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:gf};var gb=function(){this.cbsets=this.listeners=this.bodylisteners=this.conlisteners=null;this.id=0;this.outer=null;this.id=Hb.CbType();this.listeners=new ff;this.bodylisteners=new oh;this.conlisteners=new ph;this.constraints=new Fd;this.interactors=new Gd;
this.cbsets=new gf};h["zpp_nape.callbacks.ZPP_CbType"]=gb;gb.__name__=["zpp_nape","callbacks","ZPP_CbType"];gb.prototype={addint:function(a){for(var b=null,c=this.listeners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.listeners.inlined_insert(b,a);this.invalidateint()},invalidateint:function(){for(var a=this.cbsets.head;null!=a;){var b=a.elt;b.zip_listeners=!0;b.invalidate_pairs();a=a.next}},addbody:function(a){for(var b=null,
c=this.bodylisteners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.bodylisteners.inlined_insert(b,a);this.invalidatebody()},invalidatebody:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_bodylisteners=!0,a=a.next},addconstraint:function(a){for(var b=null,c=this.conlisteners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.conlisteners.inlined_insert(b,
a);this.invalidateconstraint()},invalidateconstraint:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_conlisteners=!0,a=a.next},__class__:gb};var f=function(){};h["zpp_nape.util.ZPP_Flags"]=f;f.__name__=["zpp_nape","util","ZPP_Flags"];var Wb=function(){this.body=this.constraint=this.interaction=this.space=null;this.id=this.type=this.event=this.precedence=0;this.outer=null;this.id=Hb.Listener()};h["zpp_nape.callbacks.ZPP_Listener"]=Wb;Wb.__name__=["zpp_nape","callbacks","ZPP_Listener"];Wb.setlt=
function(a,b){return a.precedence>b.precedence||a.precedence==b.precedence&&a.id>b.id};Wb.prototype={addedToSpace:function(){},removedFromSpace:function(){},__class__:Wb};var kj=function(){this.outer_zn=this.options=this.handler=null};h["zpp_nape.callbacks.ZPP_BodyListener"]=kj;kj.__name__=["zpp_nape","callbacks","ZPP_BodyListener"];kj.__super__=Wb;kj.prototype=y(Wb.prototype,{addedToSpace:function(){this.options.handler=n(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addbody(this),
a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.bodylisteners.remove(this);b.invalidatebody();a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,b,c);this.addedToSpace()},__class__:kj});var lj=function(){this.outer_zn=this.options=this.handler=null};h["zpp_nape.callbacks.ZPP_ConstraintListener"]=lj;lj.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"];lj.__super__=Wb;lj.prototype=
y(Wb.prototype,{addedToSpace:function(){this.options.handler=n(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addconstraint(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.conlisteners.remove(this);b.invalidateconstraint();a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,b,c);this.addedToSpace()},__class__:lj});var Ed=function(){this.length=0;
this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_CbType"]=Ed;Ed.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"];Ed.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Ya.zpp_pool?b=new Ya:(b=Ya.zpp_pool,Ya.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Ya.zpp_pool?c=new Ya:
(c=Ya.zpp_pool,Ya.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Ya.zpp_pool;Ya.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},
remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Ya.zpp_pool;Ya.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},
clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},has:function(a){return this.inlined_has(a)},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Ed};var Db=function(a,b,c,d){this.handlerp=null;this.allowSleepingCallbacks=this.pure=!1;this.options1=this.options2=this.handleri=null;this.itype=0;this.outer_zni=this.outer_znp=null;Wb.call(this);
this.type=d;this.interaction=this;this.event=c;this.options1=a.zpp_inner;this.options2=b.zpp_inner;this.allowSleepingCallbacks=!1};h["zpp_nape.callbacks.ZPP_InteractionListener"]=Db;Db.__name__=["zpp_nape","callbacks","ZPP_InteractionListener"];Db.__super__=Wb;Db.prototype=y(Wb.prototype,{CbSetset:function(a,b,c){for(var d=Db.UCbSet,e=Db.VCbSet,g=Db.WCbSet,a=a.head,f=b.head;null!=a&&null!=f;){var h=a.elt,j=f.elt;h==j?(g.inlined_add(h),a=a.next,f=f.next):pa.setlt(h,j)?(d.inlined_add(h),a=a.next):(e.inlined_add(j),
f=f.next)}for(;null!=a;)d.inlined_add(a.elt),a=a.next;for(;null!=f;)e.inlined_add(f.elt),f=f.next;for(;null!=d.head;){a=d.pop_unsafe();for(f=b.head;null!=f;)c(a,f.elt),f=f.next}for(;null!=e.head;){b=e.pop_unsafe();for(d=g.head;null!=d;)c(b,d.elt),d=d.next}for(;null!=g.head;){e=g.pop_unsafe();c(e,e);for(b=g.head;null!=b;)c(e,b.elt),b=b.next}},CbTypeset:function(a,b,c){for(var d=Db.UCbType,e=Db.VCbType,g=Db.WCbType,a=a.head,f=b.head;null!=a&&null!=f;){var h=a.elt,j=f.elt;h==j?(g.inlined_add(h),a=a.next,
f=f.next):h.id<j.id?(d.inlined_add(h),a=a.next):(e.inlined_add(j),f=f.next)}for(;null!=a;)d.inlined_add(a.elt),a=a.next;for(;null!=f;)e.inlined_add(f.elt),f=f.next;for(;null!=d.head;){a=d.pop_unsafe();for(f=b.head;null!=f;)c(a,f.elt),f=f.next}for(;null!=e.head;){b=e.pop_unsafe();for(d=g.head;null!=d;)c(b,d.elt),d=d.next}for(;null!=g.head;){e=g.pop_unsafe();c(e,e);for(b=g.head;null!=b;)c(e,b.elt),b=b.next}},with_uniquesets:function(a){var b=this,c;null==Ha.zpp_pool?c=new Ha:(c=Ha.zpp_pool,Ha.zpp_pool=
c.next,c.next=null);null;c.lt=xb.setlt;this.CbTypeset(this.options1.includes,this.options2.includes,function(a,d){b.CbSetset(a.cbsets,d.cbsets,function(a,d){a.validate();d.validate();pa.single_intersection(a,d,b)&&c.try_insert(xb.get(a,d))})});c.clear_with(function(c){a?b.space.freshListenerType(c.a,c.b):b.space.nullListenerType(c.a,c.b);c.a=c.b=null;c.listeners.clear();c.next=xb.zpp_pool;xb.zpp_pool=c});var d=c;d.data=null;d.lt=null;d.swapped=null;d.next=Ha.zpp_pool;Ha.zpp_pool=d},with_union:function(a){for(var b=
this.options1.includes.head,c=this.options2.includes.head;null!=b&&null!=c;){var d=b.elt,e=c.elt;d==e?(a(d),b=b.next,c=c.next):d.id<e.id?(a(d),b=b.next):(a(e),c=c.next)}for(;null!=b;)a(b.elt),b=b.next;for(;null!=c;)a(c.elt),c=c.next},addedToSpace:function(){var a=this,b=this.type==f.id_ListenerType_PRE;this.with_union(function(c){c.addint(a);if(b)for(c=c.interactors.head;null!=c;)c.elt.wake(),c=c.next});this.options1.handler=n(this,this.cbtype_change1);this.options2.handler=n(this,this.cbtype_change2);
this.with_uniquesets(!0)},removedFromSpace:function(){var a=this;this.with_uniquesets(!1);var b=this.type==f.id_ListenerType_PRE;this.with_union(function(c){c.listeners.remove(a);c.invalidateint();if(b)for(c=c.interactors.head;null!=c;)c.elt.wake(),c=c.next});this.options1.handler=null;this.options2.handler=null},cbtype_change1:function(a,b,c){this.cbtype_change(this.options1,a,b,c)},cbtype_change2:function(a,b,c){this.cbtype_change(this.options2,a,b,c)},cbtype_change:function(a,b,c,d){this.removedFromSpace();
a.effect_change(b,c,d);this.addedToSpace();null},__class__:Db});var Oe=function(){this.outer=this.handler=this.includes=this.excludes=this.wrap_includes=this.wrap_excludes=null;this.includes=new Ed;this.excludes=new Ed};h["zpp_nape.callbacks.ZPP_OptionType"]=Oe;Oe.__name__=["zpp_nape","callbacks","ZPP_OptionType"];Oe.argument=function(a){return null==a?new Ef:x.__instanceof(a,Ef)?a:(new Ef).including(a)};Oe.prototype={setup_includes:function(){this.wrap_includes=hd.get(this.includes,!0)},setup_excludes:function(){this.wrap_excludes=
hd.get(this.excludes,!0)},excluded:function(a){return this.nonemptyintersection(a,this.excludes)},compatible:function(a){return this.nonemptyintersection(a,this.includes)&&!this.nonemptyintersection(a,this.excludes)},nonemptyintersection:function(a,b){for(var c=!1,d=a.head,e=b.head;null!=e&&null!=d;){var g=e.elt,f=d.elt;if(g==f){c=!0;break}else g.id<f.id?e=e.next:d=d.next}return c},effect_change:function(a,b,c){if(b)if(c){b=null;for(c=this.includes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}this.includes.inlined_insert(b,
a)}else this.includes.remove(a);else if(c){b=null;for(c=this.excludes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}this.excludes.inlined_insert(b,a)}else this.excludes.remove(a)},append_type:function(a,b){a==this.includes?this.includes.has(b)||(this.excludes.has(b)?null!=this.handler?this.handler(b,!1,!1):this.effect_change(b,!1,!1):null!=this.handler?this.handler(b,!0,!0):this.effect_change(b,!0,!0)):this.excludes.has(b)||(this.includes.has(b)?null!=this.handler?this.handler(b,!0,!1):this.effect_change(b,
!0,!1):null!=this.handler?this.handler(b,!1,!0):this.effect_change(b,!1,!0))},append:function(a,b){if(x.__instanceof(b,Ma))this.append_type(a,b.zpp_inner);else if(x.__instanceof(b,Fg)){var c;b.zpp_inner.valmod();for(c=wc.get(b);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);this.append_type(a,d.zpp_inner)}}else if(b instanceof Array&&null==b.__enum__)for(c=0;c<b.length;)d=b[c],++c,this.append_type(a,d.zpp_inner)},__class__:Oe};var Wj=function(){this.cbTypes=this.cbSet=null;this.ignore=
this.__velocity=!1;this.component=null;this.active=this.stiff=this.removeOnBreak=!1;this.outer=this.compound=this.space=null};h["zpp_nape.constraint.ZPP_Constraint"]=Wj;Wj.__name__=["zpp_nape","constraint","ZPP_Constraint"];Wj.prototype={alloc_cbSet:function(){if(null!=(this.cbSet=this.space.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.constraints.add(this)},dealloc_cbSet:function(){if(null!=this.cbSet){this.cbSet.constraints.remove(this);if(0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);
var a=this.cbSet;a.free();a.next=pa.zpp_pool;pa.zpp_pool=a}this.cbSet=null}},addedToSpace:function(){this.active&&this.activeInSpace();this.activeBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.add(this),a=a.next},removedFromSpace:function(){this.active&&this.inactiveOrOutSpace();this.inactiveBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.remove(this),a=a.next},activeInSpace:function(){this.alloc_cbSet();null==Za.zpp_pool?this.component=new Za:(this.component=Za.zpp_pool,
Za.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!1;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();var a=this.component;a.body=null;a.constraint=null;null;a.next=Za.zpp_pool;Za.zpp_pool=a;this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(){return!1},broken:function(){},warmStart:function(){},preStep:function(){return!1},
applyImpulseVel:function(){return!1},applyImpulsePos:function(){return!1},__class__:Wj};var ha=function(){this.colarb=this.fluidarb=this.sensorarb=null;this.type=0;this.b1=this.b2=this.ws1=this.ws2=this.pair=null;this.invalidated=!1;this.immState=0;this.intchange=this.presentable=this.continuous=this.fresh=!1;this.present=0;this.active=this.cleared=this.sleeping=!1;this.id=this.di=this.stamp=this.up_stamp=this.sleep_stamp=this.endGenerated=0;this.outer=null};h["zpp_nape.dynamics.ZPP_Arbiter"]=ha;
ha.__name__=["zpp_nape","dynamics","ZPP_Arbiter"];ha.prototype={wrapper:function(){null==this.outer&&(ha.internal=!0,this.type==ha.COL?(this.colarb.outer_zn=new Jg,this.outer=this.colarb.outer_zn):this.type==ha.FLUID?(this.fluidarb.outer_zn=new Kg,this.outer=this.fluidarb.outer_zn):this.outer=new qe,this.outer.zpp_inner=this,ha.internal=!1);return this.outer},__class__:ha};var pb=function(){this.next=null;ha.call(this);this.type=ha.SENSOR;this.sensorarb=this};h["zpp_nape.dynamics.ZPP_SensorArbiter"]=
pb;pb.__name__=["zpp_nape","dynamics","ZPP_SensorArbiter"];pb.__super__=ha;pb.prototype=y(ha.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=pb.zpp_pool;pb.zpp_pool=this},__class__:pb});var Xb=function(){this.wMass=this.adamp=this.agamma=this.vMassa=this.vMassb=this.vMassc=this.dampx=this.dampy=this.lgamma=this.nx=
this.ny=this.buoyx=this.buoyy=this.pre_dt=0;this.nodrag=!1;this.centroidx=this.centroidy=this.overlap=this.r1x=this.r1y=this.r2x=this.r2y=0;this.outer_zn=this.next=null;ha.call(this);this.type=ha.FLUID;this.fluidarb=this;this.buoyy=this.buoyx=0;this.pre_dt=-1};h["zpp_nape.dynamics.ZPP_FluidArbiter"]=Xb;Xb.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"];Xb.__super__=ha;Xb.prototype=y(ha.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),
null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=Xb.zpp_pool;Xb.zpp_pool=this;this.pre_dt=-1},preStep:function(a,b){-1==this.pre_dt&&(this.pre_dt=b);var c=b/this.pre_dt;this.pre_dt=b;this.r1x=this.centroidx-this.b1.posx;this.r1y=this.centroidy-this.b1.posy;this.r2x=this.centroidx-this.b2.posx;this.r2y=this.centroidy-this.b2.posy;var d=0,e=0;this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(d=this.ws1.fluidProperties.gravityx,
e=this.ws1.fluidProperties.gravityy):(d=a.gravityx,e=a.gravityy);var g=0,p=0;this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(g=this.ws2.fluidProperties.gravityx,p=this.ws2.fluidProperties.gravityy):(g=a.gravityx,p=a.gravityy);var h=0,j=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var i=this.overlap*this.ws1.fluidProperties.density,k=this.overlap*this.ws2.fluidProperties.density;if(i>k)g=i+k,h-=d*g,j-=e*g;else if(i<k)d=i+k,h+=g*d,j+=p*d;else{var l=0,m=0,l=0.5*(d+g),m=0.5*
(e+p);this.ws1.worldCOMx*l+this.ws1.worldCOMy*m>this.ws2.worldCOMx*l+this.ws2.worldCOMy*m?(d=i+k,h-=l*d,j-=m*d):(d=i+k,h+=l*d,j+=m*d)}}else this.ws1.fluidEnabled?(g=this.overlap*this.ws1.fluidProperties.density,h-=d*g,j-=e*g):this.ws2.fluidEnabled&&(d=this.overlap*this.ws2.fluidProperties.density,h+=g*d,j+=p*d);h*=b;j*=b;this.buoyx=h;this.buoyy=j;this.b1.type==f.id_BodyType_DYNAMIC&&(d=this.b1.imass,this.b1.velx-=h*d,this.b1.vely-=j*d,this.b1.angvel-=(j*this.r1x-h*this.r1y)*this.b1.iinertia);this.b2.type==
f.id_BodyType_DYNAMIC&&(d=this.b2.imass,this.b2.velx+=h*d,this.b2.vely+=j*d,this.b2.angvel+=(j*this.r2x-h*this.r2y)*this.b2.iinertia);if((!this.ws1.fluidEnabled||0==this.ws1.fluidProperties.viscosity)&&(!this.ws2.fluidEnabled||0==this.ws2.fluidProperties.viscosity))this.nodrag=!0,this.adamp=this.dampy=this.dampx=0;else{this.nodrag=!1;h=0;this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),h+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area);this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),
h+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area);0!=h?(j=this.b1.sinertia+this.b2.sinertia,this.wMass=0!=j?1/j:0,h=2*Math.PI*4.0E-4*h,this.agamma=1/(b*h*(2+h*b)),h=1/(1+this.agamma),this.agamma*=h,this.wMass*=h):this.agamma=this.wMass=0;h=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel));j=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+
this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));h*h+j*j<t.epsilon*t.epsilon||(d=1/Math.sqrt(h*h+j*j),this.nx=h*d,this.ny=j*d);h=0;if(this.ws1.fluidEnabled)if(j=-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area,this.ws2.type==f.id_ShapeType_CIRCLE)h-=j*this.ws2.circle.radius*t.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{e=d=0;for(g=this.ws2.polygon.edges.head;null!=g;)p=g.elt,d+=p.length,p=j*p.length*(p.gnormx*this.nx+p.gnormy*this.ny),0<p&&(p=p*=-t.fluidVacuumDrag),
e-=0.5*p*t.fluidLinearDrag,g=g.next;h+=e/d}if(this.ws2.fluidEnabled)if(j=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area,this.ws1.type==f.id_ShapeType_CIRCLE)h-=j*this.ws1.circle.radius*t.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{e=d=0;for(g=this.ws1.polygon.edges.head;null!=g;)p=g.elt,d+=p.length,p=j*p.length*(p.gnormx*this.nx+p.gnormy*this.ny),0<p&&(p=p*=-t.fluidVacuumDrag),e-=0.5*p*t.fluidLinearDrag,g=g.next;h+=e/d}0!=h?(g=this.b1.smass+this.b2.smass,e=d=j=0,j=g,d=
0,e=g,0!=this.b1.sinertia&&(g=this.r1x*this.b1.sinertia,p=this.r1y*this.b1.sinertia,j+=p*this.r1y,d+=-p*this.r1x,e+=g*this.r1x),0!=this.b2.sinertia&&(g=this.r2x*this.b2.sinertia,p=this.r2y*this.b2.sinertia,j+=p*this.r2y,d+=-p*this.r2x,e+=g*this.r2x),g=j*e-d*d,g!=g?(j=d=e=0,3):0==g?(g=0,0!=j?j=1/j:(j=0,g|=1),0!=e?e=1/e:(e=0,g|=2),d=0,g):(g=1/g,p=e*g,e=j*g,j=p,d*=-g,0),this.vMassa=j,this.vMassb=d,this.vMassc=e,h*=2*Math.PI,this.lgamma=1/(b*h*(2+h*b)),h=1/(1+this.lgamma),this.lgamma*=h,this.vMassa*=
h,this.vMassb*=h,this.vMassc*=h):this.lgamma=this.vMassc=this.vMassb=this.vMassa=0}this.dampx*=c;this.dampy*=c;this.adamp*=c},warmStart:function(){var a=this.b1.imass;this.b1.velx-=this.dampx*a;this.b1.vely-=this.dampy*a;a=this.b2.imass;this.b2.velx+=this.dampx*a;this.b2.vely+=this.dampy*a;this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y);this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y);this.b1.angvel-=this.adamp*this.b1.iinertia;this.b2.angvel+=
this.adamp*this.b2.iinertia},applyImpulseVel:function(){if(!this.nodrag){var a=this.b1.angvel+this.b1.kinangvel,b=this.b2.angvel+this.b2.kinangvel,c=this.b1.velx+this.b1.kinvelx-this.r1y*a-(this.b2.velx+this.b2.kinvelx-this.r2y*b),d=this.b1.vely+this.b1.kinvely+this.r1x*a-(this.b2.vely+this.b2.kinvely+this.r2x*b),e=this.vMassa*c+this.vMassb*d,d=this.vMassb*c+this.vMassc*d,g=this.lgamma,c=e-this.dampx*g,d=d-this.dampy*g;this.dampx+=1*c;this.dampy+=1*d;e=this.b1.imass;this.b1.velx-=c*e;this.b1.vely-=
d*e;e=this.b2.imass;this.b2.velx+=c*e;this.b2.vely+=d*e;this.b1.angvel-=this.b1.iinertia*(d*this.r1x-c*this.r1y);this.b2.angvel+=this.b2.iinertia*(d*this.r2x-c*this.r2y);a=(a-b)*this.wMass-this.adamp*this.agamma;this.adamp+=a;this.b1.angvel-=a*this.b1.iinertia;this.b2.angvel+=a*this.b2.iinertia}},__class__:Xb});var yb=function(){this.pre_dt=0;this.stat=!1;this.next=null;this.hc2=this.hpc2=!1;this.c1=this.oc1=this.c2=this.oc2=null;this.__ref_vertex=0;this.__ref_edge1=this.__ref_edge2=null;this.biasCoef=
0;this.rev=!1;this.nx=this.ny=this.kMassa=this.kMassb=this.kMassc=this.Ka=this.Kb=this.Kc=this.rMass=this.jrAcc=this.rn1a=this.rt1a=this.rn1b=this.rt1b=this.rn2a=this.rt2a=this.rn2b=this.rt2b=this.k1x=this.k1y=this.k2x=this.k2y=this.surfacex=this.surfacey=this.lnormx=this.lnormy=this.lproj=this.radius=0;this.s1=this.s2=this.contacts=this.innards=null;this.userdef_dyn_fric=this.userdef_stat_fric=this.userdef_restitution=this.userdef_rfric=!1;this.dyn_fric=this.stat_fric=this.restitution=this.rfric=
0;this.outer_zn=null;ha.call(this);this.pre_dt=-1;this.contacts=new Ib;this.innards=new qh;this.type=ha.COL;this.colarb=this};h["zpp_nape.dynamics.ZPP_ColArbiter"]=yb;yb.__name__=["zpp_nape","dynamics","ZPP_ColArbiter"];yb.__super__=ha;yb.prototype=y(ha.prototype,{injectContact:function(a,b,c,d,e,g,f){null==f&&(f=!1);for(var h=null,j=this.contacts.next;null!=j;){var i=j;if(g==i.hash){h=i;break}j=j.next}null==h?(null==Ib.zpp_pool?h=new Ib:(h=Ib.zpp_pool,Ib.zpp_pool=h.next,h.next=null),null,j=h.inner,
j.jnAcc=j.jtAcc=0,h.hash=g,h.fresh=!0,h.arbiter=this,this.jrAcc=0,this.contacts.inlined_add(h),this.innards.add(j)):h.fresh=!1;h.px=a;h.py=b;this.nx=c;this.ny=d;h.dist=e;h.stamp=this.stamp;h.posOnly=f;return h},retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;for(this.intchange=this.active=!1;null!=this.contacts.next;){var a=this.contacts.inlined_pop_unsafe();a.arbiter=
null;a.next=Ib.zpp_pool;Ib.zpp_pool=a;this.innards.inlined_pop()}this.userdef_rfric=this.userdef_restitution=this.userdef_stat_fric=this.userdef_dyn_fric=!1;this.__ref_edge1=this.__ref_edge2=null;this.next=yb.zpp_pool;yb.zpp_pool=this;this.pre_dt=-1},cleanupContacts:function(){var a=!0,b=null,c=null,d=this.innards.next;this.hc2=!1;for(var e=this.contacts.next;null!=e;){var g=e;g.stamp+t.arbiterExpirationDelay<this.stamp?(e=this.contacts.inlined_erase(b),d=this.innards.inlined_erase(c),g.arbiter=null,
g.next=Ib.zpp_pool,Ib.zpp_pool=g):(b=g.inner,c=g.active,g.active=g.stamp==this.stamp,g.active&&(a?(a=!1,this.c1=b,this.oc1=g):(this.hc2=!0,this.c2=b,this.oc2=g)),c!=g.active&&(this.contacts.modified=!0),b=e,c=d,d=d.next,e=e.next)}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(d=this.c1,this.c1=this.c2,this.c2=d,d=this.oc1,this.oc1=this.oc2,this.oc2=d,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;return a},preStep:function(a){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||
(this.restitution=this.s1.material.elasticity<=Math.NEGATIVE_INFINITY||this.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:this.s1.material.elasticity>=Math.POSITIVE_INFINITY||this.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(this.s1.material.elasticity+this.s2.material.elasticity)/2,0>this.restitution&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||
(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)));-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;var c=this.b1.smass+this.b2.smass;this.hc2=!1;a=!0;this.biasCoef=this.b1.type!=f.id_BodyType_DYNAMIC||this.b2.type!=f.id_BodyType_DYNAMIC?this.continuous?t.contactContinuousStaticBiasCoef:t.contactStaticBiasCoef:this.continuous?t.contactContinuousBiasCoef:
t.contactBiasCoef;this.continuous=!1;for(var d=null,e=null,g=this.innards.next,h=this.contacts.next;null!=h;){var i=h;if(i.stamp+t.arbiterExpirationDelay<this.stamp)h=this.contacts.inlined_erase(d),g=this.innards.inlined_erase(e),i.arbiter=null,i.next=Ib.zpp_pool,Ib.zpp_pool=i;else{d=i.inner;e=i.active;i.active=i.stamp==this.stamp;if(i.active){a?(a=!1,this.c1=d,this.oc1=i):(this.hc2=!0,this.c2=d,this.oc2=i);d.r2x=i.px-this.b2.posx;d.r2y=i.py-this.b2.posy;d.r1x=i.px-this.b1.posx;d.r1y=i.py-this.b1.posy;
var j=c+this.b2.sinertia*ag.sqr(d.r2x*this.nx+d.r2y*this.ny),j=j+this.b1.sinertia*ag.sqr(d.r1x*this.nx+d.r1y*this.ny);d.tMass=j<t.epsilon*t.epsilon?0:1/j;j=c+this.b2.sinertia*ag.sqr(this.ny*d.r2x-this.nx*d.r2y);j+=this.b1.sinertia*ag.sqr(this.ny*d.r1x-this.nx*d.r1y);d.nMass=j<t.epsilon*t.epsilon?0:1/j;var k=j=0,l=this.b2.angvel+this.b2.kinangvel,j=this.b2.velx+this.b2.kinvelx-d.r2y*l,k=this.b2.vely+this.b2.kinvely+d.r2x*l,l=this.b1.angvel+this.b1.kinangvel,j=j-(this.b1.velx+this.b1.kinvelx-d.r1y*
l),k=k-(this.b1.vely+this.b1.kinvely+d.r1x*l),l=this.nx*j+this.ny*k;i.elasticity=this.restitution;d.bounce=l*i.elasticity;d.bounce>-t.elasticThreshold&&(d.bounce=0);l=k*this.nx-j*this.ny;j=t.staticFrictionThreshold;d.friction=l*l>j*j?this.dyn_fric:this.stat_fric;d.jnAcc*=b;d.jtAcc*=b}e!=i.active&&(this.contacts.modified=!0);d=h;e=g;g=g.next;h=h.next}}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(g=this.c1,this.c1=this.c2,this.c2=g,g=this.oc1,this.oc1=this.oc2,this.oc2=g,this.hc2=!1):this.oc2.posOnly&&
(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;this.jrAcc*=b;a||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel));this.hc2&&(this.rn2a=this.ny*
this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=c+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=c+this.b1.sinertia*
this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=c+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<t.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)?(this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc,b=this.kMassa*this.kMassc-this.kMassb*this.kMassb,b!=b?(this.kMassa=this.kMassb=this.kMassc=0,3):0==b?(b=0,0!=this.kMassa?this.kMassa=1/this.kMassa:
(this.kMassa=0,b|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,b|=2),this.kMassb=0,b):(b=1/b,c=this.kMassc*b,this.kMassc=this.kMassa*b,this.kMassa=c,this.kMassb*=-b,0)):(this.hc2=!1,this.oc2.dist<this.oc1.dist&&(b=this.c1,this.c1=this.c2,this.c2=b),this.oc2.active=!1,this.contacts.modified=!0));this.surfacex=this.b2.svelx;this.surfacey=this.b2.svely;this.surfacex+=1*this.b1.svelx;this.surfacey+=1*this.b1.svely;this.surfacex=-this.surfacex;this.surfacey=-this.surfacey;this.rMass=this.b1.sinertia+
this.b2.sinertia;0!=this.rMass&&(this.rMass=1/this.rMass);return a},warmStart:function(){var a=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,b=this.ny*this.c1.jnAcc+this.nx*this.c1.jtAcc,c=this.b1.imass;this.b1.velx-=a*c;this.b1.vely-=b*c;this.b1.angvel-=this.b1.iinertia*(b*this.c1.r1x-a*this.c1.r1y);c=this.b2.imass;this.b2.velx+=a*c;this.b2.vely+=b*c;this.b2.angvel+=this.b2.iinertia*(b*this.c1.r2x-a*this.c1.r2y);this.hc2&&(a=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,b=this.ny*this.c2.jnAcc+this.nx*
this.c2.jtAcc,c=this.b1.imass,this.b1.velx-=a*c,this.b1.vely-=b*c,this.b1.angvel-=this.b1.iinertia*(b*this.c2.r1x-a*this.c2.r1y),c=this.b2.imass,this.b2.velx+=a*c,this.b2.vely+=b*c,this.b2.angvel+=this.b2.iinertia*(b*this.c2.r2x-a*this.c2.r2y));this.b2.angvel+=this.jrAcc*this.b2.iinertia;this.b1.angvel-=this.jrAcc*this.b1.iinertia},applyImpulseVel:function(){var a,b,c,d,e;d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel);var g=this.k1y+this.b2.vely+this.c1.r2x*
this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);c=(g*this.nx-d*this.ny+this.surfacex)*this.c1.tMass;d=this.c1.friction*this.c1.jnAcc;a=this.c1.jtAcc;e=a-c;e>d?e=d:e<-d&&(e=-d);c=e-a;this.c1.jtAcc=e;a=-this.ny*c;b=this.nx*c;this.b2.velx+=a*this.b2.imass;this.b2.vely+=b*this.b2.imass;this.b1.velx-=a*this.b1.imass;this.b1.vely-=b*this.b1.imass;this.b2.angvel+=this.rt1b*c*this.b2.iinertia;this.b1.angvel-=this.rt1a*c*this.b1.iinertia;this.hc2?(e=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-
(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=(b*this.nx-e*this.ny+this.surfacex)*this.c2.tMass,d=this.c2.friction*this.c2.jnAcc,a=this.c2.jtAcc,e=a-c,e>d?e=d:e<-d&&(e=-d),c=e-a,this.c2.jtAcc=e,a=-this.ny*c,b=this.nx*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rt2b*c*this.b2.iinertia,this.b1.angvel-=this.rt2a*
c*this.b1.iinertia,d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),g=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),e=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=this.c1.jnAcc,a=this.c2.jnAcc,d=d*this.nx+g*this.ny+this.surfacey+this.c1.bounce-(this.Ka*c+this.Kb*a),e=e*this.nx+
b*this.ny+this.surfacey+this.c2.bounce-(this.Kb*c+this.Kc*a),b=-(this.kMassa*d+this.kMassb*e),g=-(this.kMassb*d+this.kMassc*e),0<=b&&0<=g?(d=b-c,e=g-a,this.c1.jnAcc=b,this.c2.jnAcc=g):(b=-this.c1.nMass*d,0<=b&&0<=this.Kb*b+e?(d=b-c,e=-a,this.c1.jnAcc=b,this.c2.jnAcc=0):(g=-this.c2.nMass*e,0<=g&&0<=this.Kb*g+d?(d=-c,e=g-a,this.c1.jnAcc=0,this.c2.jnAcc=g):0<=d&&0<=e?(d=-c,e=-a,this.c1.jnAcc=this.c2.jnAcc=0):e=d=0)),c=d+e,a=this.nx*c,b=this.ny*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,
this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=(this.rn1b*d+this.rn2b*e)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*d+this.rn2a*e)*this.b1.iinertia):(0!=this.radius&&(c=(this.b2.angvel-this.b1.angvel)*this.rMass,d=this.rfric*this.c1.jnAcc,a=this.jrAcc,this.jrAcc-=c,this.jrAcc>d?this.jrAcc=d:this.jrAcc<-d&&(this.jrAcc=-d),c=this.jrAcc-a,this.b2.angvel+=c*this.b2.iinertia,this.b1.angvel-=c*this.b1.iinertia),d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-
this.c1.r1y*this.b1.angvel),g=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),c=(this.c1.bounce+(this.nx*d+this.ny*g)+this.surfacey)*this.c1.nMass,a=this.c1.jnAcc,e=a-c,0>e&&(e=0),c=e-a,this.c1.jnAcc=e,a=this.nx*c,b=this.ny*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rn1b*c*this.b2.iinertia,this.b1.angvel-=this.rn1a*c*this.b1.iinertia)},applyImpulsePos:function(){if(2==
this.ptype){var a=this.c1,b=0,c=0,b=this.b2.axisy*a.lr2x-this.b2.axisx*a.lr2y,c=a.lr2x*this.b2.axisx+a.lr2y*this.b2.axisy,b=b+1*this.b2.posx,c=c+1*this.b2.posy,d=0,e=0,d=this.b1.axisy*a.lr1x-this.b1.axisx*a.lr1y,e=a.lr1x*this.b1.axisx+a.lr1y*this.b1.axisy,d=d+1*this.b1.posx,e=e+1*this.b1.posy,g=a=0,a=b-d,g=c-e,f=Math.sqrt(a*a+g*g),h=this.radius-t.collisionSlop,j=f-h;0>a*this.nx+g*this.ny&&(a=-a,g=-g,j-=this.radius);0>j&&(f<t.epsilon?0!=this.b1.smass?this.b1.posx+=10*t.epsilon:this.b2.posx+=10*t.epsilon:
(j=1/f,a*=j,g*=j,b=0.5*(d+b),c=0.5*(e+c),d=b-this.b1.posx,e=c-this.b1.posy,b-=this.b2.posx,c-=this.b2.posy,d=g*d-a*e,b=g*b-a*c,c=this.b2.smass+b*b*this.b2.sinertia+this.b1.smass+d*d*this.b1.sinertia,0!=c&&(f=-this.biasCoef*(f-h)/c,c=h=0,h=a*f,c=g*f,a=this.b1.imass,this.b1.posx-=h*a,this.b1.posy-=c*a,this.b1.delta_rot(-d*this.b1.iinertia*f),a=this.b2.imass,this.b2.posx+=h*a,this.b2.posy+=c*a,this.b2.delta_rot(b*this.b2.iinertia*f))))}else{var i=j=g=a=0,e=b=0;0==this.ptype?(a=this.b1.axisy*this.lnormx-
this.b1.axisx*this.lnormy,g=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,h=this.lproj+(a*this.b1.posx+g*this.b1.posy),j=this.b2.axisy*this.c1.lr1x-this.b2.axisx*this.c1.lr1y,i=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,j+=1*this.b2.posx,i+=1*this.b2.posy,this.hpc2&&(b=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,e=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,b+=1*this.b2.posx,e+=1*this.b2.posy)):(a=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,g=this.lnormx*
this.b2.axisx+this.lnormy*this.b2.axisy,h=this.lproj+(a*this.b2.posx+g*this.b2.posy),j=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,i=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,j+=1*this.b1.posx,i+=1*this.b1.posy,this.hpc2&&(b=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,e=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,b+=1*this.b1.posx,e+=1*this.b1.posy));f=j*a+i*g-h-this.radius;f+=t.collisionSlop;c=0;this.hpc2&&(c=b*a+e*g-h-this.radius,c+=t.collisionSlop);if(0>
f||0>c){this.rev&&(a=-a,g=-g);var k=0,l=0,k=j-this.b1.posx,l=i-this.b1.posy,d=h=0,h=j-this.b2.posx,d=i-this.b2.posy,m=0,n=0,i=j=0;if(this.hpc2){m=b-this.b1.posx;n=e-this.b1.posy;j=b-this.b2.posx;i=e-this.b2.posy;b=g*k-a*l;h=g*h-a*d;e=g*m-a*n;d=g*j-a*i;j=this.b1.smass+this.b2.smass;this.kMassa=j+this.b1.sinertia*b*b+this.b2.sinertia*h*h;this.kMassb=j+this.b1.sinertia*b*e+this.b2.sinertia*h*d;this.kMassc=j+this.b1.sinertia*e*e+this.b2.sinertia*d*d;k=i=j=0;j=this.kMassa;i=this.kMassb;k=this.kMassc;l=
f*this.biasCoef;m=c*this.biasCoef;c=f=0;f=-l;c=-m;n=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(n!=n)f=c=0;else if(0==n)f=0!=this.kMassa?f/this.kMassa:0,c=0!=this.kMassc?c/this.kMassc:0;else var n=1/n,o=n*(this.kMassc*f-this.kMassb*c),c=n*(this.kMassa*c-this.kMassb*f),f=o;0<=f&&0<=c?(j=(f+c)*this.b1.imass,this.b1.posx-=a*j,this.b1.posy-=g*j,this.b1.delta_rot(-this.b1.iinertia*(b*f+e*c)),b=(f+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=g*b,this.b2.delta_rot(this.b2.iinertia*(h*f+d*c))):
(f=-l/j,c=0,0<=f&&0<=i*f+m?(j=(f+c)*this.b1.imass,this.b1.posx-=a*j,this.b1.posy-=g*j,this.b1.delta_rot(-this.b1.iinertia*(b*f+e*c)),b=(f+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=g*b,this.b2.delta_rot(this.b2.iinertia*(h*f+d*c))):(f=0,c=-m/k,0<=c&&0<=i*c+l&&(j=(f+c)*this.b1.imass,this.b1.posx-=a*j,this.b1.posy-=g*j,this.b1.delta_rot(-this.b1.iinertia*(b*f+e*c)),b=(f+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=g*b,this.b2.delta_rot(this.b2.iinertia*(h*f+d*c)))))}else b=g*k-a*l,h=g*h-a*
d,c=this.b2.smass+h*h*this.b2.sinertia+this.b1.smass+b*b*this.b1.sinertia,0!=c&&(f=-this.biasCoef*f/c,d=c=0,c=a*f,d=g*f,a=this.b1.imass,this.b1.posx-=c*a,this.b1.posy-=d*a,this.b1.delta_rot(-b*this.b1.iinertia*f),a=this.b2.imass,this.b2.posx+=c*a,this.b2.posy+=d*a,this.b2.delta_rot(h*this.b2.iinertia*f))}}},__class__:yb});var Ib=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.dist=this.elasticity=0;this.fresh=!1;this.stamp=this.hash=0;this.active=this.posOnly=
!1;this.arbiter=this.inner=null;this.px=this.py=0;this.outer=null;this.inner=new qh};h["zpp_nape.dynamics.ZPP_Contact"]=Ib;Ib.__name__=["zpp_nape","dynamics","ZPP_Contact"];Ib.prototype={wrapper:function(){null==this.outer&&(Ib.internal=!0,this.outer=new ni,Ib.internal=!1,this.outer.zpp_inner=this);return this.outer},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=
a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Ib};var qh=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.r1x=this.r1y=
this.r2x=this.r2y=this.nMass=this.tMass=this.bounce=this.friction=this.jnAcc=this.jtAcc=this.lr1x=this.lr1y=this.lr2x=this.lr2y=0};h["zpp_nape.dynamics.ZPP_IContact"]=qh;qh.__name__=["zpp_nape","dynamics","ZPP_IContact"];qh.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=
!0;this.length--},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:qh};var xc=function(){this.collisionGroup=this.collisionMask=this.sensorGroup=this.sensorMask=this.fluidGroup=this.fluidMask=0;this.next=this.outer=this.shapes=null;this.shapes=new ef;this.collisionGroup=this.sensorGroup=this.fluidGroup=1;
this.collisionMask=this.sensorMask=this.fluidMask=-1};h["zpp_nape.dynamics.ZPP_InteractionFilter"]=xc;xc.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"];xc.prototype={wrapper:function(){if(null==this.outer){this.outer=new oi;var a=this.outer.zpp_inner;a.outer=null;a.next=xc.zpp_pool;xc.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},shouldCollide:function(a){return 0!=(this.collisionMask&a.collisionGroup)&&0!=(a.collisionMask&this.collisionGroup)},shouldSense:function(a){return 0!=
(this.sensorMask&a.sensorGroup)&&0!=(a.sensorMask&this.sensorGroup)},shouldFlow:function(a){return 0!=(this.fluidMask&a.fluidGroup)&&0!=(a.fluidMask&this.fluidGroup)},invalidate:function(){for(var a=this.shapes.head;null!=a;)a.elt.invalidate_filter(),a=a.next},__class__:xc};var Xj=function(){this.depth=0;this.group=this.interactors=null;this.ignore=!1;this.outer=null};h["zpp_nape.dynamics.ZPP_InteractionGroup"]=Xj;Xj.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"];Xj.prototype={__class__:Xj};
var Ca=function(){this.wrap_max=null;this.maxx=this.maxy=0;this.wrap_min=null;this.minx=this.miny=0;this.outer=this.next=null;this._immutable=!1;this._invalidate=this._validate=null};h["zpp_nape.geom.ZPP_AABB"]=Ca;Ca.__name__=["zpp_nape","geom","ZPP_AABB"];Ca.get=function(a,b,c,d){var e;null==Ca.zpp_pool?e=new Ca:(e=Ca.zpp_pool,Ca.zpp_pool=e.next,e.next=null);null;e.minx=a;e.miny=b;e.maxx=c;e.maxy=d;return e};Ca.prototype={validate:function(){null!=this._validate&&this._validate()},perimeter:function(){return 2*
(this.maxx-this.minx+(this.maxy-this.miny))},intersectY:function(a){return!(a.miny>this.maxy||this.miny>a.maxy)},intersect:function(a){return a.miny<=this.maxy&&this.miny<=a.maxy&&a.minx<=this.maxx&&this.minx<=a.maxx},combine:function(a){a.minx<this.minx&&(this.minx=a.minx);a.maxx>this.maxx&&(this.maxx=a.maxx);a.miny<this.miny&&(this.miny=a.miny);a.maxy>this.maxy&&(this.maxy=a.maxy)},contains:function(a){return a.minx>=this.minx&&a.miny>=this.miny&&a.maxx<=this.maxx&&a.maxy<=this.maxy},setCombine:function(a,
b){this.minx=a.minx<b.minx?a.minx:b.minx;this.miny=a.miny<b.miny?a.miny:b.miny;this.maxx=a.maxx>b.maxx?a.maxx:b.maxx;this.maxy=a.maxy>b.maxy?a.maxy:b.maxy},setExpand:function(a,b){this.minx=a.minx-b;this.miny=a.miny-b;this.maxx=a.maxx+b;this.maxy=a.maxy+b},toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},__class__:Ca};var bg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Vec2"]=
bg;bg.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"];bg.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==eb.zpp_pool?b=new eb:(b=eb.zpp_pool,eb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==eb.zpp_pool?c=new eb:(c=eb.zpp_pool,eb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,
this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=eb.zpp_pool;eb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=eb.zpp_pool;eb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:bg};var N=function(){};h["zpp_nape.geom.ZPP_Collide"]=N;N.__name__=["zpp_nape","geom","ZPP_Collide"];
N.contactCollide=function(a,b,c,d){if(b.type==f.id_ShapeType_POLYGON)if(a.type==f.id_ShapeType_POLYGON){for(var e=!0,g=-1.0E100,h=-1,i=null,j=null,k=a.polygon.edges.head;null!=k;){for(var l=k.elt,m=1.0E100,n=b.polygon.gverts.next;null!=n;){var o=n,o=l.gnormx*o.x+l.gnormy*o.y;o<m&&(m=o);if(m-l.gprojection<=g)break;n=n.next}m-=l.gprojection;if(0<=m){e=!1;break}m>g&&(g=m,i=l,h=1);k=k.next}if(e){for(k=b.polygon.edges.head;null!=k;){l=k.elt;m=1.0E100;for(n=a.polygon.gverts.next;null!=n;){o=n;o=l.gnormx*
o.x+l.gnormy*o.y;o<m&&(m=o);if(m-l.gprojection<=g)break;n=n.next}m-=l.gprojection;if(0<=m){e=!1;break}m>g&&(g=m,j=l,h=2);k=k.next}if(e){1==h?(a=b.polygon,b=i,j=1):(a=a.polygon,b=j,j=-1);i=null;e=1.0E100;for(g=a.edges.head;null!=g;)k=g.elt,l=b.gnormx*k.gnormx+b.gnormy*k.gnormy,l<e&&(e=l,i=k),g=g.next;var g=e=0,e=i.gp0.x,g=i.gp0.y,l=k=0,k=i.gp1.x,l=i.gp1.y,n=m=0,m=k-e,n=l-g,r=b.gnormy*e-b.gnormx*g,o=b.gnormy*k-b.gnormx*l,s=1/(o-r),r=(-b.tp1-r)*s;r>t.epsilon&&(e+=m*r,g+=n*r);o=(-b.tp0-o)*s;o<-t.epsilon&&
(k+=m*o,l+=n*o);n=m=0;n=j;m=b.gnormx*n;n*=b.gnormy;c.lnormx=b.lnormx;c.lnormy=b.lnormy;c.lproj=b.lprojection;c.radius=0;c.rev=d!=(-1==j);c.ptype=c.rev?1:0;o=e*b.gnormx+g*b.gnormy-b.gprojection;j=k*b.gnormx+l*b.gnormy-b.gprojection;if(0<o&&0<j)return!1;d&&(m=-m,n=-n);d=c.injectContact(e-0.5*b.gnormx*o,g-0.5*b.gnormy*o,m,n,o,c.rev?1:0,0<o);e-=1*a.body.posx;g-=1*a.body.posy;d.inner.lr1x=e*a.body.axisy+g*a.body.axisx;d.inner.lr1y=g*a.body.axisy-e*a.body.axisx;d=c.injectContact(k-0.5*b.gnormx*j,l-0.5*
b.gnormy*j,m,n,j,c.rev?0:1,0<j);k-=1*a.body.posx;l-=1*a.body.posy;d.inner.lr1x=k*a.body.axisy+l*a.body.axisx;d.inner.lr1y=l*a.body.axisy-k*a.body.axisx;1==h?(c.__ref_edge1=b,c.__ref_edge2=i):(c.__ref_edge2=b,c.__ref_edge1=i);return!0}}}else{j=-1.0E100;i=!0;e=h=null;g=b.polygon.gverts.next;for(k=b.polygon.edges.head;null!=k;){l=k.elt;m=l.gnormx*a.circle.worldCOMx+l.gnormy*a.circle.worldCOMy-l.gprojection-a.circle.radius;if(0<m){i=!1;break}m>j&&(j=m,h=l,e=g);g=g.next;k=k.next}if(i){i=e;e=null==e.next?
b.polygon.gverts.next:e.next;g=a.circle.worldCOMy*h.gnormx-a.circle.worldCOMx*h.gnormy;if(g<=i.y*h.gnormx-i.x*h.gnormy)return j=a.circle.radius,g=e=0,e=i.x-a.circle.worldCOMx,g=i.y-a.circle.worldCOMy,k=e*e+g*g,k>j*j?j=null:k<t.epsilon*t.epsilon?j=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-j,0,null):(k=1/Math.sqrt(k),l=k<t.epsilon?1.0E100:1/k,m=0.5+(a.circle.radius-0.5*j)*k,j=d?c.injectContact(a.circle.worldCOMx+e*m,a.circle.worldCOMy+g*m,-e*k,-g*k,l-j,0,null):c.injectContact(a.circle.worldCOMx+
e*m,a.circle.worldCOMy+g*m,e*k,g*k,l-j,0,null)),null!=j&&(e=j.inner,c.ptype=2,k=g=0,g=i.x-b.polygon.body.posx,k=i.y-b.polygon.body.posy,c.__ref_edge1=h,c.__ref_vertex=-1,d?(e.lr1x=g*b.polygon.body.axisy+k*b.polygon.body.axisx,e.lr1y=k*b.polygon.body.axisy-g*b.polygon.body.axisx,e.lr2x=a.circle.localCOMx,e.lr2y=a.circle.localCOMy):(e.lr2x=g*b.polygon.body.axisy+k*b.polygon.body.axisx,e.lr2y=k*b.polygon.body.axisy-g*b.polygon.body.axisx,e.lr1x=a.circle.localCOMx,e.lr1y=a.circle.localCOMy),c.radius=
a.circle.radius),null!=j;if(g>=e.y*h.gnormx-e.x*h.gnormy)return i=a.circle.radius,g=j=0,j=e.x-a.circle.worldCOMx,g=e.y-a.circle.worldCOMy,k=j*j+g*g,k>i*i?i=null:k<t.epsilon*t.epsilon?i=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-i,0,null):(k=1/Math.sqrt(k),l=k<t.epsilon?1.0E100:1/k,m=0.5+(a.circle.radius-0.5*i)*k,i=d?c.injectContact(a.circle.worldCOMx+j*m,a.circle.worldCOMy+g*m,-j*k,-g*k,l-i,0,null):c.injectContact(a.circle.worldCOMx+j*m,a.circle.worldCOMy+g*m,j*k,g*k,l-i,0,null)),
null!=i&&(j=i.inner,c.ptype=2,k=g=0,g=e.x-b.polygon.body.posx,k=e.y-b.polygon.body.posy,c.__ref_edge1=h,c.__ref_vertex=1,d?(j.lr1x=g*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr1y=k*b.polygon.body.axisy-g*b.polygon.body.axisx,j.lr2x=a.circle.localCOMx,j.lr2y=a.circle.localCOMy):(j.lr2x=g*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr2y=k*b.polygon.body.axisy-g*b.polygon.body.axisx,j.lr1x=a.circle.localCOMx,j.lr1y=a.circle.localCOMy),c.radius=a.circle.radius),null!=i;i=b=0;i=a.circle.radius+
0.5*j;b=h.gnormx*i;i*=h.gnormy;g=e=0;e=a.circle.worldCOMx-b;g=a.circle.worldCOMy-i;b=d?c.injectContact(e,g,h.gnormx,h.gnormy,j,0,null):c.injectContact(e,g,-h.gnormx,-h.gnormy,j,0,null);c.ptype=d?0:1;c.lnormx=h.lnormx;c.lnormy=h.lnormy;c.rev=!d;c.lproj=h.lprojection;c.radius=a.circle.radius;b.inner.lr1x=a.circle.localCOMx;b.inner.lr1y=a.circle.localCOMy;c.__ref_edge1=h;c.__ref_vertex=0;return!0}}else if(h=a.circle.radius+b.circle.radius,j=i=0,i=b.circle.worldCOMx-a.circle.worldCOMx,j=b.circle.worldCOMy-
a.circle.worldCOMy,e=i*i+j*j,e>h*h?h=null:e<t.epsilon*t.epsilon?h=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-h,0,null):(e=1/Math.sqrt(e),g=e<t.epsilon?1.0E100:1/e,k=0.5+(a.circle.radius-0.5*h)*e,h=d?c.injectContact(a.circle.worldCOMx+i*k,a.circle.worldCOMy+j*k,-i*e,-j*e,g-h,0,null):c.injectContact(a.circle.worldCOMx+i*k,a.circle.worldCOMy+j*k,i*e,j*e,g-h,0,null)),null!=h)return h=h.inner,d?(h.lr1x=b.circle.localCOMx,h.lr1y=b.circle.localCOMy,h.lr2x=a.circle.localCOMx,h.lr2y=a.circle.localCOMy):
(h.lr1x=a.circle.localCOMx,h.lr1y=a.circle.localCOMy,h.lr2x=b.circle.localCOMx,h.lr2y=b.circle.localCOMy),c.radius=a.circle.radius+b.circle.radius,c.ptype=2,!0;return!1};N.testCollide_safe=function(a,b){if(b.type==f.id_ShapeType_CIRCLE)var c=a,a=b,b=c;return N.testCollide(a,b)};N.testCollide=function(a,b){if(b.type==f.id_ShapeType_POLYGON){if(a.type==f.id_ShapeType_POLYGON){for(var c=!0,d=a.polygon.edges.head;null!=d;){for(var e=d.elt,g=1.0E100,h=b.polygon.gverts.next;null!=h;){var i=h,i=e.gnormx*
i.x+e.gnormy*i.y;i<g&&(g=i);h=h.next}g-=e.gprojection;if(0<g){c=!1;break}d=d.next}if(c){for(d=b.polygon.edges.head;null!=d;){e=d.elt;g=1.0E100;for(h=a.polygon.gverts.next;null!=h;)i=h,i=e.gnormx*i.x+e.gnormy*i.y,i<g&&(g=i),h=h.next;g-=e.gprojection;if(0<g){c=!1;break}d=d.next}return c}}else{d=c=null;e=!0;g=-1.0E100;h=b.polygon.gverts.next;for(i=b.polygon.edges.head;null!=i;){var j=i.elt,k=j.gnormx*a.circle.worldCOMx+j.gnormy*a.circle.worldCOMy-j.gprojection-a.circle.radius;if(0<k){e=!1;break}k>g&&
(g=k,c=j,d=h);h=h.next;i=i.next}if(e){e=d;d=null==d.next?b.polygon.gverts.next:d.next;g=a.circle.worldCOMy*c.gnormx-a.circle.worldCOMx*c.gnormy;if(g<=e.y*c.gnormx-e.x*c.gnormy)return c=a.circle.radius,g=d=0,d=e.x-a.circle.worldCOMx,g=e.y-a.circle.worldCOMy,d*d+g*g<=c*c;return g>=d.y*c.gnormx-d.x*c.gnormy?(c=a.circle.radius,g=e=0,e=d.x-a.circle.worldCOMx,g=d.y-a.circle.worldCOMy,e*e+g*g<=c*c):!0}}return!1}c=a.circle.radius+b.circle.radius;e=d=0;d=b.circle.worldCOMx-a.circle.worldCOMx;e=b.circle.worldCOMy-
a.circle.worldCOMy;return d*d+e*e<=c*c};N.flowCollide=function(a,b,c){if(b.type==f.id_ShapeType_POLYGON){if(a.type==f.id_ShapeType_POLYGON){for(var d=[],e=[],g=!0,h=!0,i=a.polygon.edges.head;null!=i;){for(var j=i.elt,k=1.0E100,l=0,m=b.polygon.gverts.next;null!=m;){var n=m,o=j.gnormx*n.x+j.gnormy*n.y;o<k&&(k=o);o>=j.gprojection+t.epsilon&&(e[l]=!0,h=!1);l++;m=m.next}k-=j.gprojection;if(0<k){g=!1;break}i=i.next}if(h)return b.polygon.validate_worldCOM(),c.overlap=b.polygon.area,c.centroidx=b.polygon.worldCOMx,
c.centroidy=b.polygon.worldCOMy,null,!0;if(g){for(var h=!0,r=b.polygon.edges.head;null!=r;){for(var s=r.elt,u=1.0E100,q=0,v=a.polygon.gverts.next;null!=v;){var y=v,w=s.gnormx*y.x+s.gnormy*y.y;w<u&&(u=w);w>=s.gprojection+t.epsilon&&(d[q]=!0,h=!1);q++;v=v.next}u-=s.gprojection;if(0<u){g=!1;break}r=r.next}if(h)return a.polygon.validate_worldCOM(),c.overlap=a.polygon.area,c.centroidx=a.polygon.worldCOMx,c.centroidy=a.polygon.worldCOMy,null,!0;if(g){for(;null!=N.flowpoly.head;){var z=N.flowpoly.pop_unsafe();
if(!z._inuse){var A=z;null!=A.outer&&(A.outer.zpp_inner=null,A.outer=null);A._isimmutable=null;A._validate=null;A._invalidate=null;A.next=ka.zpp_pool;ka.zpp_pool=A}}for(var x=null,C=!1,B=a.polygon.gverts.next,F=0,E=b.polygon.gverts.next,G=0,L=0,J=b.polygon.edgeCnt;L<J;){var I=L++;if(e[I])E=E.next;else{G=I;break}}if(null==E){for(var E=b.polygon.gverts.next,C=!0,P=0,Q=a.polygon.edgeCnt;P<Q;){var R=P++;if(d[R])B=B.next;else{F=R;break}}null==B?B=a.polygon.gverts.next:(N.flowpoly.add(B),x=N.flowpoly.head.elt)}else N.flowpoly.add(E),
x=N.flowpoly.head.elt;var O=1;if(null==N.flowpoly.head){for(var T=!0,V=a.polygon.gverts.next,H=V,U=V.next;null!=U;){for(var K=U,Y=2,X=b.polygon.gverts.next,W=X,aa=X.next;null!=aa;){var Z=aa,ba=0;(function(){var a=0,b=0,a=H.x-W.x,b=H.y-W.y,c=0,d=0,c=K.x-H.x,d=K.y-H.y,e=0,g=0,e=Z.x-W.x,g=Z.y-W.y,f=d*e-c*g;f*f>t.epsilon*t.epsilon?(f=1/f,e=(g*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(ba=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&ba<Y&&(Y=ba,E=X);X=aa;W=Z;aa=aa.next}var ha=
aa=b.polygon.gverts.next,ma=0;(function(){var a=0,b=0,a=H.x-W.x,b=H.y-W.y,c=0,d=0,c=K.x-H.x,d=K.y-H.y,e=0,g=0,e=ha.x-W.x,g=ha.y-W.y,f=d*e-c*g;f*f>t.epsilon*t.epsilon?(f=1/f,e=(g*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(ma=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&ma<Y&&(Y=ma,E=X);if(2!=Y){var la=0,oa=0,ra=Y,la=H.x+(K.x-H.x)*ra,oa=H.y+(K.y-H.y)*ra,x=ka.get(la,oa,null);N.flowpoly.add(x);C=!0;B=V;T=!1;break}V=U;H=K;U=U.next}if(T){for(var ea=U=a.polygon.gverts.next,
D=2,ia=b.polygon.gverts.next,da=ia,ja=ia.next;null!=ja;){var $=ja,Ae=0;(function(){var a=0,b=0,a=H.x-da.x,b=H.y-da.y,c=0,d=0,c=ea.x-H.x,d=ea.y-H.y,e=0,g=0,e=$.x-da.x,g=$.y-da.y,f=d*e-c*g;f*f>t.epsilon*t.epsilon?(f=1/f,e=(g*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(Ae=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&Ae<D&&(D=Ae,E=ia);ia=ja;da=$;ja=ja.next}var xa=ja=b.polygon.gverts.next,va=0;(function(){var a=0,b=0,a=H.x-da.x,b=H.y-da.y,c=0,d=0,c=ea.x-H.x,d=ea.y-H.y,
e=0,g=0,e=xa.x-da.x,g=xa.y-da.y,f=d*e-c*g;f*f>t.epsilon*t.epsilon?(f=1/f,e=(g*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(va=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&va<D&&(D=va,E=ia);if(2!=D){var ga=0,sa=0,pa=D,ga=H.x+(ea.x-H.x)*pa,sa=H.y+(ea.y-H.y)*pa,x=ka.get(ga,sa,null);N.flowpoly.add(x);C=!0;B=V}}O=2}for(;;)if(C)if(B=B.next,F++,null==B&&(B=a.polygon.gverts.next,F=0),d[F]){var qa=N.flowpoly.head.elt,na=B,S=E,ta=E.next;null==ta&&(ta=b.polygon.gverts.next);var ca=
-1,wa=null,ya=0,Ia=0,za=ta,fa=ta;do{var Ea=fa,Fa=0;if(function(){var a=0,b=0,a=S.x-qa.x,b=S.y-qa.y,c=0,d=0,c=Ea.x-S.x,d=Ea.y-S.y,e=0,g=0,e=na.x-qa.x,g=na.y-qa.y,f=d*e-c*g;f*f>t.epsilon*t.epsilon?(f=1/f,e=(g*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(Fa=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Fa>=ca)if(wa=E,ya=G,++Ia==O){ca=Fa;fa=za;break}else ca=Fa;S=Ea;E=fa;G++;G>=b.polygon.edgeCnt&&(G=0);fa=fa.next;null==fa&&(fa=b.polygon.gverts.next)}while(0);for(;fa!=za;){var Aa=
fa,Ha=0;if(function(){var a=0,b=0,a=S.x-qa.x,b=S.y-qa.y,c=0,d=0,c=Aa.x-S.x,d=Aa.y-S.y,e=0,g=0,e=na.x-qa.x,g=na.y-qa.y,f=d*e-c*g;f*f>t.epsilon*t.epsilon?(f=1/f,e=(g*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(Ha=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Ha>=ca)if(wa=E,ya=G,++Ia==O){ca=Ha;fa=za;break}else ca=Ha;S=Aa;E=fa;G++;G>=b.polygon.edgeCnt&&(G=0);fa=fa.next;null==fa&&(fa=b.polygon.gverts.next)}if(null==wa)break;var wb=wa,Ca=wa.next;null==Ca&&(Ca=b.polygon.gverts.next);
var Da=Ca,Ga=0,Ad=0,Ka=ca,Ga=wb.x+(Da.x-wb.x)*Ka,Ad=wb.y+(Da.y-wb.y)*Ka;if(null!=x&&ib.vec_dsq(Ga,Ad,x.x,x.y)<t.epsilon)break;N.flowpoly.add(ka.get(Ga,Ad,null));null==x&&(x=N.flowpoly.head.elt);E=wa;G=ya;C=!C;O=2}else{var Na=B;if(null!=x&&ib.vec_dsq(Na.x,Na.y,x.x,x.y)<t.epsilon)break;N.flowpoly.add(Na);null==x&&(x=N.flowpoly.head.elt);O=1}else if(E=E.next,G++,null==E&&(E=b.polygon.gverts.next,G=0),e[G]){var Ba=N.flowpoly.head.elt,Va=E,M=B,Qa=B.next;null==Qa&&(Qa=a.polygon.gverts.next);var ua=-1,Ja=
null,ab=0,Xa=0,Sa=Qa,db=Qa;do{var Ua=db,cb=0;if(function(){var a=0,b=0,a=M.x-Ba.x,b=M.y-Ba.y,c=0,d=0,c=Ua.x-M.x,d=Ua.y-M.y,e=0,g=0,e=Va.x-Ba.x,g=Va.y-Ba.y,f=d*e-c*g;f*f>t.epsilon*t.epsilon?(f=1/f,e=(g*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(cb=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&cb>=ua)if(Ja=B,ab=F,++Xa==O){ua=cb;db=Sa;break}else ua=cb;M=Ua;B=db;F++;F>=a.polygon.edgeCnt&&(F=0);db=db.next;null==db&&(db=a.polygon.gverts.next)}while(0);for(;db!=Sa;){var Oa=
db,$a=0;if(function(){var a=0,b=0,a=M.x-Ba.x,b=M.y-Ba.y,c=0,d=0,c=Oa.x-M.x,d=Oa.y-M.y,e=0,g=0,e=Va.x-Ba.x,g=Va.y-Ba.y,f=d*e-c*g;f*f>t.epsilon*t.epsilon?(f=1/f,e=(g*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?($a=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&$a>=ua)if(Ja=B,ab=F,++Xa==O){ua=$a;db=Sa;break}else ua=$a;M=Oa;B=db;F++;F>=a.polygon.edgeCnt&&(F=0);db=db.next;null==db&&(db=a.polygon.gverts.next)}if(null==Ja)break;var kd=Ja,Wa=Ja.next;null==Wa&&(Wa=a.polygon.gverts.next);
var nb=Wa,jb=0,se=0,tb=ua,jb=kd.x+(nb.x-kd.x)*tb,se=kd.y+(nb.y-kd.y)*tb;if(null!=x&&ib.vec_dsq(jb,se,x.x,x.y)<t.epsilon)break;N.flowpoly.add(ka.get(jb,se,null));null==x&&(x=N.flowpoly.head.elt);B=Ja;F=ab;C=!C;O=2}else{var sb=E;if(null!=x&&ib.vec_dsq(sb.x,sb.y,x.x,x.y)<t.epsilon)break;N.flowpoly.add(sb);null==x&&(x=N.flowpoly.head.elt);O=1}if(null!=N.flowpoly.head&&null!=N.flowpoly.head.next&&null!=N.flowpoly.head.next.next){for(var Eb=0,Vc=0,Fb=0,Eb=Fb=Vc=0,mb=N.flowpoly.head,gb=mb.elt,mb=mb.next,
Pa=mb.elt,mb=mb.next;null!=mb;)var ob=mb.elt,Eb=Eb+Pa.x*(ob.y-gb.y),Db=ob.y*Pa.x-ob.x*Pa.y,Vc=Vc+(Pa.x+ob.x)*Db,Fb=Fb+(Pa.y+ob.y)*Db,gb=Pa,Pa=ob,mb=mb.next;var mb=N.flowpoly.head,md=mb.elt,Eb=Eb+Pa.x*(md.y-gb.y),Xf=md.y*Pa.x-md.x*Pa.y,Vc=Vc+(Pa.x+md.x)*Xf,Fb=Fb+(Pa.y+md.y)*Xf,gb=Pa,Pa=md,mb=mb.next,Ac=mb.elt,Eb=Eb+Pa.x*(Ac.y-gb.y),Hb=Ac.y*Pa.x-Ac.x*Pa.y,Vc=Vc+(Pa.x+Ac.x)*Hb,Fb=Fb+(Pa.y+Ac.y)*Hb,Eb=0.5*Eb,Ib=1/(6*Eb),Vc=Vc*Ib,Fb=Fb*Ib;c.overlap=-Eb;c.centroidx=Vc;c.centroidy=Fb;null;return!0}}}return!1}for(var zb=
[],Jb=!0,Ra=null,qb=null,Qb=-1.0E100,Rb=!0,Cb=b.polygon.gverts.next,Tb=0,rb=b.polygon.edges.head;null!=rb;){var lb=rb.elt,hb=lb.gnormx*a.circle.worldCOMx+lb.gnormy*a.circle.worldCOMy;if(hb>lb.gprojection+a.circle.radius){Rb=!1;break}else hb+a.circle.radius>lb.gprojection+t.epsilon&&(Jb=!1,zb[Tb]=!0);hb-=lb.gprojection+a.circle.radius;hb>Qb&&(Qb=hb,Ra=lb,qb=Cb);Cb=Cb.next;Tb++;rb=rb.next}if(Rb){if(Jb)return c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,null,
!0;var xb=qb,pb;pb=null==qb.next?b.polygon.gverts.next:qb.next;var Xb=a.circle.worldCOMy*Ra.gnormx-a.circle.worldCOMx*Ra.gnormy;if(Xb<=xb.y*Ra.gnormx-xb.x*Ra.gnormy?function(){var b=a.circle.radius,c=0,d=0,c=xb.x-a.circle.worldCOMx,d=xb.y-a.circle.worldCOMy;return c*c+d*d<=b*b}(this):Xb>=pb.y*Ra.gnormx-pb.x*Ra.gnormy?function(){var b=a.circle.radius,c=0,d=0,c=pb.x-a.circle.worldCOMx,d=pb.y-a.circle.worldCOMy;return c*c+d*d<=b*b}(this):1){for(var yb=[],Pb=0,bc=!0,Ma=null,bb=0,vb=b.polygon.gverts.next;null!=
vb;){var fc=vb,Bc=ib.vec_dsq(fc.x,fc.y,a.circle.worldCOMx,a.circle.worldCOMy);(yb[Pb]=Bc<=a.circle.radius*a.circle.radius)?(bb=Pb,Ma=vb):bc=!1;Pb++;vb=vb.next}if(bc)return b.polygon.validate_worldCOM(),c.overlap=b.polygon.area,c.centroidx=b.polygon.worldCOMx,c.centroidy=b.polygon.worldCOMy,null,!0;for(;null!=N.flowpoly.head;){var kc=N.flowpoly.pop_unsafe();if(!kc._inuse){var Ya=kc;null!=Ya.outer&&(Ya.outer.zpp_inner=null,Ya.outer=null);Ya._isimmutable=null;Ya._validate=null;Ya._invalidate=null;Ya.next=
ka.zpp_pool;ka.zpp_pool=Ya}}N.flowsegs.clear();var lc=null,Za=1;null==Ma?(Ma=b.polygon.gverts.next,Za=2):N.flowpoly.add(lc=Ma);for(;0!=Za;)if(1==Za)if(Ma=Ma.next,null==Ma&&(Ma=b.polygon.gverts.next),bb++,bb>=b.polygon.edgeCnt&&(bb=0),yb[bb]){if(ib.vec_dsq(lc.x,lc.y,Ma.x,Ma.y)<t.epsilon)break;N.flowpoly.add(Ma)}else{var eb=N.flowpoly.head.elt,Kb=Ma,Lb=0,Ob=0,Lb=Kb.x-eb.x,Ob=Kb.y-eb.y,Sb=0,Vb=0,Sb=eb.x-a.circle.worldCOMx,Vb=eb.y-a.circle.worldCOMy,Gb=Lb*Lb+Ob*Ob,Wb=2*(Sb*Lb+Vb*Ob),Dc=Math.sqrt(Wb*Wb-
4*Gb*(Sb*Sb+Vb*Vb-a.circle.radius*a.circle.radius)),Gb=1/(2*Gb),Kc=(-Wb-Dc)*Gb,xc=0,yc=0,Qc=Kc<t.epsilon?(-Wb+Dc)*Gb:Kc,xc=eb.x+(Kb.x-eb.x)*Qc,yc=eb.y+(Kb.y-eb.y)*Qc;if(ib.vec_dsq(lc.x,lc.y,xc,yc)<t.epsilon)break;N.flowpoly.add(ka.get(xc,yc,null));Za=2}else if(2==Za){var dc=Ma.next;null==dc&&(dc=b.polygon.gverts.next);var La=Ma,Za=0,ub=dc,mc=dc;do{var fb=mc,ec=bb+1;ec==b.polygon.edgeCnt&&(ec=0);if(zb[bb])if(yb[ec]){var gc=0,hc=0,gc=fb.x-La.x,hc=fb.y-La.y,ic=0,pc=0,ic=La.x-a.circle.worldCOMx,pc=La.y-
a.circle.worldCOMy,$b=gc*gc+hc*hc,rc=2*(ic*gc+pc*hc),cd=Math.sqrt(rc*rc-4*$b*(ic*ic+pc*pc-a.circle.radius*a.circle.radius)),$b=1/(2*$b),dd=(-rc-cd)*$b,Hc=0,Jc=0,ed=dd<t.epsilon?(-rc+cd)*$b:dd,Hc=La.x+(fb.x-La.x)*ed,Jc=La.y+(fb.y-La.y)*ed;if(ib.vec_dsq(lc.x,lc.y,Hc,Jc)<t.epsilon){Za=0;mc=ub;break}var fd=ka.get(Hc,Jc,null);N.flowsegs.add(N.flowpoly.head.elt);N.flowsegs.add(fd);N.flowpoly.add(fd);Za=1;mc=ub;break}else{var uc=0,vc=0,Lc,wc=0,Cc=0,wc=fb.x-La.x,Cc=fb.y-La.y,Ec=0,Gc=0,Ec=La.x-a.circle.worldCOMx,
Gc=La.y-a.circle.worldCOMy,cc=wc*wc+Cc*Cc,tc=2*(Ec*wc+Gc*Cc),Ub=tc*tc-4*cc*(Ec*Ec+Gc*Gc-a.circle.radius*a.circle.radius);Ub*Ub<t.epsilon?(uc=0>Ub?10:vc=-tc/(2*cc),Lc=!1):(Ub=Math.sqrt(Ub),cc=1/(2*cc),uc=(-tc-Ub)*cc,vc=(-tc+Ub)*cc,Lc=!0);if(uc<1-t.epsilon&&vc>t.epsilon){var gd=0,hd=0,td=uc,gd=La.x+(fb.x-La.x)*td,hd=La.y+(fb.y-La.y)*td;if(null!=lc&&ib.vec_dsq(lc.x,lc.y,gd,hd)<t.epsilon){Za=0;mc=ub;break}var ud=ka.get(gd,hd,null);null!=N.flowpoly.head&&(N.flowsegs.add(N.flowpoly.head.elt),N.flowsegs.add(ud));
N.flowpoly.add(ud);null==lc&&(lc=N.flowpoly.head.elt);if(Lc){var vd=0,wd=0,xd=vc,vd=La.x+(fb.x-La.x)*xd,wd=La.y+(fb.y-La.y)*xd;N.flowpoly.add(ka.get(vd,wd,null))}}}La=fb;Ma=mc;bb=ec;mc=mc.next;null==mc&&(mc=b.polygon.gverts.next)}while(0);for(;mc!=ub;){var kb=mc,Nc=bb+1;Nc==b.polygon.edgeCnt&&(Nc=0);if(zb[bb])if(yb[Nc]){var Oc=0,Pc=0,Oc=kb.x-La.x,Pc=kb.y-La.y,Rc=0,Sc=0,Rc=La.x-a.circle.worldCOMx,Sc=La.y-a.circle.worldCOMy,zc=Oc*Oc+Pc*Pc,Tc=2*(Rc*Oc+Sc*Pc),yd=Math.sqrt(Tc*Tc-4*zc*(Rc*Rc+Sc*Sc-a.circle.radius*
a.circle.radius)),zc=1/(2*zc),zd=(-Tc-yd)*zc,ld=0,od=0,Dd=zd<t.epsilon?(-Tc+yd)*zc:zd,ld=La.x+(kb.x-La.x)*Dd,od=La.y+(kb.y-La.y)*Dd;if(ib.vec_dsq(lc.x,lc.y,ld,od)<t.epsilon){Za=0;mc=ub;break}var Ed=ka.get(ld,od,null);N.flowsegs.add(N.flowpoly.head.elt);N.flowsegs.add(Ed);N.flowpoly.add(Ed);Za=1;mc=ub;break}else{var Wc=0,Xc=0,pd,Yc=0,Zc=0,Yc=kb.x-La.x,Zc=kb.y-La.y,ad=0,bd=0,ad=La.x-a.circle.worldCOMx,bd=La.y-a.circle.worldCOMy,qc=Yc*Yc+Zc*Zc,Fc=2*(ad*Yc+bd*Zc),ac=Fc*Fc-4*qc*(ad*ad+bd*bd-a.circle.radius*
a.circle.radius);ac*ac<t.epsilon?(Wc=0>ac?10:Xc=-Fc/(2*qc),pd=!1):(ac=Math.sqrt(ac),qc=1/(2*qc),Wc=(-Fc-ac)*qc,Xc=(-Fc+ac)*qc,pd=!0);if(Wc<1-t.epsilon&&Xc>t.epsilon){var qd=0,sd=0,Od=Wc,qd=La.x+(kb.x-La.x)*Od,sd=La.y+(kb.y-La.y)*Od;if(null!=lc&&ib.vec_dsq(lc.x,lc.y,qd,sd)<t.epsilon){Za=0;mc=ub;break}var Qd=ka.get(qd,sd,null);null!=N.flowpoly.head&&(N.flowsegs.add(N.flowpoly.head.elt),N.flowsegs.add(Qd));N.flowpoly.add(Qd);null==lc&&(lc=N.flowpoly.head.elt);if(pd){var Rd=0,Sd=0,Td=Xc,Rd=La.x+(kb.x-
La.x)*Td,Sd=La.y+(kb.y-La.y)*Td;N.flowpoly.add(ka.get(Rd,Sd,null))}}}La=kb;Ma=mc;bb=Nc;mc=mc.next;null==mc&&(mc=b.polygon.gverts.next)}}if(null==N.flowpoly.head)return!1;if(null==N.flowpoly.head.next){for(var Ud=!0,nd=b.polygon.edges.head;null!=nd;){var Bd=nd.elt;if(Bd.gnormx*a.circle.worldCOMx+Bd.gnormy*a.circle.worldCOMy>Bd.gprojection){Ud=!1;break}nd=nd.next}return Ud?(c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,null,!0):!1}var jc=0,sc=0,Ic=0;if(null!=
N.flowpoly.head.next.next){for(var ue=0,Ab=0,Bb=0,ue=Bb=Ab=0,Hd=N.flowpoly.head,id=Hd.elt,Hd=Hd.next,nc=Hd.elt,Hd=Hd.next;null!=Hd;)var Mc=Hd.elt,ue=ue+nc.x*(Mc.y-id.y),Zd=Mc.y*nc.x-Mc.x*nc.y,Ab=Ab+(nc.x+Mc.x)*Zd,Bb=Bb+(nc.y+Mc.y)*Zd,id=nc,nc=Mc,Hd=Hd.next;var Hd=N.flowpoly.head,Uc=Hd.elt,ue=ue+nc.x*(Uc.y-id.y),ae=Uc.y*nc.x-Uc.x*nc.y,Ab=Ab+(nc.x+Uc.x)*ae,Bb=Bb+(nc.y+Uc.y)*ae,id=nc,nc=Uc,Hd=Hd.next,jd=Hd.elt,ue=ue+nc.x*(jd.y-id.y),ce=jd.y*nc.x-jd.x*nc.y,Ab=Ab+(nc.x+jd.x)*ce,Bb=Bb+(nc.y+jd.y)*ce,ue=
0.5*ue,ee=1/(6*ue),Ab=Ab*ee,Bb=Bb*ee,fe=-ue,jc=jc+Ab*fe,sc=sc+Bb*fe,Ic=Ic-ue}else N.flowsegs.add(N.flowpoly.head.elt),N.flowsegs.add(N.flowpoly.head.next.elt);for(;null!=N.flowsegs.head;)var Fd=N.flowsegs.pop_unsafe(),Gd=N.flowsegs.pop_unsafe(),ge=0,he=0,ge=Gd.x-Fd.x,he=Gd.y-Fd.y,Yb=0,Zb=0,Yb=ge,Zb=he,ie=1/Math.sqrt(Yb*Yb+Zb*Zb),Yb=Yb*ie,Zb=Zb*ie,we=Yb,Yb=-Zb,Zb=we,Mb=0,Nb=0,Mb=Fd.x+Gd.x,Nb=Fd.y+Gd.y,Mb=0.5*Mb,Nb=0.5*Nb,Mb=Mb-1*a.circle.worldCOMx,Nb=Nb-1*a.circle.worldCOMy,Wd=0,je=0,ke=Yb*Mb+Zb*Nb,
Jd=ke/a.circle.radius,rd=Math.sqrt(1-Jd*Jd),le=Math.acos(Jd),Wd=a.circle.radius*(a.circle.radius*le-ke*rd),je=0.6666666666666666*a.circle.radius*rd*rd*rd/(le-Jd*rd),Mb=a.circle.worldCOMx,Nb=a.circle.worldCOMy,me=je,Mb=Mb+Yb*me,Nb=Nb+Zb*me,ne=Wd,jc=jc+Mb*ne,sc=sc+Nb*ne,Ic=Ic+Wd;var oe=1/Ic,jc=jc*oe,sc=sc*oe;c.overlap=Ic;c.centroidx=jc;c.centroidy=sc;null;return!0}}return!1}var oc=a.circle,$c=b.circle,Ld=0,Md=0,Ld=$c.worldCOMx-oc.worldCOMx,Md=$c.worldCOMy-oc.worldCOMy,pe=oc.radius+$c.radius,Yd=Ld*Ld+
Md*Md;if(Yd>pe*pe)return!1;if(Yd<t.epsilon*t.epsilon)oc.radius<$c.radius?(c.overlap=oc.area,c.centroidx=oc.worldCOMx,c.centroidy=oc.worldCOMy):(c.overlap=$c.area,c.centroidx=$c.worldCOMx,c.centroidy=$c.worldCOMy);else{var Nd=Math.sqrt(Yd),qe=1/Nd,Pd=0.5*(Nd-($c.radius*$c.radius-oc.radius*oc.radius)*qe);if(Pd<=-oc.radius)c.overlap=oc.area,c.centroidx=oc.worldCOMx,c.centroidy=oc.worldCOMy;else{var $d=Nd-Pd;if($d<=-$c.radius)c.overlap=$c.area,c.centroidx=$c.worldCOMx,c.centroidy=$c.worldCOMy;else{var be=
0,re=0,de=0,te=0,Vd=Pd/oc.radius,Cd=Math.sqrt(1-Vd*Vd),ve=Math.acos(Vd),be=oc.radius*(oc.radius*ve-Pd*Cd),re=0.6666666666666666*oc.radius*Cd*Cd*Cd/(ve-Vd*Cd),Xd=$d/$c.radius,Id=Math.sqrt(1-Xd*Xd),xe=Math.acos(Xd),de=$c.radius*($c.radius*xe-$d*Id),te=0.6666666666666666*$c.radius*Id*Id*Id/(xe-Xd*Id),ye=be+de,ze=(re*be+(Nd-te)*de)/ye*qe;c.overlap=ye;c.centroidx=oc.worldCOMx+Ld*ze;c.centroidy=oc.worldCOMy+Md*ze}}}null;return!0};var zb=function(){this.toiDistance=0;this.next=null;this.inner=!1;this.normal=
this.shape=this.ray=null};h["zpp_nape.geom.ZPP_ConvexRayResult"]=zb;zb.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"];zb.getRay=function(a,b,c,d){var e;null==zb.rayPool?(zb.internal=!0,e=new si,e.zpp_inner=new zb,e.zpp_inner.ray=e,zb.internal=!1):(e=zb.rayPool.ray,zb.rayPool=zb.rayPool.next,e.zpp_inner.next=null);var g=e.zpp_inner;g.normal=a;a.zpp_inner._immutable=!0;g.toiDistance=b;g.inner=c;g.shape=d;return e};zb.prototype={__class__:zb};var Yj=function(){this.next=null;this.x=this.y=0};h["zpp_nape.geom.ZPP_GeomVert"]=
Yj;Yj.__name__=["zpp_nape","geom","ZPP_GeomVert"];Yj.prototype={__class__:Yj};var Zj=function(){this.outer=this.vertices=null};h["zpp_nape.geom.ZPP_GeomPoly"]=Zj;Zj.__name__=["zpp_nape","geom","ZPP_GeomPoly"];Zj.prototype={__class__:Zj};var $j=function(){this.a=this.b=this.c=this.d=this.tx=this.ty=0};h["zpp_nape.geom.ZPP_Mat23"]=$j;$j.__name__=["zpp_nape","geom","ZPP_Mat23"];$j.prototype={__class__:$j};var ak=function(){this.x=null;this.m=this.n=0};h["zpp_nape.geom.ZPP_MatMN"]=ak;ak.__name__=["zpp_nape",
"geom","ZPP_MatMN"];ak.prototype={__class__:ak};var qi=function(){this.zip_dir=!1;this.maxdist=this.originx=this.originy=this.dirx=this.diry=this.idirx=this.idiry=this.normalx=this.normaly=this.absnormalx=this.absnormaly=0;this.origin=this.direction=null;this.origin=l.get(null,null,null);this.origin.zpp_inner._invalidate=n(this,this.origin_invalidate);this.direction=l.get(null,null,null);this.direction.zpp_inner._invalidate=n(this,this.direction_invalidate);this.diry=this.dirx=this.originy=this.originx=
0;this.zip_dir=!1};h["zpp_nape.geom.ZPP_Ray"]=qi;qi.__name__=["zpp_nape","geom","ZPP_Ray"];qi.prototype={origin_invalidate:function(a){this.originx=a.x;this.originy=a.y},direction_invalidate:function(a){this.dirx=a.x;this.diry=a.y;this.zip_dir=!0},validate_dir:function(){if(this.zip_dir){this.zip_dir=!1;var a=1/Math.sqrt(this.dirx*this.dirx+this.diry*this.diry);this.dirx*=a;this.diry*=a;this.idirx=1/this.dirx;this.idiry=1/this.diry;this.normalx=-this.diry;this.normaly=this.dirx;a=this.normalx;this.absnormalx=
0>a?-a:a;a=this.normaly;this.absnormaly=0>a?-a:a}},rayAABB:function(){var a=this.originx,b=a,c=this.originy,d=c;this.maxdist>=Math.POSITIVE_INFINITY?(0<this.dirx?b=Math.POSITIVE_INFINITY:0>this.dirx&&(b=Math.NEGATIVE_INFINITY),0<this.diry?d=Math.POSITIVE_INFINITY:0>this.diry&&(d=Math.NEGATIVE_INFINITY)):(b+=this.maxdist*this.dirx,d+=this.maxdist*this.diry);if(b<a)var e=a,a=b,b=e;d<c&&(e=c,c=d,d=e);return Ca.get(a,c,b,d)},aabbtest:function(a){var b=this.normalx*(this.originx-0.5*(a.minx+a.maxx))+this.normaly*
(this.originy-0.5*(a.miny+a.maxy));return(0>b?-b:b)<0.5*this.absnormalx*(a.maxx-a.minx)+0.5*this.absnormaly*(a.maxy-a.miny)},aabbsect:function(a){var b=this.originy>=a.miny&&this.originy<=a.maxy;if(this.originx>=a.minx&&this.originx<=a.maxx&&b)return 0;b=-1;do if(!(0<=this.dirx&&this.originx>=a.maxx)&&!(0>=this.dirx&&this.originx<=a.minx)&&!(0<=this.diry&&this.originy>=a.maxy)&&!(0>=this.diry&&this.originy<=a.miny)){if(0<this.dirx){var c=(a.minx-this.originx)*this.idirx;if(0<=c&&c<=this.maxdist){var d=
this.originy+c*this.diry;if(d>=a.miny&&d<=a.maxy){b=c;break}}}else if(0>this.dirx&&(c=(a.maxx-this.originx)*this.idirx,0<=c&&c<=this.maxdist&&(d=this.originy+c*this.diry,d>=a.miny&&d<=a.maxy))){b=c;break}0<this.diry?(c=(a.miny-this.originy)*this.idiry,0<=c&&c<=this.maxdist&&(d=this.originx+c*this.dirx,d>=a.minx&&d<=a.maxx&&(b=c))):0>this.diry&&(c=(a.maxy-this.originy)*this.idiry,0<=c&&c<=this.maxdist&&(d=this.originx+c*this.dirx,d>=a.minx&&d<=a.maxx&&(b=c)))}while(0);return b},circlesect2:function(a,
b,c){a.zip_worldCOM&&null!=a.body&&(a.zip_worldCOM=!1,a.zip_localCOM&&(a.zip_localCOM=!1,a.type==f.id_ShapeType_POLYGON&&a.polygon.__validate_localCOM(),null!=a.wrap_localCOM&&(a.wrap_localCOM.zpp_inner.x=a.localCOMx,a.wrap_localCOM.zpp_inner.y=a.localCOMy)),a.body.validate_axis(),a.worldCOMx=a.body.posx+(a.body.axisy*a.localCOMx-a.body.axisx*a.localCOMy),a.worldCOMy=a.body.posy+(a.localCOMx*a.body.axisx+a.localCOMy*a.body.axisy));var d=0,e=0,d=this.originx-a.worldCOMx,e=this.originy-a.worldCOMy,
g=this.dirx*this.dirx+this.diry*this.diry,h=2*(d*this.dirx+e*this.diry),d=d*d+e*e-a.radius*a.radius,i=h*h-4*g*d;if(0==i){if(e=-h/2*g,(!b||0<d)&&0<e&&e<=this.maxdist){g=b=0;b=this.originx;g=this.originy;b+=this.dirx*e;g+=this.diry*e;b-=1*a.worldCOMx;g-=1*a.worldCOMy;h=1/Math.sqrt(b*b+g*g);b*=h;g*=h;0>=d&&(b=-b,g=-g);a=zb.getRay(l.get(b,g,null),e,0>=d,a.outer);b=null;for(d=c.zpp_inner.inner.head;null!=d&&!(a.zpp_inner.toiDistance<d.elt.zpp_inner.toiDistance);){b=d;d=d.next}c.zpp_inner.inner.inlined_insert(b,
a)}}else{i=Math.sqrt(i);g=1/(2*g);e=(-h-i)*g;d=(-h+i)*g;if(0<e&&e<=this.maxdist){h=g=0;g=this.originx;h=this.originy;g+=this.dirx*e;h+=this.diry*e;g-=1*a.worldCOMx;h-=1*a.worldCOMy;i=1/Math.sqrt(g*g+h*h);e=zb.getRay(l.get(g*i,h*i,null),e,!1,a.outer);g=null;for(h=c.zpp_inner.inner.head;null!=h&&!(e.zpp_inner.toiDistance<h.elt.zpp_inner.toiDistance);){g=h;h=h.next}c.zpp_inner.inner.inlined_insert(g,e)}if(0<d&&d<=this.maxdist&&b){e=b=0;b=this.originx;e=this.originy;b+=this.dirx*d;e+=this.diry*d;b-=1*
a.worldCOMx;e-=1*a.worldCOMy;g=1/Math.sqrt(b*b+e*e);a=zb.getRay(l.get(-(b*g),-(e*g),null),d,!0,a.outer);b=null;for(d=c.zpp_inner.inner.head;null!=d&&!(a.zpp_inner.toiDistance<d.elt.zpp_inner.toiDistance);){b=d;d=d.next}c.zpp_inner.inner.inlined_insert(b,a)}}},polysect2:function(a,b,c){for(var d=Math.POSITIVE_INFINITY,e=-1,g=null,f=null,h=a.edges.head,i=a.gverts.next,k=i,i=i.next;null!=i;){var m=i,n=h.elt;if(b||0>n.gnormx*this.dirx+n.gnormy*this.diry){var o=0,r=0,o=m.x-k.x,r=m.y-k.y,s=n=0,n=k.x-this.originx,
s=k.y-this.originy,k=r*this.dirx-o*this.diry;if(k*k>t.epsilon&&(k=1/k,o=(r*n-o*s)*k,0<o&&o<=this.maxdist&&(o<d||o>e)))k*=this.diry*n-this.dirx*s,k>-t.epsilon&&k<1+t.epsilon&&(o<d&&(d=o,g=h.elt),o>e&&(e=o,f=h.elt))}h=h.next;k=m;i=i.next}m=i=a.gverts.next;i=h.elt;if(b||0>i.gnormx*this.dirx+i.gnormy*this.diry)if(i=b=0,b=m.x-k.x,i=m.y-k.y,n=m=0,m=k.x-this.originx,n=k.y-this.originy,k=i*this.dirx-b*this.diry,k*k>t.epsilon&&(k=1/k,b=(i*m-b*n)*k,0<b&&b<=this.maxdist&&(b<d||b>e)))k*=this.diry*m-this.dirx*
n,k>-t.epsilon&&k<1+t.epsilon&&(b<d&&(d=b,g=h.elt),b>e&&(e=b,f=h.elt));if(null!=g){k=h=0;h=g.gnormx;k=g.gnormy;if(b=0<h*this.dirx+k*this.diry)h=-h,k=-k;d=zb.getRay(l.get(h,k,null),d,b,a.outer);h=null;for(k=c.zpp_inner.inner.head;null!=k&&!(d.zpp_inner.toiDistance<k.elt.zpp_inner.toiDistance);){h=k;k=k.next}c.zpp_inner.inner.inlined_insert(h,d)}if(null!=f&&g!=f){d=g=0;g=f.gnormx;d=f.gnormy;if(f=0<g*this.dirx+d*this.diry)g=-g,d=-d;a=zb.getRay(l.get(g,d,null),e,f,a.outer);e=null;for(f=c.zpp_inner.inner.head;null!=
f&&!(a.zpp_inner.toiDistance<f.elt.zpp_inner.toiDistance);){e=f;f=f.next}c.zpp_inner.inner.inlined_insert(e,a)}},__class__:qi};var Jb=function(){this.slipped=this.failed=this.kinematic=!1;this.c1=this.c2=this.axis=null;this.frozen1=this.frozen2=!1;this.s1=this.s2=this.arbiter=null;this.toi=0;this.next=null;this.c1=new ka;this.c2=new ka;this.axis=new ka};h["zpp_nape.geom.ZPP_ToiEvent"]=Jb;Jb.__name__=["zpp_nape","geom","ZPP_ToiEvent"];Jb.prototype={__class__:Jb};var Cc=function(){};h["zpp_nape.geom.ZPP_SweepDistance"]=
Cc;Cc.__name__=["zpp_nape","geom","ZPP_SweepDistance"];Cc.dynamicSweep=function(a,b,c,d,e){null==e&&(e=!1);var g=a.s1,f=a.s2,h=g.body,i=f.body,k=0,l=0,k=i.velx-h.velx,l=i.vely-h.vely,m=h.angvel;0>m&&(m=-m);var n=i.angvel;0>n&&(n=-n);var o=g.sweepCoef*m+f.sweepCoef*n;if(!e&&!a.kinematic&&k*k+l*l<t.dynamicSweepLinearThreshold*t.dynamicSweepLinearThreshold&&o<t.dynamicSweepAngularThreshold)a.toi=-1,a.failed=!0;else{for(var r=a.c1,m=a.c2,n=a.axis,s=0;;){h.sweepIntegrate(c*b);h.sweepValidate(g);i.sweepIntegrate(c*
b);i.sweepValidate(f);var u=Cc.distance(g,f,r,m,n,null)+d,q=k*n.x+l*n.y;if(u<t.distanceThresholdCCD){if(e)break;var v=0,x=0,v=r.x-h.posx,x=r.y-h.posy,w=0,y=0,w=m.x-i.posx,y=m.y-i.posy,v=q-h.sweep_angvel*(n.y*v-n.x*x)+i.sweep_angvel*(n.y*w-n.x*y);0<v&&(a.slipped=!0);if(0>=v||u<0.5*t.distanceThresholdCCD)break}q=(o-q)*b;if(0>=q){c=-1;break}q=u/q;1.0E-6>q&&(q=1.0E-6);c+=q;if(1<=c){c=1;h.sweepIntegrate(c*b);h.sweepValidate(g);i.sweepIntegrate(c*b);i.sweepValidate(f);b=Cc.distance(g,f,r,m,n,null)+d;k=
k*n.x+l*n.y;if(b<t.distanceThresholdCCD){if(e)break;l=e=0;e=r.x-h.posx;l=r.y-h.posy;d=r=0;r=m.x-i.posx;d=m.y-i.posy;h=k-h.sweep_angvel*(n.y*e-n.x*l)+i.sweep_angvel*(n.y*r-n.x*d);0<h&&(a.slipped=!0);if(0>=h||b<0.5*t.distanceThresholdCCD)break}c=-1;break}if(40<=++s){u>d&&(a.failed=!0);break}}a.toi=c}};Cc.staticSweep=function(a,b,c,d){var e=a.s1,g=a.s2,f=e.body,h=0,i=0,h=-f.velx,i=-f.vely,k=f.sweep_angvel;0>k&&(k=-k);for(var l=e.sweepCoef*k,k=a.c1,m=a.c2,n=a.axis,o=0;;){f.sweepIntegrate(c*b);f.sweepValidate(e);
var r=Cc.distance(e,g,k,m,n,null)+d,s=h*n.x+i*n.y;if(r<t.distanceThresholdCCD){var u=0,q=0,u=k.x-f.posx,q=k.y-f.posy,u=s-f.sweep_angvel*(n.y*u-n.x*q);0<u&&(a.slipped=!0);if(0>=u||r<0.5*t.distanceThresholdCCD)break}s=(l-s)*b;if(0>=s){c=-1;break}s=r/s;1.0E-6>s&&(s=1.0E-6);c+=s;if(1<=c){c=1;f.sweepIntegrate(c*b);f.sweepValidate(e);b=Cc.distance(e,g,k,m,n,null)+d;h=h*n.x+i*n.y;if(b<t.distanceThresholdCCD&&(d=i=0,i=k.x-f.posx,d=k.y-f.posy,f=h-f.sweep_angvel*(n.y*i-n.x*d),0<f&&(a.slipped=!0),0>=f||b<0.5*
t.distanceThresholdCCD))break;c=-1;break}if(40<=++o){r>d&&(a.failed=!0);break}}a.toi=c};Cc.distance=function(a,b,c,d,e,g){null==g&&(g=1.0E100);if(a.type==f.id_ShapeType_CIRCLE&&b.type==f.id_ShapeType_CIRCLE){var h=a.circle,i=b.circle,j,k=0,l=0,k=i.worldCOMx-h.worldCOMx,l=i.worldCOMy-h.worldCOMy,m=Math.sqrt(k*k+l*l);j=m-(h.radius+i.radius);if(j<g){if(0==m)k=1,l=0;else var n=1/m,k=k*n,l=l*n;var o=h.radius;c.x=h.worldCOMx+k*o;c.y=h.worldCOMy+l*o;var r=-i.radius;d.x=i.worldCOMx+k*r;d.y=i.worldCOMy+l*
r;e.x=k;e.y=l}return j}var s=!1;if(a.type==f.id_ShapeType_CIRCLE&&b.type==f.id_ShapeType_POLYGON)var u=a,a=b,b=u,q=c,c=d,d=q,s=!0;if(a.type==f.id_ShapeType_POLYGON&&b.type==f.id_ShapeType_CIRCLE){for(var v=b.circle,x=-1.0E100,w=null,y=a.polygon.edges.head;null!=y;){var z=y.elt,A=z.gnormx*v.worldCOMx+z.gnormy*v.worldCOMy-z.gprojection-v.radius;if(A>g){x=A;break}0<A?A>x&&(x=A,w=z):0>x&&A>x&&(x=A,w=z);y=y.next}if(x<g){var B=w.gp0,C=w.gp1,F=v.worldCOMy*w.gnormx-v.worldCOMx*w.gnormy;if(F<=B.y*w.gnormx-
B.x*w.gnormy){var E=0,G=0,E=v.worldCOMx-B.x,G=v.worldCOMy-B.y,H=Math.sqrt(E*E+G*G),x=H-v.radius;if(x<g){if(0==H)E=1,G=0;else var L=1/H,E=E*L,G=G*L;c.x=B.x+0*E;c.y=B.y+0*G;var N=-v.radius;d.x=v.worldCOMx+E*N;d.y=v.worldCOMy+G*N;e.x=E;e.y=G}}else if(F>=C.y*w.gnormx-C.x*w.gnormy){var J=0,I=0,J=v.worldCOMx-C.x,I=v.worldCOMy-C.y,O=Math.sqrt(J*J+I*I),x=O-v.radius;if(x<g){if(0==O)J=1,I=0;else var P=1/O,J=J*P,I=I*P;c.x=C.x+0*J;c.y=C.y+0*I;var Q=-v.radius;d.x=v.worldCOMx+J*Q;d.y=v.worldCOMy+I*Q;e.x=J;e.y=
I}}else{var R=-v.radius;d.x=v.worldCOMx+w.gnormx*R;d.y=v.worldCOMy+w.gnormy*R;var V=-x;c.x=d.x+w.gnormx*V;c.y=d.y+w.gnormy*V;e.x=w.gnormx;e.y=w.gnormy}}s&&(e.x=-e.x,e.y=-e.y);return x}for(var T=a.polygon,U=b.polygon,K=-1.0E100,W=null,Y=null,X=0,aa=T.edges.head;null!=aa;){for(var Z=aa.elt,ba=1.0E100,da=U.gverts.next;null!=da;){var ma=da,ha=Z.gnormx*ma.x+Z.gnormy*ma.y;ha<ba&&(ba=ha);da=da.next}ba-=Z.gprojection;if(ba>g){K=ba;break}0<ba?ba>K&&(K=ba,W=Z,X=1):0>K&&ba>K&&(K=ba,W=Z,X=1);aa=aa.next}if(K<
g){for(var ea=U.edges.head;null!=ea;){for(var fa=ea.elt,D=1.0E100,ia=T.gverts.next;null!=ia;){var la=ia,oa=fa.gnormx*la.x+fa.gnormy*la.y;oa<D&&(D=oa);ia=ia.next}D-=fa.gprojection;if(D>g){K=D;break}0<D?D>K&&(K=D,Y=fa,X=2):0>K&&D>K&&(K=D,Y=fa,X=2);ea=ea.next}if(K<g){var ja,S;if(1==X)ja=U,S=W;else{ja=T;S=Y;var qa=c,c=d,d=qa,s=!s}for(var ka=null,ra=1.0E100,$=ja.edges.head;null!=$;){var va=$.elt,xa=S.gnormx*va.gnormx+S.gnormy*va.gnormy;xa<ra&&(ra=xa,ka=va);$=$.next}s?(e.x=-S.gnormx,e.y=-S.gnormy):(e.x=
S.gnormx,e.y=S.gnormy);if(0<=K){var ga=S.gp0,na=S.gp1,ca=ka.gp0,sa=ka.gp1,pa=0,wa=0,ta=0,ya=0,pa=na.x-ga.x,wa=na.y-ga.y,ta=sa.x-ca.x,ya=sa.y-ca.y,Fa=1/(pa*pa+wa*wa),za=1/(ta*ta+ya*ya),Ba=-(pa*(ga.x-ca.x)+wa*(ga.y-ca.y))*Fa,Ha=-(pa*(ga.x-sa.x)+wa*(ga.y-sa.y))*Fa,Ea=-(ta*(ca.x-ga.x)+ya*(ca.y-ga.y))*za,Ia=-(ta*(ca.x-na.x)+ya*(ca.y-na.y))*za;0>Ba?Ba=0:1<Ba&&(Ba=1);0>Ha?Ha=0:1<Ha&&(Ha=1);0>Ea?Ea=0:1<Ea&&(Ea=1);0>Ia?Ia=0:1<Ia&&(Ia=1);var Aa=0,Ca=0,Da=Ba,Aa=ga.x+pa*Da,Ca=ga.y+wa*Da,Ga=0,ua=0,Ka=Ha,Ga=ga.x+
pa*Ka,ua=ga.y+wa*Ka,Va=0,Na=0,M=Ea,Va=ca.x+ta*M,Na=ca.y+ya*M,Ma=0,Ja=0,Qa=Ia,Ma=ca.x+ta*Qa,Ja=ca.y+ya*Qa,ab=ib.vec_dsq(Aa,Ca,ca.x,ca.y),cb=ib.vec_dsq(Ga,ua,sa.x,sa.y),Sa=ib.vec_dsq(Va,Na,ga.x,ga.y),db=ib.vec_dsq(Ma,Ja,na.x,na.y),Ua=0,Xa=0,Oa=null;ab<cb?(Ua=Aa,Xa=Ca,Oa=ca):(Ua=Ga,Xa=ua,Oa=sa,ab=cb);var Za=0,bb=0,$a=null;Sa<db?(Za=Va,bb=Na,$a=ga):(Za=Ma,bb=Ja,$a=na,Sa=db);ab<Sa?(c.x=Ua,c.y=Xa,d.x=Oa.x,d.y=Oa.y,K=Math.sqrt(ab)):(d.x=Za,d.y=bb,c.x=$a.x,c.y=$a.y,K=Math.sqrt(Sa));if(0!=K){e.x=d.x-c.x;e.y=
d.y-c.y;var fb=1/K;e.x*=fb;e.y*=fb;s&&(e.x=-e.x,e.y=-e.y)}return K}var Ra=0,Wa=0,Ra=ka.gp0.x,Wa=ka.gp0.y,Ya=0,eb=0,Ya=ka.gp1.x,eb=ka.gp1.y,Eb=0,jb=0,Eb=Ya-Ra,jb=eb-Wa,Fb=S.gnormy*Ra-S.gnormx*Wa,mb=S.gnormy*Ya-S.gnormx*eb,gb=1/(mb-Fb),Pa=(-S.tp1-Fb)*gb;Pa>t.epsilon&&(Ra+=Eb*Pa,Wa+=jb*Pa);var ob=(-S.tp0-mb)*gb;ob<-t.epsilon&&(Ya+=Eb*ob,eb+=jb*ob);var kb=Ra*S.gnormx+Wa*S.gnormy-S.gprojection,md=Ya*S.gnormx+eb*S.gnormy-S.gprojection;if(kb<md){d.x=Ra;d.y=Wa;var lb=-kb;c.x=d.x+S.gnormx*lb;c.y=d.y+S.gnormy*
lb;return kb}d.x=Ya;d.y=eb;var hb=-md;c.x=d.x+S.gnormx*hb;c.y=d.y+S.gnormy*hb;return md}}return g};var bk=function(){this._validate=null;this.x=this.y=this.z=0};h["zpp_nape.geom.ZPP_Vec3"]=bk;bk.__name__=["zpp_nape","geom","ZPP_Vec3"];bk.prototype={validate:function(){null!=this._validate&&this._validate()},__class__:bk};var ib=function(){};h["zpp_nape.geom.ZPP_VecMath"]=ib;ib.__name__=["zpp_nape","geom","ZPP_VecMath"];ib.vec_dsq=function(a,b,c,d){var e=0,g=0,e=a-c,g=b-d;return e*e+g*g};var ga=function(){this.ishape=
this.ibody=this.icompound=this.cbsets=this.group=this.cbTypes=this.cbSet=this.wrap_cbTypes=null;this.id=0;this.outer_i=null;this.id=Hb.Interactor();this.cbsets=new mj;this.cbTypes=new Ed};h["zpp_nape.phys.ZPP_Interactor"]=ga;ga.__name__=["zpp_nape","phys","ZPP_Interactor"];ga.get=function(a,b){var c;c=a.id<b.id?a.id:b.id;var d;d=a.id<b.id?b.id:a.id;for(var e=null,g=(a.cbsets.length<b.cbsets.length?a.cbsets:b.cbsets).head;null!=g;){var f=g.elt;if(f.id==c&&f.di==d){e=f;break}g=g.next}return e};ga.int_callback=
function(a,b,c){var d=a.int1,a=a.int2;b.options1.compatible(d.cbTypes)&&b.options2.compatible(a.cbTypes)?(c.int1=d,c.int2=a):(c.int1=a,c.int2=d)};ga.prototype={__iaddedToSpace:function(){null!=this.group&&this.group.interactors.add(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.add(this),a=a.next;this.alloc_cbSet()},__iremovedFromSpace:function(){null!=this.group&&this.group.interactors.remove(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.remove(this),a=a.next;this.dealloc_cbSet()},
wake:function(){if(null!=this.ishape){var a=this.ishape.body;null!=a&&null!=a.space&&a.space.non_inlined_wake(a);!0}else null!=this.ibody?null!=this.ibody.space?this.ibody.space.non_inlined_wake(this.ibody):!1:(null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound),!0)},setupcbTypes:function(){this.wrap_cbTypes=hd.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=n(this,this.wrap_cbTypes_adder);this.wrap_cbTypes.zpp_inner.subber=n(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=
!0},wrap_cbTypes_subber:function(a){a=a.zpp_inner;if(this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.remove(this));this.cbTypes.remove(a);null!=b&&(this.alloc_cbSet(),this.wake())}},wrap_cbTypes_adder:function(a){this.insert_cbtype(a.zpp_inner);return!1},insert_cbtype:function(a){if(!this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?
null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.add(this));for(var c=null,d=this.cbTypes.head;null!=d&&!(a.id<d.elt.id);){c=d;d=d.next}this.cbTypes.inlined_insert(c,a);null!=b&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=(this.cbSet=a.cbsets.get(this.cbTypes)))this.cbSet.count++,
this.cbSet.interactors.add(this),this.cbSet.validate(),a.freshInteractorType(this)},dealloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=this.cbSet&&(this.cbSet.interactors.remove(this),a.nullInteractorType(this),0==--this.cbSet.count&&(a.cbsets.remove(this.cbSet),a=this.cbSet,a.free(),a.next=pa.zpp_pool,pa.zpp_pool=a),this.cbSet=null)},immutable_midstep:function(a){null!=this.ibody?null:
null!=this.ishape?this.ishape.__immutable_midstep(a):this.icompound.__imutable_midstep(a)},lookup_group:function(){for(var a=this;null!=a&&null==a.group;)a=null!=a.ishape?a.ishape.body:null!=a.icompound?a.icompound.compound:a.ibody.compound;return null==a?null:a.group},__class__:ga};var Qd=function(){this.wrap_localCOM=this.wrap_worldCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_aabb=!1;this.aabb=null;this.norotate=!1;this.cinertia=
this.iinertia=this.sinertia=0;this.zip_inertia=!1;this.inertiaMode=this.inertia=0;this.zip_gravMassScale=!1;this.gravMassMode=this.gravMassScale=0;this.zip_gravMass=!1;this.gravMass=0;this.nomove=!1;this.massMode=this.imass=this.smass=this.cmass=0;this.zip_mass=!1;this.mass=0;this.zip_axis=!1;this.forcex=this.forcey=this.kinvelx=this.kinvely=this.svelx=this.svely=this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=this.axisx=this.axisy=0;this.wrap_vel=null;this.velx=this.vely=0;this.wrap_pos=
null;this.pre_posx=this.pre_posy=this.posx=this.posy=0;this.bullet=this.bulletEnabled=this.disableCCD=!1;this.sweepRadius=0;this.sweepFrozen=!1;this.sweepTime=this.sweep_angvel=0;this.compound=this.shapes=this.wrap_shapes=this.space=this.arbiters=this.constraints=this.component=null;this.type=0;this.world=!1;this.outer=null;ga.call(this);this.ibody=this;this.bulletEnabled=this.world=!1;this.sweep_angvel=this.sweepTime=0;this.disableCCD=this.norotate=this.nomove=!1;this.axisx=this.rot=this.posy=this.posx=
0;this.axisy=1;this.torque=this.angvel=this.kinangvel=this.forcey=this.forcex=this.kinvely=this.kinvelx=this.vely=this.velx=this.svely=this.svelx=0;this.pre_rot=this.pre_posy=this.pre_posx=Math.POSITIVE_INFINITY;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.zip_aabb=!0;this.aabb=Ca.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=n(this,this.aabb_validate);this.massMode=f.id_MassMode_DEFAULT;this.gravMassMode=f.id_GravMassMode_DEFAULT;this.gravMassScale=1;this.inertiaMode=
f.id_InertiaMode_DEFAULT;this.arbiters=new cg;this.constraints=new Fd;this.shapes=new ef;this.wrap_shapes=Uc.get(this.shapes);this.wrap_shapes.zpp_inner.adder=n(this,this.shapes_adder);this.wrap_shapes.zpp_inner.subber=n(this,this.shapes_subber);this.wrap_shapes.zpp_inner._invalidate=n(this,this.shapes_invalidate);this.kinematicDelaySleep=!1};h["zpp_nape.phys.ZPP_Body"]=Qd;Qd.__name__=["zpp_nape","phys","ZPP_Body"];Qd.__static=function(){null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Na,
f.internal=!1);var a=new Vb(f.BodyType_STATIC),b=a.zpp_inner;b.world=!0;b.wrap_shapes.zpp_inner.immutable=!0;b.smass=b.imass=b.cmass=b.mass=b.gravMass=0;b.sinertia=b.iinertia=b.cinertia=b.inertia=0;b.cbTypes.clear();return a};Qd.__super__=ga;Qd.prototype=y(ga.prototype,{invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},invalidate_shapes:function(){this.zip_worldCOM=this.zip_localCOM=this.zip_aabb=!0;this.invalidate_mass();this.invalidate_inertia()},atRest:function(a){if(this.type!=
f.id_BodyType_DYNAMIC)return this.component.sleeping;var b=t.linearSleepThreshold,b=b*b;if(this.velx*this.velx+this.vely*this.vely>b)a=!1;else if(ib.vec_dsq(this.posx,this.posy,this.pre_posx,this.pre_posy)>0.25*b*a*a)a=!1;else{var c=b=0,b=this.aabb.maxx-this.aabb.minx,c=this.aabb.maxy-this.aabb.miny,b=b*b+c*c,c=t.angularSleepThreshold,c=c*c;if(4*this.angvel*this.angvel*b>c)a=!1;else var d=this.rot-this.pre_rot,a=d*d*b>c*a*a?!1:!0}a||(this.component.waket=this.space.stamp);return this.component.waket+
t.sleepDelay<this.space.stamp},refreshArbiters:function(){for(var a=this.arbiters.head;null!=a;)a.elt.invalidated=!0,a=a.next},sweepIntegrate:function(a){var b=a-this.sweepTime;0!=b&&(this.sweepTime=a,this.posx+=this.velx*b,this.posy+=this.vely*b,0!=this.angvel&&this.delta_rot(this.sweep_angvel*b))},sweepValidate:function(a){if(a.type==f.id_ShapeType_CIRCLE)a.worldCOMx=this.posx+(this.axisy*a.localCOMx-this.axisx*a.localCOMy),a.worldCOMy=this.posy+(a.localCOMx*this.axisx+a.localCOMy*this.axisy);else{for(var a=
a.polygon,b=a.lverts.next,c=a.gverts.next;null!=c;){var d=c,e=b,b=b.next;d.x=this.posx+(this.axisy*e.x-this.axisx*e.y);d.y=this.posy+(e.x*this.axisx+e.y*this.axisy);c=c.next}c=a.edges.head;b=d=a.gverts.next;for(d=d.next;null!=d;){var e=d,g=c.elt,c=c.next;g.gnormx=this.axisy*g.lnormx-this.axisx*g.lnormy;g.gnormy=g.lnormx*this.axisx+g.lnormy*this.axisy;g.gprojection=this.posx*g.gnormx+this.posy*g.gnormy+g.lprojection;g.tp0=b.y*g.gnormx-b.x*g.gnormy;g.tp1=e.y*g.gnormx-e.x*g.gnormy;b=e;d=d.next}a=a.gverts.next;
c=c.elt;c.gnormx=this.axisy*c.lnormx-this.axisx*c.lnormy;c.gnormy=c.lnormx*this.axisx+c.lnormy*this.axisy;c.gprojection=this.posx*c.gnormx+this.posy*c.gnormy+c.lprojection;c.tp0=b.y*c.gnormx-b.x*c.gnormy;c.tp1=a.y*c.gnormx-a.x*c.gnormy}},invalidate_pos:function(){for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==f.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},pos_invalidate:function(a){this.immutable_midstep("Body::position");
this.posx==a.x&&this.posy==a.y||(this.posx=a.x,this.posy=a.y,this.invalidate_pos(),this.wake())},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(a){this.velx=a.x;this.vely=a.y;this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},setupPosition:function(){this.wrap_pos=l.get(this.posx,this.posy,null);this.wrap_pos.zpp_inner._inuse=!0;this.world?this.wrap_pos.zpp_inner._immutable=
!0:(this.wrap_pos.zpp_inner._invalidate=n(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=n(this,this.pos_validate))},setupVelocity:function(){this.wrap_vel=l.get(this.velx,this.vely,null);this.wrap_vel.zpp_inner._inuse=!0;this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=n(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=n(this,this.vel_validate))},invalidate_rot:function(){this.zip_axis=!0;for(var a=this.shapes.head;null!=a;){var b=a.elt;
b.type==f.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},validate_axis:function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null)},delta_rot:function(a){this.rot+=a;if(1.0E-4<a*a)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null;else{var b=a*a,c=1-0.5*b,b=1-b*b/8,d=(c*this.axisx+a*this.axisy)*b;this.axisy=(c*this.axisy-a*this.axisx)*b;this.axisx=
d}},invalidate_mass:function(){this.zip_mass=!0;this.invalidate_gravMass()},validate_mass:function(){if(this.zip_mass){this.zip_mass=!1;if(this.massMode==f.id_MassMode_DEFAULT){this.cmass=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cmass+=b.area*b.material.density;a=a.next}}this.type==f.id_BodyType_DYNAMIC&&!this.nomove?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=
this.smass=0)}},invalidate_gravMass:function(){this.gravMassMode!=f.id_GravMassMode_FIXED&&(this.zip_gravMass=!0);this.gravMassMode!=f.id_GravMassMode_SCALED&&(this.zip_gravMassScale=!0);this.wake()},validate_gravMass:function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),this.gravMassMode==f.id_GravMassMode_DEFAULT?(this.validate_mass(),this.gravMass=this.cmass):this.gravMassMode==f.id_GravMassMode_SCALED&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},invalidate_inertia:function(){this.zip_inertia=
!0;this.wake()},validate_inertia:function(){if(this.zip_inertia){this.zip_inertia=!1;if(this.inertiaMode==f.id_InertiaMode_DEFAULT){this.cinertia=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cinertia+=b.inertia*b.area*b.material.density;a=a.next}}this.type==f.id_BodyType_DYNAMIC&&!this.norotate?(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia):(this.inertia=Math.POSITIVE_INFINITY,this.sinertia=this.iinertia=
0)}},validate_aabb:function(){if(this.zip_aabb){this.zip_aabb=!1;this.aabb.minx=Math.POSITIVE_INFINITY;this.aabb.miny=Math.POSITIVE_INFINITY;this.aabb.maxx=Math.NEGATIVE_INFINITY;this.aabb.maxy=Math.NEGATIVE_INFINITY;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==f.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb());this.aabb.combine(b.aabb);a=a.next}}},invalidate_localCOM:function(){this.zip_worldCOM=this.zip_localCOM=!0},
validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var a=0,b=0,c=0,d=this.shapes.head;null!=d;){var e=d.elt;e.zip_localCOM&&(e.zip_localCOM=!1,e.type==f.id_ShapeType_POLYGON&&e.polygon.__validate_localCOM(),null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy));e.validate_area_inertia();var g=e.area*e.material.density,a=a+e.localCOMx*g,b=b+e.localCOMy*g,c=c+e.area*e.material.density,d=d.next}0!=c&&(d=1/c,this.localCOMx=a*
d,this.localCOMy=b*d);null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy);this.zip_mass&&this.massMode==f.id_MassMode_DEFAULT&&(this.zip_mass=!1,this.cmass=c,this.type==f.id_BodyType_DYNAMIC?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=this.smass=0))}},validate_worldCOM:function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=
!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},aabb_validate:function(){this.validate_aabb()},shapes_adder:function(a){return a.zpp_inner.body!=this?(null!=a.zpp_inner.body&&a.zpp_inner.body.wrap_shapes.remove(a),
a.zpp_inner.body=this,a.zpp_inner.addedToBody(),null!=this.space&&this.space.added_shape(a.zpp_inner,null),a.zpp_inner.type==f.id_ShapeType_POLYGON&&(a.zpp_inner.polygon.invalidate_gaxi(),a.zpp_inner.polygon.invalidate_gverts()),!0):!1},shapes_subber:function(a){null!=this.space&&this.space.removed_shape(a.zpp_inner);a.zpp_inner.body=null;a.zpp_inner.removedFromBody()},shapes_invalidate:function(){this.invalidate_shapes()},addedToSpace:function(){null==Za.zpp_pool?this.component=new Za:(this.component=
Za.zpp_pool,Za.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!0;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){for(;null!=this.arbiters.head;){var a=this.arbiters.pop_unsafe();a.cleared=!0;a.b2==this&&a.b1.arbiters.inlined_try_remove(a);a.b1==this&&a.b2.arbiters.inlined_try_remove(a);null!=a.pair&&(a.pair.arb=null,a.pair=null);a.active=!1;this.space.f_arbiters.modified=!0}a=this.component;a.body=null;a.constraint=null;null;a.next=Za.zpp_pool;
Za.zpp_pool=a;this.component=null;this.__iremovedFromSpace()},__class__:Qd});var nj=function(){this.compound=this.space=null;this.depth=0;this.outer=this.bodies=this.constraints=this.compounds=this.wrap_constraints=null};h["zpp_nape.phys.ZPP_Compound"]=nj;nj.__name__=["zpp_nape","phys","ZPP_Compound"];nj.__super__=ga;nj.prototype=y(ga.prototype,{__imutable_midstep:function(){},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},__class__:nj});var ck=
function(){this.wrap_gravity=null;this.viscosity=this.density=this.gravityx=this.gravityy=0;this.shapes=null};h["zpp_nape.phys.ZPP_FluidProperties"]=ck;ck.__name__=["zpp_nape","phys","ZPP_FluidProperties"];ck.prototype={__class__:ck};var ge=function(a){this.zip_aabb=!1;this.sweep=this.node=this.pairs=this.aabb=null;this.fluidEnabled=this.sensorEnabled=!1;this.circle=this.polygon=this.refmaterial=this.material=this.filter=this.fluidProperties=null;this.sweepCoef=0;this.zip_sweepRadius=!1;this.sweepRadius=
0;this.wrap_localCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_angDrag=!1;this.inertia=this.angDrag=0;this.zip_area_inertia=!1;this.type=this.area=0;this.outer=this.body=null;ga.call(this);this.pairs=new oj;this.ishape=this;this.type=a;this.aabb=Ca.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=n(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0;this.worldCOMy=
this.worldCOMx=this.localCOMy=this.localCOMx=0;this.sensorEnabled=this.fluidEnabled=!1;this.body=this.fluidProperties=null;this.refmaterial=new ra;this.sweepRadius=this.sweepCoef=0};h["zpp_nape.shape.ZPP_Shape"]=ge;ge.__name__=["zpp_nape","shape","ZPP_Shape"];ge.__super__=ga;ge.prototype=y(ga.prototype,{validate_sweepRadius:function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},validate_area_inertia:function(){this.zip_area_inertia&&
(this.zip_area_inertia=!1,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},validate_angDrag:function(){if(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_angDrag():this.polygon.__validate_angDrag()},validate_worldCOM:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=
!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==f.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy))},invalidate_area_inertia:function(){this.zip_area_inertia=
!0;null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia())},invalidate_angDrag:function(){this.zip_angDrag=!0},invalidate_localCOM:function(){this.zip_localCOM=!0;this.invalidate_area_inertia();this.type==f.id_ShapeType_CIRCLE&&(this.zip_sweepRadius=!0);this.invalidate_angDrag();this.invalidate_worldCOM();null!=this.body&&this.body.invalidate_localCOM()},invalidate_worldCOM:function(){this.zip_aabb=this.zip_worldCOM=!0;null!=this.body&&(this.body.zip_aabb=
!0)},invalidate_material:function(a){0!=(a&ra.WAKE)&&this.wake();0!=(a&ra.ARBITERS)&&null!=this.body&&this.body.refreshArbiters();0!=(a&ra.PROPS)&&null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia());0!=(a&ra.ANGDRAG)&&this.invalidate_angDrag();this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},aabb_validate:function(){this.zip_aabb&&null!=this.body&&(this.zip_aabb=!1,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_aabb():
this.polygon.__validate_aabb())},setMaterial:function(a){this.material!=a&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},setFilter:function(a){this.filter!=a&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),
this.wake())},__immutable_midstep:function(){},addedToBody:function(){this.invalidate_worldCOM();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0)},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace();this.material.shapes.add(this);this.filter.shapes.add(this);null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},removedFromSpace:function(){this.__iremovedFromSpace();this.material.shapes.remove(this);this.filter.shapes.remove(this);null!=this.fluidProperties&&
this.fluidProperties.shapes.remove(this)},__class__:ge});var pj=function(){this.radius=0};h["zpp_nape.shape.ZPP_Circle"]=pj;pj.__name__=["zpp_nape","shape","ZPP_Circle"];pj.__super__=ge;pj.prototype=y(ge.prototype,{__validate_aabb:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==f.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=
this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy));var a=this.radius,b=this.radius;this.aabb.minx=this.worldCOMx-a;this.aabb.miny=this.worldCOMy-b;this.aabb.maxx=this.worldCOMx+a;this.aabb.maxy=this.worldCOMy+b},_force_validate_aabb:function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*
this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy);this.aabb.minx=this.worldCOMx-this.radius;this.aabb.miny=this.worldCOMy-this.radius;this.aabb.maxx=this.worldCOMx+this.radius;this.aabb.maxy=this.worldCOMy+this.radius},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var a=this.radius*this.radius;
this.area=a*Math.PI;this.inertia=0.5*a+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var a=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,b=this.radius*this.radius;this.angDrag=(a+2*b)*this.material.dynamicFriction*t.fluidAngularDragFriction+0.5*t.fluidAngularDrag*(1+t.fluidVacuumDrag)*a;this.angDrag/=2*(a+0.5*b)},__class__:pj});var Da=function(){this.tp0=this.tp1=0;this.lp0=this.gp0=this.lp1=this.gp1=null;this.length=this.lprojection=this.gprojection=
0;this.wrap_gnorm=null;this.gnormx=this.gnormy=0;this.wrap_lnorm=null;this.lnormx=this.lnormy=0;this.next=this.polygon=this.outer=null;this.gprojection=this.lprojection=this.length=this.gnormy=this.gnormx=this.lnormy=this.lnormx=0};h["zpp_nape.shape.ZPP_Edge"]=Da;Da.__name__=["zpp_nape","shape","ZPP_Edge"];Da.prototype={wrapper:function(){null==this.outer&&(Da.internal=!0,this.outer=new wi,Da.internal=!1,this.outer.zpp_inner=this);return this.outer},__class__:Da};var Ng=function(){this.reverse_flag=
this.zip_lverts=this.zip_laxi=this.zip_gverts=this.zip_gaxi=this.zip_valid=this.zip_sanitation=!1;this.edgeCnt=0;this.outer_zn=this.lverts=this.wrap_lverts=this.gverts=this.wrap_gverts=this.edges=this.wrap_edges=null;ge.call(this,f.id_ShapeType_POLYGON);this.polygon=this;this.lverts=new ka;this.gverts=new ka;this.edges=new qj;this.edgeCnt=0};h["zpp_nape.shape.ZPP_Polygon"]=Ng;Ng.__name__=["zpp_nape","shape","ZPP_Polygon"];Ng.__super__=ge;Ng.prototype=y(ge.prototype,{lverts_pa_invalidate:function(){this.invalidate_lverts()},
gverts_pa_validate:function(){this.validate_gverts()},lverts_post_adder:function(a){a.zpp_inner._invalidate=n(this,this.lverts_pa_invalidate);for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a.zpp_inner);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;d=d.next}a=ka.get(0,0,!0);this.gverts.insert(b,a);null!=this.lverts.next.next&&(null==this.lverts.next.next.next?(null==Da.zpp_pool?c=new Da:(c=Da.zpp_pool,Da.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),
null==Da.zpp_pool?c=new Da:(c=Da.zpp_pool,Da.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),this.edgeCnt+=2):(null==Da.zpp_pool?b=new Da:(b=Da.zpp_pool,Da.zpp_pool=b.next,b.next=null),null,b.polygon=this,this.edges.insert(c,b),this.edgeCnt++));a._validate=n(this,this.gverts_pa_validate)},lverts_subber:function(a){this.cleanup_lvert(a.zpp_inner)},lverts_invalidate:function(){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},getlverts:function(){this.wrap_lverts=
hf.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=n(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=n(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=n(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=n(this,this.lverts_validate);this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_localCOM();this.invalidate_gverts();
this.zip_sanitation=this.zip_valid=this.zip_lverts=!0;null!=this.body&&this.body.wake()},invalidate_laxi:function(){this.invalidate_gaxi();this.zip_laxi=this.zip_sweepRadius=!0},invalidate_gverts:function(){this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);this.zip_gverts=!0},invalidate_gaxi:function(){this.zip_gaxi=!0},validate_lverts:function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),0>this.area&&(this.reverse_vertices(),this.area=-this.area)))},
cleanup_lvert:function(a){for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;d=d.next}a=null==b?this.gverts.next:b.next;this.gverts.erase(b);null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=ka.zpp_pool;ka.zpp_pool=a;2==this.edgeCnt?(c=this.edges.pop_unsafe(),c.polygon=null,c.next=Da.zpp_pool,Da.zpp_pool=c,c=this.edges.pop_unsafe(),c.polygon=null,c.next=Da.zpp_pool,
Da.zpp_pool=c,this.edgeCnt=0):0!=this.edgeCnt&&(b=null==c?this.edges.head.elt:c.next.elt,this.edges.erase(c),b.polygon=null,b.next=Da.zpp_pool,Da.zpp_pool=b,this.edgeCnt--)},splice_collinear:function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},splice_collinear_real:function(){if(!(null==this.lverts.next||null==this.lverts.next.next)&&null!=this.lverts.next.next.next){for(var a=null,b=this.lverts.next;null!=b;){var c=b,d=null==b.next?this.lverts.next:b.next;ib.vec_dsq(c.x,
c.y,d.x,d.y)<t.epsilon*t.epsilon?(this.cleanup_lvert(b),b=this.lverts.erase(a)):(a=b,b=b.next)}if(null!=this.lverts.next){do{a=!1;for(b=this.lverts.next;null!=b;){var c=null==b.next?this.lverts.next:b.next,e=b,d=c,g=null==c.next?this.lverts.next:c.next,f=0,h=0,f=d.x-e.x,h=d.y-e.y,i=e=0,e=g.x-d.x,i=g.y-d.y,d=i*f-e*h;d*d>=t.epsilon*t.epsilon||(this.cleanup_lvert(c),this.lverts.erase(null==b.next?null:b),a=!0);b=b.next}}while(a)}}},reverse_vertices:function(){this.lverts.reverse();this.gverts.reverse();
this.edges.reverse();var a=this.edges.iterator_at(this.edgeCnt-1),b=this.edges.pop_unsafe();this.edges.insert(a,b);this.reverse_flag=!this.reverse_flag;null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=!1;this.validate_lverts();for(var a=this.edges.head,
b=this.lverts.next,c=b,b=b.next;null!=b;){var d=b,e=a.elt,a=a.next;e.lp0=c;e.lp1=d;var g=0,f=0,g=c.x-d.x,f=c.y-d.y,h=Math.sqrt(g*g+f*f);e.length=h;h=1/h;g*=h;f*=h;h=g;g=-f;f=h;e.lprojection=g*c.x+f*c.y;e.lnormx=g;e.lnormy=f;null!=e.wrap_lnorm&&(e.wrap_lnorm.zpp_inner.x=g,e.wrap_lnorm.zpp_inner.y=f);c=d;b=b.next}e=this.lverts.next;a=a.elt;a.lp0=c;a.lp1=e;d=b=0;b=c.x-e.x;d=c.y-e.y;e=Math.sqrt(b*b+d*d);a.length=e;e=1/e;g=b*e;b=-(d*e);d=g;a.lprojection=b*c.x+d*c.y;a.lnormx=b;a.lnormy=d;null!=a.wrap_lnorm&&
(a.wrap_lnorm.zpp_inner.x=b,a.wrap_lnorm.zpp_inner.y=d)}},validate_gverts:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1;this.validate_lverts();this.body.validate_axis();for(var a=this.lverts.next,b=this.gverts.next;null!=b;){var c=b,d=a,a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);b=b.next}}},validate_gaxi:function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1;this.validate_laxi();this.body.validate_axis();
this.validate_gverts();for(var a=this.edges.head,b=this.gverts.next,c=b,b=b.next;null!=b;){var d=b,e=a.elt,a=a.next;e.gp0=c;e.gp1=d;e.gnormx=this.body.axisy*e.lnormx-this.body.axisx*e.lnormy;e.gnormy=e.lnormx*this.body.axisx+e.lnormy*this.body.axisy;e.gprojection=this.body.posx*e.gnormx+this.body.posy*e.gnormy+e.lprojection;null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy);e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy;e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy;c=d;b=
b.next}b=this.gverts.next;a=a.elt;a.gp0=c;a.gp1=b;a.gnormx=this.body.axisy*a.lnormx-this.body.axisx*a.lnormy;a.gnormy=a.lnormx*this.body.axisx+a.lnormy*this.body.axisy;a.gprojection=this.body.posx*a.gnormx+this.body.posy*a.gnormy+a.lprojection;null!=a.wrap_gnorm&&(a.wrap_gnorm.zpp_inner.x=a.gnormx,a.wrap_gnorm.zpp_inner.y=a.gnormy);a.tp0=a.gp0.y*a.gnormx-a.gp0.x*a.gnormy;a.tp1=a.gp1.y*a.gnormx-a.gp1.x*a.gnormy}},__validate_aabb:function(){this.validate_gverts();var a=this.gverts.next;this.aabb.minx=
a.x;this.aabb.miny=a.y;this.aabb.maxx=a.x;this.aabb.maxy=a.y;for(a=this.gverts.next.next;null!=a;){var b=a;b.x<this.aabb.minx&&(this.aabb.minx=b.x);b.x>this.aabb.maxx&&(this.aabb.maxx=b.x);b.y<this.aabb.miny&&(this.aabb.miny=b.y);b.y>this.aabb.maxy&&(this.aabb.maxy=b.y);a=a.next}},_force_validate_aabb:function(){var a=this.lverts.next,b=this.gverts.next,c=a,a=a.next;b.x=this.body.posx+(this.body.axisy*c.x-this.body.axisx*c.y);b.y=this.body.posy+(c.x*this.body.axisx+c.y*this.body.axisy);this.aabb.minx=
b.x;this.aabb.miny=b.y;this.aabb.maxx=b.x;this.aabb.maxy=b.y;for(b=this.gverts.next.next;null!=b;){var c=b,d=a,a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);c.x<this.aabb.minx&&(this.aabb.minx=c.x);c.x>this.aabb.maxx&&(this.aabb.maxx=c.x);c.y<this.aabb.miny&&(this.aabb.miny=c.y);c.y>this.aabb.maxy&&(this.aabb.maxy=c.y);b=b.next}},__validate_sweepRadius:function(){var a=0,b=0;this.validate_laxi();for(var c=this.lverts.next;null!=
c;){var d=c,d=d.x*d.x+d.y*d.y;d>a&&(a=d);c=c.next}for(c=this.edges.head;null!=c;){d=c.elt;if(d.lprojection<b&&(b=d.lprojection,0>b))break;c=c.next}0>b&&(b=0);this.sweepRadius=Math.sqrt(a);this.sweepCoef=this.sweepRadius-b},__validate_area_inertia:function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.inertia=this.area=0;else{for(var a=this.area=0,b=0,c=this.lverts.next,d=c,e=c=c.next,c=c.next;null!=c;){var g=c,f=e.y*d.x-e.x*d.y,a=a+f*(e.x*e.x+e.y*
e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y)),b=b+f;this.area+=e.x*(g.y-d.y);d=e;e=g;c=c.next}f=c=this.lverts.next;g=e.y*d.x-e.x*d.y;a+=g*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=e.x*(f.y-d.y);d=e;e=f;c=c.next;f=e.y*d.x-e.x*d.y;a+=f*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=e.x*(c.y-d.y);this.inertia=a/(6*(b+g+f));this.area*=0.5;0>this.area&&(this.area=-this.area,this.reverse_vertices())}},__validate_angDrag:function(){this.validate_area_inertia();this.validate_laxi();
for(var a=0,b=this.edges.head,c=0,d=this.lverts.next,e=d,d=d.next;null!=d;){var g=d,f=b.elt,b=b.next,c=c+f.length,h=0,i=0,h=g.x-e.x,i=g.y-e.y,a=a+f.length*t.fluidAngularDragFriction*this.material.dynamicFriction*f.lprojection*f.lprojection,k=-(e.y*f.lnormx-e.x*f.lnormy)/(i*f.lnormx-h*f.lnormy);if(0<k){var l;l=1<k?1:k;var m=0,n=0,m=e.x,n=e.y,o=l,m=m+h*o,n=n+i*o,o=f.lnormy*e.x-f.lnormx*e.y,m=f.lnormy*m-f.lnormx*n,a=a+(m*m*m-o*o*o)/(3*(m-o))*l*f.length*t.fluidAngularDrag}1>k&&(k=0>k?0:k,m=l=0,l=e.x,
m=e.y,e=k,l+=h*e,m+=i*e,e=f.lnormy*l-f.lnormx*m,h=f.lnormy*g.x-f.lnormx*g.y,a+=(h*h*h-e*e*e)/(3*(h-e))*t.fluidVacuumDrag*(1-k)*f.length*t.fluidAngularDrag);e=g;d=d.next}d=this.lverts.next;b=b.elt;c+=b.length;f=g=0;g=d.x-e.x;f=d.y-e.y;a+=b.length*t.fluidAngularDragFriction*this.material.dynamicFriction*b.lprojection*b.lprojection;h=-(e.y*b.lnormx-e.x*b.lnormy)/(f*b.lnormx-g*b.lnormy);0<h&&(i=1<h?1:h,m=l=0,l=e.x,m=e.y,k=b.lnormy*e.x-b.lnormx*e.y,l=b.lnormy*(l+g*i)-b.lnormx*(m+f*i),a+=(l*l*l-k*k*k)/
(3*(l-k))*i*b.length*t.fluidAngularDrag);1>h&&(h=0>h?0:h,k=i=0,i=e.x,k=e.y,e=b.lnormy*(i+g*h)-b.lnormx*(k+f*h),d=b.lnormy*d.x-b.lnormx*d.y,a+=(d*d*d-e*e*e)/(3*(d-e))*t.fluidVacuumDrag*(1-h)*b.length*t.fluidAngularDrag);this.angDrag=a/(this.inertia*c)},__validate_localCOM:function(){if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y,this.localCOMx+=
1*this.lverts.next.next.x,this.localCOMy+=1*this.lverts.next.next.y,this.localCOMx*=0.5,this.localCOMy*=0.5;else{for(var a=this.localCOMy=this.localCOMx=0,b=this.lverts.next,c=b,d=b=b.next,b=b.next;null!=b;){var e=b,a=a+d.x*(e.y-c.y),c=e.y*d.x-e.x*d.y;this.localCOMx+=(d.x+e.x)*c;this.localCOMy+=(d.y+e.y)*c;c=d;d=e;b=b.next}e=b=this.lverts.next;a+=d.x*(e.y-c.y);c=e.y*d.x-e.x*d.y;this.localCOMx+=(d.x+e.x)*c;this.localCOMy+=(d.y+e.y)*c;c=d;d=e;b=b.next;a+=d.x*(b.y-c.y);c=b.y*d.x-b.x*d.y;this.localCOMx+=
(d.x+b.x)*c;this.localCOMy+=(d.y+b.y)*c;a=1/(3*a);this.localCOMx*=a;this.localCOMy*=a}},__class__:Ng});var he=function(){this.sweep=this.dynab=null;this.is_sweep=!1;this.space=null};h["zpp_nape.space.ZPP_Broadphase"]=he;he.__name__=["zpp_nape","space","ZPP_Broadphase"];he.prototype={insert:function(a){this.is_sweep?this.sweep.__insert(a):this.dynab.__insert(a)},remove:function(a){this.is_sweep?this.sweep.__remove(a):this.dynab.__remove(a)},sync:function(a){this.is_sweep?!this.sweep.space.continuous&&
a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==f.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()):this.dynab.__sync(a)},broadphase:function(){},rayMultiCast:function(){return null},__class__:he};var Ra=function(){this.synced=this.first_sync=!1;this.snext=null;this.moved=!1;this.next=this.mnext=null;this.height=0;this.parent=this.child1=this.child2=null;this.dyn=!1;this.aabb=this.shape=null;this.height=-1};h["zpp_nape.space.ZPP_AABBNode"]=Ra;Ra.__name__=["zpp_nape","space",
"ZPP_AABBNode"];Ra.prototype={free:function(){this.height=-1;var a=this.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=null;a._validate=null;a.next=Ca.zpp_pool;Ca.zpp_pool=a;this.mnext=this.snext=this.next=this.child1=this.child2=this.parent=null},__class__:Ra};var fa=function(){this.arb=this.next=null;this.id=this.di=0;this.first=this.sleeping=!1;this.n1=this.n2=null};h["zpp_nape.space.ZPP_AABBPair"]=fa;fa.__name__=["zpp_nape","space","ZPP_AABBPair"];
fa.prototype={__class__:fa};var Dc=function(){this.root=null};h["zpp_nape.space.ZPP_AABBTree"]=Dc;Dc.__name__=["zpp_nape","space","ZPP_AABBTree"];Dc.prototype={inlined_insertLeaf:function(a){if(null==this.root)this.root=a,this.root.parent=null;else{for(var b=a.aabb,c=this.root;null!=c.child1;){var d=c.child1,e=c.child2,f=c.aabb.perimeter();Dc.tmpaabb.setCombine(c.aabb,b);var h=Dc.tmpaabb.perimeter(),i=2*h,f=2*(h-f);Dc.tmpaabb.setCombine(b,d.aabb);null==d.child1?h=Dc.tmpaabb.perimeter()+f:(h=d.aabb.perimeter(),
h=Dc.tmpaabb.perimeter()-h+f);Dc.tmpaabb.setCombine(b,e.aabb);if(null==e.child1)f=Dc.tmpaabb.perimeter()+f;else var j=e.aabb.perimeter(),f=Dc.tmpaabb.perimeter()-j+f;if(i<h&&i<f)break;else c=h<f?d:e}d=c.parent;null==Ra.zpp_pool?e=new Ra:(e=Ra.zpp_pool,Ra.zpp_pool=e.next,e.next=null);null==Ca.zpp_pool?e.aabb=new Ca:(e.aabb=Ca.zpp_pool,Ca.zpp_pool=e.aabb.next,e.aabb.next=null);null;e.moved=!1;e.synced=!1;e.first_sync=!1;e.parent=d;e.aabb.setCombine(b,c.aabb);e.height=c.height+1;null!=d?(d.child1==c?
d.child1=e:d.child2=e,e.child1=c,e.child2=a,c.parent=e,a.parent=e):(e.child1=c,e.child2=a,c.parent=e,this.root=a.parent=e);for(c=a.parent;null!=c;)c=this.balance(c),a=c.child1,b=c.child2,d=a.height,e=b.height,c.height=1+(d>e?d:e),c.aabb.setCombine(a.aabb,b.aabb),c=c.parent}},removeLeaf:function(a){this.inlined_removeLeaf(a)},inlined_removeLeaf:function(a){if(a==this.root)this.root=null;else{var b=a.parent,c=b.parent,a=b.child1==a?b.child2:b.child1;if(null!=c){c.child1==b?c.child1=a:c.child2=a;a.parent=
c;b.free();b.next=Ra.zpp_pool;Ra.zpp_pool=b;for(b=c;null!=b;)b=this.balance(b),a=b.child1,c=b.child2,b.aabb.setCombine(a.aabb,c.aabb),a=a.height,c=c.height,b.height=1+(a>c?a:c),b=b.parent}else this.root=a,a.parent=null,b.free(),b.next=Ra.zpp_pool,Ra.zpp_pool=b}},balance:function(a){if(null==a.child1||2>a.height)return a;var b=a.child1,c=a.child2,d=c.height-b.height;if(1<d){var e=c.child1,f=c.child2;c.child1=a;c.parent=a.parent;a.parent=c;null!=c.parent?c.parent.child1==a?c.parent.child1=c:c.parent.child2=
c:this.root=c;e.height>f.height?(c.child2=e,a.child2=f,f.parent=a,a.aabb.setCombine(b.aabb,f.aabb),c.aabb.setCombine(a.aabb,e.aabb),a.height=1+function(){var a=b.height,c=f.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=e.height;return b>c?b:c}(this)):(c.child2=f,a.child2=e,e.parent=a,a.aabb.setCombine(b.aabb,e.aabb),c.aabb.setCombine(a.aabb,f.aabb),a.height=1+function(){var a=b.height,c=e.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=f.height;return b>c?
b:c}(this));return c}if(-1>d){var h=b.child1,i=b.child2;b.child1=a;b.parent=a.parent;a.parent=b;null!=b.parent?b.parent.child1==a?b.parent.child1=b:b.parent.child2=b:this.root=b;h.height>i.height?(b.child2=h,a.child1=i,i.parent=a,a.aabb.setCombine(c.aabb,i.aabb),b.aabb.setCombine(a.aabb,h.aabb),a.height=1+function(){var a=c.height,b=i.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=h.height;return b>c?b:c}(this)):(b.child2=i,a.child1=h,h.parent=a,a.aabb.setCombine(c.aabb,h.aabb),
b.aabb.setCombine(a.aabb,i.aabb),a.height=1+function(){var a=c.height,b=h.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=i.height;return b>c?b:c}(this));return b}return a},__class__:Dc};var rh=function(a){this.stree=this.dtree=this.pairs=this.syncs=this.moves=this.openlist=null;he.call(this);this.space=a;this.is_sweep=!1;this.dynab=this;this.stree=new Dc;this.dtree=new Dc};h["zpp_nape.space.ZPP_DynAABBPhase"]=rh;rh.__name__=["zpp_nape","space","ZPP_DynAABBPhase"];rh.__super__=
he;rh.prototype=y(he.prototype,{__insert:function(a){var b;null==Ra.zpp_pool?b=new Ra:(b=Ra.zpp_pool,Ra.zpp_pool=b.next,b.next=null);null==Ca.zpp_pool?b.aabb=new Ca:(b.aabb=Ca.zpp_pool,Ca.zpp_pool=b.aabb.next,b.aabb.next=null);null;b.moved=!1;b.synced=!1;b.first_sync=!1;b.shape=a;a.node=b;b.synced=!0;b.first_sync=!0;b.snext=this.syncs;this.syncs=b},__remove:function(a){var b=a.node;b.first_sync||(b.dyn?this.dtree.removeLeaf(b):this.stree.removeLeaf(b));a.node=null;if(b.synced){for(var c=null,d=this.syncs;null!=
d&&!(d==b);){c=d;d=d.snext}null==c?this.syncs=d.snext:c.snext=d.snext;d.snext=null;b.synced=!1}if(b.moved){c=null;for(d=this.moves;null!=d&&!(d==b);){c=d;d=d.mnext}null==c?this.moves=d.mnext:c.mnext=d.mnext;d.mnext=null;b.moved=!1}for(var c=null,e=this.pairs;null!=e;)d=e.next,e.n1==b||e.n2==b?(null==c?this.pairs=d:c.next=d,null!=e.arb&&(e.arb.pair=null),e.arb=null,e.n1.shape.pairs.remove(e),e.n2.shape.pairs.remove(e),e.n1=e.n2=null,e.sleeping=!1,e.next=fa.zpp_pool,fa.zpp_pool=e):c=e,e=d;for(;null!=
a.pairs.head;)c=a.pairs.pop_unsafe(),c.n1==b?c.n2.shape.pairs.remove(c):c.n1.shape.pairs.remove(c),null!=c.arb&&(c.arb.pair=null),c.arb=null,c.n1=c.n2=null,c.sleeping=!1,c.next=fa.zpp_pool,fa.zpp_pool=c;b.free();b.next=Ra.zpp_pool;Ra.zpp_pool=b},__sync:function(a){var b=a.node;if(!b.synced&&(!this.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==f.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()),b.dyn!=(a.body.type==f.id_BodyType_STATIC?!1:!a.body.component.sleeping)||
!b.aabb.contains(a.aabb)))b.synced=!0,b.snext=this.syncs,this.syncs=b},sync_broadphase:function(){this.space.validation();if(null!=this.syncs)if(null==this.moves){for(var a=this.syncs;null!=a;){var b=a.shape;a.first_sync?a.first_sync=!1:(a.dyn?this.dtree:this.stree).inlined_removeLeaf(a);var c=a.aabb;!this.space.continuous&&b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==f.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb());c.setExpand(b.aabb,3);((b.body.type==f.id_BodyType_STATIC?
a.dyn=!1:a.dyn=!b.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(a);a.synced=!1;a.moved=!0;a.mnext=a.snext;a.snext=null;a=a.mnext}a=this.syncs;this.syncs=this.moves;this.moves=a}else for(;null!=this.syncs;)a=this.syncs,this.syncs=a.snext,a.snext=null,b=a.shape,a.first_sync?a.first_sync=!1:(a.dyn?this.dtree:this.stree).inlined_removeLeaf(a),c=a.aabb,!this.space.continuous&&b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==f.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb()),
c.setExpand(b.aabb,3),((b.body.type==f.id_BodyType_STATIC?a.dyn=!1:a.dyn=!b.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(a),a.synced=!1,a.moved||(a.moved=!0,a.mnext=this.moves,this.moves=a)},broadphase:function(a,b){for(var c=this.syncs;null!=c;){var d=c.shape;c.first_sync?c.first_sync=!1:(c.dyn?this.dtree:this.stree).inlined_removeLeaf(c);var e=c.aabb;!a.continuous&&d.zip_aabb&&null!=d.body&&(d.zip_aabb=!1,d.type==f.id_ShapeType_CIRCLE?d.circle.__validate_aabb():d.polygon.__validate_aabb());
e.setExpand(d.aabb,3);((d.body.type==f.id_BodyType_STATIC?c.dyn=!1:c.dyn=!d.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(c);c.synced=!1;c=c.snext}for(;null!=this.syncs;)if(c=this.syncs,this.syncs=c.snext,c.snext=null,!c.moved&&(c.moved=!1,d=c.shape,!d.body.component.sleeping)){var e=c.aabb,g=null;null!=this.dtree.root&&(this.dtree.root.next=g,g=this.dtree.root);for(;null!=g;){var h;h=g;g=h.next;h.next=null;if(h!=c)if(null==h.child1){var i=h.shape;if(i.body!=d.body&&!(i.body.type==
f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(h.aabb)){var j,k;d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);for(var l=null,m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){var n=m.elt;if(n.id==j&&n.di==k){l=n;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==fa.zpp_pool?l=new fa:(l=fa.zpp_pool,fa.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=h,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),
i.pairs.inlined_add(l))}}else e.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=g,g=h.child1),null!=h.child2&&(h.child2.next=g,g=h.child2))}null!=this.stree.root&&(this.stree.root.next=g,g=this.stree.root);for(;null!=g;)if(h=g,g=h.next,h.next=null,h!=c)if(null==h.child1){if(i=h.shape,i.body!=d.body&&!(i.body.type==f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(h.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=
m;){n=m.elt;if(n.id==j&&n.di==k){l=n;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==fa.zpp_pool?l=new fa:(l=fa.zpp_pool,fa.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=h,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=g,g=h.child1),null!=h.child2&&(h.child2.next=g,g=h.child2))}for(;null!=this.moves;)if(c=this.moves,this.moves=c.mnext,
c.mnext=null,c.moved=!1,d=c.shape,!d.body.component.sleeping){e=c.aabb;g=null;null!=this.dtree.root&&(this.dtree.root.next=g,g=this.dtree.root);for(;null!=g;)if(h=g,g=h.next,h.next=null,h!=c)if(null==h.child1){if(i=h.shape,i.body!=d.body&&!(i.body.type==f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(h.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){n=m.elt;if(n.id==j&&n.di==k){l=n;break}m=m.next}null!=l?
l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==fa.zpp_pool?l=new fa:(l=fa.zpp_pool,fa.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=h,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=g,g=h.child1),null!=h.child2&&(h.child2.next=g,g=h.child2));null!=this.stree.root&&(this.stree.root.next=g,g=this.stree.root);for(;null!=g;)if(h=g,g=h.next,h.next=null,h!=c)if(null==
h.child1){if(i=h.shape,i.body!=d.body&&!(i.body.type==f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(h.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){n=m.elt;if(n.id==j&&n.di==k){l=n;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==fa.zpp_pool?l=new fa:(l=fa.zpp_pool,fa.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=h,l.id=j,l.di=k,l.next=this.pairs,this.pairs=
l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(h.aabb)&&(null!=h.child1&&(h.child1.next=g,g=h.child1),null!=h.child2&&(h.child2.next=g,g=h.child2))}c=null;for(d=this.pairs;null!=d;)!d.first&&!d.n1.aabb.intersect(d.n2.aabb)?(null==c?this.pairs=d.next:c.next=d.next,d.n1.shape.pairs.inlined_try_remove(d),d.n2.shape.pairs.inlined_try_remove(d),e=d.next,null!=d.arb&&(d.arb.pair=null),d.arb=null,d.n1=d.n2=null,d.sleeping=!1,d.next=fa.zpp_pool,fa.zpp_pool=d,d=e):(e=d.n1.shape,
g=e.body,h=d.n2.shape,i=h.body,!d.first&&(g.component.sleeping||g.type==f.id_BodyType_STATIC)&&(i.component.sleeping||i.type==f.id_BodyType_STATIC)?(d.sleeping=!0,null==c?this.pairs=d.next:c.next=d.next):(d.first=!1,e.aabb.intersect(h.aabb)&&(c=d.arb,d.arb=b?a.narrowPhase(e,h,g.type!=f.id_BodyType_DYNAMIC||i.type!=f.id_BodyType_DYNAMIC,d.arb,!1):a.continuousEvent(e,h,g.type!=f.id_BodyType_DYNAMIC||i.type!=f.id_BodyType_DYNAMIC,d.arb,!1),null==d.arb?null!=c&&(c.pair=null):d.arb.pair=d),c=d),d=d.next)},
rayMultiCast:function(a,b,c,d){null==this.openlist&&(this.openlist=new rj);this.sync_broadphase();a.validate_dir();var e=a.maxdist>=Math.POSITIVE_INFINITY,d=null==d?new Lg:d;if(null!=this.dtree.root&&a.aabbtest(this.dtree.root.aabb))if(e)this.openlist.add(this.dtree.root);else{var g=a.aabbsect(this.dtree.root.aabb);0<=g&&g<a.maxdist&&this.openlist.add(this.dtree.root)}null!=this.stree.root&&a.aabbtest(this.stree.root.aabb)&&(e?this.openlist.add(this.stree.root):(g=a.aabbsect(this.stree.root.aabb),
0<=g&&g<a.maxdist&&this.openlist.add(this.stree.root)));for(;null!=this.openlist.head;)if(g=this.openlist.pop_unsafe(),null==g.child1){if(g=g.shape,null==c||g.filter.shouldCollide(c))g.type==f.id_ShapeType_CIRCLE?a.circlesect2(g.circle,b,d):a.aabbtest(g.aabb)&&a.polysect2(g.polygon,b,d)}else{if(null!=g.child1&&a.aabbtest(g.child1.aabb))if(e)this.openlist.add(g.child1);else{var h=a.aabbsect(g.child1.aabb);0<=h&&h<a.maxdist&&this.openlist.add(g.child1)}null!=g.child2&&a.aabbtest(g.child2.aabb)&&(e?
this.openlist.add(g.child2):(h=a.aabbsect(g.child2.aabb),0<=h&&h<a.maxdist&&this.openlist.add(g.child2)))}this.openlist.clear();return d},__class__:rh});var Ec=function(){this.waket=0;this.sleep=!1;this.comps=null;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.comps=new sj};h["zpp_nape.space.ZPP_Island"]=Ec;Ec.__name__=["zpp_nape","space","ZPP_Island"];Ec.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},
pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},__class__:Ec};var Za=function(){this.woken=!1;this.waket=0;this.sleeping=!1;this.body=this.constraint=this.island=null;this.isBody=!1;this.rank=0;this.next=this.parent=null;this.sleeping=!1;this.island=null;this.parent=this;this.rank=0;this.woken=!1};h["zpp_nape.space.ZPP_Component"]=
Za;Za.__name__=["zpp_nape","space","ZPP_Component"];Za.prototype={__class__:Za};var qb=function(){this.freed=this.lazydel=!1;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.int1=this.int2=this.next=null;this.id=this.di=0;this.arbiters=new cg};h["zpp_nape.space.ZPP_CallbackSet"]=qb;qb.__name__=["zpp_nape","space","ZPP_CallbackSet"];qb.get=function(a,b){var c;null==qb.zpp_pool?c=new qb:(c=qb.zpp_pool,qb.zpp_pool=c.next,c.next=null);c.freed=!1;c.lazydel=!1;c.COLLISIONstate=f.id_PreFlag_ACCEPT;
c.COLLISIONstamp=0;c.SENSORstate=f.id_PreFlag_ACCEPT;c.SENSORstamp=0;c.FLUIDstate=f.id_PreFlag_ACCEPT;c.FLUIDstamp=0;a.id<b.id?(c.int1=a,c.int2=b):(c.int1=b,c.int2=a);c.id=c.int1.id;c.di=c.int2.id;return c};qb.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=
!1;this.modified=!0;this.length--;this.pushmod=!0;return c},remove_arb:function(a){this.arbiters.inlined_try_remove(a)},empty_arb:function(a){var b;b=!0;for(var c=this.arbiters.head;null!=c;)if(0==(c.elt.type&a))c=c.next;else{b=!1;break}return b},sleeping:function(){var a;a=!0;for(var b=this.arbiters.head;null!=b;)if(b.elt.sleeping)b=b.next;else{a=!1;break}return a},__class__:qb};var tj=function(a){this.cbsets=this.space=null;null==pc.zpp_pool?this.cbsets=new pc:(this.cbsets=pc.zpp_pool,pc.zpp_pool=
this.cbsets.next,this.cbsets.next=null);null;this.cbsets.lt=pa.setlt;this.space=a};h["zpp_nape.space.ZPP_CbSetManager"]=tj;tj.__name__=["zpp_nape","space","ZPP_CbSetManager"];tj.prototype={get:function(a){if(null==a.head)return null;var b;null==pa.zpp_pool?b=new pa:(b=pa.zpp_pool,pa.zpp_pool=b.next,b.next=null);null;var c=b.cbTypes;b.cbTypes=a;var d=this.cbsets.find_weak(b);null!=d?a=d.data:(a=pa.get(a),this.cbsets.insert(a),a.manager=this);b.cbTypes=c;b.free();b.next=pa.zpp_pool;pa.zpp_pool=b;return a},
remove:function(a){for(this.cbsets.remove(a);null!=a.cbpairs.head;){var b=a.cbpairs.pop_unsafe();b.a!=b.b&&(a==b.a?b.b.cbpairs.remove(b):b.a.cbpairs.remove(b));b.a=b.b=null;b.listeners.clear();b.next=xb.zpp_pool;xb.zpp_pool=b}a.manager=null},validate:function(){if(!this.cbsets.empty()){for(var a=this.cbsets.parent;null!=a.prev;)a=a.prev;for(;null!=a;)if(a.data.validate(),null!=a.next)for(a=a.next;null!=a.prev;)a=a.prev;else{for(;null!=a.parent&&a==a.parent.next;)a=a.parent;a=a.parent}}},pair:function(a,
b){for(var c=null,d=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head;null!=d;){var e=d.elt;if(e.a==a&&e.b==b||e.a==b&&e.b==a){c=e;break}d=d.next}null==c&&(c=xb.get(a,b),a.cbpairs.add(c),b!=a&&b.cbpairs.add(c));c.zip_listeners&&(c.zip_listeners=!1,c.__validate());return c},__class__:tj};var yi=function(a,b){this.precb=this.prelisteners=null;this.continuous=!1;this.toiEvents=null;this.pre_dt=0;this.c_arbiters_true=this.c_arbiters_false=this.f_arbiters=this.s_arbiters=this.live=this.wrap_live=
this.live_constraints=this.wrap_livecon=this.staticsleep=this.islands=this.listeners=this.wrap_listeners=this.callbacks=this.callbackset_list=this.cbsets=null;this.sortcontacts=!1;this.time=0;this.midstep=!1;this.global_lin_drag=this.global_ang_drag=this.stamp=0;this.bodies=this.wrap_bodies=this.compounds=this.wrap_compounds=this.constraints=this.wrap_constraints=this.kinematics=this.bphase=this.__static=null;this.gravityx=this.gravityy=0;this.outer=null;this.toiEvents=new uj;this.global_ang_drag=
this.global_lin_drag=0.015;this.precb=new Ig;this.precb.zpp_inner=new Dd;this.sortcontacts=!0;this.pre_dt=0;var c;if(!(c=null==b))null==f.Broadphase_DYNAMIC_AABB_TREE&&(f.internal=!0,f.Broadphase_DYNAMIC_AABB_TREE=new Ue,f.internal=!1),c=b==f.Broadphase_DYNAMIC_AABB_TREE;c?this.bphase=new rh(this):(null==f.Broadphase_SWEEP_AND_PRUNE&&(f.internal=!0,f.Broadphase_SWEEP_AND_PRUNE=new Ue,f.internal=!1),b==f.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new sh(this)));this.time=0;null!=a?(this.gravityx=a.x,
this.gravityy=a.y):this.gravityy=this.gravityx=0;this.bodies=new ve;this.wrap_bodies=Rd.get(this.bodies);this.wrap_bodies.zpp_inner.adder=n(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=n(this,this.bodies_subber);this.compounds=new th;this.wrap_compounds=Zd.get(this.compounds);this.wrap_compounds.zpp_inner.adder=n(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=n(this,this.compounds_subber);this.kinematics=new ve;this.c_arbiters_true=new uh;this.c_arbiters_false=new uh;
this.f_arbiters=new vj;this.s_arbiters=new wj;this.islands=new Ec;this.live=new ve;this.wrap_live=Rd.get(this.live,!0);this.staticsleep=new ve;this.constraints=new Fd;this.wrap_constraints=Od.get(this.constraints);this.wrap_constraints.zpp_inner.adder=n(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=n(this,this.constraints_subber);this.live_constraints=new Fd;this.wrap_livecon=Od.get(this.live_constraints,!0);this.__static=Qd.__static();this.__static.zpp_inner.space=this;this.callbacks=
new Dd;this.midstep=!1;this.listeners=new vh;this.wrap_listeners=id.get(this.listeners);this.wrap_listeners.zpp_inner.adder=n(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=n(this,this.listeners_subber);this.callbackset_list=new qb;this.mrca1=new Gd;this.mrca2=new Gd;this.prelisteners=new ff;this.cbsets=new tj(this)};h["zpp_nape.space.ZPP_Space"]=yi;yi.__name__=["zpp_nape","space","ZPP_Space"];yi.prototype={bodies_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&
a.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(a),this.addBody(a.zpp_inner),!0):!1},bodies_subber:function(a){this.remBody(a.zpp_inner)},compounds_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_compounds.remove(a),this.addCompound(a.zpp_inner),!0):!1},compounds_subber:function(a){this.remCompound(a.zpp_inner)},constraints_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(a),
this.addConstraint(a.zpp_inner),!0):!1},constraints_subber:function(a){this.remConstraint(a.zpp_inner)},listeners_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(a),this.addListener(a.zpp_inner),!0):!1},listeners_subber:function(a){this.remListener(a.zpp_inner)},addListener:function(a){a.space=this;a.addedToSpace();null!=a.interaction&&null},remListener:function(a){null!=a.interaction&&null;a.removedFromSpace();a.space=
null},add_callbackset:function(a){a.int1.cbsets.inlined_add(a);a.int2.cbsets.inlined_add(a);this.callbackset_list.inlined_add(a)},remove_callbackset:function(a){a.lazydel=!0;a.int1.cbsets.inlined_try_remove(a);a.int2.cbsets.inlined_try_remove(a)},transmitType:function(a,b){a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!1));a.type==f.id_BodyType_DYNAMIC?this.live.remove(a):a.type==f.id_BodyType_KINEMATIC?
(this.kinematics.remove(a),this.staticsleep.remove(a)):a.type==f.id_BodyType_STATIC&&this.staticsleep.remove(a);a.type=b;a.type==f.id_BodyType_KINEMATIC&&this.kinematics.add(a);a.type==f.id_BodyType_STATIC&&this.static_validation(a);a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0))},added_shape:function(a,b){null==b&&(b=!1);if(!b){var c=a.body;c.world||(c.component.waket=
this.stamp+(this.midstep?0:1),c.type==f.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1))}this.bphase.insert(a);a.addedToSpace()},removed_shape:function(a,b){null==b&&(b=!1);var c=this,d=a.body;b||d.wake();for(var e=null,g=d.arbiters.head;null!=g;){var h=[g.elt];if(h[0].ws1==a||h[0].ws2==a){if(0!=h[0].present){this.MRCA_chains(h[0].ws1,h[0].ws2);for(g=this.mrca1.head;null!=g;){for(var i=g.elt,j=this.mrca2.head;null!=j;){var k=j.elt,l=i.cbSet,m=k.cbSet;
l.validate();m.validate();l.manager.pair(l,m).empty_intersection()||(k=[ga.get(i,k)],k[0].remove_arb(h[0]),h[0].present--,l.manager.pair(l,m).forall(f.id_CbEvent_END,function(a,b){return function(d){if(0!=(d.itype&b[0].type)&&a[0].empty_arb(d.itype)){var e=c.push_callback(d);e.event=f.id_CbEvent_END;ga.int_callback(a[0],d,e);e.set=a[0]}}}(k,h)),null==k[0].arbiters.head&&this.remove_callbackset(k[0]));j=j.next}g=g.next}}h[0].b1!=d&&h[0].b1.type==f.id_BodyType_DYNAMIC&&(g=h[0].b1,g.world||(g.component.waket=
this.stamp+(this.midstep?0:1),g.type==f.id_BodyType_KINEMATIC&&(g.kinematicDelaySleep=!0),g.component.sleeping&&this.really_wake(g,!1)));h[0].b2!=d&&h[0].b2.type==f.id_BodyType_DYNAMIC&&(g=h[0].b2,g.world||(g.component.waket=this.stamp+(this.midstep?0:1),g.type==f.id_BodyType_KINEMATIC&&(g.kinematicDelaySleep=!0),g.component.sleeping&&this.really_wake(g,!1)));h[0].cleared=!0;(null==d||h[0].b2==d)&&h[0].b1.arbiters.inlined_try_remove(h[0]);(null==d||h[0].b1==d)&&h[0].b2.arbiters.inlined_try_remove(h[0]);
null!=h[0].pair&&(h[0].pair.arb=null,h[0].pair=null);h[0].active=!1;this.f_arbiters.modified=!0;g=d.arbiters.erase(e)}else e=g,g=g.next}this.bphase.remove(a);a.removedFromSpace()},addConstraint:function(a){a.space=this;a.addedToSpace();a.active&&(a.component.sleeping=!0,this.wake_constraint(a,!0))},remConstraint:function(a){a.active&&(this.wake_constraint(a,!0),this.live_constraints.remove(a));a.removedFromSpace();a.space=null},addCompound:function(a){a.space=this;a.addedToSpace();for(var b=a.bodies.head;null!=
b;)this.addBody(b.elt),b=b.next;for(b=a.constraints.head;null!=b;)this.addConstraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.addCompound(a.elt),a=a.next},remCompound:function(a){for(var b=a.bodies.head;null!=b;)this.remBody(b.elt),b=b.next;for(b=a.constraints.head;null!=b;)this.remConstraint(b.elt),b=b.next;for(b=a.compounds.head;null!=b;)this.remCompound(b.elt),b=b.next;a.removedFromSpace();a.space=null},addBody:function(a,b){null==b&&(b=-1);a.space=this;a.addedToSpace();a.component.sleeping=
!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0));for(var c=a.shapes.head;null!=c;)this.added_shape(c.elt,!0),c=c.next;a.type==f.id_BodyType_STATIC?this.static_validation(a):a.type!=f.id_BodyType_DYNAMIC&&b!=f.id_BodyType_KINEMATIC&&this.kinematics.add(a)},remBody:function(a,b){null==b&&(b=-1);a.type==f.id_BodyType_STATIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==
f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a)):a.type==f.id_BodyType_DYNAMIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.live.remove(a)):(b!=f.id_BodyType_KINEMATIC&&this.kinematics.remove(a),a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=
!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a));for(var c=a.shapes.head;null!=c;)this.removed_shape(c.elt,!0),c=c.next;a.removedFromSpace();a.space=null},rayMultiCast:function(a,b,c,d){return this.bphase.rayMultiCast(a.zpp_inner,b,null==c?null:c.zpp_inner,d)},push_callback:function(a){var b;null==Dd.zpp_pool?b=new Dd:(b=Dd.zpp_pool,Dd.zpp_pool=b.next,b.next=null);null;this.callbacks.push(b);b.listener=a;return b},step:function(a,b,c){var d=this;this.time+=a;this.pre_dt=
a;this.midstep=!0;this.stamp++;this.validation();this.bphase.broadphase(this,!0);this.prestep(a);if(this.sortcontacts){var e=this.c_arbiters_false;if(null!=e.head&&null!=e.head.next){var g=e.head,h=null,i=null,j=null,k=null,l=1,m,n,o;do{m=0;i=g;for(h=g=null;null!=i;){m++;j=i;n=0;for(o=l;null!=j&&n<l;)n++,j=j.next;for(;0<n||0<o&&null!=j;)0==n?(k=j,j=j.next,o--):0==o||null==j?(k=i,i=i.next,n--):(i.elt.active&&j.elt.active?i.elt.oc1.dist<j.elt.oc1.dist:1)?(k=i,i=i.next,n--):(k=j,j=j.next,o--),null!=
h?h.next=k:g=k,h=k;i=j}h.next=null;l<<=1}while(1<m);e.head=g;e.modified=!0;e.pushmod=!0}}this.updateVel(a);this.warmStart();this.iterateVel(b);for(b=this.kinematics.head;null!=b;)e=b.elt,e.pre_posx=e.posx,e.pre_posy=e.posy,e.pre_rot=e.rot,b=b.next;for(b=this.live.head;null!=b;)e=b.elt,e.pre_posx=e.posx,e.pre_posy=e.posy,e.pre_rot=e.rot,b=b.next;this.updatePos(a);this.continuous=!0;this.continuousCollisions(a);this.continuous=!1;this.iteratePos(c);for(c=this.kinematics.head;null!=c;)b=c.elt,e=b.pre_rot!=
b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),e&&b.invalidate_rot(),c=c.next;for(c=this.live.head;null!=c;)b=c.elt,e=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),e&&b.invalidate_rot(),c=c.next;c=null;for(b=this.staticsleep.head;null!=b;)e=b.elt,e.type!=f.id_BodyType_KINEMATIC||0==e.velx&&0==e.vely&&0==e.angvel?e.kinematicDelaySleep?(e.kinematicDelaySleep=!1,b=b.next):(e.component.sleeping=!0,b=this.staticsleep.inlined_erase(c)):(c=b,b=b.next);
this.doForests(a);this.sleepArbiters();this.midstep=!1;c=null;for(a=this.callbackset_list.next;null!=a;)b=[a],null==b[0].arbiters.head?(a=this.callbackset_list.inlined_erase(c),b=b[0],b.int1=b.int2=null,b.id=b.di=-1,b.freed=!0,null,b.next=qb.zpp_pool,qb.zpp_pool=b):(c=[b[0].sleeping()],pa.find_all(b[0].int1.cbSet,b[0].int2.cbSet,f.id_CbEvent_ONGOING,function(a,b){return function(c){if((!a[0]||c.allowSleepingCallbacks)&&!b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=f.id_CbEvent_ONGOING;
ga.int_callback(b[0],c,e);e.set=b[0]}}}(c,b)),c=a,a=a.next);for(;!this.callbacks.empty();)a=this.callbacks.pop(),a.listener.type==f.id_ListenerType_BODY?a.listener.body.handler(a.wrapper_body()):a.listener.type==f.id_ListenerType_CONSTRAINT?a.listener.constraint.handler(a.wrapper_con()):a.listener.type==f.id_ListenerType_INTERACTION&&a.listener.interaction.handleri(a.wrapper_int()),a.int1=a.int2=null,a.body=null,a.constraint=null,a.listener=null,null!=a.wrap_arbiters&&(a.wrap_arbiters.zpp_inner.inner=
null),a.set=null,a.next=Dd.zpp_pool,Dd.zpp_pool=a},continuousCollisions:function(a){var b=2*Math.PI/a;this.bphase.broadphase(this,!1);for(var c=0;1>c&&null!=this.toiEvents.head;){for(var d=null,c=2,e=!1,g=null,h=null,i=this.toiEvents.head;null!=i;){var j=i.elt,k=j.s1.body,l=j.s2.body;if(k.sweepFrozen&&l.sweepFrozen)if(0!=j.toi&&N.testCollide_safe(j.s1,j.s2))j.toi=0;else{i=this.toiEvents.erase(h);j.next=Jb.zpp_pool;Jb.zpp_pool=j;continue}if(j.frozen1!=k.sweepFrozen||j.frozen2!=l.sweepFrozen)if(j.kinematic){i=
this.toiEvents.erase(h);j.next=Jb.zpp_pool;Jb.zpp_pool=j;continue}else if(j.frozen1=k.sweepFrozen,j.frozen2=l.sweepFrozen,j.frozen1&&(k=j.s1,j.s1=j.s2,j.s2=k,j.frozen1=!1,j.frozen2=!0),Cc.staticSweep(j,a,0,t.collisionSlopCCD),0>j.toi){i=this.toiEvents.erase(h);j.next=Jb.zpp_pool;Jb.zpp_pool=j;continue}if(0<=j.toi&&(j.toi<c||!e&&j.kinematic))d=j,c=j.toi,e=j.kinematic,g=h;h=i;i=i.next}if(null==d)break;this.toiEvents.erase(g);c=d.toi;e=d.s1.body;g=d.s2.body;e.sweepFrozen||(e.sweepIntegrate(c*a),e.sweepValidate(d.s1));
g.sweepFrozen||(g.sweepIntegrate(c*a),g.sweepValidate(d.s2));h=this.narrowPhase(d.s1,d.s2,!0,d.arbiter,!0);null==h?null!=d.arbiter&&null!=d.arbiter.pair&&(d.arbiter.pair.arb=null,d.arbiter.pair=null):!this.presteparb(h,a,!0)&&h.type==ha.COL&&h.active&&0!=(h.immState&f.id_ImmState_ACCEPT)&&(h.colarb.warmStart(),h.colarb.applyImpulseVel(),h.colarb.applyImpulseVel(),h.colarb.applyImpulseVel(),h.colarb.applyImpulseVel(),e.sweep_angvel=e.angvel%b,g.sweep_angvel=g.angvel%b);null!=h&&h.active&&0!=(h.immState&
f.id_ImmState_ACCEPT)&&h.type==ha.COL&&(!e.sweepFrozen&&e.type!=f.id_BodyType_KINEMATIC&&(e.sweepFrozen=!0,e.angvel=d.failed?e.sweep_angvel=0:d.slipped?e.sweep_angvel*=t.angularCCDSlipScale:e.sweep_angvel),!g.sweepFrozen&&g.type!=f.id_BodyType_KINEMATIC&&(g.sweepFrozen=!0,g.angvel=d.failed?g.sweep_angvel=0:d.slipped?g.sweep_angvel*=t.angularCCDSlipScale:g.sweep_angvel))}for(;null!=this.toiEvents.head;)b=this.toiEvents.pop_unsafe(),b.next=Jb.zpp_pool,Jb.zpp_pool=b;for(b=this.kinematics.head;null!=
b;)d=b.elt,d.sweepIntegrate(a),d.sweepTime=0,b=b.next;for(b=this.live.head;null!=b;)d=b.elt,d.sweepFrozen||d.sweepIntegrate(a),d.sweepTime=0,b=b.next},continuousEvent:function(a,b,c,d){if(a.body.sweepFrozen&&b.body.sweepFrozen||a.body.disableCCD||b.body.disableCCD||null!=d&&null==d.colarb||0>=this.interactionType(a,b,a.body,b.body))return d;var e=a.body,g=b.body;if(c||e.bullet||g.bullet){var h;null==Jb.zpp_pool?h=new Jb:(h=Jb.zpp_pool,Jb.zpp_pool=h.next,h.next=null);h.failed=!1;h.s1=h.s2=null;h.arbiter=
null;e=e.type==f.id_BodyType_KINEMATIC||g.type==f.id_BodyType_KINEMATIC;c&&!e?(a.body.type!=f.id_BodyType_DYNAMIC?(h.s2=a,h.s1=b):(h.s1=a,h.s2=b),h.kinematic=!1,Cc.staticSweep(h,this.pre_dt,0,t.collisionSlopCCD)):(h.s1=a,h.s2=b,h.kinematic=e,h.s1.body.sweepFrozen||h.s2.body.sweepFrozen?(h.s1.body.sweepFrozen&&(a=h.s1,h.s1=h.s2,h.s2=a,h.frozen1=!1,h.frozen2=!0),Cc.staticSweep(h,this.pre_dt,0,t.collisionSlopCCD)):Cc.dynamicSweep(h,this.pre_dt,0,t.collisionSlopCCD));c&&0>h.toi||h.failed?(c=h,c.next=
Jb.zpp_pool,Jb.zpp_pool=c):(this.toiEvents.add(h),h.frozen1=h.s1.body.sweepFrozen,h.frozen2=h.s2.body.sweepFrozen,h.arbiter=null!=d?d.colarb:null)}return d},bodyCbWake:function(a){if(a.type==f.id_BodyType_DYNAMIC&&null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=f.id_CbEvent_WAKE,c.body=a);b=b.next}else a.component.woken=!0},bodyCbSleep:function(a){if(a.type==f.id_BodyType_DYNAMIC&&null!=a.cbSet)for(var b=
a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=f.id_CbEvent_SLEEP,c.body=a);b=b.next}},constraintCbWake:function(a){if(null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=f.id_CbEvent_WAKE,c.constraint=a);b=b.next}else a.component.woken=!0},constraintCbSleep:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=
b.elt;c.event==f.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=f.id_CbEvent_SLEEP,c.constraint=a);b=b.next}},constraintCbBreak:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_BREAK&&(c=this.push_callback(c),c.event=f.id_CbEvent_BREAK,c.constraint=a);b=b.next}},nullListenerType:function(a,b){for(var c=new Gd,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=
c.head;)if(d=c.pop_unsafe(),null!=d.icompound){for(var d=d.icompound,e=d.bodies.head;null!=e;)c.add(e.elt),e=e.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{e=null!=d.ibody?d.ibody:d.ishape.body;d=null!=d.ishape?d.ishape:null;for(e=e.arbiters.head;null!=e;){var f=e.elt;if(0!=f.present&&(null==d||f.ws1==d||f.ws2==d)){this.MRCA_chains(f.ws1,f.ws2);for(f=this.mrca1.head;null!=f;){var h=f.elt;if(!(h.cbSet!=a&&h.cbSet!=b))for(var i=this.mrca2.head;null!=i;){var j=i.elt;if(!(h.cbSet==
a&&j.cbSet!=b||h.cbSet==b&&j.cbSet!=a))if(j=ga.get(h,j),null!=j){for(;null!=j.arbiters.head;)j.arbiters.pop_unsafe().present--;this.remove_callbackset(j)}i=i.next}f=f.next}}e=e.next}}},nullInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.nullInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.nullInteractorType(c.elt,b),c=c.next}else{d=null!=a.ibody?a.ibody:a.ishape.body;c=null!=a.ishape?a.ishape:null;for(d=d.arbiters.head;null!=
d;){var e=d.elt;if(0!=e.present&&(null==c||e.ws1==c||e.ws2==c)){this.MRCA_chains(e.ws1,e.ws2);for(var f=this.mrca1.head;null!=f;){for(var h=f.elt,i=this.mrca2.head;null!=i;){var j=i.elt;h!=b&&j!=b||(j=ga.get(h,j),null!=j&&(e.present--,j.remove_arb(e),null==j.arbiters.head&&this.remove_callbackset(j)));i=i.next}f=f.next}}d=d.next}}},freshListenerType:function(a,b){for(var c=new Gd,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=
c.head;)if(d=c.pop_unsafe(),null!=d.icompound){for(var d=d.icompound,e=d.bodies.head;null!=e;)c.add(e.elt),e=e.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{e=null!=d.ibody?d.ibody:d.ishape.body;d=null!=d.ishape?d.ishape:null;for(e=e.arbiters.head;null!=e;){var f=e.elt;if(f.presentable&&(null==d||f.ws1==d||f.ws2==d)){this.MRCA_chains(f.ws1,f.ws2);for(var h=this.mrca1.head;null!=h;){var i=h.elt;if(!(i.cbSet!=a&&i.cbSet!=b))for(var j=this.mrca2.head;null!=j;){var k=j.elt;if(!(i.cbSet==
a&&k.cbSet!=b||i.cbSet==b&&k.cbSet!=a)){var l=ga.get(i,k);null==l&&(l=qb.get(i,k),this.add_callbackset(l));if(k=!l.arbiters.inlined_has(f))l.arbiters.inlined_add(f),k=!0;k&&f.present++}j=j.next}h=h.next}}e=e.next}}},freshInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.freshInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.freshInteractorType(c.elt,b),c=c.next}else{d=null!=a.ibody?a.ibody:a.ishape.body;c=null!=
a.ishape?a.ishape:null;for(d=d.arbiters.head;null!=d;){var e=d.elt;if(e.presentable&&(null==c||e.ws1==c||e.ws2==c)){this.MRCA_chains(e.ws1,e.ws2);for(var f=this.mrca1.head;null!=f;){for(var h=f.elt,i=this.mrca2.head;null!=i;){var j=i.elt;if(!(h!=b&&j!=b)){var k=h.cbSet,l=j.cbSet;k.validate();l.validate();if(!k.manager.pair(k,l).empty_intersection()){k=ga.get(h,j);null==k&&(k=qb.get(h,j),this.add_callbackset(k));if(j=!k.arbiters.inlined_has(e))k.arbiters.inlined_add(e),j=!0;j&&e.present++}}i=i.next}f=
f.next}}d=d.next}}},wakeCompound:function(a){for(var b=a.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==f.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=a.constraints.head;null!=b;)this.wake_constraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.wakeCompound(a.elt),a=a.next},wakeIsland:function(a){for(;null!=a.comps.head;){var b=a.comps.pop_unsafe();b.waket=this.stamp+(this.midstep?
0:1);if(b.isBody){var c=b.body;this.live.add(c);for(var d=c.arbiters.head;null!=d;){var e=d.elt;e.sleeping&&(e.sleeping=!1,e.up_stamp+=this.stamp-e.sleep_stamp,e.type==ha.COL?(e=e.colarb,e.stat?this.c_arbiters_true.inlined_add(e):this.c_arbiters_false.inlined_add(e)):e.type==ha.FLUID?this.f_arbiters.inlined_add(e.fluidarb):this.s_arbiters.inlined_add(e.sensorarb));d=d.next}this.bodyCbWake(c);b.sleeping=!1;b.island=null;b.parent=b;b.rank=0;if(c.type!=f.id_BodyType_STATIC)for(b=c.shapes.head;null!=
b;)c=b.elt,null!=c.node&&this.bphase.sync(c),b=b.next}else c=b.constraint,this.live_constraints.inlined_add(c),this.constraintCbWake(c),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0}a.next=Ec.zpp_pool;Ec.zpp_pool=a},non_inlined_wake:function(a,b){null==b&&(b=!1);a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,b))},really_wake:function(a,b){null==b&&(b=!1);if(null==a.component.island){a.component.sleeping=
!1;a.type==f.id_BodyType_KINEMATIC||a.type==f.id_BodyType_STATIC?this.staticsleep.inlined_add(a):this.live.inlined_add(a);for(var c=a.constraints.head;null!=c;){var d=c.elt;d.space==this&&this.wake_constraint(d);c=c.next}for(c=a.arbiters.head;null!=c;){d=c.elt;if(d.sleeping)if(d.sleeping=!1,d.up_stamp+=this.stamp+(this.midstep?0:1)-d.sleep_stamp,d.type==ha.COL){var e=d.colarb;e.stat?this.c_arbiters_true.inlined_add(e):this.c_arbiters_false.inlined_add(e)}else d.type==ha.FLUID?this.f_arbiters.inlined_add(d.fluidarb):
this.s_arbiters.inlined_add(d.sensorarb);d.type!=ha.SENSOR&&!d.cleared&&d.up_stamp>=this.stamp&&0!=(d.immState&f.id_ImmState_ACCEPT)&&(d.b1.type==f.id_BodyType_DYNAMIC&&d.b1.component.sleeping&&(e=d.b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.type==f.id_BodyType_KINEMATIC&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))),d.b2.type==f.id_BodyType_DYNAMIC&&d.b2.component.sleeping&&(d=d.b2,d.world||(d.component.waket=this.stamp+(this.midstep?0:1),d.type==f.id_BodyType_KINEMATIC&&
(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1))));c=c.next}!b&&a.type==f.id_BodyType_DYNAMIC&&this.bodyCbWake(a);if(!b&&!this.bphase.is_sweep&&a.type!=f.id_BodyType_STATIC)for(c=a.shapes.head;null!=c;)d=c.elt,null!=d.node&&this.bphase.sync(d),c=c.next}else this.wakeIsland(a.component.island)},wake_constraint:function(a,b){null==b&&(b=!1);return a.active&&(a.component.waket=this.stamp+(this.midstep?0:1),a.component.sleeping)?(null==a.component.island?(a.component.sleeping=
!1,this.live_constraints.inlined_add(a),a.wake_connected(),b||this.constraintCbWake(a)):this.wakeIsland(a.component.island),!0):!1},doForests:function(a){for(var b=this.c_arbiters_false.head;null!=b;){var c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&f.id_ImmState_ACCEPT)&&c.b1.type==f.id_BodyType_DYNAMIC&&c.b2.type==f.id_BodyType_DYNAMIC){var d;if(c.b1.component==c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(var e=null;d!=d.parent;){var g=d.parent;d.parent=e;e=
d;d=g}for(;null!=e;)g=e.parent,e.parent=d,e=g}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(e=null;c!=c.parent;)g=c.parent,c.parent=e,e=c,c=g;for(;null!=e;)g=e.parent,e.parent=c,e=g}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.f_arbiters.head;null!=b;){c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&f.id_ImmState_ACCEPT)&&c.b1.type==f.id_BodyType_DYNAMIC&&c.b2.type==f.id_BodyType_DYNAMIC){if(c.b1.component==
c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(e=null;d!=d.parent;)g=d.parent,d.parent=e,e=d,d=g;for(;null!=e;)g=e.parent,e.parent=d,e=g}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(e=null;c!=c.parent;)g=c.parent,c.parent=e,e=c,c=g;for(;null!=e;)g=e.parent,e.parent=c,e=g}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.live_constraints.head;null!=b;)b.elt.forest(),b=b.next;for(;null!=this.live.head;){d=
this.live.inlined_pop_unsafe();b=d.component;if(b==b.parent)c=b;else{c=b;for(e=null;c!=c.parent;)g=c.parent,c.parent=e,e=c,c=g;for(;null!=e;)g=e.parent,e.parent=c,e=g}null==c.island&&(null==Ec.zpp_pool?c.island=new Ec:(c.island=Ec.zpp_pool,Ec.zpp_pool=c.island.next,c.island.next=null),c.island.waket=0,this.islands.inlined_add(c.island),c.island.sleep=!0);b.island=c.island;b.island.comps.inlined_add(b);d=d.atRest(a);b.island.sleep=b.island.sleep&&d;b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;null!=
this.live_constraints.head;){a=this.live_constraints.inlined_pop_unsafe().component;if(a==a.parent)b=a;else{b=a;for(d=null;b!=b.parent;)c=b.parent,b.parent=d,d=b,b=c;for(;null!=d;)c=d.parent,d.parent=b,d=c}a.island=b.island;a.island.comps.inlined_add(a);a.waket>a.island.waket&&(a.island.waket=a.waket)}for(;null!=this.islands.next;)if(a=this.islands.inlined_pop_unsafe(),a.sleep)for(a=a.comps.head;null!=a;){d=a.elt;if(d.isBody){b=d.body;b.velx=0;b.vely=0;b.angvel=0;d.sleeping=!0;for(d=b.shapes.head;null!=
d;)this.bphase.sync(d.elt),d=d.next;this.bodyCbSleep(b)}else this.constraintCbSleep(d.constraint),d.sleeping=!0;a=a.next}else{for(;null!=a.comps.head;)b=a.comps.inlined_pop_unsafe(),b.waket=a.waket,b.isBody?this.live.inlined_add(b.body):this.live_constraints.inlined_add(b.constraint),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0;a.next=Ec.zpp_pool;Ec.zpp_pool=a}},sleepArbiters:function(){var a=null,b=this.c_arbiters_true,c=b.head,d=null!=this.c_arbiters_false;d&&null==c&&(d=!1,c=this.c_arbiters_false.head,
b=this.c_arbiters_false,a=null);for(;null!=c;){var e=c.elt;e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next);d&&null==c&&(d=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null)}a=null;b=this.f_arbiters;c=b.head;d=!1;for(;null!=c;)e=c.elt,e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==c&&(d=!1,c=null.begin(),a=b=null);a=null;
b=this.s_arbiters;c=b.head;d=!1;for(;null!=c;)e=c.elt,e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==c&&(d=!1,c=null.begin(),a=b=null)},static_validation:function(a){null!=a.shapes.head&&a.validate_aabb();a.validate_mass();a.validate_inertia();for(var b=a.shapes.head;null!=b;){var c=b.elt;c.type==f.id_ShapeType_POLYGON&&(c.polygon.splice_collinear(),c.polygon.validate_gaxi());b=b.next}a.sweepFrozen=!0},validation:function(){this.cbsets.validate();
for(var a=this.live.head;null!=a;){var b=a.elt;b.sweepRadius=0;for(var c=b.shapes.head;null!=c;){var d=c.elt;d.type==f.id_ShapeType_POLYGON&&(d.polygon.splice_collinear(),d.polygon.validate_gaxi());d.validate_sweepRadius();d.sweepRadius>b.sweepRadius&&(b.sweepRadius=d.sweepRadius);c=c.next}b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);if(b.component.woken&&
null!=b.cbSet)for(c=b.cbSet.bodylisteners.head;null!=c;)d=c.elt,d.event==f.id_CbEvent_WAKE&&(d=this.push_callback(d),d.event=f.id_CbEvent_WAKE,d.body=b),c=c.next;b.component.woken=!1;for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.kinematics.head;null!=a;){b=a.elt;b.sweepRadius=0;for(c=b.shapes.head;null!=c;)d=c.elt,d.type==f.id_ShapeType_POLYGON&&(d.polygon.splice_collinear(),d.polygon.validate_gaxi()),d.validate_sweepRadius(),d.sweepRadius>b.sweepRadius&&(b.sweepRadius=
d.sweepRadius),c=c.next;b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.live_constraints.head;null!=a;){b=a.elt;if(b.active){if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.conlisteners.head;null!=c;)d=c.elt,d.event==f.id_CbEvent_WAKE&&(d=this.push_callback(d),
d.event=f.id_CbEvent_WAKE,d.constraint=b),c=c.next;b.component.woken=!1}a=a.next}},updateVel:function(a){for(var b=1-a*this.global_lin_drag,c=1-a*this.global_ang_drag,d=this.live.head;null!=d;){var e=d.elt;if(0!=e.smass){var f=a*e.imass;e.velx=b*e.velx+(e.forcex+this.gravityx*e.gravMass)*f;e.vely=b*e.vely+(e.forcey+this.gravityy*e.gravMass)*f}if(0!=e.sinertia){var h=f=0,f=e.worldCOMx-e.posx,h=e.worldCOMy-e.posy;e.angvel=c*e.angvel+(e.torque+(this.gravityy*f-this.gravityx*h)*e.gravMass)*a*e.iinertia}d=
d.next}},updatePos:function(a){for(var b=2*Math.PI/a,c=this.live.head;null!=c;){var d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else{var e=t.staticCCDLinearThreshold*d.sweepRadius,g=t.staticCCDAngularThreshold;if((d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>g*g||d.type==f.id_BodyType_KINEMATIC){e=d.sweep_angvel;0>e&&(e=-e);for(var g=1/e,h=d.shapes.head;null!=h;){var i=
h.elt,j=i.aabb,k=j.minx,l=j.miny,m=j.maxx,n=j.maxy,o=0.008333333333333333*e*a*i.sweepCoef|0;8<o&&(o=8);var r=e*a/o;d.sweepIntegrate(a);i.type==f.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb();k<j.minx?j.minx=k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;n>j.maxy?j.maxy=n:n=j.maxy;for(var s=1;s<o;){var u=s++;d.sweepIntegrate(r*u*g);i.type==f.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb();k<j.minx?j.minx=
k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;n>j.maxy?j.maxy=n:n=j.maxy}this.bphase.sync(i);h=h.next}d.sweepFrozen=!1;if(d.type==f.id_BodyType_DYNAMIC&&d.bulletEnabled&&(e=t.bulletCCDLinearThreshold*d.sweepRadius,g=t.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>g*g))d.bullet=!0}else d.sweepFrozen=!0,d.bullet=!1}c=c.next}for(c=this.kinematics.head;null!=c;){d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=
d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else if(e=t.staticCCDLinearThreshold*d.sweepRadius,g=t.staticCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>g*g||d.type==f.id_BodyType_KINEMATIC){e=d.sweep_angvel;0>e&&(e=-e);g=1/e;for(h=d.shapes.head;null!=h;){i=h.elt;j=i.aabb;k=j.minx;l=j.miny;m=j.maxx;n=j.maxy;o=0.008333333333333333*e*a*i.sweepCoef|0;8<o&&(o=8);r=e*a/o;d.sweepIntegrate(a);i.type==f.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():
i.polygon._force_validate_aabb();k<j.minx?j.minx=k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;n>j.maxy?j.maxy=n:n=j.maxy;for(s=1;s<o;)u=s++,d.sweepIntegrate(r*u*g),i.type==f.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb(),k<j.minx?j.minx=k:k=j.minx,l<j.miny?j.miny=l:l=j.miny,m>j.maxx?j.maxx=m:m=j.maxx,n>j.maxy?j.maxy=n:n=j.maxy;this.bphase.sync(i);h=h.next}d.sweepFrozen=!1;if(d.type==f.id_BodyType_DYNAMIC&&d.bulletEnabled&&(e=t.bulletCCDLinearThreshold*
d.sweepRadius,g=t.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>g*g))d.bullet=!0}else d.sweepFrozen=!0,d.bullet=!1;c=c.next}},presteparb:function(a,b,c){null==c&&(c=!1);var d=this;if(!a.cleared&&a.b1.component.sleeping&&a.b2.component.sleeping)return a.sleep_stamp=this.stamp,a.sleeping=!0;if(!a.cleared||0!=a.present||a.intchange){var e=!c&&a.up_stamp==this.stamp-1&&!a.cleared&&!a.intchange,c=a.fresh&&!a.cleared&&!a.intchange;e&&(a.endGenerated=this.stamp);
if(c||e||a.cleared||a.intchange){this.inlined_MRCA_chains(a.ws1,a.ws2);for(e=this.mrca1.head;null!=e;){for(var g=e.elt,h=this.mrca2.head;null!=h;){var i=h.elt,j=g.cbSet,k=i.cbSet;if(!j.manager.pair(j,k).empty_intersection()){var l=[ga.get(g,i)];if(c||a.intchange){null==l[0]&&(l[0]=qb.get(g,i),this.add_callbackset(l[0]));j.manager.pair(j,k).forall(f.id_CbEvent_BEGIN,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=f.id_CbEvent_BEGIN;ga.int_callback(b[0],
c,e);e.set=b[0]}}}(l));if(i=!l[0].arbiters.inlined_has(a))l[0].arbiters.inlined_add(a),i=!0;i&&a.present++}else a.present--,l[0].remove_arb(a),j.manager.pair(j,k).forall(f.id_CbEvent_END,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=f.id_CbEvent_END;ga.int_callback(b[0],c,e);e.set=b[0]}}}(l)),null==l[0].arbiters.head&&this.remove_callbackset(l[0])}h=h.next}e=e.next}}a.fresh=!1;a.intchange=!1}if(a.cleared||a.up_stamp+(a.type==ha.COL?
t.arbiterExpirationDelay:0)<this.stamp)return a.type==ha.SENSOR?a.sensorarb.retire():a.type==ha.FLUID?a.fluidarb.retire():a.colarb.retire(),!0;c=a.active;a.active=a.presentable=a.up_stamp==this.stamp;0!=(a.immState&f.id_ImmState_ACCEPT)?a.active&&a.type!=ha.SENSOR&&(null!=a.colarb?a.colarb.preStep(b)&&(a.active=!1):a.fluidarb.preStep(this,b)):null!=a.colarb&&a.colarb.cleanupContacts()&&(a.active=!1);c!=a.active&&(a.b1.arbiters.modified=!0,a.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=
!0,this.s_arbiters.modified=this.f_arbiters.modified=!0);return!1},prestep:function(a){for(var b=null,c=this.live_constraints.head;null!=c;){var d=c.elt;d.preStep(a)?(c=this.live_constraints.erase(b),d.broken(),this.constraintCbBreak(d),d.removeOnBreak?(d.component.sleeping=!0,this.midstep=!1,null!=d.compound?d.compound.wrap_constraints.remove(d.outer):this.wrap_constraints.remove(d.outer),this.midstep=!0):d.active=!1,d.clearcache()):(b=c,c=c.next)}var b=null,c=this.c_arbiters_true,d=c.head,e=null!=
this.c_arbiters_false;e&&null==d&&(e=!1,d=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,d=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);b=null;c=this.f_arbiters;d=c.head;e=!1;for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,d=null.begin(),b=c=null);b=null;c=this.s_arbiters;d=c.head;e=!1;for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):
(b=d,d=d.next),e&&null==d&&(e=!1,d=null.begin(),b=c=null)},warmStart:function(){for(var a=this.f_arbiters.head;null!=a;){var b=a.elt;b.active&&0!=(b.immState&f.id_ImmState_ACCEPT)&&b.warmStart();a=a.next}a=this.c_arbiters_false.head;b=!0;null==a&&(a=this.c_arbiters_true.head,b=!1);for(;null!=a;){var c=a.elt;c.active&&0!=(c.immState&f.id_ImmState_ACCEPT)&&c.warmStart();a=a.next;b&&null==a&&(a=this.c_arbiters_true.head,b=!1)}for(a=this.live_constraints.head;null!=a;)a.elt.warmStart(),a=a.next},iterateVel:function(a){for(var b=
0;b<a;){b++;for(var c=this.f_arbiters.head;null!=c;){var d=c.elt;d.active&&0!=(d.immState&f.id_ImmState_ACCEPT)&&d.applyImpulseVel();c=c.next}c=null;for(d=this.live_constraints.head;null!=d;){var e=d.elt;e.applyImpulseVel()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,
d=d.next)}c=this.c_arbiters_false.head;d=!0;null==c&&(c=this.c_arbiters_true.head,d=!1);for(;null!=c;)e=c.elt,e.active&&0!=(e.immState&f.id_ImmState_ACCEPT)&&e.applyImpulseVel(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.head,d=!1)}},iteratePos:function(a){for(var b=0;b<a;){b++;for(var c=null,d=this.live_constraints.head;null!=d;){var e=d.elt;!e.__velocity&&e.stiff&&e.applyImpulsePos()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,
this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next)}c=this.c_arbiters_false.head;d=!0;null==c&&(c=this.c_arbiters_true.head,d=!1);for(;null!=c;)e=c.elt,e.active&&0!=(e.immState&f.id_ImmState_ACCEPT)&&e.applyImpulsePos(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.head,d=!1)}},group_ignore:function(a,b){var c=a.lookup_group();if(null==c)return!1;var d=b.lookup_group();if(null==
d)return!1;for(var e=!1;null!=c&&null!=d;){if(c==d){e=c.ignore;break}c.depth<d.depth?d=d.group:c=c.group}return e},interactionType:function(a,b,c,d){var e;e=!1;for(var f=c.constraints.head;null!=f;){var h=f.elt;if(h.ignore&&h.pair_exists(c.id,d.id)){e=!0;break}f=f.next}return!e&&!this.group_ignore(a,b)?(a.sensorEnabled||b.sensorEnabled)&&a.filter.shouldSense(b.filter)?2:(a.fluidEnabled||b.fluidEnabled)&&a.filter.shouldFlow(b.filter)&&!(0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia)?0:a.filter.shouldCollide(b.filter)&&
!(0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia)?1:-1:-1},narrowPhase:function(a,b,c,d,e){var g=this,h=null,i=a.body,j=b.body,k=this.interactionType(a,b,i,j);if(-1!=k){var l,m;a.type>b.type?(l=b,m=a):a.type==b.type?a.id<b.id?(l=a,m=b):(m=a,l=b):(l=a,m=b);var n=l==b;if(0==k){var o;if(null==d){for(var r=null,s=(i.arbiters.length<j.arbiters.length?i:j).arbiters.head;null!=s;){var t=s.elt;if(t.id==l.id&&t.di==m.id){r=t;break}s=s.next}o=r}else o=d;var u=null==o,q,v=!1;u?(null==Xb.zpp_pool?q=new Xb:
(q=Xb.zpp_pool,Xb.zpp_pool=q.next,q.next=null),null):null==o.fluidarb?(o.cleared=!0,o.b1.arbiters.inlined_try_remove(o),o.b2.arbiters.inlined_try_remove(o),null!=o.pair&&(o.pair.arb=null,o.pair=null),o.active=!1,this.f_arbiters.modified=!0,null==Xb.zpp_pool?q=new Xb:(q=Xb.zpp_pool,Xb.zpp_pool=q.next,q.next=null),null,v=u=q.intchange=!0):q=o.fluidarb;var x=f.id_InteractionType_FLUID;if(u||q.stamp!=this.stamp||e)if(q.stamp=this.stamp,N.flowCollide(l,m,q)){u?(q.b1=a.body,q.ws1=a,q.b2=b.body,q.ws2=b,
q.id=l.id,q.di=m.id,q.b1.arbiters.inlined_add(q),q.b2.arbiters.inlined_add(q),q.active=!0,q.present=0,q.cleared=!1,q.sleeping=!1,q.fresh=!1,q.presentable=!1,q.nx=0,q.ny=1,q.dampx=0,q.dampy=0,q.adamp=0,this.f_arbiters.inlined_add(q),q.fresh=!v):q.fresh=q.up_stamp<this.stamp-1||q.endGenerated==this.stamp&&e;q.up_stamp=q.stamp;if(q.fresh||0==(q.immState&f.id_ImmState_ALWAYS)){q.immState=f.id_ImmState_ACCEPT;var w=!1;this.inlined_MRCA_chains(q.ws1.id>q.ws2.id?q.ws2:q.ws1,q.ws1.id>q.ws2.id?q.ws1:q.ws2);
for(var y=this.mrca1.head;null!=y;){for(var z=y.elt,A=this.mrca2.head;null!=A;){var B=A.elt,C=z.cbSet,F=B.cbSet;if(!C.manager.pair(C,F).empty_intersection()){var E=null,G=null;this.prelisteners.inlined_clear();C.manager.pair(C,F).forall(f.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&x)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),w=w||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(E=ga.get(z,B),null==E&&(G=qb.get(z,B),this.add_callbackset(G)),null==E||(E.FLUIDstamp!=this.stamp||
e)&&0==(E.FLUIDstate&f.id_ImmState_ALWAYS)){null!=G&&(E=G);if(null!=E)for(var H=this.prelisteners.head;null!=H;)H.elt.itype==f.id_InteractionType_ANY&&(E.COLLISIONstamp=this.stamp,E.SENSORstamp=this.stamp),E.FLUIDstamp=this.stamp,H=H.next;var J=q.active;q.active=!0;this.precb.zpp_inner.pre_arbiter=q;this.precb.zpp_inner.set=E;for(var I=this.prelisteners.head;null!=I;){var L=I.elt;this.precb.zpp_inner.listener=L;ga.int_callback(E,L,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=z!=this.precb.zpp_inner.int1;
var K=L.handlerp(this.precb);if(null!=K){var O=q,P=K,Q;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Va,f.internal=!1);if(P==f.PreFlag_ACCEPT)Q=f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS;else{var R=K,T;null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Va,f.internal=!1);if(R==f.PreFlag_ACCEPT_ONCE)T=f.id_ImmState_ACCEPT;else{var V=K;null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new Va,f.internal=!1);T=V==f.PreFlag_IGNORE?f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS:
f.id_ImmState_IGNORE}Q=T}O.immState=Q}I=I.next}q.active=J;if(null!=E)for(var U=this.prelisteners.head;null!=U;)U.elt.itype==f.id_InteractionType_ANY&&(E.COLLISIONstate=q.immState,E.SENSORstate=q.immState),E.FLUIDstate=q.immState,U=U.next}else null==E?0==(q.immState&f.id_ImmState_ALWAYS)&&(q.immState=f.id_ImmState_ACCEPT):q.immState=E.FLUIDstate}A=A.next}y=y.next}if(w&&0==(q.immState&f.id_ImmState_ALWAYS)){if(q.b1.type==f.id_BodyType_DYNAMIC){var S=q.b1;S.world||(S.component.waket=this.stamp+(this.midstep?
0:1),S.type==f.id_BodyType_KINEMATIC&&(S.kinematicDelaySleep=!0),S.component.sleeping&&this.really_wake(S,!1))}if(q.b1.type==f.id_BodyType_DYNAMIC){var W=q.b2;W.world||(W.component.waket=this.stamp+(this.midstep?0:1),W.type==f.id_BodyType_KINEMATIC&&(W.kinematicDelaySleep=!0),W.component.sleeping&&this.really_wake(W,!1))}}}if(0!=(q.immState&f.id_ImmState_ACCEPT)){if(q.b1.type==f.id_BodyType_DYNAMIC&&q.b1.component.sleeping){var X=q.b1;X.world||(X.component.waket=this.stamp+(this.midstep?0:1),X.type==
f.id_BodyType_KINEMATIC&&(X.kinematicDelaySleep=!0),X.component.sleeping&&this.really_wake(X,!1))}if(q.b2.type==f.id_BodyType_DYNAMIC&&q.b2.component.sleeping){var Y=q.b2;Y.world||(Y.component.waket=this.stamp+(this.midstep?0:1),Y.type==f.id_BodyType_KINEMATIC&&(Y.kinematicDelaySleep=!0),Y.component.sleeping&&this.really_wake(Y,!1))}}q.sleeping&&(q.sleeping=!1,this.f_arbiters.inlined_add(q));h=q}else if(u){var aa=q;aa.next=Xb.zpp_pool;Xb.zpp_pool=aa;h=null}else h=q;else h=q}else if(1==k){var ba;ba=
c?this.c_arbiters_true:this.c_arbiters_false;var Z;if(null==d){for(var ca=null,da=(i.arbiters.length<j.arbiters.length?i:j).arbiters.head;null!=da;){var fa=da.elt;if(fa.id==l.id&&fa.di==m.id){ca=fa;break}da=da.next}Z=ca}else Z=d;var ea=null==Z,D,ka=!1;ea?(null==yb.zpp_pool?D=new yb:(D=yb.zpp_pool,yb.zpp_pool=D.next,D.next=null),null,D.stat=c):null==Z.colarb?(Z.cleared=!0,Z.b1.arbiters.inlined_try_remove(Z),Z.b2.arbiters.inlined_try_remove(Z),null!=Z.pair&&(Z.pair.arb=null,Z.pair=null),Z.active=!1,
this.f_arbiters.modified=!0,null==yb.zpp_pool?D=new yb:(D=yb.zpp_pool,yb.zpp_pool=D.next,D.next=null),null,D.intchange=!0,D.stat=c,ka=ea=!0):(D=Z.colarb,n=l!=D.s1,D.stat!=c&&(D.stat=c,D.sleeping||((c?this.c_arbiters_false:this.c_arbiters_true).remove(D),ba.add(D))));var ma=f.id_InteractionType_COLLISION;if(ea||D.stamp!=this.stamp||e)if(D.stamp=this.stamp,N.contactCollide(l,m,D,n)){ea?(D.b1=a.body,D.ws1=a,D.b2=b.body,D.ws2=b,D.id=l.id,D.di=m.id,D.b1.arbiters.inlined_add(D),D.b2.arbiters.inlined_add(D),
D.active=!0,D.present=0,D.cleared=!1,D.sleeping=!1,D.fresh=!1,D.presentable=!1,D.s1=a,D.s2=b,D.userdef_restitution||(D.restitution=D.s1.material.elasticity<=Math.NEGATIVE_INFINITY||D.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:D.s1.material.elasticity>=Math.POSITIVE_INFINITY||D.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(D.s1.material.elasticity+D.s2.material.elasticity)/2,0>D.restitution&&(D.restitution=0),1<D.restitution&&(D.restitution=1)),D.userdef_dyn_fric||(D.dyn_fric=Math.sqrt(D.s1.material.dynamicFriction*
D.s2.material.dynamicFriction)),D.userdef_stat_fric||(D.stat_fric=Math.sqrt(D.s1.material.staticFriction*D.s2.material.staticFriction)),D.userdef_rfric||(D.rfric=Math.sqrt(D.s1.material.rollingFriction*D.s2.material.rollingFriction)),ba.inlined_add(D),D.fresh=!ka):D.fresh=D.up_stamp<this.stamp-1||D.endGenerated==this.stamp&&e;D.up_stamp=D.stamp;if(D.fresh||0==(D.immState&f.id_ImmState_ALWAYS)){D.immState=f.id_ImmState_ACCEPT;var ia=!1;this.inlined_MRCA_chains(D.ws1.id>D.ws2.id?D.ws2:D.ws1,D.ws1.id>
D.ws2.id?D.ws1:D.ws2);for(var ha=this.mrca1.head;null!=ha;){for(var ja=ha.elt,la=this.mrca2.head;null!=la;){var oa=la.elt,na=ja.cbSet,sa=oa.cbSet;if(!na.manager.pair(na,sa).empty_intersection()){var $=null,pa=null;this.prelisteners.inlined_clear();na.manager.pair(na,sa).forall(f.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&ma)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),ia=ia||!b.pure)}}([null]));if(null!=this.prelisteners.head)if($=ga.get(ja,oa),null==$&&(pa=qb.get(ja,oa),this.add_callbackset(pa)),
null==$||($.COLLISIONstamp!=this.stamp||e)&&0==($.COLLISIONstate&f.id_ImmState_ALWAYS)){null!=pa&&($=pa);if(null!=$)for(var qa=this.prelisteners.head;null!=qa;)qa.elt.itype==f.id_InteractionType_ANY?($.COLLISIONstamp=this.stamp,$.SENSORstamp=this.stamp,$.FLUIDstamp=this.stamp):$.COLLISIONstamp=this.stamp,qa=qa.next;var wa=D.active;D.active=!0;D.cleanupContacts();this.precb.zpp_inner.pre_arbiter=D;this.precb.zpp_inner.set=$;for(var ra=this.prelisteners.head;null!=ra;){var va=ra.elt;this.precb.zpp_inner.listener=
va;ga.int_callback($,va,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=ja!=this.precb.zpp_inner.int1;var ta=va.handlerp(this.precb);if(null!=ta){var xa=D,ya=ta,Ba;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Va,f.internal=!1);if(ya==f.PreFlag_ACCEPT)Ba=f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS;else{var Ha=ta,Ea;null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Va,f.internal=!1);if(Ha==f.PreFlag_ACCEPT_ONCE)Ea=f.id_ImmState_ACCEPT;else{var Ia=ta;null==f.PreFlag_IGNORE&&
(f.internal=!0,f.PreFlag_IGNORE=new Va,f.internal=!1);Ea=Ia==f.PreFlag_IGNORE?f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS:f.id_ImmState_IGNORE}Ba=Ea}xa.immState=Ba}ra=ra.next}D.active=wa;if(null!=$)for(var Fa=this.prelisteners.head;null!=Fa;)Fa.elt.itype==f.id_InteractionType_ANY?($.COLLISIONstate=D.immState,$.SENSORstate=D.immState,$.FLUIDstate=D.immState):$.COLLISIONstate=D.immState,Fa=Fa.next}else null==$?0==(D.immState&f.id_ImmState_ALWAYS)&&(D.immState=f.id_ImmState_ACCEPT):D.immState=$.COLLISIONstate}la=
la.next}ha=ha.next}if(ia&&0==(D.immState&f.id_ImmState_ALWAYS)){if(D.b1.type==f.id_BodyType_DYNAMIC){var za=D.b1;za.world||(za.component.waket=this.stamp+(this.midstep?0:1),za.type==f.id_BodyType_KINEMATIC&&(za.kinematicDelaySleep=!0),za.component.sleeping&&this.really_wake(za,!1))}if(D.b1.type==f.id_BodyType_DYNAMIC){var Aa=D.b2;Aa.world||(Aa.component.waket=this.stamp+(this.midstep?0:1),Aa.type==f.id_BodyType_KINEMATIC&&(Aa.kinematicDelaySleep=!0),Aa.component.sleeping&&this.really_wake(Aa,!1))}}}if(0!=
(D.immState&f.id_ImmState_ACCEPT)){if(D.b1.type==f.id_BodyType_DYNAMIC&&D.b1.component.sleeping){var Ca=D.b1;Ca.world||(Ca.component.waket=this.stamp+(this.midstep?0:1),Ca.type==f.id_BodyType_KINEMATIC&&(Ca.kinematicDelaySleep=!0),Ca.component.sleeping&&this.really_wake(Ca,!1))}if(D.b2.type==f.id_BodyType_DYNAMIC&&D.b2.component.sleeping){var Ga=D.b2;Ga.world||(Ga.component.waket=this.stamp+(this.midstep?0:1),Ga.type==f.id_BodyType_KINEMATIC&&(Ga.kinematicDelaySleep=!0),Ga.component.sleeping&&this.really_wake(Ga,
!1))}}D.sleeping&&(D.sleeping=!1,ba.inlined_add(D));h=D}else if(ea){var Da=D;Da.userdef_dyn_fric=!1;Da.userdef_stat_fric=!1;Da.userdef_restitution=!1;Da.userdef_rfric=!1;Da.__ref_edge1=Da.__ref_edge2=null;Da.next=yb.zpp_pool;yb.zpp_pool=Da;h=null}else h=D;else h=D}else{var ua;if(null==d){for(var Na=null,Ka=(i.arbiters.length<j.arbiters.length?i:j).arbiters.head;null!=Ka;){var Ma=Ka.elt;if(Ma.id==l.id&&Ma.di==m.id){Na=Ma;break}Ka=Ka.next}ua=Na}else ua=d;var Ja=null==ua,M,Qa=!1;Ja?(null==pb.zpp_pool?
M=new pb:(M=pb.zpp_pool,pb.zpp_pool=M.next,M.next=null),null):null==ua.sensorarb?(ua.cleared=!0,ua.b1.arbiters.inlined_try_remove(ua),ua.b2.arbiters.inlined_try_remove(ua),null!=ua.pair&&(ua.pair.arb=null,ua.pair=null),ua.active=!1,this.f_arbiters.modified=!0,null==pb.zpp_pool?M=new pb:(M=pb.zpp_pool,pb.zpp_pool=M.next,M.next=null),null,Qa=Ja=M.intchange=!0):M=ua.sensorarb;var ab=f.id_InteractionType_SENSOR;if(Ja||M.stamp!=this.stamp||e)if(M.stamp=this.stamp,N.testCollide(l,m)){Ja?(M.b1=a.body,M.ws1=
a,M.b2=b.body,M.ws2=b,M.id=l.id,M.di=m.id,M.b1.arbiters.inlined_add(M),M.b2.arbiters.inlined_add(M),M.active=!0,M.present=0,M.cleared=!1,M.sleeping=!1,M.fresh=!1,M.presentable=!1,this.s_arbiters.inlined_add(M),M.fresh=!Qa):M.fresh=M.up_stamp<this.stamp-1||M.endGenerated==this.stamp&&e;M.up_stamp=M.stamp;if(M.fresh||0==(M.immState&f.id_ImmState_ALWAYS)){M.immState=f.id_ImmState_ACCEPT;var Sa=!1;this.inlined_MRCA_chains(M.ws1.id>M.ws2.id?M.ws2:M.ws1,M.ws1.id>M.ws2.id?M.ws1:M.ws2);for(var Ra=this.mrca1.head;null!=
Ra;){for(var Ua=Ra.elt,Wa=this.mrca2.head;null!=Wa;){var db=Wa.elt,Xa=Ua.cbSet,cb=db.cbSet;if(!Xa.manager.pair(Xa,cb).empty_intersection()){var Oa=null,Ya=null;this.prelisteners.inlined_clear();Xa.manager.pair(Xa,cb).forall(f.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&ab)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),Sa=Sa||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(Oa=ga.get(Ua,db),null==Oa&&(Ya=qb.get(Ua,db),this.add_callbackset(Ya)),null==Oa||(Oa.SENSORstamp!=this.stamp||
e)&&0==(Oa.SENSORstate&f.id_ImmState_ALWAYS)){null!=Ya&&(Oa=Ya);if(null!=Oa)for(var Za=this.prelisteners.head;null!=Za;)Za.elt.itype==f.id_InteractionType_ANY?(Oa.COLLISIONstamp=this.stamp,Oa.SENSORstamp=this.stamp,Oa.FLUIDstamp=this.stamp):Oa.SENSORstamp=this.stamp,Za=Za.next;var eb=M.active;M.active=!0;this.precb.zpp_inner.pre_arbiter=M;this.precb.zpp_inner.set=Oa;for(var $a=this.prelisteners.head;null!=$a;){var bb=$a.elt;this.precb.zpp_inner.listener=bb;ga.int_callback(Oa,bb,this.precb.zpp_inner);
this.precb.zpp_inner.pre_swapped=Ua!=this.precb.zpp_inner.int1;var fb=bb.handlerp(this.precb);if(null!=fb){var jb=M,kb=fb,gb;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Va,f.internal=!1);if(kb==f.PreFlag_ACCEPT)gb=f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS;else{var lb=fb,hb;null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Va,f.internal=!1);if(lb==f.PreFlag_ACCEPT_ONCE)hb=f.id_ImmState_ACCEPT;else{var mb=fb;null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=
new Va,f.internal=!1);hb=mb==f.PreFlag_IGNORE?f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS:f.id_ImmState_IGNORE}gb=hb}jb.immState=gb}$a=$a.next}M.active=eb;if(null!=Oa)for(var ib=this.prelisteners.head;null!=ib;)ib.elt.itype==f.id_InteractionType_ANY?(Oa.COLLISIONstate=M.immState,Oa.SENSORstate=M.immState,Oa.FLUIDstate=M.immState):Oa.SENSORstate=M.immState,ib=ib.next}else null==Oa?0==(M.immState&f.id_ImmState_ALWAYS)&&(M.immState=f.id_ImmState_ACCEPT):M.immState=Oa.SENSORstate}Wa=Wa.next}Ra=Ra.next}if(Sa&&
0==(M.immState&f.id_ImmState_ALWAYS)){if(M.b1.type!=f.id_BodyType_STATIC){var Pa=M.b1;Pa.world||(Pa.component.waket=this.stamp+(this.midstep?0:1),Pa.type==f.id_BodyType_KINEMATIC&&(Pa.kinematicDelaySleep=!0),Pa.component.sleeping&&this.really_wake(Pa,!1))}if(M.b2.type!=f.id_BodyType_STATIC){var ob=M.b2;ob.world||(ob.component.waket=this.stamp+(this.midstep?0:1),ob.type==f.id_BodyType_KINEMATIC&&(ob.kinematicDelaySleep=!0),ob.component.sleeping&&this.really_wake(ob,!1))}}}M.sleeping&&(M.sleeping=!1,
this.s_arbiters.inlined_add(M));h=M}else if(Ja){var nb=M;nb.next=pb.zpp_pool;pb.zpp_pool=nb;h=null}else h=M;else h=M}}return h},MRCA_chains:function(a,b){this.inlined_MRCA_chains(a,b)},inlined_MRCA_chains:function(a,b){this.mrca1.inlined_clear();this.mrca2.inlined_clear();null!=a.cbSet&&this.mrca1.inlined_add(a);null!=a.body.cbSet&&this.mrca1.inlined_add(a.body);null!=b.cbSet&&this.mrca2.inlined_add(b);null!=b.body.cbSet&&this.mrca2.inlined_add(b.body);for(var c=a.body.compound,d=b.body.compound;c!=
d;)(null==c?0:c.depth)<(null==d?0:d.depth)?(null!=d.cbSet&&this.mrca2.inlined_add(d),d=d.compound):(null!=c.cbSet&&this.mrca1.inlined_add(c),c=c.compound)},__class__:yi};var Yb=function(){this.next=this.prev=this.shape=this.aabb=null};h["zpp_nape.space.ZPP_SweepData"]=Yb;Yb.__name__=["zpp_nape","space","ZPP_SweepData"];Yb.prototype={__class__:Yb};var sh=function(a){this.list=null;he.call(this);this.space=a;this.is_sweep=!0;this.sweep=this};h["zpp_nape.space.ZPP_SweepPhase"]=sh;sh.__name__=["zpp_nape",
"space","ZPP_SweepPhase"];sh.__super__=he;sh.prototype=y(he.prototype,{__insert:function(a){var b;null==Yb.zpp_pool?b=new Yb:(b=Yb.zpp_pool,Yb.zpp_pool=b.next,b.next=null);null;a.sweep=b;b.shape=a;b.aabb=a.aabb;b.next=this.list;null!=this.list&&(this.list.prev=b);this.list=b},__remove:function(a){var b=a.sweep;null==b.prev?this.list=b.next:b.prev.next=b.next;null!=b.next&&(b.next.prev=b.prev);a.sweep=null;b.prev=null;b.shape=null;b.aabb=null;b.next=Yb.zpp_pool;Yb.zpp_pool=b},sync_broadphase:function(){this.space.validation();
null!=this.list&&this.sync_broadphase_fast()},sync_broadphase_fast:function(){for(var a=this.list.next;null!=a;){var b=a.next,c=a.prev;if(!(a.aabb.minx>c.aabb.minx)){for(;null!=c.prev&&c.prev.aabb.minx>a.aabb.minx;)c=c.prev;var d=a.prev;d.next=a.next;null!=a.next&&(a.next.prev=d);null==c.prev?(a.prev=null,this.list=a,a.next=c,c.prev=a):(a.prev=c.prev,c.prev=a,a.prev.next=a,a.next=c)}a=b}},broadphase:function(a,b){if(null!=this.list){this.sync_broadphase_fast();for(var c=this.list;null!=c;){for(var d=
c.next,e=c.shape,g=e.body,h=c.aabb.maxx;null!=d&&!(d.aabb.minx>h);){var i=d.shape,j=i.body;if(j!=g&&!(g.type==f.id_BodyType_STATIC&&j.type==f.id_BodyType_STATIC)&&(!g.component.sleeping||!j.component.sleeping))e.aabb.intersectY(i.aabb)&&(b?a.narrowPhase(e,i,g.type!=f.id_BodyType_DYNAMIC||j.type!=f.id_BodyType_DYNAMIC,null,!1):a.continuousEvent(e,i,g.type!=f.id_BodyType_DYNAMIC||j.type!=f.id_BodyType_DYNAMIC,null,!1));d=d.next}c=c.next}}},rayMultiCast:function(a,b,c,d){this.sync_broadphase();a.validate_dir();
var e=a.rayAABB(),d=null==d?new Lg:d;if(0==a.dirx)for(var g=this.list;null!=g&&g.aabb.minx<=e.minx;){if(g.aabb.intersect(e)&&(null==c||g.shape.filter.shouldCollide(c)))0<=a.aabbsect(g.aabb)&&(g.shape.type==f.id_ShapeType_CIRCLE?a.circlesect2(g.shape.circle,b,d):a.polysect2(g.shape.polygon,b,d));g=g.next}else if(0>a.dirx){for(var g=this.list,h=null;null!=g&&g.aabb.minx<=e.maxx;)h=g,g=g.next;for(g=h;null!=g;){if(g.aabb.intersect(e)&&(null==c||g.shape.filter.shouldCollide(c)))0<=a.aabbsect(g.aabb)&&
(g.shape.type==f.id_ShapeType_CIRCLE?a.circlesect2(g.shape.circle,b,d):a.polysect2(g.shape.polygon,b,d));g=g.prev}}else for(g=this.list;null!=g&&g.aabb.minx<=e.maxx;){if(g.aabb.intersect(e)&&(null==c||g.shape.filter.shouldCollide(c)))0<=a.aabbsect(g.aabb)&&(g.shape.type==f.id_ShapeType_CIRCLE?a.circlesect2(g.shape.circle,b,d):a.polysect2(g.shape.polygon,b,d));g=g.next}null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null);e.wrap_min=e.wrap_max=null;e._invalidate=null;e._validate=null;e.next=Ca.zpp_pool;
Ca.zpp_pool=e;return d},__class__:sh});var mj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=mj;mj.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"];mj.prototype={inlined_add:function(a){var b;null==Zb.zpp_pool?b=new Zb:(b=Zb.zpp_pool,Zb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==
a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Zb.zpp_pool;Zb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:mj};var ve=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Body"]=ve;ve.__name__=["zpp_nape","util","ZNPList_ZPP_Body"];
ve.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Kb.zpp_pool?b=new Kb:(b=Kb.zpp_pool,Kb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Kb.zpp_pool?c=new Kb:(c=Kb.zpp_pool,Kb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=
!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Kb.zpp_pool;Kb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Kb.zpp_pool;Kb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:ve};var th=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Compound"]=th;th.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"];
th.prototype={remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=wh.zpp_pool;wh.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=
this.head;0<a--&&null!=b;)b=b.next;return b},__class__:th};var cg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Arbiter"]=cg;cg.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"];cg.prototype={inlined_add:function(a){var b;null==ad.zpp_pool?b=new ad:(b=ad.zpp_pool,ad.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;
this.head=a.next;a.elt=null;a.next=ad.zpp_pool;ad.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=
c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ad.zpp_pool;ad.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},__class__:cg};var jj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=jj;jj.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"];
jj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==bd.zpp_pool?b=new bd:(b=bd.zpp_pool,bd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=bd.zpp_pool;bd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=bd.zpp_pool;bd.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},__class__:jj};var oj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_AABBPair"]=oj;oj.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"];oj.prototype={inlined_add:function(a){var b;null==qc.zpp_pool?b=new qc:(b=qc.zpp_pool,qc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=
a.next;a.elt=null;a.next=qc.zpp_pool;qc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=
b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=qc.zpp_pool;qc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:oj};var qj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Edge"]=qj;qj.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"];qj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Lb.zpp_pool?b=new Lb:
(b=Lb.zpp_pool,Lb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Lb.zpp_pool?c=new Lb:(c=Lb.zpp_pool,Lb.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=
a.next;a.elt=null;a.next=Lb.zpp_pool;Lb.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Lb.zpp_pool;Lb.zpp_pool=
a;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.head,b=null;null!=a;){var c=a.next;a.next=b;b=this.head=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:qj};var rj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_AABBNode"]=rj;rj.__name__=["zpp_nape","util","ZNPList_ZPP_AABBNode"];rj.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==ie.zpp_pool?b=new ie:(b=ie.zpp_pool,ie.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=ie.zpp_pool;ie.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();
return a},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:rj};var sj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Component"]=sj;sj.__name__=["zpp_nape","util","ZNPList_ZPP_Component"];sj.prototype={inlined_add:function(a){var b;null==we.zpp_pool?b=new we:(b=we.zpp_pool,we.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=we.zpp_pool;we.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},__class__:sj};var dk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=dk;dk.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionGroup"];dk.prototype=
{iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:dk};var uh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=uh;uh.__name__=["zpp_nape","util","ZNPList_ZPP_ColArbiter"];uh.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Mb.zpp_pool?b=new Mb:(b=Mb.zpp_pool,Mb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;
return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Mb.zpp_pool;Mb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:uh};var vj=function(){this.length=
0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=vj;vj.__name__=["zpp_nape","util","ZNPList_ZPP_FluidArbiter"];vj.prototype={inlined_add:function(a){var b;null==Nb.zpp_pool?b=new Nb:(b=Nb.zpp_pool,Nb.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&
(this.pushmod=!0));a=b;a.elt=null;a.next=Nb.zpp_pool;Nb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:vj};var wj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=wj;wj.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"];wj.prototype={inlined_add:function(a){var b;null==Wd.zpp_pool?b=new Wd:(b=Wd.zpp_pool,Wd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;
this.length++;return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Wd.zpp_pool;Wd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:wj};var vh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_Listener"]=vh;vh.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"];vh.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==$b.zpp_pool?b=new $b:(b=$b.zpp_pool,$b.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==$b.zpp_pool?c=new $b:(c=$b.zpp_pool,$b.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},remove:function(a){this.inlined_try_remove(a)},
inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=$b.zpp_pool;$b.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:vh};
var uj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=uj;uj.__name__=["zpp_nape","util","ZNPList_ZPP_ToiEvent"];uj.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Fc.zpp_pool?b=new Fc:(b=Fc.zpp_pool,Fc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=
a.next;a.elt=null;a.next=Fc.zpp_pool;Fc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Fc.zpp_pool;Fc.zpp_pool=
a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:uj};var ek=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ConvexResult"]=ek;ek.__name__=["zpp_nape","util","ZNPList_ConvexResult"];ek.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:ek};var fk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=fk;fk.__name__=["zpp_nape",
"util","ZNPList_ZPP_GeomPoly"];fk.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:fk};var xj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};h["zpp_nape.util.ZNPList_RayResult"]=xj;xj.__name__=["zpp_nape","util","ZNPList_RayResult"];xj.prototype={inlined_insert:function(a,b){var c;null==jf.zpp_pool?c=new jf:(c=jf.zpp_pool,jf.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=
c);this.pushmod=this.modified=!0;this.length++;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:xj};var Ya=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_CbType"]=Ya;Ya.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"];Ya.prototype={__class__:Ya};var Zb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=Zb;Zb.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"];Zb.prototype={__class__:Zb};var Bc=function(){this.next=
this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Shape"]=Bc;Bc.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"];Bc.prototype={__class__:Bc};var Kb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Body"]=Kb;Kb.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"];Kb.prototype={__class__:Kb};var pd=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Constraint"]=pd;pd.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"];pd.prototype={__class__:pd};var wh=function(){this.next=this.elt=
null};h["zpp_nape.util.ZNPNode_ZPP_Compound"]=wh;wh.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"];wh.prototype={__class__:wh};var ad=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=ad;ad.__name__=["zpp_nape","util","ZNPNode_ZPP_Arbiter"];ad.prototype={__class__:ad};var kc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=kc;kc.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"];kc.prototype={__class__:kc};var Zc=function(){this.next=
this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_CbSet"]=Zc;Zc.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"];Zc.prototype={__class__:Zc};var Yc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Interactor"]=Yc;Yc.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"];Yc.prototype={__class__:Yc};var Wc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=Wc;Wc.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"];Wc.prototype={__class__:Wc};var bd=function(){this.next=
this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=bd;bd.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"];bd.prototype={__class__:bd};var Xc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=Xc;Xc.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"];Xc.prototype={__class__:Xc};var qc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=qc;qc.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"];qc.prototype={__class__:qc};
var eb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Vec2"]=eb;eb.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"];eb.prototype={__class__:eb};var Lb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Edge"]=Lb;Lb.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"];Lb.prototype={__class__:Lb};var ie=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_AABBNode"]=ie;ie.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBNode"];ie.prototype={__class__:ie};var we=function(){this.next=
this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Component"]=we;we.__name__=["zpp_nape","util","ZNPNode_ZPP_Component"];we.prototype={__class__:we};var gk=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=gk;gk.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"];gk.prototype={__class__:gk};var Mb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=Mb;Mb.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"];Mb.prototype={__class__:Mb};
var Nb=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=Nb;Nb.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"];Nb.prototype={__class__:Nb};var Wd=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=Wd;Wd.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"];Wd.prototype={__class__:Wd};var $b=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_Listener"]=$b;$b.__name__=["zpp_nape","util","ZNPNode_ZPP_Listener"];$b.prototype=
{__class__:$b};var Fc=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=Fc;Fc.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"];Fc.prototype={__class__:Fc};var hk=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ConvexResult"]=hk;hk.__name__=["zpp_nape","util","ZNPNode_ConvexResult"];hk.prototype={__class__:hk};var ik=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=ik;ik.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"];ik.prototype=
{__class__:ik};var jf=function(){this.next=this.elt=null};h["zpp_nape.util.ZNPNode_RayResult"]=jf;jf.__name__=["zpp_nape","util","ZNPNode_RayResult"];jf.prototype={__class__:jf};var hf=function(){this.at_index=0;this.at_ite=null;this.zip_length=!1;this._length=0;this.inner=null;Pd.call(this);this.at_ite=null;this.at_index=0;this.zip_length=!0;this._length=0};h["zpp_nape.util.ZPP_MixVec2List"]=hf;hf.__name__=["zpp_nape","util","ZPP_MixVec2List"];hf.get=function(a,b){null==b&&(b=!1);var c=new hf;c.inner=
a;c.zpp_inner.immutable=b;return c};hf.__super__=Pd;hf.prototype=y(Pd.prototype,{zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;for(var a=this.inner.next;null!=a;)this._length++,a=a.next;this.zip_length=!1}return this._length},zpp_vm:function(){this.zpp_inner.validate();this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.at_index||null==this.at_ite){this.at_index=0;
for(this.at_ite=this.inner.next;;)break}for(;this.at_index!=a;){this.at_index++;for(this.at_ite=this.at_ite.next;;)break}return this.at_ite.wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.inner.add(a.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},
__class__:hf});var Od=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Fd;this._invalidated=!0};h["zpp_nape.util.ZPP_ConstraintList"]=Od;Od.__name__=["zpp_nape","util","ZPP_ConstraintList"];Od.get=function(a,b){null==b&&(b=!1);var c=new li;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=
!0);c.zpp_inner.zip_length=!0;return c};Od.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Od};var Rd=function(){this.user_length=
0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new ve;this._invalidated=!0};h["zpp_nape.util.ZPP_BodyList"]=Rd;Rd.__name__=["zpp_nape","util","ZPP_BodyList"];Rd.get=function(a,b){null==b&&(b=!1);var c=new ti;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};
Rd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Rd};var Nf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=
null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_InteractorList"]=Nf;Nf.__name__=["zpp_nape","util","ZPP_InteractorList"];Nf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Nf};
var Zd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new th;this._invalidated=!0};h["zpp_nape.util.ZPP_CompoundList"]=Zd;Zd.__name__=["zpp_nape","util","ZPP_CompoundList"];Zd.get=function(a,b){null==b&&(b=!1);var c=new vi;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=
!0;return c};Zd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Zd};var id=function(){this.user_length=0;this.zip_length=!1;this.at_ite=
this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new vh;this._invalidated=!0};h["zpp_nape.util.ZPP_ListenerList"]=id;id.__name__=["zpp_nape","util","ZPP_ListenerList"];id.get=function(a,b){null==b&&(b=!1);var c=new ji;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};id.prototype={valmod:function(){this.validate();
this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:id};var hd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=
!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Ed;this._invalidated=!0};h["zpp_nape.util.ZPP_CbTypeList"]=hd;hd.__name__=["zpp_nape","util","ZPP_CbTypeList"];hd.get=function(a,b){null==b&&(b=!1);var c=new Fg;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};hd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=
null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:hd};var Re=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=
this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new bg;this._invalidated=!0};h["zpp_nape.util.ZPP_Vec2List"]=Re;Re.__name__=["zpp_nape","util","ZPP_Vec2List"];Re.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&
this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Re};var Jf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_GeomPolyList"]=Jf;Jf.__name__=["zpp_nape","util","ZPP_GeomPolyList"];Jf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=
null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Jf};var Qe=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.outer=this.inner=null;this.inner=new xj;this._invalidated=!0};h["zpp_nape.util.ZPP_RayResultList"]=Qe;Qe.__name__=["zpp_nape",
"util","ZPP_RayResultList"];Qe.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Qe};var If=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;
this.inner=null};h["zpp_nape.util.ZPP_ConvexResultList"]=If;If.__name__=["zpp_nape","util","ZPP_ConvexResultList"];If.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:If};var Of=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=
null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_EdgeList"]=Of;Of.__name__=["zpp_nape","util","ZPP_EdgeList"];Of.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Of};var Uc=function(){this.user_length=
0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new ef;this._invalidated=!0};h["zpp_nape.util.ZPP_ShapeList"]=Uc;Uc.__name__=["zpp_nape","util","ZPP_ShapeList"];Uc.get=function(a,b){null==b&&(b=!1);var c=new xi;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};
Uc.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Uc};var Hf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=
null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_InteractionGroupList"]=Hf;Hf.__name__=["zpp_nape","util","ZPP_InteractionGroupList"];Hf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},
__class__:Hf};var Mc=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new cg;this._invalidated=!0};h["zpp_nape.util.ZPP_ArbiterList"]=Mc;Mc.__name__=["zpp_nape","util","ZPP_ArbiterList"];Mc.get=function(a,b){null==b&&(b=!1);var c=new mi;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Mc.prototype={valmod:function(){this.validate();
this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Mc};var Gf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};h["zpp_nape.util.ZPP_ContactList"]=Gf;Gf.__name__=["zpp_nape",
"util","ZPP_ContactList"];Gf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Gf};var ag=function(){};h["zpp_nape.util.ZPP_Math"]=ag;ag.__name__=["zpp_nape","util","ZPP_Math"];ag.sqr=function(a){return a*a};var Kf=function(){};h["zpp_nape.util.ZPP_PubPool"]=
Kf;Kf.__name__=["zpp_nape","util","ZPP_PubPool"];var Ha=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};h["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=Ha;Ha.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"];Ha.prototype={clear_with:function(a){if(null!=this.parent){for(var b=this.parent;null!=b;)b=null!=b.prev?b.prev:null!=b.next?b.next:this.clear_node(b,a);this.parent=null}},clear_node:function(a,b){b(a.data);var c=a.parent;null!=c&&(a==c.prev?c.prev=null:
c.next=null,a.parent=null);a.data=null;a.lt=null;a.swapped=null;a.next=Ha.zpp_pool;Ha.zpp_pool=a;return c},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,h,i,j,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,h=a.prev,i=a.next,j=b.next):(d=b,e=a,h=b.prev,i=a.prev,j=a.next)):(d=c,h=c.prev,a==b.prev?(e=a,f=b,i=a.prev,j=a.next,k=b.next):(e=b,f=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=
a);d.prev=h;null!=h&&(h.parent=d);d.next=i;null!=i&&(i.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=j;null!=j&&(j.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},try_insert:function(a){var b=null,c=null;if(null==this.parent)null==Ha.zpp_pool?b=new Ha:(b=Ha.zpp_pool,Ha.zpp_pool=b.next,b.next=null),null,b.data=a,this.parent=b;else for(c=
this.parent;;)if(this.lt(a,c.data))if(null==c.prev){null==Ha.zpp_pool?b=new Ha:(b=Ha.zpp_pool,Ha.zpp_pool=b.next,b.next=null);null;b.data=a;c.prev=b;b.parent=c;break}else c=c.prev;else if(this.lt(c.data,a))if(null==c.next){null==Ha.zpp_pool?b=new Ha:(b=Ha.zpp_pool,Ha.zpp_pool=b.next,b.next=null);null;b.data=a;c.next=b;b.parent=c;break}else c=c.next;else break;if(null==b)return c;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:Ha};var pc=function(){this.colour=
0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};h["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=pc;pc.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSet"];pc.prototype={empty:function(){return null==this.parent},find:function(a){for(var b=this.parent;null!=b&&b.data!=a;)b=this.lt(a,b.data)?b.prev:b.next;return b},find_weak:function(a){for(var b=this.parent;null!=b;)if(this.lt(a,b.data))b=b.prev;else if(this.lt(b.data,a))b=b.next;else break;return b},remove:function(a){this.remove_node(this.find(a))},
remove_node:function(a){if(null!=a.next&&null!=a.prev){for(var b=a.next;null!=b.prev;)b=b.prev;var c=a.data;a.data=b.data;b.data=c;null!=this.swapped&&this.swapped(a.data,b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var d=c.prev;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=
d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}d=c.next;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=a.next=null;a.data=null;a.lt=null;a.swapped=null;a.next=
pc.zpp_pool;pc.zpp_pool=a},__fix_neg_red:function(a){var b=a.parent;if(b.prev==a){var c=a.prev,d=a.next,e=d.prev,f=d.next;c.colour=0;a.colour=b.colour=1;a.next=e;null!=e&&(e.parent=a);a=b.data;b.data=d.data;d.data=a;null!=this.swapped&&this.swapped(b.data,d.data);d.prev=f;null!=f&&(f.parent=d);d.next=b.next;null!=b.next&&(b.next.parent=d);b.next=d}else c=a.next,d=a.prev,e=d.next,f=d.prev,c.colour=0,a.colour=b.colour=1,a.prev=e,null!=e&&(e.parent=a),a=b.data,b.data=d.data,d.data=a,null!=this.swapped&&
this.swapped(b.data,d.data),d.next=f,null!=f&&(f.parent=d),d.prev=b.prev,null!=b.prev&&(b.prev.parent=d),b.prev=d;null!=d&&(d.parent=b);b=c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,h,i,j,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,h=a.prev,i=a.next,j=b.next):(d=b,e=a,h=b.prev,i=a.prev,j=a.next)):(d=c,h=c.prev,a==b.prev?(e=
a,f=b,i=a.prev,j=a.next,k=b.next):(e=b,f=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=a);d.prev=h;null!=h&&(h.parent=d);d.next=i;null!=i&&(i.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=j;null!=j&&(j.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},insert:function(a){var b;
null==pc.zpp_pool?b=new pc:(b=pc.zpp_pool,pc.zpp_pool=b.next,b.next=null);null;b.data=a;if(null==this.parent)this.parent=b;else for(a=this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:pc};var lk,rk=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=
Number.POSITIVE_INFINITY;h.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=h.String=String;String.__name__=["String"];h.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=h.Date=Date;Date.__name__=["Date"];var Df=h.Int={__name__:["Int"]},sk=h.Dynamic={__name__:["Dynamic"]},X=h.Float=Number;X.__name__=["Float"];var Dg=h.Bool=Boolean;Dg.__ename__=["Bool"];var tk=h.Class={__name__:["Class"]},uk={};R.Element="element";
R.PCData="pcdata";R.CData="cdata";R.Comment="comment";R.DocType="doctype";R.ProcessingInstruction="processingInstruction";R.Document="document";L.eventUpdate=Gc._new();oa.STAGE_WIDTH=960;oa.STAGE_CENTER_X=480;u.flow=Gc._new();u.resizeCanvas=Gc._new();u.updateDisplay=Gc._new();u.pause=Gc._new();u.initialLoadComplete=Sa._new();u.worldGenerationComplete=Sa._new();u.cornCarePopup=Sa._new();u.cornCareClose=Sa._new();u.dressUpLeftClick=Sa._new();u.dressUpRightClick=Sa._new();u.takingOrdersNextCustomer=
Sa._new();u.takingOrdersPlayReact=Gc._new();u.takingOrdersPlayKelAnim=Gc._new();u.foodStackBlockClear=sf._new();u.introSceneOver=Sa._new();u.goodInput=Sa._new();u.transitionOpen=Sa._new();Ab.instance=new Ab;ua.DISPATCHING_SENTINEL=new Ge(null,null);I.root=new jg;I.uncaughtError=new Ea;I.hidden=new Pb(!1);I.volume=new Qb(1);I._platform=Ab.instance;I._calledInit=!1;Rb.__meta__={obj:{assets:[{fonts_en_simple:[{bytes:12013,md5:"06e9f4b766bf42c251c3d191c28238ee",name:"Basic.fnt"},{bytes:25257,md5:"034fe85abbf076e79ca3ea09f73ddb6b",
name:"Basic.png"}],initial_audio_required:[{bytes:37636,md5:"e4d8c5bc50b6476d1b978d13636bf6c7",name:"game.ogg"},{bytes:35252,md5:"36cdf512970d5d6a2b8b1d195709af28",name:"game.mp3"}],gameplay_audio_required:[{bytes:3909,md5:"60467ccf774994edd20e233cdff0277b",name:"placeholder_silent.ogg"},{bytes:729,md5:"28b5396136787445c5431da3b996f654",name:"placeholder_silent.mp3"}],gameplay_universal:[{bytes:8897,md5:"82f9d14a8834757b847e11f9bdaa790e",name:"soda_machine_data_level_3.xml"},{bytes:74252,md5:"8ffaeaffefb74714e0164eef30c1e752",
name:"soda_machine/soda_light_effects.png"},{bytes:99491,md5:"0cda31c182a028d25057f827d47ea960",name:"soda_machine/Devine.mp3"},{bytes:74827,md5:"d00966c541c4a31f84797fb9d5cd9547",name:"soda_machine/soda_light_effects.json"},{bytes:150128,md5:"c09b15248b37baf7fb825206b2ad45b0",name:"soda_machine/Beastmode.ogg"},{bytes:124755,md5:"ec7dd777b84995aa003d65f79f0801d3",name:"soda_machine/GetUp.mp3"},{bytes:1332,md5:"ec6d56d67e83bcba7b8f20a1b47c8b35",name:"soda_machine/soda_light_effects.atlas"},{bytes:143847,
md5:"779ee963e87fc61f903f272a903baa21",name:"soda_machine/Beastmode.mp3"},{bytes:132789,md5:"a42d1c47c9aee6939f4855e177c0e858",name:"soda_machine/GetUp.ogg"},{bytes:99364,md5:"543cce6c21dc75b972451613ba31506a",name:"soda_machine/Devine.ogg"},{bytes:91168,md5:"4f45d5429246cbcdd36d7f0dcbf673cb",name:"soda_machine/bg_soda.jpg"},{bytes:4550,md5:"12ad79f3e3073f477ec93e5e22b5093d",name:"soda_machine_data_level_2.xml"},{bytes:6074,md5:"5374afd79b5986a58a3a2a110d1e7b7e",name:"kel.atlas"},{bytes:4146,md5:"ab793d8c685acb8e8b034905fcb1c3dd",
name:"soda_machine_data_level_1.xml"},{bytes:1487,md5:"fcf81ce80cc7fa560eb01430f437bed5",name:"tutorial_hand.atlas"},{bytes:55667,md5:"67699f724267d40362ac16d7167f22cb",name:"kel.png"},{bytes:4947,md5:"aca9e9a623cbb588776f9950b3717647",name:"taking_orders/customer_order_action_01.mp3"},{bytes:3854,md5:"178b5ba9e0352ba82358e58cfdece2dc",name:"taking_orders/customer_order_action_alt02.mp3"},{bytes:6283,md5:"1e39cf010da71085f16fbcb611dc7c88",name:"taking_orders/customer_order_action02.ogg"},{bytes:4095,
md5:"840ec4945749a4514da4cbb9e003da7c",name:"taking_orders/rustling_02.mp3"},{bytes:4986,md5:"d45dc5d117af07a44861a01d5a0875d7",name:"taking_orders/customer_order_action03.ogg"},{bytes:5990,md5:"66290aaa68e3f0a9eb42b56acd743b62",name:"taking_orders/rustling_01.mp3"},{bytes:130614,md5:"ca83a8656f760e1f8611fd219aaa532b",name:"taking_orders/spine/gb_characters.png"},{bytes:5512,md5:"a19cf29baabc497e73e0be70f7aeb4d0",name:"taking_orders/spine/gb_characters.atlas"},{bytes:40858,md5:"8e08a610599b966e6a0fe9be8db0d295",
name:"taking_orders/spine/gb_characters.json"},{bytes:99199,md5:"e6216caa4617d2234143f137a0ffcbf5",name:"taking_orders/spine/gb_characters3.png"},{bytes:97198,md5:"e533604e0c50742a832d20244428b4a4",name:"taking_orders/spine/gb_characters2.png"},{bytes:20217,md5:"5ed1e313720aea12e52b19e04cf9f273",name:"taking_orders/spine/taking_orders_kel2.png"},{bytes:70048,md5:"bcb2445167caa4280eedeb36f9db882e",name:"taking_orders/spine/gb_characters6.png"},{bytes:62827,md5:"44a2fc93ce7ac2653b4223ef9676802e",name:"taking_orders/spine/gb_characters7.png"},
{bytes:96618,md5:"285ab7cb60a6b54c0adf9d2bc7097f4d",name:"taking_orders/spine/taking_orders_kel.json"},{bytes:86232,md5:"ea6ea7b7498beb50573215fded3ad965",name:"taking_orders/spine/gb_characters5.png"},{bytes:111104,md5:"fe6355aa0f74c5e866492eb55a11ca28",name:"taking_orders/spine/gb_characters4.png"},{bytes:5686,md5:"d634703cbf8078281884d0312eb53a71",name:"taking_orders/spine/taking_orders_kel.atlas"},{bytes:117370,md5:"88a995c18e466dc53a25b928584e76cb",name:"taking_orders/spine/taking_orders_kel.png"},
{bytes:57309,md5:"9a3676a1eaca1fd31eebc11591327d3a",name:"taking_orders/taking_orders_bg.jpg"},{bytes:4595,md5:"483a1d319c681795c9b62d715fe6127c",name:"taking_orders/cornsnore.mp3"},{bytes:5566,md5:"18c458a9d8cf6ccbfc30fafe8f4aa679",name:"taking_orders/customer_order_action_alt.ogg"},{bytes:10316,md5:"3ceb4fad26682478471c2bd993d86760",name:"taking_orders/rustling_01.ogg"},{bytes:3602,md5:"262244ad7f8ab10c9c1f9a5fe3ec8080",name:"taking_orders/customer_order_action02.mp3"},{bytes:7292,md5:"0d160b4b2240ce67c22db223df32d7c0",
name:"taking_orders/rustling_02.ogg"},{bytes:2058,md5:"eabac3f854300a28c0c859eab628749b",name:"taking_orders/customer_order_action03.mp3"},{bytes:28011,md5:"e2b9ab9f94812b7d56a4a5761aba95f1",name:"taking_orders/customer_order_action_01.ogg"},{bytes:7196,md5:"caa2529a44866501923cac6626fa83b1",name:"taking_orders/customer_order_action_alt02.ogg"},{bytes:2760,md5:"ba07bf4ef7dcddf6ccd5ad6f0339a39c",name:"taking_orders/customer_order_action_alt.mp3"},{bytes:7901,md5:"c8ced41d84c5a2ad7ac83c64803ea26a",
name:"taking_orders/cornsnore.ogg"},{bytes:5123,md5:"7b9c48bb304b1d48c3eab58520403824",name:"dressup/party_horn_confetti.mp3"},{bytes:156329,md5:"209550699815d66488abaeda41dbe4b4",name:"dressup/bg_dressup.png"},{bytes:7303,md5:"48869aab898d3b38e981e1f2b4a74941",name:"dressup/party_horn_confetti.ogg"},{bytes:47197,md5:"417a6f1e57ca72ffca661039fc320b30",name:"kel.json"},{bytes:6322,md5:"dc6411c23c5be19ac86eb6c7468b7fb4",name:"corn_care/spray_bottle_corn_bath.ogg"},{bytes:5157,md5:"f43f613c6cc8c1c6ecb227cd4cd08cf7",
name:"corn_care/snoring_corn_tired.mp3"},{bytes:9044,md5:"6d8e68b6995717e63744ebca5ccdae94",name:"corn_care/growling_corn_hungry.mp3"},{bytes:53368,md5:"3ac8e9a1128866008f01cdadde9bfa40",name:"corn_care/bg_corncare.png"},{bytes:2159,md5:"9e3e745941351e8d40882d6835eca856",name:"corn_care/ball_bouncing_corn_play.mp3"},{bytes:5254,md5:"228a570482de964afa8e8a7e0844ea51",name:"corn_care/corntime.mp3"},{bytes:7747,md5:"781bcdecac4106b4dc3d38ca446d0bc8",name:"corn_care/growling_corn_hungry.ogg"},{bytes:9474,
md5:"c6b336f555fc30719dfc3d2e6f842823",name:"corn_care/snoring_corn_tired.ogg"},{bytes:2863,md5:"fcfcca746a076d995a779927508c3367",name:"corn_care/spray_bottle_corn_bath.mp3"},{bytes:6926,md5:"fbf6224204bd599a2cffac7b3f4eea2e",name:"corn_care/corntime.ogg"},{bytes:5352,md5:"b865d9615fb19c5e8d26cf23f6ffdd19",name:"corn_care/ball_bouncing_corn_play.ogg"},{bytes:4871,md5:"bab79dccb0002405703f026f103b3694",name:"foodstack/frozen_uh_boot.ogg"},{bytes:5063,md5:"7cd44f873eb90fe84b81d8d6755b6a6f",name:"foodstack/frozen_veggie_drop.ogg"},
{bytes:3410,md5:"c006496fb9626ed1a2d1885bf3e3b587",name:"foodstack/frozen_patties.mp3"},{bytes:4871,md5:"549b45bb7de626b24b9688f4ce6eb4a7",name:"foodstack/frozen_wood_pallet.ogg"},{bytes:1813,md5:"b1fdec3f4c0e1868ff9ee27548a80c81",name:"foodstack/frozen_wood_pallet.mp3"},{bytes:1942,md5:"1a6186d0d7703f4b74602343ee567f08",name:"foodstack/frozen_uh_boot.mp3"},{bytes:1603,md5:"cdf11a65033159799ee63870489bc2b9",name:"foodstack/frozen_veggie_drop.mp3"},{bytes:6791,md5:"d40bea375109e7c3baaddf13d2ac9876",
name:"foodstack/frozen_patties.ogg"},{bytes:1873,md5:"e4e147b87d55fcc2e2b1553940fc2122",name:"sfx/glass_wiping.mp3"},{bytes:111604,md5:"59df9642b3b4fa89b68cb70f4fe8ace6",name:"sfx/happy-music.ogg"},{bytes:1171,md5:"119249b6b22e68b2a125a5a03e179e9f",name:"sfx/pop_03.mp3"},{bytes:3618,md5:"a3d1053ab0217dd5a6e90fc5badc229e",name:"sfx/impact_01.mp3"},{bytes:989,md5:"02856b1ba183879e931630b7d48af372",name:"sfx/pop_02.mp3"},{bytes:4519,md5:"99bfe0c4565b789786e3f66bbe1f507e",name:"sfx/arm_swipe.ogg"},{bytes:5178,
md5:"41615cd9bc855a6a26cbb0ec88734166",name:"sfx/impact_02.mp3"},{bytes:1768,md5:"0c4c7cc811f9bc85dc4d3cb5e15c031a",name:"sfx/pop_01.mp3"},{bytes:5001,md5:"abda2ba1c4f489053e60032fe8e538be",name:"sfx/glass_wiping.ogg"},{bytes:1551,md5:"65a7117c0fdd7c66beef839c1ceef0e3",name:"sfx/arm_swipe.mp3"},{bytes:7812,md5:"646a124eef1a9f67c2509dfa03e7d049",name:"sfx/impact_02.ogg"},{bytes:5378,md5:"99258fbd70eaa67b129762d578e62512",name:"sfx/pop_01.ogg"},{bytes:3973,md5:"8f8dbb5ba9f642165795525f36c86972",name:"sfx/pop_03.ogg"},
{bytes:6587,md5:"6fbf8d3f34254b4bc09dd6419e31aa31",name:"sfx/impact_01.ogg"},{bytes:3888,md5:"33e45723b8ba1321196f0f7dd81f109e",name:"sfx/pop_02.ogg"},{bytes:106027,md5:"95c83bd478e59f231c623bba08713fcf",name:"sfx/happy-music.mp3"},{bytes:5820,md5:"891c927c16419d94a94ce5a62c6bfac6",name:"intro_ending/minigame_results_down.ogg"},{bytes:5780,md5:"bce7fbe82864f616188f1d40cddd298e",name:"intro_ending/minigame_results_waylow.ogg"},{bytes:5656,md5:"2b0ad664dffeaa1bad84222b080532b5",name:"intro_ending/minigame_results_up.ogg"},
{bytes:5792,md5:"5091e21f0362a08fabaa43f7cb673bda",name:"intro_ending/minigame_results_mid.ogg"},{bytes:2717,md5:"dd0a09025940f42c6eb6a65840f196b3",name:"intro_ending/minigame_results_waylow.mp3"},{bytes:2432,md5:"4218c3ae7f92826ccb7bc6c008d5d0fd",name:"intro_ending/minigame_results_up.mp3"},{bytes:2847,md5:"6720b5e05d35f68665b8c83b361689f4",name:"intro_ending/minigame_results_down.mp3"},{bytes:2614,md5:"30db59093fb3cda87306307e8478b71a",name:"intro_ending/minigame_results_mid.mp3"},{bytes:60218,
md5:"56309f24859583ffa39c7319e2643e3d",name:"intro_ending/bg_interstitial.jpg"},{bytes:33083,md5:"70c5b2a112ae4097f3e633fe9fd37f8b",name:"gameplay_universal.atlas"},{bytes:137550,md5:"1fc884cd6b60ded84b28bd491dc7626f",name:"gameplay_universal-5.png"},{bytes:24970,md5:"3e6f74def019fd9fc32ec534fb552936",name:"tutorial_hand.json"},{bytes:200472,md5:"0b1d694d4993daf0fd669e54436c7a16",name:"gameplay_universal-4.png"},{bytes:161151,md5:"70ea7e62e654f1bd4f451d9e911558cb",name:"gameplay_universal-6.png"},
{bytes:194224,md5:"874cd27bcc6734706df627d6d1b554a8",name:"tutorial_hand.png"},{bytes:39168,md5:"c1e850ccb7ecbee6805319bd9f9cce0b",name:"gameplay_universal-7.png"},{bytes:87688,md5:"fd25dc1661ba31b092b617a6664eebc5",name:"gameplay_universal-3.png"},{bytes:1707,md5:"42a8cb195397cd9106fd4e30ef266407",name:"fling/tray_launch.mp3"},{bytes:58282,md5:"b7c2f8f49d7dd216198b649d8131a1f5",name:"fling/bg_fling.jpg"},{bytes:1396,md5:"bee4aff3de4b736fa4b0849c1d78ab96",name:"fling/tray_launch_alt.mp3"},{bytes:5941,
md5:"fc557e148703886cf630e2afe45309cf",name:"fling/arm_pull_1.ogg"},{bytes:5949,md5:"7c53612f9764ac603ba761367b4cd823",name:"fling/arm_pull_3.ogg"},{bytes:6042,md5:"831e20827d0ba8e3ebaf0fa1bdaf9001",name:"fling/arm_pull_2.ogg"},{bytes:6490,md5:"5f8fe86c8aeb78f30f8d74ad1934ec07",name:"fling/lunch_tray_hit.ogg"},{bytes:5749,md5:"479055e326c76d1a95bebdd30db29e91",name:"fling/arm_pull_5.ogg"},{bytes:6380,md5:"c7a051c5ab591a854d9976453d03cacf",name:"fling/lunch_tray_hit_alt.ogg"},{bytes:5830,md5:"f6c0fc91b8296e45e60022eb678b02ba",
name:"fling/arm_pull_4.ogg"},{bytes:4415,md5:"ab2c3442cda4ec612fde2f431fecb5ea",name:"fling/tray_launch_alt.ogg"},{bytes:52775,md5:"9c7d83dd288cf30eb8cb61ae1b41e00b",name:"fling/bg_fling2.jpg"},{bytes:4805,md5:"ad9903bbcaa10fe5ce6121a5549298e2",name:"fling/tray_launch.ogg"},{bytes:2446,md5:"b3115d97a2242f16e7cede795c899818",name:"fling/arm_pull_5.mp3"},{bytes:3375,md5:"c2dcdd19338d7ce1bdcc211795e7278d",name:"fling/lunch_tray_hit.mp3"},{bytes:3471,md5:"15690569f5be29edcb8a2cf733a46337",name:"fling/lunch_tray_hit_alt.mp3"},
{bytes:2447,md5:"14ea8def684b6766bc26fa40abd267b6",name:"fling/arm_pull_4.mp3"},{bytes:2524,md5:"d6dd745d39ba47efc0728ff0ad495658",name:"fling/arm_pull_3.mp3"},{bytes:2992,md5:"efd41f980384db955cbdb77b7cbd011d",name:"fling/arm_pull_2.mp3"},{bytes:2680,md5:"275d4edefccbe1f024778c0c5444a7a4",name:"fling/arm_pull_1.mp3"},{bytes:104784,md5:"2bf689717cfce86afc1484b57fbbbf14",name:"gameplay_universal-2.png"},{bytes:82436,md5:"1e6ff1991daf188c71116be210a2e69a",name:"gameplay_universal-0.png"},{bytes:311767,
md5:"cd2839ca765226ba9d5a475b2f0315c0",name:"gameplay_universal-1.png"},{bytes:1807,md5:"be68e1b9d18abd865084feb9dfca3b1a",name:"pause_screen/button_click_01.mp3"},{bytes:2457,md5:"fbce96c739adc573d7113ca673cf7b06",name:"pause_screen/button_click_02.mp3"},{bytes:5186,md5:"a65082bad65098395a6649e6c754364f",name:"pause_screen/button_click_02.ogg"},{bytes:5097,md5:"b89a894493662c2256092748eb6d6e73",name:"pause_screen/button_click_01.ogg"}],initial_universal:[{bytes:6608,md5:"9e89bc072b0fb1d2d579d351150fb373",
name:"splat_01.ogg"},{bytes:8390,md5:"9a21b8d7d5ee9376204faad375e12dbd",name:"splat_02.ogg"},{bytes:6080,md5:"6166d28c99b8c9501a9f3fbed0c337b4",name:"splat_03.ogg"},{bytes:5059,md5:"a1e72610f29d5a1d1c2c37f9a92e6b5d",name:"splat_02.mp3"},{bytes:2771,md5:"b92eb0d66281ccd4510dee4031e1f1a4",name:"splat_03.mp3"},{bytes:3310,md5:"6dd8f5dfe0cbaaa11267b55fde9f32ef",name:"splat_01.mp3"},{bytes:1912,md5:"a02ab7d21c8c7d47ac391300851c4bdc",name:"transition.atlas"},{bytes:814020,md5:"caf4cbfe49aae02ae880c4ff3e108ee1",
name:"transition.png"},{bytes:76295,md5:"b4e3c030407026d6d328a36ea1ad2c1e",name:"transition2.png"},{bytes:53022,md5:"aa06a0b3e50a03b756aedade97eb8acb",name:"transition.json"}],bootstrap:[{bytes:10340,md5:"d557340d23de3113712878f49cb94f21",name:"ui/splash/reese_splash.png"},{bytes:171804,md5:"024986cd6920a640d3e277e46bedcac5",name:"ui/splash/splash.jpg"},{bytes:89015,md5:"706620cd56d7851575941fe4afb62f05",name:"ui/splash/logo.png"},{bytes:10037,md5:"2839a039c3ed4ec41c20f1ca64e8aa8b",name:"ui/splash/nathan_splash.png"},
{bytes:22493,md5:"3399e081ac54fd539301321a3d042bb3",name:"ui/splash/kel_splash.png"},{bytes:429,md5:"279e53fdb2b5e300f953784865d2fe35",name:"config/config.xml"},{bytes:3909,md5:"ae73ff6bc2418d292fe81804c09b7881",name:"audio/silent.ogg"},{bytes:729,md5:"28b5396136787445c5431da3b996f654",name:"audio/silent.mp3"}],fonts_ru:[{bytes:58549,md5:"eeeb13dfea4da4d6e01e514bf2eda165",name:"arial_white_cyrillic.fnt"},{bytes:29241,md5:"7feb84bb039262cd5f2eb0168d1379a7",name:"translation.xml"},{bytes:76904,md5:"92dcdfa17d81b2b7e598cbc03a6e6d74",
name:"arial_white_cyrillic.png"},{bytes:74464,md5:"417b1b95ea8904616f036016aecee241",name:"arial_black_cyrillic.png"},{bytes:50679,md5:"e3f784a114bc0d7a9abbce40eb9e474f",name:"arial_black_cyrillic.fnt"}],fonts_la:[{bytes:29658,md5:"b0208222bbccbdd25f2183f02dff676b",name:"translation.xml"},{bytes:74464,md5:"417b1b95ea8904616f036016aecee241",name:"arial_black_latin_extended.png"},{bytes:29882,md5:"a3af2c044eeedc0abb913e17b650c6e9",name:"arial_white.fnt"},{bytes:50685,md5:"e246ca50d5f699687d1bff9f88819b43",
name:"arial_black_latin_extended.fnt"},{bytes:60113,md5:"239cf0fb5f6973a9574ead10f7e66eab",name:"arial_white.png"}],fonts_kr:[{bytes:29658,md5:"b0208222bbccbdd25f2183f02dff676b",name:"translation.xml"},{bytes:74464,md5:"417b1b95ea8904616f036016aecee241",name:"arial_black_latin_extended.png"},{bytes:29882,md5:"a3af2c044eeedc0abb913e17b650c6e9",name:"arial_white.fnt"},{bytes:50685,md5:"e246ca50d5f699687d1bff9f88819b43",name:"arial_black_latin_extended.fnt"},{bytes:60113,md5:"239cf0fb5f6973a9574ead10f7e66eab",
name:"arial_white.png"}],fonts_jp:[{bytes:29658,md5:"b0208222bbccbdd25f2183f02dff676b",name:"translation.xml"},{bytes:74464,md5:"417b1b95ea8904616f036016aecee241",name:"arial_black_latin_extended.png"},{bytes:29882,md5:"a3af2c044eeedc0abb913e17b650c6e9",name:"arial_white.fnt"},{bytes:50685,md5:"e246ca50d5f699687d1bff9f88819b43",name:"arial_black_latin_extended.fnt"},{bytes:60113,md5:"239cf0fb5f6973a9574ead10f7e66eab",name:"arial_white.png"}],fonts_en:[{bytes:26900,md5:"de58bd0092df63114c820f492b5a28a3",
name:"translation.xml"},{bytes:31313,md5:"6f635e11930ce5d6524e766f9b3d7985",name:"skia.png"},{bytes:12217,md5:"aaa6c941dd15afc631c0788d44816eb8",name:"skia.fnt"},{bytes:20913,md5:"1a89f22546760836c58469c923d6db01",name:"Style.fnt"},{bytes:3437,md5:"816e410072bb09aff96c0e602adb6447",name:"Pixel_fnt.png"},{bytes:35203,md5:"a7e384a1d46e351cbf9a2d6809fe3085",name:"Style.png"},{bytes:12228,md5:"290ef9235e326561133d38f91189069e",name:"Pixel_fnt.fnt"}],fonts_cn:[{bytes:29658,md5:"b0208222bbccbdd25f2183f02dff676b",
name:"translation.xml"},{bytes:74464,md5:"417b1b95ea8904616f036016aecee241",name:"arial_black_latin_extended.png"},{bytes:29882,md5:"a3af2c044eeedc0abb913e17b650c6e9",name:"arial_white.fnt"},{bytes:50685,md5:"e246ca50d5f699687d1bff9f88819b43",name:"arial_black_latin_extended.fnt"},{bytes:60113,md5:"239cf0fb5f6973a9574ead10f7e66eab",name:"arial_white.png"}],temp:[]}]}};Rb._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;
a||null;return a}();cc.NEWLINE=new He(10);Ia._scratchPoint=new Md;Jc._sharedEvent=new Mh;Sb._sharedEvent=new Nh;jb._sharedEvent=new Oh;Fe.CANVAS_TEXTURES=(new rc("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);ja._mediaRefCount=0;ja._detectBlobSupport=!0;Y.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];Y.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new rc("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);va._detectSupport=!0;vc.USE_CACHE=!1;vc.USE_ENUM_INDEX=!1;vc.BASE64=
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Tb.DEFAULT_RESOLVER=xa;Tb.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Lc.count=0;Ic.escapes=function(){var a=new sa;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);Fj.allConfig=["config/config.xml"];t.epsilon=1.0E-8;t.fluidAngularDragFriction=2.5;t.fluidAngularDrag=100;t.fluidVacuumDrag=0.5;t.fluidLinearDrag=0.5;
t.collisionSlop=0.2;t.collisionSlopCCD=0.5;t.distanceThresholdCCD=0.05;t.staticCCDLinearThreshold=0.05;t.staticCCDAngularThreshold=0.005;t.bulletCCDLinearThreshold=0.125;t.bulletCCDAngularThreshold=0.0125;t.dynamicSweepLinearThreshold=17;t.dynamicSweepAngularThreshold=0.6;t.angularCCDSlipScale=0.75;t.arbiterExpirationDelay=6;t.staticFrictionThreshold=2;t.elasticThreshold=20;t.sleepDelay=60;t.linearSleepThreshold=0.2;t.angularSleepThreshold=0.4;t.contactBiasCoef=0.3;t.contactStaticBiasCoef=0.6;t.contactContinuousBiasCoef=
0.4;t.contactContinuousStaticBiasCoef=0.5;t.illConditionedThreshold=2E8;J._DEFAULT_LAYER="ui_default";J._DEBUG_SHOW_CLICKWALL=!1;V._timerId=0;Id.REACTION_TEXT_CHAR_DELAY=0.05;cd._BAR_WIDTH=200;cd._BAR_HEIGHT=25;cd._BAR_BACKING_COLOR=8947848;cd._BAR_COLOR=14492194;ea._scratchPoint=new Md;ea._DEBUG_SHOW_HITBOX=!1;ae.DIALOGUE_TEXT_CHAR_DELAY=0.05;o.eventLoadError=Sa._new();o._assets=new sa;o._packs=new sa;o._spritesheets=new sa;o._flump=new sa;o._customManifests=new sa;o._fontCache=new sa;o._requests=
[];o._loadQueue=[];o._manifestsLoaded=0;o._manifestsMax=0;o._flagBaseIsCrossdomain=!1;o._loadingProgress=0;o._loadingTotal=0;q._values=new sa;q._defaults=new sa;ia._pools=new sa;z.eventInput=sf._new();z.eventMouseWheel=Gc._new();z.eventKey=sf._new();z.leftStick=aa.request();z.rightStick=aa.request();z.pointer=new Rg(-1);z.multiTouch=[];z.enabled=!1;z._inputTrackers=[];z._virtualDown=[];z._controllerDown=[];ba._localizedData=new sa;ba.region="";A._seeds=new sa;m.eventVOStatus=Gc._new();m.subtitleQueue=
[];m._sound=[];m._voQueue=[];m._tween=new Ve;m._musicId="";m._stateVo=vb.STOPPED;m._musicGain=1;C._timers=[];C._uniqueInc=0;C._paused=!1;jd.NEWLINE=new He(10);Ud._BUTTON_BLANK_PIXELS=40;Ud._43_SIZE=746.6666666666666;Ud._169_SIZE=995.5555555555555;Ud._43_HALF=373.3333333333333;Ud._169_HALF=497.77777777777777;Ud._169_RENDER_WIDTH=124.44444444444446;fb.radDeg=180/Math.PI;fb.degRad=Math.PI/180;za.VERSION="3.2.00";za.ATLAS_FILE_TYPE=".atlas";za.FPS=30;je.eventFlowDelegate=sf._new();ra.WAKE=1;ra.PROPS=
2;ra.ANGDRAG=4;ra.ARBITERS=8;K._BLOCK_SIZE=56;K._DEBUG_SHOW_HITBOX=!1;K.polyMat=new $d(0.2,0.5,0.5,1,0.5);Cd._DEBUG_SHOW_HITBOX=!1;Cd.polyMat=new $d(0.2,0.5,0.5,1,0.5);hc._DEBUG_SHOW_HITBOX=!1;hc.polyMat=new $d(0.2,0.5,0.5,1,0.5);fe.MOVE_TIME_MAX=0.5;fe.TAP_TIMING_WINDOW=0.15;fe.INIT_SCALE=0.75;Gb._blueAnim="soda_machine/cola_splash_12,soda_machine/cola_splash_11,soda_machine/cola_splash_10,soda_machine/cola_splash_9,soda_machine/cola_splash_8,soda_machine/cola_splash_7,soda_machine/cola_splash_6,soda_machine/cola_splash_5,soda_machine/cola_splash_4,soda_machine/cola_splash_3,soda_machine/cola_splash_2,soda_machine/cola_splash_1".split(",");
Gb._greenAnim="soda_machine/green_splash_12,soda_machine/green_splash_11,soda_machine/green_splash_10,soda_machine/green_splash_9,soda_machine/green_splash_8,soda_machine/green_splash_7,soda_machine/green_splash_6,soda_machine/green_splash_5,soda_machine/green_splash_4,soda_machine/green_splash_3,soda_machine/green_splash_2,soda_machine/green_splash_1".split(",");Gb._pinkAnim="soda_machine/cherry_splash_12,soda_machine/cherry_splash_11,soda_machine/cherry_splash_10,soda_machine/cherry_splash_9,soda_machine/cherry_splash_8,soda_machine/cherry_splash_7,soda_machine/cherry_splash_6,soda_machine/cherry_splash_5,soda_machine/cherry_splash_4,soda_machine/cherry_splash_3,soda_machine/cherry_splash_2,soda_machine/cherry_splash_1".split(",");
Gb.DUR_EACH_FRAME=0.05;S._colaIndex=0;S._greenIndex=0;S._pinkIndex=0;S._colaAnim=["soda_machine/soda_tile_cola_1","soda_machine/soda_tile_cola_2","soda_machine/soda_tile_cola_3"];S._greenAnim=["soda_machine/soda_tile_green_1","soda_machine/soda_tile_green_2","soda_machine/soda_tile_green_3"];S._pinkAnim=["soda_machine/soda_tile_red_1","soda_machine/soda_tile_red_2","soda_machine/soda_tile_red_3"];S.MOVE_TIME_MAX=0.35;jc._BLOCK_SIZE=56;jc._DEBUG_SHOW_HITBOX=!1;jc.polyMat=new $d(0,0.1,0.1,1,0);le._GRAVITY=
new l(0,800);Hc._GRAVITY=new l(0,400);Hc._DROP_SPEED=125;Hb._Interactor=0;Hb._CbType=0;Hb._CbSet=0;Hb._Listener=0;gb.ANY_SHAPE=new Ma;gb.ANY_BODY=new Ma;gb.ANY_COMPOUND=new Ma;gb.ANY_CONSTRAINT=new Ma;f.internal=!1;f.id_ImmState_ACCEPT=1;f.id_ImmState_IGNORE=2;f.id_ImmState_ALWAYS=4;f.id_GravMassMode_DEFAULT=0;f.id_GravMassMode_FIXED=1;f.id_GravMassMode_SCALED=2;f.id_InertiaMode_DEFAULT=0;f.id_MassMode_DEFAULT=0;f.id_MassMode_FIXED=1;f.id_BodyType_STATIC=1;f.id_BodyType_DYNAMIC=2;f.id_BodyType_KINEMATIC=
3;f.id_ListenerType_BODY=0;f.id_PreFlag_ACCEPT=1;f.id_ListenerType_CONSTRAINT=1;f.id_ListenerType_INTERACTION=2;f.id_ListenerType_PRE=3;f.id_CbEvent_BEGIN=0;f.id_InteractionType_COLLISION=1;f.id_CbEvent_ONGOING=6;f.id_InteractionType_SENSOR=2;f.id_CbEvent_END=1;f.id_InteractionType_FLUID=4;f.id_CbEvent_WAKE=2;f.id_InteractionType_ANY=7;f.id_CbEvent_SLEEP=3;f.id_CbEvent_BREAK=4;f.id_CbEvent_PRE=5;f.id_ShapeType_CIRCLE=0;f.id_ShapeType_POLYGON=1;Db.UCbSet=new gf;Db.VCbSet=new gf;Db.WCbSet=new gf;Db.UCbType=
new Ed;Db.VCbType=new Ed;Db.WCbType=new Ed;ha.internal=!1;ha.COL=1;ha.FLUID=4;ha.SENSOR=2;Ib.internal=!1;N.flowpoly=new bg;N.flowsegs=new bg;zb.internal=!1;var pk;null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Na,f.internal=!1);pk=f.BodyType_STATIC;var qk;null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Na,f.internal=!1);qk=f.BodyType_DYNAMIC;null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Na,f.internal=!1);Qd.types=[null,pk,qk,f.BodyType_KINEMATIC];
Da.internal=!1;Dc.tmpaabb=new Ca;Od.internal=!1;Rd.internal=!1;Nf.internal=!1;Zd.internal=!1;id.internal=!1;hd.internal=!1;Re.internal=!1;Jf.internal=!1;Qe.internal=!1;If.internal=!1;Of.internal=!1;Uc.internal=!1;Hf.internal=!1;Mc.internal=!1;Gf.internal=!1;L.main()})();
