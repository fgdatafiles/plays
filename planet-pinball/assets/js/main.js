!function(){var a=a||{};a.registerMouseOut=function(a){document.addEventListener?document.addEventListener("mouseout",a,!1):document.attachEvent&&document.attachEvent("onmouseout",a)},a.deregisterMouseOut=function(a){document.removeEventListener?document.removeEventListener("mouseout",a,!1):document.detachEvent&&document.detachEvent("onmouseout",a)},namespace("planet-pinball.utilities").WindowUtilities=a}(),function(){var a=a||{};"undefined"==typeof a.isTouchDevice&&Object.defineProperty(a,"isTouchDevice",{get:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}}),"undefined"==typeof a.isDesktop&&Object.defineProperty(a,"isDesktop",{get:function(){return!a.isTouchDevice}}),namespace("planet-pinball.utilities").DeviceUtilities=a}(),function(){var a=include("springroll.Application"),b=include("planet-pinball.utilities.WindowUtilities"),c=function(a){this._started=!1,this._isLandscape=!!a,this.reset()},d=c.prototype;Object.defineProperty(d,"hasLeftTouches",{get:function(){return this._leftTouches.length>0}}),Object.defineProperty(d,"hasRightTouches",{get:function(){return this._rightTouches.length>0}}),Object.defineProperty(d,"hasTouches",{get:function(){return this.hasLeftTouches||this.hasRightTouches}}),Object.defineProperty(d,"leftJustPressed",{get:function(){return this._leftJustPressed}}),Object.defineProperty(d,"rightJustPressed",{get:function(){return this._rightJustPressed}}),d.reset=function(){this._leftTouches=[],this._rightTouches=[],this._leftJustPressed=!1,this._rightJustPressed=!1,this._registeredTouchCount=0},d.start=function(a){this._started||(this._started=!0,this._mouseDownCallback=this._mouseDown.bind(this),this._mouseUpCallback=this._mouseUp.bind(this),this._mouseUpOutsideCallback=this._mouseUpOutside.bind(this),a.on("mousedown",this._mouseDownCallback),a.on("touchstart",this._mouseDownCallback),a.on("mouseup",this._mouseUpCallback),a.on("touchend",this._mouseUpCallback),a.on("mouseupoutside",this._mouseUpOutsideCallback),a.on("touchendoutside",this._mouseUpOutsideCallback),this._mouseOutOfWindowCallback=this._mouseOutOfWindow.bind(this),b.registerMouseOut(this._mouseOutOfWindowCallback))},d.stop=function(a){this._started&&(this._started=!1,b.deregisterMouseOut(this._mouseOutOfWindowCallback),a.off("mousedown",this._mouseDownCallback),a.off("touchstart",this._mouseDownCallback),a.off("mouseup",this._mouseUpCallback),a.off("touchend",this._mouseUpCallback),a.off("mouseupoutside",this._mouseUpOutsideCallback),a.off("touchendoutside",this._mouseUpOutsideCallback))},d.clear=function(){this._leftJustPressed=!1,this._rightJustPressed=!1;var a=this._leftTouches.length+this._rightTouches.length;this._registeredTouchCount!==a&&this.reset()},d._mouseDown=function(a){var b=this._isLeftTouch(a.data.global),c=b?this._leftTouches:this._rightTouches;c.push(a.data.identifier),1===c.length&&(b?this._leftJustPressed=!0:this._rightJustPressed=!0),this._registeredTouchCount=a.data.originalEvent.touches?a.data.originalEvent.touches.length:1,a.stopPropagation()},d._mouseUp=function(a){var b=-1;this._leftTouches.forEach(function(c,d){c===a.data.identifier&&(b=d)}),-1!==b?this._leftTouches.splice(b,1):(this._rightTouches.forEach(function(c,d){c===a.data.identifier&&(b=d)}),-1!==b&&this._rightTouches.splice(b,1)),this._registeredTouchCount=a.data.originalEvent.touches?a.data.originalEvent.touches.length:0;var c=this._leftTouches.length+this._rightTouches.length;this._registeredTouchCount!==c&&this.reset(),a.stopPropagation()},d._mouseUpOutside=function(a){this.reset()},d._mouseOutOfWindow=function(a){a=a?a:window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!=b.nodeName||this.reset()},d._isLeftTouch=function(b){return this._isLandscape?b.y>.5*a.instance.realHeight:b.x<.5*a.instance.realWidth},namespace("planet-pinball.utilities").MultitouchTracker=c}(),function(){var a=include("springroll.EventDispatcher"),b=include("springroll.Application"),c=function(b){a.call(this),this._init(b)},d=(a.prototype,extend(c,a));Object.defineProperty(d,"config",{set:function(a){this._init(a)},get:function(){return this._config}}),Object.defineProperty(d,"isValid",{get:function(){return this._isValid()}}),Object.defineProperty(d,"scale",{get:function(){var a=(b.instance,this.display&&this.display.stage?this.display.stage:null);return a?a.scale.x:1}}),d.resize=function(a,b){this._isValid&&(this.currentAspectRatio=a/b,this.currentScale=this.currentAspectRatio>this.originalAspectRatio?b/this.height:a/this.width,this.currentWidth=a/this.currentScale,this.currentHeight=b/this.currentScale,this.currentMin.x=-(.5*(this.currentWidth-this.width)),this.currentMin.y=-(.5*(this.currentHeight-this.height)),this.trigger("resize",this))},d._init=function(a){if(this._config=a,this._config){if(this.width=a.width,this.height=a.height,this.maxWidth=a.maxWidth||a.width,this.maxHeight=a.maxHeight||a.height,!this.width||!this.height)return void(this._config=null);this.min={x:.5*(this.width-this.maxWidth),y:.5*(this.height-this.maxHeight)},this.max={x:this.min.x+this.maxWidth,y:this.min.y+this.maxHeight},this.centre={x:.5*this.width,y:.5*this.height},this.originalAspectRatio=this.width/this.height,this.currentAspectRatio=0,this.currentScale=0,this.currentWidth=0,this.currentHeight=0,this.currentMin={x:0,y:0};var c=b.instance.options;this.maxWidth&&(c.maxWidth=this.maxWidth),this.maxHeight&&(c.maxHeight=this.maxHeight),b.instance.triggerResize()}},d._isValid=function(){return!!this._config},namespace("framework.app").SizeManager=c}(),function(){var a=include("springroll.ApplicationPlugin"),b=include("framework.app.SizeManager"),c=new a(1),d=null;c.setup=function(){this.options.override("responsive",!0),this.once("configLoaded",function(a){d=e.bind(this),this.on("resize",d),this.size=new b(a.size)})},c.teardown=function(){d&&(this.off("resize",d),d=null),this.size&&(this.size=null)};var e=function(a,b){if(this.size&&this.size.isValid){this.size.resize(a,b);var c=this.display.stage;c.scale.x=this.size.currentScale,c.scale.y=this.size.currentScale,c.position.x=.5*(a-this.size.width*this.size.currentScale),c.position.y=.5*(b-this.size.height*this.size.currentScale)}}}(),function(){var a={};a.pad=function(b,c){return b=b.toString(),b.length<c?a.pad("0"+b,c):b},a.addMargin=function(a){return a=a.toString(),space=" ",a=space.concat(a,space)},a.def=function(a){return"undefined"===a?void 0:a},namespace("planet-pinball.utilities").StringUtilities=a}(),function(){var a=function(a){this._targetState=a,this._hasTriggered=!1},b=a.prototype;Object.defineProperty(b,"targetState",{get:function(){return this._targetState}}),b.isTriggered=function(){return this._hasTriggered},b.trigger=function(){this._hasTriggered=!0},b.resetTriggeredState=function(){this._hasTriggered=!1},namespace("planet-pinball.decisionMaking.base").Transition=a}(),function(){var a=function(a,b){this._name=a.name,this._entity=b,this._transitions=[],this._entrySoundName=a.entrySound||null,this._entryAnalytics=a.entryAnalytics||null},b=a.prototype;Object.defineProperty(b,"name",{get:function(){return this._name}}),Object.defineProperty(b,"entity",{get:function(){return this._entity}}),Object.defineProperty(b,"transitions",{get:function(){return this._transitions},set:function(a){this._transitions=a.slice(0)}}),b.onEntry=function(){if(this._entrySoundName&&app.audio.play(this._entrySoundName),this._entryAnalytics){var a=this._entryAnalytics;app.analytics.event(a.action,a.label,a.value)}},b.update=function(a){},b.onExit=function(){},b.goToState=function(a){for(var b=0;b<this._transitions.length;b++){var c=this._transitions[b];if(c.targetState.name===a){c.trigger();break}}},b.addTransition=function(a){this._transitions.push(a)},b.appendTransitions=function(a){this._transitions.push.apply(this._transitions,a)},b.removeTransition=function(a){for(var b=0;b<this._transitions.length;b++){var c=this._transitions[b];if(c.targetState.name===a.targetState.name){this._transitions.splice(b,1);break}}},b.removeAllTransitions=function(){this._transitions.splice(0,this._transitions.length)},namespace("planet-pinball.decisionMaking.base").State=a}(),function(){var a=function(){},b=a.prototype;b.createState=function(a,b){return null},namespace("planet-pinball.decisionMaking.base").StateFactory=a}(),function(){var a=include("planet-pinball.decisionMaking.base.Transition"),b=function(b,c){var d=null;this._states=b.states.map(function(a){var e=app.entityStateFactory.createState(a,c);return d||e.name!==b.initialState||(d=e),e}),this._initialState=d,this._currentState=this.initialState,this._currentState.onEntry();var e=this;b.transitions.forEach(function(b){var c,d,f=null,g=null;for(c=0;c<e._states.length;c++)if(d=e._states[c],d.name===b.fromState){f=d;break}for(c=0;c<e._states.length;c++)if(d=e._states[c],d.name===b.toState){g=d;break}f.addTransition(new a(g))}),this._updateCallback=null,this.stopUpdate=function(){this._updateCallback&&(app.off("update",this._updateCallback),this._updateCallback=null)},this.startUpdate=function(){this._updateCallback&&this.stopUpdate(),this._updateCallback=this._update.bind(this),app.on("update",this._updateCallback)}},c=b.prototype;b.addTo=function(a,c){a.stateMachine=new b(c,a),a.stateMachine.startUpdate()},b.removeFrom=function(a){a.stateMachine.stopUpdate()},Object.defineProperty(c,"states",{get:function(){return this._states}}),Object.defineProperty(c,"initialState",{get:function(){return this._initialState}}),Object.defineProperty(c,"currentState",{get:function(){return this._currentState}}),c.goToState=function(a){this._currentState.goToState(a)},c._update=function(a){for(var b=null,c=0;c<this._currentState.transitions.length;c++){var d=this._currentState.transitions[c];b?d.resetTriggeredState():d.isTriggered()&&(b=d)}if(b){var e=b.targetState;this._currentState.onExit(),e.onEntry(),this._currentState=e,b.resetTriggeredState()}else this._currentState.update(a)},namespace("planet-pinball.decisionMaking.base").StateMachine=b}(),function(){var a=include("planet-pinball.decisionMaking.base.State"),b=function(b,c){a.call(this,b,c),this._timeoutLength=b.initSettings.timeoutLength||1e3,this._timer=this._timeoutLength,this._timerPaused=b.initSettings.timeoutStartPaused&&this._timeoutLength<0||!1},c=a.prototype,d=extend(b,a);Object.defineProperty(d,"paused",{get:function(){return this._timerPaused},set:function(a){this._timerPaused=a}}),Object.defineProperty(d,"currentTime",{get:function(){return this._timer}}),Object.defineProperty(d,"timeoutLength",{get:function(){return this._timeoutLength}}),d.onEntry=function(){c.onEntry.call(this),this.restartTimeoutIn(0)},d.update=function(a){this._timerPaused||(this._timer-=a,this._timer<0&&this.onTimeoutFinished())},d.onExit=function(){this._timer=0},d.onTimeoutFinished=function(){},d.restartTimeoutIn=function(a){this._timer=this._timeoutLength+a},namespace("planet-pinball.decisionMaking.states").TimeoutState=b}(),function(){var a=include("planet-pinball.decisionMaking.base.State"),b=function(b,c){a.call(this,b,c)},c=a.prototype,d=extend(b,a);d.onEntry=function(){c.onEntry.call(this);var a=this.entity.bodies[0];a.animSprite.frame=0},namespace("planet-pinball.decisionMaking.states").OffState=b}(),function(){var a=include("planet-pinball.decisionMaking.states.TimeoutState"),b=function(b,c){a.call(this,b,c)},c=a.prototype,d=extend(b,a);d.onEntry=function(){c.onEntry.call(this);var a=this.entity.bodies[0];a.animSprite.frame=1},d.onTimeoutFinished=function(){this.goToState("off")},namespace("planet-pinball.decisionMaking.states").OnState=b}(),function(){var a=include("planet-pinball.decisionMaking.base.State"),b=function(b,c){a.call(this,b,c)},c=a.prototype,d=extend(b,a);d.onEntry=function(){c.onEntry.call(this);var a=this.entity.bodies[0].movieClip;app.animator.play(a,"idle")},namespace("planet-pinball.decisionMaking.states").PocketClosedState=b}(),function(){var a=include("planet-pinball.decisionMaking.base.State"),b=function(b,c){a.call(this,b,c)},c=a.prototype,d=extend(b,a);d.onEntry=function(){c.onEntry.call(this);var a=this.entity.bodies[0].movieClip;app.animator.play(a,"close",this._onAnimationComplete.bind(this))},d._onAnimationComplete=function(){this.goToState("closed")},namespace("planet-pinball.decisionMaking.states").PocketClosingState=b}(),function(){var a=include("planet-pinball.decisionMaking.base.State"),b=function(b,c){a.call(this,b,c)},c=a.prototype,d=extend(b,a);d.onEntry=function(){c.onEntry.call(this);var a=app.manager.currentState;a.panel.remove(this.entity),a.spawn({pinballConfig:app.config.components.sunspotPinball,launcherConfig:app.config.setup.sunspotLauncher}),app.audio.queue(["v-sunspot-launch"])},d.onExit=function(){app.manager.currentState.panel.add(this.entity)},namespace("planet-pinball.decisionMaking.states").PocketEmptyState=b}(),function(){var a,b,c=include("planet-pinball.decisionMaking.base.State"),d=include("Matter.Body"),e=.01,f=function(d,e){c.call(this,d,e),a=d.initSettings&&d.initSettings.pauseTimeBeforeExit?d.initSettings.pauseTimeBeforeExit:0,b=this.entity.bodies[0]},g=c.prototype,h=extend(f,c);h.onEntry=function(){g.onEntry.call(this),d.scale(b,e,e);var a=b.movieClip;app.animator.play(a,"hide",this._onAnimationComplete.bind(this))},h.onExit=function(){g.onExit.call(this);var a=1/e;d.scale(b,a,a)},h._onAnimationComplete=function(){var b=this;app.setTimeout(function(){b.goToState("empty")},a)},namespace("planet-pinball.decisionMaking.states").PocketHidingState=f}(),function(){var a,b,c=include("planet-pinball.decisionMaking.states.TimeoutState"),d=include("Matter.Body"),e=function(d,e){c.call(this,d,e),a=this.entity.bodies[0],b=d.initSettings&&d.initSettings.newBodyScale?d.initSettings.newBodyScale:.5},f=c.prototype,g=extend(e,c);g.onEntry=function(){f.onEntry.call(this),d.scale(a,b,b)},g.onExit=function(){var c=1/b;d.scale(a,c,c)},g.onTimeoutFinished=function(){this.goToState("closing")},namespace("planet-pinball.decisionMaking.states").PocketOpenState=e}(),function(){var a=include("planet-pinball.decisionMaking.base.State"),b=function(b,c){a.call(this,b,c)},c=a.prototype,d=extend(b,a);d.onEntry=function(){c.onEntry.call(this);var a=this.entity.bodies[0].movieClip;app.animator.play(a,"open",this._onAnimationComplete.bind(this))},d._onAnimationComplete=function(){this.goToState("open")},namespace("planet-pinball.decisionMaking.states").PocketOpeningState=b}(),function(){var a=include("planet-pinball.decisionMaking.base.State"),b=function(b,c){a.call(this,b,c)},c=a.prototype,d=extend(b,a);d.onEntry=function(){c.onEntry.call(this);var a=this.entity.bodies[0].movieClip;app.animator.play(a,"reappear",this._onAnimationComplete.bind(this))},d._onAnimationComplete=function(){this.goToState("closed")},namespace("planet-pinball.decisionMaking.states").PocketReappearingState=b}(),function(){var a=include("planet-pinball.decisionMaking.base.StateFactory"),b=include("planet-pinball.decisionMaking.states.TimeoutState"),c=include("planet-pinball.decisionMaking.states.OnState"),d=include("planet-pinball.decisionMaking.states.OffState"),e=include("planet-pinball.decisionMaking.states.PocketClosedState"),f=include("planet-pinball.decisionMaking.states.PocketOpenState"),g=include("planet-pinball.decisionMaking.states.PocketEmptyState"),h=include("planet-pinball.decisionMaking.states.PocketOpeningState"),i=include("planet-pinball.decisionMaking.states.PocketClosingState"),j=include("planet-pinball.decisionMaking.states.PocketHidingState"),k=include("planet-pinball.decisionMaking.states.PocketReappearingState"),l=function(){},m=(a.prototype,extend(l,a));m.createState=function(a,l){switch(a["class"]){case"TimeoutState":return new b(a,l);case"OnState":return new c(a,l);case"OffState":return new d(a,l);case"PocketClosedState":return new e(a,l);case"PocketOpenState":return new f(a,l);case"PocketEmptyState":return new g(a,l);case"PocketOpeningState":return new h(a,l);case"PocketClosingState":return new i(a,l);case"PocketHidingState":return new j(a,l);case"PocketReappearingState":return new k(a,l)}return null},namespace("planet-pinball.decisionMaking").PPStateFactory=l}(),function(){var a={},b=include("Matter.Composite"),c=include("Matter.Common"),d=include("PIXI.Container"),e=include("PIXI.Graphics"),f=include("PIXI.Sprite"),g=include("planet-pinball.utilities.StringUtilities");a.create=function(b){var e={controller:a,context:null,container:null,options:{background:"#fafafa",backgroundPosition:{x:0,y:0},useBackgroundPosition:!1,wireframeBackground:"#222",wireframes:!0,showAxes:!1,showAngleIndicator:!1}},f=c.extend(e,b);return f.spriteList={},f.primitiveList={},f.backgroundContainer=new d,f.mainContainer=new d,f.mainContainer.addChild(new d),f.debugContainer=new d,f.container.addChild(f.backgroundContainer),f.container.addChild(f.mainContainer),f.container.addChild(f.debugContainer),f},a.clear=function(a){for(var b=a.backgroundContainer,c=a.mainContainer,d=a.debugContainer;b.children[0];)b.removeChild(b.children[0]);for(c.children.forEach(function(a){for(;a.children[0];)a.removeChild(a.children[0])});d.children[0];)d.removeChild(d.children[0]);var e=a.spriteList["bg-0"];a.spriteList={},a.primitiveList={},a.labelList={},a.spriteList["bg-0"]=e,e&&b.addChild(e)},a.world=function(c){var d,e=c.render,f=c.world,g=e.options,h=g.wireframes?g.wireframeBackground:g.background;a.setBackground(e,h),app.options.debug&&(e.debugContainer.visible=app.globals.visualiseRigidBodies,e.mainContainer.alpha=app.globals.visualiseRigidBodies?.5:1);var i=b.allBodies(f);for(d=0;d<i.length;d++)a.body(c,i[d]);var j=b.allConstraints(f);for(d=0;d<j.length;d++)a.constraint(c,j[d])},a.setBackground=function(a,b){if(a.currentBackground!==b){var c=a.spriteList["bg-0"],d=a.backgroundContainer;b.indexOf&&-1!==b.indexOf("#")?c&&d.removeChild(c):c||(c=a.spriteList["bg-0"]=new f(app.getCache(b)),a.options.useBackgroundPosition?(c.position.x=a.options.backgroundPosition.x,c.position.y=a.options.backgroundPosition.y):(c.anchor.x=.5,c.anchor.y=.5,c.position.x=.5*app.dimensions.width,c.position.y=.5*app.dimensions.height),d.addChild(c)),a.currentBackground=b}},a.constraint=function(a,b){var d=a.render,f=b.bodyA,g=b.bodyB,h=b.pointA,i=b.pointB,j=d.mainContainer.getChildAt(0),k=b.render,l="c-"+b.id,m=d.primitiveList[l];return m||(m=d.primitiveList[l]=new e),k.visible&&b.pointA&&b.pointB?(-1===c.indexOf(j.children,m)&&j.addChild(m),m.clear(),m.beginFill(0,0),m.lineStyle(k.lineWidth,c.colorToNumber(k.strokeStyle),1),f?m.moveTo(f.position.x+h.x,f.position.y+h.y):m.moveTo(h.x,h.y),g?m.lineTo(g.position.x+i.x,g.position.y+i.y):m.lineTo(i.x,i.y),void m.endFill()):void m.clear()},a.body=function(a,b){var d,e,f=a.render,g=b.render,n=g.dashedCircle,o=f.debugContainer;if(g.visible){var p=m(f,g.layer);if(n){var q="b-"+b.id,r=f.primitiveList[q];r||(r=f.primitiveList[q]=l(b)),-1===c.indexOf(p.children,r)&&p.addChild(r),r.position.x=b.position.x,r.position.y=b.position.y}else if(g.sprite&&g.sprite.texture){var s="b-"+b.id,t=f.spriteList[s];t||(t=f.spriteList[s]=h(f,b)),-1===c.indexOf(p.children,t)&&p.addChild(t),t.position.x=b.position.x,t.position.y=b.position.y,t.rotation=b.angle,t.scale.x=g.sprite.xScale||1,t.scale.y=g.sprite.yScale||1,app.options.debug&&app.globals.visualiseRigidBodies&&(e="b-"+b.id,d=f.primitiveList[e],d||(d=f.primitiveList[e]=k(f,b),d.initialAngle=b.angle),-1===c.indexOf(o.children,d)&&o.addChild(d),d.position.x=b.position.x,d.position.y=b.position.y,d.rotation=b.angle-d.initialAngle)}else if(g.animSprite&&g.animSprite.spriteSheet){var u="b-"+b.id,v=f.spriteList[u];v||(v=f.spriteList[u]=i(b)),-1===c.indexOf(p.children,v)&&p.addChild(v),v.position.x=b.position.x,v.position.y=b.position.y,v.rotation=b.angle,v.scale.x=g.animSprite.xScale||1,v.scale.y=g.animSprite.yScale||1,app.options.debug&&app.globals.visualiseRigidBodies&&(e="b-"+b.id,d=f.primitiveList[e],d||(d=f.primitiveList[e]=k(f,b),d.initialAngle=b.angle),-1===c.indexOf(o.children,d)&&o.addChild(d),d.position.x=b.position.x,d.position.y=b.position.y,d.rotation=b.angle-d.initialAngle)}else if(g.movieClip&&g.movieClip.name){var w="b-"+b.id,x=f.spriteList[w];x||(x=f.spriteList[w]=j(b)),-1===c.indexOf(p.children,x)&&p.addChild(x),x.position.x=b.position.x,x.position.y=b.position.y,x.rotation=b.angle,x.scale.x=g.movieClip.xScale||1,x.scale.y=g.movieClip.yScale||1,app.options.debug&&app.globals.visualiseRigidBodies&&(e="b-"+b.id,d=f.primitiveList[e],d||(d=f.primitiveList[e]=k(f,b),d.initialAngle=b.angle),-1===c.indexOf(o.children,d)&&o.addChild(d),d.position.x=b.position.x,d.position.y=b.position.y,d.rotation=b.angle-d.initialAngle)}else{var y="b-"+b.id,z=f.primitiveList[y];z||(z=f.primitiveList[y]=k(f,b),z.initialAngle=b.angle),-1===c.indexOf(p.children,z)&&p.addChild(z),z.position.x=b.position.x,z.position.y=b.position.y,z.rotation=b.angle-z.initialAngle}}};var h=function(a,b){var c=b.render,d=c.sprite.texture,e=new f(app.getCache(d));return e.anchor.x=b.render.sprite.xOffset,e.anchor.y=b.render.sprite.yOffset,b.sprite=e,e},i=function(a){var b=a.render.animSprite,c=b.spriteSheet,d=b.framePrefix,e=b.startFrame||0,h=new f;return Object.defineProperty(h,"frame",{set:function(a){h._currentFrame=a;var b=app.getCache(c);if(b){var e=d+g.pad(a,4);h.texture=b.getFrame(e)}},get:function(){return h._currentFrame}}),h.frame=e,b.xOffset=b.xOffset||a.render.xOffset||.5,b.yOffset=b.yOffset||a.render.yOffset||.5,h.anchor.x=b.xOffset,h.anchor.y=b.yOffset,a.animSprite=h,h},j=function(a){var b=a.render.movieClip,c=app.getCache(b.name);return b.xOffset=b.xOffset||a.render.xOffset||.5,b.yOffset=b.yOffset||a.render.yOffset||.5,c.anchor.x=b.xOffset,c.anchor.y=b.yOffset,b.startPaused?b.startAnimation?(app.animator.stop(c),c.gotoAndStop(b.startAnimation)):c.gotoAndStop(0):b.startAnimation&&app.animator.play(c,b.startAnimation),a.movieClip=c,c},k=function(a,b){var d,f=b.render,g=a.options,h=new e,i=c.colorToNumber(f.fillStyle),j=c.colorToNumber(f.strokeStyle),k=c.colorToNumber(f.strokeStyle),l=c.colorToNumber("#bbb"),m=c.colorToNumber("#CD5C5C");h.clear();for(var n=b.parts.length>1?1:0;n<b.parts.length;n++){d=b.parts[n],g.wireframes?(h.beginFill(0,0),h.lineStyle(1,l,1)):(h.beginFill(i,1),h.lineStyle(f.lineWidth,j,1)),h.moveTo(d.vertices[0].x-b.position.x,d.vertices[0].y-b.position.y);for(var o=1;o<d.vertices.length;o++)h.lineTo(d.vertices[o].x-b.position.x,d.vertices[o].y-b.position.y);h.lineTo(d.vertices[0].x-b.position.x,d.vertices[0].y-b.position.y),h.endFill(),(g.showAngleIndicator||g.showAxes)&&(h.beginFill(0,0),g.wireframes?h.lineStyle(1,m,1):h.lineStyle(1,k,1),h.moveTo(d.position.x-b.position.x,d.position.y-b.position.y),h.lineTo((d.vertices[0].x+d.vertices[d.vertices.length-1].x)/2-b.position.x,(d.vertices[0].y+d.vertices[d.vertices.length-1].y)/2-b.position.y),h.endFill())}return h},l=function(a){var b=a.render.dashedCircle,f=new d,g=new e;return g.clear(),g.beginFill(c.colorToNumber(b.fillColour),1),g.drawCircle(0,0,a.radius),g.endFill(),f.addChild(g),f},m=function(a,b){var c=a.mainContainer;a.container;for(b||(b=0);c.children.length<=b;)c.addChild(new d);return c.getChildAt(b)};namespace("planet-pinball").RenderPixi=a}(),function(){var a=function(a){this.event=function(a,b,c){app.options.debug||app.analyticEvent(a,b,c)}};namespace("planet-pinball.services").AnalyticsService=a}(),function(){var a=function(){this._queuedAudioCallback=null,Array.prototype.group=Array.prototype.group||function(a){var b={};return this.forEach(function(c){var d=a(c);b[d]=b[d]||[],b[d].push(c)}),b},this._sets=[].concat(app.config.sounds.vo.sounds).concat(app.config.sounds.sfx.sounds).concat(app.config.sounds.music.sounds).map(function(a){return a.id}).map(function(a){return{key:a.split("_")[0],value:a}}).group(function(a){return a.key}),this._state=Object.keys(this._sets).map(function(a){return{key:a,last:-1}}),this._play=function(a,b,c){c=c||{};var d=this,e="string"==typeof a?[a]:a;e.forEach(function(a,b,c){if("string"==typeof a&&d._sets[a].length>1){var e=d._state.filter(function(b){return b.key===a})[0],f=d._sets[e.key].filter(function(a,b){return b!=e.last}),g=Math.floor(Math.random()*(f.length-0));c[b]=f[g].value,e.last=g}}),b?(app.voPlayer.play(e,c.complete,c.cancelled),this._queuedAudioCallback&&this._queuedAudioCallback()):app.sound.play(e[0],c)}},b=a.prototype;Object.defineProperty(b,"queuedAudioCallback",{set:function(a){this._queuedAudioCallback=a}}),b.play=function(a,b){this._play(a,!1,b)},b.queue=function(a,b){this._play(a,!0,b)},b.stop=function(a){a?app.sound.stop(a):app.sound.stopAll()},namespace("planet-pinball.services").AudioService=a}(),function(){function a(a,b){return a.max.x!==Number.MIN_VALUE&&a.max.y!==Number.MIN_VALUE}var b=include("Matter.Bounds"),c=[],d=function(){this._updateCallback=null},e=d.prototype;e.start=function(a){this._updateCallback&&this.stop(),this._updateCallback=this._onUpdate.bind(this),app.on("update",this._updateCallback)},e.stop=function(){this._updateCallback&&(app.off("update",this._updateCallback),this._updateCallback=null)},e.subscribe=function(a,b,d,e,f,g){var h={body:a,bounds:b,action:d,inverse:e,once:f,checkInvalidBounds:g};return c.push(h),h},e.unsubscribe=function(a){c.splice(c.indexOf(a),1)},e.unsubscribeBody=function(a){c.filter(function(b){return b.body==a}).forEach(function(a){c.splice(c.indexOf(a),1)})},e._onUpdate=function(){c.forEach(function(c,d){var f=b.overlaps(c.body.bounds,c.bounds),g=!0;c.checkInvalidBounds&&(g=a(c.body.bounds,c.maxSize)),(!g||f&&!c.inverse||!f&&c.inverse)&&(c.action(c.body),c.once&&e.unsubscribe(c))})},namespace("planet-pinball.services").BoundsService=d}(),function(){var a=include("Matter.Events"),b=include("Matter.Pair"),c=include("Matter.Composite"),d=[],e=function(a){this._physicsEngine=a,this._initialise()},f=e.prototype;f.registerPair=function(a,c,e,f,g){for(var h={rootID:b.id(a,c),partPairIDList:[],collisionStartCallback:e,collisionEndCallback:f,isCollidingCallback:g},i=this._createPartList(a),j=this._createPartList(c),k=0;k<i.length;k++)for(var l=0;l<j.length;l++){var m=b.id(i[k],j[l]);h.partPairIDList.push(m)}d.push(h)},f.deregisterPair=function(a,c){for(var e=b.id(a,c),f=0;f<d.length;f++){var g=d[f];if(g.rootID==e){d.splice(f,1);break}}},f._initialise=function(){a.on(this._physicsEngine,"collisionStart",this._dispatchCollisionStartCallbacks),a.on(this._physicsEngine,"collisionEnd",this._dispatchCollisionEndCallbacks),a.on(this._physicsEngine,"collisionActive",this._dispatchCollisionActiveCallbacks)},f._dispatchCollisionStartCallbacks=function(a){for(var b=f._getMatchingPairs(a.pairs),c=0;c<b.length;c++){var d=b[c];d.collisionStartCallback&&d.collisionStartCallback()}},f._dispatchCollisionEndCallbacks=function(a){for(var b=f._getMatchingPairs(a.pairs),c=0;c<b.length;c++){var d=b[c];d.collisionEndCallback&&d.collisionEndCallback()}},f._dispatchCollisionActiveCallbacks=function(a){for(var b=f._getMatchingPairs(a.pairs),c=0;c<b.length;c++){var d=b[c];d.isCollidingCallback&&d.isCollidingCallback()}},f._getMatchingPairs=function(a){for(var c=[],e=0;e<a.length;e++)for(var f=a[e],g=b.id(f.bodyA,f.bodyB),h=0;h<d.length;h++)for(var i=d[h],j=0;j<i.partPairIDList.length;j++){var k=i.partPairIDList[j];if(k===g){c.push(i);break}}return c},f._createPartList=function(a){return"composite"===a.type?c.allBodies(a):[a]},namespace("planet-pinball.services").CollisionService=e}(),function(){var a=include("springroll.EventDispatcher"),b=function(){a.call(this),this._states=app.config.preload.map(function(a){return{name:a.name,sounds:{length:a.sounds.length,progress:0},stuff:{length:a.stuff.length,progress:0}}})},c=(b.prototype,a.extend(b));c.isPreloadable=function(a){var b=this._states.filter(function(b){return b.name===a})[0];return b.sounds.length&&b.stuff.length},c.all=function(){var a=this;app.config.preload.forEach(function(b){var c=app.config.stuff.filter(function(a){return b.stuff.some(function(b){return b===a.id})}),d=Object.keys(app.config.sounds).map(function(a){return app.config.sounds[a].sounds}).reduce(function(a,b){return a.concat(b)}).filter(function(a){return b.sounds.some(function(b){return b===a.id})}).map(function(a){return a.id}),e=function(c){return{cacheAll:!0,complete:function(d){a._onComplete(b.name,c,d)},progress:function(d){a._onProgress(b.name,c,d)}}},f=e("stuff"),g=e("sounds");c.length>0?app.load(c,f):f.complete(),d.length>0?app.sound.preload(d,g):g.complete()})},c._onComplete=function(a,b,c){var d=this._states.filter(function(b){return b.name===a})[0];d[b].progress=1;var e=!d.sounds.length||1===d.sounds.progress,f=!d.stuff.length||1===d.stuff.progress;e&&f&&this.trigger(a+"-complete",c)},c._onProgress=function(a,b,c){var d=this._states.filter(function(b){return b.name===a})[0];d[b].progress=c;var e=[];d.sounds.length&&e.push(d.sounds.progress),d.stuff.length&&e.push(d.stuff.progress);var f=e.reduce(function(a,b){return a+b})/(e.length||1);this.trigger(a+"-progress",f)},namespace("planet-pinball.services").PreloadService=b}(),function(){var a=!1,b=function(){if(a="undefined"!=typeof Storage){var b="test",c=window.sessionStorage;try{c.setItem(b,"1"),c.removeItem(b)}catch(d){a=!1}}Object.defineProperty(this,"supportsLocalStorage",{get:function(){return a}}),this.session=a?sessionStorage:{},this.persistent={},this.persistent.read=function(b){return a?localStorage.getItem(b):void 0},this.persistent.write=function(b,c){a&&localStorage.setItem(b,c)},this.persistent.clear=function(b){a&&localStorage.removeItem(b)},this.persistent.clearAll=function(){a&&localStorage.clear()}};namespace("planet-pinball.services").StorageService=b}(),function(){var a=include("Matter.Vertices"),b={};b._buildVertexList=function(b){for(var c="",d=b.length,e=d-1,f=0;d>f;f++)c=c.concat("L "),c=c.concat(b[f]),f!==e&&(c=c.concat(" "));return a.fromPath(c)},namespace("planet-pinball.components").PhysicsComponents=b}(),function(){var a={},b=include("Matter.Common"),c=include("Matter.Body");a.create=function(a){var d={position:{x:0,y:0},rotation:0,scale:{x:1,y:1},render:{layer:0,sprite:{xOffset:.5,yOffset:.5,texture:""}}},e=b.extend(d,a),f={position:e.position,angle:e.rotation,isStatic:!0,vertices:"-111111 -111111",render:{layer:e.render.layer,sprite:{xScale:e.scale.x,yScale:e.scale.y,texture:e.render.sprite.texture}}},g=c.create(f);return g.render.sprite.xOffset=e.render.sprite.xOffset,g.render.sprite.yOffset=e.render.sprite.yOffset,g},namespace("planet-pinball.components").BodylessComponent=a}(),function(){var a=include("PIXI.Sprite"),b=function(b){a.call(this,app.getCache(b.image)),b.position&&(this.position.x=b.position.x,this.position.y=b.position.y),b.anchor&&(this.anchor.x=b.anchor.x,this.anchor.y=b.anchor.y),b.scale&&(this.scale.x=b.scale.x,this.scale.y=b.scale.y)},c=(a.prototype,extend(b,a));c.executeTween=function(a){},namespace("planet-pinball.components").TweenedComponent=b}(),function(){var a=include("Matter.Common"),b=include("Matter.Composite"),c=include("Matter.Constraint"),d=include("Matter.Body"),e=include("Matter.Bodies"),f=include("planet-pinball.components.PhysicsComponents"),g={};g.create=function(g){var h=b.create(),i=d.nextGroup(!0);h.name=g.name||"bumper",h.bumperType=g.type||"bumper";var j,k=a.extend({position:g.position,collisionFilter:{group:i}},g.physics);switch(g.shape.kind){case"circle":j=e.circle(g.position.x,g.position.y,g.shape.geometry.radius,k);break;default:k.vertices=f._buildVertexList(g.shape.geometry.path),j=d.create(k)}b.addBody(h,j);var l=a.extend({stiffness:1,length:1e-6,render:{visible:!1}},g.anchorSettings);return g.anchors.forEach(function(d){var f=e.circle(g.position.x+d.offset.x,g.position.y+d.offset.y,4,{isStatic:!0,collisionFilter:{group:i,mask:g.physics.collisionFilter?g.physics.collisionFilter.mask:4294967295},render:{visible:!1}});b.addBody(h,f);var k=a.clone(l,!0);k.bodyA=f,k.bodyB=j,k.pointB={x:d.offset.x,y:d.offset.y};var m=c.create(k);b.addConstraint(h,m)}),g.angle&&b.rotate(h,g.angle,j.position),h},namespace("planet-pinball.components").BumperComponent=g}(),function(){var a=include("Matter.Common"),b=include("Matter.Bodies"),c={};c.create=function(c){var d=a.extend({
isStatic:!0,collisionFilter:{group:c.pinballGroup}},c.physics);return b.circle(c.position.x,c.position.y,c.shape.geometry.radius,d)},namespace("planet-pinball.components").TargetComponent=c}(),function(){var a={},b=include("Matter.Bodies");a.create=function(a){return b.rectangle(a.position.x,a.position.y,a.width,a.height,a.physics)},namespace("planet-pinball.components").BlackHoleComponent=a}(),function(){var a=include("PIXI.Sprite"),b=include("PIXI.Container"),c=include("PIXI.Text"),d=include("TWEEN.Tween"),e=include("TWEEN.Easing"),f=include("planet-pinball.utilities.StringUtilities"),g={};g.create=function(g){var h=g.image,i=g.textblock,j=g.scrim,k=new b,l=new a(app.getCache(h.asset)),m=new c(f.addMargin(i.text),{font:i.font,fill:i.fill,align:i.align,textBaseline:i.baseline}),n=new a(app.getCache("InterstitialBackground"));return n.position.x=Math.floor(.5*app.dimensions.width),n.position.y=Math.floor(.5*app.dimensions.height),n.anchor.x=.5,n.anchor.y=.5,n.alpha=0,l.anchor.x=h.anchor.x,l.anchor.y=h.anchor.y,l.position.x=h.position.x,l.position.y=h.position.y,l.scale.x=0,l.scale.y=0,m.anchor.x=i.anchor.x,m.anchor.y=i.anchor.y,m.position.x=i.position.x,m.position.y=i.position.y,m.scale.x=0,m.scale.y=0,k.addChild(n),k.addChild(l),k.addChild(m),k["in"]=function(a){a=a||function(){},new d(n).to({alpha:j.alpha},400).easing(e.Quadratic.Out).start(),new d(l.scale).delay(200).to({x:h.scale.x,y:h.scale.y},700).easing(e.Back.Out).start(),new d(m.scale).delay(250).to({x:h.scale.x,y:h.scale.y},700).easing(e.Back.Out).start().onComplete(a)},k.out=function(a){a=a||function(){},new d(l.scale).delay(50).to({x:0,y:0},400).easing(e.Back.In).start(),new d(m.scale).to({x:0,y:0},400).easing(e.Back.In).start().onComplete(a),new d(n).delay(200).to({alpha:0},700).easing(e.Quadratic.In).start()},k},namespace("planet-pinball.components").InterstitialComponent=g}(),function(){var a=include("PIXI.Sprite"),b=include("PIXI.Container"),c=include("PIXI.Text"),d={};d.create=function(d,e){var f=d.image,g=d.textblock,h=new b,i=new c("",{font:g.font,fill:g.fill,align:g.align,textBaseline:g.baseline,dropShadow:g.shadow.color?!0:!1,dropShadowColor:g.shadow.color,dropShadowDistance:g.shadow.blur}),j=e?e:new a(app.getCache(f.asset));return j.anchor.x=f.anchor.x,j.anchor.y=f.anchor.y,j.position.x=f.position.x,j.position.y=f.position.y,j.scale.x=f.scale.x,j.scale.y=f.scale.y,i.anchor.x=g.anchor.x,i.anchor.y=g.anchor.y,i.position.x=g.position.x,i.position.y=g.position.y,i.scale.x=g.scale.x,i.scale.y=g.scale.y,h.addChild(j),h.addChild(i),Object.defineProperty(h,"text",{set:function(a){i.text=a}}),Object.defineProperty(h,"textBlock",{get:function(){return i}}),Object.defineProperty(h,"background",{get:function(){return j}}),h},namespace("planet-pinball.components").LabelComponent=d}(),function(){var a=include("Matter.Bodies"),b={};b.create=function(b){return a.circle(b.position.x,b.position.y,b.shape.geometry.radius,{isStatic:!0})},namespace("planet-pinball.components").LifesaverComponent=b}(),function(){var a=include("planet-pinball.components.TweenedComponent"),b=include("TWEEN.Tween"),c=include("TWEEN.Easing"),d=function(b){a.call(this,b),this._halfwayPosition={x:0,y:0},this._endPosition={x:0,y:0}},e=(a.prototype,extend(d,a));Object.defineProperty(e,"halfwayPosition",{set:function(a){this._halfwayPosition.x=a.x,this._halfwayPosition.y=a.y},get:function(){return this._halfwayPosition}}),Object.defineProperty(e,"endPosition",{set:function(a){this._endPosition.x=a.x,this._endPosition.y=a.y},get:function(){return this._endPosition}}),e.executeTween=function(a){a=a||function(){};var d=[this.halfwayPosition.x,this.halfwayPosition.x,this.halfwayPosition.x,this.halfwayPosition.x,this.endPosition.x],e=[this.halfwayPosition.y,this.halfwayPosition.y-10,this.halfwayPosition.y-15,this.halfwayPosition.y-20,this.endPosition.y];new b(this.position).to({x:d,y:e},1200).interpolation(TWEEN.Interpolation.Bezier).start().onComplete(a),scaleInTween=new b(this.scale).to({x:1.25,y:1.25},700).easing(c.Back.Out),scaleOutTween=new b(this.scale).to({x:.25,y:.25},500).easing(c.Quadratic.Out),scaleInTween.chain(scaleOutTween).start()},namespace("planet-pinball.components").LivesHeartComponent=d}(),function(){var a=include("PIXI.Container"),b=include("PIXI.Sprite"),c=include("PIXI.Graphics"),d=include("Matter.Common"),e={};e.create=function(){var e=new a,f=new b(app.getCache("LoadingBar")),g=f.getLocalBounds();f.position.x=-(.5*g.width),f.position.y=-(.5*g.height),f.anchor.x=0,f.anchor.y=0;var h=new c;h.beginFill(d.colorToNumber("#000000"),1),h.drawRect(0,0,g.width,g.height),h.scale.x=0;var i=new b(app.getCache("Satellite"));i.position.x=0,i.anchor.x=.5,i.anchor.y=.5,i.rotation=-.261799;var j=i.getLocalBounds(),k=new a;k.position.x=f.position.x,k.position.y=f.position.y-.6*j.width,f.mask=h,f.addChild(h),k.addChild(i),e.addChild(f),e.addChild(k);var l=function(a){a>1&&(a=1),0>a&&(a=0),i.position.x=a*g.width,h.scale.x=a};Object.defineProperty(e,"progress",{set:l}),Object.defineProperty(e,"rotatingSatelliteEnabled",{set:function(a){this._rotatingSatelliteEnabled=a},get:function(){return this._rotatingSatelliteEnabled}}),e._updateSatelliteCallback=null,e._rotatingSatelliteEnabled=!1,e.playRotatingSatellite=function(a){var b=a&&!this._rotatingSatelliteEnabled,c=!a&&this._rotatingSatelliteEnabled;b?(this._updateSatelliteCallback=this._updateSatelliteRotation.bind(this),this._rotatingSatelliteEnabled=!0,app.on("update",this._updateSatelliteCallback),l(0)):c&&(app.off("update",this._updateSatelliteCallback),this._rotatingSatelliteEnabled=!1,this._updateSatelliteCallback=null)};var m=.002;return e._updateSatelliteRotation=function(a){i.rotation+=m*a},e},namespace("planet-pinball.components").LoadingBarComponent=e}(),function(){var a={},b=include("Matter.Common"),c=include("Matter.Body");a.create=function(a){var d={position:{x:0,y:0},radius:100,dashedCircle:{strokeColour:"#ffffff",strokeWidth:5,solidLength:10,gapLength:10,fillColour:"#ffffff",fillAlpha:.05},layer:0,worldBounds:{left:0,right:720,top:0,bottom:1280}},e=b.extend(d,a),f={label:e.label,position:e.position,radius:e.radius,isStatic:!0,vertices:"-88888 -88888",render:{layer:e.layer,dashedCircle:{strokeColour:e.dashedCircle.strokeColour,strokeWidth:e.dashedCircle.strokeWidth,solidLength:e.dashedCircle.solidLength,gapLength:e.dashedCircle.gapLength,fillColour:e.dashedCircle.fillColour,fillAlpha:e.dashedCircle.fillAlpha}}},g=c.create(f);return g.calculateAngleBounds=function(a){var b=.05*Math.PI,c=.25,d=g.position.y-a.top,e=g.position.x-a.left,f=a.right-g.position.x;f>this.radius?(d=g.position.y-a.top,d>this.radius?this.innerAngleMin=-Math.PI:this.innerAngleMin=-(.5*Math.PI)-Math.asin(d/this.radius)):this.innerAngleMin=-Math.asin(f/this.radius),e>this.radius?d>this.radius?this.innerAngleMax=Math.PI:this.innerAngleMax=.5*Math.PI+Math.asin(d/this.radius):this.innerAngleMax=Math.asin(e/this.radius),this.outerAngleMin=Math.max(this.innerAngleMin-b,-Math.PI),this.outerAngleMax=Math.min(this.innerAngleMax+b,Math.PI);var h=this.innerAngleMax+Math.abs(this.innerAngleMin);this.spawnAngleMin=this.innerAngleMin+c*h,this.spawnAngleMax=this.innerAngleMax},g.generateRandomStartAngle=function(){var a=this.spawnAngleMax+Math.abs(this.spawnAngleMin);return this.spawnAngleMin+Math.random()*a},g.calculateAngleBounds(e.worldBounds),g},namespace("planet-pinball.components").OrbitComponent=a}(),function(){var a=include("Matter.Body"),b=include("Matter.Common"),c=include("Matter.Composite"),d=include("Matter.Constraint"),e=include("Matter.Vector"),f=include("Matter.Vertices"),g=include("planet-pinball.components.PhysicsComponents"),h={};h.create=function(h){var i={rotationSettings:{startAngle:.4,minimumAngle:-.4,maximumAngle:.4,clockwiseSpeed:.012,antiClockwiseSpeed:-.012}},j=b.extend(i,h),k=g._buildVertexList(h.shape.geometry.path),l=e.rotate(f.centre(k),j.rotationSettings.startAngle),m=e.add(h.pivotPoint,l);j.physics.position=m,j.physics.angle=j.rotationSettings.startAngle,j.physics.vertices=k;var n=a.create(j.physics),o=d.create({bodyB:n,pointA:h.pivotPoint,pointB:e.neg(l),render:{visible:!1},stiffness:1,angularStiffness:1}),p=c.create();c.add(p,n),c.add(p,o),p.minimumAngle=j.rotationSettings.minimumAngle,p.maximumAngle=j.rotationSettings.maximumAngle,p.clockwiseSpeed=j.rotationSettings.clockwiseSpeed,p.antiClockwiseSpeed=j.rotationSettings.antiClockwiseSpeed;var q=function(a){var b=p.antiClockwiseSpeed*a;s(b,p.minimumAngle,t)},r=function(a){var b=p.clockwiseSpeed*a;s(b,p.maximumAngle,u)},s=function(b,c,d){var e=b;d(n.angle,c)&&(a.setAngle(n,c),e=0),a.setAngularVelocity(n,e)},t=function(a,b){return b>=a},u=function(a,b){return a>=b},v="left"===h.paddleType;return p.raise=v?q:r,p.lower=v?r:q,p},namespace("planet-pinball.components").PaddleComponent=h}(),function(){var a=include("Matter.Common"),b=include("Matter.Bodies"),c={};c.create=function(c,d){var e=a.extend({name:c.name,collisionFilter:{group:d},render:c.render,scoreScale:c.scoreScale||1},c.physics);return b.circle(c.position.x,c.position.y,c.radius,e)},namespace("planet-pinball.components").PinballComponent=c}(),function(){var a={},b=include("Matter.Body"),c=include("Matter.Composite"),d=include("Matter.Vector"),e=include("Matter.Common"),f=include("planet-pinball.components.BumperComponent"),g=include("planet-pinball.components.TargetComponent");a.create=function(a,h){var i={x:0,y:a.orbitRadius},j=d.rotate(i,a.orbitStartAngle);a.position=d.add(a.orbitCentre,j),a.anchors=[{offset:{x:0,y:0}}],a.physics=e.extend({density:.1},a.physics);var k;return h?k=g.create(a):(k=f.create(a),k.bodies[0].render.sprite.xOffset=.5,k.bodies[0].render.sprite.yOffset=.5),k.label=a.label,k.orbitAngle=a.orbitStartAngle,k.orbitRadius=a.orbitRadius,k.orbitSpeed=-a.orbitSpeed,k.update=function(a,e){var f=!1;this.orbitAngle+=this.orbitSpeed*a,this.orbitAngle<e.outerAngleMin&&(this.orbitAngle=e.outerAngleMax,f=!0);var g={x:0,y:e.radius},h=d.rotate(g,this.orbitAngle),i="composite"===this.type?c.allBodies(this):null,j=i?i[1]:this;b.setPosition(j,d.add(e.position,h)),f&&i&&b.setPosition(i[0],d.add(e.position,h))},k},namespace("planet-pinball.components").PlanetComponent=a}(),function(){var a={},b=include("Matter.Common"),c=include("Matter.Composite"),d=include("Matter.Constraint"),e=include("planet-pinball.components.PlanetComponent"),f=include("planet-pinball.components.OrbitComponent"),g=include("planet-pinball.utilities.StringUtilities");a.create=function(a,h){var i=c.create();i._centre=a.centre,i._orbits=[],i._target=void 0,i._pinballGroup=h,i._planetCollisionMask=a.planetCollisionMask,i._isPlaying=!a.startPaused;for(var j=0;j<a.planets.length;j++){var k=a.planets[j];i._orbits.push(f.create({label:k.name,position:i._centre,radius:k.orbitRadius,dashedCircle:a.orbitProperties.dashedCircle}))}var l=function(c,d,f){var h;d.label=d.name,d.orbitCentre=i._centre,d.orbitStartAngle=f||0,d.physics.collisionFilter=d.physics.collisionFilter||{},d.physics.collisionFilter.mask=i._planetCollisionMask,d.physics.render=d.physics.render||{},d.physics.render.layer=a.planetTargetRenderLayer;var j=d.physics.render.animSprite&&d.physics.render.animSprite.spriteSheet,k=j?d.physics.render.animSprite.spriteSheet:d.physics.render.sprite.texture;if(k){d.shape=d.shape||{},d.shape.kind="circle",d.shape.geometry=d.shape.geometry||{};var l=a.targetTexture;if(c&&l)h=b.clone(d,!0),h.physics.render.sprite=h.physics.render.sprite||{},h.physics.render.sprite.texture=l,h.physics.render.animSprite=null,h.shape.geometry.radius=.5*app.getCache(l).height*a.targetImageToBodyScale;else{var m,n=app.getCache(k);if(j){var o=d.physics.render.animSprite.framePrefix+g.pad(0,4);m=n.getFrame(o).height}else m=n.height;d.shape.geometry.radius=.5*m*a.planetImageToBodyScale,h=d}}var p=e.create(h,c);return p};return i._removeTarget=function(){i._target&&(c.remove(i,i._target),i._target=void 0)},i._setTarget=function(a){i._removeTarget(),i._target=a,c.addBody(i,i._target)},i._update=function(a){i._isPlaying&&(a*=.001,i.planets.concat(i.target?[i.target]:[]).forEach(function(b,c){b.update(a,i._orbits.filter(function(a){return a.label===b.label})[0])}))},i.join=function(b){i.joint=d.create({bodyA:b,bodyB:i._target,stiffness:a.targetCatchStrength,length:1e-6,render:{visible:app.options.debug}}),c.addConstraint(i,i.joint)},i.unjoin=function(){c.remove(i,i.joint),i.joint=void 0},Object.defineProperty(i,"playOrbits",{set:function(a){i._isPlaying=a},get:function(){return i._isPlaying}}),Object.defineProperty(i,"planets",{get:function(){return i.composites},set:function(a){var b=i.planets.map(function(a){return a.label}),d=a.map(function(a){return a.name});d.filter(function(a){return b.indexOf(a)<0}).forEach(function(b){var d=a.filter(function(a){return a.name===b})[0],e=0;i.target?(e=i.target.orbitAngle,i.target=null):e=i._orbits[a.indexOf(d)].generateRandomStartAngle(),c.addComposite(i,l(!1,d,e))}),b.filter(function(a){return d.indexOf(a)<0}).forEach(function(a){c.removeComposite(i,i.composites.filter(function(b){return b.label===a})[0])})}}),Object.defineProperty(i,"target",{get:function(){return i._target},set:function(a){if(c.removeBody(i,i.target),null!==a){var b=i._orbits.filter(function(b){return b.label===a.name})[0].generateRandomStartAngle(),d=l(!0,a,b);c.addBody(i,d),i._target=d}else i._target=null}}),i._updateCallback=null,i.stopUpdate=function(){i._updateCallback&&(app.off("update",i._updateCallback),i._updateCallback=null)},i.startUpdate=function(){i._updateCallback&&i.stopUpdate(),i._updateCallback=i._update.bind(i),app.on("update",i._updateCallback)},i},namespace("planet-pinball.components").SolarSystemComponent=a}(),function(){var a=include("springroll.pixi.Button"),b=function(b,c,d,e){a.call(this,b,d,e),this._soundName=c||null},c=a.prototype,d=extend(b,a);d._onUp=function(a){c._onUp.call(this),this._soundName&&app.audio.play(this._soundName)},namespace("planet-pinball.components").SoundButton=b}(),function(){var a=include("Matter.Bodies"),b=include("Matter.Body"),c=include("Matter.Common"),d=include("Matter.Composite"),e=include("Matter.Constraint"),f=include("planet-pinball.components.PhysicsComponents"),g={};g.create=function(g,h){var i=d.create(),j=b.nextGroup(!0),k=c.extend({vertices:f._buildVertexList(g.shape.geometry.path),position:g.position,collisionFilter:{group:j}},g.physics),l=b.create(k),m=a.circle(g.position.x,g.position.y,4,{isStatic:!0,collisionFilter:{group:j},render:{visible:app.options.debug}}),n=e.create({bodyA:m,bodyB:l,stiffness:1,length:1e-4,render:{visible:app.options.debug}});return d.addBody(i,l),d.addBody(i,m),d.addConstraint(i,n),i._update=function(){l.angle>app.globals.TWO_PI?(b.rotate(l,-app.globals.TWO_PI),h()):l.angle<-app.globals.TWO_PI&&(b.rotate(l,app.globals.TWO_PI),h()),(Math.abs(l.angle)-Math.PI)*(Math.abs(l.anglePrev)-Math.PI)<0&&h()},i._updateCallback=null,i.stopUpdate=function(){i._updateCallback&&(app.off("update",i._updateCallback),i._updateCallback=null)},i.startUpdate=function(){i._updateCallback&&i.stopUpdate(),i._updateCallback=i._update.bind(i),app.on("update",i._updateCallback)},i},namespace("planet-pinball.components").SpinnerComponent=g}(),function(){var a={},b=include("Matter.Common"),c=include("Matter.Body"),d=include("Matter.Composite"),e=include("Matter.Vertices"),f=include("planet-pinball.components.PhysicsComponents");a.create=function(a){var g=a.parts||[],h=d.create();return g.forEach(function(g){var i=f._buildVertexList(g.vertices),j=b.extend(a.physics,g.physics);j.vertices=i,j.position=e.centre(i),d.addBody(h,c.create(j))}),h},namespace("planet-pinball.components").WorldComponent=a}(),function(){function a(){e.removeEventListener("canplaythrough",a,!1),e.removeEventListener("load",a,!1),h.onCompleteLoad()}function b(a,b,c){var d=document.createElement("source");d.src=b,d.type=c,a.appendChild(d)}var c="videoarea",d=.66,e=null,f=!1,g=function(a,b,d){document.getElementById(c).style.visibility="hidden",window.addEventListener("resize",h.onResize),window.addEventListener("orientationchange",h.onResize),app.container.on("soundMuted",i),h.loadCompleteCallback=a,h.endedCallback=b,h.errorCallback=d,this._deviceIsIpad=/iPad/.test(navigator.platform),this._deviceIsIpad&&this.init()},h=g.prototype,i=function(a){setTimeout(function(){e&&(e.muted=!!a.data)},20)};h.init=function(){var a=!!document.createElement("video").canPlayType;if(a){var f=Math.ceil(app.display.height),g=f*d;e=document.createElement("video"),e.setAttribute("id","video"),app.isLandscape||e.setAttribute("width",g+"px"),e.setAttribute("height",f+"px"),document.getElementById(c).appendChild(e),b(e,this._getFileName(),"video/mp4"),this.endVideo=this.endVideo.bind(this),this.videoError=this.videoError.bind(this),e.addEventListener("ended",this.endVideo,!1),e.addEventListener("error",this.videoError,!1);var h=this;setTimeout(function(){h.onResize()},20)}else endVideo()},h.startLoading=function(){if(!f)if(f=!0,this._deviceIsIpad||this.init(),e.play(),4!==e.readyState){e.addEventListener("canplaythrough",a,!1),e.addEventListener("load",a,!1);var b=this;setTimeout(function(){b.pause()},20)}else this.onCompleteLoad()},h.play=function(){e&&(document.getElementById(c).style.visibility="visible",e.play())},h.pause=function(){e&&e.pause()},h.endVideo=function(){this.endedCallback&&this.endedCallback()},h.videoError=function(){this.errorCallback&&this.errorCallback()},h.removeVideo=function(){if(app.container.off("soundMuted",i),window.removeEventListener("resize",h.onResize),window.removeEventListener("orientationchange",h.onResize),e){e.removeEventListener("canplaythrough",a,!1),e.removeEventListener("load",a,!1),e.removeEventListener("ended",this.endVideo,!1),e.pause();var b=e.parentNode;b.removeChild(e),b.parentNode.removeChild(b)}e=null},h.onCompleteLoad=function(){h.loadCompleteCallback()},h.onResize=function(){e&&(e.height=Math.ceil(app.display.height),app.isLandscape||(e.width=e.height*d))},h._getFileName=function(){var a="assets/videos/Intro";return app.isLandscape&&(a+="Landscape"),a+=".mp4"},namespace("planet-pinball.video").VideoPlayerMP4=g}(),function(){var a="videoarea",b=null,c=!1,d=function(a,b,c){e.loadCompleteCallback=a,e.endedCallback=b,e.errorCallback=c},e=d.prototype;e.init=function(){},e.startLoading=function(){if(!c){c=!0,b&&(b.stop(),b.parentNode.removeChild(b)),this.onCompleteLoad=this.onCompleteLoad.bind(this),this.endVideo=this.endVideo.bind(this),this.videoError=this.videoError.bind(this);var d={readyCallback:this.onCompleteLoad};b=new OGVPlayer(d),b.src=this._getFileName(),document.getElementById(a).appendChild(b),b.addEventListener("ended",this.endVideo,!1),b.addEventListener("error",this.videoError,!1),app.triggerResize(),b.play()}},e.play=function(){b&&b.play()},e.pause=function(){b&&b.pause()},e.endVideo=function(){this.endedCallback&&this.endedCallback()},e.videoError=function(){this.errorCallback&&this.errorCallback()},e.removeVideo=function(){if(b){b.stop();var a=b.parentNode;a.removeChild(b),a.parentNode.removeChild(a)}},e.onCompleteLoad=function(){b.pause(),app.setTimeout(function(){e.loadCompleteCallback()},3e3)},e.onResize=function(){},e._getFileName=function(){var a="assets/videos/Intro";return app.isLandscape&&(a+="Landscape"),a+=".ogv"},namespace("planet-pinball.video").VideoPlayerOGV=d}(),function(){var a=include("PIXI.Container"),b=include("PIXI.Sprite"),c=include("planet-pinball.components.LoadingBarComponent"),d=function(b){a.call(this,b),this._loaded=!1,this._setup=!1,this.background=null,this.loading=null,this.addLoadingScreen()},e=(a.prototype,extend(d,a));Object.defineProperty(e,"loadingBar",{get:function(){return this.loading}}),e.addLoadingScreen=function(){this.background=new b(app.getCache("Background")),this.background.anchor.x=.5,this.background.anchor.y=.5,this.background.position.x=.5*app.dimensions.width,this.background.position.y=.5*app.dimensions.height,this.loading=c.create(),this.loading.position.x=.5*app.dimensions.width,this.loading.position.y=645,this.addChild(this.background),this.addChild(this.loading),this.loading.playRotatingSatellite(!0)},e.removeLoadingScreen=function(){this.loading.playRotatingSatellite(!1),this.removeChild(this.loading),this.removeChild(this.background)},e.setup=function(){this._setup||(this._setup=!0,this._loaded&&this.build())},e.loaded=function(){this.removeLoadingScreen(),this._loaded=!0,this._setup&&this.build()},e.teardown=function(){this._setup=!1,this.unbuild();var a=this.children.slice();this._cleanupChildren.apply(this,a)},e._cleanupChildren=function(a){var b,c,d=arguments.length;for(c=0;d>c;c++)b=arguments[c],b&&(Array.isArray(b)&&b.length>0?this._cleanupChildren.apply(this,b):(app.animator&&app.animator.stop(b,!0),b.stop&&b.stop(),this.removeChild(b)))},e.build=function(){},e.unbuild=function(){},Object.defineProperty(e,"progress",{set:function(a){this.loading&&(this.loading.progress=a)}}),namespace("planet-pinball.panels").StandardPanel=d}(),function(){var a=include("planet-pinball.panels.StandardPanel"),b=include("planet-pinball.RenderPixi"),c=include("Matter.Runner"),d=include("Matter.Engine"),e=include("Matter.World"),f=include("Matter.Composite"),g=include("planet-pinball.services.BoundsService"),h=include("planet-pinball.services.CollisionService"),i=function(c){a.call(this),this._engine=d.create({render:{container:this,context:app.display.renderer,controller:b,options:c}}),this._collisions=new h(this._engine),this._bounds=new g,c&&c.interactive&&(this.interactive=c.interactive),this._pauseGame=this.pauseGame.bind(this),this._resumeGame=this.resumeGame.bind(this)},j=extend(i,a);Object.defineProperty(j,"paused",{get:function(){return!this._runner.enabled}}),j.build=function(){var a=this._engine.render,c=a.options,d=c.wireframes?c.wireframeBackground:c.background;b.setBackground(a,d)},j.run=function(){this._runner=c.run(this._engine),this._previousEnabledState=this._runner.enabled,app.on("paused",this._pauseGame),app.on("resumed",this._resumeGame)},j.clear=function(){app.off("paused",this._pauseGame),app.off("resumed",this._resumeGame),c.stop(this._runner)},j.add=function(a){e.add(this._engine.world,a),this.initialiseViews(a)},j.remove=function(a){e.remove(this._engine.world,a)},j.pause=function(){this._runner.enabled=!1,this._previousEnabledState=!1},j.resume=function(){this._runner.enabled=!0,this._previousEnabledState=!0},j.pauseGame=function(){this._previousEnabledState=this._runner.enabled,this._runner.enabled=!1},j.resumeGame=function(){this._runner.enabled=this._previousEnabledState},j.initialiseViews=function(a){a.constructor!==Array&&(a=[a]);var c=this;a.forEach(function(a){var d="composite"===a.type?f.allBodies(a):[a];d.forEach(function(a){b.body(c._engine,a)})})},j._cleanupChildren=function(a){var c,d,e=arguments.length;for(d=0;e>d;d++)c=arguments[d],c&&(Array.isArray(c)&&c.length>0?this._cleanupChildren.apply(this,c):(app.animator&&app.animator.stop(c,!0),c.stop&&c.stop()));b.clear(this._engine.render)},namespace("planet-pinball.panels").PhysicsPanel=i}(),function(){var a=include("planet-pinball.panels.StandardPanel"),b=include("planet-pinball.components.SoundButton"),c=include("PIXI.Sprite"),d=include("PIXI.Text"),e=include("TWEEN.Tween"),f=include("TWEEN.Easing"),g=include("planet-pinball.utilities.StringUtilities"),h=function(b,c){a.call(this,b)},i=(a.prototype,extend(h,a));i.build=function(){var a=this;this.background=new c(app.getCache("ScoreScreenBackground")),this.background.anchor.x=.5,this.background.anchor.y=.5,this.background.position.x=.5*app.dimensions.width,this.background.position.y=.5*app.dimensions.height,this.addChild(this.background);var e=app.getCache("RestartButton");this.restartButton=new b({up:e.getFrame("restart-button-up"),over:e.getFrame("restart-button-over"),down:e.getFrame("restart-button-down"),disabled:e.getFrame("restart-button-disabled")},"click"),this.restartButton.x=360,this.restartButton.y=775,this.restartButton.pivot.x=150,this.restartButton.pivot.y=150,this.addChild(this.restartButton),this._buttonFlashTextures=[this.restartButton._stateData.up.tex,this.restartButton._stateData.down.tex],this._currentButtonTexture=0,this._flashSwitchTime=1e3,this._runningUpdateTime=1e3,this._flashUpdateCallback=null,this._mouseHoveringOverButton=!1,this.restartButton.on("buttonPress",function(){a.emit("restart")}),this.restartButton.on("buttonOver",this._buttonOver.bind(this)),this.restartButton.on("buttonOut",this._buttonOut.bind(this)),this.lastScoreTextblock=new d(g.addMargin("0"),{font:"86px Komika",fill:"#fff",align:"center",textBaseline:"alphabetic",dropShadow:!0,dropShadowColor:"#000",dropShadowDistance:4}),this.lastScoreTextblock.x=360,this.lastScoreTextblock.y=300,this.lastScoreTextblock.anchor.x=.5,this.lastScoreTextblock.anchor.y=.5,this.addChild(this.lastScoreTextblock),this.highScoreTextblock=new d(g.addMargin("0"),{font:"48px Komika",fill:"#fff",align:"center",textBaseline:"alphabetic",dropShadow:!0,dropShadowColor:"#000",dropShadowDistance:4}),this.highScoreTextblock.x=360,this.highScoreTextblock.y=530,this.highScoreTextblock.anchor.x=.5,this.highScoreTextblock.anchor.y=.5,this.addChild(this.highScoreTextblock),this.emit("built")},i.unbuild=function(){this.stopButtonFlashing()},i.setLastScore=function(a){this.lastScoreTextblock.text=a.toString()||"0",this.lastScoreTextblock.text=g.addMargin(this.lastScoreTextblock.text)},i.setHighScore=function(a,b,c){if(this.highScoreTextblock.text=a.toString()||"0",this.highScoreTextblock.text=g.addMargin(this.highScoreTextblock.text),b>a||c){var d=new e(this.highScoreTextblock.scale).delay(1e3).to({x:1.3,y:1.3},400).easing(f.Bounce.Out),h=new e(this.highScoreTextblock.scale).to({x:1,y:1},400).easing(f.Bounce.Out);d.chain(h).start();var i=this;app.setTimeout(function(){i.highScoreTextblock.text=b.toString()||"0",i.highScoreTextblock.text=g.addMargin(i.highScoreTextblock.text)},1400)}},i.startButtonFlashing=function(){this._flashUpdateCallback&&this.stopButtonFlashing(),this._flashUpdateCallback=this._updateButtonFlashing.bind(this),app.on("update",this._flashUpdateCallback)},i.stopButtonFlashing=function(){this._flashUpdateCallback&&(app.off("update",this._flashUpdateCallback),this._flashUpdateCallback=null,this.restartButton.back.texture=this.restartButton._stateData.up.tex,this._currentButtonTexture=0,this._runningUpdateTime=0,this._mouseHoveringOverButton=!1)},i._updateButtonFlashing=function(a){this._runningUpdateTime+=a,this._runningUpdateTime>this._flashSwitchTime&&(this._runningUpdateTime=0,this._currentButtonTexture++,this._currentButtonTexture&=1,this._mouseHoveringOverButton||(this.restartButton.back.texture=this._buttonFlashTextures[this._currentButtonTexture]))},i._buttonOver=function(){this._mouseHoveringOverButton=!0},i._buttonOut=function(){this._mouseHoveringOverButton=!1},namespace("planet-pinball.panels").EndPanel=h}(),function(){var a=include("planet-pinball.panels.PhysicsPanel"),b=include("planet-pinball.components.WorldComponent"),c=include("planet-pinball.components.BumperComponent"),d=include("planet-pinball.components.PaddleComponent"),e=include("planet-pinball.components.PinballComponent"),f=include("planet-pinball.components.SolarSystemComponent"),g=include("planet-pinball.components.SpinnerComponent"),h=include("planet-pinball.components.LabelComponent"),i=include("planet-pinball.components.BlackHoleComponent"),j=include("planet-pinball.components.BodylessComponent"),k=include("planet-pinball.decisionMaking.base.StateMachine"),l=include("Matter.Body"),m=include("Matter.Composite"),n=include("Matter.Vector"),o=include("planet-pinball.utilities.StringUtilities"),p=include("planet-pinball.components.InterstitialComponent"),q=include("planet-pinball.components.LivesHeartComponent"),r=include("TWEEN.Tween"),s=function(b){a.call(this,b);this._pinballs=[],this._onPinballOutsideGame=void 0,this._onPinballOutsidePlay=void 0,this._onPinballWorldCollision=void 0,this._onPinballPlanetCollision=void 0,this._onPinballTargetCollision=void 0,this._onPinballBumperCollision=void 0,this._onPinballSunspotPocketCollision=void 0,this._onPinballBlackHoleCollision=void 0,this._onSpinnerRevolution=void 0,this._onPinballAttachedToTarget=void 0},t=a.prototype,u=extend(s,a);Object.defineProperty(u,"onPinballOutsideGame",{set:function(a){this._onPinballOutsideGame=a}}),Object.defineProperty(u,"onPinballOutsidePlay",{set:function(a){this._onPinballOutsidePlay=a}}),Object.defineProperty(u,"onPinballWorldCollision",{set:function(a){this._onPinballWorldCollision=a}}),Object.defineProperty(u,"onPinballPlanetCollision",{set:function(a){this._onPinballPlanetCollision=a}}),Object.defineProperty(u,"onPinballTargetCollision",{set:function(a){this._onPinballTargetCollision=a}}),Object.defineProperty(u,"onPinballBumperCollision",{set:function(a){this._onPinballBumperCollision=a}}),Object.defineProperty(u,"onPinballLifesaverCollision",{set:function(a){this._onPinballLifesaverCollision=a}}),Object.defineProperty(u,"onPinballSunspotPocketCollision",{set:function(a){this._onPinballSunspotPocketCollision=a}}),Object.defineProperty(u,"onPinballBlackHoleCollision",{set:function(a){this._onPinballBlackHoleCollision=a}}),Object.defineProperty(u,"onSpinnerRevolution",{set:function(a){this._onSpinnerRevolution=a}}),Object.defineProperty(u,"onPinballAttachedToTarget",{set:function(a){this._onPinballAttachedToTarget=a}}),Object.defineProperty(u,"paddleLeft",{get:function(){return this._paddles[0]}}),Object.defineProperty(u,"paddleRight",{get:function(){return this._paddles[1]}}),Object.defineProperty(u,"sunspotPocket",{get:function(){return this._sunspotPocket}}),Object.defineProperty(u,"solarSystem",{get:function(){return this._solarSystem}}),u.build=function(){t.build.call(this),this._pinballGroup=l.nextGroup(!1),this._bounds.start(),this._solarSystem=f.create(app.config.components.solarSystemGame,this._pinballGroup),this._solarSystem.startUpdate(),this._paddles=app.config.components.paddles.map(function(a){return a.physics.collisionFilter=a.physics.collisionFilter||{},a.physics.collisionFilter.mask=app.config.components.pinball.physics.collisionFilter.category,d.create(a)});var a=app.config.components.bumpers,e=a.common.concat(a.game);this._bumpers=e.map(function(a){return c.create(a)});var m=this;this._spinner=g.create(app.config.components.satellite,function(){m._onSpinnerRevolution&&m._onSpinnerRevolution()}),this._spinner.startUpdate(),this._sunspotPocket=c.create(app.config.components.sunspotPocket),this._tunnel=b.create(app.config.components.tunnel),this._tunnelSprite=j.create(app.config.components.tunnelSprite),this._blackHoleCollider=i.create(app.config.components.blackHoleCollider),this._world=b.create(app.config.components.world),app.config.components.worldSprite.position={x:.5*app.dimensions.width,y:.5*app.dimensions.height},this._worldSprite=j.create(app.config.components.worldSprite);var n=app.config.components.lives,o=app.getCache(n.image.asset);o.gotoAndStop("on"),this._lives=h.create(n,o);var p=app.config.components.scoreboard,q=app.getCache(p.image.asset);q.gotoAndStop("on"),this._scoreboard=h.create(p,q),this._scoreStartPosition=this._scoreboard.background.position.y,this._scoreStartRotation=this._scoreboard.background.rotation,this._scoreStartScale=this._scoreboard.background.scale.x;var r=app.config.components.sydney,s=app.getCache(r.image.asset);s.anchor.x=r.image.anchor.x,s.anchor.y=r.image.anchor.y,s.position.x=r.image.position.x,s.position.y=r.image.position.y,s.scale.x=r.image.scale.x,s.scale.y=r.image.scale.y,this._sydney=s;var u=app.config.components.jet,v=app.getCache(u.image.asset);v.anchor.x=u.image.anchor.x,v.anchor.y=u.image.anchor.y,v.position.x=u.image.position.x,v.position.y=u.image.position.y,v.scale.x=u.image.scale.x,v.scale.y=u.image.scale.y,this._jet=v,this.add(this._solarSystem),this.add(this._paddles),this.add(this._bumpers),this.add(this._spinner),this.add(this._sunspotPocket),this.add(this._tunnel),this.add(this._tunnelSprite),this.add(this._blackHoleCollider),this.add(this._world),this.add(this._worldSprite),this.addChild(this._lives),
this.addChild(this._scoreboard),this.addChild(this._sydney),this.addChild(this._jet),this.setFlashy(!1);var w=app.config.stateMachines;this._bumpers.forEach(function(a){k.addTo(a,w.lightUpStateMachine)}),k.addTo(this._sunspotPocket,w.sunspotStateMachine),this.emit("built")},u.unbuild=function(){this._solarSystem.planets&&this._solarSystem.planets.forEach(function(a){k.removeFrom(a)}),this._bumpers.forEach(function(a){k.removeFrom(a)}),k.removeFrom(this._sunspotPocket),this.remove(this._solarSystem),this.remove(this._paddles),this.remove(this._bumpers),this.remove(this._spinner),this.remove(this._sunspotPocket),this.remove(this._tunnel),this.remove(this._tunnelSprite),this.remove(this._blackHoleCollider),this.remove(this._world),this.remove(this._worldSprite),this.removeChild(this._lives),this.removeChild(this._scoreboard),this.removeChild(this._jet),this.removeChild(this._sydney),this._spinner.stopUpdate(),this._solarSystem.stopUpdate(),this._bounds.stop()},u.paddleRaiseLeft=function(a){this._paddles[0].raise(a)},u.paddleRaiseRight=function(a){this._paddles[1].raise(a)},u.paddleLowerLeft=function(a){this._paddles[0].lower(a)},u.paddleLowerRight=function(a){this._paddles[1].lower(a)},u.addPinball=function(a,b){a.position=b.position,a.radius=.5*app.getCache(a.render.sprite.texture).height*a.imageToBodyScale;var c=e.create(a,this._pinballGroup);return this._registerPinballCollisionCallbacks(c),this._registerPinballTunnelOverlapCallbacks(c),this._registerSolarSystemCollisionCallbacks(c),c.isInTunnel=!1,this.add(c),this._pinballs.push(c),this._launchPinball(c,b),c},u.removePinball=function(a){this._deregisterPinballCollisionCallbacks(a),this._deregisterPinballTunnelOverlapCallbacks(a),this._deregisterSolarSystemCollisionCallbacks(a),this._pinballs.splice(this._pinballs.indexOf(a),1),this.remove(a)},u.goToStage=function(a,b){var c=this;a>app.config.components.solarSystemGame.planets.length||(this._pinballs.forEach(function(a){c._deregisterSolarSystemCollisionCallbacks(a)}),this._solarSystem.planets&&this._solarSystem.planets.forEach(function(a){k.removeFrom(a)}),this._solarSystem.planets=app.config.components.solarSystemGame.planets.slice(0,a),this.initialiseViews(this._solarSystem.planets),null!==b?(this._solarSystem.target=app.config.components.solarSystemGame.planets[b-1],this.initialiseViews(this._solarSystem.target)):this._solarSystem.target=null,this._solarSystem.planets.forEach(function(a){k.addTo(a,app.config.stateMachines.lightUpStateMachine)}),this._pinballs.forEach(function(a){c._registerSolarSystemCollisionCallbacks(a)}))},u.showInterstitial=function(a,b){this.interstitial=p.create(app.config.components.interstitials[a]),this.addChild(this.interstitial),this.interstitial["in"](b)},u.hideInterstitial=function(){var a=function(){this.removeChild(this.interstitial),this.interstitial=void 0};this.interstitial.out(a.bind(this))},u.setLives=function(a,b){if(this._lives.text=o.addMargin(a.toString()),b){this._livesAnimated=new q(app.config.components.livesAnimated),this.addChild(this._livesAnimated),this._livesAnimated.endPosition=app.config.components.lives.image.position,this._livesAnimated.halfwayPosition.x=360,this._livesAnimated.halfwayPosition.y=90;var c=function(){this.removeChild(this._livesAnimated),this._livesAnimated=void 0,app.animator.play(this._lives.background,"on")};this._livesAnimated.executeTween(c.bind(this))}},u.setScore=function(a,b){if(this._scoreboard.text=o.addMargin(a.toString()),b){app.animator.play(this._scoreboard.background,"on");var c=this._scoreStartPosition,d=[c-10,c+10,c-5,c+5,c];new r(this._scoreboard.textBlock.position).to({y:d},300).start();var e=this._scoreStartRotation,f=[e+.1,e-.1,e+.05,e-.05,e];new r(this._scoreboard.background).to({rotation:f},300).start();var g=this._scoreStartScale,h=[1.25*g,g];new r(this._scoreboard.background.scale).to({x:h,y:h},300).start()}},u.attachPinballToTarget=function(a){if(!this._solarSystem.joint&&this._solarSystem.target&&!a.isInTunnel){this._solarSystem.join(a),this._onPinballAttachedToTarget&&this._onPinballAttachedToTarget(a),this._deregisterPinballTunnelOverlapCallbacks(a);var b=app.config.components.solarSystemGame;a.collisionFilter.mask=b.planetCollisionMask;var c=this;app.setTimeout(function(){c._onPinballTargetCollision&&c._onPinballTargetCollision(a),c._solarSystem.unjoin()},b.targetCatchTime)}},u.placeBallInTarget=function(a){if(this._solarSystem.target){for(var b=null,c=0;c<this._pinballs.length;c++){var d=this._pinballs[c];if(d.name===a){b=d;break}}b&&(this.attachPinballToTarget(b),l.setPosition(b,this._solarSystem.target.position))}},u.placeBallInBlackHole=function(a){for(var b=null,c=0;c<this._pinballs.length;c++){var d=this._pinballs[c];if(d.name===a){b=d;break}}if(b){var e={x:this._blackHoleCollider.position.x,y:this._blackHoleCollider.position.y-20};l.setPosition(b,e)}},u.setFlashy=function(a){a?(app.animator.play(this._sydney,"on"),app.animator.play(this._jet,"on")):(app.animator.stop(this._sydney),app.animator.stop(this._jet),this._sydney.gotoAndStop(0),this._jet.gotoAndStop(1))},u.toggleWorldCollisionShapeVisibility=function(){var a=m.allBodies(this._tunnel);a.forEach(function(a){a.render.visible=!a.render.visible}),this._blackHoleCollider.render.visible=!this._blackHoleCollider.render.visible;var b=m.allBodies(this._world);b.forEach(function(a){a.render.visible=!a.render.visible})},u._registerPinballCollisionCallbacks=function(a){var b=this;b._collisions.registerPair(a,b._world,function(){b._onPinballWorldCollision&&b._onPinballWorldCollision(a)}),b._bumpers.forEach(function(c){b._collisions.registerPair(a,c,function(){b._onPinballBumperCollision&&b._onPinballBumperCollision(a,c)})}),b._collisions.registerPair(a,b._sunspotPocket,function(){b._onPinballSunspotPocketCollision&&b._onPinballSunspotPocketCollision()}),a.outOfBoundsSubscription=b._bounds.subscribe(a,app.config.boundaries.play,function(){b._onPinballOutsidePlay&&b._onPinballOutsidePlay(a)},!0,!1,!0),a.inBlackHoleSubscription=b._bounds.subscribe(a,this._blackHoleCollider.bounds,function(){b._onPinballBlackHoleCollision&&b._onPinballBlackHoleCollision(a)},!1,!0)},u._deregisterPinballCollisionCallbacks=function(a){var b=this;b._collisions.deregisterPair(a,b._world),b._bumpers.forEach(function(c){b._collisions.deregisterPair(a,c)}),b._collisions.deregisterPair(a,b._sunspotPocket),b._bounds.unsubscribe(a.outOfBoundsSubscription),a.outOfBoundsSubscription=null},u._registerPinballTunnelOverlapCallbacks=function(a){var b=this,c={min:{x:625,y:0},max:{x:800,y:445}},d={group:a.collisionFilter.group,mask:a.collisionFilter.mask};a.overlappingTunnel=b._bounds.subscribe(a,c,function(){a.collisionFilter.group=0,a.collisionFilter.mask=16,a.isInTunnel=!0},!1),a.notOverlappingTunnel=b._bounds.subscribe(a,c,function(){a.collisionFilter.group=d.group,a.collisionFilter.mask=d.mask,a.isInTunnel=!1},!0)},u._deregisterPinballTunnelOverlapCallbacks=function(a){this._bounds.unsubscribe(a.overlappingTunnel),this._bounds.unsubscribe(a.notOverlappingTunnel)},u._registerSolarSystemCollisionCallbacks=function(a){var b=this;a.targetOverlapSubscriptions=[],b._solarSystem.planets.forEach(function(c){b._collisions.registerPair(a,c,function(){b._onPinballPlanetCollision&&b._onPinballPlanetCollision(a,c)})}),b._solarSystem.target&&a.targetOverlapSubscriptions.push(b._bounds.subscribe(a,b._solarSystem.target.bounds,function(){b.attachPinballToTarget(a)}))},u._deregisterSolarSystemCollisionCallbacks=function(a){var b=this;b._solarSystem.planets.forEach(function(c){b._collisions.deregisterPair(a,c)}),b._solarSystem.target&&(a.targetOverlapSubscriptions.forEach(function(a){b._bounds.unsubscribe(a)}),a.targetOverlapSubscriptions=[])},u._launchPinball=function(a,b){var c={x:b.velocity.x,y:b.velocity.y},d=b.velocity.divergenceBias||0,e=b.velocity.maxDivergence||0;e-=d;var f=(2*Math.random()-1)*e;0>f&&(d=-d),f+=d;var g=n.rotate(c,f);l.setVelocity(a,g)},namespace("planet-pinball.panels").GamePanel=s}(),function(){var a=include("planet-pinball.panels.StandardPanel"),b=include("planet-pinball.components.SoundButton"),c=include("PIXI.Sprite"),d=function(b){a.call(this,b)},e=(a.prototype,extend(d,a));e.build=function(){var a=this;this.addSplashScreen();var c=app.getCache("PlayButton");this.playButton=new b({up:c.getFrame("play-button-up"),over:c.getFrame("play-button-over"),down:c.getFrame("play-button-down"),disabled:c.getFrame("play-button-disabled")},"click"),this.playButton.x=360,this.playButton.y=780,this.playButton.pivot.x=150,this.playButton.pivot.y=0,this.playButton.on("buttonPress",function(){a.emit("play")}),c=app.getCache("SkipButton"),this.skipButton=new b({up:c.getFrame("skip-button-up"),over:c.getFrame("skip-button-over"),down:c.getFrame("skip-button-down"),disabled:c.getFrame("skip-button-disabled")},"click"),this.skipButton.on("buttonPress",function(){a.emit("skip")}),this.skipButton.x=50,this.skipButton.y=50,this.skipButton.pivot.x=0,this.skipButton.pivot.y=0,this.skipButton.visible=!1,this.addChild(this.playButton),this.addChild(this.skipButton),this.emit("built")},e.addSplashScreen=function(){this.background=new c(app.getCache("SplashScreenBackground")),this.background.anchor.x=.5,this.background.anchor.y=.5,this.background.position.x=.5*app.dimensions.width,this.background.position.y=.5*app.dimensions.height,this.addChild(this.background),this.background.visible=!0,this.playButton&&(this.playButton.visible=!0)},e.removeSplashScreen=function(){this.background&&(this.background.visible=!1),this.playButton&&(this.playButton.visible=!1)},e.addIntroScreen=function(){this.skipButton.visible=!0},e.removeIntroScreen=function(){this.skipButton.visible=!1},namespace("planet-pinball.panels").SplashPanel=d}(),function(){var a=include("planet-pinball.panels.PhysicsPanel"),b=include("planet-pinball.components.WorldComponent"),c=include("planet-pinball.components.BumperComponent"),d=include("planet-pinball.components.PaddleComponent"),e=include("planet-pinball.components.PinballComponent"),f=include("planet-pinball.components.SolarSystemComponent"),g=include("planet-pinball.components.SpinnerComponent"),h=include("planet-pinball.components.BodylessComponent"),i=include("planet-pinball.components.InterstitialComponent"),j=include("planet-pinball.decisionMaking.base.StateMachine"),k=include("Matter.Body"),l=include("Matter.Composite"),m=include("Matter.Vector"),n=include("PIXI.Sprite"),o=include("springroll.pixi.Button"),p=function(b){a.call(this,b);this._pinballs=[],this._onPinballOutsideGame=void 0,this._onPinballOutsidePlay=void 0,this._onPinballWorldCollision=void 0,this._onPinballTargetCollision=void 0,this._onPinballBumperCollision=void 0,this._onSpinnerRevolution=void 0,this._onSkipButtonPress=void 0,this._pinballGroup=k.nextGroup(!1)},q=a.prototype,r=extend(p,a);Object.defineProperty(r,"onPinballOutsideGame",{set:function(a){this._onPinballOutsideGame=a}}),Object.defineProperty(r,"onPinballOutsidePlay",{set:function(a){this._onPinballOutsidePlay=a}}),Object.defineProperty(r,"onPinballWorldCollision",{set:function(a){this._onPinballWorldCollision=a}}),Object.defineProperty(r,"onPinballTargetCollision",{set:function(a){this._onPinballTargetCollision=a}}),Object.defineProperty(r,"onPinballBumperCollision",{set:function(a){this._onPinballBumperCollision=a}}),Object.defineProperty(r,"onSpinnerRevolution",{set:function(a){this._onSpinnerRevolution=a}}),Object.defineProperty(r,"onPinballLifesaverCollision",{set:function(a){this._onPinballLifesaverCollision=a}}),Object.defineProperty(r,"onSkipButtonPress",{set:function(a){this._onSkipButtonPress=a}}),Object.defineProperty(r,"paddleLeft",{get:function(){return this._paddles[0]}}),Object.defineProperty(r,"paddleRight",{get:function(){return this._paddles[1]}}),r.build=function(){q.build.call(this),this._bounds.start(),this._solarSystem=f.create(app.config.components.solarSystemTutorial,this._pinballGroup),this._solarSystem.startUpdate();var a=app.config.components.targetOuterZone;a.position=app.config.components.solarSystemTutorial.centre,this._targetOuterZone=h.create(a),this._paddles=app.config.components.paddles.map(function(a){return a.physics.collisionFilter=a.physics.collisionFilter||{},a.physics.collisionFilter.mask=app.config.components.pinball.physics.collisionFilter.category,d.create(a)});var e=app.config.components.bumpers,i=e.common.concat(e.tutorial);this._bumpers=i.map(function(a){return c.create(a)});var k=this;this._spinner=g.create(app.config.components.satellite,function(){k._onSpinnerRevolution&&k._onSpinnerRevolution()}),this._spinner.startUpdate(),this._world=b.create(app.config.components.world),app.config.components.worldSprite.position={x:.5*app.dimensions.width,y:.5*app.dimensions.height},this._worldSprite=h.create(app.config.components.worldSprite);var l=app.getCache("SkipButton");this._skipButton=new o({up:l.getFrame("skip-button-up"),over:l.getFrame("skip-button-over"),down:l.getFrame("skip-button-down"),disabled:l.getFrame("skip-button-disabled")},null),this._skipButton.position.x=540,this._skipButton.position.y=5,this._skipButton.on("buttonPress",function(){k._onSkipButtonPress&&k._onSkipButtonPress()}),this.add(this._solarSystem),this.add(this._targetOuterZone),this.add(this._paddles),this.add(this._bumpers),this.add(this._spinner),this.add(this._world),this.add(this._worldSprite),app.options.debug&&this.addChild(this._skipButton);var m=app.config.stateMachines;this._bumpers.forEach(function(a){j.addTo(a,m.lightUpStateMachine)}),this.emit("built")},r.unbuild=function(){this._bumpers.forEach(function(a){j.removeFrom(a)}),this.remove(this._solarSystem),this.remove(this._targetOuterZone),this.remove(this._paddles),this.remove(this._bumpers),this.remove(this._spinner),this.remove(this._world),this.remove(this._worldSprite),app.options.debug&&this.removeChild(this._skipButton),this._spinner.stopUpdate(),this._solarSystem.stopUpdate(),this._bounds.stop()},r.paddleRaiseLeft=function(a){this._paddles[0].raise(a)},r.paddleRaiseRight=function(a){this._paddles[1].raise(a)},r.paddleLowerLeft=function(a){this._paddles[0].lower(a)},r.paddleLowerRight=function(a){this._paddles[1].lower(a)},r.addPinball=function(){var a=app.config.components.pinball;a.position=app.config.setup.launcher.position,a.radius=.5*app.getCache(a.render.sprite.texture).height*a.imageToBodyScale;var b=e.create(a,this._pinballGroup);return this._registerPinballCollisionCallbacks(b),this._registerSolarSystemCollisionCallbacks(b),this.add(b),this._pinballs.push(b),this._launchPinball(b,app.config.setup.launcher),b},r.removePinball=function(a){this._deregisterPinballCollisionCallbacks(a),this._deregisterSolarSystemCollisionCallbacks(a),this._pinballs.splice(this._pinballs.indexOf(a),1),this.remove(a)},r.goToStage=function(a,b){var c=this,d=app.config.components.solarSystemTutorial;a>d.planets.length||(this._pinballs.forEach(function(a){c._deregisterSolarSystemCollisionCallbacks(a)}),this._solarSystem.planets=d.planets.slice(0,a),null!==b?this._solarSystem.target=d.planets[b-1]:this._solarSystem.target=null,this._pinballs.forEach(function(a){c._registerSolarSystemCollisionCallbacks(a)}))},r.attachPinballToTarget=function(a){if(!this._solarSystem.joint){this._solarSystem.join(a);var b=app.config.components.solarSystemTutorial;a.collisionFilter.mask=b.planetCollisionMask;var c=this;app.setTimeout(function(){c._onPinballTargetCollision&&c._onPinballTargetCollision(a),c._solarSystem.unjoin()},b.targetCatchTime)}},r.placeBallInTarget=function(a){if(this._solarSystem.target){for(var b=null,c=0;c<this._pinballs.length;c++){var d=this._pinballs[c];if(d.name===a){b=d;break}}b&&(this.attachPinballToTarget(b),k.setPosition(b,this._solarSystem.target.position))}},r.toggleWorldCollisionShapeVisibility=function(){var a=l.allBodies(this._world);a.forEach(function(a){a.render.visible=!a.render.visible})},r.addSun=function(){this._sun=new n(app.getCache("Sun"));this._sun.getBounds();this._sun.position.x=app.config.components.solarSystemTutorial.centre.x,this._sun.position.y=app.config.components.solarSystemTutorial.centre.y,this._sun.scale.x=.28,this._sun.scale.y=.28,this._sun.anchor.x=.5,this._sun.anchor.y=.5,this.addChild(this._sun)},r.showInterstitial=function(a){this.interstitial=i.create(app.config.components.sunInterstitial),this.addChild(this.interstitial),this.interstitial["in"]()},r.hideInterstitial=function(){var a=function(){this.removeChild(this.interstitial),this.interstitial=void 0};this.interstitial.out(a.bind(this))},r.startPaddlesFlashing=function(){var a=this._paddles[0].bodies[0],b=this._paddles[1].bodies[0];app.animator.play(a.movieClip,"on"),app.animator.play(b.movieClip,"on")},r.stopPaddlesFlashing=function(){var a=this._paddles[0].bodies[0],b=this._paddles[1].bodies[0];app.animator.stop(a.movieClip),app.animator.stop(b.movieClip),a.movieClip.gotoAndStop(0),b.movieClip.gotoAndStop(0)},r._registerPinballCollisionCallbacks=function(a){var b=this;b._collisions.registerPair(a,b._world,function(){b._onPinballWorldCollision&&b._onPinballWorldCollision(a)}),b._bumpers.forEach(function(c){b._collisions.registerPair(a,c,function(){b._onPinballBumperCollision&&b._onPinballBumperCollision(a,c)})}),a.outOfBoundsSubscription=b._bounds.subscribe(a,app.config.boundaries.play,function(){b._onPinballOutsidePlay&&b._onPinballOutsidePlay(a)},!0)},r._deregisterPinballCollisionCallbacks=function(a){var b=this;b._collisions.deregisterPair(a,b._world),b._bumpers.forEach(function(c){b._collisions.deregisterPair(a,c)}),b._bounds.unsubscribe(a.outOfBoundsSubscription),a.outOfBoundsSubscription=null},r._registerSolarSystemCollisionCallbacks=function(a){var b=this;a.targetOverlapSubscriptions=[],b._solarSystem.target&&a.targetOverlapSubscriptions.push(b._bounds.subscribe(a,b._solarSystem.target.bounds,function(){b.attachPinballToTarget(a)}))},r._deregisterSolarSystemCollisionCallbacks=function(a){var b=this;b._solarSystem.target&&(a.targetOverlapSubscriptions.forEach(function(a){b._bounds.unsubscribe(a)}),a.targetOverlapSubscriptions=[])},r._launchPinball=function(a,b){var c={x:b.velocity.x,y:b.velocity.y},d=b.velocity.divergenceBias||0,e=b.velocity.maxDivergence||0;e-=d;var f=(2*Math.random()-1)*e;0>f&&(d=-d),f+=d;var g=m.rotate(c,f);k.setVelocity(a,g)},namespace("planet-pinball.panels").TutorialPanel=p}(),function(){var a=include("springroll.State"),b=function(b,c){a.call(this,b,c);var d=this;this._loaded=!1,this._entered=!1,this._built=!1,this._started=!1,this._isReady=function(){return this._built&&this._entered&&this._loaded&&!this._started},b.on("built",function(){d.built()}),app.preload.isPreloadable(c.name)?(app.preload.on(c.name+"-progress",function(a){b.progress=a}),app.preload.once(c.name+"-complete",function(a){b.loaded(),d.loaded()})):(b.loaded(),d.loaded())},c=(a.prototype,extend(b,a));c.enter=function(){this._entered=!0,this._loaded?this.panel.setup():this.panel.loadingBar.playRotatingSatellite(!0),this._isReady()&&this._callStart()},c.loaded=function(){this._loaded=!0,this.panel.loadingBar.playRotatingSatellite(!1),this.panel.setup(),this._isReady()&&this._callStart()},c.built=function(){if(this.scaling){var a=this.scalingItems;a&&(a.everything?(this.panel.position.x=this.panel.position.y=0,this.panel.scale.x=this.panel.scale.y=1,this.scaling.addItem(this.panel,{align:"top-left",titleSafe:!0})):this.scaling.addItems(this.panel,a))}this._built=!0,this._isReady()&&this._callStart()},c.exit=function(){this._started=!1,this._built=!1,this._entered=!1,this.panel.teardown(),this.stop()},c.start=function(){},c.stop=function(){},c._callStart=function(){this._started=!0,this.start()},namespace("planet-pinball.states").StandardState=b}(),function(){var a=include("planet-pinball.states.StandardState"),b=function(b,c){a.call(this,b,c),this._instructionsVO="v-score-replay",this._instructionsTimeout=12e3},c=extend(b,a);c.start=function(){this.panel.on("restart",this._restart.bind(this)),app.music="end";var a=[];a=a.concat("v-score-phrase");var b=parseInt(app.storage.session.lastScore),c=parseInt(app.storage.session.highScore)||0,d=b-c;0===b?a=a.concat("v-score-congratulations-zero"):d>0?(app.storage.session.highScore=app.storage.session.lastScore,a=a.concat("v-score-congratulations-higher")):a=a.concat("v-score-congratulations-lower"),this._timeoutCallback=this._update.bind(this);var e=this;a=a.concat(function(){e.panel.startButtonFlashing()},this._instructionsVO,function(){app.on("update",e._timeoutCallback)}),app.audio.queue(a),this.panel.setLastScore(b),this.panel.setHighScore(c,b)},c.stop=function(){this.panel.removeListener("restart",this._restart.bind(this)),app.audio.stop(),this.panel.stopButtonFlashing(),app.off("update",this._timeoutCallback)},c._restart=function(){app.audio.queue([this.nextState.bind(this)])};var d=0;c._update=function(a){d+=a,d>this._instructionsTimeout&&(d=0,app.audio.queue([this._instructionsVO]))},namespace("planet-pinball.states").EndState=b}(),function(){var a=include("planet-pinball.states.StandardState"),b=include("planet-pinball.utilities.MultitouchTracker"),c=function(c,d){a.call(this,c,d);this._multitouchTracker=new b(app.isLandscape),this._sunspotInBlackHole=!1,this._at={},this._pinballs=[],this._score=0,this._lives=0,this._stage={index:0,at:{},died:0},this._pinballConfigs={pinball:{pinballConfig:app.config.components.pinball,launcherConfig:app.config.setup.launcher},sunspot:{pinballConfig:app.config.components.sunspotPinball,launcherConfig:app.config.setup.sunspotLauncher}},this._mouseOutOfWindowCallback=null,this._pinballsCanBeLost=!0,this.die=function(a){this._pinballs.splice(this._pinballs.indexOf(a),1),this.panel.removePinball(a)},this.spawn=function(a){var b=this.panel.addPinball(a.pinballConfig,a.launcherConfig);b.at=new Date,this._pinballs.push(b),app.audio.play("spawn")},this.nextStage=function(a){var b=this,c=[],d=b._stage.index;b._stage.index++,b.die(a),b.panel.goToStage(b._stage.index,null),this.score(app.config.score.target*a.scoreScale),"sunspotPinball"===a.name&&this.panel.sunspotPocket.stateMachine.goToState("reappearing");var e,f,g=!1;"sunspotPinball"===a.name?(e="sunspot-in-target",f="v-congratulations-sunspot",this._pinballs[0]&&(g=!0)):(e="payoff-"+d,f="v-congratulations"),app.audio.play(e),app.audio.play("payoff-tune");var h=function(){b._lives!==app.config.setup.lives.max&&(b._lives++,b.panel.setLives(b._lives,!0))};c=c.concat(function(){app.sound.pause("gameplay")},5,function(){b.panel.pause(),b.panel.solarSystem.playOrbits=!1},495,f,function(){b.panel.showInterstitial(d,h)},"planet-enlarges","v-fact-"+d,function(){b.panel.hideInterstitial()},300,"planet-shrinks",500,function(){b._pinballsCanBeLost=!0,g&&b.die(b._pinballs[0])},function(){b.panel.resume(),b.panel.solarSystem.playOrbits=!0}),c=this._stage.index>=app.config.setup.stages.max?c.concat(function(){b.panel.setFlashy(!0)},"v-countdown",function(){b.spawn(b._pinballConfigs.pinball)},function(){b.panel.setFlashy(!1)},function(){b._stage.at=new Date}):c.concat(function(){b.panel.goToStage(b._stage.index,b._stage.index+1)},"v-goal-"+b._stage.index,function(){b.panel.setFlashy(!0)},"v-countdown",function(){b.spawn(b._pinballConfigs.pinball)},function(){b.panel.setFlashy(!1)},function(){b._stage.at=new Date}),c=c.concat(function(){app.sound.resume("gameplay",!1)}),app.audio.queue(c)},this._handleInput=function(a){if(!this.panel.paused&&(app.keyboard.isDown("arrow_left")||this._multitouchTracker.hasLeftTouches?this.panel.paddleRaiseLeft(a):this.panel.paddleLowerLeft(a),app.keyboard.isDown("arrow_right")||this._multitouchTracker.hasRightTouches?this.panel.paddleRaiseRight(a):this.panel.paddleLowerRight(a),(app.keyboard.justPressed("arrow_left")||this._multitouchTracker.leftJustPressed)&&app.audio.play("flip-down"),(app.keyboard.justPressed("arrow_right")||this._multitouchTracker.rightJustPressed)&&app.audio.play("flip-down"),this._multitouchTracker.clear(),app.options.debug)){var b=this._stage.index;if(app.keyboard.justPressed("0")?b=0:app.keyboard.justPressed("1")?b=1:app.keyboard.justPressed("2")?b=2:app.keyboard.justPressed("3")?b=3:app.keyboard.justPressed("4")?b=4:app.keyboard.justPressed("5")?b=5:app.keyboard.justPressed("6")?b=6:app.keyboard.justPressed("7")?b=7:app.keyboard.justPressed("8")&&(b=8),b!==this._stage.index){var c=8===b?null:b+1;this.panel.goToStage(b,c),this._stage.index=b}var d=!1,e=!1;this._pinballs.forEach(function(a){"pinball"===a.name&&(d=!0),"sunspotPinball"===a.name&&(e=!0)}),app.keyboard.justPressed("a")&&(d||this.spawn(this._pinballConfigs.pinball),this.panel.placeBallInTarget(app.config.components.pinball.name)),app.keyboard.justPressed("z")&&(e||this.spawn(this._pinballConfigs.sunspot),this.panel.placeBallInTarget(app.config.components.sunspotPinball.name)),app.keyboard.justPressed("s")&&(d||this.spawn(this._pinballConfigs.pinball),this.panel.placeBallInBlackHole(app.config.components.pinball.name)),app.keyboard.justPressed("x")&&(e||this.spawn(this._pinballConfigs.sunspot),this.panel.placeBallInBlackHole(app.config.components.sunspotPinball.name)),app.keyboard.justPressed("q")?(this.panel.sunspotPocket.stateMachine.goToState("closing"),this.panel.sunspotPocket.stateMachine.goToState("reappearing")):app.keyboard.justPressed("w")?this.panel.sunspotPocket.stateMachine.goToState("opening"):app.keyboard.justPressed("e")&&this.panel.sunspotPocket.stateMachine.goToState("hiding"),app.keyboard.justPressed("d")&&(app.globals.visualiseRigidBodies=!app.globals.visualiseRigidBodies,this.panel.toggleWorldCollisionShapeVisibility());var f=this;if(app.keyboard.justPressed("k")&&this._pinballs.forEach(function(a){return f.kill(a)}),app.keyboard.justPressed("p")){this.panel.showInterstitial(this._stage.index);var g=function(){this.panel.hideInterstitial()};app.setTimeout(g.bind(this),3e3)}}},this.panel.onPinballOutsidePlay=this.kill.bind(this),this.panel.onPinballOutsideGame=this.reset.bind(this),this.panel.onPinballPlanetCollision=this.bump.bind(this),this.panel.onPinballTargetCollision=this.nextStage.bind(this),this.panel.onPinballWorldCollision=this.bounce.bind(this),this.panel.onPinballBumperCollision=this.bump.bind(this),this.panel.onPinballSunspotPocketCollision=this.pinballSunspotPocketCollision.bind(this),this.panel.onPinballBlackHoleCollision=this.pinballBlackHoleCollision.bind(this),this.panel.onSpinnerRevolution=this.spin.bind(this),this.panel.onPinballAttachedToTarget=this.onPinballAttachedToTarget.bind(this)},d=extend(c,a);Object.defineProperty(d,"stage",{get:function(){return this._stage}}),d.start=function(){var a=this;this._handleInputCallback=this._handleInput.bind(this),app.on("update",this._handleInputCallback),this.panel.run(),app.keyboard.enabled=!0,this._multitouchTracker.start(this.panel),this.refresh(),this.panel.goToStage(this._stage.index,this._stage.index+1),app.music="gameplay",app.analytics.sunspotReleaseCount=0,this._newVOQueuedCallback=this._newVOQueued.bind(this),app.audio.queuedAudioCallback=this._newVOQueuedCallback,this.panel.setLives(this._lives),this.score(-this._score),app.audio.queue(["v-introduction","v-goal-"+a._stage.index,function(){a.panel.setFlashy(!0)},"v-countdown",function(){a.spawn(a._pinballConfigs.pinball)},function(){a.panel.setFlashy(!1)},function(){a._stage.at=new Date}])},d.stop=function(){app.keyboard&&(app.keyboard.enabled=!1),this._multitouchTracker.stop(this.panel),this._newVOQueuedCallback=null,app.audio.queuedAudioCallback=null,app.off("update",this._handleInputCallback),this.panel.removeAllListeners(["mousedown"]),this.panel.removeAllListeners(["touchstart"]),this.panel.removeAllListeners(["mouseup"]),this.panel.removeAllListeners(["touchend"]),this.panel.removeAllListeners(["mouseupoutside"]),this.panel.removeAllListeners(["touchendoutside"]),app.analytics.event("Game","Number of times Sunspot ball released",app.analytics.sunspotReleaseCount),this.panel.clear()},d.refresh=function(){this._pinballs.forEach(function(a){this.panel.removePinball(a)}),this._pinballs.length=0,this._at=new Date,this._lives=app.config.setup.lives.initial,this._stage.index=app.config.setup.stages.initial,this._stage.died=0},d.reset=function(a){this.die(a),"sunspotPinball"===a.name&&this.panel.sunspotPocket.stateMachine.goToState("reappearing"),this.spawn(this._pinballConfigs.pinball)},d.kill=function(a){var b=this,c="sunspotPinball"===a.name,d=[],e=c?"sunspot-kill":"kill";if(app.audio.play(e),this.die(a),this._stage.died++,"sunspotPinball"===a.name&&this.panel.sunspotPocket.stateMachine.goToState("reappearing"),b._pinballsCanBeLost){if(d=d.concat(function(){app.sound.pause("gameplay")},1e3),this._pinballs.length>0){var f="v-lost-ball-",g=c?"pinball":"sunspot",h=f.concat(g,"-left");d=d.concat(h)}else this._lives--,this.panel.setLives(this._lives),this._lives>0?d=d.concat(function(){b.panel.setFlashy(!0)},"v-encouragement",function(){b.spawn(b._pinballConfigs.pinball)},function(){b.panel.setFlashy(!1)}):(app.analytics.event("Game","Planets scored",this._stage.index),app.analytics.event("Game","Final score",this._score),app.analytics.event("Game","Total play time",new Date-this._at),d=d.concat("v-comfort",500,b.nextState.bind(b)));d=d.concat(function(){app.sound.resume("gameplay",!1)})}app.audio.queue(d)},d.bounce=function(){app.audio.play("bounce")},d.bump=function(a,b){app.audio.play("bump");var c=0,d="bump";if(b){switch(b.bumperType){case"rock":c=app.config.score.rockBumper;break;case"star":c=app.config.score.starBumper;break;case"p-Neptune":c=app.config.score.neptune,d="bump-planet-1";break;case"p-Uranus":c=app.config.score.uranus,d="bump-planet-2";break;case"p-Saturn":c=app.config.score.saturn,d="bump-planet-3";break;case"p-Jupiter":c=app.config.score.jupiter,d="bump-planet-4";break;case"p-Mars":c=app.config.score.mars,d="bump-planet-5";break;case"p-Earth":c=app.config.score.earth,d="bump-planet-6";break;case"p-Venus":c=app.config.score.venus,d="bump-planet-7";break;case"p-Mercury":c=app.config.score.mercury,d="bump-planet-8"}b.stateMachine&&b.stateMachine.goToState("on"),app.audio.play(d),this.score(c*a.scoreScale)}},d.pinballSunspotPocketCollision=function(){var a=this.panel.sunspotPocket.stateMachine,b=a.currentState.name;"closed"===b?a.goToState("opening"):"open"===b&&(a.goToState("hiding"),app.analytics.sunspotReleaseCount++)},d.pinballBlackHoleCollision=function(a){var b,c,d=this,e="sunspotPinball"===a.name;e?(b="sunspot-in-black-hole",c=function(){d.panel.sunspotPocket.stateMachine.goToState("reappearing"),this._sunspotInBlackHole=!1,0===d._pinballs.length&&d.spawn(d._pinballConfigs.pinball)}):(b="black-hole",c=function(){d.spawn(d._pinballConfigs.pinball)}),this.score(app.config.score.blackHole*a.scoreScale);var f=[function(){d.die(a)},b,1e3,"v-black-hole"];f=e?f.concat([c.bind(this)]):f.concat([function(){d.panel.setFlashy(!0)},1e3,c.bind(this),function(){d.panel.setFlashy(!1)}]),app.audio.queue(f),this._sunspotInBlackHole=!0},d.spin=function(){app.audio.play("spin"),this.score(app.config.score.satelliteSpin)},d.lifesave=function(){app.audio.play("lifesave")},d.score=function(a){var b=isNaN(a)?0:this._score+a;b>app.config.setup.score.max&&(b=app.config.setup.score.max),this._score=b,app.storage.session.lastScore=b;var c=a>0;this.panel.setScore(b,c)},d.onPinballAttachedToTarget=function(a){this._pinballsCanBeLost=!1},d._newVOQueued=function(){if(this._sunspotInBlackHole){this._sunspotInBlackHole=!1;var a=this.panel.sunspotPocket.stateMachine,b=a.currentState.name;"empty"===b&&a.goToState("reappearing")}},namespace("planet-pinball.states").GameState=c}(),function(){var a=include("planet-pinball.states.StandardState"),b=include("planet-pinball.video.VideoPlayerOGV"),c=include("planet-pinball.video.VideoPlayerMP4"),d=0,e=0,f=0,g=function(b,c){a.call(this,b,c),this._pause=this._pause.bind(this),this._resume=this._resume.bind(this)},h=(a.prototype,extend(g,a));h.start=function(){this.panel.on("play",this._play.bind(this)),this.panel.on("skip",this._skip.bind(this)),app.on("paused",this._pause,!1),app.on("resumed",this._resume,!1),app.audio.queue(["v-splash-title"]);var a=this.onVideoLoaded.bind(this),d=this.onVideoEnded.bind(this),e=this.onVideoError.bind(this);
this._deviceIsIphoneOrIpod=/iPhone|iPod/.test(navigator.platform),this._video=this._deviceIsIphoneOrIpod?new b(a,d,e):new c(a,d,e),this._pause()},h.stop=function(){app.audio.stop(),this.panel.removeAllListeners(["play"]),this.panel.removeAllListeners(["skip"]),app.off("paused",this._pause,!1),app.off("resumed",this._resume,!1)},h.onVideoLoaded=function(){this._playVideo()},h.onVideoEnded=function(){this._video.removeVideo(),app.preload.all(),app.audio.queue([this.nextState.bind(this)])},h.onVideoError=function(){this.onVideoEnded()},h._play=function(){this.panel.removeSplashScreen(),this.panel.addLoadingScreen(!0),this._video.startLoading(),this._checkVideoLoadProgressCallback=this._checkVideoLoadProgress.bind(this),app.on("update",this._checkVideoLoadProgressCallback)},h._skip=function(){this.onVideoEnded()},h._playVideo=function(){app.off("update",this._checkVideoLoadProgressCallback),this._checkVideoLoadProgressCallback=null,this.panel.removeLoadingScreen(!0),this.panel.addIntroScreen(),this._video.play()},h._pause=function(){this._video.pause()},h._resume=function(){this._video.play()},h._checkVideoLoadProgress=function(a){a*=.001,f+=a;var b=.33*a*Math.random();b*=d>0?.75*d+.25:1,d+=b,f>e&&(this.panel.progress=d,e+=.001*(250+600*Math.random())),d>=1&&this._checkVideoLoadProgressCallback&&this._playVideo()},namespace("planet-pinball.states").SplashState=g}(),function(){var a=include("planet-pinball.states.StandardState"),b=include("planet-pinball.utilities.DeviceUtilities"),c=include("planet-pinball.utilities.MultitouchTracker"),d=function(b,d){a.call(this,b,d);this._multitouchTracker=new c(app.isLandscape),this._at=0,this._pinballs=[],this._stage={index:0,at:{}},this._instructionsPauseFinished=!1,this._instructionsTimeout=12e3,this._pauseEndCondition=null,this._pauseCallback=null,this._onUpdate=null,this._mouseOutOfWindowCallback=null,this._pinballConfigs={pinball:{pinballConfig:app.config.components.pinball,launcherConfig:app.config.setup.launcher}},this.panel.onPinballOutsidePlay=this.kill.bind(this),this.panel.onPinballOutsideGame=this.reset.bind(this),this.panel.onPinballTargetCollision=this.nextStage.bind(this),this.panel.onPinballWorldCollision=this.bounce.bind(this),this.panel.onPinballBumperCollision=this.bump.bind(this),this.panel.onSpinnerRevolution=this.spin.bind(this),this.panel.onSkipButtonPress=this.skipButtonPressed.bind(this)},e=extend(d,a);Object.defineProperty(e,"stage",{get:function(){return this._stage}}),e.die=function(a){this._pinballs.splice(this._pinballs.indexOf(a),1),this.panel.removePinball(a)},e.spawn=function(){var a=this.panel.addPinball();this._pinballs.push(a),app.audio.play("spawn")},e.nextStage=function(a){var b=this,c=[],d=b._stage.index;b.die(a),b.panel.goToStage(b._stage.index,null),b.panel.addSun(),app.analytics.event("Tutorial","Total play time",new Date-b._at),app.audio.play("payoff-0"),c=c.concat(500,"v-congratulations",function(){b.panel.showInterstitial(d)},"planet-enlarges","v-tut-fact-sun",function(){b.panel.hideInterstitial()},300,"planet-shrinks","v-tut-conclusion",b.nextState.bind(b)),app.audio.queue(c)},e.start=function(){var a=this;this.panel.run(),app.keyboard.enabled=!0,this._multitouchTracker.start(this.panel),this.refresh(),this.panel.goToStage(this._stage.index,this._stage.index+1);var c=350,d=["v-tut-introduction-1","v-tut-introduction-2",function(){a.panel.startPaddlesFlashing()},"v-tut-introduction-3",function(){a.panel.stopPaddlesFlashing()},function(){a.spawn()},function(){a._at=new Date},c,function(){a.panel.startPaddlesFlashing()},function(){a.panel.pause()}];b.isTouchDevice?(this._instructionsVO="v-tut-instructions-touch",this._pauseEndCondition=this._touchCondition):(this._instructionsVO="v-tut-instructions-key",this._pauseEndCondition=this._keyCondition),this._pauseCallback=this._pauseUntilConditionMet.bind(this),d=d.concat([this._instructionsVO,function(){app.on("update",a._pauseCallback)}]),app.audio.queue(d)},e.stop=function(){app.keyboard&&(app.keyboard.enabled=!1),this._multitouchTracker.stop(this.panel),this.panel.stopPaddlesFlashing(),this.panel.removeAllListeners(["mousedown"]),this.panel.removeAllListeners(["touchstart"]),this.panel.removeAllListeners(["mouseup"]),this.panel.removeAllListeners(["touchend"]),this.panel.removeAllListeners(["mouseupoutside"]),this.panel.removeAllListeners(["touchendoutside"]),app.off("update",this._onUpdate),this.panel.clear()},e.refresh=function(){this._pinballs.forEach(function(a){this.panel.removePinball(a)}),this._pinballs.length=0,this._stage.index=app.config.setup.stages.initial},e.reset=function(a){this.die(a),this.spawn()},e.kill=function(a){var b=this,c=[];this.die(a),app.audio.play("kill"),c=c.concat(1e3,"v-tut-encouragement",200,function(){b.spawn()}),app.audio.queue(c)},e.bounce=function(){app.audio.play("bounce")},e.bump=function(a,b){app.audio.play("bump");var c="bump";if(b){switch(b.bumperType){case"rock":break;case"star":break;case"p-Neptune":c="bump-planet-1";break;case"p-Uranus":c="bump-planet-2";break;case"p-Saturn":c="bump-planet-3";break;case"p-Jupiter":c="bump-planet-4";break;case"p-Mars":c="bump-planet-5";break;case"p-Earth":c="bump-planet-6";break;case"p-Venus":c="bump-planet-7";break;case"p-Mercury":c="bump-planet-8"}b.stateMachine&&b.stateMachine.goToState("on"),app.audio.play(c)}},e.spin=function(){app.audio.play("spin")},e.skipButtonPressed=function(){this.nextState()},e._handleInput=function(a){if(!this.panel.paused&&(app.keyboard.isDown("arrow_left")||this._multitouchTracker.hasLeftTouches?this.panel.paddleRaiseLeft(a):this.panel.paddleLowerLeft(a),app.keyboard.isDown("arrow_right")||this._multitouchTracker.hasRightTouches?this.panel.paddleRaiseRight(a):this.panel.paddleLowerRight(a),(app.keyboard.justPressed("arrow_left")||this._multitouchTracker.leftJustPressed)&&app.audio.play("flip-down"),(app.keyboard.justPressed("arrow_right")||this._multitouchTracker.rightJustPressed)&&app.audio.play("flip-down"),this._multitouchTracker.clear(),app.options.debug)){app.keyboard.justPressed("a")&&(this._pinballs.length<1&&this.spawn(),this.panel.placeBallInTarget(app.config.components.pinball.name)),app.keyboard.justPressed("d")&&(app.globals.visualiseRigidBodies=!app.globals.visualiseRigidBodies,this.panel.toggleWorldCollisionShapeVisibility());var b=this;if(app.keyboard.justPressed("k")&&this._pinballs.forEach(function(a){return b.kill(a)}),app.keyboard.justPressed("p")){this.panel.showInterstitial(this._stage.index);var c=function(){this.panel.hideInterstitial()};app.setTimeout(c.bind(this),3e3)}}},e._keyCondition=function(){return app.keyboard.isDown("arrow_left")||app.keyboard.isDown("arrow_right")||this._touchCondition()},e._touchCondition=function(){return this._multitouchTracker.hasTouches};var f=0;e._pauseUntilConditionMet=function(a){this._pauseEndCondition()?(this.panel.stopPaddlesFlashing(),this.panel.resume(),app.audio.stop(this._instructionsVO),this._at=new Date,this._onUpdate=this._handleInput.bind(this),app.on("update",this._onUpdate),app.off("update",this._pauseCallback)):(f+=a,f>this._instructionsTimeout&&(f=0,app.audio.queue([this._instructionsVO])))},namespace("planet-pinball.states").TutorialState=d}(),function(){var a=include("springroll.Application"),b=include("springroll.pixi.PixiDisplay"),c=include("planet-pinball.services.AnalyticsService"),d=include("planet-pinball.services.AudioService"),e=include("planet-pinball.services.StorageService"),f=include("planet-pinball.decisionMaking.PPStateFactory"),g=include("planet-pinball.services.PreloadService"),h=include("planet-pinball.states.SplashState"),i=include("planet-pinball.states.EndState"),j=include("planet-pinball.states.TutorialState"),k=include("planet-pinball.states.GameState"),l=include("planet-pinball.panels.SplashPanel"),m=include("planet-pinball.panels.EndPanel"),n=include("planet-pinball.panels.TutorialPanel"),o=include("planet-pinball.panels.GamePanel"),p="stage",q=/packageName=org\.pbskids\.gamesapp/.test(window.location.search);if(q){var r=document.getElementById(p),s=r.height;r.height=r.width,r.width=s}var t=new a({name:"Planet Pinball",canvasId:p,display:b,displayOptions:{clearView:!0,transparent:!0},state:"splash",preload:[{id:"Background",type:"pixi",image:"assets/images/loading-bg.jpg"},{id:"LoadingBar",type:"pixi",image:"assets/images/loading-bar.png"},{id:"Satellite",type:"pixi",image:"assets/images/satellite.png"},{id:"Transition",type:"pixi",image:"assets/images/transition.png",atlas:"assets/images/transition-atlas.json",anim:"assets/animations/transition-anim.json"},{id:"SplashScreenBackground",type:"pixi",image:"assets/images/splash-bg.jpg"},{id:"PlayButton",type:"pixi",image:"assets/images/play-button.png",atlas:"assets/images/play-button-atlas.json"},{id:"SkipButton",type:"pixi",image:"assets/images/skip-button.png",atlas:"assets/images/skip-button-atlas.json"}],configPath:"assets/config/config.json",captionsPath:"assets/audio/vo/captions.json",captions:"captions"});t.globals={RADIANS_TO_DEGREES:57.2957795131,TWO_PI:2*Math.PI},t.isLandscape=q,t.once("init",function(){t.options.transition=t.getCache("Transition"),this.display.isWebGL;var a=this.config.scaling;if(!this.size||!a)throw"Error: game needs SizeManager plugin and a scaling.json config to run!";if(this.size.config=q?a.landscape:a.portrait,this.dimensions={width:a.portrait.width,height:a.portrait.height},this.audio=new d,this.analytics=new c("developer key here"),this.storage=new e,this.entityStateFactory=new f,this.preload=new g,t.globals.visualiseRigidBodies=t.config.components.visualiseRigidBodies,this.states={splash:new h(new l,{name:"splash",next:"tutorial"}),tutorial:new j(new n({wireframes:!1,background:"TutorialScreenBackground",interactive:!0}),{name:"tutorial",previous:"splash",next:"game"}),game:new k(new o({wireframes:!1,background:"GameScreenBackground",backgroundPosition:{x:0,y:0},useBackgroundPosition:!0,interactive:!0}),{name:"game",previous:"splash",next:"end"}),end:new i(new m,{name:"end",next:"game"})},t.on("update",function(a){TWEEN.update()}),q){var b=this.display.stage,p=b.children.slice(),r=new PIXI.Container;p.forEach(function(a){r.addChild(a)}),r.position.y=this.dimensions.width,r.rotation=-(.5*Math.PI),b.addChild(r)}}),window.app=t}();