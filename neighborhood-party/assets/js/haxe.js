!function(a){"use strict";function b(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return b.toString!==Object.prototype.toString&&(d.toString=b.toString),d}function c(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=fa++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}var d=function(){};d.__name__=["HxOverrides"],d.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c){if(0!=b)return"";c=a.length+c}return a.substr(b,c)},Math.__name__=["Math"];var e=function(){};e.__name__=["Std"],e.string=function(a){return k.__string_rec(a,"")};var f=function(){};f.__name__=["Type"],f.getClassName=function(a){var b=a.__name__;return null==b?null:b.join(".")};var g=function(){};g.__name__=["haxe","IMap"],g.prototype={__class__:g};var h=function(a,b){this.map=a,this.keys=b,this.index=0,this.count=b.length};h.__name__=["haxe","ds","_StringMap","StringMapIterator"],h.prototype={hasNext:function(){return this.index<this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=ma[b]?a.getReserved(b):a.h[b]},__class__:h};var i=function(){this.h={}};i.__name__=["haxe","ds","StringMap"],i.__interfaces__=[g],i.prototype={get:function(a){return null!=ma[a]?this.getReserved(a):this.h[a]},setReserved:function(a,b){null==this.rh&&(this.rh={}),this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},remove:function(a){return null!=ma[a]?(a="$"+a,null!=this.rh&&this.rh.hasOwnProperty(a)?(delete this.rh[a],!0):!1):this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},arrayKeys:function(){var a=[];for(var b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(var b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},__class__:i};var j=function(a){Error.call(this),this.val=a,this.message=String(a),Error.captureStackTrace&&Error.captureStackTrace(this,j)};j.__name__=["js","_Boot","HaxeError"],j.wrap=function(a){return a instanceof Error?a:new j(a)},j.__super__=Error,j.prototype=b(Error.prototype,{__class__:j});var k=function(){};k.__name__=["js","Boot"],k.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;var c=k.__nativeClassName(a);return null!=c?k.__resolveNativeClass(c):null},k.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"function":return"<function>";case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+k.__string_rec(a[g],b):k.__string_rec(a[g],b)}return d+")"}var h=a.length,i="[";b+="	";for(var j=0,l=h;l>j;){var m=j++;i+=(m>0?",":"")+k.__string_rec(a[m],b)}return i+="]"}var n;try{n=a.toString}catch(o){return"???"}if(null!=n&&n!=Object.toString&&"function"==typeof n){var p=a.toString();if("[object Object]"!=p)return p}var q=null,r="{\n";b+="	";var s=null!=a.hasOwnProperty;for(var q in a)(!s||a.hasOwnProperty(q))&&"prototype"!=q&&"__class__"!=q&&"__super__"!=q&&"__interfaces__"!=q&&"__properties__"!=q&&(2!=r.length&&(r+=", \n"),r+=b+q+" : "+k.__string_rec(a[q],b));return b=b.substring(1),r+="\n"+b+"}";case"string":return a;default:return String(a)}},k.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;e>d;){var f=d++,g=c[f];if(g==b||k.__interfLoop(g,b))return!0}return k.__interfLoop(a.__super__,b)},k.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.__enum__:!1;case ja:return"boolean"==typeof a;case ha:return!0;case ia:return"number"==typeof a;case ga:return"number"==typeof a?(0|a)===a:!1;case String:return"string"==typeof a;default:if(null==a)return!1;if("function"==typeof b){if(a instanceof b)return!0;if(k.__interfLoop(k.getClass(a),b))return!0}else if("object"==typeof b&&k.__isNativeObj(b)&&a instanceof b)return!0;return(b==ka?null==a.__name__:1)&&(b==la?null==a.__ename__:1)?a.__enum__==b:!0}},k.__cast=function(a,b){if(k.__instanceof(a,b))return a;throw new j("Cannot cast "+e.string(a)+" to "+e.string(b))},k.__nativeClassName=function(a){var b=k.__toStr.call(a).slice(8,-1);return"Object"==b||"Function"==b||"Math"==b||"JSON"==b?null:b},k.__isNativeObj=function(a){return null!=k.__nativeClassName(a)},k.__resolveNativeClass=function(b){return a[b]};var l=function(){};l.__name__=["pbsdaniel","Constants"];var m=function(){createjs.Container.call(this),this._bg=new createjs.Shape,this._bg.graphics.beginFill("#fff48b"),this._bg.graphics.drawRect(0,0,1280,800),this._bg.graphics.endFill(),this.addChild(this._bg),this._trolley=new createjs.Container,this.addChild(this._trolley),this._assets=new Z(this.getImageManifest(),this.getAudioManifest(),c(this,this.onPackageReady)),this._assets.load()};m.__name__=["pbsdaniel","DTLoadingScreen"],m.__super__=createjs.Container,m.prototype=b(createjs.Container.prototype,{start:function(){this._trolley.scaleX=.9,this._trolley.scaleY=1.1,createjs.Tween.get(this._trolley,{loop:!0}).to({scaleX:1.05,scaleY:.95},400,createjs.Ease.backIn).to({scaleX:.95,scaleY:1.05},300,createjs.Ease.cubicInOut)},freeze:function(){this._trolley.scaleX=this._trolley.scaleY=1,createjs.Tween.removeTweens(this._trolley)},onPackageReady:function(){var a=this._assets.getSpriteFromSheet("loadingTrolley","loadingScreenSheet"),b=this._assets.getSpriteFromSheet("loadingText","loadingScreenSheet");a.y=-1*a.getBounds().height,a.x=a.getBounds().width*-.5,this._trolley.addChild(a),this._trolley.x=640,this._trolley.y=400,this._text=b;var c=1280-b.getBounds().width;this._text.x=.5*c;var d=800-b.getBounds().height;this._text.y=.55*d,this.addChild(this._text)},getImageManifest:function(){var a=[];return a.push(Z.makeManifestItem("loadingScreenSheet","assets/sheets/loading.json","spritesheet")),a},getAudioManifest:function(){var a=[];return a},__class__:m});var n=function(a,b){null==b&&(b=!1);var c=this;n.SpringrollApp=a,1==a.options.debug?_.enabled=!0:_.enabled=!1,this.checkEnvironment(),_.log("New DanielGame!",n),this._stage=a.display.stage,this._stage.enableMouseOver(10),window.SRApp=a,this.BG=new createjs.Shape,this.BG.graphics.beginFill("orange").drawRect(0,0,a.display.width,a.display.height).endFill(),this._stage.addChild(this.BG),this.container=new createjs.Container,this.container.name="springrollGameContainer",this._stage.addChild(this.container),this._loadLayer=new createjs.Container,this._loadLayer.name="loadContainer",this._loadLayer.mouseChildren=!1,this._loadLayer.mouseEnabled=!1,this._gameLayer=new createjs.Container,this._gameLayer.name="gameContainer",this._debugLayer=new createjs.Container,this._debugLayer.mouseEnabled=!1,this._debugLayer.mouseChildren=!1,this.container.addChild(this._gameLayer),this.container.addChild(this._loadLayer),b&&this.container.addChild(this._debugLayer),createjs.Touch.enable(this._stage,!0),a.on("update",function(a,b,d){c.update({delta:a})})};n.__name__=["sg","pbskids","daniel","SpringrollGame"],n.prototype={checkEnvironment:function(){var a=window.location.search.substring(1);this._queryVars=a.split("&");for(var b=0,c=this._queryVars.length;c>b;){var d=b++,e=this._queryVars[d].split("=");"packageName"==e[0]&&"org.pbskids.gamesapp"==e[1]&&(n.isPBSKidsApp=!0)}},resize:function(a){_.green(e.string(a.width)+", "+e.string(a.height)),this.BG.graphics.clear(),this.BG.graphics.beginFill("orange").drawRect(0,0,a.width,a.height).endFill()},begin:function(){null!=n.SpringrollApp.scaling&&_.purple(n.SpringrollApp.scaling._items)},update:function(a){this._stage.update(a)},__class__:n};var o=function(a,b){null==b&&(b=!1),n.call(this,a,b),this._loadingScreen=new m,this._loadingScreen.addEventListener("added",(ea=this._loadingScreen,c(ea,ea.start))),this._loadingScreen.addEventListener("removed",(ea=this._loadingScreen,c(ea,ea.freeze))),this._loadLayer.addChild(this._loadingScreen),o.globalAssets=new Z(this.getGlobalData(),this.getGlobalAudio(),c(this,this.onGlobalAssetsRetrieved))};o.__name__=["pbsdaniel","party","DanielParty"],o.__super__=n,o.prototype=b(n.prototype,{begin:function(){n.prototype.begin.call(this),o.globalAssets.load()},getGlobalData:function(){var a=[];return a.push(Z.makeManifestItem("gameData","assets/data/game_data.json","json")),a.push(Z.makeManifestItem("globalAssets","assets/sheets/global.json","spritesheet")),a.push(Z.makeManifestItem("characterData","assets/data/character_data.json","json")),a.push(Z.makeManifestItem("titlescreenData","assets/data/titlescreen_data.json","json")),a.push(Z.makeManifestItem("transitionImg","assets/images/trolleywipe.png","image")),a},getGlobalAudio:function(){var a=[];return a.push(Z.makeAudioManifestItem("trolley_transition")),a},onGlobalAssetsRetrieved:function(){o.GameData=o.globalAssets.getResult("gameData"),o.CharacterInfo=o.globalAssets.getResult("characterData"),o.CharacterMap=new i;for(var a=0,b=o.CharacterInfo.characters;a<b.length;){var d=b[a];++a;var e=d.character,f=o.CharacterMap;null!=ma[e]?f.setReserved(e,d):f.h[e]=d}o.LocationMap=new i;for(var g=0,h=o.GameData.destinations;g<h.length;){var j=h[g];++g;var k=j.id,l=o.LocationMap;null!=ma[k]?l.setReserved(k,j):l.h[k]=j}this._transition=new createjs.Container;var m=new createjs.Shape;m.graphics.beginFill("#fff48b").drawRect(0,0,n.SpringrollApp.display.width,n.SpringrollApp.display.height).endFill(),m.cache(m.x,m.y,n.SpringrollApp.display.width,n.SpringrollApp.display.height);var p=o.globalAssets.getBitmap("transitionImg");p.x=m.getBounds().width,this._transition.addChild(m),this._transition.addChild(p),this.createMGProgression(),this._sceneDataMap=new i;for(var q=0,r=o.GameData.scenes;q<r.length;){var s=r[q];++q;var t=s.name,u=this._sceneDataMap;null!=ma[t]?u.setReserved(t,s):u.h[t]=s}this._screen=new aa(o.globalAssets.getResult("titlescreenData"),"introScene",c(this,this.screenReady)),this._screen.addEventListener("sceneRequest",c(this,this.sceneLoadRequest))},createMGProgression:function(){this._trolleyKids=[],this._mgProgression=[];for(var a=o.GameData.minigames.decorateGames.slice(),b=o.GameData.minigames.otherGames.slice(),c=[],d=o.GameData.destinations.slice(),e=0,f=d.length;f>e;){var g=e++;if("partyScene"==d[g].id){d.splice(g,1);break}}for(;d.length>0;)c.push(d.splice(Math.floor(Math.random()*d.length),1)[0]);if(o.GameData.debug.on)this._mgProgression=o.GameData.debug.gameProgression;else{var h={};h.minigameType="mgOther",h.minigame=b.splice(ba.randomIntRange(0,b.length,!1),1)[0],h.hostCharacter=c[0].host,h.location=c[0].id,this._mgProgression.push(h);var i={};i.minigameType="mgDecorate",i.minigame=a.splice(ba.randomIntRange(0,a.length,!1),1)[0],i.hostCharacter=c[1].host,i.location=c[1].id,this._mgProgression.push(i);var j={};j.minigameType="mgOther",j.minigame=b.splice(ba.randomIntRange(0,b.length,!1),1)[0],j.hostCharacter=c[2].host,j.location=c[2].id,this._mgProgression.push(j);var k={};k.minigameType="mgDecorate",k.minigame=a.splice(ba.randomIntRange(0,a.length,!1),1)[0],k.hostCharacter=c[3].host,k.location=c[3].id,this._mgProgression.push(k);var l={};l.minigameType="mgOther",l.minigame=b.splice(ba.randomIntRange(0,b.length,!1),1)[0],l.hostCharacter=c[4].host,l.location=c[4].id,this._mgProgression.push(l)}window.console.log(this._mgProgression)},sceneLoadRequest:function(a){this._loadStartTime=createjs.Ticker.getTime(!0),this._screen.removeEventListener("sceneRequest",c(this,this.sceneLoadRequest)),this._loadLayer.removeChild(this._transition),this._loadingScreen.alpha=1,this._loadLayer.addChild(this._loadingScreen),this.container.addChild(this._loadLayer),this._gameLayer.removeAllChildren(),this._screen.destroy(),this._screen=null;var b=a.get_sceneId();switch(b){case"introScene":this._screen=new v(this._sceneDataMap.get("introScene"),o.CharacterMap.get("Daniel"),c(this,this.screenReady));break;case"minigameScene":this._trolleyKids.push(this._nextGame.hostCharacter);var d=this._nextGame.minigame;switch(d){case"mgBalloons":this._screen=new A(this._sceneDataMap.get("mgBalloons"),o.CharacterMap.get(this._nextGame.hostCharacter),c(this,this.screenReady));break;case"mgDecorateCake":this._screen=new B(this._sceneDataMap.get("mgDecorateCake"),o.CharacterMap.get(this._nextGame.hostCharacter),c(this,this.screenReady));break;case"mgDecorateFlowers":this._screen=new B(this._sceneDataMap.get("mgDecorateFlowers"),o.CharacterMap.get(this._nextGame.hostCharacter),c(this,this.screenReady));break;case"mgDecorateTree":this._screen=new B(this._sceneDataMap.get("mgDecorateTree"),o.CharacterMap.get(this._nextGame.hostCharacter),c(this,this.screenReady));break;case"mgLeafRake":this._screen=new D(this._sceneDataMap.get("mgLeafRake"),o.CharacterMap.get(this._nextGame.hostCharacter),c(this,this.screenReady));break;case"mgSalad":this._screen=new C(this._sceneDataMap.get("mgSalad"),o.CharacterMap.get(this._nextGame.hostCharacter),c(this,this.screenReady));break;case"mgTableClean":this._screen=new E(this._sceneDataMap.get("mgTableClean"),o.CharacterMap.get(this._nextGame.hostCharacter),c(this,this.screenReady))}break;case"partyScene":break;case"trolleyScene":this._mgProgression.length>0?(this._nextGame=this._mgProgression.shift(),this._screen=new z(o.LocationMap.get(this._nextGame.location),this._sceneDataMap.get("trolleyScene"),this._trolleyKids,c(this,this.screenReady))):(this._screen=new z(o.LocationMap.get("partyScene"),this._sceneDataMap.get("trolleyScene"),this._trolleyKids,c(this,this.screenReady)),this._screen.addEventListener("gameRestart",c(this,this.restartGame)))}this._screen.addEventListener("sceneRequest",c(this,this.initiateTransition)),this._screen.addEventListener("gameRestart",c(this,this.restartGame))},restartGame:function(a){this.createMGProgression(),this.initiateTransition(a)},initiateTransition:function(a){this._screen.removeEventListener("sceneRequest",c(this,this.initiateTransition)),this._screen.removeEventListener("gameRestart",c(this,this.restartGame)),this._transition.x=-1*this._transition.getBounds().width,this._loadLayer.addChild(this._transition),$.instance.playAudio("trolley_transition"),createjs.Tween.get(this._transition).to({x:0},1e3,createjs.Ease.quadIn).call(c(this,this.sceneLoadRequest),[a])},screenReady:function(){createjs.Ticker.getTime(!0)-this._loadStartTime>500?this.transitionToScreen():createjs.Tween.get(this).wait(500-(createjs.Ticker.getTime(!0)-this._loadStartTime),!0).call(c(this,this.transitionToScreen))},transitionToScreen:function(){this._gameLayer.addChild(this._screen),this._loadingScreen.parent==this._loadLayer&&this._loadingScreen.cache(0,0,n.SpringrollApp.display.width,n.SpringrollApp.display.height),createjs.Tween.get(this._loadingScreen).to({alpha:0},250,createjs.Ease.sineIn).call(c(this,this.startScreen))},startScreen:function(){this._gameLayer.addChild(this._screen),this._loadingScreen.parent==this._loadLayer&&(this._loadingScreen.uncache(),this._loadLayer.removeChild(this._loadingScreen)),this._screen.start()},update:function(a){n.prototype.update.call(this,a),dragonBones.animation.WorldClock.clock.advanceTime(a.delta/1e3),null!=this._screen&&this._screen.update(a)},__class__:o});var p=function(){};p.__name__=["pbsdaniel","party","Main"],p.main=function(){window.SGGameButler=new Y("NeighborhoodParty",p.start),p._isSpringroll="undefined"!=typeof springroll},p.start=function(a,b){p.SpringrollApp=a,p._bellhop=b,$.init(p.SpringrollApp),window.focus(),p._game=new o(p.SpringrollApp),p._game.begin()},p.ga_call=function(a){try{p._bellhop.send("gacall",a)}catch(b){if(b instanceof j&&(b=b.val),!k.__instanceof(b,Error))throw b;window.console.warn("Warning: "+e.string(b))}};var q=function(a,b){this.completed=!1,createjs.Container.call(this),this._data=a;var d=[];d.push(a.skeleton),d.push(a.texture),d.push(a.textureJSON),this._assets=new Z(d,null,c(this,this.chracterDataLoaded)),this._id=a.name,this._readyCallback=b,this._assets.load()};q.__name__=["sg","cjs","dragonbones","DBCharacterCJS"],q.__super__=createjs.Container,q.prototype=b(createjs.Container.prototype,{get_characterId:function(){return this._id},playAnimation:function(a,b){if(this.armature.animation.hasAnimation(a)){null!=b&&(this._currentCompleteCallback=b,this.armature.addEventListener(dragonBones.events.AnimationEvent.COMPLETE,c(this,this.onAnimationComplete)));this.armature.animation.gotoAndPlay(a)}else window.console.log("Animation does not contain label ["+a+"]")},loopAnimation:function(a,b){if(this.armature.animation.hasAnimation(a)){this.armature.animation.gotoAndPlay(a,-1,-1,1e3)}else window.console.log("Animation does not contain label ["+a+"]")},stopAnimation:function(a){null==a&&(a=!1),a&&(this._currentCompleteCallback=null,this.armature.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,c(this,this.onAnimationComplete))),this.armature.animation.stop()},onAnimationComplete:function(a){this.armature.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,c(this,this.onAnimationComplete)),this._currentCompleteCallback(a)},chracterDataLoaded:function(){this._texture=this._assets.getImage(this._data.texture.id),this._textureData=this._assets.getResult(this._data.textureJSON.id),this._skeletonData=this._assets.getResult(this._data.skeleton.id),this._armatureName=this._data.armatureName,this.build()},dispose:function(){this.removeAllEventListeners(),this.removeAllChildren(),this.removeChild(this.armature.getDisplay()),this.armature.animation.stop(),null!=this.armature&&(this.armature.removeAllEventListeners(),this.armature=null),this._readyCallback=null,this._texture=null,this._textureData=null,this._skeletonData=null,this._factory=null,this._id=null,this._assets.dispose(),this._assets=null},onTextureLoaded:function(a){this._filesToLoad--,this.charCreationCheck()},charCreationCheck:function(){this._filesToLoad<=0&&this.build()},onTextureDataLoaded:function(a){this._textureData=a,this._filesToLoad--,this.charCreationCheck()},onSkeletonDataLoaded:function(a){this._skeletonData=a,this._filesToLoad--,this.charCreationCheck()},build:function(){this._factory=new dragonBones.factorys.CreateJSFactory,this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(this._skeletonData));var a=new dragonBones.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(a),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),dragonBones.animation.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.events.FrameEvent.BONE_FRAME_EVENT,c(this,this.omBoneFrameEvent)),this.completed=!0,null!=this._readyCallback&&this._readyCallback()},omBoneFrameEvent:function(a){-1!=a.frameLabel.indexOf("vo_")?$.instance.playVO(a.frameLabel.split("vo_")[1]):-1!=a.frameLabel.indexOf("sfx_")?$.instance.playAudio(a.frameLabel.split("sfx_")[1]):$.instance.playAudio(a.frameLabel)},__class__:q});var r=function(a,b){q.call(this,a,b)};r.__name__=["sg","springroll","dragonbones","SRDBCharacter"],r.__super__=q,r.prototype=b(q.prototype,{chracterDataLoaded:function(){this._texture=this._assets.getImage(this._data.texture.id),this._textureData=this._assets.getResult(this._data.textureJSON.id),this._skeletonData=this._assets.getResult(this._data.skeleton.id),this._armatureName=this._data.armatureName,this.preloadAudio(this._skeletonData),this.build()},preloadAudio:function(a){var b=[];this._audioLoaded=!1;for(var e=0,f=a.armature;e<f.length;){var g=f[e];++e;for(var h=0,i=g.animation;h<i.length;){var j=i[h];++h;for(var k=0,l=j.timeline;k<l.length;){var m=l[k];++k;for(var n=0,o=m.frame;n<o.length;){var p=o[n];if(++n,null!=p.event){var q="";p.event.indexOf("vo_")>-1?q=d.substr(p.event,3,null):p.event.indexOf("sfx_")>-1&&(q=d.substr(p.event,4,null)),b.push(Z.makeAudioManifestItem(q))}}}}}b.length>0?$.instance.loadAudio(b,c(this,this.characterAudioLoaded)):(this._audioLoaded=!0,this.characterAudioLoaded())},characterAudioLoaded:function(){this._audioLoaded=!0,null!=this._readyCallback&&this.completed&&this._readyCallback()},build:function(){this._factory=new dragonBones.factorys.CreateJSFactory,this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(this._skeletonData));var a=new dragonBones.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(a),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),dragonBones.animation.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.events.FrameEvent.BONE_FRAME_EVENT,c(this,this.omBoneFrameEvent)),this.completed=!0,null!=this._readyCallback&&this._audioLoaded&&this._readyCallback()},__class__:r});var s=function(a,b,c){r.call(this,a,c),this._animData=b};s.__name__=["pbsdaniel","party","PartyCharacter"],s.__super__=r,s.prototype=b(r.prototype,{dispose:function(){this.removeEventListener("mousedown",c(this,this.react),null),this.stopAnimation(!0),this._animData=null,r.prototype.dispose.call(this)},gotoIdle:function(a){this._state="idle",this.loopAnimation(this._animData.idle)},wave:function(){this.playAnimation(this._animData.intoWave,c(this,this.loopWave))},react:function(a){"idle"==this._state&&(this._state="reacting",this.stopAnimation(!0),this.playAnimation(this._animData.reactions[Math.floor(Math.random()*this._animData.reactions.length)],c(this,this.gotoIdle)))},introduceGame:function(a){switch(this._state="introducing",a){case"mgBalloons":this.playAnimation(this._animData.game4intro,c(this,this.gotoIdle));break;case"mgDecorateCake":this.playAnimation(this._animData.game2intro,c(this,this.gotoIdle));break;case"mgDecorateFlowers":this.playAnimation(this._animData.game3intro,c(this,this.gotoIdle));break;case"mgDecorateTree":this.playAnimation(this._animData.game1intro,c(this,this.gotoIdle));break;case"mgLeafRake":this.playAnimation(this._animData.game6intro,c(this,this.gotoIdle));break;case"mgSalad":this.playAnimation(this._animData.game7intro,c(this,this.gotoIdle));break;case"mgTableClean":this.playAnimation(this._animData.game5intro,c(this,this.gotoIdle))}},thankPlayer:function(a){this.stopAnimation(!0),this._state="exiting",this.playAnimation(this._animData.thankYou,a)},addTapReact:function(){this.addEventListener("mousedown",c(this,this.react),null)},loopWave:function(a){this.loopAnimation(this._animData.wave)},__class__:s});var t=function(){};t.__name__=["pbsdaniel","party","PartyDecorations"],t.clear=function(){t.balloons=null,t.tree=null,t.cake=null,t.flowers=null},t.prototype={__class__:t};var u=function(){this.sceneName="unnamed",createjs.Container.call(this)};u.__name__=["sg","cjs","GameScreen"],u.__super__=createjs.Container,u.prototype=b(createjs.Container.prototype,{update:function(a){},destroy:function(){},start:function(){},getImageManifest:function(){var a=[];return a},getAudioManifest:function(){var a=[];return a},__class__:u});var v=function(a,b,d){this._characterComplete=!1,this._assetsComplete=!1,u.call(this),this._sceneDef=a,this._sceneDataDef=this._sceneDef.data,this.sceneName=this._sceneDef.name,this._readyCallback=d,this._character=new r(b.dragonBonesData,c(this,this.characterComplete)),this._assets=new Z(this._sceneDef.sharedAssets.assetManifest,this._sceneDef.sharedAssets.audioManifest,c(this,this.assetsComplete)),this._assets.load()};v.__name__=["pbsdaniel","party","scenes","IntroScene"],v.__super__=u,v.prototype=b(u.prototype,{destroy:function(){u.prototype.destroy.call(this),createjs.Tween.removeTweens(this),this._character.stopAnimation(!0),this.removeChild(this._character),this._character=null,this._readyCallback=null,this._assets.dispose(),this._assets=null,this._sceneDef=null,this._sceneDataDef=null,this.removeAllChildren()},start:function(){u.prototype.start.call(this),o.GameData.debug.on&&o.GameData.debug.skipIntro?this.dispatchEvent(new R("sceneRequest","trolleyScene")):createjs.Tween.get(this).wait(1e3,!1).call(c(this,this.triggerIntro))},triggerIntro:function(a){createjs.Tween.removeTweens(this),this._character.playAnimation(this._sceneDataDef.intro,c(this,this.onIntroComplete))},onIntroComplete:function(a){this._character.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,c(this,this.onIntroComplete)),this._character.loopAnimation(this._sceneDataDef.idle),this.dispatchEvent(new R("sceneRequest","trolleyScene"))},buildScene:function(){var a=this._assets.getBitmap(this._sceneDataDef.bg);this.addChild(a),this._character.setTransform(this._sceneDataDef.position.x,this._sceneDataDef.position.y,this._sceneDataDef.scale,this._sceneDataDef.scale),this._character.loopAnimation(this._sceneDataDef.idle),this.addChild(this._character),this._readyCallback()},characterComplete:function(){window.console.log("characterComplete"),this._assetsComplete=!0,this.checkForSetup()},assetsComplete:function(){window.console.log("assetsComplete"),this._characterComplete=!0,this.checkForSetup()},checkForSetup:function(){this._characterComplete&&this._assetsComplete&&(window.console.log("Build scene checkForSetup"),this.buildScene())},__class__:v});var w=function(a,b){if(createjs.Container.call(this),this._data=b,this._picture=new createjs.Container,this._picture.addChild(a.getBitmap(b.back.sheetID)),null!=t.tree)t.tree.setTransform(b.defaultTree.position.x,b.defaultTree.position.y),t.tree.scaleX=t.tree.scaleY=b.treeScale,this._picture.addChild(t.tree);else{var c=a.getSpriteFromSheet(b.defaultTree.sheetID);c.setTransform(b.defaultTree.defaultPosition.x,b.defaultTree.defaultPosition.y),this._picture.addChild(c)}this._picture.addChild(a.getBitmap(b.front.sheetID));var d;null!=t.cake&&(d=k.__cast(t.cake,createjs.DisplayObject),d.scaleX=d.scaleY=b.cakeScale,d.setTransform(b.defaultCake.position.x,b.defaultCake.position.y,d.scaleX,d.scaleY),this._picture.addChild(d));var e;null!=t.salad&&(e=k.__cast(t.salad,createjs.DisplayObject),e.scaleX=e.scaleY=b.saladScale,e.setTransform(b.defaultSalad.position.x,b.defaultSalad.position.y,e.scaleX,e.scaleY),this._picture.addChild(e));new createjs.Container;if(null!=t.balloons)for(var f=0,g=t.balloons.length;g>f;){var h=f++,i=t.balloons[h];i.setTransform(b.balloons[h].x,b.balloons[h].y,b.balloonScale,b.balloonScale),this._picture.addChild(i)}if(null!=t.flowers){var j=k.__cast(t.flowers,createjs.DisplayObject);j.cache(-750,-750,1500,750),j.scaleX=j.scaleY=b.flowersScale,j.setTransform(b.defaultFlowers.position.x,b.defaultFlowers.position.y,j.scaleX,j.scaleY),this._picture.addChild(j)}this._flash=new createjs.Shape,this._flash.graphics.beginFill("white").drawRect(0,0,n.SpringrollApp.display.width,n.SpringrollApp.display.height).endFill(),this._flash.cache(0,0,n.SpringrollApp.display.width,n.SpringrollApp.display.height),this._flash.alpha=0,this._restartBtn=new U(o.globalAssets.getSpriteFromSheet("replayButton"),o.globalAssets.getSpriteFromSheet("replayButtonDown"));var l=n.SpringrollApp.display.width-this._restartBtn.getBounds().width;this._restartBtn.x=l-30;var m=n.SpringrollApp.display.height-this._restartBtn.getBounds().height;this._restartBtn.y=m-30};w.__name__=["pbsdaniel","party","scenes","PartyPicture"],w.__super__=createjs.Container,w.prototype=b(createjs.Container.prototype,{activate:function(a){t.clear(),this._restartBtn.addEventListener("down",a),$.instance.playAudio(this._data.flashSFX,c(this,this.takePicture))},destroy:function(){null!=this._flash&&createjs.Tween.removeTweens(this._flash),null!=this._finaleLoop&&createjs.Tween.removeTweens(this._finaleLoop),this._restartBtn.turnOff(),this._restartBtn.destroy(),$.instance.killAll(),this.removeAllChildren()},clearRestartButton:function(){this._restartBtn.removeAllEventListeners()},takePicture:function(){this.addChild(this._flash),createjs.Tween.get(this._flash).to({alpha:1},300,createjs.Ease.sineIn).call(c(this,this.showPicture))},showPicture:function(){this.addChildAt(this._picture,0),createjs.Tween.removeTweens(this._flash),createjs.Tween.get(this._flash).to({alpha:0},400,createjs.Ease.sineOut).call(c(this,this.danielThanks))},danielThanks:function(){createjs.Tween.removeTweens(this._flash),this.removeChild(this._flash),$.instance.playVO(this._data.danielLine,c(this,this.playLoop))},playLoop:function(){this.addChild(this._restartBtn),this._restartBtn.turnOn(),this._finaleLoop=$.instance.loopAudio(this._data.finaleLoop)},__class__:w});var x=function(){createjs.Container.call(this),this._back=new createjs.Container,this._front=new createjs.Container,this._kids=new createjs.Container,this.addChild(this._back),this.addChild(this._kids),this.addChild(this._front)};x.__name__=["pbsdaniel","party","scenes","Trolley"],x.__super__=createjs.Container,x.prototype=b(createjs.Container.prototype,{addBack:function(a){this._back.addChild(a)},addFront:function(a){this._front.addChild(a)},addKid:function(a){this._kids.addChild(a)},destroy:function(){this.removeAllChildren()},__class__:x});var y=function(a,b,c){this._accelRate=.01,this._topSpeed=.35,createjs.Container.call(this),this.active=!1,this._currentSpeed=0,this._def=a,this._screenSize=new createjs.Rectangle(0,0,b,c),this._skybox=new createjs.Container,this._farplane=new createjs.Container,this._groundplane=new createjs.Container,this._trolleyplane=new createjs.Container,this._nearplane=new createjs.Container,this.addChild(this._skybox),this.addChild(this._farplane),this.addChild(this._groundplane),this.addChild(this._trolleyplane),this.addChild(this._nearplane)};y.__name__=["pbsdaniel","party","scenes","TrolleyEnvironment"],y.__super__=createjs.Container,y.prototype=b(createjs.Container.prototype,{destroy:function(){this.removeEventListener("mousedown",c(this,this.onPedal),null),window.removeEventListener("keydown",c(this,this.onKeyboard)),this._characters=null,k.__cast(this._trolley,x).destroy(),this.removeAllChildren()},addSkybox:function(a){this._skybox.addChild(a)},addGroundTiles:function(a){for(var b=0,c=a.length;c>b;){var d=b++;null==this._groundplane.getBounds()?a[d].x=0:a[d].x=this._groundplane.getBounds().width,a[d].y=this._screenSize.height-a[d].getBounds().height,this._groundplane.addChild(a[d])}},addDestinationTile:function(a){this._destinationTile=a,a.x=this._groundplane.getBounds().width,a.y=this._screenSize.height-a.getBounds().height,this._groundplane.addChild(a)},addFarplaneObjects:function(a){var b=k.__cast(a[ba.randomIntRange(0,a.length,!1)].clone(),createjs.Sprite);for(b.y=this._def.farplaneStartY-b.getBounds().height,b.x=ba.randomIntRange(0,50),this._farplane.addChild(b);this._farplane.getBounds().width<this._groundplane.getBounds().width;){var c=ba.randomIntRange(Math.floor(b.x)+this._def.farplaneMinGap,Math.floor(b.x)+this._def.farplaneMaxGap);b=k.__cast(a[ba.randomIntRange(0,a.length,!1)].clone(),createjs.Sprite),b.y=this._def.farplaneStartY-b.getBounds().height,b.x=c,this._farplane.addChild(b)}this._farplane.x-=this._groundplane.getBounds().width*(.5*(1-this._def.farplaneRatio))},advance:function(a){if(this.active){var b=a*this._currentSpeed;if("trolleyEnter"==this._trolleyState)this._trolley.x>this._trolleyStartX?(this._trolley.x=this._trolleyStartX,this._accelerating=!1,createjs.Tween.removeTweens(this),createjs.Tween.get(this).to({_currentSpeed:0},600,createjs.Ease.sineIn),this._trolleyState="trolleyTravelling"):this._trolley.x+=b;else if("trolleyTravelling"==this._trolleyState){if(this._groundplane.x-=b,this._farplane.x-=b*this._def.farplaneRatio,this._groundplane.x<n.SpringrollApp.display.width-this._groundplane.getBounds().width){var d=n.SpringrollApp.display.width-this._groundplane.getBounds().width-this._groundplane.x;this._groundplane.x+=d,this._farplane.x+=d*this._def.farplaneRatio,this._trolleyState="trolleyStopping",this.waveCharacters(),this.removeEventListener("mousedown",c(this,this.onPedal),null),window.removeEventListener("keydown",c(this,this.onKeyboard)),createjs.Tween.removeTweens(this),createjs.Tween.get(this).to({_currentSpeed:0},800,createjs.Ease.sineOut)}}else"trolleyStopping"==this._trolleyState&&(this._currentSpeed>0?this._trolley.x+=b:(this._trolleyState="trolleyStopped",
this.active=!1,$.instance.playAudio("trolley_ding"),null==this._arrivalVO?(createjs.Tween.get(this._music).wait(1e3,!1).to({volume:0},1500,createjs.Ease.sineIn).call((ea=this._music,c(ea,ea.stop))),createjs.Tween.get(this).wait(2e3,!1).call(c(this,this.dispatchEvent),[new createjs.Event("destinationReached",!1,!1)])):createjs.Tween.get(this._music).wait(500,!1).to({volume:.5},500,createjs.Ease.sineIn).call(c(this,this.playArrivalVO))))}},teleportToDestination:function(){this._trolleyState="trolleyStopped",this._groundplane.x=n.SpringrollApp.display.width-this._groundplane.getBounds().width,this.waveCharacters(),this._currentSpeed=0,this.active=!1,createjs.Tween.get(this).wait(1e3,!1).call(c(this,this.dispatchEvent),[new createjs.Event("destinationReached",!1,!1)])},playArrivalVO:function(){createjs.Tween.removeTweens(this._music),$.instance.playVO(this._arrivalVO,c(this,this.transitionOut))},transitionOut:function(){createjs.Tween.get(this._music).wait(1e3,!1).to({volume:0},500,createjs.Ease.sineIn).call((ea=this._music,c(ea,ea.stop))),createjs.Tween.get(this).wait(1e3,!1).call(c(this,this.dispatchEvent),[new createjs.Event("destinationReached",!1,!1)])},waveCharacters:function(){for(var a=this._characters,b=new h(a,a.arrayKeys());b.hasNext();){var c=b.next();c.wave()}},addTrolley:function(a,b){null==b&&(b=!1),this._trolley=a,this._trolleyStartX=.47*n.SpringrollApp.display.width-this._trolley.getBounds().width;var c=n.SpringrollApp.display.height-this._trolley.getBounds().height;this._trolley.y=c-70,b?(this._trolleyState="trolleyEnter",this._currentSpeed=this._topSpeed,this._accelerating=!0,this._trolley.x=-(this._trolley.getBounds().width+300)):(this._currentSpeed=0,this._trolleyState="trolleyTravelling",this._trolley.x=this._trolleyStartX),this._trolleyplane.addChild(a)},start:function(){null==this._music&&(this._music=$.instance.loopAudio("trolley_music_loop"),this._music.pause(),this._music.volume=0),this.active=!0,this.addEventListener("mousedown",c(this,this.onPedal),null),window.addEventListener("keydown",c(this,this.onKeyboard))},addCharacters:function(a,b){this._arrivalVO=b,this._characters=a;for(var c=this._characters,d=new h(c,c.arrayKeys());d.hasNext();){var e=d.next();e.x+=this._destinationTile.x,this._groundplane.addChild(e),e.gotoIdle()}},onKeyboard:function(a){this.onPedal(null)},onPedal:function(a){var b=$.instance.playAudio("trolley_ding");this._accelerating||(this._music.resume(),this._accelerating=!0,createjs.Tween.removeTweens(this),createjs.Tween.get(this).to({_currentSpeed:this._topSpeed},1500,createjs.Ease.sineIn),createjs.Tween.get(this._music).wait(b.length/2,!1).to({volume:1},500,createjs.Ease.sineIn))},pauseMusic:function(){this._music.pause()},__class__:y});var z=function(a,b,d,e){this._totalCharacters=0,this._goalSpeed=.35,this._currentSpeed=0,u.call(this),this._destinationData=a,this._destination=a.id,this._sceneDef=b,this._kids=d,this._sceneDataDef=this._sceneDef.data;for(var f=0,g=this._sceneDataDef.environments;f<g.length;){var h=g[f];if(++f,h.id==this._destination){this._enviroDef=h;break}}this._readyCallback=e,this._characters=new i;for(var j=0,k=this._destinationData.people.length;k>j;){var l=j++;this._totalCharacters++,window.console.log(o.CharacterMap),window.console.log(this._destinationData.people[l].character);var m=this._destinationData.people[l].character,n=o.CharacterMap,p=null!=ma[m]?n.getReserved(m):n.h[m],q=new s(p.dragonBonesData,p.anims,c(this,this.characterReady));null!=this._destinationData.people[l].position&&q.setTransform(this._destinationData.people[l].position.x,this._destinationData.people[l].position.y),null!=this._destinationData.people[l].scale&&(q.scaleX=q.scaleY=this._destinationData.people[l].scale);var r=this._destinationData.people[l].character,t=this._characters;null!=ma[r]?t.setReserved(r,q):t.h[r]=q}this._assets=new Z(this.buildManifest(this._sceneDef),this.buildAudioManifest(this._sceneDef),c(this,this.onAssetsReady)),this._assets.load()};z.__name__=["pbsdaniel","party","scenes","TrolleyScene"],z.__super__=u,z.prototype=b(u.prototype,{destroy:function(){u.prototype.destroy.call(this),this._destinationData=null,this._destination=null,this._sceneDef=null,this._kids=null,this._sceneDataDef=null,this._enviroDef=null,this._readyCallback=null;for(var a=this._characters,b=new h(a,a.arrayKeys());b.hasNext();){var d=b.next();d.dispose(),d=null}this._assets.dispose(),this._assets=null,$.instance.killAll(),this._environment.removeEventListener("destinationReached",c(this,this.onDestinationReached)),this._environment.destroy(),this._environment=null,null!=this._picture&&(this._picture.destroy(),this._picture=null),this.removeAllChildren()},characterReady:function(){this._totalCharacters--,0==this._totalCharacters&&this._assets.completed&&(this.injectCharacters(),this._readyCallback())},start:function(){u.prototype.start.call(this),o.GameData.debug.on&&o.GameData.debug.skipTrolleyRide?(window.console.log("Debug dispatch"),this.dispatchEvent(new R("sceneRequest","minigameScene"))):o.GameData.debug.on&&o.GameData.debug.trolleyTeleport?(window.console.log("teleport to end"),this._environment.addEventListener("destinationReached",c(this,this.onDestinationReached)),this._environment.teleportToDestination()):(this._environment.addEventListener("destinationReached",c(this,this.onDestinationReached)),this._environment.start())},onDestinationReached:function(a){window.console.log("Destination reached"),this._environment.removeEventListener("destinationReached",c(this,this.onDestinationReached)),"partyScene"==this._destination?(this._picture=new w(this._assets,this._sceneDataDef.partySetup),$.instance.playVO(this._sceneDataDef.partySetup.dadLine,c(this,this.takePicture))):this.dispatchEvent(new R("sceneRequest","minigameScene"))},takePicture:function(){this.addChild(this._picture),this.removeChild(this._environment),this._picture.activate(c(this,this.onRestartRequest))},onRestartRequest:function(a){this._picture.clearRestartButton(),this.dispatchEvent(new R("gameRestart","introScene"))},update:function(a){u.prototype.update.call(this,a),null!=this._environment&&this._environment.advance(a.delta)},onAssetsReady:function(){this._environment=new y(this._enviroDef,n.SpringrollApp.display.width,n.SpringrollApp.display.height),this._environment.addSkybox(this._assets.getBitmap(this._enviroDef.skybox));for(var a=[],b=0,c=this._enviroDef.groundTiles.length;c>b;){var d=b++;a.push(this._assets.getBitmap(this._enviroDef.groundTiles[d]))}this._environment.addGroundTiles(a),this._environment.addDestinationTile(this._assets.getBitmap(this._enviroDef.houseTile));var e=[];if(null!=this._enviroDef.farplaneObjectIDs&&this._enviroDef.farplaneObjectIDs.length>0){for(var f=0,g=this._enviroDef.farplaneObjectIDs.length;g>f;){var h=f++;e.push(this._assets.getSpriteFromSheet(this._enviroDef.farplaneObjectIDs[h]))}this._environment.addFarplaneObjects(e)}for(var i=new x,j=0,k=this._sceneDataDef.trolley.kids;j<k.length;){var l=k[j];++j,-1!=this._kids.indexOf(l.character)&&i.addKid(this._assets.getSpriteFromSheet(l.id))}i.addBack(this._assets.getSpriteFromSheet(this._sceneDataDef.trolley.back)),i.addFront(this._assets.getSpriteFromSheet(this._sceneDataDef.trolley.front)),this._environment.addTrolley(i,!1),this.addChild(this._environment),0==this._totalCharacters&&(this.injectCharacters(),this._readyCallback())},injectCharacters:function(){this._environment.addCharacters(this._characters,this._destinationData.arrivalVO)},buildAudioManifest:function(a){var b=[];b=b.concat(a.sharedAssets.audioManifest);for(var c=0,d=a.variableAssets;c<d.length;){var e=d[c];if(++c,e.id==this._destination){b=b.concat(e.audioManifest);break}}return b},buildManifest:function(a){var b=[];b=b.concat(a.sharedAssets.assetManifest);for(var c=0,d=a.variableAssets;c<d.length;){var e=d[c];if(++c,e.id==this._destination){b=b.concat(e.assetManifest);break}}return b},__class__:z});var A=function(a,b,d){this._completedBalloons=0,u.call(this),this._sceneDef=a,this._sceneDataDef=this._sceneDef.data,this.sceneName=this._sceneDef.name,this._readyCallback=d,this._characterContainer=new createjs.Container,this._character=new s(b.dragonBonesData,b.anims,c(this,this.onCharacterReady)),this._assets=new Z(this._sceneDef.sharedAssets.assetManifest,this._sceneDef.sharedAssets.audioManifest,c(this,this.onAssetsReady)),this._assets.load()};A.__name__=["pbsdaniel","party","scenes","minigames","MGBalloonScene"],A.__super__=u,A.prototype=b(u.prototype,{start:function(){u.prototype.start.call(this),this._character.introduceGame(this.sceneName)},destroy:function(){u.prototype.destroy.call(this),this._sceneDef=null,this._sceneDataDef=null,this._readyCallback=null,this._character.dispose(),this._character=null,this._assets.dispose(),this._assets=null;for(var a=0,b=this._balloonContianer.numChildren;b>a;){var d=a++,e=k.__cast(this._balloonContianer.getChildAt(d),F);e.turnOff(),e.removeEventListener("interestingOccurance",c(this,this.onInterestingOccurance)),e.removeEventListener("release",c(this,this.onBalloonReleased)),e.removeEventListener("complete",c(this,this.onBalloonComplete)),e.destroy(),e=null}this._balloons=null,this._quitButton.removeEventListener("down",c(this,this.onQuitRequest)),this._quitButton=null,this._characterContainer=null,this._balloonContianer=null},onCharacterReady:function(){this._characterLoaded=!0,this._characterContainer.addChild(this._character),this._character.setTransform(this._sceneDataDef.characterPosition.x,this._sceneDataDef.characterPosition.y,this._sceneDataDef.characterScale,this._sceneDataDef.characterScale),this._character.gotoIdle(),this._character.addTapReact(),window.console.log("Character completed, check"),this._assets.completed&&(window.console.log("Character ready"),this._readyCallback())},onAssetsReady:function(){var a=this._assets.getBitmap(this._sceneDataDef.bg);this.addChild(a);var b=this._assets.getSpriteFromSheet(this._sceneDataDef.ui);b.setTransform(this._sceneDataDef.uiPos.x,this._sceneDataDef.uiPos.y),this.addChild(b),this._balloons=[],this._balloonContianer=new createjs.Container,this.addChild(this._characterContainer),this.addChild(this._balloonContianer),this._balloonData=[],window.console.log(this._character.get_characterId());var d=this._character.get_characterId();switch(d){case"Daniel":this._balloonData=this._sceneDataDef.balloons.Daniel.slice();break;case"Elaina":this._balloonData=this._sceneDataDef.balloons.Elaina.slice();break;case"Jodi":window.console.log(this._sceneDataDef.balloons.Jodi),this._balloonData=this._sceneDataDef.balloons.Jodi.slice();break;case"Katerina":this._balloonData=this._sceneDataDef.balloons.Katerina.slice();break;case"Wednesday":this._balloonData=this._sceneDataDef.balloons.Wednesday.slice()}for(var e=this._sceneDataDef.balloons.shared.slice();this._balloonData.length<this._sceneDataDef.totalBalloons;)this._balloonData.push(e.splice(ba.randomIntRange(0,e.length,!1),1)[0]);this._balloonData=da.shuffleArray(this._balloonData);for(var f=this._sceneDataDef.balloonSpawnArea.width/this._balloonData.length,g=0,h=this._balloonData.length;h>g;){var i=g++;window.console.log("Make a new balloon"),window.console.log(this._balloonData[i]);var j=new F(this._balloonData[i]);j.addSFX(this._sceneDataDef.sfx),j.addFreshArt(this._assets.getSpriteFromSheet(this._balloonData[i].fresh)),j.addExpandedArt(this._assets.getSpriteFromSheet(this._balloonData[i].blownup)),j.setState("fresh"),j.setStringLength(ba.randomRange(this._balloonData[i].stringLength.min,this._balloonData[i].stringLength.max)),j.y=this._sceneDataDef.balloonSpawnArea.y+.5*(this._sceneDataDef.balloonSpawnArea.height-j.getBounds().height),j.x=this._sceneDataDef.balloonSpawnArea.x+f*i+.5*f,this._balloonContianer.addChild(j),j.addEventListener("interestingOccurance",c(this,this.onInterestingOccurance)),j.addEventListener("release",c(this,this.onBalloonReleased)),j.addEventListener("complete",c(this,this.onBalloonComplete)),j.turnOn()}this._quitButton=new U(o.globalAssets.getSpriteFromSheet("exitButtonDown"),o.globalAssets.getSpriteFromSheet("exitButton")),this._quitButton.addEventListener("down",c(this,this.onQuitRequest)),this._quitButton.x=30,this._quitButton.y=30,this._quitButton.turnOn(),this.addChild(this._quitButton),window.console.log("Assets completed, check"),this._characterLoaded&&(window.console.log("Assets ready"),this._readyCallback())},onBalloonComplete:function(a){a.target.removeEventListener("complete",c(this,this.onBalloonComplete)),this._completedBalloons++,this._completedBalloons>=this._balloonData.length&&(this._quitButton.removeEventListener("down",c(this,this.onQuitRequest)),this._quitButton.turnOff(),this.onQuitRequest())},onInterestingOccurance:function(a){this._character.react()},onQuitRequest:function(a){this.killInteractivity(),this._quitButton.removeEventListener("down",c(this,this.onQuitRequest)),this._quitButton.turnOff(),this._character.thankPlayer(c(this,this.leaveGame))},killInteractivity:function(){for(var a=0,b=this._balloonContianer.numChildren;b>a;){var d=a++,e=k.__cast(this._balloonContianer.getChildAt(d),F);e.turnOff(),e.removeEventListener("interestingOccurance",c(this,this.onInterestingOccurance)),e.removeEventListener("release",c(this,this.onBalloonReleased)),e.removeEventListener("complete",c(this,this.onBalloonComplete))}},leaveGame:function(a){for(var b=[],c=0,d=this._balloons.length;d>c;){var e=c++;b.push(this._balloons[e].getPartyObject())}t.balloons=b,this.dispatchEvent(new R("sceneRequest","trolleyScene"))},onBalloonReleased:function(a){var b=k.__cast(a.target,F),c=this._sceneDataDef.balloonSpawnArea.width/this._balloonData.length;b.x=this._sceneDataDef.balloonSpawnArea.x+this._balloons.length*c+.5*c,b.y=this._sceneDataDef.uiPos.y-b.getStringLength(),b.setFinalPosition(b.x,b.y),b.drawString(),this._balloons.push(b)},__class__:A});var B=function(a,b,d){this._reactCountdown=0,u.call(this),this._sceneDef=a,this._sceneDataDef=this._sceneDef.data,this.sceneName=this._sceneDef.name,this._readyCallback=d,this._characterContainer=new createjs.Container,this._character=new s(b.dragonBonesData,b.anims,c(this,this.onCharacterReady)),this._assets=new Z(this._sceneDef.sharedAssets.assetManifest,this._sceneDef.sharedAssets.audioManifest,c(this,this.onAssetsReady)),this._assets.load()};B.__name__=["pbsdaniel","party","scenes","minigames","MGDecorateScene"],B.__super__=u,B.prototype=b(u.prototype,{start:function(){u.prototype.start.call(this),this._character.introduceGame(this.sceneName)},destroy:function(){u.prototype.destroy.call(this),this._sceneDef=null,this._sceneDataDef=null,this._readyCallback=null,this._assets.dispose(),this._assets=null,this._decoratee.destroy(),this._tray.removeEventListener("pickUp",c(this,this.onDecorationPickup)),this._tray.removeEventListener("placed",c(this,this.onDecorationPlaced)),this._tray.destroy(),this._tray=null,this._quitButton.removeEventListener("mousedown",c(this,this.onQuitRequest),null),this._quitButton=null,this._character.dispose(),this._character=null,this._characterContainer=null,this._objData=null,this.removeAllChildren()},onCharacterReady:function(){this._characterLoaded=!0,this._characterContainer.addChild(this._character),this._character.setTransform(this._sceneDataDef.characterPosition.x,this._sceneDataDef.characterPosition.y,this._sceneDataDef.characterScale,this._sceneDataDef.characterScale),this._character.gotoIdle(),this._assets.completed&&this._readyCallback()},onAssetsReady:function(){var a=this._assets.getBitmap(this._sceneDataDef.bg);if(this.addChild(a),this.addChild(this._characterContainer),this._objData=this._sceneDataDef.decorateObject[Math.floor(Math.random()*this._sceneDataDef.decorateObject.length)],this._decoratee=new G,null!=this._objData.back)for(var b=0,d=this._objData.back.length;d>b;){var e=b++;this._decoratee.addBack(this._assets.getSpriteFromSheet(this._objData.back[e].sheetID),new createjs.Point(this._objData.back[e].position.x+this._objData.origin.x,this._objData.back[e].position.y+this._objData.origin.y))}if(null!=this._objData.front)for(var f=0,g=this._objData.back.length;g>f;){var h=f++;this._decoratee.addFront(this._assets.getSpriteFromSheet(this._objData.front[h].sheetID),new createjs.Point(this._objData.front[h].position.x+this._objData.origin.x,this._objData.front[h].position.y+this._objData.origin.y))}this.addChild(this._decoratee),this._tray=new H(this._sceneDataDef),null!=this._sceneDataDef.uiID&&this._tray.addTrayFrame(this._assets.getSpriteFromSheet(this._sceneDataDef.uiID),this._sceneDataDef.uiPosition);var i=[];this.populateDecorationSprites(i),this._tray.registerDecorations(i);for(var j=0,k=this._sceneDataDef.spawnPoints.length;k>j;){var l=j++;this._tray.addSpawnPoint(this._sceneDataDef.spawnPoints[l])}this._tray.addEventListener("pickUp",c(this,this.onDecorationPickup)),this._tray.addEventListener("placed",c(this,this.onDecorationPlaced)),this.addChild(this._tray),this._quitButton=new U(o.globalAssets.getSpriteFromSheet("exitButtonDown"),o.globalAssets.getSpriteFromSheet("exitButton")),this._quitButton.addEventListener("down",c(this,this.onQuitRequest)),this._quitButton.x=30,this._quitButton.y=30,this._quitButton.turnOn(),this.addChild(this._quitButton),this._character.addTapReact(),this._characterLoaded&&this._readyCallback()},populateDecorationSprites:function(a){for(var b=0,c=this._sceneDataDef.decorationIDs.shared.length;c>b;){var d=b++,e=this._assets.getSpriteFromSheet(this._sceneDataDef.decorationIDs.shared[d]);null==e&&(e=this.errorItem(this._sceneDataDef.decorationIDs.shared[d])),a.push(e)}var f=this._character.get_characterId();switch(f){case"Daniel":for(var g=0,h=this._sceneDataDef.decorationIDs.Daniel.length;h>g;){var i=g++,j=this._assets.getSpriteFromSheet(this._sceneDataDef.decorationIDs.Daniel[i]);null==j&&(j=this.errorItem(this._sceneDataDef.decorationIDs.Daniel[i])),a.push(j)}break;case"Elaina":for(var k=0,l=this._sceneDataDef.decorationIDs.Elaina.length;l>k;){var m=k++,n=this._assets.getSpriteFromSheet(this._sceneDataDef.decorationIDs.Elaina[m]);null==n&&(n=this.errorItem(this._sceneDataDef.decorationIDs.Elaina[m])),a.push(n)}break;case"Jodi":for(var o=0,p=this._sceneDataDef.decorationIDs.Jodi.length;p>o;){var q=o++,r=this._assets.getSpriteFromSheet(this._sceneDataDef.decorationIDs.Jodi[q]);null==r&&(r=this.errorItem(this._sceneDataDef.decorationIDs.Jodi[q])),a.push(r)}break;case"Katerina":for(var s=0,t=this._sceneDataDef.decorationIDs.Katerina.length;t>s;){var u=s++,v=this._assets.getSpriteFromSheet(this._sceneDataDef.decorationIDs.Katerina[u]);null==v&&(v=this.errorItem(this._sceneDataDef.decorationIDs.Katerina[u])),a.push(v)}break;case"Wednesday":for(var w=0,x=this._sceneDataDef.decorationIDs.Wednesday.length;x>w;){var y=w++,z=this._assets.getSpriteFromSheet(this._sceneDataDef.decorationIDs.Wednesday[y]);null==z&&(z=this.errorItem(this._sceneDataDef.decorationIDs.Wednesday[y])),a.push(z)}}},errorItem:function(a){var b=new createjs.Container,c=new createjs.Shape;if(b.addChild(c),c.graphics.beginFill("red").drawRect(0,0,300,250).endFill(),null!=a){_.red(a+"is missing or incorrect");var d=new createjs.Text(a+"is missing or incorrect");d.color="#fff",b.addChild(d)}return b},onDecorationPickup:function(a){this._decoratee.addDecoration(a.decoration,a.position)},onDecorationPlaced:function(a){0==this._reactCountdown?(this._character.react(),this._reactCountdown=ba.randomIntRange(4,6)):this._reactCountdown--},onQuitRequest:function(a){this._quitButton.removeEventListener("down",c(this,this.onQuitRequest)),this.clearInteractivity(),this._quitButton.turnOff(),this._character.thankPlayer(c(this,this.leaveGame))},clearInteractivity:function(){this._decoratee.stopInteraction(),this._tray.stopInteraction()},leaveGame:function(a){this.registerPartyObject(),this.dispatchEvent(new R("sceneRequest","trolleyScene"))},registerPartyObject:function(){var a=this.sceneName;switch(a){case"mgDecorateCake":t.cake=this._decoratee.getPartyObject(this._objData.origin);break;case"mgDecorateFlowers":t.flowers=this._decoratee.getPartyObject(this._objData.origin);break;case"mgDecorateTree":t.tree=this._decoratee.getPartyObject(this._objData.origin)}},__class__:B});var C=function(a,b,d){this._reactCountdown=0,u.call(this),this._sceneDef=a,this._sceneDataDef=this._sceneDef.data,this._readyCallback=d,this._characterContainer=new createjs.Container,this._character=new s(b.dragonBonesData,b.anims,c(this,this.onCharacterReady)),C._activeBowl=!1,this._availableIngredients=[],this._availableIngredients=this._availableIngredients.concat(this._sceneDataDef.ingredients),this._availableIngredients=da.shuffleArray(this._availableIngredients),C._assets=new Z(this._sceneDef.sharedAssets.assetManifest,this._sceneDef.sharedAssets.audioManifest,c(this,this.onAssetsReady)),C._assets.load()};C.__name__=["pbsdaniel","party","scenes","minigames","MGSaladScene"],C.__super__=u,C.prototype=b(u.prototype,{destroy:function(){u.prototype.destroy.call(this),this._quitButton.removeEventListener("mousedown",c(this,this.onQuitRequest),null),this._sceneDef=null,this._sceneDataDef=null,this._readyCallback=null,this._characterContainer=null,this._character.dispose(),this._character=null,C._assets.dispose(),C._assets=null,this.removeAllChildren()},start:function(){u.prototype.start.call(this),this._character.introduceGame(this._sceneDef.name),this._quitButton.turnOn()},onCharacterReady:function(){this._characterLoaded=!0,this._characterContainer.addChild(this._character),this._character.setTransform(this._sceneDataDef.characterPosition.x,this._sceneDataDef.characterPosition.y,this._sceneDataDef.characterScale,this._sceneDataDef.characterScale),this._character.gotoIdle(),this._character.addTapReact(),C._assets.completed&&this._readyCallback()},onAssetsReady:function(){var a=C._assets.getBitmap(this._sceneDataDef.bg);this.addChild(a),this.addChild(this._characterContainer);var b=C._assets.getBitmap("table");b.setTransform(this._sceneDataDef.tablePosition.x,this._sceneDataDef.tablePosition.y),this.addChild(b),this._saladBowl=new N(this._sceneDataDef),this.addChild(this._saladBowl),this._saladBowl.setTransform(this._sceneDataDef.bowlPosition.x,this._sceneDataDef.bowlPosition.y),this._tableBowlsContainer=new createjs.Container,this.addChild(this._tableBowlsContainer),this._ingredientBowls=[];for(var d=0,e=this._sceneDataDef.bowls;d<e.length;){var f=e[d];++d;var g=new M(f);g.addEventListener(S.POSITION,c(this,this.onBowlActivate)),this._ingredientBowls.push(g),this._tableBowlsContainer.addChild(g),this._availableIngredients.length>0?g.setIngredient(this._availableIngredients.pop()):(this._availableIngredients=[],this._availableIngredients=this._availableIngredients.concat(this._sceneDataDef.ingredients),this._availableIngredients=da.shuffleArray(this._availableIngredients))}for(var h=0,i=this._sceneDataDef.dressings;h<i.length;){var j=i[h];++h;var k=new L(j);k.addEventListener(S.POSITION,c(this,this.onDressingPickup)),this._tableBowlsContainer.addChild(k)}this._bowlAnim=new q(this._sceneDataDef.bowlDBData,c(this,this.onBowlReady)),this._bowlAnimContainer=new createjs.Container,this.addChild(this._bowlAnimContainer),this._quitButton=new U(o.globalAssets.getSpriteFromSheet("exitButtonDown"),o.globalAssets.getSpriteFromSheet("exitButton")),this._quitButton.addEventListener("down",c(this,this.onQuitRequest)),this._quitButton.x=30,this._quitButton.y=30,this.addChild(this._quitButton),this._characterLoaded&&this._readyCallback()},onBowlReady:function(){},onDressingPickup:function(a){C._activeBowl||(this._tapStartTime=(new Date).getTime(),this._tipping=!1,C._activeBowl=!0,this._activeDressing=a.target,this._activeDressing.removeEventListener(S.POSITION,c(this,this.onDressingPickup)),this._tableBowlsContainer.removeChild(this._activeDressing),this._bowlAnim.playAnimation(this._activeDressing.getIngredient().anims.idle),this._bowlAnimContainer.addChild(this._bowlAnim),this._bowlAnim.setTransform(a.position.x,a.position.y),this.stage.addEventListener("stagemousemove",c(this,this.moveDressing),null),this.stage.addEventListener("stagemouseup",c(this,this.dressingReleased),null),$.instance.playAudio("ingredient_pickup"))},onBowlActivate:function(a){C._activeBowl||(this._tapStartTime=(new Date).getTime(),this._tipping=!1,C._activeBowl=!0,this._activeIngredientBowl=a.target,this._activeIngredientBowl.removeEventListener(S.POSITION,c(this,this.onBowlActivate)),window.console.log(this._activeIngredientBowl),this._tableBowlsContainer.removeChild(this._activeIngredientBowl),this._bowlAnim.playAnimation(this._activeIngredientBowl.getIngredient().anims.idle),this._bowlAnimContainer.addChild(this._bowlAnim),this._bowlAnim.setTransform(a.position.x,a.position.y),this.stage.addEventListener("stagemousemove",c(this,this.moveBowl),null),this.stage.addEventListener("stagemouseup",c(this,this.bowlReleased),null),$.instance.playAudio("ingredient_pickup"))},moveBowl:function(a){this._bowlAnim.setTransform(a.stageX,a.stageY),this.addToSalad(a.stageX,a.stageY)?(this._tipping||(this._tipping=!0,this._startedTipAt=(new Date).getTime()),this._bowlAnim.playAnimation(this._activeIngredientBowl.getIngredient().anims.tilt)):(this._tipping=!1,this._bowlAnim.playAnimation(this._activeIngredientBowl.getIngredient().anims.idle))},moveDressing:function(a){this._bowlAnim.setTransform(a.stageX,a.stageY),this.addToSalad(a.stageX,a.stageY)?(this._tipping||(this._tipping=!0,this._startedTipAt=(new Date).getTime()),this._bowlAnim.playAnimation(this._activeDressing.getIngredient().anims.tilt)):(this._tipping=!1,this._bowlAnim.playAnimation(this._activeDressing.getIngredient().anims.idle))},bowlReleased:function(a){if(this._tipping=!1,this.stage.removeEventListener("stagemousemove",c(this,this.moveBowl),null),this.stage.removeEventListener("stagemouseup",c(this,this.bowlReleased),null),(new Date).getTime()-this._tapStartTime<this._sceneDataDef.tapThreshold)this.forceBowlRelease(!0);else if(this.addToSalad(a.stageX,a.stageY)){if(a.stageY<this._sceneDataDef.tablePosition.y&&(window.console.log("not at table level"),this._character.hitTest(a.stageX-this._character.x,a.stageY-this._character.y))){window.console.log("bowl on character, move it");var b=this._saladBowl.x,d=.5*this._saladBowl.getBounds().width;this._bowlAnim.x=b+d,this._bowlAnim.y=this._saladBowl.y}$.instance.playAudio("ingredient_pour"),window.console.log("Add ingredient to salad"),this._bowlAnim.playAnimation(this._activeIngredientBowl.getIngredient().anims.pour,c(this,this.onPourComplete)),this._saladBowl.addIngredient(this._activeIngredientBowl.getIngredient().name),this.onInterestingOccurance()}else if(a.stageY>=this._sceneDataDef.tablePosition.y)this._bowlAnimContainer.removeChild(this._bowlAnim),window.console.log("Bowl released elsewhere"),C._activeBowl=!1,this._tableBowlsContainer.addChild(this._activeIngredientBowl),this._activeIngredientBowl.resetBowl(),this._activeIngredientBowl.addEventListener(S.POSITION,c(this,this.onBowlActivate));else if(this._bowlAnimContainer.removeChild(this._bowlAnim),C._activeBowl=!1,this._tableBowlsContainer.addChild(this._activeIngredientBowl),this._activeIngredientBowl.resetBowl(),this._activeIngredientBowl.addEventListener(S.POSITION,c(this,this.onBowlActivate)),this._availableIngredients.length>0)this._activeIngredientBowl.setIngredient(this._availableIngredients.pop());else{this._availableIngredients=[],this._availableIngredients=this._availableIngredients.concat(this._sceneDataDef.ingredients),this._availableIngredients=da.shuffleArray(this._availableIngredients);for(var e=0,f=this._availableIngredients.length;f>e;){e++}}},dressingReleased:function(a){if(this._tipping=!1,this.stage.removeEventListener("stagemousemove",c(this,this.moveDressing),null),this.stage.removeEventListener("stagemouseup",c(this,this.dressingReleased),null),(new Date).getTime()-this._tapStartTime<this._sceneDataDef.tapThreshold)this.forceDressingRelease(!0);else if(this.addToSalad(a.stageX,a.stageY)){if(a.stageY<this._sceneDataDef.tablePosition.y&&(window.console.log("not at table level"),this._character.hitTest(a.stageX-this._character.x,a.stageY-this._character.y))){window.console.log("bowl on character, move it");var b=this._saladBowl.x,d=.5*this._saladBowl.getBounds().width;this._bowlAnim.x=b+d,this._bowlAnim.y=this._saladBowl.y}$.instance.playAudio(this._activeDressing.pourSFX()),window.console.log("Add ingredient to salad"),this._bowlAnim.playAnimation(this._activeDressing.getIngredient().anims.pour,c(this,this.onDressingComplete)),this._saladBowl.addDressing(this._activeDressing.getIngredient().sheetID),this.onInterestingOccurance()}else this._bowlAnimContainer.removeChild(this._bowlAnim),C._activeBowl=!1,this._activeDressing.reset(),this._tableBowlsContainer.addChild(this._activeDressing),this._activeDressing.addEventListener(S.POSITION,c(this,this.onDressingPickup)),this._activeDressing=null},forceBowlRelease:function(a){if(window.console.log("force release"),a){var b=this._saladBowl.x,d=.5*this._saladBowl.getBounds().width;this._bowlAnim.x=b+d,this._bowlAnim.y=this._saladBowl.y}if(this._bowlAnim.y<this._sceneDataDef.tablePosition.y&&(window.console.log("not at table level"),this._character.hitTest(this._bowlAnim.x-this._character.x,this._bowlAnim.y-this._character.y))){window.console.log("bowl on character, move it");var e=this._saladBowl.x,f=.5*this._saladBowl.getBounds().width;this._bowlAnim.x=e+f,this._bowlAnim.y=this._saladBowl.y}this.stage.removeEventListener("stagemousemove",c(this,this.moveBowl),null),this.stage.removeEventListener("stagemouseup",c(this,this.bowlReleased),null),$.instance.playAudio("ingredient_pour"),this._bowlAnim.playAnimation(this._activeIngredientBowl.getIngredient().anims.pour,c(this,this.onPourComplete)),this._saladBowl.addIngredient(this._activeIngredientBowl.getIngredient().name)},forceDressingRelease:function(a){if(window.console.log("force release"),a){var b=this._saladBowl.x,d=.5*this._saladBowl.getBounds().width;this._bowlAnim.x=b+d,this._bowlAnim.y=this._saladBowl.y}if(this._bowlAnim.y<this._sceneDataDef.tablePosition.y&&(window.console.log("not at table level"),this._character.hitTest(this._bowlAnim.x-this._character.x,this._bowlAnim.y-this._character.y))){window.console.log("bowl on character, move it");var e=this._saladBowl.x,f=.5*this._saladBowl.getBounds().width;this._bowlAnim.x=e+f,this._bowlAnim.y=this._saladBowl.y}this.stage.removeEventListener("stagemousemove",c(this,this.moveDressing),null),this.stage.removeEventListener("stagemouseup",c(this,this.dressingReleased),null),$.instance.playAudio(this._activeDressing.pourSFX()),this._bowlAnim.playAnimation(this._activeDressing.getIngredient().anims.pour,c(this,this.onDressingComplete)),this._saladBowl.addDressing(this._activeDressing.getIngredient().sheetID)},onPourComplete:function(a){window.console.log("Pour complete"),this._bowlAnimContainer.removeChild(this._bowlAnim),C._activeBowl=!1,this._tableBowlsContainer.addChild(this._activeIngredientBowl),this._activeIngredientBowl.resetBowl(),this._activeIngredientBowl.addEventListener(S.POSITION,c(this,this.onBowlActivate)),this._availableIngredients.length>0?this._activeIngredientBowl.setIngredient(this._availableIngredients.pop()):(this._availableIngredients=[],this._availableIngredients=this._availableIngredients.concat(this._sceneDataDef.ingredients),this._availableIngredients=da.shuffleArray(this._availableIngredients)),this._activeIngredientBowl=null},onDressingComplete:function(a){this._bowlAnimContainer.removeChild(this._bowlAnim),C._activeBowl=!1,this._activeDressing.reset(),this._tableBowlsContainer.addChild(this._activeDressing),this._activeDressing.addEventListener(S.POSITION,c(this,this.onDressingPickup)),this._activeDressing=null},addToSalad:function(a,b){var c=this._saladBowl.getBounds();c.x+=this._saladBowl.x,c.y+=this._saladBowl.y;var d=.333*c.height;return c.y-=d,c.height+=d,c.contains(a,b)?!0:b<this._sceneDataDef.tablePosition.y&&this._character.hitTest(a-this._character.x,b-this._character.y)?!0:!1},onInterestingOccurance:function(a){
window.console.log("trigger react?"),0==this._reactCountdown?(this._character.react(),this._reactCountdown=ba.randomIntRange(4,6)):this._reactCountdown--},onQuitRequest:function(a){this.killInteractivity(),this._quitButton.turnOff(),this._quitButton.removeEventListener("down",c(this,this.onQuitRequest)),this._character.thankPlayer(c(this,this.leaveGame))},killInteractivity:function(){},leaveGame:function(a){this.dispatchEvent(new R("sceneRequest","trolleyScene")),t.salad=this._saladBowl},update:function(a){u.prototype.update.call(this,a),this._tipping&&(new Date).getTime()-this._startedTipAt>this._sceneDataDef.wait&&(this._tipping=!1,null!=this._activeIngredientBowl&&this.forceBowlRelease(),null!=this._activeDressing&&this.forceDressingRelease())},__class__:C});var D=function(a,b,d){this._spotsComplete=0,u.call(this),this._sceneDef=a,this._sceneDataDef=this._sceneDef.data,this._readyCallback=d,this._characterContainer=new createjs.Container,this._character=new s(b.dragonBonesData,b.anims,c(this,this.onCharacterReady)),this._assets=new Z(this._sceneDef.sharedAssets.assetManifest,this._sceneDef.sharedAssets.audioManifest,c(this,this.onAssetsReady)),this._assets.load()};D.__name__=["pbsdaniel","party","scenes","minigames","MGSpotInteractScene"],D.__super__=u,D.prototype=b(u.prototype,{destroy:function(){u.prototype.destroy.call(this),this._quitButton.removeEventListener("down",c(this,this.onQuitRequest)),this._sceneDef=null,this._sceneDataDef=null,this._readyCallback=null,this._characterContainer=null,this._character.dispose(),this._character=null,this._assets.dispose(),this._assets=null;for(var a=0,b=this._spots;a<b.length;){var d=b[a];++a,d.removeEventListener("interestingOccurance",c(this,this.onInterestingOccurance)),d.removeEventListener("complete",c(this,this.onSpotComplete)),d.destroy(),d=null}this._spots=null,this.removeAllChildren()},start:function(){u.prototype.start.call(this),this._character.introduceGame(this._sceneDef.name)},onCharacterReady:function(){this._characterLoaded=!0,this._characterContainer.addChild(this._character),this._character.setTransform(this._sceneDataDef.characterPosition.x,this._sceneDataDef.characterPosition.y,this._sceneDataDef.characterScale,this._sceneDataDef.characterScale),this._character.gotoIdle(),this._character.addTapReact(),this._assets.completed&&this._readyCallback()},onAssetsReady:function(){var a=this._assets.getBitmap(this._sceneDataDef.bg);this.addChild(a),this._spots=[],this.makeSpot(this._sceneDataDef.spots.group1[Math.floor(Math.random()*this._sceneDataDef.spots.group1.length)]),this.makeSpot(this._sceneDataDef.spots.group2[Math.floor(Math.random()*this._sceneDataDef.spots.group2.length)]),this.makeSpot(this._sceneDataDef.spots.group3[Math.floor(Math.random()*this._sceneDataDef.spots.group3.length)]),this.makeSpot(this._sceneDataDef.spots.group4[Math.floor(Math.random()*this._sceneDataDef.spots.group4.length)]),this.addChild(this._characterContainer),this._quitButton=new U(o.globalAssets.getSpriteFromSheet("exitButtonDown"),o.globalAssets.getSpriteFromSheet("exitButton")),this._quitButton.addEventListener("down",c(this,this.onQuitRequest)),this._quitButton.x=30,this._quitButton.y=30,this._quitButton.turnOn(),this.addChild(this._quitButton),this._characterLoaded&&this._readyCallback()},makeSpot:function(a){for(var b=new O,d=[],e=0,f=a.states.length;f>e;){var g=e++;d.push(this._assets.getSpriteFromSheet(a.states[g]))}b.addVisualStates(d),b.addInteractAnim(this._assets.getSpriteFromSheet(a.interactAnimation),a.animationOrigin),b.addSFX(this._sceneDataDef.interactSFX),b.setTransform(a.position.x,a.position.y),null!=a.center&&b.setOffset(a.center),b.addEventListener("interestingOccurance",c(this,this.onInterestingOccurance)),b.addEventListener("complete",c(this,this.onSpotComplete)),b.initialize(),this._spots.push(b),this.addChild(b)},onInterestingOccurance:function(a){this._character.react()},onSpotComplete:function(a){this._spotsComplete++,this._spotsComplete>=this._spots.length&&this.onQuitRequest()},onQuitRequest:function(a){this.killInteractivity(),this._quitButton.turnOff(),this._quitButton.removeEventListener("down",c(this,this.onQuitRequest)),this._character.thankPlayer(c(this,this.leaveGame))},killInteractivity:function(){for(var a=0,b=this._spots;a<b.length;){var d=b[a];++a,d.removeEventListener("interestingOccurance",c(this,this.onInterestingOccurance)),d.removeEventListener("complete",c(this,this.onSpotComplete)),d.turnOff()}},leaveGame:function(a){this.dispatchEvent(new R("sceneRequest","trolleyScene"))},__class__:D});var E=function(a,b,d){u.call(this),this._sceneDef=a,this._sceneDataDef=this._sceneDef.data,this._readyCallback=d,this._characterContainer=new createjs.Container,this._character=new s(b.dragonBonesData,b.anims,c(this,this.onCharacterReady)),this._assets=new Z(this._sceneDef.sharedAssets.assetManifest,this._sceneDef.sharedAssets.audioManifest,c(this,this.onAssetsReady)),this._assets.load()};E.__name__=["pbsdaniel","party","scenes","minigames","MGTableCleanScene"],E.__super__=u,E.prototype=b(u.prototype,{destroy:function(){u.prototype.destroy.call(this),this._quitButton.removeEventListener("mousedown",c(this,this.onQuitRequest),null),this._sceneDef=null,this._sceneDataDef=null,this._readyCallback=null,this._characterContainer=null,this._character.dispose(),this._character=null,this._assets.dispose(),this._assets=null,this._table.removeEventListener("complete",c(this,this.onTableComplete)),this._table.removeEventListener("interestingOccurance",c(this,this.onInterestingOccurance)),this._table.destroy(),this._table=null,this.removeAllChildren()},start:function(){u.prototype.start.call(this),this._character.introduceGame(this._sceneDef.name),this._table.turnOn(),this._quitButton.turnOn()},onCharacterReady:function(){this._characterLoaded=!0,this._characterContainer.addChild(this._character),this._character.setTransform(this._sceneDataDef.characterPosition.x,this._sceneDataDef.characterPosition.y,this._sceneDataDef.characterScale,this._sceneDataDef.characterScale),this._character.gotoIdle(),this._character.addTapReact(),this._assets.completed&&this._readyCallback()},onAssetsReady:function(){var a=this._assets.getBitmap(this._sceneDataDef.bg);this.addChild(a),this.addChild(this._characterContainer),this._table=new P(this._sceneDataDef),this._table.addEventListener("interestingOccurance",c(this,this.onInterestingOccurance)),this._table.addEventListener("complete",c(this,this.onTableComplete)),this._table.addBase(this._assets.getBitmap(this._sceneDataDef.table)),this._table.addCover(this._assets.getBitmap(this._sceneDataDef.dirtCover)),this._table.addSponge(this._assets.getBitmap(this._sceneDataDef.sponge)),this._table.addSFX(this._sceneDataDef.sfx),this._table.setTransform(this._sceneDataDef.position.x,this._sceneDataDef.position.y),this._table.init(),this.addChild(this._table),this._quitButton=new U(o.globalAssets.getSpriteFromSheet("exitButtonDown"),o.globalAssets.getSpriteFromSheet("exitButton")),this._quitButton.addEventListener("down",c(this,this.onQuitRequest)),this._quitButton.x=30,this._quitButton.y=30,this.addChild(this._quitButton),this._characterLoaded&&this._readyCallback()},onTableComplete:function(a){this._quitButton.turnOff(),this._table.removeEventListener("complete",c(this,this.onTableComplete)),this.onQuitRequest()},onInterestingOccurance:function(a){this._character.react()},onQuitRequest:function(a){this._table.removeEventListener("complete",c(this,this.onTableComplete)),this.killInteractivity(),this._quitButton.turnOff(),this._quitButton.removeEventListener("down",c(this,this.onQuitRequest)),this._character.thankPlayer(c(this,this.leaveGame))},killInteractivity:function(){this._table.turnOff(),this._table.removeEventListener("complete",c(this,this.onTableComplete)),this._table.removeEventListener("interestingOccurance",c(this,this.onInterestingOccurance))},leaveGame:function(a){this.dispatchEvent(new R("sceneRequest","trolleyScene"))},update:function(a){u.prototype.update.call(this,a),null!=this._table&&this._table.update(a)},__class__:E});var F=function(a){this._released=!1,createjs.Container.call(this),this._offset=a.offset,this._scaleFactor=new createjs.Rectangle(0,0,a.scaleFactor.x,a.scaleFactor.y),this._string=new createjs.Shape};F.__name__=["pbsdaniel","party","scenes","minigames","balloon","Balloon"],F.__super__=createjs.Container,F.prototype=b(createjs.Container.prototype,{destroy:function(){this._offset=null,this._scaleFactor=null,this._fresh=null,this._expando=null,this._currentState=null,this._mouseShape=null,this._finalPosition=null,this._string=null,null!=this._sound&&(this._sound.stop(),this._sound=null),this.removeAllChildren()},addFreshArt:function(a){this._fresh=a,this._fresh.setTransform(this._fresh.getBounds().width*-.5,this._fresh.getBounds().height*-.5)},addExpandedArt:function(a){this._expando=a,this._expando.setTransform(-1*this._offset.x,-1*this._offset.y)},setState:function(a){"fresh"==a?(this.removeChild(this._expando),this._currentState="fresh",this.addChild(this._fresh),this.adjustHitArea(this._fresh)):(this.removeChild(this._fresh),this._currentState="expanded",this.addChild(this._expando),this.adjustHitArea(this._expando))},turnOn:function(){null==this._mouseShape&&("fresh"==this._currentState?this.adjustHitArea(this._fresh):this.adjustHitArea(this._expando)),this.addEventListener("mousedown",c(this,this.onActivate),null)},turnOff:function(){this.removeEventListener("mousedown",c(this,this.onActivate),null),null!=this.stage&&this.stage.removeEventListener("pressmove",c(this,this.onMove),null),this.removeEventListener("pressup",c(this,this.onDeactivate),null),this.removeAllEventListeners()},adjustHitArea:function(a){this._mouseShape=new createjs.Shape,this._mouseShape.uncache(),this._mouseShape.graphics.clear(),this._mouseShape.graphics.beginFill("rgba(1,1,1,.01)").drawRect(a.x,a.y,a.getBounds().width,a.getBounds().height).endFill(),this._mouseShape.cache(a.x,a.y,a.getBounds().width,a.getBounds().height),this.hitArea=this._mouseShape},drawString:function(){this._string.graphics.clear(),this._string.graphics.setStrokeStyle(2/this.scaleY).beginStroke("white").moveTo(0,0).lineTo(0,this._stringLength/this.scaleY).endStroke(),this.addChild(this._string)},setFinalPosition:function(a,b){this._finalPosition=new createjs.Point(a,b)},setStringLength:function(a){this._stringLength=a},onActivate:function(a){this._released&&this.removeChild(this._string),this.x=a.stageX,this.y=a.stageY,this.parent.addChild(this),this.removeEventListener("mousedown",c(this,this.onActivate),null),this.stage.addEventListener("pressmove",c(this,this.onMove),null),this.addEventListener("pressup",c(this,this.onDeactivate),null),"fresh"==this._currentState?(this.setState("expanded"),this.scaleX=this._scaleFactor.width,this.scaleY=this._scaleFactor.height,this._sound=$.instance.playAudio(this._sfxID)):this._sound.resume();var b=(1-this.scaleX)/(1-this._scaleFactor.width)*this._sound.length;createjs.Tween.get(this).to({scaleX:1,scaleY:1},b).call(c(this,this.onDeactivate))},onMove:function(a){this.x=a.stageX,this.y=a.stageY},onDeactivate:function(a){this._sound.pause(),createjs.Tween.removeTweens(this),this.removeEventListener("pressup",c(this,this.onDeactivate),null),this.stage.removeEventListener("pressmove",c(this,this.onMove),null),this._released?(this.x=this._finalPosition.x,this.y=this._finalPosition.y,this.drawString()):(this._released=!0,this.dispatchEvent(new createjs.Event("release",!1,!1)),this.dispatchEvent(new createjs.Event("interestingOccurance",!1,!1))),1!=this.scaleX?this.turnOn():(this.dispatchEvent(new createjs.Event("interestingOccurance",!1,!1)),this.dispatchEvent(new createjs.Event("complete",!1,!1)))},getPartyObject:function(){var a=new createjs.Container,b=k.__cast(this._expando.clone(),createjs.Sprite);return b.scaleX=this.scaleX,b.scaleY=this.scaleY,b.x=-(this._offset.x*this.scaleX),b.y=-(this._offset.y*this.scaleY),a.addChild(b),a.cache(b.x,b.y,1.2*b.getBounds().width,b.getBounds().height),a},addSFX:function(a){this._sfxID=a},getStringLength:function(){return this._stringLength},__class__:F});var G=function(){createjs.Container.call(this),this._back=new createjs.Container,this._decorations=new createjs.Container,this._front=new createjs.Container,this.addChild(this._back),this.addChild(this._decorations),this.addChild(this._front)};G.__name__=["pbsdaniel","party","scenes","minigames","decorate","DecorateTarget"],G.__super__=createjs.Container,G.prototype=b(createjs.Container.prototype,{destroy:function(){null!=this._activeDecoration&&(this._activeDecoration.destroy(),this._activeDecoration=null)},addBack:function(a,b){a.setTransform(b.x,b.y),this._back.addChild(a)},addFront:function(a,b){a.setTransform(b.x,b.y),this._front.addChild(a)},addDecoration:function(a,b){null!=b&&a.setTransform(b.x,b.y),this._downTime=createjs.Ticker.getTime(),this._activeDecoration=a,this.stage.addEventListener("stagemousemove",c(this,this.moveDecoration),null),this._activeDecoration.addEventListener("pressup",c(this,this.onDecorationPressup),null),this._decorations.addChild(this._activeDecoration)},onMouseDown:function(a){this._downTime=createjs.Ticker.getTime(),this._activeDecoration=k.__cast(a.currentTarget,I),this._activeDecoration.pickupPos=new createjs.Point(a.stageX,a.stageY),this._activeDecoration.removeAllEventListeners(),this._activeDecoration.playPickup(),this._decorations.addChild(this._activeDecoration),this._activeDecoration.addEventListener("pressmove",c(this,this.moveDecoration),null),this._activeDecoration.addEventListener("pressup",c(this,this.onDecorationPressup),null)},onDecorationPlace:function(a){if(a.stopImmediatePropagation(),this._activeDecoration.setTransform(a.stageX,a.stageY),this.stage.removeEventListener("stagemousedown",c(this,this.onDecorationPlace),null),this.stage.removeEventListener("stagemousemove",c(this,this.moveDecoration),null),this.collidesWithObject(this._activeDecoration))this._activeDecoration.playPlace(),this._activeDecoration.announcePlacement(),this.stage.addEventListener("stagemouseup",c(this,this.onStickyDecoComplete),null);else{this._activeDecoration.announceDeletion(),this._decorations.removeChild(this._activeDecoration),this._activeDecoration=null;for(var b=0,d=this._decorations.numChildren;d>b;){var e=b++,f=k.__cast(this._decorations.getChildAt(e),I);f.addEventListener("mousedown",c(this,this.onMouseDown),null)}}},onStickyDecoComplete:function(a){this.stage.removeEventListener("stagemouseup",c(this,this.onStickyDecoComplete),null),this._activeDecoration.addEventListener("mousedown",c(this,this.onMouseDown),null),this._activeDecoration=null;for(var b=0,d=this._decorations.numChildren;d>b;){var e=b++,f=k.__cast(this._decorations.getChildAt(e),I);f.addEventListener("mousedown",c(this,this.onMouseDown),null)}},moveDecoration:function(a){this._activeDecoration.setTransform(a.stageX,a.stageY)},onDecorationPressup:function(a){if(this.stage.removeEventListener("stagemousemove",c(this,this.moveDecoration),null),this._activeDecoration.removeEventListener("pressmove",c(this,this.moveDecoration),null),this._activeDecoration.removeEventListener("pressup",c(this,this.onDecorationPressup),null),createjs.Ticker.getTime()-this._downTime>300||V.distance(this._activeDecoration.pickupPos,new createjs.Point(a.stageX,a.stageY))>30)this.stage.removeEventListener("stagemousemove",c(this,this.moveDecoration),null),this.collidesWithObject(this._activeDecoration)?(this._activeDecoration.playPlace(),this._activeDecoration.announcePlacement(),this._activeDecoration.addEventListener("mousedown",c(this,this.onMouseDown),null),this._activeDecoration=null):(this._activeDecoration.announceDeletion(),this._decorations.removeChild(this._activeDecoration),this._activeDecoration=null);else{this.stage.addEventListener("stagemousemove",c(this,this.moveDecoration),null),this.stage.addEventListener("stagemousedown",c(this,this.onDecorationPlace),null);for(var b=0,d=this._decorations.numChildren;d>b;){var e=b++,f=k.__cast(this._decorations.getChildAt(e),I);f.removeEventListener("mousedown",c(this,this.onMouseDown),null)}}},collidesWithObject:function(a){if(null!=this._front.getBounds())for(var b=0,c=this._front.numChildren;c>b;){var d=b++;if(a.getTransformedBounds().intersects(this._front.getChildAt(d).getTransformedBounds()))return!0}if(null!=this._back.getBounds())for(var e=0,f=this._back.numChildren;f>e;){var g=e++;if(a.getTransformedBounds().intersects(this._back.getChildAt(g).getTransformedBounds()))return!0}return!1},getPartyObject:function(a){this.cache(this.getTransformedBounds().x,this.getTransformedBounds().y,this.getTransformedBounds().width,this.getTransformedBounds().height);var b=new createjs.Container;this._back.x-=a.x,this._back.y-=a.y,b.addChild(this._back);for(var c=0,d=this._decorations.numChildren;d>c;){var e=c++,f=k.__cast(this._decorations.getChildAt(e),I),g=f._sprite.clone();g.x+=f.x-a.x,g.y+=f.y-a.y,b.addChild(g)}return this._front.x-=a.x,this._front.y-=a.y,b.addChild(this._front),b},stopInteraction:function(){for(var a=0,b=this._decorations.numChildren;b>a;){var c=a++,d=k.__cast(this._decorations.getChildAt(c),I);d.removeAllEventListeners()}},__class__:G});var H=function(a){createjs.Container.call(this),this._data=a,this._ui=new createjs.Container,this._decorations=new createjs.Container,this._spawnPoints=[],this.addChild(this._decorations),this.addChild(this._ui)};H.__name__=["pbsdaniel","party","scenes","minigames","decorate","DecorateTray"],H.__super__=createjs.Container,H.prototype=b(createjs.Container.prototype,{destroy:function(){this.removeAllChildren(),this._availableDecorations=null,this._decoQueue=null,this._ui=null;for(var a=0,b=this._spawnPoints;a<b.length;){var c=b[a];++a,c.destroy(),c=null}},addTrayFrame:function(a,b){null!=a&&(a.x=b.x,a.y=b.y,this._ui.addChild(a))},registerDecorations:function(a){this._availableDecorations=a,this._decoQueue=this._availableDecorations.slice()},addSpawnPoint:function(a){var b=new K(c(this,this.activateDecoration));b.addSFX(this._data.pickupSFX,this._data.dropSFX,this._data.placeSFX),b.x=a.x,b.y=a.y,b.spawnDecoaration(this._decoQueue.splice(ba.randomIntRange(0,this._decoQueue.length,!1),1)[0]),this._spawnPoints.push(b),this._decorations.addChild(b)},activateDecoration:function(a,b){a.addEventListener("placed",c(this,this.onDecorationPlaced)),a.addEventListener("deleted",c(this,this.onDecorationPlaced)),this.dispatchEvent(new J("pickUp",a,b))},stopInteraction:function(){for(var a=0,b=this._spawnPoints;a<b.length;){var c=b[a];++a,c.killInteraction()}},onDecorationPlaced:function(a){a.target.removeEventListener("placed",c(this,this.onDecorationPlaced)),a.target.removeEventListener("deleted",c(this,this.onDecorationPlaced)),"placed"==a.type&&this.dispatchEvent(new J("placed",null,null));for(var b=0,d=this._spawnPoints.length;d>b;){var e=b++;this._spawnPoints[e].isEmpty&&(this._spawnPoints[e].spawnDecoaration(this._decoQueue.splice(ba.randomIntRange(0,this._decoQueue.length,!1),1)[0]),0==this._decoQueue.length&&(this._decoQueue=this._availableDecorations.slice()))}},__class__:H});var I=function(a){createjs.Container.call(this),this._sprite=a,this._sprite.x=this._sprite.getBounds().width*-.5,this._sprite.y=this._sprite.getBounds().height*-.5,this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("rgba(255,0,0,0.01)").drawRect(this._sprite.x,this._sprite.y,this._sprite.getBounds().width,this._sprite.getBounds().height).endFill(),this.addChild(this._sprite),this.addChild(this._hitbox),this.cache(this._sprite.x,this._sprite.y,this._sprite.getBounds().width,this._sprite.getBounds().height)};I.__name__=["pbsdaniel","party","scenes","minigames","decorate","Decoration"],I.__super__=createjs.Container,I.prototype=b(createjs.Container.prototype,{announcePlacement:function(){this.dispatchEvent(new createjs.Event("placed",!1,!1))},announceDeletion:function(){this.dispatchEvent(new createjs.Event("deleted",!1,!1)),$.instance.playAudio(this._sfx.dropSFX)},destroy:function(){this._sprite=null,this._hitbox=null,this.removeAllChildren()},addSFX:function(a){this._sfx=a},playPickup:function(){$.instance.playAudio(this._sfx.pickupSFX)},playPlace:function(){$.instance.playAudio(this._sfx.placeSFX)},__class__:I});var J=function(a,b,c){createjs.Event.call(this,a,!1,!1),this.decoration=b,this.position=c};J.__name__=["pbsdaniel","party","scenes","minigames","decorate","DecorationEvent"],J.__super__=createjs.Event,J.prototype=b(createjs.Event.prototype,{__class__:J});var K=function(a){createjs.Container.call(this),this.isEmpty=!0,this._touchCallback=a};K.__name__=["pbsdaniel","party","scenes","minigames","decorate","DecorationSpawner"],K.__super__=createjs.Container,K.prototype=b(createjs.Container.prototype,{destroy:function(){this._decoration.destroy(),this._touchCallback=null,this.removeAllChildren()},spawnDecoaration:function(a){var b=a;if(null==a){var d=new createjs.Shape;d.graphics.beginFill("red").drawRect(0,0,100,100).endFill(),b=d}this._decoration=new I(b),this._decoration.addSFX(this._sfx),this.addChild(this._decoration),this._decoration.addEventListener("mousedown",c(this,this.onMouseDown),null),this.isEmpty=!1},killInteraction:function(){this._touchCallback=null,this._decoration.removeAllEventListeners()},addSFX:function(a,b,c){this._sfx={},this._sfx.pickupSFX=a,this._sfx.dropSFX=b,this._sfx.placeSFX=c},onMouseDown:function(a){this._decoration.playPickup(),this._decoration.pickupPos=new createjs.Point(a.stageX,a.stageY),this._decoration.removeEventListener("mousedown",c(this,this.onMouseDown),null),this.isEmpty=!0,this._touchCallback(this._decoration,new createjs.Point(a.stageX,a.stageY))},__class__:K});var L=function(a){createjs.Container.call(this),this._data=a,this._dressingSprite=C._assets.getSpriteFromSheet(a.ingredientData.bowlID),this.addChild(this._dressingSprite),this._active=!0,this.reset()};L.__name__=["pbsdaniel","party","scenes","minigames","salad","Dressing"],L.__super__=createjs.Container,L.prototype=b(createjs.Container.prototype,{grabDressing:function(a){C._activeBowl||(window.console.log("grab ingredient"),this._active=!1,this._dressingSprite.setTransform(this._dressingSprite.getBounds().width*-.5,-1*this._dressingSprite.getBounds().height),this.removeEventListener("mousedown",c(this,this.grabDressing),null),this.dispatchEvent(new S(new createjs.Point(a.stageX,a.stageY))))},reset:function(){window.console.log("Reset bowl"),this._active=!0,this.tipped(!1),this._dressingSprite.setTransform(this._dressingSprite.getBounds().width*-.5,-1*this._dressingSprite.getBounds().height),this.addEventListener("mousedown",c(this,this.grabDressing),null),this.setTransform(this._data.position.x,this._data.position.y)},getIngredient:function(){return this._data.ingredientData},pourSFX:function(){return this._data.pourSFX},tipped:function(a){a&&(this.rotation=-20),this.rotation=0},move:function(a,b,c){c?this.setTransform(a,b,1,1,-20):this.setTransform(a,b,1,1,0)},__class__:L});var M=function(a){createjs.Container.call(this),this._data=a,this._active=!0,this.resetBowl()};M.__name__=["pbsdaniel","party","scenes","minigames","salad","IngredientBowl"],M.__super__=createjs.Container,M.prototype=b(createjs.Container.prototype,{grabIngredient:function(a){C._activeBowl||(window.console.log("grab ingredient"),this._active=!1,this.removeEventListener("mousedown",c(this,this.grabIngredient),null),this.dispatchEvent(new S(new createjs.Point(a.stageX,a.stageY))))},resetBowl:function(){window.console.log("Reset bowl"),this._active=!0,this.addEventListener("mousedown",c(this,this.grabIngredient),null),this.setTransform(this._data.position.x,this._data.position.y)},setIngredient:function(a){this._currentIngredient=a,null!=this._bowlSprite&&this.removeChild(this._bowlSprite),window.console.log(a.bowlID),this._bowlSprite=C._assets.getSpriteFromSheet(a.bowlID),window.console.log(this._bowlSprite),this._bowlSprite.setTransform(this._bowlSprite.getBounds().width*-.5,-1*this._bowlSprite.getBounds().height),this.addChild(this._bowlSprite)},getIngredient:function(){return null!=this._currentIngredient?this._currentIngredient:null},__class__:M});var N=function(a){createjs.Container.call(this),this._bowlBack=C._assets.getSpriteFromSheet(a.bowlBack),this._bowlFront=C._assets.getSpriteFromSheet(a.bowlFront),this._ingredientMap=new i;for(var b=0,c=a.ingredients;b<c.length;){var d=c[b];++b;var e=d.name,f=this._ingredientMap;null!=ma[e]?f.setReserved(e,d):f.h[e]=d}this._ingredients=new createjs.Container,this.addChild(this._bowlBack),this.addChild(this._ingredients),this.addChild(this._bowlFront)};N.__name__=["pbsdaniel","party","scenes","minigames","salad","SaladBowl"],N.__super__=createjs.Container,N.prototype=b(createjs.Container.prototype,{addIngredient:function(a){var b=this._ingredientMap;if(null!=(null!=ma[a]?b.getReserved(a):b.h[a])){var c=this._ingredientMap,d=null!=ma[a]?c.getReserved(a):c.h[a],e=C._assets.getSpriteFromSheet(d.sheetID);this._ingredients.addChild(e)}},addDressing:function(a){var b=C._assets.getSpriteFromSheet(a);window.console.log(b),this._ingredients.addChild(b)},isReleasedOn:function(a,b){return this.getBounds().contains(a,b)?!0:!1},getPartyObject:function(a){this.cache(this.getTransformedBounds().x,this.getTransformedBounds().y,this.getTransformedBounds().width,this.getTransformedBounds().height);var b=new createjs.Container;this._bowlBack.x-=a.x,this._bowlBack.y-=a.y,b.addChild(this._bowlBack);for(var c=0,d=this._ingredients.numChildren;d>c;){var e=c++,f=this._ingredients.getChildAt(e).clone();b.addChild(f)}return this._bowlFront.x-=a.x,this._bowlFront.y-=a.y,b.addChild(this._bowlFront),b},__class__:N});var O=function(){this._currentStateIndex=0,createjs.Container.call(this)};O.__name__=["pbsdaniel","party","scenes","minigames","spotInteract","Spot"],O.__super__=createjs.Container,O.prototype=b(createjs.Container.prototype,{destroy:function(){this.removeEventListener("mousedown",c(this,this.onMouseDown),null),this.removeEventListener("pressup",c(this,this.onMouseUp),null),this._interactionAnim.stop(),this._interactionAnim.removeEventListener("animationend",c(this,this.onAnimationEnd),null),this.removeAllChildren()},addVisualStates:function(a){this._stateImages=a},addInteractAnim:function(a,b){this._interactionAnim=a,this._animationOrigin=b},addSFX:function(a){this._sfx=a},setOffset:function(a){this._offset=a},setHitbox:function(a){this._hitbox=a,this.hitArea=this._hitbox},initialize:function(){null!=this._currentStateImage&&this.removeChild(this._currentStateImage),this._currentStateIndex=0,this._currentStateImage=this._stateImages[this._currentStateIndex],this._currentStateImage.setTransform(-this._offset.x,-this._offset.y),this.addChild(this._currentStateImage),null==this._hitbox&&(this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("green").drawRect(-this._offset.x,-this._offset.y,this._currentStateImage.getBounds().width,this._currentStateImage.getBounds().height).endFill(),this.hitArea=this._hitbox),this._allowInteract=!0,this.addEventListener("mousedown",c(this,this.onMouseDown),null)},turnOff:function(){this._interactionAnim.parent==this&&this.removeChild(this._interactionAnim),createjs.Tween.removeTweens(this),this.removeEventListener("mousedown",c(this,this.onMouseDown),null),this.removeEventListener("pressup",c(this,this.onMouseUp),null),this._interactionAnim.stop(),this._interactionAnim.removeEventListener("animationend",c(this,this.onAnimationEnd),null)},advanceState:function(){null!=this._currentStateImage&&this.removeChild(this._currentStateImage),this._currentStateIndex++,this._currentStateImage=this._stateImages[this._currentStateIndex],this._currentStateImage.setTransform(-this._offset.x,-this._offset.y),this.addChild(this._currentStateImage),this._stateImages.length-this._currentStateIndex<=1&&(this.removeEventListener("mousedown",c(this,this.onMouseDown),null),this.removeEventListener("pressup",c(this,this.onMouseUp),null),createjs.Tween.removeTweens(this),this.dispatchEvent(new createjs.Event("complete",!1,!1)))},onMouseDown:function(a){this.removeEventListener("pressup",c(this,this.onMouseUp),null),this._allowInteract&&(this._allowInteract=!1,this.removeEventListener("mousedown",c(this,this.onMouseDown),null),this.addEventListener("pressup",c(this,this.onMouseUp),null),null!=a?(this._lastAnimPos=new createjs.Point(a.localX-this._animationOrigin.x,a.localY-this._animationOrigin.y),this._interactionAnim.x=a.localX-this._animationOrigin.x,this._interactionAnim.y=a.localY-this._animationOrigin.y):(this._interactionAnim.x=this._lastAnimPos.x,this._interactionAnim.y=this._lastAnimPos.y),this.addChild(this._interactionAnim),this._interactionAnim.framerate=24,this._interactionAnim.addEventListener("animationend",c(this,this.onAnimationEnd),null),this._interactionAnim.play(),null!=this._sfx&&this._sfx.length>0&&$.instance.playAudio(this._sfx[Math.floor(Math.random()*this._sfx.length)]),this._currentStateIndex%4==0&&this.dispatchEvent(new createjs.Event("interestingOccurance",!1,!1)),createjs.Tween.get(this).wait(1e3,!1).call(c(this,this.onMouseDown),[a]))},onAnimationEnd:function(a){this._interactionAnim.removeEventListener("animationend",c(this,this.onAnimationEnd),null),this.removeChild(this._interactionAnim),this.advanceState(),this._allowInteract=!0},onMouseUp:function(a){this.addEventListener("mousedown",c(this,this.onMouseDown),null),this.removeEventListener("pressup",c(this,this.onMouseUp),null),createjs.Tween.removeTweens(this)},__class__:O});var P=function(a){this._touchID=-2,this._drawSize=60,createjs.Container.call(this),this._data=a};P.__name__=["pbsdaniel","party","scenes","minigames","tableClean","Table"],P.__super__=createjs.Container,P.prototype=b(createjs.Container.prototype,{destroy:function(){n.SpringrollApp.display.stage.removeEventListener("stagemouseup",c(this,this.onTouchOff)),n.SpringrollApp.display.stage.removeEventListener("stagemousemove",c(this,this.drawingCheck)),this.removeAllChildren()},addSponge:function(a){this._sponge=new createjs.Container,a.x=a.getBounds().width/-2,a.y=a.getBounds().height/-2,this._sponge.addChild(a)},addBase:function(a){this._base=a},addCover:function(a){this._cover=a},addSFX:function(a){this._scratches=a},init:function(){this._table=new createjs.Container,this._table.addChild(this._base),this._dirt=new createjs.Container,this._dirt.addChild(this._cover),this._eraserObj=new createjs.Shape,this._dirt.addChild(this._eraserObj),this._eraserObj.compositeOperation="destination-out",this._dirt.cache(0,0,this._base.getBounds().width,this._base.getBounds().height),this._table.addChild(this._dirt),this._eraseThreshold=this._data.completetionPercentage,this._eraseRects=[],this._erasedRects=[];for(var a=new createjs.Rectangle(0,0,this._base.getBounds().width/this._data.activationGrid.width,this._base.getBounds().height/this._data.activationGrid.height),b=0,c=Math.floor(this._data.activationGrid.width);c>b;)for(var d=b++,e=0,f=Math.floor(this._data.activationGrid.height);f>e;){var g=e++;this._eraseRects.push(new createjs.Rectangle(d*a.width,g*a.height,a.width,a.height))}this.addChild(this._table),this._sponge.x=200,this._sponge.y=122,this._sponge.rotation=85,this.addChild(this._sponge),this._drawSize=this._data.brushSize,this._drawing=!1},turnOn:function(){n.SpringrollApp.display.stage.addEventListener("stagemousemove",c(this,this.drawingCheck))},turnOff:function(){n.SpringrollApp.display.stage.removeEventListener("stagemousemove",c(this,this.drawingCheck))},update:function(a){this._autoComplete&&this._dirt.updateCache(null)},drawingCheck:function(a){var b=this._table.globalToLocal(a.localX,a.localY);this._table.getBounds().contains(b.x,b.y)?(this._drawing?createjs.Ticker.getTime()-this._lastTime>40&&(this.onDrawMove(a,b),this._lastTime=createjs.Ticker.getTime()):this.startDraw(a,b),null!=this._eraseRects&&this.eraseCheck(b)):this._drawing&&this.onDrawComplete(a,b)},startDraw:function(a,b){this._drawing||(this._sponge.x=b.x,this._sponge.y=b.y,this._touchID=a.pointerID,this._points=[],
this._drawing=!0,this._lastPosition=new createjs.Point(b.x+.01,b.y+.01),this._eraserObj.graphics.beginStroke("#ffffff").setStrokeStyle(this._drawSize,"round").beginFill("#ffffff").moveTo(this._lastPosition.x,this._lastPosition.y).lineTo(b.x,b.y).endFill().endStroke(),this._eraserObj.compositeOperation="destination-out",this._dirt.updateCache(null),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._lastTime=createjs.Ticker.getTime(),$.instance.playAudio(this._scratches[ba.randomIntRange(0,this._scratches.length,!1)],c(this,this.scratchDone)),n.SpringrollApp.display.stage.addEventListener("stagemouseup",c(this,this.onTouchOff)))},onTouchOff:function(a){var b=this._table.globalToLocal(a.localX,a.localY);this.onDrawComplete(a,b)},onDrawMove:function(a,b){if(a.pointerID==this._touchID){this._sponge.x=b.x,this._sponge.y=b.y,this._eraserObj.graphics.beginStroke("#ffffff").setStrokeStyle(this._drawSize,"round").beginFill("#ffffff").moveTo(this._lastPosition.x,this._lastPosition.y).lineTo(b.x,b.y).endFill().endStroke(),this._eraserObj.compositeOperation="destination-out",this._dirt.updateCache(null),this._lastPosition=b,this._points.shift(),this._points.push(this._lastPosition);this.checkForDirectionChange()}},onDrawComplete:function(a,b){a.pointerID==this._touchID&&(n.SpringrollApp.display.stage.removeEventListener("stagemouseup",c(this,this.onTouchOff)),this._drawing=!1,this._eraserObj.graphics.beginStroke("#ffffff").setStrokeStyle(this._drawSize,"round").beginFill("#ffffff").moveTo(this._lastPosition.x,this._lastPosition.y).lineTo(b.x,b.y).endFill().endStroke(),this._eraserObj.compositeOperation="destination-out",this._dirt.updateCache(null),this._touchID=-2)},eraseCheck:function(a){for(var b=0,d=this._eraseRects.length;d>b;){var e=b++;if(this._eraseRects[e].contains(a.x,a.y)){this._erasedRects.push(this._eraseRects.splice(e,1)[0]),this._erasedRects.length%4==0&&this.dispatchEvent(new createjs.Event("interestingOccurance",!1,!1)),this._erasedRects.length/(this._eraseRects.length+this._erasedRects.length)>this._eraseThreshold&&(n.SpringrollApp.display.stage.removeEventListener("stagemousemove",c(this,this.drawingCheck)),this._autoComplete=!0,this._totalEraser=new createjs.Shape,this._totalEraser.graphics.beginFill("#ffffff").drawRect(0,0,this._table.getBounds().width,this._table.getBounds().height).endFill(),this._dirt.addChild(this._totalEraser),this._totalEraser.alpha=0,this._totalEraser.compositeOperation="destination-out",this._dirt.updateCache(null),createjs.Tween.get(this._totalEraser).to({alpha:1},1500).call(c(this,this.totalEraseComplete)));break}}},totalEraseComplete:function(){this._autoComplete=!1,this.dispatchEvent(new createjs.Event("complete",!1,!1))},checkForDirectionChange:function(){var a=V.findAngle(this._points[0],this._points[3],this._points[6]);return a<.5*Math.PI&&!this._scratchSFX&&(this._scratchSFX=!0,$.instance.playAudio(this._scratches[ba.randomIntRange(0,this._scratches.length,!1)],c(this,this.scratchDone))),a},scratchDone:function(){this._scratchSFX=!1},__class__:P});var Q=function(a,b,c){this._manifest=a,this._spriteSheetId=b,this._spriteSheetDataId=c};Q.__name__=["sg","cjs","AssetLoader"],Q.prototype={loadSpriteSheet:function(a){null!=this._queue?a():(this._callback=a,this._queue=new createjs.LoadQueue(!0),this._queue.on("complete",c(this,this.createSpriteSheet)),this._queue.loadManifest(this._manifest))},createSpriteSheet:function(){var a=this._queue.getResult(this._spriteSheetDataId);a.images=[this._queue.getResult(this._spriteSheetId)],this._spriteSheet=new createjs.SpriteSheet(a),this._callback()},image:function(a){var b=new createjs.Sprite(this._spriteSheet);return b.gotoAndStop(a),b},__class__:Q};var R=function(a,b,c,d,e){null==e&&(e=!1),null==d&&(d=!1),createjs.Event.call(this,a,d,e),this.sceneId=b,this.data=c};R.__name__=["sg","cjs","SceneLoadEvent"],R.__super__=createjs.Event,R.prototype=b(createjs.Event.prototype,{get_sceneId:function(){return this.sceneId},get_data:function(){return this.data},__class__:R});var S=function(a){createjs.Event.call(this,S.POSITION,!1,!1),this.position=a};S.__name__=["sg","cjs","events","PositionEvent"],S.__super__=createjs.Event,S.prototype=b(createjs.Event.prototype,{__class__:S});var T=function(a,b,c,d){null==d&&(d=5),null==c&&(c="#FFFFFF"),null==b&&(b=15),createjs.Container.call(this),this.x=a.x,this.y=a.y;for(var e=0,f=d;f>e;){var g=(e++,a.clone());this.addChild(g),g.x=0,g.y=0,g.shadow=new createjs.Shadow(c,0,0,b),g.cache(-b+a.getBounds().x,-b+a.getBounds().y,a.getBounds().width+2*b,a.getBounds().height+2*b)}this.cache(-b+a.getBounds().x,-b+a.getBounds().y,a.getBounds().width+2*b,a.getBounds().height+2*b),this.removeAllChildren()};T.__name__=["sg","cjs","ui","Glow"],T.__super__=createjs.Container,T.prototype=b(createjs.Container.prototype,{__class__:T});var U=function(a,b,c,d){createjs.Container.call(this),null==d&&(d=a.getBounds()),this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("#00ff00"),this._hitbox.graphics.drawRect(d.x,d.y,d.width,d.height),this._hitbox.graphics.endFill(),this._hitbox.alpha=.01,this._off=a,this.addChildAt(this._off,0),null!=b&&this.addOver(b),null==c&&null!=this._over?this._down=this._over:this._down=c,this.addChild(this._hitbox)};U.__name__=["sg","cjs","ui","HoverButton"],U.__super__=createjs.Container,U.prototype=b(createjs.Container.prototype,{forceOver:function(){this._over.visible=!0,this._off.visible=!1},forceOut:function(){this._over.visible=!1,this._off.visible=!0},turnOn:function(){this._hitbox.addEventListener("mousedown",c(this,this.onDown)),null!=this._over&&(this._hitbox.addEventListener("mouseover",c(this,this.onOver)),this._hitbox.addEventListener("mouseout",c(this,this.onOut)))},turnOff:function(){this._hitbox.removeEventListener("mousedown",c(this,this.onDown)),null!=this._over&&(this._hitbox.removeEventListener("mouseover",c(this,this.onOver)),this._hitbox.removeEventListener("mouseout",c(this,this.onOut)))},onOut:function(a){this._over.visible=!1,this._off.visible=!0},onOver:function(a){this._over.visible=!0,this._off.visible=!1,this.dispatchEvent(new createjs.Event("over",!1,!1))},onDown:function(a){null!=this._down&&(null!=this._over&&(this._over.visible=!1),this._off.visible=!1,this._down.visible=!0),this.dispatchEvent(new createjs.Event("down",!1,!1))},addOver:function(a,b,c){null==c&&(c=!1),this._over=a,null!=b&&(this._over.x=b.x,this._over.y=b.y),this.addChildAt(this._over,0),this._over.visible=!1,this._clearOnOver=c},destroy:function(){this.removeAllChildren(),this.turnOff()},__class__:U});var V=function(){};V.__name__=["sg","cjs","utils","PointUtils"],V.findAngle=function(a,b,c){var d=Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2),e=Math.pow(b.x-c.x,2)+Math.pow(b.y-c.y,2),f=Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2);return Math.acos((e+d-f)/Math.sqrt(4*e*d))},V.distance=function(a,b){return Math.sqrt((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y))};var W=function(){Q.call(this,W.manifest(),"loadingSpriteSheet","loadingData")};W.__name__=["sg","cjs","views","LoadingAnimation"],W.get_instance=function(){return null==W.instance&&(W.instance=new W),W.instance},W.manifest=function(){return[{src:"assets/sheets/loading.png",id:"loadingSpriteSheet"},{src:"assets/sheets/loading.json",id:"loadingData"}]},W.load=function(a){W.get_instance().loadSpriteSheet(a)},W.loadingAnimation=function(){return new createjs.Sprite(W.get_instance()._spriteSheet,"Loading")},W.__super__=Q,W.prototype=b(Q.prototype,{__class__:W});var X=function(){u.call(this)};X.__name__=["sg","cjs","views","LoadingScreen"],X.__super__=u,X.prototype=b(u.prototype,{init:function(){this._assets=new Z(this.getImageManifest(),this.getAudioManifest(),c(this,this.onPackageReady)),this._assets.load()},onPackageReady:function(){},start:function(){},freeze:function(){},getImageManifest:function(){return[]},getAudioManifest:function(){return[]},__class__:X});var Y=function(a,b){this._started=!1,this.name=a,this._startCall=b};Y.__name__=["sg","kit","PBSGameButler"],Y.prototype={startGame:function(a,b){this._started||this._startCall(a,b)},get_name:function(){return this.name},__class__:Y};var Z=function(a,b,c,d){null==d&&(d=""),this.completed=!1,this._sheetCount=0,this._imagesLoaded=!1,this._audioLoaded=!1,this._imgManifest=a,this._audioManifest=b,this._completeCallback=c,this._loadQueue=new createjs.LoadQueue(!0,d),createjs.Sound.alternateExtensions=["mp3","wav"],this._loadQueue.installPlugin(createjs.Sound),this._audioManager=$.instance};Z.__name__=["sg","pbskids","AssetPackage"],Z.makeManifestItem=function(a,b,c){return{id:a,src:b,type:c}},Z.makeAudioManifestItem=function(a){return{id:a}},Z.prototype={load:function(){null!=this._audioManifest&&this._audioManifest.length>0?$.instance.loadAudio(this._audioManifest,c(this,this.onAudioLoaded)):this._audioLoaded=!0,this.loadManifest(this._imgManifest)},dispose:function(){this._loadQueue.removeAll(),this._loadQueue.close(),this._loadQueue=null,this._imgManifest=null,this._audioManifest=null,this._sheets=null,this._completeCallback=null},getSpriteFromSheet:function(a,b){if(null!=b&&""!=b){var c=new createjs.Sprite(this._loadQueue.getResult(b),a);return c}for(var d=this._loadQueue.getItems(!0),e=0,f=d.length;f>e;){var g=e++;if("spritesheet"==d[g].item.type&&-1!=this._loadQueue.getResult(d[g].item.id).animations.indexOf(a)){var h=new createjs.Sprite(this._loadQueue.getResult(d[g].item.id),a);return h}}return null},getBitmap:function(a){var b=this._loadQueue.getResult(a);return new createjs.Bitmap(b)},getImage:function(a){return this._loadQueue.getResult(a)},getResult:function(a){return this._loadQueue.getResult(a)},onAudioLoaded:function(){this._audioLoaded=!0,this.checkForCompletion()},loadManifest:function(a){a.length>0?(this._loadQueue.addEventListener("complete",c(this,this.onQueueComplete),null),this._loadQueue.loadManifest(a)):(this._imagesLoaded=!0,this.checkForCompletion())},loadPostManifest:function(a){this._loadQueue.loadManifest(a)},onQueueComplete:function(a){this._loadQueue.removeEventListener("complete",c(this,this.onQueueComplete),null),this._imagesLoaded=!0,this.checkForCompletion()},checkForCompletion:function(){this._audioLoaded&&this._imagesLoaded&&!this.completed&&(this.completed=!0,this._completeCallback())},__class__:Z};var $=function(a,b){this._callbacks=new i,this._soundMap=new i,this._sounds=new i,createjs.EventDispatcher.call(this),this._voPlayer=a,this._sound=b};$.__name__=["sg","pbskids","audio","SRAudioManager"],$.init=function(a){null==$.instance&&($.instance=new $(a.voPlayer,a.sound))},$.__super__=createjs.EventDispatcher,$.prototype=b(createjs.EventDispatcher.prototype,{playAudio:function(a,b){var c=this._sound.play(a,b);return c},loopAudio:function(a){var b={loop:-1},c=this._sound.play(a,b);return c},playVO:function(a,b,c){null==c&&(c=!0),c||!this._voPlayer.playing?(this._voCallback=null,this._voPlayer.play(a,b)):window.console.log("VO dropped due to conflicting VO playing. "+a+" --/-> "+this._voPlayer.currentVO)},stopAudio:function(a){this._sound.stop(a)},stopVO:function(a){this._voPlayer.stop()},killAll:function(){this._voPlayer.stop(),this._sound.stopAll()},handleFailed:function(a){},handleComplete:function(a){var b=a.currentTarget.uniqueId,d=this._callbacks;if(null!=(null!=ma[b]?d.getReserved(b):d.h[b])){var e=a.currentTarget.uniqueId,f=this._callbacks;(null!=ma[e]?f.getReserved(e):f.h[e])()}var g=a.currentTarget.uniqueId,h=this._sounds;(null!=ma[g]?h.getReserved(g):h.h[g]).stop();var i=a.currentTarget.uniqueId,j=this._sounds;(null!=ma[i]?j.getReserved(i):j.h[i]).removeEventListener("complete",c(this,this.handleComplete));var k=a.currentTarget.uniqueId,l=this._sounds;(null!=ma[k]?l.getReserved(k):l.h[k]).removeEventListener("failed",c(this,this.handleFailed));var m=a.currentTarget.uniqueId,n=this._sounds;null!=ma[m]?n.setReserved(m,null):n.h[m]=null,this._sounds.remove(a.currentTarget.uniqueId);var o=a.currentTarget.uniqueId,p=this._callbacks;null!=ma[o]?p.setReserved(o,null):p.h[o]=null,this._callbacks.remove(a.currentTarget.uniqueId)},loadAudio:function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d,c.push(e.id)}this._sound.preload(c,b)},queueLoaded:function(a){},__class__:$});var _=function(){};_.__name__=["sg","springroll","logging","Logging"],_.log=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.log(a))},_.getCallerString=function(a){if(null==a)return"";var b=f.getClassName(a).split(".");return"["+b[b.length-1]+"] "},_.clear=function(){_.enabled&&springroll.Debug.clear()},_.debug=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.debug(a))},_.error=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.error(a))},_.info=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.info(a))},_.trace=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.trace(a))},_.aqua=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.aqua(a))},_.blue=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.blue(a))},_.gray=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.gray(a))},_.green=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.green(a))},_.lime=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.lime(a))},_.maroon=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.maroon(a))},_.navy=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.navy(a))},_.olive=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.olive(a))},_.orange=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.orange(a))},_.pink=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.pink(a))},_.purple=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.purple(a))},_.red=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.red(a))},_.silver=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.silver(a))},_.teal=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.teal(a))},_.yellow=function(a,b){_.enabled&&(null!=b&&(a=_.getCallerString(b)+e.string(a)),springroll.Debug.yellow(a))};var aa=function(a,b,d){u.call(this),this._startScene=b,this._readyCallback=d,this._data=a,this._assets=new Z(this._data.manifestData.assetManifest,this._data.manifestData.audioManifest,c(this,this.onPackageReady)),this._assets.load()};aa.__name__=["sg","springroll","screens","TitleScreen"],aa.__super__=u,aa.prototype=b(u.prototype,{destroy:function(){createjs.Tween.removeTweens(this),this._bg=null,this._playButton.removeAllEventListeners(),this._playButton.destroy(),this._playButton=null,window.removeEventListener("keydown",c(this,this.onKeyDown)),$.instance.killAll()},start:function(){createjs.Tween.get(this).wait(1500,!0).call((ea=$.instance,c(ea,ea.playVO)),[this._data.audio]),this._playButton.addEventListener("down",c(this,this.triggerAdvance)),this.addEventListener("mousedown",c(this,this.triggerAdvance),null),window.addEventListener("keydown",c(this,this.onKeyDown))},onPackageReady:function(){if(this._bg=this._assets.getBitmap(this._data.image),this.addChild(this._bg),this._playButton=new U(this._assets.getSpriteFromSheet(this._data.playButton.art.up,this._data.playButton.art.sheet),this._assets.getSpriteFromSheet(this._data.playButton.art.down,this._data.playButton.art.sheet)),this.addChild(this._playButton),"center"==this._data.playButton.align){var a=n.SpringrollApp.display.width*this._data.playButton.position.x,b=.5*this._playButton.getBounds().width;this._playButton.x=a-b;var c=n.SpringrollApp.display.height*this._data.playButton.position.y,d=.5*this._playButton.getBounds().height;this._playButton.y=c-d}this._playButton.turnOn(),this._readyCallback()},onKeyDown:function(a){window.removeEventListener("keydown",c(this,this.onKeyDown)),this.triggerAdvance()},triggerAdvance:function(a){this.removeEventListener("mousedown",c(this,this.triggerAdvance),null),window.removeEventListener("keydown",c(this,this.onKeyDown)),this._playButton.removeEventListener("down",c(this,this.triggerAdvance)),this._playButton.turnOff(),createjs.Tween.removeTweens(this),$.instance.killAll(),this.dispatchEvent(new R("sceneRequest",this._startScene))},__class__:aa});var ba=function(){};ba.__name__=["sg","utils","MathUtils"],ba.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)},ba.randomIntRange=function(a,b,c){return null==c&&(c=!0),c&&++b,Math.floor(Math.random()*(b-a)+a)},ba.randomRange=function(a,b){return Math.random()*(b-a)+a},ba.prototype={__class__:ba};var ca=function(){};ca.__name__=["sg","utils","MinMaxBounds"],ca.prototype={getValueWithin:function(){return ba.randomRange(this.min,this.max)},__class__:ca};var da=function(){};da.__name__=["sg","utils","Utils"],da.shuffleArray=function(a){a=k.__cast(a,Array);for(var b=[];a.length>0;)b.push(a.splice(Math.floor(Math.random()*a.length),1)[0]);return b},da.prototype={__class__:da};var ea,fa=0;String.prototype.__class__=String,String.__name__=["String"],Array.__name__=["Array"],Date.prototype.__class__=Date,Date.__name__=["Date"];var ga={__name__:["Int"]},ha={__name__:["Dynamic"]},ia=Number;ia.__name__=["Float"];var ja=Boolean;ja.__ename__=["Bool"];var ka={__name__:["Class"]},la={};createjs.DisplayObject.prototype.setBounds=function(a,b,c,d){this._bounds=null!=a?(this._bounds||new createjs.Rectangle).setValues(a,b,c,d):null};var ma={};k.__toStr={}.toString,l.GAME_WIDTH=1280,l.GAME_HEIGHT=800,l.GAME_NAME="NeighborhoodParty",l.GAME_DATA="gameData",l.GLOBAL_ASSETS="globalAssets",l.CHARACTER_DATA="characterData",l.TITLESCREEN_DATA="titlescreenData",l.TRANSITION_IMG="transitionImg",l.INTRO_SCENE="introScene",l.TROLLEY_SCENE="trolleyScene",l.MINIGAME_SCENE="minigameScene",l.PARTY_SCENE="partyScene",l.MG_DECORATE_TREE="mgDecorateTree",l.MG_DECORATE_FLOWERS="mgDecorateFlowers",l.MG_DECORATE_CAKE="mgDecorateCake",l.MG_BALLOONS="mgBalloons",l.MG_LEAFRAKE="mgLeafRake",l.MG_TABLECLEAN="mgTableClean",l.MG_SALAD="mgSalad",l.MG_DECORATE="mgDecorate",l.MG_OTHER="mgOther",l.INTERESTING_OCCURANCE="interestingOccurance",l.DANIEL="Daniel",l.KATERINA="Katerina",l.WEDNESDAY="Wednesday",l.ELAINA="Elaina",l.JODI="Jodi",m.DT_LOADING_SS="loadingScreenSheet",o.LOAD_MIN_TIME=500,s.IDLE="idle",s.REACTING="reacting",s.INTRODUCING="introducing",s.EXITING="exiting",u.COMPLETE="complete",y.DESTINATION_REACHED="destinationReached",y.TROLLEY_ENTER="trolleyEnter",y.TROLLEY_TRAVELLING="trolleyTravelling",y.TROLLEY_STOPPING="trolleyStopping",y.TROLLEY_STOPPED="trolleyStopped",F.FRESH="fresh",F.EXPANDED="expanded",F.RELEASE="release",F.TIME_TO_BLOWUP=4e3,F.INTERESTING_OCCURANCE="interestingOccurance",F.COMPLETE="complete",G.DISTANCE_THRESHOLD=30,G.CLICK_THRESHOLD=300,I.PLACED="placed",I.DELETED="deleted",J.PICK_UP="pickUp",J.PLACED="placed",O.COMPLETE="complete",P.COMPLETE="complete",R.SCENE_REQUEST="sceneRequest",R.GAME_RESTART="gameRestart",S.POSITION="position",U.ACTIVATED="activated",U.DOWN="down",U.OVER="over",W.SPRITESHEET="loadingSpriteSheet",W.DATA="loadingData",X.READY="ready",_.enabled=!0,aa.TITLE_SCREEN_SS="titleScreenSS",p.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);