!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=428)}([function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(40));var r=i(25);e.Input=r;var o=i(8),s=i(212);n(i(78)),n(i(385)),n(i(114)),n(i(386)),n(i(387)),n(i(195)),n(i(391)),n(i(394)),n(i(8)),n(i(212));var a="%c"+s.PACKAGE_NAME+" v"+s.PACKAGE_VERSION;void 0!==s.GIT_BRANCH&&(a+=" - "+s.GIT_BRANCH,void 0!==s.GIT_COMMIT&&(a+="#"+s.GIT_COMMIT.substr(0,7))),a+=" - %chttps://reli.sh",console.log(a,o.LogUtils.STYLE_BLACK,o.LogUtils.STYLE_RELISH_BOLD)},function(t,e,i){"use strict";i.r(e),function(t,n){i.d(e,"_gsScope",(function(){return r})),i.d(e,"TweenLite",(function(){return o})),i.d(e,"globals",(function(){return s})),i.d(e,"default",(function(){return o})),i.d(e,"SimpleTimeline",(function(){return l})),i.d(e,"Animation",(function(){return h})),i.d(e,"Ease",(function(){return u})),i.d(e,"Linear",(function(){return c})),i.d(e,"Power0",(function(){return d})),i.d(e,"Power1",(function(){return p})),i.d(e,"Power2",(function(){return f})),i.d(e,"Power3",(function(){return g})),i.d(e,"Power4",(function(){return m})),i.d(e,"TweenPlugin",(function(){return _})),i.d(e,"EventDispatcher",(function(){return v}));
/*!
 * VERSION: 2.1.2
 * DATE: 2019-03-01
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 *
 * @author: Jack Doyle, jack@greensock.com
 */
var r="undefined"!=typeof window?window:t.exports&&void 0!==n?n:{},o=function(t){var e={},i=t.document,n=t.GreenSockGlobals=t.GreenSockGlobals||t;if(n.TweenLite)return n.TweenLite;var r,o,s,a,l,h,u,c=function(t){var e,i=t.split("."),r=n;for(e=0;e<i.length;e++)r[i[e]]=r=r[i[e]]||{};return r},d=c("com.greensock"),p=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},f=function(){},g=(h=Object.prototype.toString,u=h.call([]),function(t){return null!=t&&(t instanceof Array||"object"==typeof t&&!!t.push&&h.call(t)===u)}),m={},_=function(t,i,r,o){this.sc=m[t]?m[t].sc:[],m[t]=this,this.gsClass=null,this.func=r;var s=[];this.check=function(a){for(var l,h,u,d,p=i.length,f=p;--p>-1;)(l=m[i[p]]||new _(i[p],[])).gsClass?(s[p]=l.gsClass,f--):a&&l.sc.push(this);if(0===f&&r)for(u=(h=("com.greensock."+t).split(".")).pop(),d=c(h.join("."))[u]=this.gsClass=r.apply(r,s),o&&(n[u]=e[u]=d),p=0;p<this.sc.length;p++)this.sc[p].check()},this.check(!0)},v=t._gsDefine=function(t,e,i,n){return new _(t,e,i,n)},y=d._class=function(t,e,i){return e=e||function(){},v(t,[],(function(){return e}),i),e};v.globals=n;var b=[0,0,1,1],x=y("easing.Ease",(function(t,e,i,n){this._func=t,this._type=i||0,this._power=n||0,this._params=e?b.concat(e):b}),!0),w=x.map={},T=x.register=function(t,e,i,n){for(var r,o,s,a,l=e.split(","),h=l.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--h>-1;)for(o=l[h],r=n?y("easing."+o,null,!0):d.easing[o]||{},s=u.length;--s>-1;)a=u[s],w[o+"."+a]=w[a+o]=r[a]=t.getRatio?t:t[a]||new t};for((s=x.prototype)._calcEnd=!1,s.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,n=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?n*=n:2===i?n*=n*n:3===i?n*=n*n*n:4===i&&(n*=n*n*n*n),1===e?1-n:2===e?n:t<.5?n/2:1-n/2},o=(r=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--o>-1;)s=r[o]+",Power"+o,T(new x(null,null,1,o),s,"easeOut",!0),T(new x(null,null,2,o),s,"easeIn"+(0===o?",easeNone":"")),T(new x(null,null,3,o),s,"easeInOut");w.linear=d.easing.Linear.easeIn,w.swing=d.easing.Quad.easeInOut;var S=y("events.EventDispatcher",(function(t){this._listeners={},this._eventTarget=t||this}));(s=S.prototype).addEventListener=function(t,e,i,n,r){r=r||0;var o,s,h=this._listeners[t],u=0;for(this!==a||l||a.wake(),null==h&&(this._listeners[t]=h=[]),s=h.length;--s>-1;)(o=h[s]).c===e&&o.s===i?h.splice(s,1):0===u&&o.pr<r&&(u=s+1);h.splice(u,0,{c:e,s:i,up:n,pr:r})},s.removeEventListener=function(t,e){var i,n=this._listeners[t];if(n)for(i=n.length;--i>-1;)if(n[i].c===e)return void n.splice(i,1)},s.dispatchEvent=function(t){var e,i,n,r=this._listeners[t];if(r)for((e=r.length)>1&&(r=r.slice(0)),i=this._eventTarget;--e>-1;)(n=r[e])&&(n.up?n.c.call(n.s||i,{type:t,target:i}):n.c.call(n.s||i))};var E=t.requestAnimationFrame,P=t.cancelAnimationFrame,A=Date.now||function(){return(new Date).getTime()},I=A();for(o=(r=["ms","moz","webkit","o"]).length;--o>-1&&!E;)E=t[r[o]+"RequestAnimationFrame"],P=t[r[o]+"CancelAnimationFrame"]||t[r[o]+"CancelRequestAnimationFrame"];y("Ticker",(function(t,e){var n,r,o,s,h,u=this,c=A(),d=!(!1===e||!E)&&"auto",p=500,g=33,m=function(t){var e,i,a=A()-I;a>p&&(c+=a-g),I+=a,u.time=(I-c)/1e3,e=u.time-h,(!n||e>0||!0===t)&&(u.frame++,h+=e+(e>=s?.004:s-e),i=!0),!0!==t&&(o=r(m)),i&&u.dispatchEvent("tick")};S.call(u),u.time=u.frame=0,u.tick=function(){m(!0)},u.lagSmoothing=function(t,e){if(!arguments.length)return p<1e8;p=t||1e8,g=Math.min(e,p,0)},u.sleep=function(){null!=o&&(d&&P?P(o):clearTimeout(o),r=f,o=null,u===a&&(l=!1))},u.wake=function(t){null!==o?u.sleep():t?c+=-I+(I=A()):u.frame>10&&(I=A()-p+5),r=0===n?f:d&&E?E:function(t){return setTimeout(t,1e3*(h-u.time)+1|0)},u===a&&(l=!0),m(2)},u.fps=function(t){if(!arguments.length)return n;s=1/((n=t)||60),h=this.time+s,u.wake()},u.useRAF=function(t){if(!arguments.length)return d;u.sleep(),d=t,u.fps(n)},u.fps(t),setTimeout((function(){"auto"===d&&u.frame<5&&"hidden"!==(i||{}).visibilityState&&u.useRAF(!1)}),1500)})),(s=d.Ticker.prototype=new d.events.EventDispatcher).constructor=d.Ticker;var O=y("core.Animation",(function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!!e.immediateRender,this.data=e.data,this._reversed=!!e.reversed,K){l||a.wake();var i=this.vars.useFrames?q:K;i.add(this,i._time),this.vars.paused&&this.paused(!0)}}));a=O.ticker=new d.Ticker,(s=O.prototype)._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var C=function(){l&&A()-I>2e3&&("hidden"!==(i||{}).visibilityState||!a.lagSmoothing())&&a.wake();var t=setTimeout(C,2e3);t.unref&&t.unref()};C(),s.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},s.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},s.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},s.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},s.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},s.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},s.render=function(t,e,i){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},s.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<i+this.totalDuration()/this._timeScale-1e-8},s._enabled=function(t,e){return l||a.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(t,e){return this._enabled(!1,!1)},s.kill=function(t,e){return this._kill(t,e),this},s._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},s._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},s._callback=function(t){var e=this.vars,i=e[t],n=e[t+"Params"],r=e[t+"Scope"]||e.callbackScope||this;switch(n?n.length:0){case 0:i.call(r);break;case 1:i.call(r,n[0]);break;case 2:i.call(r,n[0],n[1]);break;default:i.apply(r,n)}},s.eventCallback=function(t,e,i,n){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=g(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=n),"onUpdate"===t&&(this._onUpdate=e)}return this},s.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},s.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},s.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},s.totalTime=function(t,e,i){if(l||a.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var n=this._totalDuration,r=this._timeline;if(t>n&&!i&&(t=n),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?n-t:t)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(L.length&&Z(),this.render(t,e,!1),L.length&&Z())}return this},s.progress=s.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},s.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},s.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,i;for(t=t||1e-8,this._timeline&&this._timeline.smoothChildTiming&&(i=(e=this._pauseTime)||0===e?e:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/t),this._timeScale=t,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},s.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(t){if(!arguments.length)return this._paused;var e,i,n=this._timeline;return t!=this._paused&&n&&(l||t||a.wake(),i=(e=n.rawTime())-this._pauseTime,!t&&n.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=n.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var M=y("core.SimpleTimeline",(function(t){O.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0}));(s=M.prototype=new O).constructor=M,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(t,e,i,n){var r,o;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=this.rawTime()-(t._timeline.rawTime()-t._pauseTime)),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),r=this._last,this._sortChildren)for(o=t._startTime;r&&r._startTime>o;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=r,this._recent=t,this._timeline&&this._uncache(!0),this},s._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(t,e,i){var n,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)n=r._next,(r._active||t>=r._startTime&&!r._paused&&!r._gc)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=n},s.rawTime=function(){return l||a.wake(),this._totalTime};var R=y("TweenLite",(function(e,i,n){if(O.call(this,i,n),this.render=R.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:R.selector(e)||e;var r,o,s,a=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?z[R.defaultOverwrite]:"number"==typeof l?l>>0:z[l],(a||e instanceof Array||e.push&&g(e))&&"number"!=typeof e[0])for(this._targets=s=p(e),this._propLookup=[],this._siblings=[],r=0;r<s.length;r++)(o=s[r])?"string"!=typeof o?o.length&&o!==t&&o[0]&&(o[0]===t||o[0].nodeType&&o[0].style&&!o.nodeType)?(s.splice(r--,1),this._targets=s=s.concat(p(o))):(this._siblings[r]=Q(o,this,!1),1===l&&this._siblings[r].length>1&&tt(o,this,null,1,this._siblings[r])):"string"==typeof(o=s[r--]=R.selector(o))&&s.splice(r+1,1):s.splice(r--,1);else this._propLookup={},this._siblings=Q(e,this,!1),1===l&&this._siblings.length>1&&tt(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-8,this.render(Math.min(0,-this._delay)))}),!0),k=function(e){return e&&e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)};(s=R.prototype=new O).constructor=R,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,R.version="2.1.2",R.defaultEase=s._ease=new x(null,null,1,1),R.defaultOverwrite="auto",R.ticker=a,R.autoSleep=120,R.lagSmoothing=function(t,e){a.lagSmoothing(t,e)},R.selector=t.$||t.jQuery||function(e){var n=t.$||t.jQuery;return n?(R.selector=n,n(e)):(i||(i=t.document),i?i.querySelectorAll?i.querySelectorAll(e):i.getElementById("#"===e.charAt(0)?e.substr(1):e):e)};var L=[],D={},N=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,F=/[\+-]=-?[\.\d]/,B=function(t){for(var e,i=this._firstPT;i;)e=i.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m.call(this._tween,e,this._target||i.t,this._tween):e<1e-6&&e>-1e-6&&!i.blob&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},U=function(t){return(1e3*t|0)/1e3+""},j=function(t,e,i,n){var r,o,s,a,l,h,u,c=[],d=0,p="",f=0;for(c.start=t,c.end=e,t=c[0]=t+"",e=c[1]=e+"",i&&(i(c),t=c[0],e=c[1]),c.length=0,r=t.match(N)||[],o=e.match(N)||[],n&&(n._next=null,n.blob=1,c._firstPT=c._applyPT=n),l=o.length,a=0;a<l;a++)u=o[a],p+=(h=e.substr(d,e.indexOf(u,d)-d))||!a?h:",",d+=h.length,f?f=(f+1)%5:"rgba("===h.substr(-5)&&(f=1),u===r[a]||r.length<=a?p+=u:(p&&(c.push(p),p=""),s=parseFloat(r[a]),c.push(s),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:s,c:("="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*parseFloat(u.substr(2)):parseFloat(u)-s)||0,f:0,m:f&&f<4?Math.round:U}),d+=u.length;return(p+=e.substr(d))&&c.push(p),c.setRatio=B,F.test(e)&&(c.end=null),c},V=function(t,e,i,n,r,o,s,a,l){"function"==typeof n&&(n=n(l||0,t));var h=typeof t[e],u="function"!==h?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),c="get"!==i?i:u?s?t[u](s):t[u]():t[e],d="string"==typeof n&&"="===n.charAt(1),p={t:t,p:e,s:c,f:"function"===h,pg:0,n:r||e,m:o?"function"==typeof o?o:Math.round:0,pr:0,c:d?parseInt(n.charAt(0)+"1",10)*parseFloat(n.substr(2)):parseFloat(n)-c||0};if(("number"!=typeof c||"number"!=typeof n&&!d)&&(s||isNaN(c)||!d&&isNaN(n)||"boolean"==typeof c||"boolean"==typeof n?(p.fp=s,p={t:j(c,d?parseFloat(p.s)+p.c+(p.s+"").replace(/[0-9\-\.]/g,""):n,a||R.defaultStringFilter,p),p:"setRatio",s:0,c:1,f:2,pg:0,n:r||e,pr:0,m:0}):(p.s=parseFloat(c),d||(p.c=parseFloat(n)-p.s||0))),p.c)return(p._next=this._firstPT)&&(p._next._prev=p),this._firstPT=p,p},X=R._internals={isArray:g,isSelector:k,lazyTweens:L,blobDif:j},H=R._plugins={},G=X.tweenLookup={},W=0,Y=X.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},z={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},q=O._rootFramesTimeline=new M,K=O._rootTimeline=new M,J=30,Z=X.lazyRender=function(){var t,e,i=L.length;for(D={},t=0;t<i;t++)(e=L[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);L.length=0};K._startTime=a.time,q._startTime=a.frame,K._active=q._active=!0,setTimeout(Z,1),O._updateRoot=R.render=function(){var t,e,i;if(L.length&&Z(),K.render((a.time-K._startTime)*K._timeScale,!1,!1),q.render((a.frame-q._startTime)*q._timeScale,!1,!1),L.length&&Z(),a.frame>=J){for(i in J=a.frame+(parseInt(R.autoSleep,10)||120),G){for(t=(e=G[i].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete G[i]}if((!(i=K._first)||i._paused)&&R.autoSleep&&!q._first&&1===a._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||a.sleep()}}},a.addEventListener("tick",O._updateRoot);var Q=function(t,e,i){var n,r,o=t._gsTweenID;if(G[o||(t._gsTweenID=o="t"+W++)]||(G[o]={target:t,tweens:[]}),e&&((n=G[o].tweens)[r=n.length]=e,i))for(;--r>-1;)n[r]===e&&n.splice(r,1);return G[o].tweens},$=function(t,e,i,n){var r,o,s=t.vars.onOverwrite;return s&&(r=s(t,e,i,n)),(s=R.onOverwrite)&&(o=s(t,e,i,n)),!1!==r&&!1!==o},tt=function(t,e,i,n,r){var o,s,a,l;if(1===n||n>=4){for(l=r.length,o=0;o<l;o++)if((a=r[o])!==e)a._gc||a._kill(null,t,e)&&(s=!0);else if(5===n)break;return s}var h,u=e._startTime+1e-8,c=[],d=0,p=0===e._duration;for(o=r.length;--o>-1;)(a=r[o])===e||a._gc||a._paused||(a._timeline!==e._timeline?(h=h||et(e,0,p),0===et(a,h,p)&&(c[d++]=a)):a._startTime<=u&&a._startTime+a.totalDuration()/a._timeScale>u&&((p||!a._initted)&&u-a._startTime<=2e-8||(c[d++]=a)));for(o=d;--o>-1;)if(l=(a=c[o])._firstPT,2===n&&a._kill(i,t,e)&&(s=!0),2!==n||!a._firstPT&&a._initted&&l){if(2!==n&&!$(a,e))continue;a._enabled(!1,!1)&&(s=!0)}return s},et=function(t,e,i){for(var n=t._timeline,r=n._timeScale,o=t._startTime;n._timeline;){if(o+=n._startTime,r*=n._timeScale,n._paused)return-100;n=n._timeline}return(o/=r)>e?o-e:i&&o===e||!t._initted&&o-e<2e-8?1e-8:(o+=t.totalDuration()/t._timeScale/r)>e+1e-8?0:o-e-1e-8};s._init=function(){var t,e,i,n,r,o,s=this.vars,a=this._overwrittenProps,l=this._duration,h=!!s.immediateRender,u=s.ease,c=this._startAt;if(s.startAt){for(n in c&&(c.render(-1,!0),c.kill()),r={},s.startAt)r[n]=s.startAt[n];if(r.data="isStart",r.overwrite=!1,r.immediateRender=!0,r.lazy=h&&!1!==s.lazy,r.startAt=r.delay=null,r.onUpdate=s.onUpdate,r.onUpdateParams=s.onUpdateParams,r.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=R.to(this.target||{},0,r),h)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(s.runBackwards&&0!==l)if(c)c.render(-1,!0),c.kill(),this._startAt=null;else{for(n in 0!==this._time&&(h=!1),i={},s)Y[n]&&"autoCSS"!==n||(i[n]=s[n]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&!1!==s.lazy,i.immediateRender=h,this._startAt=R.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=u=u?u instanceof x?u:"function"==typeof u?new x(u,s.easeParams):w[u]||R.defaultEase:R.defaultEase,s.easeParams instanceof Array&&u.config&&(this._ease=u.config.apply(u,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(o=this._targets.length,t=0;t<o;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(e&&R._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},s._initProps=function(e,i,n,r,o){var s,a,l,h,u,c;if(null==e)return!1;for(s in D[e._gsTweenID]&&Z(),this.vars.css||e.style&&e!==t&&e.nodeType&&H.css&&!1!==this.vars.autoCSS&&function(t,e){var i,n={};for(i in t)Y[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!H[i]||H[i]&&H[i]._autoCSS)||(n[i]=t[i],delete t[i]);t.css=n}(this.vars,e),this.vars)if(c=this.vars[s],Y[s])c&&(c instanceof Array||c.push&&g(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[s]=c=this._swapSelfInParams(c,this));else if(H[s]&&(h=new H[s])._onInitTween(e,this.vars[s],this,o)){for(this._firstPT=u={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:h._priority,m:0},a=h._overwriteProps.length;--a>-1;)i[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(l=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0),u._next&&(u._next._prev=u)}else i[s]=V.call(this,e,s,"get",c,s,0,null,this.vars.stringFilter,o);return r&&this._kill(r,e)?this._initProps(e,i,n,r,o):this._overwrite>1&&this._firstPT&&n.length>1&&tt(e,this,i,this._overwrite,n)?(this._kill(i,e),this._initProps(e,i,n,r,o)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(D[e._gsTweenID]=!0),l)},s.render=function(t,e,i){var n,r,o,s,a=this._time,l=this._duration,h=this._rawPrevTime;if(t>=l-1e-8&&t>=0)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(n=!0,r="onComplete",i=i||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(h<0||t<=0&&t>=-1e-8||1e-8===h&&"isPause"!==this.data)&&h!==t&&(i=!0,h>1e-8&&(r="onReverseComplete")),this._rawPrevTime=s=!e||t||h===t?t:1e-8);else if(t<1e-8)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===l&&h>0)&&(r="onReverseComplete",n=this._reversed),t>-1e-8?t=0:t<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(h>=0&&(1e-8!==h||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=s=!e||t||h===t?t:1e-8)),(!this._initted||this._startAt&&this._startAt.progress())&&(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/l,c=this._easeType,d=this._easePower;(1===c||3===c&&u>=.5)&&(u=1-u),3===c&&(u*=2),1===d?u*=u:2===d?u*=u*u:3===d?u*=u*u*u:4===d&&(u*=u*u*u*u),this.ratio=1===c?1-u:2===c?u:t/l<.5?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=h,L.push(this),void(this._lazy=[t,e]);this._time&&!n?this.ratio=this._ease.getRatio(this._time/l):n&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,!0,i):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==l||e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&-1e-4!==t&&this._startAt.render(t,!0,i),e||(this._time!==a||n||i)&&this._callback("onUpdate")),r&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,!0,i),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this._callback(r),0===l&&1e-8===this._rawPrevTime&&1e-8!==s&&(this._rawPrevTime=0)))}},s._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:R.selector(e)||e;var n,r,o,s,a,l,h,u,c,d=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline,p=this._firstPT;if((g(e)||k(e))&&"number"!=typeof e[0])for(n=e.length;--n>-1;)this._kill(t,e[n],i)&&(l=!0);else{if(this._targets){for(n=this._targets.length;--n>-1;)if(e===this._targets[n]){a=this._propLookup[n]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[n]=t?this._overwrittenProps[n]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,r=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(h=t||a,u=t!==r&&"all"!==r&&t!==a&&("object"!=typeof t||!t._tempKill),i&&(R.onOverwrite||this.vars.onOverwrite)){for(o in h)a[o]&&(c||(c=[]),c.push(o));if((c||!t)&&!$(this,i,e,c))return!1}for(o in h)(s=a[o])&&(d&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,l=!0),s.pg&&s.t._kill(h)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete a[o]),u&&(r[o]=1);!this._firstPT&&this._initted&&p&&this._enabled(!1,!1)}}return l},s.invalidate=function(){this._notifyPluginsOfEnabled&&R._onPluginEvent("_onDisable",this);var t=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],O.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-8,this.render(t,!1,!1!==this.vars.lazy)),this},s._enabled=function(t,e){if(l||a.wake(),t&&this._gc){var i,n=this._targets;if(n)for(i=n.length;--i>-1;)this._siblings[i]=Q(n[i],this,!0);else this._siblings=Q(this.target,this,!0)}return O.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&R._onPluginEvent(t?"_onEnable":"_onDisable",this)},R.to=function(t,e,i){return new R(t,e,i)},R.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new R(t,e,i)},R.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new R(t,e,n)},R.delayedCall=function(t,e,i,n,r){return new R(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},R.set=function(t,e){return new R(t,0,e)},R.getTweensOf=function(t,e){if(null==t)return[];var i,n,r,o;if(t="string"!=typeof t?t:R.selector(t)||t,(g(t)||k(t))&&"number"!=typeof t[0]){for(i=t.length,n=[];--i>-1;)n=n.concat(R.getTweensOf(t[i],e));for(i=n.length;--i>-1;)for(o=n[i],r=i;--r>-1;)o===n[r]&&n.splice(i,1)}else if(t._gsTweenID)for(i=(n=Q(t).concat()).length;--i>-1;)(n[i]._gc||e&&!n[i].isActive())&&n.splice(i,1);return n||[]},R.killTweensOf=R.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var n=R.getTweensOf(t,e),r=n.length;--r>-1;)n[r]._kill(i,t)};var it=y("plugins.TweenPlugin",(function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=it.prototype}),!0);if(s=it.prototype,it.version="1.19.0",it.API=2,s._firstPT=null,s._addTween=V,s.setRatio=B,s._kill=function(t){var e,i=this._overwriteProps,n=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;n;)null!=t[n.n]&&(n._next&&(n._next._prev=n._prev),n._prev?(n._prev._next=n._next,n._prev=null):this._firstPT===n&&(this._firstPT=n._next)),n=n._next;return!1},s._mod=s._roundProps=function(t){for(var e,i=this._firstPT;i;)(e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},R._onPluginEvent=function(t,e){var i,n,r,o,s,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(s=a._next,n=r;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:o)?a._prev._next=a:r=a,(a._next=n)?n._prev=a:o=a,a=s}a=e._firstPT=r}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},it.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===it.API&&(H[(new t[e])._propName]=t[e]);return!0},v.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,n=t.priority||0,r=t.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=y("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",(function(){it.call(this,i,n),this._overwriteProps=r||[]}),!0===t.global),a=s.prototype=new it(i);for(e in a.constructor=s,s.API=t.API,o)"function"==typeof t[e]&&(a[o[e]]=t[e]);return s.version=t.version,it.activate([s]),s},r=t._gsQueue){for(o=0;o<r.length;o++)r[o]();for(s in m)m[s].func||t.console.log("GSAP encountered missing dependency: "+s)}return l=!1,R}(r),s=r.GreenSockGlobals,a=s.com.greensock,l=a.core.SimpleTimeline,h=a.core.Animation,u=s.Ease,c=s.Linear,d=c,p=s.Power1,f=s.Power2,g=s.Power3,m=s.Power4,_=s.TweenPlugin,v=a.events.EventDispatcher}.call(this,i(352)(t),i(36))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(43);function r(t,e){var i;if(void 0===e||0===e.length){if(!1===PIXI.loader.resources.hasOwnProperty(t))throw new Error('Asset "'+t+'" not loaded into Pixi cache');i=PIXI.loader.resources[t].texture}else if(e instanceof Array){for(var n=e.length,r=0;r<n;r++){var o=e[r];if(!PIXI.loader.resources.hasOwnProperty(o))throw new Error('Spritesheet "'+o+'" not loaded into Pixi cache');if(void 0===(s=PIXI.loader.resources[o].textures))throw new Error('Spritesheet "'+o+'" loaded but textures arent!');if(void 0!==(i=s[t]))break}if(void 0===i)throw new Error('Asset "'+t+'" not found inside spritesheets "'+e.toString()+"'")}else{if(!1===PIXI.loader.resources.hasOwnProperty(e))throw new Error('Spritesheet "'+e+'" not loaded into Pixi cache');var s;if(void 0===(s=PIXI.loader.resources[e].textures))throw new Error('Spritesheet "'+e+'" loaded but textures arent?!');if(!1===s.hasOwnProperty(t))throw new Error('Asset "'+t+'" not found inside spritesheet "'+e+"'");i=s[t]}return i}e.cloneHitArea=function(t){return t instanceof PIXI.Rectangle||t instanceof PIXI.Circle||t instanceof PIXI.Ellipse||t instanceof PIXI.Polygon||t instanceof PIXI.RoundedRectangle?t.clone():void console.log("PixiUtils.cloneHitArea: Clone failed. Can only clone PIXI geometry primitives")},e.setParent=function(t,e){t.parent.worldTransform.apply(t.position,t.position),e.worldTransform.applyInverse(t.position,t.position),t.parent.removeChild(t),e.addChild(t)},e.setAnchor=function(t,e){n.addToPoint(t.position,new PIXI.Point((e.x-t.anchor.x)*t.width,(e.y-t.anchor.y)*t.height)),t.anchor.copy(e)},e.objectDiagonal=function(t){return Math.sqrt(t.width*t.width+t.height*t.height)},e.sendToFront=function(t){var e=t.parent;e.removeChild(t),e.addChild(t)},e.sendToBack=function(t){var e=t.parent;e.removeChild(t),e.addChildAt(t,0)},e.offsetShape=function(t,e){if(t instanceof PIXI.Polygon){for(var i=0;i<t.points.length;i+=2)t.points[i]+=e.x,t.points[i+1]+=e.y;return t}return t.x+=e.x,t.y+=e.y,t},e.offsetSimpleShape=function(t,e){return t.x+=e.x,t.y+=e.y,t},e.makeSprite=function(t,e){var i;return(i=new PIXI.Sprite(r(t,e))).anchor.set(.5),i},e.getTexture=r,e.makeText=function(t,e,i,n){void 0===n&&(n=0);var r=new PIXI.extras.BitmapText(t,{font:i+"px "+e,align:"center",tint:n});return r.anchor=.5,r},function(t){t[t.Body=0]="Body",t[t.Eyes=1]="Eyes",t[t.Mouth=2]="Mouth",t[t.NumElements=3]="NumElements"}(e.SpineTrack||(e.SpineTrack={})),e.makeSpine=function(t){var e;return(e=new PIXI.spine.Spine(PIXI.loader.resources[t].spineData)).skeleton.setToSetupPose(),e.update(0),e.autoUpdate=!1,e},e.getGlobalBounds=function(t,e){for(var i=e||t.getLocalBounds(),n=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MIN_VALUE,a=new PIXI.Point,l=new PIXI.Point,h=0;h<2;h++)for(var u=0;u<2;u++)a.x=i.x+h*i.width,a.y=i.y+u*i.height,t.toGlobal(a,l,h>0),n=Math.min(n,l.x),r=Math.min(r,l.y),o=Math.max(o,l.x),s=Math.max(s,l.y);return i.x=n,i.y=r,i.width=o-n,i.height=s-r,i}},function(t,e,i){"use strict";i.r(e),i.d(e,"TimelineLite",(function(){return r})),i.d(e,"default",(function(){return r}));var n=i(1);
/*!
 * VERSION: 2.1.2
 * DATE: 2019-03-01
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */n._gsScope._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],(function(){var t=function(t){n.SimpleTimeline.call(this,t);var e,i,r=this.vars;for(i in this._labels={},this.autoRemoveChildren=!!r.autoRemoveChildren,this.smoothChildTiming=!!r.smoothChildTiming,this._sortChildren=!0,this._onUpdate=r.onUpdate,r)e=r[i],o(e)&&-1!==e.join("").indexOf("{self}")&&(r[i]=this._swapSelfInParams(e));o(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},e=n.default._internals,i=t._internals={},r=e.isSelector,o=e.isArray,s=e.lazyTweens,a=e.lazyRender,l=n._gsScope._gsDefine.globals,h=function(t){var e,i={};for(e in t)i[e]=t[e];return i},u=function(t,e,i){var n,r,o=t.cycle;for(n in o)r=o[n],t[n]="function"==typeof r?r(i,e[i],e):r[i%r.length];delete t.cycle},c=i.pauseCallback=function(){},d=function(t,e,i,n){var r="immediateRender";return r in e||(e[r]=!(i&&!1===i[r]||n)),e},p=function(t){if("function"==typeof t)return t;var e="object"==typeof t?t:{each:t},i=e.ease,n=e.from||0,r=e.base||0,o={},s=isNaN(n),a=e.axis,l={center:.5,end:1}[n]||0;return function(t,h,u){var c,d,p,f,g,m,_,v,y,b=(u||e).length,x=o[b];if(!x){if(!(y="auto"===e.grid?0:(e.grid||[1/0])[0])){for(_=-1/0;_<(_=u[y++].getBoundingClientRect().left)&&y<b;);y--}for(x=o[b]=[],c=s?Math.min(y,b)*l-.5:n%y,d=s?b*l/y-.5:n/y|0,_=0,v=1/0,m=0;m<b;m++)p=m%y-c,f=d-(m/y|0),x[m]=g=a?Math.abs("y"===a?f:p):Math.sqrt(p*p+f*f),g>_&&(_=g),g<v&&(v=g);x.max=_-v,x.min=v,x.v=b=e.amount||e.each*(y>b?b:a?"y"===a?b/y:y:Math.max(y,b/y))||0,x.b=b<0?r-b:r}return b=(x[t]-x.min)/x.max,x.b+(i?i.getRatio(b):b)*x.v}},f=t.prototype=new n.SimpleTimeline;return t.version="2.1.2",t.distribute=p,f.constructor=t,f.kill()._gc=f._forcingPlayhead=f._hasPause=!1,f.to=function(t,e,i,r){var o=i.repeat&&l.TweenMax||n.default;return e?this.add(new o(t,e,i),r):this.set(t,i,r)},f.from=function(t,e,i,r){return this.add((i.repeat&&l.TweenMax||n.default).from(t,e,d(0,i)),r)},f.fromTo=function(t,e,i,r,o){var s=r.repeat&&l.TweenMax||n.default;return r=d(0,r,i),e?this.add(s.fromTo(t,e,i,r),o):this.set(t,r,o)},f.staggerTo=function(e,i,o,s,a,l,c,d){var f,g,m=new t({onComplete:l,onCompleteParams:c,callbackScope:d,smoothChildTiming:this.smoothChildTiming}),_=p(o.stagger||s),v=o.startAt,y=o.cycle;for("string"==typeof e&&(e=n.default.selector(e)||e),r(e=e||[])&&(e=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i}(e)),g=0;g<e.length;g++)f=h(o),v&&(f.startAt=h(v),v.cycle&&u(f.startAt,e,g)),y&&(u(f,e,g),null!=f.duration&&(i=f.duration,delete f.duration)),m.to(e[g],i,f,_(g,e[g],e));return this.add(m,a)},f.staggerFrom=function(t,e,i,n,r,o,s,a){return i.runBackwards=!0,this.staggerTo(t,e,d(0,i),n,r,o,s,a)},f.staggerFromTo=function(t,e,i,n,r,o,s,a,l){return n.startAt=i,this.staggerTo(t,e,d(0,n,i),r,o,s,a,l)},f.call=function(t,e,i,r){return this.add(n.default.delayedCall(0,t,e,i),r)},f.set=function(t,e,i){return this.add(new n.default(t,0,d(0,e,null,!0)),i)},t.exportRoot=function(e,i){null==(e=e||{}).smoothChildTiming&&(e.smoothChildTiming=!0);var r,o,s,a,l=new t(e),h=l._timeline;for(null==i&&(i=!0),h._remove(l,!0),l._startTime=0,l._rawPrevTime=l._time=l._totalTime=h._time,s=h._first;s;)a=s._next,i&&s instanceof n.default&&s.target===s.vars.onComplete||((o=s._startTime-s._delay)<0&&(r=1),l.add(s,o)),s=a;return h.add(l,0),r&&l.totalDuration(),l},f.add=function(e,i,r,s){var a,l,h,u,c,d;if("number"!=typeof i&&(i=this._parseTimeOrLabel(i,0,!0,e)),!(e instanceof n.Animation)){if(e instanceof Array||e&&e.push&&o(e)){for(r=r||"normal",s=s||0,a=i,l=e.length,h=0;h<l;h++)o(u=e[h])&&(u=new t({tweens:u})),this.add(u,a),"string"!=typeof u&&"function"!=typeof u&&("sequence"===r?a=u._startTime+u.totalDuration()/u._timeScale:"start"===r&&(u._startTime-=u.delay())),a+=s;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,i);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=n.default.delayedCall(0,e)}if(n.SimpleTimeline.prototype.add.call(this,e,i),(e._time||!e._duration&&e._initted)&&(a=(this.rawTime()-e._startTime)*e._timeScale,(!e._duration||Math.abs(Math.max(0,Math.min(e.totalDuration(),a)))-e._totalTime>1e-5)&&e.render(a,!1,!1)),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(d=(c=this).rawTime()>e._startTime;c._timeline;)d&&c._timeline.smoothChildTiming?c.totalTime(c._totalTime,!0):c._gc&&c._enabled(!0,!1),c=c._timeline;return this},f.remove=function(t){if(t instanceof n.Animation){this._remove(t,!1);var e=t._timeline=t.vars.useFrames?n.Animation._rootFramesTimeline:n.Animation._rootTimeline;return t._startTime=(t._paused?t._pauseTime:e._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&o(t)){for(var i=t.length;--i>-1;)this.remove(t[i]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},f._remove=function(t,e){return n.SimpleTimeline.prototype._remove.call(this,t,e),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},f.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},f.insert=f.insertMultiple=function(t,e,i,n){return this.add(t,e||0,i,n)},f.appendMultiple=function(t,e,i,n){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,n)},f.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},f.addPause=function(t,e,i,r){var o=n.default.delayedCall(0,c,i,r||this);return o.vars.onComplete=o.vars.onReverseComplete=e,o.data="isPause",this._hasPause=!0,this.add(o,t)},f.removeLabel=function(t){return delete this._labels[t],this},f.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},f._parseTimeOrLabel=function(t,e,i,r){var s,a;if(r instanceof n.Animation&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&o(r)))for(a=r.length;--a>-1;)r[a]instanceof n.Animation&&r[a].timeline===this&&this.remove(r[a]);if(s="number"!=typeof t||e?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"==typeof e)return this._parseTimeOrLabel(e,i&&"number"==typeof t&&null==this._labels[e]?t-s:0,i);if(e=e||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=s);else{if(-1===(a=t.indexOf("=")))return null==this._labels[t]?i?this._labels[t]=s+e:e:this._labels[t]+e;e=parseInt(t.charAt(a-1)+"1",10)*Number(t.substr(a+1)),t=a>1?this._parseTimeOrLabel(t.substr(0,a-1),0,i):s}return Number(t)+e},f.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},f.stop=function(){return this.paused(!0)},f.gotoAndPlay=function(t,e){return this.play(t,e)},f.gotoAndStop=function(t,e){return this.pause(t,e)},f.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var n,r,o,l,h,u,c,d,p=this._time,f=this._dirty?this.totalDuration():this._totalDuration,g=this._startTime,m=this._timeScale,_=this._paused;if(p!==this._time&&(t+=this._time-p),t>=f-1e-8&&t>=0)this._totalTime=this._time=f,this._reversed||this._hasPausedChild()||(r=!0,l="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-8||this._rawPrevTime<0||1e-8===this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>1e-8&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-8,t=f+1e-4;else if(t<1e-8)if(this._totalTime=this._time=0,t>-1e-8&&(t=0),(0!==p||0===this._duration&&1e-8!==this._rawPrevTime&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(l="onReverseComplete",r=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=r=!0,l="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-8,0===t&&r)for(n=this._first;n&&0===n._startTime;)n._duration||(r=!1),n=n._next;t=0,this._initted||(h=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=p)for(n=this._first;n&&n._startTime<=t&&!u;)n._duration||"isPause"!==n.data||n.ratio||0===n._startTime&&0===this._rawPrevTime||(u=n),n=n._next;else for(n=this._last;n&&n._startTime>=t&&!u;)n._duration||"isPause"===n.data&&n._rawPrevTime>0&&(u=n),n=n._prev;u&&(this._time=this._totalTime=t=u._startTime,d=this._startTime+t/this._timeScale)}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==p&&this._first||i||h||u){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&t>0&&(this._active=!0),0===p&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),(c=this._time)>=p)for(n=this._first;n&&(o=n._next,c===this._time&&(!this._paused||_));)(n._active||n._startTime<=c&&!n._paused&&!n._gc)&&(u===n&&(this.pause(),this._pauseTime=d),n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=o;else for(n=this._last;n&&(o=n._prev,c===this._time&&(!this._paused||_));){if(n._active||n._startTime<=p&&!n._paused&&!n._gc){if(u===n){for(u=n._prev;u&&u.endTime()>this._time;)u.render(u._reversed?u.totalDuration()-(t-u._startTime)*u._timeScale:(t-u._startTime)*u._timeScale,e,i),u=u._prev;u=null,this.pause(),this._pauseTime=d}n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)}n=o}this._onUpdate&&(e||(s.length&&a(),this._callback("onUpdate"))),l&&(this._gc||g!==this._startTime&&m===this._timeScale||(0===this._time||f>=this.totalDuration())&&(r&&(s.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))}},f._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof t&&e._hasPausedChild())return!0;e=e._next}return!1},f.getChildren=function(t,e,i,r){r=r||-9999999999;for(var o=[],s=this._first,a=0;s;)s._startTime<r||(s instanceof n.default?!1!==e&&(o[a++]=s):(!1!==i&&(o[a++]=s),!1!==t&&(a=(o=o.concat(s.getChildren(!0,e,i))).length))),s=s._next;return o},f.getTweensOf=function(t,e){var i,r,o=this._gc,s=[],a=0;for(o&&this._enabled(!0,!0),r=(i=n.default.getTweensOf(t)).length;--r>-1;)(i[r].timeline===this||e&&this._contains(i[r]))&&(s[a++]=i[r]);return o&&this._enabled(!1,!0),s},f.recent=function(){return this._recent},f._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},f.shiftChildren=function(t,e,i){i=i||0;for(var n,r=this._first,o=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(n in o)o[n]>=i&&(o[n]+=t);return this._uncache(!0)},f._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),n=i.length,r=!1;--n>-1;)i[n]._kill(t,e)&&(r=!0);return r},f.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},f.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return n.Animation.prototype.invalidate.call(this)},f._enabled=function(t,e){if(t===this._gc)for(var i=this._first;i;)i._enabled(t,!0),i=i._next;return n.SimpleTimeline.prototype._enabled.call(this,t,e)},f.totalTime=function(t,e,i){this._forcingPlayhead=!0;var r=n.Animation.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},f.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},f.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,n=0,r=this,o=r._last,s=999999999999;o;)e=o._prev,o._dirty&&o.totalDuration(),o._startTime>s&&r._sortChildren&&!o._paused&&!r._calculatingDuration?(r._calculatingDuration=1,r.add(o,o._startTime-o._delay),r._calculatingDuration=0):s=o._startTime,o._startTime<0&&!o._paused&&(n-=o._startTime,r._timeline.smoothChildTiming&&(r._startTime+=o._startTime/r._timeScale,r._time-=o._startTime,r._totalTime-=o._startTime,r._rawPrevTime-=o._startTime),r.shiftChildren(-o._startTime,!1,-9999999999),s=0),(i=o._startTime+o._totalDuration/o._timeScale)>n&&(n=i),o=e;r._duration=r._totalDuration=n,r._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},f.paused=function(t){if(!1===t&&this._paused)for(var e=this._first;e;)e._startTime===this._time&&"isPause"===e.data&&(e._rawPrevTime=0),e=e._next;return n.Animation.prototype.paused.apply(this,arguments)},f.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===n.Animation._rootFramesTimeline},f.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},t}),!0);var r=n.globals.TimelineLite},function(t,e,i){"use strict";(function(t){e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var n=i(229);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}));var r=i(6);Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}));var o,s=i(290),a=(o=s)&&o.__esModule?o:{default:o},l=_(i(291)),h=_(i(293)),u=_(i(154)),c=_(i(303)),d=_(i(310)),p=_(i(312)),f=_(i(316)),g=_(i(321)),m=_(i(326));function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}r.utils.mixins.performMixins();var v=p.shared||null;e.accessibility=l,e.extract=h,e.extras=u,e.filters=c,e.interaction=d,e.loaders=p,e.mesh=f,e.particles=g,e.prepare=m,e.loader=v,"function"==typeof a.default&&(0,a.default)(e),t.PIXI=e}).call(this,i(36))},function(t,e,i){"use strict";e.__esModule=!0;e.VERSION="4.8.6",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e,i){"use strict";e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var n=i(5);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}));var r=i(15);Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}));var o=i(18);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return z(o).default}});var s=i(84);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return z(s).default}});var a=i(132);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return z(a).default}});var l=i(45);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return z(l).default}});var h=i(134);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return z(h).default}});var u=i(133);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return z(u).default}});var c=i(86);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return z(c).default}});var d=i(88);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return z(d).default}});var p=i(258);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return z(p).default}});var f=i(60);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return z(f).default}});var g=i(261);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return z(g).default}});var m=i(277);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return z(m).default}});var _=i(148);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return z(_).default}});var v=i(149);Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return z(v).default}});var y=i(279);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return z(y).default}});var b=i(150);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return z(b).default}});var x=i(281);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return z(x).default}});var w=i(288);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return z(w).default}});var T=i(289);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return z(T).default}});var S=i(31);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return z(S).default}});var E=i(146);Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return z(E).default}});var P=i(41);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return z(P).default}});var A=i(91);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return z(A).default}});var I=i(141);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return z(I).default}});var O=i(138);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return z(O).default}});var C=i(139);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return z(C).default}});var M=i(142);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return z(M).default}});var R=i(48);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return z(R).default}});var k=i(47);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return z(k).default}});var L=i(61);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return z(L).default}});var D=i(63);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return z(D).default}});var N=i(147);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return z(N).default}});var F=i(144);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return z(F).default}});var B=i(145);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return z(B).default}});var U=i(151);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return z(U).default}});var j=i(152);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return j.autoDetectRenderer}});var V=Y(i(7)),X=Y(i(90)),H=z(i(12)),G=z(i(46)),W=z(i(62));function Y(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function z(t){return t&&t.__esModule?t:{default:t}}e.settings=H.default,e.utils=V,e.ticker=X,e.CanvasRenderer=G.default,e.WebGLRenderer=W.default},function(t,e,i){"use strict";e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.earcut=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=function(){return++f},e.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},e.getResolutionOfUrl=function(t,e){var i=r.default.RETINA_PREFIX.exec(t);if(i)return parseFloat(i[1]);return void 0!==e?e:1},e.decomposeDataUri=function(t){var e=n.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]};return},e.getUrlFileExtension=function(t){var e=n.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase();return},e.getSvgSize=function(t){var e=n.SVG_SIZE.exec(t),i={};e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7])));return i},e.skipHello=function(){g=!0},e.sayHello=function(t){if(g)return;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+n.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+n.VERSION+" - "+t+" - http://www.pixijs.com/");g=!0},e.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(t){return!1}},e.sign=function(t){return 0===t?0:t<0?-1:1},e.destroyTextureCache=function(){var t=void 0;for(t in m)m[t].destroy();for(t in _)_[t].destroy()},e.clearTextureCache=function(){var t=void 0;for(t in m)delete m[t];for(t in _)delete _[t]},e.correctBlendMode=function(t,e){return v[e?1:0][t]},e.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,r=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(r=r*e+.5|0)},e.premultiplyRgba=function(t,e,i,n){i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]);return i[3]=e,i},e.premultiplyTintToRgba=function(t,e,i,n){(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e);return i[3]=e,i};var n=i(5),r=p(i(12)),o=p(i(37)),s=p(i(247)),a=d(i(248)),l=d(i(85)),h=p(i(249)),u=p(i(250)),c=p(i(87));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}var f=0,g=!1;e.isMobile=l,e.removeItems=h.default,e.EventEmitter=o.default,e.pluginTarget=s.default,e.mixins=a,e.earcut=c.default;var m=e.TextureCache=Object.create(null),_=e.BaseTextureCache=Object.create(null);var v=e.premultiplyBlendMode=(0,u.default)()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(361);e.ArrayUtils=n;var r=i(58);e.LogUtils=r;var o=i(59);e.MathUtils=o;var s=i(194);e.NumberUtils=s;var a=i(2);e.PixiUtils=a;var l=i(118);e.PlatformUtils=l;var h=i(43);e.PointUtils=h;var u=i(44);e.Random=u;var c=i(109);e.RectUtils=c;var d=i(362);e.StringUtils=d,function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(74))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LOAD_ASSETS="LoadAssets",e.UNLOAD_ASSETS="UnloadAssets",e.SHOW_LOAD_SCREEN="ShowLoadScreen",e.HIDE_LOAD_SCREEN="HideLoadScreen",e.STATE_TRANSITION_HALTED="StateTransitionHalted",e.STATE_TRANSITION_RESUME_FROM_HALT="StateTransitionResumeFromHalt",e.STATE_LOAD_STATE="StateLoadState",e.LOAD_SCREEN_HIDDEN="LoadScreenHidden",e.SHOW_POPUP="ShowPopup",e.HIDE_POPUP="HidePopup",e.HIDE_ALL_POPUPS="HideAllPopups",e.HIDE_TOPMOST_POPUP="HideTopmostPopup",e.HIDE_POPUP_COMPLETE="HidePopupComplete",e.HIDE_ALL_POPUPS_COMPLETE="HideAllPopupsComplete",e.PLAY_AUDIO="PlayAudio",e.LOAD_AUDIO="LoadAudio",e.LOAD_AUDIO_FROM_ASSET_MAP="LoadAudioFromToken",e.AUDIO_LOAD_ERROR="AudioLoadError",e.PLAY_CAPTION="PlayCaption",e.STOP_CAPTION="StopCaption",e.GAME_PAUSED="GamePaused",e.GAME_UNPAUSED="GameUnpaused",e.VOICEOVER_STARTED="VoiceoverStarted",e.VOICEOVER_ENDED="VoiceoverEnded",e.DRAG_BEGIN="DragBegin",e.DRAG_END="DragEnd",e.DRAGGABLE_SELECTED="DraggableSelected",e.DRAGGABLE_DESELECTED="DraggableDeselected",e.REGISTER_FOCUSABLE="RegisterFocusable",e.REGISTER_FOCUSABLES="RegisterFocusables",e.UNREGISTER_FOCUSABLE="UnregisterFocusable",e.UNREGISTER_FOCUSABLES="UnregisterFocusables",e.UNREGISTER_ALL_FOCUSABLES="UnregisterAllFocusables",e.CLEAR_FOCUS="ClearFocus",e.FORCE_FOCUS="ForceFocus",e.RE_MAP_KEYBOARD="ReMapKeyboard",e.PUSH_KEYBOARD_LAYER="PushKeyboardLayer",e.POP_KEYBOARD_LAYER="PopKeyboardLayer",e.KEYBOARD_FORCE_NEIGHBOURS="KeyboardForceNeighbours",e.KEYBOARD_CLEAR_NEIGHBOURS="KeyboardClearNeighbours",e.SET_KEYBOARD_AUTOMAP="SetKeyboardAutomap",e.SET_KEYBOARD_ENABLED="SetKeyboardEnabled",e.GET_KEYBOARD_STATUS="GetKeyboardStatus",e.KEYBOARD_FOCUS_BEGIN="KeyboardFocusBegin",e.KEYBOARD_FOCUS_END="KeyboardFocusEnd",e.KEYBOARD_REFOCUS="KeyboardRefocus",e.LANDSCAPE_ORIENTATION="LandscapeOrientation",e.PORTRAIT_ORIENTATION="PortraitOrientation"},function(t,e,i){var n=i(13),r=i(343),o=i(344),s=i(22),a=i(14),l=a("iterator"),h=a("toStringTag"),u=o.values;for(var c in r){var d=n[c],p=d&&d.prototype;if(p){if(p[l]!==u)try{s(p,l,u)}catch(t){p[l]=u}if(p[h]||s(p,h,c),r[c])for(var f in o)if(p[f]!==o[f])try{s(p,f,o[f])}catch(t){p[f]=o[f]}}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";e.__esModule=!0;var n=o(i(245)),r=o(i(246));function o(t){return t&&t.__esModule?t:{default:t}}e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,n.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,r.default)(),MESH_CANVAS_PADDING:0}},function(t,e,i){(function(e){var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof e&&e)||Function("return this")()}).call(this,i(36))},function(t,e,i){var n=i(13),r=i(178),o=i(20),s=i(100),a=i(183),l=i(340),h=r("wks"),u=n.Symbol,c=l?u:u&&u.withoutSetter||s;t.exports=function(t){return o(h,t)||(a&&o(u,t)?h[t]=u[t]:h[t]=c("Symbol."+t)),h[t]}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(80);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return d(n).default}});var r=i(121);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return d(r).default}});var o=i(81);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return d(o).default}});var s=i(122);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return d(s).default}});var a=i(235);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return d(a).default}});var l=i(236);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return d(l).default}});var h=i(237);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return d(h).default}});var u=i(82);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return d(u).default}});var c=i(238);function d(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return d(c).default}})},function(t,e,i){"use strict";i.r(e),i.d(e,"TweenMax",(function(){return r})),i.d(e,"TweenMaxBase",(function(){return o})),i.d(e,"default",(function(){return r}));var n=i(1);i.d(e,"TweenLite",(function(){return n.default})),i.d(e,"Ease",(function(){return n.Ease})),i.d(e,"Power0",(function(){return n.Power0})),i.d(e,"Power1",(function(){return n.Power1})),i.d(e,"Power2",(function(){return n.Power2})),i.d(e,"Power3",(function(){return n.Power3})),i.d(e,"Power4",(function(){return n.Power4})),i.d(e,"Linear",(function(){return n.Linear})),
/*!
 * VERSION: 2.1.2
 * DATE: 2019-03-01
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
n._gsScope._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],(function(){var t=function(t){var e,i=[],n=t.length;for(e=0;e!==n;i.push(t[e++]));return i},e=function(t,e,i){var n,r,o=t.cycle;for(n in o)r=o[n],t[n]="function"==typeof r?r(i,e[i],e):r[i%r.length];delete t.cycle},i=function(t){if("function"==typeof t)return t;var e="object"==typeof t?t:{each:t},i=e.ease,n=e.from||0,r=e.base||0,o={},s=isNaN(n),a=e.axis,l={center:.5,end:1}[n]||0;return function(t,h,u){var c,d,p,f,g,m,_,v,y,b=(u||e).length,x=o[b];if(!x){if(!(y="auto"===e.grid?0:(e.grid||[1/0])[0])){for(_=-1/0;_<(_=u[y++].getBoundingClientRect().left)&&y<b;);y--}for(x=o[b]=[],c=s?Math.min(y,b)*l-.5:n%y,d=s?b*l/y-.5:n/y|0,_=0,v=1/0,m=0;m<b;m++)p=m%y-c,f=d-(m/y|0),x[m]=g=a?Math.abs("y"===a?f:p):Math.sqrt(p*p+f*f),g>_&&(_=g),g<v&&(v=g);x.max=_-v,x.min=v,x.v=b=e.amount||e.each*(y>b?b:a?"y"===a?b/y:y:Math.max(y,b/y))||0,x.b=b<0?r-b:r}return b=(x[t]-x.min)/x.max,x.b+(i?i.getRatio(b):b)*x.v}},r=function(t,e,i){n.default.call(this,t,e,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=r.prototype.render},o=n.default._internals,s=o.isSelector,a=o.isArray,l=r.prototype=n.default.to({},.1,{}),h=[];r.version="2.1.2",l.constructor=r,l.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=n.default.killTweensOf,r.getTweensOf=n.default.getTweensOf,r.lagSmoothing=n.default.lagSmoothing,r.ticker=n.default.ticker,r.render=n.default.render,r.distribute=i,l.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),n.default.prototype.invalidate.call(this)},l.updateTo=function(t,e){var i,r=this.ratio,o=this.vars.immediateRender||t.immediateRender;for(i in e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),t)this.vars[i]=t[i];if(this._initted||o)if(e)this._initted=!1,o&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&n.default._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var s=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(s,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||o)for(var a,l=1/(1-r),h=this._firstPT;h;)a=h.s+h.c,h.c*=l,h.s=a-h.c,h=h._next;return this},l.render=function(t,e,i){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var r,s,a,l,h,u,c,d,p,f=this._dirty?this.totalDuration():this._totalDuration,g=this._time,m=this._totalTime,_=this._cycle,v=this._duration,y=this._rawPrevTime;if(t>=f-1e-8&&t>=0?(this._totalTime=f,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=v,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(r=!0,s="onComplete",i=i||this._timeline.autoRemoveChildren),0===v&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(y<0||t<=0&&t>=-1e-8||1e-8===y&&"isPause"!==this.data)&&y!==t&&(i=!0,y>1e-8&&(s="onReverseComplete")),this._rawPrevTime=d=!e||t||y===t?t:1e-8)):t<1e-8?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===v&&y>0)&&(s="onReverseComplete",r=this._reversed),t>-1e-8?t=0:t<0&&(this._active=!1,0===v&&(this._initted||!this.vars.lazy||i)&&(y>=0&&(i=!0),this._rawPrevTime=d=!e||t||y===t?t:1e-8)),this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(l=v+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&m<=t&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=v-this._time,(p=this._yoyoEase||this.vars.yoyoEase)&&(this._yoyoEase||(!0!==p||this._initted?this._yoyoEase=p=!0===p?this._ease:p instanceof n.Ease?p:n.Ease.map[p]:(p=this.vars.ease,this._yoyoEase=p=p?p instanceof n.Ease?p:"function"==typeof p?new n.Ease(p,this.vars.easeParams):n.Ease.map[p]||n.default.defaultEase:n.default.defaultEase)),this.ratio=p?1-p.getRatio((v-this._time)/v):0)),this._time>v?this._time=v:this._time<0&&(this._time=0)),this._easeType&&!p?(h=this._time/v,(1===(u=this._easeType)||3===u&&h>=.5)&&(h=1-h),3===u&&(h*=2),1===(c=this._easePower)?h*=h:2===c?h*=h*h:3===c?h*=h*h*h:4===c&&(h*=h*h*h*h),this.ratio=1===u?1-h:2===u?h:this._time/v<.5?h/2:1-h/2):p||(this.ratio=this._ease.getRatio(this._time/v))),g!==this._time||i||_!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=g,this._totalTime=m,this._rawPrevTime=y,this._cycle=_,o.lazyTweens.push(this),void(this._lazy=[t,e]);!this._time||r||p?r&&this._ease._calcEnd&&!p&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/v)}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==g&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,!0,i):s||(s="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==v||e||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,!0,i),e||(this._totalTime!==m||s)&&this._callback("onUpdate")),this._cycle!==_&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),s&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,!0,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this._callback(s),0===v&&1e-8===this._rawPrevTime&&1e-8!==d&&(this._rawPrevTime=0)))}else m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new r(t,e,i)},r.fromTo=function(t,e,i,n){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,new r(t,e,n)},r.staggerTo=r.allTo=function(o,l,u,c,d,p,f){var g,m,_,v,y=[],b=i(u.stagger||c),x=u.cycle,w=(u.startAt||h).cycle;for(a(o)||("string"==typeof o&&(o=n.default.selector(o)||o),s(o)&&(o=t(o))),g=(o=o||[]).length-1,_=0;_<=g;_++){for(v in m={},u)m[v]=u[v];if(x&&(e(m,o,_),null!=m.duration&&(l=m.duration,delete m.duration)),w){for(v in w=m.startAt={},u.startAt)w[v]=u.startAt[v];e(m.startAt,o,_)}m.delay=b(_,o[_],o)+(m.delay||0),_===g&&d&&(m.onComplete=function(){u.onComplete&&u.onComplete.apply(u.onCompleteScope||this,arguments),d.apply(f||u.callbackScope||this,p||h)}),y[_]=new r(o[_],l,m)}return y},r.staggerFrom=r.allFrom=function(t,e,i,n,o,s,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,r.staggerTo(t,e,i,n,o,s,a)},r.staggerFromTo=r.allFromTo=function(t,e,i,n,o,s,a,l){return n.startAt=i,n.immediateRender=0!=n.immediateRender&&0!=i.immediateRender,r.staggerTo(t,e,n,o,s,a,l)},r.delayedCall=function(t,e,i,n,o){return new r(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:n,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:o,overwrite:0})},r.set=function(t,e){return new r(t,0,e)},r.isTweening=function(t){return n.default.getTweensOf(t,!0).length>0};var u=function(t,e){for(var i=[],r=0,o=t._first;o;)o instanceof n.default?i[r++]=o:(e&&(i[r++]=o),r=(i=i.concat(u(o,e))).length),o=o._next;return i},c=r.getAllTweens=function(t){return u(n.Animation._rootTimeline,t).concat(u(n.Animation._rootFramesTimeline,t))};r.killAll=function(t,e,i,r){null==e&&(e=!0),null==i&&(i=!0);var o,s,a,l=c(0!=r),h=l.length,u=e&&i&&r;for(a=0;a<h;a++)s=l[a],(u||s instanceof n.SimpleTimeline||(o=s.target===s.vars.onComplete)&&i||e&&!o)&&(t?s.totalTime(s._reversed?0:s.totalDuration()):s._enabled(!1,!1))},r.killChildTweensOf=function(e,i){if(null!=e){var l,h,u,c,d,p=o.tweenLookup;if("string"==typeof e&&(e=n.default.selector(e)||e),s(e)&&(e=t(e)),a(e))for(c=e.length;--c>-1;)r.killChildTweensOf(e[c],i);else{for(u in l=[],p)for(h=p[u].target.parentNode;h;)h===e&&(l=l.concat(p[u].tweens)),h=h.parentNode;for(d=l.length,c=0;c<d;c++)i&&l[c].totalTime(l[c].totalDuration()),l[c]._enabled(!1,!1)}}};var d=function(t,e,i,r){e=!1!==e,i=!1!==i;for(var o,s,a=c(r=!1!==r),l=e&&i&&r,h=a.length;--h>-1;)s=a[h],(l||s instanceof n.SimpleTimeline||(o=s.target===s.vars.onComplete)&&i||e&&!o)&&s.paused(t)};return r.pauseAll=function(t,e,i){d(!0,t,e,i)},r.resumeAll=function(t,e,i){d(!1,t,e,i)},r.globalTimeScale=function(t){var e=n.Animation._rootTimeline,i=n.default.ticker.time;return arguments.length?(t=t||1e-8,e._startTime=i-(i-e._startTime)*e._timeScale/t,e=n.Animation._rootFramesTimeline,i=n.default.ticker.frame,e._startTime=i-(i-e._startTime)*e._timeScale/t,e._timeScale=n.Animation._rootTimeline._timeScale=t,t):e._timeScale},l.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},l.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},l.time=function(t,e){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,r=n*(i+this._repeatDelay);return t>i&&(t=i),this.totalTime(this._yoyo&&1&n?i-t+r:this._repeat?t+r:t,e)},l.duration=function(t){return arguments.length?n.Animation.prototype.duration.call(this,t):this._duration},l.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},l.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},l.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},l.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r}),!0);var r=n.globals.TweenMax,o=r},function(t,e,i){var n=i(13),r=i(65).f,o=i(22),s=i(54),a=i(98),l=i(331),h=i(334);t.exports=function(t,e){var i,u,c,d,p,f=t.target,g=t.global,m=t.stat;if(i=g?n:m?n[f]||a(f,{}):(n[f]||{}).prototype)for(u in e){if(d=e[u],c=t.noTargetGet?(p=r(i,u))&&p.value:i[u],!h(g?u:f+(m?".":"#")+u,t.forced)&&void 0!==c){if(typeof d==typeof c)continue;l(d,c)}(t.sham||c&&c.sham)&&o(d,"sham",!0),s(i,u,d,t)}}},function(t,e,i){var n={createContext:i(239),setVertexAttribArrays:i(123),GLBuffer:i(240),GLFramebuffer:i(241),GLShader:i(242),GLTexture:i(124),VertexArrayObject:i(243),shader:i(244)};t.exports&&(t.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},function(t,e,i){var n=i(11);t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.prototype.hasOwnProperty;function r(t){return"function"==typeof t}function o(t){return void 0===t}function s(t){return"[object String]"===Object.prototype.toString.call(t)}e.has=function(t,e){return n.call(t,e)},e.defaultCompare=function(t,e){return t<e?-1:t===e?0:1},e.defaultEquals=function(t,e){return t===e},e.defaultToString=function(t){return null===t?"COLLECTION_NULL":o(t)?"COLLECTION_UNDEFINED":s(t)?"$s"+t:"$o"+t.toString()},e.makeString=function(t,i){if(void 0===i&&(i=","),null===t)return"COLLECTION_NULL";if(o(t))return"COLLECTION_UNDEFINED";if(s(t))return t.toString();var n="{",r=!0;for(var a in t)e.has(t,a)&&(r?r=!1:n+=i,n=n+a+":"+t[a]);return n+"}"},e.isFunction=r,e.isUndefined=o,e.isString=s,e.reverseCompareFunction=function(t){return o(t)||!r(t)?function(t,e){return t<e?1:t===e?0:-1}:function(e,i){return-1*t(e,i)}},e.compareToEquals=function(t){return function(e,i){return 0===t(e,i)}}},function(t,e,i){var n=i(19),r=i(28),o=i(51);t.exports=n?function(t,e,i){return r.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(38),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT="default",e.VO="vo",e.SFX="sfx",e.BGM="bgm"},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0});var r=i(207);e.KeyCode=r,n(i(205)),n(i(119)),n(i(204)),n(i(35)),n(i(375)),n(i(376)),n(i(209)),n(i(115)),n(i(206)),n(i(377)),n(i(120)),n(i(211)),n(i(378))},function(t,e,i){(function(t){function i(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,r=function(t){return n.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}e.resolve=function(){for(var e="",n=!1,r=arguments.length-1;r>=-1&&!n;r--){var s=r>=0?arguments[r]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,n="/"===s.charAt(0))}return(n?"/":"")+(e=i(o(e.split("/"),(function(t){return!!t})),!n).join("/"))||"."},e.normalize=function(t){var n=e.isAbsolute(t),r="/"===s(t,-1);return(t=i(o(t.split("/"),(function(t){return!!t})),!n).join("/"))||n||(t="."),t&&r&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,i){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var r=n(t.split("/")),o=n(i.split("/")),s=Math.min(r.length,o.length),a=s,l=0;l<s;l++)if(r[l]!==o[l]){a=l;break}var h=[];for(l=a;l<r.length;l++)h.push("..");return(h=h.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=r(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},e.basename=function(t,e){var i=r(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return r(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i(264))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){var n=i(19),r=i(174),o=i(29),s=i(66),a=Object.defineProperty;e.f=n?a:function(t,e,i){if(o(t),e=s(e,!0),o(i),r)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(27);t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,i){var n=i(17),r=i(396);n({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=c(i(41)),o=c(i(138)),s=c(i(139)),a=c(i(37)),l=i(15),h=i(7),u=c(i(12));function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(i,n,r,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if(h.noFrame=!1,n||(h.noFrame=!0,n=new l.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),h.baseTexture=i,h._frame=n,h.trim=o,h.valid=!1,h.requiresUpdate=!1,h._uvs=null,h.orig=r||n,h._rotate=Number(s||0),!0===s)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(h.noFrame&&(n=new l.Rectangle(0,0,i.width,i.height),i.on("update",h.onBaseTextureUpdated,h)),h.frame=n):i.once("loaded",h.onBaseTextureLoaded,h),h.defaultAnchor=a?new l.Point(a.x,a.y):new l.Point(0,0),h._updateID=0,h.transform=null,h.textureCacheIds=[],h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new l.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(h.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new s.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,n,o){var s=h.TextureCache[t];return s||(s=new e(r.default.fromImage(t,i,n,o)),e.addToCache(s,t)),s},e.fromFrame=function(t){var e=h.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(r.default.fromCanvas(t,i,n))},e.fromVideo=function(t,i,n,r){return"string"==typeof t?e.fromVideoUrl(t,i,n,r):new e(o.default.fromVideo(t,i,r))},e.fromVideoUrl=function(t,i,n,r){return new e(o.default.fromUrl(t,i,n,r))},e.from=function(t){if("string"==typeof t){var i=h.TextureCache[t];return i||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t))}return t instanceof HTMLImageElement?new e(r.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,u.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof r.default?new e(t):t},e.fromLoader=function(t,i,n){var o=new r.default(t,void 0,(0,h.getResolutionOfUrl)(i)),s=new e(o);return o.imageUrl=i,n||(n=i),r.default.addToCache(s.baseTexture,n),e.addToCache(s,n),n!==i&&(r.default.addToCache(s.baseTexture,i),e.addToCache(s,i)),s},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),h.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),h.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=h.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete h.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)h.TextureCache[t.textureCacheIds[n]]===t&&delete h.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},n(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,r=t.height,o=e+n>this.baseTexture.width,s=i+r>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",l="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,h="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+a+" "+h)}this.valid=n&&r&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(a.default);function p(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}e.default=d,d.EMPTY=new d(new r.default),p(d.EMPTY),p(d.EMPTY.baseTexture),d.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new d(new r.default(t))}(),p(d.WHITE),p(d.WHITE.baseTexture)},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(57);e.arrays=n;var r=i(354);e.Bag=r.default;var o=i(355);e.BSTree=o.default;var s=i(190);e.BSTreeKV=s.default;var a=i(42);e.Dictionary=a.default;var l=i(192);e.Heap=l.default;var h=i(356);e.LinkedDictionary=h.default;var u=i(108);e.LinkedList=u.default;var c=i(357);e.MultiDictionary=c.default;var d=i(193);e.FactoryDictionary=d.default;var p=i(193);e.DefaultDictionary=p.default;var f=i(191);e.Queue=f.default;var g=i(358);e.PriorityQueue=g.default;var m=i(189);e.Set=m.default;var _=i(359);e.Stack=_.default;var v=i(360);e.MultiRootTree=v.default;var y=i(21);e.util=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.assetPath="",this.resolutionSuffix="",this.assetName=t,this.assetType=e}return t.prototype.getResource=function(){var t=PIXI.loader.resources[this.assetName];if(!t)throw new Error("Asset "+this.assetName+" is not loaded.");return t},t.prototype.getLoaderOptions=function(){},t.prototype.isLoaded=function(){return!!PIXI.loader.resources[this.assetName]},t.prototype.destroy=function(){},t}();e.AssetMapData=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.CLICK="click",t.MOUSE_DOWN="mousedown",t.MOUSE_MOVE="mousemove",t.MOUSE_OUT="mouseout",t.MOUSE_OVER="mouseover",t.MOUSE_UP="mouseup",t.MOUSE_UP_OUTSIDE="mouseupoutside",t.POINTER_CANCEL="pointercancel",t.POINTER_DOWN="pointerdown",t.POINTER_MOVE="pointermove",t.POINTER_OUT="pointerout",t.POINTER_OVER="pointerover",t.POINTER_TAP="pointertap",t.POINTER_UP="pointerup",t.POINTER_UP_OUTSIDE="pointerupoutside",t.RIGHT_CLICK="rightclick",t.RIGHT_DOWN="rightdown",t.RIGHT_UP="rightup",t.RIGHT_UP_OUTSIDE="rightupoutside",t.TAP="tap",t.TOUCH_CANCEL="touchcancel",t.TOUCH_END="touchend",t.TOUCH_END_OUTSIDE="touchendoutside",t.TOUCH_MOVE="touchmove",t.TOUCH_START="touchstart",t.FOCUS="focus",t.BLUR="blur",t.KEY_DOWN="keydown",t.KEY_PRESS="keypress",t.KEY_UP="keyup"}(e.Events||(e.Events={})),e.hitAreaFromSprite=function(t){return new PIXI.Rectangle(t.width*-t.anchor.x,t.height*-t.anchor.y,t.width,t.height)}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function o(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)n.call(t,e)&&i.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t,e){var i=r?r+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var o=0,s=n.length,a=new Array(s);o<s;o++)a[o]=n[o].fn;return a},a.prototype.emit=function(t,e,i,n,o,s){var a=r?r+t:t;if(!this._events[a])return!1;var l,h,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,o),!0;case 6:return u.fn.call(u.context,e,i,n,o,s),!0}for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var d,p=u.length;for(h=0;h<p;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),c){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,i);break;case 4:u[h].fn.call(u[h].context,e,i,n);break;default:if(!l)for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];u[h].fn.apply(u[h].context,l)}}return!0},a.prototype.on=function(t,e,i){var n=new s(e,i||this),o=r?r+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},a.prototype.once=function(t,e,i){var n=new s(e,i||this,!0),o=r?r+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},a.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new o:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||i&&a.context!==i||(0==--this._eventsCount?this._events=new o:delete this._events[s]);else{for(var l=0,h=[],u=a.length;l<u;l++)(a[l].fn!==e||n&&!a[l].once||i&&a[l].context!==i)&&h.push(a[l]);h.length?this._events[s]=1===h.length?h[0]:h:0==--this._eventsCount?this._events=new o:delete this._events[s]}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new o:delete this._events[e])):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=r,a.EventEmitter=a,t.exports=a},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(32);t.exports=function(t){return Object(n(t))}},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(4);i(173);var s=i(3),a=i(353),l=i(188),h=i(198),u=i(203),c=i(114),d=i(9),p=i(204),f=i(374),g=i(115),m=i(199),_=i(113),v=i(210),y=i(379),b=i(116),x=i(74),w=i(382),T=i(383),S=i(384),E=function(t){function e(i){var n=t.call(this,new c.AppConfig(i))||this;return x.AssetUtils.resolutionSuffix="@"+n.renderer.resolution+"x",n._size=new o.Point,o.ticker.shared.add(n.update.bind(n)),a.publishSync("placeholder_message",void 0),n._webEventsManager=new S.WebEventsManager,n._mouseManager=new g.MouseManager(n.renderer.plugins.interaction),n._stateManager=new b.StateManager,n._popupManager=new v.PopupManager,n._loadManager=new m.LoadManager(n.createSplashScreen()),n._audioManager=new l.HowlerManager,n._keyboardManager=new f.KeyboardManager,n._resizeManager=new T.ResizeManager(e.SIZE_MIN_DEFAULT,e.SIZE_MAX_DEFAULT),n._copyManager=new u.CopyManager,n._saveManager=new y.SaveManager,n._orientationManager=new w.OrientationManager,n._voiceoverManager=new h.VoiceOverManager,n}return r(e,t),Object.defineProperty(e,"instance",{get:function(){return void 0===e._instance&&console.error("You've tried to access the instance of HLF.Application when it hasn't been set. Please set the _instance in your Application."),e._instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requiredAssets",{get:function(){return new Array},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._stateManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audio",{get:function(){return this._audioManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"voiceover",{get:function(){return this._voiceoverManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitAreaRenderer",{get:function(){return this._hitAreaRenderer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizer",{get:function(){return this._resizeManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copy",{get:function(){return this._copyManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"webEvents",{get:function(){return this._webEventsManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"saveManager",{get:function(){return this._saveManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orientationManager",{get:function(){return this._orientationManager},enumerable:!0,configurable:!0}),e.prototype.init=function(){var t=this;this.stage.addChild(this._stateManager),this.stage.addChild(this._popupManager),this.stage.addChild(this._loadManager),this._hitAreaRenderer=new p.HitAreaRenderer(this.stage),this.stage.addChild(this._hitAreaRenderer),this._audioManager.init(),this.createAssetMap(),this.registerStates(),this.registerPopups(),this.registerLoadingScreens(),this._loadManager.startSplashProcess(this.requiredAssets,this.onLoadRequiredAssetsComplete.bind(this)),this.onResize(0),this.onResize(.5),this._webEventsManager.registerResizeCallback((function(){return t.onResize(.5)}))},e.prototype.update=function(){var t=o.ticker.shared.elapsedMS/1e3;this._stateManager.update(t),this._popupManager.update(t),this._loadManager.update(t),this._hitAreaRenderer.update(t)},e.prototype.createSplashScreen=function(){return new _.SplashScreen},e.prototype.createAssetMap=function(){},e.prototype.registerLoadingScreens=function(){},e.prototype.registerPopups=function(){},e.prototype.registerStates=function(){},e.prototype.onResize=function(t){var e=this;void 0===t&&(t=0),(new s.TimelineLite).call((function(){e._size.copy(e._resizeManager.getSize());var t=e._resizeManager.getStageScale();e.stage.scale.set(t),e.renderer.resize(e._size.x*t,e._size.y*t),e._stateManager.onResize(e._size),e._loadManager.onResize(e._size),e._popupManager.onResize(e._size),e._orientationManager.onResize(e._size),a.publishSync(d.KEYBOARD_REFOCUS,void 0),e._hitAreaRenderer.active&&e._hitAreaRenderer.render()}),void 0,this,t)},e.prototype.onLoadRequiredAssetsComplete=function(){},e.SIZE_MIN_DEFAULT=new o.Point(1024,768),e.SIZE_MAX_DEFAULT=new o.Point(1365,768),e}(o.Application);e.Application=E},function(t,e,i){"use strict";e.__esModule=!0;var n=i(7),r=l(i(12)),o=l(i(37)),s=l(i(135)),a=l(i(89));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return a.uid=(0,n.uid)(),a.touched=0,a.resolution=s||r.default.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=void 0!==o?o:r.default.SCALE_MODE,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=r.default.MIPMAP_TEXTURES,a.wrapMode=r.default.WRAP_MODE,a._glTextures={},a._enabled=0,a._virtalBoundId=-1,a._destroyed=!1,a.textureCacheIds=[],i&&a.loadSource(i),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=a.default.isPow2(this.realWidth)&&a.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var n=this;if(t.onload=function(){n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n._sourceLoaded(),"svg"!==n.imageType?n.emit("loaded",n):n._loadSvgSource())},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,n.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,n.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,n.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,n.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var i=(0,n.getSvgSize)(t),r=i.width,o=i.height;if(!r||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(o*this.sourceScale),this._updateDimensions();var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,n.uid)(),s.getContext("2d").drawImage(this.source,0,0,r,o,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,e.addToCache(this,s._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete n.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,r,o){var a=n.BaseTextureCache[t];if(!a){var l=new Image;void 0===i&&0!==t.indexOf("data:")?l.crossOrigin=(0,s.default)(t):i&&(l.crossOrigin="string"==typeof i?i:"anonymous"),(a=new e(l,r)).imageUrl=t,o&&(a.sourceScale=o),a.resolution=(0,n.getResolutionOfUrl)(t),l.src=t,e.addToCache(a,t)}return a},e.fromCanvas=function(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=r+"_"+(0,n.uid)());var o=n.BaseTextureCache[t._pixiId];return o||(o=new e(t,i),e.addToCache(o,t._pixiId)),o},e.from=function(t,i,r){if("string"==typeof t)return e.fromImage(t,void 0,i,r);if(t instanceof HTMLImageElement){var o=t.src,s=n.BaseTextureCache[o];return s||((s=new e(t,i)).imageUrl=o,r&&(s.sourceScale=r),s.resolution=(0,n.getResolutionOfUrl)(o),e.addToCache(s,o)),s}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),n.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),n.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=n.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete n.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete n.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e}(o.default);e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(21),r=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||n.defaultToString}return t.prototype.getValue=function(t){var e=this.table["$"+this.toStr(t)];if(!n.isUndefined(e))return e.value},t.prototype.setValue=function(t,e){if(!n.isUndefined(t)&&!n.isUndefined(e)){var i,r="$"+this.toStr(t),o=this.table[r];return n.isUndefined(o)?(this.nElements++,i=void 0):i=o.value,this.table[r]={key:t,value:e},i}},t.prototype.remove=function(t){var e="$"+this.toStr(t),i=this.table[e];if(!n.isUndefined(i))return delete this.table[e],this.nElements--,i.value},t.prototype.keys=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var i=this.table[e];t.push(i.key)}return t},t.prototype.values=function(){var t=[];for(var e in this.table)if(n.has(this.table,e)){var i=this.table[e];t.push(i.value)}return t},t.prototype.forEach=function(t){for(var e in this.table)if(n.has(this.table,e)){var i=this.table[e];if(!1===t(i.key,i.value))return}},t.prototype.containsKey=function(t){return!n.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var t="{";return this.forEach((function(e,i){t+="\n\t"+e+" : "+i})),t+"\n}"},t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(59);function r(t,e){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)}e.add=function(t,e){return new PIXI.Point(t.x+e.x,t.y+e.y)},e.addToPoint=function(t,e){t.x+=e.x,t.y+=e.y},e.subtract=function(t,e){return new PIXI.Point(t.x-e.x,t.y-e.y)},e.subtractFromPoint=function(t,e){t.x-=e.x,t.y-=e.y},e.multiply=function(t,e){var i=new PIXI.Point(t.x,t.y);return i.x*=e,i.y*=e,i},e.lerp=function(t,e){return n.lerp(t.x,t.y,e)},e.distance=function(t,e){return Math.sqrt(r(t,e))},e.distanceSq=r,e.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,e,i){"use strict";function n(t,e){return t+Math.random()*(e-t)}function r(t,e){return Math.floor(n(t,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.floatBetween=n,e.floatBetweenPoint=function(t){return n(t.x,t.y)},e.intBetween=r,e.intBetweenPoint=function(t){return r(t.x,t.y)},e.bool=function(){return Math.random()<.5}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(7),s=i(132);var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.children=[],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,o.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,(0,o.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,o.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,n="number"==typeof e?e:this.children.length,r=n-i,o=void 0;if(r>0&&r<=n){o=this.children.splice(i,r);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var r=0,o=this.children.length;r<o;r++)this.children[r].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},r(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(((n=s)&&n.__esModule?n:{default:n}).default);e.default=a,a.prototype.containerUpdateTransform=a.prototype.updateTransform},function(t,e,i){"use strict";e.__esModule=!0;var n=u(i(140)),r=u(i(259)),o=u(i(142)),s=u(i(260)),a=i(7),l=i(5),h=u(i(12));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"Canvas",i,n,o));return a.type=l.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.context=a.rootContext,a.refresh=!0,a.maskManager=new r.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,s.default)(),a._activeBlendMode=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(t,e,i,n,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var s=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new o.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(e||(this._lastObjectRendered=t),!r){var h=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=h}a.save(),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=l.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[l.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var c=this.context;this.context=a,t.renderCanvas(this),this.context=c,a.restore(),this.resolution=s,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=h.default.SCALE_MODE===l.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(n.default);e.default=c,a.pluginTarget.mixin(c)},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e.default=n},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(18),o=i(12),s=(n=o)&&n.__esModule?n:{default:n};function a(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}var l=function(t){function e(i,n,r,o,l){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,a(n,l||s.default.PRECISION_VERTEX),a(r,l||s.default.PRECISION_FRAGMENT),void 0,o))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.GLShader);e.default=l},function(t,e,i){"use strict";var n=i(313).Loader,r=i(93).Resource,o=i(167),s=i(168);n.Resource=r,n.async=o,n.encodeBinary=s,n.base64=s,t.exports=n,t.exports.Loader=n,t.exports.default=n},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),s=i(31),a=(n=s)&&n.__esModule?n:{default:n};var l=new o.Point,h=new o.Polygon,u=function(t){function e(i,n,r,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return h._texture=i||a.default.EMPTY,h.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]),h.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),h.indices=s||new Uint16Array([0,1,3,2]),h.dirty=0,h.indexDirty=0,h.vertexDirty=0,h.autoUpdate=!0,h.blendMode=o.BLEND_MODES.NORMAL,h.canvasPadding=o.settings.MESH_CANVAS_PADDING,h.drawMode=l||e.DRAW_MODES.TRIANGLE_MESH,h.shader=null,h.tintRgb=new Float32Array([1,1,1]),h._glDatas={},h._uvTransform=new o.TextureMatrix(h._texture),h.uploadUvTransform=!1,h.pluginName="mesh",h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,l);for(var i=this.vertices,n=h.points,r=this.indices,o=this.indices.length,s=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<o;a+=s){var u=2*r[a],c=2*r[a+1],d=2*r[a+2];if(n[0]=i[u],n[1]=i[u+1],n[2]=i[c],n[3]=i[c+1],n[4]=i[d],n[5]=i[d+1],h.contains(l.x,l.y))return!0}return!1},e.prototype.destroy=function(e){for(var i in this._glDatas){var n=this._glDatas[i];n.destroy?n.destroy():(n.vertexBuffer&&(n.vertexBuffer.destroy(),n.vertexBuffer=null),n.indexBuffer&&(n.indexBuffer.destroy(),n.indexBuffer=null),n.uvBuffer&&(n.uvBuffer.destroy(),n.uvBuffer=null),n.vao&&(n.vao.destroy(),n.vao=null))}this._glDatas=null,t.prototype.destroy.call(this,e)},r(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return o.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=o.utils.hex2rgb(t,this.tintRgb)}}]),e}(o.Container);e.default=u,u.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var n=i(97),r=i(32);t.exports=function(t){return n(r(t))}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){var n=i(13),r=i(22),o=i(20),s=i(98),a=i(176),l=i(67),h=l.get,u=l.enforce,c=String(String).split("String");(t.exports=function(t,e,i,a){var l=!!a&&!!a.unsafe,h=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||o(i,"name")||r(i,"name",e),u(i).source=c.join("string"==typeof e?e:"")),t!==n?(l?!d&&t[e]&&(h=!0):delete t[e],h?t[e]=i:r(t,e,i)):h?t[e]=i:s(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&h(this).source||a(this)}))},function(t,e){t.exports={}},function(t,e,i){var n=i(29),r=i(351);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),e=i instanceof Array}catch(t){}return function(i,o){return n(i),r(o),e?t.call(i,o):i.__proto__=o,i}}():void 0)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(21);function r(t,e,i){for(var r=i||n.defaultEquals,o=t.length,s=0;s<o;s++)if(r(t[s],e))return s;return-1}e.indexOf=r,e.lastIndexOf=function(t,e,i){for(var r=i||n.defaultEquals,o=t.length-1;o>=0;o--)if(r(t[o],e))return o;return-1},e.contains=function(t,e,i){return r(t,e,i)>=0},e.remove=function(t,e,i){var n=r(t,e,i);return!(n<0)&&(t.splice(n,1),!0)},e.frequency=function(t,e,i){for(var r=i||n.defaultEquals,o=t.length,s=0,a=0;a<o;a++)r(t[a],e)&&s++;return s},e.equals=function(t,e,i){var r=i||n.defaultEquals;if(t.length!==e.length)return!1;for(var o=t.length,s=0;s<o;s++)if(!r(t[s],e[s]))return!1;return!0},e.copy=function(t){return t.concat()},e.swap=function(t,e,i){if(e<0||e>=t.length||i<0||i>=t.length)return!1;var n=t[e];return t[e]=t[i],t[i]=n,!0},e.toString=function(t){return"["+t.toString()+"]"},e.forEach=function(t,e){for(var i=0,n=t;i<n.length;i++){if(!1===e(n[i]))return}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STYLE_RED_BOLD="color: red; font-weight: bold",e.STYLE_RELISH="color: #74b64c",e.STYLE_RELISH_BOLD="color: #74b64c; font-weight: bold",e.STYLE_BLUE_BOLD="color: blue; font-weight: bold",e.STYLE_LIGHT_BLUE="color: #3580bd",e.STYLE_PINK_DARK="color: #cf0198",e.STYLE_BLACK="color: black",e.COLOR_LIGHT_BLUE="#3580bd",e.COLOR_RELISH="#74b64c";var n=function(){this.className="",this.color="black"};e.LogOptions=n,e.logError=function(t,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];console.error.apply(console,["%c[%s]%c -- "+t,"color: "+i.color,i.className,e.STYLE_BLACK].concat(n))},e.logWarning=function(t,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];console.warn.apply(console,["%c[%s]%c -- "+t,"color: "+i.color,i.className,e.STYLE_BLACK].concat(n))},e.log=function(t,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];console.log.apply(console,["%c[%s]%c -- "+t,"color: "+i.color,i.className,e.STYLE_BLACK].concat(n))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=function(t,e,i){return Math.max(e,Math.min(i,t))},e.lerp=function(t,e,i){return t+(e-t)*i}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(7),o=i(143);var s={getTintedTexture:function(t,e){var i=t._texture,n="#"+("00000"+(0|(e=s.roundColor(e))).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var r=i.tintCache[n],o=void 0;if(r){if(r.tintId===i._updateID)return i.tintCache[n];o=i.tintCache[n]}else o=s.canvas||document.createElement("canvas");if(s.tintMethod(i,e,o),o.tintId=i._updateID,s.convertTintToImage){var a=new Image;a.src=o.toDataURL(),i.tintCache[n]=a}else i.tintCache[n]=o,s.canvas=null;return o},tintWithMultiply:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.save(),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.restore()},tintWithOverlay:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),o=t.baseTexture.resolution;r.x*=o,r.y*=o,r.width*=o,r.height*=o,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.restore()},tintWithPerPixel:function(t,e,i){var n=i.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,i.width=Math.ceil(o.width),i.height=Math.ceil(o.height),n.save(),n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),n.restore();for(var a=(0,r.hex2rgb)(e),l=a[0],h=a[1],u=a[2],c=n.getImageData(0,0,o.width,o.height),d=c.data,p=0;p<d.length;p+=4)d[p+0]*=l,d[p+1]*=h,d[p+2]*=u;n.putImageData(c,0,0)},roundColor:function(t){var e=s.cacheStepsPerColorChannel,i=(0,r.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,r.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,((n=o)&&n.__esModule?n:{default:n}).default)(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(47);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return o(this,e),s(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(((n=r)&&n.__esModule?n:{default:n}).default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var n=v(i(140)),r=v(i(262)),o=v(i(265)),s=v(i(266)),a=v(i(63)),l=v(i(61)),h=v(i(268)),u=v(i(41)),c=v(i(269)),d=v(i(270)),p=v(i(272)),f=v(i(273)),g=i(7),m=v(i(18)),_=i(5);function v(t){return t&&t.__esModule?t:{default:t}}var y=0,b=function(t){function e(i,n,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"WebGL",i,n,s));return a.legacy=a.options.legacy,a.legacy&&(m.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=_.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new r.default(a),a.stencilManager=new o.default(a),a.emptyRenderer=new l.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,f.default)(a.options.context),a.gl=a.options.context||m.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=y++,a.state=new d.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,p.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this._unknownBoundTextures=!1,this.textureManager=new h.default(this),this.filterManager=new s.default(this),this.textureGC=new c.default(this),this.state.resetToDefault(),this.rootRenderTarget=new a.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new m.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var r=0;r<e;r++){var o=new u.default;o._glTextures[this.CONTEXT_UID]=i,this.boundTextures[r]=n,this.emptyTextures[r]=o,this.bindTexture(null,r)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!r){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){n.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return i&&i.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(i=n._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,i)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var r=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;if(t=t.baseTexture||t,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===this.emptyTextures[i]&&(e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture))}for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===t&&(this.boundTextures[n]=this.emptyTextures[n],e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new m.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(n.default);e.default=b,g.pluginTarget.mixin(b)},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(15),o=i(5),s=i(12),a=(n=s)&&n.__esModule?n:{default:n},l=i(18);var h=function(){function t(e,i,n,s,h,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new r.Rectangle(0,0,1,1),this.resolution=h||a.default.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new r.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==s?s:a.default.SCALE_MODE,this.root=u||!1,this.root?(this.frameBuffer=new l.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,n)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=h},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){t.nativeLines?function(t,e){var i=0,n=t.points;if(0===n.length)return;var o=e.points,s=n.length/2,a=(0,r.hex2rgb)(t.lineColor),l=t.lineAlpha,h=a[0]*l,u=a[1]*l,c=a[2]*l;for(i=1;i<s;i++){var d=n[2*(i-1)],p=n[2*(i-1)+1],f=n[2*i],g=n[2*i+1];o.push(d,p),o.push(h,u,c,l),o.push(f,g),o.push(h,u,c,l)}}(t,i):function(t,e){var i=t.points;if(0===i.length)return;var o=new n.Point(i[0],i[1]),s=new n.Point(i[i.length-2],i[i.length-1]);if(o.x===s.x&&o.y===s.y){(i=i.slice()).pop(),i.pop();var a=(s=new n.Point(i[i.length-2],i[i.length-1])).x+.5*(o.x-s.x),l=s.y+.5*(o.y-s.y);i.unshift(a,l),i.push(a,l)}var h=e.points,u=e.indices,c=i.length/2,d=i.length,p=h.length/6,f=t.lineWidth/2,g=(0,r.hex2rgb)(t.lineColor),m=t.lineAlpha,_=g[0]*m,v=g[1]*m,y=g[2]*m,b=i[0],x=i[1],w=i[2],T=i[3],S=0,E=0,P=-(x-T),A=b-w,I=0,O=0,C=0,M=0,R=Math.sqrt(P*P+A*A);P/=R,A/=R,P*=f,A*=f;var k=t.lineAlignment,L=2*(1-k),D=2*k;h.push(b-P*L,x-A*L,_,v,y,m),h.push(b+P*D,x+A*D,_,v,y,m);for(var N=1;N<c-1;++N){b=i[2*(N-1)],x=i[2*(N-1)+1],w=i[2*N],T=i[2*N+1],S=i[2*(N+1)],E=i[2*(N+1)+1],P=-(x-T),A=b-w,R=Math.sqrt(P*P+A*A),P/=R,A/=R,P*=f,A*=f,I=-(T-E),O=w-S,R=Math.sqrt(I*I+O*O),I/=R,O/=R;var F=-A+x-(-A+T),B=-P+w-(-P+b),U=(-P+b)*(-A+T)-(-P+w)*(-A+x),j=-(O*=f)+E-(-O+T),V=-(I*=f)+w-(-I+S),X=(-I+S)*(-O+T)-(-I+w)*(-O+E),H=F*V-j*B;if(Math.abs(H)<.1)H+=10.1,h.push(w-P*L,T-A*L,_,v,y,m),h.push(w+P*D,T+A*D,_,v,y,m);else{var G=(B*X-V*U)/H,W=(j*U-F*X)/H;(G-w)*(G-w)+(W-T)*(W-T)>196*f*f?(C=P-I,M=A-O,R=Math.sqrt(C*C+M*M),C/=R,M/=R,C*=f,M*=f,h.push(w-C*L,T-M*L),h.push(_,v,y,m),h.push(w+C*D,T+M*D),h.push(_,v,y,m),h.push(w-C*D*L,T-M*L),h.push(_,v,y,m),d++):(h.push(w+(G-w)*L,T+(W-T)*L),h.push(_,v,y,m),h.push(w-(G-w)*D,T-(W-T)*D),h.push(_,v,y,m))}}b=i[2*(c-2)],x=i[2*(c-2)+1],w=i[2*(c-1)],T=i[2*(c-1)+1],P=-(x-T),A=b-w,R=Math.sqrt(P*P+A*A),P/=R,A/=R,P*=f,A*=f,h.push(w-P*L,T-A*L),h.push(_,v,y,m),h.push(w+P*D,T+A*D),h.push(_,v,y,m),u.push(p);for(var Y=0;Y<d;++Y)u.push(p++);u.push(p-1)}(t,e)};var n=i(15),r=i(7)},function(t,e,i){var n=i(19),r=i(96),o=i(51),s=i(52),a=i(66),l=i(20),h=i(174),u=Object.getOwnPropertyDescriptor;e.f=n?u:function(t,e){if(t=s(t),e=a(e,!0),h)try{return u(t,e)}catch(t){}if(l(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,i){var n=i(27);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,i){var n,r,o,s=i(330),a=i(13),l=i(27),h=i(22),u=i(20),c=i(99),d=i(101),p=a.WeakMap;if(s){var f=new p,g=f.get,m=f.has,_=f.set;n=function(t,e){return _.call(f,t,e),e},r=function(t){return g.call(f,t)||{}},o=function(t){return m.call(f,t)}}else{var v=c("state");d[v]=!0,n=function(t,e){return h(t,v,e),e},r=function(t){return u(t,v)?t[v]:{}},o=function(t){return u(t,v)}}t.exports={set:n,get:r,has:o,enforce:function(t){return o(t)?r(t):n(t,{})},getterFor:function(t){return function(e){var i;if(!l(e)||(i=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}}},function(t,e){t.exports=!1},function(t,e,i){var n=i(333),r=i(13),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(n[t])||o(r[t]):n[t]&&n[t][e]||r[t]&&r[t][e]}},function(t,e,i){var n=i(38),r=Math.max,o=Math.min;t.exports=function(t,e){var i=n(t);return i<0?r(i+e,0):o(i,e)}},function(t,e,i){"use strict";var n,r,o=i(338),s=i(339),a=RegExp.prototype.exec,l=String.prototype.replace,h=a,u=(n=/a/,r=/b*/g,a.call(n,"a"),a.call(r,"a"),0!==n.lastIndex||0!==r.lastIndex),c=s.UNSUPPORTED_Y||s.BROKEN_CARET,d=void 0!==/()??/.exec("")[1];(u||d||c)&&(h=function(t){var e,i,n,r,s=this,h=c&&s.sticky,p=o.call(s),f=s.source,g=0,m=t;return h&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),m=String(t).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==t[s.lastIndex-1])&&(f="(?: "+f+")",m=" "+m,g++),i=new RegExp("^(?:"+f+")",p)),d&&(i=new RegExp("^"+f+"$(?!\\s)",p)),u&&(e=s.lastIndex),n=a.call(h?i:s,m),h?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=s.lastIndex,s.lastIndex+=n[0].length):s.lastIndex=0:u&&n&&(s.lastIndex=s.global?n.index+n[0].length:e),d&&n&&n.length>1&&l.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n}),t.exports=h},function(t,e,i){var n=i(20),r=i(39),o=i(99),s=i(350),a=o("IE_PROTO"),l=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=r(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.LOAD="load",t.LOAD_ERROR="loaderror",t.PLAY_ERROR="playerror",t.PLAY="play",t.END="end",t.PAUSE="pause",t.STOP="stop",t.MUTE="mute",t.VOLUME="volume",t.RATE="rate",t.SEEK="seek",t.FADE="fade",t.UNLOCK="unlock"}(e.Events||(e.Events={})),function(t){t.UNLOADED="unloaded",t.LOADING="loading",t.LOADED="loaded"}(e.State||(e.State={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(195);!function(t){t[t.TEXTURE_ATLAS=0]="TEXTURE_ATLAS",t[t.PNG=1]="PNG",t[t.JPG=2]="JPG",t[t.FONT=3]="FONT",t[t.SPINE=4]="SPINE",t[t.SPINE_JSON=5]="SPINE_JSON",t[t.SPINE_SKEL=6]="SPINE_SKEL",t[t.SPINE_ATLAS=7]="SPINE_ATLAS",t[t.AUDIO=8]="AUDIO",t[t.JSON=9]="JSON",t[t.NONE=10]="NONE",t[t.NUM_ELEMENTS=11]="NUM_ELEMENTS"}(n=e.AssetType||(e.AssetType={}));var o=function(){function t(){}return t.getPathToAsset=function(t,e){switch(t instanceof r.AssetMapData&&(e=t.assetType,t=t.assetName),e){case n.TEXTURE_ATLAS:return this.FILEPATH_SPRITESHEET+t+this._resolutionSuffix+this.FILE_EXTENSION_JSON;case n.JPG:return this.FILEPATH_IMAGE+t+this._resolutionSuffix+this.FILE_EXTENSION_JPG;case n.PNG:return this.FILEPATH_IMAGE+t+this._resolutionSuffix+this.FILE_EXTENSION_PNG;case n.FONT:return this.FILEPATH_FONT+t+this._resolutionSuffix+this.FILE_EXTENSION_FONT;case n.SPINE:return this.FILEPATH_SPINE+t+this._resolutionSuffix+this.FILE_EXTENSION_JSON;case n.SPINE_JSON:return this.FILEPATH_SPINE+t+this.FILE_EXTENSION_JSON;case n.SPINE_SKEL:return this.FILEPATH_SPINE+t+this.FILE_EXTENSION_SPINE_SKEL;case n.SPINE_ATLAS:return this.FILEPATH_SPINE+t+this._resolutionSuffix+this.FILE_EXTENSION_SPINE_ATLAS;case n.JSON:return this.FILEPATH_JSON+t+this.FILE_EXTENSION_JSON;default:return""}},Object.defineProperty(t,"resolutionSuffix",{get:function(){return this._resolutionSuffix},set:function(t){this._resolutionSuffix=t},enumerable:!0,configurable:!0}),t.replaceResolutionToken=function(t,e){return void 0===e&&(e="@x"),t.replace(e,this._resolutionSuffix)},t.FILEPATH_IMAGE="images/static/",t.FILEPATH_SPRITESHEET="images/spritesheets/",t.FILEPATH_AUDIO="audio/",t.FILEPATH_FONT="fonts/",t.FILEPATH_SPINE="spine/",t.FILEPATH_JSON="json/",t.FILE_EXTENSION_JSON=".json",t.FILE_EXTENSION_PNG=".png",t.FILE_EXTENSION_JPG=".jpg",t.FILE_EXTENSION_FONT=".fnt",t.FILE_EXTENSION_SPINE_ATLAS=".atlas",t.FILE_EXTENSION_SPINE_SKEL=".skel",t}();e.AssetUtils=o},function(t,e,i){"use strict";var n=i(17),r=i(180).indexOf,o=i(214),s=i(215),a=[].indexOf,l=!!a&&1/[1].indexOf(1,-0)<0,h=o("indexOf"),u=s("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:l||!h||!u},{indexOf:function(t){return l?a.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var n=i(17),r=i(70),o=i(38),s=i(23),a=i(39),l=i(216),h=i(397),u=i(398),c=i(215),d=u("splice"),p=c("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min;n({target:"Array",proto:!0,forced:!d||!p},{splice:function(t,e){var i,n,u,c,d,p,m=a(this),_=s(m.length),v=r(t,_),y=arguments.length;if(0===y?i=n=0:1===y?(i=0,n=_-v):(i=y-2,n=g(f(o(e),0),_-v)),_+i-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(u=l(m,n),c=0;c<n;c++)(d=v+c)in m&&h(u,c,m[d]);if(u.length=n,i<n){for(c=v;c<_-n;c++)p=c+i,(d=c+n)in m?m[p]=m[d]:delete m[p];for(c=_;c>_-n+i;c--)delete m[c-1]}else if(i>n)for(c=_-n;c>v;c--)p=c+i-1,(d=c+n-1)in m?m[p]=m[d]:delete m[p];for(c=0;c<i;c++)m[c+v]=arguments[c+2];return m.length=_-n+i,u}})},function(t,e,i){"use strict";var n,r=i(222),o=i(19),s=i(13),a=i(27),l=i(20),h=i(117),u=i(22),c=i(54),d=i(28).f,p=i(72),f=i(56),g=i(14),m=i(100),_=s.Int8Array,v=_&&_.prototype,y=s.Uint8ClampedArray,b=y&&y.prototype,x=_&&p(_),w=v&&p(v),T=Object.prototype,S=T.isPrototypeOf,E=g("toStringTag"),P=m("TYPED_ARRAY_TAG"),A=r&&!!f&&"Opera"!==h(s.opera),I=!1,O={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},C=function(t){return a(t)&&l(O,h(t))};for(n in O)s[n]||(A=!1);if((!A||"function"!=typeof x||x===Function.prototype)&&(x=function(){throw TypeError("Incorrect invocation")},A))for(n in O)s[n]&&f(s[n],x);if((!A||!w||w===T)&&(w=x.prototype,A))for(n in O)s[n]&&f(s[n].prototype,w);if(A&&p(b)!==w&&f(b,w),o&&!l(w,E))for(n in I=!0,d(w,E,{get:function(){return a(this)?this[P]:void 0}}),O)s[n]&&u(s[n],P,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:A,TYPED_ARRAY_TAG:I&&P,aTypedArray:function(t){if(C(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(f){if(S.call(x,t))return t}else for(var e in O)if(l(O,n)){var i=s[e];if(i&&(t===i||S.call(i,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,i){if(o){if(i)for(var n in O){var r=s[n];r&&l(r.prototype,t)&&delete r.prototype[t]}w[t]&&!i||c(w,t,i?e:A&&v[t]||e)}},exportTypedArrayStaticMethod:function(t,e,i){var n,r;if(o){if(f){if(i)for(n in O)(r=s[n])&&l(r,t)&&delete r[t];if(x[t]&&!i)return;try{return c(x,t,i?e:A&&_[t]||e)}catch(t){}}for(n in O)!(r=s[n])||r[t]&&!i||c(r,t,e)}},isView:function(t){var e=h(t);return"DataView"===e||l(O,e)},isTypedArray:C,TypedArray:x,TypedArrayPrototype:w}},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0});var r=i(24);e.AudioCategory=r;var o=i(73);e.HowlerUtils=o,n(i(196)),n(i(112)),n(i(188)),n(i(197)),n(i(198))},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return t.call(this,void 0,e.FRAG)||this}return r(e,t),e.FRAG="\n        varying vec2 vTextureCoord;\n        uniform sampler2D uSampler;\n\n        uniform vec2 thickness;\n        uniform vec4 outlineColor;\n        uniform vec4 filterClamp;\n\n        const float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\n        void main(void) {\n            vec4 ownColor = texture2D(uSampler, vTextureCoord);\n            vec4 curColor;\n            float maxAlpha = 0.;\n            vec2 displaced;\n            for (float angle = 0.; angle <= DOUBLE_PI; angle += 0.5) {\n                displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n                displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n                curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n                maxAlpha = max(maxAlpha, curColor.a);\n            }\n            float resultAlpha = max(maxAlpha, ownColor.a);\n            resultAlpha = resultAlpha * ceil(vTextureCoord.x) * (1. - floor(vTextureCoord.x));\n            resultAlpha = resultAlpha * ceil(vTextureCoord.y) * (1. - floor(vTextureCoord.y));\n            gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n        }\n    ",e}(PIXI.Filter);e.OutlineFilter=o},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(80),s=(n=o)&&n.__esModule?n:{default:n},a=i(5);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;l(this,t),this.a=e,this.b=i,this.c=n,this.d=r,this.tx=o,this.ty=s,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,o){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new s.default;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new s.default;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,o=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,o,s,a,l){return this.a=Math.cos(s+l)*r,this.b=Math.sin(s+l)*r,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,o=-Math.atan2(-n,r),s=Math.atan2(i,e),l=Math.abs(o+s);return l<1e-5||Math.abs(a.PI_2-l)<1e-5?(t.rotation=s,e<0&&r>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,o=t*n-e*i;return this.a=n/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-n*r)/o,this.ty=-(t*this.ty-e*r)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},r(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(5);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(this,t),this.x=Number(e),this.y=Number(i),this.width=Number(n),this.height=Number(s),this.type=r.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(r-n,0)},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=n,this.height=r-n},t.prototype.ceil=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y},n(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e.default=s},function(t,e){var i=null,n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=function(t,e){if(!i){var r=Object.keys(n);i={};for(var o=0;o<r.length;++o){var s=r[o];i[t[s]]=n[s]}}return i[e]}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(15);var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:((t=t||new n.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,o=t[0],s=t[1];e=o<e?o:e,i=s<i?s:i,n=o>n?o:n,r=s>r?s:r,e=(o=t[2])<e?o:e,i=(s=t[3])<i?s:i,n=o>n?o:n,r=s>r?s:r,e=(o=t[4])<e?o:e,i=(s=t[5])<i?s:i,n=o>n?o:n,r=s>r?s:r,e=(o=t[6])<e?o:e,i=(s=t[7])<i?s:i,n=o>n?o:n,r=s>r?s:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){var o=t.worldTransform,s=o.a,a=o.b,l=o.c,h=o.d,u=o.tx,c=o.ty,d=this.minX,p=this.minY,f=this.maxX,g=this.maxY,m=s*e+l*i+u,_=a*e+h*i+c;d=m<d?m:d,p=_<p?_:p,f=m>f?m:f,g=_>g?_:g,d=(m=s*n+l*i+u)<d?m:d,p=(_=a*n+h*i+c)<p?_:p,f=m>f?m:f,g=_>g?_:g,d=(m=s*e+l*r+u)<d?m:d,p=(_=a*e+h*r+c)<p?_:p,f=m>f?m:f,g=_>g?_:g,d=(m=s*n+l*r+u)<d?m:d,p=(_=a*n+h*r+c)<p?_:p,f=m>f?m:f,g=_>g?_:g,this.minX=d,this.minY=p,this.maxX=f,this.maxY=g},t.prototype.addVertices=function(t,e,i,n){for(var r=t.worldTransform,o=r.a,s=r.b,a=r.c,l=r.d,h=r.tx,u=r.ty,c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,g=i;g<n;g+=2){var m=e[g],_=e[g+1],v=o*m+a*_+h,y=l*_+s*m+u;c=v<c?v:c,d=y<d?y:d,p=v>p?v:p,f=y>f?y:f}this.minX=c,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,h=this.maxY;this.minX=i<s?i:s,this.minY=n<a?n:a,this.maxX=r>l?r:l,this.maxY=o>h?o:h}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,h=this.maxY;this.minX=i<s?i:s,this.minY=n<a?n:a,this.maxX=r>l?r:l,this.maxY=o>h?o:h}},t}();e.default=r},function(t,e,i){var n,r,o;!function(i){var s=/iPhone/i,a=/iPod/i,l=/iPad/i,h=/\bAndroid(?:.+)Mobile\b/i,u=/Android/i,c=/\bAndroid(?:.+)SD4930UR\b/i,d=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,p=/Windows Phone/i,f=/\bWindows(?:.+)ARM\b/i,g=/BlackBerry/i,m=/BB10/i,_=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,y=/\Mobile(?:.+)Firefox\b/i;function b(t,e){return t.test(e)}function x(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),i=e.split("[FBAN");void 0!==i[1]&&(e=i[0]),void 0!==(i=e.split("Twitter"))[1]&&(e=i[0]);var n={apple:{phone:b(s,e)&&!b(p,e),ipod:b(a,e),tablet:!b(s,e)&&b(l,e)&&!b(p,e),device:(b(s,e)||b(a,e)||b(l,e))&&!b(p,e)},amazon:{phone:b(c,e),tablet:!b(c,e)&&b(d,e),device:b(c,e)||b(d,e)},android:{phone:!b(p,e)&&b(c,e)||!b(p,e)&&b(h,e),tablet:!b(p,e)&&!b(c,e)&&!b(h,e)&&(b(d,e)||b(u,e)),device:!b(p,e)&&(b(c,e)||b(d,e)||b(h,e)||b(u,e))},windows:{phone:b(p,e),tablet:b(f,e),device:b(p,e)||b(f,e)},other:{blackberry:b(g,e),blackberry10:b(m,e),opera:b(_,e),firefox:b(y,e),chrome:b(v,e),device:b(g,e)||b(m,e)||b(_,e)||b(y,e)||b(v,e)}};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}t.exports&&"undefined"==typeof window?t.exports=x:t.exports&&"undefined"!=typeof window?t.exports=x():(r=[],n=i.isMobile=x(),void 0===(o="function"==typeof n?n.apply(e,r):n)||(t.exports=o))}(this)},function(t,e,i){"use strict";e.__esModule=!0;var n=i(15);var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,n=this.localTransform;i.a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();e.default=r,r.prototype.updateWorldTransform=r.prototype.updateTransform,r.IDENTITY=new r},function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,a,l,h,u,p,g,m=e&&e.length,_=m?e[0]*i:t.length,v=r(t,0,_,i,!0),y=[];if(!v||v.next===v.prev)return y;if(m&&(v=function(t,e,i,n){var s,a,l,h,u,p=[];for(s=0,a=e.length;s<a;s++)l=e[s]*n,h=s<a-1?e[s+1]*n:t.length,(u=r(t,l,h,n,!1))===u.next&&(u.steiner=!0),p.push(f(u));for(p.sort(c),s=0;s<p.length;s++)d(p[s],i),i=o(i,i.next);return i}(t,e,v,i)),t.length>80*i){n=l=t[0],a=h=t[1];for(var b=i;b<_;b+=i)(u=t[b])<n&&(n=u),(p=t[b+1])<a&&(a=p),u>l&&(l=u),p>h&&(h=p);g=0!==(g=Math.max(l-n,h-a))?1/g:0}return s(v,y,i,n,a,g),y}function r(t,e,i,n,r){var o,s;if(r===E(t,e,i,n)>0)for(o=e;o<i;o+=n)s=w(o,t[o],t[o+1],s);else for(o=i-n;o>=e;o-=n)s=w(o,t[o],t[o+1],s);return s&&v(s,s.next)&&(T(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!v(n,n.next)&&0!==_(n.prev,n,n.next))n=n.next;else{if(T(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function s(t,e,i,n,r,c,d){if(t){!d&&c&&function(t,e,i,n){var r=t;do{null===r.z&&(r.z=p(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,o,s,a,l,h=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,n=i,a=0,e=0;e<h&&(a++,n=n.nextZ);e++);for(l=h;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,h*=2}while(s>1)}(r)}(t,n,r,c);for(var f,g,m=t;t.prev!==t.next;)if(f=t.prev,g=t.next,c?l(t,n,r,c):a(t))e.push(f.i/i),e.push(t.i/i),e.push(g.i/i),T(t),t=g.next,m=g.next;else if((t=g)===m){d?1===d?s(t=h(t,e,i),e,i,n,r,c,2):2===d&&u(t,e,i,n,r,c):s(o(t),e,i,n,r,c,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(_(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(g(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&_(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(t,e,i,n){var r=t.prev,o=t,s=t.next;if(_(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,h=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,u=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,c=p(a,l,e,i,n),d=p(h,u,e,i,n),f=t.prevZ,m=t.nextZ;f&&f.z>=c&&m&&m.z<=d;){if(f!==t.prev&&f!==t.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&_(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,m!==t.prev&&m!==t.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&_(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,f.x,f.y)&&_(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;m&&m.z<=d;){if(m!==t.prev&&m!==t.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,m.x,m.y)&&_(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(t,e,i){var n=t;do{var r=n.prev,o=n.next.next;!v(r,o)&&y(r,n,n.next,o)&&b(r,o)&&b(o,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(o.i/i),T(n),T(n.next),n=t=o),n=n.next}while(n!==t);return n}function u(t,e,i,n,r,a){var l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&m(l,h)){var u=x(l,h);return l=o(l,l.next),u=o(u,u.next),s(l,e,i,n,r,a),void s(u,e,i,n,r,a)}h=h.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,n=e,r=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s){if(s=a,a===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===s)return i.prev;var l,h=i,u=i.x,c=i.y,d=1/0;n=i.next;for(;n!==h;)r>=n.x&&n.x>=u&&r!==n.x&&g(o<c?r:s,o,u,c,o<c?s:r,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(r-n.x))<d||l===d&&n.x>i.x)&&b(n,t)&&(i=n,d=l),n=n.next;return i}(t,e)){var i=x(e,t);o(i,i.next)}}function p(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,n,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(n-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(r-s)*(n-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&y(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&b(t,e)&&b(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)}function _(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,i,n){return!!(v(t,e)&&v(i,n)||v(t,n)&&v(i,e))||_(t,e,i)>0!=_(t,e,n)>0&&_(i,n,t)>0!=_(i,n,e)>0}function b(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function x(t,e){var i=new S(t.i,t.x,t.y),n=new S(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function w(t,e,i,n){var r=new S(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function T(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(t,e,i,n){for(var r=0,o=e,s=i-n;o<i;o+=n)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}t.exports=n,t.exports.default=n,n.deviation=function(t,e,i,n){var r=e&&e.length,o=r?e[0]*i:t.length,s=Math.abs(E(t,0,o,i));if(r)for(var a=0,l=e.length;a<l;a++){var h=e[a]*i,u=a<l-1?e[a+1]*i:t.length;s-=Math.abs(E(t,h,u,i))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,p=n[a+1]*i,f=n[a+2]*i;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[r][o][s]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(15),o=i(7),s=i(5),a=h(i(31)),l=h(i(45));function h(t){return t&&t.__esModule?t:{default:t}}var u=new r.Point,c=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n._anchor=new r.ObservablePoint(n._onAnchorUpdate,n,i?i.defaultAnchor.x:0,i?i.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=s.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=i||a.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,o.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,o.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,o=e.d,s=e.tx,a=e.ty,l=this.vertexData,h=t.trim,u=t.orig,c=this._anchor,d=0,p=0,f=0,g=0;h?(d=(p=h.x-c._x*u.width)+h.width,f=(g=h.y-c._y*u.height)+h.height):(d=(p=-c._x*u.width)+u.width,f=(g=-c._y*u.height)+u.height),l[0]=i*p+r*g+s,l[1]=o*g+n*p+a,l[2]=i*d+r*g+s,l[3]=o*g+n*d+a,l[4]=i*d+r*f+s,l[5]=o*f+n*d+a,l[6]=i*p+r*f+s,l[7]=o*f+n*p+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,o=r.a,s=r.b,a=r.c,l=r.d,h=r.tx,u=r.ty,c=-n._x*i.width,d=c+i.width,p=-n._y*i.height,f=p+i.height;e[0]=o*c+a*p+h,e[1]=l*p+s*c+u,e[2]=o*d+a*p+h,e[3]=l*p+s*d+u,e[4]=o*d+a*f+h,e[5]=l*f+s*d+u,e[6]=o*c+a*f+h,e[7]=l*f+s*c+u},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new r.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return u.x>=n&&u.x<n+e&&(r=-i*this.anchor.y,u.y>=r&&u.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(a.default.from(t))},e.fromFrame=function(t){var i=o.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,n){return new e(a.default.fromImage(t,i,n))},n(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,o.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,o.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||a.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(l.default);e.default=c},function(t,e,i){"use strict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,i;return e=(t>65535)<<4,e|=i=((t>>>=e)>255)<<3,e|=i=((t>>>=i)>15)<<2,(e|=i=((t>>>=i)>3)<<1)|(t>>>=i)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(r),e.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,i){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},function(t,e,i){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var n,r=i(256),o=(n=r)&&n.__esModule?n:{default:n};var s=new o.default;s.autoStart=!0,s.destroy=function(){},e.shared=s,e.Ticker=o.default},function(t,e,i){"use strict";e.__esModule=!0;var n=r(i(141));function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(i,r){o(this,e);var a=null;if(!(i instanceof n.default)){var l=arguments[1],h=arguments[2],u=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+l+", "+h+") instead of the ctor directly."),a=arguments[0],r=null,i=new n.default(l,h,u,c)}var d=s(this,t.call(this,i,r));return d.legacyRenderer=a,d.valid=!0,d._updateUvs(),d}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e,i){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,r,o){return new e(new n.default(t,i,r,o))},e}(r(i(31)).default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){for(var e=6*t,i=new Uint16Array(e),n=0,r=0;n<e;n+=6,r+=4)i[n+0]=r+0,i[n+1]=r+1,i[n+2]=r+2,i[n+3]=r+0,i[n+4]=r+2,i[n+5]=r+3;return i}},function(t,e,i){"use strict";e.__esModule=!0,e.Resource=void 0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=s(i(166)),o=s(i(165));function s(t){return t&&t.__esModule?t:{default:t}}var a=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;function h(){}var u=e.Resource=function(){function t(e,i,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=h,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o.default,this.onProgress=new o.default,this.onComplete=new o.default,this.onAfterMiddleware=new o.default}return t.setExtensionLoadType=function(e,i){c(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){c(t._xhrTypeMap,e,i)},t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:a&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(d(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(d(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(d(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,l||(l=document.createElement("a")),l.href=t;var i=!(t=(0,r.default)(l.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),o=Math.min(n>-1?n:t.length,r>-1?r:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function c(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function d(t){return t.toString().replace("object ","")}u.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},u.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},u.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},u.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},u._loadTypeMap={gif:u.LOAD_TYPE.IMAGE,png:u.LOAD_TYPE.IMAGE,bmp:u.LOAD_TYPE.IMAGE,jpg:u.LOAD_TYPE.IMAGE,jpeg:u.LOAD_TYPE.IMAGE,tif:u.LOAD_TYPE.IMAGE,tiff:u.LOAD_TYPE.IMAGE,webp:u.LOAD_TYPE.IMAGE,tga:u.LOAD_TYPE.IMAGE,svg:u.LOAD_TYPE.IMAGE,"svg+xml":u.LOAD_TYPE.IMAGE,mp3:u.LOAD_TYPE.AUDIO,ogg:u.LOAD_TYPE.AUDIO,wav:u.LOAD_TYPE.AUDIO,mp4:u.LOAD_TYPE.VIDEO,webm:u.LOAD_TYPE.VIDEO},u._xhrTypeMap={xhtml:u.XHR_RESPONSE_TYPE.DOCUMENT,html:u.XHR_RESPONSE_TYPE.DOCUMENT,htm:u.XHR_RESPONSE_TYPE.DOCUMENT,xml:u.XHR_RESPONSE_TYPE.DOCUMENT,tmx:u.XHR_RESPONSE_TYPE.DOCUMENT,svg:u.XHR_RESPONSE_TYPE.DOCUMENT,tsx:u.XHR_RESPONSE_TYPE.DOCUMENT,gif:u.XHR_RESPONSE_TYPE.BLOB,png:u.XHR_RESPONSE_TYPE.BLOB,bmp:u.XHR_RESPONSE_TYPE.BLOB,jpg:u.XHR_RESPONSE_TYPE.BLOB,jpeg:u.XHR_RESPONSE_TYPE.BLOB,tif:u.XHR_RESPONSE_TYPE.BLOB,tiff:u.XHR_RESPONSE_TYPE.BLOB,webp:u.XHR_RESPONSE_TYPE.BLOB,tga:u.XHR_RESPONSE_TYPE.BLOB,json:u.XHR_RESPONSE_TYPE.JSON,text:u.XHR_RESPONSE_TYPE.TEXT,txt:u.XHR_RESPONSE_TYPE.TEXT,ttf:u.XHR_RESPONSE_TYPE.BUFFER,otf:u.XHR_RESPONSE_TYPE.BUFFER},u.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",t.exports.default=u},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),o=i(172),s=(n=o)&&n.__esModule?n:{default:n};var a=r.ticker.shared;r.settings.UPLOADS_PER_FRAME=4;var l=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.limiter=new s.default(r.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(f),this.registerFindHook(g),this.registerFindHook(h),this.registerFindHook(u),this.registerFindHook(c),this.registerUploadHook(d),this.registerUploadHook(p)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,a.addOnce(this.tick,this,r.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)a.addOnce(this.tick,this,r.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var s=0,l=o.length;s<l;s++)o[s]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof r.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&a.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function h(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof r.Texture){var o=t._textures[n].baseTexture;-1===e.indexOf(o)&&(e.push(o),i=!0)}return i}function u(t,e){return t instanceof r.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function c(t,e){if(t._texture&&t._texture instanceof r.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function d(t,e){return e instanceof r.Text&&(e.updateText(!0),!0)}function p(t,e){if(e instanceof r.TextStyle){var i=e.toFontString();return r.TextMetrics.measureFont(i),!0}return!1}function f(t,e){if(t instanceof r.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function g(t,e){return t instanceof r.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}e.default=l},function(t,e,i){var n=i(17),r=i(335).values;n({target:"Object",stat:!0},{values:function(t){return r(t)}})},function(t,e,i){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},function(t,e,i){var n=i(11),r=i(53),o="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?o.call(t,""):Object(t)}:Object},function(t,e,i){var n=i(13),r=i(22);t.exports=function(t,e){try{r(n,t,e)}catch(i){n[t]=e}return e}},function(t,e,i){var n=i(178),r=i(100),o=n("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++i+n).toString(36)}},function(t,e){t.exports={}},function(t,e,i){var n=i(179),r=i(103).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,r)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,i){var n=i(179),r=i(103);t.exports=Object.keys||function(t){return n(t,r)}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,i){var n,r=i(29),o=i(346),s=i(103),a=i(101),l=i(347),h=i(175),u=i(99),c=u("IE_PROTO"),d=function(){},p=function(t){return"<script>"+t+"<\/script>"},f=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;f=n?function(t){t.write(p("")),t.close();var e=t.parentWindow.Object;return t=null,e}(n):((e=h("iframe")).style.display="none",l.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(p("document.F=Object")),t.close(),t.F);for(var i=s.length;i--;)delete f.prototype[s[i]];return f()};a[c]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(d.prototype=r(t),i=new d,d.prototype=null,i[c]=t):i=f(),void 0===e?i:o(i,e)}},function(t,e,i){var n=i(28).f,r=i(20),o=i(14)("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(21),r=i(57),o=function(){function t(){this.firstNode=null,this.lastNode=null,this.nElements=0}return t.prototype.add=function(t,e){if(n.isUndefined(e)&&(e=this.nElements),e<0||e>this.nElements||n.isUndefined(t))return!1;var i=this.createNode(t);if(0===this.nElements||null===this.lastNode)this.firstNode=i,this.lastNode=i;else if(e===this.nElements)this.lastNode.next=i,this.lastNode=i;else if(0===e)i.next=this.firstNode,this.firstNode=i;else{var r=this.nodeAtIndex(e-1);if(null===r)return!1;i.next=r.next,r.next=i}return this.nElements++,!0},t.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},t.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},t.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);if(null!==e)return e.element},t.prototype.indexOf=function(t,e){var i=e||n.defaultEquals;if(n.isUndefined(t))return-1;for(var r=this.firstNode,o=0;null!==r;){if(i(r.element,t))return o;o++,r=r.next}return-1},t.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},t.prototype.remove=function(t,e){var i=e||n.defaultEquals;if(this.nElements<1||n.isUndefined(t))return!1;for(var r=null,o=this.firstNode;null!==o;){if(i(o.element,t))return null===r?(this.firstNode=o.next,o===this.lastNode&&(this.lastNode=null)):o===this.lastNode?(this.lastNode=r,r.next=o.next,o.next=null):(r.next=o.next,o.next=null),this.nElements--,!0;r=o,o=o.next}return!1},t.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.prototype.equals=function(e,i){var r=i||n.defaultEquals;return e instanceof t&&(this.size()===e.size()&&this.equalsAux(this.firstNode,e.firstNode,r))},t.prototype.equalsAux=function(t,e,i){for(;null!==t&&null!==e;){if(!i(t.element,e.element))return!1;t=t.next,e=e.next}return!0},t.prototype.removeElementAtIndex=function(t){if(!(t<0||t>=this.nElements||null===this.firstNode||null===this.lastNode)){var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var i=this.nodeAtIndex(t-1);null===i?(e=this.firstNode.element,this.firstNode=this.firstNode.next):i.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=i),null!==i&&null!==i.next&&(e=i.next.element,i.next=i.next.next)}return this.nElements--,e}},t.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&!1!==t(e.element);)e=e.next},t.prototype.reverse=function(){for(var t=null,e=this.firstNode,i=null;null!==e;)i=e.next,e.next=t,t=e,e=i;i=this.firstNode,this.firstNode=this.lastNode,this.lastNode=i},t.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){return r.toString(this.toArray())},t.prototype.nodeAtIndex=function(t){if(t<0||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,i=0;i<t&&null!==e;i++)e=e.next;return e},t.prototype.createNode=function(t){return{element:t,next:null}},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.offset=function(t,e){return t.x+=e.x,t.y+=e.y,t},e.center=function(t,e){return void 0===e&&(e=new PIXI.Point),e.set(t.x+.5*t.width,t.y+.5*t.height),e},e.scale=function(t,e){return t.x*=e,t.y*=e,t.width*=e,t.height*=e,t},e.size=function(t,e){return void 0===e&&(e=new PIXI.Point),e.set(t.width,t.height),e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(33),r=i(8),o=function(){function t(){}return t.addAssetGroup=function(t,e){this._map.setValue(t,e)},t.getAssetGroup=function(t){if(0===this._map.size())return this.logE("Asset map is empty. Call addAssetGroup first. Returning empty array."),new Array;var e=this._map.getValue(t);return void 0===e?(this.logE("%c%s%c asset group has not been added to the map. Call addAssetGroup first. Returning empty array.",r.LogUtils.STYLE_RED_BOLD,t,r.LogUtils.STYLE_BLACK),new Array):e},t.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&r.LogUtils.log.apply(r.LogUtils,[t,{className:"AssetMap",color:"green"}].concat(e))},t.logW=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&r.LogUtils.logWarning.apply(r.LogUtils,[t,{className:"AssetMap",color:"green"}].concat(e))},t.logE=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];r.LogUtils.logError.apply(r.LogUtils,[t,{className:"AssetMap",color:"green"}].concat(e))},t._map=new n.Dictionary,t._debug=!1,t}();e.AssetMap=o},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(40),s=i(78),a=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.category=n,r}return r(e,t),e.prototype.isLoaded=function(){var t=o.Application.instance.audio.getAudioTrack(this.assetName,this.category);return void 0!==t&&t.getSource().state()!==s.HowlerUtils.State.UNLOADED},e}(i(34).AssetMapData);e.AssetMapAudioData=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(24),r=function(t,e,i,r){void 0===e&&(e=1),void 0===i&&(i=!1),void 0===r&&(r=n.DEFAULT),this.id=t,this.volume=e,this.loop=i,this.category=r};e.AudioToken=r},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.NAME="Load_Splash",e}(i(200).LoadScreen);e.SplashScreen=o},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(372)),n(i(373)),n(i(9))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(35),r=function(){function t(t){this._interactionManager=t,this._interactionManager.addListener(n.Events.MOUSE_DOWN,this.onMouseDown,this),this._interactionManager.addListener(n.Events.MOUSE_UP,this.onMouseUp,this)}return Object.defineProperty(t,"mouseDown",{get:function(){return t._mouseDown},enumerable:!0,configurable:!0}),t.prototype.onMouseDown=function(){t._mouseDown=!0},t.prototype.onMouseUp=function(){t._mouseDown=!1},t._mouseDown=!1,t}();e.MouseManager=r},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(1),a=i(33),l=i(40),h=i(9),u=i(110),c=i(202),d=i(58);!function(t){t[t.AnimNewIn=0]="AnimNewIn",t[t.AnimCurrentOut=1]="AnimCurrentOut",t[t.AnimSimultaneously=2]="AnimSimultaneously",t[t.AttachNewInFront=3]="AttachNewInFront",t[t.AttachNewBehind=4]="AttachNewBehind",t[t.RemoveCurrent=5]="RemoveCurrent",t[t.LoadAssets=6]="LoadAssets",t[t.UnloadAssets=7]="UnloadAssets",t[t.UnloadUnusedAssets=8]="UnloadUnusedAssets",t[t.ShowLoadScreen=9]="ShowLoadScreen",t[t.HideLoadScreen=10]="HideLoadScreen",t[t.Halt=11]="Halt",t[t.PauseAFrame=12]="PauseAFrame",t[t.Pause1Second=13]="Pause1Second",t[t.Pause5Seconds=14]="Pause5Seconds"}(o=e.TransitionStep||(e.TransitionStep={}));var p=function(t){function e(){var e=t.call(this)||this;return e._currStateId="undefined",e._queuedStateId="undefined",e._debug=!1,e._size=new PIXI.Point,e._stateData=new a.Dictionary,e._isTransitioning=!1,e._simultaneousCheckAnimInComplete=!1,e._simultaneousCheckAnimOutComplete=!1,e._transitionStepIndex=0,PubSub.subscribe(h.STATE_LOAD_STATE,e.onStateLoadRequested.bind(e)),e}return r(e,t),Object.defineProperty(e.prototype,"debug",{set:function(t){this._debug=t},enumerable:!0,configurable:!0}),e.prototype.update=function(t){void 0!==this._currState&&this._currState.update(t)},e.prototype.onResize=function(t){this._size.copy(t),void 0!==this._currState&&this._currState.onResize(this._size)},e.prototype.registerState=function(t,e){this._stateData.setValue(t,{create:e})},e.prototype.startTransition=function(t,e){if(this.log("Transition requested from %c%s %cto %c%s.",d.STYLE_RED_BOLD,this._currStateId,d.STYLE_BLACK,d.STYLE_RED_BOLD,t),this._isTransitioning)this.logW("Transition already in progress, transition to (%s) ignored",t);else{var i=this._stateData.getValue(t);void 0!==i?(this._isTransitioning=!0,this._queuedStateId=t,this._newStateData=i,this._loadScreen=e,this.setAndPerformTransitionStep(0)):this.logE("%c%s%c has not been registered as a state. Please include it in your registerState implementation.",d.STYLE_RED_BOLD,t,d.STYLE_BLACK)}},e.prototype.handleViewAnimateInComplete=function(){if(this.log("handleViewAnimateInComplete"),void 0!==this._newStateToken)switch(this._newStateToken.transitionSteps[this._transitionStepIndex]){case o.AnimNewIn:this.performNextTransitionStep();break;case o.AnimSimultaneously:this._simultaneousCheckAnimInComplete=!0,this._simultaneousCheckAnimInComplete&&this._simultaneousCheckAnimOutComplete&&this.performNextTransitionStep()}},e.prototype.handleViewAnimateOutComplete=function(){if(this.log("handleViewAnimateOutComplete"),void 0!==this._newStateToken)switch(this._newStateToken.transitionSteps[this._transitionStepIndex]){case o.AnimCurrentOut:this.performNextTransitionStep();break;case o.AnimSimultaneously:this._simultaneousCheckAnimOutComplete=!0,this._simultaneousCheckAnimInComplete&&this._simultaneousCheckAnimOutComplete&&this.performNextTransitionStep()}},e.prototype.handleLoadScreenAnimateInComplete=function(){this.log("handleLoadScreenAnimateInComplete"),this.performNextTransitionStep()},e.prototype.handleLoadScreenAnimateOutComplete=function(){this.log("handleLoadScreenAnimateOutComplete"),this.performNextTransitionStep()},e.prototype.handleLoadAssetsComplete=function(){this.log("handleLoadAssetsComplete"),void 0!==this._newStateToken&&this._newStateToken.transitionSteps.length>0&&this._newStateToken.transitionSteps[this._transitionStepIndex]===o.LoadAssets&&this.performNextTransitionStep()},e.prototype.handleUnloadAssetsComplete=function(){this.log("handleUnloadAssetsComplete"),this.performNextTransitionStep()},e.prototype.handleViewReady=function(t){if(this.log("handleViewReady"),void 0!==this._newStateToken)switch(this._newStateToken.transitionSteps[this._transitionStepIndex]){case o.AttachNewInFront:case o.AttachNewBehind:this.performNextTransitionStep()}},e.prototype.handleResumeFromHalt=function(){if(this.log("handleResumeFromHalt"),void 0!==this._newStateToken)switch(this._newStateToken.transitionSteps[this._transitionStepIndex]){case o.Halt:this.performNextTransitionStep()}},e.prototype.performNextTransitionStep=function(){this.log("performNextTransitionStep"),this.setAndPerformTransitionStep(this._transitionStepIndex+1)},e.prototype.setAndPerformTransitionStep=function(t){var e;this.log("setAndPerformTransitionStep"),this._transitionStepIndex=t,this.log("Step index %s out of %s steps",t,this._newStateToken.transitionSteps.length),this._transitionStepIndex<this._newStateToken.transitionSteps.length?(e=this._newStateToken.transitionSteps[this._transitionStepIndex],this.performTransitionStep(e)):(this.log("%cNO MORE STEPS",d.STYLE_PINK_DARK),this._currState=this._newState,this._currStateData=this._newStateData,this._currStateId=this._newStateToken.stateId,this._newStateToken=void 0,this._newState=void 0,this._newStateData=void 0,this._transitionStepIndex=0,this._isTransitioning=!1,this._simultaneousCheckAnimInComplete=!1,this._simultaneousCheckAnimOutComplete=!1)},e.prototype.performTransitionStep=function(t){switch(this.log("performTransitionStep(%c%s%c)",d.STYLE_BLUE_BOLD,o[t],d.STYLE_BLACK),t){case o.AnimNewIn:this.performStepAnimNewIn();break;case o.AnimCurrentOut:this.performStepAnimCurrentOut();break;case o.AnimSimultaneously:this.performStepAnimSimultaneously();break;case o.AttachNewInFront:this.performStepAttachNewView(!0);break;case o.AttachNewBehind:this.performStepAttachNewView(!1);break;case o.RemoveCurrent:this.performStepRemoveCurrent();break;case o.LoadAssets:this.performStepLoadAssets();break;case o.UnloadAssets:this.performStepUnloadAssets();break;case o.UnloadUnusedAssets:this.performStepUnloadUnusedAssets();break;case o.ShowLoadScreen:this.performStepShowLoadScreen();break;case o.HideLoadScreen:this.performStepHideLoadScreen();break;case o.Halt:this.performStepHalt();break;case o.PauseAFrame:this.performPause(.1);break;case o.Pause1Second:this.performPause(1);break;case o.Pause5Seconds:this.performPause(5)}},e.prototype.performStepAnimNewIn=function(){this.log("performStepAnimNewIn"),void 0===this._newState?(this.logE("The new view is null. Ensure step %s or %s is performed before this one.",o.AttachNewInFront,o.AttachNewBehind),this.performNextTransitionStep()):this._newState.animateIn(this.handleViewAnimateInComplete.bind(this))},e.prototype.performStepAnimCurrentOut=function(){this.log("performStepAnimCurrentOut"),void 0===this._currState?(this.logE("The current view is null. Review your transition steps."),this.performNextTransitionStep()):this._currState.animateOut(this.handleViewAnimateOutComplete.bind(this))},e.prototype.performStepAnimSimultaneously=function(){this.log("performStepAnimSimultaneously"),this._simultaneousCheckAnimInComplete=!1,this._simultaneousCheckAnimOutComplete=!1,void 0===this._newState?(this.logE("The new view is null. Ensure step %s or %s is performed before this one.",o.AttachNewInFront,o.AttachNewBehind),this._simultaneousCheckAnimInComplete=!0):this._newState.animateIn(this.handleViewAnimateInComplete.bind(this)),void 0===this._currState?(this.logE("The current view is null. Review your transition steps."),this._simultaneousCheckAnimOutComplete=!0):this._currState.animateOut(this.handleViewAnimateOutComplete.bind(this)),this._simultaneousCheckAnimInComplete&&this._simultaneousCheckAnimOutComplete&&this.performNextTransitionStep()},e.prototype.performStepAttachNewView=function(t){this.log("performStepAttachNewView");var e=new Date;this.log("(%s)\n --- current view: '%s' @ time %s with %s milliseconds",this._newStateToken.stateId,this._currStateId,e.toLocaleTimeString(),e.getMilliseconds()),void 0!==this._newState?(this.logE("New view already exists. Review your transition steps."),this.performNextTransitionStep()):(this._newState=this.createState(this._newStateData),this.addChild(this._newState),this._newState.init(this._size,this._newStateToken.data),t?(this.log("Attaching %c%s%c in %cfront.",d.STYLE_RED_BOLD,this._newStateToken.stateId,d.STYLE_BLACK,d.STYLE_BLUE_BOLD),this.setChildIndex(this._newState,this.children.length-1)):(this.log("Attaching %c%s%c %cbehind.",d.STYLE_RED_BOLD,this._newStateToken.stateId,d.STYLE_BLACK,d.STYLE_BLUE_BOLD),this.setChildIndex(this._newState,0)),this.handleViewReady(this._newStateToken))},e.prototype.performStepRemoveCurrent=function(){this.log("performStepRemoveCurrent"),void 0===this._currState?(this.logE("The current view is null. Review your transition steps."),this.performNextTransitionStep()):(this.removeChild(this._currState),this._currState.destroy({children:!0}),this._currState=void 0,delete this._currState,this.log("Current %c%s%c removed.",d.STYLE_RED_BOLD,this._currStateId,d.STYLE_BLACK),this.performNextTransitionStep())},e.prototype.performStepLoadAssets=function(){var t;if(this.log("performStepLoadAssets"),(t=this.trimLoadList(this._newStateToken.stateId)).length>0){var e=new c.LoadToken(t,this.handleLoadAssetsComplete.bind(this),this._loadScreen);PubSub.publishSync(h.LOAD_ASSETS,e)}else this.logW("No new assets to load found for %c%s%c. Advancing transition.",d.STYLE_RED_BOLD,this._newStateToken.stateId,d.STYLE_BLACK),this.performNextTransitionStep()},e.prototype.performStepUnloadAssets=function(){this.log("performStepUnloadAssets");var t=this.trimUnloadList(this._currStateId,this._newStateToken.stateId);if(void 0!==t)if(t.length>0){var e=new c.LoadToken(t,this.handleUnloadAssetsComplete.bind(this),this._loadScreen);PubSub.publishSync(h.UNLOAD_ASSETS,e)}else this.performNextTransitionStep();else this.performNextTransitionStep()},e.prototype.performStepUnloadUnusedAssets=function(){this.log("performStepUnloadUnusedAssets"),this.performNextTransitionStep()},e.prototype.performStepShowLoadScreen=function(){this.log("performStepShowLoadScreen"),void 0!==this._loadScreen?PubSub.publishSync(h.SHOW_LOAD_SCREEN,{callback:this.handleLoadScreenAnimateInComplete.bind(this),loadScreen:this._loadScreen,firstLoad:!1}):this.logE("Load screen show requested with %c%s%c passed in. Please specify a registered load screen to use.",d.STYLE_RED_BOLD,this._loadScreen,d.STYLE_BLACK)},e.prototype.performStepHideLoadScreen=function(){this.log("performStepHideLoadScreen"),void 0!==this._loadScreen?PubSub.publishSync(h.HIDE_LOAD_SCREEN,{callback:this.handleLoadScreenAnimateOutComplete.bind(this),loadScreen:this._loadScreen}):this.logE("Load screen show requested with %c%s%c passed in. Please specify a registered load screen to use.",d.STYLE_RED_BOLD,this._loadScreen,d.STYLE_BLACK)},e.prototype.performStepHalt=function(){this.log("performStepHalt"),PubSub.publishSync(h.STATE_TRANSITION_HALTED,this._newStateToken)},e.prototype.performPause=function(t){this.log("performPause"),s.TweenLite.delayedCall(t,this.performNextTransitionStep.bind(this))},e.prototype.trimUnloadList=function(t,e){var i,n=this,r=u.AssetMap.getAssetGroup(t),o=u.AssetMap.getAssetGroup(e),s=(i=l.Application.instance.requiredAssets.map((function(t){return t.assetName}))).concat.apply(i,o.map((function(t){return t.assetName}))),a=r.filter((function(t){return s.indexOf(t.assetName)<0}));return this._debug&&a.forEach((function(t){n.log("Added %c%s%c to unload list",d.STYLE_RED_BOLD,t.assetName,d.STYLE_BLACK)})),a},e.prototype.trimLoadList=function(t){for(var e=u.AssetMap.getAssetGroup(t),i=new Array,n=0,r=e;n<r.length;n++){var o=r[n];o.isLoaded()||i.push(o)}return i},e.prototype.createState=function(t){return t.create()},e.prototype.onStateLoadRequested=function(t,e){this._newStateToken=e,this.startTransition(e.stateId,e.loadScreen)},e.prototype.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&d.log.apply(d,[t,{className:"StateManager",color:d.COLOR_RELISH}].concat(e))},e.prototype.logW=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&d.logWarning.apply(d,[t,{className:"StateManager",color:d.COLOR_RELISH}].concat(e))},e.prototype.logE=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];d.logError.apply(d,[t,{className:"StateManager",color:d.COLOR_RELISH}].concat(e))},e}(PIXI.Container);e.StateManager=p},function(t,e,i){var n=i(415),r=i(53),o=i(14)("toStringTag"),s="Arguments"==r(function(){return arguments}());t.exports=n?r:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?i:s?r(e):"Object"==(n=r(e))&&"function"==typeof e.callee?"Arguments":n}},function(t,e,i){"use strict";function n(){var t=o();if(window.screen.height/window.screen.width==1024/768)if(1===window.devicePixelRatio)switch(t){case"PowerVR SGX 535":return e.IPAD;case"PowerVR SGX 543":return e.IPAD_2+","+e.IPAD_MINI;default:return e.IPAD+","+e.IPAD_2+","+e.IPAD_MINI}else switch(t){case"PowerVR SGX 543":return e.IPAD_3;case"PowerVR SGX 554":return e.IPAD_4;case"Apple A7 GPU":return e.IPAD_AIR+","+e.IPAD_MINI_2+","+e.IPAD_MINI_3;case"Apple A8X GPU":return e.IPAD_AIR_2;case"Apple A8 GPU":return e.IPAD_MINI_4;case"Apple A9 GPU":return e.IPAD_5+","+e.IPAD_PRO_9_7;case"Apple A10 GPU":return e.IPAD_6;default:return e.IPAD_3+","+e.IPAD_4+","+e.IPAD_5+","+e.IPAD_6+","+e.IPAD_MINI_2+","+e.IPAD_MINI_3+","+e.IPAD_MINI_4+","+e.IPAD_AIR+","+e.IPAD_AIR_2}else{if(window.screen.height/window.screen.width==1112/834)return"iPad Pro 10.5";if(window.screen.height/window.screen.width==2388/1668)return"iPad Pro 11";if(window.screen.height/window.screen.width!=1366/1024)return"false "+t;switch(t){case"Apple A12X GPU":return e.IPAD_PRO_3RD_GEN;case"Apple A10X GPU":return e.IPAD_PRO_2ND_GEN;case"Apple A9 GPU":case"Apple A9X GPU":return e.IPAD_PRO;default:return e.IPAD_PRO+","+e.IPAD_PRO_2ND_GEN+","+e.IPAD_PRO_3RD_GEN}}}function r(){var t=o(),i=window.devicePixelRatio;if(window.screen.height/window.screen.width==896/414)switch(i){case 2:return e.IPHONE_XR;case 3:return e.IPHONE_XS_MAX;default:return e.IPHONE_XR+","+e.IPHONE_XS_MAX}else if(window.screen.height/window.screen.width==812/375)switch(t){case"Apple A11 GPU":return e.IPHONE_X;case"Apple A12 GPU":return e.IPHONE_XS;default:return e.IPHONE_X+","+e.IPHONE_XS}else if(window.screen.height/window.screen.width==736/414)switch(t){case"Apple A8 GPU":return e.IPHONE_6_PLUS;case"Apple A9 GPU":return e.IPHONE_6S_PLUS;case"Apple A10 GPU":return e.IPHONE_7_PLUS;case"Apple A11 GPU":return e.IPHONE_8_PLUS;default:return e.IPHONE_6_PLUS+","+e.IPHONE_6S_PLUS+","+e.IPHONE_7_PLUS+","+e.IPHONE_8_PLUS}else if(window.screen.height/window.screen.width==667/375)if(2===i)switch(t){case"Apple A8 GPU":return e.IPHONE_6;case"Apple A9 GPU":return e.IPHONE_6S;case"Apple A10 GPU":return e.IPHONE_7;case"Apple A11 GPU":return e.IPHONE_8;default:return e.IPHONE_6+","+e.IPHONE_6S+","+e.IPHONE_7+","+e.IPHONE_8}else switch(t){case"Apple A8 GPU":return e.IPHONE_6_PLUS+" "+e.DISPLAY_ZOOM;case"Apple A9 GPU":return e.IPHONE_6S_PLUS+" "+e.DISPLAY_ZOOM;case"Apple A10 GPU":return e.IPHONE_7_PLUS+" "+e.DISPLAY_ZOOM;case"Apple A11 GPU":return e.IPHONE_8_PLUS+" "+e.DISPLAY_ZOOM;default:return e.IPHONE_6_PLUS+" "+e.DISPLAY_ZOOM+","+e.IPHONE_6S_PLUS+" "+e.DISPLAY_ZOOM+","+e.IPHONE_7_PLUS+" "+e.DISPLAY_ZOOM+","+e.IPHONE_8_PLUS+" "+e.DISPLAY_ZOOM}else if(window.screen.height/window.screen.width==1.775)switch(t){case"PowerVR SGX 543":return e.IPHONE_5_OR_5C;case"Apple A7 GPU":return e.IPHONE_5S;case"Apple A8 GPU":return e.IPHONE_6+" "+e.DISPLAY_ZOOM;case"Apple A9 GPU":return e.IPHONE_SE+","+e.IPHONE_6S+" "+e.DISPLAY_ZOOM;case"Apple A10 GPU":return e.IPHONE_7+" "+e.DISPLAY_ZOOM;case"Apple A11 GPU":return e.IPHONE_8+" "+e.DISPLAY_ZOOM;default:return e.IPHONE_5_OR_5C+","+e.IPHONE_5S+","+e.IPHONE_SE+","+e.IPHONE_6+" "+e.DISPLAY_ZOOM+e.IPHONE_6S+" "+e.DISPLAY_ZOOM+","+e.IPHONE_7+" "+e.DISPLAY_ZOOM+","+e.IPHONE_8+" "+e.DISPLAY_ZOOM}else if(window.screen.height/window.screen.width==1.5&&2===i)switch(t){case"PowerVR SGX 535":return e.IPHONE_4;case"PowerVR SGX 543":return e.IPHONE_4S;default:return e.IPHONE_4+","+e.IPHONE_4S}else{if(window.screen.height/window.screen.width!=1.5||1!==i)return"false "+t;switch(t){case"ALP0298C05":return e.IPHONE_3GS;case"S5L8900":return e.IPHONE_1+","+e.IPHONE_3G;default:return e.IPHONE_1+","+e.IPHONE_3G+","+e.IPHONE_3GS}}}function o(){var t=document.createElement("canvas"),e="";if(t){var i=t.getContext("webgl")||t.getContext("experimental-webgl");if(i){var n=i.getExtension("WEBGL_debug_renderer_info");n&&(e=i.getParameter(n.UNMASKED_RENDERER_WEBGL))}}return e}function s(){return window.devicePixelRatio>1||null===(window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),            (min--moz-device-pixel-ratio: 1.5),            (-o-min-device-pixel-ratio: 3/2),            (min-resolution: 1.5dppx)").matches)}Object.defineProperty(e,"__esModule",{value:!0}),e.IPHONE_XR="iPhone XR",e.IPHONE_XS_MAX="iPhone XS Max",e.IPHONE_X="iPhone X",e.IPHONE_XS="iPhone XS",e.IPHONE_6_PLUS="iPhone 6 Plus",e.IPHONE_6S_PLUS="iPhone 6s Plus",e.IPHONE_7_PLUS="iPhone 7 Plus",e.IPHONE_8_PLUS="iPhone 8 Plus",e.IPHONE_SE="iPhone SE",e.IPHONE_6="iPhone 6",e.IPHONE_6S="iPhone 6s",e.IPHONE_7="iPhone 7",e.IPHONE_8="iPhone 8",e.IPHONE_5_OR_5C="iPhone 5 or 5c",e.IPHONE_5S="iPhone 5s",e.IPHONE_4="iPhone 4",e.IPHONE_4S="iPhone 4s",e.IPHONE_3GS="iPhone 3GS",e.IPHONE_3G="iPhone 3G",e.IPHONE_1="iPhone 1",e.IPAD="iPad",e.IPAD_2="iPad 2",e.IPAD_MINI="iPad Mini",e.IPAD_3="iPad 3",e.IPAD_4="iPad 4",e.IPAD_5="iPad 5",e.IPAD_6="iPad 6",e.IPAD_MINI_2="iPad Mini 2",e.IPAD_MINI_3="iPad Mini 3",e.IPAD_MINI_4="iPad Mini 4",e.IPAD_AIR="iPad Air",e.IPAD_AIR_2="iPad Air 2",e.IPAD_PRO="iPad Pro 12.9",e.IPAD_PRO_9_7="iPad Pro 9.7",e.IPAD_PRO_2ND_GEN="Pro 12.9 (2nd Gen)",e.IPAD_PRO_3RD_GEN="Pro 12.9 (3rd Gen)",e.DISPLAY_ZOOM="(display zoom)",e.getiPadModel=n,e.getiPhoneModel=r,e.getRenderer=o,e.isRetina=s,e.isSupportedDevice=function(t){for(var e=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0,i=(new Array).concat(r().split(",")).concat(n().split(",")),o=!1,a=i.length-1;a>=0;--a)if(t.includes(i[a])){o=!0;break}return e?!1===o:s()},e.isSafari=function(){var t=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS");return""!==t&&t},e.isAmazonOS=function(){return!!/(?:; ([^;)]+) Build\/.*)?\bSilk\/([0-9._-]+)\b(.*\bMobile Safari\b)?/.exec(navigator.userAgent)},e.isMobile=function(){return PIXI.utils.isMobile.any},e.isHTTPS=function(){return"https"===window.location.protocol}},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(9),s=i(35),a=i(211),l=i(2),h=i(43),u=function(t){function e(){var e=t.call(this)||this;return e._isDrag=!1,e._pointerOffset=new PIXI.Point(0,0),e._dragThreshholdSq=225,e.onDragBegin=new Array,e.onDrag=new Array,e.onDragEnd=new Array,e.on(s.Events.POINTER_MOVE,e.onPointerMove),e}return r(e,t),Object.defineProperty(e.prototype,"isDragging",{get:function(){return this._isDrag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visuals",{get:function(){return this._visuals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragThreshhold",{set:function(t){this._dragThreshholdSq=t*t},enumerable:!0,configurable:!0}),e.prototype.attachVisuals=function(){l.setParent(this._visuals,this)},e.prototype.drop=function(){},e.prototype.select=function(){t.prototype.select.call(this),PubSub.publishSync(o.DRAGGABLE_SELECTED,this)},e.prototype.deselect=function(){t.prototype.deselect.call(this),PubSub.publishSync(o.DRAGGABLE_DESELECTED,this)},e.prototype.onPointerDown=function(e){t.prototype.onPointerDown.call(this,e),this._isDrag=!1,this._pointerOffset=h.subtract(this.position,this._eventData.getLocalPosition(this.parent))},e.prototype.onPointerUp=function(e){void 0!==this._eventData&&this._eventData.identifier===e.data.identifier&&(this._isDrag?this.dragEnd():t.prototype.onPointerUp.call(this,e))},e.prototype.onPointerUpOutside=function(e){this._isDrag?this.onPointerUp(e):t.prototype.onPointerUpOutside.call(this,e)},e.prototype.onPointerMove=function(t){if(void 0!==this._eventData&&this._eventData.identifier===t.data.identifier)if(!1===this._isDrag){h.distanceSq(h.add(this._eventData.getLocalPosition(this.parent),this._pointerOffset),this.position)>=this._dragThreshholdSq&&this.dragBegin()}else{for(var e=0;e<this.onDrag.length;++e)this.onDrag[e](this);this.snapToMouse()}},e.prototype.dragBegin=function(){for(var t=0;t<this.onDragBegin.length;++t)this.onDragBegin[t](this);this._isDrag=!0,PubSub.publishSync(o.DRAG_BEGIN,this)},e.prototype.dragEnd=function(){for(var t=0;t<this.onDragEnd.length;++t)this.onDragEnd[t](this);this._isDrag=!1,this._eventData=void 0,PubSub.publishSync(o.DRAG_END,this)},e.prototype.snapToMouse=function(){this._eventData.getLocalPosition(this._visuals.parent,this._visuals.position)},e}(a.Selectable);e.Draggable=u},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(24),s=i(112),a=i(9),l=i(35),h=i(2),u=i(109),c=function(t){function e(){var e=t.call(this)||this;return e._isPointerOver=!1,e._isActive=!0,e._visuals=new PIXI.Container,e.addChild(e._visuals),e.buttonMode=!0,e.interactive=!1,e.on(l.Events.POINTER_OVER,e.onPointerOver),e.on(l.Events.POINTER_DOWN,e.onPointerDown),e.on(l.Events.POINTER_UP,e.onPointerUp),e.on(l.Events.POINTER_UP_OUTSIDE,e.onPointerUpOutside),e.on(l.Events.POINTER_OUT,e.onPointerOut),e.on(l.Events.POINTER_MOVE,e.onPointerMove),e.on(l.Events.TOUCH_MOVE,e.onTouchMove),e._subscriptions=new Array,e._subscriptions.push(PubSub.subscribe(a.DRAG_BEGIN,e.onDragBegin.bind(e))),e._subscriptions.push(PubSub.subscribe(a.DRAG_END,e.onDragEnd.bind(e))),e._subscriptions.push(PubSub.subscribe(a.DRAGGABLE_SELECTED,e.onDraggableSelected.bind(e))),e._subscriptions.push(PubSub.subscribe(a.DRAGGABLE_DESELECTED,e.onDraggableDeselected.bind(e))),e}return r(e,t),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},set:function(t){this._isActive=t},enumerable:!0,configurable:!0}),e.prototype.onFocusBegin=function(){this.playHoverVo()},e.prototype.onFocusEnd=function(){},e.prototype.onFocusActivated=function(){this.addDraggable(this._selected)},e.prototype.getFocusPosition=function(){return this.hitArea instanceof PIXI.Rectangle?this.toGlobal(u.center(this.hitArea)):this.getGlobalPosition()},e.prototype.getFocusSize=function(){var t;return t=this.hitArea instanceof PIXI.Rectangle?h.getGlobalBounds(this,this.hitArea.clone()):h.getGlobalBounds(this),u.size(t)},e.prototype.destroy=function(){for(var e=0;e<this._subscriptions.length;++e)PubSub.unsubscribe(this._subscriptions[e]);t.prototype.destroy.call(this)},e.prototype.playHoverVo=function(){void 0!==this._hoverVo&&PubSub.publishSync(a.PLAY_AUDIO,new s.AudioToken(this._hoverVo,1,!1,o.VO.toString()))},e.prototype.onPointerOver=function(){this._isPointerOver=!0,void 0!==this._selected&&this.playHoverVo()},e.prototype.onPointerDown=function(t){this._eventData=t.data},e.prototype.onPointerUp=function(){void 0!==this._selected&&(this._eventData=void 0,this.addDraggable(this._selected))},e.prototype.onPointerUpOutside=function(){this._eventData=void 0},e.prototype.onPointerOut=function(){this._isPointerOver=!1},e.prototype.onPointerMove=function(t){},e.prototype.onTouchMove=function(t){var e=t.data.getLocalPosition(this);!1===this._isPointerOver?this.hitArea.contains(e.x,e.y)&&this.onPointerOver():!1===this.hitArea.contains(e.x,e.y)&&this.onPointerOut()},e.prototype.addDraggable=function(t){},e.prototype.onDragBegin=function(t,e){this._isActive&&(this.interactive=!0,this._dragged=e)},e.prototype.onDragEnd=function(t,e){this._isActive&&(this._isPointerOver&&void 0!==this._dragged&&this.addDraggable(this._dragged),this.interactive=!1,this._dragged=void 0)},e.prototype.onDraggableSelected=function(t,e){this._isActive&&(this.interactive=!0,this._selected=e)},e.prototype.onDraggableDeselected=function(t,e){this._isActive&&this._selected===e&&(this.interactive=!1,this._selected=void 0)},e}(PIXI.Container);e.Receptacle=c},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this._x=n,this._y=o,this.cb=e,this.scope=i}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e||this.cb,r=i||this.scope;return new t(n,r,this._x,this._y)},t.prototype.set=function(t,e){var i=t||0,n=e||(0!==e?i:0);this._x===i&&this._y===n||(this._x=i,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},n(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(81),o=(n=r)&&n.__esModule?n:{default:n};var s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],c=[];function d(t){return t<0?-1:t>0?1:0}!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var i=0;i<16;i++)for(var n=d(s[t]*s[i]+l[t]*a[i]),r=d(a[t]*s[i]+h[t]*a[i]),p=d(s[t]*l[i]+l[t]*h[i]),f=d(a[t]*l[i]+h[t]*h[i]),g=0;g<16;g++)if(s[g]===n&&a[g]===r&&l[g]===p&&h[g]===f){e.push(g);break}}for(var m=0;m<16;m++){var _=new o.default;_.set(s[m],a[m],l[m],h[m],0,0),u.push(_)}}();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return s[t]},uY:function(t){return a[t]},vX:function(t){return l[t]},vY:function(t){return h[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][p.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?p.S:p.N:2*Math.abs(e)<=Math.abs(t)?t>0?p.E:p.W:e>0?t>0?p.SE:p.SW:t>0?p.NE:p.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=u[p.inv(e)];r.tx=i,r.ty=n,t.append(r)}};e.default=p},function(t,e){t.exports=function(t,e,i){var n;if(i){var r=i.tempAttribState,o=i.attribState;for(n=0;n<r.length;n++)r[n]=!1;for(n=0;n<e.length;n++)r[e[n].attribute.location]=!0;for(n=0;n<o.length;n++)o[n]!==r[n]&&(o[n]=r[n],i.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var s=e[n];t.enableVertexAttribArray(s.attribute.location)}}},function(t,e){var i=function(t,e,i,n,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=n||t.RGBA,this.type=r||t.UNSIGNED_BYTE};i.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=n};var n=!1;i.prototype.uploadData=function(t,e,i){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!n){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");n=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},i.fromSource=function(t,e,n){var r=new i(t);return r.premultiplyAlpha=n||!1,r.upload(e),r},i.fromData=function(t,e,n,r){var o=new i(t);return o.uploadData(e,n,r),o},t.exports=i},function(t,e){var i=function(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};t.exports=function(t,e,n,r){var o=i(t,t.VERTEX_SHADER,e),s=i(t,t.FRAGMENT_SHADER,n),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),r)for(var l in r)t.bindAttribLocation(a,r[l],l);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a}},function(t,e,i){var n=i(83),r=i(127),o=function(t,e,i,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,n||0)};t.exports=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var l=t.getActiveAttrib(e,a),h=n(t,l.type);i[l.name]={type:h,size:r(h),location:t.getAttribLocation(e,l.name),pointer:o}}return i}},function(t,e){var i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(t){return i[t]}},function(t,e,i){var n=i(83),r=i(129);t.exports=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),l=a.name.replace(/\[.*?\]/,""),h=n(t,a.type);i[l]={type:h,size:a.size,location:t.getUniformLocation(e,l),value:r(h,a.size)}}return i}},function(t,e){var i=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};t.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return i(2*e);case"bvec3":return i(3*e);case"bvec4":return i(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},function(t,e){t.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},function(t,e){var i=function(t){return function(){return this.data[t].value}},n={float:function(t,e,i){t.uniform1f(e,i)},vec2:function(t,e,i){t.uniform2f(e,i[0],i[1])},vec3:function(t,e,i){t.uniform3f(e,i[0],i[1],i[2])},vec4:function(t,e,i){t.uniform4f(e,i[0],i[1],i[2],i[3])},int:function(t,e,i){t.uniform1i(e,i)},ivec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},ivec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},ivec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},bool:function(t,e,i){t.uniform1i(e,i)},bvec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},bvec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},bvec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},mat2:function(t,e,i){t.uniformMatrix2fv(e,!1,i)},mat3:function(t,e,i){t.uniformMatrix3fv(e,!1,i)},mat4:function(t,e,i){t.uniformMatrix4fv(e,!1,i)},sampler2D:function(t,e,i){t.uniform1i(e,i)}},r={float:function(t,e,i){t.uniform1fv(e,i)},vec2:function(t,e,i){t.uniform2fv(e,i)},vec3:function(t,e,i){t.uniform3fv(e,i)},vec4:function(t,e,i){t.uniform4fv(e,i)},int:function(t,e,i){t.uniform1iv(e,i)},ivec2:function(t,e,i){t.uniform2iv(e,i)},ivec3:function(t,e,i){t.uniform3iv(e,i)},ivec4:function(t,e,i){t.uniform4iv(e,i)},bool:function(t,e,i){t.uniform1iv(e,i)},bvec2:function(t,e,i){t.uniform2iv(e,i)},bvec3:function(t,e,i){t.uniform3iv(e,i)},bvec4:function(t,e,i){t.uniform4iv(e,i)},sampler2D:function(t,e,i){t.uniform1iv(e,i)}};function o(t,e){return function(i){this.data[t].value=i;var o=this.data[t].location;1===e.size?n[e.type](this.gl,o,i):r[e.type](this.gl,o,i)}}function s(t,e){for(var i=e,n=0;n<t.length-1;n++){var r=i[t[n]]||{data:{}};i[t[n]]=r,i=r}return i}t.exports=function(t,e){var n={data:{}};n.gl=t;for(var r=Object.keys(e),a=0;a<r.length;a++){var l=r[a],h=l.split("."),u=h[h.length-1],c=s(h,n),d=e[l];c.data[u]=d,c.gl=t,Object.defineProperty(c,u,{get:i(u),set:o(u,d)})}return n}},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=c(i(37)),o=i(5),s=c(i(12)),a=c(i(133)),l=c(i(134)),h=c(i(84)),u=i(15);function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this)),n=s.default.TRANSFORM_MODE===o.TRANSFORM_MODE.STATIC?a.default:l.default;return i.tempDisplayObjectParent=null,i.transform=new n,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new h.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new u.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},n(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(r.default);e.default=d,d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(15),s=i(86);var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new o.ObservablePoint(i.onChange,i,0,0),i.scale=new o.ObservablePoint(i.onChange,i,1,1),i.pivot=new o.ObservablePoint(i.onChange,i,0,0),i.skew=new o.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},r(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}}]),e}(((n=s)&&n.__esModule?n:{default:n}).default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(15),s=i(86);var a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new o.Point(0,0),i.scale=new o.Point(1,1),i.skew=new o.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new o.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},r(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(((n=s)&&n.__esModule?n:{default:n}).default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,s||(s=document.createElement("a"));s.href=t;var i=!(t=o.default.parse(s.href)).port&&""===e.port||t.port===e.port;if(t.hostname!==e.hostname||!i||t.protocol!==e.protocol)return"anonymous";return""};var n,r=i(136),o=(n=r)&&n.__esModule?n:{default:n};var s=void 0},function(t,e,i){"use strict";var n=i(251),r=i(252);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){r.isString(t)&&(t=y(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(h),c=["%","/","?",";","#"].concat(u),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=i(253);function y(t,e,i){if(t&&r.isObject(t)&&t instanceof o)return t;var n=new o;return n.parse(t,e,i),n}o.prototype.parse=function(t,e,i){if(!r.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",h=t.split(a);h[0]=h[0].replace(/\\/g,"/");var y=t=h.join(a);if(y=y.trim(),!i&&1===t.split("#").length){var b=l.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=s.exec(y);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,y=y.substr(x.length)}if(i||x||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===y.substr(0,2);!T||x&&m[x]||(y=y.substr(2),this.slashes=!0)}if(!m[x]&&(T||x&&!_[x])){for(var S,E,P=-1,A=0;A<d.length;A++){-1!==(I=y.indexOf(d[A]))&&(-1===P||I<P)&&(P=I)}-1!==(E=-1===P?y.lastIndexOf("@"):y.lastIndexOf("@",P))&&(S=y.slice(0,E),y=y.slice(E+1),this.auth=decodeURIComponent(S)),P=-1;for(A=0;A<c.length;A++){var I;-1!==(I=y.indexOf(c[A]))&&(-1===P||I<P)&&(P=I)}-1===P&&(P=y.length),this.host=y.slice(0,P),y=y.slice(P),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var C=this.hostname.split(/\./),M=(A=0,C.length);A<M;A++){var R=C[A];if(R&&!R.match(p)){for(var k="",L=0,D=R.length;L<D;L++)R.charCodeAt(L)>127?k+="x":k+=R[L];if(!k.match(p)){var N=C.slice(0,A),F=C.slice(A+1),B=R.match(f);B&&(N.push(B[1]),F.unshift(B[2])),F.length&&(y="/"+F.join(".")+y),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=n.toASCII(this.hostname));var U=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+U,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!g[w])for(A=0,M=u.length;A<M;A++){var V=u[A];if(-1!==y.indexOf(V)){var X=encodeURIComponent(V);X===V&&(X=escape(V)),y=y.split(V).join(X)}}var H=y.indexOf("#");-1!==H&&(this.hash=y.substr(H),y=y.slice(0,H));var G=y.indexOf("?");if(-1!==G?(this.search=y.substr(G),this.query=y.substr(G+1),e&&(this.query=v.parse(this.query)),y=y.slice(0,G)):e&&(this.search="",this.query={}),y&&(this.pathname=y),_[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var W=this.search||"";this.path=U+W}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||_[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},o.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(r.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,n=Object.keys(this),s=0;s<n.length;s++){var a=n[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),h=0;h<l.length;h++){var u=l[h];"protocol"!==u&&(i[u]=t[u])}return _[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!_[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var p=c[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",v=i.search||"";i.path=g+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||y||i.host&&t.pathname,w=x,T=i.pathname&&i.pathname.split("/")||[],S=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!_[i.protocol]);if(S&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===T[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=f;else if(f.length)T||(T=[]),T.pop(),T=T.concat(f),i.search=t.search,i.query=t.query;else if(!r.isNullOrUndefined(t.search)){if(S)i.hostname=i.host=T.shift(),(O=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=O.shift(),i.host=i.hostname=O.shift());return i.search=t.search,i.query=t.query,r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var E=T.slice(-1)[0],P=(i.host||t.host||T.length>1)&&("."===E||".."===E)||""===E,A=0,I=T.length;I>=0;I--)"."===(E=T[I])?T.splice(I,1):".."===E?(T.splice(I,1),A++):A&&(T.splice(I,1),A--);if(!x&&!w)for(;A--;A)T.unshift("..");!x||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),P&&"/"!==T.join("/").substr(-1)&&T.push("");var O,C=""===T[0]||T[0]&&"/"===T[0].charAt(0);S&&(i.hostname=i.host=C?"":T.length?T.shift():"",(O=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=O.shift(),i.host=i.hostname=O.shift()));return(x=x||i.host&&T.length)&&!C&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),r.isNull(i.pathname)&&r.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=h(i(41)),o=i(7),s=i(90),a=i(5),l=h(i(135));function h(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var d=function(t){function e(i,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(u(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var o=c(this,t.call(this,i,n));return o.width=i.videoWidth,o.height=i.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=r,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),i.addEventListener("play",o._onPlayStart.bind(o)),i.addEventListener("pause",o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(i.addEventListener("canplay",o._onCanPlay),i.addEventListener("canplaythrough",o._onCanPlay)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(s.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(s.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&s.shared.remove(this.update,this),this.source&&this.source._pixiId&&(r.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,i,n){t._pixiId||(t._pixiId="video_"+(0,o.uid)());var s=o.BaseTextureCache[t._pixiId];return s||(s=new e(t,i,n),r.default.addToCache(s,t._pixiId)),s},e.fromUrl=function(t,i,n,r){var o=document.createElement("video");o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline","");var s=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===n&&0!==s.indexOf("data:")?o.crossOrigin=(0,l.default)(s):n&&(o.crossOrigin="string"==typeof n?n:"anonymous"),Array.isArray(t))for(var a=0;a<t.length;++a)o.appendChild(p(t[a].src||t[a],t[a].mime));else o.appendChild(p(s,t.mime));return o.load(),e.fromVideo(o,i,r)},n(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(s.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(s.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(r.default);function p(t,e){if(!e){var i=t.split("?").shift().toLowerCase();e="video/"+i.substr(i.lastIndexOf(".")+1)}var n=document.createElement("source");return n.src=t,n.type=e,n}e.default=d,d.fromUrls=d.fromUrl},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(122),o=(n=r)&&n.__esModule?n:{default:n};var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var n=e.width,r=e.height;if(i){var s=t.width/2/n,a=t.height/2/r,l=t.x/n+s,h=t.y/r+a;i=o.default.add(i,o.default.NW),this.x0=l+s*o.default.uX(i),this.y0=h+a*o.default.uY(i),i=o.default.add(i,2),this.x1=l+s*o.default.uX(i),this.y1=h+a*o.default.uY(i),i=o.default.add(i,2),this.x2=l+s*o.default.uX(i),this.y2=h+a*o.default.uY(i),i=o.default.add(i,2),this.x3=l+s*o.default.uX(i),this.y3=h+a*o.default.uY(i)}else this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(7),o=i(15),s=i(5),a=c(i(12)),l=c(i(45)),h=c(i(91)),u=c(i(37));function c(t){return t&&t.__esModule?t:{default:t}}var d=new o.Matrix,p=function(t){function e(i,n,h,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return(0,r.sayHello)(i),"number"==typeof n&&(n=Object.assign({width:n,height:h||a.default.RENDER_OPTIONS.height},u)),n=Object.assign({},a.default.RENDER_OPTIONS,n),c.options=n,c.type=s.RENDERER_TYPE.UNKNOWN,c.screen=new o.Rectangle(0,0,n.width,n.height),c.view=n.view||document.createElement("canvas"),c.resolution=n.resolution||a.default.RESOLUTION,c.transparent=n.transparent,c.autoResize=n.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=n.preserveDrawingBuffer,c.clearBeforeRender=n.clearBeforeRender,c.roundPixels=n.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=n.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new l.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,n){n=n||t.getLocalBounds();var r=h.default.create(0|n.width,0|n.height,e,i);return d.tx=-n.x,d.ty=-n.y,this.render(t,r,!1,d,!!t.parent),r},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},n(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,r.hex2string)(t),(0,r.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(u.default);e.default=p},function(t,e,i){"use strict";e.__esModule=!0;var n=o(i(41)),r=o(i(12));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments[2],l=arguments[3];s(this,e);var h=a(this,t.call(this,null,o));return h.resolution=l||r.default.RESOLUTION,h.width=Math.ceil(i),h.height=Math.ceil(n),h.realWidth=h.width*h.resolution,h.realHeight=h.height*h.resolution,h.scaleMode=void 0!==o?o:r.default.SCALE_MODE,h.hasLoaded=!0,h._glRenderTargets={},h._canvasRenderTarget=null,h.valid=!1,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(n.default);e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(12),s=(n=o)&&n.__esModule?n:{default:n};var a=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||s.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},r(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e.default=a},function(t,e,i){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}e.__esModule=!0,e.default=function(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var o=r.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}},function(t,e,i){"use strict";e.__esModule=!0;var n=s(i(145)),r=i(15),o=(i(26),s(i(146)));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new r.Matrix,o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,o.maskSprite=i,o.maskMatrix=n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,n){var r=this.maskSprite,s=this.maskSprite.texture;s.valid&&(s.transform||(s.transform=new o.default(s,0)),s.transform.update(),this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(s.transform.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=s.transform.uClampFrame,t.applyFilter(this,e,i,n))},e}(n.default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=l(i(263)),o=i(7),s=i(5),a=l(i(12));function l(t){return t&&t.__esModule?t:{default:t}}var h={},u=function(){function t(e,i,n){for(var l in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=n||(0,r.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[l]=this.uniformData[l].value,this.uniformData[l].type&&(this.uniformData[l].type=this.uniformData[l].type.toLowerCase());this.glShaders={},h[this.vertexSrc+this.fragmentSrc]||(h[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=h[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=a.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n)},n(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e.default=u},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(81),s=(n=o)&&n.__esModule?n:{default:n};var a=new s.default,l=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._texture=e,this.mapCoord=new s.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],o=t[n+1];e[n]=r*i.a+o*i.c+i.tx,e[n+1]=r*i.b+o*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(a.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(a));var o=e.baseTexture,s=this.uClampFrame,l=this.clampMargin/o.resolution,h=this.clampOffset;return s[0]=(e._frame.x+l+h)/o.width,s[1]=(e._frame.y+l+h)/o.height,s[2]=(e._frame.x+e._frame.width-l+h)/o.width,s[3]=(e._frame.y+e._frame.height-l+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,!0},r(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var n=o(i(18)),r=o(i(92));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var o=0;o<4;o++)this.interleaved[4*o]=this.vertices[2*o],this.interleaved[4*o+1]=this.vertices[2*o+1],this.interleaved[4*o+2]=this.uvs[2*o],this.interleaved[4*o+3]=this.uvs[2*o+1];this.indices=(0,r.default)(1),this.vertexBuffer=n.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new n.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(5),o=i(7);var s={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:r.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},a=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.styleID=0,this.reset(),c(this,e,e)}return t.prototype.clone=function(){var e={};return c(e,this,s),new t(e)},t.prototype.reset=function(){c(this,s,s)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&a.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},n(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=u(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=u(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=u(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();function h(t){return"number"==typeof t?(0,o.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function u(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=h(t[e]);return t}return h(t)}function c(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(e,i,n,r,o,s,a,l,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.style=i,this.width=n,this.height=r,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=h}return t.measureText=function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;n=null==n?i.wordWrap:n;var o=i.toFontString(),s=t.measureFont(o),a=r.getContext("2d");a.font=o;for(var l=n?t.wordWrap(e,i,r):e,h=l.split(/(?:\r\n|\r|\n)/),u=new Array(h.length),c=0,d=0;d<h.length;d++){var p=a.measureText(h[d]).width+(h[d].length-1)*i.letterSpacing;u[d]=p,c=Math.max(c,p)}var f=c+i.strokeThickness;i.dropShadow&&(f+=i.dropShadowDistance);var g=i.lineHeight||s.fontSize+i.strokeThickness,m=Math.max(g,s.fontSize+i.strokeThickness)+(h.length-1)*(g+i.leading);return i.dropShadow&&(m+=i.dropShadowDistance),new t(e,i,f,m,h,u,g+i.leading,c,s)},t.wordWrap=function(e,i){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,r=n.getContext("2d"),o=0,s="",a="",l={},h=i.letterSpacing,u=i.whiteSpace,c=t.collapseSpaces(u),d=t.collapseNewlines(u),p=!c,f=i.wordWrapWidth+h,g=t.tokenize(e),m=0;m<g.length;m++){var _=g[m];if(t.isNewline(_)){if(!d){a+=t.addLine(s),p=!c,s="",o=0;continue}_=" "}if(c){var v=t.isBreakingSpace(_),y=t.isBreakingSpace(s[s.length-1]);if(v&&y)continue}var b=t.getFromCache(_,h,l,r);if(b>f)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(_,i.breakWords))for(var x=_.split(""),w=0;w<x.length;w++){for(var T=x[w],S=1;x[w+S];){var E=x[w+S],P=T[T.length-1];if(t.canBreakChars(P,E,_,w,i.breakWords))break;T+=E,S++}w+=T.length-1;var A=t.getFromCache(T,h,l,r);A+o>f&&(a+=t.addLine(s),p=!1,s="",o=0),s+=T,o+=A}else{s.length>0&&(a+=t.addLine(s),s="",o=0);var I=m===g.length-1;a+=t.addLine(_,!I),p=!1,s="",o=0}else b+o>f&&(p=!1,a+=t.addLine(s),s="",o=0),(s.length>0||!t.isBreakingSpace(_)||p)&&(s+=_,o+=b)}return a+=t.addLine(s,!1)},t.addLine=function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=t.trimRight(e),e=i?e+"\n":e},t.getFromCache=function(t,e,i,n){var r=i[t];if(void 0===r){var o=t.length*e;r=n.measureText(t).width+o,i[t]=r}return r},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var n=e[i];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],n="";if("string"!=typeof e)return i;for(var r=0;r<e.length;r++){var o=e[r];t.isBreakingSpace(o)||t.isNewline(o)?(""!==n&&(i.push(n),n=""),i.push(o)):n+=o}return""!==n&&i.push(n),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,n,r){return!0},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={},n=t._canvas,r=t._context;r.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(r.measureText(o).width),a=Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),l=2*a;a=a*t.BASELINE_MULTIPLIER|0,n.width=s,n.height=l,r.fillStyle="#f00",r.fillRect(0,0,s,l),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(o,0,a);var h=r.getImageData(0,0,s,l).data,u=h.length,c=4*s,d=0,p=0,f=!1;for(d=0;d<a;++d){for(var g=0;g<c;g+=4)if(255!==h[p+g]){f=!0;break}if(f)break;p+=c}for(i.ascent=a-d,p=u-c,f=!1,d=l;d>a;--d){for(var m=0;m<c;m+=4)if(255!==h[p+m]){f=!0;break}if(f)break;p-=c}return i.descent=d-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}},t}();e.default=n;var r=document.createElement("canvas");r.width=r.height=10,n._canvas=r,n._context=r.getContext("2d"),n._fonts={},n.METRICS_STRING="|Éq",n.BASELINE_SYMBOL="M",n.BASELINE_MULTIPLIER=1.4,n._newlines=[10,13],n._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(e,i,n,r,o,s,a,l,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lineWidth=e,this.lineAlignment=h,this.nativeLines=a,this.lineColor=i,this.lineAlpha=n,this._lineTint=i,this.fillColor=r,this.fillAlpha=o,this._fillTint=r,this.fill=s,this.holes=[],this.shape=l,this.type=l.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e.default=n},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(152),o=h(i(45)),s=i(90),a=h(i(12)),l=i(5);function h(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,n,l,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:i||a.default.RENDER_OPTIONS.height,forceCanvas:!!l,sharedTicker:!!h},n)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,r.autoDetectRenderer)(e),this.stage=new o.default,this._ticker=null,this.ticker=e.sharedTicker?s.shared:new s.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t,e){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},n(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,l.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e.default=u},function(t,e,i){"use strict";e.__esModule=!0,e.autoDetectRenderer=function(t,e,i,s){var a=t&&t.forceCanvas;void 0!==s&&(a=s);if(!a&&n.isWebGLSupported())return new o.default(t,e,i);return new r.default(t,e,i)};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(7)),r=s(i(46)),o=s(i(62));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(t,e,i){"use strict";e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var n=i(296);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return a(n).default}});var r=i(297);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return a(r).default}});var o=i(298);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return a(o).default}});var s=i(299);function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return a(s).default}}),i(300),i(301),i(302)},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),o=l(i(156)),s=l(i(157)),a=l(i(158));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i,n,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l=l||5;var h=(0,o.default)(l,!0),u=(0,s.default)(l),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,h,u));return c.resolution=a||r.settings.RESOLUTION,c._quality=0,c.quality=n||4,c.strength=i||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,l=(0,a.default)(r);this.vertexSrc=(0,o.default)(l,!0),this.fragmentSrc=(0,s.default)(l),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var h=t.getRenderTarget(!0),u=e,c=h,d=0;d<this.passes-1;d++){t.applyFilter(this,u,c,!0);var p=c;c=u,u=p}t.applyFilter(this,u,i,n),t.returnRenderTarget(h)}},n(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(r.Filter);e.default=h},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=Math.ceil(t/2),r=n,o="",s=void 0;s=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var l=s.replace("%index%",a);l=l.replace("%sampleIndex%",a-(i-1)+".0"),o+=l,o+="\n"}return r=(r=r.replace("%blur%",o)).replace("%size%",t)};var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){for(var e=n[t],i=e.length,o=r,s="",a=void 0,l=0;l<t;l++){var h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",l);a=l,l>=i&&(a=t-l-1),h=h.replace("%value%",e[a]),s+=h,s+="\n"}return o=(o=o.replace("%blur%",s)).replace("%size%",t)};var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},r=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;for(;i>e;)i-=2;return i}},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),o=l(i(156)),s=l(i(157)),a=l(i(158));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i,n,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l=l||5;var h=(0,o.default)(l,!1),u=(0,s.default)(l),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,h,u));return c.resolution=a||r.settings.RESOLUTION,c._quality=0,c.quality=n||4,c.strength=i||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,l=(0,a.default)(r);this.vertexSrc=(0,o.default)(l,!1),this.fragmentSrc=(0,s.default)(l),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var h=t.getRenderTarget(!0),u=e,c=h,d=0;d<this.passes-1;d++){t.applyFilter(this,u,c,!0);var p=c;c=u,u=p}t.applyFilter(this,u,i,n),t.returnRenderTarget(h)}},n(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(r.Filter);e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.global=new r.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},n(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();e.default=n},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},n(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();e.default=r,r.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e,i){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,i){"use strict";e.__esModule=!0,e.parse=s,e.default=function(){return function(t,e){if(t.data&&t.type===r.Resource.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var i=t.isDataUrl?"":n.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var o=t.data.getElementsByTagName("page"),a={},l=function(i){a[i.metadata.pageFile]=i.texture,Object.keys(a).length===o.length&&(s(t,a),e())},h=0;h<o.length;++h){var u=o[h].getAttribute("file"),c=i+u,d=!1;for(var p in this.resources){var f=this.resources[p];if(f.url===c){f.metadata.pageFile=u,f.texture?l(f):f.onAfterMiddleware.add(l),d=!0;break}}if(!d){var g={crossOrigin:t.crossOrigin,loadType:r.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(c,g,l)}}}else e();else e()}};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(26)),r=i(49),o=i(154);function s(t,e){t.bitmapFont=o.BitmapText.registerFont(t.data,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,i,n){void 0===i&&(i=!1),r(this,t),this._fn=e,this._once=i,this._thisArg=n,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){r(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,e.default=a,t.exports=e.default},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},o=14;o--;)r[i.key[o]]=n[o]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,(function(t,e,n){e&&(r[i.q.name][e]=n)})),r}},function(t,e,i){"use strict";function n(){}function r(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}e.__esModule=!0,e.eachSeries=function(t,e,i,n){var r=0,o=t.length;!function s(a){a||r===o?i&&i(a):n?setTimeout((function(){e(t[r++],s)}),1):e(t[r++],s)}()},e.queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,o={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){s(t,!1,e)},kill:function(){i=0,o.drain=n,o.started=!1,o._tasks=[]},unshift:function(t,e){s(t,!0,e)},process:function(){for(;!o.paused&&i<o.concurrency&&o._tasks.length;){var e=o._tasks.shift();0===o._tasks.length&&o.empty(),(i+=1)===o.concurrency&&o.saturated(),t(e.data,r(a(e)))}},length:function(){return o._tasks.length},running:function(){return i},idle:function(){return o._tasks.length+i===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var t=1;t<=o.concurrency;t++)o.process()}}};function s(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(o.started=!0,null==t&&o.idle())setTimeout((function(){return o.drain()}),1);else{var r={data:t,callback:"function"==typeof i?i:n};e?o._tasks.unshift(r):o._tasks.push(r),setTimeout((function(){return o.process()}),1)}}function a(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&o.error(arguments[0],t.data),i<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}return o}},function(t,e,i){"use strict";e.__esModule=!0,e.encodeBinary=n;function n(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],r=[0,0,0,0],o=0;o<n.length;++o)i<t.length?n[o]=255&t.charCodeAt(i++):n[o]=0;switch(r[0]=n[0]>>2,r[1]=(3&n[0])<<4|n[1]>>4,r[2]=(15&n[1])<<2|n[2]>>6,r[3]=63&n[2],i-(t.length-1)){case 2:r[3]=64,r[2]=64;break;case 1:r[3]=64}for(var s=0;s<r.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(r[s])}return e}t.exports.default=n},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){var i=t.name+"_image";if(t.data&&t.type===r.Resource.TYPE.JSON&&t.data.frames&&!this.resources[i]){var n={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},o=l(t,this.baseUrl);this.add(i,o,n,(function(i){if(i.error)e(i.error);else{var n=new a.Spritesheet(i.texture.baseTexture,t.data,t.url);n.parse((function(){t.spritesheet=n,t.textures=n.textures,e()}))}}))}else e()}},e.getResourcePath=l;var n,r=i(49),o=i(136),s=(n=o)&&n.__esModule?n:{default:n},a=i(6);function l(t,e){return t.isDataUrl?t.data.meta.image:s.default.resolve(t.url.replace(e,""),t.data.meta.image)}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===r.Resource.TYPE.IMAGE&&(t.texture=s.default.fromLoader(t.data,t.url,t.name)),e()}};var n,r=i(49),o=i(31),s=(n=o)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(50),o=(n=r)&&n.__esModule?n:{default:n};var s=function(t){function e(i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return s._ready=!0,s.verticesX=n||10,s.verticesY=r||10,s.drawMode=o.default.DRAW_MODES.TRIANGLES,s.refresh(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,i=[],n=[],r=[],o=this.verticesX-1,s=this.verticesY-1,a=t.width/o,l=t.height/s,h=0;h<e;h++){var u=h%this.verticesX,c=h/this.verticesX|0;i.push(u*a,c*l),n.push(u/o,c/s)}for(var d=o*s,p=0;p<d;p++){var f=p%o,g=p/o|0,m=g*this.verticesX+f,_=g*this.verticesX+f+1,v=(g+1)*this.verticesX+f,y=(g+1)*this.verticesX+f+1;r.push(m,_,v),r.push(_,y,v)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(n),this.colors=new Float32Array([]),this.indices=new Uint16Array(r),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){o.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(o.default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();e.default=n},function(t,e){var i,n,r,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){!function(t){var e,i,n,r=function(){function t(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var n=0;n<e.length;n++)this.timelineIds[e[n].getPropertyId()]=!0;this.duration=i}return t.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},t.prototype.apply=function(t,e,i,n,r,o,s,a){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var l=this.timelines,h=0,u=l.length;h<u;h++)l[h].apply(t,e,i,r,o,s,a)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var n=0,r=t.length/i-2;if(0==r)return i;for(var o=r>>>1;;){if(t[(o+1)*i]<=e?n=o+1:r=o,n==r)return(n+1)*i;o=n+r>>>1}},t.linearSearch=function(t,e,i){for(var n=0,r=t.length-i;n<=r;n+=i)if(t[n]>e)return n;return-1},t}();t.Animation=r,function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(e=t.MixBlend||(t.MixBlend={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(i=t.MixDirection||(t.MixDirection={})),function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(n=t.TimelineType||(t.TimelineType={}));var s=function(){function e(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var i=t*e.BEZIER_SIZE;if(i==this.curves.length)return e.LINEAR;var n=this.curves[i];return n==e.LINEAR?e.LINEAR:n==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,i,n,r,o){var s=.03*(2*-i+r),a=.03*(2*-n+o),l=.006*(3*(i-r)+1),h=.006*(3*(n-o)+1),u=2*s+l,c=2*a+h,d=.3*i+s+.16666667*l,p=.3*n+a+.16666667*h,f=t*e.BEZIER_SIZE,g=this.curves;g[f++]=e.BEZIER;for(var m=d,_=p,v=f+e.BEZIER_SIZE-1;f<v;f+=2)g[f]=m,g[f+1]=_,d+=u,p+=c,u+=l,c+=h,m+=d,_+=p},e.prototype.getCurvePercent=function(i,n){n=t.MathUtils.clamp(n,0,1);var r=this.curves,o=i*e.BEZIER_SIZE,s=r[o];if(s==e.LINEAR)return n;if(s==e.STEPPED)return 0;for(var a=0,l=++o,h=o+e.BEZIER_SIZE-1;o<h;o+=2)if((a=r[o])>=n){var u=void 0,c=void 0;return o==l?(u=0,c=0):(u=r[o-2],c=r[o-1]),c+(r[o+1]-c)*(n-u)/(a-u)}var d=r[o-1];return d+(1-d)*(n-a)/(1-a)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=s;var a=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e<<1),n}return o(s,i),s.prototype.getPropertyId=function(){return(n.rotate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+s.ROTATION]=i},s.prototype.apply=function(t,i,n,o,a,l,h){var u=this.frames,c=t.bones[this.boneIndex];if(c.active)if(n<u[0])switch(l){case e.setup:return void(c.rotation=c.data.rotation);case e.first:var d=c.data.rotation-c.rotation;c.rotation+=(d-360*(16384-(16384.499999999996-d/360|0)))*a}else if(n>=u[u.length-s.ENTRIES]){var p=u[u.length+s.PREV_ROTATION];switch(l){case e.setup:c.rotation=c.data.rotation+p*a;break;case e.first:case e.replace:p+=c.data.rotation-c.rotation,p-=360*(16384-(16384.499999999996-p/360|0));case e.add:c.rotation+=p*a}}else{var f=r.binarySearch(u,n,s.ENTRIES),g=u[f+s.PREV_ROTATION],m=u[f],_=this.getCurvePercent((f>>1)-1,1-(n-m)/(u[f+s.PREV_TIME]-m)),v=u[f+s.ROTATION]-g;switch(v=g+(v-360*(16384-(16384.499999999996-v/360|0)))*_,l){case e.setup:c.rotation=c.data.rotation+(v-360*(16384-(16384.499999999996-v/360|0)))*a;break;case e.first:case e.replace:v+=c.data.rotation-c.rotation;case e.add:c.rotation+=(v-360*(16384-(16384.499999999996-v/360|0)))*a}}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_ROTATION=-1,s.ROTATION=1,s}(s);t.RotateTimeline=a;var l=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return o(s,i),s.prototype.getPropertyId=function(){return(n.translate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,i,n){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.X]=i,this.frames[t+s.Y]=n},s.prototype.apply=function(t,i,n,o,a,l,h){var u=this.frames,c=t.bones[this.boneIndex];if(c.active)if(n<u[0])switch(l){case e.setup:return c.x=c.data.x,void(c.y=c.data.y);case e.first:c.x+=(c.data.x-c.x)*a,c.y+=(c.data.y-c.y)*a}else{var d=0,p=0;if(n>=u[u.length-s.ENTRIES])d=u[u.length+s.PREV_X],p=u[u.length+s.PREV_Y];else{var f=r.binarySearch(u,n,s.ENTRIES);d=u[f+s.PREV_X],p=u[f+s.PREV_Y];var g=u[f],m=this.getCurvePercent(f/s.ENTRIES-1,1-(n-g)/(u[f+s.PREV_TIME]-g));d+=(u[f+s.X]-d)*m,p+=(u[f+s.Y]-p)*m}switch(l){case e.setup:c.x=c.data.x+d*a,c.y=c.data.y+p*a;break;case e.first:case e.replace:c.x+=(c.data.x+d-c.x)*a,c.y+=(c.data.y+p-c.y)*a;break;case e.add:c.x+=d*a,c.y+=p*a}}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_X=-2,s.PREV_Y=-1,s.X=1,s.Y=2,s}(s);t.TranslateTimeline=l;var h=function(s){function a(t){return s.call(this,t)||this}return o(a,s),a.prototype.getPropertyId=function(){return(n.scale<<24)+this.boneIndex},a.prototype.apply=function(n,o,s,l,h,u,c){var d=this.frames,p=n.bones[this.boneIndex];if(p.active)if(s<d[0])switch(u){case e.setup:return p.scaleX=p.data.scaleX,void(p.scaleY=p.data.scaleY);case e.first:p.scaleX+=(p.data.scaleX-p.scaleX)*h,p.scaleY+=(p.data.scaleY-p.scaleY)*h}else{var f=0,g=0;if(s>=d[d.length-a.ENTRIES])f=d[d.length+a.PREV_X]*p.data.scaleX,g=d[d.length+a.PREV_Y]*p.data.scaleY;else{var m=r.binarySearch(d,s,a.ENTRIES);f=d[m+a.PREV_X],g=d[m+a.PREV_Y];var _=d[m],v=this.getCurvePercent(m/a.ENTRIES-1,1-(s-_)/(d[m+a.PREV_TIME]-_));f=(f+(d[m+a.X]-f)*v)*p.data.scaleX,g=(g+(d[m+a.Y]-g)*v)*p.data.scaleY}if(1==h)u==e.add?(p.scaleX+=f-p.data.scaleX,p.scaleY+=g-p.data.scaleY):(p.scaleX=f,p.scaleY=g);else{var y=0,b=0;if(c==i.mixOut)switch(u){case e.setup:y=p.data.scaleX,b=p.data.scaleY,p.scaleX=y+(Math.abs(f)*t.MathUtils.signum(y)-y)*h,p.scaleY=b+(Math.abs(g)*t.MathUtils.signum(b)-b)*h;break;case e.first:case e.replace:y=p.scaleX,b=p.scaleY,p.scaleX=y+(Math.abs(f)*t.MathUtils.signum(y)-y)*h,p.scaleY=b+(Math.abs(g)*t.MathUtils.signum(b)-b)*h;break;case e.add:y=p.scaleX,b=p.scaleY,p.scaleX=y+(Math.abs(f)*t.MathUtils.signum(y)-p.data.scaleX)*h,p.scaleY=b+(Math.abs(g)*t.MathUtils.signum(b)-p.data.scaleY)*h}else switch(u){case e.setup:y=Math.abs(p.data.scaleX)*t.MathUtils.signum(f),b=Math.abs(p.data.scaleY)*t.MathUtils.signum(g),p.scaleX=y+(f-y)*h,p.scaleY=b+(g-b)*h;break;case e.first:case e.replace:y=Math.abs(p.scaleX)*t.MathUtils.signum(f),b=Math.abs(p.scaleY)*t.MathUtils.signum(g),p.scaleX=y+(f-y)*h,p.scaleY=b+(g-b)*h;break;case e.add:y=t.MathUtils.signum(f),b=t.MathUtils.signum(g),p.scaleX=Math.abs(p.scaleX)*y+(f-Math.abs(p.data.scaleX)*y)*h,p.scaleY=Math.abs(p.scaleY)*b+(g-Math.abs(p.data.scaleY)*b)*h}}}},a}(l);t.ScaleTimeline=h;var u=function(t){function i(e){return t.call(this,e)||this}return o(i,t),i.prototype.getPropertyId=function(){return(n.shear<<24)+this.boneIndex},i.prototype.apply=function(t,n,o,s,a,l,h){var u=this.frames,c=t.bones[this.boneIndex];if(c.active)if(o<u[0])switch(l){case e.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case e.first:c.shearX+=(c.data.shearX-c.shearX)*a,c.shearY+=(c.data.shearY-c.shearY)*a}else{var d=0,p=0;if(o>=u[u.length-i.ENTRIES])d=u[u.length+i.PREV_X],p=u[u.length+i.PREV_Y];else{var f=r.binarySearch(u,o,i.ENTRIES);d=u[f+i.PREV_X],p=u[f+i.PREV_Y];var g=u[f],m=this.getCurvePercent(f/i.ENTRIES-1,1-(o-g)/(u[f+i.PREV_TIME]-g));d+=(u[f+i.X]-d)*m,p+=(u[f+i.Y]-p)*m}switch(l){case e.setup:c.shearX=c.data.shearX+d*a,c.shearY=c.data.shearY+p*a;break;case e.first:case e.replace:c.shearX+=(c.data.shearX+d-c.shearX)*a,c.shearY+=(c.data.shearY+p-c.shearY)*a;break;case e.add:c.shearX+=d*a,c.shearY+=p*a}}},i}(l);t.ShearTimeline=u;var c=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return o(s,i),s.prototype.getPropertyId=function(){return(n.color<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,i,n,r,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=i,this.frames[t+s.G]=n,this.frames[t+s.B]=r,this.frames[t+s.A]=o},s.prototype.apply=function(t,i,n,o,a,l,h){var u=t.slots[this.slotIndex];if(u.bone.active){var c=this.frames;if(n<c[0])switch(l){case e.setup:return void u.color.setFromColor(u.data.color);case e.first:var d=u.color,p=u.data.color;d.add((p.r-d.r)*a,(p.g-d.g)*a,(p.b-d.b)*a,(p.a-d.a)*a)}else{var f=0,g=0,m=0,_=0;if(n>=c[c.length-s.ENTRIES]){var v=c.length;f=c[v+s.PREV_R],g=c[v+s.PREV_G],m=c[v+s.PREV_B],_=c[v+s.PREV_A]}else{var y=r.binarySearch(c,n,s.ENTRIES);f=c[y+s.PREV_R],g=c[y+s.PREV_G],m=c[y+s.PREV_B],_=c[y+s.PREV_A];var b=c[y],x=this.getCurvePercent(y/s.ENTRIES-1,1-(n-b)/(c[y+s.PREV_TIME]-b));f+=(c[y+s.R]-f)*x,g+=(c[y+s.G]-g)*x,m+=(c[y+s.B]-m)*x,_+=(c[y+s.A]-_)*x}if(1==a)u.color.set(f,g,m,_);else{d=u.color;l==e.setup&&d.setFromColor(u.data.color),d.add((f-d.r)*a,(g-d.g)*a,(m-d.b)*a,(_-d.a)*a)}}}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_R=-4,s.PREV_G=-3,s.PREV_B=-2,s.PREV_A=-1,s.R=1,s.G=2,s.B=3,s.A=4,s}(s);t.ColorTimeline=c;var d=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return o(s,i),s.prototype.getPropertyId=function(){return(n.twoColor<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,i,n,r,o,a,l,h){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=i,this.frames[t+s.G]=n,this.frames[t+s.B]=r,this.frames[t+s.A]=o,this.frames[t+s.R2]=a,this.frames[t+s.G2]=l,this.frames[t+s.B2]=h},s.prototype.apply=function(t,i,n,o,a,l,h){var u=t.slots[this.slotIndex];if(u.bone.active){var c=this.frames;if(n<c[0])switch(l){case e.setup:return u.color.setFromColor(u.data.color),void u.darkColor.setFromColor(u.data.darkColor);case e.first:var d=u.color,p=u.darkColor,f=u.data.color,g=u.data.darkColor;d.add((f.r-d.r)*a,(f.g-d.g)*a,(f.b-d.b)*a,(f.a-d.a)*a),p.add((g.r-p.r)*a,(g.g-p.g)*a,(g.b-p.b)*a,0)}else{var m=0,_=0,v=0,y=0,b=0,x=0,w=0;if(n>=c[c.length-s.ENTRIES]){var T=c.length;m=c[T+s.PREV_R],_=c[T+s.PREV_G],v=c[T+s.PREV_B],y=c[T+s.PREV_A],b=c[T+s.PREV_R2],x=c[T+s.PREV_G2],w=c[T+s.PREV_B2]}else{var S=r.binarySearch(c,n,s.ENTRIES);m=c[S+s.PREV_R],_=c[S+s.PREV_G],v=c[S+s.PREV_B],y=c[S+s.PREV_A],b=c[S+s.PREV_R2],x=c[S+s.PREV_G2],w=c[S+s.PREV_B2];var E=c[S],P=this.getCurvePercent(S/s.ENTRIES-1,1-(n-E)/(c[S+s.PREV_TIME]-E));m+=(c[S+s.R]-m)*P,_+=(c[S+s.G]-_)*P,v+=(c[S+s.B]-v)*P,y+=(c[S+s.A]-y)*P,b+=(c[S+s.R2]-b)*P,x+=(c[S+s.G2]-x)*P,w+=(c[S+s.B2]-w)*P}if(1==a)u.color.set(m,_,v,y),u.darkColor.set(b,x,w,1);else{d=u.color,p=u.darkColor;l==e.setup&&(d.setFromColor(u.data.color),p.setFromColor(u.data.darkColor)),d.add((m-d.r)*a,(_-d.g)*a,(v-d.b)*a,(y-d.a)*a),p.add((b-p.r)*a,(x-p.g)*a,(w-p.b)*a,0)}}}},s.ENTRIES=8,s.PREV_TIME=-8,s.PREV_R=-7,s.PREV_G=-6,s.PREV_B=-5,s.PREV_A=-4,s.PREV_R2=-3,s.PREV_G2=-2,s.PREV_B2=-1,s.R=1,s.G=2,s.B=3,s.A=4,s.R2=5,s.G2=6,s.B2=7,s}(s);t.TwoColorTimeline=d;var p=function(){function o(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return o.prototype.getPropertyId=function(){return(n.attachment<<24)+this.slotIndex},o.prototype.getFrameCount=function(){return this.frames.length},o.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},o.prototype.apply=function(t,n,o,s,a,l,h){var u=t.slots[this.slotIndex];if(u.bone.active)if(h!=i.mixOut||l!=e.setup){var c=this.frames;if(o<c[0]){if(l==e.setup||l==e.first){var d=u.data.attachmentName;u.setAttachment(null==d?null:t.getAttachment(this.slotIndex,d))}}else{var p=0;p=o>=c[c.length-1]?c.length-1:r.binarySearch(c,o,1)-1;var f=this.attachmentNames[p];t.slots[this.slotIndex].setAttachment(null==f?null:t.getAttachment(this.slotIndex,f))}}else{var g=u.data.attachmentName;u.setAttachment(null==g?null:t.getAttachment(this.slotIndex,g))}},o}();t.AttachmentTimeline=p;var f=null,g=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e),n.frameVertices=new Array(e),null==f&&(f=t.Utils.newFloatArray(64)),n}return o(s,i),s.prototype.getPropertyId=function(){return(n.deform<<27)+ +this.attachment.id+this.slotIndex},s.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},s.prototype.apply=function(i,n,o,s,a,l,h){var u=i.slots[this.slotIndex];if(u.bone.active){var c=u.getAttachment();if(c instanceof t.VertexAttachment&&c.deformAttachment==this.attachment){var d=u.deform;0==d.length&&(l=e.setup);var p=this.frameVertices,f=p[0].length,g=this.frames;if(o<g[0]){var m=c;switch(l){case e.setup:return void(d.length=0);case e.first:if(1==a){d.length=0;break}var _=t.Utils.setArraySize(d,f);if(null==m.bones)for(var v=m.vertices,y=0;y<f;y++)_[y]+=(v[y]-_[y])*a;else{a=1-a;for(y=0;y<f;y++)_[y]*=a}}}else{var b=t.Utils.setArraySize(d,f);if(o>=g[g.length-1]){var x=p[g.length-1];if(1==a)if(l==e.add)if(null==(m=c).bones){v=m.vertices;for(var w=0;w<f;w++)b[w]+=x[w]-v[w]}else for(var T=0;T<f;T++)b[T]+=x[T];else t.Utils.arrayCopy(x,0,b,0,f);else switch(l){case e.setup:var S=c;if(null==S.bones){v=S.vertices;for(var E=0;E<f;E++){var P=v[E];b[E]=P+(x[E]-P)*a}}else for(var A=0;A<f;A++)b[A]=x[A]*a;break;case e.first:case e.replace:for(var I=0;I<f;I++)b[I]+=(x[I]-b[I])*a;break;case e.add:if(null==(m=c).bones){v=m.vertices;for(var O=0;O<f;O++)b[O]+=(x[O]-v[O])*a}else for(var C=0;C<f;C++)b[C]+=x[C]*a}}else{var M=r.binarySearch(g,o),R=p[M-1],k=p[M],L=g[M],D=this.getCurvePercent(M-1,1-(o-L)/(g[M-1]-L));if(1==a)if(l==e.add)if(null==(m=c).bones){v=m.vertices;for(var N=0;N<f;N++){var F=R[N];b[N]+=F+(k[N]-F)*D-v[N]}}else for(var B=0;B<f;B++){F=R[B];b[B]+=F+(k[B]-F)*D}else for(var U=0;U<f;U++){F=R[U];b[U]=F+(k[U]-F)*D}else switch(l){case e.setup:var j=c;if(null==j.bones){v=j.vertices;for(var V=0;V<f;V++){F=R[V],P=v[V];b[V]=P+(F+(k[V]-F)*D-P)*a}}else for(var X=0;X<f;X++){F=R[X];b[X]=(F+(k[X]-F)*D)*a}break;case e.first:case e.replace:for(var H=0;H<f;H++){F=R[H];b[H]+=(F+(k[H]-F)*D-b[H])*a}break;case e.add:if(null==(m=c).bones){v=m.vertices;for(var G=0;G<f;G++){F=R[G];b[G]+=(F+(k[G]-F)*D-v[G])*a}}else for(var W=0;W<f;W++){F=R[W];b[W]+=(F+(k[W]-F)*D)*a}}}}}}},s}(s);t.DeformTimeline=g;var m=function(){function e(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return e.prototype.getPropertyId=function(){return n.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,i,n,o,s,a){if(null!=n){var l=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,n,o,s,a),e=-1;else if(e>=l[h-1])return;if(!(i<l[0])){var u=0;if(e<l[0])u=0;else for(var c=l[u=r.binarySearch(l,e)];u>0&&l[u-1]==c;)u--;for(;u<h&&i>=l[u];u++)n.push(this.events[u])}}},e}();t.EventTimeline=m;var _=function(){function o(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return o.prototype.getPropertyId=function(){return n.drawOrder<<24},o.prototype.getFrameCount=function(){return this.frames.length},o.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},o.prototype.apply=function(n,o,s,a,l,h,u){var c=n.drawOrder,d=n.slots;if(u!=i.mixOut||h!=e.setup){var p=this.frames;if(s<p[0])h!=e.setup&&h!=e.first||t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length);else{var f=0;f=s>=p[p.length-1]?p.length-1:r.binarySearch(p,s)-1;var g=this.drawOrders[f];if(null==g)t.Utils.arrayCopy(d,0,c,0,d.length);else for(var m=0,_=g.length;m<_;m++)c[m]=d[g[m]]}}else t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length)},o}();t.DrawOrderTimeline=_;var v=function(s){function a(e){var i=s.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return o(a,s),a.prototype.getPropertyId=function(){return(n.ikConstraint<<24)+this.ikConstraintIndex},a.prototype.setFrame=function(t,e,i,n,r,o,s){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.MIX]=i,this.frames[t+a.SOFTNESS]=n,this.frames[t+a.BEND_DIRECTION]=r,this.frames[t+a.COMPRESS]=o?1:0,this.frames[t+a.STRETCH]=s?1:0},a.prototype.apply=function(t,n,o,s,l,h,u){var c=this.frames,d=t.ikConstraints[this.ikConstraintIndex];if(d.active)if(o<c[0])switch(h){case e.setup:return d.mix=d.data.mix,d.softness=d.data.softness,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,void(d.stretch=d.data.stretch);case e.first:d.mix+=(d.data.mix-d.mix)*l,d.softness+=(d.data.softness-d.softness)*l,d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch}else if(o>=c[c.length-a.ENTRIES])h==e.setup?(d.mix=d.data.mix+(c[c.length+a.PREV_MIX]-d.data.mix)*l,d.softness=d.data.softness+(c[c.length+a.PREV_SOFTNESS]-d.data.softness)*l,u==i.mixOut?(d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch):(d.bendDirection=c[c.length+a.PREV_BEND_DIRECTION],d.compress=0!=c[c.length+a.PREV_COMPRESS],d.stretch=0!=c[c.length+a.PREV_STRETCH])):(d.mix+=(c[c.length+a.PREV_MIX]-d.mix)*l,d.softness+=(c[c.length+a.PREV_SOFTNESS]-d.softness)*l,u==i.mixIn&&(d.bendDirection=c[c.length+a.PREV_BEND_DIRECTION],d.compress=0!=c[c.length+a.PREV_COMPRESS],d.stretch=0!=c[c.length+a.PREV_STRETCH]));else{var p=r.binarySearch(c,o,a.ENTRIES),f=c[p+a.PREV_MIX],g=c[p+a.PREV_SOFTNESS],m=c[p],_=this.getCurvePercent(p/a.ENTRIES-1,1-(o-m)/(c[p+a.PREV_TIME]-m));h==e.setup?(d.mix=d.data.mix+(f+(c[p+a.MIX]-f)*_-d.data.mix)*l,d.softness=d.data.softness+(g+(c[p+a.SOFTNESS]-g)*_-d.data.softness)*l,u==i.mixOut?(d.bendDirection=d.data.bendDirection,d.compress=d.data.compress,d.stretch=d.data.stretch):(d.bendDirection=c[p+a.PREV_BEND_DIRECTION],d.compress=0!=c[p+a.PREV_COMPRESS],d.stretch=0!=c[p+a.PREV_STRETCH])):(d.mix+=(f+(c[p+a.MIX]-f)*_-d.mix)*l,d.softness+=(g+(c[p+a.SOFTNESS]-g)*_-d.softness)*l,u==i.mixIn&&(d.bendDirection=c[p+a.PREV_BEND_DIRECTION],d.compress=0!=c[p+a.PREV_COMPRESS],d.stretch=0!=c[p+a.PREV_STRETCH]))}},a.ENTRIES=6,a.PREV_TIME=-6,a.PREV_MIX=-5,a.PREV_SOFTNESS=-4,a.PREV_BEND_DIRECTION=-3,a.PREV_COMPRESS=-2,a.PREV_STRETCH=-1,a.MIX=1,a.SOFTNESS=2,a.BEND_DIRECTION=3,a.COMPRESS=4,a.STRETCH=5,a}(s);t.IkConstraintTimeline=v;var y=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return o(s,i),s.prototype.getPropertyId=function(){return(n.transformConstraint<<24)+this.transformConstraintIndex},s.prototype.setFrame=function(t,e,i,n,r,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=i,this.frames[t+s.TRANSLATE]=n,this.frames[t+s.SCALE]=r,this.frames[t+s.SHEAR]=o},s.prototype.apply=function(t,i,n,o,a,l,h){var u=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(c.active)if(n<u[0]){var d=c.data;switch(l){case e.setup:return c.rotateMix=d.rotateMix,c.translateMix=d.translateMix,c.scaleMix=d.scaleMix,void(c.shearMix=d.shearMix);case e.first:c.rotateMix+=(d.rotateMix-c.rotateMix)*a,c.translateMix+=(d.translateMix-c.translateMix)*a,c.scaleMix+=(d.scaleMix-c.scaleMix)*a,c.shearMix+=(d.shearMix-c.shearMix)*a}}else{var p=0,f=0,g=0,m=0;if(n>=u[u.length-s.ENTRIES]){var _=u.length;p=u[_+s.PREV_ROTATE],f=u[_+s.PREV_TRANSLATE],g=u[_+s.PREV_SCALE],m=u[_+s.PREV_SHEAR]}else{var v=r.binarySearch(u,n,s.ENTRIES);p=u[v+s.PREV_ROTATE],f=u[v+s.PREV_TRANSLATE],g=u[v+s.PREV_SCALE],m=u[v+s.PREV_SHEAR];var y=u[v],b=this.getCurvePercent(v/s.ENTRIES-1,1-(n-y)/(u[v+s.PREV_TIME]-y));p+=(u[v+s.ROTATE]-p)*b,f+=(u[v+s.TRANSLATE]-f)*b,g+=(u[v+s.SCALE]-g)*b,m+=(u[v+s.SHEAR]-m)*b}if(l==e.setup){d=c.data;c.rotateMix=d.rotateMix+(p-d.rotateMix)*a,c.translateMix=d.translateMix+(f-d.translateMix)*a,c.scaleMix=d.scaleMix+(g-d.scaleMix)*a,c.shearMix=d.shearMix+(m-d.shearMix)*a}else c.rotateMix+=(p-c.rotateMix)*a,c.translateMix+=(f-c.translateMix)*a,c.scaleMix+=(g-c.scaleMix)*a,c.shearMix+=(m-c.shearMix)*a}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_ROTATE=-4,s.PREV_TRANSLATE=-3,s.PREV_SCALE=-2,s.PREV_SHEAR=-1,s.ROTATE=1,s.TRANSLATE=2,s.SCALE=3,s.SHEAR=4,s}(s);t.TransformConstraintTimeline=y;var b=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return o(s,i),s.prototype.getPropertyId=function(){return(n.pathConstraintPosition<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,i){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.VALUE]=i},s.prototype.apply=function(t,i,n,o,a,l,h){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(n<u[0])switch(l){case e.setup:return void(c.position=c.data.position);case e.first:c.position+=(c.data.position-c.position)*a}else{var d=0;if(n>=u[u.length-s.ENTRIES])d=u[u.length+s.PREV_VALUE];else{var p=r.binarySearch(u,n,s.ENTRIES);d=u[p+s.PREV_VALUE];var f=u[p],g=this.getCurvePercent(p/s.ENTRIES-1,1-(n-f)/(u[p+s.PREV_TIME]-f));d+=(u[p+s.VALUE]-d)*g}l==e.setup?c.position=c.data.position+(d-c.data.position)*a:c.position+=(d-c.position)*a}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_VALUE=-1,s.VALUE=1,s}(s);t.PathConstraintPositionTimeline=b;var x=function(t){function i(e){return t.call(this,e)||this}return o(i,t),i.prototype.getPropertyId=function(){return(n.pathConstraintSpacing<<24)+this.pathConstraintIndex},i.prototype.apply=function(t,n,o,s,a,l,h){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(o<u[0])switch(l){case e.setup:return void(c.spacing=c.data.spacing);case e.first:c.spacing+=(c.data.spacing-c.spacing)*a}else{var d=0;if(o>=u[u.length-i.ENTRIES])d=u[u.length+i.PREV_VALUE];else{var p=r.binarySearch(u,o,i.ENTRIES);d=u[p+i.PREV_VALUE];var f=u[p],g=this.getCurvePercent(p/i.ENTRIES-1,1-(o-f)/(u[p+i.PREV_TIME]-f));d+=(u[p+i.VALUE]-d)*g}l==e.setup?c.spacing=c.data.spacing+(d-c.data.spacing)*a:c.spacing+=(d-c.spacing)*a}},i}(b);t.PathConstraintSpacingTimeline=x;var w=function(i){function s(e){var n=i.call(this,e)||this;return n.frames=t.Utils.newFloatArray(e*s.ENTRIES),n}return o(s,i),s.prototype.getPropertyId=function(){return(n.pathConstraintMix<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,i,n){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=i,this.frames[t+s.TRANSLATE]=n},s.prototype.apply=function(t,i,n,o,a,l,h){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(n<u[0])switch(l){case e.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case e.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*a,c.translateMix+=(c.data.translateMix-c.translateMix)*a}else{var d=0,p=0;if(n>=u[u.length-s.ENTRIES])d=u[u.length+s.PREV_ROTATE],p=u[u.length+s.PREV_TRANSLATE];else{var f=r.binarySearch(u,n,s.ENTRIES);d=u[f+s.PREV_ROTATE],p=u[f+s.PREV_TRANSLATE];var g=u[f],m=this.getCurvePercent(f/s.ENTRIES-1,1-(n-g)/(u[f+s.PREV_TIME]-g));d+=(u[f+s.ROTATE]-d)*m,p+=(u[f+s.TRANSLATE]-p)*m}l==e.setup?(c.rotateMix=c.data.rotateMix+(d-c.data.rotateMix)*a,c.translateMix=c.data.translateMix+(p-c.data.translateMix)*a):(c.rotateMix+=(d-c.rotateMix)*a,c.translateMix+=(p-c.translateMix)*a)}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_ROTATE=-2,s.PREV_TRANSLATE=-1,s.ROTATE=1,s.TRANSLATE=2,s}(s);t.PathConstraintMixTimeline=w}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(e){this.tracks=new Array,this.timeScale=1,this.events=new Array,this.listeners=new Array,this.queue=new r(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.trackEntryPool=new t.Pool((function(){return new i})),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,n=e.length;i<n;i++){var r=e[i];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var o=t*r.timeScale;if(r.delay>0){if(r.delay-=o,r.delay>0)continue;o=-r.delay,r.delay=0}var s=r.next;if(null!=s){var a=r.trackLast-s.delay;if(a>=0){for(s.delay=0,s.trackTime+=0==r.timeScale?0:(a/r.timeScale+t)*s.timeScale,r.trackTime+=o,this.setCurrent(i,s,!0);null!=s.mixingFrom;)s.mixTime+=t,s=s.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[i]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var l=r.mixingFrom;for(r.mixingFrom=null,null!=l&&(l.mixingTo=null);null!=l;)this.queue.end(l),l=l.mixingFrom}r.trackTime+=o}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null==i)return!0;var n=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),n):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)},e.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,r=this.tracks,o=!1,s=0,a=r.length;s<a;s++){var l=r[s];if(!(null==l||l.delay>0)){o=!0;var h=0==s?t.MixBlend.first:l.mixBlend,u=l.alpha;null!=l.mixingFrom?u*=this.applyMixingFrom(l,i,h):l.trackTime>=l.trackEnd&&null==l.next&&(u=0);var c=l.animationLast,d=l.getAnimationTime(),p=l.animation.timelines.length,f=l.animation.timelines;if(0==s&&1==u||h==t.MixBlend.add)for(var g=0;g<p;g++)t.Utils.webkit602BugfixHelper(u,h),f[g].apply(i,c,d,n,u,h,t.MixDirection.mixIn);else{var m=l.timelineMode,_=0==l.timelinesRotation.length;_&&t.Utils.setArraySize(l.timelinesRotation,p<<1,null);var v=l.timelinesRotation;for(g=0;g<p;g++){var y=f[g],b=(m[g]&e.NOT_LAST-1)==e.SUBSEQUENT?h:t.MixBlend.setup;y instanceof t.RotateTimeline?this.applyRotateTimeline(y,i,d,u,b,v,g<<1,_):(t.Utils.webkit602BugfixHelper(u,h),y.apply(i,c,d,n,u,b,t.MixDirection.mixIn))}}this.queueEvents(l,d),n.length=0,l.nextAnimationLast=d,l.nextTrackLast=l.trackTime}}return this.queue.drain(),o},e.prototype.applyMixingFrom=function(i,n,r){var o=i.mixingFrom;null!=o.mixingFrom&&this.applyMixingFrom(o,n,r);var s=0;0==i.mixDuration?(s=1,r==t.MixBlend.first&&(r=t.MixBlend.setup)):((s=i.mixTime/i.mixDuration)>1&&(s=1),r!=t.MixBlend.first&&(r=o.mixBlend));var a=s<o.eventThreshold?this.events:null,l=s<o.attachmentThreshold,h=s<o.drawOrderThreshold,u=o.animationLast,c=o.getAnimationTime(),d=o.animation.timelines.length,p=o.animation.timelines,f=o.alpha*i.interruptAlpha,g=f*(1-s);if(r==t.MixBlend.add)for(var m=0;m<d;m++)p[m].apply(n,u,c,a,g,r,t.MixDirection.mixOut);else{var _=o.timelineMode,v=o.timelineHoldMix,y=0==o.timelinesRotation.length;y&&t.Utils.setArraySize(o.timelinesRotation,d<<1,null);var b=o.timelinesRotation;o.totalAlpha=0;for(m=0;m<d;m++){var x=p[m],w=t.MixDirection.mixOut,T=void 0,S=0;switch(_[m]&e.NOT_LAST-1){case e.SUBSEQUENT:if(T=r,!l&&x instanceof t.AttachmentTimeline){if((_[m]&e.NOT_LAST)==e.NOT_LAST)continue;T=t.MixBlend.setup}if(!h&&x instanceof t.DrawOrderTimeline)continue;S=g;break;case e.FIRST:T=t.MixBlend.setup,S=g;break;case e.HOLD:T=t.MixBlend.setup,S=f;break;default:T=t.MixBlend.setup;var E=v[m];S=f*Math.max(0,1-E.mixTime/E.mixDuration)}o.totalAlpha+=S,x instanceof t.RotateTimeline?this.applyRotateTimeline(x,n,c,S,T,b,m<<1,y):(t.Utils.webkit602BugfixHelper(S,r),T==t.MixBlend.setup&&(x instanceof t.AttachmentTimeline?(l||(_[m]&e.NOT_LAST)==e.NOT_LAST)&&(w=t.MixDirection.mixIn):x instanceof t.DrawOrderTimeline&&h&&(w=t.MixDirection.mixIn)),x.apply(n,u,c,a,S,T,w))}}return i.mixDuration>0&&this.queueEvents(o,c),this.events.length=0,o.nextAnimationLast=c,o.nextTrackLast=o.trackTime,s},e.prototype.applyRotateTimeline=function(e,i,n,r,o,s,a,l){if(l&&(s[a]=0),1!=r){var h=e,u=h.frames,c=i.bones[h.boneIndex];if(c.active){var d=0,p=0;if(n<u[0])switch(o){case t.MixBlend.setup:c.rotation=c.data.rotation;default:return;case t.MixBlend.first:d=c.rotation,p=c.data.rotation}else if(d=o==t.MixBlend.setup?c.data.rotation:c.rotation,n>=u[u.length-t.RotateTimeline.ENTRIES])p=c.data.rotation+u[u.length+t.RotateTimeline.PREV_ROTATION];else{var f=t.Animation.binarySearch(u,n,t.RotateTimeline.ENTRIES),g=u[f+t.RotateTimeline.PREV_ROTATION],m=u[f],_=h.getCurvePercent((f>>1)-1,1-(n-m)/(u[f+t.RotateTimeline.PREV_TIME]-m));p=u[f+t.RotateTimeline.ROTATION]-g,p=g+(p-=360*(16384-(16384.499999999996-p/360|0)))*_+c.data.rotation,p-=360*(16384-(16384.499999999996-p/360|0))}var v=0,y=p-d;if(0==(y-=360*(16384-(16384.499999999996-y/360|0))))v=s[a];else{var b=0,x=0;l?(b=0,x=y):(b=s[a],x=s[a+1]);var w=y>0,T=b>=0;t.MathUtils.signum(x)!=t.MathUtils.signum(y)&&Math.abs(x)<=90&&(Math.abs(b)>180&&(b+=360*t.MathUtils.signum(b)),T=w),v=y+b-b%360,T!=w&&(v+=360*t.MathUtils.signum(b)),s[a]=v}s[a+1]=y,d+=v*r,c.rotation=d-360*(16384-(16384.499999999996-d/360|0))}}else e.apply(i,0,n,null,1,o,t.MixDirection.mixIn)},e.prototype.queueEvents=function(t,e){for(var i=t.animationStart,n=t.animationEnd,r=n-i,o=t.trackLast%r,s=this.events,a=0,l=s.length;a<l;a++){var h=s[a];if(h.time<o)break;h.time>n||this.queue.event(t,h)}for((t.loop?0==r||o>t.trackTime%r:e>=n&&t.animationLast<n)&&this.queue.complete(t);a<l;a++){s[a].time<i||this.queue.event(t,s[a])}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var i=e;;){var n=i.mixingFrom;if(null==n)break;this.queue.end(n),i.mixingFrom=null,i.mixingTo=null,i=n}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,i){var n=this.expandToIndex(t);this.tracks[t]=e,null!=n&&(i&&this.queue.interrupt(n),e.mixingFrom=n,n.mixingTo=e,e.mixTime=0,null!=n.mixingFrom&&n.mixDuration>0&&(e.interruptAlpha*=Math.min(1,n.mixTime/n.mixDuration)),n.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,i){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)},e.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var n=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,n=!1):this.disposeNext(r));var o=this.trackEntry(t,e,i,r);return this.setCurrent(t,o,n),this.queue.drain(),o},e.prototype.addAnimation=function(t,e,i,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,n)},e.prototype.addAnimationWith=function(t,e,i,n){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;var o=this.trackEntry(t,e,i,r);if(null==r)this.setCurrent(t,o,!0),this.queue.drain();else if(r.next=o,n<=0){var s=r.animationEnd-r.animationStart;0!=s?(r.loop?n+=s*(1+(r.trackTime/s|0)):n+=Math.max(s,r.trackTime),n-=this.data.getMix(r.animation,e)):n=r.trackTime}return o.delay=n,o},e.prototype.setEmptyAnimation=function(t,i){var n=this.setAnimationWith(t,e.emptyAnimation,!1);return n.mixDuration=i,n.trackEnd=i,n},e.prototype.addEmptyAnimation=function(t,i,n){n<=0&&(n-=i);var r=this.addAnimationWith(t,e.emptyAnimation,!1,n);return r.mixDuration=i,r.trackEnd=i,r},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,n=this.tracks.length;i<n;i++){var r=this.tracks[i];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(e,i,n,r){var o=this.trackEntryPool.obtain();return o.trackIndex=e,o.animation=i,o.loop=n,o.holdPrevious=!1,o.eventThreshold=0,o.attachmentThreshold=0,o.drawOrderThreshold=0,o.animationStart=0,o.animationEnd=i.duration,o.animationLast=-1,o.nextAnimationLast=-1,o.delay=0,o.trackTime=0,o.trackLast=-1,o.nextTrackLast=-1,o.trackEnd=Number.MAX_VALUE,o.timeScale=1,o.alpha=1,o.interruptAlpha=1,o.mixTime=0,o.mixDuration=null==r?0:this.data.getMix(r.animation,i),o.mixBlend=t.MixBlend.replace,o},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var e=0,i=this.tracks.length;e<i;e++){if(null!=(n=this.tracks[e])){for(;null!=n.mixingFrom;)n=n.mixingFrom;do{null!=n.mixingFrom&&n.mixBlend==t.MixBlend.add||this.computeHold(n),n=n.mixingTo}while(null!=n)}}this.propertyIDs.clear();for(e=this.tracks.length-1;e>=0;e--)for(var n=this.tracks[e];null!=n;)this.computeNotLast(n),n=n.mixingFrom},e.prototype.computeHold=function(i){var n=i.mixingTo,r=i.animation.timelines,o=i.animation.timelines.length,s=t.Utils.setArraySize(i.timelineMode,o);i.timelineHoldMix.length=0;var a=t.Utils.setArraySize(i.timelineHoldMix,o),l=this.propertyIDs;if(null!=n&&n.holdPrevious)for(var h=0;h<o;h++)l.add(r[h].getPropertyId()),s[h]=e.HOLD;else t:for(h=0;h<o;h++){var u=r[h],c=u.getPropertyId();if(l.add(c))if(null==n||u instanceof t.AttachmentTimeline||u instanceof t.DrawOrderTimeline||u instanceof t.EventTimeline||!n.animation.hasTimeline(c))s[h]=e.FIRST;else{for(var d=n.mixingTo;null!=d;d=d.mixingTo)if(!d.animation.hasTimeline(c)){if(i.mixDuration>0){s[h]=e.HOLD_MIX,a[h]=d;continue t}break}s[h]=e.HOLD}else s[h]=e.SUBSEQUENT}},e.prototype.computeNotLast=function(i){for(var n=i.animation.timelines,r=i.animation.timelines.length,o=i.timelineMode,s=this.propertyIDs,a=0;a<r;a++)if(n[a]instanceof t.AttachmentTimeline){var l=n[a];s.add(l.slotIndex)||(o[a]|=e.NOT_LAST)}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,i,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,i,n)},e.prototype.addAnimationByName=function(t,i,n,r){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,i,n,r)},e.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.HOLD=2,e.HOLD_MIX=3,e.NOT_LAST=4,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}();t.AnimationState=e;var i=function(){function e(){this.mixBlend=t.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}();t.TrackEntry=i;var n,r=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(n.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(n.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(n.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(n.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(n.complete),this.objects.push(t)},e.prototype.event=function(t,e){this.objects.push(n.event),this.objects.push(t),this.objects.push(e)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,i=this.animState.listeners,r=0;r<e.length;r+=2){var o=e[r],s=e[r+1];switch(o){case n.start:null!=s.listener&&s.listener.start&&s.listener.start(s);for(var a=0;a<i.length;a++)i[a].start&&i[a].start(s);s.onStart&&this.deprecateStuff()&&s.onStart(s.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(s.trackIndex);break;case n.interrupt:null!=s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(a=0;a<i.length;a++)i[a].interrupt&&i[a].interrupt(s);break;case n.end:null!=s.listener&&s.listener.end&&s.listener.end(s);for(a=0;a<i.length;a++)i[a].end&&i[a].end(s);s.onEnd&&this.deprecateStuff()&&s.onEnd(s.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(s.trackIndex);case n.dispose:null!=s.listener&&s.listener.dispose&&s.listener.dispose(s);for(a=0;a<i.length;a++)i[a].dispose&&i[a].dispose(s);this.animState.trackEntryPool.free(s);break;case n.complete:null!=s.listener&&s.listener.complete&&s.listener.complete(s);for(a=0;a<i.length;a++)i[a].complete&&i[a].complete(s);var l=t.MathUtils.toInt(s.loopsCount());s.onComplete&&this.deprecateStuff()&&s.onComplete(s.trackIndex,l),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(s.trackIndex,l);break;case n.event:var h=e[2+r++];null!=s.listener&&s.listener.event&&s.listener.event(s,h);for(a=0;a<i.length;a++)i[a].event&&i[a].event(s,h);s.onEvent&&this.deprecateStuff()&&s.onEvent(s.trackIndex,h),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(s.trackIndex,h)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}();t.EventQueue=r,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(n=t.EventType||(t.EventType={}));var o=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter=o}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);var r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,i)},t.prototype.setMixByName=function(e,i,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,i,n)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var n=t.name+"."+e.name;this.animationToMixTime[n]=i},t.prototype.getMix=function(t,e){var i=t.name+"."+e.name,n=this.animationToMixTime[i];return void 0===n?this.defaultMix:n},t.deprecatedWarning1=!1,t}();t.AnimationStateData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,i,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+i+")");var o=new t.RegionAttachment(i);return o.region=r,o},e.prototype.newMeshAttachment=function(e,i,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+i+")");var o=new t.MeshAttachment(i);return o.region=r,o},e.prototype.newBoundingBoxAttachment=function(e,i){return new t.BoundingBoxAttachment(i)},e.prototype.newPathAttachment=function(e,i){return new t.PathAttachment(i)},e.prototype.newPointAttachment=function(e,i){return new t.PointAttachment(i)},e.prototype.newClippingAttachment=function(e,i){return new t.ClippingAttachment(i)},e}();t.AtlasAttachmentLoader=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(t.BlendMode||(t.BlendMode={}))}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t,e,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),e.prototype.isActive=function(){return this.active},e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(i,n,r,o,s,a,l){this.ax=i,this.ay=n,this.arotation=r,this.ascaleX=o,this.ascaleY=s,this.ashearX=a,this.ashearY=l,this.appliedValid=!0;var h=this.parent,u=this.matrix,c=this.skeleton.scaleX,d=e.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==h){var p=this.skeleton,f=r+90+l;return u.a=t.MathUtils.cosDeg(r+a)*o*c,u.c=t.MathUtils.cosDeg(f)*s*c,u.b=t.MathUtils.sinDeg(r+a)*o*d,u.d=t.MathUtils.sinDeg(f)*s*d,u.tx=i*c+p.x,void(u.ty=n*d+p.y)}var g=h.matrix.a,m=h.matrix.c,_=h.matrix.b,v=h.matrix.d;switch(u.tx=g*i+m*n+h.matrix.tx,u.ty=_*i+v*n+h.matrix.ty,this.data.transformMode){case t.TransformMode.Normal:f=r+90+l;var y=t.MathUtils.cosDeg(r+a)*o,b=t.MathUtils.cosDeg(f)*s,x=t.MathUtils.sinDeg(r+a)*o,w=t.MathUtils.sinDeg(f)*s;return u.a=g*y+m*x,u.c=g*b+m*w,u.b=_*y+v*x,void(u.d=_*b+v*w);case t.TransformMode.OnlyTranslation:f=r+90+l;u.a=t.MathUtils.cosDeg(r+a)*o,u.c=t.MathUtils.cosDeg(f)*s,u.b=t.MathUtils.sinDeg(r+a)*o,u.d=t.MathUtils.sinDeg(f)*s;break;case t.TransformMode.NoRotationOrReflection:var T=0;(P=g*g+_*_)>1e-4?(m=_*(P=Math.abs(g*v-m*_)/P),v=g*P,T=Math.atan2(_,g)*t.MathUtils.radDeg):(g=0,_=0,T=90-Math.atan2(v,m)*t.MathUtils.radDeg);var S=r+a-T,E=r+l-T+90;y=t.MathUtils.cosDeg(S)*o,b=t.MathUtils.cosDeg(E)*s,x=t.MathUtils.sinDeg(S)*o,w=t.MathUtils.sinDeg(E)*s;u.a=g*y-m*x,u.c=g*b-m*w,u.b=_*y+v*x,u.d=_*b+v*w;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var P,A=t.MathUtils.cosDeg(r),I=t.MathUtils.sinDeg(r),O=(g*A+m*I)/c,C=(_*A+v*I)/d;(P=Math.sqrt(O*O+C*C))>1e-5&&(P=1/P),O*=P,C*=P,P=Math.sqrt(O*O+C*C),this.data.transformMode==t.TransformMode.NoScale&&g*v-m*_<0!=(e.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(P=-P);var M=Math.PI/2+Math.atan2(C,O),R=Math.cos(M)*P,k=Math.sin(M)*P;y=t.MathUtils.cosDeg(a)*o,b=t.MathUtils.cosDeg(90+l)*s,x=t.MathUtils.sinDeg(a)*o,w=t.MathUtils.sinDeg(90+l)*s;u.a=O*y+R*x,u.c=O*b+R*w,u.b=C*y+k*x,u.d=C*b+k*w}u.a*=c,u.c*=c,u.b*=d,u.d*=d},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,i=this.matrix;if(null==e)return this.ax=i.tx,this.ay=i.ty,this.arotation=Math.atan2(i.b,i.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(i.a*i.a+i.b*i.b),this.ascaleY=Math.sqrt(i.c*i.c+i.d*i.d),this.ashearX=0,void(this.ashearY=Math.atan2(i.a*i.c+i.b*i.d,i.a*i.d-i.b*i.c)*t.MathUtils.radDeg);var n=e.matrix,r=1/(n.a*n.d-n.b*n.c),o=i.tx-n.tx,s=i.ty-n.ty;this.ax=o*n.d*r-s*n.c*r,this.ay=s*n.a*r-o*n.b*r;var a=r*n.d,l=r*n.a,h=r*n.c,u=r*n.b,c=a*i.a-h*i.b,d=a*i.c-h*i.d,p=l*i.b-u*i.a,f=l*i.d-u*i.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+p*p),this.ascaleX>1e-4){var g=c*f-d*p;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(c*d+p*f,g)*t.MathUtils.radDeg,this.arotation=Math.atan2(p,c)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+f*f),this.ashearY=0,this.arotation=90-Math.atan2(f,d)*t.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,n=e.c,r=e.b,o=e.d,s=1/(i*o-n*r),a=t.x-e.tx,l=t.y-e.ty;return t.x=a*o*s-l*n*s,t.y=l*i*s-a*r*s,t},e.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,n=t.y;return t.x=i*e.a+n*e.c+e.tx,t.y=i*e.b+n*e.d+e.ty,t},e.prototype.worldToLocalRotation=function(e){var i=t.MathUtils.sinDeg(e),n=t.MathUtils.cosDeg(e),r=this.matrix;return Math.atan2(r.a*i-r.b*n,r.d*n-r.c*i)*t.MathUtils.radDeg},e.prototype.localToWorldRotation=function(e){var i=t.MathUtils.sinDeg(e),n=t.MathUtils.cosDeg(e),r=this.matrix;return Math.atan2(n*r.b+i*r.d,n*r.a+i*r.c)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var i=this.matrix,n=i.a,r=i.c,o=i.b,s=i.d,a=t.MathUtils.cosDeg(e),l=t.MathUtils.sinDeg(e);i.a=a*n-l*o,i.c=a*r-l*s,i.b=l*n+a*o,i.d=l*r+a*s,this.appliedValid=!1},e.yDown=!1,e}();t.Bone=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e,i=function(i,n,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=e.Normal,this.skinRequired=!1,this.color=new t.Color,i<0)throw new Error("index must be >= 0.");if(null==n)throw new Error("name cannot be null.");this.index=i,this.name=n,this.parent=r};t.BoneData=i,function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(e=t.TransformMode||(t.TransformMode={}))}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t,e,i){this.name=t,this.order=e,this.skinRequired=i};t.ConstraintData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e};t.Event=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t){this.name=t};t.EventData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},e.prototype.apply1=function(e,i,n,r,o,s,a){e.appliedValid||e.updateAppliedTransform();var l=e.parent.matrix,h=l.a,u=l.c,c=l.b,d=l.d,p=-e.ashearX-e.arotation,f=0,g=0;switch(e.data.transformMode){case t.TransformMode.OnlyTranslation:f=i-e.worldX,g=n-e.worldY;break;case t.TransformMode.NoRotationOrReflection:p+=Math.atan2(c,h)*t.MathUtils.radDeg;var m=Math.abs(h*d-u*c)/(h*h+c*c);u=-c*m,d=h*m;default:var _=i-l.tx,v=n-l.ty,y=h*d-u*c;f=(_*d-v*u)/y-e.ax,g=(v*h-_*c)/y-e.ay}p+=Math.atan2(g,f)*t.MathUtils.radDeg,e.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var b=e.ascaleX,x=e.ascaleY;if(r||o){switch(e.data.transformMode){case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:f=i-e.worldX,g=n-e.worldY}var w=e.data.length*b,T=Math.sqrt(f*f+g*g);if(r&&T<w||o&&T>w&&w>1e-4){var S=(T/w-1)*a+1;b*=S,s&&(x*=S)}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+p*a,b,x,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,i,n,r,o,s,a,l){if(0!=l){e.appliedValid||e.updateAppliedTransform(),i.appliedValid||i.updateAppliedTransform();var h=e.ax,u=e.ay,c=e.ascaleX,d=c,p=e.ascaleY,f=i.ascaleX,g=e.matrix,m=0,_=0,v=0;c<0?(c=-c,m=180,v=-1):(m=0,v=1),p<0&&(p=-p,v=-v),f<0?(f=-f,_=180):_=0;var y=i.ax,b=0,x=0,w=0,T=g.a,S=g.c,E=g.b,P=g.d,A=Math.abs(c-p)<=1e-4;A?(x=T*y+S*(b=i.ay)+g.tx,w=E*y+P*b+g.ty):(b=0,x=T*y+g.tx,w=E*y+g.ty);var I=e.parent.matrix;T=I.a,S=I.c,E=I.b;var O,C,M=1/(T*(P=I.d)-S*E),R=x-I.tx,k=w-I.ty,L=(R*P-k*S)*M-h,D=(k*T-R*E)*M-u,N=Math.sqrt(L*L+D*D),F=i.data.length*f;if(N<1e-4)return this.apply1(e,n,r,!1,s,!1,l),void i.updateWorldTransformWith(y,b,0,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY);var B=((R=n-I.tx)*P-(k=r-I.ty)*S)*M-h,U=(k*T-R*E)*M-u,j=B*B+U*U;if(0!=a){a*=c*(f+1)/2;var V=Math.sqrt(j),X=V-N-F*c+a;if(X>0){var H=Math.min(1,X/(2*a))-1;j=(B-=(H=(X-a*(1-H*H))/V)*B)*B+(U-=H*U)*U}}t:if(A){var G=(j-N*N-(F*=c)*F)/(2*N*F);G<-1?G=-1:G>1&&(G=1,s&&(d*=(Math.sqrt(j)/(N+F)-1)*l+1)),C=Math.acos(G)*o,T=N+F*G,S=F*Math.sin(C),O=Math.atan2(U*T-B*S,B*T+U*S)}else{var W=(T=c*F)*T,Y=(S=p*F)*S,z=Math.atan2(U,B),q=-2*Y*N,K=Y-W;if((P=q*q-4*K*(E=Y*N*N+W*j-W*Y))>=0){var J=Math.sqrt(P);q<0&&(J=-J);var Z=(J=-(q+J)/2)/K,Q=E/J,$=Math.abs(Z)<Math.abs(Q)?Z:Q;if($*$<=j){k=Math.sqrt(j-$*$)*o,O=z-Math.atan2(k,$),C=Math.atan2(k/p,($-N)/c);break t}}var tt=t.MathUtils.PI,et=N-T,it=et*et,nt=0,rt=0,ot=N+T,st=ot*ot,at=0;(E=-T*N/(W-Y))>=-1&&E<=1&&(E=Math.acos(E),(P=(R=T*Math.cos(E)+N)*R+(k=S*Math.sin(E))*k)<it&&(tt=E,it=P,et=R,nt=k),P>st&&(rt=E,st=P,ot=R,at=k)),j<=(it+st)/2?(O=z-Math.atan2(nt*o,et),C=tt*o):(O=z-Math.atan2(at*o,ot),C=rt*o)}var lt=Math.atan2(b,y)*v,ht=e.arotation;(O=(O-lt)*t.MathUtils.radDeg+m-ht)>180?O-=360:O<-180&&(O+=360),e.updateWorldTransformWith(h,u,ht+O*l,d,e.ascaleY,0,0),ht=i.arotation,(C=((C+lt)*t.MathUtils.radDeg-i.ashearX)*v+_-ht)>180?C-=360:C<-180&&(C+=360),i.updateWorldTransformWith(y,b,ht+C*l,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)}else i.updateWorldTransform()},e}();t.IkConstraint=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.bendDirection=1,i.compress=!1,i.stretch=!1,i.uniform=!1,i.mix=1,i.softness=0,i}return o(e,t),e}(t.ConstraintData);t.IkConstraintData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var i=this.target.getAttachment();if(i instanceof t.PathAttachment){var n=this.rotateMix,r=this.translateMix,o=n>0;if(r>0||o){var s=this.data,a=s.spacingMode,l=a==t.SpacingMode.Length,h=s.rotateMode,u=h==t.RotateMode.Tangent,c=h==t.RotateMode.ChainScale,d=this.bones.length,p=u?d:d+1,f=this.bones,g=t.Utils.setArraySize(this.spaces,p),m=null,_=this.spacing;if(c||l){c&&(m=t.Utils.setArraySize(this.lengths,d));for(var v=0,y=p-1;v<y;){var b=(C=f[v]).data.length;if(b<e.epsilon)c&&(m[v]=0),g[++v]=0;else{var x=b*C.matrix.a,w=b*C.matrix.b,T=Math.sqrt(x*x+w*w);c&&(m[v]=T),g[++v]=(l?b+_:_)*T/b}}}else for(v=1;v<p;v++)g[v]=_;var S=this.computeWorldPositions(i,p,u,s.positionMode==t.PositionMode.Percent,a==t.SpacingMode.Percent),E=S[0],P=S[1],A=s.offsetRotation,I=!1;if(0==A)I=h==t.RotateMode.Chain;else I=!1,A*=(O=this.target.bone.matrix).a*O.d-O.b*O.c>0?t.MathUtils.degRad:-t.MathUtils.degRad;v=0;for(var O=3;v<d;v++,O+=3){var C,M=(C=f[v]).matrix;M.tx+=(E-M.tx)*r,M.ty+=(P-M.ty)*r;var R=(x=S[O])-E,k=(w=S[O+1])-P;if(c){var L=m[v];if(0!=L){var D=(Math.sqrt(R*R+k*k)/L-1)*n+1;M.a*=D,M.b*=D}}if(E=x,P=w,o){var N=M.a,F=M.c,B=M.b,U=M.d,j=0,V=0,X=0;if(j=u?S[O-1]:0==g[v+1]?S[O+2]:Math.atan2(k,R),j-=Math.atan2(B,N),I){V=Math.cos(j),X=Math.sin(j);var H=C.data.length;E+=(H*(V*N-X*B)-R)*n,P+=(H*(X*N+V*B)-k)*n}else j+=A;j>t.MathUtils.PI?j-=t.MathUtils.PI2:j<-t.MathUtils.PI&&(j+=t.MathUtils.PI2),j*=n,V=Math.cos(j),X=Math.sin(j),M.a=V*N-X*B,M.c=V*F-X*U,M.b=X*N+V*B,M.d=X*F+V*U}C.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(i,n,r,o,s){var a=this.target,l=this.position,h=this.spaces,u=t.Utils.setArraySize(this.positions,3*n+2),c=null,d=i.closed,p=i.worldVerticesLength,f=p/6,g=e.NONE;if(!i.constantSpeed){var m=i.lengths,_=m[f-=d?1:2];if(o&&(l*=_),s)for(var v=0;v<n;v++)h[v]*=_;c=t.Utils.setArraySize(this.world,8);v=0;for(var y=0,b=0;v<n;v++,y+=3){var x=l+=W=h[v];if(d)(x%=_)<0&&(x+=_),b=0;else{if(x<0){g!=e.BEFORE&&(g=e.BEFORE,i.computeWorldVertices(a,2,4,c,0,2)),this.addBeforePosition(x,c,0,u,y);continue}if(x>_){g!=e.AFTER&&(g=e.AFTER,i.computeWorldVertices(a,p-6,4,c,0,2)),this.addAfterPosition(x-_,c,0,u,y);continue}}for(;;b++){var w=m[b];if(!(x>w)){if(0==b)x/=w;else x=(x-(K=m[b-1]))/(w-K);break}}b!=g&&(g=b,d&&b==f?(i.computeWorldVertices(a,p-4,4,c,0,2),i.computeWorldVertices(a,0,4,c,4,2)):i.computeWorldVertices(a,6*b+2,8,c,0,2)),this.addCurvePosition(x,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],u,y,r||v>0&&0==W)}return u}d?(p+=2,c=t.Utils.setArraySize(this.world,p),i.computeWorldVertices(a,2,p-4,c,0,2),i.computeWorldVertices(a,0,2,c,p-4,2),c[p-2]=c[0],c[p-1]=c[1]):(f--,p-=4,c=t.Utils.setArraySize(this.world,p),i.computeWorldVertices(a,2,p,c,0,2));for(var T=t.Utils.setArraySize(this.curves,f),S=0,E=c[0],P=c[1],A=0,I=0,O=0,C=0,M=0,R=0,k=0,L=0,D=0,N=0,F=0,B=0,U=0,j=0,V=(v=0,2);v<f;v++,V+=6)A=c[V],I=c[V+1],O=c[V+2],C=c[V+3],F=2*(k=.1875*(E-2*A+O))+(D=.09375*(3*(A-O)-E+(M=c[V+4]))),B=2*(L=.1875*(P-2*I+C))+(N=.09375*(3*(I-C)-P+(R=c[V+5]))),U=.75*(A-E)+k+.16666667*D,j=.75*(I-P)+L+.16666667*N,S+=Math.sqrt(U*U+j*j),U+=F,j+=B,F+=D,B+=N,S+=Math.sqrt(U*U+j*j),U+=F,j+=B,S+=Math.sqrt(U*U+j*j),U+=F+D,j+=B+N,S+=Math.sqrt(U*U+j*j),T[v]=S,E=M,P=R;if(o&&(l*=S),s)for(v=0;v<n;v++)h[v]*=S;for(var X=this.segments,H=0,G=(v=0,y=0,b=0,0);v<n;v++,y+=3){var W;x=l+=W=h[v];if(d)(x%=S)<0&&(x+=S),b=0;else{if(x<0){this.addBeforePosition(x,c,0,u,y);continue}if(x>S){this.addAfterPosition(x-S,c,p-4,u,y);continue}}for(;;b++){var Y=T[b];if(!(x>Y)){if(0==b)x/=Y;else x=(x-(K=T[b-1]))/(Y-K);break}}if(b!=g){g=b;var z=6*b;for(E=c[z],P=c[z+1],A=c[z+2],I=c[z+3],O=c[z+4],C=c[z+5],F=2*(k=.03*(E-2*A+O))+(D=.006*(3*(A-O)-E+(M=c[z+6]))),B=2*(L=.03*(P-2*I+C))+(N=.006*(3*(I-C)-P+(R=c[z+7]))),U=.3*(A-E)+k+.16666667*D,j=.3*(I-P)+L+.16666667*N,H=Math.sqrt(U*U+j*j),X[0]=H,z=1;z<8;z++)U+=F,j+=B,F+=D,B+=N,H+=Math.sqrt(U*U+j*j),X[z]=H;U+=F,j+=B,H+=Math.sqrt(U*U+j*j),X[8]=H,U+=F+D,j+=B+N,H+=Math.sqrt(U*U+j*j),X[9]=H,G=0}for(x*=H;;G++){var q=X[G];if(!(x>q)){var K;if(0==G)x/=q;else x=G+(x-(K=X[G-1]))/(q-K);break}}this.addCurvePosition(.1*x,E,P,A,I,O,C,M,R,u,y,r||v>0&&0==W)}return u},e.prototype.addBeforePosition=function(t,e,i,n,r){var o=e[i],s=e[i+1],a=e[i+2]-o,l=e[i+3]-s,h=Math.atan2(l,a);n[r]=o+t*Math.cos(h),n[r+1]=s+t*Math.sin(h),n[r+2]=h},e.prototype.addAfterPosition=function(t,e,i,n,r){var o=e[i+2],s=e[i+3],a=o-e[i],l=s-e[i+1],h=Math.atan2(l,a);n[r]=o+t*Math.cos(h),n[r+1]=s+t*Math.sin(h),n[r+2]=h},e.prototype.addCurvePosition=function(t,e,i,n,r,o,s,a,l,h,u,c){(0==t||isNaN(t))&&(t=1e-4);var d=t*t,p=d*t,f=1-t,g=f*f,m=g*f,_=f*t,v=3*_,y=f*v,b=v*t,x=e*m+n*y+o*b+a*p,w=i*m+r*y+s*b+l*p;h[u]=x,h[u+1]=w,c&&(h[u+2]=Math.atan2(w-(i*g+r*_*2+s*d),x-(e*g+n*_*2+o*d)))},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}();t.PathConstraint=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i}return o(e,t),e}(t.ConstraintData);t.PathConstraintData=e,function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(t.PositionMode||(t.PositionMode={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(t.SpacingMode||(t.SpacingMode={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var i=0;i<e.bones.length;i++){var n=e.bones[i],r=void 0;if(null==n.parent)r=new t.Bone(n,this,null);else{var o=this.bones[n.parent.index];r=new t.Bone(n,this,o),o.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(i=0;i<e.slots.length;i++){var s=e.slots[i],a=(r=this.bones[s.boneData.index],new t.Slot(s,r));this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(i=0;i<e.ikConstraints.length;i++){var l=e.ikConstraints[i];this.ikConstraints.push(new t.IkConstraint(l,this))}this.transformConstraints=new Array;for(i=0;i<e.transformConstraints.length;i++){var h=e.transformConstraints[i];this.transformConstraints.push(new t.TransformConstraint(h,this))}this.pathConstraints=new Array;for(i=0;i<e.pathConstraints.length;i++){var u=e.pathConstraints[i];this.pathConstraints.push(new t.PathConstraint(u,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++){(r=t[e]).sorted=r.data.skinRequired,r.active=!r.sorted}if(null!=this.skin){var n=this.skin.bones;for(e=0,i=this.skin.bones.length;e<i;e++){var r=this.bones[n[e].index];do{r.sorted=!1,r.active=!0,r=r.parent}while(null!=r)}}var o=this.ikConstraints,s=this.transformConstraints,a=this.pathConstraints,l=o.length,h=s.length,u=a.length,c=l+h+u;t:for(e=0;e<c;e++){for(var d=0;d<l;d++){if((p=o[d]).data.order==e){this.sortIkConstraint(p);continue t}}for(d=0;d<h;d++){if((p=s[d]).data.order==e){this.sortTransformConstraint(p);continue t}}for(d=0;d<u;d++){var p;if((p=a[d]).data.order==e){this.sortPathConstraint(p);continue t}}}for(e=0,i=t.length;e<i;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var i=e.target;this.sortBone(i);var n=e.bones,r=n[0];if(this.sortBone(r),n.length>1){var o=n[n.length-1];this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}this._updateCache.push(e),this.sortReset(r.children),n[n.length-1].sorted=!0}},e.prototype.sortPathConstraint=function(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){var i=e.target,n=i.data.index,r=i.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var o=0,s=this.data.skins.length;o<s;o++)this.sortPathConstraintAttachment(this.data.skins[o],n,r);var a=i.getAttachment();a instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(a,r);var l=e.bones,h=l.length;for(o=0;o<h;o++)this.sortBone(l[o]);this._updateCache.push(e);for(o=0;o<h;o++)this.sortReset(l[o].children);for(o=0;o<h;o++)l[o].sorted=!0}},e.prototype.sortTransformConstraint=function(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||null!=this.skin&&t.Utils.contains(this.skin.constraints,e.data,!0)),e.active){this.sortBone(e.target);var i=e.bones,n=i.length;if(e.data.local)for(var r=0;r<n;r++){var o=i[r];this.sortBone(o.parent),this._updateCache.indexOf(o)>-1||this.updateCacheReset.push(o)}else for(r=0;r<n;r++)this.sortBone(i[r]);this._updateCache.push(e);for(var s=0;s<n;s++)this.sortReset(i[s].children);for(s=0;s<n;s++)i[s].sorted=!0}},e.prototype.sortPathConstraintAttachment=function(t,e,i){var n=t.attachments[e];if(n)for(var r in n)this.sortPathConstraintAttachmentWith(n[r],i)},e.prototype.sortPathConstraintAttachmentWith=function(e,i){if(e instanceof t.PathAttachment){var n=e.bones;if(null==n)this.sortBone(i);else for(var r=this.bones,o=0;o<n.length;)for(var s=n[o++],a=o+s;o<a;o++){var l=n[o];this.sortBone(r[l])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];n.active&&(n.sorted&&this.sortReset(n.children),n.sorted=!1)}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}var r=this._updateCache;for(e=0,i=r.length;e<i;e++)r[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();var n=this.ikConstraints;for(e=0,i=n.length;e<i;e++){(a=n[e]).mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}var r=this.transformConstraints;for(e=0,i=r.length;e<i;e++){var o=(a=r[e]).data;a.rotateMix=o.rotateMix,a.translateMix=o.translateMix,a.scaleMix=o.scaleMix,a.shearMix=o.shearMix}var s=this.pathConstraints;for(e=0,i=s.length;e<i;e++){var a;o=(a=s[e]).data;a.position=o.position,a.spacing=o.spacing,a.rotateMix=o.rotateMix,a.translateMix=o.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var i=0,n=e.length;i<n;i++)e[i].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i],o=r.data.attachmentName;if(null!=o){var s=t.getAttachment(i,o);null!=s&&r.setAttachment(s)}}this.skin=t,this.updateCache()}},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++){var o=i[n];if(o.data.name==t){var s=null;if(null!=e&&null==(s=this.getAttachment(n,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(s)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.getBounds=function(e,i,n){if(void 0===n&&(n=new Array(2)),null==e)throw new Error("offset cannot be null.");if(null==i)throw new Error("size cannot be null.");for(var r=this.drawOrder,o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h=0,u=r.length;h<u;h++){var c=r[h];if(c.bone.active){var d=0,p=null,f=c.getAttachment();if(f instanceof t.RegionAttachment)d=8,p=t.Utils.setArraySize(n,d,0),f.computeWorldVertices(c.bone,p,0,2);else if(f instanceof t.MeshAttachment){var g=f;d=g.worldVerticesLength,p=t.Utils.setArraySize(n,d,0),g.computeWorldVertices(c,0,d,p,0,2)}if(null!=p)for(var m=0,_=p.length;m<_;m+=2){var v=p[m],y=p[m+1];o=Math.min(o,v),s=Math.min(s,y),a=Math.max(a,v),l=Math.max(l,y)}}}e.set(o,s),i.set(a-o,l-s)},e.prototype.update=function(t){this.time+=t},Object.defineProperty(e.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1},enumerable:!0,configurable:!0}),e.deprecatedWarning1=!1,e}();t.Skeleton=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(n){var r=this.scale,o=new t.SkeletonData;o.name="";var s=new i(n);if(o.hash=s.readString(),o.version=s.readString(),"3.8.75"===o.version){console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.")}o.x=s.readFloat(),o.y=s.readFloat(),o.width=s.readFloat(),o.height=s.readFloat();var a=s.readBoolean();a&&(o.fps=s.readFloat(),o.imagesPath=s.readString(),o.audioPath=s.readString());var l=0;l=s.readInt(!0);for(var h=0;h<l;h++)s.strings.push(s.readString());l=s.readInt(!0);for(h=0;h<l;h++){var u=s.readString(),c=0==h?null:o.bones[s.readInt(!0)];(f=new t.BoneData(h,u,c)).rotation=s.readFloat(),f.x=s.readFloat()*r,f.y=s.readFloat()*r,f.scaleX=s.readFloat(),f.scaleY=s.readFloat(),f.shearX=s.readFloat(),f.shearY=s.readFloat(),f.length=s.readFloat()*r,f.transformMode=e.TransformModeValues[s.readInt(!0)],f.skinRequired=s.readBoolean(),a&&t.Color.rgba8888ToColor(f.color,s.readInt32()),o.bones.push(f)}l=s.readInt(!0);for(h=0;h<l;h++){var d=s.readString(),p=o.bones[s.readInt(!0)],f=new t.SlotData(h,d,p);t.Color.rgba8888ToColor(f.color,s.readInt32());var g=s.readInt32();-1!=g&&t.Color.rgb888ToColor(f.darkColor=new t.Color,g),f.attachmentName=s.readStringRef(),f.blendMode=e.BlendModeValues[s.readInt(!0)],o.slots.push(f)}l=s.readInt(!0);h=0;for(var m=void 0;h<l;h++){(f=new t.IkConstraintData(s.readString())).order=s.readInt(!0),f.skinRequired=s.readBoolean(),m=s.readInt(!0);for(var _=0;_<m;_++)f.bones.push(o.bones[s.readInt(!0)]);f.target=o.bones[s.readInt(!0)],f.mix=s.readFloat(),f.softness=s.readFloat()*r,f.bendDirection=s.readByte(),f.compress=s.readBoolean(),f.stretch=s.readBoolean(),f.uniform=s.readBoolean(),o.ikConstraints.push(f)}l=s.readInt(!0);for(h=0,m=void 0;h<l;h++){(f=new t.TransformConstraintData(s.readString())).order=s.readInt(!0),f.skinRequired=s.readBoolean(),m=s.readInt(!0);for(_=0;_<m;_++)f.bones.push(o.bones[s.readInt(!0)]);f.target=o.bones[s.readInt(!0)],f.local=s.readBoolean(),f.relative=s.readBoolean(),f.offsetRotation=s.readFloat(),f.offsetX=s.readFloat()*r,f.offsetY=s.readFloat()*r,f.offsetScaleX=s.readFloat(),f.offsetScaleY=s.readFloat(),f.offsetShearY=s.readFloat(),f.rotateMix=s.readFloat(),f.translateMix=s.readFloat(),f.scaleMix=s.readFloat(),f.shearMix=s.readFloat(),o.transformConstraints.push(f)}l=s.readInt(!0);for(h=0,m=void 0;h<l;h++){(f=new t.PathConstraintData(s.readString())).order=s.readInt(!0),f.skinRequired=s.readBoolean(),m=s.readInt(!0);for(_=0;_<m;_++)f.bones.push(o.bones[s.readInt(!0)]);f.target=o.slots[s.readInt(!0)],f.positionMode=e.PositionModeValues[s.readInt(!0)],f.spacingMode=e.SpacingModeValues[s.readInt(!0)],f.rotateMode=e.RotateModeValues[s.readInt(!0)],f.offsetRotation=s.readFloat(),f.position=s.readFloat(),f.positionMode==t.PositionMode.Fixed&&(f.position*=r),f.spacing=s.readFloat(),f.spacingMode!=t.SpacingMode.Length&&f.spacingMode!=t.SpacingMode.Fixed||(f.spacing*=r),f.rotateMix=s.readFloat(),f.translateMix=s.readFloat(),o.pathConstraints.push(f)}var v=this.readSkin(s,o,!0,a);null!=v&&(o.defaultSkin=v,o.skins.push(v));h=o.skins.length;for(t.Utils.setArraySize(o.skins,l=h+s.readInt(!0));h<l;h++)o.skins[h]=this.readSkin(s,o,!1,a);l=this.linkedMeshes.length;for(h=0;h<l;h++){var y=this.linkedMeshes[h],b=null==y.skin?o.defaultSkin:o.findSkin(y.skin);if(null==b)throw new Error("Skin not found: "+y.skin);var x=b.getAttachment(y.slotIndex,y.parent);if(null==x)throw new Error("Parent mesh not found: "+y.parent);y.mesh.deformAttachment=y.inheritDeform?x:y.mesh,y.mesh.setParentMesh(x)}this.linkedMeshes.length=0,l=s.readInt(!0);for(h=0;h<l;h++){(f=new t.EventData(s.readStringRef())).intValue=s.readInt(!1),f.floatValue=s.readFloat(),f.stringValue=s.readString(),f.audioPath=s.readString(),null!=f.audioPath&&(f.volume=s.readFloat(),f.balance=s.readFloat()),o.events.push(f)}l=s.readInt(!0);for(h=0;h<l;h++)o.animations.push(this.readAnimation(s,s.readString(),o));return o},e.prototype.readSkin=function(e,i,n,r){var o=null,s=0;if(n){if(0==(s=e.readInt(!0)))return null;o=new t.Skin("default")}else{(o=new t.Skin(e.readStringRef())).bones.length=e.readInt(!0);for(var a=0,l=o.bones.length;a<l;a++)o.bones[a]=i.bones[e.readInt(!0)];for(a=0,l=e.readInt(!0);a<l;a++)o.constraints.push(i.ikConstraints[e.readInt(!0)]);for(a=0,l=e.readInt(!0);a<l;a++)o.constraints.push(i.transformConstraints[e.readInt(!0)]);for(a=0,l=e.readInt(!0);a<l;a++)o.constraints.push(i.pathConstraints[e.readInt(!0)]);s=e.readInt(!0)}for(a=0;a<s;a++)for(var h=e.readInt(!0),u=0,c=e.readInt(!0);u<c;u++){var d=e.readStringRef(),p=this.readAttachment(e,i,o,h,d,r);null!=p&&o.setAttachment(h,d,p)}return o},e.prototype.readAttachment=function(i,r,o,s,a,l){var h=this.scale,u=i.readStringRef();null==u&&(u=a);var c=i.readByte();switch(e.AttachmentTypeValues[c]){case t.AttachmentType.Region:var d=i.readStringRef(),p=i.readFloat(),f=i.readFloat(),g=i.readFloat(),m=i.readFloat(),_=i.readFloat(),v=i.readFloat(),y=i.readFloat(),b=i.readInt32();null==d&&(d=u);var x=this.attachmentLoader.newRegionAttachment(o,u,d);return null==x?null:(x.path=d,x.x=f*h,x.y=g*h,x.scaleX=m,x.scaleY=_,x.rotation=p,x.width=v*h,x.height=y*h,t.Color.rgba8888ToColor(x.color,b),x);case t.AttachmentType.BoundingBox:var w=i.readInt(!0),T=this.readVertices(i,w),S=(b=l?i.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(o,u));return null==S?null:(S.worldVerticesLength=w<<1,S.vertices=T.vertices,S.bones=T.bones,l&&t.Color.rgba8888ToColor(S.color,b),S);case t.AttachmentType.Mesh:d=i.readStringRef(),b=i.readInt32(),w=i.readInt(!0);var E=this.readFloatArray(i,w<<1,1),P=this.readShortArray(i),A=(T=this.readVertices(i,w),i.readInt(!0)),I=null;v=0,y=0;return l&&(I=this.readShortArray(i),v=i.readFloat(),y=i.readFloat()),null==d&&(d=u),null==(O=this.attachmentLoader.newMeshAttachment(o,u,d))?null:(O.path=d,t.Color.rgba8888ToColor(O.color,b),O.bones=T.bones,O.vertices=T.vertices,O.worldVerticesLength=w<<1,O.triangles=P,O.regionUVs=new Float32Array(E),O.hullLength=A<<1,l&&(O.edges=I,O.width=v*h,O.height=y*h),O);case t.AttachmentType.LinkedMesh:d=i.readStringRef(),b=i.readInt32();var O,C=i.readStringRef(),M=i.readStringRef(),R=i.readBoolean();v=0,y=0;return l&&(v=i.readFloat(),y=i.readFloat()),null==d&&(d=u),null==(O=this.attachmentLoader.newMeshAttachment(o,u,d))?null:(O.path=d,t.Color.rgba8888ToColor(O.color,b),l&&(O.width=v*h,O.height=y*h),this.linkedMeshes.push(new n(O,C,s,M,R)),O);case t.AttachmentType.Path:for(var k=i.readBoolean(),L=i.readBoolean(),D=(w=i.readInt(!0),T=this.readVertices(i,w),t.Utils.newArray(w/3,0)),N=0,F=D.length;N<F;N++)D[N]=i.readFloat()*h;b=l?i.readInt32():0;return null==(d=this.attachmentLoader.newPathAttachment(o,u))?null:(d.closed=k,d.constantSpeed=L,d.worldVerticesLength=w<<1,d.vertices=T.vertices,d.bones=T.bones,d.lengths=D,l&&t.Color.rgba8888ToColor(d.color,b),d);case t.AttachmentType.Point:p=i.readFloat(),f=i.readFloat(),g=i.readFloat(),b=l?i.readInt32():0;var B=this.attachmentLoader.newPointAttachment(o,u);return null==B?null:(B.x=f*h,B.y=g*h,B.rotation=p,l&&t.Color.rgba8888ToColor(B.color,b),B);case t.AttachmentType.Clipping:var U=i.readInt(!0),j=(w=i.readInt(!0),T=this.readVertices(i,w),b=l?i.readInt32():0,this.attachmentLoader.newClippingAttachment(o,u));return null==j?null:(j.endSlot=r.slots[U],j.worldVerticesLength=w<<1,j.vertices=T.vertices,j.bones=T.bones,l&&t.Color.rgba8888ToColor(j.color,b),j)}return null},e.prototype.readVertices=function(e,i){var n=i<<1,o=new r,s=this.scale;if(!e.readBoolean())return o.vertices=this.readFloatArray(e,n,s),o;for(var a=new Array,l=new Array,h=0;h<i;h++){var u=e.readInt(!0);l.push(u);for(var c=0;c<u;c++)l.push(e.readInt(!0)),a.push(e.readFloat()*s),a.push(e.readFloat()*s),a.push(e.readFloat())}return o.vertices=t.Utils.toFloatArray(a),o.bones=l,o},e.prototype.readFloatArray=function(t,e,i){var n=new Array(e);if(1==i)for(var r=0;r<e;r++)n[r]=t.readFloat();else for(r=0;r<e;r++)n[r]=t.readFloat()*i;return n},e.prototype.readShortArray=function(t){for(var e=t.readInt(!0),i=new Array(e),n=0;n<e;n++)i[n]=t.readShort();return i},e.prototype.readAnimation=function(i,n,r){for(var o=new Array,s=this.scale,a=0,l=new t.Color,h=new t.Color,u=0,c=i.readInt(!0);u<c;u++)for(var d=i.readInt(!0),p=0,f=i.readInt(!0);p<f;p++){var g=i.readByte(),m=i.readInt(!0);switch(g){case e.SLOT_ATTACHMENT:(b=new t.AttachmentTimeline(m)).slotIndex=d;for(var _=0;_<m;_++)b.setFrame(_,i.readFloat(),i.readStringRef());o.push(b),a=Math.max(a,b.frames[m-1]);break;case e.SLOT_COLOR:(b=new t.ColorTimeline(m)).slotIndex=d;for(_=0;_<m;_++){var v=i.readFloat();t.Color.rgba8888ToColor(l,i.readInt32()),b.setFrame(_,v,l.r,l.g,l.b,l.a),_<m-1&&this.readCurve(i,_,b)}o.push(b),a=Math.max(a,b.frames[(m-1)*t.ColorTimeline.ENTRIES]);break;case e.SLOT_TWO_COLOR:(b=new t.TwoColorTimeline(m)).slotIndex=d;for(_=0;_<m;_++){v=i.readFloat();t.Color.rgba8888ToColor(l,i.readInt32()),t.Color.rgb888ToColor(h,i.readInt32()),b.setFrame(_,v,l.r,l.g,l.b,l.a,h.r,h.g,h.b),_<m-1&&this.readCurve(i,_,b)}o.push(b),a=Math.max(a,b.frames[(m-1)*t.TwoColorTimeline.ENTRIES])}}for(u=0,c=i.readInt(!0);u<c;u++){var y=i.readInt(!0);for(p=0,f=i.readInt(!0);p<f;p++){g=i.readByte(),m=i.readInt(!0);switch(g){case e.BONE_ROTATE:(b=new t.RotateTimeline(m)).boneIndex=y;for(_=0;_<m;_++)b.setFrame(_,i.readFloat(),i.readFloat()),_<m-1&&this.readCurve(i,_,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.RotateTimeline.ENTRIES]);break;case e.BONE_TRANSLATE:case e.BONE_SCALE:case e.BONE_SHEAR:var b=void 0,x=1;g==e.BONE_SCALE?b=new t.ScaleTimeline(m):g==e.BONE_SHEAR?b=new t.ShearTimeline(m):(b=new t.TranslateTimeline(m),x=s),b.boneIndex=y;for(_=0;_<m;_++)b.setFrame(_,i.readFloat(),i.readFloat()*x,i.readFloat()*x),_<m-1&&this.readCurve(i,_,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.TranslateTimeline.ENTRIES])}}}for(u=0,c=i.readInt(!0);u<c;u++){var w=i.readInt(!0);m=i.readInt(!0);(b=new t.IkConstraintTimeline(m)).ikConstraintIndex=w;for(_=0;_<m;_++)b.setFrame(_,i.readFloat(),i.readFloat(),i.readFloat()*s,i.readByte(),i.readBoolean(),i.readBoolean()),_<m-1&&this.readCurve(i,_,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.IkConstraintTimeline.ENTRIES])}for(u=0,c=i.readInt(!0);u<c;u++){w=i.readInt(!0),m=i.readInt(!0);(b=new t.TransformConstraintTimeline(m)).transformConstraintIndex=w;for(_=0;_<m;_++)b.setFrame(_,i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat(),i.readFloat()),_<m-1&&this.readCurve(i,_,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.TransformConstraintTimeline.ENTRIES])}for(u=0,c=i.readInt(!0);u<c;u++){w=i.readInt(!0);var T=r.pathConstraints[w];for(p=0,f=i.readInt(!0);p<f;p++){g=i.readByte(),m=i.readInt(!0);switch(g){case e.PATH_POSITION:case e.PATH_SPACING:b=void 0,x=1;g==e.PATH_SPACING?(b=new t.PathConstraintSpacingTimeline(m),T.spacingMode!=t.SpacingMode.Length&&T.spacingMode!=t.SpacingMode.Fixed||(x=s)):(b=new t.PathConstraintPositionTimeline(m),T.positionMode==t.PositionMode.Fixed&&(x=s)),b.pathConstraintIndex=w;for(_=0;_<m;_++)b.setFrame(_,i.readFloat(),i.readFloat()*x),_<m-1&&this.readCurve(i,_,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.PathConstraintPositionTimeline.ENTRIES]);break;case e.PATH_MIX:(b=new t.PathConstraintMixTimeline(m)).pathConstraintIndex=w;for(_=0;_<m;_++)b.setFrame(_,i.readFloat(),i.readFloat(),i.readFloat()),_<m-1&&this.readCurve(i,_,b);o.push(b),a=Math.max(a,b.frames[(m-1)*t.PathConstraintMixTimeline.ENTRIES])}}}for(u=0,c=i.readInt(!0);u<c;u++){var S=r.skins[i.readInt(!0)];for(p=0,f=i.readInt(!0);p<f;p++){d=i.readInt(!0);for(var E=0,P=i.readInt(!0);E<P;E++){var A=S.getAttachment(d,i.readStringRef()),I=null!=A.bones,O=A.vertices,C=I?O.length/3*2:O.length;m=i.readInt(!0);(b=new t.DeformTimeline(m)).slotIndex=d,b.attachment=A;for(_=0;_<m;_++){v=i.readFloat();var M=void 0,R=i.readInt(!0);if(0==R)M=I?t.Utils.newFloatArray(C):O;else{M=t.Utils.newFloatArray(C);var k=i.readInt(!0);if(R+=k,1==s)for(var L=k;L<R;L++)M[L]=i.readFloat();else for(L=k;L<R;L++)M[L]=i.readFloat()*s;if(!I){L=0;for(var D=M.length;L<D;L++)M[L]+=O[L]}}b.setFrame(_,v,M),_<m-1&&this.readCurve(i,_,b)}o.push(b),a=Math.max(a,b.frames[m-1])}}}var N=i.readInt(!0);if(N>0){b=new t.DrawOrderTimeline(N);var F=r.slots.length;for(u=0;u<N;u++){v=i.readFloat();var B=i.readInt(!0),U=t.Utils.newArray(F,0);for(p=F-1;p>=0;p--)U[p]=-1;var j=t.Utils.newArray(F-B,0),V=0,X=0;for(p=0;p<B;p++){for(d=i.readInt(!0);V!=d;)j[X++]=V++;U[V+i.readInt(!0)]=V++}for(;V<F;)j[X++]=V++;for(p=F-1;p>=0;p--)-1==U[p]&&(U[p]=j[--X]);b.setFrame(u,v,U)}o.push(b),a=Math.max(a,b.frames[N-1])}var H=i.readInt(!0);if(H>0){for(b=new t.EventTimeline(H),u=0;u<H;u++){v=i.readFloat();var G=r.events[i.readInt(!0)],W=new t.Event(v,G);W.intValue=i.readInt(!1),W.floatValue=i.readFloat(),W.stringValue=i.readBoolean()?i.readString():G.stringValue,null!=W.data.audioPath&&(W.volume=i.readFloat(),W.balance=i.readFloat()),b.setFrame(u,W)}o.push(b),a=Math.max(a,b.frames[H-1])}return new t.Animation(n,o,a)},e.prototype.readCurve=function(t,i,n){switch(t.readByte()){case e.CURVE_STEPPED:n.setStepped(i);break;case e.CURVE_BEZIER:this.setCurve(n,i,t.readFloat(),t.readFloat(),t.readFloat(),t.readFloat())}},e.prototype.setCurve=function(t,e,i,n,r,o){t.setCurve(e,i,n,r,o)},e.AttachmentTypeValues=[0,1,2,3,4,5,6],e.TransformModeValues=[t.TransformMode.Normal,t.TransformMode.OnlyTranslation,t.TransformMode.NoRotationOrReflection,t.TransformMode.NoScale,t.TransformMode.NoScaleOrReflection],e.PositionModeValues=[t.PositionMode.Fixed,t.PositionMode.Percent],e.SpacingModeValues=[t.SpacingMode.Length,t.SpacingMode.Fixed,t.SpacingMode.Percent],e.RotateModeValues=[t.RotateMode.Tangent,t.RotateMode.Chain,t.RotateMode.ChainScale],e.BlendModeValues=[t.BlendMode.Normal,t.BlendMode.Additive,t.BlendMode.Multiply,t.BlendMode.Screen],e.BONE_ROTATE=0,e.BONE_TRANSLATE=1,e.BONE_SCALE=2,e.BONE_SHEAR=3,e.SLOT_ATTACHMENT=0,e.SLOT_COLOR=1,e.SLOT_TWO_COLOR=2,e.PATH_POSITION=0,e.PATH_SPACING=1,e.PATH_MIX=2,e.CURVE_LINEAR=0,e.CURVE_STEPPED=1,e.CURVE_BEZIER=2,e}();t.SkeletonBinary=e;var i=function(){function t(t,e,i,n){void 0===e&&(e=new Array),void 0===i&&(i=0),void 0===n&&(n=new DataView(t.buffer)),this.strings=e,this.index=i,this.buffer=n}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),i=127&e;return 0!=(128&e)&&(i|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<28)))),t?i:i>>>1^-(1&i)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",i=0;i<t;){var n=this.readByte();switch(n>>4){case 12:case 13:e+=String.fromCharCode((31&n)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&n)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(n),i++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}(),n=function(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r},r=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e}}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return e.prototype.update=function(e,i){if(null==e)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,o=this.polygonPool,s=e.slots,a=s.length;n.length=0,o.freeAll(r),r.length=0;for(var l=0;l<a;l++){var h=s[l];if(h.bone.active){var u=h.getAttachment();if(u instanceof t.BoundingBoxAttachment){var c=u;n.push(c);var d=o.obtain();d.length!=c.worldVerticesLength&&(d=t.Utils.newFloatArray(c.worldVerticesLength)),r.push(d),c.computeWorldVertices(h,0,c.worldVerticesLength,d,0,2)}}}i?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons,o=0,s=r.length;o<s;o++)for(var a=r[o],l=a,h=0,u=a.length;h<u;h+=2){var c=l[h],d=l[h+1];t=Math.min(t,c),e=Math.min(e,d),i=Math.max(i,c),n=Math.max(n,d)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=n},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,i,n){var r=this.minX,o=this.minY,s=this.maxX,a=this.maxY;if(t<=r&&i<=r||e<=o&&n<=o||t>=s&&i>=s||e>=a&&n>=a)return!1;var l=(n-e)/(i-t),h=l*(r-t)+e;if(h>o&&h<a)return!0;if((h=l*(s-t)+e)>o&&h<a)return!0;var u=(o-e)/l+t;return u>r&&u<s||(u=(a-e)/l+t)>r&&u<s},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var i=this.polygons,n=0,r=i.length;n<r;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null},e.prototype.containsPointPolygon=function(t,e,i){for(var n=t,r=t.length,o=r-2,s=!1,a=0;a<r;a+=2){var l=n[a+1],h=n[o+1];if(l<i&&h>=i||h<i&&l>=i){var u=n[a];u+(i-l)/(h-l)*(n[o]-u)<e&&(s=!s)}o=a}return s},e.prototype.intersectsSegment=function(t,e,i,n){for(var r=this.polygons,o=0,s=r.length;o<s;o++)if(this.intersectsSegmentPolygon(r[o],t,e,i,n))return this.boundingBoxes[o];return null},e.prototype.intersectsSegmentPolygon=function(t,e,i,n,r){for(var o=t,s=t.length,a=e-n,l=i-r,h=e*r-i*n,u=o[s-2],c=o[s-1],d=0;d<s;d+=2){var p=o[d],f=o[d+1],g=u*f-c*p,m=u-p,_=c-f,v=a*_-l*m,y=(h*m-a*g)/v;if((y>=u&&y<=p||y>=p&&y<=u)&&(y>=e&&y<=n||y>=n&&y<=e)){var b=(h*_-l*g)/v;if((b>=c&&b<=f||b>=f&&b<=c)&&(b>=i&&b<=r||b>=r&&b<=i))return!0}u=p,c=f}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(i,n){if(null!=this.clipAttachment)return 0;this.clipAttachment=n;var r=n.worldVerticesLength,o=t.Utils.setArraySize(this.clippingPolygon,r);n.computeWorldVertices(i,0,r,o,0,2);var s=this.clippingPolygon;e.makeClockwise(s);for(var a=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s)),l=0,h=a.length;l<h;l++){var u=a[l];e.makeClockwise(u),u.push(u[0]),u.push(u[1])}return a.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,i,n,r,o,s,a,l){var h=this.clipOutput,u=this.clippedVertices,c=this.clippedTriangles,d=this.clippingPolygons,p=this.clippingPolygons.length,f=l?12:8,g=0;u.length=0,c.length=0;t:for(var m=0;m<r;m+=3)for(var _=n[m]<<1,v=e[_],y=e[_+1],b=o[_],x=o[_+1],w=e[_=n[m+1]<<1],T=e[_+1],S=o[_],E=o[_+1],P=e[_=n[m+2]<<1],A=e[_+1],I=o[_],O=o[_+1],C=0;C<p;C++){var M=u.length;if(!this.clip(v,y,w,T,P,A,d[C],h)){(j=t.Utils.setArraySize(u,M+3*f))[M]=v,j[M+1]=y,j[M+2]=s.r,j[M+3]=s.g,j[M+4]=s.b,j[M+5]=s.a,l?(j[M+6]=b,j[M+7]=x,j[M+8]=a.r,j[M+9]=a.g,j[M+10]=a.b,j[M+11]=a.a,j[M+12]=w,j[M+13]=T,j[M+14]=s.r,j[M+15]=s.g,j[M+16]=s.b,j[M+17]=s.a,j[M+18]=S,j[M+19]=E,j[M+20]=a.r,j[M+21]=a.g,j[M+22]=a.b,j[M+23]=a.a,j[M+24]=P,j[M+25]=A,j[M+26]=s.r,j[M+27]=s.g,j[M+28]=s.b,j[M+29]=s.a,j[M+30]=I,j[M+31]=O,j[M+32]=a.r,j[M+33]=a.g,j[M+34]=a.b,j[M+35]=a.a):(j[M+6]=b,j[M+7]=x,j[M+8]=w,j[M+9]=T,j[M+10]=s.r,j[M+11]=s.g,j[M+12]=s.b,j[M+13]=s.a,j[M+14]=S,j[M+15]=E,j[M+16]=P,j[M+17]=A,j[M+18]=s.r,j[M+19]=s.g,j[M+20]=s.b,j[M+21]=s.a,j[M+22]=I,j[M+23]=O),M=c.length,(K=t.Utils.setArraySize(c,M+3))[M]=g,K[M+1]=g+1,K[M+2]=g+2,g+=3;continue t}var R=h.length;if(0!=R){for(var k=T-A,L=P-w,D=v-P,N=A-y,F=1/(k*D+L*(y-A)),B=R>>1,U=this.clipOutput,j=t.Utils.setArraySize(u,M+B*f),V=0;V<R;V+=2){var X=U[V],H=U[V+1];j[M]=X,j[M+1]=H,j[M+2]=s.r,j[M+3]=s.g,j[M+4]=s.b,j[M+5]=s.a;var G=X-P,W=H-A,Y=(k*G+L*W)*F,z=(N*G+D*W)*F,q=1-Y-z;j[M+6]=b*Y+S*z+I*q,j[M+7]=x*Y+E*z+O*q,l&&(j[M+8]=a.r,j[M+9]=a.g,j[M+10]=a.b,j[M+11]=a.a),M+=f}M=c.length;var K=t.Utils.setArraySize(c,M+3*(B-2));B--;for(V=1;V<B;V++)K[M]=g,K[M+1]=g+V,K[M+2]=g+V+1,M+=3;g+=B+1}}},e.prototype.clip=function(t,e,i,n,r,o,s,a){var l=a,h=!1,u=null;s.length%4>=2?(u=a,a=this.scratch):u=this.scratch,u.length=0,u.push(t),u.push(e),u.push(i),u.push(n),u.push(r),u.push(o),u.push(t),u.push(e),a.length=0;for(var c=s,d=s.length-4,p=0;;p+=2){for(var f=c[p],g=c[p+1],m=c[p+2],_=c[p+3],v=f-m,y=g-_,b=u,x=u.length-2,w=a.length,T=0;T<x;T+=2){var S=b[T],E=b[T+1],P=b[T+2],A=b[T+3],I=v*(A-_)-y*(P-m)>0;if(v*(E-_)-y*(S-m)>0){if(I){a.push(P),a.push(A);continue}var O=((M=P-S)*(g-E)-(C=A-E)*(f-S))/(C*(m-f)-M*(_-g));a.push(f+(m-f)*O),a.push(g+(_-g)*O)}else if(I){var C,M;O=((M=P-S)*(g-E)-(C=A-E)*(f-S))/(C*(m-f)-M*(_-g));a.push(f+(m-f)*O),a.push(g+(_-g)*O),a.push(P),a.push(A)}h=!0}if(w==a.length)return l.length=0,!0;if(a.push(a[0]),a.push(a[1]),p==d)break;var R=a;(a=u).length=0,u=R}if(l!=a){l.length=0;p=0;for(var k=a.length-2;p<k;p++)l[p]=a[p]}else l.length=l.length-2;return h},e.makeClockwise=function(t){for(var e=t,i=t.length,n=e[i-2]*e[1]-e[0]*e[i-1],r=0,o=0,s=0,a=0,l=i-3;a<l;a+=2)r=e[a],o=e[a+1],s=e[a+2],n+=r*e[a+3]-s*o;if(!(n<0)){a=0;var h=i-2;for(l=i>>1;a<l;a+=2){var u=e[a],c=e[a+1],d=h-a;e[a]=e[d],e[a+1]=e[d+1],e[d]=u,e[d+1]=c}}},e}();t.SkeletonClipping=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t}();t.SkeletonData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){t.FAIL_ON_NON_EXISTING_SKIN=!1;var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var n=this.scale,r=new t.SkeletonData,o="string"==typeof i?JSON.parse(i):i,s=o.skeleton;if(null!=s){if(r.hash=s.hash,r.version=s.spine,"3.8"!==r.version.substr(0,3)){var a="PixiJS Spine plugin supports only format for Spine 3.8. Your model has version "+s.spine+". Please look in pixi-spine repository README for another branch.";console.error(a)}if("3.8.75"===r.version){a="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(a)}r.x=s.x,r.y=s.y,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images}if(o.bones)for(var l=0;l<o.bones.length;l++){var h=o.bones[l],u=null,c=this.getValue(h,"parent",null);if(null!=c&&null==(u=r.findBone(c)))throw new Error("Parent bone not found: "+c);(g=new t.BoneData(r.bones.length,h.name,u)).length=this.getValue(h,"length",0)*n,g.x=this.getValue(h,"x",0)*n,g.y=this.getValue(h,"y",0)*n,g.rotation=this.getValue(h,"rotation",0),g.scaleX=this.getValue(h,"scaleX",1),g.scaleY=this.getValue(h,"scaleY",1),g.shearX=this.getValue(h,"shearX",0),g.shearY=this.getValue(h,"shearY",0),g.transformMode=e.transformModeFromString(this.getValue(h,"transform","normal")),g.skinRequired=this.getValue(h,"skin",!1),r.bones.push(g)}if(o.slots)for(l=0;l<o.slots.length;l++){var d=(A=o.slots[l]).name,p=A.bone,f=r.findBone(p);if(null==f)throw new Error("Slot bone not found: "+p);var g=new t.SlotData(r.slots.length,d,f),m=this.getValue(A,"color",null);null!=m&&g.color.setFromString(m);var _=this.getValue(A,"dark",null);null!=_&&(g.darkColor=new t.Color(1,1,1,1),g.darkColor.setFromString(_)),g.attachmentName=this.getValue(A,"attachment",null),g.blendMode=e.blendModeFromString(this.getValue(A,"blend","normal")),r.slots.push(g)}if(o.ik)for(l=0;l<o.ik.length;l++){var v=o.ik[l];(g=new t.IkConstraintData(v.name)).order=this.getValue(v,"order",0),g.skinRequired=this.getValue(v,"skin",!1);for(var y=0;y<v.bones.length;y++){p=v.bones[y];if(null==(S=r.findBone(p)))throw new Error("IK bone not found: "+p);g.bones.push(S)}var b=v.target;if(g.target=r.findBone(b),null==g.target)throw new Error("IK target bone not found: "+b);g.mix=this.getValue(v,"mix",1),g.softness=this.getValue(v,"softness",0)*n,g.bendDirection=this.getValue(v,"bendPositive",!0)?1:-1,g.compress=this.getValue(v,"compress",!1),g.stretch=this.getValue(v,"stretch",!1),g.uniform=this.getValue(v,"uniform",!1),r.ikConstraints.push(g)}if(o.transform)for(l=0;l<o.transform.length;l++){v=o.transform[l];(g=new t.TransformConstraintData(v.name)).order=this.getValue(v,"order",0),g.skinRequired=this.getValue(v,"skin",!1);for(y=0;y<v.bones.length;y++){p=v.bones[y];if(null==(S=r.findBone(p)))throw new Error("Transform constraint bone not found: "+p);g.bones.push(S)}b=v.target;if(g.target=r.findBone(b),null==g.target)throw new Error("Transform constraint target bone not found: "+b);g.local=this.getValue(v,"local",!1),g.relative=this.getValue(v,"relative",!1),g.offsetRotation=this.getValue(v,"rotation",0),g.offsetX=this.getValue(v,"x",0)*n,g.offsetY=this.getValue(v,"y",0)*n,g.offsetScaleX=this.getValue(v,"scaleX",0),g.offsetScaleY=this.getValue(v,"scaleY",0),g.offsetShearY=this.getValue(v,"shearY",0),g.rotateMix=this.getValue(v,"rotateMix",1),g.translateMix=this.getValue(v,"translateMix",1),g.scaleMix=this.getValue(v,"scaleMix",1),g.shearMix=this.getValue(v,"shearMix",1),r.transformConstraints.push(g)}if(o.path)for(l=0;l<o.path.length;l++){v=o.path[l];(g=new t.PathConstraintData(v.name)).order=this.getValue(v,"order",0),g.skinRequired=this.getValue(v,"skin",!1);for(y=0;y<v.bones.length;y++){p=v.bones[y];if(null==(S=r.findBone(p)))throw new Error("Transform constraint bone not found: "+p);g.bones.push(S)}b=v.target;if(g.target=r.findSlot(b),null==g.target)throw new Error("Path target slot not found: "+b);g.positionMode=e.positionModeFromString(this.getValue(v,"positionMode","percent")),g.spacingMode=e.spacingModeFromString(this.getValue(v,"spacingMode","length")),g.rotateMode=e.rotateModeFromString(this.getValue(v,"rotateMode","tangent")),g.offsetRotation=this.getValue(v,"rotation",0),g.position=this.getValue(v,"position",0),g.positionMode==t.PositionMode.Fixed&&(g.position*=n),g.spacing=this.getValue(v,"spacing",0),g.spacingMode!=t.SpacingMode.Length&&g.spacingMode!=t.SpacingMode.Fixed||(g.spacing*=n),g.rotateMix=this.getValue(v,"rotateMix",1),g.translateMix=this.getValue(v,"translateMix",1),r.pathConstraints.push(g)}if(o.skins)for(l=0;l<o.skins.length;l++){var x=o.skins[l],w=new t.Skin(x.name);if(x.bones)for(var T=0;T<x.bones.length;T++){var S;if(null==(S=r.findBone(x.bones[T])))throw new Error("Skin bone not found: "+x.bones[l]);w.bones.push(S)}if(x.ik)for(T=0;T<x.ik.length;T++){if(null==(E=r.findIkConstraint(x.ik[T])))throw new Error("Skin IK constraint not found: "+x.ik[l]);w.constraints.push(E)}if(x.transform)for(T=0;T<x.transform.length;T++){if(null==(E=r.findTransformConstraint(x.transform[T])))throw new Error("Skin transform constraint not found: "+x.transform[l]);w.constraints.push(E)}if(x.path)for(T=0;T<x.path.length;T++){var E;if(null==(E=r.findPathConstraint(x.path[T])))throw new Error("Skin path constraint not found: "+x.path[l]);w.constraints.push(E)}for(var d in x.attachments){var P=r.findSlot(d);if(null==P)throw new Error("Slot not found: "+d);var A=x.attachments[d];for(var I in A){var O=this.readAttachment(A[I],w,P.index,I,r);null!=O&&w.setAttachment(P.index,I,O)}}r.skins.push(w),"default"==w.name&&(r.defaultSkin=w)}l=0;for(var C=this.linkedMeshes.length;l<C;l++){var M=this.linkedMeshes[l];if(null==(w=null==M.skin?r.defaultSkin:r.findSkin(M.skin)))throw new Error("Skin not found: "+M.skin);var R=w.getAttachment(M.slotIndex,M.parent);if(null==R)throw new Error("Parent mesh not found: "+M.parent);M.mesh.deformAttachment=M.inheritDeform?R:M.mesh,M.mesh.setParentMesh(R)}if(this.linkedMeshes.length=0,o.events)for(var k in o.events){var L=o.events[k];(g=new t.EventData(k)).intValue=this.getValue(L,"int",0),g.floatValue=this.getValue(L,"float",0),g.stringValue=this.getValue(L,"string",""),g.audioPath=this.getValue(L,"audio",null),null!=g.audioPath&&(g.volume=this.getValue(L,"volume",1),g.balance=this.getValue(L,"balance",0)),r.events.push(g)}if(o.animations)for(var D in o.animations){var N=o.animations[D];this.readAnimation(N,D,r)}return r},e.prototype.readAttachment=function(e,n,r,o,s){var a=this.scale;switch(o=this.getValue(e,"name",o),this.getValue(e,"type","region")){case"region":var l=this.getValue(e,"path",o),h=this.attachmentLoader.newRegionAttachment(n,o,l);return null==h?null:(h.path=l,h.x=this.getValue(e,"x",0)*a,h.y=this.getValue(e,"y",0)*a,h.scaleX=this.getValue(e,"scaleX",1),h.scaleY=this.getValue(e,"scaleY",1),h.rotation=this.getValue(e,"rotation",0),h.width=e.width*a,h.height=e.height*a,null!=(x=this.getValue(e,"color",null))&&h.color.setFromString(x),h);case"boundingbox":var u=this.attachmentLoader.newBoundingBoxAttachment(n,o);return null==u?null:(this.readVertices(e,u,e.vertexCount<<1),null!=(x=this.getValue(e,"color",null))&&u.color.setFromString(x),u);case"mesh":case"linkedmesh":l=this.getValue(e,"path",o);var c=this.attachmentLoader.newMeshAttachment(n,o,l);if(null==c)return null;c.path=l,null!=(x=this.getValue(e,"color",null))&&c.color.setFromString(x),c.width=this.getValue(e,"width",0)*a,c.height=this.getValue(e,"height",0)*a;var d=this.getValue(e,"parent",null);if(null!=d)return this.linkedMeshes.push(new i(c,this.getValue(e,"skin",null),r,d,this.getValue(e,"deform",!0))),c;var p=e.uvs;return this.readVertices(e,c,p.length),c.triangles=e.triangles,c.regionUVs=new Float32Array(p),c.edges=this.getValue(e,"edges",null),c.hullLength=2*this.getValue(e,"hull",0),c;case"path":if(null==(l=this.attachmentLoader.newPathAttachment(n,o)))return null;l.closed=this.getValue(e,"closed",!1),l.constantSpeed=this.getValue(e,"constantSpeed",!0);var f=e.vertexCount;this.readVertices(e,l,f<<1);for(var g=t.Utils.newArray(f/3,0),m=0;m<e.lengths.length;m++)g[m]=e.lengths[m]*a;return l.lengths=g,null!=(x=this.getValue(e,"color",null))&&l.color.setFromString(x),l;case"point":var _=this.attachmentLoader.newPointAttachment(n,o);return null==_?null:(_.x=this.getValue(e,"x",0)*a,_.y=this.getValue(e,"y",0)*a,_.rotation=this.getValue(e,"rotation",0),null!=(x=this.getValue(e,"color",null))&&_.color.setFromString(x),_);case"clipping":var v=this.attachmentLoader.newClippingAttachment(n,o);if(null==v)return null;var y=this.getValue(e,"end",null);if(null!=y){var b=s.findSlot(y);if(null==b)throw new Error("Clipping end slot not found: "+y);v.endSlot=b}var x;f=e.vertexCount;return this.readVertices(e,v,f<<1),null!=(x=this.getValue(e,"color",null))&&v.color.setFromString(x),v}return null},e.prototype.readVertices=function(e,i,n){var r=this.scale;i.worldVerticesLength=n;var o=e.vertices;if(n!=o.length){var s=new Array,a=new Array;for(c=0,d=o.length;c<d;){var l=o[c++];a.push(l);for(var h=c+4*l;c<h;c+=4)a.push(o[c]),s.push(o[c+1]*r),s.push(o[c+2]*r),s.push(o[c+3])}i.bones=a,i.vertices=t.Utils.toFloatArray(s)}else{var u=t.Utils.toFloatArray(o);if(1!=r)for(var c=0,d=o.length;c<d;c++)u[c]*=r;i.vertices=u}},e.prototype.readAnimation=function(e,i,n){var r=this.scale,o=new Array,s=0;if(e.slots)for(var a in e.slots){var l=e.slots[a];if(-1==(J=n.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(var h in l){var u=l[h];if("attachment"==h){(b=new t.AttachmentTimeline(u.length)).slotIndex=J;for(var c=0,d=0;d<u.length;d++){var p=u[d];b.setFrame(c++,this.getValue(p,"time",0),p.name)}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}else if("color"==h){(b=new t.ColorTimeline(u.length)).slotIndex=J;for(c=0,d=0;d<u.length;d++){p=u[d];var f=new t.Color;f.setFromString(p.color||"ffffffff"),b.setFrame(c,this.getValue(p,"time",0),f.r,f.g,f.b,f.a),this.readCurve(p,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+a+")");(b=new t.TwoColorTimeline(u.length)).slotIndex=J;for(c=0,d=0;d<u.length;d++){p=u[d];var g=new t.Color,m=new t.Color;g.setFromString(p.light),m.setFromString(p.dark),b.setFrame(c,this.getValue(p,"time",0),g.r,g.g,g.b,g.a,m.r,m.g,m.b),this.readCurve(p,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var _ in e.bones){var v=e.bones[_],y=n.findBoneIndex(_);if(-1==y)throw new Error("Bone not found: "+_);for(var h in v){u=v[h];if("rotate"===h){(b=new t.RotateTimeline(u.length)).boneIndex=y;for(c=0,d=0;d<u.length;d++){p=u[d];b.setFrame(c,this.getValue(p,"time",0),this.getValue(p,"angle",0)),this.readCurve(p,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+_+")");var b=null,x=1,w=0;"scale"===h?(b=new t.ScaleTimeline(u.length),w=1):"shear"===h?b=new t.ShearTimeline(u.length):(b=new t.TranslateTimeline(u.length),x=r),b.boneIndex=y;for(c=0,d=0;d<u.length;d++){p=u[d];var T=this.getValue(p,"x",w),S=this.getValue(p,"y",w);b.setFrame(c,this.getValue(p,"time",0),T*x,S*x),this.readCurve(p,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(e.ik)for(var E in e.ik){var P=e.ik[E],A=n.findIkConstraint(E);(b=new t.IkConstraintTimeline(P.length)).ikConstraintIndex=n.ikConstraints.indexOf(A);for(c=0,d=0;d<P.length;d++){p=P[d];b.setFrame(c,this.getValue(p,"time",0),this.getValue(p,"mix",1),this.getValue(p,"softness",0)*r,this.getValue(p,"bendPositive",!0)?1:-1,this.getValue(p,"compress",!1),this.getValue(p,"stretch",!1)),this.readCurve(p,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var E in e.transform){P=e.transform[E],A=n.findTransformConstraint(E);(b=new t.TransformConstraintTimeline(P.length)).transformConstraintIndex=n.transformConstraints.indexOf(A);for(c=0,d=0;d<P.length;d++){p=P[d];b.setFrame(c,this.getValue(p,"time",0),this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.path)for(var E in e.path){P=e.path[E];var I=n.findPathConstraintIndex(E);if(-1==I)throw new Error("Path constraint not found: "+E);var O=n.pathConstraints[I];for(var h in P){u=P[h];if("position"===h||"spacing"===h){b=null,x=1;"spacing"===h?(b=new t.PathConstraintSpacingTimeline(u.length),O.spacingMode!=t.SpacingMode.Length&&O.spacingMode!=t.SpacingMode.Fixed||(x=r)):(b=new t.PathConstraintPositionTimeline(u.length),O.positionMode==t.PositionMode.Fixed&&(x=r)),b.pathConstraintIndex=I;for(c=0,d=0;d<u.length;d++){p=u[d];b.setFrame(c,this.getValue(p,"time",0),this.getValue(p,h,0)*x),this.readCurve(p,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===h){(b=new t.PathConstraintMixTimeline(u.length)).pathConstraintIndex=I;for(c=0,d=0;d<u.length;d++){p=u[d];b.setFrame(c,this.getValue(p,"time",0),this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,b,c),c++}o.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(e.deform)for(var C in e.deform){var M=e.deform[C],R=n.findSkin(C);if(null!=R)for(var a in M){l=M[a];if(-1==(J=n.findSlotIndex(a)))throw new Error("Slot not found: "+l.name);for(var h in l){u=l[h];var k=R.getAttachment(J,h);if(null==k)throw new Error("Deform attachment not found: "+u.name);var L=null!=k.bones,D=k.vertices,N=L?D.length/3*2:D.length;(b=new t.DeformTimeline(u.length)).slotIndex=J,b.attachment=k;c=0;for(var F=0;F<u.length;F++){p=u[F];var B=void 0,U=this.getValue(p,"vertices",null);if(null==U)B=L?t.Utils.newFloatArray(N):D;else{B=t.Utils.newFloatArray(N);var j=this.getValue(p,"offset",0);if(t.Utils.arrayCopy(U,0,B,j,U.length),1!=r)for(var V=(d=j)+U.length;d<V;d++)B[d]*=r;if(!L)for(d=0;d<N;d++)B[d]+=D[d]}b.setFrame(c,this.getValue(p,"time",0),B),this.readCurve(p,b,c),c++}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}}else if(t.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+C)}var X=e.drawOrder;if(null==X&&(X=e.draworder),null!=X){b=new t.DrawOrderTimeline(X.length);var H=n.slots.length;for(c=0,F=0;F<X.length;F++){var G=X[F],W=null,Y=this.getValue(G,"offsets",null);if(null!=Y){W=t.Utils.newArray(H,-1);var z=t.Utils.newArray(H-Y.length,0),q=0,K=0;for(d=0;d<Y.length;d++){var J,Z=Y[d];if(-1==(J=n.findSlotIndex(Z.slot)))throw new Error("Slot not found: "+Z.slot);for(;q!=J;)z[K++]=q++;W[q+Z.offset]=q++}for(;q<H;)z[K++]=q++;for(d=H-1;d>=0;d--)-1==W[d]&&(W[d]=z[--K])}b.setFrame(c++,this.getValue(G,"time",0),W)}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}if(e.events){for(b=new t.EventTimeline(e.events.length),c=0,d=0;d<e.events.length;d++){var Q=e.events[d],$=n.findEvent(Q.name);if(null==$)throw new Error("Event not found: "+Q.name);var tt=new t.Event(t.Utils.toSinglePrecision(this.getValue(Q,"time",0)),$);tt.intValue=this.getValue(Q,"int",$.intValue),tt.floatValue=this.getValue(Q,"float",$.floatValue),tt.stringValue=this.getValue(Q,"string",$.stringValue),null!=tt.data.audioPath&&(tt.volume=this.getValue(Q,"volume",1),tt.balance=this.getValue(Q,"balance",0)),b.setFrame(c++,tt)}o.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new t.Animation(i,o,s))},e.prototype.readCurve=function(t,e,i){if(t.hasOwnProperty("curve"))if("stepped"===t.curve)e.setStepped(i);else{var n=t.curve;e.setCurve(i,n,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},e.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var i=function(t,e,i,n,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n,this.inheritDeform=r}}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t,e,i){this.slotIndex=t,this.name=e,this.attachment=i};t.SkinEntry=e;var i=function(){function i(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return i.prototype.setAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i},i.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],n=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==i){n=!0;break}n||this.bones.push(i)}for(e=0;e<t.constraints.length;e++){var o=t.constraints[e];for(n=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==o){n=!0;break}n||this.constraints.push(o)}var s=t.getAttachments();for(e=0;e<s.length;e++){var a=s[e];this.setAttachment(a.slotIndex,a.name,a.attachment)}},i.prototype.copySkin=function(e){for(var i=0;i<e.bones.length;i++){for(var n=e.bones[i],r=!1,o=0;o<this.bones.length;o++)if(this.bones[o]==n){r=!0;break}r||this.bones.push(n)}for(i=0;i<e.constraints.length;i++){var s=e.constraints[i];for(r=!1,o=0;o<this.constraints.length;o++)if(this.constraints[o]==s){r=!0;break}r||this.constraints.push(s)}var a=e.getAttachments();for(i=0;i<a.length;i++){var l=a[i];null!=l.attachment&&(l.attachment instanceof t.MeshAttachment?(l.attachment=l.attachment.newLinkedMesh(),this.setAttachment(l.slotIndex,l.name,l.attachment)):(l.attachment=l.attachment.copy(),this.setAttachment(l.slotIndex,l.name,l.attachment)))}},i.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},i.prototype.removeAttachment=function(t,e){var i=this.attachments[t];i&&(i[e]=null)},i.prototype.getAttachments=function(){for(var t=new Array,i=0;i<this.attachments.length;i++){var n=this.attachments[i];if(n)for(var r in n){var o=n[r];o&&t.push(new e(i,r,o))}}return t},i.prototype.getAttachmentsForSlot=function(t,i){var n=this.attachments[t];if(n)for(var r in n){var o=n[r];o&&i.push(new e(t,r,o))}},i.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},i.prototype.attachAll=function(t,e){for(var i=0,n=0;n<t.slots.length;n++){var r=t.slots[n],o=r.getAttachment();if(o&&i<e.attachments.length){var s=e.attachments[i];for(var a in s){if(o==s[a]){var l=this.getAttachment(i,a);null!=l&&r.setAttachment(l);break}}}i++}},i}();t.Skin=i}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(e,i){if(this.deform=new Array,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("bone cannot be null.");this.data=e,this.bone=i,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e,i,n){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=e,this.name=i,this.boneData=n};t.SlotData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e,i,n=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return i.MirroredRepeat;case"clamptoedge":return i.ClampToEdge;case"repeat":return i.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=n,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(e=t.TextureFilter||(t.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(i=t.TextureWrap||(t.TextureWrap={}));var r=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),t}();t.TextureRegion=r}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t,e,i){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,i)}return e.prototype.addTexture=function(e,i){for(var o=this.pages,s=null,a=0;a<o.length;a++)if(o[a].baseTexture===i.baseTexture){s=o[a];break}if(null===s){(s=new n).name="texturePage";var l=i.baseTexture;s.width=l.realWidth,s.height=l.realHeight,s.baseTexture=l,s.minFilter=s.magFilter=t.TextureFilter.Nearest,s.uWrap=t.TextureWrap.ClampToEdge,s.vWrap=t.TextureWrap.ClampToEdge,o.push(s)}var h=new r;return h.name=e,h.page=s,h.texture=i,h.index=-1,this.regions.push(h),h},e.prototype.addTextureHash=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.addTexture(e&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,t[i])},e.prototype.addSpineAtlas=function(t,e,i){return this.load(t,e,i)},e.prototype.load=function(e,o,s){var a=this;if(null==o)throw new Error("textureLoader cannot be null.");var l=new i(e),h=new Array(4),u=null,c=function(){for(;;){var e=l.readLine();if(null==e)return s&&s(a);if(0==(e=e.trim()).length)u=null;else{if(!u){(u=new n).name=e,2==l.readTuple(h)&&(u.width=parseInt(h[0]),u.height=parseInt(h[1]),l.readTuple(h)),l.readTuple(h),u.minFilter=t.Texture.filterFromString(h[0]),u.magFilter=t.Texture.filterFromString(h[1]);var i=l.readValue();u.uWrap=t.TextureWrap.ClampToEdge,u.vWrap=t.TextureWrap.ClampToEdge,"x"==i?u.uWrap=t.TextureWrap.Repeat:"y"==i?u.vWrap=t.TextureWrap.Repeat:"xy"==i&&(u.uWrap=u.vWrap=t.TextureWrap.Repeat),o(e,(function(t){if(null===t)return a.pages.splice(a.pages.indexOf(u),1),s&&s(null);u.baseTexture=t,t.hasLoaded||(t.width=u.width,t.height=u.height),a.pages.push(u),u.setFilters(),u.width&&u.height||(u.width=t.realWidth,u.height=t.realHeight,u.width&&u.height||console.log("ERROR spine atlas page "+u.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),c()})),a.pages.push(u);break}var d=new r;d.name=e,d.page=u;var p=l.readValue(),f=0;f="true"==p.toLocaleLowerCase()?6:"false"==p.toLocaleLowerCase()?0:(720-parseFloat(p))%360/45,l.readTuple(h);var g=parseInt(h[0]),m=parseInt(h[1]);l.readTuple(h);var _=parseInt(h[0]),v=parseInt(h[1]),y=u.baseTexture.resolution;g/=y,m/=y,_/=y,v/=y;var b=f%4!=0,x=new PIXI.Rectangle(g,m,b?v:_,b?_:v);4==l.readTuple(h)&&4==l.readTuple(h)&&l.readTuple(h);var w=parseInt(h[0])/y,T=parseInt(h[1])/y;l.readTuple(h);var S=parseInt(h[0])/y,E=parseInt(h[1])/y,P=new PIXI.Rectangle(0,0,w,T),A=new PIXI.Rectangle(S,T-v-E,_,v);if("3"!=PIXI.VERSION[0])d.texture=new PIXI.Texture(d.page.baseTexture,x,P,A,f);else{var I=new PIXI.Rectangle(g,m,_,v),O=I.clone();A.width=w,A.height=T,d.texture=new PIXI.Texture(d.page.baseTexture,I,O,A,f)}d.index=parseInt(l.readValue()),d.texture._updateUvs(),a.regions.push(d)}}};c()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}();t.TextureAtlas=e;var i=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw new Error("Invalid line: "+e);for(var n=0,r=i+1;n<3;n++){var o=e.indexOf(",",r);if(-1==o)break;t[n]=e.substr(r,o-r).trim(),r=o+1}return t[n]=e.substring(r).trim(),n+1},t}(),n=function(){function e(){}return e.prototype.setFilters=function(){var e=this.baseTexture,i=this.minFilter;i==t.TextureFilter.Linear?e.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==t.TextureFilter.Nearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:(e.mipmap=!0,i==t.TextureFilter.MipMapNearestNearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:e.scaleMode=PIXI.SCALE_MODES.LINEAR)},e}();t.TextureAtlasPage=n;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=r}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(e,i){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,this.active=!1,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(i.findBone(e.bones[n].name));this.target=i.findBone(e.target.name)}return e.prototype.isActive=function(){return this.active},e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,o=this.target,s=o.matrix,a=s.a,l=s.c,h=s.b,u=s.d,c=a*u-l*h>0?t.MathUtils.degRad:-t.MathUtils.degRad,d=this.data.offsetRotation*c,p=this.data.offsetShearY*c,f=this.bones,g=0,m=f.length;g<m;g++){var _=f[g],v=!1,y=_.matrix;if(0!=e){var b=y.a,x=y.c,w=y.b,T=y.d;(O=Math.atan2(h,a)-Math.atan2(w,b)+d)>t.MathUtils.PI?O-=t.MathUtils.PI2:O<-t.MathUtils.PI&&(O+=t.MathUtils.PI2),O*=e;var S=Math.cos(O),E=Math.sin(O);y.a=S*b-E*w,y.c=S*x-E*T,y.b=E*b+S*w,y.d=E*x+S*T,v=!0}if(0!=i){var P=this.temp;o.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),y.tx+=(P.x-y.tx)*i,y.ty+=(P.y-y.ty)*i,v=!0}if(n>0){var A=Math.sqrt(y.a*y.a+y.b*y.b),I=Math.sqrt(a*a+h*h);A>1e-5&&(A=(A+(I-A+this.data.offsetScaleX)*n)/A),y.a*=A,y.b*=A,A=Math.sqrt(y.c*y.c+y.d*y.d),I=Math.sqrt(l*l+u*u),A>1e-5&&(A=(A+(I-A+this.data.offsetScaleY)*n)/A),y.c*=A,y.d*=A,v=!0}if(r>0){x=y.c,T=y.d;var O,C=Math.atan2(T,x);(O=Math.atan2(u,l)-Math.atan2(h,a)-(C-Math.atan2(y.b,y.a)))>t.MathUtils.PI?O-=t.MathUtils.PI2:O<-t.MathUtils.PI&&(O+=t.MathUtils.PI2),O=C+(O+p)*r;A=Math.sqrt(x*x+T*T);y.c=Math.cos(O)*A,y.d=Math.sin(O)*A,v=!0}v&&(_.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,o=this.target,s=o.matrix,a=s.a,l=s.c,h=s.b,u=s.d,c=a*u-l*h>0?t.MathUtils.degRad:-t.MathUtils.degRad,d=this.data.offsetRotation*c,p=this.data.offsetShearY*c,f=this.bones,g=0,m=f.length;g<m;g++){var _=f[g],v=!1,y=_.matrix;if(0!=e){var b=y.a,x=y.c,w=y.b,T=y.d;(I=Math.atan2(h,a)+d)>t.MathUtils.PI?I-=t.MathUtils.PI2:I<-t.MathUtils.PI&&(I+=t.MathUtils.PI2),I*=e;var S=Math.cos(I),E=Math.sin(I);y.a=S*b-E*w,y.c=S*x-E*T,y.b=E*b+S*w,y.d=E*x+S*T,v=!0}if(0!=i){var P=this.temp;o.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),y.tx+=P.x*i,y.ty+=P.y*i,v=!0}if(n>0){var A=(Math.sqrt(a*a+h*h)-1+this.data.offsetScaleX)*n+1;y.a*=A,y.b*=A,A=(Math.sqrt(l*l+u*u)-1+this.data.offsetScaleY)*n+1,y.c*=A,y.d*=A,v=!0}if(r>0){var I;(I=Math.atan2(u,l)-Math.atan2(h,a))>t.MathUtils.PI?I-=t.MathUtils.PI2:I<-t.MathUtils.PI&&(I+=t.MathUtils.PI2);x=y.c,T=y.d;I=Math.atan2(T,x)+(I-t.MathUtils.PI/2+p)*r;A=Math.sqrt(x*x+T*T);y.c=Math.cos(I)*A,y.d=Math.sin(I)*A,v=!0}v&&(_.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var o=this.bones,s=0,a=o.length;s<a;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;if(0!=t){var u=r.arotation-h+this.data.offsetRotation;h+=(u-=360*(16384-(16384.499999999996-u/360|0)))*t}var c=l.ax,d=l.ay;0!=e&&(c+=(r.ax-c+this.data.offsetX)*e,d+=(r.ay-d+this.data.offsetY)*e);var p=l.ascaleX,f=l.ascaleY;i>0&&(p>1e-5&&(p=(p+(r.ascaleX-p+this.data.offsetScaleX)*i)/p),f>1e-5&&(f=(f+(r.ascaleY-f+this.data.offsetScaleY)*i)/f));var g=l.ashearY;if(n>0){u=r.ashearY-g+this.data.offsetShearY;u-=360*(16384-(16384.499999999996-u/360|0)),l.shearY+=u*n}l.updateWorldTransformWith(c,d,h,p,f,l.ashearX,g)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,n=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var o=this.bones,s=0,a=o.length;s<a;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;0!=t&&(h+=(r.arotation+this.data.offsetRotation)*t);var u=l.ax,c=l.ay;0!=e&&(u+=(r.ax+this.data.offsetX)*e,c+=(r.ay+this.data.offsetY)*e);var d=l.ascaleX,p=l.ascaleY;i>0&&(d>1e-5&&(d*=(r.ascaleX-1+this.data.offsetScaleX)*i+1),p>1e-5&&(p*=(r.ascaleY-1+this.data.offsetScaleY)*i+1));var f=l.ashearY;n>0&&(f+=(r.ashearY+this.data.offsetShearY)*n),l.updateWorldTransformWith(u,c,h,d,p,l.ashearX,f)}},e}();t.TransformConstraint=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.rotateMix=0,i.translateMix=0,i.scaleMix=0,i.shearMix=0,i.offsetRotation=0,i.offsetX=0,i.offsetY=0,i.offsetScaleX=0,i.offsetScaleY=0,i.offsetShearY=0,i.relative=!1,i.local=!1,i}return o(e,t),e}(t.ConstraintData);t.TransformConstraintData=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return e.prototype.triangulate=function(t){var i=t,n=t.length>>1,r=this.indicesArray;r.length=0;for(var o=0;o<n;o++)r[o]=o;var s=this.isConcaveArray;s.length=0;o=0;for(var a=n;o<a;++o)s[o]=e.isConcave(o,n,i,r);var l=this.triangles;for(l.length=0;n>3;){for(var h=n-1,u=(o=0,1);;){t:if(!s[o]){for(var c=r[h]<<1,d=r[o]<<1,p=r[u]<<1,f=i[c],g=i[c+1],m=i[d],_=i[d+1],v=i[p],y=i[p+1],b=(u+1)%n;b!=h;b=(b+1)%n)if(s[b]){var x=r[b]<<1,w=i[x],T=i[x+1];if(e.positiveArea(v,y,f,g,w,T)&&e.positiveArea(f,g,m,_,w,T)&&e.positiveArea(m,_,v,y,w,T))break t}break}if(0==u){do{if(!s[o])break;o--}while(o>0);break}h=o,o=u,u=(u+1)%n}l.push(r[(n+o-1)%n]),l.push(r[o]),l.push(r[(o+1)%n]),r.splice(o,1),s.splice(o,1);var S=(--n+o-1)%n,E=o==n?0:o;s[S]=e.isConcave(S,n,i,r),s[E]=e.isConcave(E,n,i,r)}return 3==n&&(l.push(r[2]),l.push(r[0]),l.push(r[1])),l},e.prototype.decompose=function(t,i){var n=t,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var o=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(o),o.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var a=this.polygonPool.obtain();a.length=0;for(var l=-1,h=0,u=0,c=i.length;u<c;u+=3){var d=i[u]<<1,p=i[u+1]<<1,f=i[u+2]<<1,g=n[d],m=n[d+1],_=n[p],v=n[p+1],y=n[f],b=n[f+1],x=!1;if(l==d){var w=a.length-4,T=e.winding(a[w],a[w+1],a[w+2],a[w+3],y,b),S=e.winding(y,b,a[0],a[1],a[2],a[3]);T==h&&S==h&&(a.push(y),a.push(b),s.push(f),x=!0)}x||(a.length>0?(r.push(a),o.push(s)):(this.polygonPool.free(a),this.polygonIndicesPool.free(s)),(a=this.polygonPool.obtain()).length=0,a.push(g),a.push(m),a.push(_),a.push(v),a.push(y),a.push(b),(s=this.polygonIndicesPool.obtain()).length=0,s.push(d),s.push(p),s.push(f),h=e.winding(g,m,_,v,y,b),l=d)}a.length>0&&(r.push(a),o.push(s));for(u=0,c=r.length;u<c;u++)if(0!=(s=o[u]).length)for(var E=s[0],P=s[s.length-1],A=(a=r[u])[w=a.length-4],I=a[w+1],O=a[w+2],C=a[w+3],M=a[0],R=a[1],k=a[2],L=a[3],D=e.winding(A,I,O,C,M,R),N=0;N<c;N++)if(N!=u){var F=o[N];if(3==F.length){var B=F[0],U=F[1],j=F[2],V=r[N];y=V[V.length-2],b=V[V.length-1];if(B==E&&U==P){T=e.winding(A,I,O,C,y,b),S=e.winding(y,b,M,R,k,L);T==D&&S==D&&(V.length=0,F.length=0,a.push(y),a.push(b),s.push(j),A=O,I=C,O=y,C=b,N=0)}}}for(u=r.length-1;u>=0;u--)0==(a=r[u]).length&&(r.splice(u,1),this.polygonPool.free(a),s=o[u],o.splice(u,1),this.polygonIndicesPool.free(s));return r},e.isConcave=function(t,e,i,n){var r=n[(e+t-1)%e]<<1,o=n[t]<<1,s=n[(t+1)%e]<<1;return!this.positiveArea(i[r],i[r+1],i[o],i[o+1],i[s],i[s+1])},e.positiveArea=function(t,e,i,n,r,o){return t*(o-n)+i*(e-o)+r*(n-e)>=0},e.winding=function(t,e,i,n,r,o){var s=i-t,a=n-e;return r*a-o*s+s*e-t*a>=0?1:-1},e}();t.Triangulator=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var i=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=i,this.a=n}return t.prototype.set=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,i,n){return this.r+=t,this.g+=e,this.b+=i,this.a+=n,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=i;var n=function(){function t(){}return t.clamp=function(t,e,i){return t<e?e:t>i?i:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,i){return t.randomTriangularWith(e,i,.5*(e+i))},t.randomTriangularWith=function(t,e,i){var n=Math.random(),r=e-t;return n<=(i-t)/r?t+Math.sqrt(n*r*(i-t)):e-Math.sqrt((1-n)*r*(e-i))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();t.MathUtils=n;var r=function(){function t(){}return t.prototype.apply=function(t,e,i){return t+(e-t)*this.applyInternal(i)},t}();t.Interpolation=r;var s=function(t){function e(e){var i=t.call(this)||this;return i.power=2,i.power=e,i}return o(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(r);t.Pow=s;var a=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(s);t.PowOut=a;var l=function(){function t(){}return t.arrayCopy=function(t,e,i,n,r){for(var o=e,s=n;o<e+r;o++,s++)i[s]=t[o]},t.setArraySize=function(t,e,i){void 0===i&&(i=0);var n=t.length;if(n==e)return t;if(t.length=e,n<e)for(var r=n;r<e;r++)t[r]=i;return t},t.ensureArrayCapacity=function(e,i,n){return void 0===n&&(n=0),e.length>=i?e:t.setArraySize(e,i,n)},t.newArray=function(t,e){for(var i=new Array(t),n=0;n<t;n++)i[n]=e;return i},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;return i},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;return i},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,i){void 0===i&&(i=!0);for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();t.Utils=l;var h=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e],n=i.matrix;console.log(i.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.tx+", "+n.ty)}},t}();t.DebugUtils=h;var u=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=u;var c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=c;var d=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=d;var p=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=p}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=e;var i=function(e){function i(t){var n=e.call(this,t)||this;return n.id=(65535&i.nextID++)<<11,n.worldVerticesLength=0,n.deformAttachment=n,n}return o(i,e),i.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},i.prototype.computeWorldVertices=function(t,e,i,n,r,o){i=r+(i>>1)*o;var s=t.bone.skeleton,a=t.deform,l=this.vertices,h=this.bones;if(null!=h){for(var u=0,c=0,d=0;d<e;d+=2){u+=(m=h[u])+1,c+=m}var p=s.bones;if(0==a.length)for(I=r,S=3*c;I<i;I+=o){var f=0,g=0,m=h[u++];for(m+=u;u<m;u++,S+=3){b=p[h[u]].matrix,O=l[S],C=l[S+1];var _=l[S+2];f+=(O*b.a+C*b.c+b.tx)*_,g+=(O*b.b+C*b.d+b.ty)*_}n[I]=f,n[I+1]=g}else for(var v=a,y=(I=r,S=3*c,c<<1);I<i;I+=o){f=0,g=0,m=h[u++];for(m+=u;u<m;u++,S+=3,y+=2){b=p[h[u]].matrix,O=l[S]+v[y],C=l[S+1]+v[y+1],_=l[S+2];f+=(O*b.a+C*b.c+b.tx)*_,g+=(O*b.b+C*b.d+b.ty)*_}n[I]=f,n[I+1]=g}}else{a.length>0&&(l=a);for(var b,x=(b=t.bone.matrix).tx,w=b.ty,T=b.a,S=b.c,E=b.b,P=b.d,A=e,I=r;I<i;A+=2,I+=o){var O=l[A],C=l[A+1];n[I]=O*T+C*S+x,n[I+1]=O*E+C*P+w}}},i.prototype.copyTo=function(e){null!=this.bones?(e.bones=new Array(this.bones.length),t.Utils.arrayCopy(this.bones,0,e.bones,0,this.bones.length)):e.bones=null,null!=this.vertices?(e.vertices=t.Utils.newFloatArray(this.vertices.length),t.Utils.arrayCopy(this.vertices,0,e.vertices,0,this.vertices.length)):e.vertices=null,e.worldVerticesLength=this.worldVerticesLength,e.deformAttachment=this.deformAttachment},i.nextID=0,i}(e);t.VertexAttachment=i}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(t.AttachmentType||(t.AttachmentType={}))}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(1,1,1,1),n}return o(i,e),i.prototype.copy=function(){var t=new i(name);return this.copyTo(t),t.color.setFromColor(this.color),t},i}(t.VertexAttachment);t.BoundingBoxAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(.2275,.2275,.8078,1),n}return o(i,e),i.prototype.copy=function(){var t=new i(name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},i}(t.VertexAttachment);t.ClippingAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(1,1,1,1),n.tempColor=new t.Color(0,0,0,0),n}return o(i,e),i.prototype.updateUVs=function(e,i){var n=this.regionUVs.length;if(i&&i.length==n||(i=t.Utils.newFloatArray(n)),null!=e){for(var r=e.texture._uvs,o=e.width,s=e.height,a=e.originalWidth,l=e.originalHeight,h=e.offsetX,u=e.pixiOffsetY,c=0;c<n;c+=2){var d=this.regionUVs[c],p=this.regionUVs[c+1];d=(d*a-h)/o,p=(p*l-u)/s,i[c]=(r.x0*(1-d)+r.x1*d)*(1-p)+(r.x3*(1-d)+r.x2*d)*p,i[c+1]=(r.y0*(1-d)+r.y1*d)*(1-p)+(r.y3*(1-d)+r.y2*d)*p}return i}},i.prototype.getParentMesh=function(){return this.parentMesh},i.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},i.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var e=new i(this.name);return e.region=this.region,e.path=this.path,e.color.setFromColor(this.color),this.copyTo(e),e.regionUVs=new Float32Array(this.regionUVs.length),t.Utils.arrayCopy(this.regionUVs,0,e.regionUVs,0,this.regionUVs.length),e.uvs=new Array(this.uvs.length),t.Utils.arrayCopy(this.uvs,0,e.uvs,0,this.uvs.length),e.triangles=new Array(this.triangles.length),t.Utils.arrayCopy(this.triangles,0,e.triangles,0,this.triangles.length),e.hullLength=this.hullLength,null!=this.edges&&(e.edges=new Array(this.edges.length),t.Utils.arrayCopy(this.edges,0,e.edges,0,this.edges.length)),e.width=this.width,e.height=this.height,e},i.prototype.newLinkedMesh=function(){var t=new i(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},i}(t.VertexAttachment);t.MeshAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.closed=!1,n.constantSpeed=!1,n.color=new t.Color(1,1,1,1),n}return o(i,e),i.prototype.copy=function(){var e=new i(name);return this.copyTo(e),e.lengths=new Array(this.lengths.length),t.Utils.arrayCopy(this.lengths,0,e.lengths,0,this.lengths.length),e.closed=closed,e.constantSpeed=this.constantSpeed,e.color.setFromColor(this.color),e},i}(t.VertexAttachment);t.PathAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(.38,.94,0,1),n}return o(i,e),i.prototype.computeWorldPosition=function(t,e){var i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e},i.prototype.computeWorldRotation=function(e){var i=e.matrix,n=t.MathUtils.cosDeg(this.rotation),r=t.MathUtils.sinDeg(this.rotation),o=n*i.a+r*i.c,s=n*i.b+r*i.d;return Math.atan2(s,o)*t.MathUtils.radDeg},i.prototype.copy=function(){var t=new i(name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},i}(t.VertexAttachment);t.PointAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new t.Color(1,1,1,1),n.offset=t.Utils.newFloatArray(8),n.uvs=t.Utils.newFloatArray(8),n.tempColor=new t.Color(1,1,1,1),n}return o(i,e),i.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,o=n+this.region.width*t,s=r+this.region.height*e,a=this.rotation*Math.PI/180,l=Math.cos(a),h=Math.sin(a),u=n*l+this.x,c=n*h,d=r*l+this.y,p=r*h,f=o*l+this.x,g=o*h,m=s*l+this.y,_=s*h,v=this.offset;v[i.OX1]=u-p,v[i.OY1]=d+c,v[i.OX2]=u-_,v[i.OY2]=m+c,v[i.OX3]=f-_,v[i.OY3]=m+g,v[i.OX4]=f-p,v[i.OY4]=d+g},i.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},i.prototype.computeWorldVertices=function(t,e,n,r){var o=this.offset,s=t.matrix,a=s.tx,l=s.ty,h=s.a,u=s.c,c=s.b,d=s.d,p=0,f=0;p=o[i.OX1],f=o[i.OY1],e[n]=p*h+f*u+a,e[n+1]=p*c+f*d+l,n+=r,p=o[i.OX2],f=o[i.OY2],e[n]=p*h+f*u+a,e[n+1]=p*c+f*d+l,n+=r,p=o[i.OX3],f=o[i.OY3],e[n]=p*h+f*u+a,e[n+1]=p*c+f*d+l,n+=r,p=o[i.OX4],f=o[i.OY4],e[n]=p*h+f*u+a,e[n+1]=p*c+f*d+l},i.prototype.copy=function(){var e=new i(name);return e.region=this.region,e.rendererObject=this.rendererObject,e.path=this.path,e.x=this.x,e.y=this.y,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.rotation=this.rotation,e.width=this.width,e.height=this.height,t.Utils.arrayCopy(this.uvs,0,e.uvs,0,8),t.Utils.arrayCopy(this.offset,0,e.offset,0,8),e.color.setFromColor(this.color),e},i.OX1=0,i.OY1=1,i.OX2=2,i.OY2=3,i.OX3=4,i.OY3=5,i.OX4=6,i.OY4=7,i.X1=0,i.Y1=1,i.C1R=2,i.C1G=3,i.C1B=4,i.C1A=5,i.U1=6,i.V1=7,i.X2=8,i.Y2=9,i.C2R=10,i.C2G=11,i.C2B=12,i.C2A=13,i.U2=14,i.V2=15,i.X3=16,i.Y3=17,i.C3R=18,i.C3G=19,i.C3B=20,i.C3A=21,i.U3=22,i.V3=23,i.X4=24,i.Y4=25,i.C4R=26,i.C4G=27,i.C4B=28,i.C4A=29,i.U4=30,i.V4=31,i}(t.Attachment);t.RegionAttachment=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return e.prototype.begin=function(t){},e.prototype.transform=function(e,i,n,r){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();t.JitterEffect=e}(t.core||(t.core={}))}(r||(r={})),function(t){!function(t){var e=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(i,n,r,o){var s=this.angle*t.MathUtils.degreesToRadians,a=i.x-this.worldX,l=i.y-this.worldY,h=Math.sqrt(a*a+l*l);if(h<this.radius){var u=e.interpolation.apply(0,s,(this.radius-h)/this.radius),c=Math.cos(u),d=Math.sin(u);i.x=c*a-d*l+this.worldX,i.y=d*a+c*l+this.worldY}},e.prototype.end=function(){},e.interpolation=new t.PowOut(2),e}();t.SwirlEffect=e}(t.core||(t.core={}))}(r||(r={})),Math.fround||(Math.fround=Math.fround=(n=new Float32Array(1),function(t){return n[0]=t,n[0]})),function(t){t.core.Bone.yDown=!0;var e=[0,0,0],i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e}return o(e,t),e}(PIXI.Sprite);t.SpineSprite=i;var n=function(t){function e(e,i,n,r,o){return t.call(this,e,i,n,r,o)||this}return o(e,t),e}(PIXI.mesh.Mesh);t.SpineMesh=n;var r=function(r){function a(e){var i=r.call(this)||this;if(!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');i.spineData=e,i.skeleton=new t.core.Skeleton(e),i.skeleton.updateWorldTransform(),i.stateData=new t.core.AnimationStateData(e),i.state=new t.core.AnimationState(i.stateData),i.slotContainers=[],i.tempClipContainers=[];for(var n=0,o=i.skeleton.slots.length;n<o;n++){var s=i.skeleton.slots[n],a=s.getAttachment(),l=i.newContainer();if(i.slotContainers.push(l),i.addChild(l),i.tempClipContainers.push(null),a instanceof t.core.RegionAttachment){var h=a.region.name,u=i.createSprite(s,a,h);s.currentSprite=u,s.currentSpriteName=h,l.addChild(u)}else if(a instanceof t.core.MeshAttachment){var c=i.createMesh(s,a);s.currentMesh=c,s.currentMeshName=a.name,l.addChild(c)}else{if(!(a instanceof t.core.ClippingAttachment))continue;i.createGraphics(s,a),l.addChild(s.clippingContainer),l.addChild(s.currentGraphics)}}return i.autoUpdate=!0,i.tintRgb=new Float32Array([1,1,1]),i}return o(a,r),Object.defineProperty(a.prototype,"autoUpdate",{get:function(){return this.updateTransform===a.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?a.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:a.globalDelayLimit)||Number.MAX_VALUE},enumerable:!0,configurable:!0}),a.prototype.update=function(i){var n=this.delayLimit;if(i>n&&(i=n),this.state.update(i),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var r=this.skeleton.slots,o=this.color,a=null,l=null;o?(a=o.light,l=o.dark):a=this.tintRgb;for(var h=PIXI.TransformBase&&1==this.transformHack(),u=0,c=r.length;u<c;u++){var d=(R=r[u]).getAttachment(),p=this.slotContainers[u];if(d){var f=null,g=d.color;if(d instanceof t.core.RegionAttachment){var m=d.region;if(m){R.currentMesh&&(R.currentMesh.visible=!1,R.currentMesh=null,R.currentMeshName=void 0);var _=m;if(!R.currentSpriteName||R.currentSpriteName!==_.name){var v=_.name;if(R.currentSprite&&(R.currentSprite.visible=!1),R.sprites=R.sprites||{},void 0!==R.sprites[v])R.sprites[v].visible=!0;else{var y=this.createSprite(R,d,v);p.addChild(y)}R.currentSprite=R.sprites[v],R.currentSpriteName=v}}if(p.transform){var b=w=p.transform,x=null;b.matrix2d?(x=b.matrix2d,b._dirtyVersion++,b.version=b._dirtyVersion,b.isStatic=!0,b.operMode=0):h?(b.position&&((w=new PIXI.TransformBase)._parentID=-1,w._worldID=p.transform._worldID,p.transform=w),x=w.localTransform):b.setFromMatrix(R.bone.matrix),x&&R.bone.matrix.copy(x)}else{x=p.localTransform||new PIXI.Matrix;R.bone.matrix.copy(x),p.localTransform=x,p.displayObjectUpdateTransform=s}R.currentSprite.color?f=R.currentSprite.color:(e[0]=a[0]*R.color.r*g.r,e[1]=a[1]*R.color.g*g.g,e[2]=a[2]*R.color.b*g.b,R.currentSprite.tint=PIXI.utils.rgb2hex(e)),R.currentSprite.blendMode=R.blendMode}else if(d instanceof t.core.MeshAttachment){var w;if(R.currentSprite)if(R.currentSprite.visible=!1,R.currentSprite=null,R.currentSpriteName=void 0,p.transform)(w=new PIXI.TransformStatic)._parentID=-1,w._worldID=p.transform._worldID,p.transform=w;else p.localTransform=new PIXI.Matrix,p.displayObjectUpdateTransform=PIXI.DisplayObject.prototype.updateTransform;if(!R.currentMeshName||R.currentMeshName!==d.name){var T=d.name;if(R.currentMesh&&(R.currentMesh.visible=!1),R.meshes=R.meshes||{},void 0!==R.meshes[T])R.meshes[T].visible=!0;else{var S=this.createMesh(R,d);p.addChild(S)}R.currentMesh=R.meshes[T],R.currentMeshName=T}if(d.computeWorldVerticesOld(R,R.currentMesh.vertices),R.currentMesh.color)f=R.currentMesh.color;else if("3"!==PIXI.VERSION[0]){var E=R.currentMesh.tintRgb;E[0]=a[0]*R.color.r*g.r,E[1]=a[1]*R.color.g*g.g,E[2]=a[2]*R.color.b*g.b}R.currentMesh.blendMode=R.blendMode}else{if(!(d instanceof t.core.ClippingAttachment)){p.visible=!1;continue}R.currentGraphics||(this.createGraphics(R,d),p.addChild(R.clippingContainer),p.addChild(R.currentGraphics)),this.updateGraphics(R,d)}if(p.visible=!0,f){var P=R.color.r*g.r,A=R.color.g*g.g,I=R.color.b*g.b;f.setLight(a[0]*P+l[0]*(1-P),a[1]*A+l[1]*(1-A),a[2]*I+l[2]*(1-I)),R.darkColor?(P=R.darkColor.r,A=R.darkColor.g,I=R.darkColor.b):(P=0,A=0,I=0),f.setDark(a[0]*P+l[0]*(1-P),a[1]*A+l[1]*(1-A),a[2]*I+l[2]*(1-I))}p.alpha=R.color.a}else p.visible=!1}var O=this.skeleton.drawOrder,C=null,M=null;for(u=0,c=O.length;u<c;u++){var R=r[O[u].data.index];p=this.slotContainers[O[u].data.index];if(M||null!==p.parent&&p.parent!==this&&(p.parent.removeChild(p),p.parent=this),R.currentGraphics&&R.getAttachment())M=R.clippingContainer,C=R.getAttachment(),M.children.length=0,this.children[u]=p,C.endSlot==R.data&&(C.endSlot=null);else if(M){var k=this.tempClipContainers[u];k||((k=this.tempClipContainers[u]=this.newContainer()).visible=!1),this.children[u]=k,p.parent=null,M.addChild(p),C.endSlot==R.data&&(M.renderable=!0,M=null,C=null)}else this.children[u]=p}}},a.prototype.setSpriteRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.size?(e.scale.x=i.size.width/i.originalWidth,e.scale.y=-i.size.height/i.originalHeight):(e.scale.x=t.scaleX*t.width/i.originalWidth,e.scale.y=-t.scaleY*t.height/i.originalHeight)},a.prototype.setMeshRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.texture._updateUvs(),t.updateUVs(i,e.uvs),e.dirty++},a.prototype.autoUpdateTransform=function(){if(a.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},a.prototype.createSprite=function(e,i,n){var r=i.region;e.hackAttachment===i&&(r=e.hackRegion);var o=r.texture,s=this.newSprite(o);return s.rotation=i.rotation*t.core.MathUtils.degRad,s.anchor.x=.5,s.anchor.y=.5,s.position.x=i.x,s.position.y=i.y,s.alpha=i.color.a,s.region=i.region,this.setSpriteRegion(i,s,i.region),e.sprites=e.sprites||{},e.sprites[n]=s,s},a.prototype.createMesh=function(t,e){var i=e.region;t.hackAttachment===e&&(i=t.hackRegion,t.hackAttachment=null,t.hackRegion=null);var n=this.newMesh(i.texture,new Float32Array(e.regionUVs.length),new Float32Array(e.regionUVs.length),new Uint16Array(e.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return n.canvasPadding=1.5,n.alpha=e.color.a,n.region=e.region,this.setMeshRegion(e,n,i),t.meshes=t.meshes||{},t.meshes[e.name]=n,n},a.prototype.createGraphics=function(t,e){var i=this.newGraphics(),n=new PIXI.Polygon([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(n),i.renderable=!1,t.currentGraphics=i,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,i},a.prototype.updateGraphics=function(t,e){var i=t.currentGraphics.graphicsData[0].shape.points,n=e.worldVerticesLength;i.length=n,e.computeWorldVertices(t,0,n,i,0,2),t.currentGraphics.dirty++,t.currentGraphics.clearDirty++},a.prototype.hackTextureBySlotIndex=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var r=this.skeleton.slots[e];if(!r)return!1;var o=r.getAttachment(),s=o.region;return i?((s=new t.core.TextureRegion).texture=i,s.size=n,r.hackRegion=s,r.hackAttachment=o):(r.hackRegion=null,r.hackAttachment=null),r.currentSprite&&r.currentSprite.region!=s?(this.setSpriteRegion(o,r.currentSprite,s),r.currentSprite.region=s):r.currentMesh&&r.currentMesh.region!=s&&this.setMeshRegion(o,r.currentMesh,s),!0},a.prototype.hackTextureBySlotName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.skeleton.findSlotIndex(t);return-1!=n&&this.hackTextureBySlotIndex(n,e,i)},a.prototype.newContainer=function(){return new PIXI.Container},a.prototype.newSprite=function(t){return new i(t)},a.prototype.newGraphics=function(){return new PIXI.Graphics},a.prototype.newMesh=function(t,e,i,r,o){return new n(t,e,i,r,o)},a.prototype.transformHack=function(){return 1},a.prototype.hackAttachmentGroups=function(t,e,i){if(t){for(var n=[],r=[],o=0,s=this.skeleton.slots.length;o<s;o++){var a=this.skeleton.slots[o],l=a.currentSpriteName||a.currentMeshName||"",h=a.currentSprite||a.currentMesh;l.endsWith(t)?(h.parentGroup=e,r.push(h)):i&&h&&(h.parentGroup=i,n.push(h))}return[n,r]}},a.prototype.destroy=function(t){for(var e=0,i=this.skeleton.slots.length;e<i;e++){var n=this.skeleton.slots[e];for(var o in n.meshes)n.meshes[o].destroy(t);for(var s in n.meshes=null,n.sprites)n.sprites[s].destroy(t);n.sprites=null}for(e=0,i=this.slotContainers.length;e<i;e++)this.slotContainers[e].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,r.prototype.destroy.call(this,t)},a.globalAutoUpdate=!0,a.globalDelayLimit=0,a.clippingPolygon=[],a}(PIXI.Container);function s(){var t=this.parent.worldTransform,e=this.worldTransform,i=this.localTransform;e.a=i.a*t.a+i.b*t.c,e.b=i.a*t.b+i.b*t.d,e.c=i.c*t.a+i.d*t.c,e.d=i.c*t.b+i.d*t.d,e.tx=i.tx*t.a+i.ty*t.c+t.tx,e.ty=i.tx*t.b+i.ty*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}t.Spine=r}(r||(r={})),function(t){PIXI.spine=t;var e=PIXI.Texture.prototype;e._updateUvs||(e._updateUvs=e.updateUvs)}(r||(r={})),function(t){var e=PIXI.loaders.Resource;function i(){return function(i,o){if(!i.data)return o();var s=function(t){return t.type==e.TYPE.JSON}(i)&&i.data.bones,a=function(t){return t.xhrType==e.XHR_RESPONSE_TYPE.BUFFER}(i)&&("skel"===i.extension||i.metadata.spineMetadata);if(!s&&!a)return o();var l=null,h=i.data;s?l=new t.core.SkeletonJson(null):(l=new t.core.SkeletonBinary(null),i.data instanceof ArrayBuffer&&(h=new Uint8Array(i.data)));var u=i.metadata||{},c=u?i.metadata.spineSkeletonScale:null;c&&(l.scale=c);var d=u?i.metadata.spineAtlas:null;if(!1===d)return o();if(d&&d.pages)return l.attachmentLoader=new t.core.AtlasAttachmentLoader(d),i.spineData=l.readSkeletonData(h),i.spineAtlas=d,o();var p=u.spineAtlasSuffix||".atlas",f=i.url,g=f.indexOf("?");g>0&&(f=f.substr(0,g)),f=f.substr(0,f.lastIndexOf("."))+p,i.metadata&&i.metadata.spineAtlasFile&&(f=i.metadata.spineAtlasFile),f=f.replace(this.baseUrl,"");var m={crossOrigin:i.crossOrigin,xhrType:e.XHR_RESPONSE_TYPE.TEXT,metadata:u.spineMetadata||null,parentResource:i},_={crossOrigin:i.crossOrigin,metadata:u.imageMetadata||null,parentResource:i},v=i.url.substr(0,i.url.lastIndexOf("/")+1);v=v.replace(this.baseUrl,"");var y=u.imageNamePrefix||i.name+"_atlas_page_",b=u.images?r(u.images):u.image?r({default:u.image}):u.imageLoader?u.imageLoader(this,y,v,_):n(this,y,v,_),x=function(e){new t.core.TextureAtlas(e,b,(function(e){e&&(l.attachmentLoader=new t.core.AtlasAttachmentLoader(e),i.spineData=l.readSkeletonData(h),i.spineAtlas=e),o()}))};i.metadata&&i.metadata.atlasRawData?x(i.metadata.atlasRawData):this.add(i.name+"_atlas",f,m,(function(t){t.error?o():x(t.data)}))}}function n(t,e,i,n){return i&&i.lastIndexOf("/")!==i.length-1&&(i+="/"),function(r,o){var s=e+r,a=i+r,l=t.resources[s];if(l){function h(){o(l.texture.baseTexture)}l.texture?h():l.onAfterMiddleware.add(h)}else t.add(s,a,n,(function(t){t.error?o(null):o(t.texture.baseTexture)}))}}function r(t){return function(e,i){var n=t[e]||t.default;n&&n.baseTexture?i(n.baseTexture):i(n)}}e.setExtensionXhrType("skel",e.XHR_RESPONSE_TYPE.BUFFER),t.atlasParser=i,t.imageLoaderAdapter=n,t.syncImageLoaderAdapter=function(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,i){i(PIXI.BaseTexture.fromImage(t,e))}},t.staticImageLoader=r,PIXI.loaders.Loader&&(PIXI.loaders.Loader.addPixiMiddleware(i),PIXI.loader.use(i()))}(r||(r={}))},function(t,e,i){var n=i(19),r=i(11),o=i(175);t.exports=!n&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,i){var n=i(13),r=i(27),o=n.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},function(t,e,i){var n=i(177),r=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return r.call(t)}),t.exports=n.inspectSource},function(t,e,i){var n=i(13),r=i(98),o=n["__core-js_shared__"]||r("__core-js_shared__",{});t.exports=o},function(t,e,i){var n=i(68),r=i(177);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:n?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){var n=i(20),r=i(52),o=i(180).indexOf,s=i(101);t.exports=function(t,e){var i,a=r(t),l=0,h=[];for(i in a)!n(s,i)&&n(a,i)&&h.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~o(h,i)||h.push(i));return h}},function(t,e,i){var n=i(52),r=i(23),o=i(70),s=function(t){return function(e,i,s){var a,l=n(e),h=r(l.length),u=o(s,h);if(t&&i!=i){for(;h>u;)if((a=l[u++])!=a)return!0}else for(;h>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){"use strict";i(337);var n=i(54),r=i(11),o=i(14),s=i(71),a=i(22),l=o("species"),h=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u="$0"==="a".replace(/./,"$0"),c=o("replace"),d=!!/./[c]&&""===/./[c]("a","$0"),p=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));t.exports=function(t,e,i,c){var f=o(t),g=!r((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),m=g&&!r((function(){var e=!1,i=/a/;return"split"===t&&((i={}).constructor={},i.constructor[l]=function(){return i},i.flags="",i[f]=/./[f]),i.exec=function(){return e=!0,null},i[f](""),!e}));if(!g||!m||"replace"===t&&(!h||!u||d)||"split"===t&&!p){var _=/./[f],v=i(f,""[t],(function(t,e,i,n,r){return e.exec===s?g&&!r?{done:!0,value:_.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=v[0],b=v[1];n(String.prototype,t,y),n(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}c&&a(RegExp.prototype[f],"sham",!0)}},function(t,e,i){var n=i(11);t.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},function(t,e,i){var n=i(27),r=i(53),o=i(14)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,i){var n=i(29),r=i(105),o=i(14)("species");t.exports=function(t,e){var i,s=n(t).constructor;return void 0===s||null==(i=n(s)[o])?e:r(i)}},function(t,e,i){var n=i(53),r=i(71);t.exports=function(t,e){var i=t.exec;if("function"==typeof i){var o=i.call(t,e);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},function(t,e,i){"use strict";var n,r,o,s=i(72),a=i(22),l=i(20),h=i(14),u=i(68),c=h("iterator"),d=!1;[].keys&&("next"in(o=[].keys())?(r=s(s(o)))!==Object.prototype&&(n=r):d=!0),null==n&&(n={}),u||l(n,c)||a(n,c,(function(){return this})),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(33),r=i(40),o=i(24),s=i(73),a=i(9),l=i(8),h=i(196),u=i(197),c=function(){function t(){this._loadedCount=0,this._debug=!1,this._masterVolume=1,this._previousMasterVolume=this._masterVolume,this._collections=new n.Dictionary,this._audioLoadTokens=new Array}return t.prototype.init=function(){r.Application.instance.webEvents.registerVisibilityChangedCallback(this.onVisibilityChanged.bind(this)),PubSub.subscribe(a.PLAY_AUDIO,this.onPlayRequested.bind(this)),PubSub.subscribe(a.LOAD_AUDIO,this.loadFromIds.bind(this)),PubSub.subscribe(a.LOAD_AUDIO_FROM_ASSET_MAP,this.loadFromAssetMapData.bind(this)),PubSub.subscribe(a.AUDIO_LOAD_ERROR,this.onAudioLoadError.bind(this))},Object.defineProperty(t.prototype,"debug",{set:function(t){this._debug=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"masterVolume",{get:function(){return this._masterVolume},set:function(t){this._masterVolume=l.MathUtils.clamp(t,0,1),this.updateAllCategoryVolume()},enumerable:!0,configurable:!0}),t.prototype.getCategoryVolume=function(t){return this.getCollection(t).volume},t.prototype.setCategoryVolume=function(t,e){this.getCollection(t).volume=e,this.updateCategoryVolume(t)},t.prototype.getDuration=function(t,e){var i=this.getAudioTrack(t,e);if(void 0!==i)return i.getDuration()},t.prototype.play=function(t,e,i,n){var r,s=this;void 0===e&&(e=1),void 0===i&&(i=!1),void 0===n&&(n=o.DEFAULT);var a=this.getCollection(n),l=a.tracks.getValue(t);void 0===l?this.load(t,n,(function(){(r=a.tracks.getValue(t)).setLooped(i),r.setVolumeWithModifiers(e,s._masterVolume,a.volume),r.play()})):(l.setLooped(i),l.setVolumeWithModifiers(e,this._masterVolume,a.volume),l.play())},t.prototype.pause=function(t,e){var i=this.getAudioTrack(t,e);void 0!==i&&i.pause()},t.prototype.stop=function(t,e){var i=this.getAudioTrack(t,e);void 0!==i&&i.stop()},t.prototype.load=function(t,e,i){var n,r,o=this.getCollection(e);"string"==typeof t&&(t=[t]);for(var a=t.length-1;a>=0;--a)r=t[a],void 0===(n=o.tracks.getValue(r))?n=this.createAudioTrack(r,e):n.getSource().state()===s.State.UNLOADED&&n.loadSource();if(void 0!==i){var l=0;for(a=t.length-1;a>=0;--a){var h=o.tracks.getValue(t[a]).getSource();h.state()!==s.State.LOADED?h.on(s.Events.LOAD,(function(){++l>=t.length&&i()})):++l}l===t.length&&i()}},t.prototype.unload=function(t,e,i){var n=this.getCollection(e),r=n.tracks.getValue(t);void 0!==r&&(r.unloadSource(),!0===i&&n.tracks.remove(t))},t.prototype.fadeTo=function(t,e,i,n){var r=this.getAudioTrack(t,e);void 0!==r&&(i=l.MathUtils.clamp(i,0,1),r.fadeTo(i,n))},t.prototype.getAudioTrack=function(t,e){if(this._collections.containsKey(e))return this._collections.getValue(e).tracks.getValue(t)},t.prototype.createAudioTrack=function(t,e,i,n){void 0===e&&(e=o.DEFAULT),void 0===i&&(i=1),void 0===n&&(n=!1),this.log("Creating new howler track with id %c%s%c and category %c%s%c.",l.LogUtils.STYLE_RED_BOLD,t,l.LogUtils.STYLE_BLACK,l.LogUtils.STYLE_RED_BOLD,e,l.LogUtils.STYLE_BLACK);var r=new u.HowlerTrack(t,e,this,i,n);return this.getCollection(e).tracks.setValue(t,r),r},t.prototype.loadFromIds=function(t,e){this.load(e.assets,e.category,e.callback)},t.prototype.loadFromAssetMapData=function(t,e){var i=this;this.log("Loading audio assets from AssetMap."),this._audioLoadTokenCallback=e.callback,this._audioLoadTokenProgressCallback=e.progressCallback,e.assets.forEach((function(t){i._audioLoadTokens.push(t)})),this.tryLoadFirstAssetMapAudioData()},t.prototype.onAudioFromAssetMapDataLoaded=function(){this._loadedCount++;var t=this._loadedCount/(this._loadedCount+this._audioLoadTokens.length)*100;this._audioLoadTokenProgressCallback(t),!1===this.tryLoadFirstAssetMapAudioData()&&(this.log("All audio from asset map loaded"),this._audioLoadTokenCallback())},t.prototype.tryLoadFirstAssetMapAudioData=function(){if(this._audioLoadTokens.length>0){var t=this._audioLoadTokens[0];return this._audioLoadTokens.shift(),this.load(t.assetName,t.category,this.onAudioFromAssetMapDataLoaded.bind(this)),!0}return!1},t.prototype.updateAllCategoryVolume=function(){for(var t=0;t<this._collections.keys().length;++t)this.updateCategoryVolume(this._collections.keys()[t])},t.prototype.updateCategoryVolume=function(t){for(var e=this.getCollection(t),i=e.tracks.values(),n=i.length-1;n>=0;--n)i[n].setVolumeWithModifiers(i[n].getVolume(),this._masterVolume,e.volume)},t.prototype.getCollection=function(t){return!1===this._collections.containsKey(t)&&this.createCollection(t),this._collections.getValue(t)},t.prototype.createCollection=function(t){this._collections.setValue(t,new h.AudioCollection)},t.prototype.onPlayRequested=function(t,e){this.play(e.id,e.volume,e.loop,e.category)},t.prototype.onVisibilityChanged=function(t){t?(this._masterVolume=this._previousMasterVolume,this.updateAllCategoryVolume()):(this._previousMasterVolume=this._masterVolume,this._masterVolume=0,this.updateAllCategoryVolume())},t.prototype.onAudioLoadError=function(t,e){if(void 0===t&&(t=a.AUDIO_LOAD_ERROR),e.fallback.length>0){this.logW("Audio Load Error. Trying again with a fallback url.",e);var i=this.getAudioTrack(e.id,e.category);void 0!==i&&i.loadSource()}else this.logE("Audio Load Error. No more fallback urls to try.",e)},t.prototype.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&l.LogUtils.log.apply(l.LogUtils,[t,{className:"HowlerManager",color:l.LogUtils.COLOR_LIGHT_BLUE}].concat(e))},t.prototype.logW=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&l.LogUtils.logWarning.apply(l.LogUtils,[t,{className:"HowlerManager",color:l.LogUtils.COLOR_LIGHT_BLUE}].concat(e))},t.prototype.logE=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.LogUtils.logError.apply(l.LogUtils,[t,{className:"HowlerManager",color:l.LogUtils.COLOR_LIGHT_BLUE}].concat(e))},t}();e.HowlerManager=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(21),r=i(57),o=i(42),s=function(){function t(t){this.dictionary=new o.default(t)}return t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.add=function(t){return!this.contains(t)&&!n.isUndefined(t)&&(this.dictionary.setValue(t,t),!0)},t.prototype.intersection=function(t){var e=this;this.forEach((function(i){return t.contains(i)||e.remove(i),!0}))},t.prototype.union=function(t){var e=this;t.forEach((function(t){return e.add(t),!0}))},t.prototype.difference=function(t){var e=this;t.forEach((function(t){return e.remove(t),!0}))},t.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach((function(i){return!!t.contains(i)||(e=!1,!1)})),e},t.prototype.remove=function(t){return!!this.contains(t)&&(this.dictionary.remove(t),!0)},t.prototype.forEach=function(t){this.dictionary.forEach((function(e,i){return t(i)}))},t.prototype.toArray=function(){return this.dictionary.values()},t.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.prototype.size=function(){return this.dictionary.size()},t.prototype.clear=function(){this.dictionary.clear()},t.prototype.toString=function(){return r.toString(this.toArray())},t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(21),r=i(191),o=function(){function t(t){this.root=null,this.compare=t||n.defaultCompare,this.nElements=0}return t.prototype.add=function(t){return!n.isUndefined(t)&&(null!==this.insertNode(this.createNode(t))&&(this.nElements++,!0))},t.prototype.clear=function(){this.root=null,this.nElements=0},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.size=function(){return this.nElements},t.prototype.contains=function(t){return!n.isUndefined(t)&&null!==this.searchNode(this.root,t)},t.prototype.search=function(t){var e=this.searchNode(this.root,t);if(null!==e)return e.element},t.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null!==e&&(this.removeNode(e),this.nElements--,!0)},t.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.prototype.minimum=function(){if(!this.isEmpty()&&null!==this.root)return this.minimumAux(this.root).element},t.prototype.maximum=function(){if(!this.isEmpty()&&null!==this.root)return this.maximumAux(this.root).element},t.prototype.forEach=function(t){this.inorderTraversal(t)},t.prototype.toArray=function(){var t=[];return this.inorderTraversal((function(e){return t.push(e),!0})),t},t.prototype.height=function(){return this.heightAux(this.root)},t.prototype.searchNode=function(t,e){for(var i=1;null!==t&&0!==i;)(i=this.compare(e,t.element))<0?t=t.leftCh:i>0&&(t=t.rightCh);return t},t.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},t.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},t.prototype.inorderTraversalAux=function(t,e,i){null===t||i.stop||(this.inorderTraversalAux(t.leftCh,e,i),i.stop||(i.stop=!1===e(t.element),i.stop||this.inorderTraversalAux(t.rightCh,e,i)))},t.prototype.levelTraversalAux=function(t,e){var i=new r.default;for(null!==t&&i.enqueue(t),t=i.dequeue()||null;null!=t;){if(!1===e(t.element))return;null!==t.leftCh&&i.enqueue(t.leftCh),null!==t.rightCh&&i.enqueue(t.rightCh),t=i.dequeue()||null}},t.prototype.preorderTraversalAux=function(t,e,i){null===t||i.stop||(i.stop=!1===e(t.element),i.stop||(this.preorderTraversalAux(t.leftCh,e,i),i.stop||this.preorderTraversalAux(t.rightCh,e,i)))},t.prototype.postorderTraversalAux=function(t,e,i){null===t||i.stop||(this.postorderTraversalAux(t.leftCh,e,i),i.stop||(this.postorderTraversalAux(t.rightCh,e,i),i.stop||(i.stop=!1===e(t.element))))},t.prototype.minimumAux=function(t){for(;null!=t&&null!==t.leftCh;)t=t.leftCh;return t},t.prototype.maximumAux=function(t){for(;null!=t&&null!==t.rightCh;)t=t.rightCh;return t},t.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.prototype.insertNode=function(t){for(var e=null,i=this.root;null!==i;){var n=this.compare(t.element,i.element);if(0===n)return null;n<0?(e=i,i=i.leftCh):(e=i,i=i.rightCh)}return t.parent=e,null===e?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},t.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(108),r=function(){function t(){this.list=new n.default}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}},t.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(21),r=i(57),o=function(){function t(t){this.data=[],this.compare=t||n.defaultCompare}return t.prototype.leftChildIndex=function(t){return 2*t+1},t.prototype.rightChildIndex=function(t){return 2*t+2},t.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},t.prototype.siftUp=function(t){for(var e=this.parentIndex(t);t>0&&this.compare(this.data[e],this.data[t])>0;)r.swap(this.data,e,t),t=e,e=this.parentIndex(t)},t.prototype.siftDown=function(t){for(var e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t));e>=0&&this.compare(this.data[t],this.data[e])>0;)r.swap(this.data,e,t),t=e,e=this.minIndex(this.leftChildIndex(t),this.rightChildIndex(t))},t.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.prototype.add=function(t){return!n.isUndefined(t)&&(this.data.push(t),this.siftUp(this.data.length-1),!0)},t.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}},t.prototype.contains=function(t){var e=n.compareToEquals(this.compare);return r.contains(this.data,t,e)},t.prototype.size=function(){return this.data.length},t.prototype.isEmpty=function(){return this.data.length<=0},t.prototype.clear=function(){this.data.length=0},t.prototype.forEach=function(t){r.forEach(this.data,t)},t}();e.default=o},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(42),s=i(21),a=function(t){function e(e,i){var n=t.call(this,i)||this;return n.defaultFactoryFunction=e,n}return r(e,t),e.prototype.setDefault=function(e,i){var n=t.prototype.getValue.call(this,e);return s.isUndefined(n)?(this.setValue(e,i),i):n},e.prototype.getValue=function(t){return this.setDefault(t,this.defaultFactoryFunction())},e}(o.default);e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addZeroPadding=function(t,e){var i="string"==typeof t?t:t.toString();return i.length>=e?i:new Array(e-i.length+1).join("0")+i}},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(110)),n(i(34)),n(i(111)),n(i(364)),n(i(199)),n(i(200)),n(i(202)),n(i(113)),n(i(365)),n(i(366)),n(i(367)),n(i(368)),n(i(369)),n(i(370)),n(i(371))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(33),r=i(59),o=function(){function t(){this._tracks=new n.Dictionary,this._volume=1}return Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=r.clamp(t,0,1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tracks",{get:function(){return this._tracks},enumerable:!0,configurable:!0}),t}();e.AudioCollection=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(363),r=i(73),o=i(9),s=i(74),a=function(){function t(e,i,n,r,o){void 0===r&&(r=1),void 0===o&&(o=!1),this._volume=1,this._id=e,this._audioManager=n,this._category=i,this._urls=t.getDefaultUrls(this._id),this.loadSource(),this.setVolume(r),this.setLooped(o)}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.getDefaultUrls=function(t){return[s.AssetUtils.FILEPATH_AUDIO+t+".webm",s.AssetUtils.FILEPATH_AUDIO+t+".mp3",s.AssetUtils.FILEPATH_AUDIO+t+".ogg",s.AssetUtils.FILEPATH_AUDIO+t+".m4a"]},t.prototype.getSource=function(){return this._source},t.prototype.play=function(){this._source.state()!==r.State.UNLOADED?this._source.play():console.error(this._id+" source Howl is not loaded. Call loadSource() before playing.")},t.prototype.pause=function(){this._source.pause()},t.prototype.stop=function(){this._source.stop()},t.prototype.fadeTo=function(t,e){var i=t*this._audioManager.masterVolume*this._audioManager.getCategoryVolume(this._category);this._source.fade(this._source.volume(),i,e)},t.prototype.unloadSource=function(){this._source.unload()},t.prototype.loadSource=function(){void 0===this._source?this._source=new n.Howl({preload:!0,src:this._urls.slice(),onloaderror:this.onLoadError.bind(this)}):(this._source._src=this._urls,this._source.load())},t.prototype.isMuted=function(){return this._source.mute()},t.prototype.setMuted=function(t){this._source.mute(t)},t.prototype.isLooped=function(){return this._source.loop()},t.prototype.setLooped=function(t){this._source.loop(t)},t.prototype.getVolume=function(){return this._volume},t.prototype.setVolume=function(t){this.setVolumeWithModifiers(t,this._audioManager.masterVolume,this._audioManager.getCategoryVolume(this._category))},t.prototype.setVolumeWithModifiers=function(t,e,i){this._volume=t,this._source.volume(this._volume*e*i)},t.prototype.getTimePos=function(){return this._source.seek()},t.prototype.setTimePos=function(t){this._source.seek(t)},t.prototype.getDuration=function(){return this._source.duration()},t.prototype.isPlaying=function(){return this._source.playing()},t.prototype.on=function(t,e){this._source.on(t,e)},t.prototype.off=function(t,e){this._source.off(t,e)},t.prototype.once=function(t,e){this._source.once(t,e)},t.prototype.onLoadError=function(t,e){var i=this._source._src;i instanceof Array&&(i=0===i.length?"":i[0]),this._urls=this._urls.slice(this._urls.indexOf(i)+1),PubSub.publishSync(o.AUDIO_LOAD_ERROR,{id:this._id,category:this._category,src:i,fallback:this._urls.slice(),error:e})},t}();e.HowlerTrack=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(16),o=i(40),s=i(9),a=i(8),l=i(24),h=i(73),u=a.LogUtils.STYLE_BLACK,c=a.LogUtils.STYLE_RED_BOLD,d=a.LogUtils.STYLE_BLUE_BOLD;!function(t){t.Append="append",t.Override="override",t.New="new"}(n=e.PlayMode||(e.PlayMode={}));var p=function(){function t(){var t=this;this.FADE_OUT_DURATION=150,this.debug=!1,this._queue=[],this.log=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];t.debug&&a.LogUtils.log.apply(a.LogUtils,[e,{className:"VoiceOverManager",color:"salmon"}].concat(i))},this.warn=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.LogUtils.logWarning.apply(a.LogUtils,[t,{className:"VoiceOverManager",color:"salmon"}].concat(e))},this.error=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return a.LogUtils.logError.apply(a.LogUtils,[t,{className:"VoiceOverManager",color:"salmon"}].concat(e))},PubSub.subscribe(s.GAME_PAUSED,this.onPause.bind(this)),PubSub.subscribe(s.GAME_UNPAUSED,this.onResume.bind(this))}return Object.defineProperty(t.prototype,"activeVO",{get:function(){if(this._queue.length>0)return o.Application.instance.audio.getAudioTrack(this._queue[0].key,l.VO)},enumerable:!0,configurable:!0}),t.prototype.playVO=function(t,e,i){Array.isArray(t)||(t=[t]);var r=!1,o=0;"function"==typeof e?i=e:"object"==typeof e?(r=!0===e.skipCC,o=e.priority||0,i=e.callback,e=e.mode||n.Override):void 0===e&&(e=n.Override),this.log("🗣 Play VO requested. Key(s): [%c%s%c], Mode: %c%s%c, Priority: %c%s%c",c,t.join(", "),u,d,e,u,d,o,u),1===t.length&&1===this._queue.length&&this._queue[0].key===t[0]?this.warn("🔇 Skipped VO [%c%s%c] because it is already playing",c,t[0],u):0===this._queue.length||e===n.Override&&o>=this._queue[0].priority||e===n.New&&o>this._queue[0].priority?(this.stopVO(),this.addToQueue(t,i,r,o),this.playNext()):e===n.Append?this.addToQueue(t,i,r,o):i?(this.warn("🎟🔇 Firing callback without playing VO(s) %c%s%c",c,t.join(", "),u),i(!1)):this.warn("🔇 Skipped VO(s) [%c%s%c] because it is lower priority than what was already playing",c,t.join(", "),u)},t.prototype.stopVO=function(){var t=this,e=this.activeVO;this._queue.length>1&&this.log("🗑 Clearing VO queue. Length was: %c%s%c",d,this._queue.length,u),this._queue.splice(0,this._queue.length),e&&(e.off(h.Events.END),e.getSource().state()===h.State.LOADING?(this.warn("🛑 Stopping VO %c%s%c while it is still loading",c,e.id,u),e.stop()):e.isPlaying()?(this.log("🤫 Fading out VO %c%s%c (duration: %c%s%cms)",c,e.id,u,d,this.FADE_OUT_DURATION,u),e.fadeTo(0,this.FADE_OUT_DURATION),e.off(h.Events.END),e.once(h.Events.FADE,(function(){t.log("😶 Fade out complete %c%s%c",c,e.id,u),e.stop()})),PubSub.publishSync(s.STOP_CAPTION,{id:e.id})):e.stop(),PubSub.publishSync(s.VOICEOVER_ENDED,e.id)),this._activeTimeout&&(this._activeTimeout.kill(),this._activeTimeout=void 0)},t.prototype.addToQueue=function(t,e,i,n){for(var r=0;r<t.length;r++){var s=t[r];"number"==typeof s?this.log("➕ Queueing delay %c%s%c",c,s,u):this.log("➕ Queueing VO %c%s%c",c,s,u),this._queue.push({key:"string"==typeof s?s:"",delay:"number"==typeof s?s:void 0,callback:r===t.length-1?e:void 0,skipCC:i,priority:n})}var a=t.filter((function(t){return"string"==typeof t}));this.log("📂 Loading VO(s) [%c%s%c]",c,a.join(", "),u),o.Application.instance.audio.load(a,l.VO)},t.prototype.playNext=function(){var t=this;if(this._queue.length>0){var e=this._queue[0];if(void 0!==e.delay)this._activeTimeout&&this._activeTimeout.kill(),1===this._queue.length?(this.log("⌛ Skipping delay because there are no more items in queue"),this._activeTimeout=void 0,this._queue.shift(),this.playNext(),e.callback&&e.callback(!0)):(this.log("⏳ Waiting %s seconds before next VO",e.delay),this._activeTimeout=r.TweenMax.delayedCall(e.delay,(function(){t._activeTimeout=void 0,t._queue.shift(),t.playNext(),e.callback&&e.callback(!0)})));else{var i=o.Application.instance.audio.getAudioTrack(e.key,l.VO);void 0!==i?(i.off(h.Events.FADE),i.isPlaying()&&(this.warn("🛑 Stopping VO %c%s%c (no fade out)",c,i.id,u),i.stop(),PubSub.publishSync(s.VOICEOVER_ENDED,e.key))):this.log("📂 Loading VO %c%s%c",c,e.key,u),o.Application.instance.audio.load(e.key,l.VO,(function(){if(t._queue[0]===e){t.log("▶️▶️ Playing VO %c%s%c",c,e.key,u),t.log("ℹ️ Queue length: %c%s%c",d,t._queue.length,u),o.Application.instance.audio.play(e.key,void 0,!1,l.VO),e.skipCC||PubSub.publishSync(s.PLAY_CAPTION,{id:e.key});var i=function(i){t.log("🏁 Completed VO %c%s%c",c,e.key,u),PubSub.publishSync(s.VOICEOVER_ENDED,e.key),t._queue.shift(),t._activeTimeout&&(t._activeTimeout.kill(),t._activeTimeout=void 0),t.playNext(),e.callback&&(t.log("🎟 Firing callback for %c%s%c",c,e.key,u),e.callback(i))};t.activeVO?(t.activeVO.once(h.Events.END,(function(){return i(!0)})),t.activeVO.once(h.Events.PLAY,(function(){PubSub.publishSync(s.VOICEOVER_STARTED,e.key)}))):(t.error("⚠️ Vo %c%s%c completed early (did not play?)",c,e.key,u),i(!1))}}))}}else this.log("✅ Nothing left in queue")},t.prototype.onPause=function(){void 0!==this.activeVO&&this.activeVO.getTimePos()>0&&this.activeVO.isPlaying()&&(this.log("⏸ Pausing VO %c%s%c",c,this.activeVO.id,u),this.activeVO.pause(),PubSub.publishSync(s.VOICEOVER_ENDED,this.activeVO.id))},t.prototype.onResume=function(){void 0!==this.activeVO&&this.activeVO.getTimePos()>0&&!this.activeVO.isPlaying()&&(this.log("⏯ Resuming VO %c%s%c",c,this.activeVO.id,u),this.activeVO.play(),PubSub.publishSync(s.VOICEOVER_STARTED,this.activeVO.id))},t}();e.VoiceOverManager=p},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(33),s=i(40),a=i(9),l=i(74),h=i(58),u=i(110),c=i(111),d=i(113),p=function(t){function e(e){var i=t.call(this)||this;return i._isCurrentLoadScreenPersistent=!0,i._debug=!1,i._size=new PIXI.Point,i._loadScreens=new o.Dictionary,i._currentLoadScreen=e,i._splashScreen=e,PubSub.subscribe(a.SHOW_LOAD_SCREEN,i.showLoadScreen.bind(i)),PubSub.subscribe(a.HIDE_LOAD_SCREEN,i.hideLoadScreen.bind(i)),PubSub.subscribe(a.LOAD_ASSETS,i.onLoadRequested.bind(i)),PubSub.subscribe(a.UNLOAD_ASSETS,i.onUnloadRequested.bind(i)),PIXI.loader.onProgress.add(i.onPixiLoadProgress.bind(i)),i}return r(e,t),Object.defineProperty(e.prototype,"debug",{set:function(t){this._debug=t},enumerable:!0,configurable:!0}),e.prototype.update=function(t){void 0!==this._currentLoadScreen&&this._currentLoadScreen.update(t)},e.prototype.startSplashProcess=function(t,e){for(var i=this,n=u.AssetMap.getAssetGroup(d.SplashScreen.NAME),r=new Array,o=0;o<t.length;o++){for(var s=t[o],a=!1,l=0;l<n.length;l++){var h=n[l];if(s.assetName===h.assetName&&s.assetType===h.assetType){a=!0;break}}!1===a&&r.push(s)}this.loadOnSplash(u.AssetMap.getAssetGroup(d.SplashScreen.NAME),(function(){i._splashScreen.init(i._size),i.addChild(i._splashScreen),i._splashScreen.animateIn((function(){return i.load(r,e)}))}))},e.prototype.registerLoadScreen=function(t,e,i){void 0===i&&(i=!1),this._loadScreens.setValue(t,e),i&&(this._defaultLoadScreen=e)},e.prototype.onResize=function(t){this._size.copy(t),void 0!==this._currentLoadScreen&&this._currentLoadScreen.onResize(this._size)},e.prototype.showLoadScreen=function(t,e){var i=this;this.log("Show load screen requested: %c%s",h.STYLE_RED_BOLD,e.loadScreen),this._currentLoadScreen=this.getLoadScreen(e.loadScreen),void 0!==this._currentLoadScreen?(this._currentLoadScreen.init(this._size),this.addChild(this._currentLoadScreen),this._currentLoadScreen.animateIn((function(){i.log("Load screen animate in complete."),e.callback()}))):this.logE("%c%s%c has not been registered as a load screen. Please include it in your registerLoadScreen implementation.",h.STYLE_RED_BOLD,e.loadScreen,h.STYLE_BLACK)},e.prototype.hideLoadScreen=function(t,e){var i=this;this.log("Hide load screen requested: %c%s",h.STYLE_RED_BOLD,e.loadScreen);var n=e;void 0===this._currentLoadScreen&&(this._currentLoadScreen=this.getLoadScreen(e.loadScreen)),void 0!==this._currentLoadScreen?this._currentLoadScreen.animateOut((function(){i.onLoadAnimateOutComplete(),n.callback()})):this.logE("%c%s%c has not been registered as a load screen. Please include it in your registerLoadScreen implementation.",h.STYLE_RED_BOLD,e.loadScreen,h.STYLE_BLACK)},e.prototype.load=function(t,e){void 0!==this._onLoadComplete&&this.logW("Replacing existing _onLoadComplete callback!"),this.log("Asset Load requested. Count: %c%s",h.STYLE_RED_BOLD,void 0===t?"Nothing to load":t.length),this._onLoadComplete=e,this.loadAssets(t)},e.prototype.loadOnSplash=function(t,e){void 0!==this._onLoadComplete&&this.logW("Replacing existing _onLoadComplete callback!"),this.log("Splash Asset Load requested. Count: %c%s",h.STYLE_RED_BOLD,void 0===t?"Nothing to load":t.length),this._onLoadComplete=e,this._currentLoadScreen=this._splashScreen,this.loadAssets(t)},e.prototype.unload=function(t,e){if(void 0!==t)for(var i=0,n=t;i<n.length;i++){var r=n[i];this.log("Trying to destroy %c%s",h.STYLE_RED_BOLD,r.assetName),r instanceof c.AssetMapAudioData?this.destroyAudioResource(r):this.destroyPixiResource(r.assetName),r.destroy()}void 0!==e&&e()},e.prototype.getLoadScreen=function(t){var e;return this._isCurrentLoadScreenPersistent=!0,void 0!==t?("function"==typeof(e=this._loadScreens.getValue(t))&&(this._isCurrentLoadScreenPersistent=!1,e=e()),void 0!==e?(this.log("Loadscreen %c%s%c found",h.STYLE_RED_BOLD,t,h.STYLE_BLACK),e):void this.log("Load screen %c%s%c not found",h.STYLE_RED_BOLD,t,h.STYLE_BLACK)):(this.log("No load screen requested -> Returning the default loadscreen"),"function"==typeof(e=this._defaultLoadScreen)&&(this._isCurrentLoadScreenPersistent=!1,e=e()),e)},e.prototype.loadAssets=function(t){var e=this;if(void 0!==t){for(var i=this.removeRedundantLoads(t),n=[],r=0,o=i;r<o.length;r++){var s=o[r];s.resolutionSuffix&&s.resolutionSuffix!==l.AssetUtils.resolutionSuffix||(this.log("file requested: %c%s",h.STYLE_RED_BOLD,s.assetName),s instanceof c.AssetMapAudioData?n.push(s):PIXI.loader.add(s.assetName,s.assetPath?l.AssetUtils.replaceResolutionToken(s.assetPath):l.AssetUtils.getPathToAsset(s),s.getLoaderOptions()))}n.length>0?PIXI.loader.load((function(){e.log("PIXI load complete"),PubSub.publishSync(a.LOAD_AUDIO_FROM_ASSET_MAP,{assets:n,callback:function(){e.log("Audio load complete."),e.onAllLoadsComplete()},progressCallback:e.onAudioLoadProgress.bind(e)})})):(this.log("No AUDIO to load"),PIXI.loader.load(this.onAllLoadsComplete.bind(this)))}else this.log("Nothing to load"),this.onAllLoadsComplete()},e.prototype.destroyAudioResource=function(t){s.Application.instance.audio.unload(t.assetName,t.category,!0)},e.prototype.destroyPixiResource=function(t){var e=PIXI.loader.resources[t];if(void 0!==e){e.children.length>0?this.log("Destroying resource "+t+" and its children: ",e.children.map((function(t){return t.name}))):this.log("Destroying resource "+t);var i=e.textures;if(void 0!==i)for(var n=Object.keys(i),r=0;r<n.length;++r)i[n[r]].destroy(!1);void 0!==e.texture&&e.texture.destroy(!0),void 0!==e.spineAtlas&&e.spineAtlas.dispose();for(r=0;r<e.children.length;++r)this.destroyPixiResource(e.children[r].name);delete PIXI.loader.resources[t]}else this.logE("Can't find resource to destroy: "+t)},e.prototype.removeRedundantLoads=function(t){for(var e,i=new Array,n=0;n<t.length;++n){var r=!1;e=t[n];for(var o=0;o<i.length;o++){var s=i[o];if(s.assetName===e.assetName&&s.resolutionSuffix===e.resolutionSuffix){r=!0;break}}!1===r?(this.log("Adding %c%s%c to the final list.",h.STYLE_RED_BOLD,e.assetName,h.STYLE_BLACK),i.push(e)):this.log("Excluding %c%s%c from the final list because it is already included.",h.STYLE_RED_BOLD,e.assetName,h.STYLE_BLACK)}return i},e.prototype.onPixiLoadProgress=function(t,e){void 0!==this._currentLoadScreen&&this._currentLoadScreen.onLoadProgress(t,e,0)},e.prototype.onAudioLoadProgress=function(t){void 0!==this._currentLoadScreen&&this._currentLoadScreen.onLoadProgress({progress:t},void 0,1)},e.prototype.onAllLoadsComplete=function(){void 0!==this._currentLoadScreen?this._currentLoadScreen.onLoadComplete(this.onLoadScreenComplete.bind(this)):this.onLoadScreenComplete()},e.prototype.onLoadScreenComplete=function(){if(this.log("Requested load complete."),void 0!==this._onLoadComplete){var t=this._onLoadComplete;this._onLoadComplete=void 0,t()}else this.logE("_onLoadComplete undefined in onLoadScreenComplete")},e.prototype.onLoadAnimateOutComplete=function(){this.log("Load screen completely hidden."),this._currentLoadScreen&&(this.removeChild(this._currentLoadScreen),this._isCurrentLoadScreenPersistent||this._currentLoadScreen.destroy()),this._currentLoadScreen=void 0,PubSub.publishSync(a.LOAD_SCREEN_HIDDEN,void 0)},e.prototype.onLoadRequested=function(t,e){this.log("Load requested"),this.load(e.assets,e.callback)},e.prototype.onUnloadRequested=function(t,e){this.log("Unload requested"),this.unload(e.assets,e.callback)},e.prototype.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&h.log.apply(h,[t,{className:"LoadManager",color:"orange"}].concat(e))},e.prototype.logW=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&h.logWarning.apply(h,[t,{className:"LoadManager",color:"orange"}].concat(e))},e.prototype.logE=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.logError.apply(h,[t,{className:"LoadManager",color:"orange"}].concat(e))},e}(PIXI.Container);e.LoadManager=p},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e._autoProgress=!0,e}return r(e,t),e.prototype.onLoadProgress=function(t,e,i){void 0===i&&(i=0)},e.prototype.onLoadComplete=function(t){t()},Object.defineProperty(e.prototype,"autoProgress",{get:function(){return this._autoProgress},enumerable:!0,configurable:!0}),e}(i(201).State);e.LoadScreen=o},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e._size=new PIXI.Point,e}return r(e,t),e.prototype.init=function(t,e){this.onResize(t)},e.prototype.animateIn=function(t){t()},e.prototype.update=function(t){},e.prototype.onResize=function(t){this._size.copy(t),this.position.set(.5*this._size.x,.5*this._size.y)},e.prototype.animateOut=function(t){t()},e.prototype.destroy=function(e){void 0===e&&(e={children:!0}),t.prototype.destroy.call(this,e)},e}(PIXI.Container);e.State=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i){this.assets=t,this.callback=e,this.loadScreen=i};e.LoadToken=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),r=function(){function t(){this._copyChangedCallbacks=new Array,this._languageId=t.EN_CA}return Object.defineProperty(t.prototype,"curLanguage",{get:function(){return this._languageId},enumerable:!0,configurable:!0}),t.prototype.setData=function(t,e){void 0!==e&&(this._languageId=e),this._data=t},t.prototype.getCopy=function(t){return void 0===this._data?(this.logError("Set the copy data first."),"No data set."):void 0===this._data[t]?(this.logError("%s not found.",t),"Missing key."):void 0===this._data[t][this._languageId]?(this.logError("No %s data for %s was found",this._languageId,t),"No data found."):this._data[t][this._languageId]},t.prototype.registerOnChangeLanguageCallback=function(t){return-1===this._copyChangedCallbacks.indexOf(t)&&(this._copyChangedCallbacks.push(t),!0)},t.prototype.unregisterOnChangeLanguageCallback=function(t){var e=this._copyChangedCallbacks.indexOf(t);e>-1&&this._copyChangedCallbacks.splice(e,1)},t.prototype.changeLanguage=function(t){this._languageId=t,this._copyChangedCallbacks.forEach((function(t){t()}))},t.prototype.logError=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];n.LogUtils.logError.apply(n.LogUtils,[t,{className:"CopyManager",color:"DarkViolet"}].concat(e))},t.EN_CA="en_ca",t}();e.CopyManager=r},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(205),s=i(206),a=i(2),l=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=0);var r=t.call(this)||this;return r._root=e,r._interval=n,r._elapsed=0,r._active=i,r._graphics=new PIXI.Graphics,r.addChild(r._graphics),r}return r(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t,!1===this._active?this.clear():this.render()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interval",{set:function(t){this._interval=t},enumerable:!0,configurable:!0}),e.prototype.update=function(t){this._active&&(this._interval>0&&(this._elapsed+=t),this._elapsed>=this._interval&&(this._elapsed%=this._interval,this.render()))},e.prototype.render=function(){this._graphics.clear(),this._graphics.beginFill(16711680,.25),this.renderRecursive(this._root),this._graphics.endFill()},e.prototype.clear=function(){this._graphics.clear()},e.prototype.renderRecursive=function(t){if(!0===t.interactive&&!0===t.worldVisible&&this.renderTarget(t),t instanceof PIXI.Container!=!1&&0!==t.children.length&&!0===t.interactiveChildren)for(var e=0;e<t.children.length;++e)this.renderRecursive(t.children[e])},e.prototype.renderTarget=function(t){var e=new PIXI.Transform;t.parent.worldTransform.decompose(e);var i=new PIXI.Point(e.scale.x/this.parent.scale.x,e.scale.y/this.parent.scale.y),n=new PIXI.Point(i.x*t.scale.x,i.y*t.scale.y),r=t.hitArea,l=t.getGlobalPosition();if(l.x*=1/this.parent.scale.x,l.y*=1/this.parent.scale.y,r instanceof PIXI.Rectangle||r instanceof PIXI.RoundedRectangle||r instanceof PIXI.Circle||r instanceof PIXI.Ellipse||r instanceof PIXI.Polygon){var h=r.clone();this._graphics.drawShape(a.offsetShape(h,l))}else if(r instanceof o.CompoundHitArea)for(var u=0;u<r.components.length;++u){h=r.components[u].clone();this._graphics.drawShape(a.offsetShape(h,l))}else if(r instanceof s.PixelPerfectHitArea)for(var c=0;c<r.width;++c)for(var d=0;d<r.height;++d)r.getHitAreaAtPixel(c,d)&&this._graphics.drawRect(l.x-.5*r.scaledWidth*n.x+c*n.x,l.y-.5*r.scaledHeight*n.y+d*n.y,n.x,n.y)},e}(PIXI.Container);e.HitAreaRenderer=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._components=t}return Object.defineProperty(t.prototype,"components",{get:function(){return this._components},enumerable:!0,configurable:!0}),t.prototype.contains=function(t,e){for(var i=0;i<this._components.length;++i)if(this._components[i].contains(t,e))return!0;return!1},t}();e.CompoundHitArea=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(59),r=function(){function t(t,e,i){void 0===i&&(i=0),this._target=e,this._norm=new PIXI.Point,this._pixel=new PIXI.Point;var n=t.plugins.extract.pixels(e,void 0,e.texture.baseTexture.resolution),r=0,o=0;e.texture.width%1!=0&&(r=-.5),e.texture.height%1!=0&&(o=-.5),this._map=new Array;for(var s=0;s<e.texture.width+r;++s){this._map.push(new Array);for(var a=0;a<e.texture.height+o;++a)this._map[s][a]=n[4*(a*(e.texture.width+r)+s)+3]>i}}return Object.defineProperty(t.prototype,"width",{get:function(){return this._map.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaledWidth",{get:function(){return this.width*this._target.scale.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._map[0].length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaledHeight",{get:function(){return this.height*this._target.scale.y},enumerable:!0,configurable:!0}),t.prototype.getHitAreaAtPixel=function(t,e){return this._map[t][e]},t.prototype.contains=function(t,e){return this._norm.x=(t+this.width*this._target.anchor.x)/this.width,this._norm.y=(e+this.height*this._target.anchor.y)/this.height,this._norm.x>=0&&this._norm.x<=1&&this._norm.y>=0&&this._norm.y<=1&&(this._pixel.x=Math.floor(n.clamp(this._norm.x*this._map.length,0,this._map.length-1)),this._pixel.y=Math.floor(n.clamp(this._norm.y*this._map[0].length,0,this._map[0].length-1)),this._map[this._pixel.x][this._pixel.y])},t}();e.PixelPerfectHitArea=r},function(t,e){function i(t){if(t&&"object"==typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"==typeof t)return s[t];var i,o=String(t);return(i=n[o.toLowerCase()])?i:(i=r[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}i.isEventKey=function(t,e){if(t&&"object"==typeof t){var i=t.which||t.keyCode||t.charCode;if(null==i)return!1;if("string"==typeof e){var o;if(o=n[e.toLowerCase()])return o===i;if(o=r[e.toLowerCase()])return o===i}else if("number"==typeof e)return e===i;return!1}};var n=(e=t.exports=i).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(o=97;o<123;o++)n[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)n[o-48]=o;for(o=1;o<13;o++)n["f"+o]=o+111;for(o=0;o<10;o++)n["numpad "+o]=o+96;var s=e.names=e.title={};for(o in n)s[n[o]]=o;for(var a in r)n[a]=r[a]},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(9),o=i(8);!function(t){t[t.UP=0]="UP",t[t.RIGHT=1]="RIGHT",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.NUM_ELEMENTS=4]="NUM_ELEMENTS"}(n=e.Direction||(e.Direction={}));var s=function(){function t(){this._isActive=!1,this._focusables=[],this._neighbours=[]}return Object.defineProperty(t.prototype,"isActive",{set:function(t){this._isActive=t,!1===this._isActive&&void 0!==this._currentFocusable?this.clearFocus():!0===this._isActive&&void 0===this._currentFocusable&&this.focusFirstNode()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentFocusable",{get:function(){return this._currentFocusable},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this._focusables.length=0,this._neighbours.length=0,this.clearFocus()},t.prototype.registerFocusable=function(t){Array.isArray(t)||(t=[t]);for(var e=0,i=t;e<i.length;e++){var n=i[e];n&&this._focusables.indexOf(n)<0&&this._focusables.push(n)}!0===this._isActive&&void 0===this._currentFocusable&&this.focusFirstNode()},t.prototype.unregisterFocusable=function(t){Array.isArray(t)||(t=[t]);for(var e=function(t){if("function"==typeof t)i._focusables=i._focusables.filter((function(e){return!t(e)}));else{var e=i._focusables.indexOf(t);e>=0&&i._focusables.splice(e,1)}},i=this,n=0,r=t;n<r.length;n++){e(r[n])}this._currentFocusable&&t.indexOf(this._currentFocusable)>-1&&(this.clearFocus(),this.focusFirstNode())},t.prototype.step=function(t){if(void 0===this._currentFocusable)this.focusFirstNode();else if(!this.stepToNeighbour(t)){var e=this._focusables.filter(this.isFocusable);e.length>1?this.stepToNearest(t,e):e.length>0?this.setFocus(e[0]):this.clearFocus()}},t.prototype.clearFocus=function(){void 0!==this._currentFocusable&&(this._currentFocusable.onFocusEnd(),PubSub.publishSync(r.KEYBOARD_FOCUS_END,this._currentFocusable),this._currentFocusable=void 0)},t.prototype.setFocus=function(t){this._currentFocusable!==t&&(void 0!==this._currentFocusable&&(this._currentFocusable.onFocusEnd(),PubSub.publishSync(r.KEYBOARD_FOCUS_END,this._currentFocusable)),this._currentFocusable=t,this._currentFocusable.onFocusBegin(),PubSub.publishSync(r.KEYBOARD_FOCUS_BEGIN,this._currentFocusable))},t.prototype.focusFirstNode=function(){for(var t=0,e=this._focusables;t<e.length;t++){var i=e[t];if(this.isFocusable(i))return void this.setFocus(i)}o.LogUtils.logWarning("No registered focusables are currently focusable.",{className:"KeyboardMap",color:"brown"})},t.prototype.activateFocussedNode=function(){void 0!==this._currentFocusable&&this._currentFocusable.onFocusActivated()},t.prototype.forceNeighbour=function(t,e,i){this._neighbours.push({from:t,to:e,direction:i})},t.prototype.clearNeighbours=function(){this._neighbours.length=0},t.prototype.stepToNeighbour=function(t){for(var e=0,i=this._neighbours;e<i.length;e++){var n=i[e];if(n.from===this._currentFocusable&&n.direction===t&&this.isFocusable(n.to))return this.setFocus(n.to),!0}return!1},t.prototype.stepToNearest=function(t,e){if(this._currentFocusable){for(var i=this._currentFocusable.getFocusPosition(),n=Number.MAX_VALUE,r=void 0,o=0,s=e;o<s.length;o++){var a=s[o];if(a!==this._currentFocusable){var l=this.calculateWeight(i,a.getFocusPosition(),t);l<n&&(n=l,r=a)}}r&&this.setFocus(r)}},t.prototype.calculateWeight=function(t,e,i){var r=e.x-t.x,o=e.y-t.y;switch(i){case n.UP:return o>=0?Number.MAX_VALUE:this.temp(Math.abs(o),Math.abs(r));case n.RIGHT:return r<=0?Number.MAX_VALUE:this.temp(Math.abs(r),Math.abs(o));case n.DOWN:return o<=0?Number.MAX_VALUE:this.temp(Math.abs(o),Math.abs(r));case n.LEFT:default:return r>=0?Number.MAX_VALUE:this.temp(Math.abs(r),Math.abs(o))}},t.prototype.temp=function(t,e){return t+e*(e/t)},t.prototype.isFocusable=function(t){return t.isFocusable?t.isFocusable():t instanceof PIXI.Container&&(t.interactive&&t.worldVisible)},t}();e.KeyboardMap=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.ENTER=13]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CTRL=17]="CTRL",t[t.ALT=18]="ALT",t[t.PAUSE_BREAK=19]="PAUSE_BREAK",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.ESC=27]="ESC",t[t.SPACEBAR=32]="SPACEBAR",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.ZERO=48]="ZERO",t[t.ONE=49]="ONE",t[t.TWO=50]="TWO",t[t.THREE=51]="THREE",t[t.FOUR=52]="FOUR",t[t.FIVE=53]="FIVE",t[t.SIX=54]="SIX",t[t.SEVEN=55]="SEVEN",t[t.EIGHT=56]="EIGHT",t[t.NINE=57]="NINE",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.OS_LEFT=91]="OS_LEFT",t[t.OS_RIGHT=92]="OS_RIGHT",t[t.SELECT=93]="SELECT",t[t.NUMPAD_0=96]="NUMPAD_0",t[t.NUMPAD_1=97]="NUMPAD_1",t[t.NUMPAD_2=98]="NUMPAD_2",t[t.NUMPAD_3=99]="NUMPAD_3",t[t.NUMPAD_4=100]="NUMPAD_4",t[t.NUMPAD_5=101]="NUMPAD_5",t[t.NUMPAD_6=102]="NUMPAD_6",t[t.NUMPAD_7=103]="NUMPAD_7",t[t.NUMPAD_8=104]="NUMPAD_8",t[t.NUMPAD_9=105]="NUMPAD_9",t[t.NUMPAD_MULT=106]="NUMPAD_MULT",t[t.NUMPAD_ADD=107]="NUMPAD_ADD",t[t.NUMPAD_SUBTRACT=109]="NUMPAD_SUBTRACT",t[t.NUMPAD_DECIMAL=110]="NUMPAD_DECIMAL",t[t.NUMPAD_DIVIDE=111]="NUMPAD_DIVIDE",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.NUM_LOCK=144]="NUM_LOCK",t[t.SCROLL_LOCK=145]="SCROLL_LOCK",t[t.SEMI_COLON=186]="SEMI_COLON",t[t.EQUALS=187]="EQUALS",t[t.COMMA=188]="COMMA",t[t.DASH=189]="DASH",t[t.PERIOD=190]="PERIOD",t[t.FORWARD_SLASH=191]="FORWARD_SLASH",t[t.GRAVE=192]="GRAVE",t[t.OPEN_BRACKET=219]="OPEN_BRACKET",t[t.BACK_SLASH=220]="BACK_SLASH",t[t.CLOSE_BRACKET=221]="CLOSE_BRACKET",t[t.SINGLE_QUOTE=222]="SINGLE_QUOTE"}(e.KeyCodes||(e.KeyCodes={}))},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(33),s=i(9),a=i(25),l=i(58),h=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=.75);var n=t.call(this)||this;return n._debug=!1,n._popups=new o.Dictionary,n._activePopups=new Array,n._overlayColor=e,n._overlayAlpha=i,PubSub.subscribe(s.SHOW_POPUP,n.handleShowPopup.bind(n)),PubSub.subscribe(s.HIDE_POPUP,n.handleHidePopup.bind(n)),PubSub.subscribe(s.HIDE_ALL_POPUPS,n.handleHideAllPopups.bind(n)),PubSub.subscribe(s.HIDE_TOPMOST_POPUP,n.handleHideTopmostPopup.bind(n)),PubSub.subscribe(s.HIDE_POPUP_COMPLETE,n.handleHidePopupComplete.bind(n)),window.addEventListener(a.Events.KEY_DOWN,n.handleKeyDown.bind(n),!1),n}return r(e,t),Object.defineProperty(e.prototype,"debug",{set:function(t){this._debug=t},enumerable:!0,configurable:!0}),e.prototype.registerPopup=function(t,e){this._popups.setValue(e,t),this.log('registerPopup: Registered popup with ID "'+e+'"')},e.prototype.update=function(t){for(var e=0;e<this._activePopups.length;++e)this._activePopups[e].update(t)},e.prototype.onResize=function(t){this._size=t,this.position.set(.5*this._size.x,.5*this._size.y);for(var e=0;e<this._activePopups.length;++e)this._activePopups[e].onResize(t)},e.prototype.ShowPopup=function(t){var e=this._popups.getValue(t.id);if(void 0!==e){this.log('ShowPopup: Creating popup from ID: "'+t.id+'"');var i=e();if(!1!==t.backdrop){var n=this.CreateOverlay();this.addChild(n),i.blackout=n}PubSub.publishSync(s.PUSH_KEYBOARD_LAYER,null),i.init(this._size),this.addChild(i),this._activePopups.push(i),this.log("ShowPopup: Showing popup"),i.show(t)}else this.logW('ShowPopup: No popup with the ID "'+t.id+'" has been registered')},e.prototype.HidePopup=function(t){var e=this.getPopup(t);void 0!==e?(this.log('HidePopup: Attempting to hide popup with ID "'+t+'"'),this._hidePopup(e)):this.logE("HidePopup: Can't find any active popup with ID \""+t+'"')},e.prototype.HideAllPopups=function(){if(0===this._activePopups.length)this.logW("HideAllPopups: No popups to hide!");else{this.log("HideAllPopups: Hiding all popups");for(var t=this._activePopups.length-1;t>=0;--t)this._hidePopup(this._activePopups[t])}},e.prototype.HideTopmostPopup=function(){if(0===this._activePopups.length)this.logW("HideTopmostPopup: No popups to hide!");else{var t=this._activePopups[this._activePopups.length-1];this.log("HideTopmostPopup: Hiding topmost popup"),this._hidePopup(t)}},e.prototype._hidePopup=function(t){t.hide()},e.prototype.handleEscapeKeyDown=function(t){if(this.log("Escape key (or Android back button) pressed"),0===this._activePopups.length)this.logW("No popups to close");else{var e=this._activePopups[this._activePopups.length-1];e.keyboardToClose&&(t.preventDefault(),this._hidePopup(e))}},e.prototype.onHidePopupComplete=function(t){if(void 0!==t){this._activePopups.splice(this._activePopups.indexOf(t),1),this.removeChild(t),this.log("onHidePopupComplete: Removed popup from stage");var e=t.blackout;void 0!==e?(this.removeChild(e),this.log("onHidePopupComplete: Removed overlay from stage"),e.destroy(),this.log("onHidePopupComplete: Destroyed overlay")):this.logE("onHidePopupComplete: Can't find overlay to remove"),t.destroy(),this.log("onHidePopupComplete: Destroyed popup"),PubSub.publishSync(s.POP_KEYBOARD_LAYER,null)}else this.logE("onHidePopupComplete: parameter pPopup is undefined!");var i=this._activePopups.length;0===i?this.log("onHidePopupComplete: No more popups"):this.log("onHidePopupComplete: "+i+" popups remaining")},e.prototype.handleHidePopup=function(t,e){this.HidePopup(e)},e.prototype.handleHideAllPopups=function(t){this.HideAllPopups()},e.prototype.handleShowPopup=function(t,e){this.ShowPopup(e)},e.prototype.handleHidePopupComplete=function(t,e){this.onHidePopupComplete(e)},e.prototype.handleHideTopmostPopup=function(t){this.HideTopmostPopup()},e.prototype.handleKeyDown=function(t){switch(t.keyCode){case a.KeyCodes.ESC:this.handleEscapeKeyDown(t)}},e.prototype.CreateOverlay=function(){var t=new PIXI.Graphics;return t.beginFill(this._overlayColor,this._overlayAlpha),t.drawRect(0,0,2,2),t.endFill(),t.blendMode=PIXI.BLEND_MODES.OVERLAY,t.interactive=!0,t.x=-this._size.x/2,t.y=-this._size.y/2,t.width=this._size.x,t.height=this._size.y,t},e.prototype.getPopup=function(t){for(var e,i=this._activePopups.length-1;i>=0;--i)if(this._activePopups[i].id===t){e=this._activePopups[i];break}return e},e.prototype.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&l.log.apply(l,[t,{className:"PopupManager",color:"blue"}].concat(e))},e.prototype.logW=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&l.logWarning.apply(l,[t,{className:"PopupManager",color:"blue"}].concat(e))},e.prototype.logE=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.logError.apply(l,[t,{className:"PopupManager",color:"blue"}].concat(e))},e}(PIXI.Container);e.PopupManager=h},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(24),s=i(112),a=i(9),l=i(79),h=i(35),u=i(2),c=i(109),d=function(t){function e(){var e=t.call(this)||this;return e._isFocussed=!1,e._isSelected=!1,e._visuals=new PIXI.Container,e.addChild(e._visuals),e._outlineFilter=new l.OutlineFilter,e._outlineFilter.uniforms.thickness=[.025,.025],e._outlineFilter.uniforms.outlineColor=[70/255,130/255,210/255,1],e._outlineFilter.uniforms.filterClamp=[0,0,1,1],e.onSelected=new Array,e.onDeselected=new Array,e.on(h.Events.POINTER_OVER,e.onPointerOver),e.on(h.Events.POINTER_DOWN,e.onPointerDown),e.on(h.Events.POINTER_UP,e.onPointerUp),e.on(h.Events.POINTER_UP_OUTSIDE,e.onPointerUpOutside),e.on(h.Events.POINTER_OUT,e.onPointerOut),e.interactive=!0,e.buttonMode=!0,e.hitArea=new PIXI.Rectangle(-25,-25,50,50),e}return r(e,t),Object.defineProperty(e.prototype,"isSelected",{get:function(){return this._isSelected},enumerable:!0,configurable:!0}),e.prototype.select=function(){this._isSelected=!0,this._visuals.filters=[this._outlineFilter];for(var t=0;t<this.onSelected.length;++t)this.onSelected[t](this)},e.prototype.deselect=function(){this._isSelected=!1,this._visuals.filters=[];for(var t=0;t<this.onDeselected.length;++t)this.onDeselected[t](this)},e.prototype.toggleSelected=function(){this.isSelected?this.deselect():this.select()},e.prototype.onFocusBegin=function(){this.playHoverVo()},e.prototype.onFocusEnd=function(){},e.prototype.onFocusActivated=function(){this.toggleSelected(),this.playClickedSFX()},e.prototype.getFocusPosition=function(){return this.hitArea instanceof PIXI.Rectangle?this.toGlobal(c.center(this.hitArea)):this.getGlobalPosition()},e.prototype.getFocusSize=function(){var t;return t=this.hitArea instanceof PIXI.Rectangle?u.getGlobalBounds(this,this.hitArea.clone()):u.getGlobalBounds(this),c.size(t)},e.prototype.playHoverVo=function(){void 0!==this._hoverVo&&PubSub.publishSync(a.PLAY_AUDIO,new s.AudioToken(this._hoverVo,1,!1,o.VO.toString()))},e.prototype.playClickedSFX=function(){void 0!==this._clickedSfx&&PubSub.publishSync(a.PLAY_AUDIO,new s.AudioToken(this._clickedSfx,1,!1,o.SFX.toString()))},e.prototype.onPointerOver=function(t){this._visuals.scale.set(1.05),this.playHoverVo()},e.prototype.onPointerDown=function(t){this._eventData=t.data,this._visuals.scale.set(.95)},e.prototype.onPointerUp=function(t){void 0!==this._eventData&&this._eventData.identifier===t.data.identifier&&(this.toggleSelected(),this._eventData=void 0,this._visuals.scale.set(1.05),this.playClickedSFX())},e.prototype.onPointerUpOutside=function(t){this._eventData=void 0},e.prototype.onPointerOut=function(t){this._visuals.scale.set(1)},e}(PIXI.Container);e.Selectable=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BUILD_DATE="Wed, 07 Oct 2020 17:02:04 GMT",e.PACKAGE_NAME="html-living-framework",e.PACKAGE_VERSION="0.28.0",e.GIT_BRANCH="develop",e.GIT_COMMIT="80b467725288298bad7c198a91dfdb36a29cfee2"},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(35),s=i(8),a=i(2),l=function(t){function e(e,i,n){var r=t.call(this)||this;return r._callback=e,r._visuals=new PIXI.Container,r.addChild(r._visuals),void 0!==i&&(r._image=a.makeSprite(i,n),r._enabledTexture=r._image.texture,r._visuals.addChild(r._image)),r.interactive=!0,r.buttonMode=!0,r.hitArea=void 0!==r._image?new PIXI.Rectangle(.5*-r._image.width,.5*-r._image.height,r._image.width,r._image.height):new PIXI.Rectangle(-50,-50,100,100),r.on(o.Events.POINTER_OVER,r.onPointerOver),r.on(o.Events.POINTER_DOWN,r.onPointerDown),r.on(o.Events.POINTER_UP,r.onPointerUp),r.on(o.Events.POINTER_OUT,r.onPointerOut),r}return r(e,t),e.prototype.onFocusBegin=function(){},e.prototype.onFocusEnd=function(){},e.prototype.onFocusActivated=function(){this.interactive&&this._callback()},e.prototype.getFocusPosition=function(){return this.hitArea instanceof PIXI.Rectangle?this.toGlobal(s.RectUtils.center(this.hitArea)):this.getGlobalPosition()},e.prototype.getFocusSize=function(){var t;return t=this.hitArea instanceof PIXI.Rectangle?a.getGlobalBounds(this,this.hitArea.clone()):a.getGlobalBounds(this),s.RectUtils.size(t)},e.prototype.addText=function(t,e,i,n){void 0===n&&(n=0),this._text=new PIXI.extras.BitmapText(t,{font:i+"px "+e,align:"centre",tint:n}),this._text.position.set(0,0),this._text.anchor=.5,this._visuals.addChild(this._text)},e.prototype.changeText=function(t){void 0!==this._text&&(this._text.text=t)},e.prototype.setCallback=function(t){this._callback=t},e.prototype.setDisabledImage=function(t,e){this._disabledTexture="string"==typeof t?void 0===e?PIXI.Texture.fromImage(t):PIXI.loader.resources[e].textures[t]:t},e.prototype.setInteractive=function(t){this.interactive=t,void 0!==this._image&&void 0!==this._disabledTexture&&void 0!==this._enabledTexture&&(this._image.texture=t?this._enabledTexture:this._disabledTexture)},e.prototype.onPointerOver=function(t){},e.prototype.onPointerDown=function(t){this._eventData=t.data},e.prototype.onPointerUp=function(t){void 0!==this._eventData&&this._eventData.identifier===t.data.identifier&&(this._callback(),this._eventData=void 0)},e.prototype.onPointerOut=function(t){this._eventData=void 0},e}(PIXI.Container);e.Button=l},function(t,e,i){"use strict";var n=i(11);t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){throw 1},1)}))}},function(t,e,i){var n=i(19),r=i(11),o=i(20),s=Object.defineProperty,a={},l=function(t){throw t};t.exports=function(t,e){if(o(a,t))return a[t];e||(e={});var i=[][t],h=!!o(e,"ACCESSORS")&&e.ACCESSORS,u=o(e,0)?e[0]:l,c=o(e,1)?e[1]:void 0;return a[t]=!!i&&!r((function(){if(h&&!n)return!0;var t={length:-1};h?s(t,1,{enumerable:!0,get:l}):t[1]=1,i.call(t,u,c)}))}},function(t,e,i){var n=i(27),r=i(217),o=i(14)("species");t.exports=function(t,e){var i;return r(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!r(i.prototype)?n(i)&&null===(i=i[o])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)}},function(t,e,i){var n=i(53);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){"use strict";var n,r=i(17),o=i(65).f,s=i(23),a=i(219),l=i(32),h=i(220),u=i(68),c="".endsWith,d=Math.min,p=h("endsWith");r({target:"String",proto:!0,forced:!!(u||p||(n=o(String.prototype,"endsWith"),!n||n.writable))&&!p},{endsWith:function(t){var e=String(l(this));a(t);var i=arguments.length>1?arguments[1]:void 0,n=s(e.length),r=void 0===i?n:d(s(i),n),o=String(t);return c?c.call(e,o,r):e.slice(r-o.length,r)===o}})},function(t,e,i){var n=i(184);t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,i){var n=i(14)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,i){"use strict";var n=i(13),r=i(19),o=i(222),s=i(22),a=i(408),l=i(11),h=i(223),u=i(38),c=i(23),d=i(224),p=i(409),f=i(72),g=i(56),m=i(102).f,_=i(28).f,v=i(410),y=i(107),b=i(67),x=b.get,w=b.set,T=n.ArrayBuffer,S=T,E=n.DataView,P=E&&E.prototype,A=Object.prototype,I=n.RangeError,O=p.pack,C=p.unpack,M=function(t){return[255&t]},R=function(t){return[255&t,t>>8&255]},k=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},L=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},D=function(t){return O(t,23,4)},N=function(t){return O(t,52,8)},F=function(t,e){_(t.prototype,e,{get:function(){return x(this)[e]}})},B=function(t,e,i,n){var r=d(i),o=x(t);if(r+e>o.byteLength)throw I("Wrong index");var s=x(o.buffer).bytes,a=r+o.byteOffset,l=s.slice(a,a+e);return n?l:l.reverse()},U=function(t,e,i,n,r,o){var s=d(i),a=x(t);if(s+e>a.byteLength)throw I("Wrong index");for(var l=x(a.buffer).bytes,h=s+a.byteOffset,u=n(+r),c=0;c<e;c++)l[h+c]=u[o?c:e-c-1]};if(o){if(!l((function(){T(1)}))||!l((function(){new T(-1)}))||l((function(){return new T,new T(1.5),new T(NaN),"ArrayBuffer"!=T.name}))){for(var j,V=(S=function(t){return h(this,S),new T(d(t))}).prototype=T.prototype,X=m(T),H=0;X.length>H;)(j=X[H++])in S||s(S,j,T[j]);V.constructor=S}g&&f(P)!==A&&g(P,A);var G=new E(new S(2)),W=P.setInt8;G.setInt8(0,2147483648),G.setInt8(1,2147483649),!G.getInt8(0)&&G.getInt8(1)||a(P,{setInt8:function(t,e){W.call(this,t,e<<24>>24)},setUint8:function(t,e){W.call(this,t,e<<24>>24)}},{unsafe:!0})}else S=function(t){h(this,S,"ArrayBuffer");var e=d(t);w(this,{bytes:v.call(new Array(e),0),byteLength:e}),r||(this.byteLength=e)},E=function(t,e,i){h(this,E,"DataView"),h(t,S,"DataView");var n=x(t).byteLength,o=u(e);if(o<0||o>n)throw I("Wrong offset");if(o+(i=void 0===i?n-o:c(i))>n)throw I("Wrong length");w(this,{buffer:t,byteLength:i,byteOffset:o}),r||(this.buffer=t,this.byteLength=i,this.byteOffset=o)},r&&(F(S,"byteLength"),F(E,"buffer"),F(E,"byteLength"),F(E,"byteOffset")),a(E.prototype,{getInt8:function(t){return B(this,1,t)[0]<<24>>24},getUint8:function(t){return B(this,1,t)[0]},getInt16:function(t){var e=B(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=B(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return L(B(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return L(B(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return C(B(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return C(B(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){U(this,1,t,M,e)},setUint8:function(t,e){U(this,1,t,M,e)},setInt16:function(t,e){U(this,2,t,R,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){U(this,2,t,R,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){U(this,4,t,k,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){U(this,4,t,k,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){U(this,4,t,D,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){U(this,8,t,N,e,arguments.length>2?arguments[2]:void 0)}});y(S,"ArrayBuffer"),y(E,"DataView"),t.exports={ArrayBuffer:S,DataView:E}},function(t,e){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(t,e){t.exports=function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return t}},function(t,e,i){var n=i(38),r=i(23);t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=r(e);if(e!==i)throw RangeError("Wrong length or index");return i}},function(t,e,i){var n=i(105);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(t){t.exports={lsf_ui01:[{content:"Luna’s Seek & Find !",end:2200,start:0}],lsf_ui02:[{content:"Hi friend! Let’s go help my friends all over the world.",end:4540,start:0}],lsf_ui02b:[{content:"Let’s go help my friends all over the world.",end:3100,start:0}],lsf_ui03:[{content:"Pick a city on the map to go to.",end:2570,start:0}],lsf_ui04:[{content:"Choose a city to visit!",end:1570,start:0}],lsf_ui05:[{content:"Ooooo, which city should we go to next?",end:3620,start:0}],lsf_ui06:[{content:"There are friends to share experiences with all over the world!",end:3230,start:0}],lsf_ui07:[{content:"Play",end:710,start:0}],lsf_ui08:[{content:"Next",end:900,start:0}],lsf_ui09:[{content:"New City",end:1160,start:0}],lsf_ui10:[{content:"Continue",end:930,start:0}],lsf_ui11:[{content:"Home",end:920,start:0}],lsf_ui12:[{content:"Back",end:1020,start:0}],lsf_ui13:[{content:"Hint",end:900,start:0}],lsf_ui14:[{content:"Right",end:970,start:0}],lsf_ui15:[{content:"Left",end:840,start:0}],lsf_ui16alt:[{content:"Juneau, Alaska in the United States",end:2500,start:0}],lsf_ui17:[{content:"Paris, France",end:1530,start:0}],lsf_ui18alt:[{content:"London, United Kingdom",end:2200,start:0}],lsf_ui19:[{content:"Rio de Janeiro, Brazil",end:2510,start:0}],lsf_ui20alt:[{content:"New Orleans, Louisiana in the United States",end:2880,start:0}],lsf_o01:[{content:"How about we visit Juneau, Alaska in the United States, first!",end:3560,start:0}],lsf_o02:[{content:"Select here to go!",end:1570,start:0}],lsf_o03:[{content:"If you need help finding something, use this button for a hint.",end:3550,start:0}],lsf_o04:[{content:"Use the arrow buttons to move left or right!",end:2740,start:0}],lsf_j01:[{content:"Hi friend - we’re in Juneau, Alaska",end:2810,start:0},{content:"where there are SO many wild animals to see!",end:5620,start:2810}],lsf_j02:[{content:"My friend Skye needs our help taking animal photos",end:1990,start:0},{content:"for her picture board.",end:3980,start:1990}],lsf_j03:[{content:"Let’s go into the wild and take some pictures!",end:3320,start:0}],lsf_j04:[{content:"Ooooh - I can’t wait to take some photos!",end:3380,start:0}],lsf_j05:[{content:"Ooooh - I wonder what wild animals we’ll find!",end:3790,start:0}],lsf_j06:[{content:"Isn’t Juneau, Alaska a beautiful place??!",end:3200,start:0}],lsf_j07:[{content:"When you find a wild animal on our list,",end:2185,start:0},{content:"select it to take a picture!",end:4370,start:2185}],lsf_j08:[{content:"Wooohoooo - we took all of the pictures Skye needed!",end:3770,start:0}],lsf_j09:[{content:"Now, let’s put them on her picture board.",end:2360,start:0}],lsf_j10:[{content:"Wow, I really love these!",end:2660,start:0}],lsf_j11:[{content:"Such beautiful pictures!",end:2410,start:0}],lsf_j12:[{content:"You took some great shots!",end:2210,start:0}],lsf_j13:[{content:"Oooh - should we take more wild animal photos in Juneau",end:4e3,start:0},{content:"or go visit another city?",end:5610,start:4e3}],lsf_ij01a:[{content:"Bear.",end:990,start:0}],lsf_ij01b:[{content:"Bear!",end:850,start:0}],lsf_ij02a:[{content:"Woodpecker.",end:990,start:0}],lsf_ij02b:[{content:"Woodpecker!",end:1380,start:0}],lsf_ij03a:[{content:"Porcupine.",end:1140,start:0}],lsf_ij03b:[{content:"Porcupine!",end:1250,start:0}],lsf_ij04a:[{content:"Beaver.",end:1150,start:0}],lsf_ij04b:[{content:"Beaver!",end:1040,start:0}],lsf_ij05a:[{content:"Bald Eagle.",end:1240,start:0}],lsf_ij05b:[{content:"Bald Eagle!",end:1330,start:0}],lsf_ij06a:[{content:"Moose.",end:950,start:0}],lsf_ij06b:[{content:"Moose!",end:900,start:0}],lsf_ij07a:[{content:"Turtle.",end:830,start:0}],lsf_ij07b:[{content:"Turtle!",end:1100,start:0}],lsf_ij08a:[{content:"Raven.",end:1040,start:0}],lsf_ij08b:[{content:"Raven!",end:1280,start:0}],lsf_ij09a:[{content:"Snail.",end:1190,start:0}],lsf_ij09b:[{content:"Snail!",end:1350,start:0}],lsf_ij10a:[{content:"Deer.",end:850,start:0}],lsf_ij10b:[{content:"Deer!",end:1e3,start:0}],lsf_fj01:[{content:"Alaska is the largest state in the United States.",end:3300,start:0}],lsf_fj02:[{content:"Alaska has the top ten tallest mountains in the United States.",end:3980,start:0}],lsf_fj03:[{content:"Alaska has about twelve thousand rivers and three million lakes.",end:4480,start:0}],lsf_fj04:[{content:"Juneau is the capital of Alaska.",end:2620,start:0}],lsf_fj05:[{content:"Juneau is famous for its beautiful ice caves.",end:3620,start:0}],lsf_fj06:[{content:"Black Bears fish for salmon in streams.",end:2690,start:0}],lsf_fj07:[{content:"The Red-breasted Sapsucker is a woodpecker that drills",end:2910,start:0},{content:"holes in trees to eat sap and insects.",end:5820,start:2910}],lsf_fj08:[{content:"Beavers and porcupines are the two largest rodents in Alaska.",end:3760,start:0}],lsf_fj09:[{content:"Porcupines eat tree bark during the winter.",end:2940,start:0}],lsf_fj10:[{content:"The bald eagle is the national bird of the United States.",end:3640,start:0}],lsf_fj11:[{content:"There are more bald eagles in Alaska",end:2310,start:0},{content:"than in any other state in the United States.",end:4620,start:2310}],lsf_fj12:[{content:"Deer enjoy nibbling on a smelly plant called a Skunk Cabbage.",end:4210,start:0}],lsf_fj13:[{content:"Ravens are very smart birds that play games with sticks.",end:4220,start:0}],lsf_l01:[{content:"Here we are in London, United Kingdom with the Wigglewalkers!",end:4070,start:0}],lsf_l02:[{content:"They’re getting ready for a big circo performance",end:2510,start:0},{content:"and need our help finding new things to juggle.",end:5020,start:2510}],lsf_l03:[{content:"C’mon - let’s go see what we can find in London!",end:3750,start:0}],lsf_l04:[{content:"Oooh - I can’t wait to look in London!",end:2660,start:0}],lsf_l05:[{content:"Oooh - I wonder what we’ll find!",end:3190,start:0}],lsf_l06:[{content:"Ah, lovely London, England - isn’t it groovy?",end:4800,start:0}],lsf_l07:[{content:"When you find something on our list, select it!",end:2780,start:0}],lsf_l08:[{content:"Woohoo- we’re back just in time",end:2300,start:0},{content:"for the big juggling performance.",end:4600,start:2300}],lsf_l09:[{content:"Quick - give them the new things to juggle.",end:2480,start:0}],lsf_l10:[{content:"<giggle> That really is amazing juggling!",end:3550,start:0}],lsf_l11:[{content:"Don’t you just LOVE juggling?",end:2100,start:0},{content:"It’s one of my favorite things to watch!",end:4200,start:2100}],lsf_l12:[{content:"Juggling! (cheers) WOO WOO WOO!",end:2420,start:0}],lsf_l13:[{content:"Oooh - should we look for more things in London to juggle",end:2930,start:0},{content:"or go visit another city?",end:5680,start:2930}],lsf_il01a:[{content:"Shepherd's Pie.",end:1320,start:0}],lsf_il01b:[{content:"Shepherd’s Pie!",end:1380,start:0}],lsf_il02a:[{content:"Football.",end:970,start:0}],lsf_il02b:[{content:"Football!",end:1040,start:0}],lsf_il03a:[{content:"Teapot.",end:1040,start:0}],lsf_il03b:[{content:"Teapot!",end:810,start:0}],lsf_il04a:[{content:"Candyfloss.",end:1250,start:0}],lsf_il04b:[{content:"Candyfloss!",end:1160,start:0}],lsf_il05a:[{content:"Crisps.",end:1100,start:0}],lsf_il05b:[{content:"Crisps!",end:870,start:0}],lsf_il06a:[{content:"Double Decker Bus.",end:1500,start:0}],lsf_il06b:[{content:"Double Decker Bus!",end:1310,start:0}],lsf_il07a:[{content:"Fish n Chips.",end:1420,start:0}],lsf_il07b:[{content:"Fish n Chips!",end:1080,start:0}],lsf_il08a:[{content:"Biscuits.",end:1230,start:0}],lsf_il08b:[{content:"Biscuits!",end:970,start:0}],lsf_il09a:[{content:"Umbrella.",end:1020,start:0}],lsf_il09b:[{content:"Umbrella!",end:820,start:0}],lsf_il10a:[{content:"Bangers and Mash.",end:1390,start:0}],lsf_il10b:[{content:"Bangers and Mash!",end:1300,start:0}],lsf_fl01:[{content:"The city of London is over 2000 years old.",end:4100,start:0}],lsf_fl02:[{content:"London is the capital of the United Kingdom.",end:3110,start:0}],lsf_fl03:[{content:"Tea is very popular in the United Kingdom,",end:2705,start:0},{content:"where they drink 60 billion cups a year!",end:5410,start:2705}],lsf_fl04:[{content:"People in London have been eating fish and chips",end:2305,start:0},{content:"for over 150 years!",end:4610,start:2305}],lsf_fl05:[{content:"Shepherd’s Pie is made with potatoes and meat,",end:2585,start:0},{content:"so it’s not sweet like other pies.",end:5170,start:2585}],lsf_fl06:[{content:"Bangers and mash is a dish made of sausages",end:1935,start:0},{content:"and mashed potatoes.",end:3870,start:1935}],lsf_fl07:[{content:"Football is called soccer in the United States.",end:3110,start:0}],lsf_fl08:[{content:"Crisps are called potato chips in the United States.",end:3550,start:0}],lsf_fl09:[{content:"(laughs) Candyfloss is called Cotton Candy in the United States.",end:4190,start:0}],lsf_fl10:[{content:"Biscuits are called cookies in the United States.",end:2630,start:0}],lsf_p01:[{content:"Hiii friend, we’re in Paris, France, with endless food possibilities!",end:5860,start:0}],lsf_p02:[{content:"Chef René needs our help finding ingredients",end:2250,start:0},{content:"to make a special French dish!",end:4500,start:2250}],lsf_p03:[{content:"Let’s go to the Paris Market and find some ingredients.",end:3120,start:0}],lsf_p04:[{content:"Come on. Let’s go! I’m starving!",end:3190,start:0}],lsf_p05:[{content:"I wonder which French dish Chef René is going to make.",end:3610,start:0}],lsf_p06:[{content:"Oooh, the Paris Market... ",end:2960,start:0},{content:"just look at all the shops and foods we can try!",end:5920,start:2960}],lsf_p07:[{content:"When you find an ingredient on our list, select it!",end:3030,start:0}],lsf_p08:[{content:"Great job! We found everything on Chef René’s list!",end:3760,start:0}],lsf_p09:[{content:"Now, let’s put the ingredients on the counter",end:2200,start:0},{content:"to see what Chef René’s going to make!",end:4400,start:2200}],lsf_p10:[{content:"Oooooh - a Grilled Cheese Sandwich -",end:2190,start:0},{content:"with yummy, stretchy cheese!",end:4380,start:2190}],lsf_p11:[{content:"Duck Confit - a delicious French dish!",end:3270,start:0}],lsf_p12:[{content:"Oooh, French Onion Soup!",end:2050,start:0}],lsf_p13:[{content:"Wow, Mussels with tomato sauce!",end:3020,start:0}],lsf_p14:[{content:"Ratatouille - one of my favorite French dishes. YUM!",end:4130,start:0}],lsf_p15:[{content:"Hmm - should we make another dish with Chef René",end:2745,start:0},{content:"or go visit a new city?",end:5490,start:2745}],lsf_ip01a:[{content:"Tomato.",end:1240,start:0}],lsf_ip01b:[{content:"Tomato!",end:1180,start:0}],lsf_ip02a:[{content:"Sourdough Bread.",end:1560,start:0}],lsf_ip02b:[{content:"Sourdough Bread!",end:1430,start:0}],lsf_ip03a:[{content:"Cheese.",end:980,start:0}],lsf_ip03b:[{content:"Cheese!",end:860,start:0}],lsf_ip04a:[{content:"Butter.",end:890,start:0}],lsf_ip04b:[{content:"Butter!",end:830,start:0}],lsf_ip05a:[{content:"Drumstick.",end:1090,start:0}],lsf_ip05b:[{content:"Drumstick!",end:1190,start:0}],lsf_ip06a:[{content:"Duck.",end:730,start:0}],lsf_ip06b:[{content:"Duck!",end:540,start:0}],lsf_ip07a:[{content:"Garlic.",end:960,start:0}],lsf_ip07b:[{content:"Garlic!",end:910,start:0}],lsf_ip08a:[{content:"Parsley.",end:900,start:0}],lsf_ip08b:[{content:"Parsley!",end:910,start:0}],lsf_ip09a:[{content:"Onion.",end:1110,start:0}],lsf_ip09b:[{content:"Onion!",end:910,start:0}],lsf_ip10a:[{content:"Mussels.",end:920,start:0}],lsf_ip10b:[{content:"Mussels!",end:990,start:0}],lsf_ip11a:[{content:"Basil.",end:870,start:0}],lsf_ip11b:[{content:"Basil!",end:980,start:0}],lsf_ip12a:[{content:"Onion.",end:860,start:0}],lsf_ip12b:[{content:"Onion!",end:930,start:0}],lsf_ip13a:[{content:"Beet.",end:1030,start:0}],lsf_ip13b:[{content:"Beet!",end:780,start:0}],lsf_ip14a:[{content:"Eggplant.",end:1070,start:0}],lsf_ip14b:[{content:"Eggplant!",end:1150,start:0}],lsf_ip15a:[{content:"Bell Pepper.",end:1200,start:0}],lsf_ip15b:[{content:"Bell Pepper!",end:1220,start:0}],lsf_fp01:[{content:"People who live in Paris are called Parisians.",end:3370,start:0}],lsf_fp02:[{content:"Parisians often go to many different shops",end:1925,start:0},{content:"to buy ingredients for their meals.",end:3850,start:1925}],lsf_fp04:[{content:"Paris is famous for its great cooking schools.",end:2780,start:0}],lsf_fp05:[{content:"In France, a bread shop is called boulangerie.",end:3670,start:0}],lsf_fp06:[{content:"In France, a cheese shop is called fromagerie.",end:3390,start:0}],lsf_fp07:[{content:"In France, a meat shop is called boucherie.",end:3150,start:0}],lsf_fp08:[{content:"Ratatouille is a popular French stew",end:2490,start:0},{content:"made with vegetables and sometimes meat.",end:4980,start:2490}],lsf_fp09:[{content:"French onion soup is just called ‘onion soup’ in France.",end:3380,start:0}],lsf_fp10:[{content:"France is famous for having hundreds of kinds of cheese.",end:3720,start:0}],lsf_n01:[{content:"Here we are in New Orleans, Louisiana - a very musical city!",end:5370,start:0}],lsf_n02:[{content:"My friend Dexter needs our help finding the instruments he lost.",end:3390,start:0}],lsf_n03:[{content:"Let’s go look for them!",end:1510,start:0}],lsf_n04:[{content:"Come on - let’s find Dexter’s instruments.",end:2870,start:0}],lsf_n05:[{content:"Oooh - I wonder what jazz instruments we’ll find!",end:4080,start:0}],lsf_n06:[{content:"Isn’t New Orleans wonderful?!",end:2490,start:0}],lsf_n07:[{content:"When you find an instrument on our list, select it!",end:3090,start:0}],lsf_n08:[{content:"Great job - we found Dexter’s missing instruments!",end:3500,start:0}],lsf_n09:[{content:"Let’s help him put them back in his van.",end:2220,start:0}],lsf_n10:[{content:"Woohooo - now Dexter can play jazz music again!",end:3980,start:0}],lsf_n11:[{content:"Oooh - I wonder what Dexter will play.",end:2630,start:0},{content:"The possibilities are endless with jazz!",end:5260,start:2630}],lsf_n12:[{content:"Great! (happy sigh) Isn’t helping friends the best?",end:3700,start:0}],lsf_n13:[{content:"Should we look for more instruments in New Orleans",end:2255,start:0},{content:"or go visit a new city?",end:4511,start:2255}],lsf_in01a:[{content:"Drum Kit.",end:1130,start:0}],lsf_in01b:[{content:"Drum Kit!",end:1210,start:0}],lsf_in02a:[{content:"Sousaphone.",end:1160,start:0}],lsf_in02b:[{content:"Sousaphone!",end:1150,start:0}],lsf_in03a:[{content:"Saxophone.",end:1200,start:0}],lsf_in03b:[{content:"Saxophone!",end:1240,start:0}],lsf_in04a:[{content:"Trumpet.",end:990,start:0}],lsf_in04b:[{content:"Trumpet!",end:800,start:0}],lsf_in05a:[{content:"Guitar.",end:970,start:0}],lsf_in05b:[{content:"Guitar!",end:840,start:0}],lsf_in06a:[{content:"Clarinet.",end:1510,start:0}],lsf_in06b:[{content:"Clarinet!",end:860,start:0}],lsf_in07a:[{content:"Trombone.",end:1120,start:0}],lsf_in07b:[{content:"Trombone!",end:1380,start:0}],lsf_in08a:[{content:"Bass.",end:810,start:0}],lsf_in08b:[{content:"Bass!",end:720,start:0}],lsf_in09a:[{content:"Flute.",end:920,start:0}],lsf_in09b:[{content:"Flute!",end:840,start:0}],lsf_in10a:[{content:"Drumsticks.",end:1120,start:0}],lsf_in10b:[{content:"Drumsticks!",end:1100,start:0}],lsf_fn01:[{content:"New Orleans is a famous city where jazz music was born.",end:3920,start:0}],lsf_fn02:[{content:"Jazz is a kind of American music, known for its improvisation,",end:3190,start:0},{content:"where you make up the music as you play.",end:6380,start:3190}],lsf_fn04:[{content:"New Orleans is a city built along the Mississippi River.",end:3370,start:0}],lsf_fn05:[{content:"You can find musicians performing music",end:1885,start:0},{content:"in the streets of New Orleans.",end:3770,start:1885}],lsf_fn06:[{content:"The drum kit allows drummers to play with their hands and feet",end:3e3,start:0},{content:"at the same time.",end:4200,start:3e3}],lsf_fn07:[{content:"The trombone is played by blowing into its mouthpiece,",end:3220,start:0},{content:"while moving a slide in and out to change the notes.",end:6440,start:3220}],lsf_fn08:[{content:"Bass fiddle players usually hold their",end:1735,start:0},{content:"instruments upright when they play.",end:3470,start:1735}],lsf_fn09:[{content:"The saxophone and clarinet have reeds in their mouthpieces,",end:2720,start:0},{content:"which create their unique sounds.",end:5440,start:2720}],lsf_fn10:[{content:"Saxophones come in different sizes,",end:2660,start:0},{content:"from the soprano (for playing the highest notes),",end:5320,start:2660},{content:"to the baritone (for playing the lowest notes).",end:7980,start:5320}],lsf_fn11:[{content:"Trumpets and trombones are played by making a ‘buzzing’ or",end:2483,start:0},{content:"‘raspberry’ sound with your lips",end:4966,start:2483},{content:"while blowing into the mouthpiece.",end:7450,start:4966}],lsf_r01:[{content:"Bon Gio! Welcome to Rio de Janeiro, Brazil!",end:3920,start:0}],lsf_r02:[{content:"My friend Raquel is getting her float ready",end:2645,start:0},{content:"for a special festival named Carnival!",end:5290,start:2645}],lsf_r03:[{content:"Let’s help her find supplies to finish the float!",end:2750,start:0}],lsf_r04:[{content:"Ooooh - I can’t wait to see what parade float Raquel creates.",end:4330,start:0}],lsf_r05:[{content:"(laughs) I wonder what supplies we’ll find in the warehouse!",end:3690,start:0}],lsf_r06:[{content:"Wow - a Samba City Warehouse -",end:2655,start:0},{content:"with so many parade float supplies!",end:5310,start:2655}],lsf_r07:[{content:"When you find a float supply on our list, select it!",end:3250,start:0}],lsf_r08:[{content:"Great job - we found all of Raquel’s supplies!",end:3830,start:0}],lsf_r09:[{content:"Let’s put them below to help finish the float.",end:2940,start:0}],lsf_r11:[{content:"I really love this Carnival float!",end:2260,start:0}],lsf_r12:[{content:"Oooh! Isn’t working and creating with your friends just amazing?",end:4040,start:0}],lsf_r13:[{content:"Should we help make another float in Rio de Janeiro",end:2380,start:0},{content:"or go visit another city?",end:4760,start:2380}],lsf_ir01a:[{content:"Paint Brush.",end:1210,start:0}],lsf_ir01b:[{content:"Paint Brush!",end:1060,start:0}],lsf_ir02a:[{content:"Sewing Machine.",end:1170,start:0}],lsf_ir02b:[{content:"Sewing Machine!",end:1290,start:0}],lsf_ir03a:[{content:"Ruler.",end:900,start:0}],lsf_ir03b:[{content:"Ruler!",end:820,start:0}],lsf_ir04a:[{content:"Paint Palette.",end:900,start:0}],lsf_ir04b:[{content:"Paint Palette!",end:960,start:0}],lsf_ir05a:[{content:"Cardboard.",end:1060,start:0}],lsf_ir05b:[{content:"Cardboard!",end:1160,start:0}],lsf_ir06a:[{content:"Tape Measure.",end:1070,start:0}],lsf_ir06b:[{content:"Tape Measure!",end:1150,start:0}],lsf_ir07a:[{content:"Paint Bucket.",end:950,start:0}],lsf_ir07b:[{content:"Paint Bucket!",end:1040,start:0}],lsf_ir08a:[{content:"Glue.",end:930,start:0}],lsf_ir08b:[{content:"Glue!",end:1220,start:0}],lsf_ir09a:[{content:"Tape.",end:720,start:0}],lsf_ir09b:[{content:"Tape!",end:700,start:0}],lsf_fr01:[{content:"The Carnival celebration in Rio de Janeiro is often called",end:2880,start:0},{content:"“The Greatest Show on Earth!”",end:5760,start:2880}],lsf_fr02:[{content:"During Carnival, samba schools compete",end:2525,start:0},{content:"to see who can make the best parade floats.",end:5050,start:2525}],lsf_fr03:[{content:"Samba is a style of Brazilian music",end:2400,start:0},{content:"and dance featured during Carnival.",end:4800,start:2400}],lsf_fr04:[{content:"Samba City is an area of Rio de Janeiro",end:3086,start:0},{content:"where teams build floats and practice routines",end:6172,start:3086},{content:"in large warehouses to get ready for Carnival.",end:9260,start:6172}],lsf_fr06:[{content:"Tape measures are flexible rulers",end:2415,start:0},{content:"that are useful when working on large parade floats.",end:4830,start:2415}],lsf_fr07:[{content:"Paint brushes are often made from the hair of animals,",end:2965,start:0},{content:"like hogs, horses, goats and badgers.",end:5930,start:2965}],lsf_fr08:[{content:"Sewing machines are often used to stitch together",end:2510,start:0},{content:"pieces of cloth to make costumes.",end:5020,start:2510}],lsf_fr09:[{content:"Glue is used to stick objects together when building a float.",end:3540,start:0}],lsf_fr10:[{content:"Artists sometimes mix colors on a paint palette.",end:2820,start:0}],lsf_fr11:[{content:"A parade float is a large moving platform",end:3500,start:0},{content:"on which artists often build a beautiful scene for people to enjoy.",end:7e3,start:3500}],lsf_fr12:[{content:"In Rio de Janeiro’s Carnival, dancers often dance on the floats",end:2945,start:0},{content:"as they move down the parade route.",end:5890,start:2945}],lsf_a01:[{content:"Great!",end:930,start:0}],lsf_a02:[{content:"Cool!",end:1300,start:0}],lsf_a03:[{content:"Nice find!",end:1710,start:0}],lsf_a04:[{content:"Wow!",end:1370,start:0}],lsf_a05:[{content:"Wohohooo!",end:1810,start:0}],lsf_a06:[{content:"Great find!",end:1520,start:0}],lsf_a07:[{content:"Whoa!",end:1440,start:0}],lsf_a08:[{content:"Way to go!",end:1540,start:0}],lsf_a09:[{content:"Great job!",end:1290,start:0}],lsf_a10:[{content:"Just one more thing on our list to find.",end:2470,start:0}],lsf_a11:[{content:"Just one more wild animal on our list to find.",end:3430,start:0}],lsf_a12:[{content:"Hmmm, let’s keep looking.",end:2300,start:0}],lsf_a13:[{content:"Let’s look somewhere else.",end:1670,start:0}],lsf_a14:[{content:"I wonder where we should look next.",end:2060,start:0}],lsf_a15:[{content:"How about we look in a new spot?",end:2240,start:0}],lsf_a16:[{content:"Need a hint? Use this button.",end:2170,start:0}]}},function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return L}));i(75),i(403),i(404),i(76),i(405),i(30),i(406),i(10);var n=i(4);class r{constructor(t){this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new n.Rectangle(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.on("pointerout",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.divWheel.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.divWheel.removeEventListener("wheel",this.wheelFunction)}down(t){if(this.viewport.pause||!this.viewport.worldVisible)return;if("mouse"===t.data.pointerType?this.isMouseDown=!0:this.get(t.data.pointerId)||this.touches.push({id:t.data.pointerId,last:null}),1===this.count()){this.last=t.data.global.clone();const e=this.viewport.plugins.get("decelerate"),i=this.viewport.plugins.get("bounce");e&&e.isActive()||i&&i.isActive()?this.clickedAvailable=!1:this.clickedAvailable=!0}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const e=this.viewport.plugins.move(t);if(this.clickedAvailable){const e=t.data.global.x-this.last.x,i=t.data.global.y-this.last.y;(this.checkThreshold(e)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}e&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.worldVisible)return;"mouse"===t.data.pointerType&&(this.isMouseDown=!1),"mouse"!==t.data.pointerType&&this.remove(t.data.pointerId);const e=this.viewport.plugins.up(t);this.clickedAvailable&&0===this.count()&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this}),this.clickedAvailable=!1),e&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){let e=new n.Point;return this.viewport.options.interaction?this.viewport.options.interaction.mapPositionToPoint(e,t.clientX,t.clientY):(e.x=t.clientX,e.y=t.clientY),e}handleWheel(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const e=this.viewport.toLocal(this.getPointerPosition(t));if(this.viewport.left<=e.x&&e.x<=this.viewport.right&&this.viewport.top<=e.y&&e.y<=this.viewport.bottom){this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(let e of this.touches)if(e.id===t)return e;return null}remove(t){for(let e=0;e<this.touches.length;e++)if(this.touches[e].id===t)return void this.touches.splice(e,1)}count(){return(this.isMouseDown?1:0)+this.touches.length}}const o=["drag","pinch","wheel","follow","mouse-edges","decelerate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class s{constructor(t){this.viewport=t,this.list=[],this.plugins={}}add(t,e,i=o.length){this.plugins[t]=e;const n=o.indexOf(t);-1!==n&&o.splice(n,1),o.splice(i,0,t),this.sort()}get(t){return this.plugins[t]}update(t){for(let e of this.list)e.update(t)}resize(){for(let t of this.list)t.resize()}reset(){for(let t of this.list)t.reset()}remove(t){this.plugins[t]&&(this.plugins[t]=null,this.viewport.emit(t+"-remove"),this.sort())}pause(t){this.plugins[t]&&this.plugins[t].pause()}resume(t){this.plugins[t]&&this.plugins[t].resume()}sort(){this.list=[];for(let t of o)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let e=!1;for(let i of this.list)i.down(t)&&(e=!0);return e}move(t){let e=!1;for(let i of this.viewport.plugins.list)i.move(t)&&(e=!0);return e}up(t){let e=!1;for(let i of this.list)i.up(t)&&(e=!0);return e}wheel(t){let e=!1;for(let i of this.list)i.wheel(t)&&(e=!0);return e}}class a{constructor(t){this.parent=t,this.paused=!1}destroy(){}down(){return!1}move(){return!1}up(){return!1}wheel(){return!1}update(){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}const l={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1};class h extends a{constructor(t,e={}){super(t),this.options=Object.assign({},l,e),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||"all"===this.options.direction||"x"===this.options.direction,this.yDirection=!this.options.direction||"all"===this.options.direction||"y"===this.options.direction,this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){parent.addEventListener("keydown",e=>{t.includes(e.code)&&(this.keyIsPressed=!0)}),parent.addEventListener("keyup",e=>{t.includes(e.code)&&(this.keyIsPressed=!1)})}mouseButtons(t){this.mouse=t&&"all"!==t?[-1!==t.indexOf("left"),-1!==t.indexOf("middle"),-1!==t.indexOf("right")]:[!0,!0,!0]}parseUnderflow(){const t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0)}checkButtons(t){const e="mouse"===t.data.pointerType,i=this.parent.input.count();return!(!(1===i||i>1&&!this.parent.plugins.get("pinch"))||e&&!this.mouse[t.data.button])}checkKeyPress(t){return!!(!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&"touch"===t.data.pointerType)}down(t){if(!this.paused&&this.options.pressDrag)return this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.data.global.x,y:t.data.global.y},this.current=t.data.pointerId,!0):void(this.last=null)}get active(){return this.moved}move(t){if(!this.paused&&this.options.pressDrag&&this.last&&this.current===t.data.pointerId){const e=t.data.global.x,i=t.data.global.y,r=this.parent.input.count();if(1===r||r>1&&!this.parent.plugins.get("pinch")){const r=e-this.last.x,o=i-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(r)||this.yDirection&&this.parent.input.checkThreshold(o)){const r={x:e,y:i};return this.xDirection&&(this.parent.x+=(r.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(r.y-this.last.y)*this.options.factor),this.last=r,this.moved||this.parent.emit("drag-start",{event:t,screen:new n.Point(this.last.x,this.last.y),world:this.parent.toWorld(new n.Point(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}}up(t){if(this.paused)return;const e=this.parent.input.touches;if(1===e.length){const t=e[0];return t.last&&(this.last={x:t.last.x,y:t.last.y},this.current=t.id),this.moved=!1,!0}if(this.last&&this.moved){const e=new n.Point(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:t,screen:e,world:this.parent.toWorld(e),viewport:this.parent}),this.last=null,this.moved=!1,!0}}wheel(t){if(!this.paused&&this.options.wheel){if(!this.parent.plugins.get("wheel"))return this.xDirection&&(this.parent.x+=t.deltaX*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=t.deltaY*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),!0}}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate")||{};if("y"!==this.options.clampWheel)if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if("x"!==this.options.clampWheel)if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const u={noDrag:!1,percent:1,center:null};class c extends a{constructor(t,e={}){super(t),this.options=Object.assign({},u,e)}down(){if(this.parent.input.count()>=2)return this.active=!0,!0}move(t){if(this.paused||!this.active)return;const e=t.data.global.x,i=t.data.global.y,n=this.parent.input.touches;if(n.length>=2){const r=n[0],o=n[1],s=r.last&&o.last?Math.sqrt(Math.pow(o.last.x-r.last.x,2)+Math.pow(o.last.y-r.last.y,2)):null;if(r.id===t.data.pointerId?r.last={x:e,y:i,data:t.data}:o.id===t.data.pointerId&&(o.last={x:e,y:i,data:t.data}),s){let t;const e={x:r.last.x+(o.last.x-r.last.x)/2,y:r.last.y+(o.last.y-r.last.y)/2};this.options.center||(t=this.parent.toLocal(e));const i=(Math.sqrt(Math.pow(o.last.x-r.last.x,2)+Math.pow(o.last.y-r.last.y,2))-s)/this.parent.screenWidth*this.parent.scale.x*this.options.percent;this.parent.scale.x+=i,this.parent.scale.y+=i,this.parent.emit("zoomed",{viewport:this.parent,type:"pinch"});const n=this.parent.plugins.get("clamp-zoom");if(n&&n.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const i=this.parent.toGlobal(t);this.parent.x+=e.x-i.x,this.parent.y+=e.y-i.y,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=e.x-this.lastCenter.x,this.parent.y+=e.y-this.lastCenter.y,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=e,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}}up(){if(this.pinching&&this.parent.input.touches.length<=1)return this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0}}const d={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class p extends a{constructor(t,e={}){super(t),this.options=Object.assign({},d,e),this.options.direction&&(this.options.left="x"===this.options.direction||"all"===this.options.direction||null,this.options.right="x"===this.options.direction||"all"===this.options.direction||null,this.options.top="y"===this.options.direction||"all"===this.options.direction||null,this.options.bottom="y"===this.options.direction||"all"===this.options.direction||null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();"none"===t?this.noUnderflow=!0:"center"===t?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused)return;if(this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t={x:this.parent.x,y:this.parent.y},e=this.parent.plugins.decelerate||{};if(null!==this.options.left||null!==this.options.right){let i=!1;if(this.parent.screenWorldWidth<this.parent.screenWidth){if(!this.noUnderflow)switch(this.underflowX){case-1:0!==this.parent.x&&(this.parent.x=0,i=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,i=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,i=!0)}}else null!==this.options.left&&this.parent.left<(!0===this.options.left?0:this.options.left)&&(this.parent.x=-(!0===this.options.left?0:this.options.left)*this.parent.scale.x,e.x=0,i=!0),null!==this.options.right&&this.parent.right>(!0===this.options.right?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(!0===this.options.right?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,e.x=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(null!==this.options.top||null!==this.options.bottom){let i=!1;if(this.parent.screenWorldHeight<this.parent.screenHeight){if(!this.noUnderflow)switch(this.underflowY){case-1:0!==this.parent.y&&(this.parent.y=0,i=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,i=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,i=!0)}}else null!==this.options.top&&this.parent.top<(!0===this.options.top?0:this.options.top)&&(this.parent.y=-(!0===this.options.top?0:this.options.top)*this.parent.scale.y,e.y=0,i=!0),null!==this.options.bottom&&this.parent.bottom>(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,e.y=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const f={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class g extends a{constructor(t,e={}){super(t),this.options=Object.assign({},f,e),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused)if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight;if(null!==this.options.minWidth&&t<this.options.minWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxWidth&&t>this.options.maxWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.minHeight&&e<this.options.minHeight){const i=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxHeight&&e>this.options.maxHeight){const t=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/t,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else{let t=this.parent.scale.x;null!==this.options.minScale&&t<this.options.minScale&&(t=this.options.minScale),null!==this.options.maxScale&&t>this.options.maxScale&&(t=this.options.maxScale),t!==this.parent.scale.x&&(this.parent.scale.set(t),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}reset(){this.clamp()}}const m={friction:.95,bounce:.8,minSpeed:.01};class _ extends a{constructor(t,e={}){super(t),this.options=Object.assign({},m,e),this.saved=[],this.reset(),this.parent.on("moved",t=>this.moved(t))}destroy(){this.parent}down(){this.saved=[],this.x=this.y=!1}isActive(){return this.x||this.y}move(){if(this.paused)return;const t=this.parent.input.count();(1===t||t>1&&!this.parent.plugins.get("pinch"))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30))}moved(t){if(this.saved.length){const e=this.saved[this.saved.length-1];"clamp-x"===t.type?e.x===t.original.x&&(e.x=this.parent.x):"clamp-y"===t.type&&e.y===t.original.y&&(e.y=this.parent.y)}}up(){if(0===this.parent.input.count()&&this.saved.length){const t=performance.now();for(let e of this.saved)if(e.time>=t-100){const i=t-e.time;this.x=(this.parent.x-e.x)/i,this.y=(this.parent.y-e.y)/i,this.percentChangeX=this.percentChangeY=this.options.friction;break}}}activate(t){void 0!==(t=t||{}).x&&(this.x=t.x,this.percentChangeX=this.options.friction),void 0!==t.y&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;let e;this.x&&(this.parent.x+=this.x*t,this.x*=this.percentChangeX,Math.abs(this.x)<this.options.minSpeed&&(this.x=0),e=!0),this.y&&(this.parent.y+=this.y*t,this.y*=this.percentChangeY,Math.abs(this.y)<this.options.minSpeed&&(this.y=0),e=!0),e&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}var v="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var y=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){(function(){var e;(function(e){t.exports=e})(e={linear:function(t,e,i,n){return i*t/n+e},easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeInOutExpo:function(t,e,i,n){return(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,n){var r,o,s;return s=1.70158,0===t||(t/=n),(o=0)||(o=.3*n),(r=i)<Math.abs(i)?(r=i,s=o/4):s=o/(2*Math.PI)*Math.asin(i/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/o)+e},easeOutElastic:function(t,e,i,n){var r,o,s;return s=1.70158,0===t||(t/=n),(o=0)||(o=.3*n),(r=i)<Math.abs(i)?(r=i,s=o/4):s=o/(2*Math.PI)*Math.asin(i/r),r*Math.pow(2,-10*t)*Math.sin((t*n-s)*(2*Math.PI)/o)+i+e},easeInOutElastic:function(t,e,i,n){var r,o,s;return s=1.70158,0===t||(t/=n/2),(o=0)||(o=n*(.3*1.5)),(r=i)<Math.abs(i)?(r=i,s=o/4):s=o/(2*Math.PI)*Math.asin(i/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/o)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*n-s)*(2*Math.PI)/o)*.5+i+e},easeInBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,i,n,r){return void 0===r&&(r=1.70158),(t/=n/2)<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:function(t,i,n,r){return n-e.easeOutBounce(r-t,0,n,r)+i},easeOutBounce:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,i,n,r){return t<r/2?.5*e.easeInBounce(2*t,0,n,r)+i:.5*e.easeOutBounce(2*t-r,0,n,r)+.5*n+i}})}).call(v)}));function b(t,e){return t?"function"==typeof t?t:"string"==typeof t?y[t]:void 0:y[e]}const x={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class w extends a{constructor(t,e={}){super(t),this.options=Object.assign({},x,e),this.ease=b(this.options.ease,"easeInOutSine"),this.options.sides&&("all"===this.options.sides?this.top=this.bottom=this.left=this.right=!0:"horizontal"===this.options.sides?this.right=this.left=!0:"vertical"===this.options.sides?this.top=this.bottom=!0:(this.top=-1!==this.options.sides.indexOf("top"),this.bottom=-1!==this.options.sides.indexOf("bottom"),this.left=-1!==this.options.sides.indexOf("left"),this.right=-1!==this.options.sides.indexOf("right"))),this.parseUnderflow(),this.last={},this.reset()}parseUnderflow(){const t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0)}isActive(){return null!==this.toX||null!==this.toY}down(){this.toX=this.toY=null}up(){this.bounce()}update(t){if(!this.paused){if(this.bounce(),this.toX){const e=this.toX;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),e.time>=this.options.time?(this.parent.x=e.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(e.time,e.start,e.delta,this.options.time)}if(this.toY){const e=this.toY;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),e.time>=this.options.time?(this.parent.y=e.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(e.time,e.start,e.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const e=void 0===t.x?0:t.x,i=void 0===t.y?0:t.y,r=void 0===t.width?this.parent.worldWidth:t.width,o=void 0===t.height?this.parent.worldHeight:t.height;return{left:this.parent.left<e,right:this.parent.right>r,top:this.parent.top<i,bottom:this.parent.bottom>o,topLeft:new n.Point(e*this.parent.scale.x,i*this.parent.scale.y),bottomRight:new n.Point(r*this.parent.scale.x-this.parent.screenWidth,o*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new n.Point(0,0),bottomRight:new n.Point(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){if(this.paused)return;let t,e=this.parent.plugins.get("decelerate");e&&(e.x||e.y)&&(e.x&&e.percentChangeX===e.options.friction||e.y&&e.percentChangeY===e.options.friction)&&(t=this.oob(),(t.left&&this.left||t.right&&this.right)&&(e.percentChangeX=this.options.friction),(t.top&&this.top||t.bottom&&this.bottom)&&(e.percentChangeY=this.options.friction));const i=this.parent.plugins.get("drag")||{},n=this.parent.plugins.get("pinch")||{};if(e=e||{},!(i.active||n.active||this.toX&&this.toY||e.x&&e.y)){t=t||this.oob();const i=t.topLeft,n=t.bottomRight;if(!this.toX&&!e.x){let e=null;t.left&&this.left?e=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-i.x:t.right&&this.right&&(e=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-n.x),null!==e&&this.parent.x!==e&&(this.toX={time:0,start:this.parent.x,delta:e-this.parent.x,end:e},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!e.y){let e=null;t.top&&this.top?e=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-i.y:t.bottom&&this.bottom&&(e=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-n.y),null!==e&&this.parent.y!==e&&(this.toY={time:0,start:this.parent.y,delta:e-this.parent.y,end:e},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const T={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class S extends a{constructor(t,e,i,n={}){super(t),this.options=Object.assign({},T,n),this.ease=b(n.ease,"easeInOutSine"),this.x=e,this.y=i,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){this.options.removeOnInterrupt&&this.parent.plugins.remove("snap")}down(){this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null)}up(){if(0===this.parent.input.count()){const t=this.parent.plugins.get("decelerate");t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}}update(t){if(!(this.paused||this.options.interrupt&&0!==this.parent.input.count()))if(this.snapping){const e=this.snapping;let i,n,r;if(e.time+=t,e.time>this.options.time)i=!0,n=this.startX+this.deltaX,r=this.startY+this.deltaY;else{const t=this.ease(e.time,0,1,this.options.time);n=this.startX+this.deltaX*t,r=this.startY+this.deltaY*t}this.options.topLeft?this.parent.moveCorner(n,r):this.parent.moveCenter(n,r),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),i&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const t=this.options.topLeft?this.parent.corner:this.parent.center;t.x===this.x&&t.y===this.y||this.snapStart()}}}const E={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupts:!1,forceStart:!1,noMove:!1};class P extends a{constructor(t,e={}){super(t),this.options=Object.assign({},E,e),this.ease=b(this.options.ease),this.options.width>0&&(this.xScale=t.screenWidth/this.options.width),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height),this.xIndependent=!!this.xScale,this.yIndependent=!!this.yScale,this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,0===this.options.time?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):e.forceStart&&this.createSnapping()}createSnapping(){const t=this.parent.scale;this.snapping={time:0,startX:t.x,startY:t.y,deltaX:this.xScale-t.x,deltaY:this.yScale-t.y},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom")}down(){this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null)}update(t){if(this.paused)return;if(this.options.interrupt&&0!==this.parent.input.count())return;let e;if(this.options.center||this.options.noMove||(e=this.parent.center),this.snapping){if(this.snapping){const i=this.snapping;if(i.time+=t,i.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const t=this.snapping;this.parent.scale.x=this.ease(t.time,t.startX,t.deltaX,this.options.time),this.parent.scale.y=this.ease(t.time,t.startY,t.deltaY,this.options.time)}const n=this.parent.plugins.get("clamp-zoom");n&&n.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(e))}}else this.parent.scale.x===this.xScale&&this.parent.scale.y===this.yScale||this.createSnapping()}resume(){this.snapping=null,super.resume()}}const A={speed:0,acceleration:null,radius:null};class I extends a{constructor(t,e,i={}){super(t),this.target=e,this.options=Object.assign({},A,i),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const e=this.parent.center;let i=this.target.x,n=this.target.y;if(this.options.radius){if(!(Math.sqrt(Math.pow(this.target.y-e.y,2)+Math.pow(this.target.x-e.x,2))>this.options.radius))return;{const t=Math.atan2(this.target.y-e.y,this.target.x-e.x);i=this.target.x-Math.cos(t)*this.options.radius,n=this.target.y-Math.sin(t)*this.options.radius}}const r=i-e.x,o=n-e.y;if(r||o)if(this.options.speed)if(this.options.acceleration){const s=Math.atan2(n-e.y,i-e.x),a=Math.sqrt(Math.pow(r,2)+Math.pow(o,2));if(a){const l=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);this.velocity=a>l?{x:Math.min(this.velocity.x+this.options.acceleration*t,this.options.speed),y:Math.min(this.velocity.y+this.options.acceleration*t,this.options.speed)}:{x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const h=Math.cos(s)*this.velocity.x,u=Math.sin(s)*this.velocity.y,c=Math.abs(h)>Math.abs(r)?i:e.x+h,d=Math.abs(u)>Math.abs(o)?n:e.y+u;this.parent.moveCenter(c,d),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const t=Math.atan2(n-e.y,i-e.x),s=Math.cos(t)*this.options.speed,a=Math.sin(t)*this.options.speed,l=Math.abs(s)>Math.abs(r)?i:e.x+s,h=Math.abs(a)>Math.abs(o)?n:e.y+a;this.parent.moveCenter(l,h),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(i,n),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const O={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null};class C extends a{constructor(t,e={}){super(t),this.options=Object.assign({},O,e)}down(){this.options.interrupt&&(this.smoothing=null)}update(){if(this.smoothing){const t=this.smoothingCenter,e=this.smoothing;let i;this.options.center||(i=this.parent.toLocal(t)),this.parent.scale.x+=e.x,this.parent.scale.y+=e.y,this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const n=this.parent.plugins.get("clamp-zoom");if(n&&n.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const e=this.parent.toGlobal(i);this.parent.x+=t.x-e.x,this.parent.y+=t.y-e.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}wheel(t){if(this.paused)return;let e=this.parent.input.getPointerPosition(t);const i=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?120:1)/500,n=Math.pow(2,(1+this.options.percent)*i);if(this.options.smooth){const t={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+t.x)*n-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+t.y)*n-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=e}else{let t;this.options.center||(t=this.parent.toLocal(e)),this.parent.scale.x*=n,this.parent.scale.y*=n,this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom");if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const i=this.parent.toGlobal(t);this.parent.x+=e.x-i.x,this.parent.y+=e.y-i.y}}return this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:t.deltaX,dy:t.deltaY,dz:t.deltaZ},event:t,viewport:this.parent}),!this.parent.options.passiveWheel||void 0}}const M={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class R extends a{constructor(t,e={}){super(t),this.options=Object.assign({},M,e),this.reverse=this.options.reverse?1:-1,this.radiusSquared=Math.pow(this.options.radius,2),this.resize()}resize(){const t=this.options.distance;null!==t?(this.left=t,this.top=t,this.right=this.parent.worldScreenWidth-t,this.bottom=this.parent.worldScreenHeight-t):this.radius||(this.left=this.options.left,this.top=this.options.top,this.right=null===this.options.right?null:this.parent.worldScreenWidth-this.options.right,this.bottom=null===this.options.bottom?null:this.parent.worldScreenHeight-this.options.bottom)}down(){this.options.allowButtons||(this.horizontal=this.vertical=null)}move(t){if("mouse"!==t.data.pointerType&&1!==t.data.identifier||!this.options.allowButtons&&0!==t.data.buttons)return;const e=t.data.global.x,i=t.data.global.y;if(this.radiusSquared){const t=this.parent.toScreen(this.parent.center);if(Math.pow(t.x-e,2)+Math.pow(t.y-i,2)>=this.radiusSquared){const n=Math.atan2(t.y-i,t.x-e);this.options.linear?(this.horizontal=Math.round(Math.cos(n))*this.options.speed*this.reverse*.06,this.vertical=Math.round(Math.sin(n))*this.options.speed*this.reverse*.06):(this.horizontal=Math.cos(n)*this.options.speed*this.reverse*.06,this.vertical=Math.sin(n)*this.options.speed*this.reverse*.06)}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else null!==this.left&&e<this.left?this.horizontal=1*this.reverse*this.options.speed*.06:null!==this.right&&e>this.right?this.horizontal=-1*this.reverse*this.options.speed*.06:(this.decelerateHorizontal(),this.horizontal=0),null!==this.top&&i<this.top?this.vertical=1*this.reverse*this.options.speed*.06:null!==this.bottom&&i>this.bottom?this.vertical=-1*this.reverse*this.options.speed*.06:(this.decelerateVertical(),this.vertical=0)}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate");this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate");this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const k={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,interaction:null,disableOnContextMenu:!1};class L extends n.Container{constructor(t={}){if(super(),this.options=Object.assign({},k,t),t.ticker)this.options.ticker=t.ticker;else{let e;const i=n;e=parseInt(/^(\d+)\./.exec(n.VERSION)[1])<5?i.ticker.shared:i.Ticker.shared,this.options.ticker=t.ticker||e}this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.divWheel=this.options.divWheel||document.body,this.options.disableOnContextMenu&&(this.options.divWheel.oncontextmenu=t=>t.preventDefault()),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new r(this),this.plugins=new s(this)}destroy(t){this.options.noTicker||this.options.ticker.remove(this.tickerFunction),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new n.Rectangle(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=window.innerWidth,e=window.innerHeight,i,n){this.screenWidth=t,this.screenHeight=e,void 0!==i&&(this._worldWidth=i),void 0!==n&&(this._worldHeight=n),this.plugins.resize()}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new n.Rectangle(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,e){return 2===arguments.length?this.toLocal(new n.Point(t,e)):this.toLocal(t)}toScreen(t,e){return 2===arguments.length?this.toGlobal(new n.Point(t,e)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new n.Point(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(){let t,e;return isNaN(arguments[0])?(t=arguments[0].x,e=arguments[0].y):(t=arguments[0],e=arguments[1]),this.position.set((this.worldScreenWidth/2-t)*this.scale.x,(this.worldScreenHeight/2-e)*this.scale.y),this.plugins.reset(),this.dirty=!0,this}get corner(){return new n.Point(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(t,e){return 1===arguments.length?this.position.set(-t.x*this.scale.x,-t.y*this.scale.y):this.position.set(-t*this.scale.x,-e*this.scale.y),this.plugins.reset(),this}fitWidth(t,e,i=!0,n){let r;e&&(r=this.center),this.scale.x=this.screenWidth/t,i&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom");return!n&&o&&o.clamp(),e&&this.moveCenter(r),this}fitHeight(t,e,i=!0,n){let r;e&&(r=this.center),this.scale.y=this.screenHeight/t,i&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom");return!n&&o&&o.clamp(),e&&this.moveCenter(r),this}fitWorld(t){let e;t&&(e=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const i=this.plugins.get("clamp-zoom");return i&&i.clamp(),t&&this.moveCenter(e),this}fit(t,e=this.worldWidth,i=this.worldHeight){let n;t&&(n=this.center),this.scale.x=this.screenWidth/e,this.scale.y=this.screenHeight/i,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom");return r&&r.clamp(),t&&this.moveCenter(n),this}setZoom(t,e){let i;e&&(i=this.center),this.scale.set(t);const n=this.plugins.get("clamp-zoom");return n&&n.clamp(),e&&this.moveCenter(i),this}zoomPercent(t,e){return this.setZoom(this.scale.x+this.scale.x*t,e)}zoom(t,e){return this.fitWidth(t+this.worldScreenWidth,e),this}set scaled(t){this.setZoom(t,!0)}get scaled(){return this.scale.x}snapZoom(t){return this.plugins.add("snap-zoom",new P(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this._worldHeight,cornerPoint:new n.Point(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new n.Rectangle(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new h(this,t)),this}clamp(t){return this.plugins.add("clamp",new p(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new _(this,t)),this}bounce(t){return this.plugins.add("bounce",new w(this,t)),this}pinch(t){return this.plugins.add("pinch",new c(this,t)),this}snap(t,e,i){return this.plugins.add("snap",new S(this,t,e,i)),this}follow(t,e){return this.plugins.add("follow",new I(this,t,e)),this}wheel(t){return this.plugins.add("wheel",new C(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new g(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new R(this,t)),this}get pause(){return this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,e,i,n,r){r&&(i>this.worldScreenWidth||n>this.worldScreenHeight)&&(this.fit(!0,i,n),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;t<this.left?(this.left=t,o=!0):t+i>this.right&&(this.right=t+i,o=!0),e<this.top?(this.top=e,o=!0):e+n>this.bottom&&(this.bottom=e+n,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}}).call(this,i(36))},function(t,e,i){"use strict";i(230),i(232),i(233),i(234),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,i){"use strict";var n,r=i(231),o=(n=r)&&n.__esModule?n:{default:n};Object.assign||(Object.assign=o.default)},function(t,e,i){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,l=s(t),h=1;h<arguments.length;h++){for(var u in i=Object(arguments[h]))r.call(i,u)&&(l[u]=i[u]);if(n){a=n(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(l[a[c]]=i[a[c]])}}return l}},function(t,e,i){"use strict";(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r){var o=n[r];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return n<0&&(n=0),i=e,setTimeout((function(){i=Date.now(),t(performance.now())}),n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,i(36))},function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1})},function(t,e,i){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(82),o=(n=r)&&n.__esModule?n:{default:n},s=i(5);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a(this,t),this.x=e,this.y=i,this.radius=n,this.type=s.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return(n*=n)+(r*=r)<=i},t.prototype.getBounds=function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(82),o=(n=r)&&n.__esModule?n:{default:n},s=i(5);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a(this,t),this.x=e,this.y=i,this.width=n,this.height=r,this.type=s.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return(i*=i)+(n*=n)<=1},t.prototype.getBounds=function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(80),o=(n=r)&&n.__esModule?n:{default:n},s=i(5);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];if(a(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof o.default){for(var r=[],l=0,h=i.length;l<h;l++)r.push(i[l].x,i[l].y);i=r}this.closed=!0,this.points=i,this.type=s.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,o=n-1;r<n;o=r++){var s=this.points[2*r],a=this.points[2*r+1],l=this.points[2*o],h=this.points[2*o+1];a>e!=h>e&&t<(e-a)/(h-a)*(l-s)+s&&(i=!i)}return i},t}();e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5);function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;r(this,t),this.x=e,this.y=i,this.width=o,this.height=s,this.radius=a,this.type=n.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(i*i+(n=e-(this.y+this.height-this.radius))*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t}();e.default=o},function(t,e){t.exports=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i}},function(t,e){var i=new ArrayBuffer(0),n=function(t,e,n,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=i,n&&this.upload(n),this._updateID=0};n.prototype.upload=function(t,e,i){i||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},n.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},n.createVertexBuffer=function(t,e,i){return new n(t,t.ARRAY_BUFFER,e,i)},n.createIndexBuffer=function(t,e,i){return new n(t,t.ELEMENT_ARRAY_BUFFER,e,i)},n.create=function(t,e,i,r){return new n(t,e,i,r)},n.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=n},function(t,e,i){var n=i(124),r=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};r.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(t,e,i,n){this.bind();var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(t,e,i,o){var s=n.fromData(t,null,e,i);s.enableNearestScaling(),s.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(s),a.unbind(),a},r.createFloat32=function(t,e,i,o){var s=new n.fromData(t,o,e,i);s.enableNearestScaling(),s.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(s),a.unbind(),a},t.exports=r},function(t,e,i){var n=i(125),r=i(126),o=i(128),s=i(130),a=i(131),l=function(t,e,i,l,h){this.gl=t,l&&(e=s(e,l),i=s(i,l)),this.program=n(t,e,i,h),this.attributes=r(t,this.program),this.uniformData=o(t,this.program),this.uniforms=a(t,this.uniformData)};l.prototype.bind=function(){return this.gl.useProgram(this.program),this},l.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=l},function(t,e,i){var n=i(123);function r(t,e){if(this.nativeVaoExtension=null,r.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}r.prototype.constructor=r,t.exports=r,r.FORCE_NATIVE=!1,r.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},r.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},r.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var r=this.attributes[i];e!==r.buffer&&(r.buffer.bind(),e=r.buffer),t.vertexAttribPointer(r.attribute.location,r.attribute.size,r.type||t.FLOAT,r.normalized||!1,r.stride||0,r.start||0)}return n(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},r.prototype.addAttribute=function(t,e,i,n,r,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:o||0}),this.dirty=!0,this},r.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},r.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},r.prototype.draw=function(t,e,i){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(i||0)):n.drawArrays(t,i,e||this.getSize()),this},r.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},r.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e,i){t.exports={compileProgram:i(125),defaultValue:i(129),extractAttributes:i(126),extractUniforms:i(128),generateUniformAccessObject:i(131),setPrecision:i(130),mapSize:i(127),mapType:i(83)}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){if(o.default.tablet||o.default.phone)return 4;return t};var n,r=i(85),o=(n=r)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},function(t,e,i){"use strict";e.__esModule=!0,e.default={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},function(t,e,i){"use strict";function n(t,e){if(t&&e)for(var i=Object.keys(e),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}}e.__esModule=!0,e.mixin=n,e.delayMixin=function(t,e){r.push(t,e)},e.performMixins=function(){for(var t=0;t<r.length;t+=2)n(r[t],r[t+1]);r.length=0};var r=[]},function(t,e,i){"use strict";t.exports=function(t,e,i){var n,r=t.length;if(!(e>=r||0===i)){var o=r-(i=e+i>r?r-e:i);for(n=e;n<o;++n)t[n]=t[n+i];t.length=o}}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[n.BLEND_MODES.NORMAL_NPM]=n.BLEND_MODES.NORMAL,t[n.BLEND_MODES.ADD_NPM]=n.BLEND_MODES.ADD,t[n.BLEND_MODES.SCREEN_NPM]=n.BLEND_MODES.SCREEN,e[n.BLEND_MODES.NORMAL]=n.BLEND_MODES.NORMAL_NPM,e[n.BLEND_MODES.ADD]=n.BLEND_MODES.ADD_NPM,e[n.BLEND_MODES.SCREEN]=n.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r};var n=i(5)},function(t,e,i){(function(t,n){var r;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof n&&n;s.global!==s&&s.window!==s&&s.self;var a,l=2147483647,h=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function g(t){throw new RangeError(d[t])}function m(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function _(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+m((t=t.replace(c,".")).split("."),e).join(".")}function v(t){for(var e,i,n=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function y(t){return m(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=f(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,i){var n=0;for(t=i?p(t/700):t>>1,t+=p(t/e);t>455;n+=36)t=p(t/35);return p(n+36*t/(t+38))}function w(t){var e,i,n,r,o,s,a,h,u,c,d,f=[],m=t.length,_=0,v=128,b=72;for((i=t.lastIndexOf("-"))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&g("not-basic"),f.push(t.charCodeAt(n));for(r=i>0?i+1:0;r<m;){for(o=_,s=1,a=36;r>=m&&g("invalid-input"),((h=(d=t.charCodeAt(r++))-48<10?d-22:d-65<26?d-65:d-97<26?d-97:36)>=36||h>p((l-_)/s))&&g("overflow"),_+=h*s,!(h<(u=a<=b?1:a>=b+26?26:a-b));a+=36)s>p(l/(c=36-u))&&g("overflow"),s*=c;b=x(_-o,e=f.length+1,0==o),p(_/e)>l-v&&g("overflow"),v+=p(_/e),_%=e,f.splice(_++,0,v)}return y(f)}function T(t){var e,i,n,r,o,s,a,h,u,c,d,m,_,y,w,T=[];for(m=(t=v(t)).length,e=128,i=0,o=72,s=0;s<m;++s)(d=t[s])<128&&T.push(f(d));for(n=r=T.length,r&&T.push("-");n<m;){for(a=l,s=0;s<m;++s)(d=t[s])>=e&&d<a&&(a=d);for(a-e>p((l-i)/(_=n+1))&&g("overflow"),i+=(a-e)*_,e=a,s=0;s<m;++s)if((d=t[s])<e&&++i>l&&g("overflow"),d==e){for(h=i,u=36;!(h<(c=u<=o?1:u>=o+26?26:u-o));u+=36)w=h-c,y=36-c,T.push(f(b(c+w%y,0))),h=p(w/y);T.push(f(b(h,0))),o=x(i,_,n==r),i=0,++n}++i,++e}return T.join("")}a={version:"1.4.1",ucs2:{decode:v,encode:y},decode:w,encode:T,toASCII:function(t){return _(t,(function(t){return u.test(t)?"xn--"+T(t):t}))},toUnicode:function(t){return _(t,(function(t){return h.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return a}.call(e,i,e,t))||(t.exports=r)}()}).call(this,i(137)(t),i(36))},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,i){"use strict";e.decode=e.parse=i(254),e.encode=e.stringify=i(255)},function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var h=t.length;l>0&&h>l&&(h=l);for(var u=0;u<h;++u){var c,d,p,f,g=t[u].replace(a,"%20"),m=g.indexOf(i);m>=0?(c=g.substr(0,m),d=g.substr(m+1)):(c=g,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),n(s,p)?r(s[p])?s[p].push(f):s[p]=[s[p],f]:s[p]=f}return s};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(n(s))+i;return r(t[s])?o(t[s],(function(t){return a+encodeURIComponent(n(t))})).join(e):a+encodeURIComponent(n(t[s]))})).join(e):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=a(i(12)),o=i(5),s=a(i(257));function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._head=new s.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/r.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(t,e,i))},t.prototype.addOnce=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*r.default.TARGET_FPMS*this.speed;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},n(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,r.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e.default=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n(this,t),this.fn=e,this.context=i,this.priority=r,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var n=a(i(46)),r=i(5),o=i(15),s=a(i(60));function a(t){return t&&t.__esModule?t:{default:t}}var l=new o.Matrix,h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,n=e._frame.width,a=e._frame.height,h=t.transform.worldTransform,u=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var d=e.baseTexture.scaleMode===r.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==d&&(i.context[i.smoothProperty]=d),e.trim?(u=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,c=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(u=(.5-t.anchor.x)*e.orig.width,c=(.5-t.anchor.y)*e.orig.height),e.rotate&&(h.copy(l),h=l,o.GroupD8.matrixAppendRotationInv(h,e.rotate,u,c),u=0,c=0),u-=n/2,c-=a/2,i.roundPixels?(i.context.setTransform(h.a,h.b,h.c,h.d,h.tx*i.resolution|0,h.ty*i.resolution|0),u|=0,c|=0):i.context.setTransform(h.a,h.b,h.c,h.d,h.tx*i.resolution,h.ty*i.resolution);var p=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=s.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,n*p,a*p,u*i.resolution,c*i.resolution,n*i.resolution,a*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*p,e._frame.y*p,n*p,a*p,u*i.resolution,c*i.resolution,n*i.resolution,a*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=h,n.default.registerPlugin("sprite",h)},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5);var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,n=t.transform.worldTransform,r=e.resolution;e.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var r=0;r<i;r++){var o=t.graphicsData[r],s=o.shape;if(o.type===n.SHAPES.POLY){var a=s.points,l=o.holes,h=void 0,u=void 0;e.moveTo(a[0],a[1]);for(var c=2;c<a.length;c+=2)e.lineTo(a[c],a[c+1]);if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath(),l.length>0){h=0;for(var d=0;d<a.length;d+=2)h+=a[d]*a[d+3]-a[d+1]*a[d+2];for(var p=0;p<l.length;p++){a=l[p].points,u=0;for(var f=0;f<a.length;f+=2)u+=a[f]*a[f+3]-a[f+1]*a[f+2];if(e.moveTo(a[0],a[1]),u*h<0)for(var g=2;g<a.length;g+=2)e.lineTo(a[g],a[g+1]);else for(var m=a.length-2;m>=2;m-=2)e.lineTo(a[m],a[m+1])}}}else if(o.type===n.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===n.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===n.SHAPES.ELIP){var _=2*s.width,v=2*s.height,y=s.x-_/2,b=s.y-v/2,x=_/2*.5522848,w=v/2*.5522848,T=y+_,S=b+v,E=y+_/2,P=b+v/2;e.moveTo(y,P),e.bezierCurveTo(y,P-w,E-x,b,E,b),e.bezierCurveTo(E+x,b,T,P-w,T,P),e.bezierCurveTo(T,P+w,E+x,S,E,S),e.bezierCurveTo(E-x,S,y,P+w,y,P),e.closePath()}else if(o.type===n.SHAPES.RREC){var A=s.x,I=s.y,O=s.width,C=s.height,M=s.radius,R=Math.min(O,C)/2|0;M=M>R?R:M,e.moveTo(A,I+M),e.lineTo(A,I+C-M),e.quadraticCurveTo(A,I+C,A+M,I+C),e.lineTo(A+O-M,I+C),e.quadraticCurveTo(A+O,I+C,A+O,I+C-M),e.lineTo(A+O,I+M),e.quadraticCurveTo(A+O,I,A+O-M,I),e.lineTo(A+M,I),e.quadraticCurveTo(A,I,A,I+M),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,s.default)()?(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="multiply",t[r.BLEND_MODES.SCREEN]="screen",t[r.BLEND_MODES.OVERLAY]="overlay",t[r.BLEND_MODES.DARKEN]="darken",t[r.BLEND_MODES.LIGHTEN]="lighten",t[r.BLEND_MODES.COLOR_DODGE]="color-dodge",t[r.BLEND_MODES.COLOR_BURN]="color-burn",t[r.BLEND_MODES.HARD_LIGHT]="hard-light",t[r.BLEND_MODES.SOFT_LIGHT]="soft-light",t[r.BLEND_MODES.DIFFERENCE]="difference",t[r.BLEND_MODES.EXCLUSION]="exclusion",t[r.BLEND_MODES.HUE]="hue",t[r.BLEND_MODES.SATURATION]="saturate",t[r.BLEND_MODES.COLOR]="color",t[r.BLEND_MODES.LUMINOSITY]="luminosity"):(t[r.BLEND_MODES.NORMAL]="source-over",t[r.BLEND_MODES.ADD]="lighter",t[r.BLEND_MODES.MULTIPLY]="source-over",t[r.BLEND_MODES.SCREEN]="source-over",t[r.BLEND_MODES.OVERLAY]="source-over",t[r.BLEND_MODES.DARKEN]="source-over",t[r.BLEND_MODES.LIGHTEN]="source-over",t[r.BLEND_MODES.COLOR_DODGE]="source-over",t[r.BLEND_MODES.COLOR_BURN]="source-over",t[r.BLEND_MODES.HARD_LIGHT]="source-over",t[r.BLEND_MODES.SOFT_LIGHT]="source-over",t[r.BLEND_MODES.DIFFERENCE]="source-over",t[r.BLEND_MODES.EXCLUSION]="source-over",t[r.BLEND_MODES.HUE]="source-over",t[r.BLEND_MODES.SATURATION]="source-over",t[r.BLEND_MODES.COLOR]="source-over",t[r.BLEND_MODES.LUMINOSITY]="source-over");return t[r.BLEND_MODES.NORMAL_NPM]=t[r.BLEND_MODES.NORMAL],t[r.BLEND_MODES.ADD_NPM]=t[r.BLEND_MODES.ADD],t[r.BLEND_MODES.SCREEN_NPM]=t[r.BLEND_MODES.SCREEN],t};var n,r=i(5),o=i(143),s=(n=o)&&n.__esModule?n:{default:n}},function(t,e,i){"use strict";e.__esModule=!0;var n=p(i(61)),r=p(i(62)),o=p(i(92)),s=p(i(274)),a=p(i(275)),l=p(i(276)),h=p(i(12)),u=i(7),c=p(i(18)),d=p(i(89));function p(t){return t&&t.__esModule?t:{default:t}}var f=0,g=0,m=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=h.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var r=1;r<=d.default.nextPow2(n.size);r*=2)n.buffers.push(new l.default(4*r*n.vertByteSize));n.indices=(0,o.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var s=0;s<n.size;s++)n.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,a.default)(this.MAX_TEXTURES,t)),this.shader=(0,s.default)(t,this.MAX_TEXTURES),this.indexBuffer=c.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,i=0;i<this.vaoMax;i++){var n=this.vertexBuffers[i]=c.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),r=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&r.addAttribute(n,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=r}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=d.default.nextPow2(this.currentIndex),n=d.default.log2(i),r=this.buffers[n],o=this.sprites,s=this.groups,a=r.float32View,l=r.uint32View,p=this.boundTextures,m=this.renderer.boundTextures,_=this.renderer.textureGC.count,v=0,y=void 0,b=void 0,x=1,w=0,T=s[0],S=void 0,E=void 0,P=u.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];T.textureCount=0,T.start=0,T.blend=P,f++;var A=void 0;for(A=0;A<e;++A){var I=m[A];I._enabled!==f?(p[A]=I,I._virtalBoundId=A,I._enabled=f):p[A]=this.renderer.emptyTextures[A]}for(f++,A=0;A<this.currentIndex;++A){var O=o[A];o[A]=null,y=O._texture.baseTexture;var C=u.premultiplyBlendMode[Number(y.premultipliedAlpha)][O.blendMode];if(P!==C&&(P=C,b=null,w=e,f++),b!==y&&(b=y,y._enabled!==f)){if(w===e&&(f++,T.size=A-T.start,w=0,(T=s[x++]).blend=P,T.textureCount=0,T.start=A),y.touched=_,-1===y._virtalBoundId)for(var M=0;M<e;++M){var R=(M+g)%e,k=p[R];if(k._enabled!==f){g++,k._virtalBoundId=-1,y._virtalBoundId=R,p[R]=y;break}}y._enabled=f,T.textureCount++,T.ids[w]=y._virtalBoundId,T.textures[w++]=y}if(S=O.vertexData,E=O._texture._uvs.uvsUint32,this.renderer.roundPixels){var L=this.renderer.resolution;a[v]=(S[0]*L|0)/L,a[v+1]=(S[1]*L|0)/L,a[v+5]=(S[2]*L|0)/L,a[v+6]=(S[3]*L|0)/L,a[v+10]=(S[4]*L|0)/L,a[v+11]=(S[5]*L|0)/L,a[v+15]=(S[6]*L|0)/L,a[v+16]=(S[7]*L|0)/L}else a[v]=S[0],a[v+1]=S[1],a[v+5]=S[2],a[v+6]=S[3],a[v+10]=S[4],a[v+11]=S[5],a[v+15]=S[6],a[v+16]=S[7];l[v+2]=E[0],l[v+7]=E[1],l[v+12]=E[2],l[v+17]=E[3];var D=Math.min(O.worldAlpha,1),N=D<1&&y.premultipliedAlpha?(0,u.premultiplyTint)(O._tintRGB,D):O._tintRGB+(255*D<<24);l[v+3]=l[v+8]=l[v+13]=l[v+18]=N,a[v+4]=a[v+9]=a[v+14]=a[v+19]=y._virtalBoundId,v+=20}if(T.size=A-T.start,h.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var F=this.shader.attributes,B=this.vertexBuffers[this.vertexCount]=c.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),U=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(B,F.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(B,F.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(B,F.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);F.aTextureId&&U.addAttribute(B,F.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=U}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++}for(A=0;A<e;++A)m[A]._virtalBoundId=-1;for(A=0;A<x;++A){for(var j=s[A],V=j.textureCount,X=0;X<V;X++)b=j.textures[X],m[j.ids[X]]!==b&&this.renderer.bindTexture(b,j.ids[X],!0),b._virtalBoundId=-1;this.renderer.state.setBlendMode(j.blend),t.drawElements(t.TRIANGLES,6*j.size,t.UNSIGNED_SHORT,6*j.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),h.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(n.default);e.default=m,r.default.registerPlugin("sprite",m)},function(t,e,i){"use strict";e.__esModule=!0;var n=o(i(47)),r=o(i(144));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a);(n=Math.round(n*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new r.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e;var n=t.filterArea;t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),t.filterArea=n,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(i.root?i.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(n.default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var n=s(t),r=s(e);return Object.assign(n,r)};var n,r=i(18);var o=((n=r)&&n.__esModule?n:{default:n}).default.shader.defaultValue;function s(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},n=void 0,r=t.replace(/\s+/g," ").split(/\s*;\s*/),s=0;s<r.length;s++){var a=r[s].trim();if(a.indexOf("uniform")>-1){var l=a.split(" "),h=l[1],u=l[2],c=1;u.indexOf("[")>-1&&(n=u.split(/\[|]/),u=n[0],c*=Number(n[1])),u.match(e)||(i[u]={value:o(h,c),name:u,type:h})}}return i}},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var l,h=[],u=!1,c=-1;function d(){u&&l&&(u=!1,l.length?h=l.concat(h):c=-1,h.length&&p())}function p(){if(!u){var t=a(d);u=!0;for(var e=h.length;e;){for(l=h,h=[];++c<e;)l&&l[c].run();c=-1,e=h.length}l=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new f(t,e)),1!==h.length||u||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(47),o=(n=r)&&n.__esModule?n:{default:n};var s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.stencilMaskStack=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack.length;0===i&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,i,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(o.default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var n=u(i(47)),r=u(i(63)),o=u(i(147)),s=i(15),a=u(i(48)),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(267)),h=u(i(89));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=function(){function t(){c(this,t),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new s.Rectangle,this.destinationFrame=new s.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),p=function(t){function e(i){c(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.gl=n.renderer.gl,n.quad=new o.default(n.gl,i.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n.managedFilters=[],n.renderer.on("prerender",n.onPrerender,n),n._screenWidth=i.view.width,n._screenHeight=i.view.height,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var r=new d;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[r]},this.filterData=n}var o=n.stack[++n.index],s=n.stack[0].destinationFrame;o||(o=n.stack[n.index]=new d);var a=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===i.screen.width&&t.filterArea.height===i.screen.height,l=e[0].resolution,h=0|e[0].padding,u=a?i.screen:t.filterArea||t.getBounds(!0),c=o.sourceFrame,p=o.destinationFrame;c.x=(u.x*l|0)/l,c.y=(u.y*l|0)/l,c.width=(u.width*l|0)/l,c.height=(u.height*l|0)/l,a||(n.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(s),c.pad(h)),p.width=c.width,p.height=c.height;var f=this.getPotRenderTarget(i.gl,c.width,c.height,l);o.target=t,o.filters=e,o.resolution=l,o.renderTarget=f,f.setFrame(p,c),i.bindRenderTarget(f),f.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(1===n.length)n[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var r=i.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);o.setFrame(i.destinationFrame,i.sourceFrame),o.clear();var s=0;for(s=0;s<n.length-1;++s){n[s].apply(this,r,o,!0,i);var a=r;r=o,o=a}n[s].apply(this,r,e.renderTarget,!1,i),this.freePotRenderTarget(r),this.freePotRenderTarget(o)}i.clear(),t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer,o=r.gl,s=t.glShaders[r.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new a.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[r.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s,this.managedFilters.push(t)):(s=t.glShaders[r.CONTEXT_UID]=new a.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),r.bindVao(null),this.quad.initVao(s)),r.bindVao(this.quad.vao),r.bindRenderTarget(i),n&&(o.disable(o.SCISSOR_TEST),r.clear(),o.enable(o.SCISSOR_TEST)),i===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(s);var l=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=l,this.syncUniforms(s,t),r.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,l._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,n=e.uniforms,r=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var l in i)if(t.uniforms.data[l]){var h=i[l].type;if("sampler2d"===h&&0!==n[l]){if(n[l].baseTexture)t.uniforms[l]=this.renderer.bindTexture(n[l].baseTexture,r);else{t.uniforms[l]=r;var u=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],u.activeTexture(u.TEXTURE0+r),n[l].texture.bind()}r++}else if("mat3"===h)void 0!==n[l].a?t.uniforms[l]=n[l].toArray(!0):t.uniforms[l]=n[l];else if("vec2"===h)if(void 0!==n[l].x){var c=t.uniforms[l]||new Float32Array(2);c[0]=n[l].x,c[1]=n[l].y,t.uniforms[l]=c}else t.uniforms[l]=n[l];else"float"===h?t.uniforms.data[l].value!==i[l]&&(t.uniforms[l]=n[l]):t.uniforms[l]=n[l]}},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return n.setFrame(i.destinationFrame,i.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return l.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return l.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return l.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,i=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var n=0;n<i.length;n++)t||i[n].glShaders[e.CONTEXT_UID].destroy(),delete i[n].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,n){var o="screen";i*=n,(e*=n)===this._screenWidth&&i===this._screenHeight||(o=(65535&(e=h.default.nextPow2(e)))<<16|65535&(i=h.default.nextPow2(i))),this.pool[o]||(this.pool[o]=[]);var s=this.pool[o].pop();if(!s){var a=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),s=new r.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return s.resolution=n,s.defaultFrame.width=s.size.width=e/n,s.defaultFrame.height=s.size.height=i/n,s.filterPoolKey=o,s},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(n.default);e.default=p},function(t,e,i){"use strict";e.__esModule=!0,e.calculateScreenSpaceMatrix=function(t,e,i){var n=t.identity();return n.translate(e.x/i.width,e.y/i.height),n.scale(i.width,i.height),n},e.calculateNormalizedScreenSpaceMatrix=function(t,e,i){var n=t.identity();n.translate(e.x/i.width,e.y/i.height);var r=i.width/e.width,o=i.height/e.height;return n.scale(r,o),n},e.calculateSpriteMatrix=function(t,e,i,r){var o=r._texture.orig,s=t.set(i.width,0,0,i.height,e.x,e.y),a=r.worldTransform.copy(n.Matrix.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(r.anchor.x,r.anchor.y),s};var n=i(15)},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(18),o=i(5),s=i(63),a=(n=s)&&n.__esModule?n:{default:n},l=i(7);var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,n=!!t._glRenderTargets;if(!t.hasLoaded)return null;var s=this.renderer.boundTextures;if(void 0===e){e=0;for(var l=0;l<s.length;++l)if(s[l]===t){e=l;break}}s[e]=t,i.activeTexture(i.TEXTURE0+e);var h=t._glTextures[this.renderer.CONTEXT_UID];if(h)n?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):h.upload(t.source);else{if(n){var u=new a.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);u.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=u,h=u.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else(h=new r.GLTexture(this.gl,null,null,null,null)).bind(e),h.premultiplyAlpha=!0,h.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=h,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&h.enableMipmap(),t.wrapMode===o.WRAP_MODES.CLAMP?h.enableWrapClamp():t.wrapMode===o.WRAP_MODES.REPEAT?h.enableWrapRepeat():h.enableWrapMirrorRepeat()):h.enableWrapClamp(),t.scaleMode===o.SCALE_MODES.NEAREST?h.enableNearestScaling():h.enableLinearScaling()}return h},t.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var i=this.renderer,n=i.CONTEXT_UID,r=t._glTextures,o=t._glRenderTargets;if(r[n]&&(i.unbindTexture(t),r[n].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete r[n],!e)){var s=this._managedTextures.indexOf(t);-1!==s&&(0,l.removeItems)(this._managedTextures,s,1)}o&&o[n]&&(i._activeRenderTarget===o[n]&&i.bindRenderTarget(i.rootRenderTarget),o[n].destroy(),delete o[n])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(5),o=i(12),s=(n=o)&&n.__esModule?n:{default:n};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==r.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r._glRenderTargets&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(271),o=(n=r)&&n.__esModule?n:{default:n};var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[n.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[n.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[n.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[n.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e};var n=i(5)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[n.DRAW_MODES.POINTS]=t.POINTS,e[n.DRAW_MODES.LINES]=t.LINES,e[n.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[n.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[n.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[n.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[n.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var n=i(5)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=s;i=(i=i.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(textureId == "+i+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var n=new o.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),r=[],a=0;a<e;a++)r[a]=a;return n.bind(),n.uniforms.uSamplers=r,n};var n,r=i(48),o=(n=r)&&n.__esModule?n:{default:n};i(26);var s=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var n=document.createElement("canvas");n.width=1,n.height=1,e=o.default.createContext(n)}var r=e.createShader(e.FRAGMENT_SHADER);for(;;){var l=s.replace(/%forloop%/gi,a(t));if(e.shaderSource(r,l),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext();return t};var n,r=i(18),o=(n=r)&&n.__esModule?n:{default:n};var s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function a(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.default=n},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=p(i(88)),o=p(i(31)),s=i(15),a=i(7),l=i(5),h=p(i(12)),u=p(i(148)),c=p(i(149)),d=p(i(278));function p(t){return t&&t.__esModule?t:{default:t}}var f={texture:!0,children:!1,baseTexture:!0},g=function(t){function e(i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=r||document.createElement("canvas")).width=3,r.height=3;var a=o.default.fromCanvas(r,h.default.SCALE_MODE,"text");a.orig=new s.Rectangle,a.trim=new s.Rectangle;var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,a));return o.default.addToCache(l._texture,l._texture.baseTexture.textureCacheIds[0]),l.canvas=r,l.context=l.canvas.getContext("2d"),l.resolution=h.default.RESOLUTION,l._text=null,l._style=null,l._styleListener=null,l._font="",l.text=i,l.style=n,l.localStyleID=-1,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,n=c.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),r=n.width,o=n.height,s=n.lines,a=n.lineHeight,l=n.lineWidths,h=n.maxLineWidth,u=n.fontProperties;this.canvas.width=Math.ceil((Math.max(1,r)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var d=void 0,p=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var f=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,g=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,m=0;m<s.length;m++)d=e.strokeThickness/2,p=e.strokeThickness/2+m*a+u.ascent,"right"===e.align?d+=h-l[m]:"center"===e.align&&(d+=(h-l[m])/2),e.fill&&(this.drawLetterSpacing(s[m],d+f+e.padding,p+g+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[m],d+f+e.padding,p+g+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,s);for(var _=0;_<s.length;_++)d=e.strokeThickness/2,p=e.strokeThickness/2+_*a+u.ascent,"right"===e.align?d+=h-l[_]:"center"===e.align&&(d+=(h-l[_])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[_],d+e.padding,p+e.padding,!0),e.fill&&this.drawLetterSpacing(s[_],d+e.padding,p+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this._style,o=r.letterSpacing;if(0!==o)for(var s=String.prototype.split.call(t,""),a=e,l=0,h="";l<t.length;)h=s[l++],n?this.context.strokeText(h,a,i):this.context.fillText(h,a,i),a+=this.context.measureText(h).width+o;else n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,d.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,n=this._style,r=n.trim?0:n.padding,o=i.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,n=void 0,r=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,h=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var c=h.length+1,d=1;d<c;++d)u.push(d/c);if(h.unshift(t.fill[0]),u.unshift(0),h.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===l.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,0,s/2,a),n=(h.length+1)*e.length,r=0;for(var p=0;p<e.length;p++){r+=1;for(var f=0;f<h.length;f++)o="number"==typeof u[f]?u[f]/e.length+p/e.length:r/n,i.addColorStop(o,h[f]),r++}}else{i=this.context.createLinearGradient(0,a/2,s,a/2),n=h.length+1,r=1;for(var g=0;g<h.length;g++)o="number"==typeof u[g]?u[g]:r/n,i.addColorStop(o,h[g]),r++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},f,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},n(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,a.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,a.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof u.default?this._style=t:this._style=new u.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null==t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(r.default);e.default=g},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=t.width,i=t.height,n=t.getContext("2d"),r=n.getImageData(0,0,e,i).data,o=r.length,s={top:null,left:null,right:null,bottom:null},a=null,l=void 0,h=void 0,u=void 0;for(l=0;l<o;l+=4)0!==r[l+3]&&(h=l/4%e,u=~~(l/4/e),null===s.top&&(s.top=u),null===s.left?s.left=h:h<s.left&&(s.left=h),null===s.right?s.right=h+1:s.right<h&&(s.right=h+1),null===s.bottom?s.bottom=u:s.bottom<u&&(s.bottom=u));null!==s.top&&(e=s.right-s.left,i=s.bottom-s.top+1,a=n.getImageData(s.left,s.top,e,i));return{height:i,width:e,data:a}}},function(t,e,i){"use strict";e.__esModule=!0;var n=f(i(45)),r=f(i(91)),o=f(i(31)),s=f(i(150)),a=f(i(88)),l=i(15),h=i(7),u=i(5),c=f(i(84)),d=f(i(280)),p=f(i(46));function f(t){return t&&t.__esModule?t:{default:t}}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var _=void 0,v=new l.Matrix,y=new l.Point,b=new Float32Array(4),x=new Float32Array(4),w=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];g(this,e);var n=m(this,t.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=i,n.lineColor=0,n.lineAlignment=.5,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=u.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new c.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n._prevRectTint=null,n._prevRectFillColor=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype._quadraticCurveLength=function(t,e,i,n,r,o){var s=t-2*i+r,a=e-2*n+o,l=2*i-2*t,h=2*n-2*e,u=4*(s*s+a*a),c=4*(s*l+a*h),d=l*l+h*h,p=2*Math.sqrt(u+c+d),f=Math.sqrt(u),g=2*u*f,m=2*Math.sqrt(d),_=c/f;return(g*p+f*c*(p-m)+(4*d*u-c*c)*Math.log((2*f+_+p)/(_+m)))/(4*g)},e.prototype._bezierCurveLength=function(t,e,i,n,r,o,s,a){for(var l=0,h=0,u=0,c=0,d=0,p=0,f=0,g=0,m=0,_=0,v=0,y=t,b=e,x=1;x<=10;++x)_=y-(g=(f=(p=(d=1-(h=x/10))*d)*d)*t+3*p*h*i+3*d*(u=h*h)*r+(c=u*h)*s),v=b-(m=f*e+3*p*h*n+3*d*u*o+c*a),y=g,b=m,l+=Math.sqrt(_*_+v*v);return l},e.prototype._segmentsCount=function(t){var i=Math.ceil(t/e.CURVES.maxLength);return i<e.CURVES.minSegments?i=e.CURVES.minSegments:i>e.CURVES.maxSegments&&(i=e.CURVES.maxSegments),i},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.lineAlignment=n,this.currentPath)if(this.currentPath.shape.points.length){var r=new l.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var i=new l.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){var i=this.currentPath.shape.points,n=i[i.length-2],r=i[i.length-1];return n===t&&r===e||(i.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,s=0,a=0;0===o.length&&this.moveTo(0,0);for(var l=o[o.length-2],h=o[o.length-1],u=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(l,h,t,i,n,r)):20,c=1;c<=u;++c){var d=c/u;s=l+(t-l)*d,a=h+(i-h)*d,o.push(s+(t+(n-t)*d-s)*d,a+(i+(r-i)*d-a)*d)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,i,n,r,o,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,l=a[a.length-2],h=a[a.length-1];a.length-=2;var u=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(l,h,t,i,n,r,o,s)):20;return(0,d.default)(l,h,t,i,n,r,o,s,u,a),this.dirty++,this},e.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1]-e,l=s-t,h=n-e,u=i-t,c=Math.abs(a*u-l*h);if(c<1e-8||0===r)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var d=a*a+l*l,p=h*h+u*u,f=a*h+l*u,g=r*Math.sqrt(d)/c,m=r*Math.sqrt(p)/c,_=g*f/d,v=m*f/p,y=g*u+m*l,b=g*h+m*a,x=l*(m+_),w=a*(m+_),T=u*(g+v),S=h*(g+v),E=Math.atan2(w-b,x-y),P=Math.atan2(S-b,T-y);this.arc(y+t,b+e,r,E,P,l*h>u*a)}return this.dirty++,this},e.prototype.arc=function(t,i,n,r,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===o)return this;!s&&o<=r?o+=u.PI_2:s&&r<=o&&(r+=u.PI_2);var a=o-r,l=e.CURVES.adaptive?this._segmentsCount(Math.abs(a)*n):40*Math.ceil(Math.abs(a)/u.PI_2);if(0===a)return this;var h=t+Math.cos(r)*n,c=i+Math.sin(r)*n,d=this.currentPath?this.currentPath.shape.points:null;if(d){var p=Math.abs(d[d.length-2]-h),f=Math.abs(d[d.length-1]-c);p<.001&&f<.001||d.push(h,c)}else this.moveTo(h,c),d=this.currentPath.shape.points;for(var g=a/(2*l),m=2*g,_=Math.cos(g),v=Math.sin(g),y=l-1,b=y%1/y,x=0;x<=y;++x){var w=x+b*x,T=g+r+m*w,S=Math.cos(T),E=-Math.sin(T);d.push((_*S+v*E)*n+t,(_*-E+v*S)*n+i)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new l.Rectangle(t,e,i,n)),this},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new l.RoundedRectangle(t,e,i,n,r)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new l.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new l.Ellipse(t,e,i,n)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof l.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new l.Polygon(e);return r.closed=i,this.drawShape(r),this},e.prototype.drawStar=function(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r=r||n/2;for(var s=-1*Math.PI/2+o,a=2*i,l=u.PI_2/a,h=[],c=0;c<a;c++){var d=c%2?r:n,p=c*l+s;h.push(t+d*Math.cos(p),e+d*Math.sin(p))}return this.drawPolygon(h)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===u.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new a.default(new o.default(o.default.WHITE)));var i=this._spriteRect,n=this.graphicsData[0].fillColor;if(16777215===this.tint)i.tint=n;else if(this.tint!==this._prevRectTint||n!==this._prevRectFillColor){var r=b,s=x;(0,h.hex2rgb)(n,r),(0,h.hex2rgb)(this.tint,s),r[0]*=s[0],r[1]*=s[1],r[2]*=s[2],i.tint=(0,h.rgb2hex)(r),this._prevRectTint=this.tint,this._prevRectFillColor=n}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=e.width,i._texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,y);for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fill&&(n.shape&&n.shape.contains(y.x,y.y))){if(n.holes)for(var r=0;r<n.holes.length;r++){if(n.holes[r].contains(y.x,y.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r=0,o=0,s=0,a=0,l=0,h=0;h<this.graphicsData.length;h++){var c=this.graphicsData[h],d=c.type,p=c.lineWidth*c.lineAlignment;if(r=c.shape,d===u.SHAPES.RECT||d===u.SHAPES.RREC)o=r.x-p,s=r.y-p,t=o<t?o:t,e=o+(a=r.width+2*p)>e?o+a:e,i=s<i?s:i,n=s+(l=r.height+2*p)>n?s+l:n;else if(d===u.SHAPES.CIRC)o=r.x,s=r.y,t=o-(a=r.radius+p)<t?o-a:t,e=o+a>e?o+a:e,i=s-(l=r.radius+p)<i?s-l:i,n=s+l>n?s+l:n;else if(d===u.SHAPES.ELIP)o=r.x,s=r.y,t=o-(a=r.width+p)<t?o-a:t,e=o+a>e?o+a:e,i=s-(l=r.height+p)<i?s-l:i,n=s+l>n?s+l:n;else for(var f=r.points,g=0,m=0,_=0,v=0,y=0,b=0,x=0,w=0,T=0;T+2<f.length;T+=2)o=f[T],s=f[T+1],g=f[T+2],m=f[T+3],_=Math.abs(g-o),v=Math.abs(m-s),l=2*p,(a=Math.sqrt(_*_+v*v))<1e-9||(t=(x=(g+o)/2)-(y=(l/a*v+_)/2)<t?x-y:t,e=x+y>e?x+y:e,i=(w=(m+s)/2)-(b=(l/a*_+v)/2)<i?w-b:i,n=w+b>n?w+b:n)}else t=0,e=0,i=0,n=0;var S=this.boundsPadding;this._localBounds.minX=t-S,this._localBounds.maxX=e+S,this._localBounds.minY=i-S,this._localBounds.maxY=n+S},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new s.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===u.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),n=r.default.create(i.width,i.height,t,e);_||(_=new p.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(v),v.invert(),v.tx-=i.x,v.ty-=i.y,_.render(this,n,!0,v);var s=o.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t,"graphics");return s.baseTexture.resolution=e,s.baseTexture.update(),s},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var n in this._webGL)for(var r=0;r<this._webGL[n].data.length;++r)this._webGL[n].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}(n.default);e.default=w,w._SPRITE_TEXTURE=null,w.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i,n,r,o,s,a,l){var h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],u=0,c=0,d=0,p=0,f=0;h.push(t,e);for(var g=1,m=0;g<=l;++g)d=(c=(u=1-(m=g/l))*u)*u,f=(p=m*m)*m,h.push(d*t+3*c*m*i+3*u*p*r+f*s,d*e+3*c*m*n+3*u*p*o+f*a);return h}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(7),r=i(5),o=p(i(61)),s=p(i(62)),a=p(i(282)),l=p(i(283)),h=p(i(284)),u=p(i(285)),c=p(i(286)),d=p(i(287));function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=i.gl,n.CONTEXT_UID=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new l.default(this.gl)},e.prototype.destroy=function(){o.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,r=void 0,o=t._webGL[this.CONTEXT_UID];o&&t.dirty===o.dirty||(this.updateGraphics(t),o=t._webGL[this.CONTEXT_UID]);var s=this.primitiveShader;e.bindShader(s),e.state.setBlendMode(t.blendMode);for(var a=0,l=o.data.length;a<l;a++){var h=(r=o.data[a]).shader;e.bindShader(h),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.tint=(0,n.hex2rgb)(t.tint),h.uniforms.alpha=t.worldAlpha,e.bindVao(r.vao),r.nativeLines?i.drawArrays(i.LINES,0,r.points.length/6):r.vao.draw(i.TRIANGLE_STRIP,r.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var n=0;n<i.data.length;n++)this.graphicsDataPool.push(i.data[n]);i.data.length=0,i.lastIndex=0}for(var o=void 0,s=void 0,a=i.lastIndex;a<t.graphicsData.length;a++){var l=t.graphicsData[a];o=this.getWebGLData(i,0),l.nativeLines&&l.lineWidth&&(s=this.getWebGLData(i,0,!0),i.lastIndex++),l.type===r.SHAPES.POLY&&(0,h.default)(l,o,s),l.type===r.SHAPES.RECT?(0,u.default)(l,o,s):l.type===r.SHAPES.CIRC||l.type===r.SHAPES.ELIP?(0,d.default)(l,o,s):l.type===r.SHAPES.RREC&&(0,c.default)(l,o,s),i.lastIndex++}this.renderer.bindVao(null);for(var p=0;p<i.data.length;p++)(o=i.data[p]).dirty&&o.upload()},e.prototype.getWebGLData=function(t,e,i){var n=t.data[t.data.length-1];return(!n||n.nativeLines!==i||n.points.length>32e4)&&((n=this.graphicsDataPool.pop()||new a.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=i,n.reset(e),t.data.push(n)),n.dirty=!0,n},e}(o.default);e.default=f,s.default.registerPlugin("graphics",f)},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(18),o=(n=r)&&n.__esModule?n:{default:n};var s=function(){function t(e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new o.default.VertexArrayObject(e,n).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(48);var o=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((n=r)&&n.__esModule?n:{default:n}).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){t.points=t.shape.points.slice();var s=t.points;if(t.fill&&s.length>=6){for(var a=[],l=t.holes,h=0;h<l.length;h++){var u=l[h];a.push(s.length/2),s=s.concat(u.points)}var c=e.points,d=e.indices,p=s.length/2,f=(0,r.hex2rgb)(t.fillColor),g=t.fillAlpha,m=f[0]*g,_=f[1]*g,v=f[2]*g,y=(0,o.default)(s,a,2);if(!y)return;for(var b=c.length/6,x=0;x<y.length;x+=3)d.push(y[x]+b),d.push(y[x]+b),d.push(y[x+1]+b),d.push(y[x+2]+b),d.push(y[x+2]+b);for(var w=0;w<p;w++)c.push(s[2*w],s[2*w+1],m,_,v,g)}t.lineWidth>0&&(0,n.default)(t,e,i)};var n=s(i(64)),r=i(7),o=s(i(87));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var n=t.shape,r=n.x,a=n.y,l=n.width,h=n.height;if(t.fill){var u=(0,s.hex2rgb)(t.fillColor),c=t.fillAlpha,d=u[0]*c,p=u[1]*c,f=u[2]*c,g=e.points,m=e.indices,_=g.length/6;g.push(r,a),g.push(d,p,f,c),g.push(r+l,a),g.push(d,p,f,c),g.push(r,a+h),g.push(d,p,f,c),g.push(r+l,a+h),g.push(d,p,f,c),m.push(_,_,_+1,_+2,_+3,_+3)}if(t.lineWidth){var v=t.points;t.points=[r,a,r+l,a,r+l,a+h,r,a+h,r,a],(0,o.default)(t,e,i),t.points=v}};var n,r=i(64),o=(n=r)&&n.__esModule?n:{default:n},s=i(7)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var s=t.shape,a=s.x,h=s.y,u=s.width,c=s.height,d=s.radius,p=[];if(p.push(a+d,h),l(a+u-d,h,a+u,h,a+u,h+d,p),l(a+u,h+c-d,a+u,h+c,a+u-d,h+c,p),l(a+d,h+c,a,h+c,a,h+c-d,p),l(a,h+d,a,h,a+d+1e-10,h,p),t.fill){for(var f=(0,o.hex2rgb)(t.fillColor),g=t.fillAlpha,m=f[0]*g,_=f[1]*g,v=f[2]*g,y=e.points,b=e.indices,x=y.length/6,w=(0,n.default)(p,null,2),T=0,S=w.length;T<S;T+=3)b.push(w[T]+x),b.push(w[T]+x),b.push(w[T+1]+x),b.push(w[T+2]+x),b.push(w[T+2]+x);for(var E=0,P=p.length;E<P;E++)y.push(p[E],p[++E],m,_,v,g)}if(t.lineWidth){var A=t.points;t.points=p,(0,r.default)(t,e,i),t.points=A}};var n=s(i(87)),r=s(i(64)),o=i(7);function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e,i){return t+(e-t)*i}function l(t,e,i,n,r,o){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=20,h=s,u=0,c=0,d=0,p=0,f=0,g=0,m=0,_=0;m<=l;++m)u=a(t,i,_=m/l),c=a(e,n,_),d=a(i,r,_),p=a(n,o,_),f=a(u,d,_),g=a(c,p,_),h.push(f,g);return h}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var n=t.shape,r=n.x,l=n.y,h=void 0,u=void 0;t.type===s.SHAPES.CIRC?(h=n.radius,u=n.radius):(h=n.width,u=n.height);if(0===h||0===u)return;var c=Math.floor(30*Math.sqrt(n.radius))||Math.floor(15*Math.sqrt(n.width+n.height)),d=2*Math.PI/c;if(t.fill){var p=(0,a.hex2rgb)(t.fillColor),f=t.fillAlpha,g=p[0]*f,m=p[1]*f,_=p[2]*f,v=e.points,y=e.indices,b=v.length/6;y.push(b);for(var x=0;x<c+1;x++)v.push(r,l,g,m,_,f),v.push(r+Math.sin(d*x)*h,l+Math.cos(d*x)*u,g,m,_,f),y.push(b++,b++);y.push(b-1)}if(t.lineWidth){var w=t.points;t.points=[];for(var T=0;T<c;T++)t.points.push(r+Math.sin(d*-T)*h,l+Math.cos(d*-T)*u);t.points.push(t.points[0],t.points[1]),(0,o.default)(t,e,i),t.points=w}};var n,r=i(64),o=(n=r)&&n.__esModule?n:{default:n},s=i(5),a=i(7)},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(46),o=(n=r)&&n.__esModule?n:{default:n},s=i(5);var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldAlpha,r=t.transform.worldTransform,o=e.resolution;i.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var l=t.graphicsData[a],h=l.shape,u=l._fillTint,c=l._lineTint;if(i.lineWidth=l.lineWidth,l.type===s.SHAPES.POLY){i.beginPath();var d=h.points,p=l.holes,f=void 0,g=void 0;i.moveTo(d[0],d[1]);for(var m=2;m<d.length;m+=2)i.lineTo(d[m],d[m+1]);if(h.closed&&i.closePath(),p.length>0){f=0;for(var _=0;_<d.length;_+=2)f+=d[_]*d[_+3]-d[_+1]*d[_+2];for(var v=0;v<p.length;v++){d=p[v].points,g=0;for(var y=0;y<d.length;y+=2)g+=d[y]*d[y+3]-d[y+1]*d[y+2];if(i.moveTo(d[0],d[1]),g*f<0)for(var b=2;b<d.length;b+=2)i.lineTo(d[b],d[b+1]);else for(var x=d.length-2;x>=2;x-=2)i.lineTo(d[x],d[x+1]);p[v].closed&&i.closePath()}}l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(l.type===s.SHAPES.RECT)(l.fillColor||0===l.fillColor)&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fillRect(h.x,h.y,h.width,h.height)),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(h.x,h.y,h.width,h.height));else if(l.type===s.SHAPES.CIRC)i.beginPath(),i.arc(h.x,h.y,h.radius,0,2*Math.PI),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(l.type===s.SHAPES.ELIP){var w=2*h.width,T=2*h.height,S=h.x-w/2,E=h.y-T/2;i.beginPath();var P=w/2*.5522848,A=T/2*.5522848,I=S+w,O=E+T,C=S+w/2,M=E+T/2;i.moveTo(S,M),i.bezierCurveTo(S,M-A,C-P,E,C,E),i.bezierCurveTo(C+P,E,I,M-A,I,M),i.bezierCurveTo(I,M+A,C+P,O,C,O),i.bezierCurveTo(C-P,O,S,M+A,S,M),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(l.type===s.SHAPES.RREC){var R=h.x,k=h.y,L=h.width,D=h.height,N=h.radius,F=Math.min(L,D)/2|0;N=N>F?F:N,i.beginPath(),i.moveTo(R,k+N),i.lineTo(R,k+D-N),i.quadraticCurveTo(R,k+D,R+N,k+D),i.lineTo(R+L-N,k+D),i.quadraticCurveTo(R+L,k+D,R+L,k+D-N),i.lineTo(R+L,k+N),i.quadraticCurveTo(R+L,k,R+L-N,k),i.lineTo(R+N,k),i.quadraticCurveTo(R,k,R,k+N),i.closePath(),(l.fillColor||0===l.fillColor)&&(i.globalAlpha=l.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;++r){var o=t.graphicsData[r],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*n*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)i.lineTo(t[2*n],t[2*n+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=a,o.default.registerPlugin("graphics",a)},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=i(6),o=i(7);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=i,this.resolution=this._updateResolution(n||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,o.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,n=t.BATCH_SIZE,o=this.baseTexture.sourceScale;i-e<n&&i<this._frameKeys.length;){var s=this._frameKeys[i],a=this._frames[s],l=a.frame;if(l){var h=null,u=null,c=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,d=new r.Rectangle(0,0,Math.floor(c.w*o)/this.resolution,Math.floor(c.h*o)/this.resolution);h=a.rotated?new r.Rectangle(Math.floor(l.x*o)/this.resolution,Math.floor(l.y*o)/this.resolution,Math.floor(l.h*o)/this.resolution,Math.floor(l.w*o)/this.resolution):new r.Rectangle(Math.floor(l.x*o)/this.resolution,Math.floor(l.y*o)/this.resolution,Math.floor(l.w*o)/this.resolution,Math.floor(l.h*o)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(u=new r.Rectangle(Math.floor(a.spriteSourceSize.x*o)/this.resolution,Math.floor(a.spriteSourceSize.y*o)/this.resolution,Math.floor(l.w*o)/this.resolution,Math.floor(l.h*o)/this.resolution)),this.textures[s]=new r.Texture(this.baseTexture,h,d,u,a.rotated?2:0,a.anchor),r.Texture.addToCache(this.textures[s],s)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];var i=t[e],n=Array.isArray(i),r=0;for(i=n?i:i[Symbol.iterator]();;){var o;if(n){if(r>=i.length)break;o=i[r++]}else{if((r=i.next()).done)break;o=r.value}var s=o;this.animations[e].push(this.textures[s])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=t.mesh,i=t.particles,n=t.extras,o=t.filters,s=t.prepare,a=t.loaders,l=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return r("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return r("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return r("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return r("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return r("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{get:function(){return r("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return r("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return r("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return r("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return r("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return r("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return r("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return r("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return r("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return r("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var h=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],u=function(e){var i=h[e];Object.defineProperty(t[i.parent],"DEFAULT",{get:function(){return r("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]},set:function(e){r("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]=e}})},c=0;c<h.length;c++)u(c);Object.defineProperties(t.settings,{PRECISION:{get:function(){return r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return r("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}});n&&Object.defineProperties(n,{TextureTransform:{get:function(){return r("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}});t.DisplayObject.prototype.generateTexture=function(t,e,i){return r("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},t.Graphics.prototype.generateTexture=function(t,e){return r("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return r("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,i,n){this.legacyRenderer.render(t,this,i,e,!n),r("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return r("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return r("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return r("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return r("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,r("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(t){this.text=t,r("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});t.Text.prototype.setText=function(t){this.text=t,r("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return r("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return r("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return r("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return r("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,r("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return r("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return r("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(e=e||{})instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){r("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){r("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),i=-1;this._fontSize=26;for(var n=0;n<e.length;++n)if(e[n].match(/(px|pt|em|%)/)){i=n,this._fontSize=e[n];break}this._fontWeight="normal";for(var o=0;o<i;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(i>-1&&i<e.length-1){this._fontFamily="";for(var s=i+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,r("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,i){t.Texture.addToCache(e,i),r("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return r("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(o,{AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return r("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return r("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),t.utils.uuid=function(){return r("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return r("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var d=!0;Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(r("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),d=t},get:function(){return d}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(t,e){return r("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this});s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});if(a.Loader){var p=a.Resource,f=a.Loader;Object.defineProperties(p.prototype,{isJson:{get:function(){return r("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===p.TYPE.JSON}},isXml:{get:function(){return r("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===p.TYPE.XML}},isImage:{get:function(){return r("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===p.TYPE.IMAGE}},isAudio:{get:function(){return r("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===p.TYPE.AUDIO}},isVideo:{get:function(){return r("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===p.TYPE.VIDEO}}}),Object.defineProperties(f.prototype,{before:{get:function(){return r("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return r("The after() method is deprecated, please use use()."),this.use}}})}l.interactiveTarget&&Object.defineProperty(l.interactiveTarget,"defaultCursor",{set:function(t){r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}});l.InteractionManager&&(Object.defineProperty(l.InteractionManager,"defaultCursorStyle",{set:function(t){r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(l.InteractionManager,"currentCursorStyle",{set:function(t){r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var n={};function r(t){if(!n[t]){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),n[t]=!0}}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(153);Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return o(n).default}});var r=i(292);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return o(r).default}})},function(t,e,i){"use strict";e.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),r=s(i(85)),o=s(i(153));function s(t){return t&&t.__esModule?t:{default:t}}n.utils.mixins.delayMixin(n.DisplayObject.prototype,o.default);var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r.default.tablet&&!r.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width="100px",i.style.height="100px",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.zIndex=2,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",(function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)})),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,r=this.div;r.style.left=t.left+"px",r.style.top=t.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,n.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{r=s._accessibleDiv;var a=s.hitArea,l=s.worldTransform;s.hitArea?(r.style.left=(l.tx+a.x*l.a)*e+"px",r.style.top=(l.ty+a.y*l.d)*i+"px",r.style.width=a.width*l.a*e+"px",r.style.height=a.height*l.d*i+"px"):(a=s.getBounds(),this.capHitArea(a),r.style.left=a.x*e+"px",r.style.top=a.y*i+"px",r.style.width=a.width*e+"px",r.style.height=a.height*i+"px",r.title!==s.accessibleTitle&&null!==s.accessibleTitle&&(r.title=s.accessibleTitle),r.getAttribute("aria-label")!==s.accessibleHint&&null!==s.accessibleHint&&r.setAttribute("aria-label",s.accessibleHint))}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();e.default=a,n.WebGLRenderer.registerPlugin("accessibility",a),n.CanvasRenderer.registerPlugin("accessibility",a)},function(t,e,i){"use strict";e.__esModule=!0;var n=i(294);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return o(n).default}});var r=i(295);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return o(r).default}})},function(t,e,i){"use strict";e.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));var r=new n.Rectangle,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=!1,l=void 0,h=!1;t&&(t instanceof n.RenderTexture?l=t:(l=this.renderer.generateTexture(t),h=!0)),l?(o=(i=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=l.frame,a=!1):(o=(i=this.renderer.rootRenderTarget).resolution,a=!0,(s=r).width=i.size.width,s.height=i.size.height);var u=s.width*o,c=s.height*o,d=new n.CanvasRenderTarget(u,c,1);if(i){e.bindRenderTarget(i);var p=new Uint8Array(4*u*c),f=e.gl;f.readPixels(s.x*o,s.y*o,u,c,f.RGBA,f.UNSIGNED_BYTE,p);var g=d.context.getImageData(0,0,u,c);g.data.set(p),d.context.putImageData(g,0,0),a&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-c))}return h&&l.destroy(!0),d.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=void 0,l=!1;t&&(t instanceof n.RenderTexture?a=t:(a=this.renderer.generateTexture(t),l=!0)),a?(o=(i=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=a.frame):(o=(i=this.renderer.rootRenderTarget).resolution,(s=r).width=i.size.width,s.height=i.size.height);var h=s.width*o,u=s.height*o,c=new Uint8Array(4*h*u);if(i){e.bindRenderTarget(i);var d=e.gl;d.readPixels(s.x*o,s.y*o,h,u,d.RGBA,d.UNSIGNED_BYTE,c)}return l&&a.destroy(!0),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=o,n.WebGLRenderer.registerPlugin("extract",o)},function(t,e,i){"use strict";e.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));var r=new n.Rectangle,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=void 0;t&&(a=t instanceof n.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(i=e.rootContext,o=e.resolution,(s=r).width=this.renderer.width,s.height=this.renderer.height);var l=s.width*o,h=s.height*o,u=new n.CanvasRenderTarget(l,h,1),c=i.getImageData(s.x*o,s.y*o,l,h);return u.context.putImageData(c,0,0),u.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=void 0;return t&&(a=t instanceof n.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(i=e.rootContext,(s=r).width=e.width,s.height=e.height),i.getImageData(0,0,s.width*o,s.height*o).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=o,n.CanvasRenderer.registerPlugin("extract",o)},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));var o=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i[0]instanceof r.Texture?i[0]:i[0].texture));return o._textures=null,o._durations=null,o.textures=i,o._autoUpdate=!1!==n,o.animationSpeed=1,o.loop=!0,o.updateAnchor=!1,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o.playing=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&r.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&r.ticker.shared.add(this.update,this,r.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(r.Texture.fromFrame(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(r.Texture.fromImage(t[n]));return new e(i)},n(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof r.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(r.Sprite);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),s=i(60),a=(n=s)&&n.__esModule?n:{default:n};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=new o.Point,c=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;l(this,e);var s=h(this,t.call(this,i));return s.tileTransform=new o.TransformStatic,s._width=n,s._height=r,s._canvasPattern=null,s.uvTransform=i.transform||new o.TextureMatrix(i),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,n=this.worldTransform,r=t.resolution,s=2===e.rotate,l=e.baseTexture,h=l.resolution,u=this.tilePosition.x/this.tileScale.x%e.orig.width*h,c=this.tilePosition.y/this.tileScale.y%e.orig.height*h;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var d=new o.CanvasRenderTarget(e.orig.width,e.orig.height,h);if(16777215!==this.tint)this.tintedTexture=a.default.getTintedTexture(this,this.tint),d.context.drawImage(this.tintedTexture,0,0);else{var p=e._frame.x*h,f=e._frame.y*h,g=e._frame.width*h,m=e._frame.height*h,_=(e.trim?e.trim.width:e.orig.width)*h,v=(e.trim?e.trim.height:e.orig.height)*h,y=(e.trim?e.trim.x:0)*h,b=(e.trim?e.trim.y:0)*h;s?(d.context.rotate(-Math.PI/2),d.context.translate(-v,0),d.context.drawImage(l.source,p,f,g,m,-b,y,v,_)):d.context.drawImage(l.source,p,f,g,m,y,b,_,v)}this.cachedTint=this.tint,this._canvasPattern=d.context.createPattern(d.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/h,this.tileScale.y/h);var x=this.anchor.x*-this._width*h,w=this.anchor.y*-this._height*h;this.uvRespectAnchor?(i.translate(u,c),i.fillRect(-u+x,-c+w,this._width/this.tileScale.x*h,this._height/this.tileScale.y*h)):(i.translate(u+x,c+w),i.fillRect(-u,-c,this._width/this.tileScale.x*h,this._height/this.tileScale.y*h))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e=this._width,i=this._height,n=-e*this.anchor._x;if(u.x>=n&&u.x<n+e){var r=-i*this.anchor._y;if(u.y>=r&&u.y<r+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,n){return new e(o.Texture.from(t),i,n)},e.fromFrame=function(t,i,n){var r=o.utils.TextureCache[t];if(!r)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(r,i,n)},e.fromImage=function(t,i,n,r,s){return new e(o.Texture.fromImage(t,r,s),i,n)},r(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(o.Sprite);e.default=c},function(t,e,i){"use strict";e.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),r=i(5);i(26);var o=new n.Matrix,s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.shader=null,n.simpleShader=null,n.quad=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new n.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new n.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new n.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((s=i.uvs)[0]=s[6]=-t.anchor.x,s[1]=s[3]=-t.anchor.y,s[2]=s[4]=1-t.anchor.x,s[5]=s[7]=1-t.anchor.y),i.upload();var a=t._texture,l=a.baseTexture,h=t.tileTransform.localTransform,u=t.uvTransform,c=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;c&&(l._glTextures[e.CONTEXT_UID]?c=l.wrapMode!==r.WRAP_MODES.CLAMP:l.wrapMode===r.WRAP_MODES.CLAMP&&(l.wrapMode=r.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader;e.bindShader(d);var p=a.width,f=a.height,g=t._width,m=t._height;o.set(h.a*p/g,h.b*p/m,h.c*f/g,h.d*f/m,h.tx/g,h.ty/m),o.invert(),c?o.prepend(u.mapCoord):(d.uniforms.uMapCoord=u.mapCoord.toArray(!0),d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset),d.uniforms.uTransform=o.toArray(!0),d.uniforms.uColor=n.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,l.premultipliedAlpha),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=e.bindTexture(a),e.setBlendMode(n.utils.correctBlendMode(t.blendMode,l.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(n.ObjectRenderer);e.default=s,n.WebGLRenderer.registerPlugin("tilingSprite",s)},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),o=l(i(121)),s=i(7),a=l(i(12));function l(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,e);var r=u(this,t.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},r.font=n.font,r._text=i,r._maxWidth=0,r._maxLineHeight=0,r._letterSpacing=0,r._anchor=new o.default((function(){r.dirty=!0}),r,0,0),r.dirty=!1,r.updateText(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new r.Point,o=[],s=[],a=this.text.replace(/(?:\r\n|\r)/g,"\n"),l=a.length,h=this._maxWidth*t.size/this._font.size,u=null,c=0,d=0,p=0,f=-1,g=0,m=0,_=0,v=0;v<l;v++){var y=a.charCodeAt(v),b=a.charAt(v);if(/(?:\s)/.test(b)&&(f=v,g=c),"\r"!==b&&"\n"!==b){var x=t.chars[y];x&&(u&&x.kerning[u]&&(n.x+=x.kerning[u]),o.push({texture:x.texture,line:p,charCode:y,position:new r.Point(n.x+x.xOffset+this._letterSpacing/2,n.y+x.yOffset)}),n.x+=x.xAdvance+this._letterSpacing,c=n.x,_=Math.max(_,x.yOffset+x.texture.height),u=y,-1!==f&&h>0&&n.x>h&&(++m,r.utils.removeItems(o,1+f-m,1+v-f),v=f,f=-1,s.push(g),d=Math.max(d,g),p++,n.x=0,n.y+=t.lineHeight,u=null))}else s.push(c),d=Math.max(d,c),++p,++m,n.x=0,n.y+=t.lineHeight,u=null}var w=a.charAt(a.length-1);"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(c=g),s.push(c),d=Math.max(d,c));for(var T=[],S=0;S<=p;S++){var E=0;"right"===this._font.align?E=d-s[S]:"center"===this._font.align&&(E=(d-s[S])/2),T.push(E)}for(var P=o.length,A=this.tint,I=0;I<P;I++){var O=this._glyphs[I];O?O.texture=o[I].texture:(O=new r.Sprite(o[I].texture),this._glyphs.push(O)),O.position.x=(o[I].position.x+T[o[I].line])*i,O.position.y=o[I].position.y*i,O.scale.x=O.scale.y=i,O.tint=A,O.parent||this.addChild(O)}for(var C=P;C<this._glyphs.length;++C)this.removeChild(this._glyphs[C]);if(this._textWidth=d*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var M=0;M<P;M++)this._glyphs[M].x-=this._textWidth*this.anchor.x,this._glyphs[M].y-=this._textHeight*this.anchor.y;this._maxLineHeight=_*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var n={},o=t.getElementsByTagName("info")[0],l=t.getElementsByTagName("common")[0],h=t.getElementsByTagName("page"),u=(0,s.getResolutionOfUrl)(h[0].getAttribute("file"),a.default.RESOLUTION),c={};n.font=o.getAttribute("face"),n.size=parseInt(o.getAttribute("size"),10),n.lineHeight=parseInt(l.getAttribute("lineHeight"),10)/u,n.chars={},i instanceof r.Texture&&(i=[i]);for(var d=0;d<h.length;d++){var p=h[d].getAttribute("id"),f=h[d].getAttribute("file");c[p]=i instanceof Array?i[d]:i[f]}for(var g=t.getElementsByTagName("char"),m=0;m<g.length;m++){var _=g[m],v=parseInt(_.getAttribute("id"),10),y=_.getAttribute("page")||0,b=new r.Rectangle(parseInt(_.getAttribute("x"),10)/u+c[y].frame.x/u,parseInt(_.getAttribute("y"),10)/u+c[y].frame.y/u,parseInt(_.getAttribute("width"),10)/u,parseInt(_.getAttribute("height"),10)/u);n.chars[v]={xOffset:parseInt(_.getAttribute("xoffset"),10)/u,yOffset:parseInt(_.getAttribute("yoffset"),10)/u,xAdvance:parseInt(_.getAttribute("xadvance"),10)/u,kerning:{},texture:new r.Texture(c[y].baseTexture,b),page:y}}for(var x=t.getElementsByTagName("kerning"),w=0;w<x.length;w++){var T=x[w],S=parseInt(T.getAttribute("first"),10)/u,E=parseInt(T.getAttribute("second"),10)/u,P=parseInt(T.getAttribute("amount"),10)/u;n.chars[E]&&(n.chars[E].kerning[S]=P)}return e.fonts[n.font]=n,n},n(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(r.Container);e.default=c,c.fonts={}},function(t,e,i){"use strict";var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),r=a(i(31)),o=a(i(41)),s=i(7);function a(t){return t&&t.__esModule?t:{default:t}}var l=n.DisplayObject,h=new n.Matrix;l.prototype._cacheAsBitmap=!1,l.prototype._cacheData=!1;var u=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(l.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new u),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),l.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},l.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var a=this._filters[0].padding;i.pad(a)}i.ceil(n.settings.RESOLUTION);var l=t._activeRenderTarget,u=t.filterManager.filterStack,c=n.RenderTexture.create(i.width,i.height),d="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=d,o.default.addToCache(c.baseTexture,d),r.default.addToCache(c,d);var p=h;p.tx=-i.x,p.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,c,!0,p,!0),t.bindRenderTarget(l),t.filterManager.filterStack=u,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var f=new n.Sprite(c);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-i.x/i.width,f.anchor.y=-i.y/i.height,f.alpha=e,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},l.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},l.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var a=t.context;e.ceil(n.settings.RESOLUTION);var l=n.RenderTexture.create(e.width,e.height),u="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=u,o.default.addToCache(l.baseTexture,u),r.default.addToCache(l,u);var c=h;this.transform.localTransform.copy(c),c.invert(),c.tx-=e.x,c.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,l,!0,c,!1),t.context=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new n.Sprite(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-e.x/e.width,d.anchor.y=-e.y/e.height,d.alpha=i,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},l.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},l.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},l.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,o.default.removeFromCache(this._cacheData.textureCacheId),r.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},l.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,i){"use strict";var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,i){"use strict";var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));n.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,i){"use strict";e.__esModule=!0;var n=i(304);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return c(n).default}});var r=i(305);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return c(r).default}});var o=i(306);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return c(o).default}});var s=i(307);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return c(s).default}});var a=i(155);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return c(a).default}});var l=i(159);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return c(l).default}});var h=i(308);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return c(h).default}});var u=i(309);function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return c(u).default}})},function(t,e,i){"use strict";e.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));i(26);var r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.Filter);e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));i(26);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();o(this,e);var r=s(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return r.noise=i,r.seed=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(r.Filter);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));i(26);var o=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=new r.Matrix;i.renderable=!1;var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=i,s.maskMatrix=o,s.uniforms.mapSampler=i._texture,s.uniforms.filterMatrix=o,s.uniforms.scale={x:1,y:1},null==n&&(n=20),s.scale=new r.Point(n,n),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,i)},n(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(r.Filter);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),o=a(i(155)),s=a(i(159));function a(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i,n,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return h.blurXFilter=new o.default(i,n,a,l),h.blurYFilter=new s.default(i,n,a,l),h.padding=0,h.resolution=a||r.settings.RESOLUTION,h.quality=n||4,h.blur=i||8,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,i,!1),t.returnRenderTarget(n)},n(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(r.Filter);e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));i(26);var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=1/3,o=(0,Math.sqrt)(r),s=[i+(1-i)*r,r*(1-i)-o*n,r*(1-i)+o*n,0,0,r*(1-i)+o*n,i+r*(1-i),r*(1-i)-o*n,0,0,r*(1-i)-o*n,r*(1-i)+o*n,i+r*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-.5*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=2*t/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,n,r){var o=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,a=(255&i)/255,l=((n=n||3375104)>>16&255)/255,h=(n>>8&255)/255,u=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,l,h,u,e=e||.15,0,o-l,s-h,a-u,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},n(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(r.Filter);e.default=o,o.prototype.grayscale=o.prototype.greyscale},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6));i(26);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o(this,e);var n=s(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return n.alpha=i,n.glShaderKey="alpha",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(r.Filter);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var n=i(160);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return l(n).default}});var r=i(311);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return l(r).default}});var o=i(163);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return l(o).default}});var s=i(162);Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return l(s).default}});var a=i(161);function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return l(a).default}})},function(t,e,i){"use strict";e.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),o=u(i(160)),s=u(i(161)),a=u(i(162)),l=u(i(37)),h=u(i(163));function u(t){return t&&t.__esModule?t:{default:t}}r.utils.mixins.delayMixin(r.DisplayObject.prototype,h.default);var c={target:null,data:{global:null}},d=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n=n||{},a.renderer=i,a.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,a.interactionFrequency=n.interactionFrequency||10,a.mouse=new o.default,a.mouse.identifier=1,a.mouse.global.set(-999999),a.activeInteractionData={},a.activeInteractionData[1]=a.mouse,a.interactionDataPool=[],a.eventData=new s.default,a.interactionDOMElement=null,a.moveWhenInside=!1,a.eventsAdded=!1,a.mouseOverRenderer=!1,a.supportsTouchEvents="ontouchstart"in window,a.supportsPointerEvents=!!window.PointerEvent,a.onPointerUp=a.onPointerUp.bind(a),a.processPointerUp=a.processPointerUp.bind(a),a.onPointerCancel=a.onPointerCancel.bind(a),a.processPointerCancel=a.processPointerCancel.bind(a),a.onPointerDown=a.onPointerDown.bind(a),a.processPointerDown=a.processPointerDown.bind(a),a.onPointerMove=a.onPointerMove.bind(a),a.processPointerMove=a.processPointerMove.bind(a),a.onPointerOut=a.onPointerOut.bind(a),a.processPointerOverOut=a.processPointerOverOut.bind(a),a.onPointerOver=a.onPointerOver.bind(a),a.cursorStyles={default:"inherit",pointer:"pointer"},a.currentCursorMode=null,a.cursor=null,a._tempPoint=new r.Point,a.resolution=1,a.setTargetElement(a.renderer.view,a.renderer.resolution),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.hitTest=function(t,e){return c.target=null,c.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(c,e,null,!0),c.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(r.ticker.shared.add(this.update,this,r.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(r.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":n(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var n=void 0;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=r=e.interactive||r,l=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(n=!1,l=!1)),a=!1):e._mask&&n&&(e._mask.containsPoint(o)||(n=!1,l=!1)),l&&e.interactiveChildren&&e.children)for(var h=e.children,u=h.length-1;u>=0;u--){var c=h[u],d=this.processInteractive(t,c,i,n,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(n=!1),s=!0)}}return r&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===r.pointerType)this.emit("touchstart",s);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new a.default(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<r;s++){var a=n[s],l=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(h.data.originalEvent=t,this.processInteractive(h,this.renderer._lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,h),"mouse"===a.pointerType||"pen"===a.pointerType){var u=2===a.button;this.emit(u?"rightup"+o:"mouseup"+o,h)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,h),this.releaseInteractionDataForPointerId(a.pointerId,l))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,o=e.trackedPointers[r],s="touch"===n.pointerType,l="mouse"===n.pointerType||"pen"===n.pointerType,h=!1;if(l){var u=2===n.button,c=a.default.FLAGS,d=u?c.RIGHT_DOWN:c.LEFT_DOWN,p=void 0!==o&&o.flags&d;i?(this.dispatchEvent(e,u?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,u?"rightclick":"click",t),h=!0)):p&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(l&&!h||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],o=this.getInteractionDataForPointerId(r),s=this.configureInteractionEventForDOMEvent(this.eventData,r,o);s.data.originalEvent=t;var a="touch"!==r.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===r.pointerType&&this.emit("touchmove",s),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,s=e.trackedPointers[r];i&&!s&&(s=e.trackedPointers[r]=new a.default(r)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,i=void 0;return 1===e||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:((i=this.interactionDataPool.pop()||new o.default).identifier=e,this.activeInteractionData[e]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=1),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(l.default);e.default=d,r.WebGLRenderer.registerPlugin("interaction",d),r.CanvasRenderer.registerPlugin("interaction",d)},function(t,e,i){"use strict";e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var n=i(164);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return h(n).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return n.parse}});var r=i(169);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return h(r).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return r.getResourcePath}});var o=i(170);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return h(o).default}});var s=i(49);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return s.Resource}});var a=h(i(151)),l=h(i(314));function h(t){return t&&t.__esModule?t:{default:t}}e.Loader=l.default;var u=new l.default;u.destroy=function(){},e.shared=u;var c=a.default.prototype;c._loader=null,Object.defineProperty(c,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?u:new l.default}return this._loader}}),c._parentDestroy=c.destroy,c.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},function(t,e,i){"use strict";e.__esModule=!0,e.Loader=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=h(i(165)),s=h(i(166)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(167)),l=i(93);function h(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=/(#[\w-]+)?$/,d=e.Loader=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;u(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=a.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default;for(var r=0;r<t._defaultBeforeMiddleware.length;++r)this.pre(t._defaultBeforeMiddleware[r]);for(var s=0;s<t._defaultAfterMiddleware.length;++s)this.use(t._defaultAfterMiddleware[s])}return t.prototype.add=function(t,e,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if("object"===(void 0===t?"undefined":n(t))&&(r=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(r=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new l.Resource(t,e,i),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var s=i.parentResource,a=[],h=0;h<s.children.length;++h)s.children[h].isComplete||a.push(s.children[h]);var u=s.progressChunk*(a.length+1)/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=u;for(var c=0;c<a.length;++c)a[c].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,s.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=c.exec(i)[0];-1!==(i=i.substr(0,i.length-n.length)).indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,a.eachSeries(this._beforeMiddleware,(function(e,n){e.call(i,t,(function(){n(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),a.eachSeries(this._afterMiddleware,(function(i,n){i.call(e,t,n)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},r(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();d._defaultBeforeMiddleware=[],d._defaultAfterMiddleware=[],d.pre=function(t){return d._defaultBeforeMiddleware.push(t),d},d.use=function(t){return d._defaultAfterMiddleware.push(t),d}},function(t,e,i){"use strict";e.__esModule=!0;var n=h(i(49)),r=i(315),o=h(i(37)),s=h(i(170)),a=h(i(169)),l=h(i(164));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,n));o.default.call(r);for(var s=0;s<e._pixiMiddleware.length;++s)r.use(e._pixiMiddleware[s]());return r.onStart.add((function(t){return r.emit("start",t)})),r.onProgress.add((function(t,e){return r.emit("progress",t,e)})),r.onError.add((function(t,e,i){return r.emit("error",t,e,i)})),r.onLoad.add((function(t,e){return r.emit("load",t,e)})),r.onComplete.add((function(t,e){return r.emit("complete",t,e)})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(n.default);for(var c in e.default=u,o.default.prototype)u.prototype[c]=o.default.prototype[c];u._pixiMiddleware=[r.blobMiddlewareFactory,s.default,a.default,l.default];var d=n.default.Resource;d.setExtensionXhrType("fnt",d.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,i){"use strict";e.__esModule=!0,e.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===n.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=n.Resource.TYPE.IMAGE,void(t.data.onload=function(){o.revokeObjectURL(i),t.data.onload=null,e()})}}else{var s=t.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return t.data=new Image,t.data.src="data:"+s+";base64,"+(0,r.encodeBinary)(t.xhr.responseText),t.type=n.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}};var n=i(93),r=i(168),o=window.URL||window.webkitURL},function(t,e,i){"use strict";e.__esModule=!0;var n=i(50);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return h(n).default}});var r=i(317);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return h(r).default}});var o=i(318);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return h(o).default}});var s=i(171);Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return h(s).default}});var a=i(319);Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return h(a).default}});var l=i(320);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return h(l).default}})},function(t,e,i){"use strict";e.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),r=s(i(18)),o=s(i(50));i(26);function s(t){return t&&t.__esModule?t:{default:t}}var a=n.Matrix.IDENTITY,l=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.shader=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new n.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,s=t._texture;if(s.valid){var l=t._glDatas[e.CONTEXT_UID];l||(e.bindVao(null),(l={shader:this.shader,vertexBuffer:r.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:r.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:r.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty}).vao=new r.default.VertexArrayObject(i).addIndex(l.indexBuffer).addAttribute(l.vertexBuffer,l.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(l.uvBuffer,l.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=l),e.bindVao(l.vao),t.dirty!==l.dirty&&(l.dirty=t.dirty,l.uvBuffer.upload(t.uvs)),t.indexDirty!==l.indexDirty&&(l.indexDirty=t.indexDirty,l.indexBuffer.upload(t.indices)),t.vertexDirty!==l.vertexDirty&&(l.vertexDirty=t.vertexDirty,l.vertexBuffer.upload(t.vertices)),e.bindShader(l.shader),l.shader.uniforms.uSampler=e.bindTexture(s),e.state.setBlendMode(n.utils.correctBlendMode(t.blendMode,s.baseTexture.premultipliedAlpha)),l.shader.uniforms.uTransform&&(t.uploadUvTransform?l.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):l.shader.uniforms.uTransform=a.toArray(!0)),l.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),l.shader.uniforms.uColor=n.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,l.shader.uniforms.uColor,s.baseTexture.premultipliedAlpha);var h=t.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;l.vao.draw(h,t.indices.length,0)}},e}(n.ObjectRenderer);e.default=l,n.WebGLRenderer.registerPlugin("mesh",l)},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),o=i(50),s=(n=o)&&n.__esModule?n:{default:n};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldTransform,r=e.resolution;e.roundPixels?i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):i.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var n=2*i;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,n=0;n<i;n+=3){var r=2*e[n],o=2*e[n+1],s=2*e[n+2];this._renderDrawTriangle(t,r,o,s)}},t.prototype._renderDrawTriangle=function(t,e,i,n){var r=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var l=a.baseTexture,h=l.source,u=l.width,c=l.height,d=void 0,p=void 0,f=void 0,g=void 0,m=void 0,_=void 0;if(t.uploadUvTransform){var v=t._uvTransform.mapCoord;d=(o[e]*v.a+o[e+1]*v.c+v.tx)*l.width,p=(o[i]*v.a+o[i+1]*v.c+v.tx)*l.width,f=(o[n]*v.a+o[n+1]*v.c+v.tx)*l.width,g=(o[e]*v.b+o[e+1]*v.d+v.ty)*l.height,m=(o[i]*v.b+o[i+1]*v.d+v.ty)*l.height,_=(o[n]*v.b+o[n+1]*v.d+v.ty)*l.height}else d=o[e]*l.width,p=o[i]*l.width,f=o[n]*l.width,g=o[e+1]*l.height,m=o[i+1]*l.height,_=o[n+1]*l.height;var y=s[e],b=s[i],x=s[n],w=s[e+1],T=s[i+1],S=s[n+1],E=t.canvasPadding/this.renderer.resolution;if(E>0){var P=E/Math.abs(t.worldTransform.a),A=E/Math.abs(t.worldTransform.d),I=(y+b+x)/3,O=(w+T+S)/3,C=y-I,M=w-O,R=Math.sqrt(C*C+M*M);y=I+C/R*(R+P),w=O+M/R*(R+A),M=T-O,b=I+(C=b-I)/(R=Math.sqrt(C*C+M*M))*(R+P),T=O+M/R*(R+A),M=S-O,x=I+(C=x-I)/(R=Math.sqrt(C*C+M*M))*(R+P),S=O+M/R*(R+A)}r.save(),r.beginPath(),r.moveTo(y,w),r.lineTo(b,T),r.lineTo(x,S),r.closePath(),r.clip();var k=d*m+g*f+p*_-m*f-g*p-d*_,L=y*m+g*x+b*_-m*x-g*b-y*_,D=d*b+y*f+p*x-b*f-y*p-d*x,N=d*m*x+g*b*f+y*p*_-y*m*f-g*p*x-d*b*_,F=w*m+g*S+T*_-m*S-g*T-w*_,B=d*T+w*f+p*S-T*f-w*p-d*S,U=d*m*S+g*T*f+w*p*_-w*m*f-g*p*S-d*T*_;r.transform(L/k,F/k,D/k,B/k,N/k,U/k),r.drawImage(h,0,0,u*l.resolution,c*l.resolution,0,0,u,c),r.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;r<n-2;++r){var o=2*r,s=i[o],a=i[o+1],l=i[o+2],h=i[o+3],u=i[o+4],c=i[o+5];e.moveTo(s,a),e.lineTo(l,h),e.lineTo(u,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=a,r.CanvasRenderer.registerPlugin("mesh",a)},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=s(i(171)),o=s(i(60));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(i,n,r,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,4,4));return a._origWidth=i.orig.width,a._origHeight=i.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=void 0!==n?n:10,a._rightWidth=void 0!==o?o:10,a._topHeight=void 0!==r?r:10,a._bottomHeight=void 0!==s?s:10,a._cachedTint=16777215,a._tintedTexture=null,a._canvasUvs=null,a.refresh(!0),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,i=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform,n=t.resolution,r=16777215!==this.tint,s=this._texture;r&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=o.default.getTintedTexture(this,this.tint));var a=r?this._tintedTexture:s.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var l=this.vertices,h=this._canvasUvs,u=r?0:s.frame.x,c=r?0:s.frame.y,d=u+s.frame.width,p=c+s.frame.height;h[0]=u,h[1]=u+this._leftWidth,h[2]=d-this._rightWidth,h[3]=d,h[4]=c,h[5]=c+this._topHeight,h[6]=p-this._bottomHeight,h[7]=p;for(var f=0;f<8;f++)h[f]*=s.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.roundPixels?e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n);for(var g=0;g<3;g++)for(var m=0;m<3;m++){var _=2*m+8*g,v=Math.max(1,h[m+1]-h[m]),y=Math.max(1,h[g+5]-h[g+4]),b=Math.max(1,l[_+10]-l[_]),x=Math.max(1,l[_+11]-l[_+1]);e.drawImage(a,h[m],h[g+4],v,y,l[_],l[_+1],b,x)}},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},n(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(r.default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(50);var o=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.points=n,r.vertices=new Float32Array(4*n.length),r.uvs=new Float32Array(4*n.length),r.colors=new Float32Array(2*n.length),r.indices=new Uint16Array(2*n.length),r.autoUpdate=!0,r.refresh(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var r=t.length,o=1;o<r;o++){var s=4*o,a=o/(r-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,n[s=2*o]=1,n[s+1]=1,i[s=2*o]=s,i[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],i=void 0,n=0,r=0,o=this.vertices,s=t.length,a=0;a<s;a++){var l=t[a],h=4*a;r=-((i=a<t.length-1?t[a+1]:l).x-e.x),n=i.y-e.y;var u=10*(1-a/(s-1));u>1&&(u=1);var c=Math.sqrt(n*n+r*r),d=this._texture.height/2;n/=c,r/=c,n*=d,r*=d,o[h]=l.x+n,o[h+1]=l.y+r,o[h+2]=l.x-n,o[h+3]=l.y-r,e=l}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(((n=r)&&n.__esModule?n:{default:n}).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var n=i(322);Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return o(n).default}});var r=i(323);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return o(r).default}})},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),o=i(7);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,n=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];s(this,e);var h=a(this,t.call(this)),u=16384;return o>u&&(o=u),o>i&&(o=i),h._properties=[!1,!0,!1,!1,!1],h._maxSize=i,h._batchSize=o,h._glBuffers={},h._bufferUpdateIDs=[],h._updateID=0,h.interactiveChildren=!1,h.blendMode=r.BLEND_MODES.NORMAL,h.autoResize=l,h.roundPixels=!0,h.baseTexture=null,h.setProperties(n),h._tint=0,h.tintRgb=new Float32Array(4),h.tint=16777215,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,n=!0,r=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(h.visible){var u=h._texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),n=!1),r=h.anchor.x*(-u.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-u.height*h.scale.y)+h.position.y+.5,s=u.width*h.scale.x,a=u.height*h.scale.y;else{n||(n=!0),h.displayObjectUpdateTransform();var c=h.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),r=h.anchor.x*-u.width+.5,o=h.anchor.y*-u.height+.5,s=u.width,a=u.height}var d=h._texture.baseTexture.resolution;e.drawImage(h._texture.baseTexture.source,u.x*d,u.y*d,u.width*d,u.height*d,r*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},n(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,o.hex2rgb)(t,this.tintRgb)}}]),e}(r.Container);e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),r=a(i(324)),o=a(i(325)),s=i(7);function a(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.shader=null,r.indexBuffer=null,r.properties=null,r.tempMatrix=new n.Matrix,r.CONTEXT_UID=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new r.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,o=this.renderer,s=e.length;if(0!==s){s>i&&(s=i);var a=t._glBuffers[o.CONTEXT_UID];a||(a=t._glBuffers[o.CONTEXT_UID]=this.generateBuffers(t));var l=e[0]._texture.baseTexture;this.renderer.setBlendMode(n.utils.correctBlendMode(t.blendMode,l.premultipliedAlpha));var h=o.gl,u=t.worldTransform.copy(this.tempMatrix);u.prepend(o._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uColor=n.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,l.premultipliedAlpha),this.shader.uniforms.uSampler=o.bindTexture(l);for(var c=!1,d=0,p=0;d<s;d+=r,p+=1){var f=s-d;if(f>r&&(f=r),p>=a.length){if(!t.autoResize)break;a.push(this._generateOneMoreBuffer(t))}var g=a[p];g.uploadDynamic(e,d,f);var m=t._bufferUpdateIDs[p]||0;(c=c||g._updateID<m)&&(g._updateID=t._updateID,g.uploadStatic(e,d,f)),o.bindVao(g.vao),g.vao.draw(h.TRIANGLES,6*f)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],n=t._maxSize,r=t._batchSize,s=t._properties,a=0;a<n;a+=r)i.push(new o.default(e,this.properties,s,r));return i},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,i=t._batchSize,n=t._properties;return new o.default(e,this.properties,n,i)},e.prototype.uploadVertices=function(t,e,i,n,r,o){for(var s=0,a=0,l=0,h=0,u=0;u<i;++u){var c=t[e+u],d=c._texture,p=c.scale.x,f=c.scale.y,g=d.trim,m=d.orig;g?(s=(a=g.x-c.anchor.x*m.width)+g.width,l=(h=g.y-c.anchor.y*m.height)+g.height):(s=m.width*(1-c.anchor.x),a=m.width*-c.anchor.x,l=m.height*(1-c.anchor.y),h=m.height*-c.anchor.y),n[o]=a*p,n[o+1]=h*f,n[o+r]=s*p,n[o+r+1]=h*f,n[o+2*r]=s*p,n[o+2*r+1]=l*f,n[o+3*r]=a*p,n[o+3*r+1]=l*f,o+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+r]=a.x,n[o+r+1]=a.y,n[o+2*r]=a.x,n[o+2*r+1]=a.y,n[o+3*r]=a.x,n[o+3*r+1]=a.y,o+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,o){for(var s=0;s<i;s++){var a=t[e+s].rotation;n[o]=a,n[o+r]=a,n[o+2*r]=a,n[o+3*r]=a,o+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,o){for(var s=0;s<i;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+r]=a.x1,n[o+r+1]=a.y1,n[o+2*r]=a.x2,n[o+2*r+1]=a.y2,n[o+3*r]=a.x3,n[o+3*r+1]=a.y3,o+=4*r):(n[o]=0,n[o+1]=0,n[o+r]=0,n[o+r+1]=0,n[o+2*r]=0,n[o+2*r+1]=0,n[o+3*r]=0,n[o+3*r+1]=0,o+=4*r)}},e.prototype.uploadTint=function(t,e,i,n,r,o){for(var a=0;a<i;++a){var l=t[e+a],h=l._texture.baseTexture.premultipliedAlpha,u=l.alpha,c=u<1&&h?(0,s.premultiplyTint)(l._tintRGB,u):l._tintRGB+(255*u<<24);n[o]=c,n[o+r]=c,n[o+2*r]=c,n[o+3*r]=c,o+=4*r}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(n.ObjectRenderer);e.default=l,n.WebGLRenderer.registerPlugin("particle",l)},function(t,e,i){"use strict";e.__esModule=!0;var n,r=i(48);var o=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((n=r)&&n.__esModule?n:{default:n}).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var n=o(i(18)),r=o(i(92));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<i.length;++o){var s=i[o];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},n[o]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,r.default)(this.size),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var o=this.dynamicProperties[i];o.offset=e,e+=o.size,this.dynamicStride+=o.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=n.default.GLBuffer.createVertexBuffer(t,s,t.STREAM_DRAW);var a=0;this.staticStride=0;for(var l=0;l<this.staticProperties.length;++l){var h=this.staticProperties[l];h.offset=a,a+=h.size,this.staticStride+=h.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=n.default.GLBuffer.createVertexBuffer(t,u,t.STATIC_DRAW),this.vao=new n.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*d.offset):this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.FLOAT,!1,4*this.dynamicStride,4*d.offset)}for(var p=0;p<this.staticProperties.length;++p){var f=this.staticProperties[p];f.unsignedByte?this.vao.addAttribute(this.staticBuffer,f.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*f.offset):this.vao.addAttribute(this.staticBuffer,f.attribute,t.FLOAT,!1,4*this.staticStride,4*f.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,r.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,r.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var n=i(327);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return l(n).default}});var r=i(328);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return l(r).default}});var o=i(94);Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return l(o).default}});var s=i(172);Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return l(s).default}});var a=i(329);function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return l(a).default}})},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),o=i(94);var s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.uploadHookHelper=n.renderer,n.registerFindHook(h),n.registerUploadHook(a),n.registerUploadHook(l),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((n=o)&&n.__esModule?n:{default:n}).default);function a(t,e){return e instanceof r.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function l(t,e){return e instanceof r.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function h(t,e){return t instanceof r.Graphics&&(e.push(t),!0)}e.default=s,r.WebGLRenderer.registerPlugin("prepare",s)},function(t,e,i){"use strict";e.__esModule=!0;var n,r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),o=i(94),s=(n=o)&&n.__esModule?n:{default:n};var a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=16,n.canvas.height=16,n.ctx=n.canvas.getContext("2d"),n.registerUploadHook(l),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(s.default);function l(t,e){if(e instanceof r.BaseTexture){var i=e.source,n=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),o=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,n,o,0,0,t.canvas.width,t.canvas.height),!0}return!1}e.default=a,r.CanvasRenderer.registerPlugin("prepare",a)},function(t,e,i){"use strict";e.__esModule=!0;var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();e.default=n},function(t,e,i){var n=i(13),r=i(176),o=n.WeakMap;t.exports="function"==typeof o&&/native code/.test(r(o))},function(t,e,i){var n=i(20),r=i(332),o=i(65),s=i(28);t.exports=function(t,e){for(var i=r(e),a=s.f,l=o.f,h=0;h<i.length;h++){var u=i[h];n(t,u)||a(t,u,l(e,u))}}},function(t,e,i){var n=i(69),r=i(102),o=i(181),s=i(29);t.exports=n("Reflect","ownKeys")||function(t){var e=r.f(s(t)),i=o.f;return i?e.concat(i(t)):e}},function(t,e,i){var n=i(13);t.exports=n},function(t,e,i){var n=i(11),r=/#|\.prototype\./,o=function(t,e){var i=a[s(t)];return i==h||i!=l&&("function"==typeof e?n(e):!!e)},s=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},a=o.data={},l=o.NATIVE="N",h=o.POLYFILL="P";t.exports=o},function(t,e,i){var n=i(19),r=i(104),o=i(52),s=i(96).f,a=function(t){return function(e){for(var i,a=o(e),l=r(a),h=l.length,u=0,c=[];h>u;)i=l[u++],n&&!s.call(a,i)||c.push(t?[i,a[i]]:a[i]);return c}};t.exports={entries:a(!0),values:a(!1)}},function(t,e,i){"use strict";var n=i(182),r=i(184),o=i(29),s=i(32),a=i(185),l=i(341),h=i(23),u=i(186),c=i(71),d=i(11),p=[].push,f=Math.min,g=!d((function(){return!RegExp(4294967295,"y")}));n("split",2,(function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(s(this)),o=void 0===i?4294967295:i>>>0;if(0===o)return[];if(void 0===t)return[n];if(!r(t))return e.call(n,t,o);for(var a,l,h,u=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,g=new RegExp(t.source,d+"g");(a=c.call(g,n))&&!((l=g.lastIndex)>f&&(u.push(n.slice(f,a.index)),a.length>1&&a.index<n.length&&p.apply(u,a.slice(1)),h=a[0].length,f=l,u.length>=o));)g.lastIndex===a.index&&g.lastIndex++;return f===n.length?!h&&g.test("")||u.push(""):u.push(n.slice(f)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var r=s(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,r,i):n.call(String(r),e,i)},function(t,r){var s=i(n,t,this,r,n!==e);if(s.done)return s.value;var c=o(t),d=String(this),p=a(c,RegExp),m=c.unicode,_=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),v=new p(g?c:"^(?:"+c.source+")",_),y=void 0===r?4294967295:r>>>0;if(0===y)return[];if(0===d.length)return null===u(v,d)?[d]:[];for(var b=0,x=0,w=[];x<d.length;){v.lastIndex=g?x:0;var T,S=u(v,g?d:d.slice(x));if(null===S||(T=f(h(v.lastIndex+(g?0:x)),d.length))===b)x=l(d,x,m);else{if(w.push(d.slice(b,x)),w.length===y)return w;for(var E=1;E<=S.length-1;E++)if(w.push(S[E]),w.length===y)return w;x=b=T}}return w.push(d.slice(b)),w}]}),!g)},function(t,e,i){"use strict";var n=i(17),r=i(71);n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},function(t,e,i){"use strict";var n=i(29);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){"use strict";var n=i(11);function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},function(t,e,i){var n=i(183);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(t,e,i){"use strict";var n=i(342).charAt;t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},function(t,e,i){var n=i(38),r=i(32),o=function(t){return function(e,i){var o,s,a=String(r(e)),l=n(i),h=a.length;return l<0||l>=h?t?"":void 0:(o=a.charCodeAt(l))<55296||o>56319||l+1===h||(s=a.charCodeAt(l+1))<56320||s>57343?t?a.charAt(l):o:t?a.slice(l,l+2):s-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,i){"use strict";var n=i(52),r=i(345),o=i(55),s=i(67),a=i(348),l=s.set,h=s.getterFor("Array Iterator");t.exports=a(Array,"Array",(function(t,e){l(this,{type:"Array Iterator",target:n(t),index:0,kind:e})}),(function(){var t=h(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,i){var n=i(14),r=i(106),o=i(28),s=n("unscopables"),a=Array.prototype;null==a[s]&&o.f(a,s,{configurable:!0,value:r(null)}),t.exports=function(t){a[s][t]=!0}},function(t,e,i){var n=i(19),r=i(28),o=i(29),s=i(104);t.exports=n?Object.defineProperties:function(t,e){o(t);for(var i,n=s(e),a=n.length,l=0;a>l;)r.f(t,i=n[l++],e[i]);return t}},function(t,e,i){var n=i(69);t.exports=n("document","documentElement")},function(t,e,i){"use strict";var n=i(17),r=i(349),o=i(72),s=i(56),a=i(107),l=i(22),h=i(54),u=i(14),c=i(68),d=i(55),p=i(187),f=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,m=u("iterator"),_=function(){return this};t.exports=function(t,e,i,u,p,v,y){r(i,e,u);var b,x,w,T=function(t){if(t===p&&I)return I;if(!g&&t in P)return P[t];switch(t){case"keys":case"values":case"entries":return function(){return new i(this,t)}}return function(){return new i(this)}},S=e+" Iterator",E=!1,P=t.prototype,A=P[m]||P["@@iterator"]||p&&P[p],I=!g&&A||T(p),O="Array"==e&&P.entries||A;if(O&&(b=o(O.call(new t)),f!==Object.prototype&&b.next&&(c||o(b)===f||(s?s(b,f):"function"!=typeof b[m]&&l(b,m,_)),a(b,S,!0,!0),c&&(d[S]=_))),"values"==p&&A&&"values"!==A.name&&(E=!0,I=function(){return A.call(this)}),c&&!y||P[m]===I||l(P,m,I),d[e]=I,p)if(x={values:T("values"),keys:v?I:T("keys"),entries:T("entries")},y)for(w in x)!g&&!E&&w in P||h(P,w,x[w]);else n({target:e,proto:!0,forced:g||E},x);return x}},function(t,e,i){"use strict";var n=i(187).IteratorPrototype,r=i(106),o=i(51),s=i(107),a=i(55),l=function(){return this};t.exports=function(t,e,i){var h=e+" Iterator";return t.prototype=r(n,{next:o(1,i)}),s(t,h,!1,!0),a[h]=l,t}},function(t,e,i){var n=i(11);t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,i){var n=i(27);t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,i){(function(t){!function(i,n){"use strict";var r={};i.PubSub=r;var o=i.define;!function(t){var e={},i=-1;function n(t,e,i){try{t(e,i)}catch(t){setTimeout(function(t){return function(){throw t}}(t),0)}}function r(t,e,i){t(e,i)}function o(t,i,o,s){var a,l=e[i],h=s?r:n;if(e.hasOwnProperty(i))for(a in l)l.hasOwnProperty(a)&&h(l[a],t,o)}function s(t){var i=String(t);return Boolean(e.hasOwnProperty(i)&&function(t){var e;for(e in t)if(t.hasOwnProperty(e))return!0;return!1}(e[i]))}function a(t,e,i,n){var r=function(t,e,i){return function(){var n=String(t),r=n.lastIndexOf(".");for(o(t,t,e,i);-1!==r;)r=(n=n.substr(0,r)).lastIndexOf("."),o(t,n,e,i);o(t,"*",e,i)}}(t="symbol"==typeof t?t.toString():t,e,n);return!!function(t){for(var e=String(t),i=s(e)||s("*"),n=e.lastIndexOf(".");!i&&-1!==n;)n=(e=e.substr(0,n)).lastIndexOf("."),i=s(e);return i}(t)&&(!0===i?r():setTimeout(r,0),!0)}t.publish=function(e,i){return a(e,i,!1,t.immediateExceptions)},t.publishSync=function(e,i){return a(e,i,!0,t.immediateExceptions)},t.subscribe=function(t,n){if("function"!=typeof n)return!1;t="symbol"==typeof t?t.toString():t,e.hasOwnProperty(t)||(e[t]={});var r="uid_"+String(++i);return e[t][r]=n,r},t.subscribeAll=function(e){return t.subscribe("*",e)},t.subscribeOnce=function(e,i){var n=t.subscribe(e,(function(){t.unsubscribe(n),i.apply(this,arguments)}));return t},t.clearAllSubscriptions=function(){e={}},t.clearSubscriptions=function(t){var i;for(i in e)e.hasOwnProperty(i)&&0===i.indexOf(t)&&delete e[i]},t.countSubscriptions=function(t){var i,n=0;for(i in e)e.hasOwnProperty(i)&&0===i.indexOf(t)&&n++;return n},t.getSubscriptions=function(t){var i,n=[];for(i in e)e.hasOwnProperty(i)&&0===i.indexOf(t)&&n.push(i);return n},t.unsubscribe=function(i){var n,r,o,s="string"==typeof i&&(e.hasOwnProperty(i)||function(t){var i;for(i in e)if(e.hasOwnProperty(i)&&0===i.indexOf(t))return!0;return!1}(i)),a=!s&&"string"==typeof i,l="function"==typeof i,h=!1;if(!s){for(n in e)if(e.hasOwnProperty(n)){if(r=e[n],a&&r[i]){delete r[i],h=i;break}if(l)for(o in r)r.hasOwnProperty(o)&&r[o]===i&&(delete r[o],h=!0)}return h}t.clearSubscriptions(i)}}(r),"function"==typeof o&&o.amd?o((function(){return r})):(void 0!==t&&t.exports&&(e=t.exports=r),e.PubSub=r,t.exports=e=r)}("object"==typeof window&&window||this)}).call(this,i(137)(t))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(21),r=i(42),o=i(189),s=function(){function t(t){this.toStrF=t||n.defaultToString,this.dictionary=new r.default(this.toStrF),this.nElements=0}return t.prototype.add=function(t,e){if(void 0===e&&(e=1),n.isUndefined(t)||e<=0)return!1;if(this.contains(t))this.dictionary.getValue(t).copies+=e;else{var i={value:t,copies:e};this.dictionary.setValue(t,i)}return this.nElements+=e,!0},t.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},t.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.prototype.remove=function(t,e){if(void 0===e&&(e=1),n.isUndefined(t)||e<=0)return!1;if(this.contains(t)){var i=this.dictionary.getValue(t);return e>i.copies?this.nElements-=i.copies:this.nElements-=e,i.copies-=e,i.copies<=0&&this.dictionary.remove(t),!0}return!1},t.prototype.toArray=function(){for(var t=[],e=0,i=this.dictionary.values();e<i.length;e++)for(var n=i[e],r=n.value,o=n.copies,s=0;s<o;s++)t.push(r);return t},t.prototype.toSet=function(){for(var t=new o.default(this.toStrF),e=0,i=this.dictionary.values();e<i.length;e++){var n=i[e].value;t.add(n)}return t},t.prototype.forEach=function(t){this.dictionary.forEach((function(e,i){for(var n=i.value,r=i.copies,o=0;o<r;o++)if(!1===t(n))return!1;return!0}))},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return 0===this.nElements},t.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},t}();e.default=s},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(i(190).default);e.default=o},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(42),s=i(21),a=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),l=function(){function t(){this.key=null,this.value=null}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}();var h=function(t){function e(e){var i=t.call(this,e)||this;return i.head=new l,i.tail=new l,i.head.next=i.tail,i.tail.prev=i.head,i}return r(e,t),e.prototype.appendToTail=function(t){var e=this.tail.prev;e.next=t,t.prev=e,t.next=this.tail,this.tail.prev=t},e.prototype.getLinkedDictionaryPair=function(t){if(!s.isUndefined(t)){var e="$"+this.toStr(t);return this.table[e]}},e.prototype.getValue=function(t){var e=this.getLinkedDictionaryPair(t);if(!s.isUndefined(e))return e.value},e.prototype.remove=function(e){var i=this.getLinkedDictionaryPair(e);if(!s.isUndefined(i))return t.prototype.remove.call(this,e),i.unlink(),i.value},e.prototype.clear=function(){t.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},e.prototype.replace=function(t,e){var i="$"+this.toStr(e.key);e.next=t.next,e.prev=t.prev,this.remove(t.key),e.prev.next=e,e.next.prev=e,this.table[i]=e,++this.nElements},e.prototype.setValue=function(t,e){if(!s.isUndefined(t)&&!s.isUndefined(e)){var i=this.getLinkedDictionaryPair(t),n=new a(t,e),r="$"+this.toStr(t);return s.isUndefined(i)?(this.appendToTail(n),this.table[r]=n,void++this.nElements):(this.replace(i,n),i.value)}},e.prototype.keys=function(){var t=[];return this.forEach((function(e,i){t.push(e)})),t},e.prototype.values=function(){var t=[];return this.forEach((function(e,i){t.push(i)})),t},e.prototype.forEach=function(t){for(var e=this.head.next;e.next;){if(!1===t(e.key,e.value))return;e=e.next}},e}(o.default);e.default=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(21),r=i(42),o=i(57),s=function(){function t(t,e,i){void 0===i&&(i=!1),this.dict=new r.default(t),this.equalsF=e||n.defaultEquals,this.allowDuplicate=i}return t.prototype.getValue=function(t){var e=this.dict.getValue(t);return n.isUndefined(e)?[]:o.copy(e)},t.prototype.setValue=function(t,e){if(n.isUndefined(t)||n.isUndefined(e))return!1;var i=this.dict.getValue(t);return n.isUndefined(i)?(this.dict.setValue(t,[e]),!0):!(!this.allowDuplicate&&o.contains(i,e,this.equalsF))&&(i.push(e),!0)},t.prototype.remove=function(t,e){if(n.isUndefined(e)){var i=this.dict.remove(t);return!n.isUndefined(i)}var r=this.dict.getValue(t);return!(n.isUndefined(r)||!o.remove(r,e,this.equalsF))&&(0===r.length&&this.dict.remove(t),!0)},t.prototype.keys=function(){return this.dict.keys()},t.prototype.values=function(){for(var t=[],e=0,i=this.dict.values();e<i.length;e++)for(var n=0,r=i[e];n<r.length;n++){var o=r[n];t.push(o)}return t},t.prototype.containsKey=function(t){return this.dict.containsKey(t)},t.prototype.clear=function(){this.dict.clear()},t.prototype.size=function(){return this.dict.size()},t.prototype.isEmpty=function(){return this.dict.isEmpty()},t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(21),r=i(192),o=function(){function t(t){this.heap=new r.default(n.reverseCompareFunction(t))}return t.prototype.enqueue=function(t){return this.heap.add(t)},t.prototype.add=function(t){return this.heap.add(t)},t.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}},t.prototype.peek=function(){return this.heap.peek()},t.prototype.contains=function(t){return this.heap.contains(t)},t.prototype.isEmpty=function(){return this.heap.isEmpty()},t.prototype.size=function(){return this.heap.size()},t.prototype.clear=function(){this.heap.clear()},t.prototype.forEach=function(t){this.heap.forEach(t)},t}();e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(108),r=function(){function t(){this.list=new n.default}return t.prototype.push=function(t){return this.list.add(t,0)},t.prototype.add=function(t){return this.list.add(t,0)},t.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.prototype.peek=function(){return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.isEmpty()},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();e.default=r},function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER",t[t.INSIDE_AT_END=2]="INSIDE_AT_END",t[t.INSIDE_AT_START=3]="INSIDE_AT_START"}(n||(n={}));var r=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.rootIds=t,this.nodes=e,this.initRootIds(),this.initNodes()}return t.prototype.initRootIds=function(){for(var t=0,e=this.rootIds;t<e.length;t++){var i=e[t];this.createEmptyNodeIfNotExist(i)}},t.prototype.initNodes=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var e=0,i=this.nodes[t];e<i.length;e++){var n=i[e];this.createEmptyNodeIfNotExist(n)}},t.prototype.createEmptyNodeIfNotExist=function(t){this.nodes[t]||(this.nodes[t]=[])},t.prototype.getRootIds=function(){return this.rootIds.slice()},t.prototype.getNodes=function(){var t={};for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(t[e]=this.nodes[e].slice());return t},t.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},t.prototype.toObject=function(){return this.getObject()},t.prototype.flatten=function(){for(var t=this,e=[],i=0;i<this.rootIds.length;i++){var n=this.rootIds[i];e.push({id:n,level:0,hasParent:!1,childrenCount:0}),l(n,this.nodes,e,0)}for(var r=0,o=e;r<o.length;r++){var s=o[r];s.childrenCount=a(s.id)}return e;function a(e){return t.nodes[e]?t.nodes[e].length:0}function l(t,e,i,n){if(void 0===n&&(n=0),t&&e&&i&&e[t]){n++;for(var r=e[t],o=0;o<r.length;o++){var s=r[o];i.push({id:s,level:n,hasParent:!0}),l(s,e,i,n)}n--}}},t.prototype.moveIdBeforeId=function(t,e){return this.moveId(t,e,n.BEFORE)},t.prototype.moveIdAfterId=function(t,e){return this.moveId(t,e,n.AFTER)},t.prototype.moveIdIntoId=function(t,e,i){return void 0===i&&(i=!0),i?this.moveId(t,e,n.INSIDE_AT_START):this.moveId(t,e,n.INSIDE_AT_END)},t.prototype.swapRootIdWithRootId=function(t,e){var i=this.findRootId(t),n=this.findRootId(e);this.swapRootPositionWithRootPosition(i,n)},t.prototype.swapRootPositionWithRootPosition=function(t,e){var i=this.rootIds[e];this.rootIds[e]=this.rootIds[t],this.rootIds[t]=i},t.prototype.deleteId=function(t){this.rootDeleteId(t),this.nodeAndSubNodesDelete(t),this.nodeRefrencesDelete(t)},t.prototype.insertIdBeforeId=function(t,e){var i=this.findRootId(t);for(var n in i>-1&&this.insertIdIntoRoot(e,i),this.nodes)if(this.nodes.hasOwnProperty(n)){var r=this.findNodeId(n,t);r>-1&&this.insertIdIntoNode(n,e,r)}},t.prototype.insertIdAfterId=function(t,e){var i=this.findRootId(t);for(var n in i>-1&&this.insertIdIntoRoot(e,i+1),this.nodes)if(this.nodes.hasOwnProperty(n)){var r=this.findNodeId(n,t);r>-1&&this.insertIdIntoNode(n,e,r+1)}},t.prototype.insertIdIntoId=function(t,e){this.nodeInsertAtEnd(t,e),this.nodes[e]=[]},t.prototype.insertIdIntoRoot=function(t,e){if(void 0===e)this.rootInsertAtEnd(t);else if(e<0){var i=this.rootIds.length;this.rootIds.splice(e+i+1,0,t)}else this.rootIds.splice(e,0,t);this.nodes[t]=this.nodes[t]||[]},t.prototype.insertIdIntoNode=function(t,e,i){if(this.nodes[t]=this.nodes[t]||[],this.nodes[e]=this.nodes[e]||[],void 0===i)this.nodeInsertAtEnd(t,e);else if(i<0){var n=this.nodes[t].length;this.nodes[t].splice(i+n+1,0,e)}else this.nodes[t].splice(i,0,e)},t.prototype.moveId=function(t,e,i){var r=t,o=this.findRootId(r);for(var s in this.nodes[e]&&e,this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,e);break}var a=e,l=this.findRootId(a);for(var s in this.nodes[e]&&e,this.nodes)if(this.nodes.hasOwnProperty(s)){this.findNodeId(s,e);break}if(o>-1)if(l>-1)switch(this.rootDelete(o),l>o&&l--,i){case n.BEFORE:this.insertIdIntoRoot(r,l);break;case n.AFTER:this.insertIdIntoRoot(r,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}else for(var s in this.rootDelete(o),this.nodes){if(this.nodes.hasOwnProperty(s))if((h=this.findNodeId(s,a))>-1){switch(i){case n.BEFORE:this.insertIdIntoNode(s,r,h);break;case n.AFTER:this.insertIdIntoNode(s,r,h+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}else if(l>-1){for(var s in this.nodes){if(this.nodes.hasOwnProperty(s))if((h=this.findNodeId(s,r))>-1){this.nodeDeleteAtIndex(s,h);break}}switch(i){case n.BEFORE:this.insertIdIntoRoot(r,l);break;case n.AFTER:this.insertIdIntoRoot(r,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}}else{for(var s in this.nodes){if(this.nodes.hasOwnProperty(s))if((h=this.findNodeId(s,r))>-1){this.nodeDeleteAtIndex(s,h);break}}for(var s in this.nodes){var h;if(this.nodes.hasOwnProperty(s))if((h=this.findNodeId(s,a))>-1){switch(i){case n.BEFORE:this.insertIdIntoNode(s,r,h);break;case n.AFTER:this.insertIdIntoNode(s,r,h+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(a,r);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(a,r)}break}}}},t.prototype.swapArrayElements=function(t,e,i){var n=t[e];return t[e]=t[i],t[i]=n,t},t.prototype.rootDeleteId=function(t){var e=this.findRootId(t);e>-1&&this.rootDelete(e)},t.prototype.nodeAndSubNodesDelete=function(t){for(var e=[],i=0;i<this.nodes[t].length;i++){var n=this.nodes[t][i];this.nodeAndSubNodesDelete(n),e.push(t)}this.nodeDelete(t);for(i=0;i<e.length;i++)this.nodeDelete(e[i])},t.prototype.nodeRefrencesDelete=function(t){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var i=0;i<this.nodes[e].length;i++){this.nodes[e][i]===t&&this.nodeDeleteAtIndex(e,i)}},t.prototype.nodeDelete=function(t){delete this.nodes[t]},t.prototype.findRootId=function(t){return this.rootIds.indexOf(t)},t.prototype.findNodeId=function(t,e){return this.nodes[t].indexOf(e)},t.prototype.findNode=function(t){return this.nodes[t]},t.prototype.nodeInsertAtStart=function(t,e){this.nodes[t].unshift(e)},t.prototype.nodeInsertAtEnd=function(t,e){this.nodes[t].push(e)},t.prototype.rootDelete=function(t){this.rootIds.splice(t,1)},t.prototype.nodeDeleteAtIndex=function(t,e){this.nodes[t].splice(e,1)},t.prototype.rootInsertAtStart=function(t){this.rootIds.unshift(t)},t.prototype.rootInsertAtEnd=function(t){this.rootIds.push(t)},t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(44);e.shuffle=function(t){for(var e,i,r=0;r<t.length;++r)i=n.intBetween(0,t.length),e=t[r],t[r]=t[i],t[i]=e},e.random=function(t){return t[n.intBetween(0,t.length)]}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.capitalize=function(t){return t.replace(/\b\w/g,(function(t){return t.toUpperCase()}))}},function(t,e,i){(function(i){var n;/*! howler.js v2.2.0 | (c) 2013-2020, James Simpson of GoldFire Studios | MIT License | howlerjs.com */!function(){"use strict";var r=function(){this.init()};r.prototype={init:function(){var t=this||o;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||o;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,o.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.volume=s._volume*t)}return e}return e._volume},mute:function(t){var e=this||o;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,o.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var n=e._howls[i]._getSoundIds(),r=0;r<n.length;r++){var s=e._howls[i]._soundById(n[r]);s&&s._node&&(s._node.muted=!!t||s._muted)}return e},stop:function(){for(var t=this||o,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||o,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||o)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||o;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),r=n&&parseInt(n[0].split("/")[1],10)<33;return t._codecs={mp3:!(r||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||o;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(i){t.noAudio=!0;break}for(var r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var o=t._howls[r]._getSoundIds(),s=0;s<o.length;s++){var a=t._howls[r]._soundById(o[s]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}t._autoResume();var l=t.ctx.createBufferSource();l.buffer=t._scratchBuffer,l.connect(t.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),l.onended=function(){l.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),t}},_obtainHtml5Audio:function(){var t=this||o;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||o;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&o.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&o.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var o=new r,s=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(t){var e=this;return o.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=o.usingWebAudio&&!e._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(!o.noAudio){"string"==typeof t._src&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var n,r;if(t._format&&t._format[i])n=t._format[i];else{if("string"!=typeof(r=t._src[i])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){e=t._src[i];break}}return e?(t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new a(t),t._webAudio&&h(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")}t._emit("loaderror",null,"No audio support.")},play:function(t,e){var i=this,n=null;if("number"==typeof t)n=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var r=0,s=0;s<i._sounds.length;s++)i._sounds[s]._paused&&!i._sounds[s]._ended&&(r++,n=i._sounds[s]._id);1===r?t=null:n=null}}var a=n?i._soundById(n):i._inactiveSound();if(!a)return null;if(n&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state){a._sprite=t,a._ended=!1;var l=a._id;return i._queue.push({event:"play",action:function(){i.play(l)}}),l}if(n&&!a._paused)return e||i._loadQueue("play"),a._id;i._webAudio&&o._autoResume();var h=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),u=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-h),c=1e3*u/Math.abs(a._rate),d=i._sprite[t][0]/1e3,p=(i._sprite[t][0]+i._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var f=function(){a._paused=!1,a._seek=h,a._start=d,a._stop=p,a._loop=!(!a._loop&&!i._sprite[t][2])};if(!(h>=p)){var g=a._node;if(i._webAudio){var m=function(){i._playLock=!1,f(),i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;g.gain.setValueAtTime(t,o.ctx.currentTime),a._playStart=o.ctx.currentTime,void 0===g.bufferSource.start?a._loop?g.bufferSource.noteGrainOn(0,h,86400):g.bufferSource.noteGrainOn(0,h,u):a._loop?g.bufferSource.start(0,h,86400):g.bufferSource.start(0,h,u),c!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c)),e||setTimeout((function(){i._emit("play",a._id),i._loadQueue()}),0)};"running"===o.state&&"interrupted"!==o.ctx.state?m():(i._playLock=!0,i.once("resume",m),i._clearTimer(a._id))}else{var _=function(){g.currentTime=h,g.muted=a._muted||i._muted||o._muted||g.muted,g.volume=a._volume*o.volume(),g.playbackRate=a._rate;try{var n=g.play();if(n&&"undefined"!=typeof Promise&&(n instanceof Promise||"function"==typeof n.then)?(i._playLock=!0,f(),n.then((function(){i._playLock=!1,g._unlocked=!0,e||(i._emit("play",a._id),i._loadQueue())})).catch((function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):e||(i._playLock=!1,f(),i._emit("play",a._id),i._loadQueue()),g.playbackRate=a._rate,g.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c):(i._endTimers[a._id]=function(){i._ended(a),g.removeEventListener("ended",i._endTimers[a._id],!1)},g.addEventListener("ended",i._endTimers[a._id],!1))}catch(t){i._emit("playerror",a._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=i._src,g.load());var v=window&&window.ejecta||!g.readyState&&o._navigator.isCocoonJS;if(g.readyState>=3||v)_();else{i._playLock=!0;var y=function(){_(),g.removeEventListener(o._canPlayEvent,y,!1)};g.addEventListener(o._canPlayEvent,y,!1),i._clearTimer(a._id)}}return a._id}i._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var r=e._soundById(i[n]);if(r&&!r._paused&&(r._seek=e.seek(i[n]),r._rateSeek=0,r._paused=!0,e._stopFade(i[n]),r._node))if(e._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),e._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||e._emit("pause",r?r._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),r=0;r<n.length;r++){i._clearTimer(n[r]);var o=i._soundById(n[r]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,i._stopFade(n[r]),o._node&&(i._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),i._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&i._clearSound(o._node))),e||i._emit("stop",o._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var n=i._getSoundIds(e),r=0;r<n.length;r++){var s=i._soundById(n[r]);s&&(s._muted=t,s._interval&&i._stopFade(s._id),i._webAudio&&s._node?s._node.gain.setValueAtTime(t?0:s._volume,o.ctx.currentTime):s._node&&(s._node.muted=!!o._muted||t),i._emit("mute",s._id))}return i},volume:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._volume;if(1===r.length||2===r.length&&void 0===r[1]?n._getSoundIds().indexOf(r[0])>=0?e=parseInt(r[0],10):t=parseFloat(r[0]):r.length>=2&&(t=parseFloat(r[0]),e=parseInt(r[1],10)),!(void 0!==t&&t>=0&&t<=1))return(i=e?n._soundById(e):n._sounds[0])?i._volume:0;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"volume",action:function(){n.volume.apply(n,r)}}),n;void 0===e&&(n._volume=t),e=n._getSoundIds(e);for(var s=0;s<e.length;s++)(i=n._soundById(e[s]))&&(i._volume=t,r[2]||n._stopFade(e[s]),n._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,o.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*o.volume()),n._emit("volume",i._id));return n},fade:function(t,e,i,n){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,n)}}),r;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),r.volume(t,n);for(var s=r._getSoundIds(n),a=0;a<s.length;a++){var l=r._soundById(s[a]);if(l){if(n||r._stopFade(s[a]),r._webAudio&&!l._muted){var h=o.ctx.currentTime,u=h+i/1e3;l._volume=t,l._node.gain.setValueAtTime(t,h),l._node.gain.linearRampToValueAtTime(e,u)}r._startFadeInterval(l,t,e,i,s[a],void 0===n)}}return r},_startFadeInterval:function(t,e,i,n,r,o){var s=this,a=e,l=i-e,h=Math.abs(l/.01),u=Math.max(4,h>0?n/h:n),c=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var r=(Date.now()-c)/n;c=Date.now(),a+=l*r,a=l<0?Math.max(i,a):Math.min(i,a),a=Math.round(100*a)/100,s._webAudio?t._volume=a:s.volume(a,t._id,!0),o&&(s._volume=a),(i<e&&a<=i||i>e&&a>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,s.volume(i,t._id),s._emit("fade",t._id))}),u)},_stopFade:function(t){var e=this,i=e._soundById(t);return i&&i._interval&&(e._webAudio&&i._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(i._interval),i._interval=null,e.volume(i._fadeTo,t),i._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,i,n=this,r=arguments;if(0===r.length)return n._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(i=n._soundById(parseInt(r[0],10)))&&i._loop;t=r[0],n._loop=t}else 2===r.length&&(t=r[0],e=parseInt(r[1],10));for(var o=n._getSoundIds(e),s=0;s<o.length;s++)(i=n._soundById(o[s]))&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return n},rate:function(){var t,e,i,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var s=n._getSoundIds(),a=s.indexOf(r[0]);a>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if("number"!=typeof t)return(i=n._soundById(e))?i._rate:n._rate;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"rate",action:function(){n.rate.apply(n,r)}}),n;void 0===e&&(n._rate=t),e=n._getSoundIds(e);for(var l=0;l<e.length;l++)if(i=n._soundById(e[l])){n.playing(e[l])&&(i._rateSeek=n.seek(e[l]),i._playStart=n._webAudio?o.ctx.currentTime:i._playStart),i._rate=t,n._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,o.ctx.currentTime):i._node&&(i._node.playbackRate=t);var h=n.seek(e[l]),u=(n._sprite[i._sprite][0]+n._sprite[i._sprite][1])/1e3-h,c=1e3*u/Math.abs(i._rate);!n._endTimers[e[l]]&&i._paused||(n._clearTimer(e[l]),n._endTimers[e[l]]=setTimeout(n._ended.bind(n,i),c)),n._emit("rate",i._id)}return n},seek:function(){var t,e,i=this,n=arguments;if(0===n.length)e=i._sounds[0]._id;else if(1===n.length){var r=i._getSoundIds(),s=r.indexOf(n[0]);s>=0?e=parseInt(n[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(n[0]))}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if(void 0===e)return i;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"seek",action:function(){i.seek.apply(i,n)}}),i;var a=i._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var l=i.playing(e)?o.ctx.currentTime-a._playStart:0,h=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(h+l*Math.abs(a._rate))}return a._node.currentTime}var u=i.playing(e);u&&i.pause(e,!0),a._seek=t,a._ended=!1,i._clearTimer(e),i._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=t);var c=function(){i._emit("seek",e),u&&i.play(e,!0)};if(u&&!i._webAudio){var d=function(){i._playLock?setTimeout(d,0):c()};setTimeout(d,0)}else c()}return i},playing:function(t){var e=this;if("number"==typeof t){var i=e._soundById(t);return!!i&&!i._paused}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,n=e._soundById(t);return n&&(i=e._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(o._canPlayEvent,e[i]._loadFn,!1),o._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var n=o._howls.indexOf(t);n>=0&&o._howls.splice(n,1);var r=!0;for(i=0;i<o._howls.length;i++)if(o._howls[i]._src===t._src||t._src.indexOf(o._howls[i]._src)>=0){r=!1;break}return l&&r&&delete l[t._src],o.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var r=this["_on"+t];return"function"==typeof e&&r.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this,r=n["_on"+t],o=0;if("number"==typeof e&&(i=e,e=null),e||i)for(o=0;o<r.length;o++){var s=i===r[o].id;if(e===r[o].fn&&s||!e&&s){r.splice(o,1);break}}else if(t)n["_on"+t]=[];else{var a=Object.keys(n);for(o=0;o<a.length;o++)0===a[o].indexOf("_on")&&Array.isArray(n[a[o]])&&(n[a[o]]=[])}return n},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this,r=n["_on"+t],o=r.length-1;o>=0;o--)r[o].id&&r[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(n,r[o].fn),0),r[o].once&&n.off(t,r[o].fn,r[o].id));return n._loadQueue(t),n},_loadQueue:function(t){var e=this;if(e._queue.length>0){var i=e._queue[0];i.event===t&&(e._queue.shift(),e._loadQueue()),t||i.action()}return e},_ended:function(t){var e=this,i=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var n=!(!t._loop&&!e._sprite[i][2]);if(e._emit("end",t._id),!e._webAudio&&n&&e.stop(t._id,!0).play(t._id),e._webAudio&&n){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),r)}return e._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),o._autoSuspend()),e._webAudio||n||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var i=e._soundById(t);i&&i._node&&i._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new a(t)},_drain:function(){var t=this,e=t._pool,i=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=l[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,o.ctx.currentTime),this},_cleanBuffer:function(t){var e=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=o._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++o._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,i=o._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),t._node.gain.setValueAtTime(i,o.ctx.currentTime),t._node.paused=!0,t._node.connect(o.masterGain)):o.noAudio||(t._node=o._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(o._canPlayEvent,t._loadFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=i*o.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++o._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(o._canPlayEvent,t._loadFn,!1)}};var l={},h=function(t){var e=t._src;if(l[e])return t._duration=l[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);c(n.buffer,t)}else{var o=new XMLHttpRequest;o.open(t._xhr.method,e,!0),o.withCredentials=t._xhr.withCredentials,o.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){o.setRequestHeader(e,t._xhr.headers[e])})),o.onload=function(){var e=(o.status+"")[0];"0"===e||"2"===e||"3"===e?c(o.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete l[e],t.load())},u(o)}},u=function(t){try{t.send()}catch(e){t.onerror()}},c=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},n=function(t){t&&e._sounds.length>0?(l[e._src]=t,d(e,t)):i()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(t).then(n).catch(i):o.ctx.decodeAudioData(t,n,i)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(t){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),e=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var n=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());o._navigator&&!n&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0!==(n=function(){return{Howler:o,Howl:s}}.apply(e,[]))&&(t.exports=n),e.Howler=o,e.Howl=s,void 0!==i?(i.HowlerGlobal=r,i.Howler=o,i.Howl=s,i.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=r,window.Howler=o,window.Howl=s,window.Sound=a)}()}).call(this,i(36))},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),s=function(t){function e(e,i,n){void 0===i&&(i=e),void 0===n&&(n=o.AssetType.SPINE_JSON);var r=t.call(this,e,n)||this;return r.atlas=i,r}return r(e,t),e.prototype.getLoaderOptions=function(){return{metadata:{imageNamePrefix:"spineAtlas_",spineAtlasFile:o.AssetUtils.getPathToAsset(this.atlas,o.AssetType.SPINE_ATLAS)}}},e}(i(34).AssetMapData);e.AssetMapSpineData=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AssetFactory=function t(e,i,n){if(e&&i){if("string"==typeof e||"number"==typeof e)return(h=i(e,n)).resolutionSuffix=n||"",[h];var r=[];if(Array.isArray(e))if(2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])for(var o=e[0],s=e[1];o<=s;o++){(h=i(o,n)).resolutionSuffix=n||"",r.push(h)}else for(var a=0,l=e;a<l.length;a++){var h;(h=i(l[a],n)).resolutionSuffix=n||"",r.push(h)}else for(var u in e)e.hasOwnProperty(u)&&r.push.apply(r,t(e[u],i,u));return r}return[]}},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(40),s=i(8),a=function(t){function e(e,i){return t.call(this,e,s.AssetType.AUDIO,i)||this}return r(e,t),e.prototype.getAsset=function(){var t=o.Application.instance.audio.getAudioTrack(this.assetName,this.category);if(!t)throw new Error("Audio asset "+this.assetName+" is not loaded.");return t},e}(i(111).AssetMapAudioData);e.AudioAsset=a},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),s=function(t){function e(e,i){var n=t.call(this,e,o.AssetType.FONT)||this;return i&&(n.assetPath=i),n}return r(e,t),e.prototype.getAsset=function(){var t=PIXI.extras.BitmapText.fonts[this.assetName];if(!t)throw new Error("Font asset "+this.assetName+" is not loaded.");return t},e.prototype.isLoaded=function(){return!!PIXI.extras.BitmapText.fonts[this.assetName]},e}(i(34).AssetMapData);e.FontAsset=s},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),s=function(t){function e(e,i){var n=t.call(this,e,o.AssetType.JSON)||this;return i&&(n.assetPath=i),n}return r(e,t),e.prototype.getAsset=function(){return this.getResource().data},e}(i(34).AssetMapData);e.JsonAsset=s},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),s=function(t){function e(e,i,n){var r=t.call(this,e,"number"==typeof i?i:o.AssetType.SPINE_JSON)||this;return"string"==typeof i&&(r.assetPath=i),r.atlasPath=n,r}return r(e,t),e.prototype.getAsset=function(){return this.getResource().spineData},e.prototype.getLoaderOptions=function(){if(this.atlasPath)return{metadata:{imageNamePrefix:"spineAtlas_",spineAtlasFile:this.atlasPath.indexOf("/")>=0?o.AssetUtils.replaceResolutionToken(this.atlasPath):o.AssetUtils.getPathToAsset(this.atlasPath,o.AssetType.SPINE_ATLAS)}}},e}(i(34).AssetMapData);e.SpineAsset=s},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),s=function(t){function e(e,i){var n=t.call(this,e,"number"==typeof i?i:o.AssetType.JPG)||this;return"string"==typeof i&&(n.assetPath=i),n}return r(e,t),e.prototype.getAsset=function(){return this.getResource().texture},e}(i(34).AssetMapData);e.TextureAsset=s},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(8),s=function(t){function e(e,i){var n=t.call(this,e,o.AssetType.TEXTURE_ATLAS)||this;return i&&(n.assetPath=i),n}return r(e,t),e.prototype.getAsset=function(){return this.getResource().textures},e}(i(34).AssetMapData);e.TextureAtlasAsset=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),r=function(t){for(var e in void 0===t?t={autoResize:!0,resolution:!1===PIXI.utils.isMobile.any?2:window.devicePixelRatio>1?2:1}:void 0!==t.autoResize&&!1!==t.autoResize||(t.autoResize=!0),"number"!=typeof t.resolution?this.resolution=!1===PIXI.utils.isMobile.any?2:window.devicePixelRatio>1?2:1:(this.resolution=t.resolution,this.resolution=Math.round(this.resolution),this.resolution=n.MathUtils.clamp(this.resolution,1,2)),void 0!==t.transparent?this.transparent=t.transparent:this.transparent=n.PlatformUtils.isAmazonOS(),t)if(t.hasOwnProperty(e)){if("resolution"===e||"transparent"===e)continue;this[e]=t[e]}};e.AppConfig=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,i){void 0!==t&&void 0===e?(this.r=(t&255<<16)>>16,this.g=(65280&t)>>8,this.b=255&t):(this.r=t||0,this.g=e||0,this.b=i||0)}return t.random=function(){return new t(255*Math.random(),255*Math.random(),255*Math.random())},t.rgbToHex=function(t,e,i){return t<<16|e<<8|i},t.rgbToHexString=function(t){var e=Number(t).toString(16);return e.length<2&&(e="0"+e),e},t.rgbToFullHexString=function(e,i,n){return t.rgbToHexString(e)+t.rgbToHexString(i)+t.rgbToHexString(n)},t.lerp=function(e,i,n){return new t(e.r+n*(i.r-e.r),e.g+n*(i.g-e.g),e.b+n*(i.b-e.b))},t.lerpHex=function(e,i,n){var r=new t(e),o=new t(i);return t.lerp(r,o,n).toHex()},t.prototype.toHex=function(){return t.rgbToHex(this.r,this.g,this.b)},t.prototype.toHexString=function(){return t.rgbToFullHexString(this.r,this.g,this.b)},t.prototype.toWebGL=function(){return[this.r/255,this.g/255,this.b/255]},t.WHITE=new t(255,255,255),t.BLACK=new t(0,0,0),t.GREY=new t(127,127,127),t.RED=new t(255,0,0),t.GREEN=new t(0,255,0),t.BLUE=new t(0,0,255),t.YELLOW=new t(255,255,0),t.MAGENTA=new t(255,0,255),t.CYAN=new t(0,255,255),t}();e.Colour=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(207),r=i(9),o=i(35),s=i(208),a=i(209),l=function(){function t(){this._isActive=!1,this._isEnabled=!0,this._maps=new Array,window.addEventListener(o.Events.KEY_DOWN,this.onKeyDown.bind(this),!1),window.addEventListener(o.Events.MOUSE_DOWN,this.onMouseDown.bind(this),!1),window.addEventListener(o.Events.FOCUS,this.onBrowserFocus.bind(this)),window.addEventListener(o.Events.BLUR,this.onBrowserBlur.bind(this)),PubSub.subscribe(r.REGISTER_FOCUSABLE,this.onRegisterFocusable.bind(this)),PubSub.subscribe(r.REGISTER_FOCUSABLES,this.onRegisterFocusable.bind(this)),PubSub.subscribe(r.UNREGISTER_FOCUSABLE,this.onUnregisterFocusable.bind(this)),PubSub.subscribe(r.UNREGISTER_FOCUSABLES,this.onUnregisterFocusable.bind(this)),PubSub.subscribe(r.UNREGISTER_ALL_FOCUSABLES,this.onUnregisterAllFocusables.bind(this)),PubSub.subscribe(r.CLEAR_FOCUS,this.onClearFocus.bind(this)),PubSub.subscribe(r.FORCE_FOCUS,this.onForceFocus.bind(this)),PubSub.subscribe(r.KEYBOARD_FORCE_NEIGHBOURS,this.onForceNeighbours.bind(this)),PubSub.subscribe(r.KEYBOARD_CLEAR_NEIGHBOURS,this.onClearNeighbours.bind(this)),PubSub.subscribe(r.PUSH_KEYBOARD_LAYER,this.pushMapLayer.bind(this)),PubSub.subscribe(r.POP_KEYBOARD_LAYER,this.popMapLayer.bind(this)),PubSub.subscribe(r.SET_KEYBOARD_ENABLED,this.onSetKeyboardEnabled.bind(this)),PubSub.subscribe(r.GET_KEYBOARD_STATUS,this.onGetKeyboardStatus.bind(this))}return t.prototype.onKeyDown=function(t){this._isEnabled&&(!1===this._isActive?this._maps.length>0&&(this._isActive=!0,this._maps[0].isActive=!0,t.preventDefault()):n.isEventKey(t,a.KeyCodes.UP)||n.isEventKey(t,a.KeyCodes.W)?(this.onDirectionPressed(s.Direction.UP),t.preventDefault()):n.isEventKey(t,a.KeyCodes.RIGHT)||n.isEventKey(t,a.KeyCodes.D)?(this.onDirectionPressed(s.Direction.RIGHT),t.preventDefault()):n.isEventKey(t,a.KeyCodes.DOWN)||n.isEventKey(t,a.KeyCodes.S)?(this.onDirectionPressed(s.Direction.DOWN),t.preventDefault()):n.isEventKey(t,a.KeyCodes.LEFT)||n.isEventKey(t,a.KeyCodes.A)?(this.onDirectionPressed(s.Direction.LEFT),t.preventDefault()):(n.isEventKey(t,a.KeyCodes.ENTER)||n.isEventKey(t,a.KeyCodes.SPACEBAR))&&this._maps.length>0&&(this._maps[0].activateFocussedNode(),t.preventDefault()))},t.prototype.onDirectionPressed=function(t){this._maps.length>0&&this._maps[0].step(t)},t.prototype.onMouseDown=function(){!0===this._isActive&&(this._isActive=!1,this._maps.length>0&&(this._maps[0].isActive=!1))},t.prototype.onBrowserBlur=function(){this._isActive&&this._maps.length>0&&(this._maps[0].isActive=!1)},t.prototype.onBrowserFocus=function(){this._isActive&&this._maps.length>0&&(this._maps[0].isActive=!0)},t.prototype.onRegisterFocusable=function(t,e){this._maps.length>0&&this._maps[0].registerFocusable(e)},t.prototype.onUnregisterFocusable=function(t,e){for(var i=0,n=this._maps;i<n.length;i++){n[i].unregisterFocusable(e)}},t.prototype.onUnregisterAllFocusables=function(){for(var t=0;t<this._maps.length;++t)this._maps[t].clear()},t.prototype.onClearFocus=function(){this._maps.length>0&&this._maps[0].clearFocus()},t.prototype.onForceFocus=function(t,e){this._isActive&&this._maps.length>0&&this._maps[0].setFocus(e)},t.prototype.onForceNeighbours=function(t,e){if(this._maps.length>0){Array.isArray(e)||(e=[e]);for(var i=0,n=e;i<n.length;i++)for(var r=n[i],o=0;o<s.Direction.NUM_ELEMENTS;++o)void 0!==r.neighbours[o]&&this._maps[0].forceNeighbour(r.target,r.neighbours[o],o)}},t.prototype.onClearNeighbours=function(){this._maps.length>0&&this._maps[0].clearNeighbours()},t.prototype.onSetKeyboardEnabled=function(t,e){this._isEnabled=e},t.prototype.onGetKeyboardStatus=function(t,e){e({enabled:this._isEnabled,active:this._isActive,layer:this._maps.length,currentFocusable:this._maps.length>0?this._maps[0].currentFocusable:void 0})},t.prototype.pushMapLayer=function(){this._maps.length>0&&(this._maps[0].isActive=!1);var t=new s.KeyboardMap;this._maps.unshift(t),t.isActive=this._isActive},t.prototype.popMapLayer=function(){this._maps.length>0&&(this._maps[0].isActive=!1,this._maps[0].clear()),this._maps.shift(),this._maps.length>0&&(this._maps[0].isActive=this._isActive)},t}();e.KeyboardManager=l},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(9),s=function(t){function e(e){var i=t.call(this)||this;return i._T=e,i._pubSubTokens=new Array,i._focusPool=new Array,i._pubSubTokens.push(PubSub.subscribe(o.KEYBOARD_FOCUS_BEGIN,i.onFocusBegin.bind(i))),i._pubSubTokens.push(PubSub.subscribe(o.KEYBOARD_FOCUS_END,i.onFocusEnd.bind(i))),i._pubSubTokens.push(PubSub.subscribe(o.KEYBOARD_REFOCUS,i.reFocus.bind(i))),i}return r(e,t),e.prototype.destroy=function(e){for(var i=0;i<this._pubSubTokens.length;++i)PubSub.unsubscribe(this._pubSubTokens[i]);t.prototype.destroy.call(this,e)},e.prototype.onFocusBegin=function(t,e){var i=this.getFocus();this.addChild(i),i.show(e),this._activeFocus=i},e.prototype.onFocusEnd=function(t,e){var i=this;if(void 0!==this._activeFocus&&this._activeFocus.target===e){var n=this._activeFocus;n.hide((function(){i.removeChild(n),i._focusPool.push(n)})),this._activeFocus=void 0}},e.prototype.reFocus=function(){void 0!==this._activeFocus&&this._activeFocus.redraw()},e.prototype.getFocus=function(){return this._focusPool.length>0?this._focusPool.pop():new this._T},e}(PIXI.Container);e.KeyboardFocusManager=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(208),r=function(){function t(t,e,i,r,o){this.target=t,this.neighbours=new Array(n.Direction.NUM_ELEMENTS),this.neighbours[n.Direction.UP]=e,this.neighbours[n.Direction.DOWN]=i,this.neighbours[n.Direction.LEFT]=r,this.neighbours[n.Direction.RIGHT]=o}return t.getRow=function(e,i,n,r,o){for(var s=[],a=0,l=e.length;a<l;a++)s.push(new t(e[a],i,n,0===a?r:e[a-1],a===l-1?o:e[a+1]));return s},t.getColumn=function(e,i,n,r,o){for(var s=[],a=0,l=e.length;a<l;a++)s.push(new t(e[a],0===a?i:e[a-1],a===l-1?n:e[a+1],r,o));return s},t.getTable=function(e,i,n,r,o){for(var s=[],a=0,l=e.length;a<l;a++)for(var h=0,u=e[a].length;h<u;h++)s.push(new t(e[a][h],0===a?i:e[a-1][h],a===l-1?n:e[a+1][h],0===h?r:e[a][h-1],h===u-1?o:e[a][h+1]));return s},t}();e.KeyboardMapToken=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._elements=new Array,this._selectedIndex=-1}return t.prototype.addElement=function(t){-1===this._elements.indexOf(t)&&(this._elements.push(t),t.onSelected.push(this.onElementSelected.bind(this)),t.onDeselected.push(this.onElementDeselected.bind(this)))},t.prototype.removeElement=function(t){var e=this._elements.indexOf(t);-1!==e&&(e===this._selectedIndex?this._selectedIndex=-1:e<this._selectedIndex&&--this._selectedIndex,this._elements.splice(e,1))},t.prototype.deselect=function(){-1!==this._selectedIndex&&(this._elements[this._selectedIndex].deselect(),this._selectedIndex=-1)},t.prototype.disable=function(t){this.deselect();for(var e=0;e<this._elements.length;++e)this._elements[e]!==t&&(this._elements[e].interactive=!1)},t.prototype.enable=function(){for(var t=0;t<this._elements.length;++t)this._elements[t].interactive=!1},t.prototype.onElementSelected=function(t){this.deselect(),this._selectedIndex=this._elements.indexOf(t)},t.prototype.onElementDeselected=function(t){this._selectedIndex===this._elements.indexOf(t)&&(this._selectedIndex=-1)},t}();e.RadioGroup=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r,o=i(35),s=i(43);!function(t){t[t.LOCAL=0]="LOCAL",t[t.GLOBAL=1]="GLOBAL",t[t.NUM_ELEMENTS=2]="NUM_ELEMENTS"}(n=e.CoordinateSystem||(e.CoordinateSystem={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH=1]="PINCH",t[t.NUM_ELEMENTS=2]="NUM_ELEMENTS"}(r=e.GestureType||(e.GestureType={}));var a=function(){function t(t,e){this._interaction=t,this._target=e,this._touches=new Array,this._gestureCoordSys=new Array(r.NUM_ELEMENTS),this._gestureCoordSys[r.SWIPE]=n.LOCAL,this._gestureCoordSys[r.PINCH]=n.GLOBAL,this._swipePrevPos=new PIXI.Point,this._pinchPrevDist=0,this._swipeAccum=new PIXI.Point,this._pinchAccum=0,this._swipeThreshhold=0,this._pinchThreshhold=0,this._isSwiping=!1,this._isPinching=!1,this._startCallback=this.onTouchStart.bind(this),this._moveCallback=this.onTouchMove.bind(this),this._endCallback=this.onTouchEnd.bind(this),this._interaction.addListener(o.Events.TOUCH_START,this._startCallback)}return Object.defineProperty(t.prototype,"onSwipe",{set:function(t){this._onSwipe=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSwipeStart",{set:function(t){this._onSwipeStart=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSwipeEnd",{set:function(t){this._onSwipeEnd=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPinch",{set:function(t){this._onPinch=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPinchStart",{set:function(t){this._onPinchStart=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onPinchEnd",{set:function(t){this._onPinchEnd=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"swipeThreshhold",{set:function(t){this._swipeThreshhold=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pinchThreshhold",{set:function(t){this._pinchThreshhold=t},enumerable:!0,configurable:!0}),t.prototype.setCoordinateSystem=function(t,e){this._gestureCoordSys[t]=e},t.prototype.destroy=function(){this._interaction.removeListener(o.Events.TOUCH_START,this._startCallback),this._interaction.removeListener(o.Events.TOUCH_MOVE,this._moveCallback),this._interaction.removeListener(o.Events.TOUCH_END,this._endCallback),this._interaction.removeListener(o.Events.TOUCH_END_OUTSIDE,this._endCallback),this._interaction.removeListener(o.Events.TOUCH_CANCEL,this._endCallback),delete this._onSwipe,delete this._onSwipeStart,delete this._onSwipeEnd,delete this._onPinch,delete this._onPinchStart,delete this._onPinchEnd},t.prototype.registerCallbacks=function(){this._interaction.addListener(o.Events.TOUCH_MOVE,this._moveCallback),this._interaction.addListener(o.Events.TOUCH_END,this._endCallback),this._interaction.addListener(o.Events.TOUCH_END_OUTSIDE,this._endCallback),this._interaction.addListener(o.Events.TOUCH_CANCEL,this._endCallback)},t.prototype.unregisterCallbacks=function(){this._interaction.removeListener(o.Events.TOUCH_MOVE,this._moveCallback),this._interaction.removeListener(o.Events.TOUCH_END,this._endCallback),this._interaction.removeListener(o.Events.TOUCH_END_OUTSIDE,this._endCallback),this._interaction.removeListener(o.Events.TOUCH_CANCEL,this._endCallback)},t.prototype.onTouchStart=function(t){this._touches.push(t.data),1===this._touches.length?(this.registerCallbacks(),this._swipePrevPos.copy(this.getTouchPos(t.data,r.SWIPE)),this._isSwiping=!1,this._swipeAccum.set(0)):2===this._touches.length&&(this._pinchPrevDist=this.getPinchDist(this._touches[0],this._touches[1]),this._isPinching=!1,this._pinchAccum=0)},t.prototype.onTouchMove=function(t){if(1===this._touches.length&&void 0!==this._onSwipe){var e=this.getTouchPos(this._touches[0],r.SWIPE),i=s.subtract(e,this._swipePrevPos);!1===this._isSwiping?(s.addToPoint(this._swipeAccum,i),s.magnitude(this._swipeAccum)>=this._swipeThreshhold&&(this._isSwiping=!0,void 0!==this._onSwipeStart&&this._onSwipeStart(this._swipePrevPos))):this._onSwipe(i),this._swipePrevPos.copy(e)}else if(void 0!==this._onPinch){var n=s.distance(this.getTouchPos(this._touches[0],r.PINCH),this.getTouchPos(this._touches[1],r.PINCH));i=n-this._pinchPrevDist;!1===this._isPinching?(this._pinchAccum+=i,Math.abs(this._pinchAccum)>=this._pinchThreshhold&&(this._isPinching=!0,void 0!==this._onPinchStart&&this._onPinchStart(this._pinchPrevDist))):this._onPinch(i),this._pinchPrevDist=n}},t.prototype.onTouchEnd=function(t){for(var e,i=0;i<this._touches.length;++i)if(this._touches[i].identifier===t.data.identifier){e=i;break}void 0!==e&&(1===this._touches.length?(this._isSwiping&&void 0!==this._onSwipeEnd&&this._onSwipeEnd(this._swipePrevPos),this._isSwiping=!1,this.unregisterCallbacks()):2===this._touches.length?(this._isPinching&&void 0!==this._onPinchEnd&&this._onPinchEnd(this._pinchPrevDist),this._isPinching=!1,this._swipePrevPos.copy(this.getTouchPos(this._touches[1-e],r.SWIPE)),this._isSwiping=!0,void 0!==this._onSwipeStart&&this._onSwipeStart(this._swipePrevPos),this._swipeAccum.set(0)):0!==e&&1!==e||(this._pinchPrevDist=this.getPinchDist(this._touches[1-e],this._touches[2]),this._pinchAccum=0),this._touches.splice(e,1))},t.prototype.getTouchPos=function(t,e){switch(this._gestureCoordSys[e]){case n.LOCAL:return t.getLocalPosition(this._target);case n.GLOBAL:default:return t.global}},t.prototype.getPinchDist=function(t,e){return s.distance(this.getTouchPos(t,r.PINCH),this.getTouchPos(e,r.PINCH))},t}();e.TouchManager=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=i(380),o=i(381);!function(t){t[t.Cookie=0]="Cookie",t[t.Local=1]="Local"}(n=e.Storage||(e.Storage={}));var s=function(){function t(){this._debug=!1,this._cookieStorage=new r.CookieStorage,this._localStorage=new o.LocalStorage}return Object.defineProperty(t.prototype,"hasLocalStorageData",{get:function(){return this._localStorage.hasUserData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasCookieData",{get:function(){return this._cookieStorage.hasUserData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debug",{set:function(t){this._debug=t,this._cookieStorage.debug=t,this._localStorage.debug=t},enumerable:!0,configurable:!0}),t.prototype.storeBool=function(t,e,i){switch(void 0===i&&(i=n.Cookie),i){case n.Cookie:this._cookieStorage.storeBool(t,e,r.CookieStorage.NEVER_EXPIRE_DATE);break;case n.Local:this._localStorage.storeBool(t,e)}},t.prototype.readBool=function(t,e,i){switch(void 0===e&&(e=!1),void 0===i&&(i=n.Cookie),i){case n.Cookie:return this._cookieStorage.readBool(t,e);case n.Local:return this._localStorage.readBool(t,e)}},t.prototype.storeNumber=function(t,e,i){switch(void 0===i&&(i=n.Cookie),i){case n.Cookie:this._cookieStorage.storeNumber(t,e,r.CookieStorage.NEVER_EXPIRE_DATE);break;case n.Local:this._localStorage.storeNumber(t,e)}},t.prototype.readNumber=function(t,e,i){switch(void 0===e&&(e=0),void 0===i&&(i=n.Cookie),i){case n.Cookie:return this._cookieStorage.readNumber(t,e);case n.Local:return this._localStorage.readNumber(t,e)}},t.prototype.storeString=function(t,e,i){switch(void 0===i&&(i=n.Cookie),i){case n.Cookie:this._cookieStorage.storeString(t,e,r.CookieStorage.NEVER_EXPIRE_DATE);break;case n.Local:this._localStorage.storeString(t,e)}},t.prototype.readString=function(t,e,i){switch(void 0===e&&(e=""),void 0===i&&(i=n.Cookie),i){case n.Cookie:return this._cookieStorage.readString(t,e);case n.Local:return this._localStorage.readString(t,e)}},t.prototype.deleteItem=function(t,e){switch(void 0===e&&(e=n.Cookie),e){case n.Cookie:this._cookieStorage.deleteItem(t);break;case n.Local:this._localStorage.deleteItem(t)}},t.prototype.setCookieExpiration=function(t,e){this._cookieStorage.setCookieExpiration(t,e)},t.prototype.printAll=function(t){switch(t){case n.Cookie:this._cookieStorage.printAll();break;case n.Local:this._localStorage.printAll()}},t.prototype.deleteAllData=function(){this._cookieStorage.deleteAllData(),this._localStorage.deleteAllData()},t}();e.SaveManager=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(33),r=i(8),o=function(){function t(){this._debug=!1,this._storedCookies=new n.Dictionary,this.EXPIRE_DATE=new Date(1970,1),t.FUTURE_DATE=new Date(2050,1),this.readAllValues()}return Object.defineProperty(t,"NEVER_EXPIRE_DATE",{get:function(){return this.FUTURE_DATE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasUserData",{get:function(){return this._storedCookies.keys().length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debug",{set:function(t){this._debug=t},enumerable:!0,configurable:!0}),t.prototype.storeBool=function(t,e,i){var n=e?"true":"false";this.log("STORING BOOL: %s at value: %s",t,n),this.storeValue(t,n,i)},t.prototype.readBool=function(t,e){void 0===e&&(e=!1);var i=this._storedCookies.getValue(t);return void 0!==i?"true"===i:e},t.prototype.storeNumber=function(t,e,i){var n=e.toString();this.log("STORING NUMBER: %s at value: %s",t,n),this.storeValue(t,n,i)},t.prototype.readNumber=function(t,e){void 0===e&&(e=0);var i=this._storedCookies.getValue(t);return void 0!==i?+i:e},t.prototype.storeString=function(t,e,i){this.log("STORING STRING: %s at value: %s",t,e),this.storeValue(t,e,i)},t.prototype.readString=function(t,e){void 0===e&&(e="");var i=this._storedCookies.getValue(t);return void 0!==i?i:e},t.prototype.deleteItem=function(t){var e=this._storedCookies.getValue(t);void 0!==e&&(this.storeValue(t,e,this.EXPIRE_DATE),this._storedCookies.remove(t))},t.prototype.printAll=function(){this._storedCookies.forEach((function(t,e){r.LogUtils.log("Key: %s | Value: %s",{className:"CookieManager",color:"blue"},t,e)}))},t.prototype.setCookieExpiration=function(t,e){var i=this.readString(t);void 0!==i?this.storeValue(t,i,e):r.LogUtils.logError("Trying to set expiration date of ID: %s when it doesn't exist!",{className:"CookieManager",color:"red"},t)},t.prototype.deleteAllData=function(){var t=this;this._storedCookies.forEach((function(e){t.deleteItem(e)})),this._storedCookies.clear()},t.prototype.storeValue=function(t,e,i){this._storedCookies.setValue(t,e);var n=t+"="+e;void 0!==i&&(n+=";expires="+i.toUTCString()),r.PlatformUtils.isHTTPS()&&(n+=";secure"),n+=";samesite=lax",n+=";path=/",document.cookie=n},t.prototype.readAllValues=function(){for(var t,e=decodeURIComponent(document.cookie).split(";"),i=0;i<e.length;++i)if(!((t=e[i].split("=")).length<2)){var n=t[0].trim(),r=t[1];this._storedCookies.setValue(n,r)}},t.prototype.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&r.LogUtils.log.apply(r.LogUtils,[t,{className:"CookieStorage",color:"orange"}].concat(e))},t}();e.CookieStorage=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(58),r=function(){function t(){this._debug=!1}return Object.defineProperty(t.prototype,"hasUserData",{get:function(){return localStorage.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debug",{set:function(t){this._debug=t},enumerable:!0,configurable:!0}),t.prototype.storeBool=function(t,e){var i=e?"true":"false";this.log("STORING BOOL: %s at value: %s",t,i),localStorage.setItem(t,i)},t.prototype.readBool=function(t,e){void 0===e&&(e=!1);var i=localStorage.getItem(t);return null!==i?"true"===i:e},t.prototype.storeNumber=function(t,e){var i=e.toString();this.log("STORING NUMBER: %s at value: %s",t,i),localStorage.setItem(t,i)},t.prototype.readNumber=function(t,e){void 0===e&&(e=0);var i=localStorage.getItem(t);return null!==i?+i:e},t.prototype.storeString=function(t,e){this.log("STORING STRING: %s at value: %s",t,e),localStorage.setItem(t,e)},t.prototype.readString=function(t,e){void 0===e&&(e="");var i=localStorage.getItem(t);return null!==i?i:e},t.prototype.deleteItem=function(t){return null!==localStorage.getItem(t)?(localStorage.removeItem(t),!0):(this.log("Trying to delete %s when it doesn't exist!",t),!1)},t.prototype.printAll=function(){for(var t=0;t<localStorage.length;++t){var e=localStorage.key(t);if(null!==e){var i=localStorage.getItem(e);null!==i&&n.log("Key: %s | Value: %s",{className:"LocalStorage",color:"blue"},e,i)}}},t.prototype.deleteAllData=function(){localStorage.clear()},t.prototype.log=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this._debug&&n.log.apply(n,[t,{className:"LocalStorageManager",color:"orange"}].concat(e))},t}();e.LocalStorage=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(114),r=i(2),o=function(){function t(){this._isPortrait=void 0,this._enabled=!1,this._showOnLandscape=!1}return t.prototype.init=function(t,e){var i=this;void 0===e&&(e=!1),this._enabled=!0,this._promptImage=document.createElement("img"),this._promptImage.src=r.getTexture(t).baseTexture.imageUrl,this._showOnLandscape=e,this.enablePromptImage(!1),window.addEventListener("resize",(function(){return i.onResize()})),window.addEventListener("orientationchange",(function(){return i.onResize()})),this.onResize()},t.prototype.onResize=function(t){if(this._enabled)switch(window.orientation){case-90:case 90:this.enablePromptImage(this._showOnLandscape),(this._isPortrait||void 0===this._isPortrait)&&(this._isPortrait=!1,void 0!==this.onLandscapeOrientation&&this.onLandscapeOrientation(),PubSub.publish(n.LANDSCAPE_ORIENTATION,void 0));break;default:this.enablePromptImage(!this._showOnLandscape),this._isPortrait||(this._isPortrait=!0,void 0!==this.onPortraitOrientation&&this.onPortraitOrientation(),PubSub.publish(n.PORTRAIT_ORIENTATION,void 0))}},t.prototype.enablePromptImage=function(t){if(this._promptImage)if(t)document.body.append(this._promptImage),this._promptImage.id="orientation-prompt-image",this._promptImage.style.position="fixed",this._promptImage.style.width="100vw",this._promptImage.style.height="100vh",this._promptImage.style.top="0",this._promptImage.style.left="0",this._promptImage.style.objectFit="cover",this._promptImage.style.objectPosition="center",this._promptImage.style.cursor="auto",this._promptImage.style.pointerEvents="auto";else try{this._promptImage.remove()}catch(t){}},t}();e.OrientationManager=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(59),r=function(){function t(t,e){this._sizeMin=t,this._sizeMax=e,this.updateRatio()}return Object.defineProperty(t.prototype,"sizeMin",{set:function(t){this._sizeMin.copy(t),this.updateRatio()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sizeMax",{set:function(t){this._sizeMax.copy(t),this.updateRatio()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"windowAspectRatio",{get:function(){return window.innerWidth/window.innerHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gameAspectRatio",{get:function(){return n.clamp(this.windowAspectRatio,this._ratioMin,this._ratioMax)},enumerable:!0,configurable:!0}),t.prototype.getSize=function(){var t=new PIXI.Point;return t.y=this._sizeMax.y,t.x=t.y*this.gameAspectRatio,t},t.prototype.getStageScale=function(){return this.gameAspectRatio<this.windowAspectRatio?window.innerHeight/this.getSize().y:window.innerWidth/this.getSize().x},t.prototype.updateRatio=function(){this._ratioMin=this._sizeMin.x/this._sizeMin.y,this._ratioMax=this._sizeMax.x/this._sizeMax.y},t}();e.ResizeManager=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._visibilityChangedCallbacks=new Array,document.addEventListener("visibilitychange",this.onVisibilityChanged.bind(this),!1),this._resizeCallbacks=new Array,window.addEventListener("resize",this.onResize.bind(this))}return t.prototype.registerVisibilityChangedCallback=function(t){return-1===this._visibilityChangedCallbacks.indexOf(t)&&(this._visibilityChangedCallbacks.push(t),!0)},t.prototype.unregisterVisibilityChangedCallback=function(t){var e=this._visibilityChangedCallbacks.indexOf(t);e>-1&&this._visibilityChangedCallbacks.splice(e,1)},t.prototype.registerResizeCallback=function(t){return-1===this._resizeCallbacks.indexOf(t)&&(this._resizeCallbacks.push(t),!0)},t.prototype.unregisterResizeCallback=function(t){var e=this._resizeCallbacks.indexOf(t);e>-1&&this._resizeCallbacks.splice(e,1)},t.prototype.onVisibilityChanged=function(){this._visibilityChangedCallbacks.forEach((function(t){t(!document.hidden)}))},t.prototype.onResize=function(){this._resizeCallbacks.forEach((function(t){t()}))},t}();e.WebEventsManager=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(203))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(79))},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(388)),n(i(213)),n(i(389)),n(i(390))},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(33),s=function(t){function e(){var e=t.call(this)||this;return e.anchor.set(.5),e._animations=new o.Dictionary,e._elapsed=-1,e._frame=-1,e._isPlaying=!1,e._isReversed=!1,e}return r(e,t),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!0,configurable:!0}),e.prototype.addAnimation=function(t,e){return this._animations.setValue(t,e),e},e.prototype.play=function(t,e){void 0===e&&(e=!1);var i=this._animations.getValue(t);void 0!==i?(this._isReversed=e,this._isPlaying=!0,this._elapsed=0,this._activeAnimation=i):console.log("AnimatedSprite.play: Animation with key "+t+" not found")},e.prototype.holdFrame=function(t,e){void 0===e&&(e=0);var i=this._animations.getValue(t);void 0!==i?(this._isReversed=!1,this._isPlaying=!1,this._elapsed=e/i.frames*i.duration,this._activeAnimation=i,this.updateFrame()):console.log("AnimatedSprite.holdFrame: Animation with key "+t+" not found")},e.prototype.update=function(t){this._isPlaying&&(this._elapsed+=t,this.updateFrame())},e.prototype.updateFrame=function(){var t=!1,e=!1;this._elapsed>=this._activeAnimation.duration&&(this._activeAnimation.isLooping?(t=!0,this._elapsed%=this._activeAnimation.duration):(e=!0,this._elapsed=this._activeAnimation.duration,this._isPlaying=!1));var i=this._elapsed/this._activeAnimation.duration;this._isReversed&&(i=1-i);var n=Math.floor(i*this._activeAnimation.frames);(n=Math.min(Math.max(n,0),this._activeAnimation.frames-1))!==this._frame&&(this._frame=n,this.texture=this._activeAnimation.getFrame(this._frame)),t?this._activeAnimation.fireOnLoop():e&&this._activeAnimation.fireOnComplete(this._isReversed)},e}(PIXI.Sprite);e.AnimatedSprite=s},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o=i(115),s=function(t){function e(e,i,n,r,o){var s=t.call(this,e,i,o)||this;return s._normalTexture=s._image.texture,s._overTexture=PIXI.Texture.fromImage(n),s._downTexture=PIXI.Texture.fromImage(r),s}return r(e,t),Object.defineProperty(e.prototype,"normalTexture",{set:function(t){this._normalTexture="string"==typeof t?PIXI.Texture.fromImage(t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overTexture",{set:function(t){this._overTexture="string"==typeof t?PIXI.Texture.fromImage(t):t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"downTexture",{set:function(t){this._downTexture="string"==typeof t?PIXI.Texture.fromImage(t):t},enumerable:!0,configurable:!0}),e.prototype.onPointerOver=function(e){t.prototype.onPointerOver.call(this,e),this._image.texture=o.MouseManager.mouseDown?this._normalTexture:this._overTexture},e.prototype.onPointerDown=function(e){t.prototype.onPointerDown.call(this,e),this._image.texture=this._downTexture},e.prototype.onPointerUp=function(e){void 0!==this._eventData&&this._eventData.identifier===e.data.identifier&&(this._image.texture=this._overTexture),t.prototype.onPointerUp.call(this,e)},e.prototype.onPointerOut=function(e){t.prototype.onPointerOut.call(this,e),this._image.texture=this._normalTexture},e}(i(213).Button);e.TextureSwapButton=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(8),r=i(194),o=function(){function t(t,e,i,o,s,a,l){var h;void 0===a&&(a=!1),void 0===l&&(l=0),this._frameRate=s,this._isLooping=a,this._frames=new Array(i);for(var u=0;u<i;++u)h=t+r.addZeroPadding((u+l).toString(),o),this._frames[u]=n.PixiUtils.getTexture(h,e)}return t.prototype.getFrame=function(t){return this._frames[t]},Object.defineProperty(t.prototype,"frames",{get:function(){return this._frames.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"framerate",{get:function(){return this._frameRate},set:function(t){this._frameRate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._frames.length/this._frameRate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isLooping",{get:function(){return this._isLooping},enumerable:!0,configurable:!0}),t.prototype.onComplete=function(t){this._onComplete=t},t.prototype.onLoop=function(t){this._onLoop=t},t.prototype.fireOnComplete=function(t){void 0!==this._onComplete&&this._onComplete(t)},t.prototype.fireOnLoop=function(){void 0!==this._onLoop&&this._onLoop()},t}();e.SpriteAnimation=o},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(392)),n(i(210)),n(i(393))},function(t,e,i){"use strict";var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=i(9);!function(t){t[t.CLOSED=0]="CLOSED",t[t.OPENING=1]="OPENING",t[t.OPEN=2]="OPEN",t[t.CLOSING=3]="CLOSING"}(o=e.POPUP_STATE||(e.POPUP_STATE={}));var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._state=o.CLOSED,e._clickBackdropToClose=!0,e._keyboardToClose=!0,e}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keyboardToClose",{get:function(){return this._keyboardToClose},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupData",{get:function(){return this._popupData},enumerable:!0,configurable:!0}),e.prototype.hide=function(){this.state===o.OPEN&&this._hide()},e.prototype.init=function(t){this._state=o.CLOSED,this.onResize(t),void 0!==this.blackout&&this.blackout.on("click",this.OnBlackoutClicked.bind(this))},e.prototype.onResize=function(t){void 0!==this.blackout&&(this.blackout.x=-t.x/2,this.blackout.y=-t.y/2,this.blackout.width=t.x,this.blackout.height=t.y)},e.prototype.update=function(t){},e.prototype.show=function(t){this._id=t.id,this._callback=t.callback,this._state=o.OPENING,this._clickBackdropToClose=t.backdrop||!0,this._keyboardToClose=t.keyboard||!0,this._popupData=t.data,this.AnimateIn(this.OnAnimateInComplete.bind(this))},e.prototype.destroy=function(e){this._callback=void 0,this._popupData=void 0,t.prototype.destroy.call(this,e)},e.prototype.OnBlackoutClicked=function(){!0===this._clickBackdropToClose&&this.hide()},e.prototype.OnAnimateInComplete=function(){this._state=o.OPEN},e.prototype._hide=function(){this.interactiveChildren=!1,void 0!==this.blackout&&this.blackout.off("click"),this._state=o.CLOSING,this.AnimateOut(this.OnAnimateOutComplete.bind(this))},e.prototype.OnAnimateOutComplete=function(){if(this._state=o.CLOSED,void 0!==this._callback){var t=this._callback;this._callback=void 0,t()}PubSub.publishSync(s.HIDE_POPUP_COMPLETE,this)},e}(PIXI.Container);e.Popup=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,i,n,r){void 0===i&&(i=!0),void 0===n&&(n=!0),this.id=t,this.callback=e,this.backdrop=i,this.keyboard=n,this.data=r};e.PopupToken=n},function(t,e,i){"use strict";function n(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),n(i(201)),n(i(116)),n(i(395))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(116),r=function(){function t(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];t instanceof Object?(this.stateId=t.id,this.data=t.data):this.stateId=t,this.loadScreen=e,this.transitionSteps=i}return t.TRANSITION_FIRST_VIEW=[n.TransitionStep.LoadAssets,n.TransitionStep.AttachNewBehind,n.TransitionStep.HideLoadScreen,n.TransitionStep.AnimNewIn],t.TRANSITION_SIMPLE_INTERSTITIAL=[n.TransitionStep.ShowLoadScreen,n.TransitionStep.RemoveCurrent,n.TransitionStep.UnloadAssets,n.TransitionStep.LoadAssets,n.TransitionStep.AttachNewInFront,n.TransitionStep.HideLoadScreen,n.TransitionStep.AnimNewIn,n.TransitionStep.UnloadUnusedAssets],t.TRANSITION_ANIM_SEQUENTIAL_PRE_ASSETS=[n.TransitionStep.LoadAssets,n.TransitionStep.AnimCurrentOut,n.TransitionStep.RemoveCurrent,n.TransitionStep.UnloadAssets,n.TransitionStep.AttachNewInFront,n.TransitionStep.AnimNewIn,n.TransitionStep.UnloadUnusedAssets],t.TRANSITION_ANIM_SEQUENTIAL_MID_ASSETS=[n.TransitionStep.AnimCurrentOut,n.TransitionStep.RemoveCurrent,n.TransitionStep.UnloadAssets,n.TransitionStep.LoadAssets,n.TransitionStep.AttachNewInFront,n.TransitionStep.AnimNewIn,n.TransitionStep.UnloadUnusedAssets],t.TRANSITION_ANIM_NEW_IN_FRONT=[n.TransitionStep.LoadAssets,n.TransitionStep.AttachNewInFront,n.TransitionStep.AnimNewIn,n.TransitionStep.RemoveCurrent,n.TransitionStep.UnloadAssets,n.TransitionStep.UnloadUnusedAssets],t.TRANSITION_ANIM_OLD_OUT_REVEAL=[n.TransitionStep.LoadAssets,n.TransitionStep.AttachNewBehind,n.TransitionStep.AnimCurrentOut,n.TransitionStep.RemoveCurrent,n.TransitionStep.UnloadAssets,n.TransitionStep.AnimNewIn,n.TransitionStep.UnloadUnusedAssets],t.TRANSITION_ANIM_SIMULTANEOUSLY_NEW_BEHIND=[n.TransitionStep.LoadAssets,n.TransitionStep.AttachNewBehind,n.TransitionStep.AnimSimultaneously,n.TransitionStep.RemoveCurrent,n.TransitionStep.UnloadAssets,n.TransitionStep.UnloadUnusedAssets],t.TRANSITION_ANIM_SIMULTANEOUSLY_NEW_IN_FRONT=[n.TransitionStep.LoadAssets,n.TransitionStep.AttachNewInFront,n.TransitionStep.AnimSimultaneously,n.TransitionStep.RemoveCurrent,n.TransitionStep.UnloadAssets,n.TransitionStep.UnloadUnusedAssets],t}();e.StateToken=r},function(t,e,i){"use strict";var n=i(19),r=i(11),o=i(104),s=i(181),a=i(96),l=i(39),h=i(97),u=Object.assign,c=Object.defineProperty;t.exports=!u||r((function(){if(n&&1!==u({b:1},u(c({},"a",{enumerable:!0,get:function(){c(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol();return t[i]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=u({},t)[i]||"abcdefghijklmnopqrst"!=o(u({},e)).join("")}))?function(t,e){for(var i=l(t),r=arguments.length,u=1,c=s.f,d=a.f;r>u;)for(var p,f=h(arguments[u++]),g=c?o(f).concat(c(f)):o(f),m=g.length,_=0;m>_;)p=g[_++],n&&!d.call(f,p)||(i[p]=f[p]);return i}:u},function(t,e,i){"use strict";var n=i(66),r=i(28),o=i(51);t.exports=function(t,e,i){var s=n(e);s in t?r.f(t,s,o(0,i)):t[s]=i}},function(t,e,i){var n=i(11),r=i(14),o=i(399),s=r("species");t.exports=function(t){return o>=51||!n((function(){var e=[];return(e.constructor={})[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,i){var n,r,o=i(13),s=i(400),a=o.process,l=a&&a.versions,h=l&&l.v8;h?r=(n=h.split("."))[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(r=n[1]),t.exports=r&&+r},function(t,e,i){var n=i(69);t.exports=n("navigator","userAgent")||""},function(t,e,i){"use strict";var n=i(182),r=i(29),o=i(32),s=i(402),a=i(186);n("search",1,(function(t,e,i){return[function(e){var i=o(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var o=r(t),l=String(this),h=o.lastIndex;s(h,0)||(o.lastIndex=0);var u=a(o,l);return s(o.lastIndex,h)||(o.lastIndex=h),null===u?-1:u.index}]}))},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,i){"use strict";var n=i(17),r=i(217),o=[].reverse,s=[1,2];n({target:"Array",proto:!0,forced:String(s)===String(s.reverse())},{reverse:function(){return r(this)&&(this.length=this.length),o.call(this)}})},function(t,e,i){"use strict";var n=i(17),r=i(105),o=i(39),s=i(11),a=i(214),l=[],h=l.sort,u=s((function(){l.sort(void 0)})),c=s((function(){l.sort(null)})),d=a("sort");n({target:"Array",proto:!0,forced:u||!c||!d},{sort:function(t){return void 0===t?h.call(o(this)):h.call(o(this),r(t))}})},function(t,e,i){i(17)({global:!0},{globalThis:i(13)})},function(t,e,i){"use strict";var n=i(17),r=i(219),o=i(32);n({target:"String",proto:!0,forced:!i(220)("includes")},{includes:function(t){return!!~String(o(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){"use strict";var n=i(17),r=i(11),o=i(221),s=i(29),a=i(70),l=i(23),h=i(185),u=o.ArrayBuffer,c=o.DataView,d=u.prototype.slice;n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:r((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(void 0!==d&&void 0===e)return d.call(s(this),t);for(var i=s(this).byteLength,n=a(t,i),r=a(void 0===e?i:e,i),o=new(h(this,u))(l(r-n)),p=new c(this),f=new c(o),g=0;n<r;)f.setUint8(g++,p.getUint8(n++));return o}})},function(t,e,i){var n=i(54);t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},function(t,e){var i=Math.abs,n=Math.pow,r=Math.floor,o=Math.log,s=Math.LN2;t.exports={pack:function(t,e,a){var l,h,u,c=new Array(a),d=8*a-e-1,p=(1<<d)-1,f=p>>1,g=23===e?n(2,-24)-n(2,-77):0,m=t<0||0===t&&1/t<0?1:0,_=0;for((t=i(t))!=t||t===1/0?(h=t!=t?1:0,l=p):(l=r(o(t)/s),t*(u=n(2,-l))<1&&(l--,u*=2),(t+=l+f>=1?g/u:g*n(2,1-f))*u>=2&&(l++,u/=2),l+f>=p?(h=0,l=p):l+f>=1?(h=(t*u-1)*n(2,e),l+=f):(h=t*n(2,f-1)*n(2,e),l=0));e>=8;c[_++]=255&h,h/=256,e-=8);for(l=l<<e|h,d+=e;d>0;c[_++]=255&l,l/=256,d-=8);return c[--_]|=128*m,c},unpack:function(t,e){var i,r=t.length,o=8*r-e-1,s=(1<<o)-1,a=s>>1,l=o-7,h=r-1,u=t[h--],c=127&u;for(u>>=7;l>0;c=256*c+t[h],h--,l-=8);for(i=c&(1<<-l)-1,c>>=-l,l+=e;l>0;i=256*i+t[h],h--,l-=8);if(0===c)c=1-a;else{if(c===s)return i?NaN:u?-1/0:1/0;i+=n(2,e),c-=a}return(u?-1:1)*i*n(2,c-e)}}},function(t,e,i){"use strict";var n=i(39),r=i(70),o=i(23);t.exports=function(t){for(var e=n(this),i=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,i),l=s>2?arguments[2]:void 0,h=void 0===l?i:r(l,i);h>a;)e[a++]=t;return e}},function(t,e,i){i(412)("Float32",(function(t){return function(e,i,n){return t(this,e,i,n)}}))},function(t,e,i){"use strict";var n=i(17),r=i(13),o=i(19),s=i(413),a=i(77),l=i(221),h=i(223),u=i(51),c=i(22),d=i(23),p=i(224),f=i(416),g=i(66),m=i(20),_=i(117),v=i(27),y=i(106),b=i(56),x=i(102).f,w=i(418),T=i(421).forEach,S=i(422),E=i(28),P=i(65),A=i(67),I=i(423),O=A.get,C=A.set,M=E.f,R=P.f,k=Math.round,L=r.RangeError,D=l.ArrayBuffer,N=l.DataView,F=a.NATIVE_ARRAY_BUFFER_VIEWS,B=a.TYPED_ARRAY_TAG,U=a.TypedArray,j=a.TypedArrayPrototype,V=a.aTypedArrayConstructor,X=a.isTypedArray,H=function(t,e){for(var i=0,n=e.length,r=new(V(t))(n);n>i;)r[i]=e[i++];return r},G=function(t,e){M(t,e,{get:function(){return O(this)[e]}})},W=function(t){var e;return t instanceof D||"ArrayBuffer"==(e=_(t))||"SharedArrayBuffer"==e},Y=function(t,e){return X(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},z=function(t,e){return Y(t,e=g(e,!0))?u(2,t[e]):R(t,e)},q=function(t,e,i){return!(Y(t,e=g(e,!0))&&v(i)&&m(i,"value"))||m(i,"get")||m(i,"set")||i.configurable||m(i,"writable")&&!i.writable||m(i,"enumerable")&&!i.enumerable?M(t,e,i):(t[e]=i.value,t)};o?(F||(P.f=z,E.f=q,G(j,"buffer"),G(j,"byteOffset"),G(j,"byteLength"),G(j,"length")),n({target:"Object",stat:!0,forced:!F},{getOwnPropertyDescriptor:z,defineProperty:q}),t.exports=function(t,e,i){var o=t.match(/\d+$/)[0]/8,a=t+(i?"Clamped":"")+"Array",l="get"+t,u="set"+t,g=r[a],m=g,_=m&&m.prototype,E={},P=function(t,e){M(t,e,{get:function(){return function(t,e){var i=O(t);return i.view[l](e*o+i.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,n){var r=O(t);i&&(n=(n=k(n))<0?0:n>255?255:255&n),r.view[u](e*o+r.byteOffset,n,!0)}(this,e,t)},enumerable:!0})};F?s&&(m=e((function(t,e,i,n){return h(t,m,a),I(v(e)?W(e)?void 0!==n?new g(e,f(i,o),n):void 0!==i?new g(e,f(i,o)):new g(e):X(e)?H(m,e):w.call(m,e):new g(p(e)),t,m)})),b&&b(m,U),T(x(g),(function(t){t in m||c(m,t,g[t])})),m.prototype=_):(m=e((function(t,e,i,n){h(t,m,a);var r,s,l,u=0,c=0;if(v(e)){if(!W(e))return X(e)?H(m,e):w.call(m,e);r=e,c=f(i,o);var g=e.byteLength;if(void 0===n){if(g%o)throw L("Wrong length");if((s=g-c)<0)throw L("Wrong length")}else if((s=d(n)*o)+c>g)throw L("Wrong length");l=s/o}else l=p(e),r=new D(s=l*o);for(C(t,{buffer:r,byteOffset:c,byteLength:s,length:l,view:new N(r)});u<l;)P(t,u++)})),b&&b(m,U),_=m.prototype=y(j)),_.constructor!==m&&c(_,"constructor",m),B&&c(_,B,a),E[a]=m,n({global:!0,forced:m!=g,sham:!F},E),"BYTES_PER_ELEMENT"in m||c(m,"BYTES_PER_ELEMENT",o),"BYTES_PER_ELEMENT"in _||c(_,"BYTES_PER_ELEMENT",o),S(a)}):t.exports=function(){}},function(t,e,i){var n=i(13),r=i(11),o=i(414),s=i(77).NATIVE_ARRAY_BUFFER_VIEWS,a=n.ArrayBuffer,l=n.Int8Array;t.exports=!s||!r((function(){l(1)}))||!r((function(){new l(-1)}))||!o((function(t){new l,new l(null),new l(1.5),new l(t)}),!0)||r((function(){return 1!==new l(new a(2),1,void 0).length}))},function(t,e,i){var n=i(14)("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var i=!1;try{var o={};o[n]=function(){return{next:function(){return{done:i=!0}}}},t(o)}catch(t){}return i}},function(t,e,i){var n={};n[i(14)("toStringTag")]="z",t.exports="[object z]"===String(n)},function(t,e,i){var n=i(417);t.exports=function(t,e){var i=n(t);if(i%e)throw RangeError("Wrong offset");return i}},function(t,e,i){var n=i(38);t.exports=function(t){var e=n(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}},function(t,e,i){var n=i(39),r=i(23),o=i(419),s=i(420),a=i(225),l=i(77).aTypedArrayConstructor;t.exports=function(t){var e,i,h,u,c,d,p=n(t),f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g,_=o(p);if(null!=_&&!s(_))for(d=(c=_.call(p)).next,p=[];!(u=d.call(c)).done;)p.push(u.value);for(m&&f>2&&(g=a(g,arguments[2],2)),i=r(p.length),h=new(l(this))(i),e=0;i>e;e++)h[e]=m?g(p[e],e):p[e];return h}},function(t,e,i){var n=i(117),r=i(55),o=i(14)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||r[n(t)]}},function(t,e,i){var n=i(14),r=i(55),o=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},function(t,e,i){var n=i(225),r=i(97),o=i(39),s=i(23),a=i(216),l=[].push,h=function(t){var e=1==t,i=2==t,h=3==t,u=4==t,c=6==t,d=5==t||c;return function(p,f,g,m){for(var _,v,y=o(p),b=r(y),x=n(f,g,3),w=s(b.length),T=0,S=m||a,E=e?S(p,w):i?S(p,0):void 0;w>T;T++)if((d||T in b)&&(v=x(_=b[T],T,y),t))if(e)E[T]=v;else if(v)switch(t){case 3:return!0;case 5:return _;case 6:return T;case 2:l.call(E,_)}else if(u)return!1;return c?-1:h||u?u:E}};t.exports={forEach:h(0),map:h(1),filter:h(2),some:h(3),every:h(4),find:h(5),findIndex:h(6)}},function(t,e,i){"use strict";var n=i(69),r=i(28),o=i(14),s=i(19),a=o("species");t.exports=function(t){var e=n(t),i=r.f;s&&e&&!e[a]&&i(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,i){var n=i(27),r=i(56);t.exports=function(t,e,i){var o,s;return r&&"function"==typeof(o=e.constructor)&&o!==i&&n(s=o.prototype)&&s!==i.prototype&&r(t,s),t}},function(t,e,i){"use strict";var n=i(13),r=i(77),o=i(11),s=n.Int8Array,a=r.aTypedArray,l=r.exportTypedArrayMethod,h=[].toLocaleString,u=[].slice,c=!!s&&o((function(){h.call(new s(1))}));l("toLocaleString",(function(){return h.apply(c?u.call(a(this)):a(this),arguments)}),o((function(){return[1,2].toLocaleString()!=new s([1,2]).toLocaleString()}))||!o((function(){s.prototype.toLocaleString.call([1,2])})))},function(t,e,i){"use strict";var n=i(17),r=i(426).trim;n({target:"String",proto:!0,forced:i(427)("trim")},{trim:function(){return r(this)}})},function(t,e,i){var n=i(32),r="["+i(226)+"]",o=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),a=function(t){return function(e){var i=String(n(e));return 1&t&&(i=i.replace(o,"")),2&t&&(i=i.replace(s,"")),i}};t.exports={start:a(1),end:a(2),trim:a(3)}},function(t,e,i){var n=i(11),r=i(226);t.exports=function(t){return n((function(){return!!r[t]()||"​᠎"!="​᠎"[t]()||r[t].name!==t}))}},function(t,e,i){"use strict";i.r(e);var n,r,o,s=i(4),a=(i(173),i(95),i(336),i(10),i(0)),l=i(3),h=i(16),u=i(1),c=/(\d|\.)+/g,d=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,p={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},f=function(t,e,i){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},g=function(t,e){var i,n,r,o,s,a,l,h,u,g,m,_="hsl"===e;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),p[t])i=p[t];else if("#"===t.charAt(0))4===t.length&&(n=t.charAt(1),r=t.charAt(2),o=t.charAt(3),t="#"+n+n+r+r+o+o),i=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=m=t.match(c),_){if(-1!==t.indexOf("="))return t.match(d)}else s=Number(i[0])%360/360,a=Number(i[1])/100,n=2*(l=Number(i[2])/100)-(r=l<=.5?l*(a+1):l+a-l*a),i.length>3&&(i[3]=Number(t[3])),i[0]=f(s+1/3,n,r),i[1]=f(s,n,r),i[2]=f(s-1/3,n,r);else i=t.match(c)||p.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=p.black;return _&&!m&&(n=i[0]/255,r=i[1]/255,o=i[2]/255,l=((h=Math.max(n,r,o))+(u=Math.min(n,r,o)))/2,h===u?s=a=0:(g=h-u,a=l>.5?g/(2-h-u):g/(h+u),s=h===n?(r-o)/g+(r<o?6:0):h===r?(o-n)/g+2:(n-r)/g+4,s*=60),i[0]=s+.5|0,i[1]=100*a+.5|0,i[2]=100*l+.5|0),"number"===e?i[0]<<16|i[1]<<8|i[2]:i},m=function(t,e){var i,n,r,o=(t+"").match(v)||[],s=0,a="";if(!o.length)return t;for(i=0;i<o.length;i++)n=o[i],s+=(r=t.substr(s,t.indexOf(n,s)-s)).length+n.length,3===(n=g(n,e?"hsl":"rgb")).length&&n.push(1),a+=r+(e?"hsla("+n[0]+","+n[1]+"%,"+n[2]+"%,"+n[3]:"rgba("+n.join(","))+")";return a+t.substr(s)},_=(u._gsScope.GreenSockGlobals||u._gsScope).TweenLite,v="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b",y=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],b=.212671,x=.072169,w=function(t,e){var i,n,r=[],o=0,s=0;for(i=0;i<4;i++){for(n=0;n<5;n++)s=4===n?t[o+4]:0,r[o+n]=t[o]*e[n]+t[o+1]*e[n+5]+t[o+2]*e[n+10]+t[o+3]*e[n+15]+s;o+=5}return r},T=function(t,e){var i=1-e,n=i*b,r=.71516*i,o=i*x;return w([n+e,r,o,0,0,n,r+e,o,0,0,n,r,o+e,0,0,0,0,0,1,0],t)},S=function(t,e,i){var n=g(e),r=n[0]/255,o=n[1]/255,s=n[2]/255,a=1-i;return w([a+i*r*b,i*r*.71516,i*r*x,0,0,i*o*b,a+i*o*.71516,i*o*x,0,0,i*s*b,i*s*.71516,a+i*s*x,0,0,0,0,0,1,0],t)},E=function(t,e){e*=Math.PI/180;var i=Math.cos(e),n=Math.sin(e);return w([b+.787329*i+n*-b,.71516+-.71516*i+-.71516*n,x+i*-x+.927831*n,0,0,b+i*-b+.143*n,.71516+.28484*i+.14*n,x+i*-x+-.283*n,0,0,b+i*-b+-.787329*n,.71516+-.71516*i+.71516*n,x+.927831*i+n*x,0,0,0,0,0,1,0,0,0,0,0,1],t)},P=function(t,e){return w([e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0],t)},A=function(t,e){var i,n=u._gsScope.PIXI.filters[e],r=t.filters||[],o=r.length;if(!n)throw"PixiPlugin error: "+e+" isn't present.";for(;--o>-1;)if(r[o]instanceof n)return r[o];return i=new n,"BlurFilter"===e&&(i.blur=0),r.push(i),t.filters=r,i},I=function(t,e,i,n){e._addTween(i,t,i[t],n[t],t),e._overwriteProps.push(t)},O=function(t,e){var i=new u._gsScope.PIXI.filters.ColorMatrixFilter;return i.matrix=e,i.brightness(t,!0),i.matrix},C={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},M=function(t,e,i){var n,r,o,s=A(t,"ColorMatrixFilter"),a=t._gsColorMatrixFilter=t._gsColorMatrixFilter||{contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},l=e.combineCMF&&!("colorMatrixFilter"in e&&!e.colorMatrixFilter);o=s.matrix,e.resolution&&(s.resolution=e.resolution),e.matrix&&e.matrix.length===o.length?(r=e.matrix,1!==a.contrast&&I("contrast",i,a,C),a.hue&&I("hue",i,a,C),1!==a.brightness&&I("brightness",i,a,C),a.colorizeAmount&&(I("colorize",i,a,C),I("colorizeAmount",i,a,C)),1!==a.saturation&&I("saturation",i,a,C)):(r=y.slice(),null!=e.contrast?(r=P(r,Number(e.contrast)),I("contrast",i,a,e)):1!==a.contrast&&(l?r=P(r,a.contrast):I("contrast",i,a,C)),null!=e.hue?(r=E(r,Number(e.hue)),I("hue",i,a,e)):a.hue&&(l?r=E(r,a.hue):I("hue",i,a,C)),null!=e.brightness?(r=O(Number(e.brightness),r),I("brightness",i,a,e)):1!==a.brightness&&(l?r=O(a.brightness,r):I("brightness",i,a,C)),null!=e.colorize?(e.colorizeAmount="colorizeAmount"in e?Number(e.colorizeAmount):1,r=S(r,e.colorize,e.colorizeAmount),I("colorize",i,a,e),I("colorizeAmount",i,a,e)):a.colorizeAmount&&(l?r=S(r,a.colorize,a.colorizeAmount):(I("colorize",i,a,C),I("colorizeAmount",i,a,C))),null!=e.saturation?(r=T(r,Number(e.saturation)),I("saturation",i,a,e)):1!==a.saturation&&(l?r=T(r,a.saturation):I("saturation",i,a,C))),n=r.length;for(;--n>-1;)r[n]!==o[n]&&i._addTween(o,n,o[n],r[n],"colorMatrixFilter");i._overwriteProps.push("colorMatrixFilter")},R=function(t,e,i,r,o){var s=r._firstPT={_next:r._firstPT,t:t,p:e,proxy:{},f:"function"==typeof t[e]};s.proxy[e]="rgb("+g(s.f?t[e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3)]():t[e]).join(",")+")",o._addTween(s.proxy,e,"get","number"==typeof i?"rgb("+g(i,!1).join(",")+")":i,e,null,null,n)},k=function(t,e){var i=e.setRatio,n=function(t){var r,o=n._firstPT;for(i.call(e,t);o;)r=g(o.proxy[o.p],"number"),o.f?o.t[o.p](r):o.t[o.p]=r,o=o._next;n.graphics&&(n.graphics.dirty++,n.graphics.clearDirty++)};return e.setRatio=n,n},L={tint:1,lineColor:1,fillColor:1},D="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),N={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},F={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},B=Math.PI/180,U=function(t){return"string"==typeof t&&"="===t.charAt(1)?t.substr(0,2)+parseFloat(t.substr(2))*B:t*B};for(r=0;r<D.length;r++)o=D[r],N[o+"X"]=o,N[o+"Y"]=o;for(o in p)v+="|"+o+"\\b";v=new RegExp(v+")","gi"),n=function(t){var e,i=t[0]+" "+t[1];v.lastIndex=0,v.test(i)&&(e=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),t[0]=m(t[0],e),t[1]=m(t[1],e))},_.defaultStringFilter||(_.defaultStringFilter=n);var j=u._gsScope._gsDefine.plugin({propName:"pixi",priority:0,API:2,global:!0,version:"0.2.1",init:function(t,e,i,n){if(!t instanceof u._gsScope.PIXI.DisplayObject)return!1;var r,o,s,a,l,h,c,d,p,f,g;for(h in e){if(r=N[h],"function"==typeof(s=e[h])&&(s=s(n||0,t)),r)o=-1!==h.charAt(h.length-1).toLowerCase().indexOf("x")?"x":"y",this._addTween(t[r],o,t[r][o],"skew"===r?U(s):s,h);else if("scale"===h||"anchor"===h||"pivot"===h||"tileScale"===h)this._addTween(t[h],"x",t[h].x,s,h+"X"),this._addTween(t[h],"y",t[h].y,s,h+"Y");else if("rotation"===h)this._addTween(t,h,t.rotation,U(s),h);else if(F[h])a||(M(t,e.colorMatrixFilter||e,this),a=!0);else if("blur"===h||"blurX"===h||"blurY"===h||"blurPadding"===h){if(l=A(t,"BlurFilter"),this._addTween(l,h,l[h],s,h),0!==e.blurPadding)for(c=e.blurPadding||2*Math.max(l[h],s),p=t.filters.length;--p>-1;)t.filters[p].padding=Math.max(t.filters[p].padding,c)}else if(L[h])if(d||(d=k(0,this)),("lineColor"===h||"fillColor"===h)&&t instanceof u._gsScope.PIXI.Graphics){for(p=(f=t.graphicsData).length;--p>-1;)R(f[p],h,s,d,this);d.graphics=t}else R(t,h,s,d,this);else"autoAlpha"===h?(this._firstPT=g={t:{setRatio:function(){t.visible=!!t.alpha}},p:"setRatio",s:0,c:1,f:1,pg:0,n:"visible",pr:0,m:0,_next:this._firstPT},g._next&&(g._next._prev=g),this._addTween(t,"alpha",t.alpha,s,"alpha"),this._overwriteProps.push("alpha","visible")):this._addTween(t,h,t[h],s,h);this._overwriteProps.push(h)}return!0}});function V(t,e){return t(e={exports:{}},e.exports),e.exports}j.colorProps=L,j.parseColor=g,j.formatColors=m,j.colorStringFilter=n;var X=V((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),H=V((function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)})),G=(H.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),W=function(t){if(!G(t))throw TypeError(t+" is not an object!");return t},Y=function(t){try{return!!t()}catch(t){return!0}},z=!Y((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),q=X.document,K=G(q)&&G(q.createElement),J=function(t){return K?q.createElement(t):{}},Z=!z&&!Y((function(){return 7!=Object.defineProperty(J("div"),"a",{get:function(){return 7}}).a})),Q=function(t,e){if(!G(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!G(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!G(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!G(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},$=Object.defineProperty,tt={f:z?Object.defineProperty:function(t,e,i){if(W(t),e=Q(e,!0),W(i),Z)try{return $(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},et=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},it=z?function(t,e,i){return tt.f(t,e,et(1,i))}:function(t,e,i){return t[e]=i,t},nt={}.hasOwnProperty,rt=function(t,e){return nt.call(t,e)},ot=0,st=Math.random(),at=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ot+st).toString(36))},lt=V((function(t){var e=X["__core-js_shared__"]||(X["__core-js_shared__"]={});(t.exports=function(t,i){return e[t]||(e[t]=void 0!==i?i:{})})("versions",[]).push({version:H.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),ht=lt("native-function-to-string",Function.toString),ut=V((function(t){var e=at("src"),i=(""+ht).split("toString");H.inspectSource=function(t){return ht.call(t)},(t.exports=function(t,n,r,o){var s="function"==typeof r;s&&(rt(r,"name")||it(r,"name",n)),t[n]!==r&&(s&&(rt(r,e)||it(r,e,t[n]?""+t[n]:i.join(String(n)))),t===X?t[n]=r:o?t[n]?t[n]=r:it(t,n,r):(delete t[n],it(t,n,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[e]||ht.call(this)}))})),ct=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},dt=function(t,e,i){if(ct(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}},pt=function(t,e,i){var n,r,o,s,a=t&pt.F,l=t&pt.G,h=t&pt.S,u=t&pt.P,c=t&pt.B,d=l?X:h?X[e]||(X[e]={}):(X[e]||{}).prototype,p=l?H:H[e]||(H[e]={}),f=p.prototype||(p.prototype={});for(n in l&&(i=e),i)o=((r=!a&&d&&void 0!==d[n])?d:i)[n],s=c&&r?dt(o,X):u&&"function"==typeof o?dt(Function.call,o):o,d&&ut(d,n,o,t&pt.U),p[n]!=o&&it(p,n,s),u&&f[n]!=o&&(f[n]=o)};X.core=H,pt.F=1,pt.G=2,pt.S=4,pt.P=8,pt.B=16,pt.W=32,pt.U=64,pt.R=128;var ft=pt,gt=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},mt=function(t){return Object(gt(t))},_t=Math.ceil,vt=Math.floor,yt=function(t){return isNaN(t=+t)?0:(t>0?vt:_t)(t)},bt=Math.max,xt=Math.min,wt=function(t,e){return(t=yt(t))<0?bt(t+e,0):xt(t,e)},Tt=Math.min,St=function(t){return t>0?Tt(yt(t),9007199254740991):0},Et=[].copyWithin||function(t,e){var i=mt(this),n=St(i.length),r=wt(t,n),o=wt(e,n),s=arguments.length>2?arguments[2]:void 0,a=Math.min((void 0===s?n:wt(s,n))-o,n-r),l=1;for(o<r&&r<o+a&&(l=-1,o+=a-1,r+=a-1);a-- >0;)o in i?i[r]=i[o]:delete i[r],r+=l,o+=l;return i},Pt=V((function(t){var e=lt("wks"),i=X.Symbol,n="function"==typeof i;(t.exports=function(t){return e[t]||(e[t]=n&&i[t]||(n?i:at)("Symbol."+t))}).store=e})),At=Pt("unscopables"),It=Array.prototype;null==It[At]&&it(It,At,{});var Ot=function(t){It[At][t]=!0};ft(ft.P,"Array",{copyWithin:Et}),Ot("copyWithin");var Ct=function(t){for(var e=mt(this),i=St(e.length),n=arguments.length,r=wt(n>1?arguments[1]:void 0,i),o=n>2?arguments[2]:void 0,s=void 0===o?i:wt(o,i);s>r;)e[r++]=t;return e};ft(ft.P,"Array",{fill:Ct}),Ot("fill");var Mt={}.toString,Rt=function(t){return Mt.call(t).slice(8,-1)},kt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Rt(t)?t.split(""):Object(t)},Lt=Array.isArray||function(t){return"Array"==Rt(t)},Dt=Pt("species"),Nt=function(t,e){return new(function(t){var e;return Lt(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Lt(e.prototype)||(e=void 0),G(e)&&null===(e=e[Dt])&&(e=void 0)),void 0===e?Array:e}(t))(e)},Ft=function(t,e){var i=1==t,n=2==t,r=3==t,o=4==t,s=6==t,a=5==t||s,l=e||Nt;return function(e,h,u){for(var c,d,p=mt(e),f=kt(p),g=dt(h,u,3),m=St(f.length),_=0,v=i?l(e,m):n?l(e,0):void 0;m>_;_++)if((a||_ in f)&&(d=g(c=f[_],_,p),t))if(i)v[_]=d;else if(d)switch(t){case 3:return!0;case 5:return c;case 6:return _;case 2:v.push(c)}else if(o)return!1;return s?-1:r||o?o:v}},Bt=Ft(5),Ut=!0;"find"in[]&&Array(1).find((function(){Ut=!1})),ft(ft.P+ft.F*Ut,"Array",{find:function(t){return Bt(this,t,arguments.length>1?arguments[1]:void 0)}}),Ot("find");var jt=Ft(6),Vt=!0;"findIndex"in[]&&Array(1).findIndex((function(){Vt=!1})),ft(ft.P+ft.F*Vt,"Array",{findIndex:function(t){return jt(this,t,arguments.length>1?arguments[1]:void 0)}}),Ot("findIndex");var Xt=Pt("isConcatSpreadable");var Ht=function t(e,i,n,r,o,s,a,l){for(var h,u,c=o,d=0,p=!!a&&dt(a,l,3);d<r;){if(d in n){if(h=p?p(n[d],d,i):n[d],u=!1,G(h)&&(u=void 0!==(u=h[Xt])?!!u:Lt(h)),u&&s>0)c=t(e,i,h,St(h.length),c,s-1)-1;else{if(c>=9007199254740991)throw TypeError();e[c]=h}c++}d++}return c};ft(ft.P,"Array",{flatMap:function(t){var e,i,n=mt(this);return ct(t),e=St(n.length),i=Nt(n,0),Ht(i,n,n,e,0,1,t,arguments[1]),i}}),Ot("flatMap");var Gt=function(t,e,i,n){try{return n?e(W(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&W(r.call(t)),e}},Wt={},Yt=Pt("iterator"),zt=Array.prototype,qt=function(t){return void 0!==t&&(Wt.Array===t||zt[Yt]===t)},Kt=function(t,e,i){e in t?tt.f(t,e,et(0,i)):t[e]=i},Jt=Pt("toStringTag"),Zt="Arguments"==Rt(function(){return arguments}()),Qt=function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Jt))?i:Zt?Rt(e):"Object"==(n=Rt(e))&&"function"==typeof e.callee?"Arguments":n},$t=Pt("iterator"),te=H.getIteratorMethod=function(t){if(null!=t)return t[$t]||t["@@iterator"]||Wt[Qt(t)]},ee=Pt("iterator"),ie=!1;try{[7][ee]().return=function(){ie=!0}}catch(Jr){}var ne=function(t,e){if(!e&&!ie)return!1;var i=!1;try{var n=[7],r=n[ee]();r.next=function(){return{done:i=!0}},n[ee]=function(){return r},t(n)}catch(t){}return i};ft(ft.S+ft.F*!ne((function(t){})),"Array",{from:function(t){var e,i,n,r,o=mt(t),s="function"==typeof this?this:Array,a=arguments.length,l=a>1?arguments[1]:void 0,h=void 0!==l,u=0,c=te(o);if(h&&(l=dt(l,a>2?arguments[2]:void 0,2)),null==c||s==Array&&qt(c))for(i=new s(e=St(o.length));e>u;u++)Kt(i,u,h?l(o[u],u):o[u]);else for(r=c.call(o),i=new s;!(n=r.next()).done;u++)Kt(i,u,h?Gt(r,l,[n.value,u],!0):n.value);return i.length=u,i}});var re=function(t){return kt(gt(t))},oe=function(t){return function(e,i,n){var r,o=re(e),s=St(o.length),a=wt(n,s);if(t&&i!=i){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===i)return t||a||0;return!t&&-1}},se=oe(!0);ft(ft.P,"Array",{includes:function(t){return se(this,t,arguments.length>1?arguments[1]:void 0)}}),Ot("includes");var ae=function(t,e){return{value:e,done:!!t}},le=lt("keys"),he=function(t){return le[t]||(le[t]=at(t))},ue=oe(!1),ce=he("IE_PROTO"),de=function(t,e){var i,n=re(t),r=0,o=[];for(i in n)i!=ce&&rt(n,i)&&o.push(i);for(;e.length>r;)rt(n,i=e[r++])&&(~ue(o,i)||o.push(i));return o},pe="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),fe=Object.keys||function(t){return de(t,pe)},ge=z?Object.defineProperties:function(t,e){W(t);for(var i,n=fe(e),r=n.length,o=0;r>o;)tt.f(t,i=n[o++],e[i]);return t},me=X.document,_e=me&&me.documentElement,ve=he("IE_PROTO"),ye=function(){},be=function(){var t,e=J("iframe"),i=pe.length;for(e.style.display="none",_e.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),be=t.F;i--;)delete be.prototype[pe[i]];return be()},xe=Object.create||function(t,e){var i;return null!==t?(ye.prototype=W(t),i=new ye,ye.prototype=null,i[ve]=t):i=be(),void 0===e?i:ge(i,e)},we=tt.f,Te=Pt("toStringTag"),Se=function(t,e,i){t&&!rt(t=i?t:t.prototype,Te)&&we(t,Te,{configurable:!0,value:e})},Ee={};it(Ee,Pt("iterator"),(function(){return this}));var Pe=he("IE_PROTO"),Ae=Object.prototype,Ie=Object.getPrototypeOf||function(t){return t=mt(t),rt(t,Pe)?t[Pe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ae:null},Oe=Pt("iterator"),Ce=!([].keys&&"next"in[].keys()),Me=function(){return this},Re=function(t,e,i,n,r,o,s){!function(t,e,i){t.prototype=xe(Ee,{next:et(1,i)}),Se(t,e+" Iterator")}(i,e,n);var a,l,h,u=function(t){if(!Ce&&t in f)return f[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},c=e+" Iterator",d="values"==r,p=!1,f=t.prototype,g=f[Oe]||f["@@iterator"]||r&&f[r],m=g||u(r),_=r?d?u("entries"):m:void 0,v="Array"==e&&f.entries||g;if(v&&(h=Ie(v.call(new t)))!==Object.prototype&&h.next&&(Se(h,c,!0),"function"==typeof h[Oe]||it(h,Oe,Me)),d&&g&&"values"!==g.name&&(p=!0,m=function(){return g.call(this)}),!Ce&&!p&&f[Oe]||it(f,Oe,m),Wt[e]=m,Wt[c]=Me,r)if(a={values:d?m:u("values"),keys:o?m:u("keys"),entries:_},s)for(l in a)l in f||ut(f,l,a[l]);else ft(ft.P+ft.F*(Ce||p),e,a);return a},ke=Re(Array,"Array",(function(t,e){this._t=re(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,ae(1)):ae(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values");Wt.Arguments=Wt.Array,Ot("keys"),Ot("values"),Ot("entries"),ft(ft.S+ft.F*Y((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)Kt(i,t,arguments[t++]);return i.length=e,i}});var Le=Pt("species"),De=function(t){var e=X[t];z&&e&&!e[Le]&&tt.f(e,Le,{configurable:!0,get:function(){return this}})};De("Array");var Ne=Pt("toPrimitive"),Fe=Date.prototype;Ne in Fe||it(Fe,Ne,(function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return Q(W(this),"number"!=t)}));var Be=Pt("hasInstance"),Ue=Function.prototype;Be in Ue||tt.f(Ue,Be,{value:function(t){if("function"!=typeof this||!G(t))return!1;if(!G(this.prototype))return t instanceof this;for(;t=Ie(t);)if(this.prototype===t)return!0;return!1}});var je=tt.f,Ve=Function.prototype,Xe=/^\s*function ([^ (]*)/;"name"in Ve||z&&je(Ve,"name",{configurable:!0,get:function(){try{return(""+this).match(Xe)[1]}catch(t){return""}}});var He=function(t,e,i){for(var n in e)ut(t,n,e[n],i);return t},Ge=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t},We=V((function(t){var e={},i={},n=t.exports=function(t,n,r,o,s){var a,l,h,u,c=s?function(){return t}:te(t),d=dt(r,o,n?2:1),p=0;if("function"!=typeof c)throw TypeError(t+" is not iterable!");if(qt(c)){for(a=St(t.length);a>p;p++)if((u=n?d(W(l=t[p])[0],l[1]):d(t[p]))===e||u===i)return u}else for(h=c.call(t);!(l=h.next()).done;)if((u=Gt(h,d,l.value,n))===e||u===i)return u};n.BREAK=e,n.RETURN=i})),Ye=V((function(t){var e=at("meta"),i=tt.f,n=0,r=Object.isExtensible||function(){return!0},o=!Y((function(){return r(Object.preventExtensions({}))})),s=function(t){i(t,e,{value:{i:"O"+ ++n,w:{}}})},a=t.exports={KEY:e,NEED:!1,fastKey:function(t,i){if(!G(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!rt(t,e)){if(!r(t))return"F";if(!i)return"E";s(t)}return t[e].i},getWeak:function(t,i){if(!rt(t,e)){if(!r(t))return!0;if(!i)return!1;s(t)}return t[e].w},onFreeze:function(t){return o&&a.NEED&&r(t)&&!rt(t,e)&&s(t),t}}})),ze=(Ye.KEY,Ye.NEED,Ye.fastKey,Ye.getWeak,Ye.onFreeze,function(t,e){if(!G(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}),qe=tt.f,Ke=Ye.fastKey,Je=z?"_s":"size",Ze=function(t,e){var i,n=Ke(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i},Qe={getConstructor:function(t,e,i,n){var r=t((function(t,o){Ge(t,r,e,"_i"),t._t=e,t._i=xe(null),t._f=void 0,t._l=void 0,t[Je]=0,null!=o&&We(o,i,t[n],t)}));return He(r.prototype,{clear:function(){for(var t=ze(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[Je]=0},delete:function(t){var i=ze(this,e),n=Ze(i,t);if(n){var r=n.n,o=n.p;delete i._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),i._f==n&&(i._f=r),i._l==n&&(i._l=o),i[Je]--}return!!n},forEach:function(t){ze(this,e);for(var i,n=dt(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!Ze(ze(this,e),t)}}),z&&qe(r.prototype,"size",{get:function(){return ze(this,e)[Je]}}),r},def:function(t,e,i){var n,r,o=Ze(t,e);return o?o.v=i:(t._l=o={i:r=Ke(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[Je]++,"F"!==r&&(t._i[r]=o)),t},getEntry:Ze,setStrong:function(t,e,i){Re(t,e,(function(t,i){this._t=ze(t,e),this._k=i,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?ae(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,ae(1))}),i?"entries":"values",!i,!0),De(e)}},$e={f:{}.propertyIsEnumerable},ti=Object.getOwnPropertyDescriptor,ei={f:z?ti:function(t,e){if(t=re(t),e=Q(e,!0),Z)try{return ti(t,e)}catch(t){}if(rt(t,e))return et(!$e.f.call(t,e),t[e])}},ii=function(t,e){if(W(t),!G(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},ni={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=dt(Function.call,ei.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return ii(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:ii},ri=ni.set,oi=function(t,e,i){var n,r=e.constructor;return r!==i&&"function"==typeof r&&(n=r.prototype)!==i.prototype&&G(n)&&ri&&ri(t,n),t},si=function(t,e,i,n,r,o){var s=X[t],a=s,l=r?"set":"add",h=a&&a.prototype,u={},c=function(t){var e=h[t];ut(h,t,"delete"==t?function(t){return!(o&&!G(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!G(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!G(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof a&&(o||h.forEach&&!Y((function(){(new a).entries().next()})))){var d=new a,p=d[l](o?{}:-0,1)!=d,f=Y((function(){d.has(1)})),g=ne((function(t){new a(t)})),m=!o&&Y((function(){for(var t=new a,e=5;e--;)t[l](e,e);return!t.has(-0)}));g||((a=e((function(e,i){Ge(e,a,t);var n=oi(new s,e,a);return null!=i&&We(i,r,n[l],n),n}))).prototype=h,h.constructor=a),(f||m)&&(c("delete"),c("has"),r&&c("get")),(m||p)&&c(l),o&&h.clear&&delete h.clear}else a=n.getConstructor(e,t,r,l),He(a.prototype,i),Ye.NEED=!0;return Se(a,t),u[t]=a,ft(ft.G+ft.W+ft.F*(a!=s),u),o||n.setStrong(a,t,r),a},ai=(si("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=Qe.getEntry(ze(this,"Map"),t);return e&&e.v},set:function(t,e){return Qe.def(ze(this,"Map"),0===t?0:t,e)}},Qe,!0),Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}),li=Math.sqrt,hi=Math.acosh;ft(ft.S+ft.F*!(hi&&710==Math.floor(hi(Number.MAX_VALUE))&&hi(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:ai(t-1+li(t-1)*li(t+1))}});var ui=Math.asinh;ft(ft.S+ft.F*!(ui&&1/ui(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}});var ci=Math.atanh;ft(ft.S+ft.F*!(ci&&1/ci(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}});var di=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1};ft(ft.S,"Math",{cbrt:function(t){return di(t=+t)*Math.pow(Math.abs(t),1/3)}}),ft(ft.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}});var pi=Math.exp;ft(ft.S,"Math",{cosh:function(t){return(pi(t=+t)+pi(-t))/2}});var fi=Math.expm1,gi=!fi||fi(10)>22025.465794806718||fi(10)<22025.465794806718||-2e-17!=fi(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:fi;ft(ft.S+ft.F*(gi!=Math.expm1),"Math",{expm1:gi});var mi=Math.pow,_i=mi(2,-52),vi=mi(2,-23),yi=mi(2,127)*(2-vi),bi=mi(2,-126),xi=Math.fround||function(t){var e,i,n=Math.abs(t),r=di(t);return n<bi?r*function(t){return t+1/_i-1/_i}(n/bi/vi)*bi*vi:(i=(e=(1+vi/_i)*n)-(e-n))>yi||i!=i?r*(1/0):r*i};ft(ft.S,"Math",{fround:xi});var wi=Math.abs;ft(ft.S,"Math",{hypot:function(t,e){for(var i,n,r=0,o=0,s=arguments.length,a=0;o<s;)a<(i=wi(arguments[o++]))?(r=r*(n=a/i)*n+1,a=i):r+=i>0?(n=i/a)*n:i;return a===1/0?1/0:a*Math.sqrt(r)}});var Ti=Math.imul;ft(ft.S+ft.F*Y((function(){return-5!=Ti(4294967295,5)||2!=Ti.length})),"Math",{imul:function(t,e){var i=+t,n=+e,r=65535&i,o=65535&n;return 0|r*o+((65535&i>>>16)*o+r*(65535&n>>>16)<<16>>>0)}}),ft(ft.S,"Math",{log1p:ai}),ft(ft.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}}),ft(ft.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}}),ft(ft.S,"Math",{sign:di});var Si=Math.exp;ft(ft.S+ft.F*Y((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(gi(t)-gi(-t))/2:(Si(t-1)-Si(-t-1))*(Math.E/2)}});var Ei=Math.exp;ft(ft.S,"Math",{tanh:function(t){var e=gi(t=+t),i=gi(-t);return e==1/0?1:i==1/0?-1:(e-i)/(Ei(t)+Ei(-t))}}),ft(ft.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}});var Pi=pe.concat("length","prototype"),Ai={f:Object.getOwnPropertyNames||function(t){return de(t,Pi)}},Ii="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",Oi="["+Ii+"]",Ci=RegExp("^"+Oi+Oi+"*"),Mi=RegExp(Oi+Oi+"*$"),Ri=function(t,e,i){var n={},r=Y((function(){return!!Ii[t]()||"​"!="​"[t]()})),o=n[t]=r?e(ki):Ii[t];i&&(n[i]=o),ft(ft.P+ft.F*r,"String",n)},ki=Ri.trim=function(t,e){return t=String(gt(t)),1&e&&(t=t.replace(Ci,"")),2&e&&(t=t.replace(Mi,"")),t},Li=Ri,Di=Ai.f,Ni=ei.f,Fi=tt.f,Bi=Li.trim,Ui=X.Number,ji=Ui,Vi=Ui.prototype,Xi="Number"==Rt(xe(Vi)),Hi="trim"in String.prototype,Gi=function(t){var e=Q(t,!1);if("string"==typeof e&&e.length>2){var i,n,r,o=(e=Hi?e.trim():Bi(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+e}for(var s,a=e.slice(2),l=0,h=a.length;l<h;l++)if((s=a.charCodeAt(l))<48||s>r)return NaN;return parseInt(a,n)}}return+e};if(!Ui(" 0o1")||!Ui("0b1")||Ui("+0x1")){Ui=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof Ui&&(Xi?Y((function(){Vi.valueOf.call(i)})):"Number"!=Rt(i))?oi(new ji(Gi(e)),i,Ui):Gi(e)};for(var Wi,Yi=z?Di(ji):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),zi=0;Yi.length>zi;zi++)rt(ji,Wi=Yi[zi])&&!rt(Ui,Wi)&&Fi(Ui,Wi,Ni(ji,Wi));Ui.prototype=Vi,Vi.constructor=Ui,ut(X,"Number",Ui)}ft(ft.S,"Number",{EPSILON:Math.pow(2,-52)});var qi=X.isFinite;ft(ft.S,"Number",{isFinite:function(t){return"number"==typeof t&&qi(t)}});var Ki=Math.floor,Ji=function(t){return!G(t)&&isFinite(t)&&Ki(t)===t};ft(ft.S,"Number",{isInteger:Ji}),ft(ft.S,"Number",{isNaN:function(t){return t!=t}});var Zi=Math.abs;ft(ft.S,"Number",{isSafeInteger:function(t){return Ji(t)&&Zi(t)<=9007199254740991}}),ft(ft.S,"Number",{MAX_SAFE_INTEGER:9007199254740991}),ft(ft.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991});var Qi=X.parseFloat,$i=Li.trim,tn=1/Qi(Ii+"-0")!=-1/0?function(t){var e=$i(String(t),3),i=Qi(e);return 0===i&&"-"==e.charAt(0)?-0:i}:Qi;ft(ft.S+ft.F*(Number.parseFloat!=tn),"Number",{parseFloat:tn});var en=X.parseInt,nn=Li.trim,rn=/^[-+]?0[xX]/,on=8!==en(Ii+"08")||22!==en(Ii+"0x16")?function(t,e){var i=nn(String(t),3);return en(i,e>>>0||(rn.test(i)?16:10))}:en;ft(ft.S+ft.F*(Number.parseInt!=on),"Number",{parseInt:on});var sn={f:Object.getOwnPropertySymbols},an=Object.assign,ln=!an||Y((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=an({},t)[i]||Object.keys(an({},e)).join("")!=n}))?function(t,e){for(var i=mt(t),n=arguments.length,r=1,o=sn.f,s=$e.f;n>r;)for(var a,l=kt(arguments[r++]),h=o?fe(l).concat(o(l)):fe(l),u=h.length,c=0;u>c;)a=h[c++],z&&!s.call(l,a)||(i[a]=l[a]);return i}:an;ft(ft.S+ft.F,"Object",{assign:ln});var hn=!Y((function(){var t=Math.random();__defineSetter__.call(null,t,(function(){})),delete X[t]}));z&&ft(ft.P+hn,"Object",{__defineGetter__:function(t,e){tt.f(mt(this),t,{get:ct(e),enumerable:!0,configurable:!0})}}),z&&ft(ft.P+hn,"Object",{__defineSetter__:function(t,e){tt.f(mt(this),t,{set:ct(e),enumerable:!0,configurable:!0})}});var un=$e.f,cn=function(t){return function(e){for(var i,n=re(e),r=fe(n),o=r.length,s=0,a=[];o>s;)i=r[s++],z&&!un.call(n,i)||a.push(t?[i,n[i]]:n[i]);return a}},dn=cn(!0);ft(ft.S,"Object",{entries:function(t){return dn(t)}});var pn=function(t,e){var i=(H.Object||{})[t]||Object[t],n={};n[t]=e(i),ft(ft.S+ft.F*Y((function(){i(1)})),"Object",n)},fn=Ye.onFreeze;pn("freeze",(function(t){return function(e){return t&&G(e)?t(fn(e)):e}}));var gn=ei.f;pn("getOwnPropertyDescriptor",(function(){return function(t,e){return gn(re(t),e)}}));var mn=X.Reflect,_n=mn&&mn.ownKeys||function(t){var e=Ai.f(W(t)),i=sn.f;return i?e.concat(i(t)):e};ft(ft.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,n=re(t),r=ei.f,o=_n(n),s={},a=0;o.length>a;)void 0!==(i=r(n,e=o[a++]))&&Kt(s,e,i);return s}});var vn=Ai.f,yn={}.toString,bn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],xn={f:function(t){return bn&&"[object Window]"==yn.call(t)?function(t){try{return vn(t)}catch(t){return bn.slice()}}(t):vn(re(t))}};pn("getOwnPropertyNames",(function(){return xn.f})),pn("getPrototypeOf",(function(){return function(t){return Ie(mt(t))}}));var wn=ei.f;z&&ft(ft.P+hn,"Object",{__lookupGetter__:function(t){var e,i=mt(this),n=Q(t,!0);do{if(e=wn(i,n))return e.get}while(i=Ie(i))}});var Tn=ei.f;z&&ft(ft.P+hn,"Object",{__lookupSetter__:function(t){var e,i=mt(this),n=Q(t,!0);do{if(e=Tn(i,n))return e.set}while(i=Ie(i))}});var Sn=Ye.onFreeze;pn("preventExtensions",(function(t){return function(e){return t&&G(e)?t(Sn(e)):e}}));var En={};En[Pt("toStringTag")]="z",En+""!="[object z]"&&ut(Object.prototype,"toString",(function(){return"[object "+Qt(this)+"]"}),!0);var Pn=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};ft(ft.S,"Object",{is:Pn}),pn("isFrozen",(function(t){return function(e){return!G(e)||!!t&&t(e)}})),pn("isSealed",(function(t){return function(e){return!G(e)||!!t&&t(e)}})),pn("isExtensible",(function(t){return function(e){return!!G(e)&&(!t||t(e))}})),pn("keys",(function(){return function(t){return fe(mt(t))}}));var An=Ye.onFreeze;pn("seal",(function(t){return function(e){return t&&G(e)?t(An(e)):e}}));var In=cn(!1);ft(ft.S,"Object",{values:function(t){return In(t)}});var On,Cn,Mn,Rn=Pt("species"),kn=function(t,e){var i,n=W(t).constructor;return void 0===n||null==(i=W(n)[Rn])?e:ct(i)},Ln=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)},Dn=X.process,Nn=X.setImmediate,Fn=X.clearImmediate,Bn=X.MessageChannel,Un=X.Dispatch,jn=0,Vn={},Xn=function(){var t=+this;if(Vn.hasOwnProperty(t)){var e=Vn[t];delete Vn[t],e()}},Hn=function(t){Xn.call(t.data)};Nn&&Fn||(Nn=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return Vn[++jn]=function(){Ln("function"==typeof t?t:Function(t),e)},On(jn),jn},Fn=function(t){delete Vn[t]},"process"==Rt(Dn)?On=function(t){Dn.nextTick(dt(Xn,t,1))}:Un&&Un.now?On=function(t){Un.now(dt(Xn,t,1))}:Bn?(Mn=(Cn=new Bn).port2,Cn.port1.onmessage=Hn,On=dt(Mn.postMessage,Mn,1)):X.addEventListener&&"function"==typeof postMessage&&!X.importScripts?(On=function(t){X.postMessage(t+"","*")},X.addEventListener("message",Hn,!1)):On="onreadystatechange"in J("script")?function(t){_e.appendChild(J("script")).onreadystatechange=function(){_e.removeChild(this),Xn.call(t)}}:function(t){setTimeout(dt(Xn,t,1),0)});var Gn={set:Nn,clear:Fn},Wn=Gn.set,Yn=X.MutationObserver||X.WebKitMutationObserver,zn=X.process,qn=X.Promise,Kn="process"==Rt(zn);function Jn(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=ct(e),this.reject=ct(i)}var Zn,Qn,$n,tr,er={f:function(t){return new Jn(t)}},ir=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},nr=X.navigator,rr=nr&&nr.userAgent||"",or=function(t,e){if(W(t),G(e)&&e.constructor===t)return e;var i=er.f(t);return(0,i.resolve)(e),i.promise},sr=Gn.set,ar=function(){var t,e,i,n=function(){var n,r;for(Kn&&(n=zn.domain)&&n.exit();t;){r=t.fn,t=t.next;try{r()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(Kn)i=function(){zn.nextTick(n)};else if(!Yn||X.navigator&&X.navigator.standalone)if(qn&&qn.resolve){var r=qn.resolve(void 0);i=function(){r.then(n)}}else i=function(){Wn.call(X,n)};else{var o=!0,s=document.createTextNode("");new Yn(n).observe(s,{characterData:!0}),i=function(){s.data=o=!o}}return function(n){var r={fn:n,next:void 0};e&&(e.next=r),t||(t=r,i()),e=r}}(),lr=X.TypeError,hr=X.process,ur=hr&&hr.versions,cr=ur&&ur.v8||"",dr=X.Promise,pr="process"==Qt(hr),fr=function(){},gr=Qn=er.f,mr=!!function(){try{var t=dr.resolve(1),e=(t.constructor={})[Pt("species")]=function(t){t(fr,fr)};return(pr||"function"==typeof PromiseRejectionEvent)&&t.then(fr)instanceof e&&0!==cr.indexOf("6.6")&&-1===rr.indexOf("Chrome/66")}catch(t){}}(),_r=function(t){var e;return!(!G(t)||"function"!=typeof(e=t.then))&&e},vr=function(t,e){if(!t._n){t._n=!0;var i=t._c;ar((function(){for(var n=t._v,r=1==t._s,o=0,s=function(e){var i,o,s,a=r?e.ok:e.fail,l=e.resolve,h=e.reject,u=e.domain;try{a?(r||(2==t._h&&xr(t),t._h=1),!0===a?i=n:(u&&u.enter(),i=a(n),u&&(u.exit(),s=!0)),i===e.promise?h(lr("Promise-chain cycle")):(o=_r(i))?o.call(i,l,h):l(i)):h(n)}catch(t){u&&!s&&u.exit(),h(t)}};i.length>o;)s(i[o++]);t._c=[],t._n=!1,e&&!t._h&&yr(t)}))}},yr=function(t){sr.call(X,(function(){var e,i,n,r=t._v,o=br(t);if(o&&(e=ir((function(){pr?hr.emit("unhandledRejection",r,t):(i=X.onunhandledrejection)?i({promise:t,reason:r}):(n=X.console)&&n.error&&n.error("Unhandled promise rejection",r)})),t._h=pr||br(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},br=function(t){return 1!==t._h&&0===(t._a||t._c).length},xr=function(t){sr.call(X,(function(){var e;pr?hr.emit("rejectionHandled",t):(e=X.onrejectionhandled)&&e({promise:t,reason:t._v})}))},wr=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),vr(e,!0))},Tr=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw lr("Promise can't be resolved itself");(e=_r(t))?ar((function(){var n={_w:i,_d:!1};try{e.call(t,dt(Tr,n,1),dt(wr,n,1))}catch(t){wr.call(n,t)}})):(i._v=t,i._s=1,vr(i,!1))}catch(t){wr.call({_w:i,_d:!1},t)}}};mr||(dr=function(t){Ge(this,dr,"Promise","_h"),ct(t),Zn.call(this);try{t(dt(Tr,this,1),dt(wr,this,1))}catch(t){wr.call(this,t)}},(Zn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=He(dr.prototype,{then:function(t,e){var i=gr(kn(this,dr));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=pr?hr.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&vr(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),$n=function(){var t=new Zn;this.promise=t,this.resolve=dt(Tr,t,1),this.reject=dt(wr,t,1)},er.f=gr=function(t){return t===dr||t===tr?new $n(t):Qn(t)}),ft(ft.G+ft.W+ft.F*!mr,{Promise:dr}),Se(dr,"Promise"),De("Promise"),tr=H.Promise,ft(ft.S+ft.F*!mr,"Promise",{reject:function(t){var e=gr(this);return(0,e.reject)(t),e.promise}}),ft(ft.S+ft.F*!mr,"Promise",{resolve:function(t){return or(this,t)}}),ft(ft.S+ft.F*!(mr&&ne((function(t){dr.all(t).catch(fr)}))),"Promise",{all:function(t){var e=this,i=gr(e),n=i.resolve,r=i.reject,o=ir((function(){var i=[],o=0,s=1;We(t,!1,(function(t){var a=o++,l=!1;i.push(void 0),s++,e.resolve(t).then((function(t){l||(l=!0,i[a]=t,--s||n(i))}),r)})),--s||n(i)}));return o.e&&r(o.v),i.promise},race:function(t){var e=this,i=gr(e),n=i.reject,r=ir((function(){We(t,!1,(function(t){e.resolve(t).then(i.resolve,n)}))}));return r.e&&n(r.v),i.promise}}),ft(ft.P+ft.R,"Promise",{finally:function(t){var e=kn(this,H.Promise||X.Promise),i="function"==typeof t;return this.then(i?function(i){return or(e,t()).then((function(){return i}))}:t,i?function(i){return or(e,t()).then((function(){throw i}))}:t)}});var Sr=(X.Reflect||{}).apply,Er=Function.apply;ft(ft.S+ft.F*!Y((function(){Sr((function(){}))})),"Reflect",{apply:function(t,e,i){var n=ct(t),r=W(i);return Sr?Sr(n,e,r):Er.call(n,e,r)}});var Pr=[].slice,Ar={},Ir=function(t,e,i){if(!(e in Ar)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";Ar[e]=Function("F,a","return new F("+n.join(",")+")")}return Ar[e](t,i)},Or=Function.bind||function(t){var e=ct(this),i=Pr.call(arguments,1),n=function(){var r=i.concat(Pr.call(arguments));return this instanceof n?Ir(e,r.length,r):Ln(e,r,t)};return G(e.prototype)&&(n.prototype=e.prototype),n},Cr=(X.Reflect||{}).construct,Mr=Y((function(){function t(){}return!(Cr((function(){}),[],t)instanceof t)})),Rr=!Y((function(){Cr((function(){}))}));ft(ft.S+ft.F*(Mr||Rr),"Reflect",{construct:function(t,e){ct(t),W(e);var i=arguments.length<3?t:ct(arguments[2]);if(Rr&&!Mr)return Cr(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(Or.apply(t,n))}var r=i.prototype,o=xe(G(r)?r:Object.prototype),s=Function.apply.call(t,o,e);return G(s)?s:o}}),ft(ft.S+ft.F*Y((function(){Reflect.defineProperty(tt.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,i){W(t),e=Q(e,!0),W(i);try{return tt.f(t,e,i),!0}catch(t){return!1}}});var kr=ei.f;ft(ft.S,"Reflect",{deleteProperty:function(t,e){var i=kr(W(t),e);return!(i&&!i.configurable)&&delete t[e]}}),ft(ft.S,"Reflect",{get:function t(e,i){var n,r,o=arguments.length<3?e:arguments[2];return W(e)===o?e[i]:(n=ei.f(e,i))?rt(n,"value")?n.value:void 0!==n.get?n.get.call(o):void 0:G(r=Ie(e))?t(r,i,o):void 0}}),ft(ft.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return ei.f(W(t),e)}}),ft(ft.S,"Reflect",{getPrototypeOf:function(t){return Ie(W(t))}}),ft(ft.S,"Reflect",{has:function(t,e){return e in t}});var Lr=Object.isExtensible;ft(ft.S,"Reflect",{isExtensible:function(t){return W(t),!Lr||Lr(t)}}),ft(ft.S,"Reflect",{ownKeys:_n});var Dr=Object.preventExtensions;ft(ft.S,"Reflect",{preventExtensions:function(t){W(t);try{return Dr&&Dr(t),!0}catch(t){return!1}}}),ft(ft.S,"Reflect",{set:function t(e,i,n){var r,o,s=arguments.length<4?e:arguments[3],a=ei.f(W(e),i);if(!a){if(G(o=Ie(e)))return t(o,i,n,s);a=et(0)}if(rt(a,"value")){if(!1===a.writable||!G(s))return!1;if(r=ei.f(s,i)){if(r.get||r.set||!1===r.writable)return!1;r.value=n,tt.f(s,i,r)}else tt.f(s,i,et(0,n));return!0}return void 0!==a.set&&(a.set.call(s,n),!0)}}),ni&&ft(ft.S,"Reflect",{setPrototypeOf:function(t,e){ni.check(t,e);try{return ni.set(t,e),!0}catch(t){return!1}}});var Nr=Pt("match"),Fr=function(t){var e;return G(t)&&(void 0!==(e=t[Nr])?!!e:"RegExp"==Rt(t))},Br=function(){var t=W(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Ur=tt.f,jr=Ai.f,Vr=X.RegExp,Xr=Vr,Hr=Vr.prototype,Gr=/a/g,Wr=/a/g,Yr=new Vr(Gr)!==Gr;if(z&&(!Yr||Y((function(){return Wr[Pt("match")]=!1,Vr(Gr)!=Gr||Vr(Wr)==Wr||"/a/i"!=Vr(Gr,"i")})))){Vr=function(t,e){var i=this instanceof Vr,n=Fr(t),r=void 0===e;return!i&&n&&t.constructor===Vr&&r?t:oi(Yr?new Xr(n&&!r?t.source:t,e):Xr((n=t instanceof Vr)?t.source:t,n&&r?Br.call(t):e),i?this:Hr,Vr)};for(var zr=function(t){t in Vr||Ur(Vr,t,{configurable:!0,get:function(){return Xr[t]},set:function(e){Xr[t]=e}})},qr=jr(Xr),Kr=0;qr.length>Kr;)zr(qr[Kr++]);Hr.constructor=Vr,Vr.prototype=Hr,ut(X,"RegExp",Vr)}De("RegExp"),z&&"g"!=/./g.flags&&tt.f(RegExp.prototype,"flags",{configurable:!0,get:Br});var Jr,Zr,Qr=function(t){return function(e,i){var n,r,o=String(gt(e)),s=yt(i),a=o.length;return s<0||s>=a?t?"":void 0:(n=o.charCodeAt(s))<55296||n>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?t?o.charAt(s):n:t?o.slice(s,s+2):r-56320+(n-55296<<10)+65536}},$r=Qr(!0),to=function(t,e,i){return e+(i?$r(t,e).length:1)},eo=RegExp.prototype.exec,io=function(t,e){var i=t.exec;if("function"==typeof i){var n=i.call(t,e);if("object"!=typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==Qt(t))throw new TypeError("RegExp#exec called on incompatible receiver");return eo.call(t,e)},no=RegExp.prototype.exec,ro=String.prototype.replace,oo=no,so=(Jr=/a/,Zr=/b*/g,no.call(Jr,"a"),no.call(Zr,"a"),0!==Jr.lastIndex||0!==Zr.lastIndex),ao=void 0!==/()??/.exec("")[1];(so||ao)&&(oo=function(t){var e,i,n,r,o=this;return ao&&(i=new RegExp("^"+o.source+"$(?!\\s)",Br.call(o))),so&&(e=o.lastIndex),n=no.call(o,t),so&&n&&(o.lastIndex=o.global?n.index+n[0].length:e),ao&&n&&n.length>1&&ro.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n});var lo=oo;ft({target:"RegExp",proto:!0,forced:lo!==/./.exec},{exec:lo});var ho=Pt("species"),uo=!Y((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),co=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}(),po=function(t,e,i){var n=Pt(t),r=!Y((function(){var e={};return e[n]=function(){return 7},7!=""[t](e)})),o=r?!Y((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[ho]=function(){return i}),i[n](""),!e})):void 0;if(!r||!o||"replace"===t&&!uo||"split"===t&&!co){var s=/./[n],a=i(gt,n,""[t],(function(t,e,i,n,o){return e.exec===lo?r&&!o?{done:!0,value:s.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}})),l=a[0],h=a[1];ut(String.prototype,t,l),it(RegExp.prototype,n,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)})}};po("match",1,(function(t,e,i,n){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=n(i,t,this);if(e.done)return e.value;var r=W(t),o=String(this);if(!r.global)return io(r,o);var s=r.unicode;r.lastIndex=0;for(var a,l=[],h=0;null!==(a=io(r,o));){var u=String(a[0]);l[h]=u,""===u&&(r.lastIndex=to(o,St(r.lastIndex),s)),h++}return 0===h?null:l}]}));var fo=Math.max,go=Math.min,mo=Math.floor,_o=/\$([$&`']|\d\d?|<[^>]*>)/g,vo=/\$([$&`']|\d\d?)/g,yo=function(t){return void 0===t?t:String(t)};po("replace",2,(function(t,e,i,n){return[function(n,r){var o=t(this),s=null==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},function(t,e){var o=n(i,t,this,e);if(o.done)return o.value;var s=W(t),a=String(this),l="function"==typeof e;l||(e=String(e));var h=s.global;if(h){var u=s.unicode;s.lastIndex=0}for(var c=[];;){var d=io(s,a);if(null===d)break;if(c.push(d),!h)break;""===String(d[0])&&(s.lastIndex=to(a,St(s.lastIndex),u))}for(var p="",f=0,g=0;g<c.length;g++){d=c[g];for(var m=String(d[0]),_=fo(go(yt(d.index),a.length),0),v=[],y=1;y<d.length;y++)v.push(yo(d[y]));var b=d.groups;if(l){var x=[m].concat(v,_,a);void 0!==b&&x.push(b);var w=String(e.apply(void 0,x))}else w=r(m,a,_,v,b,e);_>=f&&(p+=a.slice(f,_)+w,f=_+m.length)}return p+a.slice(f)}];function r(t,e,n,r,o,s){var a=n+t.length,l=r.length,h=vo;return void 0!==o&&(o=mt(o),h=_o),i.call(s,h,(function(i,s){var h;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":h=o[s.slice(1,-1)];break;default:var u=+s;if(0===u)return i;if(u>l){var c=mo(u/10);return 0===c?i:c<=l?void 0===r[c-1]?s.charAt(1):r[c-1]+s.charAt(1):i}h=r[u-1]}return void 0===h?"":h}))}}));var bo=Math.min,xo=[].push,wo=!Y((function(){}));po("split",2,(function(t,e,i,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!Fr(t))return i.call(n,t,e);for(var r,o,s,a=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,u=void 0===e?4294967295:e>>>0,c=new RegExp(t.source,l+"g");(r=lo.call(c,n))&&!((o=c.lastIndex)>h&&(a.push(n.slice(h,r.index)),r.length>1&&r.index<n.length&&xo.apply(a,r.slice(1)),s=r[0].length,h=o,a.length>=u));)c.lastIndex===r.index&&c.lastIndex++;return h===n.length?!s&&c.test("")||a.push(""):a.push(n.slice(h)),a.length>u?a.slice(0,u):a}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var o=t(this),s=null==i?void 0:i[e];return void 0!==s?s.call(i,o,n):r.call(String(o),i,n)},function(t,e){var o=n(r,t,this,e,r!==i);if(o.done)return o.value;var s=W(t),a=String(this),l=kn(s,RegExp),h=s.unicode,u=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(wo?"y":"g"),c=new l(wo?s:"^(?:"+s.source+")",u),d=void 0===e?4294967295:e>>>0;if(0===d)return[];if(0===a.length)return null===io(c,a)?[a]:[];for(var p=0,f=0,g=[];f<a.length;){c.lastIndex=wo?f:0;var m,_=io(c,wo?a:a.slice(f));if(null===_||(m=bo(St(c.lastIndex+(wo?0:f)),a.length))===p)f=to(a,f,h);else{if(g.push(a.slice(p,f)),g.length===d)return g;for(var v=1;v<=_.length-1;v++)if(g.push(_[v]),g.length===d)return g;f=p=m}}return g.push(a.slice(p)),g}]})),po("search",1,(function(t,e,i,n){return[function(i){var n=t(this),r=null==i?void 0:i[e];return void 0!==r?r.call(i,n):new RegExp(i)[e](String(n))},function(t){var e=n(i,t,this);if(e.done)return e.value;var r=W(t),o=String(this),s=r.lastIndex;Pn(s,0)||(r.lastIndex=0);var a=io(r,o);return Pn(r.lastIndex,s)||(r.lastIndex=s),null===a?-1:a.index}]}));var To=/./.toString,So=function(t){ut(RegExp.prototype,"toString",t,!0)};Y((function(){return"/a/b"!=To.call({source:"a",flags:"b"})}))?So((function(){var t=W(this);return"/".concat(t.source,"/","flags"in t?t.flags:!z&&t instanceof RegExp?Br.call(t):void 0)})):"toString"!=To.name&&So((function(){return To.call(this)}));si("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return Qe.def(ze(this,"Set"),t=0===t?0:t,t)}},Qe);var Eo={f:Pt},Po=tt.f,Ao=function(t){var e=H.Symbol||(H.Symbol=X.Symbol||{});"_"==t.charAt(0)||t in e||Po(e,t,{value:Eo.f(t)})},Io=Ye.KEY,Oo=ei.f,Co=tt.f,Mo=xn.f,Ro=X.Symbol,ko=X.JSON,Lo=ko&&ko.stringify,Do=Pt("_hidden"),No=Pt("toPrimitive"),Fo={}.propertyIsEnumerable,Bo=lt("symbol-registry"),Uo=lt("symbols"),jo=lt("op-symbols"),Vo=Object.prototype,Xo="function"==typeof Ro&&!!sn.f,Ho=X.QObject,Go=!Ho||!Ho.prototype||!Ho.prototype.findChild,Wo=z&&Y((function(){return 7!=xe(Co({},"a",{get:function(){return Co(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=Oo(Vo,e);n&&delete Vo[e],Co(t,e,i),n&&t!==Vo&&Co(Vo,e,n)}:Co,Yo=function(t){var e=Uo[t]=xe(Ro.prototype);return e._k=t,e},zo=Xo&&"symbol"==typeof Ro.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof Ro},qo=function(t,e,i){return t===Vo&&qo(jo,e,i),W(t),e=Q(e,!0),W(i),rt(Uo,e)?(i.enumerable?(rt(t,Do)&&t[Do][e]&&(t[Do][e]=!1),i=xe(i,{enumerable:et(0,!1)})):(rt(t,Do)||Co(t,Do,et(1,{})),t[Do][e]=!0),Wo(t,e,i)):Co(t,e,i)},Ko=function(t,e){W(t);for(var i,n=function(t){var e=fe(t),i=sn.f;if(i)for(var n,r=i(t),o=$e.f,s=0;r.length>s;)o.call(t,n=r[s++])&&e.push(n);return e}(e=re(e)),r=0,o=n.length;o>r;)qo(t,i=n[r++],e[i]);return t},Jo=function(t){var e=Fo.call(this,t=Q(t,!0));return!(this===Vo&&rt(Uo,t)&&!rt(jo,t))&&(!(e||!rt(this,t)||!rt(Uo,t)||rt(this,Do)&&this[Do][t])||e)},Zo=function(t,e){if(t=re(t),e=Q(e,!0),t!==Vo||!rt(Uo,e)||rt(jo,e)){var i=Oo(t,e);return!i||!rt(Uo,e)||rt(t,Do)&&t[Do][e]||(i.enumerable=!0),i}},Qo=function(t){for(var e,i=Mo(re(t)),n=[],r=0;i.length>r;)rt(Uo,e=i[r++])||e==Do||e==Io||n.push(e);return n},$o=function(t){for(var e,i=t===Vo,n=Mo(i?jo:re(t)),r=[],o=0;n.length>o;)!rt(Uo,e=n[o++])||i&&!rt(Vo,e)||r.push(Uo[e]);return r};Xo||(ut((Ro=function(){if(this instanceof Ro)throw TypeError("Symbol is not a constructor!");var t=at(arguments.length>0?arguments[0]:void 0),e=function(i){this===Vo&&e.call(jo,i),rt(this,Do)&&rt(this[Do],t)&&(this[Do][t]=!1),Wo(this,t,et(1,i))};return z&&Go&&Wo(Vo,t,{configurable:!0,set:e}),Yo(t)}).prototype,"toString",(function(){return this._k})),ei.f=Zo,tt.f=qo,Ai.f=xn.f=Qo,$e.f=Jo,sn.f=$o,z&&ut(Vo,"propertyIsEnumerable",Jo,!0),Eo.f=function(t){return Yo(Pt(t))}),ft(ft.G+ft.W+ft.F*!Xo,{Symbol:Ro});for(var ts="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),es=0;ts.length>es;)Pt(ts[es++]);for(var is=fe(Pt.store),ns=0;is.length>ns;)Ao(is[ns++]);ft(ft.S+ft.F*!Xo,"Symbol",{for:function(t){return rt(Bo,t+="")?Bo[t]:Bo[t]=Ro(t)},keyFor:function(t){if(!zo(t))throw TypeError(t+" is not a symbol!");for(var e in Bo)if(Bo[e]===t)return e},useSetter:function(){Go=!0},useSimple:function(){Go=!1}}),ft(ft.S+ft.F*!Xo,"Object",{create:function(t,e){return void 0===e?xe(t):Ko(xe(t),e)},defineProperty:qo,defineProperties:Ko,getOwnPropertyDescriptor:Zo,getOwnPropertyNames:Qo,getOwnPropertySymbols:$o});var rs=Y((function(){sn.f(1)}));ft(ft.S+ft.F*rs,"Object",{getOwnPropertySymbols:function(t){return sn.f(mt(t))}}),ko&&ft(ft.S+ft.F*(!Xo||Y((function(){var t=Ro();return"[null]"!=Lo([t])||"{}"!=Lo({a:t})||"{}"!=Lo(Object(t))}))),"JSON",{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(G(e)||void 0!==t)&&!zo(t))return Lt(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!zo(e))return e}),n[1]=e,Lo.apply(ko,n)}}),Ro.prototype[No]||it(Ro.prototype,No,Ro.prototype.valueOf),Se(Ro,"Symbol"),Se(Math,"Math",!0),Se(X.JSON,"JSON",!0),Ao("asyncIterator");var os=/"/g,ss=function(t,e,i,n){var r=String(gt(t)),o="<"+e;return""!==i&&(o+=" "+i+'="'+String(n).replace(os,"&quot;")+'"'),o+">"+r+"</"+e+">"},as=function(t,e){var i={};i[t]=e(ss),ft(ft.P+ft.F*Y((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",i)};as("anchor",(function(t){return function(e){return t(this,"a","name",e)}})),as("big",(function(t){return function(){return t(this,"big","","")}})),as("blink",(function(t){return function(){return t(this,"blink","","")}})),as("bold",(function(t){return function(){return t(this,"b","","")}}));var ls=Qr(!1);ft(ft.P,"String",{codePointAt:function(t){return ls(this,t)}});var hs=function(t,e,i){if(Fr(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(gt(t))},us=Pt("match"),cs=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[us]=!1,!"/./"[t](e)}catch(t){}}return!0},ds="".endsWith;ft(ft.P+ft.F*cs("endsWith"),"String",{endsWith:function(t){var e=hs(this,t,"endsWith"),i=arguments.length>1?arguments[1]:void 0,n=St(e.length),r=void 0===i?n:Math.min(St(i),n),o=String(t);return ds?ds.call(e,o,r):e.slice(r-o.length,r)===o}}),as("fixed",(function(t){return function(){return t(this,"tt","","")}})),as("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}})),as("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}));var ps=String.fromCharCode,fs=String.fromCodePoint;ft(ft.S+ft.F*(!!fs&&1!=fs.length),"String",{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,r=0;n>r;){if(e=+arguments[r++],wt(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?ps(e):ps(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}});ft(ft.P+ft.F*cs("includes"),"String",{includes:function(t){return!!~hs(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}}),as("italics",(function(t){return function(){return t(this,"i","","")}}));var gs=Qr(!0);Re(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=gs(e,i),this._i+=t.length,{value:t,done:!1})})),as("link",(function(t){return function(e){return t(this,"a","href",e)}}));var ms=function(t){var e=String(gt(this)),i="",n=yt(t);if(n<0||n==1/0)throw RangeError("Count can't be negative");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(i+=e);return i},_s=function(t,e,i,n){var r=String(gt(t)),o=r.length,s=void 0===i?" ":String(i),a=St(e);if(a<=o||""==s)return r;var l=a-o,h=ms.call(s,Math.ceil(l/s.length));return h.length>l&&(h=h.slice(0,l)),n?h+r:r+h},vs=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(rr);ft(ft.P+ft.F*vs,"String",{padStart:function(t){return _s(this,t,arguments.length>1?arguments[1]:void 0,!0)}});var ys=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(rr);ft(ft.P+ft.F*ys,"String",{padEnd:function(t){return _s(this,t,arguments.length>1?arguments[1]:void 0,!1)}}),ft(ft.S,"String",{raw:function(t){for(var e=re(t.raw),i=St(e.length),n=arguments.length,r=[],o=0;i>o;)r.push(String(e[o++])),o<n&&r.push(String(arguments[o]));return r.join("")}}),ft(ft.P,"String",{repeat:ms}),as("small",(function(t){return function(){return t(this,"small","","")}}));var bs="".startsWith;ft(ft.P+ft.F*cs("startsWith"),"String",{startsWith:function(t){var e=hs(this,t,"startsWith"),i=St(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return bs?bs.call(e,n,i):e.slice(i,i+n.length)===n}}),as("strike",(function(t){return function(){return t(this,"strike","","")}})),as("sub",(function(t){return function(){return t(this,"sub","","")}})),as("sup",(function(t){return function(){return t(this,"sup","","")}})),Li("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart"),Li("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd");for(var xs,ws=at("typed_array"),Ts=at("view"),Ss=!(!X.ArrayBuffer||!X.DataView),Es=Ss,Ps=0,As="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");Ps<9;)(xs=X[As[Ps++]])?(it(xs.prototype,ws,!0),it(xs.prototype,Ts,!0)):Es=!1;var Is={ABV:Ss,CONSTR:Es,TYPED:ws,VIEW:Ts},Os=function(t){if(void 0===t)return 0;var e=yt(t),i=St(e);if(e!==i)throw RangeError("Wrong length!");return i},Cs=V((function(t,e){var i=Ai.f,n=tt.f,r="prototype",o="Wrong index!",s=X.ArrayBuffer,a=X.DataView,l=X.Math,h=X.RangeError,u=X.Infinity,c=s,d=l.abs,p=l.pow,f=l.floor,g=l.log,m=l.LN2,_=z?"_b":"buffer",v=z?"_l":"byteLength",y=z?"_o":"byteOffset";function b(t,e,i){var n,r,o,s=new Array(i),a=8*i-e-1,l=(1<<a)-1,h=l>>1,c=23===e?p(2,-24)-p(2,-77):0,_=0,v=t<0||0===t&&1/t<0?1:0;for((t=d(t))!=t||t===u?(r=t!=t?1:0,n=l):(n=f(g(t)/m),t*(o=p(2,-n))<1&&(n--,o*=2),(t+=n+h>=1?c/o:c*p(2,1-h))*o>=2&&(n++,o/=2),n+h>=l?(r=0,n=l):n+h>=1?(r=(t*o-1)*p(2,e),n+=h):(r=t*p(2,h-1)*p(2,e),n=0));e>=8;s[_++]=255&r,r/=256,e-=8);for(n=n<<e|r,a+=e;a>0;s[_++]=255&n,n/=256,a-=8);return s[--_]|=128*v,s}function x(t,e,i){var n,r=8*i-e-1,o=(1<<r)-1,s=o>>1,a=r-7,l=i-1,h=t[l--],c=127&h;for(h>>=7;a>0;c=256*c+t[l],l--,a-=8);for(n=c&(1<<-a)-1,c>>=-a,a+=e;a>0;n=256*n+t[l],l--,a-=8);if(0===c)c=1-s;else{if(c===o)return n?NaN:h?-u:u;n+=p(2,e),c-=s}return(h?-1:1)*n*p(2,c-e)}function w(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function T(t){return[255&t]}function S(t){return[255&t,t>>8&255]}function E(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function P(t){return b(t,52,8)}function A(t){return b(t,23,4)}function I(t,e,i){n(t[r],e,{get:function(){return this[i]}})}function O(t,e,i,n){var r=Os(+i);if(r+e>t[v])throw h(o);var s=t[_]._b,a=r+t[y],l=s.slice(a,a+e);return n?l:l.reverse()}function C(t,e,i,n,r,s){var a=Os(+i);if(a+e>t[v])throw h(o);for(var l=t[_]._b,u=a+t[y],c=n(+r),d=0;d<e;d++)l[u+d]=c[s?d:e-d-1]}if(Is.ABV){if(!Y((function(){s(1)}))||!Y((function(){new s(-1)}))||Y((function(){return new s,new s(1.5),new s(NaN),"ArrayBuffer"!=s.name}))){for(var M,R=(s=function(t){return Ge(this,s),new c(Os(t))})[r]=c[r],k=i(c),L=0;k.length>L;)(M=k[L++])in s||it(s,M,c[M]);R.constructor=s}var D=new a(new s(2)),N=a[r].setInt8;D.setInt8(0,2147483648),D.setInt8(1,2147483649),!D.getInt8(0)&&D.getInt8(1)||He(a[r],{setInt8:function(t,e){N.call(this,t,e<<24>>24)},setUint8:function(t,e){N.call(this,t,e<<24>>24)}},!0)}else s=function(t){Ge(this,s,"ArrayBuffer");var e=Os(t);this._b=Ct.call(new Array(e),0),this[v]=e},a=function(t,e,i){Ge(this,a,"DataView"),Ge(t,s,"DataView");var n=t[v],r=yt(e);if(r<0||r>n)throw h("Wrong offset!");if(r+(i=void 0===i?n-r:St(i))>n)throw h("Wrong length!");this[_]=t,this[y]=r,this[v]=i},z&&(I(s,"byteLength","_l"),I(a,"buffer","_b"),I(a,"byteLength","_l"),I(a,"byteOffset","_o")),He(a[r],{getInt8:function(t){return O(this,1,t)[0]<<24>>24},getUint8:function(t){return O(this,1,t)[0]},getInt16:function(t){var e=O(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=O(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return w(O(this,4,t,arguments[1]))},getUint32:function(t){return w(O(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return x(O(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return x(O(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){C(this,1,t,T,e)},setUint8:function(t,e){C(this,1,t,T,e)},setInt16:function(t,e){C(this,2,t,S,e,arguments[2])},setUint16:function(t,e){C(this,2,t,S,e,arguments[2])},setInt32:function(t,e){C(this,4,t,E,e,arguments[2])},setUint32:function(t,e){C(this,4,t,E,e,arguments[2])},setFloat32:function(t,e){C(this,4,t,A,e,arguments[2])},setFloat64:function(t,e){C(this,8,t,P,e,arguments[2])}});Se(s,"ArrayBuffer"),Se(a,"DataView"),it(a[r],Is.VIEW,!0),e.ArrayBuffer=s,e.DataView=a})),Ms=X.ArrayBuffer,Rs=Cs.ArrayBuffer,ks=Cs.DataView,Ls=Is.ABV&&Ms.isView,Ds=Rs.prototype.slice,Ns=Is.VIEW;ft(ft.G+ft.W+ft.F*(Ms!==Rs),{ArrayBuffer:Rs}),ft(ft.S+ft.F*!Is.CONSTR,"ArrayBuffer",{isView:function(t){return Ls&&Ls(t)||G(t)&&Ns in t}}),ft(ft.P+ft.U+ft.F*Y((function(){return!new Rs(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==Ds&&void 0===e)return Ds.call(W(this),t);for(var i=W(this).byteLength,n=wt(t,i),r=wt(void 0===e?i:e,i),o=new(kn(this,Rs))(St(r-n)),s=new ks(this),a=new ks(o),l=0;n<r;)a.setUint8(l++,s.getUint8(n++));return o}}),De("ArrayBuffer");var Fs=V((function(t){if(z){var e=X,i=Y,n=ft,r=Is,o=Cs,s=dt,a=Ge,l=et,h=it,u=He,c=yt,d=St,p=Os,f=wt,g=Q,m=rt,_=Qt,v=G,y=mt,b=qt,x=xe,w=Ie,T=Ai.f,S=te,E=at,P=Pt,A=Ft,I=oe,O=kn,C=ke,M=Wt,R=ne,k=De,L=Ct,D=Et,N=tt,F=ei,B=N.f,U=F.f,j=e.RangeError,V=e.TypeError,H=e.Uint8Array,W=Array.prototype,q=o.ArrayBuffer,K=o.DataView,J=A(0),Z=A(2),$=A(3),nt=A(4),ot=A(5),st=A(6),lt=I(!0),ht=I(!1),ut=C.values,ct=C.keys,pt=C.entries,gt=W.lastIndexOf,_t=W.reduce,vt=W.reduceRight,bt=W.join,xt=W.sort,Tt=W.slice,At=W.toString,It=W.toLocaleString,Ot=P("iterator"),Mt=P("toStringTag"),Rt=E("typed_constructor"),kt=E("def_constructor"),Lt=r.CONSTR,Dt=r.TYPED,Nt=r.VIEW,Bt=A(1,(function(t,e){return Ht(O(t,t[kt]),e)})),Ut=i((function(){return 1===new H(new Uint16Array([1]).buffer)[0]})),jt=!!H&&!!H.prototype.set&&i((function(){new H(1).set({})})),Vt=function(t,e){var i=c(t);if(i<0||i%e)throw j("Wrong offset!");return i},Xt=function(t){if(v(t)&&Dt in t)return t;throw V(t+" is not a typed array!")},Ht=function(t,e){if(!(v(t)&&Rt in t))throw V("It is not a typed array constructor!");return new t(e)},Gt=function(t,e){return Yt(O(t,t[kt]),e)},Yt=function(t,e){for(var i=0,n=e.length,r=Ht(t,n);n>i;)r[i]=e[i++];return r},zt=function(t,e,i){B(t,e,{get:function(){return this._d[i]}})},Kt=function(t){var e,i,n,r,o,a,l=y(t),h=arguments.length,u=h>1?arguments[1]:void 0,c=void 0!==u,p=S(l);if(null!=p&&!b(p)){for(a=p.call(l),n=[],e=0;!(o=a.next()).done;e++)n.push(o.value);l=n}for(c&&h>2&&(u=s(u,arguments[2],2)),e=0,i=d(l.length),r=Ht(this,i);i>e;e++)r[e]=c?u(l[e],e):l[e];return r},Jt=function(){for(var t=0,e=arguments.length,i=Ht(this,e);e>t;)i[t]=arguments[t++];return i},Zt=!!H&&i((function(){It.call(new H(1))})),$t=function(){return It.apply(Zt?Tt.call(Xt(this)):Xt(this),arguments)},ee={copyWithin:function(t,e){return D.call(Xt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return L.apply(Xt(this),arguments)},filter:function(t){return Gt(this,Z(Xt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return ot(Xt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return st(Xt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){J(Xt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return ht(Xt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return lt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return bt.apply(Xt(this),arguments)},lastIndexOf:function(t){return gt.apply(Xt(this),arguments)},map:function(t){return Bt(Xt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return _t.apply(Xt(this),arguments)},reduceRight:function(t){return vt.apply(Xt(this),arguments)},reverse:function(){for(var t,e=Xt(this).length,i=Math.floor(e/2),n=0;n<i;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return $(Xt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return xt.call(Xt(this),t)},subarray:function(t,e){var i=Xt(this),n=i.length,r=f(t,n);return new(O(i,i[kt]))(i.buffer,i.byteOffset+r*i.BYTES_PER_ELEMENT,d((void 0===e?n:f(e,n))-r))}},ie=function(t,e){return Gt(this,Tt.call(Xt(this),t,e))},re=function(t){Xt(this);var e=Vt(arguments[1],1),i=this.length,n=y(t),r=d(n.length),o=0;if(r+e>i)throw j("Wrong length!");for(;o<r;)this[e+o]=n[o++]},se={entries:function(){return pt.call(Xt(this))},keys:function(){return ct.call(Xt(this))},values:function(){return ut.call(Xt(this))}},ae=function(t,e){return v(t)&&t[Dt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},le=function(t,e){return ae(t,e=g(e,!0))?l(2,t[e]):U(t,e)},he=function(t,e,i){return!(ae(t,e=g(e,!0))&&v(i)&&m(i,"value"))||m(i,"get")||m(i,"set")||i.configurable||m(i,"writable")&&!i.writable||m(i,"enumerable")&&!i.enumerable?B(t,e,i):(t[e]=i.value,t)};Lt||(F.f=le,N.f=he),n(n.S+n.F*!Lt,"Object",{getOwnPropertyDescriptor:le,defineProperty:he}),i((function(){At.call({})}))&&(At=It=function(){return bt.call(this)});var ue=u({},ee);u(ue,se),h(ue,Ot,se.values),u(ue,{slice:ie,set:re,constructor:function(){},toString:At,toLocaleString:$t}),zt(ue,"buffer","b"),zt(ue,"byteOffset","o"),zt(ue,"byteLength","l"),zt(ue,"length","e"),B(ue,Mt,{get:function(){return this[Dt]}}),t.exports=function(t,o,s,l){var u=t+((l=!!l)?"Clamped":"")+"Array",c="get"+t,f="set"+t,g=e[u],m=g||{},y=g&&w(g),b=!g||!r.ABV,S={},E=g&&g.prototype,P=function(t,e){B(t,e,{get:function(){return function(t,e){var i=t._d;return i.v[c](e*o+i.o,Ut)}(this,e)},set:function(t){return function(t,e,i){var n=t._d;l&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),n.v[f](e*o+n.o,i,Ut)}(this,e,t)},enumerable:!0})};b?(g=s((function(t,e,i,n){a(t,g,u,"_d");var r,s,l,c,f=0,m=0;if(v(e)){if(!(e instanceof q||"ArrayBuffer"==(c=_(e))||"SharedArrayBuffer"==c))return Dt in e?Yt(g,e):Kt.call(g,e);r=e,m=Vt(i,o);var y=e.byteLength;if(void 0===n){if(y%o)throw j("Wrong length!");if((s=y-m)<0)throw j("Wrong length!")}else if((s=d(n)*o)+m>y)throw j("Wrong length!");l=s/o}else l=p(e),r=new q(s=l*o);for(h(t,"_d",{b:r,o:m,l:s,e:l,v:new K(r)});f<l;)P(t,f++)})),E=g.prototype=x(ue),h(E,"constructor",g)):i((function(){g(1)}))&&i((function(){new g(-1)}))&&R((function(t){new g,new g(null),new g(1.5),new g(t)}),!0)||(g=s((function(t,e,i,n){var r;return a(t,g,u),v(e)?e instanceof q||"ArrayBuffer"==(r=_(e))||"SharedArrayBuffer"==r?void 0!==n?new m(e,Vt(i,o),n):void 0!==i?new m(e,Vt(i,o)):new m(e):Dt in e?Yt(g,e):Kt.call(g,e):new m(p(e))})),J(y!==Function.prototype?T(m).concat(T(y)):T(m),(function(t){t in g||h(g,t,m[t])})),g.prototype=E,E.constructor=g);var A=E[Ot],I=!!A&&("values"==A.name||null==A.name),O=se.values;h(g,Rt,!0),h(E,Dt,u),h(E,Nt,!0),h(E,kt,g),(l?new g(1)[Mt]==u:Mt in E)||B(E,Mt,{get:function(){return u}}),S[u]=g,n(n.G+n.W+n.F*(g!=m),S),n(n.S,u,{BYTES_PER_ELEMENT:o}),n(n.S+n.F*i((function(){m.of.call(g,1)})),u,{from:Kt,of:Jt}),"BYTES_PER_ELEMENT"in E||h(E,"BYTES_PER_ELEMENT",o),n(n.P,u,ee),k(u),n(n.P+n.F*jt,u,{set:re}),n(n.P+n.F*!I,u,se),E.toString!=At&&(E.toString=At),n(n.P+n.F*i((function(){new g(1).slice()})),u,{slice:ie}),n(n.P+n.F*(i((function(){return[1,2].toLocaleString()!=new g([1,2]).toLocaleString()}))||!i((function(){E.toLocaleString.call([1,2])}))),u,{toLocaleString:$t}),M[u]=I?A:O,I||h(E,Ot,O)}}else t.exports=function(){}}));Fs("Int8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Fs("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Fs("Uint8",1,(function(t){return function(e,i,n){return t(this,e,i,n)}}),!0),Fs("Int16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Fs("Uint16",2,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Fs("Int32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Fs("Uint32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Fs("Float32",4,(function(t){return function(e,i,n){return t(this,e,i,n)}})),Fs("Float64",8,(function(t){return function(e,i,n){return t(this,e,i,n)}}));var Bs=Ye.getWeak,Us=Ft(5),js=Ft(6),Vs=0,Xs=function(t){return t._l||(t._l=new Hs)},Hs=function(){this.a=[]},Gs=function(t,e){return Us(t.a,(function(t){return t[0]===e}))};Hs.prototype={get:function(t){var e=Gs(this,t);if(e)return e[1]},has:function(t){return!!Gs(this,t)},set:function(t,e){var i=Gs(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=js(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}};var Ws={getConstructor:function(t,e,i,n){var r=t((function(t,o){Ge(t,r,e,"_i"),t._t=e,t._i=Vs++,t._l=void 0,null!=o&&We(o,i,t[n],t)}));return He(r.prototype,{delete:function(t){if(!G(t))return!1;var i=Bs(t);return!0===i?Xs(ze(this,e)).delete(t):i&&rt(i,this._i)&&delete i[this._i]},has:function(t){if(!G(t))return!1;var i=Bs(t);return!0===i?Xs(ze(this,e)).has(t):i&&rt(i,this._i)}}),r},def:function(t,e,i){var n=Bs(W(e),!0);return!0===n?Xs(t).set(e,i):n[t._i]=i,t},ufstore:Xs};V((function(t){var e,i=Ft(0),n=ze,r=!X.ActiveXObject&&"ActiveXObject"in X,o=Ye.getWeak,s=Object.isExtensible,a=Ws.ufstore,l=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},h={get:function(t){if(G(t)){var e=o(t);return!0===e?a(ze(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return Ws.def(ze(this,"WeakMap"),t,e)}},u=t.exports=si("WeakMap",l,h,Ws,!0,!0);n&&r&&(e=Ws.getConstructor(l,"WeakMap"),ln(e.prototype,h),Ye.NEED=!0,i(["delete","has","get","set"],(function(t){var i=u.prototype,n=i[t];ut(i,t,(function(i,r){if(G(i)&&!s(i)){this._f||(this._f=new e);var o=this._f[t](i,r);return"set"==t?this:o}return n.call(this,i,r)}))})))}));si("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return Ws.def(ze(this,"WeakSet"),t,!0)}},Ws,!1,!0);var Ys=[].slice,zs=/MSIE .\./.test(rr),qs=function(t){return function(e,i){var n=arguments.length>2,r=!!n&&Ys.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};ft(ft.G+ft.B+ft.F*zs,{setTimeout:qs(X.setTimeout),setInterval:qs(X.setInterval)}),ft(ft.G+ft.B,{setImmediate:Gn.set,clearImmediate:Gn.clear});for(var Ks=Pt("iterator"),Js=Pt("toStringTag"),Zs=Wt.Array,Qs={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},$s=fe(Qs),ta=0;ta<$s.length;ta++){var ea,ia=$s[ta],na=Qs[ia],ra=X[ia],oa=ra&&ra.prototype;if(oa&&(oa[Ks]||it(oa,Ks,Zs),oa[Js]||it(oa,Js,ia),Wt[ia]=Zs,na))for(ea in ke)oa[ea]||ut(oa,ea,ke[ea],!0)}V((function(t){var e=function(t){var e,i=Object.prototype,n=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function l(t,e,i,n){var r=e&&e.prototype instanceof g?e:g,o=Object.create(r.prototype),s=new A(n||[]);return o._invoke=function(t,e,i){var n=u;return function(r,o){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===r)throw o;return O()}for(i.method=r,i.arg=o;;){var s=i.delegate;if(s){var a=S(s,i);if(a){if(a===f)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var l=h(t,e,i);if("normal"===l.type){if(n=i.done?p:c,l.arg===f)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=p,i.method="throw",i.arg=l.arg)}}}(t,i,s),o}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u="suspendedStart",c="suspendedYield",d="executing",p="completed",f={};function g(){}function m(){}function _(){}var v={};v[o]=function(){return this};var y=Object.getPrototypeOf,b=y&&y(y(I([])));b&&b!==i&&n.call(b,o)&&(v=b);var x=_.prototype=g.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function T(t){var e;this._invoke=function(i,r){function o(){return new Promise((function(e,o){!function e(i,r,o,s){var a=h(t[i],t,r);if("throw"!==a.type){var l=a.arg,u=l.value;return u&&"object"==typeof u&&n.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,o,s)}),(function(t){e("throw",t,o,s)})):Promise.resolve(u).then((function(t){l.value=t,o(l)}),(function(t){return e("throw",t,o,s)}))}s(a.arg)}(i,r,e,o)}))}return e=e?e.then(o,o):o()}}function S(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,S(t,i),"throw"===i.method))return f;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=h(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,f;var o=r.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,f):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function I(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function i(){for(;++r<t.length;)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}return{next:O}}function O(){return{value:e,done:!0}}return m.prototype=x.constructor=_,_.constructor=m,_[a]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},w(T.prototype),T.prototype[s]=function(){return this},t.AsyncIterator=T,t.async=function(e,i,n,r){var o=new T(l(e,i,n,r));return t.isGeneratorFunction(i)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},w(x),x[a]="Generator",x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=I,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return a.type="throw",a.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var l=n.call(s,"catchLoc"),h=n.call(s,"finallyLoc");if(l&&h){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),P(i),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;P(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:I(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function sa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aa(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function la(t,e,i){return e&&aa(t.prototype,e),i&&aa(t,i),t}function ha(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ua(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function ca(t){return(ca=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function da(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pa(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?da(t):e}var fa,ga=function(){function t(){sa(this,t)}return la(t,null,[{key:"minLevel",value:function(e){t.initParams(),"number"!=typeof e?(e=e.toUpperCase(),t.isValidLevelName(e)?window[t.paramKey].minLevel=t.LEVEL[e]:window[t.paramKey].minLevel=t.LEVEL.GENERAL):window[t.paramKey].minLevel=e}},{key:"initParams",value:function(){window[t.paramKey]||(window[t.paramKey]={emitEnabled:!1,enabled:!0,minLevel:1})}},{key:"emit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Debugger";t.initParams(),t.params.emitEnabled&&window.dispatchEvent(new Event(e))}},{key:"meetsLevelRequirement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GENERAL";return t.initParams(),!!(t.isValidLevelName(e)&&t.LEVEL[e]>=t.params.minLevel)}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"log";if(t.initParams(),t.isEnabled()){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];switch(e.toLowerCase()){case"info":var o;return!!t.meetsLevelRequirement("INFO")&&((o=console).info.apply(o,n),t.emit(),!0);case"debug":var s;return!!t.meetsLevelRequirement("DEBUG")&&((s=console).debug.apply(s,n),t.emit(),!0);case"error":var a;return!!t.meetsLevelRequirement("ERROR")&&((a=console).error.apply(a,n),t.emit(),!0);case"warn":var l;return!!t.meetsLevelRequirement("WARN")&&((l=console).warn.apply(l,n),t.emit(),!0);case"log":case"general":default:var h;return!!t.meetsLevelRequirement("GENERAL")&&((h=console).log.apply(h,n),t.emit(),!0)}}}},{key:"isValidLevelName",value:function(e){return t.initParams(),"GENERAL"==e||"DEBUG"==e||"INFO"==e||"WARN"==e||"ERROR"==e}},{key:"assert",value:function(e){if(t.initParams(),!e)throw"Assert Error: ".concat(e)}},{key:"isEnabled",value:function(){return window[t.paramKey].enabled}},{key:"enable",value:function(e){t.initParams(),window[t.paramKey].enabled=e}},{key:"params",get:function(){return t.initParams(),window[t.paramKey]}},{key:"LEVEL",get:function(){return{GENERAL:1,DEBUG:2,INFO:3,WARN:4,ERROR:5}}},{key:"paramKey",get:function(){return"__spring_roll_debugger_params__"}}]),t}(),ma=!!window.MSInputMethodContext&&!!document.documentMode,_a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},va=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ya=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),ba=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},xa=function(){function t(){va(this,t),this._listeners={}}return ya(t,[{key:"on",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._listeners[t]||(this._listeners[t]=[]),e._priority=parseInt(i)||0,-1===this._listeners[t].indexOf(e)&&(this._listeners[t].push(e),this._listeners[t].length>1&&this._listeners[t].sort(this.listenerSorter))}},{key:"listenerSorter",value:function(t,e){return t._priority-e._priority}},{key:"off",value:function(t,e){if(void 0!==this._listeners[t])if(void 0!==e){var i=this._listeners[t].indexOf(e);-1<i&&this._listeners[t].splice(i,1)}else delete this._listeners[t]}},{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof t&&(t={type:t,data:"object"===(void 0===e?"undefined":_a(e))&&null!==e?e:{}}),void 0!==this._listeners[t.type])for(var i=this._listeners[t.type].length-1;i>=0;i--)this._listeners[t.type][i](t)}},{key:"destroy",value:function(){this._listeners={}}}]),t}(),wa=new(function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100*Math.random()|0;va(this,e);var i=ba(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.id="BELLHOP:"+t,i.connected=!1,i.isChild=!0,i.connecting=!1,i.origin="*",i._sendLater=[],i.iframe=null,i.receive=i.receive.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,xa),ya(e,[{key:"receive",value:function(t){if(this.target===t.source)if("connected"===t.data)this.onConnectionReceived(t.data);else{var e=t.data;if("string"==typeof e)try{e=JSON.parse(e)}catch(t){console.error("Bellhop error: ",t)}this.connected&&"object"===(void 0===e?"undefined":_a(e))&&e.type&&this.trigger(e)}}},{key:"onConnectionReceived",value:function(t){this.connecting=!1,this.connected=!0,this.isChild||this.target.postMessage(t,this.origin);for(var e=0;e<this._sendLater.length;e++){var i=this._sendLater[e],n=i.type,r=i.data;this.send(n,r)}this._sendLater.length=0,this.trigger("connected")}},{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";this.connecting||(this.disconnect(),this.connecting=!0,t instanceof HTMLIFrameElement&&(this.iframe=t),this.isChild=void 0===t,this.supported=!0,this.isChild&&(this.supported=window!=t),this.origin=e,window.addEventListener("message",this.receive),this.isChild&&(window===this.target?this.trigger("failed"):this.target.postMessage("connected",this.origin)))}},{key:"disconnect",value:function(){this.connected=!1,this.connecting=!1,this.origin=null,this.iframe=null,this.isChild=!0,this._sendLater.length=0,window.removeEventListener("message",this.receive)}},{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof t)throw"The event type must be a string";var i={type:t,data:e};this.connecting?this._sendLater.push(i):this.target.postMessage(JSON.stringify(i),this.origin)}},{key:"fetch",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";this.on(t,(function t(n){r&&i.off(n.type,t),e(n)})),this.send(t,n)}},{key:"respond",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.on(t,(function r(o){n&&e.off(o.type,r),e.send(t,"function"==typeof i?i():i)}))}},{key:"destroy",value:function(){(function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,n)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(n):void 0})(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.disconnect(),this._sendLater.length=0}},{key:"target",get:function(){return this.isChild?window.parent:this.iframe.contentWindow}}]),e}()),Ta=(function(){function t(){sa(this,t),this.listeners=[]}la(t,[{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15e3;t?(this.length=t,this.timer=setTimeout(this.dispatch.bind(this),t)):ga.log("warn","[IdleTimer.start()] must specify a time!")}},{key:"reset",value:function(){this.timer?(clearTimeout(this.timer),this.timer=setTimeout(this.dispatch.bind(this),this.length)):ga.log("warn","[IdleTimer.reset()] timer has not been started")}},{key:"stop",value:function(){this.timer?(clearTimeout(this.timer),this.timer=null):ga.log("warn","[IdleTimer.reset()] timer has not been started")}},{key:"dispatch",value:function(){for(var t=0;t<this.listeners.length;t++)this.listeners[t]();this.reset()}},{key:"subscribe",value:function(t){this.listeners.push(t)}},{key:"unsubscribe",value:function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))}}])}(),function t(){sa(this,t),"function"!=typeof this.play&&console.error('Springroll Hint Player not implemented correctly. Please ensure you have a "play" function in your class.')}),Sa=function(t){function e(){var t;return sa(this,e),(t=pa(this,ca(e).call(this))).hints=[],t.index=0,t}return ua(e,Ta),la(e,[{key:"play",value:function(){0!=this.hints.length?(this.index>=this.hints.length&&(this.index=0),this.hints[this.index](),this.index++):ga.log("warn","[HintSequencePlayer.play()] No hints?!")}},{key:"clear",value:function(){this.index=0,this.hints.length=0}},{key:"add",value:function(){for(var t=arguments.length,e=0;e<t;e++)this.hints.push(e<0||arguments.length<=e?void 0:arguments[e])}},{key:"remove",value:function(){for(var t=this,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];for(var r=i.length,o=function(e){t.hints=t.hints.filter((function(t){return t!==i[e]}))},s=0;s<r;s++)o(s)}}]),e}(),Ea=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];sa(this,t),this._value=e,this.listeners=[],this.alwaysNotify=i}return la(t,[{key:"subscribe",value:function(t){this.listeners.push(t)}},{key:"unsubscribe",value:function(t){this.listeners=this.listeners.filter((function(e){return e!==t}))}},{key:"value",get:function(){return this._value},set:function(t){if(this.value!==t||this.alwaysNotify){var e=this._value;this._value=t;for(var i=0;i<this.listeners.length;i++)this.listeners[i](this._value,e)}}},{key:"hasListeners",get:function(){return this.listeners.length>0}}]),t}(),Pa=Symbol("onReturn"),Aa=(function(){function t(){sa(this,t)}la(t,null,[{key:Pa,value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return new Promise((function(n,r){var o=!1,s=0,a=function e(i){wa.off(t,e),o=!0,n(i)};wa.on(t,a),wa.send(t,e);var l=setInterval((function(){o?clearInterval(l):(s>=i&&(clearInterval(l),wa.off(t,a),r("No Response")),s++)}),100)}))}},{key:"read",value:function(t){var e="Could not complete read action for ".concat(t,". Bellhop is not connected.");return wa.connected?this[Pa]("userDataRead",{name:t}):new Promise((function(t,i){return i(e)}))}},{key:"write",value:function(t,e){var i="Could not complete write action for ".concat(t," with value ").concat(e,". Bellhop is not connected.");return wa.connected?this[Pa]("userDataWrite",{name:t,value:e}):new Promise((function(t,e){return e(i)}))}},{key:"delete",value:function(t){var e="Could not complete delete action for ".concat(t,". Bellhop is not connected.");wa.connected?wa.send("userDataRemove",{name:t}):console.warn(e)}}])}(),function(){function t(){sa(this,t)}return la(t,[{key:"onResize",value:function(){throw"not implemented"}}]),t}()),Ia=(function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=i.position,r=i.direction,o=i.callback,s=void 0===o?function(){return ga.log("warn",da(t),"Anchor missing callback")}:o;return sa(this,e),(t=pa(this,ca(e).call(this))).position=n||{x:0,y:0},t.direction=r||{x:-1,y:-1},t.callback=s,t}ua(e,Aa),la(e,[{key:"onResize",value:function(t){var e=t.viewArea,i=.5*e.width,n=.5*e.height,r=e.x+i,o=e.y+n,s=r+this.direction.x*i+this.position.x,a=o+this.direction.y*n+this.position.y;this.callback({x:s,y:a})}}])}(),function(){function t(e){sa(this,t),this._enabled=!0,this.resizeCallback=e,window.addEventListener("resize",this.onWindowResize.bind(this));var i=this.iOS;"function"==typeof Event?this.resize():(this.resizeEvent=window.document.createEvent("UIEvents"),this.resizeEvent.initUIEvent("resize",!0,!1,window,0),i=!0),i&&(this.aspectRatio=new Ea(0),this.aspectRatio.subscribe(this.resize.bind(this)),this.resizeTick(),setInterval(this.resizeTick.bind(this),50))}return la(t,[{key:"iOS",get:function(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)}},{key:"enabled",get:function(){return this._enabled},set:function(t){this._enabled=t,this._enabled&&this.resize()}}]),la(t,[{key:"resizeTick",value:function(){var t=this.getWindowResolution();this.aspectRatio.value=1e-4*Math.round(t.height/t.width*1e3)}},{key:"resize",value:function(){window.dispatchEvent(this.resizeEvent?this.resizeEvent:new Event("resize"))}},{key:"onWindowResize",value:function(){this.enabled&&this.resizeCallback(this.getWindowResolution())}},{key:"getWindowResolution",value:function(){var t,e;return this.iOS?window.orientation%180==0?(t=window.screen.width,e=window.screen.height):(t=document.documentElement.clientWidth,e=document.documentElement.clientHeight):(t=window.innerWidth,e=window.innerHeight),{width:t,height:e}}}]),t}()),Oa=(function(){function t(e){var i=e.width,n=e.height,r=e.safeWidth,o=void 0===r?1/0:r,s=e.safeHeight,a=void 0===s?1/0:s,l=e.callback,h=void 0===l?function(){}:l;sa(this,t),this.gameWidth=i,this.gameHeight=n,this.safeWidth=o<=i?o:i,this.safeHeight=a<=n?a:n,this.callback=h,this.scaleRatio=1,this.viewArea={x:0,y:0,width:0,height:0,left:0,right:0,top:0,bottom:0},this.entities=[],this.resizer=new Ia(this.onResize.bind(this)),h instanceof Function&&this.enable(h)}la(t,[{key:"onResize",value:function(t){var e=t.width,i=t.height;this.scaleRatio=Math.min(e/this.safeWidth,i/this.safeHeight);var n=Math.max(0,Math.min(this.gameWidth*this.scaleRatio,e)),r=Math.max(0,Math.min(this.gameHeight*this.scaleRatio,i)),o={x:this.gameWidth/n*this.scaleRatio,y:this.gameHeight/r*this.scaleRatio},s=e/this.scaleRatio,a=i/this.scaleRatio;this.viewArea.left=Math.max(.5*-(s-this.gameWidth),0),this.viewArea.top=Math.max(.5*-(a-this.gameHeight),0),this.viewArea.right=Math.min(this.viewArea.left+s,this.gameWidth),this.viewArea.bottom=Math.min(this.viewArea.top+a,this.gameHeight),this.viewArea.x=this.viewArea.left,this.viewArea.y=this.viewArea.top,this.viewArea.width=this.viewArea.right-this.viewArea.left,this.viewArea.height=this.viewArea.bottom-this.viewArea.top,this.resizeEventData=Object.freeze({offset:{x:this.viewArea.x,y:this.viewArea.y},gameSize:{x:this.gameWidth,y:this.gameHeight},viewArea:this.viewArea,scale:o}),this.callback({width:n,height:r,scaleRatio:this.scaleRatio,viewArea:this.viewArea,scale:o});for(var l=0,h=this.entities.length;l<h;l++)this.entities[l].onResize(this.resizeEventData)}},{key:"calcOffset",value:function(t){var e=this.gameWidth/this.safeWidth,i=this.gameHeight/this.safeHeight,n=(t.x-1)/(e-1),r=(t.y-1)/(i-1);return n=Number.isFinite(n)?n:0,r=Number.isFinite(r)?r:0,{x:(this.gameWidth-this.safeWidth)*n*.5,y:(this.gameHeight-this.safeHeight)*r*.5}}},{key:"addEntity",value:function(t){var e=this;Array.isArray(t)||(t=[t]),t.forEach((function(t){e.entities.includes(t)||(e.resizeEventData&&t.onResize(e.resizeEventData),e.entities.push(t))}))}},{key:"removeEntity",value:function(t){this.entities=this.entities.filter((function(e){return e!==t}))}},{key:"enable",value:function(t){t instanceof Function?(this.callback=t,this.resizer.enabled=!0):ga.warn("Scale Manager was not passed a function")}},{key:"disable",value:function(){this.resizer.enabled=!1}}])}(),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};sa(this,t),this.width=1,this.height=1,this.callback=e,this.resizer=new Ia(this.onResize.bind(this)),e instanceof Function&&this.enable(e)}la(t,[{key:"onResize",value:function(t){var e=t.width,i=t.height;this.width=e,this.height=i;var n=e/i;this.callback({width:e,height:i,ratio:n})}},{key:"enable",value:function(t){t instanceof Function?(this.callback=t,this.resizer.enabled=!0):console.warn("Scale Manager was not passed a function")}},{key:"disable",value:function(){this.resizer.enabled=!1}}])}(),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.voice,n=void 0===i?0:i,r=e.rate,o=void 0===r?1:r,s=e.pitch,a=void 0===s?0:s,l=e.volume,h=void 0===l?1:l;if(sa(this,t),window.speechSynthesis){this.voiceOptions=[],this.voicesLoaded=!1,this.queue=[],this.options={voice:{},rate:o,pitch:a,volume:h};var u=function(){this.voiceOptions=window.speechSynthesis.getVoices(),this.voice=this.setVoice(n),this.voicesLoaded=!0}.bind(this),c=window.speechSynthesis.getVoices();Array.isArray(c)&&0<c.length?u():window.speechSynthesis.addEventListener("voiceschanged",u,{once:!0})}else console.error("Springroll SpeechSynth is not supported on on this Device")}la(t,[{key:"pause",value:function(){this.speaking=!1,window.speechSynthesis.pause()}},{key:"resume",value:function(){this.speaking=!0,window.speechSynthesis.resume()}},{key:"cancel",value:function(){this.speaking=!1,this.pause(),this.queue.length=0,window.speechSynthesis.cancel()}},{key:"say",value:function(t){var e=this;if(!this.speaking&&this.voicesLoaded){this.speaking=!0;var i=new SpeechSynthesisUtterance(t);Object.assign(i,this.options),i.onend=function(){e.speaking=!1,0<e.queue.length&&e.say(e.queue.shift())},window.speechSynthesis.speak(i)}else this.queue.push(t)}},{key:"rangeLimit",value:function(t,e,i){return isNaN(i)?(console.warn("'".concat(i,"' is not a valid number!")),t):i>=e?e:t>=i?t:i}},{key:"setVoice",value:function(t){this.options.voice=this.voiceOptions[t]}},{key:"getVoice",value:function(){return this.options.voice}},{key:"rate",set:function(t){this.options.rate=this.rangeLimit(.1,10,t)},get:function(){return this.options.rate}},{key:"pitch",set:function(t){this.options.pitch=this.rangeLimit(0,2,t)},get:function(){return this.options.pitch}},{key:"volume",set:function(t){this.options.volume=this.rangeLimit(0,1,t)},get:function(){return this.options.volume}}])}(),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(sa(this,t),ma)console.error("Springroll ColorFilter is not supported on IE11");else{if(this.element=null,null===document.getElementById("color__filter__svg")){var n=document.createElement("div");n.style.width="0",n.style.height="0",n.style.position="absolute",n.style.opacity="0",n.innerHTML+='<svg id="color__filter__svg" style="width: 0; height: 0; position: absolute;" xmlns="http://www.w3.org/2000/svg"\n      version="1.1">\n      <defs>\n        <filter id="color__filter__protanopia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.567, 0.433, 0,     0, 0\n                    0.558, 0.442, 0,     0, 0\n                    0,     0.242, 0.758, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__protanomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.817, 0.183, 0,     0, 0\n                    0.333, 0.667, 0,     0, 0\n                    0,     0.125, 0.875, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__deuteranopia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.625, 0.375, 0,   0, 0\n                    0.7,   0.3,   0,   0, 0\n                    0,     0.3,   0.7, 0, 0\n                    0,     0,     0,   1, 0"/>\n        </filter>\n        <filter id="color__filter__deuteranomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.8,   0.2,   0,     0, 0\n                    0.258, 0.742, 0,     0, 0\n                    0,     0.142, 0.858, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__tritanopia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.95, 0.05,  0,     0, 0\n                    0,    0.433, 0.567, 0, 0\n                    0,    0.475, 0.525, 0, 0\n                    0,    0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__tritanomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.967, 0.033, 0,     0, 0\n                    0,     0.733, 0.267, 0, 0\n                    0,     0.183, 0.817, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__achromatopsia">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.299, 0.587, 0.114, 0, 0\n                    0.299, 0.587, 0.114, 0, 0\n                    0.299, 0.587, 0.114, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n        <filter id="color__filter__achromatomaly">\n          <feColorMatrix\n            in="SourceGraphic"\n            type="matrix"\n            values="0.618, 0.320, 0.062, 0, 0\n                    0.163, 0.775, 0.062, 0, 0\n                    0.163, 0.320, 0.516, 0, 0\n                    0,     0,     0,     1, 0"/>\n        </filter>\n      </defs>\n      </svg>\n      ',document.body.appendChild(n)}e instanceof HTMLElement&&"string"==typeof i&&this.applyFilter(e,i)}}la(t,[{key:"applyFilter",value:function(t,e){this.element=t,this.changeFilter(e)}},{key:"changeFilter",value:function(t){null!==this.element&&(this.element.style.filter="url(#color__filter__".concat(t,")"))}},{key:"removeFilter",value:function(){this.element.style.filter=null}},{key:"types",get:function(){return[{name:"Protanopia",value:"protanopia"},{name:"Protanomaly",value:"protanomaly"},{name:"Deuteranopia",value:"deuteranopia"},{name:"Deuteranomaly",value:"deuteranomaly"},{name:"Tritanopia",value:"tritanopia"},{name:"Tritanomaly",value:"tritanomaly"},{name:"Achromatopsia",value:"achromatopsia"},{name:"Achromatomaly",value:"achromatomaly"}]}}])}(),Object.freeze({left:"leftarrow",right:"rightarrow",up:"uparrow",down:"downarrow"})),Ca=function(){function t(e,i,n){sa(this,t),this.key=e,this._state=0,this.actions={up:n,down:i}}return la(t,[{key:"updateState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t<3&&t>-1&&(this._state=t)}},{key:"action",value:function(){1===this.state?this.actions.down&&this.actions.down():2===this.state&&(this.actions.up&&this.actions.up(),this.updateState(0))}},{key:"state",get:function(){return this._state}}]),t}(),Ma=(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];sa(this,t),this.assignButtons(e),window.addEventListener("blur",this.onWindowBlur.bind(this)),window.addEventListener("keydown",this.onKeyDown.bind(this)),window.addEventListener("keyup",this.onKeyUp.bind(this))}la(t,[{key:"update",value:function(){for(var t=0,e=this.keys.length;t<e;t++)this.buttons[this.keys[t]].action()}},{key:"onKeyDown",value:function(t){this.onKey(t,1)}},{key:"onKeyUp",value:function(t){this.onKey(t,2)}},{key:"onWindowBlur",value:function(){for(var t=0,e=Object.keys(this.buttons);t<e.length;t++){var i=e[t];1===this.buttons[i]._state&&this.buttons[i].updateState(2)}}},{key:"assignButtons",value:function(t){this.buttons={},this.keys=[];for(var e=0,i=t.length;e<i;e++){var n=t[e].key.toLowerCase(),r=Oa[n];void 0!==r&&(this.keys.push(r),this.buttons[r]=new Ca(r,t[e].down,t[e].up)),this.keys.push(n),this.buttons[n]=new Ca(n,t[e].down,t[e].up)}}},{key:"onKey",value:function(t,e){var i=t.key.toLowerCase();this.buttons[i]&&this.buttons[i].updateState(e)}}])}(),ha(fa={},"pause",!1),ha(fa,"captionsMuted",!0),ha(fa,"captionsStyles",{color:"#FFFFFF",edge:"none",font:"arial",background:"#000000",size:"md",align:"top"}),ha(fa,"soundVolume",1),ha(fa,"musicVolume",1),ha(fa,"voVolume",1),ha(fa,"sfxVolume",1),ha(fa,"pointerSize",.5),ha(fa,"controlSensitivity",.5),ha(fa,"buttonSize",.5),ha(fa,"removableLayers",0),ha(fa,"hudPosition",""),ha(fa,"hitAreaScale",.5),ha(fa,"dragThresholdScale",.5),ha(fa,"health",.5),ha(fa,"objectCount",.5),ha(fa,"completionPercentage",.5),ha(fa,"speedScale",.5),ha(fa,"timersScale",.5),ha(fa,"inputCount",.5),ha(fa,"keyBinding",{}),ha(fa,"colorVision","none"),fa),Ra=function(){function t(){var e,i=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.features,o=n.hintPlayer,s=void 0===o?new Sa:o;sa(this,t),this.state=(ha(e={ready:new Ea(!1),playOptions:new Ea({})},"pause",new Ea(void 0)),ha(e,"captionsMuted",new Ea(void 0)),ha(e,"captionsStyles",new Ea(void 0)),ha(e,"soundVolume",new Ea(void 0)),ha(e,"musicVolume",new Ea(void 0)),ha(e,"voVolume",new Ea(void 0)),ha(e,"sfxVolume",new Ea(void 0)),ha(e,"pointerSize",new Ea(void 0)),ha(e,"controlSensitivity",new Ea(void 0)),ha(e,"buttonSize",new Ea(void 0)),ha(e,"removableLayers",new Ea(void 0)),ha(e,"hudPosition",new Ea(void 0)),ha(e,"hitAreaScale",new Ea(void 0)),ha(e,"dragThresholdScale",new Ea(void 0)),ha(e,"health",new Ea(void 0)),ha(e,"objectCount",new Ea(void 0)),ha(e,"completionPercentage",new Ea(void 0)),ha(e,"speedScale",new Ea(void 0)),ha(e,"timersScale",new Ea(void 0)),ha(e,"inputCount",new Ea(void 0)),ha(e,"keyBinding",new Ea(void 0)),ha(e,"colorVision",new Ea(void 0)),e),this.features=Object.assign({captions:!1,captionsStyles:!1,sound:!1,vo:!1,music:!1,sfx:!1,soundVolume:!1,musicVolume:!1,voVolume:!1,sfxVolume:!1,pointerSize:!1,controlSensitivity:!1,buttonSize:!1,removableLayers:!1,hudPosition:!1,keyBinding:!1,colorVision:!1,hitAreaScale:!1,dragThresholdScale:!1,health:!1,objectCount:!1,completionPercentage:!1,speedScale:!1,timersScale:!1,inputCount:!1},r||{}),(this.features.vo||this.features.music||this.features.sfx)&&(this.features.sound=!0),this.container=wa,this.container.connect(),this.container.send("features",this.features),this.container.send("keepFocus",!1);for(var a=["soundVolume","musicVolume","voVolume","sfxVolume","captionsMuted","captionsStyles","pause","pointerSize","controlSensitivity","buttonSize","removableLayers","hudPosition","keyBinding","colorVision","hitAreaScale","dragThresholdScale","health","objectCount","completionPercentage","speedScale","timersScale","inputCount"],l=a.length,h=function(t){var e=i.state[a[t]];i.container.on(a[t],(function(t){return e.value=t.data}))},u=0;u<l;u++)h(u);for(var c=[{mute:"soundMuted",volume:"soundVolume"},{mute:"musicMuted",volume:"musicVolume"},{mute:"voMuted",volume:"voVolume"},{mute:"sfxMuted",volume:"sfxVolume"}],d=function(t){var e=i.state[c[t].volume];i.container.on(c[t].mute,(function(t){var i=e._previousValue||1;e._previousValue=e.value,e.value=t.data?0:i}))},p=0;p<c.length;p++)d(p);window.addEventListener("focus",(function(){return i.container.send("focus",!0)})),window.addEventListener("blur",(function(){return i.container.send("focus",!1)}));var f=/playOptions=[^&$]*/.exec(window.location.search);if(null!==f){var g=f[0],m=decodeURIComponent(g.split("=")[1]);try{this.state.playOptions.value=JSON.parse(m)}catch(t){ga.log("warn","Failed to parse playOptions from query string:"+t.message)}}this.container.fetch("playOptions",(function(t){return i.state.playOptions.value=t.data})),this.setupPlugins().catch((function(t){ga.log("warn",t)})).then((function(){i.validateListeners(),i.setStateDefaults()})).catch((function(t){ga.log("warn",t)})).then((function(){i.container.send("loaded"),i.state.ready.value=!0})),this.hints=s,this.container.on("playHelp",(function(){i.hints?i.hints.play():ga.log("warn","[Springroll] Missing IHintPlayer see: https://github.com/SpringRoll/SpringRoll/tree/v2/src/hints")}))}return la(t,[{key:"setupPlugins",value:function(){for(var e=this,i=[],n=function(n){t._plugins[n].preload&&i.push(t._plugins[n].preload(e).catch((function(e){t._plugins[n].preloadFailed=!0,console.warn(t._plugins[n].name,"Preload Failed:",e)})))},r=0;r<t._plugins.length;r++)n(r);return Promise.all(i).then((function(){t._plugins=t._plugins.filter((function(t){return!0!==t.preloadFailed}));for(var i=0;i<t._plugins.length;i++)t._plugins[i].init&&t._plugins[i].init(e);for(var n=0;n<t._plugins.length;n++)t._plugins[n].start&&t._plugins[n].start(e)}))}},{key:"getPlugin",value:function(e){return t.getPlugin(e)}},{key:"validateListeners",value:function(){for(var t=[],e={captions:"captionsMuted",sound:"soundVolume",music:"musicVolume",vo:"voVolume",sfx:"sfxVolume",pointerSize:"pointerSize",controlSensitivity:"controlSensitivity",buttonSize:"buttonSize",removableLayers:"removableLayers",hudPosition:"hudPosition",hitAreaScale:"hitAreaScale",dragThresholdScale:"dragThresholdScale",health:"health",objectCount:"objectCount",completionPercentage:"completionPercentage",speedScale:"speedScale",timersScale:"timersScale",inputCount:"inputCount",keyBinding:"keyBinding",colorVision:"colorVision"},i=Object.keys(e),n=0;n<i.length;n++){var r=e[i[n]];this.features[i[n]]&&!this.state[r].hasListeners&&t.push(r)}if(this.state.pause.hasListeners||t.push("pause"),t.length)throw new Error("Application state is missing required listeners: "+t.join(", ")+".")}},{key:"setStateDefaults",value:function(){var t=this;Object.keys(Ma).forEach((function(e){return t.state[e].value=Ma[e]}))}}]),t}();Ra._plugins=[],Ra.uses=function(t){Ra._plugins.push(t)},Ra.getPlugin=function(t){return Ra._plugins.find((function(e){return e.name===t}))};var ka=function(){function t(e){sa(this,t),this.lines=e,this.lines.sort((function(t,e){return t.endTime<e.endTime?-1:t.endTime>e.endTime?1:0})),this.reset()}return la(t,[{key:"reset",value:function(){this.time=0,this.lineIndex=0,this.renderer=null}},{key:"update",value:function(t){var e=this.time+1e3*t;e!==this.time&&(this.updateState(e,this.time),this.time=e)}},{key:"updateState",value:function(t,e){if(!this.isFinished()){for(t>this.lines[this.lineIndex].endTime&&this.renderer.lineEnd();t>this.lines[this.lineIndex].endTime;)if(this.lineIndex++,this.isFinished())return;var i=this.lines[this.lineIndex];t>=i.startTime&&e<=i.startTime&&this.renderer.lineBegin(i)}}},{key:"isFinished",value:function(){return this.lineIndex>=this.lines.length}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lineBegin:function(){},lineEnd:function(){}};this.reset(),this.renderer=e,this.updateTimeIndex(t),this.updateState(this.time,this.lines[this.lineIndex].startTime-1)}},{key:"updateTimeIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.time=t,!this.isFinished())for(var e=this.lines.length-1;e>-1;e--)if(this.lines[e].startTime<=t){this.lineIndex=e;break}}}]),t}(),La=function(){function t(e,i,n){sa(this,t),this.startTime=e||0,this.endTime=i||0,this.content="",this.setContent(n)}return la(t,[{key:"setContent",value:function(t){this.content=t}}]),t}(),Da=function(){function t(){sa(this,t)}return la(t,null,[{key:"createCaptionMap",value:function(t){var e={};for(var i in t){var n=this.createCaption(t[i]);n?e[i]=n:ga.log("error","[CaptionFactory.createCaptionMap] failed to create caption:",i)}return e}},{key:"createCaption",value:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=this.createLine(t[i]);r&&e.push(r)}if(!(e.length<=0))return new ka(e);ga.log("error","[CaptionFactory.createCaption] captions should not have 0 lines.")}},{key:"createLine",value:function(t){if("number"==typeof t.start)if("number"==typeof t.end)if("string"==typeof t.content){if(""!==t.content)return new La(t.start,t.end,t.content);ga.log("warn","[CaptionFactory.createLine] lineData.content should not be empty","Its recommended to add time to the start of the next line to add delays.")}else ga.log("error","[CaptionFactory.createLine] lineData.content must be defined as a string");else ga.log("error","[CaptionFactory.createLine] lineData.end must be defined as a number");else ga.log("error","[CaptionFactory.createLine] lineData.start must be defined as a number")}}]),t}(),Na=function(){function t(e,i){sa(this,t),this.captions=Da.createCaptionMap(e),this.renderer=i,this.activeCaption=null}return la(t,[{key:"update",value:function(t){this.activeCaption&&(this.activeCaption.update(t),this.activeCaption.isFinished()&&this.stop())}},{key:"start",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.stop(),this.activeCaption=this.captions[t],this.activeCaption)return this.renderer.start(i),void this.activeCaption.start(e,this.renderer);ga.log("warn","[CaptionPlayer.Start()] caption ".concat(t," not found"))}},{key:"stop",value:function(){this.activeCaption&&this.renderer.stop&&this.renderer.stop(),this.activeCaption=null}}]),t}(),Fa=function t(){sa(this,t),"function"==typeof this.start&&"function"==typeof this.stop&&"function"==typeof this.lineBegin&&"function"==typeof this.lineEnd||console.error('Springroll Caption Renderer not implemented corrected. Please ensure you have a "start", "end", "lineBegin", and "lineEnd" function in your class.')},Ba=function(t){function e(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return sa(this,e),i=pa(this,ca(e).call(this)),t instanceof HTMLElement||console.error("Invalid html element provided to renderer"),i.renderTarget=t,i.templateVariables=n,i}return ua(e,Fa),la(e,[{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.renderTarget.style.visibility="visible",this.templateVariables=t}},{key:"stop",value:function(){this.renderTarget.style.visibility="hidden",this.templateVariables={}}}]),e}();function Ua(t,e){return t.replace(/{{([a-zA-Z][A-Za-z0-9]*)}}/g,(function(t,i){return e[i]||t}))}(function(t){function e(){return sa(this,e),pa(this,ca(e).apply(this,arguments))}ua(e,Ba),la(e,[{key:"lineBegin",value:function(t){this.renderTarget.innerHTML=Ua(t.content,this.templateVariables)}},{key:"lineEnd",value:function(){this.renderTarget.innerHTML=""}}])})(),function(t){function e(){return sa(this,e),pa(this,ca(e).apply(this,arguments))}ua(e,Ba),la(e,[{key:"lineBegin",value:function(t){this.renderTarget.innerText=this.sanitize(Ua(t.content,this.templateVariables))}},{key:"lineEnd",value:function(){this.renderTarget.textContent=""}},{key:"sanitize",value:function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""}}])}(),function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sa(this,t),this.locales=e.locales,this.setPrimaryLocale(i.language||this.getBrowsersLocaleKey()||e.default),this.setFallbackLocale(i.fallback||e.default)}la(t,[{key:"resolve",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.language?this.getLocaleKey(e.language):this.primaryLanguage,n=this.getLocaleKey(e.fallback)||this.fallbackLanguage,r=this.locales[i],o=this.locales[n];return r?{path:r.path+t,language:i}:o?{path:o.path+t,language:n}:void 0}},{key:"setPrimaryLocale",value:function(t){var e=this.getLocaleKey(t);return!!e&&(this.primaryLanguage=e,!0)}},{key:"setFallbackLocale",value:function(t){var e=this.getLocaleKey(t);return!!e&&(this.fallbackLanguage=e,!0)}},{key:"getLocaleKey",value:function(t){if(t){var e=t.toLowerCase();if(this.locales[e])return e;if(e.indexOf("-")>0)return e=e.split("-")[0],this.getLocaleKey(e)}}},{key:"getBrowsersLocaleKey",value:function(){for(var t=this.getBrowserLanguages(),e=0,i=t.length;e<i;e++){var n=this.getLocaleKey(t[e]);if(n)return n}}},{key:"getBrowserLanguages",value:function(){return navigator.languages?navigator.languages:navigator.language?[navigator.language||navigator.userLanguage]:[]}}])}(),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(sa(this,t),void 0===e.name)throw new Error("Application plugin not provided a name field");this.name=e.name}la(t,[{key:"preload",value:function(){return Promise.resolve()}},{key:"init",value:function(){}},{key:"start",value:function(){}}])}();function ja(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Va=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="GoogleAnalytics",this.panel=document.createElement("div"),this.logs=document.createElement("div")}var e,i;return e=t,(i=[{key:"preload",value:function(){return Promise.resolve()}},{key:"init",value:function(){}},{key:"start",value:function(t){this.app=t,this.loggingPanel=t.getPlugin("LoggingPanel"),void 0!==this.loggingPanel&&(this.render=this.loggingPanel.addPanel({name:"Google Analytics"}),this.logs.className="container",this.logs.style.overflowY="scroll",this.logs.style.maxHeight="80vh",this.panel.appendChild(this.logs),this.render(this.panel))}},{key:"render",value:function(t){}},{key:"getFormattedDate",value:function(){var t=new Date,e=t.getHours()+":",i=t.getMinutes();e+=i<10?"0".concat(i):i,e+=":";var n=t.getSeconds();return e+(n<10?"0".concat(n):n)}},{key:"event",value:function(t,e,i,n){var r={hitType:"event"};void 0!==t&&(r.eventCategory=t),void 0!==e&&(r.eventAction=e),void 0!==i&&(r.eventLabel=i),void 0!==n&&(r.eventValue=n),this.app.container.connected&&this.app.container.send("googleAnalyticsEvent",r),this.renderRecord("Event",[t,e,i,n])}},{key:"renderRecord",value:function(t,e){if(void 0!==this.loggingPanel){var i=document.createElement("div");i.className="container";var n=document.createElement("div");n.className="bg-dkblue container";var r=document.createElement("div");r.className="half-width bold",r.innerText=t.toUpperCase(),n.appendChild(r);var o=document.createElement("div");o.innerText=this.getFormattedDate(),o.className="half-width bold",n.appendChild(o);var s=document.createElement("div");s.className="clear--both",n.appendChild(s),i.appendChild(n);var a=document.createElement("div");a.className="bg-blue full-width container",a.style.textAlign="center",a.innerText=e.filter((function(t){return void 0!==t})).join(" ➜ "),i.appendChild(a);var l=document.createElement("div");l.className="clear--both",i.appendChild(l),this.logs.insertBefore(i,this.logs.firstChild),this.render(this.panel)}}}])&&ja(e.prototype,i),t}();const Xa=["ui-1"],Ha=void 0,Ga=[a.TransitionStep.AnimCurrentOut,a.TransitionStep.ShowLoadScreen,a.TransitionStep.RemoveCurrent,a.TransitionStep.UnloadAssets,a.TransitionStep.LoadAssets,a.TransitionStep.AttachNewBehind,a.TransitionStep.AnimNewIn,a.TransitionStep.HideLoadScreen,a.TransitionStep.UnloadUnusedAssets];var Wa,Ya,za,qa,Ka,Ja,Za,Qa;!function(t){let e,i,n,r,o;t.UI12="lsf_ui12",t.UI11="lsf_ui11",t.UI9="lsf_ui09",function(t){t.UI1="lsf_ui01",t.UI7="lsf_ui07"}(e=t.LANDING_PAGE||(t.LANDING_PAGE={})),function(t){t.UI2B="lsf_ui02b",t.UI3="lsf_ui03",t.UI4="lsf_ui04",t.UI5="lsf_ui05",t.UI6="lsf_ui06",t.UI16ALT="lsf_ui16alt",t.UI17="lsf_ui17",t.UI18ALT="lsf_ui18alt",t.UI19="lsf_ui19",t.UI20ALT="lsf_ui20alt"}(i=t.CITY_SELECT||(t.CITY_SELECT={})),function(t){t.UI10="lsf_ui10",t.O2="lsf_o02"}(n=t.GIVE||(t.GIVE={})),function(t){t.UI8="lsf_ui08"}(r=t.RETURN||(t.RETURN={})),function(t){t.UI13="lsf_ui13",t.UI14="lsf_ui14",t.UI15="lsf_ui15"}(o=t.EXTERIOR||(t.EXTERIOR={}))}(Wa||(Wa={})),function(t){t.UI2="lsf_ui02",t.O1="lsf_o01",t.O3="lsf_o03",t.O4="lsf_o04"}(Ya||(Ya={})),function(t){t.A1="lsf_a01",t.A2="lsf_a02",t.A3="lsf_a03",t.A4="lsf_a04",t.A5="lsf_a05",t.A6="lsf_a06",t.A7="lsf_a07",t.A8="lsf_a08",t.A9="lsf_a09",t.A10="lsf_a10",t.A11="lsf_a11",t.A12="lsf_a12",t.A13="lsf_a13",t.A14="lsf_a14",t.A15="lsf_a15",t.A16="lsf_a16"}(za||(za={})),function(t){let e,i,n,r,o;!function(t){t.J1="lsf_j01",t.J2="lsf_j02",t.J3="lsf_j03",t.J4="lsf_j04",t.J5="lsf_j05"}(e=t.GIVE||(t.GIVE={})),function(t){t.J8="lsf_j08",t.J9="lsf_j09",t.J10="lsf_j10",t.J11="lsf_j11",t.J12="lsf_j12",t.J13="lsf_j13"}(i=t.RETURN||(t.RETURN={})),function(t){t.J6="lsf_j06",t.J7="lsf_j07"}(n=t.EXTERIOR||(t.EXTERIOR={})),function(t){t.IJ1A="lsf_ij01a",t.IJ1B="lsf_ij01b",t.IJ2A="lsf_ij02a",t.IJ2B="lsf_ij02b",t.IJ3A="lsf_ij03a",t.IJ3B="lsf_ij03b",t.IJ4A="lsf_ij04a",t.IJ4B="lsf_ij04b",t.IJ5A="lsf_ij05a",t.IJ5B="lsf_ij05b",t.IJ6A="lsf_ij06a",t.IJ6B="lsf_ij06b",t.IJ7A="lsf_ij07a",t.IJ7B="lsf_ij07b",t.IJ8A="lsf_ij08a",t.IJ8B="lsf_ij08b",t.IJ9A="lsf_ij09a",t.IJ9B="lsf_ij09b",t.IJ10A="lsf_ij10a",t.IJ10B="lsf_ij10b"}(r=t.ITEMS||(t.ITEMS={})),function(t){t.FJ1="lsf_fj01",t.FJ2="lsf_fj02",t.FJ3="lsf_fj03",t.FJ4="lsf_fj04",t.FJ5="lsf_fj05",t.FJ6="lsf_fj06",t.FJ7="lsf_fj07",t.FJ8="lsf_fj08",t.FJ9="lsf_fj09",t.FJ10="lsf_fj10",t.FJ11="lsf_fj11",t.FJ12="lsf_fj12",t.FJ13="lsf_fj13"}(o=t.FACTS||(t.FACTS={}))}(qa||(qa={})),function(t){let e,i,n,r,o;!function(t){t.L1="lsf_l01",t.L2="lsf_l02",t.L3="lsf_l03",t.L4="lsf_l04",t.L5="lsf_l05"}(e=t.GIVE||(t.GIVE={})),function(t){t.L6="lsf_l06",t.L7="lsf_l07"}(i=t.EXTERIOR||(t.EXTERIOR={})),function(t){t.L8="lsf_l08",t.L9="lsf_l09",t.L10="lsf_l10",t.L11="lsf_l11",t.L12="lsf_l12",t.L13="lsf_l13"}(n=t.RETURN||(t.RETURN={})),function(t){t.IL1A="lsf_il01a",t.IL1B="lsf_il01b",t.IL2A="lsf_il02a",t.IL2B="lsf_il02b",t.IL3A="lsf_il03a",t.IL3B="lsf_il03b",t.IL4A="lsf_il04a",t.IL4B="lsf_il04b",t.IL5A="lsf_il05a",t.IL5B="lsf_il05b",t.IL6A="lsf_il06a",t.IL6B="lsf_il06b",t.IL7A="lsf_il07a",t.IL7B="lsf_il07b",t.IL8A="lsf_il08a",t.IL8B="lsf_il08b",t.IL9A="lsf_il09a",t.IL9B="lsf_il09b",t.IL10A="lsf_il10a",t.IL10B="lsf_il10b"}(r=t.ITEMS||(t.ITEMS={})),function(t){t.FL1="lsf_fl01",t.FL2="lsf_fl02",t.FL3="lsf_fl03",t.FL4="lsf_fl04",t.FL5="lsf_fl05",t.FL6="lsf_fl06",t.FL7="lsf_fl07",t.FL8="lsf_fl08",t.FL9="lsf_fl09",t.FL10="lsf_fl10"}(o=t.FACTS||(t.FACTS={}))}(Ka||(Ka={})),function(t){t.P1="lsf_p01",t.P2="lsf_p02",t.P3="lsf_p03",t.P4="lsf_p04",t.P5="lsf_p05",t.P6="lsf_p06",t.P7="lsf_p07",t.P8="lsf_p08",t.P9="lsf_p09",t.P10="lsf_p10",t.P11="lsf_p11",t.P12="lsf_p12",t.P13="lsf_p13",t.P14="lsf_p14",t.P15="lsf_p15",t.IP1A="lsf_ip01a",t.IP1B="lsf_ip01b",t.IP2A="lsf_ip02a",t.IP2B="lsf_ip02b",t.IP3A="lsf_ip03a",t.IP3B="lsf_ip03b",t.IP4A="lsf_ip04a",t.IP4B="lsf_ip04b",t.IP5A="lsf_ip05a",t.IP5B="lsf_ip05b",t.IP6A="lsf_ip06a",t.IP6B="lsf_ip06b",t.IP7A="lsf_ip07a",t.IP7B="lsf_ip07b",t.IP8A="lsf_ip08a",t.IP8B="lsf_ip08b",t.IP9A="lsf_ip09a",t.IP9B="lsf_ip09b",t.IP10A="lsf_ip10a",t.IP10B="lsf_ip10b",t.IP11A="lsf_ip11a",t.IP11B="lsf_ip11b",t.IP12A="lsf_ip12a",t.IP12B="lsf_ip12b",t.IP13A="lsf_ip13a",t.IP13B="lsf_ip13b",t.IP14A="lsf_ip14a",t.IP14B="lsf_ip14b",t.IP15A="lsf_ip15a",t.IP15B="lsf_ip15b",t.FP1="lsf_fp01",t.FP2="lsf_fp02",t.FP4="lsf_fp04",t.FP5="lsf_fp05",t.FP6="lsf_fp06",t.FP7="lsf_fp07",t.FP8="lsf_fp08",t.FP9="lsf_fp09",t.FP10="lsf_fp10"}(Ja||(Ja={})),function(t){t.N1="lsf_n01",t.N2="lsf_n02",t.N3="lsf_n03",t.N4="lsf_n04",t.N5="lsf_n05",t.N6="lsf_n06",t.N7="lsf_n07",t.N8="lsf_n08",t.N9="lsf_n09",t.N10="lsf_n10",t.N11="lsf_n11",t.N12="lsf_n12",t.N13="lsf_n13",t.IN1A="lsf_in01a",t.IN1B="lsf_in01b",t.IN2A="lsf_in02a",t.IN2B="lsf_in02b",t.IN3A="lsf_in03a",t.IN3B="lsf_in03b",t.IN4A="lsf_in04a",t.IN4B="lsf_in04b",t.IN5A="lsf_in05a",t.IN5B="lsf_in05b",t.IN6A="lsf_in06a",t.IN6B="lsf_in06b",t.IN7A="lsf_in07a",t.IN7B="lsf_in07b",t.IN8A="lsf_in08a",t.IN8B="lsf_in08b",t.IN9A="lsf_in09a",t.IN9B="lsf_in09b",t.IN10A="lsf_in10a",t.IN10B="lsf_in10b",t.FN1="lsf_fn01",t.FN2="lsf_fn02",t.FN3="lsf_fn03",t.FN4="lsf_fn04",t.FN5="lsf_fn05",t.FN6="lsf_fn06",t.FN7="lsf_fn07",t.FN8="lsf_fn08",t.FN9="lsf_fn09",t.FN10="lsf_fn10",t.FN11="lsf_fn11"}(Za||(Za={})),function(t){t.R1="lsf_r01",t.R2="lsf_r02",t.R3="lsf_r03",t.R4="lsf_r04",t.R5="lsf_r05",t.R6="lsf_r06",t.R7="lsf_r07",t.R8="lsf_r08",t.R9="lsf_r09",t.R10="lsf_r10",t.R11="lsf_r11",t.R12="lsf_r12",t.R13="lsf_r13",t.IR1A="lsf_ir01a",t.IR1B="lsf_ir01b",t.IR2A="lsf_ir02a",t.IR2B="lsf_ir02b",t.IR3A="lsf_ir03a",t.IR3B="lsf_ir03b",t.IR4A="lsf_ir04a",t.IR4B="lsf_ir04b",t.IR5A="lsf_ir05a",t.IR5B="lsf_ir05b",t.IR6A="lsf_ir06a",t.IR6B="lsf_ir06b",t.IR7A="lsf_ir07a",t.IR7B="lsf_ir07b",t.IR8A="lsf_ir08a",t.IR8B="lsf_ir08b",t.IR9A="lsf_ir09a",t.IR9B="lsf_ir09b",t.FR1="lsf_fr01",t.FR2="lsf_fr02",t.FR3="lsf_fr03",t.FR4="lsf_fr04",t.FR5="lsf_fr05",t.FR6="lsf_fr06",t.FR7="lsf_fr07",t.FR8="lsf_fr08",t.FR9="lsf_fr09",t.FR10="lsf_fr10",t.FR11="lsf_fr11",t.FR12="lsf_fr12"}(Qa||(Qa={}));const $a={exterior:{width:3072,margin:{left:50,right:50},bg:[{filename:"background-juneau-exterior-1",x:0,y:0},{filename:"background-juneau-exterior-2",x:1024,y:0},{filename:"background-juneau-exterior-3",x:2048,y:0}]},interior:{width:1664,bg:{filename:"background-juneau-interior"},itemslist:{give:{ICON_SIZE:100,ICON_SPACING:25,columns:4,floatingItemsY:-80,highlightFloatingItems:!1,bg:[{filename:"bulletin-board",x:-50,y:0}],width:535,animateIn:"scaleItemsUp"},return:{ICON_SIZE:140,ICON_SPACING:-12,floatingItemsY:-250,width:459,height:311,itemslots:[{x:-35,y:2,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:92,y:6,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:219.5,y:2.5,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:-38,y:142.5,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:90,y:146,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:219,y:143,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:348,y:2,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:348,y:143,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"}],bg:[{filename:"bulletin-board",x:-50,y:0}],animateOut:"none"}}},city:"Juneau",country:"USA",items:{porcupine:{name:"Porcupine",sprite:"porcupine-full",icon_int_give:"porcupine-full",icon_int_return:"picture-porcupine",icon_ext:"porcupine-small-on",sprite_hat:"picture-porcupine",photoMode:!0,vo:{found:qa.ITEMS.IJ3B,returned:qa.ITEMS.IJ3A,fact:qa.FACTS.FJ9}},"wood-pecker":{name:"Woodpecker",sprite:"woodpecker-full",icon_int_give:"woodpecker-full",icon_int_return:"picture-wood-pecker",icon_ext:"woodpecker-small-on",sprite_hat:"picture-wood-pecker",photoMode:!0,vo:{found:qa.ITEMS.IJ2B,returned:qa.ITEMS.IJ2A,fact:qa.FACTS.FJ7}},turtle:{name:"Turtle",sprite:"turtle-full",icon_int_give:"turtle-full",icon_int_return:"picture-turtle",icon_ext:"turtle-small-on",sprite_hat:"picture-turtle",photoMode:!0,vo:{found:qa.ITEMS.IJ7B,returned:qa.ITEMS.IJ7A}},"bald-eagle":{name:"Bald-eagle",sprite:"baldeagle-full",icon_int_give:"baldeagle-full",icon_int_return:"picture-baldeagle",icon_ext:"baldeagle-small-on",sprite_hat:"picture-baldeagle",photoMode:!0,vo:{found:qa.ITEMS.IJ5B,returned:qa.ITEMS.IJ5A,fact:qa.FACTS.FJ10}},snail:{name:"Snail",sprite:"snail-full",icon_int_give:"snail-full",icon_int_return:"picture-snail",icon_ext:"snail-small-on",sprite_hat:"picture-snail",photoMode:!0,vo:{found:qa.ITEMS.IJ9B,returned:qa.ITEMS.IJ9A}},moose:{name:"Moose",sprite:"moose-full",icon_int_give:"moose-full",icon_int_return:"picture-moose",icon_ext:"moose-small-on",sprite_hat:"picture-moose",photoMode:!0,vo:{found:qa.ITEMS.IJ6B,returned:qa.ITEMS.IJ6A}},beaver:{name:"Beaver",sprite:"beaver-full",icon_int_give:"beaver-full",icon_int_return:"picture-beaver",icon_ext:"beaver-small-on",sprite_hat:"picture-beaver",photoMode:!0,vo:{found:qa.ITEMS.IJ4B,returned:qa.ITEMS.IJ4A,fact:qa.FACTS.FJ8}},bear:{name:"Bear",sprite:"bear-full",icon_int_give:"bear-full",icon_int_return:"picture-bear",icon_ext:"bear-small-on",sprite_hat:"picture-bear",photoMode:!0,vo:{found:qa.ITEMS.IJ1B,returned:qa.ITEMS.IJ1A,fact:qa.FACTS.FJ6}},raven:{name:"Raven",sprite:"raven-full",icon_int_give:"raven-full",icon_int_return:"picture-raven",icon_ext:"raven-small-on",sprite_hat:"picture-raven",photoMode:!0,vo:{found:qa.ITEMS.IJ8B,returned:qa.ITEMS.IJ8A,fact:qa.FACTS.FJ13}},deer:{name:"Deer",sprite:"deer-full",icon_int_give:"deer-full",icon_int_return:"picture-deer",icon_ext:"deer-on",sprite_hat:"picture-deer",photoMode:!0,vo:{found:qa.ITEMS.IJ10B,returned:qa.ITEMS.IJ10A,fact:qa.FACTS.FJ12}}},payoffs:{photoalbum:{name:"Photo Album"}},hidingspots:{"small-rock":{foreground:{sprite:"small-rock",x:2573,y:573.5},hitarea:{x:2646,y:605.75,width:146,height:64.5}},"beaver-dam":{foreground:{sprite:"beaver-dam",x:2716,y:455},hitarea:{x:3e3,y:583.5,width:568,height:257}},"tree-group-2":{foreground:{sprite:"tree-group-2",x:826,y:0},hitarea:{x:996,y:327,width:416,height:633}},"rock-with-moss":{foreground:{sprite:"rock-with-moss",x:1002,y:581.5},hitarea:{x:1352.57,y:682.25,width:701,height:201.5}},"front-rock":{foreground:{sprite:"front-rock",x:2338,y:467.5},hitarea:{x:2515.5,y:520,width:380.5,height:112}},"creek-rock":{foreground:{sprite:"creek-rock",x:2020.25,y:641.5},hitarea:{x:2259,y:705,width:477.5,height:131}},"tree-group-3":{foreground:{sprite:"tree-group-3",x:1596,y:0},hitarea:{x:1872.25,y:287.75,width:552.5,height:575.5}},"large-rock":{foreground:{sprite:"large-rock",x:1823,y:529},hitarea:{x:1950.25,y:585.5,width:254.5,height:113}},"tree-group-1":{foreground:{sprite:"tree-group-1",x:239,y:-181.7},hitarea:{x:384,y:221.5,width:290,height:503}},"left-rock":{foreground:{sprite:"left-rock",x:254.75,y:493.25},hitarea:{x:402.5,y:621.5,width:295.5,height:256.5}}},npc:{name:"Skye",poses:{neutral:{sprite:"npc-skye-neutral",position:{x:-5,y:0}},excited:{sprite:"npc-skye-excited"}}},vo:{give_quest:[qa.GIVE.J1],show_items:[qa.GIVE.J2,.75,qa.GIVE.J3],give_quest_idle:[qa.GIVE.J4,qa.GIVE.J5],return_items:[qa.RETURN.J8,.75,qa.RETURN.J9],return_items_idle:[qa.RETURN.J9],exterior:[qa.EXTERIOR.J6,.75,qa.EXTERIOR.J7],exterior_idle:[qa.FACTS.FJ1,qa.FACTS.FJ2,qa.FACTS.FJ3,qa.FACTS.FJ4,qa.FACTS.FJ5],all_items_returned_idle:[qa.RETURN.J13]},narratives:[{variations:[{hiddenitems:[{hidingspot:{id:"left-rock"},item:{id:"bear",scale:.7643,flipX:!0,rotation:0,position:{x:-28.19,y:-56.75}}},{hidingspot:"tree-group-2",item:{id:"wood-pecker",rotation:61.74,scale:.6265,position:{x:106.25,y:-152.25}}},{hidingspot:"large-rock",item:{id:"porcupine",rotation:1.69,scale:.553,flipX:!0,position:{x:-77.25,y:-15.25}}},{hidingspot:"beaver-dam",item:{id:"beaver",rotation:0,scale:.7118,flipX:!1,position:{x:-50.71,y:-94.25}}}],itemslist:{give:{ICON_SIZE:100,ICON_SPACING:25,columns:4,floatingItemsY:-10,highlightFloatingItems:!1,bg:[{filename:"bulletin-board",x:-50,y:0}],width:475,animateIn:"scaleItemsUp"},return:{ICON_SIZE:140,ICON_SPACING:25,floatingItemsY:-250,width:475,height:338,itemslots:[{x:118,y:10,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:251,y:10,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:113,y:152,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:249,y:153,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"}],bg:[{filename:"bulletin-board",x:-50,y:0}],animateOut:"none"}},vo:{all_items_returned:[qa.RETURN.J10,.75,qa.RETURN.J13]}},{hiddenitems:[{hidingspot:"tree-group-1",item:{id:"bald-eagle",rotation:0,scale:.6961,flipX:!1,position:{x:-240,y:107.75}}},{hidingspot:"tree-group-2",item:{id:"moose",rotation:-10.63,scale:.4232,flipX:!0,position:{x:-85,y:50.25}}},{hidingspot:"rock-with-moss",item:{id:"turtle",rotation:0,scale:.6891,flipX:!0,position:{x:170.43,y:-3.25}}},{hidingspot:"tree-group-3",item:{id:"raven",rotation:14.97,scale:.2407,position:{x:51.25,y:-146.75}}},{hidingspot:"small-rock",item:{id:"snail",scale:.5192,flipX:!1,rotation:0,position:{x:-46.51,y:-9.25}}}],itemslist:{give:{columns:3},return:{itemslots:[{x:5,y:2,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:142,y:6,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:279.5,y:2.5,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:85,y:147,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:224,y:148,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"}]}},vo:{all_items_returned:[qa.RETURN.J11,.75,qa.RETURN.J13]}},{hiddenitems:[{hidingspot:"left-rock",item:{id:"deer",rotation:-7.15,scale:.8536,flipX:!1,position:{x:-40,y:-71.5}}},{hidingspot:"rock-with-moss",item:{id:"beaver",rotation:-23.63,scale:.8559,flipX:!1,position:{x:-301,y:55.25}}},{hidingspot:"tree-group-3",item:{id:"wood-pecker",rotation:-46.47,scale:.6265,flipX:!0,position:{x:-167.25,y:-108.25}}},{hidingspot:"creek-rock",item:{id:"turtle",scale:.5524,flipX:!0,rotation:-5.47,position:{x:105.25,y:14.25}}},{hidingspot:"beaver-dam",item:{id:"porcupine",rotation:0,flipX:!0,scale:.5738,position:{x:-50.75,y:-81.25}}}],itemslist:{give:{columns:3},return:{itemslots:[{x:5,y:2,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:142,y:6,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:279.5,y:2.5,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:85,y:147,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:224,y:148,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"}]}},vo:{all_items_returned:[qa.RETURN.J12,.75,qa.RETURN.J13]}},{hiddenitems:[{hidingspot:"left-rock",item:{id:"porcupine",rotation:0,scale:.7967,flipX:!1,position:{x:41.5,y:13}}},{hidingspot:"tree-group-1",item:{id:"bear",rotation:9.44,scale:.3627,flipX:!1,position:{x:80.25,y:107.5}}},{hidingspot:"tree-group-2",item:{id:"turtle",rotation:0,scale:.4195,flipX:!0,position:{x:190,y:217}}},{hidingspot:"creek-rock",item:{id:"beaver",scale:.5526,flipX:!1,rotation:-15.44,position:{x:-210.5,y:59}}},{hidingspot:"large-rock",item:{id:"snail",scale:.5549,flipX:!1,rotation:0,position:{x:-92.75,y:6.25}}},{hidingspot:"beaver-dam",item:{id:"deer",rotation:-15.36,flipX:!0,scale:.8127,position:{x:25.25,y:-39.25}}}],itemslist:{give:{columns:3},return:{itemslots:[{x:5,y:2,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:142,y:6,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:279.5,y:2.5,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:2,y:147,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:140,y:148,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"},{x:279,y:146,width:115.5,height:127,bg:[{filename:"projectboard-slot",x:63,y:68.5}],dropSFX:"impact-2"}]}},vo:{all_items_returned:[qa.RETURN.J10,.75,qa.RETURN.J13]}},{hiddenitems:[{hidingspot:"tree-group-1",item:{id:"beaver",rotation:0,scale:.3223,flipX:!0,position:{x:32.75,y:232.75}}},{hidingspot:"left-rock",item:{id:"snail",rotation:2.97,scale:.6685,flipX:!0,position:{x:97,y:32.5}}},{hidingspot:"tree-group-2",item:{id:"deer",rotation:-13.22,scale:.5,flipX:!0,position:{x:-53.25,y:119}}},{hidingspot:"rock-with-moss",item:{id:"turtle",scale:.5787,flipX:!0,rotation:6.65,position:{x:-55.75,y:-17}}},{hidingspot:"tree-group-3",item:{id:"moose",scale:.4232,flipX:!0,rotation:-10.63,position:{x:-170.75,y:143}}},{hidingspot:"large-rock",item:{id:"raven",rotation:-16.08,flipX:!0,scale:.179,position:{x:20.5,y:-40.5}}},{hidingspot:"creek-rock",item:{id:"porcupine",scale:.5541,flipX:!0,rotation:15.93,position:{x:-201.75,y:50.25}}},{hidingspot:"front-rock",item:{id:"wood-pecker",rotation:30.03,flipX:!1,scale:.4407,position:{x:124.75,y:1}}}],vo:{all_items_returned:[qa.RETURN.J11,.75,qa.RETURN.J13]}}],payoff:"photoalbum"}],bgm:"LATW_765_happy_pacer_country_KK_extended"},tl={city:"London",country:"UK",interior:{width:1664,itemslist:{give:{bg:[{filename:"bottomjuggler",x:7,y:136.25},{filename:"circoticket",x:0,y:-114}],ICON_SIZE:110,ICON_SPACING:13.5,columns:4,floatingItemsY:-175,width:505,highlightFloatingItems:!1,animateIn:"slideInFromRight"},return:{width:1664,height:768,highlightFloatingItems:!1,floatingItemsY:-300,ICON_SIZE:80,ICON_SPACING:20,bg:[{filename:"topjuggler",x:-15,y:95.75}],animateOut:"juggle",itemslots:{width:80,height:78.5,bg:[{filename:"itemring",x:40,y:39.25}],radius:190,length:4,rotationoffset:20,y:-35,dropSFX:"boomarang-loop"},doCheerSound:!0}},bg:{filename:"london-int-bg"}},exterior:{bg:[{filename:"london-ext-bg1",x:0,y:0},{filename:"london-ext-bg2",x:2048,y:0}],margin:{left:20,right:20},width:3072},items:{crisps:{name:"Crisps",sprite:"crisps-full",sprite_hat:"crisps-full",icon_ext:"crisps-on",icon_int_give:"crisps-full",icon_int_return:"crisps-full",vo:{found:Ka.ITEMS.IL5B,returned:Ka.ITEMS.IL5A,fact:Ka.FACTS.FL8}},teapot:{name:"Teapot",sprite:"teapot-full",sprite_hat:"teapot-full",icon_ext:"teapot-on",icon_int_give:"teapot-full",icon_int_return:"teapot-full",vo:{found:Ka.ITEMS.IL3B,returned:Ka.ITEMS.IL3A,fact:Ka.FACTS.FL3}},doubledecker:{name:"Double-Decker Bus",sprite:"doubledecker-full",sprite_hat:"doubledecker-full",icon_ext:"doubledecker-on",icon_int_give:"doubledecker-full",icon_int_return:"doubledecker-full",vo:{found:Ka.ITEMS.IL6B,returned:Ka.ITEMS.IL6A}},shepherdspie:{name:"Shepherd's Pie",sprite:"shephardspie-full",sprite_hat:"shephardspie-full",icon_ext:"shephardspie-on",icon_int_give:"shephardspie-full",icon_int_return:"shephardspie-full",vo:{found:Ka.ITEMS.IL1B,returned:Ka.ITEMS.IL1A,fact:Ka.FACTS.FL5}},football:{name:"Football",sprite:"football-full",sprite_hat:"football-full",icon_ext:"football-on",icon_int_give:"football-full",icon_int_return:"football-full",vo:{found:Ka.ITEMS.IL2B,returned:Ka.ITEMS.IL2A,fact:Ka.FACTS.FL7}},biscuits:{name:"Biscuits",sprite:"buiscuits-full",sprite_hat:"buiscuits-full",icon_ext:"buiscuits-on",icon_int_give:"buiscuits-full",icon_int_return:"buiscuits-full",vo:{found:Ka.ITEMS.IL8B,returned:Ka.ITEMS.IL8A,fact:Ka.FACTS.FL10}},candyfloss:{name:"Candy Floss",sprite:"candyfloss-full",sprite_hat:"candyfloss-full",icon_ext:"candyfloss-on",icon_int_give:"candyfloss-full",icon_int_return:"candyfloss-full",vo:{found:Ka.ITEMS.IL4B,returned:Ka.ITEMS.IL4A,fact:Ka.FACTS.FL9}},bangersmash:{name:"Bangers and Mash",sprite:"bangersmash-full",sprite_hat:"bangersmash-full",icon_ext:"bangersmash-on",icon_int_give:"bangersmash-full",icon_int_return:"bangersmash-full",vo:{found:Ka.ITEMS.IL10B,returned:Ka.ITEMS.IL10A,fact:Ka.FACTS.FL6}},umbrella:{name:"Umbrella",sprite:"umbrella-full",sprite_hat:"umbrella-full",icon_ext:"umbrella-on",icon_int_give:"umbrella-full",icon_int_return:"umbrella-full",vo:{found:Ka.ITEMS.IL9B,returned:Ka.ITEMS.IL9A}},fishchips:{name:"Fish and Chips",sprite:"fishchips-full",sprite_hat:"fishchips-full",icon_ext:"fishchips-on",icon_int_give:"fishchips-full",icon_int_return:"fishchips-full",vo:{found:Ka.ITEMS.IL7B,returned:Ka.ITEMS.IL7A,fact:Ka.FACTS.FL4}}},payoffs:{payoff1:{name:"Payoff 1"}},hidingspots:{openwindow:{foreground:{sprite:"openwindow-front",x:221.5,y:22},background:{sprite:"openwindow-back",x:259.5,y:79.5},hitarea:{x:308,y:186.5}},chiptruck:{foreground:{sprite:"chiptruck",x:105,y:414.5},hitarea:{x:325,y:493}},underground:{foreground:{sprite:"underground-front",x:0,y:96},background:{sprite:"underground-back",x:749-752.7,y:119},hitarea:{x:458.5,y:741}},lamppost:{foreground:{sprite:"lamppost",x:232-321.7,y:18},hitarea:{x:116,y:393}},phoneboothnews:{foreground:{sprite:"phoneboothnews",x:727,y:351},hitarea:{x:798,y:572.5}},flagleft:{foreground:{sprite:"flagleft",x:914,y:169.5-200.7},hitarea:{x:975,y:83.5}},flagright:{background:{sprite:"flagright",x:1539,y:180-203.7},hitarea:{x:1598.5,y:90}},fruitstandleft:{background:{sprite:"fruitstandleft",x:872.5,y:366},hitarea:{x:957.5,y:432}},fruitstandright:{foreground:{sprite:"fruitstandright",x:1362.5,y:378},hitarea:{x:1617.5,y:443}},"car-black":{foreground:{sprite:"car-black",x:1046.5,y:483.5},hitarea:{x:1289,y:556.5}},uksign:{foreground:{sprite:"uksign",x:1839,y:74},hitarea:{x:2096,y:137}},ukbuildingface1:{foreground:{sprite:"ukbuildingface1",x:1837,y:196.5},hitarea:{x:2098,y:327.5}},billboard:{foreground:{sprite:"billboard",x:2486,y:31.5},hitarea:{x:2580,y:149.5}},feelsrightbuilding:{foreground:{sprite:"feelsrightbuilding",x:2278,y:166},hitarea:{x:2466.25,y:306.5}},clothierawning:{foreground:{sprite:"clothierawning",x:2889,y:190.5},hitarea:{x:2984,y:248}},trashcan:{foreground:{sprite:"trashcan",x:1753.5,y:392},hitarea:{x:1801.5,y:444}},"car-red":{foreground:{sprite:"car-red",x:2235,y:409},hitarea:{x:2350,y:467.5}},"car-green":{foreground:{sprite:"car-green",x:1793,y:493},hitarea:{x:1966.5,y:573}},lamppost2:{foreground:{sprite:"lamppost",x:1548.5,y:18},hitarea:{x:1708.5,y:239.5}},flowerbush1:{foreground:{sprite:"flowerbush1",x:1284,y:657},hitarea:{x:1524,y:733}},flowerbush2:{foreground:{sprite:"flowerbush2",x:2323.5,y:638.5},hitarea:{x:2517.5,y:731}},busstand:{background:{sprite:"busstand-back",x:2695.5,y:582},foreground:{sprite:"busstand-front",x:2677.5,y:447},hitarea:{x:2884.5,y:750.5}}},npc:{name:"Wigglewalker",poses:{neutral:{sprite:"npc-wigglewalker-neutral",position:{x:-2,y:0}},excited:{sprite:"npc-wigglewalker-excited",position:{x:-12,y:0}}}},vo:{give_quest:[Ka.GIVE.L1],show_items:[Ka.GIVE.L2,.75,Ka.GIVE.L3],give_quest_idle:[Ka.GIVE.L4,Ka.GIVE.L5],return_items:[Ka.RETURN.L8,.75,Ka.RETURN.L9],return_items_idle:[Ka.RETURN.L9],exterior:[Ka.EXTERIOR.L6,.75,Ka.EXTERIOR.L7],exterior_idle:[Ka.FACTS.FL1,Ka.FACTS.FL2],all_items_returned_idle:[Ka.RETURN.L13]},narratives:[{variations:[{hiddenitems:[{hidingspot:"chiptruck",item:{id:"shepherdspie",rotation:-13.49,scale:.4174,position:{x:-136.25,y:-65.5}}},{hidingspot:"phoneboothnews",item:{id:"football",rotation:0,scale:.4395,position:{x:66.5,y:-29.43}}},{hidingspot:"uksign",item:{id:"teapot",rotation:-11.85,scale:.3526,position:{x:-175.5,y:-41.5}}},{hidingspot:"busstand",item:{id:"candyfloss",rotation:-12.59,scale:.4556,position:{x:96.25,y:-59.25}}}],itemslist:{give:{columns:2}},vo:{all_items_returned:[Ka.RETURN.L10,.75,Ka.RETURN.L13]}},{hiddenitems:[{hidingspot:"flagleft",item:{id:"crisps",rotation:-37.87,scale:.356,position:{x:-47.75,y:-7.75}}},{hidingspot:"flowerbush1",item:{id:"doubledecker",rotation:12.97,scale:.5574,position:{x:-200.5,y:14.25}}},{hidingspot:"fruitstandright",item:{id:"fishchips",rotation:0,scale:.5169,position:{x:-4.99,y:-47.88}}},{hidingspot:"lamppost2",item:{id:"biscuits",rotation:0,scale:.4588,position:{x:42.48,y:-20.67}}},{hidingspot:"car-red",item:{id:"umbrella",rotation:-32.6,scale:.5873,position:{x:-46.5,y:-31.75}}}],itemslist:{give:{columns:3},return:{itemslots:{width:80,height:78.5,bg:[{filename:"itemring",x:40,y:39.25}],radius:190,length:5,rotationoffset:40,y:-35,dropSFX:"boomarang-loop"}}},vo:{all_items_returned:[Ka.RETURN.L11,.75,Ka.RETURN.L13]}},{hiddenitems:[{hidingspot:"chiptruck",item:{id:"teapot",rotation:0,scale:.4227,flipX:!0,position:{x:138.65,y:71.03}}},{hidingspot:"openwindow",item:{id:"football",rotation:0,scale:.3311,position:{x:10.58,y:-36.18}}},{hidingspot:"car-black",item:{id:"bangersmash",rotation:0,scale:.4334,position:{x:136.94,y:20.38}}},{hidingspot:"flowerbush2",item:{id:"fishchips",rotation:0,scale:.49,position:{x:-36.5,y:-59}}},{hidingspot:"billboard",item:{id:"candyfloss",rotation:132.41,scale:.4142,position:{x:48.95,y:45}}}],itemslist:{give:{columns:3},return:{itemslots:{width:80,height:78.5,bg:[{filename:"itemring",x:40,y:39.25}],radius:190,length:5,rotationoffset:40,y:-35,dropSFX:"boomarang-loop"}}},vo:{all_items_returned:[Ka.RETURN.L12,.75,Ka.RETURN.L13]}},{hiddenitems:[{hidingspot:"underground",item:{id:"biscuits",rotation:0,scale:.4361,position:{x:-35,y:-596.75}}},{hidingspot:"phoneboothnews",item:{id:"doubledecker",rotation:160.64-180,scale:.5889,flipX:!0,position:{x:-32.5,y:21}}},{hidingspot:"trashcan",item:{id:"teapot",rotation:0,scale:.4409,position:{x:42,y:-3}}},{hidingspot:"uksign",item:{id:"umbrella",rotation:-12.74,scale:.5913,position:{x:34.25,y:-45}}},{hidingspot:"clothierawning",item:{id:"crisps",rotation:38.02,scale:.3657,position:{x:-54.5,y:37.25}}},{hidingspot:"flowerbush1",item:{id:"shepherdspie",rotation:-12.2,scale:.4099,position:{x:93.25,y:-44}}}],itemslist:{give:{columns:3},return:{itemslots:{width:80,height:78.5,bg:[{filename:"itemring",x:40,y:39.25}],radius:190,length:6,rotationoffset:50,y:-35,dropSFX:"boomarang-loop"}}},vo:{all_items_returned:[Ka.RETURN.L10,.75,Ka.RETURN.L13]}},{hiddenitems:[{hidingspot:"openwindow",item:{id:"candyfloss",rotation:25.7,scale:.2756,position:{x:-10,y:-33.25}}},{hidingspot:"flagleft",item:{id:"umbrella",rotation:-72.22,scale:.6237,position:{x:-17,y:-18.25}}},{hidingspot:"phoneboothnews",item:{id:"fishchips",rotation:0,scale:.4902,position:{x:-6.5,y:-212.5}}},{hidingspot:"car-black",item:{id:"teapot",rotation:0,scale:.4924,position:{x:54.5,y:-16.5}}},{hidingspot:"lamppost2",item:{id:"crisps",rotation:-15.42,scale:.4545,position:{x:16.5,y:25.25}}},{hidingspot:"car-red",item:{id:"football",rotation:0,scale:.4145,position:{x:70.5,y:-15.25}}},{hidingspot:"clothierawning",item:{id:"biscuits",rotation:0,scale:.2878,position:{x:-61.37,y:5.2}}},{hidingspot:"busstand",item:{id:"doubledecker",rotation:18,scale:.5412,position:{x:98,y:-149}}}],itemslist:{return:{itemslots:{width:80,height:78.5,bg:[{filename:"itemring",x:40,y:39.25}],radius:190,length:8,rotationoffset:20,y:-35,dropSFX:"boomarang-loop"}}},vo:{all_items_returned:[Ka.RETURN.L11,.75,Ka.RETURN.L13]}}],payoff:"payoff1"}],bgm:"LATW_353_grand_regal_majestic_pacer_london_AB_extended"},el={city:"New Orleans",country:"USA",interior:{width:1664,itemslist:{give:{bg:[{filename:"streetlamp",x:343,y:-132,dontAnimateIn:!0},{filename:"clipboard",x:-20,y:-84}],ICON_SIZE:125,ICON_SPACING:1,columns:4,floatingItemsY:-150,width:505,highlightFloatingItems:!1,animateIn:"slideInFromRight"},return:{width:0,height:0,highlightFloatingItems:!0,floatingItemsY:-250,ICON_SIZE:125,ICON_SPACING:0,itemslots:[{x:0,y:0,width:758.5,height:422.5,acceptsMultiple:!0,bg:[{filename:"neworleans-target-ring",x:0,y:150},{filename:"van",x:0,y:-40}],hideIconImmediately:!0,animateOnDrop:"squash",dropSFX:["impact-van1","impact-van2","impact-van3"],musicnotes:!0}],animateOut:"none"}},bg:{filename:"no-int-bg1"}},exterior:{bg:[{filename:"no-ext-bg1",x:0,y:0},{filename:"no-ext-bg2",x:2048,y:0}],margin:{left:0,right:0},width:3072},items:{clarinet:{name:"Clarinet",sprite:"clarinet-full",sprite_hat:"clarinet-full",icon_ext:"clarinet-on",icon_int_give:"clarinet-full",icon_int_return:"clarinet-full",vo:{found:Za.IN6B,returned:Za.IN6A,fact:Za.FN9}},"drum-sticks":{name:"Drum Sticks",sprite:"drum-sticks-full",sprite_hat:"drum-sticks-full",icon_ext:"drum-sticks-on",icon_int_give:"drum-sticks-full",icon_int_return:"drum-sticks-full",vo:{found:Za.IN10B,returned:Za.IN10A}},trumpet:{name:"Trumpet",sprite:"trumpet-full",sprite_hat:"trumpet-full",icon_ext:"trumpet-on",icon_int_give:"trumpet-full",icon_int_return:"trumpet-full",vo:{found:Za.IN4B,returned:Za.IN4A,fact:Za.FN11}},trombone:{name:"Trombone",sprite:"trombone-full",sprite_hat:"trombone-full",icon_ext:"trombone-on",icon_int_give:"trombone-full",icon_int_return:"trombone-full",vo:{found:Za.IN7B,returned:Za.IN7A,fact:Za.FN7}},sousaphone:{name:"Sousaphone",sprite:"sousaphone-full",sprite_hat:"sousaphone-full",icon_ext:"sousaphone-on",icon_int_give:"sousaphone-full",icon_int_return:"sousaphone-full",vo:{found:Za.IN2B,returned:Za.IN2A,fact:Za.FN5}},saxophone:{name:"Saxophone",sprite:"saxophone-full",sprite_hat:"saxophone-full",icon_ext:"saxophone-on",icon_int_give:"saxophone-full",icon_int_return:"saxophone-full",vo:{found:Za.IN3B,returned:Za.IN3A,fact:Za.FN10}},guitar:{name:"Guitar",sprite:"guitar-full",sprite_hat:"guitar-full",icon_ext:"guitar-on",icon_int_give:"guitar-full",icon_int_return:"guitar-full",vo:{found:Za.IN5B,returned:Za.IN5A}},flute:{name:"Flute",sprite:"flute-full",sprite_hat:"flute-full",icon_ext:"flute-on",icon_int_give:"flute-full",icon_int_return:"flute-full",vo:{found:Za.IN9B,returned:Za.IN9A}},bass:{name:"Bass",sprite:"bass-full",sprite_hat:"bass-full",icon_ext:"bass-on",icon_int_give:"bass-full",icon_int_return:"bass-full",vo:{found:Za.IN8B,returned:Za.IN8A,fact:Za.FN8}},"drum-kit":{name:"Drum Kit",sprite:"drum-kit-full",sprite_hat:"drum-kit-full",icon_ext:"drum-kit-on",icon_int_give:"drum-kit-full",icon_int_return:"drum-kit-full",vo:{found:Za.IN1B,returned:Za.IN1A,fact:Za.FN6}}},payoffs:{payoff1:{name:"Payoff 1"}},hidingspots:{"us-flag":{foreground:{sprite:"us-flag",x:1195.5,y:16},hitarea:{x:1337,y:159}},bench:{foreground:{sprite:"bench",x:1307.5,y:355.5},hitarea:{x:1439.5,y:393.5}},"lamp-post":{foreground:{sprite:"lamp-post",x:1510,y:132},hitarea:{x:1545.5,y:321.5}},orangebuilding:{foreground:[{sprite:"orangebuilding-front",x:602,y:140.5}],hitarea:{x:923.5,y:326.75}},"orangebuilding-flower1":{foreground:{sprite:"orangebuild-flower-1",x:577.5,y:44},hitarea:{x:641.25,y:94}},"orangebuilding-flower2":{foreground:{sprite:"orangebuild-flower-2",x:794,y:41.5},hitarea:{x:852,y:93.75}},"orangebuilding-flower3":{foreground:{sprite:"orangebuild-flower-2",x:955,y:48.5},hitarea:{x:1011,y:113}},"orangebuilding-flower4":{foreground:{sprite:"orangebuild-flower-1",x:1133,y:57},hitarea:{x:1196.75,y:107}},"urn-small":{background:{sprite:"urn-small-back",x:2810,y:258},foreground:{sprite:"urn-small-front",x:2846,y:309.5},hitarea:{x:2891.5,y:352}},yellowbuilding:{background:[{sprite:"yellowbuilding-back",x:1663.5,y:460.5-500.7,halfSize:!0},{sprite:"yellowbuilding-door",x:2133,y:243.5}],foreground:{sprite:"yellowbuilding-front",x:1585.5,y:-40,halfSize:!0},hitarea:{x:2236.25,y:343.5}},"doorway-potter-1":{foreground:{sprite:"doorway-potter-1",x:256.5,y:301},hitarea:{x:310.75,y:380.75}},"doorway-potter-2":{foreground:{sprite:"doorway-potter-2",x:569,y:288.5},hitarea:{x:622.75,y:379.25}},trashcan:{foreground:{sprite:"trashcan",x:2602,y:381},hitarea:{x:2658,y:451}},crowd:{foreground:{sprite:"crowd",x:638,y:305.5},hitarea:{x:840,y:393.5}},car1:{foreground:{sprite:"car-1",x:346.5-391.7,y:412},hitarea:{x:163.5,y:452.5}},car2:{foreground:{sprite:"car-2",x:1546,y:425},hitarea:{x:1725,y:546.5}},car3:{foreground:{sprite:"car-3",x:2883,y:445.5},hitarea:{x:2996.5,y:558.5}},railing:{foreground:[{sprite:"railing-1",x:0,y:610,halfSize:!0},{sprite:"railing-2",x:2048,y:610}],hitarea:{x:2048,y:659}},"lightpost-burbon":{foreground:{sprite:"lightpost-burbon",x:1636,y:71},hitarea:{x:1819.5,y:685.5}},sign:{foreground:{sprite:"sign",x:1366.5,y:587.5},hitarea:{x:1484.5,y:662.5}},table1:{foreground:{sprite:"table1",x:158,y:630.5},hitarea:{x:398.5,y:664.5},background:[{sprite:"stool",x:123.5,y:662.5},{sprite:"stool",x:427.5,y:680}]},table2:{foreground:{sprite:"table2",x:671,y:630.5},hitarea:{x:854,y:662.5},background:[{sprite:"stool",x:671,y:669.5},{sprite:"stool",x:975,y:669.5}]},urn1:{background:{sprite:"urn-back",x:2187,y:498},foreground:{sprite:"urn-front",x:2230,y:560},hitarea:{x:2285,y:612}},urn2:{background:{sprite:"urn-back",x:2738.5,y:498},foreground:{sprite:"urn-front",x:2781.5,y:560},hitarea:{x:2836,y:611}},metaltable:{background:{sprite:"metaltable-back",x:2367.5,y:584.5},foreground:{sprite:"metaltable-front",x:2452.5,y:641},hitarea:{x:2575.75,y:704.5}},"park-bench":{foreground:{sprite:"park-bench",x:1585.5,y:623.5},hitarea:{x:1819.5,y:685.5}}},npc:{name:"Dexter",poses:{neutral:{sprite:"npc-dexter-neutral"},excited:{sprite:"npc-dexter-excited",position:{x:-48,y:0}}}},vo:{give_quest:[Za.N1],show_items:[Za.N2,.75,Za.N3],give_quest_idle:[Za.N4,Za.N5],return_items:[Za.N8,.75,Za.N9],return_items_idle:[Za.N9],exterior:[Za.N6,.75,Za.N7],exterior_idle:[Za.FN1,Za.FN2,Za.FN4],all_items_returned_idle:[Za.N13]},narratives:[{variations:[{hiddenitems:[{hidingspot:"table1",item:{id:"drum-kit",rotation:12.63,scale:.7289,position:{x:12.75,y:4.25}}},{hidingspot:"crowd",item:{id:"sousaphone",rotation:-18.91,scale:.6095,position:{x:-66.5,y:6}}},{hidingspot:"car2",item:{id:"saxophone",rotation:180-156.9,scale:.6227,flipX:!0,position:{x:295.75,y:-44.75}}},{hidingspot:"urn2",item:{id:"trumpet",rotation:18.82,scale:.5104,position:{x:11.75,y:-49.5}}}],itemslist:{give:{columns:2}},vo:{all_items_returned:[Za.N10,.75,Za.N13]}},{hiddenitems:[{hidingspot:"car1",item:{id:"guitar",rotation:180-142.98,scale:.6354,flipX:!0,position:{x:-85.5,y:-70}}},{hidingspot:"table2",item:{id:"trumpet",rotation:0,scale:.5898,position:{x:130.25,y:14.25}}},{hidingspot:"us-flag",item:{id:"clarinet",rotation:-3.5,scale:.7113,position:{x:-24.5,y:-94.5},flipX:!0}},{hidingspot:"park-bench",item:{id:"trombone",rotation:41.88,scale:.5898,position:{x:85,y:33.75}}},{hidingspot:"trashcan",item:{id:"bass",rotation:-10.39,scale:.6983,position:{x:30.25,y:-51}}}],itemslist:{give:{columns:3}},vo:{all_items_returned:[Za.N11,.75,Za.N13]}},{hiddenitems:[{hidingspot:"car1",item:{id:"drum-kit",rotation:-14.49,scale:.652,position:{x:-70,y:9}}},{hidingspot:"orangebuilding-flower3",item:{id:"drum-sticks",rotation:-67.29,scale:.6,flipX:!0,position:{x:-18.75,y:11}}},{hidingspot:"sign",item:{id:"saxophone",rotation:-6.7,scale:.6524,position:{x:-51.75,y:-.25}}},{hidingspot:"urn1",item:{id:"flute",rotation:-7.25,scale:.7,position:{x:15,y:-38}}},{hidingspot:"car3",item:{id:"guitar",rotation:50.3,scale:.709,position:{x:-15.5,y:-5.25}}}],itemslist:{give:{columns:3}},vo:{all_items_returned:[Za.N12,.75,Za.N13]}},{hiddenitems:[{hidingspot:"car1",item:{id:"trombone",rotation:65.65,scale:.5333,position:{x:55.5,y:50.5}}},{hidingspot:"crowd",item:{id:"bass",rotation:179.76-180,scale:.5621,flipX:!0,position:{x:185.25,y:-31.25}}},{hidingspot:"bench",item:{id:"trumpet",rotation:4.45,scale:.4499,position:{x:-91.75,y:6.25}}},{hidingspot:"car2",item:{id:"clarinet",rotation:119.88-180,scale:.6516,flipX:!0,position:{x:-92,y:88.75}}},{hidingspot:"trashcan",item:{id:"flute",rotation:135.35,scale:.5984,position:{x:40.75,y:-20.75}}},{hidingspot:"car3",item:{id:"sousaphone",rotation:64.03,scale:.6541,flipX:!0,position:{x:35.75,y:-23.5}}}],itemslist:{give:{columns:3}},vo:{all_items_returned:[Za.N10,.75,Za.N13]}},{hiddenitems:[{hidingspot:"car1",item:{id:"trumpet",rotation:108.06,scale:.6795,position:{x:98.5,y:60.75}}},{hidingspot:"table2",item:{id:"drum-kit",rotation:-7.82,scale:.665,position:{x:120,y:140.5}}},{hidingspot:"crowd",item:{id:"flute",rotation:-73.25,scale:.5653,flipX:!0,position:{x:156,y:81.5}}},{hidingspot:"us-flag",item:{id:"trombone",rotation:112.88,scale:.4886,position:{x:23.25,y:-39.75}}},{hidingspot:"park-bench",item:{id:"bass",rotation:123.65-180,scale:1,flipX:!0,position:{x:-37,y:35.5}}},{hidingspot:"car2",item:{id:"guitar",rotation:173.58,scale:.6698,flipX:!0,position:{x:254,y:-21.75}}},{hidingspot:"urn1",item:{id:"drum-sticks",rotation:-23.38,scale:.6,position:{x:-1.25,y:-47.75}}},{hidingspot:"urn-small",item:{id:"clarinet",rotation:-9.47,scale:.4604,position:{x:11.25,y:-13.5}}}]}],payoff:"payoff1",vo:{all_items_returned:[Za.N11,.75,Za.N13]}}],bgm:"LATW_1175_happy_pacer_zydeco_jazz_New_Orleans_AP-01_extended"},il={city:"Paris",country:"France",interior:{width:1664,itemslist:{give:{bg:[{filename:"clipboard",x:-30,y:25}],ICON_SIZE:80,ICON_SPACING:25,columns:4,floatingItemsY:-50,width:440,highlightFloatingItems:!1,animateIn:"slideInFromRight",before_icon:"grocerylist-checkbox"},return:{width:0,height:0,floatingItemsY:0,highlightFloatingItems:!0,ICON_SIZE:100,ICON_SPACING:25,itemslots:[{x:0,y:145,width:615,height:150,acceptsMultiple:!0,bg:[{filename:"island",x:0,y:140},{filename:"itemring-paris",x:0,y:30}],dropSFX:"place-ingredient"}],animateOut:"slideRight"}},bg:{filename:"paris-int-bg"}},exterior:{bg:[{filename:"paris-ext-bg-1",x:0,y:0},{filename:"paris-ext-bg-2",x:2048,y:0}],margin:{left:0,right:0},width:3072},items:{basil:{name:"Basil",sprite:"basil-full",sprite_hat:"basil-full",icon_int_give:"basil-full",icon_int_return:"basil-full",icon_ext:"basil-on",vo:{found:Ja.IP11B,returned:Ja.IP11A}},beet:{name:"Beet",sprite:"beet-full",sprite_hat:"beet-full",icon_int_give:"beet-full",icon_int_return:"beet-full",icon_ext:"beet-on",vo:{found:Ja.IP13B,returned:Ja.IP13A}},bellpepper:{name:"Bell Pepper",sprite:"greenpepper-full",sprite_hat:"greenpepper-full",icon_int_give:"greenpepper-full",icon_int_return:"greenpepper-full",icon_ext:"greenpepper-on",vo:{found:Ja.IP15B,returned:Ja.IP15A}},butter:{name:"Butter",sprite:"butter-full",sprite_hat:"butter-full",icon_int_give:"butter-full",icon_int_return:"butter-full",icon_ext:"butter-on",vo:{found:Ja.IP4B,returned:Ja.IP4A}},cheese:{name:"Cheese",sprite:"cheese-full",sprite_hat:"cheese-full",icon_int_give:"cheese-full",icon_int_return:"cheese-full",icon_ext:"cheese-on",vo:{found:Ja.IP3B,returned:Ja.IP3A,fact:Ja.FP6}},drumstick:{name:"Drumstick",sprite:"drumstick-full",sprite_hat:"drumstick-full",icon_int_give:"drumstick-full",icon_int_return:"drumstick-full",icon_ext:"duck-on",vo:{found:Ja.IP5B,returned:Ja.IP5A,fact:Ja.FP7}},eggplant:{name:"Eggplant",sprite:"eggplant-full",sprite_hat:"eggplant-full",icon_int_give:"eggplant-full",icon_int_return:"eggplant-full",icon_ext:"eggplant-on",vo:{found:Ja.IP14B,returned:Ja.IP14A}},garlic:{name:"Garlic",sprite:"garlic-full",sprite_hat:"garlic-full",icon_int_give:"garlic-full",icon_int_return:"garlic-full",icon_ext:"garlic-on",vo:{found:Ja.IP7B,returned:Ja.IP7A}},mussels:{name:"Mussels",sprite:"mussels-full",sprite_hat:"mussels-full",icon_int_give:"mussels-full",icon_int_return:"mussels-full",icon_ext:"mussels-on",vo:{found:Ja.IP10B,returned:Ja.IP10A}},onion:{name:"Onion",sprite:"onion-full",sprite_hat:"onion-full",icon_int_give:"onion-full",icon_int_return:"onion-full",icon_ext:"onion-on",vo:{found:Ja.IP9B,returned:Ja.IP9A}},parsley:{name:"Parsley",sprite:"parsley-full",sprite_hat:"parsley-full",icon_int_give:"parsley-full",icon_int_return:"parsley-full",icon_ext:"parsley-on",vo:{found:Ja.IP8B,returned:Ja.IP8A}},sourdough:{name:"Sourdough",sprite:"sourdough-full",sprite_hat:"sourdough-full",icon_int_give:"sourdough-full",icon_int_return:"sourdough-full",icon_ext:"sourdough-on",vo:{found:Ja.IP2B,returned:Ja.IP2A,fact:Ja.FP5}},tomato:{name:"Tomato",sprite:"tomatoe-full",sprite_hat:"tomatoe-full",icon_int_give:"tomatoe-full",icon_int_return:"tomatoe-full",icon_ext:"tomatoe-on",vo:{found:Ja.IP1B,returned:Ja.IP1A}}},payoffs:{grilledcheese:{name:"Grilled Cheese",sprite:"finaldish-grilledcheese",position:{x:0,y:0}},duck:{name:"Duck Confit",sprite:"finaldish-duck",position:{x:0,y:0}},mussels:{name:"Mussels",sprite:"finaldish-muscles",position:{x:0,y:0}},frenchonionsoup:{name:"French Onion Soup",sprite:"finaldish-onionsoup",position:{x:30.25,y:0}},ratatouille:{name:"Ratatouille",sprite:"finaldish_ratatouille",position:{x:0,y:0}}},hidingspots:{blueroof:{background:{sprite:"blueroof-back",x:2754.5,y:317},hitarea:{x:2951.5,y:380},foreground:{sprite:"blueroof-front",x:2647,y:128}},condiments:{background:{sprite:"condiments-stand",x:1919.5,y:241},hitarea:{x:2056.75,y:343.25,width:274.5,height:204.5}},purpleroofstand:{background:{sprite:"purpleroofstand-back",x:247,y:286},foreground:{sprite:"purpleroofstand-front",x:237.5,y:177.5},hitarea:{x:301,y:386}},producesec:{background:{sprite:"producesec-back",x:1987.5,y:0},foreground:[{sprite:"producesec-boxfront",x:2557,y:307},{sprite:"producesec-greenjar",x:2261.5,y:350}],hitarea:{x:2293,y:393}},macaroontable:{foreground:{sprite:"macaroontable",x:0,y:0},hitarea:{x:135.75,y:260.5,width:271.5,height:521}},misctable:{background:{sprite:"misctable-back",x:793,y:258.5},foreground:{sprite:"misctable-front",x:1023,y:287.5},hitarea:{x:1084.5,y:323.5}},delicounter:{background:{sprite:"delicounter-back",x:732,y:-5},foreground:{sprite:"delicounter-front",x:319,y:0},hitarea:{x:752.5,y:412.5}},redchecker:{background:{sprite:"redchecker-bottom",x:0,y:384},foreground:{sprite:"redchecker-top",x:0,y:384},hitarea:{x:70.5,y:565,width:124,height:261}},"meatstand-bottom":{foreground:{sprite:"meatstand-bottom",x:1132.5,y:189.5},hitarea:{x:1451,y:306.5}},"meatstand-top":{foreground:{sprite:"meatstand-top",x:1137,y:0},hitarea:{x:1451,y:306.5}},"fruitstand-1":{foreground:{sprite:"fruitstand-1",x:651.5,y:626.5},hitarea:{x:1026,y:736}},"fruitstand-2":{foreground:{sprite:"fruitstand-2",x:1405,y:601.5},hitarea:{x:1669.5,y:731}},"fruitstand-3":{foreground:{sprite:"fruitstand-3",x:2607.5,y:510},hitarea:{x:2863.5,y:589}}},narratives:[{variations:[{hiddenitems:[{hidingspot:"purpleroofstand",item:{id:"tomato",scale:.3788,position:{x:-2.25,y:-26.25},rotation:6.85}},{hidingspot:"delicounter",item:{id:"sourdough",scale:.5989,position:{x:22.25,y:6.5},rotation:28.83}},{hidingspot:"producesec",item:{id:"cheese",scale:.5215,position:{x:358,y:-33.75}}},{hidingspot:"fruitstand-2",item:{id:"butter",scale:1.0221,position:{x:200,y:-50}}}],itemslist:{give:{columns:2}}}],payoff:"grilledcheese",vo:{all_items_returned:[Ja.P10,.75,Ja.P15],exterior_idle:[Ja.FP1,Ja.FP2,Ja.FP4,Ja.FP10]}},{variations:[{hiddenitems:[{hidingspot:"meatstand-bottom",item:{id:"drumstick",scale:.4641,position:{x:69.5,y:-26.75},rotation:-109.71}},{hidingspot:"fruitstand-3",item:{id:"garlic",scale:.409/.4869,position:{x:102.25,y:-50},rotation:-10.25}},{hidingspot:"redchecker",item:{id:"parsley",scale:.5379,rotation:45,position:{x:15,y:-95}}},{hidingspot:"fruitstand-1",item:{id:"butter",scale:.409/.5841,position:{x:150,y:-15},rotation:-15}}],itemslist:{give:{columns:2}}}],payoff:"duck",vo:{all_items_returned:[Ja.P11,.75,Ja.P15]}},{variations:[{hiddenitems:[{hidingspot:"purpleroofstand",item:{id:"cheese",scale:.3602,position:{x:9.75,y:-208.25},rotation:177.47-180,flipX:!0}},{hidingspot:"fruitstand-1",item:{id:"garlic",scale:.3258/.5861,position:{x:114.75,y:-91},rotation:-73.13}},{hidingspot:"fruitstand-3",item:{id:"sourdough",scale:.805,position:{x:-141.25,y:56},rotation:-21.86,flipX:!0}},{hidingspot:"producesec",item:{id:"onion",scale:.4588,position:{x:-25.75,y:-10.5},rotation:2.33,flipX:!1}},{hidingspot:"blueroof",item:{id:"butter",scale:.4661,position:{x:-53.25,y:-10},rotation:-.09}}],itemslist:{give:{columns:3}}}],payoff:"frenchonionsoup",vo:{all_items_returned:[Ja.P12,.75,Ja.P15],exterior_idle:[Ja.FP1,Ja.FP2,Ja.FP4,Ja.FP9]}},{variations:[{hiddenitems:[{hidingspot:"meatstand-bottom",item:{id:"mussels",scale:.276,position:{x:286.75,y:-18.5}}},{hidingspot:"misctable",item:{id:"butter",scale:.4144,position:{x:21.5,y:7.25}}},{hidingspot:"redchecker",item:{id:"tomato",scale:.4463,position:{x:22.5,y:-31.75},rotation:44.95}},{hidingspot:"producesec",item:{id:"parsley",scale:.2143/.5851,position:{x:-13.25,y:-14.75},rotation:-48.84}},{hidingspot:"purpleroofstand",item:{id:"garlic",scale:.1224/.5861,position:{x:-47.25,y:-20.5},rotation:-40.54}},{hidingspot:"blueroof",item:{id:"sourdough",scale:.4652,position:{x:-32.25,y:-5.75},rotation:-17.44}}],itemslist:{give:{columns:3}}}],payoff:"mussels",vo:{all_items_returned:[Ja.P13,.75,Ja.P15]}},{variations:[{hiddenitems:[{hidingspot:"producesec",item:{id:"basil",scale:.4193,position:{x:-13.5,y:-5.5},rotation:-91.36}},{hidingspot:"fruitstand-1",item:{id:"parsley",scale:.75,position:{x:-5,y:-60},rotation:-19.51}},{hidingspot:"meatstand-bottom",item:{id:"beet",scale:.45,position:{x:-75,y:-18},rotation:60}},{hidingspot:"misctable",item:{id:"tomato",scale:.3,position:{x:22.5,y:3.25},rotation:43.44}},{hidingspot:"delicounter",item:{id:"eggplant",scale:.3916,position:{x:12.5,y:9},rotation:30}},{hidingspot:"redchecker",item:{id:"garlic",scale:.6,position:{x:-.25,y:-94},rotation:-65}},{hidingspot:"blueroof",item:{id:"bellpepper",scale:.34,position:{x:25,y:-15},rotation:-10}},{hidingspot:"fruitstand-2",item:{id:"onion",scale:.45,position:{x:285,y:0},rotation:40}}],itemslist:{give:{columns:4,ICON_SIZE:70,ICON_SPACING:10,floatingItemsY:-35}}}],payoff:"ratatouille",vo:{all_items_returned:[Ja.P14,.75,Ja.P15],exterior_idle:[Ja.FP1,Ja.FP2,Ja.FP4,Ja.FP8]}}],npc:{name:"Rene",poses:{neutral:{sprite:"npc-rene-neutral"},excited:{sprite:"npc-rene-excited",position:{x:0,y:11}}}},vo:{give_quest:[Ja.P1],show_items:[Ja.P2,.75,Ja.P3],give_quest_idle:[Ja.P4,Ja.P5],return_items:[Ja.P8,.75,Ja.P9],return_items_idle:[Ja.P9],exterior:[Ja.P6,.75,Ja.P7],exterior_idle:[Ja.FP1,Ja.FP2,Ja.FP4],all_items_returned_idle:[Ja.P15]},bgm:"LATW_740_pretty_happy_pacer_france_KK_extended"},nl={city:"Rio de Janeiro",country:"Brazil",interior:{width:1664,itemslist:{give:{bg:[{filename:"clipboard",x:30,y:-100},{filename:"float-platform",x:0,y:215,dontAnimateIn:!0}],ICON_SIZE:100,ICON_SPACING:25,columns:4,floatingItemsY:-180,width:440,highlightFloatingItems:!1,animateIn:"slideInFromRight"},return:{width:0,height:0,highlightFloatingItems:!0,floatingItemsY:-250,ICON_SIZE:100,ICON_SPACING:25,itemslots:[{x:0,y:128,width:480,height:300,acceptsMultiple:!0,hideIconImmediately:!0,bg:[{filename:"itemring",x:0,y:40}],scaleUpOnDragOver:!0,dropSFX:"powerup-shield"}],animateOut:"fade"}},bg:{filename:"rio-int-bg"}},exterior:{bg:[{filename:"rio-ext-bg1",x:0,y:0},{filename:"rio-ext-bg2",x:2048,y:0}],margin:{left:10,right:10},width:3072},items:{"sewing-machine":{name:"Sewing Machine",sprite:"sewing-machine-full",sprite_hat:"sewing-machine-full",icon_int_give:"sewing-machine-full",icon_int_return:"sewing-machine-full",icon_ext:"sewing-machine-on",vo:{found:Qa.IR2B,returned:Qa.IR2A,fact:Qa.FR8}},tape:{name:"Tape",sprite:"tape-full",sprite_hat:"tape-full",icon_int_give:"tape-full",icon_int_return:"tape-full",icon_ext:"tape-on",vo:{found:Qa.IR9B,returned:Qa.IR9A}},palette:{name:"Palette",sprite:"palette-full",sprite_hat:"palette-full",icon_int_give:"palette-full",icon_int_return:"palette-full",icon_ext:"palette-on",vo:{found:Qa.IR4B,returned:Qa.IR4A,fact:Qa.FR10}},"paint-bucket":{name:"Paint Bucket",sprite:"paint-bucket-full",sprite_hat:"paint-bucket-full",icon_int_give:"paint-bucket-full",icon_int_return:"paint-bucket-full",icon_ext:"paint-bucket-on",vo:{found:Qa.IR7B,returned:Qa.IR7A}},"paint-brush":{name:"Paint Brush",sprite:"paint-brush-full",sprite_hat:"paint-brush-full",icon_int_give:"paint-brush-full",icon_int_return:"paint-brush-full",icon_ext:"paint-brush-on",vo:{found:Qa.IR1B,returned:Qa.IR1A,fact:Qa.FR7}},cardboard:{name:"Cardboard",sprite:"cardboard-full",sprite_hat:"cardboard-full",icon_int_give:"cardboard-full",icon_int_return:"cardboard-full",icon_ext:"cardboard-on",vo:{found:Qa.IR5B,returned:Qa.IR5A}},glue:{name:"Glue",sprite:"glue-full",sprite_hat:"glue-full",icon_int_give:"glue-full",icon_int_return:"glue-full",icon_ext:"glue-on",vo:{found:Qa.IR8B,returned:Qa.IR8A,fact:Qa.FR9}},ruler:{name:"Ruler",sprite:"ruler-full",sprite_hat:"ruler-full",icon_int_give:"ruler-full",icon_int_return:"ruler-full",icon_ext:"ruler-on",vo:{found:Qa.IR3B,returned:Qa.IR3A}},tapemeasure:{name:"Tape Measure",sprite:"tapemeasure-full",sprite_hat:"tapemeasure-full",icon_int_give:"tapemeasure-full",icon_int_return:"tapemeasure-full",icon_ext:"tapemeasure-on",vo:{found:Qa.IR6B,returned:Qa.IR6A,fact:Qa.FR6}}},payoffs:{float1:{name:"Float 1",sprite:["float1-1","float1-2","float1-3","float1-4"],position:{x:0,y:-70}},float2:{name:"Float 2",sprite:["float2-1","float2-2","float2-3","float2-4","float2-5"],position:{x:0,y:-70}},float3:{name:"Float 3",sprite:["float3-1","float3-2","float3-3","float3-4","float3-5"],position:{x:0,y:-70}},float4:{name:"Float 4",sprite:["float4-1","float4-2","float4-3","float4-4","float4-5","float4-6"],position:{x:0,y:-70}},float5:{name:"Float 5",sprite:["float5-1","float5-2","float5-3","float5-4","float5-5","float5-6","float5-7","float5-8"],position:{x:0,y:-70}}},hidingspots:{"left-fan":{hitarea:{x:68.5,y:129},foreground:{sprite:"left-fan",x:0,y:91}},"left-corner-tablet":{hitarea:{x:0,y:667.5},foreground:{sprite:"left-corner-tablet",x:0,y:667.5}},ladder:{hitarea:{x:486,y:377},foreground:{sprite:"ladder",x:249.5,y:-39}},"foam-piece":{hitarea:{x:572,y:565.5},foreground:{sprite:"foam-piece",x:572,y:565.5}},"wall-barrel":{hitarea:{x:1091.5,y:205.5},foreground:{sprite:"wall-barrel",x:1024,y:190}},"purple-pillar1":{hitarea:{x:796,y:0},foreground:{sprite:"purple-pillar-1",x:796,y:-233}},"large-green-pipe":{hitarea:{x:1736.5,y:307.5},foreground:{sprite:"large-green-pipe",x:1690.5,y:159}},"metal-pipes":{hitarea:{x:1765.5,y:435},foreground:{sprite:"metal-pipes",x:1578.5,y:369.5}},"sun-flower":{background:{sprite:"table",x:1216,y:320.5},hitarea:{x:1326.5,y:393},foreground:{sprite:"sun-flower",x:1151.5,y:355}},"purple-pillar2":{hitarea:{x:2061,y:355},foreground:{sprite:"purple-pillar-2",x:1981,y:-182}},"gas-tank":{hitarea:{x:2822.5,y:320},foreground:{sprite:"gas-tank",x:2798,y:175.5}},"orange-flower":{hitarea:{x:2562,y:526},background:{sprite:"table-with-mug",x:2347,y:369.5},foreground:{sprite:"orange-flower",x:2532.5,y:379}},"green-pipe":{hitarea:{x:2848.5,y:240},foreground:{sprite:"green-pipe",x:2848.5,y:240}},"purple-flower":{hitarea:{x:796.5,y:453.5},foreground:{sprite:"purple-flower",x:796.5,y:453.5}},hand:{hitarea:{x:2247,y:492.5},foreground:{sprite:"hand",x:2135,y:332.5}},"sewing-table":{hitarea:{x:610.5,y:688.5},foreground:{sprite:"sewing-table",x:610.5,y:688.5}},"fabricroll-greenblue":{hitarea:{x:1079,y:719},foreground:{sprite:"fabricroll-greenblue",x:1013,y:597}},"purple-shape":{hitarea:{x:2036.5,y:708},foreground:{sprite:"purple-shape",x:1590.5,y:643.5}},barrel:{hitarea:{x:1696.5,y:740.5},foreground:{sprite:"barrel",x:1427.5,y:634.5}},"fabricroll-red":{hitarea:{x:2665.5,y:695.5},foreground:{sprite:"fabricroll-red",x:2625,y:609.5}},"fabricroll-purpleblue":{hitarea:{x:3031.5,y:691},foreground:{sprite:"fabricroll-purpleblue",x:2827.5,y:631.5}}},npc:{name:"Raquel",poses:{neutral:{sprite:"npc-raquel-neutral",position:{x:-18,y:0}},excited:{sprite:"npc-raquel-excited"}}},vo:{give_quest:[Qa.R1],show_items:[Qa.R2,.75,Qa.R3],give_quest_idle:[Qa.R4,Qa.R5],return_items:[Qa.R8,.75,Qa.R9],return_items_idle:[Qa.R9],exterior:[Qa.R6,.75,Qa.R7],exterior_idle:[Qa.FR1,Qa.FR2,Qa.FR3,Qa.FR4],all_items_returned_idle:[Qa.R13]},narratives:[{variations:[{hiddenitems:[{hidingspot:"ladder",item:{id:"paint-brush",scale:.6261,position:{x:58.75,y:19.5},rotation:173.84}},{hidingspot:"sun-flower",item:{id:"sewing-machine",scale:.5672,position:{x:-2,y:-45.5}}},{hidingspot:"barrel",item:{id:"ruler",scale:.7421,position:{x:64.5,y:-6}}},{hidingspot:"gas-tank",item:{id:"palette",scale:.542,position:{x:-36,y:14.5},rotation:-59.86}}],itemslist:{give:{floatingItemsY:-105}}}],payoff:"float1",vo:{all_items_returned:[Qa.R11,.75,Qa.R13]}},{variations:[{hiddenitems:[{hidingspot:"left-fan",item:{id:"palette",scale:.6158,position:{x:30.5,y:8.25},rotation:38.18,flipX:!0}},{hidingspot:"wall-barrel",item:{id:"cardboard",scale:.5924,position:{x:37.75,y:32.25},rotation:9.79,flipX:!0}},{hidingspot:"fabricroll-greenblue",item:{id:"glue",scale:.6507,position:{x:-61,y:11.75},rotation:-58.2,flipX:!0}},{hidingspot:"hand",item:{id:"paint-bucket",scale:.5844,position:{x:-19.25,y:-32.75},rotation:-2.74}},{hidingspot:"fabricroll-purpleblue",item:{id:"tape",scale:.7404,position:{x:-32,y:-32.5},rotation:-28.09,flipX:!0}}],itemslist:{give:{columns:3}}}],payoff:"float2",vo:{all_items_returned:[Qa.R12,.75,Qa.R13]}},{variations:[{hiddenitems:[{hidingspot:"ladder",item:{id:"tapemeasure",scale:.7404,position:{x:49.5,y:4.75},rotation:0,flipX:!1}},{hidingspot:"barrel",item:{id:"cardboard",scale:.7399,position:{x:44.5,y:5.25},rotation:-169.33,flipX:!1}},{hidingspot:"purple-pillar2",item:{id:"glue",scale:.5207,position:{x:-19.5,y:8.25},rotation:-53.95,flipX:!1}},{hidingspot:"orange-flower",item:{id:"ruler",scale:.4899,position:{x:-6,y:-49},rotation:-27.76,flipX:!1}},{hidingspot:"sun-flower",item:{id:"paint-brush",scale:.5273,position:{x:-90,y:-5.75},rotation:162.14,flipX:!1}}],itemslist:{give:{columns:3}}}],payoff:"float3",vo:{all_items_returned:[Qa.R11,.75,Qa.R13]}},{variations:[{hiddenitems:[{hidingspot:"left-fan",item:{id:"glue",rotation:85.52,flipX:!1,position:{x:-9.5,y:365.25},scale:.4498}},{hidingspot:"sun-flower",item:{id:"tape",rotation:132.65,flipX:!0,position:{x:-144.5,y:26.5},scale:.4802}},{hidingspot:"fabricroll-greenblue",item:{id:"sewing-machine",position:{x:-52.5,y:-41},scale:.7387}},{hidingspot:"hand",item:{id:"palette",rotation:72.59,flipX:!1,position:{x:-4,y:-25.25},scale:.56}},{hidingspot:"orange-flower",item:{id:"cardboard",rotation:23.61,flipX:!1,position:{x:136,y:-58.75},scale:.5256}},{hidingspot:"fabricroll-purpleblue",item:{id:"paint-brush",rotation:170.43,flipX:!0,position:{x:-175,y:-2.25},scale:.7391}}],itemslist:{give:{columns:3}}}],payoff:"float4",vo:{all_items_returned:[Qa.R12,.75,Qa.R13]}},{variations:[{hiddenitems:[{hidingspot:"left-fan",item:{id:"cardboard",scale:.6158,position:{x:36.5,y:27},rotation:-4.2,flipX:!1}},{hidingspot:"ladder",item:{id:"paint-bucket",scale:.53,position:{x:41.5,y:34.75},rotation:13.94,flipX:!1}},{hidingspot:"wall-barrel",item:{id:"glue",scale:.468,position:{x:-62.25,y:102},rotation:-61.51,flipX:!1}},{hidingspot:"barrel",item:{id:"palette",scale:.7389,position:{x:-2,y:-60},rotation:-46.73,flipX:!1}},{hidingspot:"large-green-pipe",item:{id:"tape",scale:.4802,position:{x:-57.51,y:9},rotation:-142.49,flipX:!0}},{hidingspot:"orange-flower",item:{id:"sewing-machine",scale:.4776,position:{x:146,y:-28.25},rotation:0,flipX:!1}},{hidingspot:"gas-tank",item:{id:"ruler",scale:.4892,position:{x:-18,y:-14.5},rotation:-8.19,flipX:!0}},{hidingspot:"fabricroll-purpleblue",item:{id:"tapemeasure",scale:.741,position:{x:-46,y:-15},rotation:45,flipX:!0}}],itemslist:{give:{columns:4}}}],payoff:"float5",vo:{all_items_returned:[Qa.R11,.75,Qa.R13]}}],bgm:"LATW_953_happy_pacer_think_mark_samba_brazil_AP_tweaked"},rl=["juneau","paris","rio","neworleans","london"],ol={locations:{juneau:$a,paris:il,rio:nl,neworleans:el,london:tl},spritesheets:{juneau:["juneau-1","juneau-2","juneau-3","juneau-4"],paris:["paris-1","paris-2","paris-3","paris-4"],rio:["rio-1","rio-2","rio-3","rio-4","rio-5","rio-6"],neworleans:["neworleans-1","neworleans-2","neworleans-3","neworleans-4"],london:["london-1","london-2","london-3","london-4"]},spritesheet_factory:{juneau:{"@1x":1,"@2x":[1,4]},paris:{"@1x":1,"@2x":[1,4]},rio:{"@1x":[1,2],"@2x":[1,6]},neworleans:{"@1x":1,"@2x":[1,4]},london:{"@1x":1,"@2x":[1,4]}}};var sl=i(227);i(30);const al="LunaAdventure.",ll=al+"HidingSpotSearched",hl=al+"ItemFound",ul=al+"AllItemsFound",cl=al+"ScrollLeft",dl=al+"ScrollRight",pl=al+"HomeButtonPressed",fl=al+"RestartIdleTimer",gl=al+"ItemReturned",ml=al+"AllItemsReturned",_l=al+"LevelComplete",vl=al+"ShowContinueButton",yl=al+"ItemSelected";var bl=i(8);i(75),i(76);
/*!
 * VERSION: 1.16.1
 * DATE: 2018-08-27
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 **/
u._gsScope._gsDefine("easing.Back",["easing.Ease"],(function(){var t,e,i,n,r=u._gsScope.GreenSockGlobals||u._gsScope,o=r.com.greensock,s=2*Math.PI,a=Math.PI/2,l=o._class,h=function(t,e){var i=l("easing."+t,(function(){}),!0),n=i.prototype=new u.Ease;return n.constructor=i,n.getRatio=e,i},c=u.Ease.register||function(){},d=function(t,e,i,n,r){var o=l("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new n},!0);return c(o,t),o},p=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},f=function(t,e){var i=l("easing."+t,(function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1}),!0),n=i.prototype=new u.Ease;return n.constructor=i,n.getRatio=e,n.config=function(t){return new i(t)},i},g=d("Back",f("BackOut",(function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1})),f("BackIn",(function(t){return t*t*((this._p1+1)*t-this._p1)})),f("BackInOut",(function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)}))),m=l("easing.SlowMo",(function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i}),!0),_=m.prototype=new u.Ease;return _.constructor=m,_.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1===t?0:1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),_.config=m.config=function(t,e,i){return new m(t,e,i)},(_=(t=l("easing.SteppedEase",(function(t,e){t=t||1,this._p1=1/t,this._p2=t+(e?0:1),this._p3=e?1:0}),!0)).prototype=new u.Ease).constructor=t,_.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),((this._p2*t|0)+this._p3)*this._p1},_.config=t.config=function(e,i){return new t(e,i)},(_=(e=l("easing.ExpoScaleEase",(function(t,e,i){this._p1=Math.log(e/t),this._p2=e-t,this._p3=t,this._ease=i}),!0)).prototype=new u.Ease).constructor=e,_.getRatio=function(t){return this._ease&&(t=this._ease.getRatio(t)),(this._p3*Math.exp(this._p1*t)-this._p3)/this._p2},_.config=e.config=function(t,i,n){return new e(t,i,n)},(_=(i=l("easing.RoughEase",(function(t){for(var e,i,n,r,o,s,a=(t=t||{}).taper||"none",l=[],h=0,c=0|(t.points||20),d=c,f=!1!==t.randomize,g=!0===t.clamp,m=t.template instanceof u.Ease?t.template:null,_="number"==typeof t.strength?.4*t.strength:.4;--d>-1;)e=f?Math.random():1/c*d,i=m?m.getRatio(e):e,n="none"===a?_:"out"===a?(r=1-e)*r*_:"in"===a?e*e*_:e<.5?(r=2*e)*r*.5*_:(r=2*(1-e))*r*.5*_,f?i+=Math.random()*n-.5*n:d%2?i+=.5*n:i-=.5*n,g&&(i>1?i=1:i<0&&(i=0)),l[h++]={x:e,y:i};for(l.sort((function(t,e){return t.x-e.x})),s=new p(1,1,null),d=c;--d>-1;)o=l[d],s=new p(o.x,o.y,s);this._prev=new p(0,0,0!==s.t?s:s.next)}),!0)).prototype=new u.Ease).constructor=i,_.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},_.config=function(t){return new i(t)},i.ease=new i,d("Bounce",h("BounceOut",(function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375})),h("BounceIn",(function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)})),h("BounceInOut",(function(t){var e=t<.5;return(t=e?1-2*t:2*t-1)<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}))),d("Circ",h("CircOut",(function(t){return Math.sqrt(1-(t-=1)*t)})),h("CircIn",(function(t){return-(Math.sqrt(1-t*t)-1)})),h("CircInOut",(function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}))),d("Elastic",(n=function(t,e,i){var n=l("easing."+t,(function(t,e){this._p1=t>=1?t:1,this._p2=(e||i)/(t<1?t:1),this._p3=this._p2/s*(Math.asin(1/this._p1)||0),this._p2=s/this._p2}),!0),r=n.prototype=new u.Ease;return r.constructor=n,r.getRatio=e,r.config=function(t,e){return new n(t,e)},n})("ElasticOut",(function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1}),.3),n("ElasticIn",(function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)}),.3),n("ElasticInOut",(function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1}),.45)),d("Expo",h("ExpoOut",(function(t){return 1-Math.pow(2,-10*t)})),h("ExpoIn",(function(t){return Math.pow(2,10*(t-1))-.001})),h("ExpoInOut",(function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}))),d("Sine",h("SineOut",(function(t){return Math.sin(t*a)})),h("SineIn",(function(t){return 1-Math.cos(t*a)})),h("SineInOut",(function(t){return-.5*(Math.cos(Math.PI*t)-1)}))),l("easing.EaseLookup",{find:function(t){return u.Ease.map[t]}},!0),c(r.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(t,"SteppedEase","ease,"),g}),!0);var xl=u.globals.Back,wl=u.globals.Elastic,Tl=(u.globals.Bounce,u.globals.RoughEase,u.globals.SlowMo,u.globals.SteppedEase,u.globals.Circ,u.globals.Expo),Sl=u.globals.Sine;u.globals.ExpoScaleEase;
/*!
 * VERSION: 2.1.2
 * DATE: 2019-03-01
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2019, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
u._gsScope._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],(function(){var t=function(t){l.default.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0},e=u.default._internals,i=e.lazyTweens,n=e.lazyRender,r=u._gsScope._gsDefine.globals,o=new u.Ease(null,null,1,0),s=t.prototype=new l.default;return s.constructor=t,s.kill()._gc=!1,t.version="2.1.2",s.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),l.default.prototype.invalidate.call(this)},s.addCallback=function(t,e,i,n){return this.add(u.default.delayedCall(0,t,i,n),e)},s.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),n=i.length,r=this._parseTimeOrLabel(e);--n>-1;)i[n]._startTime===r&&i[n]._enabled(!1,!1);return this},s.removePause=function(t){return this.removeCallback(l.default._internals.pauseCallback,t)},s.tweenTo=function(t,e){e=e||{};var i,n,s,a={ease:o,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},l=e.repeat&&r.TweenMax||u.default;for(n in e)a[n]=e[n];return a.time=this._parseTimeOrLabel(t),i=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,s=new l(this,i,a),a.onStart=function(){s.target.paused(!0),s.vars.time===s.target.time()||i!==s.duration()||s.isFromTo||s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale).render(s.time(),!0,!0),e.onStart&&e.onStart.apply(e.onStartScope||e.callbackScope||s,e.onStartParams||[])},s},s.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var n=this.tweenTo(e,i);return n.isFromTo=1,n.duration(Math.abs(n.vars.time-t)/this._timeScale||.001)},s.render=function(t,e,r){this._gc&&this._enabled(!0,!1);var o,s,a,l,h,u,c,d,p,f=this._time,g=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,_=this._totalTime,v=this._startTime,y=this._timeScale,b=this._rawPrevTime,x=this._paused,w=this._cycle;if(f!==this._time&&(t+=this._time-f),t>=g-1e-8&&t>=0)this._locked||(this._totalTime=g,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(s=!0,l="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-8||b<0||1e-8===b)&&b!==t&&this._first&&(h=!0,b>1e-8&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-8,this._yoyo&&1&this._cycle?this._time=t=0:(this._time=m,t=m+1e-4);else if(t<1e-8)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,t>-1e-8&&(t=0),(0!==f||0===m&&1e-8!==b&&(b>0||t<0&&b>=0)&&!this._locked)&&(l="onReverseComplete",s=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=s=!0,l="onReverseComplete"):b>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=m||!e||t||this._rawPrevTime===t?t:1e-8,0===t&&s)for(o=this._first;o&&0===o._startTime;)o._duration||(s=!1),o=o._next;t=0,this._initted||(h=!0)}else if(0===m&&b<0&&(h=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=m+this._repeatDelay,this._cycle=this._totalTime/u>>0,this._cycle&&this._cycle===this._totalTime/u&&_<=t&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&1&this._cycle&&(this._time=m-this._time),this._time>m?(this._time=m,t=m+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e){if((t=this._time)>=f||this._repeat&&w!==this._cycle)for(o=this._first;o&&o._startTime<=t&&!c;)o._duration||"isPause"!==o.data||o.ratio||0===o._startTime&&0===this._rawPrevTime||(c=o),o=o._next;else for(o=this._last;o&&o._startTime>=t&&!c;)o._duration||"isPause"===o.data&&o._rawPrevTime>0&&(c=o),o=o._prev;c&&(p=this._startTime+c._startTime/this._timeScale,c._startTime<m&&(this._time=this._rawPrevTime=t=c._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay)))}if(this._cycle!==w&&!this._locked){var T=this._yoyo&&0!=(1&w),S=T===(this._yoyo&&0!=(1&this._cycle)),E=this._totalTime,P=this._cycle,A=this._rawPrevTime,I=this._time;if(this._totalTime=w*m,this._cycle<w?T=!T:this._totalTime+=m,this._time=f,this._rawPrevTime=0===m?b-1e-4:b,this._cycle=w,this._locked=!0,f=T?0:m,this.render(f,e,0===m),e||this._gc||this.vars.onRepeat&&(this._cycle=P,this._locked=!1,this._callback("onRepeat")),f!==this._time)return;if(S&&(this._cycle=w,this._locked=!0,f=T?m+1e-4:-1e-4,this.render(f,!0,!1)),this._locked=!1,this._paused&&!x)return;this._time=I,this._totalTime=E,this._cycle=P,this._rawPrevTime=A}if(this._time!==f&&this._first||r||h||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==_&&t>0&&(this._active=!0),0===_&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),(d=this._time)>=f)for(o=this._first;o&&(a=o._next,d===this._time&&(!this._paused||x));)(o._active||o._startTime<=this._time&&!o._paused&&!o._gc)&&(c===o&&(this.pause(),this._pauseTime=p),o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(t-o._startTime)*o._timeScale,e,r):o.render((t-o._startTime)*o._timeScale,e,r)),o=a;else for(o=this._last;o&&(a=o._prev,d===this._time&&(!this._paused||x));){if(o._active||o._startTime<=f&&!o._paused&&!o._gc){if(c===o){for(c=o._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(t-c._startTime)*c._timeScale:(t-c._startTime)*c._timeScale,e,r),c=c._prev;c=null,this.pause(),this._pauseTime=p}o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(t-o._startTime)*o._timeScale,e,r):o.render((t-o._startTime)*o._timeScale,e,r)}o=a}this._onUpdate&&(e||(i.length&&n(),this._callback("onUpdate"))),l&&(this._locked||this._gc||v!==this._startTime&&y===this._timeScale||(0===this._time||g>=this.totalDuration())&&(s&&(i.length&&n(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))}else _!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},s.getActive=function(t,e,i){var n,r,o=[],s=this.getChildren(t||null==t,e||null==t,!!i),a=0,l=s.length;for(n=0;n<l;n++)(r=s[n]).isActive()&&(o[a++]=r);return o},s.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),n=i.length;for(e=0;e<n;e++)if(i[e].time>t)return i[e].name;return null},s.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},s.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort((function(t,e){return t.time-e.time})),e},s.invalidate=function(){return this._locked=!1,l.default.prototype.invalidate.call(this)},s.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()||0},s.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()||0},s.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(l.default.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},s.time=function(t,e){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var i=this._duration,n=this._cycle,r=n*(i+this._repeatDelay);return t>i&&(t=i),this.totalTime(this._yoyo&&1&n?i-t+r:this._repeat?t+r:t,e)},s.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},s.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},s.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},s.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},t}),!0);var El,Pl,Al,Il=u.globals.TimelineMax,Ol=function(){function t(t,e,i){this.value=t,this.time=e,this.next=null,this.isStepped=!1,this.ease=i?"function"==typeof i?i:Pl.generateEase(i):null}return t.createList=function(e){if("list"in e){var i=e.list,n=void 0,r=void 0,o=i[0],s=o.value,a=o.time;if(r=n=new t("string"==typeof s?Pl.hexToRGB(s):s,a,e.ease),i.length>2||2===i.length&&i[1].value!==s)for(var l=1;l<i.length;++l){var h=i[l],u=h.value,c=h.time;n.next=new t("string"==typeof u?Pl.hexToRGB(u):u,c),n=n.next}return r.isStepped=!!e.isStepped,r}var d=new t("string"==typeof e.start?Pl.hexToRGB(e.start):e.start,0);return e.end!==e.start&&(d.next=new t("string"==typeof e.end?Pl.hexToRGB(e.end):e.end,1)),d},t}(),Cl=s;
/*!
 * pixi-particles - v4.2.0
 * Compiled Sat, 26 Oct 2019 14:40:23 UTC
 *
 * pixi-particles is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function Ml(t){return El(t)}El=parseInt(/^(\d+)\./.exec(s.VERSION)[1])<5?Cl.Texture.fromImage:Cl.Texture.from,(Al=Pl||(Pl={})).verbose=!1,Al.DEG_TO_RADS=Math.PI/180,Al.rotatePoint=function(t,e){if(t){t*=Al.DEG_TO_RADS;var i=Math.sin(t),n=Math.cos(t),r=e.x*n-e.y*i,o=e.x*i+e.y*n;e.x=r,e.y=o}},Al.combineRGBComponents=function(t,e,i){return t<<16|e<<8|i},Al.normalize=function(t){var e=1/Al.length(t);t.x*=e,t.y*=e},Al.scaleBy=function(t,e){t.x*=e,t.y*=e},Al.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},Al.hexToRGB=function(t,e){var i;return e||(e={}),"#"==t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8==t.length&&(i=t.substr(0,2),t=t.substr(2)),e.r=parseInt(t.substr(0,2),16),e.g=parseInt(t.substr(2,2),16),e.b=parseInt(t.substr(4,2),16),i&&(e.a=parseInt(i,16)),e},Al.generateEase=function(t){var e=t.length,i=1/e;return function(n){var r,o,s=e*n|0;return r=(n-s*i)*e,(o=t[s]||t[e-1]).s+r*(2*(1-r)*(o.cp-o.s)+r*(o.e-o.s))}},Al.getBlendMode=function(t){if(!t)return s.BLEND_MODES.NORMAL;for(t=t.toUpperCase();t.indexOf(" ")>=0;)t=t.replace(" ","_");return s.BLEND_MODES[t]||s.BLEND_MODES.NORMAL},Al.createSteppedGradient=function(t,e){void 0===e&&(e=10),("number"!=typeof e||e<=0)&&(e=10);var i=new Ol(Al.hexToRGB(t[0].value),t[0].time);i.isStepped=!0;for(var n=i,r=t[0],o=1,s=t[o],a=1;a<e;++a){for(var l=a/e;l>s.time;)r=s,s=t[++o];l=(l-r.time)/(s.time-r.time);var h=Al.hexToRGB(r.value),u=Al.hexToRGB(s.value),c={r:(u.r-h.r)*l+h.r,g:(u.g-h.g)*l+h.g,b:(u.b-h.b)*l+h.b};n.next=new Ol(c,a/e),n=n.next}return i};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var Rl=function(t,e){return(Rl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function kl(t,e){function i(){this.constructor=t}Rl(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Ll=function(){function t(t){void 0===t&&(t=!1),this.current=null,this.next=null,this.isColor=!!t,this.interpolate=null,this.ease=null}return t.prototype.reset=function(t){this.current=t,this.next=t.next,this.next&&this.next.time>=1?this.interpolate=this.isColor?Nl:Dl:t.isStepped?this.interpolate=this.isColor?jl:Ul:this.interpolate=this.isColor?Bl:Fl,this.ease=this.current.ease},t}();function Dl(t){return this.ease&&(t=this.ease(t)),(this.next.value-this.current.value)*t+this.current.value}function Nl(t){this.ease&&(t=this.ease(t));var e=this.current.value,i=this.next.value,n=(i.r-e.r)*t+e.r,r=(i.g-e.g)*t+e.g,o=(i.b-e.b)*t+e.b;return Pl.combineRGBComponents(n,r,o)}function Fl(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;return t=(t-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*t+this.current.value}function Bl(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;t=(t-this.current.time)/(this.next.time-this.current.time);var e=this.current.value,i=this.next.value,n=(i.r-e.r)*t+e.r,r=(i.g-e.g)*t+e.g,o=(i.b-e.b)*t+e.b;return Pl.combineRGBComponents(n,r,o)}function Ul(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function jl(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;var e=this.current.value;return Pl.combineRGBComponents(e.r,e.g,e.b)}var Vl,Xl=function(t){function e(i){var n=t.call(this)||this;return n.emitter=i,n.anchor.x=n.anchor.y=.5,n.velocity=new s.Point,n.rotationSpeed=0,n.rotationAcceleration=0,n.maxLife=0,n.age=0,n.ease=null,n.extraData=null,n.alphaList=new Ll,n.speedList=new Ll,n.speedMultiplier=1,n.acceleration=new s.Point,n.maxSpeed=NaN,n.scaleList=new Ll,n.scaleMultiplier=1,n.colorList=new Ll(!0),n._doAlpha=!1,n._doScale=!1,n._doSpeed=!1,n._doAcceleration=!1,n._doColor=!1,n._doNormalMovement=!1,n._oneOverLife=0,n.next=null,n.prev=null,n.init=n.init,n.Particle_init=e.prototype.init,n.update=n.update,n.Particle_update=e.prototype.update,n.Sprite_destroy=t.prototype.destroy,n.Particle_destroy=e.prototype.destroy,n.applyArt=n.applyArt,n.kill=n.kill,n}return kl(e,t),e.prototype.init=function(){this.age=0,this.velocity.x=this.speedList.current.value*this.speedMultiplier,this.velocity.y=0,Pl.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=Pl.DEG_TO_RADS,this.rotationSpeed*=Pl.DEG_TO_RADS,this.rotationAcceleration*=Pl.DEG_TO_RADS,this.alpha=this.alphaList.current.value,this.scale.x=this.scale.y=this.scaleList.current.value,this._doAlpha=!!this.alphaList.current.next,this._doSpeed=!!this.speedList.current.next,this._doScale=!!this.scaleList.current.next,this._doColor=!!this.colorList.current.next,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.speedList.current.value||this._doAcceleration,this._oneOverLife=1/this.maxLife;var t=this.colorList.current.value;this.tint=Pl.combineRGBComponents(t.r,t.g,t.b),this.visible=!0},e.prototype.applyArt=function(t){this.texture=t||s.Texture.EMPTY},e.prototype.update=function(t){if(this.age+=t,this.age>=this.maxLife||this.age<0)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4==this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(e)),this._doScale){var i=this.scaleList.interpolate(e)*this.scaleMultiplier;this.scale.x=this.scale.y=i}if(this._doNormalMovement){var n=void 0,r=void 0;if(this._doSpeed){var o=this.speedList.interpolate(e)*this.speedMultiplier;Pl.normalize(this.velocity),Pl.scaleBy(this.velocity,o),n=this.velocity.x*t,r=this.velocity.y*t}else if(this._doAcceleration){var s=this.velocity.x,a=this.velocity.y;if(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.maxSpeed){var l=Pl.length(this.velocity);l>this.maxSpeed&&Pl.scaleBy(this.velocity,this.maxSpeed/l)}n=(s+this.velocity.x)/2*t,r=(a+this.velocity.y)/2*t}else n=this.velocity.x*t,r=this.velocity.y*t;this.position.x+=n,this.position.y+=r}if(this._doColor&&(this.tint=this.colorList.interpolate(e)),0!==this.rotationAcceleration){var h=this.rotationSpeed+this.rotationAcceleration*t;this.rotation+=(this.rotationSpeed+h)/2*t,this.rotationSpeed=h}else 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*t:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x));return e},e.prototype.kill=function(){this.emitter.recycle(this)},e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_destroy(),this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=this.next=this.prev=null},e.parseArt=function(t){var e;for(e=t.length;e>=0;--e)"string"==typeof t[e]&&(t[e]=Ml(t[e]));if(Pl.verbose)for(e=t.length-1;e>0;--e)if(t[e].baseTexture!=t[e-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return t},e.parseData=function(t){return t},e}(s.Sprite),Hl=function(){function t(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}return t.prototype.init=function(t){if(t&&t.length)if(Array.isArray(t[0]))for(var e=0;e<t.length;++e)for(var i=t[e],n=i[0],r=1;r<i.length;++r){var o=i[r];this.segments.push({p1:n,p2:o,l:0}),n=o}else for(n=t[0],e=1;e<t.length;++e){o=t[e];this.segments.push({p1:n,p2:o,l:0}),n=o}else this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});for(e=0;e<this.segments.length;++e){var s=this.segments[e],a=s.p1,l=s.p2,h=Math.sqrt((l.x-a.x)*(l.x-a.x)+(l.y-a.y)*(l.y-a.y));this.segments[e].l=h,this.totalLength+=h,this.countingLengths.push(this.totalLength)}},t.prototype.getRandomPoint=function(t){var e,i,n=Math.random()*this.totalLength;if(1===this.segments.length)e=this.segments[0],i=n;else for(var r=0;r<this.countingLengths.length;++r)if(n<this.countingLengths[r]){e=this.segments[r],i=0===r?n:n-this.countingLengths[r-1];break}i/=e.l||1;var o=e.p1,s=e.p2;t.x=o.x+i*(s.x-o.x),t.y=o.y+i*(s.y-o.y)},t}(),Gl=s;Vl=parseInt(/^(\d+)\./.exec(s.VERSION)[1])<5?Gl.ticker.shared:Gl.Ticker.shared;var Wl=new s.Point,Yl=function(){function t(t,e,i){this._currentImageIndex=-1,this._particleConstructor=Xl,this.particleImages=null,this.startAlpha=null,this.startSpeed=null,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=null,this.minimumScaleMultiplier=1,this.startColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.spawnPolygonalChain=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._currentImageIndex=-1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,e&&i&&this.init(e,i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(t.prototype,"orderedArt",{get:function(){return-1!==this._currentImageIndex},set:function(t){this._currentImageIndex=t?0:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency="number"==typeof t&&t>0?t:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"particleConstructor",{get:function(){return this._particleConstructor},set:function(t){if(t!=this._particleConstructor){this._particleConstructor=t,this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this.cleanup(),this._parent=t},enumerable:!0,configurable:!0}),t.prototype.init=function(t,e){if(t&&e){this.cleanup(),this._origConfig=e,this._origArt=t,t=Array.isArray(t)?t.slice():[t];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(t):t,e.alpha?this.startAlpha=Ol.createList(e.alpha):this.startAlpha=new Ol(1,0),e.speed?(this.startSpeed=Ol.createList(e.speed),this.minimumSpeedMultiplier=("minimumSpeedMultiplier"in e?e.minimumSpeedMultiplier:e.speed.minimumSpeedMultiplier)||1):(this.minimumSpeedMultiplier=1,this.startSpeed=new Ol(0,0));var n=e.acceleration;n&&(n.x||n.y)?(this.startSpeed.next=null,this.acceleration=new s.Point(n.x,n.y),this.maxSpeed=e.maxSpeed||NaN):this.acceleration=new s.Point,e.scale?(this.startScale=Ol.createList(e.scale),this.minimumScaleMultiplier=("minimumScaleMultiplier"in e?e.minimumScaleMultiplier:e.scale.minimumScaleMultiplier)||1):(this.startScale=new Ol(1,0),this.minimumScaleMultiplier=1),e.color?this.startColor=Ol.createList(e.color):this.startColor=new Ol({r:255,g:255,b:255},0),e.startRotation?(this.minStartRotation=e.startRotation.min,this.maxStartRotation=e.startRotation.max):this.minStartRotation=this.maxStartRotation=0,e.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!e.noRotation:this.noRotation=!1,e.rotationSpeed?(this.minRotationSpeed=e.rotationSpeed.min,this.maxRotationSpeed=e.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.rotationAcceleration=e.rotationAcceleration||0,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,this.particleBlendMode=Pl.getBlendMode(e.blendMode),e.ease?this.customEase="function"==typeof e.ease?e.ease:Pl.generateEase(e.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(e.extraData):this.extraData=e.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.particleSpacing=0,this.angleStart=0,this.parseSpawnType(e),this.frequency=e.frequency,this.spawnChance="number"==typeof e.spawnChance&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos=new s.Point,this.spawnPos=new s.Point(e.pos.x,e.pos.y),this.initAdditional(t,e),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===e.emit||!!e.emit,this.autoUpdate=!!e.autoUpdate,this.orderedArt=!!e.orderedArt}},t.prototype.initAdditional=function(t,e){},t.prototype.parseSpawnType=function(t){var e;switch(t.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var i=t.spawnRect;this.spawnRect=new s.Rectangle(i.x,i.y,i.w,i.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,e=t.spawnCircle,this.spawnCircle=new s.Circle(e.x,e.y,e.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,e=t.spawnCircle,this.spawnCircle=new s.Circle(e.x,e.y,e.r),this.spawnCircle.minRadius=e.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particleSpacing=t.particleSpacing,this.angleStart=t.angleStart?t.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;case"polygonalChain":this.spawnType="polygonalChain",this._spawnFunc=this._spawnPolygonalChain,this.spawnPolygonalChain=new Hl(t.spawnPolygon);break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}},t.prototype.recycle=function(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t==this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t==this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount},t.prototype.rotate=function(t){if(this.rotation!=t){var e=t-this.rotation;this.rotation=t,Pl.rotatePoint(e,this.spawnPos),this._posChanged=!0}},t.prototype.updateSpawnPos=function(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e},t.prototype.updateOwnerPos=function(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e},t.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(t.prototype,"emit",{get:function(){return this._emit},set:function(t){this._emit=!!t,this._emitterLife=this.emitterLifetime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){this._autoUpdate&&!t?Vl.remove(this.update,this):!this._autoUpdate&&t&&Vl.add(this.update,this),this._autoUpdate=!!t},enumerable:!0,configurable:!0}),t.prototype.playOnceAndDestroy=function(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t},t.prototype.playOnce=function(t){this.emit=!0,this._completeCallback=t},t.prototype.update=function(t){if(this._autoUpdate&&(t=t/s.settings.TARGET_FPMS/1e3),this._parent){var e,i,n,r,o;for(i=this._activeParticlesFirst;i;i=n)n=i.next,i.update(t);this._prevPosIsValid&&(r=this._prevEmitterPos.x,o=this._prevEmitterPos.y);var a=this.ownerPos.x+this.spawnPos.x,l=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var h=void 0;if(h=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<h){var u=void 0,c=void 0;if(this._prevPosIsValid&&this._posChanged){var d=1+this._spawnTimer/t;u=(a-r)*d+r,c=(l-o)*d+o}else u=a,c=l;e=0;for(var p=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);e<p;++e)if(!(this.spawnChance<1&&Math.random()>=this.spawnChance)){var f=void 0;if(this._poolFirst?(f=this._poolFirst,this._poolFirst=this._poolFirst.next,f.next=null):f=new this.particleConstructor(this),this.particleImages.length>1?-1!==this._currentImageIndex?(f.applyArt(this.particleImages[this._currentImageIndex++]),(this._currentImageIndex<0||this._currentImageIndex>=this.particleImages.length)&&(this._currentImageIndex=0)):f.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):f.applyArt(this.particleImages[0]),f.alphaList.reset(this.startAlpha),1!=this.minimumSpeedMultiplier&&(f.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),f.speedList.reset(this.startSpeed),f.acceleration.x=this.acceleration.x,f.acceleration.y=this.acceleration.y,f.maxSpeed=this.maxSpeed,1!=this.minimumScaleMultiplier&&(f.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier),f.scaleList.reset(this.startScale),f.colorList.reset(this.startColor),this.minRotationSpeed==this.maxRotationSpeed?f.rotationSpeed=this.minRotationSpeed:f.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,f.rotationAcceleration=this.rotationAcceleration,f.noRotation=this.noRotation,f.maxLife=h,f.blendMode=this.particleBlendMode,f.ease=this.customEase,f.extraData=this.extraData,this.applyAdditionalProperties(f),this._spawnFunc(f,u,c,e),f.init(),f.update(-this._spawnTimer),f.parent){var g=this._parent.children;if(g[0]==f)g.shift();else if(g[g.length-1]==f)g.pop();else{var m=g.indexOf(f);g.splice(m,1)}this.addAtBack?g.unshift(f):g.push(f)}else this.addAtBack?this._parent.addChildAt(f,0):this._parent.addChild(f);this._activeParticlesLast?(this._activeParticlesLast.next=f,f.prev=this._activeParticlesLast,this._activeParticlesLast=f):this._activeParticlesLast=this._activeParticlesFirst=f,++this.particleCount}}this._spawnTimer+=this._frequency}}if(this._posChanged&&(this._prevEmitterPos.x=a,this._prevEmitterPos.y=l,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){var _=this._completeCallback;this._completeCallback=null,_()}this._destroyWhenComplete&&this.destroy()}}},t.prototype.applyAdditionalProperties=function(t){},t.prototype._spawnPoint=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,t.position.x=e,t.position.y=i},t.prototype._spawnRect=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,Wl.x=Math.random()*this.spawnRect.width+this.spawnRect.x,Wl.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&Pl.rotatePoint(this.rotation,Wl),t.position.x=e+Wl.x,t.position.y=i+Wl.y},t.prototype._spawnCircle=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,Wl.x=Math.random()*this.spawnCircle.radius,Wl.y=0,Pl.rotatePoint(360*Math.random(),Wl),Wl.x+=this.spawnCircle.x,Wl.y+=this.spawnCircle.y,0!==this.rotation&&Pl.rotatePoint(this.rotation,Wl),t.position.x=e+Wl.x,t.position.y=i+Wl.y},t.prototype._spawnRing=function(t,e,i){var n=this.spawnCircle;this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,n.minRadius!==n.radius?Wl.x=Math.random()*(n.radius-n.minRadius)+n.minRadius:Wl.x=n.radius,Wl.y=0;var r=360*Math.random();t.rotation+=r,Pl.rotatePoint(r,Wl),Wl.x+=this.spawnCircle.x,Wl.y+=this.spawnCircle.y,0!==this.rotation&&Pl.rotatePoint(this.rotation,Wl),t.position.x=e+Wl.x,t.position.y=i+Wl.y},t.prototype._spawnPolygonalChain=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,this.spawnPolygonalChain.getRandomPoint(Wl),0!==this.rotation&&Pl.rotatePoint(this.rotation,Wl),t.position.x=e+Wl.x,t.position.y=i+Wl.y},t.prototype._spawnBurst=function(t,e,i,n){0===this.particleSpacing?t.rotation=360*Math.random():t.rotation=this.angleStart+this.particleSpacing*n+this.rotation,t.position.x=e,t.position.y=i},t.prototype.cleanup=function(){var t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},t.prototype.destroy=function(){var t;this.autoUpdate=!1,this.cleanup();for(var e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},t}(),zl=new s.Point,ql=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],Kl=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(ql).join("|"),"g"),Jl=(function(t){function e(e){var i=t.call(this,e)||this;return i.path=null,i.initialRotation=0,i.initialPosition=new s.Point,i.movement=0,i}kl(e,t),e.prototype.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0&&this.path){var i=this.speedList.interpolate(e)*this.speedMultiplier;this.movement+=i*t,zl.x=this.movement,zl.y=this.path(this.movement),Pl.rotatePoint(this.initialRotation,zl),this.position.x=this.initialPosition.x+zl.x,this.position.y=this.initialPosition.y+zl.y}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},e.parseArt=function(t){return Xl.parseArt(t)},e.parseData=function(t){var e={};if(t&&t.path)try{e.path=function(t){for(var e=t.match(Kl),i=e.length-1;i>=0;--i)ql.indexOf(e[i])>=0&&(e[i]="Math."+e[i]);return t=e.join(""),new Function("x","return "+t+";")}(t.path)}catch(t){Pl.verbose&&console.error("PathParticle: error in parsing path expression"),e.path=null}else Pl.verbose&&console.error("PathParticle requires a path string in extraData!"),e.path=null;return e}}(Xl),function(t){function e(e){var i=t.call(this,e)||this;return i.textures=null,i.duration=0,i.framerate=0,i.elapsed=0,i.loop=!1,i}kl(e,t),e.prototype.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},e.prototype.applyArt=function(t){this.textures=t.textures,this.framerate=t.framerate,this.duration=t.duration,this.loop=t.loop},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0){this.elapsed+=t,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var i=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[i]||s.Texture.EMPTY}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.textures=null},e.parseArt=function(t){for(var e,i,n,r,o,a=[],l=0;l<t.length;++l){e=t[l],a[l]=i={},i.textures=o=[],n=e.textures;for(var h=0;h<n.length;++h)if("string"==typeof(r=n[h]))o.push(Ml(r));else if(r instanceof s.Texture)o.push(r);else{var u=r.count||1;for(r="string"==typeof r.texture?Ml(r.texture):r.texture;u>0;--u)o.push(r)}"matchLife"==e.framerate?(i.framerate=-1,i.duration=0,i.loop=!1):(i.loop=!!e.loop,i.framerate=e.framerate>0?e.framerate:60,i.duration=o.length/i.framerate)}return a}}(Xl),180/Math.PI),Zl=[],Ql=[],$l=[],th={},eh=u._gsScope._gsDefine.globals,ih=function(t,e,i,n){i===n&&(i=n-(n-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=n,this.da=n-t,this.ca=i-t,this.ba=e-t},nh=function(t,e,i,n){var r={a:t},o={},s={},a={c:n},l=(t+e)/2,h=(e+i)/2,u=(i+n)/2,c=(l+h)/2,d=(h+u)/2,p=(d-c)/8;return r.b=l+(t-l)/4,o.b=c+p,r.c=o.a=(r.b+o.b)/2,o.c=s.a=(c+d)/2,s.b=d-p,a.b=u+(n-u)/4,s.c=a.a=(s.b+a.b)/2,[r,o,s,a]},rh=function(t,e,i,n,r){var o,s,a,l,h,u,c,d,p,f,g,m,_,v=t.length-1,y=0,b=t[0].a;for(o=0;o<v;o++)s=(h=t[y]).a,a=h.d,l=t[y+1].d,r?(g=Zl[o],_=((m=Ql[o])+g)*e*.25/(n?.5:$l[o]||.5),d=a-((u=a-(a-s)*(n?.5*e:0!==g?_/g:0))+(((c=a+(l-a)*(n?.5*e:0!==m?_/m:0))-u)*(3*g/(g+m)+.5)/4||0))):d=a-((u=a-(a-s)*e*.5)+(c=a+(l-a)*e*.5))/2,u+=d,c+=d,h.c=p=u,h.b=0!==o?b:b=h.a+.6*(h.c-h.a),h.da=a-s,h.ca=p-s,h.ba=b-s,i?(f=nh(s,b,p,a),t.splice(y,1,f[0],f[1],f[2],f[3]),y+=4):y++,b=c;(h=t[y]).b=b,h.c=b+.4*(h.d-b),h.da=h.d-h.a,h.ca=h.c-h.a,h.ba=b-h.a,i&&(f=nh(h.a,b,h.c,h.d),t.splice(y,1,f[0],f[1],f[2],f[3]))},oh=function(t,e,i,n){var r,o,s,a,l,h,u=[];if(n)for(o=(t=[n].concat(t)).length;--o>-1;)"string"==typeof(h=t[o][e])&&"="===h.charAt(1)&&(t[o][e]=n[e]+Number(h.charAt(0)+h.substr(2)));if((r=t.length-2)<0)return u[0]=new ih(t[0][e],0,0,t[0][e]),u;for(o=0;o<r;o++)s=t[o][e],a=t[o+1][e],u[o]=new ih(s,0,0,a),i&&(l=t[o+2][e],Zl[o]=(Zl[o]||0)+(a-s)*(a-s),Ql[o]=(Ql[o]||0)+(l-a)*(l-a));return u[o]=new ih(t[o][e],0,0,t[o+1][e]),u},sh=function(t,e,i,n,r,o){var s,a,l,h,u,c,d,p,f={},g=[],m=o||t[0];for(a in r="string"==typeof r?","+r+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==e&&(e=1),t[0])g.push(a);if(t.length>1){for(p=t[t.length-1],d=!0,s=g.length;--s>-1;)if(a=g[s],Math.abs(m[a]-p[a])>.05){d=!1;break}d&&(t=t.concat(),o&&t.unshift(o),t.push(t[1]),o=t[t.length-3])}for(Zl.length=Ql.length=$l.length=0,s=g.length;--s>-1;)a=g[s],th[a]=-1!==r.indexOf(","+a+","),f[a]=oh(t,a,th[a],o);for(s=Zl.length;--s>-1;)Zl[s]=Math.sqrt(Zl[s]),Ql[s]=Math.sqrt(Ql[s]);if(!n){for(s=g.length;--s>-1;)if(th[a])for(c=(l=f[g[s]]).length-1,h=0;h<c;h++)u=l[h+1].da/Ql[h]+l[h].da/Zl[h]||0,$l[h]=($l[h]||0)+u*u;for(s=$l.length;--s>-1;)$l[s]=Math.sqrt($l[s])}for(s=g.length,h=i?4:1;--s>-1;)l=f[a=g[s]],rh(l,e,i,n,th[a]),d&&(l.splice(0,h),l.splice(l.length-h,h));return f},ah=function(t,e,i){for(var n,r,o,s,a,l,h,u,c,d,p,f=1/i,g=t.length;--g>-1;)for(o=(d=t[g]).a,s=d.d-o,a=d.c-o,l=d.b-o,n=r=0,u=1;u<=i;u++)n=r-(r=((h=f*u)*h*s+3*(c=1-h)*(h*a+c*l))*h),e[p=g*i+u-1]=(e[p]||0)+n*n},lh=u._gsScope._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var n,r,o,s,a,l=e.values||[],h={},u=l[0],c=e.autoRotate||i.vars.orientToBezier;for(n in this._autoRotate=c?c instanceof Array?c:[["x","y","rotation",!0===c?0:Number(c)||0]]:null,u)this._props.push(n);for(o=this._props.length;--o>-1;)n=this._props[o],this._overwriteProps.push(n),r=this._func[n]="function"==typeof t[n],h[n]=r?t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(t[n]),a||h[n]!==l[0][n]&&(a=h);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?sh(l,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,a):function(t,e,i){var n,r,o,s,a,l,h,u,c,d,p,f={},g="cubic"===(e=e||"soft")?3:2,m="soft"===e,_=[];if(m&&i&&(t=[i].concat(t)),null==t||t.length<g+1)throw"invalid Bezier data";for(c in t[0])_.push(c);for(l=_.length;--l>-1;){for(f[c=_[l]]=a=[],d=0,u=t.length,h=0;h<u;h++)n=null==i?t[h][c]:"string"==typeof(p=t[h][c])&&"="===p.charAt(1)?i[c]+Number(p.charAt(0)+p.substr(2)):Number(p),m&&h>1&&h<u-1&&(a[d++]=(n+a[d-2])/2),a[d++]=n;for(u=d-g+1,d=0,h=0;h<u;h+=g)n=a[h],r=a[h+1],o=a[h+2],s=2===g?0:a[h+3],a[d++]=p=3===g?new ih(n,r,o,s):new ih(n,(2*r+n)/3,(2*r+o)/3,o);a.length=d}return f}(l,e.type,h),this._segCount=this._beziers[n].length,this._timeRes){var d=function(t,e){var i,n,r,o,s=[],a=[],l=0,h=0,u=(e=e>>0||6)-1,c=[],d=[];for(i in t)ah(t[i],s,e);for(r=s.length,n=0;n<r;n++)l+=Math.sqrt(s[n]),d[o=n%e]=l,o===u&&(h+=l,c[o=n/e>>0]=d,a[o]=h,l=0,d=[]);return{length:h,lengths:a,segments:c}}(this._beziers,this._timeRes);this._length=d.length,this._lengths=d.lengths,this._segments=d.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(c=this._autoRotate)for(this._initialRotations=[],c[0]instanceof Array||(this._autoRotate=c=[c]),o=c.length;--o>-1;){for(s=0;s<3;s++)n=c[o][s],this._func[n]="function"==typeof t[n]&&t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)];n=c[o][2],this._initialRotations[o]=(this._func[n]?this._func[n].call(this._target):this._target[n])||0,this._overwriteProps.push(n)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(t){var e,i,n,r,o,s,a,l,h,u,c=this._segCount,d=this._func,p=this._target,f=t!==this._startRatio;if(this._timeRes){if(h=this._lengths,u=this._curSeg,t*=this._length,n=this._li,t>this._l2&&n<c-1){for(l=c-1;n<l&&(this._l2=h[++n])<=t;);this._l1=h[n-1],this._li=n,this._curSeg=u=this._segments[n],this._s2=u[this._s1=this._si=0]}else if(t<this._l1&&n>0){for(;n>0&&(this._l1=h[--n])>=t;);0===n&&t<this._l1?this._l1=0:n++,this._l2=h[n],this._li=n,this._curSeg=u=this._segments[n],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(e=n,t-=this._l1,n=this._si,t>this._s2&&n<u.length-1){for(l=u.length-1;n<l&&(this._s2=u[++n])<=t;);this._s1=u[n-1],this._si=n}else if(t<this._s1&&n>0){for(;n>0&&(this._s1=u[--n])>=t;);0===n&&t<this._s1?this._s1=0:n++,this._s2=u[n],this._si=n}s=(n+(t-this._s1)/(this._s2-this._s1))*this._prec||0}else s=(t-(e=t<0?0:t>=1?c-1:c*t>>0)*(1/c))*c;for(i=1-s,n=this._props.length;--n>-1;)r=this._props[n],a=(s*s*(o=this._beziers[r][e]).da+3*i*(s*o.ca+i*o.ba))*s+o.a,this._mod[r]&&(a=this._mod[r](a,p)),d[r]?p[r](a):p[r]=a;if(this._autoRotate){var g,m,_,v,y,b,x,w=this._autoRotate;for(n=w.length;--n>-1;)r=w[n][2],b=w[n][3]||0,x=!0===w[n][4]?1:Jl,o=this._beziers[w[n][0]],g=this._beziers[w[n][1]],o&&g&&(o=o[e],g=g[e],m=o.a+(o.b-o.a)*s,m+=((v=o.b+(o.c-o.b)*s)-m)*s,v+=(o.c+(o.d-o.c)*s-v)*s,_=g.a+(g.b-g.a)*s,_+=((y=g.b+(g.c-g.b)*s)-_)*s,y+=(g.c+(g.d-g.c)*s-y)*s,a=f?Math.atan2(y-_,v-m)*x+b:this._initialRotations[n],this._mod[r]&&(a=this._mod[r](a,p)),d[r]?p[r](a):p[r]=a)}}}),hh=lh.prototype;lh.bezierThrough=sh,lh.cubicToQuadratic=nh,lh._autoCSS=!0,lh.quadraticToCubic=function(t,e,i){return new ih(t,(2*e+t)/3,(2*e+i)/3,i)},lh._cssRegister=function(){var t=eh.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,n=e._setPluginRatio,r=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,o,s,a,l){e instanceof Array&&(e={values:e}),l=new lh;var h,u,c,d=e.values,p=d.length-1,f=[],g={};if(p<0)return a;for(h=0;h<=p;h++)c=i(t,d[h],s,a,l,p!==h),f[h]=c.end;for(u in e)g[u]=e[u];return g.values=f,(a=new r(t,"bezier",0,0,c.pt,2)).data=c,a.plugin=l,a.setRatio=n,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(h=!0===g.autoRotate?0:Number(g.autoRotate),g.autoRotate=null!=c.end.left?[["left","top","rotation",h,!1]]:null!=c.end.x&&[["x","y","rotation",h,!1]]),g.autoRotate&&(s._transform||s._enableTransforms(!1),c.autoRotate=s._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,s._overwriteProps.push("rotation")),l._onInitTween(c.proxy,g,s._tween),a}})}},hh._mod=function(t){for(var e,i=this._overwriteProps,n=i.length;--n>-1;)(e=t[i[n]])&&"function"==typeof e&&(this._mod[i[n]]=e)},hh._kill=function(t){var e,i,n=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=n.length;--i>-1;)n[i]===e&&n.splice(i,1);if(n=this._autoRotate)for(i=n.length;--i>-1;)t[n[i][2]]&&n.splice(i,1);return this._super._kill.call(this,t)};var uh=i(2),ch=i(9);class dh extends a.Button{constructor(t,e,i,n,r){super(t,e,i),this._hoverVO=n,this._clickedSFX=r}onFocusBegin(){super.onFocusBegin(),this.playHoverVO()}onFocusActivated(){this.interactive&&(this.playClickedSFX(),PubSub.publishSync(fl,void 0)),super.onFocusActivated()}getOnboardingPosition(){return this.getGlobalPosition()}getOnboardingRotation(){return 0}onPointerOver(t){super.onPointerOver(t),u.TweenLite.to(this._visuals.scale,.15,{x:dh.SCALE_OVER,y:dh.SCALE_OVER,ease:Sl.easeInOut}),this.playHoverVO()}onPointerDown(t){super.onPointerDown(t),u.TweenLite.to(this._visuals.scale,.15,{x:dh.SCALE_DOWN,y:dh.SCALE_DOWN,ease:Sl.easeInOut})}onPointerUp(t){void 0!==this._eventData&&(u.TweenLite.to(this._visuals.scale,.15,{x:dh.SCALE_OVER,y:dh.SCALE_OVER,ease:Sl.easeInOut}),this.playClickedSFX()),super.onPointerUp(t)}onPointerOut(t){super.onPointerOut(t),u.TweenLite.to(this._visuals.scale,.15,{x:dh.SCALE_NORMAL,y:dh.SCALE_NORMAL,ease:Sl.easeInOut})}playHoverVO(){void 0!==this._hoverVO&&(Pu.instance.voiceover.playVO(this._hoverVO,{priority:-1,mode:a.PlayMode.Override}),PubSub.publishSync(fl,void 0))}playClickedSFX(){void 0!==this._clickedSFX&&PubSub.publishSync(a.PLAY_AUDIO,new a.AudioToken(this._clickedSFX,1,!1,a.AudioCategory.SFX))}}dh.SCALE_NORMAL=1,dh.SCALE_OVER=1.05,dh.SCALE_DOWN=.95;i(401);class ph extends PIXI.Container{constructor(){super(),this._subscriptions=[],this.marginLeft=0,this.marginRight=0,this.leftButton=this.addChild(new dh(this.onLeftButtonClicked.bind(this),"back-btn",Xa,void 0,"woosh-quick-2")),this.rightButton=this.addChild(new dh(this.onRightButtonClicked.bind(this),"next-btn",Xa,void 0,"woosh-quick-2")),this._subscriptions.push(PubSub.subscribe(hl,this.onMessageReceived.bind(this)),PubSub.subscribe(ll,this.onMessageReceived.bind(this)))}init(t,e){return this}animateIn(){u.TweenLite.from(this,.5,{pixi:{alpha:0}}).delay(.5)}onResize(t){/packageName=org\.pbskids\.gamesapp/.test(window.location.search)&&(this.marginLeft=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sal"),10),this.marginRight=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--sar"),10),isNaN(this.marginLeft)&&(this.marginLeft=0),isNaN(this.marginRight)&&(this.marginRight=0)),this.leftButton.position.x=-t.x/2+this.leftButton.width/2+8+this.marginLeft,this.rightButton.position.x=t.x/2-this.rightButton.width/2-8-this.marginRight}destroy(t){var e;this._subscriptions.forEach(PubSub.unsubscribe),u.TweenLite.killTweensOf(this),null===(e=this.hintTimeline)||void 0===e||e.kill(),super.destroy(t)}HintLeft(){var t;void 0===this.hintTimeline&&(this.hintTimeline=new l.TimelineLite),null===(t=this.hintTimeline)||void 0===t||t.kill(),this.hintTimeline.to(this.leftButton,.5,{pixi:{scale:1.2}}).to(this.leftButton,.5,{pixi:{scale:1}}).to(this.leftButton,.5,{pixi:{scale:1.2}}).to(this.leftButton,.5,{pixi:{scale:1}}).to(this.leftButton,.5,{pixi:{scale:1.2}}).to(this.leftButton,.5,{pixi:{scale:1}}).to(this.leftButton,.5,{pixi:{scale:1.2}}).to(this.leftButton,.5,{pixi:{scale:1}}).to(this.leftButton,.5,{pixi:{scale:1.2}}).to(this.leftButton,.5,{pixi:{scale:1}}).to(this.leftButton,.5,{pixi:{scale:1.2}}).to(this.leftButton,.5,{pixi:{scale:1}})}HintRight(){var t;void 0===this.hintTimeline&&(this.hintTimeline=new l.TimelineLite),null===(t=this.hintTimeline)||void 0===t||t.kill(),this.hintTimeline.to(this.rightButton,.5,{pixi:{scale:1.2}}).to(this.rightButton,.5,{pixi:{scale:1}}).to(this.rightButton,.5,{pixi:{scale:1.2}}).to(this.rightButton,.5,{pixi:{scale:1}}).to(this.rightButton,.5,{pixi:{scale:1.2}}).to(this.rightButton,.5,{pixi:{scale:1}}).to(this.rightButton,.5,{pixi:{scale:1.2}}).to(this.rightButton,.5,{pixi:{scale:1}}).to(this.rightButton,.5,{pixi:{scale:1.2}}).to(this.rightButton,.5,{pixi:{scale:1}}).to(this.rightButton,.5,{pixi:{scale:1.2}}).to(this.rightButton,.5,{pixi:{scale:1}})}HintBoth(){var t;void 0===this.hintTimeline&&(this.hintTimeline=new l.TimelineLite),null===(t=this.hintTimeline)||void 0===t||t.kill(),this.hintTimeline.to([this.leftButton,this.rightButton],.5,{pixi:{scale:1.2}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1.2}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1.2}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1.2}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1.2}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1.2}}).to([this.leftButton,this.rightButton],.5,{pixi:{scale:1}})}StopHints(){var t;null===(t=this.hintTimeline)||void 0===t||t.kill(),this.leftButton.scale.set(1),this.rightButton.scale.set(1)}onMessageReceived(t,e){t}onLeftButtonClicked(){PubSub.publishSync(cl,-1),this.StopHints()}onRightButtonClicked(){PubSub.publishSync(dl,1),this.StopHints()}}i(218);var fh=i(43),gh=i(44),mh=i(25);class _h extends PIXI.Container{constructor(){super(),this._subscriptions=[],this.isTalking=!1,this.hatPositionOffset=new PIXI.Point(58,10),this.idleAnimations=["thinking","gesture","searching"],this.bg=this.addChild(Object(uh.makeSprite)("luna-container",Xa)),this.bg.interactive=!0,this.bg.hitArea=new mh.PixelPerfectHitArea(Pu.instance.renderer,this.bg),this.spineContainer=this.addChild(new PIXI.Container),this.spine=this.spineContainer.addChild(Object(uh.makeSpine)("luna")),this.spine.scale.set(1/3),this.spine.position.x=10,this.spine.position.y=112,this.spine.state.addListener({complete:this.onAnimComplete.bind(this)}),this._subscriptions.push(PubSub.subscribe(hl,this.onMessageReceived.bind(this)),PubSub.subscribe(ll,this.onMessageReceived.bind(this)),PubSub.subscribe(pl,this.onMessageReceived.bind(this)),PubSub.subscribe(a.VOICEOVER_STARTED,this.onMessageReceived.bind(this)),PubSub.subscribe(a.VOICEOVER_ENDED,this.onMessageReceived.bind(this))),this.hat=new PIXI.Container,this.spineContainer.addChild(this.hat);const t=this.hat.addChild(Object(uh.makeSprite)("hat-front",Xa));t.scale.set(2*this.spine.scale.y),t.anchor.set(1,1),t.position.set(-8,2),t.rotation=90*PIXI.DEG_TO_RAD,this.hat.visible=!1,this.ShowForegroundHat=this.ShowForegroundHat.bind(this),this.HideForegroundHat=this.HideForegroundHat.bind(this)}init(t,e){if(this.location=e.id,this.spine.state.hasAnimation("idle"))this.playAnimation("idle",!0);else{const t=this.spine.state.setAnimation(0,"blink",!1);t.trackTime=t.animationEnd,this.spine.update(0)}return this}animateIn(){let t=PIXI.ticker.shared.lastTime,e=0,i=0;u.TweenLite.from(this,.5,{pixi:{positionY:40}}).eventCallback("onUpdate",()=>{e=t,t=PIXI.ticker.shared.lastTime,i=(t-e)/1e3,this.update(i)})}onResize(t){}update(t){if(this.spine.update(t),this.hat.visible){const t=this.spine.skeleton.findBone("hat"),e=new PIXI.Point(t.worldX*this.spine.scale.x+this.spine.position.x,t.worldY*this.spine.scale.y+this.spine.position.y);this.hat.position.copy(this.hat.parent.toLocal(this.spineContainer.toGlobal(e))),this.hat.rotation=t.getWorldRotationY()*PIXI.DEG_TO_RAD}}destroy(t){var e;this._subscriptions.forEach(PubSub.unsubscribe),u.TweenLite.killTweensOf(this),u.TweenLite.killDelayedCallsTo(this.ShowForegroundHat),u.TweenLite.killDelayedCallsTo(this.HideForegroundHat),null===(e=this.queuedBlink)||void 0===e||e.kill(),this.spine.removeAllListeners(),this.hat.destroy(),super.destroy(t)}getHatPosition(){const t=this.spine.skeleton.findBone("hat"),e=new PIXI.Point(t.worldX*this.spine.scale.x+this.spine.position.x,t.worldY*this.spine.scale.y+this.spine.position.y);return this.spineContainer.toGlobal(Object(fh.add)(e,this.hatPositionOffset))}StartTalking(){if(this.isTalking)return;this.isTalking=!0,this.spine.state.setAnimation(1,"talking",!0);let t=this.spine.state.tracks[0];if(!(null==t?void 0:t.animation.name.endsWith("-talk"))){const e=t.animation.name+"-talk";this.spine.state.hasAnimation(e)?this.spine.state.setAnimation(0,e,t.loop).trackTime=t.trackTime:(t=this.spine.state.setAnimation(0,"blink",!1),t.trackTime=t.animationEnd)}}StopTalking(){if(!this.isTalking)return;this.isTalking=!1,this.spine.state.setEmptyAnimation(1,0);const t=this.spine.state.tracks[0];if(!(null==t?void 0:t.animation.name.endsWith("-talk"))){const e=t.animation.name+"-talk";this.spine.state.hasAnimation(e)&&(this.spine.state.setAnimation(0,e,t.loop).trackTime=t.trackTime)}}ShowForegroundHat(){this.hat.visible=!0,Object(uh.setParent)(this.hat,Pu.instance.state)}HideForegroundHat(){this.hat.visible=!1,Object(uh.setParent)(this.hat,this.spineContainer)}onMessageReceived(t,e){switch(t){case hl:this.PlayItemFoundAnimation(e);break;case ll:void 0===e.itemID&&this.PlayEmptyHidingSpotSearchedAnimation(e);break;case pl:this.HideForegroundHat();break;case a.VOICEOVER_STARTED:this.StartTalking();break;case a.VOICEOVER_ENDED:this.StopTalking()}}PlayEmptyHidingSpotSearchedAnimation(t){}PlayItemFoundAnimation(t){u.TweenLite.killDelayedCallsTo(this.ShowForegroundHat),u.TweenLite.killDelayedCallsTo(this.HideForegroundHat),this.HideForegroundHat(),u.TweenLite.delayedCall(2.666,this.ShowForegroundHat),this.playAnimation("idle-hat-off",!1)}PlayIdleAnimation(){var t;this.spine.state.hasAnimation("idle")&&this.playAnimation("idle",!0),null===(t=this.queuedBlink)||void 0===t||t.kill(),this.queuedBlink=new l.TimelineLite,this.queuedBlink.call(()=>{if(!this.isTalking&&Math.random()>.75){const t=this.idleAnimations.shift();this.playAnimation(t,!1),this.idleAnimations.push(t)}else this.PlayBlinkAnimation()}).delay(Object(gh.floatBetween)(1,2))}PlayBlinkAnimation(){this.playAnimation("blink",!1)}playAnimation(t,e=!1){var i;null===(i=this.queuedBlink)||void 0===i||i.kill(),this.isTalking&&this.spine.state.hasAnimation(t+"-talk")&&(t+="-talk"),this.spine.state.setAnimation(0,t,e)}onAnimComplete(t){if(0===t.trackIndex)switch(t.animation.name){case"idle-hat-off":case"idle-hat-off-talk":this.playAnimation("idle-hat-on",!1),u.TweenLite.delayedCall(1,this.HideForegroundHat);break;case"idle-hat-on":case"idle-hat-on-talk":this.PlayIdleAnimation();break;case"thinking":case"thinking-talk":case"blink":case"searching":case"searching-talk":case"gesture":case"gesture-talk":default:this.PlayIdleAnimation()}}}class vh extends dh{constructor(){super(()=>this.onClick(),"exit-button",Xa,Wa.UI9,"ui_click")}onClick(){PubSub.publishSync(pl,this)}}class yh extends dh{constructor(t,e,i){super(()=>{this.playHoverVO()},i.id+"/"+t.icon_ext,ol.spritesheets[i.id],t.vo.returned),this._subscriptions=[],this.id=e.id,this.found=e.found,this._image.scale.set(Math.min(52/this._image.width,52/this._image.height)),this.checkmark=this.addChild(Object(uh.makeSprite)("checkmark",Xa)),this.checkmark.visible=!1,this.particleBurst=new Yl(this,[Object(uh.getTexture)("sparkle-1",Xa),Object(uh.getTexture)("sparkle-2",Xa),Object(uh.getTexture)("sparkle-3",Xa),Object(uh.getTexture)("sparkle-4",Xa)],{alpha:{start:1,end:.2},scale:{start:.2,end:.5,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:50,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.25,max:.75},blendMode:"normal",frequency:.001,emitterLifetime:.1,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}}),this.particleBurst.emit=!1,this.particleBurst.autoUpdate=!0,this.SetState(e),this._subscriptions.push(PubSub.subscribe(hl,this.onMessageReceived.bind(this)))}destroy(t){var e,i,n;null===(e=this.itemFoundTimeline)||void 0===e||e.kill(),null===(i=this.particleBurst)||void 0===i||i.cleanup(),null===(n=this.particleBurst)||void 0===n||n.destroy(),this._subscriptions.forEach(PubSub.unsubscribe),super.destroy(t)}onMessageReceived(t,e){switch(t){case hl:e.id===this.id&&this.SetState(e)}}PlayItemFoundAnimation(){var t;null===(t=this.itemFoundTimeline)||void 0===t||t.kill(),this.itemFoundTimeline=new l.TimelineLite,this.itemFoundTimeline.to(this,.5,{pixi:{scale:1.3}},.5).call(()=>{var t;null===(t=this.particleBurst)||void 0===t||t.playOnceAndDestroy()}).call(()=>{this._visuals.alpha=.3,this.checkmark.visible=!0}).to(this,.5,{pixi:{scale:1}},1).delay(3)}SetState(t){t.found?this.found?(this._visuals.alpha=.3,this.checkmark.visible=!0):this.PlayItemFoundAnimation():this._visuals.alpha=1,this.found=t.found}}class bh extends PIXI.Container{constructor(){super(),this._subscriptions=[],this.allItemsFound=!1,this.icons=[],this._subscriptions.push(PubSub.subscribe(hl,this.onMessageReceived.bind(this)),PubSub.subscribe(ul,this.onMessageReceived.bind(this)))}init(t){const e=this.addChild(Object(uh.makeSprite)("items-container-long",Xa));e.anchor.set(0,1),e.position.set(80,0),e.interactive=!0,e.hitArea=new mh.PixelPerfectHitArea(Pu.instance.renderer,e);const i=this.addChild(new PIXI.Container);let n;const r=Object.keys(t.items);let o=e.width+80-44,s=0;for(const e of r){const a=ol.locations[t.id].items[e],l=t.items[e];if(void 0===l||void 0===a)throw new Error(`Unexpected item id "${e}"`);if(n=i.addChild(new yh(a,l,t)),this.icons.push(n),n.position.x=o,o-=29.5,s<r.length-1){const t=i.addChildAt(Object(uh.makeSprite)("hud-div",Xa),0);t.x=o,t.y=-2}o-=29.5,s++}this.position.x-=52*(8-r.length),i.position.y=-(i.height-4)/2}destroy(t){u.TweenLite.killTweensOf(this),this._subscriptions.forEach(PubSub.unsubscribe),super.destroy(t)}PlayItemFoundAnimation(){}PlayAllItemsFoundAnimation(){const t=new PIXI.Graphics;t.beginFill(267386880),t.drawRect(52*(8-this.icons.length),-this.height,this.width+80,this.height),t.endFill(),t.position.copy(this.position),this.parent.addChild(t),this.mask=t,u.TweenLite.to(this,2.5,{pixi:{positionX:-this.width,ease:xl.easeOut}}).delay(5)}onMessageReceived(t,e){switch(t){case hl:this.PlayItemFoundAnimation();break;case ul:this.allItemsFound||this.PlayAllItemsFoundAnimation(),this.allItemsFound=!0}}}class xh extends dh{constructor(t,e,i,n=1e3,r=3e3,o,s){super(t,e,i,o,s),this._locked=!1,this._percentage=0,this._overlayTexture=a.PixiUtils.makeSprite("fx-timer-bg",Xa),this._overlayMask=new PIXI.Graphics,this._duration=n,this._cooldown=r,this._overlayTexture.mask=this._overlayMask,this._overlayTexture.addChild(this._overlayMask),this._visuals.addChild(this._overlayTexture)}set percentage(t){this._percentage=t,this._locked||this.drawMask(this._percentage)}destroy(t){var e;null===(e=this._maskTween)||void 0===e||e.kill(),super.destroy(t)}set locked(t){var e;this._locked!==t&&(this._locked=t,null===(e=this._maskTween)||void 0===e||e.kill(),t?this.drawMask(1):this.drawMask(0),super.interactive=!t)}onFocusActivated(){super.onFocusActivated(),this.interactive&&this.handleButtonClick()}onPointerUp(t){void 0!==this._eventData&&this._eventData.identifier===t.data.identifier&&this.handleButtonClick(),super.onPointerUp(t)}handleButtonClick(){this.interactive=!1;const t={value:1};this.percentage=1,this._maskTween=u.TweenLite.fromTo(t,this._cooldown/1e3,{value:1},{value:0}).eventCallback("onUpdate",()=>this.percentage=t.value).eventCallback("onComplete",()=>{this.interactive=!0}).delay(this._duration/1e3)}drawMask(t){if(void 0===this._overlayMask)return;this._overlayMask.clear();const e=Math.max(this._overlayTexture.width,this._overlayTexture.height)/2;t>0&&t<1?(this._overlayMask.lineStyle(e,16711680,1),this._overlayMask.arc(0,0,e/2,0,t*PIXI.PI_2,!1),this._overlayMask.rotation=-Math.PI/2):t>=1&&(this._overlayMask.beginFill(16711680,1),this._overlayMask.drawCircle(0,0,e),this._overlayMask.endFill())}}class wh extends PIXI.Container{constructor(){super(...arguments),this.TopLeft=this.addChild(new PIXI.Container),this.TopRight=this.addChild(new PIXI.Container),this.BottomLeft=this.addChild(new PIXI.Container),this.BottomRight=this.addChild(new PIXI.Container),this.TopCenter=this.addChild(new PIXI.Container),this.BottomCenter=this.addChild(new PIXI.Container),this.margin={top:0,bottom:0,left:0,right:0}}init(t,e){return this.onResize(t),this}animateIn(){}onResize(t){const e=-t.x/2+this.margin.left,i=t.x/2-this.margin.right,n=-t.y/2+this.margin.top,r=t.y/2-this.margin.bottom;this.TopLeft.position.set(e,n),this.TopRight.position.set(i,n),this.BottomLeft.position.set(e,r),this.BottomRight.position.set(i,r),this.TopCenter.position.set(0,n),this.BottomCenter.position.set(0,r)}}class Th extends wh{constructor(){super(),this.progressTracker=new bh,this.progressTracker.position.set(185,0),this.BottomLeft.addChild(this.progressTracker),this.luna=new _h,this.luna.position.set(this.luna.bg.width/2+24.5,-this.luna.bg.height/2+64),this.BottomLeft.addChild(this.luna),this.cheatButton=new dh(this.HandleCheatButtonClicked.bind(this),"button-paint-fill",Xa),this.cheatButton.scale.set(.5),this.cheatButton.position.set(-this.cheatButton.width/2,this.cheatButton.height/2),this.cheatButton.addText("(CHEAT)\nfind all","gelPenMedium22",16),this.homeButton=new vh,this.homeButton.position.set(this.homeButton.width/2+8,this.homeButton.height/2+8),this.TopLeft.addChild(this.homeButton),this.hintButton=new xh(this.HandleHintButtonClicked.bind(this),"hint-button",Xa,1500,3e4,Wa.EXTERIOR.UI13,"ui_click"),this.hintButton.position.set(this.hintButton.width/2+8,this.hintButton.height/2+8+this.homeButton.height+8),this.TopLeft.addChild(this.hintButton),this.arrowButtons=new ph,this.addChild(this.arrowButtons)}init(t,e){return super.init(t,e),this.luna.init(t,e),this.progressTracker.init(e),this.arrowButtons.init(t,e),PubSub.publishSync(ch.REGISTER_FOCUSABLES,[this.arrowButtons.leftButton,this.arrowButtons.rightButton,this.hintButton,this.homeButton]),this}animateIn(){super.animateIn(),this.luna.animateIn(),this.arrowButtons.animateIn()}onResize(t){super.onResize(t),this.luna.onResize(t),this.arrowButtons.onResize(t)}destroy(t){var e;null===(e=this.hintTimeline)||void 0===e||e.kill(),super.destroy(t)}PulseHintButton(){var t;void 0===this.hintTimeline&&(this.hintTimeline=new l.TimelineLite),null===(t=this.hintTimeline)||void 0===t||t.kill(),this.hintTimeline.to(this.hintButton,.5,{pixi:{scale:1.2}}).to(this.hintButton,.5,{pixi:{scale:1}}).to(this.hintButton,.5,{pixi:{scale:1.2}}).to(this.hintButton,.5,{pixi:{scale:1}}).to(this.hintButton,.5,{pixi:{scale:1.2}}).to(this.hintButton,.5,{pixi:{scale:1}}).to(this.hintButton,.5,{pixi:{scale:1.2}}).to(this.hintButton,.5,{pixi:{scale:1}}).to(this.hintButton,.5,{pixi:{scale:1.2}}).to(this.hintButton,.5,{pixi:{scale:1}}).to(this.hintButton,.5,{pixi:{scale:1.2}}).to(this.hintButton,.5,{pixi:{scale:1}})}HandleGoInsideButtonClicked(){uu.Instance.GoToInterior()}HandleHintButtonClicked(){PubSub.publishSync("LunaAdventure.HintButtonPressed",this.hintButton)}HandleCheatButtonClicked(){for(const t of uu.Instance.currentLevelConfig.hiddenitems)"string"==typeof t.hidingspot?uu.Instance.SearchHidingSpot(t.hidingspot):uu.Instance.SearchHidingSpot(t.hidingspot.id)}}var Sh=i(118);class Eh extends PIXI.Container{constructor(t,e){var i;super(),this._subscriptions=[],this.id="string"==typeof t.item?t.item:t.item.id,this.name=this.id,this._found=e.items[this.id].found;const n=e.id,r=ol.locations[n].items[this.id];if(this.sprite=Object(uh.makeSprite)(n+"/"+r.sprite,ol.spritesheets[n]),this.spriteContainer=this.addChild(new PIXI.Container),"string"!=typeof t.item){const e=t.item;void 0!==e.position&&this.spriteContainer.position.set(e.position.x,e.position.y),void 0!==e.rotation&&(this.spriteContainer.rotation=e.rotation*PIXI.DEG_TO_RAD),void 0!==e.scale&&this.spriteContainer.scale.set(e.scale),e.flipX&&(this.spriteContainer.scale.x*=-1)}if(this.spriteContainer.addChild(this.sprite),this.photoMode=null!==(i=r.photoMode)&&void 0!==i&&i,this.interactive=!0,this.buttonMode=!0,this.interactiveChildren=!0,this.spriteContainer.interactiveChildren=!0,this.sprite.interactive=!0,Object(Sh.isMobile)()){const t=Math.max(100/Math.abs(this.scale.y),this.spriteContainer.width,this.spriteContainer.height);this.sprite.hitArea=new PIXI.Circle(0,0,t)}else this.sprite.hitArea=new mh.PixelPerfectHitArea(Pu.instance.renderer,this.sprite,0);const o=t.hidingspot;"string"==typeof o?this.on("pointertap",()=>uu.Instance.SearchHidingSpot(o)):this.on("pointertap",()=>uu.Instance.SearchHidingSpot(o.id)),this._subscriptions.push(PubSub.subscribe(hl,this.onItemFound.bind(this))),this._found&&(this.interactive=!1,this.interactiveChildren=!1,this.hitArea=null,this.visible=!1)}get found(){return this._found}get offset(){return this.spriteContainer.position}get scale(){return this.spriteContainer.scale}get rotation(){return this.spriteContainer.rotation}destroy(t){this._subscriptions.forEach(PubSub.unsubscribe),super.destroy(t)}DoFoundAnimation(){this.visible=!1,this.photoMode}onItemFound(t,e){e.id===this.id&&(this.found||(this.interactive=!1,this.interactiveChildren=!1,this.hitArea=null,this.DoFoundAnimation(),this._found=!0))}}class Ph extends dh{constructor(t,e,i,n){super(t,"empty-pixel",Xa),this.backgroundContainer=this.addChild(new PIXI.Container),this.foregroundContainer=this.addChild(new PIXI.Container),this.foregroundSprites=[],this.backgroundSprites=[],this._subscriptions=[],this._image.visible=!1,this.id=i.id,this.name=this.id,this._itemID=i.itemID,this._hasItem=!!i.itemID,this._searched=i.searched,this.SetPosition(e,i),this.SetSprites(n,e),this.SetHiddenItem(i,n),this.SetHitArea(e,i,n),e.hitarea.width&&e.hitarea.height&&(this._focusSize=new PIXI.Point(e.hitarea.width,e.hitarea.height)),this.setChildIndex(this.backgroundContainer,0),this.setChildIndex(this.foregroundContainer,this.children.length-1),this.redx=this.addChild(Object(uh.makeSprite)("redx",Xa)),this.redx.visible=!1,this._subscriptions.push(PubSub.subscribe(ll,this.onMessageReceived.bind(this)),PubSub.subscribe(hl,this.onMessageReceived.bind(this)))}get searched(){return this._searched}get hasItem(){return this._hasItem}get item(){return this._item}isFocusable(){const t=this.getFocusPosition(),e=Pu.instance.resizer.getSize().x*Pu.instance.resizer.getStageScale();return t.x>0&&t.x<e}getFocusSize(){return void 0!==this._focusSize?this._focusSize:new PIXI.Point(150,150)}getFocusPosition(){return void 0===this.item||void 0!==this._focusSize?this.getGlobalPosition():this.toGlobal(this.item.offset)}onFocusBegin(){this.interactive=!0,super.onFocusBegin()}onFocusEnd(){this.interactive=!1}onFocusActivated(){super.onFocusActivated()}destroy(t){this._subscriptions.forEach(PubSub.unsubscribe),u.TweenLite.killTweensOf(this),void 0!==this.foregroundSprites&&(this.foregroundSprites.hitArea=null),void 0!==this.backgroundSprites&&(this.backgroundSprites.hitArea=null),super.destroy(t)}DoSearchAnimation(){var t;this.item&&this.item.photoMode&&this.item.found;null===(t=this.searchAnimation)||void 0===t||t.kill(),this.searchAnimation=new l.TimelineLite,(void 0===this.item||this.item.found)&&(this.item&&this.redx.position.copy(this.item.offset),this.redx.visible=!0,this.searchAnimation.fromTo(this.redx,.3,{pixi:{scale:1,alpha:1}},{pixi:{scale:0,alpha:0}}).delay(.5).eventCallback("onComplete",()=>{this.redx.visible=!1}))}onMessageReceived(t,e){switch(t){case hl:this.OnItemFound(e);break;case ll:this.OnHidingSpotSearched(e)}}OnItemFound(t){void 0!==this.item&&t.id===this.item.id&&(this.interactive=!0,this.hitArea=this._hitArea)}SetHiddenItem(t,e){if(void 0!==t.itemID){const i=uu.Instance.currentLevelConfig.hiddenitems,n=e.items,r=i.find(e=>"string"==typeof e.item?e.item===t.itemID:e.item.id===t.itemID),o=n[t.itemID];void 0!==r&&void 0!==o&&(this._item=new Eh(r,e),this.addChild(this._item))}}SetPosition(t,e){const{x:i,y:n}=t.hitarea;this.position.set(i,n)}SetHitArea(t,e,i){this.buttonMode=!1,this.interactiveChildren=!0,this._hitArea=null;this.foregroundContainer.interactiveChildren=!1,this.backgroundContainer.interactiveChildren=!1;for(const t of this.foregroundSprites)t.interactive=!1,t.hitArea=new mh.PixelPerfectHitArea(Pu.instance.renderer,t,229.5);for(const t of this.backgroundSprites)t.interactive=!1,t.hitArea=new mh.PixelPerfectHitArea(Pu.instance.renderer,t,229.5);if(void 0===this.item||void 0===e.itemID)this.hitArea=this._hitArea;else{const t=i.items[e.itemID];if(void 0===t)throw new Error(`Unexpected item id "${e.itemID}"`);t.found?this.hitArea=this._hitArea:(this.hitArea=this._hitArea,this.interactive=!1)}}OnHidingSpotSearched(t){t.id===this.id&&(this.DoSearchAnimation(),this._searched=t.searched)}SetSprites(t,e){let i=0,n=0,r=0,o=0;if(void 0!==e.foreground){Array.isArray(e.foreground)||(e.foreground=[e.foreground]);for(const s of e.foreground){const e=Object(uh.makeSprite)(t.id+"/"+s.sprite,ol.spritesheets[t.id]);s.halfSize&&e.scale.set(2),e.position.set(s.x-this.position.x+e.width/2,s.y-this.position.y+e.height/2),this.foregroundContainer.addChild(e),this.foregroundSprites.push(e),i=Math.max(i,e.width),n=Math.max(n,e.height),r=Math.min(r,s.x-this.position.x),o=Math.min(o,s.y-this.position.y)}}if(void 0!==e.background){Array.isArray(e.background)||(e.background=[e.background]);for(const s of e.background){const e=Object(uh.makeSprite)(t.id+"/"+s.sprite,ol.spritesheets[t.id]);s.halfSize&&e.scale.set(2),e.position.set(s.x-this.position.x+e.width/2,s.y-this.position.y+e.height/2),this.backgroundContainer.addChild(e),this.backgroundSprites.push(e),i=Math.max(i,e.width),n=Math.max(n,e.height),r=Math.min(r,s.x-this.position.x),o=Math.min(o,s.y-this.position.y)}}for(const t of this.backgroundSprites)t.position.x-=i/2+r,t.position.y-=n+o;for(const t of this.foregroundSprites)t.position.x-=i/2+r,t.position.y-=n+o;this.backgroundContainer.position.set(i/2+r,n+o),this.foregroundContainer.position.set(i/2+r,n+o)}}var Ah=i(228);function Ih(t,e,i,n){if(void 0!==i){const r=t+"/"+i;if(e.find(t=>t.assetName===r&&t.assetType===n))return;n===a.AssetType.JPG?e.push(new a.TextureAsset(r,"images/static/"+r+".jpg")):e.push(new a.AssetMapData(r,n))}}function Oh(t,e,i,n){void 0!==i&&(Array.isArray(i)?i.forEach(i=>Ih(t,e,i.filename,n)):Ih(t,e,i.filename,n))}function Ch(t,e,i){t.find(t=>t.assetName===e&&t.assetType===a.AssetType.AUDIO)||t.push(new a.AudioAsset(e,i))}function Mh(t,e){void 0!==e&&(Array.isArray(e)?e.forEach(e=>{"string"==typeof e&&Ch(t,e,a.AudioCategory.VO)}):Ch(t,e,a.AudioCategory.VO))}function Rh(t,e,i){void 0!==i&&(Array.isArray(i)?i.forEach(t=>{Ch(e,t,a.AudioCategory.SFX)}):Ch(e,i,a.AudioCategory.SFX))}const kh=Xa;class Lh extends a.State{constructor(){super(...arguments),this.bg=new PIXI.Container,this.viewportWrapper=this.addChild(new PIXI.Container),this.hud=this.addChild(new Th),this._subscriptions=[],this.margin={left:0,right:0},this.worldWidth=0,this.items={},this.hidingSpots={},this._lastIdleVO="",this._clickCount=0,this._lastIdleDirectionVO="",this._lastIdleFactVO=""}static GetIdForState(t,e,i){return`State_GameExterior_${t}_${e}_${i}`}static GetAssetsForState(t,e,i){const n=ol.locations[t],r=n.narratives[e],o=r.variations[i],s=n.exterior.bg,l=o.hiddenitems.map(t=>"string"==typeof t.item?t.item:t.item.id),h=Object.assign(Object.assign(Object.assign({},r.vo),o.vo),n.vo),u=[];return Mh(u,h.all_items_found),Mh(u,h.exterior),Oh(t,u,s,a.AssetType.JPG),u.push(new a.AudioAsset(n.bgm,a.AudioCategory.BGM)),u.push(...a.AssetFactory(ol.spritesheet_factory[t],e=>new a.TextureAtlasAsset(`${t}-${e}`))),l.forEach((t,e)=>{var i,r,o;const s=n.items[t];Mh(u,null===(i=s.vo)||void 0===i?void 0:i.fact),Mh(u,null===(r=s.vo)||void 0===r?void 0:r.found),Mh(u,null===(o=s.vo)||void 0===o?void 0:o.returned),s.photoMode&&Rh(0,u,"camera")}),u}init(t,e){super.init(t,e),PubSub.publishSync(a.PUSH_KEYBOARD_LAYER,void 0);ol.locations[this.id];this.id=e.id,this.initViewport(t,e),this.initBackground(e),this.initHidingSpots(e),this.initVoiceover(e),this.initMusic(e),this.initParticles(),this.hud.init(t,e),this._subscriptions.push(PubSub.subscribe(ll,this.onMessageReceived.bind(this)),PubSub.subscribe(cl,this.onMessageReceived.bind(this)),PubSub.subscribe(dl,this.onMessageReceived.bind(this)),PubSub.subscribe(hl,this.onMessageReceived.bind(this)),PubSub.subscribe(ul,this.onMessageReceived.bind(this)),PubSub.subscribe("LunaAdventure.ToggleHitAreaRenderer",this.onMessageReceived.bind(this)),PubSub.subscribe(pl,this.onMessageReceived.bind(this)),PubSub.subscribe("LunaAdventure.LockInput",this.onMessageReceived.bind(this)),PubSub.subscribe("LunaAdventure.UnlockInput",this.onMessageReceived.bind(this)),PubSub.subscribe("LunaAdventure.HintButtonPressed",this.onMessageReceived.bind(this)),PubSub.subscribe(fl,this.onMessageReceived.bind(this)),PubSub.subscribe(a.GAME_PAUSED,this.onMessageReceived.bind(this)),PubSub.subscribe(a.GAME_UNPAUSED,this.onMessageReceived.bind(this)))}onResize(t){var e,i,n;super.onResize(t),null===(e=this.hud)||void 0===e||e.onResize(t),this.viewportWrapper.position.set(-t.x/2,-t.y/2),null===(i=this.viewport)||void 0===i||i.resize(t.x,t.y),null===(n=this.viewport)||void 0===n||n.clamp({left:0-this.margin.left,right:this.worldWidth-this.margin.left,top:0,bottom:t.y}),this.updateScrollButtonsVisibility()}destroy(t){var e,i,n,r,o,s,a,l;u.TweenLite.killTweensOf(this),this._subscriptions.forEach(PubSub.unsubscribe),null===(e=this.idleTimeline)||void 0===e||e.kill(),null===(i=this.itemFoundTimeline)||void 0===i||i.kill(),null===(n=this.hintTimeline)||void 0===n||n.kill(),null===(r=this.viewport)||void 0===r||r.removeAllListeners(),null===(o=this.clickParticles)||void 0===o||o.cleanup(),null===(s=this.clickParticles)||void 0===s||s.destroy(),null===(a=this.hintParticles)||void 0===a||a.cleanup(),null===(l=this.hintParticles)||void 0===l||l.destroy(),super.destroy(t)}animateIn(t){var e,i,n,r,o;super.animateIn(t),null===(e=this.hud)||void 0===e||e.animateIn(),this.updateScrollButtonsVisibility(),null===(i=this.bgm)||void 0===i||i.setLooped(!0),null===(n=this.bgm)||void 0===n||n.setVolume(.125),(null===(r=this.bgm)||void 0===r?void 0:r.isPlaying())||null===(o=this.bgm)||void 0===o||o.play();const s=t=>{uu.Instance.onboarding.complete||(this.hud.arrowButtons.HintBoth(),Pu.instance.voiceover.playVO([Ya.O4,.75],a.PlayMode.Append,t=>{this.hud.PulseHintButton(),this.hud.arrowButtons.StopHints(),Pu.instance.voiceover.playVO([Ya.O3,.75],a.PlayMode.Append)})),this.idleTimeline=new Il,this.idleTimeline.delay(0),this.idleTimeline.call(this.playIdleVO.bind(this),void 0,void 0,10),this.idleTimeline.repeat(-1)};(new l.TimelineLite).call(()=>{var t;void 0===(null===(t=this.vo)||void 0===t?void 0:t.exterior)||Pu.instance.skipVO?s():Pu.instance.voiceover.playVO(this.vo.exterior,a.PlayMode.Override,s)}).delay(1)}update(t){var e,i;super.update(t),null===(i=null===(e=this.hud)||void 0===e?void 0:e.luna)||void 0===i||i.update(t)}animateOut(t){super.animateOut(t),PubSub.publishSync(a.POP_KEYBOARD_LAYER,void 0)}doCameraFlash(){Pu.instance.audio.play("camera",.5,!1,a.AudioCategory.SFX);const t=new PIXI.Sprite(PIXI.Texture.WHITE);t.width=this._size.x,t.height=this._size.y,t.anchor.set(.5),t.position.set(0,0),t.alpha=0,this.addChild(t),(new l.TimelineLite).to(t,.1,{pixi:{alpha:1}}).to(t,1.5,{pixi:{alpha:0},ease:Tl.easeOut})}IsOffScreen(t){var e,i,n,r;const o=null!==(i=null===(e=t.item)||void 0===e?void 0:e.offset.x)&&void 0!==i?i:0,s=null!==(r=null===(n=t.item)||void 0===n?void 0:n.offset.y)&&void 0!==r?r:0,a=this.hud.progressTracker.height,l=this.hud.progressTracker.width+this.hud.progressTracker.position.x+80;let h=this.viewport.corner.x;const u=this.viewport.corner.x+this.viewport.worldScreenWidth+this.margin.right,c=(u+h)/2,d=t.x+o,p=t.y+s+150,f=d-150,g=d+150;p>this.viewport.worldScreenHeight-a?h+=l:p>this.viewport.worldScreenHeight-150&&(h+=300);const m=!(f>h),_=!(g<u);let v=d-c;return m?v=f-h:_&&(v=g-u-this.margin.right),{left:m,right:_,distance:v}}playIdleVO(){var t,e;this._clickCount=0,null===(t=this.idleTimeline)||void 0===t||t.kill();const i=[za.A12,za.A13,za.A14,za.A15],n=[...(null===(e=this.vo)||void 0===e?void 0:e.exterior_idle)||[]];let r;n.indexOf(this._lastIdleVO)>-1?(i.indexOf(this._lastIdleDirectionVO)>-1&&i.splice(i.indexOf(this._lastIdleDirectionVO),1),r=a.ArrayUtils.random(i),this._lastIdleDirectionVO=r):(n.indexOf(this._lastIdleFactVO)>-1&&n.splice(n.indexOf(this._lastIdleFactVO),1),r=a.ArrayUtils.random(n),this._lastIdleFactVO=r),void 0!==r&&Pu.instance.voiceover.playVO(r,a.PlayMode.New,t=>{t&&(this._lastIdleVO=r),this.RestartIdleTimer()})}RestartIdleTimer(){var t;null===(t=this.idleTimeline)||void 0===t||t.restart(!0,!0)}doParticleEffect(t){var e,i,n,r;null===(e=this.clickParticles)||void 0===e||e.cleanup(),null===(i=this.clickParticles)||void 0===i||i.updateSpawnPos(t.x,t.y),null===(n=this.clickParticles)||void 0===n||n.resetPositionTracking(),null===(r=this.clickParticles)||void 0===r||r.playOnce()}OnAllItemsFound(t){var e;this.hud.homeButton.visible=!1,this.hud.hintButton.visible=!1;const i=t=>{void 0===this.itemFoundTimeline&&(this.itemFoundTimeline=new Il),this.itemFoundTimeline.call(()=>{uu.Instance.GoToInterior()},void 0,void 0,"+=0.1")};void 0!==(null===(e=this.vo)||void 0===e?void 0:e.all_items_found)?Pu.instance.voiceover.playVO(this.vo.all_items_found,a.PlayMode.Append,i):i()}onMessageReceived(t,e){switch(t){case ul:this.OnAllItemsFound(e);break;case hl:this.OnItemFound(e);break;case ll:this.OnHidingSpotSearched(e);break;case cl:this.ScrollLeft();break;case dl:this.ScrollRight();break;case"LunaAdventure.ToggleHitAreaRenderer":this.ToggleHitAreaRenderer();break;case pl:this.OnHomeButtonPressed();break;case"LunaAdventure.LockInput":this.LockInput();break;case"LunaAdventure.UnlockInput":this.UnlockInput();break;case"LunaAdventure.HintButtonPressed":this.OnHintButtonPressed();break;case fl:this.RestartIdleTimer();break;case a.GAME_PAUSED:this.OnGamePaused();break;case a.GAME_UNPAUSED:this.OnGameUnpaused()}}OnGamePaused(){var t;null===(t=this.idleTimeline)||void 0===t||t.kill()}OnGameUnpaused(){this.RestartIdleTimer()}OnHomeButtonPressed(){Pu.instance.voiceover.stopVO(),uu.Instance.GoToLevelSelect()}onViewportEvent(t,e){this.updateScrollButtonsVisibility()}onClick(t){this.doParticleEffect(t),this._clickCount++,this._clickCount>=5&&this.playIdleVO(),Pu.instance.audio.play("blink",1,!1,a.AudioCategory.SFX)}ScrollLeft(){if(void 0===this.viewport)throw new Error("viewport is undefined");this._scroll(this.viewport.worldScreenWidth/2*-1)}ScrollRight(){if(void 0===this.viewport)throw new Error("viewport is undefined");this._scroll(this.viewport.worldScreenWidth/2)}OnHidingSpotSearched(t){var e,i;void 0===t.itemID?Pu.instance.audio.play("blink",1,!1,a.AudioCategory.SFX):!0===(null===(i=null===(e=this.hidingSpots[t.id])||void 0===e?void 0:e.item)||void 0===i?void 0:i.found)&&Pu.instance.audio.play("blink",1,!1,a.AudioCategory.SFX)}OnItemFound(t){const e=ol.locations[this.id].items[t.id],i=this.items[t.id],n=Object.values(this.items).every(t=>void 0!==t&&t.found);this.hideHint(),this.RestartIdleTimer(),this._clickCount=-1,Pu.instance.audio.play("found",1,!1,a.AudioCategory.SFX);const r=[];if(r.push(e.vo.found),r.push(.75),r.push(a.ArrayUtils.random([za.A1,za.A2,za.A3,za.A4,za.A5,za.A6,za.A7,za.A8,za.A9])),!e.vo.fact||n||Pu.instance.skipVO||(r.push(.75),r.push(e.vo.fact)),Pu.instance.voiceover.playVO(r,a.PlayMode.Override),void 0===i)throw new Error(`Can't find HiddenItem with id ${t.id}`);const o=this.addChild(Object(uh.makeSprite)(this.id+"/"+e.sprite_hat,ol.spritesheets[this.id]));i.photoMode?(this.doCameraFlash(),this.tweenItemFromCenterToHat(o)):this.tweenItemFromHidingSpotToHat(o,i)}initHidingSpots(t){const e=ol.locations[t.id];e.narratives[t.narrative].variations[t.narrativeVariation];for(const i of Object.values(t.hidingSpots))if(void 0!==i){const n=new Ph(()=>this.OnHidingSpotClicked(i.id),e.hidingspots[i.id],i,t);this.viewportContentWrapper.addChild(n),PubSub.publishSync(a.REGISTER_FOCUSABLE,n),void 0!==i.itemID&&(this.items[i.itemID]=n.item),this.hidingSpots[i.id]=n}}LockInput(){this.viewport.interactiveChildren=!1,PubSub.publishSync(a.UNREGISTER_FOCUSABLES,Object.values(this.hidingSpots)),PubSub.publishSync(a.CLEAR_FOCUS,void 0)}UnlockInput(){this.viewport.interactiveChildren=!0,this.updateScrollButtonsVisibility(),PubSub.publishSync(a.REGISTER_FOCUSABLES,Object.values(this.hidingSpots))}OnHintButtonPressed(){var t;this.maybeShowHint(),this.RestartIdleTimer(),this._clickCount=0,null===(t=Pu.instance.analytics)||void 0===t||t.event("clickHelp","lunas-adventures")}OnHidingSpotClicked(t){uu.Instance.SearchHidingSpot(t),this._clickCount++}_scroll(t){if(void 0===this.viewport)throw new Error("viewport is undefined");if(0===t)return;const e=this.viewport.corner.x,i=this.viewport.worldWidth-this.viewport.worldScreenWidth;let n=Math.min(Math.max(e+t,0),i),r=500;if(e===n){const e=Math.sign(t);1===e?(n=i+this.margin.right,r=200):-1===e&&(n=0-this.margin.left,r=200)}this.viewport.snap(n,0,{topLeft:!0,ease:"easeInOutSine",time:r,forceStart:!0,removeOnComplete:!0,interrupt:!1,removeOnInterrupt:!1})}initViewport(t,e){const i=ol.locations[e.id];this.worldWidth=i.exterior.width,this.margin=i.exterior.margin,this.viewport=this.viewportWrapper.addChild(new Ah.a({worldWidth:this.worldWidth-this.margin.right-this.margin.left,worldHeight:t.y,screenWidth:t.x,screenHeight:t.y,ticker:Pu.instance.ticker}).drag({direction:"x",wheel:!1}).decelerate().bounce({time:150}).clamp({left:0-this.margin.left,right:this.worldWidth-this.margin.left,top:0,bottom:t.y})),this.viewport.moveCenter(this.worldWidth/2,0),this.viewport.on("bounce-x-end",t=>this.onViewportEvent("bounce-x-end",t)),this.viewport.on("bounce-x-start",t=>this.onViewportEvent("bounce-x-start",t)),this.viewport.on("snap-start",t=>this.onViewportEvent("snap-start",t)),this.viewport.on("snap-end",t=>this.onViewportEvent("snap-end",t)),this.viewport.on("moved-end",t=>this.onViewportEvent("moved-end",t)),this.viewport.on("drag-start",t=>this.onViewportEvent("drag-start",t.viewport)),this.viewport.on("drag-end",t=>this.onViewportEvent("drag-end",t.viewport)),this.viewport.on("clicked",t=>this.onClick(t.event.data.getLocalPosition(this)))}initParticles(){const t=this.addChild(new PIXI.particles.ParticleContainer);this.clickParticles=new Yl(t,[Object(uh.getTexture)("sparkle-1",kh),Object(uh.getTexture)("sparkle-2",kh),Object(uh.getTexture)("sparkle-3",kh),Object(uh.getTexture)("sparkle-4",kh)],{alpha:{start:1,end:0},scale:{start:.4,end:0,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:50,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.25,max:.75},blendMode:"normal",frequency:.01,emitterLifetime:.1,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}}),this.clickParticles.emit=!1,this.clickParticles.autoUpdate=!0,this.hintParticles=new Yl(t,[Object(uh.getTexture)("sparkle-1",kh),Object(uh.getTexture)("sparkle-2",kh),Object(uh.getTexture)("sparkle-3",kh),Object(uh.getTexture)("sparkle-4",kh)],{alpha:{start:.5,end:.1},scale:{start:.8,end:.1,minimumScaleMultiplier:1},color:{start:"#ffff00",end:"#ffff00"},speed:{start:-10,end:-10,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:-90,max:90},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:1},blendMode:"normal",frequency:.001,emitterLifetime:-1,maxParticles:1500,pos:{x:0,y:0},addAtBack:!1,spawnType:"ring",spawnCircle:{x:0,y:0,r:500,minR:500}}),this.hintParticles.emit=!1,this.hintParticles.autoUpdate=!0}initVoiceover(t){const e=ol.locations[t.id],i=e.narratives[t.narrative],n=i.variations[t.narrativeVariation];this.vo=Object.assign(Object.assign(Object.assign({},e.vo),i.vo),n.vo)}initBackground(t){const e=ol.locations[t.id];this.viewportContentWrapper=this.viewport.addChild(new PIXI.Container),this.viewportContentWrapper.position.x=-this.margin.left,this.addBG(e.exterior.bg,this.viewportContentWrapper,t)}initMusic(t){const e=ol.locations[t.id];this.bgm=Pu.instance.audio.getAudioTrack(e.bgm,a.AudioCategory.BGM)}tweenItemFromCenterToHat(t){const e=t.height/t.width;let i,n;e>1?(n=40,i=n/e):(i=40,n=i*e),t.scale.set(2,2),void 0===this.itemFoundTimeline?(this.itemFoundTimeline=new Il,this.itemFoundTimeline.autoRemoveChildren=!0):this.itemFoundTimeline.isActive()&&(this.itemFoundTimeline.seek("+=0",!0),this.itemFoundTimeline.clear(),this.itemFoundTimeline.restart());const r=this.itemFoundTimeline;r.to(t,.6,{pixi:{rotation:0,scaleX:1,scaleY:1}},r.time()),r.call(()=>{const e=this.toLocal(this.hud.luna.getHatPosition());(new Il).to(t.position,1,{bezier:{type:"thru",values:[{x:e.x/2,y:-100},{x:e.x,y:e.y-20}],curviness:2},ease:Sl.easeOut}).call(()=>{Pu.instance.audio.play("into-hat-2",1,!1,a.AudioCategory.SFX)}).to(t,.5,{pixi:{positionY:e.y}})},void 0,void 0,r.time()+2),r.to(t,1,{pixi:{width:i,height:n},ease:"power4.out"},r.time()+2),r.to(t,.1,{pixi:{alpha:0}},r.time()+3.25),r.call(()=>{t.destroy()})}tweenItemFromHidingSpotToHat(t,e){const i=t.height/t.width;let n,r;i>1?(r=40,n=r/i):(n=40,r=n*i);const o=t.toLocal(e.toGlobal(e.offset)),s=o.y+t.height/2,l=o.y-t.height/2,h=o.x-t.width/2,u=o.x+t.width/2;s>this._size.y/2&&(console.warn("bottom edge of item is cut off"),o.y=this._size.y/2-t.height/2),l<-this._size.y/2&&(console.warn("top edge of item is cut off"),o.y=-this._size.y/2+t.height/2),h<-this._size.x/2&&(console.warn("left edge of item is cut off"),o.x=-this._size.x/2+t.width/2),u>this._size.x/2&&(console.warn("right edge of item is cut off"),o.x=this._size.x/2-t.width/2),t.position.copy(o),t.scale.set(e.scale.x,e.scale.y),t.rotation=e.sprite.rotation,void 0===this.itemFoundTimeline?(this.itemFoundTimeline=new Il,this.itemFoundTimeline.autoRemoveChildren=!0):this.itemFoundTimeline.isActive()&&(this.itemFoundTimeline.seek("+=0",!0),this.itemFoundTimeline.clear(),this.itemFoundTimeline.restart());const c=this.itemFoundTimeline,d=Math.sign(e.scale.x);c.to(t,5/30,{pixi:{scaleX:1.1*d,scaleY:.8,rotation:0}}).to(t,1,{pixi:{scaleX:1*d,scaleY:1},ease:wl.easeOut}),c.call(()=>{const e=this.toLocal(this.hud.luna.getHatPosition());(new Il).to(t.position,1,{bezier:{type:"thru",values:[{x:(o.x+e.x)/2,y:Math.min(o.y,-100)},{x:e.x,y:e.y-20}],curviness:2},ease:Sl.easeOut}).call(()=>{Pu.instance.audio.play("into-hat-2",1,!1,a.AudioCategory.SFX)}).to(t,.5,{pixi:{positionY:e.y}})},void 0,void 0,c.time()+2),c.to(t,1,{pixi:{width:n,height:r},ease:"power4.out"},c.time()+2),c.to(t,.1,{pixi:{alpha:0}},c.time()+3.25),c.call(()=>{t.destroy()})}ToggleHitAreaRenderer(){Pu.instance.hitAreaRenderer.active=!Pu.instance.hitAreaRenderer.active}addBG(t,e,i){if(Array.isArray(t))for(const e of t){const t=Object(uh.makeSprite)(i.id+"/"+e.filename);t.anchor.set(0,0),t.position.set(e.x,e.y),this.bg.addChild(t)}else{const e=Object(uh.makeSprite)(i.id+"/"+t.filename);this.bg.addChild(e)}e.addChild(this.bg)}updateScrollButtonsVisibility(){if(void 0===this.viewport)return;const t=this.viewport.corner.x,e=t>0,i=t<this.viewport.worldWidth-this.viewport.worldScreenWidth;if(void 0!==this.hud){const{leftButton:t,rightButton:n}=this.hud.arrowButtons;t.visible=e,t.interactive=e,n.visible=i,n.interactive=i,e?PubSub.publishSync(a.REGISTER_FOCUSABLE,t):PubSub.publishSync(a.UNREGISTER_FOCUSABLE,t),i?PubSub.publishSync(a.REGISTER_FOCUSABLE,n):PubSub.publishSync(a.UNREGISTER_FOCUSABLE,n)}}maybeShowHint(){let t,e={left:!1,right:!1,distance:0};const i=Object.values(this.hidingSpots).find((i,n,r)=>{var o;if(!i)return!1;const s=!1===(null===(o=null==i?void 0:i.item)||void 0===o?void 0:o.found);return s&&(e=this.IsOffScreen(i),t=i),s&&!e.left&&!e.right});i?this.showHint(i,e):t&&this.showHint(t,e)}showHint(t,e){var i,n,r;null===(i=this.hintTimeline)||void 0===i||i.kill(),this.hintTimeline=new l.TimelineLite,e.left&&(null===(n=this.hud)||void 0===n?void 0:n.arrowButtons.leftButton.visible)?this._scroll(e.distance):e.right&&(null===(r=this.hud)||void 0===r?void 0:r.arrowButtons.rightButton.visible)&&this._scroll(e.distance),this.hintTimeline.call(()=>{var e;null===(e=this.hintParticles)||void 0===e||e.updateSpawnPos(t.position.x+t.item.offset.x,t.position.y+t.item.offset.y),this.hintParticles.parent=this.viewportContentWrapper,this.hintParticles.emit=!0}).fromTo(this.hintParticles.spawnCircle,1.5,{radius:500,minRadius:500},{radius:100,minRadius:100})}hideHint(){var t,e;null===(t=this.hud)||void 0===t||t.arrowButtons.StopHints(),this.hintParticles.emit=!1,null===(e=this.hintTimeline)||void 0===e||e.kill()}}Lh.Assets=[new a.AssetMapData("gelPenMedium22",a.AssetType.FONT),...kh.map(t=>new a.AssetMapData(t,a.AssetType.TEXTURE_ATLAS)),new a.SpineAsset("luna",a.AssetType.SPINE_JSON,"luna"),new a.AudioAsset("blink",a.AudioCategory.SFX),new a.AudioAsset("woosh-quick-2",a.AudioCategory.SFX),new a.AudioAsset("found",a.AudioCategory.SFX),new a.AudioAsset("into-hat-2",a.AudioCategory.SFX),new a.AudioAsset(za.A1,a.AudioCategory.VO),new a.AudioAsset(za.A2,a.AudioCategory.VO),new a.AudioAsset(za.A3,a.AudioCategory.VO),new a.AudioAsset(za.A4,a.AudioCategory.VO),new a.AudioAsset(za.A5,a.AudioCategory.VO),new a.AudioAsset(za.A6,a.AudioCategory.VO),new a.AudioAsset(za.A7,a.AudioCategory.VO),new a.AudioAsset(za.A8,a.AudioCategory.VO),new a.AudioAsset(za.A9,a.AudioCategory.VO),new a.AudioAsset(za.A12,a.AudioCategory.VO),new a.AudioAsset(za.A13,a.AudioCategory.VO),new a.AudioAsset(za.A14,a.AudioCategory.VO),new a.AudioAsset(za.A15,a.AudioCategory.VO)];class Dh extends dh{constructor(t,e){super(()=>{this.playHoverVO()},e+"/"+t.icon_int_give,ol.spritesheets[e],t.vo.returned),this.id=t.id}destroy(t){super.destroy(t)}}var Nh=i(78),Fh=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i};class Bh extends PIXI.Container{constructor(){super(),this.icons=[],this.bg=this.addChild(new PIXI.Container),this._subscriptions=[],this._animateInMode="scaleItemsUp",this._subscriptions.push()}init(t,e){var i;this._state=e;const n=ol.locations[e.id],{items:r}=n,o=Fh(n,["items"]),{items:s}=e,a=Fh(e,["items"]),l=o.narratives[a.narrative].variations[a.narrativeVariation],h=Object.keys(s).map(t=>Object.assign(Object.assign({id:t},s[t]),r[t])),u=Object.assign(Object.assign({},o.interior.itemslist.give),null===(i=l.itemslist)||void 0===i?void 0:i.give),c=u.bg;return this._animateInMode=u.animateIn,this.addBG(c,e.id),this.spawnItems(h,e,u),"scaleItemsUp"===this._animateInMode?this.icons.forEach(t=>t.visible=!1):"slideInFromRight"===this._animateInMode&&(this.bg.visible=!1),this}animateIn(t){this.icons.forEach(t=>t.visible=!0),this.bg.visible=!0,"scaleItemsUp"===this._animateInMode?(this.animateInTimeline=new l.TimelineLite,this.animateInTimeline.staggerFrom(this.icons,.5,{pixi:{scale:0}},.25).call(()=>{var e;return null===(e=null==t?void 0:t.onFirstItemShown)||void 0===e?void 0:e.call(t)},void 0,this,.5).call(()=>PubSub.publishSync(a.REGISTER_FOCUSABLES,this.icons))):"slideInFromRight"===this._animateInMode&&(this.animateInTimeline=new l.TimelineLite,this.animateInTimeline.call(()=>{Pu.instance.audio.play("item-give",1,!1,Nh.AudioCategory.SFX)}).from(this.bg,2.5,{pixi:{positionX:1024}}).call(()=>{var e;null===(e=null==t?void 0:t.onFirstItemShown)||void 0===e||e.call(t)}).call(()=>PubSub.publishSync(a.REGISTER_FOCUSABLES,this.icons)).delay(1))}onResize(t){}destroy(t){var e;this._subscriptions.forEach(PubSub.unsubscribe),null===(e=this.animateInTimeline)||void 0===e||e.kill(),super.destroy(t)}onMessageReceived(t,e){t}spawnItems(t,e,i){const n=i.columns,r=0-i.width/2+i.ICON_SIZE/2-i.ICON_SPACING/2;let o=0,s=i.floatingItemsY,a=this.bg.addChild(new PIXI.Container);for(let l=0;l<t.length;l++){if(void 0!==i.before_icon){const t=a.addChild(Object(uh.makeSprite)(this._state.id+"/"+i.before_icon,ol.spritesheets[this._state.id]));t.anchor.set(1,.5),t.position.set(o,s),o+=1.5*t.width}a.addChild(this.spawnIcon(t[l],e.id,i)).position.set(o,s),o+=i.ICON_SIZE,o+=i.ICON_SPACING,a.x=r+(i.width-a.width)/2,(l+1)%n==0&&(s+=i.ICON_SIZE+i.ICON_SPACING,void 0!==i.before_icon&&(s+=i.ICON_SPACING),o=0,a=this.bg.addChild(new PIXI.Container))}}spawnIcon(t,e,i){const n=new Dh(t,e),r=i.ICON_SIZE/n.width,o=i.ICON_SIZE/n.height;return n.scale.set(Math.min(r,o)),this.icons.push(this.addChild(n)),n}addBG(t,e){if(Array.isArray(t))for(const i of t){const t=Object(uh.makeSprite)(e+"/"+i.filename,ol.spritesheets[e]);t.position.x=i.x,t.position.y=i.y,this.bg.addChild(t),i.dontAnimateIn&&Object(uh.setParent)(t,this)}else this.bg.addChild(Object(uh.makeSprite)(e+"/"+t.filename,ol.spritesheets[e]))}}class Uh extends PIXI.Container{constructor(){super(),this.spineContainer=this.addChild(new PIXI.Container),this._subscriptions=[],this.isTalking=!1,this.hatPositionOffset=new PIXI.Point(75,20);this.spineContainer.scale.set(.635),this.bg=this.spineContainer.addChild(Object(uh.makeSprite)("container",Xa)),this.bg.anchor.set(.5,1),this.bg.scale.set(1/.635),this.spine=this.spineContainer.addChild(Object(uh.makeSpine)("luna")),this.spine.position.x=28,this.spine.position.y=45,this.spine.state.addListener({complete:this.onAnimComplete.bind(this)}),this._subscriptions.push(PubSub.subscribe(a.VOICEOVER_STARTED,this.StartTalking.bind(this)),PubSub.subscribe(a.VOICEOVER_ENDED,this.StopTalking.bind(this)))}init(t,e){const i=e.id;ol.locations[i];if(this.spine.scale.set(.5),this.spineContainer.position.set(-512+this.left,384-this.bottom),this.spine.state.hasAnimation("idle"))this.playAnimation("idle",!0);else{const t=this.spine.state.setAnimation(0,"blink",!1);t.trackTime=t.animationEnd,this.spine.update(0)}return this}animateIn(){let t=PIXI.ticker.shared.lastTime,e=0,i=0;u.TweenLite.from(this,.5,{pixi:{positionY:40}}).eventCallback("onUpdate",()=>{e=t,t=PIXI.ticker.shared.lastTime,i=(t-e)/1e3,this.update(i)})}onResize(t){}update(t){void 0!==this.spine&&this.spine.update(t)}destroy(t){var e;this._subscriptions.forEach(PubSub.unsubscribe),u.TweenLite.killTweensOf(this),null===(e=this.queuedBlink)||void 0===e||e.kill(),super.destroy(t)}getHatPosition(){const t=this.spine.skeleton.findBone("hat"),e=(t.worldX+this.spine.position.x)*this.spine.scale.x,i=(t.worldY+this.spine.position.y)*this.spine.scale.y;return this.spineContainer.toGlobal(bl.PointUtils.add(new PIXI.Point(e,i),this.hatPositionOffset))}StartTalking(){if(this.isTalking)return;this.isTalking=!0,this.spine.state.setAnimation(1,"talking",!0);let t=this.spine.state.tracks[0];if(!(null==t?void 0:t.animation.name.endsWith("-talk"))){const e=t.animation.name+"-talk";this.spine.state.hasAnimation(e)?this.spine.state.setAnimation(0,e,t.loop).trackTime=t.trackTime:(t=this.spine.state.setAnimation(0,"blink",!1),t.trackTime=t.animationEnd)}}StopTalking(){this.isTalking&&(this.isTalking=!1,this.spine.state.setEmptyAnimation(1,0))}PlayIdleAnimation(){var t;this.spine.state.hasAnimation("idle")&&this.playAnimation("idle",!0),null===(t=this.queuedBlink)||void 0===t||t.kill(),this.queuedBlink=new l.TimelineLite,this.queuedBlink.call(this.PlayBlinkAnimation.bind(this)).delay(Object(gh.floatBetween)(1,2))}playAnimation(t,e=!1){var i;null===(i=this.queuedBlink)||void 0===i||i.kill(),this.isTalking&&this.spine.state.hasAnimation(t+"-talk")&&(t+="-talk"),this.spine.state.setAnimation(0,t,e)}PlayBlinkAnimation(){this.playAnimation("blink",!1)}onAnimComplete(t){if(0===t.trackIndex)switch(t.animation.name){case"instructs-talk":case"idle-hat-on-talk":case"blink":this.PlayIdleAnimation()}else if(1===t.trackIndex&&!this.isTalking&&this.spine.state.tracks[0].isComplete())switch(this.spine.state.tracks[0].animation.name){case"idle-hat-on-talk":case"instructs-talk":this.PlayIdleAnimation()}}}class jh extends Uh{constructor(){super(...arguments),this.left=175,this.bottom=0}Instructs(){this.playAnimation("instructs")}StopInstructing(){const t=this.spine.state.setAnimation(0,"blink",!1);t.trackTime=t.animationEnd}}class Vh extends PIXI.Container{constructor(){super(...arguments),this.spriteContainer=this.addChild(new PIXI.Container)}init(t,e){const i=e.id,n=ol.locations[i].npc,r=e.allItemsFound?n.poses.excited:n.poses.neutral,o=e.id+"/"+r.sprite;return this.sprite=this.spriteContainer.addChild(Object(uh.makeSprite)(o,ol.spritesheets[i])),this.sprite.anchor.set(.5,1),void 0!==r.position&&this.sprite.position.set(r.position.x,r.position.y),this.spriteContainer.position.set(512-this.right,384-this.bottom),this}animateIn(){u.TweenLite.from(this,.5,{pixi:{positionY:40}})}onResize(t){}destroy(t){super.destroy(t)}}class Xh extends Vh{constructor(){super(...arguments),this.right=100,this.bottom=0}init(t,e){return super.init(t,e)}animateIn(){super.animateIn()}onResize(t){super.onResize(t)}destroy(t){super.destroy(t)}}class Hh extends PIXI.Container{constructor(){super(...arguments),this.bgs=[]}init(t,e){const i=e.id,{interior:n}=ol.locations[i];return this.addBackground(n.bg,e),this}animateIn(){}onResize(t){}destroy(t){super.destroy(t)}addBackground(t,e){if(Array.isArray(t))for(const i of t){const t=Object(uh.makeSprite)(e.id+"/"+i.filename);t.position.set(i.x,i.y),this.bgs.push(this.addChild(t))}else{const i=Object(uh.makeSprite)(e.id+"/"+t.filename);this.bgs.push(this.addChild(i))}}}class Gh extends wh{constructor(){super(),this._subscriptions=[],this.cheatButton=new dh(this.HandleCheatButtonClicked.bind(this),"button-paint-fill",Xa),this.cheatButton.position.set(this.cheatButton.width/2,this.cheatButton.height/2),this.cheatButton.addText("(CHEAT)\nreturn all","gelPenMedium22",16),this.cheatButton.scale.set(.5),this.cheatButton.position.set(this.cheatButton.width/2,this.cheatButton.height/2),this.startButton=new dh(this.HandleStartButtonClicked.bind(this),"next-btn-1",Xa,Wa.GIVE.UI10,"ui_click"),this.BottomCenter.addChild(this.startButton),this.startButton.position.set(0,-this.startButton.height/2),this.homeButtonReturnItems=new dh(this.HandleHomeButtonClicked.bind(this),"home-button",Xa,Wa.UI9,"ui_click"),this.BottomCenter.addChild(this.homeButtonReturnItems),this.homeButtonReturnItems.position.set(-this.homeButtonReturnItems.width/2-10,-this.homeButtonReturnItems.height/2),this.homeButtonGiveQuest=new dh(this.HandleHomeButtonClicked.bind(this),"exit-button",Xa,Wa.UI9,"ui_click"),this.TopLeft.addChild(this.homeButtonGiveQuest),this.homeButtonGiveQuest.position.set(this.homeButtonGiveQuest.width/2+8,1.5*this.homeButtonGiveQuest.height+8),this.continueButton=new dh(this.HandleContinueButtonClicked.bind(this),"next-btn-1",Xa,Wa.RETURN.UI8,"ui_click"),this.BottomCenter.addChild(this.continueButton),this.continueButton.position.set(this.continueButton.width/2+10,-this.continueButton.height/2),this._subscriptions.push(PubSub.subscribe(gl,this.onMessageReceived.bind(this)),PubSub.subscribe(ml,this.onMessageReceived.bind(this)),PubSub.subscribe(_l,this.onMessageReceived.bind(this)),PubSub.subscribe(vl,this.onMessageReceived.bind(this)))}init(t,e){return super.init(t,e),this.state=e,this.cheatButton.visible=!1,this.cheatButton.interactive=!1,this.startButton.visible=!1,this.startButton.interactive=!1,this.continueButton.visible=!1,this.continueButton.interactive=!1,this.homeButtonReturnItems.visible=!1,this.homeButtonReturnItems.interactive=!1,this.homeButtonGiveQuest.visible=!0,this.homeButtonGiveQuest.interactive=!0,e.allItemsFound&&(this.cheatButton.visible=!0,this.cheatButton.interactive=!0,this.homeButtonGiveQuest.visible=!1,this.homeButtonGiveQuest.interactive=!1),this}animateIn(){super.animateIn()}onResize(t){super.onResize(t)}destroy(t){var e;this._subscriptions.forEach(PubSub.unsubscribe),null===(e=this.animateInTimeline)||void 0===e||e.kill(),super.destroy(t)}HandleStartButtonClicked(){PubSub.publishSync(ch.UNREGISTER_FOCUSABLES,[this.homeButtonGiveQuest,this.startButton]),uu.Instance.GoToExterior()}HandleHomeButtonClicked(){PubSub.publishSync(ch.UNREGISTER_FOCUSABLES,[this.homeButtonReturnItems,this.continueButton]),Pu.instance.voiceover.stopVO(),uu.Instance.GoToLevelSelect()}HandleCheatButtonClicked(){for(const t of uu.Instance.currentLevelConfig.hiddenitems){const e=t.item;"string"==typeof e?uu.Instance.ReturnItem(e):uu.Instance.ReturnItem(e.id)}}HandleContinueButtonClicked(){PubSub.publishSync(ch.UNREGISTER_FOCUSABLES,[this.homeButtonReturnItems,this.continueButton]),uu.Instance.GoToExterior()}onMessageReceived(t,e){switch(t){case _l:this.OnLevelCompleted(e);break;case gl:this.OnItemReturned(e);break;case ml:this.OnAllItemsReturned(e);break;case vl:this.ShowContinueButton(e)}}OnItemReturned(t){this.state.items[t.id]=t}OnAllItemsReturned(t){this.state=t,this.cheatButton.visible=!1,this.cheatButton.interactive=!1,PubSub.publishSync(ch.UNREGISTER_FOCUSABLE,this.cheatButton)}ShowContinueButton(t){if(t.allItemsFound&&t.allItemsReturned){const e=ol.locations[t.id],i=ol.locations[t.id].narratives[t.narrative],n=ol.locations[t.id].narratives[t.narrative].variations[t.narrativeVariation],r=(Object.assign(Object.assign(Object.assign({},n.vo),i.vo),e.vo),[this.continueButton,this.homeButtonReturnItems]);r.forEach(t=>{t.visible=!0,t.interactive=!0}),this.animateInTimeline=u.TweenLite.fromTo(r,.5,{pixi:{scale:0}},{pixi:{scale:1},ease:xl.easeOut}).delay(2.25).eventCallback("onComplete",()=>{PubSub.publishSync(ch.REGISTER_FOCUSABLES,r)})}else{const t=this.startButton;t.visible?this.animateInTimeline=(new l.TimelineLite).to(t,.5,{pixi:{scale:1.125}}).to(t,.5,{pixi:{scale:1}}).to(t,.5,{pixi:{scale:1.125}}).to(t,.5,{pixi:{scale:1}}).to(t,.5,{pixi:{scale:1.125}}).to(t,.5,{pixi:{scale:1}}):(t.visible=!0,t.interactive=!0,this.animateInTimeline=(new l.TimelineLite).fromTo([this.startButton,this.homeButtonReturnItems],.5,{pixi:{scale:0}},{pixi:{scale:1}}).call(()=>{PubSub.publishSync(ch.REGISTER_FOCUSABLES,[this.startButton,this.homeButtonReturnItems])}).to(t,.5,{pixi:{scale:1.125}}).to(t,.5,{pixi:{scale:1}}).to(t,.5,{pixi:{scale:1.125}}).to(t,.5,{pixi:{scale:1}}).to(t,.5,{pixi:{scale:1.125}}).to(t,.5,{pixi:{scale:1}}).delay(1.25))}}OnLevelCompleted(t){PubSub.publishSync(ch.UNREGISTER_FOCUSABLES,[this.continueButton,this.startButton,this.cheatButton,this.homeButtonGiveQuest,this.homeButtonReturnItems])}}const Wh=Xa;class Yh extends a.State{constructor(){super(...arguments),this.bg=this.addChild(new Hh),this.hud=this.addChild(new Gh),this.itemsList=this.addChild(new Bh),this.luna=this.addChild(new jh),this.npc=this.addChild(new Xh),this._subscriptions=[],this._wasContinue=!1}static GetIdForState(t,e,i){return`State_GameInteriorGiveQuest_${t}_${e}_${i}`}static GetAssetsForState(t,e,i){const n=ol.locations[t],r=n.narratives[e],o=r.variations[i],s=n.interior,l=Object.assign(Object.assign(Object.assign({},r.vo),o.vo),n.vo),h=o.hiddenitems.map(t=>"string"==typeof t.item?t.item:t.item.id),u=[];return Mh(u,l.give_quest),Mh(u,Wa.GIVE.O2),Mh(u,l.show_items),h.forEach((t,e)=>{var i;const r=n.items[t];Mh(u,null===(i=r.vo)||void 0===i?void 0:i.returned)}),Oh(t,u,s.bg,a.AssetType.JPG),u.push(new a.AudioAsset(n.bgm,a.AudioCategory.BGM)),u.push(...a.AssetFactory(ol.spritesheet_factory[t],e=>new a.TextureAtlasAsset(`${t}-${e}`))),u}init(t,e){super.init(t,e),PubSub.publishSync(a.PUSH_KEYBOARD_LAYER,void 0),this.setChildIndex(this.bg,0),this.setChildIndex(this.itemsList,1),this.setChildIndex(this.npc,2),this.setChildIndex(this.luna,3),this.setChildIndex(this.hud,4),this.bg.init(t,e),this.itemsList.init(t,e),this.luna.init(t,e),this.npc.init(t,e),this.hud.init(t,e),this.initVoiceover(e),this.initMusic(e),this._wasContinue=e.wasContinue,this._subscriptions.push(PubSub.subscribe(fl,this.RestartIdleTimer.bind(this)),PubSub.subscribe(a.GAME_PAUSED,()=>{var t;return null===(t=this.idleTimeline)||void 0===t?void 0:t.kill()}),PubSub.subscribe(a.GAME_UNPAUSED,this.RestartIdleTimer.bind(this)))}onResize(t){super.onResize(t),this.bg.onResize(t),this.itemsList.onResize(t),this.hud.onResize(t),this.npc.onResize(t),this.luna.onResize(t)}animateIn(t){var e,i,n,r,o,s;this.bg.animateIn(),this.npc.animateIn(),this.luna.animateIn(),this.hud.animateIn(),this.itemsList.animateIn(),null===(e=this.bgm)||void 0===e||e.setLooped(!0),null===(i=this.bgm)||void 0===i||i.setVolume(.125),(null===(n=this.bgm)||void 0===n?void 0:n.isPlaying())||null===(r=this.bgm)||void 0===r||r.play(),super.animateIn(t);const l=()=>{PubSub.publishSync(vl,{allItemsFound:!1}),h.TweenMax.delayedCall(2,()=>{Pu.instance.voiceover.playVO([Wa.GIVE.O2,.75],a.PlayMode.New)})},u=()=>{var t;this.luna.Instructs(),void 0===(null===(t=this.vo)||void 0===t?void 0:t.show_items)||Pu.instance.skipVO?l():Pu.instance.voiceover.playVO([.75,...this.vo.show_items],a.PlayMode.Append,()=>{l()})};h.TweenMax.delayedCall(1,()=>{var t,e;void 0===(null===(t=this.vo)||void 0===t?void 0:t.give_quest)||void 0===(null===(e=this.vo)||void 0===e?void 0:e.show_items)||Pu.instance.skipVO?l():Pu.instance.voiceover.playVO(this.vo.give_quest,a.PlayMode.Append,u)}),this.idleTimeline=new Il,this.idleTimeline.delay(10),void 0!==(null===(o=this.vo)||void 0===o?void 0:o.give_quest_idle)&&2===(null===(s=this.vo)||void 0===s?void 0:s.give_quest_idle.length)&&(this.vo.give_quest_idle.splice(1,0,Wa.GIVE.O2),this.vo.give_quest_idle.push(Wa.GIVE.O2)),this.idleTimeline.call(()=>{var t,e;if(void 0!==(null===(t=this.vo)||void 0===t?void 0:t.give_quest_idle)){null===(e=this.idleTimeline)||void 0===e||e.kill();const t=this.vo.give_quest_idle.shift();t===Wa.GIVE.O2&&PubSub.publishSync(vl,{allItemsFound:!1}),Pu.instance.voiceover.playVO([t,.75],a.PlayMode.New,e=>{e?this.vo.give_quest_idle.push(t):this.vo.give_quest_idle.unshift(t),this.RestartIdleTimer()})}},void 0,void 0,10),this.idleTimeline.repeat(-1)}update(t){super.update(t),this.luna.update(t)}animateOut(t){super.animateOut(t),PubSub.publishSync(a.POP_KEYBOARD_LAYER,void 0)}destroy(t){var e;this._subscriptions.forEach(PubSub.unsubscribe),u.TweenLite.killTweensOf(this),null===(e=this.idleTimeline)||void 0===e||e.kill(),super.destroy(t)}RestartIdleTimer(){var t;null===(t=this.idleTimeline)||void 0===t||t.restart(!0,!0)}initVoiceover(t){const e=ol.locations[t.id],i=ol.locations[t.id].narratives[t.narrative],n=ol.locations[t.id].narratives[t.narrative].variations[t.narrativeVariation];this.vo=Object.assign(Object.assign(Object.assign({},e.vo),i.vo),n.vo)}initMusic(t){const e=ol.locations[t.id];this.bgm=Pu.instance.audio.getAudioTrack(e.bgm,a.AudioCategory.BGM)}}Yh.Assets=[new a.AssetMapData("gelPenMedium22",a.AssetType.FONT),new a.SpineAsset("luna",a.AssetType.SPINE_JSON,"luna"),...Wh.map(t=>new a.AssetMapData(t,a.AssetType.TEXTURE_ATLAS)),new a.AudioAsset("item-give",a.AudioCategory.SFX)];i(407),i(411),i(424);var zh=PIXI.utils.hex2rgb,qh=PIXI.utils.rgb2hex;class Kh extends PIXI.Filter{constructor(t=0,e=1){super(void 0,Kh.FRAG),this._color=0,this._mix=1,this.uniforms.color=new Float32Array(3),this.color=t,this.mix=e,this.padding=0}set color(t){const e=this.uniforms.color;"number"==typeof t?(zh(t,e),this._color=t):(e[0]=t[0],e[1]=t[1],e[2]=t[2],this._color=qh(e))}get color(){return this._color}get mix(){return this._mix}set mix(t){this._mix=t,this.uniforms.mixAmount=t}}Kh.FRAG="\n        varying vec2 vTextureCoord;\n        uniform sampler2D uSampler;\n        uniform vec3 color;\n        uniform float mixAmount;\n        void main(void) {\n            vec4 currentColor = texture2D(uSampler, vTextureCoord);\n            vec3 colorOverlay = mix(currentColor.rgb, color * currentColor.a, mixAmount);\n            gl_FragColor = vec4(colorOverlay.r, colorOverlay.g, colorOverlay.b, currentColor.a);\n        }\n    ";var Jh=i(79),Zh=i(119);class Qh extends Zh.Draggable{constructor(t,e,i){var n;super(),this._subscriptions=[],this.id=t.id;const r=e+"/"+t.icon_int_return,o=this.visuals.addChild(new PIXI.Container);this.sprite=o.addChild(Object(uh.makeSprite)(r,ol.spritesheets[e]));const s=i.ICON_SIZE/this.sprite.width,l=i.ICON_SIZE/this.sprite.height;if(o.scale.set(Math.min(s,l)),this.hitArea=new PIXI.Rectangle(-o.width/2,-o.height/2,o.width,o.height),this._returned=t.returned,t.found&&!t.returned?(this.interactive=!0,this._outlineFilter.padding=16):this.interactive=!1,this._hoverVo=null===(n=t.vo)||void 0===n?void 0:n.returned,null==i?void 0:i.highlightFloatingItems){const t=new Jh.OutlineFilter;t.uniforms.outlineColor=[1,1,1],t.uniforms.thickness=[.005,.005],t.uniforms.filterClamp=[0,0,1,1],t.padding=128,o.filters=[t]}this._subscriptions.push(PubSub.subscribe(gl,this.onMessageReceived.bind(this)),PubSub.subscribe(a.DRAGGABLE_SELECTED,this.onMessageReceived.bind(this)),PubSub.subscribe(a.DRAG_BEGIN,this.onMessageReceived.bind(this))),this.on("pointercancel",this.onPointerUpOutside)}get returned(){return this._returned}destroy(t){this._subscriptions.forEach(PubSub.unsubscribe),super.destroy(t)}select(){super.select(),PubSub.publishSync(yl,this),Object(uh.sendToFront)(this)}dragEnd(){super.dragEnd(),this.deselect(),this._visuals.position.set(0)}dragBegin(){super.dragBegin(),Object(uh.sendToFront)(this)}onMessageReceived(t,e){switch(t){case gl:this.OnItemReturned(e);break;case a.DRAGGABLE_SELECTED:case a.DRAG_BEGIN:e!==this&&this.dragEnd()}}OnItemReturned(t){t.id===this.id&&(this.interactive=!1,this._returned=!0,this.deselect(),PubSub.publishSync(a.UNREGISTER_FOCUSABLE,this))}playHoverVo(){void 0!==this._hoverVo&&(Pu.instance.voiceover.playVO(this._hoverVo,{priority:-1,mode:a.PlayMode.Override}),PubSub.publishSync(fl,void 0))}}var $h=function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i};class tu extends PIXI.Container{constructor(){super(),this.icons=[],this._subscriptions=[],this._animateOutMode="none",this._subscriptions.push(PubSub.subscribe(gl,this.onMessageReceived.bind(this)),PubSub.subscribe(ml,this.onMessageReceived.bind(this)),PubSub.subscribe(_l,this.onMessageReceived.bind(this)))}init(t,e){var i;this._state=e,this._size=t;const n=ol.locations[e.id],{items:r}=n,o=$h(n,["items"]),{items:s}=e,a=$h(e,["items"]),l=Object.keys(s).map(t=>Object.assign(Object.assign({id:t},s[t]),r[t])),h=o.narratives[a.narrative].variations[a.narrativeVariation],u=Object.assign(Object.assign({},o.interior.itemslist.return),null===(i=h.itemslist)||void 0===i?void 0:i.return);return this._animateOutMode=u.animateOut,this.spawnItems(l,e,u),this}animateIn(t){this.animateInTimeline=(new l.TimelineLite).call(()=>{const e=this.toLocal(t.getHatPosition());this.animateInTimeline=(new l.TimelineLite).staggerFrom(this.icons,.75,{pixi:{positionX:e.x,positionY:e.y}},.5).staggerFrom(this.icons,.75,{pixi:{scale:0}},.5,0).call(t.onDoneWithHat).call(()=>{PubSub.publishSync(a.REGISTER_FOCUSABLES,this.icons)}),this.icons.forEach(t=>t.visible=!0)}).delay(2.666)}onResize(t){this._size=t}destroy(t){var e;h.TweenMax.killTweensOf(this),this._subscriptions.forEach(PubSub.unsubscribe),null===(e=this.animateInTimeline)||void 0===e||e.kill(),super.destroy(t)}onMessageReceived(t,e){switch(t){case ml:this.OnAllItemsReturned(e);break;case gl:this.OnItemReturned(e)}}OnItemReturned(t){this._state.items[t.id]=t;const e=this.icons.find(t=>t.interactive&&!t.returned);PubSub.publishSync(a.FORCE_FOCUS,e)}OnAllItemsReturned(t){var e;switch(this._state=t,this._animateOutMode){case"slideRight":u.TweenLite.to(this,2.5,{pixi:{positionX:null===(e=this._size)||void 0===e?void 0:e.x}});break;case"juggle":h.TweenMax.to(this,3.5,{pixi:{rotation:360},ease:u.Linear.easeNone}).repeat(-1);break;case"fadeAndRotate":u.TweenLite.to(this,1.5,{pixi:{scale:0,alpha:0,rotation:-15}});break;case"fade":u.TweenLite.to(this,.3,{pixi:{alpha:0}})}}spawnItems(t,e,i){for(let n=0;n<t.length;n++){const r=(n-t.length/2+.5)*(i.ICON_SIZE+i.ICON_SPACING),o=i.floatingItemsY;this.spawnIcon(t[n],e.id,i).position.set(r,o)}}spawnIcon(t,e,i){const n=new Qh(t,e,i);return n.visible=!1,this.icons.push(this.addChild(n)),n}}class eu extends Uh{constructor(){super(),this.left=145,this.bottom=0,this._subscriptions.push(PubSub.subscribe(gl,this.OnItemReturned.bind(this)),PubSub.subscribe(ml,this.OnAllItemsReturned.bind(this)),PubSub.subscribe(_l,this.OnLevelCompleted.bind(this)))}HatOn(){this.playAnimation("idle-hat-on")}HatOff(){this.playAnimation("idle-hat-off")}OnItemReturned(t){}OnAllItemsReturned(t){}OnLevelCompleted(t){}}class iu extends Vh{constructor(){super(...arguments),this.right=100,this.bottom=0}init(t,e){return super.init(t,e),this}animateIn(){super.animateIn()}onResize(t){super.onResize(t)}destroy(t){super.destroy(t)}}var nu=i(120);class ru extends PIXI.Container{constructor(){super(),this._emitter=new Yl(this,[Object(uh.getTexture)("music-note-01-02-02",Xa),Object(uh.getTexture)("music-note-00-02-02",Xa)],{alpha:{list:[{value:0,time:0},{value:1,time:.2},{value:1,time:.8},{value:0,time:1}]},scale:{list:[{value:.1,time:0},{value:1,time:1}]},speed:{list:[{value:200,time:0},{value:100,time:1}]},startRotation:{min:0,max:360},lifetime:{min:.3,max:.8},frequency:.008,emitterLifetime:.2,maxParticles:1e3,pos:{x:0,y:0},addAtBack:!1,spawnType:"polygonalChain",spawnPolygon:[{x:-400,y:50},{x:-400,y:-150},{x:350,y:-150},{x:400,y:0}],blendMode:"normal",autoUpdate:!0}),this.stopEmitting()}startEmitting(){this._emitter.emit=!0}stopEmitting(){this._emitter.emit=!1}updateSpawnPosition(t){this._emitter.updateSpawnPos(t.x,t.y)}}var ou=i(24);class su extends nu.Receptacle{constructor(t,e){var i,n,r,o,s;super(),this.icons=[],this.animateOnDrop="none",this.acceptsMultiple=null!==(i=t.acceptsMultiple)&&void 0!==i&&i,this.hideIconImmediately=null!==(n=t.hideIconImmediately)&&void 0!==n&&n,this.animateOnDrop=null!==(r=t.animateOnDrop)&&void 0!==r?r:"none",this.scaleUpOnDragOver=null!==(o=t.scaleUpOnDragOver)&&void 0!==o&&o,this.musicnotes=null!==(s=t.musicnotes)&&void 0!==s&&s,this._width=t.width,this._height=t.height,this._dropSFX=t.dropSFX,this.acceptsMultiple?this.hitArea=new PIXI.Rectangle(-t.width/2,-t.height/2,t.width,t.height):this.hitArea=new PIXI.Rectangle(0,0,t.width,t.height),void 0!==t.bg&&this.addBG(t.bg,e),this._subscriptions.push(PubSub.subscribe(gl,this.onMessageReceived.bind(this)),PubSub.subscribe(ml,this.onMessageReceived.bind(this)))}onPointerOver(){super.onPointerOver()}onPointerOut(){super.onPointerOut()}onDragBegin(t,e){super.onDragBegin(t,e),this.interactive&&this.scaleUpOnDragOver&&u.TweenLite.to(this,.3,{pixi:{scale:1.1}})}onDragEnd(t,e){super.onDragEnd(t,e),!this.interactive&&this.scaleUpOnDragOver&&u.TweenLite.to(this,.3,{pixi:{scale:1}})}onDraggableSelected(t,e){super.onDraggableSelected(t,e),this.interactive&&this.scaleUpOnDragOver&&u.TweenLite.to(this,.3,{pixi:{scale:1.1}})}onDraggableDeselected(t,e){super.onDraggableDeselected(t,e),!this.interactive&&this.scaleUpOnDragOver&&u.TweenLite.to(this,.3,{pixi:{scale:1}})}addDraggable(t){t instanceof Qh&&(this.icon=t,t.deselect(),this.itemID=t.id,uu.Instance.ReturnItem(t.id))}onMessageReceived(t,e){switch(t){case gl:this.OnItemReturned(e);break;case ml:this.OnAllItemsReturned(e)}}OnItemReturned(t){if(t.id===this.itemID){if(this.icons.push(this.icon),this.acceptsMultiple){const t=this.icons.length;void 0!==this._dropSFX&&(Array.isArray(this._dropSFX)?Pu.instance.audio.play(this._dropSFX[t%this._dropSFX.length],1,!1,ou.SFX):Pu.instance.audio.play(this._dropSFX,1,!1,ou.SFX)),this.hideIconImmediately?this.icon.visible=!1:this.icons.forEach((e,i)=>{const n=(i-t/2+.5)*Math.min(this._width/t,100);e===this.icon?(e.position.x=this.position.x+n,e.position.y=this.position.y,e.scale.set(.8)):(u.TweenLite.killTweensOf(e),u.TweenLite.to(e,.05,{pixi:{positionX:this.position.x+n}}))})}else void 0!==this._dropSFX&&(Array.isArray(this._dropSFX)?Pu.instance.audio.play(bl.ArrayUtils.random(this._dropSFX),1,!1,ou.SFX):Pu.instance.audio.play(this._dropSFX,1,!1,ou.SFX)),void 0!==this.icon&&(this.icon.position.set(this.position.x+this._width/2,this.position.y+this._height/2),this.isActive=!1,PubSub.publishSync(ch.UNREGISTER_FOCUSABLE,this));"squash"===this.animateOnDrop&&void 0!==this.bg&&(new l.TimelineLite).to(this.bg.children,5/30,{pixi:{scaleX:1.1,scaleY:.8}}).to(this.bg.children,1,{pixi:{scaleX:1,scaleY:1},ease:wl.easeOut})}}OnAllItemsReturned(t){if(PubSub.publishSync(ch.UNREGISTER_FOCUSABLE,this),this.acceptsMultiple&&this.icons.forEach(t=>t.visible=!1),this.musicnotes){const t=new ru;this.addChild(t);const e=new Il;e.repeat(8),e.call(()=>{t.startEmitting()}).to(this.bg.children,.5,{pixi:{scaleY:.9,scaleX:1.1},ease:Tl.easeOut}).to(this.bg.children,.5,{pixi:{scaleX:1,scaleY:1},ease:Tl.easeIn}).delay(1+5/30)}}addBG(t,e){if(Array.isArray(t)){this.bg=this.addChild(new PIXI.Container);for(const i of t){const t=Object(uh.makeSprite)(e+"/"+i.filename,ol.spritesheets[e]);t.position.x=i.x,t.position.y=i.y+t.height/2,this.bg.addChild(t),t.anchor.set(.5,1)}}else this.bg=Object(uh.makeSprite)(e+"/"+t.filename,ol.spritesheets[e]),this.addChild(this.bg),this.bg.anchor.set(.5,1),this.bg.position.set(0,this.bg.height/2)}}class au extends PIXI.Container{constructor(){super(),this._subscriptions=[],this.receptacles=[],this._animateOutMode="none",this._subscriptions.push(PubSub.subscribe(gl,this.onMessageReceived.bind(this)),PubSub.subscribe(ml,this.onMessageReceived.bind(this)),PubSub.subscribe(_l,this.onMessageReceived.bind(this)),PubSub.subscribe(yl,this.onMessageReceived.bind(this)))}init(t,e){var i;this._state=e,this._size=t;const n=ol.locations[e.id],r=e,o=n.narratives[r.narrative].variations[r.narrativeVariation],s=Object.assign(Object.assign({},n.interior.itemslist.return),null===(i=o.itemslist)||void 0===i?void 0:i.return),a=s.bg;return this._animateOutMode=s.animateOut,void 0!==a&&this.addBG(a,e.id),this.spawnReceptacles(s.itemslots,s,e.id),this}animateIn(){}onResize(t){this._size=t}destroy(t){var e;this._subscriptions.forEach(PubSub.unsubscribe),null===(e=this.animateInTimeline)||void 0===e||e.kill(),super.destroy(t)}onMessageReceived(t,e){switch(t){case ml:this.OnAllItemsReturned(e);break;case gl:this.OnItemReturned(e);break;case yl:this.OnItemSelected()}}OnItemSelected(){const t=this.receptacles.find(t=>t.interactive);PubSub.publishSync(a.FORCE_FOCUS,t)}OnItemReturned(t){this._state.items[t.id]=t}OnAllItemsReturned(t){var e;this._state=t,PubSub.publishSync(a.UNREGISTER_FOCUSABLES,this.receptacles);const i=()=>{PubSub.publish(vl,t),PubSub.publishSync("LunaAdventure.PlayParticles",t)};switch(this._animateOutMode){case"slideRight":i(),u.TweenLite.to(this,2.5,{pixi:{positionX:null===(e=this._size)||void 0===e?void 0:e.x}});break;case"slideRightSlow":u.TweenLite.to(this,2.5,{pixi:{positionX:this._size.x/2},ease:u.Linear.easeNone}).eventCallback("onComplete",i);break;case"fade":i(),u.TweenLite.to(this,.3,{pixi:{alpha:0}});break;case"fadeAndRotate":i(),u.TweenLite.to(this,1.5,{pixi:{scale:0,alpha:0,rotation:-15}});break;case"juggle":i(),this.receptacles.forEach((t,e)=>{t.visible=!1});break;case"none":default:i()}}spawnReceptacles(t,e,i){var n,r;if(Array.isArray(t))for(let o=0;o<t.length;o++){const s=new su(t[o],i);s.position.set((null!==(n=t[o].x)&&void 0!==n?n:0)-e.width/2,(null!==(r=t[o].y)&&void 0!==r?r:0)-e.height/2),this.receptacles.push(s),this.addChild(s),PubSub.publishSync(a.REGISTER_FOCUSABLE,s)}else for(let e=0;e<t.length;e++){const n=new su(t,i),r=Math.cos(e/t.length*PIXI.PI_2+t.rotationoffset*PIXI.DEG_TO_RAD),o=Math.sin(e/t.length*PIXI.PI_2+t.rotationoffset*PIXI.DEG_TO_RAD);n.position.set(r*t.radius-t.width/2,o*t.radius-t.height/2+t.y),this.receptacles.push(n),this.addChild(n),PubSub.publishSync(a.REGISTER_FOCUSABLE,n)}}addBG(t,e){if(Array.isArray(t)){this.bg=this.addChild(new PIXI.Container);for(const i of t){const t=Object(uh.makeSprite)(e+"/"+i.filename,ol.spritesheets[e]);t.position.x=i.x,t.position.y=i.y,this.bg.addChild(t)}}else this.bg=this.addChild(Object(uh.makeSprite)(e+"/"+t.filename,ol.spritesheets[e]))}}const lu=Xa;class hu extends a.State{constructor(){super(...arguments),this.bg=this.addChild(new Hh),this.hud=this.addChild(new Gh),this.itemsList=this.addChild(new tu),this.receptacles=this.addChild(new au),this.luna=this.addChild(new eu),this.npc=this.addChild(new iu),this.payoffContainer=this.addChild(new PIXI.Container),this.particleBurst=this.addChild(new a.AnimatedSprite),this._subscriptions=[],this.doCheerSound=!1}static GetIdForState(t,e,i){return`State_GameInteriorReturnItems_${t}_${e}_${i}`}static GetAssetsForState(t,e,i){var n;const r=ol.locations[t],o=r.narratives[e],s=o.variations[i],l=r.interior,h=Object.assign(Object.assign({},l.itemslist.return),null===(n=s.itemslist)||void 0===n?void 0:n.return),u=Object.assign(Object.assign(Object.assign({},s.vo),o.vo),r.vo),c=s.hiddenitems.map(t=>"string"==typeof t.item?t.item:t.item.id),d=[];return d.push(...Object(a.AssetFactory)({"@1x":1,"@2x":[1,3]},t=>new a.TextureAtlasAsset(`magicpoof-${t}`))),Mh(d,u.return_items),Mh(d,u.all_items_returned),Oh(t,d,l.bg,a.AssetType.JPG),d.push(new a.AudioAsset(r.bgm,a.AudioCategory.BGM)),d.push(...a.AssetFactory(ol.spritesheet_factory[t],e=>new a.TextureAtlasAsset(`${t}-${e}`))),Array.isArray(l.itemslist.return.itemslots)?l.itemslist.return.itemslots.forEach(t=>{Rh(0,d,t.dropSFX)}):Rh(0,d,l.itemslist.return.itemslots.dropSFX),h.doCheerSound&&(Rh(0,d,"crowd-cheer-start"),Rh(0,d,"crowd-cheer")),c.forEach((t,e)=>{var i;const n=r.items[t];Mh(d,null===(i=n.vo)||void 0===i?void 0:i.returned)}),d}init(t,e){super.init(t,e),this.state=e,PubSub.publishSync(a.PUSH_KEYBOARD_LAYER,void 0);const i=ol.locations[e.id];this.setChildIndex(this.bg,0),this.setChildIndex(this.receptacles,1),this.setChildIndex(this.payoffContainer,2),this.setChildIndex(this.itemsList,3),this.setChildIndex(this.npc,4),this.setChildIndex(this.luna,5),this.setChildIndex(this.hud,6),this.bg.init(t,e),this.itemsList.init(t,e),this.receptacles.init(t,e),this.luna.init(t,e),this.npc.init(t,e),this.hud.init(t,e),this.initVoiceover(e),this.initMusic(e),this.initParticles(),this.initPayoff(e,i),this._subscriptions.push(PubSub.subscribe(gl,this.onMessageReceived.bind(this)),PubSub.subscribe(ml,this.onMessageReceived.bind(this)),PubSub.subscribe("LunaAdventure.PlayParticles",this.onMessageReceived.bind(this)),PubSub.subscribe(_l,this.onMessageReceived.bind(this)),PubSub.subscribe(vl,this.onMessageReceived.bind(this)),PubSub.subscribe(fl,this.onMessageReceived.bind(this)),PubSub.subscribe(a.GAME_PAUSED,this.onMessageReceived.bind(this)),PubSub.subscribe(a.GAME_UNPAUSED,this.onMessageReceived.bind(this)))}onResize(t){super.onResize(t),this.bg.onResize(t),this.itemsList.onResize(t),this.receptacles.onResize(t),this.hud.onResize(t),this.npc.onResize(t),this.luna.onResize(t)}animateIn(t){var e,i,n,r;this.bg.animateIn(),this.receptacles.animateIn(),this.hud.animateIn(),this.npc.animateIn(),this.luna.animateIn(),null===(e=this.bgm)||void 0===e||e.setLooped(!0),null===(i=this.bgm)||void 0===i||i.setVolume(.125),(null===(n=this.bgm)||void 0===n?void 0:n.isPlaying())||null===(r=this.bgm)||void 0===r||r.play(),super.animateIn(t);const o=()=>{this.idleTimeline=new Il,this.idleTimeline.delay(10),this.idleTimeline.call(()=>{var t,e,i,n,r,o;const s=a.ArrayUtils.random((null===(t=this.state)||void 0===t?void 0:t.allItemsReturned)?null!==(i=null===(e=this.vo)||void 0===e?void 0:e.all_items_returned_idle)&&void 0!==i?i:[]:null!==(r=null===(n=this.vo)||void 0===n?void 0:n.return_items_idle)&&void 0!==r?r:[]);void 0!==s&&(null===(o=this.idleTimeline)||void 0===o||o.kill(),Pu.instance.voiceover.playVO([s,.75],a.PlayMode.New,()=>{this.RestartIdleTimer()}))},void 0,void 0,10),this.idleTimeline.repeat(-1)};h.TweenMax.delayedCall(1,()=>{var t;this.luna.HatOff(),this.itemsList.animateIn({getHatPosition:this.luna.getHatPosition.bind(this.luna),onDoneWithHat:()=>{this.luna.HatOn()}}),void 0===(null===(t=this.vo)||void 0===t?void 0:t.return_items)||Pu.instance.skipVO?o():Pu.instance.voiceover.playVO(this.vo.return_items,a.PlayMode.Override,o)})}update(t){super.update(t),this.luna.update(t),this.particleBurst.isPlaying?(this.particleBurst.visible=!0,this.particleBurst.update(t)):this.particleBurst.visible=!1}animateOut(t){super.animateOut(t),PubSub.publishSync(a.POP_KEYBOARD_LAYER,void 0)}destroy(t){var e;this._subscriptions.forEach(PubSub.unsubscribe),u.TweenLite.killTweensOf(this),null===(e=this.idleTimeline)||void 0===e||e.kill(),super.destroy(t)}onMessageReceived(t,e){switch(t){case _l:this.OnLevelCompleted(e);break;case gl:this.OnItemReturned(e);break;case ml:this.OnAllItemsReturned(e);break;case"LunaAdventure.PlayParticles":this.PlayParticles(e);break;case vl:this.ShowContinueButton(e);break;case fl:this.RestartIdleTimer();break;case a.GAME_PAUSED:this.OnGamePaused();break;case a.GAME_UNPAUSED:this.OnGameUnpaused()}}OnGamePaused(){var t;null===(t=this.idleTimeline)||void 0===t||t.kill()}OnGameUnpaused(){this.RestartIdleTimer()}RestartIdleTimer(){var t;null===(t=this.idleTimeline)||void 0===t||t.restart(!0,!0)}OnItemReturned(t){if(this.state.items[t.id]=t,this.RestartIdleTimer(),void 0!==this.payoffConfig.sprite&&Array.isArray(this.payoffConfig.sprite)){const t=this.payoffConfig.sprite.shift();this.payoffConfig.sprite.push(t);const e=Object(uh.makeSprite)(this.id+"/"+t,ol.spritesheets[this.id]);this.payoffContainer.addChild(e);const i=new Kh(16777215,1);e.filters=[i],i.padding=8,(new l.TimelineLite).to(i,.5,{mix:0}).call(()=>e.filters=[])}}OnAllItemsReturned(t){var e;if(this.state=t,null===(e=this.idleTimeline)||void 0===e||e.kill(),Pu.instance.audio.play("level-success",.5,!1,a.AudioCategory.SFX),this.doCheerSound&&(Pu.instance.audio.play("crowd-cheer-start",.5,!1,a.AudioCategory.SFX),u.TweenLite.delayedCall(3,()=>{Pu.instance.audio.play("crowd-cheer",.5,!0,a.AudioCategory.SFX)})),void 0!==this.payoffConfig.sprite&&!Array.isArray(this.payoffConfig.sprite)){const e=Object(uh.makeSprite)(t.id+"/"+this.payoffConfig.sprite,ol.spritesheets[this.id]);this.payoffContainer.addChild(e)}const i=new Kh(16777215,1);this.payoffContainer.filters=[i],i.padding=8,(new l.TimelineLite).fromTo(this.payoffContainer,.5,{pixi:{scale:0,alpha:0}},{pixi:{scale:1,alpha:1}}).to(i,.5,{mix:0}).call(()=>this.payoffContainer.filters=[]).call(()=>{var t;(null===(t=this.vo)||void 0===t?void 0:t.all_items_returned)?Pu.instance.voiceover.playVO(this.vo.all_items_returned,a.PlayMode.Override,()=>{this.RestartIdleTimer()}):this.RestartIdleTimer()})}PlayParticles(t){this.particleBurst.play("magicpoof")}ShowContinueButton(t){this.RestartIdleTimer()}OnLevelCompleted(t){this.doCheerSound&&Pu.instance.audio.fadeTo("crowd-cheer",a.AudioCategory.SFX,0,500),this.RestartIdleTimer()}initPayoff(t,e){var i;this.id=t.id,this.payoffConfig=e.payoffs[t.payoff],void 0!==this.payoffConfig.position&&this.payoffContainer.position.set(this.payoffConfig.position.x,this.payoffConfig.position.y),this.doCheerSound=null!==(i=e.interior.itemslist.return.doCheerSound)&&void 0!==i&&i}initParticles(){const t=new a.SpriteAnimation("-e-magicpoof-",["magicpoof-1","magicpoof-2","magicpoof-3"],22,0,15,!1,1);this.particleBurst.scale.set(2),this.particleBurst.addAnimation("magicpoof",t)}initVoiceover(t){const e=ol.locations[t.id],i=ol.locations[t.id].narratives[t.narrative],n=ol.locations[t.id].narratives[t.narrative].variations[t.narrativeVariation];this.vo=Object.assign(Object.assign(Object.assign({},e.vo),i.vo),n.vo)}initMusic(t){const e=ol.locations[t.id];this.bgm=Pu.instance.audio.getAudioTrack(e.bgm,a.AudioCategory.BGM)}}hu.Assets=[new a.AssetMapData("gelPenMedium22",a.AssetType.FONT),new a.SpineAsset("luna",a.AssetType.SPINE_JSON,"luna"),...lu.map(t=>new a.AssetMapData(t,a.AssetType.TEXTURE_ATLAS)),new a.AudioAsset("level-success",a.AudioCategory.SFX)];class uu{constructor(){this._locations={},this._onboarding={complete:!1},this._currentLocation=rl[0]}static get Instance(){return void 0===uu._Instance&&(uu._Instance=new uu,uu._Instance.Load()),uu._Instance}get currentLevelConfig(){const t=ol.locations[this._currentLocation],e=this._locations[this._currentLocation];return t.narratives[e.narrative].variations[e.narrativeVariation]}get onboarding(){return this._onboarding}static CreateEmptyState(t){return{id:t,narrative:-1,narrativeVariation:-1,hidingSpots:{},items:{},payoff:"",allItemsFound:!1,allItemsReturned:!1,completed:!1,allLevelsCompleted:!1}}static AssignItemsToHidingSpots(t,e,i){t.hidingSpots={};for(const i of Object.keys(e.hidingspots))t.hidingSpots[i]={id:i,searched:!1};i.forEach(e=>{const i="string"==typeof e.hidingspot?e.hidingspot:e.hidingspot.id,n=t.hidingSpots[i];void 0!==n?"string"==typeof e.item?n.itemID=e.item:n.itemID=e.item.id:console.error("couldn't find hiding spot with id "+e.hidingspot)})}static SelectItemsForLevel(t,e){const i=e.hiddenitems;t.items={},t.allItemsFound=!1,t.allItemsReturned=!1,i.forEach(e=>{const i="string"==typeof e.item?e.item:e.item.id;t.items[i]={id:i,found:!1,returned:!1}})}static SelectFirstNarrativeVariation(t,e){t.narrative=0,t.narrativeVariation=0,uu.Populate(t,e)}static SelectRandomNarrativeVariation(t,e){const i=[];for(let n=0;n<e.narratives.length;n++)for(let r=0;r<e.narratives[n].variations.length;r++)n===t.narrative&&r===t.narrativeVariation||i.push({n:n,v:r});const n=bl.ArrayUtils.random(i);t.narrative=n.n,t.narrativeVariation=n.v,uu.Populate(t,e)}static SelectNextNarrativeVariation(t,e){return t.narrativeVariation++,t.narrativeVariation>=e.narratives[t.narrative].variations.length&&(t.narrative++,t.narrativeVariation=0),t.narrative>=e.narratives.length?(t.allLevelsCompleted=!0,!1):(uu.Populate(t,e),!0)}static RestartCurrentNarrativeVariation(t,e){uu.Populate(t,e)}static SetPayoff(t,e){t.payoff=e.payoff,t.completed=!1}static Populate(t,e){const i=e.narratives[t.narrative].variations[t.narrativeVariation];uu.SetPayoff(t,e.narratives[t.narrative]),uu.SelectItemsForLevel(t,i),uu.AssignItemsToHidingSpots(t,e,i.hiddenitems)}CompleteLevel(t=this._currentLocation){var e,i,n;const r=this._locations[t];if(void 0===r)throw new Error(`Cannot find location with ID "${t}"`);r.completed||(r.completed=!0,this._onboarding.complete||(this._onboarding.complete=!0,null===(e=Pu.instance.analytics)||void 0===e||e.event("tutorial_complete","lunas-adventures")),PubSub.publishSync(_l,r),null===(i=Pu.instance.analytics)||void 0===i||i.event([r.id,r.narrative,r.narrativeVariation].join("_"),"LevelCompleted"),null===(n=Pu.instance.analytics)||void 0===n||n.event("level_up","lunas-adventures",[r.id,r.narrative,r.narrativeVariation].join("_"))),this.Save()}ReturnItem(t){var e,i,n;const r=this._locations[this._currentLocation],o=r.items[t];if(void 0===o)throw new Error(`Cannot find item with ID "${t}"`);if(!o.returned){o.returned=!0,PubSub.publishSync(gl,o);const t=Object.values(r.items).reduce((t,e)=>e.returned?t+1:t,0);null===(e=Pu.instance.analytics)||void 0===e||e.event([r.id,r.narrative,r.narrativeVariation].join("_"),"ItemReturned",o.id,t),null===(i=Pu.instance.analytics)||void 0===i||i.event("select_content","lunas-adventures",[r.id,o.id].join("_"))}Object.values(r.items).every(t=>void 0!==t&&t.returned)&&(r.allItemsReturned||(r.allItemsReturned=!0,PubSub.publishSync(ml,r),null===(n=Pu.instance.analytics)||void 0===n||n.event([r.id,r.narrative,r.narrativeVariation].join("_"),"AllItemsReturned",r.payoff),uu.Instance.CompleteLevel(r.id)))}SearchHidingSpot(t){var e,i,n,r,o;const s=this._locations[this._currentLocation];let a,l;if(a=s.hidingSpots[t],void 0===a)throw new Error(`Cannot find hiding spot with ID "${t}"`);if(void 0!==a.itemID&&(l=s.items[a.itemID]),a.searched||(a.searched=!0),PubSub.publishSync(ll,a),null===(e=Pu.instance.analytics)||void 0===e||e.event([s.id,s.narrative,s.narrativeVariation].join("_"),"HidingSpotSearched",a.id),null===(i=Pu.instance.analytics)||void 0===i||i.event("select_content","lunas-adventures",[s.id,a.id].join("_")),void 0!==l){if(!l.found){l.found=!0,PubSub.publishSync(hl,l);const t=Object.values(s.items).reduce((t,e)=>e.found?t+1:t,0);null===(n=Pu.instance.analytics)||void 0===n||n.event([s.id,s.narrative,s.narrativeVariation].join("_"),"ItemFound",l.id,t),null===(r=Pu.instance.analytics)||void 0===r||r.event("select_content","lunas-adventures",[s.id,l.id].join("_"))}Object.values(s.items).every(t=>void 0!==t&&t.found)&&(s.allItemsFound||(s.allItemsFound=!0,PubSub.publishSync(ul,s),null===(o=Pu.instance.analytics)||void 0===o||o.event([s.id,s.narrative,s.narrativeVariation].join("_"),"AllItemsFound")))}}GoToExterior(t=this._currentLocation){var e,i,n;const r=null!==(e=this._locations[t])&&void 0!==e?e:uu.CreateEmptyState(t),o=ol.locations[r.id];if(r.completed)if(r.allLevelsCompleted)uu.SelectRandomNarrativeVariation(r,o);else{uu.SelectNextNarrativeVariation(r,o)||uu.SelectRandomNarrativeVariation(r,o)}else Object.values(r.items).find(t=>t.found)?null===(i=Pu.instance.analytics)||void 0===i||i.event([t,r.narrative,r.narrativeVariation].join("_"),"ResumeLevel"):null===(n=Pu.instance.analytics)||void 0===n||n.event([t,r.narrative,r.narrativeVariation].join("_"),"StartLevel");this._currentLocation=t,this._locations[t]=r,PubSub.publishSync(a.STATE_LOAD_STATE,new a.StateToken({id:Lh.GetIdForState(t,r.narrative,r.narrativeVariation),data:r},"Load_Interstitial",...Ga))}GoToInterior(t){var e,i,n,r;let o=!1,s=!1;void 0===t&&(t=this._currentLocation,o=!0);const l=null!==(e=this._locations[t])&&void 0!==e?e:uu.CreateEmptyState(t),h=ol.locations[l.id];if(-1===l.narrative||-1===l.narrativeVariation)uu.SelectFirstNarrativeVariation(l,h),s=!0;else if(l.completed)if(l.allLevelsCompleted)uu.SelectRandomNarrativeVariation(l,h);else{uu.SelectNextNarrativeVariation(l,h)||uu.SelectRandomNarrativeVariation(l,h)}this._currentLocation=t,this._locations[t]=l,l.allItemsFound?(null===(i=Pu.instance.analytics)||void 0===i||i.event([t,l.narrative,l.narrativeVariation].join("_"),"ReturnItems"),PubSub.publishSync(a.STATE_LOAD_STATE,new a.StateToken({id:hu.GetIdForState(t,l.narrative,l.narrativeVariation),data:l},"Load_Interstitial",...Ga))):(null===(n=Pu.instance.analytics)||void 0===n||n.event([t,l.narrative,l.narrativeVariation].join("_"),"RecieveQuest"),null===(r=Pu.instance.analytics)||void 0===r||r.event("startLevel","lunas-adventures",[t,l.narrative,l.narrativeVariation].join("_")),PubSub.publishSync(a.STATE_LOAD_STATE,new a.StateToken({id:Yh.GetIdForState(t,l.narrative,l.narrativeVariation),data:Object.assign(Object.assign({},l),{wasContinue:o,firstTime:s})},"Load_Interstitial",...Ga)))}GoToLevelSelect(){var t,e;const i=this._locations[this._currentLocation];i&&(null===(t=Pu.instance.analytics)||void 0===t||t.event([this._currentLocation,i.narrative,i.narrativeVariation].join("_"),"ReturnToLevelSelect"),null===(e=Pu.instance.analytics)||void 0===e||e.event("endLevel","lunas-adventures",[i.id,i.narrative,i.narrativeVariation].join("_"))),PubSub.publishSync(a.STATE_LOAD_STATE,new a.StateToken("State_CitySelect","Load_Interstitial",...Ga))}DEBUG_ForceState(t,e=-1,i=-1){var n;const r=null!==(n=this._locations[t])&&void 0!==n?n:uu.CreateEmptyState(t),o=ol.locations[r.id];return r.narrative=e,r.narrativeVariation=i,uu.Populate(r,o),this._currentLocation=t,this._locations[t]=r,this.Save(),r}Save(){Pu.instance.saveManager.storeString("locations",JSON.stringify(this._locations),1),Pu.instance.saveManager.storeString("onboarding",JSON.stringify(this._onboarding),1)}Load(){try{this._locations=JSON.parse(Pu.instance.saveManager.readString("locations",JSON.stringify(this._locations),1)),this._onboarding=JSON.parse(Pu.instance.saveManager.readString("onboarding",JSON.stringify(this._onboarding),1))}catch(t){console.error("Error loading saved state. Resetting.",t),this.Reset()}}Reset(){this._locations={},this._onboarding={complete:!1},this.Save()}}class cu extends PIXI.Container{constructor(t){super(),this._active=!0,this._data=t,PubSub.subscribe(a.PLAY_CAPTION,this.onPlayCaptionRequested.bind(this)),PubSub.subscribe(a.STOP_CAPTION,this.onStopCaptionRequested.bind(this))}setRenderer(t){void 0!==this._renderer&&this.removeChild(this._renderer),this._renderer=t,this._renderer.visible=this._active,this.addChild(this._renderer),void 0===this._player?this._player=new Na(this._data,this._renderer):this._player.renderer=this._renderer}get active(){return this._active}set active(t){this._active=t,void 0!==this._renderer&&(this._renderer.visible=this._active)}update(t){void 0!==this._player&&!0===this._active&&this._player.update(t)}playCaption(t,e=0,i){void 0!==this._player&&this._player.start(t,e,i)}stopCaption(){void 0!==this._player&&this._player.stop()}onResize(t){void 0!==this._renderer&&this._renderer.onResize(t)}onPlayCaptionRequested(t,e){this.playCaption(e.id,e.start,e.args)}onStopCaptionRequested(t,e){this.stopCaption()}}class du extends PIXI.Container{start(){}stop(){}lineBegin(t){}lineEnd(){}onResize(t){this._size=t}}class pu extends du{constructor(t,e=20){super(),this._bg=new PIXI.Sprite(PIXI.Texture.WHITE),this._bg.anchor.set(.5,0),this._bg.height=60,this._bg.tint=0,this._bg.alpha=0,this.addChild(this._bg),this._text=new PIXI.extras.BitmapText("",{font:{name:t,size:e}}),this._text.alpha=0,this._text.visible=!1,this.addChild(this._text)}start(){this._text.visible=!0,this._bg.visible=!0,this.killTween(this._textTween),this.killTween(this._bgTween),this._textTween=new u.TweenLite(this._text,.25,{alpha:1,ease:Sl.easeInOut}),this._bgTween=new u.TweenLite(this._bg,.15,{alpha:.6,ease:Sl.easeInOut}),super.start()}stop(){this.killTween(this._textTween),this.killTween(this._bgTween),this._textTween=new u.TweenLite(this._text,.25,{alpha:0,ease:Sl.easeInOut,onComplete:()=>{this._text.visible=!1}}),this._bgTween=new u.TweenLite(this._bg,.25,{delay:.25,alpha:0,ease:Sl.easeInOut,onComplete:()=>{this._bg.visible=!1}}),super.stop()}lineBegin(t){super.lineBegin(t),this._text.text=t.content,this.onResize(this._size)}lineEnd(){super.lineEnd()}onResize(t){super.onResize(t),this._bg.width=this._size.x,this._bg.position.set(.5*this._size.x,0),this._text.maxWidth=2*this._size.x,this._text.position.set(.5*(this._size.x-this._text.width),.5*(this._bg.height-this._text.height))}killTween(t){void 0!==t&&t.kill()}}class fu extends PIXI.Container{constructor(){super(),this._animPerc=0,this._corners=new Array(4);for(let t=0;t<this._corners.length;++t)this._corners[t]=a.PixiUtils.makeSprite("keyboard-focus",Xa),this._corners[t].rotation=t*Math.PI*.5,this.addChild(this._corners[t]);this.hide(void 0,!0)}get target(){return this._target}show(t){this.killTweens(),this._target=t,this.redraw(),this._tweenAlpha=u.TweenLite.to(this,.25,{alpha:1,ease:Sl.easeInOut}),this._animPerc=0,this._tweenLoop=new l.TimelineLite({repeat:-1,onUpdate:this.updateCorners.bind(this)}),this._tweenLoop.to(this,.5,{animPerc:1,ease:u.Power4.easeOut}),this._tweenLoop.to(this,.5,{animPerc:0,ease:u.Power4.easeIn})}hide(t,e=!1){this.killTweens(),this._target=void 0,this._tweenAlpha=u.TweenLite.to(this,e?0:.1,{alpha:0,ease:Sl.easeInOut,onComplete:t})}redraw(){requestAnimationFrame(()=>{if(void 0!==this._target){this.position.copy(this.parent.worldTransform.applyInverse(this._target.getFocusPosition()));const t=this.parent.worldTransform.applyInverse(this._target.getFocusSize());for(let e=0;e<this._corners.length;++e)this._corners[e].x=.5*t.x*(1===e||2===e?1:-1),this._corners[e].y=.5*t.y*(0===Math.floor(e/2)?-1:1)}})}destroy(t){this.killTweens(),super.destroy(t)}killTweens(){void 0!==this._tweenLoop&&this._tweenLoop.kill(),void 0!==this._tweenAlpha&&this._tweenAlpha.kill()}get animPerc(){return this._animPerc}set animPerc(t){this._animPerc=t}updateCorners(){for(const t of this._corners)t.anchor.set(.5+.15*this._animPerc)}}class gu extends a.Popup{init(t){super.init(t),this.addChild(a.PixiUtils.makeText("Paused","lunaFont",36,a.Colour.WHITE.toHex()))}AnimateIn(t){t()}AnimateOut(t){t()}}i(425);class mu extends PIXI.Container{constructor(t,e,i,n){super(),this._clickedSFX="ui_select";const r=Object(uh.makeSprite)(t,["cityselect-1"]);if(r.anchor.copy(r.texture.defaultAnchor),this.position.set(r.texture.defaultAnchor.x*r.width-r.width/2,r.texture.defaultAnchor.y*r.height-r.height/2),this.addChild(r),void 0!==i&&void 0!==e){this._callback=()=>i(e);const t=r.texture.trim.clone();t.x-=r.width*r.texture.defaultAnchor.x,t.y-=r.height*r.texture.defaultAnchor.y,r.hitArea=t,this.interactive=!0,this.buttonMode=!0,this.on("pointertap",()=>this.onClick()),this.on("pointerover",()=>this.pointerOver()),this.on("pointerout",()=>this.pointerOut()),this.on("pointerup",()=>this.pointerUp()),this.on("pointerupoutside",()=>this.pointerOut()),this.on("pointercancel",()=>this.pointerOut()),this.on("pointerdown",()=>this.pointerDown())}this.sprite=r,this._hoverVO=n}onFocusEnd(){this.pointerOut()}getFocusPosition(){return this.sprite.toGlobal(bl.RectUtils.center(this.sprite.hitArea))}getFocusSize(){return bl.RectUtils.size(bl.PixiUtils.getGlobalBounds(this,this.sprite.hitArea.clone()))}onFocusBegin(){this.playHoverVO(),this.pointerOver()}onFocusActivated(){var t;this.interactive&&(this.playClickedSFX(),PubSub.publishSync(fl,void 0),null===(t=this._callback)||void 0===t||t.call(this))}playHoverVO(){void 0!==this._hoverVO&&(Pu.instance.voiceover.playVO(this._hoverVO,{priority:-1}),PubSub.publishSync(fl,void 0))}onClick(){var t;this.playClickedSFX(),PubSub.publishSync(fl,void 0),null===(t=this._callback)||void 0===t||t.call(this)}playClickedSFX(){void 0!==this._clickedSFX&&Pu.instance.audio.play(this._clickedSFX,1,!1,a.AudioCategory.SFX)}pointerDown(){u.TweenLite.to(this.sprite.scale,.15,{x:.95,y:.95,ease:Sl.easeInOut})}pointerUp(){u.TweenLite.to(this.sprite.scale,.15,{x:1.1,y:1.1,ease:Sl.easeInOut})}pointerOut(){u.TweenLite.to(this.sprite.scale,.15,{x:1,y:1,ease:Sl.easeInOut})}pointerOver(){this.playHoverVO(),u.TweenLite.to(this.sprite.scale,.15,{x:1.1,y:1.1,ease:Sl.easeInOut})}}const _u=["cityselect-1"],vu=(a.Colour.WHITE.toHex(),"LATW_1189_1_happy_pacer_jazz_New_Orleans_KK"),yu=[Wa.CITY_SELECT.UI2B,Wa.CITY_SELECT.UI3,Wa.CITY_SELECT.UI4,Wa.CITY_SELECT.UI5,Wa.CITY_SELECT.UI6],bu=a.Random.intBetween(0,yu.length);yu.unshift(...yu.splice(-bu));class xu extends a.State{constructor(){super(...arguments),this.markers=[],this.stamps=[],this.swooshes=[],this._subscriptions=[],this.firstTime=!1}init(t,e){var i;super.init(t,e),this.firstTime=null!==(i=null==e?void 0:e.firstTime)&&void 0!==i&&i,PubSub.publishSync(a.PUSH_KEYBOARD_LAYER,void 0),this.addChildAt(Object(uh.makeSprite)("cityselect/luna_seek_cityselect_v2"),0),this.swooshes.push(this.MakeButton("juneau-swoosh")),this.swooshes.push(this.MakeButton("paris-swoosh")),this.swooshes.push(this.MakeButton("rio-swoosh")),this.swooshes.push(this.MakeButton("london-swoosh")),this.swooshes.push(this.MakeButton("neworleans-swoosh")),this.stamps.push(this.MakeButton("juneau-stamp","juneau",Wa.CITY_SELECT.UI16ALT)),this.markers.push(this.MakeButton("juneau-marker")),this.stamps.push(this.MakeButton("paris-stamp","paris",Wa.CITY_SELECT.UI17)),this.markers.push(this.MakeButton("paris-marker")),this.stamps.push(this.MakeButton("rio-stamp","rio",Wa.CITY_SELECT.UI19)),this.markers.push(this.MakeButton("rio-marker")),this.stamps.push(this.MakeButton("london-stamp","london",Wa.CITY_SELECT.UI18ALT)),this.markers.push(this.MakeButton("london-marker")),this.stamps.push(this.MakeButton("neworleans-stamp","neworleans",Wa.CITY_SELECT.UI20ALT)),this.markers.push(this.MakeButton("neworleans-marker")),this._subscriptions.push(PubSub.subscribe(fl,this.RestartIdleTimer.bind(this)),PubSub.subscribe(a.GAME_PAUSED,()=>{var t;return null===(t=this.idleTimeline)||void 0===t?void 0:t.kill()}),PubSub.subscribe(a.GAME_UNPAUSED,this.RestartIdleTimer.bind(this)))}destroy(t){var e;this._subscriptions.forEach(PubSub.unsubscribe),null===(e=this.idleTimeline)||void 0===e||e.kill(),super.destroy(t)}animateIn(t){if(t(),uu.Instance.onboarding.complete){if(this.firstTime)Pu.instance.voiceover.playVO([Ya.UI2,.75],a.PlayMode.Append);else{const t=yu.shift();void 0!==t&&(yu.push(t),Pu.instance.voiceover.playVO([t,.75],a.PlayMode.Append))}this.idleTimeline=new Il,this.idleTimeline.delay(5),this.idleTimeline.eventCallback("onRepeat",()=>{const t=yu.shift();void 0!==t&&(yu.push(t),Pu.instance.voiceover.playVO(t,{priority:-2}))}),this.idleTimeline.repeat(-1),this.idleTimeline.repeatDelay(10)}else Pu.instance.voiceover.playVO([Ya.UI2,.75],a.PlayMode.Append);this.stamps.forEach(t=>t.interactive=!1),this.markers.forEach(t=>t.interactive=!1),this.swooshes.forEach(t=>t.interactive=!1),this.animateInTimeline=new l.TimelineLite,this.animateInTimeline.staggerFromTo(this.markers,.75,{pixi:{scaleX:0,scaleY:0}},{pixi:{scaleX:1,scaleY:1},ease:wl.easeOut,onStart:()=>{Pu.instance.audio.play("pluck",1,!1,a.AudioCategory.SFX)}},.075,0,()=>{}).staggerFromTo(this.swooshes,.25,{pixi:{scaleX:0,scaleY:0,alpha:0}},{pixi:{scaleX:1,scaleY:1,alpha:1}},.075,.125).staggerFromTo(this.stamps,.3,{pixi:{scaleX:0,scaleY:0,alpha:0}},{pixi:{scaleX:1,scaleY:1,alpha:1},onStart:()=>{Pu.instance.audio.play("pop-2",1,!1,a.AudioCategory.SFX)}},.075,.175,()=>{this.EnableButtons()}).delay(.5);const e=Pu.instance.audio.getAudioTrack(vu,a.AudioCategory.BGM);null==e||e.setLooped(!0),null==e||e.setVolume(.125),(null==e?void 0:e.isPlaying())?e||Pu.instance.audio.play(vu,.5,!0,a.AudioCategory.BGM):null==e||e.play()}animateOut(t){var e;PubSub.publishSync(a.POP_KEYBOARD_LAYER,void 0),null===(e=this.animateInTimeline)||void 0===e||e.kill(),super.animateOut(t)}onResize(t){super.onResize(t)}EnableButtons(){if(uu.Instance.onboarding.complete)this.stamps.forEach(t=>t.interactive=!0);else{const t=()=>{const t=this.stamps[0];t.interactive=!0,h.TweenMax.to(t,.3,{pixi:{scale:1.1}}).yoyo(!0).repeat(3);const e=Object(uh.makeSprite)("onboarding-arrow",_u);e.rotation=180*PIXI.DEG_TO_RAD,e.anchor.copy(e.texture.defaultAnchor),this.addChild(e),e.position.copy(t.position),e.position.y+=80,u.TweenLite.from(e,.5,{pixi:{alpha:0}}),h.TweenMax.to(e,.5,{pixi:{anchorY:1.1}}).yoyo(!0).repeat(-1)};Pu.instance.skipVO?t():Pu.instance.voiceover.playVO([Ya.O1,.75],a.PlayMode.Append,t)}PubSub.publishSync(a.REGISTER_FOCUSABLES,this.stamps)}OnLevelSelectButtonClicked(t){var e,i;null===(e=Pu.instance.analytics)||void 0===e||e.event("CitySelect","LevelSelectButtonClicked",t),uu.Instance.onboarding.complete||null===(i=Pu.instance.analytics)||void 0===i||i.event("tutorial_begin","lunas-adventures"),this.StartLevel(t)}StartLevel(t){uu.Instance.GoToInterior(t)}MakeButton(t,e,i){return this.addChild(new mu(t,e,this.OnLevelSelectButtonClicked.bind(this),i))}RestartIdleTimer(){var t;null===(t=this.idleTimeline)||void 0===t||t.restart(!0,!0)}}xu.Assets=[new a.AssetMapData("gelPenMedium22",a.AssetType.FONT),..._u.map(t=>new a.AssetMapData(t,a.AssetType.TEXTURE_ATLAS)),new a.TextureAsset("cityselect/luna_seek_cityselect_v2","images/static/cityselect/luna_seek_cityselect_v2.jpg"),new a.AudioAsset("ui_select",a.AudioCategory.SFX),new a.AudioAsset("pluck",a.AudioCategory.SFX),new a.AudioAsset("pop-2",a.AudioCategory.SFX),new a.AudioAsset(vu,a.AudioCategory.BGM),new a.AudioAsset(Wa.CITY_SELECT.UI2B,a.AudioCategory.VO),new a.AudioAsset(Wa.CITY_SELECT.UI3,a.AudioCategory.VO),new a.AudioAsset(Wa.CITY_SELECT.UI4,a.AudioCategory.VO),new a.AudioAsset(Wa.CITY_SELECT.UI5,a.AudioCategory.VO),new a.AudioAsset(Wa.CITY_SELECT.UI6,a.AudioCategory.VO)];class wu extends a.LoadScreen{init(t){super.init(t),void 0===this._bg&&(this._bg=a.PixiUtils.makeSprite("loader-background")),void 0===this._text&&(this._text=a.PixiUtils.makeText("Loading...","gelPenMedium35",35,a.Colour.WHITE.toHex())),void 0===this._spinner&&(this._spinner=a.PixiUtils.makeSprite("loader",Xa)),this._bg.interactive=!0,this._bg.alpha=0,this._text.anchor=new PIXI.Point(.5,1),this._text.alpha=0,this._text.position.set(0,this._size.y/2),this.addChild(this._bg),this.addChild(this._text),this.addChild(this._spinner)}animateIn(t){Pu.instance.voiceover.stopVO(),PubSub.publishSync(a.STOP_CAPTION,void 0),this._bg.alpha=0;const e=new l.TimelineLite;e.to([this._bg,this._text,this._spinner],1,{alpha:1,ease:Sl.easeInOut}),e.call(t),this._loop=h.TweenMax.fromTo(this._spinner,.75,{pixi:{rotation:0}},{pixi:{rotation:-360},ease:u.Linear.easeNone}).repeat(-1)}animateOut(t){const e=new l.TimelineLite;e.to([this._bg,this._text,this._spinner],1,{alpha:0,ease:Sl.easeInOut}),e.call(()=>{void 0!==this._loop&&this._loop.kill()}),e.call(t)}onLoadComplete(t){if(Pu.instance.paused){const e=()=>{PubSub.unsubscribe(e),t()};PubSub.subscribe(a.GAME_UNPAUSED,e)}else t()}onResize(t){super.onResize(t),this._bg,void 0!==this._text&&this._text.position.set(0,this._size.y/2)}}class Tu extends a.State{constructor(){super(),this.onPlayBtnPressed=this.onPlayBtnPressed.bind(this),this._bg=Object(uh.makeSprite)("splash/splash-background"),this.addChild(this._bg),this.addChild(Object(uh.makeSprite)("splash/splash-luna")).position.set(-317.5,246),this.addChild(Object(uh.makeSprite)("splash/splash-logo")).position.set(-252.325,-174.75),this._playBtn=new dh(this.onPlayBtnPressed,"splash/splash-play",void 0,void 0,"ui_click"),this._playBtn.alpha=0,this._playBtn.interactive=!1,this._playBtn.position.set(.25,64.25),this.addChild(this._playBtn)}init(t,e){var i;super.init(t,e),PubSub.publishSync(a.PUSH_KEYBOARD_LAYER,void 0),null===(i=Pu.instance.analytics)||void 0===i||i.event("startGame","lunas-adventures")}animateIn(t){const e=window.AudioContext||window.webkitAudioContext;if(e){"running"===(new e).state&&Pu.instance.voiceover.playVO(Wa.LANDING_PAGE.UI1)}const i=new l.TimelineLite;i.to(this._playBtn,.5,{alpha:1}),i.call(()=>{this._playBtn.interactive=!0,PubSub.publishSync(a.REGISTER_FOCUSABLE,this._playBtn),this._bg.interactive=!0,this._bg.once(a.Input.Events.POINTER_TAP,this.onPlayBtnPressed)}),i.call(t)}animateOut(t){PubSub.publishSync(a.POP_KEYBOARD_LAYER,void 0),this._playBtn.interactive=!1,this._bg.off(a.Input.Events.POINTER_TAP,this.onPlayBtnPressed),(new l.TimelineLite).to(this._playBtn,.5,{alpha:0}).call(t)}onPlayBtnPressed(){var t,e;null===(t=Pu.instance.analytics)||void 0===t||t.event("LandingPage","StartButtonClicked"),null===(e=Pu.instance.analytics)||void 0===e||e.event("clickPlay","lunas-adventures"),PubSub.publishSync(a.UNREGISTER_FOCUSABLE,this._playBtn);const i=Pu.instance.audio.getAudioTrack("LATW_1189_1_happy_pacer_jazz_New_Orleans_KK",a.AudioCategory.BGM);null==i||i.setLooped(!0),null==i||i.setVolume(.125),(null==i?void 0:i.isPlaying())?i||Pu.instance.audio.play("LATW_1189_1_happy_pacer_jazz_New_Orleans_KK",.5,!0,a.AudioCategory.BGM):null==i||i.play(),PubSub.publishSync(a.STATE_LOAD_STATE,new a.StateToken({id:"State_CitySelect",data:{firstTime:!0}},"Load_Interstitial",...Ga))}}class Su extends PIXI.Container{constructor(){super(),this._letters=new Array(Su.TEXT.length);let t=0,e=0,i=0;for(let e=0;e<this._letters.length;++e)this._letters[e]=new PIXI.extras.BitmapText(Su.TEXT.charAt(e),{font:"lunaFont",align:"left",tint:a.Colour.BLACK.toHex()}),this._letters[e].anchor=new PIXI.Point(0,.5),t+=this._letters[e].textWidth,"."===this._letters[e].text&&(t+=this._letters[e].textWidth);e=.5*t;for(let t=0;t<this._letters.length;++t)this._letters[t].position.set(-e+i,0),i+=this._letters[t].textWidth,"."===this._letters[t].text&&(this._letters[t].position.x+=this._letters[t].textWidth,i+=this._letters[t].textWidth),this.addChild(this._letters[t]);this.visible=!1}animateIn(t){for(let t=0;t<this._letters.length;++t)this._letters[t].position.y=40,this._letters[t].alpha=0;this.visible=!0;const e=new l.TimelineLite;for(let t=0;t<this._letters.length;++t)e.to(this._letters[t],.5,{y:0,ease:xl.easeOut},.05*t),e.to(this._letters[t],.5,{alpha:1,ease:Sl.easeOut},.05*t);e.add(this.animateLoop.bind(this)),e.add(t)}animateOut(t){void 0!==this._loop&&this._loop.kill();const e=new l.TimelineLite;for(let t=0;t<this._letters.length;++t)e.to(this._letters[t],.3,{y:10,ease:xl.easeIn},.05*t),e.to(this._letters[t],.3,{alpha:0,ease:Sl.easeIn},.05*t);e.call(()=>this.visible=!1),e.call(t)}animateLoop(){this._loop=new l.TimelineLite({repeat:-1});for(let t=0;t<this._letters.length;++t)this._loop.add(u.TweenLite.to(this._letters[t].position,.3,{y:-15,ease:Sl.easeInOut}),.075*t),this._loop.add(u.TweenLite.to(this._letters[t].position,1.75,{y:0,ease:wl.easeOut}),.075*t+.3)}}Su.TEXT="Loading...";class Eu extends a.SplashScreen{constructor(){super()}init(t){super.init(t),PubSub.publishSync(a.PUSH_KEYBOARD_LAYER,void 0),this._bg=Object(uh.makeSprite)("splash/splash-background"),this._bg.interactive=!0,this.addChild(this._bg),this.addChild(Object(uh.makeSprite)("splash/splash-luna")).position.set(-317.5,246),this.addChild(Object(uh.makeSprite)("splash/splash-logo")).position.set(-252.325,-174.75),this._loadingText=new Su,this._loadingText.position.set(0,64.25),this.addChild(this._loadingText)}onResize(t){var e;super.onResize(t),null===(e=this._versionText)||void 0===e||e.position.set(t.x/2-10,t.y/2-10)}animateIn(t){this._loadingText.animateIn(t)}animateOut(t){PubSub.publishSync(a.POP_KEYBOARD_LAYER,void 0),u.TweenLite.to([this._versionText,this._loadingText],.5,{alpha:0,ease:Sl.easeInOut,onComplete:t})}onLoadComplete(t){t()}}class Pu extends a.Application{constructor(){super({transparent:!0,antialias:!0,preserveDrawingBuffer:!(!PIXI.utils.isMobile.android.device&&!PIXI.utils.isMobile.amazon.device)||void 0}),this._paused=!1,this._masterVolume=1,this._loaded=!1,PIXI.settings.FILTER_RESOLUTION=this.renderer.resolution}static get instance(){return void 0===a.Application._instance&&(a.Application._instance=new Pu),a.Application.instance}get analytics(){return this._springroll.getPlugin("GoogleAnalytics")}get paused(){return this._paused}get skipVO(){return!1===this._captions.active&&(0===this.audio.getCategoryVolume(a.AudioCategory.VO)||0===this.audio.masterVolume)}init(){this._stateManager.debug=!1,this._loadManager.debug=!1,this._popupManager.debug=!1,this._saveManager.debug=!1,this._voiceoverManager.debug=!1,this._audioManager.debug=!1,super.init(),this.resizer.sizeMax=new PIXI.Point(1664,768),this.InitSpringroll(),this.InitCaptions(),this.hitAreaRenderer.interval=2,PubSub.publishSync(a.SET_KEYBOARD_ENABLED,!0),this._webEventsManager.registerVisibilityChangedCallback(t=>this.onPause(!t))}update(){super.update();const t=PIXI.ticker.shared.elapsedMS/1e3;this._captions.update(t)}onResize(t=0){super.onResize(t),(new l.TimelineLite).call(()=>{var t;null===(t=this._captions)||void 0===t||t.onResize(this.resizer.getSize())},void 0,this,t)}createSplashScreen(){return new Eu}createAssetMap(){a.AssetMap.addAssetGroup(a.SplashScreen.NAME,[new a.TextureAsset("splash/splash-background","images/static/splash/splash-background.jpg"),new a.AssetMapData("splash/splash-logo",a.AssetType.PNG),new a.AssetMapData("splash/splash-luna",a.AssetType.PNG),new a.AssetMapData("gelPenMedium35",a.AssetType.FONT),new a.AssetMapData("lunaFont",a.AssetType.FONT)]),a.AssetMap.addAssetGroup("State_Landing",[new a.TextureAsset("splash/splash-background","images/static/splash/splash-background.jpg"),new a.AssetMapData("splash/splash-play",a.AssetType.PNG),new a.AssetMapData("splash/splash-logo",a.AssetType.PNG),new a.AssetMapData("splash/splash-luna",a.AssetType.PNG),new a.AudioAsset("LATW_1189_1_happy_pacer_jazz_New_Orleans_KK",a.AudioCategory.BGM)]),a.AssetMap.addAssetGroup("State_CitySelect",xu.Assets);for(const t of rl)for(let e=ol.locations[t].narratives.length-1;e>=0;e--)for(let i=ol.locations[t].narratives[e].variations.length-1;i>=0;i--)a.AssetMap.addAssetGroup(Yh.GetIdForState(t,e,i),[...Yh.Assets,...Yh.GetAssetsForState(t,e,i)]),a.AssetMap.addAssetGroup(hu.GetIdForState(t,e,i),[...hu.Assets,...hu.GetAssetsForState(t,e,i)]),a.AssetMap.addAssetGroup(Lh.GetIdForState(t,e,i),[...Lh.Assets,...Lh.GetAssetsForState(t,e,i)])}registerLoadingScreens(){this._loadManager.registerLoadScreen("Load_Interstitial",new wu)}registerPopups(){this._popupManager.registerPopup(()=>new gu,"Pause")}registerStates(){this._stateManager.registerState("State_Landing",()=>new Tu),this._stateManager.registerState("State_CitySelect",()=>new xu);for(const t of rl)for(let e=ol.locations[t].narratives.length-1;e>=0;e--)for(let i=ol.locations[t].narratives[e].variations.length-1;i>=0;i--)this._stateManager.registerState(Yh.GetIdForState(t,e,i),()=>new Yh),this._stateManager.registerState(hu.GetIdForState(t,e,i),()=>new hu),this._stateManager.registerState(Lh.GetIdForState(t,e,i),()=>new Lh)}get requiredAssets(){const t=new Array;return Xa.forEach(e=>t.push(new a.AssetMapData(e,a.AssetType.TEXTURE_ATLAS))),t.push(new a.AssetMapData("lunaFont",a.AssetType.FONT)),t.push(new a.AssetMapData("gelPenLight22",a.AssetType.FONT)),t.push(new a.AssetMapData("gelPenMedium22",a.AssetType.FONT)),t.push(new a.AssetMapData("gelPenMedium35",a.AssetType.FONT)),t.push(new a.AssetMapData("gelPenMedium63",a.AssetType.FONT)),t.push(new a.AudioAsset("ui_click",a.AudioCategory.SFX)),t.push(new a.TextureAsset("loader-background","images/static/loader-background.jpg")),t}onLoadRequiredAssetsComplete(){if(super.onLoadRequiredAssetsComplete(),this.stage.addChildAt(new a.Input.KeyboardFocusManager(fu),this.stage.getChildIndex(this._captions)-1),this._captions.setRenderer(new pu("gelPenMedium63",70)),this._captions.onResize(this._size),this._loaded=!0,void 0===Ha)PubSub.publishSync(a.STATE_LOAD_STATE,new a.StateToken("State_Landing",a.SplashScreen.NAME,...a.StateToken.TRANSITION_FIRST_VIEW));else{const t=Ha.split("_"),e=uu.Instance.DEBUG_ForceState(t[2],parseInt(t[3],10),parseInt(t[4],10));if("GameInteriorGiveQuest"===t[1]);else if("GameInteriorReturnItems"===t[1]){for(const t of Object.values(e.items))t.found=!0;e.allItemsFound=!0,e.completed=!1}PubSub.publishSync(a.STATE_LOAD_STATE,new a.StateToken({id:Ha,data:e},a.SplashScreen.NAME,...a.StateToken.TRANSITION_FIRST_VIEW))}}onCaptionsMuted(t){t&&PubSub.publishSync(a.STOP_CAPTION,void 0),this._captions.active=!t}onSoundVolume(t){this._masterVolume=t,this.audio.masterVolume=this._masterVolume}onVOVolume(t){this.audio.setCategoryVolume(a.AudioCategory.VO,t)}onMusicVolume(t){this.audio.setCategoryVolume(a.AudioCategory.BGM,t)}onSFXVolume(t){this.audio.setCategoryVolume(a.AudioCategory.SFX,t)}onPause(t){const e=this._paused;this._paused=t,t&&!e?(PubSub.publishSync(a.GAME_PAUSED,void 0),this._loaded&&PubSub.publishSync(a.SHOW_POPUP,new a.PopupToken("Pause",void 0,"static",!1)),this.audio.masterVolume=0,PIXI.ticker.shared.stop(),h.TweenMax.pauseAll()):!t&&e&&(this.audio.masterVolume=this._masterVolume,h.TweenMax.resumeAll(),PIXI.ticker.shared.start(),PubSub.publishSync(a.HIDE_POPUP,"Pause"),PubSub.publishSync(a.GAME_UNPAUSED,void 0))}InitCaptions(){this._captions=new cu(sl),this.stage.addChild(this._captions)}InitSpringroll(){this._springroll=new Ra({features:{captions:!0,music:!0,musicVolume:!0,sfx:!0,sfxVolume:!0,sound:!0,soundVolume:!0,vo:!0,voVolume:!0}}),Ra.uses(new Va),this._springroll.state.pause.subscribe(this.onPause.bind(this)),this._springroll.state.captionsMuted.subscribe(this.onCaptionsMuted.bind(this)),this._springroll.state.soundVolume.subscribe(this.onSoundVolume.bind(this)),this._springroll.state.musicVolume.subscribe(this.onMusicVolume.bind(this)),this._springroll.state.voVolume.subscribe(this.onVOVolume.bind(this)),this._springroll.state.sfxVolume.subscribe(this.onSFXVolume.bind(this))}}s.glCore.VertexArrayObject.FORCE_NATIVE=!0,Howler.autoUnlock=!1;const Au=document.createElement("div");Au.setAttribute("id","gameTarget"),document.body.appendChild(Au),Au.appendChild(Pu.instance.view),Pu.instance.init()}]);
//# sourceMappingURL=bundle.js.map