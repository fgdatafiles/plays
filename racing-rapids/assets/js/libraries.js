/*!
* @license PreloadJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.6.3",t.buildDate="Tue, 15 Sep 2015 20:59:37 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;n>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,(function(t){e.call(i,t,r),n&&t.remove()}),s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,o=r.length;o>s;s++)if(r[s]==e){1==o?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var i=this,n=[i];i.parent;)n.push(i=i.parent);var r,s=n.length;for(r=s-1;r>=0&&!t.propagationStopped;r--)n[r]._dispatchEvent(t,1+(0==r));for(r=1;s>r&&!t.propagationStopped;r++)n[r]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;i>s&&!t.immediatePropagationStopped;s++){var o=r[s];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(t){"use strict";function e(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),function(){function t(e,n){function s(t){if(s[t]!==_)return s[t];var e;if("bug-string-char-index"==t)e="a"!="a"[0];else if("json"==t)e=s("json-stringify")&&s("json-parse");else{var i,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var h=n.stringify,u="function"==typeof h&&y;if(u){(i=function(){return 1}).toJSON=i;try{u="0"===h(0)&&"0"===h(new o)&&'""'==h(new a)&&h(m)===_&&h(_)===_&&h()===_&&"1"===h(i)&&"[1]"==h([i])&&"[null]"==h([_])&&"null"==h(null)&&"[null,null,null]"==h([_,m,null])&&h({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===h(null,i)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new l(-1))}catch(t){u=!1}}e=u}if("json-parse"==t){var c=n.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){var d=5==(i=c(r)).a.length&&1===i.a[0];if(d){try{d=!c('"\t"')}catch(t){}if(d)try{d=1!==c("01")}catch(t){}if(d)try{d=1!==c("1.")}catch(t){}}}}catch(t){d=!1}e=d}}return s[t]=!!e}e||(e=r.Object()),n||(n=r.Object());var o=e.Number||r.Number,a=e.String||r.String,h=e.Object||r.Object,l=e.Date||r.Date,u=e.SyntaxError||r.SyntaxError,c=e.TypeError||r.TypeError,d=e.Math||r.Math,p=e.JSON||r.JSON;"object"==typeof p&&p&&(n.stringify=p.stringify,n.parse=p.parse);var f,g,_,v=h.prototype,m=v.toString,y=new l(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(t){}if(!s("json")){var x="[object Function]",b="[object Number]",T="[object String]",E="[object Array]",S=s("bug-string-char-index");if(!y)var w=d.floor,A=[0,31,59,90,120,151,181,212,243,273,304,334],P=function(t,e){return A[e]+365*(t-1970)+w((t-1969+(e=+(e>1)))/4)-w((t-1901+e)/100)+w((t-1601+e)/400)};if((f=v.hasOwnProperty)||(f=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=m?f=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,f=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,f.call(this,t)}),g=function(t,e){var n,r,s,o=0;for(s in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)f.call(r,s)&&o++;return n=r=null,o?g=2==o?function(t,e){var i,n={},r=m.call(t)==x;for(i in t)r&&"prototype"==i||f.call(n,i)||!(n[i]=1)||!f.call(t,i)||e(i)}:function(t,e){var i,n,r=m.call(t)==x;for(i in t)r&&"prototype"==i||!f.call(t,i)||(n="constructor"===i)||e(i);(n||f.call(t,i="constructor"))&&e(i)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(t,e){var n,s,o=m.call(t)==x,a=!o&&"function"!=typeof t.constructor&&i[typeof t.hasOwnProperty]&&t.hasOwnProperty||f;for(n in t)o&&"prototype"==n||!a.call(t,n)||e(n);for(s=r.length;n=r[--s];a.call(t,n)&&e(n));}),g(t,e)},!s("json-stringify")){var C={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},L=function(t,e){return("000000"+(e||0)).slice(-t)},R=function(t){for(var e='"',i=0,n=t.length,r=!S||n>10,s=r&&(S?t.split(""):t);n>i;i++){var o=t.charCodeAt(i);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=C[o];break;default:if(32>o){e+="\\u00"+L(2,o.toString(16));break}e+=r?s[i]:t.charAt(i)}}return e+'"'},O=function(t,e,i,n,r,s,o){var a,h,l,u,d,p,v,y,x,S,A,C,M,I,D,j;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if("[object Date]"!=(h=m.call(a))||f.call(a,"toJSON"))"function"==typeof a.toJSON&&(h!=b&&h!=T&&h!=E||f.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&1/0>a){if(P){for(d=w(a/864e5),l=w(d/365.2425)+1970-1;P(l+1,0)<=d;l++);for(u=w((d-P(l,0))/30.42);P(l,u+1)<=d;u++);d=1+d-P(l,u),v=w((p=(a%864e5+864e5)%864e5)/36e5)%24,y=w(p/6e4)%60,x=w(p/1e3)%60,S=p%1e3}else l=a.getUTCFullYear(),u=a.getUTCMonth(),d=a.getUTCDate(),v=a.getUTCHours(),y=a.getUTCMinutes(),x=a.getUTCSeconds(),S=a.getUTCMilliseconds();a=(0>=l||l>=1e4?(0>l?"-":"+")+L(6,0>l?-l:l):L(4,l))+"-"+L(2,u+1)+"-"+L(2,d)+"T"+L(2,v)+":"+L(2,y)+":"+L(2,x)+"."+L(3,S)+"Z"}else a=null;if(i&&(a=i.call(e,t,a)),null===a)return"null";if("[object Boolean]"==(h=m.call(a)))return""+a;if(h==b)return a>-1/0&&1/0>a?""+a:"null";if(h==T)return R(""+a);if("object"==typeof a){for(I=o.length;I--;)if(o[I]===a)throw c();if(o.push(a),A=[],D=s,s+=r,h==E){for(M=0,I=a.length;I>M;M++)C=O(M,a,i,n,r,s,o),A.push(C===_?"null":C);j=A.length?r?"[\n"+s+A.join(",\n"+s)+"\n"+D+"]":"["+A.join(",")+"]":"[]"}else g(n||a,(function(t){var e=O(t,a,i,n,r,s,o);e!==_&&A.push(R(t)+":"+(r?" ":"")+e)})),j=A.length?r?"{\n"+s+A.join(",\n"+s)+"\n"+D+"}":"{"+A.join(",")+"}":"{}";return o.pop(),j}};n.stringify=function(t,e,n){var r,s,o,a;if(i[typeof e]&&e)if((a=m.call(e))==x)s=e;else if(a==E){o={};for(var h,l=0,u=e.length;u>l;h=e[l++],((a=m.call(h))==T||a==b)&&(o[h]=1));}if(n)if((a=m.call(n))==b){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==T&&(r=n.length<=10?n:n.slice(0,10));return O("",((h={})[""]=t,h),s,o,r,"",[])}}if(!s("json-parse")){var M,I,D=a.fromCharCode,j={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},F=function(){throw M=I=null,u()},k=function(){for(var t,e,i,n,r,s=I,o=s.length;o>M;)switch(r=s.charCodeAt(M)){case 9:case 10:case 13:case 32:M++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=S?s.charAt(M):s[M],M++,t;case 34:for(t="@",M++;o>M;)if(32>(r=s.charCodeAt(M)))F();else if(92==r)switch(r=s.charCodeAt(++M)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=j[r],M++;break;case 117:for(e=++M,i=M+4;i>M;M++)(r=s.charCodeAt(M))>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||F();t+=D("0x"+s.slice(e,M));break;default:F()}else{if(34==r)break;for(r=s.charCodeAt(M),e=M;r>=32&&92!=r&&34!=r;)r=s.charCodeAt(++M);t+=s.slice(e,M)}if(34==s.charCodeAt(M))return M++,t;F();default:if(e=M,45==r&&(n=!0,r=s.charCodeAt(++M)),r>=48&&57>=r){for(48==r&&((r=s.charCodeAt(M+1))>=48&&57>=r)&&F(),n=!1;o>M&&((r=s.charCodeAt(M))>=48&&57>=r);M++);if(46==s.charCodeAt(M)){for(i=++M;o>i&&((r=s.charCodeAt(i))>=48&&57>=r);i++);i==M&&F(),M=i}if(101==(r=s.charCodeAt(M))||69==r){for((43==(r=s.charCodeAt(++M))||45==r)&&M++,i=M;o>i&&((r=s.charCodeAt(i))>=48&&57>=r);i++);i==M&&F(),M=i}return+s.slice(e,M)}if(n&&F(),"true"==s.slice(M,M+4))return M+=4,!0;if("false"==s.slice(M,M+5))return M+=5,!1;if("null"==s.slice(M,M+4))return M+=4,null;F()}return"$"},N=function(t){var e,i;if("$"==t&&F(),"string"==typeof t){if("@"==(S?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=k());i||(i=!0))i&&(","==t?"]"==(t=k())&&F():F()),","==t&&F(),e.push(N(t));return e}if("{"==t){for(e={};"}"!=(t=k());i||(i=!0))i&&(","==t?"}"==(t=k())&&F():F()),(","==t||"string"!=typeof t||"@"!=(S?t.charAt(0):t[0])||":"!=k())&&F(),e[t.slice(1)]=N(k());return e}F()}return t},B=function(t,e,i){var n=U(t,e,i);n===_?delete t[e]:t[e]=n},U=function(t,e,i){var n,r=t[e];if("object"==typeof r&&r)if(m.call(r)==E)for(n=r.length;n--;)B(r,n,i);else g(r,(function(t){B(r,t,i)}));return i.call(t,e,r)};n.parse=function(t,e){var i,n;return M=0,I=""+t,i=N(k()),"$"!=k()&&F(),M=I=null,e&&m.call(e)==x?U(((n={})[""]=i,n),"",e):i}}}return n.runInContext=t,n}var e="function"==typeof define&&define.amd,i={function:!0,object:!0},n=i[typeof exports]&&exports&&!exports.nodeType&&exports,r=i[typeof window]&&window||this,s=n&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!s||s.global!==s&&s.window!==s&&s.self!==s||(r=s),n&&!e)t(r,n);else{var o=r.JSON,a=r.JSON3,h=!1,l=t(r,r.JSON3={noConflict:function(){return h||(h=!0,r.JSON=o,r.JSON3=a,o=a=null),l}});r.JSON={parse:l.parse,stringify:l.stringify}}e&&define((function(){return l}))}.call(this),function(){var t={appendToHead:function(e){t.getHead().appendChild(e)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]}};createjs.DomUtils=t}(),function(){var t={parseXML:function(t,e){var i=null;try{if(window.DOMParser)i=(new DOMParser).parseFromString(t,e)}catch(t){}if(!i)try{(i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(t)}catch(t){i=null}return i},parseJSON:function(t){if(null==t)return null;try{return JSON.parse(t)}catch(t){throw t}}};createjs.DataUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var n=new t;return n.src=e,n}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var n,r=e.indexOf("?");return r>-1&&(e=e.substr(0,r)),t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},formatQueryString:function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var n in t)i.push(n+"="+escape(t[n]));return e&&(i=i.concat(e)),i.join("&")},buildPath:function(t,e){if(null==e)return t;var i=[],n=t.indexOf("?");if(-1!=n){var r=t.slice(n+1);i=i.concat(r.split("&"))}return-1!=n?t.slice(0,n)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},isCrossDomain:function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");return i.href=location.href,""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname)},isLocal:function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},isBinary:function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},isImageTag:function(t){return t instanceof HTMLImageElement},isAudioTag:function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},isVideoTag:function(t){return!!window.HTMLVideoElement&&t instanceof HTMLVideoElement},isText:function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}}};createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),i=this;e instanceof Function?e((function(t){i._result=t,i._sendComplete()})):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}}else this._handleError()},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:return new Error(t);case 0:return this._getResponse()?null:new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,e&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var r=0,o=s.ACTIVEX_VERSIONS.length;o>r;r++){var a=s.ACTIVEX_VERSIONS[r];try{n=new ActiveXObject(a);break}catch(t){}}if(null==n)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var h;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)n.setRequestHeader(l,i[l]);return n instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(n.withCredentials=t.withCredentials),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(t,e,i)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;e.init=function(t,e,i){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this._paused=!1,this._basePath=e,this._crossOrigin=i,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY=createjs.AbstractLoader.BINARY,i.CSS=createjs.AbstractLoader.CSS,i.IMAGE=createjs.AbstractLoader.IMAGE,i.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,i.JSON=createjs.AbstractLoader.JSON,i.JSONP=createjs.AbstractLoader.JSONP,i.MANIFEST=createjs.AbstractLoader.MANIFEST,i.SOUND=createjs.AbstractLoader.SOUND,i.VIDEO=createjs.AbstractLoader.VIDEO,i.SVG=createjs.AbstractLoader.SVG,i.TEXT=createjs.AbstractLoader.TEXT,i.XML=createjs.AbstractLoader.XML,i.POST=createjs.AbstractLoader.POST,i.GET=createjs.AbstractLoader.GET,e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){var e=this._availableLoaders.indexOf(t);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},e.setUseXHR=function(t){return this.setPreferXHR(t)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var i=!1;if(e){for(;e.length;){var n=e.pop(),r=this.getResult(n);for(s=this._loadQueue.length-1;s>=0;s--)if((o=this._loadQueue[s].getItem()).id==n||o.src==n){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if((o=this._loadQueueBackup[s].getItem()).id==n||o.src==n){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(r)this._disposeItem(this.getItem(n));else for(var s=this._currentLoads.length-1;s>=0;s--){var o=this._currentLoads[s].getItem();if(o.id==n||o.src==n){this._currentLoads.splice(s,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{for(var a in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.preferXHR,this._basePath,this._crossOrigin)}},e.reset=function(){for(var t in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,n=this._loadQueueBackup.length;n>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){this._plugins.push(t);var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,n=e.types.length;n>i;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,n=e.extensions.length;n>i;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null!=t)this._addItem(t,null,i),!1!==e?this.setPaused(!1):this.setPaused(!0);else{var n=new createjs.ErrorEvent("PRELOAD_NO_FILE");this._sendError(n)}},e.loadManifest=function(t,e,n){var r=null,s=null;if(t instanceof Array){if(0==t.length){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(o)}r=t}else if("string"==typeof t)r=[{src:t,type:i.MANIFEST}];else{if("object"!=typeof t){o=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(o)}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){o=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(o)}r=[t]}else void 0!==t.manifest&&(r=t.manifest,s=t.path)}for(var a=0,h=r.length;h>a;a++)this._addItem(r[a],s,n);!1!==e?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var n=i.id;return e&&this._loadedRawResults[n]?this._loadedRawResults[n]:this._loadedResults[n]},e.getItems=function(t){var e=[];for(var i in this._loadItemsById){var n=this._loadItemsById[i],r=this.getResult(i);(!0!==t||null!=r)&&e.push({item:n,result:r,rawResult:this.getResult(i,!0)})}return e},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},e._addItem=function(t,e,i){var n=this._createLoadItem(t,e,i);if(null!=n){var r=this._createLoader(n);null!=r&&("plugins"in r&&(r.plugins=this._plugins),n._loader=r,this._loadQueue.push(r),this._loadQueueBackup.push(r),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT||!0===n.maintainOrder)&&(this._scriptOrder.push(n),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,i){var n=createjs.LoadItem.create(t);if(null==n)return null;var r="",s=i||this._basePath;if(n.src instanceof Object){if(!n.type)return null;if(e){r=e;var o=createjs.RequestUtils.parseURI(e);null==s||o.absolute||o.relative||(r=s+r)}else null!=s&&(r=s)}else{var a=createjs.RequestUtils.parseURI(n.src);a.extension&&(n.ext=a.extension),null==n.type&&(!n.ext&&window.console&&console.error("unable to get extension for "+n.src),n.type=createjs.RequestUtils.getTypeByExtension(n.ext));var h=n.src;if(!a.absolute&&!a.relative)if(e){r=e;o=createjs.RequestUtils.parseURI(e);h=e+h,null==s||o.absolute||o.relative||(r=s+r)}else null!=s&&(r=s);n.src=r+n.src}n.path=r,(void 0===n.id||null===n.id||""===n.id)&&(n.id=h);var l=this._typeCallbacks[n.type]||this._extensionCallbacks[n.ext];if(l){var u=l.callback.call(l.scope,n,this);if(!1===u)return null;!0===u||null!=u&&(n._loader=u),null!=(a=createjs.RequestUtils.parseURI(n.src)).extension&&(n.ext=a.extension)}return this._loadItemsById[n.id]=n,this._loadItemsBySrc[n.src]=n,null==n.crossOrigin&&(n.crossOrigin=this._crossOrigin),n},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var n=this._availableLoaders[i];if(n&&n.canLoadItem(t))return new n(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){var e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(e)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(i),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(e),this._cleanLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem(),n=e.getResult();this._loadedResults[i.id]=n;var r=e.getResult(!0);null!=r&&r!==n&&(this._loadedRawResults[i.id]=r),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(i,e),this._cleanLoadItem(e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var i=0;i<e.length;i++){var n=e[i].item;this._loadItemsBySrc[n.src]=n,this._loadItemsById[n.id]=n,this._loadedResults[n.id]=e[i].result,this._loadedRawResults[n.id]=e[i].rawResult}},e._finishOrderedItem=function(t,e){var i=t.getItem();if(this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT||i.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var n=createjs.indexOf(this._scriptOrder,i);return-1!=n&&(this._loadedScripts[n]=!0===e||i,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var i=this._loadedScripts[e];if(null==i)break;if(!0!==i){var n=this._loadedResults[i.id];i.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(n);var r=i._loader;this._processFinishedLoad(i,r),this._loadedScripts[e]=!0}}},e._processFinishedLoad=function(t,e){if(this._numItemsLoaded++,!this.maintainScriptOrder&&t.type==createjs.LoadQueue.JAVASCRIPT){var i=e.getTag();createjs.DomUtils.appendToHead(i)}this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;var e=t.getItem();if(e.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var i=this._scriptOrder.indexOf(e),n=0;i>n;){if(null==this._loadedScripts[n])return!1;n++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,i=0;e>i;i++)if(this._currentLoads[i]==t){this._currentLoads.splice(i,1);break}},e._cleanLoadItem=function(t){var e=t.getItem();e&&delete e._loader},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,n=0,r=this._currentLoads.length;r>n;n++)i+=this._currentLoads[n].progress;t+=i/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()&&!this._paused){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.TEXT)}(createjs.extend(t,createjs.AbstractLoader),t).canLoadItem=function(t){return t.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=e?document.createElement("style"):document.createElement("link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.CSS},e._formatResult=function(t){if(this._preferXHR){var e=t.getTag();if(e.styleSheet)e.styleSheet.cssText=t.getResult(!0);else{var i=document.createTextNode(t.getResult(!0));e.appendChild(i)}}else e=this._tag;return createjs.DomUtils.appendToHead(e),e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(t)?this._tag=t:createjs.RequestUtils.isImageTag(t.src)?this._tag=t.src:createjs.RequestUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.IMAGE},e.load=function(){if(""!=this._tag.src&&this._tag.complete)this._sendComplete();else{var t=this._item.crossOrigin;1==t&&(t="Anonymous"),null==t||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=t),this.AbstractLoader_load()}},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){var e=this;return function(i){var n=e._tag,r=window.URL||window.webkitURL;if(e._preferXHR)if(r){var s=r.createObjectURL(t.getResult(!0));s?(n.src=s,n.onload=function(){r.revokeObjectURL(this.src),i(this)}):(n.src=t.getItem().src,n.complete?i(n):n.onload=function(){i(this)})}else n.src=t.getItem().src,n.complete?i(n):n.onload=function(){i(this)}}},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSON},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(t){var i=new createjs.ErrorEvent("JSON_FORMAT",null,t);return this._sendError(i),t}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0);for(var i=0,n=this.plugins.length;n>i;i++)e.installPlugin(this.plugins[i]);e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(t){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)||createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(t)||createjs.RequestUtils.isVideoTag(t.src)?(this.setTag(createjs.RequestUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=t;createjs.extend(t,createjs.AbstractMediaLoader)._createTag=function(){return document.createElement("video")},e.canLoadItem=function(t){return t.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){if(t&&t.images){var e=this._manifestQueue=new createjs.LoadQueue;e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images)}},e._handleManifestFileLoad=function(t){var e=t.result;if(null!=e){var i=this.getResult().images,n=i.indexOf(t.item.src);i[n]=e}},e._handleManifestComplete=function(t){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0),"text/xml"),i=t.getTag();return!this._preferXHR&&document.body.contains(i)&&document.body.removeChild(i),null!=e.documentElement?(i.appendChild(e.documentElement),i.style.visibility="visible",i):e},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";!function(t){function e(t,e){return t._priority-e._priority}var i=function(){this._listeners={}},n=i.prototype;n.on=function(t,i,n){if("string"!=typeof t)for(var r in t)this.on(r,t[r],n);else for(var s,o=t.split(" "),a=0,h=o.length;h>a;a++)t=o[a],(s=this._listeners[t])||(s=this._listeners[t]=[]),i._priority=parseInt(n)||0,-1===s.indexOf(i)&&(s.push(i),s.length>1&&s.sort(e));return this},n.off=function(t,e){if(void 0===t||!this._listeners)return this._listeners={},this;if(void 0===this._listeners[t])return this;if(void 0===e)delete this._listeners[t];else for(var i=this._listeners[t],n=0,r=i.length;r>n;n++)if(i[n]===e){i.splice(n,1);break}return this},n.trigger=function(t){"string"==typeof t&&(t={type:t});var e=this._listeners[t.type];if(void 0!==e)for(var i=e.length-1;i>=0;i--)e[i](t)},n.destroy=function(){this._listeners=null},t.BellhopEventDispatcher=i}(window),function(t,e){var i=t.BellhopEventDispatcher,n=function(){i.call(this),this.onReceive=this.receive.bind(this),this.connected=!1,this.name="",this.isChild=!0,this.connecting=!1,this.origin="*",this._sendLater=[],this.supported=null,this.iframe=null},r=i.prototype,s=n.prototype=Object.create(r);s.receive=function(t){if(t.source===this.target){var e=t.data;if("connected"===e){this.connecting=!1,this.connected=!0,this.trigger("connected"),this.isChild||this.target.postMessage(e,this.origin);var i,r=this._sendLater.length;if(r>0){for(i=0;r>i;i++){var s=this._sendLater[i];this.send(s.type,s.data)}this._sendLater.length=0}}else{if(!this.connected)return;try{e=JSON.parse(e,n.reviver)}catch(t){return}"object"==typeof e&&e.type&&this.trigger(e)}}},s.toString=function(){return"[Bellhop '"+this.name+"']"},Object.defineProperty(s,"target",{get:function(){return this.isChild?t.parent:this.iframe.contentWindow}}),s.connect=function(i,n){if(this.connecting)return this;this.disconnect(),this.connecting=!0,this._sendLater||(this._sendLater=[]),this.iframe=i||null;var r=this.isChild=i===e,s=this.target;return this.supported=r?!!s&&t!=s:!!s,this.origin=n===e?"*":n,t.attachEvent?t.attachEvent("onmessage",this.onReceive):t.addEventListener("message",this.onReceive),r&&(t===s?this.trigger("failed"):"complete"===t.document.readyState?s.postMessage("connected",this.origin):t.onload=function(){s.postMessage("connected",this.origin)}.bind(this)),this},s.disconnect=function(){return this.connected=!1,this.connecting=!1,this.origin=null,this.iframe=null,this._sendLater&&(this._sendLater.length=0),this.isChild=!0,t.detachEvent?t.detachEvent("onmessage",this.onReceive):t.removeEventListener("message",this.onReceive),this},s.send=function(t,i){if("string"!=typeof t)throw"The event type must be a string";if(t={type:t},i!==e&&(t.data=i),this.connecting)this._sendLater.push(t);else{if(!this.connected)return this;this.target.postMessage(JSON.stringify(t),this.origin)}return this},s.fetch=function(t,i,n,r){var s=this;if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";r=r!==e&&r;var o=function(t){r&&s.off(t.type,o),i(t)};return this.on(t,o),this.send(t,n),this},s.respond=function(t,i,n){n=n!==e&&n;var r=this,s=function(e){n&&r.off(e.type,s),r.send(t,"function"==typeof i?i():i)};return this.on(t,s),this},s.destroy=function(){r.destroy.call(this),this.disconnect(),this._sendLater=null},n.reviver=function(t,e){if(e&&"string"==typeof e.__classname){var i=o(e.__classname);if(i){var n=new i;if(n.fromJSON)return n.fromJSON(e),n}}return e};var o=function(e){for(var i=e.split("."),n=t;i.length;)if(!(n=n[i.shift()]))return;return n};t.Bellhop=n}(window)}(),
/*!
* @license SoundJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
/**!
 * SoundJS FlashAudioPlugin also includes swfobject (http://code.google.com/p/swfobject/)
 */
this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="0.6.6",t.buildDate="Thu, 10 May 2018 18:47:59 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;i<n;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,(function(t){e.call(i,t,r),n&&t.remove()}),s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,o=r.length;s<o;s++)if(r[s]==e){1==o?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var n=this._listeners;if(!(e||n&&n[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var o,a=s.length;for(o=a-1;o>=0&&!t.propagationStopped;o--)s[o]._dispatchEvent(t,1+(0==o));for(o=1;o<a&&!t.propagationStopped;o++)s[o]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;s<i&&!t.immediatePropagationStopped;s++){var o=r[s];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(t){"use strict";function e(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var n=new t;return n.src=e,n}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[.\/]*?\//i,EXTENSION_PATT:/\/?[^\/]+\.(\w{1,5})$/i,parseURI:function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var n,r=e.indexOf("?");return r>-1&&(e=e.substr(0,r)),t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},formatQueryString:function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var n in t)i.push(n+"="+escape(t[n]));return e&&(i=i.concat(e)),i.join("&")},buildPath:function(t,e){if(null==e)return t;var i=[],n=t.indexOf("?");if(-1!=n){var r=t.slice(n+1);i=i.concat(r.split("&"))}return-1!=n?t.slice(0,n)+"?"+this.formatQueryString(e,i):t+"?"+this.formatQueryString(e,i)},isCrossDomain:function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");return i.href=location.href,""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname)},isLocal:function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},isBinary:function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},isImageTag:function(t){return t instanceof HTMLImageElement},isAudioTag:function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},isVideoTag:function(t){return!!window.HTMLVideoElement&&t instanceof HTMLVideoElement},isText:function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}}};createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this);e instanceof Function?e.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e._resultFormatSuccess=function(t){this._result=t,this._sendComplete()},e._resultFormatFailed=function(t){this._sendError(t)},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var e=window.URL||window.webkitURL,i=t.getResult(!0);t.getTag().src=e.createObjectURL(i)}return t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}}else this._handleError()},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:return new Error(t);case 0:return this._getResponse()?null:new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,e&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var r=0,o=s.ACTIVEX_VERSIONS.length;r<o;r++){var a=s.ACTIVEX_VERSIONS[r];try{n=new ActiveXObject(a);break}catch(t){}}if(null==n)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var h;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)n.setRequestHeader(l,i[l]);return n instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(n.withCredentials=t.withCredentials),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)||createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},e=t.prototype={},i=t;i.create=function(t){if(t instanceof i||t instanceof Object){var e=new createjs.PlayPropsConfig;return e.set(t),e}throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=i}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}var i=t;i.INTERRUPT_ANY="any",i.INTERRUPT_EARLY="early",i.INTERRUPT_LATE="late",i.INTERRUPT_NONE="none",i.PLAY_INITED="playInited",i.PLAY_SUCCEEDED="playSucceeded",i.PLAY_INTERRUPTED="playInterrupted",i.PLAY_FINISHED="playFinished",i.PLAY_FAILED="playFailed",i.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],i.EXTENSION_MAP={m4a:"mp4"},i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?(?:((?:[^\/?]+)\.(\w+))|(?:[^\/?]+))(?:\?((?:(?:[^&]*?[\/=])?(?:((?:(?:[^\/?&=]+)\.(\w+)))\S*?)|\S+))?)?$/,i.defaultInterruptBehavior=i.INTERRUPT_NONE,i.alternateExtensions=[],i.activePlugin=null,i._masterVolume=1,Object.defineProperty(i,"volume",{get:function(){return this._masterVolume},set:function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,n=0,r=e.length;n<r;n++)e[n].setMasterVolume(t)}}),i._masterMute=!1,Object.defineProperty(i,"muted",{get:function(){return this._masterMute},set:function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,n=e.length;i<n;i++)e[i].setMasterMute(t);return!0}}),Object.defineProperty(i,"capabilities",{get:function(){return null==i.activePlugin?null:i.activePlugin._capabilities},set:function(t){return!1}}),i._pluginsRegistered=!1,i._lastID=0,i._instances=[],i._idHash={},i._preloadHash={},i._defaultPlayPropsHash={},i.addEventListener=null,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i.getPreloadHandlers=function(){return{callback:createjs.proxy(i.initLoad,i),types:["sound"],extensions:i.SUPPORTED_EXTENSIONS}},i._handleLoadComplete=function(t){var e=t.target.getItem().src;if(i.preloadHash[e])for(var n=0,r=i._preloadHash[e].length;n<r;n++){var s=i._preloadHash[e][n];if(i._preloadHash[e][n]=!0,i.hasEventListener("fileload"))(t=new createjs.Event("fileload")).src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}},i._handleLoadError=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var n=0,r=i._preloadHash[e].length;n<r;n++){var s=i._preloadHash[e][n];if(i._preloadHash[e][n]=!1,i.hasEventListener("fileerror"))(t=new createjs.Event("fileerror")).src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}},i._registerPlugin=function(t){return!!t.isSupported()&&(i.activePlugin=new t,!0)},i.registerPlugins=function(t){i._pluginsRegistered=!0;for(var e=0,n=t.length;e<n;e++)if(i._registerPlugin(t[e]))return!0;return!1},i.initializeDefaultPlugins=function(){return null!=i.activePlugin||!i._pluginsRegistered&&!!i.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])},i.isReady=function(){return null!=i.activePlugin},i.getCapabilities=function(){return null==i.activePlugin?null:i.activePlugin._capabilities},i.getCapability=function(t){return null==i.activePlugin?null:i.activePlugin._capabilities[t]},i.initLoad=function(t){return i._registerSound(t)},i._registerSound=function(t){if(!i.initializeDefaultPlugins())return!1;var n;if(t.src instanceof Object?(n=i._parseSrc(t.src)).src=t.path+n.src:n=i._parsePath(t.src),null==n)return!1;t.src=n.src,t.type="sound";var r=t.data,s=null;if(null!=r&&(isNaN(r.channels)?isNaN(r)||(s=parseInt(r)):s=parseInt(r.channels),r.audioSprite))for(var o,a=r.audioSprite.length;a--;)o=r.audioSprite[a],i._idHash[o.id]={src:t.src,startTime:parseInt(o.startTime),duration:parseInt(o.duration)},o.defaultPlayProps&&(i._defaultPlayPropsHash[o.id]=createjs.PlayPropsConfig.create(o.defaultPlayProps));null!=t.id&&(i._idHash[t.id]={src:t.src});var h=i.activePlugin.register(t);return e.create(t.src,s),null!=r&&isNaN(r)?t.data.channels=s||e.maxPerChannel():t.data=s||e.maxPerChannel(),h.type&&(t.type=h.type),t.defaultPlayProps&&(i._defaultPlayPropsHash[t.src]=createjs.PlayPropsConfig.create(t.defaultPlayProps)),h},i.registerSound=function(t,e,n,r,s){var o={src:t,id:e,data:n,defaultPlayProps:s};t instanceof Object&&t.src&&(r=e,o=t),(o=createjs.LoadItem.create(o)).path=r,null==r||o.src instanceof Object||(o.src=r+t);var a=i._registerSound(o);if(!a)return!1;if(i._preloadHash[o.src]||(i._preloadHash[o.src]=[]),i._preloadHash[o.src].push(o),1==i._preloadHash[o.src].length)a.on("complete",createjs.proxy(this._handleLoadComplete,this)),a.on("error",createjs.proxy(this._handleLoadError,this)),i.activePlugin.preload(a);else if(1==i._preloadHash[o.src][0])return!0;return o},i.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var n=0,r=t.length;n<r;n++)i[n]=createjs.Sound.registerSound(t[n].src,t[n].id,t[n].data,e,t[n].defaultPlayProps);return i},i.removeSound=function(t,n){if(null==i.activePlugin)return!1;var r;if(t instanceof Object&&t.src&&(t=t.src),t instanceof Object?r=i._parseSrc(t):(t=i._getSrcById(t).src,r=i._parsePath(t)),null==r)return!1;for(var s in t=r.src,null!=n&&(t=n+t),i._idHash)i._idHash[s].src==t&&delete i._idHash[s];return e.removeSrc(t),delete i._preloadHash[t],i.activePlugin.removeSound(t),!0},i.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var n=0,r=t.length;n<r;n++)i[n]=createjs.Sound.removeSound(t[n].src,e);return i},i.removeAllSounds=function(){i._idHash={},i._preloadHash={},e.removeAll(),i.activePlugin&&i.activePlugin.removeAllSounds()},i.loadComplete=function(t){if(!i.isReady())return!1;var e=i._parsePath(t);return t=e?i._getSrcById(e.src).src:i._getSrcById(t).src,null!=i._preloadHash[t]&&1==i._preloadHash[t][0]},i._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(i.FILE_PATTERN);if(null===e)return!1;var n="",r="",s="";if(i.SUPPORTED_EXTENSIONS.indexOf(e[5])>=0)n=e[4],s=r=e[5];else{if(!(i.SUPPORTED_EXTENSIONS.indexOf(e[8])>=0))return null;n=e[7],s=r=e[8]}for(var o=i.capabilities,a=0;!o[r];)if(r=i.alternateExtensions[a++],a>i.alternateExtensions.length)return null;return{name:n,src:t=t.replace("."+s,"."+r),extension:r}},i._parseSrc=function(t){var e={name:void 0,src:void 0,extension:void 0},n=i.capabilities;for(var r in t)if(t.hasOwnProperty(r)&&n[r]){e.src=t[r],e.extension=r;break}if(!e.src)return!1;var s=e.src.lastIndexOf("/");return e.name=-1!=s?e.src.slice(s+1):e.src,e},i.play=function(t,e,n,r,s,o,a,h,l){var u;u=e instanceof Object||e instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(e):createjs.PlayPropsConfig.create({interrupt:e,delay:n,offset:r,loop:s,volume:o,pan:a,startTime:h,duration:l});var c=i.createInstance(t,u.startTime,u.duration);return i._playInstance(c,u)||c._playFailed(),c},i.createInstance=function(t,n,r){if(!i.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,n,r);var s=i._defaultPlayPropsHash[t];t=i._getSrcById(t);var o=i._parsePath(t.src),a=null;return null!=o&&null!=o.src?(e.create(o.src),null==n&&(n=t.startTime),a=i.activePlugin.create(o.src,n,r||t.duration),(s=s||i._defaultPlayPropsHash[o.src])&&a.applyPlayProps(s)):a=new createjs.DefaultSoundInstance(t,n,r),a.uniqueId=i._lastID++,a},i.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},i.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,n=0,r=e.length;n<r;n++)e[n].setMasterVolume(t)},i.getVolume=function(){return this._masterVolume},i.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,n=e.length;i<n;i++)e[i].setMasterMute(t);return!0},i.getMute=function(){return this._masterMute},i.setDefaultPlayProps=function(t,e){t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]=createjs.PlayPropsConfig.create(e)},i.getDefaultPlayProps=function(t){return t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]},i.pause=function(){for(var t=this.instances,e=t.length;e--;)t[e].paused=!0},i.resume=function(){for(var t=this.instances,e=t.length;e--;)t[e].paused=!1},i._playInstance=function(t,e){var n=i._defaultPlayPropsHash[t.src]||{};if(null==e.interrupt&&(e.interrupt=n.interrupt||i.defaultInterruptBehavior),null==e.delay&&(e.delay=n.delay||0),null==e.offset&&(e.offset=t.getPosition()),null==e.loop&&(e.loop=t.loop),null==e.volume&&(e.volume=t.volume),null==e.pan&&(e.pan=t.pan),0==e.delay){if(!i._beginPlaying(t,e))return!1}else{var r=setTimeout((function(){i._beginPlaying(t,e)}),e.delay);t.delayTimeoutId=r}return this._instances.push(t),!0},i._beginPlaying=function(t,i){if(!e.add(t,i.interrupt))return!1;if(!t._beginPlaying(i)){var n=createjs.indexOf(this._instances,t);return n>-1&&this._instances.splice(n,1),!1}return!0},i._getSrcById=function(t){return i._idHash[t]||{src:t}},i._playFinished=function(t){e.remove(t);var n=createjs.indexOf(this._instances,t);n>-1&&this._instances.splice(n,1);var r=i.activePlugin._soundInstances;r[t.src]&&r[t.src].indexOf(t)>-1&&r[t.src].splice(r[t.src].indexOf(t),1)},createjs.Sound=t,e.channels={},e.create=function(t,i){return null==e.get(t)&&(e.channels[t]=new e(t,i),!0)},e.removeSrc=function(t){var i=e.get(t);return null!=i&&(i._removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t]._removeAll();e.channels={}},e.add=function(t,i){var n=e.get(t.src);return null!=n&&n._add(t,i)},e.remove=function(t){var i=e.get(t.src);return null!=i&&(i._remove(t),!0)},e.maxPerChannel=function(){return n.maxDefault},e.get=function(t){return e.channels[t]};var n=e.prototype;n.constructor=e,n.src=null,n.max=null,n.maxDefault=100,n.length=0,n.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},n._get=function(t){return this._instances[t]},n._add=function(t,e){return!!this._getSlot(e,t)&&(this._instances.push(t),this.length++,!0)},n._remove=function(t){var e=i.activePlugin._soundInstances;e[t.src]&&e[t.src].indexOf(t)>-1&&e[t.src].splice(e[t.src].indexOf(t),1);var n=createjs.indexOf(this._instances,t);return-1!=n&&(this._instances.splice(n,1),this.length--,!0)},n._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},n._getSlot=function(e,i){var n,r;if(e!=t.INTERRUPT_NONE&&null==(r=this._get(0)))return!0;for(var s=0,o=this.max;s<o;s++){if(null==(n=this._get(s)))return!0;if(n.playState==t.PLAY_FINISHED||n.playState==t.PLAY_INTERRUPTED||n.playState==t.PLAY_FAILED){r=n;break}e!=t.INTERRUPT_NONE&&(e==t.INTERRUPT_EARLY&&n.getPosition()<r.getPosition()||e==t.INTERRUPT_LATE&&n.getPosition()>r.getPosition())&&(r=n)}return null!=r&&(r._interrupt(),this._remove(r),!0)},n.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,n){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,e||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,i||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),!1!==n&&!0!==n&&this.setPlaybackResource(n),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,i,n,r,s){var o;return o=t instanceof Object||t instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(t):createjs.PlayPropsConfig.create({interrupt:t,delay:e,offset:i,loop:n,volume:r,pan:s}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(o),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,o),this)},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.applyPlayProps=function(t){return null!=t.offset&&this.setPosition(t.offset),null!=t.loop&&this.setLoop(t.loop),null!=t.volume&&this.setVolume(t.volume),null!=t.pan&&this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){if(!(!0!==t&&!1!==t||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED))return this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},e.setVolume=function(t){return t==this._volume||(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume()),this},e.getVolume=function(){return this._volume},e.setMuted=function(t){if(!0===t||!1===t)return this._muted=t,this._updateVolume(),this},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan||(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan()),this},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getStartTime=function(){return this._startTime},e.setStartTime=function(t){return t==this._startTime||(this._startTime=Math.max(0,t||0),this._updateStartTime()),this},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration||(this._duration=Math.max(0,t||0),this._updateDuration()),this},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t?this._removeLooping(t):0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t){return this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(t){if(this._position=0,0!=this._loop)return this._loop--,this._handleLoop(),void this._sendEvent("loop");this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete")},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateStartTime=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(t){},e._addLooping=function(t){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass,this._volume=1},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){var e=this._loaders[t.src];return e&&!e.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],(e=new this._loaderClass(t)).on("complete",this._handlePreloadComplete,this),this._loaders[t.src]=e,e)},e.preload=function(t){t.on("error",this._handlePreloadError,this),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;)this._soundInstances[t][e].destroy();delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));var n=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t].push(n),n},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(t){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,n=this._soundInstances[e].length;i<n;i++)this._soundInstances[e][i].setPlaybackResource(this._audioSources[e])},e._handlePreloadError=function(t){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(e){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,r){this.AbstractSoundInstance_constructor(t,e,n,r),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i.context=null,i._scratchBuffer=null,i.destinationNode=null,i._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(t){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(t){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){if(t){t.stop(0),t.disconnect(0);try{t.buffer=i._scratchBuffer}catch(t){}t=null}return t},e._handleSoundReady=function(t){this.gainNode.connect(i.destinationNode);var e=.001*this._duration,n=.001*this._position;n>e&&(n=e),this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-e,n),this._playbackStartTime=this.sourceNode.startTime-n,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-n)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var n=i.context.createBufferSource();n.buffer=this.playbackResource,n.connect(this.panNode);var r=.001*this._duration;return e>r&&(e=r-.001),n.startTime=t+r,n.start(n.startTime,e+.001*this._startTime,r-e),n},e._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._capabilities=null,i._panningModel="equalpower",i.context=null,i._scratchBuffer=null,i._unlocked=!1,i.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return!("file:"==location.protocol&&!t&&!this._isFileXHRSupported())&&(i._generateCapabilities(),null!=i.context)},i.playEmptySound=function(){if(null!=i.context){var t=i.context.createBufferSource();t.buffer=i._scratchBuffer,t.connect(i.context.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()}},i._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(e){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(e){t=!1}return t},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==i.context){if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}document.addEventListener("click",(function(){"suspended"===i.context.state&&i.context.resume()}))}null==i._scratchBuffer&&(i._scratchBuffer=i.context.createBuffer(1,1,22050)),i._compatibilitySetUp(),"ontouchstart"in window&&"running"!=i.context.state&&(i._unlock(),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchstart",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,n=createjs.Sound.EXTENSION_MAP,r=0,s=e.length;r<s;r++){var o=e[r],a=n[o]||o;i._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var t=i.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,i._panningModel=0}},i._unlock=function(){"suspended"===i.context.state&&i.context.resume(),i._unlocked||(i.playEmptySound(),"running"==i.context.state&&(document.removeEventListener("mousedown",i._unlock,!0),document.removeEventListener("touchend",i._unlock,!0),document.removeEventListener("touchstart",i._unlock,!0),i._unlocked=!0))},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t._scratchBuffer=i._scratchBuffer,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"HTMLAudioTagPool cannot be instantiated"}function e(t){this._tags=[]}var i=t;i._tags={},i._tagPool=new e,i._tagUsed={},i.get=function(t){var e=i._tags[t];return null==e?(e=i._tags[t]=i._tagPool.get()).src=t:i._tagUsed[t]?(e=i._tagPool.get()).src=t:i._tagUsed[t]=!0,e},i.set=function(t,e){e==i._tags[t]?i._tagUsed[t]=!1:i._tagPool.set(e)},i.remove=function(t){var e=i._tags[t];return null!=e&&(i._tagPool.set(e),delete i._tags[t],delete i._tagUsed[t],!0)},i.getDuration=function(t){var e=i._tags[t];return null!=e&&e.duration?1e3*e.duration:0},createjs.HTMLAudioTagPool=t;var n=e.prototype;n.constructor=e,n.get=function(){var t;return null==(t=0==this._tags.length?this._createTag():this._tags.pop()).parentNode&&document.body.appendChild(t),t},n.set=function(t){-1==createjs.indexOf(this._tags,t)&&(this._tags.src=null,this._tags.push(t))},n.toString=function(){return"[TagPool]"},n._createTag=function(){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t}}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n){this.AbstractSoundInstance_constructor(t,e,i,n),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(t){this._updateVolume()},e.setMasterMute=function(t){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(t){}createjs.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},e._handleSoundReady=function(t){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(t){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(t){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(t){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(t){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._setDurationFromSource=function(){this._duration=createjs.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.isSupported=function(){return i._generateCapabilities(),null!=i._capabilities},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;i._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,n=createjs.Sound.EXTENSION_MAP,r=0,s=e.length;r<s;r++){var o=e[r],a=n[o]||o;i._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}}},e.register=function(t){var e=createjs.HTMLAudioTagPool.get(t.src),i=this.AbstractPlugin_register(t);return i.setTag(e),i},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){var n=this.AbstractPlugin_create(t,e,i);return n.setPlaybackResource(null),n},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}();
/*!
* @license SoundJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
/**!
 * SoundJS FlashAudioPlugin also includes swfobject (http://code.google.com/p/swfobject/)
 */
/*!	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){function t(){if(!B){try{var t=M.getElementsByTagName("body")[0].appendChild(f("span"));t.parentNode.removeChild(t)}catch(t){return}B=!0;for(var e=j.length,i=0;i<e;i++)j[i]()}}function e(t){B?t():j[j.length]=t}function i(t){if(typeof O.addEventListener!=w)O.addEventListener("load",t,!1);else if(typeof M.addEventListener!=w)M.addEventListener("load",t,!1);else if(typeof O.attachEvent!=w)!function(t,e,i){t.attachEvent(e,i),N[N.length]=[t,e,i]}(O,"onload",t);else if("function"==typeof O.onload){var e=O.onload;O.onload=function(){e(),t()}}else O.onload=t}function n(){var t=F.length;if(t>0)for(var e=0;e<t;e++){var i=F[e].id,n=F[e].callbackFn,h={success:!1,id:i};if(X.pv[0]>0){var l=p(i);if(l)if(!g(F[e].swfVersion)||X.wk&&X.wk<312)if(F[e].expressInstall&&s()){var u={};u.data=F[e].expressInstall,u.width=l.getAttribute("width")||"0",u.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(u.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(u.align=l.getAttribute("align"));for(var c={},d=l.getElementsByTagName("param"),f=d.length,_=0;_<f;_++)"movie"!=d[_].getAttribute("name").toLowerCase()&&(c[d[_].getAttribute("name")]=d[_].getAttribute("value"));o(u,c,i,n)}else a(l),n&&n(h);else v(i,!0),n&&(h.success=!0,h.ref=r(i),n(h))}else if(v(i,!0),n){var m=r(i);m&&typeof m.SetVariable!=w&&(h.success=!0,h.ref=m),n(h)}}}function r(t){var e=null,i=p(t);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=w)e=i;else{var n=i.getElementsByTagName(A)[0];n&&(e=n)}return e}function s(){return!U&&g("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function o(t,e,i,n){U=!0,b=n||null,T={success:!1,id:i};var r=p(i);if(r){"OBJECT"==r.nodeName?(y=h(r),x=null):(y=r,x=i),t.id=L,(typeof t.width==w||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==w||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),M.title=M.title.slice(0,47)+" - Flash Player Installation";var s=X.ie&&X.win?"ActiveX":"PlugIn",o="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+M.title;if(typeof e.flashvars!=w?e.flashvars+="&"+o:e.flashvars=o,X.ie&&X.win&&4!=r.readyState){var a=f("div");i+="SWFObjectNew",a.setAttribute("id",i),r.parentNode.insertBefore(a,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}l(t,e,i)}}function a(t){if(X.ie&&X.win&&4!=t.readyState){var e=f("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(h(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(h(t),t)}function h(t){var e=f("div");if(X.win&&X.ie)e.innerHTML=t.innerHTML;else{var i=t.getElementsByTagName(A)[0];if(i){var n=i.childNodes;if(n)for(var r=n.length,s=0;s<r;s++)1==n[s].nodeType&&"PARAM"==n[s].nodeName||8==n[s].nodeType||e.appendChild(n[s].cloneNode(!0))}}return e}function l(t,e,i){var n,r=p(i);if(X.wk&&X.wk<312)return n;if(r)if(typeof t.id==w&&(t.id=i),X.ie&&X.win){var s="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?s+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(s+=" "+o+'="'+t[o]+'"'));var a="";for(var h in e)e[h]!=Object.prototype[h]&&(a+='<param name="'+h+'" value="'+e[h]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+a+"</object>",k[k.length]=t.id,n=p(t.id)}else{var l=f(A);for(var c in l.setAttribute("type",C),t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var d in e)e[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&u(l,d,e[d]);r.parentNode.replaceChild(l,r),n=l}return n}function u(t,e,i){var n=f("param");n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)}function c(t){var e=p(t);e&&"OBJECT"==e.nodeName&&(X.ie&&X.win?(e.style.display="none",function(){4==e.readyState?d(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function d(t){var e=p(t);if(e){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode.removeChild(e)}}function p(t){var e=null;try{e=M.getElementById(t)}catch(t){}return e}function f(t){return M.createElement(t)}function g(t){var e=X.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,e[0]>i[0]||e[0]==i[0]&&e[1]>i[1]||e[0]==i[0]&&e[1]==i[1]&&e[2]>=i[2]}function _(t,e,i,n){if(!X.ie||!X.mac){var r=M.getElementsByTagName("head")[0];if(r){var s=i&&"string"==typeof i?i:"screen";if(n&&(E=null,S=null),!E||S!=s){var o=f("style");o.setAttribute("type","text/css"),o.setAttribute("media",s),E=r.appendChild(o),X.ie&&X.win&&typeof M.styleSheets!=w&&M.styleSheets.length>0&&(E=M.styleSheets[M.styleSheets.length-1]),S=s}X.ie&&X.win?E&&typeof E.addRule==A&&E.addRule(t,e):E&&typeof M.createTextNode!=w&&E.appendChild(M.createTextNode(t+" {"+e+"}"))}}}function v(t,e){if(H){var i=e?"visible":"hidden";B&&p(t)?p(t).style.visibility=i:_("#"+t,"visibility:"+i)}}function m(t){return null!=/[\\\"<>\.;]/.exec(t)&&typeof encodeURIComponent!=w?encodeURIComponent(t):t}var y,x,b,T,E,S,w="undefined",A="object",P="Shockwave Flash",C="application/x-shockwave-flash",L="SWFObjectExprInst",R="onreadystatechange",O=window,M=document,I=navigator,D=!1,j=[function(){D?function(){var t=M.getElementsByTagName("body")[0],e=f(A);e.setAttribute("type",C);var i=t.appendChild(e);if(i){var r=0;!function(){if(typeof i.GetVariable!=w){var s=i.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),X.pv=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}else if(r<10)return r++,void setTimeout(arguments.callee,10);t.removeChild(e),i=null,n()}()}else n()}():n()}],F=[],k=[],N=[],B=!1,U=!1,H=!0,X=function(){var t=typeof M.getElementById!=w&&typeof M.getElementsByTagName!=w&&typeof M.createElement!=w,e=I.userAgent.toLowerCase(),i=I.platform.toLowerCase(),n=/win/.test(i||e),r=/mac/.test(i||e),s=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,a=[0,0,0],h=null;if(typeof I.plugins!=w&&typeof I.plugins[P]==A)!(h=I.plugins[P].description)||typeof I.mimeTypes!=w&&I.mimeTypes[C]&&!I.mimeTypes[C].enabledPlugin||(D=!0,o=!1,h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(h.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof O.ActiveXObject!=w)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");l&&((h=l.GetVariable("$version"))&&(o=!0,h=h.split(" ")[1].split(","),a=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]))}catch(t){}return{w3:t,pv:a,wk:s,ie:o,win:n,mac:r}}();return X.w3&&((typeof M.readyState!=w&&"complete"==M.readyState||typeof M.readyState==w&&(M.getElementsByTagName("body")[0]||M.body))&&t(),B||(typeof M.addEventListener!=w&&M.addEventListener("DOMContentLoaded",t,!1),X.ie&&X.win&&(M.attachEvent(R,(function(){"complete"==M.readyState&&(M.detachEvent(R,arguments.callee),t())})),O==top&&function(){if(!B){try{M.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),X.wk&&function(){B||(/loaded|complete/.test(M.readyState)?t():setTimeout(arguments.callee,0))}(),i(t))),X.ie&&X.win&&window.attachEvent("onunload",(function(){for(var t=N.length,e=0;e<t;e++)N[e][0].detachEvent(N[e][1],N[e][2]);for(var i=k.length,n=0;n<i;n++)c(k[n]);for(var r in X)X[r]=null;for(var s in X=null,swfobject)swfobject[s]=null;swfobject=null})),{registerObject:function(t,e,i,n){if(X.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=i,r.callbackFn=n,F[F.length]=r,v(t,!1)}else n&&n({success:!1,id:t})},getObjectById:function(t){if(X.w3)return r(t)},embedSWF:function(t,i,n,r,a,h,u,c,d,p){var f={success:!1,id:i};X.w3&&!(X.wk&&X.wk<312)&&t&&i&&n&&r&&a?(v(i,!1),e((function(){n+="",r+="";var e={};if(d&&typeof d===A)for(var _ in d)e[_]=d[_];e.data=t,e.width=n,e.height=r;var m={};if(c&&typeof c===A)for(var y in c)m[y]=c[y];if(u&&typeof u===A)for(var x in u)typeof m.flashvars!=w?m.flashvars+="&"+x+"="+u[x]:m.flashvars=x+"="+u[x];if(g(a)){var b=l(e,m,i);e.id==i&&v(i,!0),f.success=!0,f.ref=b}else{if(h&&s())return e.data=h,void o(e,m,i,p);v(i,!0)}p&&p(f)}))):p&&p(f)},switchOffAutoHideShow:function(){H=!1},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:g,createSWF:function(t,e,i){return X.w3?l(t,e,i):void 0},showExpressInstall:function(t,e,i,n){X.w3&&s()&&o(t,e,i,n)},removeSWF:function(t){X.w3&&c(t)},createCSS:function(t,e,i,n){X.w3&&_(t,e,i,n)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=M.location.search||M.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return m(e);for(var i=e.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==t)return m(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var t=p(L);t&&y&&(t.parentNode.replaceChild(y,t),x&&(v(x,!0),X.ie&&X.win&&(y.style.display="block")),b&&b(T)),U=!1}}}}();this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.SOUND),this.flashId=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i._flash=null,i._preloadInstances=[],i.setFlash=function(t){i._flash=t;for(var e=i._preloadInstances.length;e--;){i._preloadInstances.pop().load()}},e.load=function(){if(null!=i._flash){this.flashId=i._flash.preload(this._item.src);var t=new createjs.Event(createjs.FlashAudioPlugin._REG_FLASHID);this.dispatchEvent(t)}else i._preloadInstances.push(this)},e.handleProgress=function(t,e){this._sendProgress(t/e)},e.handleComplete=function(){this._result=this._item.src,this._sendComplete()},e.handleError=function(t){this._handleError(t)},e.destroy=function(){var t=new createjs.Event(createjs.FlashAudioPlugin._UNREG_FLASHID);this.dispatchEvent(t),this.AbstractLoader_destroy()},e.toString=function(){return"[FlashAudioLoader]"},createjs.FlashAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,r){this.AbstractSoundInstance_constructor(t,e,n,r),this.flashId=null,null==i._flash&&i._instances.push(this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i._flash=null,i._instances=[],i.setFlash=function(t){i._flash=t;for(var e=i._instances.length;e--;){i._instances.pop()._setDurationFromSource()}},e.setLoop=function(t){null!=this.flashId&&i._flash.setLoop(this.flashId,t),this._loop=t},e.toString=function(){return"[FlashAudioSoundInstance]"},e._updateVolume=function(){null!=this.flashId&&i._flash.setVolume(this.flashId,this._volume)},e._updatePan=function(){null!=this.flashId&&i._flash.setPan(this.flashId,this._pan)},e._setDurationFromSource=function(){this._duration=i._flash.getDurationBySrc(this.src)},e._interrupt=function(){null!=this.flashId&&(i._flash.interrupt(this.flashId),this.AbstractSoundInstance__interrupt())},e._handleCleanUp=function(){i._flash.stopSound(this.flashId),this._sendEvent(createjs.FlashAudioPlugin._UNREG_FLASHID),this.flashId=null},e._beginPlaying=function(t){return null!=i._flash&&(this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this._paused=!1,this.flashId=i._flash.playSound(this.src,this._position,this._loop,this._volume,this._pan,this._startTime,this._duration),null==this.flashId?(this._playFailed(),!1):(this._muted&&this.setMute(!0),this._sendEvent(createjs.FlashAudioPlugin._REG_FLASHID),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0))},e._pause=function(){null!=this.flashId&&(this._position=this._calculateCurrentPosition(),i._flash.pauseSound(this.flashId))},e._resume=function(){null!=this.flashId&&i._flash.resumeSound(this.flashId)},e._handleStop=function(){null!=this.flashId&&i._flash.stopSound(this.flashId)},e._updateVolume=function(){var t=this._muted?0:this._volume;i._flash.setVolume(this.flashId,t)},e._calculateCurrentPosition=function(){return i._flash.getPosition(this.flashId)},e._updatePosition=function(){null!=this.flashId&&i._flash.setPosition(this.flashId,this._position)},e.handleSoundFinished=function(){this._loop=0,this._handleSoundComplete()},e.handleSoundLoop=function(){this._loop--,this._sendEvent("loop")},createjs.FlashAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this.showOutput=!1,this._CONTAINER_ID="flashAudioContainer",this._WRAPPER_ID="SoundJSFlashContainer",this._container=null,this._flash=null,this.flashReady=!1,this._flashInstances={},this._flashPreloadInstances={},this._capabilities=i._capabilities,this._loaderClass=createjs.FlashAudioLoader,this._soundInstanceClass=createjs.FlashAudioSoundInstance;var t=this.wrapper=document.createElement("div");t.id=this._WRAPPER_ID,t.style.position="absolute",t.style.marginLeft="-1px",t.className=this._WRAPPER_ID,document.body.appendChild(t);var e=this._container=document.createElement("div");e.id=this._CONTAINER_ID,e.appendChild(document.createTextNode("SoundJS Flash Container")),t.appendChild(e);var n=i.swfPath;swfobject.embedSWF(n+"FlashAudioPlugin.swf",this._CONTAINER_ID,"1","1","9.0.0",null,null,{AllowScriptAccess:"always"},null,createjs.proxy(this._handleSWFReady,this))}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._REG_FLASHID="registerflashid",i._UNREG_FLASHID="unregisterflashid",i._capabilities=null,i.swfPath="src/soundjs/flashaudio/",i.isSupported=function(){return!(createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry||createjs.BrowserDetect.isWindowsPhone)&&(i._generateCapabilities(),null!=swfobject&&swfobject.hasFlashPlayerVersion("9.0.0"))},i._generateCapabilities=function(){null==i._capabilities&&(i._capabilities={panning:!0,volume:!0,tracks:-1,mp3:!0,ogg:!1,mpeg:!0,wav:!0,m4a:!1,mp4:!1,aiff:!1,wma:!1,mid:!1})},e.register=function(t,e){var n=this.AbstractPlugin_register(t,e);return n.addEventListener(i._REG_FLASHID,createjs.proxy(this.registerPreloadInstance,this)),n.addEventListener(i._UNREG_FLASHID,createjs.proxy(this.unregisterPreloadInstance,this)),n},e.removeAllSounds=function(){this._flashInstances={},this._flashPreloadInstances={},this.AbstractPlugin_removeAllSounds()},e.create=function(t,e,n){var r=this.AbstractPlugin_create(t,e,n);return r.on(i._REG_FLASHID,this.registerSoundInstance,this),r.on(i._UNREG_FLASHID,this.unregisterSoundInstance,this),r},e.toString=function(){return"[FlashAudioPlugin]"},e._handleSWFReady=function(t){this._flash=t.ref},e._handleFlashReady=function(){this.flashReady=!0,this._loaderClass.setFlash(this._flash),this._soundInstanceClass.setFlash(this._flash),this._updateVolume()},e._updateVolume=function(){if(!this.flashReady)return!0;var t=createjs.Sound._masterMute?0:this._volume;return this._flash.setMasterVolume(t)},e.registerPreloadInstance=function(t){this._flashPreloadInstances[t.target.flashId]=t.target},e.unregisterPreloadInstance=function(t){delete this._flashPreloadInstances[t.target.flashId]},e.registerSoundInstance=function(t){this._flashInstances[t.target.flashId]=t.target},e.unregisterSoundInstance=function(t){delete this._flashInstances[t.target.flashId]},e.flashLog=function(t){try{this.showOutput&&console.log(t)}catch(t){}},e.handleSoundEvent=function(t,e){var i=this._flashInstances[t];if(null!=i){for(var n=[],r=2,s=arguments.length;r<s;r++)n.push(arguments[r]);try{0==n.length?i[e]():i[e].apply(i,n)}catch(t){}}},e.handlePreloadEvent=function(t,e){var i=this._flashPreloadInstances[t];if(null!=i){for(var n=[],r=2,s=arguments.length;r<s;r++)n.push(arguments[r]);try{0==n.length?i[e]():i[e].apply(i,n)}catch(t){}}},e.handleEvent=function(t){switch(t){case"ready":this._handleFlashReady()}},e.handleErrorEvent=function(t){},createjs.FlashAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){var t=createjs.FlashAudioPlugin=createjs.FlashAudioPlugin||{};t.version="0.6.5",t.buildDate="Fri, 07 Apr 2017 15:14:47 GMT"}(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PIXI=t()}}((function(){return function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};e[o][0].call(u.exports,(function(t){var i=e[o][1][t];return r(i||t)}),u,u.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){(function(t,i){!function(){function n(){}function r(t){return t}function s(t){return!!t}function o(t){return!t}function a(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function h(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function l(t){return B(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function u(t,e){for(var i=-1,n=t.length;++i<n;)e(t[i],i,t)}function c(t,e){for(var i=-1,n=t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}function d(t){return c(Array(t),(function(t,e){return e}))}function p(t,e,i){return u(t,(function(t,n,r){i=e(i,t,n,r)})),i}function f(t,e){u(U(t),(function(i){e(t[i],i)}))}function g(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}function _(t){var e,i,n=-1;return l(t)?(e=t.length,function(){return n++,e>n?n:null}):(i=U(t),e=i.length,function(){return n++,e>n?i[n]:null})}function v(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),n=Array(i),r=0;i>r;r++)n[r]=arguments[r+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n)}}}function m(t){return function(e,i,n){return t(e,n)}}function y(t){return function(e,i,r){r=h(r||n);var s=_(e=e||[]);if(0>=t)return r(null);var o=!1,l=0,u=!1;!function n(){if(o&&0>=l)return r(null);for(;t>l&&!u;){var h=s();if(null===h)return o=!0,void(0>=l&&r(null));l+=1,i(e[h],h,a((function(t){l-=1,t?(r(t),u=!0):n()})))}}()}}function x(t){return function(e,i,n){return t(F.eachOf,e,i,n)}}function b(t){return function(e,i,n,r){return t(y(i),e,n,r)}}function T(t){return function(e,i,n){return t(F.eachOfSeries,e,i,n)}}function E(t,e,i,r){r=h(r||n);var s=l(e=e||[])?[]:{};t(e,(function(t,e,n){i(t,(function(t,i){s[e]=i,n(t)}))}),(function(t){r(t,s)}))}function S(t,e,i,n){var r=[];t(e,(function(t,e,n){i(t,(function(i){i&&r.push({index:e,value:t}),n()}))}),(function(){n(c(r.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))}function w(t,e,i,n){S(t,e,(function(t,e){i(t,(function(t){e(!t)}))}),n)}function A(t,e,i){return function(n,r,s,o){function a(){o&&o(i(!1,void 0))}function h(t,n,r){return o?void s(t,(function(n){o&&e(n)&&(o(i(!0,t)),o=s=!1),r()})):r()}arguments.length>3?t(n,r,h,a):(o=s,s=r,t(n,h,a))}}function P(t,e){return e}function C(t,e,i){i=i||n;var r=l(e)?[]:{};t(e,(function(t,e,i){t(v((function(t,n){n.length<=1&&(n=n[0]),r[e]=n,i(t)})))}),(function(t){i(t,r)}))}function L(t,e,i,n){var r=[];t(e,(function(t,e,n){i(t,(function(t,e){r=r.concat(e||[]),n(t)}))}),(function(t){n(t,r)}))}function R(t,e,i){function r(t,e,i,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,B(e)||(e=[e]),0===e.length&&t.idle()?F.setImmediate((function(){t.drain()})):(u(e,(function(e){var s={data:e,callback:r||n};i?t.tasks.unshift(s):t.tasks.push(s),t.tasks.length===t.concurrency&&t.saturated()})),void F.setImmediate(t.process))}function s(t,e){return function(){o-=1;var i=!1,n=arguments;u(e,(function(t){u(h,(function(e,n){e!==t||i||(h.splice(n,1),i=!0)})),t.callback.apply(t,n)})),t.tasks.length+o===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var o=0,h=[],l={tasks:[],concurrency:e,payload:i,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(t,e){r(l,t,!1,e)},kill:function(){l.drain=n,l.tasks=[]},unshift:function(t,e){r(l,t,!0,e)},process:function(){for(;!l.paused&&o<l.concurrency&&l.tasks.length;){var e=l.payload?l.tasks.splice(0,l.payload):l.tasks.splice(0,l.tasks.length),i=c(e,(function(t){return t.data}));0===l.tasks.length&&l.empty(),o+=1,h.push(e[0]);var n=a(s(l,e));t(i,n)}},length:function(){return l.tasks.length},running:function(){return o},workersList:function(){return h},idle:function(){return l.tasks.length+o===0},pause:function(){l.paused=!0},resume:function(){if(!1!==l.paused){l.paused=!1;for(var t=Math.min(l.concurrency,l.tasks.length),e=1;t>=e;e++)F.setImmediate(l.process)}}};return l}function O(t){return v((function(e,i){e.apply(null,i.concat([v((function(e,i){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&u(i,(function(e){console[t](e)})))}))]))}))}function M(t){return function(e,i,n){t(d(e),i,n)}}function I(t){return v((function(e,i){var n=v((function(i){var n=this,r=i.pop();return t(e,(function(t,e,r){t.apply(n,i.concat([r]))}),r)}));return i.length?n.apply(this,i):n}))}function D(t){return v((function(e){var i=e.pop();e.push((function(){var t=arguments;n?F.setImmediate((function(){i.apply(null,t)})):i.apply(null,t)}));var n=!0;t.apply(this,e),n=!1}))}var j,F={},k="object"==typeof self&&self.self===self&&self||"object"==typeof i&&i.global===i&&i||this;null!=k&&(j=k.async),F.noConflict=function(){return k.async=j,F};var N=Object.prototype.toString,B=Array.isArray||function(t){return"[object Array]"===N.call(t)},U=Object.keys||function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},H="function"==typeof setImmediate&&setImmediate,X=H?function(t){H(t)}:function(t){setTimeout(t,0)};"object"==typeof t&&"function"==typeof t.nextTick?F.nextTick=t.nextTick:F.nextTick=X,F.setImmediate=H?X:F.nextTick,F.forEach=F.each=function(t,e,i){return F.eachOf(t,m(e),i)},F.forEachSeries=F.eachSeries=function(t,e,i){return F.eachOfSeries(t,m(e),i)},F.forEachLimit=F.eachLimit=function(t,e,i,n){return y(e)(t,m(i),n)},F.forEachOf=F.eachOf=function(t,e,i){function r(t){l--,t?i(t):null===s&&0>=l&&i(null)}i=h(i||n);for(var s,o=_(t=t||[]),l=0;null!=(s=o());)l+=1,e(t[s],s,a(r));0===l&&i(null)},F.forEachOfSeries=F.eachOfSeries=function(t,e,i){i=h(i||n);var r=_(t=t||[]),s=r();!function n(){var o=!0;return null===s?i(null):(e(t[s],s,a((function(t){if(t)i(t);else{if(null===(s=r()))return i(null);o?F.setImmediate(n):n()}}))),void(o=!1))}()},F.forEachOfLimit=F.eachOfLimit=function(t,e,i,n){y(e)(t,i,n)},F.map=x(E),F.mapSeries=T(E),F.mapLimit=b(E),F.inject=F.foldl=F.reduce=function(t,e,i,n){F.eachOfSeries(t,(function(t,n,r){i(e,t,(function(t,i){e=i,r(t)}))}),(function(t){n(t,e)}))},F.foldr=F.reduceRight=function(t,e,i,n){var s=c(t,r).reverse();F.reduce(s,e,i,n)},F.transform=function(t,e,i,n){3===arguments.length&&(n=i,i=e,e=B(t)?[]:{}),F.eachOf(t,(function(t,n,r){i(e,t,n,r)}),(function(t){n(t,e)}))},F.select=F.filter=x(S),F.selectLimit=F.filterLimit=b(S),F.selectSeries=F.filterSeries=T(S),F.reject=x(w),F.rejectLimit=b(w),F.rejectSeries=T(w),F.any=F.some=A(F.eachOf,s,r),F.someLimit=A(F.eachOfLimit,s,r),F.all=F.every=A(F.eachOf,o,o),F.everyLimit=A(F.eachOfLimit,o,o),F.detect=A(F.eachOf,r,P),F.detectSeries=A(F.eachOfSeries,r,P),F.detectLimit=A(F.eachOfLimit,r,P),F.sortBy=function(t,e,i){function n(t,e){var i=t.criteria,n=e.criteria;return n>i?-1:i>n?1:0}F.map(t,(function(t,i){e(t,(function(e,n){e?i(e):i(null,{value:t,criteria:n})}))}),(function(t,e){return t?i(t):void i(null,c(e.sort(n),(function(t){return t.value})))}))},F.auto=function(t,e,i){function r(t){m.unshift(t)}function s(t){var e=g(m,t);e>=0&&m.splice(e,1)}function o(){l--,u(m.slice(0),(function(t){t()}))}"function"==typeof arguments[1]&&(i=e,e=null),i=h(i||n);var a=U(t),l=a.length;if(!l)return i(null);e||(e=l);var c={},d=0,_=!1,m=[];r((function(){l||i(null,c)})),u(a,(function(n){function a(){return e>d&&p(m,(function(t,e){return t&&c.hasOwnProperty(e)}),!0)&&!c.hasOwnProperty(n)}if(!_){for(var h,l=B(t[n])?t[n]:[t[n]],u=v((function(t,e){if(d--,e.length<=1&&(e=e[0]),t){var r={};f(c,(function(t,e){r[e]=t})),r[n]=e,_=!0,i(t,r)}else c[n]=e,F.setImmediate(o)})),m=l.slice(0,l.length-1),y=m.length;y--;){if(!(h=t[m[y]]))throw new Error("Has nonexistent dependency in "+m.join(", "));if(B(h)&&g(h,n)>=0)throw new Error("Has cyclic dependencies")}a()?(d++,l[l.length-1](u,c)):r((function t(){a()&&(d++,s(t),l[l.length-1](u,c))}))}}))},F.retry=function(t,e,i){function n(t,e){if("number"==typeof e)t.times=parseInt(e,10)||s;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||s,t.interval=parseInt(e.interval,10)||o}}function r(t,e){function i(t,i){return function(n){t((function(t,e){n(!t||i,{err:t,result:e})}),e)}}function n(t){return function(e){setTimeout((function(){e(null)}),t)}}for(;h.times;){var r=!(h.times-=1);a.push(i(h.task,r)),!r&&h.interval>0&&a.push(n(h.interval))}F.series(a,(function(e,i){i=i[i.length-1],(t||h.callback)(i.err,i.result)}))}var s=5,o=0,a=[],h={times:s,interval:o},l=arguments.length;if(1>l||l>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=l&&"function"==typeof t&&(i=e,e=t),"function"!=typeof t&&n(h,t),h.callback=i,h.task=e,h.callback?r():r},F.waterfall=function(t,e){if(e=h(e||n),!B(t)){var i=new Error("First argument to waterfall must be an array of functions");return e(i)}return t.length?void function t(i){return v((function(n,r){if(n)e.apply(null,[n].concat(r));else{var s=i.next();s?r.push(t(s)):r.push(e),D(i).apply(null,r)}}))}(F.iterator(t))():e()},F.parallel=function(t,e){C(F.eachOf,t,e)},F.parallelLimit=function(t,e,i){C(y(e),t,i)},F.series=function(t,e){C(F.eachOfSeries,t,e)},F.iterator=function(t){return function e(i){function n(){return t.length&&t[i].apply(null,arguments),n.next()}return n.next=function(){return i<t.length-1?e(i+1):null},n}(0)},F.apply=v((function(t,e){return v((function(i){return t.apply(null,e.concat(i))}))})),F.concat=x(L),F.concatSeries=T(L),F.whilst=function(t,e,i){if(i=i||n,t()){var r=v((function(n,s){n?i(n):t.apply(this,s)?e(r):i.apply(null,[null].concat(s))}));e(r)}else i(null)},F.doWhilst=function(t,e,i){var n=0;return F.whilst((function(){return++n<=1||e.apply(this,arguments)}),t,i)},F.until=function(t,e,i){return F.whilst((function(){return!t.apply(this,arguments)}),e,i)},F.doUntil=function(t,e,i){return F.doWhilst(t,(function(){return!e.apply(this,arguments)}),i)},F.during=function(t,e,i){i=i||n;var r=v((function(e,n){e?i(e):(n.push(s),t.apply(this,n))})),s=function(t,n){t?i(t):n?e(r):i(null)};t(s)},F.doDuring=function(t,e,i){var n=0;F.during((function(t){n++<1?t(null,!0):e.apply(this,arguments)}),t,i)},F.queue=function(t,e){return R((function(e,i){t(e[0],i)}),e,1)},F.priorityQueue=function(t,e){function i(t,e){return t.priority-e.priority}function r(t,e,r,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");return t.started=!0,B(e)||(e=[e]),0===e.length?F.setImmediate((function(){t.drain()})):void u(e,(function(e){var o={data:e,priority:r,callback:"function"==typeof s?s:n};t.tasks.splice(function(t,e,i){for(var n=-1,r=t.length-1;r>n;){var s=n+(r-n+1>>>1);i(e,t[s])>=0?n=s:r=s-1}return n}(t.tasks,o,i)+1,0,o),t.tasks.length===t.concurrency&&t.saturated(),F.setImmediate(t.process)}))}var s=F.queue(t,e);return s.push=function(t,e,i){r(s,t,e,i)},delete s.unshift,s},F.cargo=function(t,e){return R(t,1,e)},F.log=O("log"),F.dir=O("dir"),F.memoize=function(t,e){var i={},n={},s=Object.prototype.hasOwnProperty;e=e||r;var o=v((function(r){var o=r.pop(),a=e.apply(null,r);s.call(i,a)?F.setImmediate((function(){o.apply(null,i[a])})):s.call(n,a)?n[a].push(o):(n[a]=[o],t.apply(null,r.concat([v((function(t){i[a]=t;var e=n[a];delete n[a];for(var r=0,s=e.length;s>r;r++)e[r].apply(null,t)}))])))}));return o.memo=i,o.unmemoized=t,o},F.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},F.times=M(F.map),F.timesSeries=M(F.mapSeries),F.timesLimit=function(t,e,i,n){return F.mapLimit(d(t),e,i,n)},F.seq=function(){var t=arguments;return v((function(e){var i=this,r=e[e.length-1];"function"==typeof r?e.pop():r=n,F.reduce(t,e,(function(t,e,n){e.apply(i,t.concat([v((function(t,e){n(t,e)}))]))}),(function(t,e){r.apply(i,[t].concat(e))}))}))},F.compose=function(){return F.seq.apply(null,Array.prototype.reverse.call(arguments))},F.applyEach=I(F.eachOf),F.applyEachSeries=I(F.eachOfSeries),F.forever=function(t,e){var i=a(e||n),r=D(t);!function t(e){return e?i(e):void r(t)}()},F.ensureAsync=D,F.constant=v((function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}})),F.wrapSync=F.asyncify=function(t){return v((function(e){var i,n=e.pop();try{i=t.apply(this,e)}catch(t){return n(t)}!function(t){var e=typeof t;return"function"===e||"object"===e&&!!t}(i)||"function"!=typeof i.then?n(null,i):i.then((function(t){n(null,t)})).catch((function(t){n(t.message?t:new Error(t))}))}))},"object"==typeof e&&e.exports?e.exports=F:k.async=F}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(t,e,i){(function(t){function e(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return r.exec(t).slice(1)};i.resolve=function(){for(var i="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(i=o+"/"+i,r="/"===o.charAt(0))}return(r?"/":"")+(i=e(n(i.split("/"),(function(t){return!!t})),!r).join("/"))||"."},i.normalize=function(t){var r=i.isAbsolute(t),s="/"===o(t,-1);return(t=e(n(t.split("/"),(function(t){return!!t})),!r).join("/"))||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(n(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},i.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var r=n(t.split("/")),s=n(e.split("/")),o=Math.min(r.length,s.length),a=o,h=0;o>h;h++)if(r[h]!==s[h]){a=h;break}var l=[];for(h=a;h<r.length;h++)l.push("..");return(l=l.concat(s.slice(a))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=s(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},i.basename=function(t,e){var i=s(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return s(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return 0>e&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:3}],3:[function(t,e,i){function n(){u=!1,a.length?l=a.concat(l):c=-1,l.length&&r()}function r(){if(!u){var t=setTimeout(n);u=!0;for(var e=l.length;e;){for(a=l,l=[];++c<e;)a&&a[c].run();c=-1,e=l.length}a=null,u=!1,clearTimeout(t)}}function s(t,e){this.fun=t,this.array=e}function o(){}var a,h=e.exports={},l=[],u=!1,c=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new s(t,e)),1!==l.length||u||setTimeout(r,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=o,h.addListener=o,h.once=o,h.off=o,h.removeListener=o,h.removeAllListeners=o,h.emit=o,h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],4:[function(t,e,i){(function(t){!function(n){function r(t){throw new RangeError(O[t])}function s(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function o(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+s((t=t.replace(R,".")).split("."),e).join(".")}function a(t){for(var e,i,n=[],r=0,s=t.length;s>r;)(e=t.charCodeAt(r++))>=55296&&56319>=e&&s>r?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function h(t){return s(t,(function(t){var e="";return t>65535&&(e+=D((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+D(t)})).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:x}function u(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function c(t,e,i){var n=0;for(t=i?I(t/S):t>>1,t+=I(t/e);t>M*T>>1;n+=x)t=I(t/M);return I(n+(M+1)*t/(t+E))}function d(t){var e,i,n,s,o,a,u,d,p,f,g=[],_=t.length,v=0,m=A,E=w;for(0>(i=t.lastIndexOf(P))&&(i=0),n=0;i>n;++n)t.charCodeAt(n)>=128&&r("not-basic"),g.push(t.charCodeAt(n));for(s=i>0?i+1:0;_>s;){for(o=v,a=1,u=x;s>=_&&r("invalid-input"),((d=l(t.charCodeAt(s++)))>=x||d>I((y-v)/a))&&r("overflow"),v+=d*a,!((p=E>=u?b:u>=E+T?T:u-E)>d);u+=x)a>I(y/(f=x-p))&&r("overflow"),a*=f;E=c(v-o,e=g.length+1,0==o),I(v/e)>y-m&&r("overflow"),m+=I(v/e),v%=e,g.splice(v++,0,m)}return h(g)}function p(t){var e,i,n,s,o,h,l,d,p,f,g,_,v,m,E,S=[];for(_=(t=a(t)).length,e=A,i=0,o=w,h=0;_>h;++h)128>(g=t[h])&&S.push(D(g));for(n=s=S.length,s&&S.push(P);_>n;){for(l=y,h=0;_>h;++h)(g=t[h])>=e&&l>g&&(l=g);for(l-e>I((y-i)/(v=n+1))&&r("overflow"),i+=(l-e)*v,e=l,h=0;_>h;++h)if(e>(g=t[h])&&++i>y&&r("overflow"),g==e){for(d=i,p=x;!((f=o>=p?b:p>=o+T?T:p-o)>d);p+=x)E=d-f,m=x-f,S.push(D(u(f+E%m,0))),d=I(E/m);S.push(D(u(d,0))),o=c(i,v,n==s),i=0,++n}++i,++e}return S.join("")}var f="object"==typeof i&&i&&!i.nodeType&&i,g="object"==typeof e&&e&&!e.nodeType&&e,_="object"==typeof t&&t;(_.global===_||_.window===_||_.self===_)&&(n=_);var v,m,y=2147483647,x=36,b=1,T=26,E=38,S=700,w=72,A=128,P="-",C=/^xn--/,L=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=x-b,I=Math.floor,D=String.fromCharCode;if(v={version:"1.3.2",ucs2:{decode:a,encode:h},decode:d,encode:p,toASCII:function(t){return o(t,(function(t){return L.test(t)?"xn--"+p(t):t}))},toUnicode:function(t){return o(t,(function(t){return C.test(t)?d(t.slice(4).toLowerCase()):t}))}},f&&g)if(e.exports==f)g.exports=v;else for(m in v)v.hasOwnProperty(m)&&(f[m]=v[m]);else n.punycode=v}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,s){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var u=0;l>u;++u){var c,d,p,f,g=t[u].replace(a,"%20"),_=g.indexOf(i);_>=0?(c=g.substr(0,_),d=g.substr(_+1)):(c=g,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),n(o,p)?r(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],6:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(o(t),(function(o){var a=encodeURIComponent(r(o))+i;return s(t[o])?n(t[o],(function(t){return a+encodeURIComponent(r(t))})).join(e):a+encodeURIComponent(r(t[o]))})).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],7:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":5,"./encode":6}],8:[function(t,e,i){function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&o(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}function s(t){return"string"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return null===t}var h=t("punycode");i.parse=r,i.resolve=function(t,e){return r(t,!1,!0).resolve(e)},i.resolveObject=function(t,e){return t?r(t,!1,!0).resolveObject(e):e},i.format=function(t){return s(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)},i.Url=n;var l=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(c),p=["%","/","?",";","#"].concat(d),f=["/","?","#"],g=/^[a-z0-9A-Z_-]{0,63}$/,_=/^([a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=t("querystring");n.prototype.parse=function(t,e,i){if(!s(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t;n=n.trim();var r=l.exec(n);if(r){var o=(r=r[0]).toLowerCase();this.protocol=o,n=n.substr(r.length)}if(i||r||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===n.substr(0,2);!a||r&&m[r]||(n=n.substr(2),this.slashes=!0)}if(!m[r]&&(a||r&&!y[r])){for(var u=-1,c=0;c<f.length;c++){-1!==(E=n.indexOf(f[c]))&&(-1===u||u>E)&&(u=E)}var b,T;-1!==(T=-1===u?n.lastIndexOf("@"):n.lastIndexOf("@",u))&&(b=n.slice(0,T),n=n.slice(T+1),this.auth=decodeURIComponent(b)),u=-1;for(c=0;c<p.length;c++){var E;-1!==(E=n.indexOf(p[c]))&&(-1===u||u>E)&&(u=E)}-1===u&&(u=n.length),this.host=n.slice(0,u),n=n.slice(u),this.parseHost(),this.hostname=this.hostname||"";var S="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!S)for(var w=this.hostname.split(/\./),A=(c=0,w.length);A>c;c++){var P=w[c];if(P&&!P.match(g)){for(var C="",L=0,R=P.length;R>L;L++)C+=P.charCodeAt(L)>127?"x":P[L];if(!C.match(g)){var O=w.slice(0,c),M=w.slice(c+1),I=P.match(_);I&&(O.push(I[1]),M.unshift(I[2])),M.length&&(n="/"+M.join(".")+n),this.hostname=O.join(".");break}}}if(this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),!S){var D=this.hostname.split("."),j=[];for(c=0;c<D.length;++c){var F=D[c];j.push(F.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(F):F)}this.hostname=j.join(".")}var k=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+k,this.href+=this.host,S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!v[o])for(c=0,A=d.length;A>c;c++){var B=d[c],U=encodeURIComponent(B);U===B&&(U=escape(B)),n=n.split(B).join(U)}var H=n.indexOf("#");-1!==H&&(this.hash=n.substr(H),n=n.slice(0,H));var X=n.indexOf("?");if(-1!==X?(this.search=n.substr(X),this.query=n.substr(X+1),e&&(this.query=x.parse(this.query)),n=n.slice(0,X)):e&&(this.search="",this.query={}),n&&(this.pathname=n),y[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){k=this.pathname||"",F=this.search||"";this.path=k+F}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&o(this.query)&&Object.keys(this.query).length&&(s=x.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+r+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(s(t)){var e=new n;e.parse(t,!1,!0),t=e}var i=new n;if(Object.keys(this).forEach((function(t){i[t]=this[t]}),this),i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol)return Object.keys(t).forEach((function(e){"protocol"!==e&&(i[e]=t[e])})),y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i;if(t.protocol&&t.protocol!==i.protocol){if(!y[t.protocol])return Object.keys(t).forEach((function(e){i[e]=t[e]})),i.href=i.format(),i;if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var r=(t.pathname||"").split("/");r.length&&!(t.host=r.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==r[0]&&r.unshift(""),r.length<2&&r.unshift(""),i.pathname=r.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var o=i.pathname||"",h=i.search||"";i.path=o+h}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var l=i.pathname&&"/"===i.pathname.charAt(0),u=t.host||t.pathname&&"/"===t.pathname.charAt(0),c=u||l||i.host&&t.pathname,d=c,p=i.pathname&&i.pathname.split("/")||[],f=(r=t.pathname&&t.pathname.split("/")||[],i.protocol&&!y[i.protocol]);if(f&&(i.hostname="",i.port=null,i.host&&(""===p[0]?p[0]=i.host:p.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===r[0]?r[0]=t.host:r.unshift(t.host)),t.host=null),c=c&&(""===r[0]||""===p[0])),u)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,p=r;else if(r.length)p||(p=[]),p.pop(),p=p.concat(r),i.search=t.search,i.query=t.query;else if(!function(t){return null==t}(t.search)){if(f)i.hostname=i.host=p.shift(),(b=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=b.shift(),i.host=i.hostname=b.shift());return i.search=t.search,i.query=t.query,a(i.pathname)&&a(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!p.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var g=p.slice(-1)[0],_=(i.host||t.host)&&("."===g||".."===g)||""===g,v=0,x=p.length;x>=0;x--)"."==(g=p[x])?p.splice(x,1):".."===g?(p.splice(x,1),v++):v&&(p.splice(x,1),v--);if(!c&&!d)for(;v--;v)p.unshift("..");!c||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),_&&"/"!==p.join("/").substr(-1)&&p.push("");var b,T=""===p[0]||p[0]&&"/"===p[0].charAt(0);f&&(i.hostname=i.host=T?"":p.length?p.shift():"",(b=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=b.shift(),i.host=i.hostname=b.shift()));return(c=c||i.host&&p.length)&&!T&&p.unshift(""),p.length?i.pathname=p.join("/"):(i.pathname=null,i.path=null),a(i.pathname)&&a(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{punycode:4,querystring:7}],9:[function(t,e,i){"use strict";function n(t,e,i,n,r){var s,o,a,h=0;for(s=e,o=i-n;i>s;s+=n)h+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;if(r===h>0)for(s=e;i>s;s+=n)a=E(s,t[s],t[s+1],a);else for(s=i-n;s>=e;s-=n)a=E(s,t[s],t[s+1],a);return a}function r(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!y(n,n.next)&&0!==m(n.prev,n,n.next))n=n.next;else{if(S(n),(n=e=n.prev)===n.next)return null;i=!0}}while(i||n!==e);return e}function s(t,e,i,n,u,c,d){if(t){!d&&c&&p(t,n,u,c);for(var f,g,_=t;t.prev!==t.next;)if(f=t.prev,g=t.next,c?a(t,n,u,c):o(t))e.push(f.i/i),e.push(t.i/i),e.push(g.i/i),S(t),t=g.next,_=g.next;else if((t=g)===_){d?1===d?s(t=h(t,e,i),e,i,n,u,c,2):2===d&&l(t,e,i,n,u,c):s(r(t),e,i,n,u,c,1);break}}}function o(t){var e=t.prev,i=t,n=t.next;if(m(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(_(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&m(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function a(t,e,i,n){var r=t.prev,s=t,o=t.next;if(m(r,s,o)>=0)return!1;for(var a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=f(a,h,e,i,n),d=f(l,u,e,i,n),p=t.nextZ;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&_(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&m(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function h(t,e,i){var n=t;do{var r=n.prev,s=n.next.next;x(r,n,n.next,s)&&b(r,s)&&b(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),S(n),S(n.next),n=t=s),n=n.next}while(n!==t);return n}function l(t,e,i,n,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&v(h,l)){var u=T(h,l);return h=r(h,h.next),u=r(u,u.next),s(h,e,i,n,o,a),void s(u,e,i,n,o,a)}l=l.next}h=h.next}while(h!==t)}function u(t,e,i,s){var o,a,h,l=[];for(o=0,a=e.length;a>o;o++)(h=n(t,e[o]*s,a-1>o?e[o+1]*s:t.length,s,!1))===h.next&&(h.steiner=!0),l.push(g(h));for(l.sort(c),o=0;o<l.length;o++)d(l[o],i),i=r(i,i.next);return i}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);r>=a&&a>o&&(o=a,i=n.x<n.next.x?n:n.next)}n=n.next}while(n!==e);if(!i)return null;if(t.x===i.x)return i.prev;var h,l=i,u=1/0;for(n=i.next;n!==l;)r>=n.x&&n.x>=i.x&&_(s<i.y?r:o,s,i.x,i.y,s<i.y?o:r,s,n.x,n.y)&&(h=Math.abs(s-n.y)/(r-n.x),(u>h||h===u&&n.x>i.x)&&b(n,t)&&(i=n,u=h)),n=n.next;return i}(t,e)){var i=T(e,t);r(i,i.next)}}function p(t,e,i,n){var r=t;do{null===r.z&&(r.z=f(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;l>e&&(a++,n=n.nextZ);e++);for(h=l;a>0||h>0&&n;)0===a?(r=n,n=n.nextZ,h--):0!==h&&n?i.z<=n.z?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--):(r=i,i=i.nextZ,a--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,l*=2}while(o>1)}(r)}function f(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)/r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)/r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function _(t,e,i,n,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(n-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(r-o)*(n-a)>=0}function v(t,e){return y(t,e)||t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&x(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&b(t,e)&&b(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)}function m(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,i,n){return m(t,e,i)>0!=m(t,e,n)>0&&m(i,n,t)>0!=m(i,n,e)>0}function b(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function T(t,e){var i=new w(t.i,t.x,t.y),n=new w(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function E(t,e,i,n){var r=new w(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}e.exports=function(t,e,i){i=i||2;var r,o,a,h,l,c,d,p=e&&e.length,f=p?e[0]*i:t.length,g=n(t,0,f,i,!0),_=[];if(!g)return _;if(p&&(g=u(t,e,g,i)),t.length>80*i){r=a=t[0],o=h=t[1];for(var v=i;f>v;v+=i)r>(l=t[v])&&(r=l),o>(c=t[v+1])&&(o=c),l>a&&(a=l),c>h&&(h=c);d=Math.max(a-r,h-o)}return s(g,_,i,r,o,d),_}},{}],10:[function(t,e,i){"use strict";function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(){}var s="function"!=typeof Object.create&&"~";r.prototype._events=void 0,r.prototype.listeners=function(t,e){var i=s?s+t:t,n=this._events&&this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);o>r;r++)a[r]=n[r].fn;return a},r.prototype.emit=function(t,e,i,n,r,o){var a=s?s+t:t;if(!this._events||!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if("function"==typeof u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,r),!0;case 6:return u.fn.call(u.context,e,i,n,r,o),!0}for(l=1,h=new Array(c-1);c>l;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,p=u.length;for(l=0;p>l;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,i);break;default:if(!h)for(d=1,h=new Array(c-1);c>d;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},r.prototype.on=function(t,e,i){var r=new n(e,i||this),o=s?s+t:t;return this._events||(this._events=s?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):this._events[o]=r,this},r.prototype.once=function(t,e,i){var r=new n(e,i||this,!0),o=s?s+t:t;return this._events||(this._events=s?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):this._events[o]=r,this},r.prototype.removeListener=function(t,e,i,n){var r=s?s+t:t;if(!this._events||!this._events[r])return this;var o=this._events[r],a=[];if(e)if(o.fn)(o.fn!==e||n&&!o.once||i&&o.context!==i)&&a.push(o);else for(var h=0,l=o.length;l>h;h++)(o[h].fn!==e||n&&!o[h].once||i&&o[h].context!==i)&&a.push(o[h]);return a.length?this._events[r]=1===a.length?a[0]:a:delete this._events[r],this},r.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[s?s+t:t]:this._events=s?{}:Object.create(null),this):this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=s,void 0!==e&&(e.exports=r)},{}],11:[function(t,e,i){"use strict";function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(t,e){for(var i,o,a=n(t),h=1;h<arguments.length;h++){for(var l in i=Object(arguments[h]))r.call(i,l)&&(a[l]=i[l]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(i);for(var u=0;u<o.length;u++)s.call(i,o[u])&&(a[o[u]]=i[o[u]])}}return a}},{}],12:[function(t,e,i){(function(t){!function(){function i(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(n,arguments)}}var n,r,s={};null!=(n=this)&&(r=n.async),s.noConflict=function(){return n.async=r,s};var o=Object.prototype.toString,a=Array.isArray||function(t){return"[object Array]"===o.call(t)},h=function(t,e){for(var i=0;i<t.length;i+=1)e(t[i],i,t)},l=function(t,e){if(t.map)return t.map(e);var i=[];return h(t,(function(t,n,r){i.push(e(t,n,r))})),i},u=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e};void 0!==t&&t.nextTick?(s.nextTick=t.nextTick,"undefined"!=typeof setImmediate?s.setImmediate=function(t){setImmediate(t)}:s.setImmediate=s.nextTick):"function"==typeof setImmediate?(s.nextTick=function(t){setImmediate(t)},s.setImmediate=s.nextTick):(s.nextTick=function(t){setTimeout(t,0)},s.setImmediate=s.nextTick),s.each=function(t,e,n){function r(e){e?(n(e),n=function(){}):(s+=1)>=t.length&&n()}if(n=n||function(){},!t.length)return n();var s=0;h(t,(function(t){e(t,i(r))}))},s.forEach=s.each,s.eachSeries=function(t,e,i){if(i=i||function(){},!t.length)return i();var n=0,r=function(){e(t[n],(function(e){e?(i(e),i=function(){}):(n+=1)>=t.length?i():r()}))};r()},s.forEachSeries=s.eachSeries,s.eachLimit=function(t,e,i,n){c(e).apply(null,[t,i,n])},s.forEachLimit=s.eachLimit;var c=function(t){return function(e,i,n){if(n=n||function(){},!e.length||0>=t)return n();var r=0,s=0,o=0;!function a(){if(r>=e.length)return n();for(;t>o&&s<e.length;)o+=1,i(e[(s+=1)-1],(function(t){t?(n(t),n=function(){}):(o-=1,(r+=1)>=e.length?n():a())}))}()}},d=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.each].concat(e))}},p=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[s.eachSeries].concat(e))}},f=function(t,e,i,n){if(e=l(e,(function(t,e){return{index:e,value:t}})),n){var r=[];t(e,(function(t,e){i(t.value,(function(i,n){r[t.index]=n,e(i)}))}),(function(t){n(t,r)}))}else t(e,(function(t,e){i(t.value,(function(t){e(t)}))}))};s.map=d(f),s.mapSeries=p(f),s.mapLimit=function(t,e,i,n){return g(e)(t,i,n)};var g=function(t){return function(t,e){return function(){var i=Array.prototype.slice.call(arguments);return e.apply(null,[c(t)].concat(i))}}(t,f)};s.reduce=function(t,e,i,n){s.eachSeries(t,(function(t,n){i(e,t,(function(t,i){e=i,n(t)}))}),(function(t){n(t,e)}))},s.inject=s.reduce,s.foldl=s.reduce,s.reduceRight=function(t,e,i,n){var r=l(t,(function(t){return t})).reverse();s.reduce(r,e,i,n)},s.foldr=s.reduceRight;var _=function(t,e,i,n){var r=[];t(e=l(e,(function(t,e){return{index:e,value:t}})),(function(t,e){i(t.value,(function(i){i&&r.push(t),e()}))}),(function(t){n(l(r.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))};s.filter=d(_),s.filterSeries=p(_),s.select=s.filter,s.selectSeries=s.filterSeries;var v=function(t,e,i,n){var r=[];t(e=l(e,(function(t,e){return{index:e,value:t}})),(function(t,e){i(t.value,(function(i){i||r.push(t),e()}))}),(function(t){n(l(r.sort((function(t,e){return t.index-e.index})),(function(t){return t.value})))}))};s.reject=d(v),s.rejectSeries=p(v);var m=function(t,e,i,n){t(e,(function(t,e){i(t,(function(i){i?(n(t),n=function(){}):e()}))}),(function(t){n()}))};s.detect=d(m),s.detectSeries=p(m),s.some=function(t,e,i){s.each(t,(function(t,n){e(t,(function(t){t&&(i(!0),i=function(){}),n()}))}),(function(t){i(!1)}))},s.any=s.some,s.every=function(t,e,i){s.each(t,(function(t,n){e(t,(function(t){t||(i(!1),i=function(){}),n()}))}),(function(t){i(!0)}))},s.all=s.every,s.sortBy=function(t,e,i){s.map(t,(function(t,i){e(t,(function(e,n){e?i(e):i(null,{value:t,criteria:n})}))}),(function(t,e){if(t)return i(t);i(null,l(e.sort((function(t,e){var i=t.criteria,n=e.criteria;return n>i?-1:i>n?1:0})),(function(t){return t.value})))}))},s.auto=function(t,e){e=e||function(){};var i=u(t),n=i.length;if(!n)return e();var r={},o=[],l=function(t){o.unshift(t)},c=function(t){for(var e=0;e<o.length;e+=1)if(o[e]===t)return void o.splice(e,1)},d=function(){n--,h(o.slice(0),(function(t){t()}))};l((function(){if(!n){var t=e;e=function(){},t(null,r)}})),h(i,(function(i){var n=a(t[i])?t[i]:[t[i]],o=function(t){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),t){var o={};h(u(r),(function(t){o[t]=r[t]})),o[i]=n,e(t,o),e=function(){}}else r[i]=n,s.setImmediate(d)},p=n.slice(0,Math.abs(n.length-1))||[],f=function(){return function(t,e,i){return t.reduce?t.reduce(e,i):(h(t,(function(t,n,r){i=e(i,t,n,r)})),i)}(p,(function(t,e){return t&&r.hasOwnProperty(e)}),!0)&&!r.hasOwnProperty(i)};if(f())n[n.length-1](o,r);else{var g=function(){f()&&(c(g),n[n.length-1](o,r))};l(g)}}))},s.retry=function(t,e,i){var n=[];"function"==typeof t&&(i=e,e=t,t=5),t=parseInt(t,10)||5;var r=function(r,o){for(var a=function(t,e){return function(i){t((function(t,n){i(!t||e,{err:t,result:n})}),o)}};t;)n.push(a(e,!(t-=1)));s.series(n,(function(t,e){e=e[e.length-1],(r||i)(e.err,e.result)}))};return i?r():r},s.waterfall=function(t,e){if(e=e||function(){},!a(t)){var i=new Error("First argument to waterfall must be an array of functions");return e(i)}if(!t.length)return e();var n=function(t){return function(i){if(i)e.apply(null,arguments),e=function(){};else{var r=Array.prototype.slice.call(arguments,1),o=t.next();o?r.push(n(o)):r.push(e),s.setImmediate((function(){t.apply(null,r)}))}}};n(s.iterator(t))()};var y=function(t,e,i){if(i=i||function(){},a(e))t.map(e,(function(t,e){t&&t((function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)}))}),i);else{var n={};t.each(u(e),(function(t,i){e[t]((function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),n[t]=r,i(e)}))}),(function(t){i(t,n)}))}};s.parallel=function(t,e){y({map:s.map,each:s.each},t,e)},s.parallelLimit=function(t,e,i){y({map:g(e),each:c(e)},t,i)},s.series=function(t,e){if(e=e||function(){},a(t))s.mapSeries(t,(function(t,e){t&&t((function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e.call(null,t,i)}))}),e);else{var i={};s.eachSeries(u(t),(function(e,n){t[e]((function(t){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),i[e]=r,n(t)}))}),(function(t){e(t,i)}))}},s.iterator=function(t){var e=function(i){var n=function(){return t.length&&t[i].apply(null,arguments),n.next()};return n.next=function(){return i<t.length-1?e(i+1):null},n};return e(0)},s.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var x=function(t,e,i,n){var r=[];t(e,(function(t,e){i(t,(function(t,i){r=r.concat(i||[]),e(t)}))}),(function(t){n(t,r)}))};s.concat=d(x),s.concatSeries=p(x),s.whilst=function(t,e,i){t()?e((function(n){return n?i(n):void s.whilst(t,e,i)})):i()},s.doWhilst=function(t,e,i){t((function(n){if(n)return i(n);var r=Array.prototype.slice.call(arguments,1);e.apply(null,r)?s.doWhilst(t,e,i):i()}))},s.until=function(t,e,i){t()?i():e((function(n){return n?i(n):void s.until(t,e,i)}))},s.doUntil=function(t,e,i){t((function(n){if(n)return i(n);var r=Array.prototype.slice.call(arguments,1);e.apply(null,r)?i():s.doUntil(t,e,i)}))},s.queue=function(t,e){function n(t,e,i,n){return t.started||(t.started=!0),a(e)||(e=[e]),0==e.length?s.setImmediate((function(){t.drain&&t.drain()})):void h(e,(function(e){var r={data:e,callback:"function"==typeof n?n:null};i?t.tasks.unshift(r):t.tasks.push(r),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)}))}void 0===e&&(e=1);var r=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){n(o,t,!1,e)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(t,e){n(o,t,!0,e)},process:function(){if(!o.paused&&r<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),r+=1;var n=i((function(){r-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+r===0&&o.drain(),o.process()}));t(e.data,n)}},length:function(){return o.tasks.length},running:function(){return r},idle:function(){return o.tasks.length+r===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var t=1;t<=o.concurrency;t++)s.setImmediate(o.process)}}};return o},s.priorityQueue=function(t,e){function i(t,e){return t.priority-e.priority}function n(t,e,n,r){return t.started||(t.started=!0),a(e)||(e=[e]),0==e.length?s.setImmediate((function(){t.drain&&t.drain()})):void h(e,(function(e){var o={data:e,priority:n,callback:"function"==typeof r?r:null};t.tasks.splice(function(t,e,i){for(var n=-1,r=t.length-1;r>n;){var s=n+(r-n+1>>>1);i(e,t[s])>=0?n=s:r=s-1}return n}(t.tasks,o,i)+1,0,o),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),s.setImmediate(t.process)}))}var r=s.queue(t,e);return r.push=function(t,e,i){n(r,t,e,i)},delete r.unshift,r},s.cargo=function(t,e){var i=!1,n=[],r={tasks:n,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,i){a(t)||(t=[t]),h(t,(function(t){n.push({data:t,callback:"function"==typeof i?i:null}),r.drained=!1,r.saturated&&n.length===e&&r.saturated()})),s.setImmediate(r.process)},process:function s(){if(!i){if(0===n.length)return r.drain&&!r.drained&&r.drain(),void(r.drained=!0);var o="number"==typeof e?n.splice(0,e):n.splice(0,n.length),a=l(o,(function(t){return t.data}));r.empty&&r.empty(),i=!0,t(a,(function(){i=!1;var t=arguments;h(o,(function(e){e.callback&&e.callback.apply(null,t)})),s()}))}},length:function(){return n.length},running:function(){return i}};return r};var b=function(t){return function(e){var i=Array.prototype.slice.call(arguments,1);e.apply(null,i.concat([function(e){var i=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&h(i,(function(e){console[t](e)})))}]))}};s.log=b("log"),s.dir=b("dir"),s.memoize=function(t,e){var i={},n={};e=e||function(t){return t};var r=function(){var r=Array.prototype.slice.call(arguments),o=r.pop(),a=e.apply(null,r);a in i?s.nextTick((function(){o.apply(null,i[a])})):a in n?n[a].push(o):(n[a]=[o],t.apply(null,r.concat([function(){i[a]=arguments;var t=n[a];delete n[a];for(var e=0,r=t.length;r>e;e++)t[e].apply(null,arguments)}])))};return r.memo=i,r.unmemoized=t,r},s.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},s.times=function(t,e,i){for(var n=[],r=0;t>r;r++)n.push(r);return s.map(n,e,i)},s.timesSeries=function(t,e,i){for(var n=[],r=0;t>r;r++)n.push(r);return s.mapSeries(n,e,i)},s.seq=function(){var t=arguments;return function(){var e=this,i=Array.prototype.slice.call(arguments),n=i.pop();s.reduce(t,i,(function(t,i,n){i.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);n(t,e)}]))}),(function(t,i){n.apply(e,[t].concat(i))}))}},s.compose=function(){return s.seq.apply(null,Array.prototype.reverse.call(arguments))};var T=function(t,e){var i=function(){var i=this,n=Array.prototype.slice.call(arguments),r=n.pop();return t(e,(function(t,e){t.apply(i,n.concat([e]))}),r)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return i.apply(this,n)}return i};s.applyEach=d(T),s.applyEachSeries=p(T),s.forever=function(t,e){!function i(n){if(n){if(e)return e(n);throw n}t(i)}()},void 0!==e&&e.exports?e.exports=s:n.async=s}()}).call(this,t("_process"))},{_process:3}],13:[function(t,e,i){function n(t,e){a.call(this),e=e||10,this.baseUrl=t||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=r.queue(this._boundLoadResource,e),this.resources={}}var r=t("async"),s=t("url"),o=t("./Resource"),a=t("eventemitter3");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.add=n.prototype.enqueue=function(t,e,i,n){if(Array.isArray(t)){for(var r=0;r<t.length;++r)this.add(t[r]);return this}if("object"==typeof t&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.resources[t])throw new Error('Resource with name "'+t+'" already exists.');return e=this._handleBaseUrl(e),this.resources[t]=new o(t,e,i),"function"==typeof n&&this.resources[t].once("afterMiddleware",n),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[t]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[t]),this._progressChunk=100/this._buffer.length),this},n.prototype._handleBaseUrl=function(t){var e=s.parse(t);return e.protocol||0===e.pathname.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t},n.prototype.before=n.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},n.prototype.after=n.prototype.use=function(t){return this._afterMiddleware.push(t),this},n.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},n.prototype.load=function(t){if("function"==typeof t&&this.once("complete",t),this._queue.started)return this;this.emit("start",this);for(var e=0;e<this._buffer.length;++e)this._queue.push(this._buffer[e]);return this._buffer.length=0,this},n.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,this._runMiddleware(t,this._beforeMiddleware,(function(){t.load(i._boundOnLoad)}))},n.prototype._onComplete=function(){this.emit("complete",this,this.resources)},n.prototype._onLoad=function(t){this.progress+=this._progressChunk,this.emit("progress",this,t),this._runMiddleware(t,this._afterMiddleware,(function(){t.emit("afterMiddleware",t),this._numToLoad--,0===this._numToLoad&&(this.progress=100,this._onComplete()),t.error?this.emit("error",t.error,this,t):this.emit("load",this,t)})),t._dequeue()},n.prototype._runMiddleware=function(t,e,i){var n=this;r.eachSeries(e,(function(e,i){e.call(n,t,i)}),i.bind(this,t))},n.LOAD_TYPE=o.LOAD_TYPE,n.XHR_READY_STATE=o.XHR_READY_STATE,n.XHR_RESPONSE_TYPE=o.XHR_RESPONSE_TYPE},{"./Resource":14,async:12,eventemitter3:10,url:8}],14:[function(t,e,i){function n(t,e,i){if(o.call(this),i=i||{},"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");this.name=t,this.url=e,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":i.crossOrigin,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function r(t){return t.toString().replace("object ","")}function s(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}var o=t("eventemitter3"),a=t("url"),h=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},n.prototype.load=function(t){switch(this.emit("start",this),t&&this.once("complete",t),(!1===this.crossOrigin||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case n.LOAD_TYPE.IMAGE:this._loadImage();break;case n.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case n.LOAD_TYPE.VIDEO:this._loadElement("video");break;case n.LOAD_TYPE.XHR:default:h&&this.crossOrigin?this._loadXdr():this._loadXhr()}},n.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},n.prototype._loadElement=function(t){if("audio"===t&&"undefined"!=typeof Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return this.error=new Error("Unsupported element "+t),void this.complete();if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]));else this.data.appendChild(this._createSource(t,this.url));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},n.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===n.XHR_RESPONSE_TYPE.JSON||this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=n.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},n.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){t.send()}),0)},n.prototype._createSource=function(t,e,i){i||(i=t+"/"+e.substr(e.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=e,n.type=i,n},n.prototype._onError=function(t){this.error=new Error("Failed to load element using "+t.target.nodeName),this.complete()},n.prototype._onProgress=function(t){t&&t.lengthComputable&&this.emit("progress",this,t.loaded/t.total)},n.prototype._xhrOnError=function(){this.error=new Error(r(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},n.prototype._xhrOnAbort=function(){this.error=new Error(r(this.xhr)+" Request was aborted by the user."),this.complete()},n.prototype._xdrOnTimeout=function(){this.error=new Error(r(this.xhr)+" Request timed out."),this.complete()},n.prototype._xhrOnLoad=function(){var t=this.xhr,e=void 0!==t.status?t.status:200;if(200===e||204===e||0===e&&t.responseText.length>0)if(this.xhrType===n.XHR_RESPONSE_TYPE.TEXT)this.data=t.responseText;else if(this.xhrType===n.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t.responseText),this.isJson=!0}catch(t){this.error=new Error("Error trying to parse loaded json:",t)}else if(this.xhrType===n.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(t.responseText,"text/xml")}else{var r=document.createElement("div");r.innerHTML=t.responseText,this.data=r}this.isXml=!0}catch(t){this.error=new Error("Error trying to parse loaded xml:",t)}else this.data=t.response||t.responseText;else this.error=new Error("["+t.status+"]"+t.statusText+":"+t.responseURL);this.complete()},n.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,l||(l=document.createElement("a")),l.href=t;var i=!(t=a.parse(l.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"},n.prototype._determineXhrType=function(){return n._xhrTypeMap[this._getExtension()]||n.XHR_RESPONSE_TYPE.TEXT},n.prototype._determineLoadType=function(){return n._loadTypeMap[this._getExtension()]||n.LOAD_TYPE.XHR},n.prototype._getExtension=function(){var t,e=this.url;if(this.isDataUrl){var i=e.indexOf("/");t=e.substring(i+1,e.indexOf(";",i))}else{var n=e.indexOf("?");-1!==n&&(e=e.substring(0,n)),t=e.substring(e.lastIndexOf(".")+1)}return t},n.prototype._getMimeFromXhrType=function(t){switch(t){case n.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case n.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case n.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case n.XHR_RESPONSE_TYPE.JSON:return"application/json";case n.XHR_RESPONSE_TYPE.DEFAULT:case n.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},n.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},n.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},n.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},n._loadTypeMap={gif:n.LOAD_TYPE.IMAGE,png:n.LOAD_TYPE.IMAGE,bmp:n.LOAD_TYPE.IMAGE,jpg:n.LOAD_TYPE.IMAGE,jpeg:n.LOAD_TYPE.IMAGE,tif:n.LOAD_TYPE.IMAGE,tiff:n.LOAD_TYPE.IMAGE,webp:n.LOAD_TYPE.IMAGE,tga:n.LOAD_TYPE.IMAGE},n._xhrTypeMap={xhtml:n.XHR_RESPONSE_TYPE.DOCUMENT,html:n.XHR_RESPONSE_TYPE.DOCUMENT,htm:n.XHR_RESPONSE_TYPE.DOCUMENT,xml:n.XHR_RESPONSE_TYPE.DOCUMENT,tmx:n.XHR_RESPONSE_TYPE.DOCUMENT,tsx:n.XHR_RESPONSE_TYPE.DOCUMENT,svg:n.XHR_RESPONSE_TYPE.DOCUMENT,gif:n.XHR_RESPONSE_TYPE.BLOB,png:n.XHR_RESPONSE_TYPE.BLOB,bmp:n.XHR_RESPONSE_TYPE.BLOB,jpg:n.XHR_RESPONSE_TYPE.BLOB,jpeg:n.XHR_RESPONSE_TYPE.BLOB,tif:n.XHR_RESPONSE_TYPE.BLOB,tiff:n.XHR_RESPONSE_TYPE.BLOB,webp:n.XHR_RESPONSE_TYPE.BLOB,tga:n.XHR_RESPONSE_TYPE.BLOB,json:n.XHR_RESPONSE_TYPE.JSON,text:n.XHR_RESPONSE_TYPE.TEXT,txt:n.XHR_RESPONSE_TYPE.TEXT},n.setExtensionLoadType=function(t,e){s(n._loadTypeMap,t,e)},n.setExtensionXhrType=function(t,e){s(n._xhrTypeMap,t,e)}},{eventemitter3:10,url:8}],15:[function(t,e,i){e.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(t){for(var e,i="",n=new Array(4),r=0,s=0;r<t.length;){for(e=new Array(3),s=0;s<e.length;s++)r<t.length?e[s]=255&t.charCodeAt(r++):e[s]=0;switch(n[0]=e[0]>>2,n[1]=(3&e[0])<<4|e[1]>>4,n[2]=(15&e[1])<<2|e[2]>>6,n[3]=63&e[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(s=0;s<n.length;s++)i+=this._keyStr.charAt(n[s])}return i}}},{}],16:[function(t,e,i){e.exports=t("./Loader"),e.exports.Resource=t("./Resource"),e.exports.middleware={caching:{memory:t("./middlewares/caching/memory")},parsing:{blob:t("./middlewares/parsing/blob")}}},{"./Loader":13,"./Resource":14,"./middlewares/caching/memory":17,"./middlewares/parsing/blob":18}],17:[function(t,e,i){var n={};e.exports=function(){return function(t,e){n[t.url]?(t.data=n[t.url],t.complete()):t.once("complete",(function(){n[this.url]=this.data})),e()}}},{}],18:[function(t,e,i){var n=t("../../Resource"),r=t("../../b64");window.URL=window.URL||window.webkitURL,e.exports=function(){return function(t,e){if(!t.data)return e();if(t.xhr&&t.xhrType===n.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=URL.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=i,t.isImage=!0,t.data.onload=function(){URL.revokeObjectURL(i),t.data.onload=null,e()}}}else{var s=t.xhr.getResponseHeader("content-type");s&&0===s.indexOf("image")&&(t.data=new Image,t.data.src="data:"+s+";base64,"+r.encodeBinary(t.xhr.responseText),t.isImage=!0,t.data.onload=function(){t.data.onload=null,e()})}else e()}}},{"../../Resource":14,"../../b64":15}],19:[function(t,e,i){e.exports={name:"pixi.js",version:"3.0.9",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/pixijs/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/pixijs/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:["bin/","src/","CONTRIBUTING.md","LICENSE","package.json","README.md"],dependencies:{async:"^1.5.0",brfs:"^1.4.1",earcut:"^2.0.7",eventemitter3:"^1.1.1","object-assign":"^4.0.1","resource-loader":"^1.6.4"},devDependencies:{browserify:"^11.1.0",chai:"^3.2.0",del:"^2.0.2",gulp:"^3.9.0","gulp-cached":"^1.1.0","gulp-concat":"^2.6.0","gulp-debug":"^2.1.0","gulp-header":"^1.7.1","gulp-jshint":"^1.11.2","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.4.1","gulp-util":"^3.0.6","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.2","jshint-summary":"^0.4.0",minimist:"^1.2.0",mocha:"^2.3.2","require-dir":"^0.3.0","run-sequence":"^1.1.2",testem:"^0.9.4","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.4.0"},browserify:{transform:["brfs"]}}},{}],20:[function(t,e,i){function n(t){var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,window.addEventListener("keydown",this._onKeyDown,!1)}var r=t("../core");Object.assign(r.DisplayObject.prototype,t("./accessibleTarget")),n.prototype.constructor=n,e.exports=n,n.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode.appendChild(this.div))},n.prototype.deactivate=function(){this.isActive&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode.removeChild(this.div))},n.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=e.length-1;i>=0;i--)this.updateAccessibleObjects(e[i])}},n.prototype.update=function(){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var o=this.children[s];if(o.renderId!==this.renderId)o._accessibleActive=!1,r.utils.removeItems(this.children,s,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,s--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var a=o.hitArea,h=o.worldTransform;o.hitArea?(n.style.left=(h.tx+a.x*h.a)*e+"px",n.style.top=(h.ty+a.y*h.d)*i+"px",n.style.width=a.width*h.a*e+"px",n.style.height=a.height*h.d*i+"px"):(a=o.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*i+"px",n.style.width=a.width*e+"px",n.style.height=a.height*i+"px")}}this.renderId++},n.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},n.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.title=t.accessibleTitle||"displayObject "+this.tabIndex,t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},n.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},n.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},n.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},n.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},n.prototype._onMouseMove=function(){this.deactivate()},n.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},r.WebGLRenderer.registerPlugin("accessibility",n),r.CanvasRenderer.registerPlugin("accessibility",n)},{"../core":30,"./accessibleTarget":21}],21:[function(t,e,i){e.exports={accessible:!1,accessibleTitle:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],22:[function(t,e,i){e.exports={accessibleTarget:t("./accessibleTarget"),AccessibilityManager:t("./AccessibilityManager")}},{"./AccessibilityManager":20,"./accessibleTarget":21}],23:[function(t,e,i){var n={VERSION:t("../../package.json").version,PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};e.exports=n},{"../../package.json":19}],24:[function(t,e,i){function n(){o.call(this),this.children=[]}var r=t("../math"),s=t("../utils"),o=t("./DisplayObject"),a=t("../textures/RenderTexture"),h=new r.Matrix;n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{configurable:!0,get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},height:{configurable:!0,get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}}),n.prototype.onChildrenChange=function(){},n.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;e>i;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},n.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.onChildrenChange(e),t.emit("added",this),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},n.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);if(0>i||0>n)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[i]=e,this.children[n]=t,this.onChildrenChange(n>i?i:n)}},n.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},n.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);s.removeItems(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},n.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[t]},n.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;e>i;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(-1===n)return;t.parent=null,s.removeItems(this.children,n,1),this.onChildrenChange(n),t.emit("removed",this)}return t},n.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,s.removeItems(this.children,t,1),this.onChildrenChange(t),e.emit("removed",this),e},n.prototype.removeChildren=function(t,e){var i,n,r=t||0,s="number"==typeof e?e:this.children.length,o=s-r;if(o>0&&s>=o){for(i=this.children.splice(r,o),n=0;n<i.length;++n)i[n].parent=null;for(this.onChildrenChange(t),n=0;n<i.length;++n)i[n].emit("removed",this);return i}if(0===o&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},n.prototype.generateTexture=function(t,e,i){var n=this.getLocalBounds(),r=new a(t,0|n.width,0|n.height,i,e);return h.tx=-n.x,h.ty=-n.y,r.render(this,h),r},n.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var t=0,e=this.children.length;e>t;++t)this.children[t].updateTransform()}},n.prototype.containerUpdateTransform=n.prototype.updateTransform,n.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return r.Rectangle.EMPTY;for(var t,e,i,n=1/0,s=1/0,o=-1/0,a=-1/0,h=!1,l=0,u=this.children.length;u>l;++l){this.children[l].visible&&(h=!0,n=n<(t=this.children[l].getBounds()).x?n:t.x,s=s<t.y?s:t.y,o=o>(e=t.width+t.x)?o:e,a=a>(i=t.height+t.y)?a:i)}if(!h)return r.Rectangle.EMPTY;var c=this._bounds;c.x=n,c.y=s,c.width=o-n,c.height=a-s,this._currentBounds=c}return this._currentBounds},n.prototype.containerGetBounds=n.prototype.getBounds,n.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=r.Matrix.IDENTITY;for(var e=0,i=this.children.length;i>e;++e)this.children[e].updateTransform();return this.worldTransform=t,this._currentBounds=null,this.getBounds(r.Matrix.IDENTITY)},n.prototype.renderWebGL=function(t){var e,i;if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters){for(t.currentRenderer.flush(),this._filters&&this._filters.length&&t.filterManager.pushFilter(this,this._filters),this._mask&&t.maskManager.pushMask(this,this._mask),t.currentRenderer.start(),this._renderWebGL(t),e=0,i=this.children.length;i>e;e++)this.children[e].renderWebGL(t);t.currentRenderer.flush(),this._mask&&t.maskManager.popMask(this,this._mask),this._filters&&t.filterManager.popFilter(),t.currentRenderer.start()}else for(this._renderWebGL(t),e=0,i=this.children.length;i>e;++e)this.children[e].renderWebGL(t)},n.prototype._renderWebGL=function(t){},n.prototype._renderCanvas=function(t){},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask,t),this._renderCanvas(t);for(var e=0,i=this.children.length;i>e;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},n.prototype.destroy=function(t){if(o.prototype.destroy.call(this),t)for(var e=0,i=this.children.length;i>e;++e)this.children[e].destroy(t);this.removeChildren(),this.children=null}},{"../math":33,"../textures/RenderTexture":71,"../utils":77,"./DisplayObject":25}],25:[function(t,e,i){function n(){o.call(this),this.position=new r.Point,this.scale=new r.Point(1,1),this.pivot=new r.Point(0,0),this.skew=new r.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new r.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new r.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null}var r=t("../math"),s=t("../textures/RenderTexture"),o=t("eventemitter3"),a=t("../const"),h=new r.Matrix,l={worldTransform:new r.Matrix,worldAlpha:1,children:[]};n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},worldVisible:{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},mask:{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}}),n.prototype.updateTransform=function(){var t,e,i,n,r,s,o=this.parent.worldTransform,l=this.worldTransform;this.skew.x||this.skew.y?(h.setTransform(this.position.x,this.position.y,this.pivot.x,this.pivot.y,this.scale.x,this.scale.y,this.rotation,this.skew.x,this.skew.y),l.a=h.a*o.a+h.b*o.c,l.b=h.a*o.b+h.b*o.d,l.c=h.c*o.a+h.d*o.c,l.d=h.c*o.b+h.d*o.d,l.tx=h.tx*o.a+h.ty*o.c+o.tx,l.ty=h.tx*o.b+h.ty*o.d+o.ty):this.rotation%a.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),t=this._cr*this.scale.x,e=this._sr*this.scale.x,i=-this._sr*this.scale.y,n=this._cr*this.scale.y,r=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(r-=this.pivot.x*t+this.pivot.y*i,s-=this.pivot.x*e+this.pivot.y*n),l.a=t*o.a+e*o.c,l.b=t*o.b+e*o.d,l.c=i*o.a+n*o.c,l.d=i*o.b+n*o.d,l.tx=r*o.a+s*o.c+o.tx,l.ty=r*o.b+s*o.d+o.ty):(t=this.scale.x,n=this.scale.y,r=this.position.x-this.pivot.x*t,s=this.position.y-this.pivot.y*n,l.a=t*o.a,l.b=t*o.b,l.c=n*o.c,l.d=n*o.d,l.tx=r*o.a+s*o.c+o.tx,l.ty=r*o.b+s*o.d+o.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},n.prototype.displayObjectUpdateTransform=n.prototype.updateTransform,n.prototype.getBounds=function(t){return r.Rectangle.EMPTY},n.prototype.getLocalBounds=function(){return this.getBounds(r.Matrix.IDENTITY)},n.prototype.toGlobal=function(t,e){return this.parent?this.displayObjectUpdateTransform():(this.parent=l,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.apply(t,e)},n.prototype.toLocal=function(t,e,i){return e&&(t=e.toGlobal(t,i)),this.parent?this.displayObjectUpdateTransform():(this.parent=l,this.displayObjectUpdateTransform(),this.parent=null),this.worldTransform.applyInverse(t,i)},n.prototype.renderWebGL=function(t){},n.prototype.renderCanvas=function(t){},n.prototype.generateTexture=function(t,e,i){var n=this.getLocalBounds(),r=new s(t,0|n.width,0|n.height,e,i);return h.tx=-n.x,h.ty=-n.y,r.render(this,h),r},n.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},n.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){return this.position.x=t||0,this.position.y=e||0,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r||0,this.skew.x=s||0,this.skew.y=o||0,this.pivot.x=a||0,this.pivot.y=h||0,this},n.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.skew=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":23,"../math":33,"../textures/RenderTexture":71,eventemitter3:10}],26:[function(t,e,i){function n(){r.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=u.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new l.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}var r=t("../display/Container"),s=t("../textures/Texture"),o=t("../renderers/canvas/utils/CanvasBuffer"),a=t("../renderers/canvas/utils/CanvasGraphics"),h=t("./GraphicsData"),l=t("../math"),u=t("../const"),c=new l.Point;n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){var t=new n;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=!0,t.glDirty=!0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},n.prototype.lineStyle=function(t,e,i){if(this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=void 0===i?1:i,this.currentPath)if(this.currentPath.shape.points.length){var n=new l.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},n.prototype.moveTo=function(t,e){var i=new l.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},n.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty=!0,this},n.prototype.quadraticCurveTo=function(t,e,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r,s,o=this.currentPath.shape.points;0===o.length&&this.moveTo(0,0);for(var a=o[o.length-2],h=o[o.length-1],l=0,u=1;20>=u;++u)r=a+(t-a)*(l=u/20),s=h+(e-h)*l,o.push(r+(t+(i-t)*l-r)*l,s+(e+(n-e)*l-s)*l);return this.dirty=this.boundsDirty=!0,this},n.prototype.bezierCurveTo=function(t,e,i,n,r,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var o,a,h,l,u,c=this.currentPath.shape.points,d=c[c.length-2],p=c[c.length-1],f=0,g=1;20>=g;++g)h=(a=(o=1-(f=g/20))*o)*o,u=(l=f*f)*f,c.push(h*d+3*a*f*t+3*o*l*i+u*r,h*p+3*a*f*e+3*o*l*n+u*s);return this.dirty=this.boundsDirty=!0,this},n.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,o=s[s.length-2],a=s[s.length-1]-e,h=o-t,l=n-e,u=i-t,c=Math.abs(a*u-h*l);if(1e-8>c||0===r)(s[s.length-2]!==t||s[s.length-1]!==e)&&s.push(t,e);else{var d=a*a+h*h,p=l*l+u*u,f=a*l+h*u,g=r*Math.sqrt(d)/c,_=r*Math.sqrt(p)/c,v=g*f/d,m=_*f/p,y=g*u+_*h,x=g*l+_*a,b=h*(_+v),T=a*(_+v),E=u*(g+m),S=l*(g+m),w=Math.atan2(T-x,b-y),A=Math.atan2(S-x,E-y);this.arc(y+t,x+e,r,w,A,h*l>u*a)}return this.dirty=this.boundsDirty=!0,this},n.prototype.arc=function(t,e,i,n,r,s){if(n===r)return this;!(s=s||!1)&&n>=r?r+=2*Math.PI:s&&r>=n&&(n+=2*Math.PI);var o=s?-1*(n-r):r-n,a=40*Math.ceil(Math.abs(o)/(2*Math.PI));if(0===o)return this;var h=t+Math.cos(n)*i,l=e+Math.sin(n)*i;this.currentPath?this.currentPath.shape.points.push(h,l):this.moveTo(h,l);for(var u=this.currentPath.shape.points,c=o/(2*a),d=2*c,p=Math.cos(c),f=Math.sin(c),g=a-1,_=g%1/g,v=0;g>=v;v++){var m=c+n+d*(v+_*v),y=Math.cos(m),x=-Math.sin(m);u.push((p*y+f*x)*i+t,(p*-x+f*y)*i+e)}return this.dirty=this.boundsDirty=!0,this},n.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===e?1:e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},n.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.prototype.drawRect=function(t,e,i,n){return this.drawShape(new l.Rectangle(t,e,i,n)),this},n.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new l.RoundedRectangle(t,e,i,n,r)),this},n.prototype.drawCircle=function(t,e,i){return this.drawShape(new l.Circle(t,e,i)),this},n.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new l.Ellipse(t,e,i,n)),this},n.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof l.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new l.Polygon(e);return r.closed=i,this.drawShape(r),this},n.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},n.prototype.generateTexture=function(t,e,i){e=e||1;var n=this.getLocalBounds(),r=new o(n.width*e,n.height*e),h=s.fromCanvas(r.canvas,i);return h.baseTexture.resolution=e,r.context.scale(e,e),r.context.translate(-n.x,-n.y),a.renderGraphics(this,r.context),h},n.prototype._renderWebGL=function(t){this.glDirty&&(this.dirty=!0,this.glDirty=!1),t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this)},n.prototype._renderCanvas=function(t){if(!0!==this.isMask){this._prevTint!==this.tint&&(this.dirty=!0);var e=t.context,i=this.worldTransform,n=t.blendModes[this.blendMode];n!==e.globalCompositeOperation&&(e.globalCompositeOperation=n);var r=t.resolution;e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r),a.renderGraphics(this,e)}},n.prototype.getBounds=function(t){if(!this._currentBounds){if(!this.renderable)return l.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var e=this._localBounds,i=e.x,n=e.width+e.x,r=e.y,s=e.height+e.y,o=t||this.worldTransform,a=o.a,h=o.b,u=o.c,c=o.d,d=o.tx,p=o.ty,f=a*n+u*s+d,g=c*s+h*n+p,_=a*i+u*s+d,v=c*s+h*i+p,m=a*i+u*r+d,y=c*r+h*i+p,x=a*n+u*r+d,b=c*r+h*n+p,T=f,E=g,S=f,w=g;S=(S=(S=S>_?_:S)>m?m:S)>x?x:S,w=(w=(w=w>v?v:w)>y?y:w)>b?b:w,T=x>(T=m>(T=_>T?_:T)?m:T)?x:T,E=b>(E=y>(E=v>E?v:E)?y:E)?b:E,this._bounds.x=S,this._bounds.width=T-S,this._bounds.y=w,this._bounds.height=E-w,this._currentBounds=this._bounds}return this._currentBounds},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);for(var e=this.graphicsData,i=0;i<e.length;i++){var n=e[i];if(n.fill&&n.shape&&n.shape.contains(c.x,c.y))return!0}return!1},n.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r,s,o,a,h,l,c=0;c<this.graphicsData.length;c++){var d=this.graphicsData[c],p=d.type,f=d.lineWidth;if(r=d.shape,p===u.SHAPES.RECT||p===u.SHAPES.RREC)o=r.x-f/2,a=r.y-f/2,t=t>o?o:t,e=o+(h=r.width+f)>e?o+h:e,i=i>a?a:i,n=a+(l=r.height+f)>n?a+l:n;else if(p===u.SHAPES.CIRC)o=r.x,a=r.y,t=t>o-(h=r.radius+f/2)?o-h:t,e=o+h>e?o+h:e,i=i>a-(l=r.radius+f/2)?a-l:i,n=a+l>n?a+l:n;else if(p===u.SHAPES.ELIP)o=r.x,a=r.y,t=t>o-(h=r.width+f/2)?o-h:t,e=o+h>e?o+h:e,i=i>a-(l=r.height+f/2)?a-l:i,n=a+l>n?a+l:n;else{s=r.points;for(var g=0;g<s.length;g+=2)t=t>(o=s[g])-f?o-f:t,e=o+f>e?o+f:e,i=i>(a=s[g+1])-f?a-f:i,n=a+f>n?a+f:n}}else t=0,e=0,i=0,n=0;var _=this.boundsPadding;this._localBounds.x=t-_,this._localBounds.width=e-t+2*_,this._localBounds.y=i-_,this._localBounds.height=n-i+2*_},n.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new h(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(e),e.type===u.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty=this.boundsDirty=!0,e},n.prototype.destroy=function(){r.prototype.destroy.apply(this,arguments);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var e in this._webgl)for(var i=0;i<this._webgl[e].data.length;++i)this._webgl[e].data[i].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":23,"../display/Container":24,"../math":33,"../renderers/canvas/utils/CanvasBuffer":45,"../renderers/canvas/utils/CanvasGraphics":46,"../textures/Texture":72,"./GraphicsData":27}],27:[function(t,e,i){function n(t,e,i,n,r,s,o){this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this._lineTint=e,this.fillColor=n,this.fillAlpha=r,this._fillTint=n,this.fill=s,this.shape=o,this.type=o.type}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n.prototype.destroy=function(){this.shape=null}},{}],28:[function(t,e,i){function n(t){a.call(this,t),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}var r=t("../../utils"),s=t("../../math"),o=t("../../const"),a=t("../../renderers/webgl/utils/ObjectRenderer"),h=t("../../renderers/webgl/WebGLRenderer"),l=t("./WebGLGraphicsData"),u=t("earcut");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,h.registerPlugin("graphics",n),n.prototype.onContextChange=function(){},n.prototype.destroy=function(){a.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},n.prototype.render=function(t){var e,i=this.renderer,n=i.gl,s=i.shaderManager.plugins.primitiveShader;(t.dirty||!t._webGL[n.id])&&this.updateGraphics(t);var o=t._webGL[n.id];i.blendModeManager.setBlendMode(t.blendMode);for(var a=0,h=o.data.length;h>a;a++)e=o.data[a],1===o.data[a].mode?(i.stencilManager.pushStencil(t,e),n.uniform1f(i.shaderManager.complexPrimitiveShader.uniforms.alpha._location,t.worldAlpha*e.alpha),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(e.indices.length-4)),i.stencilManager.popStencil(t,e)):(s=i.shaderManager.primitiveShader,i.shaderManager.setShader(s),n.uniformMatrix3fv(s.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(s.uniforms.projectionMatrix._location,!1,i.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(s.uniforms.tint._location,r.hex2rgb(t.tint)),n.uniform1f(s.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(s.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(s.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,e.indices.length,n.UNSIGNED_SHORT,0)),i.drawCount++},n.prototype.updateGraphics=function(t){var e,i,n=this.renderer.gl,r=t._webGL[n.id];if(r||(r=t._webGL[n.id]={lastIndex:0,data:[],gl:n}),t.dirty=!1,t.clearDirty){for(t.clearDirty=!1,e=0;e<r.data.length;e++){var s=r.data[e];s.reset(),this.graphicsDataPool.push(s)}r.data=[],r.lastIndex=0}for(e=r.lastIndex;e<t.graphicsData.length;e++){var a=t.graphicsData[e];if(a.type===o.SHAPES.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]!==a.points[a.points.length-2]||a.points[1]!==a.points[a.points.length-1])&&a.points.push(a.points[0],a.points[1]),a.fill&&a.points.length>=6)if(a.points.length<2*this.maximumSimplePolySize){i=this.switchMode(r,0),this.buildPoly(a,i)||(i=this.switchMode(r,1),this.buildComplexPoly(a,i))}else i=this.switchMode(r,1),this.buildComplexPoly(a,i);a.lineWidth>0&&(i=this.switchMode(r,0),this.buildLine(a,i))}else i=this.switchMode(r,0),a.type===o.SHAPES.RECT?this.buildRectangle(a,i):a.type===o.SHAPES.CIRC||a.type===o.SHAPES.ELIP?this.buildCircle(a,i):a.type===o.SHAPES.RREC&&this.buildRoundedRectangle(a,i);r.lastIndex++}for(e=0;e<r.data.length;e++)(i=r.data[e]).dirty&&i.upload()},n.prototype.switchMode=function(t,e){var i;return t.data.length?((i=t.data[t.data.length-1]).points.length>32e4||i.mode!==e||1===e)&&((i=this.graphicsDataPool.pop()||new l(t.gl)).mode=e,t.data.push(i)):((i=this.graphicsDataPool.pop()||new l(t.gl)).mode=e,t.data.push(i)),i.dirty=!0,i},n.prototype.buildRectangle=function(t,e){var i=t.shape,n=i.x,s=i.y,o=i.width,a=i.height;if(t.fill){var h=r.hex2rgb(t.fillColor),l=t.fillAlpha,u=h[0]*l,c=h[1]*l,d=h[2]*l,p=e.points,f=e.indices,g=p.length/6;p.push(n,s),p.push(u,c,d,l),p.push(n+o,s),p.push(u,c,d,l),p.push(n,s+a),p.push(u,c,d,l),p.push(n+o,s+a),p.push(u,c,d,l),f.push(g,g,g+1,g+2,g+3,g+3)}if(t.lineWidth){var _=t.points;t.points=[n,s,n+o,s,n+o,s+a,n,s+a,n,s],this.buildLine(t,e),t.points=_}},n.prototype.buildRoundedRectangle=function(t,e){var i=t.shape,n=i.x,s=i.y,o=i.width,a=i.height,h=i.radius,l=[];if(l.push(n,s+h),this.quadraticBezierCurve(n,s+a-h,n,s+a,n+h,s+a,l),this.quadraticBezierCurve(n+o-h,s+a,n+o,s+a,n+o,s+a-h,l),this.quadraticBezierCurve(n+o,s+h,n+o,s,n+o-h,s,l),this.quadraticBezierCurve(n+h,s,n,s,n,s+h+1e-10,l),t.fill){var c=r.hex2rgb(t.fillColor),d=t.fillAlpha,p=c[0]*d,f=c[1]*d,g=c[2]*d,_=e.points,v=e.indices,m=_.length/6,y=u(l,null,2),x=0;for(x=0;x<y.length;x+=3)v.push(y[x]+m),v.push(y[x]+m),v.push(y[x+1]+m),v.push(y[x+2]+m),v.push(y[x+2]+m);for(x=0;x<l.length;x++)_.push(l[x],l[++x],p,f,g,d)}if(t.lineWidth){var b=t.points;t.points=l,this.buildLine(t,e),t.points=b}},n.prototype.quadraticBezierCurve=function(t,e,i,n,r,s,o){function a(t,e,i){return t+(e-t)*i}for(var h,l,u,c,d,p,f=o||[],g=0,_=0;20>=_;_++)h=a(t,i,g=_/20),l=a(e,n,g),u=a(i,r,g),c=a(n,s,g),d=a(h,u,g),p=a(l,c,g),f.push(d,p);return f},n.prototype.buildCircle=function(t,e){var i,n,s=t.shape,a=s.x,h=s.y;t.type===o.SHAPES.CIRC?(i=s.radius,n=s.radius):(i=s.width,n=s.height);var l=Math.floor(30*Math.sqrt(s.radius))||Math.floor(15*Math.sqrt(s.width+s.height)),u=2*Math.PI/l,c=0;if(t.fill){var d=r.hex2rgb(t.fillColor),p=t.fillAlpha,f=d[0]*p,g=d[1]*p,_=d[2]*p,v=e.points,m=e.indices,y=v.length/6;for(m.push(y),c=0;l+1>c;c++)v.push(a,h,f,g,_,p),v.push(a+Math.sin(u*c)*i,h+Math.cos(u*c)*n,f,g,_,p),m.push(y++,y++);m.push(y-1)}if(t.lineWidth){var x=t.points;for(t.points=[],c=0;l+1>c;c++)t.points.push(a+Math.sin(u*c)*i,h+Math.cos(u*c)*n);this.buildLine(t,e),t.points=x}},n.prototype.buildLine=function(t,e){var i=0,n=t.points;if(0!==n.length){var o=new s.Point(n[0],n[1]),a=new s.Point(n[n.length-2],n[n.length-1]);if(o.x===a.x&&o.y===a.y){(n=n.slice()).pop(),n.pop();var h=(a=new s.Point(n[n.length-2],n[n.length-1])).x+.5*(o.x-a.x),l=a.y+.5*(o.y-a.y);n.unshift(h,l),n.push(h,l)}var u,c,d,p,f,g,_,v,m,y,x,b,T,E,S,w,A,P,C,L,R,O,M=e.points,I=e.indices,D=n.length/2,j=n.length,F=M.length/6,k=t.lineWidth/2,N=r.hex2rgb(t.lineColor),B=t.lineAlpha,U=N[0]*B,H=N[1]*B,X=N[2]*B;for(d=n[0],p=n[1],f=n[2],m=-(p-(g=n[3])),y=d-f,m/=O=Math.sqrt(m*m+y*y),y/=O,m*=k,y*=k,M.push(d-m,p-y,U,H,X,B),M.push(d+m,p+y,U,H,X,B),i=1;D-1>i;i++)d=n[2*(i-1)],p=n[2*(i-1)+1],f=n[2*i],g=n[2*i+1],_=n[2*(i+1)],v=n[2*(i+1)+1],m=-(p-g),y=d-f,m/=O=Math.sqrt(m*m+y*y),y/=O,m*=k,y*=k,x=-(g-v),b=f-_,x/=O=Math.sqrt(x*x+b*b),b/=O,A=(-m+d)*(-y+g)-(-m+f)*(-y+p),L=(-(x*=k)+_)*(-(b*=k)+g)-(-x+f)*(-b+v),R=(S=-y+p-(-y+g))*(C=-x+f-(-x+_))-(P=-b+v-(-b+g))*(w=-m+f-(-m+d)),Math.abs(R)<.1?(R+=10.1,M.push(f-m,g-y,U,H,X,B),M.push(f+m,g+y,U,H,X,B)):((u=(w*L-C*A)/R)-f)*(u-f)+((c=(P*A-S*L)/R)-g)*(c-g)>19600?(T=m-x,E=y-b,T/=O=Math.sqrt(T*T+E*E),E/=O,T*=k,E*=k,M.push(f-T,g-E),M.push(U,H,X,B),M.push(f+T,g+E),M.push(U,H,X,B),M.push(f-T,g-E),M.push(U,H,X,B),j++):(M.push(u,c),M.push(U,H,X,B),M.push(f-(u-f),g-(c-g)),M.push(U,H,X,B));for(d=n[2*(D-2)],p=n[2*(D-2)+1],f=n[2*(D-1)],m=-(p-(g=n[2*(D-1)+1])),y=d-f,m/=O=Math.sqrt(m*m+y*y),y/=O,m*=k,y*=k,M.push(f-m,g-y),M.push(U,H,X,B),M.push(f+m,g+y),M.push(U,H,X,B),I.push(F),i=0;j>i;i++)I.push(F++);I.push(F-1)}},n.prototype.buildComplexPoly=function(t,e){var i=t.points.slice();if(!(i.length<6)){var n=e.indices;e.points=i,e.alpha=t.fillAlpha,e.color=r.hex2rgb(t.fillColor);for(var s,o,a=1/0,h=-1/0,l=1/0,u=-1/0,c=0;c<i.length;c+=2)a=a>(s=i[c])?s:a,h=s>h?s:h,l=l>(o=i[c+1])?o:l,u=o>u?o:u;i.push(a,l,h,l,h,u,a,u);var d=i.length/2;for(c=0;d>c;c++)n.push(c)}},n.prototype.buildPoly=function(t,e){var i=t.points;if(!(i.length<6)){var n=e.points,s=e.indices,o=i.length/2,a=r.hex2rgb(t.fillColor),h=t.fillAlpha,l=a[0]*h,c=a[1]*h,d=a[2]*h,p=u(i,null,2);if(!p)return!1;var f=n.length/6,g=0;for(g=0;g<p.length;g+=3)s.push(p[g]+f),s.push(p[g]+f),s.push(p[g+1]+f),s.push(p[g+2]+f),s.push(p[g+2]+f);for(g=0;o>g;g++)n.push(i[2*g],i[2*g+1],l,c,d,h);return!0}}},{"../../const":23,"../../math":33,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63,"../../utils":77,"./WebGLGraphicsData":29,earcut:9}],29:[function(t,e,i){function n(t){this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}n.prototype.constructor=n,e.exports=n,n.prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){var t=this.gl;this.glPoints=new Float32Array(this.points),t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,this.glPoints,t.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.glIndices,t.STATIC_DRAW),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],30:[function(t,e,i){var n=e.exports=Object.assign(t("./const"),t("./math"),{utils:t("./utils"),ticker:t("./ticker"),DisplayObject:t("./display/DisplayObject"),Container:t("./display/Container"),Sprite:t("./sprites/Sprite"),ParticleContainer:t("./particles/ParticleContainer"),SpriteRenderer:t("./sprites/webgl/SpriteRenderer"),ParticleRenderer:t("./particles/webgl/ParticleRenderer"),Text:t("./text/Text"),Graphics:t("./graphics/Graphics"),GraphicsData:t("./graphics/GraphicsData"),GraphicsRenderer:t("./graphics/webgl/GraphicsRenderer"),Texture:t("./textures/Texture"),BaseTexture:t("./textures/BaseTexture"),RenderTexture:t("./textures/RenderTexture"),VideoBaseTexture:t("./textures/VideoBaseTexture"),TextureUvs:t("./textures/TextureUvs"),CanvasRenderer:t("./renderers/canvas/CanvasRenderer"),CanvasGraphics:t("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:t("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:t("./renderers/webgl/WebGLRenderer"),WebGLManager:t("./renderers/webgl/managers/WebGLManager"),ShaderManager:t("./renderers/webgl/managers/ShaderManager"),Shader:t("./renderers/webgl/shaders/Shader"),ObjectRenderer:t("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:t("./renderers/webgl/utils/RenderTarget"),AbstractFilter:t("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:t("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:t("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(t,e,i,r){return t=t||800,e=e||600,!r&&n.utils.isWebGLSupported()?new n.WebGLRenderer(t,e,i):new n.CanvasRenderer(t,e,i)}})},{"./const":23,"./display/Container":24,"./display/DisplayObject":25,"./graphics/Graphics":26,"./graphics/GraphicsData":27,"./graphics/webgl/GraphicsRenderer":28,"./math":33,"./particles/ParticleContainer":39,"./particles/webgl/ParticleRenderer":41,"./renderers/canvas/CanvasRenderer":44,"./renderers/canvas/utils/CanvasBuffer":45,"./renderers/canvas/utils/CanvasGraphics":46,"./renderers/webgl/WebGLRenderer":49,"./renderers/webgl/filters/AbstractFilter":50,"./renderers/webgl/filters/FXAAFilter":51,"./renderers/webgl/filters/SpriteMaskFilter":52,"./renderers/webgl/managers/ShaderManager":56,"./renderers/webgl/managers/WebGLManager":58,"./renderers/webgl/shaders/Shader":61,"./renderers/webgl/utils/ObjectRenderer":63,"./renderers/webgl/utils/RenderTarget":65,"./sprites/Sprite":67,"./sprites/webgl/SpriteRenderer":68,"./text/Text":69,"./textures/BaseTexture":70,"./textures/RenderTexture":71,"./textures/Texture":72,"./textures/TextureUvs":73,"./textures/VideoBaseTexture":74,"./ticker":76,"./utils":77}],31:[function(t,e,i){function n(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}var r=t("./Point");n.prototype.constructor=n,e.exports=n,n.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},n.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},n.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},n.prototype.apply=function(t,e){e=e||new r;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},n.prototype.applyInverse=function(t,e){e=e||new r;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},n.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},n.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},n.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},n.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},n.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){var l,u,c,d,p,f,g,_,v,m;return p=Math.sin(o),f=Math.cos(o),g=Math.cos(h),_=Math.sin(h),v=-Math.sin(a),m=Math.cos(a),l=f*r,u=p*r,c=-p*s,d=f*s,this.a=g*l+_*c,this.b=g*u+_*d,this.c=v*l+m*c,this.d=v*u+m*d,this.tx=t+(i*l+n*c),this.ty=e+(i*u+n*d),this},n.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},n.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var t=new n;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n.IDENTITY=new n,n.TEMP_MATRIX=new n},{"./Point":32}],32:[function(t,e,i){function n(t,e){this.x=t||0,this.y=e||0}n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(t){this.set(t.x,t.y)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)}},{}],33:[function(t,e,i){e.exports={Point:t("./Point"),Matrix:t("./Matrix"),Circle:t("./shapes/Circle"),Ellipse:t("./shapes/Ellipse"),Polygon:t("./shapes/Polygon"),Rectangle:t("./shapes/Rectangle"),RoundedRectangle:t("./shapes/RoundedRectangle")}},{"./Matrix":31,"./Point":32,"./shapes/Circle":34,"./shapes/Ellipse":35,"./shapes/Polygon":36,"./shapes/Rectangle":37,"./shapes/RoundedRectangle":38}],34:[function(t,e,i){function n(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0,this.type=s.SHAPES.CIRC}var r=t("./Rectangle"),s=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.radius)},n.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,n=this.y-e;return this.radius*this.radius>=(i*=i)+(n*=n)},n.prototype.getBounds=function(){return new r(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":23,"./Rectangle":37}],35:[function(t,e,i){function n(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.type=s.SHAPES.ELIP}var r=t("./Rectangle"),s=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return 1>=(i*=i)+(n*=n)},n.prototype.getBounds=function(){return new r(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":23,"./Rectangle":37}],36:[function(t,e,i){function n(t){var e=t;if(!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}if(e[0]instanceof r){for(var n=[],o=0,a=e.length;a>o;o++)n.push(e[o].x,e[o].y);e=n}this.closed=!0,this.points=e,this.type=s.SHAPES.POLY}var r=t("../Point"),s=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.points.slice())},n.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;n>r;s=r++){var o=this.points[2*r],a=this.points[2*r+1],h=this.points[2*s],l=this.points[2*s+1];a>e!=l>e&&(h-o)*(e-a)/(l-a)+o>t&&(i=!i)}return i}},{"../../const":23,"../Point":32}],37:[function(t,e,i){function n(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.type=r.SHAPES.RECT}var r=t("../../const");n.prototype.constructor=n,e.exports=n,n.EMPTY=new n(0,0,0,0),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)}},{"../../const":23}],38:[function(t,e,i){function n(t,e,i,n,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this.radius=s||20,this.type=r.SHAPES.RREC}var r=t("../../const");n.prototype.constructor=n,e.exports=n,n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height)}},{"../../const":23}],39:[function(t,e,i){function n(t,e,i){r.call(this);(i=i||15e3)>16384&&(i=16384),i>(t=t||15e3)&&(i=t),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=i,this._buffers=null,this._bufferToUpdate=0,this.interactiveChildren=!1,this.blendMode=s.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(e)}var r=t("../display/Container"),s=t("../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t?!!t.alpha:this._properties[4])},n.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},n.prototype.renderWebGL=function(t){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},n.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},n.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,n=!0,r=0,s=0,o=0,a=0,h=t.blendModes[this.blendMode];h!==e.globalCompositeOperation&&(e.globalCompositeOperation=h),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var u=this.children[l];if(u.visible){var c=u.texture.frame;if(e.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),n=!1),r=u.anchor.x*(-c.width*u.scale.x)+u.position.x+.5,s=u.anchor.y*(-c.height*u.scale.y)+u.position.y+.5,o=c.width*u.scale.x,a=c.height*u.scale.y;else{n||(n=!0),u.displayObjectUpdateTransform();var d=u.worldTransform;t.roundPixels?e.setTransform(d.a,d.b,d.c,d.d,0|d.tx,0|d.ty):e.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),r=u.anchor.x*-c.width+.5,s=u.anchor.y*-c.height+.5,o=c.width,a=c.height}e.drawImage(u.texture.baseTexture.source,c.x,c.y,c.width,c.height,r,s,o,a)}}}},n.prototype.destroy=function(){if(r.prototype.destroy.apply(this,arguments),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._properties=null,this._buffers=null}},{"../const":23,"../display/Container":24}],40:[function(t,e,i){function n(t,e,i,n){this.gl=t,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<e.length;r++){var s=e[r];i[r]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}n.prototype.constructor=n,e.exports=n,n.prototype.initBuffers=function(){var t,e,i=this.gl,n=0;for(this.dynamicStride=0,t=0;t<this.dynamicProperties.length;t++)(e=this.dynamicProperties[t]).offset=n,n+=e.size,this.dynamicStride+=e.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),i.bufferData(i.ARRAY_BUFFER,this.dynamicData,i.DYNAMIC_DRAW);var r=0;for(this.staticStride=0,t=0;t<this.staticProperties.length;t++)(e=this.staticProperties[t]).offset=r,r+=e.size,this.staticStride+=e.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),i.bufferData(i.ARRAY_BUFFER,this.staticData,i.DYNAMIC_DRAW)},n.prototype.uploadDynamic=function(t,e,i){for(var n=this.gl,r=0;r<this.dynamicProperties.length;r++){var s=this.dynamicProperties[r];s.uploadFunction(t,e,i,this.dynamicData,this.dynamicStride,s.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.dynamicData)},n.prototype.uploadStatic=function(t,e,i){for(var n=this.gl,r=0;r<this.staticProperties.length;r++){var s=this.staticProperties[r];s.uploadFunction(t,e,i,this.staticData,this.staticStride,s.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.staticData)},n.prototype.bind=function(){var t,e,i=this.gl;for(i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),t=0;t<this.dynamicProperties.length;t++)e=this.dynamicProperties[t],i.vertexAttribPointer(e.attribute,e.size,i.FLOAT,!1,4*this.dynamicStride,4*e.offset);for(i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),t=0;t<this.staticProperties.length;t++)e=this.staticProperties[t],i.vertexAttribPointer(e.attribute,e.size,i.FLOAT,!1,4*this.staticStride,4*e.offset)},n.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],41:[function(t,e,i){function n(t){r.call(this,t);this.indices=new Uint16Array(98304);for(var e=0,i=0;98304>e;e+=6,i+=4)this.indices[e+0]=i+0,this.indices[e+1]=i+1,this.indices[e+2]=i+2,this.indices[e+3]=i+0,this.indices[e+4]=i+2,this.indices[e+5]=i+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new h.Matrix}var r=t("../../renderers/webgl/utils/ObjectRenderer"),s=t("../../renderers/webgl/WebGLRenderer"),o=t("./ParticleShader"),a=t("./ParticleBuffer"),h=t("../../math");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,s.registerPlugin("particle",n),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new o(this.renderer.shaderManager),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},n.prototype.start=function(){var t=this.renderer.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.shader;this.renderer.shaderManager.setShader(e)},n.prototype.render=function(t){var e=t.children,i=e.length,n=t._maxSize,r=t._batchSize;if(0!==i){i>n&&(i=n),t._buffers||(t._buffers=this.generateBuffers(t)),this.renderer.blendModeManager.setBlendMode(t.blendMode);var s=this.renderer.gl,o=t.worldTransform.copy(this.tempMatrix);o.prepend(this.renderer.currentRenderTarget.projectionMatrix),s.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,o.toArray(!0)),s.uniform1f(this.shader.uniforms.uAlpha._location,t.worldAlpha);var a=e[0]._texture.baseTexture;if(a._glTextures[s.id])s.bindTexture(s.TEXTURE_2D,a._glTextures[s.id]);else{if(!this.renderer.updateTexture(a))return;t._properties[0]&&t._properties[3]||(t._bufferToUpdate=0)}for(var h=0,l=0;i>h;h+=r,l+=1){var u=i-h;u>r&&(u=r);var c=t._buffers[l];c.uploadDynamic(e,h,u),t._bufferToUpdate===l&&(c.uploadStatic(e,h,u),t._bufferToUpdate=l+1),c.bind(this.shader),s.drawElements(s.TRIANGLES,6*u,s.UNSIGNED_SHORT,0),this.renderer.drawCount++}}},n.prototype.generateBuffers=function(t){var e,i=this.renderer.gl,n=[],r=t._maxSize,s=t._batchSize,o=t._properties;for(e=0;r>e;e+=s)n.push(new a(i,this.properties,o,s));return n},n.prototype.uploadVertices=function(t,e,i,n,r,s){for(var o,a,h,l,u,c,d,p,f,g=0;i>g;g++)a=(o=t[e+g])._texture,l=o.scale.x,u=o.scale.y,a.trim?(c=(d=(h=a.trim).x-o.anchor.x*h.width)+a.crop.width,p=(f=h.y-o.anchor.y*h.height)+a.crop.height):(c=a._frame.width*(1-o.anchor.x),d=a._frame.width*-o.anchor.x,p=a._frame.height*(1-o.anchor.y),f=a._frame.height*-o.anchor.y),n[s]=d*l,n[s+1]=f*u,n[s+r]=c*l,n[s+r+1]=f*u,n[s+2*r]=c*l,n[s+2*r+1]=p*u,n[s+3*r]=d*l,n[s+3*r+1]=p*u,s+=4*r},n.prototype.uploadPosition=function(t,e,i,n,r,s){for(var o=0;i>o;o++){var a=t[e+o].position;n[s]=a.x,n[s+1]=a.y,n[s+r]=a.x,n[s+r+1]=a.y,n[s+2*r]=a.x,n[s+2*r+1]=a.y,n[s+3*r]=a.x,n[s+3*r+1]=a.y,s+=4*r}},n.prototype.uploadRotation=function(t,e,i,n,r,s){for(var o=0;i>o;o++){var a=t[e+o].rotation;n[s]=a,n[s+r]=a,n[s+2*r]=a,n[s+3*r]=a,s+=4*r}},n.prototype.uploadUvs=function(t,e,i,n,r,s){for(var o=0;i>o;o++){var a=t[e+o]._texture._uvs;a?(n[s]=a.x0,n[s+1]=a.y0,n[s+r]=a.x1,n[s+r+1]=a.y1,n[s+2*r]=a.x2,n[s+2*r+1]=a.y2,n[s+3*r]=a.x3,n[s+3*r+1]=a.y3,s+=4*r):(n[s]=0,n[s+1]=0,n[s+r]=0,n[s+r+1]=0,n[s+2*r]=0,n[s+2*r+1]=0,n[s+3*r]=0,n[s+3*r+1]=0,s+=4*r)}},n.prototype.uploadAlpha=function(t,e,i,n,r,s){for(var o=0;i>o;o++){var a=t[e+o].alpha;n[s]=a,n[s+r]=a,n[s+2*r]=a,n[s+3*r]=a,s+=4*r}},n.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),r.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":33,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63,"./ParticleBuffer":40,"./ParticleShader":42}],42:[function(t,e,i){function n(t){r.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}var r=t("../../renderers/webgl/shaders/TextureShader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"../../renderers/webgl/shaders/TextureShader":62}],43:[function(t,e,i){function n(t,e,i,n){if(a.call(this),r.sayHello(t),n)for(var h in o.DEFAULT_RENDER_OPTIONS)void 0===n[h]&&(n[h]=o.DEFAULT_RENDER_OPTIONS[h]);else n=o.DEFAULT_RENDER_OPTIONS;this.type=o.RENDERER_TYPE.UNKNOWN,this.width=e||800,this.height=i||600,this.view=n.view||document.createElement("canvas"),this.resolution=n.resolution,this.transparent=n.transparent,this.autoResize=n.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=n.preserveDrawingBuffer,this.clearBeforeRender=n.clearBeforeRender,this.roundPixels=n.roundPixels,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=n.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new s.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}var r=t("../utils"),s=t("../math"),o=t("../const"),a=t("eventemitter3");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=r.hex2string(t),r.hex2rgb(t,this._backgroundColorRgb)}}}),n.prototype.resize=function(t,e){this.width=t*this.resolution,this.height=e*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=o.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":23,"../math":33,"../utils":77,eventemitter3:10}],44:[function(t,e,i){function n(t,e,i){i=i||{},r.call(this,"Canvas",t,e,i),this.type=h.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new s,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new a.Matrix,worldAlpha:1},this.resize(t,e)}var r=t("../SystemRenderer"),s=t("./utils/CanvasMaskManager"),o=t("../../utils"),a=t("../../math"),h=t("../../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,o.pluginTarget.mixin(n),n.prototype.render=function(t){this.emit("prerender");var e=t.parent;this._lastObjectRendered=t,t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.context.globalCompositeOperation=this.blendModes[h.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t,this.context),this.emit("postrender")},n.prototype.destroy=function(t){this.destroyPlugins(),r.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},n.prototype.renderDisplayObject=function(t,e){var i=this.context;this.context=e,t.renderCanvas(this),this.context=i},n.prototype.resize=function(t,e){r.prototype.resize.call(this,t,e),this.smoothProperty&&(this.context[this.smoothProperty]=h.SCALE_MODES.DEFAULT===h.SCALE_MODES.LINEAR)},n.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},o.canUseNewCanvasBlendModes()?(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[h.BLEND_MODES.SCREEN]="screen",this.blendModes[h.BLEND_MODES.OVERLAY]="overlay",this.blendModes[h.BLEND_MODES.DARKEN]="darken",this.blendModes[h.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[h.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[h.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[h.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[h.BLEND_MODES.HUE]="hue",this.blendModes[h.BLEND_MODES.SATURATION]="saturate",this.blendModes[h.BLEND_MODES.COLOR]="color",this.blendModes[h.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[h.BLEND_MODES.NORMAL]="source-over",this.blendModes[h.BLEND_MODES.ADD]="lighter",this.blendModes[h.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[h.BLEND_MODES.SCREEN]="source-over",this.blendModes[h.BLEND_MODES.OVERLAY]="source-over",this.blendModes[h.BLEND_MODES.DARKEN]="source-over",this.blendModes[h.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[h.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[h.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[h.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[h.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[h.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[h.BLEND_MODES.HUE]="source-over",this.blendModes[h.BLEND_MODES.SATURATION]="source-over",this.blendModes[h.BLEND_MODES.COLOR]="source-over",this.blendModes[h.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":23,"../../math":33,"../../utils":77,"../SystemRenderer":43,"./utils/CanvasMaskManager":47}],45:[function(t,e,i){function n(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e}n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},height:{get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}}),n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(t,e){this.canvas.width=t,this.canvas.height=e},n.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],46:[function(t,e,i){var n=t("../../../const"),r={};e.exports=r,r.renderGraphics=function(t,e){var i=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var r=0;r<t.graphicsData.length;r++){var s=t.graphicsData[r],o=s.shape,a=s._fillTint,h=s._lineTint;if(e.lineWidth=s.lineWidth,s.type===n.SHAPES.POLY){e.beginPath();var l=o.points;e.moveTo(l[0],l[1]);for(var u=1;u<l.length/2;u++)e.lineTo(l[2*u],l[2*u+1]);o.closed&&e.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(s.type===n.SHAPES.RECT)(s.fillColor||0===s.fillColor)&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fillRect(o.x,o.y,o.width,o.height)),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.strokeRect(o.x,o.y,o.width,o.height));else if(s.type===n.SHAPES.CIRC)e.beginPath(),e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke());else if(s.type===n.SHAPES.ELIP){var c=2*o.width,d=2*o.height,p=o.x-c/2,f=o.y-d/2;e.beginPath();var g=.5522848,_=c/2*g,v=d/2*g,m=p+c,y=f+d,x=p+c/2,b=f+d/2;e.moveTo(p,b),e.bezierCurveTo(p,b-v,x-_,f,x,f),e.bezierCurveTo(x+_,f,m,b-v,m,b),e.bezierCurveTo(m,b+v,x+_,y,x,y),e.bezierCurveTo(x-_,y,p,b+v,p,b),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}else if(s.type===n.SHAPES.RREC){var T=o.x,E=o.y,S=o.width,w=o.height,A=o.radius,P=Math.min(S,w)/2|0;A=A>P?P:A,e.beginPath(),e.moveTo(T,E+A),e.lineTo(T,E+w-A),e.quadraticCurveTo(T,E+w,T+A,E+w),e.lineTo(T+S-A,E+w),e.quadraticCurveTo(T+S,E+w,T+S,E+w-A),e.lineTo(T+S,E+A),e.quadraticCurveTo(T+S,E,T+S-A,E),e.lineTo(T+A,E),e.quadraticCurveTo(T,E,T,E+A),e.closePath(),(s.fillColor||0===s.fillColor)&&(e.globalAlpha=s.fillAlpha*i,e.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*i,e.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),e.stroke())}}},r.renderGraphicsMask=function(t,e){var i=t.graphicsData.length;if(0!==i){e.beginPath();for(var r=0;i>r;r++){var s=t.graphicsData[r],o=s.shape;if(s.type===n.SHAPES.POLY){var a=o.points;e.moveTo(a[0],a[1]);for(var h=1;h<a.length/2;h++)e.lineTo(a[2*h],a[2*h+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(s.type===n.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(s.type===n.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(s.type===n.SHAPES.ELIP){var l=2*o.width,u=2*o.height,c=o.x-l/2,d=o.y-u/2,p=.5522848,f=l/2*p,g=u/2*p,_=c+l,v=d+u,m=c+l/2,y=d+u/2;e.moveTo(c,y),e.bezierCurveTo(c,y-g,m-f,d,m,d),e.bezierCurveTo(m+f,d,_,y-g,_,y),e.bezierCurveTo(_,y+g,m+f,v,m,v),e.bezierCurveTo(m-f,v,c,y+g,c,y),e.closePath()}else if(s.type===n.SHAPES.RREC){var x=o.x,b=o.y,T=o.width,E=o.height,S=o.radius,w=Math.min(T,E)/2|0;S=S>w?w:S,e.moveTo(x,b+S),e.lineTo(x,b+E-S),e.quadraticCurveTo(x,b+E,x+S,b+E),e.lineTo(x+T-S,b+E),e.quadraticCurveTo(x+T,b+E,x+T,b+E-S),e.lineTo(x+T,b+S),e.quadraticCurveTo(x+T,b,x+T-S,b),e.lineTo(x+S,b),e.quadraticCurveTo(x,b,x,b+S),e.closePath()}}}},r.updateGraphicsTint=function(t){if(16777215!==t.tint||t._prevTint!==t.tint){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;r++){var s=t.graphicsData[r],o=0|s.fillColor,a=0|s.lineColor;s._fillTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*n*255,s._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255}}}},{"../../../const":23}],47:[function(t,e,i){function n(){}var r=t("./CanvasGraphics");n.prototype.constructor=n,e.exports=n,n.prototype.pushMask=function(t,e){e.context.save();var i=t.alpha,n=t.worldTransform,s=e.resolution;e.context.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s,n.ty*s),t.texture||(r.renderGraphicsMask(t,e.context),e.context.clip()),t.worldAlpha=i},n.prototype.popMask=function(t){t.context.restore()},n.prototype.destroy=function(){}},{"./CanvasGraphics":46}],48:[function(t,e,i){var n=t("../../../utils"),r={};e.exports=r,r.getTintedTexture=function(t,e){var i=t.texture,n="#"+("00000"+(0|(e=r.roundColor(e))).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[n])return i.tintCache[n];var s=r.canvas||document.createElement("canvas");if(r.tintMethod(i,e,s),r.convertTintToImage){var o=new Image;o.src=s.toDataURL(),i.tintCache[n]=o}else i.tintCache[n]=s,r.canvas=null;return s},r.tintWithMultiply=function(t,e,i){var n=i.getContext("2d"),r=t.baseTexture.resolution,s=t.crop.clone();s.x*=r,s.y*=r,s.width*=r,s.height*=r,i.width=s.width,i.height=s.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,s.width,s.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},r.tintWithOverlay=function(t,e,i){var n=i.getContext("2d"),r=t.baseTexture.resolution,s=t.crop.clone();s.x*=r,s.y*=r,s.width*=r,s.height*=r,i.width=s.width,i.height=s.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,s.width,s.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},r.tintWithPerPixel=function(t,e,i){var r=i.getContext("2d"),s=t.baseTexture.resolution,o=t.crop.clone();o.x*=s,o.y*=s,o.width*=s,o.height*=s,i.width=o.width,i.height=o.height,r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=n.hex2rgb(e),h=a[0],l=a[1],u=a[2],c=r.getImageData(0,0,o.width,o.height),d=c.data,p=0;p<d.length;p+=4)d[p+0]*=h,d[p+1]*=l,d[p+2]*=u;r.putImageData(c,0,0)},r.roundColor=function(t){var e=r.cacheStepsPerColorChannel,i=n.hex2rgb(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),n.rgb2hex(i)},r.cacheStepsPerColorChannel=8,r.convertTintToImage=!1,r.canUseMultiply=n.canUseNewCanvasBlendModes(),r.tintMethod=r.canUseMultiply?r.tintWithMultiply:r.tintWithPerPixel},{"../../../utils":77}],49:[function(t,e,i){function n(t,e,i){i=i||{},r.call(this,"WebGL",t,e,i),this.type=f.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!i.forceFXAA&&i.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new s(this),this.maskManager=new o(this),this.stencilManager=new a(this),this.filterManager=new h(this),this.blendModeManager=new l(this),this.currentRenderTarget=null,this.currentRenderer=new c(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._managedTextures=[],this._renderTargetStack=[]}var r=t("../SystemRenderer"),s=t("./managers/ShaderManager"),o=t("./managers/MaskManager"),a=t("./managers/StencilManager"),h=t("./managers/FilterManager"),l=t("./managers/BlendModeManager"),u=t("./utils/RenderTarget"),c=t("./utils/ObjectRenderer"),d=t("./filters/FXAAFilter"),p=t("../../utils"),f=t("../../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,p.pluginTarget.mixin(n),n.glContextId=0,n.prototype._createContext=function(){var t=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(this.gl=t,!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=n.glContextId++,t.id=this.glContextId,t.renderer=this},n.prototype._initContext=function(){var t=this.gl;t.disable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.enable(t.BLEND),this.renderTarget=new u(t,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",t),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!t.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new d])},n.prototype.render=function(t){if(this.emit("prerender"),!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=t,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,t.filterArea=this.renderTarget.size,t.filters=this._FXAAFilter);var e=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=e;var i=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?i.clearColor(0,0,0,0):i.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),i.clear(i.COLOR_BUFFER_BIT)),this.renderDisplayObject(t,this.renderTarget),this.emit("postrender")}},n.prototype.renderDisplayObject=function(t,e,i){this.setRenderTarget(e),i&&e.clear(),this.filterManager.setFilterStack(e.filterStack),t.renderWebGL(this),this.currentRenderer.flush()},n.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},n.prototype.setRenderTarget=function(t){this.currentRenderTarget!==t&&(this.currentRenderTarget=t,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(t.stencilMaskStack))},n.prototype.resize=function(t,e){r.prototype.resize.call(this,t,e),this.filterManager.resize(t,e),this.renderTarget.resize(t,e),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},n.prototype.updateTexture=function(t){if((t=t.baseTexture||t).hasLoaded){var e=this.gl;return t._glTextures[e.id]||(t._glTextures[e.id]=e.createTexture(),t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t)),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.mipmap&&t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST),e.generateMipmap(e.TEXTURE_2D)):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===f.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),t.isPowerOfTwo?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),t._glTextures[e.id]}},n.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded&&t._glTextures[this.gl.id]&&(this.gl.deleteTexture(t._glTextures[this.gl.id]),delete t._glTextures[this.gl.id],!e)){var i=this._managedTextures.indexOf(t);-1!==i&&p.removeItems(this._managedTextures,i,1)}},n.prototype.handleContextLost=function(t){t.preventDefault()},n.prototype.handleContextRestored=function(){this._initContext();for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.gl.id]&&delete e._glTextures[this.gl.id]}},n.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored);for(var e=0;e<this._managedTextures.length;++e){var i=this._managedTextures[e];this.destroyTexture(i,!0),i.off("update",this.updateTexture,this),i.off("dispose",this.destroyTexture,this)}r.prototype.destroy.call(this,t),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.blendModeManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this._managedTextures=null,this.drawCount=0,this.gl.useProgram(null),this.gl=null},n.prototype._mapGlModes=function(){var t=this.gl;this.blendModes||(this.blendModes={},this.blendModes[f.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.ADD]=[t.SRC_ALPHA,t.DST_ALPHA],this.blendModes[f.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SCREEN]=[t.SRC_ALPHA,t.ONE],this.blendModes[f.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[f.DRAW_MODES.POINTS]=t.POINTS,this.drawModes[f.DRAW_MODES.LINES]=t.LINES,this.drawModes[f.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,this.drawModes[f.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLES]=t.TRIANGLES,this.drawModes[f.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN)}},{"../../const":23,"../../utils":77,"../SystemRenderer":43,"./filters/FXAAFilter":51,"./managers/BlendModeManager":53,"./managers/FilterManager":54,"./managers/MaskManager":55,"./managers/ShaderManager":56,"./managers/StencilManager":57,"./utils/ObjectRenderer":63,"./utils/RenderTarget":65}],50:[function(t,e,i){function n(t,e,i){this.shaders=[],this.padding=0,this.uniforms=i||{},this.vertexSrc=t||r.defaultVertexSrc,this.fragmentSrc=e||r.defaultFragmentSrc}var r=t("../shaders/TextureShader");n.prototype.constructor=n,e.exports=n,n.prototype.getShader=function(t){var e=t.gl,i=this.shaders[e.id];return i||(i=new r(t.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[e.id]=i),i},n.prototype.applyFilter=function(t,e,i,n){var r=this.getShader(t);t.filterManager.applyFilter(r,e,i,n)},n.prototype.syncUniform=function(t){for(var e=0,i=this.shaders.length;i>e;++e)this.shaders[e].syncUniform(t)}},{"../shaders/TextureShader":62}],51:[function(t,e,i){function n(){r.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}var r=t("./AbstractFilter");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager,r=this.getShader(t);n.applyFilter(r,e,i)}},{"./AbstractFilter":50}],52:[function(t,e,i){function n(t){var e=new s.Matrix;r.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:t._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:e.toArray(!0)}}),this.maskSprite=t,this.maskMatrix=e}var r=t("./AbstractFilter"),s=t("../../../math");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager;this.uniforms.mask.value=this.maskSprite._texture,n.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var r=this.getShader(t);n.applyFilter(r,e,i)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(t){this.uniforms.mask.value=t}},offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}}})},{"../../../math":33,"./AbstractFilter":50}],53:[function(t,e,i){function n(t){r.call(this,t),this.currentBlendMode=99999}var r=t("./WebGLManager");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setBlendMode=function(t){if(this.currentBlendMode===t)return!1;this.currentBlendMode=t;var e=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(e[0],e[1]),!0}},{"./WebGLManager":58}],54:[function(t,e,i){function n(t){r.call(this,t),this.filterStack=[],this.filterStack.push({renderTarget:t.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new h.Rectangle(0,0,t.width,t.height),this.currentFrame=null}var r=t("./WebGLManager"),s=t("../utils/RenderTarget"),o=t("../../../const"),a=t("../utils/Quad"),h=t("../../../math");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.onContextChange=function(){this.texturePool.length=0;var t=this.renderer.gl;this.quad=new a(t)},n.prototype.setFilterStack=function(t){this.filterStack=t},n.prototype.pushFilter=function(t,e){var i=t.filterArea?t.filterArea.clone():t.getBounds();i.x=0|i.x,i.y=0|i.y,i.width=0|i.width,i.height=0|i.height;var n=0|e[0].padding;if(i.x-=n,i.y-=n,i.width+=2*n,i.height+=2*n,this.renderer.currentRenderTarget.transform){var r=this.renderer.currentRenderTarget.transform;i.x+=r.tx,i.y+=r.ty,this.capFilterArea(i),i.x-=r.tx,i.y-=r.ty}else this.capFilterArea(i);if(i.width>0&&i.height>0){this.currentFrame=i;var s=this.getRenderTarget();this.renderer.setRenderTarget(s),s.clear(),this.filterStack.push({renderTarget:s,filter:e})}else this.filterStack.push({renderTarget:null,filter:e})},n.prototype.popFilter=function(){var t=this.filterStack.pop(),e=this.filterStack[this.filterStack.length-1],i=t.renderTarget;if(t.renderTarget){var n=e.renderTarget,r=this.renderer.gl;this.currentFrame=i.frame,this.quad.map(this.textureSize,i.frame),r.bindBuffer(r.ARRAY_BUFFER,this.quad.vertexBuffer),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var s=t.filter;if(r.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,r.FLOAT,!1,0,0),r.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,r.FLOAT,!1,0,32),r.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,r.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(o.BLEND_MODES.NORMAL),1===s.length)s[0].uniforms.dimensions&&(s[0].uniforms.dimensions.value[0]=this.renderer.width,s[0].uniforms.dimensions.value[1]=this.renderer.height,s[0].uniforms.dimensions.value[2]=this.quad.vertices[0],s[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),s[0].applyFilter(this.renderer,i,n),this.returnRenderTarget(i);else{for(var a=i,h=this.getRenderTarget(!0),l=0;l<s.length-1;l++){var u=s[l];u.uniforms.dimensions&&(u.uniforms.dimensions.value[0]=this.renderer.width,u.uniforms.dimensions.value[1]=this.renderer.height,u.uniforms.dimensions.value[2]=this.quad.vertices[0],u.uniforms.dimensions.value[3]=this.quad.vertices[5]),u.applyFilter(this.renderer,a,h);var c=a;a=h,h=c}s[s.length-1].applyFilter(this.renderer,a,n),this.returnRenderTarget(a),this.returnRenderTarget(h)}return t.filter}},n.prototype.getRenderTarget=function(t){var e=this.texturePool.pop()||new s(this.renderer.gl,this.textureSize.width,this.textureSize.height,o.SCALE_MODES.LINEAR,this.renderer.resolution*o.FILTER_RESOLUTION);return e.frame=this.currentFrame,t&&e.clear(!0),e},n.prototype.returnRenderTarget=function(t){this.texturePool.push(t)},n.prototype.applyFilter=function(t,e,i,n){var r=this.renderer.gl;this.renderer.setRenderTarget(i),n&&i.clear(),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,e.texture),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),this.renderer.drawCount++},n.prototype.calculateMappedMatrix=function(t,e,i){var n=e.worldTransform.copy(h.Matrix.TEMP_MATRIX),r=e._texture.baseTexture,s=i.identity(),o=this.textureSize.height/this.textureSize.width;s.translate(t.x/this.textureSize.width,t.y/this.textureSize.height),s.scale(1,o);var a=this.textureSize.width/r.width,l=this.textureSize.height/r.height;return n.tx/=r.width*a,n.ty/=r.width*a,n.invert(),s.prepend(n),s.scale(1,1/o),s.scale(a,l),s.translate(e.anchor.x,e.anchor.y),s},n.prototype.capFilterArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.textureSize.width&&(t.width=this.textureSize.width-t.x),t.y+t.height>this.textureSize.height&&(t.height=this.textureSize.height-t.y)},n.prototype.resize=function(t,e){this.textureSize.width=t,this.textureSize.height=e;for(var i=0;i<this.texturePool.length;i++)this.texturePool[i].resize(t,e)},n.prototype.destroy=function(){this.quad.destroy(),r.prototype.destroy.call(this),this.filterStack=null,this.offsetY=0;for(var t=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null}},{"../../../const":23,"../../../math":33,"../utils/Quad":64,"../utils/RenderTarget":65,"./WebGLManager":58}],55:[function(t,e,i){function n(t){r.call(this,t),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}var r=t("./WebGLManager"),s=t("../filters/SpriteMaskFilter");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.pushMask=function(t,e){e.texture?this.pushSpriteMask(t,e):this.pushStencilMask(t,e)},n.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.popStencilMask(t,e)},n.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool.pop();i||(i=[new s(e)]),i[0].maskSprite=e,this.renderer.filterManager.pushFilter(t,i)},n.prototype.popSpriteMask=function(){var t=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(t)},n.prototype.pushStencilMask=function(t,e){this.renderer.stencilManager.pushMask(e)},n.prototype.popStencilMask=function(t,e){this.renderer.stencilManager.popMask(e)}},{"../filters/SpriteMaskFilter":52,"./WebGLManager":58}],56:[function(t,e,i){function n(t){r.call(this,t),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}var r=t("./WebGLManager"),s=t("../shaders/TextureShader"),o=t("../shaders/ComplexPrimitiveShader"),a=t("../shaders/PrimitiveShader"),h=t("../../../utils");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,h.pluginTarget.mixin(n),e.exports=n,n.prototype.onContextChange=function(){this.initPlugins();var t=this.renderer.gl;this.maxAttibs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.defaultShader=new s(this),this.primitiveShader=new a(this),this.complexPrimitiveShader=new o(this)},n.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(var i in t)this.tempAttribState[t[i]]=!0;var n=this.renderer.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.attribState[e]?n.enableVertexAttribArray(e):n.disableVertexAttribArray(e))},n.prototype.setShader=function(t){return this._currentId!==t.uid&&(this._currentId=t.uid,this.currentShader=t,this.renderer.gl.useProgram(t.program),this.setAttribs(t.attributes),!0)},n.prototype.destroy=function(){this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),r.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":77,"../shaders/ComplexPrimitiveShader":59,"../shaders/PrimitiveShader":60,"../shaders/TextureShader":62,"./WebGLManager":58}],57:[function(t,e,i){function n(t){r.call(this,t),this.stencilMaskStack=null}var r=t("./WebGLManager"),s=t("../../../utils");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.stencilStack.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},n.prototype.pushStencil=function(t,e){this.renderer.currentRenderTarget.attachStencilBuffer();var i=this.renderer.gl,n=this.stencilMaskStack;this.bindGraphics(t,e),0===n.stencilStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),n.reverse=!0,n.count=0),n.stencilStack.push(e);var r=n.count;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),1===e.mode?(i.drawElements(i.TRIANGLE_FAN,e.indices.length-4,i.UNSIGNED_SHORT,0),n.reverse?(i.stencilFunc(i.EQUAL,255-r,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,r,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(e.indices.length-4)),n.reverse?i.stencilFunc(i.EQUAL,255-(r+1),255):i.stencilFunc(i.EQUAL,r+1,255),n.reverse=!n.reverse):(n.reverse?(i.stencilFunc(i.EQUAL,r,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,255-r,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_STRIP,e.indices.length,i.UNSIGNED_SHORT,0),n.reverse?i.stencilFunc(i.EQUAL,r+1,255):i.stencilFunc(i.EQUAL,255-(r+1),255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),n.count++},n.prototype.bindGraphics=function(t,e){var i,n=this.renderer.gl;1===e.mode?(i=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(i),n.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(i.uniforms.tint._location,s.hex2rgb(t.tint)),n.uniform3fv(i.uniforms.color._location,e.color),n.uniform1f(i.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,8,0),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer)):(i=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(i),n.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,t.worldTransform.toArray(!0)),n.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(i.uniforms.tint._location,s.hex2rgb(t.tint)),n.uniform1f(i.uniforms.alpha._location,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,e.buffer),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(i.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer))},n.prototype.popStencil=function(t,e){var i=this.renderer.gl,n=this.stencilMaskStack;if(n.stencilStack.pop(),n.count--,0===n.stencilStack.length)i.disable(i.STENCIL_TEST);else{var r=n.count;this.bindGraphics(t,e),i.colorMask(!1,!1,!1,!1),1===e.mode?(n.reverse=!n.reverse,n.reverse?(i.stencilFunc(i.EQUAL,255-(r+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,r+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(e.indices.length-4)),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),i.drawElements(i.TRIANGLE_FAN,e.indices.length-4,i.UNSIGNED_SHORT,0),this.renderer.drawCount+=2,n.reverse?i.stencilFunc(i.EQUAL,r,255):i.stencilFunc(i.EQUAL,255-r,255)):(n.reverse?(i.stencilFunc(i.EQUAL,r+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,255-(r+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_STRIP,e.indices.length,i.UNSIGNED_SHORT,0),this.renderer.drawCount++,n.reverse?i.stencilFunc(i.EQUAL,r,255):i.stencilFunc(i.EQUAL,255-r,255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},n.prototype.destroy=function(){r.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},n.prototype.pushMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),t.dirty&&this.renderer.plugins.graphics.updateGraphics(t,this.renderer.gl),t._webGL[this.renderer.gl.id].data.length&&this.pushStencil(t,t._webGL[this.renderer.gl.id].data[0])},n.prototype.popMask=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(t,t._webGL[this.renderer.gl.id].data[0])}},{"../../../utils":77,"./WebGLManager":58}],58:[function(t,e,i){function n(t){this.renderer=t,this.renderer.on("context",this.onContextChange,this)}n.prototype.constructor=n,e.exports=n,n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],59:[function(t,e,i){function n(t){r.call(this,t,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}var r=t("./Shader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"./Shader":61}],60:[function(t,e,i){function n(t){r.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}var r=t("./Shader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"./Shader":61}],61:[function(t,e,i){function n(t,e,i,n,s){if(!e||!i)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=r.uid(),this.gl=t.renderer.gl,this.shaderManager=t,this.program=null,this.uniforms=n||{},this.attributes=s||{},this.textureCount=1,this.vertexSrc=e,this.fragmentSrc=i,this.init()}var r=t("../../../utils");n.prototype.constructor=n,e.exports=n,n.prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},n.prototype.cacheUniformLocations=function(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])},n.prototype.cacheAttributeLocations=function(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])},n.prototype.compile=function(){var t=this.gl,e=this._glCompile(t.VERTEX_SHADER,this.vertexSrc),i=this._glCompile(t.FRAGMENT_SHADER,this.fragmentSrc),n=t.createProgram();return t.attachShader(n,e),t.attachShader(n,i),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(n,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(n)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(n)),t.deleteProgram(n),n=null),t.deleteShader(e),t.deleteShader(i),this.program=n},n.prototype.syncUniform=function(t){var e,i,n=t._location,s=t.value,o=this.gl;switch(t.type){case"b":case"bool":case"boolean":o.uniform1i(n,s?1:0);break;case"i":case"1i":o.uniform1i(n,s);break;case"f":case"1f":o.uniform1f(n,s);break;case"2f":o.uniform2f(n,s[0],s[1]);break;case"3f":o.uniform3f(n,s[0],s[1],s[2]);break;case"4f":o.uniform4f(n,s[0],s[1],s[2],s[3]);break;case"v2":o.uniform2f(n,s.x,s.y);break;case"v3":o.uniform3f(n,s.x,s.y,s.z);break;case"v4":o.uniform4f(n,s.x,s.y,s.z,s.w);break;case"1iv":o.uniform1iv(n,s);break;case"2iv":o.uniform2iv(n,s);break;case"3iv":o.uniform3iv(n,s);break;case"4iv":o.uniform4iv(n,s);break;case"1fv":o.uniform1fv(n,s);break;case"2fv":o.uniform2fv(n,s);break;case"3fv":o.uniform3fv(n,s);break;case"4fv":o.uniform4fv(n,s);break;case"m2":case"mat2":case"Matrix2fv":o.uniformMatrix2fv(n,t.transpose,s);break;case"m3":case"mat3":case"Matrix3fv":o.uniformMatrix3fv(n,t.transpose,s);break;case"m4":case"mat4":case"Matrix4fv":o.uniformMatrix4fv(n,t.transpose,s);break;case"c":"number"==typeof s&&(s=r.hex2rgb(s)),o.uniform3f(n,s[0],s[1],s[2]);break;case"iv1":o.uniform1iv(n,s);break;case"iv":o.uniform3iv(n,s);break;case"fv1":o.uniform1fv(n,s);break;case"fv":o.uniform3fv(n,s);break;case"v2v":for(t._array||(t._array=new Float32Array(2*s.length)),e=0,i=s.length;i>e;++e)t._array[2*e]=s[e].x,t._array[2*e+1]=s[e].y;o.uniform2fv(n,t._array);break;case"v3v":for(t._array||(t._array=new Float32Array(3*s.length)),e=0,i=s.length;i>e;++e)t._array[3*e]=s[e].x,t._array[3*e+1]=s[e].y,t._array[3*e+2]=s[e].z;o.uniform3fv(n,t._array);break;case"v4v":for(t._array||(t._array=new Float32Array(4*s.length)),e=0,i=s.length;i>e;++e)t._array[4*e]=s[e].x,t._array[4*e+1]=s[e].y,t._array[4*e+2]=s[e].z,t._array[4*e+3]=s[e].w;o.uniform4fv(n,t._array);break;case"t":case"sampler2D":if(!t.value||!t.value.baseTexture.hasLoaded)break;o.activeTexture(o["TEXTURE"+this.textureCount]);var a=t.value.baseTexture._glTextures[o.id];a||(this.initSampler2D(t),a=t.value.baseTexture._glTextures[o.id]),o.bindTexture(o.TEXTURE_2D,a),o.uniform1i(t._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+t.type)}},n.prototype.syncUniforms=function(){for(var t in this.textureCount=1,this.uniforms)this.syncUniform(this.uniforms[t])},n.prototype.initSampler2D=function(t){var e=this.gl,i=t.value.baseTexture;if(i.hasLoaded)if(t.textureData){var n=t.textureData;i._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,i._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultipliedAlpha),e.texImage2D(e.TEXTURE_2D,0,n.luminance?e.LUMINANCE:e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n.magFilter?n.magFilter:e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n.wrapS?n.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,n.wrapS?n.wrapS:e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,n.wrapT?n.wrapT:e.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(i)},n.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},n.prototype._glCompile=function(t,e){var i=this.gl.createShader(t);return this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(console.log(this.gl.getShaderInfoLog(i)),null)}},{"../../../utils":77}],62:[function(t,e,i){function n(t,e,i,s,o){var a={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(s)for(var h in s)a[h]=s[h];var l={aVertexPosition:0,aTextureCoord:0,aColor:0};if(o)for(var u in o)l[u]=o[u];e=e||n.defaultVertexSrc,i=i||n.defaultFragmentSrc,r.call(this,t,e,i,a,l)}var r=t("./Shader");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),n.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":61}],63:[function(t,e,i){function n(t){r.call(this,t)}var r=t("../managers/WebGLManager");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.start=function(){},n.prototype.stop=function(){this.flush()},n.prototype.flush=function(){},n.prototype.render=function(t){}},{"../managers/WebGLManager":58}],64:[function(t,e,i){function n(t){this.gl=t,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,128,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),this.upload()}n.prototype.constructor=n,n.prototype.map=function(t,e){var i=0,n=0;this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this.upload()},n.prototype.upload=function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.bufferSubData(t.ARRAY_BUFFER,32,this.uvs),t.bufferSubData(t.ARRAY_BUFFER,64,this.colors)},n.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},e.exports=n},{}],65:[function(t,e,i){var n=t("../../../math"),r=t("../../../utils"),s=t("../../../const"),o=t("./StencilMaskStack"),a=function(t,e,i,a,h,l){(this.gl=t,this.frameBuffer=null,this.texture=null,this.size=new n.Rectangle(0,0,1,1),this.resolution=h||s.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new o,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=a||s.SCALE_MODES.DEFAULT,this.root=l,this.root)||(this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,a===s.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,a===s.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),r.isPowerOfTwo(e,i)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0));this.resize(e,i)};a.prototype.constructor=a,e.exports=a,a.prototype.clear=function(t){var e=this.gl;t&&e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},a.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var t=this.gl;this.stencilBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencilBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},a.prototype.activate=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer);var e=this.frame||this.size;this.calculateProjection(e),this.transform&&this.projectionMatrix.append(this.transform),t.viewport(0,0,e.width*this.resolution,e.height*this.resolution)},a.prototype.calculateProjection=function(t){var e=this.projectionMatrix;e.identity(),this.root?(e.a=1/t.width*2,e.d=-1/t.height*2,e.tx=-1-t.x*e.a,e.ty=1-t.y*e.d):(e.a=1/t.width*2,e.d=1/t.height*2,e.tx=-1-t.x*e.a,e.ty=-1-t.y*e.d)},a.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){if(this.size.width=t,this.size.height=e,!this.root){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t*this.resolution,e*this.resolution,0,i.RGBA,i.UNSIGNED_BYTE,null),this.stencilBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t*this.resolution,e*this.resolution))}var n=this.frame||this.size;this.calculateProjection(n)}},a.prototype.destroy=function(){var t=this.gl;t.deleteRenderbuffer(this.stencilBuffer),t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":23,"../../../math":33,"../../../utils":77,"./StencilMaskStack":66}],66:[function(t,e,i){function n(){this.stencilStack=[],this.reverse=!0,this.count=0}n.prototype.constructor=n,e.exports=n},{}],67:[function(t,e,i){function n(t){o.call(this),this.anchor=new r.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=l.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=t||s.EMPTY}var r=t("../math"),s=t("../textures/Texture"),o=t("../display/Container"),a=t("../renderers/canvas/utils/CanvasTinter"),h=t("../utils"),l=t("../const"),u=new r.Point;n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return Math.abs(this.scale.x)*this.texture.width},set:function(t){var e=h.sign(this.scale.x)||1;this.scale.x=e*t/this.texture.width,this._width=t}},height:{get:function(){return Math.abs(this.scale.y)*this.texture.height},set:function(t){var e=h.sign(this.scale.y)||1;this.scale.y=e*t/this.texture.height,this._height=t}},texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),n.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=h.sign(this.scale.x)*this._width/this.texture.width),this._height&&(this.scale.y=h.sign(this.scale.y)*this._height/this.texture.height)},n.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this)},n.prototype.getBounds=function(t){if(!this._currentBounds){var e,i,n,r,s=this._texture.width,o=this._texture.height,a=s*(1-this.anchor.x),h=s*-this.anchor.x,l=o*(1-this.anchor.y),u=o*-this.anchor.y,c=t||this.worldTransform,d=c.a,p=c.b,f=c.c,g=c.d,_=c.tx,v=c.ty,m=d*h+f*u+_,y=g*u+p*h+v,x=d*a+f*u+_,b=g*u+p*a+v,T=d*a+f*l+_,E=g*l+p*a+v,S=d*h+f*l+_,w=g*l+p*h+v;if(e=(e=(e=(e=m)>x?x:e)>T?T:e)>S?S:e,n=(n=(n=(n=y)>b?b:n)>E?E:n)>w?w:n,i=S>(i=T>(i=x>(i=m)?x:i)?T:i)?S:i,r=w>(r=E>(r=b>(r=y)?b:r)?E:r)?w:r,this.children.length){var A=this.containerGetBounds();a=A.x,h=A.x+A.width,e=a>e?e:a,n=(l=A.y)>n?n:l,i=i>h?i:h,r=r>(u=A.y+A.height)?r:u}var P=this._bounds;P.x=e,P.width=i-e,P.y=n,P.height=r-n,this._currentBounds=P}return this._currentBounds},n.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e,i=this._texture.width,n=this._texture.height,r=-i*this.anchor.x;return u.x>r&&u.x<r+i&&(e=-n*this.anchor.y,u.y>e&&u.y<e+n)},n.prototype._renderCanvas=function(t){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)){var e=t.blendModes[this.blendMode];if(e!==t.context.globalCompositeOperation&&(t.context.globalCompositeOperation=e),this.texture.valid){var i,n,r,s,o=this._texture,h=this.worldTransform;t.context.globalAlpha=this.worldAlpha;var u=o.baseTexture.scaleMode===l.SCALE_MODES.LINEAR;if(t.smoothProperty&&t.context[t.smoothProperty]!==u&&(t.context[t.smoothProperty]=u),o.rotate){r=o.crop.height,s=o.crop.width,i=o.trim?o.trim.y-this.anchor.y*o.trim.height:this.anchor.y*-o._frame.height,n=o.trim?o.trim.x-this.anchor.x*o.trim.width:this.anchor.x*-o._frame.width,i+=r,h.tx=n*h.a+i*h.c+h.tx,h.ty=n*h.b+i*h.d+h.ty;var c=h.a;h.a=-h.c,h.c=c,c=h.b,h.b=-h.d,h.d=c,i=0,n=0}else r=o.crop.width,s=o.crop.height,i=o.trim?o.trim.x-this.anchor.x*o.trim.width:this.anchor.x*-o._frame.width,n=o.trim?o.trim.y-this.anchor.y*o.trim.height:this.anchor.y*-o._frame.height;var d=o.baseTexture.resolution;t.roundPixels?(t.context.setTransform(h.a/d,h.b/d,h.c/d,h.d/d,h.tx*t.resolution|0,h.ty*t.resolution|0),i|=0,n|=0):t.context.setTransform(h.a/d,h.b/d,h.c/d,h.d/d,h.tx*t.resolution,h.ty*t.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=a.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,r,s,i*t.resolution,n*t.resolution,r*t.resolution,s*t.resolution)):t.context.drawImage(o.baseTexture.source,o.crop.x,o.crop.y,r,s,i*t.resolution,n*t.resolution,r*t.resolution,s*t.resolution)}}},n.prototype.destroy=function(t,e){o.prototype.destroy.call(this),this.anchor=null,t&&this._texture.destroy(e),this._texture=null,this.shader=null},n.fromFrame=function(t){var e=h.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new n(e)},n.fromImage=function(t,e,i){return new n(s.fromImage(t,e,i))}},{"../const":23,"../display/Container":24,"../math":33,"../renderers/canvas/utils/CanvasTinter":48,"../textures/Texture":72,"../utils":77}],68:[function(t,e,i){function n(t){r.call(this,t),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=o.SPRITE_BATCH_SIZE;var e=4*this.size*this.vertByteSize,i=6*this.size;this.vertices=new ArrayBuffer(e),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(i);for(var n=0,s=0;i>n;n+=6,s+=4)this.indices[n+0]=s+0,this.indices[n+1]=s+1,this.indices[n+2]=s+2,this.indices[n+3]=s+0,this.indices[n+4]=s+2,this.indices[n+5]=s+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}var r=t("../../renderers/webgl/utils/ObjectRenderer"),s=t("../../renderers/webgl/WebGLRenderer"),o=t("../../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,s.registerPlugin("sprite",n),n.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},n.prototype.render=function(t){var e=t._texture;this.currentBatchSize>=this.size&&this.flush();var i=e._uvs;if(i){var n,r,s,o,a=t.anchor.x,h=t.anchor.y;if(e.trim&&void 0===t.tileScale){var l=e.trim;n=(r=l.x-a*l.width)+e.crop.width,s=(o=l.y-h*l.height)+e.crop.height}else n=e._frame.width*(1-a),r=e._frame.width*-a,s=e._frame.height*(1-h),o=e._frame.height*-h;var u=this.currentBatchSize*this.vertByteSize,c=t.worldTransform,d=e.baseTexture.resolution,p=c.a/d,f=c.b/d,g=c.c/d,_=c.d/d,v=c.tx,m=c.ty,y=this.colors,x=this.positions;if(this.renderer.roundPixels){d=this.renderer.resolution;x[u]=((p*r+g*o+v)*d|0)/d,x[u+1]=((_*o+f*r+m)*d|0)/d,x[u+5]=((p*n+g*o+v)*d|0)/d,x[u+6]=((_*o+f*n+m)*d|0)/d,x[u+10]=((p*n+g*s+v)*d|0)/d,x[u+11]=((_*s+f*n+m)*d|0)/d,x[u+15]=((p*r+g*s+v)*d|0)/d,x[u+16]=((_*s+f*r+m)*d|0)/d}else x[u]=p*r+g*o+v,x[u+1]=_*o+f*r+m,x[u+5]=p*n+g*o+v,x[u+6]=_*o+f*n+m,x[u+10]=p*n+g*s+v,x[u+11]=_*s+f*n+m,x[u+15]=p*r+g*s+v,x[u+16]=_*s+f*r+m;x[u+2]=i.x0,x[u+3]=i.y0,x[u+7]=i.x1,x[u+8]=i.y1,x[u+12]=i.x2,x[u+13]=i.y2,x[u+17]=i.x3,x[u+18]=i.y3;var b=t.tint;y[u+4]=y[u+9]=y[u+14]=y[u+19]=(b>>16)+(65280&b)+((255&b)<<16)+(255*t.worldAlpha<<24),this.sprites[this.currentBatchSize++]=t}},n.prototype.flush=function(){if(0!==this.currentBatchSize){var t,e=this.renderer.gl;if(this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var i=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);e.bufferSubData(e.ARRAY_BUFFER,0,i)}for(var n,r,s,o,a=0,h=0,l=null,u=this.renderer.blendModeManager.currentBlendMode,c=null,d=!1,p=!1,f=0,g=this.currentBatchSize;g>f;f++)n=(o=this.sprites[f])._texture.baseTexture,d=u!==(r=o.blendMode),p=c!==(s=o.shader||this.shader),(l!==n||d||p)&&(this.renderBatch(l,a,h),h=f,a=0,l=n,d&&(u=r,this.renderer.blendModeManager.setBlendMode(u)),p&&((t=(c=s).shaders?c.shaders[e.id]:c)||(t=c.getShader(this.renderer)),this.renderer.shaderManager.setShader(t),t.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),t.syncUniforms(),e.activeTexture(e.TEXTURE0))),a++;this.renderBatch(l,a,h),this.currentBatchSize=0}},n.prototype.renderBatch=function(t,e,i){if(0!==e){var n=this.renderer.gl;t._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,t._glTextures[n.id]):this.renderer.updateTexture(t),n.drawElements(n.TRIANGLES,6*e,n.UNSIGNED_SHORT,6*i*2),this.renderer.drawCount++}},n.prototype.start=function(){var t=this.renderer.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.vertByteSize;t.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,t.FLOAT,!1,e,0),t.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,t.FLOAT,!1,e,8),t.vertexAttribPointer(this.shader.attributes.aColor,4,t.UNSIGNED_BYTE,!0,e,16)},n.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),r.prototype.destroy.call(this),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{"../../const":23,"../../renderers/webgl/WebGLRenderer":49,"../../renderers/webgl/utils/ObjectRenderer":63}],69:[function(t,e,i){function n(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||h.RESOLUTION,this._text=null,this._style=null;var n=s.fromCanvas(this.canvas);n.trim=new o.Rectangle,r.call(this,n),this.text=t,this.style=e}var r=t("../sprites/Sprite"),s=t("../textures/Texture"),o=t("../math"),a=t("../utils"),h=t("../const");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.fontPropertiesCache={},n.fontPropertiesCanvas=document.createElement("canvas"),n.fontPropertiesContext=n.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(n.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture.width},set:function(t){this.scale.x=t/this._texture.width,this._width=t}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture.height},set:function(t){this.scale.y=t/this._texture.height,this._height=t}},style:{get:function(){return this._style},set:function(t){"number"==typeof(t=t||{}).fill&&(t.fill=a.hex2string(t.fill)),"number"==typeof t.stroke&&(t.stroke=a.hex2string(t.stroke)),"number"==typeof t.dropShadowColor&&(t.dropShadowColor=a.hex2string(t.dropShadowColor)),t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowColor=t.dropShadowColor||"#000000",t.dropShadowAngle=void 0!==t.dropShadowAngle?t.dropShadowAngle:Math.PI/6,t.dropShadowDistance=void 0!==t.dropShadowDistance?t.dropShadowDistance:5,t.dropShadowBlur=void 0!==t.dropShadowBlur?t.dropShadowBlur:0,t.padding=t.padding||0,t.textBaseline=t.textBaseline||"alphabetic",t.lineJoin=t.lineJoin||"miter",t.miterLimit=t.miterLimit||10,this._style=t,this.dirty=!0}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),n.prototype.updateText=function(){var t=this._style;this.context.font=t.font;for(var e=(t.wordWrap?this.wordWrap(this._text):this._text).split(/(?:\r\n|\r|\n)/),i=new Array(e.length),n=0,r=this.determineFontProperties(t.font),s=0;s<e.length;s++){var o=this.context.measureText(e[s]).width;i[s]=o,n=Math.max(n,o)}var a=n+t.strokeThickness;t.dropShadow&&(a+=t.dropShadowDistance),this.canvas.width=(a+this.context.lineWidth)*this.resolution;var h,l,u=this.style.lineHeight||r.fontSize+t.strokeThickness,c=u*e.length;if(t.dropShadow&&(c+=t.dropShadowDistance),this.canvas.height=(c+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=t.font,this.context.strokeStyle=t.stroke,this.context.lineWidth=t.strokeThickness,this.context.textBaseline=t.textBaseline,this.context.lineJoin=t.lineJoin,this.context.miterLimit=t.miterLimit,t.dropShadow){t.dropShadowBlur>0?(this.context.shadowColor=t.dropShadowColor,this.context.shadowBlur=t.dropShadowBlur):this.context.fillStyle=t.dropShadowColor;var d=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,p=Math.sin(t.dropShadowAngle)*t.dropShadowDistance;for(s=0;s<e.length;s++)h=t.strokeThickness/2,l=t.strokeThickness/2+s*u+r.ascent,"right"===t.align?h+=n-i[s]:"center"===t.align&&(h+=(n-i[s])/2),t.fill&&this.context.fillText(e[s],h+d,l+p+this._style.padding)}for(this.context.fillStyle=t.fill,s=0;s<e.length;s++)h=t.strokeThickness/2,l=t.strokeThickness/2+s*u+r.ascent,"right"===t.align?h+=n-i[s]:"center"===t.align&&(h+=(n-i[s])/2),t.stroke&&t.strokeThickness&&this.context.strokeText(e[s],h,l+this._style.padding),t.fill&&this.context.fillText(e[s],h,l+this._style.padding);this.updateTexture()},n.prototype.updateTexture=function(){var t=this._texture;t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.realWidth=this.canvas.width,t.baseTexture.realHeight=this.canvas.height,t.width=t.baseTexture.width=this.canvas.width/this.resolution,t.height=t.baseTexture.height=this.canvas.height/this.resolution,t.crop.width=t._frame.width=this.canvas.width/this.resolution,t.crop.height=t._frame.height=this.canvas.height/this.resolution,t.trim.x=0,t.trim.y=-this._style.padding,t.trim.width=t._frame.width,t.trim.height=t._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},n.prototype.renderWebGL=function(t){this.dirty&&this.updateText(),r.prototype.renderWebGL.call(this,t)},n.prototype._renderCanvas=function(t){this.dirty&&this.updateText(),r.prototype._renderCanvas.call(this,t)},n.prototype.determineFontProperties=function(t){var e=n.fontPropertiesCache[t];if(!e){e={};var i=n.fontPropertiesCanvas,r=n.fontPropertiesContext;r.font=t;var s=Math.ceil(r.measureText("|MÉq").width),o=Math.ceil(r.measureText("M").width),a=2*o;o=1.4*o|0,i.width=s,i.height=a,r.fillStyle="#f00",r.fillRect(0,0,s,a),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|MÉq",0,o);var h,l,u=r.getImageData(0,0,s,a).data,c=u.length,d=4*s,p=0,f=!1;for(h=0;o>h;h++){for(l=0;d>l;l+=4)if(255!==u[p+l]){f=!0;break}if(f)break;p+=d}for(e.ascent=o-h,p=c-d,f=!1,h=a;h>o;h--){for(l=0;d>l;l+=4)if(255!==u[p+l]){f=!0;break}if(f)break;p-=d}e.descent=h-o,e.fontSize=e.ascent+e.descent,n.fontPropertiesCache[t]=e}return e},n.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),n=this._style.wordWrapWidth,r=0;r<i.length;r++){for(var s=n,o=i[r].split(" "),a=0;a<o.length;a++){var h=this.context.measureText(o[a]).width,l=h+this.context.measureText(" ").width;0===a||l>s?(a>0&&(e+="\n"),e+=o[a],s=n-h):(s-=l,e+=" "+o[a])}r<i.length-1&&(e+="\n")}return e},n.prototype.getBounds=function(t){return this.dirty&&this.updateText(),r.prototype.getBounds.call(this,t)},n.prototype.destroy=function(t){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===t||t)}},{"../const":23,"../math":33,"../sprites/Sprite":67,"../textures/Texture":72,"../utils":77}],70:[function(t,e,i){function n(t,e,i){o.call(this),this.uid=r.uid(),this.resolution=i||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=e||s.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures={},t&&this.loadSource(t)}var r=t("../utils"),s=t("../const"),o=t("eventemitter3");n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=r.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},n.prototype.loadSource=function(t){var e=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=t,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!t.getContext){this.isLoading=!0;var i=this;t.onload=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i._sourceLoaded(),i.emit("loaded",i))},t.onerror=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i.emit("error",i))},t.complete&&t.src&&(this.isLoading=!1,t.onload=null,t.onerror=null,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this))}},n.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},n.prototype.destroy=function(){var t;this.imageUrl?(t=this.imageUrl,r.useFilenamesForTextures&&(t=r.getFilenameFromUrl(this.imageUrl)),delete r.BaseTextureCache[t],delete r.TextureCache[t],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete r.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose();var e=r.TextureCache;for(t in e){var i=e[t];i?i.baseTexture===this&&(i.destroy(),delete e[t]):delete e[t]}this.removeAllListeners()},n.prototype.dispose=function(){this.emit("dispose",this)},n.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},n.fromImage=function(t,e,i){var s=t;r.useFilenamesForTextures&&(s=r.getFilenameFromUrl(t));var o=r.BaseTextureCache[s];if(void 0===e&&0!==t.indexOf("data:")&&(e=!0),!o){var a=new Image;e&&(a.crossOrigin=""),(o=new n(a,i)).imageUrl=t,a.src=t,r.BaseTextureCache[s]=o,o.resolution=r.getResolutionOfUrl(t)}return o},n.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+r.uid());var i=r.BaseTextureCache[t._pixiId];return i||(i=new n(t,e),r.BaseTextureCache[t._pixiId]=i),i}},{"../const":23,"../utils":77,eventemitter3:10}],71:[function(t,e,i){function n(t,e,i,n,c){if(!t)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");e=e||100,i=i||100,c=c||u.RESOLUTION;var d=new r;if(d.width=e,d.height=i,d.realWidth=e*c,d.realHeight=i*c,d.resolution=c,d.scaleMode=n||u.SCALE_MODES.DEFAULT,d.hasLoaded=!0,s.call(this,d,new l.Rectangle(0,0,d.realWidth,d.realHeight)),this.width=e,this.height=i,this.resolution=c,this.render=null,this.renderer=t,this.renderer.type===u.RENDERER_TYPE.WEBGL){var p=this.renderer.gl;this.textureBuffer=new o(p,this.width,this.height,d.scaleMode,this.resolution),this.baseTexture._glTextures[p.id]=this.textureBuffer.texture,this.filterManager=new a(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(e,i),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new h(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}var r=t("./BaseTexture"),s=t("./Texture"),o=t("../renderers/webgl/utils/RenderTarget"),a=t("../renderers/webgl/managers/FilterManager"),h=t("../renderers/canvas/utils/CanvasBuffer"),l=t("../math"),u=t("../const"),c=new l.Matrix;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.resize=function(t,e,i){(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=t,this.height=e,this._frame.width=this.crop.width=t*this.resolution,this._frame.height=this.crop.height=e*this.resolution,i&&(this.baseTexture.realWidth=t*this.resolution,this.baseTexture.realHeight=e*this.resolution,this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.renderer.type===u.RENDERER_TYPE.WEBGL?this.textureBuffer.resize(this.width,this.height):this.textureBuffer.resize(this.baseTexture.realWidth,this.baseTexture.realHeight),this.filterManager&&this.filterManager.resize(this.width,this.height)))},n.prototype.clear=function(){this.valid&&(this.renderer.type===u.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.prototype.renderWebGL=function(t,e,i,n){if(this.valid){if(n=void 0===n||n,this.textureBuffer.transform=e,this.textureBuffer.activate(),t.worldAlpha=1,n){t.worldTransform.identity(),t.currentBounds=null;var r,s,o=t.children;for(r=0,s=o.length;s>r;++r)o[r].updateTransform()}var a=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(t,this.textureBuffer,i),this.renderer.filterManager=a}},n.prototype.renderCanvas=function(t,e,i,n){if(this.valid){n=!!n;var r=c;r.identity(),e&&r.append(e);var s=t.worldTransform;t.worldTransform=r,t.worldAlpha=1;var o,a,h=t.children;for(o=0,a=h.length;a>o;++o)h[o].updateTransform();i&&this.textureBuffer.clear();var l=this.textureBuffer.context,u=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(t,l),this.renderer.resolution=u,t.worldTransform===r&&(t.worldTransform=s)}},n.prototype.destroy=function(){s.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},n.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},n.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.prototype.getCanvas=function(){if(this.renderer.type===u.RENDERER_TYPE.WEBGL){var t=this.renderer.gl,e=this.textureBuffer.size.width,i=this.textureBuffer.size.height,n=new Uint8Array(4*e*i);t.bindFramebuffer(t.FRAMEBUFFER,this.textureBuffer.frameBuffer),t.readPixels(0,0,e,i,t.RGBA,t.UNSIGNED_BYTE,n),t.bindFramebuffer(t.FRAMEBUFFER,null);var r=new h(e,i),s=r.context.getImageData(0,0,e,i);return s.data.set(n),r.context.putImageData(s,0,0),r.canvas}return this.textureBuffer.canvas},n.prototype.getPixels=function(){var t,e;if(this.renderer.type===u.RENDERER_TYPE.WEBGL){var i=this.renderer.gl;t=this.textureBuffer.size.width,e=this.textureBuffer.size.height;var n=new Uint8Array(4*t*e);return i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),i.readPixels(0,0,t,e,i.RGBA,i.UNSIGNED_BYTE,n),i.bindFramebuffer(i.FRAMEBUFFER,null),n}return t=this.textureBuffer.canvas.width,e=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,t,e).data},n.prototype.getPixel=function(t,e){if(this.renderer.type===u.RENDERER_TYPE.WEBGL){var i=this.renderer.gl,n=new Uint8Array(4);return i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),i.readPixels(t,e,1,1,i.RGBA,i.UNSIGNED_BYTE,n),i.bindFramebuffer(i.FRAMEBUFFER,null),n}return this.textureBuffer.canvas.getContext("2d").getImageData(t,e,1,1).data}},{"../const":23,"../math":33,"../renderers/canvas/utils/CanvasBuffer":45,"../renderers/webgl/managers/FilterManager":54,"../renderers/webgl/utils/RenderTarget":65,"./BaseTexture":70,"./Texture":72}],72:[function(t,e,i){function n(t,e,i,r,s){a.call(this),this.noFrame=!1,e||(this.noFrame=!0,e=new h.Rectangle(0,0,1,1)),t instanceof n&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=r,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||e,this.rotate=!!s,t.hasLoaded?(this.noFrame&&(e=new h.Rectangle(0,0,t.realWidth,t.realHeight)),this.frame=e):t.once("loaded",this.onBaseTextureLoaded,this),t.on("update",this.onBaseTextureUpdated,this)}var r=t("./BaseTexture"),s=t("./VideoBaseTexture"),o=t("./TextureUvs"),a=t("eventemitter3"),h=t("../math"),l=t("../utils");n.prototype=Object.create(a.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{frame:{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=this.baseTexture.resolution;if(this.width=t.width/e,this.height=t.height/e,!this.trim&&!this.rotate&&(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=t&&t.width&&t.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width/e,this.height=this.trim.height/e,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=t,this.valid&&this._updateUvs()}}}),n.prototype.update=function(){this.baseTexture.update()},n.prototype.onBaseTextureLoaded=function(t){this.noFrame?this.frame=new h.Rectangle(0,0,t.realWidth,t.realHeight):this.frame=this._frame,this.emit("update",this)},n.prototype.onBaseTextureUpdated=function(t){this.noFrame?(this._frame.width=t.realWidth,this._frame.height=t.realHeight):this.frame=this._frame,this.emit("update",this)},n.prototype.destroy=function(t){this.baseTexture&&(t&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},n.prototype.clone=function(){return new n(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},n.prototype._updateUvs=function(){this._uvs||(this._uvs=new o),this._uvs.set(this.crop,this.baseTexture,this.rotate)},n.fromImage=function(t,e,i){var s=t;l.useFilenamesForTextures&&(s=l.getFilenameFromUrl(t));var o=l.TextureCache[s];return o||(o=new n(r.fromImage(t,e,i)),l.TextureCache[s]=o),o},n.fromFrame=function(t,e){var i=t;l.useFilenamesForTextures&&(i=l.getFilenameFromUrl(t));var n=l.TextureCache[i];if(!n&&!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return n},n.fromCanvas=function(t,e){return new n(r.fromCanvas(t,e))},n.fromVideo=function(t,e){return"string"==typeof t?n.fromVideoUrl(t,e):new n(s.fromVideo(t,e))},n.fromVideoUrl=function(t,e){return new n(s.fromUrl(t,e))},n.addTextureToCache=function(t,e){l.TextureCache[e]=t},n.removeTextureFromCache=function(t){var e=l.TextureCache[t];return delete l.TextureCache[t],delete l.BaseTextureCache[t],e},n.EMPTY=new n(new r)},{"../math":33,"../utils":77,"./BaseTexture":70,"./TextureUvs":73,"./VideoBaseTexture":74,eventemitter3:10}],73:[function(t,e,i){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}e.exports=n,n.prototype.set=function(t,e,i){var n=e.realWidth,r=e.realHeight;i?(this.x0=(t.x+t.height)/n,this.y0=t.y/r,this.x1=(t.x+t.height)/n,this.y1=(t.y+t.width)/r,this.x2=t.x/n,this.y2=(t.y+t.width)/r,this.x3=t.x/n,this.y3=t.y/r):(this.x0=t.x/n,this.y0=t.y/r,this.x1=(t.x+t.width)/n,this.y1=t.y/r,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/r,this.x3=t.x/n,this.y3=(t.y+t.height)/r)}},{}],74:[function(t,e,i){function n(t,e){if(!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),s.call(this,t,e),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),t.complete||(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function r(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}var s=t("./BaseTexture"),o=t("../utils");n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},n.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},n.prototype._onPlayStop=function(){this.autoUpdate=!1},n.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},n.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete o.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),s.prototype.destroy.call(this)},n.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+o.uid());var i=o.BaseTextureCache[t._pixiId];return i||(i=new n(t,e),o.BaseTextureCache[t._pixiId]=i),i},n.fromUrl=function(t,e){var i=document.createElement("video");if(Array.isArray(t))for(var s=0;s<t.length;++s)i.appendChild(r(t[s].src||t[s],t[s].mime));else i.appendChild(r(t.src||t,t.mime));return i.load(),i.play(),n.fromVideo(i,e)},n.fromUrls=n.fromUrl},{"../utils":77,"./BaseTexture":70}],75:[function(t,e,i){function n(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(o,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new s,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/r.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}var r=t("../const"),s=t("eventemitter3"),o="tick";Object.defineProperties(n.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,r.TARGET_FPMS);this._maxElapsedMS=1/e}}}),n.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(o,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(t,e){return this._emitter.on(o,t,e),this._startIfPossible(),this},n.prototype.addOnce=function(t,e){return this._emitter.once(o,t,e),this._startIfPossible(),this},n.prototype.remove=function(t,e){return this._emitter.off(o,t,e),this._emitter.listeners(o,!0)||this._cancelIfNeeded(),this},n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.update=function(t){var e;t=t||performance.now(),(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*r.TARGET_FPMS*this.speed,this._emitter.emit(o,this.deltaTime),this.lastTime=t},e.exports=n},{"../const":23,eventemitter3:10}],76:[function(t,e,i){var n=t("./Ticker"),r=new n;r.autoStart=!0,e.exports={shared:r,Ticker:n}},{"./Ticker":75}],77:[function(t,e,i){var n=t("../const"),r=e.exports={_uid:0,_saidHello:!1,EventEmitter:t("eventemitter3"),pluginTarget:t("./pluginTarget"),async:t("async"),uid:function(){return++r._uid},hex2rgb:function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},hex2string:function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},rgb2hex:function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;i.src=t+"AP804Oa6"+e;var n=new Image;n.src=t+"/wCKxvRF"+e;var r=document.createElement("canvas");r.width=6,r.height=1;var s=r.getContext("2d");s.globalCompositeOperation="multiply",s.drawImage(i,0,0),s.drawImage(n,2,0);var o=s.getImageData(2,0,1,1).data;return 255===o[0]&&0===o[1]&&0===o[2]},getNextPowerOfTwo:function(t){if(t>0&&0==(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},isPowerOfTwo:function(t,e){return t>0&&0==(t&t-1)&&e>0&&0==(e&e-1)},getResolutionOfUrl:function(t){var e=n.RETINA_PREFIX.exec(t);return e?parseFloat(e[1]):1},sayHello:function(t){if(!r._saidHello){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c Pixi.js "+n.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("Pixi.js "+n.VERSION+" - "+t+" - http://www.pixijs.com/");r._saidHello=!0}},isWebGLSupported:function(){var t={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!(!i||!i.getContextAttributes().stencil)}catch(t){return!1}},sign:function(t){return t?0>t?-1:1:0},removeItems:function(t,e,i){var n=t.length;if(!(e>=n||0===i)){for(var r=e,s=n-(i=e+i>n?n-e:i);s>r;++r)t[r]=t[r+i];t.length=s}},TextureCache:{},BaseTextureCache:{},useFilenamesForTextures:!1,getFilenameFromUrl:function(t){if(0===t.indexOf("data:"))return t;var e=t.substring(t.lastIndexOf("/")+1),i=e.lastIndexOf(".");return-1!==i&&(e=e.substring(0,i)),e}}},{"../const":23,"./pluginTarget":78,async:1,eventemitter3:10}],78:[function(t,e,i){e.exports={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},{}],79:[function(t,e,i){var n=t("./core"),r=t("./mesh"),s=t("./extras"),o=t("./filters");n.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},n.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(n,{Stage:{get:function(){return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),n.Container}},DisplayObjectContainer:{get:function(){return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),n.Container}},Strip:{get:function(){return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),r.Mesh}},Rope:{get:function(){return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),r.Rope}},MovieClip:{get:function(){return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),s.MovieClip}},TilingSprite:{get:function(){return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),s.TilingSprite}},BitmapText:{get:function(){return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),s.BitmapText}},blendModes:{get:function(){return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),n.BLEND_MODES}},scaleModes:{get:function(){return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),n.SCALE_MODES}},BaseTextureCache:{get:function(){return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),n.utils.BaseTextureCache}},TextureCache:{get:function(){return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),n.utils.TextureCache}},math:{get:function(){return console.warn("The math namespace is deprecated, please access members already accessible on PIXI."),n}}}),n.Sprite.prototype.setTexture=function(t){this.texture=t,console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},s.BitmapText.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},n.Text.prototype.setText=function(t){this.text=t,console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},n.Text.prototype.setStyle=function(t){this.style=t,console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},n.Texture.prototype.setFrame=function(t){this.frame=t,console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(o,{AbstractFilter:{get:function(){return console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on."),n.AbstractFilter}},FXAAFilter:{get:function(){return console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on."),n.FXAAFilter}},SpriteMaskFilter:{get:function(){return console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),n.SpriteMaskFilter}}}),n.utils.uuid=function(){return console.warn("utils.uuid() is deprecated, please use utils.uid() from now on."),n.utils.uid()}},{"./core":30,"./extras":86,"./filters":103,"./mesh":128}],80:[function(t,e,i){function n(t,e){r.Container.call(this),e=e||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},this.font=e.font,this._text=t,this.maxWidth=0,this.maxLineHeight=0,this.dirty=!1,this.updateText()}var r=t("../core");n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{tint:{get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):n.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}}}),n.prototype.updateText=function(){for(var t=n.fonts[this._font.name],e=new r.Point,i=null,s=[],o=0,a=0,h=[],l=0,u=this._font.size/t.size,c=-1,d=0,p=0;p<this.text.length;p++){var f=this.text.charCodeAt(p);if(c=/(\s)/.test(this.text.charAt(p))?p:c,/(?:\r\n|\r|\n)/.test(this.text.charAt(p)))h.push(o),a=Math.max(a,o),l++,e.x=0,e.y+=t.lineHeight,i=null;else if(-1!==c&&this.maxWidth>0&&e.x*u>this.maxWidth)r.utils.removeItems(s,c,p-c),p=c,c=-1,h.push(o),a=Math.max(a,o),l++,e.x=0,e.y+=t.lineHeight,i=null;else{var g=t.chars[f];g&&(i&&g.kerning[i]&&(e.x+=g.kerning[i]),s.push({texture:g.texture,line:l,charCode:f,position:new r.Point(e.x+g.xOffset,e.y+g.yOffset)}),o=e.x+(g.texture.width+g.xOffset),e.x+=g.xAdvance,d=Math.max(d,g.yOffset+g.texture.height),i=f)}}h.push(o),a=Math.max(a,o);var _=[];for(p=0;l>=p;p++){var v=0;"right"===this._font.align?v=a-h[p]:"center"===this._font.align&&(v=(a-h[p])/2),_.push(v)}var m=s.length,y=this.tint;for(p=0;m>p;p++){var x=this._glyphs[p];x?x.texture=s[p].texture:(x=new r.Sprite(s[p].texture),this._glyphs.push(x)),x.position.x=(s[p].position.x+_[s[p].line])*u,x.position.y=s[p].position.y*u,x.scale.x=x.scale.y=u,x.tint=y,x.parent||this.addChild(x)}for(p=m;p<this._glyphs.length;++p)this.removeChild(this._glyphs[p]);this.textWidth=a*u,this.textHeight=(e.y+t.lineHeight)*u,this.maxLineHeight=d*u},n.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},n.prototype.getLocalBounds=function(){return this.validate(),r.Container.prototype.getLocalBounds.call(this)},n.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},n.fonts={}},{"../core":30}],81:[function(t,e,i){function n(t){r.Sprite.call(this,t[0]instanceof r.Texture?t[0]:t[0].texture),this._textures=null,this._durations=null,this.textures=t,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}var r=t("../core");n.prototype=Object.create(r.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(t){if(t[0]instanceof r.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}}},currentFrame:{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return 0>t&&(t+=this._textures.length),t}}}),n.prototype.stop=function(){this.playing&&(this.playing=!1,r.ticker.shared.remove(this.update,this))},n.prototype.play=function(){this.playing||(this.playing=!0,r.ticker.shared.add(this.update,this))},n.prototype.gotoAndStop=function(t){this.stop(),this._currentTime=t,this._texture=this._textures[this.currentFrame]},n.prototype.gotoAndPlay=function(t){this._currentTime=t,this.play()},n.prototype.update=function(t){var e=this.animationSpeed*t;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;0>i;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):this._texture=this._textures[this.currentFrame]},n.prototype.destroy=function(){this.stop(),r.Sprite.prototype.destroy.call(this)},n.fromFrames=function(t){for(var e=[],i=0;i<t.length;++i)e.push(new r.Texture.fromFrame(t[i]));return new n(e)},n.fromImages=function(t){for(var e=[],i=0;i<t.length;++i)e.push(new r.Texture.fromImage(t[i]));return new n(e)}},{"../core":30}],82:[function(t,e,i){function n(t,e,i){r.Sprite.call(this,t),this.tileScale=new r.Point(1,1),this.tilePosition=new r.Point(0,0),this._width=e||100,this._height=i||100,this._uvs=new r.TextureUvs,this._canvasPattern=null,this.shader=new r.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}var r=t("../core"),s=new r.Point,o=t("../core/renderers/canvas/utils/CanvasTinter");n.prototype=Object.create(r.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this._width},set:function(t){this._width=t}},height:{get:function(){return this._height},set:function(t){this._height=t}}}),n.prototype._onTextureUpdate=function(){},n.prototype._renderWebGL=function(t){var e=this._texture;if(e&&e._uvs){var i=e._uvs,n=e._frame.width,r=e._frame.height,s=e.baseTexture.width,o=e.baseTexture.height;e._uvs=this._uvs,e._frame.width=this.width,e._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/s,this.shader.uniforms.uPixelSize.value[1]=1/o,this.shader.uniforms.uFrame.value[0]=i.x0,this.shader.uniforms.uFrame.value[1]=i.y0,this.shader.uniforms.uFrame.value[2]=i.x1-i.x0,this.shader.uniforms.uFrame.value[3]=i.y2-i.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(n*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(r*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=s/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=o/this._height*this.tileScale.y,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this),e._uvs=i,e._frame.width=n,e._frame.height=r}},n.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,n=this.worldTransform,s=t.resolution,a=e.baseTexture,h=this.tilePosition.x/this.tileScale.x%e._frame.width,l=this.tilePosition.y/this.tileScale.y%e._frame.height;if(!this._canvasPattern){var u=new r.CanvasBuffer(e._frame.width,e._frame.height);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=o.getTintedTexture(this,this.tint)),u.context.drawImage(this.tintedTexture,0,0)):u.context.drawImage(a.source,-e._frame.x,-e._frame.y),this._canvasPattern=u.context.createPattern(u.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s,n.ty*s),i.scale(this.tileScale.x,this.tileScale.y),i.translate(h+this.anchor.x*-this._width,l+this.anchor.y*-this._height);var c=t.blendModes[this.blendMode];c!==t.context.globalCompositeOperation&&(i.globalCompositeOperation=c),i.fillStyle=this._canvasPattern,i.fillRect(-h,-l,this._width/this.tileScale.x,this._height/this.tileScale.y)}},n.prototype.getBounds=function(){var t,e,i,n,r=this._width,s=this._height,o=r*(1-this.anchor.x),a=r*-this.anchor.x,h=s*(1-this.anchor.y),l=s*-this.anchor.y,u=this.worldTransform,c=u.a,d=u.b,p=u.c,f=u.d,g=u.tx,_=u.ty,v=c*a+p*l+g,m=f*l+d*a+_,y=c*o+p*l+g,x=f*l+d*o+_,b=c*o+p*h+g,T=f*h+d*o+_,E=c*a+p*h+g,S=f*h+d*a+_;t=(t=(t=(t=v)>y?y:t)>b?b:t)>E?E:t,i=(i=(i=(i=m)>x?x:i)>T?T:i)>S?S:i,e=E>(e=b>(e=y>(e=v)?y:e)?b:e)?E:e,n=S>(n=T>(n=x>(n=m)?x:n)?T:n)?S:n;var w=this._bounds;return w.x=t,w.width=e-t,w.y=i,w.height=n-i,this._currentBounds=w,w},n.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,s);var e,i=this._width,n=this._height,r=-i*this.anchor.x;return s.x>r&&s.x<r+i&&(e=-n*this.anchor.y,s.y>e&&s.y<e+n)},n.prototype.destroy=function(){r.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},n.fromFrame=function(t,e,i){var s=r.utils.TextureCache[t];if(!s)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new n(s,e,i)},n.fromImage=function(t,e,i,s,o){return new n(r.Texture.fromImage(t,s,o),e,i)}},{"../core":30,"../core/renderers/canvas/utils/CanvasTinter":48}],83:[function(t,e,i){var n=t("../core"),r=n.DisplayObject,s=new n.Matrix;r.prototype._cacheAsBitmap=!1,r.prototype._originalRenderWebGL=null,r.prototype._originalRenderCanvas=null,r.prototype._originalUpdateTransform=null,r.prototype._originalHitTest=null,r.prototype._originalDestroy=null,r.prototype._cachedSprite=null,Object.defineProperties(r.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),r.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cachedSprite.worldAlpha=this.worldAlpha,t.setObjectRenderer(t.plugins.sprite),t.plugins.sprite.render(this._cachedSprite))},r.prototype._initCachedDisplayObject=function(t){if(!this._cachedSprite){t.currentRenderer.flush();var e=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;e.x-=i,e.y-=i,e.width+=2*i,e.height+=2*i}var r=t.currentRenderTarget,o=t.filterManager.filterStack,a=new n.RenderTexture(t,0|e.width,0|e.height),h=s;h.tx=-e.x,h.ty=-e.y,this.renderWebGL=this._originalRenderWebGL,a.render(this,h,!0,!0),t.setRenderTarget(r),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new n.Sprite(a),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},r.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(t))},r.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cachedSprite){var e=this.getLocalBounds(),i=t.context,r=new n.RenderTexture(t,0|e.width,0|e.height),o=s;o.tx=-e.x,o.ty=-e.y,this.renderCanvas=this._originalRenderCanvas,r.render(this,o,!0),t.context=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new n.Sprite(r),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},r.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},r.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},r.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":30}],84:[function(t,e,i){var n=t("../core");n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":30}],85:[function(t,e,i){var n=t("../core");n.DisplayObject.prototype.getGlobalPosition=function(t){return t=t||new n.Point,this.parent?(this.displayObjectUpdateTransform(),t.x=this.worldTransform.tx,t.y=this.worldTransform.ty):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":30}],86:[function(t,e,i){t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition"),e.exports={MovieClip:t("./MovieClip"),TilingSprite:t("./TilingSprite"),BitmapText:t("./BitmapText")}},{"./BitmapText":80,"./MovieClip":81,"./TilingSprite":82,"./cacheAsBitmap":83,"./getChildByName":84,"./getGlobalPosition":85}],87:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":30}],88:[function(t,e,i){function n(){r.AbstractFilter.call(this),this.blurXFilter=new s,this.blurYFilter=new o,this.defaultFilter=new r.AbstractFilter}var r=t("../../core"),s=t("../blur/BlurXFilter"),o=t("../blur/BlurYFilter");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(t,e,i),this.blurXFilter.applyFilter(t,e,n),t.blendModeManager.setBlendMode(r.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(t,n,i),t.blendModeManager.setBlendMode(r.BLEND_MODES.NORMAL),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":30,"../blur/BlurXFilter":91,"../blur/BlurYFilter":92}],89:[function(t,e,i){function n(t,e){r.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:t||0},dirY:{type:"1f",value:e||0}}),this.defaultFilter=new r.AbstractFilter,this.passes=1,this.dirX=t||0,this.dirY=e||0,this.strength=4}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i,n){var r=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(r,e,i,n);else{var s=t.filterManager.getRenderTarget(!0);t.filterManager.applyFilter(r,e,s,n);for(var o=0;o<this.passes-2;o++)t.filterManager.applyFilter(r,s,s,n);t.filterManager.applyFilter(r,s,i,n),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}},dirX:{get:function(){return this.dirX},set:function(t){this.uniforms.dirX.value=t}},dirY:{get:function(){return this.dirY},set:function(t){this.uniforms.dirY.value=t}}})},{"../../core":30}],90:[function(t,e,i){function n(){r.AbstractFilter.call(this),this.blurXFilter=new s,this.blurYFilter=new o}var r=t("../../core"),s=t("./BlurXFilter"),o=t("./BlurYFilter");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(t,e,n),this.blurYFilter.applyFilter(t,n,i),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.padding=.5*Math.abs(t),this.blurXFilter.blur=this.blurYFilter.blur=t}},passes:{get:function(){return this.blurXFilter.passes},set:function(t){this.blurXFilter.passes=this.blurYFilter.passes=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t}}})},{"../../core":30,"./BlurXFilter":91,"./BlurYFilter":92}],91:[function(t,e,i){function n(){r.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i,n){var r=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.width/e.size.width),1===this.passes)t.filterManager.applyFilter(r,e,i,n);else{for(var s=t.filterManager.getRenderTarget(!0),o=e,a=s,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(r,o,a,!0);var l=a;a=o,o=l}t.filterManager.applyFilter(r,o,i,n),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":30}],92:[function(t,e,i){function n(){r.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i,n){var r=this.getShader(t);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(r,e,i,n);else{for(var s=t.filterManager.getRenderTarget(!0),o=e,a=s,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(r,o,a,!0);var l=a;a=o,o=l}t.filterManager.applyFilter(r,o,i,n),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*Math.abs(t),this.strength=t}}})},{"../../core":30}],93:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:.1,y:0}}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n},{"../../core":30}],94:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._loadMatrix=function(t,e){var i=t;(e=!!e)&&(this._multiply(i,this.uniforms.m.value,t),i=this._colorMatrix(i)),this.uniforms.m.value=i},n.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19],t},n.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},n.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.grayscale=n.prototype.greyscale,n.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},n.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=.213,s=.715,o=.072,a=[r+i*(1-r)+n*-r,s+i*-s+n*-s,o+i*-o+n*(1-o),0,0,r+i*-r+.143*n,s+i*(1-s)+.14*n,o+i*-o+-.283*n,0,0,r+i*-r+-.787*n,s+i*-s+n*s,o+i*(1-o)+n*o,0,0,0,0,0,1,0];this._loadMatrix(a,e)},n.prototype.contrast=function(t,e){var i=(t||0)+1,n=-128*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.saturate=function(t,e){var i=2*(t||0)/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},n.prototype.desaturate=function(t){this.saturate(-1)},n.prototype.negative=function(t){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],t)},n.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},n.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},n.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},n.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},n.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},n.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},n.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},n.prototype.colorTone=function(t,e,i,n,r){var s=((i=i||16770432)>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=((n=n||3375104)>>16&255)/255,l=(n>>8&255)/255,u=(255&n)/255,c=[.3,.59,.11,0,0,s,o,a,t=t||.2,0,h,l,u,e=e||.15,0,s-h,o-l,a-u,0,0];this._loadMatrix(c,r)},n.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},n.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},n.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(t){this.uniforms.m.value=t}}})},{"../../core":30}],95:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(t){this.uniforms.step.value=t}}})},{"../../core":30}],96:[function(t,e,i){function n(t,e,i){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(t)},texelSize:{type:"v2",value:{x:1/e,y:1/i}}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(t){this.uniforms.matrix.value=new Float32Array(t)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(t){this.uniforms.texelSize.value.x=1/t}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(t){this.uniforms.texelSize.value.y=1/t}}})},{"../../core":30}],97:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n},{"../../core":30}],98:[function(t,e,i){function n(t,e){var i=new r.Matrix;t.renderable=!1,r.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision mediump float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:t.texture},otherMatrix:{type:"mat3",value:i.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=t,this.maskMatrix=i,null==e&&(e=20),this.scale=new r.Point(e,e)}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager;n.calculateMappedMatrix(e.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/e.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/e.frame.height);var r=this.getShader(t);n.applyFilter(r,e,i)},Object.defineProperties(n.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(t){this.uniforms.mapSampler.value=t}}})},{"../../core":30}],99:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(t){this.uniforms.scale.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":30}],100:[function(t,e,i){function n(){r.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i,n){var r=this.getShader(t);if(this.uniforms.strength.value=this.strength/4/this.passes*(e.frame.height/e.size.height),1===this.passes)t.filterManager.applyFilter(r,e,i,n);else{for(var s=t.filterManager.getRenderTarget(!0),o=e,a=s,h=0;h<this.passes-1;h++){t.filterManager.applyFilter(r,o,a,n);var l=a;a=o,o=l}t.filterManager.applyFilter(r,o,i,n),t.filterManager.returnRenderTarget(s)}},Object.defineProperties(n.prototype,{blur:{get:function(){return this.strength},set:function(t){this.padding=.5*t,this.strength=t}}})},{"../../core":30}],101:[function(t,e,i){function n(){r.AbstractFilter.call(this),this.blurXFilter=new s,this.blurYTintFilter=new o,this.defaultFilter=new r.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=r.BLEND_MODES.MULTIPLY}var r=t("../../core"),s=t("../blur/BlurXFilter"),o=t("./BlurYTintFilter");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(t,e,n),t.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(t,n,i),t.blendModeManager.setBlendMode(r.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(t,e,i),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYTintFilter.blur=t}},blurX:{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(t){this.blurYTintFilter.blur=t}},color:{get:function(){return r.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(t){this.blurYTintFilter.uniforms.color.value=r.utils.hex2rgb(t)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(t){this.blurYTintFilter.uniforms.alpha.value=t}},distance:{get:function(){return this._distance},set:function(t){this._dirtyPosition=!0,this._distance=t}},angle:{get:function(){return this._angle},set:function(t){this._dirtyPosition=!0,this._angle=t}}})},{"../../core":30,"../blur/BlurXFilter":91,"./BlurYTintFilter":100}],102:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(t){this.uniforms.gray.value=t}}})},{"../../core":30}],103:[function(t,e,i){e.exports={AsciiFilter:t("./ascii/AsciiFilter"),BloomFilter:t("./bloom/BloomFilter"),BlurFilter:t("./blur/BlurFilter"),BlurXFilter:t("./blur/BlurXFilter"),BlurYFilter:t("./blur/BlurYFilter"),BlurDirFilter:t("./blur/BlurDirFilter"),ColorMatrixFilter:t("./color/ColorMatrixFilter"),ColorStepFilter:t("./color/ColorStepFilter"),ConvolutionFilter:t("./convolution/ConvolutionFilter"),CrossHatchFilter:t("./crosshatch/CrossHatchFilter"),DisplacementFilter:t("./displacement/DisplacementFilter"),DotScreenFilter:t("./dot/DotScreenFilter"),GrayFilter:t("./gray/GrayFilter"),DropShadowFilter:t("./dropshadow/DropShadowFilter"),InvertFilter:t("./invert/InvertFilter"),NoiseFilter:t("./noise/NoiseFilter"),PixelateFilter:t("./pixelate/PixelateFilter"),RGBSplitFilter:t("./rgb/RGBSplitFilter"),ShockwaveFilter:t("./shockwave/ShockwaveFilter"),SepiaFilter:t("./sepia/SepiaFilter"),SmartBlurFilter:t("./blur/SmartBlurFilter"),TiltShiftFilter:t("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:t("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:t("./tiltshift/TiltShiftYFilter"),TwistFilter:t("./twist/TwistFilter")}},{"./ascii/AsciiFilter":87,"./bloom/BloomFilter":88,"./blur/BlurDirFilter":89,"./blur/BlurFilter":90,"./blur/BlurXFilter":91,"./blur/BlurYFilter":92,"./blur/SmartBlurFilter":93,"./color/ColorMatrixFilter":94,"./color/ColorStepFilter":95,"./convolution/ConvolutionFilter":96,"./crosshatch/CrossHatchFilter":97,"./displacement/DisplacementFilter":98,"./dot/DotScreenFilter":99,"./dropshadow/DropShadowFilter":101,"./gray/GrayFilter":102,"./invert/InvertFilter":104,"./noise/NoiseFilter":105,"./pixelate/PixelateFilter":106,"./rgb/RGBSplitFilter":107,"./sepia/SepiaFilter":108,"./shockwave/ShockwaveFilter":109,"./tiltshift/TiltShiftFilter":111,"./tiltshift/TiltShiftXFilter":112,"./tiltshift/TiltShiftYFilter":113,"./twist/TwistFilter":114}],104:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(t){this.uniforms.invert.value=t}}})},{"../../core":30}],105:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(t){this.uniforms.noise.value=t}}})},{"../../core":30}],106:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(t){this.uniforms.pixelSize.value=t}}})},{"../../core":30}],107:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(t){this.uniforms.red.value=t}},green:{get:function(){return this.uniforms.green.value},set:function(t){this.uniforms.green.value=t}},blue:{get:function(){return this.uniforms.blue.value},set:function(t){this.uniforms.blue.value=t}}})},{"../../core":30}],108:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(t){this.uniforms.sepia.value=t}}})},{"../../core":30}],109:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(t){this.uniforms.center.value=t}},params:{get:function(){return this.uniforms.params.value},set:function(t){this.uniforms.params.value=t}},time:{get:function(){return this.uniforms.time.value},set:function(t){this.uniforms.time.value=t}}})},{"../../core":30}],110:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(n.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(t){this.uniforms.blur.value=t}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(t){this.uniforms.gradientBlur.value=t}},start:{get:function(){return this.uniforms.start.value},set:function(t){this.uniforms.start.value=t,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(t){this.uniforms.end.value=t,this.updateDelta()}}})},{"../../core":30}],111:[function(t,e,i){function n(){r.AbstractFilter.call(this),this.tiltShiftXFilter=new s,this.tiltShiftYFilter=new o}var r=t("../../core"),s=t("./TiltShiftXFilter"),o=t("./TiltShiftYFilter");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.applyFilter=function(t,e,i){var n=t.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(t,e,n),this.tiltShiftYFilter.applyFilter(t,n,i),t.filterManager.returnRenderTarget(n)},Object.defineProperties(n.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t}}})},{"../../core":30,"./TiltShiftXFilter":112,"./TiltShiftYFilter":113}],112:[function(t,e,i){function n(){r.call(this)}var r=t("./TiltShiftAxisFilter");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=t/i,this.uniforms.delta.value.y=e/i}},{"./TiltShiftAxisFilter":110}],113:[function(t,e,i){function n(){r.call(this)}var r=t("./TiltShiftAxisFilter");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.updateDelta=function(){var t=this.uniforms.end.value.x-this.uniforms.start.value.x,e=this.uniforms.end.value.y-this.uniforms.start.value.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.value.x=-e/i,this.uniforms.delta.value.y=t/i}},{"./TiltShiftAxisFilter":110}],114:[function(t,e,i){function n(){r.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}var r=t("../../core");n.prototype=Object.create(r.AbstractFilter.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(t){this.uniforms.offset.value=t}},radius:{get:function(){return this.uniforms.radius.value},set:function(t){this.uniforms.radius.value=t}},angle:{get:function(){return this.uniforms.angle.value},set:function(t){this.uniforms.angle.value=t}}})},{"../../core":30}],115:[function(t,e,i){(function(i){t("./polyfill");var n=e.exports=t("./core");n.extras=t("./extras"),n.filters=t("./filters"),n.interaction=t("./interaction"),n.loaders=t("./loaders"),n.mesh=t("./mesh"),n.accessibility=t("./accessibility"),n.loader=new n.loaders.Loader,Object.assign(n,t("./deprecation")),i.PIXI=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":22,"./core":30,"./deprecation":79,"./extras":86,"./filters":103,"./interaction":118,"./loaders":121,"./mesh":128,"./polyfill":133}],116:[function(t,e,i){function n(){this.global=new r.Point,this.target=null,this.originalEvent=null,this.identifier=-1}var r=t("../core");n.prototype.constructor=n,e.exports=n,n.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}},{"../core":30}],117:[function(t,e,i){function n(t,e){e=e||{},o.call(this),this.renderer=t,this.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,this.interactionFrequency=e.interactionFrequency||10,this.mouse=new s,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this.handleCursorChange=null,this._tempPoint=new r.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}var r=t("../core"),s=t("./InteractionData"),o=t("eventemitter3");Object.assign(r.DisplayObject.prototype,t("./interactiveTarget")),n.prototype=Object.create(o.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.setTargetElement=function(t,e){this.removeEvents(),this.interactionDOMElement=t,this.resolution=e||1,this.addEvents()},n.prototype.addEvents=function(){this.interactionDOMElement&&(r.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onMouseOver,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},n.prototype.removeEvents=function(){this.interactionDOMElement&&(r.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onMouseOver,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},n.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.handleCursorChange?this.handleCursorChange(this.cursor):this.interactionDOMElement.style.cursor=this.cursor)}},n.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.target=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},n.prototype.mapPositionToPoint=function(t,e,i){var n=this.interactionDOMElement.getBoundingClientRect();t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)/this.resolution,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)/this.resolution},n.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var s=!1,o=r=e.interactive||r;if(e.hitArea&&(o=!1),e.interactiveChildren)for(var a=e.children,h=a.length-1;h>=0;h--)this.processInteractive(t,a[h],i,n,o)&&(s=!0,o=!1,a[h].interactive&&(n=!1));return r&&(n&&!s&&(e.hitArea?(e.worldTransform.applyInverse(t,this._tempPoint),s=e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):e.containsPoint&&(s=e.containsPoint(t))),e.interactive&&i(e,s)),s},n.prototype.onMouseDown=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.emit("stagedown",this.eventData),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},n.prototype.processMouseDown=function(t,e){var i=this.mouse.originalEvent,n=2===i.button||3===i.which;e&&(t[n?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,n?"rightdown":"mousedown",this.eventData))},n.prototype.onMouseUp=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.emit("stageup",this.eventData),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},n.prototype.processMouseUp=function(t,e){var i=this.mouse.originalEvent,n=2===i.button||3===i.which,r=n?"_isRightDown":"_isLeftDown";e?(this.dispatchEvent(t,n?"rightup":"mouseup",this.eventData),t[r]&&(t[r]=!1,this.dispatchEvent(t,n?"rightclick":"click",this.eventData))):t[r]&&(t[r]=!1,this.dispatchEvent(t,n?"rightupoutside":"mouseupoutside",this.eventData))},n.prototype.onMouseMove=function(t){this.mouse.originalEvent=t,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.didMove=!0,this.cursor="inherit",this.emit("stagemove",this.eventData),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.handleCursorChange?this.handleCursorChange(this.cursor):this.interactionDOMElement.style.cursor=this.cursor)},n.prototype.processMouseMove=function(t,e){this.dispatchEvent(t,"mousemove",this.eventData),this.processMouseOverOut(t,e)},n.prototype.onMouseOut=function(t){this.mouse.originalEvent=t,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.handleCursorChange||(this.interactionDOMElement.style.cursor="inherit"),this.mapPositionToPoint(this.mouse.global,t.clientX,t.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1),this.emit("stageout")},n.prototype.processMouseOverOut=function(t,e){e?(t._over||(t._over=!0,this.dispatchEvent(t,"mouseover",this.eventData)),t.buttonMode&&(this.cursor=t.defaultCursor)):t._over&&(t._over=!1,this.dispatchEvent(t,"mouseout",this.eventData))},n.prototype.onMouseOver=function(){this.emit("stagein")},n.prototype.onTouchStart=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;i>n;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.emit("stagedown",this.eventData),this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(s)}},n.prototype.processTouchStart=function(t,e){e&&(t._touchDown=this.eventData.data.identifier,this.dispatchEvent(t,"touchstart",this.eventData))},n.prototype.onTouchEnd=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;i>n;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.emit("stageup",this.eventData),this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(s)}},n.prototype.processTouchEnd=function(t,e){e?(this.dispatchEvent(t,"touchend",this.eventData),t._touchDown===this.eventData.data.identifier&&(t._touchDown=!1,this.dispatchEvent(t,"tap",this.eventData))):t._touchDown===this.eventData.data.identifier&&(t._touchDown=!1,this.dispatchEvent(t,"touchendoutside",this.eventData))},n.prototype.onTouchMove=function(t){this.autoPreventDefault&&t.preventDefault();for(var e=t.changedTouches,i=e.length,n=0;i>n;n++){var r=e[n],s=this.getTouchData(r);s.originalEvent=t,this.eventData.data=s,this.eventData.stopped=!1,this.emit("stagemove",this.eventData),this.processInteractive(s.global,this.renderer._lastObjectRendered,this.processTouchMove,!0),this.returnTouchData(s)}},n.prototype.processTouchMove=function(t,e){e=e,this.dispatchEvent(t,"touchmove",this.eventData)},n.prototype.getTouchData=function(t){var e=this.interactiveDataPool.pop();return e||(e=new s),e.identifier=t.identifier,this.mapPositionToPoint(e.global,t.clientX,t.clientY),navigator.isCocoonJS&&(e.global.x=e.global.x/this.resolution,e.global.y=e.global.y/this.resolution),t.globalX=e.global.x,t.globalY=e.global.y,e},n.prototype.returnTouchData=function(t){this.interactiveDataPool.push(t)},n.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onMouseOver=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null,this.handleCursorChange=null},r.WebGLRenderer.registerPlugin("interaction",n),r.CanvasRenderer.registerPlugin("interaction",n)},{"../core":30,"./InteractionData":116,"./interactiveTarget":119,eventemitter3:10}],118:[function(t,e,i){e.exports={InteractionData:t("./InteractionData"),InteractionManager:t("./InteractionManager"),interactiveTarget:t("./interactiveTarget")}},{"./InteractionData":116,"./InteractionManager":117,"./interactiveTarget":119}],119:[function(t,e,i){e.exports={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1}},{}],120:[function(t,e,i){function n(t,e){var i={},n=t.data.getElementsByTagName("info")[0],r=t.data.getElementsByTagName("common")[0];i.font=n.getAttribute("face"),i.size=parseInt(n.getAttribute("size"),10),i.lineHeight=parseInt(r.getAttribute("lineHeight"),10),i.chars={};for(var a=t.data.getElementsByTagName("char"),h=0;h<a.length;h++){var l=parseInt(a[h].getAttribute("id"),10),u=new s.Rectangle(parseInt(a[h].getAttribute("x"),10)+e.frame.x,parseInt(a[h].getAttribute("y"),10)+e.frame.y,parseInt(a[h].getAttribute("width"),10),parseInt(a[h].getAttribute("height"),10));i.chars[l]={xOffset:parseInt(a[h].getAttribute("xoffset"),10),yOffset:parseInt(a[h].getAttribute("yoffset"),10),xAdvance:parseInt(a[h].getAttribute("xadvance"),10),kerning:{},texture:new s.Texture(e.baseTexture,u)}}var c=t.data.getElementsByTagName("kerning");for(h=0;h<c.length;h++){var d=parseInt(c[h].getAttribute("first"),10),p=parseInt(c[h].getAttribute("second"),10),f=parseInt(c[h].getAttribute("amount"),10);i.chars[p].kerning[d]=f}t.bitmapFont=i,o.BitmapText.fonts[i.font]=i}var r=t("resource-loader").Resource,s=t("../core"),o=t("../extras"),a=t("path");e.exports=function(){return function(t,e){if(!t.data||!t.isXml)return e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return e();var i=a.dirname(t.url);"."===i&&(i=""),this.baseUrl&&i&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/"),i=i.replace(this.baseUrl,"")),i&&"/"!==i.charAt(i.length-1)&&(i+="/");var o=i+t.data.getElementsByTagName("page")[0].getAttribute("file"),h=o;if(s.utils.useFilenamesForTextures&&(h=s.utils.getFilenameFromUrl(h)),s.utils.TextureCache[h])n(t,s.utils.TextureCache[h]),e();else{var l={crossOrigin:t.crossOrigin,loadType:r.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata};this.add(t.name+"_image",o,l,(function(i){n(t,i.texture),e()}))}}}},{"../core":30,"../extras":86,path:2,"resource-loader":16}],121:[function(t,e,i){e.exports={Loader:t("./loader"),bitmapFontParser:t("./bitmapFontParser"),spritesheetParser:t("./spritesheetParser"),textureParser:t("./textureParser"),Resource:t("resource-loader").Resource}},{"./bitmapFontParser":120,"./loader":122,"./spritesheetParser":123,"./textureParser":124,"resource-loader":16}],122:[function(t,e,i){function n(t,e){r.call(this,t,e);for(var i=0;i<n._pixiMiddleware.length;++i)this.use(n._pixiMiddleware[i]())}var r=t("resource-loader"),s=t("./textureParser"),o=t("./spritesheetParser"),a=t("./bitmapFontParser");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n._pixiMiddleware=[r.middleware.parsing.blob,s,o,a],n.addPixiMiddleware=function(t){n._pixiMiddleware.push(t)};var h=r.Resource;h.setExtensionXhrType("fnt",h.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":120,"./spritesheetParser":123,"./textureParser":124,"resource-loader":16}],123:[function(t,e,i){var n=t("resource-loader").Resource,r=t("path"),s=t("../core");e.exports=function(){return function(t,e){if(!t.data||!t.isJson||!t.data.frames)return e();var i={crossOrigin:t.crossOrigin,loadType:n.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata},o=r.dirname(t.url.replace(this.baseUrl,"")),a=s.utils.getResolutionOfUrl(t.url);this.add(t.name+"_image",o+"/"+t.data.meta.image,i,(function(i){t.textures={};var n=t.data.frames;for(var r in n){var o=n[r].frame;if(o){var h=null,l=null;if(h=n[r].rotated?new s.Rectangle(o.x,o.y,o.h,o.w):new s.Rectangle(o.x,o.y,o.w,o.h),n[r].trimmed&&(l=new s.Rectangle(n[r].spriteSourceSize.x/a,n[r].spriteSourceSize.y/a,n[r].sourceSize.w/a,n[r].sourceSize.h/a)),n[r].rotated){var u=h.width;h.width=h.height,h.height=u}h.x/=a,h.y/=a,h.width/=a,h.height/=a;var c=r;s.utils.useFilenamesForTextures&&(c=s.utils.getFilenameFromUrl(r)),t.textures[c]=new s.Texture(i.texture.baseTexture,h,h.clone(),l,n[r].rotated),s.utils.TextureCache[c]=t.textures[c]}}e()}))}}},{"../core":30,path:2,"resource-loader":16}],124:[function(t,e,i){var n=t("../core");e.exports=function(){return function(t,e){if(t.data&&t.isImage){var i=new n.BaseTexture(t.data,null,n.utils.getResolutionOfUrl(t.url));i.imageUrl=t.url,t.texture=new n.Texture(i);var r=t.url;n.utils.useFilenamesForTextures&&(r=n.utils.getFilenameFromUrl(r)),n.utils.BaseTextureCache[r]=i,n.utils.TextureCache[r]=t.texture}e()}}},{"../core":30}],125:[function(t,e,i){function n(t,e,i,s,o){r.Container.call(this),this._texture=null,this.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),this.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=s||new Uint16Array([0,1,3,2]),this.dirty=!0,this.blendMode=r.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=o||n.DRAW_MODES.TRIANGLE_MESH,this.texture=t,this.shader=null}var r=t("../core"),s=new r.Point,o=new r.Polygon;n.prototype=Object.create(r.Container.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{texture:{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}}),n.prototype._renderWebGL=function(t){t.setObjectRenderer(t.plugins.mesh),t.plugins.mesh.render(this)},n.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform;t.roundPixels?e.setTransform(i.a,i.b,i.c,i.d,0|i.tx,0|i.ty):e.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.drawMode===n.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(e):this._renderCanvasTriangles(e)},n.prototype._renderCanvasTriangleMesh=function(t){for(var e=this.vertices,i=this.uvs,n=e.length/2,r=0;n-2>r;r++){var s=2*r;this._renderCanvasDrawTriangle(t,e,i,s,s+2,s+4)}},n.prototype._renderCanvasTriangles=function(t){for(var e=this.vertices,i=this.uvs,n=this.indices,r=n.length,s=0;r>s;s+=3){var o=2*n[s],a=2*n[s+1],h=2*n[s+2];this._renderCanvasDrawTriangle(t,e,i,o,a,h)}},n.prototype._renderCanvasDrawTriangle=function(t,e,i,n,r,s){var o=this._texture.baseTexture.source,a=this._texture.baseTexture.width,h=this._texture.baseTexture.height,l=e[n],u=e[r],c=e[s],d=e[n+1],p=e[r+1],f=e[s+1],g=i[n]*a,_=i[r]*a,v=i[s]*a,m=i[n+1]*h,y=i[r+1]*h,x=i[s+1]*h;if(this.canvasPadding>0){var b=this.canvasPadding/this.worldTransform.a,T=this.canvasPadding/this.worldTransform.d,E=(l+u+c)/3,S=(d+p+f)/3,w=l-E,A=d-S,P=Math.sqrt(w*w+A*A);l=E+w/P*(P+b),d=S+A/P*(P+T),A=p-S,u=E+(w=u-E)/(P=Math.sqrt(w*w+A*A))*(P+b),p=S+A/P*(P+T),A=f-S,c=E+(w=c-E)/(P=Math.sqrt(w*w+A*A))*(P+b),f=S+A/P*(P+T)}t.save(),t.beginPath(),t.moveTo(l,d),t.lineTo(u,p),t.lineTo(c,f),t.closePath(),t.clip();var C=g*y+m*v+_*x-y*v-m*_-g*x,L=l*y+m*c+u*x-y*c-m*u-l*x,R=g*u+l*v+_*c-u*v-l*_-g*c,O=g*y*c+m*u*v+l*_*x-l*y*v-m*_*c-g*u*x,M=d*y+m*f+p*x-y*f-m*p-d*x,I=g*p+d*v+_*f-p*v-d*_-g*f,D=g*y*f+m*p*v+d*_*x-d*y*v-m*_*f-g*p*x;t.transform(L/C,M/C,R/C,I/C,O/C,D/C),t.drawImage(o,0,0),t.restore()},n.prototype.renderMeshFlat=function(t){var e=this.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;n-2>r;r++){var s=2*r,o=i[s],a=i[s+2],h=i[s+4],l=i[s+1],u=i[s+3],c=i[s+5];e.moveTo(o,l),e.lineTo(a,u),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},n.prototype._onTextureUpdate=function(){this.updateFrame=!0},n.prototype.getBounds=function(t){if(!this._currentBounds){for(var e=t||this.worldTransform,i=e.a,n=e.b,s=e.c,o=e.d,a=e.tx,h=e.ty,l=-1/0,u=-1/0,c=1/0,d=1/0,p=this.vertices,f=0,g=p.length;g>f;f+=2){var _=p[f],v=p[f+1],m=i*_+s*v+a,y=o*v+n*_+h;c=c>m?m:c,d=d>y?y:d,l=m>l?m:l,u=y>u?y:u}if(c===-1/0||u===1/0)return r.Rectangle.EMPTY;var x=this._bounds;x.x=c,x.width=l-c,x.y=d,x.height=u-d,this._currentBounds=x}return this._currentBounds},n.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,s);var e,i,r=this.vertices,a=o.points;if(this.drawMode===n.DRAW_MODES.TRIANGLES){var h=this.indices;for(i=this.indices.length,e=0;i>e;e+=3){var l=2*h[e],u=2*h[e+1],c=2*h[e+2];if(a[0]=r[l],a[1]=r[l+1],a[2]=r[u],a[3]=r[u+1],a[4]=r[c],a[5]=r[c+1],o.contains(s.x,s.y))return!0}}else for(i=r.length,e=0;i>e;e+=6)if(a[0]=r[e],a[1]=r[e+1],a[2]=r[e+2],a[3]=r[e+3],a[4]=r[e+4],a[5]=r[e+5],o.contains(s.x,s.y))return!0;return!1},n.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":30}],126:[function(t,e,i){function n(t,e,i){r.call(this,t),this._ready=!0,this.segmentsX=e||10,this.segmentsY=i||10,this.drawMode=r.DRAW_MODES.TRIANGLES,this.refresh()}var r=t("./Mesh");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.refresh=function(){var t=this.segmentsX*this.segmentsY,e=[],i=[],n=[],r=this.texture,s=this.segmentsX-1,o=this.segmentsY-1,a=0,h=r.width/s,l=r.height/o;for(a=0;t>a;a++){var u=a%this.segmentsX,c=a/this.segmentsX|0;e.push(u*h,c*l),i.push(u/(this.segmentsX-1),c/(this.segmentsY-1))}var d=s*o;for(a=0;d>a;a++){var p=a%s,f=a/s|0,g=f*this.segmentsX+p,_=f*this.segmentsX+p+1,v=(f+1)*this.segmentsX+p,m=(f+1)*this.segmentsX+p+1;n.push(g,_,v),n.push(_,m,v)}this.vertices=new Float32Array(e),this.uvs=new Float32Array(i),this.colors=new Float32Array([]),this.indices=new Uint16Array(n)},n.prototype._onTextureUpdate=function(){r.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()}},{"./Mesh":125}],127:[function(t,e,i){function n(t,e){r.call(this,t),this.points=e,this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length),this._ready=!0,this.refresh()}var r=t("./Mesh"),s=t("../core");n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){var e=this.uvs,i=this.indices,n=this.colors,r=this._texture._uvs,o=new s.Point(r.x0,r.y0),a=new s.Point(r.x2-r.x0,r.y2-r.y0);e[0]=0+o.x,e[1]=0+o.y,e[2]=0+o.x,e[3]=1*a.y+o.y,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var h,l,u=t.length,c=1;u>c;c++)t[c],l=c/(u-1),e[h=4*c]=l*a.x+o.x,e[h+1]=0+o.y,e[h+2]=l*a.x+o.x,e[h+3]=1*a.y+o.y,n[h=2*c]=1,n[h+1]=1,i[h=2*c]=h,i[h+1]=h+1;this.dirty=!0}},n.prototype._onTextureUpdate=function(){r.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},n.prototype.updateTransform=function(){var t=this.points;if(!(t.length<1)){for(var e,i,n,r,s,o=t[0],a=0,h=0,l=this.vertices,u=t.length,c=0;u>c;c++)i=t[c],n=4*c,h=-((e=c<t.length-1?t[c+1]:i).x-o.x),a=e.y-o.y,10*(1-c/(u-1))>1&&1,a/=r=Math.sqrt(a*a+h*h),h/=r,a*=s=this._texture.height/2,h*=s,l[n]=i.x+a,l[n+1]=i.y+h,l[n+2]=i.x-a,l[n+3]=i.y-h,o=i;this.containerUpdateTransform()}}},{"../core":30,"./Mesh":125}],128:[function(t,e,i){e.exports={Mesh:t("./Mesh"),Plane:t("./Plane"),Rope:t("./Rope"),MeshRenderer:t("./webgl/MeshRenderer"),MeshShader:t("./webgl/MeshShader")}},{"./Mesh":125,"./Plane":126,"./Rope":127,"./webgl/MeshRenderer":129,"./webgl/MeshShader":130}],129:[function(t,e,i){function n(t){r.ObjectRenderer.call(this,t),this.indices=new Uint16Array(15e3);for(var e=0,i=0;15e3>e;e+=6,i+=4)this.indices[e+0]=i+0,this.indices[e+1]=i+1,this.indices[e+2]=i+2,this.indices[e+3]=i+0,this.indices[e+4]=i+2,this.indices[e+5]=i+3;this.currentShader=null}var r=t("../../core"),s=t("../Mesh");n.prototype=Object.create(r.ObjectRenderer.prototype),n.prototype.constructor=n,e.exports=n,r.WebGLRenderer.registerPlugin("mesh",n),n.prototype.onContextChange=function(){},n.prototype.render=function(t){t._vertexBuffer||this._initWebGL(t);var e=this.renderer,i=e.gl,n=t._texture.baseTexture,r=t.shader,o=t.drawMode===s.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;e.blendModeManager.setBlendMode(t.blendMode),r=r?r.shaders[i.id]||r.getShader(e):e.shaderManager.plugins.meshShader,this.renderer.shaderManager.setShader(r),r.uniforms.translationMatrix.value=t.worldTransform.toArray(!0),r.uniforms.projectionMatrix.value=e.currentRenderTarget.projectionMatrix.toArray(!0),r.uniforms.alpha.value=t.worldAlpha,r.syncUniforms(),t.dirty?(t.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,t.vertices,i.STATIC_DRAW),i.vertexAttribPointer(r.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.bufferData(i.ARRAY_BUFFER,t.uvs,i.STATIC_DRAW),i.vertexAttribPointer(r.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),n._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,n._glTextures[i.id]):this.renderer.updateTexture(n),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,t._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,t.vertices),i.vertexAttribPointer(r.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,t._uvBuffer),i.vertexAttribPointer(r.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),n._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,n._glTextures[i.id]):this.renderer.updateTexture(n),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t._indexBuffer),i.bufferSubData(i.ELEMENT_ARRAY_BUFFER,0,t.indices)),i.drawElements(o,t.indices.length,i.UNSIGNED_SHORT,0)},n.prototype._initWebGL=function(t){var e=this.renderer.gl;t._vertexBuffer=e.createBuffer(),t._indexBuffer=e.createBuffer(),t._uvBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,t.vertices,e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,t._uvBuffer),e.bufferData(e.ARRAY_BUFFER,t.uvs,e.STATIC_DRAW),t.colors&&(t._colorBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t._colorBuffer),e.bufferData(e.ARRAY_BUFFER,t.colors,e.STATIC_DRAW)),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.indices,e.STATIC_DRAW)},n.prototype.flush=function(){},n.prototype.start=function(){this.currentShader=null},n.prototype.destroy=function(){r.ObjectRenderer.prototype.destroy.call(this)}},{"../../core":30,"../Mesh":125}],130:[function(t,e,i){function n(t){r.Shader.call(this,t,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}var r=t("../../core");n.prototype=Object.create(r.Shader.prototype),n.prototype.constructor=n,e.exports=n,r.ShaderManager.registerPlugin("meshShader",n)},{"../../core":30}],131:[function(t,e,i){Math.sign||(Math.sign=function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1})},{}],132:[function(t,e,i){Object.assign||(Object.assign=t("object-assign"))},{"object-assign":11}],133:[function(t,e,i){t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign")},{"./Math.sign":131,"./Object.assign":132,"./requestAnimationFrame":134}],134:[function(t,e,i){(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r)t.requestAnimationFrame=t[n[r]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[r]+"CancelAnimationFrame"]||t[n[r]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return 0>n&&(n=0),i=e,setTimeout((function(){i=Date.now(),t(performance.now())}),n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[115])(115)})),
/*!
* @license TweenJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2013 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,(function(t){e.call(i,t,r),n&&t.remove()}),s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,o=r.length;o>s;s++)if(r[s]==e){1==o?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var i=this,n=[i];i.parent;)n.push(i=i.parent);var r,s=n.length;for(r=s-1;r>=0&&!t.propagationStopped;r--)n[r]._dispatchEvent(t,1+(0==r));for(r=1;s>r&&!t.propagationStopped;r++)n[r]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;i>s&&!t.immediatePropagationStopped;s++){var o=r[s];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{Object.defineProperties(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,n=t._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|t.getFPS());for(var r=0;e>r;r++)i+=n[r];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t.paused=e},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),n=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=n),t.hasEventListener("tick")){var r=new createjs.Event("tick"),s=t.maxDelta;r.delta=s&&n>s?s:n,r.paused=e,r.time=i,r.runTime=i-t._pausedTime,t.dispatchEvent(r)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(e&&e.call(performance)||(new Date).getTime())-t._startTime},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(e,i,n){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=n||{},this.target=e,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=e,this._useTicks=!1,this._inited=!1,i&&(this._useTicks=i.useTicks,this.ignoreGlobalPause=i.ignoreGlobalPause,this.loop=i.loop,i.onChange&&this.addEventListener("change",i.onChange),i.override&&t.removeTweens(e)),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,t.NONE)}var e=createjs.extend(t,createjs.EventDispatcher);t.NONE=0,t.LOOP=1,t.REVERSE=2,t.IGNORE={},t._tweens=[],t._plugins={},t.get=function(e,i,n,r){return r&&t.removeTweens(e),new t(e,i,n)},t.tick=function(e,i){for(var n=t._tweens.slice(),r=n.length-1;r>=0;r--){var s=n[r];i&&!s.ignoreGlobalPause||s._paused||s.tick(s._useTicks?1:e)}},t.handleEvent=function(t){"tick"==t.type&&this.tick(t.delta,t.paused)},t.removeTweens=function(e){if(e.tweenjs_count){for(var i=t._tweens,n=i.length-1;n>=0;n--){var r=i[n];r._target==e&&(r._paused=!0,i.splice(n,1))}e.tweenjs_count=0}},t.removeAllTweens=function(){for(var e=t._tweens,i=0,n=e.length;n>i;i++){var r=e[i];r._paused=!0,r.target&&(r.target.tweenjs_count=0)}e.length=0},t.hasActiveTweens=function(e){return e?e.tweenjs_count:t._tweens&&!!t._tweens.length},t.installPlugin=function(e,i){var n=e.priority;null==n&&(e.priority=n=0);for(var r=0,s=i.length,o=t._plugins;s>r;r++){var a=i[r];if(o[a]){for(var h=o[a],l=0,u=h.length;u>l&&!(n<h[l].priority);l++);o[a].splice(l,0,e)}else o[a]=[e]}},t._register=function(e,i){var n=e._target,r=t._tweens;if(i)n&&(n.tweenjs_count=n.tweenjs_count?n.tweenjs_count+1:1),r.push(e),!t._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",t),t._inited=!0);else{n&&n.tweenjs_count--;for(var s=r.length;s--;)if(r[s]==e)return void r.splice(s,1)}},e.reset=function(){var t;if(this._steps.length=0,this._actions.length=0,this._rawPosition=0,this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this.duration=0,this.position=null,this._curQueueProps)for(t in this._curQueueProps)delete this._curQueueProps[t];if(this._initQueueProps)for(t in this._initQueueProps)delete this._initQueueProps[t];return this},e.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,e:this._linearEase,p1:i,v:e})},e.to=function(t,e,i){return(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},e.call=function(t,e,i){return this._addAction({f:t,p:e||[this],o:i||this._target})},e.set=function(t,e){return this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,e||this._target]})},e.play=function(t){return t||(t=this),this.call(t.setPaused,[!1],t)},e.pause=function(t){return t||(t=this),this.call(t.setPaused,[!0],t)},e.setPosition=function(t,e){0>t&&(t=0),null==e&&(e=1);var i=t,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0,this.setPaused(!0))),i==this._prevPos)return n;var r=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(n)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var s=0,o=this._steps.length;o>s&&!(this._steps[s].t>i);s++);var a=this._steps[s-1];this._updateTargetProps(a,(this._stepPosition=i-a.t)/a.d)}return 0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&r>i?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,i,!0)):this._runActions(r,i)),this.dispatchEvent("change"),n},e.tick=function(t){this._paused||this.setPosition(this._prevPosition+t)},e.setPaused=function(e){return this._paused===!!e||(this._paused=!!e,t._register(this,!e)),this},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._updateTargetProps=function(e,i){var n,r,s,o,a,h;if(e||1!=i){if(this.passive=!!e.v,this.passive)return;e.e&&(i=e.e(i,0,1,1)),n=e.p0,r=e.p1}else this.passive=!1,n=r=this._curQueueProps;for(var l in this._initQueueProps){null==(o=n[l])&&(n[l]=o=this._initQueueProps[l]),null==(a=r[l])&&(r[l]=a=o),s=o==a||0==i||1==i||"number"!=typeof o?1==i?a:o:o+(a-o)*i;var u=!1;if(h=t._plugins[l])for(var c=0,d=h.length;d>c;c++){var p=h[c].tween(this,l,s,n,r,i,!!e&&n==r,!e);p==t.IGNORE?u=!0:s=p}u||(this._target[l]=s)}},e._runActions=function(t,e,i){var n=t,r=e,s=-1,o=this._actions.length,a=1;for(t>e&&(n=e,r=t,s=o,o=a=-1);(s+=a)!=o;){var h=this._actions[s],l=h.t;(l==r||l>n&&r>l||i&&l==t)&&h.f.apply(h.o,h.p)}},e._appendQueueProps=function(e){var i,n,r,s,o;for(var a in e)if(void 0===this._initQueueProps[a]){if(n=this._target[a],i=t._plugins[a])for(r=0,s=i.length;s>r;r++)n=i[r].init(this,a,n);this._initQueueProps[a]=this._curQueueProps[a]=void 0===n?null:n}else n=this._curQueueProps[a];for(var a in e){if(n=this._curQueueProps[a],i=t._plugins[a])for(o=o||{},r=0,s=i.length;s>r;r++)i[r].step&&i[r].step(this,a,n,e[a],o);this._curQueueProps[a]=e[a]}return o&&this._appendQueueProps(o),this._curQueueProps},e._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},e._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},e._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},e._set=function(t,e){for(var i in t)e[i]=t[i]},createjs.Tween=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,i&&(this._useTicks=i.useTicks,this.loop=i.loop,this.ignoreGlobalPause=i.ignoreGlobalPause,i.onChange&&this.addEventListener("change",i.onChange)),t&&this.addTween.apply(this,t),this.setLabels(e),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,createjs.Tween.NONE)}var e=createjs.extend(t,createjs.EventDispatcher);e.addTween=function(t){var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addTween(arguments[i]);return arguments[0]}return 0==e?null:(this.removeTween(t),this._tweens.push(t),t.setPaused(!0),t._paused=!1,t._useTicks=this._useTicks,t.duration>this.duration&&(this.duration=t.duration),this._prevPos>=0&&t.setPosition(this._prevPos,createjs.Tween.NONE),t)},e.removeTween=function(t){var e=arguments.length;if(e>1){for(var i=!0,n=0;e>n;n++)i=i&&this.removeTween(arguments[n]);return i}if(0==e)return!1;var r=this._tweens;for(n=r.length;n--;)if(r[n]==t)return r.splice(n,1),t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.addLabel=function(t,e){this._labels[t]=e;var i=this._labelList;if(i){for(var n=0,r=i.length;r>n&&!(e<i[n].position);n++);i.splice(n,0,{label:t,position:e})}},e.setLabels=function(t){this._labels=t||{}},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e=this._labels;for(var i in e)t.push({label:i,position:e[i]});t.sort((function(t,e){return t.position-e.position}))}return t},e.getCurrentLabel=function(){var t=this.getLabels(),e=this.position,i=t.length;if(i){for(var n=0;i>n&&!(e<t[n].position);n++);return 0==n?null:t[n-1].label}return null},e.gotoAndPlay=function(t){this.setPaused(!1),this._goto(t)},e.gotoAndStop=function(t){this.setPaused(!0),this._goto(t)},e.setPosition=function(t,e){0>t&&(t=0);var i=this.loop?t%this.duration:t,n=!this.loop&&t>=this.duration;if(i==this._prevPos)return n;this._prevPosition=t,this.position=this._prevPos=i;for(var r=0,s=this._tweens.length;s>r;r++)if(this._tweens[r].setPosition(i,e),i!=this._prevPos)return!1;return n&&this.setPaused(!0),this.dispatchEvent("change"),n},e.setPaused=function(t){this._paused=!!t,createjs.Tween._register(this,!t)},e.updateDuration=function(){this.duration=0;for(var t=0,e=this._tweens.length;e>t;t++){var i=this._tweens[t];i.duration>this.duration&&(this.duration=i.duration)}},e.tick=function(t){this.setPosition(this._prevPosition+t)},e.resolve=function(t){var e=Number(t);return isNaN(e)&&(e=this._labels[t]),e},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._goto=function(t){var e=this.resolve(t);null!=e&&this.setPosition(e)},createjs.Timeline=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ease cannot be instantiated."}t.linear=function(t){return t},t.none=t.linear,t.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.backIn=t.getBackIn(1.7),t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.backOut=t.getBackOut(1.7),t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},t.backInOut=t.getBackInOut(1.7),t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e)}},t.elasticIn=t.getElasticIn(1,.3),t.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-r)*i/e)+1}},t.elasticOut=t.getElasticOut(1,.3),t.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var r=e/i*Math.asin(1/t);return(n*=2)<1?-.5*t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e):t*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*i/e)*.5+1}},t.elasticInOut=t.getElasticInOut(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"MotionGuidePlugin cannot be instantiated."}t.priority=0,t._rotOffS,t._rotOffE,t._rotNormS,t._rotNormE,t.install=function(){return createjs.Tween.installPlugin(t,["guide","x","y","rotation"]),createjs.Tween.IGNORE},t.init=function(t,e,i){var n=t.target;return n.hasOwnProperty("x")||(n.x=0),n.hasOwnProperty("y")||(n.y=0),n.hasOwnProperty("rotation")||(n.rotation=0),"rotation"==e&&(t.__needsRot=!0),"guide"==e?null:i},t.step=function(e,i,n,r,s){if("rotation"==i&&(e.__rotGlobalS=n,e.__rotGlobalE=r,t.testRotData(e,s)),"guide"!=i)return r;var o,a=r;a.hasOwnProperty("path")||(a.path=[]);var h=a.path;if(a.hasOwnProperty("end")||(a.end=1),a.hasOwnProperty("start")||(a.start=n&&n.hasOwnProperty("end")&&n.path===h?n.end:0),a.hasOwnProperty("_segments")&&a._length)return r;var l=h.length;if(!(l>=6&&(l-2)%4==0))throw"invalid 'path' data, please see documentation for valid paths";a._segments=[],a._length=0;for(var u=2;l>u;u+=4){for(var c,d,p=h[u-2],f=h[u-1],g=h[u+0],_=h[u+1],v=h[u+2],m=h[u+3],y=p,x=f,b=0,T=[],E=1;10>=E;E++){var S=E/10,w=1-S;c=w*w*p+2*w*S*g+S*S*v,d=w*w*f+2*w*S*_+S*S*m,b+=T[T.push(Math.sqrt((o=c-y)*o+(o=d-x)*o))-1],y=c,x=d}a._segments.push(b),a._segments.push(T),a._length+=b}o=a.orient,a.orient=!0;var A={};return t.calc(a,a.start,A),e.__rotPathS=Number(A.rotation.toFixed(5)),t.calc(a,a.end,A),e.__rotPathE=Number(A.rotation.toFixed(5)),a.orient=!1,t.calc(a,a.end,s),a.orient=o,a.orient?(e.__guideData=a,t.testRotData(e,s),r):r},t.testRotData=function(t,e){if(void 0===t.__rotGlobalS||void 0===t.__rotGlobalE){if(t.__needsRot)return;t.__rotGlobalS=t.__rotGlobalE=void 0!==t._curQueueProps.rotation?t._curQueueProps.rotation:e.rotation=t.target.rotation||0}if(void 0!==t.__guideData){var i=t.__guideData,n=t.__rotGlobalE-t.__rotGlobalS,r=t.__rotPathE-t.__rotPathS,s=n-r;if("auto"==i.orient)s>180?s-=360:-180>s&&(s+=360);else if("cw"==i.orient){for(;0>s;)s+=360;0==s&&n>0&&180!=n&&(s+=360)}else if("ccw"==i.orient){for(s=n-(r>180?360-r:r);s>0;)s-=360;0==s&&0>n&&-180!=n&&(s-=360)}i.rotDelta=s,i.rotOffS=t.__rotGlobalS-t.__rotPathS,t.__rotGlobalS=t.__rotGlobalE=t.__guideData=t.__needsRot=void 0}},t.tween=function(e,i,n,r,s,o,a){var h=s.guide;if(null==h||h===r.guide)return n;if(h.lastRatio!=o){var l=(h.end-h.start)*(a?h.end:o)+h.start;switch(t.calc(h,l,e.target),h.orient){case"cw":case"ccw":case"auto":e.target.rotation+=h.rotOffS+h.rotDelta*o;break;case"fixed":default:e.target.rotation+=h.rotOffS}h.lastRatio=o}return"rotation"!=i||h.orient&&"false"!=h.orient?e.target[i]:n},t.calc=function(e,i,n){null==e._segments&&t.validate(e),null==n&&(n={x:0,y:0,rotation:0});for(var r=e._segments,s=e.path,o=e._length*i,a=r.length-2,h=0;o>r[h]&&a>h;)o-=r[h],h+=2;var l=r[h+1],u=0;for(a=l.length-1;o>l[u]&&a>u;)o-=l[u],u++;var c=u/++a+o/(a*l[u]);h=2*h+2;var d=1-c;return n.x=d*d*s[h-2]+2*d*c*s[h+0]+c*c*s[h+2],n.y=d*d*s[h-1]+2*d*c*s[h+1]+c*c*s[h+3],e.orient&&(n.rotation=57.2957795*Math.atan2((s[h+1]-s[h-1])*d+(s[h+3]-s[h+1])*c,(s[h+0]-s[h-2])*d+(s[h+2]-s[h+0])*c)),n},createjs.MotionGuidePlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.TweenJS=createjs.TweenJS||{};t.version="0.6.0",t.buildDate="Mon, 26 Jan 2015 19:15:57 GMT"}(),function(){"use strict";var t,e,i,n;"extend"in(n=window)||(n.extend=function(t,e){if(e){"string"==typeof e&&(e=n.include(e));var i=e.prototype;t.prototype=Object.create(i),Object.defineProperty(t.prototype,"__parent",{configurable:!0,writable:!0,value:i})}return Object.defineProperty(t.prototype,"constructor",{configurable:!0,writable:!0,value:t}),t.extend=function(e){return n.extend(e,t)},t.prototype}),function(t,e){if(!("include"in t)){t.include=function(e,i){var n=e.split("."),r=t,s="";i=void 0===i||!!i;for(var o=0,a=n.length;o<a;o++){if(!r[s=n[o]]){if(!i)return null;throw"Unable to include '"+e+"'"}r=r[s]}return r}}}(window),function(t,e){if(!("mixin"in t)){t.mixin=function(i,n){if("string"==typeof n&&(n=t.include(n)),!n.prototype)throw"no mixin prototype";var r=n.prototype;for(var s in r){var o=e.getOwnPropertyDescriptor(r,s);o?e.defineProperty(i,s,o):i[s]=r[s]}return n.apply(i,Array.prototype.slice.call(arguments,2)),i}}}(window,Object),function(t){if(!("namespace"in t)){t.namespace=function(e){for(var i=e.split("."),n=t,r="",s=0,o=i.length;s<o;s++)n[r=i[s]]=n[r]||{},n=n[r];return n}}}(window),function(t,e,i){t.prototype.shuffle||i.defineProperty(t.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var t,i,n=this.length;n;t=e.floor(e.random()*n),i=this[--n],this[n]=this[t],this[t]=i);return this}}),t.prototype.random||i.defineProperty(t.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[e.floor(e.random()*this.length)]}}),t.prototype.last||i.defineProperty(t.prototype,"last",{enumerable:!1,writable:!1,value:function(){return this[this.length-1]}}),t.prototype.append||i.defineProperty(t.prototype,"append",{enumerable:!1,writable:!1,value:function(){for(var e=arguments,i=0,n=e.length;i<n;++i){var r=e[i];if(t.isArray(r))for(var s=0,o=r.length;s<o;++s)this.push(r[s]);else this.push(r)}return this}})}(Array,Math,Object),function(t){t.randomInt=function(e,i){return void 0===i&&(i=e,e=0),t.floor(t.random()*(i-e+1))+e},t.randomFloat=function(e,i){return void 0===i&&(i=e,e=0),t.random()*(i-e)+e},t.dist=function(e,i,n,r){return t.sqrt(t.distSq(e,i,n,r))},t.distSq=function(t,e,i,n){return"number"==typeof t.x&&t.x==t.x&&(n=i,i=e,e=t.y,t=t.x),"number"==typeof i.x&&i.x==i.x&&(n=i.y,i=i.x),(t-i)*(t-i)+(e-n)*(e-n)},t.clamp=function(t,e,i){return void 0===i&&(i=e,e=0),t>i?i:t<e?e:t},t.roundDecimal=function(e,i){return t.round(e/i)*i}}(Math),function(t,e){t.prototype.toPaddedString||e.defineProperty(t.prototype,"toPaddedString",{enumerable:!1,writable:!1,value:function(t){t||(t=2);var e,i=this;i<0&&(i*=-1,e="-");for(var n=String(Math.floor(i));n.length<t;)n="0"+n;return e&&(n=e+n),n}})}(Number,Object),function(t,e,i){t.merge=function(e,i){for(var n in e&&"object"==typeof e||(e={}),i)if(i.hasOwnProperty(n)){var r=i[n];if("object"==typeof r&&t.isPlain(r)){e[n]=t.merge(e[n],r);continue}e[n]=r}for(var s=2,o=arguments.length;s<o;s++)t.merge(e,arguments[s]);return e},t.isPlain=function(t){var i,n=e.hasOwnProperty;if(!t||"object"!=typeof t||t.nodeType||t===window)return!1;try{if(t.constructor&&!n.call(t,"constructor")&&!n.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(e.ownLast)for(i in t)return n.call(t,i);for(i in t);return void 0===i||n.call(t,i)},t.prototype.clone||t.defineProperty(t.prototype,"clone",{enumerable:!1,writable:!0,value:function(){var t={};for(var e in this)t[e]=this[e];return t}})}(Object,{}),function(){var t=include("createjs.RequestUtils",!1),e=include("createjs.AbstractLoader",!1);if(t){var i=t.getTypeByExtension;t.getTypeByExtension=function(t){if(t)switch(t.toLowerCase()){case"fnt":return e.XML}return i(t)}}}(),function(t,e){e.defineProperty(t.prototype,"format",{enumerable:!1,writable:!1,value:function(){if(arguments.length<1)return this;var t=Array.isArray(t)?t:Array.prototype.slice.call(arguments);return this.replace(/([^%]|^)%(?:(\d+)\$)?s/g,(function(e,i,n){return n?i+t[parseInt(n)-1]:i+t.shift()})).replace(/%%s/g,"%s")}}),t.prototype.reverse||e.defineProperty(t.prototype,"reverse",{enumerable:!1,writable:!1,value:function(){for(var t="",e=this.length-1;e>=0;e--)t+=this[e];return t}})}(String,Object),function(){function t(){this.currentCallCount=0}var e={create:function(e,i){if(!e)return null;("number"!=typeof i||i<1)&&(i=2);var n=function(){++n.currentCallCount>=i&&e()};return n.currentCallCount=0,n.reset=t,n}};namespace("springroll").CombinedCallback=e}(),e=function(e,i,n,r,s){t||(t=include("springroll.Application")),"boolean"==typeof n&&(n={repeat:!!n,autoDestroy:void 0===r||!!r,useFrames:!!s}),n=Object.merge({repeat:!1,autoDestroy:!0,useFrames:!1},n||{}),this._callback=e,this._delay=i,this._timer=i,this._repeat=n.repeat,this._autoDestroy=n.autoDestroy,this._useFrames=n.useFrames,this._paused=!1,this._update=this._update.bind(this),t.instance.on("update",this._update)},(i=extend(e))._update=function(e){this._callback?(this._timer-=this._useFrames?1:e,this._timer<=0&&(this._callback(this),this._repeat?this._timer+=this._delay:this._autoDestroy?this.destroy():t.instance.off("update",this._update))):this.destroy()},i.restart=function(){if(this._callback){var e=t.instance;e.has("update",this._update)||e.on("update",this._update),this._timer=this._delay,this._paused=!1}},i.stop=function(){t.instance.off("update",this._update),this._paused=!1},Object.defineProperty(i,"paused",{get:function(){return this._paused},set:function(e){if(this._callback){var i=t.instance;this._paused&&!e?(this._paused=!1,i.has("update",this._update)||i.on("update",this._update)):e&&i.has("update",this._update)&&(this._paused=!0,i.off("update",this._update))}}}),i.destroy=function(){t.instance.off("update",this._update),this._callback=null},namespace("springroll").DelayedCall=e,function(){var t,e=function(e,i,n){void 0===t&&(t=include("springroll.Debug",!1)),this.name=e,this._value=i,this._toString=n||this.name};Object.defineProperty(e.prototype,"asInt",{get:function(){return this._value}}),e.prototype.toString=function(){return this._toString};var i=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);Object.defineProperty(this,"_byValue",{enumerable:!1,writable:!1,value:[]}),Object.defineProperty(this,"rawEnumValues",{enumerable:!1,writable:!1,value:t});for(var i,n,r,s=0,o=0,a=t.length;o<a;++o)"string"==typeof t[o]?r=t[o]:(r=t[o].name,n=t[o].value||s,s=n),this[r]||(this[(i="string"==typeof t[o]?new e(r,s,r):new e(r,n,t[o].toString||r)).name]=i,this._byValue[s]?Array.isArray(this._byValue[s])?this._byValue[s].push(i):this._byValue[s]=[this._byValue[s],i]:this._byValue[s]=i,s++);Object.defineProperty(this,"length",{enumerable:!1,writable:!1,value:t.length}),Object.defineProperty(this,"next",{enumerable:!1,writable:!1,value:function(t){var e=t.asInt+1;return e>=s?this.first:this.valueFromInt(e)}}),Object.defineProperty(this,"first",{enumerable:!1,writable:!1,value:this.valueFromInt(t[0].value||0)}),Object.defineProperty(this,"last",{enumerable:!1,writable:!1,value:this.valueFromInt(s-1)})},n=extend(i);Object.defineProperty(n,"valueFromInt",{enumerable:!1,writable:!1,value:function(t){var e=this._byValue[t];return e?Array.isArray(e)?e[0]:e:null}}),namespace("springroll").Enum=i}(),function(t){var e={},i=void 0!==window.Storage;if(i)try{localStorage.setItem("LS_TEST","test"),localStorage.removeItem("LS_TEST")}catch(t){i=!1}e.remove=function(t){i?(localStorage.removeItem(t),sessionStorage.removeItem(t)):e.write(t,"",-1)},e.write=function(t,e,n){var r;i?n?sessionStorage.setItem(t,JSON.stringify(e)):localStorage.setItem(t,JSON.stringify(e)):(r=n?-1!==n?"":"; expires=Thu, 01 Jan 1970 00:00:00 GMT":"; expires="+new Date(2147483646e3).toGMTString(),document.cookie=t+"="+escape(JSON.stringify(e))+r+"; path=/")},e.read=function(t){if(i){var n=localStorage.getItem(t)||sessionStorage.getItem(t);return n?JSON.parse(n,e.reviver):null}var r,s,o=t+"=",a=document.cookie.split(";"),h=0;for(h=0,s=a.length;h<s;h++){for(r=a[h];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(o))return JSON.parse(unescape(r.substring(o.length,r.length)),e.reviver)}return null},e.reviver=function(t,e){if(e&&"string"==typeof e.__classname){var i=include(e.__classname,!1);if(i){var n=new i;if(n.fromJSON)return n.fromJSON(e),n}}return e},namespace("springroll").SavedData=e}(),function(t){var e=include("performance",!1),i=e&&(e.now||e.mozNow||e.msNow||e.oNow||e.webkitNow);i&&(e.now=i);var n={};n.now=i?function(){return e.now()}:Date.now,namespace("springroll").TimeUtils=n}(window),function(){var t=function(t){this.max=-1,this.options=[];var e=0;for(var i in t)e+=t[i],this.options.push({key:i,value:e}),this.max+=t[i]};extend(t).random=function(){for(var t=Math.randomInt(0,this.max),e=0,i=this.options,n=i.length;e<n;++e)if(t<i[e].value)return i[e].key;return null},namespace("springroll").WeightedRandom=t}(),function(){for(var t=["ms","moz","webkit","o"],e=t.length,i=0;i<e&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame){var n=include("springroll.TimeUtils"),r=0;window.requestAnimationFrame=function(t){var e=n.now(),i=Math.max(0,16-(e-r)),s=window.setTimeout((function(){t(e+i)}),i);return r=e+i,s},window.cancelAnimationFrame=function(t){clearTimeout(t)}}window.requestAnimFrame=window.requestAnimationFrame}(),function(t){function e(t,e){return t._priority-e._priority}function i(t){if(null===t)return"null";var e=typeof t;return"object"===e||"function"===e?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":e}var n=function(){this._listeners={},this._destroyed=!1},r=extend(n);Object.defineProperty(r,"destroyed",{enumerable:!0,get:function(){return this._destroyed}}),r.trigger=function(e){if(!this._destroyed&&this._listeners.hasOwnProperty(e)&&this._listeners[e]!==t){var i,n=this._listeners[e].slice();arguments.length>1&&(i=Array.prototype.slice.call(arguments,1));for(var r=n.length-1;r>=0;--r){var s=n[r];s._eventDispatcherOnce&&(delete s._eventDispatcherOnce,this.off(e,s)),s.apply(this,i)}}},r.once=function(t,e,i){return this.on(t,e,i,!0)},r.on=function(t,n,r,s){if(!this._destroyed){if("object"===i(t))for(var o in t)t.hasOwnProperty(o)&&this.on(o,t[o],r,s);else if("function"===i(n))for(var a,h=t.split(" "),l=null,u=0,c=h.length;u<c;u++)l=h[u],a=this._listeners.hasOwnProperty(l)?this._listeners[l]:this._listeners[l]=[],s&&(n._eventDispatcherOnce=!0),n._priority=parseInt(r)||0,-1===a.indexOf(n)&&(a.push(n),a.length>1&&a.sort(e));else if(Array.isArray(n))for(var d=0,p=n.length;d<p;d++)this.on(t,n[d],r,s);return this}},r.off=function(e,i){if(!this._destroyed){if(e===t)this._listeners={};else if(Array.isArray(i))for(var n=0,r=i.length;n<r;n++)this.off(e,i[n]);else for(var s,o,a=e.split(" "),h=null,l=0,u=a.length;l<u;l++)h=a[l],this._listeners.hasOwnProperty(h)&&(s=this._listeners[h],i===t?s.length=0:-1!==(o=s.indexOf(i))&&s.splice(o,1));return this}},r.has=function(t,e){if(!t||!this._listeners.hasOwnProperty(t))return!1;var i=this._listeners[t];return!!i&&(e?i.indexOf(e)>=0:i.length>0)},r.destroy=function(){this._destroyed=!0,this._listeners=null},namespace("springroll").EventDispatcher=n}(),function(t){var e=include("springroll.EventDispatcher"),i=function(){e.call(this),this._properties={}},n=e.prototype,r=e.extend(i),s=function(t,e){var i=this._properties[t];if(i.readOnly)throw"Property '"+t+"' is read-only";var n=i.value;i.value=e,n!=e&&this.trigger(t,e)},o=function(t){var e=this._properties[t];if(e.responder){var i=e.responder();return e.value=i,i}return e.value};r.add=function(e,i,n){var r=this._properties,h=r[e];if(h!==t)return h.setValue(i),h.setReadOnly(n===t?h.readOnly:n),this;if(this.hasOwnProperty(e))throw"Object already has property "+e;return r[e]=new a(e,i,n),Object.defineProperty(this,e,{get:o.bind(this,e),set:s.bind(this,e)}),this},r.respond=function(e,i){var n=this._properties[e];if(n===t)throw"Property "+e+" does not exist";return n.responder=i,n.value=i(),this},r.destroy=function(){var t;for(var e in this._properties)(t=this._properties[e]).value=null,t.responder=null;this._properties=null,n.destroy.call(this)};var a=function(t,e,i){this.name=t,this.setValue(e),this.setReadOnly(i),this.responder=null};a.prototype.setValue=function(e){this.value=e===t?null:e},a.prototype.setReadOnly=function(e){this.readOnly=e!==t&&!!e},namespace("springroll").PropertyDispatcher=i}(),function(t){var e,i=include("springroll.PropertyDispatcher"),n=function(n,r){e===t&&(e=include("springroll.Debug",!1)),i.call(this),this._options=r||{},this._app=n},r=i.extend(n);r.init=function(){var t=this._options;for(var e in this._app,(t=Object.merge({},t)).useQueryString&&Object.merge(t,s()),t)this.add(e,t[e]);var i=this._properties;for(var n in i)this.trigger(n,i[n].value)};var s=function(){var e={},i=window.location.search;if(!i)return e;for(var n,r=i.substr(i.indexOf("?")+1),s=r.indexOf("#"),o=(r=s<0?r:r.substring(0,s)).split("&"),a=0,h=o.length;a<h;a++){var l=(n=o[a].split("="))[1];"true"===l||l===t?l=!0:"false"===l&&(l=!1),e[n[0]]=l}return e};r.asDOMElement=function(t){var e=this._properties[t];e&&e.value&&"string"==typeof e.value&&(e.value=document.getElementById(e.value))},r.override=function(e,i){var n=this._properties[e];if(n===t)throw"Invalid override "+e;return n.setValue(i),this},namespace("springroll").ApplicationOptions=n}(),function(){var t;namespace("springroll").ApplicationPlugin=function(e){t||(t=include("springroll.Application")),this.priority=e||0,this.setup=function(){},this.preload=null,this.teardown=function(){},t._plugins.push(this),t._plugins.sort((function(t,e){return e.priority-t.priority}))}}(),function(t){var e=include("springroll.TimeUtils"),i=include("springroll.EventDispatcher"),n=include("springroll.ApplicationOptions"),r=include("springroll.DelayedCall"),s=function(t,e){if(v)throw"Only one Application can be opened at a time";v=this,i.call(this),this.options=new n(this,t),this.display=null,this.init=e||null,this.pluginLoad=null,_={},g=[],l=this._tick.bind(this),s._plugins.forEach((function(t){t.setup.call(v)})),this.options.init(),this.name=this.options.name,setTimeout(this._preInit.bind(this),0)};s.version="1.1.1";var o=i.prototype,a=i.extend(s);s._plugins=[];var h=0,l=null,u=!1,c=!0,d=-1,p=!1,f=0,g=null,_=null,v=null;Object.defineProperty(s,"instance",{get:function(){return v}}),a._preInit=function(){if(!this.destroyed){var t=this.options;p=t.raf,t.on("raf",(function(t){p=t})),t.on("fps",(function(t){"number"==typeof t&&(f=1e3/t|0)})),t.canvasId&&t.display&&this.addDisplay(t.canvasId,t.display,t.displayOptions);var e=[];s._plugins.forEach((function(t){t.preload&&e.push(t.preload.bind(v))})),this.pluginLoad=this.load(e,{complete:this._doInit.bind(this),progress:m.bind(this),autoStart:!1,startAll:!1}),this.pluginLoad.start()}};var m=function(t){this.trigger("pluginProgress",t)};a._doInit=function(){this.destroyed||(this.pluginLoad=null,this.trigger("beforeInit"),this.paused=!1,this.trigger("init"),this.init&&this.init.call(this),this.trigger("afterInit"))},Object.defineProperty(a,"enabled",{set:function(t){c=t,g.forEach((function(e){e.enabled=t}))},get:function(){return c}}),Object.defineProperty(a,"paused",{get:function(){return u},set:function(t){u=!!t,this.internalPaused(u)}}),a.internalPaused=function(t){this.trigger("pause",t),this.trigger(t?"paused":"resumed",t),t?-1!=d&&(p?cancelAnimationFrame(d):clearTimeout(d),d=-1):-1==d&&l&&(h=e.now(),d=p?requestAnimFrame(l):y(l))};var y=function(t,e){var i=f;return e&&(i=Math.max(0,f-e)),setTimeout(t,i)};a.addDisplay=function(t,e,i){if(_[t])throw"Display exists with id '"+t+"'";var n=new e(t,i);return _[t]=n,g.push(n),n.enabled=c,this.display||(this.display=n),this.trigger("displayAdded",n),n},Object.defineProperty(a,"displays",{get:function(){return g}}),a.getDisplay=function(t){return _[t]},a.removeDisplay=function(t){var e=_[t];e&&(g.splice(g.indexOf(e),1),e.destroy(),delete _[t],this.trigger("displayRemoved",t))},a._tick=function(){if(u)d=-1;else{var t=e.now(),i=t-h;if(h=t,this.trigger("update",i),g)for(var n=0;n<g.length;n++)g[n].render(i);l&&(d=p?requestAnimFrame(l):y(l,e.now()-h))}},a.setTimeout=function(t,e,i,n){return new r(t,e,!1,n,i)},a.setInterval=function(t,e,i){return new r(t,e,!0,!1,i)},a.destroy=function(){this.destroyed||(this.paused=!0,this.trigger("destroy"),s._plugins.slice().reverse().forEach((function(t){t.teardown.call(v)})),g.forEach((function(t){t.destroy()})),g=null,_=null,v=l=null,this.display=null,this.options.destroy(),this.options=null,o.destroy.call(this))},a.toString=function(){return"[Application name='"+this.name+"']"},namespace("springroll").Application=s}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("createjs.Tween",!1),i=include("createjs.Ticker",!1);new t(120).setup=function(){var t=this.options;t.add("raf",!0,!0),t.add("fps",60,!0),t.add("useQueryString",!1,!0),t.add("canvasId",null,!0),t.add("display",null,!0),t.add("displayOptions",null,!0);var n=this;t.add("updateTween",!0,!0).on("updateTween",(function(t){e&&(i&&i.setPaused(!!t),n.off("update",e.tick),t&&n.on("update",e.tick))})),t.add("name","",!0)}}(),function(t,e,i){var n=function(t,n){this._onFocus=t,this._onBlur=n,this._enabled=!1,(s||e.onfocusin!==i)&&(this._onToggle=function(){e.hidden||e.webkitHidden||e.msHidden||e.mozHidden?this._onBlur():this._onFocus()}.bind(this),this.enabled=!0)},r=extend(n),s=null;e.hidden!==i?s="visibilitychange":e.mozHidden!==i?s="mozvisibilitychange":e.msHidden!==i?s="msvisibilitychange":e.webkitHidden!==i&&(s="webkitvisibilitychange");var o=!s&&e.onfocusin!==i;Object.defineProperty(r,"enabled",{get:function(){return this._enabled},set:function(i){i=!!i,this._enabled!=i&&(this._enabled=i,t.removeEventListener("pagehide",this._onBlur),t.removeEventListener("pageshow",this._onFocus),t.removeEventListener("blur",this._onBlur),t.removeEventListener("focus",this._onFocus),t.removeEventListener("visibilitychange",this._onToggle),e.removeEventListener(s,this._onToggle,!1),o&&(e.removeEventListener("focusin",this._onFocus),e.removeEventListener("focusout",this._onBlur)),i&&(e.addEventListener(s,this._onToggle,!1),t.addEventListener("pagehide",this._onBlur),t.addEventListener("pageshow",this._onFocus),t.addEventListener("blur",this._onBlur),t.addEventListener("focus",this._onFocus),t.addEventListener("visibilitychange",this._onToggle,!1),o&&(e.addEventListener("focusin",this._onFocus),e.addEventListener("focusout",this._onBlur))))}}),r.destroy=function(){s&&this._onToggle&&(this.enabled=!1,this._onToggle=null,this._onFocus=null,this._onBlur=null)},namespace("springroll").PageVisibility=n}(window,document),function(){var t=new(include("springroll.ApplicationPlugin"));t.setup=function(){var t=include("springroll.PageVisibility"),n=this._visibility=new t(i.bind(this),e.bind(this));this.options.add("autoPause",!0).on("autoPause",(function(t){n.enabled=t})).respond("autoPause",(function(){return n.enabled})),Object.defineProperty(this,"autoPaused",{set:function(t){this.paused||this.internalPaused(t)}})};var e=function(){this.autoPaused=!0},i=function(){this.autoPaused=!1};t.teardown=function(){this._visibility&&this._visibility.destroy(),this._visibility=null}}(),function(){var t=function(){this._filters=[]},e=extend(t);e.add=function(t,e){if(!t||"string"!=typeof t&&t instanceof RegExp==0)throw"invalide replace value";if("string"!=typeof e)throw"invalid replacement value";if(this._filters){for(var i=this._filters.length-1;i>=0;i--)if(t.toString()==this._filters[i].replace.toString())throw"Filter already exists.";this._filters.push({replace:t,replacement:e})}},e.filter=function(t){if(!this._filters)return t;for(var e=this._filters.length-1;e>=0;e--){var i=this._filters[e].replace,n=this._filters[e].replacement;t=t.replace(i,n)}return t},e.destroy=function(){this._filters=null},namespace("springroll").StringFilters=t}(),function(){var t=new(include("springroll.ApplicationPlugin"))(110);t.setup=function(){var t=include("springroll.StringFilters");this.filters=new t},t.teardown=function(){this.filters&&this.filters.destroy(),this.filters=null}}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("devicePixelRatio",!1),i=new t(100),n=null,r=0,s=0,o=0,a=0,h={width:0,height:0,normalWidth:0,normalHeight:0},l=null;i.setup=function(){var t=this.options;t.add("maxWidth",0),t.add("maxHeight",0),t.add("uniformResize",!0),t.add("responsive",!1,!0),t.add("resizeElement","frame",!0),t.add("enableHiDPI",!1),t.on("maxWidth",(function(t){r=t})),t.on("maxHeight",(function(t){s=t})),this.once("displayAdded",(function(t){o=t.width,a=t.height,r||(r=o),s||(s=a)})),this.realWidth=0,this.realHeight=0,this.triggerResize=function(){if(n){h.width=0|(n.innerWidth||n.clientWidth),h.height=0|(n.innerHeight||n.clientHeight),this.calculateDisplaySize(h);var t=this.realWidth=h.width,i=this.realHeight=h.height,r=h.normalWidth,s=h.normalHeight,o=this.options.responsive,a=this.options.enableHiDPI;this.displays.forEach((function(n){o?(a&&e&&(n.canvas.style.width=t+"px",n.canvas.style.height=i+"px",t*=e,i*=e),n.resize(t,i)):(n.canvas.style.width=t+"px",n.canvas.style.height=i+"px",a&&e&&(r*=e,s*=e),n.resize(r,s))})),this.trigger("resize",o?t:r,o?i:s),this.displays.forEach((function(t){t.render(0,!0)}))}},this.onWindowResize=function(){this.triggerResize(),l=this.setTimeout(function(){this.triggerResize(),l=null}.bind(this),500)},this.calculateDisplaySize=function(t){if(a&&this.options.uniformResize){var e=r/a,i=o/s,n=o/a,h=t.width/t.height;h<i?t.height=t.width/i:h>e&&(t.width=t.height*e),h=t.width/t.height,t.normalWidth=o,t.normalHeight=a,h>n?t.normalWidth=a*h:h<n&&(t.normalHeight=o/h),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t.normalWidth=Math.ceil(t.normalWidth),t.normalHeight=Math.ceil(t.normalHeight)}},this.once("beforeInit",this.triggerResize)},i.preload=function(t){var e=this.options;e.asDOMElement("resizeElement"),e.resizeElement&&(n=e.resizeElement,this.onWindowResize=this.onWindowResize.bind(this),window.addEventListener("resize",this.onWindowResize)),t()},i.teardown=function(){l&&(l.destroy(),l=null),n&&window.removeEventListener("resize",this.onWindowResize),n=null,h.width=h.height=h.normalWidth=h.normalHeight=o=a=s=r=0}}(),function(t){var e=function(t){this._app=t,this._versions={},this._filters=[],this._globalVersion=null,this._applySpecificVersion=this._applySpecificVersion.bind(this),this._applyGlobalVersion=this._applyGlobalVersion.bind(this),this.cacheBust=!1},i=extend(e);Object.defineProperty(i,"cacheBust",{get:function(){return!(!this._globalVersion||0!==this._globalVersion.indexOf("cb="))},set:function(t){if(t)this._globalVersion="cb="+Date.now(),this.unregisterURLFilter(this._applySpecificVersion),this.registerURLFilter(this._applyGlobalVersion);else{var e=this._app.options.version;this._globalVersion=e?"v="+e:null,this._globalVersion?(this.unregisterURLFilter(this._applySpecificVersion),this.registerURLFilter(this._applyGlobalVersion)):(this.unregisterURLFilter(this._applyGlobalVersion),this.registerURLFilter(this._applySpecificVersion))}}}),i.destroy=function(){this._app=null,this._versions=null,this._filters=null,this._applySpecificVersion=null,this._applyGlobalVersion=null},i.addVersionsFile=function(t,e,i){if(this.cacheBust)e&&e();else{this.addVersion(t,Date.now().toString()),t=this._applySpecificVersion(t);var n=this;this._app.load(t,(function(t){if(t){var r,s,o=t.replace(/\r/g,"").split("\n");for(r=0,len=o.length;r<len;r++)o[r]&&(2==(s=o[r].split(" ")).length&&n.addVersion((i||"")+s[0],s[1]))}e&&e()}))}},i.addVersion=function(t,e){this._versions[t]||(this._versions[t]=e)},i.registerURLFilter=function(t){-1==this._filters.indexOf(t)&&this._filters.push(t)},i.unregisterURLFilter=function(t){var e=this._filters.indexOf(t);e>-1&&this._filters.splice(e,1)},i._applySpecificVersion=function(t){var e=this._app.options.basePath;if(e&&e.indexOf("?")>0)return t;var i=this._versions[t];return i&&!1===/(\?|\&)v\=[0-9]*/.test(t)&&(t=t+(t.indexOf("?")<0?"?":"&")+"v="+i.version),t},i._applyGlobalVersion=function(t){if(!this._globalVersion)return t;var e=this._app.options.basePath;return e&&e.indexOf("?")>0||!1===(0===this._globalVersion.indexOf("cb=")?/(\?|\&)cb\=[0-9]*/:/(\?|\&)v\=/).test(t)&&(t=t+(t.indexOf("?")<0?"?":"&")+this._globalVersion),t},i._applyBasePath=function(t){var e=this._app.options.basePath;return e&&!1===/^http(s)?\:/.test(t)&&-1==t.search(e)&&(t=e+t),t},i.prepare=function(t,e){e&&(t=this._applyBasePath(t));for(var i=0,n=this._filters.length;i<n;++i)t=this._filters[i](t);return t},namespace("springroll").CacheManager=e}(),function(){var t,e=include("springroll.Application"),i=function(e,n){if(void 0===t&&(t=include("springroll.Debug",!1)),this.status=i.WAITING,this.complete=e.complete||null,this.cache=!!e.cache,this.id=e.id||null,this.type=e.type||null,this.original=e,this.cache&&!this.id){if(n&&"string"==typeof n){var r=n.lastIndexOf(".");r>-1&&(n=n.substr(0,r));var s=n.lastIndexOf("/");s>-1&&(n=n.substr(s+1)),e.id=this.id=n}this.id||(this.cache=!1)}},n=extend(i);i.WAITING=0,i.RUNNING=1,i.FINISHED=2,n.start=function(t){t()},n.filter=function(t){var i=e.instance.assetManager.sizes;if(t&&i.test(t)){var n=i.size(this.original.sizes);t=i.filter(t,n),this.original.scale=n.scale}return t},n.load=function(t,i){return e.instance.load(t,i)},n.simpleLoad=function(t,i,n,r){return e.instance.loader.load(t,i,n,r)},n.destroy=function(){this.status=i.FINISHED,this.id=null,this.type=null,this.complete=null,this.original=null},namespace("springroll").Task=i}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e),this.async=e.async},i=t.extend(e);e.test=function(t){return!!t.async},i.start=function(t){this.async(t)},i.destroy=function(){t.prototype.destroy.call(this),this.async=null},namespace("springroll").FunctionTask=e}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e,e.color),this.color=this.filter(e.color),this.alpha=this.filter(e.alpha)},i=t.extend(e);e.test=function(t){return!!t.color&&!!t.alpha},i.start=function(t){this.load({_alpha:this.alpha,_color:this.color},(function(i){t(e.mergeAlpha(i._color,i._alpha)),i._color.src=i._alpha.src=""}))},e.mergeAlpha=function(t,e,i){i||(i=document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var n=i.getContext("2d");return n.save(),n.drawImage(t,0,0),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),n.restore(),i},namespace("springroll").ColorAlphaTask=e}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e),this.assets=e.assets,this.cacheAll=e.cacheAll,this.progress=e.progress},i=t.extend(e);e.test=function(t){return!!t.assets&&(Array.isArray(t.assets)||Object.isPlain(t.assets))},i.start=function(t){this.load(this.assets,{complete:t,progress:this.progress,cacheAll:this.cacheAll})},i.destroy=function(){t.prototype.destroy.call(this),this.assets=null},namespace("springroll").ListTask=e}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e,e.src),this.src=this.filter(e.src),this.progress=e.progress||null,this.data=e.data||null,this.advanced=!!e.advanced},i=t.extend(e);e.test=function(t){return!!t.src},i.start=function(t){var e=this.advanced;this.simpleLoad(this.src,(function(i){var n=i;n&&!e&&(n=i.content,i.destroy()),t(n)}),this.progress,this.data)},i.destroy=function(){t.prototype.destroy.call(this),this.data=null,this.progress=null},namespace("springroll").LoadTask=e}(),function(t){var e,i=include("createjs.LoadQueue"),n=include("createjs.Sound",!1),r=function(){i.call(this,!0),void 0===e&&(e=include("springroll.Debug",!1)),this.retries=0,this.url=null,this.preparedUrl=null,this.data=null,this.onComplete=null,this.onProgress=null,this._onFailed=this._onFailed.bind(this),this._onProgress=this._onProgress.bind(this),this._onCompleted=this._onCompleted.bind(this),n&&this.installPlugin(n)},s=extend(r,i);r.MAX_RETRIES=3,s.toString=function(){return"[LoaderItem(url:'"+this.url+"')]"},Object.defineProperty(s,"basePath",{set:function(t){this._basePath=t}}),Object.defineProperty(s,"crossOrigin",{set:function(t){this._crossOrigin=t}}),s.clear=function(){this.basePath="",this.crossOrigin=!1,this.retries=0,this.onComplete=null,this.onProgress=null,this.data=null,this.preparedUrl=null,this.url=null,this.removeAllEventListeners(),this.removeAll(),this.close()},s.start=function(t){this.addEventListener("fileload",this._onCompleted),this.addEventListener("error",this._onFailed),this.addEventListener("fileprogress",this._onProgress),this._internalStart()},s._internalStart=function(){var t=this.preparedUrl;this.data&&this.data.id&&(t={id:this.data.id,src:t,data:this.data}),this.loadFile(t)},s._onProgress=function(t){this.onProgress&&this.onProgress(this.progress)},s._onFailed=function(t){this.removeAll(),this.retry()},s.retry=function(){this.retries++,this.retries>r.MAX_RETRIES?this.onComplete(this,null):this._internalStart()},s._onCompleted=function(t){this.onComplete(this,t.result)},namespace("springroll").LoaderItem=r}(),function(){var t=function(t,e,i){this.content=t,this.url=e,this.data=i,this.id=null},e=extend(t);e.toString=function(){return"[LoaderResult(url: '"+this.url+"')]"},e.reset=function(){this.content=this.url=this.data=this.id=null},e.destroy=function(){this.reset()},namespace("springroll").LoaderResult=t}(),function(t){var e=include("springroll.LoaderItem"),i=include("springroll.CacheManager"),n=include("springroll.LoaderResult"),r=function(t){this.app=t,this.maxCurrentLoads=2,this.cacheManager=new i(t),this.items={},this.itemPool=[]},s=extend(r);s.destroy=function(){this.itemPool&&this.itemPool.forEach((function(t){t.clear()})),this.itemPool=null,this.cacheManager&&this.cacheManager.destroy(),this.cacheManager=null,this.items=null},s.load=function(t,e,i,n){var r=this.app.options,s=this._getItem(),o=r.basePath;return void 0!==o&&!1===/^http(s)?\:/.test(t)&&-1==t.search(o)&&(s.basePath=o),s.crossOrigin=r.crossOrigin,s.url=t,s.preparedUrl=this.cacheManager.prepare(t),s.onComplete=this._onComplete.bind(this,e),s.onProgress=i||null,s.data=n||null,s.setMaxConnections(this.maxCurrentLoads),this.items[t]=s,s.start(),s},s._onComplete=function(t,e,i){i&&(i=new n(i,e.url,e.data)),t(i),this._putItem(e)},s.cancel=function(t){var e=this.items[t];return!!e&&(e.clear(),this._putItem(e),!0)},s._getItem=function(){var t=this.itemPool;return t.length?t.pop():new e},s._putItem=function(t){delete this.items[t.url],t.clear(),this.itemPool.push(t)},namespace("springroll").Loader=r}(),function(t){function e(t){t&&(t.destroy&&t.destroy(),"IMG"==t.tagName&&(t.src=""))}var i,n=function(){void 0===i&&(i=include("springroll.Debug",!1)),this._cache={}},r=extend(n);r.read=function(t){return this._cache[t]||null},r.write=function(t,e){this._cache[t]&&this.delete(t),this._cache[t]=e},r.delete=function(t){var i="string"==typeof t?t:t.id;if(i){var n=this._cache[i];if(n){if(Object.isPlain(n))for(var r in n)e(n[r]);else Array.isArray(n)?n.forEach(e):e(n);delete this._cache[i]}}},r.empty=function(){for(var t in this._cache)this.delete(t)},r.destroy=function(){this.empty(),this._cache=null},namespace("springroll").AssetCache=n}(),function(){var t,e=include("devicePixelRatio",!1)||1,i=function(){void 0===t&&(t=include("springroll.Debug",!1)),this._sizes=[],this._sizesMap={},this._preferredSize=null},n=extend(i);i.SIZE_TOKEN="%SIZE%",n.reset=function(){this._sizes.length=0,this._sizesMap={}},n.define=function(t,e,i,n){var r={id:t,maxSize:e,scale:i,fallback:n};this._sizesMap[t]=r,this._sizes.push(r),this._sizes.sort((function(t,e){return t.maxSize-e.maxSize}))},n.filter=function(t,e){return e=e||this._preferredSize,t.replace(i.SIZE_TOKEN,e.id)},n.test=function(t){return t.indexOf(i.SIZE_TOKEN)>-1},n.size=function(t){var e=this._preferredSize,i=e.fallback;if(t&&!t[e.id])for(var n=0,r=i.length;n<r;n++){var s=i[n];if(!1!==t[s]){e=this._sizesMap[s];break}}if(!e)throw"Asset does not support any valid size";return e},n.refresh=function(t,i){for(var n=Math.min(t,i),r=null,s=this._sizes,o=s.length-1;o>=0&&s[o].maxSize/e>n;--o)r=s[o];this._preferredSize=r},n.destroy=function(){this._preferredSize=null,this._sizes=null,this._sizesMap=null},namespace("springroll").AssetSizes=i}(),function(t){function e(t){return function(t){return"string"==typeof t}(t)?{src:t}:function(t){return"function"==typeof t}(t)?{async:t}:t}var i=include("springroll.Task"),n=include("springroll.EventDispatcher"),r=function(t){n.call(this),this.manager=t,this.mode=o,this.startAll=!0,this.cacheAll=!1,this.tasks=[],this.results=null,this.running=!1,this.numLoaded=0,this.total=0,this.type=null},s=n.extend(r);s.setup=function(t,e){this.startAll=e.startAll,this.cacheAll=e.cacheAll,this.type=e.type,this.mode=this.addTasks(t),this.results=a(this.mode),e.autoStart&&this.start()},s.start=function(){this.trigger("progress",0),this.running=!0,this.nextTask()},s.reset=function(){this.tasks.forEach((function(t){t.status=i.FINISHED,t.destroy()})),this.total=0,this.numLoaded=0,this.mode=o,this.tasks.length=0,this.results=null,this.type=null,this.startAll=!0,this.cacheAll=!1,this.running=!1};var o=1;s.addTasks=function(i){var n,r,s=o;if((i=e(i)).type===t&&this.type&&(i.type=this.type),this.getTaskByAsset(i))return this.addTask(i),0;if(i.type===this.type&&this.type&&delete i.type,Array.isArray(i))for(var a=0;a<i.length;a++)n=e(i[a]),(r=this.addTask(n)).id||(s=2);else if(Object.isPlain(i))for(var h in i)n=e(i[h]),(r=this.addTask(n)).id||(r.id=h);return s},s.addTask=function(e){e.type===t&&this.type&&(e.type=this.type);var i,n=this.getTaskByAsset(e);return n&&(e.cache===t&&this.cacheAll&&(e.cache=!0),i=new n(e),this.tasks.push(i),++this.total),i},s.getTaskByAsset=function(t){for(var e,i=this.manager.taskDefs,n=0,r=i.length;n<r;n++)if((e=i[n]).test(t))return e;return null},s.nextTask=function(){for(var t=this.tasks,e=0;e<t.length;e++){var n=t[e];if(n.status===i.WAITING&&(n.status=i.RUNNING,n.start(this.taskDone.bind(this,n)),!this.startAll))return}},s.taskDone=function(t,e){if(this.running){e=e||null;var i=this.tasks.indexOf(t);if(-1!==i){this.tasks.splice(i,1);var n=[];if(e){switch(this.mode){case 0:this.results=e;break;case 2:this.results.push(e);break;case o:this.results[t.id]=e}t.cache&&this.manager.cache.write(t.id,e)}t.complete&&t.complete(e,t.original,n),this.trigger("taskDone",e,t.original,n),t.destroy();var r=this.addTasks(n);if(this.trigger("progress",++this.numLoaded/this.total),this.mode===o&&r!==this.mode)throw"Assets require IDs";this.tasks.length?this.nextTask():this.trigger("complete",this.results)}}};var a=function(t){switch(t){case 0:return null;case 2:return[];case o:return{}}};s.destroy=function(){n.prototype.destroy.call(this),this.reset(),this.tasks=null,this.manager=null},namespace("springroll").AssetLoad=r}(),function(t){var e=include("springroll.AssetLoad"),i=include("springroll.AssetCache"),n=include("springroll.AssetSizes"),r=(include("springroll.Task"),function(){this.loads=[],this.loadPool=[],this.taskDefs=[],this.cache=new i,this.sizes=new n,this.defaultType=null,this.sizes.define("half",400,.5,["full"]),this.sizes.define("full",1e4,1,["half"])}),s=extend(r);s.register=function(t,e){"string"==typeof t&&(t=include(t,!1)),t&&(t.priority=e||0,this.taskDefs.push(t),this.taskDefs.sort((function(t,e){return e.priority-t.priority})))},s.load=function(t,e){e=Object.merge({complete:null,progress:null,taskDone:null,cacheAll:!1,startAll:!0,autoStart:!0,type:this.defaultType},e);var i=this.getLoad();return this.loads.push(i),e.complete=this._onLoaded.bind(this,e.complete,i),i.once("complete",e.complete),e.progress&&i.on("progress",e.progress),e.taskDone&&i.on("taskDone",e.taskDone),i.setup(t,e),i},s.poolLoad=function(t){t.off("complete progress taskDone"),t.reset(),this.loadPool.push(t)},s.getLoad=function(){return this.loadPool.length>0?this.loadPool.pop():new e(this)},s._onLoaded=function(t,e,i){var n=this.loads.indexOf(e);n>-1&&this.loads.splice(n,1),t&&t(i),this.poolLoad(e)},s.destroy=function(){this.sizes.destroy(),this.sizes=null,this.cache.destroy(),this.cache=null,this.loadPool=null,this.loads=null,this.taskDefs=null},namespace("springroll").AssetManager=r}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.Loader"),i=include("springroll.AssetManager"),n=new t(100);n.setup=function(){var t=this.loader=new e(this),n=this.assetManager=new i;n.register("springroll.LoadTask"),n.register("springroll.ListTask"),n.register("springroll.FunctionTask",10),n.register("springroll.ColorAlphaTask",20);var r=this.options;r.add("cacheBust",!1).respond("cacheBust",(function(){return t.cacheManager.cacheBust})).on("cacheBust",(function(e){t.cacheManager.cacheBust="true"==e||!!e})),r.add("basePath"),r.add("version",null,!0),r.add("versionsFile",null,!0),r.add("defaultAssetType").on("defaultAssetType",(function(t){n.defaultType=t})),this.load=function(t,e,i,r,s){var o;return"string"==typeof t?t={src:t,progress:i||null,complete:e||null,cache:!!r,data:s||null}:(o=e,"function"==typeof e&&(o={complete:e})),n.load(t,o)},this.unload=function(t){"string"==typeof t&&(t=Array.prototype.slice.call(arguments));for(var e=0;e<t.length;e++)n.cache.delete(t[e])},this.unloadAll=function(){n.cache.empty()},this.getCache=function(t){return n.cache.read(t)},this.on("resize",(function(){n.sizes.refresh(this.realWidth,this.realHeight)})),this.once("beforeInit",(function(){this.display&&n.sizes.refresh(this.realWidth,this.realHeight)}))},n.preload=function(t){this.triggerResize();var e=this.options.versionsFile;e?this.loader.cacheManager.addVersionsFile(e,t):t()},n.teardown=function(){this.loader&&(this.loader.destroy(),this.loader=null),this.assetManager&&(this.assetManager.destroy(),this.assetManager=null)}}(),function(){var t=new(include("springroll.ApplicationPlugin"))(80);t.setup=function(){include("springroll.Debug",!1);var t=this.options;t.add("configPath",null,!0),t.add("preload",[],!0),this.config=null,this._assetLoad=null,this._numLoaded=0,this._total=0,this._progress=-1,this.on("pluginProgress",e.bind(this))},t.preload=function(t){var s=[],o=this.options.configPath;o?s.push({id:"config",src:o,cache:!1,complete:n.bind(this)}):i(this,s);var a=r.bind(this,t);s.length?this._assetLoad=this.load(s,{complete:a,progress:e.bind(this),cacheAll:!0}):a()};var e=function(){this._assetLoad&&(this._numLoaded=this._assetLoad.numLoaded,this._total=this._assetLoad.total);var t=(this._numLoaded+this.pluginLoad.numLoaded)/(this._total+this.pluginLoad.total);t>this._progress&&(this._progress=t,this.trigger("progress",t))},i=function(t,e){e.append(t.options.preload),t.trigger("loading",e)},n=function(t,e,n){this.config=t,this.trigger("configLoaded",t,n),i(this,n)},r=function(t,e){this._assetLoad=null,this.trigger("loaded",e),t()};t.teardown=function(){this.config=null}}(),function(t){var e=include("springroll.EventDispatcher"),i=function(t,i){e.call(this),i=i||{},this.canvas=document.getElementById(t),this.id=t,this.width=this.canvas.width,this.height=this.canvas.height,this.stage=null,this.paused=!1,this._enabled=!1,this._visible="none"!=this.canvas.style.display,this.adapter=null},n=e.extend(i);Object.defineProperty(n,"enabled",{get:function(){return this._enabled},set:function(t){var e=this._enabled;this._enabled=t,e!=t&&(this.trigger(t?"enabled":"disabled"),this.trigger("enable",t))}}),Object.defineProperty(n,"visible",{get:function(){return this._visible},set:function(t){var e=this._visible;this._visible=t,this.canvas.style.display=t?"block":"none",e!=t&&(this.trigger(t?"visible":"hidden"),this.trigger("visibility",t))}}),n.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},n.render=function(t,e){},n.destroy=function(){this.enabled=!1,this.adapter=null,this.stage=null,this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.canvas.onmousedown=null,this.canvas=null},namespace("springroll").AbstractDisplay=i}(),function(){var t=include("springroll.Application"),e=include("springroll.Loader"),i=include("springroll.PropertyDispatcher"),n=include("springroll.EventDispatcher");t.prototype.getDisplays=function(t){return"function"==typeof t&&_displays.forEach(t),_displays},n.mixIn=function(t,e){return mixin(t,n)},Object.defineProperty(e,"instance",{get:function(){return t.instance.loader}}),i.prototype.readOnly=function(t){for(var e,i,n=0;n<arguments.length;n++){if(i=arguments[n],void 0===(e=this._properties[i]))throw"Property "+i+" does not exist";e.readOnly=!0}return this}}()}(),function(){var t=navigator.userAgent;t.indexOf("Safari")>=0?browser="Safari":t.indexOf("Firefox")>=0?browser="Firefox":t.indexOf("IE")>=0||t.indexOf("Edge")?browser="IE":browser="Chrome",t.indexOf("Windows")>=0?os="Windows":t.indexOf("Mac")>=0||t.indexOf("iOS")>=0||t.indexOf("iPhone")>=0||t.indexOf("iPad")>=0?os="Mac":os="Linux";var e,i={cancel:3,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":"Mac"==os&&"Firefox"!=browser?126:19,caps_lock:20,esc:27,spacebar:32,pageup:33,pagedown:34,end:35,home:36,arrow_left:37,arrow_up:38,arrow_right:39,arrow_down:40,print_screen:"Linux"==os?42:"Mac"==os&&"Firefox"!=browser?124:44,insert:45,delete:46,scroll_lock:"Mac"==os&&"Firefox"!=browser?125:145,OS:"Firefox"==browser?"Mac"==os?224:91:[91,"Mac"==os?93:92],context_menu:"Mac"==os?0:93,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"\\":220,"[":219,"]":221,"'":222,"num_*":106,"num_+":107,num_enter:108,"num_-":109,"num_.":110,"num_/":111,num_lock:"Mac"==os?12:144,clear:"Mac"==os?12:144};for(e=65;e<=90;++e)i[String.fromCharCode(e+32)]=e;for(e=48;e<=57;++e)i[String.fromCharCode(e)]=e;for(e=96;e<=105;++e)i["num_"+(e-96)]=e;for(e=112;e<=123;++e)i["F"+(e-111)]=e;"Mac"==os?i.meta=i.command=i.OS:(i.meta=i.ctrl,i.command=0),namespace("springroll.keyboard").USLocale=i}(),function(){var t=include("springroll.Application"),e=include("springroll.Debug",!1),n=function(e,i){this._onFocusLost=this._onFocusLost.bind(this),this._onPaused=this._onPaused.bind(this),this._onResumed=this._onResumed.bind(this),this._update=this._update.bind(this),this._keyDown=this._keyDown.bind(this),this._keyUp=this._keyUp.bind(this),this.target=e,e.addEventListener("onblur",this._onFocusLost);var n=this._keysByCode={},r=this._keysByName={};for(var o in this._activeCombos=[],this._updatedKeys=[],this.detectKeyCallback=null,this.detectCancelKey=null,this.detectModifiers=!1,this.modifiers=["ctrl","alt","shift","command"],this.scrollKeys=["arrow_down","arrow_up","arrow_left","arrow_right","spacebar"],i){var a=i[o];Array.isArray(a)||(a=[a]);var h,l=null;for(h=0;h<a.length;++h)if(n[a[h]]){l=n[a[h]];break}for(l||(l=new s),l.addName(o),l.addCode(a),r[o]=l,h=0;h<a.length;++h)n[a[h]]=l}this.enabled=!0;var u=t.instance;u.on("paused",this._onPaused),u.on("resumed",this._onResumed),u.options.preventScrollingKeys&&this.restrictScrollingKeys()},r=n.prototype;r.addKeyDown=function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;++r)this.addKeyDown(t[r],i,n);else{var s=this._keysByName[t];s?s.addListener(i,1,t,!!n):e&&e.warn("No key found with name '"+t+"'")}},r.removeKeyDown=function(t,e){if(Array.isArray(t))for(var i=0;i<t.length;++i)this.removeKeyDown(t[i],e,preventDefault);else{var n=this._keysByName[t];n&&n.removeListener(e,1)}},r.addKeyRepeat=function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;++r)this.addKeyRepeat(t[r],i,n);else{var s=this._keysByName[t];s?s.addListener(i,2,t,!!n):e&&e.warn("No key found with name '"+t+"'")}},r.removeKeyRepeat=function(t,e){if(Array.isArray(t))for(var i=0;i<t.length;++i)this.removeKeyRepeat(t[i],e,preventDefault);else{var n=this._keysByName[t];n&&n.removeListener(e,2)}},r.addKeyUp=function(t,i,n){if(Array.isArray(t))for(var r=0;r<t.length;++r)this.addKeyUp(t[r],i,n);else{var s=this._keysByName[t];s?s.addListener(i,3,t,!!n):e&&e.warn("No key found with name '"+t+"'")}},r.removeKeyUp=function(t,e){if(Array.isArray(t))for(var i=0;i<t.length;++i)this.removeKeyUp(t[i],e,preventDefault);else{var n=this._keysByName[t];n&&n.removeListener(e,3)}},r.setPreventDefaultOnKey=function(t,e){if(Array.isArray(t))for(var i=0;i<t.length;++i)this.setPreventDefaultOnKey(t[i],e);else{var n=this._keysByName[t];n&&n.setManualPreventDefault(e)}},r.restrictScrollingKeys=function(){this.setPreventDefaultOnKey(this.scrollKeys,!0)},r.addCombo=function(t,e,i){!1!==i&&(i=!0);for(var n,r=this._activeCombos,s=r.length-1;s>=0;--s)if(r[s].name==t&&r[s].preventDefault==i){n=r[s];break}n||(n=new o(t,i,this._keysByName),r.push(n)),n.addListener(e)},r.removeCombo=function(t,e){for(var i=this._activeCombos,n=i.length-1;n>=0;--n)i[n].name==t&&i[n].removeListener(e)&&(n==i.length-1?i.pop():i.splice(n,1))},r.detectNextKey=function(t,e,i){void 0===e?e=this._keysByName.esc:e&&(e=this._keysByName[e]),this.detectKeyCallback=t,this.detectCancelKey=e||null,this.detectModifiers=!!i},r.stopDetecting=function(){this.detectKeyCallback=null,this.detectCancelKey=null},r.justPressed=function(t){var e=this._keysByName[t];return!!e&&e.justDown},r.isDown=function(t){var e=this._keysByName[t];return!!e&&e.isDown},r.justReleased=function(t){var e=this._keysByName[t];return!!e&&e.justUp},Object.defineProperty(r,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e;var i=this.target;i.removeEventListener("keydown",this._keyDown,!0),i.removeEventListener("keyup",this._keyUp,!0),t.instance.off("update",this._update),e?(i.addEventListener("keydown",this._keyDown,!0),i.addEventListener("keyup",this._keyUp,!0),t.instance.on("update",this._update,-1e3)):this.clearKeys()}}),r.clearKeys=function(){var t=this._keysByCode;if(t)for(var e in t){var i=t[e];i.isDown=i.justDown=i.justUp=!1}},r._onFocusLost=function(t){this.clearKeys()},r._onPaused=function(){this.enabled=!1},r._onResumed=function(){this.enabled=!0;var t=this.target;t&&t.focus&&t.focus()},r._update=function(t){var e=this._updatedKeys;if(e&&e.length){for(var i=e.length-1;i>=0;--i){var n=e[i];n.justDown=n.justUp=!1}e.length=0}},r._keyDown=function(t){var e,i=this._keysByCode[t.keyCode];if(this.detectKeyCallback){var n=this.detectKeyCallback;if(i&&i==this.detectCancelKey)this.detectKeyCallback=null,n(null);else{var r=!1,o=this.modifiers;if(this.detectModifiers)for(e=0;e<o.length;++e)if(i===this._keysByName[o[e]]){r=!0;break}if(!r){this.detectKeyCallback=null,i||(i=new s(t.keyCode,"key_"+t.keyCode),this._keysByCode[t.keyCode]=i,this._keysByName[i.name]=i);var a=i.preferredName;if(this.detectModifiers)for(e=0;e<o.length;++e)this._keysByName[o[e]].isDown&&(a=o[e]+" + "+a);n(a)}}}if(i){var h=!1;if(i.isDown)i.trigger(2);else for(i.isDown=i.justDown=!0,-1==this._updatedKeys.indexOf(i)&&this._updatedKeys.push(i),i.trigger(1),e=this._activeCombos.length-1;e>=0;--e)this._activeCombos[e].testKeyDown(t.keyCode)&&(h=!0);if(i.shouldPreventDefault||h)return t.preventDefault(),!0}},r._keyUp=function(t){var e=this._keysByCode[t.keyCode];if(e){var i=!1;if(e.isDown){e.isDown=!1,e.justUp=!0,-1==this._updatedKeys.indexOf(e)&&this._updatedKeys.push(e),e.trigger(3);for(var n=this._activeCombos.length-1;n>=0;--n)this._activeCombos[n].testKeyUp(t.keyCode)&&(i=!0)}if(e.shouldPreventDefault||i)return t.preventDefault(),!0}},r.destroy=function(){this.enabled=!1;var e,i=t.instance;for(e in i&&(i.off("paused",this._onPaused),i.off("resumed",this._onResumed)),this.target.removeEventListener("onblur",this._onFocusLost),this._keysByCode)this._keysByCode[e].destroy();for(e=this._activeCombos.length-1;e>=0;--e)this._activeCombos[e].destroy();this._keysByCode=this._keysByName=this._updatedKeys=this._activeCombos=this.target=null,this._update=this._keyDown=this._keyUp=this._onResumed=this._onPaused=this._onFocusLost=null},namespace("springroll").Keyboard=n;var s=function(){this.codes=[],this.names=[],this.preferredName=null,this.upListeners=[],this.repeatListeners=[],this.downListeners=[],this.manualPreventDefault=!1,this.shouldPreventDefault=!1,this.isDown=!1,this.justDown=!1,this.justUp=!1};(r=s.prototype).addCode=function(t){if(Array.isArray(t))for(var e=0;e<t.length;++e)this.codes.push(t[e]);else this.codes.push(t)},r.addName=function(t){this.names.length||(this.preferredName=t),this.names.push(t)},r.setManualPreventDefault=function(t){if(this.manualPreventDefault=t,t)this.shouldPreventDefault=!0;else{t=!1;for(var e=[this.downListeners,this.repeatListeners,this.upListeners],i=0;i<e.length&&!t;++i)for(var n=e[i],r=n.length-1;r>=0;--r)if(n[r]&&n[r].preventDefault){t=!0;break}this.shouldPreventDefault=t}},r.addListener=function(t,e,i,n){var r;switch(e){case 1:r=this.downListeners;break;case 2:r=this.repeatListeners;break;case 3:r=this.upListeners}-1==r.indexOf(t)&&r.push(t),this.preferredName!=i&&(this.preferredName=i),t.preventDefault=n,n&&(this.shouldPreventDefault=!0)},r.removeListener=function(t,e){var i;switch(e){case 1:i=this.downListeners;break;case 2:i=this.repeatListeners;break;case 3:i=this.upListeners}var n=i.indexOf(t);n>=0&&(n<1?i.shift():i.splice(n,1)),this.setManualPreventDefault(this.manualPreventDefault)},r.trigger=function(t){var e;switch(t){case 1:e=this.downListeners;break;case 2:e=this.repeatListeners;break;case 3:e=this.upListeners}for(var i=0;i<e.length;++i)e[i](this.preferredName)},r.destroy=function(){this.codes=this.names=this.upListeners=this.repeatListeners=this.downListeners=null};var o=function(t,i,n){this.name=t,this.listeners=[],this.steps=[],this.currentStep=0,this.preventDefault=i;for(var r=t.split(/\s+>\s+/g),s=0;s<r.length;++s){for(var o=r[s].split(/\s+\+\s+/g),a=[],h=0;h<o.length;++h){var l=o[h];"\\>"==l?l=">":"\\+"==l&&(l="+");var u=n[l];u?a.push({sated:!1,released:!1,codes:u.codes}):e&&e.warn("Issue while creating combo - no key with name "+l)}a.length&&this.steps.push(a)}};(r=o.prototype).testKeyDown=function(t){var e,i,n=this.steps[this.currentStep],r=!1;for(e=0;e<n.length;++e)if((i=n[e]).codes.indexOf(t)>=0){if(i.sated)break;i.sated=!0,r=!0;break}if(!r)return this.resetStep(),this.currentStep=0,!1;var s=!0;for(e=0;e<n.length;++e)if(!(i=n[e]).sated){s=!1;break}return s&&this.currentStep+1==this.steps.length&&(this.trigger(),this.resetStep(),this.currentStep=0),this.preventDefault},r.testKeyUp=function(t){var e,i,n=this.steps[this.currentStep],r=!1;for(e=0;e<n.length;++e)if((i=n[e]).sated&&i.codes.indexOf(t)>=0){i.released=!0,r=!0;break}if(r){var s=!0;for(e=0;e<n.length;++e)if(!n[e].released){s=!1;break}s&&(this.resetStep(),++this.currentStep)}return r&&this.preventDefault},r.resetStep=function(){var t=this.steps[this.currentStep];for(i=0;i<t.length;++i)key=t[i],key.sated=key.released=!1},r.trigger=function(){for(var t=this.listeners,e=0;e<t.length;++e)t[e](this.name)},r.addListener=function(t){var e=this.listeners;-1==e.indexOf(t)&&e.push(t)},r.removeListener=function(t){var e=this.listeners,i=e.indexOf(t);return i>=0&&(i<1?e.shift():e.splice(i,1)),e.length<1},r.destroy=function(){this.listeners=this.steps=null}}(),function(){var t=include("springroll.Keyboard"),e=include("springroll.ApplicationPlugin"),i=include("springroll.keyboard.USLocale"),n=new e;n.setup=function(){this.options.add("keyboardLocale",i,!0),this.options.add("keyboardTarget",null,!0),this.options.add("preventScrollingKeys",!1,!0)},n.preload=function(e){var n=this.options;n.asDOMElement("keyboardTarget"),n.keepFocus=!0;var r=n.keyboardTarget||document,s=n.keyboardLocale||i;this.keyboard=new t(r,s),e()},n.teardown=function(){this.keyboard.destroy(),this.keyboard=null}}(),function(){"use strict";var t,e,i;t=include("springroll.SavedData"),e=function(t){this.container=t,this.id=""},(i=extend(e)).read=function(e,i){if(!this.container.supported)return i(t.read(this.id+e));this.container.fetch("userDataRead",(function(t){i(t.data)}),this.id+e,!0)},i.write=function(e,i,n){if(!this.container.supported)return t.write(this.id+e,i),void(n&&n());this.container.fetch("userDataWrite",(function(t){n&&n()}),{name:this.id+e,value:i},!0)},i.remove=function(e,i){if(!this.container.supported)return t.remove(this.id+e),void(i&&i());this.container.fetch("userDataRemove",(function(t){i&&i()}),this.id+e,!0)},i.destroy=function(){this.id=null,this.container=null},namespace("springroll").UserData=e,function(t){var e=include("springroll.ApplicationPlugin"),i=include("springroll.PageVisibility"),n=include("springroll.UserData"),r=include("Bellhop"),s=new e(200);s.setup=function(){var t=this.options,e=this.container=new r;e.connect(),this.userData=new n(e),t.add("keepFocus",!1).on("keepFocus",(function(t){e.send("keepFocus",t)})),this.on("progress",(function(t){this.container.send("progress",t)})),this.once("beforeInit",(function(){e.send("loaded")})),e.send("loading"),this.singlePlay=!1,this.playOptions={};var i=/playOptions=[^&$]*/.exec(window.location.search);if(null!==i){var s=i[0],h=decodeURIComponent(s.split("=")[1]);try{this.playOptions=JSON.parse(h)}catch(t){springroll.Debug&&springroll.Debug.warn("ContainerClientPlugin: Failed to parse playOptions from query string")}}this.singlePlayEnd=function(){return!!this.singlePlay&&(this.endGame(),!0)},this.endGame=function(t){this.trigger("endGame",t||"game_completed"),this.destroy()},this.once("beforeInit",(function(){var t=!!this.sound;this.container.send("features",{sound:t,hints:!!this.hints,music:t&&this.sound.contextExists("music"),vo:t&&this.sound.contextExists("vo"),sfx:t&&this.sound.contextExists("sfx"),captions:!!this.captions,disablePause:!!this.options.disablePause})})),e.supported&&(e.fetch("singlePlay",f.bind(this)),e.fetch("playOptions",p.bind(this))),window.onerror=a.bind(this),window.onunload=window.onbeforeunload=o.bind(this)};var o=function(){return window.onunload=window.onbeforeunload=null,void this.endGame("left_site")},a=function(t){if(this.container.supported)return this.container.send("localError",String(t)),!0};s.preload=function(t){if(!this.name)throw"Application name is empty";if(this.userData.id=this.name,this.container.supported){this.container.on("soundMuted",l.bind(this)),this.container.on("captionsMuted",u.bind(this)),this.container.on("musicMuted",c.bind(this,"music")),this.container.on("voMuted",c.bind(this,"vo")),this.container.on("sfxMuted",c.bind(this,"sfx")),this.container.on("captionsStyles",d.bind(this)),this.container.on("pause",h.bind(this)),this.container.on("close",g.bind(this)),this.options.autoPause=!1;var e=this.container;this._pageVisibility=new i(e.send.bind(e,"focus",!0),e.send.bind(e,"focus",!1))}t()};var h=function(t){var e=!!t.data;this.autoPaused=e,this.enabled=!e},l=function(t){this.sound&&(this.sound.muteAll=!!t.data)},u=function(t){this.captions&&(this.captions.mute=!!t.data)},c=function(t,e){this.sound&&this.sound.setContextMute(t,!!e.data)},d=function(t){var e=t.data,i=(this.captions||{}).textField||null;i&&i.nodeName&&(i.className="size-"+e.size+" bg-"+e.background+" color-"+e.color+" edge-"+e.edge+" font-"+e.font+" align-"+e.align)},p=function(t){Object.merge(this.playOptions,t.data||{}),this.trigger("playOptions",this.playOptions)},f=function(t){this.singlePlay=!!t.data},g=function(){this.endGame("closed_container")};s.teardown=function(){window.onerror=null,this._pageVisibility&&(this._pageVisibility.destroy(),this._pageVisibility=null),this.userData&&(this.userData.destroy(),this.userData=null),this.container&&(this.container.send("endGame"),this.container.destroy(),this.container=null)}}()}(),function(){"use strict";var t;!function(t){var e,i=include("springroll.EventDispatcher"),n=function(t,n){i.call(this),e||(e=include("springroll.Application"),include("springroll.Debug",!1)),n=Object.merge({next:null,previous:null,delayLoad:0,preload:[],scaling:null},n||{});var r=this.app=e.instance;this.voPlayer=r.voPlayer||null,this.sound=r.sound||null,this.config=r.config||null,this.scaling=r.scaling||null,this.scalingItems=n.scaling||null,this.stateId=null,this.manager=null,this.panel=t,this.preload=n.preload,this.preloaded=!1,this.assets=null,this._destroyed=!1,this._active=!1,this._isLoading=!1,this._canceled=!1,this._onEnterProceed=null,this._onLoadingComplete=null,this._enabled=!1,this._nextState=n.next,this._prevState=n.previous,this.delayLoad=n.delayLoad,this.panel.visible=!1},r=i.prototype,s=i.extend(n),o=function(){};s.exit=o,s.exitStart=o,s.cancel=o,s.enter=o,s.enterDone=o,s.nextState=function(){var t=typeof this._nextState;this._nextState&&("function"===t?this._nextState():"string"===t&&(this.manager.state=this._nextState))},s.previousState=function(){var t=typeof this._prevState;this._prevState&&("function"===t?this._prevState():"string"===t&&(this.manager.state=this._prevState))},s.loadingStart=function(){this._isLoading||(this._isLoading=!0,this.manager.loadingStart(),this._onLoadingComplete=this._onEnterProceed,this._onEnterProceed=null)},s.loadingDone=function(t){if(void 0===t&&(t=this.delayLoad),this._isLoading){if(t&&"number"==typeof t)return this.panel.visible=!0,void this.app.setTimeout(this.loadingDone.bind(this,0),t,!0);this._isLoading=!1,this.manager.loadingDone(),this._onLoadingComplete&&(this._onLoadingComplete(),this._onLoadingComplete=null)}},Object.defineProperty(s,"canceled",{get:function(){return this._canceled}}),Object.defineProperty(s,"active",{get:function(){return this._active}}),Object.defineProperty(s,"enabled",{get:function(){return this._enabled},set:function(t){var e=this._enabled;this._enabled=t,e!=t&&this.trigger("enabled",t)}}),Object.defineProperty(s,"destroyed",{get:function(){return this._destroyed}}),s._internalExit=function(){this.preloaded=!1;var t=this.panel,e=this.scalingItems,i=this.scaling;i&&e&&("panel"==e?i.removeItem(t):i.removeItems(t,e)),this.preload.length&&this.app.unload(this.preload),this._isTransitioning&&(this._isTransitioning=!1,this.manager.animator&&this.manager.animator.stop(t)),this._enabled=!1,t.visible=!1,this._active=!1,this.exit(),this.trigger("exit")},s._internalEntering=function(){this.enter(),this.trigger("enter"),this.loadingStart(),this.preloaded=!1;var t=[];this.trigger("loading",t),this.preload.length&&(t=this.preload.concat(t)),t.length?this.app.load(t,{complete:this._onLoaded.bind(this),progress:a.bind(this),cacheAll:!0}):this._onLoaded(null)};var a=function(t){this.trigger("progress",t),this.manager.trigger("progress",t)};s._onLoaded=function(t){if(this.assets=t,this.preloaded=!0,this.trigger("loaded",t),this.scaling){var e=this.scalingItems;e&&("panel"==e?(this.panel.x=this.panel.y=0,this.panel.scaleX=this.panel.scaleY=1,this.scaling.addItem(this.panel,{align:"top-left",titleSafe:!0})):this.scaling.addItems(this.panel,e))}this.loadingDone()},s._internalExitStart=function(){this.exitStart(),this.trigger("exitStart")},s._internalEnter=function(t){this._isTransitioning&&(this._isTransitioning=!1,this.manager.animator&&this.manager.animator.stop(this.panel)),this._enabled=!1,this._active=!0,this._canceled=!1,this._onEnterProceed=t,this._internalEntering(),this._onEnterProceed&&(this._onEnterProceed(),this._onEnterProceed=null)},s._internalCancel=function(){this._active=!1,this._canceled=!0,this._isLoading=!1,this._internalExit(),this.cancel(),this.trigger("cancel")},s._internalEnterDone=function(){this._canceled||(this.enabled=!0,this.enterDone(),this.trigger("enterDone"))},s.destroy=function(){this._destroyed||(this.trigger("destroy"),this.app=null,this.scaling=null,this.sound=null,this.voPlayer=null,this.config=null,this.scalingItems=null,this.assets=null,this.preload=null,this.panel=null,this.manager=null,this._destroyed=!0,this._onEnterProceed=null,this._onLoadingComplete=null,r.destroy.call(this))},namespace("springroll").State=n}(),t=function(t,e,i){this.currentState=e,this.visibleState=void 0===i?e:i,this.type=t},extend(t),t.VISIBLE="onVisible",t.HIDDEN="onHidden",namespace("springroll").StateEvent=t,function(t){var e=(include("springroll.Debug",!1),include("springroll.EventDispatcher")),i=(include("springroll.State"),include("springroll.StateEvent")),n=function(t){e.call(this),this.animator=null,this.transition=null,this.waitForLoadingComplete=!1,this._transitionSounds=t||null,this._states={},this._state=null,this._stateId=null,this._oldState=null,this._isLoading=!1,this._isTransitioning=!1,this._destroyed=!1,this.enabled=!0,this._onTransitionLoading=this._onTransitionLoading.bind(this),this._onTransitionOut=this._onTransitionOut.bind(this),this._onStateLoaded=this._onStateLoaded.bind(this),this._onTransitionIn=this._onTransitionIn.bind(this)},r=e.extend(n),s=n.TRANSITION_IN="onTransitionIn",o=n.TRANSITION_LOADING="onTransitionLoading",a=n.TRANSITION_IN_DONE="onTransitionInDone",h=n.TRANSITION_OUT="onTransitionOut",l=n.TRANSITION_OUT_DONE="onTransitionOutDone",u=n.TRANSITION_INIT_DONE="onInitDone",c=n.LOADING_START="onLoadingStart",d=n.LOADING_DONE="onLoadingDone";r.addState=function(t,e){this._states[t]=e,e.stateId=t,e.manager=this},Object.defineProperty(r,"currentState",{get:function(){return this._state}}),r.getStateById=function(t){return this._states[t]},r.isBusy=function(){return this._isLoading||this._isTransitioning},r.loadingStart=function(){this._destroyed||(this.trigger(c),this._onTransitionLoading())},r.loadingDone=function(){this._destroyed||this.trigger(d)},Object.defineProperty(r,"enabled",{set:function(t){this.trigger("enabled",t)}}),r.refresh=function(){this.state=this._stateId},Object.defineProperty(r,"state",{set:function(t){this._isTransitioning||(this._stateId=t,this.enabled=!1,this._oldState=this._state,this._state=this._states[t],this._oldState?this._isLoading?(this._oldState._internalCancel(),this._isLoading=!1,this._state._internalEnter(this._onStateLoaded)):(this._isTransitioning=!0,this._oldState._internalExitStart(),this.enabled=!1,this.trigger(h),this._transitioning(h,this._onTransitionOut)):(this._isTransitioning=!0,this.transition&&(this.transition.visible=!0),this._onTransitionLoading(),this.trigger(u),this._isLoading=!0,this._state._internalEnter(this._onStateLoaded)))},get:function(){return this._stateId}}),r._onTransitionOut=function(){this.trigger(l),this._isTransitioning=!1,this.has(i.HIDDEN)&&this.trigger(i.HIDDEN,new i(i.HIDDEN,this._state,this._oldState)),this._oldState.panel.visible=!1,this._oldState._internalExit(),this._oldState=null,this._onTransitionLoading(),this._isLoading=!0,this._state._internalEnter(this._onStateLoaded)},r._onStateLoaded=function(){if(this._isLoading=!1,this._isTransitioning=!0,this.has(i.VISIBLE)&&this.trigger(i.VISIBLE,new i(i.VISIBLE,this._state)),this._state.panel.visible=!0,this.waitForLoadingComplete&&this.animator.hasAnimation(this.transition,o)){var t=this.animator.getTimeline(this.transition);t.onComplete=function(){this.trigger(s),this._transitioning(s,this._onTransitionIn)}.bind(this),t.isLooping=!1}else this.trigger(s),this._transitioning(s,this._onTransitionIn)},r._onTransitionIn=function(){this.transition&&(this.transition.visible=!1),this.trigger(a),this._isTransitioning=!1,this.enabled=!0,this._state._internalEnterDone()},r._onTransitionLoading=function(){if(this.transition){var t,e=this._transitionSounds;e&&(t=e.loading||e.loop);var i=this.animator;i.hasAnimation(this.transition,o)?(this.trigger(o),i.play(this.transition,{anim:o,audio:t})):i.hasAnimation(this.transition,"transitionLoop")&&(this.trigger(o),i.play(this.transition,{anim:"transitionLoop",audio:t}))}},r.showTransitionOut=function(t){this.enabled=!1,this._transitioning(h,function(){this._onTransitionLoading(),t&&t()}.bind(this))},r.showTransitionIn=function(t){this._transitioning(s,function(){this.enabled=!0,this.transition.visible=!1,t&&t()}.bind(this))},r._transitioning=function(t,e){var i,n=this.transition,r=this._transitionSounds;if(!n)return e();n.visible=!0,r&&(i=t==s?r.in:r.out),this.animator.play(n,{anim:t,audio:i},e)},r.destroy=function(){if(this._destroyed=!0,this.off(),this.transition&&this.animator.stop(this.transition),this._state&&this._state._internalExit(),this._states)for(var t in this._states)this._states[t].destroy(),delete this._states[t];this.transition=null,this._state=null,this._oldState=null,this._states=null},namespace("springroll").StateManager=n}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.StateManager"),i=(include("springroll.Debug",!1),new t);i.setup=function(){this._states=null,this.manager=null,this._transition=null,Object.defineProperty(this,"transition",{set:function(t){if(!this.display)throw"No default display";if(t&&!this.animator)throw"No animation module";var e=this.display.stage;this._transition&&e.removeChild(this._transition),this._transition=t,this.manager&&(this.manager.transition=t),t&&(t.stop&&t.stop(),e.addChild(t))},get:function(){return this._transition}}),this.options.add("state",null,!0),this.options.add("transition"),this.options.add("transitionSounds",{in:null,out:null},!0),Object.defineProperty(this,"states",{set:function(t){if(this.manager)throw"States already set";if(!this.display)throw"No default display";var i=this.manager=new e(this.options.transitionSounds);i.animator=this.animator,i.on("enabled",function(t){this.display.enabled=t}.bind(this));var n=this.display.stage;for(var r in t)i.addState(r,t[r]),n.addChild(t[r].panel),this.trigger("stateAdded",r,t[r]);this._states=t;var s=this._transition||this.options.transition;s&&(this.transition=s,s.gotoAndStop&&s.gotoAndStop("onTransitionOut_stop")),this.options.state&&(i.state=this.options.state)},get:function(){return this._states}})},i.teardown=function(){this._state=null,this.manager&&(this.manager.destroy(),this.manager=null),this.transition&&(this.display&&this.display.adapter.removeChildren(this.transition),this.transition=null)}}(),function(){var t=include("springroll.StateManager").prototype;t.changeTransition=function(t){this.transition=t},t.getCurrentState=function(){return this.currentState},t.setState=function(t){this.state=t},t.next=function(){this._state.nextState()},t.previous=function(){this._state.previousState()},Object.defineProperty(include("springroll"),"BaseState",{get:function(){return include("springroll.State")}})}()}(),function(){"use strict";var t,e,i;namespace("springroll").SoundContext=function(t){this.id=t,this.volume=1,this.muted=!1,this.sounds=[],this.subContexts=[]},e=function(){t||(t=include("springroll.Sound")),this._channel=null,this._endFunc=null,this._endCallback=null,this._startFunc=null,this._startParams=null,this.alias=null,this._fTime=0,this._fDur=0,this._fStart=0,this._fEnd=0,this.curVol=0,this._pan=0,this.length=0,this.paused=!1,this.globallyPaused=!1,this.isValid=!0},i=extend(e),Object.defineProperty(i,"position",{get:function(){return this._channel?this._channel.getPosition():0}}),i.stop=function(){var e=t.instance;if(e){var i=e._sounds[this.alias];if(!i)return;var n=i.playing.indexOf(this);n>-1&&i.playing.splice(n,1),(n=i.waitingToPlay.indexOf(this))>-1&&i.waitingToPlay.splice(n,1),e._stopInst(this)}},i.updateVolume=function(e){if(this._channel){if(void 0===e){var i=t.instance,n=i._sounds[this.alias];if(n.context){var r=i._contexts[n.context];e=r.muted?0:r.volume}else e=1}this._channel.setVolume(e*this.curVol)}},Object.defineProperty(i,"volume",{get:function(){return this.curVol},set:function(t){this.curVol=t,this.updateVolume()}}),Object.defineProperty(i,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._channel&&(this._channel.pan=t)}}),i.pause=function(){this.globallyPaused=!1,this.paused||(this.paused=!0,this._channel&&(this._channel.paused=!0,t.instance._onInstancePaused()))},i.resume=function(){this.paused&&(this.paused=!1,this._channel&&(t.instance._onInstanceResume(),this._channel.paused=!1,this._channel.gainNode&&(this._channel._volume=-1,this._channel.gainNode.gain.value=0),this.updateVolume()))},namespace("springroll").SoundInstance=e,function(){var t=include("springroll.Task"),e=include("springroll.Application"),i=function(e){t.call(this,e,e.sounds[0]),this.sounds=e.sounds},n=t.prototype,r=t.extend(i);i.test=function(t){return!!t.sounds&&Array.isArray(t.sounds)},r.start=function(t){var i=e.instance.sound,n=this.sounds;i.preload(n,(function(){n.destroy=function(){i.unload(this),this.length=0,delete this.destroy},t(n)}))},r.destroy=function(){this.sounds=null,n.destroy.call(this)},namespace("springroll").SoundTask=i}(),function(){function t(){var t=c.activePlugin,e=t._audioSources,i=t._soundInstances,n=t._loaders;h.context.close&&h.context.close();var r=window.AudioContext||window.webkitAudioContext;for(var s in h.context=new r,h.call(t),t._loaders=n,t._audioSources=e,t._soundInstances=i,i)for(var o=i[s],a=0;a<o.length;++a){var l=o[a];l.panNode.disconnect(0),l.gainNode.disconnect(0),l.gainNode=h.context.createGain(),l.panNode=h.context.createPanner(),l.panNode.panningModel=h._panningModel,l.panNode.connect(l.gainNode),l._updatePan(),(l._position<0||void 0===l._position)&&(l._position=0)}}function e(t){h.playEmptySound(),"running"!=h.context.state&&void 0!==h.context.state||(_.preventDefaultOnUnmute&&t.preventDefault(),document.removeEventListener("touchstart",e),document.removeEventListener("touchend",e),document.removeEventListener("mousedown",e),_.systemMuted=!1,_.trigger("systemUnmuted"))}function i(t){return"string"==typeof t}function n(t){return"function"==typeof t}var r,s,o=include("springroll.Application"),a=include("springroll.EventDispatcher"),h=include("createjs.WebAudioPlugin"),l=include("createjs.CordovaAudioPlugin",!1),u=include("createjs.FlashAudioPlugin",!1),c=include("createjs.Sound"),d=include("springroll.Enum"),p=function(){s||(include("springroll.Debug",!1),r=include("springroll.SoundContext"),s=include("springroll.SoundInstance")),a.call(this),this._sounds={},this._fades=[],this._pool=[],this.supportedSound=null,this._contexts={},this._update=this._update.bind(this),this._markLoaded=this._markLoaded.bind(this),this._playAfterLoad=this._playAfterLoad.bind(this),this.isSupported=!0,this.systemMuted=createjs.BrowserDetect.isIOS,this.preventDefaultOnUnmute=!0},f=a.prototype,g=a.extend(p),_=null,v=new d("unloaded","loading","loaded");p.init=function(t,i){var r=o.instance.options;n(t)&&(t={ready:t});var s={plugins:u?[h,u]:[h],types:["ogg","mp3"],swfPath:"assets/swfs/",ready:null};if(t=Object.merge({},s,t),r.forceFlashAudio&&(t.plugins=[u]),l&&(r.forceNativeAudio||t.plugins.indexOf(l)>=0))try{(window.top?window.top.springroll.forceNativeAudio:window.springroll.forceNativeAudio)&&(t.plugins=[l])}catch(t){}if(t.ready=t.ready||i,!t.ready)throw"springroll.Sound.init requires a ready callback";if(u){var a=r.basePath;u.swfPath=(a||"")+t.swfPath}if(c.registerPlugins(t.plugins),createjs.BrowserDetect.isIOS&&c.activePlugin instanceof h&&"running"!=c.activePlugin.context.state?(document.addEventListener("touchstart",e),document.addEventListener("touchend",e),document.addEventListener("mousedown",e)):this.systemMuted=!1,_=new p,c.getCapabilities())_._initComplete(t.types,t.ready);else if(c.activePlugin){var d;d=function(){try{var e=window.plugins.NativeAudio||window.top.plugins.NativeAudio||null;e&&e.getCapabilities((function(e){e,o.instance.off("update",d),_._initComplete(t.types,t.ready)}),(function(t){t}))}catch(t){}},o.instance.on("update",d)}else _.isSupported=!1,t.ready&&t.ready();return _},g._initComplete=function(t,e){if(u&&c.activePlugin instanceof u)_.supportedSound=".mp3";else for(var i,n=0,r=t.length;n<r;++n)if(i=t[n],c.getCapability(i)){_.supportedSound="."+i;break}this._fixAndroidAudio=createjs.BrowserDetect.isAndroid&&c.activePlugin instanceof h&&!(navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("Firefox")>-1),this._fixAndroidAudio&&(this._numPlayingAudio=0,this._lastAudioTime=Date.now()),e&&e()},Object.defineProperty(p,"instance",{get:function(){return _}}),g.addContext=function(t){if(t){for(var e,n=t.soundManifest||t.sounds||[],s=t.path||"",o=!0===t.preload||!1,a=t.context,h={},l=0,u=n.length;l<u;++l)i(e=n[l])&&(e={id:e}),(h=this._sounds[e.id]={id:e.id,src:s+(e.src?e.src:e.id)+this.supportedSound,volume:e.volume?e.volume:1,loop:!!e.loop,loadState:v.unloaded,playing:[],waitingToPlay:[],context:e.context||a,playAfterLoad:!1,preloadCallback:null,data:e,duration:0}).context&&(this._contexts[h.context]||(this._contexts[h.context]=new r(h.context)),this._contexts[h.context].sounds.push(h)),(o||!0===e.preload)&&this.preload(h.id);return this}},g.linkContexts=function(t,e){if(this._contexts[t]||(this._contexts[t]=new r(t)),t=this._contexts[t],Array.isArray(e))for(var i=0;i<e.length;++i)t.subContexts.indexOf(e[i])<0&&t.subContexts.push(e[i]);else t.subContexts.indexOf(e)<0&&t.subContexts.push(e)},g.exists=function(t){return!!this._sounds[t]},g.contextExists=function(t){return!!this._contexts[t]},g.isUnloaded=function(t){return!!this._sounds[t]&&this._sounds[t].loadState==v.unloaded},g.isLoaded=function(t){return!!this._sounds[t]&&this._sounds[t].loadState==v.loaded},g.isLoading=function(t){return!!this._sounds[t]&&this._sounds[t].loadState==v.loading},g.isPlaying=function(t){var e=this._sounds[t];return!!e&&e.playing.length+e.waitingToPlay.length>0},g.getDuration=function(t){var e=this._sounds[t];if(!e)return null;if(!e.duration&&e.loadState==v.loaded){var i=c.play(t,null,null,null,null,0);e.duration=i.getDuration(),i.stop()}return e.duration},g.fadeIn=function(t,e,n,r){var s,a;if(i(t)){if(!(s=this._sounds[t]))return;s.playing.length&&(a=s.playing[s.playing.length-1])}else a=t,s=this._sounds[a.alias];if(a&&a._channel){a._fTime=0,a._fDur=e>0?e:500,a._fEnd=n||a.curVol,a._fStop=!1;var h=r>0?r:0;a.volume=a._fStart=h,-1==this._fades.indexOf(a)&&(this._fades.push(a),1==this._fades.length&&o.instance.on("update",this._update))}},g.fadeOut=function(t,e,n,r,s){var a,h;if(i(t)){if(!(a=this._sounds[t]))return;if(a.playing.length)h=a.playing[a.playing.length-1];else if(f.loadState==v.loading)return void this.stop(t)}else h=t;h&&h._channel&&(h._fTime=0,h._fDur=e>0?e:500,r>0?(h.volume=r,h._fStart=r):h._fStart=h.volume,h._fEnd=n||0,s=void 0===s?0===h._fEnd:!!s,h._fStop=s,-1==this._fades.indexOf(h)&&(this._fades.push(h),1==this._fades.length&&o.instance.on("update",this._update)))},g._update=function(t){for(var e,i,n,r,s,a=this._fades,h=a.length-1;h>=0;--h)(e=a[h]).paused||((i=e._fTime+=t)>=e._fDur?e._fStop?((n=this._sounds[e.alias])&&n.playing.splice(n.playing.indexOf(e),1),this._stopInst(e)):(e.curVol=e._fEnd,e.updateVolume(),a.splice(h,1)):(r=i/e._fDur,s=e._fEnd>e._fStart?e._fStart+(e._fEnd-e._fStart)*r:e._fEnd+(e._fStart-e._fEnd)*r,e.curVol=s,e.updateVolume()));0===a.length&&o.instance.off("update",this._update)},g.play=function(e,i,r,s,o,a,h,l,u){var d;if(i&&n(i)&&(d=i,i=null),d=(i?i.complete:d)||null,r=(i?i.start:r)||null,s=!!(i?i.interrupt:s),o=(i?i.delay:o)||0,a=(i?i.offset:a)||0,h=i?i.loop:h,l=i?i.volume:l,u=(i?i.pan:u)||0,this.isSupported){!0===h&&(h=-1);var p=this._sounds[e];if(p){(p.loop&&void 0===h||null===h)&&(h=-1),l="number"==typeof l?l:p.volume;var f,g,_=p.loadState;if(_==v.loaded){this._fixAndroidAudio&&(this._numPlayingAudio?(this._numPlayingAudio++,this._lastAudioTime=-1):(Date.now()-this._lastAudioTime>=3e4&&t(),this._numPlayingAudio=1,this._lastAudioTime=-1));var m=c.play(e,s,o,a,h,l,u);return m&&m.playState!=c.PLAY_FAILED?(f=this._getSoundInst(m,p.id),m.handleExtraData&&m.handleExtraData(p.data),f.curVol=l,f._pan=u,p.playing.push(f),f._endCallback=d,f.updateVolume(),f.length=m.getDuration(),p.duration||(p.duration=f.length),f._channel.addEventListener("complete",f._endFunc),r&&setTimeout(r,0),f):(d&&d(),null)}return _==v.unloaded?(p.playAfterLoad=!0,(f=this._getSoundInst(null,p.id)).curVol=l,f._pan=u,p.waitingToPlay.push(f),f._endCallback=d,f._startFunc=r,f._startParams?((g=f._startParams)[0]=s,g[1]=o,g[2]=a,g[3]=h):f._startParams=[s,o,a,h],this.preload(p.id),f):_==v.loading?(p.playAfterLoad=!0,(f=this._getSoundInst(null,p.id)).curVol=l,f._pan=u,p.waitingToPlay.push(f),f._endCallback=d,f._startFunc=r,f._startParams?((g=f._startParams)[0]=s,g[1]=o,g[2]=a,g[3]=h):f._startParams=[s,o,a,h],f):void 0}d&&d()}else d&&setTimeout(d,0)},g._getSoundInst=function(t,e){var i;return this._pool.length?i=this._pool.pop():(i=new s)._endFunc=this._onSoundComplete.bind(this,i),i._channel=t,i.alias=e,i.length=t?t.getDuration():0,i.isValid=!0,i},g._playAfterLoad=function(e){var n=i(e)?e:e.data.id,r=this._sounds[n];if(r.loadState=v.loaded,r.playAfterLoad){this._fixAndroidAudio&&this._lastAudioTime>0&&Date.now()-this._lastAudioTime>=3e4&&t();for(var s,o,a,h,l,u=r.waitingToPlay,d=0,p=u.length;d<p;++d)o=(s=u[d])._startParams,a=s.curVol,l=s._pan,(h=c.play(n,o[0],o[1],o[2],o[3],a,l))&&h.playState!=c.PLAY_FAILED?(this._fixAndroidAudio&&(this._numPlayingAudio?(this._numPlayingAudio++,this._lastAudioTime=-1):(this._numPlayingAudio=1,this._lastAudioTime=-1)),r.playing.push(s),s._channel=h,h.handleExtraData&&h.handleExtraData(r.data),s.length=h.getDuration(),r.duration||(r.duration=s.length),s.updateVolume(),h.addEventListener("complete",s._endFunc),s._startFunc&&s._startFunc(),s.paused&&h.pause()):(s._endCallback&&s._endCallback(),this._poolInst(s));u.length=0}},g._onSoundComplete=function(t){if(t._channel){this._fixAndroidAudio&&0==--this._numPlayingAudio&&(this._lastAudioTime=Date.now()),t._channel.removeEventListener("complete",t._endFunc);var e=this._sounds[t.alias],i=e.playing.indexOf(t);i>-1&&e.playing.splice(i,1);var n=t._endCallback;this._poolInst(t),n&&n()}},g.stop=function(t){var e=this._sounds[t];if(e)if(e.playing.length)this._stopSound(e);else if(e.loadState==v.loading){e.playAfterLoad=!1;for(var i,n=e.waitingToPlay,r=0,s=n.length;r<s;++r)i=n[r],this._poolInst(i);n.length=0}},g._stopSound=function(t){for(var e=t.playing,i=e.length-1;i>=0;--i)this._stopInst(e[i]);e.length=0},g._stopInst=function(t){t._channel&&(!t.paused&&this._fixAndroidAudio&&0==--this._numPlayingAudio&&(this._lastAudioTime=Date.now()),t._channel.removeEventListener("complete",t._endFunc),t._channel.stop());var e=this._fades.indexOf(t);e>-1&&this._fades.splice(e,1),this._poolInst(t)},g.stopContext=function(t){if(t=this._contexts[t]){var e,i,n=t.sounds;for(i=n.length-1;i>=0;--i)(e=n[i]).playing.length?this._stopSound(e):e.loadState==v.loading&&(e.playAfterLoad=!1);for(i=0;i<t.subContexts.length;++i)this.stopContext(t.subContexts[i])}},g.stopAll=function(){for(var t in this._sounds)this.stop(t)},g.pause=function(t,e){i(t)&&(t=this._sounds[t]),e=!!e;var n,r=t.playing;for(n=r.length-1;n>=0;--n)r[n].paused||(r[n].pause(),r[n].globallyPaused=e);for(n=(r=t.waitingToPlay).length-1;n>=0;--n)r[n].paused||(r[n].pause(),r[n].globallyPaused=e)},g.resume=function(t,e){i(t)&&(t=this._sounds[t]);var n,r=t.playing;for(n=r.length-1;n>=0;--n)r[n].globallyPaused==e&&r[n].resume();for(n=(r=t.waitingToPlay).length-1;n>=0;--n)r[n].globallyPaused==e&&r[n].resume()},g.pauseContext=function(t){if(t=this._contexts[t]){var e,i,n=t.sounds;for(i=n.length-1;i>=0;--i){var r;for(r=(e=n[i]).playing.length-1;r>=0;--r)e.playing[r].pause();for(r=e.waitingToPlay.length-1;r>=0;--r)e.waitingToPlay[r].pause()}for(i=0;i<t.subContexts.length;++i)this.pauseContext(t.subContexts[i])}},g.resumeContext=function(t){if(t=this._contexts[t]){var e,i,n=t.sounds;for(i=n.length-1;i>=0;--i){var r;for(r=(e=n[i]).playing.length-1;r>=0;--r)e.playing[r].resume();for(r=e.waitingToPlay.length-1;r>=0;--r)e.waitingToPlay[r].resume()}for(i=0;i<t.subContexts.length;++i)this.resumeContext(t.subContexts[i])}},g.pauseAll=function(){var t=this._sounds;for(var e in t)this.pause(t[e],!0)},g.resumeAll=function(){var t=this._sounds;for(var e in t)this.resume(t[e],!0)},g._onInstancePaused=function(){this._fixAndroidAudio&&0==--this._numPlayingAudio&&(this._lastAudioTime=Date.now())},g._onInstanceResume=function(){this._fixAndroidAudio&&(this._lastAudioTime>0&&Date.now()-this._lastAudioTime>3e4&&t(),this._numPlayingAudio++,this._lastAudioTime=-1)},g.setContextMute=function(t,e){if(t=this._contexts[t]){t.muted=e;var i,n,r,s,o=t.volume,a=t.sounds;for(s=a.length-1;s>=0;--s)if((i=a[s]).playing.length)for(r=(n=i.playing).length-1;r>=0;--r)n[r].updateVolume(e?0:o);for(s=0;s<t.subContexts.length;++s)this.setContextMute(t.subContexts[s],e)}},Object.defineProperty(g,"muteAll",{set:function(t){c.setMute(!!t)}}),g.setContextVolume=function(t,e){if(t=this._contexts[t]){var i=t.muted;t.volume=e;for(var n,r,s,o=t.sounds,a=o.length-1;a>=0;--a)if((n=o[a]).playing.length)for(s=(r=n.playing).length-1;s>=0;--s)r[s].updateVolume(i?0:e)}},g.preload=function(t,e){if(this.isSupported)if(i(t)&&(t=[t]),t&&0!==t.length){for(var n,r=[],s=0,a=t.length;s<a;++s)(n=this._sounds[t[s]])&&n.loadState==v.unloaded&&(n.loadState=v.loading,r.push({id:n.id,src:n.src,complete:this._markLoaded,data:n,advanced:!0}));r.length>0?o.instance.load(r,e):e&&e()}else e&&e();else e&&setTimeout(e,0)},g._markLoaded=function(t){var e=t.data.id,i=this._sounds[e];i&&(i.loadState=v.loaded,i.playAfterLoad&&this._playAfterLoad(e));var n=i.preloadCallback;n&&(i.preloadCallback=null,n())},g.unload=function(t){if(t)for(var e,i=0,n=t.length;i<n;++i)(e=this._sounds[t[i]])&&(this._stopSound(e),e.loadState=v.unloaded),c.removeSound(e.src)},g.unloadAll=function(){var t=[];for(var e in this._sounds)t.push(e);this.unload(t)},g._poolInst=function(t){-1==this._pool.indexOf(t)&&(t._endCallback=t.alias=t._channel=t._startFunc=null,t.curVol=0,t.globallyPaused=t.paused=t.isValid=!1,this._pool.push(t))},g.destroy=function(){if(this.stopAll(),c.removeAllSounds(),u&&c.activePlugin instanceof u){var t=document.getElementById("SoundJSFlashContainer");t&&t.parentNode&&t.parentNode.removeChild(t)}_=null,this._sounds=null,this._volumes=null,this._fades=null,this._contexts=null,this._pool=null},namespace("springroll").Sound=p}(),function(){var t,e=include("springroll.Sound"),i=include("springroll.Application"),n=include("springroll.EventDispatcher"),r=function(){n.call(this),t||(t=include("springroll.Captions",!1)),this._onSoundFinished=this._onSoundFinished.bind(this),this._updateSilence=this._updateSilence.bind(this),this._updateSoloCaption=this._updateSoloCaption.bind(this),this._syncCaptionToSound=this._syncCaptionToSound.bind(this),this._listHelper=[],this.trackSound=!1,this.paused=!1,this.voList=null,this._listCounter=0,this._currentVO=null,this._soundInstance=null,this._callback=null,this._cancelledCallback=null,this._trackedSounds=[],this._timer=0,this._captions=null},s=extend(r,n);Object.defineProperty(s,"playing",{get:function(){return null!==this._currentVO||this._timer>0}}),Object.defineProperty(s,"currentVO",{get:function(){return this._currentVO}}),Object.defineProperty(s,"captions",{set:function(t){this._captions=t,t&&(t.selfUpdate=!1)},get:function(){return this._captions}}),Object.defineProperty(s,"currentPosition",{get:function(){return this.playing?this._soundInstance?this._soundInstance.position:this._currentVO?this._timer:this.voList[this._listCounter]-this._timer:0}}),Object.defineProperty(s,"currentDuration",{get:function(){return this.playing?this._soundInstance?e.instance.getDuration(this._soundInstance.alias):this._currentVO&&this._captions?this._captions.currentDuration:this.voList[this._listCounter]:0}}),s.getElapsed=function(){var t,i,n=0;if(!this.voList)return 0;for(i=0;i<this._listCounter;++i)"string"==typeof(t=this.voList[i])?n+=e.instance.getDuration(t):"number"==typeof t&&(n+=t);return(i=this._listCounter)<this.voList.length&&("string"==typeof(t=this.voList[i])?n+=this._soundInstance.position:"number"==typeof t&&(n+=t-this._timer)),n},s.pause=function(){!this.paused&&this.playing&&(this.paused=!0,this._soundInstance&&this._soundInstance.pause(),i.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]))},s.resume=function(){this.paused&&(this.paused=!1,this._soundInstance&&this._soundInstance.resume(),this._captions.playing?this._soundInstance?i.instance.on("update",this._syncCaptionToSound):i.instance.on("update",this._updateSoloCaption):i.instance.on("update",this._updateSilence))},s.play=function(t,e,i){this.stop(),this.playing&&this.stop(),this._listCounter=-1,"string"==typeof t?(this._listHelper.length=0,this._listHelper[0]=t,this.voList=this._listHelper):this.voList=t,this._callback=e,this._cancelledCallback=!0===i?e:i,this._onSoundFinished()},s._onSoundFinished=function(){if(this._listCounter>=0&&this.trigger("end",this._currentVO),i.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]),this._captions&&this._soundInstance&&this._captions.seek(this._soundInstance.length),this._soundInstance=null,++this._listCounter>=this.voList.length){this._captions&&this._captions.stop(),this._currentVO=null,this._cancelledCallback=null;var t=this._callback;this._callback=null,t&&t()}else this._currentVO=this.voList[this._listCounter],"string"==typeof this._currentVO?(this._playSound(),this.trigger("start",this._currentVO)):"function"==typeof this._currentVO?(this._currentVO(),this._onSoundFinished()):(this._timer=this._currentVO,this._currentVO=null,i.instance.on("update",this._updateSilence),this.trigger("start",null))},s._updateSilence=function(t){this._timer-=t,this._timer<=0&&this._onSoundFinished()},s._updateSoloCaption=function(t){this._timer+=t,this._captions.seek(this._timer),this._timer>=this._captions.currentDuration&&this._onSoundFinished()},s._syncCaptionToSound=function(t){this._soundInstance&&this._captions.seek(this._soundInstance.position)},s._playSound=function(){this.trackSound&&-1==this._trackedSounds.indexOf(this._currentVO)&&this._trackedSounds.push(this._currentVO);var t=e.instance;!t.exists(this._currentVO)&&this._captions&&this._captions.hasCaption(this._currentVO)?(this._captions.play(this._currentVO),this._timer=0,i.instance.on("update",this._updateSoloCaption)):(this._soundInstance=t.play(this._currentVO,this._onSoundFinished),this._captions&&(this._captions.play(this._currentVO),i.instance.on("update",this._syncCaptionToSound)));for(var n,r=this.voList.length,s=this._listCounter+1;s<r;++s)if("string"==typeof(n=this.voList[s])){t.exists(n)&&!t.isLoaded(n)&&t.preload(n);break}},s.stop=function(){this.paused=!1,this._soundInstance&&(this._soundInstance.stop(),this._soundInstance=null),this._currentVO=null,this._captions&&this._captions.stop(),i.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]),this.voList=null,this._timer=0,this._callback=null;var t=this._cancelledCallback;this._cancelledCallback=null,t&&t()},s.unloadSound=function(){e.instance.unload(this._trackedSounds),this._trackedSounds.length=0},s.destroy=function(){this.stop(),this.voList=null,this._listHelper=null,this._currentVO=null,this._soundInstance=null,this._callback=null,this._cancelledCallback=null,this._trackedSounds=null,this._captions=null,n.prototype.destroy.call(this)},namespace("springroll").VOPlayer=r,namespace("springroll").Sound.VOPlayer=r}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.Sound"),i=include("springroll.VOPlayer"),n=include("createjs.WebAudioPlugin"),r=include("createjs.FlashAudioPlugin",!1),s=new t(90);s.setup=function(){this.options.add("audioPlugins",r?[n,r]:[n],!0),this.options.add("swfPath","assets/swfs/",!0),this.options.add("forceFlashAudio",!1,!0),this.options.add("forceNativeAudio",!1,!0),this.options.add("audioTypes",["ogg","mp3"],!0),this._music=null,this._musicInstance=null,this.voPlayer=new i,this.sound=null,this.assetManager.register("springroll.SoundTask"),Object.defineProperty(this,"music",{set:function(t){if(t!=this._music){var e=this.sound;this._music&&(e.fadeOut(this._music),this._musicInstance=null),this._music=t,t&&(this._musicInstance=e.play(this._music,{start:e.fadeIn.bind(e,t),loop:-1}))}},get:function(){return this._music}}),Object.defineProperty(this,"musicInstance",{get:function(){return this._musicInstance}}),this.once("configLoaded",(function(t){var e=t.sounds,i=this.sound;e&&(e.vo&&i.addContext(e.vo),e.sfx&&i.addContext(e.sfx),e.music&&i.addContext(e.music))}))},s.preload=function(t){e.init({plugins:this.options.audioPlugins,swfPath:this.options.swfPath,types:this.options.audioTypes,ready:function(){if(!this.destroyed){var i=this.sound=e.instance;this.on({paused:function(){i.pauseAll()},resumed:function(){i.resumeAll()}}),this.trigger("soundReady"),t()}}.bind(this)})},s.teardown=function(){this.voPlayer&&(this.voPlayer.destroy(),this.voPlayer=null),this.sound&&(this.sound.destroy(),this.sound=null)}}(),function(){var t=include("springroll.Sound"),e=include("springroll.SoundInstance"),i=include("springroll.VOPlayer"),n=t.prototype;Object.defineProperty(n,"soundEnabled",{get:function(){return this.isSupported}}),n.loadConfig=function(t){return this.addContext(t)},n.preloadSound=function(t,e){this.preload(t,e)},n.unpauseAll=function(){this.resumeAll()},n.unpauseSound=function(t){this.resume(t)},n.pauseSound=function(t){this.pause(t)},(n=e.prototype).unpause=function(){this.resume()},n=i.prototype,Object.defineProperty(n,"soundList",{get:function(){return this.voList}})}()}(),function(){"use strict";var t,e;t=function(t,e){this._hints=t,this._done=e},(e=extend(t)).play=function(){},e._onPlayComplete=function(t,e){this._done(e),"function"==typeof t&&t()},e.destroy=function(){this._done=null,this._hints=null},namespace("springroll").AbstractHint=t,function(){var t=include("springroll.AbstractHint"),e=function(e,i,n,r,s){t.call(this,e,i),this.idOrList=n,this.onComplete=r,this.onCancel=s},i=t.prototype,n=t.extend(e);n.play=function(){this._hints.enabled=!1,this._hints.trigger("vo",{events:this.idOrList,complete:this._onPlayComplete.bind(this,this.onComplete,!1),cancel:this._onPlayComplete.bind(this,this.onCancel,!0)})},n.destroy=function(){this.idOrList=null,this.onComplete=null,this.onCancel=null,i.destroy.call(this)},namespace("springroll").VOHint=e}(),function(){var t=include("springroll.AbstractHint"),e=function(e,i,n,r,s,o){t.call(this,e,i),this.instance=n,this.events=r,this.onComplete=s,this.onCancel=!0===o?s:o},i=t.prototype,n=t.extend(e);n.play=function(){this._hints.enabled=!1,this._hints.trigger("anim",{instance:this.instance,events:this.events,complete:this._onPlayComplete.bind(this,this.onComplete,!1),cancel:this._onPlayComplete.bind(this,this.onCancel,!0)})},n.destroy=function(){this.instance=null,this.events=null,this.onComplete=null,this.onCancel=null,i.destroy.call(this)},namespace("springroll").AnimatorHint=e}(),function(){var t=include("springroll.AbstractHint"),e=function(e,i,n){t.call(this,e,i),this.onStart=n},i=t.prototype,n=t.extend(e);n.play=function(){this._hints.enabled=!1,this.onStart(this._onPlayComplete.bind(this,null,!1),this._onPlayComplete.bind(this,null,!0))},n.destroy=function(){this.onStart=null,i.destroy.call(this)},namespace("springroll").FunctionHint=e}(),function(){var t=include("springroll.AbstractHint"),e=include("springroll.AnimatorHint"),i=include("springroll.FunctionHint"),n=include("springroll.VOHint"),r=function(e,i){t.call(this,e,i),this._tiers=[[]],this._current=-1,this._tier=null,this.nextTier()},s=t.prototype,o=t.extend(r);o.play=function(){this._tier.random().play()},o.vo=function(t,e,i){return this.tier.push(new n(this._hints,this._done,t,e,i)),this},o.anim=function(t,i,n,r){return this.tier.push(new e(this._hints,this._done,t,i,n,r)),this},o.func=function(t){return this.tier.push(new i(this._hints,this._done,t)),this},o.addTier=function(){return this._tier=[],this._tiers.push(this._tier),this},o.nextTier=function(){var t=this._tiers.length;return this._current++,this._current>=t&&(this._current=t-1),this._tier=this._tiers[this._current],this},o.reset=function(){this._current=-1,this.nextTier()},o.destroy=function(){this._tiers=null,this._tier=null,this._current=-1,s.destroy.call(this)},namespace("springroll").GroupHint=r}(),function(){var t=include("springroll.EventDispatcher"),e=include("springroll.AnimatorHint"),i=include("springroll.FunctionHint"),n=include("springroll.VOHint"),r=include("springroll.GroupHint"),s=function(e){t.call(this),this._app=e,this._hint=null,this._duration=0,this._timer=0,this.timerDuration=12e3,this._update=this._update.bind(this),this._done=this._done.bind(this),this.play=this.play.bind(this),this._playing=!1,this._oldHints=[]},o=t.prototype,a=t.extend(s);a.vo=function(t,e,i){return this.set(new n(this,this._done,t,e,i))},a.anim=function(t,i,n,r){return this.set(new e(this,this._done,t,i,n,r))},a.func=function(t){return this.set(new i(this,this._done,t))},a.group=function(){return this.set(new r(this,this._done))},a.set=function(t){return this.clear(),this.enabled=!0,this._hint=t,t},a.clear=function(){this._playing=!1,this.removeTimer(),this.enabled=!1,this._hint&&this._oldHints.push(this._hint),this._hint=null},a.play=function(){return this._hint&&(this._playing=!0,this._hint.play(),this._clearOldHints(),this.trigger("start",this._hint)),this},a.startTimer=function(t){return this._timer=this._duration=t||this.timerDuration,this._app.off("update",this._update).on("update",this._update),this},a.stopTimer=a.removeTimer=function(){return this._app&&this._app.off("update",this._update),this._timer=this._duration=0,this},a.resetTimer=function(){return this._app.off("update",this._update).on("update",this._update),this._timer=this._duration,this},Object.defineProperty(a,"enabled",{set:function(t){this.trigger("enabled",t)}}),a._update=function(t){this._playing||this._timer>0&&(this._timer-=t,this._timer<=0&&(this._app.off("update",this._update),this.play()))},a.funcDone=a._done=function(t){this._playing=!1,this.resetTimer(),this.enabled=!t,this._hint instanceof r&&this._hint.nextTier()},a._clearOldHints=function(){if(this._oldHints.length){for(var t=0;t<this._oldHints.length;t++)this._oldHints[t].destroy();this._oldHints.length=0}},a.destroy=function(){this.clear(),this._clearOldHints(),this._app=null,o.destroy.call(this)},namespace("springroll").HintsPlayer=s}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.HintsPlayer"),i=new t;i.setup=function(){this.hints=new e(this)},i.preload=function(t){if(!this.animator)throw"No animator";if(!this.voPlayer)throw"No sound";this.hints.on({vo:n.bind(this),anim:r.bind(this)}),this.container&&(this.container.on("playHelp",this.hints.play),this.hints.on("enabled",function(t){this.container.send("helpEnabled",t)}.bind(this))),t()};var n=function(t){this.media?this.media.playInstruction(t.events,t.complete,t.cancel):this.voPlayer.play(t.events,t.complete,t.cancel)},r=function(t){this.media?this.media.playInstruction(t.instance,t.events,t.complete,t.cancel):this.animator.play(t.instance,t.events,t.complete,t.cancel)};i.teardown=function(){this.container&&this.container.off("playHelp"),this.hints&&(this.hints.off("enabled vo anim"),this.hints.destroy(),this.hints=null)}}()}(),function(){"use strict";var t,e,i,n;t=include("createjs.Bitmap",!1),e=include("PIXI.Sprite",!1),i=function(i,n,r){var s=!1;if(i?(t&&i instanceof t||e&&i instanceof e)&&(s=!0):s=!1,!s)throw"Invalid image";this._image=i,this._size=n,this._adapter=r},(n=extend(i)).resize=function(t,e){var i=this._size,n=this._adapter,r=this._image,s=t/e>=i.width/i.height,o=n.getBitmapSize(r),a=i.maxWidth||i.width,h=o.w/a;i.maxHeight||(h=o.h/i.height);var l=(s?e:t)/(h*(s?i.height:i.width));n.setScale(this._image,l),n.setPosition(this._image,{x:.5*(t-o.w*l),y:.5*(e-o.h*l)})},Object.defineProperty(n,"display",{get:function(){return this._image}}),n.destroy=function(){this._adapter=null,this._size=null,this._image=null},namespace("springroll").ScaleImage=i,function(){var t,e=function(e,i,n,r){t||(t=include("springroll.ScaleManager")),i=i.split("-"),this.vertAlign=i[0],this.horiAlign=i[1],this.titleSafe=!1,this.maxScale=1,this.minScale=1,this.centeredHorizontally=!1,this._display=e,this._size=n,this._adapter=r;var s=r.getScale(e),o=r.getPosition(e),a=this.origScaleX=s.x||1,h=this.origScaleY=s.y||1;this.origBounds=r.getLocalBounds(e);var l,u=this.origBounds;switch(this.origScaleX<0?(l=u.x,u.x=u.right*a,u.right=l*a,u.width*=Math.abs(a)):(u.x*=a,u.right*=a,u.width*=a),this.origScaleY<0?(l=u.y,u.y=u.bottom*h,u.bottom=l*h,u.height*=Math.abs(h)):(u.y*=h,u.bottom*=h,u.height*=h),this.origMarginHori=0,this.origMarginVert=0,this.vertAlign){case t.ALIGN_TOP:this.origMarginVert=o.y+this.origBounds.y;break;case t.ALIGN_CENTER:this.origMarginVert=.5*n.height-o.y;break;case t.ALIGN_BOTTOM:this.origMarginVert=n.height-(o.y+this.origBounds.bottom)}switch(this.horiAlign){case t.ALIGN_LEFT:this.origMarginHori=o.x+this.origBounds.x;break;case t.ALIGN_CENTER:this.origMarginHori=.5*n.width-o.x;break;case t.ALIGN_RIGHT:this.origMarginHori=n.width-(o.x+this.origBounds.right)}},i=extend(e);Object.defineProperty(i,"display",{get:function(){return this._display}}),i.resize=function(e,i){var n=this._adapter,r=this._display,s=this._size,o=this.origBounds,a=this.origScaleX,h=this.origScaleY,l=s.width/s.height,u=e/i,c=u>=l?i/s.height:e/s.width,d=0,p=0;u>=l?d=(e-s.width*c)/2:p=(i-s.height*c)/2;var f,g,_,v=c;this.minScale&&v<this.minScale?v=this.minScale:this.maxScale&&v>this.maxScale&&(v=this.maxScale),n.setScale(r,a*v,"x"),n.setScale(r,h*v,"y"),f=this.origMarginVert*c;var m=!0===this.titleSafe||"vertical"===this.titleSafe;switch(this.vertAlign){case t.ALIGN_TOP:_=m?p+f-o.y*v:f-o.y*v;break;case t.ALIGN_CENTER:_=.5*i-f;break;case t.ALIGN_BOTTOM:_=m?i-p-f-o.bottom*v:i-f-o.bottom*v}switch(null!==_&&n.setPosition(r,_,"y"),f=this.origMarginHori*c,m=!0===this.titleSafe||"horizontal"===this.titleSafe,this.horiAlign){case t.ALIGN_LEFT:g=m?d+f-o.x*v:f-o.x*v;break;case t.ALIGN_CENTER:g=this.centeredHorizontally?.5*(e-r.width):.5*e-f;break;case t.ALIGN_RIGHT:g=m?e-d-f-o.right*v:e-f-o.right*v}null!==g&&n.setPosition(r,g,"x")},i.destroy=function(){this._adapter=null,this.origBounds=null,this._display=null,this._size=null},namespace("springroll").ScaleItem=e}(),function(t){var e={},i=Math.PI/180;e.init=function(n,r,s){s||(s=springroll.ScaleManager._getAdapter()),r.x!==t&&s.setPosition(n,r.x,"x"),r.y!==t&&s.setPosition(n,r.y,"y");var o=r.scale,a=s.getScale(n);o&&(s.setScale(n,o.x*a.x,"x"),s.setScale(n,o.y*a.y,"y")),(o=r.pivot)&&s.setPivot(n,o),r.rotation!==t&&(n.rotation=r.rotation,s.useRadians&&(n.rotation*=i)),r.hitArea&&s.setHitArea(n,e.generateHitArea(r.hitArea,1,s))},e.generateHitArea=function(t,e,i){if(i||(i=springroll.ScaleManager._getAdapter()),e||(e=1),Array.isArray(t)){if(1==e)return new i.Polygon(t);for(var n=[],r=0,s=t.length;r<s;++r)n.push(new i.Point(t[r].x*e,t[r].y*e));return new i.Polygon(n)}return"rect"!=t.type&&t.type?"ellipse"==t.type?new i.Ellipse((t.x-.5*t.w)*e,(t.y-.5*t.h)*e,t.w*e,t.h*e):"circle"==t.type?new i.Circle(t.x*e,t.y*e,t.r*e):"sector"==t.type?new i.Sector(t.x*e,t.y*e,t.r*e,t.start,t.end):null:new i.Rectangle(t.x*e,t.y*e,t.w*e,t.h*e)},namespace("springroll").Positioner=e}(),function(t){var e=include("springroll.ScaleItem"),i=include("springroll.ScaleImage"),n=include("springroll.Positioner"),r=include("springroll.Application"),s=function(t){if(include("springroll.Debug",!1),t=Object.merge({enabled:!1,size:null,items:null,display:null,container:null},t),this._items=[],this._size=null,this._scale=1,this._adapter=null,this._enabled=t.enabled,this.size=t.size,this.display=t.display,t.items){if(!t.container)throw"ScaleManager requires container to add items";this.addItems(t.container,t.items)}this._resize=this._resize.bind(this),this.enabled=this._enabled},o=extend(s),a=s.ALIGN_TOP="top",h=s.ALIGN_BOTTOM="bottom",l=s.ALIGN_LEFT="left",u=s.ALIGN_RIGHT="right",c=s.ALIGN_CENTER="center";s._getAdapter=function(t){if(t||(t=r.instance.display),!t)return null;if(!t.adapter)throw"ScaleManager incompatible display";return t.adapter},Object.defineProperty(o,"display",{set:function(t){this._adapter=s._getAdapter(t)}}),Object.defineProperty(o,"size",{set:function(t){if(this._size=t,t){if(!t.width||!t.height)throw"Invalid design settings";var e=r.instance.options;t.maxWidth&&(e.maxWidth=t.maxWidth),t.maxHeight&&(e.maxHeight=t.maxHeight)}},get:function(){return this._size}}),Object.defineProperty(o,"scale",{get:function(){return this._scale}}),Object.defineProperty(o,"numItems",{get:function(){return this._items.length}}),Object.defineProperty(o,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t;var e=r.instance;e.off("resize",this._resize),t&&(e.on("resize",this._resize),e.triggerResize())}}),o.removeItems=function(t,e){var i=[];if(!e)return this.removeItemsByContainer(t);for(var n in e)t[n]&&i.push(t[n]);if(i.length){var r=this._items.slice(),s=this._items;r.forEach((function(t){i.indexOf(t.display)>-1&&s.splice(s.indexOf(t),1)}))}return this},o.removeItemsByContainer=function(t){var e=this._adapter;return this._items.forEach((function(i,n,r){e.contains(t,i.display)&&r.splice(n,1)})),this},o.removeItem=function(t){for(var e=this._items,i=0,n=e.length;i<n;i++)if(e[i].display===t){e.splice(i,1);break}return this},o.addItems=function(t,e){var i,n;for(n in e)i=e[n],t[n]&&this.addItem(t[n],i,!1);return r.instance.triggerResize(),this},o.addItem=function(t,s,o){if(void 0===o&&(o=!0),s||(s={align:c}),"cover-image"===s)this._items.push(new i(t,this._size,this._adapter));else{"string"==typeof s&&(s={align:s});var d=s.align||c;switch(d){case c:d=d+"-"+d;break;case l:case u:d=c+"-"+d;break;case a:case h:d=d+"-"+c}if(!/^(center|top|bottom)\-(left|right|center)$/.test(d))throw"Item align '"+d+"' is invalid for "+t;n.init(t,s,this._adapter);var p=new e(t,d,this._size,this._adapter);p.titleSafe="all"==s.titleSafe||s.titleSafe,p.maxScale=s.maxScale||NaN,p.minScale=s.minScale||NaN,p.centeredHorizontally=!!s.centeredHorizontally,this._items.push(p)}return o&&r.instance.triggerResize(),this},o._resize=function(t,e){var i=this._size;if(i){var n=i.width/i.height,r=t/e;this._scale=r>n?e/i.height:t/i.width,this._items.forEach((function(i){i.resize(t,e)}))}},o.destroy=function(){this.enabled=!1,this._items.forEach((function(t){t.destroy()})),this._adapter=null,this._size=null,this._items=null},namespace("springroll").ScaleManager=s}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.ScaleManager"),i=new t(1);i.setup=function(){include("springroll.Debug",!1),this.scaling=new e,this.options.override("responsive",!0),this.once("configLoaded",(function(t){var e=t.scalingSize;e&&(this.scaling.size=e)})),this.once("afterInit",(function(){var t=this.config;t&&t.scaling&&this.scaling.addItems(this,t.scaling)}))},i.preload=function(t){this.scaling.display=this.display,this.scaling.enabled=!0,t()},i.teardown=function(){this.scaling&&this.scaling.destroy(),this.scaling=null}}(),function(t){var e=new(include("springroll.ApplicationPlugin"))(100);e.setup=function(){var e=t.navigator;this.isIOS=e.userAgent.search(/iPhone|iPad|iPod/)>-1,this.isAndroid=e.userAgent.search(/Android/)>-1,this.hasTouch=!!("ontouchstart"in t||e.msPointerEnabled&&e.msMaxTouchPoints>0||e.pointerEnabled&&e.maxTouchPoints>0)},e.preload=function(t){if(this.filters){var e=this.hasTouch?"_touch":"_mouse";this.filters.add("%INTERACTION%",e),this.filters.add("%UI%",e)}t()}}(window),function(){var t=include("springroll.ScaleManager"),e=t.prototype;e.addBackground=function(t){return this.addItem(t,"cover-image",!0),this},e.removeBackground=function(t){return this.removeItem(t),this},Object.defineProperty(springroll,"UIScaler",{get:function(){return t}})}()}(),function(){"use strict";var t,e;t=function(){this.onComplete=null,this.onCancelled=null,this.eventList=null,this.listIndex=-1,this.instance=null,this.isLooping=!1,this.useCaptions=!1,this._paused=!1,this.duration=0,this.speed=1,this.soundAlias=null,this.soundInst=null,this.playSound=!1,this.soundStart=0,this.soundEnd=0,this.complete=!1,this._position=0,this.isTimer=!1},(e=extend(t)).reset=function(){return this.instance&&(this.instance.destroy(),this.instance=null),this.complete=!1,this.soundEnd=0,this.soundStart=0,this.playSound=!1,this.soundInst=null,this.soundAlias=null,this.speed=1,this._position=0,this.duration=0,this._paused=!1,this.useCaptions=!1,this.isLooping=!1,this.isTimer=!1,this.listIndex=-1,this.eventList=null,this.onCancelled=null,this.onComplete=null,this},Object.defineProperty(e,"position",{get:function(){return this._position},set:function(t){this._position=t,this.isTimer||this.instance.setPosition(t)}}),e._nextItem=function(){var t=!1;if(this.soundInst&&(this.soundInst._endCallback=null),this.isLooping){var e=this.soundInst;e&&(e.stop(),this.soundInst=null),t=!0}else if(this.isTimer||this.instance.endAnim(),this.soundEnd=this.soundStart=0,this.isLooping=this.playSound=this.useCaptions=!1,this.soundInst=this.soundAlias=null,++this.listIndex>=this.eventList.length)return void(this.complete=!0);var i=this.eventList[this.listIndex];switch(typeof i){case"object":this.isTimer=!1;var n=this.instance;n.beginAnim(i,t),this.duration=n.duration,this.speed=i.speed,this.isLooping=n.isLooping||i.loop,this._position=n.position,i.alias&&(this.soundAlias=i.alias,this.soundStart=i.audioStart,this.playSound=!0,this.useCaptions=i.useCaptions);break;case"number":this.isTimer=!0,this.duration=i,this._position=0;break;case"function":i(),this._nextItem()}},Object.defineProperty(e,"time",{get:function(){return 1e3*this.position},set:function(t){this.position=.001*t}}),Object.defineProperty(e,"paused",{get:function(){return this._paused},set:function(t){if(t!=this._paused){this._paused=!!t;var e=this.soundInst;e&&(this.paused?e.pause():e.resume())}}}),namespace("springroll").AnimatorTimeline=t,function(t){function e(t){return"string"==typeof t}function i(t){return"number"==typeof t}function n(t){return"function"==typeof t}var r,s,o,a,h,l,u,c=include("springroll.AnimatorTimeline"),d=function(t){this.debug=!1,this.captions=null,u=t,o=[],r=[];try{"function"==typeof(s=new Map([])).delete&&"function"==typeof s.has&&"function"==typeof s.set&&"function"==typeof s.get||(s=null)}catch(t){}l=[],a=!1,h=!1,this._update=this._update.bind(this),include("springroll.Debug",!1)},p=extend(d);p.register=function(t,e){var i=include(t,!1);i&&(i.priority=e,o.push(i),o.sort((function(t,e){return e.priority-t.priority})))},p.play=function(t,e,i,n){!0===n&&(n=i),Array.isArray(e)||(e=[e]),this.stop(t);var o=this._makeTimeline(t,e,i,n);return o.eventList&&o.eventList.length>=1?(o._nextItem(),a||this._startUpdate(),s&&s.set(t,o),r.push(o),a=!0,o):(l.push(o.reset()),i&&i(),null)},p._makeTimeline=function(t,r,s,o){var a=l.length?l.pop():new c,h=f(t);if(!h)return a;var d=h.create(t);if(!d)return a;a.instance=d,a.eventList=[],a.onComplete=s,a.onCancelled=o,a.speed=void 0;for(var p,g,_,v=0,m=r.length;v<m;++v){var y=r[v];if(e(y)){if(!h.hasAnimation(t,y))continue;a.eventList.push({anim:y,audio:null,start:0,speed:1})}else if("object"==typeof y){if(!h.hasAnimation(t,y.anim))continue;var x={anim:y.anim,start:i(y.start)?.001*y.start:0,speed:y.speed>0?y.speed:1,loop:y.loop};(p=y.audio)&&u.sound&&(e(p)?(g=0,_=p):(g=p.start>0?.001*p.start:0,_=p.alias),u.sound.isSupported&&!u.sound.systemMuted&&u.sound.exists(_)&&(u.sound.preload(_),x.alias=_,x.audioStart=g,x.useCaptions=this.captions&&this.captions.hasCaption(_))),a.eventList.push(x)}else i(y)?a.eventList.push(.001*y):n(y)&&a.eventList.push(y)}return a},p.canAnimate=function(t){return!!t&&!!f(t)};var f=function(t){for(var e,i=0,n=o.length;i<n;i++)if((e=o[i]).test(t))return e;return null};p.hasAnimation=function(t,e){var i=f(t);return!!i&&i.hasAnimation(t,e)},p.getDuration=function(t,e){var i=f(t);if(!i)return 0;if(!Array.isArray(e))return i.getDuration(t,e.anim||e);for(var n=0,r=0;r<e.length;++r){var s=e[r];"number"==typeof s?n+=s:"string"==typeof s?n+=i.getDuration(t,s):"object"==typeof s&&s.anim&&(n+=i.getDuration(t,s.anim))}return n},p.stop=function(t,e){var i=g(t);i&&(e&&(i.onComplete=i.onCancelled=null),this._remove(i,!0))},p.stopAll=function(t,e){if(a)for(var i,n=r.length-1;n>=0;--n)i=r[n],t&&!t.contains(i.instance.clip)||(e&&(i.onComplete=i.onCancelled=null),this._remove(i,!0))},p._remove=function(t,e){var i=r.indexOf(t);if(!(i<0)){var n=t.onComplete,o=t.onCancelled;e&&t.soundInst&&t.soundInst.stop(),s&&s.delete(t.instance.clip),i==r.length-1?r.pop():r.splice(i,1),a=r.length>0,t.useCaptions&&this.captions.stop(),l.push(t.reset()),a||this._stopUpdate(),e?o&&o():n&&n()}},p.pause=function(){if(!h){h=!0;for(var t=r.length-1;t>=0;--t)r[t].paused=!0;this._stopUpdate()}},p.resume=function(){if(h){h=!1;for(var t=r.length-1;t>=0;--t)r[t].paused=!1;a&&this._startUpdate()}},p.pauseInGroup=function(t,e){if(a&&e)for(var i=r.length-1;i>=0;--i)e.contains(r[i].instance.clip)&&(r[i].paused=t)},p.getTimeline=function(t){return a?g(t):null};var g=function(t){if(s)return s.has(t)?s.get(t):null;for(var e=r.length-1;e>=0;--e)if(r[e].instance.clip===t)return r[e];return null};Object.defineProperty(p,"paused",{get:function(){return h}}),p._startUpdate=function(){u.on("update",this._update)},p._stopUpdate=function(){u.off("update",this._update)},p._update=function(t){for(var e,i,n,s=.001*t,o=r.length-1;o>=0;--o){if(!(e=r[o]))return;if(e.instance,!e.paused){if(n=0,e.soundInst?e.soundInst.isValid?((i=.001*e.soundInst.position)<0&&(i=0),n=e.soundStart+i,e.useCaptions&&this.captions.seek(e.soundInst.position)):n=e.duration:n=e.position+s*e.speed,n>=e.duration){for(;n>=e.duration;){if(n-=e.duration,e.isLooping){if(!e.duration){e.complete=!0;break}e.onComplete&&e.onComplete()}if(e._nextItem(),e.complete)break}if(e.complete){this._remove(e);continue}}e.playSound&&n>=e.soundStart?(e.position=e.soundStart,e.playSound=!1,e.soundInst=u.sound.play(e.soundAlias,this._onSoundDone.bind(this,e,e.listIndex,e.soundAlias),_.bind(null,e,e.listIndex)),e.useCaptions&&this.captions.play(e.soundAlias)):e.position=n}}};var _=function(t,e){t.listIndex==e&&(t.soundEnd=t.soundStart+.001*t.soundInst.length)};p._onSoundDone=function(t,e,i){this.captions&&this.captions.currentAlias==i&&this.captions.stop(),t.listIndex==e&&(t.soundEnd>t.position&&(t.position=t.soundEnd),t.soundInst=null)},p.destroy=function(){this.stopAll(null,!0),this.captions=null,u=null,r=null,l=null,s=null,o=null},namespace("springroll").Animator=d}(),function(t){var e=(include("springroll.Application"),function(){this.clip=null,this.position=0,this.duration=0,this.isLooping=!1,this.currentName=null}),i=extend(e);i.init=function(t){this.clip=t},i.beginAnim=function(t,e){},i.endAnim=function(){},i.setPosition=function(t){},e.test=function(t){return!1},e.hasAnimation=function(t,e){return!1},e.getDuration=function(t,e){return 0},e.extend=function(t,i){return t._pool=[],t.create=function(e){var i=t._pool.length>0?t._pool.pop():new t;return i.init(e),i},t.pool=function(e){e.destroy(),t._pool.push(e)},extend(t,i||e)},i.destroy=function(){this.clip=null},namespace("springroll").AnimatorInstance=e}(),function(t){var e=include("springroll.Application"),i=include("springroll.AnimatorInstance"),n=function(){i.call(this),this.startTime=0,this.length=0,this.firstFrame=-1,this.lastFrame=-1},r=i.extend(n);r.init=function(t){t.framerate||(t.framerate=e.instance.options.fps||15),t.tickEnabled=!1,this.clip=t,this.isLooping=!1,this.currentName=null,this.position=this.duration=0,this.lastFrame=t.currentFrame},r.beginAnim=function(t,e){var i,n=this.currentName=t.anim,r=-1,s=-1,o=!1;if("*"!=n||this.clip.timeline.resolve(n))for(var a=this.clip.getLabels(),h=n+"_stop",l=n+"_loop",u=0,c=a.length;u<c;++u)if((i=a[u]).label==n)r=i.position;else{if(i.label==h){s=i.position;break}if(i.label==l){s=i.position,o=!0;break}}else r=0,s=this.clip.timeline.duration-1,o=!!t.loop;this.firstFrame=r,this.lastFrame=s,this.length=s-r,this.isLooping=o;var d=this.clip.framerate;if(this.startTime=this.firstFrame/d,this.duration=this.length/d,e)this.position=0;else{var p=t.start||0;this.position=p<0?Math.random()*this.duration:p}this.clip.play(),this.clip.elapsedTime=this.startTime+this.position,this.clip.advance()},r.endAnim=function(){this.clip.gotoAndStop(this.lastFrame)},r.setPosition=function(t){this.position=t,this.clip.elapsedTime=this.startTime+t,this.clip.advance()},n.test=function(e){return e.framerate!==t&&e.getLabels!==t&&e.elapsedTime!==t&&e.gotoAndStop!==t&&e.gotoAndPlay!==t&&e.stop!==t&&e.play!==t},n.hasAnimation=function(t,e){if("*"==e&&!t.timeline.resolve(e))return!0;for(var i,n=t.getLabels(),r=-1,s=-1,o=e+"_stop",a=e+"_loop",h=0,l=n.length;h<l;++h)if((i=n[h]).label==e)r=i.position;else if(i.label==o||i.label==a){s=i.position;break}return r>=0&&s>0},n.getDuration=function(t,i){if(t.framerate||(t.framerate=e.instance.options.fps||15),"*"==i&&!t.timeline.resolve(i))return t.timeline.duration/t.framerate*1e3;for(var n,r=t.getLabels(),s=-1,o=-1,a=i+"_stop",h=i+"_loop",l=0,u=r.length;l<u;++l)if((n=r[l]).label==i)s=n.position;else if(n.label==a||n.label==h){o=n.position;break}return s>=0&&o>0?(o-s)/t.framerate*1e3:0},r.destroy=function(){this.clip=null},namespace("springroll").GenericMovieClipInstance=n}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.Animator"),i=new t(50);i.setup=function(){this.animator=new e(this),this.animator.captions=this.captions||null,this.animator.register("springroll.GenericMovieClipInstance",0)},i.teardown=function(){this.animator&&(this.animator.destroy(),this.animator=null)}}()}(),function(){"use strict";var t;!function(t){var e=include("PIXI.extras.BitmapText",!1);if(e){var i=e.prototype;i.setPivotToAlign=!1,i._orig_updateText=i.updateText,i.updateText=function(){if(this._orig_updateText(),this.setPivotToAlign)switch(this.align){case"center":this.pivot.x=this.textWidth/2;break;case"right":this.pivot.x=this.textWidth;break;default:this.pivot.x=0}}}}(),function(t){var e=include("PIXI.Container",!1);if(e){var i=e.prototype;i.useBoundsForSize=!0,i._width=0,i._height=0,Object.getOwnPropertyDescriptor(i,"width").configurable&&(Object.defineProperty(i,"width",{configurable:!0,get:function(){return this.useBoundsForSize?this.scale.x*this.getLocalBounds().width:this.scale.x*this._width},set:function(t){if(this.useBoundsForSize){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}else 0===this._width?this._width=t/this.scale.x:this.scale.x=t/this._width}}),Object.defineProperty(i,"height",{configurable:!0,get:function(){return this.useBoundsForSize?this.scale.y*this.getLocalBounds().height:this.scale.y*this._height},set:function(t){if(this.useBoundsForSize){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}else 0===this._height?this._height=t/this.scale.y:this.scale.y=t/this._height}}))}}(),(t=include("PIXI.interaction.InteractionManager",!1))&&(t.prototype.removeClickEvents=function(){this.interactionDOMElement&&(window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),window.removeEventListener("mouseup",this.onMouseUp,!0))}),function(t){var e=include("PIXI.Point",!1);if(e){var i=e.prototype;i.dotProd=function(t){return this.x*t.x+this.y*t.y},i.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.lengthSq=function(){return this.x*this.x+this.y*this.y},i.normalize=function(){var t=1/this.length();this.x*=t,this.y*=t},i.subtract=function(t){this.x-=t.x,this.y-=t.y},i.add=function(t){this.x+=t.x,this.y+=t.y},i.truncate=function(t){var e=this.length();if(e>t){var i=t/e;this.x*=i,this.y*=i}},i.scaleBy=function(t){this.x*=t,this.y*=t},i.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},i.distanceSq=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},e.localToGlobal=function(t,e,i,n){return n||(n=new PIXI.Point),n.x=e,n.y=i,t.toGlobal(n,n)},e.globalToLocal=function(t,e,i,n){return n||(n=new PIXI.Point),n.x=e,n.y=i,t.toLocal(n,null,n)},e.localToLocal=function(t,e,i,n,r){return r||(r=new PIXI.Point),r.x=i,r.y=n,e.toLocal(r,t,r)},i.toString=function(){return"("+this.x+", "+this.y+")"}}}(),function(t){var e=180/Math.PI,i=function(t,e,i,n,r){for(this.x=t||0,this.y=e||0,this.radius=i||0,this.startAngle=n||0;this.startAngle<0;)this.startAngle+=360;this.endAngle=r||0,this.endAngle<this.startAngle&&(this.endAngle+=360)},n=i.prototype;n.clone=function(){return new PIXI.Sector(this.x,this.y,this.radius,this.startAngle,this.endAngle)},n.contains=function(t,i){if(this.radius<=0)return!1;var n=this.x-t,r=this.y-i;if((n*=n)+(r*=r)>this.radius*this.radius)return!1;for(var s=Math.atan2(i-this.y,t-this.x)*e;s<this.startAngle;)s+=360;return s>=this.startAngle&&s<=this.endAngle},n.constructor=i,namespace("PIXI").Sector=i}(),function(t){var e=include("PIXI.Text",!1);if(e){var i=e.prototype;i.setPivotToAlign=!1,i._orig_updateText=i.updateText,i.updateText=function(){if(this._orig_updateText(),this.setPivotToAlign)switch(this.style.align){case"center":this.pivot.x=this._width/2;break;case"right":this.pivot.x=this._width;break;default:this.pivot.x=0}}}}(),function(){var t,e=include("springroll.ColorAlphaTask"),i=include("springroll.Task"),n=include("PIXI.Texture"),r=include("PIXI.BaseTexture"),s=include("PIXI.utils"),o=include("springroll.Application"),a=function(e,n){t||(t=include("springroll.pixi.PixiDisplay")),i.call(this,e,n||e.image),this.image=this.filter(e.image),this.color=this.filter(e.color),this.alpha=this.filter(e.alpha),this.uploadToGPU=!!e.uploadToGPU},h=i.extend(a);a.test=function(t){return"pixi"==t.type&&(!!t.image||!!t.alpha&&!!t.color)},h.start=function(t){this.loadImage({},t)},h.loadImage=function(i,a,h){this.image?i._image=this.image:(i._color=this.color,i._alpha=this.alpha),this.load(i,function(i){var l;l=i._image?i._image:e.mergeAlpha(i._color,i._alpha);var u=this.original.scale;u&&1!==u||(u=s.getResolutionOfUrl(this.image||this.color));var c=new n(new r(l,null,u));if(c.baseTexture.imageUrl=this.image,this.cache&&!h){var d=this.id;s.useFilenamesForTextures||(d=this.image||this.color),s.TextureCache[d]=c,s.BaseTextureCache[d]=c.baseTexture,c.__T_destroy=c.destroy,c.destroy=function(){this.__destroyed||(this.__destroyed=!0,this.__T_destroy(!0),s.TextureCache[d]==this&&delete s.TextureCache[d])}}if(this.uploadToGPU){var p=o.instance.displays;for(var f in p){var g=p[f];if(g instanceof t&&g.isWebGL){g.renderer.updateTexture(c);break}}}a(c,i)}.bind(this))},h.destroy=function(){i.prototype.destroy.call(this)},namespace("springroll.pixi").TextureTask=a}(),function(t){var e=include("PIXI.Rectangle"),i=include("PIXI.Texture"),n=include("PIXI.utils"),r=function(t,r,s){this.baseTexture=t.baseTexture,this.texture=t,this.frames={};var o=r.meta&&"http://www.codeandweb.com/texturepacker"==r.meta.app,a=r.frames;for(var h in a){var l=a[h],u=h.lastIndexOf(".");u>0&&(h=h.substring(0,u)),(u=h.lastIndexOf("/"))>=0&&(h=h.substring(u+1));var c=l.frame;if(c){var d=null,p=null;d=l.rotated&&o?new e(c.x,c.y,c.h,c.w):new e(c.x,c.y,c.w,c.h),l.trimmed&&(p=new e(l.spriteSourceSize.x,l.spriteSourceSize.y,l.sourceSize.w,l.sourceSize.h)),this.frames[h]=new i(this.baseTexture,d,d.clone(),p,l.rotated),s&&(n.TextureCache[h]=this.frames[h])}}},s=extend(r);s.getFrame=function(t){return this.frames[t]||null},s.getFrames=function(t,e,i,n,r){void 0===n&&(n=4),n<0&&(n=0),r||(r=[]);var s,o,a=[],h=[];for(s=1;s<n;++s){var l="";o=1;for(var u=0;u<s;++u)l+="0",o*=10;a.unshift(l),h.push(o)}var c,d,p=h.length;for(s=e,d=i;s<=d;++s){var f=null;for(o=0;o<p;++o)if(s<h[o]){f=a[o]+s;break}f||(f=s.toString());var g=t.replace("#",f),_=this.frames[g];_&&(c=_),c&&r.push(c)}return r},s.destroy=function(){this.texture.destroy(!0),this.texture=null,this.baseTexture=null,this.frames=null},namespace("springroll.pixi").TextureAtlas=r}(),function(){var t=include("springroll.pixi.TextureTask"),e=(include("PIXI.Texture"),include("springroll.pixi.TextureAtlas")),i=(include("PIXI.utils"),function(e,i){t.call(this,e,i||e.atlas),this.atlas=this.filter(e.atlas)}),n=t.extend(i);i.test=function(e){return!!e.atlas&&t.test(e)},n.start=function(t){this.loadAtlas({},t)},n.loadAtlas=function(t,i,n){t._atlas=this.atlas,this.loadImage(t,function(t,r){var s=r._atlas,o=new e(t,s,this.cache&&!n);s.meta&&s.meta.scale&&1!=parseFloat(s.meta.scale)&&(t.baseTexture.resolution=parseFloat(r._atlas.meta.scale),t.baseTexture.update()),i(o,r)}.bind(this),!0)},namespace("springroll.pixi").TextureAtlasTask=i}(),function(){var t=include("springroll.pixi.TextureTask"),e=include("PIXI.Texture"),i=include("PIXI.Rectangle"),n=include("PIXI.extras.BitmapText",!1);if(include("PIXI.utils"),n){var r=function(e){t.call(this,e,e.font),this.font=this.filter(e.font)},s=t.extend(r);r.test=function(e){return!!e.font&&t.test(e)},s.start=function(t){this.loadImage({_font:this.font},function(r,s){var o=s._font,a={},h=o.getElementsByTagName("info")[0],l=o.getElementsByTagName("common")[0];a.font=h.getAttribute("face"),a.size=parseInt(h.getAttribute("size"),10),a.lineHeight=parseInt(l.getAttribute("lineHeight"),10),a.chars={};var u,c=o.getElementsByTagName("char");for(u=0;u<c.length;u++){var d=c[u],p=parseInt(d.getAttribute("id"),10),f=new i(parseInt(d.getAttribute("x"),10)+r.frame.x,parseInt(d.getAttribute("y"),10)+r.frame.y,parseInt(d.getAttribute("width"),10),parseInt(d.getAttribute("height"),10));a.chars[p]={xOffset:parseInt(d.getAttribute("xoffset"),10),yOffset:parseInt(d.getAttribute("yoffset"),10),xAdvance:parseInt(d.getAttribute("xadvance"),10),kerning:{},texture:new e(r.baseTexture,f)}}var g=o.getElementsByTagName("kerning");for(u=0;u<g.length;u++){var _=g[u],v=parseInt(_.getAttribute("first"),10),m=parseInt(_.getAttribute("second"),10),y=parseInt(_.getAttribute("amount"),10);a.chars[m].kerning[v]=y}this.cache&&n.fonts&&(n.fonts[a.font]=a),a.destroy=function(){a.chars=null,r.destroy()},t(a,s)}.bind(this),!0)},namespace("springroll.pixi").BitmapFontTask=r}}(),(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("springroll.pixi.TextureTask",60),this.assetManager.register("springroll.pixi.TextureAtlasTask",70),this.assetManager.register("springroll.pixi.BitmapFontTask",80),this.once("displayAdded",(function(t){var e=this.options;!e.defaultAssetType&&t instanceof include("springroll.PixiDisplay")&&(e.defaultAssetType="pixi")}))},function(t){var e={};e.Circle=include("PIXI.Circle"),e.Ellipse=include("PIXI.Ellipse"),e.Rectangle=include("PIXI.Rectangle"),e.Sector=include("PIXI.Sector"),e.Point=include("PIXI.Point"),e.Polygon=include("PIXI.Polygon"),e.useRadians=!0,e.getLocalBounds=function(t){var e,i=t.width,n=t.height;return(e=i&&n?new PIXI.Rectangle(-t.pivot.x,-t.pivot.y,i/t.scale.x,n/t.scale.y):new PIXI.Rectangle).right=e.x+e.width,e.bottom=e.y+e.height,e},e.getScale=function(e,i){return i!==t?e.scale[i]:e.scale},e.setPosition=function(e,i,n){return n!==t?e.position[n]=i:(i.x!==t&&(e.position.x=i.x),i.y!==t&&(e.position.y=i.y)),e},e.getPosition=function(e,i){return i!==t?e.position[i]:e.position},e.setScale=function(e,i,n){return n!==t?e.scale[n]=i:e.scale.x=e.scale.y=i,e},e.setPivot=function(e,i,n){return n!==t&&(e.pivot[n]=i),e.pivot=i,e},e.setHitArea=function(t,e){return t.hitArea=e,t},e.getBitmapSize=function(t){return{h:t.height/t.scale.y,w:t.width/t.scale.x}},e.removeChildren=function(t){t.removeChildren()},e.contains=function(t,e){for(;e;){if(e==t)return!0;e=e.parent}return!1},namespace("springroll.pixi").DisplayAdapter=e}(),function(t){var e=include("springroll.AbstractDisplay"),i=include("PIXI.Container"),n=include("PIXI.CanvasRenderer"),r=include("PIXI.WebGLRenderer"),s=include("PIXI.autoDetectRenderer"),o=function(t,o){e.call(this,t,o),o=o||{},this.keepMouseover=o.keepMouseover||!1,this._autoPreventDefault=!o.hasOwnProperty("autoPreventDefault")||o.autoPreventDefault,this.stage=new i,this.renderer=null;var a={view:this.canvas,transparent:!!o.transparent,antialias:!!o.antiAlias,preserveDrawingBuffer:!!o.preserveDrawingBuffer,clearBeforeRender:!!o.clearView,backgroundColor:o.backgroundColor||0,autoResize:!1},h=!!o.preMultAlpha;a.transparent&&!h&&(a.transparent="notMultiplied"),"webgl"!=o.forceContext&&window.navigator.userAgent.indexOf("Trident/7.0")>0&&(o.forceContext="canvas2d"),"canvas2d"==o.forceContext?this.renderer=new n(this.width,this.height,a):"webgl"==o.forceContext?this.renderer=new r(this.width,this.height,a):this.renderer=s(this.width,this.height,a),this.isWebGL=this.renderer instanceof r,this.adapter=include("springroll.pixi.DisplayAdapter"),this.autoPreventDefault=this._autoPreventDefault},a=e.prototype,h=e.extend(o);Object.defineProperty(h,"enabled",{get:function(){return this._enabled},set:function(t){Object.getOwnPropertyDescriptor(a,"enabled").set.call(this,t);var e=this.renderer.plugins.interaction;e&&(t?e.setTargetElement(this.canvas):this.keepMouseover?e.removeClickEvents():e.removeEvents())}}),Object.defineProperty(h,"autoPreventDefault",{get:function(){return this._autoPreventDefault},set:function(t){this._autoPreventDefault=!!t;var e=this.renderer.plugins.interaction;e&&(e.autoPreventDefault=this._autoPreventDefault)}}),h.resize=function(t,e){a.resize.call(this,t,e),this.renderer.resize(t,e)},h.render=function(t,e){(e||!this.paused&&this._visible)&&this.renderer.render(this.stage)},h.destroy=function(){this.stage.destroy(),a.destroy.call(this),this.renderer.destroy(),this.renderer=null},namespace("springroll").PixiDisplay=o,namespace("springroll.pixi").PixiDisplay=o}(),function(){function t(t){r+=t,e.update(r)}var e=include("PIXI.ticker.shared",!1),i=include("springroll.ApplicationPlugin");if(e){var n=new i,r=0;e.autoStart=!1,e.stop(),n.setup=function(){this.on("update",t,300)}}}(),function(t){var e=include("springroll.pixi.PixiDisplay"),i=include("springroll.Application");t.defineProperty(e.prototype,"animator",{get:function(){return i.instance.animator}})}(Object)}(),function(){"use strict";var t,e,i,n,r;(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("springroll.pixi.AdvancedMovieClipTask",80),this.animator.register("springroll.pixi.AdvancedMovieClipInstance",10)},function(t){function e(t,e){return t.position-e.position}function i(t,e,i,n,s){void 0===n&&(n=4),n<0&&(n=0),s||(s=[]);var o,a,h=[],l=[];for(o=1;o<n;++o){var u="";a=1;for(var c=0;c<o;++c)u+="0",a*=10;h.unshift(u),l.push(a)}var d,p,f=l.length,g=r.fromFrame;for(o=e,p=i;o<=p;++o){var _=null;for(a=0;a<f;++a)if(o<l[a]){_=h[a]+o;break}_||(_=o.toString());var v=g(t.replace("#",_),!0);v&&(d=v),d&&s.push(d)}return s}var n=include("PIXI.Sprite"),r=include("PIXI.Texture"),s=function(t,e){n.call(this),this.currentFrame=0,this._framerate=0,this._duration=0,this._t=0,this._labels=0,this._events=0,this._textures=null,t&&this.init(t,e)},o=extend(s,n),a=n.prototype;Object.defineProperty(o,"framerate",{get:function(){return this._framerate},set:function(t){t>0?(this._framerate=t,this._duration=t?this._textures.length/t:0):this._framerate=this._duration=0}}),Object.defineProperty(o,"elapsedTime",{get:function(){return this._t},set:function(t){this._t=t,this._t>this._duration&&(this._t=this._duration),this.currentFrame=Math.floor(this._t*this._framerate+1e-7),this.currentFrame>=this._textures.length&&(this.currentFrame=this._textures.length-1),this.texture=this._textures[this.currentFrame]||r.EMPTY}}),Object.defineProperty(o,"totalFrames",{get:function(){return this._textures.length}}),o.gotoAndStop=function(t){var e=null;if("string"==typeof t){for(var i=this._labels,n=0,s=i.length;n<s;++n)if(i[n].label==t){e=i[n].position;break}}else e=t;null!==e&&(e>=this._textures.length&&(e=this._textures.length-1),this.currentFrame=e,this._framerate>0?this._t=e/this._framerate:this._t=0,this.texture=this._textures[e]||r.EMPTY)},o.advance=function(t){this._framerate>0&&t&&(this._t+=.001*t,this._t>this._duration&&(this._t=this._duration),this.currentFrame=Math.floor(this._t*this._framerate+1e-7),this.currentFrame>=this._textures.length&&(this.currentFrame=this._textures.length-1),this.texture=this._textures[this.currentFrame]||r.EMPTY)},o.getLabels=function(){return this._labels},o.getEvents=function(){return this._events},o.getCurrentLabel=function(){for(var t=this._labels,e=null,i=0,n=t.length;i<n&&t[i].position<=this.currentFrame;++i)e=t[i].label;return e},o.init=function(t,n){var r,s=this._labels=[],o=this._events=[];if(t.labels){var a={};for(r in t.labels){var h={label:r,position:t.labels[r],length:1};a[r]=h.position,/_(loop|stop)$/.test(r)||o.push(h),s.push(h)}for(var l=null,u=0;u<o.length;u++){var c=o[u];l=c.position,c.length=a[r+"_stop"]-l||a[r+"_loop"]-l||0}s.sort(e),o.sort(e)}this._textures=[];for(var d,p=0;p<t.frames.length;++p){var f=t.frames[p];(d=(r=f.name).lastIndexOf("/"))>=0&&(r=r.substring(d+1)),n?n.getFrames(r,f.min,f.max,f.digits,this._textures):i(r,f.min,f.max,f.digits,this._textures)}t.fps?this.framerate=t.fps:this._framerate&&(this.framerate=this._framerate),t.origin?(this.pivot.x=t.origin.x,this.pivot.y=t.origin.y):this.pivot.x=this.pivot.y=0,this.gotoAndStop(0)},o.copyFrom=function(t){this._textures=t._textures,this._labels=t._labels,this._events=t._events,this.pivot.x=t.pivot.x,this.pivot.y=t.pivot.y,this._framerate=t._framerate,this._duration=t._duration},o.destroy=function(){this._labels=this._events=null,a.destroy.call(this)},namespace("springroll.pixi").AdvancedMovieClip=s}(),t=include("springroll.Application"),e=include("springroll.AnimatorInstance"),i=include("springroll.pixi.AdvancedMovieClip"),n=function(){e.call(this),this.startTime=0,this.length=0,this.firstFrame=-1,this.lastFrame=-1},(r=e.extend(n)).init=function(e){e.framerate||(e.framerate=t.instance.options.fps||15),e.tickEnabled=!1,this.clip=e,this.isLooping=!1,this.currentName=null,this.position=this.duration=0,this.lastFrame=e.currentFrame},r.beginAnim=function(t,e){var i,n=this.currentName=t.anim,r=-1,s=-1,o=!1;if("*"==n)r=0,s=this.clip.totalFrames-1,o=!!t.loop;else for(var a=this.clip.getLabels(),h=n+"_stop",l=n+"_loop",u=0,c=a.length;u<c;++u)if((i=a[u]).label==n)r=i.position;else{if(i.label==h){s=i.position;break}if(i.label==l){s=i.position,o=!0;break}}this.firstFrame=r,this.lastFrame=s,this.length=s-r,this.isLooping=o;var d=this.clip.framerate;if(this.startTime=this.firstFrame/d,this.duration=this.length/d,e)this.position=0;else{var p=t.start||0;this.position=p<0?Math.random()*this.duration:p}this.clip.elapsedTime=this.startTime+this.position},r.endAnim=function(){this.clip.gotoAndStop(this.lastFrame)},r.setPosition=function(t){this.position=t,this.clip.elapsedTime=this.startTime+t},n.test=function(t){return t instanceof i},n.hasAnimation=function(t,e){if("*"==e)return!0;for(var i,n=t.getLabels(),r=-1,s=-1,o=e+"_stop",a=e+"_loop",h=0,l=n.length;h<l;++h)if((i=n[h]).label==e)r=i.position;else if(i.label==o||i.label==a){s=i.position;break}return r>=0&&s>0},n.getDuration=function(e,i){if(e.framerate||(e.framerate=t.instance.options.fps||15),"*"==i)return e.totalFrames/e.framerate;for(var n,r=e.getLabels(),s=-1,o=-1,a=i+"_stop",h=i+"_loop",l=0,u=r.length;l<u;++l)if((n=r[l]).label==i)s=n.position;else if(n.label==a||n.label==h){o=n.position;break}return s>=0&&o>0?(o-s)/e.framerate*1e3:0},r.destroy=function(){this.clip=null},namespace("springroll.pixi").AdvancedMovieClipInstance=n,function(){var t=include("springroll.pixi.TextureAtlasTask"),e=include("springroll.pixi.AdvancedMovieClip"),i=function(e){t.call(this,e,e.anim),this.anim=this.filter(e.anim)},n=t.extend(i);i.test=function(e){return!!e.anim&&t.test(e)},n.start=function(t){this.loadAtlas({_anim:this.anim},(function(i,n){var r=new e(n._anim,i);r.__AMC_destroy=r.destroy,r.destroy=function(){r.__AMC_destroy(),i.destroy()},t(r,n)}),!0)},namespace("springroll.pixi").AdvancedMovieClipTask=i}(),function(){var t=include("springroll.Application"),e=namespace("springroll").Animator=namespace("springroll.pixi").Animator={};e.canAnimate=function(e){return t.instance.animator.canAnimate(e)},e.getDuration=function(e,i){return t.instance.animator.getDuration(e,i)},e.getTimeline=function(e){return t.instance.animator.getTimeline(e)},e.instanceHasAnimation=function(e,i){return t.instance.animator.hasAnimation(e,i)},e.pauseInGroup=function(e,i){t.instance.animator.pauseInGroup(e,i)},e.resume=function(){t.instance.animator.resume()},e.stopAll=function(e,i){t.instance.animator.stopAll(e,i)},e.destroy=function(){t.instance.animator.destroy()},e.getPaused=function(e){return t.instance.animator.paused},e.init=function(){return t.intance.animator},e.pause=function(){t.instance.animator.pause()},e.play=function(e,i,n,r){return t.instance.animator.play(e,i,n,r)},e.stop=function(e,i){t.instance.animator.stop(e,i)},e.toString=function(){return"[Animator]"},Object.defineProperties(e,{captions:{get:function(){return t.instance.animator.captions}},debug:{get:function(){return t.instance.animator.debug}}})}()}(),function(){"use strict";var t;!function(t){function e(t){if(!t||"object"!=typeof t)return null;var e=t.constructor();for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var i=include("PIXI.Container"),n=include("PIXI.Point"),r=include("PIXI.Sprite"),s=include("PIXI.extras.BitmapText",!1),o=include("PIXI.Text"),a=include("PIXI.Texture"),h=function(h,l,u){include("springroll.Debug",!1),i.call(this),this.back=new r,this.label=null,this._stateFlags={},this._statePriority=h.priority||c,this._stateData=null,this._currentLabelStyle=null,this._offset=new n,this._width=0,this._height=0,this.addChild(this.back),this._onOver=this._onOver.bind(this),this._onOut=this._onOut.bind(this),this._onDown=this._onDown.bind(this),this._onUp=this._onUp.bind(this),this._onUpOutside=this._onUpOutside.bind(this),this._emitPress=this._emitPress.bind(this);var d,p=this._stateData={};if(l){delete(d=e(l)).text,delete d.type,d.x===t&&(d.x="center"),d.y===t&&(d.y="center");var f=d.style=e(l.style);"bitmap"==l.type?f.align=f.align||"left":(f.font=f.font||"bold 20pt Arial",f.fill=f.fill||"black",f.align=f.align||"left",f.stroke=f.stroke||"black",f.strokeThickness=f.strokeThickness||0,f.wordWrap=f.wordWrap||!1,f.wordWrapWidth=f.wordWrapWidth||100)}for(var g=this._statePriority.length-1;g>=0;--g){var _=this._statePriority[g];this._addProperty(_),"disabled"!=_&&"up"!=_&&(this._stateFlags[_]=!1);var v=h[_];if(v?(v.tex?p[_]={tex:v.tex}:p[_]={tex:v},"string"==typeof p[_].tex&&(p[_].tex=a.fromImage(p[_].tex))):p[_]=p.up,l)if(v&&v.label){v=v.label;var m=p[_].label={};m.style=v.style||d.style,m.x=v.x||d.x,m.y=v.y||d.y}else p[_].label=d}if(p.up,p.over||(p.over=p.up),p.down||(p.down=p.up),p.disabled||(p.disabled=p.up),h.offset?(this._offset.x=h.offset.x,this._offset.y=h.offset.y):this._offset.x=this._offset.y=0,h.scale){var y=h.scale||1;this.back.scale.x=this.back.scale.y=y}l&&(this.label="bitmap"==l.type&&s?new s(l.text,d.style):new o(l.text,d.style),this.label.setPivotToAlign=!0,this.addChild(this.label)),this.back.x=this._offset.x,this.back.y=this._offset.y,this._width=this.back.width,this._height=this.back.height,this.enabled=u===t||!!u},l=extend(h,i);h.BUTTON_PRESS="buttonPress",h.BUTTON_OVER="buttonOver",h.BUTTON_OUT="buttonOut";var u=["disabled","enabled","up","over","down"],c=["disabled","down","over","up"];Object.defineProperty(l,"width",{get:function(){return this._width*this.scale.x},set:function(t){this.scale.x=t/this._width}}),Object.defineProperty(l,"height",{get:function(){return this._height*this.scale.y},set:function(t){this.scale.y=t/this._height}}),l.setText=function(t){if(this.label){this.label.text=t,this.label instanceof o?this.label.updateText():this.label.validate();for(var e,i=0;i<this._statePriority.length;++i)if(this._stateFlags[this._statePriority[i]]){e=this._stateData[this._statePriority[i]];break}if(e||(e=this._stateData.up),"center"==(e=e.label).x){var n=this.back.width,r=this.label.width;switch(this._currentLabelStyle.align){case"center":this.label.position.x=.5*n;break;case"right":this.label.position.x=bw-.5*(n-r);break;default:this.label.position.x=.5*(n-r)}}else this.label.position.x=e.x+this._offset.x;"center"==e.y?this.label.position.y=.5*(this.back.height-this.label.height):this.label.position.y=e.y+this._offset.y}},Object.defineProperty(l,"enabled",{get:function(){return!this._stateFlags.disabled},set:function(t){this._stateFlags.disabled=!t,this.buttonMode=t,this.interactive=t,this.off("mousedown",this._onDown),this.off("touchstart",this._onDown),this.off("mouseover",this._onOver),this.off("mouseout",this._onOut),t?(this.on("mousedown",this._onDown),this.on("touchstart",this._onDown),this.on("mouseover",this._onOver),this.on("mouseout",this._onOut)):(this.off("mouseupoutside",this._onUpOutside),this.off("touchendoutside",this._onUpOutside),this.off("mouseup",this._onUp),this.off("touchend",this._onUp),this._stateFlags.down=this._stateFlags.over=!1,this._over=!1,this._touchDown=!1),this._updateState()}}),l._addProperty=function(t){u.indexOf(t)>=0||Object.defineProperty(this,t,{get:function(){return this._stateFlags[t]},set:function(e){this._stateFlags[t]=e,this._updateState()}})},l._updateState=function(){if(this.back){for(var t,e=0;e<this._statePriority.length;++e)if(this._stateFlags[this._statePriority[e]]){t=this._stateData[this._statePriority[e]];break}if(t||(t=this._stateData.up),this.back.texture=t.tex,this.label){var i=t.label,n=this.label;if(this._currentLabelStyle&&function(t,e){if(t===e)return!0;for(var i in t)if(t[i]!=e[i])return!1;return!0}(this._currentLabelStyle,i.style)||(n.font=i.style.font,n.align=i.style.align,this._currentLabelStyle=i.style,n instanceof o?n.updateText():n.validate()),"center"==i.x){var r=this.back.width,s=n.width;switch(this._currentLabelStyle.align){case"center":n.position.x=.5*r;break;case"right":n.position.x=r-.5*(r-s);break;default:n.position.x=.5*(r-s)}}else n.position.x=i.x+this._offset.x;"center"==i.y?n.position.y=.5*(this.back.height-n.height):n.position.y=i.y+this._offset.y}return t}},l._onOver=function(t){this._stateFlags.over=!0,this._updateState(),this.emit(h.BUTTON_OVER,this)},l._onOut=function(t){this._stateFlags.over=!1,this._updateState(),this.emit(h.BUTTON_OUT,this)},l._onDown=function(t){this._stateFlags.down=!0,this._updateState(),this.on("mouseupoutside",this._onUpOutside),this.on("touchendoutside",this._onUpOutside),this.on("mouseup",this._onUp),this.on("touchend",this._onUp)},l._onUp=function(t){this._stateFlags.down=!1,this.off("mouseupoutside",this._onUpOutside),this.off("touchendoutside",this._onUpOutside),this.off("mouseup",this._onUp),this.off("touchend",this._onUp),this._updateState(),setTimeout(this._emitPress,0)},l._emitPress=function(){this.emit(h.BUTTON_PRESS,this)},l._onUpOutside=function(t){this._stateFlags.down=!1,this.off("mouseupoutside",this._onUpOutside),this.off("touchendoutside",this._onUpOutside),this.off("mouseup",this._onUp),this.off("touchend",this._onUp),this._updateState()},l.destroy=function(){this.removeAllListeners(),this.removeChildren(),this.label=null,this.back=null,this._stateData=null,this._stateFlags=null,this._statePriority=null},namespace("springroll").Button=h,namespace("springroll.pixi").Button=h}(),t=function(t){this.obj=t,this.mouseDownObjPos={x:0,y:0},this.dragOffset=new PIXI.Point,this.mouseDownStagePos={x:0,y:0}},namespace("springroll").DragData=t,namespace("springroll.pixi").DragData=t,function(){var t,e,i,n=include("springroll.pixi.DragData"),r=function(n,r,s){t||(t=include("springroll.Application"),e=include("createjs.Tween",!1),i=include("PIXI.Point")),"function"!=typeof n||s||(s=r,r=n,n=t.instance.display),this.draggedObj=null,this.dragStartThreshold=20,this.mouseDownStagePos=new i(0,0),this.mouseDownObjPos=new i(0,0),this.allowStickyClick=!0,this.isTouchMove=!1,this.isHeldDrag=!1,this.isStickyClick=!1,this.snapSettings=null,this._interaction=n.renderer.plugins.interaction,this._dragOffset=null,this._dragStartCallback=r,this._dragEndCallback=s,this._triggerHeldDrag=this._triggerHeldDrag.bind(this),this._triggerStickyClick=this._triggerStickyClick.bind(this),this._stopDrag=this._stopDrag.bind(this),this._updateObjPosition=this._updateObjPosition.bind(this),this._draggableObjects=[],this._multitouch=!1,this._addedDragListeners=!1,this.helperPoint=new i(0,0)},s=extend(r);Object.defineProperty(s,"multitouch",{get:function(){return this._multitouch},set:function(t){if(this.draggedObj)if(this._multitouch)for(var e in this.draggedObj)this._stopDrag(e,!0);else this._stopDrag(null,!0);this._multitouch=!!t,this.draggedObj=t?{}:null}}),s.startDrag=function(t,e){this._objMouseDown(t,e)},s._objMouseDown=function(t,r){var s,o,a,h;(r.data&&r.data.global&&(r=r.data),!this._multitouch&&this.draggedObj||this._multitouch&&!r)||(this._multitouch?(s=new n(t),this.draggedObj[r.identifier]=s,o=s.mouseDownObjPos,a=s.mouseDownStagePos,h=s.dragOffset):(this.draggedObj=t,o=this.mouseDownObjPos,a=this.mouseDownStagePos,h=this._dragOffset=new i),e&&(e.removeTweens(t),e.removeTweens(t.position)),t._dragOffset?(h.x=t._dragOffset.x,h.y=t._dragOffset.y):(r.getLocalPosition(t.parent,h),h.x-=t.position.x,h.y-=t.position.y),o.x=t.position.x,o.y=t.position.y,r?(a.x=r.global.x,a.y=r.global.y,this.allowStickyClick&&"touchstart"!=r.originalEvent.type?(this._interaction.on("stagemove",this._triggerHeldDrag),this._interaction.on("stageup",this._triggerStickyClick)):(this.isTouchMove="touchstart"==r.originalEvent.type,this.isHeldDrag=!0,this._startDrag(r))):(this.isHeldDrag=!0,this._startDrag()))},s._triggerStickyClick=function(t){t=t.data,this.isStickyClick=!0,this._multitouch?this.draggedObj[t.identifier].obj:this.draggedObj,this._interaction.off("stagemove",this._triggerHeldDrag),this._interaction.off("stageup",this._triggerStickyClick),this._startDrag(t)},s._triggerHeldDrag=function(t){var e;t=t.data,this._multitouch?(this.draggedObj[t.identifier].obj,e=this.draggedObj[t.identifier].mouseDownStagePos):(this.draggedObj,e=this.mouseDownStagePos);var i=t.global.x-e.x,n=t.global.y-e.y;i*i+n*n>=this.dragStartThreshold*this.dragStartThreshold&&(this.isHeldDrag=!0,this._interaction.off("stagemove",this._triggerHeldDrag),this._interaction.off("stageup",this._triggerStickyClick),this._startDrag(t))},s._startDrag=function(t){var e;e=this._multitouch?this.draggedObj[t.identifier].obj:this.draggedObj,this._updateObjPosition({data:t}),this._addedDragListeners||(this._addedDragListeners=!0,this._interaction.on("stagemove",this._updateObjPosition),this._interaction.on("stageup",this._stopDrag)),this._dragStartCallback(e)},s.stopDrag=function(t,e){var i=null;if(this._multitouch&&e)for(var n in this.draggedObj)if(this.draggedObj[n].obj==e){i=n;break}this._stopDrag(i,!0===t)},s._stopDrag=function(t,e){var i,n=null;if("number"==typeof t?n=t:t&&(t.data&&t.data.global?n=t.data.identifier:t instanceof PIXI.interaction.InteractionData&&(n=t.identifier)),this._multitouch){if(null===n){for(n in this.draggedObj)this._stopDrag(n,e);return}var r=this.draggedObj[n];if(!r)return;i=r.obj,this.mouseDownObjPos.x=r.mouseDownObjPos.x,this.mouseDownObjPos.y=r.mouseDownObjPos.y,delete this.draggedObj[n]}else i=this.draggedObj,this.draggedObj=null;if(i){var s=!this._multitouch;if(this._multitouch){var o=!1;for(n in this.draggedObj){o=!0;break}s=!o}s&&this._addedDragListeners&&(this._addedDragListeners=!1,this._interaction.off("stagemove",this._updateObjPosition),this._interaction.off("stageup",this._stopDrag)),this.isTouchMove=!1,this.isStickyClick=!1,this.isHeldMove=!1,!1!==e&&this._dragEndCallback(i)}},s._updateObjPosition=function(t){var e,i;if(t=t.data,this._multitouch){var n=this.draggedObj[t.identifier];e=n.obj,i=n.dragOffset}else e=this.draggedObj,i=this._dragOffset;if(e&&e.parent){var r=t.getLocalPosition(e.parent,this.helperPoint),s=e._dragBounds;if(s?(e.position.x=Math.clamp(r.x-i.x,s.x,s.right),e.position.y=Math.clamp(r.y-i.y,s.y,s.bottom)):(e.position.x=r.x-i.x,e.position.y=r.y-i.y),this.snapSettings)switch(this.snapSettings.mode){case"points":this._handlePointSnap(r,i,e)}}else this.stopDrag(!1,e)},s._handlePointSnap=function(t,e,i){for(var n=this.snapSettings,r=n.dist*n.dist,s=n.points,o=t.x-e.x,a=t.y-e.y,h=-1,l=null,u=s.length-1;u>=0;--u){var c=s[u],d=Math.distSq(o,a,c.x,c.y);d<=r&&(d<h||-1==h)&&(h=d,l=c)}l&&(draggedObj.position.x=l.x,draggedObj.position.y=l.y)};var o=function(){this.on("touchstart",this._onMouseDownListener),this.on("mousedown",this._onMouseDownListener),this.buttonMode=this.interactive=!0},a=function(){this.off("touchstart",this._onMouseDownListener),this.off("mousedown",this._onMouseDownListener),this.buttonMode=this.interactive=!1},h=function(t){this._dragMan._objMouseDown(this,t)};s.addObject=function(t,e,i){e&&(e.right=e.x+e.width,e.bottom=e.y+e.height),t._dragBounds=e,t._dragOffset=i||null,this._draggableObjects.indexOf(t)>=0||(t.enableDrag=o,t.disableDrag=a,t._onMouseDownListener=h.bind(t),t._dragMan=this,this._draggableObjects.push(t))},s.removeObject=function(t){var e=this._draggableObjects.indexOf(t);e>=0&&(t.disableDrag(),delete t.enableDrag,delete t.disableDrag,delete t._onMouseDownListener,delete t._dragMan,delete t._dragBounds,delete t._dragOffset,this._draggableObjects.splice(e,1))},s.destroy=function(){this.stopDrag(!1),this._updateObjPosition=null,this._dragStartCallback=null,this._dragEndCallback=null,this._triggerHeldDrag=null,this._triggerStickyClick=null,this._stopDrag=null,this._interaction=null;for(var t=this._draggableObjects.length-1;t>=0;--t){var e=this._draggableObjects[t];e.disableDrag(),delete e.enableDrag,delete e.disableDrag,delete e._onMouseDownListener,delete e._dragMan,delete e._dragBounds,delete e._dragOffset}this._draggableObjects=null},namespace("springroll").DragManager=r,namespace("springroll.pixi").DragManager=r}()}(),function(){"use strict";var t,e;!function(t){if(!t.PIXI)throw"Requires PIXI";if(!t.createjs||!createjs.Tween)throw"Requires TweenJS";t.pixiflash||(t.pixiflash={Rectangle:PIXI.Rectangle,Tween:createjs.Tween,Ease:createjs.Ease}),t.pixiflash_lib||(t.pixiflash_lib={}),t.pixiflash_images||(t.pixiflash_images={})}(window),t=window,e={addImages:function(e){var i;for(var n in e.textures)i=n.substring(0,n.indexOf(".")),t.pixiflash_images[i]=e.textures[n]},colorToHex:function(t){return/^rgba\(/.test(t)?(t=t.substring(5,t.length-1).split(","),t=65536*parseInt(t[0])+256*parseInt(t[1])+parseInt(t[2])):t=parseInt(t.replace(/^#/,""),16),t}},pixiflash.utils=e,function(t){var e=PIXI.filters.ColorMatrixFilter,i=function(t,i,n,r,s,o,a,h){if(0>t&&(t=0),0>i&&(i=0),0>n&&(n=0),s||o||a)e.call(this),this.isTintOnly=!1,this.uniforms.m.value=[t,0,0,0,s/255,0,i,0,0,o/255,0,0,n,0,a/255,0,0,0,r,h/255];else{this.isTintOnly=!0,this.tint=Math.round(255*t)<<16|Math.round(255*i)<<8|Math.round(255*n)}},n=e.prototype;i.prototype=Object.create(n),pixiflash.ColorFilter=i}(),pixiflash.ColorMatrix=function(t,e,i,n){this.brightness=t||0,this.contrast=e||0,this.saturation=i||0,this.hue=n||0},function(t){var e=PIXI.filters.ColorMatrixFilter,i=function(t){if(e.call(this),0!==t.hue&&this.hue(t.hue,!0),0!==t.contrast&&this.contrast(t.contrast/100,!0),0!==t.brightness){var i=t.brightness/255,n=[1,0,0,0,i,0,1,0,0,i,0,0,1,0,i,0,0,0,1,0];this._loadMatrix(n,!0)}0!==t.saturation&&this.saturate(t.saturation/100,!0)},n=e.prototype;i.prototype=Object.create(n),pixiflash.ColorMatrixFilter=i}(),function(t){var e=PIXI.filters.BlurFilter,i=function(t,i,n){e.call(this),this.blurX=t,this.blurY=i,this.passes=n,this.padding=.5*Math.max(Math.abs(t),Math.abs(i))},n=e.prototype;i.prototype=Object.create(n),pixiflash.BlurFilter=i}(),function(t){var e=PIXI.Point,i=pixiflash.ColorFilter,n=0,r=function(){this.id=++n,this._isPixiFlash=!0,this.skew=new e,this._rotation=0,this._srB=0,this._srC=0,this._crA=1,this._crD=1,this._cachedRotY=0,this._cachedRotX=0,this.tickEnabled=!0,this.removeAllListeners(),this.boundMaskChanged=!1,this._lastComputedTint=this._lastSelfTint=this._lastParentTint=this._selfTint=16777215,this.__filters=null},s=r.prototype,o=Math.PI/180,a=180/Math.PI,h=2*Math.PI;Object.defineProperties(s,{_filters:{enumerable:!0,get:function(){return this.__filters},set:function(t){if(t)if(1==t.length&&t[0]instanceof i&&t[0].isTintOnly)this.tint=t[0].tint,this.__filters=null;else{this.__filters=[];for(var e=0;e<t.length;++e)t[e]instanceof i&&t[e].isTintOnly?this.tint=t[e].tint:this.__filters.push(t[e])}else this.__filters=null}},tint:{enumerable:!0,get:function(){var t=this.parent;if(t&&t._isPixiFlash){var e=this._selfTint,i=t.tint;if(16777215==e)this._lastComputedTint=i;else if(16777215==i)this._lastComputedTint=e;else if(e!=this._lastSelfTint||i!=this._lastParentTint){var n=i>>16&255,r=i>>8&255,s=255&i,o=e>>16&255,a=e>>8&255,h=255&e;this._lastComputedTint=Math.round(n*o/255)<<16|Math.round(r*a/255)<<8|Math.round(s*h/255)}return this._lastSelfTint=e,this._lastParentTint=i,this._lastComputedTint}return this._selfTint},set:function(t){this._selfTint=t}},skewX:{enumerable:!0,get:function(){return this.skew.x*a},set:function(t){this.skew.x=t*o}},skewY:{enumerable:!0,get:function(){return this.skew.y*a},set:function(t){this.skew.y=t*o}},rotation:{enumerable:!0,get:function(){return this._rotation*a},set:function(t){this._rotation=t*o}},scaleX:{enumerable:!0,get:function(){return this.scale.x},set:function(t){this.scale.x=t}},scaleY:{enumerable:!0,get:function(){return this.scale.y},set:function(t){this.scale.y=t}},regX:{enumerable:!0,get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},regY:{enumerable:!0,get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},mask:{enumerable:!0,get:function(){return this._mask},set:function(t){var e=this._maskShape;e&&t!=e&&(--e._maskUses<1&&e.parent&&e.parent.removeChild(e),e.off("graphicsChanged",this.onShapeChanged)),this._mask&&(this._mask.renderable=!0),t&&t instanceof pixiflash.Shape?(this.boundMaskChanged||(this.boundMaskChanged=!0,this.onShapeChanged=this.onShapeChanged.bind(this),this.onAddedWithMask=this.onAddedWithMask.bind(this)),e!=t&&(++(e=this._maskShape=t)._maskUses,e.on("graphicsChanged",this.onShapeChanged)),t.graphics.graphicsData.length?this._mask=t.graphics:this._mask=null):this._mask=t,t||this._hasAddedEvent&&(this.off("added",this.onAddedWithMask),this._hasAddedEvent=!1),this._mask&&(this.parent?t.parent!=this.parent&&this.parent.addChild(t):this._hasAddedEvent||(this._hasAddedEvent=!0,this.once("added",this.onAddedWithMask)),this._mask.renderable=!1)}}}),s.onAddedWithMask=function(){if(this._mask){var t=this._maskShape||this._mask;t.parent!=this.parent&&this.parent.addChild(t)}},s.cache=function(){},s.onShapeChanged=function(t){this.mask=t},s.displayObjectUpdateTransform=function(){var t,e,i,n,r,s,o=this.parent.worldTransform,a=this.worldTransform,l=this.scale,u=this.skew,c=this.position,d=this.pivot,p=this._rotation+u.y,f=this._rotation+u.x;p%h||f%h?((f!==this._cachedRotX||p!==this._cachedRotY)&&(this._cachedRotX=f,this._cachedRotY=p,this._crA=Math.cos(p),this._srB=Math.sin(p),this._srC=Math.sin(-f),this._crD=Math.cos(f)),t=this._crA*l.x,e=this._srB*l.x,i=this._srC*l.y,n=this._crD*l.y,r=c.x,s=c.y,(d.x||d.y)&&(r-=d.x*t+d.y*i,s-=d.x*e+d.y*n),a.a=t*o.a+e*o.c,a.b=t*o.b+e*o.d,a.c=i*o.a+n*o.c,a.d=i*o.b+n*o.d,a.tx=r*o.a+s*o.c+o.tx,a.ty=r*o.b+s*o.d+o.ty):(t=l.x,n=l.y,r=c.x-d.x*t,s=c.y-d.y*n,a.a=t*o.a,a.b=t*o.b,a.c=n*o.c,a.d=n*o.d,a.tx=r*o.a+s*o.c+o.tx,a.ty=r*o.b+s*o.d+o.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},s.setTransform=function(t,e,i,n,r,s,o,a,h){return this.position.x=t||0,this.position.y=e||0,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r||0,this.skewX=s||0,this.skewY=o||0,this.pivot.x=a||0,this.pivot.y=h||0,this},r.mixin=function(t){for(var e in s){var i=Object.getOwnPropertyDescriptor(s,e);i?Object.defineProperty(t,e,i):t[e]=s[e]}},pixiflash.DisplayObject=r}(),function(t){var e=PIXI.Container,i=pixiflash.DisplayObject,n=PIXI.ticker.shared,r=function(){e.call(this),i.call(this),this.tickChildren=!0,this.once("added",function(){this._tickListener=this._tickListener.bind(this),this._onAdded(),this._onAdded=this._onAdded.bind(this),this._onRemoved=this._onRemoved.bind(this),this.on("added",this._onAdded),this.on("removed",this._onRemoved)}.bind(this))},s=e.prototype,o=r.prototype=Object.create(s);i.mixin(o),o.initialize=r,o.__Container_addChild=o.addChild,o.addChild=function(t){for(var e=0;e<arguments.length;e++)this.__Container_addChild(arguments[e])},o._onAdded=function(){this.parent._isPixiFlash||n.add(this._tickListener)},o._tickListener=function(t){var e=t/n.speed/PIXI.TARGET_FPMS;this._tick(e)},o._onRemoved=function(){this._tickListener&&n.remove(this._tickListener)},o._tick=o.Container__tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick?i._tick(t):i.tickChildren&&i.Container__tick&&i.Container__tick(t)}},o.__Container_destroy=o.destroy,o.destroy=function(t){this._tickListener&&(n.remove(this._tickListener),this._tickListener=null),this.__Container_destroy(t)},pixiflash.Container=r}(),function(t){var e=PIXI.Sprite,i=pixiflash.DisplayObject,n=function(t){e.call(this,t),i.call(this)},r=n.prototype=Object.create(e.prototype);i.mixin(r),r.initialize=n,pixiflash.Bitmap=n}(),function(t){function e(){throw"MovieClipPlugin cannot be instantiated."}var i=PIXI.Container,n=pixiflash.DisplayObject,r=createjs.Timeline,s=createjs.Tween,o=PIXI.ticker.shared,a=function(t,e,s,o){a.inited||a.init(),i.call(this),n.call(this),this.tickChildren=!0,this.mode=t||a.INDEPENDENT,this.startPosition=e||0,this.loop=s,this.currentFrame=0,this.timeline=new r(null,o,{paused:!0,position:e,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._framerate=0,this._duration=0,this._managed={},this.once("added",function(){this._tickListener=this._tickListener.bind(this),this._onAdded(),this._onAdded=this._onAdded.bind(this),this._onRemoved=this._onRemoved.bind(this),this.on("added",this._onAdded),this.on("removed",this._onRemoved)}.bind(this))};a.inited=!1,a.init=function(){a.inited||(e.install(),a.inited=!0)},a.INDEPENDENT="independent",a.SINGLE_FRAME="single",a.SYNCHED="synched";var h=a.prototype=Object.create(i.prototype);n.mixin(h),h.initialize=a,h._onAdded=function(){this.parent._isPixiFlash||o.add(this._tickListener)},h._tickListener=function(t){var e=t/o.speed/PIXI.TARGET_FPMS;this._tick(e)},h._onRemoved=function(){this._tickListener&&o.remove(this._tickListener)},h.getLabels=function(){return this.timeline.getLabels()},h.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()};try{Object.defineProperties(h,{labels:{get:h.getLabels},currentLabel:{get:h.getCurrentLabel}})}catch(t){}Object.defineProperty(h,"elapsedTime",{get:function(){return this._t},set:function(t){this._t=t}}),Object.defineProperty(h,"framerate",{get:function(){return this._framerate},set:function(t){t>0?(this._framerate=t,this._duration=t?this.timeline.duration/t:0):this._framerate=this._duration=0}}),h.play=function(){this.paused=!1},h.stop=function(){this.paused=!0},h.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},h.gotoAndStop=function(t){this.paused=!0,this._goto(t)},h.advance=function(t){var e=a.INDEPENDENT;if(this.mode==e){if(!this._framerate){for(var i=this,n=i._framerate;(i=i.parent)&&!n;)i.mode==e&&(n=i._framerate);this.framerate=n}this.paused||(this._framerate>0?(t&&(this._t+=.001*t),this._t>this._duration&&(this._t=this.timeline.loop?this._t-this._duration:this._duration),this._prevPosition=Math.floor(this._t*this._framerate+1e-8),this._prevPosition>this.timeline.duration&&(this._prevPosition=this.timeline.duration)):this._prevPosition=this._prevPos<0?0:this._prevPosition+1)}},h._tick=function(t){this.tickEnabled&&this.advance(t),this._updateTimeline(),this.Container__tick(t)},h.Container__tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick?i._tick(t):i.tickChildren&&i.Container__tick&&i.Container__tick(t)}},h._goto=function(t){var e=this.timeline.resolve(t);null!=e&&(-1==this._prevPos&&(this._prevPos=NaN),this._prevPosition=e,this._framerate>0?this._t=e/this._framerate:this._t=0,this._updateTimeline())},h._reset=function(){this._prevPos=-1,this._t=0,this.currentFrame=0},h._updateTimeline=function(){var t=this.timeline,e=this.mode!=a.INDEPENDENT;if(t.loop=null==this.loop||this.loop,e?t.setPosition(this.startPosition+(this.mode==a.SINGLE_FRAME?0:this._synchOffset),s.NONE):t.setPosition(this._prevPos<0?0:this._prevPosition,this.actionsEnabled?null:s.NONE),this._prevPosition=t._prevPosition,this._prevPos!=t._prevPos){for(var n in this.currentFrame=this._prevPos=t._prevPos,this._managed)this._managed[n]=1;for(var r=t._tweens,o=0,h=r.length;h>o;o++){var l=r[o],u=l._target;if(u!=this&&!l.passive){var c=l._stepPosition;u instanceof i?this._addManagedChild(u,c):this._setState(u.state,c)}}var d=this.children;for(o=d.length-1;o>=0;o--){var p=d[o].id;1==this._managed[p]&&(this.removeChildAt(o),delete this._managed[p])}}},h._setState=function(t,e){if(t)for(var i=t.length-1;i>=0;i--){var n=t[i],r=n.t,s=n.p;for(var o in s)r[o]=s[o];this._addManagedChild(r,e)}},h._addManagedChild=function(t,e){t._off||(this.addChildAt(t,0),t instanceof a&&(t._synchOffset=e,t._updateTimeline(),t.mode==a.INDEPENDENT&&t.autoReset&&!this._managed[t.id]&&t._reset()),this._managed[t.id]=2)},h.__Container_destroy=h.destroy,h.destroy=function(t){this._tickListener&&(o.remove(this._tickListener),this._tickListener=null),this.__Container_destroy(t)},pixiflash.MovieClip=a,e.priority=100,e.install=function(){s.installPlugin(e,["startPosition"])},e.init=function(t,e,i){return i},e.step=function(){},e.tween=function(t,e,i,n,r,s,o,h){return t.target instanceof a?1==s?r[e]:n[e]:i}}(),function(){var t=PIXI.Rectangle,e=PIXI.Texture,i=PIXI.loaders.Loader,n=function(t){this.frames=[],this._id=null,t&&this._addFrames(t)},r=n.prototype;r._addFrames=function(i){for(var n,r=0;r<i.frames.length;r++)n=i.frames[r],this.frames.push(new e(i.images[n[4]||0],new t(n[0],n[1],n[2],n[3])))},r.getFrame=function(t){return this.frames[t]||null},r.destroy=function(){this._id&&(delete window.ss[this._id],this._id=null),this.frames&&(this.frames.forEach((function(t){t.destroy(!0)})),this.frames=null)},r.addToGlobal=function(t){window.ss=window.ss||{},this._id=t,window.ss[t]=this},n.fromData=function(t,e){for(var r,s,o=new n,a={frames:t.frames.slice(),images:t.images.slice()},h=new i,l=0;l<a.images.length;l++)if(s=a.images[l],h.add(s,s),!r){var u=(r=s).lastIndexOf("/");u>-1&&(r=s.substr(u+1)),r=r.substr(0,r.lastIndexOf(".")),o.addToGlobal(r)}h.once("complete",(function(t,i){for(var n in i){var r=a.images.indexOf(n);a.images[r]=i[n].texture.baseTexture}o._addFrames(a),e(o)})),h.load()},pixiflash.SpriteSheet=n}(),function(t){var e=PIXI.Sprite,i=pixiflash.DisplayObject,n=function(){e.call(this),i.call(this),this.spriteSheet=null},r=n.prototype=Object.create(e.prototype);i.mixin(r),r.initialize=n,r.gotoAndStop=function(t){if(!this._initialized){var e=this.spriteSheet;this.initialize(),this.spriteSheet=e,this._initialized=!0}if(!this.spriteSheet)throw"Sprite doesn't have a spriteSheet";this.texture=this.spriteSheet.getFrame(t)},pixiflash.Sprite=n}(),function(t){var e=PIXI.Graphics,i=pixiflash.utils,n=pixiflash.DisplayObject,r=function(){e.call(this),n.call(this)},s=e.prototype,o=r.prototype=Object.create(s);n.mixin(o),o.initialize=r,pixiflash.Graphics=r;var a={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};o.mt=o.moveTo,o.lt=function(t,e){return this.op().lineTo(t,e)},o.bt=function(t,e,i,n,r,s){return this.op().bezierCurveTo(t,e,i,n,r,s)},o.dr=o.r=o.drawRect,o.rr=o.drawRoundedRect,o.rc=function(t,e,i,n,r,s,o,a){return this.rr(t,e,i,n,r)},o.dc=o.drawCircle,o.a=function(t,e,i,n,r,s){return this.op().arc(t,e,i,n,r,s)},o.at=function(t,e,i,n,r){return this.op().arcTo(t,e,i,n,r)},o.de=function(t,e,i,n){return this.drawEllipse(t+i/2,e+n/2,i/2,n/2)},o.qt=function(t,e,i,n){return this.op().quadraticCurveTo(t,e,i,n)},o.cp=function(){var t=this.currentPath;return t&&t.shape&&(t.shape.closed=!0),this},o.op=function(){var t=this.currentPath;return t&&t.shape&&(t.shape.closed=!1),this},o.f=function(t){if(t){var e=i.colorToHex(t),n=h(t);this.beginFill(e,n)}else this.beginFill(0,0);return this},o.lf=function(t){return this.f(t[0])},o.rf=function(t){return this.f(t[0])},o.bf=function(){return this.f("#000000")},o.sd=function(){return this},o.bs=function(){return this},o.ls=function(){return this},o.rs=function(){return this},o.ss=function(t,e,i,n,r){return this.lineWidth=t,this},o.s=function(t){return t&&(this.lineColor=i.colorToHex(t),this.lineAlpha=1),this},o.p=function(t){this.filling||this.beginFill();for(var e=[this.mt,this.lt,this.qt,this.bt,this.cp],i=[2,2,4,6,0],n=0,r=t.length,s=[],o=0,h=0,l=a;r>n;){var u=t.charAt(n),c=l[u],d=c>>3,p=e[d];if(!p||3&c)throw"bad path data (@"+n+"): "+u;var f=i[d];d||(o=h=0),s.length=0,n++;for(var g=2+(c>>2&1),_=0;f>_;_++){var v=l[t.charAt(n)],m=v>>5?-1:1;v=(31&v)<<6|l[t.charAt(n+1)],3==g&&(v=v<<6|l[t.charAt(n+2)]),v=m*v/10,_%2?o=v+=o:h=v+=h,s[_]=v,n+=g}p.apply(this,s)}return this};var h=function(t){return/^rgba\(/.test(t)?parseFloat(t.substring(t.lastIndexOf(",")+1,t.lastIndexOf(")"))):1}}(),function(t){var e=PIXI.Container,i=pixiflash.Graphics,n=pixiflash.DisplayObject,r=function(){e.call(this),n.call(this),this.graphics=new i,this._maskUses=0},s=e.prototype,o=r.prototype=Object.create(s);n.mixin(o),o.initialize=r,pixiflash.Shape=r,Object.defineProperty(o,"graphics",{get:function(){return this._graphics},set:function(t){this._graphics&&this.removeChild(this._graphics),this._graphics=t,t&&this.addChild(t),this.emit("graphicsChanged",this)}}),o.destroy=function(t){this.graphics=null,s.destroy.call(this,t)}}(),function(t){var e=PIXI.Text,i=pixiflash.DisplayObject,n=function(t,n,r){e.call(this,t,{font:n,fill:r,padding:10}),i.call(this)},r=n.prototype=Object.create(e.prototype);Object.defineProperties(r,{textAlign:{set:function(t){this.anchor.x="center"==t?.5:"right"==t?1:0,this.style.align=t},get:function(){return this.style.align}},lineHeight:{set:function(t){this.style.lineHeight=t},get:function(){return this.style.lineHeight}},lineWidth:{set:function(t){this.style.wordWrapWidth=t},get:function(){return this.style.wordWrapWidth}},shadow:{set:function(t){this.style.dropShadow=!!t,t&&(this.style.dropShadowColor=t.color)}}}),i.mixin(r),r.initialize=n,pixiflash.Text=n}(),function(t){var e=(pixiflash.utils,function(t,e,i,n){this.color=t});pixiflash.Shadow=e}()}(),function(){"use strict";var t,e;e=(t=function(t,e,i,n){this.dom=e,this.symbols=[],this.libName=i||"lib",this.id=t,this.parseSymbols(e.text,n)}).prototype,t.globalSymbols={},e.parseSymbols=function(e,i){for(var n=e.split(/[\(!]function\s*\(/),r=t.globalSymbols,s=0;s<n.length;++s)if(e=n[s]){var o=e.substring(0,e.indexOf(","));if(o)for(var a,h=new RegExp("\\("+o+".(\\w+)\\s*=","g"),l=h.exec(e);l;)a=l[1],this.symbols.push(a),r[a]=this.id,l=h.exec(e)}},e.destroy=function(){this.dom.parentNode.removeChild(this.dom),this.dom=null;var e=t.globalSymbols,i=window[this.libName];this.symbols.forEach((function(t){delete e[t],delete i[t]})),this.symbols=null},namespace("pixiflash").FlashArt=t,function(){var t=include("springroll.Task"),e=include("pixiflash.FlashArt"),i=include("springroll.pixi.TextureAtlas"),n=include("PIXI.Texture"),r=function(e){t.call(this,e,e.src),this.src=this.filter(e.src),this.images=e.images,this.libName="pixiflash_lib",this.imagesName="pixiflash_images",this.suppressWarnings=!!e.suppress},s=extend(r,t);r.test=function(t){return t.src&&t.src.search(/\.js$/i)>-1&&"pixi"==t.type&&"pixiflash.FlashArt"==t.format&&t.images&&Array.isArray(t.images)},s.start=function(t){for(var r,s,o=[],a=0,h=0;h<this.images.length;++h)if(this.images[h].atlas)s=this.images[h],r={atlas:this.filter(s.atlas),id:"asset_"+a++,type:"pixi"},s.image?r.image=this.filter(s.image):(r.alpha=this.filter(s.alpha),r.color=this.filter(s.color)),o.push(r);else if("pixiflash.SpriteSheet"==this.images[h].format){if(s=this.images[h].clone(),o.push(s),s.type||(s.type="pixi"),!s.id){var l=s.src;l=(l=l.substr(0,l.lastIndexOf("."))).substr(l.lastIndexOf("/")+1),s.id=l}}else{if(!(s="string"==typeof this.images[h]?{image:this.filter(this.images[h])}:this.images[h].clone()).id){var u=s.image||s.color,c=u.lastIndexOf(".");c>-1&&(u=u.substr(0,c));var d=u.lastIndexOf("/");d>-1&&(u=u.substr(d+1)),s.id=u}s.type="pixi",o.push(s)}var p={_flash:this.src};o.length&&(p._images={assets:o}),this.load(p,function(r){var s=new e(this.id,r._flash,this.libName,this.suppressWarnings),o=r._images;if(o){var a=[],h=[],l=namespace(this.imagesName);for(var u in o){var c=o[u];if(a.push(c),c instanceof n)l[u]=c,h.push(u);else if(c instanceof i){var d=c.frames;for(var p in d)l[p]=d[p],h.push(p)}}s._orig_destroy=s.destroy,s.destroy=function(){var t;for(t=a.length-1;t>=0;--t)a[t].destroy?a[t].destroy():a[t].dispatchEvent("destroy");for(t=h.length-1;t>=0;--t)delete l[h[t]];s._orig_destroy()}}t(s)}.bind(this))},namespace("pixiflash").FlashArtTask=r}(),function(t){var e=include("pixiflash.MovieClip"),i=include("springroll.AnimatorInstance"),n=include("springroll.GenericMovieClipInstance"),r=function(){n.call(this)};r.test=function(t){return t instanceof e},r.hasAnimation=n.hasAnimation,r.getDuration=n.getDuration;var s=(n.prototype,i.extend(r,n));s._Generic_beginAnim=s.beginAnim,s.beginAnim=function(t,e){this._Generic_beginAnim(t,e),this.clip._updateTimeline()},s._Generic_setPosition=s.setPosition,s.setPosition=function(t){this._Generic_setPosition(t),this.clip._updateTimeline()},namespace("pixiflash").MovieClipInstance=r}(),(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("pixiflash.FlashArtTask",60),this.assetManager.register("pixiflash.SpriteSheetTask",70),this.animator.register("pixiflash.MovieClipInstance",10)},function(){var t=include("springroll.LoadTask"),e=include("pixiflash.SpriteSheet"),i=(include("springroll.pixi.TextureAtlas"),include("PIXI.Texture"),function(e){t.call(this,e,e.src),this.images=e.images}),n=(t.prototype,extend(i,t));i.test=function(t){return t.src&&t.src.search(/\.json$/i)>-1&&"pixi"==t.type&&"pixiflash.SpriteSheet"==t.format},n.start=function(t){this.load(this.src,function(i){var n=[];this.images&&this.images.length&&(i.images=this.images),i.images.forEach((function(t){"string"==typeof t&&(t={image:t,type:"pixi"}),n.push(t)}));var r=this.id;this.load(n,(function(n){i.images.forEach((function(t,e){i.images[e]=n[e].baseTexture}));var s=new e(i);s.addToGlobal(r),t(s)}))}.bind(this))},namespace("pixiflash").SpriteSheetTask=i}()}(),function(){"use strict";var t,e;t=function(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0},(e=extend(t)).clone=function(){return new t(this.x,this.y,this.radius)},e.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,n=this.y-e;return(i*=i)+(n*=n)<=this.radius*this.radius},e.constructor=t,namespace("springroll.native").Circle=t,function(){var t=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},e=extend(t);e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width-.5,n=(e-this.y)/this.height-.5;return(i*=i)+(n*=n)<.25},t.getBounds=function(){return new Rectangle(this.x,this.y,this.width,this.height)},e.constructor=t,namespace("springroll.native").Ellipse=t}(),function(){var t=function(t,e){this.x=t||0,this.y=e||0},e=extend(t);e.clone=function(){return new t(this.x,this.y)},e.dotProd=function(t){return this.x*t.x+this.y*t.y},e.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.lengthSq=function(){return this.x*this.x+this.y*this.y},e.normalize=function(){var t=1/this.length();this.x*=t,this.y*=t},e.subtract=function(t){this.x-=t.x,this.y-=t.y},e.add=function(t){this.x+=t.x,this.y+=t.y},e.truncate=function(t){var e=this.length();if(e>t){var i=t/e;this.x*=i,this.y*=i}},e.scaleBy=function(t){this.x*=t,this.y*=t},e.toJSON=function(){return{__classname:"springroll.native.Point",x:this.x,y:this.y}},e.fromJSON=function(t){this.x=t.x,this.y=t.y},e.toString=function(){return"("+this.x+", "+this.y+")"},e.constructor=t,namespace("springroll.native").Point=t}(),function(){var t=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],i=0,n=t.length;i<n;i+=2)e.push(new Point(t[i],t[i+1]));t=e}this.points=t},e=extend(t);e.clone=function(){for(var e=[],i=0,n=this.points.length;i<n;i++)e.push(this.points[i].clone());return new t(e)},e.contains=function(t,e){for(var i,n,r,s,o,a,h=!1,l=this.points,u=0,c=l.length,d=l.length-1;u<c;d=u++)i=l[u],n=l[d],r=i.x,s=i.y,o=n.x,s>e!=(a=n.y)>e&&t<(o-r)*(e-s)/(a-s)+r&&(h=!h);return h},e.constructor=t,namespace("springroll.native").Polygon=t}(),function(){var t=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},e=extend(t);e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var n=this.y;if(e>=n&&e<=n+this.height)return!0}return!1},e.toString=function(){return"("+this.x+", "+this.y+", "+this.width+", "+this.height+")"},e.constructor=t,namespace("springroll.native").Rectangle=t}(),function(t){var e={};e.Circle=include("springroll.native.Circle"),e.Ellipse=include("springroll.native.Ellipse"),e.Rectangle=include("springroll.native.Rectangle"),e.Sector=null,e.Point=include("springroll.native.Point"),e.Polygon=include("springroll.native.Polygon"),e.useRadians=!0,e.getLocalBounds=function(t){return{}},e.getScale=function(t,e){return{x:1,y:1}},e.setPosition=function(t,e,i){return t},e.getPosition=function(t,e){},e.setScale=function(t,e,i){},e.setPivot=function(t,e,i){},e.setHitArea=function(t,e){},e.getBitmapSize=function(t){return{w:t.width,h:t.height}},e.removeChildren=function(t){},namespace("springroll.native").DisplayAdapter=e}(),function(t){var e=include("springroll.AbstractDisplay"),i=function(t,i){e.call(this,t,i),i=i||{},this.stage=this.canvas.getContext(i.contextId||"2d"),this.adapter=include("springroll.native.DisplayAdapter")};e.extend(i),namespace("springroll").NativeDisplay=i,namespace("springroll.native").NativeDisplay=i}()}(),function(){"use strict";var t,e,i,n;t=include("PIXI.Texture"),e=function(e,i,n,r,s,o){var a;e.trim?a=e.trim.clone():(a=e.crop.clone()).x=a.y=0,t.call(this,e.baseTexture,e.frame.clone(),e.crop.clone(),a),this.useHeight=!!i,this.invertScaling=!!s,this.invertScaling&&(this.origPos=this.useHeight?this.crop.y:this.crop.x,this.origTrim=this.useHeight?this.trim.y:this.trim.x),this.min=n||0,this.max=void 0===r?this.useHeight?this.crop.height:this.crop.width:r,this.useRounding=!!o,this.setPercent(1)},i=extend(e,t),n=t.prototype,i.setPercent=function(t){0>t?t=0:t>1&&(t=1);var e=this.min+(this.max-this.min)*t;this.invertScaling?this.useHeight?(this.crop.y=this.origPos+(this.max-e),this.crop.height=e,this.trim.y=this.origTrim+(this.max-e)):(this.crop.x=this.origPos+(this.max-e),this.crop.width=e,this.trim.x=this.origTrim+(this.max-e)):this.useHeight?this.crop.height=e:this.crop.width=e,this.useRounding&&(this.crop.width|=0,this.crop.height|=0),this._updateUvs()},i.destroy=function(t){n.destroy.call(this,t)},namespace("springroll.pixi").PercentTexture=e}(),function(){"use strict";!function(){var t=include("PIXI.Point",!1)||include("createjs.Point",!1),e=include("PIXI.Rectangle",!1)||include("createjs.Rectangle",!1);if(!t||!e)throw"collision.Polygon requires Point and Rectangle from either PIXI or createjs!";e.prototype.intersects||(e.prototype.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height});var i=function(i,n,r){this.isRectangle=!!r,this._curRotation=0,this.aabb=new e,this.aabbIsDirty=!0,this.origin=new t(0,0),this._scale=1,this.points=[],this.edges=[];for(var s,o=null,a=0,h=i.length;h>a;++a)s=i[a],o&&this.edges.push(new t(s.x-o.x,s.y-o.y)),this.points.push(new t(s.x,s.y)),o=s;s=i[0],this.edges.push(new t(s.x-o.x,s.y-o.y)),n&&"number"==typeof n&&(this.scale=n)},n=i.prototype={};Object.defineProperty(n,"scale",{get:function(){return this._scale},set:function(t){if(t!=this._scale&&t==t){var e=t/this._scale;this._scale=t;var i,n,r,s,o,a=this.points,h=this.edges;for(i=0,n=a.length;n>i;++i){var l=(r=a[i]).x*e,u=r.y*e;r.x=l,r.y=u,s&&((o=h[i-1]).x=l-s.x,o.y=u-s.y),s=r}r=a[0],(o=h[i-1]).x=r.x-s.x,o.y=r.y-s.y,this.aabbIsDirty=!0}}});var r=Math.PI/180;Object.defineProperty(n,"rotation",{get:function(){return this._curRotation},set:function(t){if(t!=this._curRotation&&t==t){var e,i,n,s,o,a=this.points,h=this.edges,l=(newRotation-this._curRotation)*r;this._curRotation=newRotation;var u=Math.sin(l),c=Math.cos(l);for(e=0,i=a.length;i>e;++e){var d=(n=a[e]).x*c-n.y*u,p=n.x*u+n.y*c;n.x=d,n.y=p,s&&((o=h[e-1]).x=d-s.x,o.y=p-s.y),s=n}n=a[0],(o=h[e-1]).x=n.x-s.x,o.y=n.y-s.y,this.aabbIsDirty=!0}}}),n.calcAABB=function(){var t,e,i,n=this.aabb,r=this.points,s=this.origin,o=1/0,a=-1/0,h=1/0,l=-1/0;for(e=0,i=r.length;i>e;++e){var u=(t=r[e]).x,c=t.y;o>u&&(o=u),u>a&&(a=u),h>c&&(h=c),c>l&&(l=c)}n.x=o+s.x,n.y=h+s.y,n.width=a-o,n.height=l-h},n.updateOrigin=function(t,e){this.origin.x=t,this.origin.y=e,this.aabbIsDirty=!0},n.resetPositioning=function(){this.origin.x=this.origin.y=0,this.rotation=0,this.aabbIsDirty=!0},n.contains=function(t,e,i){var n=!1;i||(t-=this.origin.x,e-=this.origin.y);for(var r,s,o,a,h,l,u=this.points,c=0,d=u.length,p=u.length-1;d>c;p=c++)r=u[c],s=u[p],o=r.x,a=r.y,h=s.x,a>e!=(l=s.y)>e&&(h-o)*(e-a)/(l-a)+o>t&&(n=!n);return n},n.toString=function(){return"[collision.Polygon - points: "+this.points.join(",")+"]"},n.destroy=function(){this.origin=this.edges=this.points=null},i.fromCircle=function(t,e){e>=4||(e=4);for(var n=t.x,r=t.y,s=t.radius||t.r||1,o=2*Math.PI/e,a=[],h=0;e>h;++h)a.push({x:n+Math.cos(o*h)*s,y:r+Math.sin(o*h)*s});return new i(a,1,4==e)},i.fromEllipse=function(t,e){e>=4||(e=6);for(var n=t.x,r=t.y,s=(t.width||t.w)/2,o=(t.height||t.h)/2,a=2*Math.PI/e,h=[],l=0;e>l;++l)h.push({x:n+Math.cos(a*l)*s,y:r+Math.sin(a*l)*o});return new i(h,1,4==e)},i.fromRect=function(t){var e=t.x,n=t.y,r=t.width||t.w,s=t.height||t.h;return new i([{x:e,y:n},{x:e+r,y:n},{x:e+r,y:n+s},{x:e,y:n+s}],1,!0)},namespace("collision").Polygon=i}(),function(){var t=include("PIXI.Point",!1)||include("createjs.Point",!1),e={},i=new t(0,0),n={min:0,max:0},r={min:0,max:0};e.checkPolygonCollision=function(t,e){if(t.aabbIsDirty&&t.calcAABB(),e.aabbIsDirty&&e.calcAABB(),!t.aabb.intersects(e.aabb))return!1;var o=t.edges,a=o.length;t.isRectangle&&(a/=2);var h=e.edges,l=h.length;e.isRectangle&&(l/=2);var u,c=i;n.min=0,n.max=0,r.min=0,r.max=0;for(var d=0,p=a+l;p>d;d++){u=a>d?o[d]:h[d-a],c.x=-u.y,c.y=u.x,c.normalize(),s(c,t,n),s(c,e,r);var f=n.min,g=n.max,_=r.min,v=r.max;if((_>f?_-g:f-v)>0)return!1}return!0};var s=function(t,e,i){for(var n=e.points,r=e.origin.x,s=e.origin.y,a=t.x,h=t.y,l=n[0],u=o(l.x+r,l.y+s,a,h),c=u,d=u,p=1,f=n.length;f>p;p++)l=n[p],c>(u=o(l.x+r,l.y+s,a,h))?c=u:u>d&&(d=u);i.min=c,i.max=d},o=function(t,e,i,n){return t*i+e*n};e.getLineIntersection=function(t,e,i,n,r,s,o,a,h){var l,u,c,d,p,f,g=1/(-(c=o-r)*(u=n-e)+(l=i-t)*(d=a-s));return f=(c*(e-s)-d*(t-r))*g,(p=(-u*(t-r)+l*(e-s))*g)>=0&&1>=p&&f>=0&&1>=f&&(h&&(h.x=t+f*l,h.y=e+f*u),!0)},e.getLinePolygonCollision=function(t,i,n,r,s,o){s.aabbIsDirty&&s.calcAABB();for(var a=s.points,h=s.origin.x,l=s.origin.y,u=a[0],c=a.length-1;c>=0;--c){var d=a[c];if(e.getLineIntersection(t,i,n,r,h+d.x,l+d.y,h+u.x,l+u.y,o))return!0;u=d}return!1},namespace("collision").CollisionUtils=e}()}(),function(){"use strict";var t,e,i;t=include("springroll.Debug",!1),(i=(e=function(e){!Array.isArray(e)&&t&&t.error("Error: Attempting to make a RandomList without a list",e),this.list=e.slice().shuffle(),this.used=[]}).prototype={}).random=function(){var t=this.list.pop();if(this.used.push(t),this.list.length<1){for(var e=this.used.length-1;e>=0;--e)this.list.push(this.used[e]);this.list.shuffle(),this.used.length=0}return t},i.destroy=function(){this.list=this.used=null},namespace("springroll").RandomList=e,function(){var t=include("springroll.Debug",!1),e=function(t,e){this.outer=t,this.hole=e},i=e.prototype;i.contains=function(t,e){return this.outer.contains(t,e)&&!this.hole.contains(t,e)},i.drawOnGraphics=function(e,i){return this.outer.drawOnGraphics&&this.hole.drawOnGraphics?(this.outer.drawOnGraphics(e,i),void this.hole.drawOnGraphics(e,i)):void(t&&t.warn("Trying to drawOnGraphics() with HoledShape and outer and/or hole lacks drawOnGraphics!"))},namespace("springroll").HoledShape=e}()}(),function(){"use strict";var t,e,i;t=include("springroll.Application"),(i=(e=function(t,e,i){this.onOver=this.onOver.bind(this),this.onDown=this.onDown.bind(this),this.downAlias=t,this.overAlias=e,this._addedButtons=[],i&&this.addButton(i)}).prototype).addButton=function(t){var e;if(t)if(Array.isArray(t))for(var i=t,n=i.length-1;n>=0;--n)(t=i[n])&&(e=t.addEventListener?"addEventListener":"on",this.downAlias&&t[e]("buttonPress",this.onDown),this.overAlias&&t[e]("buttonOver",this.onOver),this._addedButtons.push(t));else e=t.addEventListener?"addEventListener":"on",this.downAlias&&t[e]("buttonPress",this.onDown),this.overAlias&&t[e]("buttonOver",this.onOver),this._addedButtons.push(t)},i.onOver=function(){t.instance.sound.play(this.overAlias)},i.onDown=function(){t.instance.sound.play(this.downAlias)},i.removeButton=function(t){if(t)if(Array.isArray(t))for(var e=t,i=e.length-1;i>=0;--i)(t=e[i])&&(this.downAlias&&t.off("buttonPress",this.onDown),this.overAlias&&t.off("buttonOver",this.onOver),this._addedButtons.indexOf(t)>=0&&this._addedButtons.splice(this._addedButtons.indexOf(t),1));else this.downAlias&&t.off("buttonPress",this.onDown),this.overAlias&&t.off("buttonOver",this.onOver),this._addedButtons.indexOf(t)>=0&&this._addedButtons.splice(this._addedButtons.indexOf(t),1)},i.destroy=function(){if(this._addedButtons){for(var t=this._addedButtons.length-1;t>=0;--t){var e=this._addedButtons[t];this.downAlias&&e.off("buttonPress",this.onDown),this.overAlias&&e.off("buttonOver",this.onOver)}this._addedButtons=this.onDown=this.onOver=null}},namespace("springroll").ButtonSounds=e}(),function(){"use strict";var t,e,i,n,r,s,o;!function(t){window.cloudkid=window.cloudkid||{};var e=PIXI.BLEND_MODES||PIXI.blendModes,i={},n=i.DEG_TO_RADS=Math.PI/180;i.useAPI3=!1;var r=PIXI.VERSION;r&&parseInt(r.substring(0,r.indexOf(".")))>=3&&(i.useAPI3=!0),i.rotatePoint=function(t,e){if(t){t*=n;var i=Math.sin(t),r=Math.cos(t),s=e.x*r-e.y*i,o=e.x*i+e.y*r;e.x=s,e.y=o}},i.combineRGBComponents=function(t,e,i){return t<<16|e<<8|i},i.normalize=function(t){var e=1/i.length(t);t.x*=e,t.y*=e},i.scaleBy=function(t,e){t.x*=e,t.y*=e},i.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},i.hexToRGB=function(t,e){var i;return e?e.length=0:e=[],"#"==t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8==t.length&&(i=t.substr(0,2),t=t.substr(2)),e.push(parseInt(t.substr(0,2),16)),e.push(parseInt(t.substr(2,2),16)),e.push(parseInt(t.substr(4,2),16)),i&&e.push(parseInt(i,16)),e},i.generateEase=function(t){var e=t.length,i=1/e;return function(n){var r,s,o=e*n|0;return r=(n-o*i)*e,(s=t[o]||t[e-1]).s+r*(2*(1-r)*(s.cp-s.s)+r*(s.e-s.s))}},i.getBlendMode=function(t){if(!t)return e.NORMAL;for(t=t.toUpperCase();t.indexOf(" ")>=0;)t=t.replace(" ","_");return e[t]||e.NORMAL},cloudkid.ParticleUtils=i,Array.prototype.shuffle||Object.defineProperty(Array.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var t,e,i=this.length;i;t=Math.floor(Math.random()*i),e=this[--i],this[i]=this[t],this[t]=e);return this}}),Array.prototype.random||Object.defineProperty(Array.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[Math.floor(Math.random()*this.length)]}})}(),function(t,e){var i,n=t.ParticleUtils,r=PIXI.Sprite,s=n.useAPI3;if(!s){var o=document.createElement("canvas");o.width=o.height=1,i=PIXI.Texture.fromCanvas(o)}var a=function(t){s?r.call(this):r.call(this,i),this.emitter=t,this.anchor.x=this.anchor.y=.5,this.velocity=new PIXI.Point,this.maxLife=0,this.age=0,this.ease=null,this.extraData=null,this.startAlpha=0,this.endAlpha=0,this.startSpeed=0,this.endSpeed=0,this.acceleration=new PIXI.Point,this.startScale=0,this.endScale=0,this.startColor=null,this._sR=0,this._sG=0,this._sB=0,this.endColor=null,this._eR=0,this._eG=0,this._eB=0,this._doAlpha=!1,this._doScale=!1,this._doSpeed=!1,this._doAcceleration=!1,this._doColor=!1,this._doNormalMovement=!1,this._oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.Particle_init=this.Particle_init,this.update=this.update,this.Particle_update=this.Particle_update,this.applyArt=this.applyArt,this.kill=this.kill},h=a.prototype=Object.create(r.prototype);h.init=h.Particle_init=function(){this.age=0,this.velocity.x=this.startSpeed,this.velocity.y=0,n.rotatePoint(this.rotation,this.velocity),this.rotation*=n.DEG_TO_RADS,this.rotationSpeed*=n.DEG_TO_RADS,this.alpha=this.startAlpha,this.scale.x=this.scale.y=this.startScale,this.startColor&&(this._sR=this.startColor[0],this._sG=this.startColor[1],this._sB=this.startColor[2],this.endColor&&(this._eR=this.endColor[0],this._eG=this.endColor[1],this._eB=this.endColor[2])),this._doAlpha=this.startAlpha!=this.endAlpha,this._doSpeed=this.startSpeed!=this.endSpeed,this._doScale=this.startScale!=this.endScale,this._doColor=!!this.endColor,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.startSpeed||this._doAcceleration,this._oneOverLife=1/this.maxLife,this.tint=n.combineRGBComponents(this._sR,this._sG,this._sB),this.visible=!0},h.applyArt=function(t){s?this.texture=t:this.setTexture(t)},h.update=h.Particle_update=function(t){if(this.age+=t,this.age>=this.maxLife)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4==this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=(this.endAlpha-this.startAlpha)*e+this.startAlpha),this._doScale){var i=(this.endScale-this.startScale)*e+this.startScale;this.scale.x=this.scale.y=i}if(this._doNormalMovement){if(this._doSpeed){var r=(this.endSpeed-this.startSpeed)*e+this.startSpeed;n.normalize(this.velocity),n.scaleBy(this.velocity,r)}else this._doAcceleration&&(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t);this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t}if(this._doColor){var s=(this._eR-this._sR)*e+this._sR,o=(this._eG-this._sG)*e+this._sG,a=(this._eB-this._sB)*e+this._sB;this.tint=n.combineRGBComponents(s,o,a)}return 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*t:this.acceleration&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x)),e},h.kill=function(){this.emitter.recycle(this)},h.destroy=function(){this.emitter=this.velocity=this.startColor=this.endColor=this.ease=this.next=this.prev=null},a.parseArt=function(t){var e;for(e=t.length;e>=0;--e)"string"==typeof t[e]&&(t[e]=PIXI.Texture.fromImage(t[e]));return t},a.parseData=function(t){return t},t.Particle=a}(cloudkid),t=cloudkid,e=t.ParticleUtils,i=t.Particle,n=PIXI.ParticleContainer,s=(r=function(t,e,n){this._particleConstructor=i,this.particleImages=null,this.startAlpha=1,this.endAlpha=1,this.startSpeed=0,this.endSpeed=0,this.acceleration=null,this.startScale=1,this.endScale=1,this.minimumScaleMultiplier=1,this.startColor=null,this.endColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parentIsPC=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this.parent=t,e&&n&&this.init(e,n),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}).prototype={},o=new PIXI.Point,Object.defineProperty(s,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency="number"==typeof t&&t>0?t:1}}),Object.defineProperty(s,"particleConstructor",{get:function(){return this._particleConstructor},set:function(t){if(t!=this._particleConstructor){this._particleConstructor=t,this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}}}),Object.defineProperty(s,"parent",{get:function(){return this._parent},set:function(t){this.cleanup(),this._parent=t,this._parentIsPC=n&&t&&t instanceof n}}),s.init=function(t,i){if(t&&i){this.cleanup(),this._origConfig=i,this._origArt=t,t=Array.isArray(t)?t.slice():[t];var n=this._particleConstructor;this.particleImages=n.parseArt?n.parseArt(t):t,i.alpha?(this.startAlpha=i.alpha.start,this.endAlpha=i.alpha.end):this.startAlpha=this.endAlpha=1,i.speed?(this.startSpeed=i.speed.start,this.endSpeed=i.speed.end):this.startSpeed=this.endSpeed=0;var r,s=i.acceleration;switch(s&&(s.x||s.y)?(this.endSpeed=this.startSpeed,this.acceleration=new PIXI.Point(s.x,s.y)):this.acceleration=new PIXI.Point,i.scale?(this.startScale=i.scale.start,this.endScale=i.scale.end,this.minimumScaleMultiplier=i.scale.minimumScaleMultiplier||1):this.startScale=this.endScale=this.minimumScaleMultiplier=1,i.color&&(this.startColor=e.hexToRGB(i.color.start),i.color.start!=i.color.end?this.endColor=e.hexToRGB(i.color.end):this.endColor=null),i.startRotation?(this.minStartRotation=i.startRotation.min,this.maxStartRotation=i.startRotation.max):this.minStartRotation=this.maxStartRotation=0,i.rotationSpeed?(this.minRotationSpeed=i.rotationSpeed.min,this.maxRotationSpeed=i.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.minLifetime=i.lifetime.min,this.maxLifetime=i.lifetime.max,this.particleBlendMode=e.getBlendMode(i.blendMode),i.ease?this.customEase="function"==typeof i.ease?i.ease:e.generateEase(i.ease):this.customEase=null,n.parseData?this.extraData=n.parseData(i.extraData):this.extraData=i.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,i.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var o=i.spawnRect;this.spawnRect=new PIXI.Rectangle(o.x,o.y,o.w,o.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,r=i.spawnCircle,this.spawnCircle=new PIXI.Circle(r.x,r.y,r.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,r=i.spawnCircle,this.spawnCircle=new PIXI.Circle(r.x,r.y,r.r),this.spawnCircle.minRadius=r.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particlesPerWave=i.particlesPerWave,this.particleSpacing=i.particleSpacing,this.angleStart=i.angleStart?i.angleStart:0;break;case"point":this.spawnType="point",this._spawnFunc=this._spawnPoint;break;default:this.spawnType="point",this._spawnFunc=this._spawnPoint}this.frequency=i.frequency,this.emitterLifetime=i.emitterLifetime||-1,this.maxParticles=i.maxParticles>0?i.maxParticles:1e3,this.addAtBack=!!i.addAtBack,this.rotation=0,this.ownerPos=new PIXI.Point,this.spawnPos=new PIXI.Point(i.pos.x,i.pos.y),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=!0}},s.recycle=function(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t==this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t==this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,this._parentIsPC?(t.alpha=0,t.visible=!1):t.parent&&t.parent.removeChild(t),--this.particleCount},s.rotate=function(t){if(this.rotation!=t){var i=t-this.rotation;this.rotation=t,e.rotatePoint(i,this.spawnPos),this._posChanged=!0}},s.updateSpawnPos=function(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e},s.updateOwnerPos=function(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e},s.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(s,"emit",{get:function(){return this._emit},set:function(t){this._emit=!!t,this._emitterLife=this.emitterLifetime}}),s.update=function(t){var e,i,n,r,s;for(i=this._activeParticlesFirst;i;i=n)n=i.next,i.update(t);this._prevPosIsValid&&(r=this._prevEmitterPos.x,s=this._prevEmitterPos.y);var o=this.ownerPos.x+this.spawnPos.x,a=this.ownerPos.y+this.spawnPos.y;if(this.emit)for(this._spawnTimer-=t;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var h;if(h=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<h){var l,u;if(this._prevPosIsValid&&this._posChanged){var c=1+this._spawnTimer/t;l=(o-r)*c+r,u=(a-s)*c+s}else l=o,u=a;e=0;for(var d=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);d>e;++e){var p;if(this._poolFirst?(p=this._poolFirst,this._poolFirst=this._poolFirst.next,p.next=null):p=new this.particleConstructor(this),this.particleImages.length>1?p.applyArt(this.particleImages.random()):p.applyArt(this.particleImages[0]),p.startAlpha=this.startAlpha,p.endAlpha=this.endAlpha,p.startSpeed=this.startSpeed,p.endSpeed=this.endSpeed,p.acceleration.x=this.acceleration.x,p.acceleration.y=this.acceleration.y,1!=this.minimumScaleMultiplier){var f=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier;p.startScale=this.startScale*f,p.endScale=this.endScale*f}else p.startScale=this.startScale,p.endScale=this.endScale;if(p.startColor=this.startColor,p.endColor=this.endColor,this.minRotationSpeed==this.maxRotationSpeed?p.rotationSpeed=this.minRotationSpeed:p.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,p.maxLife=h,p.blendMode=this.particleBlendMode,p.ease=this.customEase,p.extraData=this.extraData,this._spawnFunc(p,l,u,e),p.init(),p.update(-this._spawnTimer),this._parentIsPC&&p.parent){var g=this._parent.children,_=g.indexOf(p);1>_?g.shift():_==g.length-1?g.pop():g.splice(_,1),this.addAtBack?g.unshift(p):g.push(p)}else this.addAtBack?this._parent.addChildAt(p,0):this._parent.addChild(p);this._activeParticlesLast?(this._activeParticlesLast.next=p,p.prev=this._activeParticlesLast,this._activeParticlesLast=p):this._activeParticlesLast=this._activeParticlesFirst=p,++this.particleCount}}this._spawnTimer+=this._frequency}}this._posChanged&&(this._prevEmitterPos.x=o,this._prevEmitterPos.y=a,this._prevPosIsValid=!0,this._posChanged=!1)},s._spawnPoint=function(t,e,i,n){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,t.position.x=e,t.position.y=i},s._spawnRect=function(t,i,n,r){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,o.x=Math.random()*this.spawnRect.width+this.spawnRect.x,o.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&e.rotatePoint(this.rotation,o),t.position.x=i+o.x,t.position.y=n+o.y},s._spawnCircle=function(t,i,n,r){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,o.x=Math.random()*this.spawnCircle.radius,o.y=0,e.rotatePoint(360*Math.random(),o),o.x+=this.spawnCircle.x,o.y+=this.spawnCircle.y,0!==this.rotation&&e.rotatePoint(this.rotation,o),t.position.x=i+o.x,t.position.y=n+o.y},s._spawnRing=function(t,i,n,r){var s=this.spawnCircle;this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,s.minRadius==s.radius?o.x=Math.random()*(s.radius-s.minRadius)+s.minRadius:o.x=s.radius,o.y=0;var a=360*Math.random();t.rotation+=a,e.rotatePoint(a,o),o.x+=this.spawnCircle.x,o.y+=this.spawnCircle.y,0!==this.rotation&&e.rotatePoint(this.rotation,o),t.position.x=i+o.x,t.position.y=n+o.y},s._spawnBurst=function(t,e,i,n){0===this.particleSpacing?t.rotation=360*Math.random():t.rotation=this.angleStart+this.particleSpacing*n+this.rotation,t.position.x=e,t.position.y=i},s.cleanup=function(){var t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},s.destroy=function(){this.cleanup();for(var t=this._poolFirst;t;t=t.next)t.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.endColor=this.customEase=null},t.Emitter=r}();