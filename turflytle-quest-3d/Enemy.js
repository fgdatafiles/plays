pc.script.attribute("type","enumeration",1,{enumerations:[{name:"MOVE",value:1},{name:"FLOAT",value:2}]}),pc.script.attribute("hp","number",1),pc.script.create("Enemy",function(a){var b=function(a){this.entity=a},c=2;return b.prototype={initialize:function(){this.hp=1,this.enemyMission=this.entity.getParent().getParent().script.MissionCombat,this.bodyWrapper=this.entity.script.BodyWrapper,this.bodyWrapper.offset.set(0,1.197,0),this.bodyWrapper.body.isTrigger=!0,this.material=this.entity.model.model.meshInstances[0].material,this.spawnPosition=this.entity.getPosition().clone(),this.spawnRotation=this.entity.getEulerAngles(),this.separatingSpeed=new pc.Vec3,this.separatingTime=c,this.player=a.root.findByName("Player"),this.hitEffectTimer=.5,this.FLOATING_SPEED=pc.math.random(1,3),this.FLOATING_TIME=pc.math.random(.7,1.2),this.floatingSpeed=this.FLOATING_SPEED,this.floatingTimer=this.FLOATING_TIME},update:function(a){PAUSE||(this.separating&&(this.entity.translate(this.separatingSpeed.clone().scale(a)),this.entity.rotate(this.rotatingSpeed.z,this.rotatingSpeed.y,this.rotatingSpeed.x),this.separatingTime-=a,this.separatingTime<=0&&this.can("deadEvent")&&this.deadEvent()),this.hitEffect&&(this.hitEffectTimer-=a,this.hitEffectTimer<0?(this.hitEffectTimer=.5,this.hitEffect=!1,this.material.diffuse.set(1,1,1,1)):(console.log(this.material.diffuse.r,this.material.diffuse.g,this.material.diffuse.b),0===this.material.diffuse.b?this.material.diffuse.set(1,1,1,1):1===this.material.diffuse.b&&this.material.diffuse.set(1,0,0,1)),this.material.update()),this.separating||this.hitEffect||"spawn"!==this.current||this.floating(a))},onEnable:function(){this.bodyWrapper.on("onCollisionEnter",this.onCollisionEnter,this)},onDisable:function(){this.bodyWrapper.off("onCollisionEnter",this.onCollisionEnter,this),this.can("deadEvent")&&this.deadEvent()},onCollisionEnter:function(a){},floating:function(a){this.floatingTimer<0&&(this.floatingSpeed*=-1,this.floatingTimer=this.FLOATING_TIME),this.floatingTimer-=a,this.entity.translate(0,this.floatingSpeed*a,0)},hit:function(a,b){return this.hp-=b,this.hp<=0?(this.playDeadEffect(a),!0):(this.hitEffect=!0,!1)},playDeadEffect:function(a){this.enemyMission.killEnemy(1),this.separating=!0,this.separatingSpeed.copy(a),this.rotatingSpeed=this.separatingSpeed.clone().normalize().scale(50),this.separatingSpeed.scale(3),this.bodyWrapper.body.activated=!1},onspawn:function(a,b,d){"dead"===b&&(this.separating=!1,this.separatingTime=c,this.bodyWrapper.body.activated=!0,this.entity.setPosition(this.spawnPosition),this.entity.setEulerAngles(this.spawnRotation),this.separatingTime=c)},ondead:function(a,b,d){pc.Utils.debug("Enemy","ondead","killed"),this.entity.enabled=!1,this.separating=!1,this.separatingTime=c}},StateMachine.create({target:b.prototype,events:[{name:"spawnEvent",from:["none","dead","spawn"],to:"spawn"},{name:"deadEvent",from:["spawn"],to:"dead"}]}),b});