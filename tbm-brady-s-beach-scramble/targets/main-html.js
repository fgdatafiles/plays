'use strict';(function(){var cb,db,Ga,eb,fb,pa,Ha,qa,ba,gb,Ia,c,Ja,Ka,La,F,P,ra,Ma,ha,sa,ta,Na,hb,I,q,Oa,Pa,f,ib,Q,ua,G,ca,va,wa,Z,xa,R,ia,L,ja,ya,da,Qa,za,qb,Ra,ka,Aa,Ba,Sa,B,Ca,Da,Ta,jb,T,H,ea,kb,M,U,X,v,S,Ua,Va,Wa,$,C,la,fa,J,Xa,E,Ea,x,N,Ya,lb,Za,Fa,rb,sb,mb,ma,$a,aa,V,K,W,t,m,a;function r(b,d){function a(){}a.prototype=b;var h=new a,c;for(c in d)h[c]=d[c];return h}function ub(b){return b instanceof Array?function(){return u.iter(b)}:"function"==typeof b.iterator?p(b,b.iterator):b.iterator}function p(b,d){var a=function(){return a.method.apply(a.scope,arguments)};a.scope=b;a.method=d;return a}var g={},i=function(){return t.__string_rec(this,"")},na=function(b,d){d=d.split("u").join("");this.r=RegExp(b,d)};g.EReg=na;na.__name__=["EReg"];na.prototype={matched:function(b){if(null!=this.r.m&&0<=b&&b<this.r.m.length)b=this.r.m[b];else throw"EReg::matched";return b},match:function(b){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(b);this.r.s=b;return null!=this.r.m},__class__:na};var A=function(){this.h={}};g.Hash=A;A.__name__=["Hash"];A.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var b=[],d;for(d in this.h)this.h.hasOwnProperty(d)&&b.push(d.substr(1));return u.iter(b)},remove:function(b){b="$"+b;if(!this.h.hasOwnProperty(b))return!1;delete this.h[b];return!0},exists:function(b){return this.h.hasOwnProperty("$"+b)},get:function(b){return this.h["$"+b]},set:function(b,d){this.h["$"+b]=d},__class__:A};var u=function(){};g.HxOverrides=u;u.__name__=["HxOverrides"];u.dateStr=function(b){var d=b.getMonth()+1,a=b.getDate(),h=b.getHours(),c=b.getMinutes(),l=b.getSeconds();return b.getFullYear()+"-"+(10>d?"0"+d:""+d)+"-"+(10>a?"0"+a:""+a)+" "+(10>h?"0"+h:""+h)+":"+(10>c?"0"+c:""+c)+":"+(10>l?"0"+l:""+l)};u.strDate=function(b){switch(b.length){case 8:var b=b.split(":"),d=new Date;d.setTime(0);d.setUTCHours(b[0]);d.setUTCMinutes(b[1]);d.setUTCSeconds(b[2]);return d;case 10:return b=b.split("-"),new Date(b[0],b[1]-1,b[2],0,0,0);case 19:return b=b.split(" "),d=b[0].split("-"),b=b[1].split(":"),new Date(d[0],d[1]-1,d[2],b[0],b[1],b[2]);default:throw"Invalid date format : "+b;}};u.cca=function(b,d){var a=b.charCodeAt(d);return a!=a?void 0:a};u.substr=function(b,d,a){if(null!=d&&0!=d&&null!=a&&0>a)return"";null==a&&(a=b.length);0>d?(d=b.length+d,0>d&&(d=0)):0>a&&(a=b.length+a-d);return b.substr(d,a)};u.remove=function(b,d){for(var a=0,h=b.length;a<h;){if(b[a]==d)return b.splice(a,1),!0;a++}return!1};u.iter=function(b){return{cur:0,arr:b,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var ga=function(){this.h={}};g.IntHash=ga;ga.__name__=["IntHash"];ga.prototype={keys:function(){var b=[],d;for(d in this.h)this.h.hasOwnProperty(d)&&b.push(d|0);return u.iter(b)},remove:function(b){if(!this.h.hasOwnProperty(b))return!1;delete this.h[b];return!0},exists:function(b){return this.h.hasOwnProperty(b)},get:function(b){return this.h[b]},set:function(b,d){this.h[b]=d},__class__:ga};var nb=function(){};g.Lambda=nb;nb.__name__=["Lambda"];nb.array=function(b){for(var d=[],b=ub(b)();b.hasNext();){var a=b.next();d.push(a)}return d};nb.count=function(b,d){var a=0;if(null==d)for(var h=ub(b)();h.hasNext();)h.next(),a++;else for(h=ub(b)();h.hasNext();){var c=h.next();d(c)&&a++}return a};var ob=function(){this.length=0};g.List=ob;ob.__name__=["List"];ob.prototype={iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var b=this.h[0];this.h=this.h[1];return b}}},add:function(b){b=[b];null==this.h?this.h=b:this.q[1]=b;this.q=b;this.length++},__class__:ob};var j=function(){};g.Main=j;j.__name__=["Main"];j.main=function(){j.registerCompositionReference();j.setWrapper()};j.registerCompositionReference=function(){a.common.app.CompositionFactory.registerCompositionReference({groups:[{id:"backBtn",classes:["btn_back"],components:[a.common.components.btn.BackBtn]},{id:"muteBtn",classes:["btn_mute"],components:[a.common.components.btn.MuteBtn]},{id:"nextBtn",classes:["btn_next","btn_begin"],components:[a.common.components.btn.NextBtn]},{id:"playBtn",classes:["btn_play","btn_continue","btn_resume"],components:[a.common.components.btn.PlayBtn]},{id:"skipBtn",classes:["btn_skip"],components:[a.common.components.btn.SkipBtn]},{id:"unmuteBtn",classes:["btn_unmute"],components:[a.common.components.btn.UnmuteBtn]},{id:"toggleContainer",classes:["mc_mute"],components:[a.common.components.mc.ToggleContainer]},{id:"dosHudBtn",classes:["btn_help"],components:[a.client.dos.components.btn.DOSHudBtn]},{id:"dosCloseBtn",classes:["btn_DOSMenuClose"],components:[a.client.dos.components.btn.DOSCloseBtn]},{id:"dosHelpBtn",classes:["btn_DOSHelpBtn"],components:[a.client.dos.components.btn.DOSHelpBtn]},{id:"dosQuitButton",classes:["btn_DOSQuit"],components:[a.client.dos.components.btn.DOSQuitBtn]},{id:"confirmationPopup",classes:["mc_quitPopup"],components:[a.common.components.mc.QuitConfirmation]},{id:"scoreDisplay",classes:["txt_score"],components:[a.common.components.mc.data_display.ScoreDisplay]},{id:"startOverBtn",classes:["btn_startover"],components:[a.common.components.btn.StartOverBtn]},{id:"homeBtn",classes:["btn_home"],components:[a.client.dos.components.btn.DOSHomeBtn]}],compositions:[]})};j.setWrapper=function(){new a.tbm_bbs.TBM_BBS_Game};j.prototype={__class__:j};var O=function(){};g.Reflect=O;O.__name__=["Reflect"];O.field=function(b,d){var a=null;try{a=b[d]}catch(h){}return a};O.fields=function(b){var d=[];if(null!=b){var a=Object.prototype.hasOwnProperty,h;for(h in b)a.call(b,h)&&d.push(h)}return d};O.isFunction=function(b){return"function"==typeof b&&!(b.__name__||b.__ename__)};O.compareMethods=function(b,d){return b==d?!0:!O.isFunction(b)||!O.isFunction(d)?!1:b.scope==d.scope&&b.method==d.method&&null!=b.method};var n=function(){};g.Std=n;n.__name__=["Std"];n.string=function(b){return t.__string_rec(b,"")};n.parseInt=function(b){var d=parseInt(b,10);if(0==d&&(120==u.cca(b,1)||88==u.cca(b,1)))d=parseInt(b);return isNaN(d)?null:d};n.parseFloat=function(b){return parseFloat(b)};var ab=function(){this.b=""};g.StringBuf=ab;ab.__name__=["StringBuf"];ab.prototype={__class__:ab};var Y=function(){};g.StringTools=Y;Y.__name__=["StringTools"];Y.urlEncode=function(b){return encodeURIComponent(b)};Y.urlDecode=function(b){return decodeURIComponent(b.split("+").join(" "))};Y.startsWith=function(b,d){return b.length>=d.length&&u.substr(b,0,d.length)==d};Y.replace=function(b,d,a){return b.split(d).join(a)};Y.hex=function(b,d){var a="";do a="0123456789ABCDEF".charAt(b&15)+a,b>>>=4;while(0<b);if(null!=d)for(;a.length<d;)a="0"+a;return a};var w=g.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};w.TNull=["TNull",0];w.TNull.toString=i;w.TNull.__enum__=w;w.TInt=["TInt",1];w.TInt.toString=i;w.TInt.__enum__=w;w.TFloat=["TFloat",2];w.TFloat.toString=i;w.TFloat.__enum__=w;w.TBool=["TBool",3];w.TBool.toString=i;w.TBool.__enum__=w;w.TObject=["TObject",4];w.TObject.toString=i;w.TObject.__enum__=w;w.TFunction=["TFunction",5];w.TFunction.toString=i;w.TFunction.__enum__=w;w.TClass=function(b){b=["TClass",6,b];b.__enum__=w;b.toString=i;return b};w.TEnum=function(b){b=["TEnum",7,b];b.__enum__=w;b.toString=i;return b};w.TUnknown=["TUnknown",8];w.TUnknown.toString=i;w.TUnknown.__enum__=w;var z=function(){};g.Type=z;z.__name__=["Type"];z.getClass=function(b){return null==b?null:b.__class__};z.getClassName=function(b){return b.__name__.join(".")};z.getEnumName=function(b){return b.__ename__.join(".")};z.resolveClass=function(b){b=g[b];return null==b||!b.__name__?null:b};z.resolveEnum=function(b){b=g[b];return null==b||!b.__ename__?null:b};z.createInstance=function(b,d){switch(d.length){case 0:return new b;case 1:return new b(d[0]);case 2:return new b(d[0],d[1]);case 3:return new b(d[0],d[1],d[2]);case 4:return new b(d[0],d[1],d[2],d[3]);case 5:return new b(d[0],d[1],d[2],d[3],d[4]);case 6:return new b(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new b(d[0],d[1],d[2],d[3],d[4],d[5],d[6]);case 8:return new b(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7]);default:throw"Too many arguments";}};z.createEmptyInstance=function(b){function d(){}d.prototype=b.prototype;return new d};z.createEnum=function(b,d,a){var h=O.field(b,d);if(null==h)throw"No such constructor "+d;if(O.isFunction(h)){if(null==a)throw"Constructor "+d+" need parameters";return h.apply(b,a)}if(null!=a&&0!=a.length)throw"Constructor "+d+" does not need parameters";return h};z.getEnumConstructs=function(b){return b.__constructs__.slice()};z["typeof"]=function(b){switch(typeof b){case "boolean":return w.TBool;case "string":return w.TClass(String);case "number":return Math.ceil(b)==b%2147483648?w.TInt:w.TFloat;case "object":if(null==b)return w.TNull;var d=b.__enum__;if(null!=d)return w.TEnum(d);b=b.__class__;return null!=b?w.TClass(b):w.TObject;case "function":return b.__name__||b.__ename__?w.TObject:w.TFunction;case "undefined":return w.TNull;default:return w.TUnknown}};var s=function(){};g.Xml=s;s.__name__=["Xml"];s.parse=function(b){return ma.Parser.parse(b)};s.createElement=function(b){var d=new s;d.nodeType=s.Element;d._children=[];d._attributes=new A;d.setNodeName(b);return d};s.createPCData=function(b){var d=new s;d.nodeType=s.PCData;d.setNodeValue(b);return d};s.createCData=function(b){var d=new s;d.nodeType=s.CData;d.setNodeValue(b);return d};s.createComment=function(b){var d=new s;d.nodeType=s.Comment;d.setNodeValue(b);return d};s.createDocType=function(b){var d=new s;d.nodeType=s.DocType;d.setNodeValue(b);return d};s.createProlog=function(b){var d=new s;d.nodeType=s.Prolog;d.setNodeValue(b);return d};s.createDocument=function(){var b=new s;b.nodeType=s.Document;b._children=[];return b};s.prototype={addChild:function(b){if(null==this._children)throw"bad nodetype";null!=b._parent&&u.remove(b._parent._children,b);b._parent=this;this._children.push(b)},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var b=0,d=this._children.length;b<d;){var a=this._children[b];if(a.nodeType==s.Element)return a;b++}return null},firstChild:function(){if(null==this._children)throw"bad nodetype";return this._children[0]},elementsNamed:function(b){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var d=this.cur,a=this.x.length;d<a;){var h=this.x[d];if(h.nodeType==s.Element&&h._nodeName==b)break;d++}this.cur=d;return d<a},next:function(){for(var d=this.cur,a=this.x.length;d<a;){var h=this.x[d];d++;if(h.nodeType==s.Element&&h._nodeName==b)return this.cur=d,h}return null}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,d=this.x.length;b<d&&!(this.x[b].nodeType==s.Element);)b+=1;this.cur=b;return b<d},next:function(){for(var b=this.cur,d=this.x.length;b<d;){var a=this.x[b],b=b+1;if(a.nodeType==s.Element)return this.cur=b,a}return null}}},exists:function(b){if(this.nodeType!=s.Element)throw"bad nodeType";return this._attributes.exists(b)},set:function(b,d){if(this.nodeType!=s.Element)throw"bad nodeType";this._attributes.set(b,d)},get:function(b){if(this.nodeType!=s.Element)throw"bad nodeType";return this._attributes.get(b)},getParent:function(){return this._parent},setNodeValue:function(b){if(this.nodeType==s.Element||this.nodeType==s.Document)throw"bad nodeType";return this._nodeValue=b},getNodeValue:function(){if(this.nodeType==s.Element||this.nodeType==s.Document)throw"bad nodeType";return this._nodeValue},setNodeName:function(b){if(this.nodeType!=s.Element)throw"bad nodeType";return this._nodeName=b},getNodeName:function(){if(this.nodeType!=s.Element)throw"bad nodeType";return this._nodeName},__class__:s};var y,oa,k,D,bb,pb;$=function(){};C=void 0;la=void 0;fa=void 0;J=void 0;Xa=void 0;E=void 0;Ea=void 0;x=void 0;N=void 0;Ya=void 0;lb=void 0;Za=void 0;Fa=void 0;rb=void 0;sb=void 0;mb=void 0;g["flambe.util.Disposable"]=$;$.__name__=["flambe","util","Disposable"];$.prototype={__class__:$};y=function(){};g["flambe.Component"]=y;y.__name__=["flambe","Component"];y.__interfaces__=[$];y.prototype={_internal_init:function(b,d){this.owner=b;this.next=d},get_name:function(){return null},dispose:function(){null!=this.owner&&this.owner.remove(this)},onUpdate:function(){},onRemoved:function(){},onAdded:function(){},__class__:y};a=void 0;a={common:{}};a.common.components={};a.common.components.CMMComponent=function(b,d){this.id=b;this.params=d};g["com.cmm.common.components.CMMComponent"]=a.common.components.CMMComponent;a.common.components.CMMComponent.__name__=["com","cmm","common","components","CMMComponent"];a.common.components.CMMComponent.__super__=y;a.common.components.CMMComponent.prototype=r(y.prototype,{onRemoved:function(){y.prototype.onRemoved.call(this);this._signalConnection.dispose();this._ownerSprite=null},onAdded:function(){y.prototype.onAdded.call(this);this._ownerSprite=this.owner._compMap.Sprite_1;var b=this.owner._compMap.Disposer_2;null==b?(this._signalConnection=new oa,this.owner.add(this._signalConnection)):this._signalConnection=b},get_name:function(){return"CMMComponent_3"},__class__:a.common.components.CMMComponent});a.common.components.btn={};a.common.components.btn.GenericBtn=function(b,d){a.common.components.CMMComponent.call(this,b,d)};g["com.cmm.common.components.btn.GenericBtn"]=a.common.components.btn.GenericBtn;a.common.components.btn.GenericBtn.__name__="com,cmm,common,components,btn,GenericBtn".split(",");a.common.components.btn.GenericBtn.__super__=a.common.components.CMMComponent;a.common.components.btn.GenericBtn.prototype=r(a.common.components.CMMComponent.prototype,{onPointerClick:function(){a.common.audio.SoundPlayerRemote.play("click1")},onPointerDown:function(){},onAdded:function(){a.common.components.CMMComponent.prototype.onAdded.call(this);this._signalConnection.connect1(this._ownerSprite.get_pointerDown(),p(this,this.onPointerDown));this._signalConnection.connect1(this._ownerSprite.get_pointerClick(),p(this,this.onPointerClick))},__class__:a.common.components.btn.GenericBtn});a.common.components.btn.PlayBtn=function(b,d){a.common.components.btn.GenericBtn.call(this,b,d)};g["com.cmm.common.components.btn.PlayBtn"]=a.common.components.btn.PlayBtn;a.common.components.btn.PlayBtn.__name__="com,cmm,common,components,btn,PlayBtn".split(",");a.common.components.btn.PlayBtn.__super__=a.common.components.btn.GenericBtn;a.common.components.btn.PlayBtn.prototype=r(a.common.components.btn.GenericBtn.prototype,{onPointerClick:function(b){a.common.components.btn.GenericBtn.prototype.onPointerClick.call(this,b);b=this._ownerSprite.get_parent();b.gotoAndPlay(b.get_currentFrame(),b.get_nextLabelFrame(),0)},__class__:a.common.components.btn.PlayBtn});a.client={};a.client.dos={};a.client.dos.components={};a.client.dos.components.btn={};a.client.dos.components.btn.DOSPlayBtn=function(b,d){a.common.components.btn.PlayBtn.call(this,b,d)};g["com.cmm.client.dos.components.btn.DOSPlayBtn"]=a.client.dos.components.btn.DOSPlayBtn;a.client.dos.components.btn.DOSPlayBtn.__name__="com,cmm,client,dos,components,btn,DOSPlayBtn".split(",");a.client.dos.components.btn.DOSPlayBtn.__super__=a.common.components.btn.PlayBtn;a.client.dos.components.btn.DOSPlayBtn.prototype=r(a.common.components.btn.PlayBtn.prototype,{onComplete:function(){this._onCompleteSignalConn.dispose()},onPointerClick:function(b){var d=this;a.common.components.btn.PlayBtn.prototype.onPointerClick.call(this,b);this._onCompleteSignalConn=a.common.app.SceneManager.get_currentScene().get_onComplete().connect(function(){d.onComplete()})},__class__:a.client.dos.components.btn.DOSPlayBtn});a.client.dos.components.btn.DOSCloseBtn=function(b,d){a.client.dos.components.btn.DOSPlayBtn.call(this,b,d)};g["com.cmm.client.dos.components.btn.DOSCloseBtn"]=a.client.dos.components.btn.DOSCloseBtn;a.client.dos.components.btn.DOSCloseBtn.__name__="com,cmm,client,dos,components,btn,DOSCloseBtn".split(",");a.client.dos.components.btn.DOSCloseBtn.__super__=a.client.dos.components.btn.DOSPlayBtn;a.client.dos.components.btn.DOSCloseBtn.prototype=r(a.client.dos.components.btn.DOSPlayBtn.prototype,{onComplete:function(){a.client.dos.components.btn.DOSPlayBtn.prototype.onComplete.call(this);a.common.event.EDispatcher.dispatchEvent(new a.common.event.CMMEvent("com.cmm.common.events.resume"))},__class__:a.client.dos.components.btn.DOSCloseBtn});a.client.dos.components.btn.DOSHelpBtn=function(b,d){a.client.dos.components.btn.DOSPlayBtn.call(this,b,d)};g["com.cmm.client.dos.components.btn.DOSHelpBtn"]=a.client.dos.components.btn.DOSHelpBtn;a.client.dos.components.btn.DOSHelpBtn.__name__="com,cmm,client,dos,components,btn,DOSHelpBtn".split(",");a.client.dos.components.btn.DOSHelpBtn.__super__=a.client.dos.components.btn.DOSPlayBtn;a.client.dos.components.btn.DOSHelpBtn.prototype=r(a.client.dos.components.btn.DOSPlayBtn.prototype,{onComplete:function(){a.client.dos.components.btn.DOSPlayBtn.prototype.onComplete.call(this);a.common.app.SceneManager.playSceneQueue(["mc_helpScene","mc_DOSHudMenu"])},__class__:a.client.dos.components.btn.DOSHelpBtn});a.client.dos.components.btn.DOSHomeBtn=function(b,d){this._homeButtonURL="";this._homeButtonVisible=!1;a.common.components.btn.GenericBtn.call(this,b,d);for(var e=a.common.io.LoadMaster.getXML("config","gameConfig.xml").firstElement().elements();e.hasNext();){var h=e.next();if("home_button"==h.getNodeName()){this._homeButtonVisible="true"==h.get("visible");this._homeButtonURL=h.get("url");break}}};g["com.cmm.client.dos.components.btn.DOSHomeBtn"]=a.client.dos.components.btn.DOSHomeBtn;a.client.dos.components.btn.DOSHomeBtn.__name__="com,cmm,client,dos,components,btn,DOSHomeBtn".split(",");a.client.dos.components.btn.DOSHomeBtn.__super__=a.common.components.btn.GenericBtn;a.client.dos.components.btn.DOSHomeBtn.prototype=r(a.common.components.btn.GenericBtn.prototype,{onPointerClick:function(b){a.common.components.btn.GenericBtn.prototype.onPointerClick.call(this,b);k._platform.getWeb().openBrowser(this._homeButtonURL)},onAdded:function(){a.common.components.btn.GenericBtn.prototype.onAdded.call(this);this._ownerSprite.set_visible(this._homeButtonVisible)},__class__:a.client.dos.components.btn.DOSHomeBtn});a.client.dos.components.btn.DOSHudBtn=function(b,d){a.common.components.btn.GenericBtn.call(this,b,d)};g["com.cmm.client.dos.components.btn.DOSHudBtn"]=a.client.dos.components.btn.DOSHudBtn;a.client.dos.components.btn.DOSHudBtn.__name__="com,cmm,client,dos,components,btn,DOSHudBtn".split(",");a.client.dos.components.btn.DOSHudBtn.__super__=a.common.components.btn.GenericBtn;a.client.dos.components.btn.DOSHudBtn.prototype=r(a.common.components.btn.GenericBtn.prototype,{onPointerClick:function(b){a.common.components.btn.GenericBtn.prototype.onPointerClick.call(this,b);a.common.event.EDispatcher.dispatchEvent(new a.common.event.CMMEvent("com.cmm.common.events.pause"));a.common.app.SceneManager.playSceneAt("mc_DOSHudMenu",1)},__class__:a.client.dos.components.btn.DOSHudBtn});a.client.dos.components.btn.DOSQuitBtn=function(b,d){a.client.dos.components.btn.DOSPlayBtn.call(this,b,d)};g["com.cmm.client.dos.components.btn.DOSQuitBtn"]=a.client.dos.components.btn.DOSQuitBtn;a.client.dos.components.btn.DOSQuitBtn.__name__="com,cmm,client,dos,components,btn,DOSQuitBtn".split(",");a.client.dos.components.btn.DOSQuitBtn.__super__=a.client.dos.components.btn.DOSPlayBtn;a.client.dos.components.btn.DOSQuitBtn.prototype=r(a.client.dos.components.btn.DOSPlayBtn.prototype,{onComplete:function(){a.client.dos.components.btn.DOSPlayBtn.prototype.onComplete.call(this);a.common.app.SceneManager.playSceneQueue(["mc_quitPopup","mc_DOSHudMenu"])},__class__:a.client.dos.components.btn.DOSQuitBtn});a.common.app={};a.common.app.ClipSequencer=function(){this._clipHash=new A};g["com.cmm.common.app.ClipSequencer"]=a.common.app.ClipSequencer;a.common.app.ClipSequencer.__name__=["com","cmm","common","app","ClipSequencer"];a.common.app.ClipSequencer.prototype={getClip:function(b){null==this._clipHash.get(b)&&this.addClipToList(b);return this._clipHash.get(b)},set_completeCallback:function(b){return this._completeCallback=b},get_completeCallback:function(){return this._completeCallback},get_currentClip:function(){return this._currentClip},cancelClipQueue:function(){if(null!=this._clipQueue)for(;0<this._clipQueue.length;)this._clipQueue.pop();null!=this._currentSignalConnection&&this._currentSignalConnection.dispose();null!=this._currentClip&&(this._currentClip.gotoAndStop(1),this._target.containsSprite(this._currentClip)&&this._target.removeChild(this._currentClip));this._completeCallback=this._interimCallback=null},playbackCompleteHandler:function(){this._currentSignalConnection.dispose();this._currentClip.gotoAndStop(1);this._target.removeChild(this._currentClip);0<this._clipQueue.length?(null!=this._interimCallback&&this._interimCallback(this._currentClip.symbol.get_name()),this.playClip(this._clipQueue.shift())):(null!=this._completeCallback&&this._completeCallback(),this._completeCallback=this._interimCallback=null)},sectionPlaybackComplete:function(){this._currentClip.get_currentFrame()==this._currentClip.get_totalFrames()&&this.playbackCompleteHandler()},playClipQueue:function(b,d,a){this.cancelClipQueue();this._clipQueue=b;null!=a&&(this._interimCallback=a);this.playClip(b.shift(),d)},playClipAt:function(b,d,a){var h=this;this.addClipToStage(b);this._currentSignalConnection=this._currentClip.get_onComplete().connect(function(){h.sectionPlaybackComplete()});null!=a&&(this._completeCallback=a);this._currentClip.gotoAndPlay(d,this._currentClip.get_nextLabelFrame(),0);null},playClip:function(b,d){this.playClipAt(b,this.getClip(b).get_currentFrame(),d)},addClipToStage:function(b){this._currentClip=this.getClip(b);this._target.addChild(this._currentClip)},addClipToList:function(b){this._clipHash.set(b,a.common.utils.LibraryTools.createMovieClip(b))},setTarget:function(b){this._target=b},__class__:a.common.app.ClipSequencer};a.common.app.CompositionFactory=function(){};g["com.cmm.common.app.CompositionFactory"]=a.common.app.CompositionFactory;a.common.app.CompositionFactory.__name__=["com","cmm","common","app","CompositionFactory"];a.common.app.CompositionFactory.registerCompositionReference=function(b){null==a.common.app.CompositionFactory._compositionObjectHash&&(a.common.app.CompositionFactory._compositionObjectHash=new A);for(var d=0,e=b.groups.length;d<e;)for(var h=d++,c=b.groups[h].id,l=b.groups[h].classes,f=b.groups[h].components,h=b.groups[h].params,g=0,i=l.length;g<i;){var j=g++;b.compositions.push({className:l[j],id:c,components:f,params:h})}d=0;for(e=b.compositions.length;d<e;)h=d++,a.common.app.CompositionFactory._compositionObjectHash.set(b.compositions[h].className,b.compositions[h]);null};a.common.app.CompositionFactory.getCompositionObjectByClassName=function(b){return a.common.app.CompositionFactory._compositionObjectHash.get(b)};a.common.app.CompositionFactory.prototype={__class__:a.common.app.CompositionFactory};a.common.app.SceneManager=function(){};g["com.cmm.common.app.SceneManager"]=a.common.app.SceneManager;a.common.app.SceneManager.__name__=["com","cmm","common","app","SceneManager"];a.common.app.SceneManager.addSceneToList=function(b){a.common.app.SceneManager.createClipSeqInstance();a.common.app.SceneManager._clipSequencer.addClipToList(b);return a.common.app.SceneManager._clipSequencer.getClip(b)};a.common.app.SceneManager.createClipSeqInstance=function(){null==a.common.app.SceneManager._clipSequencer&&(a.common.app.SceneManager._clipSequencer=new a.common.app.ClipSequencer,a.common.app.SceneManager._clipSequencer.setTarget(a.common.app.Wrapper.instance.get_animLayer()))};a.common.app.SceneManager.playSceneAt=function(b,d,e){a.common.app.SceneManager.createClipSeqInstance();a.common.app.SceneManager._clipSequencer.playClipAt(b,d,e)};a.common.app.SceneManager.playSceneQueue=function(b,d,e){a.common.app.SceneManager.createClipSeqInstance();a.common.app.SceneManager._clipSequencer.playClipQueue(b,d,e)};a.common.app.SceneManager.get_currentScene=function(){return a.common.app.SceneManager._clipSequencer.get_currentClip()};a.common.app.SceneManager.cancelSceneQueue=function(){a.common.app.SceneManager._clipSequencer.cancelClipQueue()};a.common.app.SceneManager.prototype={__class__:a.common.app.SceneManager};a.common.app.State=function(){this._aborted=!1;this.nextState=""};g["com.cmm.common.app.State"]=a.common.app.State;a.common.app.State.__name__=["com","cmm","common","app","State"];a.common.app.State.prototype={stateComplete:function(){!1==this._aborted&&this.completeHandler()},exitState:function(){},enterState:function(){this._aborted=!1},__class__:a.common.app.State};a.common.app.StateList=function(){this.statePackagePath=""};g["com.cmm.common.app.StateList"]=a.common.app.StateList;a.common.app.StateList.__name__=["com","cmm","common","app","StateList"];a.common.app.StateList.prototype={__class__:a.common.app.StateList};a.common.app.StateMachine=function(b,d){this._states=[];this._stateIDs=[];null==d?this.createStateMachineFromClassEnum(b):this.createStateMachineFromXML(b,d)};g["com.cmm.common.app.StateMachine"]=a.common.app.StateMachine;a.common.app.StateMachine.__name__=["com","cmm","common","app","StateMachine"];a.common.app.StateMachine.prototype={stopMachine:function(){this.completeHandler=this._currentState=null},transitionToNextState:function(){this._currentState.exitState();if(0<this._currentState.nextState.length)this.startState(this._currentState.nextState);else{var b=a.common.utils.ArrayUtil.indexOf(this._currentStateID,this._stateIDs)+1;b<this._stateIDs.length?this.startState(this._stateIDs[b]):(null!=this.completeHandler&&this.completeHandler(),this.stopMachine())}},startState:function(b){this._currentStateID=b;b=this._states[a.common.utils.ArrayUtil.indexOf(this._currentStateID,this._stateIDs)];this._currentState=b.state;this._currentState.nextState=b.nextState;this._currentState.completeHandler=p(this,this.transitionToNextState);this._currentState.enterState()},startMachine:function(){this.startState(this._stateIDs[0])},addState:function(b,d,a){this._stateIDs.push(b);b={};b.state=z.createInstance(d,[]);b.nextState=a;this._states.push(b)},createStateMachineFromXML:function(b,d){for(var a=d.elementsNamed("stateMachine").next().elementsNamed("state");a.hasNext();){var h=a.next(),c=h.get("classID");0<b.statePackagePath.length&&(c=b.statePackagePath+"."+c);this.addState(c,z.resolveClass(c),h.get("nextState"))}},createStateMachineFromClassEnum:function(b){for(var b=b.stateClassList,d=b.length,a=0;a<d;){var h=a++;this.addState(z.getClassName(b[h]),b[h],"")}},__class__:a.common.app.StateMachine};a.common.app.Wrapper=function(){this.fullscreenEnabled=!1;this.LOADER_ID="mc_loader";this.PRELOADER_ID="mc_preloader";a.common.app.Wrapper.instance=this;this.initPlatform();this.initGameLayers();this.loadPreloader()};g["com.cmm.common.app.Wrapper"]=a.common.app.Wrapper;a.common.app.Wrapper.__name__=["com","cmm","common","app","Wrapper"];a.common.app.Wrapper.prototype={get_gameLayer:function(){return this._gameLayer},get_animLayer:function(){return this._animLayer},get_noScaleTillLargeLayer:function(){return this._noScaleTillLargeLayer},onResize:function(){var b=1,d=1,e=k._platform.getStage().get_width(),h=k._platform.getStage().get_height(),c=j.DEFAULT_WIDTH,l=j.DEFAULT_HEIGHT,b="default";e>c&&h>l?(j.GLOBAL_SCALE=Math.min(e/c,h/l),b="bothLarger"):e>c&&h<=l?(j.GLOBAL_SCALE=h/l,b="widthLarger"):e<=c&&h>l?(j.GLOBAL_SCALE=e/c,b="heightLarger"):e<c&&h<l&&(b=e/c,d=h/l,j.GLOBAL_SCALE=Math.min(b,d),b=d>b?"heightLarger":"widthLarger");null!=this._gameLayer&&(j.ASSET_SCALE_INV=j.GLOBAL_SCALE/j.ASSET_SCALE-j.GLOBAL_SCALE,this._gameLayer.setScale(j.GLOBAL_SCALE+j.ASSET_SCALE_INV),this._animLayer.setScale(j.GLOBAL_SCALE+j.ASSET_SCALE_INV),1>j.GLOBAL_SCALE?(this._noScaleTillLargeLayer.setScale(1),this._noScaleTillLargeLayer.scissor.width=j.DEFAULT_WIDTH*(j.GLOBAL_SCALE+j.ASSET_SCALE_INV),this._noScaleTillLargeLayer.scissor.height=j.DEFAULT_HEIGHT*(j.GLOBAL_SCALE+j.ASSET_SCALE_INV)):(this._noScaleTillLargeLayer.setScale(j.GLOBAL_SCALE+j.ASSET_SCALE_INV),this._noScaleTillLargeLayer.scissor.width=j.DEFAULT_WIDTH,this._noScaleTillLargeLayer.scissor.height=j.DEFAULT_HEIGHT),a.tbm_bbs.utils.BrowserDetect.iPhone4&&(a.common.app.Wrapper.IPHONE4_SCALE=Math.min(0.5*e/c,0.5*h/l),this._noScaleTillLargeLayer.setScale(2),this._noScaleTillLargeLayer.scissor.width=j.DEFAULT_WIDTH*a.common.app.Wrapper.IPHONE4_SCALE,this._noScaleTillLargeLayer.scissor.height=j.DEFAULT_HEIGHT*a.common.app.Wrapper.IPHONE4_SCALE));"widthLarger"==b?(this._noScaleTillLargeLayer.x.set__(this._animLayer.x.set__(this._gameLayer.x.set__(k._platform.getStage().get_width()/2-j.DEFAULT_WIDTH*j.GLOBAL_SCALE/2))),this._noScaleTillLargeLayer.y.set__(this._animLayer.y.set__(this._gameLayer.y.set__(0)))):"heightLarger"==b&&(this._noScaleTillLargeLayer.x.set__(this._animLayer.x.set__(this._gameLayer.x.set__(0))),this._noScaleTillLargeLayer.y.set__(this._animLayer.y.set__(this._gameLayer.y.set__(k._platform.getStage().get_height()/2-j.DEFAULT_HEIGHT*j.GLOBAL_SCALE/2))));k._platform.getStage().orientation._value==M.Landscape&&(this._noScaleTillLargeLayer.x.set__(this._animLayer.x.set__(this._gameLayer.x.set__(k._platform.getStage().get_width()/2-j.DEFAULT_WIDTH*j.GLOBAL_SCALE/2))),this._noScaleTillLargeLayer.y.set__(this._animLayer.y.set__(this._gameLayer.y.set__(0))));!0==a.tbm_bbs.utils.BrowserDetect.iPhone4&&this._noScaleTillLargeLayer.y.set__(this._animLayer.y.set__(this._gameLayer.y.set__(0)));null!=this._bg&&(this._bg.width.set__(e),this._bg.height.set__(h));null!=this._orientationErrorLayer&&(null!=this._orientationErrorBG&&(this._orientationErrorBG.width.set__(k._platform.getStage().get_width()),this._orientationErrorBG.height.set__(k._platform.getStage().get_height())),null!=this._orientationErrorImage&&(b=e/this._orientationErrorImage.getNaturalWidth(),d=h/this._orientationErrorImage.getNaturalHeight(),e=Math.min(b,d),this._orientationErrorImage.setScale(e),this._orientationErrorImage.x.set__(this._animLayer.x._value),this._orientationErrorImage.y.set__(this._animLayer.y._value),this._orientationErrorImage.x.set__(k._platform.getStage().get_width()/2-this._orientationErrorImage.getNaturalWidth()*e/2),this._orientationErrorImage.y.set__(k._platform.getStage().get_height()/2-this._orientationErrorImage.getNaturalHeight()*e/2)))},onTimerRun:function(){6<=a.tbm_bbs.utils.BrowserDetect.platformVersion&&k._platform.getStage().orientation._value==M.Landscape&&(320<=m.window.innerHeight?!1==this.fullscreenEnabled&&(this.fullscreenEnabled=!0,4==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion?k._platform.getStage().requestResize(480,320):5==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion&&k._platform.getStage().requestResize(568,320)):!0==this.fullscreenEnabled&&(this.fullscreenEnabled=!1,4==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion?k._platform.getStage().requestResize(480,268):5==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion&&k._platform.getStage().requestResize(568,268)))},initFullscreenWatch:function(){if(4==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion||5==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion)(new $a(100)).run=p(this,this.onTimerRun)},clearOrientationErrorScreen:function(){this._orientationErrorImage.set_visible(!1);this._orientationErrorBG.set_visible(!1);a.common.event.EDispatcher.dispatchEvent(new a.common.event.CMMEvent("com.cmm.common.events.onFocusIn"));6<=a.tbm_bbs.utils.BrowserDetect.platformVersion&&(!0==this.fullscreenEnabled?4==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion?k._platform.getStage().requestResize(480,320):5==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion&&k._platform.getStage().requestResize(568,320):4==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion?k._platform.getStage().requestResize(480,268):5==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion&&k._platform.getStage().requestResize(568,268))},showOrientationErrorScreen:function(){this._orientationErrorImage.set_visible(!0);this._orientationErrorBG.set_visible(!0);a.common.event.EDispatcher.dispatchEvent(new a.common.event.CMMEvent("com.cmm.common.events.onFocusOut"));6<=a.tbm_bbs.utils.BrowserDetect.platformVersion&&(4==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion?k._platform.getStage().requestResize(320,416):5==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion&&k._platform.getStage().requestResize(320,504))},onOrientationChange:function(b){b==M.Portrait?this.showOrientationErrorScreen():this.clearOrientationErrorScreen()},initOrientationWatch:function(){this._orientationErrorBG=new U(0,k._platform.getStage().get_width(),k._platform.getStage().get_height());this._orientationErrorLayer.addChild(this._orientationErrorBG);this._orientationErrorBG.set_visible(!1);var b=1<=j.GLOBAL_SCALE?"orientation_ipad":"orientation_iphone";if(4==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion||5==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion)b="orientation_iphone";this._orientationErrorImage=new X(a.common.io.LoadMaster.getTexture("config",b));this._orientationErrorLayer.addChild(this._orientationErrorImage);this._orientationErrorImage.set_visible(!1);this.onResize();k._platform.getStage().orientation._value==M.Portrait&&this.showOrientationErrorScreen();k._platform.getStage().orientation.watch(p(this,this.onOrientationChange))},init:function(){null},onPrimaryLoadSuccess:function(){this.init()},loadPrimary:function(){a.common.io.LoadMaster.loadBatch("primary",p(this,this.onPrimaryLoadSuccess))},onLoaderSuccess:function(){null!=this._preloader&&this._gameLayer.removeChild(this._preloader);var b=a.common.utils.LibraryTools.createMovieClip(this.LOADER_ID);a.common.io.LoadMaster.loadMC=b;null!=a.common.io.LoadMaster.loadMC.getChildByName("mc_logoHolder")&&null!=a.common.io.LoadMaster.getTexture("config","logo")&&a.common.io.LoadMaster.loadMC.getChildByName("mc_logoHolder").addChild(new X(a.common.io.LoadMaster.getTexture("config","logo")));this.loadPrimary()},loadLoader:function(){a.common.io.LoadMaster.loadBatch("loader",p(this,this.onLoaderSuccess))},createDynamicTextLibrary:function(){a.common.text.DynamicTextLibrary.createLibrary(a.common.io.LoadMaster.getJSON("config","strings.json"))},onConfigLoadSuccess:function(){a.tbm_bbs.utils.BrowserDetect.init();var b=!1,d=!1,e=a.common.io.LoadMaster.getJSON("config","supported_browsers.json"),h=m.window.navigator;if(h.standalone){for(var b=!0,c=0,e=e.standalones;c<e.length;){var l=e[c];++c;if(a.tbm_bbs.utils.BrowserDetect.platformType==l.type&&a.tbm_bbs.utils.BrowserDetect.platformVersion>=l.minVersion){d=!0;break}}this.fullscreenEnabled=!0;"iOS"==a.tbm_bbs.utils.BrowserDetect.platformType&&6<=a.tbm_bbs.utils.BrowserDetect.platformVersion&&(4==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion?k._platform.getStage().requestResize(480,320):5==a.tbm_bbs.utils.BrowserDetect.iPhoneVersion&&k._platform.getStage().requestResize(568,320))}else{c=0;for(e=e.browsers;c<e.length;)if(l=e[c],++c,a.tbm_bbs.utils.BrowserDetect.browserType==l.type){if(a.tbm_bbs.utils.BrowserDetect.browserVersion>=l.minVersion){b=!0;c=0;for(e=l.platforms;c<e.length;)if(l=e[c],++c,a.tbm_bbs.utils.BrowserDetect.platformType==l.type)if(null==l.minVersion){d=!0;break}else if(a.tbm_bbs.utils.BrowserDetect.platformVersion>=l.minVersion){d=!0;break}break}break}}!1==b||!1==d?this._gameLayer.addChild(new X(a.common.io.LoadMaster.getTexture("config","unsupported"))):(a.common.audio.SoundPlayerRemote.init(a.common.io.LoadMaster.getXML("config","soundFiles.xml")),this.createDynamicTextLibrary(),this.initOrientationWatch(),h.standalone||this.initFullscreenWatch(),this.loadLoader())},loadConfig:function(){a.common.io.LoadMaster.loadBatch("config",p(this,this.onConfigLoadSuccess))},onPreLoadSuccess:function(){k._platform.getStage().resize.connect(p(this,this.onResize));this.onResize();this._preloader=a.common.utils.LibraryTools.createMovieClip(this.PRELOADER_ID);null!=this._preloader&&this._gameLayer.addChild(this._preloader);this.loadConfig()},loadPreloader:function(){a.common.io.LoadMaster.loadBatch("preload",p(this,this.onPreLoadSuccess))},initGameLayers:function(){this._bg=new U(j.DEFAULT_BG_COLOR,j.DEFAULT_WIDTH,j.DEFAULT_HEIGHT);this._noScaleTillLargeLayer=new a.common.display.SpriteContainer;this._noScaleTillLargeLayer.scissor=new T(0,0,j.DEFAULT_WIDTH*j.ASSET_SCALE,j.DEFAULT_HEIGHT*j.ASSET_SCALE);this._gameLayer=new a.common.display.SpriteContainer;this._gameLayer.scissor=new T(0,0,j.DEFAULT_WIDTH*j.ASSET_SCALE,j.DEFAULT_HEIGHT*j.ASSET_SCALE);this._animLayer=new a.common.display.SpriteContainer;this._animLayer.scissor=new T(0,0,j.DEFAULT_WIDTH*j.ASSET_SCALE,j.DEFAULT_HEIGHT*j.ASSET_SCALE);var b=new D;b.add(this._bg);k.root.addChild(b);b=new D;b.add(this._noScaleTillLargeLayer);k.root.addChild(b);b=new D;b.add(this._gameLayer);k.root.addChild(b);b=new D;b.add(this._animLayer);k.root.addChild(b);this._orientationErrorLayer=new a.common.display.SpriteContainer;b=new D;b.add(this._orientationErrorLayer);k.root.addChild(b)},initPlatform:function(){k.init()},__class__:a.common.app.Wrapper};C=function(b,d){this._value=b;null!=d&&(this._changed=new la(d))};g["flambe.util.Value"]=C;C.__name__=["flambe","util","Value"];C.prototype={get_changed:function(){null==this._changed&&(this._changed=new la);return this._changed},set__:function(b){var d=this._value;b!=d&&(this._value=b,null!=this._changed&&this._changed.emit2(b,d));return b},watch:function(b){b(this._value,this._value);return this.get_changed().connect(b)},__class__:C};fa=function(b,d){this._internal_next=null;this._signal=b;this._internal_listener=d;this.stayInList=!0};g["flambe.util.SignalConnection"]=fa;fa.__name__=["flambe","util","SignalConnection"];fa.__interfaces__=[$];fa.prototype={dispose:function(){null!=this._signal&&(this._signal._internal_disconnect(this),this._signal=null)},once:function(){this.stayInList=!1;return this},__class__:fa};J=function(b){this._head=null!=b?new fa(this,b):null;this._deferredTasks=null};g["flambe.util.SignalBase"]=J;J.__name__=["flambe","util","SignalBase"];J.prototype={listRemove:function(b){for(var d=null,a=this._head;null!=a;){if(a==b){b=a._internal_next;null==d?this._head=b:d._internal_next=b;break}d=a;a=a._internal_next}},listAdd:function(b,d){if(d)b._internal_next=this._head,this._head=b;else{for(var a=null,h=this._head;null!=h;)a=h,h=h._internal_next;null!=a?a._internal_next=b:this._head=b}},didEmit:function(b){for(this._head=b;null!=this._deferredTasks;)this._deferredTasks.fn(),this._deferredTasks=this._deferredTasks.next},willEmit:function(){var b=this._head;this._head=J.DISPATCHING_SENTINEL;return b},defer:function(b){for(var d=null,a=this._deferredTasks;null!=a;)d=a,a=a.next;b=new Xa.Task(b);null!=d?d.next=b:this._deferredTasks=b},emit2:function(b,d){for(var a=this.willEmit(),h=a;null!=h;)h._internal_listener(b,d),h.stayInList||h.dispose(),h=h._internal_next;this.didEmit(a)},emit1:function(b){for(var d=this.willEmit(),a=d;null!=a;)a._internal_listener(b),a.stayInList||a.dispose(),a=a._internal_next;this.didEmit(d)},emit0:function(){for(var b=this.willEmit(),d=b;null!=d;)d._internal_listener(),d.stayInList||d.dispose(),d=d._internal_next;this.didEmit(b)},_internal_disconnect:function(b){var d=this;this._head==J.DISPATCHING_SENTINEL?this.defer(function(){d.listRemove(b)}):this.listRemove(b)},connectImpl:function(b,d){var a=this,h=new fa(this,b);this._head==J.DISPATCHING_SENTINEL?this.defer(function(){a.listAdd(h,d)}):this.listAdd(h,d);return h},__class__:J};la=function(b){J.call(this,b)};g["flambe.util.Signal2"]=la;la.__name__=["flambe","util","Signal2"];la.__super__=J;la.prototype=r(J.prototype,{connect:function(b,d){null==d&&(d=!1);return this.connectImpl(b,d)},__class__:la});a.common.app.games={};a.common.app.games.GameGlobals=function(){};g["com.cmm.common.app.games.GameGlobals"]=a.common.app.games.GameGlobals;a.common.app.games.GameGlobals.__name__="com,cmm,common,app,games,GameGlobals".split(",");a.common.audio={};a.common.audio.SoundClip=function(b,d){this.playing=this.muted=!1;this.channelIdx=-1;this._onCompleteFunc=null;this.channel="";this.curSoundIdx=0;this.soundFiles=b;this._onCompleteFunc=d};g["com.cmm.common.audio.SoundClip"]=a.common.audio.SoundClip;a.common.audio.SoundClip.__name__=["com","cmm","common","audio","SoundClip"];a.common.audio.SoundClip.__super__=y;a.common.audio.SoundClip.prototype=r(y.prototype,{onUpdate:function(b){y.prototype.onUpdate.call(this,b);null!=this.playback&&this.playback.get_ended()&&this.curSoundIdx<this.soundFiles.length+1&&this.play()},registerOnFinishFunc:function(b){this._onSoundClipFinishFunc=b},getChannel:function(){return this.soundFiles[0].channel},setChannelIdx:function(b){return this.channelIdx=b},getPlaying:function(){return!this.playback.get_paused()},unmute:function(){this.muted=!1;null!=this.playback&&this.curSoundIdx<this.soundFiles.length+1&&this.playback.volume.set__(this.soundFiles[this.curSoundIdx-1].volume)},mute:function(){this.muted=!0;null!=this.playback&&this.playback.volume.set__(0)},stop:function(){this.curSoundIdx=2147483647;null!=this.playback&&this.playback.dispose();null!=this._onSoundClipFinishFunc&&this._onSoundClipFinishFunc(this)},play:function(){if(this.curSoundIdx<this.soundFiles.length){var b=this.soundFiles[this.curSoundIdx];null!=b&&(this.playback=0<b.loops?a.common.io.LoadMaster.getSound(b.packName,a.common.audio.SoundPlayerRemote.path+b.channel+"/"+b.filename).loop(b.volume):a.common.io.LoadMaster.getSound(b.packName,a.common.audio.SoundPlayerRemote.path+b.channel+"/"+b.filename).play(b.volume))}else this.playback.dispose(),null!=this._onCompleteFunc&&this._onCompleteFunc(),null!=this._onSoundClipFinishFunc&&this._onSoundClipFinishFunc(this);this.curSoundIdx++},get_name:function(){return"SoundClip_6"},__class__:a.common.audio.SoundClip});a.common.audio.SoundClipChannel=function(b,d,a){null==a&&(a=!1);null==d&&(d=!1);this.overrideSound=this.muted=this.muteable=!1;this.channelID="";this.name=this.get_name();this.setOverrideSound(d);this.muteable=a;this.soundClips=[]};g["com.cmm.common.audio.SoundClipChannel"]=a.common.audio.SoundClipChannel;a.common.audio.SoundClipChannel.__name__=["com","cmm","common","audio","SoundClipChannel"];a.common.audio.SoundClipChannel.__super__=y;a.common.audio.SoundClipChannel.prototype=r(y.prototype,{getPlaying:function(){for(var b=0,d=this.soundClips.length;b<d;)if(this.soundClips[b++].getPlaying())return!0;return!1},setOverrideSound:function(b){return this.overrideSound=b},setChannelID:function(b){return this.channelID=b},onSoundClipFinish:function(b){if(-1<b.channelIdx){this.owner.removeChild(b.owner);this.soundClips.splice(b.channelIdx,1);for(var b=0,d=this.soundClips.length;b<d;){var a=b++;this.soundClips[a].setChannelIdx(a)}}},unmute:function(){this.muted=!1;for(var b=0,d=this.soundClips.length;b<d;)this.soundClips[b++].unmute()},mute:function(){this.muted=!0;for(var b=0,d=this.soundClips.length;b<d;)this.soundClips[b++].mute()},stop:function(){if(0<this.soundClips.length){for(var b=0,d=this.soundClips.length;b<d;){var a=b++;if(a>=this.soundClips.length)break;else this.soundClips[a].stop()}for(;0<this.soundClips.length;)this.soundClips.pop()}},play:function(b){!0==this.overrideSound&&this.stop();this.soundClips.push(b);this.owner.addChild((new D).add(b));b.setChannelIdx(this.soundClips.length-1);b.registerOnFinishFunc(p(this,this.onSoundClipFinish));b.play();this.muted&&b.mute()},get_name:function(){return"SoundClipChannel_5"},__class__:a.common.audio.SoundClipChannel});a.common.audio.SoundFile=function(b,d,a,h,c,l){null==l&&(l="");null==c&&(c=0);null==h&&(h=0);null==a&&(a="");null==d&&(d="");null==b&&(b="");this.packName="";this.loops=this.volume=0;this.channel=this.id=this.filename="";this.setChannel(b);this.setID(d);this.setFilename(a);this.setLoops(h);this.setVolume(c);this.setPackName(l)};g["com.cmm.common.audio.SoundFile"]=a.common.audio.SoundFile;a.common.audio.SoundFile.__name__=["com","cmm","common","audio","SoundFile"];a.common.audio.SoundFile.prototype={clone:function(){return new a.common.audio.SoundFile(this.channel,this.id,this.filename,this.loops,this.volume,this.packName)},setPackName:function(b){return this.packName=b},setVolume:function(b){100<b?b=100:0>b&&(b=0);return this.volume=1<b?b/100:b},setLoops:function(b){return this.loops=b},setFilename:function(b){return this.filename=b},setID:function(b){return this.id=b},setChannel:function(b){return this.channel=b},__class__:a.common.audio.SoundFile};D=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};g["flambe.Entity"]=D;D.__name__=["flambe","Entity"];D.__interfaces__=[$];D.prototype={dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},insertChild:function(b,d,a){null==a&&(a=!0);if(null==this.firstChild||!a&&0==d)return this.addChild(b,!1);for(var h=null,c=this.firstChild,l=this.firstChild.next,f=0;null!=c&&f!=d;)h=c,c=c.next,null!=c&&(l=c.next),f++;if(null!=c)null!=b.parent&&b.parent.removeChild(b),b.parent=this,a?(c.next=b,b.next=l):(h.next=b,b.next=c);else return this.addChild(b);return b},removeChild:function(b){for(var d=null,a=this.firstChild;null!=a;){var h=a.next;if(a==b){null==d?this.firstChild=h:d.next=h;a.parent=null;a.next=null;break}d=a;a=h}},addChild:function(b,a){null==a&&(a=!0);null!=b.parent&&b.parent.removeChild(b);b.parent=this;if(a){for(var e=null,h=this.firstChild;null!=h;)e=h,h=h.next;null!=e?e.next=b:this.firstChild=b}else b.next=this.firstChild,this.firstChild=b;return this},remove:function(b){for(var a=null,e=this.firstComponent;null!=e;){var h=e.next;if(e==b){null==a?this.firstComponent=h:a._internal_init(this,h);delete this._compMap[e.get_name()];e.onRemoved();e._internal_init(null,null);break}a=e;e=h}},add:function(b){null!=b.owner&&b.owner.remove(b);var a=b.get_name(),e=this._compMap[a];null!=e&&this.remove(e);this._compMap[a]=b;a=null;for(e=this.firstComponent;null!=e;)a=e,e=e.next;null!=a?a.next=b:this.firstComponent=b;b._internal_init(this,null);b.onAdded();return this},__class__:D};a.common.audio.SoundPlayerRemote=function(){};g["com.cmm.common.audio.SoundPlayerRemote"]=a.common.audio.SoundPlayerRemote;a.common.audio.SoundPlayerRemote.__name__=["com","cmm","common","audio","SoundPlayerRemote"];a.common.audio.SoundPlayerRemote.init=function(b,d){k.root.addChild(a.common.audio.SoundPlayerRemote.entity);a.common.audio.SoundPlayerRemote._onInitComplete=d;a.common.audio.SoundPlayerRemote._soundFilesXml=b;for(var e=a.common.audio.SoundPlayerRemote._soundFilesXml.firstChild().elements();e.hasNext();){var h=e.next(),c=!1;null!=h.get("muteable")&&(c=!0);var l=h.get("channel");null!=l&&null==a.common.audio.SoundPlayerRemote.getSoundClipChannel(l)&&a.common.audio.SoundPlayerRemote.setSoundClipChannel(l,!1,c);for(h=h.elements();h.hasNext();){var f=h.next();if(null!=f){c=new a.common.audio.SoundFile;null!=l&&c.setChannel(l);var g=f.get("loops"),i=f.get("volume");null!=g&&c.setLoops(n.parseInt(g));null!=i&&c.setVolume(n.parseFloat(i));g=f.get("id");i=f.get("file");-1<i.indexOf(".")&&(i=i.split(".")[0]);null!=g&&(c.setID(g),null==a.common.audio.SoundPlayerRemote._soundFilesHashByID.get(g)?a.common.audio.SoundPlayerRemote._soundFilesHashByID.set(g,[c]):a.common.audio.SoundPlayerRemote._soundFilesHashByID.get(g).push(c));null!=i&&(c.setFilename(i),a.common.audio.SoundPlayerRemote._soundFilesHashByFilename.set(i,c));f=f.get("packName");null!=f?(c.setPackName(f),""==f&&c.setPackName("soundCommonPack")):c.setPackName("soundCommonPack")}}}null==a.common.audio.SoundPlayerRemote.getSoundClipChannel("music")&&a.common.audio.SoundPlayerRemote.setSoundClipChannel("music");null==a.common.audio.SoundPlayerRemote.getSoundClipChannel("vo")&&a.common.audio.SoundPlayerRemote.setSoundClipChannel("vo");a.common.audio.SoundPlayerRemote.getSoundClipChannel("music").setOverrideSound(!0);a.common.audio.SoundPlayerRemote.getSoundClipChannel("vo").setOverrideSound(!0);a.common.event.EDispatcher.addEventListener("com.cmm.common.events.onFocusOut",a.common.audio.SoundPlayerRemote.onFocusOut);a.common.event.EDispatcher.addEventListener("com.cmm.common.events.onFocusIn",a.common.audio.SoundPlayerRemote.onFocusIn);if("iOS"==a.tbm_bbs.utils.BrowserDetect.platformType&&6>a.tbm_bbs.utils.BrowserDetect.platformVersion||"Android"==a.tbm_bbs.utils.BrowserDetect.platformType)a.common.audio.SoundPlayerRemote.loadiOS5Audio("gameLoop","assets/primary/music/gameLoop1.mp3","audio/mp3"),m.document.body.addEventListener("touchstart",a.common.audio.SoundPlayerRemote.onTouchStart,!0);null!=a.common.audio.SoundPlayerRemote._onInitComplete&&a.common.audio.SoundPlayerRemote._onInitComplete()};a.common.audio.SoundPlayerRemote.loadiOS5Audio=function(b,d,e){var h=m.document.createElement("audio");h.setAttribute("id",b);h.setAttribute("autobuffer","autobuffer");h.setAttribute("preload","auto");h.setAttribute("style","display:none");h.setAttribute("loop","loop");var c=m.document.createElement("source");h.setAttribute("src",d);h.setAttribute("type",e);h.style.cssText="display: none !important";h.appendChild(c);m.document.body.appendChild(h);a.common.audio.SoundPlayerRemote.iOS5AudioIDs.push(b)};a.common.audio.SoundPlayerRemote.onTouchStart=function(){if(!1==a.common.audio.SoundPlayerRemote._playediOS5Audio){m.document.body.removeEventListener("touchstart",a.common.audio.SoundPlayerRemote.onTouchStart);var b=m.document.getElementById("gameLoop");0<b.currentTime&&(b.currentTime=0);b.volume=0.4;b.play();a.common.audio.SoundPlayerRemote._ios5AudioMuted=!1;a.common.audio.SoundPlayerRemote._playediOS5Audio=!0}};a.common.audio.SoundPlayerRemote.onFocusOut=function(){for(a.common.audio.SoundPlayerRemote._ios5AudioMutedBeforeFocusOut=!a.common.audio.SoundPlayerRemote._ios5AudioMuted;0<a.common.audio.SoundPlayerRemote._unmutedBeforeFocusOut.length;)a.common.audio.SoundPlayerRemote._unmutedBeforeFocusOut.pop();for(var b=a.common.audio.SoundPlayerRemote._soundClipChannels.keys();b.hasNext();){var d=b.next();!1==a.common.audio.SoundPlayerRemote._soundClipChannels.get(d).muted&&a.common.audio.SoundPlayerRemote._unmutedBeforeFocusOut.push(d)}a.common.audio.SoundPlayerRemote.muteAllChannels()};a.common.audio.SoundPlayerRemote.onFocusIn=function(){if(!0==a.common.audio.SoundPlayerRemote._ios5AudioMutedBeforeFocusOut&&("iOS"==a.tbm_bbs.utils.BrowserDetect.platformType&&6>a.tbm_bbs.utils.BrowserDetect.platformVersion||"Android"==a.tbm_bbs.utils.BrowserDetect.platformType)){var b=m.document.getElementById("gameLoop");b.muted=!1;b.play();a.common.audio.SoundPlayerRemote._ios5AudioMuted=!1}for(var b=0,d=a.common.audio.SoundPlayerRemote._unmutedBeforeFocusOut.length;b<d;){var e=b++;a.common.audio.SoundPlayerRemote.getSoundClipChannel(a.common.audio.SoundPlayerRemote._unmutedBeforeFocusOut[e]).unmute()}};a.common.audio.SoundPlayerRemote.getSoundClipChannel=function(b){return!0==a.common.audio.SoundPlayerRemote._soundClipChannels.exists(b)?a.common.audio.SoundPlayerRemote._soundClipChannels.get(b):null};a.common.audio.SoundPlayerRemote.setSoundClipChannel=function(b,d,e){null==e&&(e=!1);null==d&&(d=!1);d=new a.common.audio.SoundClipChannel(b,d,e);a.common.audio.SoundPlayerRemote.entity.addChild((new D).add(d));a.common.audio.SoundPlayerRemote._soundClipChannels.set(b,d)};a.common.audio.SoundPlayerRemote.getSoundFilesFromID=function(b){for(var d=[],b=b.split(","),e=0,h=b.length;e<h;){var c=e++;if(a.common.audio.SoundPlayerRemote._soundFilesHashByID.exists(b[c]))for(var l=0,c=a.common.audio.SoundPlayerRemote._soundFilesHashByID.get(b[c]);l<c.length;){var f=c[l];++l;d.push(f)}else a.common.audio.SoundPlayerRemote._soundFilesHashByFilename.exists(b[c])&&d.push(a.common.audio.SoundPlayerRemote._soundFilesHashByFilename.get(b[c]).clone())}return d};a.common.audio.SoundPlayerRemote.play=function(b,d){var e=a.common.audio.SoundPlayerRemote.getSoundFilesFromID(b),e=new a.common.audio.SoundClip(e,d);if("iOS"==a.tbm_bbs.utils.BrowserDetect.platformType&&6>a.tbm_bbs.utils.BrowserDetect.platformVersion||"Android"==a.tbm_bbs.utils.BrowserDetect.platformType)return null;a.common.audio.SoundPlayerRemote.getSoundClipChannel(e.getChannel()).play(e);return e};a.common.audio.SoundPlayerRemote.stopChannel=function(b){null==b&&(b="");""==b?a.common.audio.SoundPlayerRemote.stopAllChannels():a.common.audio.SoundPlayerRemote.getSoundClipChannel(b).stop()};a.common.audio.SoundPlayerRemote.stopAllChannels=function(){for(var b=a.common.audio.SoundPlayerRemote._soundClipChannels.iterator();b.hasNext();)b.next().stop()};a.common.audio.SoundPlayerRemote.muteAllChannels=function(){if("iOS"==a.tbm_bbs.utils.BrowserDetect.platformType&&6>a.tbm_bbs.utils.BrowserDetect.platformVersion||"Android"==a.tbm_bbs.utils.BrowserDetect.platformType){var b=m.document.getElementById("gameLoop");b.muted=!0;b.pause();a.common.audio.SoundPlayerRemote._ios5AudioMuted=!0}for(b=a.common.audio.SoundPlayerRemote._soundClipChannels.iterator();b.hasNext();)b.next().mute()};a.common.audio.SoundPlayerRemote.muteMuteableChannels=function(){if("iOS"==a.tbm_bbs.utils.BrowserDetect.platformType&&6>a.tbm_bbs.utils.BrowserDetect.platformVersion||"Android"==a.tbm_bbs.utils.BrowserDetect.platformType){var b=m.document.getElementById("gameLoop");b.muted=!0;b.pause();a.common.audio.SoundPlayerRemote._ios5AudioMuted=!0}a.common.audio.SoundPlayerRemote.isMuted=!0;for(b=a.common.audio.SoundPlayerRemote._soundClipChannels.iterator();b.hasNext();){var d=b.next();!0==d.muteable&&d.mute()}};a.common.audio.SoundPlayerRemote.unmuteMuteableChannels=function(){if("iOS"==a.tbm_bbs.utils.BrowserDetect.platformType&&6>a.tbm_bbs.utils.BrowserDetect.platformVersion||"Android"==a.tbm_bbs.utils.BrowserDetect.platformType){var b=m.document.getElementById("gameLoop");b.muted=!1;b.play();a.common.audio.SoundPlayerRemote._ios5AudioMuted=!1}a.common.audio.SoundPlayerRemote.isMuted=!1;for(b=a.common.audio.SoundPlayerRemote._soundClipChannels.iterator();b.hasNext();){var d=b.next();!0==d.muteable&&d.unmute()}};a.common.audio.SoundPlayerRemote.__super__=y;a.common.audio.SoundPlayerRemote.prototype=r(y.prototype,{get_name:function(){return"SoundPlayerRemote_4"},__class__:a.common.audio.SoundPlayerRemote});a.common.components.btn.BackBtn=function(b,d){a.common.components.btn.GenericBtn.call(this,b,d)};g["com.cmm.common.components.btn.BackBtn"]=a.common.components.btn.BackBtn;a.common.components.btn.BackBtn.__name__="com,cmm,common,components,btn,BackBtn".split(",");a.common.components.btn.BackBtn.__super__=a.common.components.btn.GenericBtn;a.common.components.btn.BackBtn.prototype=r(a.common.components.btn.GenericBtn.prototype,{onPointerClick:function(b){a.common.components.btn.GenericBtn.prototype.onPointerClick.call(this,b);this._ownerSprite.get_parent().prevFrame()},__class__:a.common.components.btn.BackBtn});a.common.components.btn.MuteBtn=function(b,d){a.common.components.btn.GenericBtn.call(this,b,d)};g["com.cmm.common.components.btn.MuteBtn"]=a.common.components.btn.MuteBtn;a.common.components.btn.MuteBtn.__name__="com,cmm,common,components,btn,MuteBtn".split(",");a.common.components.btn.MuteBtn.__super__=a.common.components.btn.GenericBtn;a.common.components.btn.MuteBtn.prototype=r(a.common.components.btn.GenericBtn.prototype,{onPointerClick:function(b){a.common.components.btn.GenericBtn.prototype.onPointerClick.call(this,b);a.common.audio.SoundPlayerRemote.muteMuteableChannels()},__class__:a.common.components.btn.MuteBtn});a.common.components.btn.NextBtn=function(b,d){a.common.components.btn.GenericBtn.call(this,b,d)};g["com.cmm.common.components.btn.NextBtn"]=a.common.components.btn.NextBtn;a.common.components.btn.NextBtn.__name__="com,cmm,common,components,btn,NextBtn".split(",");a.common.components.btn.NextBtn.__super__=a.common.components.btn.GenericBtn;a.common.components.btn.NextBtn.prototype=r(a.common.components.btn.GenericBtn.prototype,{onPointerClick:function(b){a.common.components.btn.GenericBtn.prototype.onPointerClick.call(this,b);b=this._ownerSprite.get_parent();b.gotoAndPlay(b.get_currentFrame(),b.get_currentFrame()+1,0)},__class__:a.common.components.btn.NextBtn});a.common.components.btn.SkipBtn=function(b,d){a.common.components.btn.GenericBtn.call(this,b,d)};g["com.cmm.common.components.btn.SkipBtn"]=a.common.components.btn.SkipBtn;a.common.components.btn.SkipBtn.__name__="com,cmm,common,components,btn,SkipBtn".split(",");a.common.components.btn.SkipBtn.__super__=a.common.components.btn.GenericBtn;a.common.components.btn.SkipBtn.prototype=r(a.common.components.btn.GenericBtn.prototype,{onPointerClick:function(b){a.common.components.btn.GenericBtn.prototype.onPointerClick.call(this,b);b=this._ownerSprite.get_parent();b.gotoAndPlay(b.get_totalFrames(),b.get_totalFrames(),0)},__class__:a.common.components.btn.SkipBtn});a.common.components.btn.StartOverBtn=function(b,d){a.common.components.btn.GenericBtn.call(this,b,d);this._clipSequencer=new a.common.app.ClipSequencer;this._clipSequencer.setTarget(a.common.app.Wrapper.instance.get_animLayer())};g["com.cmm.common.components.btn.StartOverBtn"]=a.common.components.btn.StartOverBtn;a.common.components.btn.StartOverBtn.__name__="com,cmm,common,components,btn,StartOverBtn".split(",");a.common.components.btn.StartOverBtn.__super__=a.common.components.btn.GenericBtn;a.common.components.btn.StartOverBtn.prototype=r(a.common.components.btn.GenericBtn.prototype,{onPointerClick:function(b){a.common.components.btn.GenericBtn.prototype.onPointerClick.call(this,b);this._clipSequencer.playClipQueue(["mc_quitPopup"])},__class__:a.common.components.btn.StartOverBtn});a.common.components.btn.UnmuteBtn=function(b,d){a.common.components.btn.GenericBtn.call(this,b,d)};g["com.cmm.common.components.btn.UnmuteBtn"]=a.common.components.btn.UnmuteBtn;a.common.components.btn.UnmuteBtn.__name__="com,cmm,common,components,btn,UnmuteBtn".split(",");a.common.components.btn.UnmuteBtn.__super__=a.common.components.btn.GenericBtn;a.common.components.btn.UnmuteBtn.prototype=r(a.common.components.btn.GenericBtn.prototype,{onPointerClick:function(b){a.common.components.btn.GenericBtn.prototype.onPointerClick.call(this,b);a.common.audio.SoundPlayerRemote.unmuteMuteableChannels()},__class__:a.common.components.btn.UnmuteBtn});a.common.components.mc={};a.common.components.mc.ConfirmationPopup=function(b,d){a.common.components.CMMComponent.call(this,b,d)};g["com.cmm.common.components.mc.ConfirmationPopup"]=a.common.components.mc.ConfirmationPopup;a.common.components.mc.ConfirmationPopup.__name__="com,cmm,common,components,mc,ConfirmationPopup".split(",");a.common.components.mc.ConfirmationPopup.__super__=a.common.components.CMMComponent;a.common.components.mc.ConfirmationPopup.prototype=r(a.common.components.CMMComponent.prototype,{onNoClick:function(){var b=this,a=this._ownerSprite;this._sConnOnComplete=a.get_onComplete().connect(function(){b.onNoComplete()});a.gotoAndPlay(a.get_currentFrame(),a.get_nextLabelFrame(),0)},onYesClick:function(){var b=this,a=this._ownerSprite;this._sConnOnComplete=a.get_onComplete().connect(function(){b.onYesComplete()});a.gotoAndPlay(a.get_currentFrame(),a.get_nextLabelFrame(),0)},onNoComplete:function(){this._sConnOnComplete.dispose();null!=this.onNoCallback&&(this.onNoCallback(),this.onNoCallback=null)},onYesComplete:function(){this._sConnOnComplete.dispose();null!=this.onYesCallback&&(this.onYesCallback(),this.onYesCallback=null)},onRemoved:function(){this._sConnYesBtn.dispose();this._sConnNoBtn.dispose()},onAdded:function(){var b=this;a.common.components.CMMComponent.prototype.onAdded.call(this);this._btn_yes=this.owner._compMap.Sprite_1.getChildByName("btn_yes");if(null==this._btn_yes)throw"ConfirmationPopup.hx onAdded: could not find yes button child. Make sure there is a layer/child with the name btn_yes";this._btn_no=this.owner._compMap.Sprite_1.getChildByName("btn_no");if(null==this._btn_no)throw"ConfirmationPopup.hx onAdded: could not find no button child. Make sure there is a layer/child with the name btn_no";this._sConnYesBtn=this._btn_yes.get_pointerClick().connect(function(a){b.onYesClick(a)});this._sConnNoBtn=this._btn_no.get_pointerClick().connect(function(a){b.onNoClick(a)})},__class__:a.common.components.mc.ConfirmationPopup});a.common.components.mc.QuitConfirmation=function(b,d){a.common.components.mc.ConfirmationPopup.call(this,b,d)};g["com.cmm.common.components.mc.QuitConfirmation"]=a.common.components.mc.QuitConfirmation;a.common.components.mc.QuitConfirmation.__name__="com,cmm,common,components,mc,QuitConfirmation".split(",");a.common.components.mc.QuitConfirmation.__super__=a.common.components.mc.ConfirmationPopup;a.common.components.mc.QuitConfirmation.prototype=r(a.common.components.mc.ConfirmationPopup.prototype,{onYesComplete:function(){a.common.components.mc.ConfirmationPopup.prototype.onYesComplete.call(this);a.common.event.EDispatcher.dispatchEvent(new a.common.event.CMMEvent("com.cmm.common.events.quit"))},__class__:a.common.components.mc.QuitConfirmation});a.common.components.mc.ToggleContainer=function(b,d){this._firstTimeAdded=!0;a.common.components.CMMComponent.call(this,b,d)};g["com.cmm.common.components.mc.ToggleContainer"]=a.common.components.mc.ToggleContainer;a.common.components.mc.ToggleContainer.__name__="com,cmm,common,components,mc,ToggleContainer".split(",");a.common.components.mc.ToggleContainer.__super__=a.common.components.CMMComponent;a.common.components.mc.ToggleContainer.prototype=r(a.common.components.CMMComponent.prototype,{onSecondaryClick:function(){this._primary.set_visible(!0);this._secondary.set_visible(!1)},onPrimaryClick:function(){this._primary.set_visible(!1);this._secondary.set_visible(!0)},onAdded:function(){a.common.components.CMMComponent.prototype.onAdded.call(this);this._primary=this._ownerSprite.getChildByName("primary");this._secondary=this._ownerSprite.getChildByName("secondary");this._signalConnection.connect1(this._primary.get_pointerClick(),p(this,this.onPrimaryClick));this._signalConnection.connect1(this._secondary.get_pointerClick(),p(this,this.onSecondaryClick));this._firstTimeAdded&&(this._primary.set_visible(!0),this._secondary.set_visible(!1),this._firstTimeAdded=!1)},__class__:a.common.components.mc.ToggleContainer});a.common.components.mc.data_display={};a.common.components.mc.data_display.IntDataDisplay=function(b,d){a.common.components.CMMComponent.call(this,b,d)};g["com.cmm.common.components.mc.data_display.IntDataDisplay"]=a.common.components.mc.data_display.IntDataDisplay;a.common.components.mc.data_display.IntDataDisplay.__name__="com,cmm,common,components,mc,data_display,IntDataDisplay".split(",");a.common.components.mc.data_display.IntDataDisplay.__super__=a.common.components.CMMComponent;a.common.components.mc.data_display.IntDataDisplay.prototype=r(a.common.components.CMMComponent.prototype,{onValueChange:function(b){t.__instanceof(this._ownerSprite,a.common.text.DynamicTextSprite)&&t.__cast(this._ownerSprite,a.common.text.DynamicTextSprite).set_text(n.string(b))},onRemoved:function(){a.common.components.CMMComponent.prototype.onRemoved.call(this);null!=this._valueSignalConnection&&this._valueSignalConnection.dispose()},onAdded:function(){var b=this;a.common.components.CMMComponent.prototype.onAdded.call(this);null!=this._valueSignalConnection&&this._valueSignalConnection.dispose();this._value.watch(function(a,e){b.onValueChange(a,e)})},__class__:a.common.components.mc.data_display.IntDataDisplay});a.common.components.mc.data_display.ScoreDisplay=function(b,d){a.common.components.mc.data_display.IntDataDisplay.call(this,b,d);this._value=a.common.app.games.GameGlobals.score};g["com.cmm.common.components.mc.data_display.ScoreDisplay"]=a.common.components.mc.data_display.ScoreDisplay;a.common.components.mc.data_display.ScoreDisplay.__name__="com,cmm,common,components,mc,data_display,ScoreDisplay".split(",");a.common.components.mc.data_display.ScoreDisplay.__super__=a.common.components.mc.data_display.IntDataDisplay;a.common.components.mc.data_display.ScoreDisplay.prototype=r(a.common.components.mc.data_display.IntDataDisplay.prototype,{__class__:a.common.components.mc.data_display.ScoreDisplay});a.common.display={};a.common.display.FlumpLibrary=function(b,d){this._symbols=new A;this.name=d;var e=aa.parse(b.getFile(d+"/library.json"));this.frameRate=e.frameRate;for(var h=[],c=0,l=e.movies;c<l.length;){var f=l[c];++c;f=new a.common.display.MovieClipSymbol(this,f);h.push(f);this._symbols.set(f.get_name(),f)}c=e.textureGroups;(1!=c[0].scaleFactor||1<c.length)&&null;f=c[0].atlases;for(c=0;c<f.length;){e=f[c];++c;for(var g=b.getTexture(d+"/"+E.removeFileExtension(e.file)),l=0,e=e.textures;l<e.length;){var i=e[l];++l;i=new a.common.display.TextureSpriteSymbol(i,g);this._symbols.set(i.get_name(),i)}}for(c=0;c<h.length;){f=h[c];++c;l=0;for(e=f.layers;l<e.length;){f=e[l];++l;for(var i=g=0,j=f.keyframes;i<j.length;){var k=j[i];++i;if(null!=k.symbolName){var n=this._symbols.get(k.symbolName);null==f.lastSymbol?(f.lastSymbol=n,f.lastSymbolKeyFrameIndex=g):f.lastSymbol!=n&&(f.multipleSymbols=!0);k.symbol=n}g++}}}};g["com.cmm.common.display.FlumpLibrary"]=a.common.display.FlumpLibrary;a.common.display.FlumpLibrary.__name__=["com","cmm","common","display","FlumpLibrary"];a.common.display.FlumpLibrary.prototype={createSprite:function(b,a){null==a&&(a=!0);var e=this._symbols.get(b);if(null==e){if(a)throw E.withFields("Missing symbol",["name",b]);return null}return e.createSprite()},__class__:a.common.display.FlumpLibrary};H=function(b,a){null==a&&(a=0);null==b&&(b=0);this.x=b;this.y=a};T=void 0;ea=void 0;kb=void 0;g["flambe.math.Point"]=H;H.__name__=["flambe","math","Point"];H.prototype={__class__:H};v=function(){this.blendMode=this.scissor=null;var b=this;this._flags=11;this._localMatrix=new ea;var a=function(){b._flags|=12};this.x=new B(0,a);this.y=new B(0,a);this.rotation=new B(0,a);this.scaleX=new B(1,a);this.scaleY=new B(1,a);this.anchorX=new B(0,a);this.anchorY=new B(0,a);this.alpha=new B(1)};M=void 0;U=void 0;X=void 0;S=void 0;Ua=void 0;Va=void 0;Wa=void 0;g["flambe.display.Sprite"]=v;v.__name__=["flambe","display","Sprite"];v.hitTest=function(b,a,e){var h=b._compMap.Sprite_1;if(null!=h){if(3!=(h._flags&3))return null;h.getLocalMatrix().inverseTransform(a,e,v._scratchPoint)&&(a=v._scratchPoint.x,e=v._scratchPoint.y);var c=h.scissor;if(null!=c&&!c.contains(a,e))return null}b=v.hitTestBackwards(b.firstChild,a,e);return null!=b?b:null!=h&&h.containsLocal(a,e)?h:null};v.getBounds=function(b,a){null==a&&(a=new T);a.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);v.getBoundsImpl(b,null,a);a.width-=a.x;a.height-=a.y;return a};v.render=function(b,a){var e=b._compMap.Sprite_1;if(null!=e){var h=e.alpha._value;if(0==(e._flags&1)||0>=h)return;a.save();1>h&&a.multiplyAlpha(h);null!=e.blendMode&&a.setBlendMode(e.blendMode);h=e.getLocalMatrix();a.transform(h.m00,h.m10,h.m01,h.m11,h.m02,h.m12);h=e.scissor;null!=h&&a.applyScissor(h.x,h.y,h.width,h.height);e.draw(a)}h=b._compMap.Director_0;if(null!=h)for(var h=h.occludedScenes,c=0;c<h.length;){var l=h[c];++c;v.render(l,a)}for(h=b.firstChild;null!=h;)c=h.next,v.render(h,a),h=c;null!=e&&a.restore()};v.hitTestBackwards=function(b,a,e){if(null!=b){var h=v.hitTestBackwards(b.next,a,e);return null!=h?h:v.hitTest(b,a,e)}return null};v.getBoundsImpl=function(b,a,e){var h=b._compMap.Sprite_1;if(null!=h){var a=null!=a?ea.multiply(a,h.getLocalMatrix()):h.getLocalMatrix(),c=h.getNaturalWidth(),h=h.getNaturalHeight();0<c&&0<h&&(v.extendRect(a,0,0,e),v.extendRect(a,c,0,e),v.extendRect(a,c,h,e),v.extendRect(a,0,h,e))}c=b._compMap.Director_0;if(null!=c)for(var c=c.occludedScenes,h=0,l=c.length;h<l;)v.getBoundsImpl(c[h],a,e),++h;for(b=b.firstChild;null!=b;)c=b.next,v.getBoundsImpl(b,a,e),b=c};v.extendRect=function(b,a,e,h){b=b.transform(a,e,v._scratchPoint);a=b.x;e=b.y;a<h.x&&(h.x=a);e<h.y&&(h.y=e);a>h.width&&(h.width=a);e>h.height&&(h.height=e)};v.__super__=y;v.prototype=r(y.prototype,{set_pointerEnabled:function(b){this._flags=Ea.set(this._flags,2,b);return b},set_visible:function(b){this._flags=Ea.set(this._flags,1,b);return b},get_pointerUp:function(){null==this._internal_pointerUp&&(this._internal_pointerUp=new x);return this._internal_pointerUp},get_pointerMove:function(){null==this._internal_pointerMove&&(this._internal_pointerMove=new x);return this._internal_pointerMove},get_pointerDown:function(){null==this._internal_pointerDown&&(this._internal_pointerDown=new x);return this._internal_pointerDown},draw:function(){},onUpdate:function(b){this.x.update(b);this.y.update(b);this.rotation.update(b);this.scaleX.update(b);this.scaleY.update(b);this.alpha.update(b);this.anchorX.update(b);this.anchorY.update(b)},setScale:function(b){this.scaleX.set__(b);this.scaleY.set__(b);return this},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},containsLocal:function(b,a){return 0<=b&&b<this.getNaturalWidth()&&0<=a&&a<this.getNaturalHeight()},getNaturalHeight:function(){return 0},getNaturalWidth:function(){return 0},get_name:function(){return"Sprite_1"},__class__:v});a.common.display.SpriteContainer=function(){var b=this;v.call(this);this._children=[];null==this.get_instanceName()?this.set_instanceName("instance_"+n.string(a.common.display.SpriteContainer._instanceNum)):this.set_instanceName(this.get_instanceName());a.common.display.SpriteContainer._instanceNum++;this.get_pointerDown().connect(function(a){b.onPointerDown(a)});this.get_pointerUp().connect(function(a){b.onPointerUp(a)});a.common.event.EDispatcher.addEventListener("onGlobalPointerUp",p(this,this.onGlobalPointerUp));!1==a.common.display.SpriteContainer._connectedGlobalPointerUp&&(k._platform.getPointer().up.connect(function(b){a.common.display.SpriteContainer.onPointerUp_SystemGlobal(b)}),a.common.display.SpriteContainer._connectedGlobalPointerUp=!0);this._buttonState=a.common.display.BUTTON_STATE.UP;(new D).add(this)};g["com.cmm.common.display.SpriteContainer"]=a.common.display.SpriteContainer;a.common.display.SpriteContainer.__name__=["com","cmm","common","display","SpriteContainer"];a.common.display.SpriteContainer.onPointerUp_SystemGlobal=function(){a.common.event.EDispatcher.dispatchEvent(new a.common.event.Event("onGlobalPointerUp"))};a.common.display.SpriteContainer.__super__=v;a.common.display.SpriteContainer.prototype=r(v.prototype,{get_pointerClick:function(){null==this._pointerClick&&(this._pointerClick=new x);return this._pointerClick},onGlobalPointerUp:function(){this._buttonState=a.common.display.BUTTON_STATE.UP},onPointerUp:function(b){this._buttonState==a.common.display.BUTTON_STATE.DOWN&&(null!=this._pointerClick&&this._pointerClick.emit1(b.clone()),this._buttonState=a.common.display.BUTTON_STATE.UP)},onPointerDown:function(){this._buttonState=a.common.display.BUTTON_STATE.DOWN},_internal_set_visible:function(b){return v.prototype.set_visible.call(this,b)},toString:function(){return"["+E.getFileExtension(z.getClassName(z.getClass(this)))+"] "+this.get_instanceName()},set_visible:function(b){null!=this.get_parent()&&t.__instanceof(this.get_parent(),a.common.display.MovieClip)&&t.__cast(this.get_parent(),a.common.display.MovieClip)._internal_setLayerVisible(this.get_instanceName(),b);return v.prototype.set_visible.call(this,b)},get_parent:function(){return null==this.owner||null==this.owner.parent?null:this.owner.parent._compMap.Sprite_1},get_numChildren:function(){return this._children.length},set_instanceName:function(b){return this.instanceName=b},get_instanceName:function(){return this.instanceName},getChildIndex:function(b){for(var a=0,e=this._children.length;a<e;){var h=a++;if(this._children[h]==b)return h}return-1},getChildByName:function(b){for(var d=0,e=this._children;d<e.length;){var h=e[d];++d;if(t.__instanceof(h,a.common.display.SpriteContainer)&&t.__cast(h,a.common.display.SpriteContainer).get_instanceName()==b)return h}return null},getChildAt:function(b){if(0<=b&&b<this._children.length)return this._children[b];throw"SpriteContainer.hx: getChildAt: index: "+b+" is out of range";},containsSprite:function(b){for(var a=0,e=this._children;a<e.length;){var h=e[a];++a;if(h==b)return!0}return!1},removeChildAt:function(b){if(0<=b&&b<this._children.length)return b=this._children.splice(b,1)[0],this.owner.removeChild(b.owner),b;throw"SpriteContainer.hx: removeChildAt index is out of range";},removeChild:function(b){for(var a=0,e=null,h=0,c=this._children;h<c.length;){var l=c[h];++h;if(l==b){e=l;this.owner.removeChild(l.owner);this._children.splice(a,1);break}a++}if(null==e)throw"SpriteContainer.hx removeChild: child was not found.";return e},addChildAt:function(b,a){if(0<=a&&a<=this._children.length){var e=null;null==b.owner?(e=new D,e.add(b)):(null!=b.owner.parent&&null!=b.owner.parent._compMap.Sprite_1&&b.owner.parent._compMap.Sprite_1.removeChild(b),e=b.owner);this._children.splice(a,0,b);this.owner.insertChild(e,a,!1);return b}throw"SpriteContainer.hx: addChildAt: index: "+a+" is out of range";},addChild:function(b){if(null==b.owner){var a=new D;a.add(b);this.owner.addChild(a)}else null!=b.owner.parent&&null!=b.owner.parent._compMap.Sprite_1&&b.owner.parent._compMap.Sprite_1.removeChild(b),this.owner.addChild(b.owner);this._children.push(b);a=this.owner;do a=a.parent;while(a!=k.root&&null!=a);if(a==k.root)this.onAddedToStage();return b},onAddedToStage:function(){for(var b=0,d=this._children.length;b<d;){var e=b++;if(t.__instanceof(this._children[e],a.common.display.SpriteContainer))t.__cast(this._children[e],a.common.display.SpriteContainer).onAddedToStage()}},onAdded:function(){v.prototype.onAdded.call(this);var b=this.owner._compMap.Disposer_2;null==b?(this._signalConnection=new oa,this.owner.add(this._signalConnection)):this._signalConnection=b},__class__:a.common.display.SpriteContainer});a.common.display.MovieClip=function(b){this._curAudioLabelIdx=this._curCallbackLabelIdx=-1;this._frameMS=0;this._onLoop=this._onComplete=this._onAudioLabel=this._onCallbackLabel=null;this.resetToStartFrame=!1;this.totalFrames=this.curLoops=this.totalLoops=this.startFrame=this.endFrame=0;this.currentFrame=1;a.common.display.SpriteContainer.call(this);this.symbol=b;this.speed=new B(1);this.currentLabels=[];this.audioLabels=[];this.callbackLabels=[];this._frameMS=b.frameRate/1E3;this._animators=Array(b.layers.length);for(var d=0,e=this._animators.length;d<e;){var h=d++,c=b.layers[h];this._animators[h]=new a.common.display._MovieClip.MovieClipLayerAnimator(c);if("sequence"==c.name)for(var l=0,f=c.keyframes;l<f.length;){var g=f[l];++l;null!=g.label&&this.currentLabels.push(new a.common.display.FrameLabel(g.label,g.index+1))}else if("audio"==c.name){l=0;for(f=c.keyframes;l<f.length;)g=f[l],++l,null!=g.label&&this.audioLabels.push(new a.common.display.FrameLabel(g.label,g.index+1));this._curAudioLabelIdx=-1;0<this.audioLabels.length&&(this._curAudioLabelIdx=0,this.get_onAudioLabel().connect(p(this,this.onAudioLabelTriggered)))}else if("callback"==c.name){l=0;for(f=c.keyframes;l<f.length;)g=f[l],++l,null!=g.label&&this.callbackLabels.push(new a.common.display.FrameLabel(g.label,g.index+1));this._curCallbackLabelIdx=-1;0<this.callbackLabels.length&&(this._curCallbackLabelIdx=0,this.get_onCallbackLabel().connect(p(this,this.onCallbackLabelTriggered)))}null!=this._animators[h].content._compMap.Sprite_1&&this._animators[h].content._compMap.Sprite_1.set_instanceName(c.name);this._children.push(this._animators[h].content._compMap.Sprite_1)}this.startFrame=1;this.endFrame=this.get_totalFrames();this.curLoops=0;this.totalLoops=-1;this._position=this._frame=1;this["goto"](1);1==this.symbol.frames&&this.gotoAndStop(1);this.compose()};g["com.cmm.common.display.MovieClip"]=a.common.display.MovieClip;a.common.display.MovieClip.__name__=["com","cmm","common","display","MovieClip"];a.common.display.MovieClip.__super__=a.common.display.SpriteContainer;a.common.display.MovieClip.prototype=r(a.common.display.SpriteContainer.prototype,{get_nextLabelFrame:function(){return null!=this.get_nextLabel()?this.get_nextLabel().frame:this.get_totalFrames()},get_nextLabel:function(){for(var b=0,a=this.currentLabels.length;b<a;){var e=this.currentLabels[b++];if(e.frame>this.get_currentFrame())return e}return null},get_className:function(){return this.symbol.get_name()},_internal_setLayerVisible:function(b,a){for(var e=0,h=this._animators;e<h.length;){var c=h[e];++e;if(c.layer.name==b){c.visible=a;break}}},toString:function(){return a.common.display.SpriteContainer.prototype.toString.call(this)},get_onCallbackLabel:function(){null==this._onCallbackLabel&&(this._onCallbackLabel=new x);return this._onCallbackLabel},get_onAudioLabel:function(){null==this._onAudioLabel&&(this._onAudioLabel=new x);return this._onAudioLabel},get_onComplete:function(){null==this._onComplete&&(this._onComplete=new N);return this._onComplete},get_onLoop:function(){null==this._onLoop&&(this._onLoop=new N);return this._onLoop},get_currentFrame:function(){return Math.floor(this._frame)},get_totalFrames:function(){return this.symbol.frames},set_paused:function(b){this._flags=Ea.set(this._flags,16,b);return b},set_position:function(b){return this._position=kb.clamp(b,0,this.symbol.duration)},"goto":function(b){if(this._frame!=b){if(b<this._frame)for(var a=0,e=this._animators;a<e.length;){var h=e[a];++a;h.changedKeyframe=!0;h.keyframeIdx=0}a=0;for(e=this._animators;a<e.length;)h=e[a],++a,h.composeFrame(b-1);this._frame=b}},removeAnimatorForSprite:function(b){if(t.__instanceof(b,a.common.display.SpriteContainer))for(var d=0,e=0,h=this._animators;e<h.length;){var c=h[e];++e;if(c.layer.name==t.__cast(b,a.common.display.SpriteContainer).get_instanceName()){this._animators.splice(d,1);break}d++}},checkCallbackLabel:function(b){if(0<this.callbackLabels.length&&-1<this._curCallbackLabelIdx){var a=this.callbackLabels[this._curCallbackLabelIdx];a.frame<=b&&(null!=this._onCallbackLabel&&this._onCallbackLabel.emit1(a.name),this._curCallbackLabelIdx++,this._curCallbackLabelIdx>=this.callbackLabels.length&&(this._curCallbackLabelIdx=-1))}},checkAudioLabel:function(b){if(0<this.audioLabels.length&&-1<this._curAudioLabelIdx){var a=this.audioLabels[this._curAudioLabelIdx];a.frame<=b&&(null!=this._onAudioLabel&&this._onAudioLabel.emit1(a.name),this._curAudioLabelIdx++,this._curAudioLabelIdx>=this.audioLabels.length&&(this._curAudioLabelIdx=-1))}},findClosestLabelIdx:function(b,a){for(var e=0,h=b.length;e<h;){var c=e++;if(b[c].frame>=a)return c}return-1},onCallbackLabelTriggered:function(){null},onAudioLabelTriggered:function(b){a.common.audio.SoundPlayerRemote.play(b)},getChildLayer:function(b){for(var a=null,e=0,h=this._animators;e<h.length;){var c=h[e];++e;if(c.layer.name==b){a=c;break}}return null!=a?a.layer:null},getFrameFromLabel:function(b){for(var a=0,e=this.currentLabels.length;a<e;){var h=a++;if(this.currentLabels[h].name==b)return this.currentLabels[h].frame}return-1},removeChildAt:function(b){b=a.common.display.SpriteContainer.prototype.removeChildAt.call(this,b);this.removeAnimatorForSprite(b);return b},removeChild:function(b){b=a.common.display.SpriteContainer.prototype.removeChild.call(this,b);this.removeAnimatorForSprite(b);return b},onUpdate:function(b){a.common.display.SpriteContainer.prototype.onUpdate.call(this,b);this.speed.update(b);if(0!=this.speed._value){if(0==(this._flags&16)&&(this._position+=this.speed._value*b,b=this.startFrame*this._frameMS,this._position>this.endFrame*this._frameMS+this._frameMS)){this._position=b;if(-1<this.totalLoops&&this.curLoops>=this.totalLoops){this.gotoAndStop(this.endFrame);null!=this._onComplete&&this._onComplete.emit0();this.resetToStartFrame&&this.gotoAndStop(this.startFrame);return}this.curLoops++;null!=this._onLoop&&this._onLoop.emit0()}b=this._position*this.symbol.frameRate;this.checkAudioLabel(b);this.checkCallbackLabel(b);this["goto"](b)}},onRemoved:function(){a.common.display.SpriteContainer.prototype.onRemoved.call(this);for(var b=0,d=this._animators;b<d.length;){var e=d[b];++b;this.owner.removeChild(e.content)}},onAddedToStage:function(){a.common.display.SpriteContainer.prototype.onAddedToStage.call(this);for(var b=0,d=this._components;b<d.length;){var e=d[b];++b;this.owner.add(e)}},onAdded:function(){a.common.display.SpriteContainer.prototype.onAdded.call(this);if(null!=this._animators)for(var b=0,d=this._animators;b<d.length;){var e=d[b];++b;this.owner.addChild(e.content)}},play:function(){this.speed.set__(1)},stop:function(){this.speed.set__(0)},prevFrame:function(){var b=this.get_totalFrames();1<this.get_currentFrame()?this.gotoAndStop(this.get_currentFrame()-1):this.gotoAndStop(b)},gotoAndStop:function(b){var a=1;t.__instanceof(b,tb)?a=b:t.__instanceof(b,String)&&(a=this.getFrameFromLabel(b));if(1>a||a>this.get_totalFrames())throw"MovieClip.hx: frameIndex is out of range: "+a;this._frame=this.symbol.frames+1;this._position=a*this._frameMS;this._curAudioLabelIdx=this.findClosestLabelIdx(this.audioLabels,this._frame);this._curCallbackLabelIdx=this.findClosestLabelIdx(this.callbackLabels,this._frame);this.speed.set__(0);this["goto"](a)},gotoAndPlay:function(b,a,e,h){null==h&&(h=!1);null==e&&(e=-1);var c=1;t.__instanceof(b,tb)?c=b:t.__instanceof(b,String)&&(c=this.getFrameFromLabel(b));if(1>c||c>this.get_totalFrames())throw"MovieClip.hx: startFrameIndex is out of range";b=this.get_totalFrames();null!=a&&(t.__instanceof(a,tb)?b=a:t.__instanceof(a,String)&&(b=this.getFrameFromLabel(a)));if(1>b||b>this.get_totalFrames())throw"MovieClip.hx: endFrameIndex is out of range";if(b<this.get_totalFrames()&&c>=b)throw"MovieClip.hx gotoAndPlay: startFrame is greater than or equal to endFrame";this.totalLoops=e;this.curLoops=0;this.startFrame=c;this.endFrame=b;this.resetToStartFrame=h;this._frame=this.symbol.frames+1;this._position=c*this._frameMS;this._curAudioLabelIdx=this.findClosestLabelIdx(this.audioLabels,this.startFrame);this._curCallbackLabelIdx=this.findClosestLabelIdx(this.callbackLabels,this.startFrame);this["goto"](c);this.speed.set__(1);null==a&&(this.startFrame=1)},compose:function(){null==this._components&&(this._components=[]);var b=a.common.app.CompositionFactory.getCompositionObjectByClassName(this.symbol.get_name());if(null!=b)for(var d=0,e=b.components;d<e.length;){var h=e[d];++d;this._components.push(z.createInstance(h,[this.id,b.params]))}},__class__:a.common.display.MovieClip});a.common.display.FrameLabel=function(b,a){this.name=b;this.frame=a};g["com.cmm.common.display.FrameLabel"]=a.common.display.FrameLabel;a.common.display.FrameLabel.__name__=["com","cmm","common","display","FrameLabel"];a.common.display.FrameLabel.prototype={__class__:a.common.display.FrameLabel};a.common.display._MovieClip={};a.common.display._MovieClip.MovieClipLayerAnimator=function(b){this._sprites=null;this.visible=!0;this.changedKeyframe=!1;this.keyframeIdx=0;this.layer=b;if(b.multipleSymbols){this._sprites=Array(b.keyframes.length);for(var d=0,e=this._sprites.length;d<e;){var h=d++,c=b.keyframes[h];this._sprites[h]=null!=c.symbol?c.symbol.createSprite():new a.common.display.SpriteContainer}b=this._sprites[0]}else b=null!=b.lastSymbol?b.lastSymbol.createSprite():new a.common.display.SpriteContainer;this.content=(new D).add(b)};g["com.cmm.common.display._MovieClip.MovieClipLayerAnimator"]=a.common.display._MovieClip.MovieClipLayerAnimator;a.common.display._MovieClip.MovieClipLayerAnimator.__name__="com,cmm,common,display,_MovieClip,MovieClipLayerAnimator".split(",");a.common.display._MovieClip.MovieClipLayerAnimator.prototype={composeFrame:function(b){for(var d=this.layer.keyframes,e=d.length-1;this.keyframeIdx<e&&d[this.keyframeIdx+1].index<=b;)++this.keyframeIdx,this.changedKeyframe=!0;var c;this.changedKeyframe&&null!=this._sprites?(c=this._sprites[this.keyframeIdx],this.content.add(c)):c=this.content._compMap.Sprite_1;this.changedKeyframe=!1;var o=d[this.keyframeIdx],l=o.visible&&null!=o.symbol&&this.visible;t.__cast(c,a.common.display.SpriteContainer)._internal_set_visible(l);if(l){var l=o.x,f=o.y,g=o.scaleX,i=o.scaleY,j=o.skewX,k=o.skewY,n=o.alpha;if(o.tweened&&this.keyframeIdx<e){b=(b-o.index)/o.duration;e=o.ease;if(0!=e){var m;0>e?(m=1-b,m=1-m*m,e=-e):m=b*b;b=e*m+(1-e)*b}d=d[this.keyframeIdx+1];l+=(d.x-l)*b;f+=(d.y-f)*b;g+=(d.scaleX-g)*b;i+=(d.scaleY-i)*b;j+=(d.skewX-j)*b;k+=(d.skewY-k)*b;n+=(d.alpha-n)*b}d=c.getLocalMatrix();b=Math.sin(j);j=Math.cos(j);e=Math.sin(k);k=Math.cos(k);d.set(k*g,e*g,-b*i,j*i,l,f);d.translate(-o.pivotX,-o.pivotY);c.alpha.set__(n)}},__class__:a.common.display._MovieClip.MovieClipLayerAnimator};a.common.display.MovieClipButton=function(b){a.common.display.MovieClip.call(this,b);if(-1==this.getFrameFromLabel("up"))throw"No 'up' label: "+b.get_name();if(-1==this.getFrameFromLabel("down"))throw"No 'down' label: "+b.get_name();this.gotoAndStop("up");null!=this.getChildByName("hit")&&this.getChildByName("hit").alpha.set__(0)};g["com.cmm.common.display.MovieClipButton"]=a.common.display.MovieClipButton;a.common.display.MovieClipButton.__name__=["com","cmm","common","display","MovieClipButton"];a.common.display.MovieClipButton.__super__=a.common.display.MovieClip;a.common.display.MovieClipButton.prototype=r(a.common.display.MovieClip.prototype,{onGlobalPointerUp:function(b){a.common.display.MovieClip.prototype.onGlobalPointerUp.call(this,b);this.gotoAndStop("up");null!=this.getChildByName("hit")&&this.getChildByName("hit").alpha.set__(0)},onPointerUp:function(b){a.common.display.MovieClip.prototype.onPointerUp.call(this,b);this.gotoAndStop("up");null!=this.getChildByName("hit")&&this.getChildByName("hit").alpha.set__(0)},onPointerDown:function(b){a.common.display.MovieClip.prototype.onPointerDown.call(this,b);this.gotoAndStop("down")},__class__:a.common.display.MovieClipButton});Aa=function(){};Ba=void 0;Sa=void 0;g["flambe.swf.Symbol"]=Aa;Aa.__name__=["flambe","swf","Symbol"];Aa.prototype={__class__:Aa};a.common.display.MovieClipSymbol=function(b,d){this.classType="com.cmm.common.display.MovieClip";[a.common.display.MovieClip,a.common.event.Event];this._name=d.id;this.frameRate=b.frameRate;switch(this.getSymbolType(this._name)){case "mc":this.classType="com.cmm.common.display.MovieClip";break;case "btn":this.classType="com.cmm.common.display.MovieClipButton";break;case "txt":this.classType="com.cmm.common.text.DynamicTextSprite"}this.frames=0;this.layers=Array(d.layers.length);for(var e=0,c=this.layers.length;e<c;){var o=e++,l=new a.common.display.MovieClipLayer(d.layers[o]);this.frames=Math.max(l.get_frames(),this.frames);this.layers[o]=l}this.duration=this.frames/this.frameRate};g["com.cmm.common.display.MovieClipSymbol"]=a.common.display.MovieClipSymbol;a.common.display.MovieClipSymbol.__name__=["com","cmm","common","display","MovieClipSymbol"];a.common.display.MovieClipSymbol.__interfaces__=[Aa];a.common.display.MovieClipSymbol.prototype={getSymbolType:function(b){var a=b.indexOf("_");return 0<a?b.substring(0,a):null},createSprite:function(){var b=null;switch(this.classType){case "com.cmm.common.display.MovieClip":b=new a.common.display.MovieClip(this);break;case "com.cmm.common.display.MovieClipButton":b=new a.common.display.MovieClipButton(this);break;case "com.cmm.common.text.DynamicTextSprite":b=new a.common.text.DynamicTextSprite(this._name)}if(null!=b)return(new D).add(b),b;throw"MovieClipSymbol.hx type: "+this.classType+" not found.";},get_name:function(){return this._name},__class__:a.common.display.MovieClipSymbol};a.common.display.MovieClipLayer=function(b){this.multipleSymbols=!1;this.lastSymbolKeyFrameIndex=0;this.lastSymbol=null;this.name=b.name;var d=null;this.keyframes=Array(b.keyframes.length);for(var e=0,c=this.keyframes.length;e<c;){var o=e++,d=new a.common.display.MovieClipKeyframe(b.keyframes[o],d);this.keyframes[o]=d}};g["com.cmm.common.display.MovieClipLayer"]=a.common.display.MovieClipLayer;a.common.display.MovieClipLayer.__name__=["com","cmm","common","display","MovieClipLayer"];a.common.display.MovieClipLayer.prototype={get_frames:function(){var b=this.keyframes[this.keyframes.length-1];return b.index+(b.duration|0)},__class__:a.common.display.MovieClipLayer};a.common.display.MovieClipKeyframe=function(b,a){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=a?a.index+a.duration:0;this.duration=b.duration;this.label=b.label;this.symbolName=b.ref;var e=b.loc;null!=e&&(this.x=e[0],this.y=e[1]);e=b.scale;null!=e&&(this.scaleX=e[0],this.scaleY=e[1]);e=b.skew;null!=e&&(this.skewX=e[0],this.skewY=e[1]);e=b.pivot;null!=e&&(this.pivotX=e[0],this.pivotY=e[1]);null!=b.alpha&&(this.alpha=b.alpha);null!=b.visible&&(this.visible=b.visible);null!=b.tweened&&(this.tweened=b.tweened);null!=b.ease&&(this.ease=b.ease)};g["com.cmm.common.display.MovieClipKeyframe"]=a.common.display.MovieClipKeyframe;a.common.display.MovieClipKeyframe.__name__=["com","cmm","common","display","MovieClipKeyframe"];a.common.display.MovieClipKeyframe.prototype={__class__:a.common.display.MovieClipKeyframe};a.common.display.BUTTON_STATE=g["com.cmm.common.display.BUTTON_STATE"]={__ename__:["com","cmm","common","display","BUTTON_STATE"],__constructs__:["UP","DOWN","DISABLED","HIGHLIGHT"]};a.common.display.BUTTON_STATE.UP=["UP",0];a.common.display.BUTTON_STATE.UP.toString=i;a.common.display.BUTTON_STATE.UP.__enum__=a.common.display.BUTTON_STATE;a.common.display.BUTTON_STATE.DOWN=["DOWN",1];a.common.display.BUTTON_STATE.DOWN.toString=i;a.common.display.BUTTON_STATE.DOWN.__enum__=a.common.display.BUTTON_STATE;a.common.display.BUTTON_STATE.DISABLED=["DISABLED",2];a.common.display.BUTTON_STATE.DISABLED.toString=i;a.common.display.BUTTON_STATE.DISABLED.__enum__=a.common.display.BUTTON_STATE;a.common.display.BUTTON_STATE.HIGHLIGHT=["HIGHLIGHT",3];a.common.display.BUTTON_STATE.HIGHLIGHT.toString=i;a.common.display.BUTTON_STATE.HIGHLIGHT.__enum__=a.common.display.BUTTON_STATE;a.common.display.TextureSprite=function(b){a.common.display.SpriteContainer.call(this);this.symbol=b;this.anchorX.set__(b.anchorX);this.anchorY.set__(b.anchorY)};g["com.cmm.common.display.TextureSprite"]=a.common.display.TextureSprite;a.common.display.TextureSprite.__name__=["com","cmm","common","display","TextureSprite"];a.common.display.TextureSprite.__super__=a.common.display.SpriteContainer;a.common.display.TextureSprite.prototype=r(a.common.display.SpriteContainer.prototype,{getNaturalHeight:function(){return this.symbol.height},getNaturalWidth:function(){return this.symbol.width},draw:function(b){b.drawSubImage(this.symbol.atlas,0,0,this.symbol.x,this.symbol.y,this.symbol.width,this.symbol.height)},__class__:a.common.display.TextureSprite});a.common.display.TextureSpriteSymbol=function(b,a){this._name=b.symbol;this.atlas=a;var e=b.rect;this.x=e[0];this.y=e[1];this.width=e[2];this.height=e[3];e=b.origin;null!=e?(this.anchorX=e[0],this.anchorY=e[1]):this.anchorY=this.anchorX=0};g["com.cmm.common.display.TextureSpriteSymbol"]=a.common.display.TextureSpriteSymbol;a.common.display.TextureSpriteSymbol.__name__=["com","cmm","common","display","TextureSpriteSymbol"];a.common.display.TextureSpriteSymbol.__interfaces__=[Aa];a.common.display.TextureSpriteSymbol.prototype={get_name:function(){return this._name},createSprite:function(){return new a.common.display.TextureSprite(this)},__class__:a.common.display.TextureSpriteSymbol};a.common.event={};a.common.event.Event=function(b,a,e){null==e&&(e=!0);this.type="Event";this.newEvent=!0;this.data=a;this.newEvent=e;this.type=b};g["com.cmm.common.event.Event"]=a.common.event.Event;a.common.event.Event.__name__=["com","cmm","common","event","Event"];a.common.event.Event.prototype={toString:function(){return"["+E.getFileExtension(z.getClassName(z.getClass(this)))+"] TYPE: "+this.type+" DATA: "+n.string(this.data)},clone:function(){return new a.common.event.Event(this.type,this.data,!1)},__class__:a.common.event.Event};a.common.event.CMMEvent=function(b,d,e){null==e&&(e=!0);a.common.event.Event.call(this,b,d,e)};g["com.cmm.common.event.CMMEvent"]=a.common.event.CMMEvent;a.common.event.CMMEvent.__name__=["com","cmm","common","event","CMMEvent"];a.common.event.CMMEvent.__super__=a.common.event.Event;a.common.event.CMMEvent.prototype=r(a.common.event.Event.prototype,{toString:function(){return a.common.event.Event.prototype.toString.call(this)},clone:function(){return new a.common.event.CMMEvent(this.type,this.data,!1)},__class__:a.common.event.CMMEvent});a.common.event.EDispatcher=function(){};g["com.cmm.common.event.EDispatcher"]=a.common.event.EDispatcher;a.common.event.EDispatcher.__name__=["com","cmm","common","event","EDispatcher"];a.common.event.EDispatcher.addEventListener=function(b,d){!1==a.common.event.EDispatcher._signals.exists(b)&&a.common.event.EDispatcher._signals.set(b,new x);var e=a.common.event.EDispatcher._signals.get(b).connect(d);!1==a.common.event.EDispatcher._signalConnections.exists(b)&&a.common.event.EDispatcher._signalConnections.set(b,[]);a.common.event.EDispatcher._signalConnections.get(b).push(e)};a.common.event.EDispatcher.dispatchEvent=function(b){a.common.event.EDispatcher._signals.exists(b.type)&&a.common.event.EDispatcher._signals.get(b.type).emit1(b)};a.common.event.EDispatcher.removeEventListener=function(b,d){if(a.common.event.EDispatcher._signalConnections.exists(b))for(var e=0,c=a.common.event.EDispatcher._signalConnections.get(b).length;e<c;){var o=e++;if(O.compareMethods(d,a.common.event.EDispatcher._signalConnections.get(b)[o]._internal_listener)){a.common.event.EDispatcher._signalConnections.get(b)[o].dispose();a.common.event.EDispatcher._signalConnections.get(b).splice(o,1);break}}};a.common.io={};a.common.io.LoadMaster=function(){};g["com.cmm.common.io.LoadMaster"]=a.common.io.LoadMaster;a.common.io.LoadMaster.__name__=["com","cmm","common","io","LoadMaster"];a.common.io.LoadMaster.loadBatch=function(b,d){null!=a.common.io.LoadMaster.loadMC&&a.common.app.Wrapper.instance.get_gameLayer().addChild(a.common.io.LoadMaster.loadMC);(new f.HtmlAssetPackLoader(f.HtmlPlatform.instance,null)).getAssetFormats(a.common.io.LoadMaster.getSupportedAudioFormats);a.common.io.LoadMaster._onSuccess=d;a.common.io.LoadMaster._batchQueue=b.split(",");for(var e=a.common.io.LoadMaster._bytesTotal=a.common.io.LoadMaster._bytesLoaded=0,c=a.common.io.LoadMaster._batchQueue;e<c.length;){var o=c[e];++e;a.common.io.LoadMaster._manifestHash.set(o,I.build(o));for(o=u.iter(a.common.io.LoadMaster._manifestHash.get(o)._entries);o.hasNext();){var l=o.next();if(a.common.io.LoadMaster.isAudioFormat(l.format))for(var g=0,i=a.common.io.LoadMaster._supportedAudioFormats;g<i.length;){var j=i[g];++g;if(l.format==j){a.common.io.LoadMaster._bytesTotal+=l.bytes;break}}else a.common.io.LoadMaster._bytesTotal+=l.bytes}}a.common.io.LoadMaster.loadPack(a.common.io.LoadMaster._batchQueue.shift())};a.common.io.LoadMaster.isAudioFormat=function(b){return b==q.MP3||b==q.M4A||b==q.OGG||b==q.WAV?!0:!1};a.common.io.LoadMaster.getSupportedAudioFormats=function(b){a.common.io.LoadMaster._supportedAudioFormats=[];for(var d=0;d<b.length;){var e=b[d];++d;a.common.io.LoadMaster.isAudioFormat(e)&&a.common.io.LoadMaster._supportedAudioFormats.push(e)}};a.common.io.LoadMaster.loadPack=function(b){a.common.io.LoadMaster._currentBatchBytesLoaded=0;var d=k._platform.loadAssetPack(a.common.io.LoadMaster._manifestHash.get(b));d.progressChanged.connect(function(){a.common.io.LoadMaster._bytesLoaded-=a.common.io.LoadMaster._currentBatchBytesLoaded;a.common.io.LoadMaster._currentBatchBytesLoaded+=d._progress-a.common.io.LoadMaster._currentBatchBytesLoaded;a.common.io.LoadMaster._bytesLoaded+=a.common.io.LoadMaster._currentBatchBytesLoaded;if(null!=a.common.io.LoadMaster.loadMC){var b=Math.ceil(100*(a.common.io.LoadMaster._bytesLoaded/a.common.io.LoadMaster._bytesTotal));a.common.io.LoadMaster.loadMC.gotoAndStop(Math.max(1,Math.min(b,a.common.io.LoadMaster.loadMC.get_totalFrames())))}});d.get(function(d){a.common.io.LoadMaster._assetPackHash.set(b,d);a.common.utils.LibraryTools.addLibrariesFromAssetPack(a.common.io.LoadMaster._assetPackHash.get(b));0<a.common.io.LoadMaster._batchQueue.length?a.common.io.LoadMaster.loadPack(a.common.io.LoadMaster._batchQueue.shift()):null!=a.common.io.LoadMaster._onSuccess&&(null!=a.common.io.LoadMaster.loadMC&&a.common.app.Wrapper.instance.get_gameLayer().removeChild(a.common.io.LoadMaster.loadMC),a.common.io.LoadMaster._onSuccess(b))})};a.common.io.LoadMaster.getSound=function(b,d){return a.common.io.LoadMaster._assetPackHash.get(b).getSound(d)};a.common.io.LoadMaster.getTexture=function(b,d){return a.common.io.LoadMaster._assetPackHash.get(b).getTexture(d)};a.common.io.LoadMaster.getXML=function(b,d){return s.parse(a.common.io.LoadMaster.getAssetAsString(b,d))};a.common.io.LoadMaster.getJSON=function(b,d){return aa.parse(a.common.io.LoadMaster.getAssetAsString(b,d))};a.common.io.LoadMaster.getAssetAsString=function(b,d){return a.common.io.LoadMaster._assetPackHash.get(b).getFile(d)};a.common.io.LoadMaster.prototype={__class__:a.common.io.LoadMaster};a.common.text={};a.common.text.DynamicTextLibrary=function(){};g["com.cmm.common.text.DynamicTextLibrary"]=a.common.text.DynamicTextLibrary;a.common.text.DynamicTextLibrary.__name__=["com","cmm","common","text","DynamicTextLibrary"];a.common.text.DynamicTextLibrary.createLibrary=function(b){var d=m.document.createElement("link");d.type="text/css";d.rel="stylesheet";d.href="assets/config/fonts/fonts.css";m.document.getElementsByTagName("head")[0].appendChild(d);d=0;for(b=b.strings;d<b.length;){var e=b[d];++d;a.common.text.DynamicTextLibrary._txtDict.set(e.id,e)}};a.common.text.DynamicTextLibrary.getFormat=function(b){return a.common.text.DynamicTextLibrary._txtDict.get(b)};a.common.text.DynamicTextLibrary.prototype={__class__:a.common.text.DynamicTextLibrary};a.common.text.DynamicTextSprite=function(b){this._fontSize=this._lineSpacing=this._textRotation=0;a.common.display.SpriteContainer.call(this);this._format=null!=b?a.common.text.DynamicTextLibrary.getFormat(b):{id:null,style:{fontFamily:"Times New Roman",fontSize:"12px",textAlign:"left",lineSpacing:"0px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",color:"#000000",rotation:0,stroke:"#000000",lineWidth:1},textMetrics:{top:0,left:0,width:100,height:100},text:""};this.updateFontProps();this._textArray=this._format.text.split("<br/>");null!=b&&this.compose()};g["com.cmm.common.text.DynamicTextSprite"]=a.common.text.DynamicTextSprite;a.common.text.DynamicTextSprite.__name__=["com","cmm","common","text","DynamicTextSprite"];a.common.text.DynamicTextSprite.__super__=a.common.display.SpriteContainer;a.common.text.DynamicTextSprite.prototype=r(a.common.display.SpriteContainer.prototype,{updateFontProps:function(){this._font="";null!=this._format.style.fontStyle&&(this._font+=this._format.style.fontStyle+" ");null!=this._format.style.fontVariant&&(this._font+=this._format.style.fontVariant+" ");null!=this._format.style.fontWeight&&(this._font+=this._format.style.fontWeight+" ");null!=this._format.style.lineSpacing&&(this._lineSpacing=n.parseFloat(this._format.style.lineSpacing));null!=this._format.style.rotation&&(this._textRotation=this._format.style.rotation);this._font+=this._format.style.fontSize+" "+this._format.style.fontFamily;this._fontSize=n.parseInt(this._format.style.fontSize);var b=m.document.createElement("span");b.innerHTML="Hg";b.style.font=this._font;var a=m.document.createElement("div");a.style.display="inline-block";a.style.width="1px";a.style.height="0px";var e=m.document.createElement("div");e.appendChild(b);e.appendChild(a);m.document.body.appendChild(e);a.style.verticalAlign="bottom";this.lineHeight=a.offsetTop-b.offsetTop;m.document.body.removeChild(e)},set_lineWidth:function(b){this._format.style.lineWidth=b;this.updateFontProps();return this._format.style.lineWidth},get_lineWidth:function(){return this._format.style.lineWidth},set_strokeColor:function(b){this._format.style.stroke=Y.hex(b,6);this.updateFontProps();return n.parseInt(this._format.style.stroke)},get_strokeColor:function(){return n.parseInt(this._format.style.stroke)},set_textRotation:function(b){return this._textRotation=b},get_textRotation:function(){return this._textRotation},set_text:function(b){this._format.text=b;this._textArray=this._format.text.split("<br/>");return this._format.text},get_text:function(){return this._format.text},set_textMetrics:function(b){this._format.textMetrics=b;return this._format.textMetrics},get_textMetrics:function(){return this._format.textMetrics},set_color:function(b){this._format.style.color=Y.hex(b,6);this.updateFontProps();return n.parseInt(this._format.style.color)},get_color:function(){return n.parseInt(this._format.style.color)},set_fontWeight:function(b){this._format.style.fontWeight=b;this.updateFontProps();return this._format.style.fontWeight},get_fontWeight:function(){return this._format.style.fontWeight},set_fontVariant:function(b){this._format.style.fontVariant=b;this.updateFontProps();return this._format.style.fontVariant},get_fontVariant:function(){return this._format.style.fontVariant},set_fontStyle:function(b){this._format.style.fontStyle=b;this.updateFontProps();return this._format.style.fontStyle},get_fontStyle:function(){return this._format.style.fontStyle},set_lineSpacing:function(b){this._format.style.lineSpacing=n.string(b)+"px";this.updateFontProps();return n.parseFloat(this._format.style.lineSpacing)},get_lineSpacing:function(){return n.parseFloat(this._format.style.lineSpacing)},set_textAlign:function(b){this._format.style.textAlign=b;this.updateFontProps();return this._format.style.textAlign},get_textAlign:function(){return this._format.style.textAlign},set_fontSize:function(b){this._format.style.fontSize=n.string(b)+"px";this.updateFontProps();return n.parseInt(this._format.style.fontSize)},get_fontSize:function(){return n.parseInt(this._format.style.fontSize)},set_fontFamily:function(b){this._format.style.fontFamily=b;this.updateFontProps();return this._format.style.fontFamily},get_fontFamily:function(){return this._format.style.fontFamily},draw:function(){this._canvas=m.document.getElementById("content-canvas");this._ctx=this._canvas.getContext("2d");this._ctx.font=this._font;null!=this._format.style.stroke&&(this._ctx.strokeStyle=this._format.style.stroke,this._ctx.lineWidth=this._format.style.lineWidth);this._ctx.fillStyle=this._format.style.color;this._ctx.textBaseline="top";this._ctx.rotate(3.141592653589793*this._textRotation/180);var b=0;if("center"==this._format.style.textAlign)for(var a=0,e=this._textArray.length;a<e;){var c=a++,o=0.5*this._ctx.measureText(this._textArray[c]).width,b=0<c?this._lineSpacing*c:0;null!=this._format.style.stroke&&this._ctx.strokeText(this._textArray[c],this._format.textMetrics.left+0.5*this._format.textMetrics.width-o,this._format.textMetrics.top+c*this.lineHeight+b);this._ctx.fillText(this._textArray[c],this._format.textMetrics.left+0.5*this._format.textMetrics.width-o,this._format.textMetrics.top+c*this.lineHeight+b)}else if("right"==this._format.style.textAlign){a=0;for(e=this._textArray.length;a<e;)c=a++,o=this._ctx.measureText(this._textArray[c]).width,b=0<c?this._lineSpacing*c:0,null!=this._format.style.stroke&&this._ctx.strokeText(this._textArray[c],this._format.textMetrics.left+this._format.textMetrics.width-o,this._format.textMetrics.top+c*this.lineHeight+b),this._ctx.fillText(this._textArray[c],this._format.textMetrics.left+this._format.textMetrics.width-o,this._format.textMetrics.top+c*this.lineHeight+b)}else{a=0;for(e=this._textArray.length;a<e;)c=a++,b=0<c?this._lineSpacing*c:0,null!=this._format.style.stroke&&this._ctx.strokeText(this._textArray[c],this._format.textMetrics.left,this._format.textMetrics.top+c*this.lineHeight+b),this._ctx.fillText(this._textArray[c],this._format.textMetrics.left,this._format.textMetrics.top+c*this.lineHeight+b)}},onAddedToStage:function(){a.common.display.SpriteContainer.prototype.onAddedToStage.call(this);if(null!=this._components)for(var b=0,d=this._components;b<d.length;){var e=d[b];++b;this.owner.add(e)}},compose:function(){null==this._components&&(this._components=[]);var b=a.common.app.CompositionFactory.getCompositionObjectByClassName(this._format.id);if(null!=b)for(var d=0,e=b.components;d<e.length;){var c=e[d];++d;this._components.push(z.createInstance(c,[this._format.id,b.params]))}},__class__:a.common.text.DynamicTextSprite});a.common.utils={};a.common.utils.ArrayUtil=function(){};g["com.cmm.common.utils.ArrayUtil"]=a.common.utils.ArrayUtil;a.common.utils.ArrayUtil.__name__=["com","cmm","common","utils","ArrayUtil"];a.common.utils.ArrayUtil.shuffle=function(b){for(var b=b.slice(0),d=[];0<b.length;){var e=a.common.utils.MathHelper.randomInRange(0,b.length-1)|0;d.push(b.splice(e,1)[0])}return d};a.common.utils.ArrayUtil.indexOf=function(b,a){for(var e=0,c=a.length;e<c;){var o=e++;if(a[o]==b)return o}return-1};a.common.utils.ArrayUtil.prototype={__class__:a.common.utils.ArrayUtil};a.common.utils.LibraryTools=function(){};g["com.cmm.common.utils.LibraryTools"]=a.common.utils.LibraryTools;a.common.utils.LibraryTools.__name__=["com","cmm","common","utils","LibraryTools"];a.common.utils.LibraryTools.addLibrary=function(b){null==a.common.utils.LibraryTools._libraries&&(a.common.utils.LibraryTools._libraries=new A);a.common.utils.LibraryTools._libraries.set(b.name,b)};a.common.utils.LibraryTools.addLibrariesFromAssetPack=function(b){for(var d=u.iter(b.get_manifest()._entries);d.hasNext();){var e=d.next(),c=e.name.indexOf("library.json");-1<c&&a.common.utils.LibraryTools.addLibrary(new a.common.display.FlumpLibrary(b,e.name.substring(0,c-1)))}};a.common.utils.LibraryTools.createLibraryItem=function(b,d){if(null!=d)return a.common.utils.LibraryTools._libraries.exists(d)?a.common.utils.LibraryTools._libraries.get(d).createSprite(b):null;var e=null,c=null,o=[];if(null==a.common.utils.LibraryTools._libraries)return null;for(var l=a.common.utils.LibraryTools._libraries.iterator();l.hasNext();){var f=l.next(),e=f._symbols.get(b);null!=e&&(c=e,o.push(f.name))}if(null==c)return null;if(1<o.length)throw"LibrayTools.hx createLibraryItem(): symbol "+
b+" was found multiple times in the following libraries: "+n.string(o);return c.createSprite()};a.common.utils.LibraryTools.createMovieClip=function(b,d){return a.common.utils.LibraryTools.createLibraryItem(b,d)};a.common.utils.MathHelper=function(){};g["com.cmm.common.utils.MathHelper"]=a.common.utils.MathHelper;a.common.utils.MathHelper.__name__=["com","cmm","common","utils","MathHelper"];a.common.utils.MathHelper.randomInRange=function(b,d){null==a.common.utils.MathHelper.random&&(a.common.utils.MathHelper.random=new Ya((new Date).getSeconds()));var e=Math.abs(d-b+1);return Math.floor(a.common.utils.MathHelper.random.nextFloat()*e+b)};a.common.utils.MathHelper.prototype={__class__:a.common.utils.MathHelper};a.tbm_bbs={};a.tbm_bbs.TBM_BBS_Game=function(){j.DEFAULT_BG_COLOR=0;a.common.app.Wrapper.call(this)};g["com.cmm.tbm_bbs.TBM_BBS_Game"]=a.tbm_bbs.TBM_BBS_Game;a.tbm_bbs.TBM_BBS_Game.__name__=["com","cmm","tbm_bbs","TBM_BBS_Game"];a.tbm_bbs.TBM_BBS_Game.playTransition=function(b){a.common.app.Wrapper.instance._animLayer.addChild(a.tbm_bbs.TBM_BBS_Game.transitionContainer);a.tbm_bbs.TBM_BBS_Game.onTransitionFunc=b;a.tbm_bbs.TBM_BBS_Game.calledTransitionFunc=!1;0.5<Math.random()?(a.tbm_bbs.TBM_BBS_Game.transition_motorcycle.set_visible(!0),a.tbm_bbs.TBM_BBS_Game.transition_motorcycle.gotoAndPlay(1,null,0,!0)):(a.tbm_bbs.TBM_BBS_Game.transition_surfboard.set_visible(!0),a.tbm_bbs.TBM_BBS_Game.transition_surfboard.gotoAndPlay(1,null,0,!0))};a.tbm_bbs.TBM_BBS_Game.onTransition=function(b){if("transition"==b&&(a.tbm_bbs.TBM_BBS_Game.calledTransitionFunc=!0,null!=a.tbm_bbs.TBM_BBS_Game.onTransitionFunc))a.tbm_bbs.TBM_BBS_Game.onTransitionFunc()};a.tbm_bbs.TBM_BBS_Game.onTransitionComplete=function(){if(!1==a.tbm_bbs.TBM_BBS_Game.calledTransitionFunc&&(a.tbm_bbs.TBM_BBS_Game.calledTransitionFunc=!0,null!=a.tbm_bbs.TBM_BBS_Game.onTransitionFunc))a.tbm_bbs.TBM_BBS_Game.onTransitionFunc();a.tbm_bbs.TBM_BBS_Game.transition_motorcycle.set_visible(!1);a.tbm_bbs.TBM_BBS_Game.transition_surfboard.set_visible(!1)};a.tbm_bbs.TBM_BBS_Game.get_smallScreen=function(){return a.tbm_bbs.utils.BrowserDetect.iPhone4?!0:1>j.GLOBAL_SCALE};a.tbm_bbs.TBM_BBS_Game.__super__=a.common.app.Wrapper;a.tbm_bbs.TBM_BBS_Game.prototype=r(a.common.app.Wrapper.prototype,{init:function(){a.common.app.Wrapper.prototype.init.call(this);(new a.common.app.StateMachine(new a.tbm_bbs.app.MainStateList)).startMachine();a.tbm_bbs.TBM_BBS_Game.transitionContainer=new a.common.display.SpriteContainer;a.common.app.Wrapper.instance._animLayer.addChild(a.tbm_bbs.TBM_BBS_Game.transitionContainer);a.tbm_bbs.TBM_BBS_Game.transition_motorcycle=a.common.utils.LibraryTools.createMovieClip("mc_transition_motorcycle");a.tbm_bbs.TBM_BBS_Game.transitionContainer.addChild(a.tbm_bbs.TBM_BBS_Game.transition_motorcycle);a.tbm_bbs.TBM_BBS_Game.transition_motorcycle.set_visible(!1);a.tbm_bbs.TBM_BBS_Game.transition_motorcycle.get_onCallbackLabel().connect(function(b){a.tbm_bbs.TBM_BBS_Game.onTransition(b)});a.tbm_bbs.TBM_BBS_Game.transition_motorcycle.get_onComplete().connect(function(){a.tbm_bbs.TBM_BBS_Game.onTransitionComplete()});a.tbm_bbs.TBM_BBS_Game.transition_surfboard=a.common.utils.LibraryTools.createMovieClip("mc_transition_surfboard");a.tbm_bbs.TBM_BBS_Game.transitionContainer.addChild(a.tbm_bbs.TBM_BBS_Game.transition_surfboard);a.tbm_bbs.TBM_BBS_Game.transition_surfboard.set_visible(!1);a.tbm_bbs.TBM_BBS_Game.transition_surfboard.get_onCallbackLabel().connect(function(b){a.tbm_bbs.TBM_BBS_Game.onTransition(b)});a.tbm_bbs.TBM_BBS_Game.transition_surfboard.get_onComplete().connect(function(){a.tbm_bbs.TBM_BBS_Game.onTransitionComplete()})},__class__:a.tbm_bbs.TBM_BBS_Game});a.tbm_bbs.app={};a.tbm_bbs.app.EndGameState=function(){var b=this;a.common.app.State.call(this);this._winScreen=a.common.app.SceneManager.addSceneToList("mc_winScene");this._levelSelectBtn=this._winScreen.getChildByName("btn_levelselect");this._levelSelectBtn.get_pointerClick().connect(function(a){b.onLevelSelectBtnClick(a)});this._playAgainBtn=this._winScreen.getChildByName("btn_playAgain");this._playAgainBtn.get_pointerClick().connect(function(a){b.onPlayAgainBtnClick(a)})};g["com.cmm.tbm_bbs.app.EndGameState"]=a.tbm_bbs.app.EndGameState;a.tbm_bbs.app.EndGameState.__name__=["com","cmm","tbm_bbs","app","EndGameState"];a.tbm_bbs.app.EndGameState.__super__=a.common.app.State;a.tbm_bbs.app.EndGameState.prototype=r(a.common.app.State.prototype,{onReset:function(){a.common.app.games.GameGlobals.currentLevel.set__(0);a.common.app.games.GameGlobals.prevLevelScore.set__(0);a.common.app.games.GameGlobals.score.set__(0);this.nextState="com.cmm.tbm_bbs.app.GameState";this.stateComplete()},onPlayAgainBtnClick:function(){a.common.app.SceneManager.cancelSceneQueue();a.common.app.games.GameGlobals.currentLevel.set__(1);a.common.app.games.GameGlobals.prevLevelScore.set__(0);a.common.app.games.GameGlobals.score.set__(0);a.common.event.EDispatcher.dispatchEvent(new a.tbm_bbs.event.TBM_BBS_Event("onSetUpLevel"));this.nextState="com.cmm.tbm_bbs.app.GameState";this.stateComplete()},onLevelSelectBtnClick:function(){a.common.app.SceneManager.cancelSceneQueue();this.nextState="com.cmm.tbm_bbs.app.LevelSelectState";this.stateComplete()},exitState:function(){a.common.app.State.prototype.exitState.call(this);a.common.event.EDispatcher.removeEventListener("com.cmm.common.events.reset",p(this,this.onReset))},enterState:function(){a.common.app.State.prototype.enterState.call(this);a.common.audio.SoundPlayerRemote.play("introLoop");a.common.audio.SoundPlayerRemote.play("win");a.common.event.EDispatcher.addEventListener("com.cmm.common.events.reset",p(this,this.onReset));this.nextState="com.cmm.tbm_bbs.app.GameState";a.common.app.SceneManager.playSceneQueue(["mc_winScene"],p(this,this.stateComplete));t.__cast(a.common.app.SceneManager.get_currentScene().getChildByName("txt_winscreenbigscore"),a.common.text.DynamicTextSprite).set_text(n.string(a.common.app.games.GameGlobals.score._value));var b=0;if(null!=k._platform.getStorage().get("high_score")||0>=k._platform.getStorage().get("high_score"))b=k._platform.getStorage().get("high_score");a.common.app.games.GameGlobals.score._value>b&&(b=a.common.app.games.GameGlobals.score._value,k._platform.getStorage().set("high_score",b));t.__cast(a.common.app.SceneManager.get_currentScene().getChildByName("txt_winscreensmallscore"),a.common.text.DynamicTextSprite).set_text(n.string(b));a.common.app.games.GameGlobals.currentLevel.set__(0);a.common.app.games.GameGlobals.score.set__(0);k._platform.getStorage().set("last_level",a.common.app.games.GameGlobals.currentLevel._value);k._platform.getStorage().set("game_complete",!0)},__class__:a.tbm_bbs.app.EndGameState});a.tbm_bbs.app.GameState=function(){this.paused=!1;this.HURRYUP_LEAVE_TIME=12;this.HURRYUP_SPAWN_TIME=15;this._active=!1;this._lastLevelIdx=0;this._hiddenObjectValue=this._specialObjectValue=100;var b=this;a.common.app.State.call(this);a.common.event.EDispatcher.addEventListener("onLevelComplete",p(this,this.onLevelComplete));a.common.event.EDispatcher.addEventListener("com.cmm.common.events.pause",p(this,this.onPause));a.common.event.EDispatcher.addEventListener("com.cmm.common.events.resume",p(this,this.onResume));a.common.event.EDispatcher.addEventListener("onHiddenObjectFound",p(this,this.onHiddenObjectFound));a.common.event.EDispatcher.addEventListener("onSpecialObjectFound",p(this,this.onSpecialObjectFound));a.common.event.EDispatcher.addEventListener("onBonusItemFound",p(this,this.onBonusItemFound));a.common.event.EDispatcher.addEventListener("onSetUpLevel",p(this,this.onSetUpLevel));this._levelArray=[[new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level1_1"),7,4),new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level1_2"),7,4),new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level1_3"),7,4)],[new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level2_1"),7,4),new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level2_2"),7,4),new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level2_3"),7,4)],[new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level3_1"),8,4),new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level3_2"),8,4),new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level3_3"),8,4)],[new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level4_1"),9,4),new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level4_2"),9,4),new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level4_3"),9,4)],[new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level5_1"),10,4),new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level5_2"),10,4),new a.tbm_bbs.game.Level(a.common.utils.LibraryTools.createMovieClip("mc_level5_3"),10,4)]];this.levelContainer=new a.common.display.SpriteContainer;a.common.app.Wrapper.instance.get_noScaleTillLargeLayer().addChild(this.levelContainer);this.ui=new a.tbm_bbs.game.UserInterface(a.common.utils.LibraryTools.createMovieClip("mc_interface"));a.common.app.Wrapper.instance.get_gameLayer().addChild(this.ui.mc);a.common.app.SceneManager.addSceneToList("mc_DOSHudMenu");a.common.app.games.GameGlobals.score.set__(0);this._miniGame=new a.tbm_bbs.game.MiniGame(a.common.utils.LibraryTools.createMovieClip("mc_miniGame"));a.common.app.Wrapper.instance.get_gameLayer().addChild(this._miniGame.mc);this._miniGame.get_onGameComplete().connect(function(){b.onMiniGameComplete()});this.ui.mc_timer.get_onComplete().connect(function(){b.onGameTimerComplete()});this._miniGame.mc_timer.pause();this.ui.mc_timer.pause();this.ui.mc_timer.addTimerEvent(new a.tbm_bbs.game.TimerEvent(a.common.app.games.GameGlobals.maxTime._value-this.HURRYUP_SPAWN_TIME,p(this,this.onHurryUpTimerEvent)));this.ui.mc_timer.addTimerEvent(new a.tbm_bbs.game.TimerEvent(a.common.app.games.GameGlobals.maxTime._value-this.HURRYUP_LEAVE_TIME,p(this,this.onHurryUpLeaveTimerEvent)))};g["com.cmm.tbm_bbs.app.GameState"]=a.tbm_bbs.app.GameState;a.tbm_bbs.app.GameState.__name__=["com","cmm","tbm_bbs","app","GameState"];a.tbm_bbs.app.GameState.__super__=a.common.app.State;a.tbm_bbs.app.GameState.prototype=r(a.common.app.State.prototype,{getRandomLevelIdx:function(){if(null==this._levelIndeces){this._levelIndeces=[];for(var b=0,d=this._levelArray.length;b<d;){var e=b++;this._levelIndeces.push([])}}var c=a.common.app.games.GameGlobals.currentLevel._value-1;if(0==this._levelIndeces[c].length){b=0;for(d=this._levelArray[c].length;b<d;)e=b++,this._levelIndeces[c].push(e);this._levelIndeces[c]=a.common.utils.ArrayUtil.shuffle(this._levelIndeces[c])}return this._levelIndeces[c].pop()},onSetUpLevel:function(b){null!=this._curLevel&&this._curLevel.disable();var d=null;null!=b.data?b.data==a.common.app.games.GameGlobals.currentLevel._value?(d=this._levelArray[a.common.app.games.GameGlobals.currentLevel._value-1][this._lastLevelIdx],a.common.app.games.GameGlobals.score.set__(a.common.app.games.GameGlobals.prevLevelScore._value)):(a.common.app.games.GameGlobals.currentLevel.set__(b.data),this._lastLevelIdx=this.getRandomLevelIdx(),d=this._levelArray[a.common.app.games.GameGlobals.currentLevel._value-1][this._lastLevelIdx]):(this._lastLevelIdx=this.getRandomLevelIdx(),d=this._levelArray[a.common.app.games.GameGlobals.currentLevel._value-1][this._lastLevelIdx]);for(this._curLevel=d;0<this.levelContainer.get_numChildren();)this.levelContainer.removeChildAt(0);this.levelContainer.addChild(d.container);this._curLevel.init();this.ui.mc_hiddenObjectsDisplay.init(this._curLevel.hiddenObjectArray,this._curLevel.specialObjectArray);this.ui.btn_hint.init();this.ui.mc_zoomMenu.init();this.ui.init();this.ui.btn_hint.registerCallback((vb=this._curLevel,p(vb,vb.onHintButtonClick)))},onQuit:function(){a.common.app.games.GameGlobals.score.set__(0);a.common.app.games.GameGlobals.prevLevelScore.set__(0);this._miniGame.cleanUp();this.ui.mc_timer.enabled=!0;this.ui.mc_timer.pause();this._miniGame.mc_timer.enabled=!0;this._miniGame.mc_timer.pause();this._miniGame.mc_timer.enabled=!1;this.nextState="com.cmm.tbm_bbs.app.PregameState";this.stateComplete()},onMiniGameComplete:function(){2==a.common.app.games.GameGlobals.currentLevel._value||4==a.common.app.games.GameGlobals.currentLevel._value?a.common.audio.SoundPlayerRemote.play("nightLoop"):a.common.audio.SoundPlayerRemote.play("dayLoop");this.ui.mc_timer.enabled=!0;this.ui.mc_timer.resume();this.ui.enable();this._curLevel.enable();this._miniGame.mc_timer.enabled=!1},onBonusItemFound:function(){a.common.audio.SoundPlayerRemote.play("bonusLoop");this._miniGame.mc_timer.enabled=!0;this._miniGame.start();this.ui.mc_timer.pause();this.ui.disable();this._curLevel.disable();this.ui.mc_timer.enabled=!1},onSpecialObjectFound:function(){var b=a.common.app.games.GameGlobals.score;b.set__(b._value+this._specialObjectValue)},onHiddenObjectFound:function(){var b=a.common.app.games.GameGlobals.score;b.set__(b._value+this._hiddenObjectValue)},onLevelComplete:function(){a.common.app.games.GameGlobals.timeLeft.set__(a.common.app.games.GameGlobals.maxTime._value-this.ui.mc_timer.get_curTime());var b=a.common.app.games.GameGlobals.currentLevel,d=b._value;b.set__(d+1);d;this.nextState=a.common.app.games.GameGlobals.currentLevel._value>a.common.app.games.GameGlobals.lastLevel._value?"com.cmm.tbm_bbs.app.EndGameState":"com.cmm.tbm_bbs.app.LevelCompleteState";this.stateComplete()},onGameTimerComplete:function(){2==a.common.app.games.GameGlobals.currentLevel._value||4==a.common.app.games.GameGlobals.currentLevel._value?a.common.audio.SoundPlayerRemote.play("nightSting"):a.common.audio.SoundPlayerRemote.play("daySting");this.nextState="com.cmm.tbm_bbs.app.LoseState";this.stateComplete()},onFocusOut:function(){!1==this.paused&&(a.common.event.EDispatcher.dispatchEvent(new a.common.event.CMMEvent("com.cmm.common.events.pause")),a.common.app.SceneManager.playSceneAt("mc_DOSHudMenu",1))},onResume:function(){this.paused=!1;!1==this._miniGame.mc_timer.enabled&&this._curLevel.enable()},onPause:function(){this.paused=!0;this._curLevel.disable()},onStartGameTimerComplete:function(){this._curLevel.enable();this._miniGame.mc_timer.enabled=!1;this.ui.mc_timer.enabled=!0;this.ui.mc_timer.reset();this.ui.enable();null!=this._startTimerSConn&&this._startTimerSConn.dispose()},onHurryUpLeaveTimerEvent:function(){this.ui.mc_hurryup.set_visible(!1);this.ui.mc_hurryup.gotoAndStop(1)},onHurryUpTimerEvent:function(){this.ui.mc_hurryup.set_visible(!0);this.ui.mc_hurryup.gotoAndStop(2)},stateComplete:function(){this._miniGame.mc_timer.pause();this.ui.mc_timer.enabled=!0;this.ui.mc_timer.pause();this._miniGame.mc_timer.enabled=!1;a.common.app.State.prototype.stateComplete.call(this)},exitState:function(){a.common.app.State.prototype.exitState.call(this);a.common.event.EDispatcher.removeEventListener("com.cmm.common.events.quit",p(this,this.onQuit));this._active=!1;a.common.event.EDispatcher.removeEventListener("com.cmm.common.events.onFocusOut",p(this,this.onFocusOut));this.ui.mc_timer.mc.gotoAndStop(1);this.ui.mc_hurryup.gotoAndStop(1);this.ui.mc_hurryup.set_visible(!1);null!=this._startTimerSConn&&this._startTimerSConn.dispose();null},enterState:function(){var b=this;a.common.app.State.prototype.enterState.call(this);this.paused=!1;a.common.event.EDispatcher.addEventListener("com.cmm.common.events.quit",p(this,this.onQuit));k._platform.getStorage().set("last_level",a.common.app.games.GameGlobals.currentLevel._value);this._active=!0;a.common.event.EDispatcher.addEventListener("com.cmm.common.events.onFocusOut",p(this,this.onFocusOut));2==a.common.app.games.GameGlobals.currentLevel._value||4==a.common.app.games.GameGlobals.currentLevel._value?a.common.audio.SoundPlayerRemote.play("nightLoop"):a.common.audio.SoundPlayerRemote.play("dayLoop");this.nextState="com.cmm.tbm_bbs.app.EndGameState";this.ui.mc_timer.reset();this.ui.mc_timer.pause();this.ui.disable();this._curLevel.disable();this._startTimerSConn=this.ui.mc_go.mc.get_onComplete().connect(function(){b.onStartGameTimerComplete()});this.ui.mc_go.start();this.ui.mc_hurryup.set_visible(!1);this.ui.mc_hurryup.gotoAndStop(1)},__class__:a.tbm_bbs.app.GameState});a.tbm_bbs.app.LevelCompleteState=function(){this._curCharSfxId=0;this._activeTimer=null;this._hasFocus=!0;this.STATE_IDLE="idle";this.STATE_TRANSITION_OUT="transitionOut";this.STATE_TRANSITION_IN="transitionIn";this._curState="idle";this.SPECIAL_OBJECT_SCORE_VALUE=1E3;this.TIME_SCORE_VALUE=this.SPECIAL_OBJECT_SCORE_DEC=50;this.INC_TIMER_MS=0.05;this._timeLeft=this._specialObjectIdx=this._specialObjectScoreTotal=this._specialObjectScore=0;a.common.app.State.call(this);this._levelCompleteScreen=a.common.app.SceneManager.addSceneToList("mc_levelComplete");this._levelCompleteScreen.getChildByName("btn_next").get_pointerClick().connect(p(this,this.onNextBtnClick));this._bonusTextSprite=this._levelCompleteScreen.getChildByName("txt_bonusscorenumber");this._bonusTextSprite.anchorX.set__(this._bonusTextSprite.get_textMetrics().width/2);this._bonusTextSprite.anchorY.set__(this._bonusTextSprite.get_textMetrics().height/2);this._bonusTextSprite.x.set__(552.3+this._bonusTextSprite.anchorX._value);this._bonusTextSprite.y.set__(83.95+this._bonusTextSprite.anchorY._value);this._veil=new U(0,j.DEFAULT_WIDTH+16,j.DEFAULT_HEIGHT+16);this._veil.alpha.set__(0);this._veil.set_pointerEnabled(!1);a.common.app.Wrapper.instance.get_animLayer().addChildAt(this._veil,0);this._specialObjects=new A;this._specialObjectContainers=[];this._specialObjectContainers.push(this._levelCompleteScreen.getChildByName("mc_character_0"));this._specialObjectContainers.push(this._levelCompleteScreen.getChildByName("mc_character_2"));this._specialObjectContainers.push(this._levelCompleteScreen.getChildByName("mc_character_3"));this._specialObjectContainers.push(this._levelCompleteScreen.getChildByName("mc_character_1"));for(var b=0,d=this._specialObjectContainers.length;b<d;)this._specialObjectContainers[b++].scissor=new T(-j.DEFAULT_WIDTH/2,-j.DEFAULT_HEIGHT/2,j.DEFAULT_WIDTH,350);this._incScoreTimer=new a.tbm_bbs.utils.TimerComponent(this.INC_TIMER_MS,p(this,this.onIncScoreTimerComplete));this._levelCompleteScreen.owner.addChild((new D).add(this._incScoreTimer));this._incScoreSpecialObjectTimer=new a.tbm_bbs.utils.TimerComponent(this.INC_TIMER_MS,p(this,this.onIncScoreSpecialObjectTimerComplete));this._levelCompleteScreen.owner.addChild((new D).add(this._incScoreSpecialObjectTimer))};g["com.cmm.tbm_bbs.app.LevelCompleteState"]=a.tbm_bbs.app.LevelCompleteState;a.tbm_bbs.app.LevelCompleteState.__name__=["com","cmm","tbm_bbs","app","LevelCompleteState"];a.tbm_bbs.app.LevelCompleteState.__super__=a.common.app.State;a.tbm_bbs.app.LevelCompleteState.prototype=r(a.common.app.State.prototype,{onNextBtnClick:function(){this.transitionOut()},activateNextButton:function(){a.common.audio.SoundPlayerRemote.stopChannel("sfx");a.common.audio.SoundPlayerRemote.play("tallyDone");a.common.audio.SoundPlayerRemote.play("win");var b=a.common.app.games.GameGlobals.currentLevel._value-1;2==b||4==b?a.common.audio.SoundPlayerRemote.play("nightSting"):a.common.audio.SoundPlayerRemote.play("daySting");a.common.app.games.GameGlobals.prevLevelScore.set__(a.common.app.games.GameGlobals.score._value);this._levelCompleteScreen.getChildByName("btn_next").set_visible(!0)},addScoreFromSpecialObjects:function(){if(0<this._specialObjectScore){this._specialObjectScore-=this.SPECIAL_OBJECT_SCORE_DEC;var b=a.common.app.games.GameGlobals.score;b.set__(b._value+this.SPECIAL_OBJECT_SCORE_DEC);t.__cast(this._levelCompleteScreen.getChildByName("txt_scorenumber"),a.common.text.DynamicTextSprite).set_text(n.string(a.common.app.games.GameGlobals.score._value));this._incScoreSpecialObjectTimer.reset();this._activeTimer=this._incScoreSpecialObjectTimer}else null!=a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound?this._specialObjectIdx>=a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound.length?this.activateNextButton():!0==a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound[this._specialObjectIdx].found?(this._specialObjects.get(a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound[this._specialObjectIdx].name).gotoAndStop("found"),a.common.audio.SoundPlayerRemote.play("charFillIn"+this._curCharSfxId),this._curCharSfxId++,this._specialObjectScoreTotal+=this.SPECIAL_OBJECT_SCORE_VALUE,this._bonusTextSprite.set_text(n.string(this._specialObjectScoreTotal)),this._bonusTextSprite.scaleX.animate(0.8,1,0.4),this._bonusTextSprite.scaleY.animate(0.8,1,0.4),this._specialObjectScore=this.SPECIAL_OBJECT_SCORE_VALUE,this._specialObjectIdx++,this._incScoreSpecialObjectTimer.reset(),this._activeTimer=this._incScoreSpecialObjectTimer):(this._specialObjectIdx++,this.addScoreFromSpecialObjects()):this.activateNextButton()},onIncScoreSpecialObjectTimerComplete:function(){this.addScoreFromSpecialObjects()},addScoreFromTimer:function(){if(0<this._timeLeft){this._timeLeft--;t.__cast(this._levelCompleteScreen.getChildByName("txt_timeleftnumber"),a.common.text.DynamicTextSprite).set_text(a.tbm_bbs.utils.TimeUtil.convertSecondsToMMSS(this._timeLeft));var b=a.common.app.games.GameGlobals.score;b.set__(b._value+this.TIME_SCORE_VALUE);t.__cast(this._levelCompleteScreen.getChildByName("txt_scorenumber"),a.common.text.DynamicTextSprite).set_text(n.string(a.common.app.games.GameGlobals.score._value));this._incScoreTimer.reset();this._activeTimer=this._incScoreTimer}else this._specialObjectScoreTotal=this._specialObjectScore=this._specialObjectIdx=0,this._curCharSfxId=1,this._incScoreSpecialObjectTimer.reset(),this._activeTimer=this._incScoreSpecialObjectTimer},onIncScoreTimerComplete:function(){this.addScoreFromTimer()},initSpecialObjectDisplay:function(){for(var b=0,d=this._specialObjectContainers.length;b<d;)for(var e=b++;0<this._specialObjectContainers[e].get_numChildren();)this._specialObjectContainers[e].removeChildAt(0);var c=null;if(null!=a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound){b=0;for(d=a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound.length;b<d;)e=b++,c=a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound[e],!1==this._specialObjects.exists(c.name)&&this._specialObjects.set(c.name,a.common.utils.LibraryTools.createMovieClip("mc_"+c.name)),c=this._specialObjects.get(c.name),c.gotoAndStop("hidden"),this._specialObjectContainers[e].addChild(c);null!=c&&"mc_seacat"==c.symbol.get_name()?(this._specialObjectContainers[this._specialObjectContainers.length-1].scissor.width=j.DEFAULT_WIDTH-206,c.x.set__(35)):(this._specialObjectContainers[this._specialObjectContainers.length-1].scissor.width=j.DEFAULT_WIDTH,c.x.set__(0))}},onTransitionInComplete:function(){this._hasFocus&&(this._incScoreTimer.reset(),this._activeTimer=this._incScoreTimer,a.common.audio.SoundPlayerRemote.play("tally"))},transitionOut:function(){a.common.app.games.GameGlobals.currentLevel._value>a.common.app.games.GameGlobals.lastLevel._value?(this.nextState="com.cmm.tbm_bbs.app.EndGameState",this.stateComplete()):(this.nextState="com.cmm.tbm_bbs.app.GameState",a.common.event.EDispatcher.dispatchEvent(new a.tbm_bbs.event.TBM_BBS_Event("onSetUpLevel")),this._curState=this.STATE_TRANSITION_OUT,a.tbm_bbs.TBM_BBS_Game.playTransition(p(this,this.onTransitionOut)))},onFocusIn:function(){this._hasFocus=!0;if(null!=this._activeTimer)this._activeTimer.resume();else if(this._curState==this.STATE_IDLE)this.onTransitionInComplete()},onFocusOut:function(){this._hasFocus=!1;null!=this._activeTimer&&this._activeTimer.pause()},onTransitionOut:function(){this._veil.alpha.set__(0);this._levelCompleteScreen.y.set__(j.DEFAULT_HEIGHT);this.stateComplete()},onTransitionIn:function(){this._veil.alpha.set__(0.75);this._levelCompleteScreen.y.set__(0);this._curState=this.STATE_IDLE;this.onTransitionInComplete()},exitState:function(){this._veil.set_pointerEnabled(!1);this._veil.alpha.set__(0);this._incScoreTimer.stop();this._incScoreSpecialObjectTimer.stop();a.common.event.EDispatcher.addEventListener("com.cmm.common.events.onFocusOut",p(this,this.onFocusOut));a.common.event.EDispatcher.addEventListener("com.cmm.common.events.onFocusIn",p(this,this.onFocusIn));a.common.app.State.prototype.exitState.call(this)},enterState:function(){a.common.app.State.prototype.enterState.call(this);this._hasFocus=!0;this._activeTimer=null;a.common.event.EDispatcher.addEventListener("com.cmm.common.events.onFocusOut",p(this,this.onFocusOut));a.common.event.EDispatcher.addEventListener("com.cmm.common.events.onFocusIn",p(this,this.onFocusIn));this.nextState="com.cmm.tbm_bbs.app.EndGameState";this.initSpecialObjectDisplay();this._bonusTextSprite.set_text(n.string(0));this._levelCompleteScreen.gotoAndStop(1);t.__cast(this._levelCompleteScreen.getChildByName("txt_scorenumber"),a.common.text.DynamicTextSprite).set_text(n.string(a.common.app.games.GameGlobals.score._value));this._timeLeft=Math.floor(a.common.app.games.GameGlobals.timeLeft._value);t.__cast(this._levelCompleteScreen.getChildByName("txt_timeleftnumber"),a.common.text.DynamicTextSprite).set_text(a.tbm_bbs.utils.TimeUtil.convertSecondsToMMSS(this._timeLeft));a.common.app.SceneManager.playSceneQueue(["mc_levelComplete"],null,null);this._levelCompleteScreen.getChildByName("btn_next").set_visible(!1);this._curState=this.STATE_IDLE;this._veil.set_pointerEnabled(!0);this._veil.alpha.set__(0);this._curState=this.STATE_TRANSITION_IN;this._levelCompleteScreen.y.set__(j.DEFAULT_HEIGHT);this._curState=this.STATE_TRANSITION_IN;a.tbm_bbs.TBM_BBS_Game.playTransition(p(this,this.onTransitionIn))},__class__:a.tbm_bbs.app.LevelCompleteState});a.tbm_bbs.app.LevelSelectState=function(){var b=this;a.common.app.State.call(this);this._levelSelectScene=a.common.app.SceneManager.addSceneToList("mc_levelSelectScene");for(var d=1,e=0;5>e;)e++,this._levelSelectScene.getChildByName("btn_level_"+n.string(d)).get_pointerClick().connect(function(a){b.onLevelBtnClick(a)}),d++;this._startOverBtn=this._levelSelectScene.getChildByName("btn_startOver");this._startOverBtn.get_pointerClick().connect(function(a){b.onStartOverBtnClick(a)});this._backBtn=this._levelSelectScene.getChildByName("btn_back");this._backBtn.get_pointerClick().connect(function(a){b.onBackBtnClick(a)})};g["com.cmm.tbm_bbs.app.LevelSelectState"]=a.tbm_bbs.app.LevelSelectState;a.tbm_bbs.app.LevelSelectState.__name__=["com","cmm","tbm_bbs","app","LevelSelectState"];a.tbm_bbs.app.LevelSelectState.__super__=a.common.app.State;a.tbm_bbs.app.LevelSelectState.prototype=r(a.common.app.State.prototype,{onLevelBtnClick:function(b){var d=b.hit.owner.parent._compMap.Sprite_1.get_instanceName().lastIndexOf("_"),b=n.parseInt(u.substr(b.hit.owner.parent._compMap.Sprite_1.get_instanceName(),d+1,null));a.common.event.EDispatcher.dispatchEvent(new a.tbm_bbs.event.TBM_BBS_Event("onSetUpLevel",b));a.common.app.SceneManager.cancelSceneQueue();this.nextState="com.cmm.tbm_bbs.app.GameState";this.stateComplete()},onBackBtnClick:function(){a.common.app.games.GameGlobals.currentLevel.set__(0);a.common.app.games.GameGlobals.prevLevelScore.set__(0);a.common.app.games.GameGlobals.score.set__(0);this.nextState="com.cmm.tbm_bbs.app.PregameState";this.stateComplete()},onStartOverBtnClick:function(){},onQuit:function(){k._platform.getStorage().set("last_level",null);k._platform.getStorage().set("game_complete",null);a.common.app.games.GameGlobals.currentLevel.set__(0);a.common.app.games.GameGlobals.prevLevelScore.set__(0);a.common.app.games.GameGlobals.score.set__(0);this.nextState="com.cmm.tbm_bbs.app.PregameState";this.stateComplete()},stateComplete:function(){a.common.app.State.prototype.stateComplete.call(this)},exitState:function(){a.common.app.State.prototype.exitState.call(this);a.common.event.EDispatcher.removeEventListener("com.cmm.common.events.quit",p(this,this.onQuit))},enterState:function(){a.common.app.State.prototype.enterState.call(this);this._levelSelectScene.gotoAndStop(1);a.common.event.EDispatcher.addEventListener("com.cmm.common.events.quit",p(this,this.onQuit));a.common.app.SceneManager.playSceneQueue(["mc_levelSelectScene"],null,null)},__class__:a.tbm_bbs.app.LevelSelectState});a.tbm_bbs.app.LoseState=function(){a.common.app.State.call(this)};g["com.cmm.tbm_bbs.app.LoseState"]=a.tbm_bbs.app.LoseState;a.tbm_bbs.app.LoseState.__name__=["com","cmm","tbm_bbs","app","LoseState"];a.tbm_bbs.app.LoseState.__super__=a.common.app.State;a.tbm_bbs.app.LoseState.prototype=r(a.common.app.State.prototype,{onQuit:function(){a.common.app.games.GameGlobals.currentLevel.set__(0);k._platform.getStorage().set("last_level",a.common.app.games.GameGlobals.currentLevel._value);a.common.app.games.GameGlobals.prevLevelScore.set__(0);a.common.app.games.GameGlobals.score.set__(0);this.nextState="com.cmm.tbm_bbs.app.PregameState";this.stateComplete()},exitState:function(){a.common.app.State.prototype.exitState.call(this);a.common.event.EDispatcher.removeEventListener("com.cmm.common.events.quit",p(this,this.onQuit))},enterState:function(){a.common.app.State.prototype.enterState.call(this);a.common.audio.SoundPlayerRemote.play("lose");a.common.event.EDispatcher.addEventListener("com.cmm.common.events.quit",p(this,this.onQuit));this.nextState="com.cmm.tbm_bbs.app.GameState";a.common.app.SceneManager.playSceneQueue(["mc_loseScene"],p(this,this.stateComplete));a.common.event.EDispatcher.dispatchEvent(new a.tbm_bbs.event.TBM_BBS_Event("onSetUpLevel",a.common.app.games.GameGlobals.currentLevel._value))},__class__:a.tbm_bbs.app.LoseState});a.tbm_bbs.app.MainStateList=function(){a.common.app.StateList.call(this);this.statePackagePath="com.tbm_bbs.app";this.stateClassList=[a.tbm_bbs.app.PregameState,a.tbm_bbs.app.GameState,a.tbm_bbs.app.LevelCompleteState,a.tbm_bbs.app.EndGameState,a.tbm_bbs.app.LoseState,a.tbm_bbs.app.LevelSelectState]};g["com.cmm.tbm_bbs.app.MainStateList"]=a.tbm_bbs.app.MainStateList;a.tbm_bbs.app.MainStateList.__name__=["com","cmm","tbm_bbs","app","MainStateList"];a.tbm_bbs.app.MainStateList.__super__=a.common.app.StateList;a.tbm_bbs.app.MainStateList.prototype=r(a.common.app.StateList.prototype,{__class__:a.tbm_bbs.app.MainStateList});a.tbm_bbs.app.PregameState=function(){var b=this;a.common.app.State.call(this);this._titleScene=a.common.app.SceneManager.addSceneToList("mc_titleScene");null!=this._titleScene.getChildByName("mc_logoHolder")&&null!=a.common.io.LoadMaster.getTexture("config","logo")&&this._titleScene.getChildByName("mc_logoHolder").addChild(new X(a.common.io.LoadMaster.getTexture("config","logo")));null!=this._titleScene.getChildByName("mc_titleHolder")&&null!=a.common.io.LoadMaster.getTexture("config","title_logo")&&this._titleScene.getChildByName("mc_titleHolder").addChild(new X(a.common.io.LoadMaster.getTexture("config","title_logo")));this._continueBtn=this._titleScene.getChildByName("btn_continueSavedGame");this._continueBtn.get_pointerClick().connect(function(a){b.onContinueSavedGameClick(a)});this._continueBtn.set_visible(!1);this._playBtn=this._titleScene.getChildByName("btn_playside");this._playBtn.set_visible(!1);this._playBtn.get_pointerClick().connect(function(a){b.onPlayBtnClick(a)});this._playCenterBtn=this._titleScene.getChildByName("btn_playcenter");this._playCenterBtn.set_visible(!0);this._playCenterBtn.get_pointerClick().connect(function(a){b.onPlayBtnClick(a)});this._levelSelectBtn=this._titleScene.getChildByName("btn_levelSelect");this._levelSelectBtn.get_pointerClick().connect(function(a){b.onLevelSelectBtnClick(a)});this._levelSelectBtn.set_visible(!1);this.configureButtons()};g["com.cmm.tbm_bbs.app.PregameState"]=a.tbm_bbs.app.PregameState;a.tbm_bbs.app.PregameState.__name__=["com","cmm","tbm_bbs","app","PregameState"];a.tbm_bbs.app.PregameState.__super__=a.common.app.State;a.tbm_bbs.app.PregameState.prototype=r(a.common.app.State.prototype,{configureButtons:function(){null!=k._platform.getStorage().get("game_complete")&&(!0==k._platform.getStorage().get("game_complete")||"true"==k._platform.getStorage().get("game_complete")||"t"==k._platform.getStorage().get("game_complete"))?(this._continueBtn.set_visible(!1),this._playBtn.set_visible(!0),this._playCenterBtn.set_visible(!1),this._levelSelectBtn.set_visible(!0)):(null!=k._platform.getStorage().get("last_level")&&0<k._platform.getStorage().get("last_level")&&k._platform.getStorage().get("last_level")<=a.common.app.games.GameGlobals.lastLevel._value?(this._continueBtn.set_visible(!0),this._playBtn.set_visible(!0),this._playCenterBtn.set_visible(!1)):(this._continueBtn.set_visible(!1),this._playBtn.set_visible(!1),this._playCenterBtn.set_visible(!0)),this._levelSelectBtn.set_visible(!1))},onPlayBtnClick:function(){},onLevelSelectBtnClick:function(){a.common.app.SceneManager.cancelSceneQueue();this.nextState="com.cmm.tbm_bbs.app.LevelSelectState";this.stateComplete()},onInterimCallback:function(b){"mc_titleScene"==b&&k._platform.getTouch().get_supported()&&a.common.audio.SoundPlayerRemote.play("introLoop")},onContinueSavedGameClick:function(){a.common.app.SceneManager.cancelSceneQueue();null!=k._platform.getStorage().get("last_level")&&0<k._platform.getStorage().get("last_level")&&k._platform.getStorage().get("last_level")<=a.common.app.games.GameGlobals.lastLevel._value&&(a.common.app.games.GameGlobals.currentLevel.set__(k._platform.getStorage().get("last_level")),a.common.event.EDispatcher.dispatchEvent(new a.tbm_bbs.event.TBM_BBS_Event("onSetUpLevel")));this.nextState="com.cmm.tbm_bbs.app.GameState";this.stateComplete()},stateComplete:function(){a.common.app.State.prototype.stateComplete.call(this);null},exitState:function(){a.common.app.State.prototype.exitState.call(this);null},enterState:function(){a.common.app.State.prototype.enterState.call(this);a.common.audio.SoundPlayerRemote.play("introLoop");a.common.app.SceneManager.playSceneQueue(["mc_titleScene","mc_introScene","mc_helpScene"],p(this,this.stateComplete),p(this,this.onInterimCallback));a.common.app.games.GameGlobals.currentLevel.set__(1);a.common.event.EDispatcher.dispatchEvent(new a.tbm_bbs.event.TBM_BBS_Event("onSetUpLevel"));this.configureButtons()},__class__:a.tbm_bbs.app.PregameState});a.tbm_bbs.event={};a.tbm_bbs.event.TBM_BBS_Event=function(b,d,e){null==e&&(e=!0);a.common.event.Event.call(this,b,d,e)};g["com.cmm.tbm_bbs.event.TBM_BBS_Event"]=a.tbm_bbs.event.TBM_BBS_Event;a.tbm_bbs.event.TBM_BBS_Event.__name__=["com","cmm","tbm_bbs","event","TBM_BBS_Event"];a.tbm_bbs.event.TBM_BBS_Event.__super__=a.common.event.Event;a.tbm_bbs.event.TBM_BBS_Event.prototype=r(a.common.event.Event.prototype,{toString:function(){return a.common.event.Event.prototype.toString.call(this)},__class__:a.tbm_bbs.event.TBM_BBS_Event});a.tbm_bbs.game={};a.tbm_bbs.game.HelpMenu=function(b,a){var e=this;this.mc_popUp=b;this.btn_help=a;null!=this.btn_help&&this.btn_help.get_pointerClick().connect(function(b){e.onHelpButtonClick(b)});this.init()};g["com.cmm.tbm_bbs.game.HelpMenu"]=a.tbm_bbs.game.HelpMenu;a.tbm_bbs.game.HelpMenu.__name__=["com","cmm","tbm_bbs","game","HelpMenu"];a.tbm_bbs.game.HelpMenu.prototype={onHelpButtonClick:function(){null},init:function(){},__class__:a.tbm_bbs.game.HelpMenu};a.tbm_bbs.game.HiddenObjectsDisplay=function(b,d,e,c){this.PULSE_AMOUNT=87.5;this.PULSE_SPEED=0.4;this.MAX_SPECIAL_OBJECTS=4;this.MAX_SPECIAL_OBJ_SFX_IDS=7;this.MAX_OBJ_SFX_IDS=4;this._curPage=0;var o=this;a.common.event.EDispatcher.addEventListener("onHiddenObjectFound",p(this,this.onHiddenObjectFound));a.common.event.EDispatcher.addEventListener("onSpecialObjectFound",p(this,this.onSpecialObjectFound));this._scrollerObject=b;this._scrollDownBtn=d;this._scrollUpBtn=e;this._specialObjectContainers=c;this._activeHiddenObjects=new A;this._hiddenObjectArray=[];this._specialObjects=new A;null!=this._scrollDownBtn&&(this._scrollDownBtn.get_pointerClick().connect(function(b){o.onDownBtnClick(b)}),this._scrollDownBtn.owner.add(new a.tbm_bbs.utils.PulseComponent));null!=this._scrollUpBtn&&(this._scrollUpBtn.get_pointerClick().connect(function(b){o.onUpBtnClick(b)}),this._scrollUpBtn.owner.add(new a.tbm_bbs.utils.PulseComponent));null!=this._specialObjectContainers&&(this.MAX_SPECIAL_OBJECTS=this._specialObjectContainers.length);this.init(null,null)};g["com.cmm.tbm_bbs.game.HiddenObjectsDisplay"]=a.tbm_bbs.game.HiddenObjectsDisplay;a.tbm_bbs.game.HiddenObjectsDisplay.__name__=["com","cmm","tbm_bbs","game","HiddenObjectsDisplay"];a.tbm_bbs.game.HiddenObjectsDisplay.prototype={getNextSpecialObjSFXId:function(){null==this._specialObjSFXIdArray&&(this._specialObjSFXIdArray=[]);if(1>this._specialObjSFXIdArray.length){for(var b=0,d=this.MAX_SPECIAL_OBJ_SFX_IDS;b<d;)this._specialObjSFXIdArray.push(b++ +1);this._specialObjSFXIdArray=a.common.utils.ArrayUtil.shuffle(this._specialObjSFXIdArray)}return this._specialObjSFXIdArray.pop()},getNextObjSFXId:function(){null==this._objSFXIdArray&&(this._objSFXIdArray=[]);if(1>this._objSFXIdArray.length){for(var b=0,d=this.MAX_OBJ_SFX_IDS;b<d;)this._objSFXIdArray.push(b++ +1);this._objSFXIdArray=a.common.utils.ArrayUtil.shuffle(this._objSFXIdArray)}return this._objSFXIdArray.pop()},onUpBtnClick:function(){a.common.audio.SoundPlayerRemote.play("arrow");this._scrollerObject.gotoAndPlay("6-10","end",0);this._curPage=0;this.checkPageItems();this._scrollUpBtn.alpha.set__(0);this._scrollUpBtn.set_pointerEnabled(!1);this._scrollDownBtn.alpha.set__(1);this._scrollDownBtn.set_pointerEnabled(!0)},onDownBtnClick:function(){a.common.audio.SoundPlayerRemote.play("arrow");this._scrollerObject.gotoAndPlay("1-5","6-10",0);this._curPage=1;this.checkPageItems();this._scrollUpBtn.alpha.set__(1);this._scrollUpBtn.set_pointerEnabled(!0);this._scrollDownBtn.alpha.set__(0);this._scrollDownBtn.set_pointerEnabled(!1)},checkPageItems:function(){this._scrollDownBtn.owner._compMap.PulseComponent_7.killAll();this._scrollUpBtn.owner._compMap.PulseComponent_7.killAll();var b=!1;if(0==this._curPage){for(var a=0;5>a;){var e=a++;if(1==this._hiddenObjectArray[e].get_currentFrame()){b=!0;break}}!1==b&&this._scrollDownBtn.owner._compMap.PulseComponent_7.pulse(this._scrollDownBtn.alpha,1,0,1,this.PULSE_SPEED,this.PULSE_SPEED*2*this.PULSE_AMOUNT)}else{for(var c=5,a=this._hiddenObjectArray.length;c<a;)if(e=c++,1==this._hiddenObjectArray[e].get_currentFrame()){b=!0;break}!1==b&&this._scrollUpBtn.owner._compMap.PulseComponent_7.pulse(this._scrollUpBtn.alpha,1,0,1,this.PULSE_SPEED,this.PULSE_SPEED*2*this.PULSE_AMOUNT)}},onSpecialObjectFound:function(b){if(null!=this._specialObjects){this._specialObjects.get(b.data).gotoAndStop("found");for(var d=0,e=a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound.length;d<e;){var c=d++;if(a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound[c].name==b.data){a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound[c].found=!0;break}}a.common.audio.SoundPlayerRemote.play("gtrHits"+n.string(this.getNextSpecialObjSFXId()))}},onHiddenObjectFound:function(b){this._activeHiddenObjects.get(b.data).gotoAndStop("found");this.checkPageItems();a.common.audio.SoundPlayerRemote.play("item"+n.string(this.getNextObjSFXId()))},clearDisplay:function(){for(var b=this._activeHiddenObjects.keys();b.hasNext();)this._activeHiddenObjects.remove(b.next());for(;0<this._hiddenObjectArray.length;)this._hiddenObjectArray.pop();for(var b=0,d=this._scrollerObject.get_numChildren();b<d;){var e=b++;if(t.__instanceof(this._scrollerObject.getChildAt(e),a.common.display.MovieClip)){e=t.__cast(this._scrollerObject.getChildAt(e),a.common.display.MovieClip);e.gotoAndStop("hidden");for(var c=0,o=e.get_numChildren();c<o;){var l=c++;t.__instanceof(e.getChildAt(l),a.common.display.SpriteContainer)&&(l=t.__cast(e.getChildAt(l),a.common.display.SpriteContainer),l.set_visible(!1))}}}if(null!=this._specialObjectContainers){b=0;for(d=this._specialObjectContainers.length;b<d;)for(e=b++;0<this._specialObjectContainers[e].get_numChildren();)this._specialObjectContainers[e].removeChildAt(0)}for(b=this._specialObjects.iterator();b.hasNext();)l=b.next(),0<l.get_numChildren()&&l.gotoAndStop("hidden");this._scrollDownBtn.owner._compMap.PulseComponent_7.killAll();this._scrollUpBtn.owner._compMap.PulseComponent_7.killAll()},init:function(b,d){this.clearDisplay();null!=this._scrollerObject&&this._scrollerObject.gotoAndStop(1);if(null!=b&&0<b.length)for(var e=0,c=b.length;e<c;){var o=e++,l=t.__cast(this._scrollerObject.getChildAt(o),a.common.display.MovieClip);l.getChildByName("texture_"+b[o]).set_visible(!0);l.getChildByName("texture_checkmark").set_visible(!0);l.getChildByName("texture_checkbox").set_visible(!0);this._activeHiddenObjects.set(b[o],l);this._hiddenObjectArray.push(l)}for(;0<a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound.length;)a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound.pop();if(null!=d&&0<d.length){l=-1;e=0;for(c=d.length;e<c;)if(o=e++,"seacat"==d[o]){l=o;break}-1<l&&(e=d.splice(l,1),d.push(e[0]));l=null;e=0;for(c=d.length;e<c;){var o=e++,f=d[o];!1==this._specialObjects.exists(f)&&this._specialObjects.set(f,a.common.utils.LibraryTools.createMovieClip("mc_"+f));l=this._specialObjects.get(f);l.gotoAndStop("hidden");l.getChildByName("texture_characterburst").set_visible(!1);l.set_pointerEnabled(!1);this._specialObjectContainers[o].addChild(l);a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound.push(new a.tbm_bbs.game.SpecialObjectData(f))}null!=l&&"mc_seacat"==l.symbol.get_name()?l.x.set__(35):l.x.set__(0)}this._scrollUpBtn.alpha.set__(0);this._scrollUpBtn.set_pointerEnabled(!1);this._scrollDownBtn.alpha.set__(1);this._scrollDownBtn.set_pointerEnabled(!0)},__class__:a.tbm_bbs.game.HiddenObjectsDisplay};a.tbm_bbs.game.SpecialObjectData=function(b,a){null==a&&(a=!1);this.found=!1;this.name="";this.name=b;this.found=a};g["com.cmm.tbm_bbs.game.SpecialObjectData"]=a.tbm_bbs.game.SpecialObjectData;a.tbm_bbs.game.SpecialObjectData.__name__=["com","cmm","tbm_bbs","game","SpecialObjectData"];a.tbm_bbs.game.SpecialObjectData.prototype={__class__:a.tbm_bbs.game.SpecialObjectData};a.tbm_bbs.game.HintButton=function(b){this._onHintCallback=null;this._disabledAlpha=0.3;this.hintsLeft=3;var d=this;this.btn=b;this._mc_hintCounter=this.btn.getChildByName("mc_hintcounter");this._mc_hintCounter.set_pointerEnabled(!1);this.btn.get_pointerClick().connect(function(b){d.onClick(b)});a.common.event.EDispatcher.addEventListener("onHintedItemFound",p(this,this.onHintedItemFound));this.init()};g["com.cmm.tbm_bbs.game.HintButton"]=a.tbm_bbs.game.HintButton;a.tbm_bbs.game.HintButton.__name__=["com","cmm","tbm_bbs","game","HintButton"];a.tbm_bbs.game.HintButton.prototype={onHintedItemFound:function(){0<this.hintsLeft&&(this.btn.alpha.set__(1),this.btn.set_pointerEnabled(!0))},onClick:function(){this.decreaseHintCounter();a.common.audio.SoundPlayerRemote.play("click1")},decreaseHintCounter:function(){0<this.hintsLeft&&(this.hintsLeft--,this.btn.alpha.set__(this._disabledAlpha),this.btn.set_pointerEnabled(!1),null!=this._onHintCallback&&this._onHintCallback());this._mc_hintCounter.getChildByName("texture_hint_1").set_visible(!1);this._mc_hintCounter.getChildByName("texture_hint_2").set_visible(!1);this._mc_hintCounter.getChildByName("texture_hint_3").set_visible(!1);switch(this.hintsLeft){case 3:this._mc_hintCounter.getChildByName("texture_hint_3").set_visible(!0);break;case 2:this._mc_hintCounter.getChildByName("texture_hint_2").set_visible(!0);break;case 1:this._mc_hintCounter.getChildByName("texture_hint_1").set_visible(!0);break;case 0:this.btn.alpha.set__(this._disabledAlpha),this.btn.set_pointerEnabled(!1)}},init:function(){this._mc_hintCounter.getChildByName("texture_hint_1").set_visible(!1);this._mc_hintCounter.getChildByName("texture_hint_2").set_visible(!1);this._mc_hintCounter.getChildByName("texture_hint_3").set_visible(!0);this.hintsLeft=3;this.btn.alpha.set__(1);this.btn.set_pointerEnabled(!0)},registerCallback:function(b){this._onHintCallback=b},__class__:a.tbm_bbs.game.HintButton};a.tbm_bbs.game.Level=function(b,d,e){this._bonusItemNum=1;this._curItemsFound=0;this.PULSE_AMOUNT=87.5;this.PULSE_SPEED=0.4;this.MAX_SPECIAL_ITEMS=4;this.MAX_ITEMS=10;this._scrollerActive=!1;this.scrollerEnabled=!0;this.totalHiddenObjects=this.totalSpecialObjects=this.hiddenObjectsLeft=this.specialObjectsLeft=0;var c=this;this.MAX_ITEMS=d;this.MAX_SPECIAL_ITEMS=e;this.mc=b;this.container=new a.common.display.SpriteContainer;this.container.addChild(this.mc);this._containerPos=new H(0,15);this._bounds=new T(0,0,603,405);this._scrollScreen=new U(16777215,this._bounds.width,this._bounds.height);this.mc.addChildAt(this._scrollScreen,0);k._platform.getPointer().move.connect(function(){c.onPointerMove()});k._platform.getPointer().up.connect(function(){c.onPointerUp()});this.mc.get_pointerDown().connect(function(){c.onPointerDown()});this._defaultPos=new H(0,0);k._platform.getStage().resize.connect(p(this,this.onResize));this.onResize();this.hiddenObjectArray=[];this.specialObjectArray=[];this.preHiddenObjectArray=[];this.preSpecialObjectArray=[];this._pulseCompArray=[];b=0;for(d=this.mc.get_numChildren();b<d;)if(e=this.mc.getChildAt(b++),t.__instanceof(e,a.common.display.SpriteContainer))if(0<=e.get_instanceName().indexOf("special_hitbox"))this.preSpecialObjectArray.push(e),e.alpha.set__(0);else if(0<=e.get_instanceName().indexOf("hitbox"))this.preHiddenObjectArray.push(e),e.alpha.set__(0);else{if(0<=e.get_instanceName().indexOf("object")){var o=new a.tbm_bbs.utils.PulseComponent;this._pulseCompArray.push(o);e.owner.add(o)}e.set_pointerEnabled(!1)}this._pointerDownSignalConnections=[];a.common.event.EDispatcher.addEventListener("onZoomIn",p(this,this.onZoomIn));a.common.event.EDispatcher.addEventListener("onZoomOut",p(this,this.onZoomOut))};g["com.cmm.tbm_bbs.game.Level"]=a.tbm_bbs.game.Level;a.tbm_bbs.game.Level.__name__=["com","cmm","tbm_bbs","game","Level"];a.tbm_bbs.game.Level.prototype={killParticleEffect:function(b){if(null!=this._particleArray)for(var a=0,e=this._particleArray;a<e.length;){var c=e[a];++a;if(c.target.get_instanceName()==b.get_instanceName()){c.stop();break}}},spawnParticleEffect:function(b,d){null==d&&(d=!1);var e=null;if(null==this._particleArray)this._particleArray=[],this._particleArray.push(new a.tbm_bbs.game.Particle),e=this._particleArray[this._particleArray.length-1];else{for(var c=0,o=this._particleArray;c<o.length;){var f=o[c];++c;if(!1==f.active){e=f;break}}null==e&&(this._particleArray.push(new a.tbm_bbs.game.Particle),e=this._particleArray[this._particleArray.length-1])}this.mc.addChild(e.mc);d?e.loop(b):e.play(b)},onResize:function(){var b=j.GLOBAL_SCALE;a.tbm_bbs.utils.BrowserDetect.iPhone4&&(b=a.common.app.Wrapper.IPHONE4_SCALE);this.container.x.set__(this._containerPos.x*b);this.container.y.set__(this._containerPos.y*b);this.mc.x.set__(this._defaultPos.x);this.mc.y.set__(this._defaultPos.y);this.mc.setScale(1);this.scrollerEnabled=a.tbm_bbs.TBM_BBS_Game.get_smallScreen();1<b&&(this.container.x.set__(this._containerPos.x),this.container.y.set__(this._containerPos.y))},getCappedY:function(b){var d=j.GLOBAL_SCALE;a.tbm_bbs.utils.BrowserDetect.iPhone4&&(d=a.common.app.Wrapper.IPHONE4_SCALE);var e=Math.abs(this._bounds.height-j.DEFAULT_HEIGHT*d),e=e+Math.abs(this._bounds.height-j.DEFAULT_HEIGHT)*d;b<-e&&(b=-e);0<b&&(b=0);return b},getCappedX:function(b){var d=j.GLOBAL_SCALE;a.tbm_bbs.utils.BrowserDetect.iPhone4&&(d=a.common.app.Wrapper.IPHONE4_SCALE);var e=Math.abs(this._bounds.width-j.DEFAULT_WIDTH*d),e=e+Math.abs(this._bounds.width-j.DEFAULT_WIDTH)*d;b<-e&&(b=-e);0<b&&(b=0);return b},onPointerDown:function(){},onPointerUp:function(){this._oldMousePos=null;this._scrollerActive=!1},onPointerMove:function(){if(k._platform.getPointer().isDown()&&this.scrollerEnabled&&a.tbm_bbs.TBM_BBS_Game.get_smallScreen()){null==this._oldMousePos&&(this._oldMousePos=new H(k._platform.getPointer().get_x(),k._platform.getPointer().get_y()));var b=new H(this._oldMousePos.x-k._platform.getPointer().get_x(),this._oldMousePos.y-k._platform.getPointer().get_y());this.mc.x.set__(this.getCappedX(this.mc.x._value-b.x));this.mc.y.set__(this.getCappedY(this.mc.y._value-b.y));this._scrollerActive=!0}null==this._oldMousePos?this._oldMousePos=new H(k._platform.getPointer().get_x(),k._platform.getPointer().get_y()):(this._oldMousePos.x=k._platform.getPointer().get_x(),this._oldMousePos.y=k._platform.getPointer().get_y())},scrollToPos:function(b,a){this.mc.x.animateTo(this.getCappedX(b),0.5);this.mc.y.animateTo(this.getCappedY(a),0.5)},onHintButtonClick:function(){for(var b=[],d=0,e=this.hiddenObjectArray.length;d<e;){var c=d++;!0==(0!=(this.mc.getChildByName("hitbox_"+this.hiddenObjectArray[c])._flags&2))&&b.push(this.hiddenObjectArray[c])}for(var b=a.common.utils.ArrayUtil.shuffle(b),o=!1,f=null,d=0,e=b.length;d<e;)if(c=d++,f=this.mc.getChildByName("object_"+b[c]),!1==f.owner._compMap.PulseComponent_7.anyActive()){f.owner._compMap.PulseComponent_7.pulse(f.alpha,1,0,1,this.PULSE_SPEED,this.PULSE_SPEED*2*this.PULSE_AMOUNT);o=!0;this.spawnParticleEffect(f,!0);break}!1==o&&0<b.length&&(f=this.mc.getChildByName("object_"+b[0]),f.owner._compMap.PulseComponent_7.pulse(f.alpha,1,0,1,this.PULSE_SPEED,this.PULSE_SPEED*2*this.PULSE_AMOUNT),this.spawnParticleEffect(f,!0));if(a.tbm_bbs.TBM_BBS_Game.get_smallScreen()){b=j.GLOBAL_SCALE;a.tbm_bbs.utils.BrowserDetect.iPhone4&&(b=a.common.app.Wrapper.IPHONE4_SCALE);Math.abs(this._bounds.width-j.DEFAULT_WIDTH*b);Math.abs(this._bounds.width-j.DEFAULT_WIDTH);Math.abs(this._bounds.height-j.DEFAULT_HEIGHT*b);Math.abs(this._bounds.height-j.DEFAULT_HEIGHT);d=o=0;for(e=this.mc.symbol.layers.length;d<e;)if(c=d++,this.mc.symbol.layers[c].name==f.get_instanceName()){o=c;break}this.scrollToPos(-(this.mc.symbol.layers[o].keyframes[0].x-this.mc.symbol.layers[o].keyframes[0].pivotX)+this._bounds.width/2*b,-(this.mc.symbol.layers[o].keyframes[0].y-this.mc.symbol.layers[o].keyframes[0].pivotY)+this._bounds.height/2*b)}},onZoomOut:function(){var b=j.GLOBAL_SCALE;a.tbm_bbs.utils.BrowserDetect.iPhone4&&(b=a.common.app.Wrapper.IPHONE4_SCALE);this.container.x.set__(0);this.container.y.set__(0);this.mc.x.set__(0);this.mc.y.set__(0);this.mc.scaleX.set__(1/(this._bounds.width/j.DEFAULT_WIDTH)*b);this.mc.scaleY.set__(1/(this._bounds.height/j.DEFAULT_HEIGHT)*b);this.scrollerEnabled=!1},onZoomIn:function(){this.onResize()},onSpecialHitboxPointerUp:function(b){if(!0!=this._scrollerActive){var d=t.__cast(b.hit,a.common.display.SpriteContainer).get_instanceName(),e=d.indexOf("_"),d=u.substr(d,d.indexOf("_",e+1)+1,null),e=this.mc.getChildByName("object_"+d);e.alpha.animateTo(0,1);this.spawnParticleEffect(e);t.__cast(b.hit,a.common.display.SpriteContainer).set_pointerEnabled(!1);a.common.event.EDispatcher.dispatchEvent(new a.common.event.Event("onSpecialObjectFound",d))}},onHitboxPointerUp:function(b){if(!0!=this._scrollerActive){var d=t.__cast(b.hit,a.common.display.SpriteContainer).get_instanceName(),d=u.substr(d,d.indexOf("_")+1,null),e=this.mc.getChildByName("object_"+d);e.owner._compMap.PulseComponent_7.anyActive()&&a.common.event.EDispatcher.dispatchEvent(new a.tbm_bbs.event.TBM_BBS_Event("onHintedItemFound"));e.owner._compMap.PulseComponent_7.killAll();e.alpha.animateTo(0,1);this.killParticleEffect(e);a.common.event.EDispatcher.dispatchEvent(new a.common.event.Event("onHiddenObjectFound",d));t.__cast(b.hit,a.common.display.SpriteContainer).set_pointerEnabled(!1);this.spawnParticleEffect(e);this.hiddenObjectsLeft--;0==this.hiddenObjectsLeft&&a.common.event.EDispatcher.dispatchEvent(new a.common.event.Event("onLevelComplete"));this._curItemsFound==this._bonusItemNum&&a.common.event.EDispatcher.dispatchEvent(new a.tbm_bbs.event.TBM_BBS_Event("onBonusItemFound"));this._curItemsFound++}},disable:function(){this.scrollerEnabled=!1},enable:function(){this.scrollerEnabled=!0},init:function(){for(var b=this,d;0<this._pointerDownSignalConnections.length;)this._pointerDownSignalConnections.pop().dispose();for(;0<this.hiddenObjectArray.length;){var e=this.hiddenObjectArray.pop();d=this.mc.getChildByName("hitbox_"+e);d.set_pointerEnabled(!0);d=this.mc.getChildByName("object_"+e);d.alpha.set__(1)}for(;0<this.specialObjectArray.length;)e=this.specialObjectArray.pop(),d=this.mc.getChildByName("special_hitbox_"+
e),d.set_pointerEnabled(!0),d=this.mc.getChildByName("object_"+e),d.alpha.set__(1);this.preHiddenObjectArray=a.common.utils.ArrayUtil.shuffle(this.preHiddenObjectArray);d=0;for(e=this.MAX_ITEMS;d<e;){var c=d++,c=this.preHiddenObjectArray[c];this.hiddenObjectArray.push(u.substr(c.get_instanceName(),c.get_instanceName().indexOf("_")+1,null));this._pointerDownSignalConnections.push(c.get_pointerUp().connect(function(a){b.onHitboxPointerUp(a)}))}this.preSpecialObjectArray=a.common.utils.ArrayUtil.shuffle(this.preSpecialObjectArray);d=0;for(e=this.MAX_SPECIAL_ITEMS;d<e;){var c=d++,c=this.preSpecialObjectArray[c],f=c.get_instanceName().indexOf("_");this.specialObjectArray.push(u.substr(c.get_instanceName(),c.get_instanceName().indexOf("_",f+1)+1,null));this._pointerDownSignalConnections.push(c.get_pointerUp().connect(function(a){b.onSpecialHitboxPointerUp(a)}))}this.hiddenObjectsLeft=this.totalHiddenObjects=this.hiddenObjectArray.length;this.specialObjectsLeft=this.totalSpecialObjects=this.specialObjectArray.length;this.hiddenObjectsLeft=this.totalHiddenObjects;this.specialObjectsLeft=this.totalSpecialObjects;this.onResize();d=0;for(e=this._pulseCompArray.length;d<e;)c=d++,this._pulseCompArray[c].killAll();if(null!=this._particleArray){e=0;for(d=this._particleArray;e<d.length;)c=d[e],++e,c.stop()}this._curItemsFound=0;this._bonusItemNum=a.common.utils.MathHelper.randomInRange(1,this.hiddenObjectArray.length-2)|0;2>=this.hiddenObjectArray.length&&(this._bonusItemNum=-1);null},__class__:a.tbm_bbs.game.Level};a.tbm_bbs.game.Particle=function(){this.active=!1;var b=this;this.mc=a.common.utils.LibraryTools.createMovieClip("mc_ingameparticleeffect");this.sConn=this.mc.get_onComplete().connect(function(){b.onComplete()});this.mc.set_visible(!1);this.bounds=new T(0,0,58,55);this.mc.anchorX.set__(0.5*this.bounds.width);this.mc.anchorY.set__(0.5*this.bounds.height);this.mc.set_pointerEnabled(!1)};g["com.cmm.tbm_bbs.game.Particle"]=a.tbm_bbs.game.Particle;a.tbm_bbs.game.Particle.__name__=["com","cmm","tbm_bbs","game","Particle"];a.tbm_bbs.game.Particle.prototype={centerOnTarget:function(){if(null!=this.target){t.__cast(this.target.get_parent(),a.common.display.MovieClip).getChildLayer(this.target.get_instanceName());var b=v.getBounds(this.target.owner);this.mc.x.set__(b.x+0.5*b.width);this.mc.y.set__(b.y+0.5*b.height);var d=b.height/this.bounds.height;this.mc.scaleX.set__(Math.max(1,b.width/this.bounds.width));this.mc.scaleY.set__(Math.max(1,d))}},onComplete:function(){this.active=!1;this.mc.set_visible(!1)},stop:function(){this.active=!1;this.mc.gotoAndStop(1);this.mc.set_visible(!1)},loop:function(b){this.target=b;this.centerOnTarget();this.active=!0;this.mc.set_visible(!0);this.mc.gotoAndPlay(1)},play:function(b){this.target=b;this.centerOnTarget();this.active=!0;this.mc.set_visible(!0);this.mc.gotoAndPlay(1,null,0,!0)},__class__:a.tbm_bbs.game.Particle};a.tbm_bbs.game.MiniGame=function(b){this.MAX_OBJ_SFX_IDS=3;this._curTime=0;this._spawnTime=2;this._bonusCollected=0;this._curState="exit";this.active=this.enabled=!1;var d=this;this.mc=b;this.mc.gotoAndStop(1);this.mc.get_onComplete().connect(function(){d.onAnimComplete()});this.mc_timer=new a.tbm_bbs.game.MovieClipTimer(b.getChildByName("mc_timer"),16.5);this.mc_timer.pause();this.mc_timer.get_onComplete().connect(function(){d.onTimerComplete()});this.txt_bonusScore=this.mc.getChildByName("txt_bonusScore");this._bonusCollected=0;this.updateBonusScore();this._updateComponent=new a.tbm_bbs.utils.UpdateComponent(p(this,this.onUpdate));this.mc.owner.add(this._updateComponent);this._mObjArray=[];this._mObjContainer=new a.common.display.SpriteContainer;this.mc.addChild(this._mObjContainer);a.common.event.EDispatcher.addEventListener("com.cmm.common.events.pause",p(this,this.onPause));a.common.event.EDispatcher.addEventListener("com.cmm.common.events.resume",p(this,this.onResume));k._platform.getPointer().down.connect(function(b){d.onGlobalPointerDown(b)});k._platform.getPointer().up.connect(function(b){d.onGlobalPointerUp(b)});this._bonusRoundArtIds=["beachball","musicshaker","frisbee","lantern","beaker"]};g["com.cmm.tbm_bbs.game.MiniGame"]=a.tbm_bbs.game.MiniGame;a.tbm_bbs.game.MiniGame.__name__=["com","cmm","tbm_bbs","game","MiniGame"];a.tbm_bbs.game.MiniGame.prototype={getNextObjSFXId:function(){null==this._objSFXIdArray&&(this._objSFXIdArray=[]);if(1>this._objSFXIdArray.length){for(var b=0,d=this.MAX_OBJ_SFX_IDS;b<d;)this._objSFXIdArray.push(b++ +1);this._objSFXIdArray=a.common.utils.ArrayUtil.shuffle(this._objSFXIdArray)}return this._objSFXIdArray.pop()},get_onGameComplete:function(){null==this._onGameComplete&&(this._onGameComplete=new N);return this._onGameComplete},onResume:function(){this.enabled&&(this.active=!0)},onPause:function(){this.enabled&&(this.active=!1)},spawnMiniGameObject:function(){var b=new a.tbm_bbs.game.MiniGameObject(this._bonusRoundArtIds[a.common.app.games.GameGlobals.currentLevel._value-1],p(this,this.onCollected));this._mObjContainer.addChild(b.sc);b.spawn();this._mObjArray.push(b)},onUpdate:function(b){this.active&&(this._curTime+=b,this._curTime>=this._spawnTime&&(this.spawnMiniGameObject(),this._curTime=0,this._spawnTime=1))},updateBonusScore:function(){this.txt_bonusScore.set_text(n.string(200)+" x "+n.string(this._bonusCollected))},onCollected:function(){this._bonusCollected++;this.updateBonusScore();var b=a.common.app.games.GameGlobals.score;b.set__(b._value+200);a.common.audio.SoundPlayerRemote.play("bonus"+n.string(this.getNextObjSFXId()))},onTimerComplete:function(){if(this.enabled){this._curState="exit";this.mc.getChildByName("texture_title_wave_bonus_overlay").set_visible(!1);this.mc.gotoAndPlay("exit",null,0);this.active=!1;for(var b=0,a=this._mObjArray.length;b<a;){var e=b++;this._mObjArray[e].active&&this._mObjArray[e].fall()}this.enabled=!1}},onAnimComplete:function(){switch(this._curState){case "enter":this.mc_timer.reset();this._curTime=0;this.active=!0;this._spawnTime=0;break;case "exit":null!=this._onGameComplete&&this._onGameComplete.emit0(),this._bonusCollected=0,this.updateBonusScore()}},onGlobalPointerUp:function(){a.tbm_bbs.game.MiniGame.GlobalPointerDown=!1},onGlobalPointerDown:function(){a.tbm_bbs.game.MiniGame.GlobalPointerDown=!0},cleanUp:function(){this._bonusCollected=0;this.updateBonusScore();this.mc_timer.reset();for(this.mc_timer.pause();0<this._mObjArray.length;)this._mObjArray.pop().sc.dispose();this.mc.gotoAndStop(1);this.active=!1},start:function(){this._bonusCollected=0;this.updateBonusScore();this.mc_timer.reset();for(this.mc_timer.pause();0<this._mObjArray.length;){var b=this._mObjArray.pop();b.active&&b.sc.dispose()}this._curState="enter";this.mc.getChildByName("texture_title_wave_bonus_overlay").set_visible(!0);this.mc.gotoAndPlay("enter","enter_end",0);this.enabled=!0},__class__:a.tbm_bbs.game.MiniGame};a.tbm_bbs.game.MiniGameObject=function(b,d){this._hWidth=this._hHeight=0;this._maxWallHits=3;this._wallHits=0;this._direction=-1;this._disposeOnExitScreen=this._ignoreGravity=!1;this._angle=0;this.GRAVITY=400;this.name="";this.active=!1;this.name=b;var e=a.common.utils.MathHelper.randomInRange(0,3)|0,c="texture_minigame_"+this.name+"_"+n.string(e);this.sc=a.common.utils.LibraryTools.createLibraryItem(c);this.sc.centerAnchor();this._disposer=new oa;this.sc.owner.add(this._disposer);this._disposer.connect1(this.sc.get_pointerDown(),p(this,this.onPointerDown));k._platform.getTouch().get_supported()&&(this._disposer.connect1(this.sc.get_pointerUp(),p(this,this.onPointerDown)),this._disposer.connect1(this.sc.get_pointerMove(),p(this,this.onPointerMove)));this._disposer.connect0(this.get_onCollected(),d);this._updateComponent=new a.tbm_bbs.utils.UpdateComponent(p(this,this.onUpdate));this.sc.owner.add(this._updateComponent);this.active=!1;a.common.event.EDispatcher.addEventListener("com.cmm.common.events.pause",p(this,this.onPause));a.common.event.EDispatcher.addEventListener("com.cmm.common.events.resume",p(this,this.onResume));"beaker"==this.name&&(this.name=["beachball","musicshaker","frisbee","lantern"][e]);this._particleAnim=a.common.utils.LibraryTools.createMovieClip("mc_minigameparticleeffect");this._particleAnim.gotoAndStop(1);this._particleAnim.set_visible(!1);this._particleAnim.centerAnchor();this.sc.addChild(this._particleAnim)};g["com.cmm.tbm_bbs.game.MiniGameObject"]=a.tbm_bbs.game.MiniGameObject;a.tbm_bbs.game.MiniGameObject.__name__=["com","cmm","tbm_bbs","game","MiniGameObject"];a.tbm_bbs.game.MiniGameObject.prototype={updatePhysicsObject:function(b){this._velocity.x+=this._acceleration.x*b;this._velocity.y+=this._acceleration.y*b;var a=this.sc.x;a.set__(a._value+this._velocity.x*b);!1==this._ignoreGravity&&(this._velocity.y+=this.GRAVITY*b);a=this.sc.y;a.set__(a._value+this._velocity.y*b);a=this.sc.rotation;a.set__(a._value+
this._angle);if(this._disposeOnExitScreen&&(this.sc.x._value>=j.DEFAULT_WIDTH||0>=this.sc.x._value||0>=this.sc.y._value||this.sc.y._value>=j.DEFAULT_HEIGHT))this.active=!1,this.sc.dispose()},updateBouncyObject:function(b){var d=this.sc.x;d.set__(d._value+this._velocity.x*b);!1==this._ignoreGravity&&(this._velocity.y+=this.GRAVITY*b+this._acceleration.y*b);d=this.sc.y;d.set__(d._value+this._velocity.y*b);if(this._wallHits==this._maxWallHits&&this._disposeOnExitScreen&&(this.sc.x._value>=j.DEFAULT_WIDTH||0>=this.sc.x._value||0>=this.sc.y._value||this.sc.y._value>=j.DEFAULT_HEIGHT))this.active=!1,this.sc.dispose();this._wallHits<this._maxWallHits&&this.sc.y._value+this._hHeight>=j.DEFAULT_HEIGHT&&(this._acceleration.y+=this.GRAVITY*a.common.utils.MathHelper.randomInRange(2,4),this._velocity.y*=-1,0.5<Math.random()&&(this._velocity.x*=-1,this._angle*=-1),this._wallHits=this._maxWallHits);d=this.sc.rotation;d.set__(d._value+this._angle)},updatePongObject:function(b){var d=this.sc.x;d.set__(d._value+
this._velocity.x*b);d=this.sc.y;d.set__(d._value+this._velocity.y*b);if(this._wallHits==this._maxWallHits&&this._disposeOnExitScreen&&(this.sc.x._value>=j.DEFAULT_WIDTH||0>=this.sc.x._value||0>=this.sc.y._value||this.sc.y._value>=j.DEFAULT_HEIGHT))this.active=!1,this.sc.dispose();if(this._wallHits<this._maxWallHits){var d=b=!1,e=0>this._velocity.x?-1:1,c=0>this._velocity.y?-1:1;if(this.sc.x._value+this._hWidth>=j.DEFAULT_WIDTH||0>=this.sc.x._value-this._hWidth)b=!0,e=0>this._velocity.x?1:-1;if(0>=this.sc.y._value-this._hHeight||this.sc.y._value+this._hHeight>=j.DEFAULT_HEIGHT)d=!0,c=0>this._velocity.y?1:-1;if(b||d)this._wallHits++,b&&(this._velocity.x=a.common.utils.MathHelper.randomInRange(200,400)*e),d&&(this._velocity.y=a.common.utils.MathHelper.randomInRange(200,400)*c),this._angle=e*a.common.utils.MathHelper.randomInRange(1,6)}d=this.sc.rotation;d.set__(d._value+this._angle)},spawnLantern:function(){this._disposeOnExitScreen=!0;this.sc.setScale(a.common.utils.MathHelper.randomInRange(2,3)/4);this._hWidth=this.sc.getNaturalWidth()*this.sc.scaleX._value/2;this._hHeight=this.sc.getNaturalHeight()*this.sc.scaleY._value/2;this._direction=0.5>Math.random()?-1:1;0>this._direction?this.sc.x.set__(a.common.utils.MathHelper.randomInRange(j.DEFAULT_WIDTH/2,j.DEFAULT_WIDTH)):this.sc.x.set__(a.common.utils.MathHelper.randomInRange(0,j.DEFAULT_WIDTH/2));this.sc.y.set__(0);var b=a.common.utils.MathHelper.randomInRange(100,300),d=a.common.utils.MathHelper.randomInRange(600,1E3);this._velocity=new H(b*this._direction,d);this._acceleration=new H(0,0);this._angle=this._direction*a.common.utils.MathHelper.randomInRange(2,7)},spawnFrisbee:function(){this._ignoreGravity=!0;this.sc.setScale(a.common.utils.MathHelper.randomInRange(2,3)/4);this._direction=0.5>Math.random()?-1:1;0>this._direction?this.sc.x.set__(j.DEFAULT_WIDTH+this.sc.getNaturalWidth()*this.sc.scaleX._value/2):this.sc.x.set__(-(this.sc.getNaturalWidth()*this.sc.scaleX._value)/2);var b=a.common.utils.MathHelper.randomInRange(250,1E3),d=b/2;0.5>Math.random()&&(b*=-1);this._acceleration=new H(d*this._direction,b);0>b?this.sc.y.set__(a.common.utils.MathHelper.randomInRange(j.DEFAULT_HEIGHT/2,j.DEFAULT_HEIGHT)):this.sc.y.set__(a.common.utils.MathHelper.randomInRange(0,j.DEFAULT_HEIGHT/2));b=a.common.utils.MathHelper.randomInRange(300,500);this._velocity=new H(b*this._direction,-0.0);this._angle=0},spawnMusicShaker:function(){this.sc.setScale(a.common.utils.MathHelper.randomInRange(2,3)/4);this._hWidth=this.sc.getNaturalWidth()*this.sc.scaleX._value/2;this._hHeight=this.sc.getNaturalHeight()*this.sc.scaleY._value/2;this._direction=0.5>Math.random()?-1:1;0>this._direction?this.sc.x.set__(j.DEFAULT_WIDTH-this.sc.getNaturalWidth()*this.sc.scaleX._value/2):this.sc.x.set__(this.sc.getNaturalWidth()*this.sc.scaleX._value/2);this.sc.y.set__(j.DEFAULT_HEIGHT/2);var b=a.common.utils.MathHelper.randomInRange(200,400),d=a.common.utils.MathHelper.randomInRange(200,400);0.5>Math.random()&&(d*=-1);this._velocity=new H(b*this._direction,d);this._acceleration=new H(0,0);this._angle=this._direction*a.common.utils.MathHelper.randomInRange(1,6)},spawnBeachBall:function(){this._ignoreGravity=!1;this.sc.setScale(a.common.utils.MathHelper.randomInRange(3,6)/4);this._direction=0.5>Math.random()?-1:1;0>this._direction?this.sc.x.set__(j.DEFAULT_WIDTH+this.sc.getNaturalWidth()*this.sc.scaleX._value/2):this.sc.x.set__(-(this.sc.getNaturalWidth()*this.sc.scaleX._value)/2);this.sc.y.set__(a.common.utils.MathHelper.randomInRange(j.DEFAULT_HEIGHT/2,j.DEFAULT_HEIGHT));var b=a.common.utils.MathHelper.randomInRange(200,400),d=a.common.utils.MathHelper.randomInRange(300,500);this._velocity=new H(b*this._direction,-d);this._acceleration=new H(0,0);this._angle=this._direction*a.common.utils.MathHelper.randomInRange(1,6)},get_onCollected:function(){null==this._onCollected&&(this._onCollected=new N);return this._onCollected},onResume:function(){this.active=!0},onPause:function(){this.active=!1},onUpdate:function(b){if(this.active)switch(this.name){case "beachball":this.updatePhysicsObject(b);break;case "musicshaker":this.updatePongObject(b);break;case "frisbee":this.updatePhysicsObject(b);break;case "lantern":this.updateBouncyObject(b);break;case "beaker":this.updatePhysicsObject(b)}},onCollectAnimationComplete:function(){this._particleAnim.set_visible(!1);this._particleAnim.dispose();this.sc.dispose()},onAlphaChange:function(b){if(0>=b)this.onCollectAnimationComplete()},onPointerDown:function(){this.active&&null!=this._onCollected&&this._onCollected.emit0();var b=this.sc.scaleX._value;this.sc.alpha.watch(p(this,this.onAlphaChange));this.sc.alpha.animateTo(0,0.6);this.sc.scaleX.animateTo(1.5*b,0.6);this.sc.scaleY.animateTo(1.5*b,0.6);this.active=!1;this._particleAnim.set_visible(!0);this._particleAnim.gotoAndPlay(1,null,0)},onPointerMove:function(){if(a.tbm_bbs.game.MiniGame.GlobalPointerDown&&this.active)this.onPointerDown(null)},fall:function(){this.sc.set_pointerEnabled(!1);this._disposeOnExitScreen=!0;this._velocity.y=400;this._angle=0;this._ignoreGravity=!1;this._acceleration.x=0;this._acceleration.y=0;this._wallHits=this._maxWallHits},spawn:function(){switch(this.name){case "beachball":this.spawnBeachBall();break;case "musicshaker":this.spawnMusicShaker();break;case "frisbee":this.spawnFrisbee();break;case "lantern":this.spawnLantern()}this.active=!0},__class__:a.tbm_bbs.game.MiniGameObject};a.tbm_bbs.game.MovieClipTimer=function(b,d){this._frameStep=0;this.enabled=!0;this.curTime=0;this.active=!0;this.totalTime=0;this.mc=b;this.totalTime=d;this._frameStep=this.mc.get_totalFrames()/this.totalTime;this.mc.owner.add(new a.tbm_bbs.utils.UpdateComponent(p(this,this.onUpdate)));a.common.event.EDispatcher.addEventListener("com.cmm.common.events.pause",p(this,this.onPause));a.common.event.EDispatcher.addEventListener("com.cmm.common.events.resume",p(this,this.onResume));this._timerEvents=[]};g["com.cmm.tbm_bbs.game.MovieClipTimer"]=a.tbm_bbs.game.MovieClipTimer;a.tbm_bbs.game.MovieClipTimer.__name__=["com","cmm","tbm_bbs","game","MovieClipTimer"];a.tbm_bbs.game.MovieClipTimer.prototype={get_curTime:function(){return this._curTime},onResume:function(){this.resume()},onPause:function(){this.pause()},get_onComplete:function(){null==this._onComplete&&(this._onComplete=new N);return this._onComplete},onUpdate:function(b){if(this.active){this._curTime+=b;for(var b=0,a=this._timerEvents.length;b<a;){var e=b++;this._curTime>=this._timerEvents[e].time&&this._timerEvents[e].active&&(this._timerEvents[e].cbFunc(),this._timerEvents[e].active=!1)}this._curTime>this.totalTime?(this.mc.gotoAndStop(this.mc.get_totalFrames()),this.active=!1,null!=this._onComplete&&this._onComplete.emit0()):(b=Math.floor(this._curTime*this._frameStep)+1,b>this.mc.get_totalFrames()&&(b=this.mc.get_totalFrames()),this.mc.gotoAndStop(b))}},resetTimerEvents:function(){for(var b=0,a=this._timerEvents.length;b<a;)this._timerEvents[b++].active=!0},addTimerEvent:function(b){this._timerEvents.push(b)},resume:function(){this.enabled&&(this.active=!0)},pause:function(){this.enabled&&(this.active=!1)},reset:function(){this._curTime=0;this.mc.gotoAndStop(1);this.active=!0;this.resetTimerEvents()},__class__:a.tbm_bbs.game.MovieClipTimer};a.tbm_bbs.game.TimerEvent=function(b,a){this.active=!0;this.cbFunc=null;this.time=0;this.time=b;this.cbFunc=a};g["com.cmm.tbm_bbs.game.TimerEvent"]=a.tbm_bbs.game.TimerEvent;a.tbm_bbs.game.TimerEvent.__name__=["com","cmm","tbm_bbs","game","TimerEvent"];a.tbm_bbs.game.TimerEvent.prototype={__class__:a.tbm_bbs.game.TimerEvent};a.tbm_bbs.game.StartGameTimer=function(b){this.enabled=!0;var d=this;this.mc=b;this.mc.set_pointerEnabled(!1);this.mc.gotoAndStop(1);this.mc.get_onComplete().connect(function(){d.onComplete()});a.common.event.EDispatcher.addEventListener("com.cmm.common.events.pause",p(this,this.onPause));a.common.event.EDispatcher.addEventListener("com.cmm.common.events.resume",p(this,this.onResume))};g["com.cmm.tbm_bbs.game.StartGameTimer"]=a.tbm_bbs.game.StartGameTimer;a.tbm_bbs.game.StartGameTimer.__name__=["com","cmm","tbm_bbs","game","StartGameTimer"];a.tbm_bbs.game.StartGameTimer.prototype={onComplete:function(){this.enabled=!1;this.mc.set_visible(!1)},onResume:function(){this.resume()},onPause:function(){this.pause()},resume:function(){this.enabled&&this.mc.play()},pause:function(){this.enabled&&this.mc.stop()},start:function(){this.enabled=!0;this.mc.gotoAndPlay(1,null,0,!0)},__class__:a.tbm_bbs.game.StartGameTimer};a.tbm_bbs.game.UserInterface=function(b){var d=this;this.mc=b;b.getChildByName("texture_interfacebase").set_pointerEnabled(!1);b.getChildByName("mc_sparkle").set_pointerEnabled(!1);b.getChildByName("texture_interfacebacking").set_pointerEnabled(!1);b.getChildByName("texture_interface_topright").set_pointerEnabled(!1);b.getChildByName("texture_interface_bottomright").set_pointerEnabled(!1);this.btn_hint=new a.tbm_bbs.game.HintButton(b.getChildByName("btn_hint"));this.mc_timer=new a.tbm_bbs.game.MovieClipTimer(b.getChildByName("mc_timer"),a.common.app.games.GameGlobals.maxTime._value);this.mc_helpMenu=new a.tbm_bbs.game.HelpMenu(null,b.getChildByName("btn_help"));this.mc_zoomMenu=new a.tbm_bbs.game.ZoomMenu(b.getChildByName("mc_zoom"));this.mc_hiddenObjectsDisplay=new a.tbm_bbs.game.HiddenObjectsDisplay(b.getChildByName("mc_objects"),b.getChildByName("btn_down_arrow"),b.getChildByName("btn_up_arrow"),[b.getChildByName("mc_character_0"),b.getChildByName("mc_character_2"),b.getChildByName("mc_character_3"),b.getChildByName("mc_character_1")]);this.mc_go=new a.tbm_bbs.game.StartGameTimer(b.getChildByName("mc_go"));this.mc_hurryup=b.getChildByName("mc_hurryup");this.mc_hurryup.gotoAndStop(1);this.mc_hurryup.set_visible(!1);this.mc_hurryup.set_pointerEnabled(!1);a.common.event.EDispatcher.addEventListener("onZoomOut",p(this,this.onZoomOut));a.common.event.EDispatcher.addEventListener("onZoomIn",p(this,this.onZoomIn));k._platform.getStage().resize.connect(function(){d.onResize()});this._disableVeil=new U(0,j.DEFAULT_WIDTH,j.DEFAULT_HEIGHT);this._disableVeil.alpha.set__(0);var e=b.getChildIndex(b.getChildByName("btn_help"));b.addChildAt(this._disableVeil,e);this.enable()};g["com.cmm.tbm_bbs.game.UserInterface"]=a.tbm_bbs.game.UserInterface;a.tbm_bbs.game.UserInterface.__name__=["com","cmm","tbm_bbs","game","UserInterface"];a.tbm_bbs.game.UserInterface.prototype={onResize:function(){this.onZoomIn(null)},onZoomIn:function(){for(var b=0,a=this.mc.get_numChildren();b<a;)this.mc.getChildAt(b++).set_visible(!0);this.enable()},onZoomOut:function(){for(var b=0,a=this.mc.get_numChildren();b<a;)this.mc.getChildAt(b++).set_visible(!1);this.mc.getChildByName("mc_zoom").set_visible(!0);this.enable()},disable:function(){this._disableVeil.set_visible(!0)},enable:function(){this._disableVeil.set_visible(!1)},init:function(){this.onZoomIn(null);this.enable()},__class__:a.tbm_bbs.game.UserInterface};a.tbm_bbs.game.ZoomMenu=function(b){var a=this;this.mc=b;this.btn_zoomIn=this.mc.getChildByName("btn_zoomin");this.btn_zoomIn.get_pointerClick().connect(function(b){a.onZoomInClick(b)});this.btn_zoomOut=this.mc.getChildByName("btn_zoomout");this.btn_zoomOut.get_pointerClick().connect(function(b){a.onZoomOutClick(b)});this._zoomOutScreen=new U(16777215,j.DEFAULT_WIDTH,j.DEFAULT_HEIGHT);this.mc.addChildAt(this._zoomOutScreen,0);this._zoomOutScreen.alpha.set__(0);this._zoomOutScreen.set_pointerEnabled(!1);this._zoomOutScreen.get_pointerUp().connect(function(b){a.onZoomInClick(b)});k._platform.getStage().resize.connect(p(this,this.onResize));this.onResize()};g["com.cmm.tbm_bbs.game.ZoomMenu"]=a.tbm_bbs.game.ZoomMenu;a.tbm_bbs.game.ZoomMenu.__name__=["com","cmm","tbm_bbs","game","ZoomMenu"];a.tbm_bbs.game.ZoomMenu.prototype={onResize:function(){this.init()},onZoomInClick:function(){this.btn_zoomOut.set_visible(!0);this.btn_zoomIn.set_visible(!1);this._zoomOutScreen.set_pointerEnabled(!1);a.common.event.EDispatcher.dispatchEvent(new a.tbm_bbs.event.TBM_BBS_Event("onZoomIn"))},onZoomOutClick:function(){this.btn_zoomOut.set_visible(!1);this.btn_zoomIn.set_visible(!0);this._zoomOutScreen.set_pointerEnabled(!0);a.common.event.EDispatcher.dispatchEvent(new a.tbm_bbs.event.TBM_BBS_Event("onZoomOut"))},init:function(){a.tbm_bbs.TBM_BBS_Game.get_smallScreen()?(this.btn_zoomOut.set_visible(!0),this.btn_zoomIn.set_visible(!1),this._zoomOutScreen.set_pointerEnabled(!1)):(this.btn_zoomOut.set_visible(!1),this.btn_zoomIn.set_visible(!1))},__class__:a.tbm_bbs.game.ZoomMenu};a.tbm_bbs.utils={};a.tbm_bbs.utils.BrowserDetect=function(){};g["com.cmm.tbm_bbs.utils.BrowserDetect"]=a.tbm_bbs.utils.BrowserDetect;a.tbm_bbs.utils.BrowserDetect.__name__=["com","cmm","tbm_bbs","utils","BrowserDetect"];a.tbm_bbs.utils.BrowserDetect.init=function(){var b=m.window.navigator.userAgent;a.tbm_bbs.utils.BrowserDetect.isMobile=-1<b.indexOf("Mobi");var d=b.indexOf("Firefox"),e=b.indexOf("Chrome"),c=b.indexOf("Safari"),f=b.indexOf("MSIE"),l=b.indexOf("OPR"),g=b.indexOf("Chromium"),i=b.indexOf("Seamonkey");-1<d?0>i&&(a.tbm_bbs.utils.BrowserDetect.browserType="Firefox",a.tbm_bbs.utils.BrowserDetect.browserVersion=a.tbm_bbs.utils.BrowserDetect.getBrowserVersion(d)):-1<e?0>g&&0>l&&(a.tbm_bbs.utils.BrowserDetect.browserType="Chrome",a.tbm_bbs.utils.BrowserDetect.browserVersion=a.tbm_bbs.utils.BrowserDetect.getBrowserVersion(e)):-1<c?0>g&&0>e&&(a.tbm_bbs.utils.BrowserDetect.browserType="Safari",d=b.indexOf("Version"),a.tbm_bbs.utils.BrowserDetect.browserVersion=a.tbm_bbs.utils.BrowserDetect.getBrowserVersion(d)):-1<f&&(a.tbm_bbs.utils.BrowserDetect.browserType="MSIE",a.tbm_bbs.utils.BrowserDetect.browserVersion=a.tbm_bbs.utils.BrowserDetect.getBrowserVersion(f," "));-1<b.indexOf("Windows")?a.tbm_bbs.utils.BrowserDetect.platformType="Windows":-1<b.indexOf("iPad")||-1<b.indexOf("iPhone")||-1<b.indexOf("iPod")?(a.tbm_bbs.utils.BrowserDetect.platformType="iOS",a.tbm_bbs.utils.BrowserDetect.platformVersion=n.parseFloat(Y.replace(u.substr(b,b.indexOf("OS ")+3,3),"_","."))):-1<b.indexOf("Mac")?a.tbm_bbs.utils.BrowserDetect.platformType="Mac":-1<b.indexOf("Android")?(a.tbm_bbs.utils.BrowserDetect.platformType="Android",a.tbm_bbs.utils.BrowserDetect.platformVersion=n.parseFloat(u.substr(b,b.indexOf("Android")+8,3))):-1<b.indexOf("Linux")&&(a.tbm_bbs.utils.BrowserDetect.platformType="Linux");if(-1<b.indexOf("iPhone")||-1<b.indexOf("iPod"))k._platform.getStage().orientation._value==M.Landscape?960==k._platform.getStage().get_width()?(a.tbm_bbs.utils.BrowserDetect.iPhone4=!0,a.tbm_bbs.utils.BrowserDetect.iPhoneVersion=4):a.tbm_bbs.utils.BrowserDetect.iPhoneVersion=5:832==k._platform.getStage().get_height()?(a.tbm_bbs.utils.BrowserDetect.iPhone4=!0,a.tbm_bbs.utils.BrowserDetect.iPhoneVersion=4):a.tbm_bbs.utils.BrowserDetect.iPhoneVersion=5};a.tbm_bbs.utils.BrowserDetect.getBrowserVersion=function(b,a){null==a&&(a="/");var e=m.window.navigator.userAgent,c=e.indexOf(a,b),f=e.indexOf(" ",c+1),f=0>f?e.length-1:f,e=e.substring(c+1,f),c=e.indexOf(".");-1<c&&(c=e.indexOf(".",c+1),-1<c&&(e=e.substring(0,c)));return n.parseFloat(e)};a.tbm_bbs.utils.PulseComponent=function(){};g["com.cmm.tbm_bbs.utils.PulseComponent"]=a.tbm_bbs.utils.PulseComponent;a.tbm_bbs.utils.PulseComponent.__name__=["com","cmm","tbm_bbs","utils","PulseComponent"];a.tbm_bbs.utils.PulseComponent.__super__=y;a.tbm_bbs.utils.PulseComponent.prototype=r(y.prototype,{onUpdate:function(b){y.prototype.onUpdate.call(this,b);if(null!=this._pulseDataArray)for(var a=this._pulseDataArray.length,e=0;e<a;)!1==this._pulseDataArray[e].update(b)&&(this._pulseDataArray.splice(e,1),e--,a--),e++},onAdded:function(){y.prototype.onAdded.call(this)},killAll:function(){if(null!=this._pulseDataArray)for(;0<this._pulseDataArray.length;)this._pulseDataArray.pop().active=!1},anyActive:function(){if(null!=this._pulseDataArray)for(var b=0,a=this._pulseDataArray.length;b<a;)if(!0==this._pulseDataArray[b++].active)return!0;return!1},pulse:function(b,d,e,c,f,l){null==this._pulseDataArray&&(this._pulseDataArray=[]);this._pulseDataArray.push(new a.tbm_bbs.utils.PulseData(b,d,e,c,f,l))},get_name:function(){return"PulseComponent_7"},__class__:a.tbm_bbs.utils.PulseComponent});a.tbm_bbs.utils.PulseData=function(b,a,e,c,f,l){this.active=!1;this.start=this.min=this.max=this.speed=this.duration=this.curTime=0;this.animFloat=b;this.start=a;this.min=e;this.max=c;this.speed=f;this.duration=l;this.curTime=0;this.active=!0};g["com.cmm.tbm_bbs.utils.PulseData"]=a.tbm_bbs.utils.PulseData;a.tbm_bbs.utils.PulseData.__name__=["com","cmm","tbm_bbs","utils","PulseData"];a.tbm_bbs.utils.PulseData.prototype={update:function(b){this.active&&(this.curTime+=b,this.curTime>=this.duration?(this.active=!1,this.animFloat.set__(this.start)):this.animFloat._value<=this.min?this.animFloat.animateTo(this.max,this.speed):this.animFloat._value>=this.max&&this.animFloat.animateTo(this.min,this.speed));return this.active},__class__:a.tbm_bbs.utils.PulseData};a.tbm_bbs.utils.TimeUtil=function(){};g["com.cmm.tbm_bbs.utils.TimeUtil"]=a.tbm_bbs.utils.TimeUtil;a.tbm_bbs.utils.TimeUtil.__name__=["com","cmm","tbm_bbs","utils","TimeUtil"];a.tbm_bbs.utils.TimeUtil.convertSecondsToMMSS=function(b){var a=Math.floor(b%60),b=n.string(Math.floor(b/60)),e=n.string(a);10>a&&(e="0"+n.string(a));return b+":"+e};a.tbm_bbs.utils.TimerComponent=function(b,a,e){null==e&&(e=!1);this._loop=!1;this._onComplete=null;this._paused=!0;this._endTime=this._curTime=0;this._endTime=b;this._curTime=0;this._paused=!0;this._onComplete=a;this._loop=e};g["com.cmm.tbm_bbs.utils.TimerComponent"]=a.tbm_bbs.utils.TimerComponent;a.tbm_bbs.utils.TimerComponent.__name__=["com","cmm","tbm_bbs","utils","TimerComponent"];a.tbm_bbs.utils.TimerComponent.__super__=y;a.tbm_bbs.utils.TimerComponent.prototype=r(y.prototype,{onUpdate:function(b){y.prototype.onUpdate.call(this,b);!1==this._paused&&(this._curTime+=b,this._curTime>=this._endTime&&(!1==this._loop&&(this._paused=!0),this._curTime=0,null!=this._onComplete&&this._onComplete()))},resume:function(){this._paused=!1},pause:function(){this._paused=!0},stop:function(){this._paused=!0;this._curTime=0},reset:function(b){null==b&&(b=-1);0<b&&(this._endTime=b);this._curTime=0;this._paused=!1},get_name:function(){return"TimerComponent_9"},__class__:a.tbm_bbs.utils.TimerComponent});a.tbm_bbs.utils.UpdateComponent=function(b){this._onUpdate=null;this._onUpdate=b};g["com.cmm.tbm_bbs.utils.UpdateComponent"]=a.tbm_bbs.utils.UpdateComponent;a.tbm_bbs.utils.UpdateComponent.__name__=["com","cmm","tbm_bbs","utils","UpdateComponent"];a.tbm_bbs.utils.UpdateComponent.__super__=y;a.tbm_bbs.utils.UpdateComponent.prototype=r(y.prototype,{onUpdate:function(b){y.prototype.onUpdate.call(this,b);null!=this._onUpdate&&this._onUpdate(b)},get_name:function(){return"UpdateComponent_8"},__class__:a.tbm_bbs.utils.UpdateComponent});oa=function(){this._disposables=[]};g["flambe.Disposer"]=oa;oa.__name__=["flambe","Disposer"];oa.__super__=y;oa.prototype=r(y.prototype,{freeDisposables:function(){var b=this._disposables;this._disposables=[];for(var a=0;a<b.length;){var e=b[a];++a;e.dispose()}},dispose:function(){y.prototype.dispose.call(this);this.freeDisposables()},onRemoved:function(){this.freeDisposables()},connect1:function(b,a){this.add(b.connect(a));return this},connect0:function(b,a){this.add(b.connect(a));return this},add:function(b){this._disposables.push(b);return this},get_name:function(){return"Disposer_2"},__class__:oa});lb=function(){};g["flambe.util.PackageLog"]=lb;lb.__name__=["flambe","util","PackageLog"];ib=function(){};f=void 0;Q=void 0;ua=void 0;G=void 0;ca=void 0;va=void 0;wa=void 0;Z=void 0;xa=void 0;R=void 0;ia=void 0;L=void 0;ja=void 0;ya=void 0;da=void 0;Qa=void 0;za=void 0;qb=void 0;Ra=void 0;ka=void 0;g["flambe.platform.Platform"]=ib;ib.__name__=["flambe","platform","Platform"];ib.prototype={__class__:ib};f={HtmlPlatform:function(){}};g["flambe.platform.html.HtmlPlatform"]=f.HtmlPlatform;f.HtmlPlatform.__name__=["flambe","platform","html","HtmlPlatform"];f.HtmlPlatform.__interfaces__=[ib];f.HtmlPlatform.prototype={createRenderer:function(b){return new f.CanvasRenderer(b)},getY:function(b,a){return this._stage.scaleFactor*(b.clientY-a.top)},getX:function(b,a){return this._stage.scaleFactor*(b.clientX-a.left)},getRenderer:function(){return this._renderer},getAccelerometer:function(){null==this._accelerometer&&(this._accelerometer=new f.HtmlAccelerometer);return this._accelerometer},getExternal:function(){null==this._external&&(this._external=new f.HtmlExternal);return this._external},getWeb:function(){null==this._web&&(this._web=new f.HtmlWeb(this._container));return this._web},getKeyboard:function(){var b=this;if(null==this._keyboard){this._keyboard=new Q;var a=function(a){switch(a.type){case "keydown":b._keyboard.submitDown(a.keyCode)&&a.preventDefault();break;case "keyup":b._keyboard.submitUp(a.keyCode)}};this._canvas.addEventListener("keydown",a,!1);this._canvas.addEventListener("keyup",a,!1)}return this._keyboard},getTouch:function(){return this._touch},getMouse:function(){return this._mouse},getPointer:function(){return this._pointer},update:function(b){var a=(b-this._lastUpdate)/1E3;this._lastUpdate=b;k.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(a),this.mainLoop.render(this._renderer)))},getTime:function(){return Date.now()/1E3},createLogHandler:function(){return null},getLocale:function(){var b=m.window.navigator.language;null==b&&(b=m.window.navigator.userLanguage);return b},getStorage:function(){if(null==this._storage){var b=null;try{b=m.window.localStorage}catch(a){}this._storage=null!=b?new f.HtmlStorage(b):new ua}return this._storage},getStage:function(){return this._stage},loadAssetPack:function(b){return(new f.HtmlAssetPackLoader(this,b)).promise},init:function(){var b=this,a=null;try{a=m.window.flambe.canvas}catch(e){}a.setAttribute("tabindex","0");a.style.outlineStyle="none";a.setAttribute("moz-opaque","true");this._stage=new f.HtmlStage(a);this._pointer=new G;this._mouse=new f.HtmlMouse(this._pointer,a);this._renderer=this.createRenderer(a);k.hasGPU.set__(!0);this.mainLoop=new ca;this._canvas=a;this._container=a.parentNode;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var c=0,o=function(e){if(!(1E3>e.timeStamp-c)){var f=a.getBoundingClientRect(),o=b.getX(e,f),f=b.getY(e,f);switch(e.type){case "mousedown":e.target==a&&(e.preventDefault(),b._mouse.submitDown(o,f,e.button),e.target.focus());break;case "mousemove":b._mouse.submitMove(o,f);break;case "mouseup":b._mouse.submitUp(o,f,e.button);break;case "mousewheel":case "DOMMouseScroll":b._mouse.submitScroll(o,f,"mousewheel"==e.type?e.wheelDelta/40:-e.detail)&&e.preventDefault()}}};window.addEventListener("mousedown",o,!1);window.addEventListener("mousemove",o,!1);window.addEventListener("mouseup",o,!1);a.addEventListener("mousewheel",o,!1);a.addEventListener("DOMMouseScroll",o,!1);var l="undefined"!=typeof m.window.ontouchstart,o="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(l||o){var g=new va(this._pointer,o?window.navigator.msMaxTouchPoints:4);this._touch=g;o=function(a){var d=l?a.changedTouches:[a],e=a.target.getBoundingClientRect();c=a.timeStamp;switch(a.type){case "touchstart":case "MSPointerDown":a.preventDefault();f.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&f.HtmlUtil.hideMobileBrowser();for(a=0;a<d.length;){var o=d[a];++a;var i=b.getX(o,e),j=b.getY(o,e),o=(l?o.identifier:o.pointerId)|0;g.submitDown(o,i,j)}break;case "touchmove":case "MSPointerMove":a.preventDefault();for(a=0;a<d.length;)o=d[a],++a,i=b.getX(o,e),j=b.getY(o,e),o=(l?o.identifier:o.pointerId)|0,g.submitMove(o,i,j);break;case "touchend":case "touchcancel":case "MSPointerUp":for(a=0;a<d.length;)o=d[a],++a,i=b.getX(o,e),j=b.getY(o,e),o=(l?o.identifier:o.pointerId)|0,g.submitUp(o,i,j)}};l?(a.addEventListener("touchstart",o,!1),a.addEventListener("touchmove",o,!1),a.addEventListener("touchend",o,!1),a.addEventListener("touchcancel",o,!1)):(a.addEventListener("MSPointerDown",o,!1),a.addEventListener("MSPointerMove",o,!1),a.addEventListener("MSPointerUp",o,!1))}else this._touch=new wa;var i=m.window.onerror;m.window.onerror=function(b,a,d){k.uncaughtError.emit1(b);return null!=i?i(b,a,d):!1};var j=f.HtmlUtil.loadExtension("hidden",m.document);null!=j.value?(o=function(){k.hidden.set__(O.field(m.document,j.field))},o(),m.document.addEventListener(j.prefix+"visibilitychange",o,!1)):(o=function(b){k.hidden.set__("pagehide"==b.type)},m.window.addEventListener("pageshow",o,!1),m.window.addEventListener("pagehide",o,!1));k.hidden.get_changed().connect(function(a){a||(b._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var n=f.HtmlUtil.loadExtension("requestAnimationFrame").value;if(null!=n){var p=m.window.performance,q=null!=p&&f.HtmlUtil.polyfill("now",p);q?this._lastUpdate=p.now():null;var r=null,r=function(e){b.update(q?p.now():e);n(r,a)};n(r,a)}else m.window.setInterval(function(){b.update(Date.now())},1E3/60)},__class__:f.HtmlPlatform};x=function(b){J.call(this,b)};g["flambe.util.Signal1"]=x;x.__name__=["flambe","util","Signal1"];x.__super__=J;x.prototype=r(J.prototype,{connect:function(b,a){null==a&&(a=!1);return this.connectImpl(b,a)},__class__:x});B=function(b,a){C.call(this,b,a)};Ca=void 0;Da=void 0;Ta=void 0;jb=void 0;g["flambe.animation.AnimatedFloat"]=B;B.__name__=["flambe","animation","AnimatedFloat"];B.__super__=C;B.prototype=r(C.prototype,{set_behavior:function(b){this._behavior=b;this.update(0);return b},animateTo:function(b,a,e){this.set_behavior(new Ca(this._value,b,a,e))},animate:function(b,a,e,c){this.set__(b);this.animateTo(a,e,c)},update:function(b){null!=this._behavior&&(C.prototype.set__.call(this,this._behavior.update(b)),this._behavior.isComplete()&&(this._behavior=null))},set__:function(b){this._behavior=null;return C.prototype.set__.call(this,b)},__class__:B});k=function(){};g["flambe.System"]=k;k.__name__=["flambe","System"];k.init=function(){k._calledInit||(k._platform.init(),k._calledInit=!0)};Za=function(b){this._handler=b};g["flambe.util.Logger"]=Za;Za.__name__=["flambe","util","Logger"];Za.prototype={__class__:Za};bb=function(){};g["flambe.Log"]=bb;bb.__name__=["flambe","Log"];bb.__super__=lb;bb.prototype=r(lb.prototype,{__class__:bb});pb=function(b){null==b&&(b=1);this._internal_realDt=0;this.scale=new B(b)};g["flambe.SpeedAdjuster"]=pb;pb.__name__=["flambe","SpeedAdjuster"];pb.__super__=y;pb.prototype=r(y.prototype,{onUpdate:function(b){0<this._internal_realDt&&(b=this._internal_realDt,this._internal_realDt=0);this.scale.update(b)},get_name:function(){return"SpeedAdjuster_10"},__class__:pb});Da=function(){};g["flambe.animation.Behavior"]=Da;Da.__name__=["flambe","animation","Behavior"];Da.prototype={__class__:Da};Ta=function(){};g["flambe.animation.Binding"]=Ta;Ta.__name__=["flambe","animation","Binding"];Ta.__interfaces__=[Da];Ta.prototype={isComplete:function(){return!1},update:function(){var b=this._target._value;return null!=this._fn?this._fn(b):b},__class__:Ta};jb=function(){};g["flambe.animation.Ease"]=jb;jb.__name__=["flambe","animation","Ease"];jb.linear=function(b){return b};Ca=function(b,a,e,c){this._from=b;this._to=a;this._duration=e;this.elapsed=0;this._easing=null!=c?c:jb.linear};g["flambe.animation.Tween"]=Ca;Ca.__name__=["flambe","animation","Tween"];Ca.__interfaces__=[Da];Ca.prototype={isComplete:function(){return this.elapsed>=this._duration},update:function(b){this.elapsed+=b;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},__class__:Ca};I=void 0;q=void 0;Oa=void 0;Pa=void 0;q=g["flambe.asset.AssetFormat"]={__ename__:["flambe","asset","AssetFormat"],__constructs__:"WEBP,JXR,PNG,JPG,GIF,MP3,M4A,OGG,WAV,Data".split(",")};q.WEBP=["WEBP",0];q.WEBP.toString=i;q.WEBP.__enum__=q;q.JXR=["JXR",1];q.JXR.toString=i;q.JXR.__enum__=q;q.PNG=["PNG",2];q.PNG.toString=i;q.PNG.__enum__=q;q.JPG=["JPG",3];q.JPG.toString=i;q.JPG.__enum__=q;q.GIF=["GIF",4];q.GIF.toString=i;q.GIF.__enum__=q;q.MP3=["MP3",5];q.MP3.toString=i;q.MP3.__enum__=q;q.M4A=["M4A",6];q.M4A.toString=i;q.M4A.__enum__=q;q.OGG=["OGG",7];q.OGG.toString=i;q.OGG.__enum__=q;q.WAV=["WAV",8];q.WAV.toString=i;q.WAV.__enum__=q;q.Data=["Data",9];q.Data.toString=i;q.Data.__enum__=q;Oa=function(b,a,e,c){this.name=b;this.url=a;this.format=e;this.bytes=c};g["flambe.asset.AssetEntry"]=Oa;Oa.__name__=["flambe","asset","AssetEntry"];Oa.prototype={__class__:Oa};Pa=function(){};g["flambe.asset.AssetPack"]=Pa;Pa.__name__=["flambe","asset","AssetPack"];Pa.prototype={__class__:Pa};t=void 0;m=void 0;t=function(){};g["js.Boot"]=t;t.__name__=["js","Boot"];t.__string_rec=function(b,a){if(null==b)return"null";if(5<=a.length)return"<...>";var e=typeof b;if("function"==e&&(b.__name__||b.__ename__))e="object";switch(e){case "object":if(b instanceof Array){if(b.__enum__){if(2==b.length)return b[0];for(var e=b[0]+"(",a=a+"\t",c=2,f=b.length;c<f;)var l=c++,e=2!=l?e+(","+t.__string_rec(b[l],a)):e+t.__string_rec(b[l],a);return e+")"}c=b.length;e="[";a+="\t";for(f=0;f<c;)l=f++,e+=(0<l?",":"")+t.__string_rec(b[l],a);return e+"]"}try{f=b.toString}catch(g){return"???"}if(null!=f&&f!=Object.toString&&(e=b.toString(),"[object Object]"!=e))return e;f=null;e="{\n";a+="\t";c=null!=b.hasOwnProperty;for(f in b)if(!c||b.hasOwnProperty(f))"prototype"==f||"__class__"==f||"__super__"==f||"__interfaces__"==f||"__properties__"==f||(2!=e.length&&(e+=", \n"),e+=a+f+" : "+t.__string_rec(b[f],a));a=a.substring(1);return e+("\n"+a+"}");case "function":return"<function>";case "string":return b;default:return""+b}};t.__interfLoop=function(b,a){if(null==b)return!1;if(b==a)return!0;var e=b.__interfaces__;if(null!=e)for(var c=0,f=e.length;c<f;){var l=c++,l=e[l];if(l==a||t.__interfLoop(l,a))return!0}return t.__interfLoop(b.__super__,a)};t.__instanceof=function(b,a){try{if(b instanceof a)return a==Array?null==b.__enum__:!0;if(t.__interfLoop(b.__class__,a))return!0}catch(e){if(null==a)return!1}switch(a){case tb:return Math.ceil(b%2147483648)===b;case wb:return"number"==typeof b;case xb:return!0===b||!1===b;case String:return"string"==typeof b;case zb:return!0;default:if(null==b)return!1;if(a==Ab&&null!=b.__name__)return!0;null;if(a==Bb&&null!=b.__ename__)return!0;null;return b.__enum__==a}};t.__cast=function(b,a){if(t.__instanceof(b,a))return b;throw"Cannot cast "+n.string(b)+" to "+n.string(a);};E=function(){};g["flambe.util.Strings"]=E;E.__name__=["flambe","util","Strings"];E.getFileExtension=function(b){var a=b.lastIndexOf(".");return 0<a?u.substr(b,a+1,null):null};E.removeFileExtension=function(b){var a=b.lastIndexOf(".");return 0<a?u.substr(b,0,a):b};E.getUrlExtension=function(b){var a=b.lastIndexOf("?");0<=a&&(b=u.substr(b,0,a));a=b.lastIndexOf("/");0<=a&&(b=u.substr(b,a+1,null));return E.getFileExtension(b)};E.joinPath=function(b,a){47!=b.charCodeAt(b.length-1)&&(b+="/");return b+a};E.withFields=function(b,a){var e=a.length;if(0<e){for(var b=b+(0<b.length?" [":"["),c=0;c<e;){0<c&&(b+=", ");var f=a[c],l=a[c+1];if(t.__instanceof(l,Error)){var g=l.stack;null!=g&&(l=g)}b+=f+"="+n.string(l);c+=2}b+="]"}return b};m=function(){};g["js.Lib"]=m;m.__name__=["js","Lib"];I=function(){this._entries=[]};g["flambe.asset.Manifest"]=I;I.__name__=["flambe","asset","Manifest"];I.build=function(b,a){null==a&&(a=!0);var e=I._buildManifest.get(b);if(null==e){if(a)throw E.withFields("Missing asset pack",["name",b]);return null}return e.clone()};I.inferFormat=function(b){b=E.getUrlExtension(b);if(null!=b)switch(b.toLowerCase()){case "gif":return q.GIF;case "jpg":case "jpeg":return q.JPG;case "jxr":return q.JXR;case "png":return q.PNG;case "webp":return q.WEBP;case "m4a":return q.M4A;case "mp3":return q.MP3;case "ogg":return q.OGG;case "wav":return q.WAV}else null;return q.Data};I.createBuildManifests=function(){var b=new A;b.set("primary",[{name:"sfx/win.ogg",md5:"b30a2015c5ab888db8969f2ee52d2246",bytes:78870},{name:"sfx/win.mp3",md5:"d119b51ebb5af64d56e193aa22f046cd",bytes:73250},{name:"sfx/tallyDone.ogg",md5:"03fce0d772f2edf5498f874a873c8917",bytes:18568},{name:"sfx/tallyDone.mp3",md5:"bf6e6b34dd07c788dfaf77cadf0a6bef",bytes:11340},{name:"sfx/tally.ogg",md5:"4cf90f78a0675853b5fc9d5a3e43cabd",bytes:87372},{name:"sfx/tally.mp3",md5:"c7249e86b9d1832d870b2049612a3f80",bytes:46291},{name:"sfx/ro1.ogg",md5:"08983c29b3f9d43088203ddcdabe8000",bytes:9929},{name:"sfx/ro1.mp3",md5:"e7c85f590c755a8af893cd01654e80bc",bytes:7891},{name:"sfx/lose.ogg",md5:"ff446361a25ed7907df01ba4a8b00059",bytes:40794},{name:"sfx/lose.mp3",md5:"f6efb53f42689824fa2ca965523a1f98",bytes:34536},{name:"sfx/item4.ogg",md5:"afbaa5314d16e9b0ec657f4469d52e2c",bytes:10769},{name:"sfx/item4.mp3",md5:"2e27d2c4e9ee0f6b8d2b977876ebaeb3",bytes:9145},{name:"sfx/item3.ogg",md5:"4a106f89cb61e2f0af5f2aa842b72c7b",bytes:10862},{name:"sfx/item3.mp3",md5:"3b207f6ad398e05f6596ae8ef61027e9",bytes:9145},{name:"sfx/item2.ogg",md5:"1b67115283c399c655a5ed0531dddc2b",bytes:10885},{name:"sfx/item2.mp3",md5:"342c00f7d77a840f8434f7f6abed9458",bytes:9145},{name:"sfx/item1.ogg",md5:"6bfcdb6737eb0b48706b1b41b60c60e4",bytes:10865},{name:"sfx/item1.mp3",md5:"6df87238b28af0b6b0bfee43869ed318",bytes:9145},{name:"sfx/hint.ogg",md5:"e7395a2581c8f525511c2413fcb662f6",bytes:10782},{name:"sfx/hint.mp3",md5:"47749fee32561668529449d9f9975063",bytes:9929},{name:"sfx/gtrHits7.ogg",md5:"c705a6e360c60955b193c79195378c63",bytes:13388},{name:"sfx/gtrHits7.mp3",md5:"11380bd0346e7c8657b4948eefe172df",bytes:10713},{name:"sfx/gtrHits6.ogg",md5:"5f8d93a24c5fc5b7c1cc9e8859f283fc",bytes:13397},{name:"sfx/gtrHits6.mp3",md5:"198f6792be98d79a33d1ce510a9c1e40",bytes:10713},{name:"sfx/gtrHits5.ogg",md5:"bd219239ff976164484afc23897b59fa",bytes:13391},{name:"sfx/gtrHits5.mp3",md5:"311192923fcce0c0cb5eb7f5dae4760e",bytes:10713},{name:"sfx/gtrHits4.ogg",md5:"151b88dd4a4b7ed3b957dcf89367903a",bytes:13464},{name:"sfx/gtrHits4.mp3",md5:"b0771b12ca0b7ebba6c80c7c8df3da67",bytes:10713},{name:"sfx/gtrHits3.ogg",md5:"e768ba28e3c2c4c8f3c056d5af3131cc",bytes:13367},{name:"sfx/gtrHits3.mp3",md5:"630ff204a0565a2040b426013e86db28",bytes:10713},{name:"sfx/gtrHits2.ogg",md5:"ad3a68372031174f0c073a98117c5b56",bytes:13256},{name:"sfx/gtrHits2.mp3",md5:"7425484a61086b6cbceb548bfd32e118",bytes:10713},{name:"sfx/gtrHits1.ogg",md5:"0c62da3db028b37e49a2d219c7bfd6ee",bytes:13163},{name:"sfx/gtrHits1.mp3",md5:"b28fcaaa68b3094d46945245f69d9de5",bytes:10713},{name:"sfx/go.ogg",md5:"d51d63883a2c5e78bce8eb3fe26838bc",bytes:63146},{name:"sfx/go.mp3",md5:"3baf7f72387e2260d1e054fc087e4397",bytes:32969},{name:"sfx/countOff3.ogg",md5:"e518eea783ef4094d006aa3d9cd4734d",bytes:22852},{name:"sfx/countOff3.mp3",md5:"71d886c051dd9d9aac05ec77d26aa0f4",bytes:14631},{name:"sfx/countOff2.ogg",md5:"ac6914957c21ea0d4a6d00f2f6c1830e",bytes:23120},{name:"sfx/countOff2.mp3",md5:"d4363b2a3c44fedb12a835f90a628ca1",bytes:14631},{name:"sfx/countOff1.ogg",md5:"ad81abefb21a7e0d05e0d772fc099ac8",bytes:22773},{name:"sfx/countOff1.mp3",md5:"b585eea859f5fe4d6353b0bed01a4121",bytes:14631},{name:"sfx/clickAccessory.ogg",md5:"aaa8f1bd6cc2618df57462903539dfd0",bytes:15486},{name:"sfx/clickAccessory.mp3",md5:"04517bb1b556246f4c922fbfb366f308",bytes:12280},{name:"sfx/click1.ogg",md5:"184c8f2605d005e38987fea0e8f5f31b",bytes:9686},{name:"sfx/click1.mp3",md5:"93474499b4e599e5ababc5a25fc58e9c",bytes:7891},{name:"sfx/charFillIn4.ogg",md5:"4752fdcc19a4fd7aa622cab6dd175548",bytes:6674},{name:"sfx/charFillIn4.mp3",md5:"ac25e1098826cdde2588c05628cf4cbb",bytes:8205},{name:"sfx/charFillIn3.ogg",md5:"e5750d65cb26e6d9bfa39c4edded419f",bytes:6731},{name:"sfx/charFillIn3.mp3",md5:"5d09f38a749ea4289570397e10b5d2d4",bytes:8205},{name:"sfx/charFillIn2.ogg",md5:"fd8499817b88737ca534b52490eb6f58",bytes:6777},{name:"sfx/charFillIn2.mp3",md5:"41724e4da7c90e8c63f51aa340e87534",bytes:8205},{name:"sfx/charFillIn1.ogg",md5:"9b0271572dc8705a6a446600213cfba7",bytes:6985},{name:"sfx/charFillIn1.mp3",md5:"705048e31ede7bf38a455589cf627353",bytes:8205},{name:"sfx/bonus3.ogg",md5:"c6ce2376b1adc4e3fdc0dbbe8ecc4afb",bytes:62037},{name:"sfx/bonus3.mp3",md5:"edc21a291134150dd20b65748d5c0593",bytes:19255},{name:"sfx/bonus2.ogg",md5:"20d5d777c4e2b30d8aaab59dffe57513",bytes:31236},{name:"sfx/bonus2.mp3",md5:"28b7f365657d6f24a3a033c31318c6c6",bytes:16042},{name:"sfx/bonus1.ogg",md5:"0fae9843971890a8bd088a546178ffcd",bytes:31282},{name:"sfx/bonus1.mp3",md5:"d19a18e839c5edd37ba14f4268d56191",bytes:16042},{name:"sfx/arrow.ogg",md5:"6c7b13ef441451510a553cc3741a8e67",bytes:6587},{name:"sfx/arrow.mp3",md5:"731908d4aaf8e53f6beec098f7c23f28",bytes:4600},{name:"music/IntroLoop.ogg",md5:"be903324269d55f917d2e9e02efbac7e",bytes:444373},{name:"music/IntroLoop.mp3",md5:"cdf58f23be967d934a557b1da7aa1679",bytes:223558},{name:"music/gameSting2.ogg",md5:"380a8b5e501676f99bc0b2d6a7c7cae1",bytes:61129},{name:"music/gameSting2.mp3",md5:"504945c29ba7473ab84755212a747bc3",bytes:30931},{name:"music/gameSting1.ogg",md5:"a8886895d4acca4c0562859fe31adc76",bytes:100745},{name:"music/gameSting1.mp3",md5:"a738e4302c151b4304c40a9bf5c57d8e",bytes:50523},{name:"music/gameLoop2.ogg",md5:"e88c886f29bd0b53da84d42226128efa",bytes:594896},{name:"music/gameLoop2.mp3",md5:"0a8af517e0f4eaf5c5674aa48c744ba3",bytes:298634},{name:"music/gameLoop1.ogg",md5:"d00eb921115bf81e5e83824dd9ce4a20",bytes:571605},{name:"music/gameLoop1.mp3",md5:"53a694bbd48d84695f928e0bc89b88fe",bytes:281550},{name:"music/BonusRoundLoop.ogg",md5:"7a289d70f0b21b2808f2e0616ed9cf27",bytes:286493},{name:"music/BonusRoundLoop.mp3",md5:"86aed4db69c1d144e3f5547302c83acd",bytes:142370},{name:"library/TBM_BBS_UI/library.json",md5:"af62077ee3ae1ff0928c9c968e9c0a8d",bytes:9449},{name:"library/TBM_BBS_UI/atlas0.png",md5:"5ad9411f7506f25c60a942371892fada",bytes:70104},{name:"library/TBM_BBS_Scenes/library.json",md5:"40bcf75ca538fc66579ee30c8185082d",bytes:30710},{name:"library/TBM_BBS_Scenes/atlas8.png",md5:"1971a471323d33637784deaae2b45527",bytes:20901},{name:"library/TBM_BBS_Scenes/atlas7.png",md5:"57e13c6960a1dd105678acd3651009a3",bytes:128851},{name:"library/TBM_BBS_Scenes/atlas6.png",md5:"9b202fd4c1503866ad892e15822f4c46",bytes:47257},{name:"library/TBM_BBS_Scenes/atlas5.png",md5:"d7c0a00c9983cd914be673c86daae935",bytes:82036},{name:"library/TBM_BBS_Scenes/atlas4.png",md5:"c552c34b9bb1cb9e911361c0c1ca788c",bytes:236646},{name:"library/TBM_BBS_Scenes/atlas3.png",md5:"2f738fa72dacd855374c31f4cb210c2c",bytes:142427},{name:"library/TBM_BBS_Scenes/atlas2.png",md5:"bb16a83f15b86f61b8b7af4843f5ba35",bytes:83900},{name:"library/TBM_BBS_Scenes/atlas1.png",md5:"8c4be8d690f570733c6ff316adfa5163",bytes:133334},{name:"library/TBM_BBS_Scenes/atlas0.png",md5:"b7fbf8f89b0ef1161eeade2f6974a954",bytes:144881},{name:"library/TBM_BBS_Game/library.json",md5:"0b3a441d75d5daad4e3cc755179bb655",bytes:199778},{name:"library/TBM_BBS_Game/atlas9.png",md5:"67c5e2d094d648b8a45589de04dfd3ea",bytes:12131},{name:"library/TBM_BBS_Game/atlas8.png",md5:"4c40860e11ca58a31c58dde80a0716fa",bytes:20480},{name:"library/TBM_BBS_Game/atlas7.png",md5:"89ed5f3ae16d3186c00589a8c2535e34",bytes:140672},{name:"library/TBM_BBS_Game/atlas6.png",md5:"2268450d5f2fc0826c33823d10e06a21",bytes:181198},{name:"library/TBM_BBS_Game/atlas5.png",md5:"1ebbb1c05ec10088761f9e1c0c924d17",bytes:156761},{name:"library/TBM_BBS_Game/atlas4.png",md5:"c916651fc46c341ef5f4d03138fd6a11",bytes:128818},{name:"library/TBM_BBS_Game/atlas3.png",md5:"c8fced1b56de8844c2603c0038efd501",bytes:173382},{name:"library/TBM_BBS_Game/atlas2.png",md5:"9cb39946f2c3bd2e8966b06aa205df65",bytes:214552},{name:"library/TBM_BBS_Game/atlas1.png",md5:"b53b5f61dd4d3dc3eda85c5dca24152c",bytes:136968},{name:"library/TBM_BBS_Game/atlas0.png",md5:"2e98ee8a780be92f45dc5db64ad896b6",bytes:139992}]);b.set("preload",[{name:"library/TBM_BBS_Preloader/library.json",md5:"aa379f9017c40e1837a3be4f82aa2152",bytes:1014},{name:"library/TBM_BBS_Preloader/atlas1.png",md5:"dc381a5e87618b447c325cb858220f26",bytes:510},{name:"library/TBM_BBS_Preloader/atlas0.png",md5:"1f38f3fcd24bac526c6acfb603aae089",bytes:2190}]);b.set("loader",[{name:"library/TBM_BBS_Loader/library.json",md5:"78a731e351ee281c4b36b2dbb53c28a7",bytes:2539},{name:"library/TBM_BBS_Loader/atlas1.png",md5:"dceba03e3ec8f45fecb1e2625b3fe875",bytes:495},{name:"library/TBM_BBS_Loader/atlas0.png",md5:"936455d863d5f37429073c6b24507a3a",bytes:1737}]);b.set("config",[{name:"unsupported.jpg",md5:"2d9673e2cad9099f86d88690246f9579",bytes:32919},{name:"title_logo.png",md5:"53f4a50269570a8f4f616e4918ca5ce8",bytes:7520},{name:"supported_browsers.json",md5:"a4ebf341f2bd5751f1768692ce61e001",bytes:1005},{name:"strings.json",md5:"1401fb690c1d67d0d095b30a65dad80b",bytes:33217},{name:"soundFiles.xml",md5:"4d8aeeddf84986a2696308f14b5111b3",bytes:6923},{name:"orientation_iphone.png",md5:"3599927516a49235b85f7b04f04aa847",bytes:16301},{name:"orientation_ipad.png",md5:"58a90c1eb5d2caf4f6c1eb48b8b8af66",bytes:9605},{name:"logo.png",md5:"effa74cb960d8570e42ab9d4a4c6dac6",bytes:158756},{name:"gameConfig.xml",md5:"2f5c5d79d4e039182283a5795bbd66bf",bytes:154},{name:"fonts/TREBUC.TTF",md5:"f0bc47b88979fca14c89f6ebc5ef8b6d",bytes:136172},{name:"fonts/fonts.css",md5:"f5693938e0e071341b756ed6ce285fce",bytes:115}]);for(var a=new A,e=b.keys();e.hasNext();){var c=e.next(),f=new I;f.set_relativeBasePath("assets");for(var g=0,i=b.get(c);g<i.length;){var j=i[g];++g;var k=j.name,m=c+"/"+k+"?v="+n.string(j.md5),p=I.inferFormat(k);p!=q.Data&&(k=E.removeFileExtension(k));f.add(k,m,j.bytes,p)}a.set(c,f)}return a};I.prototype={set_externalBasePath:function(b){this._externalBasePath=b;null!=b&&null;return b},get_externalBasePath:function(){return this._externalBasePath},set_relativeBasePath:function(b){this._relativeBasePath=b;null!=b&&null;return b},get_relativeBasePath:function(){return this._relativeBasePath},getFullURL:function(b){var a=null!=this.get_externalBasePath()&&I._supportsCrossOrigin?this.get_externalBasePath():this.get_relativeBasePath(),e=null!=this.get_externalBasePath()?this.get_externalBasePath():this.get_relativeBasePath();b.format==q.Data&&(e=a);return null!=e?E.joinPath(e,b.url):b.url},clone:function(){var b=new I;b.set_relativeBasePath(this.get_relativeBasePath());b.set_externalBasePath(this.get_externalBasePath());b._entries=this._entries.slice();return b},iterator:function(){return u.iter(this._entries)},add:function(b,a,e,c){null==e&&(e=0);null==c&&(c=I.inferFormat(a));b=new Oa(b,a,c,e);this._entries.push(b);return b},__class__:I};S=g["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:["Normal","Add","CopyExperimental"]};S.Normal=["Normal",0];S.Normal.toString=i;S.Normal.__enum__=S;S.Add=["Add",1];S.Add.toString=i;S.Add.__enum__=S;S.CopyExperimental=["CopyExperimental",2];S.CopyExperimental.toString=i;S.CopyExperimental.__enum__=S;U=function(b,a,e){v.call(this);this.color=b;this.width=new B(a);this.height=new B(e)};g["flambe.display.FillSprite"]=U;U.__name__=["flambe","display","FillSprite"];U.__super__=v;U.prototype=r(v.prototype,{onUpdate:function(b){v.prototype.onUpdate.call(this,b);this.width.update(b);this.height.update(b)},getNaturalHeight:function(){return this.height._value},getNaturalWidth:function(){return this.width._value},draw:function(b){b.fillRect(this.color,0,0,this.width._value,this.height._value)},__class__:U});Ua=function(){};g["flambe.display.Graphics"]=Ua;Ua.__name__=["flambe","display","Graphics"];Ua.prototype={__class__:Ua};X=function(b){v.call(this);this.texture=b};g["flambe.display.ImageSprite"]=X;X.__name__=["flambe","display","ImageSprite"];X.__super__=v;X.prototype=r(v.prototype,{getNaturalHeight:function(){return this.texture.get_height()},getNaturalWidth:function(){return this.texture.get_width()},draw:function(b){b.drawImage(this.texture,0,0)},__class__:X});M=g["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};M.Portrait=["Portrait",0];M.Portrait.toString=i;M.Portrait.__enum__=M;M.Landscape=["Landscape",1];M.Landscape.toString=i;M.Landscape.__enum__=M;Va=function(){};g["flambe.display.Stage"]=Va;Va.__name__=["flambe","display","Stage"];Va.prototype={__class__:Va};Wa=function(){};g["flambe.display.Texture"]=Wa;Wa.__name__=["flambe","display","Texture"];Wa.prototype={__class__:Wa};hb=function(){};g["flambe.external.External"]=hb;hb.__name__=["flambe","external","External"];hb.prototype={__class__:hb};gb=function(){};Ia=void 0;c=void 0;Ja=void 0;Ka=void 0;La=void 0;F=void 0;P=void 0;ra=void 0;Ma=void 0;ha=void 0;sa=void 0;ta=void 0;Na=void 0;g["flambe.input.Accelerometer"]=gb;gb.__name__=["flambe","input","Accelerometer"];gb.prototype={__class__:gb};Ia=function(){this._internal_update(0,0,0)};g["flambe.input.AccelerometerOrientation"]=Ia;Ia.__name__=["flambe","input","AccelerometerOrientation"];Ia.prototype={_internal_update:function(b,a,e){this.pitch=b;this.roll=a;this.azimuth=e},__class__:Ia};c=g["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};c.A=["A",0];c.A.toString=i;c.A.__enum__=c;c.B=["B",1];c.B.toString=i;c.B.__enum__=c;c.C=["C",2];c.C.toString=i;c.C.__enum__=c;c.D=["D",3];c.D.toString=i;c.D.__enum__=c;c.E=["E",4];c.E.toString=i;c.E.__enum__=c;c.F=["F",5];c.F.toString=i;c.F.__enum__=c;c.G=["G",6];c.G.toString=i;c.G.__enum__=c;c.H=["H",7];c.H.toString=i;c.H.__enum__=c;c.I=["I",8];c.I.toString=i;c.I.__enum__=c;c.J=["J",9];c.J.toString=i;c.J.__enum__=c;c.K=["K",10];c.K.toString=i;c.K.__enum__=c;c.L=["L",11];c.L.toString=i;c.L.__enum__=c;c.M=["M",12];c.M.toString=i;c.M.__enum__=c;c.N=["N",13];c.N.toString=i;c.N.__enum__=c;c.O=["O",14];c.O.toString=i;c.O.__enum__=c;c.P=["P",15];c.P.toString=i;c.P.__enum__=c;c.Q=["Q",16];c.Q.toString=i;c.Q.__enum__=c;c.R=["R",17];c.R.toString=i;c.R.__enum__=c;c.S=["S",18];c.S.toString=i;c.S.__enum__=c;c.T=["T",19];c.T.toString=i;c.T.__enum__=c;c.U=["U",20];c.U.toString=i;c.U.__enum__=c;c.V=["V",21];c.V.toString=i;c.V.__enum__=c;c.W=["W",22];c.W.toString=i;c.W.__enum__=c;c.X=["X",23];c.X.toString=i;c.X.__enum__=c;c.Y=["Y",24];c.Y.toString=i;c.Y.__enum__=c;c.Z=["Z",25];c.Z.toString=i;c.Z.__enum__=c;c.Number0=["Number0",26];c.Number0.toString=i;c.Number0.__enum__=c;c.Number1=["Number1",27];c.Number1.toString=i;c.Number1.__enum__=c;c.Number2=["Number2",28];c.Number2.toString=i;c.Number2.__enum__=c;c.Number3=["Number3",29];c.Number3.toString=i;c.Number3.__enum__=c;c.Number4=["Number4",30];c.Number4.toString=i;c.Number4.__enum__=c;c.Number5=["Number5",31];c.Number5.toString=i;c.Number5.__enum__=c;c.Number6=["Number6",32];c.Number6.toString=i;c.Number6.__enum__=c;c.Number7=["Number7",33];c.Number7.toString=i;c.Number7.__enum__=c;c.Number8=["Number8",34];c.Number8.toString=i;c.Number8.__enum__=c;c.Number9=["Number9",35];c.Number9.toString=i;c.Number9.__enum__=c;c.Numpad0=["Numpad0",36];c.Numpad0.toString=i;c.Numpad0.__enum__=c;c.Numpad1=["Numpad1",37];c.Numpad1.toString=i;c.Numpad1.__enum__=c;c.Numpad2=["Numpad2",38];c.Numpad2.toString=i;c.Numpad2.__enum__=c;c.Numpad3=["Numpad3",39];c.Numpad3.toString=i;c.Numpad3.__enum__=c;c.Numpad4=["Numpad4",40];c.Numpad4.toString=i;c.Numpad4.__enum__=c;c.Numpad5=["Numpad5",41];c.Numpad5.toString=i;c.Numpad5.__enum__=c;c.Numpad6=["Numpad6",42];c.Numpad6.toString=i;c.Numpad6.__enum__=c;c.Numpad7=["Numpad7",43];c.Numpad7.toString=i;c.Numpad7.__enum__=c;c.Numpad8=["Numpad8",44];c.Numpad8.toString=i;c.Numpad8.__enum__=c;c.Numpad9=["Numpad9",45];c.Numpad9.toString=i;c.Numpad9.__enum__=c;c.NumpadAdd=["NumpadAdd",46];c.NumpadAdd.toString=i;c.NumpadAdd.__enum__=c;c.NumpadDecimal=["NumpadDecimal",47];c.NumpadDecimal.toString=i;c.NumpadDecimal.__enum__=c;c.NumpadDivide=["NumpadDivide",48];c.NumpadDivide.toString=i;c.NumpadDivide.__enum__=c;c.NumpadEnter=["NumpadEnter",49];c.NumpadEnter.toString=i;c.NumpadEnter.__enum__=c;c.NumpadMultiply=["NumpadMultiply",50];c.NumpadMultiply.toString=i;c.NumpadMultiply.__enum__=c;c.NumpadSubtract=["NumpadSubtract",51];c.NumpadSubtract.toString=i;c.NumpadSubtract.__enum__=c;c.F1=["F1",52];c.F1.toString=i;c.F1.__enum__=c;c.F2=["F2",53];c.F2.toString=i;c.F2.__enum__=c;c.F3=["F3",54];c.F3.toString=i;c.F3.__enum__=c;c.F4=["F4",55];c.F4.toString=i;c.F4.__enum__=c;c.F5=["F5",56];c.F5.toString=i;c.F5.__enum__=c;c.F6=["F6",57];c.F6.toString=i;c.F6.__enum__=c;c.F7=["F7",58];c.F7.toString=i;c.F7.__enum__=c;c.F8=["F8",59];c.F8.toString=i;c.F8.__enum__=c;c.F9=["F9",60];c.F9.toString=i;c.F9.__enum__=c;c.F10=["F10",61];c.F10.toString=i;c.F10.__enum__=c;c.F11=["F11",62];c.F11.toString=i;c.F11.__enum__=c;c.F12=["F12",63];c.F12.toString=i;c.F12.__enum__=c;c.F13=["F13",64];c.F13.toString=i;c.F13.__enum__=c;c.F14=["F14",65];c.F14.toString=i;c.F14.__enum__=c;c.F15=["F15",66];c.F15.toString=i;c.F15.__enum__=c;c.Left=["Left",67];c.Left.toString=i;c.Left.__enum__=c;c.Up=["Up",68];c.Up.toString=i;c.Up.__enum__=c;c.Right=["Right",69];c.Right.toString=i;c.Right.__enum__=c;c.Down=["Down",70];c.Down.toString=i;c.Down.__enum__=c;c.Alt=["Alt",71];c.Alt.toString=i;c.Alt.__enum__=c;c.Backquote=["Backquote",72];c.Backquote.toString=i;c.Backquote.__enum__=c;c.Backslash=["Backslash",73];c.Backslash.toString=i;c.Backslash.__enum__=c;c.Backspace=["Backspace",74];c.Backspace.toString=i;c.Backspace.__enum__=c;c.CapsLock=["CapsLock",75];c.CapsLock.toString=i;c.CapsLock.__enum__=c;c.Comma=["Comma",76];c.Comma.toString=i;c.Comma.__enum__=c;c.Command=["Command",77];c.Command.toString=i;c.Command.__enum__=c;c.Control=["Control",78];c.Control.toString=i;c.Control.__enum__=c;c.Delete=["Delete",79];c.Delete.toString=i;c.Delete.__enum__=c;c.End=["End",80];c.End.toString=i;c.End.__enum__=c;c.Enter=["Enter",81];c.Enter.toString=i;c.Enter.__enum__=c;c.Equals=["Equals",82];c.Equals.toString=i;c.Equals.__enum__=c;c.Escape=["Escape",83];c.Escape.toString=i;c.Escape.__enum__=c;c.Home=["Home",84];c.Home.toString=i;c.Home.__enum__=c;c.Insert=["Insert",85];c.Insert.toString=i;c.Insert.__enum__=c;c.LeftBracket=["LeftBracket",86];c.LeftBracket.toString=i;c.LeftBracket.__enum__=c;c.Minus=["Minus",87];c.Minus.toString=i;c.Minus.__enum__=c;c.PageDown=["PageDown",88];c.PageDown.toString=i;c.PageDown.__enum__=c;c.PageUp=["PageUp",89];c.PageUp.toString=i;c.PageUp.__enum__=c;c.Period=["Period",90];c.Period.toString=i;c.Period.__enum__=c;c.Quote=["Quote",91];c.Quote.toString=i;c.Quote.__enum__=c;c.RightBracket=["RightBracket",92];c.RightBracket.toString=i;c.RightBracket.__enum__=c;c.Semicolon=["Semicolon",93];c.Semicolon.toString=i;c.Semicolon.__enum__=c;c.Shift=["Shift",94];c.Shift.toString=i;c.Shift.__enum__=c;c.Slash=["Slash",95];c.Slash.toString=i;c.Slash.__enum__=c;c.Space=["Space",96];c.Space.toString=i;c.Space.__enum__=c;c.Tab=["Tab",97];c.Tab.toString=i;c.Tab.__enum__=c;c.Menu=["Menu",98];c.Menu.toString=i;c.Menu.__enum__=c;c.Search=["Search",99];c.Search.toString=i;c.Search.__enum__=c;c.Unknown=function(b){b=["Unknown",100,b];b.__enum__=c;b.toString=i;return b};Ja=function(){};g["flambe.input.Keyboard"]=Ja;Ja.__name__=["flambe","input","Keyboard"];Ja.prototype={__class__:Ja};Ka=function(){this._internal_init(0,null)};g["flambe.input.KeyboardEvent"]=Ka;Ka.__name__=["flambe","input","KeyboardEvent"];Ka.prototype={_internal_init:function(b,a){this.id=b;this.key=a},__class__:Ka};La=function(){};g["flambe.input.Mouse"]=La;La.__name__=["flambe","input","Mouse"];La.prototype={__class__:La};F=g["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};F.Left=["Left",0];F.Left.toString=i;F.Left.__enum__=F;F.Middle=["Middle",1];F.Middle.toString=i;F.Middle.__enum__=F;F.Right=["Right",2];F.Right.toString=i;F.Right.__enum__=F;F.Unknown=function(b){b=["Unknown",3,b];b.__enum__=F;b.toString=i;return b};P=g["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};P.Default=["Default",0];P.Default.toString=i;P.Default.__enum__=P;P.Button=["Button",1];P.Button.toString=i;P.Button.__enum__=P;P.None=["None",2];P.None.toString=i;P.None.__enum__=P;ra=function(){this._internal_init(0,0,0,null)};g["flambe.input.MouseEvent"]=ra;ra.__name__=["flambe","input","MouseEvent"];ra.prototype={_internal_init:function(b,a,e,c){this.id=b;this.viewX=a;this.viewY=e;this.button=c},clone:function(){var b=new ra;b._internal_init(this.id,this.viewX,this.viewY,this.button);return b},__class__:ra};Ma=function(){};g["flambe.input.Pointer"]=Ma;Ma.__name__=["flambe","input","Pointer"];Ma.prototype={__class__:Ma};ha=g["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};ha.Mouse=function(b){b=["Mouse",0,b];b.__enum__=ha;b.toString=i;return b};ha.Touch=function(b){b=["Touch",1,b];b.__enum__=ha;b.toString=i;return b};sa=function(){this._internal_init(0,0,0,null,null)};g["flambe.input.PointerEvent"]=sa;sa.__name__=["flambe","input","PointerEvent"];sa.prototype={_internal_init:function(b,a,e,c,f){this.id=b;this.viewX=a;this.viewY=e;this.hit=c;this.source=f;this._internal_stopped=!1},clone:function(){var b=null,b=this.source;switch(b[1]){case 0:var a=b[2],b=ha.Mouse(a.clone());break;default:b=this.source}a=new sa;a._internal_init(this.id,this.viewX,this.viewY,this.hit,b);return a},__class__:sa};ta=function(){};g["flambe.input.Touch"]=ta;ta.__name__=["flambe","input","Touch"];ta.prototype={__class__:ta};Na=function(b){this.id=b;this._internal_source=ha.Touch(this)};g["flambe.input.TouchPoint"]=Na;Na.__name__=["flambe","input","TouchPoint"];Na.prototype={_internal_init:function(b,a){this.viewX=b;this.viewY=a},__class__:Na};kb=function(){};g["flambe.math.FMath"]=kb;kb.__name__=["flambe","math","FMath"];kb.clamp=function(b,a,e){return b<a?a:b>e?e:b};ea=function(){this.identity()};g["flambe.math.Matrix"]=ea;ea.__name__=["flambe","math","Matrix"];ea.multiply=function(b,a,e){null==e&&(e=new ea);var c=b.m00*a.m00+b.m01*a.m10,f=b.m00*a.m01+b.m01*a.m11,g=b.m00*a.m02+b.m01*a.m12+b.m02;e.m00=c;e.m01=f;e.m02=g;c=b.m10*a.m00+b.m11*a.m10;f=b.m10*a.m01+b.m11*a.m11;g=b.m10*a.m02+b.m11*a.m12+b.m12;e.m10=c;e.m11=f;e.m12=g;return e};ea.prototype={inverseTransform:function(b,a,e){var c=this.determinant();if(0==c)return!1;b-=this.m02;a-=this.m12;e.x=(b*this.m11-
a*this.m01)/c;e.y=(a*this.m00-b*this.m10)/c;return!0},determinant:function(){return this.m00*this.m11-this.m01*this.m10},transform:function(b,a,e){null==e&&(e=new H);e.x=b*this.m00+a*this.m01+this.m02;e.y=b*this.m10+a*this.m11+this.m12;return e},translate:function(b,a){this.m02+=this.m00*b+this.m01*a;this.m12+=this.m11*a+this.m10*b},compose:function(b,a,e,c,f){var g=Math.sin(f),f=Math.cos(f);this.set(f*e,g*e,-g*c,f*c,b,a)},identity:function(){this.set(1,0,0,1,0,0)},set:function(b,a,e,c,f,g){this.m00=b;this.m01=e;this.m02=f;this.m10=a;this.m11=c;this.m12=g},__class__:ea};T=function(b,a,e,c){null==c&&(c=0);null==e&&(e=0);null==a&&(a=0);null==b&&(b=0);this.set(b,a,e,c)};g["flambe.math.Rectangle"]=T;T.__name__=["flambe","math","Rectangle"];T.prototype={contains:function(b,a){b-=this.x;a-=this.y;return 0<=b&&0<=a&&b<=this.width&&a<=this.height},set:function(b,a,e,c){this.x=b;this.y=a;this.width=e;this.height=c},__class__:T};Z=function(b,a){var e=this;if(null!=a){this._platform=b;this.promise=new Fa;this._bytesLoaded=new A;this._pack=new xa.BasicAssetPack(a);var c=nb.array(a);if(0==c.length)this.handleSuccess();else{for(var f=new A,g=0;g<c.length;){var i=c[g];++g;var j=f.get(i.name);null==j&&(j=[],f.set(i.name,j));j.push(i)}this._assetsRemaining=nb.count(f);for(c=f.iterator();c.hasNext();)j=c.next(),j=[j],this.pickBestEntry(j[0],function(b){return function(c){if(null!=c){var h=a.getFullURL(c);try{e.loadEntry(h,c)}catch(f){e.handleError(c,"Unexpected error: "+n.string(f))}h=e.promise;h.set_total(h._total+
c.bytes)}else c=b[0][0],Z.isAudio(c.format)?e.handleLoad(c,R.getInstance()):e.handleError(c,"Could not find a supported format to load")}}(j))}}};g["flambe.platform.BasicAssetPackLoader"]=Z;Z.__name__=["flambe","platform","BasicAssetPackLoader"];Z.isAudio=function(b){switch(b[1]){case 5:case 6:case 7:case 8:return!0;default:return!1}};Z.prototype={handleTextureError:function(b){this.handleError(b,"Failed to create texture. Is the GPU context unavailable?")},handleError:function(b,a){this.promise.error.emit1(E.withFields(a,["url",b.url]))},handleSuccess:function(){this.promise.set_result(this._pack)},handleProgress:function(b,a){this._bytesLoaded.set(b.name,a);for(var e=0,c=this._bytesLoaded.iterator();c.hasNext();)var f=c.next(),e=e+f;this.promise.set_progress(e)},handleLoad:function(b,a){this.handleProgress(b,b.bytes);var c=b.name;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:this._pack.textures.set(c,a);break;case 5:case 6:case 7:case 8:this._pack.sounds.set(c,a);break;case 9:this._pack.files.set(c,a)}this._assetsRemaining-=1;0>=this._assetsRemaining&&this.handleSuccess()},getAssetFormats:function(){null},loadEntry:function(){null},pickBestEntry:function(b,a){this.getAssetFormats(function(c){for(var h=0;h<c.length;){var f=c[h];++h;for(var g=0;g<b.length;){var i=b[g];++g;if(i.format==f){a(i);return}}}a(null)})},__class__:Z};xa={BasicAssetPack:function(b){this._manifest=b;this.textures=new A;this.sounds=new A;this.files=new A}};g["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=xa.BasicAssetPack;xa.BasicAssetPack.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];xa.BasicAssetPack.__interfaces__=[Pa];xa.BasicAssetPack.prototype={get_manifest:function(){return this._manifest},getFile:function(b,a){null==a&&(a=!0);var c=this.files.get(b);if(null==c&&a)throw E.withFields("Missing file",["name",b]);return c},getSound:function(b,a){null==a&&(a=!0);var c=this.sounds.get(b);if(null==c&&a)throw E.withFields("Missing sound",["name",b]);return c},getTexture:function(b,a){null==a&&(a=!0);var c=this.textures.get(b);if(null==c&&a)throw E.withFields("Missing texture",["name",b]);return c},__class__:xa.BasicAssetPack};Q=function(){this.down=new x;this.up=new x;this.backButton=new N;this._keyStates=new ga};g["flambe.platform.BasicKeyboard"]=Q;Q.__name__=["flambe","platform","BasicKeyboard"];Q.__interfaces__=[Ja];Q.prototype={submitUp:function(b){this._keyStates.exists(b)&&(this._keyStates.remove(b),Q._sharedEvent._internal_init(Q._sharedEvent.id+1,ia.toKey(b)),this.up.emit1(Q._sharedEvent))},submitDown:function(b){if(16777238==b)return null!=this.backButton._head?(this.backButton.emit0(),!0):!1;this._keyStates.exists(b)||(this._keyStates.set(b,!0),Q._sharedEvent._internal_init(Q._sharedEvent.id+1,ia.toKey(b)),this.down.emit1(Q._sharedEvent));return!0},isDown:function(b){return this._keyStates.exists(ia.toKeyCode(b))},get_supported:function(){return!0},__class__:Q};L=function(b){this._pointer=b;this._source=ha.Mouse(L._sharedEvent);this.down=new x;this.move=new x;this.up=new x;this.scroll=new x;this._y=this._x=0;this._cursor=P.Default;this._buttonStates=new ga};g["flambe.platform.BasicMouse"]=L;L.__name__=["flambe","platform","BasicMouse"];L.__interfaces__=[La];L.prototype={prepare:function(b,a,c){this._x=b;this._y=a;L._sharedEvent._internal_init(L._sharedEvent.id+1,b,a,c)},submitScroll:function(b,a,c){this._x=b;this._y=a;if(null==this.scroll._head)return!1;this.scroll.emit1(c);return!0},submitUp:function(b,a,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(b,a,ja.toButton(c)),this._pointer.submitUp(b,a,this._source),this.up.emit1(L._sharedEvent))},submitMove:function(b,a){this.prepare(b,a,null);this._pointer.submitMove(b,a,this._source);this.move.emit1(L._sharedEvent)},submitDown:function(b,a,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(b,a,ja.toButton(c)),this._pointer.submitDown(b,a,this._source),this.down.emit1(L._sharedEvent))},isDown:function(b){return this._buttonStates.exists(ja.toButtonCode(b))},set_cursor:function(b){return this._cursor=b},get_cursor:function(){return this._cursor},get_y:function(){return this._y},get_x:function(){return this._x},get_supported:function(){return!0},__class__:L};G=function(b,a,c){null==c&&(c=!1);null==a&&(a=0);null==b&&(b=0);this.down=new x;this.move=new x;this.up=new x;this._x=b;this._y=a;this._isDown=c};g["flambe.platform.BasicPointer"]=G;G.__name__=["flambe","platform","BasicPointer"];G.__interfaces__=[Ma];G.prototype={prepare:function(b,a,c,h){this._x=b;this._y=a;G._sharedEvent._internal_init(G._sharedEvent.id+1,b,a,c,h)},submitUp:function(b,a,c){if(this._isDown){this._isDown=!1;var h=[],f=v.hitTest(k.root,b,a);if(null!=f){var g=f.owner;do{var i=g._compMap.Sprite_1;null!=i&&h.push(i);g=g.parent}while(null!=g)}this.prepare(b,a,f,c);for(b=0;b<h.length;)if(i=h[b],++b,i=i._internal_pointerUp,null!=i&&(i.emit1(G._sharedEvent),G._sharedEvent._internal_stopped))return;this.up.emit1(G._sharedEvent)}},submitMove:function(b,a,c){var h=[],f=v.hitTest(k.root,b,a);if(null!=f){var g=f.owner;do{var i=g._compMap.Sprite_1;null!=i&&h.push(i);g=g.parent}while(null!=g)}this.prepare(b,a,f,c);for(b=0;b<h.length;)if(i=h[b],++b,i=i._internal_pointerMove,null!=i&&(i.emit1(G._sharedEvent),G._sharedEvent._internal_stopped))return;this.move.emit1(G._sharedEvent)},submitDown:function(b,a,c){if(!this._isDown){this._isDown=!0;var h=[],f=v.hitTest(k.root,b,a);if(null!=f){var g=f.owner;do{var i=g._compMap.Sprite_1;null!=i&&h.push(i);g=g.parent}while(null!=g)}this.prepare(b,a,f,c);for(b=0;b<h.length;)if(i=h[b],++b,i=i._internal_pointerDown,null!=i&&(i.emit1(G._sharedEvent),G._sharedEvent._internal_stopped))return;this.down.emit1(G._sharedEvent)}},isDown:function(){return this._isDown},get_y:function(){return this._y},get_x:function(){return this._x},get_supported:function(){return!0},__class__:G};va=function(b,a){null==a&&(a=4);this._pointer=b;this._maxPoints=a;this._pointMap=new ga;this._points=[];this.down=new x;this.move=new x;this.up=new x};g["flambe.platform.BasicTouch"]=va;va.__name__=["flambe","platform","BasicTouch"];va.__interfaces__=[ta];va.prototype={submitUp:function(b,a,c){var h=this._pointMap.get(b);null!=h&&(h._internal_init(a,c),this._pointMap.remove(b),u.remove(this._points,h),this._pointerTouch==h&&(this._pointerTouch=null,this._pointer.submitUp(a,c,h._internal_source)),this.up.emit1(h))},submitMove:function(b,a,c){b=this._pointMap.get(b);null!=b&&(b._internal_init(a,c),this._pointerTouch==b&&this._pointer.submitMove(a,c,b._internal_source),this.move.emit1(b))},submitDown:function(b,a,c){if(!this._pointMap.exists(b)){var h=new Na(b);h._internal_init(a,c);this._pointMap.set(b,h);this._points.push(h);null==this._pointerTouch&&(this._pointerTouch=h,this._pointer.submitDown(a,c,h._internal_source));this.down.emit1(h)}},get_points:function(){return this._points.slice()},get_maxPoints:function(){return this._maxPoints},get_supported:function(){return!0},__class__:va};qa=function(){};ba=void 0;g["flambe.sound.Sound"]=qa;qa.__name__=["flambe","sound","Sound"];qa.prototype={__class__:qa};R=function(){this._playback=new ya(this)};g["flambe.platform.DummySound"]=R;R.__name__=["flambe","platform","DummySound"];R.__interfaces__=[qa];R.getInstance=function(){null==R._instance&&(R._instance=new R);return R._instance};R.prototype={get_duration:function(){return 0},loop:function(){return this._playback},play:function(){return this._playback},__class__:R};ba=function(){};g["flambe.sound.Playback"]=ba;ba.__name__=["flambe","sound","Playback"];ba.__interfaces__=[$];ba.prototype={__class__:ba};ya=function(b){this._sound=b;this.volume=new B(0)};g["flambe.platform.DummyPlayback"]=ya;ya.__name__=["flambe","platform","DummyPlayback"];ya.__interfaces__=[ba];ya.prototype={dispose:function(){},get_position:function(){return 0},get_ended:function(){return!0},set_paused:function(){return!0},get_paused:function(){return!0},get_sound:function(){return this._sound},__class__:ya};Ha=function(){};g["flambe.storage.Storage"]=Ha;Ha.__name__=["flambe","storage","Storage"];Ha.prototype={__class__:Ha};ua=function(){this.clear()};g["flambe.platform.DummyStorage"]=ua;ua.__name__=["flambe","platform","DummyStorage"];ua.__interfaces__=[Ha];ua.prototype={clear:function(){this._hash=new A},remove:function(b){this._hash.remove(b)},get:function(b,a){return this._hash.exists(b)?this._hash.get(b):a},set:function(b,a){this._hash.set(b,a);return!0},get_supported:function(){return!1},__class__:ua};wa=function(){this.down=new x;this.move=new x;this.up=new x};g["flambe.platform.DummyTouch"]=wa;wa.__name__=["flambe","platform","DummyTouch"];wa.__interfaces__=[ta];wa.prototype={get_points:function(){return[]},get_maxPoints:function(){return 0},get_supported:function(){return!1},__class__:wa};da=function(){this._entries=[]};g["flambe.platform.EventGroup"]=da;da.__name__=["flambe","platform","EventGroup"];da.__interfaces__=[$];da.prototype={dispose:function(){for(var b=0,a=this._entries;b<a.length;){var c=a[b];++b;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},addDisposingListener:function(b,a,c){var h=this;this.addListener(b,a,function(b){h.dispose();c(b)})},addListener:function(b,a,c){b.addEventListener(a,c,!1);this._entries.push(new Qa.Entry(b,a,c))},__class__:da};Qa={Entry:function(b,a,c){this.dispatcher=b;this.type=a;this.listener=c}};g["flambe.platform._EventGroup.Entry"]=Qa.Entry;Qa.Entry.__name__=["flambe","platform","_EventGroup","Entry"];Qa.Entry.prototype={__class__:Qa.Entry};za=function(b){x.call(this,b);this.hasListenersValue=new C(null!=this._head)};g["flambe.platform.HeavySignal1"]=za;za.__name__=["flambe","platform","HeavySignal1"];za.__super__=x;za.prototype=r(x.prototype,{didEmit:function(b){x.prototype.didEmit.call(this,b);this.hasListenersValue.set__(null!=this._head)},_internal_disconnect:function(b){x.prototype._internal_disconnect.call(this,b);this.hasListenersValue.set__(null!=this._head)},connect:function(b,a){null==a&&(a=!1);var c=x.prototype.connect.call(this,b,a);this.hasListenersValue.set__(null!=this._head);return c},__class__:za});ia=function(){};g["flambe.platform.KeyCodes"]=ia;ia.__name__=["flambe","platform","KeyCodes"];ia.toKey=function(b){switch(b){case 65:return c.A;case 66:return c.B;case 67:return c.C;case 68:return c.D;case 69:return c.E;case 70:return c.F;case 71:return c.G;case 72:return c.H;case 73:return c.I;case 74:return c.J;case 75:return c.K;case 76:return c.L;case 77:return c.M;case 78:return c.N;case 79:return c.O;case 80:return c.P;case 81:return c.Q;case 82:return c.R;case 83:return c.S;case 84:return c.T;case 85:return c.U;case 86:return c.V;case 87:return c.W;case 88:return c.X;case 89:return c.Y;case 90:return c.Z;case 48:return c.Number0;case 49:return c.Number1;case 50:return c.Number2;case 51:return c.Number3;case 52:return c.Number4;case 53:return c.Number5;case 54:return c.Number6;case 55:return c.Number7;case 56:return c.Number8;case 57:return c.Number9;case 96:return c.Numpad0;case 97:return c.Numpad1;case 98:return c.Numpad2;case 99:return c.Numpad3;case 100:return c.Numpad4;case 101:return c.Numpad5;case 102:return c.Numpad6;case 103:return c.Numpad7;case 104:return c.Numpad8;case 105:return c.Numpad9;case 107:return c.NumpadAdd;case 110:return c.NumpadDecimal;case 111:return c.NumpadDivide;case 108:return c.NumpadEnter;case 106:return c.NumpadMultiply;case 109:return c.NumpadSubtract;case 112:return c.F1;case 113:return c.F2;case 114:return c.F3;case 115:return c.F4;case 116:return c.F5;case 117:return c.F6;case 118:return c.F7;case 119:return c.F8;case 120:return c.F9;case 121:return c.F10;case 122:return c.F11;case 123:return c.F12;case 37:return c.Left;case 38:return c.Up;case 39:return c.Right;case 40:return c.Down;case 18:return c.Alt;case 192:return c.Backquote;case 220:return c.Backslash;case 8:return c.Backspace;case 20:return c.CapsLock;case 188:return c.Comma;case 15:return c.Command;case 17:return c.Control;case 46:return c.Delete;case 35:return c.End;case 13:return c.Enter;case 187:return c.Equals;case 27:return c.Escape;case 36:return c.Home;case 45:return c.Insert;case 219:return c.LeftBracket;case 189:return c.Minus;case 34:return c.PageDown;case 33:return c.PageUp;case 190:return c.Period;case 222:return c.Quote;case 221:return c.RightBracket;case 186:return c.Semicolon;case 16:return c.Shift;case 191:return c.Slash;case 32:return c.Space;case 9:return c.Tab;case 16777234:return c.Menu;case 16777247:return c.Search}return c.Unknown(b)};ia.toKeyCode=function(b){switch(b[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return b[2]}};ca=function(){this._tickables=[]};g["flambe.platform.MainLoop"]=ca;ca.__name__=["flambe","platform","MainLoop"];ca.updateEntity=function(b,a){var c=b._compMap.SpeedAdjuster_10;if(null!=c&&(c._internal_realDt=a,a*=c.scale._value,0>=a)){c.onUpdate(a);return}for(var h=b.firstComponent;null!=h;)c=h.next,h.onUpdate(a),h=c;for(h=b.firstChild;null!=h;)c=h.next,ca.updateEntity(h,a),h=c};ca.prototype={addTickable:function(b){this._tickables.push(b)},render:function(b){var a=b.willRender();null!=a&&(v.render(k.root,a),b.didRender())},update:function(b){if(!(0>=b)){1<b&&(b=1);for(var a=0;a<this._tickables.length;){var c=this._tickables[a];null==c||c.update(b)?this._tickables.splice(a,1):++a}k.volume.update(b);ca.updateEntity(k.root,b)}},__class__:ca};qb=function(){};g["flambe.platform.ManifestBuilder"]=qb;qb.__name__=["flambe","platform","ManifestBuilder"];ja=function(){};g["flambe.platform.MouseCodes"]=ja;ja.__name__=["flambe","platform","MouseCodes"];ja.toButton=function(b){switch(b){case 0:return F.Left;case 1:return F.Middle;case 2:return F.Right}return F.Unknown(b)};ja.toButtonCode=function(b){switch(b[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return b[2]}};Ra=function(){};g["flambe.platform.Renderer"]=Ra;Ra.__name__=["flambe","platform","Renderer"];Ra.prototype={__class__:Ra};ka=function(){};g["flambe.platform.Tickable"]=ka;ka.__name__=["flambe","platform","Tickable"];ka.prototype={__class__:ka};f.CanvasGraphics=function(b){this._firstDraw=!1;this._canvasCtx=b.getContext("2d")};g["flambe.platform.html.CanvasGraphics"]=f.CanvasGraphics;f.CanvasGraphics.__name__=["flambe","platform","html","CanvasGraphics"];f.CanvasGraphics.__interfaces__=[Ua];f.CanvasGraphics.prototype={willRender:function(){this._firstDraw=!0},applyScissor:function(b,a,c,h){this._canvasCtx.beginPath();this._canvasCtx.rect(b|0,a|0,c|0,h|0);this._canvasCtx.clip()},setBlendMode:function(b){var a;switch(b[1]){case 0:a="source-over";break;case 1:a="lighter";break;case 2:a="source-over"}this._canvasCtx.globalCompositeOperation=a},setAlpha:function(b){this._canvasCtx.globalAlpha=b},multiplyAlpha:function(b){this._canvasCtx.globalAlpha*=b},fillRect:function(b,a,c,h,f){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(b,a,c,h,f),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle="#"+("00000"+b.toString(16)).slice(-6),this._canvasCtx.fillRect(a|0,c|0,h|0,f|0))},drawPattern:function(b,a,c,h,f){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(b,a,c,h,f),this._canvasCtx.globalCompositeOperation="source-over"):(null==b.pattern&&(b.pattern=this._canvasCtx.createPattern(b.image,"repeat")),this._canvasCtx.fillStyle=b.pattern,this._canvasCtx.fillRect(a|0,c|0,h|0,f|0))},drawSubImage:function(b,a,c,h,f,g,i){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubImage(b,a,c,h,f,g,i),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(b.image,h|0,f|0,g|0,i|0,a|0,c|0,g|0,i|0)},drawImage:function(b,a,c){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawImage(b,a,c),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(b.image,a|0,c|0)},restore:function(){this._canvasCtx.restore()},transform:function(b,a,c,h,f,g){this._canvasCtx.transform(b,a,c,h,f|0,g|0)},rotate:function(b){this._canvasCtx.rotate(3.141592653589793*b/180)},scale:function(b,a){this._canvasCtx.scale(b,a)},translate:function(b,a){this._canvasCtx.translate(b|0,a|0)},save:function(){this._canvasCtx.save()},__class__:f.CanvasGraphics};f.CanvasRenderer=function(b){this._graphics=new f.CanvasGraphics(b)};g["flambe.platform.html.CanvasRenderer"]=f.CanvasRenderer;f.CanvasRenderer.__name__=["flambe","platform","html","CanvasRenderer"];f.CanvasRenderer.__interfaces__=[Ra];f.CanvasRenderer.prototype={didRender:function(){},willRender:function(){this._graphics.willRender();return this._graphics},createEmptyTexture:function(b,a){return new f.CanvasTexture(f.HtmlUtil.createEmptyCanvas(b,a))},createTexture:function(b){return new f.CanvasTexture(f.CanvasRenderer.CANVAS_TEXTURES?f.HtmlUtil.createCanvas(b):b)},__class__:f.CanvasRenderer};f.CanvasTexture=function(b){this._graphics=null;this.image=b};g["flambe.platform.html.CanvasTexture"]=f.CanvasTexture;f.CanvasTexture.__name__=["flambe","platform","html","CanvasTexture"];f.CanvasTexture.__interfaces__=[Wa];f.CanvasTexture.prototype={getContext2d:function(){t.__instanceof(this.image,HTMLCanvasElement)||(this.image=f.HtmlUtil.createCanvas(this.image));return this.image.getContext("2d")},get_graphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new f._CanvasTexture.InternalGraphics(this));return this._graphics},get_height:function(){return this.image.height},get_width:function(){return this.image.width},writePixels:function(b,a,c,h,f){var g=this.getContext2d(),i=g.createImageData(h,f),j=i.data;if(null!=j.set)j.set(b.b);else{h=4*h*f;for(f=0;f<h;){var k=f++;j[k]=b.b[k]}}g.putImageData(i,a,c);this.pattern=null},readPixels:function(b,a,c,h){return V.Bytes.ofData(this.getContext2d().getImageData(b,a,c,h).data)},__class__:f.CanvasTexture};f._CanvasTexture={};f._CanvasTexture.InternalGraphics=function(b){f.CanvasGraphics.call(this,b.image);this._renderTarget=b};g["flambe.platform.html._CanvasTexture.InternalGraphics"]=f._CanvasTexture.InternalGraphics;f._CanvasTexture.InternalGraphics.__name__=["flambe","platform","html","_CanvasTexture","InternalGraphics"];f._CanvasTexture.InternalGraphics.__super__=f.CanvasGraphics;f._CanvasTexture.InternalGraphics.prototype=r(f.CanvasGraphics.prototype,{fillRect:function(b,a,c,h,g){f.CanvasGraphics.prototype.fillRect.call(this,b,a,c,h,g);this._renderTarget.pattern=null},drawPattern:function(b,a,c,h,g){f.CanvasGraphics.prototype.drawPattern.call(this,b,a,c,h,g);this._renderTarget.pattern=null},drawSubImage:function(b,a,c,h,g,l,i){f.CanvasGraphics.prototype.drawSubImage.call(this,b,a,c,h,g,l,i);this._renderTarget.pattern=null},drawImage:function(b,a,c){f.CanvasGraphics.prototype.drawImage.call(this,b,a,c);this._renderTarget.pattern=null},__class__:f._CanvasTexture.InternalGraphics});f.HtmlAccelerometer=function(){var b=this;this.orientationUpdate=this._orientationUpdate=new za;this.get_orientationSupported()&&(this._orientation=new Ia,this._orientationUpdate.hasListenersValue.get_changed().connect(function(a){a?(b._orientationEventGroup=new da,b._orientationEventGroup.addListener(m.window,"deviceorientation",p(b,b.handleAccelerometerOrientation))):(b._orientationEventGroup.dispose(),b._orientationEventGroup=null)}))};g["flambe.platform.html.HtmlAccelerometer"]=f.HtmlAccelerometer;f.HtmlAccelerometer.__name__=["flambe","platform","html","HtmlAccelerometer"];f.HtmlAccelerometer.__interfaces__=[gb];f.HtmlAccelerometer.prototype={handleAccelerometerOrientation:function(b){switch(m.window.orientation){case-90:this._orientation._internal_update(b.gamma,-b.beta,b.alpha);break;case 0:this._orientation._internal_update(b.beta,b.gamma,b.alpha);break;case 90:this._orientation._internal_update(-b.gamma,b.beta,b.alpha);break;case 180:this._orientation._internal_update(-b.beta,-b.gamma,b.alpha)}this.orientationUpdate.emit1(this._orientation)},get_orientationSupported:function(){return null!=m.window.DeviceOrientationEvent},__class__:f.HtmlAccelerometer};f.HtmlAssetPackLoader=function(b,a){Z.call(this,b,a)};g["flambe.platform.html.HtmlAssetPackLoader"]=f.HtmlAssetPackLoader;f.HtmlAssetPackLoader.__name__=["flambe","platform","html","HtmlAssetPackLoader"];f.HtmlAssetPackLoader.detectImageFormats=function(b){var a=[q.PNG,q.JPG,q.GIF],c=2,h=new Image;h.onload=h.onerror=function(){1==h.width&&a.unshift(q.WEBP);--c;0==c&&b(a)};h.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var f=new Image;f.onload=f.onerror=function(){1==f.width&&a.unshift(q.JXR);--c;0==c&&b(a)};f.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};f.HtmlAssetPackLoader.detectAudioFormats=function(){var b=m.document.createElement("audio");if(null==b||null==b.canPlayType)return[];var a=new na("\\b(iPhone|iPod|iPad|Android)\\b",""),c=m.window.navigator.userAgent;if(!f.WebAudioSound.get_supported()&&a.match(c))return[];for(var a=[],a=-1<c.indexOf("Firefox")?[{format:q.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:q.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:q.WAV,mimeType:"audio/wav"}]:[{format:q.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:q.MP3,mimeType:"audio/mpeg"},{format:q.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:q.WAV,mimeType:"audio/wav"}],c=[],h=0;h<a.length;){var g=a[h];++h;var l="";try{l=b.canPlayType(g.mimeType)}catch(i){}""!=l&&c.push(g.format)}return c};f.HtmlAssetPackLoader.supportsBlob=function(){if(f.HtmlAssetPackLoader._detectBlobSupport){f.HtmlAssetPackLoader._detectBlobSupport=!1;var b=new XMLHttpRequest;b.open("GET",".",!0);b.responseType="blob";if("blob"!=b.responseType)return!1;f.HtmlAssetPackLoader._URL=f.HtmlUtil.loadExtension("URL").value}return null!=f.HtmlAssetPackLoader._URL&&null!=f.HtmlAssetPackLoader._URL.createObjectURL};f.HtmlAssetPackLoader.__super__=Z;f.HtmlAssetPackLoader.prototype=r(Z.prototype,{sendRequest:function(b,a,c,h){var f=this,g=new XMLHttpRequest,i=0,j=function(){i=Date.now();g.open("GET",b,!0);g.responseType=c;""==g.responseType&&(g.responseType="arraybuffer");g.send()},k=0;if("undefined"!=typeof g.onprogress){var p=4;g.onprogress=function(b){i=Date.now();f.handleProgress(a,b.loaded)};k=m.window.setInterval(function(){1<=g.readyState&&5E3<Date.now()-i&&(g.abort(),--p,0<p?j():(m.window.clearInterval(k),f.handleError(a,"Request timed out")))},1E3)}g.onload=function(){m.window.clearInterval(k);var b=g.response;null==b?b=g.responseText:"blob"==c&&"arraybuffer"==g.responseType&&(b=new Blob([g.response]));h(b)};g.onerror=function(){m.window.clearInterval(k);f.handleError(a,"Failed to load asset: error #"+n.string(g.status))};j();return g},getAssetFormats:function(b){null==f.HtmlAssetPackLoader._supportedFormats&&(f.HtmlAssetPackLoader._supportedFormats=new Fa,f.HtmlAssetPackLoader.detectImageFormats(function(b){f.HtmlAssetPackLoader._supportedFormats.set_result(b.concat(f.HtmlAssetPackLoader.detectAudioFormats()).concat([q.Data]))}));f.HtmlAssetPackLoader._supportedFormats.get(b)},loadEntry:function(b,a){var c=this;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:var h=new Image,g=new da;g.addDisposingListener(h,"load",function(){f.HtmlAssetPackLoader.supportsBlob()&&f.HtmlAssetPackLoader._URL.revokeObjectURL(h.src);var b=c._platform.getRenderer().createTexture(h);null!=b?c.handleLoad(a,b):c.handleTextureError(a)});g.addDisposingListener(h,"error",function(){c.handleError(a,"Failed to load image")});f.HtmlAssetPackLoader.supportsBlob()?this.sendRequest(b,a,"blob",function(b){h.src=f.HtmlAssetPackLoader._URL.createObjectURL(b)}):h.src=b;break;case 5:case 6:case 7:case 8:if(f.WebAudioSound.get_supported())this.sendRequest(b,a,"arraybuffer",function(b){f.WebAudioSound.ctx.decodeAudioData(b,function(b){c.handleLoad(a,new f.WebAudioSound(b))},function(){c.handleLoad(a,R.getInstance())})});else{var i=m.document.createElement("audio");i.preload="auto";var j=++f.HtmlAssetPackLoader._mediaRefCount;null==f.HtmlAssetPackLoader._mediaElements&&(f.HtmlAssetPackLoader._mediaElements=new ga);f.HtmlAssetPackLoader._mediaElements.set(j,i);g=new da;g.addDisposingListener(i,"canplaythrough",function(){f.HtmlAssetPackLoader._mediaElements.remove(j);c.handleLoad(a,new f.HtmlSound(i))});g.addDisposingListener(i,"error",function(){f.HtmlAssetPackLoader._mediaElements.remove(j);var b=i.error.code;3==b||4==b?c.handleLoad(a,R.getInstance()):c.handleError(a,"Failed to load audio: "+n.string(i.error.code))});g.addListener(i,"progress",function(){if(0<i.buffered.length&&0<i.duration){var b=i.buffered.end(0)/i.duration;c.handleProgress(a,b*a.bytes|0)}});i.src=b;i.load()}break;case 9:this.sendRequest(b,a,"text",function(b){c.handleLoad(a,b)})}},__class__:f.HtmlAssetPackLoader});f.HtmlExternal=function(){};g["flambe.platform.html.HtmlExternal"]=f.HtmlExternal;f.HtmlExternal.__name__=["flambe","platform","html","HtmlExternal"];f.HtmlExternal.__interfaces__=[hb];f.HtmlExternal.prototype={bind:function(b,a){m.window[b]=a},call:function(b,a){null==a&&(a=[]);return O.field(m.window,b).apply(null,a)},get_supported:function(){return!0},__class__:f.HtmlExternal};f.HtmlMouse=function(b,a){L.call(this,b);this._canvas=a};g["flambe.platform.html.HtmlMouse"]=f.HtmlMouse;f.HtmlMouse.__name__=["flambe","platform","html","HtmlMouse"];f.HtmlMouse.__super__=L;f.HtmlMouse.prototype=r(L.prototype,{set_cursor:function(b){var a;switch(b[1]){case 0:a="";break;case 1:a="pointer";break;case 2:a="none"}this._canvas.style.cursor=a;return L.prototype.set_cursor.call(this,b)},__class__:f.HtmlMouse});f.HtmlSound=function(b){this.audioElement=b};g["flambe.platform.html.HtmlSound"]=f.HtmlSound;f.HtmlSound.__name__=["flambe","platform","html","HtmlSound"];f.HtmlSound.__interfaces__=[qa];f.HtmlSound.prototype={get_duration:function(){return this.audioElement.duration},loop:function(b){null==b&&(b=1);return new f._HtmlSound.HtmlPlayback(this,b,!0)},play:function(b){null==b&&(b=1);return new f._HtmlSound.HtmlPlayback(this,b,!1)},__class__:f.HtmlSound};f._HtmlSound={};f._HtmlSound.HtmlPlayback=function(b,a,c){var h=this;this._sound=b;this._tickableAdded=!1;this._clonedElement=m.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=b.audioElement.src;this.volume=new B(a,function(){h.updateVolume()});this.updateVolume();this.playAudio()};g["flambe.platform.html._HtmlSound.HtmlPlayback"]=f._HtmlSound.HtmlPlayback;f._HtmlSound.HtmlPlayback.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];f._HtmlSound.HtmlPlayback.__interfaces__=[ka,ba];f._HtmlSound.HtmlPlayback.prototype={updateVolume:function(){this._clonedElement.volume=k.volume._value*this.volume._value},playAudio:function(){var b=this;this._clonedElement.play();this._tickableAdded||(f.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=k.volume.get_changed().connect(function(){b.updateVolume()}),this._hideBinding=k.hidden.get_changed().connect(function(a){a?(b._wasPaused=b._clonedElement.paused,b.set_paused(!0)):b.set_paused(b._wasPaused)}))},dispose:function(){this.set_paused(!0)},update:function(b){this.volume.update(b);return this._clonedElement.ended||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},get_position:function(){return this._clonedElement.currentTime},get_ended:function(){return this._clonedElement.ended},set_paused:function(b){this._clonedElement.paused!=b&&(b?this._clonedElement.pause():this.playAudio());return b},get_paused:function(){return this._clonedElement.paused},get_sound:function(){return this._sound},__class__:f._HtmlSound.HtmlPlayback};f.HtmlStage=function(b){var a=this;this._canvas=b;this.resize=new N;this.scaleFactor=f.HtmlStage.computeScaleFactor();1!=this.scaleFactor&&(f.HtmlUtil.setVendorStyle(this._canvas,"transform-origin","top left"),f.HtmlUtil.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));f.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){f.HtmlUtil.callLater(p(a,a.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",p(this,this.onWindowResize),!1);this.onWindowResize();this.orientation=new C(null);null!=window.orientation&&(window.addEventListener("orientationchange",p(this,this.onOrientationChange),!1),this.onOrientationChange());this.fullscreen=new C(!1);f.HtmlUtil.addVendorListener(m.document,"fullscreenchange",function(){a.updateFullscreen()},!1);this.updateFullscreen()};g["flambe.platform.html.HtmlStage"]=f.HtmlStage;f.HtmlStage.__name__=["flambe","platform","html","HtmlStage"];f.HtmlStage.__interfaces__=[Va];f.HtmlStage.computeScaleFactor=function(){var b=window.devicePixelRatio;null==b&&(b=1);var a=m.document.createElement("canvas").getContext("2d"),a=f.HtmlUtil.loadExtension("backingStorePixelRatio",a).value;null==a&&(a=1);b/=a;a=screen.height;return 1024<b*screen.width||1024<b*a?1:b};f.HtmlStage.prototype={updateFullscreen:function(){this.fullscreen.set__(!0==f.HtmlUtil.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],m.document).value)},onOrientationChange:function(){this.orientation.set__(f.HtmlUtil.orientation(window.orientation))},hideMobileBrowser:function(){var b=this,a=m.document.documentElement.style;a.height=m.window.innerHeight+100+"px";a.width=m.window.innerWidth+"px";a.overflow="visible";f.HtmlUtil.callLater(function(){f.HtmlUtil.hideMobileBrowser();f.HtmlUtil.callLater(function(){a.height=m.window.innerHeight+"px";b.onWindowResize()},100)})},resizeCanvas:function(b,a){var c=this.scaleFactor*b,h=this.scaleFactor*a;if(this._canvas.width==c&&this._canvas.height==h)return!1;this._canvas.width=c;this._canvas.height=h;this.resize.emit0();return!0},onWindowResize:function(){var b=this._canvas.parentNode.getBoundingClientRect();this.resizeCanvas(b.width,b.height)},requestFullscreen:function(b){null==b&&(b=!0);if(b){var b=m.document.documentElement,a=f.HtmlUtil.loadFirstExtension(["requestFullscreen","requestFullScreen"],b).value;null!=a&&a.apply(b,[])}else b=f.HtmlUtil.loadFirstExtension(["cancelFullscreen","cancelFullScreen"],m.document).value,null!=b&&b.apply(m.document,[])},requestResize:function(b,a){if(this.resizeCanvas(b,a)){var c=this._canvas.parentNode;c.style.width=b+"px";c.style.height=a+"px"}},unlockOrientation:function(){},lockOrientation:function(){},get_fullscreenSupported:function(){return!0==f.HtmlUtil.loadFirstExtension(["fullscreenEnabled","fullScreenEnabled"],m.document).value},get_height:function(){return this._canvas.height},get_width:function(){return this._canvas.width},__class__:f.HtmlStage};f.HtmlStorage=function(b){this._storage=b};g["flambe.platform.html.HtmlStorage"]=f.HtmlStorage;f.HtmlStorage.__name__=["flambe","platform","html","HtmlStorage"];f.HtmlStorage.__interfaces__=[Ha];f.HtmlStorage.prototype={clear:function(){try{this._storage.clear()}catch(b){null}},remove:function(b){try{this._storage.removeItem("flambe:"+b)}catch(a){null}},get:function(b,a){var c=null;try{c=this._storage.getItem("flambe:"+b)}catch(h){null}if(null!=c)try{return K.run(c)}catch(f){null}return a},set:function(b,a){var c;try{var h=new W;h.useCache=!0;h.useEnumIndex=!1;h.serialize(a);c=h.toString()}catch(f){return!1}try{this._storage.setItem("flambe:"+
b,c)}catch(g){return!1}return!0},get_supported:function(){return!0},__class__:f.HtmlStorage};f.HtmlUtil=function(){};g["flambe.platform.html.HtmlUtil"]=f.HtmlUtil;f.HtmlUtil.__name__=["flambe","platform","html","HtmlUtil"];f.HtmlUtil.callLater=function(b,a){null==a&&(a=0);m.window.setTimeout(b,a)};f.HtmlUtil.hideMobileBrowser=function(){m.window.scrollTo(1,0)};f.HtmlUtil.loadExtension=function(b,a){null==a&&(a=m.window);var c=O.field(a,b);if(null!=c)return{prefix:"",field:b,value:c};for(var c=b.charAt(0).toUpperCase()+
u.substr(b,1,null),h=0,g=f.HtmlUtil.VENDOR_PREFIXES;h<g.length;){var i=g[h];++h;var j=i+c,k=O.field(a,j);if(null!=k)return{prefix:i,field:j,value:k}}return{prefix:null,field:null,value:null}};f.HtmlUtil.loadFirstExtension=function(b,a){for(var c=0;c<b.length;){var h=b[c];++c;h=f.HtmlUtil.loadExtension(h,a);if(null!=h.field)return h}return{prefix:null,field:null,value:null}};f.HtmlUtil.polyfill=function(b,a){null==a&&(a=m.window);var c=f.HtmlUtil.loadExtension(b,a).value;if(null==c)return!1;a[b]=c;return!0};f.HtmlUtil.setVendorStyle=function(b,a,c){for(var b=b.style,h=0,g=f.HtmlUtil.VENDOR_PREFIXES;h<g.length;){var i=g[h];++h;b.setProperty("-"+i+"-"+a,c)}b.setProperty(a,c)};f.HtmlUtil.addVendorListener=function(b,a,c,h){for(var g=0,i=f.HtmlUtil.VENDOR_PREFIXES;g<i.length;){var j=i[g];++g;b.addEventListener(j+a,c,h)}b.addEventListener(a,c,h)};f.HtmlUtil.orientation=function(b){switch(b){case-90:case 90:return M.Landscape;default:return M.Portrait}};f.HtmlUtil.createEmptyCanvas=function(b,a){var c=m.document.createElement("canvas");c.width=b;c.height=a;return c};f.HtmlUtil.createCanvas=function(b){var a=f.HtmlUtil.createEmptyCanvas(b.width,b.height),c=a.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(b,0,0);c.restore();return a};fb=function(){};pa=void 0;g["flambe.web.Web"]=fb;fb.__name__=["flambe","web","Web"];fb.prototype={__class__:fb};f.HtmlWeb=function(b){this._container=b};g["flambe.platform.html.HtmlWeb"]=f.HtmlWeb;f.HtmlWeb.__name__=["flambe","platform","html","HtmlWeb"];f.HtmlWeb.__interfaces__=[fb];f.HtmlWeb.prototype={openBrowser:function(b){m.window.open(b,"_blank")},createView:function(b,a,c,h){var g=m.document.createElement("iframe");g.style.position="absolute";g.style.border="0";g.scrolling="no";this._container.appendChild(g);b=new f.HtmlWebView(g,b,a,c,h);f.HtmlPlatform.instance.mainLoop.addTickable(b);return b},get_supported:function(){return!0},__class__:f.HtmlWeb};pa=function(){};g["flambe.web.WebView"]=pa;pa.__name__=["flambe","web","WebView"];pa.__interfaces__=[$];pa.prototype={__class__:pa};f.HtmlWebView=function(b,a,c,h,f){var g=this;this.iframe=b;b=function(){g.updateBounds()};this.x=new B(a,b);this.y=new B(c,b);this.width=new B(h,b);this.height=new B(f,b);this.updateBounds();this.url=new C(null,function(b){g.loadUrl(b)});this.error=new x};g["flambe.platform.html.HtmlWebView"]=f.HtmlWebView;f.HtmlWebView.__name__=["flambe","platform","html","HtmlWebView"];f.HtmlWebView.__interfaces__=[ka,pa];f.HtmlWebView.prototype={loadUrl:function(b){null!=this.iframe&&(this.iframe.src=b)},updateBounds:function(){null!=this.iframe&&(this.iframe.style.left=this.x._value+"px",this.iframe.style.top=this.y._value+"px",this.iframe.width=this.width._value,this.iframe.height=this.height._value)},update:function(b){this.x.update(b);this.y.update(b);this.width.update(b);this.height.update(b);return null==this.iframe},dispose:function(){null!=this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=null)},__class__:f.HtmlWebView};f.WebAudioSound=function(b){this.buffer=b};g["flambe.platform.html.WebAudioSound"]=f.WebAudioSound;f.WebAudioSound.__name__=["flambe","platform","html","WebAudioSound"];f.WebAudioSound.__interfaces__=[qa];f.WebAudioSound.get_supported=function(){if(f.WebAudioSound._detectSupport){f.WebAudioSound._detectSupport=!1;}return null!=f.WebAudioSound.ctx};f.WebAudioSound.prototype={get_duration:function(){return this.buffer.duration},loop:function(b){null==b&&(b=1);return new f._WebAudioSound.WebAudioPlayback(this,b,!0)},play:function(b){null==b&&(b=1);return new f._WebAudioSound.WebAudioPlayback(this,b,!1)},__class__:f.WebAudioSound};f._WebAudioSound={};f._WebAudioSound.WebAudioPlayback=function(b,a,c){var h=this;this._sound=b;this._head=f.WebAudioSound.gain;this._sourceNode=f.WebAudioSound.ctx.createBufferSource();this._sourceNode.buffer=b.buffer;this._sourceNode.loop=c;this._sourceNode.noteOn(0);this.playAudio();this.volume=new B(a,function(b){h.setVolume(b)});1!=a&&this.setVolume(a)};g["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=f._WebAudioSound.WebAudioPlayback;f._WebAudioSound.WebAudioPlayback.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];f._WebAudioSound.WebAudioPlayback.__interfaces__=[ka,ba];f._WebAudioSound.WebAudioPlayback.prototype={playAudio:function(){var b=this;this._sourceNode.connect(this._head);this._startedAt=f.WebAudioSound.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(f.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=k.hidden.get_changed().connect(function(a){a?(b._wasPaused=0<=b._pausedAt,b.set_paused(!0)):b.set_paused(b._wasPaused)}))},insertNode:function(b){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(b));b.connect(this._head);this._head=b},setVolume:function(b){null==this._gainNode&&(this._gainNode=f.WebAudioSound.ctx.createGainNode(),this.insertNode(this._gainNode));this._gainNode.gain.value=b},dispose:function(){this.set_paused(!0)},update:function(b){this.volume.update(b);return 3==this._sourceNode.playbackState||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},get_position:function(){return 3==this._sourceNode.playbackState?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(f.WebAudioSound.ctx.currentTime-
this._startedAt)%this._sound.get_duration()},get_ended:function(){return 3==this._sourceNode.playbackState},set_paused:function(b){b!=0<=this._pausedAt&&(b?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return b},get_paused:function(){return 0<=this._pausedAt},get_sound:function(){return this._sound},__class__:f._WebAudioSound.WebAudioPlayback};cb=function(){this._width=this._height=-1;this._transitor=null;this.scenes=[];this.occludedScenes=[];this._root=new D};db=void 0;Ga=void 0;eb=void 0;g["flambe.scene.Director"]=cb;cb.__name__=["flambe","scene","Director"];cb.__super__=y;cb.prototype=r(y.prototype,{get_height:function(){return 0>this._height?k._platform.getStage().get_height():this._height},get_width:function(){return 0>this._width?k._platform.getStage().get_width():this._width},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},invalidateVisibility:function(){for(var b=this.scenes.length;0<b;){var a=this.scenes[--b],a=a._compMap.Scene_11;if(null==a||a.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(b,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},show:function(b){b=b._compMap.Scene_11;null!=b&&b.shown.emit0()},get_topScene:function(){var b=this.scenes.length;return 0<b?this.scenes[b-1]:null},onUpdate:function(b){null!=this._transitor&&this._transitor.update(b)&&this.completeTransition()},onRemoved:function(){this.completeTransition();for(var b=0,a=this.scenes;b<a.length;){var c=a[b];++b;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onAdded:function(){this.owner.addChild(this._root)},get_name:function(){return"Director_0"},__class__:cb});db={Transitor:function(){}};g["flambe.scene._Director.Transitor"]=db.Transitor;db.Transitor.__name__=["flambe","scene","_Director","Transitor"];db.Transitor.prototype={complete:function(){this._transition.complete();this._onComplete()},update:function(b){return this._transition.update(b)},__class__:db.Transitor};Ga=function(b){null==b&&(b=!0);this.opaque=b;this.shown=new N;this.hidden=new N};g["flambe.scene.Scene"]=Ga;Ga.__name__=["flambe","scene","Scene"];Ga.__super__=y;Ga.prototype=r(y.prototype,{get_name:function(){return"Scene_11"},__class__:Ga});eb=function(){};g["flambe.scene.Transition"]=eb;eb.__name__=["flambe","scene","Transition"];eb.prototype={complete:function(){},update:function(){return!0},__class__:eb};Ba=function(b){v.call(this);this.symbol=b;this.anchorX.set__(b.anchorX);this.anchorY.set__(b.anchorY)};g["flambe.swf.BitmapSprite"]=Ba;Ba.__name__=["flambe","swf","BitmapSprite"];Ba.__super__=v;Ba.prototype=r(v.prototype,{getNaturalHeight:function(){return this.symbol.height},getNaturalWidth:function(){return this.symbol.width},draw:function(b){b.drawSubImage(this.symbol.atlas,0,0,this.symbol.x,this.symbol.y,this.symbol.width,this.symbol.height)},__class__:Ba});Sa=function(){};g["flambe.swf.BitmapSymbol"]=Sa;Sa.__name__=["flambe","swf","BitmapSymbol"];Sa.__interfaces__=[Aa];Sa.prototype={get_name:function(){return this._name},createSprite:function(){return new Ba(this)},__class__:Sa};rb=function(){};g["flambe.util.Arrays"]=rb;rb.__name__=["flambe","util","Arrays"];sb=function(){};g["flambe.util.Assert"]=sb;sb.__name__=["flambe","util","Assert"];Ea=function(){};g["flambe.util.BitSets"]=Ea;Ea.__name__=["flambe","util","BitSets"];Ea.set=function(b,a,c){return c?b|a:b&~a};mb=function(){};g["flambe.util.LogHandler"]=mb;mb.__name__=["flambe","util","LogHandler"];mb.prototype={__class__:mb};Fa=function(){this.success=new x;this.error=new x;this.progressChanged=new N;this.hasResult=!1;this._total=this._progress=0};g["flambe.util.Promise"]=Fa;Fa.__name__=["flambe","util","Promise"];Fa.prototype={set_total:function(b){this._total!=b&&(this._total=b,this.progressChanged.emit0());return b},set_progress:function(b){this._progress!=b&&(this._progress=b,this.progressChanged.emit0());return b},get:function(b){return this.hasResult?(b(this._result),null):this.success.connect(b).once()},set_result:function(b){if(this.hasResult)throw"Promise result already assigned";this._result=b;this.hasResult=!0;this.success.emit1(b);return b},get_result:function(){if(!this.hasResult)throw"Promise result not yet available";return this._result},__class__:Fa};Ya=function(b){this._state=null!=b?b:Math.floor(2147483647*Math.random())};g["flambe.util.Random"]=Ya;Ya.__name__=["flambe","util","Random"];Ya.prototype={nextFloat:function(){return this.nextInt()/2147483647},nextInt:function(){return this._state=(1103515245*this._state+12345)%2147483647},__class__:Ya};N=function(b){J.call(this,b)};g["flambe.util.Signal0"]=N;N.__name__=["flambe","util","Signal0"];N.__super__=J;N.prototype=r(J.prototype,{connect:function(b,a){null==a&&(a=!1);return this.connectImpl(b,a)},__class__:N});Xa={Task:function(b){this.next=null;this.fn=b}};g["flambe.util._SignalBase.Task"]=Xa.Task;Xa.Task.__name__=["flambe","util","_SignalBase","Task"];Xa.Task.prototype={__class__:Xa.Task};ma=void 0;$a=void 0;aa=void 0;V=void 0;K=void 0;W=void 0;aa=function(){};g["haxe.Json"]=aa;aa.__name__=["haxe","Json"];aa.parse=function(b){return(new aa).doParse(b)};aa.prototype={parseString:function(){for(var b=this.pos,a=new ab;;){var c=this.str.charCodeAt(this.pos++);if(34==c)break;if(92==c){a.b+=u.substr(this.str,b,this.pos-b-1);c=this.str.charCodeAt(this.pos++);switch(c){case 114:a.b+=String.fromCharCode(13);break;case 110:a.b+=String.fromCharCode(10);break;case 116:a.b+=String.fromCharCode(9);break;case 98:a.b+=String.fromCharCode(8);break;case 102:a.b+=String.fromCharCode(12);break;case 47:case 92:case 34:a.b+=String.fromCharCode(c);break;case 117:b=n.parseInt("0x"+u.substr(this.str,this.pos,4));this.pos+=4;a.b+=String.fromCharCode(b);break;default:throw"Invalid escape sequence \\"+String.fromCharCode(c)+" at position "+(this.pos-1);}b=this.pos}else if(c!=c)throw"Unclosed string";}a.b+=u.substr(this.str,b,this.pos-b-1);return a.b},parseRec:function(){for(;;)switch(this.str.charCodeAt(this.pos++)){case 32:case 13:case 10:case 9:break;case 123:for(var b={},a=null,c=null;;){var h=this.str.charCodeAt(this.pos++);switch(h){case 32:case 13:case 10:case 9:break;case 125:return(null!=a||!1==c)&&this.invalidChar(),b;case 58:null==a&&this.invalidChar();b[a]=this.parseRec();a=null;c=!0;break;case 44:c?c=!1:this.invalidChar();break;case 34:c&&this.invalidChar();a=this.parseString();break;default:this.invalidChar()}}break;case 91:b=[];for(c=null;;)switch(h=this.str.charCodeAt(this.pos++),h){case 32:case 13:case 10:case 9:break;case 93:return!1==c&&this.invalidChar(),b;case 44:c?c=!1:this.invalidChar();break;default:c&&this.invalidChar(),this.pos--,b.push(this.parseRec()),c=!0}break;case 116:c=this.pos;if(114!=this.str.charCodeAt(this.pos++)||117!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=c,this.invalidChar();return!0;case 102:c=this.pos;if(97!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||115!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=c,this.invalidChar();return!1;case 110:c=this.pos;if(117!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++))this.pos=c,this.invalidChar();return null;case 34:return this.parseString();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 45:this.pos--;if(!this.reg_float.match(u.substr(this.str,this.pos,null)))throw"Invalid float at position "+this.pos;c=this.reg_float.matched(0);this.pos+=c.length;c=n.parseFloat(c);h=c|0;return h==c?h:c;default:this.invalidChar()}},invalidChar:function(){this.pos--;throw"Invalid char "+this.str.charCodeAt(this.pos)+" at position "+this.pos;},doParse:function(b){this.reg_float=new na("^-?(0|[1-9][0-9]*)(\\.[0-9]+)?([eE][+-]?[0-9]+)?","");this.str=b;this.pos=0;return this.parseRec()},__class__:aa};W=function(){this.buf=new ab;this.cache=[];this.useCache=W.USE_CACHE;this.useEnumIndex=W.USE_ENUM_INDEX;this.shash=new A;this.scount=0};g["haxe.Serializer"]=W;W.__name__=["haxe","Serializer"];W.prototype={serialize:function(b){var a=z["typeof"](b);switch(a[1]){case 0:this.buf.b+=n.string("n");break;case 1:if(0==b){this.buf.b+=n.string("z");break}this.buf.b+=n.string("i");this.buf.b+=n.string(b);break;case 2:Math.isNaN(b)?this.buf.b+=n.string("k"):Math.isFinite(b)?(this.buf.b+=n.string("d"),this.buf.b+=n.string(b)):this.buf.b+=n.string(0>b?"m":"p");break;case 3:this.buf.b+=n.string(b?"t":"f");break;case 6:a=a[2];if(a==String){this.serializeString(b);break}if(this.useCache&&this.serializeRef(b))break;switch(a){case Array:var c=0;this.buf.b+=n.string("a");for(var h=b.length,f=0;f<h;)a=f++,null==b[a]?c++:(0<c&&(1==c?this.buf.b+=n.string("n"):(this.buf.b+=n.string("u"),this.buf.b+=n.string(c)),c=0),this.serialize(b[a]));0<c&&(1==c?this.buf.b+=n.string("n"):(this.buf.b+=n.string("u"),this.buf.b+=n.string(c)));this.buf.b+=n.string("h");break;case ob:this.buf.b+=n.string("l");for(b=b.iterator();b.hasNext();)a=b.next(),this.serialize(a);this.buf.b+=n.string("h");break;case Date:this.buf.b+=n.string("v");this.buf.b+=n.string(u.dateStr(b));break;case A:this.buf.b+=n.string("b");for(c=b.keys();c.hasNext();)a=c.next(),this.serializeString(a),this.serialize(b.get(a));this.buf.b+=n.string("h");break;case ga:this.buf.b+=n.string("q");for(c=b.keys();c.hasNext();)a=c.next(),this.buf.b+=n.string(":"),this.buf.b+=n.string(a),this.serialize(b.get(a));this.buf.b+=n.string("h");break;case V.Bytes:a=0;c=b.length-2;h=new ab;for(f=W.BASE64;a<c;){var g=b.b[a++],i=b.b[a++],j=b.b[a++];h.b+=n.string(f.charAt(g>>2));h.b+=n.string(f.charAt((g<<4|i>>4)&63));h.b+=n.string(f.charAt((i<<2|j>>6)&63));h.b+=n.string(f.charAt(j&63))}a==c?(g=b.b[a++],i=b.b[a++],h.b+=n.string(f.charAt(g>>2)),h.b+=n.string(f.charAt((g<<4|i>>4)&63)),h.b+=n.string(f.charAt(i<<2&63))):a==c+1&&(g=b.b[a++],h.b+=n.string(f.charAt(g>>2)),h.b+=n.string(f.charAt(g<<4&63)));a=h.b;this.buf.b+=n.string("s");this.buf.b+=n.string(a.length);this.buf.b+=n.string(":");this.buf.b+=n.string(a);break;default:this.cache.pop(),null!=b.hxSerialize?(this.buf.b+=n.string("C"),this.serializeString(z.getClassName(a)),this.cache.push(b),b.hxSerialize(this),this.buf.b+=n.string("g")):(this.buf.b+=n.string("c"),this.serializeString(z.getClassName(a)),this.cache.push(b),this.serializeFields(b))}break;case 4:if(this.useCache&&this.serializeRef(b))break;this.buf.b+=n.string("o");this.serializeFields(b);break;case 7:a=a[2];if(this.useCache&&this.serializeRef(b))break;this.cache.pop();this.buf.b+=n.string(this.useEnumIndex?"j":"w");this.serializeString(z.getEnumName(a));this.useEnumIndex?(this.buf.b+=n.string(":"),this.buf.b+=n.string(b[1])):this.serializeString(b[0]);this.buf.b+=n.string(":");h=b.length;this.buf.b+=n.string(h-2);for(f=2;f<h;)a=f++,this.serialize(b[a]);this.cache.push(b);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+n.string(b);}},serializeFields:function(b){for(var a=0,c=O.fields(b);a<c.length;){var f=c[a];++a;this.serializeString(f);this.serialize(O.field(b,f))}this.buf.b+=n.string("g")},serializeRef:function(b){for(var a=typeof b,c=0,f=this.cache.length;c<f;){var g=c++,i=this.cache[g];if(typeof i==a&&i==b)return this.buf.b+=n.string("r"),this.buf.b+=n.string(g),!0}this.cache.push(b);return!1},serializeString:function(b){var a=this.shash.get(b);null!=a?(this.buf.b+=n.string("R"),this.buf.b+=n.string(a)):(this.shash.set(b,this.scount++),this.buf.b+=n.string("y"),b=Y.urlEncode(b),this.buf.b+=n.string(b.length),this.buf.b+=n.string(":"),this.buf.b+=n.string(b))},toString:function(){return this.buf.b},__class__:W};$a=function(b){var a=this;this.id=window.setInterval(function(){a.run()},b)};g["haxe.Timer"]=$a;$a.__name__=["haxe","Timer"];$a.prototype={run:function(){},__class__:$a};K=function(b){this.buf=b;this.length=b.length;this.pos=0;this.scache=[];this.cache=[];b=K.DEFAULT_RESOLVER;null==b&&(b=z,K.DEFAULT_RESOLVER=b);this.setResolver(b)};g["haxe.Unserializer"]=K;K.__name__=["haxe","Unserializer"];K.initCodes=function(){for(var b=[],a=0,c=K.BASE64.length;a<c;){var f=a++;b[K.BASE64.charCodeAt(f)]=f}return b};K.run=function(b){return(new K(b)).unserialize()};K.prototype={unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var b=this.pos;;){var a=this.buf.charCodeAt(this.pos);if(43<=a&&58>a||101==a||69==a)this.pos++;else break}return n.parseFloat(u.substr(this.buf,b,this.pos-b));case 121:a=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw"Invalid string length";b=u.substr(this.buf,this.pos,a);this.pos+=a;b=Y.urlDecode(b);this.scache.push(b);return b;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var c=this.buf,b=[];for(this.cache.push(b);;){a=this.buf.charCodeAt(this.pos);if(104==a){this.pos++;break}117==a?(this.pos++,a=this.readDigits(),b[b.length+a-1]=null):b.push(this.unserialize())}return b;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw"Invalid reference";return this.cache[a];case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw"Invalid string reference";return this.scache[a];case 120:throw this.unserialize();case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=z.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;this.pos++;var c=this.readDigits(),f=z.getEnumConstructs(b)[c];if(null==f)throw"Unknown enum index "+a+"@"+c;a=this.unserializeEnum(b,f);this.cache.push(a);return a;case 108:a=new ob;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 98:c=new A;for(this.cache.push(c);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),c.set(b,this.unserialize());this.pos++;return c;case 113:c=new ga;this.cache.push(c);for(a=this.buf.charCodeAt(this.pos++);58==a;)b=this.readDigits(),c.set(b,this.unserialize()),a=this.buf.charCodeAt(this.pos++);if(104!=a)throw"Invalid IntHash format";return c;case 118:return a=u.strDate(u.substr(this.buf,this.pos,19)),this.cache.push(a),this.pos+=19,a;case 115:a=this.readDigits();c=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw"Invalid bytes length";f=K.CODES;null==f&&(f=K.initCodes(),K.CODES=f);for(var b=this.pos,g=a&3,i=b+(a-g),j=V.Bytes.alloc(3*(a>>2)+(2<=g?g-1:0)),k=0;b<i;){var p=f[c.charCodeAt(b++)],m=f[c.charCodeAt(b++)];j.b[k++]=(p<<2|m>>4)&255;p=f[c.charCodeAt(b++)];j.b[k++]=(m<<4|p>>2)&255;m=f[c.charCodeAt(b++)];j.b[k++]=(p<<6|m)&255}2<=g&&(p=f[c.charCodeAt(b++)],m=f[c.charCodeAt(b++)],j.b[k++]=(p<<2|m>>4)&255,3==g&&(p=f[c.charCodeAt(b++)],j.b[k++]=(m<<4|p>>2)&255));this.pos+=a;this.cache.push(j);return j;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=z.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw"Invalid custom data";return a}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},unserializeEnum:function(a,c){if(58!=this.buf.charCodeAt(this.pos++))throw"Invalid enum format";var e=this.readDigits();if(0==e)return z.createEnum(a,c);for(var f=[];0<e--;)f.push(this.unserialize());return z.createEnum(a,c,f)},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var c=this.unserialize();if(!t.__instanceof(c,String))throw"Invalid object key";var e=this.unserialize();a[c]=e}this.pos++},readDigits:function(){for(var a=0,c=!1,e=this.pos;;){var f=this.buf.charCodeAt(this.pos);if(f!=f)break;if(45==f){if(this.pos!=e)break;c=!0}else{if(48>f||57<f)break;a=10*a+(f-48)}this.pos++}c&&(a*=-1);return a},setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},__class__:K};V={Bytes:function(a,c){this.length=a;this.b=c}};g["haxe.io.Bytes"]=V.Bytes;V.Bytes.__name__=["haxe","io","Bytes"];V.Bytes.alloc=function(a){for(var c=[],e=0;e<a;)e++,c.push(0);return new V.Bytes(a,c)};V.Bytes.ofData=function(a){return new V.Bytes(a.length,a)};V.Bytes.prototype={__class__:V.Bytes};ma={Parser:function(){}};g["haxe.xml.Parser"]=ma.Parser;ma.Parser.__name__=["haxe","xml","Parser"];ma.Parser.parse=function(a){var c=s.createDocument();ma.Parser.doParse(a,0,c);return c};ma.Parser.doParse=function(a,c,e){null==c&&(c=0);for(var f=null,g=1,i=1,j=null,k=0,n=0,p=0,m=a.charCodeAt(c);m==m;){switch(g){case 0:switch(m){case 10:case 13:case 9:case 32:break;default:g=i;continue}break;case 1:switch(m){case 60:g=0;i=2;break;default:k=c;g=13;continue}break;case 13:60==m&&(g=s.createPCData(u.substr(a,k,c-k)),e.addChild(g),n++,g=0,i=2);break;case 17:93==m&&93==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2)&&(g=s.createCData(u.substr(a,k,c-k)),e.addChild(g),n++,c+=2,g=1);break;case 2:switch(m){case 33:if(91==a.charCodeAt(c+1)){c+=2;if("CDATA["!=u.substr(a,c,6).toUpperCase())throw"Expected <![CDATA[";c+=5;g=17}else if(68==a.charCodeAt(c+1)||100==a.charCodeAt(c+1)){if("OCTYPE"!=u.substr(a,c+2,6).toUpperCase())throw"Expected <!DOCTYPE";c+=8;g=16}else{if(45!=a.charCodeAt(c+1)||45!=a.charCodeAt(c+2))throw"Expected <\!--";c+=2;g=15}k=c+1;break;case 63:g=14;k=c;break;case 47:if(null==e)throw"Expected node name";k=c+1;g=0;i=10;break;default:g=3;k=c;continue}break;case 3:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(c==k)throw"Expected node name";f=s.createElement(u.substr(a,k,c-k));e.addChild(f);g=0;i=4;continue}break;case 4:switch(m){case 47:g=11;n++;break;case 62:g=9;n++;break;default:g=5;k=c;continue}break;case 5:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(k==c)throw"Expected attribute name";j=u.substr(a,k,c-k);if(f.exists(j))throw"Duplicate attribute";g=0;i=6;continue}break;case 6:switch(m){case 61:g=0;i=7;break;default:throw"Expected =";}break;case 7:switch(m){case 34:case 39:g=8;k=c;break;default:throw'Expected "';}break;case 8:m==a.charCodeAt(k)&&(i=u.substr(a,k+1,c-k-1),f.set(j,i),g=0,i=4);break;case 9:k=c=ma.Parser.doParse(a,c,f);g=1;break;case 11:switch(m){case 62:g=1;break;default:throw"Expected >";}break;case 12:switch(m){case 62:return 0==n&&e.addChild(s.createPCData("")),c;default:throw"Expected >";}case 10:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(k==c)throw"Expected node name";if(u.substr(a,k,c-k)!=e.getNodeName())throw"Expected </"+e.getNodeName()+">";g=0;i=12;continue}break;case 15:45==m&&45==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2)&&(e.addChild(s.createComment(u.substr(a,k,c-k))),c+=2,g=1);break;case 16:91==m?p++:93==m?p--:62==m&&0==p&&(e.addChild(s.createDocType(u.substr(a,k,c-k))),g=1);break;case 14:63==m&&62==a.charCodeAt(c+1)&&(c++,g=u.substr(a,k+1,c-k-2),e.addChild(s.createProlog(g)),g=1)}m=a.charCodeAt(++c)}1==g&&(k=c,g=13);if(13==g)return(c!=k||0==n)&&e.addChild(s.createPCData(u.substr(a,k,c-k))),c;throw"Unexpected end";};var vb;Array.prototype.indexOf?u.remove=function(a,c){var e=a.indexOf(c);if(-1==e)return!1;a.splice(e,1);return!0}:null;Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;g.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=g.String=String;String.__name__=["String"];Array.prototype.__class__=g.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=g.Date=Date;Date.__name__=["Date"];var tb=g.Int={__name__:["Int"]},zb=g.Dynamic={__name__:["Dynamic"]},wb=g.Float=Number;wb.__name__=["Float"];var xb=g.Bool=Boolean;xb.__ename__=["Bool"];var Ab=g.Class={__name__:["Class"]},Bb={};s.Element="element";s.PCData="pcdata";s.CData="cdata";s.Comment="comment";s.DocType="doctype";s.Prolog="prolog";s.Document="document";"undefined"!=typeof document&&(m.document=document);"undefined"!=typeof window&&(m.window=window,m.window.onerror=function(a,c,e){var f=m.onerror;return null==f?!1:f(a,[c+":"+e])});"undefined"!=typeof JSON&&(aa=JSON);j.DEFAULT_BG_COLOR=0;j.DEFAULT_WIDTH=750;j.DEFAULT_HEIGHT=500;j.GLOBAL_SCALE=1;j.ASSET_SCALE=1;j.ASSET_SCALE_INV=0;a.common.app.Wrapper.IPHONE4_SCALE=1;J.DISPATCHING_SENTINEL=new fa(null,null);a.common.app.games.GameGlobals.__meta__={obj:{"final":null}};a.common.app.games.GameGlobals.score=new C(0);a.common.app.games.GameGlobals.prevLevelScore=new C(0);a.common.app.games.GameGlobals.currentLevel=new C(1);a.common.app.games.GameGlobals.lastLevel=new C(5);a.common.app.games.GameGlobals.timeLeft=new C(0);a.common.app.games.GameGlobals.maxTime=new C(66);a.common.audio.SoundPlayerRemote._soundFilesHashByID=new A;a.common.audio.SoundPlayerRemote._soundFilesHashByFilename=new A;a.common.audio.SoundPlayerRemote._soundClipChannels=new A;a.common.audio.SoundPlayerRemote.path="";a.common.audio.SoundPlayerRemote.entity=new D;a.common.audio.SoundPlayerRemote._unmutedBeforeFocusOut=[];a.common.audio.SoundPlayerRemote.isMuted=!1;a.common.audio.SoundPlayerRemote.iOS5AudioIDs=[];a.common.audio.SoundPlayerRemote._playediOS5Audio=!1;a.common.audio.SoundPlayerRemote._ios5AudioMuted=!1;a.common.audio.SoundPlayerRemote._ios5AudioMutedBeforeFocusOut=!1;v._scratchPoint=new H;a.common.display.SpriteContainer._instanceNum=0;a.common.display.SpriteContainer._connectedGlobalPointerUp=!1;a.common.event.EDispatcher._signals=new A;a.common.event.EDispatcher._signalConnections=new A;a.common.io.LoadMaster._manifestHash=new A;a.common.io.LoadMaster._assetPackHash=new A;a.common.text.DynamicTextLibrary._txtDict=new A;a.tbm_bbs.TBM_BBS_Game.smallScreen=!1;a.tbm_bbs.TBM_BBS_Game.calledTransitionFunc=!1;a.tbm_bbs.game.HiddenObjectsDisplay.specialObjectsFound=[];a.tbm_bbs.game.MiniGame.GlobalPointerDown=!1;a.tbm_bbs.utils.BrowserDetect.__meta__={obj:{"final":null}};a.tbm_bbs.utils.BrowserDetect.isMobile=!1;a.tbm_bbs.utils.BrowserDetect.browserType="Unknown";a.tbm_bbs.utils.BrowserDetect.browserVersion=-1;a.tbm_bbs.utils.BrowserDetect.platformType="Unknown";a.tbm_bbs.utils.BrowserDetect.platformVersion=-1;a.tbm_bbs.utils.BrowserDetect.iPhone4=!1;a.tbm_bbs.utils.BrowserDetect.iPhoneVersion=-1;a.tbm_bbs.utils.TimeUtil.__meta__={obj:{"final":null}};f.HtmlPlatform.instance=new f.HtmlPlatform;k.root=new D;k.uncaughtError=new x;k.hidden=new C(!1);k.hasGPU=new C(!1);k.volume=new B(1);k._platform=f.HtmlPlatform.instance;k._calledInit=!1;bb.logger=new Za(k._platform.createLogHandler("flambe"));I._buildManifest=I.createBuildManifests();var Cb=I,yb;yb=(new na("\\b(Android)\\b","")).match(m.window.navigator.userAgent)?!1:null!=(new XMLHttpRequest).withCredentials;Cb._supportsCrossOrigin=yb;Q._sharedEvent=new Ka;L._sharedEvent=new ra;G._sharedEvent=new sa;f.CanvasRenderer.CANVAS_TEXTURES=(new na("(iPhone|iPod|iPad)","")).match(m.window.navigator.userAgent);f.HtmlAssetPackLoader._mediaRefCount=0;f.HtmlAssetPackLoader._detectBlobSupport=!0;f.HtmlUtil.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];f.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER=m.window.top==m.window&&(new na("Mobile(/.*)? Safari","")).match(m.window.navigator.userAgent);f.WebAudioSound._detectSupport=!0;W.USE_CACHE=!1;W.USE_ENUM_INDEX=!1;W.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";K.DEFAULT_RESOLVER=z;K.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";j.main()})();