function initXMLhttp(){var a;return a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}function minAjax(a){if(!a.url)return void(1==a.debugLog&&console.log("No Url!"));if(!a.type)return void(1==a.debugLog&&console.log("No Default type (GET/POST) given!"));a.method||(a.method=!0),a.debugLog||(a.debugLog=!1);var b=initXMLhttp();b.onreadystatechange=function(){4==b.readyState&&200==b.status?(a.success&&a.success(b.responseText,b.readyState),1==a.debugLog&&console.log("SuccessResponse"),1==a.debugLog&&console.log("Response Data:"+b.responseText)):1==a.debugLog&&console.log("FailureResponse --> State:"+b.readyState+"Status:"+b.status)};var c=[],d=a.data;if("string"==typeof d)for(var e=String.prototype.split.call(d,"&"),f=0,g=e.length;g>f;f++){var h=e[f].split("=");c.push(encodeURIComponent(h[0])+"="+encodeURIComponent(h[1]))}else if("object"==typeof d&&!(d instanceof String||FormData&&d instanceof FormData))for(var i in d){var h=d[i];if("[object Array]"==Object.prototype.toString.call(h))for(var f=0,g=h.length;g>f;f++)c.push(encodeURIComponent(i)+"[]="+encodeURIComponent(h[f]));else c.push(encodeURIComponent(i)+"="+encodeURIComponent(h))}c=c.join("&"),"GET"==a.type&&(b.open("GET",a.url+"?"+c,a.method),b.send(),1==a.debugLog&&console.log("GET fired at:"+a.url+"?"+c)),"POST"==a.type&&(b.open("POST",a.url,a.method),b.setRequestHeader(a.requestType,a.requestValue),b.send(c),1==a.debugLog&&console.log("POST fired at:"+a.url+" || Data:"+c))}!function(){"use strict";function a(){try{"undefined"!=typeof AudioContext?b=new AudioContext:"undefined"!=typeof webkitAudioContext?b=new webkitAudioContext:c=!1}catch(a){c=!1}if(!c)if("undefined"!=typeof Audio)try{new Audio}catch(a){d=!0}else d=!0}var b=null,c=!0,d=!1;if(a(),c){var e="undefined"==typeof b.createGain?b.createGainNode():b.createGain();e.gain.value=1,e.connect(b.destination)}var f=function(){this.init()};f.prototype={init:function(){var a=this||g;return a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a.iOSAutoEnable=!0,a.noAudio=d,a.usingWebAudio=c,a.ctx=b,d||a._setupCodecs(),a},volume:function(a){var b=this||g;if(a=parseFloat(a),"undefined"!=typeof a&&a>=0&&1>=a){b._volume=a,c&&(e.gain.value=a);for(var d=0;d<b._howls.length;d++)if(!b._howls[d]._webAudio)for(var f=b._howls[d]._getSoundIds(),h=0;h<f.length;h++){var i=b._howls[d]._soundById(f[h]);i&&i._node&&(i._node.volume=i._volume*a)}return b}return b._volume},mute:function(a){var b=this||g;b._muted=a,c&&(e.gain.value=a?0:b._volume);for(var d=0;d<b._howls.length;d++)if(!b._howls[d]._webAudio)for(var f=b._howls[d]._getSoundIds(),h=0;h<f.length;h++){var i=b._howls[d]._soundById(f[h]);i&&i._node&&(i._node.muted=a?!0:i._muted)}return b},codecs:function(a){return(this||g)._codecs[a]},_setupCodecs:function(){var a=this||g,b=new Audio,c=b.canPlayType("audio/mpeg;").replace(/^no$/,"");return a._codecs={mp3:!(!c&&!b.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!c,opus:!!b.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!b.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!b.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!b.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(b.canPlayType("audio/x-m4a;")||b.canPlayType("audio/m4a;")||b.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(b.canPlayType("audio/x-mp4;")||b.canPlayType("audio/mp4;")||b.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!b.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!b.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")},a},_enableiOSAudio:function(){var a=this||g;if(!b||!a._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){a._iOSEnabled=!1;var c=function(){var d=b.createBuffer(1,1,22050),e=b.createBufferSource();e.buffer=d,e.connect(b.destination),"undefined"==typeof e.start?e.noteOn(0):e.start(0),setTimeout(function(){e.playbackState!==e.PLAYING_STATE&&e.playbackState!==e.FINISHED_STATE||(a._iOSEnabled=!0,a.iOSAutoEnable=!1,window.removeEventListener("touchstart",c,!1))},0)};return window.addEventListener("touchstart",c,!1),a}}};var g=new f,h=function(a){var b=this;return a.src&&0!==a.src.length?void b.init(a):void console.error("An array of source files must be passed with any new Howl.")};h.prototype={init:function(a){var d=this;return d._autoplay=a.autoplay||!1,d._ext=a.ext||null,d._html5=a.html5||!1,d._muted=a.mute||!1,d._loop=a.loop||!1,d._pool=a.pool||5,d._preload="boolean"==typeof a.preload?a.preload:!0,d._rate=a.rate||1,d._sprite=a.sprite||{},d._src="string"!=typeof a.src?a.src:[a.src],d._volume=void 0!==a.volume?a.volume:1,d._duration=0,d._loaded=!1,d._sounds=[],d._endTimers={},d._onend=a.onend?[{fn:a.onend}]:[],d._onfaded=a.onfaded?[{fn:a.onfaded}]:[],d._onload=a.onload?[{fn:a.onload}]:[],d._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],d._onpause=a.onpause?[{fn:a.onpause}]:[],d._onplay=a.onplay?[{fn:a.onplay}]:[],d._webAudio=c&&!d._html5,"undefined"!=typeof b&&b&&g.iOSAutoEnable&&g._enableiOSAudio(),g._howls.push(d),d._preload&&d.load(),d},load:function(){var a=this,b=null;if(d)return void a._emit("loaderror");"string"==typeof a._src&&(a._src=[a._src]);for(var c=0;c<a._src.length;c++){var e,f;if(a._ext&&a._ext[c]?e=a._ext[c]:(f=a._src[c],e=/^data:audio\/([^;,]+);/i.exec(f),e||(e=/\.([^.]+)$/.exec(f.split("?",1)[0])),e&&(e=e[1].toLowerCase())),g.codecs(e)){b=a._src[c];break}}return b?(a._src=b,new i(a),a._webAudio&&k(a),a):void a._emit("loaderror")},play:function(a){var c=this,d=arguments,e=null;if("number"==typeof a)e=a,a=null;else if("undefined"==typeof a){a="__default";for(var f=0,h=0;h<c._sounds.length;h++)c._sounds[h]._paused&&!c._sounds[h]._ended&&(f++,e=c._sounds[h]._id);1===f?a=null:e=null}var i=e?c._soundById(e):c._inactiveSound();if(!i)return null;if(e&&!a&&(a=i._sprite||"__default"),!c._loaded&&!c._sprite[a])return c.once("load",function(){c.play(c._soundById(i._id)?i._id:void 0)}),i._id;if(e&&!i._paused)return i._id;var j=i._seek>0?i._seek:c._sprite[a][0]/1e3,k=(c._sprite[a][0]+c._sprite[a][1])/1e3-j,l=function(){var d=!(!i._loop&&!c._sprite[a][2]);c._emit("end",i._id),!c._webAudio&&d&&c.stop(i._id).play(i._id),c._webAudio&&d&&(c._emit("play",i._id),i._seek=i._start||0,i._playStart=b.currentTime,c._endTimers[i._id]=setTimeout(l,1e3*(i._stop-i._start)/Math.abs(c._rate))),c._webAudio&&!d&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,c._clearTimer(i._id),i._node.bufferSource=null),c._webAudio||d||c.stop(i._id)};c._endTimers[i._id]=setTimeout(l,1e3*k/Math.abs(c._rate)),i._paused=!1,i._ended=!1,i._sprite=a,i._seek=j,i._start=c._sprite[a][0]/1e3,i._stop=(c._sprite[a][0]+c._sprite[a][1])/1e3,i._loop=!(!i._loop&&!c._sprite[a][2]);var m=i._node;if(c._webAudio){var n=function(){c._refreshBuffer(i);var a=i._muted||c._muted?0:i._volume*g.volume();m.gain.setValueAtTime(a,b.currentTime),i._playStart=b.currentTime,"undefined"==typeof m.bufferSource.start?i._loop?m.bufferSource.noteGrainOn(0,j,86400):m.bufferSource.noteGrainOn(0,j,k):i._loop?m.bufferSource.start(0,j,86400):m.bufferSource.start(0,j,k),c._endTimers[i._id]||(c._endTimers[i._id]=setTimeout(l,1e3*k/Math.abs(c._rate))),d[1]||setTimeout(function(){c._emit("play",i._id)},0)};c._loaded?n():(c.once("load",n),c._clearTimer(i._id))}else{var o=function(){m.currentTime=j,m.muted=i._muted||c._muted||g._muted||m.muted,m.volume=i._volume*g.volume(),m.playbackRate=c._rate,setTimeout(function(){m.play(),d[1]||c._emit("play",i._id)},0)};if(4===m.readyState||!m.readyState&&navigator.isCocoonJS)o();else{var p=function(){c._endTimers[i._id]=setTimeout(l,1e3*k/Math.abs(c._rate)),o(),m.removeEventListener("canplaythrough",p,!1)};m.addEventListener("canplaythrough",p,!1),c._clearTimer(i._id)}}return i._id},pause:function(a){var b=this;if(!b._loaded)return b.once("play",function(){b.pause(a)}),b;for(var c=b._getSoundIds(a),d=0;d<c.length;d++){b._clearTimer(c[d]);var e=b._soundById(c[d]);if(e&&!e._paused){if(e._seek=b.seek(c[d]),e._paused=!0,b._webAudio){if(!e._node.bufferSource)return b;"undefined"==typeof e._node.bufferSource.stop?e._node.bufferSource.noteOff(0):e._node.bufferSource.stop(0),e._node.bufferSource=null}else isNaN(e._node.duration)||e._node.pause();arguments[1]||b._emit("pause",e._id)}}return b},stop:function(a){var b=this;if(!b._loaded)return"undefined"!=typeof b._sounds[0]._sprite&&b.once("play",function(){b.stop(a)}),b;for(var c=b._getSoundIds(a),d=0;d<c.length;d++){b._clearTimer(c[d]);var e=b._soundById(c[d]);if(e&&!e._paused)if(e._seek=e._start||0,e._paused=!0,e._ended=!0,b._webAudio&&e._node){if(!e._node.bufferSource)return b;"undefined"==typeof e._node.bufferSource.stop?e._node.bufferSource.noteOff(0):e._node.bufferSource.stop(0),e._node.bufferSource=null}else e._node&&!isNaN(e._node.duration)&&(e._node.pause(),e._node.currentTime=e._start||0)}return b},mute:function(a,c){var d=this;if(!d._loaded)return d.once("play",function(){d.mute(a,c)}),d;if("undefined"==typeof c){if("boolean"!=typeof a)return d._muted;d._muted=a}for(var e=d._getSoundIds(c),f=0;f<e.length;f++){var h=d._soundById(e[f]);h&&(h._muted=a,d._webAudio&&h._node?h._node.gain.setValueAtTime(a?0:h._volume*g.volume(),b.currentTime):h._node&&(h._node.muted=g._muted?!0:a))}return d},volume:function(){var a,c,d=this,e=arguments;if(0===e.length)return d._volume;if(1===e.length){var f=d._getSoundIds(),h=f.indexOf(e[0]);h>=0?c=parseInt(e[0],10):a=parseFloat(e[0])}else 2===e.length&&(a=parseFloat(e[0]),c=parseInt(e[1],10));var i;if(!("undefined"!=typeof a&&a>=0&&1>=a))return i=c?d._soundById(c):d._sounds[0],i?i._volume:0;if(!d._loaded)return d.once("play",function(){d.volume.apply(d,e)}),d;"undefined"==typeof c&&(d._volume=a),c=d._getSoundIds(c);for(var j=0;j<c.length;j++)i=d._soundById(c[j]),i&&(i._volume=a,d._webAudio&&i._node?i._node.gain.setValueAtTime(a*g.volume(),b.currentTime):i._node&&(i._node.volume=a*g.volume()));return d},fade:function(a,c,d,e){var f=this;if(!f._loaded)return f.once("play",function(){f.fade(a,c,d,e)}),f;f.volume(a,e);for(var g=f._getSoundIds(e),h=0;h<g.length;h++){var i=f._soundById(g[h]);if(i)if(f._webAudio){var j=b.currentTime,k=j+d/1e3;i._volume=a,i._node.gain.setValueAtTime(a,j),i._node.gain.linearRampToValueAtTime(c,k),setTimeout(function(a,d){setTimeout(function(){d._volume=c,f._emit("faded",a)},k-b.currentTime>0?Math.ceil(1e3*(k-b.currentTime)):0)}.bind(f,g[h],i),d)}else{var l=Math.abs(a-c),m=a>c?"out":"in",n=l/.01,o=d/n;!function(){var b=a,d=setInterval(function(a){b+="in"===m?.01:-.01,b=Math.max(0,b),b=Math.min(1,b),b=Math.round(100*b)/100,f.volume(b,a),b===c&&(clearInterval(d),f._emit("faded",a))}.bind(f,g[h]),o)}()}}return f},loop:function(){var a,b,c,d=this,e=arguments;if(0===e.length)return d._loop;if(1===e.length){if("boolean"!=typeof e[0])return c=d._soundById(parseInt(e[0],10)),c?c._loop:!1;a=e[0],d._loop=a}else 2===e.length&&(a=e[0],b=parseInt(e[1],10));for(var f=d._getSoundIds(b),g=0;g<f.length;g++)c=d._soundById(f[g]),c&&(c._loop=a,d._webAudio&&c._node&&(c._node.bufferSource.loop=a));return d},seek:function(){var a,c,d=this,e=arguments;if(0===e.length)c=d._sounds[0]._id;else if(1===e.length){var f=d._getSoundIds(),g=f.indexOf(e[0]);g>=0?c=parseInt(e[0],10):(c=d._sounds[0]._id,a=parseFloat(e[0]))}else 2===e.length&&(a=parseFloat(e[0]),c=parseInt(e[1],10));if("undefined"==typeof c)return d;if(!d._loaded)return d.once("load",function(){d.seek.apply(d,e)}),d;var h=d._soundById(c);if(h){if(!(a>=0))return d._webAudio?h._seek+d.playing(c)?b.currentTime-h._playStart:0:h._node.currentTime;var i=d.playing(c);i&&d.pause(c,!0),h._seek=a,d._clearTimer(c),i&&d.play(c,!0)}return d},playing:function(a){var b=this,c=b._soundById(a)||b._sounds[0];return c?!c._paused:!1},duration:function(){return this._duration},unload:function(){for(var a=this,b=a._sounds,c=0;c<b.length;c++){b[c]._paused||(a.stop(b[c]._id),a._emit("end",b[c]._id)),a._webAudio||(b[c]._node.src="",b[c]._node.removeEventListener("error",b[c]._errorFn,!1),b[c]._node.removeEventListener("canplaythrough",b[c]._loadFn,!1)),delete b[c]._node,a._clearTimer(b[c]._id);var d=g._howls.indexOf(a);d>=0&&g._howls.splice(d,1)}return j&&delete j[a._src],a=null,null},on:function(a,b,c){var d=this,e=d["_on"+a];return"function"==typeof b&&e.push({id:c,fn:b}),d},off:function(a,b,c){var d=this,e=d["_on"+a];if(b){for(var f=0;f<e.length;f++)if(b===e[f].fn&&c===e[f].id){e.splice(f,1);break}}else e=[];return d},once:function(a,b,c){var d=this,e=function(){b.apply(d,arguments),d.off(a,e,c)};return d.on(a,e,c),d},_emit:function(a,b,c){for(var d=this,e=d["_on"+a],f=0;f<e.length;f++)e[f].id&&e[f].id!==b||setTimeout(function(a){a.call(this,b,c)}.bind(d,e[f].fn),0);return d},_clearTimer:function(a){var b=this;return b._endTimers[a]&&(clearTimeout(b._endTimers[a]),delete b._endTimers[a]),b},_soundById:function(a){for(var b=this,c=0;c<b._sounds.length;c++)if(a===b._sounds[c]._id)return b._sounds[c];return null},_inactiveSound:function(){var a=this;a._drain();for(var b=0;b<a._sounds.length;b++)if(a._sounds[b]._ended)return a._sounds[b].reset();return new i(a)},_drain:function(){var a=this,b=a._pool,c=0,d=0;if(!(a._sounds.length<b)){for(d=0;d<a._sounds.length;d++)a._sounds[d]._ended&&c++;for(d=a._sounds.length-1;d>=0;d--){if(b>=c)return;a._sounds[d]._ended&&(a._webAudio&&a._sounds[d]._node&&a._sounds[d]._node.disconnect(0),a._sounds.splice(d,1),c--)}}},_getSoundIds:function(a){var b=this;if("undefined"==typeof a){for(var c=[],d=0;d<b._sounds.length;d++)c.push(b._sounds[d]._id);return c}return[a]},_refreshBuffer:function(a){var c=this;return a._node.bufferSource=b.createBufferSource(),a._node.bufferSource.buffer=j[c._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop),a._node.bufferSource.playbackRate.value=c._rate,c}};var i=function(a){this._parent=a,this.init()};if(i.prototype={init:function(){var a=this,b=a._parent;return a._muted=b._muted,a._loop=b._loop,a._volume=b._volume,a._muted=b._muted,a._seek=0,a._paused=!0,a._ended=!0,a._id=Math.round(Date.now()*Math.random()),b._sounds.push(a),a.create(),a},create:function(){var a=this,c=a._parent,d=g._muted||a._muted||a._parent._muted?0:a._volume*g.volume();return c._webAudio?(a._node="undefined"==typeof b.createGain?b.createGainNode():b.createGain(),a._node.gain.setValueAtTime(d,b.currentTime),a._node.paused=!0,a._node.connect(e)):(a._node=new Audio,a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener("canplaythrough",a._loadFn,!1),a._node.src=c._src,a._node.preload="auto",a._node.volume=d,a._node.load()),a},reset:function(){var a=this,b=a._parent;return a._muted=b._muted,a._loop=b._loop,a._volume=b._volume,a._muted=b._muted,a._seek=0,a._paused=!0,a._ended=!0,a._sprite=null,a._id=Math.round(Date.now()*Math.random()),a},_errorListener:function(){var a=this;a._node.error&&4===a._node.error.code&&(g.noAudio=!0),a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorListener,!1)},_loadListener:function(){var a=this,b=a._parent;b._duration=Math.ceil(10*a._node.duration)/10,0===Object.keys(b._sprite).length&&(b._sprite={__default:[0,1e3*b._duration]}),b._loaded||(b._loaded=!0,b._emit("load")),b._autoplay&&b.play(),a._node.removeEventListener("canplaythrough",a._loadFn,!1)}},c)var j={},k=function(a){var b=a._src;if(j[b])return a._duration=j[b].duration,void n(a);if(/^data:[^;]+;base64,/.test(b)){window.atob=window.atob||function(a){for(var b,c,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e=String(a).replace(/=+$/,""),f=0,g=0,h="";c=e.charAt(g++);~c&&(b=f%4?64*b+c:c,f++%4)?h+=String.fromCharCode(255&b>>(-2*f&6)):0)c=d.indexOf(c);return h};for(var c=atob(b.split(",")[1]),d=new Uint8Array(c.length),e=0;e<c.length;++e)d[e]=c.charCodeAt(e);m(d.buffer,a)}else{var f=new XMLHttpRequest;f.open("GET",b,!0),f.responseType="arraybuffer",f.onload=function(){m(f.response,a)},f.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete j[b],a.load())},l(f)}},l=function(a){try{a.send()}catch(b){a.onerror()}},m=function(a,c){b.decodeAudioData(a,function(a){a&&(j[c._src]=a,n(c,a))},function(){c._emit("loaderror")})},n=function(a,b){b&&!a._duration&&(a._duration=b.duration),0===Object.keys(a._sprite).length&&(a._sprite={__default:[0,1e3*a._duration]}),a._loaded||(a._loaded=!0,a._emit("load")),a._autoplay&&a.play()};"function"==typeof define&&define.amd&&define("howler",function(){return{Howler:g,Howl:h}}),"undefined"!=typeof exports&&(exports.Howler=g,exports.Howl=h),"undefined"!=typeof window&&(window.HowlerGlobal=f,window.Howler=g,window.Howl=h,window.Sound=i)}(),function(a,b){"use strict";function c(c,d){function e(a){return qa.preferFlash&&ia&&!qa.ignoreFlash&&qa.flash[a]!==b&&qa.flash[a]}function f(a){return function(b){var c,d=this._s;return d&&d._a?c=a.call(this,b):(d&&d.id?qa._wD(d.id+": Ignoring "+b.type):qa._wD(va+"Ignoring "+b.type),c=null),c}}this.setupOptions={url:c||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=d||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20150601",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa=this,ra=null,sa=null,ta="soundManager",ua=ta+": ",va="HTML5::",wa=navigator.userAgent,xa=a.location.href.toString(),ya=document,za=[],Aa=!0,Ba=!1,Ca=!1,Da=!1,Ea=!1,Fa=!1,Ga=0,Ha=["log","info","warn","error"],Ia=8,Ja=null,Ka=null,La=!1,Ma=!1,Na=0,Oa=null,Pa=[],Qa=null,Ra=Array.prototype.slice,Sa=!1,Ta=0,Ua=1e3,Va=wa.match(/(ipad|iphone|ipod)/i),Wa=wa.match(/android/i),Xa=wa.match(/msie/i),Ya=wa.match(/webkit/i),Za=wa.match(/safari/i)&&!wa.match(/chrome/i),$a=wa.match(/opera/i),_a=wa.match(/(mobile|pre\/|xoom)/i)||Va||Wa,ab=!xa.match(/usehtml5audio/i)&&!xa.match(/sm2\-ignorebadua/i)&&Za&&!wa.match(/silk/i)&&wa.match(/OS X 10_6_([3-7])/i),bb=a.console!==b&&console.log!==b,cb=ya.hasFocus!==b?ya.hasFocus():null,db=Za&&(ya.hasFocus===b||!ya.hasFocus()),eb=!db,fb=/(mp3|mp4|mpa|m4a|m4b)/i,gb="about:blank",hb="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",ib=ya.location?ya.location.protocol.match(/http/i):null,jb=ib?"":"http://",kb=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,lb=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],mb=new RegExp("\\.("+lb.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!ib,Q={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==b&&($a&&opera!==b&&opera.version()<10?new Audio(null):new Audio).canPlayType!==b}catch(a){return!1}}(),this.setup=function(a){var c=!qa.url;return a!==b&&Da&&Qa&&qa.ok()&&(a.flashVersion!==b||a.url!==b||a.html5Test!==b)&&U(N("setupLate")),q(a),Sa||(_a?qa.setupOptions.ignoreMobileRestrictions&&!qa.setupOptions.forceUseGlobalHTML5Audio||(Pa.push(A.globalHTML5),Sa=!0):qa.setupOptions.forceUseGlobalHTML5Audio&&(Pa.push(A.globalHTML5),Sa=!0)),!pa&&_a&&(qa.setupOptions.ignoreMobileRestrictions?Pa.push(A.ignoreMobile):(qa.setupOptions.useHTML5Audio&&!qa.setupOptions.preferFlash||qa._wD(A.mobileUA),qa.setupOptions.useHTML5Audio=!0,qa.setupOptions.preferFlash=!1,Va?qa.ignoreFlash=!0:(Wa&&!wa.match(/android\s2\.3/i)||!Wa)&&(qa._wD(A.globalHTML5),Sa=!0))),a&&(c&&E&&a.url!==b&&qa.beginDelayedInit(),E||a.url===b||"complete"!==ya.readyState||setTimeout(C,1)),pa=!0,qa},this.ok=function(){return Qa?Da&&!Ea:qa.useHTML5Audio&&qa.hasHTML5},this.supported=this.ok,this.getMovie=function(b){return h(b)||ya[b]||a[b]},this.createSound=function(a,c){function d(){return h=S(h),qa.sounds[h.id]=new g(h),qa.soundIDs.push(h.id),qa.sounds[h.id]}var e,f,h,i=null;if(e=ta+".createSound(): ",f=e+N(Da?"notOK":"notReady"),!Da||!qa.ok())return U(f),!1;if(c!==b&&(a={id:a,url:c}),h=p(a),h.url=Z(h.url),h.id===b&&(h.id=qa.setupOptions.idPrefix+Ta++),h.id.toString().charAt(0).match(/^[0-9]$/)&&qa._wD(e+N("badID",h.id),2),qa._wD(e+h.id+(h.url?" ("+h.url+")":""),1),V(h.id,!0))return qa._wD(e+h.id+" exists",1),qa.sounds[h.id];if(aa(h))i=d(),qa.html5Only||qa._wD(h.id+": Using HTML5"),i._setup_html5(h);else{if(qa.html5Only)return qa._wD(h.id+": No HTML5 support for this sound, and no Flash. Exiting."),d();if(qa.html5.usingFlash&&h.url&&h.url.match(/data\:/i))return qa._wD(h.id+": data: URIs not supported via Flash. Exiting."),d();l>8&&(null===h.isMovieStar&&(h.isMovieStar=!!(h.serverURL||(h.type?h.type.match(kb):!1)||h.url&&h.url.match(mb))),h.isMovieStar&&(qa._wD(e+"using MovieStar handling"),h.loops>1&&n("noNSLoop"))),h=T(h,e),i=d(),8===l?sa._createSound(h.id,h.loops||1,h.usePolicyFile):(sa._createSound(h.id,h.url,h.usePeakData,h.useWaveformData,h.useEQData,h.isMovieStar,h.isMovieStar?h.bufferTime:!1,h.loops||1,h.serverURL,h.duration||null,h.autoPlay,!0,h.autoLoad,h.usePolicyFile),h.serverURL||(i.connected=!0,h.onconnect&&h.onconnect.apply(i))),h.serverURL||!h.autoLoad&&!h.autoPlay||i.load(h)}return!h.serverURL&&h.autoPlay&&i.play(),i},this.destroySound=function(a,b){if(!V(a))return!1;var c,d=qa.sounds[a];for(d.stop(),d._iO={},d.unload(),c=0;c<qa.soundIDs.length;c++)if(qa.soundIDs[c]===a){qa.soundIDs.splice(c,1);break}return b||d.destruct(!0),d=null,delete qa.sounds[a],!0},this.load=function(a,b){return V(a)?qa.sounds[a].load(b):!1},this.unload=function(a){return V(a)?qa.sounds[a].unload():!1},this.onPosition=function(a,b,c,d){return V(a)?qa.sounds[a].onposition(b,c,d):!1},this.onposition=this.onPosition,this.clearOnPosition=function(a,b,c){return V(a)?qa.sounds[a].clearOnPosition(b,c):!1},this.play=function(a,b){var c=null,d=b&&!(b instanceof Object);if(!Da||!qa.ok())return U(ta+".play(): "+N(Da?"notOK":"notReady")),!1;if(V(a,d))d&&(b={url:b});else{if(!d)return!1;d&&(b={url:b}),b&&b.url&&(qa._wD(ta+'.play(): Attempting to create "'+a+'"',1),b.id=a,c=qa.createSound(b).play())}return null===c&&(c=qa.sounds[a].play(b)),c},this.start=this.play,this.setPosition=function(a,b){return V(a)?qa.sounds[a].setPosition(b):!1},this.stop=function(a){return V(a)?(qa._wD(ta+".stop("+a+")",1),qa.sounds[a].stop()):!1},this.stopAll=function(){var a;qa._wD(ta+".stopAll()",1);for(a in qa.sounds)qa.sounds.hasOwnProperty(a)&&qa.sounds[a].stop()},this.pause=function(a){return V(a)?qa.sounds[a].pause():!1},this.pauseAll=function(){var a;for(a=qa.soundIDs.length-1;a>=0;a--)qa.sounds[qa.soundIDs[a]].pause()},this.resume=function(a){return V(a)?qa.sounds[a].resume():!1},this.resumeAll=function(){var a;for(a=qa.soundIDs.length-1;a>=0;a--)qa.sounds[qa.soundIDs[a]].resume()},this.togglePause=function(a){return V(a)?qa.sounds[a].togglePause():!1},this.setPan=function(a,b){return V(a)?qa.sounds[a].setPan(b):!1},this.setVolume=function(a,c){var d,e;{if(a===b||isNaN(a)||c!==b)return V(a)?qa.sounds[a].setVolume(c):!1;for(d=0,e=qa.soundIDs.length;e>d;d++)qa.sounds[qa.soundIDs[d]].setVolume(a)}},this.mute=function(a){var b=0;if(a instanceof String&&(a=null),a)return V(a)?(qa._wD(ta+'.mute(): Muting "'+a+'"'),qa.sounds[a].mute()):!1;for(qa._wD(ta+".mute(): Muting all sounds"),b=qa.soundIDs.length-1;b>=0;b--)qa.sounds[qa.soundIDs[b]].mute();return qa.muted=!0,!0},this.muteAll=function(){qa.mute()},this.unmute=function(a){var b;if(a instanceof String&&(a=null),a)return V(a)?(qa._wD(ta+'.unmute(): Unmuting "'+a+'"'),qa.sounds[a].unmute()):!1;for(qa._wD(ta+".unmute(): Unmuting all sounds"),b=qa.soundIDs.length-1;b>=0;b--)qa.sounds[qa.soundIDs[b]].unmute();return qa.muted=!1,!0},this.unmuteAll=function(){qa.unmute()},this.toggleMute=function(a){return V(a)?qa.sounds[a].toggleMute():!1},this.getMemoryUse=function(){var a=0;return sa&&8!==l&&(a=parseInt(sa._getMemoryUse(),10)),a},this.disable=function(c){var d;if(c===b&&(c=!1),Ea)return!1;for(Ea=!0,n("shutdown",1),d=qa.soundIDs.length-1;d>=0;d--)K(qa.sounds[qa.soundIDs[d]]);return o(c),ga.remove(a,"load",u),!0},this.canPlayMIME=function(a){var b;return qa.hasHTML5&&(b=ba({type:a})),!b&&Qa&&(b=a&&qa.ok()?!!((l>8?a.match(kb):null)||a.match(qa.mimePattern)):null),b},this.canPlayURL=function(a){var b;return qa.hasHTML5&&(b=ba({url:a})),!b&&Qa&&(b=a&&qa.ok()?!!a.match(qa.filePattern):null),b},this.canPlayLink=function(a){return a.type!==b&&a.type&&qa.canPlayMIME(a.type)?!0:qa.canPlayURL(a.href)},this.getSoundById=function(a,b){if(!a)return null;var c=qa.sounds[a];return c||b||qa._wD(ta+'.getSoundById(): Sound "'+a+'" not found.',2),c},this.onready=function(b,c){var d="onready",e=!1;if("function"!=typeof b)throw N("needFunction",d);return Da&&qa._wD(N("queue",d)),c||(c=a),s(d,b,c),t(),e=!0,e},this.ontimeout=function(b,c){var d="ontimeout",e=!1;if("function"!=typeof b)throw N("needFunction",d);return Da&&qa._wD(N("queue",d)),c||(c=a),s(d,b,c),t({type:d}),e=!0,e},this._writeDebug=function(a,c){var d,e,f="soundmanager-debug";return qa.setupOptions.debugMode?bb&&qa.useConsole&&(c&&"object"==typeof c?console.log(a,c):Ha[c]!==b?console[Ha[c]](a):console.log(a),qa.consoleOnly)?!0:(d=h(f))?(e=ya.createElement("div"),++Ga%2===0&&(e.className="sm2-alt"),c=c===b?0:parseInt(c,10),e.appendChild(ya.createTextNode(a)),c&&(c>=2&&(e.style.fontWeight="bold"),3===c&&(e.style.color="#ff3333")),d.insertBefore(e,d.firstChild),d=null,!0):!1:!1},-1!==xa.indexOf("sm2-debug=alert")&&(this._writeDebug=function(b){a.alert(b)}),this._wD=this._writeDebug,this._debug=function(){var a,b;for(n("currentObj",1),a=0,b=qa.soundIDs.length;b>a;a++)qa.sounds[qa.soundIDs[a]]._debug()},this.reboot=function(b,c){qa.soundIDs.length&&qa._wD("Destroying "+qa.soundIDs.length+" SMSound object"+(1!==qa.soundIDs.length?"s":"")+"...");var d,e,f;for(d=qa.soundIDs.length-1;d>=0;d--)qa.sounds[qa.soundIDs[d]].destruct();if(sa)try{Xa&&(Ka=sa.innerHTML),Ja=sa.parentNode.removeChild(sa)}catch(g){n("badRemove",2)}if(Ka=Ja=Qa=sa=null,qa.enabled=E=Da=La=Ma=Ba=Ca=Ea=Sa=qa.swfLoaded=!1,qa.soundIDs=[],qa.sounds={},Ta=0,pa=!1,b)za=[];else for(d in za)if(za.hasOwnProperty(d))for(e=0,f=za[d].length;f>e;e++)za[d][e].fired=!1;return c||qa._wD(ta+": Rebooting..."),qa.html5={usingFlash:null},qa.flash={},qa.html5Only=!1,qa.ignoreFlash=!1,a.setTimeout(function(){c||qa.beginDelayedInit()},20),qa},this.reset=function(){return n("reset"),qa.reboot(!0,!0)},this.getMoviePercent=function(){return sa&&"PercentLoaded"in sa?sa.PercentLoaded():null},this.beginDelayedInit=function(){Fa=!0,C(),setTimeout(function(){return Ma?!1:(G(),B(),Ma=!0,!0)},20),v()},this.destruct=function(){qa._wD(ta+".destruct()"),qa.disable(!0)},g=function(a){var c,d,e,f,g,h,i,j,k,o,q=this,r=!1,s=[],t=0,u=null;k={duration:null,time:null},this.id=a.id,this.sID=this.id,this.url=a.url,this.options=p(a),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,o=!this.url,this.id3={},this._debug=function(){qa._wD(q.id+": Merged options:",q.options)},this.load=function(a){var c,d=null;if(a!==b?q._iO=p(a,q.options):(a=q.options,q._iO=a,u&&u!==q.url&&(n("manURL"),q._iO.url=q.url,q.url=null)),q._iO.url||(q._iO.url=q.url),q._iO.url=Z(q._iO.url),q.instanceOptions=q._iO,c=q._iO,qa._wD(q.id+": load ("+c.url+")"),!c.url&&!q.url)return qa._wD(q.id+": load(): url is unassigned. Exiting.",2),q;if(q.isHTML5||8!==l||q.url||c.autoPlay||qa._wD(q.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),c.url===q.url&&0!==q.readyState&&2!==q.readyState)return n("onURL",1),3===q.readyState&&c.onload&&oa(q,function(){c.onload.apply(q,[!!q.duration])}),q;if(q.loaded=!1,q.readyState=1,q.playState=0,q.id3={},aa(c))d=q._setup_html5(c),d._called_load?qa._wD(q.id+": Ignoring request to load again"):(q._html5_canplay=!1,q.url!==c.url&&(qa._wD(n("manURL")+": "+c.url),q._a.src=c.url,q.setPosition(0)),q._a.autobuffer="auto",q._a.preload="auto",q._a._called_load=!0);else{if(qa.html5Only)return qa._wD(q.id+": No flash support. Exiting."),q;if(q._iO.url&&q._iO.url.match(/data\:/i))return qa._wD(q.id+": data: URIs not supported via Flash. Exiting."),q;try{q.isHTML5=!1,q._iO=T(S(c)),q._iO.autoPlay&&(q._iO.position||q._iO.from)&&(qa._wD(q.id+": Disabling autoPlay because of non-zero offset case"),q._iO.autoPlay=!1),c=q._iO,8===l?sa._load(q.id,c.url,c.stream,c.autoPlay,c.usePolicyFile):sa._load(q.id,c.url,!!c.stream,!!c.autoPlay,c.loops||1,!!c.autoLoad,c.usePolicyFile)}catch(e){n("smError",2),m("onload",!1),H({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return q.url=c.url,q},this.unload=function(){return 0!==q.readyState&&(qa._wD(q.id+": unload()"),q.isHTML5?(f(),q._a&&(q._a.pause(),u=da(q._a))):8===l?sa._unload(q.id,gb):sa._unload(q.id),c()),q},this.destruct=function(a){qa._wD(q.id+": Destruct"),q.isHTML5?(f(),q._a&&(q._a.pause(),da(q._a),Sa||e(),q._a._s=null,q._a=null)):(q._iO.onfailure=null,sa._destroySound(q.id)),a||qa.destroySound(q.id,!0)},this.play=function(a,c){var d,e,f,i,k,m,n,s=!0,t=null;if(d=q.id+": play(): ",c=c===b?!0:c,a||(a={}),q.url&&(q._iO.url=q.url),q._iO=p(q._iO,q.options),q._iO=p(a,q._iO),q._iO.url=Z(q._iO.url),q.instanceOptions=q._iO,!q.isHTML5&&q._iO.serverURL&&!q.connected)return q.getAutoPlay()||(qa._wD(d+" Netstream not connected yet - setting autoPlay"),q.setAutoPlay(!0)),q;if(aa(q._iO)&&(q._setup_html5(q._iO),g()),1!==q.playState||q.paused||(e=q._iO.multiShot,e?qa._wD(d+"Already playing (multi-shot)",1):(qa._wD(d+"Already playing (one-shot)",1),q.isHTML5&&q.setPosition(q._iO.position),t=q)),null!==t)return t;if(a.url&&a.url!==q.url&&(q.readyState||q.isHTML5||8!==l||!o?q.load(q._iO):o=!1),q.loaded?qa._wD(d.substr(0,d.lastIndexOf(":"))):0===q.readyState?(qa._wD(d+"Attempting to load"),
q.isHTML5||qa.html5Only?q.isHTML5?q.load(q._iO):(qa._wD(d+"Unsupported type. Exiting."),t=q):(q._iO.autoPlay=!0,q.load(q._iO)),q.instanceOptions=q._iO):2===q.readyState?(qa._wD(d+"Could not load - exiting",2),t=q):qa._wD(d+"Loading - attempting to play..."),null!==t)return t;if(!q.isHTML5&&9===l&&q.position>0&&q.position===q.duration&&(qa._wD(d+"Sound at end, resetting to position: 0"),a.position=0),q.paused&&q.position>=0&&(!q._iO.serverURL||q.position>0))qa._wD(d+"Resuming from paused state",1),q.resume();else{if(q._iO=p(a,q._iO),(!q.isHTML5&&null!==q._iO.position&&q._iO.position>0||null!==q._iO.from&&q._iO.from>0||null!==q._iO.to)&&0===q.instanceCount&&0===q.playState&&!q._iO.serverURL){if(i=function(){q._iO=p(a,q._iO),q.play(q._iO)},q.isHTML5&&!q._html5_canplay?(qa._wD(d+"Beginning load for non-zero offset case"),q.load({_oncanplay:i}),t=!1):q.isHTML5||q.loaded||q.readyState&&2===q.readyState||(qa._wD(d+"Preloading for non-zero offset case"),q.load({onload:i}),t=!1),null!==t)return t;q._iO=j()}(!q.instanceCount||q._iO.multiShotEvents||q.isHTML5&&q._iO.multiShot&&!Sa||!q.isHTML5&&l>8&&!q.getAutoPlay())&&q.instanceCount++,q._iO.onposition&&0===q.playState&&h(q),q.playState=1,q.paused=!1,q.position=q._iO.position===b||isNaN(q._iO.position)?0:q._iO.position,q.isHTML5||(q._iO=T(S(q._iO))),q._iO.onplay&&c&&(q._iO.onplay.apply(q),r=!0),q.setVolume(q._iO.volume,!0),q.setPan(q._iO.pan,!0),q.isHTML5?q.instanceCount<2?(g(),f=q._setup_html5(),q.setPosition(q._iO.position),f.play()):(qa._wD(q.id+": Cloning Audio() for instance #"+q.instanceCount+"..."),k=new Audio(q._iO.url),m=function(){ga.remove(k,"ended",m),q._onfinish(q),da(k),k=null},n=function(){ga.remove(k,"canplay",n);try{k.currentTime=q._iO.position/Ua}catch(a){U(q.id+": multiShot play() failed to apply position of "+q._iO.position/Ua)}k.play()},ga.add(k,"ended",m),q._iO.volume!==b&&(k.volume=Math.max(0,Math.min(1,q._iO.volume/100))),q.muted&&(k.muted=!0),q._iO.position?ga.add(k,"canplay",n):k.play()):(s=sa._start(q.id,q._iO.loops||1,9===l?q.position:q.position/Ua,q._iO.multiShot||!1),9!==l||s||(qa._wD(d+"No sound hardware, or 32-sound ceiling hit",2),q._iO.onplayerror&&q._iO.onplayerror.apply(q)))}return q},this.start=this.play,this.stop=function(a){var b,c=q._iO;return 1===q.playState&&(qa._wD(q.id+": stop()"),q._onbufferchange(0),q._resetOnPosition(0),q.paused=!1,q.isHTML5||(q.playState=0),i(),c.to&&q.clearOnPosition(c.to),q.isHTML5?q._a&&(b=q.position,q.setPosition(0),q.position=b,q._a.pause(),q.playState=0,q._onTimer(),f()):(sa._stop(q.id,a),c.serverURL&&q.unload()),q.instanceCount=0,q._iO={},c.onstop&&c.onstop.apply(q)),q},this.setAutoPlay=function(a){qa._wD(q.id+": Autoplay turned "+(a?"on":"off")),q._iO.autoPlay=a,q.isHTML5||(sa._setAutoPlay(q.id,a),a&&(q.instanceCount||1!==q.readyState||(q.instanceCount++,qa._wD(q.id+": Incremented instance count to "+q.instanceCount))))},this.getAutoPlay=function(){return q._iO.autoPlay},this.setPosition=function(a){a===b&&(a=0);var c,d,e=q.isHTML5?Math.max(a,0):Math.min(q.duration||q._iO.duration,Math.max(a,0));if(q.position=e,d=q.position/Ua,q._resetOnPosition(q.position),q._iO.position=e,q.isHTML5){if(q._a){if(q._html5_canplay){if(q._a.currentTime!==d){qa._wD(q.id+": setPosition("+d+")");try{q._a.currentTime=d,(0===q.playState||q.paused)&&q._a.pause()}catch(f){qa._wD(q.id+": setPosition("+d+") failed: "+f.message,2)}}}else if(d)return qa._wD(q.id+": setPosition("+d+"): Cannot seek yet, sound not ready",2),q;q.paused&&q._onTimer(!0)}}else c=9===l?q.position:d,q.readyState&&2!==q.readyState&&sa._setPosition(q.id,c,q.paused||!q.playState,q._iO.multiShot);return q},this.pause=function(a){return q.paused||0===q.playState&&1!==q.readyState?q:(qa._wD(q.id+": pause()"),q.paused=!0,q.isHTML5?(q._setup_html5().pause(),f()):(a||a===b)&&sa._pause(q.id,q._iO.multiShot),q._iO.onpause&&q._iO.onpause.apply(q),q)},this.resume=function(){var a=q._iO;return q.paused?(qa._wD(q.id+": resume()"),q.paused=!1,q.playState=1,q.isHTML5?(q._setup_html5().play(),g()):(a.isMovieStar&&!a.serverURL&&q.setPosition(q.position),sa._pause(q.id,a.multiShot)),!r&&a.onplay?(a.onplay.apply(q),r=!0):a.onresume&&a.onresume.apply(q),q):q},this.togglePause=function(){return qa._wD(q.id+": togglePause()"),0===q.playState?(q.play({position:9!==l||q.isHTML5?q.position/Ua:q.position}),q):(q.paused?q.resume():q.pause(),q)},this.setPan=function(a,c){return a===b&&(a=0),c===b&&(c=!1),q.isHTML5||sa._setPan(q.id,a),q._iO.pan=a,c||(q.pan=a,q.options.pan=a),q},this.setVolume=function(a,c){return a===b&&(a=100),c===b&&(c=!1),q.isHTML5?q._a&&(qa.muted&&!q.muted&&(q.muted=!0,q._a.muted=!0),q._a.volume=Math.max(0,Math.min(1,a/100))):sa._setVolume(q.id,qa.muted&&!q.muted||q.muted?0:a),q._iO.volume=a,c||(q.volume=a,q.options.volume=a),q},this.mute=function(){return q.muted=!0,q.isHTML5?q._a&&(q._a.muted=!0):sa._setVolume(q.id,0),q},this.unmute=function(){q.muted=!1;var a=q._iO.volume!==b;return q.isHTML5?q._a&&(q._a.muted=!1):sa._setVolume(q.id,a?q._iO.volume:q.options.volume),q},this.toggleMute=function(){return q.muted?q.unmute():q.mute()},this.onPosition=function(a,c,d){return s.push({position:parseInt(a,10),method:c,scope:d!==b?d:q,fired:!1}),q},this.onposition=this.onPosition,this.clearOnPosition=function(a,b){var c;if(a=parseInt(a,10),isNaN(a))return!1;for(c=0;c<s.length;c++)a===s[c].position&&(b&&b!==s[c].method||(s[c].fired&&t--,s.splice(c,1)))},this._processOnPosition=function(){var a,b,c=s.length;if(!c||!q.playState||t>=c)return!1;for(a=c-1;a>=0;a--)b=s[a],!b.fired&&q.position>=b.position&&(b.fired=!0,t++,b.method.apply(b.scope,[b.position]),c=s.length);return!0},this._resetOnPosition=function(a){var b,c,d=s.length;if(!d)return!1;for(b=d-1;b>=0;b--)c=s[b],c.fired&&a<=c.position&&(c.fired=!1,t--);return!0},j=function(){var a,b,c=q._iO,d=c.from,e=c.to;return b=function(){qa._wD(q.id+': "To" time of '+e+" reached."),q.clearOnPosition(e,b),q.stop()},a=function(){qa._wD(q.id+': Playing "from" '+d),null===e||isNaN(e)||q.onPosition(e,b)},null===d||isNaN(d)||(c.position=d,c.multiShot=!1,a()),c},h=function(){var a,b=q._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&q.onPosition(parseInt(a,10),b[a])},i=function(){var a,b=q._iO.onposition;if(b)for(a in b)b.hasOwnProperty(a)&&q.clearOnPosition(parseInt(a,10))},g=function(){q.isHTML5&&W(q)},f=function(){q.isHTML5&&X(q)},c=function(a){a||(s=[],t=0),r=!1,q._hasTimer=null,q._a=null,q._html5_canplay=!1,q.bytesLoaded=null,q.bytesTotal=null,q.duration=q._iO&&q._iO.duration?q._iO.duration:null,q.durationEstimate=null,q.buffered=[],q.eqData=[],q.eqData.left=[],q.eqData.right=[],q.failures=0,q.isBuffering=!1,q.instanceOptions={},q.instanceCount=0,q.loaded=!1,q.metadata={},q.readyState=0,q.muted=!1,q.paused=!1,q.peakData={left:0,right:0},q.waveformData={left:[],right:[]},q.playState=0,q.position=null,q.id3={}},c(),this._onTimer=function(a){var b,c,d=!1,e={};return q._hasTimer||a?(q._a&&(a||(q.playState>0||1===q.readyState)&&!q.paused)&&(b=q._get_html5_duration(),b!==k.duration&&(k.duration=b,q.duration=b,d=!0),q.durationEstimate=q.duration,c=q._a.currentTime*Ua||0,c!==k.time&&(k.time=c,d=!0),(d||a)&&q._whileplaying(c,e,e,e,e)),d):void 0},this._get_html5_duration=function(){var a=q._iO,b=q._a&&q._a.duration?q._a.duration*Ua:a&&a.duration?a.duration:null,c=b&&!isNaN(b)&&b!==1/0?b:null;return c},this._apply_loop=function(a,b){!a.loop&&b>1&&qa._wD("Note: Native HTML5 looping is infinite.",1),a.loop=b>1?"loop":""},this._setup_html5=function(a){var b,e=p(q._iO,a),f=Sa?ra:q._a,g=decodeURI(e.url);if(Sa?g===decodeURI(ha)&&(b=!0):g===decodeURI(u)&&(b=!0),f){if(f._s)if(Sa)f._s&&f._s.playState&&!b&&f._s.stop();else if(!Sa&&g===decodeURI(u))return q._apply_loop(f,e.loops),f;b||(u&&c(!1),f.src=e.url,q.url=e.url,u=e.url,ha=e.url,f._called_load=!1)}else e.autoLoad||e.autoPlay?(q._a=new Audio(e.url),q._a.load()):q._a=$a&&opera.version()<10?new Audio(null):new Audio,f=q._a,f._called_load=!1,Sa&&(ra=f);return q.isHTML5=!0,q._a=f,f._s=q,d(),q._apply_loop(f,e.loops),e.autoLoad||e.autoPlay?q.load():(f.autobuffer=!1,f.preload="auto"),f},d=function(){function a(a,b,c){return q._a?q._a.addEventListener(a,b,c||!1):null}if(q._a._added_events)return!1;var b;q._a._added_events=!0;for(b in la)la.hasOwnProperty(b)&&a(b,la[b]);return!0},e=function(){function a(a,b,c){return q._a?q._a.removeEventListener(a,b,c||!1):null}var b;qa._wD(q.id+": Removing event listeners"),q._a._added_events=!1;for(b in la)la.hasOwnProperty(b)&&a(b,la[b])},this._onload=function(a){var b,c=!!a||!q.isHTML5&&8===l&&q.duration;return b=q.id+": ",qa._wD(b+(c?"onload()":"Failed to load / invalid sound?"+(q.duration?" -":" Zero-length duration reported.")+" ("+q.url+")"),c?1:2),c||q.isHTML5||(qa.sandbox.noRemote===!0&&qa._wD(b+N("noNet"),1),qa.sandbox.noLocal===!0&&qa._wD(b+N("noLocal"),1)),q.loaded=c,q.readyState=c?3:2,q._onbufferchange(0),q._iO.onload&&oa(q,function(){q._iO.onload.apply(q,[c])}),!0},this._onbufferchange=function(a){return 0===q.playState?!1:a&&q.isBuffering||!a&&!q.isBuffering?!1:(q.isBuffering=1===a,q._iO.onbufferchange&&(qa._wD(q.id+": Buffer state change: "+a),q._iO.onbufferchange.apply(q,[a])),!0)},this._onsuspend=function(){return q._iO.onsuspend&&(qa._wD(q.id+": Playback suspended"),q._iO.onsuspend.apply(q)),!0},this._onfailure=function(a,b,c){q.failures++,qa._wD(q.id+": Failure ("+q.failures+"): "+a),q._iO.onfailure&&1===q.failures?q._iO.onfailure(a,b,c):qa._wD(q.id+": Ignoring failure")},this._onwarning=function(a,b,c){q._iO.onwarning&&q._iO.onwarning(a,b,c)},this._onfinish=function(){var a=q._iO.onfinish;q._onbufferchange(0),q._resetOnPosition(0),q.instanceCount&&(q.instanceCount--,q.instanceCount||(i(),q.playState=0,q.paused=!1,q.instanceCount=0,q.instanceOptions={},q._iO={},f(),q.isHTML5&&(q.position=0)),q.instanceCount&&!q._iO.multiShotEvents||a&&(qa._wD(q.id+": onfinish()"),oa(q,function(){a.apply(q)})))},this._whileloading=function(a,b,c,d){var e=q._iO;q.bytesLoaded=a,q.bytesTotal=b,q.duration=Math.floor(c),q.bufferLength=d,q.isHTML5||e.isMovieStar?q.durationEstimate=q.duration:e.duration?q.durationEstimate=q.duration>e.duration?q.duration:e.duration:q.durationEstimate=parseInt(q.bytesTotal/q.bytesLoaded*q.duration,10),q.isHTML5||(q.buffered=[{start:0,end:q.duration}]),(3!==q.readyState||q.isHTML5)&&e.whileloading&&e.whileloading.apply(q)},this._whileplaying=function(a,c,d,e,f){var g,h=q._iO;return isNaN(a)||null===a?!1:(q.position=Math.max(0,a),q._processOnPosition(),!q.isHTML5&&l>8&&(h.usePeakData&&c!==b&&c&&(q.peakData={left:c.leftPeak,right:c.rightPeak}),h.useWaveformData&&d!==b&&d&&(q.waveformData={left:d.split(","),right:e.split(",")}),h.useEQData&&f!==b&&f&&f.leftEQ&&(g=f.leftEQ.split(","),q.eqData=g,q.eqData.left=g,f.rightEQ!==b&&f.rightEQ&&(q.eqData.right=f.rightEQ.split(",")))),1===q.playState&&(q.isHTML5||8!==l||q.position||!q.isBuffering||q._onbufferchange(0),h.whileplaying&&h.whileplaying.apply(q)),!0)},this._oncaptiondata=function(a){qa._wD(q.id+": Caption data received."),q.captiondata=a,q._iO.oncaptiondata&&q._iO.oncaptiondata.apply(q,[a])},this._onmetadata=function(a,b){qa._wD(q.id+": Metadata received.");var c,d,e={};for(c=0,d=a.length;d>c;c++)e[a[c]]=b[c];q.metadata=e,q._iO.onmetadata&&q._iO.onmetadata.call(q,q.metadata)},this._onid3=function(a,b){qa._wD(q.id+": ID3 data received.");var c,d,e=[];for(c=0,d=a.length;d>c;c++)e[a[c]]=b[c];q.id3=p(q.id3,e),q._iO.onid3&&q._iO.onid3.apply(q)},this._onconnect=function(a){a=1===a,qa._wD(q.id+": "+(a?"Connected.":"Failed to connect? - "+q.url),a?1:2),q.connected=a,a&&(q.failures=0,V(q.id)&&(q.getAutoPlay()?q.play(b,q.getAutoPlay()):q._iO.autoLoad&&q.load()),q._iO.onconnect&&q._iO.onconnect.apply(q,[a]))},this._ondataerror=function(a){q.playState>0&&(qa._wD(q.id+": Data error: "+a),q._iO.ondataerror&&q._iO.ondataerror.apply(q))},this._debug()},F=function(){return ya.body||ya.getElementsByTagName("div")[0]},h=function(a){return ya.getElementById(a)},p=function(a,c){var d,e,f=a||{};d=c===b?qa.defaultOptions:c;for(e in d)d.hasOwnProperty(e)&&f[e]===b&&("object"!=typeof d[e]||null===d[e]?f[e]=d[e]:f[e]=p(f[e],d[e]));return f},oa=function(b,c){b.isHTML5||8!==l?c():a.setTimeout(c,0)},r={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},q=function(a,c){var d,e=!0,f=c!==b,g=qa.setupOptions,h=r;if(a===b){e=[];for(d in g)g.hasOwnProperty(d)&&e.push(d);for(d in h)h.hasOwnProperty(d)&&("object"==typeof qa[d]?e.push(d+": {...}"):qa[d]instanceof Function?e.push(d+": function() {...}"):e.push(d));return qa._wD(N("setup",e.join(", "))),!1}for(d in a)if(a.hasOwnProperty(d))if("object"!=typeof a[d]||null===a[d]||a[d]instanceof Array||a[d]instanceof RegExp)f&&h[c]!==b?qa[c][d]=a[d]:g[d]!==b?(qa.setupOptions[d]=a[d],qa[d]=a[d]):h[d]===b?(U(N(qa[d]===b?"setupUndef":"setupError",d),2),e=!1):qa[d]instanceof Function?qa[d].apply(qa,a[d]instanceof Array?a[d]:[a[d]]):qa[d]=a[d];else{if(h[d]!==b)return q(a[d],d);U(N(qa[d]===b?"setupUndef":"setupError",d),2),e=!1}return e},ga=function(){function b(a){var b=Ra.call(a),c=b.length;return f?(b[1]="on"+b[1],c>3&&b.pop()):3===c&&b.push(!1),b}function c(a,b){var c=a.shift(),d=[g[b]];f?c[d](a[0],a[1]):c[d].apply(c,a)}function d(){c(b(arguments),"add")}function e(){c(b(arguments),"remove")}var f=a.attachEvent,g={add:f?"attachEvent":"addEventListener",remove:f?"detachEvent":"removeEventListener"};return{add:d,remove:e}}(),la={abort:f(function(){qa._wD(this._s.id+": abort")}),canplay:f(function(){var a,c=this._s;if(c._html5_canplay)return!0;if(c._html5_canplay=!0,qa._wD(c.id+": canplay"),c._onbufferchange(0),a=c._iO.position===b||isNaN(c._iO.position)?null:c._iO.position/Ua,this.currentTime!==a){qa._wD(c.id+": canplay: Setting position to "+a);try{this.currentTime=a}catch(d){qa._wD(c.id+": canplay: Setting position of "+a+" failed: "+d.message,2)}}c._iO._oncanplay&&c._iO._oncanplay()}),canplaythrough:f(function(){var a=this._s;a.loaded||(a._onbufferchange(0),a._whileloading(a.bytesLoaded,a.bytesTotal,a._get_html5_duration()),a._onload(!0))}),durationchange:f(function(){var a,b=this._s;a=b._get_html5_duration(),isNaN(a)||a===b.duration||(qa._wD(this._s.id+": durationchange ("+a+")"+(b.duration?", previously "+b.duration:"")),b.durationEstimate=b.duration=a)}),ended:f(function(){var a=this._s;qa._wD(a.id+": ended"),a._onfinish()}),error:f(function(){qa._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:f(function(){var a=this._s;qa._wD(a.id+": loadeddata"),a._loaded||Za||(a.duration=a._get_html5_duration())}),loadedmetadata:f(function(){qa._wD(this._s.id+": loadedmetadata")}),loadstart:f(function(){qa._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:f(function(){this._s._onbufferchange(0)}),playing:f(function(){qa._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:f(function(a){var b,c,d,e=this._s,f=0,g="progress"===a.type,h=a.target.buffered,i=a.loaded||0,j=a.total||1;if(e.buffered=[],h&&h.length){for(b=0,c=h.length;c>b;b++)e.buffered.push({start:h.start(b)*Ua,end:h.end(b)*Ua});if(f=(h.end(0)-h.start(0))*Ua,i=Math.min(1,f/(a.target.duration*Ua)),g&&h.length>1){for(d=[],c=h.length,b=0;c>b;b++)d.push(a.target.buffered.start(b)*Ua+"-"+a.target.buffered.end(b)*Ua);qa._wD(this._s.id+": progress, timeRanges: "+d.join(", "))}g&&!isNaN(i)&&qa._wD(this._s.id+": progress, "+Math.floor(100*i)+"% loaded")}isNaN(i)||(e._whileloading(i,j,e._get_html5_duration()),i&&j&&i===j&&la.canplaythrough.call(this,a))}),ratechange:f(function(){qa._wD(this._s.id+": ratechange")}),suspend:f(function(a){var b=this._s;qa._wD(this._s.id+": suspend"),la.progress.call(this,a),b._onsuspend()}),stalled:f(function(){qa._wD(this._s.id+": stalled")}),timeupdate:f(function(){this._s._onTimer()}),waiting:f(function(){var a=this._s;qa._wD(this._s.id+": waiting"),a._onbufferchange(1)})},aa=function(a){var b;return b=a&&(a.type||a.url||a.serverURL)?a.serverURL||a.type&&e(a.type)?!1:a.type?ba({type:a.type}):ba({url:a.url})||qa.html5Only||a.url.match(/data\:/i):!1},da=function(a){var c;return a&&(c=Za?gb:qa.html5.canPlayType("audio/wav")?hb:gb,a.src=c,a._called_unload!==b&&(a._called_load=!1)),Sa&&(ha=null),c},ba=function(a){if(!qa.useHTML5Audio||!qa.hasHTML5)return!1;var c,d,f,g,h=a.url||null,i=a.type||null,j=qa.audioFormats;if(i&&qa.html5[i]!==b)return qa.html5[i]&&!e(i);if(!ca){ca=[];for(g in j)j.hasOwnProperty(g)&&(ca.push(g),j[g].related&&(ca=ca.concat(j[g].related)));ca=new RegExp("\\.("+ca.join("|")+")(\\?.*)?$","i")}return f=h?h.toLowerCase().match(ca):null,f&&f.length?f=f[1]:i?(d=i.indexOf(";"),f=(-1!==d?i.substr(0,d):i).substr(6)):c=!1,f&&qa.html5[f]!==b?c=qa.html5[f]&&!e(f):(i="audio/"+f,c=qa.html5.canPlayType({type:i}),qa.html5[f]=c,c=c&&qa.html5[i]&&!e(i)),c},fa=function(){function a(a){var b,c,d=!1,e=!1;if(!g||"function"!=typeof g.canPlayType)return d;if(a instanceof Array){for(f=0,c=a.length;c>f;f++)(qa.html5[a[f]]||g.canPlayType(a[f]).match(qa.html5Test))&&(e=!0,qa.html5[a[f]]=!0,qa.flash[a[f]]=!!a[f].match(fb));d=e}else b=g&&"function"==typeof g.canPlayType?g.canPlayType(a):!1,d=!(!b||!b.match(qa.html5Test));return d}if(!qa.useHTML5Audio||!qa.hasHTML5)return qa.html5.usingFlash=!0,Qa=!0,!1;var c,d,e,f,g=Audio!==b?$a&&opera.version()<10?new Audio(null):new Audio:null,h={};e=qa.audioFormats;for(c in e)if(e.hasOwnProperty(c)&&(d="audio/"+c,h[c]=a(e[c].type),h[d]=h[c],c.match(fb)?(qa.flash[c]=!0,qa.flash[d]=!0):(qa.flash[c]=!1,qa.flash[d]=!1),e[c]&&e[c].related))for(f=e[c].related.length-1;f>=0;f--)h["audio/"+e[c].related[f]]=h[c],qa.html5[e[c].related[f]]=h[c],qa.flash[e[c].related[f]]=h[c];return h.canPlayType=g?a:null,qa.html5=p(qa.html5,h),qa.html5.usingFlash=_(),Qa=qa.html5.usingFlash,!0},A={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:ta+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:ua+"Verify that %s is a valid path.",tryDebug:"Try "+ta+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:ua+"Non-HTTP page ("+ya.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:ua+"Special case: Waiting for SWF to load with window focus...",waitForever:ua+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:ua+"Waiting for 100% SWF load...",needFunction:ua+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:ua+"_debug(): Current sound objects",waitOnload:ua+"Waiting for window.onload()",docLoaded:ua+"Document already loaded",onload:ua+"initComplete(): calling soundManager.onload()",onloadOK:ta+".onload() complete",didInit:ua+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:ua+"Failed to remove Flash node.",shutdown:ta+".disable(): Shutting down",queue:ua+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+Q.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:ua+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:ta+".load(): current URL already assigned.",badFV:ta+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:ua+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:ua+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:ta+".setup(): allowed parameters: %s",setupError:ta+'.setup(): "%s" cannot be assigned with this method.',setupUndef:ta+'.setup(): Could not find option "%s"',setupLate:ta+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:ua+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:ta+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},N=function(){var a,b,c,d,e;if(a=Ra.call(arguments),d=a.shift(),e=A&&A[d]?A[d]:"",e&&a&&a.length)for(b=0,c=a.length;c>b;b++)e=e.replace("%s",a[b]);return e},S=function(a){return 8===l&&a.loops>1&&a.stream&&(n("as2loop"),a.stream=!1),a},T=function(a,b){return a&&!a.usePolicyFile&&(a.onid3||a.usePeakData||a.useWaveformData||a.useEQData)&&(qa._wD((b||"")+N("policy")),a.usePolicyFile=!0),a},U=function(a){bb&&console.warn!==b?console.warn(a):qa._wD(a)},i=function(){return!1},K=function(a){var b;for(b in a)a.hasOwnProperty(b)&&"function"==typeof a[b]&&(a[b]=i);b=null},L=function(a){a===b&&(a=!1),(Ea||a)&&qa.disable(a)},M=function(a){var b,c=null;if(a)if(a.match(/\.swf(\?.*)?$/i)){if(c=a.substr(a.toLowerCase().lastIndexOf(".swf?")+4))return a}else a.lastIndexOf("/")!==a.length-1&&(a+="/");return b=(a&&-1!==a.lastIndexOf("/")?a.substr(0,a.lastIndexOf("/")+1):"./")+qa.movieURL,qa.noSWFCache&&(b+="?ts="+(new Date).getTime()),b},y=function(){l=parseInt(qa.flashVersion,10),8!==l&&9!==l&&(qa._wD(N("badFV",l,Ia)),qa.flashVersion=l=Ia);var a=qa.debugMode||qa.debugFlash?"_debug.swf":".swf";qa.useHTML5Audio&&!qa.html5Only&&qa.audioFormats.mp4.required&&9>l&&(qa._wD(N("needfl9")),qa.flashVersion=l=9),qa.version=qa.versionNumber+(qa.html5Only?" (HTML5-only mode)":9===l?" (AS3/Flash 9)":" (AS2/Flash 8)"),l>8?(qa.defaultOptions=p(qa.defaultOptions,qa.flash9Options),qa.features.buffering=!0,qa.defaultOptions=p(qa.defaultOptions,qa.movieStarOptions),qa.filePatterns.flash9=new RegExp("\\.(mp3|"+lb.join("|")+")(\\?.*)?$","i"),qa.features.movieStar=!0):qa.features.movieStar=!1,qa.filePattern=qa.filePatterns[8!==l?"flash9":"flash8"],qa.movieURL=(8===l?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",a),qa.features.peakData=qa.features.waveformData=qa.features.eqData=l>8},I=function(a,b){return sa?void sa._setPolling(a,b):!1},J=function(){if(qa.debugURLParam.test(xa)&&(qa.setupOptions.debugMode=qa.debugMode=!0),h(qa.debugID))return!1;var a,b,c,d,e;if(qa.debugMode&&!h(qa.debugID)&&(!bb||!qa.useConsole||!qa.consoleOnly)){a=ya.createElement("div"),a.id=qa.debugID+"-toggle",d={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},a.appendChild(ya.createTextNode("-")),a.onclick=R,a.title="Toggle SM2 debug console",wa.match(/msie 6/i)&&(a.style.position="absolute",a.style.cursor="hand");for(e in d)d.hasOwnProperty(e)&&(a.style[e]=d[e]);if(b=ya.createElement("div"),b.id=qa.debugID,b.style.display=qa.debugMode?"block":"none",qa.debugMode&&!h(a.id)){try{c=F(),c.appendChild(a)}catch(f){throw new Error(N("domError")+" \n"+f.toString())}c.appendChild(b)}}c=null},V=this.getSoundById,n=function(a,b){return a?qa._wD(N(a),b):""},R=function(){var a=h(qa.debugID),b=h(qa.debugID+"-toggle");return a?(Aa?(b.innerHTML="+",a.style.display="none"):(b.innerHTML="-",a.style.display="block"),void(Aa=!Aa)):!1},m=function(c,d,e){if(a.sm2Debugger!==b)try{sm2Debugger.handleEvent(c,d,e)}catch(f){return!1}return!0},P=function(){var a=[];return qa.debugMode&&a.push(Q.sm2Debug),qa.debugFlash&&a.push(Q.flashDebug),qa.useHighPerformance&&a.push(Q.highPerf),a.join(" ")},O=function(){var a=N("fbHandler"),b=qa.getMoviePercent(),c=Q,d={type:"FLASHBLOCK"};return qa.html5Only?!1:void(qa.ok()?(qa.didFlashBlock&&qa._wD(a+": Unblocked"),qa.oMC&&(qa.oMC.className=[P(),c.swfDefault,c.swfLoaded+(qa.didFlashBlock?" "+c.swfUnblocked:"")].join(" "))):(Qa&&(qa.oMC.className=P()+" "+c.swfDefault+" "+(null===b?c.swfTimedout:c.swfError),qa._wD(a+": "+N("fbTimeout")+(b?" ("+N("fbLoaded")+")":""))),qa.didFlashBlock=!0,t({type:"ontimeout",ignoreInit:!0,error:d}),H(d)))},s=function(a,c,d){za[a]===b&&(za[a]=[]),za[a].push({method:c,scope:d||null,fired:!1})},t=function(a){if(a||(a={type:qa.ok()?"onready":"ontimeout"}),!Da&&a&&!a.ignoreInit)return!1;if("ontimeout"===a.type&&(qa.ok()||Ea&&!a.ignoreInit))return!1;var b,c,d={success:a&&a.ignoreInit?qa.ok():!Ea},e=a&&a.type?za[a.type]||[]:[],f=[],g=[d],h=Qa&&!qa.ok();for(a.error&&(g[0].error=a.error),b=0,c=e.length;c>b;b++)e[b].fired!==!0&&f.push(e[b]);if(f.length)for(b=0,c=f.length;c>b;b++)f[b].scope?f[b].method.apply(f[b].scope,g):f[b].method.apply(this,g),h||(f[b].fired=!0);return!0},u=function(){a.setTimeout(function(){qa.useFlashBlock&&O(),t(),"function"==typeof qa.onload&&(n("onload",1),qa.onload.apply(a),n("onloadOK",1)),qa.waitForWindowLoad&&ga.add(a,"load",u)},1)},ja=function(){if(ia!==b)return ia;var c,d,e,f=!1,g=navigator,h=g.plugins,i=a.ActiveXObject;if(h&&h.length)d="application/x-shockwave-flash",e=g.mimeTypes,e&&e[d]&&e[d].enabledPlugin&&e[d].enabledPlugin.description&&(f=!0);else if(i!==b&&!wa.match(/MSAppHost/i)){try{c=new i("ShockwaveFlash.ShockwaveFlash")}catch(j){c=null}f=!!c,c=null}return ia=f,f},_=function(){var a,b,c=qa.audioFormats,d=Va&&!!wa.match(/os (1|2|3_0|3_1)\s/i);if(d?(qa.hasHTML5=!1,qa.html5Only=!0,qa.oMC&&(qa.oMC.style.display="none")):qa.useHTML5Audio&&(qa.html5&&qa.html5.canPlayType||(qa._wD("SoundManager: No HTML5 Audio() support detected."),qa.hasHTML5=!1),ab&&qa._wD(ua+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(ia?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),qa.useHTML5Audio&&qa.hasHTML5){$=!0;for(b in c)c.hasOwnProperty(b)&&c[b].required&&(qa.html5.canPlayType(c[b].type)?qa.preferFlash&&(qa.flash[b]||qa.flash[c[b].type])&&(a=!0):($=!1,a=!0))}return qa.ignoreFlash&&(a=!1,$=!0),qa.html5Only=qa.hasHTML5&&qa.useHTML5Audio&&!a,!qa.html5Only},Z=function(a){var b,c,d,e=0;if(a instanceof Array){for(b=0,c=a.length;c>b;b++)if(a[b]instanceof Object){if(qa.canPlayMIME(a[b].type)){e=b;break}}else if(qa.canPlayURL(a[b])){e=b;break}a[e].url&&(a[e]=a[e].url),d=a[e]}else d=a;return d},W=function(a){a._hasTimer||(a._hasTimer=!0,!_a&&qa.html5PollingInterval&&(null===Oa&&0===Na&&(Oa=setInterval(Y,qa.html5PollingInterval)),Na++))},X=function(a){a._hasTimer&&(a._hasTimer=!1,!_a&&qa.html5PollingInterval&&Na--)},Y=function(){var a;if(null!==Oa&&!Na)return clearInterval(Oa),Oa=null,!1;for(a=qa.soundIDs.length-1;a>=0;a--)qa.sounds[qa.soundIDs[a]].isHTML5&&qa.sounds[qa.soundIDs[a]]._hasTimer&&qa.sounds[qa.soundIDs[a]]._onTimer()},H=function(c){c=c!==b?c:{},"function"==typeof qa.onerror&&qa.onerror.apply(a,[{type:c.type!==b?c.type:null}]),c.fatal!==b&&c.fatal&&qa.disable()},ka=function(){if(!ab||!ja())return!1;var a,b,c=qa.audioFormats;for(b in c)if(c.hasOwnProperty(b)&&("mp3"===b||"mp4"===b)&&(qa._wD(ta+": Using flash fallback for "+b+" format"),qa.html5[b]=!1,c[b]&&c[b].related))for(a=c[b].related.length-1;a>=0;a--)qa.html5[c[b].related[a]]=!1},this._setSandboxType=function(a){var c=qa.sandbox;c.type=a,c.description=c.types[c.types[a]!==b?a:"unknown"],"localWithFile"===c.type?(c.noRemote=!0,c.noLocal=!1,n("secNote",2)):"localWithNetwork"===c.type?(c.noRemote=!1,c.noLocal=!0):"localTrusted"===c.type&&(c.noRemote=!1,c.noLocal=!1)},this._externalInterfaceOK=function(a){if(qa.swfLoaded)return!1;var b;return m("swf",!0),m("flashtojs",!0),qa.swfLoaded=!0,db=!1,ab&&ka(),a&&a.replace(/\+dev/i,"")===qa.versionNumber.replace(/\+dev/i,"")?void setTimeout(k,Xa?100:1):(b=ta+': Fatal: JavaScript file build "'+qa.versionNumber+'" does not match Flash SWF build "'+a+'" at '+qa.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(b)},0),!1)},G=function(a,c){function d(){var a,b=[],c=[],d=" + ";a="SoundManager "+qa.version+(!qa.html5Only&&qa.useHTML5Audio?qa.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),qa.html5Only?qa.html5PollingInterval&&b.push("html5PollingInterval ("+qa.html5PollingInterval+"ms)"):(qa.preferFlash&&b.push("preferFlash"),qa.useHighPerformance&&b.push("useHighPerformance"),qa.flashPollingInterval&&b.push("flashPollingInterval ("+qa.flashPollingInterval+"ms)"),qa.html5PollingInterval&&b.push("html5PollingInterval ("+qa.html5PollingInterval+"ms)"),qa.wmode&&b.push("wmode ("+qa.wmode+")"),qa.debugFlash&&b.push("debugFlash"),qa.useFlashBlock&&b.push("flashBlock")),b.length&&(c=c.concat([b.join(d)])),qa._wD(a+(c.length?d+c.join(", "):""),1),ma()}function e(a,b){return'<param name="'+a+'" value="'+b+'" />'}if(Ba&&Ca)return!1;if(qa.html5Only)return y(),d(),qa.oMC=h(qa.movieID),k(),Ba=!0,Ca=!0,!1;var f,g,i,j,l,m,n,o,p=c||qa.url,q=qa.altURL||p,r="JS/Flash audio component (SoundManager 2)",s=F(),t=P(),u=null,v=ya.getElementsByTagName("html")[0];if(u=v&&v.dir&&v.dir.match(/rtl/i),a=a===b?qa.id:a,y(),qa.url=M(ib?p:q),c=qa.url,qa.wmode=!qa.wmode&&qa.useHighPerformance?"transparent":qa.wmode,null!==qa.wmode&&(wa.match(/msie 8/i)||!Xa&&!qa.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Pa.push(A.spcWmode),qa.wmode=null),f={name:a,id:a,src:c,quality:"high",allowScriptAccess:qa.allowScriptAccess,bgcolor:qa.bgColor,pluginspage:jb+"www.macromedia.com/go/getflashplayer",title:r,type:"application/x-shockwave-flash",wmode:qa.wmode,hasPriority:"true"},qa.debugFlash&&(f.FlashVars="debug=1"),qa.wmode||delete f.wmode,Xa)g=ya.createElement("div"),j=['<object id="'+a+'" data="'+c+'" type="'+f.type+'" title="'+f.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',e("movie",c),e("AllowScriptAccess",qa.allowScriptAccess),e("quality",f.quality),qa.wmode?e("wmode",qa.wmode):"",e("bgcolor",qa.bgColor),e("hasPriority","true"),qa.debugFlash?e("FlashVars",f.FlashVars):"","</object>"].join("");else{g=ya.createElement("embed");for(i in f)f.hasOwnProperty(i)&&g.setAttribute(i,f[i])}if(J(),t=P(),s=F())if(qa.oMC=h(qa.movieID)||ya.createElement("div"),qa.oMC.id)o=qa.oMC.className,qa.oMC.className=(o?o+" ":Q.swfDefault)+(t?" "+t:""),qa.oMC.appendChild(g),Xa&&(l=qa.oMC.appendChild(ya.createElement("div")),l.className=Q.swfBox,l.innerHTML=j),Ca=!0;else{if(qa.oMC.id=qa.movieID,qa.oMC.className=Q.swfDefault+" "+t,m=null,l=null,qa.useFlashBlock||(qa.useHighPerformance?m={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(m={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},u&&(m.left=Math.abs(parseInt(m.left,10))+"px"))),Ya&&(qa.oMC.style.zIndex=1e4),!qa.debugFlash)for(n in m)m.hasOwnProperty(n)&&(qa.oMC.style[n]=m[n]);try{Xa||qa.oMC.appendChild(g),s.appendChild(qa.oMC),Xa&&(l=qa.oMC.appendChild(ya.createElement("div")),l.className=Q.swfBox,l.innerHTML=j),Ca=!0}catch(w){throw new Error(N("domError")+" \n"+w.toString())}}return Ba=!0,d(),!0},B=function(){return qa.html5Only?(G(),!1):sa?!1:qa.url?(sa=qa.getMovie(qa.id),sa||(Ja?(Xa?qa.oMC.innerHTML=Ka:qa.oMC.appendChild(Ja),Ja=null,Ba=!0):G(qa.id,qa.url),sa=qa.getMovie(qa.id)),"function"==typeof qa.oninitmovie&&setTimeout(qa.oninitmovie,1),na(),!0):(n("noURL"),!1)},v=function(){setTimeout(w,1e3)},x=function(){a.setTimeout(function(){U(ua+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),qa.setup({preferFlash:!1}).reboot(),qa.didFlashBlock=!0,qa.beginDelayedInit()},1)},w=function(){var b,c=!1;return qa.url?La?!1:(La=!0,ga.remove(a,"load",v),ia&&db&&!cb?(n("waitFocus"),!1):(Da||(b=qa.getMoviePercent(),
b>0&&100>b&&(c=!0)),void setTimeout(function(){return b=qa.getMoviePercent(),c?(La=!1,qa._wD(N("waitSWF")),a.setTimeout(v,1),!1):(Da||(qa._wD(ta+": No Flash response within expected time. Likely causes: "+(0===b?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(qa.debugFlash?" "+N("checkSWF"):""),2),!ib&&b&&(n("localFail",2),qa.debugFlash||n("tryDebug",2)),0===b&&qa._wD(N("swf404",qa.url),1),m("flashtojs",!1,": Timed out"+(ib?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),void(!Da&&eb&&(null===b?qa.useFlashBlock||0===qa.flashLoadTimeout?(qa.useFlashBlock&&O(),n("waitForever")):!qa.useFlashBlock&&$?x():(n("waitForever"),t({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===qa.flashLoadTimeout?n("waitForever"):!qa.useFlashBlock&&$?x():L(!0))))},qa.flashLoadTimeout))):!1},z=function(){function b(){ga.remove(a,"focus",z)}return cb||!db?(b(),!0):(eb=!0,cb=!0,n("gotFocus"),La=!1,v(),b(),!0)},na=function(){Pa.length&&(qa._wD("SoundManager 2: "+Pa.join(" "),1),Pa=[])},ma=function(){na();var a,b=[];if(qa.useHTML5Audio&&qa.hasHTML5){for(a in qa.audioFormats)qa.audioFormats.hasOwnProperty(a)&&b.push(a+" = "+qa.html5[a]+(!qa.html5[a]&&Qa&&qa.flash[a]?" (using flash)":qa.preferFlash&&qa.flash[a]&&Qa?" (preferring flash)":qa.html5[a]?"":" ("+(qa.audioFormats[a].required?"required, ":"")+"and no flash support)"));qa._wD("SoundManager 2 HTML5 support: "+b.join(", "),1)}},o=function(b){if(Da)return!1;if(qa.html5Only)return n("sm2Loaded",1),Da=!0,u(),m("onload",!0),!0;var c,d=qa.useFlashBlock&&qa.flashLoadTimeout&&!qa.getMoviePercent(),e=!0;return d||(Da=!0),c={type:!ia&&Qa?"NO_FLASH":"INIT_TIMEOUT"},qa._wD("SoundManager 2 "+(Ea?"failed to load":"loaded")+" ("+(Ea?"Flash security/load error":"OK")+") "+String.fromCharCode(Ea?10006:10003),Ea?2:1),Ea||b?(qa.useFlashBlock&&qa.oMC&&(qa.oMC.className=P()+" "+(null===qa.getMoviePercent()?Q.swfTimedout:Q.swfError)),t({type:"ontimeout",error:c,ignoreInit:!0}),m("onload",!1),H(c),e=!1):m("onload",!0),Ea||(qa.waitForWindowLoad&&!Fa?(n("waitOnload"),ga.add(a,"load",u)):(qa.waitForWindowLoad&&Fa&&n("docLoaded"),u())),e},j=function(){var a,c=qa.setupOptions;for(a in c)c.hasOwnProperty(a)&&(qa[a]===b?qa[a]=c[a]:qa[a]!==c[a]&&(qa.setupOptions[a]=qa[a]))},k=function(){function b(){ga.remove(a,"load",qa.beginDelayedInit)}if(Da)return n("didInit"),!1;if(qa.html5Only)return Da||(b(),qa.enabled=!0,o()),!0;B();try{sa._externalInterfaceTest(!1),I(!0,qa.flashPollingInterval||(qa.useHighPerformance?10:50)),qa.debugMode||sa._disableDebug(),qa.enabled=!0,m("jstoflash",!0),qa.html5Only||ga.add(a,"unload",i)}catch(c){return qa._wD("js/flash exception: "+c.toString()),m("jstoflash",!1),H({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),L(!0),o(),!1}return o(),b(),!0},C=function(){return E?!1:(E=!0,j(),J(),!ia&&qa.hasHTML5&&(qa._wD("SoundManager 2: No Flash detected"+(qa.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),qa.setup({useHTML5Audio:!0,preferFlash:!1})),fa(),!ia&&Qa&&(Pa.push(A.needFlash),qa.setup({flashLoadTimeout:1})),ya.removeEventListener&&ya.removeEventListener("DOMContentLoaded",C,!1),B(),!0)},ea=function(){return"complete"===ya.readyState&&(C(),ya.detachEvent("onreadystatechange",ea)),!0},D=function(){Fa=!0,C(),ga.remove(a,"load",D)},ja(),ga.add(a,"focus",z),ga.add(a,"load",v),ga.add(a,"load",D),ya.addEventListener?ya.addEventListener("DOMContentLoaded",C,!1):ya.attachEvent?ya.attachEvent("onreadystatechange",ea):(m("onload",!1),H({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!a||!a.document)throw new Error("SoundManager requires a browser with window and document objects.");var d=null;a.SM2_DEFER!==b&&SM2_DEFER||(d=new c),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports.SoundManager=c,module.exports.soundManager=d):"function"==typeof define&&define.amd&&define(function(){function b(b){if(!a.soundManager&&b instanceof Function){var d=b(c);d instanceof c&&(a.soundManager=d)}return a.soundManager}return{constructor:c,getInstance:b}}),a.SoundManager=c,a.soundManager=d}(window);var Stats=function(){function a(a,b,c){var d=document.createElement(a);return d.id=b,d.style.cssText=c,d}function b(b,c,d){var e=a("div",b,"padding:0 0 3px 3px;text-align:left;background:"+d),f=a("div",b+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+c);f.innerHTML=b.toUpperCase(),e.appendChild(f);var g=a("div",b+"Graph","width:74px;height:30px;background:"+c);e.appendChild(g);for(var h=0;74>h;h++)g.appendChild(a("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+d));return e}function c(a){for(var b=j.children,c=0;c<b.length;c++)b[c].style.display=c===a?"block":"none";i=a}function d(a,b){var c=a.appendChild(a.firstChild);c.style.height=Math.min(30,30-30*b)+"px"}var e=performance&&performance.now?performance.now.bind(performance):Date.now,f=e(),g=f,h=0,i=0,j=a("div","stats","width:80px;opacity:0.9;cursor:pointer");j.addEventListener("mousedown",function(a){a.preventDefault(),c(++i%j.children.length)},!1);var k=0,l=1/0,m=0,n=b("fps","#0ff","#002"),o=n.children[0],p=n.children[1];j.appendChild(n);var q=0,r=1/0,s=0,t=b("ms","#0f0","#020"),u=t.children[0],v=t.children[1];if(j.appendChild(t),performance&&performance.memory){var w=0,x=1/0,y=0,z=b("mb","#f08","#201"),A=z.children[0],B=z.children[1];j.appendChild(z)}return c(i),{REVISION:14,domElement:j,setMode:c,begin:function(){f=e()},end:function(){var a=e();if(q=a-f,r=Math.min(r,q),s=Math.max(s,q),u.textContent=(0|q)+" MS ("+(0|r)+"-"+(0|s)+")",d(v,q/200),h++,a>g+1e3&&(k=Math.round(1e3*h/(a-g)),l=Math.min(l,k),m=Math.max(m,k),o.textContent=k+" FPS ("+l+"-"+m+")",d(p,k/100),g=a,h=0,void 0!==w)){var b=performance.memory.usedJSHeapSize,c=performance.memory.jsHeapSizeLimit;w=Math.round(9.54e-7*b),x=Math.min(x,w),y=Math.max(y,w),A.textContent=w+" MB ("+x+"-"+y+")",d(B,b/c)}return a},update:function(){f=this.end()}}};"object"==typeof module&&(module.exports=Stats),function(a){"use strict";function b(a){switch(typeof a){case"undefined":return"undefined";case"boolean":return"boolean";case"number":return"number";case"string":return"string";default:return null===a?"null":"object"}}function c(a){return Object.prototype.toString.call(a).replace(/^\[object *|\]$/g,"")}function d(a){return"function"==typeof a}function e(a){if(null===a||a===D)throw TypeError();return Object(a)}function f(a){return a>>0}function g(a){return a>>>0}function h(a){function b(b){Object.defineProperty(a,b,{get:function(){return a._getter(b)},set:function(c){a._setter(b,c)},enumerable:!0,configurable:!1})}if(a.length>E)throw RangeError("Array too large for polyfill");var c;for(c=0;c<a.length;c+=1)b(c)}function i(a,b){var c=32-b;return a<<c>>c}function j(a,b){var c=32-b;return a<<c>>>c}function k(a){return[255&a]}function l(a){return i(a[0],8)}function m(a){return[255&a]}function n(a){return j(a[0],8)}function o(a){return a=M(Number(a)),[0>a?0:a>255?255:255&a]}function p(a){return[a>>8&255,255&a]}function q(a){return i(a[0]<<8|a[1],16)}function r(a){return[a>>8&255,255&a]}function s(a){return j(a[0]<<8|a[1],16)}function t(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}function u(a){return i(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function v(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}function w(a){return j(a[0]<<24|a[1]<<16|a[2]<<8|a[3],32)}function x(a,b,c){function d(a){var b=H(a),c=a-b;return.5>c?b:c>.5?b+1:b%2?b+1:b}var e,f,g,h,i,j,k,l=(1<<b-1)-1;for(a!==a?(f=(1<<b)-1,g=L(2,c-1),e=0):a===1/0||a===-(1/0)?(f=(1<<b)-1,g=0,e=0>a?1:0):0===a?(f=0,g=0,e=1/a===-(1/0)?1:0):(e=0>a,a=G(a),a>=L(2,1-l)?(f=K(H(I(a)/F),1023),g=d(a/L(2,f)*L(2,c)),g/L(2,c)>=2&&(f+=1,g=1),f>l?(f=(1<<b)-1,g=0):(f+=l,g-=L(2,c))):(f=0,g=d(a/L(2,1-l-c)))),i=[],h=c;h;h-=1)i.push(g%2?1:0),g=H(g/2);for(h=b;h;h-=1)i.push(f%2?1:0),f=H(f/2);for(i.push(e?1:0),i.reverse(),j=i.join(""),k=[];j.length;)k.push(parseInt(j.substring(0,8),2)),j=j.substring(8);return k}function y(a,b,c){var d,e,f,g,h,i,j,k,l=[];for(d=a.length;d;d-=1)for(f=a[d-1],e=8;e;e-=1)l.push(f%2?1:0),f>>=1;return l.reverse(),g=l.join(""),h=(1<<b-1)-1,i=parseInt(g.substring(0,1),2)?-1:1,j=parseInt(g.substring(1,1+b),2),k=parseInt(g.substring(1+b),2),j===(1<<b)-1?0!==k?NaN:i*(1/0):j>0?i*L(2,j-h)*(1+k/L(2,c)):0!==k?i*L(2,-(h-1))*(k/L(2,c)):0>i?-0:0}function z(a){return y(a,11,52)}function A(a){return x(a,11,52)}function B(a){return y(a,8,23)}function C(a){return x(a,8,23)}var D=void 0,E=1e5,F=Math.LN2,G=Math.abs,H=Math.floor,I=Math.log,J=Math.max,K=Math.min,L=Math.pow,M=Math.round;!function(){var a=Object.defineProperty,b=!function(){try{return Object.defineProperty({},"x",{})}catch(a){return!1}}();a&&!b||(Object.defineProperty=function(b,c,d){if(a)try{return a(b,c,d)}catch(e){}if(b!==Object(b))throw TypeError("Object.defineProperty called on non-object");return Object.prototype.__defineGetter__&&"get"in d&&Object.prototype.__defineGetter__.call(b,c,d.get),Object.prototype.__defineSetter__&&"set"in d&&Object.prototype.__defineSetter__.call(b,c,d.set),"value"in d&&(b[c]=d.value),b})}(),function(){function i(a){if(a=f(a),0>a)throw RangeError("ArrayBuffer size is not a small enough positive integer.");Object.defineProperty(this,"byteLength",{value:a}),Object.defineProperty(this,"_bytes",{value:Array(a)});for(var b=0;a>b;b+=1)this._bytes[b]=0}function j(){if(!arguments.length||"object"!=typeof arguments[0])return function(a){if(a=f(a),0>a)throw RangeError("length is not a small enough positive integer.");Object.defineProperty(this,"length",{value:a}),Object.defineProperty(this,"byteLength",{value:a*this.BYTES_PER_ELEMENT}),Object.defineProperty(this,"buffer",{value:new i(this.byteLength)}),Object.defineProperty(this,"byteOffset",{value:0})}.apply(this,arguments);if(arguments.length>=1&&"object"===b(arguments[0])&&arguments[0]instanceof j)return function(a){if(this.constructor!==a.constructor)throw TypeError();var b=a.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new i(b)}),Object.defineProperty(this,"byteLength",{value:b}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:a.length});for(var c=0;c<this.length;c+=1)this._setter(c,a._getter(c))}.apply(this,arguments);if(arguments.length>=1&&"object"===b(arguments[0])&&!(arguments[0]instanceof j)&&!(arguments[0]instanceof i||"ArrayBuffer"===c(arguments[0])))return function(a){var b=a.length*this.BYTES_PER_ELEMENT;Object.defineProperty(this,"buffer",{value:new i(b)}),Object.defineProperty(this,"byteLength",{value:b}),Object.defineProperty(this,"byteOffset",{value:0}),Object.defineProperty(this,"length",{value:a.length});for(var c=0;c<this.length;c+=1){var d=a[c];this._setter(c,Number(d))}}.apply(this,arguments);if(arguments.length>=1&&"object"===b(arguments[0])&&(arguments[0]instanceof i||"ArrayBuffer"===c(arguments[0])))return function(a,b,c){if(b=g(b),b>a.byteLength)throw RangeError("byteOffset out of range");if(b%this.BYTES_PER_ELEMENT)throw RangeError("buffer length minus the byteOffset is not a multiple of the element size.");if(c===D){var d=a.byteLength-b;if(d%this.BYTES_PER_ELEMENT)throw RangeError("length of buffer minus byteOffset not a multiple of the element size");c=d/this.BYTES_PER_ELEMENT}else c=g(c),d=c*this.BYTES_PER_ELEMENT;if(b+d>a.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:a}),Object.defineProperty(this,"byteLength",{value:d}),Object.defineProperty(this,"byteOffset",{value:b}),Object.defineProperty(this,"length",{value:c})}.apply(this,arguments);throw TypeError()}function x(a,b,c){var d=function(){Object.defineProperty(this,"constructor",{value:d}),j.apply(this,arguments),h(this)};"__proto__"in d?d.__proto__=j:(d.from=j.from,d.of=j.of),d.BYTES_PER_ELEMENT=a;var e=function(){};return e.prototype=y,d.prototype=new e,Object.defineProperty(d.prototype,"BYTES_PER_ELEMENT",{value:a}),Object.defineProperty(d.prototype,"_pack",{value:b}),Object.defineProperty(d.prototype,"_unpack",{value:c}),d}a.ArrayBuffer=a.ArrayBuffer||i,Object.defineProperty(j,"from",{value:function(a){return new this(a)}}),Object.defineProperty(j,"of",{value:function(){return new this(arguments)}});var y={};j.prototype=y,Object.defineProperty(j.prototype,"_getter",{value:function(a){if(arguments.length<1)throw SyntaxError("Not enough arguments");if(a=g(a),a>=this.length)return D;var b,c,d=[];for(b=0,c=this.byteOffset+a*this.BYTES_PER_ELEMENT;b<this.BYTES_PER_ELEMENT;b+=1,c+=1)d.push(this.buffer._bytes[c]);return this._unpack(d)}}),Object.defineProperty(j.prototype,"get",{value:j.prototype._getter}),Object.defineProperty(j.prototype,"_setter",{value:function(a,b){if(arguments.length<2)throw SyntaxError("Not enough arguments");if(a=g(a),!(a>=this.length)){var c,d,e=this._pack(b);for(c=0,d=this.byteOffset+a*this.BYTES_PER_ELEMENT;c<this.BYTES_PER_ELEMENT;c+=1,d+=1)this.buffer._bytes[d]=e[c]}}}),Object.defineProperty(j.prototype,"constructor",{value:j}),Object.defineProperty(j.prototype,"copyWithin",{value:function(a,b){var c=arguments[2],d=e(this),h=d.length,i=g(h);i=J(i,0);var j,k=f(a);j=0>k?J(i+k,0):K(k,i);var l,m=f(b);l=0>m?J(i+m,0):K(m,i);var n;n=c===D?i:f(c);var o;o=0>n?J(i+n,0):K(n,i);var p,q=K(o-l,i-j);for(j>l&&l+q>j?(p=-1,l=l+q-1,j=j+q-1):p=1;q>0;)d._setter(j,d._getter(l)),l+=p,j+=p,q-=1;return d}}),Object.defineProperty(j.prototype,"every",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;c>f;f++)if(!a.call(e,b._getter(f),f,b))return!1;return!0}}),Object.defineProperty(j.prototype,"fill",{value:function(a){var b=arguments[1],c=arguments[2],d=e(this),h=d.length,i=g(h);i=J(i,0);var j,k=f(b);j=0>k?J(i+k,0):K(k,i);var l;l=c===D?i:f(c);var m;for(m=0>l?J(i+l,0):K(l,i);m>j;)d._setter(j,a),j+=1;return d}}),Object.defineProperty(j.prototype,"filter",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=[],f=arguments[1],h=0;c>h;h++){var i=b._getter(h);a.call(f,i,h,b)&&e.push(i)}return new this.constructor(e)}}),Object.defineProperty(j.prototype,"find",{value:function(a){var b=e(this),c=b.length,f=g(c);if(!d(a))throw TypeError();for(var h=arguments.length>1?arguments[1]:D,i=0;f>i;){var j=b._getter(i),k=a.call(h,j,i,b);if(Boolean(k))return j;++i}return D}}),Object.defineProperty(j.prototype,"findIndex",{value:function(a){var b=e(this),c=b.length,f=g(c);if(!d(a))throw TypeError();for(var h=arguments.length>1?arguments[1]:D,i=0;f>i;){var j=b._getter(i),k=a.call(h,j,i,b);if(Boolean(k))return i;++i}return-1}}),Object.defineProperty(j.prototype,"forEach",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;c>f;f++)a.call(e,b._getter(f),f,b)}}),Object.defineProperty(j.prototype,"indexOf",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(0===c)return-1;var d=0;if(arguments.length>0&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*H(G(d)))),d>=c)return-1;for(var e=d>=0?d:J(c-G(d),0);c>e;e++)if(b._getter(e)===a)return e;return-1}}),Object.defineProperty(j.prototype,"join",{value:function(a){if(this===D||null===this)throw TypeError();for(var b=Object(this),c=g(b.length),d=Array(c),e=0;c>e;++e)d[e]=b._getter(e);return d.join(a===D?",":a)}}),Object.defineProperty(j.prototype,"lastIndexOf",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(0===c)return-1;var d=c;arguments.length>1&&(d=Number(arguments[1]),d!==d?d=0:0!==d&&d!==1/0&&d!==-(1/0)&&(d=(d>0||-1)*H(G(d))));for(var e=d>=0?K(d,c-1):c-G(d);e>=0;e--)if(b._getter(e)===a)return e;return-1}}),Object.defineProperty(j.prototype,"map",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();var e=[];e.length=c;for(var f=arguments[1],h=0;c>h;h++)e[h]=a.call(f,b._getter(h),h,b);return new this.constructor(e)}}),Object.defineProperty(j.prototype,"reduce",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();if(0===c&&1===arguments.length)throw TypeError();var e,f=0;for(e=arguments.length>=2?arguments[1]:b._getter(f++);c>f;)e=a.call(D,e,b._getter(f),f,b),f++;return e}}),Object.defineProperty(j.prototype,"reduceRight",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();if(0===c&&1===arguments.length)throw TypeError();var e,f=c-1;for(e=arguments.length>=2?arguments[1]:b._getter(f--);f>=0;)e=a.call(D,e,b._getter(f),f,b),f--;return e}}),Object.defineProperty(j.prototype,"reverse",{value:function(){if(this===D||null===this)throw TypeError();for(var a=Object(this),b=g(a.length),c=H(b/2),d=0,e=b-1;c>d;++d,--e){var f=a._getter(d);a._setter(d,a._getter(e)),a._setter(e,f)}return a}}),Object.defineProperty(j.prototype,"set",{value:function(a,b){if(arguments.length<1)throw SyntaxError("Not enough arguments");var c,d,e,f,h,i,j,k,l,m;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(c=arguments[0],e=g(arguments[1]),e+c.length>this.length)throw RangeError("Offset plus length of array is out of range");if(k=this.byteOffset+e*this.BYTES_PER_ELEMENT,l=c.length*this.BYTES_PER_ELEMENT,c.buffer===this.buffer){for(m=[],h=0,i=c.byteOffset;l>h;h+=1,i+=1)m[h]=c.buffer._bytes[i];for(h=0,j=k;l>h;h+=1,j+=1)this.buffer._bytes[j]=m[h]}else for(h=0,i=c.byteOffset,j=k;l>h;h+=1,i+=1,j+=1)this.buffer._bytes[j]=c.buffer._bytes[i]}else{if("object"!=typeof arguments[0]||"undefined"==typeof arguments[0].length)throw TypeError("Unexpected argument type(s)");if(d=arguments[0],f=g(d.length),e=g(arguments[1]),e+f>this.length)throw RangeError("Offset plus length of array is out of range");for(h=0;f>h;h+=1)i=d[h],this._setter(e+h,Number(i))}}}),Object.defineProperty(j.prototype,"slice",{value:function(a,b){for(var c=e(this),d=c.length,h=g(d),i=f(a),j=0>i?J(h+i,0):K(i,h),k=b===D?h:f(b),l=0>k?J(h+k,0):K(k,h),m=l-j,n=c.constructor,o=new n(m),p=0;l>j;){var q=c._getter(j);o._setter(p,q),++j,++p}return o}}),Object.defineProperty(j.prototype,"some",{value:function(a){if(this===D||null===this)throw TypeError();var b=Object(this),c=g(b.length);if(!d(a))throw TypeError();for(var e=arguments[1],f=0;c>f;f++)if(a.call(e,b._getter(f),f,b))return!0;return!1}}),Object.defineProperty(j.prototype,"sort",{value:function(a){if(this===D||null===this)throw TypeError();for(var b=Object(this),c=g(b.length),d=Array(c),e=0;c>e;++e)d[e]=b._getter(e);for(a?d.sort(a):d.sort(),e=0;c>e;++e)b._setter(e,d[e]);return b}}),Object.defineProperty(j.prototype,"subarray",{value:function(a,b){function c(a,b,c){return b>a?b:a>c?c:a}a=f(a),b=f(b),arguments.length<1&&(a=0),arguments.length<2&&(b=this.length),0>a&&(a=this.length+a),0>b&&(b=this.length+b),a=c(a,0,this.length),b=c(b,0,this.length);var d=b-a;return 0>d&&(d=0),new this.constructor(this.buffer,this.byteOffset+a*this.BYTES_PER_ELEMENT,d)}});var E=x(1,k,l),F=x(1,m,n),I=x(1,o,n),L=x(2,p,q),M=x(2,r,s),N=x(4,t,u),O=x(4,v,w),P=x(4,C,B),Q=x(8,A,z);a.Int8Array=a.Int8Array||E,a.Uint8Array=a.Uint8Array||F,a.Uint8ClampedArray=a.Uint8ClampedArray||I,a.Int16Array=a.Int16Array||L,a.Uint16Array=a.Uint16Array||M,a.Int32Array=a.Int32Array||N,a.Uint32Array=a.Uint32Array||O,a.Float32Array=a.Float32Array||P,a.Float64Array=a.Float64Array||Q}(),function(){function b(a,b){return d(a.get)?a.get(b):a[b]}function e(a,b,d){if(!(a instanceof ArrayBuffer||"ArrayBuffer"===c(a)))throw TypeError();if(b=g(b),b>a.byteLength)throw RangeError("byteOffset out of range");if(d=d===D?a.byteLength-b:g(d),b+d>a.byteLength)throw RangeError("byteOffset and length reference an area beyond the end of the buffer");Object.defineProperty(this,"buffer",{value:a}),Object.defineProperty(this,"byteLength",{value:d}),Object.defineProperty(this,"byteOffset",{value:b})}function f(a){return function(c,d){if(c=g(c),c+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");c+=this.byteOffset;for(var e=new Uint8Array(this.buffer,c,a.BYTES_PER_ELEMENT),f=[],h=0;h<a.BYTES_PER_ELEMENT;h+=1)f.push(b(e,h));return Boolean(d)===Boolean(i)&&f.reverse(),b(new a(new Uint8Array(f).buffer),0)}}function h(a){return function(c,d,e){if(c=g(c),c+a.BYTES_PER_ELEMENT>this.byteLength)throw RangeError("Array index out of range");var f,h,j=new a([d]),k=new Uint8Array(j.buffer),l=[];for(f=0;f<a.BYTES_PER_ELEMENT;f+=1)l.push(b(k,f));Boolean(e)===Boolean(i)&&l.reverse(),h=new Uint8Array(this.buffer,c,a.BYTES_PER_ELEMENT),h.set(l)}}var i=function(){var a=new Uint16Array([4660]),c=new Uint8Array(a.buffer);return 18===b(c,0)}();Object.defineProperty(e.prototype,"getUint8",{value:f(Uint8Array)}),Object.defineProperty(e.prototype,"getInt8",{value:f(Int8Array)}),Object.defineProperty(e.prototype,"getUint16",{value:f(Uint16Array)}),Object.defineProperty(e.prototype,"getInt16",{value:f(Int16Array)}),Object.defineProperty(e.prototype,"getUint32",{value:f(Uint32Array)}),Object.defineProperty(e.prototype,"getInt32",{value:f(Int32Array)}),Object.defineProperty(e.prototype,"getFloat32",{value:f(Float32Array)}),Object.defineProperty(e.prototype,"getFloat64",{value:f(Float64Array)}),Object.defineProperty(e.prototype,"setUint8",{value:h(Uint8Array)}),Object.defineProperty(e.prototype,"setInt8",{value:h(Int8Array)}),Object.defineProperty(e.prototype,"setUint16",{value:h(Uint16Array)}),Object.defineProperty(e.prototype,"setInt16",{value:h(Int16Array)}),Object.defineProperty(e.prototype,"setUint32",{value:h(Uint32Array)}),Object.defineProperty(e.prototype,"setInt32",{value:h(Int32Array)}),Object.defineProperty(e.prototype,"setFloat32",{value:h(Float32Array)}),Object.defineProperty(e.prototype,"setFloat64",{value:h(Float64Array)}),a.DataView=a.DataView||e}()}(this),(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=[].slice,e=function(a,b,d){c.call(this,a,b,d),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=e.prototype.render},f=1e-10,g=c._internals.isSelector,h=c._internals.isArray,i=e.prototype=c.to({},.1,{}),j=[];e.version="1.11.2",i.constructor=e,i.kill()._gc=!1,e.killTweensOf=e.killDelayedCallsTo=c.killTweensOf,e.getTweensOf=c.getTweensOf,e.ticker=c.ticker,i.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),c.prototype.invalidate.call(this)},i.updateTo=function(a,b){var d,e=this.ratio;b&&this.timeline&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(d in a)this.vars[d]=a[d];if(this._initted)if(b)this._initted=!1;else if(this._notifyPluginsOfEnabled&&this._firstPT&&c._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var f=this._time;this.render(0,!0,!1),this._initted=!1,this.render(f,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var g,h=1/(1-e),i=this._firstPT;i;)g=i.s+i.c,i.c*=h,i.s=g-i.c,i=i._next}return this},i.render=function(a,b,c){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var d,e,g,h,i,k,l,m,n=this._dirty?this.totalDuration():this._totalDuration,o=this._time,p=this._totalTime,q=this._cycle,r=this._duration;if(a>=n?(this._totalTime=n,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=r,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(d=!0,e="onComplete"),0===r&&(m=this._rawPrevTime,(0===a||0>m||m===f)&&m!==a&&(c=!0,m>f&&(e="onReverseComplete")),this._rawPrevTime=m=!b||a?a:f)):1e-7>a?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==p||0===r&&this._rawPrevTime>f)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===r&&(this._rawPrevTime>=0&&(c=!0),this._rawPrevTime=m=!b||a?a:f)):this._initted||(c=!0)):(this._totalTime=this._time=a,0!==this._repeat&&(h=r+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=r-this._time),this._time>r?this._time=r:this._time<0&&(this._time=0)),this._easeType?(i=this._time/r,k=this._easeType,l=this._easePower,(1===k||3===k&&i>=.5)&&(i=1-i),3===k&&(i*=2),1===l?i*=i:2===l?i*=i*i:3===l?i*=i*i*i:4===l&&(i*=i*i*i*i),1===k?this.ratio=1-i:2===k?this.ratio=i:this._time/r<.5?this.ratio=i/2:this.ratio=1-i/2):this.ratio=this._ease.getRatio(this._time/r)),o===this._time&&!c&&q===this._cycle)return void(p!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||j)));if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!d?this.ratio=this._ease.getRatio(this._time/r):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==o&&a>=0&&(this._active=!0),0===p&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==r||b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||j))),g=this._firstPT;g;)g.f?g.t[g.p](g.c*this.ratio+g.s):g.t[g.p]=g.c*this.ratio+g.s,g=g._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||j)),this._cycle!==q&&(b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||j)),e&&(this._gc||(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||j),0===r&&this._rawPrevTime===f&&m!==f&&(this._rawPrevTime=0)))},e.to=function(a,b,c){return new e(a,b,c)},e.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new e(a,b,c)},e.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new e(a,b,d)},e.staggerTo=e.allTo=function(a,b,f,i,k,l,m){i=i||0;var n,o,p,q,r=f.delay||0,s=[],t=function(){f.onComplete&&f.onComplete.apply(f.onCompleteScope||this,arguments),k.apply(m||this,l||j)};for(h(a)||("string"==typeof a&&(a=c.selector(a)||a),g(a)&&(a=d.call(a,0))),n=a.length,p=0;n>p;p++){o={};for(q in f)o[q]=f[q];o.delay=r,p===n-1&&k&&(o.onComplete=t),s[p]=new e(a[p],b,o),r+=i}return s},e.staggerFrom=e.allFrom=function(a,b,c,d,f,g,h){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,e.staggerTo(a,b,c,d,f,g,h)},e.staggerFromTo=e.allFromTo=function(a,b,c,d,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,e.staggerTo(a,b,d,f,g,h,i)},e.delayedCall=function(a,b,c,d,f){return new e(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:f,overwrite:0})},e.set=function(a,b){return new e(a,0,b)},e.isTweening=function(a){return c.getTweensOf(a,!0).length>0};var k=function(a,b){for(var d=[],e=0,f=a._first;f;)f instanceof c?d[e++]=f:(b&&(d[e++]=f),d=d.concat(k(f,b)),e=d.length),f=f._next;return d},l=e.getAllTweens=function(b){return k(a._rootTimeline,b).concat(k(a._rootFramesTimeline,b))};e.killAll=function(a,c,d,e){null==c&&(c=!0),null==d&&(d=!0);var f,g,h,i=l(0!=e),j=i.length,k=c&&d&&e;for(h=0;j>h;h++)g=i[h],(k||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&(a?g.totalTime(g.totalDuration()):g._enabled(!1,!1))},e.killChildTweensOf=function(a,b){if(null!=a){var f,i,j,k,l,m=c._tweenLookup;if("string"==typeof a&&(a=c.selector(a)||a),g(a)&&(a=d(a,0)),h(a))for(k=a.length;--k>-1;)e.killChildTweensOf(a[k],b);else{f=[];for(j in m)for(i=m[j].target.parentNode;i;)i===a&&(f=f.concat(m[j].tweens)),i=i.parentNode;for(l=f.length,k=0;l>k;k++)b&&f[k].totalTime(f[k].totalDuration()),f[k]._enabled(!1,!1)}}};var m=function(a,c,d,e){c=c!==!1,d=d!==!1,e=e!==!1;for(var f,g,h=l(e),i=c&&d&&e,j=h.length;--j>-1;)g=h[j],(i||g instanceof b||(f=g.target===g.vars.onComplete)&&d||c&&!f)&&g.paused(a)};return e.pauseAll=function(a,b,c){m(!0,a,b,c)},e.resumeAll=function(a,b,c){m(!1,a,b,c)},e.globalTimeScale=function(b){var d=a._rootTimeline,e=c.ticker.time;return arguments.length?(b=b||f,d._startTime=e-(e-d._startTime)*d._timeScale/b,d=a._rootFramesTimeline,e=c.ticker.frame,d._startTime=e-(e-d._startTime)*d._timeScale/b,d._timeScale=a._rootTimeline._timeScale=b,b):d._timeScale},i.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},i.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},i.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},i.duration=function(b){return arguments.length?a.prototype.duration.call(this,b):this._duration},i.totalDuration=function(a){return arguments.length?-1===this._repeat?this:this.duration((a-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},i.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},i.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},i.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},e},!0),window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){b.call(this,a),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var c,d,e=this.vars;for(d in e)c=e[d],g(c)&&-1!==c.join("").indexOf("{self}")&&(e[d]=this._swapSelfInParams(c));g(e.tweens)&&this.add(e.tweens,0,e.align,e.stagger)},e=1e-10,f=c._internals.isSelector,g=c._internals.isArray,h=[],i=function(a){var b,c={};for(b in a)c[b]=a[b];return c},j=function(a,b,c,d){a._timeline.pause(a._startTime),b&&b.apply(d||a._timeline,c||h)},k=h.slice,l=d.prototype=new b;return d.version="1.11.0",l.constructor=d,l.kill()._gc=!1,l.to=function(a,b,d,e){return b?this.add(new c(a,b,d),e):this.set(a,d,e)},l.from=function(a,b,d,e){return this.add(c.from(a,b,d),e)},l.fromTo=function(a,b,d,e,f){return b?this.add(c.fromTo(a,b,d,e),f):this.set(a,e,f)},l.staggerTo=function(a,b,e,g,h,j,l,m){var n,o=new d({onComplete:j,onCompleteParams:l,onCompleteScope:m});for("string"==typeof a&&(a=c.selector(a)||a),f(a)&&(a=k.call(a,0)),g=g||0,n=0;n<a.length;n++)e.startAt&&(e.startAt=i(e.startAt)),o.to(a[n],b,i(e),n*g);return this.add(o,h)},l.staggerFrom=function(a,b,c,d,e,f,g,h){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,h)},l.staggerFromTo=function(a,b,c,d,e,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,this.staggerTo(a,b,d,e,f,g,h,i)},l.call=function(a,b,d,e){return this.add(c.delayedCall(0,a,b,d),e)},l.set=function(a,b,d){return d=this._parseTimeOrLabel(d,0,!0),
null==b.immediateRender&&(b.immediateRender=d===this._time&&!this._paused),this.add(new c(a,0,b),d)},d.exportRoot=function(a,b){a=a||{},null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var e,f,g=new d(a),h=g._timeline;for(null==b&&(b=!0),h._remove(g,!0),g._startTime=0,g._rawPrevTime=g._time=g._totalTime=h._time,e=h._first;e;)f=e._next,b&&e instanceof c&&e.target===e.vars.onComplete||g.add(e,e._startTime-e._delay),e=f;return h.add(g,0),g},l.add=function(e,f,h,i){var j,k,l,m,n,o;if("number"!=typeof f&&(f=this._parseTimeOrLabel(f,0,!0,e)),!(e instanceof a)){if(e instanceof Array||e&&e.push&&g(e)){for(h=h||"normal",i=i||0,j=f,k=e.length,l=0;k>l;l++)g(m=e[l])&&(m=new d({tweens:m})),this.add(m,j),"string"!=typeof m&&"function"!=typeof m&&("sequence"===h?j=m._startTime+m.totalDuration()/m._timeScale:"start"===h&&(m._startTime-=m.delay())),j+=i;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,f);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is not a tween, timeline, function, or string.";e=c.delayedCall(0,e)}if(b.prototype.add.call(this,e,f),this._gc&&!this._paused&&this._duration<this.duration())for(n=this,o=n.rawTime()>e._startTime;n._gc&&n._timeline;)n._timeline.smoothChildTiming&&o?n.totalTime(n._totalTime,!0):n._enabled(!0,!1),n=n._timeline;return this},l.remove=function(b){if(b instanceof a)return this._remove(b,!1);if(b instanceof Array||b&&b.push&&g(b)){for(var c=b.length;--c>-1;)this.remove(b[c]);return this}return"string"==typeof b?this.removeLabel(b):this.kill(null,b)},l._remove=function(a,c){b.prototype._remove.call(this,a,c);var d=this._last;return d?this._time>d._startTime+d._totalDuration/d._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=0,this},l.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},l.insert=l.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},l.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},l.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},l.addPause=function(a,b,c,d){return this.call(j,["{self}",b,c,d],this,a)},l.removeLabel=function(a){return delete this._labels[a],this},l.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},l._parseTimeOrLabel=function(b,c,d,e){var f;if(e instanceof a&&e.timeline===this)this.remove(e);else if(e&&(e instanceof Array||e.push&&g(e)))for(f=e.length;--f>-1;)e[f]instanceof a&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof c)return this._parseTimeOrLabel(c,d&&"number"==typeof b&&null==this._labels[c]?b-this.duration():0,d);if(c=c||0,"string"!=typeof b||!isNaN(b)&&null==this._labels[b])null==b&&(b=this.duration());else{if(f=b.indexOf("="),-1===f)return null==this._labels[b]?d?this._labels[b]=this.duration()+c:c:this._labels[b]+c;c=parseInt(b.charAt(f-1)+"1",10)*Number(b.substr(f+1)),b=f>1?this._parseTimeOrLabel(b.substr(0,f-1),0,d):this.duration()}return Number(b)+c},l.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),b!==!1)},l.stop=function(){return this.paused(!0)},l.gotoAndPlay=function(a,b){return this.play(a,b)},l.gotoAndStop=function(a,b){return this.pause(a,b)},l.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,f,g,i,j,k=this._dirty?this.totalDuration():this._totalDuration,l=this._time,m=this._startTime,n=this._timeScale,o=this._paused;if(a>=k?(this._totalTime=this._time=k,this._reversed||this._hasPausedChild()||(f=!0,i="onComplete",0===this._duration&&(0===a||this._rawPrevTime<0||this._rawPrevTime===e)&&this._rawPrevTime!==a&&this._first&&(j=!0,this._rawPrevTime>e&&(i="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a?a:e,a=k+1e-6):1e-7>a?(this._totalTime=this._time=0,(0!==l||0===this._duration&&(this._rawPrevTime>e||0>a&&this._rawPrevTime>=0))&&(i="onReverseComplete",f=this._reversed),0>a?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&this._first&&(j=!0),this._rawPrevTime=a):(this._rawPrevTime=this._duration||!b||a?a:e,a=0,this._initted||(j=!0))):this._totalTime=this._time=this._rawPrevTime=a,this._time!==l&&this._first||c||j){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==l&&a>0&&(this._active=!0),0===l&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||h)),this._time>=l)for(d=this._first;d&&(g=d._next,!this._paused||o);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;else for(d=this._last;d&&(g=d._prev,!this._paused||o);)(d._active||d._startTime<=l&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||h)),i&&(this._gc||m!==this._startTime&&n===this._timeScale||(0===this._time||k>=this.totalDuration())&&(f&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[i]&&this.vars[i].apply(this.vars[i+"Scope"]||this,this.vars[i+"Params"]||h)))}},l._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof d&&a._hasPausedChild())return!0;a=a._next}return!1},l.getChildren=function(a,b,d,e){e=e||-9999999999;for(var f=[],g=this._first,h=0;g;)g._startTime<e||(g instanceof c?b!==!1&&(f[h++]=g):(d!==!1&&(f[h++]=g),a!==!1&&(f=f.concat(g.getChildren(!0,b,d)),h=f.length))),g=g._next;return f},l.getTweensOf=function(a,b){for(var d=c.getTweensOf(a),e=d.length,f=[],g=0;--e>-1;)(d[e].timeline===this||b&&this._contains(d[e]))&&(f[g++]=d[e]);return f},l._contains=function(a){for(var b=a.timeline;b;){if(b===this)return!0;b=b.timeline}return!1},l.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},l._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),d=c.length,e=!1;--d>-1;)c[d]._kill(a,b)&&(e=!0);return e},l.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;--c>-1;)b[c]._enabled(!1,!1);return a!==!1&&(this._labels={}),this._uncache(!0)},l.invalidate=function(){for(var a=this._first;a;)a.invalidate(),a=a._next;return this},l._enabled=function(a,c){if(a===this._gc)for(var d=this._first;d;)d._enabled(a,!0),d=d._next;return b.prototype._enabled.call(this,a,c)},l.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},l.totalDuration=function(a){if(!arguments.length){if(this._dirty){for(var b,c,d=0,e=this._last,f=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>f&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):f=e._startTime,e._startTime<0&&!e._paused&&(d-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,!1,-9999999999),f=0),c=e._startTime+e._totalDuration/e._timeScale,c>d&&(d=c),e=b;this._duration=this._totalDuration=d,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},l.usesFrames=function(){for(var b=this._timeline;b._timeline;)b=b._timeline;return b===a._rootFramesTimeline},l.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},d},!0),window._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(a,b,c){var d=function(b){a.call(this,b),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},e=1e-10,f=[],g=new c(null,null,1,0),h=d.prototype=new a;return h.constructor=d,h.kill()._gc=!1,d.version="1.11.0",h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),a.prototype.invalidate.call(this)},h.addCallback=function(a,c,d,e){return this.add(b.delayedCall(0,a,d,e),c)},h.removeCallback=function(a,b){if(a)if(null==b)this._kill(null,a);else for(var c=this.getTweensOf(a,!1),d=c.length,e=this._parseTimeOrLabel(b);--d>-1;)c[d]._startTime===e&&c[d]._enabled(!1,!1);return this},h.tweenTo=function(a,c){c=c||{};var d,e,h={ease:g,overwrite:2,useFrames:this.usesFrames(),immediateRender:!1};for(d in c)h[d]=c[d];return h.time=this._parseTimeOrLabel(a),e=new b(this,Math.abs(Number(h.time)-this._time)/this._timeScale||.001,h),h.onStart=function(){e.target.paused(!0),e.vars.time!==e.target.time()&&e.duration(Math.abs(e.vars.time-e.target.time())/e.target._timeScale),c.onStart&&c.onStart.apply(c.onStartScope||e,c.onStartParams||f)},e},h.tweenFromTo=function(a,b,c){c=c||{},a=this._parseTimeOrLabel(a),c.startAt={onComplete:this.seek,onCompleteParams:[a],onCompleteScope:this},c.immediateRender=c.immediateRender!==!1;var d=this.tweenTo(b,c);return d.duration(Math.abs(d.vars.time-a)/this._timeScale||.001)},h.render=function(a,b,c){this._gc&&this._enabled(!0,!1);var d,g,h,i,j,k,l=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,n=this._time,o=this._totalTime,p=this._startTime,q=this._timeScale,r=this._rawPrevTime,s=this._paused,t=this._cycle;if(a>=l?(this._locked||(this._totalTime=l,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(g=!0,i="onComplete",0===this._duration&&(0===a||0>r||r===e)&&r!==a&&this._first&&(j=!0,r>e&&(i="onReverseComplete"))),this._rawPrevTime=this._duration||!b||a?a:e,this._yoyo&&0!==(1&this._cycle)?this._time=a=0:(this._time=m,a=m+1e-6)):1e-7>a?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==n||0===m&&(r>e||0>a&&r>=0)&&!this._locked)&&(i="onReverseComplete",g=this._reversed),0>a?(this._active=!1,0===m&&r>=0&&this._first&&(j=!0),this._rawPrevTime=a):(this._rawPrevTime=m||!b||a?a:e,a=0,this._initted||(j=!0))):(0===m&&0>r&&(j=!0),this._time=this._rawPrevTime=a,this._locked||(this._totalTime=a,0!==this._repeat&&(k=m+this._repeatDelay,this._cycle=this._totalTime/k>>0,0!==this._cycle&&this._cycle===this._totalTime/k&&this._cycle--,this._time=this._totalTime-this._cycle*k,this._yoyo&&0!==(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,a=m+1e-6):this._time<0?this._time=a=0:a=this._time))),this._cycle!==t&&!this._locked){var u=this._yoyo&&0!==(1&t),v=u===(this._yoyo&&0!==(1&this._cycle)),w=this._totalTime,x=this._cycle,y=this._rawPrevTime,z=this._time;if(this._totalTime=t*m,this._cycle<t?u=!u:this._totalTime+=m,this._time=n,this._rawPrevTime=0===m?r-1e-5:r,this._cycle=t,this._locked=!0,n=u?0:m,this.render(n,b,0===m),b||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||f),v&&(n=u?m+1e-6:-1e-6,this.render(n,!0,!1)),this._locked=!1,this._paused&&!s)return;this._time=z,this._totalTime=w,this._cycle=x,this._rawPrevTime=y}if(!(this._time!==n&&this._first||c||j))return void(o!==this._totalTime&&this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==o&&a>0&&(this._active=!0),0===o&&this.vars.onStart&&0!==this._totalTime&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||f)),this._time>=n)for(d=this._first;d&&(h=d._next,!this._paused||s);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=h;else for(d=this._last;d&&(h=d._prev,!this._paused||s);)(d._active||d._startTime<=n&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=h;this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)),i&&(this._locked||this._gc||p!==this._startTime&&q===this._timeScale||(0===this._time||l>=this.totalDuration())&&(g&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[i]&&this.vars[i].apply(this.vars[i+"Scope"]||this,this.vars[i+"Params"]||f)))},h.getActive=function(a,b,c){null==a&&(a=!0),null==b&&(b=!0),null==c&&(c=!1);var d,e,f=[],g=this.getChildren(a,b,c),h=0,i=g.length;for(d=0;i>d;d++)e=g[d],e.isActive()&&(f[h++]=e);return f},h.getLabelAfter=function(a){a||0!==a&&(a=this._time);var b,c=this.getLabelsArray(),d=c.length;for(b=0;d>b;b++)if(c[b].time>a)return c[b].name;return null},h.getLabelBefore=function(a){null==a&&(a=this._time);for(var b=this.getLabelsArray(),c=b.length;--c>-1;)if(b[c].time<a)return b[c].name;return null},h.getLabelsArray=function(){var a,b=[],c=0;for(a in this._labels)b[c++]={time:this._labels[a],name:a};return b.sort(function(a,b){return a.time-b.time}),b},h.progress=function(a){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-a:a)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},h.totalProgress=function(a){return arguments.length?this.totalTime(this.totalDuration()*a,!1):this._totalTime/this.totalDuration()},h.totalDuration=function(b){return arguments.length?-1===this._repeat?this:this.duration((b-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(a.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},h.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),a>this._duration&&(a=this._duration),this._yoyo&&0!==(1&this._cycle)?a=this._duration-a+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(a+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(a,b)):this._time},h.repeat=function(a){return arguments.length?(this._repeat=a,this._uncache(!0)):this._repeat},h.repeatDelay=function(a){return arguments.length?(this._repeatDelay=a,this._uncache(!0)):this._repeatDelay},h.yoyo=function(a){return arguments.length?(this._yoyo=a,this):this._yoyo},h.currentLabel=function(a){return arguments.length?this.seek(a,!0):this.getLabelBefore(this._time+1e-8)},d},!0),function(){var a=180/Math.PI,b=[],c=[],d=[],e={},f=function(a,b,c,d){this.a=a,this.b=b,this.c=c,this.d=d,this.da=d-a,this.ca=c-a,this.ba=b-a},g=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",h=function(a,b,c,d){var e={a:a},f={},g={},h={c:d},i=(a+b)/2,j=(b+c)/2,k=(c+d)/2,l=(i+j)/2,m=(j+k)/2,n=(m-l)/8;return e.b=i+(a-i)/4,f.b=l+n,e.c=f.a=(e.b+f.b)/2,f.c=g.a=(l+m)/2,g.b=m-n,h.b=k+(d-k)/4,g.c=h.a=(g.b+h.b)/2,[e,f,g,h]},i=function(a,e,f,g,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w=a.length-1,x=0,y=a[0].a;for(j=0;w>j;j++)n=a[x],k=n.a,l=n.d,m=a[x+1].d,i?(t=b[j],u=c[j],v=(u+t)*e*.25/(g?.5:d[j]||.5),o=l-(l-k)*(g?.5*e:0!==t?v/t:0),p=l+(m-l)*(g?.5*e:0!==u?v/u:0),q=l-(o+((p-o)*(3*t/(t+u)+.5)/4||0))):(o=l-(l-k)*e*.5,p=l+(m-l)*e*.5,q=l-(o+p)/2),o+=q,p+=q,n.c=r=o,0!==j?n.b=y:n.b=y=n.a+.6*(n.c-n.a),n.da=l-k,n.ca=r-k,n.ba=y-k,f?(s=h(k,y,r,l),a.splice(x,1,s[0],s[1],s[2],s[3]),x+=4):x++,y=p;n=a[x],n.b=y,n.c=y+.4*(n.d-y),n.da=n.d-n.a,n.ca=n.c-n.a,n.ba=y-n.a,f&&(s=h(n.a,y,n.c,n.d),a.splice(x,1,s[0],s[1],s[2],s[3]))},j=function(a,d,e,g){var h,i,j,k,l,m,n=[];if(g)for(a=[g].concat(a),i=a.length;--i>-1;)"string"==typeof(m=a[i][d])&&"="===m.charAt(1)&&(a[i][d]=g[d]+Number(m.charAt(0)+m.substr(2)));if(h=a.length-2,0>h)return n[0]=new f(a[0][d],0,0,a[-1>h?0:1][d]),n;for(i=0;h>i;i++)j=a[i][d],k=a[i+1][d],n[i]=new f(j,0,0,k),e&&(l=a[i+2][d],b[i]=(b[i]||0)+(k-j)*(k-j),c[i]=(c[i]||0)+(l-k)*(l-k));return n[i]=new f(a[i][d],0,0,a[i+1][d]),n},k=function(a,f,h,k,l,m){var n,o,p,q,r,s,t,u,v={},w=[],x=m||a[0];l="string"==typeof l?","+l+",":g,null==f&&(f=1);for(o in a[0])w.push(o);if(a.length>1){for(u=a[a.length-1],t=!0,n=w.length;--n>-1;)if(o=w[n],Math.abs(x[o]-u[o])>.05){t=!1;break}t&&(a=a.concat(),m&&a.unshift(m),a.push(a[1]),m=a[a.length-3])}for(b.length=c.length=d.length=0,n=w.length;--n>-1;)o=w[n],e[o]=-1!==l.indexOf(","+o+","),v[o]=j(a,o,e[o],m);for(n=b.length;--n>-1;)b[n]=Math.sqrt(b[n]),c[n]=Math.sqrt(c[n]);if(!k){for(n=w.length;--n>-1;)if(e[o])for(p=v[w[n]],s=p.length-1,q=0;s>q;q++)r=p[q+1].da/c[q]+p[q].da/b[q],d[q]=(d[q]||0)+r*r;for(n=d.length;--n>-1;)d[n]=Math.sqrt(d[n])}for(n=w.length,q=h?4:1;--n>-1;)o=w[n],p=v[o],i(p,f,h,k,e[o]),t&&(p.splice(0,q),p.splice(p.length-q,q));return v},l=function(a,b,c){b=b||"soft";var d,e,g,h,i,j,k,l,m,n,o,p={},q="cubic"===b?3:2,r="soft"===b,s=[];if(r&&c&&(a=[c].concat(a)),null==a||a.length<q+1)throw"invalid Bezier data";for(m in a[0])s.push(m);for(j=s.length;--j>-1;){for(m=s[j],p[m]=i=[],n=0,l=a.length,k=0;l>k;k++)d=null==c?a[k][m]:"string"==typeof(o=a[k][m])&&"="===o.charAt(1)?c[m]+Number(o.charAt(0)+o.substr(2)):Number(o),r&&k>1&&l-1>k&&(i[n++]=(d+i[n-2])/2),i[n++]=d;for(l=n-q+1,n=0,k=0;l>k;k+=q)d=i[k],e=i[k+1],g=i[k+2],h=2===q?0:i[k+3],i[n++]=o=3===q?new f(d,e,g,h):new f(d,(2*e+d)/3,(2*e+g)/3,g);i.length=n}return p},m=function(a,b,c){for(var d,e,f,g,h,i,j,k,l,m,n,o=1/c,p=a.length;--p>-1;)for(m=a[p],f=m.a,g=m.d-f,h=m.c-f,i=m.b-f,d=e=0,k=1;c>=k;k++)j=o*k,l=1-j,d=e-(e=(j*j*g+3*l*(j*h+l*i))*j),n=p*c+k-1,b[n]=(b[n]||0)+d*d},n=function(a,b){b=b>>0||6;var c,d,e,f,g=[],h=[],i=0,j=0,k=b-1,l=[],n=[];for(c in a)m(a[c],g,b);for(e=g.length,d=0;e>d;d++)i+=Math.sqrt(g[d]),f=d%b,n[f]=i,f===k&&(j+=i,f=d/b>>0,l[f]=n,h[f]=j,i=0,n=[]);return{length:j,lengths:h,segments:l}},o=window._gsDefine.plugin({propName:"bezier",priority:-1,API:2,global:!0,init:function(a,b,c){this._target=a,b instanceof Array&&(b={values:b}),this._func={},this._round={},this._props=[],this._timeRes=null==b.timeResolution?6:parseInt(b.timeResolution,10);var d,e,f,g,h,i=b.values||[],j={},m=i[0],o=b.autoRotate||c.vars.orientToBezier;this._autoRotate=o?o instanceof Array?o:[["x","y","rotation",o===!0?0:Number(o)||0]]:null;for(d in m)this._props.push(d);for(f=this._props.length;--f>-1;)d=this._props[f],this._overwriteProps.push(d),e=this._func[d]="function"==typeof a[d],j[d]=e?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]():parseFloat(a[d]),h||j[d]!==i[0][d]&&(h=j);if(this._beziers="cubic"!==b.type&&"quadratic"!==b.type&&"soft"!==b.type?k(i,isNaN(b.curviness)?1:b.curviness,!1,"thruBasic"===b.type,b.correlate,h):l(i,b.type,j),this._segCount=this._beziers[d].length,this._timeRes){var p=n(this._beziers,this._timeRes);this._length=p.length,this._lengths=p.lengths,this._segments=p.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(o=this._autoRotate)for(o[0]instanceof Array||(this._autoRotate=o=[o]),f=o.length;--f>-1;)for(g=0;3>g;g++)d=o[f][g],this._func[d]="function"==typeof a[d]?a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]:!1;return!0},set:function(b){var c,d,e,f,g,h,i,j,k,l,m=this._segCount,n=this._func,o=this._target;if(this._timeRes){if(k=this._lengths,l=this._curSeg,b*=this._length,e=this._li,b>this._l2&&m-1>e){for(j=m-1;j>e&&(this._l2=k[++e])<=b;);this._l1=k[e-1],this._li=e,this._curSeg=l=this._segments[e],this._s2=l[this._s1=this._si=0]}else if(b<this._l1&&e>0){for(;e>0&&(this._l1=k[--e])>=b;);0===e&&b<this._l1?this._l1=0:e++,this._l2=k[e],this._li=e,this._curSeg=l=this._segments[e],this._s1=l[(this._si=l.length-1)-1]||0,this._s2=l[this._si]}if(c=e,b-=this._l1,e=this._si,b>this._s2&&e<l.length-1){for(j=l.length-1;j>e&&(this._s2=l[++e])<=b;);this._s1=l[e-1],this._si=e}else if(b<this._s1&&e>0){for(;e>0&&(this._s1=l[--e])>=b;);0===e&&b<this._s1?this._s1=0:e++,this._s2=l[e],this._si=e}h=(e+(b-this._s1)/(this._s2-this._s1))*this._prec}else c=0>b?0:b>=1?m-1:m*b>>0,h=(b-c*(1/m))*m;for(d=1-h,e=this._props.length;--e>-1;)f=this._props[e],g=this._beziers[f][c],i=(h*h*g.da+3*d*(h*g.ca+d*g.ba))*h+g.a,this._round[f]&&(i=i+(i>0?.5:-.5)>>0),n[f]?o[f](i):o[f]=i;if(this._autoRotate){var p,q,r,s,t,u,v,w=this._autoRotate;for(e=w.length;--e>-1;)f=w[e][2],u=w[e][3]||0,v=w[e][4]===!0?1:a,g=this._beziers[w[e][0]],p=this._beziers[w[e][1]],g&&p&&(g=g[c],p=p[c],q=g.a+(g.b-g.a)*h,s=g.b+(g.c-g.b)*h,q+=(s-q)*h,s+=(g.c+(g.d-g.c)*h-s)*h,r=p.a+(p.b-p.a)*h,t=p.b+(p.c-p.b)*h,r+=(t-r)*h,t+=(p.c+(p.d-p.c)*h-t)*h,i=Math.atan2(t-r,s-q)*v+u,n[f]?o[f](i):o[f]=i)}}}),p=o.prototype;o.bezierThrough=k,o.cubicToQuadratic=h,o._autoCSS=!0,o.quadraticToCubic=function(a,b,c){return new f(a,(2*b+a)/3,(2*b+c)/3,c)},o._cssRegister=function(){var a=window._gsDefine.globals.CSSPlugin;if(a){var b=a._internals,c=b._parseToProxy,d=b._setPluginRatio,e=b.CSSPropTween;b._registerComplexSpecialProp("bezier",{parser:function(a,b,f,g,h,i){b instanceof Array&&(b={values:b}),i=new o;var j,k,l,m=b.values,n=m.length-1,p=[],q={};if(0>n)return h;for(j=0;n>=j;j++)l=c(a,m[j],g,h,i,n!==j),p[j]=l.end;for(k in b)q[k]=b[k];return q.values=p,h=new e(a,"bezier",0,0,l.pt,2),h.data=l,h.plugin=i,h.setRatio=d,0===q.autoRotate&&(q.autoRotate=!0),!q.autoRotate||q.autoRotate instanceof Array||(j=q.autoRotate===!0?0:Number(q.autoRotate),q.autoRotate=null!=l.end.left?[["left","top","rotation",j,!1]]:null!=l.end.x?[["x","y","rotation",j,!1]]:!1),q.autoRotate&&(g._transform||g._enableTransforms(!1),l.autoRotate=g._target._gsTransform),i._onInitTween(l.proxy,q,g._tween),h}})}},p._roundProps=function(a,b){for(var c=this._overwriteProps,d=c.length;--d>-1;)(a[c[d]]||a.bezier||a.bezierThrough)&&(this._round[c[d]]=b)},p._kill=function(a){var b,c,d=this._props;for(b in this._beziers)if(b in a)for(delete this._beziers[b],delete this._func[b],c=d.length;--c>-1;)d[c]===b&&d.splice(c,1);return this._super._kill.call(this,a)}}(),window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var c,d,e,f,g=function(){a.call(this,"css"),this._overwriteProps.length=0,this.setRatio=g.prototype.setRatio},h={},i=g.prototype=new a("css");i.constructor=g,g.version="1.11.2",g.API=2,g.defaultTransformPerspective=0,i="px",g.suffixMap={top:i,right:i,bottom:i,left:i,width:i,height:i,fontSize:i,padding:i,margin:i,perspective:i};var j,k,l,m,n,o,p=/(?:\d|\-\d|\.\d|\-\.\d)+/g,q=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,r=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,s=/[^\d\-\.]/g,t=/(?:\d|\-|\+|=|#|\.)*/g,u=/opacity *= *([^)]*)/,v=/opacity:([^;]*)/,w=/alpha\(opacity *=.+?\)/i,x=/^(rgb|hsl)/,y=/([A-Z])/g,z=/-([a-z])/gi,A=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,B=function(a,b){return b.toUpperCase()},C=/(?:Left|Right|Width)/i,D=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,E=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,F=/,(?=[^\)]*(?:\(|$))/gi,G=Math.PI/180,H=180/Math.PI,I={},J=document,K=J.createElement("div"),L=J.createElement("img"),M=g._internals={_specialProps:h},N=navigator.userAgent,O=function(){var a,b=N.indexOf("Android"),c=J.createElement("div");return l=-1!==N.indexOf("Safari")&&-1===N.indexOf("Chrome")&&(-1===b||Number(N.substr(b+8,1))>3),n=l&&Number(N.substr(N.indexOf("Version/")+8,1))<6,m=-1!==N.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N)&&(o=parseFloat(RegExp.$1)),c.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",a=c.getElementsByTagName("a")[0],a?/^0.55/.test(a.style.opacity):!1}(),P=function(a){return u.test("string"==typeof a?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Q=function(a){window.console&&console.log(a)},R="",S="",T=function(a,b){b=b||K;var c,d,e=b.style;if(void 0!==e[a])return a;for(a=a.charAt(0).toUpperCase()+a.substr(1),c=["O","Moz","ms","Ms","Webkit"],d=5;--d>-1&&void 0===e[c[d]+a];);return d>=0?(S=3===d?"ms":c[d],R="-"+S.toLowerCase()+"-",S+a):null},U=J.defaultView?J.defaultView.getComputedStyle:function(){},V=g.getStyle=function(a,b,c,d,e){var f;return O||"opacity"!==b?(!d&&a.style[b]?f=a.style[b]:(c=c||U(a,null))?(a=c.getPropertyValue(b.replace(y,"-$1").toLowerCase()),f=a||c.length?a:c[b]):a.currentStyle&&(f=a.currentStyle[b]),null==e||f&&"none"!==f&&"auto"!==f&&"auto auto"!==f?f:e):P(a)},W=function(a,b,c,d,e){if("px"===d||!d)return c;if("auto"===d||!c)return 0;var f,g=C.test(b),h=a,i=K.style,j=0>c;return j&&(c=-c),"%"===d&&-1!==b.indexOf("border")?f=c/100*(g?a.clientWidth:a.clientHeight):(i.cssText="border:0 solid red;position:"+V(a,"position")+";line-height:0;","%"!==d&&h.appendChild?i[g?"borderLeftWidth":"borderTopWidth"]=c+d:(h=a.parentNode||J.body,i[g?"width":"height"]=c+d),h.appendChild(K),f=parseFloat(K[g?"offsetWidth":"offsetHeight"]),h.removeChild(K),0!==f||e||(f=W(a,b,c,d,!0))),j?-f:f},X=function(a,b,c){if("absolute"!==V(a,"position",c))return 0;var d="left"===b?"Left":"Top",e=V(a,"margin"+d,c);return a["offset"+d]-(W(a,b,parseFloat(e),e.replace(t,""))||0)},Y=function(a,b){var c,d,e={};if(b=b||U(a,null))if(c=b.length)for(;--c>-1;)e[b[c].replace(z,B)]=b.getPropertyValue(b[c]);else for(c in b)e[c]=b[c];else if(b=a.currentStyle||a.style)for(c in b)"string"==typeof c&&void 0!==e[c]&&(e[c.replace(z,B)]=b[c]);return O||(e.opacity=P(a)),d=xa(a,b,!1),e.rotation=d.rotation,e.skewX=d.skewX,e.scaleX=d.scaleX,e.scaleY=d.scaleY,e.x=d.x,e.y=d.y,wa&&(e.z=d.z,e.rotationX=d.rotationX,e.rotationY=d.rotationY,e.scaleZ=d.scaleZ),e.filters&&delete e.filters,e},Z=function(a,b,c,d,e){var f,g,h,i={},j=a.style;for(g in c)"cssText"!==g&&"length"!==g&&isNaN(g)&&(b[g]!==(f=c[g])||e&&e[g])&&-1===g.indexOf("Origin")&&("number"!=typeof f&&"string"!=typeof f||(i[g]="auto"!==f||"left"!==g&&"top"!==g?""!==f&&"auto"!==f&&"none"!==f||"string"!=typeof b[g]||""===b[g].replace(s,"")?f:0:X(a,g),void 0!==j[g]&&(h=new la(j,g,j[g],h))));if(d)for(g in d)"className"!==g&&(i[g]=d[g]);return{difs:i,firstMPT:h}},$={width:["Left","Right"],height:["Top","Bottom"]},_=["marginLeft","marginRight","marginTop","marginBottom"],aa=function(a,b,c){var d=parseFloat("width"===b?a.offsetWidth:a.offsetHeight),e=$[b],f=e.length;for(c=c||U(a,null);--f>-1;)d-=parseFloat(V(a,"padding"+e[f],c,!0))||0,d-=parseFloat(V(a,"border"+e[f]+"Width",c,!0))||0;return d},ba=function(a,b){null!=a&&""!==a&&"auto"!==a&&"auto auto"!==a||(a="0 0");var c=a.split(" "),d=-1!==a.indexOf("left")?"0%":-1!==a.indexOf("right")?"100%":c[0],e=-1!==a.indexOf("top")?"0%":-1!==a.indexOf("bottom")?"100%":c[1];return null==e?e="0":"center"===e&&(e="50%"),("center"===d||isNaN(parseFloat(d))&&-1===(d+"").indexOf("="))&&(d="50%"),b&&(b.oxp=-1!==d.indexOf("%"),b.oyp=-1!==e.indexOf("%"),b.oxr="="===d.charAt(1),b.oyr="="===e.charAt(1),b.ox=parseFloat(d.replace(s,"")),b.oy=parseFloat(e.replace(s,""))),d+" "+e+(c.length>2?" "+c[2]:"")},ca=function(a,b){return"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)},da=function(a,b){return null==a?b:"string"==typeof a&&"="===a.charAt(1)?parseInt(a.charAt(0)+"1",10)*Number(a.substr(2))+b:parseFloat(a)},ea=function(a,b,c,d){var e,f,g,h,i=1e-6;return null==a?h=b:"number"==typeof a?h=a:(e=360,f=a.split("_"),g=Number(f[0].replace(s,""))*(-1===a.indexOf("rad")?1:H)-("="===a.charAt(1)?0:b),f.length&&(d&&(d[c]=b+g),-1!==a.indexOf("short")&&(g%=e,g!==g%(e/2)&&(g=0>g?g+e:g-e)),-1!==a.indexOf("_cw")&&0>g?g=(g+9999999999*e)%e-(g/e|0)*e:-1!==a.indexOf("ccw")&&g>0&&(g=(g-9999999999*e)%e-(g/e|0)*e)),h=b+g),i>h&&h>-i&&(h=0),h},fa={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ga=function(a,b,c){return a=0>a?a+1:a>1?a-1:a,255*(1>6*a?b+(c-b)*a*6:.5>a?c:2>3*a?b+(c-b)*(2/3-a)*6:b)+.5|0},ha=function(a){var b,c,d,e,f,g;return a&&""!==a?"number"==typeof a?[a>>16,a>>8&255,255&a]:(","===a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),fa[a]?fa[a]:"#"===a.charAt(0)?(4===a.length&&(b=a.charAt(1),c=a.charAt(2),d=a.charAt(3),a="#"+b+b+c+c+d+d),a=parseInt(a.substr(1),16),[a>>16,a>>8&255,255&a]):"hsl"===a.substr(0,3)?(a=a.match(p),e=Number(a[0])%360/360,f=Number(a[1])/100,g=Number(a[2])/100,c=.5>=g?g*(f+1):g+f-g*f,b=2*g-c,a.length>3&&(a[3]=Number(a[3])),a[0]=ga(e+1/3,b,c),a[1]=ga(e,b,c),a[2]=ga(e-1/3,b,c),a):(a=a.match(p)||fa.transparent,a[0]=Number(a[0]),a[1]=Number(a[1]),a[2]=Number(a[2]),a.length>3&&(a[3]=Number(a[3])),a)):fa.black},ia="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(i in fa)ia+="|"+i+"\\b";ia=new RegExp(ia+")","gi");var ja=function(a,b,c,d){if(null==a)return function(a){return a};var e,f=b?(a.match(ia)||[""])[0]:"",g=a.split(f).join("").match(r)||[],h=a.substr(0,a.indexOf(g[0])),i=")"===a.charAt(a.length-1)?")":"",j=-1!==a.indexOf(" ")?" ":",",k=g.length,l=k>0?g[0].replace(p,""):"";return k?e=b?function(a){var b,m,n,o;if("number"==typeof a)a+=l;else if(d&&F.test(a)){for(o=a.replace(F,"|").split("|"),n=0;n<o.length;n++)o[n]=e(o[n]);return o.join(",")}if(b=(a.match(ia)||[f])[0],m=a.split(b).join("").match(r)||[],n=m.length,k>n--)for(;++n<k;)m[n]=c?m[(n-1)/2|0]:g[n];return h+m.join(j)+j+b+i+(-1!==a.indexOf("inset")?" inset":"")}:function(a){var b,f,m;if("number"==typeof a)a+=l;else if(d&&F.test(a)){for(f=a.replace(F,"|").split("|"),m=0;m<f.length;m++)f[m]=e(f[m]);return f.join(",")}if(b=a.match(r)||[],m=b.length,k>m--)for(;++m<k;)b[m]=c?b[(m-1)/2|0]:g[m];return h+b.join(j)+i}:function(a){return a}},ka=function(a){return a=a.split(","),function(b,c,d,e,f,g,h){var i,j=(c+"").split(" ");for(h={},i=0;4>i;i++)h[a[i]]=j[i]=j[i]||j[(i-1)/2>>0];return e.parse(b,h,f,g)}},la=(M._setPluginRatio=function(a){this.plugin.setRatio(a);for(var b,c,d,e,f=this.data,g=f.proxy,h=f.firstMPT,i=1e-6;h;)b=g[h.v],h.r?b=b>0?b+.5|0:b-.5|0:i>b&&b>-i&&(b=0),h.t[h.p]=b,h=h._next;if(f.autoRotate&&(f.autoRotate.rotation=g.rotation),1===a)for(h=f.firstMPT;h;){if(c=h.t,c.type){if(1===c.type){for(e=c.xs0+c.s+c.xs1,d=1;d<c.l;d++)e+=c["xn"+d]+c["xs"+(d+1)];c.e=e}}else c.e=c.s+c.xs0;h=h._next}},function(a,b,c,d,e){this.t=a,this.p=b,this.v=c,this.r=e,d&&(d._prev=this,this._next=d)}),ma=(M._parseToProxy=function(a,b,c,d,e,f){var g,h,i,j,k,l=d,m={},n={},o=c._transform,p=I;for(c._transform=null,I=b,d=k=c.parse(a,b,d,e),I=p,f&&(c._transform=o,l&&(l._prev=null,l._prev&&(l._prev._next=null)));d&&d!==l;){if(d.type<=1&&(h=d.p,n[h]=d.s+d.c,m[h]=d.s,f||(j=new la(d,"s",h,j,d.r),d.c=0),1===d.type))for(g=d.l;--g>0;)i="xn"+g,h=d.p+"_"+i,n[h]=d.data[i],m[h]=d[i],f||(j=new la(d,i,h,j,d.rxp[i]));d=d._next}return{proxy:m,end:n,firstMPT:j,pt:k}},M.CSSPropTween=function(a,b,d,e,g,h,i,j,k,l,m){this.t=a,this.p=b,this.s=d,this.c=e,this.n=i||b,a instanceof ma||f.push(this.n),this.r=j,this.type=h||0,k&&(this.pr=k,c=!0),this.b=void 0===l?d:l,this.e=void 0===m?d+e:m,g&&(this._next=g,g._prev=this)}),na=g.parseComplex=function(a,b,c,d,e,f,g,h,i,k){c=c||f||"",g=new ma(a,b,0,0,g,k?2:1,null,!1,h,c,d),d+="";var l,m,n,o,r,s,t,u,v,w,y,z,A=c.split(", ").join(",").split(" "),B=d.split(", ").join(",").split(" "),C=A.length,D=j!==!1;for(-1===d.indexOf(",")&&-1===c.indexOf(",")||(A=A.join(" ").replace(F,", ").split(" "),B=B.join(" ").replace(F,", ").split(" "),C=A.length),C!==B.length&&(A=(f||"").split(" "),C=A.length),g.plugin=i,g.setRatio=k,l=0;C>l;l++)if(o=A[l],r=B[l],u=parseFloat(o),u||0===u)g.appendXtra("",u,ca(r,u),r.replace(q,""),D&&-1!==r.indexOf("px"),!0);else if(e&&("#"===o.charAt(0)||fa[o]||x.test(o)))z=","===r.charAt(r.length-1)?"),":")",o=ha(o),r=ha(r),v=o.length+r.length>6,v&&!O&&0===r[3]?(g["xs"+g.l]+=g.l?" transparent":"transparent",g.e=g.e.split(B[l]).join("transparent")):(O||(v=!1),g.appendXtra(v?"rgba(":"rgb(",o[0],r[0]-o[0],",",!0,!0).appendXtra("",o[1],r[1]-o[1],",",!0).appendXtra("",o[2],r[2]-o[2],v?",":z,!0),
v&&(o=o.length<4?1:o[3],g.appendXtra("",o,(r.length<4?1:r[3])-o,z,!1)));else if(s=o.match(p)){if(t=r.match(q),!t||t.length!==s.length)return g;for(n=0,m=0;m<s.length;m++)y=s[m],w=o.indexOf(y,n),g.appendXtra(o.substr(n,w-n),Number(y),ca(t[m],y),"",D&&"px"===o.substr(w+y.length,2),0===m),n=w+y.length;g["xs"+g.l]+=o.substr(n)}else g["xs"+g.l]+=g.l?" "+o:o;if(-1!==d.indexOf("=")&&g.data){for(z=g.xs0+g.data.s,l=1;l<g.l;l++)z+=g["xs"+l]+g.data["xn"+l];g.e=z+g["xs"+l]}return g.l||(g.type=-1,g.xs0=g.e),g.xfirst||g},oa=9;for(i=ma.prototype,i.l=i.pr=0;--oa>0;)i["xn"+oa]=0,i["xs"+oa]="";i.xs0="",i._next=i._prev=i.xfirst=i.data=i.plugin=i.setRatio=i.rxp=null,i.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;return g["xs"+h]+=f&&h?" "+a:a||"",c||0===h||g.plugin?(g.l++,g.type=g.setRatio?2:1,g["xs"+g.l]=d||"",h>0?(g.data["xn"+h]=b+c,g.rxp["xn"+h]=e,g["xn"+h]=b,g.plugin||(g.xfirst=new ma(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr),g.xfirst.xs0=0),g):(g.data={s:b+c},g.rxp={},g.s=b,g.c=c,g.r=e,g)):(g["xs"+h]+=b+(d||""),g)};var pa=function(a,b){b=b||{},this.p=b.prefix?T(a)||a:a,h[a]=h[this.p]=this,this.format=b.formatter||ja(b.defaultValue,b.color,b.collapsible,b.multi),b.parser&&(this.parse=b.parser),this.clrs=b.color,this.multi=b.multi,this.keyword=b.keyword,this.dflt=b.defaultValue,this.pr=b.priority||0},qa=M._registerComplexSpecialProp=function(a,b,c){"object"!=typeof b&&(b={parser:c});var d,e,f=a.split(","),g=b.defaultValue;for(c=c||[g],d=0;d<f.length;d++)b.prefix=0===d&&b.prefix,b.defaultValue=c[d]||g,e=new pa(f[d],b)},ra=function(a){if(!h[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";qa(a,{parser:function(a,c,d,e,f,g,i){var j=(window.GreenSockGlobals||window).com.greensock.plugins[b];return j?(j._cssRegister(),h[d].parse(a,c,d,e,f,g,i)):(Q("Error: "+b+" js file not loaded."),f)}})}};i=pa.prototype,i.parseComplex=function(a,b,c,d,e,f){var g,h,i,j,k,l,m=this.keyword;if(this.multi&&(F.test(c)||F.test(b)?(h=b.replace(F,"|").split("|"),i=c.replace(F,"|").split("|")):m&&(h=[b],i=[c])),i){for(j=i.length>h.length?i.length:h.length,g=0;j>g;g++)b=h[g]=h[g]||this.dflt,c=i[g]=i[g]||this.dflt,m&&(k=b.indexOf(m),l=c.indexOf(m),k!==l&&(c=-1===l?i:h,c[g]+=" "+m));b=h.join(", "),c=i.join(", ")}return na(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)},i.parse=function(a,b,c,d,f,g,h){return this.parseComplex(a.style,this.format(V(a,this.p,e,!1,this.dflt)),this.format(b),f,g)},g.registerSpecialProp=function(a,b,c){qa(a,{parser:function(a,d,e,f,g,h,i){var j=new ma(a,e,0,0,g,2,e,!1,c);return j.plugin=h,j.setRatio=b(a,d,f._tween,e),j},priority:c})};var sa="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),ta=T("transform"),ua=R+"transform",va=T("transformOrigin"),wa=null!==T("perspective"),xa=function(a,b,c,d){if(a._gsTransform&&c&&!d)return a._gsTransform;var e,f,h,i,j,k,l,m,n,o,p,q,r,s=c?a._gsTransform||{skewY:0}:{skewY:0},t=s.scaleX<0,u=2e-5,v=1e5,w=179.99,x=w*G,y=wa?parseFloat(V(a,va,b,!1,"0 0 0").split(" ")[2])||s.zOrigin||0:0;for(ta?e=V(a,ua,b,!0):a.currentStyle&&(e=a.currentStyle.filter.match(D),e=e&&4===e.length?[e[0].substr(4),Number(e[2].substr(4)),Number(e[1].substr(4)),e[3].substr(4),s.x||0,s.y||0].join(","):""),f=(e||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[],h=f.length;--h>-1;)i=Number(f[h]),f[h]=(j=i-(i|=0))?(j*v+(0>j?-.5:.5)|0)/v+i:i;if(16===f.length){var z=f[8],A=f[9],B=f[10],C=f[12],E=f[13],F=f[14];if(s.zOrigin&&(F=-s.zOrigin,C=z*F-f[12],E=A*F-f[13],F=B*F+s.zOrigin-f[14]),!c||d||null==s.rotationX){var I,J,K,L,M,N,O,P=f[0],Q=f[1],R=f[2],S=f[3],T=f[4],U=f[5],W=f[6],X=f[7],Y=f[11],Z=Math.atan2(W,B),$=-x>Z||Z>x;s.rotationX=Z*H,Z&&(L=Math.cos(-Z),M=Math.sin(-Z),I=T*L+z*M,J=U*L+A*M,K=W*L+B*M,z=T*-M+z*L,A=U*-M+A*L,B=W*-M+B*L,Y=X*-M+Y*L,T=I,U=J,W=K),Z=Math.atan2(z,P),s.rotationY=Z*H,Z&&(N=-x>Z||Z>x,L=Math.cos(-Z),M=Math.sin(-Z),I=P*L-z*M,J=Q*L-A*M,K=R*L-B*M,A=Q*M+A*L,B=R*M+B*L,Y=S*M+Y*L,P=I,Q=J,R=K),Z=Math.atan2(Q,U),s.rotation=Z*H,Z&&(O=-x>Z||Z>x,L=Math.cos(-Z),M=Math.sin(-Z),P=P*L+T*M,J=Q*L+U*M,U=Q*-M+U*L,W=R*-M+W*L,Q=J),O&&$?s.rotation=s.rotationX=0:O&&N?s.rotation=s.rotationY=0:N&&$&&(s.rotationY=s.rotationX=0),s.scaleX=(Math.sqrt(P*P+Q*Q)*v+.5|0)/v,s.scaleY=(Math.sqrt(U*U+A*A)*v+.5|0)/v,s.scaleZ=(Math.sqrt(W*W+B*B)*v+.5|0)/v,s.skewX=0,s.perspective=Y?1/(0>Y?-Y:Y):0,s.x=C,s.y=E,s.z=F}}else if((!wa||d||!f.length||s.x!==f[4]||s.y!==f[5]||!s.rotationX&&!s.rotationY)&&(void 0===s.x||"none"!==V(a,"display",b))){var _=f.length>=6,aa=_?f[0]:1,ba=f[1]||0,ca=f[2]||0,da=_?f[3]:1;s.x=f[4]||0,s.y=f[5]||0,k=Math.sqrt(aa*aa+ba*ba),l=Math.sqrt(da*da+ca*ca),m=aa||ba?Math.atan2(ba,aa)*H:s.rotation||0,n=ca||da?Math.atan2(ca,da)*H+m:s.skewX||0,o=k-Math.abs(s.scaleX||0),p=l-Math.abs(s.scaleY||0),Math.abs(n)>90&&Math.abs(n)<270&&(t?(k*=-1,n+=0>=m?180:-180,m+=0>=m?180:-180):(l*=-1,n+=0>=n?180:-180)),q=(m-s.rotation)%180,r=(n-s.skewX)%180,(void 0===s.skewX||o>u||-u>o||p>u||-u>p||q>-w&&w>q&&q*v|!1||r>-w&&w>r&&r*v|!1)&&(s.scaleX=k,s.scaleY=l,s.rotation=m,s.skewX=n),wa&&(s.rotationX=s.rotationY=s.z=0,s.perspective=parseFloat(g.defaultTransformPerspective)||0,s.scaleZ=1)}s.zOrigin=y;for(h in s)s[h]<u&&s[h]>-u&&(s[h]=0);return c&&(a._gsTransform=s),s},ya=function(a){var b,c,d=this.data,e=-d.rotation*G,f=e+d.skewX*G,g=1e5,h=(Math.cos(e)*d.scaleX*g|0)/g,i=(Math.sin(e)*d.scaleX*g|0)/g,j=(Math.sin(f)*-d.scaleY*g|0)/g,k=(Math.cos(f)*d.scaleY*g|0)/g,l=this.t.style,m=this.t.currentStyle;if(m){c=i,i=-j,j=-c,b=m.filter,l.filter="";var n,p,q=this.t.offsetWidth,r=this.t.offsetHeight,s="absolute"!==m.position,v="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+i+", M21="+j+", M22="+k,w=d.x,x=d.y;if(null!=d.ox&&(n=(d.oxp?q*d.ox*.01:d.ox)-q/2,p=(d.oyp?r*d.oy*.01:d.oy)-r/2,w+=n-(n*h+p*i),x+=p-(n*j+p*k)),s?(n=q/2,p=r/2,v+=", Dx="+(n-(n*h+p*i)+w)+", Dy="+(p-(n*j+p*k)+x)+")"):v+=", sizingMethod='auto expand')",-1!==b.indexOf("DXImageTransform.Microsoft.Matrix(")?l.filter=b.replace(E,v):l.filter=v+" "+b,0!==a&&1!==a||1===h&&0===i&&0===j&&1===k&&(s&&-1===v.indexOf("Dx=0, Dy=0")||u.test(b)&&100!==parseFloat(RegExp.$1)||-1===b.indexOf(b.indexOf("Alpha"))&&l.removeAttribute("filter")),!s){var y,z,A,B=8>o?1:-1;for(n=d.ieOffsetX||0,p=d.ieOffsetY||0,d.ieOffsetX=Math.round((q-((0>h?-h:h)*q+(0>i?-i:i)*r))/2+w),d.ieOffsetY=Math.round((r-((0>k?-k:k)*r+(0>j?-j:j)*q))/2+x),oa=0;4>oa;oa++)z=_[oa],y=m[z],c=-1!==y.indexOf("px")?parseFloat(y):W(this.t,z,parseFloat(y),y.replace(t,""))||0,A=c!==d[z]?2>oa?-d.ieOffsetX:-d.ieOffsetY:2>oa?n-d.ieOffsetX:p-d.ieOffsetY,l[z]=(d[z]=Math.round(c-A*(0===oa||2===oa?1:B)))+"px"}}},za=function(a){var b,c,d,e,f,g,h,i,j,k,l,n,o,p,q,r,s,t,u,v,w,x,y,z=this.data,A=this.t.style,B=z.rotation*G,C=z.scaleX,D=z.scaleY,E=z.scaleZ,F=z.perspective;if(m){var H=1e-4;H>C&&C>-H&&(C=E=2e-5),H>D&&D>-H&&(D=E=2e-5),!F||z.z||z.rotationX||z.rotationY||(F=0)}if(B||z.skewX)t=Math.cos(B),u=Math.sin(B),b=t,f=u,z.skewX&&(B-=z.skewX*G,t=Math.cos(B),u=Math.sin(B)),c=-u,g=t;else{if(!(z.rotationY||z.rotationX||1!==E||F))return void(A[ta]="translate3d("+z.x+"px,"+z.y+"px,"+z.z+"px)"+(1!==C||1!==D?" scale("+C+","+D+")":""));b=g=1,c=f=0}l=1,d=e=h=i=j=k=n=o=p=0,q=F?-1/F:0,r=z.zOrigin,s=1e5,B=z.rotationY*G,B&&(t=Math.cos(B),u=Math.sin(B),j=l*-u,o=q*-u,d=b*u,h=f*u,l*=t,q*=t,b*=t,f*=t),B=z.rotationX*G,B&&(t=Math.cos(B),u=Math.sin(B),v=c*t+d*u,w=g*t+h*u,x=k*t+l*u,y=p*t+q*u,d=c*-u+d*t,h=g*-u+h*t,l=k*-u+l*t,q=p*-u+q*t,c=v,g=w,k=x,p=y),1!==E&&(d*=E,h*=E,l*=E,q*=E),1!==D&&(c*=D,g*=D,k*=D,p*=D),1!==C&&(b*=C,f*=C,j*=C,o*=C),r&&(n-=r,e=d*n,i=h*n,n=l*n+r),e=(v=(e+=z.x)-(e|=0))?(v*s+(0>v?-.5:.5)|0)/s+e:e,i=(v=(i+=z.y)-(i|=0))?(v*s+(0>v?-.5:.5)|0)/s+i:i,n=(v=(n+=z.z)-(n|=0))?(v*s+(0>v?-.5:.5)|0)/s+n:n,A[ta]="matrix3d("+[(b*s|0)/s,(f*s|0)/s,(j*s|0)/s,(o*s|0)/s,(c*s|0)/s,(g*s|0)/s,(k*s|0)/s,(p*s|0)/s,(d*s|0)/s,(h*s|0)/s,(l*s|0)/s,(q*s|0)/s,e,i,n,F?1+-n/F:1].join(",")+")"},Aa=function(a){var b,c,d,e,f,g,h,i,j,k=this.data,l=this.t,n=l.style;m&&(b=n.top?"top":n.bottom?"bottom":parseFloat(V(l,"top",null,!1))?"bottom":"top",c=V(l,b,null,!1),d=parseFloat(c)||0,e=c.substr((d+"").length)||"px",k._ffFix=!k._ffFix,n[b]=(k._ffFix?d+.05:d-.05)+e),k.rotation||k.skewX?(f=k.rotation*G,g=f-k.skewX*G,h=1e5,i=k.scaleX*h,j=k.scaleY*h,n[ta]="matrix("+(Math.cos(f)*i|0)/h+","+(Math.sin(f)*i|0)/h+","+(Math.sin(g)*-j|0)/h+","+(Math.cos(g)*j|0)/h+","+k.x+","+k.y+")"):n[ta]="matrix("+k.scaleX+",0,0,"+k.scaleY+","+k.x+","+k.y+")"};qa("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D",{parser:function(a,b,c,d,f,g,h){if(d._transform)return f;var i,j,k,l,m,n,o,p=d._transform=xa(a,e,!0,h.parseTransform),q=a.style,r=1e-6,s=sa.length,t=h,u={};if("string"==typeof t.transform&&ta)k=q.cssText,q[ta]=t.transform,q.display="block",i=xa(a,null,!1),q.cssText=k;else if("object"==typeof t){if(i={scaleX:da(null!=t.scaleX?t.scaleX:t.scale,p.scaleX),scaleY:da(null!=t.scaleY?t.scaleY:t.scale,p.scaleY),scaleZ:da(null!=t.scaleZ?t.scaleZ:t.scale,p.scaleZ),x:da(t.x,p.x),y:da(t.y,p.y),z:da(t.z,p.z),perspective:da(t.transformPerspective,p.perspective)},o=t.directionalRotation,null!=o)if("object"==typeof o)for(k in o)t[k]=o[k];else t.rotation=o;i.rotation=ea("rotation"in t?t.rotation:"shortRotation"in t?t.shortRotation+"_short":"rotationZ"in t?t.rotationZ:p.rotation,p.rotation,"rotation",u),wa&&(i.rotationX=ea("rotationX"in t?t.rotationX:"shortRotationX"in t?t.shortRotationX+"_short":p.rotationX||0,p.rotationX,"rotationX",u),i.rotationY=ea("rotationY"in t?t.rotationY:"shortRotationY"in t?t.shortRotationY+"_short":p.rotationY||0,p.rotationY,"rotationY",u)),i.skewX=null==t.skewX?p.skewX:ea(t.skewX,p.skewX),i.skewY=null==t.skewY?p.skewY:ea(t.skewY,p.skewY),(j=i.skewY-p.skewY)&&(i.skewX+=j,i.rotation+=j)}for(null!=t.force3D&&(p.force3D=t.force3D,n=!0),m=p.force3D||p.z||p.rotationX||p.rotationY||i.z||i.rotationX||i.rotationY||i.perspective,m||null==t.scale||(i.scaleZ=1);--s>-1;)c=sa[s],l=i[c]-p[c],(l>r||-r>l||null!=I[c])&&(n=!0,f=new ma(p,c,p[c],l,f),c in u&&(f.e=u[c]),f.xs0=0,f.plugin=g,d._overwriteProps.push(f.n));return l=t.transformOrigin,(l||wa&&m&&p.zOrigin)&&(ta?(n=!0,c=va,l=(l||V(a,c,e,!1,"50% 50%"))+"",f=new ma(q,c,0,0,f,-1,"transformOrigin"),f.b=q[c],f.plugin=g,wa?(k=p.zOrigin,l=l.split(" "),p.zOrigin=(l.length>2&&(0===k||"0px"!==l[2])?parseFloat(l[2]):k)||0,f.xs0=f.e=q[c]=l[0]+" "+(l[1]||"50%")+" 0px",f=new ma(p,"zOrigin",0,0,f,-1,f.n),f.b=k,f.xs0=f.e=p.zOrigin):f.xs0=f.e=q[c]=l):ba(l+"",p)),n&&(d._transformType=m||3===this._transformType?3:2),f},prefix:!0}),qa("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),qa("borderRadius",{defaultValue:"0px",parser:function(a,b,c,f,g,h){b=this.format(b);var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],z=a.style;for(q=parseFloat(a.offsetWidth),r=parseFloat(a.offsetHeight),i=b.split(" "),j=0;j<y.length;j++)this.p.indexOf("border")&&(y[j]=T(y[j])),m=l=V(a,y[j],e,!1,"0px"),-1!==m.indexOf(" ")&&(l=m.split(" "),m=l[0],l=l[1]),n=k=i[j],o=parseFloat(m),t=m.substr((o+"").length),u="="===n.charAt(1),u?(p=parseInt(n.charAt(0)+"1",10),n=n.substr(2),p*=parseFloat(n),s=n.substr((p+"").length-(0>p?1:0))||""):(p=parseFloat(n),s=n.substr((p+"").length)),""===s&&(s=d[c]||t),s!==t&&(v=W(a,"borderLeft",o,t),w=W(a,"borderTop",o,t),"%"===s?(m=v/q*100+"%",l=w/r*100+"%"):"em"===s?(x=W(a,"borderLeft",1,"em"),m=v/x+"em",l=w/x+"em"):(m=v+"px",l=w+"px"),u&&(n=parseFloat(m)+p+s,k=parseFloat(l)+p+s)),g=na(z,y[j],m+" "+l,n+" "+k,!1,"0px",g);return g},prefix:!0,formatter:ja("0px 0px 0px 0px",!1,!0)}),qa("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,f,g){var h,i,j,k,l,m,n="background-position",p=e||U(a,null),q=this.format((p?o?p.getPropertyValue(n+"-x")+" "+p.getPropertyValue(n+"-y"):p.getPropertyValue(n):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),r=this.format(b);if(-1!==q.indexOf("%")!=(-1!==r.indexOf("%"))&&(m=V(a,"backgroundImage").replace(A,""),m&&"none"!==m)){for(h=q.split(" "),i=r.split(" "),L.setAttribute("src",m),j=2;--j>-1;)q=h[j],k=-1!==q.indexOf("%"),k!==(-1!==i[j].indexOf("%"))&&(l=0===j?a.offsetWidth-L.width:a.offsetHeight-L.height,h[j]=k?parseFloat(q)/100*l+"px":parseFloat(q)/l*100+"%");q=h.join(" ")}return this.parseComplex(a.style,q,r,f,g)},formatter:ba}),qa("backgroundSize",{defaultValue:"0 0",formatter:ba}),qa("perspective",{defaultValue:"0px",prefix:!0}),qa("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),qa("transformStyle",{prefix:!0}),qa("backfaceVisibility",{prefix:!0}),qa("userSelect",{prefix:!0}),qa("margin",{parser:ka("marginTop,marginRight,marginBottom,marginLeft")}),qa("padding",{parser:ka("paddingTop,paddingRight,paddingBottom,paddingLeft")}),qa("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,f,g){var h,i,j;return 9>o?(i=a.currentStyle,j=8>o?" ":",",h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")",b=this.format(b).split(",").join(j)):(h=this.format(V(a,this.p,e,!1,this.dflt)),b=this.format(b)),this.parseComplex(a.style,h,b,f,g)}}),qa("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),qa("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}}),qa("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,f,g){return this.parseComplex(a.style,this.format(V(a,"borderTopWidth",e,!1,"0px")+" "+V(a,"borderTopStyle",e,!1,"solid")+" "+V(a,"borderTopColor",e,!1,"#000")),this.format(b),f,g)},color:!0,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(ia)||["#000"])[0]}}),qa("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e,f){var g=a.style,h="cssFloat"in g?"cssFloat":"styleFloat";return new ma(g,h,0,0,e,-1,c,!1,0,g[h],b)}});var Ba=function(a){var b,c=this.t,d=c.filter||V(this.data,"filter"),e=this.s+this.c*a|0;100===e&&(-1===d.indexOf("atrix(")&&-1===d.indexOf("radient(")&&-1===d.indexOf("oader(")?(c.removeAttribute("filter"),b=!V(this.data,"filter")):(c.filter=d.replace(w,""),b=!0)),b||(this.xn1&&(c.filter=d=d||"alpha(opacity="+e+")"),-1===d.indexOf("opacity")?0===e&&this.xn1||(c.filter=d+" alpha(opacity="+e+")"):c.filter=d.replace(u,"opacity="+e))};qa("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,f,g){var h=parseFloat(V(a,"opacity",e,!1,"1")),i=a.style,j="autoAlpha"===c;return"string"==typeof b&&"="===b.charAt(1)&&(b=("-"===b.charAt(0)?-1:1)*parseFloat(b.substr(2))+h),j&&1===h&&"hidden"===V(a,"visibility",e)&&0!==b&&(h=0),O?f=new ma(i,"opacity",h,b-h,f):(f=new ma(i,"opacity",100*h,100*(b-h),f),f.xn1=j?1:0,i.zoom=1,f.type=2,f.b="alpha(opacity="+f.s+")",f.e="alpha(opacity="+(f.s+f.c)+")",f.data=a,f.plugin=g,f.setRatio=Ba),j&&(f=new ma(i,"visibility",0,0,f,-1,null,!1,0,0!==h?"inherit":"hidden",0===b?"hidden":"inherit"),f.xs0="inherit",d._overwriteProps.push(f.n),d._overwriteProps.push(c)),f}});var Ca=function(a,b){b&&(a.removeProperty?a.removeProperty(b.replace(y,"-$1").toLowerCase()):a.removeAttribute(b))},Da=function(a){if(this.t._gsClassPT=this,1===a||0===a){this.t.className=0===a?this.b:this.e;for(var b=this.data,c=this.t.style;b;)b.v?c[b.p]=b.v:Ca(c,b.p),b=b._next;1===a&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};qa("className",{parser:function(a,b,d,f,g,h,i){var j,k,l,m,n,o=a.className,p=a.style.cssText;if(g=f._classNamePT=new ma(a,d,0,0,g,2),g.setRatio=Da,g.pr=-11,c=!0,g.b=o,k=Y(a,e),l=a._gsClassPT){for(m={},n=l.data;n;)m[n.p]=1,n=n._next;l.setRatio(1)}return a._gsClassPT=g,g.e="="!==b.charAt(1)?b:o.replace(new RegExp("\\s*\\b"+b.substr(2)+"\\b"),"")+("+"===b.charAt(0)?" "+b.substr(2):""),f._tween._duration&&(a.className=g.e,j=Z(a,k,Y(a),i,m),a.className=o,g.data=j.firstMPT,a.style.cssText=p,g=g.xfirst=f.parse(a,j.difs,g,h)),g}});var Ea=function(a){if((1===a||0===a)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var b,c,d,e,f=this.t.style,g=h.transform.parse;if("all"===this.e)f.cssText="",e=!0;else for(b=this.e.split(","),d=b.length;--d>-1;)c=b[d],h[c]&&(h[c].parse===g?e=!0:c="transformOrigin"===c?va:h[c].p),Ca(f,c);e&&(Ca(f,ta),this.t._gsTransform&&delete this.t._gsTransform)}};for(qa("clearProps",{parser:function(a,b,d,e,f){return f=new ma(a,d,0,0,f,2),f.setRatio=Ea,f.e=b,f.pr=-10,f.data=e._tween,c=!0,f}}),i="bezier,throwProps,physicsProps,physics2D".split(","),oa=i.length;oa--;)ra(i[oa]);i=g.prototype,i._firstPT=null,i._onInitTween=function(a,b,h){if(!a.nodeType)return!1;this._target=a,this._tween=h,this._vars=b,j=b.autoRound,c=!1,d=b.suffixMap||g.suffixMap,e=U(a,""),f=this._overwriteProps;var i,m,o,p,q,r,s,t,u,w=a.style;if(k&&""===w.zIndex&&(i=V(a,"zIndex",e),"auto"!==i&&""!==i||(w.zIndex=0)),"string"==typeof b&&(p=w.cssText,i=Y(a,e),w.cssText=p+";"+b,i=Z(a,i,Y(a)).difs,!O&&v.test(b)&&(i.opacity=parseFloat(RegExp.$1)),b=i,w.cssText=p),this._firstPT=m=this.parse(a,b,null),this._transformType){for(u=3===this._transformType,ta?l&&(k=!0,""===w.zIndex&&(s=V(a,"zIndex",e),"auto"!==s&&""!==s||(w.zIndex=0)),n&&(w.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(u?"visible":"hidden"))):w.zoom=1,o=m;o&&o._next;)o=o._next;t=new ma(a,"transform",0,0,null,2),this._linkCSSP(t,null,o),t.setRatio=u&&wa?za:ta?Aa:ya,t.data=this._transform||xa(a,e,!0),f.pop()}if(c){for(;m;){for(r=m._next,o=p;o&&o.pr>m.pr;)o=o._next;(m._prev=o?o._prev:q)?m._prev._next=m:p=m,(m._next=o)?o._prev=m:q=m,m=r}this._firstPT=p}return!0},i.parse=function(a,b,c,f){var g,i,k,l,m,n,o,p,q,r,s=a.style;for(g in b)n=b[g],i=h[g],i?c=i.parse(a,n,g,this,c,f,b):(m=V(a,g,e)+"",q="string"==typeof n,"color"===g||"fill"===g||"stroke"===g||-1!==g.indexOf("Color")||q&&x.test(n)?(q||(n=ha(n),n=(n.length>3?"rgba(":"rgb(")+n.join(",")+")"),c=na(s,g,m,n,!0,"transparent",c,0,f)):!q||-1===n.indexOf(" ")&&-1===n.indexOf(",")?(k=parseFloat(m),o=k||0===k?m.substr((k+"").length):"",""!==m&&"auto"!==m||("width"===g||"height"===g?(k=aa(a,g,e),o="px"):"left"===g||"top"===g?(k=X(a,g,e),o="px"):(k="opacity"!==g?0:1,o="")),r=q&&"="===n.charAt(1),r?(l=parseInt(n.charAt(0)+"1",10),n=n.substr(2),l*=parseFloat(n),p=n.replace(t,"")):(l=parseFloat(n),p=q?n.substr((l+"").length)||"":""),""===p&&(p=d[g]||o),n=l||0===l?(r?l+k:l)+p:b[g],o!==p&&""!==p&&(l||0===l)&&(k||0===k)&&(k=W(a,g,k,o),"%"===p?(k/=W(a,g,100,"%")/100,k>100&&(k=100),b.strictUnits!==!0&&(m=k+"%")):"em"===p?k/=W(a,g,1,"em"):(l=W(a,g,l,p),p="px"),r&&(l||0===l)&&(n=l+k+p)),r&&(l+=k),!k&&0!==k||!l&&0!==l?void 0!==s[g]&&(n||n+""!="NaN"&&null!=n)?(c=new ma(s,g,l||k||0,0,c,-1,g,!1,0,m,n),c.xs0="none"!==n||"display"!==g&&-1===g.indexOf("Style")?n:m):Q("invalid "+g+" tween value: "+b[g]):(c=new ma(s,g,k,l-k,c,0,g,j!==!1&&("px"===p||"zIndex"===g),0,m,n),c.xs0=p)):c=na(s,g,m,n,!0,null,c,0,f)),f&&c&&!c.plugin&&(c.plugin=f);return c},i.setRatio=function(a){var b,c,d,e=this._firstPT,f=1e-6;if(1!==a||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(a||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;e;){if(b=e.c*a+e.s,e.r?b=b>0?b+.5|0:b-.5|0:f>b&&b>-f&&(b=0),e.type)if(1===e.type)if(d=e.l,2===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2;else if(3===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3;else if(4===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4;else if(5===d)e.t[e.p]=e.xs0+b+e.xs1+e.xn1+e.xs2+e.xn2+e.xs3+e.xn3+e.xs4+e.xn4+e.xs5;else{for(c=e.xs0+b+e.xs1,d=1;d<e.l;d++)c+=e["xn"+d]+e["xs"+(d+1)];e.t[e.p]=c}else-1===e.type?e.t[e.p]=e.xs0:e.setRatio&&e.setRatio(a);else e.t[e.p]=b+e.xs0;e=e._next}else for(;e;)2!==e.type?e.t[e.p]=e.b:e.setRatio(a),e=e._next;else for(;e;)2!==e.type?e.t[e.p]=e.e:e.setRatio(a),e=e._next},i._enableTransforms=function(a){this._transformType=a||3===this._transformType?3:2,this._transform=this._transform||xa(this._target,e,!0)},i._linkCSSP=function(a,b,c,d){return a&&(b&&(b._prev=a),a._next&&(a._next._prev=a._prev),a._prev?a._prev._next=a._next:this._firstPT===a&&(this._firstPT=a._next,d=!0),c?c._next=a:d||null!==this._firstPT||(this._firstPT=a),a._next=b,a._prev=c),a},i._kill=function(b){var c,d,e,f=b;if(b.autoAlpha||b.alpha){f={};for(d in b)f[d]=b[d];f.opacity=1,f.autoAlpha&&(f.visibility=1)}return b.className&&(c=this._classNamePT)&&(e=c.xfirst,e&&e._prev?this._linkCSSP(e._prev,c._next,e._prev._prev):e===this._firstPT&&(this._firstPT=c._next),c._next&&this._linkCSSP(c._next,c._next._next,e._prev),this._classNamePT=null),a.prototype._kill.call(this,f)};var Fa=function(a,b,c){var d,e,f,g;if(a.slice)for(e=a.length;--e>-1;)Fa(a[e],b,c);else for(d=a.childNodes,e=d.length;--e>-1;)f=d[e],g=f.type,f.style&&(b.push(Y(f)),c&&c.push(f)),1!==g&&9!==g&&11!==g||!f.childNodes.length||Fa(f,b,c)};return g.cascadeTo=function(a,c,d){var e,f,g,h=b.to(a,c,d),i=[h],j=[],k=[],l=[],m=b._internals.reservedProps;for(a=h._targets||h.target,Fa(a,j,l),h.render(c,!0),Fa(a,k),h.render(0,!0),h._enabled(!0),e=l.length;--e>-1;)if(f=Z(l[e],j[e],k[e]),f.firstMPT){f=f.difs;for(g in d)m[g]&&(f[g]=d[g]);i.push(b.to(l[e],c,f))}return i},a.activate([g]),g},!0),function(){var a=window._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(a,b,c){return this._tween=c,!0}}),b=a.prototype;b._onInitAllProps=function(){for(var a,b,c,d=this._tween,e=d.vars.roundProps instanceof Array?d.vars.roundProps:d.vars.roundProps.split(","),f=e.length,g={},h=d._propLookup.roundProps;--f>-1;)g[e[f]]=1;for(f=e.length;--f>-1;)for(a=e[f],b=d._firstPT;b;)c=b._next,b.pg?b.t._roundProps(g,!0):b.n===a&&(this._add(b.t,a,b.s,b.c),c&&(c._prev=b._prev),b._prev?b._prev._next=c:d._firstPT===b&&(d._firstPT=c),b._next=b._prev=null,d._propLookup[a]=h),b=c;return!1},b._add=function(a,b,c,d){this._addTween(a,b,c,c+d,b,!0),this._overwriteProps.push(b)}}(),window._gsDefine.plugin({propName:"attr",API:2,init:function(a,b,c){var d;if("function"!=typeof a.setAttribute)return!1;this._target=a,this._proxy={};for(d in b)this._addTween(this._proxy,d,parseFloat(a.getAttribute(d)),b[d],d)&&this._overwriteProps.push(d);return!0},set:function(a){this._super.setRatio.call(this,a);for(var b,c=this._overwriteProps,d=c.length;--d>-1;)b=c[d],this._target.setAttribute(b,this._proxy[b]+"")}}),(window._gsQueue||(window._gsQueue=[])).push(function(){var a=Math.PI/180,b=function(a,b,c,d,e){this.p=b,this.f="function"==typeof a[b],this.start=this.value=this.f?a[b.indexOf("set")||"function"!=typeof a["get"+b.substr(3)]?b:"get"+b.substr(3)]():parseFloat(a[b]),this.velocity=c||0,this.v=this.velocity/e,d||0===d?(this.acceleration=d,this.a=this.acceleration/(e*e)):this.acceleration=this.a=0},c=Math.random(),d=window._gsDefine.globals.com.greensock.core.Animation._rootFramesTimeline,e=window._gsDefine.plugin({propName:"physics2D",API:2,init:function(c,e,f){this._target=c,this._tween=f,this._runBackwards=f.vars.runBackwards===!0,this._step=0;for(var g,h=f._timeline,i=Number(e.angle)||0,j=Number(e.velocity)||0,k=Number(e.acceleration)||0,l=e.xProp||"x",m=e.yProp||"y",n=e.accelerationAngle||0===e.accelerationAngle?Number(e.accelerationAngle):i;h._timeline;)h=h._timeline;return this._stepsPerTimeUnit=g=h===d?1:30,e.gravity&&(k=Number(e.gravity),n=90),i*=a,n*=a,this._friction=1-Number(e.friction||0),this._overwriteProps.push(l),this._overwriteProps.push(m),this._x=new b(c,l,Math.cos(i)*j,Math.cos(n)*k,g),this._y=new b(c,m,Math.sin(i)*j,Math.sin(n)*k,g),this._skipX=this._skipY=!1,!0},set:function(a){var b,c,d,e,f,g,h=this._tween._time,i=this._x,j=this._y;if(this._runBackwards===!0&&(h=this._tween._duration-h),1===this._friction)d=h*h*.5,b=i.start+(i.velocity*h+i.acceleration*d),c=j.start+(j.velocity*h+j.acceleration*d);else{if(h*=this._stepsPerTimeUnit,e=g=(0|h)-this._step,f=h%1,g>=0)for(;--g>-1;)i.v+=i.a,j.v+=j.a,i.v*=this._friction,j.v*=this._friction,i.value+=i.v,j.value+=j.v;else for(g=-g;--g>-1;)i.value-=i.v,j.value-=j.v,i.v/=this._friction,j.v/=this._friction,i.v-=i.a,j.v-=j.a;b=i.value+i.v*f,c=j.value+j.v*f,this._step+=e}this._skipX||(i.r&&(b=b+(0>b?-.5:.5)|0),i.f?this._target[i.p](b):this._target[i.p]=b),this._skipY||(j.r&&(c=c+(0>c?-.5:.5)|0),j.f?this._target[j.p](c):this._target[j.p]=c)}}),f=e.prototype;f._kill=function(a){return null!=a[this._x.p]&&(this._skipX=!0),null!=a[this._y.p]&&(this._skipY=!0),this._super._kill(a)},f._roundProps=function(a,b){(a.physics2D||a[this._x.p])&&(this._x.r=b),(a.physics2D||a[this._y.p])&&(this._y.r=b)},e._autoCSS=!0,e._cssRegister=function(){var a=window._gsDefine.globals.CSSPlugin;if(a){var b=a._internals,d=b._parseToProxy,f=b._setPluginRatio,g=b.CSSPropTween;b._registerComplexSpecialProp("physics2D",{parser:function(a,b,h,i,j,k){k=new e;var l,m=b.xProp||"x",n=b.yProp||"y",o={};return o[m]=o[n]=c++,l=d(a,o,i,j,k),j=new g(a,"physics2D",0,0,l.pt,2),j.data=l,j.plugin=k,j.setRatio=f,k._onInitTween(l.proxy,b,i._tween),j}})}}}),window._gsDefine&&window._gsQueue.pop()(),window._gsDefine.plugin({propName:"directionalRotation",API:2,init:function(a,b,c){"object"!=typeof b&&(b={rotation:b}),this.finals={};var d,e,f,g,h,i,j=b.useRadians===!0?2*Math.PI:360,k=1e-6;for(d in b)"useRadians"!==d&&(i=(b[d]+"").split("_"),e=i[0],f=parseFloat("function"!=typeof a[d]?a[d]:a[d.indexOf("set")||"function"!=typeof a["get"+d.substr(3)]?d:"get"+d.substr(3)]()),g=this.finals[d]="string"==typeof e&&"="===e.charAt(1)?f+parseInt(e.charAt(0)+"1",10)*Number(e.substr(2)):Number(e)||0,h=g-f,i.length&&(e=i.join("_"),-1!==e.indexOf("short")&&(h%=j,h!==h%(j/2)&&(h=0>h?h+j:h-j)),-1!==e.indexOf("_cw")&&0>h?h=(h+9999999999*j)%j-(h/j|0)*j:-1!==e.indexOf("ccw")&&h>0&&(h=(h-9999999999*j)%j-(h/j|0)*j)),(h>k||-k>h)&&(this._addTween(a,d,f,f+h,d),this._overwriteProps.push(d)));return!0},set:function(a){var b;if(1!==a)this._super.setRatio.call(this,a);else for(b=this._firstPT;b;)b.f?b.t[b.p](this.finals[b.p]):b.t[b.p]=this.finals[b.p],b=b._next}})._autoCSS=!0,window._gsDefine("easing.Back",["easing.Ease"],function(a){var b,c,d,e=window.GreenSockGlobals||window,f=e.com.greensock,g=2*Math.PI,h=Math.PI/2,i=f._class,j=function(b,c){var d=i("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},k=a.register||function(){},l=function(a,b,c,d,e){var f=i("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return k(f,a),f},m=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},n=function(b,c){var d=i("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},o=l("Back",n("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),n("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),n("BackInOut",function(a){return(a*=2)<1?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),p=i("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),q=p.prototype=new a;return q.constructor=p,q.getRatio=function(a){var b=a+(.5-a)*this._p;return a<this._p1?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},p.ease=new p(.7,.7),q.config=p.config=function(a,b,c){return new p(a,b,c)},b=i("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),q=b.prototype=new a,q.constructor=b,q.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},q.config=b.config=function(a){return new b(a)},c=i("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),n=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--n>-1;)c=o?Math.random():1/l*n,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=f*f*.5*r):(f=2*(1-c),e=f*f*.5*r),o?d+=Math.random()*e-.5*e:n%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new m(1,1,null),n=l;--n>-1;)g=j[n],h=new m(g.x,g.y,h);this._prev=new m(0,0,0!==h.t?h:h.next)},!0),q=c.prototype=new a,q.constructor=c,q.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&a<=b.t;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},q.config=function(a){return new c(a)},c.ease=new c,l("Bounce",j("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),j("BounceIn",function(a){return(a=1-a)<1/2.75?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),j("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),l("Circ",j("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),j("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),j("CircInOut",function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),d=function(b,c,d){var e=i("easing."+b,function(a,b){this._p1=a||1,this._p2=b||d,this._p3=this._p2/g*(Math.asin(1/this._p1)||0)},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},l("Elastic",d("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*g/this._p2)+1},.3),d("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2))},.3),d("ElasticInOut",function(a){return(a*=2)<1?-.5*(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2)):this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*g/this._p2)*.5+1},.45)),l("Expo",j("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),j("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),j("ExpoInOut",function(a){return(a*=2)<1?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),l("Sine",j("SineOut",function(a){return Math.sin(a*h)}),j("SineIn",function(a){return-Math.cos(a*h)+1}),j("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),i("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),k(e.SlowMo,"SlowMo","ease,"),k(c,"RoughEase","ease,"),k(b,"SteppedEase","ease,"),o},!0)}),function(a){"use strict";var b=a.GreenSockGlobals||a;if(!b.TweenLite){var c,d,e,f,g,h=function(a){var c,d=a.split("."),e=b;for(c=0;c<d.length;c++)e[d[c]]=e=e[d[c]]||{};return e},i=h("com.greensock"),j=1e-10,k=[].slice,l=function(){},m=function(){var a=Object.prototype.toString,b=a.call([]);return function(c){return c instanceof Array||"object"==typeof c&&!!c.push&&a.call(c)===b}}(),n={},o=function(c,d,e,f){this.sc=n[c]?n[c].sc:[],n[c]=this,this.gsClass=null,this.func=e;var g=[];this.check=function(i){for(var j,k,l,m,p=d.length,q=p;--p>-1;)(j=n[d[p]]||new o(d[p],[])).gsClass?(g[p]=j.gsClass,q--):i&&j.sc.push(this);if(0===q&&e)for(k=("com.greensock."+c).split("."),l=k.pop(),m=h(k.join("."))[l]=this.gsClass=e.apply(e,g),f&&(b[l]=m,"function"==typeof define&&define.amd?define((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+c.split(".").join("/"),[],function(){return m}):"undefined"!=typeof module&&module.exports&&(module.exports=m)),p=0;p<this.sc.length;p++)this.sc[p].check()},this.check(!0)},p=a._gsDefine=function(a,b,c,d){return new o(a,b,c,d)},q=i._class=function(a,b,c){return b=b||function(){},p(a,[],function(){return b},c),b};p.globals=b;var r=[0,0,1,1],s=[],t=q("easing.Ease",function(a,b,c,d){this._func=a,this._type=c||0,this._power=d||0,this._params=b?r.concat(b):r},!0),u=t.map={},v=t.register=function(a,b,c,d){for(var e,f,g,h,j=b.split(","),k=j.length,l=(c||"easeIn,easeOut,easeInOut").split(",");--k>-1;)for(f=j[k],e=d?q("easing."+f,null,!0):i.easing[f]||{},g=l.length;--g>-1;)h=l[g],u[f+"."+h]=u[h+f]=e[h]=a.getRatio?a:a[h]||new a};for(e=t.prototype,e._calcEnd=!1,e.getRatio=function(a){if(this._func)return this._params[0]=a,
this._func.apply(null,this._params);var b=this._type,c=this._power,d=1===b?1-a:2===b?a:.5>a?2*a:2*(1-a);return 1===c?d*=d:2===c?d*=d*d:3===c?d*=d*d*d:4===c&&(d*=d*d*d*d),1===b?1-d:2===b?d:.5>a?d/2:1-d/2},c=["Linear","Quad","Cubic","Quart","Quint,Strong"],d=c.length;--d>-1;)e=c[d]+",Power"+d,v(new t(null,null,1,d),e,"easeOut",!0),v(new t(null,null,2,d),e,"easeIn"+(0===d?",easeNone":"")),v(new t(null,null,3,d),e,"easeInOut");u.linear=i.easing.Linear.easeIn,u.swing=i.easing.Quad.easeInOut;var w=q("events.EventDispatcher",function(a){this._listeners={},this._eventTarget=a||this});e=w.prototype,e.addEventListener=function(a,b,c,d,e){e=e||0;var h,i,j=this._listeners[a],k=0;for(null==j&&(this._listeners[a]=j=[]),i=j.length;--i>-1;)h=j[i],h.c===b&&h.s===c?j.splice(i,1):0===k&&h.pr<e&&(k=i+1);j.splice(k,0,{c:b,s:c,up:d,pr:e}),this!==f||g||f.wake()},e.removeEventListener=function(a,b){var c,d=this._listeners[a];if(d)for(c=d.length;--c>-1;)if(d[c].c===b)return void d.splice(c,1)},e.dispatchEvent=function(a){var b,c,d,e=this._listeners[a];if(e)for(b=e.length,c=this._eventTarget;--b>-1;)d=e[b],d.up?d.c.call(d.s||c,{type:a,target:c}):d.c.call(d.s||c)};var x=a.requestAnimationFrame,y=a.cancelAnimationFrame,z=Date.now||function(){return(new Date).getTime()},A=z();for(c=["ms","moz","webkit","o"],d=c.length;--d>-1&&!x;)x=a[c[d]+"RequestAnimationFrame"],y=a[c[d]+"CancelAnimationFrame"]||a[c[d]+"CancelRequestAnimationFrame"];q("Ticker",function(a,b){var c,d,e,h,i,j=this,k=z(),m=b!==!1&&x,n=function(a){A=z(),j.time=(A-k)/1e3;var b,f=j.time-i;(!c||f>0||a===!0)&&(j.frame++,i+=f+(f>=h?.004:h-f),b=!0),a!==!0&&(e=d(n)),b&&j.dispatchEvent("tick")};w.call(j),j.time=j.frame=0,j.tick=function(){n(!0)},j.sleep=function(){null!=e&&(m&&y?y(e):clearTimeout(e),d=l,e=null,j===f&&(g=!1))},j.wake=function(){null!==e&&j.sleep(),d=0===c?l:m&&x?x:function(a){return setTimeout(a,1e3*(i-j.time)+1|0)},j===f&&(g=!0),n(2)},j.fps=function(a){return arguments.length?(c=a,h=1/(c||60),i=this.time+h,void j.wake()):c},j.useRAF=function(a){return arguments.length?(j.sleep(),m=a,void j.fps(c)):m},j.fps(a),setTimeout(function(){m&&(!e||j.frame<5)&&j.useRAF(!1)},1500)}),e=i.Ticker.prototype=new i.events.EventDispatcher,e.constructor=i.Ticker;var B=q("core.Animation",function(a,b){if(this.vars=b=b||{},this._duration=this._totalDuration=a||0,this._delay=Number(b.delay)||0,this._timeScale=1,this._active=b.immediateRender===!0,this.data=b.data,this._reversed=b.reversed===!0,O){g||f.wake();var c=this.vars.useFrames?N:O;c.add(this,c._time),this.vars.paused&&this.paused(!0)}});f=B.ticker=new i.Ticker,e=B.prototype,e._dirty=e._gc=e._initted=e._paused=!1,e._totalTime=e._time=0,e._rawPrevTime=-1,e._next=e._last=e._onUpdate=e._timeline=e.timeline=null,e._paused=!1;var C=function(){g&&z()-A>2e3&&f.wake(),setTimeout(C,2e3)};C(),e.play=function(a,b){return arguments.length&&this.seek(a,b),this.reversed(!1).paused(!1)},e.pause=function(a,b){return arguments.length&&this.seek(a,b),this.paused(!0)},e.resume=function(a,b){return console.log("resume   ",a,b),arguments.length&&this.seek(a,b),this.paused(!1)},e.seek=function(a,b){return this.totalTime(Number(a),b!==!1)},e.restart=function(a,b){return this.reversed(!1).paused(!1).totalTime(a?-this._delay:0,b!==!1,!0)},e.reverse=function(a,b){return arguments.length&&this.seek(a||this.totalDuration(),b),this.reversed(!0).paused(!1)},e.render=function(a,b,c){},e.invalidate=function(){return this},e.isActive=function(){var a,b=this._timeline,c=this._startTime;return!b||!this._gc&&!this._paused&&b.isActive()&&(a=b.rawTime())>=c&&a<c+this.totalDuration()/this._timeScale},e._enabled=function(a,b){return g||f.wake(),this._gc=!a,this._active=this.isActive(),b!==!0&&(a&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!a&&this.timeline&&this._timeline._remove(this,!0)),!1},e._kill=function(a,b){return this._enabled(!1,!1)},e.kill=function(a,b){return this._kill(a,b),this},e._uncache=function(a){for(var b=a?this:this.timeline;b;)b._dirty=!0,b=b.timeline;return this},e._swapSelfInParams=function(a){for(var b=a.length,c=a.concat();--b>-1;)"{self}"===a[b]&&(c[b]=this);return c},e.eventCallback=function(a,b,c,d){if("on"===(a||"").substr(0,2)){var e=this.vars;if(1===arguments.length)return e[a];null==b?delete e[a]:(e[a]=b,e[a+"Params"]=m(c)&&-1!==c.join("").indexOf("{self}")?this._swapSelfInParams(c):c,e[a+"Scope"]=d),"onUpdate"===a&&(this._onUpdate=b)}return this},e.delay=function(a){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+a-this._delay),this._delay=a,this):this._delay},e.duration=function(a){return arguments.length?(this._duration=this._totalDuration=a,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==a&&this.totalTime(this._totalTime*(a/this._duration),!0),this):(this._dirty=!1,this._duration)},e.totalDuration=function(a){return this._dirty=!1,arguments.length?this.duration(a):this._totalDuration},e.time=function(a,b){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(a>this._duration?this._duration:a,b)):this._time},e.totalTime=function(a,b,c){if(g||f.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>a&&!c&&(a+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var d=this._totalDuration,e=this._timeline;if(a>d&&!c&&(a=d),this._startTime=(this._paused?this._pauseTime:e._time)-(this._reversed?d-a:a)/this._timeScale,e._dirty||this._uncache(!1),e._timeline)for(;e._timeline;)e._timeline._time!==(e._startTime+e._totalTime)/e._timeScale&&e.totalTime(e._totalTime,!0),e=e._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===a&&0!==this._duration||this.render(a,b,!1)}return this},e.progress=e.totalProgress=function(a,b){return arguments.length?this.totalTime(this.duration()*a,b):this._time/this.duration()},e.startTime=function(a){return arguments.length?(a!==this._startTime&&(this._startTime=a,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,a-this._delay)),this):this._startTime},e.timeScale=function(a){if(!arguments.length)return this._timeScale;if(a=a||j,this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,c=b||0===b?b:this._timeline.totalTime();this._startTime=c-(c-this._startTime)*this._timeScale/a}return this._timeScale=a,this._uncache(!1)},e.reversed=function(a){return arguments.length?(a!=this._reversed&&(this._reversed=a,this.totalTime(this._totalTime,!0)),this):this._reversed},e.paused=function(a){if(!arguments.length)return this._paused;if(a!=this._paused&&this._timeline){g||a||f.wake();var b=this._timeline,c=b.rawTime(),d=c-this._pauseTime;!a&&b.smoothChildTiming&&(this._startTime+=d,this._uncache(!1)),this._pauseTime=a?c:null,this._paused=a,this._active=this.isActive(),!a&&0!==d&&this._initted&&this.duration()&&this.render(b.smoothChildTiming?this._totalTime:(c-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!a&&this._enabled(!0,!1),this};var D=q("core.SimpleTimeline",function(a){B.call(this,0,a),this.autoRemoveChildren=this.smoothChildTiming=!0});e=D.prototype=new B,e.constructor=D,e.kill()._gc=!1,e._first=e._last=null,e._sortChildren=!1,e.add=e.insert=function(a,b,c,d){var e,f;if(a._startTime=Number(b||0)+a._delay,a._paused&&this!==a._timeline&&(a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale),a.timeline&&a.timeline._remove(a,!0),a.timeline=a._timeline=this,a._gc&&a._enabled(!0,!0),e=this._last,this._sortChildren)for(f=a._startTime;e&&e._startTime>f;)e=e._prev;return e?(a._next=e._next,e._next=a):(a._next=this._first,this._first=a),a._next?a._next._prev=a:this._last=a,a._prev=e,this._timeline&&this._uncache(!0),this},e._remove=function(a,b){return a.timeline===this&&(b||a._enabled(!1,!0),a.timeline=null,a._prev?a._prev._next=a._next:this._first===a&&(this._first=a._next),a._next?a._next._prev=a._prev:this._last===a&&(this._last=a._prev),this._timeline&&this._uncache(!0)),this},e.render=function(a,b,c){var d,e=this._first;for(this._totalTime=this._time=this._rawPrevTime=a;e;)d=e._next,(e._active||a>=e._startTime&&!e._paused)&&(e._reversed?e.render((e._dirty?e.totalDuration():e._totalDuration)-(a-e._startTime)*e._timeScale,b,c):e.render((a-e._startTime)*e._timeScale,b,c)),e=d},e.rawTime=function(){return g||f.wake(),this._totalTime};var E=q("TweenLite",function(b,c,d){if(B.call(this,c,d),this.render=E.prototype.render,null==b)throw"Cannot tween a null target.";this.target=b="string"!=typeof b?b:E.selector(b)||b;var e,f,g,h=b.jquery||b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType),i=this.vars.overwrite;if(this._overwrite=i=null==i?M[E.defaultOverwrite]:"number"==typeof i?i>>0:M[i],(h||b instanceof Array||b.push&&m(b))&&"number"!=typeof b[0])for(this._targets=g=k.call(b,0),this._propLookup=[],this._siblings=[],e=0;e<g.length;e++)f=g[e],f?"string"!=typeof f?f.length&&f!==a&&f[0]&&(f[0]===a||f[0].nodeType&&f[0].style&&!f.nodeType)?(g.splice(e--,1),this._targets=g=g.concat(k.call(f,0))):(this._siblings[e]=P(f,this,!1),1===i&&this._siblings[e].length>1&&Q(f,this,null,1,this._siblings[e])):(f=g[e--]=E.selector(f),"string"==typeof f&&g.splice(e+1,1)):g.splice(e--,1);else this._propLookup={},this._siblings=P(b,this,!1),1===i&&this._siblings.length>1&&Q(b,this,null,1,this._siblings);(this.vars.immediateRender||0===c&&0===this._delay&&this.vars.immediateRender!==!1)&&this.render(-this._delay,!1,!0)},!0),F=function(b){return b.length&&b!==a&&b[0]&&(b[0]===a||b[0].nodeType&&b[0].style&&!b.nodeType)},G=function(a,b){var c,d={};for(c in a)L[c]||c in b&&"x"!==c&&"y"!==c&&"width"!==c&&"height"!==c&&"className"!==c&&"border"!==c||!(!I[c]||I[c]&&I[c]._autoCSS)||(d[c]=a[c],delete a[c]);a.css=d};e=E.prototype=new B,e.constructor=E,e.kill()._gc=!1,e.ratio=0,e._firstPT=e._targets=e._overwrittenProps=e._startAt=null,e._notifyPluginsOfEnabled=!1,E.version="1.11.2",E.defaultEase=e._ease=new t(null,null,1,1),E.defaultOverwrite="auto",E.ticker=f,E.autoSleep=!0,E.selector=a.$||a.jQuery||function(b){return a.$?(E.selector=a.$,a.$(b)):a.document?a.document.getElementById("#"===b.charAt(0)?b.substr(1):b):b};var H=E._internals={isArray:m,isSelector:F},I=E._plugins={},J=E._tweenLookup={},K=0,L=H.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},M={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},N=B._rootFramesTimeline=new D,O=B._rootTimeline=new D;O._startTime=f.time,N._startTime=f.frame,O._active=N._active=!0,B._updateRoot=function(){if(O.render((f.time-O._startTime)*O._timeScale,!1,!1),N.render((f.frame-N._startTime)*N._timeScale,!1,!1),!(f.frame%120)){var a,b,c;for(c in J){for(b=J[c].tweens,a=b.length;--a>-1;)b[a]._gc&&b.splice(a,1);0===b.length&&delete J[c]}if(c=O._first,(!c||c._paused)&&E.autoSleep&&!N._first&&1===f._listeners.tick.length){for(;c&&c._paused;)c=c._next;c||f.sleep()}}},f.addEventListener("tick",B._updateRoot);var P=function(a,b,c){var d,e,f=a._gsTweenID;if(J[f||(a._gsTweenID=f="t"+K++)]||(J[f]={target:a,tweens:[]}),b&&(d=J[f].tweens,d[e=d.length]=b,c))for(;--e>-1;)d[e]===b&&d.splice(e,1);return J[f].tweens},Q=function(a,b,c,d,e){var f,g,h,i;if(1===d||d>=4){for(i=e.length,f=0;i>f;f++)if((h=e[f])!==b)h._gc||h._enabled(!1,!1)&&(g=!0);else if(5===d)break;return g}var k,l=b._startTime+j,m=[],n=0,o=0===b._duration;for(f=e.length;--f>-1;)(h=e[f])===b||h._gc||h._paused||(h._timeline!==b._timeline?(k=k||R(b,0,o),0===R(h,k,o)&&(m[n++]=h)):h._startTime<=l&&h._startTime+h.totalDuration()/h._timeScale+j>l&&((o||!h._initted)&&l-h._startTime<=2e-10||(m[n++]=h)));for(f=n;--f>-1;)h=m[f],2===d&&h._kill(c,a)&&(g=!0),(2!==d||!h._firstPT&&h._initted)&&h._enabled(!1,!1)&&(g=!0);return g},R=function(a,b,c){for(var d=a._timeline,e=d._timeScale,f=a._startTime;d._timeline;){if(f+=d._startTime,e*=d._timeScale,d._paused)return-100;d=d._timeline}return f/=e,f>b?f-b:c&&f===b||!a._initted&&2*j>f-b?j:(f+=a.totalDuration()/a._timeScale/e)>b+j?0:f-b-j};e._init=function(){var a,b,c,d,e=this.vars,f=this._overwrittenProps,g=this._duration,h=e.immediateRender,i=e.ease;if(e.startAt){if(this._startAt&&this._startAt.render(-1,!0),e.startAt.overwrite=0,e.startAt.immediateRender=!0,this._startAt=E.to(this.target,0,e.startAt),h)if(this._time>0)this._startAt=null;else if(0!==g)return}else if(e.runBackwards&&0!==g)if(this._startAt)this._startAt.render(-1,!0),this._startAt=null;else{c={};for(d in e)L[d]&&"autoCSS"!==d||(c[d]=e[d]);if(c.overwrite=0,c.data="isFromStart",this._startAt=E.to(this.target,0,c),e.immediateRender){if(0===this._time)return}else this._startAt.render(-1,!0)}if(i?i instanceof t?this._ease=e.easeParams instanceof Array?i.config.apply(i,e.easeParams):i:this._ease="function"==typeof i?new t(i,e.easeParams):u[i]||E.defaultEase:this._ease=E.defaultEase,this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length;--a>-1;)this._initProps(this._targets[a],this._propLookup[a]={},this._siblings[a],f?f[a]:null)&&(b=!0);else b=this._initProps(this.target,this._propLookup,this._siblings,f);if(b&&E._onPluginEvent("_onInitAllProps",this),f&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),e.runBackwards)for(c=this._firstPT;c;)c.s+=c.c,c.c=-c.c,c=c._next;this._onUpdate=e.onUpdate,this._initted=!0},e._initProps=function(b,c,d,e){var f,g,h,i,j,k;if(null==b)return!1;this.vars.css||b.style&&b!==a&&b.nodeType&&I.css&&this.vars.autoCSS!==!1&&G(this.vars,b);for(f in this.vars){if(k=this.vars[f],L[f])k&&(k instanceof Array||k.push&&m(k))&&-1!==k.join("").indexOf("{self}")&&(this.vars[f]=k=this._swapSelfInParams(k,this));else if(I[f]&&(i=new I[f])._onInitTween(b,this.vars[f],this)){for(this._firstPT=j={_next:this._firstPT,t:i,p:"setRatio",s:0,c:1,f:!0,n:f,pg:!0,pr:i._priority},g=i._overwriteProps.length;--g>-1;)c[i._overwriteProps[g]]=this._firstPT;(i._priority||i._onInitAllProps)&&(h=!0),(i._onDisable||i._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=c[f]=j={_next:this._firstPT,t:b,p:f,f:"function"==typeof b[f],n:f,pg:!1,pr:0},j.s=j.f?b[f.indexOf("set")||"function"!=typeof b["get"+f.substr(3)]?f:"get"+f.substr(3)]():parseFloat(b[f]),j.c="string"==typeof k&&"="===k.charAt(1)?parseInt(k.charAt(0)+"1",10)*Number(k.substr(2)):Number(k)-j.s||0;j&&j._next&&(j._next._prev=j)}return e&&this._kill(e,b)?this._initProps(b,c,d,e):this._overwrite>1&&this._firstPT&&d.length>1&&Q(b,this,c,this._overwrite,d)?(this._kill(c,b),this._initProps(b,c,d,e)):h},e.render=function(a,b,c){var d,e,f,g,h=this._time,i=this._duration;if(a>=i)this._totalTime=this._time=i,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(d=!0,e="onComplete"),0===i&&(g=this._rawPrevTime,(0===a||0>g||g===j)&&g!==a&&(c=!0,g>j&&(e="onReverseComplete")),this._rawPrevTime=g=!b||a?a:j);else if(1e-7>a)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==h||0===i&&this._rawPrevTime>j)&&(e="onReverseComplete",d=this._reversed),0>a?(this._active=!1,0===i&&(this._rawPrevTime>=0&&(c=!0),this._rawPrevTime=g=!b||a?a:j)):this._initted||(c=!0);else if(this._totalTime=this._time=a,this._easeType){var k=a/i,l=this._easeType,m=this._easePower;(1===l||3===l&&k>=.5)&&(k=1-k),3===l&&(k*=2),1===m?k*=k:2===m?k*=k*k:3===m?k*=k*k*k:4===m&&(k*=k*k*k*k),1===l?this.ratio=1-k:2===l?this.ratio=k:.5>a/i?this.ratio=k/2:this.ratio=1-k/2}else this.ratio=this._ease.getRatio(a/i);if(this._time!==h||c){if(!this._initted){if(this._init(),!this._initted||this._gc)return;this._time&&!d?this.ratio=this._ease.getRatio(this._time/i):d&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==h&&a>=0&&(this._active=!0),0===h&&(this._startAt&&(a>=0?this._startAt.render(a,b,c):e||(e="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==i||b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||s))),f=this._firstPT;f;)f.f?f.t[f.p](f.c*this.ratio+f.s):f.t[f.p]=f.c*this.ratio+f.s,f=f._next;this._onUpdate&&(0>a&&this._startAt&&this._startTime&&this._startAt.render(a,b,c),b||c&&0===this._time&&0===h||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||s)),e&&(this._gc||(0>a&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(a,b,c),d&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[e]&&this.vars[e].apply(this.vars[e+"Scope"]||this,this.vars[e+"Params"]||s),0===i&&this._rawPrevTime===j&&g!==j&&(this._rawPrevTime=0)))}},e._kill=function(a,b){if("all"===a&&(a=null),null==a&&(null==b||b===this.target))return this._enabled(!1,!1);b="string"!=typeof b?b||this._targets||this.target:E.selector(b)||b;var c,d,e,f,g,h,i,j;if((m(b)||F(b))&&"number"!=typeof b[0])for(c=b.length;--c>-1;)this._kill(a,b[c])&&(h=!0);else{if(this._targets){for(c=this._targets.length;--c>-1;)if(b===this._targets[c]){g=this._propLookup[c]||{},this._overwrittenProps=this._overwrittenProps||[],d=this._overwrittenProps[c]=a?this._overwrittenProps[c]||{}:"all";break}}else{if(b!==this.target)return!1;g=this._propLookup,d=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(g){i=a||g,j=a!==d&&"all"!==d&&a!==g&&("object"!=typeof a||!a._tempKill);for(e in i)(f=g[e])&&(f.pg&&f.t._kill(i)&&(h=!0),f.pg&&0!==f.t._overwriteProps.length||(f._prev?f._prev._next=f._next:f===this._firstPT&&(this._firstPT=f._next),f._next&&(f._next._prev=f._prev),f._next=f._prev=null),delete g[e]),j&&(d[e]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return h},e.invalidate=function(){return this._notifyPluginsOfEnabled&&E._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=!1,this._propLookup=this._targets?{}:[],this},e._enabled=function(a,b){if(g||f.wake(),a&&this._gc){var c,d=this._targets;if(d)for(c=d.length;--c>-1;)this._siblings[c]=P(d[c],this,!0);else this._siblings=P(this.target,this,!0)}return B.prototype._enabled.call(this,a,b),this._notifyPluginsOfEnabled&&this._firstPT?E._onPluginEvent(a?"_onEnable":"_onDisable",this):!1},E.to=function(a,b,c){return new E(a,b,c)},E.from=function(a,b,c){return c.runBackwards=!0,c.immediateRender=0!=c.immediateRender,new E(a,b,c)},E.fromTo=function(a,b,c,d){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,new E(a,b,d)},E.delayedCall=function(a,b,c,d,e){return new E(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:!1,useFrames:e,overwrite:0})},E.set=function(a,b){return new E(a,0,b)},E.getTweensOf=function(a,b){if(null==a)return[];a="string"!=typeof a?a:E.selector(a)||a;var c,d,e,f;if((m(a)||F(a))&&"number"!=typeof a[0]){for(c=a.length,d=[];--c>-1;)d=d.concat(E.getTweensOf(a[c],b));for(c=d.length;--c>-1;)for(f=d[c],e=c;--e>-1;)f===d[e]&&d.splice(c,1)}else for(d=P(a).concat(),c=d.length;--c>-1;)(d[c]._gc||b&&!d[c].isActive())&&d.splice(c,1);return d},E.killTweensOf=E.killDelayedCallsTo=function(a,b,c){"object"==typeof b&&(c=b,b=!1);for(var d=E.getTweensOf(a,b),e=d.length;--e>-1;)d[e]._kill(c,a)};var S=q("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(","),this._propName=this._overwriteProps[0],this._priority=b||0,this._super=S.prototype},!0);if(e=S.prototype,S.version="1.10.1",S.API=2,e._firstPT=null,e._addTween=function(a,b,c,d,e,f){var g,h;return null!=d&&(g="number"==typeof d||"="!==d.charAt(1)?Number(d)-c:parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)))?(this._firstPT=h={_next:this._firstPT,t:a,p:b,s:c,c:g,f:"function"==typeof a[b],n:e||b,r:f},h._next&&(h._next._prev=h),h):void 0},e.setRatio=function(a){for(var b,c=this._firstPT,d=1e-6;c;)b=c.c*a+c.s,c.r?b=b+(b>0?.5:-.5)|0:d>b&&b>-d&&(b=0),c.f?c.t[c.p](b):c.t[c.p]=b,c=c._next},e._kill=function(a){var b,c=this._overwriteProps,d=this._firstPT;if(null!=a[this._propName])this._overwriteProps=[];else for(b=c.length;--b>-1;)null!=a[c[b]]&&c.splice(b,1);for(;d;)null!=a[d.n]&&(d._next&&(d._next._prev=d._prev),d._prev?(d._prev._next=d._next,d._prev=null):this._firstPT===d&&(this._firstPT=d._next)),d=d._next;return!1},e._roundProps=function(a,b){for(var c=this._firstPT;c;)(a[this._propName]||null!=c.n&&a[c.n.split(this._propName+"_").join("")])&&(c.r=b),c=c._next},E._onPluginEvent=function(a,b){var c,d,e,f,g,h=b._firstPT;if("_onInitAllProps"===a){for(;h;){for(g=h._next,d=e;d&&d.pr>h.pr;)d=d._next;(h._prev=d?d._prev:f)?h._prev._next=h:e=h,(h._next=d)?d._prev=h:f=h,h=g}h=b._firstPT=e}for(;h;)h.pg&&"function"==typeof h.t[a]&&h.t[a]()&&(c=!0),h=h._next;return c},S.activate=function(a){for(var b=a.length;--b>-1;)a[b].API===S.API&&(I[(new a[b])._propName]=a[b]);return!0},p.plugin=function(a){if(!(a&&a.propName&&a.init&&a.API))throw"illegal plugin definition.";var b,c=a.propName,d=a.priority||0,e=a.overwriteProps,f={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},g=q("plugins."+c.charAt(0).toUpperCase()+c.substr(1)+"Plugin",function(){S.call(this,c,d),this._overwriteProps=e||[]},a.global===!0),h=g.prototype=new S(c);h.constructor=g,g.API=a.API;for(b in f)"function"==typeof a[b]&&(h[f[b]]=a[b]);return g.version=a.version,S.activate([g]),g},c=a._gsQueue){for(d=0;d<c.length;d++)c[d]();for(e in n)n[e].func||a.console.log("GSAP encountered missing dependency: com.greensock."+e)}g=!1}}(window),function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=PIXI.spine={Spine:a("./Spine"),SpineRuntime:a("./SpineRuntime"),loaders:a("./loaders")}},{"./Spine":41,"./SpineRuntime":39,"./loaders":45}],2:[function(a,b,c){var d=a("../SpineUtil");d.Animation=function(a,b,c){this.name=a,this.timelines=b,this.duration=c},d.Animation.prototype={apply:function(a,b,c,d,e){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var f=this.timelines,g=0,h=f.length;h>g;g++)f[g].apply(a,b,c,e,1)},mix:function(a,b,c,d,e,f){d&&0!=this.duration&&(c%=this.duration,b%=this.duration);for(var g=this.timelines,h=0,i=g.length;i>h;h++)g[h].apply(a,b,c,e,f)}},d.Animation.binarySearch=function(a,b,c){var d=0,e=Math.floor(a.length/c)-2;if(!e)return c;for(var f=e>>>1;;){if(a[(f+1)*c]<=b?d=f+1:e=f,d==e)return(d+1)*c;f=d+e>>>1}},d.Animation.binarySearch1=function(a,b){var c=0,d=a.length-2;if(!d)return 1;for(var e=d>>>1;;){if(a[e+1]<=b?c=e+1:d=e,c==d)return c+1;e=c+d>>>1}},d.Animation.linearSearch=function(a,b,c){for(var d=0,e=a.length-c;e>=d;d+=c)if(a[d]>b)return d;return-1},b.exports=d.Animation},{"../SpineUtil":40}],3:[function(a,b,c){var d=a("../SpineUtil");d.TrackEntry=a("./TrackEntry"),d.AnimationState=function(a){this.data=a,this.tracks=[],this.events=[]},d.AnimationState.prototype={onStart:null,onEnd:null,onComplete:null,onEvent:null,timeScale:1,update:function(a){a*=this.timeScale;for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){if(c.time+=a*c.timeScale,c.previous){var d=a*c.previous.timeScale;c.previous.time+=d,c.mixTime+=d}var e=c.next;e?(e.time=c.lastTime-e.delay,e.time>=0&&this.setCurrent(b,e)):!c.loop&&c.lastTime>=c.endTime&&this.clearTrack(b)}}},apply:function(a){a.resetDrawOrder();for(var b=0;b<this.tracks.length;b++){var c=this.tracks[b];if(c){this.events.length=0;var d=c.time,e=c.lastTime,f=c.endTime,g=c.loop;!g&&d>f&&(d=f);var h=c.previous;if(h){var i=h.time;!h.loop&&i>h.endTime&&(i=h.endTime),h.animation.apply(a,i,i,h.loop,null);var j=c.mixTime/c.mixDuration*c.mix;j>=1&&(j=1,c.previous=null),c.animation.mix(a,c.lastTime,d,g,this.events,j)}else 1==c.mix?c.animation.apply(a,c.lastTime,d,g,this.events):c.animation.mix(a,c.lastTime,d,g,this.events,c.mix);for(var k=0,l=this.events.length;l>k;k++){var m=this.events[k];c.onEvent&&c.onEvent(b,m),this.onEvent&&this.onEvent(b,m)}if(g?e%f>d%f:f>e&&d>=f){var n=Math.floor(d/f);c.onComplete&&c.onComplete(b,n),this.onComplete&&this.onComplete(b,n)}c.lastTime=c.time}}},clearTracks:function(){for(var a=0,b=this.tracks.length;b>a;a++)this.clearTrack(a);this.tracks.length=0},clearTrack:function(a){if(!(a>=this.tracks.length)){var b=this.tracks[a];b&&(b.onEnd&&b.onEnd(a),this.onEnd&&this.onEnd(a),this.tracks[a]=null)}},_expandToIndex:function(a){if(a<this.tracks.length)return this.tracks[a];for(;a>=this.tracks.length;)this.tracks.push(null);return null},setCurrent:function(a,b){var c=this._expandToIndex(a);if(c){var d=c.previous;c.previous=null,c.onEnd&&c.onEnd(a),this.onEnd&&this.onEnd(a),b.mixDuration=this.data.getMix(c.animation,b.animation),b.mixDuration>0&&(b.mixTime=0,d&&c.mixTime/c.mixDuration<.5?b.previous=d:b.previous=c)}this.tracks[a]=b,b.onStart&&b.onStart(a),this.onStart&&this.onStart(a)},setAnimationByName:function(a,b,c){var d=this.data.skeletonData.findAnimation(b);if(!d)throw"Animation not found: "+b;return this.setAnimation(a,d,c)},setAnimation:function(a,b,c){var e=new d.TrackEntry;return e.animation=b,e.loop=c,e.endTime=b.duration,this.setCurrent(a,e),e},addAnimationByName:function(a,b,c,d){var e=this.data.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;return this.addAnimation(a,e,c,d)},addAnimation:function(a,b,c,e){var f=new d.TrackEntry;f.animation=b,f.loop=c,f.endTime=b.duration;var g=this._expandToIndex(a);if(g){for(;g.next;)g=g.next;g.next=f}else this.tracks[a]=f;return 0>=e&&(g?e+=g.endTime-this.data.getMix(g.animation,b):e=0),f.delay=e,f},getCurrent:function(a){return a>=this.tracks.length?null:this.tracks[a]}},b.exports=d.AnimationState},{"../SpineUtil":40,"./TrackEntry":36}],4:[function(a,b,c){var d=a("../SpineUtil");d.AnimationStateData=function(a){this.skeletonData=a,this.animationToMixTime={}},d.AnimationStateData.prototype={defaultMix:0,setMixByName:function(a,b,c){var d=this.skeletonData.findAnimation(a);if(!d)throw"Animation not found: "+a;var e=this.skeletonData.findAnimation(b);if(!e)throw"Animation not found: "+b;this.setMix(d,e,c)},setMix:function(a,b,c){this.animationToMixTime[a.name+":"+b.name]=c},getMix:function(a,b){var c=a.name+":"+b.name;return this.animationToMixTime.hasOwnProperty(c)?this.animationToMixTime[c]:this.defaultMix}},b.exports=d.AnimationStateData},{"../SpineUtil":40}],5:[function(a,b,c){var d=a("../SpineUtil");d.AtlasReader=a("./AtlasReader"),d.AtlasPage=a("./AtlasPage"),d.AtlasRegion=a("./AtlasRegion");var e=a("../loaders/syncImageLoaderAdapter.js");d.Atlas=function(a,b,c){function f(){for(;;){var a=j.readLine();if(null===a)return c&&c(i);if(a=j.trim(a),a.length){if(!l){l=new d.AtlasPage,l.name=a,2==j.readTuple(k)&&(l.width=parseInt(k[0]),l.height=parseInt(k[1]),j.readTuple(k)),l.format=d.Atlas.Format[k[0]],j.readTuple(k),l.minFilter=d.Atlas.TextureFilter[k[0]],l.magFilter=d.Atlas.TextureFilter[k[1]];var e=j.readValue();l.uWrap=d.Atlas.TextureWrap.clampToEdge,l.vWrap=d.Atlas.TextureWrap.clampToEdge,"x"==e?l.uWrap=d.Atlas.TextureWrap.repeat:"y"==e?l.vWrap=d.Atlas.TextureWrap.repeat:"xy"==e&&(l.uWrap=l.vWrap=d.Atlas.TextureWrap.repeat),b(a,function(a){l.rendererObject=a,i.pages.push(l),l.width&&l.height||(l.width=a.width,l.height=a.height,l.width&&l.height||console.log("ERROR spine atlas page "+l.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),f()});break}var g=new d.AtlasRegion;g.name=a,g.page=l,g.rotate="true"==j.readValue(),j.readTuple(k);var h=parseInt(k[0]),m=parseInt(k[1]);j.readTuple(k);var n=parseInt(k[0]),o=parseInt(k[1]);g.u=h/l.width,g.v=m/l.height,g.rotate?(g.u2=(h+o)/l.width,g.v2=(m+n)/l.height):(g.u2=(h+n)/l.width,g.v2=(m+o)/l.height);var p=l.rendererObject.resolution;g.x=h/p,g.y=m/p,g.width=Math.abs(n)/p,g.height=Math.abs(o)/p,4==j.readTuple(k)&&(g.splits=[parseInt(k[0]),parseInt(k[1]),parseInt(k[2]),parseInt(k[3])],4==j.readTuple(k)&&(g.pads=[parseInt(k[0]),parseInt(k[1]),parseInt(k[2]),parseInt(k[3])],j.readTuple(k))),g.originalWidth=parseInt(k[0])/p,g.originalHeight=parseInt(k[1])/p,j.readTuple(k),g.offsetX=parseInt(k[0])/p,g.offsetY=parseInt(k[1])/p,g.index=parseInt(j.readValue()),i.regions.push(g)}else l=null}}if("function"!=typeof b){var g=b,h=c;b=e(g,h),c=null}this.pages=[],this.regions=[],this.texturesLoading=0;var i=this,j=new d.AtlasReader(a),k=[];k.length=4;var l=null;f()},d.Atlas.prototype={findRegion:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},dispose:function(){for(var a=this.pages,b=0,c=a.length;c>b;b++)a[b].rendererObject.destroy(!0)},updateUVs:function(a){for(var b=this.regions,c=0,d=b.length;d>c;c++){var e=b[c];e.page==a&&(e.u=e.x/a.width,e.v=e.y/a.height,e.rotate?(e.u2=(e.x+e.height)/a.width,e.v2=(e.y+e.width)/a.height):(e.u2=(e.x+e.width)/a.width,e.v2=(e.y+e.height)/a.height))}}},d.Atlas.Format={alpha:0,intensity:1,luminanceAlpha:2,rgb565:3,rgba4444:4,rgb888:5,rgba8888:6},d.Atlas.TextureFilter={nearest:0,linear:1,mipMap:2,mipMapNearestNearest:3,mipMapLinearNearest:4,mipMapNearestLinear:5,mipMapLinearLinear:6},d.Atlas.TextureWrap={mirroredRepeat:0,clampToEdge:1,repeat:2},b.exports=d.Atlas},{"../SpineUtil":40,"../loaders/syncImageLoaderAdapter.js":46,"./AtlasPage":7,"./AtlasReader":8,"./AtlasRegion":9}],6:[function(a,b,c){var d=a("../SpineUtil");d.RegionAttachment=a("./RegionAttachment"),d.MeshAttachment=a("./MeshAttachment"),d.WeightedMeshAttachment=a("./WeightedMeshAttachment"),d.BoundingBoxAttachment=a("./BoundingBoxAttachment"),d.AtlasAttachmentParser=function(a){this.atlas=a},d.AtlasAttachmentParser.prototype={newRegionAttachment:function(a,b,c){var e=this.atlas.findRegion(c);if(!e)throw"Region not found in atlas: "+c+" (region attachment: "+b+")";var f=new d.RegionAttachment(b);return f.rendererObject=e,f.setUVs(e.u,e.v,e.u2,e.v2,e.rotate),f.regionOffsetX=e.offsetX,f.regionOffsetY=e.offsetY,f.regionWidth=e.width,f.regionHeight=e.height,f.regionOriginalWidth=e.originalWidth,f.regionOriginalHeight=e.originalHeight,f},newMeshAttachment:function(a,b,c){var e=this.atlas.findRegion(c);if(!e)throw"Region not found in atlas: "+c+" (mesh attachment: "+b+")";var f=new d.MeshAttachment(b);return f.rendererObject=e,f.regionU=e.u,f.regionV=e.v,f.regionU2=e.u2,f.regionV2=e.v2,f.regionRotate=e.rotate,f.regionOffsetX=e.offsetX,f.regionOffsetY=e.offsetY,f.regionWidth=e.width,f.regionHeight=e.height,f.regionOriginalWidth=e.originalWidth,f.regionOriginalHeight=e.originalHeight,f},newWeightedMeshAttachment:function(a,b,c){var e=this.atlas.findRegion(c);if(!e)throw"Region not found in atlas: "+c+" (skinned mesh attachment: "+b+")";var f=new d.WeightedMeshAttachment(b);return f.rendererObject=e,f.regionU=e.u,f.regionV=e.v,f.regionU2=e.u2,f.regionV2=e.v2,f.regionRotate=e.rotate,f.regionOffsetX=e.offsetX,f.regionOffsetY=e.offsetY,f.regionWidth=e.width,f.regionHeight=e.height,f.regionOriginalWidth=e.originalWidth,f.regionOriginalHeight=e.originalHeight,f},newBoundingBoxAttachment:function(a,b){return new d.BoundingBoxAttachment(b)}},b.exports=d.AtlasAttachmentParser},{"../SpineUtil":40,"./BoundingBoxAttachment":14,"./MeshAttachment":25,"./RegionAttachment":26,"./WeightedMeshAttachment":38}],7:[function(a,b,c){var d=a("../SpineUtil");d.AtlasPage=function(){},d.AtlasPage.prototype={name:null,format:null,minFilter:null,magFilter:null,uWrap:null,vWrap:null,rendererObject:null,width:0,height:0},b.exports=d.AtlasPage},{"../SpineUtil":40}],8:[function(a,b,c){var d=a("../SpineUtil");
d.AtlasReader=function(a){this.lines=a.split(/\r\n|\r|\n/)},d.AtlasReader.prototype={index:0,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},readLine:function(){return this.index>=this.lines.length?null:this.lines[this.index++]},readValue:function(){var a=this.readLine(),b=a.indexOf(":");if(-1==b)throw"Invalid line: "+a;return this.trim(a.substring(b+1))},readTuple:function(a){var b=this.readLine(),c=b.indexOf(":");if(-1==c)throw"Invalid line: "+b;for(var d=0,e=c+1;3>d;d++){var f=b.indexOf(",",e);if(-1==f)break;a[d]=this.trim(b.substr(e,f-e)),e=f+1}return a[d]=this.trim(b.substring(e)),d+1}},b.exports=d.AtlasReader},{"../SpineUtil":40}],9:[function(a,b,c){var d=a("../SpineUtil");d.AtlasRegion=function(){},d.AtlasRegion.prototype={page:null,name:null,x:0,y:0,width:0,height:0,u:0,v:0,u2:0,v2:0,offsetX:0,offsetY:0,originalWidth:0,originalHeight:0,index:0,rotate:!1,splits:null,pads:null},b.exports=d.AtlasRegion},{"../SpineUtil":40}],10:[function(a,b,c){var d=a("../SpineUtil");d.Curves=a("./Curves"),d.Animation=a("./Animation"),d.AttachmentTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=a,this.attachmentNames=[],this.attachmentNames.length=a},d.AttachmentTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},apply:function(a,b,c,e,f){var g=this.frames;if(c<g[0])return void(b>c&&this.apply(a,b,Number.MAX_VALUE,null,0));b>c&&(b=-1);var h=c>=g[g.length-1]?g.length-1:d.Animation.binarySearch1(g,c)-1;if(!(g[h]<b)){var i=this.attachmentNames[h];a.slots[this.slotIndex].setAttachment(i?a.getAttachmentBySlotIndex(this.slotIndex,i):null)}}},b.exports=d.AttachmentTimeline},{"../SpineUtil":40,"./Animation":2,"./Curves":16}],11:[function(a,b,c){var d=a("../SpineUtil");d.AttachmentType={region:0,boundingbox:1,mesh:2,weightedmesh:3,skinnedmesh:3,linkedmesh:4,weightedlinkedmesh:5},b.exports=d.AttachmentType},{"../SpineUtil":40}],12:[function(a,b,c){var d=a("../SpineUtil");d.Bone=function(a,b,c){this.data=a,this.skeleton=b,this.parent=c,this.matrix=new PIXI.Matrix,this.setToSetupPose()},d.Bone.yDown=!1,d.Bone.prototype={x:0,y:0,rotation:0,rotationIK:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,worldSignX:1,worldSignY:1,updateWorldTransform:function(){var a=this.rotationIK,b=this.scaleX,c=this.scaleY,e=this.x,f=this.y,g=Math.cos(a*d.degRad),h=Math.sin(a*d.degRad),i=g*b,j=-h*c,k=h*b,l=g*c,m=this.parent,n=this.matrix,o=this.skeleton;if(!m)return o.flipX&&(e=-e,i=-i,j=-j),o.flipY!==d.Bone.yDown&&(f=-f,k=-k,l=-l),n.a=i,n.c=j,n.b=k,n.d=l,n.tx=e,n.ty=f,this.worldSignX=d.signum(b),void(this.worldSignY=d.signum(c));var p=m.matrix.a,q=m.matrix.c,r=m.matrix.b,s=m.matrix.d;n.tx=p*e+q*f+m.matrix.tx,n.ty=r*e+s*f+m.matrix.ty,this.worldSignX=m.worldSignX*d.signum(b),this.worldSignY=m.worldSignY*d.signum(c);var t=this.data;if(t.inheritRotation&&t.inheritScale)n.a=p*i+q*k,n.c=p*j+q*l,n.b=r*i+s*k,n.d=r*j+s*l;else if(t.inheritRotation){p=1,q=0,r=0,s=1;do{g=Math.cos(m.rotationIK*d.degRad),h=Math.sin(m.rotationIK*d.degRad);var u=p*g+q*h;if(q=p*-h+q*g,p=u,u=r*g+s*h,s=r*-h+s*g,r=u,!m.data.inheritRotation)break;m=m.parent}while(null!=m);n.a=p*i+q*k,n.c=p*j+q*l,n.b=r*i+s*k,n.d=r*j+s*l,o.flipX&&(n.a=-n.a,n.c=-n.c),o.flipY!==d.Bone.yDown&&(n.b=-n.b,n.d=-n.d)}else if(t.inheritScale){p=1,q=0,r=0,s=1;do{var v=m.rotation;g=Math.cos(v*d.degRad),h=Math.sin(v*d.degRad);var w=m.scaleX,x=m.scaleY,y=g*w,z=-h*x,A=h*w,B=g*x;if(u=p*y+q*A,q=p*z+q*B,p=u,u=r*y+s*A,s=r*z+s*B,r=u,0>w?v=-v:h=-h,u=p*g+q*h,q=p*-h+q*g,p=u,u=r*g+s*h,s=r*-h+s*g,r=u,!m.data.inheritScale)break;m=m.parent}while(null!=m);n.a=p*i+q*k,n.c=p*j+q*l,n.b=r*i+s*k,n.d=r*j+s*l,o.flipX&&(n.a=-n.a,n.c=-n.c),o.flipY!==d.Bone.yDown&&(n.b=-n.b,n.d=-n.d)}else n.a=i,n.c=j,n.b=k,n.d=l},setToSetupPose:function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.rotationIK=this.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY},worldToLocal:function(a){var b=this.matrix,c=a[0]-b.tx,d=b.ty,e=1/(b.a*b.d-b.b*b.c);a[0]=c*b.a*e-d*b.c*e,a[1]=d*b.d*e-c*b.b*e},localToWorld:function(a){var b=a[0],c=a[1],d=this.matrix;a[0]=b*d.a+c*d.c+d.tx,a[1]=b*d.b+c*d.d+d.ty},getWorldRotationX:function(){return Math.atan2(this.matrix.b,this.matrix.a)*d.radDeg},getWorldRotationY:function(){return Math.atan2(this.matrix.d,this.matrix.c)*d.radDeg},getWorldScaleX:function(){var a=this.matrix.a,b=this.matrix.b;return Math.sqrt(a*a+b*b)},getWorldScaleY:function(){var a=this.matrix.c,b=this.matrix.d;return Math.sqrt(a*a+b*b)}},Object.defineProperties(d.Bone.prototype,{worldX:{get:function(){return this.matrix.tx}},worldY:{get:function(){return this.matrix.ty}}}),b.exports=d.Bone},{"../SpineUtil":40}],13:[function(a,b,c){var d=a("../SpineUtil");d.BoneData=function(a,b){this.name=a,this.parent=b},d.BoneData.prototype={length:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,inheritScale:!0,inheritRotation:!0},b.exports=d.BoneData},{"../SpineUtil":40}],14:[function(a,b,c){var d=a("../SpineUtil");d.AttachmentType=a("./AttachmentType"),d.BoundingBoxAttachment=function(a){this.name=a,this.vertices=[]},d.BoundingBoxAttachment.prototype={type:d.AttachmentType.boundingbox,computeWorldVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;for(var e=c.matrix.a,f=c.matrix.c,g=c.matrix.b,h=c.matrix.d,i=this.vertices,j=0,k=i.length;k>j;j+=2){var l=i[j],m=i[j+1];d[j]=l*e+m*f+a,d[j+1]=l*g+m*h+b}}},b.exports=d.BoundingBoxAttachment},{"../SpineUtil":40,"./AttachmentType":11}],15:[function(a,b,c){var d=a("../SpineUtil");d.Animation=a("./Animation"),d.Curves=a("./Curves"),d.ColorTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=5*a},d.ColorTimeline.prototype={slotIndex:0,getFrameCount:function(){return this.frames.length/5},setFrame:function(a,b,c,d,e,f){a*=5,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h,i,j,k;if(c>=g[g.length-5]){var l=g.length-1;h=g[l-3],i=g[l-2],j=g[l-1],k=g[l]}else{var m=d.Animation.binarySearch(g,c,5),n=g[m-4],o=g[m-3],p=g[m-2],q=g[m-1],r=g[m],s=1-(c-r)/(g[m-5]-r);s=this.curves.getCurvePercent(m/5-1,s),h=n+(g[m+1]-n)*s,i=o+(g[m+2]-o)*s,j=p+(g[m+3]-p)*s,k=q+(g[m+4]-q)*s}var t=a.slots[this.slotIndex];1>f?(t.r+=(h-t.r)*f,t.g+=(i-t.g)*f,t.b+=(j-t.b)*f,t.a+=(k-t.a)*f):(t.r=h,t.g=i,t.b=j,t.a=k)}}},b.exports=d.ColorTimeline},{"../SpineUtil":40,"./Animation":2,"./Curves":16}],16:[function(a,b,c){var d=a("../SpineUtil");d.Curves=function(a){this.curves=[]},d.Curves.prototype={setLinear:function(a){this.curves[19*a]=0},setStepped:function(a){this.curves[19*a]=1},setCurve:function(a,b,c,d,e){var f=.1,g=f*f,h=g*f,i=3*f,j=3*g,k=6*g,l=6*h,m=2*-b+d,n=2*-c+e,o=3*(b-d)+1,p=3*(c-e)+1,q=b*i+m*j+o*h,r=c*i+n*j+p*h,s=m*k+o*l,t=n*k+p*l,u=o*l,v=p*l,w=19*a,x=this.curves;x[w++]=2;for(var y=q,z=r,A=w+19-1;A>w;w+=2)x[w]=y,x[w+1]=z,q+=s,r+=t,s+=u,t+=v,y+=q,z+=r},getCurvePercent:function(a,b){b=0>b?0:b>1?1:b;var c=this.curves,d=19*a,e=c[d];if(0===e)return b;if(1==e)return 0;d++;for(var f=0,g=d,h=d+19-1;h>d;d+=2)if(f=c[d],f>=b){var i,j;return d==g?(i=0,j=0):(i=c[d-2],j=c[d-1]),j+(c[d+1]-j)*(b-i)/(f-i)}var k=c[d-1];return k+(1-k)*(b-f)/(1-f)}},b.exports=d.Curves},{"../SpineUtil":40}],17:[function(a,b,c){var d=a("../SpineUtil");d.Animation=a("./Animation"),d.DrawOrderTimeline=function(a){this.frames=[],this.frames.length=a,this.drawOrders=[],this.drawOrders.length=a},d.DrawOrderTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h;h=c>=g[g.length-1]?g.length-1:d.Animation.binarySearch1(g,c)-1;var i=a.drawOrder,j=(a.slots,this.drawOrders[h]);if(j)for(var k=0,l=j.length;l>k;k++)i[k]=j[k]}}},b.exports=d.DrawOrderTimeline},{"../SpineUtil":40,"./Animation":2}],18:[function(a,b,c){var d=a("../SpineUtil");d.Event=function(a){this.data=a},d.Event.prototype={intValue:0,floatValue:0,stringValue:null},b.exports=d.Event},{"../SpineUtil":40}],19:[function(a,b,c){var d=a("../SpineUtil");d.EventData=function(a){this.name=a},d.EventData.prototype={intValue:0,floatValue:0,stringValue:null},b.exports=d.EventData},{"../SpineUtil":40}],20:[function(a,b,c){var d=a("../SpineUtil");d.Animation=a("./Animation"),d.EventTimeline=function(a){this.frames=[],this.frames.length=a,this.events=[],this.events.length=a},d.EventTimeline.prototype={getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.events[a]=c},apply:function(a,b,c,e,f){if(e){var g=this.frames,h=g.length;if(b>c)this.apply(a,b,Number.MAX_VALUE,e,f),b=-1;else if(b>=g[h-1])return;if(!(c<g[0])){var i;if(b<g[0])i=0;else{i=d.Animation.binarySearch1(g,b);for(var j=g[i];i>0&&g[i-1]==j;)i--}for(var k=this.events;h>i&&c>=g[i];i++)e.push(k[i])}}}},b.exports=d.EventTimeline},{"../SpineUtil":40,"./Animation":2}],21:[function(a,b,c){var d=a("../SpineUtil");d.Animation=a("./Animation"),d.Curves=a("./Curves"),d.FfdTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=a,this.frameVertices=[],this.frameVertices.length=a},d.FfdTimeline.prototype={slotIndex:0,attachment:0,getFrameCount:function(){return this.frames.length},setFrame:function(a,b,c){this.frames[a]=b,this.frameVertices[a]=c},apply:function(a,b,c,e,f){var g=a.slots[this.slotIndex],h=g.attachment;if(h.applyFFD&&h.applyFFD(this.attachment)){var i=this.frames;if(!(c<i[0])){var j=this.frameVertices,k=j[0].length,l=g.attachmentVertices;if(l.length!=k){l=g.attachmentVertices=[];for(var m=0;k>m;m++)l.push(0);f=1}if(c>=i[i.length-1]){var n=j[i.length-1];if(1>f)for(var o=0;k>o;o++)l[o]+=(n[o]-l[o])*f;else for(var o=0;k>o;o++)l[o]=n[o]}else{var p=d.Animation.binarySearch1(i,c),q=i[p],r=1-(c-q)/(i[p-1]-q);r=this.curves.getCurvePercent(p-1,0>r?0:r>1?1:r);var s=j[p-1],t=j[p];if(1>f)for(var o=0;k>o;o++){var u=s[o];l[o]+=(u+(t[o]-u)*r-l[o])*f}else for(var o=0;k>o;o++){var u=s[o];l[o]=u+(t[o]-u)*r}}}}}},b.exports=d.FfdTimeline},{"../SpineUtil":40,"./Animation":2,"./Curves":16}],22:[function(a,b,c){var d=a("../SpineUtil");d.IkConstraint=function(a,b){this.data=a,this.mix=a.mix,this.bendDirection=a.bendDirection,this.bones=[];for(var c=0,d=a.bones.length;d>c;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findBone(a.target.name)},d.IkConstraint.prototype={apply:function(){var a=this.target,b=this.bones;switch(b.length){case 1:d.IkConstraint.apply1(b[0],a.worldX,a.worldY,this.mix);break;case 2:d.IkConstraint.apply2(b[0],b[1],a.worldX,a.worldY,this.bendDirection,this.mix)}}},d.IkConstraint.apply1=function(a,b,c,e){var f=a.parent?a.parent.getWorldRotationX():0,g=a.rotation,h=Math.atan2(c-a.worldY,b-a.worldX)*d.radDeg-f;a.worldSignX!=a.worldSignY!=(a.skeleton.flipX!=(a.skeleton.flipY!=d.Bone.yDown))&&(h=360-h),h>180?h-=360:-180>h&&(h+=360),a.rotationIK=g+(h-g)*e},d.IkConstraint.apply2=function(a,b,c,e,f,g){if(0!=g){var h,i,j,k=a.x,l=a.y,m=a.scaleX,n=a.scaleY,o=b.scaleX,p=b.y;0>m?(m=-m,h=180,j=-1):(h=0,j=1),0>n&&(n=-n,j=-j),0>o?(o=-o,i=180):i=0;var q,r,s,t,u=a.parent,v=u.matrix;if(null==u)q=c-k,r=e-l,s=b.worldX-k,t=b.worldY-l;else{var w=v.a,x=v.c,y=v.b,z=v.d,A=1/(w*z-x*y),B=v.tx,C=v.ty,D=c-B,E=e-C;q=(D*z-E*x)*A-k,r=(E*w-D*y)*A-l,D=b.worldX-B,E=b.worldY-C,s=(D*z-E*x)*A-k,t=(E*w-D*y)*A-l}var F,G,H=Math.sqrt(s*s+t*t),I=b.data.length*o;a:if(Math.abs(m-n)<=1e-4){I*=m;var J=(q*q+r*r-H*H-I*I)/(2*H*I);-1>J?J=-1:J>1&&(J=1),G=Math.acos(J)*f;var w=H+I*J,K=I*Math.sin(G);F=Math.atan2(r*w-q*K,q*w+r*K)}else{p=0;var w=m*I,x=n*I,L=Math.atan2(r,q),M=w*w,N=x*x,O=H*H,P=q*q+r*r,Q=N*O+M*P-M*N,R=-2*N*H,S=N-M,z=R*R-4*S*Q;if(z>=0){var T=Math.sqrt(z);0>R&&(T=-T),T=-(R+T)/2;var U=T/S,V=Q/T,W=Math.abs(U)<Math.abs(V)?U:V;if(P>=W*W){var E=Math.sqrt(P-W*W)*f;F=L-Math.atan2(E,W),G=Math.atan2(E/n,(W-H)/m);break a}}var X=0,Y=1/0,Z=0,$=0,_=0,aa=0,ba=0,ca=0,D=H+w,da=D*D;da>aa&&(_=0,aa=da,ba=D),D=H-w,da=D*D,Y>da&&(X=Math.PI,Y=da,Z=D);var ea=Math.acos(-w*H/(M-N));D=w*Math.cos(ea)+H;var E=x*Math.sin(ea);da=D*D+E*E,Y>da&&(X=ea,Y=da,Z=D,$=E),da>aa&&(_=ea,aa=da,ba=D,ca=E),(Y+aa)/2>=P?(F=L-Math.atan2($*f,Z),G=X*f):(F=L-Math.atan2(ca*f,ba),G=_*f)}var fa=Math.atan2(p,b.x)*j;F=(F-fa)*d.radDeg+h,G=(G+fa)*d.radDeg*j+i,F>180?F-=360:-180>F&&(F+=360),G>180?G-=360:-180>G&&(G+=360);var ga=a.rotation;a.rotationIK=ga+(F-ga)*g,ga=b.rotation,b.rotationIK=ga+(G-ga)*g}},b.exports=d.IkConstraint},{"../SpineUtil":40}],23:[function(a,b,c){var d=a("../SpineUtil")||{};d.IkConstraintData=function(a){this.name=a,this.bones=[]},d.IkConstraintData.prototype={target:null,bendDirection:1,mix:1},b.exports=d.IkConstraintData},{"../SpineUtil":40}],24:[function(a,b,c){var d=a("../SpineUtil")||{};d.Animation=a("./Animation"),d.Curves=a("./Curves"),d.IkConstraintTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=3*a},d.IkConstraintTimeline.prototype={ikConstraintIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h=a.ikConstraints[this.ikConstraintIndex];if(c>=g[g.length-3])return h.mix+=(g[g.length-2]-h.mix)*f,void(h.bendDirection=g[g.length-1]);var i=d.Animation.binarySearch(g,c,3),j=g[i+-2],k=g[i],l=1-(c-k)/(g[i+-3]-k);l=this.curves.getCurvePercent(i/3-1,l);var m=j+(g[i+1]-j)*l;h.mix+=(m-h.mix)*f,h.bendDirection=g[i+-1]}}},b.exports=d.IkConstraintTimeline},{"../SpineUtil":40,"./Animation":2,"./Curves":16}],25:[function(a,b,c){var d=a("../SpineUtil")||{};d.AttachmentType=a("./AttachmentType"),d.MeshAttachment=function(a){this.name=a},d.MeshAttachment.prototype={type:d.AttachmentType.mesh,parentMesh:null,inheritFFD:!1,vertices:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(){var a=this.regionU2-this.regionU,b=this.regionV2-this.regionV,c=this.regionUVs.length;if(this.uvs&&this.uvs.length==c||(this.uvs=new d.Float32Array(c)),this.regionRotate)for(var e=0;c>e;e+=2)this.uvs[e]=this.regionU+this.regionUVs[e+1]*a,this.uvs[e+1]=this.regionV+b-this.regionUVs[e]*b;else for(var e=0;c>e;e+=2)this.uvs[e]=this.regionU+this.regionUVs[e]*a,this.uvs[e+1]=this.regionV+this.regionUVs[e+1]*b},computeWorldVertices:function(a,b,c,d){var e=c.bone;a+=e.worldX,b+=e.worldY;var f=e.matrix.a,g=e.matrix.c,h=e.matrix.b,i=e.matrix.d,j=this.vertices,k=j.length;c.attachmentVertices.length==k&&(j=c.attachmentVertices);for(var l=0;k>l;l+=2){var m=j[l],n=j[l+1];d[l]=m*f+n*g+a,d[l+1]=m*h+n*i+b}},applyFFD:function(a){return this===a||this.inheritFFD&&parentMesh===a},setParentMesh:function(a){this.parentMesh=a,null!=a&&(this.vertices=a.vertices,this.regionUVs=a.regionUVs,this.triangles=a.triangles,this.hullLength=a.hullLength)}},b.exports=d.MeshAttachment},{"../SpineUtil":40,"./AttachmentType":11}],26:[function(a,b,c){var d=a("../SpineUtil");d.AttachmentType=a("./AttachmentType"),d.RegionAttachment=function(a){this.name=a,this.offset=[],this.offset.length=8,this.uvs=[],this.uvs.length=8},d.RegionAttachment.prototype={type:d.AttachmentType.region,x:0,y:0,rotation:0,scaleX:1,scaleY:1,width:0,height:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,setUVs:function(a,b,c,d,e){var f=this.uvs;e?(f[2]=a,f[3]=d,f[4]=a,f[5]=b,f[6]=c,f[7]=b,f[0]=c,f[1]=d):(f[0]=a,f[1]=d,f[2]=a,f[3]=b,f[4]=c,f[5]=b,f[6]=c,f[7]=d)},updateOffset:function(){var a=this.width/this.regionOriginalWidth*this.scaleX,b=this.height/this.regionOriginalHeight*this.scaleY,c=-this.width/2*this.scaleX+this.regionOffsetX*a,e=-this.height/2*this.scaleY+this.regionOffsetY*b,f=c+this.regionWidth*a,g=e+this.regionHeight*b,h=this.rotation*d.degRad,i=Math.cos(h),j=Math.sin(h),k=c*i+this.x,l=c*j,m=e*i+this.y,n=e*j,o=f*i+this.x,p=f*j,q=g*i+this.y,r=g*j,s=this.offset;s[0]=k-n,s[1]=m+l,s[2]=k-r,s[3]=q+l,s[4]=o-r,s[5]=q+p,s[6]=o-n,s[7]=m+p},computeVertices:function(a,b,c,d){a+=c.worldX,b+=c.worldY;var e=c.matrix.a,f=c.matrix.c,g=c.matrix.b,h=c.matrix.d,i=this.offset;d[0]=i[0]*e+i[1]*f+a,d[1]=i[0]*g+i[1]*h+b,d[2]=i[2]*e+i[3]*f+a,d[3]=i[2]*g+i[3]*h+b,d[4]=i[4]*e+i[5]*f+a,d[5]=i[4]*g+i[5]*h+b,d[6]=i[6]*e+i[7]*f+a,d[7]=i[6]*g+i[7]*h+b}},b.exports=d.RegionAttachment},{"../SpineUtil":40,"./AttachmentType":11}],27:[function(a,b,c){var d=a("../SpineUtil")||{};d.Animation=a("./Animation"),d.Curves=a("./Curves"),d.RotateTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=2*a},d.RotateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/2},setFrame:function(a,b,c){a*=2,this.frames[a]=b,this.frames[a+1]=c},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h=a.bones[this.boneIndex];if(c>=g[g.length-2]){for(var i=h.data.rotation+g[g.length-1]-h.rotation;i>180;)i-=360;for(;-180>i;)i+=360;return void(h.rotation+=i*f)}var j=d.Animation.binarySearch(g,c,2),k=g[j-1],l=g[j],m=1-(c-l)/(g[j-2]-l);m=this.curves.getCurvePercent(j/2-1,m);for(var i=g[j+1]-k;i>180;)i-=360;for(;-180>i;)i+=360;for(i=h.data.rotation+(k+i*m)-h.rotation;i>180;)i-=360;for(;-180>i;)i+=360;h.rotation+=i*f}}},b.exports=d.RotateTimeline},{"../SpineUtil":40,"./Animation":2,"./Curves":16}],28:[function(a,b,c){var d=a("../SpineUtil");d.Animation=a("./Animation"),d.Curves=a("./Curves"),d.ScaleTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=3*a},d.ScaleTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h=a.bones[this.boneIndex];if(c>=g[g.length-3])return h.scaleX+=(h.data.scaleX*g[g.length-2]-h.scaleX)*f,void(h.scaleY+=(h.data.scaleY*g[g.length-1]-h.scaleY)*f);var i=d.Animation.binarySearch(g,c,3),j=g[i-2],k=g[i-1],l=g[i],m=1-(c-l)/(g[i+-3]-l);m=this.curves.getCurvePercent(i/3-1,m),h.scaleX+=(h.data.scaleX*(j+(g[i+1]-j)*m)-h.scaleX)*f,h.scaleY+=(h.data.scaleY*(k+(g[i+2]-k)*m)-h.scaleY)*f}}},b.exports=d.ScaleTimeline},{"../SpineUtil":40,"./Animation":2,"./Curves":16}],29:[function(a,b,c){var d=a("../SpineUtil");d.Bone=a("./Bone"),d.Slot=a("./Slot"),d.IkConstraint=a("./IkConstraint"),d.Skeleton=function(a){this.data=a,this.bones=[];for(var b=0,c=a.bones.length;c>b;b++){var e=a.bones[b],f=e.parent?this.bones[a.bones.indexOf(e.parent)]:null;this.bones.push(new d.Bone(e,this,f))}this.slots=[],this.drawOrder=[];for(var b=0,c=a.slots.length;c>b;b++){var g=a.slots[b],h=this.bones[a.bones.indexOf(g.boneData)],i=new d.Slot(g,h);this.slots.push(i),this.drawOrder.push(b)}this.ikConstraints=[];for(var b=0,c=a.ikConstraints.length;c>b;b++)this.ikConstraints.push(new d.IkConstraint(a.ikConstraints[b],this));this.boneCache=[],this.updateCache()},d.Skeleton.prototype={x:0,y:0,skin:null,r:1,g:1,b:1,a:1,time:0,flipX:!1,flipY:!1,updateCache:function(){var a=this.ikConstraints,b=a.length,c=b+1,d=this.boneCache;d.length>c&&(d.length=c);for(var e=0,f=d.length;f>e;e++)d[e].length=0;for(;d.length<c;)d[d.length]=[];var g=d[0],h=this.bones;a:for(var e=0,f=h.length;f>e;e++){var i=h[e],j=i;do{for(var k=0;b>k;k++)for(var l=a[k],m=l.bones[0],n=l.bones[l.bones.length-1];;){if(j==n){d[k].push(i),d[k+1].push(i);continue a}if(n==m)break;n=n.parent}j=j.parent}while(j);g[g.length]=i}},updateWorldTransform:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++){var d=a[b];d.rotationIK=d.rotation}for(var b=0,e=this.boneCache.length-1;;){for(var f=this.boneCache[b],g=0,h=f.length;h>g;g++)f[g].updateWorldTransform();if(b==e)break;this.ikConstraints[b].apply(),b++}},setToSetupPose:function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},setBonesToSetupPose:function(){for(var a=this.bones,b=0,c=a.length;c>b;b++)a[b].setToSetupPose();for(var d=this.ikConstraints,b=0,c=d.length;c>b;b++){var e=d[b];e.bendDirection=e.data.bendDirection,e.mix=e.data.mix}},setSlotsToSetupPose:function(){for(var a=this.slots,b=0,c=a.length;c>b;b++)a[b].setToSetupPose(b);this.resetDrawOrder()},getRootBone:function(){return this.bones.length?this.bones[0]:null},findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return c;return-1},setSkinByName:function(a){var b=this.data.findSkin(a);if(!b)throw"Skin not found: "+a;this.setSkin(b)},setSkin:function(a){if(a)if(this.skin)a._attachAll(this,this.skin);else for(var b=this.slots,c=0,d=b.length;d>c;c++){var e=b[c],f=e.data.attachmentName;if(f){var g=a.getAttachment(c,f);g&&e.setAttachment(g)}}this.skin=a},getAttachmentBySlotName:function(a,b){return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a),b)},getAttachmentBySlotIndex:function(a,b){if(this.skin){var c=this.skin.getAttachment(a,b);if(c)return c}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(a,b):null},setAttachment:function(a,b){for(var c=this.slots,d=0,e=c.length;e>d;d++){var f=c[d];if(f.data.name==a){var g=null;if(b&&(g=this.getAttachmentBySlotIndex(d,b),!g))throw"Attachment not found: "+b+", for slot: "+a;return void f.setAttachment(g)}}throw"Slot not found: "+a},findIkConstraint:function(a){for(var b=this.ikConstraints,c=0,d=b.length;d>c;c++)if(b[c].data.name==a)return b[c];return null},update:function(a){this.time+=a},resetDrawOrder:function(){for(var a=0,b=this.drawOrder.length;b>a;a++)this.drawOrder[a]=a}},b.exports=d.Skeleton},{"../SpineUtil":40,"./Bone":12,"./IkConstraint":22,"./Slot":34}],30:[function(a,b,c){var d=a("../SpineRuntime")||{};d.AttachmentType=a("./AttachmentType"),d.SkeletonBounds=function(){this.polygonPool=[],this.polygons=[],this.boundingBoxes=[]},d.SkeletonBounds.prototype={minX:0,minY:0,maxX:0,maxY:0,update:function(a,b){var c=a.slots,e=c.length,f=a.x,g=a.y,h=this.boundingBoxes,i=this.polygonPool,j=this.polygons;h.length=0;for(var k=0,l=j.length;l>k;k++)i.push(j[k]);j.length=0;for(var k=0;e>k;k++){var m=c[k],n=m.attachment;if(n.type==d.AttachmentType.boundingbox){h.push(n);var o,p=i.length;p>0?(o=i[p-1],i.splice(p-1,1)):o=[],j.push(o),o.length=n.vertices.length,n.computeWorldVertices(f,g,m.bone,o)}}b&&this.aabbCompute()},aabbCompute:function(){for(var a=this.polygons,b=Number.MAX_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,e=Number.MIN_VALUE,f=0,g=a.length;g>f;f++)for(var h=a[f],i=0,j=h.length;j>i;i+=2){var k=h[i],l=h[i+1];b=Math.min(b,k),c=Math.min(c,l),d=Math.max(d,k),e=Math.max(e,l)}this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},aabbContainsPoint:function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},aabbIntersectsSegment:function(a,b,c,d){var e=this.minX,f=this.minY,g=this.maxX,h=this.maxY;if(e>=a&&e>=c||f>=b&&f>=d||a>=g&&c>=g||b>=h&&d>=h)return!1;var i=(d-b)/(c-a),j=i*(e-a)+b;if(j>f&&h>j)return!0;if(j=i*(g-a)+b,j>f&&h>j)return!0;var k=(f-b)/i+a;return k>e&&g>k?!0:(k=(h-b)/i+a,k>e&&g>k)},aabbIntersectsSkeleton:function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},containsPoint:function(a,b){for(var c=this.polygons,d=0,e=c.length;e>d;d++)if(this.polygonContainsPoint(c[d],a,b))return this.boundingBoxes[d];return null},intersectsSegment:function(a,b,c,d){for(var e=this.polygons,f=0,g=e.length;g>f;f++)if(e[f].intersectsSegment(a,b,c,d))return this.boundingBoxes[f];return null},polygonContainsPoint:function(a,b,c){for(var d=a.length,e=d-2,f=!1,g=0;d>g;g+=2){var h=a[g+1],i=a[e+1];if(c>h&&i>=c||c>i&&h>=c){var j=a[g];j+(c-h)/(i-h)*(a[e]-j)<b&&(f=!f)}e=g}return f},polygonIntersectsSegment:function(a,b,c,d,e){for(var f=a.length,g=b-d,h=c-e,i=b*e-c*d,j=a[f-2],k=a[f-1],l=0;f>l;l+=2){var m=a[l],n=a[l+1],o=j*n-k*m,p=j-m,q=k-n,r=g*q-h*p,s=(i*p-g*o)/r;if((s>=j&&m>=s||s>=m&&j>=s)&&(s>=b&&d>=s||s>=d&&b>=s)){var t=(i*q-h*o)/r;if((t>=k&&n>=t||t>=n&&k>=t)&&(t>=c&&e>=t||t>=e&&c>=t))return!0}j=m,k=n}return!1},getPolygon:function(a){var b=this.boundingBoxes.indexOf(a);return-1==b?null:this.polygons[b]},getWidth:function(){return this.maxX-this.minX},getHeight:function(){return this.maxY-this.minY}},b.exports=d.SkeletonBounds},{"../SpineRuntime":39,"./AttachmentType":11}],31:[function(a,b,c){var d=a("../SpineUtil");d.SkeletonData=function(){this.bones=[],this.slots=[],this.skins=[],this.events=[],this.animations=[],this.ikConstraints=[]},d.SkeletonData.prototype={name:null,defaultSkin:null,width:0,height:0,version:null,hash:null,findBone:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findBoneIndex:function(a){for(var b=this.bones,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSlot:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return this.slots[c];return null},findSlotIndex:function(a){for(var b=this.slots,c=0,d=b.length;d>c;c++)if(b[c].name==a)return c;return-1},findSkin:function(a){for(var b=this.skins,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findEvent:function(a){for(var b=this.events,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findAnimation:function(a){for(var b=this.animations,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},findIkConstraint:function(a){for(var b=this.ikConstraints,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null}},b.exports=d.SkeletonData},{"../SpineUtil":40}],32:[function(a,b,c){function d(a,b,c,d){this.mesh=a,this.skin=b,this.slotIndex=c,this.parent=d}var e=a("../SpineUtil");e.SkeletonData=a("./SkeletonData"),e.BoneData=a("./BoneData"),e.IkConstraintData=a("./IkConstraintData"),e.SlotData=a("./SlotData"),e.Skin=a("./Skin"),e.EventData=a("./EventData"),e.AttachmentType=a("./AttachmentType"),e.ColorTimeline=a("./ColorTimeline"),e.AttachmentTimeline=a("./AttachmentTimeline"),e.RotateTimeline=a("./RotateTimeline"),e.ScaleTimeline=a("./ScaleTimeline"),e.TranslateTimeline=a("./TranslateTimeline"),e.IkConstraintTimeline=a("./IkConstraintTimeline"),e.FfdTimeline=a("./FfdTimeline"),e.DrawOrderTimeline=a("./DrawOrderTimeline"),e.EventTimeline=a("./EventTimeline"),e.Event=a("./Event"),e.Animation=a("./Animation"),e.SkeletonJsonParser=function(a){this.attachmentLoader=a,this.linkedMeshes=[]},e.SkeletonJsonParser.prototype={scale:1,readSkeletonData:function(a,b){var c=new e.SkeletonData;c.name=b;var d=a.skeleton;d&&(c.hash=d.hash,c.version=d.spine,c.width=d.width||0,c.height=d.height||0);for(var f=a.bones,g=0,h=f.length;h>g;g++){var i=f[g],j=null;if(i.parent&&(j=c.findBone(i.parent),!j))throw"Parent bone not found: "+i.parent;var k=new e.BoneData(i.name,j);k.length=(i.length||0)*this.scale,k.x=(i.x||0)*this.scale,k.y=(i.y||0)*this.scale,k.rotation=i.rotation||0,k.scaleX=i.hasOwnProperty("scaleX")?i.scaleX:1,k.scaleY=i.hasOwnProperty("scaleY")?i.scaleY:1,k.inheritScale=i.hasOwnProperty("inheritScale")?i.inheritScale:!0,k.inheritRotation=i.hasOwnProperty("inheritRotation")?i.inheritRotation:!0,c.bones.push(k)}var l=a.ik;if(l)for(var g=0,h=l.length;h>g;g++){for(var m=l[g],n=new e.IkConstraintData(m.name),f=m.bones,o=0,p=f.length;p>o;o++){var q=c.findBone(f[o]);if(!q)throw"IK bone not found: "+f[o];n.bones.push(q)}if(n.target=c.findBone(m.target),!n.target)throw"Target bone not found: "+m.target;n.bendDirection=!m.hasOwnProperty("bendPositive")||m.bendPositive?1:-1,n.mix=m.hasOwnProperty("mix")?m.mix:1,c.ikConstraints.push(n)}for(var r=a.slots,g=0,h=r.length;h>g;g++){var s=r[g],k=c.findBone(s.bone);if(!k)throw"Slot bone not found: "+s.bone;var t=new e.SlotData(s.name,k),u=s.color;u&&(t.r=this.toColor(u,0),t.g=this.toColor(u,1),t.b=this.toColor(u,2),t.a=this.toColor(u,3)),t.attachmentName=s.attachment,t.blendMode=s.blend&&e.SlotData.PIXI_BLEND_MODE_MAP[s.blend]||e.SlotData.PIXI_BLEND_MODE_MAP.normal,c.slots.push(t)}var v=a.skins;for(var w in v)if(v.hasOwnProperty(w)){var x=v[w],y=new e.Skin(w);for(var z in x)if(x.hasOwnProperty(z)){var A=c.findSlotIndex(z),B=x[z];for(var C in B)if(B.hasOwnProperty(C)){var D=this.readAttachment(y,A,C,B[C]);D&&y.addAttachment(A,C,D)}}c.skins.push(y),"default"==y.name&&(c.defaultSkin=y)}for(var E=this.linkedMeshes,g=0,h=E.size;h>g;g++){var F=E[g],y=F.skin?c.findSkin(F.skin):c.defaultSkin,j=y.getAttachment(F.slotIndex,F.parent);F.mesh.setParentMesh(j),F.mesh.updateUVs()}E.length=0;var G=a.events;for(var H in G)if(G.hasOwnProperty(H)){var I=G[H],J=new e.EventData(H);J.intValue=I["int"]||0,J.floatValue=I["float"]||0,J.stringValue=I.string||null,c.events.push(J)}var K=a.animations;for(var L in K)K.hasOwnProperty(L)&&this.readAnimation(L,K[L],c);return c},readAttachment:function(a,b,c,f){c=f.name||c;var g=e.AttachmentType[f.type||"region"],h=f.path||c,i=this.scale;if(g==e.AttachmentType.region){var j=this.attachmentLoader.newRegionAttachment(a,c,h);if(!j)return null;j.path=h,j.x=(f.x||0)*i,j.y=(f.y||0)*i,j.scaleX=f.hasOwnProperty("scaleX")?f.scaleX:1,j.scaleY=f.hasOwnProperty("scaleY")?f.scaleY:1,j.rotation=f.rotation||0,j.width=(f.width||0)*i,j.height=(f.height||0)*i;var k=f.color;return k&&(j.r=this.toColor(k,0),j.g=this.toColor(k,1),j.b=this.toColor(k,2),j.a=this.toColor(k,3)),j.updateOffset(),j}if(g==e.AttachmentType.boundingbox){for(var l=this.attachmentLoader.newBoundingBoxAttachment(a,c),m=f.vertices,n=0,o=m.length;o>n;n++)l.vertices.push(m[n]*i);return l}if(g==e.AttachmentType.mesh||g==e.AttachmentType.linkedmesh){var p=this.attachmentLoader.newMeshAttachment(a,c,h);if(!p)return null;p.path=h,k=f.color,k&&(p.r=this.toColor(k,0),p.g=this.toColor(k,1),p.b=this.toColor(k,2),p.a=this.toColor(k,3)),p.width=(f.width||0)*i,p.height=(f.height||0)*i;var q=f.parent;return q?(p.inheritFFD=!!f.ffd,this.linkedMeshes.push(new d(p,f.skin||null,b,q))):(p.vertices=this.getFloatArray(f,"vertices",i),p.triangles=this.getIntArray(f,"triangles"),p.regionUVs=this.getFloatArray(f,"uvs",1),p.updateUVs(),p.hullLength=2*(f.hull||0),f.edges&&(p.edges=this.getIntArray(f,"edges"))),p}if(g==e.AttachmentType.weightedmesh||g==e.AttachmentType.weightedlinkedmesh){var p=this.attachmentLoader.newWeightedMeshAttachment(a,c,h);if(!p)return null;p.path=h,k=f.color,k&&(p.r=this.toColor(k,0),p.g=this.toColor(k,1),p.b=this.toColor(k,2),p.a=this.toColor(k,3)),p.width=(f.width||0)*i,p.height=(f.height||0)*i;var q=f.parent;if(q)p.inheritFFD=!!f.ffd,this.linkedMeshes.push(new d(p,f.skin||null,b,q));else{for(var r=this.getFloatArray(f,"uvs",1),m=this.getFloatArray(f,"vertices",1),s=[],t=[],n=0,o=m.length;o>n;){var u=0|m[n++];t[t.length]=u;for(var v=n+4*u;v>n;)t[t.length]=m[n],s[s.length]=m[n+1]*i,s[s.length]=m[n+2]*i,s[s.length]=m[n+3],n+=4}p.bones=t,p.weights=s,p.triangles=this.getIntArray(f,"triangles"),p.regionUVs=r,p.updateUVs(),p.hullLength=2*(f.hull||0),f.edges&&(p.edges=this.getIntArray(f,"edges"))}return p}throw"Unknown attachment type: "+g},readAnimation:function(a,b,c){var d=[],f=0,g=b.slots;for(var h in g)if(g.hasOwnProperty(h)){var i=g[h],j=c.findSlotIndex(h);for(var k in i)if(i.hasOwnProperty(k)){var l=i[k];if("color"==k){var m=new e.ColorTimeline(l.length);m.slotIndex=j;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o],r=q.color,s=this.toColor(r,0),t=this.toColor(r,1),u=this.toColor(r,2),v=this.toColor(r,3);m.setFrame(n,q.time,s,t,u,v),this.readCurve(m,n,q),n++}d.push(m),f=Math.max(f,m.frames[5*m.getFrameCount()-5])}else{if("attachment"!=k)throw"Invalid timeline type for a slot: "+k+" ("+h+")";var m=new e.AttachmentTimeline(l.length);m.slotIndex=j;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o];m.setFrame(n++,q.time,q.name)}d.push(m),f=Math.max(f,m.frames[m.getFrameCount()-1])}}}var w=b.bones;for(var x in w)if(w.hasOwnProperty(x)){var y=c.findBoneIndex(x);if(-1==y)throw"Bone not found: "+x;var z=w[x];for(var k in z)if(z.hasOwnProperty(k)){
var l=z[k];if("rotate"==k){var m=new e.RotateTimeline(l.length);m.boneIndex=y;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o];m.setFrame(n,q.time,q.angle),this.readCurve(m,n,q),n++}d.push(m),f=Math.max(f,m.frames[2*m.getFrameCount()-2])}else{if("translate"!=k&&"scale"!=k)throw"flipX"==k||"flipY"==k?"flipX and flipY are not supported in spine v3: ("+x+")":"Invalid timeline type for a bone: "+k+" ("+x+")";var m,A=1;"scale"==k?m=new e.ScaleTimeline(l.length):(m=new e.TranslateTimeline(l.length),A=this.scale),m.boneIndex=y;for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o],B=(q.x||0)*A,C=(q.y||0)*A;m.setFrame(n,q.time,B,C),this.readCurve(m,n,q),n++}d.push(m),f=Math.max(f,m.frames[3*m.getFrameCount()-3])}}}var D=b.ik;for(var E in D)if(D.hasOwnProperty(E)){var F=c.findIkConstraint(E),l=D[E],m=new e.IkConstraintTimeline(l.length);m.ikConstraintIndex=c.ikConstraints.indexOf(F);for(var n=0,o=0,p=l.length;p>o;o++){var q=l[o],G=q.hasOwnProperty("mix")?q.mix:1,H=!q.hasOwnProperty("bendPositive")||q.bendPositive?1:-1;m.setFrame(n,q.time,G,H),this.readCurve(m,n,q),n++}d.push(m),f=Math.max(f,m.frames[3*m.getFrameCount()-3])}var I=b.ffd;for(var J in I){var K=c.findSkin(J),i=I[J];for(h in i){var j=c.findSlotIndex(h),L=i[h];for(var M in L){var l=L[M],m=new e.FfdTimeline(l.length),N=K.getAttachment(j,M);if(!N)throw"FFD attachment not found: "+M;m.slotIndex=j,m.attachment=N;var O,P=N.type==e.AttachmentType.mesh;O=P?N.vertices.length:N.weights.length/3*2;for(var n=0,o=0,p=l.length;p>o;o++){var Q,q=l[o];if(q.vertices){var R=q.vertices;Q=[];for(var S=0;O>S;++S)Q.push(0);var T=q.offset||0,U=R.length;if(1==this.scale)for(var V=0;U>V;V++)Q[V+T]=R[V];else for(var V=0;U>V;V++)Q[V+T]=R[V]*this.scale;if(P)for(var W=N.vertices,V=0,U=Q.length;U>V;V++)Q[V]+=W[V]}else if(P)Q=N.vertices;else{Q=[];for(var S=0;O>S;++S)Q.push(0)}m.setFrame(n,q.time,Q),this.readCurve(m,n,q),n++}d[d.length]=m,f=Math.max(f,m.frames[m.getFrameCount()-1])}}}var X=b.drawOrder;if(X||(X=b.draworder),X){for(var m=new e.DrawOrderTimeline(X.length),Y=c.slots.length,n=0,o=0,p=X.length;p>o;o++){var Z=X[o],$=null;if(Z.offsets){$=[],$.length=Y;for(var V=Y-1;V>=0;V--)$[V]=-1;var _=Z.offsets,aa=[];aa.length=Y-_.length;for(var ba=0,ca=0,V=0,U=_.length;U>V;V++){var da=_[V],j=c.findSlotIndex(da.slot);if(-1==j)throw"Slot not found: "+da.slot;for(;ba!=j;)aa[ca++]=ba++;$[ba+da.offset]=ba++}for(;Y>ba;)aa[ca++]=ba++;for(var V=Y-1;V>=0;V--)-1==$[V]&&($[V]=aa[--ca])}m.setFrame(n++,Z.time,$)}d.push(m),f=Math.max(f,m.frames[m.getFrameCount()-1])}var ea=b.events;if(ea){for(var m=new e.EventTimeline(ea.length),n=0,o=0,p=ea.length;p>o;o++){var fa=ea[o],ga=c.findEvent(fa.name);if(!ga)throw"Event not found: "+fa.name;var ha=new e.Event(ga);ha.intValue=fa.hasOwnProperty("int")?fa["int"]:ga.intValue,ha.floatValue=fa.hasOwnProperty("float")?fa["float"]:ga.floatValue,ha.stringValue=fa.hasOwnProperty("string")?fa.string:ga.stringValue,m.setFrame(n++,fa.time,ha)}d.push(m),f=Math.max(f,m.frames[m.getFrameCount()-1])}c.animations.push(new e.Animation(a,d,f))},readCurve:function(a,b,c){var d=c.curve;d?"stepped"==d?a.curves.setStepped(b):d instanceof Array&&a.curves.setCurve(b,d[0],d[1],d[2],d[3]):a.curves.setLinear(b)},toColor:function(a,b){if(8!=a.length)throw"Color hexidecimal length must be 8, recieved: "+a;return parseInt(a.substring(2*b,2*b+2),16)/255},getFloatArray:function(a,b,c){var d=a[b],f=new e.Float32Array(d.length),g=0,h=d.length;if(1==c)for(;h>g;g++)f[g]=d[g];else for(;h>g;g++)f[g]=d[g]*c;return f},getIntArray:function(a,b){for(var c=a[b],d=new e.Uint16Array(c.length),f=0,g=c.length;g>f;f++)d[f]=0|c[f];return d}},b.exports=e.SkeletonJsonParser},{"../SpineUtil":40,"./Animation":2,"./AttachmentTimeline":10,"./AttachmentType":11,"./BoneData":13,"./ColorTimeline":15,"./DrawOrderTimeline":17,"./Event":18,"./EventData":19,"./EventTimeline":20,"./FfdTimeline":21,"./IkConstraintData":23,"./IkConstraintTimeline":24,"./RotateTimeline":27,"./ScaleTimeline":28,"./SkeletonData":31,"./Skin":33,"./SlotData":35,"./TranslateTimeline":37}],33:[function(a,b,c){var d=a("../SpineUtil");d.Skin=function(a){this.name=a,this.attachments={}},d.Skin.prototype={addAttachment:function(a,b,c){this.attachments[a+":"+b]=c},getAttachment:function(a,b){return this.attachments[a+":"+b]},_attachAll:function(a,b){for(var c in b.attachments){var d=c.indexOf(":"),e=parseInt(c.substring(0,d)),f=c.substring(d+1),g=a.slots[e];if(g.attachment&&g.attachment.name==f){var h=this.getAttachment(e,f);h&&g.setAttachment(h)}}}},b.exports=d.Skin},{"../SpineUtil":40}],34:[function(a,b,c){var d=a("../SpineUtil");d.Slot=function(a,b){this.data=a,this.bone=b,this.setToSetupPose()},d.Slot.prototype={r:1,g:1,b:1,a:1,_attachmentTime:0,attachment:null,attachmentVertices:[],setAttachment:function(a){this.attachment=a,this._attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0},setAttachmentTime:function(a){this._attachmentTime=this.bone.skeleton.time-a},getAttachmentTime:function(){return this.bone.skeleton.time-this._attachmentTime},setToSetupPose:function(){var a=this.data;this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this.blendMode=a.blendMode;for(var b=this.bone.skeleton.data.slots,c=0,d=b.length;d>c;c++)if(b[c]==a){this.setAttachment(a.attachmentName?this.bone.skeleton.getAttachmentBySlotIndex(c,a.attachmentName):null);break}}},b.exports=d.Slot},{"../SpineUtil":40}],35:[function(a,b,c){var d=a("../SpineUtil");d.SlotData=function(a,b){this.name=a,this.boneData=b},d.SlotData.PIXI_BLEND_MODE_MAP={multiply:PIXI.BLEND_MODES.MULTIPLY,screen:PIXI.BLEND_MODES.SCREEN,additive:PIXI.BLEND_MODES.ADD,normal:PIXI.BLEND_MODES.NORMAL},d.SlotData.prototype={r:1,g:1,b:1,a:1,attachmentName:null,blendMode:PIXI.BLEND_MODES.NORMAL},b.exports=d.SlotData},{"../SpineUtil":40}],36:[function(a,b,c){var d=a("../SpineUtil");d.TrackEntry=function(){},d.TrackEntry.prototype={next:null,previous:null,animation:null,loop:!1,delay:0,time:0,lastTime:-1,endTime:0,timeScale:1,mixTime:0,mixDuration:0,mix:1,onStart:null,onEnd:null,onComplete:null,onEvent:null},b.exports=d.TrackEntry},{"../SpineUtil":40}],37:[function(a,b,c){var d=a("../SpineUtil");d.Animation=a("./Animation"),d.Curves=a("./Curves"),d.TranslateTimeline=function(a){this.curves=new d.Curves(a),this.frames=[],this.frames.length=3*a},d.TranslateTimeline.prototype={boneIndex:0,getFrameCount:function(){return this.frames.length/3},setFrame:function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},apply:function(a,b,c,e,f){var g=this.frames;if(!(c<g[0])){var h=a.bones[this.boneIndex];if(c>=g[g.length-3])return h.x+=(h.data.x+g[g.length-2]-h.x)*f,void(h.y+=(h.data.y+g[g.length-1]-h.y)*f);var i=d.Animation.binarySearch(g,c,3),j=g[i-2],k=g[i-1],l=g[i],m=1-(c-l)/(g[i+-3]-l);m=this.curves.getCurvePercent(i/3-1,m),h.x+=(h.data.x+j+(g[i+1]-j)*m-h.x)*f,h.y+=(h.data.y+k+(g[i+2]-k)*m-h.y)*f}}},b.exports=d.TranslateTimeline},{"../SpineUtil":40,"./Animation":2,"./Curves":16}],38:[function(a,b,c){var d=a("../SpineUtil")||{};d.AttachmentType=a("./AttachmentType"),d.WeightedMeshAttachment=function(a){this.name=a},d.WeightedMeshAttachment.prototype={type:d.AttachmentType.weightedmesh,parentMesh:null,inheritFFD:!1,bones:null,weights:null,uvs:null,regionUVs:null,triangles:null,hullLength:0,r:1,g:1,b:1,a:1,path:null,rendererObject:null,regionU:0,regionV:0,regionU2:0,regionV2:0,regionRotate:!1,regionOffsetX:0,regionOffsetY:0,regionWidth:0,regionHeight:0,regionOriginalWidth:0,regionOriginalHeight:0,edges:null,width:0,height:0,updateUVs:function(a,b,c,e,f){var g=this.regionU2-this.regionU,h=this.regionV2-this.regionV,i=this.regionUVs.length;if(this.uvs&&this.uvs.length==i||(this.uvs=new d.Float32Array(i)),this.regionRotate)for(var j=0;i>j;j+=2)this.uvs[j]=this.regionU+this.regionUVs[j+1]*g,this.uvs[j+1]=this.regionV+h-this.regionUVs[j]*h;else for(var j=0;i>j;j+=2)this.uvs[j]=this.regionU+this.regionUVs[j]*g,this.uvs[j+1]=this.regionV+this.regionUVs[j+1]*h},computeWorldVertices:function(a,b,c,d){var e,f,g,h,i,j,k,l=c.bone.skeleton.bones,m=this.weights,n=this.bones,o=0,p=0,q=0,r=0,s=n.length;if(c.attachmentVertices.length)for(var t=c.attachmentVertices;s>p;o+=2){for(f=0,g=0,e=n[p++]+p;e>p;p++,q+=3,r+=2)k=l[n[p]].matrix,h=m[q]+t[r],i=m[q+1]+t[r+1],j=m[q+2],f+=(h*k.a+i*k.c+k.tx)*j,g+=(h*k.b+i*k.d+k.ty)*j;d[o]=f+a,d[o+1]=g+b}else for(;s>p;o+=2){for(f=0,g=0,e=n[p++]+p;e>p;p++,q+=3)k=l[n[p]].matrix,h=m[q],i=m[q+1],j=m[q+2],f+=(h*k.a+i*k.c+k.tx)*j,g+=(h*k.b+i*k.d+k.ty)*j;d[o]=f+a,d[o+1]=g+b}},applyFFD:function(a){return this===a||this.inheritFFD&&parentMesh===a},setParentMesh:function(a){this.parentMesh=a,null!=a&&(this.bones=a.bones,this.weights=a.weights,this.regionUVs=a.regionUVs,this.triangles=a.triangles,this.hullLength=a.hullLength)}},b.exports=d.WeightedMeshAttachment},{"../SpineUtil":40,"./AttachmentType":11}],39:[function(a,b,c){var d=a("../SpineUtil");d.Animation=a("./Animation"),d.AnimationStateData=a("./AnimationStateData"),d.AnimationState=a("./AnimationState"),d.AtlasAttachmentParser=a("./AtlasAttachmentParser"),d.Atlas=a("./Atlas"),d.AtlasPage=a("./AtlasPage"),d.AtlasReader=a("./AtlasReader"),d.AtlasRegion=a("./AtlasRegion"),d.AttachmentTimeline=a("./AttachmentTimeline"),d.AttachmentType=a("./AttachmentType"),d.BoneData=a("./BoneData"),d.Bone=a("./Bone"),d.BoundingBoxAttachment=a("./BoundingBoxAttachment"),d.ColorTimeline=a("./ColorTimeline"),d.Curves=a("./Curves"),d.DrawOrderTimeline=a("./DrawOrderTimeline"),d.EventData=a("./EventData"),d.Event=a("./Event"),d.EventTimeline=a("./EventTimeline"),d.FfdTimeline=a("./FfdTimeline"),d.IkConstraintData=a("./IkConstraintData"),d.IkConstraint=a("./IkConstraint"),d.IkConstraintTimeline=a("./IkConstraintTimeline"),d.MeshAttachment=a("./MeshAttachment"),d.RegionAttachment=a("./RegionAttachment"),d.RotateTimeline=a("./RotateTimeline"),d.ScaleTimeline=a("./ScaleTimeline"),d.SkeletonBounds=a("./SkeletonBounds"),d.SkeletonData=a("./SkeletonData"),d.Skeleton=a("./Skeleton"),d.SkeletonJsonParser=a("./SkeletonJsonParser"),d.Skin=a("./Skin.js"),d.WeightedMeshAttachment=a("./WeightedMeshAttachment"),d.SlotData=a("./SlotData"),d.Slot=a("./Slot"),d.TrackEntry=a("./TrackEntry"),d.TranslateTimeline=a("./TranslateTimeline"),b.exports=d},{"../SpineUtil":40,"./Animation":2,"./AnimationState":3,"./AnimationStateData":4,"./Atlas":5,"./AtlasAttachmentParser":6,"./AtlasPage":7,"./AtlasReader":8,"./AtlasRegion":9,"./AttachmentTimeline":10,"./AttachmentType":11,"./Bone":12,"./BoneData":13,"./BoundingBoxAttachment":14,"./ColorTimeline":15,"./Curves":16,"./DrawOrderTimeline":17,"./Event":18,"./EventData":19,"./EventTimeline":20,"./FfdTimeline":21,"./IkConstraint":22,"./IkConstraintData":23,"./IkConstraintTimeline":24,"./MeshAttachment":25,"./RegionAttachment":26,"./RotateTimeline":27,"./ScaleTimeline":28,"./Skeleton":29,"./SkeletonBounds":30,"./SkeletonData":31,"./SkeletonJsonParser":32,"./Skin.js":33,"./Slot":34,"./SlotData":35,"./TrackEntry":36,"./TranslateTimeline":37,"./WeightedMeshAttachment":38}],40:[function(a,b,c){b.exports={radDeg:180/Math.PI,degRad:Math.PI/180,temp:[],Float32Array:"undefined"==typeof Float32Array?Array:Float32Array,Uint16Array:"undefined"==typeof Uint16Array?Array:Uint16Array,signum:function(a){return a>0?1:0>a?-1:0}}},{}],41:[function(a,b,c){function d(a){if(PIXI.Container.call(this),!a)throw new Error("The spineData param is required.");if("string"==typeof a)throw new Error('spineData param cant be string. Please use PIXI.spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');this.spineData=a,this.skeleton=new f.Skeleton(a),this.skeleton.updateWorldTransform(),this.stateData=new f.AnimationStateData(a),this.state=new f.AnimationState(this.stateData),this.slotContainers=[];for(var b=0,c=this.skeleton.slots.length;c>b;b++){var d=this.skeleton.slots[b],e=d.attachment,g=new PIXI.Container;if(this.slotContainers.push(g),this.addChild(g),e instanceof f.RegionAttachment){var h=e.rendererObject.name,i=this.createSprite(d,e);d.currentSprite=i,d.currentSpriteName=h,g.addChild(i)}else{if(!(e instanceof f.MeshAttachment))continue;var j=this.createMesh(d,e);d.currentMesh=j,d.currentMeshName=e.name,g.addChild(j)}}this.autoUpdate=!0}function e(){var a=this.parent.worldTransform,b=this.worldTransform,c=this.localTransform;b.a=c.a*a.a+c.b*a.c,b.b=c.a*a.b+c.b*a.d,b.c=c.c*a.a+c.d*a.c,b.d=c.c*a.b+c.d*a.d,b.tx=c.tx*a.a+c.ty*a.c+a.tx,b.ty=c.tx*a.b+c.ty*a.d+a.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}var f=a("../SpineRuntime"),g=a("../loaders/atlasParser");f.Bone.yDown=!0,d.fromAtlas=function(a){var b=g.AnimCache[a];if(!b)throw new Error('Spine data "'+a+'" does not exist in the animation cache');return new d(b)},d.prototype=Object.create(PIXI.Container.prototype),d.prototype.constructor=d,b.exports=d,d.globalAutoUpdate=!0,Object.defineProperties(d.prototype,{autoUpdate:{get:function(){return this.updateTransform===d.prototype.autoUpdateTransform},set:function(a){this.updateTransform=a?d.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform}}}),d.prototype.update=function(a){this.state.update(a),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var b=this.skeleton.drawOrder,c=this.skeleton.slots,d=0,g=b.length;g>d;d++)this.children[d]=this.slotContainers[b[d]];for(d=0,g=c.length;g>d;d++){var h=c[d],i=h.attachment,j=this.slotContainers[d];if(i){var k=i.type;if(k===f.AttachmentType.region){if(i.rendererObject&&(!h.currentSpriteName||h.currentSpriteName!==i.rendererObject.name)){var l=i.rendererObject.name;if(void 0!==h.currentSprite&&(h.currentSprite.visible=!1),h.sprites=h.sprites||{},void 0!==h.sprites[l])h.sprites[l].visible=!0;else{var m=this.createSprite(h,i);j.addChild(m)}h.currentSprite=h.sprites[l],h.currentSpriteName=l}if(j.transform){j.transform._dirtyLocal||(j.transform=new PIXI.TransformStatic);var n=j.transform,o=n.localTransform;n._dirtyParentVersion=-1,n._dirtyLocal=1,n._versionLocal=1,h.bone.matrix.copy(o),o.tx+=h.bone.skeleton.x,o.ty+=h.bone.skeleton.y}else{var o=j.localTransform||new PIXI.Matrix;h.bone.matrix.copy(o),o.tx+=h.bone.skeleton.x,o.ty+=h.bone.skeleton.y,j.localTransform=o,j.displayObjectUpdateTransform=e}h.currentSprite.blendMode=h.blendMode,h.currentSprite.tint=PIXI.utils.rgb2hex([h.r,h.g,h.b])}else{if(k!==f.AttachmentType.skinnedmesh&&k!==f.AttachmentType.mesh){j.visible=!1;continue}if(!h.currentMeshName||h.currentMeshName!==i.name){var p=i.name;if(void 0!==h.currentMesh&&(h.currentMesh.visible=!1),h.meshes=h.meshes||{},void 0!==h.meshes[p])h.meshes[p].visible=!0;else{var q=this.createMesh(h,i);j.addChild(q)}h.currentMesh=h.meshes[p],h.currentMeshName=p}i.computeWorldVertices(h.bone.skeleton.x,h.bone.skeleton.y,h,h.currentMesh.vertices)}j.visible=!0,j.alpha=h.a}else j.visible=!1}},d.prototype.autoUpdateTransform=function(){if(d.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var a=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(a)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},d.prototype.createSprite=function(a,b){var c=b.rendererObject,d=c.page.rendererObject,e=new PIXI.Rectangle(c.x,c.y,c.rotate?c.height:c.width,c.rotate?c.width:c.height),g=new PIXI.Texture(d,e),h=new PIXI.Sprite(g),i=c.rotate?.5*Math.PI:0;if(h.scale.x=b.width/c.originalWidth*b.scaleX,h.scale.y=b.height/c.originalHeight*b.scaleY,h.rotation=-i+b.rotation*f.degRad,h.anchor.x=(.5*c.originalWidth-c.offsetX)/c.width,h.anchor.y=1-(.5*c.originalHeight-c.offsetY)/c.height,h.position.x=b.x,h.position.y=b.y,h.alpha=b.a,c.rotate){var j=h.scale.x;h.scale.x=h.scale.y,h.scale.y=j}return h.scale.y=-h.scale.y,a.sprites=a.sprites||{},a.sprites[c.name]=h,h},d.prototype.createMesh=function(a,b){var c=b.rendererObject,d=c.page.rendererObject,e=new PIXI.Texture(d),f=new PIXI.mesh.Mesh(e,new Float32Array(b.uvs.length),new Float32Array(b.uvs),new Uint16Array(b.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return f.canvasPadding=1.5,f.alpha=b.a,a.meshes=a.meshes||{},a.meshes[b.name]=f,f}},{"../SpineRuntime":39,"../loaders/atlasParser":43}],42:[function(a,b,c){var d=a("./atlasParser");PIXI.loaders.Loader.addPixiMiddleware(d),PIXI.loader.use(d())},{"./atlasParser":43}],43:[function(a,b,c){var d=PIXI.loaders.Resource,e=a("../SpineRuntime"),f=a("./imageLoaderAdapter"),g=b.exports=function(){return function(a,b){if(!a.data||!a.isJson||!a.data.bones)return b();var c=a.url.substr(0,a.url.lastIndexOf("."))+".atlas";c=c.replace(this.baseUrl,"");var h={crossOrigin:a.crossOrigin,xhrType:d.XHR_RESPONSE_TYPE.TEXT,metadata:a.metadata.spineMetadata},i={crossOrigin:a.crossOrigin,metadata:a.metadata.imageMetadata},j=a.url.substr(0,a.url.lastIndexOf("/")+1);j=j.replace(this.baseUrl,"");var k=f(this,a.name+"_atlas_page_",j,i);this.add(a.name+"_atlas",c,h,function(c){new e.Atlas(this.xhr.responseText,k,function(c){var d=new e.SkeletonJsonParser(new e.AtlasAttachmentParser(c)),f=d.readSkeletonData(a.data);a.spineData=f,a.spineAtlas=c,g.enableCaching&&(g.AnimCache[a.name]=a.spineData),b()})})}};g.AnimCache={},g.enableCaching=!0},{"../SpineRuntime":39,"./imageLoaderAdapter":44}],44:[function(a,b,c){a("../SpineRuntime");b.exports=function(a,b,c,d){return c&&c.lastIndexOf("/")!==c.length-1&&(c+="/"),function(e,f){var g=b+e,h=c+e;a.add(g,h,d,function(a){f(a.texture.baseTexture)})}}},{"../SpineRuntime":39}],45:[function(a,b,c){b.exports={atlasParser:a("./atlasParser"),Loader:a("./Loader"),syncImageLoaderAdapter:a("./syncImageLoaderAdapter"),imageLoaderAdapter:a("./imageLoaderAdapter")}},{"./Loader":42,"./atlasParser":43,"./imageLoaderAdapter":44,"./syncImageLoaderAdapter":46}],46:[function(a,b,c){a("../SpineRuntime");b.exports=function(a,b){return a&&a.lastIndexOf("/")!==a.length-1&&(a+="/"),function(a,c){c(PIXI.BaseTexture.fromImage(a,b))}}},{"../SpineRuntime":39}]},{},[1]),!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define,1){var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.p2=a()}else define(a)}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(){}var e=a("./Scalar");b.exports=d,d.lineInt=function(a,b,c){c=c||0;var d,f,g,h,i,j,k,l=[0,0];return d=a[1][1]-a[0][1],f=a[0][0]-a[1][0],g=d*a[0][0]+f*a[0][1],h=b[1][1]-b[0][1],i=b[0][0]-b[1][0],j=h*b[0][0]+i*b[0][1],k=d*i-h*f,e.eq(k,0,c)||(l[0]=(i*g-f*j)/k,l[1]=(d*j-h*g)/k),l},d.segmentsIntersect=function(a,b,c,d){var e=b[0]-a[0],f=b[1]-a[1],g=d[0]-c[0],h=d[1]-c[1];if(g*f-h*e==0)return!1;var i=(e*(c[1]-a[1])+f*(a[0]-c[0]))/(g*f-h*e),j=(g*(a[1]-c[1])+h*(c[0]-a[0]))/(h*e-g*f);return i>=0&&1>=i&&j>=0&&1>=j}},{"./Scalar":4}],2:[function(a,b,c){function d(){}b.exports=d,d.area=function(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1])},d.left=function(a,b,c){return d.area(a,b,c)>0},d.leftOn=function(a,b,c){return d.area(a,b,c)>=0},d.right=function(a,b,c){return d.area(a,b,c)<0},d.rightOn=function(a,b,c){return d.area(a,b,c)<=0};var e=[],f=[];d.collinear=function(a,b,c,g){if(g){var h=e,i=f;h[0]=b[0]-a[0],h[1]=b[1]-a[1],i[0]=c[0]-b[0],i[1]=c[1]-b[1];var j=h[0]*i[0]+h[1]*i[1],k=Math.sqrt(h[0]*h[0]+h[1]*h[1]),l=Math.sqrt(i[0]*i[0]+i[1]*i[1]),m=Math.acos(j/(k*l));return g>m}return 0==d.area(a,b,c)},d.sqdist=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d}},{}],3:[function(a,b,c){function d(){this.vertices=[]}function e(a,b,c,d,e){e=e||0;var f=b[1]-a[1],g=a[0]-b[0],i=f*a[0]+g*a[1],j=d[1]-c[1],k=c[0]-d[0],l=j*c[0]+k*c[1],m=f*k-j*g;return h.eq(m,0,e)?[0,0]:[(k*i-g*l)/m,(f*l-j*i)/m]}var f=a("./Line"),g=a("./Point"),h=a("./Scalar");b.exports=d,d.prototype.at=function(a){var b=this.vertices,c=b.length;return b[0>a?a%c+c:a%c]},d.prototype.first=function(){return this.vertices[0]},d.prototype.last=function(){return this.vertices[this.vertices.length-1]},d.prototype.clear=function(){this.vertices.length=0},d.prototype.append=function(a,b,c){if("undefined"==typeof b)throw new Error("From is not given!");if("undefined"==typeof c)throw new Error("To is not given!");if(b>c-1)throw new Error("lol1");if(c>a.vertices.length)throw new Error("lol2");if(0>b)throw new Error("lol3");for(var d=b;c>d;d++)this.vertices.push(a.vertices[d])},d.prototype.makeCCW=function(){for(var a=0,b=this.vertices,c=1;c<this.vertices.length;++c)(b[c][1]<b[a][1]||b[c][1]==b[a][1]&&b[c][0]>b[a][0])&&(a=c);g.left(this.at(a-1),this.at(a),this.at(a+1))||this.reverse()},d.prototype.reverse=function(){for(var a=[],b=0,c=this.vertices.length;b!==c;b++)a.push(this.vertices.pop());this.vertices=a},d.prototype.isReflex=function(a){return g.right(this.at(a-1),this.at(a),this.at(a+1))};var i=[],j=[];d.prototype.canSee=function(a,b){var c,d,e=i,h=j;if(g.leftOn(this.at(a+1),this.at(a),this.at(b))&&g.rightOn(this.at(a-1),this.at(a),this.at(b)))return!1;d=g.sqdist(this.at(a),this.at(b));for(var k=0;k!==this.vertices.length;++k)if((k+1)%this.vertices.length!==a&&k!==a&&g.leftOn(this.at(a),this.at(b),this.at(k+1))&&g.rightOn(this.at(a),this.at(b),this.at(k))&&(e[0]=this.at(a),e[1]=this.at(b),h[0]=this.at(k),h[1]=this.at(k+1),c=f.lineInt(e,h),g.sqdist(this.at(a),c)<d))return!1;return!0},d.prototype.copy=function(a,b,c){var e=c||new d;if(e.clear(),b>a)for(var f=a;b>=f;f++)e.vertices.push(this.vertices[f]);else{for(var f=0;b>=f;f++)e.vertices.push(this.vertices[f]);for(var f=a;f<this.vertices.length;f++)e.vertices.push(this.vertices[f])}return e},d.prototype.getCutEdges=function(){for(var a=[],b=[],c=[],e=new d,f=Number.MAX_VALUE,g=0;g<this.vertices.length;++g)if(this.isReflex(g))for(var h=0;h<this.vertices.length;++h)if(this.canSee(g,h)){b=this.copy(g,h,e).getCutEdges(),c=this.copy(h,g,e).getCutEdges();for(var i=0;i<c.length;i++)b.push(c[i]);b.length<f&&(a=b,f=b.length,a.push([this.at(g),this.at(h)]))}return a},d.prototype.decomp=function(){var a=this.getCutEdges();return a.length>0?this.slice(a):[this]},d.prototype.slice=function(a){if(0==a.length)return[this];if(a instanceof Array&&a.length&&a[0]instanceof Array&&2==a[0].length&&a[0][0]instanceof Array){for(var b=[this],c=0;c<a.length;c++)for(var d=a[c],e=0;e<b.length;e++){var f=b[e],g=f.slice(d);if(g){b.splice(e,1),b.push(g[0],g[1]);break}}return b}var d=a,c=this.vertices.indexOf(d[0]),e=this.vertices.indexOf(d[1]);return-1!=c&&-1!=e?[this.copy(c,e),this.copy(e,c)]:!1},d.prototype.isSimple=function(){for(var a=this.vertices,b=0;b<a.length-1;b++)for(var c=0;b-1>c;c++)if(f.segmentsIntersect(a[b],a[b+1],a[c],a[c+1]))return!1;for(var b=1;b<a.length-2;b++)if(f.segmentsIntersect(a[0],a[a.length-1],a[b],a[b+1]))return!1;return!0},d.prototype.quickDecomp=function(a,b,c,f,h,i){h=h||100,i=i||0,f=f||25,a="undefined"!=typeof a?a:[],b=b||[],c=c||[];var j=[0,0],k=[0,0],l=[0,0],m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=new d,u=new d,v=this,w=this.vertices;if(w.length<3)return a;if(i++,i>h)return console.warn("quickDecomp: max level ("+h+") reached."),a;for(var x=0;x<this.vertices.length;++x)if(v.isReflex(x)){b.push(v.vertices[x]),m=n=Number.MAX_VALUE;for(var y=0;y<this.vertices.length;++y)g.left(v.at(x-1),v.at(x),v.at(y))&&g.rightOn(v.at(x-1),v.at(x),v.at(y-1))&&(l=e(v.at(x-1),v.at(x),v.at(y),v.at(y-1)),g.right(v.at(x+1),v.at(x),l)&&(o=g.sqdist(v.vertices[x],l),n>o&&(n=o,k=l,r=y))),g.left(v.at(x+1),v.at(x),v.at(y+1))&&g.rightOn(v.at(x+1),v.at(x),v.at(y))&&(l=e(v.at(x+1),v.at(x),v.at(y),v.at(y+1)),g.left(v.at(x-1),v.at(x),l)&&(o=g.sqdist(v.vertices[x],l),m>o&&(m=o,j=l,q=y)));if(r==(q+1)%this.vertices.length)l[0]=(k[0]+j[0])/2,l[1]=(k[1]+j[1])/2,c.push(l),q>x?(t.append(v,x,q+1),t.vertices.push(l),u.vertices.push(l),0!=r&&u.append(v,r,v.vertices.length),u.append(v,0,x+1)):(0!=x&&t.append(v,x,v.vertices.length),t.append(v,0,q+1),t.vertices.push(l),u.vertices.push(l),u.append(v,r,x+1));else{if(r>q&&(q+=this.vertices.length),p=Number.MAX_VALUE,r>q)return a;for(var y=r;q>=y;++y)g.leftOn(v.at(x-1),v.at(x),v.at(y))&&g.rightOn(v.at(x+1),v.at(x),v.at(y))&&(o=g.sqdist(v.at(x),v.at(y)),p>o&&(p=o,s=y%this.vertices.length));s>x?(t.append(v,x,s+1),0!=s&&u.append(v,s,w.length),u.append(v,0,x+1)):(0!=x&&t.append(v,x,w.length),t.append(v,0,s+1),u.append(v,s,x+1))}return t.vertices.length<u.vertices.length?(t.quickDecomp(a,b,c,f,h,i),u.quickDecomp(a,b,c,f,h,i)):(u.quickDecomp(a,b,c,f,h,i),t.quickDecomp(a,b,c,f,h,i)),a}return a.push(this),a},d.prototype.removeCollinearPoints=function(a){for(var b=0,c=this.vertices.length-1;this.vertices.length>3&&c>=0;--c)g.collinear(this.at(c-1),this.at(c),this.at(c+1),a)&&(this.vertices.splice(c%this.vertices.length,1),c--,b++);return b}},{"./Line":1,"./Point":2,"./Scalar":4}],4:[function(a,b,c){function d(){}b.exports=d,d.eq=function(a,b,c){return c=c||0,Math.abs(a-b)<c}},{}],5:[function(a,b,c){b.exports={Polygon:a("./Polygon"),Point:a("./Point")}},{"./Point":2,"./Polygon":3}],6:[function(a,b,c){b.exports={name:"p2",version:"0.7.0",description:"A JavaScript 2D physics engine.",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"^0.4.5","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.0"}}},{}],7:[function(a,b,c){function d(a){this.lowerBound=e.create(),a&&a.lowerBound&&e.copy(this.lowerBound,a.lowerBound),this.upperBound=e.create(),a&&a.upperBound&&e.copy(this.upperBound,a.upperBound)}var e=a("../math/vec2");a("../utils/Utils");b.exports=d;var f=e.create();d.prototype.setFromPoints=function(a,b,c,d){var g=this.lowerBound,h=this.upperBound;"number"!=typeof c&&(c=0),0!==c?e.rotate(g,a[0],c):e.copy(g,a[0]),e.copy(h,g);for(var i=Math.cos(c),j=Math.sin(c),k=1;k<a.length;k++){var l=a[k];if(0!==c){var m=l[0],n=l[1];f[0]=i*m-j*n,f[1]=j*m+i*n,l=f}for(var o=0;2>o;o++)l[o]>h[o]&&(h[o]=l[o]),l[o]<g[o]&&(g[o]=l[o])}b&&(e.add(this.lowerBound,this.lowerBound,b),e.add(this.upperBound,this.upperBound,b)),d&&(this.lowerBound[0]-=d,this.lowerBound[1]-=d,this.upperBound[0]+=d,this.upperBound[1]+=d)},d.prototype.copy=function(a){e.copy(this.lowerBound,a.lowerBound),e.copy(this.upperBound,a.upperBound)},d.prototype.extend=function(a){for(var b=2;b--;){var c=a.lowerBound[b];this.lowerBound[b]>c&&(this.lowerBound[b]=c);var d=a.upperBound[b];this.upperBound[b]<d&&(this.upperBound[b]=d)}},d.prototype.overlaps=function(a){var b=this.lowerBound,c=this.upperBound,d=a.lowerBound,e=a.upperBound;return(d[0]<=c[0]&&c[0]<=e[0]||b[0]<=e[0]&&e[0]<=c[0])&&(d[1]<=c[1]&&c[1]<=e[1]||b[1]<=e[1]&&e[1]<=c[1])},d.prototype.containsPoint=function(a){var b=this.lowerBound,c=this.upperBound;return b[0]<=a[0]&&a[0]<=c[0]&&b[1]<=a[1]&&a[1]<=c[1]},d.prototype.overlapsRay=function(a){var b=1/a.direction[0],c=1/a.direction[1],d=(this.lowerBound[0]-a.from[0])*b,e=(this.upperBound[0]-a.from[0])*b,f=(this.lowerBound[1]-a.from[1])*c,g=(this.upperBound[1]-a.from[1])*c,h=Math.max(Math.max(Math.min(d,e),Math.min(f,g))),i=Math.min(Math.min(Math.max(d,e),Math.max(f,g)));return 0>i?-1:h>i?-1:h}},{"../math/vec2":30,"../utils/Utils":57}],8:[function(a,b,c){function d(a){this.type=a,this.result=[],this.world=null,this.boundingVolumeType=d.AABB}var e=a("../math/vec2"),f=a("../objects/Body");b.exports=d,d.AABB=1,d.BOUNDING_CIRCLE=2,d.prototype.setWorld=function(a){this.world=a},d.prototype.getCollisionPairs=function(a){};var g=e.create();d.boundingRadiusCheck=function(a,b){e.sub(g,a.position,b.position);var c=e.squaredLength(g),d=a.boundingRadius+b.boundingRadius;return d*d>=c},d.aabbCheck=function(a,b){return a.getAABB().overlaps(b.getAABB())},d.prototype.boundingVolumeCheck=function(a,b){var c;switch(this.boundingVolumeType){case d.BOUNDING_CIRCLE:c=d.boundingRadiusCheck(a,b);break;case d.AABB:c=d.aabbCheck(a,b);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return c},d.canCollide=function(a,b){var c=f.KINEMATIC,d=f.STATIC;return a.type===d&&b.type===d?!1:a.type===c&&b.type===d||a.type===d&&b.type===c?!1:a.type===c&&b.type===c?!1:a.sleepState===f.SLEEPING&&b.sleepState===f.SLEEPING?!1:!(a.sleepState===f.SLEEPING&&b.type===d||b.sleepState===f.SLEEPING&&a.type===d)},d.NAIVE=1,d.SAP=2},{"../math/vec2":30,"../objects/Body":31}],9:[function(a,b,c){function d(){e.call(this,e.NAIVE)}var e=(a("../shapes/Circle"),a("../shapes/Plane"),a("../shapes/Shape"),a("../shapes/Particle"),a("../collision/Broadphase"));a("../math/vec2");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.getCollisionPairs=function(a){var b=a.bodies,c=this.result;c.length=0;for(var d=0,f=b.length;d!==f;d++)for(var g=b[d],h=0;d>h;h++){var i=b[h];e.canCollide(g,i)&&this.boundingVolumeCheck(g,i)&&c.push(g,i)}return c},d.prototype.aabbQuery=function(a,b,c){c=c||[];for(var d=a.bodies,e=0;e<d.length;e++){var f=d[e];f.aabbNeedsUpdate&&f.updateAABB(),f.aabb.overlaps(b)&&c.push(f)}return c}},{"../collision/Broadphase":8,"../math/vec2":30,"../shapes/Circle":39,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45}],10:[function(a,b,c){function d(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new k({size:32}),this.frictionEquationPool=new l({size:64}),this.restitution=0,this.stiffness=n.DEFAULT_STIFFNESS,this.relaxation=n.DEFAULT_RELAXATION,this.frictionStiffness=n.DEFAULT_STIFFNESS,this.frictionRelaxation=n.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new m,this.contactSkinSize=.01}function e(a,b){g.set(a.vertices[0],.5*-b.length,-b.radius),g.set(a.vertices[1],.5*b.length,-b.radius),g.set(a.vertices[2],.5*b.length,b.radius),g.set(a.vertices[3],.5*-b.length,b.radius)}function f(a,b,c,d){for(var e=T,f=U,j=V,k=W,l=a,m=b.vertices,n=null,o=0;o!==m.length+1;o++){var p=m[o%m.length],q=m[(o+1)%m.length];g.rotate(e,p,d),g.rotate(f,q,d),i(e,e,c),i(f,f,c),h(j,e,l),h(k,f,l);var r=g.crossLength(j,k);if(null===n&&(n=r),0>=r*n)return!1;n=r}return!0}var g=a("../math/vec2"),h=g.sub,i=g.add,j=g.dot,k=(a("../utils/Utils"),a("../utils/ContactEquationPool")),l=a("../utils/FrictionEquationPool"),m=a("../utils/TupleDictionary"),n=a("../equations/Equation"),o=(a("../equations/ContactEquation"),a("../equations/FrictionEquation"),a("../shapes/Circle")),p=a("../shapes/Convex"),q=a("../shapes/Shape"),r=(a("../objects/Body"),a("../shapes/Box"));b.exports=d;var s=g.fromValues(0,1),t=g.fromValues(0,0),u=g.fromValues(0,0),v=g.fromValues(0,0),w=g.fromValues(0,0),x=g.fromValues(0,0),y=g.fromValues(0,0),z=g.fromValues(0,0),A=g.fromValues(0,0),B=g.fromValues(0,0),C=g.fromValues(0,0),D=g.fromValues(0,0),E=g.fromValues(0,0),F=g.fromValues(0,0),G=g.fromValues(0,0),H=g.fromValues(0,0),I=g.fromValues(0,0),J=g.fromValues(0,0),K=g.fromValues(0,0),L=[],M=g.create(),N=g.create();d.prototype.bodiesOverlap=function(a,b){for(var c=M,d=N,e=0,f=a.shapes.length;e!==f;e++){var g=a.shapes[e];a.toWorldFrame(c,g.position);for(var h=0,i=b.shapes.length;h!==i;h++){var j=b.shapes[h];if(b.toWorldFrame(d,j.position),this[g.type|j.type](a,g,c,g.angle+a.angle,b,j,d,j.angle+b.angle,!0))return!0}}return!1},d.prototype.collidedLastStep=function(a,b){var c=0|a.id,d=0|b.id;return!!this.collidingBodiesLastStep.get(c,d)},d.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var a=this.contactEquations,b=a.length;b--;){var c=a[b],d=c.bodyA.id,e=c.bodyB.id;this.collidingBodiesLastStep.set(d,e,!0)}for(var f=this.contactEquations,g=this.frictionEquations,h=0;h<f.length;h++)this.contactEquationPool.release(f[h]);for(var h=0;h<g.length;h++)this.frictionEquationPool.release(g[h]);
this.contactEquations.length=this.frictionEquations.length=0},d.prototype.createContactEquation=function(a,b,c,d){var e=this.contactEquationPool.get();return e.bodyA=a,e.bodyB=b,e.shapeA=c,e.shapeB=d,e.restitution=this.restitution,e.firstImpact=!this.collidedLastStep(a,b),e.stiffness=this.stiffness,e.relaxation=this.relaxation,e.needsUpdate=!0,e.enabled=this.enabledEquations,e.offset=this.contactSkinSize,e},d.prototype.createFrictionEquation=function(a,b,c,d){var e=this.frictionEquationPool.get();return e.bodyA=a,e.bodyB=b,e.shapeA=c,e.shapeB=d,e.setSlipForce(this.slipForce),e.frictionCoefficient=this.frictionCoefficient,e.relativeVelocity=this.surfaceVelocity,e.enabled=this.enabledEquations,e.needsUpdate=!0,e.stiffness=this.frictionStiffness,e.relaxation=this.frictionRelaxation,e.contactEquations.length=0,e},d.prototype.createFrictionFromContact=function(a){var b=this.createFrictionEquation(a.bodyA,a.bodyB,a.shapeA,a.shapeB);return g.copy(b.contactPointA,a.contactPointA),g.copy(b.contactPointB,a.contactPointB),g.rotate90cw(b.t,a.normalA),b.contactEquations.push(a),b},d.prototype.createFrictionFromAverage=function(a){var b=this.contactEquations[this.contactEquations.length-1],c=this.createFrictionEquation(b.bodyA,b.bodyB,b.shapeA,b.shapeB),d=b.bodyA;b.bodyB;g.set(c.contactPointA,0,0),g.set(c.contactPointB,0,0),g.set(c.t,0,0);for(var e=0;e!==a;e++)b=this.contactEquations[this.contactEquations.length-1-e],b.bodyA===d?(g.add(c.t,c.t,b.normalA),g.add(c.contactPointA,c.contactPointA,b.contactPointA),g.add(c.contactPointB,c.contactPointB,b.contactPointB)):(g.sub(c.t,c.t,b.normalA),g.add(c.contactPointA,c.contactPointA,b.contactPointB),g.add(c.contactPointB,c.contactPointB,b.contactPointA)),c.contactEquations.push(b);var f=1/a;return g.scale(c.contactPointA,c.contactPointA,f),g.scale(c.contactPointB,c.contactPointB,f),g.normalize(c.t,c.t),g.rotate90cw(c.t,c.t),c},d.prototype[q.LINE|q.CONVEX]=d.prototype.convexLine=function(a,b,c,d,e,f,g,h,i){return i?!1:0},d.prototype[q.LINE|q.BOX]=d.prototype.lineBox=function(a,b,c,d,e,f,g,h,i){return i?!1:0};var O=new r({width:1,height:1}),P=g.create();d.prototype[q.CAPSULE|q.CONVEX]=d.prototype[q.CAPSULE|q.BOX]=d.prototype.convexCapsule=function(a,b,c,d,f,h,i,j,k){var l=P;g.set(l,h.length/2,0),g.rotate(l,l,j),g.add(l,l,i);var m=this.circleConvex(f,h,l,j,a,b,c,d,k,h.radius);g.set(l,-h.length/2,0),g.rotate(l,l,j),g.add(l,l,i);var n=this.circleConvex(f,h,l,j,a,b,c,d,k,h.radius);if(k&&(m||n))return!0;var o=O;e(o,h);var p=this.convexConvex(a,b,c,d,f,o,i,j,k);return p+m+n},d.prototype[q.CAPSULE|q.LINE]=d.prototype.lineCapsule=function(a,b,c,d,e,f,g,h,i){return i?!1:0};var Q=g.create(),R=g.create(),S=new r({width:1,height:1});d.prototype[q.CAPSULE|q.CAPSULE]=d.prototype.capsuleCapsule=function(a,b,c,d,f,h,i,j,k){for(var l,m=Q,n=R,o=0,p=0;2>p;p++){g.set(m,(0===p?-1:1)*b.length/2,0),g.rotate(m,m,d),g.add(m,m,c);for(var q=0;2>q;q++){g.set(n,(0===q?-1:1)*h.length/2,0),g.rotate(n,n,j),g.add(n,n,i),this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1);var r=this.circleCircle(a,b,m,d,f,h,n,j,k,b.radius,h.radius);if(this.enableFrictionReduction&&(this.enableFriction=l),k&&r)return!0;o+=r}}this.enableFrictionReduction&&(l=this.enableFriction,this.enableFriction=!1);var s=S;e(s,b);var t=this.convexCapsule(a,s,c,d,f,h,i,j,k);if(this.enableFrictionReduction&&(this.enableFriction=l),k&&t)return!0;if(o+=t,this.enableFrictionReduction){var l=this.enableFriction;this.enableFriction=!1}e(s,h);var u=this.convexCapsule(f,s,i,j,a,b,c,d,k);return this.enableFrictionReduction&&(this.enableFriction=l),k&&u?!0:(o+=u,this.enableFrictionReduction&&o&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(o)),o)},d.prototype[q.LINE|q.LINE]=d.prototype.lineLine=function(a,b,c,d,e,f,g,h,i){return i?!1:0},d.prototype[q.PLANE|q.LINE]=d.prototype.planeLine=function(a,b,c,d,e,f,k,l,m){var n=t,o=u,p=v,q=w,r=x,C=y,D=z,E=A,F=B,G=L,H=0;g.set(n,-f.length/2,0),g.set(o,f.length/2,0),g.rotate(p,n,l),g.rotate(q,o,l),i(p,p,k),i(q,q,k),g.copy(n,p),g.copy(o,q),h(r,o,n),g.normalize(C,r),g.rotate90cw(F,C),g.rotate(E,s,d),G[0]=n,G[1]=o;for(var I=0;I<G.length;I++){var J=G[I];h(D,J,c);var K=j(D,E);if(0>K){if(m)return!0;var M=this.createContactEquation(a,e,b,f);H++,g.copy(M.normalA,E),g.normalize(M.normalA,M.normalA),g.scale(D,E,K),h(M.contactPointA,J,D),h(M.contactPointA,M.contactPointA,a.position),h(M.contactPointB,J,k),i(M.contactPointB,M.contactPointB,k),h(M.contactPointB,M.contactPointB,e.position),this.contactEquations.push(M),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}}return m?!1:(this.enableFrictionReduction||H&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(H)),H)},d.prototype[q.PARTICLE|q.CAPSULE]=d.prototype.particleCapsule=function(a,b,c,d,e,f,g,h,i){return this.circleLine(a,b,c,d,e,f,g,h,i,f.radius,0)},d.prototype[q.CIRCLE|q.LINE]=d.prototype.circleLine=function(a,b,c,d,e,f,k,l,m,n,o){var n=n||0,o="undefined"!=typeof o?o:b.radius,p=t,q=u,r=v,s=w,H=x,I=y,J=z,K=A,M=B,N=C,O=D,P=E,Q=F,R=G,S=L;g.set(K,-f.length/2,0),g.set(M,f.length/2,0),g.rotate(N,K,l),g.rotate(O,M,l),i(N,N,k),i(O,O,k),g.copy(K,N),g.copy(M,O),h(I,M,K),g.normalize(J,I),g.rotate90cw(H,J),h(P,c,K);var T=j(P,H);h(s,K,k),h(Q,c,k);var U=o+n;if(Math.abs(T)<U){g.scale(p,H,T),h(r,c,p),g.scale(q,H,j(H,Q)),g.normalize(q,q),g.scale(q,q,n),i(r,r,q);var V=j(J,r),W=j(J,K),X=j(J,M);if(V>W&&X>V){if(m)return!0;var Y=this.createContactEquation(a,e,b,f);return g.scale(Y.normalA,p,-1),g.normalize(Y.normalA,Y.normalA),g.scale(Y.contactPointA,Y.normalA,o),i(Y.contactPointA,Y.contactPointA,c),h(Y.contactPointA,Y.contactPointA,a.position),h(Y.contactPointB,r,k),i(Y.contactPointB,Y.contactPointB,k),h(Y.contactPointB,Y.contactPointB,e.position),this.contactEquations.push(Y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Y)),1}}S[0]=K,S[1]=M;for(var Z=0;Z<S.length;Z++){var $=S[Z];if(h(P,$,c),g.squaredLength(P)<Math.pow(U,2)){if(m)return!0;var Y=this.createContactEquation(a,e,b,f);return g.copy(Y.normalA,P),g.normalize(Y.normalA,Y.normalA),g.scale(Y.contactPointA,Y.normalA,o),i(Y.contactPointA,Y.contactPointA,c),h(Y.contactPointA,Y.contactPointA,a.position),h(Y.contactPointB,$,k),g.scale(R,Y.normalA,-n),i(Y.contactPointB,Y.contactPointB,R),i(Y.contactPointB,Y.contactPointB,k),h(Y.contactPointB,Y.contactPointB,e.position),this.contactEquations.push(Y),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(Y)),1}}return 0},d.prototype[q.CIRCLE|q.CAPSULE]=d.prototype.circleCapsule=function(a,b,c,d,e,f,g,h,i){return this.circleLine(a,b,c,d,e,f,g,h,i,f.radius)},d.prototype[q.CIRCLE|q.CONVEX]=d.prototype[q.CIRCLE|q.BOX]=d.prototype.circleConvex=function(a,b,c,d,e,j,k,l,m,n){for(var n="number"==typeof n?n:b.radius,o=t,p=u,q=v,r=w,s=x,y=C,z=D,A=F,B=G,E=H,J=I,K=!1,L=Number.MAX_VALUE,M=j.vertices,N=0;N!==M.length+1;N++){var O=M[N%M.length],P=M[(N+1)%M.length];if(g.rotate(o,O,l),g.rotate(p,P,l),i(o,o,k),i(p,p,k),h(q,p,o),g.normalize(r,q),g.rotate90cw(s,r),g.scale(B,s,-b.radius),i(B,B,c),f(B,j,k,l)){g.sub(E,o,B);var Q=Math.abs(g.dot(E,s));L>Q&&(g.copy(J,B),L=Q,g.scale(A,s,Q),g.add(A,A,B),K=!0)}}if(K){if(m)return!0;var R=this.createContactEquation(a,e,b,j);return g.sub(R.normalA,J,c),g.normalize(R.normalA,R.normalA),g.scale(R.contactPointA,R.normalA,n),i(R.contactPointA,R.contactPointA,c),h(R.contactPointA,R.contactPointA,a.position),h(R.contactPointB,A,k),i(R.contactPointB,R.contactPointB,k),h(R.contactPointB,R.contactPointB,e.position),this.contactEquations.push(R),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(R)),1}if(n>0)for(var N=0;N<M.length;N++){var S=M[N];if(g.rotate(z,S,l),i(z,z,k),h(y,z,c),g.squaredLength(y)<Math.pow(n,2)){if(m)return!0;var R=this.createContactEquation(a,e,b,j);return g.copy(R.normalA,y),g.normalize(R.normalA,R.normalA),g.scale(R.contactPointA,R.normalA,n),i(R.contactPointA,R.contactPointA,c),h(R.contactPointA,R.contactPointA,a.position),h(R.contactPointB,z,k),i(R.contactPointB,R.contactPointB,k),h(R.contactPointB,R.contactPointB,e.position),this.contactEquations.push(R),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(R)),1}}return 0};var T=g.create(),U=g.create(),V=g.create(),W=g.create();d.prototype[q.PARTICLE|q.CONVEX]=d.prototype[q.PARTICLE|q.BOX]=d.prototype.particleConvex=function(a,b,c,d,e,k,l,m,n){var o=t,p=u,q=v,r=w,s=x,A=y,B=z,D=C,E=F,G=J,H=K,I=Number.MAX_VALUE,L=!1,M=k.vertices;if(!f(c,k,l,m))return 0;if(n)return!0;for(var N=0;N!==M.length+1;N++){var O=M[N%M.length],P=M[(N+1)%M.length];g.rotate(o,O,m),g.rotate(p,P,m),i(o,o,l),i(p,p,l),h(q,p,o),g.normalize(r,q),g.rotate90cw(s,r),h(D,c,o);j(D,s);h(A,o,l),h(B,c,l),g.sub(G,o,c);var Q=Math.abs(g.dot(G,s));I>Q&&(I=Q,g.scale(E,s,Q),g.add(E,E,c),g.copy(H,s),L=!0)}if(L){var R=this.createContactEquation(a,e,b,k);return g.scale(R.normalA,H,-1),g.normalize(R.normalA,R.normalA),g.set(R.contactPointA,0,0),i(R.contactPointA,R.contactPointA,c),h(R.contactPointA,R.contactPointA,a.position),h(R.contactPointB,E,l),i(R.contactPointB,R.contactPointB,l),h(R.contactPointB,R.contactPointB,e.position),this.contactEquations.push(R),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(R)),1}return 0},d.prototype[q.CIRCLE]=d.prototype.circleCircle=function(a,b,c,d,e,f,j,k,l,m,n){var o=t,m=m||b.radius,n=n||f.radius;h(o,c,j);var p=m+n;if(g.squaredLength(o)>Math.pow(p,2))return 0;if(l)return!0;var q=this.createContactEquation(a,e,b,f);return h(q.normalA,j,c),g.normalize(q.normalA,q.normalA),g.scale(q.contactPointA,q.normalA,m),g.scale(q.contactPointB,q.normalA,-n),i(q.contactPointA,q.contactPointA,c),h(q.contactPointA,q.contactPointA,a.position),i(q.contactPointB,q.contactPointB,j),h(q.contactPointB,q.contactPointB,e.position),this.contactEquations.push(q),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(q)),1},d.prototype[q.PLANE|q.CONVEX]=d.prototype[q.PLANE|q.BOX]=d.prototype.planeConvex=function(a,b,c,d,e,f,k,l,m){var n=t,o=u,p=v,q=0;g.rotate(o,s,d);for(var r=0;r!==f.vertices.length;r++){var w=f.vertices[r];if(g.rotate(n,w,l),i(n,n,k),h(p,n,c),j(p,o)<=0){if(m)return!0;q++;var x=this.createContactEquation(a,e,b,f);h(p,n,c),g.copy(x.normalA,o);var y=j(p,x.normalA);g.scale(p,x.normalA,y),h(x.contactPointB,n,e.position),h(x.contactPointA,n,p),h(x.contactPointA,x.contactPointA,a.position),this.contactEquations.push(x),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(x))}}return this.enableFrictionReduction&&this.enableFriction&&q&&this.frictionEquations.push(this.createFrictionFromAverage(q)),q},d.prototype[q.PARTICLE|q.PLANE]=d.prototype.particlePlane=function(a,b,c,d,e,f,i,k,l){var m=t,n=u;k=k||0,h(m,c,i),g.rotate(n,s,k);var o=j(m,n);if(o>0)return 0;if(l)return!0;var p=this.createContactEquation(e,a,f,b);return g.copy(p.normalA,n),g.scale(m,p.normalA,o),h(p.contactPointA,c,m),h(p.contactPointA,p.contactPointA,e.position),h(p.contactPointB,c,a.position),this.contactEquations.push(p),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(p)),1},d.prototype[q.CIRCLE|q.PARTICLE]=d.prototype.circleParticle=function(a,b,c,d,e,f,j,k,l){var m=t;if(h(m,j,c),g.squaredLength(m)>Math.pow(b.radius,2))return 0;if(l)return!0;var n=this.createContactEquation(a,e,b,f);return g.copy(n.normalA,m),g.normalize(n.normalA,n.normalA),g.scale(n.contactPointA,n.normalA,b.radius),i(n.contactPointA,n.contactPointA,c),h(n.contactPointA,n.contactPointA,a.position),h(n.contactPointB,j,e.position),this.contactEquations.push(n),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(n)),1};var X=new o({radius:1}),Y=g.create(),Z=g.create();g.create();d.prototype[q.PLANE|q.CAPSULE]=d.prototype.planeCapsule=function(a,b,c,d,e,f,h,j,k){var l=Y,m=Z,n=X;g.set(l,-f.length/2,0),g.rotate(l,l,j),i(l,l,h),g.set(m,f.length/2,0),g.rotate(m,m,j),i(m,m,h),n.radius=f.radius;var o;this.enableFrictionReduction&&(o=this.enableFriction,this.enableFriction=!1);var p=this.circlePlane(e,n,l,0,a,b,c,d,k),q=this.circlePlane(e,n,m,0,a,b,c,d,k);if(this.enableFrictionReduction&&(this.enableFriction=o),k)return p||q;var r=p+q;return this.enableFrictionReduction&&r&&this.frictionEquations.push(this.createFrictionFromAverage(r)),r},d.prototype[q.CIRCLE|q.PLANE]=d.prototype.circlePlane=function(a,b,c,d,e,f,k,l,m){var n=a,o=b,p=c,q=e,r=k,w=l;w=w||0;var x=t,y=u,z=v;h(x,p,r),g.rotate(y,s,w);var A=j(y,x);if(A>o.radius)return 0;if(m)return!0;var B=this.createContactEquation(q,n,f,b);return g.copy(B.normalA,y),g.scale(B.contactPointB,B.normalA,-o.radius),i(B.contactPointB,B.contactPointB,p),h(B.contactPointB,B.contactPointB,n.position),g.scale(z,B.normalA,A),h(B.contactPointA,x,z),i(B.contactPointA,B.contactPointA,r),h(B.contactPointA,B.contactPointA,q.position),this.contactEquations.push(B),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(B)),1},d.prototype[q.CONVEX]=d.prototype[q.CONVEX|q.BOX]=d.prototype[q.BOX]=d.prototype.convexConvex=function(a,b,c,e,f,k,l,m,n,o){var p=t,q=u,r=v,s=w,y=x,C=z,D=A,E=B,F=0,o="number"==typeof o?o:0,G=d.findSeparatingAxis(b,c,e,k,l,m,p);if(!G)return 0;h(D,l,c),j(p,D)>0&&g.scale(p,p,-1);var H=d.getClosestEdge(b,e,p,!0),I=d.getClosestEdge(k,m,p);if(-1===H||-1===I)return 0;for(var J=0;2>J;J++){var K=H,L=I,M=b,N=k,O=c,P=l,Q=e,R=m,S=a,T=f;if(0===J){var U;U=K,K=L,L=U,U=M,M=N,N=U,U=O,O=P,P=U,U=Q,Q=R,R=U,U=S,S=T,T=U}for(var V=L;L+2>V;V++){var W=N.vertices[(V+N.vertices.length)%N.vertices.length];g.rotate(q,W,R),i(q,q,P);for(var X=0,Y=K-1;K+2>Y;Y++){var Z=M.vertices[(Y+M.vertices.length)%M.vertices.length],$=M.vertices[(Y+1+M.vertices.length)%M.vertices.length];g.rotate(r,Z,Q),g.rotate(s,$,Q),i(r,r,O),i(s,s,O),h(y,s,r),g.rotate90cw(E,y),g.normalize(E,E),h(D,q,r);var _=j(E,D);(Y===K&&o>=_||Y!==K&&0>=_)&&X++}if(X>=3){if(n)return!0;var aa=this.createContactEquation(S,T,M,N);F++;var Z=M.vertices[K%M.vertices.length],$=M.vertices[(K+1)%M.vertices.length];g.rotate(r,Z,Q),g.rotate(s,$,Q),i(r,r,O),i(s,s,O),h(y,s,r),g.rotate90cw(aa.normalA,y),g.normalize(aa.normalA,aa.normalA),h(D,q,r);var _=j(aa.normalA,D);g.scale(C,aa.normalA,_),h(aa.contactPointA,q,O),h(aa.contactPointA,aa.contactPointA,C),i(aa.contactPointA,aa.contactPointA,O),h(aa.contactPointA,aa.contactPointA,S.position),h(aa.contactPointB,q,P),i(aa.contactPointB,aa.contactPointB,P),h(aa.contactPointB,aa.contactPointB,T.position),this.contactEquations.push(aa),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(aa))}}}return this.enableFrictionReduction&&this.enableFriction&&F&&this.frictionEquations.push(this.createFrictionFromAverage(F)),F};var $=g.fromValues(0,0);d.projectConvexOntoAxis=function(a,b,c,d,e){var f,h,i=null,k=null,l=$;g.rotate(l,d,-c);for(var m=0;m<a.vertices.length;m++)f=a.vertices[m],h=j(f,l),(null===i||h>i)&&(i=h),(null===k||k>h)&&(k=h);if(k>i){var n=k;k=i,i=n}var o=j(b,d);g.set(e,k+o,i+o)};var _=g.fromValues(0,0),aa=g.fromValues(0,0),ba=g.fromValues(0,0),ca=g.fromValues(0,0),da=g.fromValues(0,0),ea=g.fromValues(0,0);d.findSeparatingAxis=function(a,b,c,e,f,i,j){var k=null,l=!1,m=!1,n=_,o=aa,p=ba,q=ca,s=da,t=ea;if(a instanceof r&&e instanceof r)for(var u=0;2!==u;u++){var v=a,w=c;1===u&&(v=e,w=i);for(var x=0;2!==x;x++){0===x?g.set(q,0,1):1===x&&g.set(q,1,0),0!==w&&g.rotate(q,q,w),d.projectConvexOntoAxis(a,b,c,q,s),d.projectConvexOntoAxis(e,f,i,q,t);var y=s,z=t,A=!1;s[0]>t[0]&&(z=s,y=t,A=!0);var B=z[0]-y[1];l=0>=B,(null===k||B>k)&&(g.copy(j,q),k=B,m=l)}}else for(var u=0;2!==u;u++){var v=a,w=c;1===u&&(v=e,w=i);for(var x=0;x!==v.vertices.length;x++){g.rotate(o,v.vertices[x],w),g.rotate(p,v.vertices[(x+1)%v.vertices.length],w),h(n,p,o),g.rotate90cw(q,n),g.normalize(q,q),d.projectConvexOntoAxis(a,b,c,q,s),d.projectConvexOntoAxis(e,f,i,q,t);var y=s,z=t,A=!1;s[0]>t[0]&&(z=s,y=t,A=!0);var B=z[0]-y[1];l=0>=B,(null===k||B>k)&&(g.copy(j,q),k=B,m=l)}}return m};var fa=g.fromValues(0,0),ga=g.fromValues(0,0),ha=g.fromValues(0,0);d.getClosestEdge=function(a,b,c,d){var e=fa,f=ga,i=ha;g.rotate(e,c,-b),d&&g.scale(e,e,-1);for(var k=-1,l=a.vertices.length,m=-1,n=0;n!==l;n++){h(f,a.vertices[(n+1)%l],a.vertices[n%l]),g.rotate90cw(i,f),g.normalize(i,i);var o=j(i,e);(-1===k||o>m)&&(k=n%l,m=o)}return k};var ia=g.create(),ja=g.create(),ka=g.create(),la=g.create(),ma=g.create(),na=g.create(),oa=g.create();d.prototype[q.CIRCLE|q.HEIGHTFIELD]=d.prototype.circleHeightfield=function(a,b,c,d,e,f,j,k,l,m){var n=f.heights,m=m||b.radius,o=f.elementWidth,p=ja,q=ia,r=ma,s=oa,t=na,u=ka,v=la,w=Math.floor((c[0]-m-j[0])/o),x=Math.ceil((c[0]+m-j[0])/o);0>w&&(w=0),x>=n.length&&(x=n.length-1);for(var y=n[w],z=n[x],A=w;x>A;A++)n[A]<z&&(z=n[A]),n[A]>y&&(y=n[A]);if(c[1]-m>y)return l?!1:0;for(var B=!1,A=w;x>A;A++){g.set(u,A*o,n[A]),g.set(v,(A+1)*o,n[A+1]),g.add(u,u,j),g.add(v,v,j),g.sub(t,v,u),g.rotate(t,t,Math.PI/2),g.normalize(t,t),g.scale(q,t,-m),g.add(q,q,c),g.sub(p,q,u);var C=g.dot(p,t);if(q[0]>=u[0]&&q[0]<v[0]&&0>=C){if(l)return!0;B=!0,g.scale(p,t,-C),g.add(r,q,p),g.copy(s,t);var D=this.createContactEquation(e,a,f,b);g.copy(D.normalA,s),g.scale(D.contactPointB,D.normalA,-m),i(D.contactPointB,D.contactPointB,c),h(D.contactPointB,D.contactPointB,a.position),g.copy(D.contactPointA,r),g.sub(D.contactPointA,D.contactPointA,e.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D))}}if(B=!1,m>0)for(var A=w;x>=A;A++)if(g.set(u,A*o,n[A]),g.add(u,u,j),g.sub(p,c,u),g.squaredLength(p)<Math.pow(m,2)){if(l)return!0;B=!0;var D=this.createContactEquation(e,a,f,b);g.copy(D.normalA,p),g.normalize(D.normalA,D.normalA),g.scale(D.contactPointB,D.normalA,-m),i(D.contactPointB,D.contactPointB,c),h(D.contactPointB,D.contactPointB,a.position),h(D.contactPointA,u,j),i(D.contactPointA,D.contactPointA,j),h(D.contactPointA,D.contactPointA,e.position),this.contactEquations.push(D),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(D))}return B?1:0};var pa=g.create(),qa=g.create(),ra=g.create(),sa=new p({vertices:[g.create(),g.create(),g.create(),g.create()]});d.prototype[q.BOX|q.HEIGHTFIELD]=d.prototype[q.CONVEX|q.HEIGHTFIELD]=d.prototype.convexHeightfield=function(a,b,c,d,e,f,h,i,j){var k=f.heights,l=f.elementWidth,m=pa,n=qa,o=ra,p=sa,q=Math.floor((a.aabb.lowerBound[0]-h[0])/l),r=Math.ceil((a.aabb.upperBound[0]-h[0])/l);0>q&&(q=0),r>=k.length&&(r=k.length-1);for(var s=k[q],t=k[r],u=q;r>u;u++)k[u]<t&&(t=k[u]),k[u]>s&&(s=k[u]);if(a.aabb.lowerBound[1]>s)return j?!1:0;for(var v=0,u=q;r>u;u++){g.set(m,u*l,k[u]),g.set(n,(u+1)*l,k[u+1]),g.add(m,m,h),g.add(n,n,h);var w=100;g.set(o,.5*(n[0]+m[0]),.5*(n[1]+m[1]-w)),g.sub(p.vertices[0],n,o),g.sub(p.vertices[1],m,o),g.copy(p.vertices[2],p.vertices[1]),g.copy(p.vertices[3],p.vertices[0]),p.vertices[2][1]-=w,p.vertices[3][1]-=w,v+=this.convexConvex(a,b,c,d,e,p,o,0,j)}return v}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../shapes/Box":37,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Shape":45,"../utils/ContactEquationPool":48,"../utils/FrictionEquationPool":49,"../utils/TupleDictionary":56,"../utils/Utils":57}],11:[function(a,b,c){function d(a){a=a||{},this.from=a.from?f.fromValues(a.from[0],a.from[1]):f.create(),this.to=a.to?f.fromValues(a.to[0],a.to[1]):f.create(),this.checkCollisionResponse=void 0!==a.checkCollisionResponse?a.checkCollisionResponse:!0,this.skipBackfaces=!!a.skipBackfaces,this.collisionMask=void 0!==a.collisionMask?a.collisionMask:-1,this.collisionGroup=void 0!==a.collisionGroup?a.collisionGroup:-1,this.mode=void 0!==a.mode?a.mode:d.ANY,this.callback=a.callback||function(a){},this.direction=f.create(),this.length=1,this.update()}function e(a,b,c){f.sub(h,c,a);var d=f.dot(h,b);return f.scale(i,b,d),f.add(i,i,a),f.squaredDistance(c,i)}b.exports=d;var f=a("../math/vec2");a("../collision/RaycastResult"),a("../shapes/Shape"),a("../collision/AABB");d.prototype.constructor=d,d.CLOSEST=1,d.ANY=2,d.ALL=4,d.prototype.update=function(){var a=this.direction;f.sub(a,this.to,this.from),this.length=f.length(a),f.normalize(a,a)},d.prototype.intersectBodies=function(a,b){for(var c=0,d=b.length;!a.shouldStop(this)&&d>c;c++){var e=b[c],f=e.getAABB();(f.overlapsRay(this)>=0||f.containsPoint(this.from))&&this.intersectBody(a,e)}};var g=f.create();d.prototype.intersectBody=function(a,b){var c=this.checkCollisionResponse;if(!c||b.collisionResponse)for(var d=g,e=0,h=b.shapes.length;h>e;e++){var i=b.shapes[e];if((!c||i.collisionResponse)&&0!==(this.collisionGroup&i.collisionMask)&&0!==(i.collisionGroup&this.collisionMask)){f.rotate(d,i.position,b.angle),f.add(d,d,b.position);var j=i.angle+b.angle;if(this.intersectShape(a,i,j,d,b),a.shouldStop(this))break}}},d.prototype.intersectShape=function(a,b,c,d,f){var g=this.from,h=e(g,this.direction,d);h>b.boundingRadius*b.boundingRadius||(this._currentBody=f,this._currentShape=b,b.raycast(a,this,d,c),this._currentBody=this._currentShape=null)},d.prototype.getAABB=function(a){var b=this.to,c=this.from;f.set(a.lowerBound,Math.min(b[0],c[0]),Math.min(b[1],c[1])),f.set(a.upperBound,Math.max(b[0],c[0]),Math.max(b[1],c[1]))};f.create();d.prototype.reportIntersection=function(a,b,c,e){var g=(this.from,this.to,this._currentShape),h=this._currentBody;if(!(this.skipBackfaces&&f.dot(c,this.direction)>0))switch(this.mode){case d.ALL:a.set(c,g,h,b,e),this.callback(a);break;case d.CLOSEST:(b<a.fraction||!a.hasHit())&&a.set(c,g,h,b,e);break;case d.ANY:a.set(c,g,h,b,e)}};var h=f.create(),i=f.create()},{"../collision/AABB":7,"../collision/RaycastResult":12,"../math/vec2":30,"../shapes/Shape":45}],12:[function(a,b,c){function d(){this.normal=e.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}var e=a("../math/vec2"),f=a("../collision/Ray");b.exports=d,d.prototype.reset=function(){e.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},d.prototype.getHitDistance=function(a){return e.distance(a.from,a.to)*this.fraction},d.prototype.hasHit=function(){return-1!==this.fraction},d.prototype.getHitPoint=function(a,b){e.lerp(a,b.from,b.to,this.fraction)},d.prototype.stop=function(){this.isStopped=!0},d.prototype.shouldStop=function(a){return this.isStopped||-1!==this.fraction&&a.mode===f.ANY},d.prototype.set=function(a,b,c,d,f){e.copy(this.normal,a),this.shape=b,this.body=c,this.fraction=d,this.faceIndex=f}},{"../collision/Ray":11,"../math/vec2":30}],13:[function(a,b,c){function d(){f.call(this,f.SAP),this.axisList=[],this.axisIndex=0;var a=this;this._addBodyHandler=function(b){a.axisList.push(b.body)},this._removeBodyHandler=function(b){var c=a.axisList.indexOf(b.body);-1!==c&&a.axisList.splice(c,1)}}var e=a("../utils/Utils"),f=a("../collision/Broadphase");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.setWorld=function(a){this.axisList.length=0,e.appendArray(this.axisList,a.bodies),a.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),a.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=a},d.sortAxisList=function(a,b){b=0|b;for(var c=1,d=a.length;d>c;c++){for(var e=a[c],f=c-1;f>=0&&!(a[f].aabb.lowerBound[b]<=e.aabb.lowerBound[b]);f--)a[f+1]=a[f];a[f+1]=e}return a},d.prototype.sortList=function(){var a=this.axisList,b=this.axisIndex;d.sortAxisList(a,b)},d.prototype.getCollisionPairs=function(a){var b=this.axisList,c=this.result,d=this.axisIndex;c.length=0;for(var e=b.length;e--;){var g=b[e];g.aabbNeedsUpdate&&g.updateAABB()}this.sortList();for(var h=0,i=0|b.length;h!==i;h++)for(var j=b[h],k=h+1;i>k;k++){var l=b[k],m=l.aabb.lowerBound[d]<=j.aabb.upperBound[d];if(!m)break;f.canCollide(j,l)&&this.boundingVolumeCheck(j,l)&&c.push(j,l)}return c},d.prototype.aabbQuery=function(a,b,c){c=c||[],this.sortList();var d=this.axisIndex,e="x";1===d&&(e="y"),2===d&&(e="z");for(var f=this.axisList,g=(b.lowerBound[e],b.upperBound[e],0);g<f.length;g++){var h=f[g];h.aabbNeedsUpdate&&h.updateAABB(),h.aabb.overlaps(b)&&c.push(h)}return c}},{"../collision/Broadphase":8,"../utils/Utils":57}],14:[function(a,b,c){function d(a,b,c,d){this.type=c,d=e.defaults(d,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=a,this.bodyB=b,this.collideConnected=d.collideConnected,d.wakeUpBodies&&(a&&a.wakeUp(),b&&b.wakeUp())}b.exports=d;var e=a("../utils/Utils");d.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},d.DISTANCE=1,d.GEAR=2,d.LOCK=3,d.PRISMATIC=4,d.REVOLUTE=5,d.prototype.setStiffness=function(a){for(var b=this.equations,c=0;c!==b.length;c++){var d=b[c];d.stiffness=a,d.needsUpdate=!0}},d.prototype.setRelaxation=function(a){for(var b=this.equations,c=0;c!==b.length;c++){var d=b[c];d.relaxation=a,d.needsUpdate=!0}}},{"../utils/Utils":57}],15:[function(a,b,c){function d(a,b,c){c=h.defaults(c,{localAnchorA:[0,0],localAnchorB:[0,0]}),e.call(this,a,b,e.DISTANCE,c),this.localAnchorA=g.fromValues(c.localAnchorA[0],c.localAnchorA[1]),this.localAnchorB=g.fromValues(c.localAnchorB[0],c.localAnchorB[1]);var d=this.localAnchorA,i=this.localAnchorB;if(this.distance=0,"number"==typeof c.distance)this.distance=c.distance;else{var j=g.create(),k=g.create(),l=g.create();g.rotate(j,d,a.angle),g.rotate(k,i,b.angle),g.add(l,b.position,k),g.sub(l,l,j),g.sub(l,l,a.position),this.distance=g.length(l)}var m;m="undefined"==typeof c.maxForce?Number.MAX_VALUE:c.maxForce;var n=new f(a,b,-m,m);this.equations=[n],this.maxForce=m;var l=g.create(),o=g.create(),p=g.create(),q=this;n.computeGq=function(){var a=this.bodyA,b=this.bodyB,c=a.position,e=b.position;return g.rotate(o,d,a.angle),g.rotate(p,i,b.angle),g.add(l,e,p),g.sub(l,l,o),g.sub(l,l,c),g.length(l)-q.distance},this.setMaxForce(m),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var e=a("./Constraint"),f=a("../equations/Equation"),g=a("../math/vec2"),h=a("../utils/Utils");b.exports=d,d.prototype=new e,d.prototype.constructor=d;var i=g.create(),j=g.create(),k=g.create();d.prototype.update=function(){var a=this.equations[0],b=this.bodyA,c=this.bodyB,d=(this.distance,b.position),e=c.position,f=this.equations[0],h=a.G;g.rotate(j,this.localAnchorA,b.angle),g.rotate(k,this.localAnchorB,c.angle),g.add(i,e,k),g.sub(i,i,j),g.sub(i,i,d),this.position=g.length(i);var l=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(f.maxForce=0,f.minForce=-this.maxForce,this.distance=this.upperLimit,l=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(f.maxForce=this.maxForce,f.minForce=0,this.distance=this.lowerLimit,l=!0),(this.lowerLimitEnabled||this.upperLimitEnabled)&&!l)return void(f.enabled=!1);f.enabled=!0,g.normalize(i,i);var m=g.crossLength(j,i),n=g.crossLength(k,i);h[0]=-i[0],h[1]=-i[1],h[2]=-m,h[3]=i[0],h[4]=i[1],h[5]=n},d.prototype.setMaxForce=function(a){var b=this.equations[0];b.minForce=-a,b.maxForce=a},d.prototype.getMaxForce=function(){var a=this.equations[0];return a.maxForce}},{"../equations/Equation":22,"../math/vec2":30,"../utils/Utils":57,"./Constraint":14}],16:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,e.GEAR,c),this.ratio=void 0!==c.ratio?c.ratio:1,this.angle=void 0!==c.angle?c.angle:b.angle-this.ratio*a.angle,c.angle=this.angle,c.ratio=this.ratio,this.equations=[new f(a,b,c)],void 0!==c.maxTorque&&this.setMaxTorque(c.maxTorque)}var e=a("./Constraint"),f=(a("../equations/Equation"),a("../equations/AngleLockEquation"));a("../math/vec2");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.update=function(){var a=this.equations[0];a.ratio!==this.ratio&&a.setRatio(this.ratio),a.angle=this.angle},d.prototype.setMaxTorque=function(a){this.equations[0].setMaxTorque(a)},d.prototype.getMaxTorque=function(a){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":20,"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],17:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,e.LOCK,c);var d="undefined"==typeof c.maxForce?Number.MAX_VALUE:c.maxForce,h=(c.localAngleB||0,new g(a,b,-d,d)),i=new g(a,b,-d,d),j=new g(a,b,-d,d),k=f.create(),l=f.create(),m=this;h.computeGq=function(){return f.rotate(k,m.localOffsetB,a.angle),f.sub(l,b.position,a.position),f.sub(l,l,k),l[0]},i.computeGq=function(){return f.rotate(k,m.localOffsetB,a.angle),f.sub(l,b.position,a.position),f.sub(l,l,k),l[1]};var n=f.create(),o=f.create();j.computeGq=function(){return f.rotate(n,m.localOffsetB,b.angle-m.localAngleB),f.scale(n,n,-1),f.sub(l,a.position,b.position),f.add(l,l,n),f.rotate(o,n,-Math.PI/2),f.normalize(o,o),f.dot(l,o)},this.localOffsetB=f.create(),c.localOffsetB?f.copy(this.localOffsetB,c.localOffsetB):(f.sub(this.localOffsetB,b.position,a.position),f.rotate(this.localOffsetB,this.localOffsetB,-a.angle)),this.localAngleB=0,"number"==typeof c.localAngleB?this.localAngleB=c.localAngleB:this.localAngleB=b.angle-a.angle,this.equations.push(h,i,j),this.setMaxForce(d)}var e=a("./Constraint"),f=a("../math/vec2"),g=a("../equations/Equation");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.setMaxForce=function(a){for(var b=this.equations,c=0;c<this.equations.length;c++)b[c].maxForce=a,b[c].minForce=-a},d.prototype.getMaxForce=function(){return this.equations[0].maxForce};var h=f.create(),i=f.create(),j=f.create(),k=f.fromValues(1,0),l=f.fromValues(0,1);d.prototype.update=function(){var a=this.equations[0],b=this.equations[1],c=this.equations[2],d=this.bodyA,e=this.bodyB;f.rotate(h,this.localOffsetB,d.angle),f.rotate(i,this.localOffsetB,e.angle-this.localAngleB),f.scale(i,i,-1),f.rotate(j,i,Math.PI/2),f.normalize(j,j),a.G[0]=-1,a.G[1]=0,a.G[2]=-f.crossLength(h,k),a.G[3]=1,b.G[0]=0,b.G[1]=-1,b.G[2]=-f.crossLength(h,l),b.G[4]=1,c.G[0]=-j[0],c.G[1]=-j[1],c.G[3]=j[0],c.G[4]=j[1],c.G[5]=f.crossLength(i,j)}},{"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],18:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,e.PRISMATIC,c);var d=h.fromValues(0,0),j=h.fromValues(1,0),k=h.fromValues(0,0);c.localAnchorA&&h.copy(d,c.localAnchorA),c.localAxisA&&h.copy(j,c.localAxisA),c.localAnchorB&&h.copy(k,c.localAnchorB),this.localAnchorA=d,this.localAnchorB=k,this.localAxisA=j;var l=this.maxForce="undefined"!=typeof c.maxForce?c.maxForce:Number.MAX_VALUE,m=new g(a,b,-l,l),n=new h.create,o=new h.create,p=new h.create,q=new h.create;if(m.computeGq=function(){return h.dot(p,q)},m.updateJacobian=function(){var c=this.G,e=a.position,f=b.position;h.rotate(n,d,a.angle),h.rotate(o,k,b.angle),h.add(p,f,o),h.sub(p,p,e),h.sub(p,p,n),h.rotate(q,j,a.angle+Math.PI/2),c[0]=-q[0],c[1]=-q[1],c[2]=-h.crossLength(n,q)+h.crossLength(q,p),c[3]=q[0],c[4]=q[1],c[5]=h.crossLength(o,q)},this.equations.push(m),!c.disableRotationalLock){var r=new i(a,b,-l,l);this.equations.push(r)}this.position=0,this.velocity=0,this.lowerLimitEnabled="undefined"!=typeof c.lowerLimit,this.upperLimitEnabled="undefined"!=typeof c.upperLimit,this.lowerLimit="undefined"!=typeof c.lowerLimit?c.lowerLimit:0,this.upperLimit="undefined"!=typeof c.upperLimit?c.upperLimit:1,this.upperLimitEquation=new f(a,b),this.lowerLimitEquation=new f(a,b),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=l,this.motorEquation=new g(a,b),this.motorEnabled=!1,this.motorSpeed=0;var s=this,t=this.motorEquation;t.computeGW;t.computeGq=function(){return 0},t.computeGW=function(){var a=this.G,b=this.bodyA,c=this.bodyB,d=b.velocity,e=c.velocity,f=b.angularVelocity,g=c.angularVelocity;return this.gmult(a,d,f,e,g)+s.motorSpeed}}var e=a("./Constraint"),f=a("../equations/ContactEquation"),g=a("../equations/Equation"),h=a("../math/vec2"),i=a("../equations/RotationalLockEquation");b.exports=d,d.prototype=new e,d.prototype.constructor=d;var j=h.create(),k=h.create(),l=h.create(),m=h.create(),n=h.create(),o=h.create();
d.prototype.update=function(){var a=this.equations,b=a[0],c=this.upperLimit,d=this.lowerLimit,e=this.upperLimitEquation,f=this.lowerLimitEquation,g=this.bodyA,i=this.bodyB,p=this.localAxisA,q=this.localAnchorA,r=this.localAnchorB;b.updateJacobian(),h.rotate(j,p,g.angle),h.rotate(m,q,g.angle),h.add(k,m,g.position),h.rotate(n,r,i.angle),h.add(l,n,i.position);var s=this.position=h.dot(l,j)-h.dot(k,j);if(this.motorEnabled){var t=this.motorEquation.G;t[0]=j[0],t[1]=j[1],t[2]=h.crossLength(j,n),t[3]=-j[0],t[4]=-j[1],t[5]=-h.crossLength(j,m)}if(this.upperLimitEnabled&&s>c)h.scale(e.normalA,j,-1),h.sub(e.contactPointA,k,g.position),h.sub(e.contactPointB,l,i.position),h.scale(o,j,c),h.add(e.contactPointA,e.contactPointA,o),-1===a.indexOf(e)&&a.push(e);else{var u=a.indexOf(e);-1!==u&&a.splice(u,1)}if(this.lowerLimitEnabled&&d>s)h.scale(f.normalA,j,1),h.sub(f.contactPointA,k,g.position),h.sub(f.contactPointB,l,i.position),h.scale(o,j,d),h.sub(f.contactPointB,f.contactPointB,o),-1===a.indexOf(f)&&a.push(f);else{var u=a.indexOf(f);-1!==u&&a.splice(u,1)}},d.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},d.prototype.disableMotor=function(){if(this.motorEnabled){var a=this.equations.indexOf(this.motorEquation);this.equations.splice(a,1),this.motorEnabled=!1}},d.prototype.setLimits=function(a,b){"number"==typeof a?(this.lowerLimit=a,this.lowerLimitEnabled=!0):(this.lowerLimit=a,this.lowerLimitEnabled=!1),"number"==typeof b?(this.upperLimit=b,this.upperLimitEnabled=!0):(this.upperLimit=b,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../math/vec2":30,"./Constraint":14}],19:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,e.REVOLUTE,c);var d=this.maxForce="undefined"!=typeof c.maxForce?c.maxForce:Number.MAX_VALUE;this.pivotA=i.create(),this.pivotB=i.create(),c.worldPivot?(i.sub(this.pivotA,c.worldPivot,a.position),i.sub(this.pivotB,c.worldPivot,b.position),i.rotate(this.pivotA,this.pivotA,-a.angle),i.rotate(this.pivotB,this.pivotB,-b.angle)):(i.copy(this.pivotA,c.localPivotA),i.copy(this.pivotB,c.localPivotB));var o=this.equations=[new f(a,b,-d,d),new f(a,b,-d,d)],p=o[0],q=o[1],r=this;p.computeGq=function(){return i.rotate(j,r.pivotA,a.angle),i.rotate(k,r.pivotB,b.angle),i.add(n,b.position,k),i.sub(n,n,a.position),i.sub(n,n,j),i.dot(n,l)},q.computeGq=function(){return i.rotate(j,r.pivotA,a.angle),i.rotate(k,r.pivotB,b.angle),i.add(n,b.position,k),i.sub(n,n,a.position),i.sub(n,n,j),i.dot(n,m)},q.minForce=p.minForce=-d,q.maxForce=p.maxForce=d,this.motorEquation=new g(a,b),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new h(a,b),this.lowerLimitEquation=new h(a,b),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var e=a("./Constraint"),f=a("../equations/Equation"),g=a("../equations/RotationalVelocityEquation"),h=a("../equations/RotationalLockEquation"),i=a("../math/vec2");b.exports=d;var j=i.create(),k=i.create(),l=i.fromValues(1,0),m=i.fromValues(0,1),n=i.create();d.prototype=new e,d.prototype.constructor=d,d.prototype.setLimits=function(a,b){"number"==typeof a?(this.lowerLimit=a,this.lowerLimitEnabled=!0):(this.lowerLimit=a,this.lowerLimitEnabled=!1),"number"==typeof b?(this.upperLimit=b,this.upperLimitEnabled=!0):(this.upperLimit=b,this.upperLimitEnabled=!1)},d.prototype.update=function(){var a=this.bodyA,b=this.bodyB,c=this.pivotA,d=this.pivotB,e=this.equations,f=(e[0],e[1],e[0]),g=e[1],h=this.upperLimit,n=this.lowerLimit,o=this.upperLimitEquation,p=this.lowerLimitEquation,q=this.angle=b.angle-a.angle;if(this.upperLimitEnabled&&q>h)o.angle=h,-1===e.indexOf(o)&&e.push(o);else{var r=e.indexOf(o);-1!==r&&e.splice(r,1)}if(this.lowerLimitEnabled&&n>q)p.angle=n,-1===e.indexOf(p)&&e.push(p);else{var r=e.indexOf(p);-1!==r&&e.splice(r,1)}i.rotate(j,c,a.angle),i.rotate(k,d,b.angle),f.G[0]=-1,f.G[1]=0,f.G[2]=-i.crossLength(j,l),f.G[3]=1,f.G[4]=0,f.G[5]=i.crossLength(k,l),g.G[0]=0,g.G[1]=-1,g.G[2]=-i.crossLength(j,m),g.G[3]=0,g.G[4]=1,g.G[5]=i.crossLength(k,m)},d.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},d.prototype.disableMotor=function(){if(this.motorEnabled){var a=this.equations.indexOf(this.motorEquation);this.equations.splice(a,1),this.motorEnabled=!1}},d.prototype.motorIsEnabled=function(){return!!this.motorEnabled},d.prototype.setMotorSpeed=function(a){if(this.motorEnabled){var b=this.equations.indexOf(this.motorEquation);this.equations[b].relativeVelocity=a}},d.prototype.getMotorSpeed=function(){return this.motorEnabled?this.motorEquation.relativeVelocity:!1}},{"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../equations/RotationalVelocityEquation":25,"../math/vec2":30,"./Constraint":14}],20:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=c.angle||0,this.ratio="number"==typeof c.ratio?c.ratio:1,this.setRatio(this.ratio)}var e=a("./Equation");a("../math/vec2");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},d.prototype.setRatio=function(a){var b=this.G;b[2]=a,b[5]=-1,this.ratio=a},d.prototype.setMaxTorque=function(a){this.maxForce=a,this.minForce=-a}},{"../math/vec2":30,"./Equation":22}],21:[function(a,b,c){function d(a,b){e.call(this,a,b,0,Number.MAX_VALUE),this.contactPointA=f.create(),this.penetrationVec=f.create(),this.contactPointB=f.create(),this.normalA=f.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var e=a("./Equation"),f=a("../math/vec2");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeB=function(a,b,c){var d=this.bodyA,e=this.bodyB,g=this.contactPointA,h=this.contactPointB,i=d.position,j=e.position,k=this.penetrationVec,l=this.normalA,m=this.G,n=f.crossLength(g,l),o=f.crossLength(h,l);m[0]=-l[0],m[1]=-l[1],m[2]=-n,m[3]=l[0],m[4]=l[1],m[5]=o,f.add(k,j,h),f.sub(k,k,i),f.sub(k,k,g);var p,q;this.firstImpact&&0!==this.restitution?(q=0,p=1/b*(1+this.restitution)*this.computeGW()):(q=f.dot(l,k)+this.offset,p=this.computeGW());var r=this.computeGiMf(),s=-q*a-p*b-c*r;return s}},{"../math/vec2":30,"./Equation":22}],22:[function(a,b,c){function d(a,b,c,e){this.minForce="undefined"==typeof c?-Number.MAX_VALUE:c,this.maxForce="undefined"==typeof e?Number.MAX_VALUE:e,this.bodyA=a,this.bodyB=b,this.stiffness=d.DEFAULT_STIFFNESS,this.relaxation=d.DEFAULT_RELAXATION,this.G=new f.ARRAY_TYPE(6);for(var g=0;6>g;g++)this.G[g]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}b.exports=d;var e=a("../math/vec2"),f=a("../utils/Utils");a("../objects/Body");d.prototype.constructor=d,d.DEFAULT_STIFFNESS=1e6,d.DEFAULT_RELAXATION=4,d.prototype.update=function(){var a=this.stiffness,b=this.relaxation,c=this.timeStep;this.a=4/(c*(1+4*b)),this.b=4*b/(1+4*b),this.epsilon=4/(c*c*a*(1+4*b)),this.needsUpdate=!1},d.prototype.gmult=function(a,b,c,d,e){return a[0]*b[0]+a[1]*b[1]+a[2]*c+a[3]*d[0]+a[4]*d[1]+a[5]*e},d.prototype.computeB=function(a,b,c){var d=this.computeGW(),e=this.computeGq(),f=this.computeGiMf();return-e*a-d*b-f*c};var g=e.create(),h=e.create();d.prototype.computeGq=function(){var a=this.G,b=this.bodyA,c=this.bodyB,d=(b.position,c.position,b.angle),e=c.angle;return this.gmult(a,g,d,h,e)+this.offset},d.prototype.computeGW=function(){var a=this.G,b=this.bodyA,c=this.bodyB,d=b.velocity,e=c.velocity,f=b.angularVelocity,g=c.angularVelocity;return this.gmult(a,d,f,e,g)+this.relativeVelocity},d.prototype.computeGWlambda=function(){var a=this.G,b=this.bodyA,c=this.bodyB,d=b.vlambda,e=c.vlambda,f=b.wlambda,g=c.wlambda;return this.gmult(a,d,f,e,g)};var i=e.create(),j=e.create();d.prototype.computeGiMf=function(){var a=this.bodyA,b=this.bodyB,c=a.force,d=a.angularForce,f=b.force,g=b.angularForce,h=a.invMassSolve,k=b.invMassSolve,l=a.invInertiaSolve,m=b.invInertiaSolve,n=this.G;return e.scale(i,c,h),e.multiply(i,a.massMultiplier,i),e.scale(j,f,k),e.multiply(j,b.massMultiplier,j),this.gmult(n,i,d*l,j,g*m)},d.prototype.computeGiMGt=function(){var a=this.bodyA,b=this.bodyB,c=a.invMassSolve,d=b.invMassSolve,e=a.invInertiaSolve,f=b.invInertiaSolve,g=this.G;return g[0]*g[0]*c*a.massMultiplier[0]+g[1]*g[1]*c*a.massMultiplier[1]+g[2]*g[2]*e+g[3]*g[3]*d*b.massMultiplier[0]+g[4]*g[4]*d*b.massMultiplier[1]+g[5]*g[5]*f};var k=e.create(),l=e.create(),m=e.create();e.create(),e.create(),e.create();d.prototype.addToWlambda=function(a){var b=this.bodyA,c=this.bodyB,d=k,f=l,g=m,h=b.invMassSolve,i=c.invMassSolve,j=b.invInertiaSolve,n=c.invInertiaSolve,o=this.G;f[0]=o[0],f[1]=o[1],g[0]=o[3],g[1]=o[4],e.scale(d,f,h*a),e.multiply(d,d,b.massMultiplier),e.add(b.vlambda,b.vlambda,d),b.wlambda+=j*o[2]*a,e.scale(d,g,i*a),e.multiply(d,d,c.massMultiplier),e.add(c.vlambda,c.vlambda,d),c.wlambda+=n*o[5]*a},d.prototype.computeInvC=function(a){return 1/(this.computeGiMGt()+a)}},{"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],23:[function(a,b,c){function d(a,b,c){f.call(this,a,b,-c,c),this.contactPointA=e.create(),this.contactPointB=e.create(),this.t=e.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}var e=a("../math/vec2"),f=a("./Equation");a("../utils/Utils");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.setSlipForce=function(a){this.maxForce=a,this.minForce=-a},d.prototype.getSlipForce=function(){return this.maxForce},d.prototype.computeB=function(a,b,c){var d=(this.bodyA,this.bodyB,this.contactPointA),f=this.contactPointB,g=this.t,h=this.G;h[0]=-g[0],h[1]=-g[1],h[2]=-e.crossLength(d,g),h[3]=g[0],h[4]=g[1],h[5]=e.crossLength(f,g);var i=this.computeGW(),j=this.computeGiMf(),k=-i*b-c*j;return k}},{"../math/vec2":30,"../utils/Utils":57,"./Equation":22}],24:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=c.angle||0;var d=this.G;d[2]=1,d[5]=-1}var e=a("./Equation"),f=a("../math/vec2");b.exports=d,d.prototype=new e,d.prototype.constructor=d;var g=f.create(),h=f.create(),i=f.fromValues(1,0),j=f.fromValues(0,1);d.prototype.computeGq=function(){return f.rotate(g,i,this.bodyA.angle+this.angle),f.rotate(h,j,this.bodyB.angle),f.dot(g,h)}},{"../math/vec2":30,"./Equation":22}],25:[function(a,b,c){function d(a,b){e.call(this,a,b,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}var e=a("./Equation");a("../math/vec2");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeB=function(a,b,c){var d=this.G;d[2]=-1,d[5]=this.ratio;var e=this.computeGiMf(),f=this.computeGW(),g=-f*b-c*e;return g}},{"../math/vec2":30,"./Equation":22}],26:[function(a,b,c){var d=function(){};b.exports=d,d.prototype={constructor:d,on:function(a,b,c){b.context=c||this,void 0===this._listeners&&(this._listeners={});var d=this._listeners;return void 0===d[a]&&(d[a]=[]),-1===d[a].indexOf(b)&&d[a].push(b),this},has:function(a,b){if(void 0===this._listeners)return!1;var c=this._listeners;if(b){if(void 0!==c[a]&&-1!==c[a].indexOf(b))return!0}else if(void 0!==c[a])return!0;return!1},off:function(a,b){if(void 0===this._listeners)return this;var c=this._listeners,d=c[a].indexOf(b);return-1!==d&&c[a].splice(d,1),this},emit:function(a){if(void 0===this._listeners)return this;var b=this._listeners,c=b[a.type];if(void 0!==c){a.target=this;for(var d=0,e=c.length;e>d;d++){var f=c[d];f.call(f.context,a)}}return this}}},{}],27:[function(a,b,c){function d(a,b,c){if(c=c||{},!(a instanceof e&&b instanceof e))throw new Error("First two arguments must be Material instances.");this.id=d.idCounter++,this.materialA=a,this.materialB=b,this.friction="undefined"!=typeof c.friction?Number(c.friction):.3,this.restitution="undefined"!=typeof c.restitution?Number(c.restitution):0,this.stiffness="undefined"!=typeof c.stiffness?Number(c.stiffness):f.DEFAULT_STIFFNESS,this.relaxation="undefined"!=typeof c.relaxation?Number(c.relaxation):f.DEFAULT_RELAXATION,this.frictionStiffness="undefined"!=typeof c.frictionStiffness?Number(c.frictionStiffness):f.DEFAULT_STIFFNESS,this.frictionRelaxation="undefined"!=typeof c.frictionRelaxation?Number(c.frictionRelaxation):f.DEFAULT_RELAXATION,this.surfaceVelocity="undefined"!=typeof c.surfaceVelocity?Number(c.surfaceVelocity):0,this.contactSkinSize=.005}var e=a("./Material"),f=a("../equations/Equation");b.exports=d,d.idCounter=0},{"../equations/Equation":22,"./Material":28}],28:[function(a,b,c){function d(a){this.id=a||d.idCounter++}b.exports=d,d.idCounter=0},{}],29:[function(a,b,c){var d={};d.GetArea=function(a){if(a.length<6)return 0;for(var b=a.length-2,c=0,d=0;b>d;d+=2)c+=(a[d+2]-a[d])*(a[d+1]+a[d+3]);return c+=(a[0]-a[b])*(a[b+1]+a[1]),.5*-c},d.Triangulate=function(a){var b=a.length>>1;if(3>b)return[];for(var c=[],e=[],f=0;b>f;f++)e.push(f);for(var f=0,g=b;g>3;){var h=e[(f+0)%g],i=e[(f+1)%g],j=e[(f+2)%g],k=a[2*h],l=a[2*h+1],m=a[2*i],n=a[2*i+1],o=a[2*j],p=a[2*j+1],q=!1;if(d._convex(k,l,m,n,o,p)){q=!0;for(var r=0;g>r;r++){var s=e[r];if(s!=h&&s!=i&&s!=j&&d._PointInTriangle(a[2*s],a[2*s+1],k,l,m,n,o,p)){q=!1;break}}}if(q)c.push(h,i,j),e.splice((f+1)%g,1),g--,f=0;else if(f++>3*g)break}return c.push(e[0],e[1],e[2]),c},d._PointInTriangle=function(a,b,c,d,e,f,g,h){var i=g-c,j=h-d,k=e-c,l=f-d,m=a-c,n=b-d,o=i*i+j*j,p=i*k+j*l,q=i*m+j*n,r=k*k+l*l,s=k*m+l*n,t=1/(o*r-p*p),u=(r*q-p*s)*t,v=(o*s-p*q)*t;return u>=0&&v>=0&&1>u+v},d._convex=function(a,b,c,d,e,f){return(b-d)*(e-c)+(c-a)*(f-d)>=0},b.exports=d},{}],30:[function(a,b,c){var d=b.exports={},e=a("../utils/Utils");d.crossLength=function(a,b){return a[0]*b[1]-a[1]*b[0]},d.crossVZ=function(a,b,c){return d.rotate(a,b,-Math.PI/2),d.scale(a,a,c),a},d.crossZV=function(a,b,c){return d.rotate(a,c,Math.PI/2),d.scale(a,a,b),a},d.rotate=function(a,b,c){if(0!==c){var d=Math.cos(c),e=Math.sin(c),f=b[0],g=b[1];a[0]=d*f-e*g,a[1]=e*f+d*g}else a[0]=b[0],a[1]=b[1]},d.rotate90cw=function(a,b){var c=b[0],d=b[1];a[0]=d,a[1]=-c},d.toLocalFrame=function(a,b,c,e){d.copy(a,b),d.sub(a,a,c),d.rotate(a,a,-e)},d.toGlobalFrame=function(a,b,c,e){d.copy(a,b),d.rotate(a,a,e),d.add(a,a,c)},d.vectorToLocalFrame=function(a,b,c){d.rotate(a,b,-c)},d.vectorToGlobalFrame=function(a,b,c){d.rotate(a,b,c)},d.centroid=function(a,b,c,e){return d.add(a,b,c),d.add(a,a,e),d.scale(a,a,1/3),a},d.create=function(){var a=new e.ARRAY_TYPE(2);return a[0]=0,a[1]=0,a},d.clone=function(a){var b=new e.ARRAY_TYPE(2);return b[0]=a[0],b[1]=a[1],b},d.fromValues=function(a,b){var c=new e.ARRAY_TYPE(2);return c[0]=a,c[1]=b,c},d.copy=function(a,b){return a[0]=b[0],a[1]=b[1],a},d.set=function(a,b,c){return a[0]=b,a[1]=c,a},d.add=function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},d.subtract=function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},d.sub=d.subtract,d.multiply=function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},d.mul=d.multiply,d.divide=function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},d.div=d.divide,d.scale=function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},d.distance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},d.dist=d.distance,d.squaredDistance=function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},d.sqrDist=d.squaredDistance,d.length=function(a){var b=a[0],c=a[1];return Math.sqrt(b*b+c*c)},d.len=d.length,d.squaredLength=function(a){var b=a[0],c=a[1];return b*b+c*c},d.sqrLen=d.squaredLength,d.negate=function(a,b){return a[0]=-b[0],a[1]=-b[1],a},d.normalize=function(a,b){var c=b[0],d=b[1],e=c*c+d*d;return e>0&&(e=1/Math.sqrt(e),a[0]=b[0]*e,a[1]=b[1]*e),a},d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]},d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"},d.lerp=function(a,b,c,d){var e=b[0],f=b[1];return a[0]=e+d*(c[0]-e),a[1]=f+d*(c[1]-f),a},d.reflect=function(a,b,c){var d=b[0]*c[0]+b[1]*c[1];a[0]=b[0]-2*c[0]*d,a[1]=b[1]-2*c[1]*d},d.getLineSegmentsIntersection=function(a,b,c,e,f){var g=d.getLineSegmentsIntersectionFraction(b,c,e,f);return 0>g?!1:(a[0]=b[0]+g*(c[0]-b[0]),a[1]=b[1]+g*(c[1]-b[1]),!0)},d.getLineSegmentsIntersectionFraction=function(a,b,c,d){var e,f,g=b[0]-a[0],h=b[1]-a[1],i=d[0]-c[0],j=d[1]-c[1];return e=(-h*(a[0]-c[0])+g*(a[1]-c[1]))/(-i*h+g*j),f=(i*(a[1]-c[1])-j*(a[0]-c[0]))/(-i*h+g*j),e>=0&&1>=e&&f>=0&&1>=f?f:-1}},{"../utils/Utils":57}],31:[function(a,b,c){function d(a){a=a||{},k.call(this),this.id=a.id||++d._idCounter,this.world=null,this.shapes=[],this.mass=a.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!a.fixedRotation,this.fixedX=!!a.fixedX,this.fixedY=!!a.fixedY,this.massMultiplier=e.create(),this.position=e.fromValues(0,0),a.position&&e.copy(this.position,a.position),this.interpolatedPosition=e.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=e.fromValues(0,0),this.previousAngle=0,this.velocity=e.fromValues(0,0),a.velocity&&e.copy(this.velocity,a.velocity),this.vlambda=e.fromValues(0,0),this.wlambda=0,this.angle=a.angle||0,this.angularVelocity=a.angularVelocity||0,this.force=e.create(),a.force&&e.copy(this.force,a.force),this.angularForce=a.angularForce||0,this.damping="number"==typeof a.damping?a.damping:.1,this.angularDamping="number"==typeof a.angularDamping?a.angularDamping:.1,this.type=d.STATIC,"undefined"!=typeof a.type?this.type=a.type:a.mass?this.type=d.DYNAMIC:this.type=d.STATIC,this.boundingRadius=0,this.aabb=new j,this.aabbNeedsUpdate=!0,this.allowSleep=void 0!==a.allowSleep?a.allowSleep:!0,this.wantsToSleep=!1,this.sleepState=d.AWAKE,this.sleepSpeedLimit=void 0!==a.sleepSpeedLimit?a.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==a.sleepTimeLimit?a.sleepTimeLimit:1,this.gravityScale=void 0!==a.gravityScale?a.gravityScale:1,this.collisionResponse=void 0!==a.collisionResponse?a.collisionResponse:!0,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==a.ccdSpeedThreshold?a.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==a.ccdIterations?a.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var e=a("../math/vec2"),f=a("poly-decomp"),g=a("../shapes/Convex"),h=a("../collision/RaycastResult"),i=a("../collision/Ray"),j=a("../collision/AABB"),k=a("../events/EventEmitter");b.exports=d,d.prototype=new k,d.prototype.constructor=d,d._idCounter=0,d.prototype.updateSolveMassProperties=function(){this.sleepState===d.SLEEPING||this.type===d.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},d.prototype.setDensity=function(a){var b=this.getArea();this.mass=b*a,this.updateMassProperties()},d.prototype.getArea=function(){for(var a=0,b=0;b<this.shapes.length;b++)a+=this.shapes[b].area;return a},d.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var l=new j,m=e.create();d.prototype.updateAABB=function(){for(var a=this.shapes,b=a.length,c=m,d=this.angle,f=0;f!==b;f++){var g=a[f],h=g.angle+d;e.rotate(c,g.position,d),e.add(c,c,this.position),g.computeAABB(l,c,h),0===f?this.aabb.copy(l):this.aabb.extend(l)}this.aabbNeedsUpdate=!1},d.prototype.updateBoundingRadius=function(){for(var a=this.shapes,b=a.length,c=0,d=0;d!==b;d++){var f=a[d],g=e.length(f.position),h=f.boundingRadius;g+h>c&&(c=g+h)}this.boundingRadius=c},d.prototype.addShape=function(a,b,c){if(a.body)throw new Error("A shape can only be added to one body.");a.body=this,b?e.copy(a.position,b):e.set(a.position,0,0),a.angle=c||0,this.shapes.push(a),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},d.prototype.removeShape=function(a){var b=this.shapes.indexOf(a);return-1!==b?(this.shapes.splice(b,1),this.aabbNeedsUpdate=!0,a.body=null,!0):!1},d.prototype.updateMassProperties=function(){if(this.type===d.STATIC||this.type===d.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var a=this.shapes,b=a.length,c=this.mass/b,f=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var g=0;b>g;g++){var h=a[g],i=e.squaredLength(h.position),j=h.computeMomentOfInertia(c);f+=j+c*i}this.inertia=f,this.invInertia=f>0?1/f:0}this.invMass=1/this.mass,e.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}};e.create();d.prototype.applyForce=function(a,b){if(e.add(this.force,this.force,a),b){var c=e.crossLength(b,a);this.angularForce+=c}};var n=e.create(),o=e.create(),p=e.create();d.prototype.applyForceLocal=function(a,b){b=b||p;var c=n,d=o;this.vectorToWorldFrame(c,a),this.vectorToWorldFrame(d,b),this.applyForce(c,d)};var q=e.create();d.prototype.applyImpulse=function(a,b){if(this.type===d.DYNAMIC){var c=q;if(e.scale(c,a,this.invMass),e.multiply(c,this.massMultiplier,c),e.add(this.velocity,c,this.velocity),b){var f=e.crossLength(b,a);f*=this.invInertia,this.angularVelocity+=f}}};var r=e.create(),s=e.create(),t=e.create();d.prototype.applyImpulseLocal=function(a,b){b=b||t;var c=r,d=s;this.vectorToWorldFrame(c,a),this.vectorToWorldFrame(d,b),this.applyImpulse(c,d)},d.prototype.toLocalFrame=function(a,b){e.toLocalFrame(a,b,this.position,this.angle)},d.prototype.toWorldFrame=function(a,b){e.toGlobalFrame(a,b,this.position,this.angle)},d.prototype.vectorToLocalFrame=function(a,b){e.vectorToLocalFrame(a,b,this.angle)},d.prototype.vectorToWorldFrame=function(a,b){e.vectorToGlobalFrame(a,b,this.angle)},d.prototype.fromPolygon=function(a,b){b=b||{};for(var c=!1,d=this.shapes.length;d>=0;--d)this.removeShape(this.shapes[d]);var h=new f.Polygon;if(h.vertices=a,h.makeCCW(),"number"==typeof b.removeCollinearPoints&&h.removeCollinearPoints(b.removeCollinearPoints),"undefined"==typeof b.skipSimpleCheck&&!h.isSimple())return!1;this.concavePath=h.vertices.slice(0);for(var d=0;d<this.concavePath.length;d++){var i=[0,0];e.copy(i,this.concavePath[d]),this.concavePath[d]=i}var j;j=b.optimalDecomp?h.decomp():h.quickDecomp();for(var k=e.create(),d=0;d!==j.length;d++){for(var l=new g({vertices:j[d].vertices}),m=0;m!==l.vertices.length;m++){var i=l.vertices[m];e.sub(i,i,l.centerOfMass)}e.scale(k,l.centerOfMass,1),l.updateTriangles(),l.updateCenterOfMass(),l.updateBoundingRadius(),this.addShape(l,k)}return"boolean"==typeof b.skipAdjustCenterOfMass&&(c=b.skipAdjustCenterOfMass),0==c&&this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0,!0};var u=(e.fromValues(0,0),e.fromValues(0,0)),v=e.fromValues(0,0),w=e.fromValues(0,0);d.prototype.adjustCenterOfMass=function(){var a=u,b=v,c=w,d=0;e.set(b,0,0);for(var f=0;f!==this.shapes.length;f++){var g=this.shapes[f];e.scale(a,g.position,g.area),e.add(b,b,a),d+=g.area}e.scale(c,b,1/d);for(var f=0;f!==this.shapes.length;f++){var g=this.shapes[f];e.sub(g.position,g.position,c)}e.add(this.position,this.position,c);for(var f=0;this.concavePath&&f<this.concavePath.length;f++)e.sub(this.concavePath[f],this.concavePath[f],c);this.updateMassProperties(),this.updateBoundingRadius()},d.prototype.setZeroForce=function(){e.set(this.force,0,0),this.angularForce=0},d.prototype.resetConstraintVelocity=function(){var a=this,b=a.vlambda;e.set(b,0,0),a.wlambda=0},d.prototype.addConstraintVelocity=function(){var a=this,b=a.velocity;e.add(b,b,a.vlambda),a.angularVelocity+=a.wlambda},d.prototype.applyDamping=function(a){if(this.type===d.DYNAMIC){var b=this.velocity;e.scale(b,b,Math.pow(1-this.damping,a)),this.angularVelocity*=Math.pow(1-this.angularDamping,a)}},d.prototype.wakeUp=function(){var a=this.sleepState;this.sleepState=d.AWAKE,this.idleTime=0,a!==d.AWAKE&&this.emit(d.wakeUpEvent)},d.prototype.sleep=function(){this.sleepState=d.SLEEPING,this.angularVelocity=0,this.angularForce=0,e.set(this.velocity,0,0),e.set(this.force,0,0),this.emit(d.sleepEvent)},d.prototype.sleepTick=function(a,b,c){if(this.allowSleep&&this.type!==d.SLEEPING){this.wantsToSleep=!1;var f=(this.sleepState,e.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)),g=Math.pow(this.sleepSpeedLimit,2);f>=g?(this.idleTime=0,this.sleepState=d.AWAKE):(this.idleTime+=c,this.sleepState=d.SLEEPY),this.idleTime>this.sleepTimeLimit&&(b?this.wantsToSleep=!0:this.sleep())}},d.prototype.overlaps=function(a){return this.world.overlapKeeper.bodiesAreOverlapping(this,a)};var x=e.create(),y=e.create();d.prototype.integrate=function(a){var b=this.invMass,c=this.force,d=this.position,f=this.velocity;e.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*a),e.scale(x,c,a*b),e.multiply(x,this.massMultiplier,x),e.add(f,x,f),this.integrateToTimeOfImpact(a)||(e.scale(y,f,a),e.add(d,d,y),this.fixedRotation||(this.angle+=this.angularVelocity*a)),this.aabbNeedsUpdate=!0};var z=new h,A=new i({mode:i.ALL}),B=e.create(),C=e.create(),D=e.create(),E=e.create();d.prototype.integrateToTimeOfImpact=function(a){if(this.ccdSpeedThreshold<0||e.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;e.normalize(B,this.velocity),e.scale(C,this.velocity,a),e.add(C,C,this.position),e.sub(D,C,this.position);var b,c=this.angularVelocity*a,d=e.length(D),f=1,g=this;if(z.reset(),A.callback=function(a){a.body!==g&&(b=a.body,a.getHitPoint(C,A),e.sub(D,C,g.position),f=e.length(D)/d,a.stop())},e.copy(A.from,this.position),e.copy(A.to,C),A.update(),this.world.raycast(z,A),!b)return!1;var h=this.angle;e.copy(E,this.position);for(var i=0,j=0,k=0,l=f;l>=j&&i<this.ccdIterations;){i++,k=(l-j)/2,e.scale(y,D,f),e.add(this.position,E,y),this.angle=h+c*f,this.updateAABB();var m=this.aabb.overlaps(b.aabb)&&this.world.narrowphase.bodiesOverlap(this,b);m?j=k:l=k}return f=k,e.copy(this.position,E),this.angle=h,e.scale(y,D,f),e.add(this.position,this.position,y),this.fixedRotation||(this.angle+=c*f),!0},d.prototype.getVelocityAtPoint=function(a,b){return e.crossVZ(a,b,this.angularVelocity),e.subtract(a,this.velocity,a),a},d.sleepyEvent={type:"sleepy"},d.sleepEvent={type:"sleep"},d.wakeUpEvent={type:"wakeup"},d.DYNAMIC=1,d.STATIC=2,d.KINEMATIC=4,d.AWAKE=0,d.SLEEPY=1,d.SLEEPING=2},{"../collision/AABB":7,"../collision/Ray":11,"../collision/RaycastResult":12,"../events/EventEmitter":26,"../math/vec2":30,"../shapes/Convex":40,"poly-decomp":5}],32:[function(a,b,c){function d(a,b,c){c=c||{},f.call(this,a,b,c),this.localAnchorA=e.fromValues(0,0),this.localAnchorB=e.fromValues(0,0),c.localAnchorA&&e.copy(this.localAnchorA,c.localAnchorA),c.localAnchorB&&e.copy(this.localAnchorB,c.localAnchorB),c.worldAnchorA&&this.setWorldAnchorA(c.worldAnchorA),c.worldAnchorB&&this.setWorldAnchorB(c.worldAnchorB);var d=e.create(),g=e.create();this.getWorldAnchorA(d),this.getWorldAnchorB(g);var h=e.distance(d,g);this.restLength="number"==typeof c.restLength?c.restLength:h}var e=a("../math/vec2"),f=a("./Spring");a("../utils/Utils");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.setWorldAnchorA=function(a){this.bodyA.toLocalFrame(this.localAnchorA,a)},d.prototype.setWorldAnchorB=function(a){this.bodyB.toLocalFrame(this.localAnchorB,a)},d.prototype.getWorldAnchorA=function(a){this.bodyA.toWorldFrame(a,this.localAnchorA)},d.prototype.getWorldAnchorB=function(a){this.bodyB.toWorldFrame(a,this.localAnchorB)};var g=e.create(),h=e.create(),i=e.create(),j=e.create(),k=e.create(),l=e.create(),m=e.create(),n=e.create(),o=e.create();d.prototype.applyForce=function(){var a=this.stiffness,b=this.damping,c=this.restLength,d=this.bodyA,f=this.bodyB,p=g,q=h,r=i,s=j,t=o,u=k,v=l,w=m,x=n;this.getWorldAnchorA(u),this.getWorldAnchorB(v),e.sub(w,u,d.position),e.sub(x,v,f.position),e.sub(p,v,u);var y=e.len(p);e.normalize(q,p),e.sub(r,f.velocity,d.velocity),e.crossZV(t,f.angularVelocity,x),e.add(r,r,t),e.crossZV(t,d.angularVelocity,w),e.sub(r,r,t),e.scale(s,q,-a*(y-c)-b*e.dot(r,q)),e.sub(d.force,d.force,s),e.add(f.force,f.force,s);var z=e.crossLength(w,s),A=e.crossLength(x,s);d.angularForce-=z,f.angularForce+=A}},{"../math/vec2":30,"../utils/Utils":57,"./Spring":34}],33:[function(a,b,c){function d(a,b,c){c=c||{},e.call(this,a,b,c),this.restAngle="number"==typeof c.restAngle?c.restAngle:b.angle-a.angle}var e=(a("../math/vec2"),a("./Spring"));b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.applyForce=function(){var a=this.stiffness,b=this.damping,c=this.restAngle,d=this.bodyA,e=this.bodyB,f=e.angle-d.angle,g=e.angularVelocity-d.angularVelocity,h=-a*(f-c)-b*g*0;d.angularForce-=h,e.angularForce+=h}},{"../math/vec2":30,"./Spring":34}],34:[function(a,b,c){function d(a,b,c){c=e.defaults(c,{stiffness:100,damping:1}),this.stiffness=c.stiffness,this.damping=c.damping,this.bodyA=a,this.bodyB=b}var e=(a("../math/vec2"),a("../utils/Utils"));b.exports=d,d.prototype.applyForce=function(){}},{"../math/vec2":30,"../utils/Utils":57}],35:[function(a,b,c){function d(a,b){b=b||{},this.chassisBody=a,this.wheels=[],this.groundBody=new i({mass:0}),this.world=null;var c=this;this.preStepCallback=function(){c.update()}}function e(a,b){b=b||{},this.vehicle=a,this.forwardEquation=new h(a.chassisBody,a.groundBody),this.sideEquation=new h(a.chassisBody,a.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==b.sideFriction?b.sideFriction:5),this.localForwardVector=f.fromValues(0,1),b.localForwardVector&&f.copy(this.localForwardVector,b.localForwardVector),this.localPosition=f.fromValues(0,0),b.localPosition&&f.copy(this.localPosition,b.localPosition),g.apply(this,a.chassisBody,a.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}var f=a("../math/vec2"),g=(a("../utils/Utils"),a("../constraints/Constraint")),h=a("../equations/FrictionEquation"),i=a("../objects/Body");b.exports=d,d.prototype.addToWorld=function(a){this.world=a,a.addBody(this.groundBody),a.on("preStep",this.preStepCallback);for(var b=0;b<this.wheels.length;b++){var c=this.wheels[b];a.addConstraint(c)}},d.prototype.removeFromWorld=function(){var a=this.world;a.removeBody(this.groundBody),a.off("preStep",this.preStepCallback);for(var b=0;b<this.wheels.length;b++){var c=this.wheels[b];a.removeConstraint(c)}this.world=null},d.prototype.addWheel=function(a){var b=new e(this,a);return this.wheels.push(b),b},d.prototype.update=function(){for(var a=0;a<this.wheels.length;a++)this.wheels[a].update()},e.prototype=new g,e.prototype.setBrakeForce=function(a){this.forwardEquation.setSlipForce(a)},e.prototype.setSideFriction=function(a){this.sideEquation.setSlipForce(a)};var j=f.create(),k=f.create();e.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(k,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(j,k),f.dot(j,k)};var l=f.create();e.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),f.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),f.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),f.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),f.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),f.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),f.normalize(l,this.forwardEquation.t),f.scale(l,l,this.engineForce),this.vehicle.chassisBody.applyForce(l,this.forwardEquation.contactPointA)}},{"../constraints/Constraint":14,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],36:[function(a,b,c){var d=b.exports={AABB:a("./collision/AABB"),AngleLockEquation:a("./equations/AngleLockEquation"),Body:a("./objects/Body"),Broadphase:a("./collision/Broadphase"),Capsule:a("./shapes/Capsule"),Circle:a("./shapes/Circle"),Constraint:a("./constraints/Constraint"),ContactEquation:a("./equations/ContactEquation"),
ContactEquationPool:a("./utils/ContactEquationPool"),ContactMaterial:a("./material/ContactMaterial"),Convex:a("./shapes/Convex"),DistanceConstraint:a("./constraints/DistanceConstraint"),Equation:a("./equations/Equation"),EventEmitter:a("./events/EventEmitter"),FrictionEquation:a("./equations/FrictionEquation"),FrictionEquationPool:a("./utils/FrictionEquationPool"),GearConstraint:a("./constraints/GearConstraint"),GSSolver:a("./solver/GSSolver"),Heightfield:a("./shapes/Heightfield"),Line:a("./shapes/Line"),LockConstraint:a("./constraints/LockConstraint"),Material:a("./material/Material"),Narrowphase:a("./collision/Narrowphase"),NaiveBroadphase:a("./collision/NaiveBroadphase"),Particle:a("./shapes/Particle"),Plane:a("./shapes/Plane"),Pool:a("./utils/Pool"),RevoluteConstraint:a("./constraints/RevoluteConstraint"),PrismaticConstraint:a("./constraints/PrismaticConstraint"),Ray:a("./collision/Ray"),RaycastResult:a("./collision/RaycastResult"),Box:a("./shapes/Box"),RotationalVelocityEquation:a("./equations/RotationalVelocityEquation"),SAPBroadphase:a("./collision/SAPBroadphase"),Shape:a("./shapes/Shape"),Solver:a("./solver/Solver"),Spring:a("./objects/Spring"),TopDownVehicle:a("./objects/TopDownVehicle"),LinearSpring:a("./objects/LinearSpring"),RotationalSpring:a("./objects/RotationalSpring"),Utils:a("./utils/Utils"),World:a("./world/World"),vec2:a("./math/vec2"),version:a("../package.json").version};Object.defineProperty(d,"Rectangle",{get:function(){return console.warn("The Rectangle class has been renamed to Box."),this.Box}})},{"../package.json":6,"./collision/AABB":7,"./collision/Broadphase":8,"./collision/NaiveBroadphase":9,"./collision/Narrowphase":10,"./collision/Ray":11,"./collision/RaycastResult":12,"./collision/SAPBroadphase":13,"./constraints/Constraint":14,"./constraints/DistanceConstraint":15,"./constraints/GearConstraint":16,"./constraints/LockConstraint":17,"./constraints/PrismaticConstraint":18,"./constraints/RevoluteConstraint":19,"./equations/AngleLockEquation":20,"./equations/ContactEquation":21,"./equations/Equation":22,"./equations/FrictionEquation":23,"./equations/RotationalVelocityEquation":25,"./events/EventEmitter":26,"./material/ContactMaterial":27,"./material/Material":28,"./math/vec2":30,"./objects/Body":31,"./objects/LinearSpring":32,"./objects/RotationalSpring":33,"./objects/Spring":34,"./objects/TopDownVehicle":35,"./shapes/Box":37,"./shapes/Capsule":38,"./shapes/Circle":39,"./shapes/Convex":40,"./shapes/Heightfield":41,"./shapes/Line":42,"./shapes/Particle":43,"./shapes/Plane":44,"./shapes/Shape":45,"./solver/GSSolver":46,"./solver/Solver":47,"./utils/ContactEquationPool":48,"./utils/FrictionEquationPool":49,"./utils/Pool":55,"./utils/Utils":57,"./world/World":61}],37:[function(a,b,c){function d(a){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(a={width:arguments[0],height:arguments[1]},console.warn("The Rectangle has been renamed to Box and its constructor signature has changed. Please use the following format: new Box({ width: 1, height: 1, ... })")),a=a||{};var b=this.width=a.width||1,c=this.height=a.height||1,d=[e.fromValues(-b/2,-c/2),e.fromValues(b/2,-c/2),e.fromValues(b/2,c/2),e.fromValues(-b/2,c/2)],h=[e.fromValues(1,0),e.fromValues(0,1)];a.vertices=d,a.axes=h,a.type=f.BOX,g.call(this,a)}var e=a("../math/vec2"),f=a("./Shape"),g=a("./Convex");b.exports=d,d.prototype=new g,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){var b=this.width,c=this.height;return a*(c*c+b*b)/12},d.prototype.updateBoundingRadius=function(){var a=this.width,b=this.height;this.boundingRadius=Math.sqrt(a*a+b*b)/2};e.create(),e.create(),e.create(),e.create();d.prototype.computeAABB=function(a,b,c){a.setFromPoints(this.vertices,b,c,0)},d.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":30,"./Convex":40,"./Shape":45}],38:[function(a,b,c){function d(a){"number"==typeof arguments[0]&&"number"==typeof arguments[1]&&(a={length:arguments[0],radius:arguments[1]},console.warn("The Capsule constructor signature has changed. Please use the following format: new Capsule({ radius: 1, length: 1 })")),a=a||{},this.length=a.length||1,this.radius=a.radius||1,a.type=e.CAPSULE,e.call(this,a)}var e=a("./Shape"),f=a("../math/vec2");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){var b=this.radius,c=this.length+b,d=2*b;return a*(d*d+c*c)/12},d.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},d.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var g=f.create();d.prototype.computeAABB=function(a,b,c){var d=this.radius;f.set(g,this.length/2,0),0!==c&&f.rotate(g,g,c),f.set(a.upperBound,Math.max(g[0]+d,-g[0]+d),Math.max(g[1]+d,-g[1]+d)),f.set(a.lowerBound,Math.min(g[0]-d,-g[0]-d),Math.min(g[1]-d,-g[1]-d)),f.add(a.lowerBound,a.lowerBound,b),f.add(a.upperBound,a.upperBound,b)};var h=f.create(),i=f.create(),j=f.create(),k=f.create(),l=f.fromValues(0,1);d.prototype.raycast=function(a,b,c,d){for(var e=b.from,g=b.to,m=(b.direction,h),n=i,o=j,p=k,q=this.length/2,r=0;2>r;r++){var s=this.radius*(2*r-1);f.set(o,-q,s),f.set(p,q,s),f.toGlobalFrame(o,o,c,d),f.toGlobalFrame(p,p,c,d);var t=f.getLineSegmentsIntersectionFraction(e,g,o,p);if(t>=0&&(f.rotate(n,l,d),f.scale(n,n,2*r-1),b.reportIntersection(a,t,n,-1),a.shouldStop(b)))return}for(var u=Math.pow(this.radius,2)+Math.pow(q,2),r=0;2>r;r++){f.set(o,q*(2*r-1),0),f.toGlobalFrame(o,o,c,d);var v=Math.pow(g[0]-e[0],2)+Math.pow(g[1]-e[1],2),w=2*((g[0]-e[0])*(e[0]-o[0])+(g[1]-e[1])*(e[1]-o[1])),x=Math.pow(e[0]-o[0],2)+Math.pow(e[1]-o[1],2)-Math.pow(this.radius,2),t=Math.pow(w,2)-4*v*x;if(!(0>t))if(0===t){if(f.lerp(m,e,g,t),f.squaredDistance(m,c)>u&&(f.sub(n,m,o),f.normalize(n,n),b.reportIntersection(a,t,n,-1),a.shouldStop(b)))return}else{var y=Math.sqrt(t),z=1/(2*v),A=(-w-y)*z,B=(-w+y)*z;if(A>=0&&1>=A&&(f.lerp(m,e,g,A),f.squaredDistance(m,c)>u&&(f.sub(n,m,o),f.normalize(n,n),b.reportIntersection(a,A,n,-1),a.shouldStop(b))))return;if(B>=0&&1>=B&&(f.lerp(m,e,g,B),f.squaredDistance(m,c)>u&&(f.sub(n,m,o),f.normalize(n,n),b.reportIntersection(a,B,n,-1),a.shouldStop(b))))return}}}},{"../math/vec2":30,"./Shape":45}],39:[function(a,b,c){function d(a){"number"==typeof arguments[0]&&(a={radius:arguments[0]},console.warn("The Circle constructor signature has changed. Please use the following format: new Circle({ radius: 1 })")),a=a||{},this.radius=a.radius||1,a.type=e.CIRCLE,e.call(this,a)}var e=a("./Shape"),f=a("../math/vec2");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){var b=this.radius;return a*b*b/2},d.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},d.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},d.prototype.computeAABB=function(a,b,c){var d=this.radius;f.set(a.upperBound,d,d),f.set(a.lowerBound,-d,-d),b&&(f.add(a.lowerBound,a.lowerBound,b),f.add(a.upperBound,a.upperBound,b))};var g=f.create(),h=f.create();d.prototype.raycast=function(a,b,c,d){var e=b.from,i=b.to,j=this.radius,k=Math.pow(i[0]-e[0],2)+Math.pow(i[1]-e[1],2),l=2*((i[0]-e[0])*(e[0]-c[0])+(i[1]-e[1])*(e[1]-c[1])),m=Math.pow(e[0]-c[0],2)+Math.pow(e[1]-c[1],2)-Math.pow(j,2),n=Math.pow(l,2)-4*k*m,o=g,p=h;if(!(0>n))if(0===n)f.lerp(o,e,i,n),f.sub(p,o,c),f.normalize(p,p),b.reportIntersection(a,n,p,-1);else{var q=Math.sqrt(n),r=1/(2*k),s=(-l-q)*r,t=(-l+q)*r;if(s>=0&&1>=s&&(f.lerp(o,e,i,s),f.sub(p,o,c),f.normalize(p,p),b.reportIntersection(a,s,p,-1),a.shouldStop(b)))return;t>=0&&1>=t&&(f.lerp(o,e,i,t),f.sub(p,o,c),f.normalize(p,p),b.reportIntersection(a,t,p,-1))}}},{"../math/vec2":30,"./Shape":45}],40:[function(a,b,c){function d(a){Array.isArray(arguments[0])&&(a={vertices:arguments[0],axes:arguments[1]},console.warn("The Convex constructor signature has changed. Please use the following format: new Convex({ vertices: [...], ... })")),a=a||{},this.vertices=[];for(var b=void 0!==a.vertices?a.vertices:[],c=0;c<b.length;c++){var d=f.create();f.copy(d,b[c]),this.vertices.push(d)}if(this.axes=[],a.axes)for(var c=0;c<a.axes.length;c++){var g=f.create();f.copy(g,a.axes[c]),this.axes.push(g)}else for(var c=0;c<this.vertices.length;c++){var h=this.vertices[c],i=this.vertices[(c+1)%this.vertices.length],j=f.create();f.sub(j,i,h),f.rotate90cw(j,j),f.normalize(j,j),this.axes.push(j)}if(this.centerOfMass=f.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,a.type=e.CONVEX,e.call(this,a),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}var e=a("./Shape"),f=a("../math/vec2"),g=a("../math/polyk");a("poly-decomp");b.exports=d,d.prototype=new e,d.prototype.constructor=d;var h=f.create(),i=f.create();d.prototype.projectOntoLocalAxis=function(a,b){for(var c,d,e=null,g=null,a=h,i=0;i<this.vertices.length;i++)c=this.vertices[i],d=f.dot(c,a),(null===e||d>e)&&(e=d),(null===g||g>d)&&(g=d);if(g>e){var j=g;g=e,e=j}f.set(b,g,e)},d.prototype.projectOntoWorldAxis=function(a,b,c,d){var e=i;this.projectOntoLocalAxis(a,d),0!==c?f.rotate(e,a,c):e=a;var g=f.dot(b,e);f.set(d,d[0]+g,d[1]+g)},d.prototype.updateTriangles=function(){this.triangles.length=0;for(var a=[],b=0;b<this.vertices.length;b++){var c=this.vertices[b];a.push(c[0],c[1])}for(var d=g.Triangulate(a),b=0;b<d.length;b+=3){var e=d[b],f=d[b+1],h=d[b+2];this.triangles.push([e,f,h])}};var j=f.create(),k=f.create(),l=f.create(),m=f.create(),n=f.create();f.create(),f.create(),f.create(),f.create();d.prototype.updateCenterOfMass=function(){var a=this.triangles,b=this.vertices,c=this.centerOfMass,e=j,g=l,h=m,i=n,o=k;f.set(c,0,0);for(var p=0,q=0;q!==a.length;q++){var r=a[q],g=b[r[0]],h=b[r[1]],i=b[r[2]];f.centroid(e,g,h,i);var s=d.triangleArea(g,h,i);p+=s,f.scale(o,e,s),f.add(c,c,o)}f.scale(c,c,1/p)},d.prototype.computeMomentOfInertia=function(a){for(var b=0,c=0,d=this.vertices.length,e=d-1,g=0;d>g;e=g,g++){var h=this.vertices[e],i=this.vertices[g],j=Math.abs(f.crossLength(h,i)),k=f.dot(i,i)+f.dot(i,h)+f.dot(h,h);b+=j*k,c+=j}return a/6*(b/c)},d.prototype.updateBoundingRadius=function(){for(var a=this.vertices,b=0,c=0;c!==a.length;c++){var d=f.squaredLength(a[c]);d>b&&(b=d)}this.boundingRadius=Math.sqrt(b)},d.triangleArea=function(a,b,c){return.5*((b[0]-a[0])*(c[1]-a[1])-(c[0]-a[0])*(b[1]-a[1]))},d.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var a=this.triangles,b=this.vertices,c=0;c!==a.length;c++){var e=a[c],f=b[e[0]],g=b[e[1]],h=b[e[2]],i=d.triangleArea(f,g,h);this.area+=i}},d.prototype.computeAABB=function(a,b,c){a.setFromPoints(this.vertices,b,c,0)};var o=f.create(),p=f.create(),q=f.create();d.prototype.raycast=function(a,b,c,d){var e=o,g=p,h=q,i=this.vertices;f.toLocalFrame(e,b.from,c,d),f.toLocalFrame(g,b.to,c,d);for(var j=i.length,k=0;j>k&&!a.shouldStop(b);k++){var l=i[k],m=i[(k+1)%j],n=f.getLineSegmentsIntersectionFraction(e,g,l,m);n>=0&&(f.sub(h,m,l),f.rotate(h,h,-Math.PI/2+d),f.normalize(h,h),b.reportIntersection(a,n,h,k))}}},{"../math/polyk":29,"../math/vec2":30,"./Shape":45,"poly-decomp":5}],41:[function(a,b,c){function d(a){if(Array.isArray(arguments[0])){if(a={heights:arguments[0]},"object"==typeof arguments[1])for(var b in arguments[1])a[b]=arguments[1][b];console.warn("The Heightfield constructor signature has changed. Please use the following format: new Heightfield({ heights: [...], ... })")}a=a||{},this.heights=a.heights?a.heights.slice(0):[],this.maxValue=a.maxValue||null,this.minValue=a.minValue||null,this.elementWidth=a.elementWidth||.1,void 0!==a.maxValue&&void 0!==a.minValue||this.updateMaxMinValues(),a.type=e.HEIGHTFIELD,e.call(this,a)}var e=a("./Shape"),f=a("../math/vec2");a("../utils/Utils");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.updateMaxMinValues=function(){for(var a=this.heights,b=a[0],c=a[0],d=0;d!==a.length;d++){var e=a[d];e>b&&(b=e),c>e&&(c=e)}this.maxValue=b,this.minValue=c},d.prototype.computeMomentOfInertia=function(a){return Number.MAX_VALUE},d.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},d.prototype.updateArea=function(){for(var a=this.heights,b=0,c=0;c<a.length-1;c++)b+=(a[c]+a[c+1])/2*this.elementWidth;this.area=b};var g=[f.create(),f.create(),f.create(),f.create()];d.prototype.computeAABB=function(a,b,c){f.set(g[0],0,this.maxValue),f.set(g[1],this.elementWidth*this.heights.length,this.maxValue),f.set(g[2],this.elementWidth*this.heights.length,this.minValue),f.set(g[3],0,this.minValue),a.setFromPoints(g,b,c)},d.prototype.getLineSegment=function(a,b,c){var d=this.heights,e=this.elementWidth;f.set(a,c*e,d[c]),f.set(b,(c+1)*e,d[c+1])},d.prototype.getSegmentIndex=function(a){return Math.floor(a[0]/this.elementWidth)},d.prototype.getClampedSegmentIndex=function(a){var b=this.getSegmentIndex(a);return b=Math.min(this.heights.length,Math.max(b,0))};var h=(f.create(),f.create()),i=f.create(),j=f.create(),k=f.create(),l=f.create();f.fromValues(0,1);d.prototype.raycast=function(a,b,c,d){var e=b.from,g=b.to,m=(b.direction,h),n=i,o=j,p=k,q=l;f.toLocalFrame(p,e,c,d),f.toLocalFrame(q,g,c,d);var r=this.getClampedSegmentIndex(p),s=this.getClampedSegmentIndex(q);if(r>s){var t=r;r=s,s=t}for(var u=0;u<this.heights.length-1;u++){this.getLineSegment(n,o,u);var v=f.getLineSegmentsIntersectionFraction(p,q,n,o);if(v>=0&&(f.sub(m,o,n),f.rotate(m,m,d+Math.PI/2),f.normalize(m,m),b.reportIntersection(a,v,m,-1),a.shouldStop(b)))return}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],42:[function(a,b,c){function d(a){"number"==typeof arguments[0]&&(a={length:arguments[0]},console.warn("The Line constructor signature has changed. Please use the following format: new Line({ length: 1, ... })")),a=a||{},this.length=a.length||1,a.type=e.LINE,e.call(this,a)}var e=a("./Shape"),f=a("../math/vec2");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){return a*Math.pow(this.length,2)/12},d.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var g=[f.create(),f.create()];d.prototype.computeAABB=function(a,b,c){var d=this.length/2;f.set(g[0],-d,0),f.set(g[1],d,0),a.setFromPoints(g,b,c,0)};var h=(f.create(),f.create()),i=f.create(),j=f.create(),k=f.fromValues(0,1);d.prototype.raycast=function(a,b,c,d){var e=b.from,g=b.to,l=i,m=j,n=this.length/2;f.set(l,-n,0),f.set(m,n,0),f.toGlobalFrame(l,l,c,d),f.toGlobalFrame(m,m,c,d);var o=f.getLineSegmentsIntersectionFraction(l,m,e,g);if(o>=0){var p=h;f.rotate(p,k,d),b.reportIntersection(a,o,p,-1)}}},{"../math/vec2":30,"./Shape":45}],43:[function(a,b,c){function d(a){a=a||{},a.type=e.PARTICLE,e.call(this,a)}var e=a("./Shape"),f=a("../math/vec2");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){return 0},d.prototype.updateBoundingRadius=function(){this.boundingRadius=0},d.prototype.computeAABB=function(a,b,c){f.copy(a.lowerBound,b),f.copy(a.upperBound,b)}},{"../math/vec2":30,"./Shape":45}],44:[function(a,b,c){function d(a){a=a||{},a.type=e.PLANE,e.call(this,a)}var e=a("./Shape"),f=a("../math/vec2");a("../utils/Utils");b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.computeMomentOfInertia=function(a){return 0},d.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},d.prototype.computeAABB=function(a,b,c){var d=c%(2*Math.PI),e=f.set,g=Number.MAX_VALUE,h=a.lowerBound,i=a.upperBound;0===d?(e(h,-g,-g),e(i,g,0)):d===Math.PI/2?(e(h,0,-g),e(i,g,g)):d===Math.PI?(e(h,-g,0),e(i,g,g)):d===3*Math.PI/2?(e(h,-g,-g),e(i,0,g)):(e(h,-g,-g),e(i,g,g)),f.add(h,h,b),f.add(i,i,b)},d.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var g=f.create(),h=(f.create(),f.create(),f.create()),i=f.create();d.prototype.raycast=function(a,b,c,d){var e=b.from,j=b.to,k=b.direction,l=g,m=h,n=i;f.set(m,0,1),f.rotate(m,m,d),f.sub(n,e,c);var o=f.dot(n,m);f.sub(n,j,c);var p=f.dot(n,m);if(!(o*p>0||f.squaredDistance(e,j)<o*o)){var q=f.dot(m,k);f.sub(l,e,c);var r=-f.dot(m,l)/q/b.length;b.reportIntersection(a,r,m,-1)}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],45:[function(a,b,c){function d(a){a=a||{},this.body=null,this.position=e.fromValues(0,0),a.position&&e.copy(this.position,a.position),this.angle=a.angle||0,this.type=a.type||0,this.id=d.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==a.collisionGroup?a.collisionGroup:1,this.collisionResponse=void 0!==a.collisionResponse?a.collisionResponse:!0,this.collisionMask=void 0!==a.collisionMask?a.collisionMask:1,this.material=a.material||null,this.area=0,this.sensor=void 0!==a.sensor?a.sensor:!1,this.type&&this.updateBoundingRadius(),this.updateArea()}b.exports=d;var e=a("../math/vec2");d.idCounter=0,d.CIRCLE=1,d.PARTICLE=2,d.PLANE=4,d.CONVEX=8,d.LINE=16,d.BOX=32,Object.defineProperty(d,"RECTANGLE",{get:function(){return console.warn("Shape.RECTANGLE is deprecated, use Shape.BOX instead."),d.BOX}}),d.CAPSULE=64,d.HEIGHTFIELD=128,d.prototype.computeMomentOfInertia=function(a){},d.prototype.updateBoundingRadius=function(){},d.prototype.updateArea=function(){},d.prototype.computeAABB=function(a,b,c){},d.prototype.raycast=function(a,b,c,d){}},{"../math/vec2":30}],46:[function(a,b,c){function d(a){g.call(this,a,g.GS),a=a||{},this.iterations=a.iterations||10,this.tolerance=a.tolerance||1e-7,this.arrayStep=30,this.lambda=new h.ARRAY_TYPE(this.arrayStep),this.Bs=new h.ARRAY_TYPE(this.arrayStep),this.invCs=new h.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=0,this.usedIterations=0}function e(a){for(var b=a.length;b--;)a[b]=0}var f=a("../math/vec2"),g=a("./Solver"),h=a("../utils/Utils"),i=a("../equations/FrictionEquation");b.exports=d,d.prototype=new g,d.prototype.constructor=d,d.prototype.solve=function(a,b){this.sortEquations();var c=0,g=this.iterations,j=this.frictionIterations,k=this.equations,l=k.length,m=Math.pow(this.tolerance*l,2),n=b.bodies,o=b.bodies.length,p=(f.add,f.set,this.useZeroRHS),q=this.lambda;if(this.usedIterations=0,l)for(var r=0;r!==o;r++){var s=n[r];s.updateSolveMassProperties()}q.length<l&&(q=this.lambda=new h.ARRAY_TYPE(l+this.arrayStep),this.Bs=new h.ARRAY_TYPE(l+this.arrayStep),this.invCs=new h.ARRAY_TYPE(l+this.arrayStep)),e(q);for(var t=this.invCs,u=this.Bs,q=this.lambda,r=0;r!==k.length;r++){var v=k[r];(v.timeStep!==a||v.needsUpdate)&&(v.timeStep=a,v.update()),u[r]=v.computeB(v.a,v.b,a),t[r]=v.computeInvC(v.epsilon)}var v,w,r,x;if(0!==l){for(r=0;r!==o;r++){var s=n[r];s.resetConstraintVelocity()}if(j){for(c=0;c!==j;c++){for(w=0,x=0;x!==l;x++){v=k[x];var y=d.iterateEquation(x,v,v.epsilon,u,t,q,p,a,c);w+=Math.abs(y)}if(this.usedIterations++,m>=w*w)break}for(d.updateMultipliers(k,q,1/a),x=0;x!==l;x++){var z=k[x];if(z instanceof i){for(var A=0,B=0;B!==z.contactEquations.length;B++)A+=z.contactEquations[B].multiplier;A*=z.frictionCoefficient/z.contactEquations.length,z.maxForce=A,z.minForce=-A}}}for(c=0;c!==g;c++){for(w=0,x=0;x!==l;x++){v=k[x];var y=d.iterateEquation(x,v,v.epsilon,u,t,q,p,a,c);w+=Math.abs(y)}if(this.usedIterations++,m>=w*w)break}for(r=0;r!==o;r++)n[r].addConstraintVelocity();d.updateMultipliers(k,q,1/a)}},d.updateMultipliers=function(a,b,c){for(var d=a.length;d--;)a[d].multiplier=b[d]*c},d.iterateEquation=function(a,b,c,d,e,f,g,h,i){var j=d[a],k=e[a],l=f[a],m=b.computeGWlambda(),n=b.maxForce,o=b.minForce;g&&(j=0);var p=k*(j-m-c*l),q=l+p;return o*h>q?p=o*h-l:q>n*h&&(p=n*h-l),f[a]+=p,b.addToWlambda(p),p}},{"../equations/FrictionEquation":23,"../math/vec2":30,"../utils/Utils":57,"./Solver":47}],47:[function(a,b,c){function d(a,b){a=a||{},e.call(this),this.type=b,this.equations=[],this.equationSortFunction=a.equationSortFunction||!1}var e=(a("../utils/Utils"),a("../events/EventEmitter"));b.exports=d,d.prototype=new e,d.prototype.constructor=d,d.prototype.solve=function(a,b){throw new Error("Solver.solve should be implemented by subclasses!")};var f={bodies:[]};d.prototype.solveIsland=function(a,b){this.removeAllEquations(),b.equations.length&&(this.addEquations(b.equations),f.bodies.length=0,b.getBodies(f.bodies),f.bodies.length&&this.solve(a,f))},d.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},d.prototype.addEquation=function(a){a.enabled&&this.equations.push(a)},d.prototype.addEquations=function(a){for(var b=0,c=a.length;b!==c;b++){var d=a[b];d.enabled&&this.equations.push(d)}},d.prototype.removeEquation=function(a){var b=this.equations.indexOf(a);-1!==b&&this.equations.splice(b,1)},d.prototype.removeAllEquations=function(){this.equations.length=0},d.GS=1,d.ISLAND=2},{"../events/EventEmitter":26,"../utils/Utils":57}],48:[function(a,b,c){function d(){f.apply(this,arguments)}var e=a("../equations/ContactEquation"),f=a("./Pool");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.create=function(){return new e},d.prototype.destroy=function(a){return a.bodyA=a.bodyB=null,this}},{"../equations/ContactEquation":21,"./Pool":55}],49:[function(a,b,c){function d(){f.apply(this,arguments)}var e=a("../equations/FrictionEquation"),f=a("./Pool");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.create=function(){return new e},d.prototype.destroy=function(a){return a.bodyA=a.bodyB=null,this}},{"../equations/FrictionEquation":23,"./Pool":55}],50:[function(a,b,c){function d(){f.apply(this,arguments)}var e=a("../world/IslandNode"),f=a("./Pool");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.create=function(){return new e},d.prototype.destroy=function(a){return a.reset(),this}},{"../world/IslandNode":60,"./Pool":55}],51:[function(a,b,c){function d(){f.apply(this,arguments)}var e=a("../world/Island"),f=a("./Pool");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.create=function(){return new e},d.prototype.destroy=function(a){return a.reset(),this}},{"../world/Island":58,"./Pool":55}],52:[function(a,b,c){function d(){this.overlappingShapesLastState=new e,this.overlappingShapesCurrentState=new e,this.recordPool=new f({size:16}),this.tmpDict=new e,this.tmpArray1=[]}var e=a("./TupleDictionary"),f=(a("./OverlapKeeperRecord"),a("./OverlapKeeperRecordPool"));a("./Utils");b.exports=d,d.prototype.tick=function(){for(var a=this.overlappingShapesLastState,b=this.overlappingShapesCurrentState,c=a.keys.length;c--;){var d=a.keys[c],e=a.getByKey(d);b.getByKey(d);e&&this.recordPool.release(e)}a.reset(),a.copy(b),b.reset()},d.prototype.setOverlapping=function(a,b,c,d){var e=(this.overlappingShapesLastState,this.overlappingShapesCurrentState);if(!e.get(b.id,d.id)){var f=this.recordPool.get();f.set(a,b,c,d),e.set(b.id,d.id,f)}},d.prototype.getNewOverlaps=function(a){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,a)},d.prototype.getEndOverlaps=function(a){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,a)},d.prototype.bodiesAreOverlapping=function(a,b){for(var c=this.overlappingShapesCurrentState,d=c.keys.length;d--;){var e=c.keys[d],f=c.data[e];if(f.bodyA===a&&f.bodyB===b||f.bodyA===b&&f.bodyB===a)return!0}return!1},d.prototype.getDiff=function(a,b,c){var c=c||[],d=a,e=b;c.length=0;for(var f=e.keys.length;f--;){var g=e.keys[f],h=e.data[g];if(!h)throw new Error("Key "+g+" had no data!");var i=d.data[g];i||c.push(h)}return c},d.prototype.isNewOverlap=function(a,b){var c=0|a.id,d=0|b.id,e=this.overlappingShapesLastState,f=this.overlappingShapesCurrentState;return!e.get(c,d)&&!!f.get(c,d)},d.prototype.getNewBodyOverlaps=function(a){this.tmpArray1.length=0;var b=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(b,a)},d.prototype.getEndBodyOverlaps=function(a){this.tmpArray1.length=0;var b=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(b,a)},d.prototype.getBodyDiff=function(a,b){b=b||[];for(var c=this.tmpDict,d=a.length;d--;){var e=a[d];c.set(0|e.bodyA.id,0|e.bodyB.id,e)}for(d=c.keys.length;d--;){var e=c.getByKey(c.keys[d]);e&&b.push(e.bodyA,e.bodyB)}return c.reset(),b}},{"./OverlapKeeperRecord":53,"./OverlapKeeperRecordPool":54,"./TupleDictionary":56,"./Utils":57}],53:[function(a,b,c){function d(a,b,c,d){this.shapeA=b,this.shapeB=d,this.bodyA=a,this.bodyB=c}b.exports=d,d.prototype.set=function(a,b,c,e){d.call(this,a,b,c,e)}},{}],54:[function(a,b,c){function d(){f.apply(this,arguments)}var e=a("./OverlapKeeperRecord"),f=a("./Pool");b.exports=d,d.prototype=new f,d.prototype.constructor=d,d.prototype.create=function(){return new e},d.prototype.destroy=function(a){return a.bodyA=a.bodyB=a.shapeA=a.shapeB=null,this}},{"./OverlapKeeperRecord":53,"./Pool":55}],55:[function(a,b,c){function d(a){a=a||{},this.objects=[],void 0!==a.size&&this.resize(a.size)}b.exports=d,d.prototype.resize=function(a){for(var b=this.objects;b.length>a;)b.pop();for(;b.length<a;)b.push(this.create());return this},d.prototype.get=function(){var a=this.objects;return a.length?a.pop():this.create()},d.prototype.release=function(a){return this.destroy(a),this.objects.push(a),this}},{}],56:[function(a,b,c){function d(){this.data={},this.keys=[]}var e=a("./Utils");b.exports=d,d.prototype.getKey=function(a,b){return a=0|a,b=0|b,(0|a)===(0|b)?-1:0|((0|a)>(0|b)?a<<16|65535&b:b<<16|65535&a)},d.prototype.getByKey=function(a){return a=0|a,this.data[a]},d.prototype.get=function(a,b){return this.data[this.getKey(a,b)]},d.prototype.set=function(a,b,c){if(!c)throw new Error("No data!");var d=this.getKey(a,b);return this.data[d]||this.keys.push(d),this.data[d]=c,d},d.prototype.reset=function(){for(var a=this.data,b=this.keys,c=b.length;c--;)delete a[b[c]];b.length=0},d.prototype.copy=function(a){this.reset(),e.appendArray(this.keys,a.keys);for(var b=a.keys.length;b--;){var c=a.keys[b];this.data[c]=a.data[c]}}},{"./Utils":57}],57:[function(a,b,c){function d(){}b.exports=d,d.appendArray=function(a,b){if(b.length<15e4)a.push.apply(a,b);else for(var c=0,d=b.length;c!==d;++c)a.push(b[c])},d.splice=function(a,b,c){c=c||1;for(var d=b,e=a.length-c;e>d;d++)a[d]=a[d+c];a.length=e},"undefined"!=typeof P2_ARRAY_TYPE?d.ARRAY_TYPE=P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?d.ARRAY_TYPE=Float32Array:d.ARRAY_TYPE=Array,d.extend=function(a,b){for(var c in b)a[c]=b[c]},d.defaults=function(a,b){a=a||{};for(var c in b)c in a||(a[c]=b[c]);return a}},{}],58:[function(a,b,c){function d(){this.equations=[],this.bodies=[]}var e=a("../objects/Body");b.exports=d,d.prototype.reset=function(){this.equations.length=this.bodies.length=0};var f=[];d.prototype.getBodies=function(a){var b=a||[],c=this.equations;f.length=0;for(var d=0;d!==c.length;d++){var e=c[d];-1===f.indexOf(e.bodyA.id)&&(b.push(e.bodyA),f.push(e.bodyA.id)),-1===f.indexOf(e.bodyB.id)&&(b.push(e.bodyB),f.push(e.bodyB.id))}return b},d.prototype.wantsToSleep=function(){for(var a=0;a<this.bodies.length;a++){var b=this.bodies[a];if(b.type===e.DYNAMIC&&!b.wantsToSleep)return!1}return!0},d.prototype.sleep=function(){for(var a=0;a<this.bodies.length;a++){var b=this.bodies[a];b.sleep()}return!0}},{"../objects/Body":31}],59:[function(a,b,c){function d(a){this.nodePool=new e({size:16}),this.islandPool=new f({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}var e=(a("../math/vec2"),a("./Island"),a("./IslandNode"),a("./../utils/IslandNodePool")),f=a("./../utils/IslandPool"),g=a("../objects/Body");b.exports=d,d.getUnvisitedNode=function(a){for(var b=a.length,c=0;c!==b;c++){var d=a[c];if(!d.visited&&d.body.type===g.DYNAMIC)return d}return!1},d.prototype.visit=function(a,b,c){b.push(a.body);for(var d=a.equations.length,e=0;e!==d;e++){var f=a.equations[e];-1===c.indexOf(f)&&c.push(f)}},d.prototype.bfs=function(a,b,c){var e=this.queue;for(e.length=0,e.push(a),a.visited=!0,this.visit(a,b,c);e.length;)for(var f,h=e.pop();f=d.getUnvisitedNode(h.neighbors);)f.visited=!0,this.visit(f,b,c),f.body.type===g.DYNAMIC&&e.push(f)},d.prototype.split=function(a){for(var b=a.bodies,c=this.nodes,e=this.equations;c.length;)this.nodePool.release(c.pop());for(var f=0;f!==b.length;f++){var g=this.nodePool.get();g.body=b[f],c.push(g)}for(var h=0;h!==e.length;h++){var i=e[h],f=b.indexOf(i.bodyA),j=b.indexOf(i.bodyB),k=c[f],l=c[j];k.neighbors.push(l),l.neighbors.push(k),k.equations.push(i),l.equations.push(i)}for(var m=this.islands,f=0;f<m.length;f++)this.islandPool.release(m[f]);m.length=0;for(var n;n=d.getUnvisitedNode(c);){var o=this.islandPool.get();this.bfs(n,o.bodies,o.equations),m.push(o)}return m}},{"../math/vec2":30,"../objects/Body":31,"./../utils/IslandNodePool":50,"./../utils/IslandPool":51,"./Island":58,"./IslandNode":60}],60:[function(a,b,c){function d(a){this.body=a,this.neighbors=[],this.equations=[],this.visited=!1}b.exports=d,d.prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],61:[function(a,b,c){function d(a){l.apply(this),a=a||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=a.solver||new e,this.narrowphase=new r(this),this.islandManager=new u,this.gravity=f.fromValues(0,-9.78),a.gravity&&f.copy(this.gravity,a.gravity),this.frictionGravity=f.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=a.broadphase||new q,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new n,this.defaultContactMaterial=new o(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit="undefined"!=typeof a.islandSplit?!!a.islandSplit:!0,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=d.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new t}var e=a("../solver/GSSolver"),f=(a("../solver/Solver"),a("../collision/Ray"),a("../math/vec2")),g=a("../shapes/Circle"),h=a("../shapes/Convex"),i=(a("../shapes/Line"),a("../shapes/Plane")),j=a("../shapes/Capsule"),k=a("../shapes/Particle"),l=a("../events/EventEmitter"),m=a("../objects/Body"),n=(a("../shapes/Shape"),a("../objects/LinearSpring"),a("../material/Material")),o=a("../material/ContactMaterial"),p=(a("../constraints/DistanceConstraint"),a("../constraints/Constraint"),a("../constraints/LockConstraint"),a("../constraints/RevoluteConstraint"),a("../constraints/PrismaticConstraint"),a("../constraints/GearConstraint"),a("../../package.json"),a("../collision/Broadphase"),a("../collision/AABB")),q=a("../collision/SAPBroadphase"),r=a("../collision/Narrowphase"),s=a("../utils/Utils"),t=a("../utils/OverlapKeeper"),u=a("./IslandManager");a("../objects/RotationalSpring");b.exports=d,d.prototype=new Object(l.prototype),d.prototype.constructor=d,d.NO_SLEEPING=1,d.BODY_SLEEPING=2,d.ISLAND_SLEEPING=4,d.prototype.addConstraint=function(a){this.constraints.push(a)},d.prototype.addContactMaterial=function(a){this.contactMaterials.push(a)},d.prototype.removeContactMaterial=function(a){var b=this.contactMaterials.indexOf(a);-1!==b&&s.splice(this.contactMaterials,b,1)},d.prototype.getContactMaterial=function(a,b){for(var c=this.contactMaterials,d=0,e=c.length;d!==e;d++){var f=c[d];if(f.materialA.id===a.id&&f.materialB.id===b.id||f.materialA.id===b.id&&f.materialB.id===a.id)return f;
}return!1},d.prototype.removeConstraint=function(a){var b=this.constraints.indexOf(a);-1!==b&&s.splice(this.constraints,b,1)};var v=(f.create(),f.create(),f.create(),f.create(),f.create(),f.create(),f.create()),w=f.fromValues(0,0),x=f.fromValues(0,0);f.fromValues(0,0),f.fromValues(0,0);d.prototype.step=function(a,b,c){if(c=c||10,b=b||0,0===b)this.internalStep(a),this.time+=a;else{this.accumulator+=b;for(var d=0;this.accumulator>=a&&c>d;)this.internalStep(a),this.time+=a,this.accumulator-=a,d++;for(var e=this.accumulator%a/a,g=0;g!==this.bodies.length;g++){var h=this.bodies[g];f.lerp(h.interpolatedPosition,h.previousPosition,h.position,e),h.interpolatedAngle=h.previousAngle+e*(h.angle-h.previousAngle)}}};var y=[];d.prototype.internalStep=function(a){this.stepping=!0;var b=this.springs.length,c=this.springs,e=this.bodies,g=this.gravity,h=this.solver,i=this.bodies.length,j=this.broadphase,k=this.narrowphase,l=this.constraints,n=v,o=(f.scale,f.add),p=(f.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=a,this.useWorldGravityAsFrictionGravity){var q=f.length(this.gravity);0===q&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=q)}if(this.applyGravity)for(var r=0;r!==i;r++){var t=e[r],u=t.force;t.type===m.DYNAMIC&&t.sleepState!==m.SLEEPING&&(f.scale(n,g,t.mass*t.gravityScale),o(u,u,n))}if(this.applySpringForces)for(var r=0;r!==b;r++){var w=c[r];w.applyForce()}if(this.applyDamping)for(var r=0;r!==i;r++){var t=e[r];t.type===m.DYNAMIC&&t.applyDamping(a)}for(var x=j.getCollisionPairs(this),z=this.disabledBodyCollisionPairs,r=z.length-2;r>=0;r-=2)for(var A=x.length-2;A>=0;A-=2)(z[r]===x[A]&&z[r+1]===x[A+1]||z[r+1]===x[A]&&z[r]===x[A+1])&&x.splice(A,2);var B=l.length;for(r=0;r!==B;r++){var C=l[r];if(!C.collideConnected)for(var A=x.length-2;A>=0;A-=2)(C.bodyA===x[A]&&C.bodyB===x[A+1]||C.bodyB===x[A]&&C.bodyA===x[A+1])&&x.splice(A,2)}this.postBroadphaseEvent.pairs=x,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,k.reset(this);for(var r=0,D=x.length;r!==D;r+=2)for(var E=x[r],F=x[r+1],G=0,H=E.shapes.length;G!==H;G++)for(var I=E.shapes[G],J=I.position,K=I.angle,L=0,M=F.shapes.length;L!==M;L++){var N=F.shapes[L],O=N.position,P=N.angle,Q=this.defaultContactMaterial;if(I.material&&N.material){var R=this.getContactMaterial(I.material,N.material);R&&(Q=R)}this.runNarrowphase(k,E,I,J,K,F,N,O,P,Q,this.frictionGravity)}for(var r=0;r!==i;r++){var S=e[r];S._wakeUpAfterNarrowphase&&(S.wakeUp(),S._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(y);for(var T=this.endContactEvent,L=y.length;L--;){var U=y[L];T.shapeA=U.shapeA,T.shapeB=U.shapeB,T.bodyA=U.bodyA,T.bodyB=U.bodyB,this.emit(T)}y.length=0}var V=this.preSolveEvent;V.contactEquations=k.contactEquations,V.frictionEquations=k.frictionEquations,this.emit(V),V.contactEquations=V.frictionEquations=null;var B=l.length;for(r=0;r!==B;r++)l[r].update();if(k.contactEquations.length||k.frictionEquations.length||B)if(this.islandSplit){for(p.equations.length=0,s.appendArray(p.equations,k.contactEquations),s.appendArray(p.equations,k.frictionEquations),r=0;r!==B;r++)s.appendArray(p.equations,l[r].equations);p.split(this);for(var r=0;r!==p.islands.length;r++){var W=p.islands[r];W.equations.length&&h.solveIsland(a,W)}}else{for(h.addEquations(k.contactEquations),h.addEquations(k.frictionEquations),r=0;r!==B;r++)h.addEquations(l[r].equations);this.solveConstraints&&h.solve(a,this),h.removeAllEquations()}for(var r=0;r!==i;r++){var S=e[r];S.integrate(a)}for(var r=0;r!==i;r++)e[r].setZeroForce();if(this.emitImpactEvent&&this.has("impact"))for(var X=this.impactEvent,r=0;r!==k.contactEquations.length;r++){var Y=k.contactEquations[r];Y.firstImpact&&(X.bodyA=Y.bodyA,X.bodyB=Y.bodyB,X.shapeA=Y.shapeA,X.shapeB=Y.shapeB,X.contactEquation=Y,this.emit(X))}if(this.sleepMode===d.BODY_SLEEPING)for(r=0;r!==i;r++)e[r].sleepTick(this.time,!1,a);else if(this.sleepMode===d.ISLAND_SLEEPING&&this.islandSplit){for(r=0;r!==i;r++)e[r].sleepTick(this.time,!0,a);for(var r=0;r<this.islandManager.islands.length;r++){var W=this.islandManager.islands[r];W.wantsToSleep()&&W.sleep()}}this.stepping=!1;for(var Z=this.bodiesToBeRemoved,r=0;r!==Z.length;r++)this.removeBody(Z[r]);Z.length=0,this.emit(this.postStepEvent)},d.prototype.runNarrowphase=function(a,b,c,d,e,g,h,i,j,k,l){if(0!==(c.collisionGroup&h.collisionMask)&&0!==(h.collisionGroup&c.collisionMask)){f.rotate(w,d,b.angle),f.rotate(x,i,g.angle),f.add(w,w,b.position),f.add(x,x,g.position);var n=e+b.angle,o=j+g.angle;a.enableFriction=k.friction>0,a.frictionCoefficient=k.friction;var p;p=b.type===m.STATIC||b.type===m.KINEMATIC?g.mass:g.type===m.STATIC||g.type===m.KINEMATIC?b.mass:b.mass*g.mass/(b.mass+g.mass),a.slipForce=k.friction*l*p,a.restitution=k.restitution,a.surfaceVelocity=k.surfaceVelocity,a.frictionStiffness=k.frictionStiffness,a.frictionRelaxation=k.frictionRelaxation,a.stiffness=k.stiffness,a.relaxation=k.relaxation,a.contactSkinSize=k.contactSkinSize,a.enabledEquations=b.collisionResponse&&g.collisionResponse&&c.collisionResponse&&h.collisionResponse;var q=a[c.type|h.type],r=0;if(q){var s=c.sensor||h.sensor,t=a.frictionEquations.length;r=c.type<h.type?q.call(a,b,c,w,n,g,h,x,o,s):q.call(a,g,h,x,o,b,c,w,n,s);var u=a.frictionEquations.length-t;if(r){if(b.allowSleep&&b.type===m.DYNAMIC&&b.sleepState===m.SLEEPING&&g.sleepState===m.AWAKE&&g.type!==m.STATIC){var v=f.squaredLength(g.velocity)+Math.pow(g.angularVelocity,2),y=Math.pow(g.sleepSpeedLimit,2);v>=2*y&&(b._wakeUpAfterNarrowphase=!0)}if(g.allowSleep&&g.type===m.DYNAMIC&&g.sleepState===m.SLEEPING&&b.sleepState===m.AWAKE&&b.type!==m.STATIC){var z=f.squaredLength(b.velocity)+Math.pow(b.angularVelocity,2),A=Math.pow(b.sleepSpeedLimit,2);z>=2*A&&(g._wakeUpAfterNarrowphase=!0)}if(this.overlapKeeper.setOverlapping(b,c,g,h),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(c,h)){var B=this.beginContactEvent;if(B.shapeA=c,B.shapeB=h,B.bodyA=b,B.bodyB=g,B.contactEquations.length=0,"number"==typeof r)for(var C=a.contactEquations.length-r;C<a.contactEquations.length;C++)B.contactEquations.push(a.contactEquations[C]);this.emit(B)}if("number"==typeof r&&u>1)for(var C=a.frictionEquations.length-u;C<a.frictionEquations.length;C++){var D=a.frictionEquations[C];D.setSlipForce(D.getSlipForce()/u)}}}}},d.prototype.addSpring=function(a){this.springs.push(a);var b=this.addSpringEvent;b.spring=a,this.emit(b),b.spring=null},d.prototype.removeSpring=function(a){var b=this.springs.indexOf(a);-1!==b&&s.splice(this.springs,b,1)},d.prototype.addBody=function(a){if(-1===this.bodies.indexOf(a)){this.bodies.push(a),a.world=this;var b=this.addBodyEvent;b.body=a,this.emit(b),b.body=null}},d.prototype.removeBody=function(a){if(this.stepping)this.bodiesToBeRemoved.push(a);else{a.world=null;var b=this.bodies.indexOf(a);-1!==b&&(s.splice(this.bodies,b,1),this.removeBodyEvent.body=a,a.resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},d.prototype.getBodyById=function(a){for(var b=this.bodies,c=0;c<b.length;c++){var d=b[c];if(d.id===a)return d}return!1},d.prototype.disableBodyCollision=function(a,b){this.disabledBodyCollisionPairs.push(a,b)},d.prototype.enableBodyCollision=function(a,b){for(var c=this.disabledBodyCollisionPairs,d=0;d<c.length;d+=2)if(c[d]===a&&c[d+1]===b||c[d+1]===a&&c[d]===b)return void c.splice(d,2)},d.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var a=this.constraints,b=a.length-1;b>=0;b--)this.removeConstraint(a[b]);for(var c=this.bodies,b=c.length-1;b>=0;b--)this.removeBody(c[b]);for(var e=this.springs,b=e.length-1;b>=0;b--)this.removeSpring(e[b]);for(var f=this.contactMaterials,b=f.length-1;b>=0;b--)this.removeContactMaterial(f[b]);d.apply(this)};var z=f.create(),A=(f.fromValues(0,0),f.fromValues(0,0));d.prototype.hitTest=function(a,b,c){c=c||0;var d=new m({position:a}),e=new k,l=a,n=0,o=z,p=A;d.addShape(e);for(var q=this.narrowphase,r=[],s=0,t=b.length;s!==t;s++)for(var u=b[s],v=0,w=u.shapes.length;v!==w;v++){var x=u.shapes[v];f.rotate(o,x.position,u.angle),f.add(o,o,u.position);var y=x.angle+u.angle;(x instanceof g&&q.circleParticle(u,x,o,y,d,e,l,n,!0)||x instanceof h&&q.particleConvex(d,e,l,n,u,x,o,y,!0)||x instanceof i&&q.particlePlane(d,e,l,n,u,x,o,y,!0)||x instanceof j&&q.particleCapsule(d,e,l,n,u,x,o,y,!0)||x instanceof k&&f.squaredLength(f.sub(p,o,a))<c*c)&&r.push(u)}return r},d.prototype.setGlobalStiffness=function(a){for(var b=this.constraints,c=0;c!==b.length;c++)for(var d=b[c],e=0;e!==d.equations.length;e++){var f=d.equations[e];f.stiffness=a,f.needsUpdate=!0}for(var g=this.contactMaterials,c=0;c!==g.length;c++){var d=g[c];d.stiffness=d.frictionStiffness=a}var d=this.defaultContactMaterial;d.stiffness=d.frictionStiffness=a},d.prototype.setGlobalRelaxation=function(a){for(var b=0;b!==this.constraints.length;b++)for(var c=this.constraints[b],d=0;d!==c.equations.length;d++){var e=c.equations[d];e.relaxation=a,e.needsUpdate=!0}for(var b=0;b!==this.contactMaterials.length;b++){var c=this.contactMaterials[b];c.relaxation=c.frictionRelaxation=a}var c=this.defaultContactMaterial;c.relaxation=c.frictionRelaxation=a};var B=new p,C=[];d.prototype.raycast=function(a,b){return b.getAABB(B),this.broadphase.aabbQuery(this,B,C),b.intersectBodies(a,C),C.length=0,a.hasHit()}},{"../../package.json":6,"../collision/AABB":7,"../collision/Broadphase":8,"../collision/Narrowphase":10,"../collision/Ray":11,"../collision/SAPBroadphase":13,"../constraints/Constraint":14,"../constraints/DistanceConstraint":15,"../constraints/GearConstraint":16,"../constraints/LockConstraint":17,"../constraints/PrismaticConstraint":18,"../constraints/RevoluteConstraint":19,"../events/EventEmitter":26,"../material/ContactMaterial":27,"../material/Material":28,"../math/vec2":30,"../objects/Body":31,"../objects/LinearSpring":32,"../objects/RotationalSpring":33,"../shapes/Capsule":38,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Line":42,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45,"../solver/GSSolver":46,"../solver/Solver":47,"../utils/OverlapKeeper":52,"../utils/Utils":57,"./IslandManager":59}]},{},[36])(36)});var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},DisplayObjectContainer=function(a){function b(){a.call(this),this.items={},this.neverFlush=!1,this.origX=0,this.origY=0,this.origPivot={x:0,y:0,compensate:!1},this.defaultPivot=!0,this.pooled=!1,this.pooledActive=!1}return __extends(b,a),b.prototype.addChild=function(b){a.prototype.addChild.call(this,b),this.addItem(b),1==this.pooled&&(this.pooledActive=!0)},b.prototype.addChildAt=function(b,c){a.prototype.addChildAt.call(this,b,c),this.addItem(b)},b.prototype.addItem=function(a){this.items[a.id]=a},b.prototype.getSpriteAt=function(a){var b=this.getChildAt(a);return b},b.prototype.getSprite=function(a){var b=this.items[a];return this.resetItem(b)},b.prototype.getContainer=function(a){var b=this.items[a];return this.resetItem(b)},b.prototype.getSpine=function(a){var b=this.items[a];return this.resetItem(b)},b.prototype.getTilingSprite=function(a){var b=this.items[a];return this.resetItem(b)},b.prototype.getMovieClip=function(a){var b=this.items[a];return this.resetItem(b)},b.prototype.resetItem=function(a){return a.scale.x=1,a.scale.y=1,a.rotation=0,a.origX&&(a.position.x=a.origX),a.origY&&(a.position.y=a.origY),"boolean"==typeof a.defaultAnchor&&0==a.defaultAnchor&&a.setRegPoint(a.origAnchor.x,a.origAnchor.y,a.origAnchor.compensate),"boolean"==typeof a.defaultPivot&&0==a.defaultPivot&&a.setRegPoint(a.origPivot.x,a.origPivot.y,a.origPivot.compensate),a},b.prototype.getItemAt=function(a){return this.getChildAt(a)},b.prototype.destroy=function(){if(a.prototype.destroy.call(this),this.children&&this.children.length>0)for(var b=this.children.length-1;b>=0;b--)this.removeChild(this.getChildAt(b));for(var c in this.items)this.items[c].destroy();this.timeline&&(this.timeline.kill(),this.timeline=null)},b.prototype.removeAllChildren=function(){for(var a=this.children.length-1;a>=0;a--)this.removeChild(this.getChildAt(a));this.items=[]},b.prototype.setRegPoint=function(a,b,c,d,e,f){if(this.defaultPivot=!1,f){var g=PIXI.Sprite.fromImage("marker.png");this.addChild(g),g.position.x=a-g.width/2,g.position.y=b-g.height/2}var h=this.pivot.x,i=this.pivot.y;if(this.pivot.x=a,this.pivot.y=b,this.origPivot.x=a,this.origPivot.y=b,1==c){var j=this.pivot.x-h,k=this.pivot.y-i,l=j*Math.cos(this.rotation)-k*Math.sin(this.rotation),m=k*Math.cos(this.rotation)+j*Math.sin(this.rotation);d?(this.timeline=d,d.add(TweenMax.to(this.position,0,{x:this.position.x+l*this.scale.x,y:this.position.y+m*this.scale.y}),e)):(this.position.x+=l*this.scale.x,this.position.y+=m*this.scale.y)}},b}(PIXI.Container),visualAssets={"initial-loading-assets":[{id:"preloader-bar",pivot:[234,46],children:[{url:"ui/preloader-bg.png"},{id:"bar-fill",url:"ui/preloader-bar.png",x:8,y:7}]},{url:"media/fonts/spongeboytt1-webfont.eot",type:"misc"},{url:"media/fonts/spongeboytt1-webfont.svg",type:"misc"},{url:"media/fonts/spongeboytt1-webfont.ttf",type:"misc"},{url:"media/fonts/spongeboytt1-webfont.woff",type:"misc"},{url:"media/fonts/spongeboytt1-webfont.woff2",type:"misc"},{id:"preloader-cloud",url:"preloader-assets/preloader-cloud.png",anchor:[.5,.5]},{id:"preloader-circle",url:"preloader-assets/preloader-circle.png",anchor:[.5,.5]}],"title-patty-pileup-assets":[{id:"title-background",url:"title-patty-pileup/bg.png",anchor:[.5,.5]},{id:"title-p-patty",url:"title-patty-pileup/p-patty.png",anchor:[.5,.5]},{id:"title-a-patty",url:"title-patty-pileup/a-patty.png",anchor:[.5,.5]},{id:"title-t1-patty",url:"title-patty-pileup/t1-patty.png",anchor:[.5,.5]},{id:"title-t2-patty",url:"title-patty-pileup/t2-patty.png",anchor:[.5,.5]},{id:"title-y-patty",url:"title-patty-pileup/y-patty.png",anchor:[.5,.5]},{id:"title-left-bun",url:"title-patty-pileup/left-bun.png",x:428,y:323,anchor:[.5,.5]},{id:"title-right-bun",url:"title-patty-pileup/right-bun.png",x:635,y:335,anchor:[.5,.5]},{id:"title-left-patty",url:"title-patty-pileup/left-patty.png",x:443,y:176,anchor:[.5,.5]},{id:"title-right-patty",url:"title-patty-pileup/right-patty.png",x:630,y:143,anchor:[.5,.5]},{id:"title-onion",url:"title-patty-pileup/onion.png",pool:5,anchor:[.5,.5]},{id:"title-pickle",url:"title-patty-pileup/pickle.png",pool:5,anchor:[.5,.5]},{id:"title-salad",url:"title-patty-pileup/salad.png",pool:3,anchor:[.5,.5]},{id:"title-salad-right",url:"title-patty-pileup/salad-right.png",x:693,y:218,anchor:[.5,.5]},{id:"title-salad-left",url:"title-patty-pileup/salad-left.png",x:484,y:226,anchor:[.5,.5]},{id:"patty-brand-logo",url:"title-slap-happy/logo.png",x:215,y:125,anchor:[.5,.5]},{id:"title-move-line",url:"title-patty-pileup/move-lines1.png",x:740,y:565,anchor:[.5,.5]},{id:"title-move-line2",url:"title-patty-pileup/move-lines2.png",x:860,y:381,anchor:[.5,.5]},{id:"title-move-line3",url:"title-patty-pileup/move-lines3.png",x:365,y:565,anchor:[.5,.5]},{id:"title-move-line4",url:"title-patty-pileup/move-lines4.png",x:140,y:277,anchor:[.5,.5]},{id:"title-small-patty",url:"title-patty-pileup/small-patty.png",pool:10,anchor:[.5,.5]},{id:"title-right-pile",url:"title-patty-pileup/right-pile.png",x:943,y:543,anchor:[.5,.5]},{id:"title-left-pile",url:"title-patty-pileup/left-pile.png",x:173,y:590,anchor:[.5,.5]},{id:"title-red-splat",url:"title-patty-pileup/red-splat.png",x:378,y:200,anchor:[.5,.5]},{id:"title-yellow-splat",url:"title-patty-pileup/yellow-splat.png",x:686,y:241,anchor:[.5,.5]},{id:"title-red-sauce",url:"title-patty-pileup/red-sauce.png",x:380,y:450,anchor:[.5,.5]},{id:"title-yellow-sauce",url:"title-patty-pileup/yellow-sauce.png",x:650,y:460,anchor:[.5,.5]},{id:"title-pile-title",url:"title-patty-pileup/pile-title.png",x:529,y:300,anchor:[.5,.5]},{id:"title-spongebob",url:"title-patty-pileup/spongebob.png",x:30,y:503,anchor:[.5,.5]},{id:"title-spongebob-arm",url:"title-patty-pileup/spongebob-arm.png",x:170,y:570,anchor:[0,1]},{id:"title-blink",url:"title-patty-pileup/titleblink.png",x:128,y:454,anchor:[.5,.5]}],"intro-patty-pileup-assets":[{id:"intro-sand",url:"intro-patty-pileup/q-sand.jpg",pool:4,x:0,y:0,anchor:[0,0]},{id:"intro-bed",url:"intro-patty-pileup/bed.png",pool:2,x:0,y:62,anchor:[0,0]},{id:"intro-hand",url:"intro-patty-pileup/spongebob-hand.png",pool:2,x:730,y:469,anchor:[0,0]},{id:"intro-spongebob",url:"intro-patty-pileup/spongebob.png",x:0,y:0,anchor:[.5,.5]},{id:"intro-cover",url:"intro-patty-pileup/cover.png",pool:2,x:0,y:485,anchor:[0,0]},{id:"intro-cloud",url:"intro-patty-pileup/cloud.png",pool:4,x:0,y:0,anchor:[.5,.5]},{id:"cover-holder",children:[]},{id:"intro-patty-scene-1",children:[{id:"intro-sign",url:"intro-patty-pileup/sign.png",x:512,y:0,anchor:[.5,0]},{id:"fish-chef-holder",children:[{id:"intro-fish-arm",url:"intro-patty-pileup/fish-arm.png",x:163,y:555,anchor:[0,0]},{id:"intro-fish",url:"intro-patty-pileup/fish.png",x:-5,y:207,anchor:[0,0]}]}]},{id:"intro-patty",url:"intro-patty-pileup/patty.png",pool:4,x:0,y:0,anchor:[.5,1]},{id:"intro-patty-scene-2",children:[{id:"spongebob-chef-holder",children:[{id:"intro-spongebobChef",url:"intro-patty-pileup/spongebob-chef.png",x:362,y:158,anchor:[0,0]},{id:"intro-spongebobChefArm",url:"intro-patty-pileup/spongebob-arm.png",x:418,y:537,anchor:[1,1]}]},{id:"meat-stack",url:"intro-patty-pileup/meat-stack.png",x:714,y:708,anchor:[.5,1]}]},{id:"intro-top-edge",url:"intro-slap-happy/top-edge.png",pool:2,x:512,y:0,anchor:[.5,.5]},{id:"intro-left-edge",url:"intro-slap-happy/left-edge.png",pool:2,x:0,y:0,anchor:[.5,.5]},{id:"intro-scene-holder",anchor:[.5,.5],children:[]}],"patty-pileup-assets":[{id:"bg-element-01",url:"patty-pileup/bg-element-01.png"},{id:"patty-dropper-container",children:[]},{id:"top-patty",url:"patty-pileup/top-patty-graphic.png",anchor:[.5,.5]},{id:"patty1",url:"patty-pileup/patty1.png",anchor:[.5,.5],pool:10},{id:"patty2",url:"patty-pileup/patty2.png",anchor:[.5,.5],pool:10},{id:"patty3",url:"patty-pileup/patty3.png",anchor:[.5,.5],pool:10},{id:"patty-topping-1",url:"patty-pileup/lettuce.png",y:-25,anchor:[.5,.5],pool:10},{id:"patty-topping-2",url:"patty-pileup/gherkin.png",y:-30,anchor:[.5,.5],pool:10},{id:"patty-topping-3",url:"patty-pileup/onion.png",y:-30,anchor:[.5,.5],pool:10},{id:"patty-topping-4",url:"patty-pileup/cheese-1.png",y:-22,anchor:[.5,.5],pool:10},{id:"patty-topping-5",url:"patty-pileup/cheese-2.png",y:-25,anchor:[.5,.5],pool:10},{id:"patty-topping-6",url:"patty-pileup/blank-topping.png",anchor:[.5,.5],pool:10},{id:"patty-bun",url:"patty-pileup/bun-bottom.png",anchor:[.5,.5]},{id:"patty-holder",children:[],pool:10},{id:"top-spatula",url:"patty-pileup/top-spatula-graphic.png",anchor:[.8,.3]},{id:"patty-grease-particle",pool:8,url:"patty-pileup/patty-grease-particle.png",anchor:[.5,.5]},{id:"grease-particle-holder-inner",children:[],pool:2},{id:"grease-particle-holder-outer",children:[]},{id:"patty-blank-input",url:"patty-pileup/blank-input.png"},{id:"sauce-bottle",url:"patty-pileup/sauce-bottle.png",anchor:[1,0]},{id:"helping-hands-button",url:"patty-pileup/helping-hands-button.png",anchor:[.5,.5]},{id:"power-up-button",url:"patty-pileup/power-up-button.png",anchor:[.5,.5]},{id:"sauce-bottle-top",url:"patty-pileup/sauce-bottle-top.png",anchor:[.5,0]},{id:"sauce-particle-front",url:"patty-pileup/mustard-particle-inner.png",anchor:[.5,.5],pool:50},{id:"sauce-particle-back",url:"patty-pileup/mustard-particle-outer.png",anchor:[.5,.5],pool:50},{id:"sauce-particle-holder-front",children:[]},{id:"sauce-particle-holder-back",children:[]},{id:"sauce-on-patty-particle",url:"patty-pileup/sauce-on-patty-particle.png",anchor:[.5,.5],pool:40},{id:"helping-hand-hand",url:"patty-pileup/helping-hand-hand.png",pool:2},{id:"background-container-outer",children:[]},{id:"background-container",children:[],pool:3},{id:"bg-item-shelf",url:"patty-pileup/shelf.png"},{id:"bg-item-ring",url:"patty-pileup/life-saver.png"},{id:"bg-item-splat",url:"patty-pileup/splat1.png"},{id:"bg-item-port-hole",url:"patty-pileup/port-hole.png"},{id:"patty-mustard",url:"patty-pileup/patty-mustard.png",y:-30,anchor:[.5,.5],pool:10},{id:"background-rivet-panel-0",url:"patty-pileup/background-panel-type-0.png",pool:5},{id:"background-rivet-panel-1",url:"patty-pileup/background-panel-type-1.png",pool:5},{id:"background-rivet-panel-2",url:"patty-pileup/background-panel-type-2.png",pool:5},{id:"background-rivet-panel-3",url:"patty-pileup/background-panel-type-3.png",pool:5},{id:"background-rivet-panel-4",url:"patty-pileup/background-panel-type-4.png",pool:5},{id:"background-rivet-panel-5",url:"patty-pileup/background-panel-type-5.png",pool:5},{id:"background-rivet-panel-6",url:"patty-pileup/background-panel-type-6.png",pool:5},{id:"background-rivet-panel-7",url:"patty-pileup/background-panel-type-7.png",pool:5},{id:"background-rivet-panel-8",url:"patty-pileup/background-panel-type-8.png",pool:5},{id:"magnetic-spiral-holder",y:-30,children:[{id:"magnetic-spiral",url:"patty-pileup/magnetic-spiral.png",anchor:[.5,.5]},{id:"magnetic-particles",url:"patty-pileup/magnetic-particles.png",anchor:[.5,.5]}]},{id:"sauce-light-holder",children:[]},{id:"sauce-light-beam",url:"patty-pileup/sauce-light-beams.png",anchor:[.5,.5],pool:3},{id:"patty-score-holder",children:[]},{id:"burger-score-bg",url:"patty-pileup/burger-score-bg.png",anchor:[.5,.5]},{id:"pause-character",url:"patty-pileup/pause-character-spongebob.png",anchor:[.5,1]},{id:"spongebob-font",dir:"spongebob-font",url:"spongebob-font.png",fontname:"spongebob-font",fontdata:"spongebob-font.xml",type:"bitmaptext"},{id:"gameover-bed",url:"intro-patty-pileup/bed.png",pool:2,x:0,y:62,anchor:[0,0]},{id:"gameover-hand",url:"intro-patty-pileup/spongebob-hand.png",pool:2,x:730,y:469,anchor:[0,0]},{id:"gameover-cover",url:"intro-patty-pileup/cover.png",pool:2,x:0,y:485,anchor:[0,0]},{id:"gameover-cloud",url:"intro-patty-pileup/cloud.png",pool:10,x:0,y:0,anchor:[.5,.5]},{id:"gameover-sand",url:"intro-patty-pileup/q-sand.jpg",pool:4,x:0,y:0,anchor:[0,0]},{id:"gameover-spongebob",children:[{id:"gameover-spongebob-eyes",url:"gameover-patty-pileup/eyes.png",x:334,y:250},{id:"gameover-spongebob-lids",url:"gameover-patty-pileup/lids.png",x:333,y:311},{id:"gameover-spongebob-body",url:"gameover-patty-pileup/spongebob-body.png",x:200,y:156}]},{id:"gameover-cover-holder",children:[]},{id:"gameover-title",url:"gameover-patty-pileup/title.png",x:522,y:77,anchor:[.5,.5]},{id:"gameover-score",url:"gameover-patty-pileup/score.png",x:153,y:369,anchor:[.5,.5]},{id:"gameover-earned",url:"gameover-patty-pileup/earned.png",x:818,y:262,anchor:[.5,.5]},{id:"gameover-coin",url:"gameover-patty-pileup/coin-large.png",x:802,y:319,anchor:[.5,.5]},{id:"gameover-burst",url:"gameover-patty-pileup/burst.png",pool:15,anchor:[.5,.5]},{id:"patty-pileup-tutorial-overlay",children:[{id:"tutorial-overlay-bg",url:"patty-pileup/tutorial-overlay-bg.png"},{id:"tutorial-element-stack",url:"patty-pileup/tutorial-element-stack.png",x:20},{id:"tutorial-element-space-bar",url:"patty-pileup/tutorial-element-space-bar.png",anchor:[1,0],x:1024,platformspecific:"desktop"},{id:"tutorial-element-patty-drop",url:"patty-pileup/tutorial-element-patty-drop.png",anchor:[.5,.5],x:512,y:300},{id:"tutorial-element-click-to-drop",url:"patty-pileup/tutorial-element-click-to-drop.png",anchor:[.5,.5],x:512,y:505,platformspecific:"desktop"},{id:"tutorial-element-cursor",url:"patty-pileup/tutorial-element-cursor.png",anchor:[.5,.5],x:220,y:400,platformspecific:"desktop"},{id:"tutorial-element-tap-to-drop",url:"patty-pileup/tutorial-element-tap-to-drop.png",anchor:[.5,.5],x:512,y:505,platformspecific:"mobile"},{id:"tutorial-element-hand",url:"patty-pileup/tutorial-element-hand-facing-left.png",anchor:[.5,.5],x:700,y:360,platformspecific:"mobile"}]},{id:"patty-pileup-cross-currency-overlay",children:[{id:"tutorial-overlay-bg",url:"patty-pileup/tutorial-overlay-bg.png"},{id:"tutorial-coin-title-pp",url:"patty-pileup/tutorial-coin-title-pp.png",anchor:[.5,.5],x:512,y:80},{id:"tutorial-coin-sparkle",url:"patty-pileup/tutorial-coin-sparkle.png",anchor:[.5,.5],x:250,y:350},{id:"tutorial-coin",url:"patty-pileup/tutorial-coin.png",anchor:[.5,.5],x:250,y:350},{id:"tutorial-coin-image-pp",url:"patty-pileup/tutorial-coin-image-pp.png",anchor:[.5,.5],x:700,y:350}]}],"title-meow-no-assets":[{id:"meow-brand-logo",url:"title-slap-happy/logo.png",x:215,y:125,anchor:[.5,.5]},{id:"title-mn-background",url:"title-meow-no/background.png",x:922,y:317,anchor:[.9,.5]},{id:"title-mn-bubble-cloud",url:"title-meow-no/cloud-bubble.png",x:522,y:210,anchor:[.5,.5]},{id:"title-mn-no",url:"title-meow-no/no.png",x:522,y:300,anchor:[.5,.5]},{id:"title-mn-gary",url:"title-meow-no/gary.png",x:910,y:320,anchor:[.5,.5]},{id:"title-mn-blink",url:"title-meow-no/meow-blink.png",x:913,y:243,anchor:[.5,.5]},{id:"title-mn-m-meow",url:"title-meow-no/meow-m.png",x:350,y:160,anchor:[.5,.5]},{id:"title-mn-e-meow",url:"title-meow-no/meow-e.png",x:465,y:150,anchor:[.5,.5]},{id:"title-mn-o-meow",url:"title-meow-no/meow-o.png",x:565,y:150,anchor:[.5,.5]},{id:"title-mn-w-meow",url:"title-meow-no/meow-w.png",x:700,y:162,anchor:[.5,.5]},{id:"title-mn-arm",url:"title-meow-no/arm.png",x:-150,y:680,anchor:[0,1]},{id:"title-mn-arm-shadow",url:"title-meow-no/arm-shadow.png",x:220,y:750,anchor:[0,1]},{id:"title-mn-spongebob-shadow",url:"title-meow-no/bob-shadow.png",x:200,y:550,anchor:[.5,.5]},{id:"title-mn-bubble",url:"title-meow-no/bubble.png",pool:15,anchor:[.5,.5]}],"intro-meow-no-assets":[{id:"intro-meow-cloud",url:"intro-meow-no/cloud.png",pool:4,x:0,y:0,anchor:[.5,.5]},{id:"intro-meow-bg",url:"intro-meow-no/bg.jpg",anchor:[0,0]},{id:"intro-meow-gary",url:"intro-meow-no/gary.png",x:324,y:537,anchor:[.5,1]},{id:"intro-meow-gary-shadow",url:"intro-meow-no/gary-shadow.png",x:320,y:520,anchor:[.5,.5]},{id:"intro-meow-bowl",url:"intro-meow-no/bowl.png",pool:3,anchor:[.5,.5]},{id:"intro-meow-bubble",url:"intro-meow-no/single-bubble.png",pool:5,anchor:[.5,0]},{id:"intro-top-edge",url:"intro-slap-happy/top-edge.png",pool:2,x:512,y:0,anchor:[.5,.5]},{id:"intro-left-edge",url:"intro-slap-happy/left-edge.png",pool:2,x:0,y:0,anchor:[.5,.5]},{id:"intro-meow-white",url:"intro-meow-no/white.png",retina:!1},{id:"intro-meow-arm",url:"intro-meow-no/arm.png",pool:2,x:-155,y:114,anchor:[.5,0]},{id:"intro-meow-bubble-group",url:"intro-meow-no/bubbles-edge.png",pool:2,x:104,y:243,anchor:[.5,.5]},{id:"intro-meow-scene-2",children:[{id:"dream-gary-holder",children:[{id:"intro-meow-gary-dream",url:"intro-meow-no/gary-dream.png",x:635,y:371,anchor:[.5,.5]},{id:"intro-meow-gary-left-eye",url:"intro-meow-no/left-eye.png",x:526,y:303,anchor:[.5,.5]},{id:"intro-meow-gary-right-eye",url:"intro-meow-no/left-eye.png",x:605,y:299,anchor:[.5,.5]},{id:"intro-meow-gary-right-cheek",url:"intro-meow-no/right-cheek.png",x:632,y:473,anchor:[.5,.5]},{id:"intro-meow-gary-left-cheek",url:"intro-meow-no/left-cheek.png",x:527,y:472,anchor:[.5,.5]}]}]},{id:"intro-meow-scene-3",children:[{id:"intro-meow-gary-run",url:"intro-meow-no/running-gary.png",x:250,y:354,anchor:[.5,.5]}]}],"meow-no-assets":[{id:"meow-no-bg-element",url:"meow-no/bg-element-01.png"},{id:"meow-no-blank-input",url:"meow-no/blank-input.png"},{id:"hill-road-bg",url:"meow-no/hill-road-bg.png",anchor:[0,1],pool:2},{id:"hill-road-bg-green-line",url:"meow-no/hill-road-bg-green-line.png",pool:2},{id:"character-holder",children:[{id:"bubble-shield",url:"meow-no/bubble-shield.png",anchor:[.5,.5]},{id:"bubble-shield-starburst",url:"meow-no/shield-starburst-bg.png",anchor:[.5,.5]}]},{id:"meow-no-item-avoid",url:"meow-no/meow-no-item-avoid.png",anchor:[.5,.5],x:-100,pool:20},{id:"meow-no-item-pickup",url:"meow-no/meow-no-item-pickup.png",anchor:[.5,.5],x:-100,pool:20},{id:"meow-no-item-avoid-1",url:"meow-no/meow-no-item-avoid-1.png",anchor:[.5,.5],x:-100,pool:10},{id:"meow-no-item-avoid-2",url:"meow-no/meow-no-item-avoid-2.png",anchor:[.5,.5],x:-100,pool:10},{id:"meow-no-item-avoid-3",url:"meow-no/meow-no-item-avoid-3.png",anchor:[.5,.5],x:-100,pool:10},{id:"meow-no-item-avoid-4",url:"meow-no/meow-no-item-avoid-4.png",anchor:[.5,.5],x:-100,pool:10},{id:"scenery-house-01",url:"meow-no/scenery-house-01.png",anchor:[.5,1],pool:20},{id:"scenery-house-02",url:"meow-no/scenery-house-02.png",anchor:[.5,1],pool:20},{id:"scenery-house-03",url:"meow-no/scenery-house-03.png",anchor:[.5,1],pool:20},{id:"scenery-house-04",url:"meow-no/scenery-house-04.png",anchor:[.5,1],pool:20},{id:"scenery-house-05",url:"meow-no/scenery-house-05.png",anchor:[.5,1],pool:20},{id:"scenery-house-06",url:"meow-no/scenery-house-06.png",anchor:[.5,1],pool:20},{id:"scenery-house-07",url:"meow-no/scenery-house-07.png",anchor:[.5,1],pool:20},{id:"meow-no-container",children:[]},{id:"meow-no-outer-container",children:[]},{id:"beserker-button",url:"meow-no/beserker-button.png",anchor:[.5,.5]},{id:"power-up-button",url:"meow-no/power-up-button.png",anchor:[.5,.5]},{id:"sky",url:"meow-no/sky.png"},{id:"road-side-element-1",url:"meow-no/roadside-element-1.png",pool:40,anchor:[.5,.5]},{id:"road-side-element-2",url:"meow-no/roadside-element-2.png",pool:40,anchor:[.5,.5]},{id:"road-side-element-3",url:"meow-no/roadside-element-3.png",pool:40,anchor:[.5,.5]},{id:"road-side-element-4",url:"meow-no/roadside-element-4.png",pool:40,anchor:[.5,.5]},{id:"road-side-element-5",url:"meow-no/roadside-element-5.png",pool:40,anchor:[.5,.5]},{id:"spongebob-holder",children:[]},{id:"spongebob-arm-holder",children:[],pool:2},{id:"spongebob-arm-top",url:"meow-no/spongebob-arm-top.png",anchor:[.12,.28],pool:2},{id:"spongebob-arm-bottom",url:"meow-no/spongebob-arm-bottom.png",anchor:[.8,.15],pool:2},{id:"spongebob-face",url:"meow-no/spongebob-face.png",anchor:[.5,.5]},{id:"spongebob-pants",url:"meow-no/spongebob-pants.png",anchor:[.5,.5]},{id:"spongebob-bubbles-fg",url:"meow-no/spongebob-bubbles-fg.png",anchor:[.5,.5]},{id:"spongebob-bubbles-bg",url:"meow-no/spongebob-bubbles-bg.png",anchor:[.5,.5]},{id:"spongebob-bubbles-road",url:"meow-no/spongebob-bubbles-road.png",anchor:[.5,.5]},{id:"bubble-particle",url:"meow-no/bubble-particle.png",anchor:[.5,.5],pool:30},{id:"bubble-particle-holder",children:[]},{id:"gary-holder",children:[]},{id:"gary-body-left-1",url:"meow-no/gary-body-left-1.png",anchor:[.5,.5]},{id:"gary-body-left-2",url:"meow-no/gary-body-left-2.png",anchor:[.5,.5]},{id:"gary-body-left-3",url:"meow-no/gary-body-left-3.png",anchor:[.5,.5]},{id:"gary-body-middle-1",url:"meow-no/gary-body-middle-1.png",anchor:[.5,.5]},{id:"gary-body-middle-2",url:"meow-no/gary-body-middle-2.png",anchor:[.5,.5]},{id:"gary-body-middle-3",url:"meow-no/gary-body-middle-3.png",anchor:[.5,.5]},{id:"gary-body-right-1",url:"meow-no/gary-body-right-1.png",anchor:[.5,.5]},{id:"gary-body-right-2",url:"meow-no/gary-body-right-2.png",anchor:[.5,.5]},{id:"gary-body-right-3",url:"meow-no/gary-body-right-3.png",anchor:[.5,.5]},{id:"gary-electricity-1",url:"meow-no/gary-electricity-1.png",anchor:[.5,.5],pool:2},{id:"gary-electricity-2",url:"meow-no/gary-electricity-2.png",anchor:[.5,.5],pool:2},{id:"gary-electricity-3",url:"meow-no/gary-electricity-3.png",anchor:[.5,.5],pool:2},{id:"gary-electricity-4",url:"meow-no/gary-electricity-4.png",anchor:[.5,.5],pool:2},{id:"eye-stalk-holder",children:[],pool:2},{id:"gary-eye-stalk",url:"meow-no/gary-eye-stalk.png",anchor:[.5,.9],pool:2},{id:"gary-eye-pupil",url:"meow-no/gary-eye-pupil.png",anchor:[.5,.5],pool:2},{id:"gary-eye-lid",url:"meow-no/gary-eye-lid.png",anchor:[.5,.5],pool:2},{id:"sky-flower-1",url:"meow-no/sky-flower-1.png",anchor:[.5,.5]},{id:"sky-flower-2",url:"meow-no/sky-flower-2.png",anchor:[.5,.5]},{id:"sky-flower-3",url:"meow-no/sky-flower-3.png",anchor:[.5,.5]},{id:"sky-flower-4",url:"meow-no/sky-flower-4.png",anchor:[.5,.5]},{id:"meow-no-score-holder",children:[]},{id:"meow-no-score-bubble",url:"meow-no/score-bubble.png",anchor:[.5,.5]},{id:"pause-character",url:"meow-no/pause-character-gary.png",
anchor:[.5,1]},{id:"spongebob-font",dir:"spongebob-font",url:"spongebob-font.png",fontname:"spongebob-font",fontdata:"spongebob-font.xml",type:"bitmaptext"},{id:"meow-no-tutorial-overlay",children:[{id:"tutorial-overlay-bg",url:"meow-no/tutorial-overlay-bg.png"},{id:"tutorial-element-gary",url:"meow-no/tutorial-element-gary.png",anchor:[.5,0],x:512},{id:"tutorial-overlay-collect",url:"meow-no/tutorial-element-collect.png",x:20},{id:"tutorial-overlay-avoid",url:"meow-no/tutorial-element-avoid.png",x:80,y:120},{id:"tutorial-overlay-click-to-move",url:"meow-no/tutorial-element-click-to-move.png",anchor:[.5,.5],x:512,y:565,platformspecific:"desktop"},{id:"tutorial-overlay-tap-to-move",url:"meow-no/tutorial-element-tap-to-move.png",anchor:[.5,.5],x:512,y:565,platformspecific:"mobile"},{id:"tutorial-overlay-keys",url:"meow-no/tutorial-element-keys.png",anchor:[1,0],x:1024,y:50,platformspecific:"desktop"},{id:"tutorial-overlay-cursor-1",url:"meow-no/tutorial-element-cursor.png",anchor:[.5,.5],x:290,y:450,platformspecific:"desktop"},{id:"tutorial-overlay-cursor-2",url:"meow-no/tutorial-element-cursor.png",anchor:[.5,.5],x:734,y:450,platformspecific:"desktop"},{id:"tutorial-overlay-hand-1",url:"meow-no/tutorial-element-hand-facing-left.png",anchor:[.5,.5],x:764,y:450,platformspecific:"mobile"},{id:"tutorial-overlay-hand-2",url:"meow-no/tutorial-element-hand-facing-right.png",anchor:[.5,.5],x:230,y:450,platformspecific:"mobile"}]},{id:"meow-no-cross-currency-overlay",children:[{id:"tutorial-overlay-bg",url:"meow-no/tutorial-overlay-bg.png"},{id:"tutorial-coin-title-pp",url:"meow-no/tutorial-coin-title-mn.png",anchor:[.5,.5],x:512,y:80},{id:"tutorial-coin-sparkle",url:"meow-no/tutorial-coin-sparkle.png",anchor:[.5,.5],x:250,y:350},{id:"tutorial-coin",url:"meow-no/tutorial-coin.png",anchor:[.5,.5],x:250,y:350},{id:"tutorial-coin-image-pp",url:"meow-no/tutorial-coin-image-mn.png",anchor:[.5,.5],x:700,y:350}]},{id:"gameover-bg",url:"intro-meow-no/bg.jpg",anchor:[0,0]},{id:"gameover-cloud",url:"intro-glide-to-glory/cloud.png",pool:4,x:0,y:0,anchor:[.5,.5]},{id:"gameover-cover-holder",children:[]},{id:"gameover-bowl",url:"intro-meow-no/bowl.png",x:680,y:550,anchor:[.5,.5]},{id:"gameover-gary",children:[{id:"gameover-gary-body",url:"gameover-meow-no/gary-body.png",x:180,y:230},{id:"gameover-gary-lid2",url:"gameover-meow-no/lid2.png",x:445,y:305},{id:"gameover-gary-lid1",url:"gameover-meow-no/lid1.png",x:445,y:250}]},{id:"gameover-cover-holder",children:[]},{id:"gameover-title",url:"gameover-meow-no/title.png",x:522,y:77,anchor:[.5,.5]},{id:"gameover-score",url:"gameover-meow-no/score.png",x:153,y:369,anchor:[.5,.5]},{id:"gameover-earned",url:"gameover-meow-no/earned.png",x:818,y:262,anchor:[.5,.5]},{id:"gameover-coin",url:"gameover-meow-no/coin-large.png",x:802,y:319,anchor:[.5,.5]},{id:"gameover-burst",url:"gameover-meow-no/burst.png",pool:15,anchor:[.5,.5]},{id:"motion-line-holder",children:[],pool:6},{id:"motion-line",url:"meow-no/motion-line.png",anchor:[.5,.5],pool:60}],"intro-glide-to-glory-assets":[{id:"intro-glide-sand",url:"intro-glide-to-glory/q-sand.jpg",pool:4,x:0,y:0,anchor:[0,0]},{id:"intro-glide-bed",url:"intro-glide-to-glory/bed.png",pool:2,x:0,y:62,anchor:[0,0]},{id:"intro-glide-hand",url:"intro-glide-to-glory/plankton-hand.png",pool:2,x:680,y:469,anchor:[0,0]},{id:"intro-plankton",url:"intro-glide-to-glory/plankton.png",x:0,y:0,anchor:[.5,.5]},{id:"intro-glide-cover",url:"intro-glide-to-glory/cover.png",pool:2,x:0,y:485,anchor:[0,0]},{id:"intro-cloud",url:"intro-glide-to-glory/cloud.png",pool:4,x:0,y:0,anchor:[.5,.5]},{id:"cover-holder",children:[]},{id:"intro-frame-2",children:[{id:"intro-plankton-bottle",url:"intro-glide-to-glory/plankton-bottle.png",x:403,y:264,anchor:[0,0]},{id:"intro-krabs",url:"intro-glide-to-glory/krabs.png",x:-64,y:0,anchor:[0,0]}]},{id:"intro-plankton-flying",url:"intro-glide-to-glory/plankton-flying.png",pool:2,x:0,y:0,anchor:[0,0]},{id:"intro-frame-3",children:[{id:"intro-krabs-angry",url:"intro-glide-to-glory/krabs-angry.png",x:62,y:388,anchor:[0,0]}]},{id:"intro-vent-front",url:"intro-glide-to-glory/vent-front.png",x:0,y:0,anchor:[0,0]},{id:"intro-frame-4",children:[{id:"intro-vent-back",url:"intro-glide-to-glory/vent-back.png",x:121,y:295,anchor:[0,0]}]},{id:"intro-top-edge",url:"intro-slap-happy/top-edge.png",pool:2,x:512,y:0,anchor:[.5,.5]},{id:"intro-left-edge",url:"intro-slap-happy/left-edge.png",pool:2,x:0,y:0,anchor:[.5,.5]}],"title-glide-to-glory-assets":[{id:"title-gg-background",url:"title-glide-to-glory/background.png",anchor:[.5,.5]},{id:"title-gg-balloon1",url:"title-glide-to-glory/balloon1.png",x:730,y:90,anchor:[.5,.5]},{id:"title-gg-balloon2",url:"title-glide-to-glory/balloon2.png",x:770,y:100,anchor:[.5,.5]},{id:"title-gg-beam",url:"title-glide-to-glory/beam.png",x:512,y:210,anchor:[.5,.5]},{id:"glide-brand-logo",url:"title-slap-happy/logo.png",x:215,y:125,anchor:[.5,.5]},{id:"title-gg-d-glide",url:"title-glide-to-glory/d-glide.png",x:580,y:170,anchor:[.5,.5]},{id:"title-gg-e-glide",url:"title-glide-to-glory/e-glide.png",x:673,y:165,anchor:[.5,.5]},{id:"title-gg-g-glide",url:"title-glide-to-glory/g-glide.png",x:385,y:150,anchor:[.5,.5]},{id:"title-gg-i-glide",url:"title-glide-to-glory/i-glide.png",x:508,y:134,anchor:[.5,.5]},{id:"title-gg-l-glide",url:"title-glide-to-glory/l-glide.png",x:480,y:165,anchor:[.5,.5]},{id:"title-gg-glory",url:"title-glide-to-glory/glory.png",x:555,y:285,anchor:[.5,.5]},{id:"plankton-container",x:0,y:0,anchor:[.5,.5],children:[{id:"title-gg-bottle-lines",url:"title-glide-to-glory/bottle-lines.png",x:40,y:480,anchor:[.5,.5]},{id:"title-gg-plankton-foot",url:"title-glide-to-glory/plankton-foot.png",x:339,y:330,anchor:[.5,.5]},{id:"title-gg-bottle",url:"title-glide-to-glory/bottle.png",x:365,y:420,anchor:[.5,.5]},{id:"title-gg-bottle-blur",url:"title-glide-to-glory/bottle-blur.png",x:310,y:410,anchor:[.5,.5]},{id:"title-gg-plankton-blur",url:"title-glide-to-glory/plankton-blur.png",x:200,y:215,anchor:[.5,.5]},{id:"title-gg-plankton-lines",url:"title-glide-to-glory/plankton-lines.png",x:143,y:282,anchor:[.5,.5]},{id:"title-gg-plankton",url:"title-glide-to-glory/plankton.png",x:211,y:214,anchor:[.5,.5]}]},{id:"title-gg-starburst1",url:"title-glide-to-glory/starburst1.png",pool:2,x:522,y:260,anchor:[.5,.5]},{id:"title-gg-o-to",url:"title-glide-to-glory/o-to.png",x:770,y:175,anchor:[.5,.5]},{id:"title-gg-t-to",url:"title-glide-to-glory/t-to.png",x:730,y:165,anchor:[.5,.5]}],"glide-to-glory-assets":[{id:"bg-element-01",url:"glide-to-glory/bg-element-01.png"},{id:"glide-blank-input",url:"glide-to-glory/blank-input.png"},{id:"balloon-body-1",pool:10,url:"glide-to-glory/balloon-body-1.png",anchor:[.5,.5]},{id:"ceiling",pool:2,url:"glide-to-glory/ceiling.png"},{id:"string-container",pool:10,children:[]},{id:"string-graphic",url:"glide-to-glory/balloon-string.png",pool:10,anchor:[.5,1]},{id:"pop-balloon-particle-0-a",url:"glide-to-glory/balloon-pop-particle-1.png",anchor:[.5,.5],pool:5},{id:"pop-balloon-particle-0-b",url:"glide-to-glory/balloon-pop-particle-2.png",anchor:[.5,.5],pool:5},{id:"pop-balloon-particle-1-a",url:"glide-to-glory/balloon-pop-particle-1.png",anchor:[.5,.5],pool:5},{id:"pop-balloon-particle-1-b",url:"glide-to-glory/balloon-pop-particle-2.png",anchor:[.5,.5],pool:5},{id:"pop-balloon-particle-2-a",url:"glide-to-glory/balloon-pop-particle-1.png",anchor:[.5,.5],pool:5},{id:"pop-balloon-particle-2-b",url:"glide-to-glory/balloon-pop-particle-2.png",anchor:[.5,.5],pool:5},{id:"pop-balloon-particle-3-a",url:"glide-to-glory/balloon-pop-particle-1.png",anchor:[.5,.5],pool:5},{id:"pop-balloon-particle-3-b",url:"glide-to-glory/balloon-pop-particle-2.png",anchor:[.5,.5],pool:5},{id:"pop-balloon-particle-4-a",url:"glide-to-glory/balloon-pop-particle-1.png",anchor:[.5,.5],pool:5},{id:"pop-balloon-particle-4-b",url:"glide-to-glory/balloon-pop-particle-2.png",anchor:[.5,.5],pool:5},{id:"pop-balloon-particle-holder",children:[],pool:5},{id:"level-block-element-holder-back",children:[],pool:200},{id:"level-block-element-holder",children:[],pool:200},{id:"level-element-1-unit",url:"glide-to-glory/level-element-1-unit.png",pool:20},{id:"level-element-2-unit",url:"glide-to-glory/level-element-2-unit.png",pool:20},{id:"level-element-rectangle",url:"glide-to-glory/level-element-rectangle.png",pool:40},{id:"level-element-rectangle-top-slant-down",url:"glide-to-glory/level-element-rectangle-top-slant-down.png",pool:40},{id:"level-element-rectangle-top-slant-up",url:"glide-to-glory/level-element-rectangle-top-slant-up.png",pool:40},{id:"level-element-rectangle-bottom-slant-down",url:"glide-to-glory/level-element-rectangle-bottom-slant-down.png",pool:40},{id:"level-element-rectangle-bottom-slant-up",url:"glide-to-glory/level-element-rectangle-bottom-slant-up.png",pool:40},{id:"level-element-rectangle-up-spikes",url:"glide-to-glory/level-element-rectangle-up-spikes.png",pool:40},{id:"level-element-rectangle-down-spikes",url:"glide-to-glory/level-element-rectangle-down-spikes.png",pool:40},{id:"level-element-powerup",url:"glide-to-glory/level-element-powerup.png",pool:40,anchor:[.5,.5]},{id:"level-element-powerup-blank",url:"glide-to-glory/blank.png",pool:40,anchor:[.5,.5]},{id:"level-element-powerup-starburst-bg",url:"glide-to-glory/level-element-powerup-starburst-bg.png",pool:40,anchor:[.5,.5]},{id:"level-element-powerup-bg",url:"glide-to-glory/level-element-powerup-yellow-bg.png",pool:40,anchor:[.5,.5]},{id:"level-element-powerup-dots",url:"glide-to-glory/level-element-powerup-yellow-dots.png",pool:40,anchor:[.5,.5]},{id:"level-element-powerup-holder",pool:40,children:[]},{id:"wind-particle",url:"glide-to-glory/wind-particle.png",anchor:[.5,.5],pool:200},{id:"gravity-particle",url:"glide-to-glory/gravity-particle.png",anchor:[.5,.5],pool:200},{id:"wind-up-sign",url:"glide-to-glory/wind-up-sign.png",anchor:[.5,.5],pool:20},{id:"wind-down-sign",url:"glide-to-glory/wind-down-sign.png",anchor:[.5,.5],pool:20},{id:"anti-gravity-sign",url:"glide-to-glory/anti-gravity-sign.png",anchor:[.5,.5],pool:20},{id:"level-panel-holder",children:[]},{id:"level-panel-holder-rear",children:[]},{id:"repair-bottle-particle-holder",children:[]},{id:"repair-bottle-particle",url:"glide-to-glory/repair-bottle-sparkle.png",anchor:[.5,.5],pool:10},{id:"repair-bottle-circles",url:"glide-to-glory/repair-bottle-circles.png",anchor:[.5,.5]},{id:"plankton-vehicle-holder",pivot:[65,10],children:[{id:"bottle-bg",url:"glide-to-glory/plankton-bottle-bg.png"},{id:"bottle-note",url:"glide-to-glory/plankton-bottle-note.png",anchor:[.5,.5],x:45,y:25},{id:"bottle-state-3",url:"glide-to-glory/plankton-bottle-fg-state-3.png"},{id:"bottle-state-2",url:"glide-to-glory/plankton-bottle-fg-state-2.png"},{id:"bottle-state-1",url:"glide-to-glory/plankton-bottle-fg-state-1.png"},{id:"plankton-rider",x:50,children:[{id:"plankton-antenna-rear",url:"glide-to-glory/plankton-bottle-antenna-rear.png",anchor:[.1,.67],x:20,y:-25},{id:"plankton-arm-rear",url:"glide-to-glory/plankton-bottle-arm-rear.png",anchor:[.2,.5],x:15,y:-15},{id:"plankton-body",url:"glide-to-glory/plankton-bottle-body.png",anchor:[.3,.7]},{id:"plankton-antenna-front",url:"glide-to-glory/plankton-bottle-antenna-front.png",anchor:[.13,.8],x:16,y:-30},{id:"plankton-arm-front",url:"glide-to-glory/plankton-bottle-arm-front.png",anchor:[.8,.5],x:-3,y:-15},{id:"plankton-face-1",url:"glide-to-glory/plankton-bottle-face-1.png",x:-10,y:-30},{id:"plankton-face-2",url:"glide-to-glory/plankton-bottle-face-2.png",x:-10,y:-30}]},{id:"plankton-shield",url:"glide-to-glory/plankton-shield.png",anchor:[.5,.5],x:65,y:25},{id:"plankton-shield-lines",url:"glide-to-glory/plankton-shield-lines.png",anchor:[.5,.5],x:65,y:25}]},{id:"glass-particle-holder",children:[]},{id:"glass-particle-1",url:"glide-to-glory/glass-particle-1.png",anchor:[.5,.5],pool:3},{id:"glass-particle-2",url:"glide-to-glory/glass-particle-2.png",anchor:[.5,.5],pool:3},{id:"glass-particle-3",url:"glide-to-glory/glass-particle-3.png",anchor:[.5,.5],pool:3},{id:"new-bottle-button",url:"glide-to-glory/new-bottle-button.png",anchor:[.5,.5]},{id:"power-up-button",url:"glide-to-glory/power-up-button.png",anchor:[.5,.5]},{id:"rear-panel-1",url:"glide-to-glory/rear-panel-01.png",pool:30},{id:"rear-panel-2",url:"glide-to-glory/rear-panel-02.png",pool:30},{id:"rear-panel-3",url:"glide-to-glory/rear-panel-03.png",pool:30},{id:"rear-panel-4",url:"glide-to-glory/rear-panel-04.png",pool:30},{id:"rear-panel-5",url:"glide-to-glory/rear-panel-05.png",pool:30},{id:"start-panels-holder",children:[{id:"rear-panel-1",url:"glide-to-glory/rear-panel-01.png",x:0},{id:"rear-panel-2",url:"glide-to-glory/rear-panel-04.png",x:341},{id:"rear-panel-3",url:"glide-to-glory/rear-panel-03.png",x:682}]},{id:"scrolling-bg-holder",children:[]},{id:"bg-tile",url:"glide-to-glory/bg-tile.jpg",pool:6},{id:"balloon-pop-graphic",url:"glide-to-glory/balloon-pop-graphic.png",anchor:[.5,.5],pool:5},{id:"glide-to-glory-score-holder",children:[]},{id:"glide-to-glory-score-balloon",url:"glide-to-glory/score-balloon-bg.png",anchor:[.5,.5]},{id:"pause-character",url:"glide-to-glory/pause-character-plankton.png",anchor:[.5,1]},{id:"spongebob-font",dir:"spongebob-font",url:"spongebob-font.png",fontname:"spongebob-font",fontdata:"spongebob-font.xml",type:"bitmaptext"},{id:"glide-to-glory-tutorial-overlay",children:[{id:"tutorial-overlay-bg",url:"glide-to-glory/tutorial-overlay-bg.png"},{id:"tutorial-overlay-add-balloon",url:"glide-to-glory/tutorial-element-add-balloon.png",anchor:[0,.5],y:150},{id:"tutorial-overlay-remove-balloon",url:"glide-to-glory/tutorial-element-remove-balloon.png",anchor:[0,.5],y:470},{id:"tutorial-element-middle-line",url:"glide-to-glory/tutorial-element-middle-line.png",anchor:[0,.5],y:312},{id:"tutorial-element-keys",url:"glide-to-glory/tutorial-element-keys.png",anchor:[1,0],x:1024,platformspecific:"desktop"},{id:"tutorial-element-cursor-1",url:"glide-to-glory/tutorial-element-cursor.png",anchor:[.5,.5],x:760,y:200,platformspecific:"desktop"},{id:"tutorial-element-hand-1",url:"glide-to-glory/tutorial-element-hand-facing-left.png",anchor:[.5,.5],x:800,y:200,platformspecific:"mobile"},{id:"tutorial-element-cursor-2",url:"glide-to-glory/tutorial-element-cursor.png",anchor:[.5,.5],x:760,y:470,platformspecific:"desktop"},{id:"tutorial-element-hand-2",url:"glide-to-glory/tutorial-element-hand-facing-left.png",anchor:[.5,.5],x:800,y:470,platformspecific:"mobile"},{id:"tutorial-element-bottle-up",url:"glide-to-glory/tutorial-element-bottle-up.png",anchor:[.5,0],x:532,y:0},{id:"tutorial-element-bottle-down",url:"glide-to-glory/tutorial-element-bottle-down.png",anchor:[.5,1],x:532,y:620}]},{id:"glide-to-glory-cross-currency-overlay",children:[{id:"tutorial-overlay-bg",url:"glide-to-glory/tutorial-overlay-bg.png"},{id:"tutorial-coin-title-gtg",url:"glide-to-glory/tutorial-coin-title-gtg.png",anchor:[.5,.5],x:512,y:80},{id:"tutorial-coin-sparkle",url:"glide-to-glory/tutorial-coin-sparkle.png",anchor:[.5,.5],x:250,y:350},{id:"tutorial-coin",url:"glide-to-glory/tutorial-coin.png",anchor:[.5,.5],x:250,y:350},{id:"tutorial-coin-image-gtg",url:"glide-to-glory/tutorial-coin-image-gtg.png",anchor:[.5,.5],x:700,y:350}]},{id:"gameover-sand",url:"intro-glide-to-glory/q-sand.jpg",pool:4,x:0,y:0,anchor:[0,0]},{id:"gameover-bed",url:"intro-glide-to-glory/bed.png",pool:2,x:0,y:62,anchor:[0,0]},{id:"gameover-hand",url:"intro-glide-to-glory/plankton-hand.png",pool:2,x:680,y:469,anchor:[0,0]},{id:"gameover-cover",url:"intro-glide-to-glory/cover.png",pool:2,x:0,y:485,anchor:[0,0]},{id:"gameover-cloud",url:"intro-glide-to-glory/cloud.png",pool:4,x:0,y:0,anchor:[.5,.5]},{id:"gameover-cover-holder",children:[]},{id:"gameover-plankton",children:[{id:"gameover-plankton-eyes",url:"gameover-glide-to-glory/eye.png",x:365,y:334},{id:"gameover-plankton-lids",url:"gameover-glide-to-glory/lid.png",x:380,y:348},{id:"gameover-plankton-body",url:"gameover-glide-to-glory/plankton-body.png",x:200,y:0}]},{id:"gameover-cover-holder",children:[]},{id:"gameover-title",url:"gameover-glide-to-glory/title.png",x:522,y:77,anchor:[.5,.5]},{id:"gameover-score",url:"gameover-glide-to-glory/score.png",x:153,y:369,anchor:[.5,.5]},{id:"gameover-earned",url:"gameover-glide-to-glory/earned.png",x:818,y:262,anchor:[.5,.5]},{id:"gameover-coin",url:"gameover-glide-to-glory/coin-large.png",x:802,y:319,anchor:[.5,.5]},{id:"gameover-burst",url:"gameover-glide-to-glory/burst.png",pool:15,anchor:[.5,.5]}],"intro-slap-happy-assets":[{id:"intro-slap-sand",url:"intro-slap-happy/q-sand.jpg",pool:4,x:0,y:0,anchor:[0,0]},{id:"intro-slap-bed",url:"intro-slap-happy/bed.png",pool:2,x:0,y:62,anchor:[0,0]},{id:"intro-slap-hand",url:"intro-slap-happy/squidward-hand.png",pool:2,x:680,y:469,anchor:[0,0]},{id:"intro-slap-squidward",url:"intro-slap-happy/squidward.png",x:0,y:0,anchor:[.5,.5]},{id:"intro-slap-cover",url:"intro-slap-happy/cover.png",pool:2,x:0,y:485,anchor:[0,0]},{id:"intro-slap-cloud",url:"intro-slap-happy/cloud.png",pool:4,x:0,y:0,anchor:[.5,.5]},{id:"cover-holder",children:[]},{id:"door-frame-left",url:"intro-slap-happy/frame-left.png",pool:2,x:0,y:0},{id:"door-frame-right",url:"intro-slap-happy/frame-right.png",pool:2,x:0,y:0},{id:"intro-slap-spongebob",url:"intro-slap-happy/spongebob.png",pool:10,x:0,y:0},{id:"intro-slap-frame-2",children:[{id:"door-container",x:550,children:[{id:"door-closed",url:"intro-slap-happy/door-closed.png",x:53,y:247}]},{id:"intro-angry-squidward",children:[{id:"squidward-left-arm",url:"intro-slap-happy/squidward-left-arm.png",x:196,y:547},{id:"squidward-body",url:"intro-slap-happy/squidward-body.png",x:25,y:481},{id:"squidward-head",url:"intro-slap-happy/squidward-head.png",x:316,y:405,anchor:[.5,.5]},{id:"squidward-right-arm",url:"intro-slap-happy/squidward-right-arm.png",x:208,y:530,anchor:[1,.6]}]}]},{id:"intro-slap-white",url:"intro-slap-happy/white.png",x:330,y:0},{id:"intro-slap-frame-3",children:[{id:"door-container2",x:550,children:[{id:"door-open",url:"intro-slap-happy/door-open.png",x:53,y:247},{id:"scared-squidward",url:"intro-slap-happy/squidward-scared.png",x:-303,y:287}]}]},{id:"intro-top-edge",url:"intro-slap-happy/top-edge.png",pool:2,x:512,y:0,anchor:[.5,.5]},{id:"intro-left-edge",url:"intro-slap-happy/left-edge.png",pool:2,x:0,y:0,anchor:[.5,.5]}],"title-slap-happy-assets":[{id:"title-background",url:"title-slap-happy/background.png",anchor:[.5,.5]},{id:"title-slap-s",url:"title-slap-happy/slap-s.png",x:400,y:130,anchor:[.5,.5]},{id:"title-slap-l",url:"title-slap-happy/slap-l.png",x:500,y:140,anchor:[.5,.5]},{id:"title-slap-a",url:"title-slap-happy/slap-a.png",x:595,y:130,anchor:[.5,.5]},{id:"title-slap-p",url:"title-slap-happy/slap-p.png",x:700,y:135,anchor:[.5,.5]},{id:"title-shock-mark",url:"title-slap-happy/shock-mark.png",pool:3,anchor:[.5,.5]},{id:"title-pop-mark",url:"title-slap-happy/pop-mark.png",pool:5,anchor:[.5,.5]},{id:"title-hit-mark",url:"title-slap-happy/hit-mark.png",pool:15,anchor:[.5,.5]},{id:"title-long-mark",url:"title-slap-happy/long-mark.png",pool:8,anchor:[.5,.5]},{id:"title-slap-title",url:"title-slap-happy/slap-title.png",x:555,y:285,anchor:[.5,.5]},{id:"title-flower",url:"title-slap-happy/flower.png",pool:4,anchor:[.5,.5]},{id:"title-right-arm",url:"title-slap-happy/right-arm.png",x:1e3,y:640,anchor:[.5,.5]},{id:"title-left-arm",url:"title-slap-happy/left-arm.png",x:100,y:675,anchor:[.5,.5]},{id:"title-left-bob",url:"title-slap-happy/left-bob.png",x:115,y:480,anchor:[.5,.5]},{id:"title-right-bob",url:"title-slap-happy/right-bob.png",x:935,y:480,anchor:[.5,.5]},{id:"title-front-bob",url:"title-slap-happy/front-bob.png",x:525,y:580,anchor:[.5,.5]},{id:"title-back-bob",url:"title-slap-happy/back-bob.png",x:810,y:600,anchor:[.5,.5]},{id:"title-back-bob2",url:"title-slap-happy/back-bob2.png",x:270,y:600,anchor:[.5,.5]},{id:"slap-brand-logo",url:"title-slap-happy/logo.png",x:215,y:125,anchor:[.5,.5]}],"slap-happy-assets":[{id:"slap-happy-blank-input",url:"slap-happy/blank-input.png"},{id:"slap-happy-bg-image",url:"slap-happy/background-strip.png"},{id:"slap-happy-flower",url:"slap-happy/sky-flower.png",pool:3},{id:"slap-happy-bg-overlay",url:"slap-happy/half-overlay.png",pool:2},{id:"slap-happy-bg-element-01",url:"slap-happy/bg-element-01.png"},{id:"crowd-spongebob",url:"slap-happy/crowd-spongebob-01.png",pool:21,anchor:[.5,.5]},{id:"tentacle-holder-main",children:[{id:"tentacle-holder-left",children:[{id:"tentacle-electricity-1",url:"slap-happy/tentacle-electricity-1.png",anchor:[.5,1]},{id:"tentacle-electricity-2",url:"slap-happy/tentacle-electricity-2.png",anchor:[.5,1]},{id:"tentacle-neutral",url:"slap-happy/tentacle-neutral.png",anchor:[.5,1]},{id:"tentacle-block",url:"slap-happy/tentacle-block.png",anchor:[.5,1]},{id:"tentacle-slap",url:"slap-happy/tentacle-slap.png",anchor:[.5,1]},{id:"tentacle-uppercut",url:"slap-happy/tentacle-uppercut.png",anchor:[.5,1]},{id:"tentacle-electricity-3",url:"slap-happy/tentacle-electricity-3.png",anchor:[.5,1]},{id:"tentacle-electricity-4",url:"slap-happy/tentacle-electricity-4.png",anchor:[.5,1]}]},{id:"tentacle-holder-right",children:[{id:"tentacle-electricity-1",url:"slap-happy/tentacle-electricity-1.png",anchor:[.5,1]},{id:"tentacle-electricity-2",url:"slap-happy/tentacle-electricity-2.png",anchor:[.5,1]},{id:"tentacle-neutral",url:"slap-happy/tentacle-neutral.png",anchor:[.5,1]},{id:"tentacle-block",url:"slap-happy/tentacle-block.png",anchor:[.5,1]},{id:"tentacle-slap",url:"slap-happy/tentacle-slap.png",anchor:[.5,1]},{id:"tentacle-uppercut",url:"slap-happy/tentacle-uppercut.png",anchor:[.5,1]},{id:"tentacle-electricity-3",url:"slap-happy/tentacle-electricity-3.png",anchor:[.5,1]},{id:"tentacle-electricity-4",url:"slap-happy/tentacle-electricity-4.png",anchor:[.5,1]}]}]},{id:"enemy-character-holder",children:[],pool:4},{id:"enemy-character-arm-holder",children:[],pool:8},{id:"enemy-spongebob-neutral-arm",url:"slap-happy/enemy-spongebob-neutral-arm.png",pool:10},{id:"impact-shape",url:"slap-happy/impact-shape.png",anchor:[.5,.5],pool:3},{id:"enemy-spongebob-attacking-arm",url:"slap-happy/enemy-spongebob-attacking-arm.png",pool:10},{id:"enemy-spongebob-grabbing-arm",url:"slap-happy/enemy-spongebob-grabbing-arm.png",pool:10},{id:"enemy-spongebob-neutral",url:"slap-happy/enemy-spongebob-neutral.png",anchor:[.5,1],pool:4},{id:"enemy-spongebob-smacked-left",url:"slap-happy/enemy-spongebob-smacked-left.png",anchor:[.5,1],pool:4},{id:"enemy-spongebob-smacked-right",url:"slap-happy/enemy-spongebob-smacked-right.png",anchor:[.5,1],pool:4},{id:"enemy-spongebob-reeling",url:"slap-happy/enemy-spongebob-reeling.png",anchor:[.5,1],pool:4},{id:"enemy-spongebob-grabbing",url:"slap-happy/enemy-spongebob-grabbing.png",anchor:[.5,1],pool:4},{id:"enemy-spongebob-mad-eye",url:"slap-happy/mad-eye.png",anchor:[.5,.5],pool:4},{id:"enemy-spongebob-mad-eye-right",url:"slap-happy/mad-eye-right.png",anchor:[.5,.5],pool:4},{id:"enemy-spongebob-pre-tell",url:"slap-happy/enemy-spongebob-pre-tell.png",anchor:[.5,1],pool:4},{id:"enemy-spongebob-knocked-out",url:"slap-happy/enemy-spongebob-knocked-out.png",anchor:[.5,.5],pool:4},{id:"enemy-spongebob-landing",url:"slap-happy/enemy-spongebob-landing.png",anchor:[.5,.5],pool:4},{id:"enemy-health-meter-holder",children:[{id:"enemy-health-bar-bg",url:"slap-happy/enemy-health-meter-bg.png"},{id:"enemy-health-bar-fill",url:"slap-happy/enemy-health-meter-fill.png"}]},{id:"player-health-meter-holder",children:[{id:"player-health-bar-bg",url:"slap-happy/player-health-meter-bg.png",anchor:[0,1]},{id:"player-health-bar-fill",url:"slap-happy/player-health-meter-fill.png",anchor:[0,1]},{id:"squidward-health-face",url:"slap-happy/squidward-face-game.png",anchor:[.5,1],x:400}]},{id:"gameplay-element-holder",children:[]},{id:"slap-silly-button",url:"slap-happy/slap-silly-button.png",anchor:[.5,.5]},{id:"power-up-button",url:"slap-happy/power-up-button.png",anchor:[.5,.5]},{id:"slap-happy-score-holder",children:[]},{id:"slap-happy-score-bg",url:"slap-happy/spongebob-icon.png",anchor:[.5,.5]},{id:"pause-character",url:"slap-happy/pause-character-squidward.png",anchor:[.5,1]},{id:"spongebob-font",dir:"spongebob-font",url:"spongebob-font.png",fontname:"spongebob-font",fontdata:"spongebob-font.xml",type:"bitmaptext"},{id:"slap-happy-tutorial-overlay",children:[{id:"tutorial-overlay-bg",url:"slap-happy/tutorial-overlay-bg.png"},{id:"tutorial-overlay-middle-line",url:"slap-happy/tutorial-element-middle-line.png",anchor:[.5,0],x:512},{id:"tutorial-overlay-block",url:"slap-happy/tutorial-element-block.png",x:20},{id:"tutorial-overlay-tentacle-left",url:"slap-happy/tutorial-element-tentacle-left.png",anchor:[0,1],x:10,y:625},{id:"tutorial-overlay-tentacle-right",url:"slap-happy/tutorial-element-tentacle-right.png",anchor:[1,1],x:1014,y:625},{id:"tutorial-overlay-click",url:"slap-happy/tutorial-element-click.png",anchor:[.5,.5],x:512,y:440,platformspecific:"desktop"},{id:"tutorial-overlay-tap",url:"slap-happy/tutorial-element-tap.png",anchor:[.5,.5],x:512,y:440,platformspecific:"mobile"},{id:"tutorial-overlay-keys",url:"slap-happy/tutorial-element-keys.png",anchor:[1,0],x:1024,y:20,platformspecific:"desktop"},{id:"tutorial-overlay-cursor-1",url:"slap-happy/tutorial-element-cursor.png",anchor:[.5,.5],x:400,y:250,platformspecific:"desktop"},{id:"tutorial-overlay-cursor-2",url:"slap-happy/tutorial-element-cursor.png",anchor:[.5,.5],x:624,y:250,platformspecific:"desktop"},{id:"tutorial-overlay-hand-1",url:"slap-happy/tutorial-element-hand-facing-right.png",anchor:[.5,.5],x:340,y:230,platformspecific:"mobile"},{id:"tutorial-overlay-hand-2",url:"slap-happy/tutorial-element-hand-facing-left.png",anchor:[.5,.5],x:684,y:230,platformspecific:"mobile"}]},{id:"slap-happy-cross-currency-overlay",children:[{id:"tutorial-overlay-bg",url:"slap-happy/tutorial-overlay-bg.png"},{id:"tutorial-coin-title-sh",url:"slap-happy/tutorial-coin-title-sh.png",anchor:[.5,.5],x:512,y:80},{id:"tutorial-coin-sparkle",url:"slap-happy/tutorial-coin-sparkle.png",anchor:[.5,.5],x:250,y:350},{id:"tutorial-coin",url:"slap-happy/tutorial-coin.png",anchor:[.5,.5],x:250,y:350},{id:"tutorial-coin-image-sh",url:"slap-happy/tutorial-coin-image-sh.png",anchor:[.5,.5],x:700,y:350}]},{id:"enemy-health-particle-holder",children:[]},{id:"enemy-health-particle-0",url:"slap-happy/health-particle-1.png",anchor:[.5,.5],pool:20},{id:"enemy-health-particle-1",url:"slap-happy/health-particle-2.png",anchor:[.5,.5],pool:20},{id:"enemy-health-particle-2",url:"slap-happy/health-particle-3.png",anchor:[.5,.5],pool:20},{id:"enemy-health-particle-3",url:"slap-happy/health-particle-4.png",anchor:[.5,.5],pool:20},{id:"large-health-particle-holder",children:[{id:"player-health-circle",url:"slap-happy/player-health-circle.png",anchor:[.5,.5]}]},{id:"large-health-particle-0",url:"slap-happy/large-particle-1.png",anchor:[.5,.5],pool:40},{id:"large-health-particle-1",url:"slap-happy/large-particle-2.png",anchor:[.5,.5],pool:40},{id:"large-health-particle-2",url:"slap-happy/large-particle-3.png",anchor:[.5,.5],pool:40},{id:"large-health-particle-3",url:"slap-happy/large-particle-4.png",anchor:[.5,.5],pool:40},{id:"combo-health-recharge-particle-holder",children:[]},{id:"corner-light-source",url:"slap-happy/corner-light-source.png",anchor:[.5,.5],pool:14},{id:"corner-light-holder",children:[],pool:2},{id:"stunned-animation-holder",children:[],pool:9},{id:"stunned-particle",url:"slap-happy/stunned-particle.png",anchor:[.5,.5],pool:30},{id:"gameover-cloud",url:"intro-patty-pileup/cloud.png",pool:10,x:0,y:0,anchor:[.5,.5]},{id:"gameover-sand",url:"intro-slap-happy/q-sand.jpg",pool:4,x:0,y:0,anchor:[0,0]},{id:"gameover-bed",url:"intro-slap-happy/bed.png",pool:2,x:0,y:62,anchor:[0,0]},{id:"gameover-hand",url:"intro-slap-happy/squidward-hand.png",pool:2,x:680,y:469,anchor:[0,0]},{id:"gameover-cover",url:"intro-slap-happy/cover.png",pool:2,x:0,y:485,anchor:[0,0]},{id:"gameover-squidward",children:[{id:"gameover-squidward-eyes",url:"gameover-slap-happy/eyes.png",x:430,y:340},{id:"gameover-squidward-lids",url:"gameover-slap-happy/lids.png",x:433,y:360},{id:"gameover-squidward-body",url:"gameover-slap-happy/squidward-body.png",x:200,y:156}]},{id:"gameover-cover-holder",children:[]},{id:"gameover-title",url:"gameover-slap-happy/title.png",x:522,y:77,anchor:[.5,.5]},{id:"gameover-score",url:"gameover-slap-happy/score.png",x:153,y:369,anchor:[.5,.5]},{id:"gameover-earned",url:"gameover-slap-happy/earned.png",x:818,y:262,anchor:[.5,.5]},{id:"gameover-coin",url:"gameover-slap-happy/coin-large.png",x:802,y:319,anchor:[.5,.5]},{id:"gameover-burst",url:"gameover-slap-happy/burst.png",pool:15,anchor:[.5,.5]},{id:"input-tutorial-block",url:"slap-happy/input-tutorial-block.png",anchor:[.5,.5]},{id:"input-tutorial-dont-block",url:"slap-happy/input-tutorial-dont-block.png",anchor:[.5,.5]},{id:"input-tutorial-attack",url:"slap-happy/input-tutorial-attack.png",anchor:[.5,.5]},{id:"input-tutorial-fake-attack",url:"slap-happy/input-tutorial-fake-attack.png",anchor:[.5,.5]},{id:"input-tutorial-real-attack",url:"slap-happy/input-tutorial-real-attack.png",anchor:[.5,.5]},{id:"input-tutorial-title",url:"slap-happy/input-tutorial-title.png",anchor:[.5,.5]},{id:"input-tutorial-go",url:"slap-happy/input-tutorial-go.png",anchor:[.5,.5]}],global:[{id:"blank-element",url:"global/blank.png",retina:!1},{id:"pause-screen-overlay-container",children:[{id:"pause-overlay-bg",url:"global/pause-overlay-bg.png",retina:!1}]},{id:"help-title",url:"help/help-title.png",anchor:[0,0],x:10,y:10},{id:"help-cloud",url:"help/help-title-cloud.png"},{id:"help-bg",url:"help/help-bg.png"}],"test-assets":[],"main-game-title-screen-assets":[{id:"test-element",url:"test-element.png"},{id:"background",url:"title-scene/city-full.png",anchor:[.5,0]},{id:"logo-fog",url:"title-scene/logo-fog.png",anchor:[.5,.5]},{id:"b-bottom",url:"title-scene/b-bottom.png",anchor:[.5,.5]},{id:"main-fog",url:"title-scene/fog.png",anchor:[.5,.5],retina:!1},{id:"main-brand-logo",url:"title-slap-happy/logo.png",x:185,y:125,anchor:[.5,.5]},{id:"sleepingbob-container",x:800,y:800,children:[{id:"spongebob",url:"title-scene/spongebobfull.png",anchor:[.5,.5]}]},{id:"bedtime-container",x:542,y:120,children:[{id:"i-in",url:"title-scene/i-in.png",x:165,anchor:[.5,.5]},{id:"n-in",url:"title-scene/n-in.png",x:183,y:8,anchor:[.5,.5]},{id:"bedtime-b",url:"title-scene/bedtime-b.png",x:-200,anchor:[.5,.5],pivot:[100,100]},{id:"bedtime-e",url:"title-scene/bedtime-e.png",x:-145,anchor:[.5,.5]},{id:"bedtime-t",url:"title-scene/bedtime-t.png",x:-30,y:-30,anchor:[.5,.5]},{id:"bedtime-d",url:"title-scene/bedtime-d.png",x:-90,y:-10,anchor:[.5,.5]},{id:"bedtime-i",url:"title-scene/bedtime-i.png",x:-2,y:12,anchor:[.5,.5]},{id:"bedtime-m",url:"title-scene/bedtime-m.png",x:60,y:-10,anchor:[.5,.5]},{id:"bedtime-e-end",url:"title-scene/bedtime-e-end.png",x:134,anchor:[.5,.5]}]},{id:"dream-z",url:"title-scene/floating-z.png",anchor:[.5,.5],pool:15},{id:"dream-znightmare",url:"title-scene/floating-znightmare.png",anchor:[.5,.5],pool:15}],"hub-assets":[{id:"bed-bg",url:"hub-scene/bed-bg.jpg",pool:6},{id:"top-cloud-hub",url:"hub-scene/top-cloud-hub.png",pool:4},{id:"top-cloud-small",url:"hub-scene/top-cloud-small.png",anchor:[.5,.5],pool:8},{id:"blank-input",url:"hub-scene/blank-input.png",pool:4},{id:"hub-character-plankton",url:"hub-scene/hub-character-plankton.png",anchor:[0,1],pool:2},{id:"hub-character-gary",url:"hub-scene/hub-character-gary.png",anchor:[0,1],pool:2},{id:"hub-character-squidward",url:"hub-scene/hub-character-squidward.png",anchor:[0,1],pool:2},{id:"hub-character-spongebob",url:"hub-scene/hub-character-spongebob.png",anchor:[0,1],pool:2},{id:"hub-panel-holder",children:[]},{id:"panel-1-holder",children:[]},{id:"panel-2-holder",children:[]},{id:"panel-3-holder",children:[]},{id:"panel-4-holder",children:[]},{id:"bamboo-border",url:"hub-scene/bamboo-border.png",anchor:[.5,0],pool:5},{id:"black-overlay",url:"hub-scene/black-overlay-square.png"},{id:"overlay-gradient",url:"hub-scene/overlay-gradient.png",anchor:[.5,.5]},{id:"overlay-holder",
children:[]},{id:"overlay-cloud",url:"hub-scene/overlay-cloud.png",anchor:[.5,.5],pool:3},{id:"hub-logo-patty",url:"hub-scene/hub-logo-patty.png",anchor:[.5,.5],pool:2},{id:"hub-logo-glide",url:"hub-scene/hub-logo-glide.png",anchor:[.5,.5],pool:2},{id:"hub-logo-meow",url:"hub-scene/hub-logo-meow.png",anchor:[.5,.5],pool:2},{id:"hub-logo-slap",url:"hub-scene/hub-logo-slap.png",anchor:[.5,.5],pool:2},{id:"gary-room-bg",url:"hub-scene/gary-room-bg.jpg",pool:2}],"ui-assets":[{neverFlush:!0},{id:"wrong-orientation-bg",url:"global/wrong-orientation-bg.png",retina:!1},{id:"scroll-bg",url:"global/iphone-scroll-overlay.png",retina:!1},{id:"white-square",url:"global/white-square.png",pool:3,retina:!1},{id:"paused-title",url:"ui/paused-title.png",anchor:[.5,.5]},{id:"transition-holder",children:[{id:"black-area-top",url:"global/black-square.png",retina:!1},{id:"black-area-bottom",url:"global/black-square.png",retina:!1},{id:"black-area-left",url:"global/black-square.png",retina:!1},{id:"black-area-right",url:"global/black-square.png",retina:!1},{id:"transition-mask",children:[{id:"black-corner-top-left",url:"global/transition-mask-corner.png",retina:!1},{id:"black-corner-top-right",url:"global/transition-mask-corner.png",retina:!1},{id:"black-corner-bottom-right",url:"global/transition-mask-corner.png",retina:!1},{id:"black-corner-bottom-left",url:"global/transition-mask-corner.png",retina:!1}]}]},{id:"ui-circle-particle",url:"ui/ui-circle-particles.png",anchor:[.5,.5],pool:10},{id:"ui-particle-holder",children:[]},{id:"playbuttonlarge",type:"button",children:[{id:"shadow",url:"ui/ui-button-large-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-large-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-large-play.png"}]}]},{id:"replaybuttonlarge",type:"button",children:[{id:"shadow",url:"ui/ui-button-large-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-large-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-large-replay.png"}]}]},{id:"soundoffbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-sound-off.png"}]}]},{id:"soundonbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-2.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-2.png"},{id:"icon",url:"ui/ui-button-icon-sound-on.png"}]}]},{id:"pausebutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-2.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-2.png"},{id:"icon",url:"ui/ui-button-icon-pause.png"}]}]},{id:"playbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-play.png"}]}]},{id:"homebutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-3.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-3.png"},{id:"icon",url:"ui/ui-button-icon-home.png"}]}]},{id:"helpbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-2.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-2.png"},{id:"icon",url:"ui/ui-button-icon-help.png"}]}]},{id:"skipbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-3.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-3.png"},{id:"icon",url:"ui/ui-button-icon-skip.png"}]}]},{id:"rightbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-skip.png"}]}]},{id:"leftbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-2.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-2.png"},{id:"icon",url:"ui/ui-button-icon-back.png"}]}]},{id:"backbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-2.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-2.png"},{id:"icon",url:"ui/ui-button-icon-back.png"}]}]},{id:"closehelpbutton",type:"button",children:[{id:"shadow",url:"ui/ui-button-shadow-1.png"},{id:"button-container",children:[{id:"bg",url:"ui/ui-button-bg-1.png"},{id:"icon",url:"ui/ui-button-icon-close.png"}]}]}]},audioAssets={"global-audio":[{url:"button-click-ui"}],"hub-audio":[{url:"music",loop:!0}],"glide-to-glory-audio":[{url:"gtg-music",loop:!0},{url:"pop1"},{url:"pop2"},{url:"pop3"},{url:"pop4"},{url:"pop5"},{url:"pop6"},{url:"pop7"},{url:"pop8"},{url:"pop9"},{url:"plankton-sad1"},{url:"plankton-sad2"},{url:"plankton-sad3"},{url:"plankton-sad4"},{url:"plankton-sad5"},{url:"plankton-sad6"},{url:"plankton-sad7"},{url:"plankton-laugh"},{url:"plankton-laugh2"},{url:"plankton-steal"},{url:"plankton-finally"},{url:"woosh5"},{url:"woosh6"},{url:"woosh7"},{url:"woosh8"},{url:"fan",loop:!0},{url:"gravity",loop:!0},{url:"shatter1"},{url:"shatter2"},{url:"shatter3"},{url:"balloon-squeek"},{url:"gtg-wind"}],"meow-no-audio":[{url:"music",loop:!0},{url:"woosh13"},{url:"woosh14"},{url:"woosh15"},{url:"woosh16"},{url:"woosh17"},{url:"woosh18"},{url:"woosh19"},{url:"woosh20"},{url:"chew1"},{url:"chew2"},{url:"chew3"},{url:"chew4"},{url:"chew5"},{url:"chew6"},{url:"gary-meow7"},{url:"gary-meow1"},{url:"gary-meow2"},{url:"gary-meow3"},{url:"gary-meow4"},{url:"gary-meow5"},{url:"gary-meow6"},{url:"sb-sing"},{url:"spongebob-gotcha"},{url:"spongebob-laugh1"},{url:"spongebob-laugh2"}],"patty-pileup-audio":[{url:"ppu-music",loop:!0},{url:"meat1"},{url:"meat2"},{url:"meat3"},{url:"meat4"},{url:"meat5"},{url:"meat6"},{url:"meat7"},{url:"love-my-job"},{url:"life-purpose"},{url:"first-visit"},{url:"sb-scream"},{url:"wow-big"},{url:"crowd-want"},{url:"woosh1"},{url:"woosh2"},{url:"woosh3"},{url:"woosh4"},{url:"woosh5"},{url:"woosh6"},{url:"woosh7"},{url:"woosh8"},{url:"squirt1"},{url:"squirt2"},{url:"squirt3"},{url:"squirt4"},{url:"spongebob-hungry"},{url:"spongebob-woah"},{url:"sb-mustard"},{url:"sb-hey"},{url:"sauce"}],"slap-happy-audio":[{url:"music",loop:!0},{url:"slap1"},{url:"slap2"},{url:"slap3"},{url:"slap4"},{url:"slap5"},{url:"slap6"},{url:"final-punch"},{url:"squidward-sigh"},{url:"squidward-walk",loop:!0},{url:"spongebob-gotcha"},{url:"spongebob-distance"},{url:"spongebob-laugh1"},{url:"spongebob-laugh2"},{url:"spongebob-woah"},{url:"sb-hey"},{url:"sq-bad3"},{url:"sq-bad2"},{url:"sq-bad1"},{url:"sq-missed"},{url:"sq-darn"},{url:"sb-sparkles-left",loop:!0},{url:"sb-sparkles-right",loop:!0},{url:"woosh1"},{url:"woosh2"},{url:"woosh3"},{url:"woosh4"},{url:"woosh5"},{url:"woosh6"},{url:"woosh7"},{url:"woosh8"},{url:"pop8"},{url:"pop9"}]},__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},Scene=function(a){function b(b){a.call(this),this.tweens=new Array,this.render=!1,this.game=b,this.interactive=!0,this.container=new DisplayObjectContainer,this.addChild(this.container),this.container.interactive=!0,this.paused=!1,this.interactionLocked=!0}return __extends(b,a),b.prototype.rotatePause=function(){this.pausedRotated=!0},b.prototype.pause=function(a,b){if(0!=this.game.initLoaded&&1!=this.transitioning&&1!=this.interactionLocked&&1!=this.paused){1==a?this.game.ui.setUI("pause-with-skip"):this.game.ui.setUI("pause"),1==b&&this.game.ui.setUI("none"),this.paused=!0,this.transitioning=!1,this.interactionLocked=!0,this.pauseTitle=Game.displayStore.getSprite("paused-title"),this.pauseTitle.position.x=Game.stageWidth/2,this.pauseTitle.position.y=80,this.pauseCloud=Game.displayStore.getSprite("preloader-cloud"),this.pauseCloud.position.x=Game.stageWidth/2,this.pauseCloud.position.y=Game.stageHeight/2,this.pauseCloud.scale.x=this.pauseCloud.scale.y=1,this.pauseCloud.tint=this.game.cloudColour,this.pauseCharacter=Game.displayStore.getSprite("pause-character"),this.pauseCharacter.position.x=Game.stageWidth/2,this.pauseCharacter.position.y=Game.stageHeight,this.pauseContainer=Game.displayStore.getContainer("pause-screen-overlay-container"),this.pauseOverlayBG=this.pauseContainer.getSprite("pause-overlay-bg"),this.pauseOverlayBG.width=Game.stageWidth,this.pauseOverlayBG.height=Game.stageHeight,this.pauseOverlayBG.alpha=.4,this.pauseContainer.addChild(this.pauseCloud),this.pauseContainer.addChild(this.pauseTitle),this.pauseContainer.addChild(this.pauseCharacter),this.pauseContainer.interactive=!0,this.pauseOverlayBG.interactive=!0,this.container.addChild(this.pauseContainer);this.interactionLocked=!1,this.pauseResumeTween(this.transitionTween,"pause"),this.pauseCloud.scale.x=0,this.pauseCloud.scale.y=0,this.pauseOverlayBG.alpha=0,this.pauseCharacter.position.y=Game.stageHeight+this.pauseCharacter.height,this.pauseTimeline&&this.pauseTimeline.kill(),this.pauseTimeline=new TimelineMax,this.pauseTimeline.add([TweenMax.to(this.pauseCloud.scale,1,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.pauseOverlayBG,.2,{alpha:.4,ease:Sine.easeOut}),TweenMax.to(this.pauseCharacter.position,1,{y:Game.stageHeight,ease:Sine.easeOut})],0)}},b.prototype.resume=function(){0!=this.game.initLoaded&&(this.container.removeChild(this.pauseContainer),this.pauseTimeline&&this.pauseTimeline.kill(),this.pauseOverlayBG=null,this.pausedRotated=!1,this.paused=!1,this.pauseResumeTween(this.transitionTween,"resume"))},b.prototype.restore=function(){},b.prototype.destroy=function(){this.interactionLocked=!0,Game.trace(this,"destroying..",this.interactionLocked,this.id);for(var a=this.container.children.length-1;a>=0;a--)this.container.removeChild(this.container.getChildAt(a));this.tweens=[],this.uiContainerRef=null},b.prototype.init=function(a){this.paused=!1,this.setBackgroundColor(16777215)},b.prototype.setBackgroundColor=function(a){Game.renderer.backgroundColor=a},b.prototype.addUI=function(a){this.addChild(a),this.uiContainerRef=a},b.prototype.uiClicked=function(a){if("soundonbutton"!=a.id&&"soundoffbutton"!=a.id||this.game.ui.soundToggled(),"homebutton"==a.id){this.paused=!1;var b,c=new Array,d=this;if(1==this.game.runningHubMode)b="titleScene",c.push("hub-assets"),c.push("main-game-title-screen-assets"),this.game.preloaderBackgroundColour=this.game.preloaderBackgroundColours[4],this.game.cloudColour=this.game.cloudColours[4];else switch(this.game.currentBackDestinationID){case"glideToGloryTitleScene":b=this.game.currentBackDestinationID,c.push("title-glide-to-glory-assets"),c.push("intro-glide-to-glory-assets"),this.game.preloaderBackgroundColour=this.game.preloaderBackgroundColours[0],this.game.cloudColour=this.game.cloudColours[0];break;case"pattyPileUpTitleScene":b=this.game.currentBackDestinationID,c.push("title-patty-pileup-assets"),c.push("intro-patty-pileup-assets"),this.game.preloaderBackgroundColour=this.game.preloaderBackgroundColours[1],this.game.cloudColour=this.game.cloudColours[1];break;case"slapHappyTitleScene":b=this.game.currentBackDestinationID,c.push("title-slap-happy-assets"),c.push("intro-slap-happy-assets"),this.game.preloaderBackgroundColour=this.game.preloaderBackgroundColours[2],this.game.cloudColour=this.game.cloudColours[2];break;case"meowNoTitleScene":b=this.game.currentBackDestinationID,c.push("title-meow-no-assets"),c.push("intro-meow-no-assets"),this.game.preloaderBackgroundColour=this.game.preloaderBackgroundColours[3],this.game.cloudColour=this.game.cloudColours[3]}this.game.loadAssets(c,!0,function(){d.game.setScene(b,!1)})}},b.prototype.uiRolledOver=function(a){},b.prototype.uiRolledOut=function(a){},b.prototype.downOnUI=function(a){},b.prototype.upOnUI=function(a){},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.rolloutCustomButtonKeyboard=function(a){},b.prototype.rolloverCustomButtonKeyboard=function(a){},b.prototype.selectCustomButtonKeyboard=function(a){},b.prototype.tick=function(){0!=this.game.initLoaded&&0==this.interactive&&(this.interactive=!0)},b.prototype.resize=function(a){this.container.scale.x=a,this.container.scale.y=a},b.prototype.initTransitionOut=function(a){return 0==this.game.initLoaded?(this.interactionLocked=!1,void(this.transitioning=!1)):(this.transitioning=!0,this.interactionLocked=!0,this.setUpTransition(),this.transitionMask.scale.x=this.transitionMask.scale.y=1.2,void(this.transitionTween=TweenMax.to(this.transitionMask.scale,a,{x:.001,y:.001,ease:Expo.easeOut,onUpdate:this.updateTransition,onUpdateParams:[this]})))},b.prototype.initTransitionIn=function(a){return 0==this.game.initLoaded?(this.interactionLocked=!1,void(this.transitioning=!1)):(this.transitioning=!0,this.interactionLocked=!0,this.setUpTransition(),this.transitionMask.scale.x=this.transitionMask.scale.y=.001,void(this.transitionTween=TweenMax.to(this.transitionMask.scale,a,{x:1.2,y:1.2,ease:Expo.easeIn,onComplete:this.killTransitionAssets,onCompleteParams:[this],onUpdate:this.updateTransition,onUpdateParams:[this]})))},b.prototype.updateTransition=function(a){a.transitionMask.width<Game.stageWidth&&(a.transitionBarLeft.width=(Game.stageWidth-a.transitionMask.width)/2,a.transitionBarRight.width=a.transitionBarLeft.width,a.transitionBarRight.position.x=a.transitionBarLeft.width+a.transitionMask.width),a.transitionMask.height<Game.stageHeight&&(a.transitionBarTop.height=(Game.stageHeight-a.transitionMask.height)/2,a.transitionBarBottom.height=a.transitionBarTop.height,a.transitionBarBottom.position.y=a.transitionBarTop.height+a.transitionMask.height)},b.prototype.setUpTransition=function(){this.transitionHolder=Game.displayStore.getContainer("transition-holder"),1==this.game.initLoaded&&(this.transitionMask=this.transitionHolder.getContainer("transition-mask"),this.transitionBarTop=this.transitionHolder.getSprite("black-area-top"),this.transitionBarLeft=this.transitionHolder.getSprite("black-area-left"),this.transitionBarRight=this.transitionHolder.getSprite("black-area-right"),this.transitionBarBottom=this.transitionHolder.getSprite("black-area-bottom"),this.transitionBarRight.position.x=Game.stageWidth,this.transitionBarBottom.position.y=Game.stageHeight,this.transitionBarTop.width=this.transitionBarBottom.width=Game.stageWidth,this.transitionBarLeft.height=this.transitionBarRight.height=Game.stageHeight,this.transitionMask.setRegPoint(512,512),this.transitionMask.position.x=Game.stageWidth/2,this.transitionMask.position.y=Game.stageHeight/2,this.transitionCornerTopLeft=this.transitionMask.getSprite("black-corner-top-left"),this.transitionCornerTopRight=this.transitionMask.getSprite("black-corner-top-right"),this.transitionCornerBottomRight=this.transitionMask.getSprite("black-corner-bottom-right"),this.transitionCornerBottomLeft=this.transitionMask.getSprite("black-corner-bottom-left"),this.transitionCornerTopLeft.texture.baseTexture.scaleMode=1,this.transitionCornerTopRight.scale.x=-1,this.transitionCornerTopRight.position.x=1024,this.transitionCornerBottomRight.scale.x=-1,this.transitionCornerBottomRight.scale.y=-1,this.transitionCornerBottomRight.position.x=1024,this.transitionCornerBottomRight.position.y=1024,this.transitionCornerBottomLeft.scale.y=-1,this.transitionCornerBottomLeft.position.y=1024),this.uiContainerRef&&this.uiContainerRef.addChild(this.transitionHolder)},b.prototype.killTransitionAssets=function(a){a.transitionHolder.parent&&a.uiContainerRef&&a.uiContainerRef.removeChild(a.transitionHolder),a.transitioning=!1,a.interactionLocked=!1,a.transitionTween&&a.transitionTween.kill()},b.prototype.pauseResumeTween=function(a,b,c){a&&("pause"==b?(a.totalProgress()>0&&a.totalProgress()<1||0*a.totalProgress()!=0)&&a.pause():"resume"==b&&(a.totalProgress()>0&&a.totalProgress()<1||0*a.totalProgress()!=0)&&a.resume())},b.prototype.gameFocusChanged=function(a){Game.trace("focus is..",a),"hidden"==a&&"gameplayScene"==this.id&&this.pause()},b.prototype.onLoadUpdate=function(a,b){},b.prototype.getPreloaderAssetList=function(){return[]},b}(PIXI.Container),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},Sprite=function(a){function b(b){a.call(this,b),this.neverFlush=!1,this.origX=0,this.origY=0,this.origAnchor={x:0,y:0,compensate:!1},this.defaultAnchor=!0,this.pooled=!1,this.pooledActive=!1}return __extends(b,a),b.prototype.addChild=function(b){a.prototype.addChild.call(this,b),1==this.pooled&&(this.pooledActive=!0)},b.prototype.destroy=function(){1==Game.displayStore.checkTextureDeletable(this)&&(this.texture.destroy(!0),PIXI.Texture.removeTextureFromCache(this.textureURL))},b.prototype.destroyRenderTexture=function(){this.texture.destroy(!0)},b.prototype.setTextureResolution=function(a){this.texture.baseTexture.resolution=a,this.texture.baseTexture.update()},b.prototype.resizeItem=function(){},b.prototype.setWidth=function(a){this._width=a},b.prototype.setHeight=function(a){this._height=a},b.prototype.setRegPoint=function(a,b,c){this.defaultAnchor=!1,this.anchor.x=a,this.anchor.y=b,this.origAnchor.x=a,this.origAnchor.y=b,1==c&&(this.position.x=this.width*a+this.position.x,this.position.y=this.height*b+this.position.y)},b}(PIXI.Sprite),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},Spine=function(a){function b(b){a.call(this,b),this.neverFlush=!1,this.origX=0,this.origY=0,this.pooled=!1,this.pooledActive=!1}return __extends(b,a),b.prototype.addChild=function(b){a.prototype.addChild.call(this,b),1==this.pooled&&(this.pooledActive=!0)},b.prototype.setTextureResolution=function(a){this.scale.x=1/a,this.scale.y=1/a},b.prototype.destroy=function(){if(1==Game.displayStore.checkTextureDeletable(this))for(var a=0;a<this.slotContainers.length;a++){for(var b=this.slotContainers[a],c=0;c<b.children.length;c++){var d=b.children[c];d.texture.destroy(!0),d=null}b=null}PIXI.Texture.removeTextureFromCache(this.textureURL),this.slotContainers=null,this.spineData=null,this.skeleton=null,this.data=null,this.state=null,this.storedState=null},b.prototype.changeBaseTexture=function(a){for(var b=0;b<this.slotContainers.length;b++)for(var c=this.slotContainers[b],d=0;d<c.children.length;d++){var e=c.children[d];e.texture.baseTexture=a}for(var b=0;b<this.skeleton.slots.length;b++){var f=this.skeleton.slots[b];f.attachment&&(f.attachment.rendererObject.page.rendererObject=a)}},b.prototype.setAnim=function(a,b){this.lastTime=Date.now(),this.currentAnim=a,this.loop=b,this.state.setAnimationByName(0,a,b)},b.prototype.setSkin=function(a){this.skeleton.setSkinByName(a),this.skeleton.setSlotsToSetupPose()},b.prototype.pause=function(){this.currentAnim&&(this.currentAnimTime=this.state.currentTime,this.storedState=this.state,this.state.tracks[0]&&(this.storedTime=this.state.tracks[0].time),this.state.clearTracks())},b.prototype.resume=function(){this.currentAnim&&(this.state=this.storedState,this.state.setAnimationByName(0,this.currentAnim,this.loop),this.state.tracks[0].time=this.storedTime)},b.prototype.rewindAndStop=function(){},b.prototype.resizeItem=function(){},b}(PIXI.spine.Spine),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},MovieClip=function(a){function b(b){a.call(this,b),this.neverFlush=!1,this.origX=0,this.origY=0,this.origAnchor={x:0,y:0,compensate:!1},this.defaultAnchor=!0,this.pooled=!1,this.pooledActive=!1;for(var c=0;c<b.length;c++)b[c].width,b[c].height}return __extends(b,a),b.prototype.addChild=function(b){a.prototype.addChild.call(this,b),1==this.pooled&&(this.pooledActive=!0)},b.prototype.setTextureResolution=function(a){var b=PIXI.utils.TextureCache[this.textureURL];b.baseTexture.resolution=a,b.baseTexture.update(),console.log("TEXTURE IS!.........",b.baseTexture)},b.prototype.destroy=function(){1==Game.displayStore.checkTextureDeletable(this)&&PIXI.Texture.removeTextureFromCache(this.textureURL)},b.prototype.resizeItem=function(){},b.prototype.setRegPoint=function(a,b,c){this.defaultAnchor=!1,this.anchor.x=a,this.anchor.y=b,1==c&&(this.position.x=this.width*a+this.position.x,this.position.y=this.height*b+this.position.y)},b}(PIXI.extras.MovieClip),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},TilingSprite=function(a){function b(b,c,d){a.call(this,b,c,d),this.neverFlush=!1,this.origX=0,this.origY=0,this.pooled=!1,this.pooledActive=!1}return __extends(b,a),b.prototype.addChild=function(b){a.prototype.addChild.call(this,b),1==this.pooled&&(this.pooledActive=!0)},b.prototype.setTextureResolution=function(a){this.texture.baseTexture.resolution=a,this.texture.baseTexture.update()},b.prototype.destroy=function(){1==Game.displayStore.checkTextureDeletable(this)&&(this.texture.destroy(!0),PIXI.Texture.removeTextureFromCache(this.textureURL))},b}(PIXI.extras.TilingSprite),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},DisplacementMapFilter=function(a){function b(b){a.call(this,b),this.neverFlush=!1,this.texture=b}return __extends(b,a),b.prototype.setTextureResolution=function(a){var b=PIXI.utils.TextureCache[this.textureURL];b.baseTexture.resolution=a,b.baseTexture.update()},b.prototype.destroy=function(){1==Game.displayStore.checkTextureDeletable(this)&&(this.texture.destroy(!0),PIXI.Texture.removeTextureFromCache(this.textureURL))},b}(PIXI.filters.DisplacementFilter),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},BitmapText=function(a){function b(b,c){a.call(this,b,c),this.neverFlush=!1,this.origX=0,this.origY=0,this.origAnchor={x:0,y:0,compensate:!1},this.defaultAnchor=!0,this.pooled=!1,this.pooledActive=!1}return __extends(b,a),b.prototype.addChild=function(b){a.prototype.addChild.call(this,b),1==this.pooled&&(this.pooledActive=!0)},b.prototype.setTextureResolution=function(a){var b=PIXI.utils.TextureCache[this.textureURL];b.baseTexture.resolution=a,b.baseTexture.update()},b.prototype.saveTexture=function(){this.pixiTex=PIXI.Texture.fromImage(this.textureURL)},b.prototype.destroy=function(){1==Game.displayStore.checkTextureDeletable(this)&&(this.pixiTex.destroy(!0),PIXI.Texture.removeTextureFromCache(this.textureURL))},b.prototype.resizeItem=function(){},b.prototype.setRegPoint=function(a,b,c){this.defaultAnchor=!1},b}(PIXI.extras.BitmapText),CoreData=function(){function a(a){this.currentStars=0,this.game=a,this.zoneData=new Array,this.outfitData=new Array,this.zoneData.push({id:"fireman",label:"PANEL LABEL 1",image:"hub-scene/panel-fireman",imagefg:{x:152,y:-92,image:"hub-scene/panel-fireman-fg"}}),this.zoneData.push({id:"space",label:"PANEL LABEL 2",image:"hub-scene/panel-space",imagefg:{x:99,y:-57,image:"hub-scene/panel-space-fg"}}),this.zoneData.push({id:"camping",label:"PANEL LABEL 3",image:"hub-scene/panel-camping",imagefg:{x:148,y:-70,image:"hub-scene/panel-camping-fg"}}),this.zoneData.push({id:"chef",label:"PANEL LABEL 4",image:"hub-scene/panel-chef",imagefg:{x:-28,y:-104,image:"hub-scene/panel-chef-fg"}}),this.zoneData.push({id:"pirate",label:"PANEL LABEL 5",image:"hub-scene/panel-pirate",imagefg:{x:138,y:16,image:"hub-scene/panel-pirate-fg"}}),this.zoneData.push({id:"rock",label:"PANEL LABEL 6",image:"hub-scene/panel-rock",imagefg:{x:0,y:-62,image:"hub-scene/panel-rock-fg"}}),this.zoneData.push({id:"farm",label:"PANEL LABEL 7",image:"hub-scene/panel-farm",imagefg:{x:160,y:-75,image:"hub-scene/panel-farm-fg"}}),this.outfitData.push({id:"fireman",isOwned:!1,isHidden:!1,isNew:!1,icon:"store-scene/icon-fireman"}),this.outfitData.push({id:"fireman-special",isOwned:!1,isHidden:!0,isNew:!1,icon:"store-scene/icon-fireman-special"}),this.outfitData.push({id:"space",isOwned:!1,isHidden:!1,isNew:!1,icon:"store-scene/icon-space"}),this.outfitData.push({id:"space-special",isOwned:!1,isHidden:!0,isNew:!1,icon:"store-scene/icon-space-special"}),this.outfitData.push({id:"camping",isOwned:!1,isHidden:!1,isNew:!1,icon:"store-scene/icon-camping"}),this.outfitData.push({id:"camping-special",isOwned:!1,isHidden:!0,isNew:!1,icon:"store-scene/icon-camping-special"})}return a.prototype.earnStar=function(){this.currentStars++},Object.defineProperty(a.prototype,"getCurrentZone",{set:function(a){this.currentZone=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"getCurrentOutfit",{set:function(a){this.currentOutfit=a},enumerable:!0,configurable:!0}),a}(),GlideToGloryLevelElementSlot=function(){function a(a,b,c,d,e,f){this.blockUnitWidth=1,this.lastSlotInChunk=!1,this.gapAdjustment=0,this.verticalOffset=0,this.levelBlockActive=!1,this.specialPower=!1,this.verticalPositions=new Array,this.verticalPositions.push(-213),this.verticalPositions.push(0),this.verticalPositions.push(213),this.verticalPositions.push(426),this.verticalPositions.push(852),this.levelManager=a,this.blockWidth=this.levelManager.blockWidth,this.parentScene=this.levelManager.scene,d&&(this.verticalOffset=d),e&&(this.gapAdjustment=e),this.visualElementsContainerBack=Game.displayStore.getContainer("level-block-element-holder-back"),this.visualElementsContainer=Game.displayStore.getContainer("level-block-element-holder"),f&&(this.slotAttribute=f,"wind-up"!=this.slotAttribute&&"wind-down"!=this.slotAttribute||this.setUpWindElements(),"anti-gravity"==this.slotAttribute&&this.setUpGravityElements()),"wind-up"==this.slotAttribute?(this.powerSign=Game.displayStore.getSprite("wind-up-sign"),this.specialPower=!0):"wind-down"==this.slotAttribute?(this.powerSign=Game.displayStore.getSprite("wind-down-sign"),this.specialPower=!0):"anti-gravity"==this.slotAttribute&&(this.powerSign=Game.displayStore.getSprite("anti-gravity-sign"),this.specialPower=!0),this.physicsBodies=new Array,b&&(this.topElement=b,this.topElement.buildLevelBlock(this.visualElementsContainer),this.physicsBodies.push(this.topElement.getPhysicsElement()),this.topElement.adjustVerticalOffset(this.verticalOffset,"top")),c&&(this.bottomElement=c,this.bottomElement.buildLevelBlock(this.visualElementsContainer),this.physicsBodies.push(this.bottomElement.getPhysicsElement()),this.bottomElement.adjustVerticalOffset(this.verticalOffset,"bottom"),this.bottomElement.adjustVerticalOffset(this.gapAdjustment,"bottom gap")),this.physicsActive=!1,this.physicsActiveLoc=600}return Object.defineProperty(a.prototype,"getStartPos",{get:function(){return this.blockWidth*this.blockUnitWidth},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"setLastSlot",{set:function(a){this.lastSlotInChunk=a},enumerable:!0,configurable:!0}),a.prototype.setPos=function(a){this.currentPosition=a,this.offScreenScrollPosLeft=0-this.blockWidth*this.blockUnitWidth-100,this.offScreenScrollPosRight=1024+this.blockUnitWidth},a.prototype.updateScrollPos=function(a){if(this.currentPosition-=a,!(this.currentPosition>this.offScreenScrollPosRight)){this.visualElementsContainerBack.position.x=this.currentPosition,this.visualElementsContainer.position.x=this.currentPosition;var b;if(this.rearPanel&&(b=this.visualElementsContainerBack.position.x-512,this.rearPanel.position.x=Math.floor(-b/20),1==this.specialPower&&(this.powerSign.position.x=this.rearPanel.position.x+180)),this.currentPosition<this.offScreenScrollPosLeft)return this.deactivateLevelBlock(),void(1==this.lastSlotInChunk&&this.levelManager.removeFirstSlotChunk(this));this.currentPosition<this.offScreenScrollPosRight-this.blockWidth*this.blockUnitWidth&&1==this.lastSlotInChunk&&1==this.levelManager.isLastSlotOverall(this)&&this.levelManager.addNewChunk(),this.currentPosition>this.offScreenScrollPosLeft&&this.currentPosition<this.offScreenScrollPosRight&&this.activateLevelBlock(),this.currentPosition>this.offScreenScrollPosLeft&&this.currentPosition<this.physicsActiveLoc&&0==this.physicsActive&&this.activatePhysicsObjects(),"wind-up"==this.slotAttribute&&this.animateWind(1),"wind-down"==this.slotAttribute&&this.animateWind(-1),"anti-gravity"==this.slotAttribute&&this.animateGravity()}},a.prototype.setUpWindElements=function(){this.windParticles=new Array;var a;"wind-down"==this.slotAttribute?a=-50:"wind-up"==this.slotAttribute&&(a=700);for(var b=0;10>b;b++){var c=Game.getRandom(30,50),d=Game.getRandom(.1,.3),e=Game.getRandom(-360,360,!0),f=Game.getRandom(0,this.blockWidth),g=Game.getRandom(.5,1);this.windParticles.push({sprite:Game.displayStore.getSprite("wind-particle"),range:c,speed:d,counter:e,startXPos:f,startYPos:a}),this.windParticles[b].sprite.position.x=f,this.windParticles[b].sprite.position.y=a,this.windParticles[b].sprite.scale.x=this.windParticles[b].sprite.scale.y=g,this.visualElementsContainerBack.addChild(this.windParticles[b].sprite)}},a.prototype.setUpGravityElements=function(){this.gravityParticles=new Array;for(var a=0;5>a;a++){var b=Game.getRandom(.1,.3),c=(Game.getRandom(-360,360,!0),Game.getRandom(0,this.blockWidth)),d=Game.getRandom(.4,1);this.gravityParticles.push({sprite:Game.displayStore.getSprite("gravity-particle"),speed:b,startXPos:c}),this.gravityParticles[a].sprite.position.x=c,this.gravityParticles[a].sprite.position.y=-50,this.gravityParticles[a].sprite.scale.x=this.gravityParticles[a].sprite.scale.y=d,this.gravityParticles[a].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.visualElementsContainerBack.addChild(this.gravityParticles[a].sprite)}},a.prototype.animateWind=function(a){for(var b=0;b<this.windParticles.length;b++){var c=this.windParticles[b];c.counter+=c.speed,c.counter>=360&&(c.counter=-360),c.sprite.position.x=c.startXPos+Math.sin(c.counter)*c.range,c.sprite.position.y-=30*c.speed*a,-1==a?c.sprite.position.y>700&&(c.sprite.position.y=c.startYPos):1==a&&c.sprite.position.y<-50&&(c.sprite.position.y=c.startYPos)}},a.prototype.animateGravity=function(){for(var a=0;a<this.gravityParticles.length;a++){var b=this.gravityParticles[a];b.sprite.position.y+=30*b.speed,b.sprite.position.y>700&&(b.sprite.position.y=-50)}},a.prototype.activatePhysicsObjects=function(){this.physicsActive=!0;for(var a=0;a<this.physicsBodies.length;a++)this.levelManager.addLevelBlockPhysics({body:this.physicsBodies[a].body,collisionType:this.physicsBodies[a].collisionType,blockRef:this})},a.prototype.removePhysicsObjects=function(){if(0!=this.physicsActive){this.physicsActive=!1;for(var a=0;a<this.physicsBodies.length;a++)this.levelManager.removeLevelBlockPhysics({body:this.physicsBodies[a].body,collisionType:this.physicsBodies[a].collisionType,blockRef:this})}},a.prototype.activateLevelBlock=function(){1!=this.levelBlockActive&&(this.levelBlockActive=!0,this.parentScene.levelPanelHolderRear.addChild(this.visualElementsContainerBack),this.parentScene.levelPanelHolder.addChild(this.visualElementsContainer),this.rearPanel=Game.displayStore.getSprite("rear-panel-"+Game.getRandom(1,5,!0)),this.rearPanel.position.x=0,1==this.specialPower&&(this.powerSign.position.x=170,this.powerSign.position.y=312,this.visualElementsContainerBack.addChildAt(this.powerSign,0)),this.visualElementsContainerBack.addChildAt(this.rearPanel,0),this.levelManager.checkLevelSounds())},a.prototype.deactivateLevelBlock=function(){0!=this.levelBlockActive&&(this.levelBlockActive=!1,this.parentScene.levelPanelHolderRear.removeChild(this.visualElementsContainerBack),this.parentScene.levelPanelHolder.removeChild(this.visualElementsContainer),this.visualElementsContainerBack.removeChild(this.rearPanel),this.removePhysicsObjects(),Game.displayStore.returnPooledItem(this.rearPanel),this.rearPanel=null,this.levelManager.checkLevelSounds())},a.prototype.reinstateSlotElements=function(){this.topElement&&this.topElement.reinstateElements(),this.bottomElement&&this.bottomElement.reinstateElements()},a.prototype.scrollLevelElement=function(){},a.prototype.removePowerUp=function(a){this.topElement&&1==this.topElement.checkRemovePowerUp(a)&&(this.topElement.removePowerUp(),this.levelManager.removePowerUpPhysics(a)),
this.bottomElement&&1==this.bottomElement.checkRemovePowerUp(a)&&(this.bottomElement.removePowerUp(),this.levelManager.removePowerUpPhysics(a))},a.prototype.tick=function(){},a.prototype.destroy=function(){if(this.topElement&&this.topElement.destroy(),this.bottomElement&&this.bottomElement.destroy(),this.parentScene.levelPanelHolderRear.removeChild(this.visualElementsContainerBack),this.parentScene.levelPanelHolder.removeChild(this.visualElementsContainer),this.visualElementsContainerBack.removeChild(this.rearPanel),this.visualElementsContainerBack.removeChild(this.powerSign),Game.displayStore.returnPooledItem(this.visualElementsContainerBack),Game.displayStore.returnPooledItem(this.visualElementsContainer),Game.displayStore.returnPooledItem(this.rearPanel),Game.displayStore.returnPooledItem(this.powerSign),this.windParticles)for(var a=0;a<this.windParticles.length;a++)Game.displayStore.returnPooledItem(this.windParticles[a].sprite);if(this.gravityParticles)for(var a=0;a<this.gravityParticles.length;a++)Game.displayStore.returnPooledItem(this.gravityParticles[a].sprite)},a}(),GlideToGloryLevelElementBlock=function(){function a(a,b){this.powerUpBlock=!1,this.verticalPositions=new Array,this.verticalPositions.push(-213),this.verticalPositions.push(0),this.verticalPositions.push(213),this.verticalPositions.push(426),this.verticalPositions.push(852),this.position=a,this.collisionType=b,"top"==this.position?this.blockPos=this.verticalPositions[0]:"bottom"==this.position&&(this.blockPos=this.verticalPositions[3])}return a.prototype.buildLevelBlock=function(a){this.parentSlotContainer=a},a.prototype.adjustVerticalOffset=function(a,b){this.levelElement&&(this.blockPos+=a,this.levelElement.position.y=this.blockPos,this.setPhysicsPosition()),this.powerUpHolder&&(this.powerUpHolder.position.y=this.blockPos,this.setPhysicsPosition())},a.prototype.setPhysicsPosition=function(){0==this.powerUpBlock?this.physicsBody.position[1]=Game.stageHeight-this.levelElement.position.y-213:this.physicsBody.position[1]=Game.stageHeight-this.levelElement.position.y},a.prototype.reinstateElements=function(){},a.prototype.removePowerUp=function(){},a.prototype.checkRemovePowerUp=function(a){var b=!1;return a==this.physicsBody&&(b=!0),b},a.prototype.tick=function(){},a.prototype.destroy=function(){0==this.powerUpBlock?(this.parentSlotContainer.removeChild(this.levelElement),Game.displayStore.returnPooledItem(this.levelElement)):(this.parentSlotContainer.removeChild(this.powerUpHolder),Game.displayStore.returnPooledItem(this.powerUpHolder))},a.prototype.getPhysicsElement=function(){return{body:this.physicsBody,collisionType:this.collisionType,blockRef:this}},a}(),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},LoadingScene=function(a){function b(b){a.call(this,b),this.endPreloadTriggered=!1,this.id="loadingScene"}return __extends(b,a),b.prototype.init=function(){a.prototype.init.call(this),this.setBackgroundColor(this.game.preloaderBackgroundColour),this.game.ui.setUI("none"),this.currentScale=0,this.preloaderBarContainerMain=Game.displayStore.getContainer("preloader-bar"),this.preloaderBarContainerMain.position.x=Game.stageWidth/2,this.preloaderBarContainerMain.position.y=Game.stageHeight/2,this.preloaderBarFillMain=this.preloaderBarContainerMain.getSprite("bar-fill"),this.preloaderBarContainerMain.rotation=Game.getRandom(-.15,.15),this.cloud=Game.displayStore.getSprite("preloader-cloud"),this.whiteCircle=Game.displayStore.getSprite("preloader-circle"),this.cloud.position.x=Game.stageWidth/2,this.cloud.position.y=Game.stageHeight/2,this.cloud.scale.x=this.cloud.scale.y=.8,this.cloud.tint=this.game.cloudColour,this.whiteCircle.position.x=Game.stageWidth/2,this.whiteCircle.position.y=Game.stageHeight/2,this.whiteCircle.scale.x=2,this.whiteCircle.scale.y=2,this.whiteCircle.tint=this.game.cloudColour,this.maskElement=new PIXI.Graphics,this.maskElement.moveTo(0,0),this.maskElement.beginFill(16777215),this.maskElement.lineTo(450,0),this.maskElement.lineTo(450,70),this.maskElement.lineTo(0,70),this.maskElement.lineTo(0,0),this.maskElement.endFill(),this.maskElement.position.x=6,this.maskElement.position.y=6,this.preloaderBarContainerMain.addChild(this.maskElement),this.preloaderBarFillMain.mask=this.maskElement,this.loadingText=new PIXI.Text(this.game.loadingPrefix+" 0",{font:"25px spongeboytt1",fill:"black",align:"center",lineHeight:50}),this.loadingText.position.y=90,this.positionLoadingText(),this.maskElement.scale.x=0,this.preloaderBarContainerMain.addChild(this.loadingText),this.container.addChild(this.whiteCircle),this.container.addChild(this.cloud),this.container.addChild(this.preloaderBarContainerMain)},b.prototype.positionLoadingText=function(){this.loadingText.position.x=this.preloaderBarFillMain.width/2-this.loadingText.width/2},b.prototype.onLoadUpdate=function(a,b){this.currentScale=a/b,this.loadingText.text=this.game.loadingPrefix+" "+Math.round(a/b*100),this.positionLoadingText()},b.prototype.tick=function(){a.prototype.tick.call(this),this.maskElement.scale.x+=(this.currentScale-this.maskElement.scale.x)/9},b.prototype.endPreload=function(){this.endPreloadTriggered=!0,this.nextScene(this)},b.prototype.nextScene=function(a){},b.prototype.pause=function(){a.prototype.pause.call(this)},b.prototype.resume=function(){a.prototype.resume.call(this)},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.loadingText.text="",this.container.removeChild(this.loadingText),this.container.removeChild(this.preloaderBarContainerMain),this.preloaderBarFillMain.mask=null,this.maskElement.clear(),this.preloaderBarContainerMain.removeChild(this.maskElement),this.barTween&&this.barTween.kill(),this.fadeTimeline&&this.fadeTimeline.kill()},b.prototype.getPreloaderAssetList=function(){return["initial-loading-assets"]},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},AnimationScene=function(a){function b(b){a.call(this,b),this.id="animationScene"}return __extends(b,a),b.prototype.init=function(){a.prototype.init.call(this),this.game.ui.setUI("none"),this.background=Game.displayStore.getSprite("grey-bg.png"),this.background.width=1024,this.background.height=683,this.wellDone=Game.displayStore.getSprite("well-done-text.png"),this.skipButton=Game.displayStore.getButton("skip-button-large"),this.game.ui.addCustomUIButton(this.skipButton,!0),this.container.addChild(this.background),this.container.addChild(this.wellDone)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"skip-button-large":}},b.prototype.keyUp=function(b){a.prototype.keyUp.call(this,b)},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.uiRolledOut=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.downOnUI=function(b){a.prototype.downOnUI.call(this,b)},b.prototype.upOnUI=function(b){a.prototype.upOnUI.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this)},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},SpineTestScene=function(a){function b(b){a.call(this,b),this.id="spineTestScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.buildingTest=Game.displayStore.getMovieClip("building-test"),this.buildingTest.position.x=500,this.buildingTest.position.y=500,this.buildingTest.gotoAndStop(1),this.container.addChild(this.buildingTest),this.spriteSheetTest=Game.displayStore.getMovieClip("sprite-sheet-test"),this.spriteSheetTest.position.x=200,this.spriteSheetTest.position.y=200,this.container.addChild(this.spriteSheetTest),this.spriteSheetTest.animationSpeed=.4,this.spriteSheetTest.play(),this.animation=new TimelineMax,this.spine=Game.displayStore.getSpine("spine-test"),this.container.addChild(this.spine),this.spine.position.y=400,this.spine.position.x=400,this.spine.setSkin("crispo"),this.spine.setAnim("dance-1",!0)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"store-button":break;case"dialogue-close-button":}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},TitleScene=function(a){function b(b){a.call(this,b),this.id="titleScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),Game.displayStore.flush(["patty-pileup-assets","intro-assets-patty-pileup","title-patty-pileup-assets"]),Game.displayStore.flush(["meow-no-assets","intro-meow-no-assets","title-meow-no-assets"]),Game.displayStore.flush(["glide-to-glory-assets","intro-glide-to-glory-assets","title-glide-to-glory-assets"]),Game.displayStore.flush(["slap-happy-assets","intro-slap-happy-assets","title-slap-happy-assets"]),Game.audioManager.flush("patty-pileup-audio"),Game.audioManager.flush("glide-to-glory-audio"),Game.audioManager.flush("slap-happy-audio"),Game.audioManager.flush("meow-no-audio"),this.zManager=new TitleSceneZManager(this),this.positionCounter=0,this.bedtimeLetters=new Array,this.bedtimeContainer=Game.displayStore.getContainer("bedtime-container"),this.slapLogo=Game.displayStore.getSprite("main-brand-logo"),this.bedtimeLetters.push({sprite:this.bedtimeContainer.getSprite("bedtime-b"),targetPos:new PIXI.Point(50,100)}),this.bedtimeLetters.push({sprite:this.bedtimeContainer.getSprite("bedtime-e"),targetPos:new PIXI.Point(50,100)}),this.bedtimeLetters.push({sprite:this.bedtimeContainer.getSprite("bedtime-d"),targetPos:new PIXI.Point(50,100)}),this.bedtimeLetters.push({sprite:this.bedtimeContainer.getSprite("bedtime-t"),targetPos:new PIXI.Point(50,100)}),this.bedtimeLetters.push({sprite:this.bedtimeContainer.getSprite("bedtime-i"),targetPos:new PIXI.Point(50,100)}),this.bedtimeLetters.push({sprite:this.bedtimeContainer.getSprite("bedtime-m"),targetPos:new PIXI.Point(50,100)}),this.bedtimeLetters.push({sprite:this.bedtimeContainer.getSprite("bedtime-e-end"),targetPos:new PIXI.Point(50,100)}),this.bedtimeLetters.push({sprite:this.bedtimeContainer.getSprite("i-in"),targetPos:new PIXI.Point(50,100)}),this.bedtimeLetters.push({sprite:this.bedtimeContainer.getSprite("n-in"),targetPos:new PIXI.Point(50,100)}),this.setBackgroundColor(11714614),this.game.ui.setUI("title"),this.largePlayButton=Game.displayStore.getButton("playbuttonlarge"),this.largePlayButton.visuallyPrepareButton("large"),this.largePlayButton.position.x=Game.stageWidth/2,this.largePlayButton.position.y=450,this.largePlayButton.scale.x=2,this.largePlayButton.scale.y=2,this.largePlayButton.rotation=Game.getRandom(-1,1),this.largePlayButton.alpha=0,this.cityBackground=Game.displayStore.getSprite("background"),this.logoFog=Game.displayStore.getSprite("logo-fog"),this.spongebobContainer=Game.displayStore.getContainer("sleepingbob-container"),this.bBottom=Game.displayStore.getSprite("b-bottom"),this.mainFog=Game.displayStore.getSprite("main-fog"),this.cityBackground.position.x=Game.stageWidth/2,this.cityBackground.position.y=-200,this.bBottom.scale.x=3,this.bBottom.scale.y=3,this.bBottom.rotation=-1,this.bBottom.alpha=0;for(var c=0;c<this.bedtimeLetters.length;c++)this.bedtimeLetters[c].sprite.scale.x=this.bedtimeLetters[c].sprite.scale.y=0;this.logoFog.position.x=Game.stageWidth/2,this.logoFog.position.y=Game.stageHeight/2-50,this.mainFog.position.x=Game.stageWidth/2+200,this.mainFog.position.y=Game.stageHeight/2,this.mainFog.scale.x=1.5,this.mainFog.scale.y=1.5,this.mainFog.alpha=.95,this.mainFog.blendMode=PIXI.BLEND_MODES.ADD,this.logoFog.scale.x=1.1,this.logoFog.scale.y=1.1,this.logoFog.alpha=1,this.cityBackground.scale.x=1.4,this.cityBackground.scale.y=1.4,this.bBottom.position.x=Game.stageWidth/2,this.bBottom.position.y=Game.stageHeight/2-50,this.bBottom.position.x=Game.stageWidth/2,this.bBottom.position.y=Game.stageHeight/2-50;var d=new PIXI.Text("Main title screen..",{font:"25px spongeboytt1",fill:"black",lineHeight:50,padding:20});d.position.x=40,d.position.y=40,this.fogAnimation=new TimelineMax,this.fogAnimation.add([TweenMax.to(this.mainFog.position,10,{x:Game.stageWidth/2-200,ease:Power1.easeInOut,repeat:-1,yoyo:!0,repeatDelay:1}),TweenMax.to(this.cityBackground.scale,3,{x:1.1,y:1.1,ease:Power2.easeOut}),TweenMax.to(this.cityBackground.position,3,{y:0,ease:Power2.easeOut}),TweenMax.to(this.cityBackground.position,10,{x:Game.stageWidth/2-30,ease:Power1.easeInOut,repeat:-1,yoyo:!0,repeatDelay:1}),TweenMax.to(this.spongebobContainer.position,8,{y:360,ease:Back.easeOut,delay:3}),TweenMax.from(this.slapLogo.scale,.6,{x:0,y:0,ease:Back.easeOut,delay:3})]),this.spongebobAnimation=new TimelineMax,this.spongebobAnimation.add([TweenMax.to(this.spongebobContainer.position,5,{x:780,y:360,ease:Power1.easeInOut,yoyo:!0,repeat:-1,repeatDelay:5.1}),TweenMax.to(this.spongebobContainer.position,5,{x:820,y:390,ease:Power1.easeInOut,yoyo:!0,repeat:-1,delay:5.1}),TweenMax.to(this.logoFog,3,{alpha:.7,ease:Power1.easeInOut,yoyo:!0,repeat:-1})],8.2),this.animation=new TimelineMax({onComplete:this.activatePlayButton,onCompleteParams:[this]}),this.animation.add([TweenMax.to(this.bBottom.scale,.5,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.bBottom,.5,{alpha:1,ease:Power2.easeOut}),TweenMax.to(this.bBottom,.5,{rotation:0,ease:Back.easeOut}),TweenMax.from(this.logoFog,.5,{alpha:0,ease:Power1.easeIn}),TweenMax.to(this.bedtimeLetters[0].sprite.scale,.3,{x:1,y:1,ease:Back.easeOut}),TweenMax.from(this.bedtimeLetters[0].sprite.position,.3,{x:this.bedtimeLetters[0].targetPos.x,y:this.bedtimeLetters[0].targetPos.y,ease:Back.easeOut}),TweenMax.to(this.bedtimeLetters[1].sprite.scale,.3,{x:1,y:1,ease:Back.easeOut,delay:.2}),TweenMax.from(this.bedtimeLetters[1].sprite.position,.3,{x:this.bedtimeLetters[1].targetPos.x,y:this.bedtimeLetters[1].targetPos.y,ease:Back.easeOut,delay:.2}),TweenMax.to(this.bedtimeLetters[2].sprite.scale,.3,{x:1,y:1,ease:Back.easeOut,delay:.4}),TweenMax.from(this.bedtimeLetters[2].sprite.position,.3,{x:this.bedtimeLetters[2].targetPos.x,y:this.bedtimeLetters[2].targetPos.y,ease:Back.easeOut,delay:.4}),TweenMax.to(this.bedtimeLetters[3].sprite.scale,.3,{x:1,y:1,ease:Back.easeOut,delay:.2}),TweenMax.from(this.bedtimeLetters[3].sprite.position,.3,{x:this.bedtimeLetters[3].targetPos.x,y:this.bedtimeLetters[3].targetPos.y,ease:Back.easeOut,delay:.2}),TweenMax.to(this.bedtimeLetters[4].sprite.scale,.3,{x:1,y:1,ease:Back.easeOut,delay:.2}),TweenMax.from(this.bedtimeLetters[4].sprite.position,.3,{x:this.bedtimeLetters[4].targetPos.x,y:this.bedtimeLetters[4].targetPos.y,ease:Back.easeOut,delay:.2}),TweenMax.to(this.bedtimeLetters[5].sprite.scale,.3,{x:1,y:1,ease:Back.easeOut,delay:.4}),TweenMax.from(this.bedtimeLetters[5].sprite.position,.3,{x:this.bedtimeLetters[5].targetPos.x,y:this.bedtimeLetters[5].targetPos.y,ease:Back.easeOut,delay:.4}),TweenMax.to(this.bedtimeLetters[6].sprite.scale,.3,{x:1,y:1,ease:Back.easeOut,delay:.2}),TweenMax.from(this.bedtimeLetters[6].sprite.position,.3,{x:this.bedtimeLetters[6].targetPos.x,y:this.bedtimeLetters[6].targetPos.y,ease:Back.easeOut,delay:.2}),TweenMax.to(this.bedtimeLetters[7].sprite.scale,.3,{x:1,y:1,ease:Back.easeOut,delay:.7}),TweenMax.from(this.bedtimeLetters[7].sprite.position,.3,{x:this.bedtimeLetters[7].targetPos.x,y:this.bedtimeLetters[7].targetPos.y,ease:Back.easeOut,delay:.7}),TweenMax.to(this.bedtimeLetters[8].sprite.scale,.3,{x:1,y:1,ease:Back.easeOut,delay:.7}),TweenMax.from(this.bedtimeLetters[8].sprite.position,.3,{x:this.bedtimeLetters[8].targetPos.x,y:this.bedtimeLetters[8].targetPos.y,ease:Back.easeOut,delay:.7})],2),this.animation.add([TweenMax.to(this.largePlayButton.scale,.6,{x:1,y:1,ease:Bounce.easeOut}),TweenMax.to(this.largePlayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largePlayButton,.25,{alpha:1,ease:Quad.easeOut})],2.5),this.container.addChild(d),this.container.addChild(this.cityBackground),this.container.addChild(this.mainFog),this.container.addChild(this.logoFog),this.container.addChild(this.bedtimeContainer),this.container.addChild(this.bBottom),this.container.addChild(this.spongebobContainer),this.container.addChild(this.largePlayButton),this.container.addChild(this.slapLogo),this.zManager.addZ(Game.displayStore.getSprite("dream-z"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-z"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-z"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-z"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-z"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-z"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-znightmare"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-znightmare"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-znightmare"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-znightmare"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-znightmare"),Game.getRandom(50,950,!0)),this.zManager.addZ(Game.displayStore.getSprite("dream-znightmare"),Game.getRandom(50,950,!0))},b.prototype.activatePlayButton=function(a){a.game.ui.addCustomUIButton(a.largePlayButton,!1)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"playbuttonlarge":this.game.setScene("hubScene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this),this.zManager.tick()},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.zManager.destroy(),this.animation&&this.animation.kill(),this.fogAnimation&&this.fogAnimation.kill(),this.spongebobAnimation&&this.spongebobAnimation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},PattyPileUpTitleScene=function(a){function b(b){a.call(this,b),this.id="pattyPileUpTitleScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),Game.displayStore.flush(["hub-assets","main-game-title-screen-assets"]),Game.audioManager.flush("hub-audio"),this.setBackgroundColor(11714614),1==this.game.runningHubMode?this.game.ui.setUI("mini-game-title"):this.game.ui.setUI("title"),this.game.currentBackDestinationID=this.id;var c=new PIXI.Text("Patty pile up title screen..",{font:"25px spongeboytt1",fill:"black",lineHeight:50,padding:20});c.position.x=150,c.position.y=40,this.largePlayButton=Game.displayStore.getButton("playbuttonlarge"),this.largePlayButton.visuallyPrepareButton("large"),this.largePlayButton.position.x=Game.stageWidth/2,this.largePlayButton.position.y=450,this.largePlayButton.scale.x=2,this.largePlayButton.scale.y=2,this.largePlayButton.rotation=Game.getRandom(-1,1),this.largePlayButton.alpha=0,this.slapLogo=Game.displayStore.getSprite("patty-brand-logo"),this.animation=new TimelineMax({onComplete:this.activatePlayButton,onCompleteParams:[this]}),this.animation.add([TweenMax.to(this.largePlayButton.scale,.6,{x:1,y:1,ease:Bounce.easeOut}),TweenMax.to(this.largePlayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largePlayButton,.25,{alpha:1,ease:Quad.easeOut})],2),this.background=Game.displayStore.getSprite("title-background"),this.leftPile=Game.displayStore.getSprite("title-left-pile"),this.rightPile=Game.displayStore.getSprite("title-right-pile"),this.redSauce=Game.displayStore.getSprite("title-red-sauce"),this.yellowSauce=Game.displayStore.getSprite("title-yellow-sauce"),this.titlePPatty=Game.displayStore.getSprite("title-p-patty"),this.titleAPatty=Game.displayStore.getSprite("title-a-patty"),this.titleT1Patty=Game.displayStore.getSprite("title-t1-patty"),this.titleT2Patty=Game.displayStore.getSprite("title-t2-patty"),this.titleYPatty=Game.displayStore.getSprite("title-y-patty"),this.spongebob=Game.displayStore.getSprite("title-spongebob"),this.spongebobArm=Game.displayStore.getSprite("title-spongebob-arm"),this.redSplat=Game.displayStore.getSprite("title-red-splat"),this.yellowSplat=Game.displayStore.getSprite("title-yellow-splat"),this.leftBun=Game.displayStore.getSprite("title-left-bun"),this.rightBun=Game.displayStore.getSprite("title-right-bun"),this.pickle=Game.displayStore.getSprite("title-pickle"),this.pickle2=Game.displayStore.getSprite("title-pickle"),this.pickle3=Game.displayStore.getSprite("title-pickle"),this.pickle4=Game.displayStore.getSprite("title-pickle"),this.spongebobBlink=Game.displayStore.getSprite("title-blink"),this.onion=Game.displayStore.getSprite("title-onion"),this.onion2=Game.displayStore.getSprite("title-onion"),this.onion3=Game.displayStore.getSprite("title-onion"),this.moveLine1=Game.displayStore.getSprite("title-move-line"),this.moveLine2=Game.displayStore.getSprite("title-move-line2"),this.moveLine3=Game.displayStore.getSprite("title-move-line3"),this.moveLine4=Game.displayStore.getSprite("title-move-line4"),this.background.scale.x=this.background.scale.y=1.1,this.titlePPatty.position.x=338,this.titlePPatty.position.y=153,this.titleAPatty.position.x=445,this.titleAPatty.position.y=160,this.titleT1Patty.position.x=520,this.titleT1Patty.position.y=114,this.titleT2Patty.position.x=590,this.titleT2Patty.position.y=150,this.titleYPatty.position.x=705,this.titleYPatty.position.y=152,this.pickle.position.x=300,this.pickle.position.y=265,this.pickle2.position.x=515,this.pickle2.position.y=230,this.pickle3.position.x=750,this.pickle3.position.y=60,this.pickle4.position.x=760,this.pickle4.position.y=485,this.pickle4.rotation=-2,this.onion.position.x=190,this.onion.position.y=230,this.onion.rotation=1.7,this.onion2.position.x=415,this.onion2.position.y=75,this.onion2.rotation=1,this.onion3.position.x=820,this.onion3.position.y=330,this.rightPatty=Game.displayStore.getSprite("title-right-patty"),this.leftPatty=Game.displayStore.getSprite("title-left-patty"),this.rightSalad=Game.displayStore.getSprite("title-salad-right"),this.leftSalad=Game.displayStore.getSprite("title-salad-left"),this.pileTitle=Game.displayStore.getSprite("title-pile-title"),this.background.position.x=Game.stageWidth/2,this.background.position.y=Game.stageHeight/2,this.spongebobBlink.alpha=0,this.container.addChild(c),this.container.addChild(this.background),this.container.addChild(this.leftPile),this.container.addChild(this.rightPile),this.container.addChild(this.redSplat),this.container.addChild(this.yellowSplat),this.container.addChild(this.yellowSauce),this.container.addChild(this.redSauce),this.container.addChild(this.moveLine1),this.container.addChild(this.moveLine2),this.container.addChild(this.moveLine3),this.container.addChild(this.moveLine4),this.container.addChild(this.rightBun),this.container.addChild(this.leftBun),this.container.addChild(this.pickle),this.container.addChild(this.pickle2),this.container.addChild(this.pickle3),this.container.addChild(this.pickle4),this.container.addChild(this.onion),this.container.addChild(this.onion2),this.container.addChild(this.onion3),this.container.addChild(this.spongebobArm),this.container.addChild(this.leftSalad),this.container.addChild(this.rightSalad),this.container.addChild(this.leftPatty),this.container.addChild(this.rightPatty),this.container.addChild(this.spongebob),this.container.addChild(this.spongebobBlink),this.container.addChild(this.titlePPatty),this.container.addChild(this.titleAPatty),this.container.addChild(this.titleT1Patty),this.container.addChild(this.titleT2Patty),this.container.addChild(this.titleYPatty),this.container.addChild(this.pileTitle),this.container.addChild(this.slapLogo),this.container.addChild(this.largePlayButton),this.blinkAnimation=new TimelineMax,this.blinkAnimation.repeat(-1).repeatDelay(3),this.blinkAnimation.add([TweenMax.to(this.spongebobBlink,.1,{alpha:1,ease:Power0}),TweenMax.to(this.spongebobBlink,.1,{alpha:0,ease:Power0,delay:.3})],3),this.foodAnimation=new TimelineMax,this.foodAnimation.add([TweenMax.from(this.rightPile.position,2,{y:700,ease:Power1.easeInOut}),TweenMax.from(this.leftPile.position,2,{y:700,ease:Power1.easeInOut}),TweenMax.from(this.background.position,2,{y:Game.stageHeight/2+40,ease:Power1.easeInOut}),TweenMax.from(this.spongebob.position,1,{x:-300,ease:Power2.easeInOut,delay:.5}),TweenMax.from(this.spongebobArm.position,1,{x:-200,ease:Power2.easeInOut,delay:.5}),TweenMax.from(this.spongebobArm,.8,{rotation:2,ease:Back.easeInOut,delay:1}),TweenMax.to(this.spongebobArm,2,{rotation:.06,ease:Back.easeInOut,delay:3,yoyo:!0,repeat:-1,repeatDelay:4})]),this.foodAnimation.add([TweenMax.from(this.rightPatty.position,1,{y:750,ease:Back.easeInOut}),TweenMax.from(this.leftPatty.position,1,{y:750,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.leftSalad.position,1,{y:750,ease:Back.easeInOut}),TweenMax.from(this.rightSalad.position,1,{y:750,ease:Back.easeInOut,delay:.1})],1),this.foodAnimation.add([TweenMax.from(this.redSauce.position,.4,{y:950,ease:Power2.easeIn}),TweenMax.from(this.yellowSauce.position,.4,{y:950,ease:Power2.easeIn,delay:.2})],1.5),this.foodAnimation.add([TweenMax.from(this.redSplat.scale,1,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.yellowSplat.scale,1,{x:0,y:0,ease:Back.easeInOut,delay:.2})],1.2),this.foodAnimation.add([TweenMax.from(this.titlePPatty.position,1,{y:750,x:512,ease:Back.easeInOut,delay:.1}),TweenMax.from(this.titleAPatty.position,1,{y:750,x:512,ease:Back.easeInOut}),TweenMax.from(this.titleT1Patty.position,1,{y:750,x:512,ease:Back.easeInOut,delay:.1}),TweenMax.from(this.titleT2Patty.position,1,{y:750,x:512,ease:Back.easeInOut}),TweenMax.from(this.titleYPatty.position,1,{y:750,x:512,ease:Back.easeInOut}),TweenMax.from(this.pileTitle.position,1,{y:750,x:512,ease:Back.easeInOut,delay:.1}),TweenMax.from(this.moveLine1,.1,{alpha:0,ease:Power1.easeIn,delay:.5}),TweenMax.from(this.moveLine2,.1,{alpha:0,ease:Power1.easeIn,delay:.5}),TweenMax.from(this.moveLine3,.1,{alpha:0,ease:Power1.easeIn,delay:.5}),TweenMax.from(this.moveLine4,.1,{alpha:0,ease:Power1.easeIn,delay:.5}),TweenMax.from(this.onion,1,{rotation:-2,ease:Back.easeInOut}),TweenMax.from(this.onion.position,1,{y:700,ease:Back.easeInOut}),TweenMax.from(this.onion2,1,{rotation:2,ease:Back.easeInOut}),TweenMax.from(this.onion2.position,1,{y:700,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.onion3,1,{rotation:3,ease:Back.easeInOut}),TweenMax.from(this.onion3.position,1,{y:700,ease:Back.easeInOut}),TweenMax.from(this.pickle.position,1,{y:750,ease:Back.easeInOut,delay:.1}),TweenMax.from(this.pickle2.position,1,{y:750,ease:Back.easeInOut}),TweenMax.from(this.pickle3.position,1,{y:750,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.pickle4.position,1,{y:750,ease:Back.easeInOut}),TweenMax.from(this.leftBun.position,1,{y:780,ease:Back.easeInOut}),TweenMax.from(this.leftBun,.8,{rotation:-1,ease:Back.easeIn}),TweenMax.from(this.rightBun,.7,{rotation:-2,ease:Back.easeIn}),TweenMax.from(this.rightBun.position,.7,{y:780,ease:Back.easeInOut,delay:.1}),TweenMax.from(this.slapLogo.scale,.6,{x:0,y:0,ease:Back.easeOut})],1)},b.prototype.activatePlayButton=function(a){a.game.ui.addCustomUIButton(a.largePlayButton,!1)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"playbuttonlarge":this.game.setScene("pattyPileUpIntro1Scene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill(),this.foodAnimation&&this.foodAnimation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},MeowNoTitleScene=function(a){function b(b){a.call(this,b),this.id="meowNoTitleScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.setBackgroundColor(11714614),Game.displayStore.flush(["hub-assets","main-game-title-screen-assets"]),Game.audioManager.flush("hub-audio"),1==this.game.runningHubMode?this.game.ui.setUI("mini-game-title"):this.game.ui.setUI("title"),this.game.currentBackDestinationID=this.id,this.largePlayButton=Game.displayStore.getButton("playbuttonlarge"),this.largePlayButton.visuallyPrepareButton("large"),this.largePlayButton.position.x=Game.stageWidth/2,this.largePlayButton.position.y=450,this.largePlayButton.scale.x=2,this.largePlayButton.scale.y=2,this.largePlayButton.rotation=Game.getRandom(-1,1),this.largePlayButton.alpha=0,this.bubbleManager=new MeowNoSceneBubbleManager(this),this.positionCounter=0,this.background=Game.displayStore.getSprite("title-mn-background"),this.gary=Game.displayStore.getSprite("title-mn-gary"),this.bubbleCloud=Game.displayStore.getSprite("title-mn-bubble-cloud"),this.spongebobArm=Game.displayStore.getSprite("title-mn-arm"),this.spongebobArmShadow=Game.displayStore.getSprite("title-mn-arm-shadow"),this.spongebobShadow=Game.displayStore.getSprite("title-mn-spongebob-shadow"),this.titleNo=Game.displayStore.getSprite("title-mn-no"),this.garyBlink=Game.displayStore.getSprite("title-mn-blink"),this.slapLogo=Game.displayStore.getSprite("meow-brand-logo"),this.meowM=Game.displayStore.getSprite("title-mn-m-meow"),this.meowE=Game.displayStore.getSprite("title-mn-e-meow"),this.meowO=Game.displayStore.getSprite("title-mn-o-meow"),this.meowW=Game.displayStore.getSprite("title-mn-w-meow"),this.garyBlink.alpha=0,this.spongebobArmShadow.rotation=.2,this.animation=new TimelineMax({onComplete:this.activatePlayButton,onCompleteParams:[this]});var c=new PIXI.Text("Meow No!! title screen..",{font:"25px spongeboytt1",fill:"black",lineHeight:50,padding:20});c.position.x=40,c.position.y=40,this.container.addChild(this.background),this.container.addChild(this.gary),this.container.addChild(this.bubbleCloud),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),
this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.bubbleManager.addBubble(Game.displayStore.getSprite("title-mn-bubble"),Game.getRandom(280,700,!0)),this.container.addChild(this.meowE),this.container.addChild(this.meowO),this.container.addChild(this.meowW),this.container.addChild(this.meowM),this.container.addChild(this.spongebobArmShadow),this.container.addChild(this.spongebobShadow),this.container.addChild(this.spongebobArm),this.container.addChild(this.titleNo),this.container.addChild(this.largePlayButton),this.container.addChild(this.slapLogo),this.titleAnimation=new TimelineMax,this.titleAnimation.add([TweenMax.from(this.background.scale,2.5,{x:2,y:2,ease:Power4.easeInOut}),TweenMax.from(this.gary.scale,2.5,{x:2,y:2,ease:Power4.easeInOut})]),this.titleAnimation.add([TweenMax.from(this.spongebobArm.position,1,{x:-570,ease:Power3.easeInOut}),TweenMax.from(this.spongebobArmShadow.position,1,{y:890,ease:Power3.easeInOut}),TweenMax.from(this.spongebobShadow.position,1,{x:-200,y:680,ease:Power3.easeInOut}),TweenMax.from(this.spongebobShadow.scale,1,{x:0,y:0,ease:Power3.easeOut}),TweenMax.from(this.slapLogo.scale,.6,{x:0,y:0,ease:Back.easeOut})],1),this.titleAnimation.add([TweenMax.from(this.spongebobArm,3,{rotation:.2,ease:Power3.easeInOut,yoyo:!0,repeat:-1}),TweenMax.from(this.spongebobArmShadow,3,{rotation:.4,ease:Power3.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.spongebobShadow.scale,2,{x:1.05,y:1.05,ease:Power3.easeInOut,yoyo:!0,repeat:-1}),TweenMax.from(this.titleNo.scale,.5,{x:0,y:0,ease:Power3.easeOut}),TweenMax.from(this.meowM.scale,.5,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.meowE.scale,.5,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.meowO.scale,.5,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.meowW.scale,.5,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.bubbleCloud.scale,.5,{x:0,y:0,ease:Power3.easeOut}),TweenMax.to(this.bubbleCloud.scale,3,{x:.95,delay:.5,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.bubbleCloud.scale,3,{y:.95,delay:.5,ease:Sine.easeInOut,repeat:-1,yoyo:!0})],2),this.mnBlinkAnimation=new TimelineMax,this.mnBlinkAnimation.repeat(-1).repeatDelay(3),this.mnBlinkAnimation.add([TweenMax.to(this.garyBlink,.1,{alpha:1,ease:Power0}),TweenMax.to(this.garyBlink,.1,{alpha:0,ease:Power0,delay:.3})],3),this.animation.add([TweenMax.to(this.largePlayButton.scale,.6,{x:1,y:1,ease:Bounce.easeOut}),TweenMax.to(this.largePlayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largePlayButton,.25,{alpha:1,ease:Quad.easeOut})],3.5)},b.prototype.activatePlayButton=function(a){a.game.ui.addCustomUIButton(a.largePlayButton,!1)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"playbuttonlarge":this.game.setScene("meowNoIntro1Scene")}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this),this.bubbleManager.tick()},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill(),this.titleAnimation&&this.titleAnimation.kill(),this.mnBlinkAnimation&&this.mnBlinkAnimation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryTitleScene=function(a){function b(b){a.call(this,b),this.id="glideToGloryTitleScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),Game.displayStore.flush(["hub-assets","main-game-title-screen-assets"]),Game.audioManager.flush("hub-audio"),this.setBackgroundColor(11714614),1==this.game.runningHubMode?this.game.ui.setUI("mini-game-title"):this.game.ui.setUI("title"),this.game.currentBackDestinationID=this.id,this.animation=new TimelineMax;var c=new PIXI.Text("Glide To Glory title screen..",{font:"25px spongeboytt1",fill:"black",lineHeight:50,padding:20});c.position.x=40,c.position.y=40,this.background=Game.displayStore.getSprite("title-gg-background"),this.beam=Game.displayStore.getSprite("title-gg-beam"),this.bloon1=Game.displayStore.getSprite("title-gg-balloon1"),this.bloon2=Game.displayStore.getSprite("title-gg-balloon2"),this.gloryTitle=Game.displayStore.getSprite("title-gg-glory"),this.tTo=Game.displayStore.getSprite("title-gg-t-to"),this.oTo=Game.displayStore.getSprite("title-gg-o-to"),this.gGlide=Game.displayStore.getSprite("title-gg-g-glide"),this.lGlide=Game.displayStore.getSprite("title-gg-l-glide"),this.iGlide=Game.displayStore.getSprite("title-gg-i-glide"),this.dGlide=Game.displayStore.getSprite("title-gg-d-glide"),this.eGlide=Game.displayStore.getSprite("title-gg-e-glide"),this.slapLogo=Game.displayStore.getSprite("glide-brand-logo"),this.starBurst1=Game.displayStore.getSprite("title-gg-starburst1"),this.starBurst2=Game.displayStore.getSprite("title-gg-starburst1"),this.starBurst2.rotation=2,this.starBurst1.alpha=.7,this.starBurst2.alpha=.7,this.starBurst1.scale.x=this.starBurst1.scale.y=1.3,this.starBurst2.scale.x=this.starBurst2.scale.y=1.3,this.planktonContainer=Game.displayStore.getContainer("plankton-container"),this.background.position.x=Game.stageWidth/2,this.background.position.y=Game.stageHeight/2,this.largePlayButton=Game.displayStore.getButton("playbuttonlarge"),this.largePlayButton.visuallyPrepareButton("large"),this.largePlayButton.position.x=Game.stageWidth/2,this.largePlayButton.position.y=450,this.largePlayButton.scale.x=2,this.largePlayButton.scale.y=2,this.largePlayButton.rotation=Game.getRandom(-1,1),this.largePlayButton.alpha=0,this.animation=new TimelineMax({onComplete:this.activatePlayButton,onCompleteParams:[this]}),this.glideAnimation=new TimelineMax({}),this.animation.add([TweenMax.to(this.largePlayButton.scale,.6,{x:1,y:1,ease:Bounce.easeOut}),TweenMax.to(this.largePlayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largePlayButton,.25,{alpha:1,ease:Quad.easeOut})],3.5),this.starBurst1.blendMode=PIXI.BLEND_MODES.ADD,this.starBurst2.blendMode=PIXI.BLEND_MODES.ADD,this.container.addChild(c),this.container.addChild(this.background),this.container.addChild(this.beam),this.container.addChild(this.starBurst1),this.container.addChild(this.starBurst2),this.container.addChild(this.gGlide),this.container.addChild(this.lGlide),this.container.addChild(this.iGlide),this.container.addChild(this.dGlide),this.container.addChild(this.eGlide),this.container.addChild(this.bloon1),this.container.addChild(this.bloon2),this.container.addChild(this.oTo),this.container.addChild(this.tTo),this.container.addChild(this.gloryTitle),this.container.addChild(this.planktonContainer),this.container.addChild(this.largePlayButton),this.container.addChild(this.slapLogo),this.glideAnimation.add([TweenMax.from(this.background.scale,3,{x:1.1,y:1.1,ease:Back.easeInOut}),TweenMax.from(this.background.position,3,{y:Game.stageHeight/2+30,ease:Back.easeInOut}),TweenMax.from(this.beam.position,3,{y:55,ease:Back.easeInOut}),TweenMax.from(this.slapLogo.scale,.6,{x:0,y:0,ease:Back.easeOut,delay:.5})],0),this.glideAnimation.add([TweenMax.from(this.tTo.position,3,{y:700,ease:Back.easeInOut}),TweenMax.from(this.oTo.position,3,{y:700,ease:Back.easeInOut}),TweenMax.from(this.bloon1.position,3,{y:680,ease:Back.easeInOut}),TweenMax.from(this.bloon2.position,3,{y:680,ease:Back.easeInOut})],1),this.glideAnimation.add([TweenMax.to(this.bloon1.position,4,{y:100,ease:Back.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.bloon2.position,3,{x:780,y:110,ease:Back.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.tTo.position,4,{y:170,ease:Back.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.oTo.position,3,{x:780,y:180,ease:Back.easeInOut,yoyo:!0,repeat:-1})],4.1),this.glideAnimation.add([TweenMax.from(this.starBurst1.scale,.6,{x:0,y:0,ease:Back.easeInOut}),TweenMax.from(this.starBurst2.scale,.6,{x:0,y:0,ease:Back.easeInOut}),TweenMax.from(this.gGlide.position,.5,{x:512,y:300,ease:Back.easeOut}),TweenMax.from(this.gGlide.scale,.5,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.lGlide.position,.5,{x:512,y:300,ease:Back.easeOut}),TweenMax.from(this.lGlide.scale,.5,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.iGlide.position,.5,{x:512,y:300,ease:Back.easeOut}),TweenMax.from(this.iGlide.scale,.5,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.dGlide.position,.5,{x:512,y:300,ease:Back.easeOut}),TweenMax.from(this.dGlide.scale,.5,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.eGlide.position,.5,{x:512,y:300,ease:Back.easeOut}),TweenMax.from(this.eGlide.scale,.5,{x:0,y:0,ease:Back.easeOut}),TweenMax.from(this.gloryTitle.scale,.4,{x:0,y:0,ease:Back.easeOut,delay:.3})],1.5),this.glideAnimation.add([TweenMax.from(this.planktonContainer.position,1,{y:140,x:-600,ease:Power4.easeInOut}),TweenMax.to(this.planktonContainer.position,2,{y:10,x:10,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:1})],2),1==Game.onDesktop&&(this.animation.call(Game.playSound,["woosh5"],this,2.2),this.animation.call(Game.playSound,["plankton-finally"],this,3)),this.glideAnimation.add([TweenMax.to(this.starBurst1,4,{rotation:this.starBurst1.rotation--,ease:Power1.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.starBurst2,8,{rotation:this.starBurst2.rotation++,ease:Power1.easeInOut,repeat:-1,yoyo:!0})],1.5)},b.prototype.activatePlayButton=function(a){a.game.ui.addCustomUIButton(a.largePlayButton,!1)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"playbuttonlarge":Game.stopSound("plankton-finally"),this.game.setScene("glideToGloryIntro1Scene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill(),this.glideAnimation&&this.glideAnimation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},SlapHappyTitleScene=function(a){function b(b){a.call(this,b),this.id="slapHappyTitleScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.setBackgroundColor(11714614),Game.displayStore.flush(["hub-assets","main-game-title-screen-assets"]),Game.audioManager.flush("hub-audio"),1==this.game.runningHubMode?this.game.ui.setUI("mini-game-title"):this.game.ui.setUI("title"),this.game.currentBackDestinationID=this.id,this.background=Game.displayStore.getSprite("title-background"),this.slapTitle=Game.displayStore.getSprite("title-slap-title"),this.titleS=Game.displayStore.getSprite("title-slap-s"),this.titleL=Game.displayStore.getSprite("title-slap-l"),this.titleA=Game.displayStore.getSprite("title-slap-a"),this.titleP=Game.displayStore.getSprite("title-slap-p"),this.leftBob=Game.displayStore.getSprite("title-left-bob"),this.leftBobBack=Game.displayStore.getSprite("title-back-bob2"),this.rightBobBack=Game.displayStore.getSprite("title-back-bob"),this.rightBob=Game.displayStore.getSprite("title-right-bob"),this.frontBob=Game.displayStore.getSprite("title-front-bob"),this.squidArmRight=Game.displayStore.getSprite("title-right-arm"),this.squidArmLeft=Game.displayStore.getSprite("title-left-arm"),this.flower1=Game.displayStore.getSprite("title-flower"),this.flower2=Game.displayStore.getSprite("title-flower"),this.flower3=Game.displayStore.getSprite("title-flower"),this.shockMark1=Game.displayStore.getSprite("title-shock-mark"),this.shockMark2=Game.displayStore.getSprite("title-shock-mark"),this.shockMark3=Game.displayStore.getSprite("title-shock-mark"),this.slapLogo=Game.displayStore.getSprite("slap-brand-logo"),this.largePlayButton=Game.displayStore.getButton("playbuttonlarge"),this.largePlayButton.visuallyPrepareButton("large"),this.largePlayButton.position.x=Game.stageWidth/2,this.largePlayButton.position.y=500,this.largePlayButton.scale.x=2,this.largePlayButton.scale.y=2,this.largePlayButton.rotation=Game.getRandom(-1,1),this.largePlayButton.alpha=0,this.hitMarkArray=new Array,this.hitMarkArray.push({sprite:Game.displayStore.getSprite("title-hit-mark"),xPos:360,yPos:280,scale:1.1}),this.hitMarkArray.push({sprite:Game.displayStore.getSprite("title-hit-mark"),xPos:430,yPos:280,scale:1}),this.hitMarkArray.push({sprite:Game.displayStore.getSprite("title-hit-mark"),xPos:450,yPos:260,scale:1}),this.hitMarkArray.push({sprite:Game.displayStore.getSprite("title-hit-mark"),xPos:500,yPos:280,scale:1.1}),this.hitMarkArray.push({sprite:Game.displayStore.getSprite("title-hit-mark"),xPos:550,yPos:270,scale:1}),this.hitMarkArray.push({sprite:Game.displayStore.getSprite("title-hit-mark"),xPos:600,yPos:280,scale:1.2}),this.hitMarkArray.push({sprite:Game.displayStore.getSprite("title-hit-mark"),xPos:650,yPos:290,scale:1}),this.hitMarkArray.push({sprite:Game.displayStore.getSprite("title-hit-mark"),xPos:680,yPos:250,scale:1}),this.hitMarkArray.push({sprite:Game.displayStore.getSprite("title-hit-mark"),xPos:580,yPos:280,scale:1}),this.hitMarkArray.push({sprite:Game.displayStore.getSprite("title-hit-mark"),xPos:700,yPos:290,scale:1}),this.popMarkArray=new Array,this.popMarkArray.push({sprite:Game.displayStore.getSprite("title-pop-mark"),xPos:360,yPos:160,scale:1.1,rotation:-1}),this.popMarkArray.push({sprite:Game.displayStore.getSprite("title-pop-mark"),xPos:550,yPos:140,scale:1.3,rotation:-1}),this.popMarkArray.push({sprite:Game.displayStore.getSprite("title-pop-mark"),xPos:730,yPos:200,scale:1.2,rotation:1}),this.popMarkArray.push({sprite:Game.displayStore.getSprite("title-pop-mark"),xPos:255,yPos:300,scale:.5,rotation:-2.5}),this.flower1.position.x=185,this.flower1.position.y=275,this.flower2.position.x=210,this.flower2.position.y=80,this.flower2.scale.x=.5,this.flower2.scale.y=.5,this.flower1.blendMode=PIXI.BLEND_MODES.ADD,this.flower2.blendMode=PIXI.BLEND_MODES.ADD,this.flower3.blendMode=PIXI.BLEND_MODES.ADD,this.shockMark1.position.x=315,this.shockMark1.position.y=110,this.shockMark2.position.x=600,this.shockMark2.position.y=30,this.shockMark2.rotation=1.7,this.shockMark3.position.x=810,this.shockMark3.position.y=325,this.shockMark3.rotation=-3,this.flower3.position.x=880,this.flower3.position.y=170,this.background.position.x=Game.stageWidth/2,this.background.position.y=Game.stageHeight/2,this.container.addChild(this.background),this.container.addChild(this.flower1),this.container.addChild(this.flower2),this.container.addChild(this.flower3),this.container.addChild(this.leftBobBack),this.container.addChild(this.rightBobBack),this.container.addChild(this.frontBob),this.container.addChild(this.rightBob),this.container.addChild(this.leftBob),this.container.addChild(this.shockMark1),this.container.addChild(this.shockMark2),this.container.addChild(this.shockMark3);for(var c=0;c<this.hitMarkArray.length;c++)this.hitMarkArray[c].sprite.position.x=this.hitMarkArray[c].xPos,this.hitMarkArray[c].sprite.position.y=this.hitMarkArray[c].yPos,this.hitMarkArray[c].sprite.scale.y=this.hitMarkArray[c].sprite.scale.x=this.hitMarkArray[c].scale,this.container.addChild(this.hitMarkArray[c].sprite);for(var c=0;c<this.popMarkArray.length;c++)this.popMarkArray[c].sprite.position.x=this.popMarkArray[c].xPos,this.popMarkArray[c].sprite.rotation=this.popMarkArray[c].rotation,this.popMarkArray[c].sprite.position.y=this.popMarkArray[c].yPos,this.popMarkArray[c].sprite.scale.y=this.popMarkArray[c].sprite.scale.x=this.popMarkArray[c].scale,this.container.addChild(this.popMarkArray[c].sprite);this.container.addChild(this.titleS),this.container.addChild(this.titleL),this.container.addChild(this.titleA),this.container.addChild(this.titleP),this.container.addChild(this.slapTitle),this.container.addChild(this.squidArmLeft),this.container.addChild(this.squidArmRight),this.container.addChild(this.slapLogo),this.animation=new TimelineMax,this.animation.add([TweenMax.from(this.flower1,15,{rotation:2,ease:Back.easeInOut,yoyo:!0,repeat:-1}),TweenMax.from(this.flower2,15,{rotation:3,ease:Back.easeInOut,yoyo:!0,repeat:-1}),TweenMax.from(this.flower3,15,{rotation:-2,ease:Back.easeInOut,yoyo:!0,repeat:-1})]),this.animation.add([TweenMax.from(this.frontBob.position,1.5,{y:950,ease:Elastic.easeOut}),TweenMax.from(this.leftBob.position,1.5,{x:-300,y:860,ease:Elastic.easeOut,delay:.2}),TweenMax.from(this.rightBob.position,1.5,{x:1100,y:860,ease:Elastic.easeOut,delay:.2}),TweenMax.from(this.rightBobBack.position,2.3,{x:1e3,y:860,ease:Elastic.easeOut,delay:.4}),TweenMax.from(this.leftBobBack.position,2.3,{x:-200,y:860,ease:Elastic.easeOut,delay:.4}),TweenMax.from(this.squidArmRight.position,.5,{y:800,ease:Power4.easeInOut,delay:.5}),TweenMax.from(this.squidArmLeft.position,.5,{y:800,ease:Power4.easeInOut,delay:.5}),TweenMax.to(this.squidArmRight.position,.08,{x:950,ease:Power1.easeInOut,yoyo:!0,repeat:4}),TweenMax.to(this.squidArmLeft.position,.07,{x:150,ease:Power1.easeInOut,yoyo:!0,repeat:4}),TweenMax.to(this.squidArmRight,.1,{rotation:-.1,ease:Power1.easeInOut,yoyo:!0,repeat:4}),TweenMax.to(this.squidArmLeft,.2,{rotation:.1,ease:Power1.easeInOut,yoyo:!0,repeat:4}),TweenMax.to(this.squidArmRight.position,1,{x:600,ease:Back.easeInOut,delay:1}),TweenMax.to(this.squidArmLeft.position,1,{x:400,ease:Back.easeInOut,delay:1})],.3),this.animation.add([TweenMax.to(this.squidArmRight.position,2,{x:850,y:600,ease:Power4.easeInOut,yoyo:!0,repeat:-1,delay:3}),TweenMax.to(this.squidArmRight,4,{rotation:.4,ease:Power4.easeInOut,yoyo:!0,repeat:-1,delay:3}),TweenMax.to(this.squidArmLeft.position,4,{x:300,y:500,ease:Power4.easeInOut,yoyo:!0,repeat:-1,delay:3}),TweenMax.to(this.squidArmLeft,2,{rotation:-.2,ease:Power4.easeInOut,yoyo:!0,repeat:-1,delay:3}),TweenMax.to(this.rightBobBack.position,2,{x:800,y:610,ease:Power0.easeIn,yoyo:!0,repeat:-1,repeatDelay:.2,delay:2}),TweenMax.to(this.frontBob.position,2,{x:525,y:560,ease:Power0.easeIn,yoyo:!0,repeat:-1,repeatDelay:.2,delay:2}),TweenMax.to(this.leftBob.position,2,{x:125,y:470,ease:Back.easeIn,yoyo:!0,repeat:-1,repeatDelay:.4,delay:1.3}),TweenMax.to(this.leftBobBack.position,2,{x:280,y:610,ease:Power0.easeIn,yoyo:!0,repeatDelay:.3,repeat:-1,delay:2.5}),TweenMax.to(this.rightBob.position,2,{x:915,y:460,ease:Back.easeIn,yoyo:!0,repeatDelay:.5,repeat:-1,delay:1.8})],.4),this.animation.add([TweenMax.from(this.hitMarkArray[0].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut}),TweenMax.from(this.hitMarkArray[2].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut,delay:.3}),TweenMax.from(this.hitMarkArray[3].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut}),TweenMax.from(this.hitMarkArray[4].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut}),TweenMax.from(this.hitMarkArray[5].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.hitMarkArray[6].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut}),TweenMax.from(this.hitMarkArray[7].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut,delay:.3}),TweenMax.from(this.hitMarkArray[8].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut,delay:.1}),TweenMax.from(this.hitMarkArray[9].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut}),TweenMax.from(this.hitMarkArray[1].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.popMarkArray[0].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.popMarkArray[2].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut}),TweenMax.from(this.popMarkArray[3].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut,delay:.1}),TweenMax.from(this.popMarkArray[1].sprite.scale,.3,{x:0,y:0,ease:Back.easeInOut,delay:.2})],.5),this.animation.add([TweenMax.from(this.slapTitle.scale,.3,{x:0,y:0,ease:Power2.easeInOut}),TweenMax.from(this.titleS.scale,.3,{x:0,y:0,ease:Power2.easeInOut}),TweenMax.from(this.titleL.scale,.3,{x:0,y:0,ease:Power2.easeInOut,delay:.1}),TweenMax.from(this.titleA.scale,.3,{x:0,y:0,ease:Power2.easeInOut,delay:.3}),TweenMax.from(this.titleP.scale,.3,{x:0,y:0,ease:Power2.easeInOut,delay:.2}),TweenMax.from(this.slapLogo.scale,.6,{x:0,y:0,ease:Back.easeOut})],.5),this.animation.add([TweenMax.to(this.largePlayButton.scale,.6,{x:1,y:1,ease:Bounce.easeOut}),TweenMax.to(this.largePlayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largePlayButton,.25,{alpha:1,ease:Quad.easeOut})],1.5),this.animation.call(this.activatePlayButton,[this],null,2),this.container.addChild(this.largePlayButton)},b.prototype.activatePlayButton=function(a){a.game.ui.addCustomUIButton(a.largePlayButton,!1)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"playbuttonlarge":this.game.setScene("slapHappyIntro1Scene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},HubScene=function(a){function b(b){a.call(this,b),this.sliceWidth=334,this.id="hubScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.setBackgroundColor(16774733),this.game.ui.setUI("hub"),Game.playSound("music"),Game.fadeSound("music",1,.8),this.inputAllowed=!0,this.backButtonAllowed=!1,this.blackOverlay=Game.displayStore.getSprite("black-overlay"),this.blackOverlay.width=Game.gameWidth,this.blackOverlay.height=Game.gameHeight,this.blackOverlay.alpha=.75,this.overlayGradient=Game.displayStore.getSprite("overlay-gradient"),this.overlayGradient.position.x=Game.stageWidth/2,this.overlayGradient.position.y=Game.stageHeight/2,this.overlayHolder=Game.displayStore.getContainer("overlay-holder"),this.overlayCloud1=Game.displayStore.getSprite("overlay-cloud"),this.overlayCloud2=Game.displayStore.getSprite("overlay-cloud"),this.overlayCloud3=Game.displayStore.getSprite("overlay-cloud"),this.overlayBorder1=Game.displayStore.getSprite("bamboo-border"),this.overlayBorder2=Game.displayStore.getSprite("bamboo-border"),this.overlayHolder.addChild(this.blackOverlay),this.overlayHolder.addChild(this.overlayGradient),this.panelWidth=1336,this.hubPositionState=-1,this.panelMoveTime=.5,this.hubPositions=new Array,this.hubPositions.push(0),this.hubPositions.push(-(1336-Game.stageWidth)),this.border1=Game.displayStore.getSprite("bamboo-border"),this.border2=Game.displayStore.getSprite("bamboo-border"),this.border3=Game.displayStore.getSprite("bamboo-border"),this.border1.position.x=this.sliceWidth,this.border2.position.x=2*this.sliceWidth,this.border3.position.x=3*this.sliceWidth,this.hubPanelHolder=Game.displayStore.getContainer("hub-panel-holder"),this.hubPanelHolder.position.x=-(1336-Game.stageWidth)/2,this.panels=new Array,this.panels.push(new HubPanel(this,this.hubPanelHolder,Game.displayStore.getContainer("panel-1-holder"),0)),this.panels.push(new HubPanel(this,this.hubPanelHolder,Game.displayStore.getContainer("panel-2-holder"),1)),this.panels.push(new HubPanel(this,this.hubPanelHolder,Game.displayStore.getContainer("panel-3-holder"),2)),this.panels.push(new HubPanel(this,this.hubPanelHolder,Game.displayStore.getContainer("panel-4-holder"),3)),this.container.addChild(this.hubPanelHolder),this.hubPanelHolder.addChild(this.border1),this.hubPanelHolder.addChild(this.border2),this.hubPanelHolder.addChild(this.border3)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"leftbutton":this.movePanel(-1);break;case"rightbutton":this.movePanel(1);break;case"backbutton":this.backToHub();break;case"playbutton":var c=this;this.game.loadAssets(this.currentAssetIDs,!0,function(){c.game.setScene(c.targetSceneID,!1)})}},b.prototype.movePanel=function(a){var b,c;1==a?(0==this.hubPositionState?(b=this.hubPositions[1],c=this.panelMoveTime):(b=this.hubPositions[1],c=this.panelMoveTime/2),this.hubPositionState=1,this.game.ui.rightButton.visible=!1,this.game.ui.leftButton.visible=!0):-1==a&&(1==this.hubPositionState?(b=this.hubPositions[0],c=this.panelMoveTime):(b=this.hubPositions[0],c=this.panelMoveTime/2),this.game.ui.leftButton.visible=!1,this.game.ui.rightButton.visible=!0,this.hubPositionState=0),this.panelMoveTween&&this.panelMoveTween.kill(),this.panelMoveTween=TweenMax.to(this.hubPanelHolder.position,c,{x:b,ease:Sine.easeInOut})},b.prototype.backToHub=function(){0!=this.backButtonAllowed&&(this.backButtonAllowed=!1,this.disappearTimeline&&this.disappearTimeline.kill(),this.disappearTimeline=new TimelineMax({onComplete:this.removeOverlayElements,onCompleteParams:[this]}),this.disappearTimeline.add([TweenMax.to(this.overlayLogo,.25,{alpha:0,ease:Sine.easeOut}),TweenMax.to(this.overlayCloud2,.25,{alpha:0,ease:Sine.easeOut})],0),this.disappearTimeline.add([TweenMax.to(this.overlayCloud1.scale,1,{x:4,y:4,ease:Back.easeIn}),TweenMax.to(this.overlayCloud1.position,1,{x:Game.stageWidth/2,y:Game.stageHeight/2,ease:Back.easeIn})],.25),this.overlayTimeline&&this.overlayTimeline.kill(),Game.displayStore.returnPooledItem(this.overlayLogo),Game.displayStore.returnPooledItem(this.overlayCharacter),Game.displayStore.returnPooledItem(this.overlayFloorBG),Game.displayStore.returnPooledItem(this.overlayBed),Game.displayStore.returnPooledItem(this.overlayCharacter),Game.displayStore.returnPooledItem(this.overlayCloud1),Game.displayStore.returnPooledItem(this.overlayCloud2))},b.prototype.removeOverlayElements=function(a){for(var b=0;b<a.panels.length;b++)a.panels[b].backToHub();a.container.removeChild(a.overlayFloorBG),a.container.removeChild(a.overlayCharacter),a.container.removeChild(a.overlayBorder1),a.container.removeChild(a.overlayBorder2),a.container.removeChild(a.overlayLogo),a.container.removeChild(a.overlayHolder),a.container.removeChild(a.overlayCloud2),a.overlayCloud2.alpha=1,a.disappearTimeline&&a.disappearTimeline.kill(),a.disappearTimeline=new TimelineMax({onComplete:a.killOverlay,onCompleteParams:[a]}),a.disappearTimeline.add([TweenMax.to(a.overlayCloud1,.5,{alpha:0,ease:Sine.easeOut})],0)},b.prototype.killOverlay=function(a){a.container.removeChild(a.overlayCloud1),a.game.ui.setUI("hub"),a.inputAllowed=!0,a.backButtonAllowed=!0},b.prototype.activateOverlay=function(a,b,c){for(var d=0;d<this.panels.length;d++)this.panels[d].overlayActivated();this.container.addChild(this.overlayHolder),this.container.addChild(this.overlayCloud1),this.overlayCloud1.position.x=Game.stageWidth/2,this.overlayCloud1.position.y=Game.stageHeight/2,this.overlayCloud1.scale.x=this.overlayCloud1.scale.y=3,this.overlayCloud1.alpha=0,this.blackOverlay.alpha=0,this.overlayGradient.scale.x=0,this.overlayGradient.scale.y=0,this.backButtonAllowed=!0,this.overlayTimeline&&this.overlayTimeline.kill(),this.overlayTimeline=new TimelineMax,this.overlayTimeline.add([TweenMax.to(this.overlayCloud1,.2,{alpha:1,ease:Sine.easeOut})],0),this.overlayTimeline.call(this.addOverlayBGElements,[this,a,b,c],null,.2),this.overlayTimeline.add([TweenMax.to(this.overlayCloud1.scale,1,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.overlayCloud1.position,1,{y:175,ease:Sine.easeOut})],.2),this.overlayTimeline.add([TweenMax.to(this.overlayGradient.scale,.3,{x:4,y:4,ease:Back.easeOut})],.4)},b.prototype.addOverlayBGElements=function(a,b,c,d){switch(a.blackOverlay.alpha=.75,a.game.ui.setUI("hub-overlay"),b){case 0:a.game.preloaderBackgroundColour=a.game.preloaderBackgroundColours[0],a.game.cloudColour=a.game.cloudColours[0],a.overlayFloorBG=Game.displayStore.getSprite("bed-bg"),a.overlayCharacter=Game.displayStore.getSprite("hub-character-plankton"),a.overlayFloorBG.tint=a.game.preloaderBackgroundColours[0],a.overlayCloud1.tint=a.game.cloudColours[0],a.overlayCloud2.tint=a.game.cloudColours[0],a.overlayGradient.tint=a.game.preloaderBackgroundColours[0],a.overlayLogo=Game.displayStore.getSprite("hub-logo-glide"),a.targetSceneID="glideToGloryTitleScene",a.currentAssetIDs=["glide-to-glory-assets","title-glide-to-glory-assets","intro-glide-to-glory-assets","glide-to-glory-audio"],a.overlayCharacter.position.y=Game.stageHeight;break;case 1:a.game.preloaderBackgroundColour=a.game.preloaderBackgroundColours[1],a.game.cloudColour=a.game.cloudColours[1],a.overlayFloorBG=Game.displayStore.getSprite("bed-bg"),a.overlayCharacter=Game.displayStore.getSprite("hub-character-spongebob"),a.overlayFloorBG.tint=a.game.preloaderBackgroundColours[1],a.overlayCloud1.tint=a.game.cloudColours[1],a.overlayCloud2.tint=a.game.cloudColours[1],a.overlayGradient.tint=a.game.preloaderBackgroundColours[1],a.overlayLogo=Game.displayStore.getSprite("hub-logo-patty"),a.targetSceneID="pattyPileUpTitleScene",a.currentAssetIDs=["patty-pileup-assets","title-patty-pileup-assets","intro-patty-pileup-assets","patty-pileup-audio"],a.overlayCharacter.position.y=Game.stageHeight;break;case 2:a.game.preloaderBackgroundColour=a.game.preloaderBackgroundColours[2],a.game.cloudColour=a.game.cloudColours[2],a.overlayFloorBG=Game.displayStore.getSprite("bed-bg"),a.overlayCharacter=Game.displayStore.getSprite("hub-character-squidward"),a.overlayFloorBG.tint=a.game.preloaderBackgroundColours[2],a.overlayCloud1.tint=a.game.cloudColours[2],a.overlayCloud2.tint=a.game.cloudColours[2],a.overlayGradient.tint=a.game.preloaderBackgroundColours[2],a.overlayLogo=Game.displayStore.getSprite("hub-logo-slap"),a.targetSceneID="slapHappyTitleScene",a.currentAssetIDs=["slap-happy-assets","title-slap-happy-assets","intro-slap-happy-assets","slap-happy-audio"],a.overlayCharacter.position.y=Game.stageHeight;break;case 3:a.game.preloaderBackgroundColour=a.game.preloaderBackgroundColours[3],a.game.cloudColour=a.game.cloudColours[3],a.overlayFloorBG=Game.displayStore.getSprite("gary-room-bg"),a.overlayCharacter=Game.displayStore.getSprite("hub-character-gary"),a.overlayFloorBG.tint=a.game.preloaderBackgroundColours[3],a.overlayCloud1.tint=a.game.cloudColours[3],a.overlayCloud2.tint=a.game.cloudColours[3],a.overlayGradient.tint=a.game.preloaderBackgroundColours[3],a.overlayLogo=Game.displayStore.getSprite("hub-logo-meow"),a.targetSceneID="meowNoTitleScene",a.currentAssetIDs=["meow-no-assets","title-meow-no-assets","intro-meow-no-assets","meow-no-audio"],a.overlayCharacter.position.y=Game.stageHeight+80}a.overlayLogo.scale.x=0,a.overlayLogo.scale.y=0,a.overlayLogo.alpha=1,a.overlayLogo.rotation=Game.getRandom(-2,2),a.overlayCloud2.scale.x=a.overlayCloud2.scale.y=.6,a.overlayTimeline.add([TweenMax.to(a.overlayLogo.scale,.5,{x:1,y:1,ease:Back.easeOut,delay:.2,onComplete:a.beginOverlayFloat,onCompleteParams:[a]}),TweenMax.to(a.overlayCloud2.scale,.5,{x:.6,y:.6,ease:Back.easeOut,delay:.2}),TweenMax.to(a.overlayLogo,.5,{rotation:0,ease:Back.easeOut,delay:.2})],.7),a.overlayFloorBG.position.x=Game.stageWidth/2-209,a.overlayCharacter.position.x=Game.stageWidth/2-209,a.container.addChild(a.overlayFloorBG),a.container.addChild(a.overlayCharacter),a.overlayBorder1.position.x=Game.stageWidth/2-209,a.overlayBorder2.position.x=Game.stageWidth/2+209,a.container.addChild(a.overlayBorder1),a.container.addChild(a.overlayBorder2),a.overlayCloud2.position.x=1e3,a.overlayCloud2.position.y=550,a.container.addChild(a.overlayCloud1),a.container.addChild(a.overlayCloud2),a.container.addChild(a.overlayLogo),a.overlayLogo.position.x=Game.stageWidth/2,a.overlayLogo.position.y=150},b.prototype.beginOverlayFloat=function(a){a.overlayTimeline&&a.overlayTimeline.kill();var b=Game.getRandom(1.6,1.9),c=Game.getRandom(1.6,1.9),d=Game.getRandom(2,4),e=Game.getRandom(2,4),f=a.overlayCloud1.position.x+Game.getRandom(-10,10),g=a.overlayCloud1.position.y+Game.getRandom(-10,10),h=Game.getRandom(1.6,1.9),i=Game.getRandom(1.6,1.9),j=Game.getRandom(2,4),k=Game.getRandom(2,4),l=a.overlayCloud2.position.x+Game.getRandom(-6,6),m=a.overlayCloud2.position.y+Game.getRandom(-6,6);
a.overlayTimeline=new TimelineMax,a.overlayTimeline.add([TweenMax.to(a.overlayCloud1.scale,b,{x:.95,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.overlayCloud1.scale,c,{y:.95,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.overlayCloud1.position,d,{x:f,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.overlayCloud1.position,e,{y:g,ease:Sine.easeInOut,repeat:-1,yoyo:!0})],0),a.overlayTimeline.add([TweenMax.to(a.overlayCloud2.scale,h,{x:.55,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.overlayCloud2.scale,i,{y:.55,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.overlayCloud2.position,j,{x:l,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.overlayCloud2.position,k,{y:m,ease:Sine.easeInOut,repeat:-1,yoyo:!0})],0)},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){a.prototype.pause.call(this)},b.prototype.resume=function(){a.prototype.resume.call(this)},b.prototype.destroy=function(){a.prototype.destroy.call(this),Game.displayStore.returnPooledItem(this.overlayLogo),Game.displayStore.returnPooledItem(this.overlayCharacter),Game.displayStore.returnPooledItem(this.overlayBorder1),Game.displayStore.returnPooledItem(this.overlayBorder2),Game.displayStore.returnPooledItem(this.overlayFloorBG),Game.displayStore.returnPooledItem(this.overlayBed),Game.displayStore.returnPooledItem(this.overlayCharacter),Game.displayStore.returnPooledItem(this.overlayCloud1),Game.displayStore.returnPooledItem(this.overlayCloud2),Game.displayStore.returnPooledItem(this.overlayCloud3),Game.displayStore.returnPooledItem(this.border1),Game.displayStore.returnPooledItem(this.border2),Game.displayStore.returnPooledItem(this.border3),Game.stopSound("music"),this.animation&&this.animation.kill();for(var b=0;b<this.panels.length;b++)this.panels[b].destroy()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},HelpScene=function(a){function b(b){a.call(this,b),this.id="helpScene"}return __extends(b,a),b.prototype.init=function(b){switch(a.prototype.init.call(this),this.game.ui.setUI("help"),b&&(this.gameID=b[0],this.returnSceneID=b[1]),this.gameID){case"glideToGlory":this.helpTutorialOverlay=Game.displayStore.getContainer("glide-to-glory-tutorial-overlay");break;case"meowNo":this.helpTutorialOverlay=Game.displayStore.getContainer("meow-no-tutorial-overlay");break;case"pattyPileUp":this.helpTutorialOverlay=Game.displayStore.getContainer("patty-pileup-tutorial-overlay");break;case"slapHappy":this.helpTutorialOverlay=Game.displayStore.getContainer("slap-happy-tutorial-overlay")}this.helpBG=Game.displayStore.getSprite("help-bg"),this.helpBG.width=Game.stageWidth,this.helpBG.height=Game.stageHeight,this.helpTitleCloudBG=Game.displayStore.getSprite("help-cloud"),this.helpTitle=Game.displayStore.getSprite("help-title"),this.container.addChild(this.helpBG),this.container.addChild(this.helpTutorialOverlay)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"closehelpbutton":this.game.setScene(this.returnSceneID,!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this)},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},PattyPileUpGameplayScene=function(a){function b(b){a.call(this,b),this.id="pattyPileUpGameplayScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),Game.playSound("ppu-music"),Game.setSoundVolume("ppu-music",.2),Game.displayStore.flush(["title-patty-pileup-assets","intro-patty-pileup-assets"]),this.setBackgroundColor(11714614),this.game.ui.setUI("skip"),this.initialDropBuffer=3,this.landedDrops=0,this.inputAllowed=!1,this.crossCurrencyOverlayDisplayed=!1,this.anyPattiesSauced=!1,this.activatingPowerUp=!1,this.saucePowerAvailable=!1,this.saucePowerCounter=0,this.difficultyStepLimit=2,this.difficultyStepCount=0,this.magnetSauceScaleCounter=0,this.tutorialOverlayHolder=Game.displayStore.getContainer("patty-pileup-tutorial-overlay"),this.tutorialOverlayBG=this.tutorialOverlayHolder.getSprite("tutorial-overlay-bg"),this.crossCurrencyOverlayHolder=Game.displayStore.getContainer("patty-pileup-cross-currency-overlay"),this.crossCurrencyOverlayBG=this.crossCurrencyOverlayHolder.getSprite("tutorial-overlay-bg"),this.coinSparkle=this.crossCurrencyOverlayHolder.getSprite("tutorial-coin-sparkle"),this.coinSparkle.blendMode=PIXI.BLEND_MODES.ADD,this.tutorialOverlayBG.width=Game.stageWidth,this.tutorialOverlayBG.height=Game.stageHeight,this.crossCurrencyOverlayBG.width=Game.stageWidth,this.crossCurrencyOverlayBG.height=Game.stageHeight,this.tutorialOverlayBG.alpha=.75,this.crossCurrencyOverlayBG.alpha=.75,this.tutorialOn=!0,this.scoreHolder=Game.displayStore.getContainer("patty-score-holder"),this.pattyBun=Game.displayStore.getSprite("patty-bun"),this.pattyScoreBG=Game.displayStore.getSprite("burger-score-bg"),this.scoreText=Game.displayStore.getBitmapText("spongebob-font"),this.scoreHolder.addChild(this.pattyScoreBG),this.scoreHolder.addChild(this.scoreText),this.scoreHolder.position.x=120,this.scoreHolder.position.y=100,this.greaseParticleHolderOuter=Game.displayStore.getContainer("grease-particle-holder-outer"),this.greaseParticleHolderOuter.position.x=-400,this.greaseParticleHolderInnerLeft=Game.displayStore.getContainer("grease-particle-holder-inner"),this.greaseParticleHolderInnerRight=Game.displayStore.getContainer("grease-particle-holder-inner"),this.greaseParticles=new Array;for(var c=0;8>c;c++)this.greaseParticles.push(Game.displayStore.getSprite("patty-grease-particle")),this.greaseParticles[c].position.x=-50,4>c?this.greaseParticleHolderInnerLeft.addChild(this.greaseParticles[c]):this.greaseParticleHolderInnerRight.addChild(this.greaseParticles[c]);this.magnetSpiralHolder=Game.displayStore.getContainer("magnetic-spiral-holder"),this.magnetSpiral=this.magnetSpiralHolder.getSprite("magnetic-spiral"),this.magnetSpiralParticles=this.magnetSpiralHolder.getSprite("magnetic-particles"),this.magnetSpiral.alpha=.75,this.magnetSpiral.blendMode=PIXI.BLEND_MODES.ADD,this.magnetSpiralParticles.alpha=.8,this.magnetSpiralParticles.blendMode=PIXI.BLEND_MODES.ADD,this.greaseParticleHolderInnerLeft.position.x=-90,this.greaseParticleHolderInnerRight.position.x=90,this.greaseParticleHolderOuter.addChild(this.greaseParticleHolderInnerLeft),this.greaseParticleHolderOuter.addChild(this.greaseParticleHolderInnerRight),this.bgElement1=Game.displayStore.getSprite("bg-element-01"),this.bgElement1.width=Game.stageWidth,this.bgElement1.height=Game.stageHeight,this.physicsManager=new PattyPhysicsManager(this),this.physicsManager.initPhysicsWorld(),this.patties=new Array;for(var c=0;6>c;c++){var d=new Array;d.push(Game.displayStore.getSprite("patty1")),d.push(Game.displayStore.getSprite("patty2")),d.push(Game.displayStore.getSprite("patty3"));var e=new Array;e.push(Game.displayStore.getSprite("patty-topping-1")),e.push(Game.displayStore.getSprite("patty-topping-2")),e.push(Game.displayStore.getSprite("patty-topping-3")),e.push(Game.displayStore.getSprite("patty-topping-4")),e.push(Game.displayStore.getSprite("patty-topping-5")),e.push(Game.displayStore.getSprite("patty-topping-6")),this.patties.push({pattyHolder:Game.displayStore.getContainer("patty-holder"),pattyGraphics:d,physicsObject:this.physicsManager.getPhysicsPatty(),active:!1,basePatty:!1,currentDropPatty:!1,saucedUp:!1,pattyToppings:e,pattyMustard:Game.displayStore.getSprite("patty-mustard")})}this.backgroundManager=new PattyBackgroundManager(this),this.backgroundManager.createInitialPanels(),this.pattyDropper=new PattyDropper(this),this.pattyDropper.beginGame(),this.inputManager=new PattyInputManager(this),this.powerUpManager=new PattyPowerUpManager(this),this.physicsManager.createContactMaterials("normal"),this.setNewBasePatty(0,!0),this.container.addChild(this.scoreHolder),this.container.addChild(this.tutorialOverlayHolder),this.updateScore(!0)},b.prototype.updateScore=function(a){this.scoreText.text=String(this.landedDrops),this.scoreText.position.x=0-this.scoreText.width/2,this.scoreText.position.y=0-this.scoreText.height/2-10,1!=a&&(this.scorePopTimeline&&this.scorePopTimeline.kill(),this.scorePopTimeline=new TimelineMax,this.scorePopTimeline.add([TweenMax.to(this.scoreHolder.scale,.4,{x:1.2,y:1.2,ease:Back.easeOut}),TweenMax.to(this.scoreHolder,.4,{rotation:Game.getRandom(-.1,.1),ease:Sine.easeOut})],0),this.scorePopTimeline.add([TweenMax.to(this.scoreHolder.scale,.3,{x:1,y:1,ease:Back.easeOut})],.4))},b.prototype.dropPatty=function(){Game.playSound("woosh"+String(Game.getRandom(1,7,!0))),1!=this.activatingPowerUp&&(this.pattyDropper.dropPatty(),this.dropPhysicsPatty())},b.prototype.resetPattyDroppable=function(){this.inputManager.pattyDroppable=!0},b.prototype.dropPhysicsPatty=function(){for(var a=0;a<this.patties.length;a++){var b=this.patties[a];if(0==b.active){var c=this.pattyDropper.getPattyType(),d=this.pattyDropper.getToppingType();1==this.patties[a].saucedUp&&(this.patties[a].pattyHolder.removeChild(this.patties[a].pattyMustard),this.patties[a].saucedUp=!1),this.patties[a].pattyHolder.children.length>0&&this.patties[a].pattyHolder.removeAllChildren(),this.patties[a].pattyGraphics[c.type].scale.x=c.dir,this.patties[a].pattyToppings[d.type].scale.x=d.dir,this.patties[a].pattyHolder.addChild(this.patties[a].pattyGraphics[c.type]),this.patties[a].pattyHolder.addChild(this.patties[a].pattyToppings[d.type]),b.active=!0,b.currentDropPatty=!0,this.currentTopPattyGraphic=b.pattyHolder;var e=this.pattyDropper.getPattyPosition;b.pattyHolder.position=e,this.container.addChild(b.pattyHolder),b.physicsObject.position[0]=e.x,b.physicsObject.position[1]=Game.stageHeight-e.y,this.physicsManager.addDropPattyToWorld(b.physicsObject),this.container.addChild(this.greaseParticleHolderOuter);break}}},b.prototype.setNewBasePatty=function(a,b){this.patties[a].active=!0,this.patties[a].basePatty=!0,1==b&&(this.patties[a].pattyHolder.removeAllChildren(),this.patties[a].pattyHolder.addChild(this.pattyBun),this.container.addChild(this.patties[a].pattyHolder),this.patties[a].pattyHolder.position.x=Game.stageWidth/2,this.patties[a].pattyHolder.position.y=Game.stageHeight-20),this.currentPasePatty=this.patties[a].physicsObject,this.physicsManager.setNewBasePatty(this.patties[a].physicsObject,b),this.startBasePattyPos=this.patties[a].physicsObject.position[0]},b.prototype.landedPatty=function(){if(this.backgroundManager.impactBackground(),this.landedDrops++,this.updateScore(!1),this.landedDrops>=20&&this.game.earnCrossGameCurrency(),this.saucePowerCounter++,this.saucePowerCounter>=15&&(Game.playSound("sb-hey"),this.saucePowerCounter=0,this.powerUpManager.showSauceBottle()),Game.playSound("meat"+String(Game.getRandom(1,7,!0))),this.squirtGreaseParticles(this.currentTopPattyGraphic),this.landedDrops>this.initialDropBuffer){this.difficultyStepCount++,this.difficultyStepCount>=this.difficultyStepLimit&&(this.difficultyStepCount=0,this.pattyDropper.increaseSpeed(),this.physicsManager.increaseSpeed(),this.physicsManager.increaseSwayAmount());for(var a=0;a<this.patties.length;a++)1==this.patties[a].basePatty&&this.physicsManager.scrollPatties(this.patties[a].physicsObject);this.backgroundManager.scrollBackground()}},b.prototype.newBasePatty=function(a){for(var b=0;b<this.patties.length;b++)if(this.patties[b].physicsObject==a){this.patties[b].basePatty=!1,this.patties[b].active=!1,this.container.removeChild(this.patties[b].pattyHolder),this.setNewBasePatty(this.findLowestActivePatty(),!1);break}},b.prototype.crossGamePowerUpUsed=function(){this.game.crossGameCurrencyOwned=!1,Game.playSound("love-my-job")},b.prototype.squirtGreaseParticles=function(a){this.greaseParticleHolderOuter.position.x=a.position.x,this.greaseParticleHolderOuter.position.y=a.position.y+a.height/2,this.greaseParticleHolderOuter.rotation=a.rotation,this.greaseSquirtTimeline&&this.greaseSquirtTimeline.kill(),this.greaseSquirtTimeline=new TimelineMax;for(var b=0;b<this.greaseParticles.length;b++){this.greaseParticles[b].position.x=0,this.greaseParticles[b].position.y=0;var c,d=Game.getRandom(100,400),e=Game.getRandom(.25,.75);this.greaseParticles[b].scale.x=e,this.greaseParticles[b].scale.y=e,4>b?(c=Game.getRandom(140,220),this.greaseSquirtTimeline.add([TweenMax.to(this.greaseParticles[b],2,{physics2D:{velocity:d,angle:c,gravity:1e3}})],0)):(c=Game.getRandom(-40,40),this.greaseSquirtTimeline.add([TweenMax.to(this.greaseParticles[b],2,{physics2D:{velocity:d,angle:c,gravity:1e3}})],0))}},b.prototype.findLowestActivePatty=function(){for(var a,b=0;b<this.patties.length;b++)if(1==this.patties[b].active){a=b;break}for(var b=0;b<this.patties.length;b++)0!=this.patties[b].active&&this.patties[b].physicsObject.position[1]<this.patties[a].physicsObject.position[1]&&(a=b);return a},Object.defineProperty(b.prototype,"getLandedDrops",{get:function(){return this.landedDrops},enumerable:!0,configurable:!0}),b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"pausebutton":this.pause();break;case"playbuttonlarge":this.resume();break;case"skipbutton":this.removeTutorialOverlay();break;case"helpbutton":this.game.setScene("helpScene",!1,["pattyPileUp",this.id])}},b.prototype.removeTutorialOverlay=function(){1==this.game.crossGameCurrencyOwned&&0==this.crossCurrencyOverlayDisplayed?(this.crossCurrencyOverlayDisplayed=!0,this.container.removeChild(this.tutorialOverlayHolder),this.container.addChild(this.crossCurrencyOverlayHolder),this.coinSparkleTimeline=new TimelineMax,this.coinSparkleTimeline.add([TweenMax.to(this.coinSparkle,3,{rotation:2*Math.PI,repeat:-1,ease:Linear.easeNone})],0)):0!=this.game.crossGameCurrencyOwned&&1!=this.crossCurrencyOverlayDisplayed||(this.coinSparkleTimeline&&this.coinSparkleTimeline.kill(),this.tutorialOn=!1,this.container.removeChild(this.tutorialOverlayHolder),this.container.removeChild(this.crossCurrencyOverlayHolder),this.inputManager.createInput(),this.game.ui.setUI("gameplay"),1==this.game.crossGameCurrencyOwned&&this.powerUpManager.createCrossGamePowerUpButton()),this.inputAllowed=!0},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){if(a.prototype.tick.call(this),1!=this.paused&&1!=this.tutorialOn){1==this.activatingPowerUp&&(this.powerUpManager.positionSauce(this.currentTopPattyGraphic.position.x),this.powerUpManager.moveHelpingHands(this.physicsManager.handLeftPos,this.physicsManager.handRightPos)),this.pattyDropper.tick(this.activatingPowerUp),this.physicsManager.stepPhysics();for(var b=!1,c=0;c<this.patties.length;c++){var d=this.patties[c];0!=d.active&&(d.pattyHolder.position.x=d.physicsObject.position[0],d.pattyHolder.position.y=Game.stageHeight-d.physicsObject.position[1],d.pattyHolder.rotation=-d.physicsObject.angle,1==d.saucedUp&&(b=!0,this.saucedUpAttract(d)))}this.anyPattiesSauced!=b&&(this.anyPattiesSauced=b),1==this.anyPattiesSauced&&(this.magnetSpiral.rotation+=.05,this.magnetSpiralParticles.rotation-=.06,this.magnetSauceScaleCounter+=.05,this.magnetSauceScaleCounter>=360&&(this.magnetSauceScaleCounter=-360),this.magnetSpiral.scale.x=this.magnetSpiral.scale.y=1.5+Math.sin(this.magnetSauceScaleCounter)/2)}},b.prototype.saucedUpAttract=function(a){for(var b=0;b<this.patties.length;b++){var c=this.patties[b];if(c.physicsObject!=a.physicsObject){var d=this.getAngle(c.pattyHolder.position.x,c.pattyHolder.position.y,a.pattyHolder.position.x,a.pattyHolder.position.y),e=(this.getDistance(c.pattyHolder.position.x,c.pattyHolder.position.y,a.pattyHolder.position.x,a.pattyHolder.position.y),Math.cos(d)*this.physicsManager.pattyMass),f=Math.sin(d)*this.physicsManager.pattyMass,g=[1e3*-e,100*-f];(e||f)&&c.physicsObject.applyForce(g)}}},b.prototype.getDistance=function(a,b,c,d){var e=a-c,f=b-d,g=Math.sqrt(e*e+f*f);return g},b.prototype.getAngle=function(a,b,c,d){if(a!=c||b!=d){var e=a-c,f=d-b;return Math.atan2(f,e)}},b.prototype.keyDown=function(b){if(a.prototype.keyDown.call(this,b),1!=this.paused&&0!=this.inputAllowed&&("spacebar"==b&&this.inputManager.spacePressed(),"enter"==b)){if(0==this.game.crossGameCurrencyOwned)return;this.powerUpManager.crossGamePowerUpEnter()}},b.prototype.keyUp=function(a){},b.prototype.activateSaucePowerup=function(){Game.playSound("sb-mustard"),this.activatingPowerUp=!0,this.pattyDropper.removeForPowerUp(),this.activateSauceDelay=TweenMax.delayedCall(.5,this.beginSauceDrop,[this])},b.prototype.beginSauceDrop=function(a){a.powerUpManager.sauceBottleSquirt(a.currentPasePatty.position[0]),Game.playSound("squirt"+String(Game.getRandom(1,4,!0))),a.applySauceToPatties(a),a.sauceSoundDelay=TweenMax.delayedCall(.6,a.sauceSounds,[a])},b.prototype.sauceSounds=function(a){Game.playSound("sauce"),Game.setSoundVolume("sauce",.6)},b.prototype.applySauceToPatties=function(a){var b;a.magnetSpiralHolder.scale.x=0,a.magnetSpiralHolder.scale.y=0;for(var c=0;c<a.patties.length;c++)1==a.patties[c].active&&(a.patties[c].saucedUp=!0),a.patties[c].pattyHolder==a.currentTopPattyGraphic&&(b=a.patties[c].pattyMustard,b.scale.x=0,b.scale.y=0,a.currentTopPattyGraphic.addChild(a.magnetSpiralHolder),a.currentTopPattyGraphic.addChild(b));a.applySauceTimeline&&a.applySauceTimeline.kill(),a.applySauceTimeline=new TimelineMax,a.applySauceTimeline.add([TweenMax.to(b.scale,.25,{x:1,y:1,delay:1,ease:Back.easeOut}),TweenMax.to(a.magnetSpiralHolder.scale,.25,{x:1,y:.15,delay:1,ease:Back.easeOut})])},b.prototype.endHandsPowerup=function(){this.activatingPowerUp=!1,this.pattyDropper.addAfterPowerUp(),this.powerUpManager.endHandsPowerUp()},b.prototype.endPowerUpActivate=function(){this.activatingPowerUp=!1,this.pattyDropper.addAfterPowerUp()},b.prototype.pause=function(){a.prototype.pause.call(this),Game.pauseSound("ppu-music"),this.pattyDropper.pause(),this.powerUpManager.pause(),this.physicsManager.pause(),this.pauseResumeTween(this.greaseSquirtTimeline,"pause"),this.pauseResumeTween(this.applySauceTimeline,"pause")},b.prototype.resume=function(){a.prototype.resume.call(this),Game.resumeSound("ppu-music"),this.game.ui.setUI("gameplay"),this.pattyDropper.resume(),this.powerUpManager.resume(),this.physicsManager.resume(),this.pauseResumeTween(this.greaseSquirtTimeline,"resumee"),this.pauseResumeTween(this.applySauceTimeline,"resume")},b.prototype.restore=function(){a.prototype.restore.call(this),this.game.ui.setUI("pause")},b.prototype.activateHelpingHandsPowerUp=function(){this.activatingPowerUp=!0,this.pattyDropper.removeForPowerUp(),this.physicsManager.startHandsPowerUp(this.currentPasePatty.position[0])},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.pattyDropper.destroy(),this.inputManager.destroy(),this.physicsManager.destroy(),this.powerUpManager.destroy(),this.backgroundManager.destroy(),Game.stopSound("ppu-music"),this.animation&&this.animation.kill(),this.greaseSquirtTimeline&&this.greaseSquirtTimeline.kill(),this.applySauceTimeline&&this.applySauceTimeline.kill(),this.activateSauceDelay&&this.activateSauceDelay.kill();for(var b=0;b<this.patties.length;b++){var c=this.patties[b];Game.displayStore.returnPooledItem(c.pattyHolder);for(var d=0;d<c.pattyGraphics.length;d++)Game.displayStore.returnPooledItem(c.pattyGraphics[d]);for(var d=0;d<c.pattyToppings.length;d++)Game.displayStore.returnPooledItem(c.pattyToppings[d]);Game.displayStore.returnPooledItem(c.pattyMustard)}for(var b=0;b<this.greaseParticles.length;b++)Game.displayStore.returnPooledItem(this.greaseParticles[b]);Game.displayStore.returnPooledItem(this.greaseParticleHolderInnerLeft),Game.displayStore.returnPooledItem(this.greaseParticleHolderInnerRight),this.patties=[]},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryGameplayScene=function(a){function b(b){a.call(this,b),this.backgroundTileWidth=483,this.id="glideToGloryGameplayScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),Game.playSound("gtg-music"),Game.setSoundVolume("gtg-music",.2),Game.stopSound("plankton-steal"),Game.displayStore.flush(["title-glide-to-glory-assets","intro-glide-to-glory-assets"]),this.setBackgroundColor(11714614),this.game.ui.setUI("skip"),this.planktonStartPos=new PIXI.Point(180,300),this.repairBottleParticleHolder=Game.displayStore.getContainer("repair-bottle-particle-holder"),this.repairBottleParticleHolder.position.x=-400,this.repairBottleParticles=new Array,this.repairBottleCircles=Game.displayStore.getSprite("repair-bottle-circles"),this.repairBottleParticleHolder.addChild(this.repairBottleCircles);for(var c=0;10>c;c++){var d=Game.displayStore.getSprite("repair-bottle-particle");this.repairBottleParticleHolder.addChild(d),this.repairBottleParticles.push(d)}this.inputResetDelayTime=.1,this.updateBalloonDelayLimit=2,this.updateBalloonDelayCounter=0,this.startPanelsScrolling=!0,this.bottleRepairable=!1,this.spikePopLocked=!1,this.glassParticleHolder=Game.displayStore.getContainer("glass-particle-holder"),this.glassParticleHolder.position.x=-400,this.scoreHolder=Game.displayStore.getContainer("glide-to-glory-score-holder"),this.scoreHolder.position.x=Game.stageWidth/2,this.scoreHolder.position.y=100,this.scoreText=Game.displayStore.getBitmapText("spongebob-font"),this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreHolderBalloonBG=Game.displayStore.getSprite("glide-to-glory-score-balloon"),this.scoreHolder.addChild(this.scoreHolderBalloonBG),this.scoreHolder.addChild(this.scoreText),this.tutorialOverlayHolder=Game.displayStore.getContainer("glide-to-glory-tutorial-overlay"),this.tutorialOverlayBG=this.tutorialOverlayHolder.getSprite("tutorial-overlay-bg"),this.crossCurrencyOverlayHolder=Game.displayStore.getContainer("glide-to-glory-cross-currency-overlay"),this.crossCurrencyOverlayBG=this.crossCurrencyOverlayHolder.getSprite("tutorial-overlay-bg"),this.coinSparkle=this.crossCurrencyOverlayHolder.getSprite("tutorial-coin-sparkle"),this.coinSparkle.blendMode=PIXI.BLEND_MODES.ADD,this.tutorialOverlayBG.width=Game.stageWidth,this.tutorialOverlayBG.height=Game.stageHeight,this.crossCurrencyOverlayBG.width=Game.stageWidth,this.crossCurrencyOverlayBG.height=Game.stageHeight,this.tutorialOverlayBG.alpha=.75,this.crossCurrencyOverlayBG.alpha=.75,this.tutorialOn=!0,this.crossCurrencyOverlayDisplayed=!1,this.glassParticles=new Array;for(var e=1;3>=e;e++)for(var f=String(e),g="glass-particle-"+f,c=0;3>c;c++)this.glassParticles.push(Game.displayStore.getSprite(g));for(var c=0;c<this.glassParticles.length;c++)this.glassParticleHolder.addChild(this.glassParticles[c]);this.levelPanelHolder=Game.displayStore.getContainer("level-panel-holder"),this.levelPanelHolderRear=Game.displayStore.getContainer("level-panel-holder-rear"),this.backgroundHolder=Game.displayStore.getContainer("scrolling-bg-holder"),this.backgroundHolder.position.y=150,this.startPanels=Game.displayStore.getContainer("start-panels-holder"),this.startPanels.position.x=-10,this.bottleState=0,this.backgroundTiles=new Array,this.backgroundTiles.push(Game.displayStore.getSprite("bg-tile")),this.backgroundTiles.push(Game.displayStore.getSprite("bg-tile")),this.backgroundTiles.push(Game.displayStore.getSprite("bg-tile")),this.backgroundTiles.push(Game.displayStore.getSprite("bg-tile")),this.backgroundTiles.push(Game.displayStore.getSprite("bg-tile")),this.backgroundTiles.push(Game.displayStore.getSprite("bg-tile"));for(var c=0;c<this.backgroundTiles.length;c++)this.backgroundHolder.addChild(this.backgroundTiles[c]),this.backgroundTiles[c].position.x=c*this.backgroundTileWidth,1!=c&&3!=c&&5!=c||(this.backgroundTiles[c].scale.x=-1,this.backgroundTiles[c].position.x-=this.backgroundTileWidth);this.ceiling=Game.displayStore.getSprite("ceiling"),this.floor=Game.displayStore.getSprite("ceiling"),this.newBottleButton=Game.displayStore.getSprite("power-up-button"),this.newBottleButton.position.y=550,this.newBottleButton.position.x=100,this.newBottleButton.interactive=!0,this.newBottleButton.buttonMode=!0,this.physicsInited=!1,this.armFlapNumber=0,this.armBaseAngle=0,this.armFlapSpeed=.1,this.armFlapRange=4,this.ceiling.position.x=0,this.ceiling.position.y=0,this.ceiling.width=Game.stageWidth,this.floor.position.x=0,this.floor.position.y=Game.stageHeight-this.floor.height,this.floor.width=Game.stageWidth,this.planktonVehicleHolder=Game.displayStore.getContainer("plankton-vehicle-holder"),this.planktonVehicleHolder.position.x=this.planktonStartPos.x,this.planktonVehicleHolder.position.y=this.planktonStartPos.y,this.lastPlanktonPos=this.planktonStartPos.y,this.planktonRiderHolder=this.planktonVehicleHolder.getContainer("plankton-rider"),this.planktonBottleState0=this.planktonVehicleHolder.getSprite("bottle-state-1"),this.planktonBottleState1=this.planktonVehicleHolder.getSprite("bottle-state-2"),this.planktonBottleState2=this.planktonVehicleHolder.getSprite("bottle-state-3"),this.planktonBottleCircle=this.planktonVehicleHolder.getSprite("plankton-shield"),this.planktonBottleCircle.visible=!1,this.planktonBottleCircleLines=this.planktonVehicleHolder.getSprite("plankton-shield-lines"),this.planktonBottleCircleLines.visible=!1,this.planktonFaceDetermined=this.planktonRiderHolder.getSprite("plankton-face-1"),this.planktonFaceScared=this.planktonRiderHolder.getSprite("plankton-face-2"),this.planktonFaceScared.visible=!1,this.planktonFaceDetermined.visible=!0,this.planktonAntennaFront=this.planktonRiderHolder.getSprite("plankton-antenna-front"),this.planktonAntennaRear=this.planktonRiderHolder.getSprite("plankton-antenna-rear"),this.planktonArmFront=this.planktonRiderHolder.getSprite("plankton-arm-front"),this.planktonArmRear=this.planktonRiderHolder.getSprite("plankton-arm-rear"),this.bottleNote=this.planktonVehicleHolder.getSprite("bottle-note"),this.container.addChild(this.backgroundHolder),this.container.addChild(this.startPanels),this.container.addChild(this.levelPanelHolderRear),this.physicsManager=new GlideToGloryPhysicsManager(this),this.physicsManager.initPhysicsWorld(),this.physicsManager.createVehicle(this.planktonStartPos),this.balloons=new Array;for(var c=0;5>c;c++){var h=this.physicsManager.getBalloon(this.planktonStartPos);this.balloons.push({balloonSprite:Game.displayStore.getSprite("balloon-body-1"),balloonPopSprite:Game.displayStore.getSprite("balloon-pop-graphic"),balloonPhysics:h.balloon,active:!1,balloonConstraint:h.constraint,stringContainer:Game.displayStore.getContainer("string-container"),stringGraphic:Game.displayStore.getSprite("string-graphic"),popParticleHolder:Game.displayStore.getContainer("pop-balloon-particle-holder"),popParticles:new Array,popParticlesTimeline:new TimelineMax,rubDamage:0}),this.balloons[c].popParticleHolder.position.x=-400,this.balloons[c].balloonPopSprite.position.x=-400,this.balloons[c].balloonSprite.position.x=-400,this.container.addChild(this.balloons[c].stringContainer),this.container.addChild(this.balloons[c].balloonPopSprite),this.container.addChild(this.balloons[c].balloonSprite),this.container.addChild(this.balloons[c].popParticleHolder),this.createPopParticles(this.balloons[c].popParticleHolder,this.balloons[c].popParticles,c)}for(var c=0;5>c;c++)this.balloons[c].stringContainer.addChild(this.balloons[c].stringGraphic);this.addBalloon(this),this.addBalloon(this),this.physicsInited=!0,this.container.addChild(this.glassParticleHolder),this.container.addChild(this.planktonVehicleHolder),this.container.addChild(this.repairBottleParticleHolder),this.container.addChild(this.levelPanelHolder),this.levelManager=new GlideToGloryLevelManager(this,this.physicsManager),this.levelManager.buildLevel(),this.inputManager=new GlideToGloryInputManager(this),this.inputAllowed=!1,this.levelManager.startScrolling(),this.setBottleState(0),this.container.addChild(this.scoreHolder),this.container.addChild(this.tutorialOverlayHolder),this.physicsManager.stepPhysics(),this.levelManager.tick(),this.moveBalloons(),this.moveStartPanels(),this.updateScore(!0,0)},b.prototype.startAntennaTimeline=function(){this.antennaTimeline=new TimelineMax,this.antennaTimeline.add([TweenMax.to(this.planktonAntennaFront,Game.getRandom(.1,.2),{rotation:Game.getRandom(.05,.15),ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.planktonAntennaRear,Game.getRandom(.1,.2),{rotation:Game.getRandom(.05,.15),ease:Sine.easeInOut,repeat:-1,yoyo:!0})],0)},b.prototype.updateScoreFromLevels=function(a){this.updateScore(!1,a),a>=15&&this.game.earnCrossGameCurrency()},b.prototype.updateScore=function(a,b){this.scoreText.text=String(b)+"m",this.scoreText.position.x=0-this.scoreText.width/2,this.scoreText.position.y=0-this.scoreText.height/2-10,1!=a&&(this.scorePopTimeline&&this.scorePopTimeline.kill(),this.scorePopTimeline=new TimelineMax,this.scorePopTimeline.add([TweenMax.to(this.scoreHolder.scale,.3,{x:1.2,y:1.2,ease:Sine.easeOut}),TweenMax.to(this.scoreHolder,.3,{rotation:Game.getRandom(-.1,.1),ease:Sine.easeOut})],0),this.scorePopTimeline.add([TweenMax.to(this.scoreHolder.scale,.3,{x:1,y:1,ease:Back.easeOut})],.3))},b.prototype.createCrossGamePowerUpButton=function(){this.container.addChild(this.planktonVehicleHolder),this.container.addChild(this.repairBottleParticleHolder),this.container.addChild(this.levelPanelHolder),this.container.addChild(this.newBottleButton),this.container.addChild(this.scoreHolder);var a=this;Game.onDesktop?(this.newBottleButton.on("mouseover",function(b){a.rolloverButton(a,this)}),this.newBottleButton.on("mouseout",function(b){a.rolloutButton(a,this)}),this.newBottleButton.on("mousedown",function(b){a.downonButton(a,this)}),this.newBottleButton.on("mouseup",function(b){b.stopPropagation(),a.uponButton(a,this)})):(this.newBottleButton.on("touchstart",function(b){a.downonButton(a,this)}),this.newBottleButton.on("touchend",function(b){b.stopPropagation(),a.uponButton(a,this)}),this.newBottleButton.on("touchendoutside",function(b){a.rolloutButton(a,this)}))},b.prototype.newBottleButtonClicked=function(a){a.bottleState=0,a.setBottleState(0),a.repairBottleParticleHolder.position.x=a.planktonVehicleHolder.position.x,a.repairBottleParticleHolder.position.y=a.planktonVehicleHolder.position.y,a.repairBottleParticleTimeline=new TimelineMax({onComplete:a.removeRepairParticles,onCompleteParams:[a]}),a.repairBottleCircles.scale.x=0,a.repairBottleCircles.scale.y=0,a.repairBottleCircles.blendMode=PIXI.BLEND_MODES.ADD;for(var b=0;b<a.repairBottleParticles.length;b++){var c=Game.getRandom(.75,1.5);a.repairBottleParticles[b].scale.x=c,a.repairBottleParticles[b].scale.y=c,a.repairBottleParticles[b].position.x=Game.getRandom(-40,40),a.repairBottleParticles[b].position.y=Game.getRandom(-40,40),a.repairBottleParticles[b].rotation=Game.getRandom(-360,360),a.repairBottleParticles[b].blendMode=PIXI.BLEND_MODES.ADD,a.repairBottleParticleTimeline.add([TweenMax.to(a.repairBottleCircles.scale,.25,{x:1,y:1,ease:Sine.easeInOut,repeat:1,yoyo:!0}),TweenMax.to(a.repairBottleCircles,1,{rotation:4*Math.PI,ease:Linear.easeNone}),TweenMax.to(a.repairBottleParticles[b],2,{physics2D:{velocity:Game.getRandom(100,120),angle:Game.getRandom(0,360),acceleration:500,accelerationAngle:120}}),TweenMax.to(a.repairBottleParticles[b].scale,2,{x:0,y:0,ease:Sine.easeOut}),TweenMax.to(a.repairBottleParticles[b],2,{rotation:Game.getRandom(0,2*Math.PI),ease:Linear.easeNone})],Game.getRandom(0,.1))}a.game.crossGameCurrencyOwned=!1,a.container.removeChild(a.newBottleButton),a.newBottleButtonAvailable=!1},b.prototype.removeRepairParticles=function(a){
a.container.removeChild(a.repairBottleParticleHolder),a.repairBottleParticleTimeline&&a.repairBottleParticleTimeline.kill()},b.prototype.createPopParticles=function(a,b,c){for(var d=0;1>=d;d++){var e=Game.displayStore.getSprite("pop-balloon-particle-"+String(c)+"-a"),f=Game.displayStore.getSprite("pop-balloon-particle-"+String(c)+"-b");a.addChild(e),a.addChild(f),b.push(e),b.push(f)}},b.prototype.spawnBalloon=function(a){a.addBalloon(a)},b.prototype.levelPopAllBalloons=function(){for(var a=0;a<this.balloons.length;a++)1==this.balloons[a].active&&this.balloons[a].balloonPhysics&&this.popSpecificBalloon(this,this.balloons[a]);this.spikePopLocked=!0,this.spikePopDelay=TweenMax.delayedCall(.75,this.spikePopDelayUnlock,[this])},b.prototype.spikePopDelayUnlock=function(a){a.spikePopLocked=!1},b.prototype.levelPopBalloon=function(a){this.popBalloon(this,a)},b.prototype.activateShieldPowerup=function(a){this.levelManager.removePowerUp(a),this.planktonBottleCircle.visible=!0,this.planktonBottleCircleLines.visible=!0,this.planktonBottleCircle.alpha=.8,this.planktonBottleCircle.blendMode=PIXI.BLEND_MODES.ADD,this.planktonBottleCircleLines.blendMode=PIXI.BLEND_MODES.ADD,this.planktonBottleCircle.scale.x=this.planktonBottleCircle.scale.y=0,this.planktonBottleCircleLines.scale.x=this.planktonBottleCircleLines.scale.y=0,this.planktonShieldTimeline&&this.planktonShieldTimeline.kill(),this.planktonShieldTimeline=new TimelineMax,this.planktonShieldTimeline.add([TweenMax.to(this.planktonBottleCircle.scale,.5,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.planktonBottleCircleLines.scale,.5,{x:1,y:1,ease:Back.easeOut})],0),this.planktonShieldTimeline.add([TweenMax.to(this.planktonBottleCircle.scale,.6,{x:1.1,y:1.1,ease:Sine.easeOut,yoyo:!0,repeat:-1}),TweenMax.to(this.planktonBottleCircleLines.scale,.6,{x:1.1,y:1.1,ease:Sine.easeOut,yoyo:!0,repeat:-1})],.5),this.planktonShieldTimeline.add([TweenMax.to(this.planktonBottleCircleLines,4,{rotation:2*Math.PI,ease:Linear.easeNone,repeat:-1})],.5),this.planktonShieldTimeline.add([TweenMax.to(this.planktonBottleCircleLines,2,{alpha:.6,ease:Sine.easeOut,yoyo:!0,repeat:-1})],.5)},b.prototype.beginRemoveShield=function(){TweenMax.to(this.planktonBottleCircle.scale,.5,{x:0,y:0,ease:Sine.easeOut,onComplete:this.killPhysicsShield,onCompleteParams:[this]}),TweenMax.to(this.planktonBottleCircleLines.scale,.5,{x:0,y:0,ease:Sine.easeOut})},b.prototype.killPhysicsShield=function(a){a.physicsManager.killPhysicsShield(),a.planktonBottleCircle.visible=!1,a.planktonBottleCircleLines.visible=!1},b.prototype.removePowerUpPhysics=function(a){this.physicsManager.removePowerUpPhysics(a)},b.prototype.rubPopBalloon=function(a){this.popBalloon(this,a)},b.prototype.popBalloon=function(a,b){for(var c=0;c<a.balloons.length;c++)if(b){if(1==a.balloons[c].active&&a.balloons[c].balloonPhysics)return a.popSpecificBalloon(a,a.balloons[c]),void Game.playSound("pop"+String(Game.getRandom(1,7,!0)))}else if(1==a.balloons[c].active)return a.popSpecificBalloon(a,a.balloons[c]),void Game.playSound("pop"+String(Game.getRandom(1,7,!0)))},b.prototype.popSpecificBalloon=function(a,b){b.active=!1,b.rubDamage=0,a.physicsManager.removeBalloon({balloon:b.balloonPhysics,constraint:b.balloonConstraint}),TweenMax.to(b.stringGraphic,.15,{height:0,ease:Quad.easeOut}),a.popBalloonParticles(a,b.balloonSprite,b.balloonPopSprite,b.popParticleHolder,b.popParticles,b.popParticlesTimeline)},b.prototype.addBalloon=function(a){if(1!=a.spikePopLocked){for(var b=!0,c=0;c<a.balloons.length;c++)if(0==a.balloons[c].active){b=!1,a.balloons[c].active=!0,Game.playSound("woosh"+String(Game.getRandom(5,8,!0))),a.balloons[c].balloonSprite.scale.x=a.balloons[c].balloonSprite.scale.y=0,TweenMax.to(a.balloons[c].balloonSprite.scale,.2,{x:1,y:1,ease:Sine.easeOut});break}0==b&&a.physicsManager.addBalloon({balloon:a.balloons[c].balloonPhysics,constraint:a.balloons[c].balloonConstraint})}},b.prototype.popBalloonParticles=function(a,b,c,d,e,f){f&&f.kill(),f=new TimelineMax,d.position.x=b.position.x,d.position.y=b.position.y,c.position.x=b.position.x,c.position.y=b.position.y,b.position.x=-400,c.scale.x=.75,c.scale.y=.75,c.alpha=1,c.rotation=Game.getRandom(0,360);for(var g=0;g<e.length;g++){var h=Game.getRandom(30,50),i=Game.getRandom(0,360);e[g].position.x=h*Math.cos(i),e[g].position.y=h*Math.sin(i),TweenMax.killTweensOf(e[g]),f.add([TweenMax.to(e[g],3,{physics2D:{velocity:Game.getRandom(200,450),angle:i,acceleration:500,accelerationAngle:120}}),TweenMax.to(e[g],3,{rotation:Game.getRandom(-200,200),ease:Linear.easeNone}),TweenMax.to(c.scale,.2,{x:1,y:1,ease:Quad.easeOut}),TweenMax.to(c,.1,{alpha:0,ease:Quad.easeOut,delay:.1})],0)}},b.prototype.getLevelCollisionData=function(a,b){return this.levelManager.checkLevelCollision(a,b)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"pausebutton":this.pause();break;case"playbuttonlarge":this.resume();break;case"skipbutton":this.removeTutorialOverlay();break;case"helpbutton":this.game.setScene("helpScene",!1,["glideToGlory",this.id])}},b.prototype.removeTutorialOverlay=function(){1==this.game.crossGameCurrencyOwned&&0==this.crossCurrencyOverlayDisplayed?(this.coinSparkleTimeline=new TimelineMax,this.coinSparkleTimeline.add([TweenMax.to(this.coinSparkle,3,{rotation:2*Math.PI,repeat:-1,ease:Linear.easeNone})],0),this.crossCurrencyOverlayDisplayed=!0,this.container.removeChild(this.tutorialOverlayHolder),this.container.addChild(this.crossCurrencyOverlayHolder)):0!=this.game.crossGameCurrencyOwned&&1!=this.crossCurrencyOverlayDisplayed||(this.coinSparkleTimeline&&this.coinSparkleTimeline.kill(),this.tutorialOn=!1,this.container.removeChild(this.tutorialOverlayHolder),this.container.removeChild(this.crossCurrencyOverlayHolder),this.inputManager.createInput(),this.game.ui.setUI("gameplay"),this.startAntennaTimeline(),1==this.game.crossGameCurrencyOwned&&(this.newBottleButtonAvailable=!0,this.createCrossGamePowerUpButton())),this.inputAllowed=!0},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.gameOver=function(){this.game.setScene("glideToGloryEndScene",!1,[this.levelManager.scoreDistance]),Game.stopSound("fan"),Game.stopSound("gtg-wind"),Game.stopSound("gravity"),Game.stopSound("gtg-music")},b.prototype.crackBottle=function(){Game.playSound("shatter"+String(Game.getRandom(1,3,!0))),Game.playSound("plankton-sad"+String(Game.getRandom(1,7,!0))),this.bottleState++,this.bottleState>=3&&this.gameOver(),this.setBottleState(this.bottleState)},b.prototype.setBottleState=function(a){switch(a){case 0:this.planktonBottleState0.visible=!0,this.planktonBottleState1.visible=!1,this.planktonBottleState2.visible=!1,this.setCrossGameButtonState(a);break;case 1:this.planktonBottleState0.visible=!1,this.planktonBottleState1.visible=!0,this.planktonBottleState2.visible=!1,this.emitGlassParticles(),this.setCrossGameButtonState(a);break;case 2:this.planktonBottleState0.visible=!1,this.planktonBottleState1.visible=!1,this.planktonBottleState2.visible=!0,this.emitGlassParticles(),this.setCrossGameButtonState(a)}},b.prototype.setCrossGameButtonState=function(a){switch(a){case 0:this.newBottleButton.alpha=.5,this.bottleRepairable=!1;break;case 1:this.newBottleButton.alpha=1,this.bottleRepairable=!0;break;case 2:this.newBottleButton.alpha=1,this.bottleRepairable=!0}},b.prototype.emitGlassParticles=function(){this.glassParticleHolder.x=this.planktonVehicleHolder.position.x,this.glassParticleHolder.y=this.planktonVehicleHolder.position.y,this.glassParticlesTimeline&&this.glassParticlesTimeline.kill(),this.glassParticlesTimeline=new TimelineMax;for(var a=0;a<this.glassParticles.length;a++){var b=Game.getRandom(6,12),c=Game.getRandom(0,360);this.glassParticles[a].position.x=b*Math.cos(c),this.glassParticles[a].position.y=b*Math.sin(c);var d=Game.getRandom(.7,1);this.glassParticles[a].scale.x=d,this.glassParticles[a].scale.y=d,TweenMax.killTweensOf(this.glassParticles[a]),this.glassParticlesTimeline.add([TweenMax.to(this.glassParticles[a],3,{physics2D:{velocity:Game.getRandom(100,200),delay:Game.getRandom(0,.1),angle:c,gravity:400}}),TweenMax.to(this.glassParticles[a],3,{rotation:Game.getRandom(0,360),ease:Linear.easeNone})],0)}},b.prototype.tick=function(){a.prototype.tick.call(this),1!=this.paused&&0!=this.physicsInited&&1!=this.tutorialOn&&(this.armFlapNumber+=this.armFlapSpeed,this.armFlapNumber>=360&&(this.armFlapNumber=-360),this.planktonArmFront.rotation=this.armBaseAngle+Math.sin(this.armFlapNumber)/this.armFlapRange,this.planktonArmRear.rotation=-this.planktonArmFront.rotation,this.backgroundHolder.position.x-=.5,this.backgroundHolder.position.x<=2*-this.backgroundTileWidth&&(this.backgroundHolder.position.x=0),this.moveStartPanels(),this.physicsManager.stepPhysics(),this.physicsManager.pushVehicleToPos(this.planktonStartPos),this.levelManager.tick(),this.planktonVehicleHolder.position.x=this.physicsManager.vehicleBody.position[0],this.planktonVehicleHolder.position.y=Game.stageHeight-this.physicsManager.vehicleBody.position[1]-13,this.planktonVehicleHolder.rotation=-this.physicsManager.vehicleBody.angle,this.planktonVehicleHolder.position.y>this.lastPlanktonPos+2&&(this.planktonDir=1),this.planktonVehicleHolder.position.y<=this.lastPlanktonPos&&(this.planktonDir=-1),this.planktonDir!=this.lastPlanktonDir&&this.planktonChangeDir(this.planktonDir),this.moveBalloons(),this.lastPlanktonPos=this.planktonVehicleHolder.position.y,this.lastPlanktonDir=this.planktonDir)},b.prototype.moveBalloons=function(){for(var a=0;a<this.balloons.length;a++){var b=this.balloons[a];b.stringContainer.position.x=this.planktonVehicleHolder.position.x,b.stringContainer.position.y=this.planktonVehicleHolder.position.y,0!=b.active&&(b.balloonSprite.position.x=b.balloonPhysics.position[0],b.balloonSprite.position.y=Game.stageHeight-b.balloonPhysics.position[1],b.stringContainer.rotation=this.getAngle(this.planktonVehicleHolder.position.x,this.planktonVehicleHolder.position.y,b.balloonSprite.x,b.balloonSprite.y)+Math.PI/2,b.stringGraphic.height=Math.abs(this.getDistance(this.planktonVehicleHolder.position.x,this.planktonVehicleHolder.position.y,b.balloonSprite.x,b.balloonSprite.y)-35),b.balloonSprite.rotation=b.stringContainer.rotation)}},b.prototype.planktonChangeDir=function(a){this.armAngleTween&&this.armAngleTween.kill();var b,c=Game.getRandom(1,2);-1==a?(Game.fadeSound("gtg-wind",.5,0),TweenMax.delayedCall(.5,function(){Game.stopSound("gtg-wind")}),this.planktonFaceDetermined.visible=!0,this.planktonFaceScared.visible=!1,this.armFlapSpeed=.1,this.armFlapRange=4,this.armAngleTween=TweenMax.to(this,.3,{armBaseAngle:0,ease:Back.easeOut}),b=30):(Game.playSound("gtg-wind"),Game.setSoundVolume("gtg-wind",0),Game.fadeSound("gtg-wind",1.5,.5),this.planktonFaceDetermined.visible=!1,this.planktonFaceScared.visible=!0,this.armFlapSpeed=.4,this.armFlapRange=2,this.armAngleTween=TweenMax.to(this,.3,{armBaseAngle:.8,ease:Back.easeOut}),b=20),this.bottleNoteTimeline&&this.bottleNoteTimeline.kill(),this.bottleNoteTimeline=new TimelineMax,this.bottleNoteTimeline.add([TweenMax.to(this.bottleNote.position,c,{y:b,ease:Back.easeOut}),TweenMax.to(this.bottleNote,c,{rotation:Game.getRandom(-.25,.25),ease:Back.easeOut})],0)},b.prototype.moveStartPanels=function(){1==this.startPanelsScrolling&&(this.startPanels.position.x-=.95*this.levelManager.scrollSpeed,this.startPanels.position.x<=-1024&&(this.container.removeChild(this.startPanels),this.startPanelsScrolling=!1))},b.prototype.getAngle=function(a,b,c,d){return Math.atan2(d-b,c-a)},b.prototype.getDistance=function(a,b,c,d){return Math.sqrt((a-c)*(a-c)+(b-d)*(b-d))},b.prototype.keyDown=function(b){if(a.prototype.keyDown.call(this,b),1!=this.paused&&("up"==b?this.inputUp():"down"==b&&this.inputDown(),"enter"==b)){if(0==this.game.crossGameCurrencyOwned)return;this.newBottleButtonClicked(this)}},b.prototype.keyUp=function(a){},b.prototype.inputUp=function(){1==this.inputAllowed&&(this.spawnBalloon(this),this.inputResetDelay=TweenMax.delayedCall(this.inputResetDelayTime,this.unlockInputAfterDelay,[this]))},b.prototype.inputDown=function(){1==this.inputAllowed&&(this.popBalloon(this),this.inputResetDelay=TweenMax.delayedCall(this.inputResetDelayTime,this.unlockInputAfterDelay,[this]))},b.prototype.rolloverButton=function(a,b){if(0!=a.bottleRepairable){a.powerUpOverTimeline&&a.powerUpOverTimeline.kill();var c=Game.getRandom(-.25,.25);a.powerUpOverTimeline=new TimelineMax,a.powerUpOverTimeline.add(TweenMax.to(b.scale,.2,{x:1.2,y:1.2,ease:Back.easeOut}),0),a.powerUpOverTimeline.add(TweenMax.to(b,.2,{rotation:c,ease:Back.easeOut}),0)}},b.prototype.rolloutButton=function(a,b){0!=a.bottleRepairable&&(a.powerUpOutTimeline&&a.powerUpOutTimeline.kill(),a.powerUpOutTimeline=new TimelineMax,a.powerUpOutTimeline.add(TweenMax.to(b.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),a.powerUpOutTimeline.add(TweenMax.to(b,.2,{rotation:0,ease:Back.easeOut}),0))},b.prototype.downonButton=function(a,b){0!=a.bottleRepairable&&(a.powerUpDownTimeline&&a.powerUpDownTimeline.kill(),a.powerUpDownTimeline=new TimelineMax,a.powerUpDownTimeline.add(TweenMax.to(b.scale,.2,{x:1.3,y:1.3,ease:Back.easeOut}),0))},b.prototype.uponButton=function(a,b){0!=a.bottleRepairable&&(a.powerUpUpTimeline&&a.powerUpUpTimeline.kill(),a.powerUpUpTimeline=new TimelineMax,a.powerUpUpTimeline.add(TweenMax.to(b.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),TweenMax.delayedCall(.15,a.newBottleButtonClicked,[a]))},b.prototype.unlockInputAfterDelay=function(a){a.inputAllowed=!0,a.inputManager.unlockInput()},b.prototype.pause=function(){a.prototype.pause.call(this),Game.pauseSound("gtg-music"),this.physicsManager.pause(),this.pauseResumeTween(this.antennaTimeline,"pause"),this.pauseResumeTween(this.glassParticlesTimeline,"pause"),this.pauseResumeTween(this.repairBottleParticleTimeline,"pause"),this.pauseResumeTween(this.planktonShieldTimeline,"pause")},b.prototype.resume=function(){a.prototype.resume.call(this),Game.resumeSound("gtg-music"),this.game.ui.setUI("gameplay"),this.physicsManager.resume(),this.pauseResumeTween(this.antennaTimeline,"resume"),this.pauseResumeTween(this.glassParticlesTimeline,"resume"),this.pauseResumeTween(this.repairBottleParticleTimeline,"resume"),this.pauseResumeTween(this.planktonShieldTimeline,"resume")},b.prototype.restore=function(){a.prototype.restore.call(this),this.game.ui.setUI("pause")},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.inputManager.destroy(),this.physicsManager.destroy(),this.levelManager.destroy(),Game.stopSound("gtg-music");for(var b=0;b<this.balloons.length;b++){for(var c=0;c<this.balloons[b].popParticles.length;c++)Game.displayStore.returnPooledItem(this.balloons[b].popParticles[c]);Game.displayStore.returnPooledItem(this.balloons[b].balloonSprite),Game.displayStore.returnPooledItem(this.balloons[b].balloonPopSprite),Game.displayStore.returnPooledItem(this.balloons[b].popParticleHolder),Game.displayStore.returnPooledItem(this.balloons[b].stringContainer),Game.displayStore.returnPooledItem(this.balloons[b].stringGraphic)}for(var b=0;b<this.backgroundTiles.length;b++)Game.displayStore.returnPooledItem(this.backgroundTiles[b]);for(var b=0;b<this.repairBottleParticles.length;b++)Game.displayStore.returnPooledItem(this.repairBottleParticles[b]);this.antennaTimeline&&this.antennaTimeline.kill(),this.armAngleTween&&this.armAngleTween.kill(),this.glassParticlesTimeline&&this.glassParticlesTimeline.kill(),this.repairBottleParticleTimeline&&this.repairBottleParticleTimeline.kill(),this.planktonShieldTimeline&&this.planktonShieldTimeline.kill(),this.spikePopDelay&&this.spikePopDelay.kill(),Game.displayStore.returnPooledItem(this.ceiling),Game.displayStore.returnPooledItem(this.floor);for(var b=0;b<this.glassParticles.length;b++)Game.displayStore.returnPooledItem(this.glassParticles[b])},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},SlapHappyGameplayScene=function(a){function b(b){a.call(this,b),this.id="slapHappyGameplayScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),Game.playSound("music"),Game.setSoundVolume("music",.2),Game.displayStore.flush(["title-slap-happy-assets","intro-slap-happy-assets"]),this.setBackgroundColor(11714614),this.game.ui.setUI("skip"),this.crossCurrencyOverlayDisplayed=!1,this.inputAllowed=!1,this.inGameTutorialOn=!1,this.inGameTuteInputAllowed=!1,this.inGameTuteStage=0,this.lightColours=new Array,this.lightColours.push(15458816),this.lightColours.push(11586344),this.lightColours.push(40049),this.lightColours.push(32420),this.lightColours.push(14886022),this.lightColours.push(13503069),this.lightColours.push(15423357),this.crowdSpongebobs=new Array,this.inGameTuteFakeAttack=Game.displayStore.getSprite("input-tutorial-fake-attack"),this.inGameTuteRealAttack=Game.displayStore.getSprite("input-tutorial-real-attack"),this.inGameTuteTitle=Game.displayStore.getSprite("input-tutorial-title"),this.inGameTuteGo=Game.displayStore.getSprite("input-tutorial-go"),this.inGameTuteFakeAttack.position.x=Game.stageWidth/2,this.inGameTuteRealAttack.position.x=Game.stageWidth/2,this.inGameTuteTitle.position.x=Game.stageWidth/2,this.inGameTuteGo.position.x=Game.stageWidth/2,this.inGameTuteFakeAttack.position.y=50,this.inGameTuteRealAttack.position.y=50,this.inGameTuteTitle.position.y=50,this.inGameTuteGo.position.y=50,this.inGameTuteFakeAttack.visible=!1,this.inGameTuteRealAttack.visible=!1,this.inGameTuteTitle.visible=!1,this.inGameTuteGo.visible=!1;for(var c=0;20>c;c++){var d,e,f=this.crowdSpongebobs.length*Game.getRandom(51,69,!0);101>f?(d=Game.getRandom(550,600,!0),e=Game.getRandom(-.4,-.3)):f>101&&301>f?(d=Game.getRandom(500,550,!0),e=Game.getRandom(-.2,-.3)):f>301&&701>f?(d=Game.getRandom(450,500,!0),e=0):f>701&&901>f?(d=Game.getRandom(500,550,!0),e=Game.getRandom(.2,.3)):f>901&&(d=Game.getRandom(550,600,!0),e=Game.getRandom(.4,.3)),this.crowdSpongebobs.push({sprite:Game.displayStore.getSprite("crowd-spongebob"),positionX:f,positionY:d,rotation:e,scaleX:.7,scaleY:.7})}this.cornerLightsLeft=new Array,this.cornerLightsRight=new Array,this.cornerLightHolderLeft=Game.displayStore.getContainer("corner-light-holder"),this.cornerLightHolderRight=Game.displayStore.getContainer("corner-light-holder");for(var c=0;6>c;c++)this.cornerLightsLeft.push(Game.displayStore.getSprite("corner-light-source")),this.cornerLightsRight.push(Game.displayStore.getSprite("corner-light-source")),this.cornerLightHolderLeft.addChild(this.cornerLightsLeft[c]),this.cornerLightHolderRight.addChild(this.cornerLightsRight[c]);this.shuffleArray(this.lightColours);for(var c=0;c<this.cornerLightsLeft.length;c++)this.cornerLightsLeft[c].tint=this.lightColours[c],this.cornerLightsLeft[c].blendMode=PIXI.BLEND_MODES.ADD;this.shuffleArray(this.lightColours);for(var c=0;c<this.cornerLightsRight.length;c++)this.cornerLightsRight[c].tint=this.lightColours[c],this.cornerLightsRight[c].blendMode=PIXI.BLEND_MODES.ADD;this.cornerLightHolderLeft.visible=!1,this.cornerLightHolderRight.visible=!1,this.scoreHolder=Game.displayStore.getContainer("slap-happy-score-holder"),this.scoreSpongebobIcon=Game.displayStore.getSprite("slap-happy-score-bg"),this.score=0,this.difficulty=0,this.comboScore=0,this.comboScoreRecharge=15,this.slapSillyModeActive=!1,this.flower1=Game.displayStore.getSprite("slap-happy-flower"),this.flower2=Game.displayStore.getSprite("slap-happy-flower"),this.flower3=Game.displayStore.getSprite("slap-happy-flower"),this.flower1.position.x=200,this.flower2.position.x=600,this.flower3.position.x=900,this.flower1.position.y=100,this.flower2.position.y=300,this.flower3.position.y=100,this.flower1.rotation=2,this.flower2.rotation=4,this.inGameTutePromptBlock=Game.displayStore.getSprite("input-tutorial-block"),this.inGameTutePromptDontBlock=Game.displayStore.getSprite("input-tutorial-dont-block"),this.inGameTutePromptAttack=Game.displayStore.getSprite("input-tutorial-attack"),this.inGameTutePromptBlock.position.x=150,this.inGameTutePromptBlock.position.y=550,this.inGameTutePromptBlock.rotation=.2,this.inGameTutePromptDontBlock.position.x=820,this.inGameTutePromptDontBlock.position.y=550,this.inGameTutePromptDontBlock.rotation=-.2,this.inGameTutePromptAttack.position.x=300,this.inGameTutePromptAttack.position.y=120,this.inGameTutePromptAttack.rotation=-.2,this.inGameTutePromptBlock.visible=!1,this.inGameTutePromptDontBlock.visible=!1,this.inGameTutePromptAttack.visible=!1,this.bgImage=Game.displayStore.getSprite("slap-happy-bg-image"),this.bgImage.width=Game.stageWidth,this.bgOverlay=Game.displayStore.getSprite("slap-happy-bg-overlay"),this.bgOverlay2=Game.displayStore.getSprite("slap-happy-bg-overlay"),this.bgOverlay.alpha=.8,this.bgOverlay2.alpha=.8,this.bgOverlay2.scale.x=-1,this.bgOverlay2.position.x=Game.stageWidth,this.bgElement=Game.displayStore.getSprite("slap-happy-bg-element-01"),this.bgElement.width=Game.stageWidth,this.bgElement.height=Game.stageHeight,this.scoreText=Game.displayStore.getBitmapText("spongebob-font"),this.tutorialOverlayHolder=Game.displayStore.getContainer("slap-happy-tutorial-overlay"),this.tutorialOverlayBG=this.tutorialOverlayHolder.getSprite("tutorial-overlay-bg"),this.crossCurrencyOverlayHolder=Game.displayStore.getContainer("slap-happy-cross-currency-overlay"),this.crossCurrencyOverlayBG=this.crossCurrencyOverlayHolder.getSprite("tutorial-overlay-bg"),this.coinSparkle=this.crossCurrencyOverlayHolder.getSprite("tutorial-coin-sparkle"),this.coinSparkle.blendMode=PIXI.BLEND_MODES.ADD,this.tutorialOverlayBG.width=Game.stageWidth,this.tutorialOverlayBG.height=Game.stageHeight,this.crossCurrencyOverlayBG.width=Game.stageWidth,this.crossCurrencyOverlayBG.height=Game.stageHeight,this.tutorialOverlayBG.alpha=.75,this.crossCurrencyOverlayBG.alpha=.75,this.tutorialOn=!0,this.elementHolder=Game.displayStore.getContainer("gameplay-element-holder"),this.elementHolder.position.x=Game.stageWidth/2,this.elementHolder.position.y=Game.stageHeight/2,this.slapSillyButton=Game.displayStore.getSprite("power-up-button"),this.slapSillyButton.position.y=550,this.slapSillyButton.position.x=100,this.slapSillyButton.interactive=!0,this.slapSillyButton.buttonMode=!0,this.container.addChild(this.bgImage),this.container.addChild(this.flower1),this.container.addChild(this.flower2),this.container.addChild(this.flower3);for(var c=0;c<this.crowdSpongebobs.length;c++)this.container.addChild(this.crowdSpongebobs[c].sprite),this.crowdSpongebobs[c].sprite.position.x=this.crowdSpongebobs[c].positionX,this.crowdSpongebobs[c].sprite.position.y=this.crowdSpongebobs[c].positionY,this.crowdSpongebobs[c].sprite.scale.x=this.crowdSpongebobs[c].scaleX,this.crowdSpongebobs[c].sprite.scale.y=this.crowdSpongebobs[c].scaleY,this.crowdSpongebobs[c].sprite.alpha=1,this.crowdSpongebobs[c].sprite.rotation=this.crowdSpongebobs[c].rotation;this.container.addChild(this.bgOverlay),this.container.addChild(this.bgOverlay2),this.container.addChild(this.bgElement),this.container.addChild(this.elementHolder),this.container.addChild(this.cornerLightHolderLeft),this.container.addChild(this.cornerLightHolderRight),this.cornerLightHolderLeft.position.x=-80,this.cornerLightHolderLeft.position.y=Game.stageHeight+80,this.cornerLightHolderRight.position.x=Game.stageWidth+80,this.cornerLightHolderRight.position.y=Game.stageHeight+80,this.tentacleManager=new SlapHappyTentacleManager(this,this.elementHolder),this.inputManager=new SlapHappyInputManager(this),this.enemyCharacterManager=new SlapHappyEnemyManager(this,this.elementHolder),this.impactManager=new SlapHappyImpactManager(this,this.elementHolder),this.healthManager=new SlapHappyHealthManager(this),this.scoreHolder.addChild(this.scoreSpongebobIcon),this.scoreHolder.addChild(this.scoreText),this.scoreHolder.position.x=100,this.scoreHolder.position.y=100,this.container.addChild(this.scoreHolder),this.container.addChild(this.inGameTutePromptBlock),this.container.addChild(this.inGameTutePromptDontBlock),this.container.addChild(this.inGameTutePromptAttack),this.container.addChild(this.inGameTuteFakeAttack),this.container.addChild(this.inGameTuteRealAttack),this.container.addChild(this.inGameTuteTitle),this.container.addChild(this.inGameTuteGo),this.container.addChild(this.tutorialOverlayHolder),this.updateScore(!1)},b.prototype.removeTutorialOverlay=function(){1==this.game.crossGameCurrencyOwned&&0==this.crossCurrencyOverlayDisplayed?(this.coinSparkleTimeline=new TimelineMax,this.coinSparkleTimeline.add([TweenMax.to(this.coinSparkle,3,{rotation:2*Math.PI,repeat:-1,ease:Linear.easeNone})],0),this.crossCurrencyOverlayDisplayed=!0,this.container.removeChild(this.tutorialOverlayHolder),this.container.addChild(this.crossCurrencyOverlayHolder)):0!=this.game.crossGameCurrencyOwned&&1!=this.crossCurrencyOverlayDisplayed||(this.coinSparkleTimeline&&this.coinSparkleTimeline.kill(),this.tutorialOn=!1,this.container.removeChild(this.tutorialOverlayHolder),this.container.removeChild(this.crossCurrencyOverlayHolder),this.inputManager.createInput(),this.inGameTutorialOn=!0,this.inGameTuteTitle.visible=!0,this.game.ui.setUI("gameplay-with-skip"),this.startDelay=TweenMax.delayedCall(.5,this.startGame,null,this),1==this.game.crossGameCurrencyOwned&&this.createCrossGamePowerUpButton()),this.inputAllowed=!0,this.crowdAnimation=new TimelineMax;for(var a=0;a<this.crowdSpongebobs.length;a++)this.crowdAnimation.add([TweenMax.to(this.crowdSpongebobs[a].sprite.position,Game.getRandom(.8,1.5,!1),{x:this.crowdSpongebobs[a].sprite.position.x+Game.getRandom(-10,10,!0),y:this.crowdSpongebobs[a].sprite.position.y+Game.getRandom(-10,10,!0),yoyo:!0,repeat:-1,ease:Power2.easeInOut}),TweenMax.to(this.crowdSpongebobs[a].sprite.scale,Game.getRandom(1,1.8,!1),{x:.72,y:.68,yoyo:!0,repeat:-1,ease:Power2.easeInOut})],Game.getRandom(0,1))},b.prototype.killInGameTute=function(){this.inGameTutePromptTimeline&&this.inGameTutePromptTimeline.kill(),this.inGameTuteGo.visible=!0,this.inGameTuteGo.alpha=1,this.inGameTutePromptTimeline=new TimelineMax({onComplete:this.removeInGameTuteElements,onCompleteParams:[this]}),this.inGameTutePromptTimeline.add([TweenMax.to(this.inGameTuteGo,.5,{alpha:0,ease:Sine.easeOut})],1.5),this.container.removeChild(this.inGameTutePromptBlock),this.container.removeChild(this.inGameTutePromptDontBlock),this.container.removeChild(this.inGameTutePromptAttack),this.container.removeChild(this.inGameTuteFakeAttack),this.container.removeChild(this.inGameTuteRealAttack),this.container.removeChild(this.inGameTuteTitle),this.inGameTutorialOn=!1,this.game.ui.setUI("gameplay"),this.inputAllowed=!0,this.enemyCharacterManager.endInGameTute()},b.prototype.removeInGameTuteElements=function(a){a.container.removeChild(a.inGameTuteGo),a.inGameTutePromptTimeline&&a.inGameTutePromptTimeline.kill()},b.prototype.progressInGameTute=function(a,b){switch(b){case 0:a.inGameTutePromptBlock.visible=!0,a.inGameTutePromptBlock.alpha=0,a.inGameTuteInputAllowed=!0,a.inGameTuteStage=b,a.inGameTuteTimeline(a,0);break;case 1:a.inGameTutePromptDontBlock.visible=!0,a.inGameTutePromptDontBlock.alpha=0,a.enemyCharacterManager.inGameTuteStage2(),a.inGameTuteStage=b,a.inGameTuteTimeline(a,1);break;case 2:a.inGameTutePromptDontBlock.visible=!1,a.inGameTutePromptAttack.visible=!0,a.inGameTutePromptAttack.alpha=0,a.inGameTuteInputAllowed=!0,a.inGameTuteStage=b,a.inGameTuteTimeline(a,2)}},b.prototype.inGameTuteTimeline=function(a,b){switch(a.inGameTutePromptTimeline&&a.inGameTutePromptTimeline.kill(),a.inGameTutePromptTimeline=new TimelineMax,b){case 0:a.inGameTuteTitle.visible=!1,a.inGameTuteRealAttack.visible=!0,a.inGameTuteRealAttack.alpha=0,a.inGameTutePromptTimeline.add([TweenMax.to(a.inGameTutePromptBlock,.2,{alpha:.3,ease:Sine.easeInOut}),TweenMax.to(a.inGameTuteRealAttack,.2,{alpha:1,ease:Sine.easeInOut})],0),a.inGameTutePromptTimeline.add([TweenMax.to(a.inGameTutePromptBlock,.1,{alpha:1,repeat:-1,yoyo:!0,ease:Sine.easeOut,repeatDelay:.3})],.2);break;case 1:a.inGameTuteFakeAttack.visible=!0,a.inGameTuteFakeAttack.alpha=0,a.inGameTuteRealAttack.visible=!1,a.inGameTutePromptTimeline.add([TweenMax.to(a.inGameTuteFakeAttack,.2,{alpha:1,ease:Sine.easeInOut})],0),a.inGameTutePromptTimeline.add([TweenMax.to(a.inGameTutePromptDontBlock,.5,{alpha:1,ease:Sine.easeInOut})],2);break;case 2:a.inGameTuteFakeAttack.visible=!1,a.inGameTutePromptTimeline.add([TweenMax.to(a.inGameTutePromptAttack,.2,{alpha:.3,ease:Sine.easeInOut})],0),a.inGameTutePromptTimeline.add([TweenMax.to(a.inGameTutePromptAttack,.1,{alpha:1,repeat:-1,yoyo:!0,ease:Sine.easeOut,repeatDelay:.3})],.2)}},b.prototype.updateScore=function(a){this.scoreText.text=String(this.score),this.scoreText.position.x=0-this.scoreText.width/2+20,this.scoreText.position.y=0-this.scoreText.height/2-20,1!=a&&(this.scorePopTimeline&&this.scorePopTimeline.kill(),this.scorePopTimeline=new TimelineMax,this.scorePopTimeline.add([TweenMax.to(this.scoreHolder.scale,.3,{x:1.2,y:1.2,ease:Sine.easeOut}),TweenMax.to(this.scoreHolder,.3,{rotation:Game.getRandom(-.1,.1),ease:Sine.easeOut})],0),this.scorePopTimeline.add([TweenMax.to(this.scoreHolder.scale,.3,{x:1,y:1,ease:Back.easeOut})],.3))},b.prototype.createCrossGamePowerUpButton=function(){this.container.addChild(this.slapSillyButton);var a=this;Game.onDesktop?(this.slapSillyButton.on("mouseover",function(b){a.rolloverButton(a,this)}),this.slapSillyButton.on("mouseout",function(b){a.rolloutButton(a,this)}),this.slapSillyButton.on("mousedown",function(b){a.downonButton(a,this)}),this.slapSillyButton.on("mouseup",function(b){b.stopPropagation(),a.uponButton(a,this)})):(this.slapSillyButton.on("touchstart",function(b){a.downonButton(a,this)}),this.slapSillyButton.on("touchend",function(b){b.stopPropagation(),a.uponButton(a,this)}),this.slapSillyButton.on("touchendoutside",function(b){a.rolloutButton(a,this)}))},b.prototype.slapSillyButtonClicked=function(a){1!=a.slapSillyModeActive&&(a.slapSillyModeActive=!0,a.game.crossGameCurrencyOwned=!1,a.slapSillyButton.removeAllListeners(),a.container.removeChild(a.slapSillyButton),a.slapSillyActiveDelay=TweenMax.delayedCall(20,a.endSlapSilly,[a]),a.tentacleManager.beginSlapSillyMode())},b.prototype.endSlapSilly=function(a){a.slapSillyModeActive=!1,a.tentacleManager.endSlapSillyMode()},b.prototype.startGame=function(){this.enemyCharacterManager.popCharacter(2,this.inGameTutorialOn),this.tentacleManager.showTentacles(!1),this.healthManager.showEnemyHealthMeter(1,!1),this.healthManager.showPlayerHealthMeter(2)},b.prototype.nextEnemySpawn=function(){this.enemyCharacterManager.popCharacter(.2,this.inGameTutorialOn),this.tentacleManager.showTentacles(!1),this.healthManager.showEnemyHealthMeter(0,!1),this.impactManager.resetDrain(),this.healthManager.resetDrain(),Game.playSound("sq-darn")},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"pausebutton":this.pause();break;case"playbuttonlarge":this.resume();break;case"skipbutton":1==this.tutorialOn&&0==this.inGameTutorialOn?this.removeTutorialOverlay():0==this.tutorialOn&&1==this.inGameTutorialOn&&this.killInGameTute();break;case"helpbutton":this.game.setScene("helpScene",!1,["slapHappy",this.id])}},b.prototype.inputLeft=function(){0!=this.tentacleManager.getTentacleState("left")&&this.applyInput("left")},b.prototype.inputRight=function(){0!=this.tentacleManager.getTentacleState("right")&&this.applyInput("right")},b.prototype.applyInput=function(a){if(0!=this.tentacleManager.getTentacleInputAllowed(a))if(1!=this.inGameTutorialOn){switch(this.enemyCharacterManager.getEnemyCharacterState(a)){case"neutral":"left"==a?this.tentacleManager.leftTentacleAttack():"right"==a&&this.tentacleManager.rightTentacleAttack(),this.comboScore++,this.enemyCharacterManager.landAttack(a),Game.playSound("woosh"+String(Game.getRandom(1,8,!0))),Game.playSound("slap"+String(Game.getRandom(1,6,!0))),this.impactManager.showImpact("slap",a,this.slapSillyModeActive),this.healthManager.enemySlapped(this.slapSillyModeActive);
break;case"fake-tell":Game.playSound("woosh"+String(Game.getRandom(1,8,!0))),Game.playSound("sq-missed"),"left"==a?this.tentacleManager.leftTentacleUnsuccessfulBlock():"right"==a&&this.tentacleManager.rightTentacleUnsuccessfulBlock(),this.comboScore=0,this.enemyCharacterManager.beginCounterAttack(a);break;case"real-tell":Game.playSound("woosh"+String(Game.getRandom(1,8,!0))),Game.playSound("slap"+String(Game.getRandom(1,6,!0))),"left"==a?this.tentacleManager.leftTentacleSuccessfulBlock():"right"==a&&this.tentacleManager.rightTentacleSuccessfulBlock(),this.comboScore++,this.enemyCharacterManager.blockAttack(a,!1),this.impactManager.showImpact("block",a,this.slapSillyModeActive),this.healthManager.enemyBlocked(this.slapSillyModeActive);break;case"attacking":Game.playSound("woosh"+String(Game.getRandom(1,8,!0))),Game.playSound("slap"+String(Game.getRandom(1,6,!0))),"left"==a?this.tentacleManager.leftTentacleSuccessfulBlock():"right"==a&&this.tentacleManager.rightTentacleSuccessfulBlock(),this.comboScore++,this.enemyCharacterManager.blockAttack(a,!1),this.impactManager.showImpact("block",a,this.slapSillyModeActive),this.healthManager.enemyBlocked(this.slapSillyModeActive);break;case"grabbing":Game.playSound("woosh"+String(Game.getRandom(1,8,!0))),Game.playSound("slap"+String(Game.getRandom(1,6,!0))),"left"==a?this.tentacleManager.leftTentacleBreakHold():"right"==a&&this.tentacleManager.rightTentacleBreakHold(),this.comboScore=0,this.enemyCharacterManager.breakHold(a),this.impactManager.showImpact("break",a,this.slapSillyModeActive),this.impactManager.checkGrabLevel(this.enemyCharacterManager.getGrabLevel),this.healthManager.checkDrainLevel(this.enemyCharacterManager.getGrabLevel);break;case"drained":if(Game.playSound("woosh"+String(Game.getRandom(1,8,!0))),TweenMax.delayedCall(.3,Game.playSound,["final-punch"],this),TweenMax.delayedCall(1.5,Game.playSound,["spongebob-distance"],this),0==this.tentacleManager.getTentacleInputAllowed("left")||0==this.tentacleManager.getTentacleInputAllowed("right"))return;this.comboScore++,this.impactManager.showImpact("uppercut",a,this.slapSillyModeActive),this.enemyCharacterManager.currentCharacterKnockOut(a),this.tentacleManager.doUppercut(a),this.healthManager.upperCutPlayerBoost(),this.nextEnemy()}this.checkComboRun()}else{if(0==this.inGameTuteInputAllowed)return;switch(this.inGameTuteStage){case 0:"left"==a&&(this.inGameTutePromptBlock.visible=!1,Game.playSound("woosh"+String(Game.getRandom(1,8,!0))),Game.playSound("slap"+String(Game.getRandom(1,6,!0))),this.tentacleManager.leftTentacleSuccessfulBlock(),this.enemyCharacterManager.blockAttack(a,!0),this.impactManager.showImpact("block",a,this.slapSillyModeActive),this.inGameTuteInputAllowed=!1,this.inGameTuteStage++,this.progressInGameTute(this,1));break;case 1:break;case 2:this.inGameTuteInputAllowed=!1,"left"==a?this.tentacleManager.leftTentacleAttack():"right"==a&&this.tentacleManager.rightTentacleAttack(),this.enemyCharacterManager.landAttack(a),Game.playSound("woosh"+String(Game.getRandom(1,8,!0))),Game.playSound("slap"+String(Game.getRandom(1,6,!0))),this.impactManager.showImpact("slap",a,this.slapSillyModeActive),this.healthManager.enemySlapped(this.slapSillyModeActive),this.killInGameTute()}}},b.prototype.checkComboRun=function(){this.comboScore>=this.comboScoreRecharge&&(this.comboScore=0,this.healthManager.comboHealthRecharge())},b.prototype.setSecondWind=function(){this.healthManager.setSecondWind(),this.tentacleManager.setSecondWind()},b.prototype.setGrab=function(a){if("left"==a){this.cornerLightHolderLeft.visible=!0,Game.playSound("sb-sparkles-left"),Game.setSoundVolume("sb-sparkles-left",0),Game.fadeSound("sb-sparkles-left",.8,.8),this.grabFlashTimelineLeft&&this.grabFlashTimelineLeft.kill(),this.grabFlashTimelineLeft=new TimelineMax({repeat:-1});for(var b=0;b<this.cornerLightsLeft.length;b++){var c=Game.getRandom(.8,1);this.cornerLightsLeft[b].scale.x=this.cornerLightsLeft[b].scale.y=c,this.cornerLightsLeft[b].alpha=.8,this.grabFlashTimelineLeft.add([TweenMax.to(this.cornerLightsLeft[b].scale,.15,{x:3*c,y:3*c,ease:Sine.easeOut,yoyo:!0,repeat:1})],.3*b)}}else if("right"==a){this.cornerLightHolderRight.visible=!0,Game.playSound("sb-sparkles-right"),Game.setSoundVolume("sb-sparkles-right",0),Game.fadeSound("sb-sparkles-right",.8,.8),this.grabFlashTimelineRight&&this.grabFlashTimelineRight.kill(),this.grabFlashTimelineRight=new TimelineMax({repeat:-1});for(var b=0;b<this.cornerLightsRight.length;b++){var c=Game.getRandom(.8,1);this.cornerLightsRight[b].scale.x=this.cornerLightsRight[b].scale.y=c,this.cornerLightsRight[b].alpha=.8,this.grabFlashTimelineRight.add([TweenMax.to(this.cornerLightsRight[b].scale,.15,{x:3*c,y:3*c,ease:Sine.easeOut,yoyo:!0,repeat:1})],.3*b)}}},b.prototype.nextEnemy=function(){this.difficulty++,this.enemyCharacterManager.increaseDifficulty(),this.tentacleManager.reset(),this.impactManager.reset(),this.healthManager.reset(),this.score++,this.score>=15&&this.game.earnCrossGameCurrency(),this.updateScore(!1),this.startDelay=TweenMax.delayedCall(2,this.nextEnemySpawn,null,this)},b.prototype.getCharacterKnockoutBlow=function(){var a=!1,b=this.enemyCharacterManager.getEnemyCharacterState("left"),c=this.enemyCharacterManager.getEnemyCharacterState("right");return"knockoutblow"!=b&&"knockoutblow"!=c||(a=!0),a},b.prototype.playerGrabbed=function(a){Game.playSound("spongebob-laugh"+String(Game.getRandom(1,2,!0))),this.impactManager.playerGrabbed(a),Game.playSound("sq-bad"+String(Game.getRandom(1,2,!0))),this.healthManager.beginHealthDrain(a)},b.prototype.enemyDrained=function(){this.enemyCharacterManager.enemyDrained(),this.impactManager.enemyDrained(),this.tentacleManager.readyUppercut(),this.breakHold("left",1),this.breakHold("right",1)},b.prototype.enemyLastHit=function(){this.enemyCharacterManager.enemyLastHit()},b.prototype.breakHold=function(a,b){"left"==a?(Game.stopSound("sb-sparkles-left"),this.grabFlashTimelineLeft&&this.grabFlashTimelineLeft.kill(),this.cornerLightHolderLeft.visible=!1):"right"==a&&(Game.stopSound("sb-sparkles-right"),this.grabFlashTimelineRight&&this.grabFlashTimelineRight.kill(),this.cornerLightHolderRight.visible=!1),1==b&&this.healthManager.killHealthAnim()},b.prototype.tick=function(){a.prototype.tick.call(this),1!=this.paused&&1!=this.tutorialOn&&(this.tentacleManager.tick(),this.healthManager.tick())},b.prototype.gameOver=function(){this.game.setScene("slapHappyEndScene",!1,[this.score]),Game.stopSound("music"),Game.stopSound("sb-sparkles-left"),Game.stopSound("sb-sparkles-right")},b.prototype.keyDown=function(b){if(a.prototype.keyDown.call(this,b),1!=this.paused&&0!=this.inputAllowed&&("left"==b?this.inputLeft():"right"==b&&this.inputRight(),"enter"==b)){if(0==this.game.crossGameCurrencyOwned)return;this.slapSillyButtonClicked(this)}},b.prototype.keyUp=function(a){},b.prototype.rolloverButton=function(a,b){a.powerUpOverTimeline&&a.powerUpOverTimeline.kill();var c=Game.getRandom(-.25,.25);a.powerUpOverTimeline=new TimelineMax,a.powerUpOverTimeline.add(TweenMax.to(b.scale,.2,{x:1.2,y:1.2,ease:Back.easeOut}),0),a.powerUpOverTimeline.add(TweenMax.to(b,.2,{rotation:c,ease:Back.easeOut}),0)},b.prototype.rolloutButton=function(a,b){a.powerUpOutTimeline&&a.powerUpOutTimeline.kill(),a.powerUpOutTimeline=new TimelineMax,a.powerUpOutTimeline.add(TweenMax.to(b.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),a.powerUpOutTimeline.add(TweenMax.to(b,.2,{rotation:0,ease:Back.easeOut}),0)},b.prototype.downonButton=function(a,b){a.powerUpDownTimeline&&a.powerUpDownTimeline.kill(),a.powerUpDownTimeline=new TimelineMax,a.powerUpDownTimeline.add(TweenMax.to(b.scale,.2,{x:1.3,y:1.3,ease:Back.easeOut}),0)},b.prototype.uponButton=function(a,b){a.powerUpUpTimeline&&a.powerUpUpTimeline.kill(),a.powerUpUpTimeline=new TimelineMax,a.powerUpUpTimeline.add(TweenMax.to(b.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),TweenMax.delayedCall(.15,a.slapSillyButtonClicked,[a])},b.prototype.shuffleArray=function(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a},b.prototype.pause=function(){a.prototype.pause.call(this),Game.pauseSound("music"),this.enemyCharacterManager.pause(),this.impactManager.pause(),this.tentacleManager.pause(),this.healthManager.pause(),this.pauseResumeTween(this.startDelay,"pause"),this.pauseResumeTween(this.slapSillyActiveDelay,"pause"),this.pauseResumeTween(this.grabFlashTimelineLeft,"pause"),this.pauseResumeTween(this.grabFlashTimelineRight,"pause"),this.pauseResumeTween(this.crowdAnimation,"pause"),this.pauseResumeTween(this.inGameTuteStage2Delay,"pause"),this.pauseResumeTween(this.inGameTutePromptTimeline,"pause")},b.prototype.resume=function(){a.prototype.resume.call(this),Game.resumeSound("music"),this.enemyCharacterManager.resume(),this.impactManager.resume(),this.tentacleManager.resume(),this.healthManager.resume(),this.pauseResumeTween(this.startDelay,"resume"),this.pauseResumeTween(this.slapSillyActiveDelay,"resume"),this.pauseResumeTween(this.grabFlashTimelineLeft,"resume"),this.pauseResumeTween(this.grabFlashTimelineRight,"resume"),this.pauseResumeTween(this.crowdAnimation,"resume"),this.pauseResumeTween(this.inGameTuteStage2Delay,"resume"),this.pauseResumeTween(this.inGameTutePromptTimeline,"resume"),1==this.inGameTutorialOn?this.game.ui.setUI("gameplay-with-skip"):this.game.ui.setUI("gameplay")},b.prototype.restore=function(){a.prototype.restore.call(this),this.game.ui.setUI("pause")},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.enemyCharacterManager.destroy(),this.impactManager.destroy(),this.tentacleManager.destroy(),this.inputManager.destroy(),this.healthManager.destroy(),this.crowdAnimation&&this.crowdAnimation.kill(),this.startDelay&&this.startDelay.kill(),this.slapSillyActiveDelay&&this.slapSillyActiveDelay.kill(),this.scorePopTimeline&&this.scorePopTimeline.kill(),this.grabFlashTimelineLeft&&this.grabFlashTimelineLeft.kill(),this.grabFlashTimelineRight&&this.grabFlashTimelineRight.kill(),this.coinSparkleTimeline&&this.coinSparkleTimeline.kill(),this.powerUpOverTimeline&&this.powerUpOverTimeline.kill(),this.powerUpOutTimeline&&this.powerUpOutTimeline.kill(),this.powerUpDownTimeline&&this.powerUpDownTimeline.kill(),this.powerUpUpTimeline&&this.powerUpUpTimeline.kill(),this.inGameTuteStage2Delay&&this.inGameTuteStage2Delay.kill(),this.inGameTutePromptTimeline&&this.inGameTutePromptTimeline.kill(),Game.stopSound("sb-sparkles-left"),Game.stopSound("sb-sparkles-right"),Game.stopSound("music");for(var b=0;b<this.crowdSpongebobs.length;b++)Game.displayStore.returnPooledItem(this.crowdSpongebobs[b].sprite);for(var b=0;b<this.cornerLightsLeft.length;b++)Game.displayStore.returnPooledItem(this.cornerLightsLeft[b]),Game.displayStore.returnPooledItem(this.cornerLightsRight[b]);Game.displayStore.returnPooledItem(this.cornerLightHolderLeft),Game.displayStore.returnPooledItem(this.cornerLightHolderRight),Game.displayStore.returnPooledItem(this.flower1),Game.displayStore.returnPooledItem(this.flower2),Game.displayStore.returnPooledItem(this.flower3),Game.displayStore.returnPooledItem(this.bgOverlay),Game.displayStore.returnPooledItem(this.bgOverlay2)},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},MeowNoGameplayScene=function(a){function b(b){a.call(this,b),this.id="meowNoGameplayScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),Game.displayStore.flush(["title-meow-no-assets","intro-meow-no-assets"]),this.setBackgroundColor(11714614),this.game.ui.setUI("skip"),this.beserkerCoolDown=!1,this.motionLinesCounter=0,this.motionLinesCounterLimit=2,this.motionLinesIndex=0,this.garyElectricityFrames=new Array,this.garyElectricityFrames.push(Game.displayStore.getSprite("gary-electricity-1")),this.garyElectricityFrames.push(Game.displayStore.getSprite("gary-electricity-1")),this.garyElectricityFrames.push(Game.displayStore.getSprite("gary-electricity-2")),this.garyElectricityFrames.push(Game.displayStore.getSprite("gary-electricity-2")),this.garyElectricityFrames.push(Game.displayStore.getSprite("gary-electricity-3")),this.garyElectricityFrames.push(Game.displayStore.getSprite("gary-electricity-3")),this.garyElectricityFrames.push(Game.displayStore.getSprite("gary-electricity-4")),this.garyElectricityFrames.push(Game.displayStore.getSprite("gary-electricity-4")),this.garyElectricityFrames[0].scale.x=-1,this.garyElectricityFrames[3].scale.x=-1,this.garyElectricityFrames[5].scale.x=-1,this.garyElectricityFrames[7].scale.x=-1,this.garyElectricityFrameCounter=0,this.garyElectricityFrameCounterLimit=4,this.garyElectricFrameIndex=0,Game.playSound("music"),Game.setSoundVolume("music",.2),this.crossCurrencyOverlayDisplayed=!1,this.scoreHolder=Game.displayStore.getContainer("meow-no-score-holder"),this.scoreBubbleBG=Game.displayStore.getSprite("meow-no-score-bubble"),this.garyFrameCounter=0,this.garyFrameCounterLimit=5,this.tutorialOverlayHolder=Game.displayStore.getContainer("meow-no-tutorial-overlay"),this.tutorialOverlayBG=this.tutorialOverlayHolder.getSprite("tutorial-overlay-bg"),this.crossCurrencyOverlayHolder=Game.displayStore.getContainer("meow-no-cross-currency-overlay"),this.crossCurrencyOverlayBG=this.crossCurrencyOverlayHolder.getSprite("tutorial-overlay-bg"),this.coinSparkle=this.crossCurrencyOverlayHolder.getSprite("tutorial-coin-sparkle"),this.coinSparkle.blendMode=PIXI.BLEND_MODES.ADD,this.tutorialOverlayBG.width=Game.stageWidth,this.tutorialOverlayBG.height=Game.stageHeight,this.crossCurrencyOverlayBG.width=Game.stageWidth,this.crossCurrencyOverlayBG.height=Game.stageHeight,this.tutorialOverlayBG.alpha=.8,this.crossCurrencyOverlayBG.alpha=.8,this.tutorialOn=!0,this.garyPupilBasePos={x:0,y:-76},this.scoreText=Game.displayStore.getBitmapText("spongebob-font"),this.garyFrameIndex=0,this.skyFlower1=Game.displayStore.getSprite("sky-flower-1"),this.skyFlower1.position.x=100,this.skyFlower1.position.y=150,this.skyFlower2=Game.displayStore.getSprite("sky-flower-2"),this.skyFlower2.position.x=600,this.skyFlower2.position.y=30,this.skyFlower3=Game.displayStore.getSprite("sky-flower-3"),this.skyFlower3.position.x=950,this.skyFlower3.position.y=200,this.skyFlower4=Game.displayStore.getSprite("sky-flower-4"),this.skyFlower4.position.x=250,this.skyFlower4.position.y=0,this.bubbleParticleHolder=Game.displayStore.getContainer("bubble-particle-holder"),this.garyEyeContainerLeft=Game.displayStore.getContainer("eye-stalk-holder"),this.garyEyeContainerRight=Game.displayStore.getContainer("eye-stalk-holder"),this.garyEyeStalkLeft=Game.displayStore.getSprite("gary-eye-stalk"),this.garyEyeStalkRight=Game.displayStore.getSprite("gary-eye-stalk"),this.garyPupilLeft=Game.displayStore.getSprite("gary-eye-pupil"),this.garyPupilRight=Game.displayStore.getSprite("gary-eye-pupil"),this.garyEyeLidLeft=Game.displayStore.getSprite("gary-eye-lid"),this.garyEyeLidRight=Game.displayStore.getSprite("gary-eye-lid"),this.garyEyeContainerLeft.addChild(this.garyEyeStalkLeft),this.garyEyeContainerRight.addChild(this.garyEyeStalkRight),this.garyEyeContainerLeft.addChild(this.garyPupilLeft),this.garyEyeContainerRight.addChild(this.garyPupilRight),this.garyEyeLidLeft.position.y=-70,this.garyEyeLidRight.position.y=-70,this.garyPupilLeft.position.x=this.garyPupilBasePos.x,this.garyPupilLeft.position.y=this.garyPupilBasePos.y,this.garyPupilRight.position.x=this.garyPupilBasePos.x,this.garyPupilRight.position.y=this.garyPupilBasePos.y,this.garyEyeContainerLeft.position.x=-10,this.garyEyeContainerRight.position.x=10,this.garyEyeContainerLeft.position.y=35,this.garyEyeContainerRight.position.y=35,this.garyEyeContainerLeft.rotation=-.1,this.garyEyeContainerRight.rotation=.1,this.garyBodyLeft1=Game.displayStore.getSprite("gary-body-left-1"),this.garyBodyLeft2=Game.displayStore.getSprite("gary-body-left-2"),this.garyBodyLeft3=Game.displayStore.getSprite("gary-body-left-3"),this.garyBodyMiddle1=Game.displayStore.getSprite("gary-body-middle-1"),this.garyBodyMiddle2=Game.displayStore.getSprite("gary-body-middle-2"),this.garyBodyMiddle3=Game.displayStore.getSprite("gary-body-middle-3"),this.garyBodyRight1=Game.displayStore.getSprite("gary-body-right-1"),this.garyBodyRight2=Game.displayStore.getSprite("gary-body-right-2"),this.garyBodyRight3=Game.displayStore.getSprite("gary-body-right-3"),this.spongebobHolder=Game.displayStore.getContainer("spongebob-holder"),this.spongebobArmHolderLeft=Game.displayStore.getContainer("spongebob-arm-holder"),this.spongebobArmHolderRight=Game.displayStore.getContainer("spongebob-arm-holder"),this.spongebobHolder.position.x=Game.stageWidth/2,this.spongebobHolder.position.y=180,this.spongebobBubblesFG=Game.displayStore.getSprite("spongebob-bubbles-fg"),this.spongebobBubblesFG.position.y=240,this.spongebobBubblesFG.position.x=Game.stageWidth/2,this.spongebobBubblesBG=Game.displayStore.getSprite("spongebob-bubbles-bg"),this.spongebobBubblesBG.position.y=180,this.spongebobBubblesBG.position.x=Game.stageWidth/2,this.spongebobBubblesRoad=Game.displayStore.getSprite("spongebob-bubbles-road"),this.spongebobBubblesRoad.position.y=260,this.spongebobBubblesRoad.position.x=Game.stageWidth/2,this.spongebobFace=Game.displayStore.getSprite("spongebob-face"),this.spongebobFace.position.y=-10,this.spongebobPants=Game.displayStore.getSprite("spongebob-pants"),this.spongebobPants.position.x=9,this.spongebobPants.position.y=80,this.spongebobArmBottomLeft=Game.displayStore.getSprite("spongebob-arm-bottom"),this.spongebobArmBottomRight=Game.displayStore.getSprite("spongebob-arm-bottom"),this.spongebobArmTopLeft=Game.displayStore.getSprite("spongebob-arm-top"),this.spongebobArmTopRight=Game.displayStore.getSprite("spongebob-arm-top"),this.spongebobArmHolderLeft.addChild(this.spongebobArmTopLeft),this.spongebobArmHolderLeft.addChild(this.spongebobArmBottomLeft),this.spongebobArmHolderRight.addChild(this.spongebobArmTopRight),this.spongebobArmHolderRight.addChild(this.spongebobArmBottomRight),this.spongebobArmHolderLeft.position.x=-60,this.spongebobArmHolderLeft.position.y=20,this.spongebobArmHolderRight.position.x=60,this.spongebobArmHolderRight.position.y=20,this.spongebobArmBottomRight.position.x=60,this.spongebobArmBottomRight.position.y=32,this.spongebobArmBottomLeft.position.x=60,this.spongebobArmBottomLeft.position.y=32,this.spongebobArmHolderLeft.scale.x=-1,this.spongebobHolder.addChild(this.spongebobPants),this.spongebobHolder.addChild(this.spongebobArmHolderLeft),this.spongebobHolder.addChild(this.spongebobArmHolderRight),this.spongebobHolder.addChild(this.spongebobFace),this.spongebobHolder.rotation=-.2,this.spongebobArmHolderRight.rotation=.4,this.spongebobArmBottomRight.rotation=.5,this.spongebobArmHolderLeft.rotation=.4,this.spongebobArmBottomLeft.rotation=.2,this.moveInputAllowed=!1,this.beserkerModeActive=!1,this.roadGraphicsCounter=0,this.roadGraphicsCounterLimit=6,this.roadGraphicState=0,this.pickupsFound=0,this.bubbleShieldActive=!1,this.beserkerVisibleFrameCounter=0,this.beserkerVisibleFrameCounterLimit=10,this.garyMovementTimes=new Array,this.garyMovementTimes.push(.5),this.garyMovementTimes.push(.4),this.garyMovementTimes.push(.3),this.garyMovementTimes.push(.2),this.pickupShieldAmount=3,this.distance=0,this.difficulty=1,this.collisionCheckCounter=0,this.collisionCheckCounterLimit=2,this.distanceCheckCounter=0,this.distanceCheckCounterLimit=120,this.difficultyCounter=0,this.difficultyCounterLimit=2,this.score=0,this.laneWidth=100,this.garyMovementTime=this.garyMovementTimes[0],this.garyAngleMultiplier=.05,this.garyPos=0,this.bgElement=Game.displayStore.getSprite("meow-no-bg-element"),this.bgElement.width=Game.stageWidth,this.bgElement.height=Game.stageHeight,this.sky=Game.displayStore.getSprite("sky"),this.sky.width=Game.stageWidth,this.sky.height=Game.stageHeight,this.hillRoadLeft=Game.displayStore.getSprite("hill-road-bg"),this.hillRoadLeft.position.x=0,this.hillRoadLeft.position.y=Game.stageHeight,this.hillRoadRight=Game.displayStore.getSprite("hill-road-bg"),this.hillRoadRight.position.x=Game.stageWidth,this.hillRoadRight.position.y=Game.stageHeight,this.hillRoadRight.scale.x=-1,this.hillRoadLeftBG=Game.displayStore.getSprite("hill-road-bg-green-line"),this.hillRoadLeftBG.position.x=0,this.hillRoadLeftBG.position.y=256,this.hillRoadRightBG=Game.displayStore.getSprite("hill-road-bg-green-line"),this.hillRoadRightBG.position.x=Game.stageWidth,this.hillRoadRightBG.position.y=256,this.container.addChild(this.sky),this.container.addChild(this.skyFlower1),this.container.addChild(this.skyFlower2),this.container.addChild(this.skyFlower3),this.container.addChild(this.skyFlower4),this.bubbleParticleHolder.position.x=Game.stageWidth/2,this.bubbleParticleHolder.position.y=100,this.container.addChild(this.bubbleParticleHolder),this.container.addChild(this.spongebobBubblesBG),this.container.addChild(this.hillRoadLeftBG),this.container.addChild(this.hillRoadRightBG),this.garyHolder=Game.displayStore.getContainer("character-holder"),this.garyHolder.addChild(this.garyBodyLeft1),this.garyHolder.addChild(this.garyBodyLeft2),this.garyHolder.addChild(this.garyBodyLeft3),this.garyHolder.addChild(this.garyBodyMiddle1),this.garyHolder.addChild(this.garyBodyMiddle2),this.garyHolder.addChild(this.garyBodyMiddle3),this.garyHolder.addChild(this.garyBodyRight1),this.garyHolder.addChild(this.garyBodyRight2),this.garyHolder.addChild(this.garyBodyRight3),this.garyHolder.addChild(this.garyEyeContainerLeft),this.garyHolder.addChild(this.garyEyeContainerRight);for(var c=0;c<this.garyElectricityFrames.length;c++)this.garyElectricityFrames[c].alpha=.9,this.garyElectricityFrames[c].blendMode=PIXI.BLEND_MODES.ADD,this.garyElectricityFrames[c].visible=!1,this.garyHolder.addChild(this.garyElectricityFrames[c]);this.garyBodyFrames=new Array,this.garyBodyFrames.push({sprite:this.garyBodyLeft1,lane:"left",laneIndex:0}),this.garyBodyFrames.push({sprite:this.garyBodyLeft2,lane:"left",laneIndex:1}),this.garyBodyFrames.push({sprite:this.garyBodyLeft3,lane:"left",laneIndex:2}),this.garyBodyFrames.push({sprite:this.garyBodyMiddle1,lane:"middle",laneIndex:0}),this.garyBodyFrames.push({sprite:this.garyBodyMiddle2,lane:"middle",laneIndex:1}),this.garyBodyFrames.push({sprite:this.garyBodyMiddle3,lane:"middle",laneIndex:2}),this.garyBodyFrames.push({sprite:this.garyBodyRight1,lane:"right",laneIndex:0}),this.garyBodyFrames.push({sprite:this.garyBodyRight2,lane:"right",laneIndex:1}),this.garyBodyFrames.push({sprite:this.garyBodyRight3,lane:"right",laneIndex:2});for(var c=0;c<this.garyBodyFrames.length;c++)4!=c&&(this.garyBodyFrames[c].sprite.visible=!1);this.garyLane="middle",this.garyBodyMiddle1.visible=!0,this.bubbleShield=this.garyHolder.getSprite("bubble-shield"),this.bubbleShield.visible=!1,this.bubbleShield.blendMode=PIXI.BLEND_MODES.ADD,this.bubbleShieldStarburst=this.garyHolder.getSprite("bubble-shield-starburst"),this.bubbleShieldStarburst.visible=!1,this.bubbleShieldStarburst.blendMode=PIXI.BLEND_MODES.ADD,this.garyHolder.addChild(this.bubbleShield),this.garyHolder.addChild(this.bubbleShieldStarburst),this.garyHolder.position.x=Game.stageWidth/2,this.garyHolder.position.y=Game.stageHeight/2-50,this.mainContainer=Game.displayStore.getContainer("meow-no-container"),this.outerContainer=Game.displayStore.getContainer("meow-no-outer-container"),this.outerContainer.addChild(this.spongebobHolder),this.outerContainer.addChild(this.spongebobBubblesFG),this.outerContainer.addChild(this.mainContainer),this.container.addChild(this.outerContainer),this.hillRoadRightBG.scale.x=-1,this.mainContainer.addChild(this.hillRoadLeft),this.mainContainer.addChild(this.hillRoadRight),this.mainContainer.addChild(this.spongebobBubblesRoad),this.mainContainer.addChild(this.garyHolder),this.inputManager=new MeowNoInputManager(this),this.itemManager=new MeowNoItemManager(this),this.sceneryManager=new MeowNoSceneryManager(this),this.sceneryManager.setUpStartingItems(),this.beserkerButton=Game.displayStore.getSprite("power-up-button"),this.beserkerButton.position.y=550,this.beserkerButton.position.x=100,this.beserkerButton.interactive=!0,this.beserkerButton.buttonMode=!0,this.scoreHolder.addChild(this.scoreBubbleBG),this.scoreText.scale.x=this.scoreText.scale.y=.75,this.scoreHolder.addChild(this.scoreText),this.updateScore(!0),this.scoreHolder.position.x=120,this.scoreHolder.position.y=120,this.scoreHolder.rotation=-.1,this.container.addChild(this.scoreHolder),this.motionLineHolders=new Array;for(var c=0;6>c;c++)this.motionLineHolders.push(Game.displayStore.getContainer("motion-line-holder")),this.container.addChild(this.motionLineHolders[c]),this.motionLineHolders[c].position.x=Game.stageWidth/2,this.motionLineHolders[c].position.y=Game.stageHeight/2;this.motionLines=new Array;for(var d=0,e=0,c=0;60>c;c++)this.motionLines.push(Game.displayStore.getSprite("motion-line")),this.motionLineHolders[e].addChild(this.motionLines[c]),this.motionLineHolders[e].alpha=.4,this.motionLineHolders[e].visible=!1,d++,d>=10&&(d=0,e++);for(var c=0;c<this.motionLines.length;c++){var f=this.motionLines[c],g=Game.getRandom(0,2,!0),h=Game.getRandom(.8,2),i=0;switch(g){case 0:f.position.x=Game.getRandom(-(Game.stageWidth/2)-100,-(Game.stageWidth/2)+100),f.position.y=Game.getRandom(-Game.stageHeight/2,Game.stageHeight/2),i=-(f.position.y+300)/800;break;case 1:f.position.x=Game.getRandom(-(Game.stageWidth/2)-100,Game.stageWidth/2+100),f.position.y=Game.getRandom(Game.stageHeight/2-100,Game.stageHeight/2),i=.5*-Math.PI+-f.position.x/500;break;case 2:f.position.x=Game.getRandom(Game.stageWidth/2-100,Game.stageWidth/2+100),f.position.y=Game.getRandom(-Game.stageHeight/2,Game.stageHeight/2),i=(f.position.y+300)/800}f.rotation=i,f.scale.x=h,f.scale.y=h}this.container.addChild(this.tutorialOverlayHolder),this.sceneryManager.setUpStartingItems()},b.prototype.removeTutorialOverlay=function(){this.spongebobPhraseDelay=TweenMax.delayedCall(5,this.spongebobPhrase,[this]),1==this.game.crossGameCurrencyOwned&&0==this.crossCurrencyOverlayDisplayed?(this.crossCurrencyOverlayDisplayed=!0,this.container.removeChild(this.tutorialOverlayHolder),this.container.addChild(this.crossCurrencyOverlayHolder),this.coinSparkleTimeline=new TimelineMax,this.coinSparkleTimeline.add([TweenMax.to(this.coinSparkle,3,{rotation:2*Math.PI,repeat:-1,ease:Linear.easeNone})],0)):0!=this.game.crossGameCurrencyOwned&&1!=this.crossCurrencyOverlayDisplayed||(this.coinSparkleTimeline&&this.coinSparkleTimeline.kill(),this.tutorialOn=!1,this.container.removeChild(this.tutorialOverlayHolder),this.container.removeChild(this.crossCurrencyOverlayHolder),this.inputManager.createInput(),this.game.ui.setUI("gameplay"),this.createInitialTimelines(),this.startPupilTimeline(this),this.createBubbleParticles(),1==this.game.crossGameCurrencyOwned&&this.createCrossGamePowerUpButton(),Game.playSound("spongebob-laugh1")),this.moveInputAllowed=!0},b.prototype.spongebobPhrase=function(a){if(Game.getRandom(0,1)<.5){var b=Game.getRandom(1,3,!0);1==b?Game.playSound("sb-sing"):2==b?Game.playSound("spongebob-laugh1"):3==b&&Game.playSound("spongebob-laugh2")}a.spongebobPhraseDelay=TweenMax.delayedCall(Game.getRandom(5,7,!0),a.spongebobPhrase,[a])},b.prototype.createInitialTimelines=function(){this.spongebobTimeline=new TimelineMax({repeat:-1}),this.spongebobTimeline.add([TweenMax.to(this.spongebobHolder.position,.3,{y:120,ease:Quad.easeIn}),TweenMax.to(this.spongebobHolder,.3,{rotation:0,ease:Quad.easeIn}),TweenMax.to(this.spongebobArmHolderLeft,.3,{rotation:0,ease:Quad.easeIn}),TweenMax.to(this.spongebobArmHolderRight,.3,{rotation:0,ease:Quad.easeIn}),TweenMax.to(this.spongebobArmBottomLeft,.3,{rotation:0,ease:Quad.easeIn}),TweenMax.to(this.spongebobArmBottomRight,.3,{rotation:0,ease:Quad.easeIn})]),this.spongebobTimeline.add([TweenMax.to(this.spongebobHolder.position,.3,{y:180,ease:Quad.easeOut}),TweenMax.to(this.spongebobHolder,.3,{rotation:.2,ease:Quad.easeOut}),TweenMax.to(this.spongebobArmHolderLeft,.3,{rotation:-.4,ease:Quad.easeOut}),TweenMax.to(this.spongebobArmHolderRight,.3,{rotation:-.4,ease:Quad.easeOut}),TweenMax.to(this.spongebobArmBottomLeft,.3,{rotation:.6,ease:Quad.easeOut}),TweenMax.to(this.spongebobArmBottomRight,.3,{rotation:-.5,ease:Quad.easeOut})]),this.spongebobTimeline.add([TweenMax.to(this.spongebobHolder.position,.3,{y:120,ease:Quad.easeIn}),TweenMax.to(this.spongebobHolder,.3,{rotation:0,ease:Quad.easeIn}),TweenMax.to(this.spongebobArmHolderLeft,.3,{rotation:0,ease:Quad.easeIn}),TweenMax.to(this.spongebobArmHolderRight,.3,{rotation:0,ease:Quad.easeIn}),TweenMax.to(this.spongebobArmBottomLeft,.3,{rotation:0,ease:Quad.easeIn}),TweenMax.to(this.spongebobArmBottomRight,.3,{rotation:0,ease:Quad.easeIn})]),this.spongebobTimeline.add([TweenMax.to(this.spongebobHolder.position,.3,{y:180,ease:Quad.easeOut}),TweenMax.to(this.spongebobHolder,.3,{rotation:-.2,ease:Quad.easeOut}),TweenMax.to(this.spongebobArmHolderLeft,.3,{rotation:.4,ease:Quad.easeOut}),TweenMax.to(this.spongebobArmHolderRight,.3,{rotation:.4,ease:Quad.easeOut}),TweenMax.to(this.spongebobArmBottomLeft,.3,{rotation:.2,ease:Quad.easeOut}),TweenMax.to(this.spongebobArmBottomRight,.3,{rotation:.5,ease:Quad.easeOut})]),this.bubbleTimeline=new TimelineMax,this.bubbleTimeline.add([TweenMax.to(this.spongebobBubblesFG.scale,.4,{x:.95,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.spongebobBubblesFG.scale,.45,{y:.95,ease:Sine.easeInOut,repeat:-1,yoyo:!0})],0),this.bubbleTimeline.add([TweenMax.to(this.spongebobBubblesBG.scale,.55,{x:.95,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.spongebobBubblesBG.scale,.5,{y:.95,ease:Sine.easeInOut,repeat:-1,yoyo:!0})],0),this.bubbleTimeline.add([TweenMax.to(this.spongebobBubblesRoad.scale,.2,{x:.95,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.spongebobBubblesRoad.scale,.25,{y:.95,ease:Sine.easeInOut,repeat:-1,yoyo:!0})],0)},b.prototype.startPupilTimeline=function(a){a.garyPupilTimeline&&a.garyPupilTimeline.kill();var b=Game.getRandom(0,.2);a.garyPupilTimeline=new TimelineMax({onComplete:a.startPupilTimeline,onCompleteParams:[a],delay:b});var c=Game.getRandom(0,4),d=Game.getRandom(0,360),e=a.garyPupilBasePos.x+c*Math.cos(d),f=a.garyPupilBasePos.y+c*Math.sin(d),g=Game.getRandom(.05,.2);a.garyPupilTimeline.add([TweenMax.to(a.garyPupilLeft.position,g,{x:e,y:f,ease:Quad.easeInOut}),TweenMax.to(a.garyPupilRight.position,g,{x:e,y:f,ease:Quad.easeInOut})])},b.prototype.createBubbleParticles=function(){this.bubbleParticles=new Array;for(var a=0;20>a;a++){var b=Game.displayStore.getSprite("bubble-particle");new TimelineMax;this.bubbleParticleHolder.addChild(b),this.bubbleParticles.push({sprite:b,timeline:null}),this.startBubble(this,this.bubbleParticles[a])}},b.prototype.startBubble=function(a,b){var c,d=b.sprite,e=Game.getRandom(0,200);c=Game.getRandom(0,1)<.5?-1:1;var f=e*c,g=Game.getRandom(0,30),h=-90+g*-c,i=Game.getRandom(.5,1);d.scale.x=d.scale.y=i,d.position.x=f,d.position.y=e/1.5,b.timeline&&b.timeline.kill(),b.timeline=new TimelineMax({onComplete:a.startBubble,onCompleteParams:[a,b]}),b.timeline.add([TweenMax.to(d,2,{physics2D:{velocity:Game.getRandom(150,250),angle:h,gravity:200}}),TweenMax.to(d.scale,2,{x:0,y:0,ease:Sine.easeOut})],Game.getRandom(0,2))},b.prototype.createCrossGamePowerUpButton=function(){this.container.addChild(this.beserkerButton);var a=this;Game.onDesktop?(this.beserkerButton.on("mouseover",function(b){a.rolloverButton(a,this)}),this.beserkerButton.on("mouseout",function(b){a.rolloutButton(a,this)}),this.beserkerButton.on("mousedown",function(b){a.downonButton(a,this)}),this.beserkerButton.on("mouseup",function(b){b.stopPropagation(),a.uponButton(a,this)})):(this.beserkerButton.on("touchstart",function(b){a.downonButton(a,this)}),this.beserkerButton.on("touchend",function(b){b.stopPropagation(),a.uponButton(a,this)}),this.beserkerButton.on("touchendoutside",function(b){a.rolloutButton(a,this)}))},b.prototype.rolloverButton=function(a,b){a.powerUpOverTimeline&&a.powerUpOverTimeline.kill();
var c=Game.getRandom(-.25,.25);a.powerUpOverTimeline=new TimelineMax,a.powerUpOverTimeline.add(TweenMax.to(b.scale,.2,{x:1.2,y:1.2,ease:Back.easeOut}),0),a.powerUpOverTimeline.add(TweenMax.to(b,.2,{rotation:c,ease:Back.easeOut}),0)},b.prototype.rolloutButton=function(a,b){a.powerUpOutTimeline&&a.powerUpOutTimeline.kill(),a.powerUpOutTimeline=new TimelineMax,a.powerUpOutTimeline.add(TweenMax.to(b.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),a.powerUpOutTimeline.add(TweenMax.to(b,.2,{rotation:0,ease:Back.easeOut}),0)},b.prototype.downonButton=function(a,b){a.powerUpDownTimeline&&a.powerUpDownTimeline.kill(),a.powerUpDownTimeline=new TimelineMax,a.powerUpDownTimeline.add(TweenMax.to(b.scale,.2,{x:1.3,y:1.3,ease:Back.easeOut}),0)},b.prototype.uponButton=function(a,b){a.powerUpUpTimeline&&a.powerUpUpTimeline.kill(),a.powerUpUpTimeline=new TimelineMax,a.powerUpUpTimeline.add(TweenMax.to(b.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),TweenMax.delayedCall(.15,a.beserkerButtonClicked,[a])},b.prototype.beserkerButtonClicked=function(a){1!=a.beserkerModeActive&&(a.beserkerModeActive=!0,a.beserkerCoolDown=!0,a.game.crossGameCurrencyOwned=!1,a.beserkerButton.removeAllListeners(),a.container.removeChild(a.beserkerButton),a.beserkerActiveDelay=TweenMax.delayedCall(15,a.endBeserkerMode,[a]))},b.prototype.endBeserkerMode=function(a){a.beserkerModeActive=!1;for(var b=0;b<a.garyElectricityFrames.length;b++)a.garyElectricityFrames[b].visible=!1;a.beserkerCoolDownDelay&&a.beserkerCoolDownDelay.kill(),a.beserkerCoolDownDelay=TweenMax.delayedCall(2,a.killBeserker,[a])},b.prototype.killBeserker=function(a){a.beserkerCoolDown=!1},b.prototype.unlockInput=function(a){a.moveInputAllowed=!0},b.prototype.startGame=function(){},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"pausebutton":this.pause();break;case"playbuttonlarge":this.resume();break;case"skipbutton":this.removeTutorialOverlay();break;case"helpbutton":this.game.setScene("helpScene",!1,["meowNo",this.id])}},b.prototype.tick=function(){if(a.prototype.tick.call(this),1!=this.paused&&1!=this.tutorialOn){if(this.garyFrameCounter++,this.garyFrameCounter>=this.garyFrameCounterLimit&&(this.garyFrameCounter=0,this.nextGaryFrame()),1==this.beserkerModeActive&&(this.garyElectricityFrameCounter++,this.garyElectricityFrameCounter>=this.garyElectricityFrameCounterLimit)){this.garyElectricityFrameCounter=0,this.garyElectricFrameIndex++,this.garyElectricFrameIndex>=this.garyElectricityFrames.length&&(this.garyElectricFrameIndex=0);for(var b=0;b<this.garyElectricityFrames.length;b++)this.garyElectricityFrames[b].visible=!1;this.garyElectricityFrames[this.garyElectricFrameIndex].visible=!0}if(this.collisionCheckCounter++,this.collisionCheckCounter>=this.collisionCheckCounterLimit&&(this.collisionCheckCounter=0,this.itemManager.checkCollisions(this.garyHolder,this.garyBodyFrames[0].sprite)),this.distanceCheckCounter++,this.distanceCheckCounter>=this.distanceCheckCounterLimit&&(this.distanceCheckCounter=0,this.distance++,this.distance>=20&&this.game.earnCrossGameCurrency(),this.updateScore(!1),this.difficultyCounter++,this.difficultyCounter>=this.difficultyCounterLimit&&(this.difficultyCounter=0,this.increaseDifficulty())),this.itemManager.tick(),this.sceneryManager.tick(),!(this.difficulty<3)){this.motionLinesCounter++,this.motionLinesCounter>=this.motionLinesCounterLimit&&(this.motionLinesCounter=0,this.motionLinesIndex++,this.motionLinesIndex>=this.motionLineHolders.length&&(this.motionLinesIndex=0));for(var b=0;b<this.motionLineHolders.length;b++)this.motionLineHolders[b].visible=!1;this.motionLineHolders[this.motionLinesIndex].visible=!0}}},b.prototype.updateScore=function(a){this.scoreText.text=String(this.distance)+"m",this.scoreText.position.x=0-this.scoreText.width/2,this.scoreText.position.y=0-this.scoreText.height/2-10,1!=a&&(this.scorePopTimeline&&this.scorePopTimeline.kill(),this.scorePopTimeline=new TimelineMax,this.scorePopTimeline.add([TweenMax.to(this.scoreHolder.scale,.3,{x:1.2,y:1.2,ease:Sine.easeOut}),TweenMax.to(this.scoreHolder,.3,{rotation:Game.getRandom(-.1,.1),ease:Sine.easeOut})],0),this.scorePopTimeline.add([TweenMax.to(this.scoreHolder.scale,.3,{x:1,y:1,ease:Back.easeOut})],.3))},b.prototype.nextGaryFrame=function(){this.garyFrameIndex++,this.garyFrameIndex>=3&&(this.garyFrameIndex=0);for(var a=0;a<this.garyBodyFrames.length;a++)this.garyBodyFrames[a].sprite.visible=!1;for(var a=0;a<this.garyBodyFrames.length;a++)if(this.garyFrameIndex==this.garyBodyFrames[a].laneIndex&&this.garyBodyFrames[a].lane==this.garyLane){this.garyBodyFrames[a].sprite.visible=!0;break}},b.prototype.increaseDifficulty=function(){Game.playSound("gary-meow"+String(Game.getRandom(1,7,!0))),this.difficulty>=6||(this.difficulty+=.25,this.garyMovementTimes[this.difficulty]&&(this.garyMovementTime=this.garyMovementTimes[this.difficulty]),this.itemManager.increaseDifficulty(this.difficulty),this.sceneryManager.increaseDifficulty(this.difficulty))},b.prototype.gameOver=function(){this.game.setScene("meowNoEndScene",!1,[this.distance]),Game.stopSound("music")},b.prototype.itemPickup=function(){Game.playSound("chew"+String(Game.getRandom(1,6,!0))),1!=this.bubbleShieldActive&&(this.pickupsFound++,this.pickupsFound>=this.pickupShieldAmount&&(this.pickupsFound=0,this.activateBubbleShield()))},b.prototype.obstacleHit=function(){0==this.bubbleShieldActive?(Game.playSound("spongebob-gotcha"),this.gameOver()):(this.bubbleShieldActive=!1,Game.playSound("spongebob-laugh"),this.bubbleShield.visible=!1,TweenMax.to(this.bubbleShieldStarburst.scale,.5,{x:0,y:0,ease:Quad.easeOut}))},b.prototype.activateBubbleShield=function(){this.bubbleShieldActive=!0,this.bubbleShield.scale.x=0,this.bubbleShield.scale.y=0,this.bubbleShield.visible=!0,this.bubbleShield.alpha=.8,this.bubbleShieldStarburst.scale.x=0,this.bubbleShieldStarburst.scale.y=0,this.bubbleShieldStarburst.visible=!0,this.bubbleShieldStarburst.rotation=0,this.bubbleShieldStarburst.alpha=.8,this.bubbleShieldTimeline&&this.bubbleShieldTimeline.kill(),this.bubbleShieldTimeline=new TimelineMax,this.bubbleShieldTimeline.add([TweenMax.to(this.bubbleShield.scale,.2,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.bubbleShieldStarburst.scale,.2,{x:1.5,y:1.5,ease:Back.easeOut})],0),this.bubbleShieldTimeline.add([TweenMax.to(this.bubbleShieldStarburst,2,{rotation:2*Math.PI,ease:Linear.easeNone,repeat:-1})],.01)},b.prototype.swapDepthGary=function(){this.mainContainer.addChild(this.spongebobBubblesRoad),this.mainContainer.addChild(this.garyHolder)},b.prototype.triggerDepthSwap=function(){this.itemManager.sceneryTriggeredDepthSwap()},b.prototype.keyDown=function(b){if(a.prototype.keyDown.call(this,b),1!=this.paused)switch(b){case"left":0==this.garyPos?this.calculateGaryMove("left"):1==this.garyPos&&this.calculateGaryMove("middle");break;case"right":-1==this.garyPos?this.calculateGaryMove("middle"):0==this.garyPos&&this.calculateGaryMove("right");break;case"enter":if(0==this.game.crossGameCurrencyOwned)return;this.beserkerButtonClicked(this)}},b.prototype.parseInput=function(a){if(0!=this.moveInputAllowed)switch(a){case"left":Game.playSound(""),0==this.garyPos?this.calculateGaryMove("left"):1==this.garyPos&&this.calculateGaryMove("middle");break;case"right":-1==this.garyPos?this.calculateGaryMove("middle"):0==this.garyPos&&this.calculateGaryMove("right")}},b.prototype.calculateGaryMove=function(a){if(0!=this.moveInputAllowed){var b,c,d;switch(a){case"left":if(Game.playSound("woosh"+String(Game.getRandom(13,20,!0))),-1==this.garyPos)return;0==this.garyPos?c=1:1==this.garyPos&&(c=2),d=-this.garyAngleMultiplier,this.garyPos=-1,b=Game.stageWidth/2-this.laneWidth;break;case"middle":if(Game.playSound("woosh"+String(Game.getRandom(13,20,!0))),0==this.garyPos)return;c=1,d=0,this.garyPos=0,b=Game.stageWidth/2;break;case"right":if(Game.playSound("woosh"+String(Game.getRandom(13,20,!0))),1==this.garyPos)return;0==this.garyPos?c=1:-1==this.garyPos&&(c=2),d=this.garyAngleMultiplier,this.garyPos=1,b=Game.stageWidth/2+this.laneWidth}this.garyLane=a,this.moveGary(b,c,d)}},b.prototype.moveGary=function(a,b,c){this.garyMoveTimeline&&this.garyMoveTimeline.kill();var d,e;"left"==this.garyLane?(d=-25,e=-5):"middle"==this.garyLane?(d=-10,e=10):"right"==this.garyLane&&(d=5,e=25);var f;"left"==this.garyLane?f=-.2:"middle"==this.garyLane?f=0:"right"==this.garyLane&&(f=.2),this.garyMoveTimeline=new TimelineMax({onComplete:this.unlockInput,onCompleteParams:[this]}),this.garyMoveTimeline.add([TweenMax.to(this.garyHolder.position,this.garyMovementTime*b,{x:a,ease:Back.easeOut}),TweenMax.to(this.garyHolder,this.garyMovementTime*b,{rotation:c}),TweenMax.to(this.garyEyeContainerLeft.position,this.garyMovementTime*b,{x:d,ease:Back.easeOut}),TweenMax.to(this.garyEyeContainerLeft,this.garyMovementTime*b,{delay:.2,rotation:f-.1,ease:Back.easeOut}),TweenMax.to(this.garyEyeContainerRight.position,this.garyMovementTime*b,{x:e,ease:Back.easeOut}),TweenMax.to(this.garyEyeContainerRight,this.garyMovementTime*b,{delay:.2,rotation:f+.1,ease:Back.easeOut})],0)},b.prototype.keyUp=function(a){},b.prototype.pause=function(){a.prototype.pause.call(this),Game.pauseSound("music"),this.pauseResumeTween(this.beserkerActiveDelay,"pause"),this.pauseResumeTween(this.garyMoveTimeline,"pause"),this.pauseResumeTween(this.bubbleShieldTimeline,"pause"),this.pauseResumeTween(this.spongebobTimeline,"pause"),this.pauseResumeTween(this.bubbleTimeline,"pause"),this.pauseResumeTween(this.garyPupilTimeline,"pause"),this.pauseResumeTween(this.spongebobPhraseDelay,"pause"),this.pauseResumeTween(this.beserkerCoolDownDelay,"pause");for(var b=0;b<this.bubbleParticles.length;b++)this.pauseResumeTween(this.bubbleParticles[b].timeline,"pause");this.pauseResumeTween(this.scorePopTimeline,"pause")},b.prototype.resume=function(){a.prototype.resume.call(this),Game.resumeSound("music"),this.pauseResumeTween(this.beserkerActiveDelay,"resume"),this.pauseResumeTween(this.garyMoveTimeline,"resume"),this.pauseResumeTween(this.bubbleShieldTimeline,"resume"),this.pauseResumeTween(this.spongebobTimeline,"resume"),this.pauseResumeTween(this.bubbleTimeline,"resume"),this.pauseResumeTween(this.garyPupilTimeline,"resume"),this.pauseResumeTween(this.spongebobPhraseDelay,"resume"),this.pauseResumeTween(this.beserkerCoolDownDelay,"resume");for(var b=0;b<this.bubbleParticles.length;b++)this.pauseResumeTween(this.bubbleParticles[b].timeline,"resume");this.pauseResumeTween(this.scorePopTimeline,"resume"),this.game.ui.setUI("gameplay")},b.prototype.restore=function(){a.prototype.restore.call(this),this.game.ui.setUI("pause")},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.inputManager.destroy(),this.itemManager.destroy(),this.sceneryManager.destroy(),TweenMax.killDelayedCallsTo(this.spongebobPhrase),Game.displayStore.returnPooledItem(this.garyEyeContainerLeft),Game.displayStore.returnPooledItem(this.garyEyeContainerRight),Game.displayStore.returnPooledItem(this.garyEyeStalkLeft),Game.displayStore.returnPooledItem(this.garyEyeStalkRight),Game.displayStore.returnPooledItem(this.garyPupilLeft),Game.displayStore.returnPooledItem(this.garyPupilRight),Game.displayStore.returnPooledItem(this.garyEyeLidLeft),Game.displayStore.returnPooledItem(this.garyEyeLidRight);for(var b=0;b<this.bubbleParticles.length;b++)this.bubbleParticles[b].timeline&&this.bubbleParticles[b].timeline.kill(),Game.displayStore.returnPooledItem(this.bubbleParticles[b].sprite);this.garyBodyLeft2.visible=!1,this.garyBodyLeft3.visible=!1,this.garyBodyMiddle1.visible=!1,this.garyBodyMiddle2.visible=!1,this.garyBodyMiddle3.visible=!1,this.garyBodyRight1.visible=!1,this.garyBodyRight2.visible=!1,this.garyBodyRight3.visible=!1,Game.displayStore.returnPooledItem(this.spongebobArmHolderLeft),Game.displayStore.returnPooledItem(this.spongebobArmHolderRight),Game.displayStore.returnPooledItem(this.spongebobFace),Game.displayStore.returnPooledItem(this.spongebobPants),Game.displayStore.returnPooledItem(this.spongebobArmTopLeft),Game.displayStore.returnPooledItem(this.spongebobArmBottomLeft),Game.displayStore.returnPooledItem(this.spongebobArmTopRight),Game.displayStore.returnPooledItem(this.spongebobArmBottomRight),Game.displayStore.returnPooledItem(this.hillRoadLeft),Game.displayStore.returnPooledItem(this.hillRoadRight),Game.displayStore.returnPooledItem(this.hillRoadLeftBG),Game.displayStore.returnPooledItem(this.hillRoadRightBG);for(var b=0;b<this.garyElectricityFrames.length;b++)Game.displayStore.returnPooledItem(this.garyElectricityFrames[b]);for(var b=0;b<this.motionLines.length;b++)Game.displayStore.returnPooledItem(this.motionLines[b]);for(var b=0;b<this.motionLineHolders.length;b++)Game.displayStore.returnPooledItem(this.motionLineHolders[b]);this.garyMoveTimeline&&this.garyMoveTimeline.kill(),this.beserkerActiveDelay&&this.beserkerActiveDelay.kill(),this.beserkerCoolDownDelay&&this.beserkerCoolDownDelay.kill(),this.spongebobTimeline&&this.spongebobTimeline.kill(),this.bubbleTimeline&&this.bubbleTimeline.kill(),this.garyPupilTimeline&&this.garyPupilTimeline.kill(),this.scorePopTimeline&&this.scorePopTimeline.kill(),this.coinSparkleTimeline&&this.coinSparkleTimeline.kill(),this.powerUpOverTimeline&&this.powerUpOverTimeline.kill(),this.powerUpOutTimeline&&this.powerUpOutTimeline.kill(),this.powerUpDownTimeline&&this.powerUpDownTimeline.kill(),this.powerUpUpTimeline&&this.powerUpUpTimeline.kill(),this.spongebobPhraseDelay&&this.spongebobPhraseDelay.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},PattyPileUpEndScene=function(a){function b(b){a.call(this,b),this.id="pattyPileUpEndScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),b&&(this.score=b[0]),this.setBackgroundColor(11714614),this.game.ui.setUI("game-over"),this.scoreText=Game.displayStore.getBitmapText("spongebob-font"),this.scoreText.text=this.score,this.earnedCrossGameCurrency=!1,1==this.game.crossGameCurrencyIsNew&&1==this.game.crossGameCurrencyOwned&&(this.game.crossGameCurrencyIsNew=!1,this.earnedCrossGameCurrency=!0),this.coin=Game.displayStore.getSprite("gameover-coin"),this.sand1=Game.displayStore.getSprite("gameover-sand"),this.sand2=Game.displayStore.getSprite("gameover-sand"),this.sand3=Game.displayStore.getSprite("gameover-sand"),this.sand4=Game.displayStore.getSprite("gameover-sand"),this.sand2.position.x=Game.stageWidth,this.sand3.position.y=Game.stageHeight/2,this.sand4.position.y=Game.stageHeight/2,this.sand4.position.x=Game.stageWidth,this.sand2.scale.x=-1,this.sand4.scale.x=-1,this.coverHolder=Game.displayStore.getContainer("gameover-cover-holder"),this.bed=Game.displayStore.getSprite("gameover-bed"),this.bed2=Game.displayStore.getSprite("gameover-bed"),this.bed.position.x=0,this.bed2.scale.x=-1,this.bed2.position.x=1024,this.spongebobContainer=Game.displayStore.getContainer("gameover-spongebob"),this.eyeLids=this.spongebobContainer.getSprite("gameover-spongebob-lids"),this.cover=Game.displayStore.getSprite("gameover-cover"),this.cover2=Game.displayStore.getSprite("gameover-cover"),this.cover.position.x=70,this.cover2.position.x=69+2*this.cover.width,this.cover2.scale.x=-1,this.coverHolder.addChild(this.cover),this.coverHolder.addChild(this.cover2),this.leftHand=Game.displayStore.getSprite("gameover-hand"),this.rightHand=Game.displayStore.getSprite("gameover-hand"),this.leftHand.scale.x=-1,this.leftHand.position.x=280,this.title=Game.displayStore.getSprite("gameover-title"),this.scoreTitle=Game.displayStore.getSprite("gameover-score"),this.earnedTitle=Game.displayStore.getSprite("gameover-earned"),this.sand1.tint=16776640,this.sand2.tint=16776640,this.sand3.tint=16776640,this.sand4.tint=16776640,this.scoreCloud=Game.displayStore.getSprite("gameover-cloud"),this.coinCloud=Game.displayStore.getSprite("gameover-cloud"),this.coinBurst1=Game.displayStore.getSprite("gameover-burst"),this.coinBurst2=Game.displayStore.getSprite("gameover-burst"),this.starburst1=Game.displayStore.getSprite("gameover-burst"),this.starburst2=Game.displayStore.getSprite("gameover-burst"),this.replayCloud=Game.displayStore.getSprite("gameover-cloud"),this.titleCloud1=Game.displayStore.getSprite("gameover-cloud"),this.scoreCloud.position.y=420,this.scoreCloud.position.x=182,this.scoreCloud.scale.x=this.scoreCloud.scale.y=.6,this.coinCloud.position.y=303,this.coinCloud.position.x=813,this.coinCloud.scale.x=this.coinCloud.scale.y=.55,this.titleCloud1.position.x=512,this.titleCloud1.position.y=-6,this.titleCloud1.scale.x=this.titleCloud1.scale.y=1,this.replayCloud.position.x=941,this.replayCloud.position.y=568,this.replayCloud.scale.x=this.replayCloud.scale.y=.7,this.titleCloud1.tint=this.game.cloudColours[1],this.replayCloud.tint=this.game.cloudColours[1],this.scoreCloud.tint=this.game.cloudColours[1],this.coinCloud.tint=this.game.cloudColours[1],this.coinBurst1.position.x=877,this.coinBurst1.position.y=281,this.coinBurst1.scale.x=this.coinBurst1.scale.y=.2,this.coinBurst2.position.x=758,this.coinBurst2.position.y=352,this.coinBurst2.scale.x=this.coinBurst2.scale.y=.15,this.starburst1.position.x=809,this.starburst1.position.y=326,this.starburst1.scale.x=this.starburst1.scale.y=.9,this.starburst2.position.x=210,this.starburst2.position.y=439,this.starburst2.scale.x=this.starburst2.scale.y=.8,this.coinBurst1.blendMode=PIXI.BLEND_MODES.ADD,this.coinBurst2.blendMode=PIXI.BLEND_MODES.ADD,this.coin.rotation=0,this.starburst1.blendMode=PIXI.BLEND_MODES.ADD,this.starburst2.blendMode=PIXI.BLEND_MODES.ADD,this.scoreText.position.y=400,this.scoreText.position.x=120,this.scoreText.rotation=-.2,this.container.addChild(this.sand1),this.container.addChild(this.sand2),this.container.addChild(this.sand3),this.container.addChild(this.sand4),this.container.addChild(this.bed),this.container.addChild(this.bed2),this.container.addChild(this.spongebobContainer),this.container.addChild(this.coverHolder),this.container.addChild(this.leftHand),this.container.addChild(this.rightHand),this.container.addChild(this.starburst2),this.container.addChild(this.titleCloud1),this.container.addChild(this.replayCloud),this.container.addChild(this.title),1==this.earnedCrossGameCurrency&&(this.container.addChild(this.starburst1),this.container.addChild(this.coinCloud),this.container.addChild(this.coin),this.container.addChild(this.coinBurst1),this.container.addChild(this.coinBurst2),this.container.addChild(this.earnedTitle)),this.container.addChild(this.scoreCloud),this.container.addChild(this.scoreTitle),this.container.addChild(this.scoreText),this.animation=new TimelineMax,this.largeReplayButton=Game.displayStore.getButton("replaybuttonlarge"),this.largeReplayButton.visuallyPrepareButton("large"),this.largeReplayButton.position.x=900,this.largeReplayButton.position.y=500,this.largeReplayButton.scale.x=0,this.largeReplayButton.scale.y=0,this.largeReplayButton.rotation=Game.getRandom(-2,2),this.largeReplayButton.alpha=1,this.animation2=new TimelineMax,this.animation.call(Game.playSound,["first-visit"],this,0),this.eyeanimation=new TimelineMax({repeat:-1}),this.eyeanimation.add([TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y+20,ease:Power2.easeInOut}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y,ease:Power2.easeInOut,delay:4}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y+10,ease:Power2.easeInOut,delay:8}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y,ease:Power2.easeInOut,delay:12}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y+10,ease:Power2.easeInOut,delay:16}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y,ease:Power2.easeInOut,delay:20})],0),this.animation=new TimelineMax({onComplete:this.activateReplayButton,onCompleteParams:[this]}),this.animation.add([TweenMax.to(this.largeReplayButton.scale,.6,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.largeReplayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largeReplayButton,.25,{alpha:1,ease:Quad.easeOut})],.2),this.animation2=new TimelineMax,this.animation2.add([TweenMax.from(this.title.scale,.6,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.to(this.title.position,2,{y:67,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:.2}),TweenMax.from(this.scoreTitle.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.scoreText.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.starburst2.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.scoreCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.scoreCloud.scale,2,{x:.64,y:.56,ease:Back.easeIn,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreCloud.position,2,{y:410,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreTitle.position,2,{y:359,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreText.position,2,{y:390,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.from(this.earnedTitle.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.starburst1.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.coinCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.coinCloud.scale,4,{x:.57,y:.53,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinCloud.position,4,{y:290,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coin.position,4,{y:309,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinBurst1.position,4,{y:281,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinBurst2.position,4,{y:333,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.earnedTitle.position,4,{y:252,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.titleCloud1.scale,2,{x:1.05,y:.95,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:0}),TweenMax.to(this.titleCloud1.position,3,{y:-16,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:.2}),TweenMax.to(this.starburst1,15,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.to(this.starburst2,15,{rotation:-6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.from(this.coin,1,{rotation:-3,ease:Back.easeInOut}),TweenMax.to(this.coin,4,{rotation:.5,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:1}),TweenMax.from(this.coin.scale,.8,{x:0,y:0,ease:Back.easeInOut,delay:.5}),TweenMax.to(this.coinBurst1,3,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.to(this.coinBurst2,3,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.from(this.replayCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.replayCloud.scale,2.8,{x:.74,y:.66,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:1,repeatDelay:2})],0),this.sparkleAnimation=new TimelineMax({repeat:-1}),this.sparkleAnimation.add([TweenMax.from(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:1}),TweenMax.from(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:2}),TweenMax.to(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:2.3}),TweenMax.to(this.coinBurst1.scale,.2,{x:.15,y:.15,ease:Power2.easeIn,delay:6.6}),TweenMax.to(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:10.9}),TweenMax.to(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:3.3}),TweenMax.to(this.coinBurst2.scale,.2,{x:.15,y:.15,ease:Power2.easeIn,delay:7.6}),TweenMax.to(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:11.9})],0),this.container.addChild(this.largeReplayButton)},b.prototype.activateReplayButton=function(a){a.game.ui.addCustomUIButton(a.largeReplayButton,!1)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"replaybuttonlarge":this.game.setScene("pattyPileUpGameplayScene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill(),this.animation2&&this.animation2.kill(),this.eyeanimation&&this.eyeanimation.kill(),this.sparkleAnimation&&this.sparkleAnimation.kill(),Game.displayStore.returnPooledItem(this.sand1),Game.displayStore.returnPooledItem(this.sand2),Game.displayStore.returnPooledItem(this.sand3),Game.displayStore.returnPooledItem(this.sand4),Game.displayStore.returnPooledItem(this.bed),Game.displayStore.returnPooledItem(this.bed2),Game.displayStore.returnPooledItem(this.cover),Game.displayStore.returnPooledItem(this.cover2),Game.displayStore.returnPooledItem(this.leftHand),Game.displayStore.returnPooledItem(this.rightHand),Game.displayStore.returnPooledItem(this.scoreCloud),Game.displayStore.returnPooledItem(this.coinCloud),Game.displayStore.returnPooledItem(this.coinBurst1),Game.displayStore.returnPooledItem(this.coinBurst2),Game.displayStore.returnPooledItem(this.starburst1),Game.displayStore.returnPooledItem(this.starburst2),Game.displayStore.returnPooledItem(this.replayCloud),Game.displayStore.returnPooledItem(this.titleCloud1)},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},SlapHappyEndScene=function(a){function b(b){a.call(this,b),this.id="slapHappyEndScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),b&&(this.score=b[0]),this.setBackgroundColor(11714614),this.game.ui.setUI("game-over"),this.scoreText=Game.displayStore.getBitmapText("spongebob-font"),this.scoreText.text=this.score,this.earnedCrossGameCurrency=!1,1==this.game.crossGameCurrencyIsNew&&1==this.game.crossGameCurrencyOwned&&(this.game.crossGameCurrencyIsNew=!1,this.earnedCrossGameCurrency=!0),this.coin=Game.displayStore.getSprite("gameover-coin"),this.sand1=Game.displayStore.getSprite("gameover-sand"),this.sand2=Game.displayStore.getSprite("gameover-sand"),this.sand3=Game.displayStore.getSprite("gameover-sand"),this.sand4=Game.displayStore.getSprite("gameover-sand"),this.sand2.position.x=Game.stageWidth,this.sand3.position.y=Game.stageHeight/2,this.sand4.position.y=Game.stageHeight/2,this.sand4.position.x=Game.stageWidth,this.sand2.scale.x=-1,this.sand4.scale.x=-1,this.coverHolder=Game.displayStore.getContainer("gameover-cover-holder"),this.bed=Game.displayStore.getSprite("gameover-bed"),this.bed2=Game.displayStore.getSprite("gameover-bed"),this.bed.position.x=0,this.bed2.scale.x=-1,this.bed2.position.x=1024,this.spongebobContainer=Game.displayStore.getContainer("gameover-squidward"),this.eyeLids=this.spongebobContainer.getSprite("gameover-squidward-lids"),this.cover=Game.displayStore.getSprite("gameover-cover"),this.cover2=Game.displayStore.getSprite("gameover-cover"),this.cover.position.x=70,this.cover2.position.x=69+2*this.cover.width,this.cover2.scale.x=-1,this.coverHolder.addChild(this.cover),this.coverHolder.addChild(this.cover2),this.leftHand=Game.displayStore.getSprite("gameover-hand"),this.rightHand=Game.displayStore.getSprite("gameover-hand"),this.leftHand.scale.x=-1,this.leftHand.position.x=300,this.title=Game.displayStore.getSprite("gameover-title"),this.scoreTitle=Game.displayStore.getSprite("gameover-score"),this.earnedTitle=Game.displayStore.getSprite("gameover-earned"),this.sand1.tint=16776640,this.sand2.tint=16776640,this.sand3.tint=16776640,this.sand4.tint=16776640,this.scoreCloud=Game.displayStore.getSprite("gameover-cloud"),this.coinCloud=Game.displayStore.getSprite("gameover-cloud"),this.coinBurst1=Game.displayStore.getSprite("gameover-burst"),this.coinBurst2=Game.displayStore.getSprite("gameover-burst"),this.starburst1=Game.displayStore.getSprite("gameover-burst"),this.starburst2=Game.displayStore.getSprite("gameover-burst"),this.replayCloud=Game.displayStore.getSprite("gameover-cloud"),this.titleCloud1=Game.displayStore.getSprite("gameover-cloud"),this.scoreCloud.position.y=420,this.scoreCloud.position.x=182,this.scoreCloud.scale.x=this.scoreCloud.scale.y=.6,this.coinCloud.position.y=303,this.coinCloud.position.x=813,this.coinCloud.scale.x=this.coinCloud.scale.y=.55,this.titleCloud1.position.x=512,this.titleCloud1.position.y=-6,this.titleCloud1.scale.x=this.titleCloud1.scale.y=1,this.replayCloud.position.x=941,this.replayCloud.position.y=568,this.replayCloud.scale.x=this.replayCloud.scale.y=.7,this.titleCloud1.tint=this.game.cloudColours[2],this.replayCloud.tint=this.game.cloudColours[2],this.scoreCloud.tint=this.game.cloudColours[2],this.coinCloud.tint=this.game.cloudColours[2],this.coinBurst1.position.x=877,this.coinBurst1.position.y=281,this.coinBurst1.scale.x=this.coinBurst1.scale.y=.2,this.coinBurst2.position.x=758,this.coinBurst2.position.y=352,this.coinBurst2.scale.x=this.coinBurst2.scale.y=.15,this.starburst1.position.x=809,this.starburst1.position.y=326,this.starburst1.scale.x=this.starburst1.scale.y=.9,this.starburst2.position.x=210,this.starburst2.position.y=439,this.starburst2.scale.x=this.starburst2.scale.y=.8,this.coinBurst1.blendMode=PIXI.BLEND_MODES.ADD,this.coinBurst2.blendMode=PIXI.BLEND_MODES.ADD,this.coin.rotation=0,this.starburst1.blendMode=PIXI.BLEND_MODES.ADD,this.starburst2.blendMode=PIXI.BLEND_MODES.ADD,this.scoreText.position.y=400,this.scoreText.position.x=120,this.scoreText.rotation=-.2,this.container.addChild(this.sand1),this.container.addChild(this.sand2),this.container.addChild(this.sand3),this.container.addChild(this.sand4),this.container.addChild(this.bed),this.container.addChild(this.bed2),this.container.addChild(this.spongebobContainer),this.container.addChild(this.coverHolder),this.container.addChild(this.leftHand),this.container.addChild(this.rightHand),this.container.addChild(this.starburst2),this.container.addChild(this.titleCloud1),this.container.addChild(this.replayCloud),this.container.addChild(this.title),1==this.earnedCrossGameCurrency&&(this.container.addChild(this.starburst1),this.container.addChild(this.coinCloud),this.container.addChild(this.coin),this.container.addChild(this.coinBurst1),this.container.addChild(this.coinBurst2),this.container.addChild(this.earnedTitle)),this.container.addChild(this.scoreCloud),this.container.addChild(this.scoreTitle),this.container.addChild(this.scoreText),this.animation=new TimelineMax,this.largeReplayButton=Game.displayStore.getButton("replaybuttonlarge"),this.largeReplayButton.visuallyPrepareButton("large"),this.largeReplayButton.position.x=900,this.largeReplayButton.position.y=500,this.largeReplayButton.scale.x=0,this.largeReplayButton.scale.y=0,this.largeReplayButton.rotation=Game.getRandom(-2,2),this.largeReplayButton.alpha=1,this.animation2=new TimelineMax,this.eyeanimation=new TimelineMax({repeat:-1}),this.eyeanimation.add([TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y+20,ease:Power2.easeInOut}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y,ease:Power2.easeInOut,delay:4}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y+10,ease:Power2.easeInOut,delay:8}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y,ease:Power2.easeInOut,delay:12}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y+10,ease:Power2.easeInOut,delay:16}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y,ease:Power2.easeInOut,delay:20})],0),this.animation=new TimelineMax({onComplete:this.activateReplayButton,onCompleteParams:[this]}),this.animation.add([TweenMax.to(this.largeReplayButton.scale,.6,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.largeReplayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largeReplayButton,.25,{alpha:1,ease:Quad.easeOut})],.2),this.animation2=new TimelineMax,this.animation2.add([TweenMax.from(this.title.scale,.6,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.to(this.title.position,2,{y:67,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:.2}),TweenMax.from(this.scoreTitle.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.scoreText.scale,.7,{x:0,y:0,ease:Back.easeOut,
delay:.2}),TweenMax.from(this.starburst2.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.scoreCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.scoreCloud.scale,2,{x:.64,y:.56,ease:Back.easeIn,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreCloud.position,2,{y:410,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreTitle.position,2,{y:359,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreText.position,2,{y:390,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.from(this.earnedTitle.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.starburst1.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.coinCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.coinCloud.scale,4,{x:.57,y:.53,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinCloud.position,4,{y:290,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coin.position,4,{y:309,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinBurst1.position,4,{y:281,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinBurst2.position,4,{y:333,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.earnedTitle.position,4,{y:252,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.titleCloud1.scale,2,{x:1.05,y:.95,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:0}),TweenMax.to(this.titleCloud1.position,3,{y:-16,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:.2}),TweenMax.to(this.starburst1,15,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.to(this.starburst2,15,{rotation:-6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.from(this.coin,1,{rotation:-3,ease:Back.easeInOut}),TweenMax.to(this.coin,4,{rotation:.5,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:1}),TweenMax.from(this.coin.scale,.8,{x:0,y:0,ease:Back.easeInOut,delay:.5}),TweenMax.to(this.coinBurst1,3,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.to(this.coinBurst2,3,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.from(this.replayCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.replayCloud.scale,2.8,{x:.74,y:.66,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:1,repeatDelay:2})],0),this.sparkleAnimation=new TimelineMax({repeat:-1}),this.sparkleAnimation.add([TweenMax.from(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:1}),TweenMax.from(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:2}),TweenMax.to(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:2.3}),TweenMax.to(this.coinBurst1.scale,.2,{x:.15,y:.15,ease:Power2.easeIn,delay:6.6}),TweenMax.to(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:10.9}),TweenMax.to(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:3.3}),TweenMax.to(this.coinBurst2.scale,.2,{x:.15,y:.15,ease:Power2.easeIn,delay:7.6}),TweenMax.to(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:11.9})],0),this.animation=new TimelineMax,this.animation=new TimelineMax({onComplete:this.activateReplayButton,onCompleteParams:[this]}),this.animation.add([TweenMax.to(this.largeReplayButton.scale,.6,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.largeReplayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largeReplayButton,.25,{alpha:1,ease:Quad.easeOut})],.2),this.container.addChild(this.largeReplayButton)},b.prototype.activateReplayButton=function(a){a.game.ui.addCustomUIButton(a.largeReplayButton,!1)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"replaybuttonlarge":this.game.setScene("slapHappyGameplayScene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill(),this.animation2&&this.animation2.kill(),this.eyeanimation&&this.eyeanimation.kill(),this.sparkleAnimation&&this.sparkleAnimation.kill(),Game.displayStore.returnPooledItem(this.sand1),Game.displayStore.returnPooledItem(this.sand2),Game.displayStore.returnPooledItem(this.sand3),Game.displayStore.returnPooledItem(this.sand4),Game.displayStore.returnPooledItem(this.bed),Game.displayStore.returnPooledItem(this.bed2),Game.displayStore.returnPooledItem(this.cover),Game.displayStore.returnPooledItem(this.cover2),Game.displayStore.returnPooledItem(this.leftHand),Game.displayStore.returnPooledItem(this.rightHand),Game.displayStore.returnPooledItem(this.scoreCloud),Game.displayStore.returnPooledItem(this.coinCloud),Game.displayStore.returnPooledItem(this.coinBurst1),Game.displayStore.returnPooledItem(this.coinBurst2),Game.displayStore.returnPooledItem(this.starburst1),Game.displayStore.returnPooledItem(this.starburst2),Game.displayStore.returnPooledItem(this.replayCloud),Game.displayStore.returnPooledItem(this.titleCloud1)},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryEndScene=function(a){function b(b){a.call(this,b),this.tintColour=10996890,this.id="glideToGloryEndScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),b&&(this.score=b[0]),this.setBackgroundColor(11714614),this.game.ui.setUI("game-over"),this.earnedCrossGameCurrency=!1,this.scoreText=Game.displayStore.getBitmapText("spongebob-font"),this.scoreText.text=this.score+"m",1==this.game.crossGameCurrencyIsNew&&1==this.game.crossGameCurrencyOwned&&(this.game.crossGameCurrencyIsNew=!1,this.earnedCrossGameCurrency=!0),this.coin=Game.displayStore.getSprite("gameover-coin"),this.sand1=Game.displayStore.getSprite("gameover-sand"),this.sand2=Game.displayStore.getSprite("gameover-sand"),this.sand3=Game.displayStore.getSprite("gameover-sand"),this.sand4=Game.displayStore.getSprite("gameover-sand"),this.sand2.position.x=Game.stageWidth,this.sand3.position.y=Game.stageHeight/2,this.sand4.position.y=Game.stageHeight/2,this.sand4.position.x=Game.stageWidth,this.sand2.scale.x=-1,this.sand4.scale.x=-1,this.coverHolder=Game.displayStore.getContainer("gameover-cover-holder"),this.bed=Game.displayStore.getSprite("gameover-bed"),this.bed2=Game.displayStore.getSprite("gameover-bed"),this.bed.position.x=0,this.bed2.scale.x=-1,this.bed2.position.x=1024,this.spongebobContainer=Game.displayStore.getContainer("gameover-plankton"),this.eyeLids=this.spongebobContainer.getSprite("gameover-plankton-lids"),this.cover=Game.displayStore.getSprite("gameover-cover"),this.cover2=Game.displayStore.getSprite("gameover-cover"),this.cover.position.x=70,this.cover2.position.x=69+2*this.cover.width,this.cover2.scale.x=-1,this.coverHolder.addChild(this.cover),this.coverHolder.addChild(this.cover2),this.leftHand=Game.displayStore.getSprite("gameover-hand"),this.rightHand=Game.displayStore.getSprite("gameover-hand"),this.leftHand.scale.x=-1,this.leftHand.position.x=300,this.title=Game.displayStore.getSprite("gameover-title"),this.scoreTitle=Game.displayStore.getSprite("gameover-score"),this.earnedTitle=Game.displayStore.getSprite("gameover-earned"),this.sand1.tint=this.tintColour,this.sand2.tint=this.tintColour,this.sand3.tint=this.tintColour,this.sand4.tint=this.tintColour,this.scoreCloud=Game.displayStore.getSprite("gameover-cloud"),this.coinCloud=Game.displayStore.getSprite("gameover-cloud"),this.coinBurst1=Game.displayStore.getSprite("gameover-burst"),this.coinBurst2=Game.displayStore.getSprite("gameover-burst"),this.starburst1=Game.displayStore.getSprite("gameover-burst"),this.starburst2=Game.displayStore.getSprite("gameover-burst"),this.replayCloud=Game.displayStore.getSprite("gameover-cloud"),this.titleCloud1=Game.displayStore.getSprite("gameover-cloud"),this.scoreCloud.position.y=420,this.scoreCloud.position.x=182,this.scoreCloud.scale.x=this.scoreCloud.scale.y=.6,this.scoreText.position.y=400,this.scoreText.position.x=120,this.scoreText.rotation=-.2,this.coinCloud.position.y=303,this.coinCloud.position.x=813,this.coinCloud.scale.x=this.coinCloud.scale.y=.55,this.titleCloud1.position.x=512,this.titleCloud1.position.y=-6,this.titleCloud1.scale.x=this.titleCloud1.scale.y=1,this.replayCloud.position.x=941,this.replayCloud.position.y=568,this.replayCloud.scale.x=this.replayCloud.scale.y=.7,this.coinBurst1.position.x=877,this.coinBurst1.position.y=281,this.coinBurst1.scale.x=this.coinBurst1.scale.y=.2,this.coinBurst2.position.x=758,this.coinBurst2.position.y=352,this.coinBurst2.scale.x=this.coinBurst2.scale.y=.15,this.titleCloud1.tint=this.game.cloudColours[0],this.replayCloud.tint=this.game.cloudColours[0],this.scoreCloud.tint=this.game.cloudColours[0],this.coinCloud.tint=this.game.cloudColours[0],this.starburst1.position.x=809,this.starburst1.position.y=326,this.starburst1.scale.x=this.starburst1.scale.y=.9,this.starburst2.position.x=210,this.starburst2.position.y=439,this.starburst2.scale.x=this.starburst2.scale.y=.8,this.coinBurst1.blendMode=PIXI.BLEND_MODES.ADD,this.coinBurst2.blendMode=PIXI.BLEND_MODES.ADD,this.coin.rotation=0,this.starburst1.blendMode=PIXI.BLEND_MODES.ADD,this.starburst2.blendMode=PIXI.BLEND_MODES.ADD,this.container.addChild(this.sand1),this.container.addChild(this.sand2),this.container.addChild(this.sand3),this.container.addChild(this.sand4),this.container.addChild(this.bed),this.container.addChild(this.bed2),this.container.addChild(this.spongebobContainer),this.container.addChild(this.coverHolder),this.container.addChild(this.leftHand),this.container.addChild(this.rightHand),this.container.addChild(this.starburst2),this.container.addChild(this.titleCloud1),this.container.addChild(this.replayCloud),this.container.addChild(this.title),1==this.earnedCrossGameCurrency&&(this.container.addChild(this.starburst1),this.container.addChild(this.coinCloud),this.container.addChild(this.coin),this.container.addChild(this.coinBurst1),this.container.addChild(this.coinBurst2),this.container.addChild(this.earnedTitle)),this.container.addChild(this.scoreCloud),this.container.addChild(this.scoreTitle),this.container.addChild(this.scoreText),this.animation=new TimelineMax,this.largeReplayButton=Game.displayStore.getButton("replaybuttonlarge"),this.largeReplayButton.visuallyPrepareButton("large"),this.largeReplayButton.position.x=900,this.largeReplayButton.position.y=500,this.largeReplayButton.scale.x=0,this.largeReplayButton.scale.y=0,this.largeReplayButton.rotation=Game.getRandom(-2,2),this.largeReplayButton.alpha=1,this.animation2=new TimelineMax,this.eyeanimation=new TimelineMax({repeat:-1}),this.eyeanimation.add([TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y+20,ease:Power2.easeInOut}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y,ease:Power2.easeInOut,delay:4}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y+10,ease:Power2.easeInOut,delay:8}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y,ease:Power2.easeInOut,delay:12}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y+10,ease:Power2.easeInOut,delay:16}),TweenMax.to(this.eyeLids.position,4,{y:this.eyeLids.position.y,ease:Power2.easeInOut,delay:20})],0),this.animation=new TimelineMax({onComplete:this.activateReplayButton,onCompleteParams:[this]}),this.animation.add([TweenMax.to(this.largeReplayButton.scale,.6,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.largeReplayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largeReplayButton,.25,{alpha:1,ease:Quad.easeOut})],.2),this.animation2=new TimelineMax,this.animation2.add([TweenMax.from(this.title.scale,.6,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.to(this.title.position,2,{y:67,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:.2}),TweenMax.from(this.scoreTitle.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.scoreText.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.starburst2.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.scoreCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.scoreCloud.scale,2,{x:.64,y:.56,ease:Back.easeIn,yoyo:!0,repeat:-1}),TweenMax.to(this.scoreCloud.position,2,{y:410,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreTitle.position,2,{y:359,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreText.position,2,{y:390,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.from(this.earnedTitle.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.starburst1.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.coinCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.coinCloud.scale,4,{x:.57,y:.53,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinCloud.position,4,{y:290,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coin.position,4,{y:309,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinBurst1.position,4,{y:281,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinBurst2.position,4,{y:333,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.earnedTitle.position,4,{y:252,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.titleCloud1.scale,2,{x:1.05,y:.95,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:0}),TweenMax.to(this.titleCloud1.position,3,{y:-16,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:.2}),TweenMax.to(this.starburst1,15,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.to(this.starburst2,15,{rotation:-6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.from(this.coin,1,{rotation:-3,ease:Back.easeInOut}),TweenMax.to(this.coin,4,{rotation:.5,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:1}),TweenMax.from(this.coin.scale,.8,{x:0,y:0,ease:Back.easeInOut,delay:.5}),TweenMax.to(this.coinBurst1,3,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.to(this.coinBurst2,3,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.from(this.replayCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.replayCloud.scale,2.8,{x:.74,y:.66,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:1,repeatDelay:2})],0),this.sparkleAnimation=new TimelineMax({repeat:-1}),this.sparkleAnimation.add([TweenMax.from(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:1}),TweenMax.from(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:2}),TweenMax.to(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:2.3}),TweenMax.to(this.coinBurst1.scale,.2,{x:.15,y:.15,ease:Power2.easeIn,delay:6.6}),TweenMax.to(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:10.9}),TweenMax.to(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:3.3}),TweenMax.to(this.coinBurst2.scale,.2,{x:.15,y:.15,ease:Power2.easeIn,delay:7.6}),TweenMax.to(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:11.9})],0),this.animation=new TimelineMax,this.animation=new TimelineMax({onComplete:this.activateReplayButton,onCompleteParams:[this]}),this.animation.add([TweenMax.to(this.largeReplayButton.scale,.6,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.largeReplayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largeReplayButton,.25,{alpha:1,ease:Quad.easeOut})],.2),this.container.addChild(this.largeReplayButton)},b.prototype.activateReplayButton=function(a){a.game.ui.addCustomUIButton(a.largeReplayButton,!1)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"replaybuttonlarge":this.game.setScene("glideToGloryGameplayScene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill(),this.animation2&&this.animation2.kill(),this.eyeanimation&&this.eyeanimation.kill(),this.sparkleAnimation&&this.sparkleAnimation.kill(),Game.displayStore.returnPooledItem(this.sand1),Game.displayStore.returnPooledItem(this.sand2),Game.displayStore.returnPooledItem(this.sand3),Game.displayStore.returnPooledItem(this.sand4),Game.displayStore.returnPooledItem(this.bed),Game.displayStore.returnPooledItem(this.bed2),Game.displayStore.returnPooledItem(this.cover),Game.displayStore.returnPooledItem(this.cover2),Game.displayStore.returnPooledItem(this.leftHand),Game.displayStore.returnPooledItem(this.rightHand),Game.displayStore.returnPooledItem(this.scoreCloud),Game.displayStore.returnPooledItem(this.coinCloud),Game.displayStore.returnPooledItem(this.coinBurst1),Game.displayStore.returnPooledItem(this.coinBurst2),Game.displayStore.returnPooledItem(this.starburst1),Game.displayStore.returnPooledItem(this.starburst2),Game.displayStore.returnPooledItem(this.replayCloud),Game.displayStore.returnPooledItem(this.titleCloud1)},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},MeowNoEndScene=function(a){function b(b){a.call(this,b),this.id="meowNoEndScene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),b&&(this.score=b[0]),this.setBackgroundColor(11714614),this.game.ui.setUI("game-over"),this.earnedCrossGameCurrency=!1,this.scoreText=Game.displayStore.getBitmapText("spongebob-font"),this.scoreText.text=this.score+"m",1==this.game.crossGameCurrencyIsNew&&1==this.game.crossGameCurrencyOwned&&(this.game.crossGameCurrencyIsNew=!1,this.earnedCrossGameCurrency=!0),this.coin=Game.displayStore.getSprite("gameover-coin"),this.bg=Game.displayStore.getSprite("gameover-bg"),this.spongebobContainer=Game.displayStore.getContainer("gameover-gary"),this.spongebobContainer.scale.x=.9,this.spongebobContainer.scale.y=.9,this.eyeLid1=this.spongebobContainer.getSprite("gameover-gary-lid1"),this.eyeLid2=this.spongebobContainer.getSprite("gameover-gary-lid2"),this.title=Game.displayStore.getSprite("gameover-title"),this.scoreTitle=Game.displayStore.getSprite("gameover-score"),this.earnedTitle=Game.displayStore.getSprite("gameover-earned"),this.garyBowl=Game.displayStore.getSprite("gameover-bowl"),this.scoreCloud=Game.displayStore.getSprite("gameover-cloud"),this.coinCloud=Game.displayStore.getSprite("gameover-cloud"),this.coinBurst1=Game.displayStore.getSprite("gameover-burst"),this.coinBurst2=Game.displayStore.getSprite("gameover-burst"),this.starburst1=Game.displayStore.getSprite("gameover-burst"),this.starburst2=Game.displayStore.getSprite("gameover-burst"),this.replayCloud=Game.displayStore.getSprite("gameover-cloud"),this.titleCloud1=Game.displayStore.getSprite("gameover-cloud"),this.scoreCloud.position.y=420,this.scoreCloud.position.x=182,this.scoreCloud.scale.x=this.scoreCloud.scale.y=.6,this.coinCloud.position.y=303,this.coinCloud.position.x=813,this.coinCloud.scale.x=this.coinCloud.scale.y=.55,this.titleCloud1.position.x=512,this.titleCloud1.position.y=-6,this.titleCloud1.scale.x=this.titleCloud1.scale.y=1,this.replayCloud.position.x=941,this.replayCloud.position.y=568,this.replayCloud.scale.x=this.replayCloud.scale.y=.7,this.coinBurst1.position.x=877,this.coinBurst1.position.y=281,this.coinBurst1.scale.x=this.coinBurst1.scale.y=.2,this.coinBurst2.position.x=758,this.coinBurst2.position.y=352,this.coinBurst2.scale.x=this.coinBurst2.scale.y=.15,this.titleCloud1.tint=this.game.cloudColours[3],this.replayCloud.tint=this.game.cloudColours[3],this.scoreCloud.tint=this.game.cloudColours[3],this.coinCloud.tint=this.game.cloudColours[3],this.starburst1.position.x=809,this.starburst1.position.y=326,this.starburst1.scale.x=this.starburst1.scale.y=.9,this.starburst2.position.x=210,this.starburst2.position.y=439,this.starburst2.scale.x=this.starburst2.scale.y=.8,this.coinBurst1.blendMode=PIXI.BLEND_MODES.ADD,this.coinBurst2.blendMode=PIXI.BLEND_MODES.ADD,this.scoreText.position.y=400,this.scoreText.position.x=120,this.scoreText.rotation=-.2,this.coin.rotation=0,this.starburst1.blendMode=PIXI.BLEND_MODES.ADD,this.starburst2.blendMode=PIXI.BLEND_MODES.ADD,this.container.addChild(this.bg),this.container.addChild(this.spongebobContainer),this.container.addChild(this.garyBowl),this.container.addChild(this.starburst2),this.container.addChild(this.titleCloud1),this.container.addChild(this.replayCloud),this.container.addChild(this.title),1==this.earnedCrossGameCurrency&&(this.container.addChild(this.starburst1),this.container.addChild(this.coinCloud),this.container.addChild(this.coin),this.container.addChild(this.coinBurst1),this.container.addChild(this.coinBurst2),this.container.addChild(this.earnedTitle)),this.container.addChild(this.scoreCloud),this.container.addChild(this.scoreTitle),this.container.addChild(this.scoreText),this.animation=new TimelineMax,this.largeReplayButton=Game.displayStore.getButton("replaybuttonlarge"),this.largeReplayButton.visuallyPrepareButton("large"),this.largeReplayButton.position.x=900,this.largeReplayButton.position.y=500,this.largeReplayButton.scale.x=0,this.largeReplayButton.scale.y=0,this.largeReplayButton.rotation=Game.getRandom(-2,2),this.largeReplayButton.alpha=1,this.animation2=new TimelineMax,this.eyeanimation=new TimelineMax({repeat:4}),this.eyeanimation.add([TweenMax.to(this.eyeLid1.position,4,{y:this.eyeLid1.position.y-6,ease:Power2.easeInOut}),TweenMax.to(this.eyeLid1.position,4,{y:this.eyeLid1.position.y,ease:Power2.easeInOut,delay:4}),TweenMax.to(this.eyeLid1.position,4,{y:this.eyeLid1.position.y-6,ease:Power2.easeInOut,delay:8}),TweenMax.to(this.eyeLid1.position,4,{y:this.eyeLid1.position.y,ease:Power2.easeInOut,delay:12}),TweenMax.to(this.eyeLid1.position,4,{y:this.eyeLid1.position.y-6,ease:Power2.easeInOut,delay:16}),TweenMax.to(this.eyeLid1.position,4,{y:this.eyeLid1.position.y,ease:Power2.easeInOut,delay:20}),TweenMax.to(this.eyeLid2.position,4,{y:this.eyeLid2.position.y+6,ease:Power2.easeInOut}),TweenMax.to(this.eyeLid2.position,4,{y:this.eyeLid2.position.y,ease:Power2.easeInOut,delay:4}),TweenMax.to(this.eyeLid2.position,4,{y:this.eyeLid2.position.y+6,ease:Power2.easeInOut,delay:8}),TweenMax.to(this.eyeLid2.position,4,{y:this.eyeLid2.position.y,ease:Power2.easeInOut,delay:12}),TweenMax.to(this.eyeLid2.position,4,{y:this.eyeLid2.position.y+6,ease:Power2.easeInOut,delay:16}),TweenMax.to(this.eyeLid2.position,4,{y:this.eyeLid2.position.y,ease:Power2.easeInOut,delay:20})],0),this.animation=new TimelineMax({onComplete:this.activateReplayButton,onCompleteParams:[this]}),this.animation.add([TweenMax.to(this.largeReplayButton.scale,.6,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.largeReplayButton,.6,{rotation:0,ease:Quad.easeOut}),TweenMax.to(this.largeReplayButton,.25,{alpha:1,ease:Quad.easeOut})],.2),this.animation2=new TimelineMax,this.animation2.add([TweenMax.from(this.title.scale,.6,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.to(this.title.position,2,{y:67,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:.2}),TweenMax.from(this.scoreTitle.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.scoreText.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.starburst2.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.scoreCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.scoreCloud.scale,2,{x:.64,y:.56,ease:Back.easeIn,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreCloud.position,2,{y:410,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreTitle.position,2,{y:359,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.scoreText.position,2,{y:390,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.from(this.earnedTitle.scale,.7,{x:0,y:0,ease:Back.easeOut,delay:.2}),TweenMax.from(this.starburst1.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.from(this.coinCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.coinCloud.scale,4,{x:.57,y:.53,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinCloud.position,4,{y:290,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coin.position,4,{y:309,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinBurst1.position,4,{y:281,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.coinBurst2.position,4,{y:333,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.earnedTitle.position,4,{y:252,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:2.2}),TweenMax.to(this.titleCloud1.scale,2,{x:1.05,y:.95,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:0}),TweenMax.to(this.titleCloud1.position,3,{y:-16,ease:Power3.easeInOut,yoyo:!0,repeat:-1,delay:.2}),TweenMax.to(this.starburst1,15,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.to(this.starburst2,15,{rotation:-6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.from(this.coin,1,{rotation:-3,ease:Back.easeInOut}),TweenMax.to(this.coin,4,{rotation:.5,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:1}),TweenMax.from(this.coin.scale,.8,{x:0,y:0,ease:Back.easeInOut,delay:.5}),TweenMax.to(this.coinBurst1,3,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.to(this.coinBurst2,3,{rotation:6.28,ease:Power0.easeIn,repeat:-1}),TweenMax.from(this.replayCloud.scale,.7,{x:0,y:0,ease:Back.easeInOut,delay:.2}),TweenMax.to(this.replayCloud.scale,2.8,{x:.74,y:.66,ease:Back.easeInOut,yoyo:!0,repeat:-1,delay:1,repeatDelay:2})],0),this.sparkleAnimation=new TimelineMax({repeat:-1}),this.sparkleAnimation.add([TweenMax.from(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:1}),TweenMax.from(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:2}),TweenMax.to(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:2.3}),TweenMax.to(this.coinBurst1.scale,.2,{x:.15,y:.15,ease:Power2.easeIn,delay:6.6}),TweenMax.to(this.coinBurst1.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:10.9}),TweenMax.to(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:3.3}),TweenMax.to(this.coinBurst2.scale,.2,{x:.15,y:.15,ease:Power2.easeIn,delay:7.6}),TweenMax.to(this.coinBurst2.scale,.2,{x:0,y:0,ease:Power2.easeIn,delay:11.9})],0),this.container.addChild(this.largeReplayButton)},b.prototype.activateReplayButton=function(a){a.game.ui.addCustomUIButton(a.largeReplayButton,!1)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"replaybuttonlarge":this.game.setScene("meowNoGameplayScene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){a.prototype.pause.call(this)},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill(),this.animation2&&this.animation2.kill(),this.eyeanimation&&this.eyeanimation.kill(),this.sparkleAnimation&&this.sparkleAnimation.kill(),Game.displayStore.returnPooledItem(this.scoreCloud),Game.displayStore.returnPooledItem(this.coinCloud),Game.displayStore.returnPooledItem(this.coinBurst1),Game.displayStore.returnPooledItem(this.coinBurst2),Game.displayStore.returnPooledItem(this.starburst1),Game.displayStore.returnPooledItem(this.starburst2),Game.displayStore.returnPooledItem(this.replayCloud),Game.displayStore.returnPooledItem(this.titleCloud1)},b}(Scene),PattyDropper=function(){function a(a){this.speedScale=1,this.dropperVerticalPos=80,this.mainContainer=Game.displayStore.getContainer("patty-dropper-container"),this.mainContainer.position.x=200,this.mainContainer.position.y=this.dropperVerticalPos,this.pattyGraphics=new Array,this.pattyGraphics.push(Game.displayStore.getSprite("patty1")),this.pattyGraphics.push(Game.displayStore.getSprite("patty2")),this.pattyGraphics.push(Game.displayStore.getSprite("patty3")),this.pattyToppings=new Array,this.pattyToppings.push(Game.displayStore.getSprite("patty-topping-1")),this.pattyToppings.push(Game.displayStore.getSprite("patty-topping-2")),this.pattyToppings.push(Game.displayStore.getSprite("patty-topping-3")),this.pattyToppings.push(Game.displayStore.getSprite("patty-topping-4")),this.pattyToppings.push(Game.displayStore.getSprite("patty-topping-5")),this.pattyToppings.push(Game.displayStore.getSprite("patty-topping-6")),this.spatulaGraphic=Game.displayStore.getSprite("top-spatula"),this.mainContainer.addChild(this.spatulaGraphic),this.addNewPatty(this),this.sideBuffer=80,this.nextDropDelay=1,this.scene=a,this.scene.container.addChild(this.mainContainer)}return a.prototype.beginGame=function(){this.startMovement(this)},a.prototype.removeForPowerUp=function(){this.moveDropperForPowerUpTween=TweenMax.to(this.mainContainer.position,.5,{y:-100,ease:Expo.easeOut})},a.prototype.addAfterPowerUp=function(){this.moveDropperForPowerUpTween=TweenMax.to(this.mainContainer.position,.5,{y:this.dropperVerticalPos,ease:Expo.easeOut})},a.prototype.startMovement=function(a){a.moving=!0,a.currentSpeed=a.speedScale*Game.getRandom(8,12),Game.getRandom(0,1)<.5?a.currentDirection=-1:a.currentDirection=1},a.prototype.dropPatty=function(){this.moving=!1,this.pattyReloadTimeline&&this.pattyReloadTimeline.kill(),this.pattyReloadTimeline=new TimelineMax({onComplete:this.restartPattyDroppable,onCompleteParams:[this]}),this.pattyReloadTimeline.add([TweenMax.to(this.mainContainer,.5,{rotation:-.15,yoyo:!0,repeat:1,ease:Back.easeInOut}),TweenMax.to(this.mainContainer.position,.5,{y:-150,yoyo:!0,repeat:1,ease:Back.easeInOut})],0),this.pattyReloadTimeline.call(this.addNewPatty,[this],null,.5),this.pattyGraphics[this.currentPattyType].visible=!1,this.pattyToppings[this.currentToppingType].visible=!1},a.prototype.addNewPatty=function(a){a.currentToppingType&&a.mainContainer.removeChild(a.pattyToppings[a.currentToppingType]),a.currentPattyType&&a.mainContainer.removeChild(a.pattyGraphics[a.currentPattyType]),a.currentPattyType=Game.getRandom(0,2,!0),a.currentToppingType=Game.getRandom(0,5,!0),Game.getRandom(0,1)<.5?a.currentPattyDir=-1:a.currentPattyDir=1,Game.getRandom(0,1)<.5?a.currentToppingDir=-1:a.currentToppingDir=1,a.pattyGraphics[a.currentPattyType].scale.x=a.currentPattyDir,a.pattyToppings[a.currentToppingType].scale.x=a.currentToppingDir,a.mainContainer.addChild(a.pattyGraphics[a.currentPattyType]),a.pattyGraphics[a.currentPattyType].visible=!0,a.mainContainer.addChild(a.pattyToppings[a.currentToppingType]),a.pattyToppings[a.currentToppingType].visible=!0},a.prototype.restartPattyDroppable=function(a){a.scene.resetPattyDroppable(),a.startMovement(a)},Object.defineProperty(a.prototype,"getPattyPosition",{get:function(){return new PIXI.Point(this.mainContainer.position.x,this.mainContainer.position.y)},enumerable:!0,configurable:!0}),a.prototype.increaseSpeed=function(){this.speedScale<=3&&(this.speedScale+=.05)},a.prototype.tick=function(a){0!=this.moving&&1!=a&&(this.mainContainer.position.x+=this.currentSpeed*this.currentDirection,this.currentDirection>0&&this.mainContainer.position.x>Game.stageWidth-this.sideBuffer&&(this.currentDirection*=-1),this.currentDirection<0&&this.mainContainer.position.x<0+this.sideBuffer&&(this.currentDirection*=-1))},a.prototype.pause=function(){this.scene.pauseResumeTween(this.nextDropTimer,"pause"),this.scene.pauseResumeTween(this.pattyReloadTimeline,"pause"),this.scene.pauseResumeTween(this.moveDropperForPowerUpTween,"pause")},a.prototype.resume=function(){this.scene.pauseResumeTween(this.nextDropTimer,"resume"),this.scene.pauseResumeTween(this.pattyReloadTimeline,"resume"),this.scene.pauseResumeTween(this.moveDropperForPowerUpTween,"resume")},a.prototype.getPattyType=function(){var a={type:this.currentPattyType,dir:this.currentPattyDir};return a},a.prototype.getToppingType=function(){var a={type:this.currentToppingType,dir:this.currentToppingDir};return a},a.prototype.destroy=function(){this.pattyReloadTimeline&&this.pattyReloadTimeline.kill(),
this.moveDropperForPowerUpTween&&this.moveDropperForPowerUpTween.kill();for(var a=0;a<this.pattyGraphics.length;a++)Game.displayStore.returnPooledItem(this.pattyGraphics[a]);for(var a=0;a<this.pattyToppings.length;a++)Game.displayStore.returnPooledItem(this.pattyToppings[a]);this.pattyGraphics[this.currentPattyType].visible=!0,this.pattyToppings[this.currentToppingType].visible=!0,this.mainContainer.removeAllChildren()},a}(),PattyInputManager=function(){function a(a){this.scene=a,this.hitAreaSprite=Game.displayStore.getSprite("patty-blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.scene.container.addChild(this.hitAreaSprite),this.readyToDropMode=!1}return a.prototype.createInput=function(){this.setUpHitArea(this.hitAreaSprite),this.readyToDropMode=!0},a.prototype.setUpHitArea=function(a){a.interactive=!0,a.buttonMode=!0;var b=this;Game.onDesktop?a.on("mouseup",function(a){1!=b.scene.activatingPowerUp&&0!=b.readyToDropMode&&(b.readyToDropMode=!1,b.scene.dropPatty())}):(a.on("touchstart",function(a){1!=b.scene.activatingPowerUp&&0!=b.readyToDropMode&&(b.readyToDropMode=!1,b.scene.dropPatty())}),a.on("touchend",function(a){}))},a.prototype.spacePressed=function(){1!=this.scene.activatingPowerUp&&0!=this.readyToDropMode&&(this.readyToDropMode=!1,this.scene.dropPatty())},Object.defineProperty(a.prototype,"pattyDroppable",{set:function(a){this.readyToDropMode=a},enumerable:!0,configurable:!0}),a.prototype.tick=function(){},a.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},a}(),PattyPhysicsManager=function(){function a(a){this.physicsDebugMode=!1,this.physicsEnabled=!0,this.resizeRatio=1,this.standardDamping=.3,this.pattyMass=200,this.scene=a,this.physObjs=new Array,this.levelObjs=new Array}return a.prototype.initPhysicsWorld=function(){this.swaySeed=0,this.swayAmount=0,this.swayTime=0,this.swayPower=0,this.canvasHeight=this.canvasOrigHeight=Game.stageHeight,this.canvasWidth=this.canvasOrigWidth=Game.stageWidth;this.canvasOrigWidth;this.world=new p2.World({gravity:[0,-1e3]}),this.world.defaultContactMaterial.restitution=0;var a=new p2.Plane;a.sensor=!0,this.failSensorPlane=new p2.Body({position:[0,-100]}),this.failSensorPlane.addShape(a),this.world.addBody(this.failSensorPlane);var b=this;this.world.on("beginContact",function(a){b.checkDropCollision(b,a)}),this.world.on("postStep",function(a){b.swayBasePatty(b)}),this.physicsEnabled=!0},a.prototype.setNewBasePatty=function(a,b){this.currentBasePatty=a,a.type=p2.Body.KINEMATIC,a.mass=Number.MAX_VALUE,a.velocity=[0,0],a.angle=0,a.angularVelocity=0,a.fixedRotation=!0,a.invInertia=0,a.invMass=0,1==b&&(a.position[0]=Game.stageWidth/2),a.position[1]=20,this.world.addBody(a)},a.prototype.getPhysicsPatty=function(){var a=new p2.Box({width:201,height:57}),b=new p2.Body({mass:this.pattyMass,position:[0,0]});return b.gravityScale=1,b.addShape(a),this.physObjs.push({body:b,shape:a}),b},a.prototype.addDropPattyToWorld=function(a){a.type=p2.Body.DYNAMIC,a.mass=this.pattyMass,a.fixedRotation=!1,a.invMass=1/this.pattyMass,a.invInertia=1/a.inertia,a.angle=0,a.velocity=[0,0],a.setZeroForce(),this.world.addBody(a),this.currentDropPatty=a},a.prototype.increaseSwayAmount=function(){this.swayAmount++,this.swayTime=this.swayAmount/100,this.swayPower=10*this.swayAmount,this.swayAmount>100},a.prototype.increaseSpeed=function(){for(var a=0;a<this.physObjs.length;a++)this.physObjs[a].body.gravityScale<=3&&(this.physObjs[a].body.gravityScale+=.05)},a.prototype.checkDropCollision=function(a,b){b.bodyA!=a.currentDropPatty&&b.bodyB!=a.currentDropPatty||b.bodyA==a.failSensorPlane||b.bodyB==a.failSensorPlane||(a.currentDropPatty=null,a.scene.landedPatty()),b.bodyA!=a.failSensorPlane&&b.bodyB!=a.failSensorPlane||(a.physicsEnabled=!1,a.scene.game.setScene("pattyPileUpEndScene",!1,[a.scene.getLandedDrops]))},a.prototype.createContactMaterials=function(a){var b;if("normal"==a?(b=100,this.world.setGlobalStiffness(1e4)):"helping-hands"==a&&(b=1,this.world.setGlobalStiffness(p2.Equation.DEFAULT_STIFFNESS)),this.contactMaterials)for(var c=0;c<this.contactMaterials.length;c++)this.world.removeContactMaterial(this.contactMaterials[c]);this.contactMaterials=new Array;for(var c=0;c<this.physObjs.length;c++){var d=this.physObjs[c].shape,e=new p2.Material;d.material=e}for(var c=0;c<this.physObjs.length;c++)for(var f=this.physObjs[c].body,d=this.physObjs[c].shape,g=0;g<this.physObjs.length;g++){var h=this.physObjs[g].body,i=this.physObjs[g].shape;if(h!=f){var j=new p2.ContactMaterial(d.material,i.material,{friction:b,relaxation:5,restitution:0,contactSkinSize:100});this.world.addContactMaterial(j)}}},a.prototype.scrollPatties=function(a){this.scrollTween=TweenMax.to(a.position,.5,{1:-37,ease:Sine.easeInOut,onComplete:this.endScrollCycle,onCompleteParams:[this,a]})},a.prototype.endScrollCycle=function(a,b){a.scene.newBasePatty(b),a.world.removeBody(b)},a.prototype.resizeElements=function(a,b){this.canvasHeight=b,this.canvasWidth=a,this.canvasOrigHeight&&(1==this.physicsDebugMode&&(this.physicsCanvas.height=b,this.physicsCanvas.width=a),this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},a.prototype.stepPhysics=function(){0!=this.physicsEnabled&&this.world&&(this.swaySeed+=this.swayTime,this.swaySeed>=90&&(this.swaySeed=-90),this.world.step(1/30))},a.prototype.killPhysicsWorld=function(a){},a.prototype.swayBasePatty=function(a){a.currentBasePatty.velocity[0]=Math.sin(a.swaySeed)*a.swayPower},a.prototype.getDistance=function(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)},a.prototype.startHandsPowerUp=function(a){this.swayAmount=0,this.swayPower=0;var b=a+350,c=a-350,d=a+102,e=a-102;this.helpingHandsLeft=new p2.Body({position:[c,0],angle:.5*-Math.PI});var f=new p2.Plane;this.helpingHandsRight=new p2.Body({position:[b,0],angle:.5*Math.PI});var g=new p2.Plane;this.helpingHandsLeft.addShape(f),this.helpingHandsRight.addShape(g),this.world.addBody(this.helpingHandsLeft),this.world.addBody(this.helpingHandsRight),this.helpingHandsTimeline&&this.helpingHandsTimeline.kill(),this.helpingHandsTimeline=new TimelineMax({delay:.5,onComplete:this.killHands,onCompleteParams:[this]}),this.helpingHandsTimeline.add([TweenMax.to(this.helpingHandsLeft.position,.8,{0:e,ease:Expo.easeOut}),TweenMax.to(this.helpingHandsRight.position,.8,{0:d,ease:Expo.easeOut})],0),this.helpingHandsTimeline.add([TweenMax.to(this.helpingHandsLeft.position,.8,{0:e-300,ease:Quad.easeOut}),TweenMax.to(this.helpingHandsRight.position,.8,{0:d+300,ease:Quad.easeOut})],1.2),this.helpingHandsTimeline.call(this.setHandsMaterials,[this],null,.1)},a.prototype.setHandsMaterials=function(a){a.createContactMaterials("helping-hands")},a.prototype.killHands=function(a){a.helpingHandsTimeline&&a.helpingHandsTimeline.kill(),a.createContactMaterials("normal"),a.helpingHandsTimeline=null,a.world.removeBody(a.helpingHandsLeft),a.world.removeBody(a.helpingHandsRight),a.scene.endHandsPowerup()},Object.defineProperty(a.prototype,"handLeftPos",{get:function(){return this.helpingHandsLeft?this.helpingHandsLeft.position[0]:0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"handRightPos",{get:function(){return this.helpingHandsRight?this.helpingHandsRight.position[0]:Game.stageWidth},enumerable:!0,configurable:!0}),a.prototype.pause=function(){this.scene.pauseResumeTween(this.scrollTween,"pause"),this.scene.pauseResumeTween(this.helpingHandsTimeline,"pause")},a.prototype.resume=function(){this.scene.pauseResumeTween(this.scrollTween,"resume"),this.scene.pauseResumeTween(this.helpingHandsTimeline,"resume")},a.prototype.destroy=function(){this.physObjs=[];var a=this;TweenMax.delayedCall(.2,function(){a.world.clear()}),this.scrollTween&&this.scrollTween.kill(),this.helpingHandsTimeline&&this.helpingHandsTimeline.kill()},a}(),PattyPowerUpManager=function(){function a(a){this.scene=a,this.squirtRangeX=50,this.sauceRangeCounter=0,this.sauceParticleHolderFront=Game.displayStore.getContainer("sauce-particle-holder-front"),this.sauceParticleHolderBack=Game.displayStore.getContainer("sauce-particle-holder-back"),this.sauceParticlesFront=new Array;for(var b=0;30>b;b++)this.sauceParticlesFront.push({sprite:Game.displayStore.getSprite("sauce-particle-front"),bounced:!1}),this.sauceParticlesFront[b].sprite.position.x=-20,this.sauceParticleHolderFront.addChild(this.sauceParticlesFront[b].sprite);this.sauceParticlesBack=new Array;for(var b=0;30>b;b++)this.sauceParticlesBack.push(Game.displayStore.getSprite("sauce-particle-back")),this.sauceParticlesBack[b].position.x=-20,this.sauceParticleHolderBack.addChild(this.sauceParticlesBack[b]);this.sauceBottle=Game.displayStore.getSprite("sauce-bottle"),this.sauceBottle.position.y=300,this.sauceBottle.position.x=Game.stageWidth+this.sauceBottle.width+70,this.sauceBottle.rotation=.2,this.sauceBottle.interactive=!0,this.sauceBottle.buttonMode=!0,this.sauceBottleTop=Game.displayStore.getSprite("sauce-bottle-top"),this.sauceBottleTop.position.y=0-this.sauceBottleTop.height,this.sauceBottleTop.position.x=Game.stageWidth/2,this.helpingHandsButton=Game.displayStore.getSprite("power-up-button"),this.helpingHandsButton.position.y=550,this.helpingHandsButton.position.x=100,this.helpingHandsButton.interactive=!0,this.helpingHandsButton.buttonMode=!0,this.helpingHandLeft=Game.displayStore.getSprite("helping-hand-hand"),this.helpingHandRight=Game.displayStore.getSprite("helping-hand-hand"),this.helpingHandLeft.position.y=Game.stageHeight,this.helpingHandRight.position.y=Game.stageHeight,this.helpingHandLeft.setRegPoint(1,1),this.helpingHandRight.scale.x=-1,this.helpingHandRight.setRegPoint(1,1),this.sauceLightBeams=new Array,this.sauceLightBeams.push(Game.displayStore.getSprite("sauce-light-beam")),this.sauceLightBeams.push(Game.displayStore.getSprite("sauce-light-beam")),this.sauceLightBeams.push(Game.displayStore.getSprite("sauce-light-beam")),this.sauceLightHolder=Game.displayStore.getContainer("sauce-light-holder");for(var b=0;b<this.sauceLightBeams.length;b++)this.sauceLightBeams[b].rotation=Game.getRandom(0,2*Math.PI),this.sauceLightHolder.addChild(this.sauceLightBeams[b]),this.sauceLightBeams[b].blendMode=PIXI.BLEND_MODES.ADD;this.sauceLightBeams[0].scale.x=this.sauceLightBeams[0].scale.y=1.5,this.sauceLightBeams[1].scale.x=this.sauceLightBeams[1].scale.y=1.1,this.sauceLightBeams[2].scale.x=this.sauceLightBeams[2].scale.y=.8,this.sauceLightBeams[0].alpha=.5,this.sauceLightBeams[1].alpha=.75,this.sauceLightBeams[2].alpha=.9,this.sauceLightHolder.position.x=870,this.sauceLightHolder.position.y=430,this.sauceLightHolder.alpha=0,this.sauceLightHolder.scale.x=.3,this.sauceLightHolder.scale.y=.3,this.activateSauceBottle()}return a.prototype.createCrossGamePowerUpButton=function(){this.scene.container.addChild(this.helpingHandsButton);var a=this;Game.onDesktop?(this.helpingHandsButton.on("mouseover",function(b){a.rolloverButton(a,this)}),this.helpingHandsButton.on("mouseout",function(b){a.rolloutButton(a,this)}),this.helpingHandsButton.on("mousedown",function(b){a.downonButton(a,this)}),this.helpingHandsButton.on("mouseup",function(b){b.stopPropagation(),a.uponButton(a,this)})):(this.helpingHandsButton.on("touchstart",function(b){a.downonButton(a,this)}),this.helpingHandsButton.on("touchend",function(b){b.stopPropagation(),a.uponButton(a,this)}),this.helpingHandsButton.on("touchendoutside",function(b){a.rolloutButton(a,this)}))},a.prototype.crossGamePowerUpEnter=function(){this.helpingHandsButtonClicked(this)},a.prototype.helpingHandsButtonClicked=function(a){1!=a.scene.activatingPowerUp&&(a.scene.crossGamePowerUpUsed(),a.scene.container.removeChild(a.helpingHandsButton),a.helpingHandLeft.position.y=Game.stageHeight+a.helpingHandLeft.height,a.helpingHandRight.position.y=Game.stageHeight+a.helpingHandRight.height,a.scene.container.addChild(a.helpingHandLeft),a.scene.container.addChild(a.helpingHandRight),a.scene.activateHelpingHandsPowerUp(),a.handsVerticalMoveTimeline&&a.handsVerticalMoveTimeline.kill(),a.helpingHandLeft.rotation=-.2,a.helpingHandRight.rotation=.2,a.handsVerticalMoveTimeline=new TimelineMax({delay:.5}),a.handsVerticalMoveTimeline.add([TweenMax.to(a.helpingHandLeft.position,.8,{y:Game.stageHeight,ease:Expo.easeOut}),TweenMax.to(a.helpingHandLeft,.8,{rotation:0,ease:Quad.easeOut}),TweenMax.to(a.helpingHandRight.position,.8,{y:Game.stageHeight,ease:Expo.easeOut}),TweenMax.to(a.helpingHandRight,.8,{rotation:0,ease:Quad.easeOut})],0),a.handsVerticalMoveTimeline.add([TweenMax.to(a.helpingHandLeft.position,.8,{y:Game.stageHeight+a.helpingHandLeft.height,ease:Quad.easeOut}),TweenMax.to(a.helpingHandLeft,.8,{rotation:-.3,ease:Quad.easeOut}),TweenMax.to(a.helpingHandRight.position,.8,{y:Game.stageHeight+a.helpingHandRight.height,ease:Quad.easeOut}),TweenMax.to(a.helpingHandRight,.8,{rotation:.3,ease:Quad.easeOut})],1.2))},a.prototype.endHandsPowerUp=function(){this.scene.container.removeChild(this.helpingHandLeft),this.scene.container.removeChild(this.helpingHandRight)},a.prototype.showSauceBottle=function(){this.scene.container.addChild(this.sauceLightHolder),this.scene.container.addChild(this.sauceBottle),this.sauceRangeCounter=0,this.sauceBottleTimeline&&this.sauceBottleTimeline.kill(),this.sauceBottleTimeline=new TimelineMax,this.sauceBottleTimeline.add([TweenMax.to(this.sauceBottle.position,.5,{x:Game.stageWidth+30,y:200,ease:Back.easeOut}),TweenMax.to(this.sauceBottle,.5,{rotation:0,ease:Back.easeOut})],0),this.sauceBottleTimeline.add([TweenMax.to(this.sauceLightBeams[0],3,{rotation:Game.getRandom(-10,-15),ease:Linear.easeNone}),TweenMax.to(this.sauceLightBeams[1],3,{rotation:Game.getRandom(5,10),ease:Linear.easeNone}),TweenMax.to(this.sauceLightBeams[2],3,{rotation:Game.getRandom(10,15),ease:Linear.easeNone})],0),this.sauceBottleTimeline.add([TweenMax.to(this.sauceLightHolder.scale,.25,{x:1,y:1,ease:Back.easeOut}),TweenMax.to(this.sauceLightHolder,.25,{alpha:.5,ease:Sine.easeOut})],0),this.sauceBottleTimeline.add([TweenMax.to(this.sauceBottle.position,.5,{x:Game.stageWidth+this.sauceBottle.width+70,y:200,ease:Back.easeOut}),TweenMax.to(this.sauceBottle,.5,{rotation:-.2,ease:Back.easeOut}),TweenMax.to(this.sauceLightHolder.scale,.25,{x:0,y:0,ease:Sine.easeOut})],1.5)},a.prototype.activateSauceBottle=function(){var a=this;Game.onDesktop?this.sauceBottle.on("mouseup",function(b){b.stopPropagation(),a.sauceBottleClicked(a)}):this.sauceBottle.on("touchstart",function(b){b.stopPropagation(),a.sauceBottleClicked(a)})},a.prototype.sauceBottleClicked=function(a){1!=a.scene.activatingPowerUp&&(a.scene.activateSaucePowerup(),a.sauceBottleTimeline&&a.sauceBottleTimeline.kill(),a.sauceBottleTimeline=new TimelineMax,a.sauceBottleTimeline.add([TweenMax.to(a.sauceBottle.position,.5,{x:Game.stageWidth+a.sauceBottle.width+70,y:200,ease:Expo.easeOut}),TweenMax.to(a.sauceBottle,.5,{rotation:.2,ease:Expo.easeOut}),TweenMax.to(a.sauceLightHolder.scale,.25,{x:0,y:0,ease:Sine.easeOut})],0))},a.prototype.sauceBottleSquirt=function(a){this.currentTopPattySauceHeight=this.scene.currentTopPattyGraphic.position.y-30,this.scene.container.addChild(this.sauceParticleHolderBack),this.scene.container.addChild(this.sauceParticleHolderFront),this.scene.container.addChild(this.sauceBottleTop),this.sauceBottleTop.position.x=a,this.sauceBottleSquirtTimeline&&this.sauceBottleSquirtTimeline.kill(),this.sauceBottleSquirtTimeline=new TimelineMax({onComplete:this.endPowerUpActivate,onCompleteParams:[this]}),this.sauceBottleSquirtTimeline.add([TweenMax.to(this.sauceBottleTop.position,.25,{y:0,ease:Sine.easeInOut})],0),this.sauceBottleSquirtTimeline.add([TweenMax.to(this.sauceBottleTop.position,.25,{y:0-this.sauceBottleTop.height,ease:Sine.easeOut})],2),this.sauceParticlesTimeline=new TimelineMax({delay:.25});for(var b=0;b<this.sauceParticlesFront.length;b++)this.sauceParticlesFront[b].bounced=!1,this.sauceParticlesTimeline.call(this.addSquirtParticle,[this,b],null,.03*b),this.sauceParticlesTimeline.add([TweenMax.to(this.sauceParticlesFront[b].sprite,3,{physics2D:{velocity:Game.getRandom(100,150),angle:Game.getRandom(80,110),gravity:1e3},onUpdate:this.positionSauceDropOutline,onUpdateParams:[this,b]})],.03*b)},a.prototype.positionSauceDropOutline=function(a,b){var c=a.sauceParticlesFront[b].sprite;if(c.position.y>=a.currentTopPattySauceHeight&&0==a.sauceParticlesFront[b].bounced){a.sauceParticlesFront[b].bounced=!0,TweenMax.killTweensOf(c);var d=Game.getRandom(.2,1);a.sauceParticlesTimeline.add([TweenMax.to(c,3,{physics2D:{velocity:Game.getRandom(200,500),angle:Game.getRandom(240,300),gravity:900},onUpdate:a.positionSauceDropOutline,onUpdateParams:[a,b]}),TweenMax.to(c.scale,Game.getRandom(1,1.5),{x:d,y:d})],a.sauceParticlesTimeline.time())}a.sauceParticlesBack[b].position.x=c.position.x,a.sauceParticlesBack[b].position.y=c.position.y,a.sauceParticlesBack[b].scale.x=c.scale.x,a.sauceParticlesBack[b].scale.y=c.scale.y},a.prototype.addSquirtParticle=function(a,b){var c=Game.getRandom(.75,1.2),d=a.sauceParticlesFront[b].sprite,e=a.sauceParticlesBack[b];d.scale.x=c,d.scale.y=c,e.scale.x=c,e.scale.y=c,d.position.x=a.sauceBottleTop.position.x,d.position.y=a.sauceBottleTop.height},a.prototype.positionSauce=function(a){this.sauceRangeCounter+=.1,this.sauceRangeCounter>360&&(this.sauceRangeCounter=-360),this.sauceBottleTop.position.x=a+50*Math.sin(this.sauceRangeCounter)},a.prototype.moveHelpingHands=function(a,b){this.helpingHandLeft.position.x=a,this.helpingHandRight.position.x=b},a.prototype.endPowerUpActivate=function(a){a.scene.endPowerUpActivate()},a.prototype.rolloverButton=function(a,b){a.powerUpOverTimeline&&a.powerUpOverTimeline.kill();var c=Game.getRandom(-.25,.25);a.powerUpOverTimeline=new TimelineMax,a.powerUpOverTimeline.add(TweenMax.to(b.scale,.2,{x:1.2,y:1.2,ease:Back.easeOut}),0),a.powerUpOverTimeline.add(TweenMax.to(b,.2,{rotation:c,ease:Back.easeOut}),0)},a.prototype.rolloutButton=function(a,b){a.powerUpOutTimeline&&a.powerUpOutTimeline.kill(),a.powerUpOutTimeline=new TimelineMax,a.powerUpOutTimeline.add(TweenMax.to(b.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),a.powerUpOutTimeline.add(TweenMax.to(b,.2,{rotation:0,ease:Back.easeOut}),0)},a.prototype.downonButton=function(a,b){a.powerUpDownTimeline&&a.powerUpDownTimeline.kill(),a.powerUpDownTimeline=new TimelineMax,a.powerUpDownTimeline.add(TweenMax.to(b.scale,.2,{x:1.3,y:1.3,ease:Back.easeOut}),0)},a.prototype.uponButton=function(a,b){a.powerUpUpTimeline&&a.powerUpUpTimeline.kill(),a.powerUpUpTimeline=new TimelineMax,a.powerUpUpTimeline.add(TweenMax.to(b.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),TweenMax.delayedCall(.15,a.helpingHandsButtonClicked,[a])},a.prototype.tick=function(){},a.prototype.destroy=function(){for(var a=0;a<this.sauceParticlesFront.length;a++)Game.displayStore.returnPooledItem(this.sauceParticlesFront[a].sprite),Game.displayStore.returnPooledItem(this.sauceParticlesBack[a]);this.sauceParticlesTimeline&&this.sauceParticlesTimeline.kill(),this.sauceBottleTimeline&&this.sauceBottleTimeline.kill(),this.sauceButtonShowTimeline&&this.sauceButtonShowTimeline.kill(),this.sauceBottleSquirtTimeline&&this.sauceBottleSquirtTimeline.kill(),this.handsVerticalMoveTimeline&&this.handsVerticalMoveTimeline.kill();for(var a=0;a<this.sauceLightBeams.length;a++)Game.displayStore.returnPooledItem(this.sauceLightBeams[a]);Game.displayStore.returnPooledItem(this.helpingHandLeft),Game.displayStore.returnPooledItem(this.helpingHandRight),this.sauceBottle.removeAllListeners()},a.prototype.pause=function(){this.scene.pauseResumeTween(this.sauceBottleTimeline,"pause"),this.scene.pauseResumeTween(this.sauceParticlesTimeline,"pause"),this.scene.pauseResumeTween(this.sauceButtonShowTimeline,"pause"),this.scene.pauseResumeTween(this.sauceBottleSquirtTimeline,"pause"),this.scene.pauseResumeTween(this.handsVerticalMoveTimeline,"pause")},a.prototype.resume=function(){this.scene.pauseResumeTween(this.sauceBottleTimeline,"resume"),this.scene.pauseResumeTween(this.sauceParticlesTimeline,"resume"),this.scene.pauseResumeTween(this.sauceButtonShowTimeline,"resume"),this.scene.pauseResumeTween(this.sauceBottleSquirtTimeline,"resume"),this.scene.pauseResumeTween(this.handsVerticalMoveTimeline,"resume")},a}(),PattyBackgroundManager=function(){function a(a){this.scene=a,this.xUnitSize=342,this.yUnitSize=275,this.panelBorderOffset=10,this.scrollAmount=50,this.tintColours=new Array,this.tintColours.push(13753044),this.tintColours.push(14145495),this.tintColours.push(14939112),this.tintColours.push(10931891),this.tintColours.push(11716537),this.tintColours.push(11063504),this.backgroundItems=new Array,this.backgroundItems.push({sprite:Game.displayStore.getSprite("bg-item-shelf"),active:!1}),this.backgroundItems.push({sprite:Game.displayStore.getSprite("bg-item-ring"),active:!1}),this.backgroundItems.push({sprite:Game.displayStore.getSprite("bg-item-splat"),active:!1}),this.backgroundItems.push({sprite:Game.displayStore.getSprite("bg-item-port-hole"),active:!1}),this.backgroundContainers=new Array,this.backgroundOuterContainer=Game.displayStore.getContainer("background-container-outer"),this.bgImpactTimeline=new TimelineMax,this.bgImpactTimeline.add([TweenMax.to(this.backgroundOuterContainer,.05,{y:6,repeat:1,yoyo:!0,ease:Quad.easeInOut})],0),this.bgImpactTimeline.pause();for(var b=0;2>b;b++)this.backgroundContainers.push(Game.displayStore.getContainer("background-container"));this.panelPatterns=new Array;var c=new Array;c.push({panel:Game.displayStore.getSprite("background-rivet-panel-0"),xUnit:0,yUnit:0}),c.push({panel:Game.displayStore.getSprite("background-rivet-panel-3"),xUnit:2,yUnit:0}),c.push({panel:Game.displayStore.getSprite("background-rivet-panel-4"),xUnit:0,yUnit:2}),c.push({panel:Game.displayStore.getSprite("background-rivet-panel-5"),xUnit:2.3,yUnit:.2});var d=new Array;d.push({panel:Game.displayStore.getSprite("background-rivet-panel-2"),xUnit:0,yUnit:0}),d.push({panel:Game.displayStore.getSprite("background-rivet-panel-1"),xUnit:0,yUnit:1}),d.push({panel:Game.displayStore.getSprite("background-rivet-panel-0"),xUnit:1,yUnit:0}),d.push({panel:Game.displayStore.getSprite("background-rivet-panel-4"),xUnit:1,yUnit:2}),d.push({panel:Game.displayStore.getSprite("background-rivet-panel-6"),xUnit:3,yUnit:.2});var e=new Array;e.push({panel:Game.displayStore.getSprite("background-rivet-panel-2"),xUnit:0,yUnit:0}),e.push({panel:Game.displayStore.getSprite("background-rivet-panel-2"),xUnit:1,yUnit:0}),e.push({panel:Game.displayStore.getSprite("background-rivet-panel-1"),xUnit:2,yUnit:0}),e.push({panel:Game.displayStore.getSprite("background-rivet-panel-0"),xUnit:0,yUnit:1}),e.push({panel:Game.displayStore.getSprite("background-rivet-panel-4"),xUnit:1,yUnit:2}),e.push({panel:Game.displayStore.getSprite("background-rivet-panel-7"),xUnit:.4,yUnit:1.3});var f=new Array;f.push({panel:Game.displayStore.getSprite("background-rivet-panel-2"),xUnit:0,yUnit:0}),f.push({panel:Game.displayStore.getSprite("background-rivet-panel-1"),xUnit:0,yUnit:1}),f.push({panel:Game.displayStore.getSprite("background-rivet-panel-3"),xUnit:1,yUnit:0}),f.push({panel:Game.displayStore.getSprite("background-rivet-panel-1"),xUnit:2,yUnit:0}),f.push({panel:Game.displayStore.getSprite("background-rivet-panel-2"),xUnit:2,yUnit:2}),f.push({panel:Game.displayStore.getSprite("background-rivet-panel-5"),xUnit:-1.4,yUnit:1.5}),this.panelPatterns.push({panelData:c,active:!1,index:0,container:null}),this.panelPatterns.push({panelData:d,active:!1,index:1,container:null}),this.panelPatterns.push({panelData:e,active:!1,index:2,container:null}),this.panelPatterns.push({panelData:f,active:!1,index:3,container:null}),this.shuffleArray(this.panelPatterns),this.shuffleArray(this.backgroundItems)}return a.prototype.createInitialPanels=function(){this.scene.container.addChild(this.backgroundOuterContainer),this.backgroundOuterContainer.addChild(this.backgroundContainers[0]),this.backgroundOuterContainer.addChild(this.backgroundContainers[1]),this.backgroundContainers[0].position.y=-825,this.backgroundContainers[0].position.x=0,this.backgroundContainers[1].position.y=0,this.backgroundContainers[1].position.x=0,this.fillBackgroundContainer(this.backgroundContainers[0],!1),this.fillBackgroundContainer(this.backgroundContainers[1],!1)},a.prototype.fillBackgroundContainer=function(a,b){for(var c=0;c<this.panelPatterns.length;c++)if(0==this.panelPatterns[c].active){this.panelPatterns[c].active=!0,this.panelPatterns[c].container=a;for(var d=0;d<this.panelPatterns[c].panelData.length;d++)this.panelPatterns[c].panelData[d].panel.position.x=this.panelPatterns[c].panelData[d].xUnit*this.xUnitSize-this.panelBorderOffset,this.panelPatterns[c].panelData[d].panel.position.y=this.panelPatterns[c].panelData[d].yUnit*this.yUnitSize-this.panelBorderOffset,Game.getRandom(0,1)<.5?this.panelPatterns[c].panelData[d].panel.tint=this.tintColours[Game.getRandom(0,this.tintColours.length-1,!0)]:this.panelPatterns[c].panelData[d].panel.tint=16777215,a.addChild(this.panelPatterns[c].panelData[d].panel);if(1==b)break;if(Game.getRandom(0,1)<.8)for(var e=0;e<this.backgroundItems.length;e++)if(0==this.backgroundItems[e].active){this.backgroundItems[e].active=!0;var f=825-this.backgroundItems[e].sprite.height,g=Game.getRandom(0,f);this.backgroundItems[e].sprite.position.x=Game.getRandom(-200,850),this.backgroundItems[e].sprite.position.y=g+this.panelBorderOffset,a.addChild(this.backgroundItems[e].sprite);break}break}},a.prototype.impactBackground=function(){this.bgImpactTimeline.restart()},a.prototype.scrollBackground=function(){this.bgScrollTimeline&&this.bgScrollTimeline.kill();var a=this.backgroundContainers[0].position.y,b=this.backgroundContainers[1].position.y;this.bgScrollTimeline=new TimelineMax({onComplete:this.checkScrollPositions,onCompleteParams:[this]}),this.bgScrollTimeline.add([TweenMax.to(this.backgroundContainers[0].position,.5,{y:a+this.scrollAmount,ease:Sine.easeInOut}),TweenMax.to(this.backgroundContainers[1].position,.5,{y:b+this.scrollAmount,ease:Sine.easeInOut})])},a.prototype.checkScrollPositions=function(a){for(var b=0;b<a.backgroundContainers.length;b++)a.backgroundContainers[b].position.y>Game.stageHeight&&a.recyclePanel(a.backgroundContainers[b],a)},a.prototype.recyclePanel=function(a,b){for(var c=0;c<b.panelPatterns.length;c++)a==b.panelPatterns[c].container&&(b.panelPatterns[c].active=!1);for(var c=0;c<a.children.length;c++)for(var d=a.getChildAt(c),e=0;e<b.backgroundItems.length;e++)if(d==b.backgroundItems[e].sprite){b.backgroundItems[e].active=!1;break}a.removeAllChildren(),a.position.y=-825,b.fillBackgroundContainer(a,!1),b.shuffleArray(b.backgroundItems)},a.prototype.shuffleArray=function(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a},a.prototype.tick=function(){},a.prototype.destroy=function(){for(var a=0;a<this.panelPatterns.length;a++){Game.displayStore.returnPooledItem(this.panelPatterns[a].container);for(var b=0;b<this.panelPatterns[a].panelData.length;b++)Game.displayStore.returnPooledItem(this.panelPatterns[a].panelData[b].panel)}for(var a=0;a<this.backgroundItems.length;a++)Game.displayStore.returnPooledItem(this.backgroundItems[a]);this.bgScrollTimeline&&this.bgScrollTimeline.kill(),this.bgImpactTimeline&&this.bgImpactTimeline.kill()},a.prototype.pause=function(){},a.prototype.resume=function(){},a}(),GlideToGloryPhysicsManager=function(){function a(a){this.physicsDebugMode=!1,this.physicsEnabled=!0,this.resizeRatio=1,this.scene=a,this.physObjs=new Array}return a.prototype.initPhysicsWorld=function(){this.currentGravityDir=1,this.currentGravity=1,this.constraintRelaxation=4,this.standardSensorOffset=80,this.shieldModeSensorOffset=120,this.vehicleRectangleShape=new p2.Box({width:130,height:40}),this.vehicleCircleShape=new p2.Circle({radius:70}),this.canvasHeight=this.canvasOrigHeight=Game.stageHeight,this.canvasWidth=this.canvasOrigWidth=Game.stageWidth;this.canvasOrigWidth;this.balloonBodies=new Array,this.world=new p2.World({gravity:[0,-180]});var a=this;this.world.on("beginContact",function(b){a.checkCollision(a,b)}),this.world.on("endContact",function(b){a.checkCollisionEnd(a,b)}),this.world.defaultContactMaterial.restitution=0,this.world.setGlobalStiffness(1e4),this.shieldPowerUpActive=!1;var b=new p2.Plane;b.sensor=!0,this.offScreenLeftSensorPlane=new p2.Body({position:[-120,0],angle:.5*-Math.PI}),this.offScreenLeftSensorPlane.addShape(b);var c=new p2.Plane;c.sensor=!0,this.ceilingSensorPlane=new p2.Body({position:[0,Game.stageHeight+this.standardSensorOffset],angle:-Math.PI}),this.ceilingSensorPlane.addShape(c);var d=new p2.Plane;d.sensor=!0,this.floorSensorPlane=new p2.Body({position:[0,-this.standardSensorOffset]}),this.floorSensorPlane.addShape(d),this.world.addBody(this.ceilingSensorPlane),this.world.addBody(this.floorSensorPlane),this.world.addBody(this.offScreenLeftSensorPlane),this.physicsEnabled=!0},a.prototype.increaseDifficulty=function(a){this.currentGravity+=.5,this.vehicleBody.gravityScale=this.currentGravityDir*this.currentGravity;for(var b=0;b<this.balloonBodies.length;b++);},a.prototype.checkCollision=function(a,b){switch(a.floorSensorPlane){case b.bodyA:case b.bodyB:a.checkHitFloor(a,b.bodyA,b.bodyB)}switch(a.ceilingSensorPlane){case b.bodyA:case b.bodyB:a.checkHitFloor(a,b.bodyA,b.bodyB)}switch(a.offScreenLeftSensorPlane){case b.bodyA:case b.bodyB:a.checkHitOffscreen(a,b.bodyA,b.bodyB)}switch(a.vehicleBody){case b.bodyA:case b.bodyB:a.checkLevelCollision(a.vehicleBody,a.scene.getLevelCollisionData(b.bodyA,b.bodyB))}for(var c=0;c<a.balloonBodies.length;c++)if(b.bodyA==a.balloonBodies[c].body||b.bodyB==a.balloonBodies[c].body)return void a.checkLevelCollision(a.balloonBodies[c].body,a.scene.getLevelCollisionData(b.bodyA,b.bodyB))},a.prototype.checkCollisionEnd=function(a,b){for(var c=0;c<a.balloonBodies.length;c++)if(b.bodyA==a.balloonBodies[c].body||b.bodyB==a.balloonBodies[c].body)return void a.checkLevelCollision(a.balloonBodies[c].body,a.scene.getLevelCollisionData(b.bodyA,b.bodyB))},a.prototype.checkLevelCollision=function(a,b){switch(b.type){case 1:this.playBalloonRubSound(a),this.checkBottleSmashed(a);break;case 2:break;case 3:this.scene.levelPopBalloon(a);break;case 4:this.playPopAllBalloonSounds(),this.scene.levelPopAllBalloons();break;case 5:0==this.shieldPowerUpActive&&(this.shieldPowerUpActive=!0,this.activateShieldPhysics(),this.scene.activateShieldPowerup(b.body))}},a.prototype.playBalloonRubSound=function(a){for(var b=0;b<this.scene.balloons.length;b++)if(a==this.scene.balloons[b].balloonPhysics){Game.playSound("balloon-squeek"),Game.setSoundVolume("balloon-squeek",.5),this.scene.balloons[b].rubDamage++,this.scene.balloons[b].rubDamage>=3&&this.scene.rubPopBalloon(a);break}},a.prototype.playPopAllBalloonSounds=function(){for(var a=0,b=0;5>b;b++)1==this.scene.balloons[b].active&&a++;for(var c=0;a>c;c++)Game.playSound("pop"+Game.getRandom(1,5,!0))},a.prototype.activateShieldPhysics=function(){this.floorSensorPlane.position[1]=-this.shieldModeSensorOffset,this.ceilingSensorPlane.position[1]=Game.stageHeight+this.shieldModeSensorOffset,Game.playSound("plankton-laugh"),this.shieldActiveDelay&&this.shieldActiveDelay.kill(),this.shieldActiveDelay=TweenMax.delayedCall(20,this.removeShield,[this]),this.vehicleBody.removeShape(this.vehicleRectangleShape),this.vehicleBody.addShape(this.vehicleCircleShape)},a.prototype.removeShield=function(a){a.scene.beginRemoveShield()},a.prototype.killPhysicsShield=function(){this.shieldPowerUpActive=!1,this.vehicleBody.removeShape(this.vehicleCircleShape),this.vehicleBody.addShape(this.vehicleRectangleShape),this.floorSensorPlane.position[1]=-this.standardSensorOffset,this.ceilingSensorPlane.position[1]=Game.stageHeight+this.standardSensorOffset},a.prototype.removePowerUpPhysics=function(a){this.world.removeBody(a)},a.prototype.checkBottleSmashed=function(a){if(1!=this.shieldPowerUpActive&&a==this.vehicleBody){var b=[a.velocity[0]+40,a.velocity[1]],c=Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2));c>40&&this.scene.crackBottle()}},a.prototype.checkHitFloor=function(a,b,c){
return b==a.vehicleBody||c==a.vehicleBody?void a.scene.gameOver():void 0},a.prototype.checkHitOffscreen=function(a,b,c){return b==a.vehicleBody||c==a.vehicleBody?void a.scene.gameOver():void 0},a.prototype.createVehicle=function(a){this.vehicleBody=new p2.Body({mass:10,position:[a.x,Game.stageHeight-a.y]}),this.vehicleBody.gravityScale=1,this.vehicleBody.addShape(this.vehicleRectangleShape),this.vehicleBody.angularDamping=.4,this.vehicleBody.damping=.8,this.physObjs.push({body:this.vehicleBody,shape:this.vehicleRectangleShape}),this.world.addBody(this.vehicleBody)},a.prototype.addBalloon=function(a){a.balloon.position[0]=this.vehicleBody.position[0]+Game.getRandom(-30,30),a.balloon.position[1]=this.vehicleBody.position[1]+Game.getRandom(60,90)*this.currentGravityDir,a.balloon.gravityScale=-1*this.currentGravityDir*this.currentGravity,a.balloon.setZeroForce(),a.balloon.resetConstraintVelocity(),this.world.addBody(a.balloon),this.world.addConstraint(a.constraint),this.balloonBodies.push({body:a.balloon,constraint:a.constraint})},a.prototype.applyWind=function(a){var b;b=1==a?600:-300,this.vehicleBody.applyForce([0,b]);for(var c=0;c<this.balloonBodies.length;c++)this.balloonBodies[c].body.applyForce([0,b])},a.prototype.pause=function(){this.scene.pauseResumeTween(this.shieldActiveDelay,"pause")},a.prototype.resume=function(){this.scene.pauseResumeTween(this.shieldActiveDelay,"resume")},a.prototype.changeGravity=function(a){if(a!=this.currentGravityDir){this.currentGravityDir=a,this.vehicleBody.gravityScale=this.currentGravityDir*this.currentGravity,this.vehicleBody.applyImpulse([-80,0]);for(var b=0;b<this.balloonBodies.length;b++)this.balloonBodies[b].body.gravityScale=-1*this.currentGravityDir*this.currentGravity,this.balloonBodies[b].body.applyImpulse([80,0])}},a.prototype.resizeElements=function(a,b){this.canvasHeight=b,this.canvasWidth=a,this.canvasOrigHeight&&(1==this.physicsDebugMode&&(this.physicsCanvas.height=b,this.physicsCanvas.width=a),this.resizeRatio=this.canvasHeight/this.canvasOrigHeight)},a.prototype.getBalloon=function(a){var b=new p2.Circle({radius:15}),c=new p2.Body({mass:5,position:[0,0]});c.gravityScale=-1,c.addShape(b),this.physObjs.push({body:c,shape:b});var d=new p2.DistanceConstraint(c,this.vehicleBody,{distance:Game.getRandom(20,40),localAnchorA:[0,0],localAnchorB:[0,40]});d.setStiffness(20),d.setRelaxation(this.constraintRelaxation);var e={balloon:c,constraint:d};return e},a.prototype.removeBalloon=function(a){this.world.removeConstraint(a.constraint),this.world.removeBody(a.balloon);for(var b=0;b<this.balloonBodies.length;b++)if(this.balloonBodies[b].body==a.balloon){this.balloonBodies.splice(b,1);break}},a.prototype.stepPhysics=function(){0!=this.physicsEnabled&&this.world&&this.world.step(1/30)},a.prototype.addLevelBlockPhysics=function(a){this.world.addBody(a)},a.prototype.removeLevelBlockPhysics=function(a){this.world.removeBody(a)},a.prototype.pushVehicleToPos=function(a){var b=a.x-this.vehicleBody.position[0],c=10*b,d=c,e=[c,0];d&&this.vehicleBody.applyForce(e)},a.prototype.getDistance=function(a,b,c,d){var e=a-c,f=b-d;return Math.sqrt(e*e+f*f)},a.prototype.destroy=function(){this.physObjs=[];var a=this;TweenMax.delayedCall(.2,function(){a.world.clear()}),this.shieldActiveDelay&&this.shieldActiveDelay.kill()},a}(),GlideToGloryInputManager=function(){function a(a){this.scene=a,this.hitAreaSprite=Game.displayStore.getSprite("glide-blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.scene.container.addChild(this.hitAreaSprite),this.multipleEventFixBoolean=!1}return a.prototype.createInput=function(){this.setUpHitArea(this.hitAreaSprite)},a.prototype.setUpHitArea=function(a){a.interactive=!0,a.buttonMode=!0;var b=this;Game.onDesktop?a.on("mouseup",function(a){1!=b.multipleEventFixBoolean&&(b.multipleEventFixBoolean=!0,b.parseInput(b,a.data.getLocalPosition(b.scene.container)))}):(a.on("touchstart",function(a){1!=b.multipleEventFixBoolean&&(b.multipleEventFixBoolean=!0,b.parseInput(b,a.data.getLocalPosition(b.scene.container)))}),a.on("touchend",function(a){}))},a.prototype.parseInput=function(a,b){b.y<Game.stageHeight/2?a.scene.inputUp():a.scene.inputDown()},a.prototype.unlockInput=function(){this.multipleEventFixBoolean=!1},a.prototype.tick=function(){},a.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},a}(),SlapHappyInputManager=function(){function a(a){this.scene=a,this.hitAreaSprite=Game.displayStore.getSprite("slap-happy-blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.scene.container.addChild(this.hitAreaSprite),this.multipleEventFixBoolean=!1}return a.prototype.createInput=function(){this.setUpHitArea(this.hitAreaSprite)},a.prototype.setUpHitArea=function(a){a.interactive=!0,a.buttonMode=!0;var b=this;Game.onDesktop?a.on("mousedown",function(a){b.parseInput(b,a.data.getLocalPosition(b.scene.container))}):(a.on("touchstart",function(a){b.parseInput(b,a.data.getLocalPosition(b.scene.container))}),a.on("touchend",function(a){}))},a.prototype.parseInput=function(a,b){b.x<Game.stageWidth/2?a.scene.inputLeft():b.x>Game.stageWidth/2&&a.scene.inputRight()},a.prototype.unlockInput=function(){this.multipleEventFixBoolean=!1},a.prototype.tick=function(){},a.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},a}(),SlapHappyTentacleManager=function(){function a(a,b){this.scene=a,this.elementHolder=b,this.frameCounter=0,this.slapSillyModeOn=!1,this.electricityFrameCounterLimit=4,this.electricityFrameCounter=0,this.uppercutComplete=!1,this.uppercutReady=!1,this.tentacleAngle=.1,this.inputReadyLeft=!1,this.inputReadyRight=!1,this.electricityLeftIndex=0,this.electricityRightIndex=2,this.electricityElementsLeft=new Array,this.electricityElementsRight=new Array,this.tentacleSpacing=Game.stageWidth/2.5,this.tentacleMainHolder=Game.displayStore.getContainer("tentacle-holder-main"),this.tentacleHolderLeft=this.tentacleMainHolder.getContainer("tentacle-holder-left"),this.tentacleHolderRight=this.tentacleMainHolder.getContainer("tentacle-holder-right"),this.tentacleLeftNeutral=this.tentacleHolderLeft.getSprite("tentacle-neutral"),this.tentacleLeftBlock=this.tentacleHolderLeft.getSprite("tentacle-block"),this.tentacleLeftSlap=this.tentacleHolderLeft.getSprite("tentacle-slap"),this.tentacleLeftUppercut=this.tentacleHolderLeft.getSprite("tentacle-uppercut"),this.electricityElementsLeft.push(this.tentacleHolderLeft.getSprite("tentacle-electricity-1")),this.electricityElementsLeft.push(this.tentacleHolderLeft.getSprite("tentacle-electricity-2")),this.electricityElementsLeft.push(this.tentacleHolderLeft.getSprite("tentacle-electricity-3")),this.electricityElementsLeft.push(this.tentacleHolderLeft.getSprite("tentacle-electricity-4")),this.tentacleRightNeutral=this.tentacleHolderRight.getSprite("tentacle-neutral"),this.tentacleRightBlock=this.tentacleHolderRight.getSprite("tentacle-block"),this.tentacleRightSlap=this.tentacleHolderRight.getSprite("tentacle-slap"),this.tentacleRightUppercut=this.tentacleHolderRight.getSprite("tentacle-uppercut"),this.electricityElementsRight.push(this.tentacleHolderRight.getSprite("tentacle-electricity-1")),this.electricityElementsRight.push(this.tentacleHolderRight.getSprite("tentacle-electricity-2")),this.electricityElementsRight.push(this.tentacleHolderRight.getSprite("tentacle-electricity-3")),this.electricityElementsRight.push(this.tentacleHolderRight.getSprite("tentacle-electricity-4"));for(var c=0;c<this.electricityElementsLeft.length;c++)this.electricityElementsLeft[c].alpha=1,this.electricityElementsLeft[c].visible=!1,this.electricityElementsLeft[c].blendMode=PIXI.BLEND_MODES.ADD,this.electricityElementsRight[c].alpha=1,this.electricityElementsRight[c].visible=!1,this.electricityElementsRight[c].blendMode=PIXI.BLEND_MODES.ADD;this.tentacleRightNeutral.scale.x=-1,this.tentacleRightBlock.scale.x=-1,this.tentacleRightSlap.scale.x=-1,this.tentacleRightUppercut.scale.x=-1,this.tentacleLeftSlap.visible=!1,this.tentacleLeftBlock.visible=!1,this.tentacleLeftUppercut.visible=!1,this.tentacleRightSlap.visible=!1,this.tentacleRightBlock.visible=!1,this.tentacleRightUppercut.visible=!1,this.tentacleHolderLeft.position.x=-this.tentacleSpacing,this.tentacleHolderRight.position.x=this.tentacleSpacing,this.tentacleHolderLeft.rotation=this.tentacleAngle,this.tentacleHolderRight.rotation=-this.tentacleAngle,this.tentacleMainHolder.addChild(this.tentacleHolderLeft),this.tentacleMainHolder.addChild(this.tentacleHolderRight),this.elementHolder.addChild(this.tentacleMainHolder),this.tentacleVerticalPos=400,this.tentacleVerticalUppercutPos=650,this.tentacleHolderLeft.position.y=this.tentacleVerticalPos,this.tentacleHolderRight.position.y=this.tentacleVerticalPos}return a.prototype.showTentacles=function(a){0==a&&(this.inputReadyLeft=!1,this.inputReadyRight=!1),this.setTentacleNeutral("left"),this.setTentacleNeutral("right"),this.elementHolder.addChild(this.tentacleMainHolder),this.showTentaclesTimeline=new TimelineMax({onComplete:this.initInputReady,onCompleteParams:[this]});var b=Game.getRandom(.2,.5),c=Game.getRandom(.2,.5);this.showTentaclesTimeline.add([TweenMax.to(this.tentacleHolderLeft.position,b,{y:this.tentacleVerticalPos,ease:Back.easeOut,onComplete:this.leftTentacleReady,onCompleteParams:[this]}),TweenMax.to(this.tentacleHolderRight.position,c,{y:this.tentacleVerticalPos,ease:Back.easeOut,onComplete:this.rightTentacleReady,onCompleteParams:[this]})],.5)},a.prototype.initInputReady=function(a){a.inputReadyLeft=!0,a.inputReadyRight=!0},a.prototype.leftTentacleReady=function(a){if(1!=a.uppercutReady){a.killLeftTentacleTimelines(a),a.leftTentacleIdleTimeline&&a.leftTentacleIdleTimeline.kill();var b=Game.getRandom(.5,1),c=Game.getRandom(.5,1),d=Game.getRandom(-20,20),e=Game.getRandom(-20,20),f=Game.getRandom(.5,1),g=Game.getRandom(-.1,.1);a.leftTentacleIdleTimeline=new TimelineMax,a.leftTentacleIdleTimeline.add([TweenMax.to(a.tentacleHolderLeft.position,b,{x:-a.tentacleSpacing+d,ease:Sine.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(a.tentacleHolderLeft.position,c,{y:a.tentacleVerticalPos+e,ease:Sine.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(a.tentacleHolderLeft,f,{rotation:a.tentacleAngle+g,ease:Sine.easeInOut,yoyo:!0,repeat:-1})],0),a.inputReadyLeft=!0}},a.prototype.rightTentacleReady=function(a){if(1!=a.uppercutReady){a.killRightTentacleTimelines(a),a.rightTentacleIdleTimeline&&a.rightTentacleIdleTimeline.kill();var b=Game.getRandom(.5,1),c=Game.getRandom(.5,1),d=Game.getRandom(-20,20),e=Game.getRandom(-20,20),f=Game.getRandom(.5,1),g=Game.getRandom(-.1,.1);a.rightTentacleIdleTimeline=new TimelineMax,a.rightTentacleIdleTimeline.add([TweenMax.to(a.tentacleHolderRight.position,b,{x:a.tentacleSpacing+d,ease:Sine.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(a.tentacleHolderRight.position,c,{y:a.tentacleVerticalPos+e,ease:Sine.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(a.tentacleHolderRight,f,{rotation:-a.tentacleAngle+g,ease:Sine.easeInOut,yoyo:!0,repeat:-1})],0),a.inputReadyRight=!0}},a.prototype.tick=function(){if(0!=this.slapSillyModeOn){if(this.electricityFrameCounter++,this.electricityFrameCounter>=this.electricityFrameCounterLimit){this.electricityFrameCounter=0,this.electricityLeftIndex++,this.electricityRightIndex++,this.electricityLeftIndex>=this.electricityElementsLeft.length&&(this.electricityLeftIndex=0),this.electricityRightIndex>=this.electricityElementsRight.length&&(this.electricityRightIndex=0);for(var a=0;a<this.electricityElementsLeft.length;a++)this.electricityElementsLeft[a].visible=!1;for(var a=0;a<this.electricityElementsRight.length;a++)this.electricityElementsRight[a].visible=!1}this.electricityElementsLeft[this.electricityLeftIndex].visible=!0,this.electricityElementsRight[this.electricityRightIndex].visible=!0}},a.prototype.getTentacleInputAllowed=function(a){var b=!1;return"left"==a?1==this.inputReadyLeft&&(b=!0):"right"==a&&1==this.inputReadyRight&&(b=!0),b},a.prototype.leftTentacleAttack=function(){0!=this.inputReadyLeft&&(this.inputReadyLeft=!1,this.leftTentacleIdleTimeline&&this.leftTentacleIdleTimeline.kill(),this.leftTentacleAttackTimeline&&this.leftTentacleAttackTimeline.kill(),this.leftTentacleAttackTimeline=new TimelineMax({onComplete:this.leftTentacleReady,onCompleteParams:[this]}),this.leftTentacleAttackTimeline.call(this.makeTentacleSlap,[this,"left"],null,.05),this.slapAnimation(this.leftTentacleAttackTimeline,this.tentacleHolderLeft,1,"left"))},a.prototype.rightTentacleAttack=function(){0!=this.inputReadyRight&&(this.inputReadyRight=!1,this.rightTentacleIdleTimeline&&this.rightTentacleIdleTimeline.kill(),this.rightTentacleAttackTimeline&&this.rightTentacleAttackTimeline.kill(),this.rightTentacleAttackTimeline=new TimelineMax({onComplete:this.rightTentacleReady,onCompleteParams:[this]}),this.rightTentacleAttackTimeline.call(this.makeTentacleSlap,[this,"right"],null,.05),this.slapAnimation(this.rightTentacleAttackTimeline,this.tentacleHolderRight,-1,"right"))},a.prototype.leftTentacleSuccessfulBlock=function(){0!=this.inputReadyLeft&&(this.inputReadyLeft=!1,this.leftTentacleIdleTimeline&&this.leftTentacleIdleTimeline.kill(),this.tentacleLeftNeutral.visible=!1,this.tentacleLeftBlock.visible=!0,this.tentacleLeftSlap.visible=!1,this.tentacleLeftUppercut.visible=!1,this.leftTentacleBlockTimeline&&this.leftTentacleBlockTimeline.kill(),this.leftTentacleBlockTimeline=new TimelineMax({onComplete:this.leftTentacleReady,onCompleteParams:[this]}),this.blockAnimation(this.leftTentacleBlockTimeline,this.tentacleHolderLeft,1,"left",.5))},a.prototype.rightTentacleSuccessfulBlock=function(){0!=this.inputReadyRight&&(this.inputReadyRight=!0,this.rightTentacleIdleTimeline&&this.rightTentacleIdleTimeline.kill(),this.tentacleRightNeutral.visible=!1,this.tentacleRightBlock.visible=!0,this.tentacleRightSlap.visible=!1,this.tentacleRightUppercut.visible=!1,this.rightTentacleBlockTimeline&&this.rightTentacleBlockTimeline.kill(),this.rightTentacleBlockTimeline=new TimelineMax({onComplete:this.rightTentacleReady,onCompleteParams:[this]}),this.blockAnimation(this.rightTentacleBlockTimeline,this.tentacleHolderRight,-1,"right",.5))},a.prototype.makeTentacleSlap=function(a,b){"left"==b?(a.tentacleLeftNeutral.visible=!1,a.tentacleLeftBlock.visible=!1,a.tentacleLeftSlap.visible=!0,a.tentacleLeftUppercut.visible=!1):"right"==b&&(a.tentacleRightNeutral.visible=!1,a.tentacleRightBlock.visible=!1,a.tentacleRightSlap.visible=!0,a.tentacleRightUppercut.visible=!1)},a.prototype.leftTentacleUnsuccessfulBlock=function(){0!=this.inputReadyLeft&&(this.inputReadyLeft=!1,this.leftTentacleIdleTimeline&&this.leftTentacleIdleTimeline.kill(),this.tentacleLeftNeutral.visible=!1,this.tentacleLeftBlock.visible=!0,this.tentacleLeftSlap.visible=!1,this.leftTentacleBlockTimeline&&this.leftTentacleBlockTimeline.kill(),this.leftTentacleBlockTimeline=new TimelineMax({onComplete:this.leftTentacleReady,onCompleteParams:[this]}),this.blockAnimation(this.leftTentacleBlockTimeline,this.tentacleHolderLeft,1,"left",2))},a.prototype.rightTentacleUnsuccessfulBlock=function(){0!=this.inputReadyRight&&(this.inputReadyRight=!1,this.rightTentacleIdleTimeline&&this.rightTentacleIdleTimeline.kill(),this.tentacleRightNeutral.visible=!1,this.tentacleRightBlock.visible=!0,this.tentacleRightSlap.visible=!1,this.rightTentacleBlockTimeline&&this.rightTentacleBlockTimeline.kill(),this.rightTentacleBlockTimeline=new TimelineMax({onComplete:this.rightTentacleReady,onCompleteParams:[this]}),this.blockAnimation(this.rightTentacleBlockTimeline,this.tentacleHolderRight,-1,"right",2))},a.prototype.leftTentacleBreakHold=function(){0!=this.inputReadyLeft&&(this.inputReadyLeft=!1,this.leftTentacleIdleTimeline&&this.leftTentacleIdleTimeline.kill(),this.tentacleLeftNeutral.visible=!1,this.tentacleLeftBlock.visible=!1,this.tentacleLeftSlap.visible=!0,this.tentacleLeftUppercut.visible=!1,this.leftTentacleBlockTimeline&&this.leftTentacleBlockTimeline.kill(),this.leftTentacleBlockTimeline=new TimelineMax({onComplete:this.leftTentacleReady,onCompleteParams:[this]}),this.breakHoldAnimation(this.leftTentacleBlockTimeline,this.tentacleHolderLeft,1,"left"))},a.prototype.rightTentacleBreakHold=function(){0!=this.inputReadyRight&&(this.inputReadyRight=!1,this.rightTentacleIdleTimeline&&this.rightTentacleIdleTimeline.kill(),this.tentacleRightNeutral.visible=!1,this.tentacleRightBlock.visible=!1,this.tentacleRightSlap.visible=!0,this.tentacleRightUppercut.visible=!1,this.rightTentacleBlockTimeline&&this.rightTentacleBlockTimeline.kill(),this.rightTentacleBlockTimeline=new TimelineMax({onComplete:this.rightTentacleReady,onCompleteParams:[this]}),this.breakHoldAnimation(this.rightTentacleBlockTimeline,this.tentacleHolderRight,-1,"right"))},a.prototype.slapAnimation=function(a,b,c,d){var e,f;"left"==d?(e=-this.tentacleSpacing+100,f=-this.tentacleSpacing):"right"==d&&(e=this.tentacleSpacing-100,f=this.tentacleSpacing),a.add([TweenMax.to(b.position,.05,{y:450,x:e,ease:Power3.easeOut}),TweenMax.to(b,.05,{rotation:2*c,ease:Power3.easeIn})],0),a.add([TweenMax.to(b,.1,{rotation:.9*c,ease:Power2.easeIn})],.05),a.add([TweenMax.to(b,.5,{rotation:this.tentacleAngle*c,ease:Back.easeOut}),TweenMax.to(b.position,.5,{y:this.tentacleVerticalPos,x:f,ease:Back.easeOut})],.15),a.call(this.checkKnockOutBlow,[d],this,.4),a.call(this.setTentacleNeutral,[d],this,.6)},a.prototype.blockAnimation=function(a,b,c,d,e){var f,g;"left"==d?(f=-this.tentacleSpacing+50,g=-this.tentacleSpacing):"right"==d&&(f=this.tentacleSpacing-50,g=this.tentacleSpacing),a.add([TweenMax.to(b.position,.2,{y:600,x:f,ease:Power2.easeOut}),TweenMax.to(b,.2,{rotation:-.2*c,ease:Power2.easeOut})],0),a.add([TweenMax.to(b,e,{rotation:this.tentacleAngle*c,ease:Back.easeOut}),TweenMax.to(b.position,e,{y:this.tentacleVerticalPos,x:g,ease:Back.easeOut})],.4),a.call(this.checkKnockOutBlow,[d],this,.2),a.call(this.setTentacleNeutral,[d],this,e)},a.prototype.breakHoldAnimation=function(a,b,c,d){var e,f;"left"==d?(e=-this.tentacleSpacing-30,f=-this.tentacleSpacing):"right"==d&&(e=this.tentacleSpacing+30,f=this.tentacleSpacing),a.add([TweenMax.to(b.position,.15,{y:800,x:e,ease:Power2.easeOut}),TweenMax.to(b,.15,{rotation:-.4*c,ease:Power2.easeOut})],0),a.add([TweenMax.to(b,.15,{rotation:this.tentacleAngle*c,ease:Back.easeOut}),TweenMax.to(b.position,.15,{y:this.tentacleVerticalPos,x:f,ease:Back.easeOut})],.15),a.call(this.setTentacleNeutral,[d],this,.3)},a.prototype.killLeftTentacleTimelines=function(a){a.leftTentacleAttackTimeline&&a.leftTentacleAttackTimeline.kill(),a.leftTentacleBlockTimeline&&a.leftTentacleBlockTimeline.kill(),a.leftTentacleBreakHoldTimeline&&a.leftTentacleBreakHoldTimeline.kill(),a.leftTentacleUppercutTimeline&&a.leftTentacleUppercutTimeline.kill(),a.leftTentacleIdleTimeline&&a.leftTentacleIdleTimeline.kill(),a.readyTentaclesUppercutTimeline&&a.readyTentaclesUppercutTimeline.kill(),a.leftTentacleAttackTimeline=null,a.leftTentacleBlockTimeline=null,a.leftTentacleBreakHoldTimeline=null,a.leftTentacleUppercutTimeline=null,a.leftTentacleIdleTimeline=null,a.readyTentaclesUppercutTimeline=null},a.prototype.killRightTentacleTimelines=function(a){a.rightTentacleAttackTimeline&&a.rightTentacleAttackTimeline.kill(),a.rightTentacleBlockTimeline&&a.rightTentacleBlockTimeline.kill(),a.rightTentacleBreakHoldTimeline&&a.rightTentacleBreakHoldTimeline.kill(),a.rightTentacleUppercutTimeline&&a.rightTentacleUppercutTimeline.kill(),a.rightTentacleIdleTimeline&&a.rightTentacleIdleTimeline.kill(),a.readyTentaclesUppercutTimeline&&a.readyTentaclesUppercutTimeline.kill(),a.rightTentacleAttackTimeline=null,a.rightTentacleBlockTimeline=null,a.rightTentacleBreakHoldTimeline=null,a.rightTentacleUppercutTimeline=null,a.rightTentacleIdleTimeline=null,a.readyTentaclesUppercutTimeline=null},a.prototype.checkKnockOutBlow=function(){1==this.scene.getCharacterKnockoutBlow()&&this.scene.enemyDrained()},a.prototype.setTentacleNeutral=function(a){"left"==a?(this.tentacleLeftNeutral.visible=!0,this.tentacleLeftBlock.visible=!1,this.tentacleLeftSlap.visible=!1,this.tentacleLeftUppercut.visible=!1):"right"==a&&(this.tentacleRightNeutral.visible=!0,this.tentacleRightBlock.visible=!1,this.tentacleRightSlap.visible=!1,this.tentacleRightUppercut.visible=!1)},a.prototype.beginSlapSillyMode=function(){this.slapSillyModeOn=!0,this.slapSillyModeAnimation&&this.slapSillyModeAnimation.kill(),this.slapSillyModeAnimation=new TimelineMax({repeat:-1,yoyo:!0}),this.slapSillyModeAnimation.add([TweenMax.to(this.tentacleMainHolder.position,.02,{x:2,ease:Sine.easeInOut}),TweenMax.to(this.tentacleMainHolder.position,.03,{y:-2,ease:Sine.easeInOut}),TweenMax.to(this.tentacleMainHolder,.04,{rotation:.1,ease:Sine.easeInOut})],0)},a.prototype.endSlapSillyMode=function(){this.slapSillyModeOn=!1,this.slapSillyModeAnimation.pause(),this.slapSillyModeAnimation&&this.slapSillyModeAnimation.kill(),this.slapSillyModeAnimation=null,this.tentacleMainHolder.position.x=0,this.tentacleMainHolder.position.y=0,this.tentacleMainHolder.rotation=0;for(var a=0;a<this.electricityElementsLeft.length;a++)this.electricityElementsLeft[a].visible=!1,this.electricityElementsRight[a].visible=!1},a.prototype.readyUppercut=function(){this.uppercutReady=!0,this.tentacleLeftNeutral.visible=!1,this.tentacleLeftBlock.visible=!1,this.tentacleLeftSlap.visible=!1,this.tentacleLeftUppercut.visible=!0,this.tentacleRightNeutral.visible=!1,this.tentacleRightBlock.visible=!1,this.tentacleRightSlap.visible=!1,this.tentacleRightUppercut.visible=!0,this.killLeftTentacleTimelines(this),this.killRightTentacleTimelines(this),this.inputReadyLeft=!1,this.inputReadyRight=!1,this.readyTentaclesUppercutTimeline&&this.readyTentaclesUppercutTimeline.kill(),this.readyTentaclesUppercutTimeline=new TimelineMax({onComplete:this.uppercutIsAllowed,onCompleteParams:[this]}),this.readyTentaclesUppercutTimeline.add([TweenMax.to(this.tentacleHolderLeft,.1,{y:this.tentacleVerticalUppercutPos,ease:Sine.easeOut}),TweenMax.to(this.tentacleHolderRight,.1,{y:this.tentacleVerticalUppercutPos,ease:Sine.easeOut})],0)},a.prototype.uppercutIsAllowed=function(a){a.inputReadyLeft=!0,a.inputReadyRight=!0},a.prototype.doUppercut=function(a){0!=this.inputReadyLeft&&0!=this.inputReadyRight&&1!=this.uppercutComplete&&(this.uppercutComplete=!0,this.uppercutReady=!1,"left"==a?this.upperCutAnimation(a,this.leftTentacleUppercutTimeline,this.tentacleHolderLeft):"right"==a&&this.upperCutAnimation(a,this.rightTentacleUppercutTimeline,this.tentacleHolderRight))},a.prototype.setSecondWind=function(){this.uppercutReady=!1,this.reset(),this.showTentacles(!0)},a.prototype.upperCutAnimation=function(a,b,c){var d,e,f,g=350,h=this.tentacleVerticalUppercutPos;"left"==a?(d=-this.tentacleSpacing/2,f=1,e=-this.tentacleSpacing):"right"==a&&(d=this.tentacleSpacing/2,f=-1,e=this.tentacleSpacing),b&&b.kill(),b=new TimelineMax,b.add([TweenMax.to(c.position,.5,{x:d,y:g,ease:Expo.easeIn}),TweenMax.to(c,.5,{rotation:.2*f,ease:Expo.easeIn})],0),b.add([TweenMax.to(c.position,1,{x:e,y:h,ease:Back.easeIn}),TweenMax.to(c,1,{rotation:this.tentacleAngle*f,ease:Expo.easeIn})],.5)},a.prototype.getTentacleState=function(a){var b;return"left"==a?b=this.inputReadyLeft:"right"==a&&(b=this.inputReadyRight),b},a.prototype.reset=function(){this.showTentaclesTimeline&&this.showTentaclesTimeline.kill(),this.readyTentaclesUppercutTimeline&&this.readyTentaclesUppercutTimeline.kill(),this.leftTentacleAttackTimeline&&this.leftTentacleAttackTimeline.kill(),this.rightTentacleAttackTimeline&&this.rightTentacleAttackTimeline.kill(),this.leftTentacleBlockTimeline&&this.leftTentacleBlockTimeline.kill(),this.rightTentacleBlockTimeline&&this.rightTentacleBlockTimeline.kill(),this.leftTentacleBreakHoldTimeline&&this.leftTentacleBreakHoldTimeline.kill(),this.rightTentacleBreakHoldTimeline&&this.rightTentacleBreakHoldTimeline.kill(),this.leftTentacleUppercutTimeline&&this.leftTentacleUppercutTimeline.kill(),this.rightTentacleUppercutTimeline&&this.rightTentacleUppercutTimeline.kill(),this.leftTentacleIdleTimeline&&this.leftTentacleIdleTimeline.kill(),this.rightTentacleIdleTimeline&&this.rightTentacleIdleTimeline.kill(),this.uppercutComplete=!1},a.prototype.pause=function(){this.pauseResumeAllTweens("pause")},a.prototype.resume=function(){this.pauseResumeAllTweens("resume")},a.prototype.pauseResumeAllTweens=function(a){this.scene.pauseResumeTween(this.showTentaclesTimeline,a),this.scene.pauseResumeTween(this.readyTentaclesUppercutTimeline,a),this.scene.pauseResumeTween(this.leftTentacleAttackTimeline,a),this.scene.pauseResumeTween(this.rightTentacleAttackTimeline,a),this.scene.pauseResumeTween(this.leftTentacleBlockTimeline,a),this.scene.pauseResumeTween(this.rightTentacleBlockTimeline,a),this.scene.pauseResumeTween(this.leftTentacleBreakHoldTimeline,a),this.scene.pauseResumeTween(this.rightTentacleBreakHoldTimeline,a),this.scene.pauseResumeTween(this.leftTentacleUppercutTimeline,a),this.scene.pauseResumeTween(this.rightTentacleUppercutTimeline,a),this.scene.pauseResumeTween(this.leftTentacleIdleTimeline,a),this.scene.pauseResumeTween(this.rightTentacleIdleTimeline,a)},a.prototype.destroy=function(){this.reset(),this.slapSillyModeAnimation&&this.slapSillyModeAnimation.kill()},a}(),SlapHappyEnemyManager=function(){function a(a,b){this.scene=a,this.elementHolder=b,this.difficulty=0,this.elementHolder.position.x=Game.stageWidth/2,this.elementHolder.position.y=Game.stageHeight/2,this.grabStrengthMax=5,this.grabLevel=0,this.currentCharacterState={left:"neutral",right:"neutral"},this.currentGrabState={left:0,right:0},this.enemyCharacters=new Array;for(var c=0;3>c;c++)this.enemyCharacters.push({character:new SlapHappyEnemyCharacter(this,"spongebob"),active:!1});this.shuffleArray(this.enemyCharacters)}return a.prototype.popCharacter=function(a,b){this.grabLevel=0;for(var c=0;c<this.enemyCharacters.length;c++)if(0==this.enemyCharacters[c].active){this.enemyCharacters[c].active=!0,this.enemyCharacters[c].character.setDifficulty(this.difficulty),this.enemyCharacters[c].character.popCharacter(a,b),this.currentCharacter=this.enemyCharacters[c];break}},a.prototype.inGameTuteStage2=function(){this.currentCharacter.character.inGameTuteStage2()},a.prototype.endInGameTute=function(){this.currentCharacter.character.endInGameTute()},a.prototype.shuffleArray=function(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a},a.prototype.setCurrentCharacterState=function(a,b){this.currentCharacterState[a]=b,"grabbing"==b&&(this.currentGrabState[a]=this.grabStrengthMax,this.scene.setGrab(a))},a.prototype.getEnemyCharacterState=function(a){var b;return b=this.currentCharacterState[a]},a.prototype.landAttack=function(a){this.currentCharacter.character.beenHit(a)},a.prototype.blockAttack=function(a,b){this.currentCharacter.character.attackBlocked(a,b)},a.prototype.beginCounterAttack=function(a){this.currentCharacter.character.counterAttack(a)},a.prototype.breakHold=function(a){this.currentGrabState[a]>0?this.currentGrabState[a]--:(this.currentCharacter.character.breakHold(a),this.scene.breakHold(a,this.grabLevel),this.grabLevel--)},a.prototype.playerGrabbed=function(){this.grabLevel>2||(this.grabLevel++,this.scene.playerGrabbed(this.grabLevel))},Object.defineProperty(a.prototype,"getGrabLevel",{get:function(){return this.grabLevel},enumerable:!0,configurable:!0}),a.prototype.enemyDrained=function(){this.currentCharacter.character.characterDrained()},a.prototype.currentCharacterKnockOut=function(a){this.currentCharacter.character.knockOut(a)},a.prototype.increaseDifficulty=function(){this.difficulty++},a.prototype.resetCharacter=function(a){for(var b=0;b<this.enemyCharacters.length;b++)if(this.enemyCharacters[b].character==a){this.enemyCharacters[b].active=!1,this.enemyCharacters[b].character.characterActive=!1;break}},a.prototype.enemyLastHit=function(){this.currentCharacter.character.enemyLastHit()},a.prototype.pause=function(){for(var a=0;a<this.enemyCharacters.length;a++)1==this.enemyCharacters[a].active&&1==this.enemyCharacters[a].character.characterActive&&this.enemyCharacters[a].character.pause()},a.prototype.resume=function(){for(var a=0;a<this.enemyCharacters.length;a++)1==this.enemyCharacters[a].active&&1==this.enemyCharacters[a].character.characterActive&&this.enemyCharacters[a].character.resume()},a.prototype.tick=function(){},a.prototype.destroy=function(){for(var a=0;a<this.enemyCharacters.length;a++)this.enemyCharacters[a].character.destroy()},a}(),SlapHappyImpactManager=function(){function a(a,b){this.scene=a,this.elementHolder=b,this.impactElements=new Array,this.currentGrabLevel=0;for(var c=0;3>c;c++)this.impactElements.push({index:c,sprite:Game.displayStore.getSprite("impact-shape"),active:!1,timeline:new TimelineMax})}return a.prototype.showImpact=function(a,b,c){var d,e=1;1==c&&(e=4);for(var f=0;f<this.impactElements.length;f++)if(d=this.impactElements[f],0==d.active){d.active=!0;break}switch(a){case"slap":d.sprite.alpha=0,d.sprite.scale.x=.8,d.sprite.scale.y=.8,d.sprite.rotation=Game.getRandom(0,360),d.sprite.position.y=50,"left"==b?d.sprite.position.x=-180:"right"==b&&(d.sprite.position.x=180),this.slappedAnimation(b,d,e);break;case"block":d.sprite.alpha=0,d.sprite.scale.x=.8,d.sprite.scale.y=.8,d.sprite.rotation=Game.getRandom(0,360),d.sprite.position.y=250,"left"==b?d.sprite.position.x=-280:"right"==b&&(d.sprite.position.x=280),this.blockedAnimation(b,d,e);break;case"break":d.sprite.alpha=0,d.sprite.scale.x=.8,d.sprite.scale.y=.8,d.sprite.rotation=Game.getRandom(0,360),d.sprite.position.y=280,"left"==b?d.sprite.position.x=-380:"right"==b&&(d.sprite.position.x=380),this.breakHoldAnimation(b,d,e);break;case"uppercut":d.sprite.alpha=0,d.sprite.scale.x=.8,d.sprite.scale.y=.8,d.sprite.rotation=Game.getRandom(0,360),d.sprite.position.y=-40,"left"==b?d.sprite.position.x=-70:"right"==b&&(d.sprite.position.x=70),this.uppercutAnimation(b,d,e)}},a.prototype.slappedAnimation=function(a,b,c){var d;"left"==a?d=1*c:"right"==a&&(d=-1*c),this.elementHolder.addChild(b.sprite),b.timeline=new TimelineMax({onComplete:this.endImpact,onCompleteParams:[this,b.index]}),b.timeline.add([TweenMax.to(this.elementHolder.position,.1,{x:Game.stageWidth/2+10*d,y:Game.stageHeight/2+10,yoyo:!0,repeat:3,ease:Sine.easeInOut})],.2),b.timeline.add([TweenMax.to(b.sprite,.2,{alpha:1,ease:Sine.easeOut}),TweenMax.to(b.sprite.scale,.2,{x:1,y:1,ease:Expo.easeIn})],.2),b.timeline.add([TweenMax.to(b.sprite,.1,{alpha:0,ease:Sine.easeOut})],.35)},a.prototype.blockedAnimation=function(a,b,c){var d;"left"==a?d=1*c:"right"==a&&(d=-1*c),this.elementHolder.addChild(b.sprite),b.timeline=new TimelineMax,b.timeline.add([TweenMax.to(this.elementHolder.position,.1,{x:Game.stageWidth/2+5*d,y:Game.stageHeight/2+5,yoyo:!0,repeat:3,ease:Sine.easeInOut})],.2),b.timeline.add([TweenMax.to(b.sprite,.2,{alpha:1,ease:Sine.easeOut}),TweenMax.to(b.sprite.scale,.2,{x:1,y:1,ease:Expo.easeIn})],.2),b.timeline.add([TweenMax.to(b.sprite,.1,{alpha:0,ease:Sine.easeOut})],.35)},a.prototype.breakHoldAnimation=function(a,b,c){var d;"left"==a?d=1*c:"right"==a&&(d=-1*c),this.elementHolder.addChild(b.sprite),b.timeline=new TimelineMax,b.timeline.add([TweenMax.to(this.elementHolder.position,.1,{x:Game.stageWidth/2+2*d,y:Game.stageHeight/2+2,yoyo:!0,repeat:1,ease:Sine.easeInOut})],.2),b.timeline.add([TweenMax.to(b.sprite,.2,{alpha:1,ease:Sine.easeOut}),TweenMax.to(b.sprite.scale,.2,{x:1,y:1,ease:Expo.easeIn})],.2),b.timeline.add([TweenMax.to(b.sprite,.1,{alpha:0,ease:Sine.easeOut})],.35)},a.prototype.uppercutAnimation=function(a,b,c){var d;"left"==a?d=1*c:"right"==a&&(d=-1*c),this.elementHolder.addChild(b.sprite),b.timeline=new TimelineMax({delay:.2}),b.timeline.add([TweenMax.to(this.elementHolder.position,.1,{x:Game.stageWidth/2+10*d,y:Game.stageHeight/2+10,yoyo:!0,repeat:7,ease:Sine.easeInOut})],.2),b.timeline.add([TweenMax.to(b.sprite,.2,{alpha:1,ease:Sine.easeOut}),TweenMax.to(b.sprite.scale,.2,{x:1,y:1,ease:Expo.easeIn})],.2),b.timeline.add([TweenMax.to(b.sprite,.1,{alpha:0,
ease:Sine.easeOut})],.35)},a.prototype.endImpact=function(a,b){a.impactElements[b].active=!1,a.elementHolder.removeChild(a.impactElements[b].sprite)},a.prototype.playerGrabbed=function(a){if(a!=this.currentGrabLevel){this.healthDrainAnimation&&this.healthDrainAnimation.kill(),this.currentGrabLevel=a;var b=a/1.2,c=Game.getRandom(1*a,4*a),d=Game.getRandom(1*a,4*a);this.elementHolder.position.x=Game.stageWidth/2-c,this.elementHolder.position.y=Game.stageHeight/2-d;var e=Game.getRandom(.05/b,.1/b),f=Game.getRandom(.05/b,.1/b),g=Game.getRandom(.1/b,.2/b),h=Game.getRandom(.05*a,.1*a);this.elementHolder.rotation=-h,this.healthDrainAnimation=new TimelineMax,this.healthDrainAnimation.add([TweenMax.to(this.elementHolder.position,e,{x:Game.stageWidth/2+c,ease:Sine.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.elementHolder.position,f,{y:Game.stageHeight/2+d,ease:Sine.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.elementHolder,g,{rotation:h,ease:Sine.easeInOut,yoyo:!0,repeat:-1})])}},a.prototype.checkGrabLevel=function(a){a!=this.currentGrabLevel&&(0==a?(this.healthDrainAnimation&&this.healthDrainAnimation.kill(),this.healthDrainAnimation=null,this.elementHolder.position.x=Game.stageWidth/2,this.elementHolder.position.y=Game.stageHeight/2,this.elementHolder.rotation=0,this.currentGrabLevel=0):this.playerGrabbed(a))},a.prototype.enemyDrained=function(){this.impactShapeAnimation&&this.impactShapeAnimation.kill(),this.healthDrainAnimation&&this.healthDrainAnimation.kill(),this.elementHolder.position.x=Game.stageWidth/2,this.elementHolder.position.y=Game.stageHeight/2,this.elementHolder.rotation=0},a.prototype.reset=function(){this.impactShapeAnimation&&this.impactShapeAnimation.kill(),this.healthDrainAnimation&&this.healthDrainAnimation.kill()},a.prototype.resetDrain=function(){this.impactShapeAnimation&&this.impactShapeAnimation.kill(),this.healthDrainAnimation&&this.healthDrainAnimation.kill(),this.elementHolder.position.x=Game.stageWidth/2,this.elementHolder.position.y=Game.stageHeight/2,this.elementHolder.rotation=0,this.currentGrabLevel=0},a.prototype.tick=function(){},a.prototype.pause=function(){this.scene.pauseResumeTween(this.impactShapeAnimation,"pause"),this.scene.pauseResumeTween(this.healthDrainAnimation,"pause")},a.prototype.resume=function(){this.scene.pauseResumeTween(this.impactShapeAnimation,"resume"),this.scene.pauseResumeTween(this.healthDrainAnimation,"resume")},a.prototype.destroy=function(){for(var a=0;a<this.impactElements.length;a++)Game.displayStore.returnPooledItem(this.impactElements[a].sprite);this.impactShapeAnimation&&this.impactShapeAnimation.kill(),this.healthDrainAnimation&&this.healthDrainAnimation.kill(),this.elementHolder.position.x=Game.stageWidth/2,this.elementHolder.position.y=Game.stageHeight/2,this.elementHolder.rotation=0},a}(),MeowNoInputManager=function(){function a(a){this.middleStripWidth=250,this.scene=a,this.hitAreaSprite=Game.displayStore.getSprite("meow-no-blank-input"),this.hitAreaSprite.width=Game.stageWidth,this.hitAreaSprite.height=Game.stageHeight,this.scene.mainContainer.addChild(this.hitAreaSprite),this.multipleEventFixBoolean=!1}return a.prototype.createInput=function(){this.setUpHitArea(this.hitAreaSprite)},a.prototype.setUpHitArea=function(a){a.interactive=!0,a.buttonMode=!0;var b=this;Game.onDesktop?a.on("mouseup",function(a){1!=b.multipleEventFixBoolean&&(b.multipleEventFixBoolean=!0,b.parseInput(b,a.data.getLocalPosition(b.scene.container)))}):(a.on("touchstart",function(a){1!=b.multipleEventFixBoolean&&(b.multipleEventFixBoolean=!0,b.parseInput(b,a.data.getLocalPosition(b.scene.container)))}),a.on("touchend",function(a){}))},a.prototype.parseInput=function(a,b){b.x<=Game.stageWidth/2?this.scene.parseInput("left"):b.x>Game.stageWidth/2&&this.scene.parseInput("right"),this.unlockInput()},a.prototype.unlockInput=function(){this.multipleEventFixBoolean=!1},a.prototype.tick=function(){},a.prototype.destroy=function(){this.hitAreaSprite.removeAllListeners()},a}(),MeowNoItemManager=function(){function a(a){this.scene=a,this.spawnCounter=0,this.spawnCounterLimit=90,this.lastContactItem=null,this.depthSwapPos=330,this.tweenDuration=500,this.itemSpeedFactor=1,this.createPatterns(),this.createPaths(),this.createItems()}return a.prototype.createPaths=function(){this.leftItemPathPoints=new Array,this.rightItemPathPoints=new Array,this.leftItemPathPoints.push({x:97,y:800}),this.leftItemPathPoints.push({x:177,y:586}),this.leftItemPathPoints.push({x:300,y:430}),this.leftItemPathPoints.push({x:420,y:303}),this.leftItemPathPoints.push({x:479,y:258}),this.scaleStart={x:1.2,y:1.2},this.angleStart={angle:.2};for(var a=0;a<this.leftItemPathPoints.length;a++)this.rightItemPathPoints.push({x:Game.stageWidth-this.leftItemPathPoints[a].x,y:this.leftItemPathPoints[a].y});this.middleStartPos={x:512,y:800},this.middleItemPathTween=new TweenMax(this.middleStartPos,this.tweenDuration,{y:258,ease:Linear.easeNone}),this.leftStartPos=this.leftItemPathPoints[0],this.leftItemPathTween=new TweenMax(this.leftStartPos,this.tweenDuration,{bezier:this.leftItemPathPoints,ease:Linear.easeNone}),this.rightStartPos=this.rightItemPathPoints[0],this.rightItemPathTween=new TweenMax(this.rightStartPos,this.tweenDuration,{bezier:this.rightItemPathPoints,ease:Linear.easeNone}),this.scaleTween=new TweenMax(this.scaleStart,this.tweenDuration,{x:.2,y:.2,ease:Linear.easeNone}),this.angleTween=new TweenMax(this.angleStart,this.tweenDuration,{angle:0,ease:Linear.easeNone})},a.prototype.createPatterns=function(){this.itemPatterns=new Array,this.itemPatterns.push({left:!0,middle:!1,right:!1}),this.itemPatterns.push({left:!1,middle:!0,right:!1}),this.itemPatterns.push({left:!1,middle:!1,right:!0}),this.itemPatterns.push({left:!1,middle:!1,right:!1}),this.itemPatterns.push({left:!0,middle:!0,right:!1}),this.itemPatterns.push({left:!0,middle:!1,right:!0}),this.itemPatterns.push({left:!1,middle:!0,right:!0})},a.prototype.createItems=function(){this.items=new Array;for(var a=0;10>a;a++)this.items.push({item:Game.displayStore.getSprite("meow-no-item-avoid-"+String(Game.getRandom(1,4,!0))),type:"avoid",active:!1,lane:"none",progress:0,depthsswapped:!1});for(var a=0;5>a;a++)this.items.push({item:Game.displayStore.getSprite("meow-no-item-pickup"),type:"pickup",active:!1,lane:"none",progress:0,depthsswapped:!1});this.shuffleArray(this.items)},a.prototype.spawnItemRow=function(){var a=Game.getRandom(0,this.itemPatterns.length-1,!0),b=this.itemPatterns[a],c=b.left,d=b.middle,e=b.right;this.spawnAvoidItem(c,"left"),this.spawnAvoidItem(d,"middle"),this.spawnAvoidItem(e,"right"),1!=this.scene.bubbleShieldActive&&(this.spawnPickupItem(c,"left"),this.spawnPickupItem(d,"middle"),this.spawnPickupItem(e,"right"))},a.prototype.spawnAvoidItem=function(a,b){for(var c=0;c<this.items.length;c++){var d=this.items[c];if(0==a)break;if(0==d.active&&"avoid"==d.type){d.active=!0,d.lane=b,d.progress=0,d.item.rotation=0,d.depthsswapped=!1,this.scene.mainContainer.addChild(d.item);break}}},a.prototype.spawnPickupItem=function(a,b){for(var c=0;c<this.items.length;c++){var d=this.items[c];if(1==a)break;if(0==d.active&&"pickup"==d.type&&Game.getRandom(0,1)<.05){d.active=!0,d.lane=b,d.progress=0,d.item.rotation=0,d.depthsswapped=!1,this.scene.mainContainer.addChild(d.item);break}}},a.prototype.shuffleArray=function(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a},a.prototype.tick=function(){this.spawnCounter++,this.spawnCounter>=this.spawnCounterLimit&&(this.spawnCounter=0,this.spawnItemRow());for(var a=0;a<this.items.length;a++){var b=this.items[a];1==b.active&&(b.progress+=this.itemSpeedFactor,"middle"==b.lane&&(this.middleItemPathTween.time(b.progress),b.item.position.x=this.middleStartPos.x,b.item.position.y=this.middleStartPos.y),"left"==b.lane&&(this.leftItemPathTween.time(b.progress),b.item.position.x=this.leftStartPos.x,this.angleTween.time(b.progress),b.item.rotation=-this.angleStart.angle),"right"==b.lane&&(this.rightItemPathTween.time(b.progress),b.item.position.x=this.rightStartPos.x,this.angleTween.time(b.progress),b.item.rotation=this.angleStart.angle),this.middleItemPathTween.time(b.progress),b.item.position.y=this.middleStartPos.y,b.progress>=this.tweenDuration&&this.recycleItem(b),b.item.position.y<this.depthSwapPos&&0==b.depthsswapped&&(b.depthsswapped=!0,this.swapDepths()),this.scaleTween.time(b.progress),b.item.scale.x=this.scaleStart.x,b.item.scale.y=this.scaleStart.y)}},a.prototype.checkCollisions=function(a,b){for(var c={x:a.position.x-b.width/2,y:a.position.y-b.height/2,width:b.width,height:b.height},d=0;d<this.items.length;d++)if(0!=this.items[d].active&&1!=this.items[d].depthsswapped&&!(this.items[d].item.position.y>this.depthSwapPos+10)){var e=this.items[d],f={x:e.item.position.x-e.item.width/2,y:e.item.position.y-e.item.height/2,width:e.item.width,height:e.item.height};1==this.checkIndividualCollision(c,f)&&this.lastContactItem!=e.item&&("avoid"==e.type&&0==this.scene.beserkerCoolDown?this.scene.obstacleHit():"pickup"==e.type&&(this.items[d].active=!1,this.scene.mainContainer.removeChild(e.item),this.scene.itemPickup()),this.lastContactItem=e.item)}},a.prototype.checkIndividualCollision=function(a,b){var c=!1;return a.x<b.x+b.width&&a.x+a.width>b.x&&a.y<b.y+b.height&&a.height+a.y>b.y&&(c=!0),c},a.prototype.sceneryTriggeredDepthSwap=function(){this.swapDepths()},a.prototype.increaseDifficulty=function(a){this.itemSpeedFactor=a,this.spawnCounterLimit=90/a},a.prototype.swapDepths=function(){this.scene.swapDepthGary();for(var a=0;a<this.items.length;a++){var b=this.items[a];b.item.position.y>this.depthSwapPos&&1==b.active&&this.scene.mainContainer.addChild(b.item)}},a.prototype.recycleItem=function(a){a.active=!1,this.scene.mainContainer.removeChild(a.item)},a.prototype.destroy=function(){for(var a=0;a<this.items.length;a++)Game.displayStore.returnPooledItem(this.items[a].item),this.scene.mainContainer.removeChild(this.items[a].item)},a}(),MeowNoSceneryManager=function(){function a(a){this.scene=a,this.scenerySpawnCounter=0,this.scenerySpawnCounterLimit=60,this.roadSideSpawnCounter=0,this.roadSideSpawnCounterLimit=3,this.scenerySpeedFactor=1,this.tweenDuration=500,this.createPaths(),this.createItems(),this.createRoadSideItems()}return a.prototype.createPaths=function(){this.leftPathPoints=new Array,this.rightPathPoints=new Array,this.roadSidePathLeftPoints=new Array,this.roadSidePathRightPoints=new Array,this.roadSidePathLeftPoints.push({x:25,y:625}),this.roadSidePathLeftPoints.push({x:160,y:489}),this.roadSidePathLeftPoints.push({x:264,y:389}),this.roadSidePathLeftPoints.push({x:367,y:309}),this.roadSidePathLeftPoints.push({x:442,y:263}),this.leftPathPoints.push({x:-334,y:800}),this.leftPathPoints.push({x:-142,y:586}),this.leftPathPoints.push({x:40,y:430}),this.leftPathPoints.push({x:193,y:342}),this.leftPathPoints.push({x:334,y:268}),this.leftPathPoints.push({x:393,y:276}),this.leftPathPoints.push({x:453,y:320}),this.leftPathPoints.push({x:500,y:359}),this.angleBuildingPos={angle:-.6},this.scaleBuildingPos={x:1.4,y:1.4},this.anglePathPos={angle:.7},this.scalePathPos={x:1.2,y:1.2};for(var a=0;a<this.leftPathPoints.length;a++)this.rightPathPoints.push({x:Game.stageWidth-this.leftPathPoints[a].x,y:this.leftPathPoints[a].y});for(var a=0;a<this.roadSidePathLeftPoints.length;a++)this.roadSidePathRightPoints.push({x:Game.stageWidth-this.roadSidePathLeftPoints[a].x,y:this.roadSidePathLeftPoints[a].y});this.angleBuildingTween=new TweenMax(this.angleBuildingPos,this.tweenDuration,{angle:.05,ease:Linear.easeNone}),this.scaleBuildingTween=new TweenMax(this.scaleBuildingPos,this.tweenDuration,{x:.1,y:.1,ease:Linear.easeNone}),this.angleRoadsideTween=new TweenMax(this.anglePathPos,this.tweenDuration/2,{angle:1.2,ease:Linear.easeNone}),this.scaleRoadsideTween=new TweenMax(this.scalePathPos,this.tweenDuration/2,{x:.25,y:.25,ease:Linear.easeNone}),this.leftPathPos=this.leftPathPoints[0],this.leftPathBuildingTween=new TweenMax(this.leftPathPos,this.tweenDuration,{bezier:this.leftPathPoints,ease:Linear.easeNone}),this.rightPathPos=this.rightPathPoints[0],this.rightPathBuildingTween=new TweenMax(this.rightPathPos,this.tweenDuration,{bezier:this.rightPathPoints,ease:Linear.easeNone}),this.leftPathRoadsidePos=this.roadSidePathLeftPoints[0],this.leftPathRoadsideTween=new TweenMax(this.leftPathRoadsidePos,this.tweenDuration/2,{bezier:this.roadSidePathLeftPoints,ease:Linear.easeNone})},a.prototype.createItems=function(){this.items=new Array;for(var a=0;10>a;a++){var b;b=Game.getRandom(0,1)<.5?"left":"right";var c,d="scenery-house-0"+String(Game.getRandom(1,7,!0)),e=Game.displayStore.getSprite(d);c=Game.getRandom(0,1)<.5?-1:1,this.items.push({item:e,side:b,active:!1,progress:0,depthsswapped:!1,xScale:c})}this.shuffleArray(this.items)},a.prototype.createRoadSideItems=function(){this.roadSideItemsLeft=new Array,this.roadSideItemsRight=new Array;for(var a=1;5>=a;a++)for(var b=String(a),c=0;10>c;c++)this.roadSideItemsLeft.push({item:Game.displayStore.getSprite("road-side-element-"+b),active:!1,progress:0}),this.roadSideItemsRight.push({item:Game.displayStore.getSprite("road-side-element-"+b),active:!1,progress:0});this.shuffleArray(this.roadSideItemsLeft),this.shuffleArray(this.roadSideItemsRight)},a.prototype.setUpStartingItems=function(){for(var a=0;50>a;a++){var b=this.roadSideItemsLeft[a];b.active=!0,b.progress=5*a,this.scene.mainContainer.addChild(b.item)}for(var a=0;50>a;a++){var c=this.roadSideItemsRight[a];c.active=!0,c.progress=5*a,this.scene.mainContainer.addChild(c.item)}for(var a=0;10>a;a++){var d=this.items[a];d.progress=50*a,d.active=!0,this.scene.mainContainer.addChild(d.item)}for(var a=this.items.length-1;a>=0;a--){var d=this.items[a];1==d.active&&(this.scene.mainContainer.addChild(d.item),d.progress>=414&&(d.depthsswapped=!0,this.swapSceneryToRear(d.item)),d.progress>=this.tweenDuration&&this.recycleSceneryItem(d))}this.scene.triggerDepthSwap(),this.moveScenery()},a.prototype.shuffleArray=function(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a},a.prototype.tick=function(){this.scenerySpawnCounter++,this.scenerySpawnCounter>=this.scenerySpawnCounterLimit&&(this.scenerySpawnCounter=0,this.spawnSceneryItem()),this.roadSideSpawnCounter++,this.roadSideSpawnCounter>=this.roadSideSpawnCounterLimit&&(this.roadSideSpawnCounter=0,this.spawnRoadsideItem()),this.moveScenery()},a.prototype.moveScenery=function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];1==b.active&&(b.progress+=this.scenerySpeedFactor,"left"==b.side&&(this.leftPathBuildingTween.time(b.progress),b.item.position.x=this.leftPathPos.x,b.item.position.y=this.leftPathPos.y,this.angleBuildingTween.time(b.progress),b.item.rotation=this.angleBuildingPos.angle),"right"==b.side&&(this.rightPathBuildingTween.time(b.progress),b.item.position.x=this.rightPathPos.x,b.item.position.y=this.rightPathPos.y,this.angleBuildingTween.time(b.progress),b.item.rotation=-this.angleBuildingPos.angle),b.progress>=414&&1==b.active&&(b.depthsswapped=!0,this.swapSceneryToRear(b.item)),this.scaleBuildingTween.time(b.progress),b.item.scale.x=this.scaleBuildingPos.x*b.xScale,b.item.scale.y=this.scaleBuildingPos.y,b.progress>=this.tweenDuration&&this.recycleSceneryItem(b))}for(var a=0;a<this.roadSideItemsLeft.length;a++){var c=this.roadSideItemsLeft[a],d=this.roadSideItemsRight[a];1==c.active&&(c.progress+=this.scenerySpeedFactor,this.leftPathRoadsideTween.time(c.progress),c.item.position.x=this.leftPathRoadsidePos.x,c.item.position.y=this.leftPathRoadsidePos.y,d.item.position.x=Game.stageWidth-this.leftPathRoadsidePos.x,d.item.position.y=this.leftPathRoadsidePos.y,this.angleRoadsideTween.time(c.progress),c.item.rotation=this.anglePathPos.angle,d.item.rotation=-this.anglePathPos.angle,this.scaleRoadsideTween.time(c.progress),c.item.scale.x=this.scalePathPos.x,c.item.scale.y=this.scalePathPos.y,d.item.scale.x=this.scalePathPos.x,d.item.scale.y=this.scalePathPos.y,c.progress>=this.tweenDuration/2&&(this.recycleRoadsideItem(c),this.recycleRoadsideItem(d)))}},a.prototype.increaseDifficulty=function(a){this.scenerySpeedFactor=a,this.scenerySpawnCounterLimit=60/a},a.prototype.swapSceneryToRear=function(a){this.scene.outerContainer.addChild(a),this.scene.outerContainer.addChild(this.scene.spongebobHolder),this.scene.outerContainer.addChild(this.scene.spongebobBubblesFG),this.scene.outerContainer.addChild(this.scene.mainContainer)},a.prototype.recycleSceneryItem=function(a){this.scene.outerContainer.removeChild(a.item),a.active=!1},a.prototype.recycleRoadsideItem=function(a){this.scene.outerContainer.removeChild(a.item),a.active=!1},a.prototype.spawnSceneryItem=function(){for(var a=0;a<this.items.length;a++){var b=this.items[a];if(0==b.active){b.active=!0,b.progress=0,b.depthsswapped=!1,this.scene.mainContainer.addChild(b.item);break}}this.scene.triggerDepthSwap(),this.shuffleArray(this.items)},a.prototype.spawnRoadsideItem=function(){for(var a=0;a<this.roadSideItemsLeft.length;a++){var b=this.roadSideItemsLeft[a],c=this.roadSideItemsRight[a];if(0==b.active){b.active=!0,b.progress=0,this.scene.mainContainer.addChild(b.item),this.scene.mainContainer.addChild(c.item);break}}},a.prototype.destroy=function(){for(var a=0;a<this.items.length;a++)Game.displayStore.returnPooledItem(this.items[a].item),this.items[a].item.parent&&this.items[a].item.parent.removeChild(this.items[a].item);for(var a=0;a<this.roadSideItemsLeft.length;a++)Game.displayStore.returnPooledItem(this.roadSideItemsLeft[a].item),this.roadSideItemsLeft[a].item.parent&&this.roadSideItemsLeft[a].item.parent.removeChild(this.roadSideItemsLeft[a].item);for(var a=0;a<this.roadSideItemsRight.length;a++)Game.displayStore.returnPooledItem(this.roadSideItemsRight[a].item),this.roadSideItemsRight[a].item.parent&&this.roadSideItemsRight[a].item.parent.removeChild(this.roadSideItemsRight[a].item)},a}(),SlapHappyEnemyCharacter=function(){function a(a,b){this.enemyManager=a,this.scene=this.enemyManager.scene,this.id=b,this.characterActive=!1,this.preTellVisible=!1,this.tellTimes=[2.5,2,1.5,1,1,1,.5],this.currentCharacterState={left:"neutral",right:"neutral"},this.characterDrainedCurrently=!1,this.characterHolder=Game.displayStore.getContainer("enemy-character-holder"),this.characterHolder.position.x=0,this.characterHolder.position.y=0,this.characterArmHolderLeft=Game.displayStore.getContainer("enemy-character-arm-holder"),this.characterArmHolderRight=Game.displayStore.getContainer("enemy-character-arm-holder"),this.armLeftNeutral=Game.displayStore.getSprite("enemy-spongebob-neutral-arm"),this.armRightNeutral=Game.displayStore.getSprite("enemy-spongebob-neutral-arm"),this.armLeftAttacking=Game.displayStore.getSprite("enemy-spongebob-attacking-arm"),this.armRightAttacking=Game.displayStore.getSprite("enemy-spongebob-attacking-arm"),this.armLeftGrabbing=Game.displayStore.getSprite("enemy-spongebob-grabbing-arm"),this.armRightGrabbing=Game.displayStore.getSprite("enemy-spongebob-grabbing-arm"),this.characterKnockedOut=Game.displayStore.getSprite("enemy-spongebob-knocked-out"),this.characterLanding=Game.displayStore.getSprite("enemy-spongebob-landing"),this.stunnedParticleHolders=new Array,this.stunnedParticleHolders.push({holder:Game.displayStore.getContainer("stunned-animation-holder"),stars:[Game.displayStore.getSprite("stunned-particle"),Game.displayStore.getSprite("stunned-particle"),Game.displayStore.getSprite("stunned-particle")],timeline:null}),this.stunnedParticleHolders.push({holder:Game.displayStore.getContainer("stunned-animation-holder"),stars:[Game.displayStore.getSprite("stunned-particle"),Game.displayStore.getSprite("stunned-particle"),Game.displayStore.getSprite("stunned-particle")],timeline:null}),this.stunnedParticleHolders.push({holder:Game.displayStore.getContainer("stunned-animation-holder"),stars:[Game.displayStore.getSprite("stunned-particle"),Game.displayStore.getSprite("stunned-particle"),Game.displayStore.getSprite("stunned-particle")],timeline:null}),this.armRightAttacking.visible=!1,this.armRightGrabbing.visible=!1,this.armLeftAttacking.visible=!1,this.armLeftGrabbing.visible=!1,this.armLeftNeutral.setRegPoint(1,0),this.armLeftAttacking.setRegPoint(1,0),this.armLeftGrabbing.setRegPoint(1,0),this.armRightNeutral.setRegPoint(1,0),this.armRightAttacking.setRegPoint(1,0),this.armRightGrabbing.setRegPoint(1,0),this.characterHolder.addChild(this.characterLanding),this.characterVertPos=350,this.characterArmHolderLeft.addChild(this.armLeftNeutral),this.characterArmHolderLeft.addChild(this.armLeftAttacking),this.characterArmHolderLeft.addChild(this.armLeftGrabbing),this.characterArmHolderRight.addChild(this.armRightNeutral),this.characterArmHolderRight.addChild(this.armRightAttacking),this.characterArmHolderRight.addChild(this.armRightGrabbing),this.characterHolder.addChild(this.characterArmHolderLeft),this.characterHolder.addChild(this.characterArmHolderRight),this.resetLeftArmGraphic(),this.resetRightArmGraphic(),this.characterHolder.addChild(this.characterKnockedOut),this.characterKnockedOut.visible=!1,this.armRightNeutral.scale.x=-1,this.armRightAttacking.scale.x=-1,this.armRightGrabbing.scale.x=-1,"spongebob"==this.id&&(this.bodyNeutral=Game.displayStore.getSprite("enemy-spongebob-neutral"),this.bodySmackedLeft=Game.displayStore.getSprite("enemy-spongebob-smacked-left"),this.bodySmackedRight=Game.displayStore.getSprite("enemy-spongebob-smacked-right"),this.bodyReeling=Game.displayStore.getSprite("enemy-spongebob-reeling"),this.bodyGrabbing=Game.displayStore.getSprite("enemy-spongebob-grabbing"),this.bodyGrabbingEyeLeft=Game.displayStore.getSprite("enemy-spongebob-mad-eye"),this.bodyGrabbingEyeRight=Game.displayStore.getSprite("enemy-spongebob-mad-eye-right"),this.bodyPreTell=Game.displayStore.getSprite("enemy-spongebob-pre-tell"),this.characterHolder.addChild(this.bodyNeutral),this.characterHolder.addChild(this.bodySmackedLeft),this.characterHolder.addChild(this.bodySmackedRight),this.characterHolder.addChild(this.bodyReeling),this.characterHolder.addChild(this.bodyGrabbingEyeLeft),this.characterHolder.addChild(this.bodyGrabbingEyeRight),this.characterHolder.addChild(this.bodyGrabbing),this.characterHolder.addChild(this.bodyPreTell));for(var c=0;c<this.stunnedParticleHolders.length;c++){this.stunnedParticleHolders[c].holder.position.x=0,this.stunnedParticleHolders[c].holder.position.y=-500,this.characterHolder.addChild(this.stunnedParticleHolders[c].holder),this.stunnedParticleHolders[c].holder.visible=!1;for(var d=0;d<this.stunnedParticleHolders[c].stars.length;d++)this.stunnedParticleHolders[c].holder.addChild(this.stunnedParticleHolders[c].stars[d])}}return a.prototype.setDifficulty=function(a){this.currentDifficulty=a,this.currentDifficulty>this.tellTimes.length-1||(this.currentTellTime=this.tellTimes[this.currentDifficulty])},a.prototype.inGameTuteStage2=function(){this.setNeutralDelay=TweenMax.delayedCall(2,this.setNeutralCharacterStart,[this,!0,1])},a.prototype.popCharacter=function(a,b){this.enemyManager.elementHolder.addChild(this.characterHolder),this.characterActive=!0,this.restoreNeutralBody(this),this.changeArm(this,"left","neutral"),this.changeArm(this,"right","neutral"),this.updateCharacterState(this,"left","neutral"),this.updateCharacterState(this,"right","neutral"),this.bodyGrabbingEyeLeft.position.x=-65,this.bodyGrabbingEyeLeft.position.y=-310,this.bodyGrabbingEyeRight.position.x=63,this.bodyGrabbingEyeRight.position.y=-310,this.characterHolder.position.x=0,this.characterHolder.position.y=700,this.characterKnockedOut.position.x=0,this.characterKnockedOut.position.y=0,this.characterKnockedOut.visible=!1,this.characterLanding.position.y=-200,this.characterLanding.position.x=0,this.characterLanding.scale.x=1,this.characterLanding.scale.y=1,this.characterLanding.visible=!1,this.appearTween=new TweenMax(this.characterHolder.position,.5,{y:this.characterVertPos,ease:Back.easeOut,onComplete:this.setNeutralStart,onCompleteParams:[this,a,b,0]})},a.prototype.endInGameTute=function(){this.killTimers(this),this.changeArm(this,"left","neutral"),this.changeArm(this,"right","neutral"),this.characterHolder.position.x=0,this.characterHolder.position.y=this.characterVertPos,this.setNeutralStart(this,1,!1,0),this.restoreNeutralBody(this)},a.prototype.resetLeftArmGraphic=function(){this.characterArmHolderLeft.position.x=-150,this.characterArmHolderLeft.position.y=-300,this.characterArmHolderLeft.scale.x=1,this.characterArmHolderLeft.scale.y=1},a.prototype.resetRightArmGraphic=function(){this.characterArmHolderRight.position.x=150,this.characterArmHolderRight.position.y=-300,this.characterArmHolderRight.scale.x=1,this.characterArmHolderRight.scale.y=1},a.prototype.setNeutralStart=function(a,b,c,d){a.setNeutralDelay&&a.setNeutralDelay.kill(),a.setNeutralDelay=TweenMax.delayedCall(b,a.setNeutralCharacterStart,[a,c,d]),a.updateCharacterState(a,"left","neutral"),a.updateCharacterState(a,"right","neutral"),a.idleBopTimeline&&a.idleBopTimeline.kill(),a.idleBopTimeline=new TimelineMax;var e=Game.getRandom(-10,10),f=Game.getRandom(-10,10),g=Game.getRandom(1/(a.currentDifficulty+1),2/(a.currentDifficulty+1)),h=Game.getRandom(1/(a.currentDifficulty+1),2/(a.currentDifficulty+1)),i=Game.getRandom(-.1,.1),j=Game.getRandom(1/(a.currentDifficulty+1),2/(a.currentDifficulty+1));a.idleBopTimeline.add([TweenMax.to(a.characterHolder.position,g,{x:e,ease:Sine.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(a.characterHolder.position,h,{y:a.characterVertPos+f,ease:Sine.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(a.characterHolder,j,{rotation:i,ease:Sine.easeInOut,yoyo:!0,repeat:-1})],0)},a.prototype.setNeutralCharacterStart=function(a,b,c){0==b?(a.setNeutralLeft(a),a.setNeutralRight(a)):(a.setPreTellBody(a),a.startInGameTuteMoveset(a,c))},a.prototype.startInGameTuteMoveset=function(a,b){0==b?(a.leftAttack(a,!1,!0),a.updateCharacterState(a,"left","real-tell")):1==b&&(a.rightFakeTell(a,!0),a.updateCharacterState(a,"right","fake-tell"))},a.prototype.setNeutralRight=function(a){var b=Game.getRandom(.1,1);a.beginRightHitDelay&&a.beginRightHitDelay.kill(),a.beginRightHitDelay=TweenMax.delayedCall(b,a.decideTell,[a,"right"])},a.prototype.setNeutralLeft=function(a){var b=Game.getRandom(.1,1);a.beginLeftHitDelay&&a.beginLeftHitDelay.kill(),a.beginLeftHitDelay=TweenMax.delayedCall(b,a.decideTell,[a,"left"])},a.prototype.decideTell=function(a,b){var c=Game.getRandom(0,1);.5>c?"left"==b?(a.beginLeftHitDelay.kill(),"fake-tell"!=a.currentCharacterState.left&&"real-tell"!=a.currentCharacterState.left&&"reeling"!=a.currentCharacterState.left||a.setNeutralLeft(a),a.showPreTell(a,b)):"right"==b&&(a.beginRightHitDelay.kill(),"fake-tell"!=a.currentCharacterState.right&&"real-tell"!=a.currentCharacterState.right&&"reeling"!=a.currentCharacterState.right||a.setNeutralRight(a),a.showPreTell(a,b)):"left"==b?a.setNeutralLeft(a):"right"==b&&a.setNeutralRight(a)},a.prototype.showPreTell=function(a,b){"grabbing"!=a.currentCharacterState.left&&"grabbing"!=a.currentCharacterState.right&&a.setPreTellBody(a),"left"==b&&(a.preTellDelayLeft&&a.preTellDelayLeft.kill(),a.preTellDelayLeft=TweenMax.delayedCall(.4,a.showTell,[a,b])),"right"==b&&(a.preTellDelayRight&&a.preTellDelayRight.kill(),a.preTellDelayRight=TweenMax.delayedCall(.4,a.showTell,[a,b]))},a.prototype.showTell=function(a,b){var c=!1;Game.getRandom(0,1)<.5&&(c=!0),"left"==b?(a.beginLeftHitDelay.kill(),1==c?(a.leftFakeTell(a),a.updateCharacterState(a,"left","fake-tell")):(a.leftAttack(a,!1,!1),a.updateCharacterState(a,"left","real-tell"))):"right"==b&&(a.beginRightHitDelay.kill(),1==c?(a.rightFakeTell(a,!1),a.updateCharacterState(a,"right","fake-tell")):(a.rightAttack(a,!1),a.updateCharacterState(a,"right","real-tell")))},a.prototype.leftFakeTell=function(a){a.leftTellTimeline&&a.leftTellTimeline.kill(),a.leftTellTimeline=new TimelineMax({onComplete:a.endFakeTell,onCompleteParams:[a,"left",!1]});var b=a.currentTellTime/4;a.leftTellTimeline.add([TweenMax.to(a.characterArmHolderLeft.scale,b,{x:1.25,y:1.25,ease:Sine.easeOut,yoyo:!0,repeat:1}),TweenMax.to(a.characterArmHolderLeft.position,b,{x:-130,ease:Sine.easeOut,yoyo:!0,repeat:1})])},a.prototype.endFakeTell=function(a,b,c){"left"==b?(a.updateCharacterState(a,"left","neutral"),a.setNeutralLeft(a)):"right"==b&&(a.updateCharacterState(a,"right","neutral"),1==c?(a.scene.progressInGameTute(a.scene,2),a.updateCharacterState(a,"left","neutral"),a.updateCharacterState(a,"right","neutral")):a.setNeutralRight(a)),a.restoreNeutralBody(a)},a.prototype.leftAttack=function(a,b,c){var d,e,f;0==b?(d="attacking",e=a.currentTellTime/4,f=3*e):(d="countering",e=.25,f=.3),a.leftAttackTimeline&&a.leftAttackTimeline.kill(),a.leftAttackTimeline=new TimelineMax,a.leftAttackTimeline.add([TweenMax.to(a.characterArmHolderLeft.scale,e,{x:1.25,y:1.25,ease:Sine.easeOut}),TweenMax.to(a.characterArmHolderLeft.position,e,{x:-130,ease:Sine.easeOut})]),a.leftAttackTimeline.call(a.changeArm,[a,"left",d,"first part attack left"]),a.leftAttackTimeline.add([TweenMax.to(a.characterArmHolderLeft.scale,f,{x:1.3,y:1.3,ease:Sine.easeIn}),TweenMax.to(a.characterArmHolderLeft.position,f,{x:-100,ease:Sine.easeIn})],e),0==c?a.leftAttackTimeline.call(a.changeArm,[a,"left","grabbing","second part attack left"],e+f):a.leftAttackTimeline.call(a.inGameTuteProgress,[a,0],e+f)},a.prototype.inGameTuteProgress=function(a,b){a.scene.progressInGameTute(a.scene,b)},a.prototype.rightFakeTell=function(a,b){a.rightTellTimeline&&a.rightTellTimeline.kill(),a.rightTellTimeline=new TimelineMax({onComplete:a.endFakeTell,onCompleteParams:[a,"right",b]});var c=a.currentTellTime/4,d=1;1==b&&(d=5),a.rightTellTimeline.add([TweenMax.to(a.characterArmHolderRight.scale,c,{x:1.25,y:1.25,ease:Sine.easeOut,yoyo:!0,repeat:d}),TweenMax.to(a.characterArmHolderRight.position,c,{x:130,ease:Sine.easeOut,yoyo:!0,repeat:d})])},a.prototype.rightAttack=function(a,b){var c,d=a.currentTellTime/4,e=3*d;0==b?(c="attacking",d=a.currentTellTime/4,e=3*d):(c="countering",d=.25,e=.3),a.rightAttackTimeline&&a.rightAttackTimeline.kill(),a.rightAttackTimeline=new TimelineMax,a.rightAttackTimeline.add([TweenMax.to(a.characterArmHolderRight.scale,d,{x:1.25,y:1.25,ease:Sine.easeOut}),TweenMax.to(a.characterArmHolderRight.position,d,{x:130,ease:Sine.easeOut})]),a.rightAttackTimeline.call(a.changeArm,[a,"right",c]),a.rightAttackTimeline.add([TweenMax.to(a.characterArmHolderRight.scale,e,{x:1.3,y:1.3,ease:Sine.easeIn}),TweenMax.to(a.characterArmHolderRight.position,e,{x:100,ease:Sine.easeIn})],d),a.rightAttackTimeline.call(a.changeArm,[a,"right","grabbing"],d+e)},a.prototype.changeArm=function(a,b,c){"left"==b&&("neutral"==c?(a.characterArmHolderLeft.visible=!0,a.armLeftNeutral.visible=!0,a.armLeftAttacking.visible=!1,a.armLeftGrabbing.visible=!1,a.characterArmHolderLeft.scale.x=1,a.characterArmHolderLeft.scale.y=1,a.characterArmHolderLeft.position.x=-130,a.characterArmHolderLeft.position.y=-240):"attacking"==c?(a.updateCharacterState(a,"left","attacking"),a.armLeftNeutral.visible=!1,a.armLeftAttacking.visible=!0,a.armLeftGrabbing.visible=!1):"grabbing"==c&&(a.updateCharacterState(a,"left","grabbing"),a.armLeftNeutral.visible=!1,a.armLeftAttacking.visible=!1,a.armLeftGrabbing.visible=!0,a.startGrabbing(a),a.leftAttackTimeline=null)),"right"==b&&("neutral"==c?(a.characterArmHolderRight.visible=!0,a.armRightNeutral.visible=!0,a.armRightAttacking.visible=!1,a.armRightGrabbing.visible=!1,a.characterArmHolderRight.scale.x=1,a.characterArmHolderRight.scale.y=1,a.characterArmHolderRight.position.x=130,a.characterArmHolderRight.position.y=-240):"attacking"==c?(a.armRightNeutral.visible=!1,a.armRightAttacking.visible=!0,a.armRightGrabbing.visible=!1,a.updateCharacterState(a,"right","attacking")):"grabbing"==c&&(a.armRightNeutral.visible=!1,a.armRightAttacking.visible=!1,a.armRightGrabbing.visible=!0,a.updateCharacterState(a,"right","grabbing"),a.startGrabbing(a),a.rightAttackTimeline=null))},a.prototype.attackBlocked=function(a,b){var c=1;this.updateCharacterState(this,a,"reeling"),this.setReelingBody(this),
this.switchBackToNeutralDelay=TweenMax.delayedCall(c,this.restoreNeutralBody,[this]),"left"==a?(this.leftAttackTimeline&&this.leftAttackTimeline.kill(),this.leftAttackTimeline=null,0==b&&(this.afterBlockLeftDelay=TweenMax.delayedCall(c,this.afterBlockReset,[this,a]))):"right"==a&&(this.rightAttackTimeline&&this.rightAttackTimeline.kill(),this.rightAttackTimeline=null,0==b&&(this.afterBlockRightDelay=TweenMax.delayedCall(c,this.afterBlockReset,[this,a]))),this.changeArm(this,a,"neutral")},a.prototype.counterAttack=function(a){"left"==a?(this.leftTellTimeline&&this.leftTellTimeline.kill(),this.leftTellTimeline=null):"right"==a&&(this.rightTellTimeline&&this.rightTellTimeline.kill(),this.rightTellTimeline=null),this.updateCharacterState(this,a,"countering"),this.changeArm(this,a,"neutral"),this.counterAttackDelay=TweenMax.delayedCall(.2,this.beginCounterAttack,[this,a])},a.prototype.beenHit=function(a){this.switchToHitDelay=TweenMax.delayedCall(.2,this.setHitBody,[this,a]),this.switchBackToNeutralDelay=TweenMax.delayedCall(.6,this.restoreNeutralBody,[this])},a.prototype.enemyLastHit=function(){this.killTimers(this),this.updateCharacterState(this,"left","knockoutblow"),this.updateCharacterState(this,"right","knockoutblow")},a.prototype.setHitBody=function(a,b){"left"==b&&(a.bodySmackedLeft.visible=!0),"right"==b&&(a.bodySmackedRight.visible=!0),a.bodyNeutral.visible=!1},a.prototype.restoreNeutralBody=function(a){var b=!1;"grabbing"!=a.currentCharacterState.left&&"grabbing"!=a.currentCharacterState.right||(b=!0),0==b?(a.bodySmackedLeft.visible=!1,a.bodySmackedRight.visible=!1,a.bodyNeutral.visible=!0,a.bodyReeling.visible=!1,a.bodyGrabbing.visible=!1,a.bodyGrabbingEyeLeft.visible=!1,a.bodyGrabbingEyeRight.visible=!1,a.bodyPreTell.visible=!1,a.preTellVisible=!1):(a.bodySmackedLeft.visible=!1,a.bodySmackedRight.visible=!1,a.bodyNeutral.visible=!1,a.bodyReeling.visible=!1,a.bodyGrabbing.visible=!0,a.bodyGrabbingEyeLeft.visible=!0,a.bodyGrabbingEyeRight.visible=!0,a.bodyPreTell.visible=!1)},a.prototype.setPreTellBody=function(a){a.bodySmackedLeft.visible=!1,a.bodySmackedRight.visible=!1,a.bodyNeutral.visible=!1,a.bodyReeling.visible=!1,a.bodyGrabbing.visible=!1,a.bodyGrabbingEyeLeft.visible=!1,a.bodyGrabbingEyeRight.visible=!1,a.bodyPreTell.visible=!0},a.prototype.setReelingBody=function(a){a.bodySmackedLeft.visible=!1,a.bodySmackedRight.visible=!1,a.bodyNeutral.visible=!1,a.bodyReeling.visible=!0,a.bodyGrabbing.visible=!1,a.bodyGrabbingEyeLeft.visible=!1,a.bodyGrabbingEyeRight.visible=!1,a.bodyPreTell.visible=!1},a.prototype.startGrabbing=function(a){a.setGrabbingBody(a),a.enemyManager.playerGrabbed(),a.eyeRotateTimeline&&a.eyeRotateTimeline.kill(),a.eyeTimelinePlaying=!1,a.eyeRotateTimeline=new TimelineMax,a.bodyGrabbingEyeLeft.rotation=0,a.bodyGrabbingEyeRight.rotation=0,0==a.eyeTimelinePlaying&&(a.eyeRotateTimeline.add([TweenMax.to(a.bodyGrabbingEyeLeft,1,{rotation:2*Math.PI,repeat:-1,ease:Linear.easeNone}),TweenMax.to(a.bodyGrabbingEyeRight,1,{rotation:2*Math.PI,repeat:-1,ease:Linear.easeNone})],0),a.eyeTimelinePlaying=!0)},a.prototype.setGrabbingBody=function(a){a.bodySmackedLeft.visible=!1,a.bodySmackedRight.visible=!1,a.bodyNeutral.visible=!1,a.bodyReeling.visible=!1,a.bodyGrabbing.visible=!0,a.bodyGrabbingEyeLeft.visible=!0,a.bodyGrabbingEyeRight.visible=!0,a.bodyPreTell.visible=!1},a.prototype.beginCounterAttack=function(a,b){"left"==b?a.leftAttack(a,!0,!1):"right"==b&&a.rightAttack(a,!0)},a.prototype.afterBlockReset=function(a,b){a.updateCharacterState(a,b,"neutral"),"left"==b?a.setNeutralLeft(a):"right"==b&&a.setNeutralRight(a)},a.prototype.updateCharacterState=function(a,b,c){a.currentCharacterState[b]=c,a.enemyManager.setCurrentCharacterState(b,c)},a.prototype.characterDrained=function(){this.killTimers(this),this.characterDrainedCurrently=!0,this.changeArm(this,"left","neutral"),this.changeArm(this,"right","neutral"),this.updateCharacterState(this,"left","drained"),this.updateCharacterState(this,"right","drained"),this.setReelingBody(this),this.startStunAnimation(),this.secondWindDelay&&this.secondWindDelay.kill(),this.secondWindDelay=TweenMax.delayedCall(4,this.startSecondWind,[this])},a.prototype.startStunAnimation=function(){var a=new Array;a.push({x:200,y:0}),a.push({x:0,y:60}),a.push({x:-200,y:0}),a.push({x:0,y:-60}),this.stunnedParticleHolders[0].holder.rotation=-.1,this.stunnedParticleHolders[1].holder.rotation=0,this.stunnedParticleHolders[2].holder.rotation=.1;for(var b=0;b<this.stunnedParticleHolders.length;b++){this.stunnedParticleHolders[b].holder.visible=!0,this.stunnedParticleHolders[b].timeline&&this.stunnedParticleHolders[b].timeline.kill(),this.stunnedParticleHolders[b].timeline=new TimelineMax;for(var c=0;c<this.stunnedParticleHolders[b].stars.length;c++){this.stunnedParticleHolders[b].stars[c].position.x=0,this.stunnedParticleHolders[b].stars[c].position.y=-60,this.stunnedParticleHolders[b].stars[c].alpha=Game.getRandom(.3,1);var d=Game.getRandom(.5,1.5);this.stunnedParticleHolders[b].stars[c].scale.x=d,this.stunnedParticleHolders[b].stars[c].scale.y=d,this.stunnedParticleHolders[b].timeline.add([TweenMax.to(this.stunnedParticleHolders[b].stars[c],Game.getRandom(1,2),{rotation:2*Math.PI,repeat:-1,ease:Linear.easeNone}),TweenMax.to(this.stunnedParticleHolders[b].stars[c].position,Game.getRandom(1,2),{bezier:a,ease:Linear.easeNone,repeat:-1,type:"quadratic"})],0),this.stunnedParticleHolders[b].timeline.time(Game.getRandom(0,2))}}},a.prototype.startSecondWind=function(a){a.setNeutralStart(a,.1,!1,0),a.scene.setSecondWind();for(var b=0;b<a.stunnedParticleHolders.length;b++)a.stunnedParticleHolders[b].holder.visible=!1,a.stunnedParticleHolders[b].timeline.kill()},a.prototype.killTimers=function(a){TweenMax.killDelayedCallsTo(a.restoreNeutralBody),TweenMax.killDelayedCallsTo(a.afterBlockReset),TweenMax.killDelayedCallsTo(a.beginCounterAttack),TweenMax.killDelayedCallsTo(a.startSecondWind),TweenMax.killDelayedCallsTo(a.decideTell),TweenMax.killDelayedCallsTo(a.setNeutralCharacterStart),a.appearTween&&a.appearTween.kill(),a.setNeutralDelay&&a.setNeutralDelay.kill(),a.beginLeftHitDelay&&a.beginLeftHitDelay.kill(),a.beginRightHitDelay&&a.beginRightHitDelay.kill(),a.afterBlockLeftDelay&&a.afterBlockLeftDelay.kill(),a.afterBlockRightDelay&&a.afterBlockRightDelay.kill(),a.switchBackToNeutralDelay&&a.switchBackToNeutralDelay.kill(),a.switchToHitDelay&&a.switchToHitDelay.kill(),a.leftTellTimeline&&a.leftTellTimeline.kill(),a.rightTellTimeline&&a.rightTellTimeline.kill(),a.leftAttackTimeline&&a.leftAttackTimeline.kill(),a.rightAttackTimeline&&a.rightAttackTimeline.kill(),a.dodgeTimeline&&a.dodgeTimeline.kill(),a.counterAttackDelay&&a.counterAttackDelay.kill(),a.preTellDelayLeft&&a.preTellDelayLeft.kill(),a.preTellDelayRight&&a.preTellDelayRight.kill(),a.knockOutTimeline&&a.knockOutTimeline.kill(),a.knockOutDelay&&a.knockOutDelay.kill(),a.secondWindDelay&&a.secondWindDelay.kill(),a.idleBopTimeline&&a.idleBopTimeline.kill(),a.appearTween=null,a.setNeutralDelay=null,a.beginLeftHitDelay=null,a.beginRightHitDelay=null,a.afterBlockLeftDelay=null,a.afterBlockRightDelay=null,a.switchBackToNeutralDelay=null,a.switchToHitDelay=null,a.leftTellTimeline=null,a.rightTellTimeline=null,a.leftAttackTimeline=null,a.rightAttackTimeline=null,a.dodgeTimeline=null,a.counterAttackDelay=null,a.preTellDelayLeft=null,a.preTellDelayRight=null,a.knockOutTimeline=null,a.knockOutDelay=null,a.secondWindDelay=null,a.idleBopTimeline=null},a.prototype.breakHold=function(a){this.eyeRotateTimeline.kill(),this.eyeTimelinePlaying=!1,this.attackBlocked(a,!1)},a.prototype.knockOut=function(a){this.secondWindDelay&&this.secondWindDelay.kill(),TweenMax.killDelayedCallsTo(this.startSecondWind),this.updateCharacterState(this,"left","dead"),this.updateCharacterState(this,"right","dead"),this.knockOutDelay&&this.knockOutDelay.kill(),this.knockOutDelay=TweenMax.delayedCall(.5,this.knockOutCharacter,[this,a])},a.prototype.knockOutCharacter=function(a,b){var c;"left"==b?c=300:"right"==b&&(c=-300),a.characterDrainedCurrently=!1,a.characterLanding.visible=!0,a.characterLanding.alpha=1,a.characterLanding.position.x=0,a.characterLanding.position.y=-800,a.bodySmackedLeft.visible=!1,a.bodySmackedRight.visible=!1,a.bodyNeutral.visible=!1,a.bodyReeling.visible=!1,a.bodyGrabbing.visible=!1,a.bodyGrabbingEyeLeft.visible=!1,a.bodyGrabbingEyeRight.visible=!1,a.bodyPreTell.visible=!1,a.characterArmHolderLeft.visible=!1,a.characterArmHolderRight.visible=!1,a.characterKnockedOut.visible=!0,a.knockOutTimeline&&a.knockOutTimeline.kill(),a.knockOutTimeline=new TimelineMax({onComplete:a.resetThisCharacter,onCompleteParams:[a]}),a.knockOutTimeline.add([TweenMax.to(a.characterKnockedOut.position,.7,{y:-1200,ease:Expo.easeOut})]),a.knockOutTimeline.add([TweenMax.to(a.characterLanding.position,1.5,{x:c,y:200,ease:Quad.easeOut}),TweenMax.to(a.characterLanding.position,1.5,{y:-200,ease:Linear.easeNone}),TweenMax.to(a.characterLanding.scale,1.5,{y:.2,x:.2,ease:Quad.easeOut}),TweenMax.to(a.characterLanding,1.5,{alpha:0,ease:Linear.easeNone})],1.2);for(var d=0;d<a.stunnedParticleHolders.length;d++)a.stunnedParticleHolders[d].holder.visible=!1,a.stunnedParticleHolders[d].timeline.kill()},a.prototype.resetThisCharacter=function(a){a.enemyManager.resetCharacter(a),a.characterKnockedOut.visible=!1},a.prototype.tick=function(){},a.prototype.pause=function(){this.currentCharacterStatePause=this.currentCharacterState,this.pauseResumeAllTweens("pause")},a.prototype.resume=function(){this.pauseResumeAllTweens("resume")},a.prototype.pauseResumeAllTweens=function(a){this.scene.pauseResumeTween(this.appearTween,a),this.scene.pauseResumeTween(this.beginLeftHitDelay,a,"left hit delay.."),this.scene.pauseResumeTween(this.beginRightHitDelay,a,"right hit delay.."),this.scene.pauseResumeTween(this.afterBlockLeftDelay,a),this.scene.pauseResumeTween(this.afterBlockRightDelay,a),this.scene.pauseResumeTween(this.switchBackToNeutralDelay,a),this.scene.pauseResumeTween(this.switchToHitDelay,a),this.scene.pauseResumeTween(this.leftTellTimeline,a),this.scene.pauseResumeTween(this.rightTellTimeline,a),this.scene.pauseResumeTween(this.leftAttackTimeline,a,"left attack..."),this.scene.pauseResumeTween(this.rightAttackTimeline,a,"right attack..."),this.scene.pauseResumeTween(this.dodgeTimeline,a),this.scene.pauseResumeTween(this.counterAttackDelay,a),this.scene.pauseResumeTween(this.preTellDelayLeft,a),this.scene.pauseResumeTween(this.preTellDelayRight,a),this.scene.pauseResumeTween(this.knockOutTimeline,a),this.scene.pauseResumeTween(this.knockOutDelay,a),this.scene.pauseResumeTween(this.idleBopTimeline,a),this.scene.pauseResumeTween(this.setNeutralDelay,a),1==this.characterDrainedCurrently&&"pause"==a?this.secondWindDelay.kill():1==this.characterDrainedCurrently&&"resume"==a&&(this.secondWindDelay&&this.secondWindDelay.kill(),this.secondWindDelay=TweenMax.delayedCall(4,this.startSecondWind,[this]));for(var b=0;b<this.stunnedParticleHolders.length;b++)this.stunnedParticleHolders[b].timeline&&this.scene.pauseResumeTween(this.stunnedParticleHolders[b].timeline,a)},a.prototype.destroy=function(){this.bodySmackedLeft.visible=!1,this.bodySmackedRight.visible=!1,this.bodyNeutral.visible=!1,this.bodyReeling.visible=!1,this.bodyGrabbing.visible=!1,this.bodyGrabbingEyeLeft.visible=!1,this.bodyGrabbingEyeRight.visible=!1,this.bodyPreTell.visible=!1,this.characterArmHolderLeft.visible=!1,this.characterArmHolderRight.visible=!1,this.killTimers(this),Game.displayStore.returnPooledItem(this.characterHolder),Game.displayStore.returnPooledItem(this.characterArmHolderLeft),Game.displayStore.returnPooledItem(this.characterArmHolderRight),Game.displayStore.returnPooledItem(this.armLeftNeutral),Game.displayStore.returnPooledItem(this.armRightNeutral),Game.displayStore.returnPooledItem(this.armLeftAttacking),Game.displayStore.returnPooledItem(this.armRightAttacking),Game.displayStore.returnPooledItem(this.armLeftGrabbing),Game.displayStore.returnPooledItem(this.armRightGrabbing),Game.displayStore.returnPooledItem(this.characterKnockedOut),Game.displayStore.returnPooledItem(this.characterLanding),Game.displayStore.returnPooledItem(this.bodyNeutral),Game.displayStore.returnPooledItem(this.bodySmackedLeft),Game.displayStore.returnPooledItem(this.bodySmackedRight),Game.displayStore.returnPooledItem(this.bodyReeling),Game.displayStore.returnPooledItem(this.bodyGrabbing),Game.displayStore.returnPooledItem(this.bodyGrabbingEyeLeft),Game.displayStore.returnPooledItem(this.bodyGrabbingEyeRight),Game.displayStore.returnPooledItem(this.bodyPreTell);for(var a=0;a<this.stunnedParticleHolders.length;a++){Game.displayStore.returnPooledItem(this.stunnedParticleHolders[a].holder),this.stunnedParticleHolders[a].timeline&&this.stunnedParticleHolders[a].timeline.kill();for(var b=0;b<this.stunnedParticleHolders[a].stars.length;b++)Game.displayStore.returnPooledItem(this.stunnedParticleHolders[a].stars[b])}},a}(),SlapHappyHealthManager=function(){function a(a){this.scene=a,this.initialised=!1,this.drainAmount=0,this.paused=!1,this.playerHealthAnimOn=!1,this.currentDrainLevel=0,this.enemyHealthStartPos=-50,this.playerHealthStartPos=Game.stageHeight+150,this.playerHealthParticleHolder=Game.displayStore.getContainer("large-health-particle-holder"),this.playerHealthParticleHolderRecharge=Game.displayStore.getContainer("combo-health-recharge-particle-holder"),this.playerHealthCircle=this.playerHealthParticleHolder.getSprite("player-health-circle"),this.playerHealthCircle.blendMode=PIXI.BLEND_MODES.ADD,this.playerHealthCircle.scale.x=this.playerHealthCircle.scale.y=2,this.playerHealthCircle.alpha=.75,this.playerHealthParticles=new Array,this.playerHealthParticlesRecharge=new Array,this.enemyHealthParticleHolder=Game.displayStore.getContainer("enemy-health-particle-holder"),this.enemyHealthParticleHolder.position.x=-100,this.enemyHealthParticles=new Array;for(var b=0;4>b;b++)for(var c="enemy-health-particle-"+String(b),d=0;10>d;d++)this.enemyHealthParticles.push({sprite:Game.displayStore.getSprite(c),active:!1,timeline:null});for(var e=0;4>e;e++)for(var f="large-health-particle-"+String(e),g=Game.displayStore.getSprite(f),h=0;10>h;h++)this.playerHealthParticles.push(g);for(var i=0;4>i;i++){var j="large-health-particle-"+String(i),k=Game.displayStore.getSprite(j);k.alpha=.8;for(var l=0;4>l;l++)this.playerHealthParticlesRecharge.push(k)}this.shuffleArray(this.enemyHealthParticles),this.particleColours=new Array,this.particleColours.push(15458816),this.particleColours.push(11586344),this.particleColours.push(40049),this.particleColours.push(32420),this.particleColours.push(14886022),this.particleColours.push(13503069),this.particleColours.push(15423357);for(var b=0;b<this.enemyHealthParticles.length;b++)this.enemyHealthParticles[b].sprite.tint=15061582,this.enemyHealthParticleHolder.addChild(this.enemyHealthParticles[b].sprite),this.enemyHealthParticles[b].sprite.blendMode=PIXI.BLEND_MODES.ADD,this.enemyHealthParticles[b].sprite.visible=!1;for(var m=0;m<this.playerHealthParticles.length;m++)this.playerHealthParticles[m].tint=6479988,this.playerHealthParticleHolder.addChild(this.playerHealthParticles[m]),this.playerHealthParticles[m].blendMode=PIXI.BLEND_MODES.ADD,this.playerHealthParticleHolder.visible=!1;for(var n=0;n<this.playerHealthParticlesRecharge.length;n++)this.playerHealthParticlesRecharge[n].tint=6479988,this.playerHealthParticleHolderRecharge.addChild(this.playerHealthParticlesRecharge[n]),this.playerHealthParticlesRecharge[n].blendMode=PIXI.BLEND_MODES.ADD,this.playerHealthParticleHolderRecharge.visible=!1;this.enemyHealthContainer=Game.displayStore.getContainer("enemy-health-meter-holder"),this.enemyHealthBarBG=this.enemyHealthContainer.getSprite("enemy-health-bar-bg"),this.enemyHealthBarMeter=this.enemyHealthContainer.getSprite("enemy-health-bar-fill"),this.playerHealthContainer=Game.displayStore.getContainer("player-health-meter-holder"),this.playerHealthBarBG=this.playerHealthContainer.getSprite("player-health-bar-bg"),this.playerHealthBarMeter=this.playerHealthContainer.getSprite("player-health-bar-fill"),this.enemyHealthOrigWidth=this.enemyHealthBarMeter.width,this.playerHealthOrigWidth=this.playerHealthBarMeter.width,this.enemyHealthBarMeter.position.x=(this.enemyHealthBarBG.width-this.enemyHealthBarMeter.width)/2,this.enemyHealthBarMeter.position.y=(this.enemyHealthBarBG.height-this.enemyHealthBarMeter.height)/2,this.enemyHealthContainer.position.x=Game.stageWidth/2-this.enemyHealthBarBG.width/2,this.enemyHealthContainer.position.y=this.enemyHealthStartPos,this.playerHealthBarMeter.position.x=(this.playerHealthBarBG.width-this.playerHealthBarMeter.width)/2,this.playerHealthContainer.position.x=Game.stageWidth/2-this.playerHealthBarBG.width/2,this.playerHealthContainer.position.y=this.playerHealthStartPos,this.scene.container.addChild(this.enemyHealthContainer),this.scene.container.addChild(this.enemyHealthParticleHolder),this.scene.container.addChild(this.playerHealthContainer),this.scene.container.addChild(this.playerHealthParticleHolder),this.scene.container.addChild(this.playerHealthParticleHolderRecharge),this.resizePlayerHealthBar()}return a.prototype.showEnemyHealthMeter=function(a,b){this.showEnemyHealthTimeline&&this.showEnemyHealthTimeline.kill(),this.showEnemyHealthTimeline=new TimelineMax({delay:a}),this.showEnemyHealthTimeline.add([TweenMax.to(this.enemyHealthContainer,1,{y:100,ease:Back.easeOut})]),0==b&&(this.currentEnemyHealth=100,this.enemyHealthBarMeter.width=this.enemyHealthOrigWidth),this.resizeEnemyHealthBar(!0)},a.prototype.showPlayerHealthMeter=function(a){this.showPlayerHealthTimeline&&this.showPlayerHealthTimeline.kill(),this.showPlayerHealthTimeline=new TimelineMax({delay:a}),this.showPlayerHealthTimeline.add([TweenMax.to(this.playerHealthContainer,1,{y:Game.stageHeight,ease:Sine.easeOut})]),this.playerHealth=100,this.initialised=!0},a.prototype.beginHealthDrain=function(a){this.currentDrainLevel=a,this.drainAmount=a/10,this.beginPlayerHealthParticles()},a.prototype.beginPlayerHealthParticles=function(){1!=this.playerHealthAnimOn&&(this.playerHealthAnimOn=!0,this.createPlayerHealthParticleTimeline(this),this.playerHealthParticleHolder.visible=!0,this.playerHealthParticleHolder.alpha=1,this.playerHealthParticleHolder.position.x=this.playerHealthContainer.position.x+this.playerHealthBarMeter.width,this.playerHealthParticleHolder.position.y=Game.stageHeight-25)},a.prototype.createPlayerHealthParticleTimeline=function(a){a.playerParticleTimeline&&a.playerParticleTimeline.kill(),a.playerParticleTimeline=new TimelineMax({onComplete:a.createPlayerHealthParticleTimeline,onCompleteParams:[a]});for(var b=0;b<a.playerHealthParticles.length;b++){var c=a.playerHealthParticles[b];Game.getRandom(1,3);c.scale.x=1,c.scale.y=1,c.alpha=1,c.position.x=0,c.position.y=0;var d=Game.getRandom(-150,150),e=Game.getRandom(-150,150);a.playerParticleTimeline.add([TweenMax.to(c,.2,{rotation:Game.getRandom(10,360),ease:Sine.easeInOut,delay:0}),TweenMax.to(c.scale,.2,{x:0,y:0,ease:Sine.easeInOut,delay:0}),TweenMax.to(c.position,.2,{x:d,y:e,ease:Sine.easeInOut,delay:0})],.005*b)}},a.prototype.checkDrainLevel=function(a){return 0==a?void(this.drainAmount=0):void(a!=this.currentDrainLevel&&(this.currentDrainLevel=a))},a.prototype.enemySlapped=function(a){0==a?this.reduceEnemyHealth(15):1==a&&this.reduceEnemyHealth(100)},a.prototype.enemyBlocked=function(a){var b;b=1==a?20:5,this.currentEnemyHealth-=b,this.currentEnemyHealth<=0&&(this.enemyDrained(),this.currentEnemyHealth=0),this.resizeEnemyHealthBar(!1)},a.prototype.reduceEnemyHealth=function(a){this.currentEnemyHealth-=a,this.currentEnemyHealth<=0&&(this.enemyDrained(),this.currentEnemyHealth=0),this.resizeEnemyHealthBar(!1)},a.prototype.enemyDrained=function(){this.removeEnemyHealthTimeline&&this.removeEnemyHealthTimeline.kill(),this.removeEnemyHealthTimeline=new TimelineMax,this.removeEnemyHealthTimeline.add([TweenMax.to(this.enemyHealthContainer,.5,{y:-100,ease:Expo.easeOut})],.2),this.drainAmount=0,this.scene.enemyLastHit()},a.prototype.setSecondWind=function(){this.currentEnemyHealth=20,this.showEnemyHealthMeter(0,!0)},a.prototype.upperCutPlayerBoost=function(){this.delayedHealthBoost=TweenMax.delayedCall(.5,this.upperCutPlayerBoostDelay,[this])},a.prototype.upperCutPlayerBoostDelay=function(a){a.playerHealth+=2,a.playerHealth>100&&(a.playerHealth=100),a.resizePlayerHealthBar()},a.prototype.reset=function(){this.showEnemyHealthTimeline&&this.showEnemyHealthTimeline.kill(),this.removeEnemyHealthTimeline&&this.removeEnemyHealthTimeline.kill(),this.showPlayerHealthTimeline&&this.showPlayerHealthTimeline.kill(),this.currentEnemyHealth=100},a.prototype.resetDrain=function(){this.drainAmount=0},a.prototype.pause=function(){this.paused=!0,this.scene.pauseResumeTween(this.showEnemyHealthTimeline,"pause"),this.scene.pauseResumeTween(this.removeEnemyHealthTimeline,"pause"),this.scene.pauseResumeTween(this.showPlayerHealthTimeline,"pause"),this.scene.pauseResumeTween(this.playerParticleTimeline,"pause"),this.scene.pauseResumeTween(this.playerParticleTimelineRecharge,"pause"),this.scene.pauseResumeTween(this.killHealthTween,"pause");for(var a=0;a<this.enemyHealthParticles.length;a++)this.scene.pauseResumeTween(this.enemyHealthParticles[a].timeline,"pause")},a.prototype.resume=function(){this.paused=!1,this.scene.pauseResumeTween(this.showEnemyHealthTimeline,"resume"),this.scene.pauseResumeTween(this.removeEnemyHealthTimeline,"resume"),this.scene.pauseResumeTween(this.showPlayerHealthTimeline,"resume"),this.scene.pauseResumeTween(this.playerParticleTimeline,"resume"),this.scene.pauseResumeTween(this.playerParticleTimelineRecharge,"resume"),this.scene.pauseResumeTween(this.killHealthTween,"resume");for(var a=0;a<this.enemyHealthParticles.length;a++)this.scene.pauseResumeTween(this.enemyHealthParticles[a].timeline,"resume")},a.prototype.comboHealthRecharge=function(){var a,b=this.playerHealth;a=b+25,a>100&&(a=100),TweenMax.to(this,.5,{playerHealth:a}),this.playerHealthParticleHolderRecharge.visible=!0,this.playerHealthParticleHolderRecharge.position.y=Game.stageHeight-25,this.playerParticleTimelineRecharge&&this.playerParticleTimelineRecharge.kill(),this.playerParticleTimelineRecharge=new TimelineMax({onComplete:this.killRechargeHolder,onCompleteParams:[this]});for(var c=0;c<this.playerHealthParticlesRecharge.length;c++){var d=this.playerHealthParticlesRecharge[c];d.scale.x=0,d.scale.y=0,d.position.x=0,d.position.y=0,d.alpha=1,d.rotation=0,this.playerParticleTimelineRecharge.add([TweenMax.to(d,.5,{rotation:Game.getRandom(4*-Math.PI,4*Math.PI),ease:Linear.easeOut}),TweenMax.to(d.scale,.5,{x:2,y:2,ease:Sine.easeOut}),TweenMax.to(d.position,.5,{x:Game.getRandom(-200,200),y:Game.getRandom(-200,200),ease:Sine.easeOut}),TweenMax.to(d,.1,{alpha:0,ease:Sine.easeOut,delay:.4})],Game.getRandom(0,.1))}},a.prototype.killRechargeHolder=function(a){a.playerHealthParticleHolderRecharge.visible=!1},a.prototype.shuffleArray=function(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a},a.prototype.tick=function(){1!=this.paused&&(this.playerHealth<=0&&this.scene.gameOver(),0!=this.initialised&&(this.playerHealth-=this.drainAmount,this.resizePlayerHealthBar()))},a.prototype.resizePlayerHealthBar=function(){this.playerHealthBarMeter.width=this.playerHealthOrigWidth*(this.playerHealth/100),this.playerHealthParticleHolder.position.x=this.playerHealthContainer.position.x+this.playerHealthBarMeter.width+30,this.playerHealthParticleHolderRecharge.position.x=this.playerHealthContainer.position.x+this.playerHealthBarMeter.width+30},a.prototype.resizeEnemyHealthBar=function(a){this.enemyHealthBarMeter.width=this.enemyHealthOrigWidth*(this.currentEnemyHealth/100),this.enemyHealthParticleHolder.position.y=this.enemyHealthContainer.position.y+this.enemyHealthBarMeter.height/2,this.enemyHealthParticleHolder.position.x=this.enemyHealthContainer.position.x+this.enemyHealthBarMeter.width,1!=a&&this.popEnemyDrainParticles()},a.prototype.popEnemyDrainParticles=function(){for(var a=0,b=0;b<this.enemyHealthParticles.length;b++)if(1!=this.enemyHealthParticles[b].active){this.enemyHealthParticles[b].active=!0,this.enemyHealthParticles[b].timeline&&this.enemyHealthParticles[b].timeline.kill(),this.enemyHealthParticles[b].timeline=new TimelineMax;var c=this.enemyHealthParticles[b].sprite;c.position.x=Game.getRandom(-20,20),c.position.y=Game.getRandom(-20,20);var d=Game.getRandom(500,1e3),e=Game.getRandom(-20,20);if(c.visible=!0,this.enemyHealthParticles[b].timeline.add([TweenMax.to(c,2,{rotation:Game.getRandom(0,400),ease:Sine.easeOut}),TweenMax.to(c,2,{physics2D:{velocity:d,angle:e,gravity:500},onComplete:this.resetParticle,onCompleteParams:[this,c]})],Game.getRandom(0,.1)),a++,a>=10)break}},a.prototype.killHealthAnim=function(){this.playerHealthAnimOn=!1,this.playerParticleTimeline&&this.playerParticleTimeline.kill(),this.killHealthTween&&this.killHealthTween.kill(),this.killHealthTween=TweenMax.to(this.playerHealthParticleHolder,.5,{alpha:0,ease:Sine.easeOut,onComplete:this.killParticleHolder,onCompleteParams:[this]})},a.prototype.killParticleHolder=function(a){a.playerHealthParticleHolder.visible=!1},a.prototype.resetParticle=function(a,b){for(var c=0;c<a.enemyHealthParticles.length;c++)a.enemyHealthParticles[c].sprite==b&&(a.enemyHealthParticles[c].active=!1,a.enemyHealthParticles[c].sprite.visible=!1)},a.prototype.destroy=function(){for(var a=0;a<this.enemyHealthParticles.length;a++)Game.displayStore.returnPooledItem(this.enemyHealthParticles[a].sprite);for(var a=0;a<this.playerHealthParticles.length;a++)Game.displayStore.returnPooledItem(this.playerHealthParticles[a]);for(var a=0;a<this.enemyHealthParticles.length;a++)this.enemyHealthParticles[a].timeline&&this.enemyHealthParticles[a].timeline.kill();this.playerParticleTimeline&&this.playerParticleTimeline.kill(),this.killHealthTween&&this.killHealthTween.kill()},a}(),GlideToGloryLevelManager=function(){function a(a,b){this.blockWidth=341,this.testLevelMode=!1,this.scene=a,this.playingFanSound=!1,this.playingAntiGravSound=!1,this.physicsManager=b,this.levelData=new GlideToGloryLevelData(this),this.windApplied=!1,this.difficultyLevel=0,this.difficultyCounter=0,this.difficultyCounterLimit=5,this.currentSlotCounter=0,this.currentSlotCounterLimit=30,this.initialBuildIndex=0,this.slotChunksInPlay=0,this.levelStartingPos=1024,this.scrollSpeed=2,this.layoutPos=this.levelStartingPos,this.currentDifficultyAllowed=0,this.levelChunkSwapsCompleted=0,this.levelScrolling=!1,this.scoreDistance=0,this.scoreDistanceCounter=0,this.scoreDistanceCounterLimit=341,this.currentActivePhysicsBodies=new Array,this.currentActiveSlots=new Array,this.slotChunkBank=new Array,this.firstMaxDifficultyUnlock=!1}return a.prototype.buildLevel=function(){this.slotChunkBank=this.levelData.createChunkBank(),this.setLastSlots()},a.prototype.setLastSlots=function(){for(var a=0;a<this.slotChunkBank.length;a++){var b=this.slotChunkBank[a];b.slots[b.slots.length-1].setLastSlot=!0}},a.prototype.startScrolling=function(){0==this.testLevelMode?this.buildFirstLevelChunk():this.buildFirstTestChunk(14),this.levelScrolling=!0},a.prototype.buildFirstTestChunk=function(a){for(var b=this.returnSpecificChunk(a),c=0;c<b.slots.length;c++){var d=b.slots[c];this.currentActiveSlots.push({bankIndex:b.index,slot:d}),d.setPos(this.layoutPos),this.layoutPos+=d.getStartPos}this.slotChunksInPlay++},a.prototype.buildFirstLevelChunk=function(){for(var a=this.returnLevelChunk(),b=this.returnLevelChunk(),c=this.returnLevelChunk(),d=0;d<a.slots.length;d++)this.currentActiveSlots.push({bankIndex:a.index,slot:a.slots[d]});for(var d=0;d<b.slots.length;d++)this.currentActiveSlots.push({bankIndex:b.index,slot:b.slots[d]});for(var d=0;d<c.slots.length;d++)this.currentActiveSlots.push({bankIndex:c.index,slot:c.slots[d]});for(var d=0;d<this.currentActiveSlots.length;d++)this.currentActiveSlots[d].slot.setPos(this.layoutPos),this.layoutPos+=this.currentActiveSlots[d].slot.getStartPos;this.slotChunksInPlay=3},a.prototype.buildNewLevelChunk=function(){this.layoutPos=this.levelStartingPos;var a;0==this.firstMaxDifficultyUnlock?a=this.returnLevelChunk():1==this.firstMaxDifficultyUnlock&&(this.firstMaxDifficultyUnlock=!1,a=this.returnSpecificChunk(14));for(var b=0;b<a.slots.length;b++){var c=a.slots[b];this.currentActiveSlots.push({bankIndex:a.index,slot:c}),c.setPos(this.layoutPos),this.layoutPos+=c.getStartPos}this.slotChunksInPlay++},a.prototype.returnLevelChunk=function(){var a=Game.getRandom(0,this.slotChunkBank.length-1,!0),b={index:a,active:this.slotChunkBank[a].active,slots:this.slotChunkBank[a].slots};return 0==this.slotChunkBank[a].active&&this.slotChunkBank[a].difficulty<=this.currentDifficultyAllowed?(this.slotChunkBank[a].active=!0,this.resinstateSlotElements(this.slotChunkBank[a].slots),b):b=this.returnLevelChunk()},a.prototype.returnSpecificChunk=function(a){var b=a,c={index:b,active:this.slotChunkBank[b].active,slots:this.slotChunkBank[b].slots};return this.slotChunkBank[b].active=!0,this.resinstateSlotElements(this.slotChunkBank[b].slots),c},a.prototype.resinstateSlotElements=function(a){for(var b=0;b<a.length;b++)a[b].reinstateSlotElements()},a.prototype.addLevelBlockPhysics=function(a){a.body&&(this.physicsManager.addLevelBlockPhysics(a.body),this.currentActivePhysicsBodies.push(a))},a.prototype.removeLevelBlockPhysics=function(a){if(a.body){this.physicsManager.removeLevelBlockPhysics(a.body);for(var b=this.currentActivePhysicsBodies.length-1;b>=0;b--)this.currentActivePhysicsBodies[b].body==a.body&&this.currentActivePhysicsBodies.splice(b,1)}},a.prototype.checkLevelCollision=function(a,b){for(var c={body:null,type:-1},d=0;d<this.currentActivePhysicsBodies.length;d++)a==this.currentActivePhysicsBodies[d].body&&(c.body=this.currentActivePhysicsBodies[d].body,c.type=this.currentActivePhysicsBodies[d].collisionType),b==this.currentActivePhysicsBodies[d].body&&(c.body=this.currentActivePhysicsBodies[d].body,c.type=this.currentActivePhysicsBodies[d].collisionType);return c},a.prototype.removePowerUp=function(a){for(var b=0;b<this.currentActiveSlots.length;b++)this.currentActiveSlots[b].slot.removePowerUp(a)},a.prototype.removePowerUpPhysics=function(a){this.scene.removePowerUpPhysics(a)},a.prototype.tick=function(){if(0!=this.levelScrolling){this.scoreDistanceCounter++,this.scoreDistanceCounter>=this.scoreDistanceCounterLimit&&(this.scoreDistanceCounter=0,this.scoreDistance++,this.scene.updateScoreFromLevels(this.scoreDistance));for(var a=0;a<this.currentActiveSlots.length;a++)this.currentActiveSlots[a].slot.updateScrollPos(this.scrollSpeed);for(var a=0;a<this.currentActivePhysicsBodies.length;a++)0==a&&this.currentActivePhysicsBodies[a].body.shapes[0],this.currentActivePhysicsBodies[a].body.shapes[0]instanceof p2.Circle?this.currentActivePhysicsBodies[a].body.position[0]=this.currentActivePhysicsBodies[a].blockRef.currentPosition:this.currentActivePhysicsBodies[a].body.position[0]=this.currentActivePhysicsBodies[a].blockRef.currentPosition+this.blockWidth/2;this.currentSlotCounter++,this.currentSlotCounter>=this.currentSlotCounterLimit&&(this.currentSlotCounter=0,this.checkCurrentSlotPower()),this.applySlotPower()}},a.prototype.applySlotPower=function(){switch(this.currentPowerAttribute){case"none":this.changeGravity(1);break;case"wind-up":this.changeGravity(1),this.applyWind(1);break;case"wind-down":this.changeGravity(1),this.applyWind(-1);break;case"anti-gravity":this.changeGravity(-1);break;default:this.changeGravity(1)}},a.prototype.applyWind=function(a){this.physicsManager.applyWind(a)},a.prototype.changeGravity=function(a){this.physicsManager.changeGravity(a)},a.prototype.checkCurrentSlotPower=function(){for(var a=this.scene.planktonVehicleHolder.position.x,b=0;b<this.currentActiveSlots.length;b++)if(a>this.currentActiveSlots[b].slot.currentPosition&&a<this.currentActiveSlots[b].slot.currentPosition+this.blockWidth){this.currentPowerAttribute=this.currentActiveSlots[b].slot.slotAttribute;
break}},a.prototype.checkLevelSounds=function(){for(var a=!1,b=!1,c=0;c<this.currentActiveSlots.length;c++)"wind-up"!=this.currentActiveSlots[c].slot.slotAttribute&&"wind-down"!=this.currentActiveSlots[c].slot.slotAttribute||(a=!0),"anti-gravity"==this.currentActiveSlots[c].slot.slotAttribute&&(b=!0);1==a?0==this.playingFanSound&&(this.playingFanSound=!0,Game.playSound("fan"),Game.setSoundVolume("fan",.8)):0==a&&1==this.playingFanSound&&(this.playingFanSound=!1,Game.stopSound("fan"),Game.setSoundVolume("fan",.8)),1==b?0==this.playingAntiGravSound&&(this.playingAntiGravSound=!0,Game.playSound("gravity"),Game.setSoundVolume("gravity",.5)):0==b&&1==this.playingAntiGravSound&&(this.playingAntiGravSound=!1,Game.stopSound("gravity"),Game.setSoundVolume("gravity",.5))},a.prototype.removeFirstSlotChunk=function(a){for(var b,c=0;c<this.currentActiveSlots.length;c++)if(a==this.currentActiveSlots[c].slot){b=this.currentActiveSlots[c].bankIndex;break}for(var c=this.currentActiveSlots.length-1;c>=0;c--)this.currentActiveSlots[c].bankIndex==b&&(this.currentActiveSlots[c].slot.destroy(),this.currentActiveSlots.splice(c,1));this.slotChunksInPlay--,this.levelChunkSwapsCompleted++,this.levelChunkSwapsCompleted>1&&this.currentDifficultyAllowed<2&&(this.currentDifficultyAllowed++,2==this.currentDifficultyAllowed&&(this.firstMaxDifficultyUnlock=!0)),this.difficultyCounter++,this.difficultyCounter>=this.difficultyCounterLimit&&(this.difficultyCounter=0,this.difficultyLevel++,this.adjustDifficulty()),this.slotChunkBank[b].active=!1},a.prototype.isLastSlotOverall=function(a){for(var b=!1,c=0;c<this.currentActiveSlots.length;c++)if(c==this.currentActiveSlots.length-1&&this.currentActiveSlots[c].slot==a){b=!0;break}return b},a.prototype.adjustDifficulty=function(){this.difficultyLevel>4},a.prototype.addNewChunk=function(){this.slotChunksInPlay>=3||this.buildNewLevelChunk()},a.prototype.destroy=function(){for(var a=0;a<this.slotChunkBank.length;a++)for(var b=0;b<this.slotChunkBank[a].slots.length;b++)this.slotChunkBank[a].slots[b].destroy();this.levelData.destroy()},a}(),GlideToGloryLevelData=function(){function a(a){this.levelManager=a,this.chunkData=new Array,this.createLevelSlot(0,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),-150,250),0),this.createLevelSlot(0,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),-150,150),0),this.createLevelSlot(0,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),-150,50),0),this.createLevelSlot(0,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("bottom",1),-140,null),0),this.createLevelSlot(0,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("bottom",1),null,null),0),this.createLevelSlot(1,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType6("top",4),-100,null),0),this.createLevelSlot(1,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType6("top",4),0,null),0),this.createLevelSlot(1,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType6("top",4),100,null),0),this.createLevelSlot(1,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType6("top",4),200,null),0),this.createLevelSlot(1,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),0),this.createLevelSlot(1,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),0),this.createLevelSlot(2,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("top",1),200,null),0),this.createLevelSlot(2,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),0),this.createLevelSlot(2,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("bottom",1),-200,null),0),this.createLevelSlot(2,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),0),this.createLevelSlot(3,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("bottom",1),-200,null),0),this.createLevelSlot(3,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),0),this.createLevelSlot(3,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("top",1),200,null),0),this.createLevelSlot(3,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),0),this.createLevelSlot(4,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType2("top",1),new GlideToGloryLevelElementBlockType5("bottom",1),-40,80),0),this.createLevelSlot(4,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType1("top",1),new GlideToGloryLevelElementBlockType1("bottom",1),-40,80),0),this.createLevelSlot(4,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),null,null),0),this.createLevelSlot(4,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType4("top",1),new GlideToGloryLevelElementBlockType3("bottom",1),null,null),0),this.createLevelSlot(4,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),0),this.createLevelSlot(5,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType2("top",1),null,150,null),1),this.createLevelSlot(5,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),null,150,null),1),this.createLevelSlot(5,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),null,150,null),1),this.createLevelSlot(5,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType4("top",1),null,150,null),1),this.createLevelSlot(5,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),1),this.createLevelSlot(6,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType2("top",1),new GlideToGloryLevelElementBlockType5("bottom",1),null,null),1),this.createLevelSlot(6,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),null,null),1),this.createLevelSlot(6,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),null,null),1),this.createLevelSlot(6,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType4("top",1),new GlideToGloryLevelElementBlockType3("bottom",1),null,null),1),this.createLevelSlot(6,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),1),this.createLevelSlot(7,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType1("top",1),null,205,null),1),this.createLevelSlot(7,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType4("top",1),new GlideToGloryLevelElementBlockType5("bottom",1),205,null),1),this.createLevelSlot(7,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType4("top",1),new GlideToGloryLevelElementBlockType5("bottom",1),-8,60),1),this.createLevelSlot(7,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType5("bottom",1),-160,0),1),this.createLevelSlot(7,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),1),this.createLevelSlot(8,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null,"wind-up"),2),this.createLevelSlot(8,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),null,-160,null,"wind-up"),2),this.createLevelSlot(8,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),null,-160,null,"wind-up"),2),this.createLevelSlot(8,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),null,-160,null,"wind-up"),2),this.createLevelSlot(8,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),2),this.createLevelSlot(9,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("top",1),200,null),2),this.createLevelSlot(9,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null,"wind-down"),2),this.createLevelSlot(9,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null,"wind-down"),2),this.createLevelSlot(9,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("bottom",1),-200,null),2),this.createLevelSlot(9,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),2),this.createLevelSlot(10,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("top",1),200,null),2),this.createLevelSlot(10,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null,"wind-up"),2),this.createLevelSlot(10,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("bottom",1),-200,null),2),this.createLevelSlot(10,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),2),this.createLevelSlot(11,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("bottom",1),-200,null),2),this.createLevelSlot(11,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null,"anti-gravity"),2),this.createLevelSlot(11,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null,"anti-gravity"),2),this.createLevelSlot(11,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType1("top",1),null,200,null,"anti-gravity"),2),this.createLevelSlot(11,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),2),this.createLevelSlot(11,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),2),this.createLevelSlot(12,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null,"anti-gravity"),2),this.createLevelSlot(12,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null,"anti-gravity"),2),this.createLevelSlot(12,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType1("top",1),new GlideToGloryLevelElementBlockType7("bottom",4),null,150,"anti-gravity"),2),this.createLevelSlot(12,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType1("top",1),new GlideToGloryLevelElementBlockType7("bottom",4),60,20,"anti-gravity"),2),this.createLevelSlot(12,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType4("top",1),null,60,null,"anti-gravity"),2),this.createLevelSlot(12,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),2),this.createLevelSlot(12,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType0("top",1),null,null),2),this.createLevelSlot(13,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType1("top",1),null,200,null),2),this.createLevelSlot(13,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null),2),this.createLevelSlot(13,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),-150,100),2),this.createLevelSlot(13,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null),2),this.createLevelSlot(13,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType1("top",1),null,200,null),2),this.createLevelSlot(13,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null),2),this.createLevelSlot(14,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType8("top",5),null,500,null),1),this.createLevelSlot(15,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null,"anti-gravity"),2),this.createLevelSlot(15,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType2("top",1),null,210,null,"anti-gravity"),2),this.createLevelSlot(15,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null,"anti-gravity"),2),this.createLevelSlot(15,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType7("bottom",4),null,-200,"anti-gravity"),2),this.createLevelSlot(15,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null,"anti-gravity"),2),this.createLevelSlot(15,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType4("top",1),null,210,null,"anti-gravity"),2),this.createLevelSlot(15,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null),2),this.createLevelSlot(16,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),null,-160,null,"wind-up"),2),this.createLevelSlot(16,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType6("bottom",1),null,-20,"wind-down"),2),this.createLevelSlot(16,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),null,-160,null,"wind-up"),2),this.createLevelSlot(16,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType6("bottom",1),null,-80,"wind-down"),2),this.createLevelSlot(16,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),null,-160,null,"wind-up"),2),this.createLevelSlot(16,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType6("bottom",1),null,-20,"wind-down"),2),this.createLevelSlot(16,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null),2),this.createLevelSlot(17,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("bottom",1),null,-200),2),this.createLevelSlot(17,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null),2),this.createLevelSlot(17,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),null,180,null,"wind-up"),2),this.createLevelSlot(17,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null),2),this.createLevelSlot(17,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType1("bottom",1),null,-200),2),this.createLevelSlot(17,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null),2),this.createLevelSlot(18,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null,"anti-gravity"),2),this.createLevelSlot(18,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null,"anti-gravity"),2),this.createLevelSlot(18,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType1("top",1),new GlideToGloryLevelElementBlockType7("bottom",4),130,20,"anti-gravity"),2),this.createLevelSlot(18,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null,"anti-gravity"),2),this.createLevelSlot(18,new GlideToGloryLevelElementSlot(this.levelManager,null,new GlideToGloryLevelElementBlockType7("bottom",4),null,-180,"anti-gravity"),2),this.createLevelSlot(18,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null,"anti-gravity"),2),this.createLevelSlot(18,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null),2),this.createLevelSlot(19,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),-160,350,"wind-up"),2),this.createLevelSlot(19,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),-160,250,"wind-up"),2),this.createLevelSlot(19,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),-160,150,"wind-up"),2),this.createLevelSlot(19,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType6("top",4),new GlideToGloryLevelElementBlockType1("bottom",1),-160,50,"wind-up"),2),this.createLevelSlot(19,new GlideToGloryLevelElementSlot(this.levelManager,new GlideToGloryLevelElementBlockType0("top",1),null,null,null),2)}return a.prototype.createChunkBank=function(){return this.chunkData},a.prototype.createLevelSlot=function(a,b,c){this.chunkData[a]||(this.chunkData[a]={active:!1,slots:new Array,difficulty:c}),this.chunkData[a].active=!1,this.chunkData[a].slots.push(b)},a.prototype.tick=function(){},a.prototype.destroy=function(){},a}(),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryLevelElementBlockType0=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.buildLevelBlock=function(b){a.prototype.buildLevelBlock.call(this,b)},b.prototype.reinstateElements=function(){a.prototype.reinstateElements.call(this)},b.prototype.tick=function(){},b.prototype.destroy=function(){},b}(GlideToGloryLevelElementBlock),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryLevelElementBlockType1=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.buildLevelBlock=function(b){a.prototype.buildLevelBlock.call(this,b),this.levelElement=Game.displayStore.getSprite("level-element-rectangle"),this.levelElement.position.y=this.blockPos,this.parentSlotContainer.addChild(this.levelElement);var c=new p2.Box({width:341,height:426});this.physicsBody=new p2.Body({mass:0,position:[0,0]}),this.physicsBody.addShape(c)},b.prototype.reinstateElements=function(){a.prototype.reinstateElements.call(this)},b.prototype.tick=function(){},b.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.levelElement)},b}(GlideToGloryLevelElementBlock),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryLevelElementBlockType2=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.buildLevelBlock=function(b){a.prototype.buildLevelBlock.call(this,b),this.levelElement=Game.displayStore.getSprite("level-element-rectangle-top-slant-down"),this.levelElement.position.y=this.blockPos,this.parentSlotContainer.addChild(this.levelElement);var c=[[-170.5,0],[170.5,-213],[170.5,213],[-170.5,213]];this.physicsBody=new p2.Body({mass:0,position:[0,0]}),this.physicsBody.fromPolygon(c,{skipAdjustCenterOfMass:!0})},b.prototype.reinstateElements=function(){a.prototype.reinstateElements.call(this)},b.prototype.tick=function(){},b.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.levelElement)},b}(GlideToGloryLevelElementBlock),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryLevelElementBlockType3=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.buildLevelBlock=function(b){a.prototype.buildLevelBlock.call(this,b),this.levelElement=Game.displayStore.getSprite("level-element-rectangle-bottom-slant-down"),this.levelElement.position.y=this.blockPos,this.parentSlotContainer.addChild(this.levelElement);var c=[[-170.5,-213],[170.5,-213],[170.5,0],[-170.5,213]];this.physicsBody=new p2.Body({mass:0,position:[0,0]}),this.physicsBody.fromPolygon(c,{skipAdjustCenterOfMass:!0})},b.prototype.reinstateElements=function(){a.prototype.reinstateElements.call(this)},b.prototype.tick=function(){},b.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.levelElement)},b}(GlideToGloryLevelElementBlock),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryLevelElementBlockType4=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.buildLevelBlock=function(b){a.prototype.buildLevelBlock.call(this,b),this.levelElement=Game.displayStore.getSprite("level-element-rectangle-top-slant-up"),this.levelElement.position.y=this.blockPos,this.parentSlotContainer.addChild(this.levelElement);var c=[[-170.5,-213],[170.5,0],[170.5,213],[-170.5,213]];this.physicsBody=new p2.Body({mass:0,position:[0,0]}),this.physicsBody.fromPolygon(c,{skipAdjustCenterOfMass:!0})},b.prototype.reinstateElements=function(){a.prototype.reinstateElements.call(this)},b.prototype.tick=function(){},b.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.levelElement)},b}(GlideToGloryLevelElementBlock),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryLevelElementBlockType5=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.buildLevelBlock=function(b){a.prototype.buildLevelBlock.call(this,b),this.levelElement=Game.displayStore.getSprite("level-element-rectangle-bottom-slant-up"),this.levelElement.position.y=this.blockPos,this.parentSlotContainer.addChild(this.levelElement);var c=[[-170.5,-213],[170.5,-213],[170.5,213],[-170.5,0]];this.physicsBody=new p2.Body({mass:0,position:[0,0]}),this.physicsBody.fromPolygon(c,{skipAdjustCenterOfMass:!0})},b.prototype.reinstateElements=function(){a.prototype.reinstateElements.call(this)},b.prototype.tick=function(){},b.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.levelElement)},b}(GlideToGloryLevelElementBlock),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryLevelElementBlockType6=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.buildLevelBlock=function(b){a.prototype.buildLevelBlock.call(this,b),this.levelElement=Game.displayStore.getSprite("level-element-rectangle-down-spikes"),this.levelElement.position.y=this.blockPos,this.parentSlotContainer.addChild(this.levelElement);var c=new p2.Box({width:341,height:426});this.physicsBody=new p2.Body({mass:0,position:[0,0]}),this.physicsBody.addShape(c)},b.prototype.reinstateElements=function(){a.prototype.reinstateElements.call(this)},b.prototype.tick=function(){},b.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.levelElement)},b}(GlideToGloryLevelElementBlock),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryLevelElementBlockType7=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype.buildLevelBlock=function(b){a.prototype.buildLevelBlock.call(this,b),this.levelElement=Game.displayStore.getSprite("level-element-rectangle-up-spikes"),this.levelElement.position.y=this.blockPos,this.parentSlotContainer.addChild(this.levelElement);var c=new p2.Box({width:341,height:426});this.physicsBody=new p2.Body({mass:0,position:[0,0]}),this.physicsBody.addShape(c)},b.prototype.reinstateElements=function(){a.prototype.reinstateElements.call(this)},b.prototype.tick=function(){},b.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.levelElement)},b}(GlideToGloryLevelElementBlock),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryLevelElementBlockType8=function(a){function b(b,c){a.call(this,b,c),this.powerUpBlock=!0}return __extends(b,a),b.prototype.buildLevelBlock=function(b){a.prototype.buildLevelBlock.call(this,b),this.levelElement=Game.displayStore.getSprite("level-element-powerup-blank"),this.powerUpHolder=Game.displayStore.getContainer("level-element-powerup-holder"),this.powerUpDots=Game.displayStore.getSprite("level-element-powerup-dots"),this.powerUpBG=Game.displayStore.getSprite("level-element-powerup-bg"),this.powerUpFG=Game.displayStore.getSprite("level-element-powerup"),this.powerUpBGStarburst=Game.displayStore.getSprite("level-element-powerup-starburst-bg"),this.powerUpHolder.addChild(this.powerUpBGStarburst),this.powerUpHolder.addChild(this.powerUpBG),this.powerUpHolder.addChild(this.powerUpFG),this.powerUpHolder.addChild(this.powerUpDots),this.powerUpHolder.scale.x=1,this.powerUpHolder.scale.y=1,this.powerUpFG.alpha=.9,this.powerUpFG.scale.x=1,this.powerUpFG.scale.y=1,this.powerUpBG.alpha=.5,this.powerUpBG.scale.x=1,this.powerUpBG.scale.y=1,this.powerUpDots.alpha=1,this.powerUpBG.blendMode=PIXI.BLEND_MODES.ADD,this.powerUpDots.blendMode=PIXI.BLEND_MODES.ADD,this.powerUpBGStarburst.blendMode=PIXI.BLEND_MODES.ADD,this.powerUpBGStarburst.alpha=.4,this.powerUpBGStarburst.scale.x=2,this.powerUpBGStarburst.scale.y=2,this.powerUpHolder.position.y=this.blockPos,this.parentSlotContainer.addChild(this.levelElement);var c=new p2.Circle({radius:56});this.physicsBody=new p2.Body({mass:0,position:[0,0]}),this.physicsBody.addShape(c),this.reinstateElements()},b.prototype.tick=function(){},b.prototype.reinstateElements=function(){a.prototype.reinstateElements.call(this),this.powerUpBGStarburst.rotation=0,this.powerUpHolder.scale.x=this.powerUpHolder.scale.y=1,this.parentSlotContainer.addChild(this.powerUpHolder),this.powerUpTimeline&&this.powerUpTimeline.kill(),this.powerUpTimeline=new TimelineMax,this.powerUpTimeline.add([TweenMax.to(this.powerUpBGStarburst,3,{rotation:2*Math.PI,ease:Linear.easeNone,repeat:-1}),TweenMax.to(this.powerUpDots,1,{rotation:2*Math.PI,ease:Linear.easeNone,repeat:-1}),TweenMax.to(this.powerUpBG.scale,2,{x:.8,y:.8,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.powerUpFG.scale,1.8,{x:.8,y:.8,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(this.powerUpFG,1.5,{alpha:.7,ease:Sine.easeInOut,repeat:-1,yoyo:!0})])},b.prototype.removePowerUp=function(){a.prototype.removePowerUp.call(this),this.powerUpTimeline&&this.powerUpTimeline.kill(),this.powerUpTimeline=new TimelineMax({onComplete:this.removePowerUpAsset,onCompleteParams:[this]}),this.powerUpTimeline.add([TweenMax.to(this.powerUpHolder.scale,.5,{x:0,y:0,ease:Sine.easeOut})])},b.prototype.removePowerUpAsset=function(a){a.parentSlotContainer.removeChild(a.powerUpHolder)},b.prototype.destroy=function(){a.prototype.destroy.call(this),Game.displayStore.returnPooledItem(this.levelElement),this.powerUpHolder.removeChild(this.powerUpBGStarburst),this.powerUpHolder.removeChild(this.powerUpBG),this.powerUpHolder.removeChild(this.powerUpFG),this.powerUpHolder.removeChild(this.powerUpDots),Game.displayStore.returnPooledItem(this.powerUpDots),Game.displayStore.returnPooledItem(this.powerUpBG),Game.displayStore.returnPooledItem(this.powerUpFG),Game.displayStore.returnPooledItem(this.powerUpBGStarburst),this.powerUpTimeline&&this.powerUpTimeline.kill()},b}(GlideToGloryLevelElementBlock),HubPanel=function(){function a(a,b,c,d){switch(this.unitWidth=334,this.scene=a,this.index=d,this.tintColoursBG=new Array,this.tintColoursBG.push(13891546),this.tintColoursBG.push(16775616),this.tintColoursBG.push(16771018),this.tintColoursBG.push(12771579),this.tintColoursClouds=new Array,this.tintColoursClouds.push(16449275),this.tintColoursClouds.push(16776683),this.tintColoursClouds.push(16775407),this.tintColoursClouds.push(15661055),this.panelContainer=c,this.parentContainer=b,this.parentContainer.addChild(this.panelContainer),this.smallCloud1=Game.displayStore.getSprite("top-cloud-small"),this.smallCloud2=Game.displayStore.getSprite("top-cloud-small"),this.panelContainer.position.x=this.unitWidth*d,this.panelContainer.scale.x=this.panelContainer.scale.y=.8,this.hitAreaSprite=Game.displayStore.getSprite("blank-input"),this.createHitArea(this.hitAreaSprite),this.cloudTop=Game.displayStore.getSprite("top-cloud-hub"),3!=this.index?this.background=Game.displayStore.getSprite("bed-bg"):this.background=Game.displayStore.getSprite("gary-room-bg"),this.panelContainer.addChild(this.background),this.index){case 0:this.character=Game.displayStore.getSprite("hub-character-plankton"),this.logo=Game.displayStore.getSprite("hub-logo-glide"),this.background.position.y=-40,this.background.tint=this.tintColoursBG[0],this.cloudTop.tint=this.tintColoursClouds[0],this.smallCloud1.tint=this.tintColoursClouds[0],this.smallCloud2.tint=this.tintColoursClouds[0],this.smallCloud1.position.x=120,this.smallCloud1.position.y=400,this.smallCloud2.position.x=300,this.smallCloud2.position.y=480;break;case 1:this.character=Game.displayStore.getSprite("hub-character-spongebob"),this.logo=Game.displayStore.getSprite("hub-logo-patty"),this.background.position.y=0,this.background.tint=this.tintColoursBG[1],this.cloudTop.tint=this.tintColoursClouds[1],this.smallCloud1.tint=this.tintColoursClouds[1],this.smallCloud2.tint=this.tintColoursClouds[1],this.smallCloud1.position.x=300,this.smallCloud1.position.y=400,this.smallCloud2.position.x=120,this.smallCloud2.position.y=480;break;case 2:this.character=Game.displayStore.getSprite("hub-character-squidward"),this.logo=Game.displayStore.getSprite("hub-logo-slap"),this.background.position.y=-20,this.background.tint=this.tintColoursBG[2],this.cloudTop.tint=this.tintColoursClouds[2],this.smallCloud1.tint=this.tintColoursClouds[2],this.smallCloud2.tint=this.tintColoursClouds[2],this.smallCloud1.position.x=120,this.smallCloud1.position.y=340,this.smallCloud2.position.x=300,this.smallCloud2.position.y=450;break;case 3:this.character=Game.displayStore.getSprite("hub-character-gary"),this.logo=Game.displayStore.getSprite("hub-logo-meow"),
this.cloudTop.tint=this.tintColoursClouds[3],this.smallCloud1.tint=this.tintColoursClouds[3],this.smallCloud2.tint=this.tintColoursClouds[3],this.smallCloud1.position.x=300,this.smallCloud1.position.y=350,this.smallCloud2.position.x=120,this.smallCloud2.position.y=420}this.character.position.y=780,this.panelContainer.addChild(this.character),this.cloudTop.position.y=-480,this.smallCloud1.scale.x=this.smallCloud1.scale.y=0,this.smallCloud2.scale.x=this.smallCloud2.scale.y=0,this.logo.position.y=150,this.logo.position.x=this.unitWidth/.8/2,this.logo.scale.x=this.logo.scale.y=0,this.panelContainer.addChild(this.cloudTop),this.panelContainer.addChild(this.smallCloud1),this.panelContainer.addChild(this.smallCloud2),this.panelContainer.addChild(this.logo),this.panelContainer.addChild(this.hitAreaSprite);var e=.1;this.panelIntroTimeline&&this.panelIntroTimeline.kill(),this.panelIntroTimeline=new TimelineMax({delay:this.index*e}),this.panelIntroTimeline.add([TweenMax.to(this.smallCloud1.scale,.3,{x:1,y:1,ease:Back.easeOut,delay:.5,onComplete:this.beginFloatCloud1,onCompleteParams:[this]}),TweenMax.to(this.smallCloud2.scale,.3,{x:.7,y:.7,ease:Back.easeOut,onComplete:this.beginFloatCloud2,onCompleteParams:[this]})],0),this.panelIntroTimeline.add([TweenMax.to(this.cloudTop.position,1,{y:-80,ease:Back.easeOut,onComplete:this.beginFloatCloudTop,onCompleteParams:[this]})],.5),this.panelIntroTimeline.add([TweenMax.to(this.logo.scale,.5,{x:.8,y:.8,ease:Back.easeOut,onComplete:this.beginLogoFloat,onCompleteParams:[this]})],1.5)}return a.prototype.beginFloatCloud1=function(a){a.cloud1FloatTimeline&&a.cloud1FloatTimeline.kill(),a.cloud1FloatTimeline=new TimelineMax;var b=Game.getRandom(1.6,1.9),c=Game.getRandom(1.6,1.9),d=Game.getRandom(2,4),e=Game.getRandom(2,4),f=a.smallCloud1.position.x+Game.getRandom(-10,10),g=a.smallCloud1.position.y+Game.getRandom(-10,10);a.cloud1FloatTimeline.add([TweenMax.to(a.smallCloud1.scale,b,{x:.9,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.smallCloud1.scale,c,{y:.9,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.smallCloud1.position,d,{x:f,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.smallCloud1.position,e,{y:g,ease:Sine.easeInOut,repeat:-1,yoyo:!0})],0)},a.prototype.beginFloatCloud2=function(a){a.cloud2FloatTimeline&&a.cloud2FloatTimeline.kill(),a.cloud2FloatTimeline=new TimelineMax;var b=Game.getRandom(1.6,1.9),c=Game.getRandom(1.6,1.9),d=Game.getRandom(2,4),e=Game.getRandom(2,4),f=a.smallCloud2.position.x+Game.getRandom(-10,10),g=a.smallCloud2.position.y+Game.getRandom(-10,10);a.cloud2FloatTimeline.add([TweenMax.to(a.smallCloud2.scale,b,{x:.6,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.smallCloud2.scale,c,{y:.6,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.smallCloud2.position,d,{x:f,ease:Sine.easeInOut,repeat:-1,yoyo:!0}),TweenMax.to(a.smallCloud2.position,e,{y:g,ease:Sine.easeInOut,repeat:-1,yoyo:!0})],0)},a.prototype.beginFloatCloudTop=function(a){a.cloudTopFloatTimeline&&a.cloudTopFloatTimeline.kill(),a.cloudTopFloatTimeline=new TimelineMax;var b=Game.getRandom(1.6,1.9),c=Game.getRandom(-80,-100);a.cloudTopFloatTimeline.add([TweenMax.to(a.cloudTop.position,b,{y:c,ease:Sine.easeInOut,repeat:-1,yoyo:!0})],0)},a.prototype.beginLogoFloat=function(a){a.logoFloatTimeline&&a.logoFloatTimeline.kill(),a.logoFloatTimeline=new TimelineMax;var b=Game.getRandom(2,4),c=Game.getRandom(2,4),d=a.logo.position.x+Game.getRandom(-6,6),e=a.logo.position.y+Game.getRandom(-6,6);a.logoFloatTimeline.add([TweenMax.to(a.logo.position,b,{x:d,repeat:-1,yoyo:!0,ease:Sine.easeInOut}),TweenMax.to(a.logo.position,c,{y:e,repeat:-1,yoyo:!0,ease:Sine.easeInOut})],0)},a.prototype.createHitArea=function(a){a.interactive=!0,a.buttonMode=!0,a.width=418,a.height=700;var b=this;1==Game.onDesktop?a.on("mouseup",function(a){0!=b.scene.inputAllowed&&(b.scene.inputAllowed=!1,b.scene.activateOverlay(b.index,b.tintColoursBG,b.tintColoursClouds))}):(a.on("touchstart",function(a){}),a.on("touchend",function(a){0!=b.scene.inputAllowed&&(b.scene.inputAllowed=!1,b.scene.activateOverlay(b.index,b.tintColoursBG,b.tintColoursClouds))}))},a.prototype.tick=function(){},a.prototype.destroy=function(){Game.displayStore.returnPooledItem(this.logo),Game.displayStore.returnPooledItem(this.smallCloud1),Game.displayStore.returnPooledItem(this.smallCloud2),Game.displayStore.returnPooledItem(this.cloudTop),Game.displayStore.returnPooledItem(this.character),this.hitAreaSprite.removeAllListeners(),Game.displayStore.returnPooledItem(this.hitAreaSprite),Game.displayStore.returnPooledItem(this.logo),Game.displayStore.returnPooledItem(this.background),this.panelIntroTimeline&&this.panelIntroTimeline.kill(),this.cloud1FloatTimeline&&this.cloud1FloatTimeline.kill(),this.cloud2FloatTimeline&&this.cloud2FloatTimeline.kill(),this.cloudTopFloatTimeline&&this.cloudTopFloatTimeline.kill(),this.logoFloatTimeline&&this.logoFloatTimeline.kill()},a.prototype.overlayActivated=function(){this.scene.pauseResumeTween(this.panelIntroTimeline,"pause"),this.scene.pauseResumeTween(this.cloud1FloatTimeline,"pause"),this.scene.pauseResumeTween(this.cloud2FloatTimeline,"pause"),this.scene.pauseResumeTween(this.cloudTopFloatTimeline,"pause"),this.scene.pauseResumeTween(this.logoFloatTimeline,"pause")},a.prototype.backToHub=function(){this.scene.pauseResumeTween(this.panelIntroTimeline,"resume"),this.scene.pauseResumeTween(this.cloud1FloatTimeline,"resume"),this.scene.pauseResumeTween(this.cloud2FloatTimeline,"resume"),this.scene.pauseResumeTween(this.cloudTopFloatTimeline,"resume"),this.scene.pauseResumeTween(this.logoFloatTimeline,"resume")},a}(),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},MeowNoIntro1Scene=function(a){function b(b){a.call(this,b),this.id="meowNoIntro1Scene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.setBackgroundColor(11714614),this.game.ui.setUI("skip"),this.bg=Game.displayStore.getSprite("intro-meow-bg"),this.gary=Game.displayStore.getSprite("intro-meow-gary"),this.shadow=Game.displayStore.getSprite("intro-meow-gary-shadow"),this.bowl=Game.displayStore.getSprite("intro-meow-bowl"),this.bowl.position.x=557,this.bowl.position.y=505,this.container.addChild(this.bg),this.container.addChild(this.shadow),this.container.addChild(this.gary),this.container.addChild(this.bowl),this.cloud1=Game.displayStore.getSprite("intro-meow-cloud"),this.cloud2=Game.displayStore.getSprite("intro-meow-cloud"),this.cloud3=Game.displayStore.getSprite("intro-meow-cloud"),this.cloud1.position.x=Game.stageWidth/2,this.cloud1.position.y=123,this.cloud1.scale.x=this.cloud1.scale.y=.2,this.cloud2.position.x=211,this.cloud2.position.y=211,this.cloud2.scale.x=this.cloud2.scale.y=.6,this.cloud3.position.x=526,this.cloud3.position.y=385,this.cloud3.scale.x=this.cloud3.scale.y=1,this.container.addChild(this.cloud1),this.container.addChild(this.cloud2),this.container.addChild(this.cloud3),this.cloud1.rotation=0,this.cloud2.rotation=0,this.cloud3.rotation=0,this.animation=new TimelineMax,this.animation.add([TweenMax.to(this.gary.scale,2,{x:.97,y:1.01,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.to(this.shadow.scale,2,{x:.96,y:1.02,yoyo:!0,repeat:-1,ease:Back.easeInOut})]),this.animation.add([TweenMax.from(this.cloud1,.6,{alpha:0,ease:Power3.easeIn}),TweenMax.from(this.cloud1,.6,{rotate:-.5,ease:Power3.easeIn}),TweenMax.from(this.cloud1.scale,.6,{x:0,y:0,ease:Back.easeInOut}),TweenMax.to(this.cloud1.position,3,{x:this.cloud1.position.x+20,y:this.cloud1.position.y+15,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.from(this.cloud2,.6,{alpha:0,ease:Power3.easeIn,delay:.5}),TweenMax.from(this.cloud2.scale,.6,{x:0,y:0,ease:Back.easeInOut,delay:.5}),TweenMax.from(this.cloud2,.6,{rotate:.5,ease:Power3.easeIn,delay:.5}),TweenMax.to(this.cloud2.position,4,{x:this.cloud2.position.x+10,y:this.cloud2.position.y-15,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.from(this.cloud3,.6,{alpha:0,ease:Power3.easeIn,delay:1.3}),TweenMax.from(this.cloud3.scale,.6,{x:0,y:0,ease:Back.easeInOut,delay:1.3}),TweenMax.from(this.cloud1,.6,{rotate:-.5,ease:Power3.easeIn,delay:1.3}),TweenMax.to(this.cloud3.position,3,{x:this.cloud3.position.x-8,y:this.cloud3.position.y+1,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.to(this.cloud3.scale,2,{x:3,y:3,ease:Power3.easeInOut,delay:2.5}),TweenMax.to(this.cloud3,2,{rotate:1,ease:Power3.easeInOut,delay:2.5})],1.5),this.animation.call(this.game.setScene,["meowNoIntro2Scene",!1],this.game,5.6)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"skipbutton":this.game.setScene("meowNoIntro2Scene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},MeowNoIntro2Scene=function(a){function b(b){a.call(this,b),this.id="meowNoIntro2Scene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.game.ui.setUI("skip"),this.singleBubble=Game.displayStore.getSprite("intro-meow-bubble"),this.arm=Game.displayStore.getSprite("intro-meow-arm"),this.bubbleGroup=Game.displayStore.getSprite("intro-meow-bubble-group"),this.singleBubble.position.x=567,this.singleBubble.position.y=270,this.whiteCover=Game.displayStore.getSprite("intro-meow-white"),this.whiteCover.width=Game.stageWidth,this.whiteCover.height=Game.stageHeight,this.setBackgroundColor(11714614),this.topEdge=Game.displayStore.getSprite("intro-top-edge"),this.bottomEdge=Game.displayStore.getSprite("intro-top-edge"),this.leftEdge=Game.displayStore.getSprite("intro-left-edge"),this.rightEdge=Game.displayStore.getSprite("intro-left-edge"),this.topEdge.position.x=Game.stageWidth/2,this.topEdge.position.y=40,this.bottomEdge.position.y=Game.stageHeight-40,this.bottomEdge.scale.x=-1,this.bottomEdge.scale.y=-1,this.leftEdge.position.x=90,this.leftEdge.position.y=Game.stageHeight/2,this.rightEdge.position.x=Game.stageWidth-90,this.rightEdge.position.y=Game.stageHeight/2,this.rightEdge.scale.y=-1,this.rightEdge.scale.x=-1,this.cloud=Game.displayStore.getSprite("intro-meow-cloud"),this.cloud.position.x=526,this.cloud.position.y=385,this.cloud.scale.x=this.cloud.scale.y=3,this.cloud.rotation=0,this.bubble1=Game.displayStore.getSprite("intro-meow-bubble"),this.bubble2=Game.displayStore.getSprite("intro-meow-bubble"),this.bubble3=Game.displayStore.getSprite("intro-meow-bubble"),this.bubble1.position.x=0,this.bubble2.position.x=0,this.bubble3.position.x=0,this.bubble1.position.y=100,this.bubble2.position.y=300,this.bubble3.position.y=200,this.bubble1.scale.x=this.bubble1.scale.y=1.1,this.bubble1.scale.x=this.bubble1.scale.y=1,this.bubble1.scale.x=this.bubble1.scale.y=.8,this.bowl2=Game.displayStore.getSprite("intro-meow-bowl"),this.bowl2.position.x=585,this.bowl2.position.y=509,this.bowl2.scale.y=this.bowl2.scale.x=.6,this.bowl3=Game.displayStore.getSprite("intro-meow-bowl"),this.bowl3.position.x=585,this.bowl3.position.y=509,this.bowl3.scale.y=this.bowl3.scale.x=.6,this.meowScene2=Game.displayStore.getContainer("intro-meow-scene-2"),this.garyHolder=this.meowScene2.getContainer("dream-gary-holder"),this.leftCheek=this.garyHolder.getSprite("intro-meow-gary-left-cheek"),this.rightCheek=this.garyHolder.getSprite("intro-meow-gary-right-cheek"),this.leftEye=this.garyHolder.getSprite("intro-meow-gary-left-eye"),this.rightEye=this.garyHolder.getSprite("intro-meow-gary-right-eye"),this.meowScene2.addChild(this.arm),this.meowScene2.addChild(this.bubbleGroup),this.meowScene2.addChild(this.bowl2),this.meowScene2.addChild(this.singleBubble),this.meowScene2.addChild(this.bubble1),this.meowScene2.addChild(this.bubble2),this.meowScene2.addChild(this.bubble3),this.meowScene3=Game.displayStore.getContainer("intro-meow-scene-3"),this.arm2=Game.displayStore.getSprite("intro-meow-arm"),this.bubbleGroup2=Game.displayStore.getSprite("intro-meow-bubble-group"),this.meowScene3.addChild(this.arm2),this.meowScene3.addChild(this.bubbleGroup2),this.runGary=this.meowScene3.getSprite("intro-meow-gary-run"),this.meowScene2.position.x=0,this.meowScene3.position.x=2048,this.container.addChild(this.cloud),this.container.addChild(this.meowScene2),this.container.addChild(this.meowScene3),this.container.addChild(this.whiteCover),this.container.addChild(this.topEdge),this.container.addChild(this.bottomEdge),this.container.addChild(this.leftEdge),this.container.addChild(this.rightEdge),this.animation=new TimelineMax,this.animation.add([TweenMax.to(this.whiteCover,.5,{alpha:0})]),this.animation.add([TweenMax.to(this.leftCheek.scale,.3,{x:1.09,y:1.09,ease:Power1.easeInOut,repeatDelay:.3,repeat:-1,yoyo:!0}),TweenMax.to(this.rightCheek.scale,.3,{x:1.1,y:1.1,ease:Power1.easeInOut,repeatDelay:.3,repeat:-1,yoyo:!0,delay:.1})],0),this.animation.add([TweenMax.from(this.singleBubble.position,8,{x:0,y:this.singleBubble.position.y+50,ease:Power1.easeOut}),TweenMax.to(this.singleBubble,8,{rotation:2*Math.PI,ease:Power0.easeOut}),TweenMax.to(this.leftEye.position,.5,{x:this.leftEye.position.x-10,delay:2}),TweenMax.to(this.rightEye.position,.5,{x:this.rightEye.position.x-10,delay:2})],1),this.animation.add([TweenMax.to(this.leftEye.position,1,{x:this.leftEye.position.x+5,delay:1}),TweenMax.to(this.leftEye.position,1,{y:this.leftEye.position.y-4,delay:1}),TweenMax.to(this.rightEye.position,1,{y:this.rightEye.position.y-3,delay:1})],5.5),this.animation.add([TweenMax.to(this.bubble1.position,6,{x:400}),TweenMax.to(this.bubble1,8,{rotation:2*Math.PI,ease:Power0.easeOut}),TweenMax.to(this.bubble2.position,6,{x:200,delay:.3}),TweenMax.to(this.bubble2,8,{rotation:2*Math.PI,ease:Power0.easeOut}),TweenMax.to(this.bubble3.position,6,{x:300,delay:.5}),TweenMax.to(this.bubble3,8,{rotation:2*Math.PI,ease:Power0.easeOut})],6),this.animation.add([TweenMax.to(this.singleBubble.scale,.05,{x:1.5,y:1.5}),TweenMax.to(this.singleBubble,.05,{alpha:0,delay:.05}),TweenMax.to(this.arm.position,1,{x:110}),TweenMax.from(this.bubbleGroup.position,1,{x:0}),TweenMax.to(this.leftEye.position,.3,{x:this.leftEye.position.x-13,delay:.3}),TweenMax.to(this.rightEye.position,.3,{y:this.rightEye.position.y+2,delay:.3}),TweenMax.to(this.leftEye.position,.3,{y:this.leftEye.position.y+3,delay:.3})],8),this.animation.add([TweenMax.to(this.meowScene2.position,.8,{x:-1024,ease:Power3.easeInOut}),TweenMax.to(this.meowScene3.position,.8,{x:0,ease:Power3.easeInOut})],9),this.animation.add([TweenMax.to(this.runGary.position,5,{x:1400,delay:0}),TweenMax.to(this.arm2.position,3,{x:200}),TweenMax.from(this.arm2,.2,{alpha:0}),TweenMax.from(this.bubbleGroup2.position,4,{x:0})],8.8),this.animation.call(Game.playSound,["woosh16"],this,9),this.animation.call(Game.playSound,["gary-meow7"],this,9),this.animation.call(Game.playSound,["spongebob-laugh1"],this,8),this.animation.call(Game.playSound,["chew2"],this,4),this.animation.call(Game.playSound,["chew5"],this,5),this.animation.call(Game.playSound,["chew3"],this,2),this.animation.call(Game.playSound,["chew4"],this,3),this.animation.call(Game.playSound,["chew3"],this,6),this.animation.call(Game.playSound,["chew4"],this,7),this.animation.call(Game.playSound,["chew5"],this,1),this.animation.call(this.game.setScene,["meowNoGameplayScene",!1],this.game,12)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"skipbutton":this.game.setScene("meowNoGameplayScene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},SlapHappyIntro1Scene=function(a){function b(b){a.call(this,b),this.tintColour=16768153,this.id="slapHappyIntro1Scene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.game.ui.setUI("skip"),this.setBackgroundColor(11714614),this.coverHolder=Game.displayStore.getContainer("cover-holder"),this.container.addChild(this.coverHolder),this.sand1=Game.displayStore.getSprite("intro-slap-sand"),this.sand2=Game.displayStore.getSprite("intro-slap-sand"),this.sand3=Game.displayStore.getSprite("intro-slap-sand"),this.sand4=Game.displayStore.getSprite("intro-slap-sand"),this.sand2.position.x=Game.stageWidth,this.sand3.position.y=Game.stageHeight/2,this.sand4.position.y=Game.stageHeight/2,this.sand4.position.x=Game.stageWidth,this.sand2.scale.x=-1,this.sand4.scale.x=-1,this.bed=Game.displayStore.getSprite("intro-slap-bed"),this.bed2=Game.displayStore.getSprite("intro-slap-bed"),this.bed.position.x=0,this.bed2.scale.x=-1,this.bed2.position.x=1024,this.squidward=Game.displayStore.getSprite("intro-slap-squidward"),this.squidward.position.x=512,this.squidward.position.y=450,this.cover=Game.displayStore.getSprite("intro-slap-cover"),this.cover2=Game.displayStore.getSprite("intro-slap-cover"),this.cover.position.x=70,this.cover2.position.x=69+2*this.cover.width,this.cover2.scale.x=-1,this.coverHolder.addChild(this.cover),this.coverHolder.addChild(this.cover2),this.leftHand=Game.displayStore.getSprite("intro-slap-hand"),this.rightHand=Game.displayStore.getSprite("intro-slap-hand"),this.leftHand.scale.x=-1,this.leftHand.position.x=300,this.cloud1=Game.displayStore.getSprite("intro-slap-cloud"),this.cloud2=Game.displayStore.getSprite("intro-slap-cloud"),this.cloud3=Game.displayStore.getSprite("intro-slap-cloud"),this.cloud1.position.x=Game.stageWidth/2,this.cloud1.position.y=123,this.cloud1.scale.x=this.cloud1.scale.y=.2,this.cloud2.position.x=211,this.cloud2.position.y=211,this.cloud2.scale.x=this.cloud2.scale.y=.6,this.cloud3.position.x=526,this.cloud3.position.y=385,this.cloud3.scale.x=this.cloud3.scale.y=1,this.sand1.tint=this.tintColour,this.sand2.tint=this.tintColour,this.sand3.tint=this.tintColour,this.sand4.tint=this.tintColour,this.container.addChild(this.sand1),this.container.addChild(this.sand2),this.container.addChild(this.sand3),this.container.addChild(this.sand4),this.container.addChild(this.bed),this.container.addChild(this.bed2),this.container.addChild(this.squidward),this.container.addChild(this.coverHolder),this.container.addChild(this.leftHand),this.container.addChild(this.rightHand),this.container.addChild(this.cloud1),this.container.addChild(this.cloud2),this.container.addChild(this.cloud3),this.cloud1.rotation=0,this.cloud2.rotation=0,this.cloud3.rotation=0,this.animation=new TimelineMax,this.animation.add([TweenMax.to(this.coverHolder,3,{y:this.coverHolder.position.y+15,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.squidward.scale,2,{x:1.03,y:1.03,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.leftHand,3,{y:this.leftHand.position.y+15,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.rightHand,3,{y:this.rightHand.position.y+15,ease:Power1.easeInOut,yoyo:!0,repeat:-1})]),this.animation.add([TweenMax.from(this.cloud1,.6,{alpha:0,ease:Power3.easeIn}),TweenMax.from(this.cloud1,.6,{rotate:-.5,ease:Power3.easeIn}),TweenMax.from(this.cloud1.scale,.6,{x:0,y:0,ease:Back.easeInOut}),TweenMax.to(this.cloud1.position,3,{x:this.cloud1.position.x+20,y:this.cloud1.position.y+15,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.from(this.cloud2,.6,{alpha:0,ease:Power3.easeIn,delay:.5}),TweenMax.from(this.cloud2.scale,.6,{x:0,y:0,ease:Back.easeInOut,delay:.5}),TweenMax.from(this.cloud2,.6,{rotate:.5,ease:Power3.easeIn,delay:.5}),TweenMax.to(this.cloud2.position,4,{x:this.cloud2.position.x+10,y:this.cloud2.position.y-15,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.from(this.cloud3,.6,{alpha:0,ease:Power3.easeIn,delay:1.3}),TweenMax.from(this.cloud3.scale,.6,{x:0,y:0,ease:Back.easeInOut,delay:1.3}),TweenMax.from(this.cloud1,.6,{rotate:-.5,ease:Power3.easeIn,delay:1.3}),TweenMax.to(this.cloud3.position,3,{x:this.cloud3.position.x-8,y:this.cloud3.position.y+1,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.to(this.cloud3.scale,2,{x:3,y:3,ease:Power3.easeInOut,delay:2.5}),TweenMax.to(this.cloud3,2,{rotate:1,ease:Power3.easeInOut,delay:2.5})],1.5),this.animation.call(this.game.setScene,["slapHappyIntro2Scene",!1],this.game,5.6)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"skipbutton":this.game.setScene("slapHappyIntro2Scene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},SlapHappyIntro2Scene=function(a){function b(b){a.call(this,b),this.id="slapHappyIntro2Scene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.game.ui.setUI("skip"),this.setBackgroundColor(11714614),this.spongebobs=new Array,this.cloud=Game.displayStore.getSprite("intro-slap-cloud"),this.slapScene1holder=Game.displayStore.getContainer("intro-slap-frame-2"),this.slapScene2holder=Game.displayStore.getContainer("intro-slap-frame-3"),this.slapScene1holder.position.x=0,this.slapScene2holder.position.x=1024,this.angrySquidward=this.slapScene1holder.getContainer("intro-angry-squidward"),this.squidwardRightArm=this.angrySquidward.getSprite("squidward-right-arm"),this.leftFrame1=Game.displayStore.getSprite("door-frame-left"),this.rightFrame1=Game.displayStore.getSprite("door-frame-right"),this.leftFrame2=Game.displayStore.getSprite("door-frame-left"),this.rightFrame2=Game.displayStore.getSprite("door-frame-right");for(var c=0;10>c;c++)this.spongebobs.push({sprite:Game.displayStore.getSprite("intro-slap-spongebob"),positionX:Game.getRandom(-100,500,!0),positionY:Game.getRandom(450,500,!0)});this.leftFrame1.position.x=0,this.leftFrame1.position.y=217,this.rightFrame1.position.x=100,this.rightFrame1.position.y=198,this.leftFrame2.position.x=0,this.leftFrame2.position.y=217,this.rightFrame2.position.x=100,this.rightFrame2.position.y=198,this.doorContainer=this.slapScene1holder.getContainer("door-container"),this.doorContainer2=this.slapScene2holder.getContainer("door-container2"),this.scaredSquidward=this.doorContainer2.getSprite("scared-squidward"),this.doorContainer2.addChild(this.leftFrame2);for(var c=0;c<this.spongebobs.length;c++)this.doorContainer2.addChild(this.spongebobs[c].sprite),this.spongebobs[c].sprite.position.x=this.spongebobs[c].positionX,this.spongebobs[c].sprite.position.y=this.spongebobs[c].positionY;this.whiteBlock=Game.displayStore.getSprite("intro-slap-white"),this.whiteBlock.width=600,this.whiteBlock.height=Game.stageHeight,this.doorContainer2.addChild(this.whiteBlock),this.doorContainer2.addChild(this.rightFrame2),this.doorContainer.addChild(this.leftFrame1),this.doorContainer.addChild(this.rightFrame1),this.doorContainer.setRegPoint(190,300,!0),this.topEdge=Game.displayStore.getSprite("intro-top-edge"),this.bottomEdge=Game.displayStore.getSprite("intro-top-edge"),this.leftEdge=Game.displayStore.getSprite("intro-left-edge"),this.rightEdge=Game.displayStore.getSprite("intro-left-edge"),this.topEdge.position.x=Game.stageWidth/2,this.topEdge.position.y=40,this.bottomEdge.position.y=Game.stageHeight-40,this.bottomEdge.scale.x=-1,this.bottomEdge.scale.y=-1,this.leftEdge.position.x=90,this.leftEdge.position.y=Game.stageHeight/2,this.rightEdge.position.x=Game.stageWidth-90,this.rightEdge.position.y=Game.stageHeight/2,this.rightEdge.scale.y=-1,this.rightEdge.scale.x=-1,this.cloud.position.x=526,this.cloud.position.y=385,this.cloud.scale.x=this.cloud.scale.y=3,this.cloud.rotation=0,this.container.addChild(this.cloud),this.container.addChild(this.slapScene1holder),this.container.addChild(this.slapScene2holder),this.container.addChild(this.topEdge),this.container.addChild(this.bottomEdge),this.container.addChild(this.leftEdge),this.container.addChild(this.rightEdge),this.animation=new TimelineMax,this.animation.add([TweenMax.to(this.doorContainer.scale,.2,{x:1.03,y:1.03,ease:Back.easeInOut,yoyo:!0,repeat:16}),TweenMax.to(this.angrySquidward.position,2,{x:250,ease:Power0.easeInOut}),TweenMax.to(this.angrySquidward.position,.3,{y:this.angrySquidward.position.y-10,Ease:Power1.easeInOut,repeatDelay:.5,repeat:9,yoyo:!0}),TweenMax.to(this.squidwardRightArm,1.2,{rotation:-1,ease:Power1.easeInOut,yoyo:!0,repeat:2})],0),this.animation.add([TweenMax.to(this.slapScene1holder.position,1,{x:-1024,ease:Power1.easeInOut}),TweenMax.to(this.slapScene2holder.position,1,{x:0,ease:Power1.easeInOut})],2),this.animation.call(Game.playSound,["sb-hey"],this,2),this.animation.call(Game.playSound,["spongebob-laugh1"],this,2.1),this.animation.call(Game.playSound,["spongebob-laugh1"],this,2.5),this.animation.call(Game.playSound,["spongebob-laugh2"],this,2),this.animation.call(Game.playSound,["spongebob-woah"],this,2.3),this.animation.call(Game.playSound,["squidward-sigh"],this,0),this.animation.call(Game.playSound,["squidward-walk"],this,0),this.animation.call(Game.playSound,["pop8"],this,.3),this.animation.call(Game.playSound,["pop9"],this,.6),this.animation.call(Game.playSound,["pop8"],this,.9),this.animation.call(Game.playSound,["pop9"],this,1.2),this.animation.call(Game.playSound,["pop8"],this,1.5),this.animation.call(Game.playSound,["pop9"],this,1.8),this.animation.call(Game.playSound,["sq-bad2"],this,2.2),this.animation.call(Game.stopSound,["squidward-walk"],this,2),this.animation.add([TweenMax.to(this.scaredSquidward.position,3,{x:this.scaredSquidward.position.x-800,ease:Power0.easeIn}),TweenMax.to(this.scaredSquidward.position,.2,{y:this.scaredSquidward.position.y-10,Ease:Power1.easeInOut,repeatDelay:.2,repeat:9,yoyo:!0}),TweenMax.to(this.scaredSquidward.scale,3,{x:1.01,y:1.01,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[0].sprite.position,3,{x:this.spongebobs[0].sprite.position.x-650,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[1].sprite.position,3,{x:this.spongebobs[1].sprite.position.x-600,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[2].sprite.position,3,{x:this.spongebobs[2].sprite.position.x-640,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[3].sprite.position,3,{x:this.spongebobs[3].sprite.position.x-620,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[4].sprite.position,3,{x:this.spongebobs[4].sprite.position.x-630,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[5].sprite.position,3,{x:this.spongebobs[5].sprite.position.x-660,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[6].sprite.position,3,{x:this.spongebobs[6].sprite.position.x-650,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[7].sprite.position,3,{x:this.spongebobs[7].sprite.position.x-620,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[8].sprite.position,3,{x:this.spongebobs[8].sprite.position.x-650,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[9].sprite.position,3,{x:this.spongebobs[9].sprite.position.x-610,ease:Power0.easeIn}),TweenMax.to(this.spongebobs[0].sprite.position,.3,{y:this.spongebobs[0].sprite.position.y-10,yoyo:!0,repeat:-1,ease:Power0.easeIn,delay:0}),TweenMax.to(this.spongebobs[1].sprite.position,.3,{y:this.spongebobs[1].sprite.position.y-10,yoyo:!0,repeat:-1,ease:Power0.easeIn,delay:.2}),TweenMax.to(this.spongebobs[2].sprite.position,.3,{y:this.spongebobs[2].sprite.position.y-10,yoyo:!0,repeat:-1,ease:Power0.easeIn,delay:.1}),TweenMax.to(this.spongebobs[3].sprite.position,.3,{y:this.spongebobs[3].sprite.position.y-10,yoyo:!0,repeat:-1,ease:Power0.easeIn,delay:0}),TweenMax.to(this.spongebobs[4].sprite.position,.3,{y:this.spongebobs[4].sprite.position.y-10,yoyo:!0,repeat:-1,ease:Power0.easeIn,delay:.1}),TweenMax.to(this.spongebobs[5].sprite.position,.3,{y:this.spongebobs[5].sprite.position.y-10,yoyo:!0,repeat:-1,ease:Power0.easeIn,delay:.2}),TweenMax.to(this.spongebobs[6].sprite.position,.3,{y:this.spongebobs[6].sprite.position.y-10,yoyo:!0,repeat:-1,ease:Power0.easeIn,delay:.05}),TweenMax.to(this.spongebobs[7].sprite.position,.3,{y:this.spongebobs[7].sprite.position.y-10,yoyo:!0,repeat:-1,ease:Power0.easeIn,delay:.2}),TweenMax.to(this.spongebobs[8].sprite.position,.3,{y:this.spongebobs[8].sprite.position.y-10,yoyo:!0,repeat:-1,ease:Power0.easeIn,delay:0}),TweenMax.to(this.spongebobs[9].sprite.position,.3,{y:this.spongebobs[9].sprite.position.y-10,yoyo:!0,repeat:-1,ease:Power0.easeIn,delay:.1})],2),this.animation.call(this.game.setScene,["slapHappyGameplayScene",!1],this.game,5)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"skipbutton":this.game.setScene("slapHappyGameplayScene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill(),Game.stopSound("squidward-walk"),Game.stopSound("squidward-sigh")},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryIntro1Scene=function(a){function b(b){a.call(this,b),this.id="glideToGloryIntro1Scene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.game.ui.setUI("skip"),this.setBackgroundColor(11714614),this.coverHolder=Game.displayStore.getContainer("cover-holder"),this.container.addChild(this.coverHolder),this.sand1=Game.displayStore.getSprite("intro-glide-sand"),this.sand2=Game.displayStore.getSprite("intro-glide-sand"),this.sand3=Game.displayStore.getSprite("intro-glide-sand"),this.sand4=Game.displayStore.getSprite("intro-glide-sand"),this.sand2.position.x=Game.stageWidth,this.sand3.position.y=Game.stageHeight/2,this.sand4.position.y=Game.stageHeight/2,this.sand4.position.x=Game.stageWidth,this.sand2.scale.x=-1,this.sand4.scale.x=-1,this.bed=Game.displayStore.getSprite("intro-glide-bed"),this.bed2=Game.displayStore.getSprite("intro-glide-bed"),this.bed.position.x=0,this.bed2.scale.x=-1,this.bed2.position.x=1024,this.plankton=Game.displayStore.getSprite("intro-plankton"),this.plankton.position.x=512,this.plankton.position.y=340,this.cover=Game.displayStore.getSprite("intro-glide-cover"),this.cover2=Game.displayStore.getSprite("intro-glide-cover"),this.cover.position.x=70,this.cover2.position.x=69+2*this.cover.width,this.cover2.scale.x=-1,this.coverHolder.addChild(this.cover),this.coverHolder.addChild(this.cover2),this.leftHand=Game.displayStore.getSprite("intro-glide-hand"),this.rightHand=Game.displayStore.getSprite("intro-glide-hand"),this.leftHand.scale.x=-1,this.leftHand.position.x=360,this.cloud1=Game.displayStore.getSprite("intro-cloud"),this.cloud2=Game.displayStore.getSprite("intro-cloud"),this.cloud3=Game.displayStore.getSprite("intro-cloud"),this.cloud1.position.x=Game.stageWidth/2,this.cloud1.position.y=123,this.cloud1.scale.x=this.cloud1.scale.y=.2,this.cloud2.position.x=211,this.cloud2.position.y=211,this.cloud2.scale.x=this.cloud2.scale.y=.6,this.cloud3.position.x=526,this.cloud3.position.y=385,this.cloud3.scale.x=this.cloud3.scale.y=1,
this.sand1.tint=10996890,this.sand2.tint=10996890,this.sand3.tint=10996890,this.sand4.tint=10996890,this.container.addChild(this.sand1),this.container.addChild(this.sand2),this.container.addChild(this.sand3),this.container.addChild(this.sand4),this.container.addChild(this.bed),this.container.addChild(this.bed2),this.container.addChild(this.plankton),this.container.addChild(this.coverHolder),this.container.addChild(this.leftHand),this.container.addChild(this.rightHand),this.container.addChild(this.cloud1),this.container.addChild(this.cloud2),this.container.addChild(this.cloud3),this.cloud1.rotation=0,this.cloud2.rotation=0,this.cloud3.rotation=0,this.animation=new TimelineMax,this.animation.add([TweenMax.to(this.coverHolder,3,{y:this.coverHolder.position.y+15,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.plankton.scale,2,{x:1.03,y:1.03,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.leftHand,3,{y:this.leftHand.position.y+15,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.rightHand,3,{y:this.rightHand.position.y+15,ease:Power1.easeInOut,yoyo:!0,repeat:-1})]),this.animation.add([TweenMax.from(this.cloud1,.6,{alpha:0,ease:Power3.easeIn}),TweenMax.from(this.cloud1,.6,{rotate:-.5,ease:Power3.easeIn}),TweenMax.from(this.cloud1.scale,.6,{x:0,y:0,ease:Back.easeInOut}),TweenMax.to(this.cloud1.position,3,{x:this.cloud1.position.x+20,y:this.cloud1.position.y+15,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.from(this.cloud2,.6,{alpha:0,ease:Power3.easeIn,delay:.5}),TweenMax.from(this.cloud2.scale,.6,{x:0,y:0,ease:Back.easeInOut,delay:.5}),TweenMax.from(this.cloud2,.6,{rotate:.5,ease:Power3.easeIn,delay:.5}),TweenMax.to(this.cloud2.position,4,{x:this.cloud2.position.x+10,y:this.cloud2.position.y-15,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.from(this.cloud3,.6,{alpha:0,ease:Power3.easeIn,delay:1.3}),TweenMax.from(this.cloud3.scale,.6,{x:0,y:0,ease:Back.easeInOut,delay:1.3}),TweenMax.from(this.cloud1,.6,{rotate:-.5,ease:Power3.easeIn,delay:1.3}),TweenMax.to(this.cloud3.position,3,{x:this.cloud3.position.x-8,y:this.cloud3.position.y+1,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.to(this.cloud3.scale,2,{x:3,y:3,ease:Power3.easeInOut,delay:2.5}),TweenMax.to(this.cloud3,2,{rotate:1,ease:Power3.easeInOut,delay:2.5})],1.5),this.animation.call(this.game.setScene,["glideToGloryIntro2Scene",!1],this.game,5.6)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"skipbutton":this.game.setScene("glideToGloryIntro2Scene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GlideToGloryIntro2Scene=function(a){function b(b){a.call(this,b),this.id="glideToGloryIntro2Scene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.game.ui.setUI("skip"),this.setBackgroundColor(11714614),this.cloud=Game.displayStore.getSprite("intro-cloud"),this.introframe2Holder=Game.displayStore.getContainer("intro-frame-2"),this.introframe3Holder=Game.displayStore.getContainer("intro-frame-3"),this.introframe4Holder=Game.displayStore.getContainer("intro-frame-4"),this.ventFront=Game.displayStore.getSprite("intro-vent-front"),this.planktonBottle=this.introframe2Holder.getSprite("intro-plankton-bottle"),this.krabs=this.introframe2Holder.getSprite("intro-krabs"),this.planktonFlying=Game.displayStore.getSprite("intro-plankton-flying"),this.planktonFlying2=Game.displayStore.getSprite("intro-plankton-flying"),this.introframe3Holder.addChild(this.planktonFlying),this.introframe4Holder.addChild(this.planktonFlying2),this.introframe4Holder.addChild(this.ventFront),this.planktonFlying.position.x=503,this.planktonFlying.position.y=-150,this.planktonFlying.scale.y=this.planktonFlying.scale.x=1,this.planktonFlying2.position.x=155,this.planktonFlying2.position.y=466,this.planktonFlying2.scale.y=this.planktonFlying2.scale.x=.8,this.introframe3Holder.position.x=1024,this.introframe4Holder.position.x=2048,this.topEdge=Game.displayStore.getSprite("intro-top-edge"),this.bottomEdge=Game.displayStore.getSprite("intro-top-edge"),this.leftEdge=Game.displayStore.getSprite("intro-left-edge"),this.rightEdge=Game.displayStore.getSprite("intro-left-edge"),this.topEdge.position.x=Game.stageWidth/2,this.topEdge.position.y=40,this.bottomEdge.position.y=Game.stageHeight-40,this.bottomEdge.scale.x=-1,this.bottomEdge.scale.y=-1,this.leftEdge.position.x=90,this.leftEdge.position.y=Game.stageHeight/2,this.rightEdge.position.x=Game.stageWidth-90,this.rightEdge.position.y=Game.stageHeight/2,this.rightEdge.scale.y=-1,this.rightEdge.scale.x=-1,this.cloud.position.x=526,this.cloud.position.y=385,this.cloud.scale.x=this.cloud.scale.y=3,this.cloud.rotation=0,this.container.addChild(this.cloud),this.container.addChild(this.introframe2Holder),this.container.addChild(this.introframe3Holder),this.container.addChild(this.introframe4Holder),this.container.addChild(this.topEdge),this.container.addChild(this.bottomEdge),this.container.addChild(this.leftEdge),this.container.addChild(this.rightEdge),this.animation=new TimelineMax,this.animation.add([TweenMax.to(this.planktonBottle.position,4,{x:700,ease:Power0.easeIn}),TweenMax.to(this.planktonBottle.position,.3,{y:this.planktonBottle.position.y-8,ease:Power2.easeIn,yoyo:!0,repeat:10}),TweenMax.to(this.krabs.position,4,{x:this.krabs.position.x-80,ease:Power2.easeIn})],0),this.animation.call(Game.playSound,["plankton-steal"],this,0),this.animation.add([TweenMax.to(this.introframe2Holder.position,1,{x:-1124,ease:Power4.easeInOut}),TweenMax.to(this.introframe3Holder.position,1,{x:0,ease:Power4.easeInOut}),TweenMax.to(this.introframe4Holder.position,1,{x:1024,ease:Power4.easeInOut})],3),this.animation.add([TweenMax.from(this.planktonFlying.position,4,{x:250,y:250,ease:Power0.easeIn}),TweenMax.from(this.planktonFlying.scale,4,{x:.7,y:.7,ease:Power0.easeIn})],2.8),this.animation.add([TweenMax.to(this.introframe2Holder.position,1,{x:-2048,ease:Power4.easeInOut}),TweenMax.to(this.introframe3Holder.position,1,{x:-1024,ease:Power4.easeInOut}),TweenMax.to(this.introframe4Holder.position,1,{x:0,ease:Power4.easeInOut})],5),this.animation.add([TweenMax.to(this.planktonFlying2.position,4,{y:-200,ease:Power1.easeIn})],4.5),this.animation.call(Game.playSound,["plankton-laugh"],this,5.5),this.animation.call(this.game.setScene,["glideToGloryGameplayScene",!1],this.game,9)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"skipbutton":this.game.setScene("glideToGloryGameplayScene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},PattyPileUpIntro1Scene=function(a){function b(b){a.call(this,b),this.id="pattyPileUpIntro1Scene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.game.ui.setUI("skip"),this.setBackgroundColor(11714614),this.coverHolder=Game.displayStore.getContainer("intro-scene-holder"),this.coverHolder=Game.displayStore.getContainer("cover-holder"),this.container.addChild(this.coverHolder),this.sand1=Game.displayStore.getSprite("intro-sand"),this.sand2=Game.displayStore.getSprite("intro-sand"),this.sand3=Game.displayStore.getSprite("intro-sand"),this.sand4=Game.displayStore.getSprite("intro-sand"),this.sand2.position.x=Game.stageWidth,this.sand3.position.y=Game.stageHeight/2,this.sand4.position.y=Game.stageHeight/2,this.sand4.position.x=Game.stageWidth,this.sand2.scale.x=-1,this.sand4.scale.x=-1,this.bed=Game.displayStore.getSprite("intro-bed"),this.bed2=Game.displayStore.getSprite("intro-bed"),this.bed.position.x=0,this.bed2.scale.x=-1,this.bed2.position.x=1024,this.spongebob=Game.displayStore.getSprite("intro-spongebob"),this.spongebob.position.x=512,this.spongebob.position.y=450,this.cover=Game.displayStore.getSprite("intro-cover"),this.cover2=Game.displayStore.getSprite("intro-cover"),this.cover.position.x=70,this.cover2.position.x=69+2*this.cover.width,this.cover2.scale.x=-1,this.coverHolder.addChild(this.cover),this.coverHolder.addChild(this.cover2),this.leftHand=Game.displayStore.getSprite("intro-hand"),this.rightHand=Game.displayStore.getSprite("intro-hand"),this.leftHand.scale.x=-1,this.leftHand.position.x=280,this.cloud1=Game.displayStore.getSprite("intro-cloud"),this.cloud2=Game.displayStore.getSprite("intro-cloud"),this.cloud3=Game.displayStore.getSprite("intro-cloud"),this.cloud1.position.x=Game.stageWidth/2,this.cloud1.position.y=123,this.cloud1.scale.x=this.cloud1.scale.y=.2,this.cloud2.position.x=211,this.cloud2.position.y=211,this.cloud2.scale.x=this.cloud2.scale.y=.6,this.cloud3.position.x=526,this.cloud3.position.y=385,this.cloud3.scale.x=this.cloud3.scale.y=1,this.sand1.tint=16776640,this.sand2.tint=16776640,this.sand3.tint=16776640,this.sand4.tint=16776640,this.container.addChild(this.sand1),this.container.addChild(this.sand2),this.container.addChild(this.sand3),this.container.addChild(this.sand4),this.container.addChild(this.bed),this.container.addChild(this.bed2),this.container.addChild(this.spongebob),this.container.addChild(this.coverHolder),this.container.addChild(this.leftHand),this.container.addChild(this.rightHand),this.container.addChild(this.cloud1),this.container.addChild(this.cloud2),this.container.addChild(this.cloud3),this.cloud1.rotation=0,this.cloud2.rotation=0,this.cloud3.rotation=0,this.animation=new TimelineMax,this.animation.add([TweenMax.to(this.coverHolder,3,{y:this.coverHolder.position.y+15,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.spongebob.scale,2,{x:1.03,y:1.03,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.leftHand,3,{y:this.leftHand.position.y+15,ease:Power1.easeInOut,yoyo:!0,repeat:-1}),TweenMax.to(this.rightHand,3,{y:this.rightHand.position.y+15,ease:Power1.easeInOut,yoyo:!0,repeat:-1})]),this.animation.add([TweenMax.from(this.cloud1,.6,{alpha:0,ease:Power3.easeIn}),TweenMax.from(this.cloud1,.6,{rotate:-.5,ease:Power3.easeIn}),TweenMax.from(this.cloud1.scale,.6,{x:0,y:0,ease:Back.easeInOut}),TweenMax.to(this.cloud1.position,3,{x:this.cloud1.position.x+20,y:this.cloud1.position.y+15,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.from(this.cloud2,.6,{alpha:0,ease:Power3.easeIn,delay:.5}),TweenMax.from(this.cloud2.scale,.6,{x:0,y:0,ease:Back.easeInOut,delay:.5}),TweenMax.from(this.cloud2,.6,{rotate:.5,ease:Power3.easeIn,delay:.5}),TweenMax.to(this.cloud2.position,4,{x:this.cloud2.position.x+10,y:this.cloud2.position.y-15,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.from(this.cloud3,.6,{alpha:0,ease:Power3.easeIn,delay:1.3}),TweenMax.from(this.cloud3.scale,.6,{x:0,y:0,ease:Back.easeInOut,delay:1.3}),TweenMax.from(this.cloud1,.6,{rotate:-.5,ease:Power3.easeIn,delay:1.3}),TweenMax.to(this.cloud3.position,3,{x:this.cloud3.position.x-8,y:this.cloud3.position.y+1,yoyo:!0,repeat:-1,ease:Back.easeInOut}),TweenMax.to(this.cloud3.scale,2,{x:3,y:3,ease:Power3.easeInOut,delay:2.5}),TweenMax.to(this.cloud3,2,{rotate:1,ease:Power3.easeInOut,delay:2.5})],1.5),this.animation.call(this.game.setScene,["pattyPileUpIntro2Scene",!1],this.game,5.6)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"skipbutton":this.game.setScene("pattyPileUpIntro2Scene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill()},b}(Scene),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},PattyPileUpIntro2Scene=function(a){function b(b){a.call(this,b),this.id="pattyPileUpIntro2Scene"}return __extends(b,a),b.prototype.init=function(b){a.prototype.init.call(this),this.game.ui.setUI("skip"),this.setBackgroundColor(11714614),this.cloud=Game.displayStore.getSprite("intro-cloud"),this.pattyScene1=Game.displayStore.getContainer("intro-patty-scene-1"),this.pattyScene2=Game.displayStore.getContainer("intro-patty-scene-2"),this.fishHolder=this.pattyScene1.getContainer("fish-chef-holder"),this.spongebobChefHolder=this.pattyScene2.getContainer("spongebob-chef-holder"),this.pattyScene1.position.x=0,this.pattyScene2.position.x=1024,this.sign=this.pattyScene1.getSprite("intro-sign"),this.sign.position.x=Game.stageWidth/2,this.meatPile=this.pattyScene2.getSprite("meat-stack"),this.patty1=Game.displayStore.getSprite("intro-patty"),this.patty2=Game.displayStore.getSprite("intro-patty"),this.patty3=Game.displayStore.getSprite("intro-patty"),this.patty4=Game.displayStore.getSprite("intro-patty"),this.patty1.position.x=500,this.patty1.position.y=-100,this.patty2.position.x=500,this.patty2.position.y=-100,this.patty3.position.x=500,this.patty3.position.y=-100,this.patty4.position.x=514,this.patty4.position.y=-100,this.fishArm=this.fishHolder.getSprite("intro-fish-arm"),this.fish=this.fishHolder.getSprite("intro-fish"),this.spongebobChef=this.spongebobChefHolder.getSprite("intro-spongebobChef"),this.spongebobChefArm=this.spongebobChefHolder.getSprite("intro-spongebobChefArm"),this.topEdge=Game.displayStore.getSprite("intro-top-edge"),this.bottomEdge=Game.displayStore.getSprite("intro-top-edge"),this.leftEdge=Game.displayStore.getSprite("intro-left-edge"),this.rightEdge=Game.displayStore.getSprite("intro-left-edge"),this.topEdge.position.x=Game.stageWidth/2,this.topEdge.position.y=40,this.bottomEdge.position.y=Game.stageHeight-40,this.bottomEdge.scale.x=-1,this.bottomEdge.scale.y=-1,this.leftEdge.position.x=90,this.leftEdge.position.y=Game.stageHeight/2,this.rightEdge.position.x=Game.stageWidth-90,this.rightEdge.position.y=Game.stageHeight/2,this.rightEdge.scale.y=-1,this.rightEdge.scale.x=-1,this.cloud.position.x=526,this.cloud.position.y=385,this.cloud.scale.x=this.cloud.scale.y=3,this.cloud.rotation=0,this.container.addChild(this.cloud),this.container.addChild(this.pattyScene1),this.container.addChild(this.pattyScene2),this.container.addChild(this.patty1),this.container.addChild(this.patty2),this.container.addChild(this.patty3),this.container.addChild(this.patty4),this.container.addChild(this.topEdge),this.container.addChild(this.bottomEdge),this.container.addChild(this.leftEdge),this.container.addChild(this.rightEdge),this.animation=new TimelineMax,this.animation.add([TweenMax.from(this.fishHolder.position,1,{x:-100,ease:Power2.easeInOut}),TweenMax.to(this.fishArm,.8,{rotation:-2,ease:Back.easeInOut})]),this.animation.call(Game.playSound,["woosh1"],this,0),this.animation.add([TweenMax.to(this.pattyScene1.position,.8,{x:-1024,ease:Power1.easeInOut}),TweenMax.to(this.pattyScene2.position,.7,{x:0,ease:Power1.easeInOut})],2),this.animation.add([TweenMax.from(this.meatPile,3,{rotation:.05,ease:Back.easeInOut,yoyo:!0}),TweenMax.from(this.spongebobChefArm,.5,{rotation:-1,ease:Power2.easeInOut,yoyo:!0,repeat:5,repeatDelay:.5}),TweenMax.from(this.spongebobChefArm.position,.5,{x:this.spongebobChefArm.position.x+50,ease:Power2.easeInOut,yoyo:!0,repeat:5,repeatDelay:.5})],3),this.animation.call(Game.playSound,["spongebob-hungry"],this,3.2),this.animation.call(Game.playSound,["woosh1"],this,3),this.animation.call(Game.playSound,["woosh2"],this,5),this.animation.call(Game.playSound,["woosh3"],this,7),this.animation.call(Game.playSound,["meat1"],this,5),this.animation.call(Game.playSound,["meat2"],this,7),this.animation.call(Game.playSound,["meat3"],this,9),this.animation.call(Game.playSound,["spongebob-woah"],this,9),this.animation.add([TweenMax.from(this.patty1.position,1,{x:20,y:700,ease:Power3.easeOut}),TweenMax.from(this.patty1,1,{rotation:-2,ease:Power3.easeOut}),TweenMax.from(this.patty1.scale,2,{x:.8,y:.8,ease:Power3.easeOut}),TweenMax.to(this.patty1.position,1,{x:715,y:290,ease:Power4.easeIn,delay:1}),TweenMax.to(this.patty1.scale,.2,{x:1.05,y:.9,ease:Back.easeOut,delay:2}),TweenMax.to(this.meatPile.scale,.2,{x:1.01,y:.99,ease:Back.easeOut,delay:2}),TweenMax.to(this.meatPile.scale,.2,{x:1,y:1,ease:Back.easeOut,delay:2.2}),TweenMax.to(this.patty1.scale,.2,{x:1,y:1,ease:Back.easeOut,delay:2.2})],3.2),this.animation.add([TweenMax.from(this.patty2.position,1,{x:20,y:700,ease:Power3.easeOut}),TweenMax.from(this.patty2,1,{rotation:-2,ease:Power3.easeOut}),TweenMax.from(this.patty2.scale,2,{x:.8,y:.8,ease:Power3.easeOut}),TweenMax.to(this.patty2.position,1,{x:744,y:259,ease:Power4.easeIn,delay:1}),TweenMax.to(this.patty2.scale,.2,{x:1.05,y:.9,ease:Back.easeOut,delay:2}),TweenMax.to(this.meatPile.scale,.2,{x:1.01,y:.99,ease:Back.easeOut,delay:2}),TweenMax.to(this.patty1.scale,.2,{x:1.01,y:.9,ease:Back.easeOut,delay:2}),TweenMax.to(this.meatPile.scale,.2,{x:1,y:1,ease:Back.easeOut,delay:2.2}),TweenMax.to(this.patty1.scale,.2,{x:1,y:1,ease:Back.easeOut,delay:2.2}),TweenMax.to(this.patty2.scale,.2,{x:1,y:1,ease:Back.easeOut,delay:2.2})],5.2),this.animation.add([TweenMax.from(this.patty3.position,1,{x:20,y:700,ease:Power3.easeOut}),TweenMax.from(this.patty3,1,{rotation:-2,ease:Power3.easeOut}),TweenMax.from(this.patty3.scale,2,{x:.8,y:.8,ease:Power3.easeOut}),TweenMax.to(this.patty3.position,1,{x:717,y:234,ease:Power4.easeIn,delay:1}),TweenMax.to(this.patty3.scale,.2,{x:1.05,y:.9,ease:Back.easeOut,delay:2}),TweenMax.to(this.patty1.scale,.2,{x:1.01,y:.9,ease:Back.easeOut,delay:2}),TweenMax.to(this.patty1.scale,.2,{x:1,y:1,ease:Back.easeOut,delay:2.2}),TweenMax.to(this.patty2.scale,.2,{x:1.01,y:.9,ease:Back.easeOut,delay:2}),TweenMax.to(this.patty2.scale,.2,{x:1,y:1,ease:Back.easeOut,delay:2.2}),TweenMax.to(this.meatPile.scale,.2,{x:1.01,y:.99,ease:Back.easeOut,delay:2}),TweenMax.to(this.meatPile.scale,.2,{x:1,y:1,ease:Back.easeOut,delay:2.2}),TweenMax.to(this.patty3.scale,.2,{x:1,y:1,ease:Back.easeOut,delay:2.2})],7.2),this.animation.timeScale(1.5),this.animation.call(this.game.setScene,["pattyPileUpGameplayScene",!1],this.game,10.5)},b.prototype.uiClicked=function(b){switch(a.prototype.uiClicked.call(this,b),b.id){case"skipbutton":this.game.setScene("pattyPileUpGameplayScene",!1)}},b.prototype.uiRolledOver=function(b){a.prototype.uiRolledOver.call(this,b)},b.prototype.tick=function(){a.prototype.tick.call(this)},b.prototype.keyDown=function(a){},b.prototype.keyUp=function(a){},b.prototype.pause=function(){},b.prototype.resume=function(){},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animation&&this.animation.kill()},b}(Scene),TitleSceneZManager=function(){function a(a){this.spawnYpos=700,this.maxDelay=240,this.scene=a,this.minSpeed=.03,this.maxSpeed=.06,this.minRange=20,this.maxRange=60,this.frameCounter=0,this.zArray=new Array}return a.prototype.addZ=function(a,b){var c=Game.getRandom(this.minRange,this.maxRange),d=Game.getRandom(this.minSpeed,this.maxSpeed),e=Game.getRandom(-360,360),f=Game.getRandom(30,this.maxDelay,!0);a.rotation=-.5;var g=TweenMax.to(a,Game.getRandom(.5,1),{rotation:.5,ease:Sine.easeInOut,repeat:-1,yoyo:!0});this.zArray.push({sprite:a,range:c,speed:d,startPos:b,counter:e,rotateTween:g,startDelay:f}),this.scene.container.addChild(a),a.position.y=this.spawnYpos,a.position.x=-200,a.scale.x=a.scale.y=20*d,a.blendMode=PIXI.BLEND_MODES.ADD},a.prototype.tick=function(){if(this.frameCounter<this.maxDelay&&this.frameCounter++,this.zArray)for(var a=0;a<this.zArray.length;a++){var b=this.zArray[a];b.startDelay>this.frameCounter||(b.counter+=b.speed,b.counter>=360&&(b.counter=-360),b.sprite.position.x=b.startPos+Math.sin(b.counter)*b.range,b.sprite.position.y-=30*b.speed,b.sprite.position.y<-50&&(b.sprite.position.y=this.spawnYpos))}},a.prototype.destroy=function(){for(var a=0;a<this.zArray.length;a++)Game.displayStore.returnPooledItem(this.zArray[a].sprite),this.zArray[a].rotateTween.kill(),this.zArray[a]=null;this.zArray=null},a}(),MeowNoSceneBubbleManager=function(){function a(a){this.spawnYpos=Game.getRandom(100,200),this.maxDelay=400,this.scene=a,this.minSpeed=.01,this.maxSpeed=.03,this.minRange=20,this.maxRange=60,this.frameCounter=0,this.bubbleArray=new Array}return a.prototype.addBubble=function(a,b){var c=Game.getRandom(this.minRange,this.maxRange),d=Game.getRandom(this.minSpeed,this.maxSpeed),e=Game.getRandom(-360,360),f=Game.getRandom(205,this.maxDelay,!0);a.rotation=-.5;var g=TweenMax.to(a,Game.getRandom(.5,1),{rotation:.5,ease:Sine.easeInOut,repeat:-1,yoyo:!0});this.bubbleArray.push({sprite:a,range:c,speed:d,startPos:b,counter:e,rotateTween:g,startDelay:f}),this.scene.container.addChild(a),a.position.y=this.spawnYpos,a.position.x=-200,a.scale.x=a.scale.y=40*d},a.prototype.tick=function(){this.frameCounter<this.maxDelay&&this.frameCounter++;for(var a=0;a<this.bubbleArray.length;a++){var b=this.bubbleArray[a];b.startDelay>this.frameCounter||(b.counter+=b.speed,b.counter>=360&&(b.counter=-360),b.sprite.position.x=b.startPos+Math.sin(b.counter)*b.range,b.sprite.position.y-=30*b.speed,b.sprite.position.y<-50&&(b.sprite.position.y=this.spawnYpos))}},a.prototype.destroy=function(){for(var a=0;a<this.bubbleArray.length;a++)Game.displayStore.returnPooledItem(this.bubbleArray[a].sprite),this.bubbleArray[a].rotateTween.kill(),this.bubbleArray[a]=null;this.bubbleArray=null},a}(),UI=function(){function a(a){this.tweens=new Array,this.uiInitialised=!1,this.up=!1,this.currentKeyCycledButton=0,this.keyboardUIFocus=!1,this.game=a,this.uiContainer=new DisplayObjectContainer,this.uiContainer.interactive=!0,this.buttons=new Array,this.spinnerOn=!1,this.pauseButtonSpacing=190,this.pauseVerticalSpacing=200}return a.prototype.initUI=function(){this.particleHolder=Game.displayStore.getContainer("ui-particle-holder"),this.particleHolder.position.x=-500,this.particles=new Array;for(var a=0;10>a;a++){var b=Game.displayStore.getSprite("ui-circle-particle");this.particles.push(b),this.particleHolder.addChild(b)}this.pauseButton=Game.displayStore.getButton("pausebutton"),this.pauseButton.position.x=952,this.pauseButton.position.y=68,this.pauseButton.visuallyPrepareButton("small"),this.pauseButton.setAsUIButton(),this.closeHelpButton=Game.displayStore.getButton("closehelpbutton"),this.closeHelpButton.position.x=952,this.closeHelpButton.position.y=68,this.closeHelpButton.visuallyPrepareButton("small"),this.closeHelpButton.setAsUIButton(),this.largePlayButton=Game.displayStore.getButton("playbuttonlarge"),this.largePlayButton.position.x=512,this.largePlayButton.position.y=400,this.largePlayButton.visuallyPrepareButton("large"),this.largePlayButton.setAsUIButton(),this.soundOnButton=Game.displayStore.getButton("soundonbutton"),this.soundOnButton.visuallyPrepareButton("small"),this.soundOnButton.setAsUIButton(),this.soundOffButton=Game.displayStore.getButton("soundoffbutton"),this.soundOffButton.visuallyPrepareButton("small"),this.soundOffButton.setAsUIButton(),this.homeButton=Game.displayStore.getButton("homebutton"),this.homeButton.visuallyPrepareButton("small"),this.homeButton.setAsUIButton(),this.helpButton=Game.displayStore.getButton("helpbutton"),this.helpButton.position.x=72,this.helpButton.position.y=68,this.helpButton.visuallyPrepareButton("small"),this.helpButton.setAsUIButton(),this.backButton=Game.displayStore.getButton("backbutton"),this.backButton.position.x=72,this.backButton.position.y=68,this.backButton.visuallyPrepareButton("small"),this.backButton.setAsUIButton(),this.playButton=Game.displayStore.getButton("playbutton"),this.playButton.position.x=952,this.playButton.position.y=530,this.playButton.visuallyPrepareButton("small"),this.playButton.setAsUIButton(),this.skipButton=Game.displayStore.getButton("skipbutton"),this.skipButton.position.x=952,this.skipButton.position.y=530,this.skipButton.visuallyPrepareButton("small"),this.skipButton.setAsUIButton(),this.leftButton=Game.displayStore.getButton("leftbutton"),this.leftButton.position.x=72,this.leftButton.position.y=312,this.leftButton.visuallyPrepareButton("small"),this.leftButton.setAsUIButton(),this.rightButton=Game.displayStore.getButton("rightbutton"),this.rightButton.position.x=952,this.rightButton.position.y=312,this.rightButton.visuallyPrepareButton("small"),this.rightButton.setAsUIButton();var c=this,d=window;d.addEventListener("keydown",function(a){c.onKeyDown(a)},!0),d.addEventListener("keyup",function(a){c.onKeyUp(a)},!0),this.uiInitialised=!0},a.prototype.setUI=function(a){if(0!=this.uiInitialised){switch(this.removeAllButtons(),this.currentKeyCycledButton=0,this.deselectDelay&&this.deselectDelay.kill(),a){case"title":this.soundOnButton.position.x=952,this.soundOnButton.position.y=68,this.soundOffButton.position.x=952,this.soundOffButton.position.y=68,this.homeButton.position.x=72,this.homeButton.position.y=68,1==Game.soundOn?this.addUIButton(this.soundOffButton,!0):0==Game.soundOn&&this.addUIButton(this.soundOnButton,!0),window.og&&1==window.og.isFullScreen;break;case"game-over":this.soundOnButton.position.x=952,this.soundOnButton.position.y=68,this.soundOffButton.position.x=952,this.soundOffButton.position.y=68,this.homeButton.position.x=72,this.homeButton.position.y=68,1==Game.soundOn?this.addUIButton(this.soundOffButton,!0):0==Game.soundOn&&this.addUIButton(this.soundOnButton,!0),this.addUIButton(this.homeButton,!0);break;case"mini-game-title":this.soundOnButton.position.x=952,this.soundOnButton.position.y=68,this.soundOffButton.position.x=952,this.soundOffButton.position.y=68,this.homeButton.position.x=72,this.homeButton.position.y=68,1==Game.soundOn?this.addUIButton(this.soundOffButton,!0):0==Game.soundOn&&this.addUIButton(this.soundOnButton,!0),this.addUIButton(this.homeButton,!0);break;case"hub":this.addUIButton(this.leftButton,!0),this.addUIButton(this.rightButton,!0),1==Game.soundOn?this.addUIButton(this.soundOffButton,!0):0==Game.soundOn&&this.addUIButton(this.soundOnButton,!0);break;case"hub-overlay":this.addUIButton(this.playButton,!0),this.addUIButton(this.backButton,!0),1==Game.soundOn?this.addUIButton(this.soundOffButton,!0):0==Game.soundOn&&this.addUIButton(this.soundOnButton,!0);break;case"pause":this.homeButton.position.x=Game.stageWidth/2-this.pauseButtonSpacing,this.homeButton.position.y=this.pauseVerticalSpacing,this.helpButton.position.x=Game.stageWidth/2,this.helpButton.position.y=this.pauseVerticalSpacing,this.soundOnButton.position.x=Game.stageWidth/2+this.pauseButtonSpacing,this.soundOnButton.position.y=this.pauseVerticalSpacing,this.soundOffButton.position.x=Game.stageWidth/2+this.pauseButtonSpacing,this.soundOffButton.position.y=this.pauseVerticalSpacing,this.addUIButton(this.homeButton,!0),this.addUIButton(this.helpButton,!0),this.addUIButton(this.largePlayButton,!0),this.largePlayButton.position.y=this.pauseVerticalSpacing+150,1==Game.soundOn?this.addUIButton(this.soundOffButton,!0):0==Game.soundOn&&this.addUIButton(this.soundOnButton,!0);break;case"gameplay":this.addUIButton(this.pauseButton,!0);break;case"gameplay-with-skip":this.addUIButton(this.skipButton,!0),this.addUIButton(this.pauseButton,!0);break;case"help":this.addUIButton(this.closeHelpButton,!0);break;case"none":break;case"skip":this.addUIButton(this.skipButton,!0)}this.uiContainer.addChild(this.particleHolder)}},a.prototype.resize=function(a){this.uiContainer.scale.x=a,this.uiContainer.scale.y=a},a.prototype.removeAllButtons=function(){if(this.buttons.length>0)for(var a=this.buttons.length-1;a>=0;a--)this.buttons[a]instanceof UIButton&&this.removeButton(this.buttons[a]);this.buttons=[]},a.prototype.removeButton=function(a){this.clearButton(a),a.parent==this.uiContainer&&this.uiContainer.removeChild(a),this.buttons.splice(this.getButtonIndex(a),1)},a.prototype.getButtonIndex=function(a){for(var b=0;b<this.buttons.length;b++)if(this.buttons[b]==a)return b},a.prototype.addCustomUIButton=function(a,b){a.setAsUIButton(),this.addUIButton(a,b)},a.prototype.addUIButton=function(a,b){this.uiContainer.addChild(a),this.buttons.push(a),a.buttonInit(b),this.registerButton(a)},a.prototype.addNonUIButton=function(a){this.buttons.push(a)},a.prototype.setButtonIndex=function(a){this.currentKeyCycledButton=a,this.keyboardUIFocus=!0},a.prototype.registerButton=function(a){var b=this;return 1==window.forceMobile?(a.on("mouseover",function(a){b.rolloverButton(b,this)}),a.on("mouseout",function(a){b.rolloutButton(b,this)}),a.on("mousedown",function(a){b.downonButton(b,this)}),void a.on("mouseup",function(a){b.uponButton(b,this)})):void(Game.onDesktop?(a.on("mouseover",function(a){b.rolloverButton(b,this)}),a.on("mouseout",function(a){b.rolloutButton(b,this)}),a.on("mousedown",function(a){b.downonButton(b,this)}),a.on("mouseup",function(a){Game.playSound("button-click-ui"),b.uponButton(b,this)})):(a.on("touchstart",function(a){b.downonButton(b,this)}),a.on("touchend",function(a){Game.playSound("button-click-ui"),b.uponButton(b,this)}),a.on("touchendoutside",function(a){b.rolloutButton(b,this)})))},a.prototype.clearButton=function(a){a.clearInteractions()},a.prototype.onKeyUp=function(a){if(1!=this.game.currentScene.interactionLocked&&1!=this.game.currentScene.transitioning){var b=this.getKey(a.keyCode,a);this.game.currentScene.keyUp(b)}},a.prototype.onKeyDown=function(a){if(1!=this.game.currentScene.interactionLocked&&1!=this.game.currentScene.transitioning){var b=this.getKey(a.keyCode,a);this.game.currentScene.keyDown(b)}},a.prototype.getKey=function(a,b){var c="none";return 37==a?c="left":39==a?c="right":38==a?(b.preventDefault?b.preventDefault():b.returnValue=!1,c="up"):40==a?(b.preventDefault?b.preventDefault():b.returnValue=!1,c="down"):32==a?(b.preventDefault?b.preventDefault():b.returnValue=!1,c="spacebar"):27==a?c="esc":13==a?c="enter":9==a&&(c="tab"),c},a.prototype.cycleUIButton=function(a){var b=this.buttons[this.currentKeyCycledButton];b instanceof UIButton?this.rolloutButton(this,b):this.game.currentScene.rolloutCustomButtonKeyboard(b),this.keyboardUIFocus=!0,this.deselectDelay&&this.deselectDelay.kill();var c;"left"==a?c=-1:"right"==a&&(c=1),this.currentKeyCycledButton+=c,this.currentKeyCycledButton<0&&(this.currentKeyCycledButton=this.buttons.length-1),this.currentKeyCycledButton>=this.buttons.length&&(this.currentKeyCycledButton=0),b=this.buttons[this.currentKeyCycledButton];var d=this;b instanceof UIButton?(this.rolloverButton(this,b),this.deselectDelay=TweenMax.delayedCall(2,function(){d.keyboardUIFocus=!1,d.rolloutButton(d,b)})):(this.game.currentScene.rolloverCustomButtonKeyboard(b),this.deselectDelay=TweenMax.delayedCall(2,function(){d.keyboardUIFocus=!1,d.game.currentScene.rolloutCustomButtonKeyboard(b)}))},a.prototype.activateCycledUIButton=function(){if(0!=this.keyboardUIFocus){var a=this.buttons[this.currentKeyCycledButton];a instanceof UIButton?this.game.currentScene.uiClicked(a):this.game.currentScene.selectCustomButtonKeyboard(a)}},a.prototype.tick=function(){0==this.spinnerOn},a.prototype.rolloverButton=function(a,b){if(1!=a.game.currentScene.interactionLocked){switch(a.game.currentScene.uiRolledOver(b),b.id){case"pausebutton":a.playUISound("ui/pause");break;case"homebutton":a.playUISound("ui/home");break;case"soundonbutton":a.playUISound("ui/sound_on");break;case"soundoffbutton":a.playUISound("ui/sound_off");break;case"helpbutton":a.playUISound("ui/help");
break;case"closehelpbutton":a.playUISound("ui/close");break;case"playbutton-title":a.playUISound("ui/play");break;case"playbutton":a.playUISound("ui/play");break;case"resume-button":a.playUISound("ui/play");break;case"end-comic-playbutton":a.playUISound("ui/play");break;case"skipbutton":break;case"backbutton":a.playUISound("ui/back");break;case"exitbutton":a.playUISound("ui/exit")}a.pulseTween&&a.pulseTween.kill(),a.overTimeline&&a.overTimeline.kill();var c=Game.getRandom(-.25,.25);a.overTimeline=new TimelineMax,a.overTimeline.add(TweenMax.to(b.buttonContainer.scale,.2,{x:1.2,y:1.2,ease:Back.easeOut}),0),a.overTimeline.add(TweenMax.to(b.buttonContainer,.2,{rotation:c,ease:Back.easeOut}),0),a.overTimeline.add(TweenMax.to(b.shadow.position,.2,{y:b.shadowOrigY+5,ease:Back.easeOut}),0),a.overTimeline.add(TweenMax.to(b.shadow.scale,.2,{x:1.2,y:1.2,ease:Back.easeOut}),0),a.overTimeline.add(TweenMax.to(b.shadow,.2,{rotation:c,ease:Back.easeOut}),0),a.overTimeline.add(TweenMax.to(b.shadow,.2,{alpha:.2,ease:Quad.easeOut}),0)}},a.prototype.rolloutButton=function(a,b){1!=a.game.currentScene.interactionLocked&&(a.game.currentScene.uiRolledOut(b),a.outTimeline&&a.outTimeline.kill(),a.outTimeline=new TimelineMax,a.outTimeline.add(TweenMax.to(b.buttonContainer.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),a.outTimeline.add(TweenMax.to(b.buttonContainer,.2,{rotation:0,ease:Back.easeOut}),0),a.outTimeline.add(TweenMax.to(b.shadow.position,.2,{x:b.shadowOrigX,y:b.shadowOrigY,ease:Back.easeOut}),0),a.outTimeline.add(TweenMax.to(b.shadow.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),a.outTimeline.add(TweenMax.to(b.shadow,.2,{rotation:0,ease:Back.easeOut}),0),a.outTimeline.add(TweenMax.to(b.shadow,.2,{alpha:.5,ease:Quad.easeOut}),0))},a.prototype.downonButton=function(a,b){1!=a.game.currentScene.interactionLocked&&(a.game.currentScene.downOnUI(b),a.up=!1,a.playParticleAnimation(a,b),a.pulseTween&&a.pulseTween.kill(),a.downTimeline&&a.downTimeline.kill(),a.downTimeline=new TimelineMax,a.downTimeline.add(TweenMax.to(b.buttonContainer.scale,.2,{x:1.3,y:1.3,ease:Back.easeOut}),0),a.downTimeline.add(TweenMax.to(b.shadow.scale,.2,{x:1.3,y:1.3,ease:Back.easeOut}),0),a.downTimeline.add(TweenMax.to(b.shadow.position,.2,{x:b.shadowOrigX-10,y:b.shadowOrigY+10,ease:Back.easeOut}),0),a.downTimeline.add(TweenMax.to(b.shadow,.2,{alpha:.2,ease:Quad.easeOut}),0))},a.prototype.uponButton=function(a,b){1!=this.up&&(a.game.currentScene.upOnUI(b),a.up=!0,1!=a.game.currentScene.interactionLocked&&(a.upTimeline&&(a.upTimeline.kill(),a.delayedClick.kill()),1!=Game.audioManager.mode?Game.playSound("button-click"):"comicScene"!=a.game.currentScene.id?Game.playSound("button-click"):"comicScene"==a.game.currentScene.id&&"start-comic-playbutton"==b.id&&Game.playSound("button-click"),a.upTimeline=new TimelineMax,a.upTimeline.add(TweenMax.to(b.buttonContainer.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),a.upTimeline.add(TweenMax.to(b.shadow.scale,.2,{x:1,y:1,ease:Back.easeOut}),0),a.upTimeline.add(TweenMax.to(b.shadow.position,.2,{x:b.shadowOrigX,y:b.shadowOrigY,ease:Back.easeOut}),0),a.upTimeline.add(TweenMax.to(b.shadow,.2,{alpha:.5,ease:Quad.easeOut}),0),a.delayedClick=TweenMax.delayedCall(.15,function(){a.game.currentScene.uiClicked(b)})))},a.prototype.pulseButton=function(a){this.pulseTween&&this.pulseTween.kill(),this.pulseTween=new TimelineMax({repeat:-1}),this.pulseTween.add(TweenMax.to(a.buttonContainer.scale,.8,{x:1.2,y:1.2,ease:Quad.easeInOut}),0),this.pulseTween.add(TweenMax.to(a.shadow.scale,.8,{x:1.2,y:1.2,ease:Quad.easeInOut}),0),this.pulseTween.add(TweenMax.to(a.buttonContainer.scale,.8,{x:1,y:1,ease:Quad.easeInOut}),.8),this.pulseTween.add(TweenMax.to(a.shadow.scale,.8,{x:1,y:1,ease:Quad.easeInOut}),.8),this.pulseTween.add(TweenMax.to(a.shadow.position,.8,{x:a.shadowOrigX+5,y:a.shadowOrigY+5,ease:Quad.easeInOut}),0),this.pulseTween.add(TweenMax.to(a.shadow,.8,{alpha:.7,ease:Quad.easeInOut}),0),this.pulseTween.add(TweenMax.to(a.shadow.position,.8,{x:a.shadowOrigX,y:a.shadowOrigY,ease:Quad.easeInOut}),.8),this.pulseTween.add(TweenMax.to(a.shadow,.8,{alpha:1,ease:Quad.easeInOut}),.8)},a.prototype.playParticleAnimation=function(a,b){a.particleHolder.position.x=b.position.x,a.particleHolder.position.y=b.position.y,a.uiContainer.addChild(a.particleHolder),a.uiParticleAnimation&&a.uiParticleAnimation.kill(),a.uiParticleAnimation=new TimelineMax;for(var c=0;c<a.particles.length;c++){var d=a.particles[c],e=Game.getRandom(0,2*Math.PI),f=Game.getRandom(0,60),g=f*Math.cos(e)+0,h=f*Math.sin(e)+0;d.position.x=g,d.position.y=h,d.scale.x=0,d.scale.y=0;var i=Game.getRandom(.2,1),j=Game.getRandom(.2,.8);a.uiParticleAnimation.add([TweenMax.to(d.scale,j/2,{x:i,y:i,repeat:1,yoyo:!0,ease:Sine.easeOut}),TweenMax.to(d.position,j,{y:h-Game.getRandom(50,100),ease:Sine.easeIn})],Game.getRandom(0,.5))}},a.prototype.playUISound=function(a){Game.stopCurrentInterruptableSound(),TweenMax.delayedCall(.2,Game.playSound,[a,!0])},a.prototype.showSpinner=function(){0==this.uiInitialised},a.prototype.hideSpinner=function(){0==this.uiInitialised},a.prototype.soundToggled=function(){1==Game.soundOn?(Game.soundOn=!1,Game.audioManager.soundOff(),this.removeButton(this.soundOffButton),this.addUIButton(this.soundOnButton,!0)):0==Game.soundOn&&(Game.soundOn=!0,Game.audioManager.soundOn(),this.removeButton(this.soundOnButton),this.addUIButton(this.soundOffButton,!0)),this.uiContainer.addChild(this.particleHolder)},a.prototype.exitGame=function(){Game.trace("exit url is..",window.og),window.og&&window.og.exitGameUrl&&window.open(window.og.exitGameUrl,"_self")},a}(),__extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},UIButton=function(a){function b(){a.call(this)}return __extends(b,a),b.prototype.visuallyPrepareButton=function(a){this.buttonContainer=this.getContainer("button-container"),this.icon=this.buttonContainer.getSprite("icon"),this.bg=this.buttonContainer.getSprite("bg"),this.shadow=this.getSprite("shadow"),this.shadow.alpha=.5,this.shadow.setRegPoint(.5,.5),this.shadow.position.x=-6,this.shadow.position.y=6,"small"==a?(this.buttonContainer.setRegPoint(52.5,52.5),this.icon.position.x=26,this.icon.position.y=22):"large"==a&&(this.buttonContainer.setRegPoint(96.5,96.5),this.icon.position.x=52,this.icon.position.y=44)},b.prototype.setAsUIButton=function(a){this.buttonContainer=this.getContainer("button-container"),this.icon=this.buttonContainer.getSprite("icon"),this.bg=this.buttonContainer.getSprite("bg"),this.shadow=this.getSprite("shadow"),this.shadow.alpha=.5,this.shadowOrigX=this.shadow.position.x,this.shadowOrigY=this.shadow.position.y,this.icon.interactive=!0,this.icon.buttonMode=!0,this.shadow.interactive=!1,this.interactive=!0},b.prototype.destroy=function(){this.removeAllListeners(),this.buttonContainer=null,this.icon=null,this.shadow=null},b.prototype.clearInteractions=function(){this.removeAllListeners(),this.initialOnAnimation&&this.initialOnAnimation.kill()},b.prototype.buttonInit=function(a){1==a?(this.icon.scale.x=this.icon.scale.y=1,this.shadow.position.x=0,this.shadow.position.y=0,this.shadow.scale.x=this.shadow.scale.y=1,this.shadow.alpha=0,this.buttonContainer.scale.x=0,this.buttonContainer.scale.y=0,this.initialOnAnimation&&this.initialOnAnimation.kill(),this.initialOnAnimation=new TimelineMax,this.initialOnAnimation.add(TweenMax.to(this.buttonContainer.scale,.2,{x:1,y:1,delay:Game.getRandom(0,.2),ease:Back.easeOut})),this.initialOnAnimation.add([TweenMax.to(this.shadow.position,.2,{x:this.shadowOrigX,y:this.shadowOrigY,ease:Back.easeOut}),TweenMax.to(this.shadow,.2,{alpha:.5,ease:Back.easeOut})])):0==a&&(this.icon.scale.x=this.icon.scale.y=1,this.shadow.position.x=this.shadowOrigX,this.shadow.position.y=this.shadowOrigY,this.shadow.scale.x=this.shadow.scale.y=1,this.shadow.alpha=.5,this.buttonContainer.scale.x=1,this.buttonContainer.scale.y=1)},b}(DisplayObjectContainer),Game=function(){function a(b,c,d,e,f,g,h,i,j){this.lastOrientationCorrect=!1,this.initLoaded=!1,this.scenes={},this.pixiInitialalised=!1,this.paused=!1,this.initialOrientationStatTaken=!1,this.iOSScrollMode=!1,this.allowScrollOverlay=!1,this.getURLValue=function(a){var b=!1;return window.location.href.indexOf(a)>-1&&(b=!0),b},a.basePath=b,a.loc=c,a.ieVer=h,this.crossGameCurrencyOwned=!1,a.holderDiv=document.getElementById(d),this.preloaderBackgroundColours=new Array,this.preloaderBackgroundColours.push(4689750),this.preloaderBackgroundColours.push(13947763),this.preloaderBackgroundColours.push(14727953),this.preloaderBackgroundColours.push(8899307),this.preloaderBackgroundColours.push(2444175),this.cloudColours=new Array,this.cloudColours.push(16449275),this.cloudColours.push(16776683),this.cloudColours.push(16775407),this.cloudColours.push(15661055),this.cloudColours.push(15199487),this.visualAssets=e,this.audioAssets=f,this.loadingPrefix=g,this.scenes=new Array,this.initialised=!1,this.useRetinaAssests=i,this.deeplinkConfigURL=j,1==this.useRetinaAssests?(this.pixelRatio=window.devicePixelRatio,this.pixelRatio>2&&(this.pixelRatio=1)):this.pixelRatio=1,a.assetResolutionPath="@1"+"x/",window.doobStats&&this.startStats(0)}return a.prototype.initialise=function(b,c,d,e,f){this.setViewportTag(),this.initialAssets=f,this.storedInitialAssets=this.initialAssets,a.onDesktop=this.isDesktop(),this.mobileDetect=new MobileDetect(window.navigator.userAgent),0==a.onDesktop&&(this.addMobileCSS(),"iPhone"==this.mobileDetect.phone()&&"iOS"==this.mobileDetect.os()&&(a.oniPhone=!0),"AndroidOS"==this.mobileDetect.os()&&(a.onAndroid=!0)),this.webAudio=this.isWebAudio(),a.displayStore=new DisplayStore(this),a.gameWidth=b,a.gameHeight=c,a.fps=e,a.bodyElement=document.getElementsByTagName("body")[0],this.rotateOverlay=document.getElementById("rotate-overlay"),this.scrollOverlay=document.getElementById("scroll-overlay"),this.scrollOverlay.style.position="absolute",this.scrollOverlay.style.left="0px",this.targetOrientation=d,this.loadModule=new LoadModule(this),this.touchEnabled=!1,a.audioManager=new AudioManagerMk2(this,a.onDesktop,this.webAudio),this.ui=new UI(this),this.checkOrientation(!1,this),this.setFocusEvents();var g=this.mobileDetect.mobile(),h=this.mobileDetect.os();null==g&&(g="desktop"),null==h&&(h="desktop")},a.prototype.addRenderer=function(a){0==a.pixiInitialalised&&(a.pixiInitialalised=!0,a.addPixiRenderer())},a.prototype.init=function(a){a.initPIXI(),a.startGameLoop(a),a.addRenderer(a),a.loadAssets(a.initialAssets,!0,function(){a.ui.initUI(),a.setRotateOverlayBG(),a.setScrollMode(),a.setScene(a.targetInitialScene,!1),a.initLoaded=!0})},a.prototype.setScrollMode=function(){if(0==a.onDesktop&&1==a.oniPhone&&1==this.allowScrollOverlay){var b=a.displayStore.getSprite("scroll-bg");this.scrollOverlay.style.backgroundImage="url('"+b.textureURL+"')",document.addEventListener("touchstart",function(a){});var c=this;document.addEventListener("touchmove",function(a){0==c.iOSScrollMode&&a.preventDefault&&a.preventDefault()})}},a.prototype.addMobileCSS=function(){var b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href",a.basePath+"styles/mobile.css"),document.getElementsByTagName("head")[0].appendChild(b)},a.prototype.setRotateOverlayBG=function(){var b=a.displayStore.getSprite("wrong-orientation-bg");this.rotateOverlay.style.backgroundImage="url('"+b.textureURL+"')"},a.prototype.checkOrientation=function(b,c){var d=c;d.initialised=b;var e=d.detectBrowserViewport().w,f=d.detectBrowserViewport().h;if(a.onDesktop)0==d.initialised?(d.gameInit(),d.initialised=!0):d.checkResize(e,f);else{f>e?d.currentOrientation="portrait":e>f&&e>400&&(d.currentOrientation="landscape"),0==d.initialOrientationStatTaken&&(d.initialOrientationStatTaken=!0);var g;d.currentOrientation!=d.targetOrientation?g=!1:d.currentOrientation==d.targetOrientation&&(g=!0),"any"==d.targetOrientation&&(g=!0),0==d.initialised&&0==g?d.applyRotateOverlay(!0,e,f):0==d.initialised&&1==g?(d.gameInit(),d.initialised=!0):1==d.initialised&&0==g?d.orientGame(e,f):1==d.initialised&&1==g&&(d.orientGame(e,f),d.checkResize(e,f))}setTimeout(function(){d.checkOrientation(d.initialised,d)},500)},a.prototype.orientGame=function(a,b){var c=!1;this.targetOrientation!=this.currentOrientation&&"landscape"!=this.currentOrientation||(c=!0),this.lastOrientationCorrect!=c&&(this.lastOrientationCorrect=c,c?(this.applyRotateOverlay(!1,a,b),this.correctOrientation=!0):(this.applyRotateOverlay(!0,a,b),this.correctOrientation=!1))},a.prototype.applyRotateOverlay=function(b,c,d){if("any"==this.targetOrientation)return a.holderDiv.className="active","portrait"==this.currentOrientation&&this.setScrollOverlay(!1,0),void this.centerGameOnScreen();if(1==b){if(this.rotateOverlay.className="active",a.holderDiv.removeAttribute("class"),this.rotateOverlay.style.width=c+"px",this.rotateOverlay.style.height=d+"px",this.setScrollOverlay(!1,c),0==this.initialised)return}else if(0==b){if(this.rotateOverlay.removeAttribute("class"),a.holderDiv.className="active",0==this.initialised)return;this.centerGameOnScreen()}},a.prototype.setScrollOverlay=function(b,c){0==b?(this.scrollOverlay.removeAttribute("class"),this.scrollOverlay.style.height="100px",a.holderDiv.style.top="0px",a.holderDiv.className="active",this.centerGameOnScreen()):1==b&&(this.scrollOverlay.className="active",a.holderDiv.removeAttribute("class"),this.scrollOverlay.style.height="9999999999999999px",this.scrollOverlay.style.width=String(c)+"px",window.scrollTo(0,0))},a.prototype.checkResize=function(b,c){if(b!=this.lastViewportWidth||c!=this.lastViewportHeight){if(1==a.oniPhone&&"landscape"==this.currentOrientation&&1==this.allowScrollOverlay){this.iOSScrollMode=!0;for(var d=[[320,480],[320,568],[375,667],[414,736]],e=0;e<d.length;e++){var f=d[e],g=(window.screen.height==f[0]&&window.screen.width==f[1]||window.screen.width==f[0]&&window.screen.height==f[1],f[0]);window.innerHeight==g&&(this.iOSScrollMode=!1)}this.setScrollOverlay(this.iOSScrollMode,b)}this.centerGameOnScreen()}this.lastViewportWidth=b,this.lastViewportHeight=c},a.prototype.gameInit=function(){a.holderDiv.style.width=a.gameWidth+"px",a.holderDiv.style.height=a.gameHeight+"px",a.stageWidth=a.gameWidth,a.stageHeight=a.gameHeight;var b=this,c=new PIXI.loaders.Loader;c.add(this.deeplinkConfigURL),c.once("complete",function(a){b.parseDeepLinkJSON(b,a.resources[b.deeplinkConfigURL].data.games[0])}),c.load()},a.prototype.parseDeepLinkJSON=function(a,b){var c;for(var d in b){var e="\\b";if(e+=a.escapeRegExp(b[d]),e+="\\b",1==new RegExp(e,"i").test(window.location.href)){c=d;break}}switch(a.runningHubMode=!1,c){case"glide-to-glory":a.preloaderBackgroundColour=a.preloaderBackgroundColours[0],a.cloudColour=a.cloudColours[0],a.initialAssets.push("glide-to-glory-assets"),a.initialAssets.push("title-glide-to-glory-assets"),a.initialAssets.push("intro-glide-to-glory-assets"),a.initialAssets.push("glide-to-glory-audio"),a.setLoadingScreen("loadingScene"),a.targetInitialScene="glideToGloryTitleScene";break;case"patty-pile-up":a.preloaderBackgroundColour=a.preloaderBackgroundColours[1],a.cloudColour=a.cloudColours[1],a.initialAssets.push("patty-pileup-assets"),a.initialAssets.push("title-patty-pileup-assets"),a.initialAssets.push("intro-patty-pileup-assets"),a.initialAssets.push("patty-pileup-audio"),a.setLoadingScreen("loadingScene"),a.targetInitialScene="pattyPileUpTitleScene";break;case"slap-happy":a.preloaderBackgroundColour=a.preloaderBackgroundColours[2],a.cloudColour=a.cloudColours[2],a.initialAssets.push("slap-happy-assets"),a.initialAssets.push("title-slap-happy-assets"),a.initialAssets.push("intro-slap-happy-assets"),a.initialAssets.push("slap-happy-audio"),a.setLoadingScreen("loadingScene"),a.targetInitialScene="slapHappyTitleScene";break;case"meow-no":a.preloaderBackgroundColour=a.preloaderBackgroundColours[3],a.cloudColour=a.cloudColours[3],a.initialAssets.push("meow-no-assets"),a.initialAssets.push("title-meow-no-assets"),a.initialAssets.push("intro-meow-no-assets"),a.initialAssets.push("meow-no-audio"),a.setLoadingScreen("loadingScene"),a.targetInitialScene="meowNoTitleScene";break;case"all-games":case void 0:a.preloaderBackgroundColour=a.preloaderBackgroundColours[4],a.cloudColour=a.cloudColours[4],a.runningHubMode=!0,a.initialAssets.push("main-game-title-screen-assets"),a.initialAssets.push("hub-assets"),a.initialAssets.push("hub-audio"),a.setLoadingScreen("loadingScene"),a.targetInitialScene="titleScene"}a.initAudio(a.loadModule),a.init(a),"any"==a.targetOrientation?a.applyRotateOverlay(!1,0,0):a.centerGameOnScreen()},a.prototype.centerGameOnScreen=function(){var b=this.detectBrowserViewport().w,c=this.detectBrowserViewport().h,d=!0;if(a.onDesktop&&0==d)a.gameOffset=this.getGameOffset(a.holderDiv),a.holderDiv.style.position="absolute",a.holderDiv.style.top=(c-a.stageHeight)/2+"px",a.holderDiv.style.left=(b-a.stageWidth)/2+"px";else{this.scaleStage(b,c);var e=.5*(b-this.currentStageWidth),f=.5*(c-this.currentStageHeight);a.holderDiv.style.position="absolute",a.holderDiv.style.left=e+"px",a.holderDiv.style.top=f+"px",a.gameOffset=this.getGameOffset(a.holderDiv),1==a.onAndroid&&this.launchIntoFullscreen(document.documentElement)}},a.prototype.scaleStage=function(b,c){var d=c/b,e=a.stageHeight/a.stageWidth;e>d?(a.windowScaleFactor=c/a.stageHeight,this.currentStageWidth=c/e,this.currentStageHeight=c):(a.windowScaleFactor=b/a.stageWidth,this.currentStageWidth=b,this.currentStageHeight=b*e),a.holderDiv.style.width=this.currentStageWidth+1+"px",a.holderDiv.style.height=this.currentStageHeight+1+"px",this.resizePixiCanvas(this.currentStageWidth,this.currentStageHeight)},a.prototype.resizePixiCanvas=function(b,c){a.renderer&&a.renderer.resize(b,c);for(var d in this.scenes)this.scenes[d].resize(a.windowScaleFactor);this.ui&&this.ui.resize(a.windowScaleFactor)},a.prototype.addScene=function(a){var b=new a(this);this.scenes[b.id]=b},a.prototype.setLoadingScreen=function(a){this.currentLoadingScene=this.scenes[a]},a.prototype.setScene=function(b,c,d){void 0===c&&(c=!1);var e=0;1==c&&(e=.4,a.playSound("transition")),this.scenes[b]?(this.currentScene&&(this.currentScene.interactionLocked=!0,this.currentScene.interactive=!1,e>0&&this.currentScene.initTransitionOut(e)),e>0?this.setSceneDelay=TweenMax.delayedCall(e,this.initSceneSwap,[this,e,b,d]):this.initSceneSwap(this,e,b,d)):a.trace("Can't find scene!"+b)},a.prototype.initSceneSwap=function(b,c,d,e){b.currentScene&&0==b.currentScene.paused&&(b.currentScene.destroy(),b.currentScene.render=!1),b.currentScene=b.scenes[d],b.currentScene.addUI(b.ui.uiContainer),b.ui.resize(a.windowScaleFactor),b.currentScene&&0==b.currentScene.paused?(b.currentScene.init(e),b.currentScene.initTransitionIn(c)):b.currentScene&&1==b.currentScene.paused&&(b.currentScene.interactionLocked=!1,b.currentScene.restore())},a.prototype.startStats=function(a){this.stats=new Stats,this.stats.setMode(a),this.stats.domElement.style.position="absolute",this.stats.domElement.style.right="0px",this.stats.domElement.style.bottom="0px",document.body.appendChild(this.stats.domElement)},a.prototype.initPIXI=function(){a.renderer=PIXI.autoDetectRenderer(a.stageWidth,a.stageHeight,{autoResize:!0,resolution:this.pixelRatio}),a.renderer instanceof PIXI.CanvasRenderer?a.webGL=!1:a.webGL=!0},a.prototype.addPixiRenderer=function(){a.holderDiv.appendChild(a.renderer.view)},a.prototype.startGameLoop=function(b){1==a.onAndroid?TweenMax.ticker.useRAF(!1):TweenMax.ticker.useRAF(!0),TweenMax.ticker.fps(a.fps),TweenMax.ticker.addEventListener("tick",b.loopFuncRef=function(){b.tick(b)})},a.prototype.loadAssets=function(a,b,c,d){if(this.loadModule.reset(b),1==b&&!d)return void this.loadPreloaderAssets(this,a,c);var e;1==b&&1==d&&(1==this.ui.uiInitialised?(e=1,this.setScene(this.currentLoadingScene.id,!1)):(e=0,this.setScene(this.currentLoadingScene.id,!1)));for(var f=0;f<a.length;f++){for(var g in this.visualAssets)g!=a[f]||this.loadModule.prepareLoad(a[f],this.visualAssets[g],"visual",b);for(var g in this.audioAssets)g!=a[f]||this.loadModule.prepareLoad(a[f],this.audioAssets[g],"audio",b)}var h=this;TweenMax.delayedCall(e,function(){h.loadModule.load(c)})},a.prototype.loadPreloaderAssets=function(a,b,c){a.loadAssets(a.currentLoadingScene.getPreloaderAssetList(),!1,function(){a.loadAssets(b,!0,c,!0)},!0)},a.prototype.tick=function(b){if(1!=b.paused){var c=b;c.stats&&c.stats.begin(),c.currentScene&&(1==c.currentScene.render?a.renderer.render(c.currentScene):0==c.currentScene.render&&(c.currentScene.render=!0),c.currentScene.tick()),c.ui&&c.ui.tick(),c.stats&&c.stats.end()}},a.openLink=function(a,b){1==b?window.open(a,"_blank"):window.open(a)},a.trace=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b]},a.prototype.initAudio=function(b){a.audioManager.initAudio(b)},a.playSound=function(b,c){a.audioManager.playSound(b,a.audioManager,c)},a.getSoundDuration=function(b){return a.audioManager.getSoundDuration(b,a.audioManager)},a.stopSound=function(b){a.audioManager.stopSound(b,a.audioManager)},a.fadeSound=function(b,c,d){a.audioManager.fadeSound(b,c,d,a.audioManager)},a.setSoundVolume=function(b,c){a.audioManager.setVolume(b,c)},a.stopCurrentInterruptableSound=function(){TweenMax.killDelayedCallsTo(a.playSound),a.audioManager.stopCurrentInterruptableSound()},a.pauseSound=function(b){a.audioManager.pauseSound(b,a.audioManager)},a.resumeSound=function(b){a.audioManager.resumeSound(b,a.audioManager)},a.prototype.earnCrossGameCurrency=function(){0!=this.runningHubMode&&1!=this.crossGameCurrencyOwned&&(this.crossGameCurrencyOwned=!0,this.crossGameCurrencyIsNew=!0)},a.prototype.alertCrossGameCurrencyEarned=function(){0!=this.runningHubMode&&(this.crossGameCurrencyIsNew=!1)},a.prototype.launchIntoFullscreen=function(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()},a.prototype.detectBrowserViewport=function(){var a=window.innerWidth,b=window.innerHeight;return"undefined"!=typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):"undefined"!=typeof document.documentElement&&"undefined"!=typeof document.documentElement.clientWidth&&0!=document.documentElement.clientWidth?(a=document.documentElement.clientWidth,b=document.documentElement.clientHeight):(a=720,b=480),{w:a,h:b}},a.prototype.isDesktop=function(){if(window.forceMobile)return!1;var a=function(){return"ontouchstart"in window||"onmsgesturechange"in window};return 0!=window.screenX||!a()},a.prototype.isWebAudio=function(){var a=null,b=!0;return"undefined"!=typeof AudioContext?a=new AudioContext:"undefined"!=typeof webkitAudioContext?a=new webkitAudioContext:b=!1,b},a.prototype.setViewportTag=function(){if(!a.onDesktop){document.querySelector("meta[name=viewport]")}},a.prototype.setFocusEvents=function(){function a(a){var d="visible",e="hidden",f={focus:d,focusin:d,pageshow:d,blur:e,focusout:e,pagehide:e};a=a||window.event,a.type in f?c.gameFocusChanged(c,f[a.type]):c.gameFocusChanged(c,this[b]?"hidden":"visible")}var b="hidden",c=this;b in document?document.addEventListener("visibilitychange",a):(b="mozHidden")in document?document.addEventListener("mozvisibilitychange",a):(b="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",a):(b="msHidden")in document?document.addEventListener("msvisibilitychange",a):"onfocusin"in document?document.onfocusin=document.onfocusout=a:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a},a.prototype.gameFocusChanged=function(a,b){a.currentScene&&a.currentScene.gameFocusChanged(b)},a.getRandom=function(a,b,c){var d=a+Math.random()*(b-a);return 1==c&&(d=Math.round(d)),d},a.prototype.getGameOffset=function(a){var b=0,c=0;if(a.offsetParent)do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return{x:b,y:c}},a.prototype.escapeRegExp=function(a){return a.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},a.windowScaleFactor=1,a.onAndroid=!1,a.oniPhone=!1,a.onDesktop=!1,a.numberOfSoundsToPreload=0,a.numberOfAssetsToPreload=0,a.numberOfAssetsLoaded=0,a.soundOn=!0,a}(),AudioManagerMk2=function(){function a(a,b,c){this.failedLoadFlash=!1,this.initialised=!1,this.soundLoadedCallback=function(){},this.flashTimeoutCall=function(){},this.game=a,this.onDesktop=b,this.webAudio=c,this.audioPath="",this.flashModeReady=!1,this.soundLoadAttempted=!1,this.sounds=new Array}return a.prototype.initAudio=function(a){return this.loadModule=a,void 0!=this.forceMode?(this.force(this.forceMode),void(this.initialised=!0)):(1==this.onDesktop&&void 0!=Game.ieVer?(this.mode=2,this.flashModeReady=!1,this.initSoundManager()):this.initHowler(this.webAudio),void(this.initialised=!0))},a.prototype.addSoundSpriteSound=function(a,b,c){Game.trace("add sprite!!!!",b,c),this.sounds.push({group:a,id:b,times:c})},a.prototype.addSound=function(a,b){this.loadModule.assetsToLoad++,this.currentAssetLoc="sfx",1==b.loc&&(this.currentAssetLoc="vo/"+Game.loc);var c;c=1==b.loop,b.duration||(b.duration=-1),this.sounds.push({group:a,id:b.url,url:b.url,duration:b.duration,volume:1,loop:c,urlPrefix:this.currentAssetLoc,setToLoad:!1,currentlyPaused:!1})},a.prototype.initHowler=function(a,b){var c=!1;b&&(c=b),1==a||1==a&&1==c&&0==this.forceMode?(this.mode=0,this.assetID="sounds"):(0==a||0==a&&1==c&&1==this.forceMode)&&(this.mode=1,this.assetID="audioSprite")},a.prototype.initSoundManager=function(){this.assetID="sounds";var a=this;soundManager=new SoundManager,soundManager.setup({url:Game.basePath+"media/swf/",flashVersion:9,preferFlash:!0,debugMode:!1,useHighPerformance:!0,onready:function(){0==a.flashModeReady&&(a.flashModeReady=!0,1==a.soundLoadAttempted&&a.loadSounds()),a=null},ontimeout:function(){a.failedLoadFlash=!0,a.flashTimeoutCall()}}),soundManager.beginDelayedInit()},a.prototype.setLoadCallback=function(a){this.soundLoadedCallback=a},a.prototype.setFlashTimeout=function(a){this.flashTimeoutCall=a},a.prototype.loadSounds=function(a){if(0==this.soundLoadAttempted&&(this.soundLoadAttempted=!0),0!=this.flashModeReady||2!=this.mode){for(var b=this,c={},d=0;d<this.sounds.length;d++){var e,f=this.sounds[d];if(1!=f.setToLoad)if(f.setToLoad=!0,0==this.mode)e=new Howl({src:[Game.basePath+"media/audio/"+f.urlPrefix+"/mp3/"+f.url+".mp3",Game.basePath+"media/audio/"+f.urlPrefix+"/ogg/"+f.url+".ogg"],autoplay:!1,loop:f.loop,onload:function(){b.soundLoadedCallback()}}),f.howlSound=e;else if(1==this.mode)1==a&&(c[f.id]=[f.times[0],f.times[1]]);else if(2==this.mode){if(soundManager.getSoundById(f.id,!0)){b.soundLoadedCallback();continue}soundManager.createSound({id:f.id,url:Game.basePath+"media/audio/"+f.urlPrefix+"/mp3/"+f.url+".mp3",autoLoad:!0,autoPlay:!1,onload:function(){b.soundLoadedCallback()}})}}if(1==this.mode){if(0==a)return;this.audioSprite=new Howl({src:[Game.basePath+"media/audio/vo/"+Game.loc+"/mp3/"+this.audioSpriteURL+".mp3"],sprite:c,autoplay:!1,loop:!1,buffer:!0,onload:function(){Game.trace("LOADED AUDIO SPRITE!!!!!!!!!!",b.audioSprite)}})}}},a.prototype.playSound=function(a,b,c){0!=Game.soundOn&&1!=b.failedLoadFlash&&(c&&1==c&&(this.currentInterruptableSound=a),b.startSound(a))},a.prototype.fadeSound=function(a,b,c,d){0!=Game.soundOn&&d.fadeTheSound(a,b,c,d)},a.prototype.getSoundDuration=function(a,b){var c=b.getSoundByID(a);return c&&c.duration?c.duration:-1},a.prototype.startSound=function(a){if(1==this.mode)return void(1==this.validAudioSpriteID(a)&&this.playAudioSpriteSound(a));var b=this.getSoundByID(a);void 0!=b&&b.id==a&&(0==this.mode?b.howlSound&&(b.howlSound.volume(1),b.howlSound.play()):2==this.mode&&(soundManager.setVolume(a,100),this.soundManagerPlayLoop(a,b.loop)))},a.prototype.setVolume=function(a,b){var c=this.getSoundByID(a);0!=Game.soundOn&&(0==this.mode&&c.howlSound.volume(b),2==this.mode&&soundManager.setVolume(a,100*b))},a.prototype.fadeTheSound=function(a,b,c,d){if(0!=Game.soundOn)if(1==this.mode)d.stopSound(a,d);else{var e=d.getSoundByID(a);if(void 0==e)return;if(e.id==a)if(0==d.mode)e.howlSound&&e.howlSound.fade(e.howlSound._volume,c,1e3*b);else if(2==d.mode){var f={vol:1};TweenMax.to(f,b,{vol:c,onUpdate:function(){soundManager.setVolume(a,100*f.vol)},onComplete:function(){0==c&&soundManager.stop(a)}})}}},a.prototype.soundManagerPlayLoop=function(a,b){var c=this;soundManager.play(a,{onfinish:function(){1==b&&c.soundManagerPlayLoop(a,b)}})},a.prototype.playAudioSpriteSound=function(a){Game.trace("playing audio sprite..",a,this.audioSprite),this.audioSprite.stop(),this.audioSprite.play(a)},a.prototype.pauseAudioSpriteSound=function(a){0!=this.validAudioSpriteID(a)&&this.audioSprite.pause(a)},a.prototype.resumeAudioSprite=function(a,b){1==this.mode&&0!=Game.soundOn&&0!=this.validAudioSpriteID(b)&&(Game.trace("resuming audio sprite..",b),this.audioSprite.play(b),this.audioSprite.pos(this.audioSprite._sprite[b][0]/1e3+a))},a.prototype.pauseSound=function(a,b){if(0!=Game.soundOn){if(1==this.mode)return void(1==this.validAudioSpriteID(a)&&this.pauseAudioSpriteSound(a));var c=b.getSoundByID(a);if((1!=b.failedLoadFlash||2!=b.mode)&&void 0!=c)return c.id==a?void(0==b.mode?c.howlSound&&1==c.howlSound.playing()&&(c.currentlyPaused=!0,c.howlSound.pause()):2==b.mode&&(c.currentlyPaused=!0,soundManager.pause(a))):void 0}},a.prototype.resumeSound=function(a,b){if(0!=Game.soundOn&&1!=this.mode){var c=b.getSoundByID(a);if(void 0!=c&&(1!=b.failedLoadFlash||2!=b.mode))return c.id==a&&1==c.currentlyPaused?(c.currentlyPaused=!1,void(0==b.mode?c.howlSound&&c.howlSound.play():2==b.mode&&soundManager.resume(a))):void 0}},a.prototype.stopSound=function(a,b){var c=b.getSoundByID(a);1!=b.failedLoadFlash&&void 0!=c&&(1==b.mode&&b.audioSprite.stop(),c.id==a&&(0==b.mode?c.howlSound&&c.howlSound.stop():2==b.mode&&soundManager.stop(a)))},a.prototype.stopCurrentInterruptableSound=function(){this.currentInterruptableSound&&this.stopSound(this.currentInterruptableSound,this)},a.prototype.validAudioSpriteID=function(a){var b=!1;return this.audioSprite&&this.audioSprite._sprite[a]&&(b=!0),b},a.prototype.flush=function(a){if(Game.trace("Flushing audio system!",a,this.mode),0==this.mode)for(var b=this.sounds.length-1;b>=0;b--){var c=this.sounds[b];if(c.group==a){if(0==this.checkSoundFlushable(a,c.id)){this.sounds.splice(b,1);continue}var d=this.sounds.splice(b,1);d[0].howlSound.stop(),d[0].howlSound.unload(),d[0]=null,d=null}c=null}else if(1==this.mode);else if(2==this.mode&&this.sounds)for(var b=this.sounds.length-1;b>=0;b--){var c=this.sounds[b];if(c.group==a){if(0==this.checkSoundFlushable(a,c.id)){var d=this.sounds.splice(b,1);soundManager.stop(d[0].id),d=null;continue}var d=this.sounds.splice(b,1);soundManager.stop(d[0].id),soundManager.destroySound(d[0].id),d[0]=null,d=null}c=null}},a.prototype.checkSoundFlushable=function(a,b){for(var c=!0,d=this.sounds.length-1;d>=0;d--){var e=this.sounds[d];e.group!=a&&e.id==b&&(c=!1)}return c},a.prototype.soundOn=function(){0==this.mode||1==this.mode?Howler.mute(!1):2==this.mode&&soundManager.unmute()},a.prototype.soundOff=function(){0==this.mode||1==this.mode?Howler.mute(!0):2==this.mode&&soundManager.mute()},a.prototype.getSoundByID=function(a){for(var b=0;b<this.sounds.length;b++){var c=this.sounds[b];if(a==c.id)return c}},a.prototype.listGroupsLoaded=function(){for(var a=new Array,b=0;b<this.sounds.length;b++)0==this.checkExists(this.sounds[b].group,a)&&a.push(this.sounds[b].group);for(var b=0;b<a.length;b++)Game.trace("Members of this group are loaded: ",a[b])},a.prototype.listAssetsLoaded=function(){for(var a=0;a<this.sounds.length;a++)Game.trace("Asset loaded: ",this.sounds[a].id," - From group: ",this.sounds[a].group)},a.prototype.checkExists=function(a,b){var c=!1;if(0==b.length)return c;for(var d=0;d<b.length;d++)b[d]==a&&(c=!0);return c},a.prototype.force=function(a){this.assetID="sounds";var b;2==a?(b="SOUND MANAGER - FLASH MODE!",this.mode=2,this.initSoundManager()):1==a?(b="HOWLER - SPRITE SHEET MODE!",
this.mode=1,this.assetID="audioSprite",this.initHowler(!1,!0)):0==a&&(b="HOWLER - NORMAL MODE!",this.mode=0,this.initHowler(!0,!0)),Game.trace(":::::::::::::::::::::::::::: FORCE AUDIO DEBUG MODE - "+this.forceMode+" => "+b)},a}(),LoadModule=function(){function a(a){this.firstLoadComplete=!1,this.game=a,this.showSpinnerTime=1}return a.prototype.prepareLoad=function(a,b,c,d,e){this.loadAttempted=!1,this.currentType=c,this.neverFlushCurrent=!1,this.preloadCurrent=d;for(var f=0;f<b.length;f++)1!=b[f].neverFlush||(this.neverFlushCurrent=!0);if("visual"==this.currentType)for(var f=0;f<b.length;f++){if(this.itemPoolNumber=0,b[f].pool&&(this.itemPoolNumber=b[f].pool),e&&0!=this.itemPoolNumber)throw new ReferenceError('Ooops! You can only set "pool" attribute on elements at root level of Visual Assets manifest..');if(0==this.itemPoolNumber)b[f].pooled=!1,this.createVisualAsset(f,a,b[f],b,e);else{var g;g=b[f].id?b[f].id:b[f].url;for(var h=0;h<this.itemPoolNumber;h++)b[f].pooledID=g+h,b[f].pooled=!0,this.createVisualAsset(f,a,b[f],b,e)}}else if("audio"==this.currentType)for(var f=0;f<b.length;f++)if(1!=Game.audioManager.mode&&b[f].url)Game.audioManager.addSound(a,b[f]);else if(1==Game.audioManager.mode&&b[f].audioSprite){this.loadAudioSpriteThisLoad=!0,this.audioSpriteJSONLoaded=!1;var i=this,j=b[f].audioSprite.url;this.audioSpriteTimesJSONLoader=new PIXI.loaders.Loader,this.audioSpriteTimesJSONLoader.add(Game.basePath+"media/audio/vo/"+Game.loc+"/"+b[f].audioSprite.timesJSONurl,!0),this.audioSpriteTimesJSONLoader.once("complete",function(b){i.audioSpriteJSONLoaded=!0,i.checkJSONLoaded(b.resources,a,j)}),this.audioSpriteTimesJSONLoader.load()}},a.prototype.checkJSONLoaded=function(a,b,c){new Array;Game.audioManager.audioSpriteURL=c;for(var d=0;d<a.content.json.times.length;d++){var e=a.content.json.times[d];for(var f in e)Game.audioManager.addSoundSpriteSound(b,f,e[f])}1==this.loadAttempted&&this.load(this.loadedCallback)},a.prototype.createVisualAsset=function(a,b,c,d,e){if(c.platformspecific){if("desktop"==c.platformspecific&&0==Game.onDesktop)return;if("mobile"==c.platformspecific&&1==Game.onDesktop)return}if(c.url){if("misc"==c.type)return this.loadMiscFileType(c),void this.assetsToLoad++;("displacement"==c.type&&1==Game.webGL||"displacement"!=c.type)&&(this.createSpriteOrSpine(a,b,c,e),this.assetsToLoad++)}else if(c.children){var f,g=c.children;if("button"==c.type?f=new UIButton:(f=new DisplayObjectContainer,c.pooledID&&(f.pooled=c.pooled,f.pooledUniqueID=c.pooledID)),f.group=b,f.id=c.id,f.neverFlush=this.neverFlushCurrent,c.pivot){var h=!1;c.pivot[2]&&(h=c.pivot[2]),f.setRegPoint(c.pivot[0],c.pivot[1],h),f.origPivot={x:c.pivot[0],y:c.pivot[1],compensate:h}}c.x&&(f.origX=c.x,f.position.x=f.origX),c.y&&(f.origY=c.y,f.position.y=f.origY),e?e.addChild(f):"button"==c.type?Game.displayStore.addButton(f):Game.displayStore.addContainer(f),this.prepareLoad(b,g,this.currentType,this.preloadCurrent,f)}},a.prototype.loadMiscFileType=function(a){var b=Game.basePath;this.assetsPreparedForLoad.push({type:a.type,path:b,url:a.url})},a.prototype.createSpriteOrSpine=function(a,b,c,d){this.currentAssetLoc="base/",this.currentSpineFolder="",this.currentSpritesheetFolder="",this.currentAssetResPath=Game.assetResolutionPath;var e="sprite",f=this.game.pixelRatio;void 0!=c.retina&&0==c.retina&&(this.currentAssetResPath="@1x/",f=1),0==this.game.useRetinaAssests&&(this.currentAssetResPath="@1x/",f=1),1==c.loc&&(this.currentAssetLoc="localized/"+Game.loc+"/"),"spine"==c.type&&(this.currentSpineFolder=c.dir+"/",this.spinesToLoad++),"spritesheet"==c.type&&(this.currentSpritesheetFolder=c.dir+"/",this.spritesheetsToLoad++),"bitmaptext"==c.type&&(this.currentBitmapFontFolder=c.dir+"/",this.bitmapFontsToLoad++),c.type&&(e=c.type);var g;g="spine"==e?Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc+this.currentSpineFolder:"spritesheet"==e?Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc+this.currentSpritesheetFolder:"bitmaptext"==e?Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc+this.currentBitmapFontFolder:Game.basePath+"media/images/"+this.currentAssetResPath+this.currentAssetLoc;var h;h=c.id?c.id:c.url;var i;c.pooledID&&(i=c.pooledID),this.assetsPreparedForLoad.push({index:a,type:e,group:b,id:h,pooledID:i,pooled:c.pooled,path:g,url:c.url,dir:c.dir,atlasJSON:c.atlas,skeletonJSON:c.skeleton,container:d,x:c.x,y:c.y,anchor:c.anchor,w:c.w,h:c.h,frames:c.frames,fontname:c.fontname,fontdata:c.fontdata,textureResolution:f})},a.prototype.load=function(a){if(0==this.preloadCurrent&&TweenMax.delayedCall(this.showSpinnerTime,this.showSpinner,[this]),this.loadedCallback=a,0==this.audioSpriteJSONLoaded&&0==this.loadAttempted)return void(this.loadAttempted=!0);for(var b=new Array,c=0;c<this.assetsPreparedForLoad.length;c++)b.push(this.assetsPreparedForLoad[c].path+this.assetsPreparedForLoad[c].url);var d=b.length;b=this.remove_duplicates(b);var e=d-b.length;this.assetsToLoad=this.assetsToLoad-e;var f=new PIXI.loaders.Loader;f.add(b,!0);var g=this;f.on("progress",this.checkLoadedFuncRef=function(a,b){g.assetsLoaded++,g.checkAllAssetsLoaded(g)}),Game.audioManager.setLoadCallback(this.checkLoadedFuncRef=function(){g.assetsLoaded++,g.checkAllAssetsLoaded(g)}),Game.audioManager.setFlashTimeout(this.flashTimeoutFuncRef=function(){}),Game.audioManager.loadSounds(this.loadAudioSpriteThisLoad),f.load()},a.prototype.checkAllAssetsLoaded=function(a){1==a.usePreload&&a.game.currentScene&&a.game.currentScene.onLoadUpdate(a.assetsLoaded,a.assetsToLoad),a.assetsLoaded==a.assetsToLoad&&TweenMax.delayedCall(.1,function(){a.buildAllSprites(),a.checkAllSpinesLoaded(a)})},a.prototype.checkAllSpinesLoaded=function(a){a.spinesToLoad==a.spinesLoaded&&a.spritesheetsToLoad==a.spritesheetsLoaded&&a.bitmapFontsToLoad==a.bitmapFontsLoaded&&setTimeout(function(){TweenMax.killDelayedCallsTo(a.showSpinner),a.hideSpinner(),a.loadedCallback()},a.callbackDelay)},a.prototype.buildAllSprites=function(){for(var a=0;a<this.assetsPreparedForLoad.length;a++)"sprite"==this.assetsPreparedForLoad[a].type?this.buildSprite({index:this.assetsPreparedForLoad[a].index,type:this.assetsPreparedForLoad[a].type,id:this.assetsPreparedForLoad[a].id,pooled:this.assetsPreparedForLoad[a].pooled,pooledID:this.assetsPreparedForLoad[a].pooledID,group:this.assetsPreparedForLoad[a].group,path:this.assetsPreparedForLoad[a].path,url:this.assetsPreparedForLoad[a].url,container:this.assetsPreparedForLoad[a].container,x:this.assetsPreparedForLoad[a].x,y:this.assetsPreparedForLoad[a].y,anchor:this.assetsPreparedForLoad[a].anchor,w:this.assetsPreparedForLoad[a].w,h:this.assetsPreparedForLoad[a].h,textureResolution:this.assetsPreparedForLoad[a].textureResolution}):"spine"==this.assetsPreparedForLoad[a].type?this.buildSpineObject({index:this.assetsPreparedForLoad[a].index,type:this.assetsPreparedForLoad[a].type,id:this.assetsPreparedForLoad[a].id,pooled:this.assetsPreparedForLoad[a].pooled,pooledID:this.assetsPreparedForLoad[a].pooledID,group:this.assetsPreparedForLoad[a].group,path:this.assetsPreparedForLoad[a].path,url:this.assetsPreparedForLoad[a].url,dir:this.assetsPreparedForLoad[a].dir,atlasJSON:this.assetsPreparedForLoad[a].atlasJSON,skeletonJSON:this.assetsPreparedForLoad[a].skeletonJSON,container:this.assetsPreparedForLoad[a].container,x:this.assetsPreparedForLoad[a].x,y:this.assetsPreparedForLoad[a].y,anchor:this.assetsPreparedForLoad[a].anchor,textureResolution:this.assetsPreparedForLoad[a].textureResolution}):"tile"==this.assetsPreparedForLoad[a].type?this.buildTilingSprite({index:this.assetsPreparedForLoad[a].index,type:this.assetsPreparedForLoad[a].type,id:this.assetsPreparedForLoad[a].id,pooled:this.assetsPreparedForLoad[a].pooled,pooledID:this.assetsPreparedForLoad[a].pooledID,group:this.assetsPreparedForLoad[a].group,path:this.assetsPreparedForLoad[a].path,url:this.assetsPreparedForLoad[a].url,container:this.assetsPreparedForLoad[a].container,x:this.assetsPreparedForLoad[a].x,y:this.assetsPreparedForLoad[a].y,w:this.assetsPreparedForLoad[a].w,h:this.assetsPreparedForLoad[a].h,textureResolution:this.assetsPreparedForLoad[a].textureResolution}):"displacement"==this.assetsPreparedForLoad[a].type?this.buildDisplacementFilter({index:this.assetsPreparedForLoad[a].index,type:this.assetsPreparedForLoad[a].type,id:this.assetsPreparedForLoad[a].id,pooled:this.assetsPreparedForLoad[a].pooled,pooledID:this.assetsPreparedForLoad[a].pooledID,group:this.assetsPreparedForLoad[a].group,path:this.assetsPreparedForLoad[a].path,url:this.assetsPreparedForLoad[a].url,container:this.assetsPreparedForLoad[a].container,textureResolution:this.assetsPreparedForLoad[a].textureResolution}):"spritesheet"==this.assetsPreparedForLoad[a].type?this.buildSpritesheetObject({index:this.assetsPreparedForLoad[a].index,type:this.assetsPreparedForLoad[a].type,id:this.assetsPreparedForLoad[a].id,pooled:this.assetsPreparedForLoad[a].pooled,pooledID:this.assetsPreparedForLoad[a].pooledID,group:this.assetsPreparedForLoad[a].group,path:this.assetsPreparedForLoad[a].path,url:this.assetsPreparedForLoad[a].url,dir:this.assetsPreparedForLoad[a].dir,atlasJSON:this.assetsPreparedForLoad[a].atlasJSON,container:this.assetsPreparedForLoad[a].container,x:this.assetsPreparedForLoad[a].x,y:this.assetsPreparedForLoad[a].y,anchor:this.assetsPreparedForLoad[a].anchor,frames:this.assetsPreparedForLoad[a].frames,textureResolution:this.assetsPreparedForLoad[a].textureResolution}):"bitmaptext"==this.assetsPreparedForLoad[a].type&&this.buildBitmapFontObject({index:this.assetsPreparedForLoad[a].index,type:this.assetsPreparedForLoad[a].type,id:this.assetsPreparedForLoad[a].id,pooled:this.assetsPreparedForLoad[a].pooled,pooledID:this.assetsPreparedForLoad[a].pooledID,group:this.assetsPreparedForLoad[a].group,path:this.assetsPreparedForLoad[a].path,url:this.assetsPreparedForLoad[a].url,dir:this.assetsPreparedForLoad[a].dir,container:this.assetsPreparedForLoad[a].container,x:this.assetsPreparedForLoad[a].x,y:this.assetsPreparedForLoad[a].y,anchor:this.assetsPreparedForLoad[a].anchor,fontdata:this.assetsPreparedForLoad[a].fontdata,fontname:this.assetsPreparedForLoad[a].fontname,textureResolution:this.assetsPreparedForLoad[a].textureResolution})},a.prototype.buildSprite=function(a){var b=PIXI.Texture.fromImage(a.path+a.url),c=new Sprite(b);c.setTextureResolution(a.textureResolution),c.textureURL=a.path+a.url,c.group=a.group,c.id=a.id,c.neverFlush=this.neverFlushCurrent,c.pooled=a.pooled,c.pooledUniqueID=a.pooledID,this.storeBuiltObject(c,a)},a.prototype.buildSpineObject=function(a){var b,c=a.path+a.skeletonJSON,d=this,e=new PIXI.loaders.Loader;e.add("skeleton",c),e.on("complete",function(c,e){b=new Spine(e.skeleton.spineData),b.textureURL=a.path+a.url,b.setTextureResolution(a.textureResolution),b.group=a.group,b.id=a.id,b.pooled=a.pooled,b.pooledUniqueID=a.pooledID,d.spinesLoaded++,d.storeBuiltObject(b,a),d.checkAllSpinesLoaded(d)}),e.load()},a.prototype.buildTilingSprite=function(a){var b=PIXI.Texture.fromImage(a.path+a.url),c=new TilingSprite(b,a.w,a.h);c.textureURL=a.path+a.url,c.setTextureResolution(a.textureResolution),c.group=a.group,c.id=a.id,c.pooled=a.pooled,c.pooledUniqueID=a.pooledID,c.neverFlush=this.neverFlushCurrent,this.storeBuiltObject(c,a)},a.prototype.buildDisplacementFilter=function(a){var b=PIXI.Texture.fromImage(a.path+a.url),c=new DisplacementMapFilter(b);c.textureURL=a.path+a.url,c.setTextureResolution(a.textureResolution),c.group=a.group,c.id=a.id,c.neverFlush=this.neverFlushCurrent,this.storeBuiltObject(c,a)},a.prototype.buildSpritesheetObject=function(a){var b,c,d=a.path+a.atlasJSON,e=this;c=new Array;var f=new PIXI.loaders.Loader;f.add(d),f.once("complete",function(){for(var d=0;d<a.frames.length;d++){var f=PIXI.Texture.fromImage(a.frames[d]);c.push(f)}b=new MovieClip(c),b.textureURL=a.path+a.url,b.setTextureResolution(a.textureResolution),b.group=a.group,b.id=a.id,b.pooled=a.pooled,b.pooledUniqueID=a.pooledID,e.spritesheetsLoaded++,e.storeBuiltObject(b,a),e.checkAllSpinesLoaded(e)}),f.load()},a.prototype.buildBitmapFontObject=function(a){var b,c=a.path+a.fontdata,d=new PIXI.loaders.Loader,e=this;d.add(c,!1),d.once("complete",function(){b=new BitmapText("0000",{font:"80px "+a.fontname,align:"left"}),b.textureURL=a.path+a.url,b.setTextureResolution(a.textureResolution),b.group=a.group,b.id=a.id,b.fontname=a.fontname,b.pooled=a.pooled,b.pooledUniqueID=a.pooledID,b.saveTexture(),e.bitmapFontsLoaded++,e.storeBuiltObject(b,a),e.checkAllSpinesLoaded(e)}),d.load()},a.prototype.storeBuiltObject=function(a,b){if(b.x&&(a.origX=b.x,a.position.x=a.origX),b.y&&(a.origY=b.y,a.position.y=a.origY),b.anchor){var c=!1;b.anchor[2]&&(c=b.anchor[2]),a.setRegPoint(b.anchor[0],b.anchor[1],c),a.origAnchor={x:b.anchor[0],y:b.anchor[1],compensate:c}}if(b.w&&(a.width=b.w),b.h&&(a.height=b.h),b.container){var d=b.index;b.container.children.length<b.index&&(d=b.container.children.length),b.container.addChildAt(a,d)}else"sprite"==b.type?Game.displayStore.addSprite(a):"spine"==b.type?Game.displayStore.addSpine(a):"tile"==b.type?Game.displayStore.addTilingSprite(a):"displacement"==b.type?Game.displayStore.addDisplacementMapFilter(a):"spritesheet"==b.type?Game.displayStore.addMovieClip(a):"bitmaptext"==b.type&&Game.displayStore.addBitmapText(a)},a.prototype.showSpinner=function(a){a.game.ui&&a.game.ui.showSpinner()},a.prototype.hideSpinner=function(){this.game.ui&&this.game.ui.hideSpinner()},a.prototype.reset=function(a){this.assetsToLoad=0,this.assetsLoaded=0,this.spinesLoaded=0,this.spinesToLoad=0,this.spritesheetsLoaded=0,this.spritesheetsToLoad=0,this.bitmapFontsLoaded=0,this.bitmapFontsToLoad=0,this.usePreload=a,this.loadedCallback=function(){},this.assetsPreparedForLoad=new Array,this.currentType="",this.loadAudioSpriteThisLoad=!1,this.itemPoolNumber=0,1==a?this.callbackDelay=1e3:this.callbackDelay=0},a.prototype.remove_duplicates=function(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;a=[];for(var d in b)a.push(d);return a},a}(),DisplayStore=function(){function a(a){this.game=a,this.displayObjects=new Array,this.loadedIDs=new Array}return a.prototype.addSprite=function(a){this.displayObjects.push(a)},a.prototype.addContainer=function(a){this.displayObjects.push(a)},a.prototype.addButton=function(a){this.displayObjects.push(a)},a.prototype.addSpine=function(a){this.displayObjects.push(a)},a.prototype.addTilingSprite=function(a){this.displayObjects.push(a)},a.prototype.addMovieClip=function(a){this.displayObjects.push(a)},a.prototype.addDisplacementMapFilter=function(a){this.displayObjects.push(a)},a.prototype.addBitmapText=function(a){this.displayObjects.push(a)},a.prototype.getSpine=function(a){return this.getItem(a)},a.prototype.getSprite=function(a,b){return this.getItem(a,!0)},a.prototype.getContainer=function(a){return this.getItem(a,!0)},a.prototype.getButton=function(a){return this.getItem(a)},a.prototype.getTilingSprite=function(a){return this.getItem(a,!0)},a.prototype.getDisplacementMapFilter=function(a){return this.getItem(a)},a.prototype.getMovieClip=function(a){return this.getItem(a,!0)},a.prototype.getBitmapText=function(a){return this.getItem(a,!0)},a.prototype.getItem=function(a,b){var c=!1;b&&(c=b);for(var d=!1,e=0;e<this.displayObjects.length;e++){if(this.retrievedItem=this.displayObjects[e],this.retrievedItem.id==a&&0==c&&(d=!0),this.retrievedItem.id==a&&1==c&&0==this.retrievedItem.pooled&&(d=!0),this.retrievedItem.id==a&&1==c&&1==this.retrievedItem.pooled&&0==this.retrievedItem.pooledActive&&(d=!0,this.retrievedItem.pooledActive=!0),1==d)return this.retrievedItem.scale.x=1,this.retrievedItem.scale.y=1,this.retrievedItem.rotation=0,"number"==typeof this.retrievedItem.origX&&(this.retrievedItem.position.x=this.retrievedItem.origX),"number"==typeof this.retrievedItem.origY&&(this.retrievedItem.position.y=this.retrievedItem.origY),"boolean"==typeof this.retrievedItem.defaultAnchor&&0==this.retrievedItem.defaultAnchor&&this.retrievedItem.setRegPoint(this.retrievedItem.origAnchor.x,this.retrievedItem.origAnchor.y,this.retrievedItem.origAnchor.compensate),"boolean"==typeof this.retrievedItem.defaultPivot&&0==this.retrievedItem.defaultPivot&&this.retrievedItem.setRegPoint(this.retrievedItem.origPivot.x,this.retrievedItem.origPivot.y,this.retrievedItem.origPivot.compensate),this.retrievedItem;e==this.displayObjects.length-1&&this.displayObjects[e].id!=a&&console.log(this,"ERROR! Can't find sprite with ID:",a)}},a.prototype.returnPooledItem=function(a){for(var b=a,c=0;c<this.displayObjects.length;c++)if(b==this.displayObjects[c]&&1==b.pooled&&1==b.pooledActive&&b.pooledUniqueID==this.displayObjects[c].pooledUniqueID)return void(this.displayObjects[c].pooledActive=!1)},a.prototype.flush=function(a){for(var b=0;b<a.length;b++)for(var c=this.displayObjects.length-1;c>=0;c--)if(this.displayObjects[c].group==a[b]&&0==this.displayObjects[c].neverFlush){var d=this.displayObjects.splice(c,1);d[0].destroy(),d[0]=null,d=null}},a.prototype.checkTextureDeletable=function(a){for(var b=0;b<this.displayObjects.length;b++)if(this.displayObjects[b].items){if(0==this.checkItemsChildrenForTexture(this.displayObjects[b],a))return!1}else if(this.displayObjects[b].textureURL&&this.displayObjects[b].textureURL==a.textureURL&&this.displayObjects[b].group!=a.group)return!1;return!0},a.prototype.checkItemsChildrenForTexture=function(a,b){for(var c in a.items)if(a.items[c].items){if(0==this.checkItemsChildrenForTexture(a.items[c],b))return!1}else if(a.items[c].textureURL&&a.items[c].textureURL==b.textureURL&&a.items[c].group!=b.group)return!1;return!0},a.prototype.listGroupsLoaded=function(){for(var a=new Array,b=0;b<this.displayObjects.length;b++)0==this.checkExists(this.displayObjects[b].group,a)&&a.push(this.displayObjects[b].group);for(var b=0;b<a.length;b++)console.log("Members of this group are loaded: ",a[b])},a.prototype.checkExists=function(a,b){var c=!1;if(0==b.length)return c;for(var d=0;d<b.length;d++)b[d]==a&&(c=!0);return c},a.prototype.listAssetsLoaded=function(){for(var a=0;a<this.displayObjects.length;a++)console.log("Asset loaded: ",this.displayObjects[a].id," - From group: ",this.displayObjects[a].group,this.displayObjects[a].pooledActive)},a}();