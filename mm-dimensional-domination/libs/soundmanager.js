var WONBATS=WONBATS||{};var game=game||{};(function(){'use strict';function SoundManager(){this.sounds={};}
SoundManager.prototype.load=function(){if(!createjs.Sound.initializeDefaultPlugins()){return;}
createjs.Sound.muted=JSON.parse(localStorage.getItem("mute"));};SoundManager.prototype.play=function(id,volume){var i,instance,config=game.config.sound.manifest;if(!this.sounds[id]){instance=createjs.Sound.play(id);if(!instance||instance.playState===createjs.Sound.PLAY_FAILED){}else{this.sounds[id]=instance;}}
if(this.sounds[id]){this.sounds[id].play();for(i=0;i<config.length;i+=1){if(config[i].id===id){this.sounds[id].volume=config[i].volume;if(volume!==undefined){this.sounds[id].volume=volume;}
this.sounds[id].loop=config[i].loop;break;}}}};SoundManager.prototype.playSfx=function(id,volume){if(this.sounds[id]){this.sounds[id].stop();}
this.play(id,volume);};SoundManager.prototype.fadeVolume=function(id,duration,value,restore,stopAtZero){var i,config=game.config.sound.manifest;if(this.sounds[id]){for(i=0;i<config.length;i+=1){if(config[i].id===id){if(!duration)duration=0;if(!value)value=0;if(restore)value=config[i].volume;var volumeTween=createjs.Tween.get(this.sounds[id]).to({volume:value},duration);if(stopAtZero){volumeTween.call(this.stop.bind(this,id));}
break;}}}};SoundManager.prototype.getSound=function(id){return this.sounds[id];};SoundManager.prototype.mute=function(){createjs.Sound.muted=true;};SoundManager.prototype.unMute=function(){createjs.Sound.muted=false;};SoundManager.prototype.switchMute=function(){if(createjs.Sound.muted){this.unMute();}else{this.mute();}
localStorage.setItem("mute",JSON.stringify(createjs.Sound.muted));};SoundManager.prototype.isMuted=function(){return createjs.Sound.muted;};SoundManager.prototype.stop=function(id){if(this.sounds[id]){this.sounds[id].stop();}};SoundManager.prototype.isPlaying=function(id){var sound=this.getSound(id);if(sound){return this.sounds[id].position>0&&this.sounds[id].position<this.sounds[id].duration;}else{return false;}};SoundManager.prototype.stopAll=function(){var id;for(id in this.sounds){if(this.sounds[id]){this.sounds[id].stop();}}};WONBATS.SoundManager=SoundManager;}());