/* Created by Olphabet */
var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d){var e=b.call(this,a,c,d)||this;return e._isStun=!1,e}return __extends(c,b),c.prototype.setHitBody=function(a,b,c,d){"number"==typeof a?(c|=0,d|=0,this._hitBody=new Phaser.Polygon(new Phaser.Point(c-.5*a,d-.5*b),new Phaser.Point(c+.5*a,d-.5*b),new Phaser.Point(c+.5*a,d+.5*b),new Phaser.Point(c-.5*a,d+.5*b))):this._hitBody=new Phaser.Polygon(a)},c.prototype.setViewBody=function(a,b,c,d){"number"==typeof a?(c|=0,d|=0,this._viewBody=new Phaser.Polygon(new Phaser.Point(c-.5*a,d-.5*b),new Phaser.Point(c+.5*a,d-.5*b),new Phaser.Point(c+.5*a,d+.5*b),new Phaser.Point(c-.5*a,d+.5*b))):this._viewBody=new Phaser.Polygon(a)},c.prototype.setAttackBody=function(a,b,c,d){"number"==typeof a?(c|=0,d|=0,this._attackBody=new Phaser.Polygon(new Phaser.Point(c-.5*a,d-.5*b),new Phaser.Point(c+.5*a,d-.5*b),new Phaser.Point(c+.5*a,d+.5*b),new Phaser.Point(c-.5*a,d+.5*b))):this._attackBody=new Phaser.Polygon(a)},c.prototype.getViewZone=function(){return null==this._viewBody?(console.log("Warning нахуй, viewBody не создано, используется хит."),this._hitBody):this._viewBody},c.prototype.getHitZone=function(){return this._hitBody},c.prototype.getAttackZone=function(){return this._attackBody},Object.defineProperty(c.prototype,"isStun",{get:function(){return this._isStun},enumerable:!0,configurable:!0}),c.prototype.addDebugDraw=function(a){a=a||this._hitBody;var b=this.game.make.graphics(0,0);b.beginFill(16711680,.6),a&&b.drawPolygon(a.points),b.beginFill(65280),b.drawCircle(0,0,10),b.endFill(),this.addChild(b)},c.prototype.hit=function(a){if(!this._hitBody||!a._hitBody)throw"Проверяешь на хит, а тело для хита не создал? Пиздос.";return c.hitPhaserPolygon(this._hitBody,a._hitBody,this.x,this.y,a.x,a.y)},c.hitPhaserPolygon=function(b,c,d,e,f,g){void 0===d&&(d=0),void 0===e&&(e=0),void 0===f&&(f=0),void 0===g&&(g=0);var h;for(h=0;h<b.points.length;h++)b.points[h].x+=d,b.points[h].y+=e;for(h=0;h<c.points.length;h++)c.points[h].x+=f,c.points[h].y+=g;var i=function(){for(h=0;h<b.points.length;h++)b.points[h].x-=d,b.points[h].y-=e;for(h=0;h<c.points.length;h++)c.points[h].x-=f,c.points[h].y-=g};for(h=0;h<b.points.length;h++)if(c.contains(b.points[h].x,b.points[h].y))return i(),!0;for(h=0;h<c.points.length;h++)if(b.contains(c.points[h].x,c.points[h].y))return i(),!0;var j,k,l,m;for(h=1;h<=b.points.length;h++){j=h-1,k=h==b.points.length?0:h;for(var n=1;n<c.points.length;n++)if(l=n-1,m=n==c.points.length?0:n,null!=a.Polygon.lineIntersectLine(b.points[j],b.points[k],c.points[l],c.points[m],!0))return i(),!0}return i(),!1},c}(Phaser.Sprite);a.GameEntity=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b;!function(a){a[a.IA_RUSH=0]="IA_RUSH",a[a.IA_FLEE=1]="IA_FLEE",a[a.IA_RANDOM=2]="IA_RANDOM",a[a.IA_MIDDLE=3]="IA_MIDDLE"}(b||(b={}));var c=function(c){function d(a,d,e){var f=c.call(this,a.game,d,e)||this;return f.MOVE_DELAY=1,f.IDLE_RUSH_SPEED=3,f.MAX_SPEED=2,f.MAX_MOVE_DIST=200,f.MIN_MOVE_DIST=50,f.ACC=.1,f.DEACC=.2,f.RUSH_DIST_TO_PLAYER=100,f._targetMovePos=null,f.IA_LIST=[b.IA_RUSH,b.IA_FLEE,b.IA_RANDOM,b.IA_RANDOM,b.IA_RANDOM,b.IA_RANDOM],f.TIME_MAX_BEFORE_RUSH_PLAYER=100,f.availableAngles=[],f.randomAngles=[5,10,15,20,25,30,35,40,45,60,70,80,100,110,120,135,140,145,150,155,160,165,170,175],f.CHANCE_TO_DIRECTLY_RUSH=.6,f._iaBaseDuration=600,f.AGGRO_DIST=0,f._animCounter=0,f._dead=!1,f._isAggressive=!1,f.delayAttack=0,f.DELAY_ATTACK=60,f._attackProgress=.1,f._currentLabel="",f._tutor=!1,f._ndCount=0,f._tutorAttackTimer=0,f.MAX_TIME_UPDATE=10,f._timeUpdate=f.MAX_TIME_UPDATE,f._baseGame=a,a.world.add(f),f._isSlow=!1,f._rushForIdle=!1,f._rushingPlayer=!1,f._isEndMove=!1,f._speed=0,f._vect=null,f._doActionMove=null,f._doAction=f.doActionNormal,f._iWinBitch=!1,f._visual2=f.game.make.sprite(6,0,"heavy_ss","heavy0001.png"),f._visual2.anchor.set(.5,.85),f._visual2.animations.add("run",Phaser.Animation.generateFrameNames("heavy",1,32,".png",4),24,!0),f._visual2.animations.add("wait",["heavy0033.png"],24),f._visual2.animations.add("attack",Phaser.Animation.generateFrameNames("heavy",34,73,".png",4),24,!1),f._visual2.animations.add("shock",Phaser.Animation.generateFrameNames("heavy",74,103,".png",4),24,!0),f._visual2.animations.add("slow",Phaser.Animation.generateFrameNames("heavy",104,151,".png",4),24,!0),f._visual2.animations.add("stun",Phaser.Animation.generateFrameNames("heavy",152,160,".png",4),24,!1),f._visual2.animations.add("stun_loop",Phaser.Animation.generateFrameNames("heavy",161,201,".png",4),24,!0),f._visual2.animations.add("win",Phaser.Animation.generateFrameNames("heavy",202,203,".png",4),24,!0),f._visual2.animations.add("die",Phaser.Animation.generateFrameNames("heavy",204,239,".png",4),24,!1),f.switchAnimation("run"),f.addChild(f._visual2),f.setHitBody(46,24,0,-12),f.setViewBody(118.68,72.15,0,-30),f}return __extends(d,c),d.prototype.replay=function(){this._animCounter=0,this._dead=!1,this._isAggressive=!1,this.delayAttack=0,this.DELAY_ATTACK=60,this._attackProgress=.1,this._isSlow=!1,this._rushForIdle=!1,this._rushingPlayer=!1,this._isEndMove=!1,this._isStun=!1,this._iWinBitch=!1,this._speed=0,this._vect=null,this._doActionMove=null,this._doAction=this.doActionNormal,this.switchAnimation("run"),this._ndCount=0,this._tutorAttackTimer=0,this.setSlow(!1),this.setStun(!1),this.onCutForm()},d.prototype.gameOver=function(){this.switchAnimation("die"),this._dead=!0},d.prototype.win=function(){var a=this;this._iWinBitch||(this._iWinBitch=!0,this._animState2.onComplete.addOnce(function(){a.switchAnimation("win")}),this._dead=!0)},d.prototype.updateDepth=function(){if(this._timeUpdate<=0){this._timeUpdate=this.MAX_TIME_UPDATE;var a=this.parent;a.removeChild(this),a.addChild(this)}else this._timeUpdate--},d.prototype.switchAnimation=function(a){var b=this;this._currentLabel=a,this._animState2=this._visual2.animations.play(a),"stun"==a&&this._animState2.onComplete.addOnce(function(){b._animState2=b._visual2.animations.play("stun_loop")})},d.prototype.initMove=function(a,b,c,d,e,f,g){void 0===g&&(g=!1),this._tutor=g,this._animCounter=0,this._iaRush=b,this._iaFlee=c,this._iaRandom=d,this.AGGRO_DIST=e,this.RUSH_DIST_TO_PLAYER=f,this.MAX_SPEED=.5*a,this.initIA()},d.prototype.initIA=function(){this._iaType=b.IA_MIDDLE,this.availableIAs=this.IA_LIST.concat(),this._iaDuration=this.getIADuration(this._iaType)},d.prototype.getIADuration=function(a){switch(a){case b.IA_RUSH:return this._iaBaseDuration*this._iaRush;case b.IA_MIDDLE:return.25*this._iaBaseDuration;case b.IA_FLEE:return this._iaBaseDuration*this._iaFlee;case b.IA_RANDOM:return this._iaBaseDuration*this._iaRandom/4}return 0},d.prototype.endMove=function(){this._speed=0,this._isEndMove=!0,this._moveCounter=this.MOVE_DELAY},d.prototype.doActionMoveDecelerate=function(){if(this._speed=0==this._ndCount&&this._tutor?2:Math.max(this._speed,0),this._vect&&(this._vect.normalize(this._speed),this.x<=this._targetMovePos.x&&this.x+this._vect.x>=this._targetMovePos.x||this.x>=this._targetMovePos.x&&this.x+this._vect.x<=this._targetMovePos.x||this.y<=this._targetMovePos.y&&this.y+this._vect.y>=this._targetMovePos.y||this.y>=this._targetMovePos.y&&this.y+this._vect.y<=this._targetMovePos.y))return this._vect=this._targetMovePos.copy().sub(this.x,this.y),void this.endMove();(0==this._speed||this.x==this._targetMovePos.x&&this.y==this._targetMovePos.y)&&(this._vect=this._targetMovePos.copy().sub(this.x,this.y),this.endMove())},d.prototype.doActionMoveAccelerate=function(){this._acc+=this.ACC,this._speed+=this._acc,this._speed=this.currentSpeed,this._vect.normalize(this._speed),this._targetMovePos.copy().sub(this.x,this.y).length<25&&this.setModeDecelerate()},d.prototype.setModeDecelerate=function(){this._speed=this.currentSpeed,this._doActionMove=this.doActionMoveDecelerate},d.prototype.setModeAccelerate=function(){this._doActionMove=this.doActionMoveAccelerate,this._speed=0,this._acc=0,this.MAX_MOVE_DIST=300*Math.random()+200},d.prototype.setTarget=function(b,c){this._moveCounter=this.MOVE_DELAY,this._ndCount=0,this._targetMovePos=new a.Point(b,c),this._vect=this._targetMovePos.copy().sub(this.x,this.y),this.setModeDecelerate()},d.prototype.doMove=function(){var b=new a.Point(this.x,this.y);this._targetMovePos||(this._targetMovePos=b.copy(),this._moveCounter=this.MOVE_DELAY,this.setModeDecelerate()),this._doActionMove&&this._doActionMove(),this._vect&&(this.x+=this._vect.x,this.y+=this._vect.y);var c=new a.Point(this.x,this.y);if(this._isEndMove)return this.chooseNewTargetMovePos(),this.setModeAccelerate(),void(this._isEndMove=!1);this.checkCutLine(b,c),this.moveAnim()},d.prototype.checkCutLine=function(a,b){var c=!1;this._baseGame.player.intersectionCutLine(a,b)?c=!0:this._baseGame.player.intersectionCutLine(a.copy().add(-15,-15),b.copy().add(-15,-15))?c=!0:this._baseGame.player.intersectionCutLine(a.copy().add(15,-15),b.copy().add(15,-15))&&(c=!0),c&&(this.setModeWin(),this._baseGame.player.lose(!0))},d.prototype.moveAnim=function(){this._baseGame.endGame||(0==this._speed?this._isSlow||this.switchAnimation("wait"):this._vect&&(this._isSlow||this._animCounter%10==0&&(this.switchAnimation("run"),(this._rushForIdle||this.MAX_SPEED>=2.5&&this._rushingPlayer)&&this.switchAnimation("shock")),this._vect.x>0?this.scale.x=1:this._vect.x<0&&(this.scale.x=-1)),this._animCounter++)},d.prototype.chooseNewTargetMovePos=function(c){void 0===c&&(c=!1);var d=null;switch(this._rushingPlayer=!1,this._rushForIdle=!1,this._iaType){case b.IA_RANDOM:case b.IA_FLEE:d=this.randomNewPos();break;case b.IA_MIDDLE:d=this.chooseDestAroundPoint(new a.Point(a.BaseGame.BEGIN_X+a.BaseGame.GREEN_PLACE_WIDTH/2,a.BaseGame.BEGIN_Y+a.BaseGame.GREEN_PLACE_HEIGHT/2),100);break;case b.IA_RUSH:(c||Math.random()<this.CHANCE_TO_DIRECTLY_RUSH)&&(d=this.rushPlayer(new a.Point(this._baseGame.player.x,this._baseGame.player.y)),this._rushingPlayer=!0),d||(d=this.chooseDestAroundPoint(new a.Point(this._baseGame.player.x,this._baseGame.player.y),this.RUSH_DIST_TO_PLAYER,10)),d.copy().sub(this.x,this.y).length<5&&(d.x=this.x,d.y=this.y)}this._targetMovePos=d,this._vect=this._targetMovePos.copy().sub(this.x,this.y),0==this._vect.x&&0==this._vect.y||this._ndCount++},d.prototype.chooseDestAroundPoint=function(a,b,c){void 0===c&&(c=30);for(var d,e=[],f=0;f<c;f++)d=this.randomNewPos(),a.copy().sub(d).length<b&&e.push(d);if(0==e.length)d=this.randomNewPos();else{d=e[Math.floor((e.length-1)*Math.random())]}return d},d.prototype.rushPlayer=function(b){return-1==this._baseGame.border.intersectionDistance(new a.Point(this.x,this.y),b)?b:null},d.prototype.chooseRandomIA=function(){if(-1==this.timePlayerDontMove)return this._iaType=this.IA_LIST[0],this._iaDuration=100,this.chooseNewTargetMovePos(!0),this.setModeAccelerate(),void(this._rushForIdle=!0);0==this.availableIAs.length&&(this.availableIAs=this.IA_LIST.concat());var a=Math.floor(Math.random()*this.availableIAs.length);this._iaType=this.availableIAs[a],this.availableIAs.splice(a,1),this._iaDuration=this.getIADuration(this._iaType)},d.prototype.doIA=function(){var c=new a.Point(this._baseGame.player.x,this._baseGame.player.y);this.prevPosPlayer&&this.prevPosPlayer.equal(c)&&!this._baseGame.player.isOnBorder()?++this.timePlayerDontMove==this.TIME_MAX_BEFORE_RUSH_PLAYER&&(this.timePlayerDontMove=-1,this.chooseRandomIA()):(-1==this.timePlayerDontMove&&(this._iaDuration=0),this.timePlayerDontMove=0,this.prevPosPlayer=c),this._iaDuration--<=0&&this.chooseRandomIA(),this._iaType!=b.IA_RUSH&&!this._baseGame.player.isOnBorder()&&new a.Point(this._baseGame.player.x-this.x,this._baseGame.player.y-this.y).length<this.AGGRO_DIST&&(this._iaType=b.IA_RUSH,this._iaDuration=30,this.chooseNewTargetMovePos(),this.setModeAccelerate())},d.prototype.checkAttackProgress=function(a){return a<50?.05:a>70?.01:1.4*(a-34)/36},d.prototype.resetAttackZone=function(){this._attackProgress=.1},d.prototype.setModeAttack=function(){a.SoundMixer.play("ghostattack"),this._doAction=this.doActionAttack,this.switchAnimation("attack"),this._isAggressive=!1,this.delayAttack=this.DELAY_ATTACK,this.resetAttackZone()},d.prototype.setModeSlow=function(){this.switchAnimation("slow")},d.prototype.setModeNormal=function(){this._doAction=this.doActionNormal,this._isAggressive=!0,this._animCounter=0},d.prototype.doActionAttack=function(){this._attackProgress=this.checkAttackProgress(this._animState2.currentFrame.index),this._isAggressive=this._animState2.isPlaying,this._animState2.isPlaying&&!this._animState2.isFinished||(this.setModeNormal(),this._isSlow&&this.setModeSlow())},d.prototype.setModeStun=function(){this.switchAnimation("stun"),this._doAction=this.doActionStun},d.prototype.doActionStun=function(){},d.prototype.canHitPlayer=function(){return!this._baseGame.playerOnBorder()||this._doAction==this.doActionAttack&&this._isAggressive},d.prototype.canAttack=function(){return 0==this.delayAttack&&this._doAction==this.doActionNormal&&!this._rushingPlayer},Object.defineProperty(d.prototype,"isAttack",{get:function(){return this._doAction==this.doActionAttack},enumerable:!0,configurable:!0}),d.prototype.getHitZone=function(){return this._doAction==this.doActionAttack?this._attackBody:this._hitBody},d.prototype.doActionWin=function(){},d.prototype.setModeWin=function(){if(this._tutor)return this._doAction=this.doActionNormal,void(this._tutorAttackTimer=200);this._dead=!0,this._doAction=this.doActionWin,this.switchAnimation("win")},d.prototype.doActionWaitEndAttackToWin=function(){this._attackProgress=this.checkAttackProgress(this._animState2.currentFrame.index),this._animState2.isPlaying&&!this._animState2.isFinished||this.setModeWin()},d.prototype.setModeWaitEndAttackToWin=function(){this._doAction=this.doActionWaitEndAttackToWin},d.prototype.pointInEllipce=function(a,b){var c=56.5*this._attackProgress,d=30.5*this._attackProgress,e=this.x-a+5,f=this.y-b-14;return e*e/(c*c)+f*f/(d*d)<=1},d.prototype.onCutForm=function(){this.chooseNewTargetMovePos(),this.setModeAccelerate(),this._isEndMove=!1},d.prototype.playerHitForAttack=function(){var a=this._baseGame.player.x-this.x,b=this._baseGame.player.y-this.y;if(Math.abs(a)>300&&Math.abs(b)>300)return!1;var c=this._baseGame.player.myWidth;return!!this.pointInEllipce(this._baseGame.player.x,this._baseGame.player.y)||(!!this.pointInEllipce(this._baseGame.player.x,this._baseGame.player.y-20)||(!!this.pointInEllipce(this._baseGame.player.x,this._baseGame.player.y-10)||(!!this.pointInEllipce(this._baseGame.player.x+.5*c,this._baseGame.player.y-10)||(!!this.pointInEllipce(this._baseGame.player.x-.5*c,this._baseGame.player.y-10)||(!!this.hit(this._baseGame.player)||(Math.sqrt(a*a+b*b)<25||!(!this._hitBody||!this._hitBody.contains(this.x-this._baseGame.player.x,this.y-this._baseGame.player.y))))))))},d.prototype.doEffect=function(b){if(0!=this._tutorAttackTimer)return void this._tutorAttackTimer--;if(b instanceof a.Player){if(!this.isStun&&this.canAttack()&&a.GameEntity.hitPhaserPolygon(this.getViewZone(),b.getHitZone(),this.x,this.y,b.x,b.y)&&!this._baseGame.playerOnBorder())return this.setModeAttack(),!0;var c=this.playerHitForAttack();if(this.canHitPlayer()&&this._isAggressive&&c&&!b.isInvincible&&!b.isModeLose)return b.lose(),this.isAttack?this.setModeWaitEndAttackToWin():this.setModeWin(),!0}return!1},d.prototype.doActionNormal=function(){this.doIA(),this.doMove(),this.resetAttackZone()},d.prototype.setStun=function(a){this._dead||(a?this.switchAnimation("stun"):this.switchAnimation("run"),this._isStun=a)},d.prototype.runAction=function(){1==this._dead||this.isStun||this._baseGame.isPaused||(this.updateDepth(),this.doEffect(this._baseGame.player),this._doAction(),this.delayAttack&&this.delayAttack--)},d.prototype.update=function(){this.runAction(),(0==this._tutor||this._baseGame.tutorStep>8)&&0==this._baseGame.inBeginBorder(this.x,this.y,15)&&this.onCutForm()},d.prototype.doActionLose=function(){},d.prototype.setModeLose=function(){this._doAction=this.doActionLose,this.switchAnimation("die")},d.prototype.setSlow=function(a){this._dead||(this._isSlow=a,this._doAction!=this.doActionLose&&this._doAction!=this.doActionWin&&(this._isSlow?this.setModeSlow():this.setModeNormal()))},d.prototype.getRandomAngle=function(){0==this.availableAngles.length&&(this.availableAngles=this.randomAngles.concat());var a=Math.floor(Math.random()*this.availableAngles.length),b=this.availableAngles[a];return this.availableAngles.splice(a,1),b*(Math.random()<.5?1:-1)},d.prototype.randomNewPos=function(b){if(void 0===b&&(b=50),0==b)return new a.Point(this.x,this.y);var c=this.getRandomAngle(),d=Math.random()*(this.MAX_MOVE_DIST-this.MIN_MOVE_DIST),e=new a.Point(Math.cos(c/180*Math.PI),Math.sin(c/180*Math.PI));e.normalize(d);var f=new a.Point(this.x,this.y);f.add(new a.Point(Math.round(e.x),Math.round(e.y)));var g=this._baseGame.border.intersectionDistance(new a.Point(this.x,this.y),f);if(-1!=g){if(g<50)return this.randomNewPos(b-1);e.normalize(g-10),f=new a.Point(this.x,this.y),f.add(new a.Point(Math.round(e.x),Math.round(e.y)))}return 0==this._baseGame.border.contains(f.x,f.y)?this.randomNewPos(b-1):f},Object.defineProperty(d.prototype,"currentSpeed",{get:function(){return(this._rushForIdle?this.IDLE_RUSH_SPEED:this.MAX_SPEED)*(this._isSlow?.5:1)},enumerable:!0,configurable:!0}),d}(a.GameEntity);a.Heavy=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e){var f=b.call(this,c,d,e)||this;return f._visual=new a.DBSprite(a.Boot.POWERUPS,"_DB_POWERUP/light_visible"),f.addChild(f._visual),f._visual.play("loop"),f.dead=!1,f.setHitBody(50,180,0,-125),f.addChild(f._visual),f}return __extends(c,b),c.prototype.remove=function(){this.dead||(this.parent&&(this.parent.removeChild(this),this.destroy(!0)),this.dead=!0)},c.prototype.setHitBody=function(a,b,c,d){"number"==typeof a?(c|=0,d|=0,this._hitBody=new Phaser.Polygon(new Phaser.Point(c-.5*a,d-.5*b),new Phaser.Point(c+.5*a,d-.5*b),new Phaser.Point(c+.5*a,d+.5*b),new Phaser.Point(c-.5*a,d+.5*b))):this._hitBody=new Phaser.Polygon(a)},c}(Phaser.Sprite);a.Light=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d){var e=a.call(this,b,c,d)||this;return e._visual2=b.make.sprite(0,0,"light","light_remove0001.png"),e._visual2.anchor.set(.5,.9),e.addChild(e._visual2),e.scale.set(.8),e._visual2.animations.add("idle",Phaser.Animation.generateFrameNames("light_remove",1,50,".png",4),24,!1),e._visual2.animations.play("idle").onComplete.addOnce(function(){var a=e.parent;a&&(a.removeChild(e),e.destroy(!0))}),e}return __extends(b,a),b}(Phaser.Sprite);a.LightD=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){}return a.init=function(b){a._xml=b,a._curLvl=0},a.setLvl=function(b){a._curLvl=b},a.getLvl=function(){return a._xml.getElementsByTagName("lvld")[0].childNodes[2*a._curLvl+1]},a.getXmlNodeValue=function(a){var b=a.childNodes[0];return b?b.nodeValue:null},a.getGoalPct=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("goalPct")[0])},a.timePopPowerUp=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("timePopPowerUp")[0])},a.maxPowerUpSameTime=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("maxPowerUpSameTime")[0])},a.listPowerUp=function(){var b=this.getXmlNodeValue(a.getLvl().getElementsByTagName("listPowerUp")[0]);return""==b?null:b},a.multiplierCount=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("multiplier")[0].childNodes[1])},a.obstacleCount=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("obstacle")[0].childNodes[1])},a.swarmerCount=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("swarmer")[0].childNodes[1])},a.swarmerspeedMax=function(b){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("swarmer")[0].childNodes[2*b+1])},a.heavySpeedMax=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("heavy")[0].childNodes[1])},a.heavyIARush=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("heavy")[0].childNodes[3].childNodes[1])},a.heavyIAFlee=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("heavy")[0].childNodes[3].childNodes[3])},a.heavyIARandom=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("heavy")[0].childNodes[3].childNodes[5])},a.heavyAggroRange=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("heavy")[0].childNodes[5])},a.heavyStalkDistance=function(){return this.getXmlNodeValue(a.getLvl().getElementsByTagName("heavy")[0].childNodes[7])},a}();a.LvlConfig=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d,e,f){var g=a.call(this,b,c,d)||this;g.angle=e,g._type=f,g._visual=b.make.image(0,0,"test","obstacle"+f+"0000"),g._visual.anchor.set(.5),g._visualMask=b.make.image(0,0,"test","obstacleMask"+f+"0000");var h;switch(f){case 1:h=0==e?[28+c,-71+d,28+c,3+d,57+c,3+d,57+c,64+d,-50+c,64+d,-50+c,-71+d]:[50+c,-65+d,50+c,71+d,-27+c,71+d,-27+c,-3+d,-55+c,-3+d,-55+c,-65+d];break;case 2:h=0==e?[81+c,-6+d,81+c,53+d,-84+c,53+d,-84+c,-53+d,-13+c,-53+d,-13+c,-6+d]:[84+c,-53+d,84+c,53+d,11+c,53+d,11+c,7+d,-83+c,7+d,-83+c,-53+d];break;case 3:h=[38+c,-52+d,38+c,48+d,-32+c,48+d,-32+c,-52+d];break;case 4:h=[40+c,-40+d,40+c,32+d,-32+c,32+d,-32+c,-40+d];break;default:h=[]}return g._hit=new Phaser.Polygon(h),g.addChild(g._visual),g}return __extends(b,a),b.prototype.destroy=function(){this._hit=null,this._visual.destroy(!0),this._visualMask.destroy(!0),a.prototype.destroy.call(this,!0)},b.prototype.hit=function(a,b){return this._hit.contains(a,b)},Object.defineProperty(b.prototype,"visual",{get:function(){return this._visual},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"visualMask",{get:function(){return this._visualMask},enumerable:!0,configurable:!0}),b}(Phaser.Sprite);a.Obstacle=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b;!function(a){a[a.BORDER=0]="BORDER",a[a.INSIDE=1]="INSIDE"}(b||(b={}));var c=function(c){function d(d,e,f){var g=c.call(this,d.game,e,f)||this;return g._curAnimation="",g._glowAng=0,g.onStop=null,g.MAX_TIME_UPDATE=10,g._timeUpdate=g.MAX_TIME_UPDATE,g._baseGame=d,g._mode=b.BORDER,g._glow=g.game.make.image(0,-37,"test","blink0000"),g._glow.alpha=.8,g._glow.anchor.set(.5),g._glow.visible=!1,g.addChild(g._glow),g._visual2=g.game.make.sprite(6,0,"player_ss","player0001.png"),g._visual2.anchor.set(.5,.73),g._visual2.animations.add("wait_up",["player0001.png"],24),g._visual2.animations.add("run_up",Phaser.Animation.generateFrameNames("player",2,18,".png",4),24,!0),g._visual2.animations.add("runDraw_up",Phaser.Animation.generateFrameNames("player",19,35,".png",4),24,!0),g._visual2.animations.add("wait_left",Phaser.Animation.generateFrameNames("player",36,136,".png",4),24,!0),g._visual2.animations.add("run_left",Phaser.Animation.generateFrameNames("player",137,157,".png",4),24,!0),g._visual2.animations.add("runDraw_left",Phaser.Animation.generateFrameNames("player",158,174,".png",4),24,!0),g._visual2.animations.add("wait_right",Phaser.Animation.generateFrameNames("player",175,274,".png",4),24,!0),g._visual2.animations.add("run_right",Phaser.Animation.generateFrameNames("player",275,291,".png",4),24,!0),g._visual2.animations.add("runDraw_right",Phaser.Animation.generateFrameNames("player",292,308,".png",4),24,!0),g._visual2.animations.add("wait_down",["player0309.png"],24),g._visual2.animations.add("run_down",Phaser.Animation.generateFrameNames("player",310,326,".png",4),24,!0),g._visual2.animations.add("runDraw_down",Phaser.Animation.generateFrameNames("player",327,343,".png",4),24,!0),g._visual2.animations.add("win",Phaser.Animation.generateFrameNames("player",344,356,".png",4),24,!0),g._visual2.animations.add("lose",Phaser.Animation.generateFrameNames("player",357,421,".png",4),24,!1),g.addChild(g._visual2),g._fxInvis=g.game.make.sprite(25,-10,"fx_invis"),g._fxInvis.anchor.set(.5,.95),g._fxInvis.animations.add("idle",Phaser.Animation.generateFrameNames("invincible",0,8,"",4),24,!1),g._fxInvis.animations.stop(),g._direction="right",g.switchAnimation("wait",g._direction),g._dead=!1,g._speedDir=new a.Pixel,g._previousSpeed=new a.Pixel,g._cutLine=new a.Cutline(d),g._width=88,g._height=124,g._isInvincible=!1,g.setHitBody(34,16,0,-8),g.setAttackBody(g._width,g._width,0,.5*-g._height),g.setViewBody(34,8),g}return __extends(d,c),d.prototype.replay=function(a,c){this.x=a,this.y=c,this._sound&&this._sound.isPlaying&&this._sound.stop(),this._mode=b.BORDER,this._dead=!1,this._glow.visible=!1,this._fxInvis.animations.stop(),this._direction="right",this.switchAnimation("wait",this._direction),this._speedDir.x=0,this._speedDir.y=0,this._previousSpeed.x=0,this._previousSpeed.y=0,this._cutLine.destroy(),this.setGlow(!1),this.setInvincible(!1),this.setX2(!1)},d.prototype.setInvincible=function(a){var b=this;this.winOrLose||this._isInvincible!=a&&(this._isInvincible=a,this.setGlow(this._isInvincible),a&&(this.addChild(this._fxInvis),this._fxInvis.animations.play("idle").onComplete.addOnce(function(){b.removeChild(b._fxInvis)})))},d.prototype.setX2=function(a){this.winOrLose||this._isSpeedX2!=a&&(this._isSpeedX2=a,this.setGlow(a,10705960))},d.prototype.setGlow=function(a,b){void 0===b&&(b=16777215),this._glow.visible=a,this._glow.alpha=.8,this._glow.tint=b,this._glowAng=0},d.prototype.switchAnimation=function(a,b){null==b?b="":a=a+"_"+b,this._curAnimation!=a&&(this._curAnimation=a,this._visual2.animations.play(a))},Object.defineProperty(d.prototype,"myWidth",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"myHeight",{get:function(){return this._height},enumerable:!0,configurable:!0}),d.prototype.update=function(){if(!this._dead&&!this._baseGame.isPaused){switch(this._glow.visible&&(this._glowAng+=.1,this._glow.alpha=.8+.2*Math.sin(this._glowAng)),this._speedDir.isZero||this.updateDepth(),this._mode){case b.BORDER:this.moveBorder();break;case b.INSIDE:this.moveInside()}this.moveAnim(),this._speedDir.setZero()}},d.prototype.isOnBorder=function(){return this._mode==b.BORDER},d.prototype.win=function(){this._dead=!0,this.switchAnimation("win")},d.prototype.moveBorder=function(){if(!this._speedDir.isZero)for(var c=0;c<this.pixelPerFrame&&this._mode==b.BORDER;c++){var d=new a.Pixel(this.x,this.y);if(d.add(this._speedDir),!this._baseGame.border.pointInBorder(d.x,d.y)||this._baseGame.isInObstacle(d))return this._baseGame.isInsideZone_faster(d,!1)?void this.setMoveInside(d,this.pixelPerFrame-c):void(this.onStop&&this.onStop());if(3==this._baseGame.tutorStep&&this.x>=563&&this.x<=573)return this._baseGame.nextTutor(3),this._speedDir.setZero(),void(this.onStop&&this.onStop());this.x=d.x,this.y=d.y}},d.prototype.updateDepth=function(){if(this._timeUpdate<=0){this._timeUpdate=this.MAX_TIME_UPDATE;var a=this.parent;a.removeChild(this),a.addChild(this),this._baseGame.powerUpsManager.hit(this.getViewZone(),this.x,this.y,-1,!0)}else this._timeUpdate--},d.prototype.intersectionCutLine=function(a,b){return!this._isInvincible&&this._cutLine&&this._cutLine.intersects(a,b)},d.prototype.stopMove=function(){this._speedDir.setZero(),this.onStop&&this.onStop()},d.prototype.moveInside=function(c){if(void 0===c&&(c=-1),this._speedDir.isZero)return void(this._sound&&this._sound.isPlaying&&this._sound.stop());(null==this._sound||this._sound&&!this._sound.isPlaying)&&(this._sound=a.SoundMixer.play("draw",.4,!1,!0));for(var d=0;d<(-1!=c?c:this.pixelPerFrame)&&this._mode==b.INSIDE;d++){var e=new a.Pixel(this.x,this.y);if(e.add(this._speedDir),this._baseGame.border.pointInBorder(e.x,e.y))return this._cutLine.addVertex(e,this._speedDir),this.x=e.x,this.y=e.y,this.setMoveBorder(),this.onStop&&this.onStop(),this._baseGame.nextTutor(2),void this._baseGame.nextTutor(7);if(this.isNearDrawLine(e))return void this._baseGame.nextTutor(5);if(!this._baseGame.isInsideZone_faster(e,!1))return this.onStop&&this.onStop(),void this._baseGame.nextTutor(1);if(this._cutLine.setLastPoint(e.x,e.y),this._previousSpeed.equal(this._speedDir)||this._cutLine.addVertex(new a.Pixel(this.x,this.y),this._speedDir),this._previousSpeed.set(this._speedDir),4==this._baseGame.tutorStep&&this.y>=245&&this.y<=255)return this._baseGame.nextTutor(4),this._speedDir.setZero(),void(this.onStop&&this.onStop());this.x=e.x,this.y=e.y}},d.prototype.setMoveBorder=function(){this._sound&&this._sound.isPlaying&&this._sound.stop(),this._mode=b.BORDER,this._baseGame.cutForm(this._cutLine),this._cutLine.destroy()},d.prototype.setMoveInside=function(c,d){void 0===d&&(d=-1),this._mode=b.INSIDE,this._cutLine.addVertex(new a.Pixel(this.x,this.y),this._speedDir),this._cutLine.setLastPoint(c.x,c.y),this._previousSpeed.set(this._speedDir),-1!=d&&this.moveInside(d)},d.prototype.moveAnim=function(){this.winOrLose||(this._speedDir.isZero?this.switchAnimation("wait",this._direction):(this._speedDir.x>0?(this._direction="right",this._glow.x=-4):this._speedDir.x<0?(this._direction="left",this._glow.x=4):this._speedDir.y>0?(this._direction="down",this._glow.x=0):this._speedDir.y<0&&(this._direction="up",this._glow.x=0),this.switchAnimation(this.isOnBorder()?"run":"runDraw",this._direction)))},d.prototype.isOnCutLine=function(a,b){return this._cutLine.pointInBorder(a,b)},d.prototype.isNearDrawLine=function(a){if(null==this._cutLine)return!1;for(var b=a.x,c=a.y,d=0;d<3;++d)if(b+=this._speedDir.x,c+=this._speedDir.y,this.isOnCutLine(b,c))return!0;return!1},d.prototype.setSpeed=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this._speedDir.x=a,this._speedDir.y=b},d.prototype.seekIsHit=function(b){return a.GameEntity.hitPhaserPolygon(this.getAttackZone(),b.getHitZone(),this.x,this.y,b.x,b.y)},d.prototype.lose=function(b){void 0===b&&(b=!1),this._dead||(this._sound&&this._sound.isPlaying&&this._sound.stop(),a.SoundMixer.play("die"),0!=this._baseGame.currentLevel?(this._baseGame.GAMEOVER(),this._dead=!0,this.switchAnimation("lose")):this._baseGame.PlayerGetHitWhenTutorial(),b&&this._baseGame.greenPlace.blink(),this.setGlow(!1),
this.setInvincible(!1))},Object.defineProperty(d.prototype,"winOrLose",{get:function(){return!(!this._dead&&!this._baseGame.isPaused)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isInvincible",{get:function(){return this._isInvincible},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"isModeLose",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"pixelPerFrame",{get:function(){return d.PIXEL_PER_FRAME*(this._isSpeedX2?2:1)},enumerable:!0,configurable:!0}),d}(a.GameEntity);c.PIXEL_PER_FRAME=2,a.Player=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f,g,h){var i=b.call(this,c,e,f)||this;return i._visual=new a.DBSprite(a.Boot.POWERUPS,"_DB_POWERUP/"+g),i.addChild(i._visual),"Gold"==g?(i._visual.play("idle"),i._visual.getSlot("Calque 2").play("loop")):i._visual.stop(),i._id=d,i._name=g,i.setHitBody(70,70),i._dead=!1,i.activated=!1,i}return __extends(c,b),c.prototype.addDebugDraw=function(a){a=a||this._hitBody;var b=this.game.make.graphics(0,0);b.beginFill(16711680,.6),a&&b.drawPolygon(a.points),b.beginFill(65280),b.drawCircle(0,0,10),b.endFill(),this.addChild(b)},Object.defineProperty(c.prototype,"typeID",{get:function(){return this._id},enumerable:!0,configurable:!0}),c.prototype.containsPoint=function(a,b){return this._hitBody.contains(a,b)},c.prototype.hit=function(b,c,d){return void 0===c&&(c=0),void 0===d&&(d=0),a.GameEntity.hitPhaserPolygon(this._hitBody,b,this.x,this.y,c,d)},Object.defineProperty(c.prototype,"canGet",{get:function(){return!0},enumerable:!0,configurable:!0}),c.prototype.show=function(){"Gold"!=this._name&&this._visual.play("show",function(){console.log("poof")})},c.prototype.get=function(){var b=this;this.activated=!0,"get"!=this._visual.currentLabel&&(a.SoundMixer.play("item"),this._visual.getSlot("FX1",!0).play("get"),this._visual.play("get",function(){b._dead=!0}))},c.prototype.remove=function(){var a=this;if("Gold"!=this._name)return void(this._dead=!0);"remove"!=this._visual.currentLabel&&this._visual.play("remove",function(){a._dead=!0})},c.prototype.update=function(){b.prototype.update.call(this)},c.prototype.setHitBody=function(a,b,c,d){"number"==typeof a?(c|=0,d|=0,this._hitBody=new Phaser.Polygon(new Phaser.Point(c-.5*a,d-.5*b),new Phaser.Point(c+.5*a,d-.5*b),new Phaser.Point(c+.5*a,d+.5*b),new Phaser.Point(c-.5*a,d+.5*b))):this._hitBody=new Phaser.Polygon(a)},Object.defineProperty(c.prototype,"dead",{get:function(){return this._dead},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),c}(Phaser.Sprite);a.PowerUp=b}(TProject||(TProject={}));var TProject;!function(a){var b;!function(a){a[a.SLOW=0]="SLOW",a[a.STUN=1]="STUN",a[a.INVINCIBLE=2]="INVINCIBLE",a[a.X2=3]="X2",a[a.GOLD=4]="GOLD"}(b||(b={}));var c=function(){function c(a,b){this._activTime=-1,this._activTimeTotal=-1,this._actived=-1,this.currentPowerUp=-1,this._zParent=a,this._game=b,this._powerUps=[]}return c.prototype.replay=function(a){for(void 0===a&&(a=!1),this._activTimeTotal=-1,this._activTime=-1,this._actived=-1,0==a&&(this.currentPowerUp=-1),this._availableIDs=null;this._powerUps.length;)this._powerUps.pop().destroy()},Object.defineProperty(c.prototype,"length",{get:function(){return this._puNonGold},enumerable:!0,configurable:!0}),c.prototype.findID=function(a){for(var b=0;b<c.LIST_ITEM_ID.length;b++)if(c.LIST_ITEM_ID[b]==a)return b;return 0},c.prototype.init=function(a,b){if(this._puNonGold=0,0!=b)if(a)if("string"==typeof a)"0"!=a&&(this._availableIDs=[this.findID(a)]);else{this._availableIDs=[];for(var c=0;c<a.length;c++)this._availableIDs.push(this.findID(a[c]))}else this._availableIDs=[0,1,2,3]},c.prototype.update=function(){for(var a=0;a<this._powerUps.length;)this._powerUps[a].dead?(this._powerUps[a].typeID!=b.GOLD&&this._puNonGold--,this._zParent.removeChild(this._powerUps[a]),this._powerUps.splice(a,1)):(this._powerUps[a].update(),a++);this._activTime<=0?(this._activTime=-1,this.deactivate(this._actived),this._actived=-1):this._activTime>0&&this._activTime--},c.prototype.contains=function(a,b,c){void 0===c&&(c=-1);for(var d=0;d<this._powerUps.length;d++)if((-1==c||c==this._powerUps[d].typeID)&&this._powerUps[d].containsPoint(a,b))return!0;return!1},c.prototype.onCut=function(){var a=this;this._powerUps.forEach(function(b,c){a._game.border.contains(b.x,b.y)||b.remove()})},c.prototype.activate=function(a){switch(a){case b.GOLD:this._game.addMultiplier(),this._game.nextTutor(6);break;default:this.currentPowerUp=a,this._game.addNewPowerUp(a),this._game.nextTutor(8)}},c.prototype.tryActivateCurrentPowerUp=function(){return-1!=this.currentPowerUp&&(this.activateCurrentPowerUp(),!0)},c.prototype.activateCurrentPowerUp=function(){if(-1!=this._actived&&this.deactivate(this._actived,!0),-1!=this.currentPowerUp){switch(this._activTimeTotal=2*c.TIME_POWER_UP[this.currentPowerUp],this._activTime=this._activTimeTotal,this._actived=this.currentPowerUp,this.currentPowerUp){case b.INVINCIBLE:this._game.player.setInvincible(!0);break;case b.STUN:this._game.setStun(!0);break;case b.X2:this._game.player.setX2(!0);break;case b.SLOW:this._game.setSlow(!0)}a.SoundMixer.play("activation1",.2),this.currentPowerUp=-1}},c.prototype.getCurrentPowerUp=function(){return this.currentPowerUp},c.prototype.powerUpTimeProgress=function(){return this._activTime/this._activTimeTotal},c.prototype.deactivate=function(a,c){switch(void 0===c&&(c=!1),a){case b.INVINCIBLE:this._game.player.setInvincible(!1);break;case b.STUN:this._game.setStun(!1);break;case b.X2:this._game.player.setX2(!1);break;case b.SLOW:this._game.setSlow(!1)}},c.prototype.hit=function(a,b,c,d,e){void 0===d&&(d=-1),void 0===e&&(e=!1);for(var f=0;f<this._powerUps.length;f++)if(!this._powerUps[f].dead&&!this._powerUps[f].activated&&(-1==d||d==this._powerUps[f].typeID)&&this._powerUps[f].hit(a,b,c))return e&&(this.activate(this._powerUps[f].typeID),this._powerUps[f].get()),!0;return!1},c.prototype.addPowerUp=function(d,e,f){var g=new a.PowerUp(this._game.game,d,e,f,c.LIST_ITEM_ID[d],c.TIME_POWER_UP[d]);this._powerUps.push(g),this._zParent.addChild(g),d!=b.GOLD&&(this._puNonGold++,g.show())},c.prototype.addGold=function(a,c){this.addPowerUp(b.GOLD,a,c)},c.prototype.addSlow=function(a,c){this.addPowerUp(b.SLOW,a,c)},c.prototype.addStun=function(a,c){this.addPowerUp(b.STUN,a,c)},c.prototype.addInvincible=function(a,c){this.addPowerUp(b.INVINCIBLE,a,c)},c.prototype.addX2=function(a,c){this.addPowerUp(b.X2,a,c)},c.prototype.addRandom=function(a,b){if(null!=this._availableIDs){var c=Math.min(this._availableIDs.length-1,Math.floor(this._availableIDs.length*Math.random()));this.addPowerUp(this._availableIDs[c],a,b)}},c}();c.LIST_ITEM_ID=["Slow","Stun","Invincible","X2","Gold"],c.TIME_POWER_UP=[90,50,90,90,-1],a.PowerUpManager=c}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){this.firstLaunch=!0,this.firstSecondTutorial=!0,this.maxScore=0,this.playMusic=!0}return a}();a.SaveData=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f){void 0===f&&(f=0);var g=b.call(this,c.game,d,e)||this;g.dirs=[new a.Pixel(1,0),new a.Pixel(0,-1),new a.Pixel(-1,0),new a.Pixel(0,1)],g.SWARMER_1="_DB_SWARMER/carrier",g.SWARMER_2="_DB_SWARMER/flower",g.PIXEL_PER_FRAME=2,g._skinNum=0,g._dead=!1,g.isAggressive=!0,g.MAX_TIME_UPDATE=10,g._timeUpdate=g.MAX_TIME_UPDATE,g._baseGame=c,g.speed=g.dirs[0],g._isSlow=!1;var h;return 0!=f?h=1==f?g.SWARMER_2:g.SWARMER_1:(g._skinNum=Math.random()<.5?1:2,h=1==g._skinNum?g.SWARMER_1:g.SWARMER_2),g._visual=new a.DBSprite(a.Boot.SWARMER,h),g.switchAnimation("wait"),g.addChild(g._visual),g.setMoveBorder(),g._doAction=g.doActionNormal,g.setHitBody(10,12,0,-6),g.setViewBody(70,100,-50),g}return __extends(c,b),c.prototype.destroy=function(){this._visual.free(),this._animState=null,this._doAction=null,b.prototype.destroy.call(this,!0)},Object.defineProperty(c.prototype,"skinNum",{get:function(){return this._skinNum},enumerable:!0,configurable:!0}),c.prototype.switchAnimation=function(a){if(this._visual.currentLabel!=a){this._animState=this._visual.play(a);var b=this._visual.getSlot(a);b&&b.play("loop")}},c.prototype.setModeNormal=function(){this._doAction=this.doActionNormal},c.prototype.setModeSlow=function(){this.switchAnimation("slow")},c.prototype.gameOver=function(){this.switchAnimation("die"),this._dead=!0},c.prototype.win=function(){this._dead=!0},c.prototype.setSlow=function(a){this._dead||(this._isSlow=a,this._doAction!=this.doActionLose&&this._doAction!=this.doActionWin&&(this._isSlow?this.setModeSlow():this.setModeNormal()))},c.prototype.nbPixPerFram=function(){return this._isSlow?this.PIXEL_PER_FRAME/2:this.PIXEL_PER_FRAME},c.prototype.setMaxSpeed=function(a){this.PIXEL_PER_FRAME+=Math.round(a)},c.prototype.setDir=function(b){void 0===b&&(b=0);return this.x==a.BaseGame.BEGIN_X+2?this.speed=this.dirs[3].copy():this.x==a.BaseGame.BEGIN_X+a.BaseGame.GREEN_PLACE_WIDTH-2?this.speed=this.dirs[1].copy():this.y==a.BaseGame.BEGIN_Y+2?this.speed=this.dirs[2].copy():(this.y,a.BaseGame.BEGIN_Y,a.BaseGame.GREEN_PLACE_HEIGHT,this.speed=this.dirs[0].copy()),0!=b&&b==this.speed.x+this.speed.y&&this.flipDir(),this.speed.x+this.speed.y},c.prototype.flipDir=function(){0!=this.speed.x&&(this.speed.x*=-1),0!=this.speed.y&&(this.speed.y*=-1)},c.prototype.doActionNormal=function(){this.moveMode()},c.prototype.tryMove=function(b){void 0===b&&(b=!1);var c=new a.Pixel(this.x,this.y).add(this.speed);return!(b?!this._baseGame.isOnStartBorder(c):!this._baseGame.border.pointInBorder(c.x,c.y))},c.prototype.moveBorder=function(){var b=new a.Pixel(this.x,this.y);if(!this._baseGame.border.pointInBorder(b.x,b.y))return void(this._baseGame.isOnStartBorder(b)?this.setMoveStartBorder():this.setMoveInside());for(var c=0;c<this.nbPixPerFram()&&this.moveMode==this.doMoveBorder;c++){if(!this.tryMove())return void this.turn();var d=new a.Pixel(this.x,this.y).add(this.speed);if(this._baseGame.isInObstacle(d))return void this.flipDir();this.move(this.x+this.speed.x,this.y+this.speed.y)}},c.prototype.setMoveInside=function(){this.moveMode=this.doMoveInside},c.prototype.doMoveInside=function(){this.moveInside()},c.prototype.moveInside=function(){for(var b=0;b<this.nbPixPerFram()&&this.moveMode==this.doMoveInside;b++){var c=new a.Pixel(this.x,this.y).add(this.speed);this._baseGame.border.pointInBorder(c.x,c.y)?this.setMoveBorder():this._baseGame.isOnStartBorder(c)&&this.setMoveStartBorder(),this.move(this.x+this.speed.x,this.y+this.speed.y)}},c.prototype.setMoveBorder=function(){this.moveMode=this.doMoveBorder},c.prototype.doMoveBorder=function(){this.moveBorder()},c.prototype.setMoveStartBorder=function(){this.moveMode=this.doMoveStartBorder},c.prototype.doMoveStartBorder=function(){this.moveStartBorder()},c.prototype.moveStartBorder=function(){if(!this._baseGame.isOnStartBorder(new a.Pixel(this.x,this.y)))return void this.setMoveInside();for(var b=0;b<this.nbPixPerFram()&&this.moveMode==this.doMoveStartBorder;b++){if(this.tryMove(!1))this.setMoveBorder();else if(!this.tryMove(!0))return void this.turn(!0);this.move(this.x+this.speed.x,this.y+this.speed.y)}},c.prototype.move=function(a,b){return this.x=a,this.y=b,this.moveAnim(),null},c.prototype.moveAnim=function(){this.isModeWin()||(this.speed.isZero?this._isSlow||this.switchAnimation("wait"):(this._isSlow||this.switchAnimation("run"),this.speed.x>0?this.scale.x=1:this.speed.x<0&&(this.scale.x=-1)))},c.prototype.isModeWin=function(){return this._doAction==this.doActionWin},c.prototype.doActionWin=function(){console.log("WIN SWARMER")},c.prototype.setModeWin=function(){this._doAction=this.doActionWin,this.switchAnimation("wait")},c.prototype.turn=function(a){void 0===a&&(a=!1);var b=this.speed.copy(),c=0;do{this.speed=this.getNextDir(this.speed),++c}while((this.speed.x==b.x||this.speed.y==b.y||!this.tryMove(a))&&c<this.dirs.length)},c.prototype.getNextDir=function(a){for(var b=0,c=0;c<this.dirs.length;c++)if(this.dirs[c].equal(a))return b=c+1,b>=this.dirs.length&&(b=0),this.dirs[b].copy();return null},c.prototype.update=function(){this.runAction()},c.prototype.updateDepth=function(){if(this._timeUpdate<=0){this._timeUpdate=this.MAX_TIME_UPDATE;var a=this.parent;a.removeChild(this),a.addChild(this)}else this._timeUpdate--},c.prototype.setStun=function(a){this._dead||(a?this.switchAnimation("stun"):this.switchAnimation("run"),this._isStun=a)},c.prototype.runAction=function(){1==this._dead||this.isStun||this._baseGame.isPaused||(this.updateDepth(),this.doEffect(this._baseGame.player),this._doAction())},c.prototype.playerHitForAttack=function(){return this.hit(this._baseGame.player)},c.prototype.doEffect=function(b){return this._doAction!=this.doActionLose&&(!(!(b instanceof a.Player&&this.canHitPlayer()&&this.isAggressive&&this.playerHitForAttack())||b.isInvincible||b.isModeLose)&&(b.lose(),this.setModeWin(),!0))},c.prototype.canHitPlayer=function(){return this._baseGame.playerOnBorder()},c.prototype.setModeLose=function(){this._doAction=this.doActionLose,this.switchAnimation("die")},c.prototype.doActionLose=function(){},c}(a.GameEntity);a.Swarmer=b}(TProject||(TProject={}));var TProject;!function(a){var b;!function(a){a[a.LIGHT=0]="LIGHT",a[a.MEDIUM=1]="MEDIUM",a[a.HARD=2]="HARD"}(b=a.FontType||(a.FontType={}));var c=function(){function a(a,b){this._xml=b,this._curLocale=a}return a.prototype.get=function(a){return this._xml.getElementById(a).innerHTML},a.prototype.pickUpFont=function(a){if(void 0===a&&(a=b.MEDIUM),"ar"==this._curLocale)return"Lubalin_Ara";if("ru"==this._curLocale)return a==b.LIGHT?"Fred Fredburger W04 Regular":"Fred Fredburger W04 Bold";switch(a){case b.LIGHT:return"Lubalin_CnObl";case b.MEDIUM:return"Lubalin_Book";default:return"Lubalin_D14"}},Object.defineProperty(a.prototype,"currentLocale",{get:function(){return this._curLocale},enumerable:!0,configurable:!0}),a}();a.LanguageManager=c}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function b(){}return b.init=function(a){b._audio=a.add.audioSprite("sfx")},b.play=function(c,d,e,f){if(void 0===d&&(d=.3),void 0===e&&(e=!1),void 0===f&&(f=!1),0==a.Boot.GAME_DATA.playMusic)return void(e&&(b._bgKey=c,b._bgVolume=d));if(e)return b._bg&&b._bg.stop(),b._bgKey=c,b._bgVolume=d,b._bg=b._audio.play(c,d),b._bg.allowMultiple=!0,b._bg.loop=!0,b._bg;var g=b._audio.play(c,d);return g.allowMultiple=!0,g.loop=f,g},b.stop=function(a){b._audio.stop(a)},b.on=function(){b._bgKey&&b.play(b._bgKey,b._bgVolume)},b.off=function(){b._audio.stop(null)},b}();a.SoundMixer=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function b(b){this._baseGame=b,this._vertices=[],this._lastPoint=new a.Point,this._goX=0,this._goY=0,this._lastX=0,this._lastY=0}return b.prototype.destroy=function(){for(;this._vertices.length>0;)this._vertices.pop();this._lastPoint.setZero()},b.prototype.addVertex=function(a,b){this._vertices.push(a),this._baseGame.greenPlace.drawPlayerTrail(this._vertices),this._baseGame.greenPlace.setCurrentTrail(a.x,a.y)},Object.defineProperty(b.prototype,"needCheck",{get:function(){return this._goX*this._goY==0?2==this._goX||2==this._goY:this._goX+this._goY==4},enumerable:!0,configurable:!0}),b.prototype.setLastPoint=function(a,b){this._lastPoint.x=a,this._lastPoint.y=b,this._baseGame.greenPlace.setCurrentTrailNext(a,b)},b.prototype.pointInBorder=function(a,b){for(var c=this._vertices.length,d=1;d<c;d++)if(this.pointInLine(a,b,this._vertices[d-1],this._vertices[d]))return!0;return!(!this.pointInLine(a,b,this._vertices[c-1],this._lastPoint)||this._lastPoint.x==a&&this._lastPoint.y==b)},b.prototype.pointInLine=function(a,b,c,d){var e=c.x-a,f=c.y-b,g=d.x-a,h=d.y-b;return e*f==0&&g*h==0&&e*g<=0&&f*h<=0},b.prototype.intersects=function(b,c){var d=this._vertices.length;if(0==d||null==this._lastPoint)return!1;for(var e=1;e<d;e++)if(a.Polygon.lineIntersectLine(this._vertices[e-1],this._vertices[e],b,c,!0))return!0;return!!a.Polygon.lineIntersectLine(this._vertices[d-1],this._lastPoint,b,c,!0)},Object.defineProperty(b.prototype,"vertices",{get:function(){return this._vertices},enumerable:!0,configurable:!0}),b}();a.Cutline=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(){function a(){this._vertices=[]}return a.prototype.create=function(){this._body=new Phaser.Polygon(this._vertices)},a.prototype.destroy=function(){for(;this._vertices.length>0;)this._vertices.pop();this._body=null},a.prototype.addVertex=function(a){this._vertices.push(a)},Object.defineProperty(a.prototype,"area",{get:function(){return this._body.area},enumerable:!0,configurable:!0}),a.prototype.cut=function(b){var c,d=b.vertices[0],e=b.vertices[b.vertices.length-1],f=this.findPointIndex(d),g=this.findPointIndex(e);if(g<f||f==g&&d.copy().sub(this._vertices[f]).length<e.copy().sub(this._vertices[g]).length)return b.vertices.reverse(),this.cut(b);var h=new a;for(h.addVertex(d),c=f;c<g;c++)h.addVertex(this._vertices[c]);h.addVertex(e);var i=new a;for(i.addVertex(e),c=g;c<this.length;c++)i.addVertex(this._vertices[c]);for(c=0;c<f;c++)i.addVertex(this._vertices[c]);for(i.addVertex(d),c=b.vertices.length-2;c>0;c--)h.addVertex(b.vertices[c]);for(c=1;c<b.vertices.length-1;c++)i.addVertex(b.vertices[c]);return h.create(),i.create(),[h,i]},a.prototype.pointInBorder=function(a,b){for(var c,d=this._vertices.length,e=1;e<=d;e++)if(c=e<d?e:0,this.pointInLine(a,b,this._vertices[e-1],this._vertices[c]))return!0;return!1},a.prototype.pointInLine=function(a,b,c,d){var e=c.x-a,f=c.y-b,g=d.x-a,h=d.y-b;return e*f==0&&g*h==0&&e*g<=0&&f*h<=0},a.prototype.intersectionDistance=function(b,c){b=b.copy(),c=c.copy();for(var d,e=null,f=[],g=1;g<=this.length;g++){d=g>=this.length?0:g;var h=this.vertices[g-1].copy(),i=this.vertices[d].copy();e=a.lineIntersectLine(h,i,b,c,!0),e&&f.push(e)}if(f.length){for(var j=Number.MAX_VALUE,k=0,l=f;k<l.length;k++){var m=l[k],n=m.copy().sub(b).length;n<j&&n>.02&&(j=n)}return j}return-1},a.prototype.drawMask=function(a){a.clear(),a.beginFill(0),a.drawPolygon(this._vertices),a.endFill()},a.prototype.contains=function(a,b){return this._body.contains(a,b)},a.prototype.findPointIndex=function(a){for(var b,c=this.length,d=1;d<=c;d++)if(b=d<c?d:0,this.pointInLine(a.x,a.y,this._vertices[d-1],this._vertices[b]))return b;return-1},Object.defineProperty(a.prototype,"vertices",{get:function(){return this._vertices},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._vertices.length},enumerable:!0,configurable:!0}),a.prototype.popValidationFXs=function(a){var b=this;a.generatRandomPosArray().forEach(function(c,d){b._body.contains(c.x,c.y)&&!a.isInObstacle(c)&&a.deleteLight(c.x,c.y)})},a.lineIntersectLine=function(a,b,d,e,f){void 0===f&&(f=!0);var g,h,i,j,k,l,m;h=b.y-a.y,j=a.x-b.x,l=b.x*a.y-a.x*b.y,i=e.y-d.y,k=d.x-e.x,m=e.x*d.y-d.x*e.y;var n=h*k-i*j;if(0==n)return null;if(g=new c,g.x=(j*m-k*l)/n,g.y=(i*l-h*m)/n,f){if(Math.pow(g.x-b.x,2)+Math.pow(g.y-b.y,2)>Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))return null;if(Math.pow(g.x-a.x,2)+Math.pow(g.y-a.y,2)>Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))return null;if(Math.pow(g.x-e.x,2)+Math.pow(g.y-e.y,2)>Math.pow(d.x-e.x,2)+Math.pow(d.y-e.y,2))return null;if(Math.pow(g.x-d.x,2)+Math.pow(g.y-d.y,2)>Math.pow(d.x-e.x,2)+Math.pow(d.y-e.y,2))return null}return g},a}();a.Polygon=b;var c=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b}return a.prototype.add=function(a,b){return"number"==typeof a?(this.x+=a,this.y+=b):(this.x+=a.x,this.y+=a.y),this},a.prototype.copy=function(){return new a(this.x,this.y)},a.prototype.sub=function(a,b){return"number"==typeof a?(this.x-=a,this.y-=b):(this.x-=a.x,this.y-=a.y),this},a.prototype.set=function(a){this.x=a.x,this.y=a.y},a.prototype.equal=function(a){return this.x==a.x&&this.y==a.y},a.prototype.normalize=function(a){void 0===a&&(a=1);var b=this.length,c=0==b?0:a/b;this.x=this.x*c,this.y=this.y*c},a.prototype.setZero=function(){this.x=0,this.y=0},Object.defineProperty(a.prototype,"isZero",{get:function(){return 0==this.x&&0==this.y},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return Math.sqrt(this._x*this._x+this._y*this.y)},enumerable:!0,configurable:!0}),a}();a.Point=c;var d=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),Object.defineProperty(b.prototype,"x",{get:function(){return this._x},set:function(a){this._x=Math.floor(a)},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"y",{get:function(){return this._y},set:function(a){this._y=Math.floor(a)},enumerable:!0,configurable:!0}),b}(c);a.Pixel=d}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d){var e=b.call(this,c,0,0)||this;return e._baseGame=d,e._curentGoldenCooNumber=0,e._currentGoalNumber=0,e._currentCompleteNumber=0,e._currentLevel=0,e._currentAllScore=0,e._tutorialCurrentState=0,e._tutorialState=0,e._currentHeart=3,e._currentPowerUpTypeNumber=-1,e._currentSubPowerUpTypeNumber=-1,e._heartsSprite=[],e._tutorialArrows=[],e._tutorialArrowsText=[],e._currentTutorialTween=[],e._activatePowerUp=!1,e._startTweenNumber=!1,e._tweenNumberDuration=.1,e._levelScoreNumberCurrent=0,e._bonusScoreNumberCurrent=0,e._currentScoreNumberCurrent=0,e._levelScoreNumberMax=0,e._bonusScoreNumberMax=0,e._currentScoreNumberMax=0,e._allScoreNumberMax=0,e._coolMeter=e.game.add.sprite(657,6,"ingameUI","goldPanel0000"),e.addChild(e._coolMeter),e.createPowerUperMeter(),e._currentBoosterNameText=e.game.add.text(40,26,"speed",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"16px",fontWeight:"normal",fill:"#ffffff",align:"right",stroke:"#6d3e6d",strokeThickness:8}),e._currentBoosterNameText.anchor.set(0,.5),e.addChild(e._currentBoosterNameText),e._currentBoosterNameText.visible=!1,e._currentPowerUpIcon=e.game.add.sprite(1,1,"ingameUI","icon_ingame0002"),e.addChild(e._currentPowerUpIcon),e._currentSubPowerUpIcon=e.game.add.sprite(24,22,"ingameUI","icon_ingame0000"),e._currentSubPowerUpIcon.scale.set(.85),e.addChild(e._currentSubPowerUpIcon),e.game.device.desktop||(e._currentPowerUpIcon.inputEnabled=!0,e._currentPowerUpIcon.events.onInputDown.add(e.tryBoostActivate,e)),e._currentPowerUpIcon.visible=!1,e._containerForPowerUpMeter.visible=!1,e._currentSubPowerUpIcon.visible=!1,e._soundButton=new a.OButtonCheck(e.game,"ingameUI",["_BtnBG40001","_BtnBG4Over0001","_BtnBG4Down0001"],["_BtnBG40002","_BtnBG4Over0002","_BtnBG4Down0002"],function(){a.Boot.GAME_DATA.playMusic=e._soundButton.check,a.SaveManager.getInstance.save(),e._soundButton.check?a.SoundMixer.on():a.SoundMixer.off()}),e._soundButton.setCheck(a.Boot.GAME_DATA.playMusic),e._soundButton.setCBContext(e),e._soundButton.position.set(674,474),e._soundButton.setAnimationScale(0,1),e.addChild(e._soundButton),e._menuButton=new a.OButton(e.game,"ingameUI",["_BtnBG40000","_BtnBG4Over0000","_BtnBG4Down0000"],function(){e._baseGame.setPause(!0),e.showIngameMenu()}),e._menuButton.setCBContext(e),e._menuButton.position.set(723,474),e._menuButton.setAnimationScale(0,1),e.addChild(e._menuButton),e._gameProgressText=e.game.add.text(400,27,"0 / 0 %",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#6d3e6d",strokeThickness:8}),e._gameProgressText.anchor.set(.5,.5),e.addChild(e._gameProgressText),e._curentLevelText=e.game.add.text(13,476,"Level 6",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"left",stroke:"#6d3e6d",strokeThickness:8}),e._curentLevelText.anchor.set(0,.5),e.addChild(e._curentLevelText),e._curentGoldenCooText=e.game.add.text(689,27,"5",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"23px",fontWeight:"normal",fill:"#ffcc00",align:"center",stroke:"#000000",strokeThickness:5}),e._curentGoldenCooText.anchor.set(.5,.5),e.addChild(e._curentGoldenCooText),e._coolFXSun=e.game.add.sprite(688,21,"ingameUI","Hud_fxlumi0000"),e._coolFXSun.anchor.set(.5),e._coolFXSun.scale.set(.4),e._coolFXSun.visible=!1,e.addChild(e._coolFXSun),e._coolFXSparks=e.game.add.sprite(688,27,"ingameUI","Hud_AnimFX_10000"),e._coolFXSparks.animations.add("getGold",Phaser.Animation.generateFrameNames("Hud_AnimFX_",1e4,10004),24,!1),e._coolFXSparks.anchor.set(.5),e._coolFXSparks.visible=!1,e.addChild(e._coolFXSparks),e._tutorialINGAMEBtn=e.game.add.sprite(688,27,"ingameUI","KeySwitcher_arrow_up0000"),e._tutorialINGAMEBtn.anchor.set(.5),e._tutorialINGAMEBtn.visible=!1,e.addChild(e._tutorialINGAMEBtn),e._tutorialINGAMEText=e.game.add.text(13,476,"TUTORIAL \nTIPS",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"17px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#6d3e6d",strokeThickness:5}),e._tutorialINGAMEText.anchor.set(.5,0),e.addChild(e._tutorialINGAMEText),e._tutorialINGAMEText.visible=!1,e._tutorialINGAMEPlank=e.game.add.sprite(526,415,"tutorialUI","Hud_text_tutoTrick_txt0000"),e._tutorialINGAMEPlank.anchor.set(.5),e._tutorialINGAMEPlank.visible=!1,e.addChild(e._tutorialINGAMEPlank),e._tutorialINGAMEPlankText=e.game.add.text(0,0,"TUTORIAL \nTIPS \nINPLANK",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"17px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#391b37",strokeThickness:5}),e._tutorialINGAMEPlankText.anchor.set(.5),e._tutorialINGAMEPlank.addChild(e._tutorialINGAMEPlankText),e._tutorialINGAMEAnimationArrow=e.game.add.sprite(464,77,"tutorialUI","Hud_pointer_tuto_10000"),e._tutorialINGAMEAnimationArrow.animations.add("start",Phaser.Animation.generateFrameNames("Hud_pointer_tuto_",1e4,10011),15,!0),e._tutorialINGAMEAnimationArrow.anchor.set(.5),e._tutorialINGAMEAnimationArrow.visible=!1,e.addChild(e._tutorialINGAMEAnimationArrow),e.createRetryPlank(),e.createMenuPlank(),e.createWinLosePlank(),e}return __extends(c,b),c.prototype.initialUI=function(b,c,d,e){0==e?(this._curentLevelText.visible=!1,this.currentTutorialTips(0)):this._curentLevelText.visible=!0,-1==this._currentPowerUpTypeNumber&&(this._currentPowerUpIcon.visible=!1,this._currentBoosterNameText.visible=!1),this._containerForPowerUpMeter.visible=!1,this._currentSubPowerUpIcon.visible=!1,this._currentSubPowerUpTypeNumber=-1,this._activatePowerUp=!1,this._currentCompleteNumber=0,this._curentGoldenCooNumber=c,this._currentGoalNumber=d,this._currentLevel=e,this._curentGoldenCooText.text=this._curentGoldenCooNumber.toString(),this._gameProgressText.text=this._currentCompleteNumber+" / "+this._currentGoalNumber+" %",this._curentLevelText.text="Level "+this._currentLevel,2==this._currentLevel&&a.Boot.GAME_DATA.firstSecondTutorial&&(this.createMiniTutorial(),a.Boot.GAME_DATA.firstSecondTutorial=!1,a.SaveManager.getInstance.save())},c.prototype.changeCurrentComplete=function(a){this._currentCompleteNumber=a,this._gameProgressText.text=this._currentCompleteNumber+" / "+this._currentGoalNumber+" %",this._gameProgressText.scale.set(1,1),this.game.add.tween(this._gameProgressText.scale).to({x:1.1,y:1.1},100,Phaser.Easing.Back.In,!0,0,0,!0)},c.prototype.addPowerUp=function(a){if(this._activatePowerUp)this._currentSubPowerUpTypeNumber=a,this._currentSubPowerUpIcon.loadTexture("ingameUI","icon_ingame000"+a),this._currentSubPowerUpIcon.visible=!0;else switch(this._currentPowerUpTypeNumber=a,this._currentPowerUpIcon.loadTexture("ingameUI","icon_ingame000"+a),this._currentPowerUpIcon.visible=!0,this._currentBoosterNameText.visible=!0,a){case 0:this._currentBoosterNameText.text="SLOW";break;case 1:this._currentBoosterNameText.text="STUN";break;case 2:this._currentBoosterNameText.text="INVINCIBLE";break;case 3:this._currentBoosterNameText.text="SPEED"}},c.prototype.addGoldenHand=function(){var a=this;this._curentGoldenCooNumber++,this._curentGoldenCooText.text=this._curentGoldenCooNumber.toString(),this._coolFXSparks.visible=!0,this._coolFXSun.visible=!0,this.game.add.tween(this._coolFXSun.scale).to({x:1.2,y:1.2},150,Phaser.Easing.Linear.None,!0),this._coolFXSparks.animations.play("getGold").onComplete.addOnce(function(){a.game.add.tween(a._coolFXSun).to({alpha:0},150,Phaser.Easing.Linear.None,!0),a.game.add.tween(a._coolFXSparks).to({alpha:0},150,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a._coolFXSparks.visible=!1,a._coolFXSun.visible=!1,a._coolFXSparks.alpha=1,a._coolFXSun.alpha=1})},this)},c.prototype.tutorialTipsUpdate=function(a,b){var c=0;this.game.device.desktop||(c=-10),this._tutorialState<9?(this._tutorialINGAMEBtn.position.set(a-130,b-105+c),this._tutorialINGAMEText.position.set(a-130,b-85)):11==this._tutorialState||(this._tutorialINGAMEBtn.position.set(a-130,b-25+c),this._tutorialINGAMEText.position.set(a-130,b-5)),0==this._tutorialState&&0==this._tutorialINGAMEPlank.visible&&339==b&&(this._tutorialINGAMEPlank.visible=!0)},c.prototype.tryBoostActivate=function(){this._baseGame.tryBoostActivateMobile()},c.prototype.currentTutorialTips=function(b){var c=this;switch(this._tutorialState=b,b){case 0:this._tutorialINGAMEPlank.visible=!1,this._tutorialINGAMEBtn.visible=!0,this._tutorialINGAMEText.visible=!0,this._tutorialINGAMEText.text="Run up.",this._tutorialINGAMEPlankText.text="Careful, there's an \nobstacle!",this.game.device.desktop?this._tutorialINGAMEBtn.loadTexture("ingameUI","KeySwitcher_arrow_up0000"):(this._tutorialINGAMEBtn.loadTexture("ingameUI","hand0000"),this._tutorialINGAMEBtn.angle=-90,this._tutorialINGAMEBtn.scale.set(.75));break;case 1:this._tutorialINGAMEText.text="Now run to the \nedge.",this.game.device.desktop?this._tutorialINGAMEBtn.loadTexture("ingameUI","KeySwitcher_arrow_right0000"):(this._tutorialINGAMEBtn.angle=0,this._tutorialINGAMEBtn.scale.set(.75));break;case 2:this._tutorialINGAMEText.text="Move along the \noutside of the box.",this._tutorialINGAMEAnimationArrow.animations.play("start"),this._tutorialINGAMEAnimationArrow.visible=!0,this._tutorialINGAMEPlankText.text="Nice! When you \ncomplete a line, you'll \nclear that area.",this.game.device.desktop?this._tutorialINGAMEBtn.loadTexture("ingameUI","KeySwitcher_arrow_left0000"):this._tutorialINGAMEBtn.scale.set(-.75,.75);break;case 3:this._tutorialINGAMEText.text="Start a new line.",this._tutorialINGAMEAnimationArrow.animations.stop("start"),this._tutorialINGAMEAnimationArrow.visible=!1,this._tutorialINGAMEPlank.visible=!1,this.game.device.desktop?this._tutorialINGAMEBtn.loadTexture("ingameUI","KeySwitcher_arrow_up0000"):(this._tutorialINGAMEBtn.scale.set(.75),
this._tutorialINGAMEBtn.angle=-90);break;case 4:this._tutorialINGAMEText.text="You can't move \nbackwards on \nyour own lines. \nTry it.",this.game.device.desktop?this._tutorialINGAMEBtn.loadTexture("ingameUI","KeySwitcher_arrow_down0000"):(this._tutorialINGAMEBtn.angle=90,this._tutorialINGAMEBtn.scale.set(.75));break;case 5:this._tutorialINGAMEText.visible=!1,this._tutorialINGAMEBtn.visible=!1,this._tutorialINGAMEPlank.visible=!0,this._tutorialINGAMEPlankText.text="See. Told you.";break;case 6:this._tutorialINGAMEText.visible=!0,this._tutorialINGAMEBtn.visible=!0,this._tutorialINGAMEPlank.visible=!1,this._tutorialINGAMEText.text="Grab that bonus \nmultiplier.",this.game.device.desktop?this._tutorialINGAMEBtn.loadTexture("ingameUI","KeySwitcher_arrow_up0000"):(this._tutorialINGAMEBtn.angle=-90,this._tutorialINGAMEBtn.scale.set(.75));break;case 7:this._tutorialINGAMEText.visible=!0,this._tutorialINGAMEBtn.visible=!1,this._tutorialINGAMEPlank.visible=!0,this._tutorialINGAMEText.text="Continue up to \nclear this area.",this._tutorialINGAMEPlankText.text="Collect multipliers to \nearn higher scores!",this.game.device.desktop;break;case 8:this._tutorialINGAMEText.visible=!1,this._tutorialINGAMEBtn.visible=!1,this._tutorialINGAMEPlank.visible=!0,this._tutorialINGAMEPlankText.text="Look out!! He doesn't \nseem friendly.",this.game.device.desktop;break;case 9:this._tutorialINGAMEText.visible=!0,this._tutorialINGAMEBtn.visible=!0,this._tutorialINGAMEPlank.visible=!1,this._tutorialINGAMEText.text="Snag that power-up.",this.game.device.desktop?this._tutorialINGAMEBtn.loadTexture("ingameUI","KeySwitcher_arrow_left0000"):(this._tutorialINGAMEBtn.scale.set(-.75,.75),this._tutorialINGAMEBtn.angle=0);break;case 10:this._tutorialINGAMEText.visible=!1,this._tutorialINGAMEBtn.visible=!1,this._tutorialINGAMEPlank.visible=!0,this._tutorialINGAMEPlankText.text="Yes! This one gives you \na speed boost.",this.game.device.desktop;break;case 11:if(this._tutorialINGAMEText.visible=!0,this._tutorialINGAMEBtn.visible=!0,this._tutorialINGAMEPlank.visible=!1,this._tutorialINGAMEText.text="Punch it!",this.game.device.desktop){this._tutorialINGAMEBtn.loadTexture("ingameUI","KeySwitcher_space_bg0000");var d=this.game.add.text(0,0,"SPACEBAR",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"17px",fontWeight:"normal",fill:"#744381",align:"center"});d.anchor.set(.5,.5),this._tutorialINGAMEBtn.addChild(d)}else this._tutorialINGAMEBtn.visible=!0,this._tutorialINGAMEBtn.position.set(90,72.6),this._tutorialINGAMEText.position.set(90,90),this._tutorialINGAMEBtn.angle=45;break;case 12:this._tutorialINGAMEText.visible=!1,this._tutorialINGAMEBtn.visible=!1,this._tutorialINGAMEPlank.visible=!0,this._tutorialINGAMEPlankText.text="Now clear enough area \nto finish the level!",setTimeout(function(){c._tutorialINGAMEPlank.visible=!1},2300);break;case 13:this._tutorialINGAMEText.visible=!0,this._tutorialINGAMEText.text="Oh no! You have \nbeen hit! Avoid the \nspirit.";break;case 14:this._tutorialINGAMEText.visible=!1}},c.prototype.activatePowerUp=function(){11==this._tutorialState&&this.currentTutorialTips(12),-1==this._currentPowerUpTypeNumber&&-1==this._currentSubPowerUpTypeNumber||(this._activatePowerUp?-1!=this._currentSubPowerUpTypeNumber&&(this._currentPowerUpIcon.loadTexture("ingameUI","icon_ingame000"+this._currentSubPowerUpTypeNumber),this._currentPowerUpTypeNumber=this._currentSubPowerUpTypeNumber,this._redRectPowerUp.scale.set(20,1),this._activatePowerUp=!0,this._currentSubPowerUpIcon.visible=!1,this._currentSubPowerUpTypeNumber=-1):(this._activatePowerUp=!0,this._redRectPowerUp.scale.set(20,1),this._currentBoosterNameText.visible=!1,this._containerForPowerUpMeter.visible=!0))},c.prototype.powerUpTimerUpdate=function(a){if(this._activatePowerUp)if(a<=0)if(a=0,this._activatePowerUp=!1,this._redRectPowerUp.scale.set(20,1),this._containerForPowerUpMeter.visible=!1,-1!=this._currentSubPowerUpTypeNumber){switch(this._currentPowerUpIcon.loadTexture("ingameUI","icon_ingame000"+this._currentSubPowerUpTypeNumber),this._currentPowerUpTypeNumber=this._currentSubPowerUpTypeNumber,this._redRectPowerUp.scale.set(20,1),this._currentBoosterNameText.visible=!0,this._currentPowerUpTypeNumber){case 0:this._currentBoosterNameText.text="SLOW";break;case 1:this._currentBoosterNameText.text="STUN";break;case 2:this._currentBoosterNameText.text="INVINCIBLE";break;case 3:this._currentBoosterNameText.text="SPEED"}this._currentSubPowerUpIcon.visible=!1,this._currentSubPowerUpTypeNumber=-1}else this._currentPowerUpTypeNumber=-1,this._currentBoosterNameText.visible=!1,this._currentPowerUpIcon.visible=!1;else this._redRectPowerUp.scale.set(20*a,1)},c.prototype.gameLose=function(b){var c=this;if(this._soundButton.enabled=!1,this._menuButton.enabled=!1,b)if(0==this._currentLevel){var d=new Phaser.Graphics(this.game,0,0);d.beginFill(0,1),d.drawRect(0,0,this.game.width,this.game.height),d.endFill(),this.addChild(d);var e=this.game.add.sprite(this.game.width/2,this.game.height/2+15,"ingameUI","MenuRealBG0000");e.anchor.set(.5),e.scale.set(1.15),this.addChild(e);var f=this.game.add.sprite(8,-195,"ingameUI","win_images0000");f.anchor.set(.5,.5),e.addChild(f);var g=new a.OButton(this.game,"ingameUI",["NextBtn0000","NextBtn0001","NextBtn0001"],function(){g.inputEnabled=!1,e.removeChild(g),c._menuButton.enabled=!0,c._soundButton.enabled=!0,d.destroy(!0),e.destroy(!0),c._baseGame.replay(1,!1)});g.setCBContext(this),g.position.set(0,120),g.setAnimationScale(0,1),e.addChild(g);var h=this.game.add.text(0,-138,"Jealousy be gone!",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:7});h.anchor.set(.5,.5),e.addChild(h);var i=this.game.add.text(0,-3,"You're now ready\nto trap the spirit.\nGood luck!",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:7});i.anchor.set(.5,.5),e.addChild(i)}else this.endGame(!0);else this._activatePowerUp=!1,this._redRectPowerUp.scale.set(20,1),this._containerForPowerUpMeter.visible=!1,this._currentSubPowerUpIcon.visible=!1,this._currentSubPowerUpTypeNumber=-1,this._currentPowerUpTypeNumber=-1,this._currentBoosterNameText.visible=!1,this._currentPowerUpIcon.visible=!1,this._currentHeart--,this._currentHeart>=0?this.game.add.tween(this._retryContainer).to({alpha:1},300,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){c._heartsSprite[c._currentHeart].animations.play("breakHeart"),c._continueButton.enabled=!0,c._exitButton.enabled=!0},this):this.endGame(!1)},c.prototype.createMiniTutorial=function(){var b=this;this._baseGame.setPause(!0),this._menuButton.enabled=!1,this._soundButton.enabled=!1;var c=this.game.add.sprite(0,0);this.addChild(c);var d=new Phaser.Graphics(this.game,0,0);d.beginFill(0,.5),d.drawRect(0,0,this.game.width,this.game.height),d.endFill(),c.addChild(d);var e=this.game.add.sprite(this.game.width/2,this.game.height/2+15,"ingameUI","MenuRealBG0000");e.anchor.set(.5),e.scale.set(1.15),c.addChild(e);var f=this.game.add.sprite(8,-195,"ingameUI","win_images0000");f.anchor.set(.5,.5),e.addChild(f);var g=new a.OButton(this.game,"ingameUI",["_BtnBG20000","_BtnBG20001","_BtnBG20001"],function(){b._baseGame.setPause(!1),g.inputEnabled=!1,c.destroy(!0),b._menuButton.enabled=!0,b._soundButton.enabled=!0});g.setCBContext(this),g.position.set(364,474),g.setAnimationScale(0,1),c.addChild(g);var h=this.game.add.text(0,-2,"CLOSE",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#2c170c",strokeThickness:5});h.anchor.set(.5,.5),h.setShadow(0,3,"#000000",5),g.addChild(h);var i=this.game.add.text(0,-138,"How to play",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:7});i.anchor.set(.5,.5),e.addChild(i);var j=this.game.add.text(370,205,"Leslie and Carrie are possessed.\nDon't let them touch you.",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#000000",strokeThickness:5});j.anchor.set(.5,.5),c.addChild(j);var k=this.game.add.sprite(363,332,"tutorialUI","_tutorialEnemy0000");k.anchor.set(.5),c.addChild(k)},c.prototype.restartGame=function(){var a=this;this._continueButton.enabled=!1,this._exitButton.enabled=!1,this._baseGame.replay(this._currentLevel,!0),this.game.add.tween(this._retryContainer).to({alpha:0},300,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a._soundButton.enabled=!0,a._menuButton.enabled=!0},this)},c.prototype.gotoMenu=function(){this.game.state.start("MainMenu",!0)},c.prototype.createPowerUperMeter=function(){this._containerForPowerUpMeter=this.game.add.sprite(47,18),this.addChild(this._containerForPowerUpMeter),this._bgPowerUp=this.game.add.sprite(0,0,"ingameUI","_hud_bar_bg0000"),this._containerForPowerUpMeter.addChild(this._bgPowerUp),this._redRectPowerUp=this.game.add.sprite(1,8,"ingameUI","_red_pixel_fromBar0000"),this._redRectPowerUp.anchor.set(0,.5),this._redRectPowerUp.scale.x=20,this._containerForPowerUpMeter.addChild(this._redRectPowerUp),this._overlayPowerUp=this.game.add.sprite(-29,-4,"ingameUI","_Hud_bar_powerUp0000"),this._containerForPowerUpMeter.addChild(this._overlayPowerUp)},c.prototype.createRetryPlank=function(){var b=this;this._retryContainer=this.game.add.sprite(0,0),this.addChild(this._retryContainer),this._blackOverlay=new Phaser.Graphics(this.game,0,0),this._blackOverlay.beginFill(0,.5),this._blackOverlay.drawRect(0,0,this.game.width,this.game.height),this._blackOverlay.endFill(),this._retryContainer.addChild(this._blackOverlay),this._retryPlank=this.game.add.sprite(this.game.width/2,this.game.height/2-30,"ingameUI","_ZoneContinue_draw0000"),this._retryPlank.anchor.set(.5,.5),this._retryContainer.addChild(this._retryPlank),this._retryIcon=this.game.add.sprite(0,-139,"ingameUI","menu_images0000"),this._retryIcon.anchor.set(.5,.5),this._retryPlank.addChild(this._retryIcon),this._exitButton=new a.OButton(this.game,"ingameUI",["_BtnBG20000","_BtnBG20001","_BtnBG20001"],function(){b.endGame(!1),b._continueButton.enabled=!1,b._exitButton.enabled=!1,b._baseGame.replay(b._currentLevel,!0),b.game.add.tween(b._retryContainer).to({alpha:0},300,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){b._soundButton.enabled=!0,b._menuButton.enabled=!0},b)}),this._exitButton.setCBContext(this),this._exitButton.position.set(-101,145),this._exitButton.setAnimationScale(0,1),this._retryPlank.addChild(this._exitButton),this._continueButton=new a.OButton(this.game,"ingameUI",["_BtnBG20000","_BtnBG20001","_BtnBG20001"],function(){b.restartGame()}),this._continueButton.setCBContext(this),this._continueButton.position.set(106,145),this._continueButton.setAnimationScale(0,1),this._retryPlank.addChild(this._continueButton),this._heartsSprite[0]=this.game.add.sprite(0,0,"ingameUI","_CoeurPictoContinue_onLose_10000"),this._heartsSprite[0].anchor.set(.5,.5),this._heartsSprite[0].animations.add("breakHeart",Phaser.Animation.generateFrameNames("_CoeurPictoContinue_onLose_",1e4,10014),36,!1),this._heartsSprite[0].animations.add("idle",Phaser.Animation.generateFrameNames("_CoeurPictoContinue_onLose_",1e4,1e4),36,!1),this._retryPlank.addChild(this._heartsSprite[0]),this._heartsSprite[0].position.set(0-this._heartsSprite[0].width,70),this._heartsSprite[1]=this.game.add.sprite(0,0,"ingameUI","_CoeurPictoContinue_onLose_10000"),this._heartsSprite[1].anchor.set(.5,.5),this._heartsSprite[1].animations.add("breakHeart",Phaser.Animation.generateFrameNames("_CoeurPictoContinue_onLose_",1e4,10014),36,!1),this._heartsSprite[1].animations.add("idle",Phaser.Animation.generateFrameNames("_CoeurPictoContinue_onLose_",1e4,1e4),36,!1),this._retryPlank.addChild(this._heartsSprite[1]),this._heartsSprite[1].position.set(0,70),this._heartsSprite[2]=this.game.add.sprite(0,0,"ingameUI","_CoeurPictoContinue_onLose_10000"),this._heartsSprite[2].anchor.set(.5,.5),this._heartsSprite[2].animations.add("breakHeart",Phaser.Animation.generateFrameNames("_CoeurPictoContinue_onLose_",1e4,10014),36,!1),this._heartsSprite[2].animations.add("idle",Phaser.Animation.generateFrameNames("_CoeurPictoContinue_onLose_",1e4,1e4),36,!1),this._retryPlank.addChild(this._heartsSprite[2]),this._heartsSprite[2].position.set(0+this._heartsSprite[2].width,70),this._continueText=this.game.add.text(0,-20,"CONTINUE? \nKeep trying!",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"40px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:7}),this._continueText.anchor.set(.5,.5),this._continueText.lineSpacing=20,this._retryPlank.addChild(this._continueText),this._gotoMenuText=this.game.add.text(0,-3,"No",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#2c170c",strokeThickness:5}),this._gotoMenuText.anchor.set(.5,.5),this._exitButton.addChild(this._gotoMenuText),this._replayText=this.game.add.text(0,-3,"Yes",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#2c170c",strokeThickness:5}),this._replayText.anchor.set(.5,.5),this._continueButton.addChild(this._replayText),this._retryContainer.alpha=0,this._continueButton.enabled=!1,this._exitButton.enabled=!1},c.prototype.hideIngameMenu=function(){var b=this;this._exitBtn.enabled=!1,this._soundBtn.enabled=!1,this._tutorialBtn.enabled=!1,this._backToGameBtn.enabled=!1,this._ingameGetReadyText.text="3",this.game.add.tween(this._bgBackOnMenu).to({alpha:.8},100,Phaser.Easing.Sinusoidal.In,!0),this.game.add.tween(this._menuContainer).to({alpha:0},100,Phaser.Easing.Sinusoidal.In,!0),this.game.add.tween(this._menuPlank).to({alpha:0},100,Phaser.Easing.Sinusoidal.In,!0).onComplete.addOnce(function(){b._ingameGetReadyText.visible=!0,setTimeout(function(){b._ingameGetReadyText.text="2",setTimeout(function(){b._ingameGetReadyText.text="1",setTimeout(function(){b._ingameGetReadyText.text="GO!",setTimeout(function(){b._ingameGetReadyText.visible=!1,b.game.add.tween(b._bgBackOnMenu).to({alpha:0},100,Phaser.Easing.Sinusoidal.In,!0),b._baseGame.setPause(!1),b._menuButton.enabled=!0,b._soundButton.enabled=!0,b._soundButton.setCheck(a.Boot.GAME_DATA.playMusic)},500)},500)},500)},500)},this)},c.prototype.showIngameMenu=function(){var b=this;this._bgBackOnMenu.alpha=0,this._menuContainer.alpha=0,this._menuPlank.alpha=0,this._menuButton.enabled=!1,this._soundButton.enabled=!1,this._bgBackOnMenu.visible=!0,this._menuContainer.visible=!0,this._menuPlank.visible=!0,this.game.add.tween(this._bgBackOnMenu).to({alpha:1},100,Phaser.Easing.Sinusoidal.In,!0),this.game.add.tween(this._menuContainer).to({alpha:1},100,Phaser.Easing.Sinusoidal.In,!0),this.game.add.tween(this._menuPlank).to({alpha:1},100,Phaser.Easing.Sinusoidal.In,!0).onComplete.addOnce(function(){b._exitBtn.enabled=!0,b._soundBtn.enabled=!0,b._soundBtn.setCheck(a.Boot.GAME_DATA.playMusic),b._tutorialBtn.enabled=!0,b._backToGameBtn.enabled=!0},this)},c.prototype.createMenuPlank=function(){var b=this;this._bgBackOnMenu=new Phaser.Graphics(this.game,0,0),this._bgBackOnMenu.beginFill(0,1),this._bgBackOnMenu.drawRect(0,0,this.game.width,this.game.height),this._bgBackOnMenu.endFill(),this.addChild(this._bgBackOnMenu),this._ingameGetReadyText=this.game.add.text(this.game.width/2,this.game.height/2,"3",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"80px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#3a1d39",strokeThickness:23}),this._ingameGetReadyText.anchor.set(.5,.5),this.addChild(this._ingameGetReadyText),this._ingameGetReadyText.visible=!1,this._menuContainer=this.game.add.sprite(0,0),this.addChild(this._menuContainer),this._menuPlank=this.game.add.sprite(this.game.width/2,this.game.height/2+15,"ingameUI","MenuRealBG0000"),this._menuPlank.anchor.set(.5),this._menuPlank.scale.set(1.15),this._menuContainer.addChild(this._menuPlank),this._menuLeftDownIcon=this.game.add.sprite(-225,140,"ingameUI","leftMenuBGIcon0000"),this._menuLeftDownIcon.anchor.set(.5),this._menuPlank.addChild(this._menuLeftDownIcon),this._menuRightDownIcon=this.game.add.sprite(221,134,"ingameUI","rightMenuBGIcon0000"),this._menuRightDownIcon.anchor.set(.5),this._menuPlank.addChild(this._menuRightDownIcon),this._menuIcon=this.game.add.sprite(this.game.width/2,51,"ingameUI","menu_images0000"),this._menuIcon.anchor.set(.5),this._menuContainer.addChild(this._menuIcon),this._menuLableText=this.game.add.text(this.game.width/2,118,"MENU",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"35px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:7}),this._menuLableText.anchor.set(.5,.5),this._menuContainer.addChild(this._menuLableText),this._backToGameBtn=new a.OButton(this.game,"ingameUI",["BtnMenu0000","BtnMenu0001","BtnMenu0001"],function(){b.hideIngameMenu()}),this._backToGameBtn.setCBContext(this),this._backToGameBtn.position.set(this.game.width/2,192),this._backToGameBtn.setAnimationScale(0,1),this._menuContainer.addChild(this._backToGameBtn),this._btnBackGameText=this.game.add.text(0,-2,"RESUME",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#4b290f",strokeThickness:5}),this._btnBackGameText.anchor.set(.5,.5),this._backToGameBtn.addChild(this._btnBackGameText),this._tutorialBtn=new a.OButton(this.game,"ingameUI",["BtnMenu0000","BtnMenu0001","BtnMenu0001"],function(){b._exitBtn.enabled=!1,b._soundBtn.enabled=!1,b._tutorialBtn.enabled=!1,b._backToGameBtn.enabled=!1,b._exitBtn.visible=!1,b._soundBtn.visible=!1,b._tutorialBtn.visible=!1,b._backToGameBtn.visible=!1,b._tutorialCurrentState=0,b.openTutorial(b._tutorialCurrentState)}),this._tutorialBtn.setCBContext(this),this._tutorialBtn.position.set(this.game.width/2,267),this._tutorialBtn.setAnimationScale(0,1),this._menuContainer.addChild(this._tutorialBtn),this._btnTutorialText=this.game.add.text(0,-2,"HOW TO PLAY",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#4b290f",strokeThickness:5}),this._btnTutorialText.anchor.set(.5,.5),this._tutorialBtn.addChild(this._btnTutorialText),this._soundBtn=new a.OButtonCheck(this.game,"ingameUI",["_BTNSoundOn0000","_BTNSoundOn0001","_BTNSoundOn0001"],["_BTNSoundOff0000","_BTNSoundOff0001","_BTNSoundOff0001"],function(){a.Boot.GAME_DATA.playMusic=b._soundBtn.check,a.SaveManager.getInstance.save(),b._soundBtn.check?a.SoundMixer.on():a.SoundMixer.off()}),this._soundBtn.setCBContext(this),this._soundBtn.position.set(this.game.width/2,342),this._soundBtn.setAnimationScale(0,1),this._menuContainer.addChild(this._soundBtn),this._exitBtn=new a.OButton(this.game,"ingameUI",["BtnMenu0000","BtnMenu0001","BtnMenu0001"],function(){b._exitBtn.enabled=!1,b._soundBtn.enabled=!1,b._tutorialBtn.enabled=!1,b._backToGameBtn.enabled=!1,b._exitBtn.visible=!1,b._soundBtn.visible=!1,b._tutorialBtn.visible=!1,b._backToGameBtn.visible=!1,b._questionOnMenuText.visible=!0,b._noExitBtn.visible=!0,b._yesExitBtn.visible=!0}),this._exitBtn.setCBContext(this),this._exitBtn.position.set(this.game.width/2,417),this._exitBtn.setAnimationScale(0,1),this._menuContainer.addChild(this._exitBtn),this._btnExitText=this.game.add.text(0,-2,"QUIT",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#4b290f",strokeThickness:5}),this._btnExitText.anchor.set(.5,.5),this._exitBtn.addChild(this._btnExitText),this._questionOnMenuText=this.game.add.text(377,209,"Are you sure you want\nto quit?",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:7}),this._questionOnMenuText.anchor.set(.5,.5),this._menuContainer.addChild(this._questionOnMenuText),this._questionOnMenuText.visible=!1,this._yesExitBtn=new a.OButton(this.game,"ingameUI",["_BtnBG20000","_BtnBG20001","_BtnBG20001"],function(){b.gotoMenu()}),this._yesExitBtn.setCBContext(this),this._yesExitBtn.position.set(this.game.width/2,323),this._yesExitBtn.setAnimationScale(0,1),this._menuContainer.addChild(this._yesExitBtn),this._yesExitBtn.visible=!1,this._yesBtnText=this.game.add.text(0,-2,"Yes",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#4b290f",strokeThickness:5}),this._yesBtnText.anchor.set(.5,.5),this._yesExitBtn.addChild(this._yesBtnText),this._noExitBtn=new a.OButton(this.game,"ingameUI",["_BtnBG20000","_BtnBG20001","_BtnBG20001"],function(){b._exitBtn.enabled=!0,b._soundBtn.enabled=!0,b._tutorialBtn.enabled=!0,b._backToGameBtn.enabled=!0,b._exitBtn.visible=!0,b._soundBtn.visible=!0,b._tutorialBtn.visible=!0,b._backToGameBtn.visible=!0,b._questionOnMenuText.visible=!1,b._noExitBtn.visible=!1,b._yesExitBtn.visible=!1}),this._noExitBtn.setCBContext(this),this._noExitBtn.position.set(this.game.width/2,401),this._noExitBtn.setAnimationScale(0,1),this._menuContainer.addChild(this._noExitBtn),this._noExitBtn.visible=!1,this._noBtnText=this.game.add.text(0,-2,"No",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#4b290f",strokeThickness:5}),this._noBtnText.anchor.set(.5,.5),this._noExitBtn.addChild(this._noBtnText),this.createTutorial(),this._exitBtn.enabled=!1,this._soundBtn.enabled=!1,this._tutorialBtn.enabled=!1,this._backToGameBtn.enabled=!1,this._bgBackOnMenu.visible=!1,this._menuContainer.visible=!1,this._menuPlank.visible=!1},c.prototype.createTutorial=function(){var b=this;this._tutorialContainer=this.game.add.sprite(0,0),this.addChild(this._tutorialContainer),this._tutorialBG=this.game.add.sprite(520,333,"tutorialUI","_tutorialBg0000"),this._tutorialBG.anchor.set(.5),this._tutorialContainer.addChild(this._tutorialBG),this._tutorialTrail=this.game.add.sprite(442,382,"tutorialUI","_tutorialTrail0000"),this._tutorialTrail.anchor.set(.5),this._tutorialTrail.angle=180,this._tutorialContainer.addChild(this._tutorialTrail),this._tutorialSquAnimation=this.game.add.sprite(443,384,"tutorialUI","_tutorialSq_10000"),this._tutorialSquAnimation.anchor.set(.5),this._tutorialSquAnimation.animations.add("blink",Phaser.Animation.generateFrameNames("_tutorialSq_",1e4,10009),24,!1),this._tutorialSquAnimation.animations.add("idle",Phaser.Animation.generateFrameNames("_tutorialSq_",1e4,1e4),24,!1),this._tutorialContainer.addChild(this._tutorialSquAnimation),this._tutorialTrailMask=new Phaser.Graphics(this.game,486,427),this._tutorialTrailMask.beginFill(0,.5),this._tutorialTrailMask.drawRect(0,0,100,100),this._tutorialTrailMask.endFill(),this._tutorialContainer.addChild(this._tutorialTrailMask),this._tutorialBGMask1=new Phaser.Graphics(this.game,382,243),this._tutorialBGMask1.beginFill(8792618,.5),this._tutorialBGMask1.drawRect(0,0,260,190),this._tutorialBGMask1.endFill(),this._tutorialContainer.addChild(this._tutorialBGMask1),this._tutorialBGMask2Poly=new Phaser.Polygon([new Phaser.Point(0,91),new Phaser.Point(0,0),new Phaser.Point(295,0),new Phaser.Point(295,191),new Phaser.Point(125,191),new Phaser.Point(125,91)]),this._tutorialBGMask2=this.game.add.graphics(366,253),this._tutorialBGMask2.beginFill(65280,.5),this._tutorialBGMask2.drawPolygon(this._tutorialBGMask2Poly.points),this._tutorialBGMask2.endFill(),this._tutorialContainer.addChild(this._tutorialBGMask2),this._tutorialGumball=this.game.add.sprite(614,395,"tutorialUI","_tutorialGumbal0000"),this._tutorialGumball.anchor.set(.5),this._tutorialContainer.addChild(this._tutorialGumball),this._tutorialTrail.mask=this._tutorialTrailMask,this._tutorialBGMask2.visible=!1,this._tutorialBG.mask=this._tutorialBGMask1,this._tutorialCloseBtn=new a.OButton(this.game,"ingameUI",["_BtnBG20000","_BtnBG20001","_BtnBG20001"],function(){b.closeTutorialScreen()}),this._tutorialCloseBtn.setCBContext(this),this._tutorialCloseBtn.position.set(364,474),this._tutorialCloseBtn.setAnimationScale(0,1),this._tutorialContainer.addChild(this._tutorialCloseBtn),this._tutorialPrevBtn=new a.OButton(this.game,"ingameUI",["tutorialHelp0000","tutorialHelp0001","tutorialHelp0002"],function(){b._tutorialCurrentState--,b.openTutorial(b._tutorialCurrentState)}),this._tutorialPrevBtn.setCBContext(this),this._tutorialPrevBtn.position.set(49,305),this._tutorialPrevBtn.setAnimationScale(0,1),this._tutorialContainer.addChild(this._tutorialPrevBtn),this._tutorialNextBtn=new a.OButton(this.game,"ingameUI",["tutorialHelp0000","tutorialHelp0001","tutorialHelp0002"],function(){b._tutorialCurrentState++,b.openTutorial(b._tutorialCurrentState)},!0),this._tutorialNextBtn.setCBContext(this),this._tutorialNextBtn.position.set(695,303),this._tutorialNextBtn.setAnimationScale(0,1),this._tutorialContainer.addChild(this._tutorialNextBtn),this._tutorialCloseBtn.visible=!1,this._tutorialCloseBtn.enabled=!1,this._tutorialNextBtn.visible=!1,this._tutorialNextBtn.enabled=!1,this._tutorialPrevBtn.visible=!1,this._tutorialPrevBtn.enabled=!1,this._tutorialBtnCloseText=this.game.add.text(0,-2,"CLOSE",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#2c170c",strokeThickness:5}),this._tutorialBtnCloseText.anchor.set(.5,.5),this._tutorialCloseBtn.addChild(this._tutorialBtnCloseText),this._tutorialFirstText=this.game.add.text(370,205,"Draw lines from one edge to another\nto clear the area.\nShrink the box to trap the spirit.",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5}),this._tutorialFirstText.anchor.set(.5,.5),this._tutorialContainer.addChild(this._tutorialFirstText),this._tutorialContainer.visible=!1;var c=[];this.game.device.desktop?(c[0]="KeySwitcher_arrow_up0000",c[1]="KeySwitcher_arrow_right0000",c[2]="KeySwitcher_arrow_left0000",c[3]="KeySwitcher_arrow_down0000"):(c[0]="hand0000",c[1]="hand0000",c[2]="hand0000",c[3]="hand0000"),this._tutorialArrows[0]=this.game.add.sprite(225,314,"ingameUI",c[0]),this._tutorialArrows[0].anchor.set(.5),this._tutorialContainer.addChild(this._tutorialArrows[0]),this._tutorialArrowsText[0]=this.game.add.text(224,283,"up",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5}),this._tutorialArrowsText[0].anchor.set(.5,.5),this._tutorialContainer.addChild(this._tutorialArrowsText[0]),this._tutorialArrows[1]=this.game.add.sprite(263,352,"ingameUI",c[1]),this._tutorialArrows[1].anchor.set(.5),this._tutorialContainer.addChild(this._tutorialArrows[1]),this._tutorialArrowsText[1]=this.game.add.text(311,351,"right",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5}),this._tutorialArrowsText[1].anchor.set(.5,.5),this._tutorialContainer.addChild(this._tutorialArrowsText[1]),this._tutorialArrows[2]=this.game.add.sprite(186,352,"ingameUI",c[2]),this._tutorialArrows[2].anchor.set(.5),this._tutorialContainer.addChild(this._tutorialArrows[2]),this._tutorialArrowsText[2]=this.game.add.text(146,353,"left",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5}),this._tutorialArrowsText[2].anchor.set(.5,.5),this._tutorialContainer.addChild(this._tutorialArrowsText[2]),this._tutorialArrows[3]=this.game.add.sprite(225,392,"ingameUI",c[3]),this._tutorialArrows[3].anchor.set(.5),this._tutorialContainer.addChild(this._tutorialArrows[3]),this._tutorialArrowsText[3]=this.game.add.text(224,424,"down",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5}),this._tutorialArrowsText[3].anchor.set(.5,.5),this._tutorialContainer.addChild(this._tutorialArrowsText[3]),this.game.device.desktop||(this._tutorialArrows[0].angle=-90,this._tutorialArrows[0].x+=5,this._tutorialArrows[0].scale.set(.7),this._tutorialArrows[1].scale.set(.7),this._tutorialArrows[3].scale.set(.7),this._tutorialArrows[3].angle=90,this._tutorialArrows[3].x-=5,this._tutorialArrows[2].scale.set(-.7,.7),this._tutorialArrows[0].x-=45,this._tutorialArrows[1].x-=35,this._tutorialArrows[2].x-=55,this._tutorialArrows[3].x-=45,this._tutorialArrows[0].y-=15,this._tutorialArrows[3].y+=15,this._tutorialArrowsText[3].position.set(142,437),this._tutorialArrowsText[1].position.set(265,375),this._tutorialArrowsText[0].position.set(204,272),this._tutorialArrowsText[2].position.set(100,375)),this._tutorialSecBG=this.game.add.sprite(378,333,"tutorialUI","_tutorialBg0000"),this._tutorialSecBG.anchor.set(.5),this._tutorialContainer.addChild(this._tutorialSecBG),this._tutorialSecTrail=this.game.add.sprite(302,381,"tutorialUI","_tutorialTrail0000"),this._tutorialSecTrail.anchor.set(.5),this._tutorialSecTrail.angle=180,this._tutorialContainer.addChild(this._tutorialSecTrail),this._tutorialSecTrailMask=new Phaser.Graphics(this.game,315,338),this._tutorialSecTrailMask.beginFill(0,.5),this._tutorialSecTrailMask.drawRect(0,0,100,100),this._tutorialSecTrailMask.endFill(),this._tutorialContainer.addChild(this._tutorialSecTrailMask),this._tutorialSecGumball=this.game.add.sprite(315,315,"tutorialUI","_tutorialGumbal0000"),this._tutorialSecGumball.anchor.set(.5),this._tutorialContainer.addChild(this._tutorialSecGumball),this._tutorialSecSpirit=this.game.add.sprite(384,351,"tutorialUI","_tutorialSpirit0000"),this._tutorialSecSpirit.anchor.set(.5),this._tutorialContainer.addChild(this._tutorialSecSpirit),this._tutorialSecTrail.mask=this._tutorialSecTrailMask,this._tutorialSecondText=this.game.add.text(370,205,"The spirit is dangerous!\nIf it touches Gumball or your lifeline,\nyou're a goner.",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5}),this._tutorialSecondText.anchor.set(.5,.5),this._tutorialContainer.addChild(this._tutorialSecondText),this._thirdTutorialContainer=this.game.add.sprite(0,0),this.addChild(this._thirdTutorialContainer);var d=this.game.add.text(370,205,"Leslie and Carrie are possessed.\nDon't let them touch you.",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5});d.anchor.set(.5,.5),this._thirdTutorialContainer.addChild(d);var e=this.game.add.sprite(363,332,"tutorialUI","_tutorialEnemy0000");if(e.anchor.set(.5),this._thirdTutorialContainer.addChild(e),this._fourthTutorialContainer=this.game.add.sprite(0,0),this.addChild(this._fourthTutorialContainer),this.game.device.desktop){var f=this.game.add.sprite(266,182,"ingameUI","KeySwitcher_space_bg0000");f.anchor.set(.5),this._fourthTutorialContainer.addChild(f);var g=this.game.add.text(0,0,"SPACEBAR",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"17px",fontWeight:"normal",fill:"#744381",align:"center"});g.anchor.set(.5,.5),f.addChild(g)}else{var h=this.game.add.sprite(245,145,"ingameUI","icon_ingame0000");h.anchor.set(.5),h.scale.set(1.45,1.45),this._fourthTutorialContainer.addChild(h);var i=this.game.add.sprite(320,182,"ingameUI","hand0000");i.angle=45,i.scale.set(-.75,.75),this._fourthTutorialContainer.addChild(i)}var j=this.game.add.text(422,183,"Use power-up",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center"});j.anchor.set(.5,.5),this._fourthTutorialContainer.addChild(j);var k=this.game.add.sprite(160,332,"tutorialUI","_tutorialBoostImage0000");k.anchor.set(.5),this._fourthTutorialContainer.addChild(k);var l=this.game.add.text(342,247,"Makes Gumball invincible",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5});l.anchor.set(.5,.5),this._fourthTutorialContainer.addChild(l);var m=this.game.add.text(355,301,"Gives Gumball a speed boost",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5});m.anchor.set(.5,.5),this._fourthTutorialContainer.addChild(m);var n=this.game.add.text(311,351,"Slows enemies down",{
font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5});n.anchor.set(.5,.5),this._fourthTutorialContainer.addChild(n);var o=this.game.add.text(305,402,"Stuns your enemies",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"20px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5});o.anchor.set(.5,.5),this._fourthTutorialContainer.addChild(o),this._tutorialSecGumball.visible=!1,this._tutorialSecBG.visible=!1,this._tutorialSecTrail.visible=!1,this._tutorialSecSpirit.visible=!1,this._tutorialSecTrailMask.visible=!1,this._tutorialSecondText.visible=!1,this._thirdTutorialContainer.visible=!1,this._fourthTutorialContainer.visible=!1},c.prototype.openTutorial=function(a){switch(a){case 0:this._tutorialCloseBtn.visible=!0,this._tutorialCloseBtn.enabled=!0,this._tutorialNextBtn.visible=!0,this._tutorialNextBtn.enabled=!0,this._tutorialPrevBtn.visible=!1,this._tutorialPrevBtn.enabled=!1,this._tutorialFirstText.visible=!0,this._tutorialContainer.visible=!0,this._menuLeftDownIcon.visible=!1,this._menuRightDownIcon.visible=!1,this._menuLableText.text="How to play",this._tutorialBG.visible=!0,this._tutorialTrail.visible=!0,this._tutorialSquAnimation.visible=!0,this._tutorialGumball.visible=!0,this._tutorialSecGumball.visible=!1,this._tutorialSecBG.visible=!1,this._tutorialSecTrail.visible=!1,this._tutorialSecSpirit.visible=!1,this._tutorialSecTrailMask.visible=!1,this._tutorialSecondText.visible=!1;for(var b=2;b<2;b++)this._currentTutorialTween[b]&&this.game.tweens.remove(this._currentTutorialTween[b]);this.startFirstTutorialAnimation();for(var b=0;b<4;b++)this._tutorialArrows[b].visible=!0,this._tutorialArrowsText[b].visible=!0;break;case 1:this._tutorialPrevBtn.visible=!0,this._tutorialPrevBtn.enabled=!0,this._tutorialSecondText.visible=!0,this._tutorialFirstText.visible=!1,this._tutorialBG.visible=!1,this._tutorialTrail.visible=!1,this._tutorialSquAnimation.visible=!1,this._tutorialGumball.visible=!1;for(var b=0;b<4;b++)this._tutorialArrows[b].visible=!1,this._tutorialArrowsText[b].visible=!1;this._tutorialSecGumball.visible=!0,this._tutorialSecBG.visible=!0,this._tutorialSecTrail.visible=!0,this._tutorialSecSpirit.visible=!0,this._tutorialSecTrailMask.visible=!0,this._tutorialSecTrail.tint=16777215,this._thirdTutorialContainer.visible=!1,this.startFirstTutorialAnimation();break;case 2:this._tutorialSecondText.visible=!1,this._tutorialSecGumball.visible=!1,this._tutorialSecBG.visible=!1,this._tutorialSecTrail.visible=!1,this._tutorialSecSpirit.visible=!1,this._tutorialSecTrailMask.visible=!1,this._thirdTutorialContainer.visible=!1,this._thirdTutorialContainer.visible=!0,this._tutorialNextBtn.visible=!0,this._tutorialNextBtn.enabled=!0,this._fourthTutorialContainer.visible=!1;break;case 3:this._tutorialNextBtn.visible=!1,this._tutorialNextBtn.enabled=!1,this._thirdTutorialContainer.visible=!1,this._fourthTutorialContainer.visible=!0}},c.prototype.closeTutorialScreen=function(){this._menuLableText.text="Menu",this._tutorialCloseBtn.visible=!1,this._tutorialCloseBtn.enabled=!1,this._tutorialNextBtn.visible=!1,this._tutorialNextBtn.enabled=!1,this._tutorialPrevBtn.visible=!1,this._tutorialPrevBtn.enabled=!1,this.game.tweens.removeAll(),this._tutorialCurrentState=-1,this._thirdTutorialContainer.visible=!1,this._fourthTutorialContainer.visible=!1,this._tutorialSecondText.visible=!1,this._tutorialFirstText.visible=!1,this._tutorialBG.visible=!1,this._tutorialTrail.visible=!1,this._tutorialSquAnimation.visible=!1,this._tutorialGumball.visible=!1;for(var a=0;a<4;a++)this._tutorialArrows[a].visible=!1,this._tutorialArrowsText[a].visible=!1;this._tutorialSecGumball.visible=!1,this._tutorialSecBG.visible=!1,this._tutorialSecTrail.visible=!1,this._tutorialSecSpirit.visible=!1,this._tutorialSecTrailMask.visible=!1,this._tutorialSecTrail.tint=16777215,this._tutorialContainer.visible=!1,this._menuLeftDownIcon.visible=!0,this._menuRightDownIcon.visible=!0,this._exitBtn.enabled=!0,this._soundBtn.enabled=!0,this._tutorialBtn.enabled=!0,this._backToGameBtn.enabled=!0,this._exitBtn.visible=!0,this._soundBtn.visible=!0,this._tutorialBtn.visible=!0,this._backToGameBtn.visible=!0},c.prototype.startFirstTutorialAnimation=function(){var a=this;0==this._tutorialCurrentState?(this.game.tweens.removeAll(),this._tutorialBGMask1.visible=!0,this._tutorialBGMask2.visible=!1,this._tutorialBG.mask=this._tutorialBGMask1,this._tutorialSquAnimation.animations.play("idle"),this._tutorialTrailMask.position.set(486,427),this._tutorialGumball.position.set(614,395),this._tutorialGumball.alpha=.5,this._currentTutorialTween[0]=this.game.add.tween(this._tutorialGumball).to({x:495,y:395,alpha:1},700,Phaser.Easing.Linear.None,!0),this._currentTutorialTween[0].onComplete.addOnce(function(){a._currentTutorialTween[0]=a.game.add.tween(a._tutorialGumball).to({y:316,x:495},500,Phaser.Easing.Linear.None,!0),a._currentTutorialTween[1]=a.game.add.tween(a._tutorialTrailMask).to({y:328,x:486},500,Phaser.Easing.Linear.None,!0),a._currentTutorialTween[1].onComplete.addOnce(function(){a._currentTutorialTween[0]=a.game.add.tween(a._tutorialGumball).to({x:394,y:316},500,Phaser.Easing.Linear.None,!0),a._currentTutorialTween[1]=a.game.add.tween(a._tutorialTrailMask).to({x:395,y:333},500,Phaser.Easing.Linear.None,!0),a._currentTutorialTween[1].onComplete.addOnce(function(){a._tutorialBGMask1.visible=!1,a._tutorialBGMask2.visible=!0,a._tutorialBG.mask=a._tutorialBGMask2,a._tutorialSquAnimation.animations.play("blink"),a._currentTutorialTween[0]=a.game.add.tween(a._tutorialGumball).to({y:243,x:394,alpha:0},700,Phaser.Easing.Linear.None,!0,300),a._currentTutorialTween[0].onComplete.addOnce(function(){a.startFirstTutorialAnimation()},a)},a)},a)},this)):1==this._tutorialCurrentState&&(16777215==this._tutorialSecTrail.tint?this._tutorialSecTrail.tint=12066848:this._tutorialSecTrail.tint=16777215,setTimeout(function(){a.startFirstTutorialAnimation()},300))},c.prototype.createWinLosePlank=function(){var b=this;this._winLoseContainer=this.game.add.sprite(0,0),this.addChild(this._winLoseContainer),this._endBG=this.game.add.sprite(0,0,"ingameUI","gameBG0000"),this._winLoseContainer.addChild(this._endBG),this._endPlank=this.game.add.sprite(this._endBG.width/2,this._endBG.height/2,"ingameUI","MenuRealBG0000"),this._endPlank.anchor.set(.5,.5),this._endBG.addChild(this._endPlank),this._leftEndIcon=this.game.add.sprite(-225,140,"ingameUI","leftMenuBGIcon0000"),this._leftEndIcon.anchor.set(.5),this._endPlank.addChild(this._leftEndIcon),this._rightEndIcon=this.game.add.sprite(221,134,"ingameUI","rightMenuBGIcon0000"),this._rightEndIcon.anchor.set(.5),this._endPlank.addChild(this._rightEndIcon),this._winIcon=this.game.add.sprite(8,-195,"ingameUI","win_images0000"),this._winIcon.anchor.set(.5,.5),this._endPlank.addChild(this._winIcon),this._loseIcon=this.game.add.sprite(6,-179,"ingameUI","lose_images0000"),this._loseIcon.anchor.set(.5,.5),this._endPlank.addChild(this._loseIcon),this._loseIcon.visible=!1,this._endGameTittle=this.game.add.text(-79,-151,"you win",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"35px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:7}),this._replayText.anchor.set(.5,.5),this._endPlank.addChild(this._endGameTittle),this._winUpLine=this.game.add.sprite(0,-75,"ingameUI","_ligne_win0000"),this._winUpLine.anchor.set(.5,.5),this._endPlank.addChild(this._winUpLine),this._winDownLine=this.game.add.sprite(0,81,"ingameUI","_ligne_win0000"),this._winDownLine.anchor.set(.5,.5),this._endPlank.addChild(this._winDownLine),this._loseUpLine=this.game.add.sprite(0,-66,"ingameUI","_ligne_lose_10000"),this._loseUpLine.anchor.set(.5,.5),this._endPlank.addChild(this._loseUpLine),this._loseDownLine=this.game.add.sprite(0,142,"ingameUI","_ligne_lose_20000"),this._loseDownLine.anchor.set(.5,.5),this._endPlank.addChild(this._loseDownLine),this._loseUpLine.visible=!1,this._loseDownLine.visible=!1,this._normalDarwin=this.game.add.sprite(-76,532,"ingameUI","DarwinNormal0000"),this._normalDarwin.anchor.set(.5,.5),this._winLoseContainer.addChild(this._normalDarwin),this._normalGumbal=this.game.add.sprite(805,511,"ingameUI","GumbalNormal0000"),this._normalGumbal.anchor.set(.5,.5),this._winLoseContainer.addChild(this._normalGumbal),this._leftWinGlow=this.game.add.sprite(55,413,"ingameUI","_normalScreenGlow0000"),this._leftWinGlow.anchor.set(.5,.5),this._leftWinGlow.scale.set(-1,1),this._winLoseContainer.addChild(this._leftWinGlow),this._rightWinGlow=this.game.add.sprite(681,442,"ingameUI","_normalScreenGlow0000"),this._rightWinGlow.anchor.set(.5,.5),this._winLoseContainer.addChild(this._rightWinGlow),this._normalDarwin.visible=!1,this._normalGumbal.visible=!1,this._leftWinGlow.visible=!1,this._rightWinGlow.visible=!1,this._zombieDarwin=this.game.add.sprite(820,501,"ingameUI","DarwinZomb0000"),this._zombieDarwin.anchor.set(.5,.5),this._winLoseContainer.addChild(this._zombieDarwin),this._zombieGumbal=this.game.add.sprite(-52,541,"ingameUI","GumbalZomb0000"),this._zombieGumbal.anchor.set(.5,.5),this._winLoseContainer.addChild(this._zombieGumbal),this._leftLoseGlow=this.game.add.sprite(39,432,"ingameUI","_zombScreenGlow0000"),this._leftLoseGlow.anchor.set(.5,.5),this._winLoseContainer.addChild(this._leftLoseGlow),this._rightLoseGlow=this.game.add.sprite(692,447,"ingameUI","_zombScreenGlow0000"),this._rightLoseGlow.anchor.set(.5,.5),this._rightLoseGlow.scale.set(-1,1),this._winLoseContainer.addChild(this._rightLoseGlow),this._zombieDarwin.visible=!1,this._zombieGumbal.visible=!1,this._leftLoseGlow.visible=!1,this._rightLoseGlow.visible=!1,this._nextLevelBtn=new a.OButton(this.game,"ingameUI",["NextBtn0000","NextBtn0001","NextBtn0001"],function(){b._startTweenNumber=!1,b._nextLevelBtn.inputEnabled=!1,b._goHomeBtn.inputEnabled=!1,b._soundButton.enabled=!0,b._menuButton.enabled=!0,b._currentLevel+1>30?b.gotoMenu():(b._baseGame.replay(b._currentLevel+1,!0),b.game.add.tween(b._winLoseContainer).to({alpha:0},300,Phaser.Easing.Sinusoidal.In,!0),b.game.add.tween(b._normalDarwin).to({x:-76,y:532},300,Phaser.Easing.Sinusoidal.In,!0),b.game.add.tween(b._normalGumbal).to({x:805,y:511},300,Phaser.Easing.Sinusoidal.In,!0))}),this._nextLevelBtn.setCBContext(this),this._nextLevelBtn.position.set(454,450),this._nextLevelBtn.setAnimationScale(0,1),this._winLoseContainer.addChild(this._nextLevelBtn),this._goHomeBtn=new a.OButton(this.game,"ingameUI",["HomeBtn0000","HomeBtn0001","HomeBtn0001"],function(){b.gotoMenu()}),this._goHomeBtn.setCBContext(this),this._goHomeBtn.position.set(305,450),this._goHomeBtn.setAnimationScale(0,1),this._winLoseContainer.addChild(this._goHomeBtn),this._nextLevelBtn.visible=!1,this._goHomeBtn.visible=!1,this._nextLevelBtn.enabled=!1,this._goHomeBtn.enabled=!1,this._tryAgainBtn=new a.OButton(this.game,"ingameUI",["_BtnLong0000","_BtnLong0001","_BtnLong0002"],function(){b._baseGame.replay(1,!1),b._tryAgainBtn.enabled=!1,b.game.add.tween(b._winLoseContainer).to({alpha:0},300,Phaser.Easing.Sinusoidal.In,!0),b.game.add.tween(b._zombieDarwin).to({x:820,y:501},300,Phaser.Easing.Sinusoidal.In,!0),b.game.add.tween(b._zombieGumbal).to({x:-52,y:541},300,Phaser.Easing.Sinusoidal.In,!0),b._currentAllScore=0,b._soundButton.enabled=!0,b._menuButton.enabled=!0,b._currentHeart=3,b._heartsSprite[0].animations.play("idle"),b._heartsSprite[1].animations.play("idle"),b._heartsSprite[2].animations.play("idle")}),this._tryAgainBtn.setCBContext(this),this._tryAgainBtn.position.set(376,451),this._tryAgainBtn.setAnimationScale(0,1),this._winLoseContainer.addChild(this._tryAgainBtn),this._tryAgainBtnText=this.game.add.text(0,-3,"Play again",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"28px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#2c170c",strokeThickness:5}),this._tryAgainBtnText.anchor.set(.5,.5),this._tryAgainBtn.addChild(this._tryAgainBtnText),this._tryAgainBtn.visible=!1,this._tryAgainBtn.enabled=!1,this._loseTextContainer=this.game.add.sprite(0,0),this._winLoseContainer.addChild(this._loseTextContainer),this._youDoneText=this.game.add.text(374,218,"You reached",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"22px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5}),this._youDoneText.anchor.set(.5,.5),this._loseTextContainer.addChild(this._youDoneText),this._nLevelText=this.game.add.text(374,259,this._currentLevel+" Level",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"35px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5}),this._nLevelText.anchor.set(.5,.5),this._loseTextContainer.addChild(this._nLevelText),this._youScoreText=this.game.add.text(374,315,"Your score",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"22px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5}),this._youScoreText.anchor.set(.5,.5),this._loseTextContainer.addChild(this._youScoreText),this._currentPlayerScoreText=this.game.add.text(374,356,this._currentAllScore.toString(),{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"35px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#351c34",strokeThickness:5}),this._currentPlayerScoreText.anchor.set(.5,.5),this._loseTextContainer.addChild(this._currentPlayerScoreText),this._loseTextContainer.visible=!1,this._winTextContainer=this.game.add.sprite(0,0),this._winLoseContainer.addChild(this._winTextContainer),this._nLevelClearText=this.game.add.text(304,208,"Level "+this._currentLevel+" cleared  "+this._gameProgressText.text,{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#ffffff",align:"right",stroke:"#351c34",strokeThickness:5}),this._nLevelClearText.anchor.set(.5,.5),this._winTextContainer.addChild(this._nLevelClearText),this._clearScoreText=this.game.add.text(517,208,"500",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#ffffff",align:"right",stroke:"#351c34",strokeThickness:5}),this._clearScoreText.anchor.set(.5,.5),this._winTextContainer.addChild(this._clearScoreText),this._bonusGetText=this.game.add.text(268,253,"bonus cleared  "+(this._currentGoalNumber-this._currentCompleteNumber),{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#ffffff",align:"right",stroke:"#351c34",strokeThickness:5}),this._bonusGetText.anchor.set(.5,.5),this._winTextContainer.addChild(this._bonusGetText),this._bonusScoreText=this.game.add.text(517,253,"3500",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#ffffff",align:"right",stroke:"#351c34",strokeThickness:5}),this._bonusScoreText.anchor.set(.5,.5),this._winTextContainer.addChild(this._bonusScoreText),this._multiplicatorText=this.game.add.text(266,295,"multiplier",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#fdf453",align:"right",stroke:"#351c34",strokeThickness:5}),this._multiplicatorText.anchor.set(.5,.5),this._winTextContainer.addChild(this._multiplicatorText),this._multiScoreText=this.game.add.text(536,295,"1",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#fdf453",align:"right",stroke:"#351c34",strokeThickness:5}),this._multiScoreText.anchor.set(.5,.5),this._winTextContainer.addChild(this._multiScoreText),this._currentScoreText=this.game.add.text(315,365,"Score level",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"22px",fontWeight:"normal",fill:"#ffffff",align:"right",stroke:"#351c34",strokeThickness:5}),this._currentScoreText.anchor.set(.5,.5),this._winTextContainer.addChild(this._currentScoreText),this._currentScoreRealText=this.game.add.text(428,365,"8933",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"22px",fontWeight:"normal",fill:"#ffffff",align:"left",stroke:"#351c34",strokeThickness:5}),this._currentScoreRealText.anchor.set(.5,.5),this._winTextContainer.addChild(this._currentScoreRealText),this._allScoreText=this.game.add.text(292,394,"Total score",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#ffffff",align:"right",stroke:"#351c34",strokeThickness:5}),this._allScoreText.anchor.set(.5,.5),this._winTextContainer.addChild(this._allScoreText),this._allScoreRealText=this.game.add.text(428,394,"8933",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#ffffff",align:"left",stroke:"#351c34",strokeThickness:5}),this._allScoreRealText.anchor.set(.5,.5),this._winTextContainer.addChild(this._allScoreRealText),this._winTextContainer.visible=!1;var c=this.game.add.sprite(413,294,"ingameUI","ScreenWin_inter_signe0000");c.anchor.set(.5),this._winTextContainer.addChild(c),this._winLoseContainer.alpha=0,this._winLoseContainer.visible=!1},c.prototype.endGame=function(a){var b=this;if(a){this._winLoseContainer.alpha=0,this._winIcon.visible=!0,this._loseIcon.visible=!1,this._endGameTittle.text="YOU WIN!",this._endGameTittle.x=-79,this._winUpLine.visible=!0,this._winDownLine.visible=!0,this._loseUpLine.visible=!1,this._loseDownLine.visible=!1,this._normalDarwin.visible=!0,this._normalGumbal.visible=!0,this._leftWinGlow.visible=!0,this._rightWinGlow.visible=!0,this._zombieDarwin.visible=!1,this._zombieGumbal.visible=!1,this._leftLoseGlow.visible=!1,this._rightLoseGlow.visible=!1,this._nextLevelBtn.visible=!0,this._goHomeBtn.visible=!0,this._tryAgainBtn.visible=!1,this._winTextContainer.visible=!0,this._loseTextContainer.visible=!1,this._nLevelClearText.text="Level "+this._currentLevel+" cleared  "+this._gameProgressText.text,this._clearScoreText.text="";var c=this._currentCompleteNumber-this._currentGoalNumber>0?this._currentCompleteNumber-this._currentGoalNumber:0;this._bonusGetText.text="bonus cleared   + "+c+"%",this._bonusScoreText.text="",this._multiScoreText.text=this._curentGoldenCooNumber.toString(),this._currentScoreRealText.text="",this._allScoreRealText.text="",this._winLoseContainer.visible=!0,this.game.add.tween(this._winLoseContainer).to({alpha:1},300,Phaser.Easing.Sinusoidal.In,!0).onComplete.addOnce(function(){b._nextLevelBtn.enabled=!0,b._goHomeBtn.enabled=!0,b._levelScoreNumberCurrent=0,b._bonusScoreNumberCurrent=-1,b._currentScoreNumberCurrent=0,b._levelScoreNumberMax=500*b._currentLevel,b._bonusScoreNumberMax=b._currentCompleteNumber-b._currentGoalNumber<=0?0:b._currentCompleteNumber-b._currentGoalNumber,b._bonusScoreNumberMax=Math.abs(b._bonusScoreNumberMax);var a=(100*b._currentCompleteNumber/b._currentGoalNumber-100+(100-(100-b._currentGoalNumber)))/100;if(a=100*Math.exp(a),a=2500*a/100,a<0&&(a=0),b._bonusScoreNumberMax=Math.round(a),b._curentGoldenCooNumber>0){var c=b._curentGoldenCooNumber/10+1;b._currentScoreNumberMax=(b._levelScoreNumberMax+b._bonusScoreNumberMax)*c}else b._currentScoreNumberMax=b._levelScoreNumberMax+b._bonusScoreNumberMax;b._currentScoreNumberMax=Math.round(b._currentScoreNumberMax),b._allScoreNumberMax=Math.round(b._currentAllScore+b._currentScoreNumberMax),b._startTweenNumber=!0},this),this.game.add.tween(this._normalDarwin).to({x:59,y:395},500,Phaser.Easing.Sinusoidal.In,!0),this.game.add.tween(this._normalGumbal).to({x:668,y:368},500,Phaser.Easing.Sinusoidal.In,!0)}else this._winLoseContainer.alpha=0,this._winIcon.visible=!1,this._loseIcon.visible=!0,this._endGameTittle.text="OOPS",this._endGameTittle.x=-55,this._winUpLine.visible=!1,this._winDownLine.visible=!1,this._loseUpLine.visible=!0,this._loseDownLine.visible=!0,this._normalDarwin.visible=!1,this._normalGumbal.visible=!1,this._leftWinGlow.visible=!1,this._rightWinGlow.visible=!1,this._zombieDarwin.visible=!0,this._zombieGumbal.visible=!0,this._leftLoseGlow.visible=!0,this._rightLoseGlow.visible=!0,this._nextLevelBtn.visible=!1,this._goHomeBtn.visible=!1,this._nextLevelBtn.inputEnabled=!1,this._goHomeBtn.inputEnabled=!1,this._tryAgainBtn.visible=!0,this._winTextContainer.visible=!1,this._loseTextContainer.visible=!0,this._nLevelText.text="Level "+this._currentLevel,this._currentPlayerScoreText.text=this._currentAllScore.toString(),this._winLoseContainer.visible=!0,this.game.add.tween(this._winLoseContainer).to({alpha:1},300,Phaser.Easing.Sinusoidal.In,!0).onComplete.addOnce(function(){b._tryAgainBtn.enabled=!0},this),this.game.add.tween(this._zombieDarwin).to({x:674,y:413},500,Phaser.Easing.Sinusoidal.In,!0),this.game.add.tween(this._zombieGumbal).to({x:61,y:365},500,Phaser.Easing.Sinusoidal.In,!0)},c.prototype.startNumbersAnimation=function(){this._levelScoreNumberCurrent<this._levelScoreNumberMax?(this._levelScoreNumberCurrent+=Math.round(this._levelScoreNumberMax/15),this._levelScoreNumberCurrent>=this._levelScoreNumberMax&&(this._levelScoreNumberCurrent=this._levelScoreNumberMax),this._clearScoreText.text=this._levelScoreNumberCurrent.toString()):this._bonusScoreNumberCurrent<this._bonusScoreNumberMax?this._bonusScoreNumberMax<=0?(this._bonusScoreNumberCurrent=0,this._bonusScoreText.text=this._bonusScoreNumberCurrent.toString()):this._bonusScoreNumberMax<50?(this._bonusScoreNumberCurrent=this._bonusScoreNumberMax,this._bonusScoreText.text=this._bonusScoreNumberCurrent.toString()):(this._bonusScoreNumberCurrent+=Math.round(this._bonusScoreNumberMax/15),this._bonusScoreNumberCurrent>=this._bonusScoreNumberMax&&(this._bonusScoreNumberCurrent=this._bonusScoreNumberMax),this._bonusScoreText.text=this._bonusScoreNumberCurrent.toString()):this._currentScoreNumberCurrent<this._currentScoreNumberMax?(this._currentScoreNumberCurrent+=Math.round(this._currentScoreNumberMax/15),this._currentScoreNumberCurrent>=this._currentScoreNumberMax&&(this._currentScoreNumberCurrent=this._currentScoreNumberMax),this._currentScoreRealText.text=this._currentScoreNumberCurrent.toString()):this._currentAllScore<this._allScoreNumberMax&&(this._currentAllScore+=Math.round(this._allScoreNumberMax/15),this._currentAllScore>=this._allScoreNumberMax&&(this._currentAllScore=this._allScoreNumberMax,this._startTweenNumber=!1,a.Boot.GAME_DATA.maxScore<this._currentAllScore&&(a.Boot.GAME_DATA.maxScore=this._currentAllScore,a.SaveManager.getInstance.save())),this._allScoreRealText.text=this._currentAllScore.toString())},c.prototype.myUpdate=function(a){this._startTweenNumber&&(this._tweenNumberDuration-=a,this._tweenNumberDuration<=0&&(this._tweenNumberDuration=.03,this.startNumbersAnimation()))},c.prototype.setDragToObject=function(a){a.inputEnabled=!0,a.input.enableDrag(),a.events.onDragStop.add(this.onDragStop,this)},c.prototype.onDragStop=function(a){},c}(Phaser.Sprite);a.GameUI=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(){function a(a,b,c){this.cb=a,this.delay=b,this.index=c}return a}(),c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;return b._mouseModule=40,b}return __extends(c,a),c.prototype.create=function(){var a=this;this.isPaused=!1,this._debugMode=!1,this.game.device.desktop?(this.game.input.keyboard.onDownCallback=this.onKeyDown,this.game.input.keyboard.onUpCallback=this.onKeyUp,this.game.onBlur.add(this.clearKeyBoard,this)):(this._downMouse=!1,this.game.input.onDown.add(function(b){a._downMouse=!0,a._mx=b.x,a._my=b.y}),this.game.input.onUp.add(function(b){0!=a._downMouse&&(a._downMouse=!1,a._mx-=b.x,a._my-=b.y,a._mx=Math.floor(a._mx/a._mouseModule),a._my=Math.floor(a._my/a._mouseModule),0==a._mx&&0==a._my||(Math.abs(a._mx)>=Math.abs(a._my)?a._mx<0?a.RightSwipe():a.LeftSwipe():a._my<0?a.UpSwipe():a.TopSwipe()))}))},c.prototype.setTimeout=function(a,c){return null==this._timeouts&&(this._timeouts=[]),this._timeouts.push(new b(a,c,this._timeouts.length)),this._timeouts.length-1},c.prototype.setPause=function(a){this.isPaused=a,dragonBones.PhaserFactory.DBLooping==a&&(a?dragonBones.PhaserFactory.stopLoop():dragonBones.PhaserFactory.startLoop())},c.prototype.LeftSwipe=function(){},c.prototype.RightSwipe=function(){},c.prototype.TopSwipe=function(){},c.prototype.UpSwipe=function(){},c.prototype.clearKeyBoard=function(){for(var a in c.keysDown)c.keysDown[a]=!1,c.keysPressed[a]=!1},c.prototype.clearTimeouts=function(a){if(void 0===a&&(a=-1),-1!=a){var b=void 0;for(b=0;b<this._timeouts.length&&this._timeouts[b].index!=a;b++);return void this._timeouts.splice(b,1)}for(;this._timeouts&&this._timeouts.length;)this._timeouts.pop().cb=null;this._timeouts=null},c.prototype.update=function(){for(var a=this.game.time.elapsedMS,b=0;this._timeouts&&b<this._timeouts.length;)this._timeouts[b].delay-=a,this._timeouts[b].delay<=0?(this._timeouts[b].cb(),this._timeouts[b].cb=null,this._timeouts.splice(b,1)):b++;for(var d in c.keysPressed)c.keysPressed[d]=!1},c.prototype.onKeyDown=function(a){c.ValidKeyCodes.indexOf(a.keyCode)>-1&&!c.keysDown[a.keyCode]&&(c.keysDown[a.keyCode]=!0,c.keysPressed[a.keyCode]=!0)},c.prototype.onKeyUp=function(a){c.ValidKeyCodes.indexOf(a.keyCode)>-1&&(c.keysDown[a.keyCode]=!1,c.keysPressed[a.keyCode]=!1)},c.prototype.isAnyKeyPressed=function(){for(var a in c.keysPressed)if(c.keysPressed[a])return!0;return!1},c.prototype.simulateKey=function(a,b){void 0===b&&(b=!0),b?c.ValidKeyCodes.indexOf(a)>-1&&!c.keysDown[a]&&(c.keysDown[a]=!0,c.keysPressed[a]=!0):c.ValidKeyCodes.indexOf(a)>-1&&(c.keysDown[a]=!1,c.keysPressed[a]=!1)},c.prototype.shutdown=function(){this.game.device.desktop?(this.game.input.keyboard.onDownCallback=null,this.game.input.keyboard.onUpCallback=null,this.game.onBlur.remove(this.clearKeyBoard,this)):(this.game.input.onDown.removeAll(),this.game.input.onUp.removeAll(),this._downMouse=!1),this.clearTimeouts(),this.free()},c.prototype.setDebugMode=function(){this.game.time.advancedTiming=!0,this._debugMode=!0},c.prototype.free=function(){},c.prototype.replay=function(){},c.prototype.render=function(){this._debugMode&&this.game.debug.text(""+this.game.time.fps,2,14,"#00ff00")},c}(Phaser.State);c.ValidKeyCodes=[Phaser.Keyboard.LEFT,Phaser.Keyboard.RIGHT,Phaser.Keyboard.UP,Phaser.Keyboard.DOWN,Phaser.Keyboard.W,Phaser.Keyboard.A,Phaser.Keyboard.S,Phaser.Keyboard.D,Phaser.Keyboard.SPACEBAR],c.keysPressed={},c.keysDown={},a.AbstractGame=c;var d=function(a){function b(b,c,d,e,f){void 0===d&&(d=!1),void 0===e&&(e=0),void 0===f&&(f=0);var g=this;switch(g=a.call(this,b.game,e,f,"IngameUI","mobileButton")||this,c){case Phaser.Keyboard.LEFT:g.angle=-90;break;case Phaser.Keyboard.RIGHT:g.angle=90;break;case Phaser.Keyboard.UP:g.angle=0;break;case Phaser.Keyboard.DOWN:g.angle=180}return g._code=c,g._name=name,g.anchor.set(.5),g.inputEnabled=!1,g.defScale=1,g._sticky=d,g._agame=b,g.enabled=!0,g._agame.game.world.add(g),g}return __extends(b,a),Object.defineProperty(b.prototype,"enabled",{get:function(){return this.inputEnabled},set:function(a){a&&this.enabled||(this.inputEnabled=a,a?(this.events.onInputDown.add(this.down,this),this.events.onInputUp.add(this.up,this)):(this.events.onInputDown.removeAll(this),this.events.onInputUp.removeAll(this)))},enumerable:!0,configurable:!0}),b.prototype.update=function(){this._down&&this._sticky&&this.down()},b.prototype.testUp=function(){this.input.pointerDown()&&this._down&&this.up()},b.prototype.up=function(){this._agame.simulateKey(this._code,!1),this._down=!1,this.scale.set(this.defScale,1)},b.prototype.down=function(){if(!this._agame.isPaused){var a=!1;this._sticky&&(this._agame.simulateKey(this._code),a=!0),this._down||(this._down=!0,this.scale.set(.9*this.defScale,.9),a||this._agame.simulateKey(this._code))}},b.prototype.setPos=function(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b},b}(Phaser.Sprite);a.SimpleButton=d}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){if(this._saveDataName="~NoName~",null!=a._instance)throw"Попытка создать дубликат SaveManager!";a._instance=this}return Object.defineProperty(a,"getInstance",{get:function(){return null==a._instance&&new a,a._instance},enumerable:!0,configurable:!0}),a.prototype.init=function(a,b){this._saveDataName=a,this._saveData=b},a.prototype.save=function(){return!!a._canSave&&(localStorage.setItem(this._saveDataName,JSON.stringify(this._saveData)),!0)},a.prototype.load=function(){if(a._canSave=!1,!this.isLocalStorageNameSupported())return void this._saveData.reset();a._canSave=!0;var b=JSON.parse(localStorage.getItem(this._saveDataName));return null==b?(this.save(),this._saveData):(this._saveData=b,this._saveData)},a.prototype.isLocalStorageNameSupported=function(){var a=window.localStorage;try{return a.setItem("test","1"),a.removeItem("test"),!0}catch(a){return!1}},a}();a.SaveManager=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d,e){void 0===d&&(d=0);var f=a.call(this,b,0,0)||this;return b.world.add(f),f._images=[],f._images.push(new Phaser.Image(b,d,0,c,e)),f._imgWidth=f._images[0].width,f._images.push(new Phaser.Image(b,d+f._imgWidth-1,0,c,e)),f.addChild(f._images[0]),f.addChild(f._images[1]),f}return __extends(b,a),b.prototype.updateScroll=function(a){this._images[0].x-=a,this._images[1].x-=a,this._images[0].x<=-this._imgWidth&&(this._images[0].x=this._images[1].x+this._imgWidth-1),this._images[1].x<=-this._imgWidth&&(this._images[1].x=this._images[0].x+this._imgWidth-1)},b.prototype.free=function(){this.removeChild(this._images[0]),this.removeChild(this._images[1]),this._images.pop().destroy(!0),this._images.pop().destroy(!0),this._images=null},b.prototype.setPosition=function(a){this._images[0].x=a,this._images[1].x=a+this._imgWidth-1},b}(Phaser.Sprite);a.ParallaxImage=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dragonBones;!function(a){var b=function(b){function c(a){var c=b.call(this,a)||this;return c._eventDispatcher=new EventEmitter,c}return __extends(c,b),c.prototype._onClear=function(){this._debugDrawer,this._armature=null,this._debugDrawer=null,this.destroy()},c.prototype._debugDraw=function(a){},c.prototype.hasEvent=function(a){return this._eventDispatcher.listeners(a,!0)},c.prototype.addEvent=function(a,b,c){this._eventDispatcher.addListener(a,b,c)},c.prototype.removeEvent=function(a,b,c){this._eventDispatcher.removeListener(a,b,c)},c.prototype._dispatchEvent=function(a,b){this._eventDispatcher.emit(a,b)},c.prototype.dispose=function(a){void 0===a&&(a=!0),this._armature&&(this._armature.dispose(),this._armature=null)},Object.defineProperty(c.prototype,"armature",{get:function(){return this._armature},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"animation",{get:function(){return this._armature.animation},enumerable:!0,configurable:!0}),c.prototype.advanceTimeBySelf=function(b){this._armature.clock=b?a.PhaserFactory._clock:null},c}(Phaser.Group);a.PhaserArmatureDisplay=b}(dragonBones||(dragonBones={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dragonBones;!function(a){var b=function(b){function c(d,e){void 0===d&&(d=null);var f=b.call(this,d)||this;return c._eventManager||(c._eventManager=new a.PhaserArmatureDisplay(e),c._clock=new a.WorldClock,c._game=e),f}return __extends(c,b),c._clockHandler=function(a){void 0===a&&(a=-1),null!=c._clock&&c._clock.advanceTime(a)
},Object.defineProperty(c,"clock",{get:function(){return c._clock},enumerable:!0,configurable:!0}),Object.defineProperty(c,"factory",{get:function(){return c._factory||(c._factory=new c(null,this._game)),c._factory},enumerable:!0,configurable:!0}),c.startLoop=function(a){void 0===a&&(a=20),c._clockID=setInterval(function(){c._clockHandler()},a)},c.stopLoop=function(){-1!=c._clockID&&(clearInterval(c._clockID),c._clockID=-1)},Object.defineProperty(c,"DBLooping",{get:function(){return-1!=c._clockID},enumerable:!0,configurable:!0}),c.prototype._generateTextureAtlasData=function(b,c){return b?b.texture=c:b=a.BaseObject.borrowObject(a.PhaserTextureAtlasData),b},c.prototype._generateArmature=function(b){var d=a.BaseObject.borrowObject(a.Armature),e=new a.PhaserArmatureDisplay(c._game);return e._armature=d,d._init(b.armature,b.skin,e,e,c._eventManager),d},c.prototype._generateSlot=function(b,d,e){var f=a.BaseObject.borrowObject(a.PhaserSlot);f._init(d,new Phaser.Sprite(c._game,null,null),null);for(var g=[],h=0,i=d.displays.length;h<i;++h){var j=d.displays[h];switch(j.type){case 0:j.texture&&!b.textureAtlasName||(j.texture=this._getTextureData(b.textureAtlasName||b.dataName,j.path)),g.push(f.rawDisplay);break;case 2:j.texture&&!b.textureAtlasName||(j.texture=this._getTextureData(b.textureAtlasName||b.dataName,j.path)),!j.mesh&&j.share&&(j.mesh=d.getMesh(j.share)),g.push(f.meshDisplay);break;case 1:var k=this.buildArmature(j.path,b.dataName,null,b.textureAtlasName);if(k){if(k.inheritAnimation=j.inheritAnimation,!k.inheritAnimation){var l=d.slot.actions.length>0?d.slot.actions:k.armatureData.actions;if(l.length>0)for(var m=0,n=l.length;m<n;++m)k._bufferAction(l[m]);else k.animation.play()}j.armature=k.armatureData}g.push(k);break;default:g.push(null)}}return f._setDisplayList(g),f},c.prototype.buildArmatureDisplay=function(a,b,d,e){void 0===b&&(b=null),void 0===d&&(d=null),void 0===e&&(e=null);var f=this.buildArmature(a,b,d,e);if(f){var g=f.display;return c._clock.add(f),g}return null},c.prototype.getTextureDisplay=function(a,b){void 0===b&&(b=null);var c=this._getTextureData(b,a);if(c){if(!c.texture){var d=c.parent.texture,e=new PIXI.Rectangle(0,0,c.region.width,c.region.height);c.texture=new PIXI.Texture(d,null,c.region,e)}return new PIXI.Sprite(c.texture)}return null},Object.defineProperty(c.prototype,"soundEventManater",{get:function(){return c._eventManager},enumerable:!0,configurable:!0}),c}(a.BaseFactory);b._factory=null,b._eventManager=null,b._clock=null,b._clockID=-1,a.PhaserFactory=b}(dragonBones||(dragonBones={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dragonBones;!function(a){var b=function(b){function c(){var a=b.call(this)||this;return a._renderDisplayX=0,a._renderDisplayY=0,a}return __extends(c,b),c.toString=function(){return"[class dragonBones.PhaserSlot]"},c.prototype._onClear=function(){b.prototype._onClear.call(this),this._renderDisplay=null},c.prototype._initDisplay=function(a){},c.prototype._disposeDisplay=function(a){a&&a.destroy()},c.prototype._onUpdateDisplay=function(){this._renderDisplay=this._display?this._display:this._rawDisplay},c.prototype._addDisplay=function(){this._armature.display.addChild(this._renderDisplay),this._renderDisplayX=0*this.armature.getBone(this.name).origin.x,this._renderDisplayY=0*this.armature.getBone(this.name).origin.y},c.prototype._replaceDisplay=function(a){var b=this._armature.display,c=a;b.addChild(this._renderDisplay),b.swapChildren(this._renderDisplay,c),b.removeChild(c)},c.prototype._removeDisplay=function(){this._renderDisplay.parent.removeChild(this._renderDisplay)},c.prototype._updateZOrder=function(){this._armature.display.addChildAt(this._renderDisplay,this._zOrder)},c.prototype._updateVisible=function(){this._renderDisplay.visible=this._parent.visible},c.prototype._updateBlendMode=function(){switch(this._blendMode){case 0:this._renderDisplay.blendMode=PIXI.blendModes.NORMAL;break;case 1:this._renderDisplay.blendMode=PIXI.blendModes.ADD;break;case 3:this._renderDisplay.blendMode=PIXI.blendModes.DARKEN;break;case 4:this._renderDisplay.blendMode=PIXI.blendModes.DIFFERENCE;break;case 6:this._renderDisplay.blendMode=PIXI.blendModes.HARD_LIGHT;break;case 9:this._renderDisplay.blendMode=PIXI.blendModes.LIGHTEN;break;case 10:this._renderDisplay.blendMode=PIXI.blendModes.MULTIPLY;break;case 11:this._renderDisplay.blendMode=PIXI.blendModes.OVERLAY;break;case 12:this._renderDisplay.blendMode=PIXI.blendModes.SCREEN}},c.prototype._updateColor=function(){this._renderDisplay.alpha=this._colorTransform.alphaMultiplier},c.prototype._updateFrame=function(){var b=this._meshData&&this._display===this._meshDisplay,c=this._textureData;if(this._displayIndex>=0&&this._display&&c){var d=c.parent;this._armature.replacedTexture&&this._displayData&&d===this._displayData.texture.parent&&(d=this._armature._replaceTextureAtlasData,d||(d=a.BaseObject.borrowObject(a.PhaserTextureAtlasData),d.copyFrom(c.parent),d.texture=this._armature.replacedTexture,this._armature._replaceTextureAtlasData=d),c=d.getTexture(c.name));var e=d.texture;if(e){if(c.texture||(c.texture=new PIXI.Texture(e,c.region,c.region,new PIXI.Rectangle(0,0,c.region.width,c.region.height))),b){var f=this._renderDisplay,g=e?e.width:1,h=e?e.height:1;f.uvs=new Float32Array(this._meshData.uvs),f.vertices=new Float32Array(this._meshData.vertices),f.indices=new Uint16Array(this._meshData.vertexIndices);for(var i=0,j=f.uvs.length;i<j;i+=2){var k=f.uvs[i],l=f.uvs[i+1];f.uvs[i]=(c.region.x+k*c.region.width)/g,f.uvs[i+1]=(c.region.y+l*c.region.height)/h}f.texture=c.texture,f.dirty=!0}else{var m=this._renderDisplay;m.texture=c.texture}return void this._updateVisible()}}if(b){var f=this._renderDisplay;f.visible=!1,f.texture=null,f.x=0,f.y=0}else{var m=this._renderDisplay;m.visible=!1,m.texture=null,m.x=0,m.y=0}},c.prototype._updateMesh=function(){var a=this._renderDisplay,b=this._ffdVertices.length>0;if(this._meshData.skinned)for(var c=0,d=0,e=this._meshData.vertices.length;c<e;c+=2){for(var f=c/2,g=this._meshData.boneIndices[f],h=this._meshData.boneVertices[f],i=this._meshData.weights[f],j=0,k=0,l=0,m=g.length;l<m;++l){var n=this._meshBones[g[l]],o=n.globalTransformMatrix,p=i[l],q=0,r=0;b?(q=h[2*l]+this._ffdVertices[d],r=h[2*l+1]+this._ffdVertices[d+1]):(q=h[2*l],r=h[2*l+1]),j+=(o.a*q+o.c*r+o.tx)*p,k+=(o.b*q+o.d*r+o.ty)*p,d+=2}a.vertices[c]=j,a.vertices[c+1]=k}else if(b)for(var s=this._meshData.vertices,c=0,e=this._meshData.vertices.length;c<e;c+=2){var j=s[c]+this._ffdVertices[c],k=s[c+1]+this._ffdVertices[c+1];a.vertices[c]=j,a.vertices[c+1]=k}},c.prototype._updateTransform=function(a){if(a)this._renderDisplay.position.x=0,this._renderDisplay.position.y=0,this._renderDisplay.scale.x=1,this._renderDisplay.scale.y=1,this._renderDisplay.rotation=0,this._renderDisplay.skew.x=0,this._renderDisplay.skew.y=0,this._renderDisplay.pivot.x=0,this._renderDisplay.pivot.y=0;else{var b=this.globalTransformMatrix.tx-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),c=this.globalTransformMatrix.ty-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);if(this._renderDisplay instanceof Phaser.Rope){this._renderDisplay.position.x=b||0,this._renderDisplay.position.y=c||0,this._renderDisplay.worldTransform.tx=this.globalTransformMatrix.tx,this._renderDisplay.worldTransform.ty=this.globalTransformMatrix.ty,this._renderDisplay.worldTransform.a=this.globalTransformMatrix.a,this._renderDisplay.worldTransform.b=this.globalTransformMatrix.b,this._renderDisplay.worldTransform.c=this.globalTransformMatrix.c,this._renderDisplay.worldTransform.d=this.globalTransformMatrix.d;var d=this._renderDisplay.parent.scale.x?this._renderDisplay.parent.scale.x:1,e=this._renderDisplay.parent.scale.y?this._renderDisplay.parent.scale.y:1;this._renderDisplay.worldTransform.scale(d,e),this._renderDisplay.worldTransform.translate(this._renderDisplay.parent.x,this._renderDisplay.parent.y)}else this.updateGlobalTransform(),this._renderDisplay.position.x=this._renderDisplayX+this.globalTransformMatrix.tx-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),this._renderDisplay.position.y=this._renderDisplayY+this.globalTransformMatrix.ty-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY),this._renderDisplay.scale.x=this.global.scaleX?this.global.scaleX:1,this._renderDisplay.scale.y=this.global.scaleY?this.global.scaleY:1,this._renderDisplay.rotation=this.global.skewX,this._renderDisplay.skew.x=0,this._renderDisplay.skew.y=this.global.skewY-this.global.skewX}},c}(a.Slot);a.PhaserSlot=b}(dragonBones||(dragonBones={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),dragonBones;!function(a){var b=function(b){function d(){return b.call(this)||this}return __extends(d,b),d.toString=function(){return"[class dragonBones.PhaserTextureAtlasData]"},d.prototype._onClear=function(){b.prototype._onClear.call(this),this.texture&&(this.texture=null)},d.prototype.generateTexture=function(){return a.BaseObject.borrowObject(c)},d}(a.TextureAtlasData);a.PhaserTextureAtlasData=b;var c=function(a){function b(){return a.call(this)||this}return __extends(b,a),b.toString=function(){return"[class dragonBones.PhaserTextureData]"},b.prototype._onClear=function(){a.prototype._onClear.call(this),this.texture&&(this.texture.destroy(!0),this.texture=null)},b}(a.TextureData);a.PhaserTextureData=c}(dragonBones||(dragonBones={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d){var e=a.call(this)||this;return e._eventsBounds=null,b instanceof dragonBones.PhaserFactory?(d&&d.world.add(e),e._visual=b.buildArmatureDisplay(c),e.addChild(e._visual)):e._visual=b,e._pausedTime=-1,e}return __extends(b,a),b.prototype.free=function(){this._eventsBounds&&this._eventsBounds.destroy(!0),this._visual.dispose(!0)},b.prototype.stopInteractive=function(){this._eventsBounds.inputEnabled=!1},b.prototype.addEvent=function(a,b,c){this._visual.addEvent(a,b,c||this)},b.prototype.removeEvent=function(a,b){this._visual.removeEvent(a,b,null)},b.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},b.prototype._play=function(a,b){if(a!=this._currentLabel||0!=this._playTimes||!this._visual.animation.isPlaying)return this._currentLabel=a,this._pausedTime=-1,this._currentAnimState=this._visual.animation.play(a,b),this._playTimes=this._currentAnimState.playTimes,this._currentAnimState},b.prototype.playEx=function(a,b,c,d){return this._nextState=b,this._cb=c,this._cbContext=d||this,this._play(a),(b||c)&&this.addEvent(1==this._playTimes?"complete":"loopComplete",this.completePlaying),this._currentAnimState},b.prototype.play=function(a,b,c,d){return"string"==typeof b?this.playEx(a,b,c,d):"function"==typeof b?this.playEx(a,null,b,c):this._play(a)},b.prototype.stop=function(){this._visual.animation.stop()},b.prototype.pause=function(){null==this._currentAnimState&&this._visual.animation.stop(),this._pausedTime=this._currentAnimState.currentTime,this._visual.animation.stop(this._currentLabel)},b.prototype.resume=function(){-1!=this._pausedTime&&(this._pausedTime=-1,this._visual.animation.gotoAndPlayByTime(this._currentLabel,this._pausedTime))},b.prototype.completePlaying=function(a){this.removeEvent("complete",this.completePlaying),this.removeEvent("loopComplete",this.completePlaying),a.label=this.currentLabel,"function"==typeof this._cb&&this._cb.bind(this._cbContext)(a),this._nextState?this.playEx(this._nextState,null,this._cb,this._cbContext):this._cb=null},b.prototype.getBone=function(a){var b=this._visual.armature.getSlot(a);return b.childArmature?b.childArmature.display:b.display},b.prototype.getBoneArmature=function(a){return this._visual.armature.getSlot(a).childArmature},b.prototype.getSlot=function(a,b){void 0===b&&(b=!1);var c=this._visual.armature.getSlot(a);return null==c?null:b||null!=c.childArmature?c.childArmature?c.childArmature.animation:c.armature.animation:null},b.prototype.setPos=function(a,b){this.x=a||this.x,this.y=b||this.y},b.prototype.createBounds=function(a){null!=this._eventsBounds&&(this.removeChild(this._eventsBounds),this._eventsBounds.destroy(!0));var b=this.getBounds();this._eventsBounds=new Phaser.Graphics(a,0,0),this._eventsBounds.beginFill(16711680,0),this._eventsBounds.drawRect(.5*-b.width,.5*-b.height,b.width,b.height),this._eventsBounds.endFill(),this.addChild(this._eventsBounds)},Object.defineProperty(b.prototype,"animation",{get:function(){return this._visual.animation},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"armature",{get:function(){return this._visual._armature},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"sprites",{get:function(){return this._visual.children},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"events",{get:function(){return this._eventsBounds?this._eventsBounds.events:null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"input",{get:function(){return this._eventsBounds?this._eventsBounds.input:null},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"inputEnabled",{get:function(){return!!this._eventsBounds&&this._eventsBounds.inputEnabled},set:function(a){this._eventsBounds.inputEnabled=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"currentLabel",{get:function(){return this._currentLabel},enumerable:!0,configurable:!0}),b.prototype.update=function(){},b.prototype.postUpdate=function(){},b}(PIXI.DisplayObjectContainer);a.DBSprite=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d,e,f,g,h,i){var j=a.call(this,b,c,d)||this;return j._cb=[null,null,null,i],j._skinName=f,j._skin=j.game.make.image(0,0,e,f+"0000"),j._skin.anchor.set(.5),j.addChild(j._skin),j._hitBox=j.game.make.graphics(0,0),j._hitBox.beginFill(16711680,0),j._hitBox.drawRect(.5*-g,.5*-h,g,h),j._hitBox.endFill(),j.addChild(j._hitBox),j._hitBox.events.onInputOver.add(function(){j._over=!0,j._cb[0]&&j._cb[0](),j._skin.frameName=j._skinName+"0001"}),j._hitBox.events.onInputOut.add(function(){j._over=!1,j._cb[1]&&j._cb[1](),j._skin.frameName=j._skinName+"0000"}),j._hitBox.events.onInputDown.add(function(){j._down=!0,j._cb[2]&&j._cb[2](),j._skin.frameName=j._skinName+"0002"}),j._hitBox.events.onInputUp.add(function(){if(j._down){var a=j._over;j._skin.frameName=j._skinName+(a?"0001":"0000"),j._down=!1,a&&null!=j._cb[3]&&j._cb[3]()}}),j.enabled=!0,j}return __extends(b,a),b.prototype.setOtherCallbacks=function(a,b,c){this._cb[0]=a,this._cb[1]=b,this._cb[2]=c},Object.defineProperty(b.prototype,"enabled",{get:function(){return this.inputEnabled},set:function(a){this.inputEnabled=a,this._hitBox.inputEnabled=a},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"skin",{get:function(){return this._skin},enumerable:!0,configurable:!0}),b}(Phaser.Sprite);a.EmptyButton=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.loadFactory=function(a,b,c,d,e){d=d||"_tex",e=e||"_ske",c+=b,a.load.json(b+"textureData",c+d+".json"),a.load.json(b+"dragonBonesData",c+e+".json"),a.load.image(b+"texture",c+d+".png")},b.createFactory=function(a,b){var c=new dragonBones.PhaserFactory(null,a);return c.parseDragonBonesData(a.cache.getJSON(b+"dragonBonesData")),c.parseTextureAtlasData(a.cache.getJSON(b+"textureData"),a.cache.getBaseTexture(b+"texture")),c},b}(Phaser.State);a.Factories=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b){var c=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main() {","vec4 sum = vec4(0);","vec2 texcoord = vTextureCoord;","for(int xx = -8; xx <= 8; xx++) {","for(int yy = -8; yy <= 8; yy++) {","float dist = sqrt(float(xx*xx) + float(yy*yy));","float factor = 0.0;","if (dist == 0.0) {","factor = 2.0;","} else {","factor = 2.0/abs(float(dist));","}","sum += texture2D(uSampler, texcoord + vec2(xx, yy) * 0.002) * factor;","}","}","gl_FragColor = sum * 0.025 + texture2D(uSampler, texcoord);","}"];return a.call(this,b,[],c)||this}return __extends(b,a),b}(Phaser.Filter);a.Glow=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e,f){void 0===e&&(e=null),void 0===f&&(f=!1);var g=this,h=null,i=null,j=null;return d.length>0&&(h=d[0],d.length>1?(i=d[1],j=d.length>2?d[2]:d[0]):(i=d[0],j=d[0])),g=b.call(this,a,0,0,c,null,null,i,h,j,null)||this,g._framesString=[h,i,j],g.soundOver="over",g.soundDown=null,g.anchor.setTo(.5),g._cb=e,g._deltaScale=.1,g._defaultScale=1,g._isDown=!1,g._isOver=!1,g._invert=f,g._invert?g.scale.set(-g._defaultScale,g._defaultScale):g.scale.set(g._defaultScale),g.onInputOver.add(g.over,g),g.onInputOut.add(g.out,g),g.onInputDown.add(g.down,g),g.onInputUp.add(g.up,g),g}return __extends(c,b),c.prototype.setCBContext=function(a){this._cntxt=a},c.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},c.prototype.setNewFrames=function(a){var b=null,c=null,d=null;a.length>0&&(b=a[0],a.length>1?(c=a[1],d=a.length>2?a[2]:a[0]):(c=a[0],d=a[0])),this._framesString=[b,c,d],this.setFrames(c,b,d)},c.prototype.over=function(){this._isDown,this._isOver=!0,a.SoundMixer.play("over",.2)},c.prototype.out=function(){this._isDown||(this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale)),this._isOver=!1},c.prototype.up=function(){var a=this;if(this._isDown){this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale);var b=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1]:b&&setTimeout(function(){a.frameName=a._framesString[0]},5),this._isDown=!1,b&&null!=this._cb?(this._cntxt?this._cb.bind(this._cntxt)():this._cb(),this.frameName=this._framesString[0]):0==b&&(this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale))}},c.prototype.down=function(){this._isDown||(this._invert?this.scale.set(-(this._defaultScale-this._deltaScale),this._defaultScale-this._deltaScale):this.scale.set(this._defaultScale-this._deltaScale),this._isDown=!0)},c.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(c.prototype,"enabled",{set:function(a){this.inputEnabled=a,a||(this.frameName=this._framesString[0],this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale))},enumerable:!0,configurable:!0}),c}(Phaser.Button);a.OButton=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e,f){void 0===f&&(f=null);var g=this,h=null,i=null,j=null,k=null,l=null,m=null;return d.length>0&&(h=d[0],d.length>1?(i=d[1],j=d.length>2?d[2]:d[0]):(i=d[0],j=d[0])),e.length>0&&(k=e[0],e.length>1?(l=e[1],m=e.length>2?e[2]:e[0]):(l=e[0],m=e[0])),g=b.call(this,a,0,0,c,null,null,i,h,j,null)||this,g._framesString=[h,i,j,k,l,m],g._check=!0,g.soundOver="over",g.soundDown=null,g.anchor.setTo(.5),g._cb=f,g._deltaScale=.1,g._defaultScale=1,g._isDown=!1,g._isOver=!1,g.onInputOver.add(g.over,g),g.onInputOut.add(g.out,g),g.onInputDown.add(g.down,g),g.onInputUp.add(g.up,g),g}return __extends(c,b),c.prototype.setCheck=function(a){if(this._check!=a){this._check=a;var b=0;a||(b=3),this.setFrames(this._framesString[b+1],this._framesString[b],this._framesString[b+2],this._framesString[b])}},Object.defineProperty(c.prototype,"check",{get:function(){return this._check},enumerable:!0,configurable:!0}),c.prototype.setCBContext=function(a){this._cntxt=a},c.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},c.prototype.over=function(){this._isDown||this.scale.set(this._defaultScale+this._deltaScale),this._isOver=!0,a.SoundMixer.play("over",.2)},c.prototype.out=function(){this._isDown||this.scale.set(this._defaultScale),this._isOver=!1},c.prototype.up=function(){var a=this;if(this._isDown){this.scale.set(this._isOver?this._defaultScale+this._deltaScale:this._defaultScale);var b=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1+(this._check?0:3)]:b&&setTimeout(function(){a.frameName=a._framesString[a._check?0:3]},5),this._isDown=!1,b&&null!=this._cb?(this.setCheck(!this.check),this._cntxt?this._cb.bind(this._cntxt)():this._cb(),this.frameName=this._framesString[this._check?0:3]):0==b&&this.scale.set(this._defaultScale)}},c.prototype.down=function(){this._isDown||(this.scale.set(this._defaultScale-this._deltaScale),this._isDown=!0)},c.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(c.prototype,"enabled",{set:function(a){var b=this;this.inputEnabled=a,a||setTimeout(function(){b.frameName=b._framesString[b._check?0:3],b.scale.set(b._defaultScale)},5)},enumerable:!0,configurable:!0}),c}(Phaser.Button);a.OButtonCheck=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b){return a.call(this,b,0,0)||this}return __extends(b,a),b.prototype.addChild=function(b){var c=0,d=this.children.length;for(c;c<d&&!(this.children[c].y>b.y);c++);return a.prototype.addChildAt.call(this,b,c)},b}(Phaser.Sprite);a.ZSprite=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){}return a}();b.CURRENT_STATE="BaseGame",a.LocalConfig=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function b(){this.game=new Phaser.Game(750,500,Phaser.AUTO,"game_container",null,!1),this.game.state.add("Boot",a.Boot,!0),this.game.state.add("Preloader",a.Preloader),this.game.state.add("BaseGame",a.BaseGame),this.game.state.add("MainMenu",a.MainMenu)}return b.gotoFunction=function(a){var b=window[a];"function"==typeof b&&b()},b}();b.DEBUG=!0,a.Main=b}(TProject||(TProject={})),window.onload=function(){new TProject.Main;setTimeout("window.scrollTo(0, 1)",10),document.body.addEventListener("touchmove",function(a){a.preventDefault()},!1)};var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function d(){var a=null!==b&&b.apply(this,arguments)||this;return a._shakeFrames=0,a._blinkTime=-1,a._currentLevel=-1,a._goVertical=0,a._goHorizontal=0,a._stop_move=[!1,!1,!1,!1,!1],a._tutorStep=0,a._maxPowerUpSameTime=2,a._timeBetweentowPowerUp=300,a._curTimePowerUp=a._timeBetweentowPowerUp,a.PATTERNS='{"patterns":[[{"x":213.15, "y":425.65, "type":2, "rotation":0}],[{"x":535, "y":129.7, "type":2, "rotation":180}],[{"x":217.45, "y":124, "type":2, "rotation":0}],[{"x":374.1, "y":271.75, "type":2, "rotation":0}],[{"x":216.05, "y":268.05, "type":4, "rotation":0}],[{"x":405.85, "y":299.15, "type":3, "rotation":0}],[{"x":596.65, "y":385.95, "type":1, "rotation":0}],[{"x":627.95, "y":283.15, "type":1, "rotation":180}],[{"x":533.65, "y":313.8, "type":3, "rotation":0}],[{"x":184.9, "y":80.15, "type":1, "rotation":180}],[{"x":118.75, "y":311.7, "type":2, "rotation":0},{"x":567.6, "y":207.95, "type":4, "rotation":0}],[{"x":215.95, "y":267.85, "type":4, "rotation":0},{"x":504.65, "y":116.15, "type":3, "rotation":0}],[{"x":180.85, "y":438.55, "type":2, "rotation":0},{"x":504.95, "y":262.05, "type":3, "rotation":0}],[{"x":532.65, "y":418.95, "type":2, "rotation":180},{"x":215.1, "y":383.05, "type":1, "rotation":0}],[{"x":280.45, "y":216.35, "type":4, "rotation":0},{"x":120.1, "y":245.95, "type":1, "rotation":0}],[{"x":214.75, "y":326.35, "type":3, "rotation":0},{"x":630.1, "y":217.95, "type":1, "rotation":180}],[{"x":533.75, "y":326.35, "type":3, "rotation":0},{"x":250.1, "y":78, "type":1, "rotation":180}],[{"x":691.8, "y":344.35, "type":2, "rotation":0},{"x":310.3, "y":312.65, "type":1, "rotation":0}],[{"x":215.65, "y":248.05, "type":4, "rotation":0},{"x":596.3, "y":378.6, "type":1, "rotation":0}],[{"x":184.95, "y":188.9, "type":4, "rotation":0},{"x":504.65, "y":289.9, "type":2, "rotation":0}],[{"x":630.9, "y":124.55, "type":2, "rotation":0},{"x":373.65, "y":353, "type":4, "rotation":0},{"x":185.15, "y":200.1, "type":3, "rotation":0}],[{"x":529.85, "y":426.55, "type":2, "rotation":0},{"x":390.65, "y":181, "type":4, "rotation":0},{"x":252.15, "y":299.05, "type":3, "rotation":0}],[{"x":372.85, "y":349.6, "type":2, "rotation":0},{"x":184.65, "y":205.05, "type":4, "rotation":0},{"x":567.95, "y":206.8, "type":3, "rotation":0}],[{"x":182.65, "y":181.05, "type":4, "rotation":0},{"x":566.95, "y":249.35, "type":3, "rotation":0},{"x":306.65, "y":347.05, "type":4, "rotation":0}],[{"x":184.65, "y":202.05, "type":4, "rotation":0},{"x":245.95, "y":415.05, "type":3, "rotation":0},{"x":532.3, "y":273.7, "type":1, "rotation":0}],[{"x":566.65, "y":267.45, "type":4, "rotation":0},{"x":438.95, "y":195.1, "type":3, "rotation":0},{"x":215.3, "y":286.7, "type":1, "rotation":0}],[{"x":278.65, "y":202.05, "type":4, "rotation":0},{"x":564.95, "y":220.1, "type":3, "rotation":0},{"x":308.95, "y":429.75, "type":3, "rotation":0}],[{"x":215.25, "y":430.55, "type":2, "rotation":0},{"x":184.65, "y":202.05, "type":4, "rotation":0},{"x":438.95, "y":299.1, "type":3, "rotation":0}],[{"x":215.65, "y":208.05, "type":4, "rotation":0},{"x":567.65, "y":186.05, "type":4, "rotation":0},{"x":500.65, "y":364.05, "type":4, "rotation":0}],[{"x":342.65, "y":231.05, "type":4, "rotation":0},{"x":565.95, "y":253.1, "type":3, "rotation":0},{"x":182.65, "y":373.05, "type":4, "rotation":0}],[{"x":503.15, "y":430.55, "type":2, "rotation":0},{"x":312.65, "y":216, "type":4, "rotation":0},{"x":87.95, "y":288.95, "type":3, "rotation":0},{"x":536.3, "y":77.65, "type":1, "rotation":0}],[{"x":214.85, "y":427.5, "type":2, "rotation":0},{"x":216.65, "y":188.05, "type":4, "rotation":0},{"x":472.95, "y":137.1, "type":3, "rotation":0},{"x":564.3, "y":441, "type":1, "rotation":0}],[{"x":213.85, "y":437.5, "type":2, "rotation":0},{"x":502.65, "y":350.95, "type":4, "rotation":0},{"x":216.95, "y":202.05, "type":3, "rotation":0},{"x":505.75, "y":99.7, "type":1, "rotation":0}],[{"x":501.55, "y":432.6, "type":2, "rotation":0},{"x":277.65, "y":322.95, "type":4, "rotation":0},{"x":185.95, "y":130.05, "type":3, "rotation":0},{"x":574.3, "y":75.75, "type":1, "rotation":180}],[{"x":218.15, "y":117.7, "type":2, "rotation":0},{"x":408.65, "y":247.05, "type":4, "rotation":180},{"x":181.95, "y":358, "type":3, "rotation":0},{"x":565.65, "y":354, "type":4, "rotation":0}],[{"x":342.65, "y":211, "type":4, "rotation":0},{"x":503.95, "y":326, "type":3, "rotation":0},{"x":569.3, "y":76.75, "type":1, "rotation":0},{"x":181.95, "y":326, "type":3, "rotation":0}],[{"x":181.85, "y":423.55, "type":2, "rotation":0},{"x":216.65, "y":118.05, "type":4, "rotation":0},{"x":533.95, "y":411, "type":3, "rotation":0},{"x":471.3, "y":201.7, "type":1, "rotation":0}],[{"x":280.65, "y":188.05, "type":4, "rotation":0},{"x":213.95, "y":418, "type":3, "rotation":0},{"x":438.65, "y":324.2, "type":4, "rotation":0},{"x":535.95, "y":199.05, "type":3, "rotation":0}],[{"x":215.65, "y":212, "type":4, "rotation":0},{"x":533.95, "y":360, "type":3, "rotation":0},{"x":213.7, "y":391.6, "type":1, "rotation":0},{"x":535.35, "y":122.05, "type":4, "rotation":0}],[{"x":501.85, "y":425.55, "type":2, "rotation":0},{"x":504.65, "y":189, "type":4, "rotation":0},{"x":184.95, "y":245.05, "type":3, "rotation":0},{"x":245.65, "y":435.9, "type":4, "rotation":0}]]}',a}return __extends(d,b),d.prototype.create=function(){b.prototype.create.call(this),this._hitOnTutorial=!1,this._timeToGameOver=2.5,this._gameOver=!1,this._gameWin=!1,this._container=this.game.add.sprite(0,0),this._blinkGraphics=this.make.graphics(0,0),this._blinkGraphics.beginFill(16777215),this._blinkGraphics.drawRect(0,0,this.world.width,this.world.height),this._blinkGraphics.endFill(),d.BEGIN_X=this.world.centerX-.5*d.GREEN_PLACE_WIDTH+10,d.BEGIN_Y=this.world.centerY-.5*d.GREEN_PLACE_HEIGHT+35;var c=this.add.image(0,0,"test","bg0000");this._container.addChild(c),this._charactersSprite=new a.ZSprite(this.game),a.Boot.START_TUTORIAL||a.Boot.GAME_DATA.firstLaunch?(this.replay(0,!1),a.Boot.START_TUTORIAL=!1):this.replay(1,!1),this._charactersSprite.addChild(this._player),this._charactersSprite.addChild(this._heavy),this._gameUI=new a.GameUI(this.game,this),this.world.addChild(this._gameUI),this._gameUI.initialUI(this._powerUpsManager.getCurrentPowerUp(),this._gold,a.LvlConfig.getGoalPct(),this._currentLevel)},d.prototype.free=function(){
for(this.world.removeChild(this._gameUI),this._gameUI.destroy(!0),this._gameUI=null,this._border&&this.border.destroy(),this._greenPlace.free(),this._greenPlace.destroy(!0),this._player.destroy(!0),this._heavy.destroy(!0),this._player=null,this._heavy=null,this._greenPlace=null,this._border=null,this._charactersSprite=null,this._powerUpsManager.replay(!1),this._powerUpsManager=null;this._obstacles&&this._obstacles.length;)this._obstacles.pop().destroy();for(;this._swarmerList&&this._swarmerList.length;)this._swarmerList.pop().destroy();for(;this._lights&&this._lights.length;)this._lights.pop().remove();this._container.destroy(!0),this._container=null,this.setPause(!1)},d.prototype.inBeginBorder=function(a,b,c){return void 0===c&&(c=2),!(a<d.BEGIN_X+c||a>d.BEGIN_X+d.GREEN_PLACE_WIDTH-c)&&!(b<d.BEGIN_Y+c||b>d.BEGIN_Y+d.GREEN_PLACE_HEIGHT-c)},d.prototype.WIN=function(){a.SoundMixer.stop("game"),a.SoundMixer.play("win",.3),this._heavy.gameOver(),this._gameWin=!0;for(var b=0;this._swarmerList&&b<this._swarmerList.length;b++)this._swarmerList[b].gameOver();this._player.win()},d.prototype.GAMEOVER=function(){this._gameOver=!0,a.SoundMixer.stop("game"),a.SoundMixer.play("lose",.3),this._heavy.win();for(var b=0;this._swarmerList&&b<this._swarmerList.length;b++)this._swarmerList[b].win()},d.prototype.addNewPowerUp=function(a){this._gameUI.addPowerUp(a)},d.prototype.addMultiplier=function(a){void 0===a&&(a=!1),this._gold=a?0:this._gold+1,this._gameUI.addGoldenHand()},d.prototype.resetTutoStop=function(a){void 0===a&&(a=!1);for(var b=0;b<this._stop_move.length;b++)this._stop_move[b]=a},d.prototype.nextTutor=function(b){var c=this;if(0==this._currentLevel&&b==this._tutorStep)switch(this._tutorStep++,5!=b&&(this._goHorizontal=0,this._goVertical=0),b){case 0:this._stop_move[2]=!1,this._gameUI&&this._gameUI.currentTutorialTips(0);break;case 1:this._stop_move[2]=!0,this._stop_move[1]=!1,this._gameUI&&this._gameUI.currentTutorialTips(1);break;case 2:this._stop_move[1]=!0,this._stop_move[0]=!1,this._gameUI&&this._gameUI.currentTutorialTips(2);break;case 3:this._stop_move[0]=!0,this._stop_move[2]=!1,this._gameUI&&this._gameUI.currentTutorialTips(3);break;case 4:this._stop_move[2]=!0,this._stop_move[3]=!1,this._gameUI&&this._gameUI.currentTutorialTips(4);break;case 5:this.setTimeout(function(){c._stop_move[3]=!0,c._gameUI&&c._gameUI.currentTutorialTips(5)},300),this.setTimeout(function(){c._stop_move[2]=!1,c._gameUI&&c._gameUI.currentTutorialTips(6)},1600);break;case 6:this._stop_move[2]=!0,this.player.stopMove(),this._gameUI&&this._gameUI.currentTutorialTips(7),this.setTimeout(function(){c._stop_move[2]=!1},500);break;case 7:this._stop_move[2]=!0,this._heavy.setTarget(d.BEGIN_X+100,d.BEGIN_Y+200),this._gameUI&&this._gameUI.currentTutorialTips(8),this.setTimeout(function(){c._goHorizontal=0,c._goVertical=0,c._gameUI&&c._gameUI.currentTutorialTips(9),c._powerUpsManager.addX2(360,d.BEGIN_Y+10),c._stop_move[0]=!1},3e3);break;case 8:this._stop_move[0]=!0,this._gameUI&&this._gameUI.currentTutorialTips(10),this.setTimeout(function(){c._stop_move[4]=!1,c._gameUI&&c._gameUI.currentTutorialTips(11)},2500);break;case 9:this.player.stopMove(),this.resetTutoStop(!1),a.Boot.GAME_DATA.firstLaunch=!1,a.SaveManager.getInstance.save()}},d.prototype.PlayerGetHitWhenTutorial=function(){var a=this;this._hitOnTutorial||(this._hitOnTutorial=!0,this._gameUI.currentTutorialTips(13),this.setTimeout(function(){a._hitOnTutorial=!1,a._gameUI.currentTutorialTips(14)},2500))},d.prototype.replay=function(b,e){var f=this;void 0===b&&(b=1),void 0===e&&(e=!0),this.clearTimeouts(),a.SoundMixer.play("game",.2,!0);var g=b>this._currentLevel;this._currentLevel=b,this._shakeFrames=0,this._blinkTime=-1,this._goVertical=0,this._goHorizontal=0,this.resetTutoStop(0==b),0==b&&(this._tutorStep=0,this.nextTutor(this._tutorStep));var h=!1;this._border&&(this.border.destroy(),h=!0),1!=e&&(this._gold=0);for(this._border=new a.Polygon,this._border.addVertex(new a.Pixel(d.BEGIN_X+2,d.BEGIN_Y+2)),this._border.addVertex(new a.Pixel(d.BEGIN_X+d.GREEN_PLACE_WIDTH-2,d.BEGIN_Y+2)),this._border.addVertex(new a.Pixel(d.BEGIN_X+d.GREEN_PLACE_WIDTH-2,d.BEGIN_Y+d.GREEN_PLACE_HEIGHT-2)),this._border.addVertex(new a.Pixel(d.BEGIN_X+2,d.BEGIN_Y+d.GREEN_PLACE_HEIGHT-2)),this._border.create(),null==this._greenPlace?(this._greenPlace=new c(this),this._container.addChild(this._greenPlace),this._container.addChild(this._charactersSprite)):this._greenPlace.replay(),h&&this._greenPlace.redrawMask(this._border),this._greenPlace.drawTrailSegment(this._border.vertices),null==this._player?(this._player=new a.Player(this,Math.round(d.BEGIN_X+d.GREEN_PLACE_WIDTH/2),d.BEGIN_Y+d.GREEN_PLACE_HEIGHT-2),this._player.onStop=function(){f._goVertical=0,f._goHorizontal=0}):this.player.replay(Math.round(d.BEGIN_X+d.GREEN_PLACE_WIDTH/2),d.BEGIN_Y+d.GREEN_PLACE_HEIGHT-2),null==this._heavy?this._heavy=new a.Heavy(this,0,0):this._heavy.replay(),null==this._powerUpsManager?this._powerUpsManager=new a.PowerUpManager(this._charactersSprite,this):this._powerUpsManager.replay(g);this._obstacles&&this._obstacles.length;)this._obstacles.pop().destroy();for(;this._swarmerList&&this._swarmerList.length;)this._swarmerList.pop().destroy();for(;this._lights&&this._lights.length;)this._lights.pop().remove();this.buildLevel(0==b),this._gameUI&&this._gameUI.initialUI(this._powerUpsManager.getCurrentPowerUp(),this._gold,a.LvlConfig.getGoalPct(),this._currentLevel)},d.prototype.buildLevel=function(b){void 0===b&&(b=!1),a.LvlConfig.setLvl(this._currentLevel),this._powerUpsManager.init(a.LvlConfig.listPowerUp(),a.LvlConfig.maxPowerUpSameTime()),this.buildObstacle(b),this.buildEnemies(b),this.buildLight(),this.buildGold(b)},d.prototype.cutForm=function(b){var e,f=this,g=this._border.cut(b);this._border.destroy();var h=new a.Point(this._heavy.x,this._heavy.y);this._border.destroy(),g[0].contains(h.x,h.y)?(this._border=g[0],e=g[1]):(this._border=g[1],e=g[0]),this._greenPlace.redrawMask(this._border),this._greenPlace.drawTrailSegment(this._border.vertices),this._otherGreenPlace=new c(this,e,!0),this._container.addChildAt(this._otherGreenPlace,1),this._otherGreenPlace.drawTrailSegment(e.vertices),this._otherGreenPlace.alpha=1,e.popValidationFXs(this),this.add.tween(this._otherGreenPlace).to({alpha:0},150,Phaser.Easing.Linear.None,!0).onComplete.add(function(){f._otherGreenPlace.destroy(),f._container.removeChild(f._otherGreenPlace),f._otherGreenPlace.free(),f._otherGreenPlace=null}),this._heavy.onCutForm(),this._powerUpsManager.onCut(),this._lights&&this._lights.forEach(function(a,b){f.border.contains(a.x,a.y)||a.remove()});var i=Math.round(this._border.area/d.BORDER_100_RR*100);this._gameUI.changeCurrentComplete(100-i),a.LvlConfig.getGoalPct()<=100-i&&this.WIN()},d.prototype.setBlink=function(a,b,c){void 0===b&&(b=16777215),void 0===c&&(c=1),this._blinkTime<0&&0==a||(this._blinkTime=a?8:-1,this._blinkGraphics.alpha=c,this._blinkGraphics.tint=b,a&&!this.world.contains(this._blinkGraphics)?this.world.addChild(this._blinkGraphics):this.world.removeChild(this._blinkGraphics))},d.prototype.availableCoordForPowerUps=function(b,c){if(this.isInObstacle(new a.Point(b,c)))return!1;if(this._powerUpsManager.contains(b,c))return!1;if(this.player.getAttackZone().contains(b,c))return!1;if(this._heavy.getViewZone().contains(b,c))return!1;for(var d=0;this._swarmerList&&d<this._swarmerList.length;d++)if(this._swarmerList[d].getViewZone().contains(b,c))return!1;return!!this._border.contains(b,c)},d.prototype.buildGold=function(b){void 0===b&&(b=!1);for(var c,e,f=a.LvlConfig.multiplierCount(),g=0;g<f;g++){if(b)c=568,e=213;else do{c=d.BEGIN_X+Math.round(Math.random()*d.GREEN_PLACE_WIDTH),e=d.BEGIN_Y+Math.round(Math.random()*d.GREEN_PLACE_HEIGHT)}while(!this.availableCoordForPowerUps(c,e));this._powerUpsManager.addGold(c,e)}},d.prototype.buildEnemies=function(b){void 0===b&&(b=!1),b?(this._heavy.x=-50,this._heavy.y=346):(this._heavy.x=Math.floor(d.BEGIN_X+d.GREEN_PLACE_WIDTH/2),this._heavy.y=Math.floor(d.BEGIN_Y+.3*d.GREEN_PLACE_HEIGHT)),this._heavy.initMove(a.LvlConfig.heavySpeedMax(),a.LvlConfig.heavyIARush(),a.LvlConfig.heavyIAFlee(),a.LvlConfig.heavyIARandom(),a.LvlConfig.heavyAggroRange(),a.LvlConfig.heavyStalkDistance(),b);var c=a.LvlConfig.swarmerCount();if(!(c<1)){this._swarmerList=[];for(var e,f,g,h=0,i=0,j=0;j<c;j++){do{Math.random()<.5?(f=d.BEGIN_X+Math.round(Math.random()<.5?2:d.GREEN_PLACE_WIDTH-2),g=d.BEGIN_Y+2+Math.round(Math.random()*(d.GREEN_PLACE_HEIGHT-2))):(f=d.BEGIN_X+2+Math.random()*(d.GREEN_PLACE_WIDTH-2),g=d.BEGIN_Y+2)}while(this.isInObstacle(new a.Point(f,g)));e=new a.Swarmer(this,f,g,i),e.setMaxSpeed(a.LvlConfig.swarmerspeedMax(j+1)),h=e.setDir(h),i=e.skinNum,this._swarmerList.push(e),this._charactersSprite.addChild(e)}}},d.prototype.buildObstacle=function(b){void 0===b&&(b=!1);var c=a.LvlConfig.obstacleCount();if(!(c<1)){this._obstacles=[];for(var d,e=JSON.parse(this.PATTERNS),f=(e.patterns.length,b?3:10*(c-1)+Math.round(9*Math.random())),g=e.patterns[f],h=g.length,i=this.game.make.bitmapData(this.world.width,this.world.height),j=b?-15:15,k=0;k<h;k++)d=new a.Obstacle(this.game,g[k].x+22,g[k].y+j,g[k].rotation,g[k].type),this._container.addChildAt(d,2),this._obstacles.push(d),i.copy(d.visualMask,0,0,d.visual.width,d.visual.height,g[k].x+22,g[k].y+j,null,null,g[k].rotation*Math.PI/180,.5,.5);this._greenPlace.createWood(i),i.destroy()}},d.prototype.buildLight=function(){if(!a.Boot.OPTIMIZATION){this._lights=[];for(var b,c,e,f=0;f<5;f++){b=new a.Light(this.game,0,0),this._lights.push(b),this._charactersSprite.addChild(b);do{c=d.BEGIN_X+50+Math.round(Math.random()*(d.GREEN_PLACE_WIDTH-100)),e=d.BEGIN_Y+50+Math.round(Math.random()*(d.GREEN_PLACE_HEIGHT-100))}while(!this.checkPosValideLight(c,e));this._lights[this._lights.length-1].x=c,this._lights[this._lights.length-1].y=e}}},d.prototype.checkPosValideLight=function(b,c){var d=this._lights[this._lights.length-1];d.x=b,d.y=c;for(var e=0;this._obstacles&&e<this._obstacles.length;++e)if(a.GameEntity.hitPhaserPolygon(d._hitBody,this._obstacles[e]._hit,b,c,0,0))return!1;for(var e=0;e<this._lights.length-1;++e)if(a.GameEntity.hitPhaserPolygon(d._hitBody,this._lights[e]._hitBody,b,c,this._lights[e].x,this._lights[e].y))return!1;return!0},d.prototype.tryAddPowerUp=function(){if(-1==this._maxPowerUpSameTime||this._powerUpsManager.length<this._maxPowerUpSameTime){if(0==this._curTimePowerUp){this._curTimePowerUp=this._timeBetweentowPowerUp;var a=void 0,b=void 0;do{a=d.BEGIN_X+Math.round(Math.random()*d.GREEN_PLACE_WIDTH),b=d.BEGIN_Y+Math.round(Math.random()*d.GREEN_PLACE_HEIGHT)}while(!this.availableCoordForPowerUps(a,b));this._powerUpsManager.addRandom(a,b)}--this._curTimePowerUp}},d.prototype.playerOnBorder=function(){return this._border.pointInBorder(this._player.x,this._player.y)},Object.defineProperty(d.prototype,"tutorStep",{get:function(){return this._tutorStep},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"currentLevel",{get:function(){return this._currentLevel},enumerable:!0,configurable:!0}),d.prototype.isInObstacle=function(a){if(null!=this._obstacles){var b=!1;return this._obstacles.forEach(function(c,d){b=b||c.hit(a.x,a.y)}),b}},d.prototype.setStun=function(a){this._heavy.setStun(a),this._shakeFrames=a?60:0,this.setBlink(a,10705960,.5);for(var b=0;this._swarmerList&&b<this._swarmerList.length;b++)this._swarmerList[b].setStun(a)},d.prototype.setSlow=function(a){this._heavy.setSlow(a),this.setBlink(a);for(var b=0;this._swarmerList&&b<this._swarmerList.length;b++)this._swarmerList[b].setSlow(a)},d.prototype.isInsideZone=function(a,b){return void 0===b&&(b=!0),this.border.contains(a.x,a.y)&&!this.border.pointInBorder(a.x,a.y)&&(!!b||!this.isInObstacle(a))},d.prototype.isInsideZone_faster=function(a,b){return void 0===b&&(b=!0),this.border.contains(a.x,a.y)&&(!!b||!this.isInObstacle(a))},d.prototype.isOnStartBorder=function(a){return!(a.x<d.BEGIN_X+2||a.x>d.BEGIN_X+d.GREEN_PLACE_WIDTH-2)&&!(a.y<d.BEGIN_Y+2||a.y>d.BEGIN_Y+d.GREEN_PLACE_HEIGHT-2)},d.prototype.shake=function(){if(0==this._shakeFrames)return this._container.x=0,void(this._container.y=0);this._container.x=Math.round(this.getMinusOrPlus()*(4+4*Math.random())),this._container.y=Math.round(this.getMinusOrPlus()*(4+4*Math.random())),--this._shakeFrames},d.prototype.getMinusOrPlus=function(){return 2*Math.random()<1?-1:1},d.prototype.LeftSwipe=function(){1==this._goHorizontal?this._goHorizontal=0:this._goHorizontal=-1,this._goVertical=0},d.prototype.RightSwipe=function(){-1==this._goHorizontal?this._goHorizontal=0:this._goHorizontal=1,this._goVertical=0},d.prototype.TopSwipe=function(){1==this._goVertical?this._goVertical=0:this._goVertical=-1,this._goHorizontal=0},d.prototype.UpSwipe=function(){-1==this._goVertical?this._goVertical=0:this._goVertical=1,this._goHorizontal=0},d.prototype.update=function(){var c=this.game.time.elapsedMS/1e3;if(!this.isPaused){if(this.shake(),this._blinkTime<=0?this.setBlink(!1):this._blinkTime--,a.AbstractGame.keysDown[Phaser.Keyboard.LEFT]||-1==this._goHorizontal?this._stop_move[0]||this._player.setSpeed(-1,0):a.AbstractGame.keysDown[Phaser.Keyboard.RIGHT]||1==this._goHorizontal?this._stop_move[1]||this._player.setSpeed(1,0):a.AbstractGame.keysDown[Phaser.Keyboard.UP]||-1==this._goVertical?this._stop_move[2]||this._player.setSpeed(0,-1):(a.AbstractGame.keysDown[Phaser.Keyboard.DOWN]||1==this._goVertical)&&(this._stop_move[3]||this._player.setSpeed(0,1)),a.AbstractGame.keysPressed[Phaser.Keyboard.SPACEBAR]){if(this._stop_move[4])return;this._powerUpsManager.tryActivateCurrentPowerUp()&&(this._gameUI.activatePowerUp(),a.SoundMixer.play("space",.4),this.nextTutor(9))}this._player.update(),this._heavy.update(),this._powerUpsManager.update(),0==this._currentLevel&&this._gameUI.tutorialTipsUpdate(this._player.worldPosition.x,this._player.worldPosition.y),this.tryAddPowerUp();for(var d=0;this._lights&&d<this._lights.length;)this._lights[d].dead?this._lights.splice(d,1):d++;for(var e=0;this._swarmerList&&e<this._swarmerList.length;e++)this._swarmerList[e].update();this._gameUI&&this._gameUI.powerUpTimerUpdate(this._powerUpsManager.powerUpTimeProgress()),(this._gameOver||this._gameWin)&&(this._timeToGameOver-=c,this._timeToGameOver<=0&&(this._gameOver?(this._gameOver=!1,this._gameUI.gameLose(!1),this._timeToGameOver=2.5):(this._gameWin=!1,this._gameUI.gameLose(!0),this._timeToGameOver=2.5))),this._gameUI.myUpdate(c),b.prototype.update.call(this)}},d.prototype.tryBoostActivateMobile=function(){this._powerUpsManager.tryActivateCurrentPowerUp()&&(this._gameUI.activatePowerUp(),this.nextTutor(9))},d.prototype.generatRandomPosArray=function(){var b=[];if(null==this._allPos||0==this._allPos.length){this._allPos=[];var c=void 0,e=void 0;for(e=d.BEGIN_Y+50;e<d.GREEN_PLACE_HEIGHT+d.BEGIN_Y;e+=50)for(c=d.BEGIN_X+50;c<d.GREEN_PLACE_WIDTH+d.BEGIN_X;c+=50)this._allPos.push(new a.Pixel(c,e))}return b=this._allPos.concat(),b.sort(this.randomArray),b},d.prototype.randomArray=function(){return Math.random()>.5?1:-1},d.prototype.deleteLight=function(b,c){a.Boot.OPTIMIZATION||this._charactersSprite.addChild(new a.LightD(this.game,b,c))},Object.defineProperty(d.prototype,"greenPlace",{get:function(){return this._greenPlace},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"border",{get:function(){return this._border},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"player",{get:function(){return this._player},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"endGame",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"powerUpsManager",{get:function(){return this._powerUpsManager},enumerable:!0,configurable:!0}),d}(a.AbstractGame);b.GREEN_PLACE_WIDTH=584,b.GREEN_PLACE_HEIGHT=324,b.BORDER_100_RR=185600,a.BaseGame=b;var c=function(a){function c(d,e,f){void 0===f&&(f=!1);var g=a.call(this,d.game,0,0)||this;g._bgame=d,g._notReal=f,g._poly=e||g._bgame.border;var h=d.make.image(b.BEGIN_X-36,b.BEGIN_Y-37,"test","greenPlace0000");return g.addChild(h),g._borderBmpTexture=d.game.make.bitmapData(d.game.world.width,d.game.world.height),g._borderBmp=d.game.make.image(0,0,g._borderBmpTexture),g.addChild(g._borderBmp),g._trailBmpTexture=d.game.make.bitmapData(d.game.world.width,d.game.world.height),g._trailBmp=d.game.make.image(0,0,g._trailBmpTexture),g.addChild(g._trailBmp),g._greenMask=d.game.make.graphics(),g.addChild(g._greenMask),g.redrawMask(),h.mask=g._greenMask,null==c.BORDER_DEFAULT_IMAGE&&(c.BORDER_DEFAULT_IMAGE=d.game.make.image(0,0,"test","newline_h0000")),null==c.BORDER_IMAGE&&(c.BORDER_IMAGE=d.game.make.image(0,0,"test","newline_h0000"),c.BORDER_IMAGE.anchor.set(0,.4),g._croprect=new Phaser.Rectangle(0,0,0,5),c.BORDER_IMAGE.crop(g._croprect),g.addChild(c.BORDER_IMAGE)),g}return __extends(c,a),c.prototype.createWood=function(a){var b=this.game.make.bitmapData(this._bgame.game.world.width,this._bgame.game.world.height);b.alphaMask(this.game.make.image(0,0,"test","bg0000"),a),this._wood=this.game.make.sprite(0,0,b),this.addChildAt(this._wood,1)},c.prototype.replay=function(){this._wood&&(this.removeChild(this._wood),this._wood.destroy(!0)),this._croprect.width=0,c.BORDER_IMAGE.crop(this._croprect)},c.prototype.free=function(){this._bgame=null,this._poly=null,this._wood&&(this.removeChild(this._wood),this._wood.destroy(!0)),0==this._notReal&&(this.removeChild(c.BORDER_IMAGE),c.BORDER_IMAGE=null),this.destroy(!0)},c.prototype.redrawMask=function(a){a&&(this._poly=a),this._poly.drawMask(this._greenMask)},c.prototype.blink=function(){var a=this;setTimeout(function(){a._trailBmp.tint=14547078,c.BORDER_IMAGE.tint=14547078},200),setTimeout(function(){a._trailBmp.tint=16777215,c.BORDER_IMAGE.tint=16777215},400),setTimeout(function(){a._trailBmp.tint=14547078,c.BORDER_IMAGE.tint=14547078},600),setTimeout(function(){a._trailBmp.tint=16777215,c.BORDER_IMAGE.tint=16777215},800),setTimeout(function(){a._trailBmp.tint=14547078,c.BORDER_IMAGE.tint=14547078},1e3),setTimeout(function(){a._trailBmp.tint=16777215,c.BORDER_IMAGE.tint=16777215},1200)},c.prototype.setCurrentTrail=function(a,b){c.BORDER_IMAGE.x=a,c.BORDER_IMAGE.y=b,this._croprect.width=0,c.BORDER_IMAGE.crop(this._croprect)},c.prototype.setCurrentTrailNext=function(a,b){var d=a-c.BORDER_IMAGE.x,e=b-c.BORDER_IMAGE.y,f=Math.abs(0!=d?d:e);this._croprect.width=f,c.BORDER_IMAGE.crop(this._croprect),c.BORDER_IMAGE.rotation=(e>0?.5*Math.PI:.5*-Math.PI)+(0==d?0:d>0?.5*Math.PI:.5*-Math.PI)},c.prototype.drawPlayerTrail=function(a){if(null!=c.BORDER_DEFAULT_IMAGE){this.drawTrailSegment(this._poly.vertices);for(var b,d,e,f=a.length,g=1;g<f;g++)b=a[g].x-a[g-1].x,d=a[g].y-a[g-1].y,e=Math.abs(0!=b?b:d),this._trailBmpTexture.copy(c.BORDER_DEFAULT_IMAGE,0,0,e,5,a[g-1].x,a[g-1].y,e,null,0==d?0:d>0?.5*Math.PI:.5*-Math.PI,0,.5,b<0?-1:1)}},c.prototype.drawTrailSegment=function(a){this._borderBmpTexture.clear(),this._trailBmpTexture.clear();for(var b,d,e,f,g=a.length,h=1;h<=g;h++)e=h<g?h:0,b=a[e].x-a[h-1].x,d=a[e].y-a[h-1].y,f=Math.abs(0!=b?b:d),this._borderBmpTexture.copy(c.BORDER_DEFAULT_IMAGE,0,0,f,c.BORDER_DEFAULT_IMAGE.height,a[h-1].x,a[h-1].y,f,null,0==d?0:d>0?.5*Math.PI:.5*-Math.PI,0,.5,b<0?-1:1)},c}(Phaser.Sprite)}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.preload=function(){this.game.load.onFileComplete.add(this.loadingUpdate,this),this.initSaveManager(),this.game.load.image("cn_logo",c.PATH_IMAGES+"Preloader/cnlogo.jpg"),this.game.load.atlas("preload",c.PATH_IMAGES+"Preloader/Preloader.png",c.PATH_IMAGES+"Preloader/Preloader.json"),this.game.load.xml("LvlsConfig",c.PATH_SETTINGS+"lvld.xml")},c.prototype.create=function(){this.enabledMultitouch(!0),this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.game.scale.refresh(),this.game.input.touch.preventDefault=!1,this.game.device.desktop?this.game.input.mouse.enabled=!0:this.game.input.mouse.enabled=!1,this.game.stage.disableVisibilityChange=!0,this.game.stage.backgroundColor=0,1!=window.DONT_USE_OPTIMIZATION_FOR_MOBILE&&(c.OPTIMIZATION=!this.game.device.desktop)},c.prototype.initSaveManager=function(){a.SaveManager.getInstance.init("Gumball_Spirit_006",c.GAME_DATA),c.GAME_DATA=a.SaveManager.getInstance.load()},c.prototype.loadingUpdate=function(b,c,d,e,f){b>=100&&(this.game.load.onFileComplete.removeAll(),a.LvlConfig.init(this.game.cache.getXML("LvlsConfig")),this.game.state.start("Preloader",!0))},c.prototype.enabledMultitouch=function(a){a?(this.game.input.maxPointers=2,this.game.input.addPointer(),this.game.input.addPointer()):this.game.input.maxPointers=1},c}(Phaser.State);b.PATH_IMAGES="./assets/images/",b.PATH_FONTS="./assets/fonts/",b.PATH_SOUNDS="./assets/sounds/",b.PATH_SETTINGS="./assets/settings/",b.FONT_NAME_MEDIUM="gumball_roundedregular",b.FONT_NAME_LIGHT="Lubalin_CnObl",b.GAME_DATA=new a.SaveData,b.OPTIMIZATION=!1,b.START_TUTORIAL=!1,a.Boot=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.create=function(){var c=this;b.prototype.create.call(this),a.SoundMixer.play("main",.2,!0),this._currentDialogNumber=0,this._gameContainer=this.game.add.sprite(0,0),this._bg=this.game.add.sprite(this.game.width/2,this.game.height/2-10,"MainMenu","mainScreen0000"),this._bg.anchor.set(.5),this._gameContainer.addChild(this._bg);var d=this.game.add.text(387,323,"highscore",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"18px",fontWeight:"normal",fill:"#f8fef6",align:"center",stroke:"#245011",strokeThickness:2});d.anchor.set(.5,.5),d.setShadow(0,3,"#234b13",5),this._gameContainer.addChild(d);var e=this.game.add.text(388,347,a.Boot.GAME_DATA.maxScore.toString(),{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#b5fe95",align:"center",stroke:"#245212",strokeThickness:2});e.anchor.set(.5,.5),e.setShadow(0,3,"#234b13",5),this._gameContainer.addChild(e),a.Boot.GAME_DATA.maxScore<=0&&(d.visible=!1,e.visible=!1),this.setDragToObject(d),this.setDragToObject(e),this._spirit=this.game.add.sprite(385,309,"MainMenu","menuSpirit0000"),this._spirit.anchor.set(.5),this._gameContainer.addChild(this._spirit),this._gumball=this.game.add.sprite(155,317,"MainMenu","menuGumball0000"),this._gumball.anchor.set(.5),this._gameContainer.addChild(this._gumball),this._darwin=this.game.add.sprite(608,365,"MainMenu","menuDarwin0000"),this._darwin.anchor.set(.5),this._gameContainer.addChild(this._darwin),this._newGameButton=new a.EmptyButton(this.game,386,394,"MainMenu","ScreenTc_playBtn",270,55,function(){c.showComics()}),this._newGameButton.scale.set(.9),this._newGameButton.skin.y-=40,this._newGameButton.skin.x+=10,this._gameContainer.addChild(this._newGameButton);var f=this.game.add.text(0,10," Play ",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"30px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#4a2910",strokeThickness:5});f.anchor.set(.5,.5),f.setShadow(0,3,"#764315",5),this._newGameButton.addChild(f),this._tutorialButton=new a.EmptyButton(this.game,394,464,"MainMenu","BtnTuto",240,50,function(){a.Boot.START_TUTORIAL=!0,c._tutorialButton.inputEnabled=!1,c.startGame()}),this._tutorialButton.position.set(394,464),this._gameContainer.addChild(this._tutorialButton);var g=this.game.add.text(0,-10," Tutorial ",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#4a2910",strokeThickness:5});g.anchor.set(.5,.5),g.setShadow(0,3,"#764315",5),this._tutorialButton.addChild(g),a.Boot.GAME_DATA.firstLaunch&&(this._tutorialButton.enabled=!1,this._tutorialButton.visible=!1),this._fg=this.game.add.sprite(393,435,"MainMenu","menuFG0000"),this._fg.anchor.set(.5),this._gameContainer.addChild(this._fg),this._comicsSprite=this.game.add.sprite(this.game.width/2,this.game.height/2,"MainMenu","story1.png"),this._comicsSprite.anchor.set(.5),this._gameContainer.addChild(this._comicsSprite),this._comicsSprite.alpha=0,this._comicsTextUp=this.game.add.text(27,-231,"When Penny started hanging out with Leslie",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#000000",strokeThickness:5}),this._comicsTextUp.anchor.set(.5,.5),this._comicsTextUp.setShadow(0,3,"#000000",5),this._comicsSprite.addChild(this._comicsTextUp),this._comicsTextDown=this.game.add.text(15,-196,"Gumball got crazy jealous.",{font:a.Boot.FONT_NAME_MEDIUM,fontSize:"25px",fontWeight:"normal",fill:"#ffffff",align:"center",stroke:"#000000",strokeThickness:5}),this._comicsTextDown.anchor.set(.5,.5),this._comicsTextDown.setShadow(0,3,"#000000",5),this._comicsSprite.addChild(this._comicsTextDown),this._comicsTextUp.alpha=0,this._comicsTextDown.alpha=0,this._comicsNextBtn=new a.OButton(this.game,"MainMenu",["NextBtn0000","NextBtn0001","NextBtn0002"],function(){c.nextBtn()}),this._comicsNextBtn.setCBContext(this),this._comicsNextBtn.position.set(527,456),this._comicsNextBtn.setAnimationScale(0,1),this._gameContainer.addChild(this._comicsNextBtn),this._comicsScipBtn=new a.OButton(this.game,"MainMenu",["SkipBtn0000","SkipBtn0001","SkipBtn0002"],function(){c.skipButton()}),this._comicsScipBtn.setCBContext(this),this._comicsScipBtn.position.set(672,456),this._comicsScipBtn.setAnimationScale(0,1),this._gameContainer.addChild(this._comicsScipBtn),this._comicsNextBtn.visible=!1,this._comicsNextBtn.enabled=!1,this._comicsScipBtn.visible=!1,this._comicsScipBtn.enabled=!1,this._blackOverlay=new Phaser.Graphics(this.game,0,0),this._blackOverlay.beginFill(0,1),this._blackOverlay.drawRect(0,0,this.game.width,this.game.height),this._blackOverlay.endFill(),this._gameContainer.addChild(this._blackOverlay),this._blackOverlay.alpha=0},c.prototype.showComics=function(){var a=this;this._newGameButton.enabled=!1,this._tutorialButton.enabled=!1,this.game.add.tween(this._blackOverlay).to({alpha:1},300,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a._comicsNextBtn.visible=!0,a._comicsScipBtn.visible=!0,a._comicsSprite.alpha=1,a.game.add.tween(a._blackOverlay).to({alpha:0},300,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a._comicsNextBtn.enabled=!0,a._comicsScipBtn.enabled=!0,a.openText(a._currentDialogNumber)},a)},this)},c.prototype.openText=function(a){var b=this;switch(this._currentDialogNumber){case 0:this.game.add.tween(this._comicsTextUp).to({alpha:1},500,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){b._currentDialogNumber++,b.openText(b._currentDialogNumber)},this);break;case 1:this.game.add.tween(this._comicsTextDown).to({alpha:1},500,Phaser.Easing.Linear.None,!0,300).onComplete.addOnce(function(){b._currentDialogNumber++,b.openText(b._currentDialogNumber)},this);break;case 2:this.game.add.tween(this._comicsTextUp).to({alpha:0},300,Phaser.Easing.Linear.None,!0,2100).onComplete.addOnce(function(){b._comicsTextUp.text="Now his Jealous spirit is on the loose."},this),this.game.add.tween(this._comicsTextDown).to({alpha:0},300,Phaser.Easing.Linear.None,!0,2100).onComplete.addOnce(function(){b._comicsTextDown.text="Trap the spirit before it infects the entire school!",b._comicsSprite.loadTexture("MainMenu","story2.png"),b._currentDialogNumber++,b.openText(b._currentDialogNumber)},this);break;case 3:this.game.add.tween(this._comicsTextUp).to({alpha:1},500,Phaser.Easing.Linear.None,!0,300).onComplete.addOnce(function(){b._currentDialogNumber++,b.openText(b._currentDialogNumber)},this);break;case 4:this.game.add.tween(this._comicsTextDown).to({alpha:1},500,Phaser.Easing.Linear.None,!0,300).onComplete.addOnce(function(){b._currentDialogNumber++,b.openText(b._currentDialogNumber)},this);break;case 5:this.game.add.tween(this._blackOverlay).to({alpha:1},500,Phaser.Easing.Linear.None,!0,2100).onComplete.addOnce(function(){b.startGame()},this)}},c.prototype.nextBtn=function(){var a=this;switch(this.game.tweens.removeAll(),this._currentDialogNumber){case 0:this._comicsTextUp.alpha=1,this._currentDialogNumber++,this.game.add.tween(this._comicsTextDown).to({alpha:1},500,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a._currentDialogNumber++,a.openText(a._currentDialogNumber)},this);break;case 1:this._comicsTextDown.alpha=1,this._currentDialogNumber++,this.openText(this._currentDialogNumber);break;case 2:this._comicsTextUp.alpha=0,this._comicsTextUp.text="Now his Jealous spirit is on the loose.",this._comicsTextDown.alpha=0,this._comicsTextDown.text="Trap the spirit before it infects the entire school!",this._comicsSprite.loadTexture("MainMenu","story2.png"),this._comicsTextUp.alpha=1,this._currentDialogNumber++,this.openText(this._currentDialogNumber);break;case 3:this._comicsTextDown.alpha=1,this._currentDialogNumber++,this.openText(this._currentDialogNumber);break;case 4:if(!(this._comicsTextDown.alpha<.7)){this._comicsScipBtn.inputEnabled=!1,this._comicsNextBtn.inputEnabled=!1,this.game.add.tween(this._blackOverlay).to({alpha:1},200,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.startGame()},this);break}this._comicsTextDown.alpha=1,this._currentDialogNumber++,this.openText(this._currentDialogNumber);break;case 5:this._comicsScipBtn.inputEnabled=!1,this._comicsNextBtn.inputEnabled=!1,this.game.add.tween(this._blackOverlay).to({alpha:1},200,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.startGame()},this)}},c.prototype.startGame=function(){this.game.state.start("BaseGame",!0)},c.prototype.skipButton=function(){var a=this;this.game.tweens.removeAll(),this.game.add.tween(this._blackOverlay).to({alpha:1},200,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.startGame()},this),this._comicsScipBtn.enabled=!1,this._comicsNextBtn.enabled=!1},c.prototype.setDragToObject=function(a){a.inputEnabled=!0,a.input.enableDrag(),a.events.onDragStop.add(this.onDragStop,this)},c.prototype.onDragStop=function(a){},c}(a.AbstractGame);a.MainMenu=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a._loadedAssets=!1,a._loadedFont=!1,a}return __extends(c,b),c.prototype.preload=function(){var b=this;this.game.load.onFileComplete.add(this.loadingUpdate,this),this._cnLogo=this.add.image(this.world.centerX-3,this.world.centerY-100+60,"cn_logo"),this._cnLogo.scale.set(.8),this._cnLogo.anchor.set(.5),this._loading=new a.ParallaxImage(this.game,"preload",0,"bgProress0000"),this._loading.anchor.set(.5),this._footer=this.add.image(this.world.centerX,this.world.centerY+120-20,"preload","preloaderFooter0000"),this._footer.anchor.set(.5),this._loading.x=this._footer.x-.5*this._footer.width-2,this._loading.y=this._footer.y-50,this._loadingMask=this.add.graphics(4,24),this._loadingMask.beginFill(16711680,.5),this._loadingMask.drawRect(0,0,this._footer.width-5,this._footer.height-5),this._loadingMask.endFill(),
this._loading.addChild(this._loadingMask),this._loading.mask=this._loadingMask,this._loadingMask.scale.x=0,this._intervalId=setInterval(function(){b._loading.updateScroll(1.2)},20),this.fontsLoading(),this.game.load.atlas("test",a.Boot.PATH_IMAGES+"maingame.png",a.Boot.PATH_IMAGES+"maingame.json"),this.game.load.atlas("ingameUI",a.Boot.PATH_IMAGES+"gameUI.png",a.Boot.PATH_IMAGES+"gameUI.json"),this.game.load.atlas("MainMenu",a.Boot.PATH_IMAGES+"MenuAndComics.png",a.Boot.PATH_IMAGES+"MenuAndComics.json"),this.game.load.atlas("tutorialUI",a.Boot.PATH_IMAGES+"gameUITutorial.png",a.Boot.PATH_IMAGES+"gameUITutorial.json"),a.Factories.loadFactory(this.game,"swarmer",a.Boot.PATH_IMAGES+"db/swarmer/"),a.Factories.loadFactory(this.game,"powerups",a.Boot.PATH_IMAGES+"db/powerups/"),this.game.load.audiosprite("sfx",[a.Boot.PATH_SOUNDS+"sfx.mp3",a.Boot.PATH_SOUNDS+"sfx.ogg"],a.Boot.PATH_SOUNDS+"sfx.json"),this.game.load.atlas("player_ss",a.Boot.PATH_IMAGES+"atlases/player.png",a.Boot.PATH_IMAGES+"atlases/player.json"),this.game.load.atlas("heavy_ss",a.Boot.PATH_IMAGES+"atlases/heavy.png",a.Boot.PATH_IMAGES+"atlases/heavy.json"),this.game.load.atlas("fx_invis",a.Boot.PATH_IMAGES+"atlases/fx_invis.png",a.Boot.PATH_IMAGES+"atlases/fx_invis.json"),this.game.load.atlas("light",a.Boot.PATH_IMAGES+"atlases/light.png",a.Boot.PATH_IMAGES+"atlases/light.json")},c.prototype.shutdown=function(){this._cnLogo.destroy(),this._cnLogo=null,this._loading.destroy(),this._loading=null,this._footer.destroy(),this._footer=null,this._loadingMask.destroy(),this._loadingMask=null},c.prototype.loadingUpdate=function(b,c,d,e,f){this._loadingMask.scale.x=b/100,b>=100&&(this.game.load.onFileComplete.removeAll(),a.Boot.SWARMER=a.Factories.createFactory(this.game,"swarmer"),a.Boot.POWERUPS=a.Factories.createFactory(this.game,"powerups"),dragonBones.PhaserFactory.startLoop(),this._loadedAssets=!0,a.SoundMixer.init(this.game),clearInterval(this._intervalId))},c.prototype.update=function(){var a=this;this._loadedAssets&&this._loadedFont&&(this._loadedAssets=!1,setTimeout(function(){a.game.state.start("MainMenu",!0)},400))},c.prototype.fontsLoading=function(){var b=this;WebFont.load({custom:{families:["gumball_roundedregular"],urls:[a.Boot.PATH_FONTS+"stylesheet.css"]},active:function(){window.setTimeout(function(){b._loadedFont=!0},100)}})},c}(Phaser.State);a.Preloader=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b._shakeFrames=0,b._blinkTime=-1,b._maxPowerUpSameTime=2,b._timeBetweentowPowerUp=300,b._curTimePowerUp=b._timeBetweentowPowerUp,b}return __extends(b,a),b.prototype.create=function(){a.prototype.create.call(this),this.world.addChild(this.game.add.sprite(0,0,"testForUI"))},b}(a.AbstractGame);b.GREEN_PLACE_WIDTH=584,b.GREEN_PLACE_HEIGHT=324,a.Test=b;!function(b){function c(d,e){var f=b.call(this,d.game,0,0)||this;f._bgame=d,f._poly=e||f._bgame.border;var g=d.make.image(a.BaseGame.BEGIN_X-36,a.BaseGame.BEGIN_Y-37,"test","greenPlace0000");return f.addChild(g),f._borderBmpTexture=d.game.make.bitmapData(d.game.world.width,d.game.world.height),f._borderBmp=d.game.make.image(0,0,f._borderBmpTexture),f.addChild(f._borderBmp),f._trailBmpTexture=d.game.make.bitmapData(d.game.world.width,d.game.world.height),f._trailBmp=d.game.make.image(0,0,f._trailBmpTexture),f.addChild(f._trailBmp),f._greenMask=d.game.make.graphics(),f.addChild(f._greenMask),f.redrawMask(),g.mask=f._greenMask,null==c.BORDER_DEFAULT_IMAGE&&(c.BORDER_DEFAULT_IMAGE=d.game.make.image(0,0,"test","newline_h0000")),f}__extends(c,b),c.prototype.createWood=function(a){var b=this.game.make.bitmapData(this._bgame.game.world.width,this._bgame.game.world.height);b.alphaMask(this.game.make.image(0,0,"test","bg0000"),a),this._wood=this.game.make.sprite(0,0,b),this.addChildAt(this._wood,1)},c.prototype.free=function(){this._bgame=null,this._poly=null,this.destroy(!0)},c.prototype.redrawMask=function(a){a&&(this._poly=a),this._poly.drawMask(this._greenMask)},c.prototype.blink=function(){var a=this;setTimeout(function(){a._trailBmp.tint=14547078},200),setTimeout(function(){a._trailBmp.tint=16777215},400),setTimeout(function(){a._trailBmp.tint=14547078},600),setTimeout(function(){a._trailBmp.tint=16777215},800),setTimeout(function(){a._trailBmp.tint=14547078},1e3),setTimeout(function(){a._trailBmp.tint=16777215},1200)},c.prototype.drawPlayerTrail=function(a,b){this.drawTrailSegment(this._poly.vertices);for(var d,e,f,g=a.length,h=1;h<g;h++)d=a[h].x-a[h-1].x,e=a[h].y-a[h-1].y,f=Math.abs(0!=d?d:e),this._trailBmpTexture.copy(c.BORDER_DEFAULT_IMAGE,0,0,f,c.BORDER_DEFAULT_IMAGE.height,a[h-1].x,a[h-1].y,f,null,0==e?0:e>0?.5*Math.PI:.5*-Math.PI,0,.5,d<0?-1:1);d=b.x-a[g-1].x,e=b.y-a[g-1].y,f=Math.abs(0!=d?d:e),this._trailBmpTexture.copy(c.BORDER_DEFAULT_IMAGE,0,0,f,c.BORDER_DEFAULT_IMAGE.height,a[g-1].x,a[g-1].y,f,null,0==e?0:e>0?.5*Math.PI:.5*-Math.PI,0,.5,d<0?-1:1)},c.prototype.drawTrailSegment=function(a){this._borderBmpTexture.clear(),this._trailBmpTexture.clear();for(var b,d,e,f,g=a.length,h=1;h<=g;h++)e=h<g?h:0,b=a[e].x-a[h-1].x,d=a[e].y-a[h-1].y,f=Math.abs(0!=b?b:d),this._borderBmpTexture.copy(c.BORDER_DEFAULT_IMAGE,0,0,f,c.BORDER_DEFAULT_IMAGE.height,a[h-1].x,a[h-1].y,f,null,0==d?0:d>0?.5*Math.PI:.5*-Math.PI,0,.5,b<0?-1:1)}}(Phaser.Sprite)}(TProject||(TProject={}));