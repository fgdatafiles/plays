(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+j3O":function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=i("hDA+"),r=n(i("1kLI")),o=n(i("l9C2")),h=n(i("zMgu")),l=n(i("d0OL")),u=n(i("H3z9")),d=i("QklZ"),c=n(i("Dl/w")),g=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("minigame_delivery_time_abby_spine","abby.json"),this.game.load.spine("minigame_delivery_time_char_1_spine","char_1.json"),this.game.load.spine("minigame_delivery_time_char_2_spine","char_2.json"),this.game.load.spine("minigame_delivery_time_char_3_spine","char_3.json"),this.game.load.spine("minigame_delivery_time_char_4_spine","char_4.json"),this.game.load.spine("minigame_delivery_time_char_5_spine","char_5.json")},i.unload=function(){this.game.cache.removeSpine("minigame_delivery_time_abby_spine"),this.game.cache.removeSpine("minigame_delivery_time_char_1_spine"),this.game.cache.removeSpine("minigame_delivery_time_char_2_spine"),this.game.cache.removeSpine("minigame_delivery_time_char_3_spine"),this.game.cache.removeSpine("minigame_delivery_time_char_4_spine"),this.game.cache.removeSpine("minigame_delivery_time_char_5_spine")},i.activateHud=function(){this.game.hud.activate({id:l.default.MINIGAME_SCROLL})},i.createState=function(){t.prototype.createState.call(this),this.container.onScroll.add(this.onScroll,this),this.container.onScrollFinished.add(this.onScrollFinished,this)},i.createContainer=function(){return new c.default(this.game,{background:!1,width:this.config.width||0,anchor:"anchor"in this.config?this.config.anchor:.5,scroll:this.config.scroll||0,border:this.config.border||0})},i.createMinigame=function(){var t=this;this.enableDeadClick(),this.direction="right";var e=this.dialogue.getCharacter("abby");e.dir=this.direction,e.setTalkAnimation("left"===e.dir?"idle_left_talk":"idle_right_talk"),e.setIdleAnimation("left"===e.dir?"idle_left":"idle_right"),this.parcelHolder=this.game.make.group(0,0),e.addChild(this.parcelHolder),this.currentTargets=[],this.config.targets.forEach((function(e){var i=t.addTarget(e);if(i.onInputDown.add(t.onTargetPress,t),i.onInputOver.add((function(){i.showHighlight()})),i.onInputOut.add((function(){i.hideHighlight()})),e.character&&e.character.spine){var n=new o.default(t.game,e.character);n.x=e.character.x,n.y=e.character.y,n.setIdleAnimation("without_box"),n.setIdle(),t.container.add(n),n.update(),n.enable(),n.onInputDown.add((function(){t.onTargetPress(i)})),i.character=n}})),this.stars=new h.default(this.game),this.topPlaceholder=this.game.make.sprite(0,0),this.cancelPromptTimer(),this.showState(this.config),this.game.controller.isMinigameFinished(this.minigameId)?this.dialogue.interrupt("completed",(function(){t.setPromptTimer()})):this.dialogue.interrupt("not_completed",(function(){t.setPromptTimer()}))},i.update=function(){t.prototype.update.call(this),this.parcelHolder&&this.parcelHolder.update()},i.showState=function(t){this.currentDraggers=[];for(var e=(0,a.shuffle)(t.draggers),i=Math.min(t.min_draggers+Math.floor(Math.random()*(t.max_draggers-t.min_draggers)),e.length);"Parcel 1"===e[i-1].trackingId;)e=(0,a.shuffle)(t.draggers);for(var n=0;n<i;n++)this.addDragger(30*n,270+13*n,e[n].sprite,e[n].highlight,e[n].trackingId);this.currentDragger=null,this.pos=0,this.totalDraggerCount=this.currentDraggers.length,this.wrongAnswers=0,this.container.scrollTo(this.pos,0),this.dialogue.setVariation("parcels_"+this.totalDraggerCount),this.container.enableScrolling(),this.disableDraggers(),this.showNextDragger(),this.updateParcels()},i.onTargetPress=function(t){this.currentDragger&&t&&this.onDroppedOnTarget(this.currentDragger,t)},i.addDragger=function(t,e,i,n,s){void 0===n&&(n=null),void 0===s&&(s=null);var a=new u.default(this.game,"state_spritesheet",{sprite:i,targets:this.currentTargets,highlight:n,trackingId:s});return a.x=t,a.y=e,this.parcelHolder.addChild(a),this.currentDraggers.push(a),a.onStartingDrag.add(this.onStartingDrag,this),a.onDroppedOnTarget.add(this.onDroppedOnTarget,this),a.onRemovedFromTarget.add(this.onRemovedFromTarget,this),a},i.onScroll=function(t){this.onInteraction(),this.currentDragger&&"mouseDrag"===this.currentDragger.dragState&&this.currentDragger.onMouseInputDown();var e="";if(t<this.pos?e="left":t>this.pos&&(e="right"),this.pos=t,""===e)this.stoppedMoving();else{this.direction=e,this.updateParcels(),this.killScrollFinishedTimer();var i=this.dialogue.getCharacter("abby");i.dir=e,i.setTalkAnimation("left"===i.dir?"walk_left_talk":"walk_right_talk"),i.setIdleAnimation("left"===i.dir?"walk_left":"walk_right")}},i.killScrollFinishedTimer=function(){this.scrollFinishedTimer&&(this.game.time.events.remove(this.scrollFinishedTimer),this.scrollFinishedTimer=null)},i.stoppedMoving=function(){var t=this;this.killScrollFinishedTimer(),this.scrollFinishedTimer=this.game.time.events.add(100,(function(){var e=t.dialogue.getCharacter("abby");e.setTalkAnimation("left"===e.dir?"idle_left_talk":"idle_right_talk"),e.setIdleAnimation("left"===e.dir?"idle_left":"idle_right")}))},i.onScrollFinished=function(){this.killScrollFinishedTimer(),this.stoppedMoving()},i.promptHighlights=function(){this.timesPrompted%2==0&&this.currentTargets.forEach((function(t){t.playHighlight()}))},i.getPromptVO=function(){return this.timesPrompted%2==1?"prompt_1":"prompt_2"},i.updateParcels=function(){"left"===this.direction?this.parcelHolder.x=160:this.parcelHolder.x=300},i.showNextDragger=function(){0===this.currentDraggers.length?this.stateComplete():(this.currentDragger=this.currentDraggers.pop(),this.currentDragger.enable())},i.onStartingDrag=function(t){this.onInteraction();var e=t.id.substr(5);this.dialogue.setVariation("parcel_"+e),this.dialogue.interrupt("parcel_number"),t.bringToTop()},i.onDroppedOnTarget=function(t,e){this.onInteraction(),null===e?t.returnHome():e.canAcceptDraggable(t)?this.onCorrectTarget(t,e):this.onIncorrectTarget(t,e)},i.onCorrectTarget=function(t,e){var i=this,n=this.totalDraggerCount-this.currentDraggers.length;this.trackGA({action:"QuestionCA",label:"Question Asked_"+t.trackingId+"_Question Sequence_"+n+"_Player Answer_"+e.trackingId}),this.trackDL({event:"gameQuestionCA",questionAsked:t.trackingId,questionNumber:n,playerAnswer:e.trackingId}),e.empty(),t.lockToTarget(e),e.character.setIdleAnimation("with_box"),e.character.setIdle(),this.stars.burst(e),this.removeDragger(t),this.game.sounds.playSFX(d.SFX_DROP,{volume:.5}),this.game.sounds.playSFX(d.SFX_CORRECT,{volume:.5}),this.wrongAnswers=0,0===this.currentDraggers.length?this.stateComplete():this.dialogue.play("piece_added",(function(){i.setPromptTimer(),i.showNextDragger()}))},i.onIncorrectTarget=function(t,e){var i=this.totalDraggerCount-this.currentDraggers.length;if(this.trackGA({action:"QuestionWA",label:"Question Asked_"+t.trackingId+"_Question Sequence_"+i+"_Player Answer_"+e.trackingId}),this.trackDL({event:"gameQuestionWA",questionAsked:t.trackingId,questionNumber:i,playerAnswer:e.trackingId}),t.returnHome(),this.game.sounds.playSFX(d.SFX_DROP,{volume:.5}),this.game.sounds.playSFX(d.SFX_INCORRECT,{volume:.5}),this.wrongAnswers++,this.dialogue.setVariation("target_"+t.id.substr(5)),this.wrongAnswers<3)this.dialogue.play("piece_wrong_"+this.wrongAnswers);else{this.dialogue.play("piece_wrong_3"),t.playHighlight(),this.showCorrectDropperHighlights(t,!0);var n=this.getPossibleTargets(t);n.length>0&&this.container.scrollTo(n[0].x)}},i.stateComplete=function(){this.container.disableScrolling(),this.dialogue.interrupt("all_pieces_added"),t.prototype.stateComplete.call(this)},i.shutdown=function(){this.parcelHolder&&(this.parcelHolder.destroy(),this.parcelHolder=null),this.currentDragger=null,this.container.onScroll.remove(this.onScroll,this),this.container.onScrollFinished.remove(this.onScrollFinished,this),t.prototype.shutdown.call(this)},e}(r.default);e.default=g},0:function(t,e,i){t.exports=i("vGYV")},"1kLI":function(t,e,i){"use strict";var n=i("R6lU");i("j3Ef"),i("7EEF"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("44Ot")),r=n(i("WOvi")),o=n(i("H3z9")),h=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.createMinigame=function(){this.enableDeadClick(),this.topPlaceholder=this.game.make.sprite(0,0),t.prototype.createMinigame.call(this)},i.showState=function(t){var e=this;this.currentTargets=[],t.targets.forEach((function(t){e.addTarget(t)})),this.currentDraggers=[],t.draggers.forEach((function(t){"x"in t&&"y"in t?e.addDragger(t.x,t.y,t.sprite,t.highlight,t.trackingId):"position"in t&&e.addDragger(e.config.positions[t.position].x,e.config.positions[t.position].y,t.sprite,t.highlight,t.trackingId)})),this.container.add(this.topPlaceholder)},i.addTarget=function(t){var e=new r.default(this.game,"state_spritesheet",t,this);return"x"in t&&"y"in t?(e.x=t.x,e.y=t.y):"position"in t&&(e.x=this.config.positions[t.position].x,e.y=this.config.positions[t.position].y),this.container.add(e),this.currentTargets.push(e),e},i.promptHighlights=function(){this.getFloatingDraggers().forEach((function(t){t.playHighlight()}))},i.promptRandomHighlight=function(){var t=this.getFloatingDraggers();t.length>0&&t[Math.floor(Math.random()*t.length)].playHighlight()},i.showCorrectDropperHighlights=function(t,e){void 0===e&&(e=!1),this.getPossibleTargets(t).forEach((function(t){e?t.playHighlight((function(){t.playHighlight()})):t.playHighlight()}))},i.disableTargets=function(t){void 0===t&&(t=!1),this.currentTargets.forEach((function(e){t&&(e.visible=!1),e.disable()}))},i.enableTargets=function(){this.currentTargets.forEach((function(t){t.visible=!0,t.enable()}))},i.getTargetsInGroup=function(t){return this.currentTargets.filter((function(e){return e.group===t}))},i.addDragger=function(t,e,i,n,s){void 0===n&&(n=null),void 0===s&&(s=null);var a=new o.default(this.game,"state_spritesheet",{sprite:i,targets:this.currentTargets,highlight:n,trackingId:s});return a.x=t,a.y=e,this.container.add(a),this.currentDraggers.push(a),a.onStartingDrag.add(this.onStartingDrag,this),a.onDroppedOnTarget.add(this.onDroppedOnTarget,this),a.onRemovedFromTarget.add(this.onRemovedFromTarget,this),a},i.copyDragger=function(t){return this.addDragger(t.originalPosition.x,t.originalPosition.y,t.data.sprite,t.data.highlight,t.data.trackingId)},i.removeDragger=function(t){t.onStartingDrag.removeAll(),t.onDroppedOnTarget.removeAll(),t.onRemovedFromTarget.removeAll(),t.destroy(),this.currentDraggers=this.currentDraggers.filter((function(e){return e!==t}))},i.disableDraggers=function(){this.currentDraggers.forEach((function(t){t.disable()}))},i.enableDraggers=function(){this.currentDraggers.forEach((function(t){t.enable()}))},i.onStartingDrag=function(t){this.onInteraction(),this.container.swap(t,this.topPlaceholder),t.bringToTop()},i.onDroppedOnTarget=function(t,e){this.onInteraction(),this.container.swap(t,this.topPlaceholder),null!==e&&e.canAcceptDraggable(t)&&e.bringToTop(),this.topPlaceholder.bringToTop(),null===e?t.returnHome():e.canAcceptDraggable(t)?(e.empty(),t.lockToTarget(e),this.stars.burst(e)):t.returnHome(),this.allTargetsFull()&&this.stateComplete()},i.onRemovedFromTarget=function(t){t.returnHome()},i.getFloatingDraggers=function(){var t=[];return this.currentDraggers.forEach((function(e){e.target||t.push(e)})),t},i.getPossibleTargets=function(t){var e=[];return this.currentTargets.forEach((function(i){i.canAcceptDraggable(t)&&e.push(i)})),e},i.getEmptyTargets=function(){var t=[];return this.currentTargets.forEach((function(e){e.isFull()||t.push(e)})),t},i.allTargetsFull=function(){return 0===this.getEmptyTargets().length},i.cleanUp=function(){this.currentDraggers&&this.currentDraggers.forEach((function(t){t.destroy()})),this.currentDraggers=[],this.currentTargets=[],t.prototype.cleanUp.call(this)},i.shutdown=function(){this.topPlaceholder&&(this.topPlaceholder.destroy(),this.topPlaceholder=null),t.prototype.shutdown.call(this)},e}(a.default);e.default=h},"2BaL":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("TEuq"),s=function(){function t(t,e,i){this.game=t,this.audiospriteID=e,this.audioData=i||{},this.currentAudioID=null,this.currentAudioSpriteID=null,this.pauseTimer=null,this.currentlyPlaying=!1}var e=t.prototype;return e.play=function(t,e){void 0===e&&(e=null),this.onComplete=e,this.playAudioPiece(this.audioData[t])},e.playAudioPiece=function(t){var e=this.audiospriteID;this.game.sounds.checkSfxExists(t,e)?this.game.sounds.playSFX(t,{spriteID:e,onComplete:this.onAudioComplete,onCompleteScope:this})&&(this.currentAudioID=t,this.currentAudioSpriteID=e):n.Debugger.log("warn","SFX :: could not find audio "+t)},e.onAudioComplete=function(){if(this.currentAudioID=null,this.currentAudioSpriteID=null,this.currentlyPlaying=!1,this.onComplete){var t=this.onComplete;this.onComplete=null,t()}},e.stopPlaying=function(){this.onComplete=null,this.currentlyPlaying=!1,this.currentAudioID&&(this.game.sounds.stopAudioSprite(this.currentAudioID,{spriteID:this.currentAudioSpriteID}),this.currentAudioID=null,this.currentAudioSpriteID=null)},e.destroy=function(){this.stopPlaying()},t}();e.default=s},"2UxH":function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("1kLI")),r=n(i("l9C2")),o=i("QklZ"),h=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("minigame_fire_fighter_dress_spine","skeleton.json")},i.unload=function(){this.game.cache.removeSpine("minigame_fire_fighter_dress_spine")},i.createMinigame=function(){var e=this;this.hero=new r.default(this.game,{spine:"minigame_fire_fighter_dress_spine"}),this.hero.x=-10-this.hero.width/2,this.hero.y=200,this.hero.setIdle(),this.container.add(this.hero),this.hero.update(),this.skins=[],this.correctAnswers=0,t.prototype.createMinigame.call(this),this.lastDialogue=null,this.currentDraggers.forEach((function(t){t.onInputOver.add((function(){e.lastDialogue===t.id&&e.dialogue.currentlySpeaking||(e.lastDialogue=t.id,e.dialogue.play(t.id))}))}))},i.onStartingDrag=function(e){t.prototype.onStartingDrag.call(this,e),this.lastDialogue===e.id&&this.dialogue.currentlySpeaking||(this.lastDialogue=e.id,this.dialogue.interrupt(e.id))},i.promptHighlights=function(){this.timesPrompted%2==0&&t.prototype.promptRandomHighlight.call(this)},i.getPromptVO=function(){return this.timesPrompted%2==1?"prompt_1":"prompt_2"},i.onDroppedOnTarget=function(e,i){if(null!==i){if(!i.canAcceptDraggable(e))return this.trackGA({action:"QuestionWA",label:"Question Asked_"+e.trackingId+"_Question Sequence_1_Player Answer_"+i.trackingId}),this.trackDL({event:"gameQuestionWA",questionAsked:e.trackingId,questionNumber:this.correctAnswers+1,playerAnswer:i.trackingId}),this.game.sounds.playSFX(o.SFX_DROP,{volume:.5}),this.game.sounds.playSFX(o.SFX_INCORRECT,{volume:.5}),void e.returnHome();this.trackGA({action:"QuestionCA",label:"Question Asked_"+e.trackingId+"_Question Sequence_1_Player Answer_"+i.trackingId}),this.trackDL({event:"gameQuestionCA",questionAsked:e.trackingId,questionNumber:this.correctAnswers+1,playerAnswer:i.trackingId}),this.correctAnswers++;var n=e.id.substr(5);this.allTargetsFull()||this.correctAnswers%2!=0||(this.dialogue.interrupt("drop_"+n),this.lastDialogue="drop_"+n),this.skins.push(n),this.hero.setSkins(this.skins),this.game.sounds.playSFX(o.SFX_DROP,{volume:.5}),this.game.sounds.playSFX(o.SFX_CORRECT,{volume:.5}),t.prototype.onDroppedOnTarget.call(this,e,i)}else e.returnHome()},i.stateComplete=function(){this.dialogue.interrupt("dressed"),this.hero.playAnimation("dressed"),t.prototype.stateComplete.call(this)},i.shutdown=function(){this.hero&&(this.hero.destroy(),this.hero=null),t.prototype.shutdown.call(this)},e}(a.default);e.default=h},"3huV":function(t,e,i){"use strict";var n=i("R6lU");i("wiMi"),i("j3Ef"),i("7EEF"),i("RiZp"),i("Wse9"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("M1I4")),a=n(i("86MP")),r=i("QklZ"),o=function(t){function e(e,i){var n,a=void 0===i?{}:i,o=a.background,h=void 0!==o&&o,l=a.width,u=void 0!==l&&l,d=a.anchor,c=void 0===d?.5:d,g=a.scroll,p=void 0===g?0:g;return(n=t.call(this,e)||this).onScroll=new Phaser.Signal,n.onScrollFinished=new Phaser.Signal,n.containerWidth=u||n.game.defaultWidth,n.anchor=c,n.scroll=p,n.scrollPosition=0,n.currentTween=null,n.acceptingInput=!0,n.bg=n.game.make.image(0,0),n.bg.anchor.set(.5),n.bg.x=.5*n.game.defaultWidth,n.bg.y=.5*n.game.defaultHeight,n.addChild(n.bg,0),n.bg.inputEnabled=!0,n.bg.events.onInputDown.add((function(){n.game.sounds.playSFX(r.SFX_DEAD_CLICK,{volume:.5})})),h&&n.setBackground(h),n.container=n.game.make.group(),n.addChild(n.container),n.fg=n.game.make.group(),n.fg.x=0,n.fg.y=0,n.addChild(n.fg),n.mouseOverList=[],n.game.scale.onSizeChange.add(n.positionContainer,(0,s.default)(n)),n.positionContainer(),n.game.hud&&(n.game.hud.setButtonVisibility("right","off"),n.game.hud.setButtonVisibility("left","off")),n}(0,a.default)(e,t);var i=e.prototype;return i.setDialogue=function(t){this.dialogue=t,this.fg.add(t),this.positionContainer()},i.enableScrolling=function(){this.dragHandler||this.containerWidth===this.game.defaultWidth||(this.mouseOverList=[],this.dragStartScrollPosition=null,this.dragStartX=0,this.dragLastX=0,this.dragLastDelta=0,this.dragDistance=0,this.dragHandler=this.game.make.sprite(0,0),this.dragHandler.hitArea=new Phaser.Rectangle(0,0,this.containerWidth,this.game.defaultHeight),this.dragHandler.inputEnabled=!0,this.dragHandler.events.onInputDown.add(this.inputDown,this),this.dragHandler.events.onInputUp.add(this.inputUp,this),this.addChild(this.dragHandler),this.removeChild(this.fg),this.addChild(this.fg),this.game.hud&&(this.game.hud.onScrollLeft.add(this.onScrollLeft,this),this.game.hud.onScrollRight.add(this.onScrollRight,this)),this.updateScrollArrows())},i.disableScrolling=function(){this.dragHandler&&(this.dragHandler.events.onInputDown.remove(this.inputDown,this),this.dragHandler.events.onInputUp.remove(this.inputUp,this),this.removeChild(this.dragHandler),this.dragHandler.destroy(!0),this.dragHandler=null),this.mouseOverList=[],this.game.hud&&(this.game.hud.onScrollLeft.remove(this.onScrollLeft,this),this.game.hud.onScrollRight.remove(this.onScrollRight,this),this.game.hud.setButtonVisibility("right","off"),this.game.hud.setButtonVisibility("left","off"))},i.inputDown=function(){this.dragDistance=0,this.dragging=!0,this.setDragStartPos()},i.setDragStartPos=function(){this.dragStartX=this.game.input.activePointer.x,this.dragLastX=this.game.input.activePointer.x,this.dragStartScrollPosition=this.scrollPosition},i.getChildrenUnderPointer=function(){return this.getChildrenUnderPointerInElement(this.container).concat(this.getChildrenUnderPointerInElement(this.fg))},i.getChildrenUnderPointerInElement=function(t){var e=this,i=[];return t.children.forEach((function(t){t.input&&t.input.checkPointerOver(e.game.input.activePointer)&&t.inputEnabled&&i.push(t),t.children&&i.concat(e.getChildrenUnderPointerInElement(t))})),i},i.update=function(){var e=this;if(t.prototype.update.call(this),this.acceptingInput){var i=this.getChildrenUnderPointer();this.mouseOverList.forEach((function(t){i.includes(t)||(e.mouseOverList=e.mouseOverList.filter((function(e){return e!==t})),t.events&&t.events.onInputOut&&t.inputEnabled&&t.events.onInputOut.dispatch())})),i.forEach((function(t){e.mouseOverList.includes(t)||(e.mouseOverList.push(t),t.events&&t.events.onInputOver&&t.inputEnabled&&t.events.onInputOver.dispatch())}))}if(this.dragging){var n=this.game.input.activePointer.x-this.dragStartX;this.scrollTo(this.dragStartScrollPosition-n,0)?(this.dragLastDelta=this.game.input.activePointer.x-this.dragLastX,this.dragLastX=this.game.input.activePointer.x,this.dragDistance+=Math.abs(this.dragLastDelta)):this.setDragStartPos()}},i.inputUp=function(){this.dragging&&(this.dragging=!1,this.dragDistance<2?this.clicked():this.scrollTo(this.scrollPosition-5*this.dragLastDelta,200))},i.clicked=function(){if(this.acceptingInput){var t=this.getChildrenUnderPointer();t.forEach((function(t){t.events&&t.events.onInputDown&&t.inputEnabled&&t.events.onInputDown.dispatch(t)})),0===t.length&&this.bg.events.onInputDown.dispatch(this.bg)}},i.add=function(t){return this.container.add(t)},i.remove=function(t){return this.container.remove(t)},i.swap=function(t,e){return this.container.swap(t,e)},i.setBackground=function(t){this.bg.loadTexture(t)},i.positionContainer=function(){this.x=(this.game.width-this.game.defaultWidth)/2,this.fg.x=-this.x,this.maxScroll=(this.containerWidth-this.game.width)*(1-this.anchor),this.minScroll=-(this.containerWidth-this.game.width)*this.anchor,this.dialogue&&(this.dialogue.x=this.game.width/2),this.scrollTo(this.scrollPosition,0)},i.onScrollRight=function(){this.scrollTo(this.scrollPosition+this.scroll)},i.onScrollLeft=function(){this.scrollTo(this.scrollPosition-this.scroll)},i.scrollTo=function(t,e){var i=this;if(void 0===e&&(e=600),this.game){if(t<this.minScroll&&(t=this.minScroll,this.scrollPosition===t))return!1;if(t>this.maxScroll&&(t=this.maxScroll,this.scrollPosition===t))return!1;var n=this.game.width*this.anchor-t;return this.x<0&&(n-=this.x),this.currentTween&&(this.currentTween.stop(),this.currentTween=null),e>0?(this.currentTween=this.game.add.tween(this.container).to({x:n},e,Phaser.Easing.Cubic.Out,!0),this.currentTween.onComplete.addOnce((function(){i.onScrollFinished.dispatch(),i.currentTween=null}))):this.container.x=n,this.scrollPosition=t,this.updateScrollArrows(),this.onScroll.dispatch(this.scrollPosition),0===e&&this.onScrollFinished.dispatch(),!0}},i.updateScrollArrows=function(){this.game.hud&&(this.game.hud.setButtonVisibility("right",this.scrollPosition<this.maxScroll),this.game.hud.setButtonVisibility("left",this.scrollPosition>this.minScroll))},i.destroy=function(){this.bg&&(this.bg.destroy(),this.bg=null),this.fg&&(this.fg.destroy(),this.fg=null),this.onScroll&&(this.onScroll.removeAll(),this.onScroll.dispose(),this.onScroll=null),this.onScrollFinished&&(this.onScrollFinished.removeAll(),this.onScrollFinished.dispose(),this.onScrollFinished=null),this.game.scale.onSizeChange.remove(this.positionContainer,this),t.prototype.destroy.call(this,!0)},e}(Phaser.Group);e.default=o},"44Ot":function(t,e,i){"use strict";var n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("d0OL")),r=n(i("3huV")),o=n(i("zMgu")),h=n(i("e1ih")),l=i("TEuq"),u=i("5mNR"),d=i("QklZ"),c=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.init=function(e,i){t.prototype.init.call(this),this.locationId=e,this.minigameId=i,l.Debugger.log("log","Starting minigame",e,i),this.game.controller.setStartTime(this.minigameId,!0),this.trackGA({action:"ComponentStart",label:u.COMPONENT_TYPE_MAP[this.minigameId]+"_"+u.COMPONENT_NAME_MAP[this.minigameId]}),this.trackDL({event:"gameComponentStart",componentType:u.COMPONENT_TYPE_MAP[this.minigameId],componentName:u.COMPONENT_NAME_MAP[this.minigameId]})},i.preload=function(){t.prototype.preload.call(this),this.game.load.baseURL=this.game.urls.getAssetsDirectory()+"minigame/"+this.minigameId.toLowerCase()+"/",this.game.load.pack("minigame","../minigame_assetpack.json",null,this)},i.createState=function(){t.prototype.createState.call(this),this.activateHud(),this.container=this.createContainer(),this.background=this.game.make.sprite(0,0,"state_background"),0===this.config.anchor?this.background.anchor.set(0,0):this.background.anchor.set(.5,0),this.container.add(this.background),this.createMinigame(),this.container.setDialogue(this.dialogue),this.update()},i.createContainer=function(){return new r.default(this.game,{background:!1,width:this.config.width||0,anchor:"anchor"in this.config?this.config.anchor:.5,scroll:this.config.scroll||0})},i.enableDeadClick=function(){var t=this;this.background.inputEnabled=!0,this.background.events.onInputDown.add((function(){t.game.sounds.playSFX(d.SFX_DEAD_CLICK,{volume:.5})}))},i.createMinigame=function(){var t=this;this.stars=new o.default(this.game),this.showState(this.config),this.game.controller.isMinigameFinished(this.minigameId)?this.dialogue.interrupt("completed",(function(){t.setPromptTimer()})):this.dialogue.interrupt("not_completed",(function(){t.setPromptTimer()}))},i.activateHud=function(){this.game.hud.activate({id:a.default.MINIGAME})},i.showState=function(){},i.stateComplete=function(){this.cancelPromptTimer(),this.cleanUp(),this.allStatesComplete()},i.allStatesComplete=function(){this.game.hud.activate({id:a.default.MINIGAME_FINISHED}),this.stars.nova(),this.timer&&this.game.time.events.remove(this.timer),this.timer=this.game.time.events.add(this.getAllStatesCompleteTimeout(),this.finished,this)},i.getAllStatesCompleteTimeout=function(){return 3e3},i.finished=function(){var t=this.game.controller.getElapsedTime(this.minigameId);this.trackGA({action:"ComponentComplete",label:u.COMPONENT_TYPE_MAP[this.minigameId]+"_"+u.COMPONENT_NAME_MAP[this.minigameId],value:t}),this.trackDL({event:"gameComponentComplete",componentType:u.COMPONENT_TYPE_MAP[this.minigameId],componentName:u.COMPONENT_NAME_MAP[this.minigameId],duration:t}),this.game.controller.minigameFinished(this.minigameId),this.game.controller.backToLocation()},i.cleanUp=function(){},i.shutdown=function(){this.cleanUp(),this.timer&&(this.game.time.events.remove(this.timer),this.timer=null),this.background&&(this.background.destroy(),this.background=null),this.stars&&(this.stars.destroy(),this.stars=null),t.prototype.shutdown.call(this)},e}(h.default);e.default=c},"5mNR":function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.COMPONENT_NAME_MAP=e.COMPONENT_TYPE_MAP=e.STATE_MAP=e.MINIGAME_WRITE_A_TUNE=e.MINIGAME_VET_PATIENT=e.MINIGAME_TEETH_CLEANING=e.MINIGAME_STACK_PARCELS=e.MINIGAME_PLAY_THE_DRUMS=e.MINIGAME_MODEL_BUILDING=e.MINIGAME_MICROSCOPE=e.MINIGAME_FIRE_FIGHTER_HOSE=e.MINIGAME_FIRE_FIGHTER_DRESS=e.MINIGAME_EXPERIMENT=e.MINIGAME_DRAFT_A_BUILDING=e.MINIGAME_DELIVERY_TIME=e.LOCATION_VET=e.LOCATION_SCIENTIST=e.LOCATION_MUSICIAN=e.LOCATION_FIRE_FIGHTER=e.LOCATION_DELIVERY_DRIVER=e.LOCATION_ARCHITECT=e.LOCATION_WORLD=e.STATE_CUTSCENE=e.STATE_LOAD=e.STATE_BOOT=void 0;var s=n(i("VawD")),a=n(i("GEMp")),r=n(i("FuGw")),o=n(i("WzEb")),h=n(i("6yTH")),l=n(i("zeHK")),u=n(i("oNqG")),d=n(i("qiOr")),c=n(i("73hI")),g=n(i("cp0e")),p=n(i("+j3O")),m=n(i("M2IA")),f=n(i("vWDz")),_=n(i("2UxH")),v=n(i("io6K")),y=n(i("Xilx")),T=n(i("mTlh")),b=n(i("xH6S")),I=n(i("gjK2")),S=n(i("zhmu")),E=n(i("O58J")),A=n(i("6HLn"));e.STATE_BOOT="STATE_BOOT";e.STATE_LOAD="STATE_LOAD";e.STATE_CUTSCENE="STATE_CUTSCENE";e.LOCATION_WORLD="LOCATION_WORLD";e.LOCATION_ARCHITECT="LOCATION_ARCHITECT";e.LOCATION_DELIVERY_DRIVER="LOCATION_DELIVERY_DRIVER";e.LOCATION_FIRE_FIGHTER="LOCATION_FIRE_FIGHTER";e.LOCATION_MUSICIAN="LOCATION_MUSICIAN";e.LOCATION_SCIENTIST="LOCATION_SCIENTIST";e.LOCATION_VET="LOCATION_VET";e.MINIGAME_DELIVERY_TIME="MINIGAME_DELIVERY_TIME";e.MINIGAME_DRAFT_A_BUILDING="MINIGAME_DRAFT_A_BUILDING";e.MINIGAME_EXPERIMENT="MINIGAME_EXPERIMENT";e.MINIGAME_FIRE_FIGHTER_DRESS="MINIGAME_FIRE_FIGHTER_DRESS";e.MINIGAME_FIRE_FIGHTER_HOSE="MINIGAME_FIRE_FIGHTER_HOSE";e.MINIGAME_MICROSCOPE="MINIGAME_MICROSCOPE";e.MINIGAME_MODEL_BUILDING="MINIGAME_MODEL_BUILDING";e.MINIGAME_PLAY_THE_DRUMS="MINIGAME_PLAY_THE_DRUMS";e.MINIGAME_STACK_PARCELS="MINIGAME_STACK_PARCELS";e.MINIGAME_TEETH_CLEANING="MINIGAME_TEETH_CLEANING";e.MINIGAME_VET_PATIENT="MINIGAME_VET_PATIENT";e.MINIGAME_WRITE_A_TUNE="MINIGAME_WRITE_A_TUNE";var w={STATE_BOOT:s.default,STATE_LOAD:a.default,STATE_CUTSCENE:r.default,LOCATION_ARCHITECT:o.default,LOCATION_DELIVERY_DRIVER:h.default,LOCATION_FIRE_FIGHTER:l.default,LOCATION_MUSICIAN:u.default,LOCATION_SCIENTIST:d.default,LOCATION_VET:c.default,LOCATION_WORLD:g.default,MINIGAME_DELIVERY_TIME:p.default,MINIGAME_DRAFT_A_BUILDING:m.default,MINIGAME_EXPERIMENT:f.default,MINIGAME_FIRE_FIGHTER_DRESS:_.default,MINIGAME_FIRE_FIGHTER_HOSE:v.default,MINIGAME_MICROSCOPE:y.default,MINIGAME_MODEL_BUILDING:T.default,MINIGAME_PLAY_THE_DRUMS:b.default,MINIGAME_STACK_PARCELS:I.default,MINIGAME_TEETH_CLEANING:S.default,MINIGAME_VET_PATIENT:E.default,MINIGAME_WRITE_A_TUNE:A.default};e.STATE_MAP=w;e.COMPONENT_TYPE_MAP={STATE_LOAD:"",STATE_CUTSCENE:"",LOCATION_WORLD:"Simulation",LOCATION_ARCHITECT:"Simulation",MINIGAME_DRAFT_A_BUILDING:"Trace",MINIGAME_MODEL_BUILDING:"Simulation",LOCATION_DELIVERY_DRIVER:"Simulation",MINIGAME_STACK_PARCELS:"Simulation",MINIGAME_DELIVERY_TIME:"MCQ",LOCATION_FIRE_FIGHTER:"Simulation",MINIGAME_FIRE_FIGHTER_HOSE:"Simulation",MINIGAME_FIRE_FIGHTER_DRESS:"Simulation",LOCATION_MUSICIAN:"Simulation",MINIGAME_PLAY_THE_DRUMS:"Simulation",MINIGAME_WRITE_A_TUNE:"Simulation",LOCATION_SCIENTIST:"Simulation",MINIGAME_MICROSCOPE:"Sort",MINIGAME_EXPERIMENT:"MCQ",LOCATION_VET:"Simulation",MINIGAME_TEETH_CLEANING:"Simulation",MINIGAME_VET_PATIENT:"Simulation"};e.COMPONENT_NAME_MAP={STATE_LOAD:"1 Title Screen",STATE_CUTSCENE:"2 Intro Animation Screen",LOCATION_WORLD:"3 City Screen",LOCATION_ARCHITECT:"4a Architect Screen",MINIGAME_DRAFT_A_BUILDING:"4b Architect Blueprint Screen",MINIGAME_MODEL_BUILDING:"4c Architect Model Screen",LOCATION_DELIVERY_DRIVER:"5a Delivery Driver Screen",MINIGAME_STACK_PARCELS:"5b Delivery Stack Screen",MINIGAME_DELIVERY_TIME:"5c Delivery Deliver Screen",LOCATION_FIRE_FIGHTER:"6a Firefighter Screen",MINIGAME_FIRE_FIGHTER_HOSE:"6b Firefighter Hose Screen",MINIGAME_FIRE_FIGHTER_DRESS:"6c Firefighter Dress Up Screen",LOCATION_MUSICIAN:"7a Musician Screen",MINIGAME_WRITE_A_TUNE:"7b Musician Compose Screen",MINIGAME_PLAY_THE_DRUMS:"7c Musician Drum Screen",LOCATION_SCIENTIST:"8a Scientist Screen",MINIGAME_MICROSCOPE:"8b Scientist Microscope Screen",MINIGAME_EXPERIMENT:"8c Scientist Color Mix Screen",LOCATION_VET:"9a Veterinarian Screen",MINIGAME_TEETH_CLEANING:"9b Veterinarian Teeth Brush Screen",MINIGAME_VET_PATIENT:"9c Veterinarian Exam Screen"}},"6HLn":function(t,e,i){"use strict";var n=i("R6lU");i("wiMi"),i("7EEF"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("1kLI")),r=n(i("EHzf")),o=i("QklZ"),h=n(i("GENw")),l=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.addDragger=function(t,e,i,n,s){void 0===n&&(n=null),void 0===s&&(s=null);var a=new r.default(this.game,"state_spritesheet",{sprite:i,targets:this.currentTargets,highlight:n,trackingId:s});return a.x=t,a.y=e,this.container.add(a),this.currentDraggers.push(a),a.onStartingDrag.add(this.onStartingDrag,this),a.onDroppedOnTarget.add(this.onDroppedOnTarget,this),a.onRemovedFromTarget.add(this.onRemovedFromTarget,this),a},i.createMinigame=function(){this.staff=this.game.make.sprite(0,0,"state_spritesheet","staff"),this.staff.x=-this.staff.width/2+11,this.staff.y=61,this.highlight=new h.default(this.game,"state_spritesheet","staff_hl"),this.highlight.anchor.set(.5,0),this.highlight.x=this.staff.x+this.staff.width/2-this.highlight.width/2,this.highlight.y=this.staff.y+this.staff.height/2-this.highlight.height/2,this.container.add(this.highlight),this.highlight.visible=!1,this.container.add(this.staff),t.prototype.createMinigame.call(this)},i.promptHighlights=function(){this.timesPrompted%2==0?t.prototype.promptHighlights.call(this):(this.highlight.visible=!0,this.highlight.playHighlight())},i.getPromptVO=function(){return this.timesPrompted%2==1?"prompt_1":"prompt_2"},i.onDroppedOnTarget=function(e,i){if(this.currentTargets.forEach((function(t){t.setPlaceholder(null)})),null!==i&&i.canAcceptDraggable(e)){this.copyDragger(e),this.game.sounds.playSFX(o.SFX_DROP,{volume:.5});var n=i.getData();this.sfx.play(n.note+"-"+("drag_1"===e.id?"1":"2"))}t.prototype.onDroppedOnTarget.call(this,e,i)},i.onRemovedFromTarget=function(t){this.removeDragger(t)},i.stateComplete=function(){var t=this;this.getFloatingDraggers().forEach((function(t){t.disable(),t.visible=!1})),this.hand=this.game.make.image(0,0,"state_spritesheet","hand"),this.hand.x=-this.hand.width/2,this.hand.y=this.game.defaultHeight-400,this.container.add(this.hand),this.notes=[];var e=!1;this.currentTargets.forEach((function(i){var n=i.getDraggable();if(null!==n){var s=i.getData();t.notes.push({target:i,audio:s.note+"-"+("drag_1"===n.id?"1":"2")}),e||(t.hand.x=i.x,t.hand.y=i.y,e=!0)}})),this.cancelPromptTimer(),this.notes=this.notes.concat(this.notes),this.dialogue.interrupt("all_notes",(function(){t.playNextNote()}))},i.playNextNote=function(){var e=this;if(this.handTween&&(this.handTween.stop(),this.handTween=null),0!==this.notes.length){var i=this.notes.shift();this.handTween=this.game.add.tween(this.hand).to({x:i.target.x,y:i.target.y},200,Phaser.Easing.Cubic.Out,!0),this.sfx.play(i.audio),this.game.time.events.add(800,(function(){e.playNextNote()}))}else t.prototype.stateComplete.call(this)},i.shutdown=function(){this.hand&&(this.hand.destroy(),this.hand=null),this.handTween&&(this.handTween.stop(),this.handTween=null),t.prototype.shutdown.call(this)},e}(a.default);e.default=l},"6R9f":function(t,e,i){"use strict";i("wiMi"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("Bx3X"),s=function(){function t(t){this.game=t,this.transitionToState=!1,this.transitionToParams=!1,this.onTransitionComplete=new Phaser.Signal}var e=t.prototype;return e.clearCurrentState=function(){this.game.state.clearCurrentState()},e.onTransitionInComplete=function(){this.switchStates()},e.switchStates=function(){var t;this.game.sounds.stopAllSFX(),(t=this.game.state).start.apply(t,[this.transitionToState].concat(this.transitionToParams)),this.game.state.onStateChange.addOnce(this.handleStateChanged,this)},e.handleStateChanged=function(){this.onTransitionControllerComplete()},e.onTransitionControllerComplete=function(){this.onTransitionComplete.dispatch(),this.transitionController=null},e.startState=function(t){var e=t.nextState,i=t.nextStateParams;this.useLightWeightTransition=(0,n.doesRequireLightVersion)(),this.transitionToState=e,this.transitionToParams=i,this.switchStates()},t}();e.default=s},"6YV8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGA=function(){null===a&&n.Debugger.warn("GoogleAnalytics not initalised correctly");return a},e.addGoogleAnalyticsPlugin=function(t){var e=t.plugin;return new r(e)};var n=i("TEuq"),s=i("zgbH"),a=null,r=function(){function t(t){var e=this;return a||(a=this,n.Debugger.log("log","GoogleAnalytics plugin registered",t),n.Debugger.log("log","Analytics engine GTM : GTM-K8SKK4C"),this._plugin=t,this.startTime=Date.now(),this.category="",this.screenName="",window.addEventListener("unload",(function(){var t=(Date.now()-e.startTime)/1e3;e.trackGA({action:"Quit",value:t}),e.trackDL({event:"gameQuit",duration:t})})),a)}var e=t.prototype;return e.setScreenName=function(t){this.screenName=t},e.getScreenName=function(){return this.screenName},e.destroy=function(){a=null,this._plugin=null},e.trackGA=function(t){var e=t.action,i=void 0===e?"":e,a=t.label,r=void 0===a?"":a,o=t.value,h=void 0===o?"":o;""===r&&(r="ScreenName_"+this.screenName),n.Debugger.log("log","GA.trackGA",s.GTM_TRACKING_CATEGORY,i,r,h),this._plugin&&this._plugin.event(s.GTM_TRACKING_CATEGORY,i,r,h)},e.trackDL=function(t){t.gameName=s.DL_TRACKING_GAMENAME,t.screenName||(t.screenName=this.screenName),t.language||(t.language="English"),t.timestamp=Date.now(),n.Debugger.log("log","[disabled] GA.trackDL",t)},t}()},"6yTH":function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("abby","abby.json"),this.game.load.spine("location_incidental_am","incidental_am.json"),this.game.load.spine("location_incidental_1","incidental_1.json"),this.game.load.spine("location_incidental_2","incidental_2.json"),this.game.load.spine("location_incidental_3","incidental_3.json"),this.game.load.spine("location_incidental_4","incidental_4.json")},i.unload=function(){this.game.cache.removeSpine("abby"),this.game.cache.removeSpine("location_incidental_am"),this.game.cache.removeSpine("location_incidental_1"),this.game.cache.removeSpine("location_incidental_2"),this.game.cache.removeSpine("location_incidental_3"),this.game.cache.removeSpine("location_incidental_4"),t.prototype.unload.call(this)},e}(n(i("Lzh6")).default);e.default=a},"73hI":function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("elmo","elmo.json"),this.game.load.spine("location_incidental_am","incidental_am.json"),this.game.load.spine("location_incidental_character","incidental_character.json"),this.game.load.spine("location_incidental_1","incidental_1.json"),this.game.load.spine("location_incidental_2","incidental_2.json"),this.game.load.spine("location_incidental_3","incidental_3.json"),this.game.load.spine("location_incidental_4","incidental_4.json")},i.unload=function(){this.game.cache.removeSpine("elmo"),this.game.cache.removeSpine("location_incidental_am"),this.game.cache.removeSpine("location_incidental_character"),this.game.cache.removeSpine("location_incidental_1"),this.game.cache.removeSpine("location_incidental_2"),this.game.cache.removeSpine("location_incidental_3"),this.game.cache.removeSpine("location_incidental_4"),t.prototype.unload.call(this)},e}(n(i("Lzh6")).default);e.default=a},"75Wy":function(t,e,i){"use strict";var n=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("XvIX"),i("/TzG"),i("mizm"),i("pkSX"),i("3Ipg"),i("6WZY"),i("XEfP"),i("388n"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("fKPv")),a=n(i("86MP")),r=n(i("W5ee")),o=n(i("T1LK")),h=i("TEuq");function l(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var u=function(t){function e(e){var i;return(i=t.call(this,e)||this).enabled=!1,i.onButtonSelected=new Phaser.Signal,i.buttons={},i.btnsTopLeft=i.createButtonGroup(o.default.TOP_LEFT),i.btnsTopRight=i.createButtonGroup(o.default.TOP_RIGHT),i.btnsBottomLeft=i.createButtonGroup(o.default.BOTTOM_LEFT),i.btnsBottomRight=i.createButtonGroup(o.default.BOTTOM_RIGHT),i.btnsBottomCenter=i.createButtonGroup(o.default.BOTTOM_CENTER),i.btnsCenter=i.createButtonGroup(o.default.CENTER),i.btnsCenterLeft=i.createButtonGroup(o.default.CENTER_LEFT),i.btnsCenterHardLeft=i.createButtonGroup(o.default.CENTER_HARD_LEFT),i.btnsCenterRight=i.createButtonGroup(o.default.CENTER_RIGHT),i.btnsCenterHardRight=i.createButtonGroup(o.default.CENTER_HARD_RIGHT),i.buttonGroups=[i.btnsTopLeft,i.btnsTopRight,i.btnsBottomLeft,i.btnsBottomRight,i.btnsBottomCenter,i.btnsCenter,i.btnsCenterLeft,i.btnsCenterHardLeft,i.btnsCenterRight,i.btnsCenterHardRight],i}(0,a.default)(e,t);var i=e.prototype;return i.handleSettingsUpdated=function(){this.buttonGroups.forEach((function(t){t.alignButtons()}))},i.createButtonGroup=function(t){var e=new o.default(this.game,t);return this.addChild(e),e},i.createButtons=function(t,e){var i=this,n=!1;t.forEach((function(t){i.createButton(t,e),"exit"===t&&(n=!0)})),n&&this.game.gmi.shouldShowExitButton},i.destroyButtons=function(){var t=this;this.buttonGroups.forEach((function(t){t.removeAllButtons()})),Object.keys(this.buttons).map((function(e){var i=t.buttons[e];return i.onInputDown.remove(t.handleButtonInteraction,t),i.destroy(!0),i=null})),this.buttons={}},i.createButton=function(t,e){var i=this.game.hud.getButtonData(t);if(i){var n=new r.default(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?l(Object(i),!0).forEach((function(e){(0,s.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({game:this.game},i));return n.input.priorityID=e||0,n.previousInputPriorityID=e||0,this.buttons[n.id]=n,n.onInputDown.add(this.handleButtonInteraction,this),this.addToButtonGroup(n,i.position),n}},i.addToButtonGroup=function(t,e){if(e.indexOf(",")>-1){var i=e.split(",");e=i[0],t.overridePos={x:parseInt(i[1]),y:parseInt(i.length>2?i[2]:i[1])}}switch(e){case o.default.TOP_LEFT:this.btnsTopLeft.addButton(t);break;case o.default.TOP_RIGHT:this.btnsTopRight.addButton(t);break;case o.default.BOTTOM_RIGHT:this.btnsBottomRight.addButton(t);break;case o.default.BOTTOM_CENTER:this.btnsBottomCenter.addButton(t);break;case o.default.CENTER:this.btnsCenter.addButton(t);break;case o.default.CENTER_LEFT:this.btnsCenterLeft.addButton(t);break;case o.default.CENTER_HARD_LEFT:this.btnsCenterHardLeft.addButton(t);break;case o.default.CENTER_RIGHT:this.btnsCenterRight.addButton(t);break;case o.default.CENTER_HARD_RIGHT:this.btnsCenterHardRight.addButton(t);break;case o.default.BOTTOM_LEFT:this.btnsBottomLeft.addButton(t);break;default:h.Debugger.log("warn","HudButtons :: unknown group",e)}},i.handleButtonInteraction=function(t){this.onButtonSelected.dispatch(t.id)},i.destroy=function(){this.buttonGroups.forEach((function(t){t.destroy()})),t.prototype.destroy.call(this,!0)},e}(Phaser.Group);e.default=u},BHXi:function(t,e,i){"use strict";i("XvIX"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("TEuq"),s=function(){function t(t){this.game=t,this._finishedMinigames=[],this._visitedLocations=[],this._roundNumbers=[],this._startTimes={},this._tickAwardedMinigames=[],this._achievementAwardedLocations=[],this._playthroughCompleteAwarded=0,this.currentLocationId=null,this.currentMinigameId=null,this.interactionCount=0,this.exhaustPosition={},this.randomExhaustSeed=Math.floor(10*Math.random()),n.Debugger.log("log","Random exhaust seed = ",this.randomExhaustSeed)}var e=t.prototype;return e.setStartTime=function(t){this._startTimes[t]=Date.now()},e.getElapsedTime=function(t){return t in this._startTimes?(Date.now()-this._startTimes[t])/1e3:0},e.getRoundNumber=function(t){var e=this._roundNumbers.indexOf(t);return e>-1?e+1:(this._roundNumbers.push(t),this._roundNumbers.length)},e.getNextExhaust=function(t){return t in this.exhaustPosition?this.exhaustPosition[t]++:this.exhaustPosition[t]=0,this.exhaustPosition[t]},e.getNextRandomExhaust=function(t){return t in this.exhaustPosition?this.exhaustPosition[t]++:this.exhaustPosition[t]=this.randomExhaustSeed,this.exhaustPosition[t]},e.isMinigameFinished=function(t){return-1!==this._finishedMinigames.indexOf(t)},e.minigameFinished=function(t){this.isMinigameFinished(t)||this._finishedMinigames.push(t)},e.getPlaythroughCompleteAwarded=function(){return this._playthroughCompleteAwarded},e.playthroughCompleteAwarded=function(){this._playthroughCompleteAwarded++},e.isLocationVisited=function(t){return-1!==this._visitedLocations.indexOf(t)},e.locationVisited=function(t){this.isLocationVisited(t)||this._visitedLocations.push(t)},e.isLocationAchievementAwarded=function(t){return-1!==this._achievementAwardedLocations.indexOf(t)},e.locationAchievementAwarded=function(t){this.isLocationAchievementAwarded(t)||this._achievementAwardedLocations.push(t)},e.getLocationAchievementCount=function(){return this._achievementAwardedLocations.length},e.isMinigameTickAwarded=function(t){return-1!==this._tickAwardedMinigames.indexOf(t)},e.minigameTickAwarded=function(t){this.isMinigameTickAwarded(t)||this._tickAwardedMinigames.push(t)},e.parseLoadedData=function(){},t}();e.default=s},Bx3X:function(t,e,i){"use strict";i("XvIX"),i("ZKpu"),i("6WZY"),i("XEfP"),i("LBAN"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.isIE11=e.isIE=e.doesRequireLightVersion=e.isNewAppleDevice=e.isOldAppleDevice=e.isOldDevice=e.isNewiPad=e.isOldiPad=e.isNewiPhone=e.isOldiPhone=e.isKindle=e.isOldAndroid=e.isSamsungGalaxyTabE=e.isWindowsPhone=e.isTescoHudl=e.isGalaxyTab4=e.isNexus7=e.isiOS=e.getiOSversion=e.getiPadModel=e.getiPhoneModel=e.BRIM_PADDING=void 0;e.BRIM_PADDING=25;var n=["KFSUWI","KFAUWI","KFDOWI","KFGIWI","KFFOWI","KFMEWI","KFTBWI","KFARWI","KFASWI","KFSAWA","KFSAWI","KFAPWA","KFAPWI","KFAPWA","KFAPWI","KFSOWI","KFJWA","KFJWI","KFTT","KFOT","Kindle Fire"],s=function(){if(/iPhone/.test(navigator.userAgent)&&!window.MSStream){var t=(window.screen.width>window.screen.height?window.screen.height:window.screen.width)/(window.screen.width>window.screen.height?window.screen.width:window.screen.height),e=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;return t===320/480&&1===e?"iPhone 1/3g/3gs":t===640/960&&2===e?"iPhone 4/4s":t===640/1136&&2===e?"iPhone 5/5c/5s":t===750/1334&&2===e?"iPhone 6/6s/7/8":t===640/1136&&2===e?"iPhone 6/6s/7/8 (Display Zoom)":.5625===t&&3===e?"iPhone 6/6s/7 Plus/8 Plus":t===1125/2001&&3===e?"iPhone 6/6s/7 Plus/8 Plus (Display Zoom)":t===375/812&&3===e?"iPhone X":""}return""};e.getiPhoneModel=s;var a=function(){if(!/iPad/.test(navigator.userAgent)||window.MSStream)return"";var t=(window.screen.width>window.screen.height?window.screen.height:window.screen.width)/(window.screen.width>window.screen.height?window.screen.width:window.screen.height),e=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;return.75===t?1===e?"iPad 1/2 | Mini 1":"iPad 3-5, iPad Air 1-2, iPad Mini 2-4, iPad Pro 9.7":.75===t?"iPad Pro 10.5":t===1024/1366?"iPad Pro 12.9, Pro 12.9 (2nd Gen)":void 0};e.getiPadModel=a;e.getiOSversion=function(){var t=window.navigator.userAgent,e=t.indexOf("OS ");return(t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1)&&e>-1?window.Number(t.substr(e+3,3).replace("_",".")):0};e.isiOS=function(){return!!navigator.platform.match(/iPhone|iPod|iPad/)};var r=function(){return/nexus 7/i.test(navigator.userAgent.toLowerCase())};e.isNexus7=r;var o=function(){return/sm-t530|sm-t330|gt-n8010/i.test(navigator.userAgent.toLowerCase())};e.isGalaxyTab4=o;var h=function(){return/hudl/i.test(navigator.userAgent.toLowerCase())};e.isTescoHudl=h;var l=function(){return/windows phone|iemobile/i.test(navigator.userAgent.toLowerCase())};e.isWindowsPhone=l;var u=function(){var t=/sm-t377./g.test(navigator.userAgent.toLowerCase()),e=/sm-t56./g.test(navigator.userAgent.toLowerCase());return t||e};e.isSamsungGalaxyTabE=u;var d=function(){var t=navigator.userAgent.indexOf("Nexus 7")>-1,e=navigator.userAgent.indexOf("SM-T530")>-1||navigator.userAgent.indexOf("SM-T330")>-1||navigator.userAgent.indexOf("GT-N8010")>-1;return t||e};e.isOldAndroid=d;var c=function(){for(var t=0;t<n.length;t++)if(navigator.userAgent.indexOf(n[t])>-1)return!0;return!1};e.isKindle=c;var g=function(){var t=s();return"iPhone 1/3g/3gs"===t||"iPhone 4/4s"===t||"iPhone 5/5c/5s"===t};e.isOldiPhone=g;var p=function(){return"iPhone X"===s()};e.isNewiPhone=p;var m=function(){return"iPad 1/2 | Mini 1"===a()};e.isOldiPad=m;var f=function(){var t=a();return"iPad Pro 10.5"===t||"iPad Pro 12.9, Pro 12.9 (2nd Gen)"===t};e.isNewiPad=f;e.isOldDevice=function(){var t=g()||m()||c()||d();return t};e.isOldAppleDevice=function(){return g()||m()};e.isNewAppleDevice=function(){return p()||f()};e.doesRequireLightVersion=function(){return!!(m()||g()||c()||o()||r()||h()||l()||u())};e.isIE=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}return!1};e.isIE11=function(){return!!window.MSInputMethodContext&&!!document.documentMode}},CDWU:function(t,e,i){"use strict";var n=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("fKPv")),a=n(i("C9uT")),r=i("TEuq"),o=i("QklZ");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){(0,s.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var u={id:null,volume:.07},d=function(){function t(t){var e=t.game;this.game=e,this.sounds={},this.sprites={},this.backgroundMusic=l({},u),this._soundVolume=1,this._sfxVolume=1,this._musicVolume=1,this._voVolume=1}var e=t.prototype;return e.startup=function(){this.game.sound.mute=!1,this.touchLock()},e.decode=function(t,e,i){this.game.sound.setDecodedCallback(t,e,i)},e.touchLock=function(){this.game.sound.usingWebAudio&&"suspended"===this.game.sound.context.state&&(r.Debugger.log("log","AudioContext is suspended"),this.game.sound.setTouchLock(),this.isTouchLocked=!0)},e.checkAudioContext=function(){var t=this;this.isTouchLocked&&this.game.sound.usingWebAudio&&(r.Debugger.log("log","AudioContext attempting resume"),this.game.sound.context.resume().then((function(){r.Debugger.log("log","AudioContext resumed successfully"),t.isTouchLocked="suspended"===t.game.sound.context.state})))},e.addSound=function(t,e){this.sounds[t]=this.game.make.audio(e),this.sounds[t].stop()},e.removeSound=function(t,e){this.sounds[t]&&(this.sounds[t].destroy(),this.game.cache.removeSound(e))},e.addAudioSprite=function(t){var e=t.id;this.sprites[e]=this.game.add.audioSprite(e)},e.removeAudioSprite=function(t){var e=this,i=t.id;this.sprites[i]&&(this.sprites[i].isPlaying&&this.sprites[i].stop(),Object.keys(this.sprites[i].sounds).forEach((function(t){e.sprites[i].sounds[t].isPlaying&&e.sprites[i].sounds[t].stop(),e.sprites[i].sounds[t].destroy(),e.game.cache.removeSound(t),delete e.sprites[i].sounds[t]})),this.game.cache.removeJSON(i),this.game.cache.removeSound(i),delete this.sprites[i])},e.checkSfxExists=function(t,e){return this.sprites[e]&&this.sprites[e].sounds[t]},e.sfxExists=function(t,e){return!!this.checkSfxExists(t,e)||(r.Debugger.log("warn","Cant find "+t+" in audiosprite "+e+", has it been added? (config.json and assetpack)"),!1)},e.playSFX=function(t,e){return void 0===e&&(e={}),e.volume=(e.volume||1)*this._sfxVolume,this.playAudioSprite(t,e)},e.playVO=function(t,e){return void 0===e&&(e={}),e.volume=(e.volume||1)*this._voVolume,this.playAudioSprite(t,e)},e.playAudioSprite=function(t,e){void 0===e&&(e={});var i=e,n=i.volume,s=void 0===n?1:n,a=i.loop,r=void 0!==a&&a,o=i.ignoreIfPlaying,h=void 0!==o&&o,l=i.delay,u=void 0===l?null:l,d=i.onComplete,c=void 0===d?null:d,g=i.onCompleteScope,p=void 0===g?null:g,m=i.spriteID,f=void 0===m?"generic_audiosprite":m;if(!this.sfxExists(t,f))return!1;if(!0!==Phaser.Device.ie||!this.game.paused){if(this.checkAudioContext(),u)return e.delay=null,this.game.time.events.add(u,this.playAudioSprite,this,t,e),!0;if(this.isTouchLocked){if(!c)return!1;var _=new Phaser.Signal;_.addOnce((function(){c.call(p)})),_.dispatch()}else{if(h&&this.sprites[f].get(t).isPlaying)return!1;this.sprites[f].get(t).loop=r,this.sprites[f].get(t).markers[t].loop=r;var v=this.sprites[f].play(t,s);c&&v.onStop.addOnce((function(){c.call(p)}))}return!0}},e.stopAudioSprite=function(t,e){void 0===e&&(e={});var i=e.spriteID,n=void 0===i?"":i;this.sprites[n]?this.sprites[n].get(t).isPlaying&&this.sprites[n].stop(t):this.sounds[t]&&this.sounds[t].isPlaying&&this.sounds[t].stop()},e.stopAllSFX=function(){for(var t in this.sprites)if(this.sprites.hasOwnProperty(t))for(var e in this.sprites[t].sounds)this.sprites[t].sounds.hasOwnProperty(e)&&this.sprites[t].sounds[e].isPlaying&&e!==o.SFX_CLICK&&this.sprites[t].sounds[e].stop()},e.clearBackgroundMusic=function(){this.backgroundMusic=l({},u)},e.setBackgroundMusic=function(t){this.sounds[t]?this.backgroundMusic.id=t:r.Debugger.log("warn","Background music "+t+" not found.")},e.stopBackgroundMusic=function(){var t=this.backgroundMusic.id;this.stopSound(t)},e.playBackgroundMusic=function(){var t=this.backgroundMusic,e=t.id,i=t.volume,n=this.sounds[e];n&&this.allowMusic&&(n.paused||n.isPlaying?n.paused&&(n.volume=0,n.resume(),n.fadeTo(500,i)):n.play("",0,i,!0)),this.game.paused&&this.pauseBackgroundMusic()},e.pauseBackgroundMusic=function(){var t=this.backgroundMusic.id,e=this.sounds[t];e&&e.pause()},e.stopSound=function(t){this.sounds[t]&&(this.sounds[t].pausedPosition=0,this.sounds[t].isPlaying&&this.sounds[t].stop())},e.setVolume=function(t,e){this.backgroundMusic.id===t?(this.backgroundMusic.volume=e,this.sounds[t].fadeTo(1e3,e)):this.sounds[t].volume=e},(0,a.default)(t,[{key:"soundVolume",set:function(t){this.game.sound.volume=t,this._soundVolume=t}},{key:"sfxVolume",set:function(t){for(var e in this._sfxVolume=t,this.sounds)e!==this.backgroundMusic.id&&(this.sounds[e].mute=0===this._sfxVolume)}},{key:"musicVolume",set:function(t){this._musicVolume=t,1===this._musicVolume?this.playBackgroundMusic():this.pauseBackgroundMusic()}},{key:"voVolume",set:function(t){this._voVolume=t}},{key:"allowSFX",get:function(){return 1===this._sfxVolume}},{key:"allowMusic",get:function(){return 1===this._musicVolume}},{key:"allowVo",get:function(){return 1===this._voVolume}}]),t}();e.default=d},"Dl/w":function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(e,i){var n;return void 0===i&&(i={}),(n=t.call(this,e,i)||this).border=i.border||0,n.currentX=n.scrollPosition,n}(0,s.default)(e,t);var i=e.prototype;return i.positionContainer=function(){this.x=0,this.maxScroll=this.containerWidth-this.border,this.minScroll=this.border,this.scrollTo(this.scrollPosition,0)},i.update=function(){if(t.prototype.update.call(this),this.currentX<this.minScroll?this.currentX=this.minScroll:this.currentX>this.maxScroll&&(this.currentX=this.maxScroll),this.dialogue){var e=this.game.width/2;this.currentX<e?this.dialogue.x=this.currentX:this.currentX>this.containerWidth-e?this.dialogue.x=this.game.width+this.currentX-this.containerWidth:this.dialogue.x=e}var i=this.game.width/2;this.currentX<i?this.container.x=0:this.currentX>this.containerWidth-i?this.container.x=-(this.containerWidth-2*i):this.container.x=-(this.currentX-i)},i.scrollTo=function(t,e){var i=this;if(void 0===e&&(e=600),this.game)return!(t<this.minScroll&&(t=this.minScroll,this.scrollPosition===t))&&(!(t>this.maxScroll&&(t=this.maxScroll,this.scrollPosition===t))&&(this.currentTween&&(this.currentTween.stop(),this.currentTween=null),e>0?(this.currentTween=this.game.add.tween(this).to({currentX:t},e,Phaser.Easing.Linear.None,!0),this.currentTween.onComplete.addOnce((function(){i.onScrollFinished.dispatch(),i.currentTween=null}))):this.currentX=t,this.scrollPosition=t,this.updateScrollArrows(),this.onScroll.dispatch(this.scrollPosition),0===e&&this.onScrollFinished.dispatch(),!0))},e}(n(i("3huV")).default);e.default=a},"DpE+":function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("44Ot")),r=n(i("GENw")),o=i("hDA+"),h=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.showState=function(t,e){void 0===e&&(e="state_spritesheet"),this.drawColour=t.colour,this.drawRadius=t.radius,this.guideRadius=t.guideRadius,this.targetPercent=t.percent/100,this.currentGuide=this.game.make.sprite(t.x,t.y,e,t.guide),t.highlight?(this.highlight=new r.default(this.game,e,t.highlight),this.highlight.x=this.currentGuide.x+(this.currentGuide.width-this.highlight.width)/2,this.highlight.y=this.currentGuide.y+(this.currentGuide.height-this.highlight.height)/2,this.container.add(this.highlight),this.highlight.visible=!1):this.highlight=null,this.container.add(this.currentGuide),this.guideMask=this.game.add.graphics(t.x,t.y),this.guideMask.beginFill(16777215),this.guideMask.drawRect(0,0,0,0),this.guideMask.endFill(),this.container.add(this.guideMask),this.currentGuide.mask=this.guideMask,this.currentFinalTarget=this.game.make.sprite(t.x,t.y,e,t.target),this.currentTarget=this.game.make.sprite(0,0,e,t.target),this.currentBitmap=this.game.make.bitmapData(this.currentTarget.width,this.currentTarget.height),this.currentBitmap.clear().draw(this.currentTarget).update(),this.currentPixelTarget=this.countPixels(this.currentBitmap),this.currentBitmap.clear().update(),this.currentDrawing=this.game.make.image(t.x,t.y),this.currentBitmap.add(this.currentDrawing),this.container.add(this.currentDrawing),this.guidePath=t.guidePath,this.drawNextGuidePathLine()},i.drawNextGuidePathLine=function(){if(this.cancelPromptTimer(),this.onGuideDrawing(),this.guidePath&&0!==this.guidePath.length){var t=this.guidePath.shift(),e=t.startX,i=t.startY,n=t.endX,s=t.endY;this.drawGuidePathLine(e,i,n,s)}else this.onGuideFinished(),this.startDrawing()},i.drawGuidePathLine=function(t,e,i,n){var s=this,a=20*Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))/400,r=(i-t)/a,o=(n-e)/a;this.unmaskGuide(t,e);var h=0,l=this.game.time.events.loop(50,(function(){h++,s.unmaskGuide(t+r*h,e+o*h),h>=a&&(s.game.time.events.remove(l),s.drawNextGuidePathLine())}))},i.playHighlight=function(){this.highlight&&this.highlight.playHighlight()},i.showHighlight=function(t){this.highlight?this.highlight.showHighlight(t):t&&t()},i.hideHighlight=function(t){this.highlight?this.highlight.hideHighlight(t):t&&t()},i.stopHighlight=function(){this.highlight&&this.highlight.stopHighlight()},i.unmaskGuide=function(t,e){this.guideMask.beginFill(16777215),this.guideMask.drawCircle(t,e,this.guideRadius),this.guideMask.endFill()},i.startDrawing=function(){this.setPromptTimer(),this.finishingAnimation=!1,this.currentGuide.mask=null,this.guideMask.destroy(),this.guideMask=null,this.unmaskedPixelCount=0,this.game.input.addMoveCallback(this.onInputMoved,this)},i.countPixels=function(t){for(var e=0,i=t.imageData.data,n=3;n<i.length;n+=16)i[n]>0&&e++;return e},i.completeAnimation=function(){var t=this;this.container.add(this.currentFinalTarget);var e=this.game.add.graphics(this.currentFinalTarget.x,this.currentFinalTarget.y);e.beginFill(16777215),e.drawRect(0,0,0,0),e.endFill(),this.container.add(e),this.currentFinalTarget.mask=e;var i=this.currentFinalTarget.height/7.5,n=0,s=this.game.time.events.loop(50,(function(){n++,e.beginFill(16777215),e.drawRect(0,0,t.currentFinalTarget.width,n*i),e.endFill(),n>=7.5&&(t.game.time.events.remove(s),t.currentFinalTarget.mask=null,e.destroy(),t.stateComplete())}))},i.onInputMoved=function(){if(!this.game.paused){var t=(0,o.getRelativePosition)(this.game.input.activePointer,this.currentDrawing);if(t.x>-this.drawRadius&&t.x<this.currentTarget.width+this.drawRadius&&t.y>-this.drawRadius&&t.y<this.currentTarget.height+this.drawRadius&&(this.currentBitmap.circle(t.x,t.y,this.drawRadius,this.drawColour),this.currentBitmap.blendDestinationIn().draw(this.currentTarget).blendReset().update()),!this.finishingAnimation){var e=this.countPixels(this.currentBitmap);this.unmaskedPixelCount<e-30&&(this.onLineDrawing(),this.onInteraction()),this.unmaskedPixelCount=e,e>this.currentPixelTarget*this.targetPercent&&(this.finishingAnimation=!0,this.stopHighlight(),this.completeAnimation())}}},i.onLineDrawing=function(){},i.onGuideDrawing=function(){},i.onGuideFinished=function(){},i.cleanUp=function(){this.game.input.deleteMoveCallback(this.onInputMoved,this),this.currentBitmap&&(this.currentBitmap.destroy(),this.currentBitmap=null),this.currentGuide&&(this.currentGuide.destroy(),this.currentGuide=null),this.guideMask&&(this.guideMask.destroy(),this.guideMask=null),this.currentDrawing&&(this.currentDrawing.destroy(),this.currentDrawing=null),t.prototype.cleanUp.call(this)},e}(a.default);e.default=h},EHzf:function(t,e,i){"use strict";var n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("C9uT")),a=n(i("86MP")),r=n(i("lxir")),o=n(i("GENw")),h=i("QklZ"),l=i("hDA+"),u=function(t){function e(e,i,n){var s;return(s=t.call(this,e)||this).spritesheet=i,s.data=n,s.isButton=!0,s.isEnabled=!1,s.onStartingDrag=new Phaser.Signal,s.onDroppedOnTarget=new Phaser.Signal,s.onRemovedFromTarget=new Phaser.Signal,s.onInputOver=new Phaser.Signal,s.onInputOut=new Phaser.Signal,s.id=n.sprite,s.trackingId=n.trackingId||s.id,s.dragState=null,s.target=null,s.allTargets=n.targets,s.sprite=s.game.make.image(0,0,s.spritesheet,n.sprite),s.sprite.anchor.set(.5),n.highlight?(s.highlight=new o.default(s.game,s.spritesheet,n.highlight),s.highlight.x-=s.highlight.width/2,s.highlight.y-=s.highlight.height/2,s.addChild(s.highlight),s.highlight.visible=!1):s.highlight=null,s.addChild(s.sprite),s.lastHoverTarget=null,s.enable(),s}(0,a.default)(e,t);var i=e.prototype;return i.onMouseInputDown=function(){null===this.dragState?(this.dragState="mouseDrag",this.onStartDrag()):this.onStopDrag()},i.update=function(){if(t.prototype.update.call(this),null!==this.dragState){if("mouseDrag"===this.dragState){var e=(0,l.getRelativePosition)(this.game.input.activePointer,this.parent);this.x=e.x,this.y=e.y}var i=this.findTarget(!0);i!==this.lastHoverTarget&&null!==this.lastHoverTarget&&this.lastHoverTarget.setPlaceholder(null),null!==i&&i.setPlaceholder(this),this.lastHoverTarget=i}},i.onTouchStartDrag=function(){this.dragState="touchDrag",this.onStartDrag()},i.onTouchStopDrag=function(){"touchDrag"===this.dragState&&this.onStopDrag()},i.onStartDrag=function(){this.originalPosition||(this.originalPosition=this.position.clone()),this.dragStartTime=(new Date).getTime(),this.dragStartPosition=this.position.clone(),this.onStartingDrag.dispatch(this),this.game.sounds.playSFX(h.SFX_PICKUP,{volume:.5})},i.onStopDrag=function(){this.dragState=null,this.onDroppedOnTarget.dispatch(this,this.findTarget(!0)||this.findTarget(!1))},i.removeFromTarget=function(){this.target&&this.onRemovedFromTarget.dispatch(this)},i.lockToTarget=function(t){this.target=t,this.target.setDraggable(this);var e=(0,l.getRelativePosition)(this.target,this.parent);this.x=e.x,this.y=e.y,this.visible=!1},i.returnHome=function(){if(this.target){var t=this.target;this.target=null,t._removeDraggable()}this.originalPosition&&this.position.copyFrom(this.originalPosition),this.visible=!0,this.hideHighlight(),this.enable()},i.findTarget=function(t){void 0===t&&(t=!0);for(var e=null,i=-1,n=0;n<this.allTargets.length;n++){var s=this.allTargets[n];if((!t||s.canAcceptDraggable(this))&&s.collide(this)){var a=(0,l.getRelativePosition)(this,s),r=Math.abs(a.x-s.midPoint.x),o=Math.abs(a.y-s.midPoint.y),h=r*r+o*o;(null===e||i>h)&&(e=s,i=h)}}return e},i.enable=function(){this.sprite&&!this.isEnabled&&(this.isEnabled=!0,this.inputEnabled=!0,this.input.enableDrag(),!0===Phaser.Device.desktop?this.events.onInputDown.add(this.onMouseInputDown,this):(this.events.onInputDown.add(this.onTouchStartDrag,this),this.events.onInputUp.add(this.onTouchStopDrag,this)),this.events.onInputOut.add(this.handleInputOut,this),this.events.onInputOver.add(this.handleInputOver,this),this.isOver&&this.handleInputOver())},i.disable=function(){this.isEnabled&&(this.isEnabled=!1,this.input&&this.input.disableDrag(),!0===Phaser.Device.desktop?this.events.onInputDown.remove(this.onMouseInputDown,this):(this.events.onInputDown.remove(this.onTouchStartDrag,this),this.events.onInputUp.remove(this.onTouchStopDrag,this)),this.events.onInputOut.remove(this.handleInputOut,this),this.events.onInputOver.remove(this.handleInputOver,this),this.inputEnabled=!1,this.hideHighlight(),this.isOver&&this.handleInputOut())},i.handleInputOver=function(){this.isEnabled&&(this.showHighlight(),this.onInputOver.dispatch(this))},i.handleInputOut=function(){this.isEnabled&&(this.hideHighlight(),this.onInputOut.dispatch(this))},i.destroy=function(){this.onStartingDrag&&(this.onStartingDrag.removeAll(),this.onStartingDrag.dispose(),this.onStartingDrag=null),this.onDroppedOnTarget&&(this.onDroppedOnTarget.removeAll(),this.onDroppedOnTarget.dispose(),this.onDroppedOnTarget=null),this.onRemovedFromTarget&&(this.onRemovedFromTarget.removeAll(),this.onRemovedFromTarget.dispose(),this.onRemovedFromTarget=null),this.onInputOver&&(this.onInputOver.removeAll(),this.onInputOver.dispose(),this.onInputOver=null),this.onInputOut&&(this.onInputOut.removeAll(),this.onInputOut.dispose(),this.onInputOut=null),this.events.onInputUp.removeAll(),this.events.onInputOut.removeAll(),this.events.onInputOver.removeAll(),this.sprite&&(this.sprite.destroy(),this.sprite=null),this.lastHoverTarget=null,t.prototype.destroy.call(this,!0)},(0,s.default)(e,[{key:"width",get:function(){return this.sprite.width}},{key:"height",get:function(){return this.sprite.height}},{key:"isOver",get:function(){return!(!this.input||!0!==Phaser.Device.desktop)&&this.input.checkPointerOver(this.game.input.mousePointer)}}]),e}(r.default);e.default=u},FuGw:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("d0OL")),r=n(i("e1ih")),o=n(i("3huV")),h=i("6YV8"),l=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.baseURL=this.game.urls.getAssetsDirectory()+"cutscene/",this.game.load.pack("cutscene","assetpack.json",null,this),this.game.load.spine("abby","abby.json"),this.game.load.spine("elmo","elmo.json")},i.createState=function(){var e=this;t.prototype.createState.call(this),this.game.controller.setStartTime("cutscene"),this.container=new o.default(this.game,{anchor:.5,scroll:0}),this.background=this.game.make.sprite(0,0,"state_background"),this.background.x=-this.game.defaultWidth/2,this.background.y=-this.background.height/2,this.container.bg.addChild(this.background),this.game.hud.activate({id:a.default.CUTSCENE}),this.game.hud.onSkip.add(this.onSkip,this),this.container.add(this.dialogue);var i=this.background.x+this.game.defaultWidth-this.background.width;this.game.add.tween(this.background).to({x:i},15e3,Phaser.Easing.Linear.None,!0),this.dialogue.interrupt("dialogue_1","dialogue_2","dialogue_3",(function(){e.game.time.events.add(20,(function(){e.game.controller.cutsceneFinished()}))}))},i.onSkip=function(){var t=this.game.controller.getElapsedTime("cutscene");(0,h.getGA)().trackGA({action:"Skip",value:t}),(0,h.getGA)().trackDL({event:"gameSkip",duration:t}),this.game.controller.cutsceneFinished()},i.shutdown=function(){this.game.hud.onSkip.removeAll(),t.prototype.shutdown.call(this)},i.unload=function(){this.game.cache.removeSpine("abby"),this.game.cache.removeSpine("elmo"),t.prototype.unload.call(this)},e}(r.default);e.default=l},GEMp:function(t,e,i){"use strict";var n=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("COu/"),i("a/rO"),i("96V2"),i("YY9M"),i("vw/H"),i("q4B+"),i("GPcm"),i("UUvd"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("LClc")),r=n(i("x1tP")),o=i("Bx3X"),h=i("6YV8"),l=n(i("e1ih")),u=n(i("3huV")),d=n(i("Z3wv")),c=n(i("2BaL")),g=n(i("d0OL")),p=i("QklZ"),m=i("5mNR"),f=i("zgbH"),_=n(i("Z9oQ"));function v(t){var e=0;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return y(t,e)}(t)))return function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(e=t[Symbol.iterator]()).next.bind(e)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var T=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){this.loadComplete=!1,this.container=new u.default(this.game),this.loadDisplay=new a.default(this.game,!1),this.game.add.existing(this.loadDisplay),this.background=this.game.make.sprite(0,0,"preloader","background"),this.background.anchor.set(.5,0),this.background.y=-this.game.defaultHeight/2,this.container.bg.addChild(this.background),this.assetsReady=!1,this.loadAppAssetPacks()},i.loadAppAssetPacks=function(){this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.crossOrigin="anonymous",(0,o.doesRequireLightVersion)(),(0,o.isIE11)(),this.game.load.pack("load","assetpack.json",null,this);var t=(0,o.isIE11)()?"assetpack_audio_ie11.json":"assetpack_audio.json";this.game.load.pack("audio",t,null,this),!0===Phaser.Device.desktop&&this.game.load.pack("gel_desktop",t,null,this),!1===(0,o.doesRequireLightVersion)()?this.game.load.pack("sprites_64",t,null,this):this.game.load.pack("sprites_32",t,null,this)},i.loadUpdate=function(){this.loadDisplay.setProgress(this.game.load.progress/100)},i.create=function(){this.assetsReady=!0,this.game.sounds.startup()},i.update=function(){!this.loadComplete&&this.assetsReady&&(this.loadComplete=!0,this.loadDisplay.setProgress(1),this.handleLoadComplete())},i.handleLoadComplete=function(){var t=this;this.game.app_config=this.game.cache.getJSON("app_config"),this.game.ui_config=this.game.cache.getJSON("ui_config");var e=["generic_audiosprite","state_audiosprite","background_music"];if(this.game.sounds.addAudioSprite({id:"generic_audiosprite"}),this.game.sounds.addAudioSprite({id:"state_audiosprite"}),this.game.sounds.addSound("background_music","background_music"),this.game.controller=new r.default(this.game),this.game.controller.init(this.game.app_config),!0===Phaser.Device.desktop){for(var i,n=v(this.game.app_config.audioSpritesGel);!(i=n()).done;){var s=i.value;this.game.sounds.addAudioSprite({id:s}),e.push(s)}this.game.starPointer=new _.default(this.game)}var a=this.game.springRollApplication.getPlugin("GoogleAnalytics");(0,h.addGoogleAnalyticsPlugin)({plugin:a}).setScreenName(m.COMPONENT_NAME_MAP[m.STATE_LOAD]),this.game.sounds.decode(e,this.animateWelcomeScreen,this),this.decodeSoundsCallback=this.game.time.events.add(f.DECODE_TIMEOUT_SPEED,(function(){t.decodeSoundsCallback=null,t.loadDisplay&&t.loadDisplay.loadBar&&t.loadDisplay.loadBar.copy&&t.loadDisplay.loadBar.copy.setText(t.game.copy.getCopy("loading"))}))},i.animateWelcomeScreen=function(){var t=this;this.decodeSoundsCallback&&(this.game.time.events.remove(this.decodeSoundsCallback),this.decodeSoundsCallback=null);var e=this.loadDisplay.y-200;this.game.sounds.setBackgroundMusic("background_music"),this.game.sounds.playBackgroundMusic(),this.game.add.tween(this.loadDisplay).to({y:e},500,Phaser.Easing.Linear.None,!0),this.game.add.tween(this.loadDisplay).to({alpha:0},400,Phaser.Easing.Linear.None,!0),this.game.time.events.add(1e3,(function(){t.loadDisplay.destroy(),t.loadDisplay=null})),this.config=this.game.cache.getJSON("state_config"),this.game.cache.getJSON("state_captions")&&this.game.springRollCaptionsPlugin.setData(this.game.cache.getJSON("state_captions")),this.dialogue=new d.default(this.game,"state_audiosprite",this.config.dialogue),this.sfx=new c.default(this.game,"state_audiosprite",this.config.sfx),this.container.bg.events.onInputDown.removeAll(),this.container.bg.events.onInputDown.add((function(){t.game.sounds.playSFX(p.SFX_CLICK,{volume:.5}),t.trackGA({action:"Play",label:"NotPlayButton"}),t.trackDL({event:"gamePlay",buttonName:"NotPlayButton"}),t.game.controller.startNewGame()})),this.animateParallax(2e3)},i.animateParallax=function(t){var e=this,i=this.game.make.sprite(0,0,"state_spritesheet","buildings");i.anchor.set(.5,0),i.y=this.game.defaultHeight/2,this.container.bg.addChild(i);var n=this.game.make.sprite(0,0,"state_spritesheet","characters");n.anchor.set(.5,0),n.y=this.game.defaultHeight/2+400-n.height,this.container.bg.addChild(n),this.dialogue.y=400,this.container.add(this.dialogue);var s=this.game.make.sprite(0,0,"state_spritesheet","logo");s.anchor.set(.5,0),s.y=this.game.defaultHeight/2,this.container.bg.addChild(s),this.game.add.tween(this.background).to({y:this.game.defaultHeight/2-this.background.height},t,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(i).to({y:this.game.defaultHeight/2-i.height},t,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(n).to({y:this.game.defaultHeight/2-n.height},t,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(this.dialogue).to({y:0},t,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(s).to({y:20-this.game.defaultHeight/2},t,Phaser.Easing.Cubic.Out,!0),this.game.time.events.add(t,(function(){e.introAnimFinished()}))},i.introAnimFinished=function(){var t=this;this.game.hud.activate({id:g.default.WELCOME}),this.game.hud.fadeIn(),this.dialogue.interrupt("welcome_1",(function(){t.dialogue.interrupt("welcome_2",(function(){t.game.time.events.add(1400,(function(){t.game.hud.pulseButton("newgame")})),t.dialogue.interrupt("start_prompt",(function(){t.setPromptTimer()}))}))}))},i.promptUser=function(){this.setLastPrompt(),this.setPromptTimer(),this.trackGA({action:"TimeoutPlay"}),this.trackDL({event:"gameTimeoutPlay"}),this.game.hud.pulseButton("newgame")},i.unload=function(){this.game.cache.removeJSON("state_config"),this.game.cache.removeJSON("state_captions"),this.game.cache.removeSound("state_audiosprite"),this.game.cache.removeJSON("state_audiosprite-audioatlas"),this.game.cache.removeTextureAtlas("state_spritesheet")},i.shutdown=function(){this.loadDisplay&&(this.loadDisplay.destroy(),this.loadDisplay=null),t.prototype.shutdown.call(this)},e}(l.default);e.default=T},GENw:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("C9uT")),a=n(i("86MP")),r=i("zgbH"),o=function(t){function e(e,i,n){var s;return(s=t.call(this,e)||this).hl=s.game.make.sprite(0,0,i,n),s.addChild(s.hl),s.alpha=0,s}(0,a.default)(e,t);var i=e.prototype;return i.playHighlight=function(t){var e=this;void 0===t&&(t=null),this.showHighlight((function(){e.hideHighlight((function(){t&&t()}))}))},i.showHighlight=function(t){var e=this;void 0===t&&(t=null),this.tween&&this.tween.stop(),this.game?(this.visible=!0,this.tween=this.game.add.tween(this).to({alpha:1},r.HIGHLIGHT_SPEED,Phaser.Easing.Sinusoidal.InOut,!0),this.tween.onComplete.addOnce((function(){e.tween=null,t&&t()}))):t&&t()},i.hideHighlight=function(t){var e=this;void 0===t&&(t=null),this.tween&&this.tween.stop(),this.game?(this.tween=this.game.add.tween(this).to({alpha:0},r.HIGHLIGHT_SPEED,Phaser.Easing.Sinusoidal.InOut,!0),this.tween.onComplete.addOnce((function(){e.tween=null,t&&t()}))):t&&t()},i.stopHighlight=function(){this.tween&&(this.tween.stop(),this.tween=null),this.alpha=0,this.visible=!1},i.destroy=function(){t.prototype.destroy.call(this,!0)},(0,s.default)(e,[{key:"width",get:function(){return this.hl.width}},{key:"height",get:function(){return this.hl.height}}]),e}(n(i("pE5k")).default);e.default=o},H3z9:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(){return t.apply(this,arguments)||this}return(0,s.default)(e,t),e.prototype.update=function(){t.prototype.update.call(this),null!==this.dragState&&this.lastHoverTarget&&(this.onStopDrag(),this.dragState=null)},e}(n(i("EHzf")).default);e.default=a},LClc:function(t,e,i){"use strict";var n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("3huV")),r=n(i("ssJl")),o=function(t){function e(e,i){var n;if(void 0===i&&(i=!0),n=t.call(this,e,{background:!1})||this,i){var s=n.game.make.sprite(0,0,"preloader","background");s.anchor.set(.5,.5),n.bg.addChild(s)}var a=n.game.make.sprite(0,0,"preloader","logo");return a.x=(n.game.defaultWidth-a.width)/2,a.y=200,n.addChild(a),n.onAnimationComplete=new Phaser.Signal,n.loadBar=new r.default(n.game),n.loadBar.x=-n.loadBar.width/2,n.loadBar.y=(n.game.defaultHeight-n.loadBar.height)/2,n.add(n.loadBar),n}(0,s.default)(e,t);var i=e.prototype;return i.setProgress=function(t){this.loadBar.setProgress(Math.max(0,Math.min(1,t)))},i.animateCompleteSequence=function(){this.animateOutTween=this.game.add.tween(this).to({alpha:0},200,Phaser.Easing.Quadratic.Out,!0,20),this.animateOutTween.onComplete.add(this.handleAnimateSequenceComplete,this)},i.handleAnimateSequenceComplete=function(){this.onAnimationComplete.dispatch()},i.destroy=function(){this.onAnimationComplete.removeAll(),this.animateOutTween&&(this.animateOutTween.stop(),this.game.tweens.remove(this.animateOutTween)),this.loadBar.destroy(),this.onAnimationComplete=null,this.animateOutTween=null,this.loadBar=null,t.prototype.destroy.call(this,!0)},e}(a.default);e.default=o},Lzh6:function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("d0OL")),r=n(i("3huV")),o=n(i("e1ih")),h=n(i("l9C2")),l=n(i("W5ee")),u=n(i("zMgu")),d=i("6YV8"),c=i("TEuq"),g=i("QklZ"),p=i("5mNR"),m=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.init=function(e){t.prototype.init.call(this),this.locationId=e,this.exhaustPosition={},c.Debugger.log("log","Starting location",e)},i.preload=function(){t.prototype.preload.call(this),this.game.load.baseURL=this.game.urls.getAssetsDirectory()+"location/"+this.locationId.toLowerCase()+"/",this.game.load.pack("location","../location_assetpack.json",null,this)},i.createState=function(){t.prototype.createState.call(this),this.popup=null,this.activateHud(),this.game.hud.onClose.add(this.onClose,this),this.container=this.createContainer(),this.createLocation(this.config),this.container.setDialogue(this.dialogue),this.popup?this.popup.bringToTop():this.container.enableScrolling(),this.update()},i.createContainer=function(){return new r.default(this.game,{background:!1,width:this.config.width||0,anchor:"anchor"in this.config?this.config.anchor:.5,scroll:this.config.scroll||0})},i.activateHud=function(){this.game.hud.activate({id:a.default.LOCATION})},i.createLocation=function(){var t=this;this.stars=new u.default(this.game);var e=[],i=[],n=[];this.currentButtons=[],this.locationButtons=[];var s=this.game.make.sprite(0,0,"state_background");0===this.config.anchor?s.anchor.set(0,0):s.anchor.set(.5,0),this.container.add(s);var a=0;this.config.layers.forEach((function(s){s.buttons&&s.buttons.forEach((function(s){var a="minigame"===s.destination_type,r=a&&t.game.controller.isMinigameFinished(s.destination_id),o=r&&s.sprite_complete||s.sprite,h=r&&s.highlight_complete||s.highlight,l=t.addButton(s.x,s.y,o,s.label,h);if(s.disabled||l.onInputDown.add(t.handleButton.bind(t,s,l),t),"location"===s.destination_type&&(l.locationId=s.destination_id,t.locationButtons.push(l)),a&&(e.push(s.destination_id),r)){i.push(s.destination_id);var u=t.game.make.sprite(0,0,"generic_sprites","check_icon");u.anchor.set(.5),u.x=s.check_icon.x,u.y=s.check_icon.y,u.visible=!1,l.check=u,l.addChild(u),t.game.controller.isMinigameTickAwarded(s.destination_id)?l.minigameJustFinished=!1:(l.minigameJustFinished=!0,n.push(s.destination_id),t.game.controller.minigameTickAwarded(s.destination_id))}})),s.incidentals&&s.incidentals.forEach((function(e){var i=!0;if(e.hidden?i=!1:e.require_finished_minigame&&(i=i&&t.game.controller.isMinigameFinished(e.require_finished_minigame)),i){var n=null;e.spine?((n=new h.default(t.game,e)).x=e.x,n.y=e.y,n.setIdle(),n.enable(),t.container.add(n),n.update(),n.isButton=!0,n.id=a,a++,n.onInputDown.add(t.handleIncidental.bind(t,e,n),t),n.onInputOver.add(t.handleIncidentalOver.bind(t,e,n),t)):e.sprite&&((n=t.addButton(e.x,e.y,e.sprite,e.label,e.highlight)).id=a,a++,n.onInputDown.add(t.handleIncidental.bind(t,e,n),t),n.onInputOver.add(t.handleIncidentalOver.bind(t,e,n),t)),null!==n&&e.dialogue_character_id&&t.dialogue.addCharacter(e.dialogue_character_id,n)}})),s.static&&s.static.forEach((function(e){e.sprite?t.container.add(t.game.make.sprite(e.x,e.y,"state_spritesheet",e.sprite)):e.asset&&t.container.add(t.game.make.sprite(e.x,e.y,e.asset))}))})),e.length>0&&i.length===e.length?this.game.controller.isLocationAchievementAwarded(this.locationId)?(this.showCheckMarks(),this.setPromptTimer()):(this.showAchievementPopup(),this.game.controller.locationAchievementAwarded(this.locationId)):n.length>0?(this.showCheckMarks(),this.game.sounds.playSFX(g.SFX_MINIGAME_COMPLETE,{volume:.5,onComplete:function(){t.playSubsequentVisitAudio()}})):this.game.controller.isLocationVisited(this.locationId)?(this.showCheckMarks(),this.playSubsequentVisitAudio()):(this.locationId!==p.LOCATION_WORLD&&(this.game.controller.setStartTime(this.locationId),this.trackGA({action:"RoundStart",label:"Round Number_"+this.game.controller.getRoundNumber(this.locationId)+"_Round Name_"+p.COMPONENT_NAME_MAP[this.locationId]}),this.trackDL({event:"gameRoundStart",roundName:p.COMPONENT_NAME_MAP[this.locationId],roundNumber:this.game.controller.getRoundNumber(this.locationId)})),this.game.controller.locationVisited(this.locationId),this.showCheckMarks(),this.playFirstVisitAudio())},i.showAchievementPopup=function(){if(this.config.allCompleteTrackingName){var t=this.game.controller.getElapsedTime(this.locationId);this.trackGA({action:"RoundComplete",label:"Round Number_"+this.game.controller.getRoundNumber(this.locationId)+"_Round Name_"+p.COMPONENT_NAME_MAP[this.locationId],value:t}),this.trackDL({event:"gameRoundComplete",roundName:p.COMPONENT_NAME_MAP[this.locationId],roundNumber:this.game.controller.getRoundNumber(this.locationId),duration:t}),this.trackGA({action:"Achievement",label:"Achievement_"+this.config.allCompleteTrackingName}),this.trackDL({event:"gameAchievement",achievementType:"Achievement_"+this.config.allCompleteTrackingName})}this.cancelPromptTimer(),this.showCompletePopup(),this.dialogue.interrupt("all_games_finished")},i.showCheckMarks=function(){var t=this;this.currentButtons.forEach((function(e){e.check?(e.check.visible=!0,e.check.scale.set(.1,.1),t.game.add.tween(e.check.scale).to({x:1,y:1},800,Phaser.Easing.Bounce.Out,!0),e.minigameJustFinished&&t.game.time.events.add(600,(function(){t.stars.burst(e,.5,.5)}))):e.playHighlight()}))},i.promptHighlights=function(){this.currentButtons.forEach((function(t){t.playHighlight()}))},i.playSubsequentVisitAudio=function(){var t=this;this.dialogue.interrupt("subsequent_visit",(function(){t.setPromptTimer()}))},i.playFirstVisitAudio=function(){var t=this;this.dialogue.interrupt("first_visit",(function(){t.setPromptTimer()}))},i.showCompletePopup=function(){this.game.hud.activate({id:a.default.POPUP}),this.container.acceptingInput=!1,this.popup=this.game.make.sprite(0,0,"state_complete"),this.popup.x=(this.game.width-this.popup.width)/2,this.popup.y=this.game.height-this.popup.height,this.overlay=this.game.make.graphics(0,0),this.overlay.beginFill(14400,.6),this.overlay.moveTo(0,0),this.overlay.lineTo(this.game.defaultWidth,0),this.overlay.lineTo(this.game.defaultWidth,this.game.defaultHeight),this.overlay.lineTo(0,this.game.defaultHeight),this.overlay.lineTo(0,0),this.overlay.endFill(),this.overlay.inputEnabled=!0,this.overlay.events.onInputDown.addOnce(this.onClose,this),this.container.fg.add(this.overlay),this.container.fg.add(this.popup),this.stars.nova(),this.game.sounds.playSFX(g.SFX_REWARD_SCREEN,{volume:.5})},i.onClose=function(){this.onInteraction(),this.container.acceptingInput=!0,this.overlay.destroy(),this.popup.destroy(),this.container.enableScrolling(),this.activateHud(),this.game.sounds.playSFX(g.SFX_MINIGAME_COMPLETE,{volume:.5}),this.showCheckMarks()},i.addButton=function(t,e,i,n,s){var a=new l.default({game:this.game,hierarchy:"PRIMARY",costume:i,sheet:"state_spritesheet",label:n,labelLeft:!0,aria_label_id:"sprite",highlight:s});return a.x=t,a.y=e,a.enable(),this.container.add(a),this.currentButtons.push(a),a},i.trackIncidentalInteraction=function(t){t.trackingName&&(this.trackGA({action:"ObjectClick",label:"Object_"+t.trackingName+"_Screen Name_"+(0,d.getGA)().getScreenName()}),this.trackDL({event:"gameInteraction",objectName:"Object_"+t.trackingName+"_Screen Name_"+(0,d.getGA)().getScreenName()}))},i.handleIncidental=function(t,e){var i=this;this.onInteraction();var n=null;if(t.interact){if(!e.isIdle())return;n=t.interact}if(this.trackIncidentalInteraction(t),t.sfx&&t.dialogue){var s=this.exhaustPosition[e.id]||0;"vo"===(1===s&&"vo"===t.initialAudio||0===s&&"sfx"===t.initialAudio?"sfx":"vo")?(this.cancelPromptTimer(),this.dialogue.interrupt(t.dialogue,(function(){i.setPromptTimer()})),t.dontAnimateOnVO&&(n=null)):this.sfx.play(t.sfx),this.exhaustPosition[e.id]=(s+1)%2}else if(t.sfx)if(Array.isArray(t.sfx)){var a=this.exhaustPosition[e.id]||0;this.sfx.play(t.sfx[a]),this.exhaustPosition[e.id]=(a+1)%t.sfx.length}else this.sfx.play(t.sfx);else t.dialogue&&(this.dialogue.speakingCharacter!==e&&(this.cancelPromptTimer(),this.dialogue.interrupt(t.dialogue,(function(){i.setPromptTimer()}))),t.dontAnimateOnVO&&(n=null));n&&e.playAnimation(n)},i.handleIncidentalOver=function(t){(t.sfxOver||t.dialogueOver)&&(this.onInteraction(),!0===Phaser.Device.desktop&&(t.sfxOver&&this.sfx.play(t.sfxOver),t.dialogueOver&&this.dialogue.play(t.dialogueOver)))},i.handleButton=function(t,e){var i=this;this.onInteraction(),t.trackingName&&(this.trackGA({action:"MenuClick",label:"MenuButton_"+t.trackingName+"_Screen Name_"+(0,d.getGA)().getScreenName()}),this.trackDL({event:"gameMenuClick",objectName:"MenuButton_"+t.trackingName+"_Screen Name_"+(0,d.getGA)().getScreenName()})),this.container.disableScrolling(),this.game.hud.deactivate(),this.currentButtons.forEach((function(t){t.onInputDown.removeAll()})),this.dialogue.stopDialogue(),t.sfx?this.sfx.play(t.sfx,(function(){i.processButton(t,e)})):t.dialogue?this.dialogue.interrupt(t.dialogue,(function(){i.processButton(t,e)})):this.processButton(t,e)},i.processButton=function(t){switch(t.destination_type){case"minigame":this.game.controller.enterMinigame(t.destination_id);break;case"location":this.game.controller.enterLocation(t.destination_id)}},i.shutdown=function(){this.locationButtons=[],this.currentButtons.forEach((function(t){t.onInputDown.removeAll(),t.destroy()})),this.currentButtons=[],this.stars.destroy(),this.game.hud.onClose.removeAll(),t.prototype.shutdown.call(this)},e}(o.default);e.default=m},M2IA:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.init=function(e,i){t.prototype.init.call(this,e,i),this.building=this.game.controller.getNextRandomExhaust(this.minigameId)%3+1},i.preload=function(){t.prototype.preload.call(this),this.game.load.pack("state_extra","extra_assetpack"+this.building+".json",null,this)},i.showState=function(t){this.dialogue.setVariation("building_"+this.building);var e=t.buildings[this.building-1];this.steps=e.pieces,this.currentStep=0,this.showNextStep()},i.onLineDrawing=function(){var t=this;this.onLineDrawingFinishedTimeout?this.game.time.events.remove(this.onLineDrawingFinishedTimeout):this.game.sounds.playSFX("draw_line",{volume:.5,spriteID:"state_audiosprite",loop:!0}),this.onLineDrawingFinishedTimeout=this.game.time.events.add(200,(function(){t.game.sounds.stopAudioSprite("draw_line",{spriteID:"state_audiosprite"}),t.onLineDrawingFinishedTimeout=null}))},i.onGuideDrawing=function(){this.game.sounds.playSFX("line_appear",{volume:.5,spriteID:"state_audiosprite",loop:!0})},i.onGuideFinished=function(){this.game.sounds.stopAudioSprite("line_appear",{spriteID:"state_audiosprite"})},i.showNextStep=function(){t.prototype.showState.call(this,this.steps[this.currentStep],"building"+this.building+"_spritesheet")},i.getPromptVO=function(){return this.timesPrompted%2==1?this.unmaskedPixelCount>50?"prompt_2":"prompt_1":"prompt_3"},i.stateComplete=function(){this.cleanUp(),this.currentStep++,this.currentStep>=this.steps.length?(this.dialogue.interrupt("all_pieces_finished"),t.prototype.stateComplete.call(this)):(this.dialogue.play("piece_finished"),this.showNextStep())},e}(n(i("DpE+")).default);e.default=a},O58J:function(t,e,i){"use strict";var n=i("R6lU");i("j3Ef"),i("XvIX"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("1kLI")),r=n(i("l9C2")),o=i("QklZ"),h=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.init=function(e,i){t.prototype.init.call(this,e,i),this.animal=this.game.controller.getNextRandomExhaust(this.minigameId)%3+1},i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("minigame_vet_patient_spine_"+this.animal,"animal_"+this.animal+".json")},i.unload=function(){this.game.cache.removeSpine("minigame_vet_patient_spine_"+this.animal)},i.createMinigame=function(){this.patient=new r.default(this.game,{spine:"minigame_vet_patient_spine_"+this.animal}),this.patient.x=-this.patient.width/2,this.patient.y=120,this.patient.setIdle(),this.container.add(this.patient),this.patient.update(),t.prototype.createMinigame.call(this)},i.showState=function(e){this.dialogue.setVariation("animal_"+this.animal),t.prototype.showState.call(this,e),this.targetsToHit=this.currentTargets,this.draggerVOPlayed=[],this.setIncidentalSoundTimeout()},i.allTargetsFull=function(){return 0===this.targetsToHit.length},i.promptHighlights=function(){this.timesPrompted%2==0&&t.prototype.promptHighlights.call(this)},i.getPromptVO=function(){return this.timesPrompted%2==1?"prompt_1":"prompt_2"},i.onStartingDrag=function(e){t.prototype.onStartingDrag.call(this,e),-1!==this.draggerVOPlayed.indexOf(e.id)||this.dialogue.currentlySpeaking||(this.draggerVOPlayed.push(e.id),this.dialogue.play(e.id))},i.setIncidentalSoundTimeout=function(){var t=this;this.cancelIncidentalSoundTimeout(),this.incidentalSoundTimeout=this.game.time.events.add(8e3,(function(){t.dialogue.currentlySpeaking||t.game.sounds.playSFX("sfx_animal_"+t.animal,{volume:.5,spriteID:"state_audiosprite"}),t.setIncidentalSoundTimeout()}))},i.cancelIncidentalSoundTimeout=function(){this.incidentalSoundTimeout&&(this.game.time.events.remove(this.incidentalSoundTimeout),this.incidentalSoundTimeout=null)},i.onDroppedOnTarget=function(t,e){var i=this;if(this.onInteraction(),null!==e&&e.canAcceptDraggable(t)){switch(this.container.swap(t,this.topPlaceholder),null!==e&&e.canAcceptDraggable(t)&&e.bringToTop(),this.topPlaceholder.bringToTop(),e.empty(),t.lockToTarget(e),this.stars.burst(e),t.id){case"drag_1":switch(this.animal){case 1:e.overlay.x=-110,e.overlay.y=170;break;case 2:e.overlay.x=-80,e.overlay.y=200;break;case 3:e.overlay.x=-110,e.overlay.y=230}break;case"drag_2":switch(this.animal){case 1:e.overlay.x=0,e.overlay.y=200;break;case 2:case 3:e.overlay.x=0,e.overlay.y=220}this.patient.bringToTop();break;case"drag_3":switch(this.animal){case 1:e.overlay.x=130,e.overlay.y=155;break;case 2:e.overlay.x=165,e.overlay.y=170;break;case 3:e.overlay.x=105,e.overlay.y=265}}if("drag_2"===t.id){var n=this.game.make.sprite(0,0,"state_spritesheet","animal"+this.animal+"_weight");n.anchor.set(.5,0),n.x=-n.width/2+30,n.y=14,n.alpha=0,e.overlay.addChild(n),this.game.add.tween(n).to({alpha:1},1350,Phaser.Easing.Cubic.InOut,!0,0,0,!0)}this.cancelPromptTimer(),this.targetsToHit=this.targetsToHit.filter((function(t){return t!==e})),this.disableDraggers(),this.disableTargets(!0),e.visible=!0,this.game.sounds.playSFX(o.SFX_DROP,{volume:.5}),this.sfx.play("drop_"+t.id.substr(5),(function(){i.animationFinished(e)}))}else t.returnHome()},i.animationFinished=function(t){this.allTargetsFull()?(this.dialogue.interrupt("all_dropped"),this.stateComplete()):(t.empty(),this.enableTargets(),this.enableDraggers(),this.setPromptTimer())},i.getAllStatesCompleteTimeout=function(){return 3500},i.cleanUp=function(){this.disableTargets(!0),this.cancelIncidentalSoundTimeout(),t.prototype.cleanUp.call(this)},i.shutdown=function(){this.patient&&(this.patient.destroy(),this.patient=null),t.prototype.shutdown.call(this)},e}(a.default);e.default=h},QklZ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SFX_DROP=e.SFX_PICKUP=e.SFX_MINIGAME_COMPLETE=e.SFX_REWARD_SCREEN=e.SFX_STARBURST=e.SFX_INCORRECT=e.SFX_CORRECT=e.SFX_ROLLOVER=e.SFX_DEAD_CLICK=e.SFX_CLICK=void 0;e.SFX_CLICK="click";e.SFX_DEAD_CLICK="dead_click";e.SFX_ROLLOVER="rollover";e.SFX_CORRECT="correct";e.SFX_INCORRECT="incorrect";e.SFX_STARBURST="starburst";e.SFX_REWARD_SCREEN="reward_screen";e.SFX_MINIGAME_COMPLETE="minigame_complete";e.SFX_PICKUP="pick_up";e.SFX_DROP="drop"},SPpy:function(t,e,i){"use strict";i("7EEF"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.unloadAssetPack=e.unloadFile=void 0;var n=i("TEuq"),s=function(t,e){switch(e.type){case"image":t.cache.checkImageKey(e.key)&&t.cache.removeImage(e.key,!0);break;case"text":t.cache.checkTextKey(e.key)&&t.cache.removeText(e.key);break;case"json":t.cache.checkJSONKey(e.key)&&t.cache.removeJSON(e.key);break;case"xml":t.cache.checkXMLKey(e.key)&&t.cache.removeXML(e.key);break;case"binary":t.cache.checkBinaryKey(e.key)&&t.cache.removeBinary(e.key);break;case"spritesheet":t.cache.checkKey(e.key)&&t.cache.removeSpriteSheet(e.key);break;case"video":t.cache.checkVideoKey(e.key)&&t.cache.removeVideo(e.key);break;case"tilemap":t.cache.checkTilemapKey(e.key)&&t.cache.removeTilemap(e.key);break;case"physics":t.cache.checkPhysicsKey(e.key)&&t.cache.removePhysics(e.key);break;case"bitmapFont":t.cache.checkBitmapFontKey(e.key)&&t.cache.removeBitmapFont(e.key);break;case"atlasJSONArray":case"atlasJSONHash":case"atlasXML":case"atlas":case"textureatlas":t.cache.removeTextureAtlas(e.key);break;case"audiosprite":t.sounds.removeAudioSprite({id:e.key});break;case"audio":t.sounds.removeSound(e.key,e.key);break;default:n.Debugger.log("warn","Asset not unloaded",e.type,e.key)}};e.unloadFile=s;e.unloadAssetPack=function(t,e){Object.keys(e).forEach((function(i){e[i].forEach((function(e){s(t,e)}))}))}},T1LK:function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("XvIX"),i("3Ss1"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("M1I4")),a=n(i("86MP")),r=function(t){function e(e,i){var n;return(n=t.call(this,e)||this).buttonPadding=10,n.screenPosition=i,n.buttons=[],n.groupWidth=0,n.groupHeight=0,n.screenMargin=.02,n.game.scale.onSizeChange.add(n.alignButtons,(0,s.default)(n)),n.positionGroup(),n}(0,a.default)(e,t);var i=e.prototype;return i.addButton=function(t){this.buttons.push(t),this.alignButtons(),this.addChild(t)},i.addButtons=function(t){var e=this;t.forEach((function(t){e.addButton(t)}))},i.removeButton=function(t){this.removeChild(t),this.buttons.splice(this.buttons.indexOf(t),1),this.alignButtons()},i.removeAllButtons=function(){for(;this.children.length>0;)this.removeChildAt(0);this.buttons=[],this.alignButtons()},i.alignButtons=function(){var t=this;this.groupWidth=0,this.groupHeight=0,this.buttons.forEach((function(e){e.x=t.groupWidth,e.y=0,t.groupWidth+=e.width+t.buttonPadding,t.groupHeight=Math.max(t.groupHeight,e.height),e.overridePos&&(e.x+=e.overridePos.x,e.y+=e.overridePos.y)})),1===this.buttons.length&&(this.groupWidth-=this.buttonPadding),this.positionGroup()},i.positionGroup=function(){var t=this.game.width,i=this.game.height,n=this.game.screenPadding,s=0+n,a=0+n,r=0+t-n-this.groupWidth,o=0+i-n-this.groupHeight,h=0+t/2-this.groupWidth/2,l=0+i/2-this.groupHeight/2;switch(this.screenPosition){case e.CENTER:this.y=l,this.x=h;break;case e.CENTER_LEFT:this.y=l,this.x=a;break;case e.CENTER_HARD_LEFT:this.y=l,this.x=0;break;case e.CENTER_RIGHT:this.y=l,this.x=r;break;case e.CENTER_HARD_RIGHT:this.y=l,this.x=0+t-this.groupWidth;break;case e.TOP_LEFT:this.y=s,this.x=a;break;case e.TOP_CENTER:this.y=s,this.x=h;break;case e.TOP_RIGHT:this.y=n,this.x=r;break;case e.BOTTOM_RIGHT:this.y=o,this.x=r;break;case e.BOTTOM_CENTER:this.y=o,this.x=h;break;case e.BOTTOM_LEFT:this.y=o,this.x=a}},i.destroy=function(){for(;this.children.length>0;){this.removeChildAt(0).destroy(!0)}this.game.scale.onSizeChange.remove(this.positionGroup,this),this.buttons=null,this.groupHeight=null,this.groupWidth=null,this.screenPosition=null,t.prototype.destroy.call(this,!0)},e}(Phaser.Group);e.default=r,r.CENTER="CENTER",r.CENTER_LEFT="CENTER_LEFT",r.CENTER_HARD_LEFT="CENTER_HARD_LEFT",r.CENTER_RIGHT="CENTER_RIGHT",r.CENTER_HARD_RIGHT="CENTER_HARD_RIGHT",r.TOP_LEFT="TOP_LEFT",r.TOP_CENTER="TOP_CENTER",r.TOP_RIGHT="TOP_RIGHT",r.BOTTOM_LEFT="BOTTOM_LEFT",r.BOTTOM_RIGHT="BOTTOM_RIGHT",r.BOTTOM_CENTER="BOTTOM_CENTER"},TSJq:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("zgbH"),s=function(){function t(t){this.game=t}var e=t.prototype;return e.getBaseDirectory=function(){return n.PATH_BASE},e.resolveRelatveUrl=function(t){return this.getBaseDirectory()+t},e.getAssetsDirectory=function(t){return t?this.resolveRelatveUrl(n.PATH_ASSETS+t):this.resolveRelatveUrl(n.PATH_ASSETS)},e.getGameAssetsDirectory=function(t,e){return e?this.resolveRelatveUrl(n.PATH_ASSETS+"games/"+t+"/"+e):this.resolveRelatveUrl(n.PATH_ASSETS+"games/"+t+"/")},e.getFontsDirectory=function(t){return this.getAssetsDirectory("fonts/"+t)},e.getCopyXML=function(t){return"locale/"+t+".xml"},t}();e.default=s},VawD:function(t,e,i){"use strict";var n=i("IfHf"),s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),r=s(i("01M/")),o=s(i("fY54")),h=i("zgbH"),l=i("5mNR"),u=i("mQkb"),d=i("Y66D"),c=n(i("zgbH")),g=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(){},i.preload=function(){this.fontsReady=!1,this.loadComplete=!1,this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.crossOrigin="anonymous",this.game.load.pack("boot","assetpack.json",null,this),r.default.load({custom:{families:[h.FONT_REGULAR],urls:[this.game.urls.getFontsDirectory(h.FONT_CSS)]},active:this.fontsLoaded.bind(this),inactive:this.fontsLoaded.bind(this)}),this.game.springRollScaleManagerPlugin=this.game.plugins.add(new u.ScaleManagerPlugin(this.game,this.game.plugins,{width:c.GAME_WIDTH_DEFAULT,height:c.GAME_HEIGHT_DEFAULT,safeWidth:c.GAME_SAFE_WIDTH,safeHeight:c.GAME_SAFE_HEIGHT})),this.game.springRollScaleManagerPlugin.forceRecheck(),this.game.springRollCaptionsPlugin=this.game.plugins.add(new d.CaptionsPlugin(this.game,this.game.plugins)),this.game.add.plugin(PhaserSpine.SpinePlugin,{triangleRendering:!0,debugRendering:!1}),this.game.appShell.runQueuedSpringRollEvents()},i.fontsLoaded=function(){this.fontsReady=!0},i.create=function(){this.game.copy=new o.default(this.game,this.game.cache.getXML("copy_xml")),this.loadComplete=!0},i.update=function(){this.checkLoading()},i.checkLoading=function(){this.loadComplete&&this.fontsReady&&this.game.state.start(l.STATE_LOAD,!0,!1)},e}(Phaser.State);e.default=g},W5ee:function(t,e,i){"use strict";var n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("C9uT")),a=n(i("86MP")),r=i("QklZ"),o=i("zgbH"),h=n(i("GENw")),l=function(t){function e(i){var n,s=i.game,a=i.id,r=i.sfxId,o=i.ariaLabelID,l=i.ariaLabelId,u=i.enabled,d=void 0===u||u,c=i.costume,g=i.sheet,p=i.highlight;return(n=t.call(this,s)||this).id=a,n.isButton=!0,n.createCostumeSprite(c,g),n.sfx_id=r,n.ariaLabelID=o||l,n.isEnabled=null,n.disabled=!1,n.previousInputPriorityID=0,n.onInputDown=new Phaser.Signal,n.onInputOver=new Phaser.Signal,n.onInputOut=new Phaser.Signal,d&&n.enable(),n.updateDisplayState(e.UP),p?(n.highlight=new h.default(n.game,g,p),n.highlight.x=n.costume.x+(n.costume.width-n.highlight.width)/2,n.highlight.y=n.costume.y+(n.costume.height-n.highlight.height)/2,n.addChildAt(n.highlight,0),n.highlight.visible=!1):n.highlight=null,n.isOver&&n.handleInputOver(),n}(0,a.default)(e,t);var i=e.prototype;return i.playHighlight=function(){this.isOver||this.highlight&&this.highlight.playHighlight()},i.showHighlight=function(t){this.highlight?this.highlight.showHighlight(t):t&&t()},i.hideHighlight=function(t){this.highlight?this.highlight.hideHighlight(t):t&&t()},i.stopHighlight=function(){this.highlight&&this.highlight.stopHighlight()},i.pulse=function(){var t=this,e=this.costume.x,i=this.costume.y;this.costume.x+=this.costume.width/2,this.costume.y+=this.costume.height/2,this.costume.anchor.set(.5,.5),this.game.add.tween(this.costume.scale).to({x:1.2,y:1.2},o.PULSE_SPEED,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0).onComplete.addOnce((function(){t.costume&&(t.costume.x=e,t.costume.y=i,t.costume.anchor.set(0,0))}))},i.drawDebugBox=function(t,e){var i=this.game.make.graphics(0,0);i.lineStyle(2,e,1),i.beginFill(e,.3),i.moveTo(t.x,t.y),i.lineTo(t.x+t.width,t.y),i.lineTo(t.x+t.width,t.y+t.height),i.lineTo(t.x,t.y+t.height),i.lineTo(t.x,t.y),i.endFill(),this.addChild(i)},i.createCostumeSprite=function(t,e){if(e||(e="uibuttons"),!t)return e="",this.costumeid="",this.costume=this.game.make.image(0,0,e),void this.addChild(this.costume);"string"==typeof t?this.costumeid=t:(e=t.sheet||e,this.costumeid=t.frame),this.costume=this.game.make.image(0,0,e),this.addChild(this.costume),this.setCostumeStates()},i.setCostumeStates=function(){var t=this.costume.key,e=this.costumeid,i=this.game.cache,n=i.getFrameByName(t,e+"_over")?e+"_over":e,s=i.getFrameByName(t,e+"_down")?e+"_down":n,a=i.getFrameByName(t,e+"_disabled")?e+"_disabled":e;this.costumeStates={UP:{alpha:1,frame:e},OVER:{alpha:1,frame:n},DOWN:{alpha:1,frame:s},DISABLED:{alpha:.5,frame:a}}},i.updateDisplayState=function(t){this.displayState=t,this.updateCostume()},i.updateCostume=function(){if(this.costumeStates){var t=this.costumeStates[this.displayState];this.costume.alpha=t.alpha,this.costume.frameName=t.frame,this.hitArea=new Phaser.Rectangle(0,0,this.costume.width,this.costume.height)}},i.enable=function(){this.isEnabled||(this.isEnabled=!0,this.inputEnabled=!0,this.input.priorityID=this.previousInputPriorityID,this.events.onInputDown.add(this.handleInputDown,this),this.events.onInputUp.add(this.handleInputUp,this),this.events.onInputOver.add(this.handleInputOver,this),this.events.onInputOut.add(this.handleInputOut,this),this.updateDisplayState(e.UP),this.isOver&&this.onOver(!0))},i.disable=function(){this.isEnabled&&(this.previousInputPriorityID=this.input.priorityID,this.isEnabled=!1,this.events.onInputDown.remove(this.handleInputDown,this),this.events.onInputUp.remove(this.handleInputUp,this),this.events.onInputOver.remove(this.handleInputOver,this),this.events.onInputOut.remove(this.handleInputOut,this),this.inputEnabled=!1,this.updateDisplayState(e.DISABLED),this.isOver&&this.onOut())},i.handleInputOut=function(){this.isEnabled&&this.onOut()},i.handleInputOver=function(){this.isEnabled&&this.onOver()},i.handleInputDown=function(){this.isEnabled&&this.onDown()},i.handleInputUp=function(){this.isEnabled&&this.onUp()},i.onOut=function(){this.updateDisplayState(e.UP),this.hideHighlight(),this.onInputOut.dispatch()},i.onOver=function(){this.updateDisplayState(e.OVER),this.showHighlight(),this.onInputOver.dispatch()},i.onDown=function(){this.game.sounds.playSFX(r.SFX_CLICK,{volume:.5}),this.updateDisplayState(e.DOWN),this.onInputDown.dispatch(this)},i.onUp=function(){this.displayState!==e.DOWN||this.isOver||this.updateDisplayState(e.UP)},i.destroy=function(e){void 0===e&&(e=!0),this.disable(),this.onInputDown&&(this.onInputDown.removeAll(),this.onInputDown.dispose(),this.onInputDown=null),this.onInputDown&&(this.onInputOver.removeAll(),this.onInputOver.dispose(),this.onInputOver=null),this.onInputOut&&(this.onInputOut.removeAll(),this.onInputOut.dispose(),this.onInputOut=null),this.costume.destroy(!0),this.costume=null,this.costumeid=null,this.costumeStates=null,this.id=null,this.sfx_id=null,this.ariaLabelID=null,this.isEnabled=null,this.disabled=null,t.prototype.destroy.call(this,e)},(0,s.default)(e,[{key:"width",get:function(){return this.costume.width}},{key:"height",get:function(){return this.costume.height}},{key:"isOver",get:function(){return!(!this.input||!0!==Phaser.Device.desktop)&&this.input.checkPointerOver(this.game.input.mousePointer)}},{key:"isDown",get:function(){return this.displayState===e.DOWN}}]),e}(n(i("pE5k")).default);e.default=l,l.UP="UP",l.OVER="OVER",l.DOWN="DOWN",l.DISABLED="DISABLED"},WOvi:function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("XvIX"),i("XEfP"),i("ocEJ"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("C9uT")),a=n(i("86MP")),r=n(i("oX4q")),o=n(i("GENw")),h=function(t){function e(e,i,n,s){var a;return(a=t.call(this,e)||this).onInputDown=new Phaser.Signal,a.onInputOver=new Phaser.Signal,a.onInputOut=new Phaser.Signal,a.spritesheet=i,a.data=n,a._parent=s,a.isEnabled=!1,a.trackingId=n.trackingId||"-",a.costumes=n.costumes||{},a.draggable=null,a.defaultSprite=null,a.overlay=null,a.placeholder=null,a.costumes.default&&(a.defaultSprite=a.game.make.image(0,0,a.spritesheet,a.costumes.default),a.defaultSprite.anchor.set(.5)),n.highlight?(a.highlight=new o.default(a.game,a.spritesheet,n.highlight),a.highlight.x-=a.highlight.width/2,a.highlight.y-=a.highlight.height/2,a.addChild(a.highlight),a.highlight.visible=!1):a.highlight=null,a.defaultSprite&&a.addChild(a.defaultSprite),n.hitAreas?a.setHitAreas(n.hitAreas):a.defaultSprite&&a.setHitAreas([{x:-a.defaultSprite.width/2,y:-a.defaultSprite.height/2,width:a.defaultSprite.width,height:a.defaultSprite.height}]),a.enable(),a}(0,a.default)(e,t);var i=e.prototype;return i.setPlaceholder=function(t){null===t?this.placeholder&&(this.placeholder.destroy(),this.placeholder=null):null===this.placeholder&&(this._hasDraggable()||this.data.placeholders&&this.data.placeholders[t.id]&&(this.placeholder=this.game.make.image(0,0,this.spritesheet,this.data.placeholders[t.id]),this.placeholder.anchor.set(.5),this.addChild(this.placeholder)))},i.canAcceptDraggable=function(t){return!(this.isFull()&&!this.data.replace)&&(this.allowDraggableOnTarget?this.allowDraggableOnTarget(t):!!this.data.allowAll||!!(this.data.allow&&this.data.allow.indexOf(t.id)>-1))},i.getData=function(){return this.data},i.getDraggable=function(){return this.draggable},i.setDraggable=function(t){this.setPlaceholder(null),null===t&&this.empty(),this.draggable=t,null!==t&&this.costumes[t.id]&&(this.overlay=this.game.make.image(0,0,this.spritesheet,this.costumes[t.id]),this.overlay.anchor.set(.5),this.addChild(this.overlay),this.defaultSprite&&(this.defaultSprite.visible=!1))},i.enable=function(){this.isEnabled||(t.prototype.enable.call(this),this.inputEnabled=!0,this.events.onInputDown.add(this.handleInputDown,this),this.events.onInputOut.add(this.handleInputOut,this),this.events.onInputOver.add(this.handleInputOver,this),this.alreadyOver=this.isOver)},i.disable=function(){this.isEnabled&&(t.prototype.disable.call(this),this.events.onInputDown.remove(this.handleInputDown,this),this.events.onInputOver.remove(this.handleInputOver,this),this.events.onInputOut.remove(this.handleInputOut,this),this.inputEnabled=!1,this.isOver&&this.onInputOut.dispatch(this),this.stopHighlight())},i.handleInputDown=function(){this.alreadyOver=!1,this.isEnabled&&this.onInputDown.dispatch(this)},i.handleInputOver=function(){this.isEnabled&&!this.alreadyOver&&this.onInputOver.dispatch(this)},i.handleInputOut=function(){this.alreadyOver=!1,this.isEnabled&&this.onInputOut.dispatch(this)},i._hasDraggable=function(){return null!==this.draggable},i._removeDraggable=function(){this._hasDraggable()&&(this.draggable.removeFromTarget(),this.draggable=null,this.overlay&&(this.overlay.destroy(),this.overlay=null),this.defaultSprite&&(this.defaultSprite.visible=!0))},i.isFull=function(){if(this.group){var t=!1;return this._parent.getTargetsInGroup(this.group).forEach((function(e){e._hasDraggable()&&(t=!0)})),t}return this._hasDraggable()},i.empty=function(){if(!this.group)return this._removeDraggable();this._parent.getTargetsInGroup(this.group).forEach((function(t){t._removeDraggable()}))},i.destroy=function(){this.onInputDown&&(this.onInputDown.removeAll(),this.onInputDown.dispose(),this.onInputDown=null),this.onInputOver&&(this.onInputOver.removeAll(),this.onInputOver.dispose(),this.onInputOver=null),this.onInputOut&&(this.onInputOut.removeAll(),this.onInputOut.dispose(),this.onInputOut=null),this.defaultSprite&&(this.defaultSprite.destroy(),this.defaultSprite=null),this.overlay&&(this.overlay.destroy(),this.overlay=null),this.placeholder&&(this.placeholder.destroy(),this.placeholder=null),this._parent=null,t.prototype.destroy.call(this)},(0,s.default)(e,[{key:"group",get:function(){return this.data.group||null}},{key:"width",get:function(){return this.defaultSprite?this.defaultSprite.width:t.prototype.width}},{key:"height",get:function(){return this.defaultSprite?this.defaultSprite.height:t.prototype.height}}]),e}(r.default);e.default=h},WzEb:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("abby","abby.json"),this.game.load.spine("location_incidental_am","incidental_am.json"),this.game.load.spine("location_incidental_1","incidental_1.json"),this.game.load.spine("location_incidental_2","incidental_2.json"),this.game.load.spine("location_incidental_3","incidental_3.json"),this.game.load.spine("location_incidental_4","incidental_4.json")},i.unload=function(){this.game.cache.removeSpine("abby"),this.game.cache.removeSpine("location_incidental_am"),this.game.cache.removeSpine("location_incidental_1"),this.game.cache.removeSpine("location_incidental_2"),this.game.cache.removeSpine("location_incidental_3"),this.game.cache.removeSpine("location_incidental_4"),t.prototype.unload.call(this)},e}(n(i("Lzh6")).default);e.default=a},Xilx:function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("XvIX"),i("6WZY"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=i("hDA+"),r=n(i("1kLI")),o=n(i("zMgu")),h=i("QklZ"),l=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.pack("state_extra","extra_assetpack.json",null,this)},i.createMinigame=function(){var t=this;this.enableDeadClick(),this.microscope=this.game.make.sprite(0,0,"state_spritesheet","microscope"),this.microscope.x=-this.microscope.width/2,this.microscope.y=160,this.container.add(this.microscope),this.arms=this.game.make.sprite(0,0,"state_spritesheet","arms"),this.arms.anchor.set(.5,.2),this.arms.x=0,this.arms.y=this.game.defaultHeight,this.arms.visible=!1,this.container.add(this.arms),this.arm_left=this.game.make.sprite(0,0,"state_spritesheet","arm_left"),this.arm_left.anchor.set(.15,0),this.arm_left.visible=!1,this.container.add(this.arm_left),this.arm_right=this.game.make.sprite(0,0,"state_spritesheet","arm_right"),this.arm_right.anchor.set(.85,0),this.arm_right.visible=!1,this.container.add(this.arm_right),this.stars=new o.default(this.game),this.topPlaceholder=this.game.make.sprite(0,0),this.beingDragged=null,this.showState(this.config),this.game.controller.isMinigameFinished(this.minigameId)?this.dialogue.interrupt("completed",(function(){t.showNextDragger()})):this.dialogue.interrupt("not_completed",(function(){t.showNextDragger()}))},i.createAllTargets=function(t){var e=this;this.currentTargets=[],t.targets.forEach((function(t){var i=e.addTarget(t);i.onInputDown.add(e.onTargetPress,e),i.onInputOver.add(e.onTargetOver,e),i.onInputOut.add(e.onTargetOut,e);var n=e.game.make.sprite(t.x,t.y,"state_spritesheet",t.costumes.top);n.anchor.set(.5,.5),e.container.add(n),i.topLayer=n}));for(var i=[],n=[],s=(0,a.shuffle)(t.draggers),r=0;r<s.length&&r<this.currentTargets.length;r++){var o=s[r];-1===n.indexOf(o.id)&&(i.push(o),n.push(o.id))}for(var h=function(t){var n=e.currentTargets[t];n.defaultSprite.tint=parseInt(i[t].colour.substr(1),16),n.topLayer.tint=parseInt(i[t].colour.substr(1),16),n.colour=i[t].colour,n.staticDraggers=[],n.trackingId=i[t].targetTrackingId,n.allowDraggableOnTarget=function(t){return null!==t&&t.colour===n.colour}},l=0;l<i.length;l++)h(l);return{possibleDraggers:i}},i.showState=function(t){var e=this.createAllTargets(t).possibleDraggers;this.disableTargets();for(var i=t.min_targets+Math.floor(Math.random()*(t.max_targets-t.min_targets)),n=[],s=null,a=0;a<i;a++){var r=Math.floor(Math.random()*e.length);0===a?(s=r,n.push(r)):1===a&&r===s?n.push((r+1)%e.length):n.push(r)}this.currentDraggers=[];for(var o=0;o<n.length;o++){var h=e[n[o]],l=this.addDragger(0,this.game.defaultHeight,"dish_horizontal_bottom","dish_horizontal_bottom_hl",h.trackingId);l.colour=h.colour,l.creatureId=h.id,l.creature=this.game.make.sprite(0,0,"state_spritesheet","creature_horizontal"),l.creature.tint=parseInt(l.colour.substr(1),16),l.creature.anchor.set(.5),l.creature.visible=!1,l.sprite.addChild(l.creature);var u=this.game.make.sprite(0,0,"state_spritesheet","dish_horizontal_top");u.anchor.set(.5),l.sprite.addChild(u),l.visible=!1}this.totalDraggerCount=this.currentDraggers.length,this.container.add(this.topPlaceholder)},i.promptHighlights=function(){this.timesPrompted%2==0&&this.currentTargets.forEach((function(t){t.playHighlight((function(){t.playHighlight()}))}))},i.getPromptVO=function(){return this.timesPrompted%2==1?"prompt_1":"prompt_2"},i.onTargetPress=function(t){this.currentDragger&&t&&this.onDroppedOnTarget(this.currentDragger,t)},i.onTargetOver=function(t){this.currentDragger&&t&&t.showHighlight()},i.onTargetOut=function(t){t&&t.hideHighlight()},i.showNextDragger=function(){var t=this;this.cancelPromptTimer(),this.beingDragged=null,this.currentDragger=null,this.wrongAnswers=0,0===this.currentDraggers.length?this.stateComplete():(this.currentDragger=this.currentDraggers.shift(),this.currentDragger.visible=!0,this.currentDragger.disable(),this.dialogue.setVariation(this.currentDragger.colour),this.arms.y=this.game.defaultHeight,this.arms.visible=!0,this.arms.bringToTop(),this.game.add.tween(this.currentDragger).to({y:620},600,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(this.arms).to({y:620},600,Phaser.Easing.Cubic.Out,!0),this.game.time.events.add(1e3,(function(){t.showCloseUpView()})))},i.showCloseUpView=function(){var t=this;if(this.currentDragger){this.disableTargets(!0);var e=this.game.make.sprite(-840,0,"closeup_background"),i=this.game.make.sprite(0,0,"state_spritesheet","closeup_creature_back"),n=this.game.make.sprite(0,0,"state_spritesheet","closeup_creature_middle"),s=this.game.make.sprite(0,0,"state_spritesheet","closeup_creature_front"),a=this.game.make.sprite(-840,0,"closeup_foreground");i.x=-i.width/2,i.y=(this.game.defaultHeight-i.height)/2,i.tint=parseInt(this.currentDragger.colour.substr(1),16),n.x=-n.width/2,n.y=(this.game.defaultHeight-n.height)/2,n.tint=parseInt(this.currentDragger.colour.substr(1),16),s.x=-s.width/2-50,s.y=(this.game.defaultHeight-s.height)/2,s.tint=parseInt(this.currentDragger.colour.substr(1),16),this.container.add(e),this.container.add(i),this.container.add(n),this.container.add(s),this.container.add(a);var r=this.game.add.tween(i).to({x:i.x-40},1800,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0),o=this.game.add.tween(n).to({x:n.x+35},1800,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0),h=this.game.add.tween(s).to({x:s.x+70},1800,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0);this.dialogue.interrupt("closeup"),this.game.time.events.add(3700,(function(){r.stop(),o.stop(),h.stop(),i.destroy(),n.destroy(),s.destroy(),e.destroy(),a.destroy(),t.currentDragger.enable(),t.currentDragger.creature.visible=!0,t.dialogue.interrupt("after_closeup",(function(){t.setPromptTimer()})),t.currentTargets.forEach((function(t){t.visible=!0,t.enable(),t.stopHighlight()}))}))}},i.onStartingDrag=function(e){t.prototype.onStartingDrag.call(this,e),this.arms.visible=!1,this.arm_left.visible=!1,this.arm_left.bringToTop(),this.arm_right.visible=!1,this.arm_right.bringToTop(),this.beingDragged=e},i.update=function(){t.prototype.update.call(this),this.beingDragged&&(this.beingDragged.x<0?(this.arm_left.visible=!1,this.arm_right.visible=!0,this.arm_right.x=this.beingDragged.x-this.beingDragged.width/2,this.arm_right.y=this.beingDragged.y-this.beingDragged.height/2):(this.arm_left.visible=!0,this.arm_right.visible=!1,this.arm_left.x=this.beingDragged.x+this.beingDragged.width/2,this.arm_left.y=this.beingDragged.y-this.beingDragged.height/2))},i.onIncorrectTarget=function(t,e){var i=this,n=this.totalDraggerCount-this.currentDraggers.length;this.trackGA({action:"QuestionWA",label:"Question Asked_"+t.trackingId+"_Question Sequence_"+n+"_Player Answer_"+e.trackingId}),this.trackDL({event:"gameQuestionWA",questionAsked:t.trackingId,questionNumber:n,playerAnswer:e.trackingId}),this.arms.visible=!0,t.returnHome(),this.game.sounds.playSFX(h.SFX_DROP,{volume:.5}),this.game.sounds.playSFX(h.SFX_INCORRECT,{volume:.5}),this.wrongAnswers++,this.currentTargets.forEach((function(t){t.disable()})),this.game.time.events.add(100,(function(){i.currentTargets.forEach((function(t){t.enable()}))})),this.wrongAnswers<3?this.dialogue.play("piece_wrong_"+this.wrongAnswers):(this.dialogue.play("piece_wrong_3"),this.showCorrectDropperHighlights(t,!0))},i.onCorrectTarget=function(t,e){var i=this,n=this.totalDraggerCount-this.currentDraggers.length;this.trackGA({action:"QuestionCA",label:"Question Asked_"+t.trackingId+"_Question Sequence_"+n+"_Player Answer_"+e.trackingId}),this.trackDL({event:"gameQuestionCA",questionAsked:t.trackingId,questionNumber:n,playerAnswer:e.trackingId}),this.addStaticDragger(t,e),this.removeDragger(t),this.game.sounds.playSFX(h.SFX_DROP,{volume:.5}),this.game.sounds.playSFX(h.SFX_CORRECT,{volume:.5}),this.wrongAnswers=0,this.currentDragger=null,this.arms.visible=!1,this.disableTargets(),0===this.currentDraggers.length?this.stateComplete():this.dialogue.play("piece_added",(function(){i.showNextDragger()}))},i.onDroppedOnTarget=function(t,e){this.onInteraction(),this.beingDragged=null,this.arm_left.visible=!1,this.arm_right.visible=!1,this.container.swap(t,this.topPlaceholder),null!==e&&e.canAcceptDraggable(t)&&e.bringToTop(),this.topPlaceholder.bringToTop(),null===e?(this.arms.visible=!0,t.returnHome()):t.colour!==e.colour?this.onIncorrectTarget(t,e):this.onCorrectTarget(t,e)},i.addStaticDragger=function(t,e){var i=e.x<0?"left":"right",n=this.game.make.sprite(0,0,"state_spritesheet","dish_vertical_"+i+"_bottom");n.anchor.set(.5);var s=this.game.make.sprite(0,0,"state_spritesheet","creature_vertical");s.anchor.set(.5),s.tint=parseInt(t.colour.substr(1),16),n.addChild(s);var a=this.game.make.sprite(0,0,"state_spritesheet","dish_vertical_"+i+"_top");return a.anchor.set(.5),n.addChild(a),n.x=e.data.slideStartX+e.staticDraggers.length*e.data.slideSpacingX,n.y=e.data.slideStartY+e.staticDraggers.length*e.data.slideSpacingY,e.defaultSprite.addChild(n),e.staticDraggers.push(n),e.topLayer.bringToTop(),n},i.stateComplete=function(){this.dialogue.interrupt("all_pieces_added"),this.arms.visible=!1,t.prototype.stateComplete.call(this)},i.shutdown=function(){this.microscope&&(this.microscope.destroy(),this.microscope=null),this.arms&&(this.arms.destroy(),this.arms=null),this.arm_left&&(this.arm_left.destroy(),this.arm_left=null),this.arm_right&&(this.arm_right.destroy(),this.arm_right=null),t.prototype.shutdown.call(this)},e}(r.default);e.default=l},Z3wv:function(t,e,i){"use strict";var n=i("R6lU");i("wiMi"),i("7EEF"),i("oLfA"),i("3Ipg"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("l9C2")),r=i("TEuq"),o=function(t){function e(e,i,n){var s;return(s=t.call(this,e)||this).onInteraction=new Phaser.Signal,s.game=e,s.audiospriteID=i,s.dialogueData=n,s.characters={},s.speakingCharacter=null,s.currentAudioID=null,s.pauseTimer=null,s.variations=null,s.currentlySpeaking=!1,n&&n.characters&&s.generateCharacters(n.characters),s}(0,s.default)(e,t);var i=e.prototype;return i.setVariation=function(t){r.Debugger.log("log","Dialog :: setVariation",t),this.variations=[t]},i.setVariations=function(t){r.Debugger.log("log","Dialog :: setVariations",t),this.variations=t},i.generateCharacters=function(t){var e=this;Object.keys(t).forEach((function(i){var n=t[i],s=null;n.sprite?(s=e.game.make.sprite(0,0,"state_spritesheet",n.sprite),n.dialogueClick&&(s.inputEnabled=!0,s.events.onInputDown.add((function(){e.onInteraction.dispatch(),e.currentlySpeaking||e.play(n.dialogueClick)})))):n.spine&&((s=new a.default(e.game,n)).setIdle(),n.dialogueClick&&(s.enable(),s.onInputDown.add((function(){e.onInteraction.dispatch(),e.currentlySpeaking||e.play(n.dialogueClick)})))),s&&(s.anchor.set(.5,.5),s.x=n.x,s.y=n.y,s.default_y=s.y,e.addChild(s),s.update(),e.characters[i]=s)}))},i.getCharacter=function(t){return this.characters[t]},i.addCharacter=function(t,e){this.characters[t]=e},i.play=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(this.currentlySpeaking)return r.Debugger.log("log","Dialogue :: not interrupting current dialogue"),void("function"==typeof e[e.length-1]&&e.pop()());this.interrupt.apply(this,e)},i.interrupt=function(){this.stopDialogue();for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.onComplete="function"==typeof e[e.length-1]?e.pop():null,this.queuedDialogueNames=e,this.currentlySpeaking=!0,this.playNextDialogue()},i.playNextDialogue=function(){if(0===this.queuedDialogueNames.length)return this.currentlySpeaking=!1,void(this.onComplete&&this.onComplete());var t=this.queuedDialogueNames.shift();this.dialogueData&&this.dialogueData.data&&this.dialogueData.data[t]?this.playScript(t,this.dialogueData.data[t]):this.playNextDialogue()},i.setSpeaker=function(t){this.stopSpeaking(),this.speakingCharacter=t},i.startSpeaking=function(){this.speakingCharacter&&(this.speakingCharacter instanceof a.default?this.speakingCharacter.setTalking():this.dialogueData.no_move||this.game.add.tween(this.speakingCharacter).to({y:this.speakingCharacter.default_y-20},200,Phaser.Easing.Cubic.Out,!0))},i.stopSpeaking=function(){this.game&&this.game.springRollCaptionsPlugin.stopCaption(),this.speakingCharacter&&this.game&&(this.speakingCharacter instanceof a.default?this.speakingCharacter.setIdle():this.dialogueData.no_move||this.game.add.tween(this.speakingCharacter).to({y:this.speakingCharacter.default_y},200,Phaser.Easing.Cubic.Out,!0))},i.playScript=function(t,e){var i=this.characters[e.character];this.setSpeaker(i),this.queuedCommands=this.parseScriptCommands(t,Array.isArray(e.script)?[].concat(e.script):[e.script]),this.playNextAudio()},i.parseScriptCommands=function(t,e){Array.isArray(e)||(e=[e]);for(var i=[];e.length>0;){var n=e.shift();if("string"==typeof n)i.push({type:"audio",id:n,caption:n});else if("audio"===n.type)n.hasOwnProperty("caption")||(n.caption=n.id),i.push(n);else if("pause"===n.type)i.push(n);else{var s,a=this.parseScriptCommand(t,n);if(a)if(Array.isArray(a))(s=e).unshift.apply(s,a);else e.unshift(a)}}return i},i.parseScriptCommand=function(t,e){var i=null,n=null;switch(e.type){case"combine":i=[],n=[],this.parseScriptCommands(t,[].concat(e.options)).forEach((function(t){t.caption&&(n.push(t.caption),t.caption=null),i.push(t)})),i.length>0&&(i[0].caption=n.join("+"));break;case"random_exhaust":i=e.options[this.game.controller.getNextRandomExhaust(t)%e.options.length];break;case"exhaust":i=e.options[this.game.controller.getNextExhaust(t)%e.options.length];break;case"random":i=e.options[Math.floor(Math.random()*e.options.length)];break;case"interact":i=!0===Phaser.Device.desktop?e.options.click:e.options.touch;break;case"variation":this.variations&&(i=[],this.variations.forEach((function(t){e.options[t]&&i.push(e.options[t])})))}return i},i.playNextAudio=function(){var t=this;if(this.pauseTimer=null,this.currentAudioID=null,0===this.queuedCommands.length)this.setSpeaker(null),this.playNextDialogue();else{var e=this.queuedCommands.shift();switch(e.type){case"pause":this.stopSpeaking(),this.pauseTimer=this.game.time.events.add(1e3*e.delay,(function(){t.playNextAudio()}));break;case"audio":this.game.sounds.checkSfxExists(e.id,this.audiospriteID)&&this.game.sounds.playVO(e.id,{spriteID:this.audiospriteID,onComplete:this.playNextAudio,onCompleteScope:this})?(this.currentAudioID=e.id,e.caption&&this.game.springRollCaptionsPlugin.playCaption(e.caption),this.startSpeaking()):this.playNextAudio();break;default:r.Debugger.log("warn","Dialogue :: Unknown command",e)}}},i.stopDialogue=function(){this.queuedCommands=[],this.queuedDialogueNames=[],this.onComplete=null,this.currentlySpeaking=!1,this.pauseTimer&&(this.game.time.events.remove(this.pauseTimer),this.pauseTimer=null),this.currentAudioID&&(this.game.sounds.stopAudioSprite(this.currentAudioID,{spriteID:this.audiospriteID}),this.currentAudioID=null),this.stopSpeaking()},i.update=function(){var t=this;Object.keys(this.characters).forEach((function(e){t.characters[e]instanceof a.default&&t.characters[e].update()}))},i.destroy=function(){var e=this;this.stopDialogue(),this.onInteraction&&(this.onInteraction.removeAll(),this.onInteraction.dispose(),this.onInteraction=null),Object.keys(this.characters).forEach((function(t){e.characters[t].destroy()})),this.characters=[],t.prototype.destroy.call(this,!0)},e}(Phaser.Group);e.default=o},Z9oQ:function(t,e,i){"use strict";var n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("M1I4")),a=n(i("86MP")),r=function(t){function e(e){var i;return(i=t.call(this,e)||this).star=i.game.make.sprite(0,0,"generic_sprites","marker"),i.star.anchor.set(.5,.5),i.addChild(i.star),i.star.visible=!0,i.star_over=i.game.make.sprite(0,0,"generic_sprites","marker_over"),i.star_over.anchor.set(.5,.5),i.addChild(i.star_over),i.star_over.visible=!1,i.game.stage.addChild((0,s.default)(i)),i.visible=!1,i.update(),i}(0,a.default)(e,t);var i=e.prototype;return i.checkOver=function(){return this.checkElementOver(this.game.stage)},i.checkElementOver=function(t){for(var e=0;e<t.children.length;e++){var i=t.children[e];if(i.isButton&&i.input&&i.input.checkPointerOver(this.game.input.activePointer))return!0;if(i.children&&i.children.length&&this.checkElementOver(i))return!0}return!1},i.update=function(){this.game.input.activePointer.withinGame&&this.game.input.activePointer.x>-1&&this.game.input.activePointer.y>-1?(this.game.canvas.style.cursor="none",this.x=this.game.input.activePointer.x,this.y=this.game.input.activePointer.y,this.visible=!0,this.game.stage.addChild(this),this.checkOver()?(this.star_over.visible=!0,this.star.visible=!1):(this.star_over.visible=!1,this.star.visible=!0)):(this.game.canvas.style.cursor="default",this.visible=!1)},i.destroy=function(){t.prototype.destroy.call(this,!0)},e}(n(i("pE5k")).default);e.default=r},cp0e:function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("d0OL")),r=n(i("Lzh6")),o=n(i("Dl/w")),h=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("abby","abby.json"),this.game.load.spine("elmo","elmo.json"),this.game.load.spine("am_architect","architect.json"),this.game.load.spine("am_delivery_driver","delivery_driver.json"),this.game.load.spine("am_fire_fighter","fire_fighter.json"),this.game.load.spine("am_musician","musician.json"),this.game.load.spine("am_scientist","scientist.json"),this.game.load.spine("am_vet","vet.json")},i.unload=function(){this.game.cache.removeSpine("abby"),this.game.cache.removeSpine("elmo"),this.game.cache.removeSpine("am_architect"),this.game.cache.removeSpine("am_delivery_driver"),this.game.cache.removeSpine("am_fire_fighter"),this.game.cache.removeSpine("am_musician"),this.game.cache.removeSpine("am_scientist"),this.game.cache.removeSpine("am_vet"),t.prototype.unload.call(this)},i.createState=function(){var e=this;t.prototype.createState.call(this);var i=[];if(this.locationButtons.forEach((function(t){e.game.controller.isLocationAchievementAwarded(t.locationId)||i.push(t)})),0===i.length)this.pos=Math.floor(Math.random()*this.config.width);else{var n=i[Math.floor(Math.random()*i.length)];this.pos=n.x+n.width/2-this.dialogue.width/2}this.container.scrollTo(this.pos,0),this.container.onScroll.add(this.onScroll,this),this.container.onScrollFinished.add(this.onScrollFinished,this),this.abbyClicked=!1;var s=this.dialogue.getCharacter("abby");s.enable(),s.onInputDown.add((function(){e.onInteraction(),e.dialogue.currentlySpeaking||e.abbyClicked||(e.abbyClicked=!0,e.dialogue.play("abby_clicked"))})),this.elmoClicked=!1;var a=this.dialogue.getCharacter("elmo");a.enable(),a.onInputDown.add((function(){e.onInteraction(),e.dialogue.currentlySpeaking||e.elmoClicked||(e.elmoClicked=!0,e.dialogue.play("elmo_clicked"))}))},i.createContainer=function(){return new o.default(this.game,{background:!1,width:this.config.width||0,anchor:"anchor"in this.config?this.config.anchor:.5,scroll:this.config.scroll||0,border:this.config.border||0})},i.playSubsequentVisitAudio=function(){var t=this;Math.random()<.5?this.dialogue.interrupt("subsequent_visit_1",(function(){t.setPromptTimer()})):this.dialogue.interrupt("subsequent_visit_2",(function(){t.setPromptTimer()}))},i.onScroll=function(t){var e=this;this.onInteraction();var i="";t<this.pos?i="left":t>this.pos&&(i="right"),this.pos=t,""===i?this.stoppedMoving():(this.killScrollFinishedTimer(),["abby","elmo"].forEach((function(t){var n=e.dialogue.getCharacter(t);n.dir=i,n.setTalkAnimation("left"===n.dir?"walk_left_talk":"walk_right_talk"),n.setIdleAnimation("left"===n.dir?"walk_left":"walk_right")})))},i.promptHighlights=function(){this.timesPrompted%2==1?(this.game.hud.pulseButton("left"),this.game.hud.pulseButton("right")):this.currentButtons.forEach((function(t){t.playHighlight()}))},i.getPromptVO=function(){return this.timesPrompted%2==1?"prompt_1":"prompt_2"},i.killScrollFinishedTimer=function(){this.scrollFinishedTimer&&(this.game.time.events.remove(this.scrollFinishedTimer),this.scrollFinishedTimer=null)},i.stoppedMoving=function(){var t=this;this.killScrollFinishedTimer(),this.scrollFinishedTimer=this.game.time.events.add(100,(function(){["abby","elmo"].forEach((function(e){var i=t.dialogue.getCharacter(e);i.setTalkAnimation("left"===i.dir?"talk_left":"talk_right"),i.setIdleAnimation("left"===i.dir?"idle_left":"idle_right")}))}))},i.onScrollFinished=function(){this.killScrollFinishedTimer(),this.stoppedMoving()},i.activateHud=function(){this.game.hud.activate({id:a.default.WORLD})},i.shutdown=function(){this.container.onScroll.remove(this.onScroll,this),this.container.onScrollFinished.remove(this.onScrollFinished,this),t.prototype.shutdown.call(this)},e}(r.default);e.default=h},d0OL:function(t,e,i){"use strict";var n=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("fKPv")),a=n(i("M1I4")),r=n(i("86MP")),o=n(i("75Wy")),h=n(i("W5ee")),l=i("6YV8"),u=i("TEuq");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}var c=function(t){function e(e){var i;return(i=t.call(this,e)||this).onScrollLeft=new Phaser.Signal,i.onScrollRight=new Phaser.Signal,i.onClose=new Phaser.Signal,i.onSkip=new Phaser.Signal,i.buttonController=new o.default(e),i.buttonController.onButtonSelected.add(i.handleSelectedButton,(0,a.default)(i)),i.alpha=0,i.game.world.remove((0,a.default)(i)),i.state=null,i.addChild(i.buttonController),i}(0,r.default)(e,t);var i=e.prototype;return i.enable=function(){this.buttonController.enabled=!0},i.disable=function(){this.buttonController.enabled=!1},i.activate=function(t){var i=t.id,n=void 0===i?e.PLAYING:i;this.game.stage.addChild(this),n!==e.WELCOME&&(this.alpha=1),this.configure({id:n})},i.deactivate=function(){this.activate({id:e.NO_HUD})},i.configure=function(t){var i=t.id,n=void 0===i?e.PLAYING:i;this.state={id:n},this.renderButtons()},i.renderButtons=function(){var t=e.STATES[this.state.id];this.buttonController.destroyButtons(),this.buttonController.createButtons(t,2)},i.fadeIn=function(){this.alpha=0,this.game.add.tween(this).to({alpha:1},250).start()},i.handleSelectedButton=function(t){if(this.game.sounds.checkAudioContext(),this.buttonController.enabled)switch(t){case"close":(0,l.getGA)().trackGA({action:"MenuClick",label:"MenuButton_Close_Screen Name_"+(0,l.getGA)().getScreenName()}),(0,l.getGA)().trackDL({event:"gameMenuClick",buttonName:"MenuButton_Close_Screen Name_"+(0,l.getGA)().getScreenName()}),this.onClose.dispatch();break;case"minigame_back":(0,l.getGA)().trackGA({action:"MenuClick",label:"MenuButton_Back_Screen Name_"+(0,l.getGA)().getScreenName()}),(0,l.getGA)().trackDL({event:"gameMenuClick",buttonName:"MenuButton_Back_Screen Name_"+(0,l.getGA)().getScreenName()}),this.game.controller.backToLocation();break;case"exit":break;case"newgame":(0,l.getGA)().trackGA({action:"Play",label:"PlayButton"}),(0,l.getGA)().trackDL({event:"gamePlay",buttonName:"PlayButton"}),this.game.controller.startNewGame();break;case"skip":this.onSkip.dispatch();break;case"home":(0,l.getGA)().trackGA({action:"MenuClick",label:"MenuButton_Home_Screen Name_"+(0,l.getGA)().getScreenName()}),(0,l.getGA)().trackDL({event:"gameMenuClick",buttonName:"MenuButton_Home_Screen Name_"+(0,l.getGA)().getScreenName()}),this.game.controller.cutsceneFinished();break;case"left":(0,l.getGA)().trackGA({action:"MenuClick",label:"MenuButton_Left Arrow_Screen Name_"+(0,l.getGA)().getScreenName()}),(0,l.getGA)().trackDL({event:"gameMenuClick",buttonName:"MenuButton_Left Arrow_Screen Name_"+(0,l.getGA)().getScreenName()}),this.onScrollLeft.dispatch();break;case"right":(0,l.getGA)().trackGA({action:"MenuClick",label:"MenuButton_Right Arrow_Screen Name_"+(0,l.getGA)().getScreenName()}),(0,l.getGA)().trackDL({event:"gameMenuClick",buttonName:"MenuButton_Right Arrow_Screen Name_"+(0,l.getGA)().getScreenName()}),this.onScrollRight.dispatch()}else u.Debugger.log("log","HUD DISABLED : ignoring button",t)},i.pulseButton=function(t){this.buttonController.buttons[t]&&this.buttonController.buttons[t].pulse()},i.setButtonVisibility=function(t,e){this.buttonController.buttons[t]&&("off"===e?(this.buttonController.buttons[t].alpha=0,this.buttonController.buttons[t].disable()):e?(this.buttonController.buttons[t].alpha=1,this.buttonController.buttons[t].enable()):(this.buttonController.buttons[t].alpha=.5,this.buttonController.buttons[t].disable(),this.buttonController.buttons[t].inputEnabled=!0))},i.destroy=function(){this.deactivate(),t.prototype.destroy.call(this,!0)},i.getButtonData=function(t){return this.game.ui_config.buttons[t]},i.createDefaultButton=function(t){var e=this.getButtonData(t);return new h.default(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){(0,s.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({game:this.game},e))},e}(Phaser.Group);e.default=c,c.NO_HUD="NO_HUD",c.WELCOME="WELCOME",c.CUTSCENE="CUTSCENE",c.WORLD="WORLD",c.LOCATION="LOCATION",c.POPUP="POPUP",c.MINIGAME="MINIGAME",c.MINIGAME_SCROLL="MINIGAME_SCROLL",c.MINIGAME_FINISHED="MINIGAME_FINISHED",c.STATES={NO_HUD:[],WELCOME:["newgame"],CUTSCENE:["skip"],WORLD:["left","right"],LOCATION:["home","left","right"],POPUP:["close"],MINIGAME:["minigame_back"],MINIGAME_SCROLL:["minigame_back","left","right"],MINIGAME_FINISHED:[]}},dRqM:function(t,e,i){"use strict";var n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("C9uT")),a=n(i("86MP")),r=n(i("lxir")),o=n(i("GENw")),h=function(t){function e(e,i,n){var s;return(s=t.call(this,e)||this).onInputDown=new Phaser.Signal,s.onInputOver=new Phaser.Signal,s.onInputOut=new Phaser.Signal,s.spritesheet=i,s.data=n,s.id=n.sprite,s.trackingId=n.trackingId||s.id,s.isEnabled=!1,n.highlight?(s.highlight=new o.default(s.game,s.spritesheet,n.highlight),s.highlight.x-=s.highlight.width/2,s.highlight.y-=s.highlight.height/2,s.addChild(s.highlight),s.highlight.visible=!1):s.highlight=null,n.sprite&&(s.sprite=s.game.make.image(0,0,s.spritesheet,n.sprite),s.sprite.anchor.set(.5),s.addChild(s.sprite)),n.animation&&(s.animation=s.game.make.image(0,0,s.spritesheet,n.animation),s.animation.anchor.set(.5),s.addChild(s.animation)),s.data.hitarea?s.hitArea=new Phaser.Rectangle(s.data.hitarea.x,s.data.hitarea.y,s.data.hitarea.width,s.data.hitarea.height):s.sprite&&(s.hitArea=new Phaser.Rectangle(-s.sprite.width/2,-s.sprite.height/2,s.sprite.width,s.sprite.height)),s.animationTimer=null,s.animationCb=null,s.stopAnimation(),s}(0,a.default)(e,t);var i=e.prototype;return i.playAnimation=function(t){this.sprite&&(this.sprite.visible=!1),this.animation&&(this.animation.visible=!0),this.disable(),null!==this.animationTimer&&(this.animationTimer=this.game.time.events.remove(this.animationTimer),this.animationTimer=null),this.animationTimer=this.game.time.events.add(1e3,this.finishAnimation,this),this.animationCb=t},i.finishAnimation=function(){if(this.stopAnimation(),this.animationCb){var t=this.animationCb;this.animationCb=null,t(this)}},i.stopAnimation=function(){this.sprite&&(this.sprite.visible=!0),this.animation&&(this.animation.visible=!1),this.enable()},i.enable=function(){this.isEnabled||(this.isEnabled=!0,this.inputEnabled=!0,this.events.onInputDown.add(this.handleInputDown,this),this.events.onInputOver.add(this.handleInputOver,this),this.events.onInputOut.add(this.handleInputOut,this),this.isOver&&this.onInputOver.dispatch(this))},i.disable=function(){this.isEnabled&&(this.isEnabled=!1,this.events.onInputDown.remove(this.handleInputDown,this),this.events.onInputOver.remove(this.handleInputOver,this),this.events.onInputOut.remove(this.handleInputOut,this),this.inputEnabled=!1,this.hideHighlight(),this.isOver&&this.onInputOut.dispatch(this))},i.handleInputDown=function(){this.isEnabled&&this.onInputDown.dispatch(this)},i.handleInputOver=function(){this.isEnabled&&this.onInputOver.dispatch(this)},i.handleInputOut=function(){this.isEnabled&&this.onInputOut.dispatch(this)},i.destroy=function(){null!==this.animationTimer&&(this.animationTimer=this.game.time.events.remove(this.animationTimer),this.animationTimer=null),this.sprite&&(this.sprite.destroy(),this.sprite=null),this.animation&&(this.animation.destroy(),this.animation=null),this.onInputDown&&(this.onInputDown.removeAll(),this.onInputDown.dispose(),this.onInputDown=null),this.onInputOver&&(this.onInputOver.removeAll(),this.onInputOver.dispose(),this.onInputOver=null),this.onInputOut&&(this.onInputOut.removeAll(),this.onInputOut.dispose(),this.onInputOut=null),t.prototype.destroy.call(this,!0)},(0,s.default)(e,[{key:"width",get:function(){return this.hitArea.width}},{key:"height",get:function(){return this.hitArea.height}}]),e}(r.default);e.default=h},e1ih:function(t,e,i){"use strict";var n=i("R6lU");i("qnda"),i("3Ipg"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("Z3wv")),r=n(i("2BaL")),o=n(i("LClc")),h=i("SPpy"),l=i("6YV8"),u=i("5mNR"),d=i("zgbH"),c=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.init=function(){var t=this,e=Object.keys(u.STATE_MAP).find((function(e){return t instanceof u.STATE_MAP[e]}));e&&e!==u.STATE_LOAD&&(0,l.getGA)().setScreenName(u.COMPONENT_NAME_MAP[e]),this.lastPrompt=null},i.preload=function(){this.loadDisplay=new o.default(this.game),this.game.add.existing(this.loadDisplay),this.game.hud.deactivate(),this.game.load.reset(),this.game.load.crossOrigin="anonymous"},i.loadUpdate=function(){this.loadDisplay&&this.loadDisplay.setProgress(this.game.load.progress/100)},i.create=function(){var t=this;this.config=this.game.cache.getJSON("state_config"),this.game.sounds.addAudioSprite({id:"state_audiosprite"}),this.game.sounds.decode(["state_audiosprite"],this.createState,this),this.decodeSoundsCallback=this.game.time.events.add(d.DECODE_TIMEOUT_SPEED,(function(){t.decodeSoundsCallback=null,t.loadDisplay&&t.loadDisplay.loadBar&&t.loadDisplay.loadBar.copy&&t.loadDisplay.loadBar.copy.setText(t.game.copy.getCopy("loading"))}))},i.update=function(){},i.createState=function(){var t=this;this.decodeSoundsCallback&&(this.game.time.events.remove(this.decodeSoundsCallback),this.decodeSoundsCallback=null),this.loadDisplay&&(this.loadDisplay.setProgress(1),this.game.time.events.add(20,(function(){t.loadDisplay.destroy(),t.loadDisplay=null}))),this.lastInteraction=null,this.timesPrompted=0,this.game.cache.getJSON("state_captions")&&this.game.springRollCaptionsPlugin.setData(this.game.cache.getJSON("state_captions")),this.dialogue=new a.default(this.game,"state_audiosprite",this.config.dialogue),this.dialogue.onInteraction.add((function(){t.onInteraction()})),this.sfx=new r.default(this.game,"state_audiosprite",this.config.sfx)},i.setLastPrompt=function(){this.lastPrompt=Date.now()},i.promptUser=function(){var t=this;this.cancelPromptTimer(),this.timesPrompted++,this.trackGA({action:"TimeoutPlay"}),this.trackDL({event:"gameTimeoutPlay"}),this.setLastPrompt(),this.dialogue.play(this.getPromptVO(),(function(){t.setPromptTimer()})),this.promptHighlights()},i.getPromptVO=function(){return"prompt"},i.promptHighlights=function(){},i.onInteraction=function(){if(this.game.controller.onInteraction(),this.timesPrompted=0,this.setPromptTimer(),null!==this.lastPrompt){var t=Math.min((Date.now()-this.lastPrompt)/1e3,1800);this.trackGA({action:"TOReEngage",value:t}),this.trackDL({event:"gameTOReEngage",duration:t}),this.lastPrompt=null}},i.cancelPromptTimer=function(){this.promptTimer&&(this.game.time.events.remove(this.promptTimer),this.promptTimer=null)},i.setPromptTimer=function(){this.cancelPromptTimer(),this.promptTimer=this.game.time.events.add(d.TIMEOUT_SPEED,this.promptUser,this)},i.trackGA=function(t){(0,l.getGA)().trackGA(t)},i.trackDL=function(t){(0,l.getGA)().trackDL(t)},i.unload=function(){(0,h.unloadAssetPack)(this.game,this.game.cache.getJSON("state_assetpack")),this.game.cache.checkJSONKey("state_extra_assetpack")&&(0,h.unloadAssetPack)(this.game,this.game.cache.getJSON("state_extra_assetpack"))},i.shutdown=function(){this.cancelPromptTimer(),this.dialogue&&(this.dialogue.destroy(),this.dialogue=null),this.sfx&&(this.sfx.destroy(),this.sfx=null),this.loadDisplay&&(this.loadDisplay.destroy(),this.loadDisplay=null),this.container&&(this.container.destroy(),this.container=null),t.prototype.shutdown.call(this),this.unload()},e}(Phaser.State);e.default=c},fY54:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){function t(t,e,i){this.copy={},this.game=t,this.levelDialogue=i;for(var n=e.getElementsByTagName("item"),s=0;s<n.length;s++)this.copy[n[s].getAttribute("id")]=n[s].childNodes[0].nodeValue}return t.prototype.getCopy=function(t,e){return e&&this.copy[t+"_device"]?this.copy[t+"_device"]:this.copy[t]||"copy not found [ "+t+" ]"},t}();e.default=n},gjK2:function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("1kLI")),r=i("QklZ"),o=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.init=function(e,i){t.prototype.init.call(this,e,i),this.layout=this.game.controller.getNextRandomExhaust(this.minigameId)%4+1},i.showState=function(t){this.dialogue.setVariation("layout_"+this.layout);var e=t.layouts[this.layout-1];this.steps=e.steps,this.currentStep=0,this.showNextStep()},i.showNextStep=function(){t.prototype.showState.call(this,this.steps[this.currentStep]),this.totalDraggerCount=this.currentDraggers.length,this.wrongAnswers=0,this.correctAnswers=0,this.currentDraggers.forEach((function(t){t.x+=t.width/2,t.y+=t.height/2})),this.currentTargets.forEach((function(t){t.x+=t.width/2,t.y+=t.height/2}))},i.promptHighlights=function(){if(this.timesPrompted%2==0){var t=this.getFloatingDraggers();if(t.length>0){var e=t[Math.floor(Math.random()*t.length)];e.playHighlight(),this.showCorrectDropperHighlights(e)}}},i.getPromptVO=function(){return this.timesPrompted%2==1?"prompt_1":"prompt_2"},i.onDroppedOnTarget=function(e,i){if(null===i);else if(i.canAcceptDraggable(e)){var n=this.totalDraggerCount-this.currentDraggers.length;this.trackGA({action:"QuestionCA",label:"Question Asked_"+e.trackingId+"_Question Sequence_"+n+"_Player Answer_"+i.trackingId}),this.trackDL({event:"gameQuestionCA",questionAsked:e.trackingId,questionNumber:n,playerAnswer:i.trackingId}),this.game.sounds.playSFX(r.SFX_DROP,{volume:.5}),this.game.sounds.playSFX(r.SFX_CORRECT,{volume:.5}),this.wrongAnswers=0,this.correctAnswers++}else{var s=this.totalDraggerCount-this.currentDraggers.length;this.trackGA({action:"QuestionWA",label:"Question Asked_"+e.trackingId+"_Question Sequence_"+s+"_Player Answer_"+i.trackingId}),this.trackDL({event:"gameQuestionWA",questionAsked:e.trackingId,questionNumber:s,playerAnswer:i.trackingId}),this.game.sounds.playSFX(r.SFX_DROP,{volume:.5}),this.game.sounds.playSFX(r.SFX_INCORRECT,{volume:.5}),this.wrongAnswers++,this.wrongAnswers<3?this.dialogue.play("piece_wrong_"+this.wrongAnswers):(this.dialogue.play("piece_wrong_3"),e.playHighlight(),this.showCorrectDropperHighlights(e))}t.prototype.onDroppedOnTarget.call(this,e,i)},i.stateComplete=function(){this.cleanUp(),this.currentStep++,this.currentStep>=this.steps.length?(this.dialogue.interrupt("all_pieces_added"),t.prototype.stateComplete.call(this)):(this.dialogue.play("piece_added"),this.showNextStep())},e}(a.default);e.default=o},"gra+":function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("96V2"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("44Ot")),r=n(i("dRqM")),o=i("hDA+"),h=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.showState=function(t){var e=this;if(this.currentTargets=[],t.targets.forEach((function(i){e.addTarget(i).visible="all"===t.show_mode})),"all"===t.show_mode)this.targetsToShow=[],this.targetsLeft=this.currentTargets.length;else{if(this.targetsToShow=this.currentTargets,"random"===t.show_mode){this.targetsToShow=(0,o.shuffle)(this.targetsToShow);var i=t.min_targets+Math.floor(Math.random()*(t.max_targets-t.min_targets));this.targetsToShow=this.targetsToShow.slice(0,i)}this.targetsLeft=this.targetsToShow.length}this.boundsX=t.boundsX||null,this.boundsY=t.boundsY||null,this.currentTarget=null,this.targetsToShow.length>0&&(this.currentTarget=this.targetsToShow.pop(),this.currentTarget.visible=!0)},i.showNextTarget=function(){var t=this;this.targetsToShow.length>0&&(this.showTimer=this.game.time.events.add(1e3,(function(){t.currentTarget=t.targetsToShow.pop(),t.currentTarget.visible=!0})))},i.checkBounds=function(t,e){return(null===this.boundsX||t>this.boundsX[0]&&t<this.boundsX[1])&&(null===this.boundsY||e>this.boundsY[0]&&e<this.boundsY[1])},i.addTarget=function(t){var e=new r.default(this.game,"state_spritesheet",t);return e.x=t.x,e.y=t.y,e.onInputOver.add(this.onTargetHit,this),this.container.add(e),this.currentTargets.push(e),e},i.onTargetHit=function(t){t&&(this.onInteraction(),this.currentTarget&&this.currentTarget.stopHighlight(),this.targetsLeft--,this.currentTarget=null,t.disable(),t.playAnimation(this.onAnimationFinished.bind(this)),this.showNextTarget())},i.promptHighlights=function(){this.currentTarget&&this.currentTarget.playHighlight()},i.onAnimationFinished=function(t){t.visible=!1,0===this.targetsLeft&&this.stateComplete()},i.cleanUp=function(){this.currentTargets&&this.currentTargets.forEach((function(t){t.destroy()})),this.showTimer&&(this.game.time.events.remove(this.showTimer),this.showTimer=null),this.currentTarget=null,this.currentTargets=[],t.prototype.cleanUp.call(this)},e}(a.default);e.default=h},"hDA+":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRelativePosition=e.shuffle=void 0;e.shuffle=function(t){for(var e,i,n=t.length;n>0;)i=Math.floor(Math.random()*n),e=t[--n],t[n]=t[i],t[i]=e;return t};var n=function t(e){if(e.parent){var i=t(e.parent);return{x:e.x+i.x,y:e.y+i.y}}return{x:e.x,y:e.y}};e.getRelativePosition=function(t,e){void 0===e&&(e=null);var i=n(t);if(e){var s=n(e);i.x-=s.x,i.y-=s.y}return i}},io6K:function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("gra+")),r=i("hDA+"),o=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.showState=function(e){var i=this;t.prototype.showState.call(this,e),this.foreground=this.game.make.group(),e.foreground.forEach((function(t){i.foreground.add(i.game.make.sprite(t.x,t.y,"state_spritesheet",t.sprite))})),this.container.add(this.foreground),this.handMoveSpeed=1e3,this.hand=this.game.make.sprite(0,0,"state_spritesheet","hands"),this.hand.anchor.set(.5,.5),this.container.add(this.hand),this.splash_sprite=this.game.make.sprite(0,0,"state_spritesheet"),this.splash_sprite.anchor.set(.5,.5),this.splash_anim=this.splash_sprite.animations.add("splash",["splash_sequence_0001","splash_sequence_0002","splash_sequence_0003","splash_sequence_0004","splash_sequence_0005","splash_sequence_0006","splash_sequence_0007","splash_sequence_0008","splash_sequence_0009","splash_sequence_0010"]),this.splash_anim.play(20,!0),this.container.add(this.splash_sprite),this.stream_sprite=this.game.make.sprite(0,0,"state_spritesheet"),this.stream_sprite.anchor.set(.5,1),this.stream_anim=this.stream_sprite.animations.add("stream",["stream_sequence_0001","stream_sequence_0002","stream_sequence_0003","stream_sequence_0004","stream_sequence_0005","stream_sequence_0006","stream_sequence_0007"]),this.stream_anim.play(20,!0),this.container.add(this.stream_sprite),this.handOffset=300,this.handY=this.game.defaultHeight,this.game.add.tween(this).to({handOffset:0},this.handMoveSpeed,Phaser.Easing.Cubic.Out,!0),this.targetHitCount=0,this.update()},i.promptHighlights=function(){var t=this;this.timesPrompted%3==0&&this.currentTarget&&this.currentTarget.playHighlight((function(){t.currentTarget&&t.currentTarget.playHighlight()}))},i.getPromptVO=function(){return this.timesPrompted%3==1?"prompt_1":this.timesPrompted%3==2?"prompt_2":"prompt_3"},i.cleanUp=function(){this.splash_sprite&&(this.splash_sprite.destroy(),this.splash_sprite=null),this.stream_sprite&&(this.stream_sprite.destroy(),this.stream_sprite=null),t.prototype.cleanUp.call(this)},i.onHoseSpraying=function(){var t=this;this.onHoseSprayingFinishedTimeout?this.game.time.events.remove(this.onHoseSprayingFinishedTimeout):this.game.sounds.playSFX("hose_spray",{volume:.2,spriteID:"state_audiosprite",loop:!0}),this.onHoseSprayingFinishedTimeout=this.game.time.events.add(200,(function(){t.game.sounds.stopAudioSprite("hose_spray",{spriteID:"state_audiosprite"}),t.onHoseSprayingFinishedTimeout=null}))},i.onTargetHit=function(t){t&&(this.onInteraction(),this.targetsLeft--,this.targetHitCount++,this.currentTarget=null,t.stopHighlight(),t.disable(),t.sprite.visible=!1,t.animation.visible=!0,t.animation.anchor.set(.5,1),t.animation.y+=t.animation.height/2,this.game.add.tween(t.animation).to({height:0,alpha:0},1e3,Phaser.Easing.Cubic.In,!0),this.game.sounds.playSFX("target_hit",{volume:.5,spriteID:"state_audiosprite"}),0===this.targetsLeft?(this.dialogue.interrupt("all_pieces_hit"),this.game.add.tween(this).to({handOffset:600},2*this.handMoveSpeed,Phaser.Easing.Cubic.Out,!0),this.game.time.events.add(this.handMoveSpeed,this.stateComplete,this)):(this.targetHitCount%2==1&&this.dialogue.play("piece_hit"),this.showNextTarget()))},i.shutdown=function(){this.hand&&(this.hand.destroy(),this.hand=null),t.prototype.shutdown.call(this)},i.update=function(){if(t.prototype.update.call(this),this.hand){var e=(0,r.getRelativePosition)(this.game.input.activePointer,this.hand.parent),i=e.x-this.hand.x,n=e.y-this.handY,s=Math.atan2(n,i)+Math.PI/2;s<-.95?s=-.95:s>.89&&(s=.89),this.hand.y=this.handY+this.handOffset,this.hand.rotation=s;var a=this.hand.x-112*Math.sin(s+Math.PI),o=this.handY+this.handOffset+112*Math.cos(s+Math.PI),h=Math.sqrt((e.x-a)*(e.x-a)+(e.y-o)*(e.y-o)),l=a-h*Math.sin(s+Math.PI),u=o+h*Math.cos(s+Math.PI);this.splash_sprite&&this.stream_sprite&&(this.checkBounds(e.x,e.y)?(this.splash_sprite.visible=!0,this.splash_sprite.x=l,this.splash_sprite.y=u,this.stream_sprite.visible=!0,this.stream_sprite.x=a,this.stream_sprite.y=o,this.stream_sprite.height=h,this.stream_sprite.rotation=s,this.onHoseSpraying()):(this.splash_sprite.visible=!1,this.stream_sprite.visible=!1))}},e}(a.default);e.default=o},l9C2:function(t,e,i){"use strict";var n=i("R6lU");i("wiMi"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("C9uT")),a=n(i("86MP")),r=n(i("lxir")),o=i("TEuq"),h=function(t){function e(e,i){var n;(n=t.call(this,e)||this).onInputDown=new Phaser.Signal,n.onInputOver=new Phaser.Signal,n.onInputOut=new Phaser.Signal,n.currentAnimation=null,n.idleAnimation=i.idle_animation||"idle",n.talkAnimation=i.talk_animation||"talk",n.data=i,n.isEnabled=!1;try{n.spine=n.game.make.spine(0,0,n.data.spine,!0),n.spine.x=0,n.spine.y=0,n.addChild(n.spine),n.spine.setToSetupPose(),n.spine.update()}catch(t){o.Debugger.log("warn","Could not load spine file",n.data.spine)}return n}(0,a.default)(e,t);var i=e.prototype;return i.enable=function(){this.isEnabled||(this.isEnabled=!0,this.inputEnabled=!0,this.data.hitarea?this.hitArea=new Phaser.Rectangle(this.data.hitarea.x,this.data.hitarea.y,this.data.hitarea.width,this.data.hitarea.height):this.spine&&(this.hitArea=new Phaser.Rectangle(0,0,this.spine.width,this.spine.height)),this.events.onInputDown.add(this.handleInputDown,this),this.events.onInputOver.add(this.handleInputOver,this),this.events.onInputOut.add(this.handleInputOut,this),this.isOver&&this.onInputOver.dispatch(this))},i.disable=function(){this.isEnabled&&(this.isEnabled=!1,this.events.onInputDown.remove(this.handleInputDown,this),this.events.onInputOver.remove(this.handleInputOver,this),this.events.onInputOut.remove(this.handleInputOut,this),this.inputEnabled=!1,this.isOver&&this.onInputOut.dispatch(this))},i.handleInputDown=function(){this.isEnabled&&this.onInputDown.dispatch(this)},i.handleInputOver=function(){this.isEnabled&&this.onInputOver.dispatch(this)},i.handleInputOut=function(){this.isEnabled&&this.onInputOut.dispatch(this)},i.isIdle=function(){return this.idleAnimation===this.currentAnimation},i.setIdleAnimation=function(t){this.idleAnimation===this.currentAnimation&&this.loopAnimation(t),this.idleAnimation=t},i.setTalkAnimation=function(t){this.talkAnimation===this.currentAnimation&&this.loopAnimation(t),this.talkAnimation=t},i.setIdle=function(){this.loopAnimation(this.idleAnimation)},i.setTalking=function(){this.loopAnimation(this.talkAnimation)},i.playAnimation=function(t,e,i){var n=this;void 0===i&&(i=!1),(i||t!==this.currentAnimation)&&(this.spine&&this.spine.setAnimationByName(0,t,!1),this.currentAnimation=t,this.spine.onComplete.addOnce((function(){n.setIdle(),e&&e()})))},i.loopAnimation=function(t){t!==this.currentAnimation&&(this.spine&&this.spine.setAnimationByName(0,t,!0),this.currentAnimation=t,this.spine.onComplete.removeAll())},i.setSkins=function(t){if(this.spine){var e,i=(e=this.spine).createCombinedSkin.apply(e,["character-skin-"+t.length].concat(t));this.spine.setSkin(i),this.spine.setToSetupPose()}},i.destroy=function(){this.spine&&(this.spine.onComplete.removeAll(),this.spine.destroy(),this.spine=null),this.onInputDown&&(this.onInputDown.removeAll(),this.onInputDown.dispose(),this.onInputDown=null),this.onInputOver&&(this.onInputOver.removeAll(),this.onInputOver.dispose(),this.onInputOver=null),this.onInputOut&&(this.onInputOut.removeAll(),this.onInputOut.dispose(),this.onInputOut=null),t.prototype.destroy.call(this,!0)},(0,s.default)(e,[{key:"isOver",get:function(){return!(!this.input||!0!==Phaser.Device.desktop)&&this.input.checkPointerOver(this.game.input.mousePointer)}},{key:"width",get:function(){return this.spine?this.spine.width:0}},{key:"height",get:function(){return this.spine?this.spine.height:0}}]),e}(r.default);e.default=h},lxir:function(t,e,i){"use strict";var n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("C9uT")),a=n(i("86MP")),r=function(t){function e(e){var i;return(i=t.call(this,e)||this).anchor.set(.5),i}(0,a.default)(e,t);var i=e.prototype;return i.playHighlight=function(t){void 0===t&&(t=null),this.highlight&&this.highlight.playHighlight(t)},i.showHighlight=function(t){this.highlight?this.highlight.showHighlight(t):t&&t()},i.hideHighlight=function(t){this.highlight?this.highlight.hideHighlight(t):t&&t()},i.stopHighlight=function(){this.highlight&&this.highlight.stopHighlight()},i.destroy=function(){t.prototype.destroy.call(this,!0)},i.drawDebugBox=function(t,e){if(t){var i=this.game.make.graphics(0,0);i.lineStyle(2,e,1),i.beginFill(e,.3),i.moveTo(t.x,t.y),i.lineTo(t.x+t.width,t.y),i.lineTo(t.x+t.width,t.y+t.height),i.lineTo(t.x,t.y+t.height),i.lineTo(t.x,t.y),i.endFill(),this.addChild(i)}},(0,s.default)(e,[{key:"width",get:function(){return 0}},{key:"height",get:function(){return 0}},{key:"isOver",get:function(){return!1}}]),e}(n(i("pE5k")).default);e.default=r},"m/lz":function(t,e,i){"use strict";var n=i("R6lU");i("wiMi"),i("7EEF"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("TSJq")),a=n(i("CDWU")),r=n(i("v2oV")),o=i("zgbH"),h=i("5mNR"),l=i("TEuq"),u=i("zgbH"),d=function(){function t(){this.queuedSpringRollEvents=[]}var e=t.prototype;return e.springRollEvent=function(t,e){switch(t){case"pause":this.game?(l.Debugger.log("log","SpringRoll::pause",e),this.pauseGame(e)):this.queuedSpringRollEvents.push({type:t,result:e});break;case"captionsMuted":this.game&&this.game.springRollCaptionsPlugin?(l.Debugger.log("log","SpringRoll::captionsMuted",e),this.game.springRollCaptionsPlugin.setMute(e)):this.queuedSpringRollEvents.push({type:t,result:e});break;case"soundVolume":this.game&&this.game.sounds?(l.Debugger.log("log","SpringRoll::soundVolume",e),this.game.sounds.soundVolume=e):this.queuedSpringRollEvents.push({type:t,result:e});break;case"voVolume":this.game&&this.game.sounds?(l.Debugger.log("log","SpringRoll::voVolume",e),this.game.sounds.voVolume=e):this.queuedSpringRollEvents.push({type:t,result:e});break;case"musicVolume":this.game&&this.game.sounds?(l.Debugger.log("log","SpringRoll::musicVolume",e),this.game.sounds.musicVolume=e):this.queuedSpringRollEvents.push({type:t,result:e});break;case"sfxVolume":this.game&&this.game.sounds?(l.Debugger.log("log","SpringRoll::sfxVolume",e),this.game.sounds.sfxVolume=e):this.queuedSpringRollEvents.push({type:t,result:e})}},e.runQueuedSpringRollEvents=function(){var t=this;l.Debugger.log("log","Running queued SpringRoll events");var e=[].concat(this.queuedSpringRollEvents);this.queuedSpringRollEvents=[],e.forEach((function(e){var i=e.type,n=e.result;t.springRollEvent(i,n)}))},e.init=function(t){var e,i=this,n=this;this.game=new Phaser.Game(o.GAME_WIDTH_DEFAULT,o.GAME_HEIGHT_DEFAULT,(/webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Phaser.AUTO),o.GAME_DIV_ID,{init:function(){l.Debugger.log("log","Initialising app"),this.game.appShell=n,this.game.springRollApplication=t,this.game.stage.disableVisibilityChange=!0,this.game.preserveDrawingBuffer=!0,this.game.input.maxPointers=1,this.game.stage.backgroundColor=u.GAME_BACKGROUND_COLOR,this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.pageAlignHorizontally=!1,this.game.scale.pageAlignVertically=!1,this.game.defaultWidth=o.GAME_WIDTH_DEFAULT,this.game.defaultHeight=o.GAME_HEIGHT_DEFAULT,this.game.offsetWidth=0,this.game.offsetHeight=0,this.game.screenPadding=.02*Math.max(o.GAME_WIDTH_DEFAULT,o.GAME_HEIGHT_DEFAULT),this.game.aspectController=new r.default(this.game),this.game.sounds=new a.default({game:this.game}),this.game.urls=new s.default(this.game)},preload:function(){},create:function(){var t=this;this.game.onBlur.add(n.onBlur,n),this.game.onFocus.add(n.onFocus,n),this.game.input.onUp.add(n.onFocus,n),this.game.input.onDown.add(n.onFocus,n),this.game.input.onTap.add(n.onFocus,n),this.game.input.onHold.add(n.onFocus,n),Object.keys(h.STATE_MAP).forEach((function(e){t.game.state.add(e,h.STATE_MAP[e],!1)})),this.game.canvas.addEventListener("MSPointerCancel",(function(e){t._pointerCancel(e)})),this.game.canvas.addEventListener("pointercancel",(function(e){t._pointerCancel(e)})),this.game.state.start(h.STATE_BOOT,!0,!1)}}),this.hidden=void 0,this.originalPauseValue=void 0,void 0!==document.hidden?(this.hidden="hidden",e="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",e="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this.hidden&&document.addEventListener(e,(function(){return i.handleVisibilityChange()}),!1),window.addEventListener("onpagehide",(function(){return i.onBlur()}),!1),window.addEventListener("pageshow",(function(){return i.onFocus()}),!1)},e.handleVisibilityChange=function(){document[this.hidden]?this.onBlur():this.onFocus()},e.onBlur=function(){document[this.hidden]&&void 0===this.originalPauseValue&&(this.originalPauseValue=this.game.paused,this.pauseGame(!0))},e.onFocus=function(){void 0!==this.originalPauseValue&&(this.pauseGame(this.originalPauseValue),this.originalPauseValue=void 0)},e.pauseGame=function(t){this.game.paused=t,t?this.game.sound.pauseAll():this.game.sound.resumeAll()},e._pointerCancel=function(t){this.game.input&&this.game.input.enabled&&(t.identifier=t.pointerId,"mouse"===t.pointerType||4===t.pointerType?this.game.input.mousePointer.stop(t):this.game.input.stopPointer(t))},t}();e.default=d},mTlh:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.showState=function(t){this.steps=t.steps,this.currentStep=0,this.showNextStep()},i.showNextStep=function(){t.prototype.showState.call(this,this.steps[this.currentStep])},i.promptHighlights=function(){this.timesPrompted%2==0&&t.prototype.promptHighlights.call(this)},i.getPromptVO=function(){return this.timesPrompted%2==1?"prompt_1":"prompt_2"},i.stateComplete=function(){this.cleanUp(),this.currentStep++,this.currentStep>=this.steps.length?(this.dialogue.interrupt("all_pieces_added"),t.prototype.stateComplete.call(this)):(2===this.currentStep&&this.dialogue.play("piece_added"),this.showNextStep())},e}(n(i("1kLI")).default);e.default=a},oNqG:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("elmo","elmo.json"),this.game.load.spine("location_incidental_am","incidental_am.json"),this.game.load.spine("location_incidental_1","incidental_1.json"),this.game.load.spine("location_incidental_2","incidental_2.json"),this.game.load.spine("location_incidental_3","incidental_3.json"),this.game.load.spine("location_incidental_4","incidental_4.json")},i.unload=function(){this.game.cache.removeSpine("elmo"),this.game.cache.removeSpine("location_incidental_am"),this.game.cache.removeSpine("location_incidental_1"),this.game.cache.removeSpine("location_incidental_2"),this.game.cache.removeSpine("location_incidental_3"),this.game.cache.removeSpine("location_incidental_4"),t.prototype.unload.call(this)},e}(n(i("Lzh6")).default);e.default=a},oX4q:function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("C9uT")),a=n(i("86MP")),r=n(i("lxir")),o=i("hDA+"),h=function(t){function e(e){var i;return(i=t.call(this,e)||this).isEnabled=!0,i}(0,a.default)(e,t);var i=e.prototype;return i.setHitAreas=function(t){this.hitAreas=t,this.hitAreas&&this.hitAreas.forEach((function(t){}))},i.enable=function(){this.isEnabled=!0},i.disable=function(){this.isEnabled=!1},i.canAcceptDraggable=function(){return this.isEnabled},i.getBoundingBox=function(){var t=0,e=0,i=0,n=0;if(this.hitAreas)for(var s=0;s<this.hitAreas.length;s++){var a=this.hitAreas[s];a.x<t&&(t=a.x),a.y<e&&(e=a.x),a.x+a.width>t+i&&(i=a.x+a.width-t),a.y+a.height>e+n&&(n=a.y+a.height-e)}return{x:t,y:e,width:i,height:n}},i.collide=function(t){var e=(0,o.getRelativePosition)(t,this);if(this.hitAreas)for(var i=0;i<this.hitAreas.length;i++){var n=this.hitAreas[i];if(e.x>n.x&&e.x<n.x+n.width&&e.y>n.y&&e.y<n.y+n.height)return!0}return!1},i.setDraggable=function(){},i.setPlaceholder=function(){},i.isFull=function(){return!1},i.empty=function(){},i.destroy=function(){t.prototype.destroy.call(this,!0)},(0,s.default)(e,[{key:"isOver",get:function(){return this.collide(this.game.input.activePointer)}},{key:"width",get:function(){return this.getBoundingBox().width}},{key:"height",get:function(){return this.getBoundingBox().height}},{key:"midPoint",get:function(){var t=this.getBoundingBox();return{x:t.x+t.width/2,y:t.y+t.height/2}}}]),e}(r.default);e.default=h},ohYO:function(t,e,i){},pE5k:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(e,i,n,s,a){var r;return(r=t.call(this,e,i,n,s,a)||this).display=null,r}return(0,s.default)(e,t),e.prototype.update=function(){if(t.prototype.update.call(this),this.alive&&this.children.length>0)for(var e=0;e<this.children.length;e++)this.children[e].update()},e}(Phaser.Sprite);e.default=a},qiOr:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("abby","abby.json"),this.game.load.spine("location_incidental_am","incidental_am.json"),this.game.load.spine("location_incidental_1","incidental_1.json"),this.game.load.spine("location_incidental_2","incidental_2.json"),this.game.load.spine("location_incidental_3","incidental_3.json"),this.game.load.spine("location_incidental_4","incidental_4.json"),this.game.load.pack("state_extra","extra_assetpack.json",null,this)},i.unload=function(){this.game.cache.removeSpine("abby"),this.game.cache.removeSpine("location_incidental_am"),this.game.cache.removeSpine("location_incidental_1"),this.game.cache.removeSpine("location_incidental_2"),this.game.cache.removeSpine("location_incidental_3"),this.game.cache.removeSpine("location_incidental_4"),t.prototype.unload.call(this)},e}(n(i("Lzh6")).default);e.default=a},ssJl:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("C9uT")),a=n(i("86MP")),r=i("zgbH"),o=function(t){function e(e){var i;return(i=t.call(this,e)||this).loaderBG=i.game.make.sprite(0,0,"preloader","loader_bg"),i.addChild(i.loaderBG),i.loaderBar=i.game.make.sprite(0,0,"preloader","loader_bar"),i.loaderBar.x=(i.loaderBG.width-i.loaderBar.width)/2,i.loaderBar.y=(i.loaderBG.height-i.loaderBar.height)/2-4,i.addChild(i.loaderBar),i.masker=i.game.make.graphics(),i.masker.beginFill(16711680),i.masker.drawRect(0,0,1,i.loaderBar.height),i.masker.endFill(),i.masker.x=i.loaderBar.x,i.masker.y=i.loaderBar.y,i.addChild(i.masker),i.loaderBar.mask=i.masker,i.copy=i.game.add.text(0,i.loaderBG.height+25,i.game.copy.getCopy("loading")+" 0%",{font:"48px "+r.FONT_REGULAR,fill:"#6dbe4b",boundsAlignH:"center"}),i.copy.setTextBounds(0,0,i.loaderBG.width),i.addChild(i.copy),i.setProgress(0),i}(0,a.default)(e,t);var i=e.prototype;return i.setProgress=function(t){this.masker.clear(),this.masker.beginFill(16711680),this.masker.drawRect(0,0,this.loaderBar.width*t,this.loaderBar.height),this.masker.endFill(),this.copy.text=this.game.copy.getCopy("loading")+" "+Math.round(100*t)+"%"},i.destroy=function(){this.copy.destroy(),this.copy=null,this.loaderBG.destroy(),this.loaderBG=null,this.loaderBar.destroy(),this.loaderBar=null,this.masker.destroy(),this.masker=null,t.prototype.destroy.call(this,!0)},(0,s.default)(e,[{key:"width",get:function(){return this.loaderBG.width}},{key:"height",get:function(){return this.loaderBG.height}}]),e}(Phaser.Group);e.default=o},v2oV:function(t,e,i){"use strict";var n=i("IfHf");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("zgbH")),a=i("TEuq"),r=function(){function t(t){this.game=t,this.rotateScreen=!1}var e=t.prototype;return e.updateiOSGameSize=function(t){this.updateGameSize(t)},e.updateGameSize=function(t){if(this.game.scale){var e=t.width,i=t.height,n=1;i<s.GAME_SAFE_HEIGHT&&(n=i/s.GAME_SAFE_HEIGHT),e<s.GAME_SAFE_WIDTH&&n>e/s.GAME_SAFE_WIDTH&&(n=e/s.GAME_SAFE_WIDTH),e=e>this.game.defaultWidth?this.game.defaultWidth:Math.floor(e),i=i>this.game.defaultHeight?this.game.defaultHeight:Math.floor(i),e=Math.floor(e/n),i=Math.floor(i/n),e%2==1&&e++,a.Debugger.log("log","Display size",e,i,", scale is",n),this.game.screenPadding=.02*Math.max(e,i),this.game.scale.setGameSize(e,i),this.game.scale.setUserScale(n),this.game.offsetWidth=e/2-this.game.defaultWidth/2,this.game.offsetHeight=i/2-this.game.defaultHeight/2}},t}();e.default=r},vGYV:function(t,e,i){"use strict";var n=i("IfHf"),s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ohYO");var a=i("TEuq"),r=s(i("a8kN")),o=s(i("LQdk")),h=s(i("GhOu")),l=s(i("m/lz")),u=n(i("zgbH")),d=i("vaxU");r.default,o.default,h.default,window.PhaserGlobal={hideBanner:!0},document.getElementById(u.GAME_DIV_ID).className=u.GAME_DIV_CLASSNAME,a.Debugger.minLevel("GENERAL"),a.Debugger.enable(!0),a.Application.uses(new d.GoogleAnalytics);var c=new a.Application({features:{captions:!0,vo:!0,music:!0,sfx:!0}}),g=new l.default;c.state.ready.subscribe((function(t){t&&g.init(c)})),c.state.pause.subscribe((function(t){g.springRollEvent("pause",t)})),c.state.captionsMuted.subscribe((function(t){g.springRollEvent("captionsMuted",t)})),c.state.soundVolume.subscribe((function(t){g.springRollEvent("soundVolume",t)})),c.state.voVolume.subscribe((function(t){g.springRollEvent("voVolume",t)})),c.state.musicVolume.subscribe((function(t){g.springRollEvent("musicVolume",t)})),c.state.sfxVolume.subscribe((function(t){g.springRollEvent("sfxVolume",t)}));var p=c;e.default=p},vWDz:function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("vw/H"),i("6WZY"),i("q4B+"),i("eVxf"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("oX4q")),r=n(i("1kLI")),o=n(i("l9C2")),h=i("QklZ"),l=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("minigame_pour","pour.json")},i.unload=function(){this.game.cache.removeSpine("minigame_pour")},i.createMinigame=function(){this.targetHue=this.config.targets[this.game.controller.getNextRandomExhaust(this.minigameId)%this.config.targets.length],this.dialogue.setVariation("target_hue_"+this.targetHue),t.prototype.createMinigame.call(this)},i.getPromptVO=function(){return this.huesAdded.length>0?"prompt_2":"prompt_1"},i.promptHighlights=function(){this.currentDraggers.forEach((function(t){t.playHighlight()}))},i.createBeakerAndPourer=function(){this.beaker=this.game.make.sprite(0,0,"state_spritesheet","beaker_bottom"),this.beaker.x=-500,this.beaker.y=200,this.container.add(this.beaker),this.pourer=new o.default(this.game,{spine:"minigame_pour"}),this.pourer.x=-380,this.pourer.y=0,this.pourer.visible=!1,this.container.add(this.pourer),this.pourer.update(),this.stirrer=this.game.make.sprite(0,0,"state_spritesheet"),this.stir_anim=this.stirrer.animations.add("abby_hand_stir",["abby_hand_stir0001","abby_hand_stir0002","abby_hand_stir0003","abby_hand_stir0004","abby_hand_stir0005","abby_hand_stir0006","abby_hand_stir0007","abby_hand_stir0008","abby_hand_stir0009"]),this.stirrer.x=-450,this.stirrer.y=-320,this.stirrer.visible=!1,this.container.add(this.stirrer),this.stream=this.game.make.sprite(0,0,"state_spritesheet","stream"),this.stream.x=-245,this.stream.y=170,this.stream.height=350,this.stream.visible=!1,this.container.add(this.stream),this.addBeakerColours(),this.beakerTop=this.game.make.sprite(0,0,"state_spritesheet","beaker_top"),this.beakerTop.x=this.beaker.x,this.beakerTop.y=this.beaker.y,this.container.add(this.beakerTop)},i.addBeakerColours=function(){this.beakerColour=this.game.make.sprite(0,0),this.beakerColour.x=this.beaker.x+this.beaker.width/2,this.beakerColour.y=this.beaker.y+this.beaker.height-12,this.beakerColour.anchor.set(.5,1),this.container.add(this.beakerColour),this.beakerColourFull=this.game.make.sprite(0,0),this.beakerColourFull.x=this.beakerColour.x,this.beakerColourFull.y=this.beakerColour.y,this.beakerColourFull.anchor.set(.5,1),this.container.add(this.beakerColourFull)},i.showState=function(t){var e=this;this.createBeakerAndPourer(),this.currentTargets=[],this.addTarget({x:-500,y:100,hitareas:[{x:0,y:0,width:340,height:500}]}),this.currentDraggers=[],t.draggers.forEach((function(t){var i=e.addDragger(t.x,t.y,"vial_bottom","vial_hl","Drag "+e.config.trackingIds[t.hue.toString()]);i.hue=t.hue;var n=e.game.make.sprite(0,0,"state_spritesheet","vial_colour");n.anchor.set(.5),n.tint=e.hueToColour(i.hue),i.sprite.addChild(n);var s=e.game.make.sprite(0,0,"state_spritesheet","vial_top");s.anchor.set(.5),i.sprite.addChild(s)})),this.container.add(this.topPlaceholder),this.huesAdded=[],this.emptyVials=[],this.lastDragger=null,this.wrongAnswers=0,this.showTargetAnimation()},i.showTargetAnimation=function(){var t=this,e=this.game.make.sprite(0,0,"state_spritesheet","target_bottom"),i=this.game.make.sprite(0,0,"state_spritesheet","target_colour");i.anchor.set(.5,.5),i.x=e.width/2,i.y=e.height/2,i.tint=this.hueToColour(this.targetHue),e.addChild(i),e.x=800,e.y=200,this.container.add(e);var n=this.game.make.sprite(0,0,"state_spritesheet","anim_instruction");n.x=900,n.y=200,this.container.add(n),this.game.add.tween(e).to({x:300,y:50},600,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(n).to({x:400,y:50},600,Phaser.Easing.Cubic.Out,!0),this.game.time.events.add(600,(function(){t.game.add.tween(n).to({x:900,y:200},600,Phaser.Easing.Cubic.Out,!0),t.game.time.events.add(600,(function(){n.destroy()}))}))},i.addTarget=function(t){var e=new a.default(this.game);return e.setHitAreas(t.hitareas),e.x=t.x,e.y=t.y,this.container.add(e),this.currentTargets.push(e),e},i.onDroppedOnTarget=function(t,e){this.container.swap(t,this.topPlaceholder),null!==e&&e.canAcceptDraggable(t)&&e.bringToTop(),this.topPlaceholder.bringToTop(),null===e?t.returnHome():!e.canAcceptDraggable(t)||this.huesAdded.length>=2?t.returnHome():(this.lastDragger=t,this.stream.tint=this.hueToColour(t.hue),this.huesAdded.push(t.hue),t.returnHome(),t.visible=!1,this.disableDraggers(),this.pourColour())},i.draw1Hue=function(t,e,i,n,s){var a=-s/2,r=-n-s/2,o=this.game.make.graphics(0,0);o.beginFill(this.hueToColour(e[0])),o.drawEllipse(i/2,a,i/2,s/2),o.drawRect(0,r,i,a-r),o.drawEllipse(i/2,r,i/2,s/2),o.endFill(),t.loadTexture(o.generateTexture())},i.draw2Hues=function(t,e,i,n,s,a){var r=-a/2,o=-n-a/2,h=-s,l=this.game.make.graphics(0,0);l.beginFill(this.hueToColour(e[0])),l.drawEllipse(i/2,r,i/2,a/2),l.drawRect(0,h,i,r-h),l.endFill(),l.beginFill(this.hueToColour(e[1])),l.drawRect(0,o,i,h-o),l.endFill(),l.x=-i/2,t.addChild(l),this.gradient&&(this.gradient.x=-i/2,this.gradient.y=h-2*a/3,t.addChild(this.gradient));var u=this.game.make.graphics(0,0);u.beginFill(this.hueToColour(e[1])),u.drawEllipse(i/2,o,i/2,a/2),u.endFill(),u.x=-i/2,t.addChild(u)},i.drawBeakerLiquid=function(t,e,i){var n=200*i/100;t.removeChildren(),1===e.length?this.draw1Hue(t,e,270,n,100):this.draw2Hues(t,e,270,n,100,100)},i.pourColour=function(){var t=this;switch(this.cancelPromptTimer(),this.game.sounds.playSFX("water_pour",{volume:.5,spriteID:"state_audiosprite",loop:!0}),this.stream.visible=!0,this.pourer.visible=!0,this.huesAdded[this.huesAdded.length-1]){case 0:this.pourer.playAnimation("pour_red");break;case 120:this.pourer.playAnimation("pour_yellow");break;case 240:this.pourer.playAnimation("pour_blue")}if(this.beakerTop.bringToTop(),2===this.huesAdded.length){this.gradientBitmapData=this.game.make.bitmapData(270,100);var e=this.gradientBitmapData.context.createLinearGradient(0,0,0,this.gradientBitmapData.height);e.addColorStop(0,this.hueToHexColour(this.huesAdded[1])),e.addColorStop(1,this.hueToHexColour(this.huesAdded[0])),this.gradientBitmapData.context.fillStyle=e,this.gradientBitmapData.context.fillRect(0,0,this.gradientBitmapData.width,this.gradientBitmapData.height),this.gradient=this.game.make.sprite(0,0,this.gradientBitmapData)}var i=50*(this.huesAdded.length-1),n={step:i},s=this.game.add.tween(n).to({step:i+50},1500);s.onUpdateCallback((function(){t.drawBeakerLiquid(t.beakerColour,t.huesAdded,n.step),t.beakerColour.visible=!0})),s.start(),this.game.time.events.add(1500,this.onColourPoured,this)},i.onColourPoured=function(){var t=this;this.game.sounds.stopAudioSprite("water_pour",{spriteID:"state_audiosprite"});var e=this.game.make.sprite(this.pourer.x+100,this.pourer.y+100,"state_spritesheet","vial_bottom");if(e.anchor.set(.5),this.container.add(e),this.emptyVials.push(e),this.game.add.tween(e).to({x:this.lastDragger.originalPosition.x,y:this.lastDragger.originalPosition.y},600,Phaser.Easing.Cubic.Out,!0),this.stream.visible=!1,this.pourer.visible=!1,2===this.huesAdded.length){var i=this.calculateHue();this.stirrer.visible=!0,this.stir_anim.play(10,!0),this.game.sounds.playSFX("beaker_stir",{volume:.5,spriteID:"state_audiosprite",loop:!0}),this.game.time.events.add(2400,(function(){t.onColoursMixed()})),this.drawBeakerLiquid(this.beakerColourFull,[i],100),this.beakerColourFull.visible=!0,this.beakerColourFull.alpha=0,this.game.add.tween(this.beakerColourFull).to({alpha:1},2e3,Phaser.Easing.Cubic.InOut,!0),this.beakerTop.bringToTop()}else this.stir_anim.stop(),this.stirrer.visible=!1,this.enableDraggers(),this.setPromptTimer()},i.onColoursMixed=function(){var t=this;this.game.sounds.stopAudioSprite("beaker_stir",{spriteID:"state_audiosprite"}),this.stir_anim.play(),this.stirrer.visible=!1;var e=this.calculateHue();if(this.dialogue.setVariations(["target_hue_"+this.targetHue,"current_hue_"+(e+360)%360]),this.compareHues(e,this.targetHue))this.trackGA({action:"QuestionCA",label:"Question Asked_"+this.config.trackingIds[this.targetHue.toString()]+"_Question Sequence_1_Player Answer_"+this.config.trackingIds[e.toString()]}),this.trackDL({event:"gameQuestionCA",questionAsked:this.config.trackingIds[this.targetHue.toString()],questionNumber:1,playerAnswer:this.config.trackingIds[e.toString()]}),this.game.sounds.playSFX(h.SFX_CORRECT,{volume:.5}),this.wrongAnswers=0,this.dialogue.interrupt("correct"),this.stateComplete();else if(this.trackGA({action:"QuestionWA",label:"Question Asked_"+this.config.trackingIds[this.targetHue.toString()]+"_Question Sequence_1_Player Answer_"+this.config.trackingIds[e.toString()]}),this.trackDL({event:"gameQuestionWA",questionAsked:this.config.trackingIds[this.targetHue.toString()],questionNumber:1,playerAnswer:this.config.trackingIds[e.toString()]}),this.currentDraggers.forEach((function(t){t.visible=!0,t.returnHome()})),this.disableDraggers(),this.emptyVials.forEach((function(t){t.destroy(!0)})),this.emptyVials=[],this.game.sounds.playSFX(h.SFX_INCORRECT,{volume:.5}),this.wrongAnswers++,this.wrongAnswers<3)this.dialogue.interrupt("incorrect_"+this.wrongAnswers,(function(){t.incorrectMix()}));else{this.dialogue.interrupt("incorrect_3",(function(){t.incorrectMix()}));for(var i=0;i<this.currentDraggers.length-1;i++)for(var n=i+1;n<this.currentDraggers.length;n++){var s=this.addHues(this.currentDraggers[i].hue,this.currentDraggers[n].hue);this.compareHues(s,this.targetHue)&&(this.currentDraggers[i].playHighlight(),this.currentDraggers[n].playHighlight())}}},i.incorrectMix=function(){this.beakerColour.removeChildren(),this.beakerColourFull.removeChildren(),this.gradient&&(this.gradient.destroy(),this.gradient=null,this.gradientBitmapData.destroy(),this.gradientBitmapData=null),this.beakerColour.visible=!1,this.beakerColourFull.visible=!1,this.huesAdded=[],this.enableDraggers(),this.setPromptTimer()},i.hueToHexColour=function(t){return"#"+this.hueToColour(t).toString(16).padStart(6,"0")},i.hueToColour=function(t){for(;t<0;)t+=360;return t%=360,parseInt(this.config.colours[t.toString()],16)},i.compareHues=function(t,e){for(;t<0;)t+=360;for(;e<0;)e+=360;return t%360==e%360},i.calculateHue=function(){return 0===this.huesAdded.length?0:1===this.huesAdded.length?this.huesAdded[0]:this.addHues(this.huesAdded[1],this.huesAdded[0])},i.addHues=function(t,e){var i=e-t;return i>180?i-=360:i<-180&&(i+=360),t+i/2},i.onRemovedFromTarget=function(t){t.returnHome()},i.cleanUp=function(){this.pourer&&(this.pourer.destroy(),this.pourer=null,this.stream.destroy(),this.stream=null),this.stirrer&&(this.stirrer.destroy(),this.stirrer=null),t.prototype.cleanUp.call(this)},i.shutdown=function(){this.emptyVials.forEach((function(t){t.destroy(!0)})),this.emptyVials=[],this.beaker&&(this.beaker.destroy(),this.beaker=null,this.beakerColour.destroy(),this.beakerColour=null,this.beakerColourFull.destroy(),this.beakerColourFull=null),this.gradient&&(this.gradient.destroy(),this.gradient=null,this.gradientBitmapData.destroy(),this.gradientBitmapData=null),t.prototype.shutdown.call(this)},e}(r.default);e.default=l},x1tP:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("BHXi")),a=n(i("6R9f")),r=n(i("d0OL")),o=i("5mNR"),h=i("6YV8"),l=function(){function t(t){this.game=t}var e=t.prototype;return e.getAutoJump=function(){return null},e.init=function(){this.model=new s.default(this.game),this.setStartTime("game"),this.game.hud=new r.default(this.game),this.game.hud.enable(),this.stateController=new a.default(this.game)},e.startNewGame=function(){var t=this.getAutoJump();if(t)switch(t){case o.LOCATION_ARCHITECT:case o.LOCATION_DELIVERY_DRIVER:case o.LOCATION_FIRE_FIGHTER:case o.LOCATION_MUSICIAN:case o.LOCATION_SCIENTIST:case o.LOCATION_VET:case o.LOCATION_WORLD:return this.jumpStart(t);case o.MINIGAME_MODEL_BUILDING:case o.MINIGAME_DRAFT_A_BUILDING:return this.jumpStart(o.LOCATION_ARCHITECT,t);case o.MINIGAME_DELIVERY_TIME:case o.MINIGAME_STACK_PARCELS:return this.jumpStart(o.LOCATION_DELIVERY_DRIVER,t);case o.MINIGAME_FIRE_FIGHTER_DRESS:case o.MINIGAME_FIRE_FIGHTER_HOSE:return this.jumpStart(o.LOCATION_FIRE_FIGHTER,t);case o.MINIGAME_PLAY_THE_DRUMS:case o.MINIGAME_WRITE_A_TUNE:return this.jumpStart(o.LOCATION_MUSICIAN,t);case o.MINIGAME_EXPERIMENT:case o.MINIGAME_MICROSCOPE:return this.jumpStart(o.LOCATION_SCIENTIST,t);case o.MINIGAME_TEETH_CLEANING:case o.MINIGAME_VET_PATIENT:return this.jumpStart(o.LOCATION_VET,t)}this.stateController.startState({nextState:o.STATE_CUTSCENE,nextStateParams:[!0,!1]})},e.jumpStart=function(t,e){void 0===e&&(e=null),e?(this.model.currentLocationId=t,this.enterMinigame(e)):this.enterLocation(t)},e.cutsceneFinished=function(){this.enterLocation(o.LOCATION_WORLD)},e.backToWorld=function(){this.enterLocation(o.LOCATION_WORLD)},e.enterLocation=function(t){this.model.currentLocationId=t,this.model.currentMinigameId=null,this.stateController.startState({nextState:this.model.currentLocationId,nextStateParams:[!0,!1,this.model.currentLocationId]})},e.backToLocation=function(){this.model.currentMinigameId=null,this.stateController.startState({nextState:this.model.currentLocationId,nextStateParams:[!0,!1,this.model.currentLocationId]})},e.enterMinigame=function(t){this.model.currentMinigameId=t,this.stateController.startState({nextState:this.model.currentMinigameId,nextStateParams:[!0,!1,this.model.currentLocationId,this.model.currentMinigameId]})},e.onInteraction=function(){this.model.interactionCount++},e.setStartTime=function(t){this.model.setStartTime(t)},e.getElapsedTime=function(t){return this.model.getElapsedTime(t)},e.getRoundNumber=function(t){return this.model.getRoundNumber(t)},e.minigameFinished=function(t){this.model.minigameFinished(t)},e.isMinigameFinished=function(t){return this.model.isMinigameFinished(t)},e.locationVisited=function(t){this.model.locationVisited(t)},e.isLocationVisited=function(t){return this.model.isLocationVisited(t)},e.locationAchievementAwarded=function(t){this.model.locationAchievementAwarded(t);var e=Math.floor(this.model.getLocationAchievementCount()/3);if(this.model.getPlaythroughCompleteAwarded()<e){this.model.playthroughCompleteAwarded();var i=this.model.getElapsedTime("game");(0,h.getGA)().trackGA({action:"PlaythroughComplete",label:"Playthrough Number_"+e+"_Playthrough Completed",value:i}),(0,h.getGA)().trackDL({action:"gamePlaythroughComplete",playthroughNumber:e,duration:i})}},e.isLocationAchievementAwarded=function(t){return this.model.isLocationAchievementAwarded(t)},e.minigameTickAwarded=function(t){this.model.minigameTickAwarded(t)},e.isMinigameTickAwarded=function(t){return this.model.isMinigameTickAwarded(t)},e.getNextExhaust=function(t){return this.model.getNextExhaust(t)},e.getNextRandomExhaust=function(t){return this.model.getNextRandomExhaust(t)},t}();e.default=l},xH6S:function(t,e,i){"use strict";var n=i("R6lU");i("7EEF"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("l9C2")),r=n(i("zMgu")),o=n(i("dRqM")),h=n(i("44Ot")),l=i("QklZ"),u=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("minigame_play_the_drums_spine","skeleton.json")},i.unload=function(){this.game.cache.removeSpine("minigame_play_the_drums_spine")},i.createMinigame=function(){var t=this;this.enableDeadClick(),this.drums=new a.default(this.game,{spine:"minigame_play_the_drums_spine"}),this.drums.x=-this.drums.width/2,this.drums.y=-550,this.drums.setIdle(),this.container.add(this.drums),this.drums.update(),this.stars=new r.default(this.game),this.walkthrough=!1,this.game.controller.isMinigameFinished(this.minigameId)?this.dialogue.interrupt("completed",(function(){t.showState(t.config)})):this.dialogue.interrupt("not_completed",(function(){t.showState(t.config)}))},i.showState=function(t){var e=this;this.currentTargets=[],t.targets.forEach((function(t){e.addTarget(t)})),this.currentPhrase=[];for(var i=0;i<t.phrase_length;i++)this.currentPhrase.push(Math.floor(Math.random()*this.currentTargets.length));this.startLength=t.start_length,this.currentPhraseLength=t.start_length,this.wrongAnswers=0,this.timeouts=0,this.startPlayingCall()},i.addTarget=function(t){var e=new o.default(this.game,"state_spritesheet",t);return e.x=t.x,e.y=t.y,e.onInputDown.add(this.onTargetPress,this),this.container.add(e),this.currentTargets.push(e),e},i.promptHighlights=function(){},i.promptUser=function(){var t=this;this.cancelPromptTimer(),this.trackGA({action:"TimeoutPlay"}),this.trackDL({event:"gameTimeoutPlay"}),this.setLastPrompt(),this.timeouts++,this.walkthrough||this.timeouts%2!=1?(this.dialogue.play("prompt_3",(function(){t.setPromptTimer()})),this.highlightCorrectDrum()):0===this.currentPhrasePosition?this.dialogue.play("prompt_1",(function(){t.setPromptTimer(),t.startPlayingCall()})):(this.dialogue.play("prompt_2",(function(){t.setPromptTimer()})),this.playAnimation("all_hl"))},i.highlightCorrectDrum=function(){var t=this.currentTargets[this.currentPhrase[this.currentPhrasePosition]];this.playAnimation(t.data.highlight_animation)},i.startPlayingCall=function(){this.disableTargets(),this.currentPhrasePosition=0,this.playNextCallTargetAnimation()},i.playNextCallTargetAnimation=function(){var t=this,e=this.currentTargets[this.currentPhrase[this.currentPhrasePosition]];this.playAnimation(e.data.call_animation,e.data.sfx,(function(){t.onCallAnimationTargetFinished()}))},i.onCallAnimationTargetFinished=function(){this.currentPhrasePosition++,this.currentPhrasePosition>=this.currentPhraseLength?this.onCallAnimationFinished():this.playNextCallTargetAnimation()},i.onCallAnimationFinished=function(){this.dialogue.interrupt("call_finished"),this.currentPhrasePosition=0,this.enableTargets(),this.setPromptTimer()},i.startWalkthrough=function(){this.currentPhrasePosition=0,this.walkthrough=!0,this.cancelPromptTimer(),this.playNextWalkthroughTargetAnimation()},i.playNextWalkthroughTargetAnimation=function(){var t=this,e=this.currentTargets[this.currentPhrase[this.currentPhrasePosition]];this.disableTargets(),this.playAnimation(e.data.highlight_animation,null,(function(){t.enableTargets()}))},i.onTargetPress=function(t){var e=this,i=this.currentTargets[this.currentPhrase[this.currentPhrasePosition]];this.onInteraction(),this.disableTargets(),this.playAnimation(t.data.response_animation,t.data.sfx,(function(){t===i?e.onCorrectTarget(t,i):e.onIncorrectTarget(t,i)}))},i.onCorrectTarget=function(t,e){var i=this;this.trackGA({action:"QuestionCA",label:"Question Asked_"+e.trackingId+"_Question Sequence_"+this.currentPhrasePosition+"_Player Answer_"+t.trackingId}),this.trackDL({event:"gameQuestionCA",questionAsked:e.trackingId,questionNumber:this.currentPhrasePosition,playerAnswer:t.trackingId}),this.currentPhrasePosition++,this.timeouts=0,this.currentPhrasePosition<this.currentPhraseLength?this.walkthrough?this.playNextWalkthroughTargetAnimation():this.enableTargets():(this.game.sounds.playSFX(l.SFX_CORRECT,{volume:.5}),this.dialogue.interrupt("hit_correct",(function(){i.onResponseComplete()})))},i.onIncorrectTarget=function(t,e){var i=this;this.trackGA({action:"QuestionWA",label:"Question Asked_"+e.trackingId+"_Question Sequence_"+this.currentPhrasePosition+"_Player Answer_"+t.trackingId}),this.trackDL({event:"gameQuestionWA",questionAsked:e.trackingId,questionNumber:this.currentPhrasePosition,playerAnswer:t.trackingId}),this.game.sounds.playSFX(l.SFX_INCORRECT,{volume:.5}),this.wrongAnswers++,this.walkthrough?(this.dialogue.play("prompt_3",(function(){i.enableTargets()})),this.highlightCorrectDrum()):this.wrongAnswers>1?(this.currentPhrase.length=this.currentPhraseLength,this.dialogue.interrupt("hit_wrong_2",(function(){i.startWalkthrough()}))):this.dialogue.interrupt("hit_wrong_1",(function(){i.startPlayingCall()}))},i.onResponseComplete=function(){this.currentPhraseLength===this.currentPhrase.length?this.stateComplete(!0):this.wrongAnswers>1?this.stateComplete(!1):(this.currentPhraseLength++,this.startPlayingCall())},i.disableTargets=function(){this.currentTargets.forEach((function(t){t.disable()}))},i.enableTargets=function(){this.currentTargets.forEach((function(t){t.enable()}))},i.playAnimation=function(t,e,i){var n=this;this.playingDrumAnimation=!0,this.drums.setIdle(),this.drums.playAnimation(t,(function(){n.onDrumAnimationComplete(i)}),!0),e?(this.playingDrumSound=!0,this.sfx.play(e,(function(){n.onDrumSoundComplete(i)}))):this.playingDrumSound=!1},i.onDrumSoundComplete=function(t){this.playingDrumSound=!1,this.playingDrumSound||this.playingDrumAnimation||!t||this.game.time.events.add(400,t,this)},i.onDrumAnimationComplete=function(t){this.playingDrumAnimation=!1,this.playingDrumSound||this.playingDrumAnimation||!t||this.game.time.events.add(400,t,this)},i.stateComplete=function(e){t.prototype.stateComplete.call(this),e?this.dialogue.interrupt("finished_correct"):this.dialogue.interrupt("finished_wrong")},i.cleanUp=function(){this.currentTargets&&this.currentTargets.forEach((function(t){t.destroy()})),this.currentTargets=[],t.prototype.cleanUp.call(this)},i.shutdown=function(){this.drums&&(this.drums.destroy(),this.drums=null),t.prototype.shutdown.call(this)},e}(h.default);e.default=u},zMgu:function(t,e,i){"use strict";i("7EEF"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("QklZ"),s=i("hDA+"),a=function(){function t(t){this.game=t,this.containers=[]}var e=t.prototype;return e.addParticle=function(t,e,i,n,s){var a=s[Math.floor(Math.random()*s.length)],r=n[0]+Math.floor(Math.random()*(n[1]-n[0])),o=Math.sqrt(e*e+i*i),h=2*Math.random()*Math.PI,l=o*(.3+.3*Math.random()),u=this.game.make.sprite(Math.sin(h)*e*.5,Math.cos(h)*i*.5,"generic_sprites",a);t.add(u),this.game.add.tween(u).to({alpha:0},r,Phaser.Easing.Sinusoidal.In,!0),this.game.add.tween(u).to({x:u.x+Math.sin(h)*l,y:u.y+Math.cos(h)*l},r+10,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce((function(){u.destroy(!0)}))},e.burst=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=this.game.add.group(),a=(0,s.getRelativePosition)(t);n.x=a.x+e*t.width,n.y=a.y+i*t.height;for(var r=0;r<25;r++)this.addParticle(n,t.width>0?t.width:100,t.height>0?t.height:100,[700,1400],["particle_small","particle_medium"]);this.containers.push(n)},e.nova=function(){var t=this.game.add.group();t.x=this.game.width/2,t.y=this.game.height/2;for(var e=0;e<40;e++)this.addParticle(t,.75*this.game.height,.75*this.game.height,[1200,2200],["particle_medium","particle_large"]);this.game.sounds.playSFX(n.SFX_STARBURST,{volume:.5}),this.containers.push(t)},e.destroy=function(){this.containers.forEach((function(t){t.destroy(!0)})),this.containers=null},t}();e.default=a},zeHK:function(t,e,i){"use strict";var n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.preload=function(){t.prototype.preload.call(this),this.game.load.spine("elmo","elmo.json"),this.game.load.spine("location_incidental_am","incidental_am.json"),this.game.load.spine("location_incidental_1","incidental_1.json"),this.game.load.spine("location_incidental_2","incidental_2.json"),this.game.load.spine("location_incidental_3","incidental_3.json"),this.game.load.spine("location_incidental_4","incidental_4.json")},i.unload=function(){this.game.cache.removeSpine("elmo"),this.game.cache.removeSpine("location_incidental_am"),this.game.cache.removeSpine("location_incidental_1"),this.game.cache.removeSpine("location_incidental_2"),this.game.cache.removeSpine("location_incidental_3"),this.game.cache.removeSpine("location_incidental_4"),t.prototype.unload.call(this)},e}(n(i("Lzh6")).default);e.default=a},zgbH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DL_TRACKING_GAMENAME=e.GTM_TRACKING_CATEGORY=e.FONT_CSS=e.FONT_REGULAR=e.PATH_ASSETS=e.PATH_BASE=e.GAME_DIV_CLASSNAME=e.GAME_DIV_ID=e.DECODE_TIMEOUT_SPEED=e.TIMEOUT_SPEED=e.PULSE_SPEED=e.HIGHLIGHT_SPEED=e.GAME_SAFE_HEIGHT=e.GAME_SAFE_WIDTH=e.GAME_BACKGROUND_COLOR=e.GAME_HEIGHT_DEFAULT=e.GAME_WIDTH_DEFAULT=e.APP_VERSION=void 0;e.APP_VERSION="1.1.2";e.GAME_WIDTH_DEFAULT=1680;e.GAME_HEIGHT_DEFAULT=720;e.GAME_BACKGROUND_COLOR="0xffffff";e.GAME_SAFE_WIDTH=960;e.GAME_SAFE_HEIGHT=720;e.HIGHLIGHT_SPEED=800;e.PULSE_SPEED=500;e.TIMEOUT_SPEED=8e3;e.DECODE_TIMEOUT_SPEED=4e3;e.GAME_DIV_ID="gameContent";e.GAME_DIV_CLASSNAME="canvas_container absolute_center page_background trap";e.PATH_BASE="./";e.PATH_ASSETS="assets/";e.FONT_REGULAR="SesameTeachingBlack";e.FONT_CSS="stylesheet.css";e.GTM_TRACKING_CATEGORY="Game_A Job For Me";e.DL_TRACKING_GAMENAME="A Job For Me"},zhmu:function(t,e,i){"use strict";var n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("86MP")),a=n(i("gra+")),r=n(i("GENw")),o=i("hDA+"),h=function(t){function e(){return t.apply(this,arguments)||this}(0,s.default)(e,t);var i=e.prototype;return i.init=function(e,i){t.prototype.init.call(this,e,i),this.animal=this.game.controller.getNextRandomExhaust(this.minigameId)%3+1},i.preload=function(){t.prototype.preload.call(this),this.game.load.pack("state_extra","extra_assetpack"+this.animal+".json",null,this)},i.showState=function(e){this.dialogue.setVariation("animal_"+this.animal),e.targets=e["animal"+this.animal+"_targets"],this.totalTargets=e.targets.length,this.face=this.game.make.sprite(0,0,"animal"+this.animal+"_face"),this.face.anchor.set(.5,0),this.container.add(this.face),this.stain=this.game.make.sprite(0,0,"state_spritesheet","animal"+this.animal+"_stain"),this.stain.anchor.set(.5,0),this.stain.x=e["animal"+this.animal+"_stain"][0],this.stain.y=e["animal"+this.animal+"_stain"][1],this.highlight=new r.default(this.game,"state_spritesheet","animal"+this.animal+"_teeth_hl"),this.highlight.anchor.set(.5,0),this.highlight.x=this.stain.x-this.highlight.width/2,this.highlight.y=this.stain.y+(this.stain.height-this.highlight.height)/2,this.container.add(this.highlight),this.highlight.visible=!1,this.container.add(this.stain),t.prototype.showState.call(this,e),this.brushHighlight=new r.default(this.game,"state_spritesheet","brush_hl"),this.brushHighlight.visible=!1,this.container.add(this.brushHighlight),this.brush=this.game.make.sprite(0,0,"state_spritesheet","brush"),this.container.add(this.brush),this.update(),this.setPromptTimer()},i.promptHighlights=function(){this.timesPrompted%2==1?(this.highlight.visible=!0,this.highlight.playHighlight()):(this.brushHighlight.visible=!0,this.brushHighlight.playHighlight())},i.getPromptVO=function(){return this.timesPrompted%2==1?"prompt_1":"prompt_2"},i.onTeethBrushing=function(){var t=this;this.onTeethBrushingFinishedTimeout?this.game.time.events.remove(this.onTeethBrushingFinishedTimeout):this.game.sounds.playSFX("brush_teeth",{volume:.5,spriteID:"state_audiosprite",loop:!0}),this.onTeethBrushingFinishedTimeout=this.game.time.events.add(500,(function(){t.game.sounds.stopAudioSprite("brush_teeth",{spriteID:"state_audiosprite"}),t.onTeethBrushingFinishedTimeout=null}))},i.onTargetHit=function(e){e&&(t.prototype.onTargetHit.call(this,e),this.game.add.tween(e).to({alpha:0},1e3,Phaser.Easing.Cubic.In,!0),this.stain.alpha=this.targetsLeft/this.totalTargets,this.onTeethBrushing(),0===this.targetsLeft?this.dialogue.interrupt("all_pieces_hit"):this.dialogue.play("piece_hit"))},i.shutdown=function(){this.brush&&(this.brush.destroy(),this.brush=null),this.highlight&&(this.highlight.destroy(),this.highlight=null),this.brushHighlight&&(this.brushHighlight.destroy(),this.brushHighlight=null),this.stain&&(this.stain.destroy(),this.stain=null),this.face&&(this.face.destroy(),this.face=null),t.prototype.shutdown.call(this)},i.update=function(){if(t.prototype.update.call(this),this.brush){var e=(0,o.getRelativePosition)(this.game.input.activePointer,this.brush.parent);this.brush.x=e.x-90,this.brush.y=e.y-40,this.brushHighlight&&(this.brushHighlight.x=this.brush.x+(this.brush.width-this.brushHighlight.width)/2,this.brushHighlight.y=this.brush.y+(this.brush.height-this.brushHighlight.height)/2)}},e}(a.default);e.default=h}},[[0,2,1]]]);